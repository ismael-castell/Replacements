(self.webpackChunk=self.webpackChunk||[]).push([[2143],{33096:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","course-card-container":"_3rrla","course-list":"_3EINK _3rrla","image-container":"iNDwf","_course-card-base":"zA0zE","_course-card":"_2s7-g zA0zE","course-card-white":"zAIdz _2s7-g zA0zE","course-card-transparent":"uS_Xr _2s7-g zA0zE","course-card-header":"OiLKR","badge-row":"_137vt",badge:"_3j5gj","hatching-badge":"_4_fyk _3j5gj","learning-badge-container":"rOB_o _3j5gj","learning-badge":"_2QAJe _6rxB4 _2jNpf","beta-badge":"_2UXQT _3j5gj","_language-name":"_25WYd","language-name-white":"_3ly0h _25WYd","language-name-transparent":"ybptu _25WYd","_learn-count":"_3G1xD","learn-count-white":"_1Dcvf _3G1xD","learn-count-transparent":"_3kfO4 _3G1xD"}},394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_button:"_27Lhl","cta-button":"_3yQTJ _27Lhl",description:"_3D9Yz","dark-plus":"_2WxgN","dark-super":"Vi_RQ","dismiss-mobile":"_22TXY ZpZ4W","dismiss-desktop":"keNlq _27Lhl","dismiss-mobile-plus":"_2KQtQ _4dwZQ","dismiss-desktop-plus":"_2xlqU keNlq _27Lhl","dismiss-mobile-dark-plus":"_1UkSX _2Xxi7","dismiss-desktop-dark-plus":"_2SUW6 _27Lhl _2Zb01","dismiss-mobile-red":"WiUQ0 _22TXY ZpZ4W","dismiss-desktop-red":"_1i5OU keNlq _27Lhl","dismiss-mobile-super":"_1kPI8 _3dYjW","dismiss-desktop-super":"_3ZDAY keNlq _27Lhl","dismiss-mobile-dark-super":"PhT2j _2Xxi7","dismiss-desktop-dark-super":"_349Yn _27Lhl _2Zb01",grid:"D2Can","has-description":"_2Bv54","has-dismiss":"_2q1yT","has-image":"_18Uy5","image-container":"ixpWY","left-bottom":"_3UxVy","right-top":"dqlNe",title:"_171ia"}},36843:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",error:"_14ezr","invalid-form-fields":"_2pLas _14ezr","invalid-form-field":"_1G8OV _14ezr","general-error":"_38ciC _14ezr","debug-error-details":"ka4vU"}},82793:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","_hoverable-cell":"HcCiJ","user-cell-minimal":"_1p4nk HcCiJ","user-popover":"_3fQZ_","user-popover-wrap":"_2nNOn","v-white":"_2W9Rv _1qqNj _2jNpf","user-item":"_1O5Vj","user-link":"OinNF _1Jk5X","logged-out-topbar-wrap":"_1UDxB","splash-topbar-wrap":"VIArj","logged-out-topbar":"_3shUr","logged-out-logo-container":"_31Zea","logged-out-logo":"_1Iy-H","right-header":"_2stpn","hidden-on-mobile":"_1Uyv-","ui-language-wrap":"oIYBe","ui-language":"_1nF80","ui-language-base":"_2KnEg","ui-language-text":"_1eWzQ _2KnEg","ui-language-text-gray":"_166Dl _2KnEg","ui-language-picker":"_2sAPv",_icon:"SzuBt",caret:"_1fl7C _1qqNj _2jNpf","caret-gray":"sqhET _9mYhl _2jNpf","get-started":"_23Rhv _2dZP2","login-button":"_3nprV _2dZP2","hidden-everywhere":"fwYNM","arrow-with-margin-gray":"p0JB5"}},44536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",right:"_2QjSA","account-link-container":"_24Po4","account-link-buttons-container":"_2yVVk","account-icon":"_16bPi","account-text":"_1UYxD","language-chooser-list":"_3thSj","_top-bar-container-base":"VJQfL _23rtc","topbar-container":"_1F_pn VJQfL _23rtc","topbar-container-control":"_2ZKdb VJQfL _23rtc","_top-bar-base":"vSmYc",topbar:"zjpsS vSmYc","topbar-control":"TUxJ9 vSmYc","_background-base":"LbDYs",_background:"I430y LbDYs","_background-control":"_1s70s LbDYs","background-general-control":"_3vq3V _1s70s LbDYs","background-primer-page-control":"_1D0ri _1s70s LbDYs","background-general":"_3q8F1 I430y LbDYs","background-primer-page":"_3UNNF I430y LbDYs","inner-container":"_3hl8U","button-group-container":"_1ntOW",title:"DYCFd",subtitle:"_3QCyr","top-left-button":"_1tAdQ _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ _2sPx0 _2jNpf _1G1lu","button-group-option":"_1niBE",left:"_3wdmr","continue-btn":"_3Zy4Q","hdyhas-continue-btn":"gJ3Z4",facebook:"KpM8t fb3uN",google:"_2Dar-","not-now":"_1Uc0E","paths-container":"lqlF7","path-title":"_2cltK","path-btn":"_1lHHm","placement-onboarding-icon":"zOays","placement-test-onboarding-icon":"_1fa9i","user-motivation-container":"_3lxh2","onboarding-choice-container":"jnHDq","user-motivation-choice-group":"_4g7CC","hdyhau-choice-group":"MLVtm",icon:"_3FavH",choice:"XH783",bottom:"_18aNm","progress-bar":"_1PPqZ",quit:"fCAG0 _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ _1DC8p _2jNpf"}},88528:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210"}},47725:(e,t,n)=>{"use strict";n.d(t,{P:()=>u,Z:()=>d});var i=n(27378),o=n(95324),s=n(4289),r=n(17060),a=n(51158),l=n(88868),c=n(785);class u extends i.Component{constructor(){super(...arguments),this.handleClick=e=>{var t;const{trackingScreen:n,trackingTarget:i}=this.props;"a"===(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&(0,c.j)("click",{screen:n,target:i})}}render(){return i.createElement("span",{onClick:this.handleClick},this.props.children)}}const d=i.forwardRef(((e,t)=>{var n,{anchorRef:u,activeClassName:d,autoFocus:p,children:m,id:g,onClick:h,locationState:_,trackingScreen:v,trackingTarget:f}=e;const y=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["anchorRef","activeClassName","autoFocus","children","id","onClick","locationState","trackingScreen","trackingTarget"]),E=i.useRef(null),b=i.useMemo((()=>(0,o.Z)([...u?[u]:[],t,E])),[u,t,E]);(0,r.Z)({disabled:!g,id:g,offset:-100});const S=e=>{v&&f&&(0,c.j)("click",{screen:v,target:f}),null==h||h(e)};if(i.useEffect((()=>{var e;p&&(null===(e=E.current)||void 0===e||e.focus())}),[p]),"target"in y&&y.target&&"_blank"===y.target.toLowerCase()&&(y.rel="rel"in y&&y.rel&&"noopener"!==y.rel.toLowerCase()?`${y.rel} noopener`:"noopener"),!(null===(n=y.href)||void 0===n?void 0:n.startsWith("#"))&&y.href&&(0,l.Iw)(y.href)){y.href.startsWith("http")&&console.warn("Routable URL includes a protocol and domain");const{hash:e,pathname:t,search:n}=y.href.startsWith("http")?new URL(y.href):new URL(y.href,window.location.origin);return y.to={hash:e,pathname:t,search:n,state:_},delete y.href,i.createElement(s.OL,Object.assign({},y,{activeClassName:d||"",onClick:S,ref:b}),m)}return void 0!==d&&(0,a.Kp)("activeClassName was set on a native anchor tag",{data:{href:y.href},once:!0}),i.createElement("a",Object.assign({},y,{onClick:S,ref:b,tabIndex:0}),m)}))},43670:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(60042),o=n.n(i),s=n(27378),r=n(4088),a=n(42659);var l=n(60610),c=n(785),u=n(66195);const d={large:63,medium:48,xlarge:77},p=e=>{var t,n;const{forceNoPicture:i=!1,size:p,useSize:m=!0,user:g}=e,h=(0,l.Fx)(a.dY),_=(0,l.Fx)(a.gg),v=g.id===h,f=`${e.picture||g.picture}${m?`/${p}`:""}`,y=null!==(t=e.displaySize)&&void 0!==t?t:d[p];return(0,u.z_)(f)||i||_?s.createElement(r.Z,{id:g.id,name:g.name,size:null!=y?y:p,style:v&&!i?"ghost":"colored",username:g.username}):s.createElement("img",{alt:null!==(n=g.name)&&void 0!==n?n:g.username,className:o()("_33LFc",c.qE),src:f,style:{height:y,width:y}})}},81928:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(27378),o=n(47725),s=n(30033),r=n(785),a=n(2945);const l=({[s.m5]:e,children:t,className:n})=>{const l=(0,a.Gi)();return i.createElement(o.Z,Object.assign({className:n,href:l?`https://support.duolingo.com/hc/${l}`:"/help",onClick:()=>{(0,r.j)("help_center_tap",{})}},(0,s._q)(e)),t)}},19778:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(60042),o=n.n(i),s=n(27378);var r=n(30977),a=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const l=({className:e,guaranteedSafeSrc:t,style:n})=>{const[i,l]=s.useState("");return s.useEffect((()=>{a(void 0,void 0,void 0,(function*(){l(yield(e=>a(void 0,void 0,void 0,(function*(){return(yield(new r.Sl).getText(e)).data.replace(/(<svg[^>]+)\sid=".*?"/,"$1")})))(t))}))}),[]),s.createElement("span",{className:o()("_286XF",e),dangerouslySetInnerHTML:{__html:i},style:n})}},22498:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=(0,n(1398).Z)((()=>Promise.all([n.e(3),n.e(9681),n.e(6342)]).then(n.bind(n,19983)).then((e=>({default:e.LottieAnimation})))))},54126:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(60042),o=n.n(i),s=n(27378),r=n(83063),a=n(47725),l=n(19778),c=n(43539),u=n(20042),d=n(52263);const p={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_wrap:"_2SJZg","size-default":"_3_UBz","size-compact":"EY75l","size-icon":"_31mcG",icon:"_2Gbos",text:"_1sq2h",wrap:"_2tJXd _2SJZg _2mU94","wrap-blue":"_2uyc5 _2SJZg _1vSRH","wrap-white":"_247QD _2SJZg _3qZKu"};var m=n(68903),g=n(13840),h=n(785);const _=({children:e,className:t,href:n,image:i,onClick:c,onDarkBackground:u,size:d="default",style:m="white"})=>s.createElement(a.Z,{className:o()((0,r.y)({variant:"blue"===m||u?"solid":"stroke"}),p["wrap"+("blue"===m?"-blue":u?"-white":"")],p[`size-${d}`],t),href:n,onClick:c},s.createElement(l.Z,{className:p.icon,guaranteedSafeSrc:i}),s.createElement("span",{className:p.text},e)),v=e=>{var{forceLanguage:t,type:n,via:i}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["forceLanguage","type","via"]);switch(s.useEffect((()=>{i&&(0,h.j)("web_to_app_store_load",{via:i})}),[]),n){case"apple":return s.createElement(_,Object.assign({image:u},o),"en"===t?s.createElement("span",null,s.createElement("span",{className:"subtext"},"Download on the"),"App Store"):"es"===t?s.createElement("span",null,s.createElement("span",{className:"subtext"},"Descárgala en el"),"App Store"):(0,g._i)(7893));case"china":return s.createElement(_,Object.assign({image:c},o),s.createElement("span",null,s.createElement("span",null,"下载请前往"),"360 手机助手"));case"google":return s.createElement(_,Object.assign({image:d},o),"en"===t?s.createElement("span",null,s.createElement("span",{className:"subtext"},"Get it on"),"Google Play"):"es"===t?s.createElement("span",null,s.createElement("span",{className:"subtext"},"Disponible en"),"Google Play"):(0,g._i)(9328));default:return(0,m.RJ)(n),null}}},38722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(60042),o=n.n(i),s=n(27378),r=n(22498),a=n(72865),l=n(47754);var c=n(60610);const u=({className:e,randomize:t=!1})=>{const n=(0,c.Tb)(),[i,u]=s.useState(!1),[d,p]=(0,a.Z)(),[m,g]=((e,t=!0)=>{const[n,i]=s.useState(t);return s.useEffect((()=>{if(t&&!n){const t=setTimeout((()=>{i(!0)}),Math.random()*e);return()=>clearTimeout(t)}!t&&n&&i(!1)}),[t,n]),[n,()=>i(!1)]})(t?1e4:0,d&&i);return n?null:s.createElement(s.Suspense,{fallback:null},s.createElement("span",{ref:p},s.createElement(r.Z,{className:o()("_3PvTu",e),isPlaying:m,loop:!0,onCompleteLoop:()=>{t&&i&&g()},onDOMLoaded:()=>u(!0),onDestroy:()=>u(!1),path:l})))}},2352:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(60042),o=n.n(i),s=n(27378),r=n(80254),a=n(33389);const l={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",overlay:"_1QS4w","overlay-visible":"_1sKsx _1QS4w",svg:"_1Qm1A"},c=({additionalClassName:e,className:t,cx:n,cy:i,height:a,isVisible:c,r:u,style:d,width:p})=>{const[m]=s.useState(r.ZP.uniqueId("controls/Spotlight"));return s.createElement("svg",{className:o()(l.svg,t,e),height:a,style:d,width:p},s.createElement("defs",null,s.createElement("clipPath",{clipRule:"evenodd",id:`clip-${m}`},s.createElement("path",{d:`M 0 0 h ${p} v ${a} h ${-p} z\n              M ${n-u}, ${i}\n              a ${u},${u} 0 1,1 ${2*u},0\n              a ${u},${u} 0 1,1 ${-2*u},0`}))),s.createElement("rect",{className:l["overlay"+(c?"-visible":"")],clipPath:`url(#clip-${m})`,height:"100%",width:"100%"}))},u=({animateOnMount:e,className:t,cx:n,cy:i,height:o,isVisible:r,r:l,width:u})=>s.createElement(a.Z,{animateOnMount:e,isVisible:r},s.createElement(c,{additionalClassName:t,cx:n,cy:i,height:o,isVisible:r,r:l,width:u}))},56090:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(60042),o=n.n(i),s=n(27378),r=n(50065),a=n(81734),l=n(47725),c=n(42659),u=n(33096),d=n(30033),p=n(26886),m=n(67173),g=n(13840),h=n(74245);const _=(0,r.$j)((e=>({config:(0,c.Mb)(e)})))((({className:e,config:t,course:n,headingTag:i="div",href:r,isLoggedIn:c=!1,learning:_=!1,onSelectCourse:v,theme:f="white"})=>{const{fromLanguageId:y,learningLanguageId:E,numLearners:b,numLearnersString:S,phase:w,progress:T}=n;let I;const k=(0,p.s7)(t,y,c,E,w)&&w===h.AP.Active?h.AP.Beta:w;switch(k){case h.AP.Active:I=(0,g._i)(8380,{progress:T});break;default:I=(0,g._i)(9517,{num_learners:b,num_learners_string:S})}let C=null;if(_)C=s.createElement("div",{className:u.Z["learning-badge-container"]},s.createElement("span",{className:u.Z["learning-badge"]}));else switch(k){case h.AP.Active:C=s.createElement("span",{className:u.Z["hatching-badge"]},(0,g._i)(20972));break;case h.AP.Beta:C=s.createElement("span",{className:u.Z["beta-badge"]},(0,g._i)(20274))}const R=i||"div",O=()=>s.createElement("div",{className:u.Z["image-container"]},s.createElement("div",{className:u.Z["badge-row"]},C),s.createElement("div",{className:u.Z["course-card-header"]},s.createElement(a.Z,{lang:E,size:88})),s.createElement(R,{className:u.Z[`language-name-${f}`]},(0,g._i)(154,{language_name:(0,h.vY)(E)})),s.createElement("div",{className:u.Z[`learn-count-${f}`]},I)),N=Object.assign({className:o()(u.Z[`course-card-${f}`],e),onClick:v},(0,d._q)(m.V.LanguageCard,`language-${E}`));return r?s.createElement(l.Z,Object.assign({},N,{href:r}),O()):s.createElement("button",Object.assign({},N),O())}))},57344:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i=n(60042),o=n.n(i),s=n(27378),r=n(95269),a=n(39675),l=n(60097),c=n(14349),u=n(43744),d=n(55193),p=n(28781),m=n(12378),g=n(86962),h=n(71945),_=n(7748),v=n(14446),f=n(28717),y=n(57693);var E=n(30033),b=n(67173),S=n(68903),w=n(13840);const T=(e,t,n)=>{switch(e){case"empty":switch(t){case"light":switch(n){case"light":return u;case"bold-light":return c;default:return d}case"dark":return r;default:return void(0,S.RJ)(t)}case"empty-final":switch(t){case"light":return l;case"dark":return a;default:return void(0,S.RJ)(t)}case"final":switch(n){case"dark":return g;case"bold-dark":return p;case"bold-light":return m;default:return h}case"gold":switch(n){case"dark":return f;case"bold-dark":return _;case"bold-light":return v;default:return y}default:return void(0,S.RJ)(e)}},I=s.forwardRef((({className:e,crownNumber:t,crownVariant:n,fillVariant:i="light",outlineVariant:r="bold-light",size:a,style:l},c)=>s.createElement("div",{className:o()("_2-dXY",e),style:l},s.createElement("img",{alt:(0,w.H8)(6199),className:"_18sNN",ref:c,src:T(n,i,r),style:a?{height:`${a}px`,width:`${a}px`}:void 0}),t?s.createElement("div",Object.assign({className:"GkDDe"},(0,E._q)(b.V.LevelCrown)),t):null)))},75025:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(27378),o=n(97015);const s=({content:e,title:t,children:n})=>i.createElement(o.q,null,i.createElement("meta",{content:e,id:"meta-description",name:"description"}),i.createElement("meta",{content:e,name:"twitter:description"}),i.createElement("meta",{content:e,name:"og:description"}),t?i.createElement("title",null,t):null,n)},21570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var i=n(60042),o=n.n(i),s=n(27378),r=n(31542),a=n(80254),l=n(33389),c=n(22498),u=n(38722),d=n(57344),p=n(41777);var m=n(60610);const g=()=>s.createElement("div",{className:"_1m7gz"}),h=({className:e,isDecayed:t})=>{const n=(0,m.Tb)(),[i,o]=s.useState(!1),[r,a]=s.useState(!1);return(0,m.Gj)((()=>{o(!t)}),[t]),s.createElement("div",{className:e},t?s.createElement(g,null):i&&!n?s.createElement(s.Suspense,{fallback:s.createElement(g,null)},s.createElement(c.Z,{className:r?void 0:"_3h2kX",fillMode:"forwards",isPlaying:!0,onDOMLoaded:()=>a(!0),onDestroy:()=>a(!1),path:p}),r?null:s.createElement(g,null)):null)};var _=n(39248),v=n(15116),f=n(64176);const y={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",background:"#e5e5e5","crown-width-factor":"0.8",foreground:"#ffd900","foreground-final":"#a9a1ff",tip:"white",wrap:"_15U-t",circle:"_3Sv-w","color-gold":"_3dqWQ","color-starling":"_2rjLm","color-gray":"_1Nr_x","color-blue":"_1Pekr","color-green":"_3JzCh","color-purple":"_1xQ7h","color-red":"vIMmj","color-blueberry":"a-58R","color-kiwi":"_1OKiq","color-jelly":"_50MDd","color-raspberry":"_2tERm","color-pumpkin":"KC6xz",crack:"eU0Q4 dCCic",icon:"_17z4M dCCic","icon-hidden":"_35qQM _17z4M dCCic","icon-hoverable":"_2vb9l _17z4M dCCic",sparkles:"_3_aif dCCic","_mask-slide":"_1q6jQ","mask-slide":"CJBiX","mask-slide-in":"_3CsBl _1q6jQ","mask-slide-out":"_182e0 _1q6jQ",crown:"_1swBH","crown-container":"_17NNA","crown-container-transportable":"_1efMr","crown-scale":"TV5-h","crown-sparkles":"_5FEKN","crown-sparkles-container":"_3i__U dCCic","crown-sparkles-hidden":"_3w8yC _5FEKN","crown-sparkles-transported":"yLH6R _5FEKN","crown-transportable":"_11AYu _1swBH",transport:"_2QlTB","progress-ring":"_2rKNN dCCic","progress-ring-fade-in-out":"_3K20E _2rKNN dCCic _2Efkx","ring-pulse":"ZUQuz dCCic",throb:"Lg_aF",_throb:"_8qnge","particle-burst":"_2apBC dCCic","particle-0":"_3SvHg","_particle-burst-0":"_2kGXg","particle-1":"_294O9","_particle-burst-1":"_3OUyQ","particle-2":"_15Ug4","_particle-burst-2":"_3Vhe_","particle-3":"_2TrSK","_particle-burst-3":"_1vJP4","particle-4":"_9tODZ","_particle-burst-4":"_1ZXyC","particle-5":"hLe3S","_particle-burst-5":"_3wiDn","particle-6":"_2plck","_particle-burst-6":"_3_Sni"};var E=n(88528),b=n(9979),S=n(50498),w=n(30033),T=n(67173),I=n(68903),k=n(88849),C=n(18313),R=n(17251);const O={1:n(89011),10:n(53961),11:n(79990),12:n(83320),13:n(59799),14:n(38354),15:n(36892),16:n(65386),17:n(66830),18:n(6112),19:n(61343),2:n(90136),20:n(96017),21:n(76483),22:n(60125),23:n(29065),24:n(50416),25:n(3139),26:n(23642),27:n(92327),28:n(33634),29:n(43876),3:n(81656),30:n(92419),31:n(25610),32:n(93884),33:n(82423),34:n(81907),35:n(48681),36:n(54030),37:n(18514),38:n(50674),39:n(69010),4:n(37141),40:n(53998),41:n(13035),42:n(23313),43:n(25183),44:n(90299),45:n(27307),46:n(40505),47:n(91869),48:n(21759),49:n(32212),5:n(24826),50:n(73402),51:n(62743),52:n(9209),53:n(64885),6:n(83800),63:n(65462),64:n(49718),65:n(7408),66:n(57075),69:n(86148),7:n(36599),8:n(82884),9:n(22570)};var N=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const L=parseInt(E.Z["z-index-topbar"],10)+1,P=parseFloat(y["crown-width-factor"]);var A,D;!function(e){e[e.Color=400]="Color",e[e.CrownSparkles=0]="CrownSparkles",e[e.CrownScale=0]="CrownScale",e[e.CrownTransport=0]="CrownTransport",e[e.ParticleBurst=0]="ParticleBurst",e[e.ProgressIncrease=0]="ProgressIncrease",e[e.ProgressIncreaseWithDelay=500]="ProgressIncreaseWithDelay",e[e.RingPulse=0]="RingPulse",e[e.Scroll=0]="Scroll"}(A||(A={})),function(e){e[e.Color=200]="Color",e[e.CrownSparkles=1216.6666666666665]="CrownSparkles",e[e.CrownScale=1200]="CrownScale",e[e.CrownTransport=600]="CrownTransport",e[e.ParticleBurst=1e3]="ParticleBurst",e[e.ProgressIncrease=300]="ProgressIncrease",e[e.ProgressIncreaseWithDelay=300]="ProgressIncreaseWithDelay",e[e.RingPulse=500]="RingPulse",e[e.Scroll=1e3]="Scroll"}(D||(D={}));const x=({skillColor:e})=>s.createElement("div",{className:y["particle-burst"]},a.DZ(7,(t=>s.createElement("div",{className:o()(y[`color-${e}`],y[`particle-${t}`]),key:`particle-${t}`})))),M=({animation:e,backgroundColor:t,currentAnimations:n,isFinalLevel:i,skillFraction:o})=>{const r={backgroundColor:y.background,className:y["progress-ring"],denominator:o.denominator,foregroundColor:y[i?"foreground-final":"foreground"],numerator:o.numerator,tipColor:null!=t?t:y.tip};if("SKILL_PROGRESS_PREVIEW"===(null==e?void 0:e.name)){const t=(0,R.up)(e.previewSnapshot);return s.createElement(s.Fragment,null,s.createElement(v.Z,Object.assign({},r)),s.createElement(v.Z,Object.assign({},r,{className:y["progress-ring-fade-in-out"],denominator:t.denominator,numerator:t.numerator})))}return n.includes("PROGRESS_FADE")?s.createElement(s.Fragment,null,s.createElement(v.Z,Object.assign({},r)),s.createElement(l.Z,{animateOnMount:!0,duration:b.nN,isVisible:!1},s.createElement(v.Z,Object.assign({},r,{denominator:1,numerator:1})))):n.includes("PROGRESS_INCREASE")?s.createElement(v.Z,Object.assign({},r,{animationDelay:A.ProgressIncrease,animationDuration:D.ProgressIncrease})):n.includes("PROGRESS_INCREASE_WITH_DELAY")?s.createElement(v.Z,Object.assign({},r,{animationDelay:A.ProgressIncreaseWithDelay,animationDuration:D.ProgressIncreaseWithDelay})):s.createElement(v.Z,Object.assign({},r))},U=({active:e,animation:t,animateIcon:n,backgroundColor:i,crownsCountRef:l,hideProgress:p,inSessionEnd:g,isFinalLevel:v,onCurrentAnimationsChange:E,outlineVariant:U="bold-light",sectionStatus:F,skill:j,width:B})=>{var H;const G=(0,m.tX)(),V=(0,m.Tb)(),[Z,W]=s.useState(),[z,$]=s.useState(),[Y,K]=s.useState([]),[q,J]=s.useState(),[X,Q]=s.useState(!1),[ee,te]=s.useState(!!e),ne=t&&q?q:j,ie=(0,R.Re)(ne),oe=(0,R.S0)(ne),se=(0,R.up)(ne),re=s.useRef(null),ae=s.useRef(null),le=s.useRef(null),ce=()=>N(void 0,void 0,void 0,(function*(){if(le.current){const e=window.pageXOffset,t=window.pageYOffset+le.current.getBoundingClientRect().top-.3333333333333333*window.innerHeight;V?window.scrollTo(e,t):yield(0,k.G)({animationDelay:A.Scroll,animationDuration:D.Scroll,x:e,y:t})}}));s.useEffect((()=>{e&&!ee&&te(!0)}),[e,ee]),s.useEffect((()=>{null==E||E(Y)}),[Y]),s.useEffect((()=>{switch(null==t?void 0:t.name){case"SCROLL_TO_SKILL":e=t,N(void 0,void 0,void 0,(function*(){K(["SCROLL"]),yield ce(),G({id:e.id,type:"DEQUEUE_ANIMATION"}),K([])}));break;case"SKILL_LEVEL_UP":(e=>{N(void 0,void 0,void 0,(function*(){var t,n,i;const{id:o,beforeSnapshot:s}=e;if(s.finishedLevels+1<j.finishedLevels)G({id:o,type:"DEQUEUE_ANIMATION"});else{switch(K([]),J(s),yield(0,b.Gg)(),e.location){case"sessionEnd":K(["PROGRESS_INCREASE_WITH_DELAY"]),J(Object.assign(Object.assign({},s),{finishedLessons:s.lessons})),yield(0,S._v)(A.ProgressIncreaseWithDelay+D.ProgressIncreaseWithDelay);break;case"skillTree":K(["SCROLL"]),yield ce(),K(["PROGRESS_INCREASE"]),J(Object.assign(Object.assign({},s),{finishedLessons:s.lessons})),yield(0,S._v)(A.ProgressIncrease+D.ProgressIncrease),K(["PROGRESS_FADE"]),yield(0,b.Gg)(),J(Object.assign(Object.assign({},s),{finishedLessons:j.finishedLessons})),yield(0,S._v)(b.nN)}if(K([]),J(j),V)K(["CROWNS_INCREMENT"]),yield(0,b.Gg)();else{W(null===(t=re.current)||void 0===t?void 0:t.getBoundingClientRect()),K(["CROWN_SCALE","CROWN_SPARKLES","ICON_COLOR"]),yield(0,S._v)(Math.max(A.Color+D.Color,A.CrownScale+D.CrownScale,A.CrownSparkles+D.CrownSparkles)),K(["CROWN_TRANSPORT_0"]),yield(0,b.Gg)();const o=null===(n=ae.current)||void 0===n?void 0:n.getBoundingClientRect(),s=null===(i=null==l?void 0:l.current)||void 0===i?void 0:i.getBoundingClientRect();o&&s&&$(((e,t)=>{const n=e.height/(e.width/P),i=(1-P)/2,o=(1-n)/2,s=e.left-i*e.width/P,r=t.left-i*t.width/P,a=e.top-o*e.height/n;return`translateX(${r-s}px) translateY(${t.top-o*t.height/n-a}px) scale(${t.width/e.width})`})(o,s)),K(["CROWN_TRANSPORT_100"]),yield(0,S._v)(A.CrownTransport+D.CrownTransport),"sessionEnd"===e.location&&(K(["CROWN_TRANSPORT_SPARKLES","CROWNS_INCREMENT"]),yield(0,S._v)(A.CrownSparkles+D.CrownSparkles))}K([]),G({id:o,type:"DEQUEUE_ANIMATION"})}}))})(t);break;case"SKILL_PROGRESS":(e=>{N(void 0,void 0,void 0,(function*(){const{afterSnapshot:t,beforeSnapshot:n}=e;K([]),J(n),yield(0,b.Gg)(),K(["PROGRESS_INCREASE_WITH_DELAY"]),J(t),yield(0,S._v)(A.ProgressIncreaseWithDelay+D.ProgressIncreaseWithDelay),V||(K(["RING_PULSE"]),yield(0,S._v)(A.RingPulse+D.RingPulse)),K([]),G({id:e.id,type:"DEQUEUE_ANIMATION"})}))})(t);break;case"SKILL_REPAIR":(e=>{N(void 0,void 0,void 0,(function*(){K([]),J(Object.assign(Object.assign({},j),{decayed:!0})),yield(0,b.Gg)(),K(["PROGRESS_INCREASE_WITH_DELAY"]),J(j),yield(0,S._v)(A.ProgressIncreaseWithDelay+D.ProgressIncreaseWithDelay),K([]),G({id:e.id,type:"DEQUEUE_ANIMATION"})}))})(t);break;case"SKILL_UNLOCK":(e=>{N(void 0,void 0,void 0,(function*(){K([]),J(Object.assign(Object.assign({},j),{accessible:!1,finishedLessons:0,finishedLevels:0})),yield(0,S._v)(500),J(j),V||(K(["PARTICLE_BURST"]),yield(0,S._v)(A.ParticleBurst+D.ParticleBurst),K([])),G({id:e.id,type:"DEQUEUE_ANIMATION"})}))})(t)}var e}),[t]);const ue=(()=>{if(Y.includes("ICON_COLOR")){const e=Object.assign(Object.assign({},ne),{finishedLevels:ne.finishedLevels-1});return s.createElement("div",{className:o()(y[`color-${(0,R.S0)(e)}`],y.icon,y["mask-slide-out"])},s.createElement(_.Z,{iconId:j.iconId,skillStatus:(0,R.Re)(e)}))}return null})(),de=!V&&n&&!t&&ne.accessible&&oe!==R.fQ.Gold&&oe!==R.fQ.Starling&&ee,pe=s.createElement("div",{className:o()(y[`color-${oe}`],y["icon"+(t||g||de?"":"-hoverable")],Y.includes("ICON_COLOR")?y["mask-slide-in"]:void 0)},s.createElement(_.Z,{iconId:j.iconId,skillStatus:ie})),me=!V&&!de&&ie===R.sJ.FINALIZED&&!ne.decayed;return s.createElement("div",{className:o()(y.wrap,{[y.throb]:Y.includes("PARTICLE_BURST")}),ref:le},p?null:s.createElement(M,{animation:t,backgroundColor:i,currentAnimations:Y,isFinalLevel:null!=v?v:j.hasFinalLevel&&ie>=R.sJ.GILDED,skillFraction:se}),s.createElement("div",Object.assign({className:y.circle},(0,w._q)(T.V.SkillIcon)),de?s.createElement(s.Suspense,{fallback:pe},s.createElement(c.Z,{className:o()(y[`color-${oe}`],y["icon"+(X?"":"-hidden")]),isPlaying:!!e,loop:!0,onDOMLoaded:()=>Q(!0),onDestroy:()=>Q(!1),path:null!==(H=O[j.iconId])&&void 0!==H?H:""}),X?null:pe):s.createElement(s.Fragment,null,ue,pe,me?s.createElement(u.Z,{className:y.sparkles,randomize:!0}):null),s.createElement(h,{className:y.crack,isDecayed:!!ne.decayed}),Y.includes("RING_PULSE")?s.createElement("svg",{className:y["ring-pulse"],viewBox:"0 0 100 100"},s.createElement("circle",{cx:"50",cy:"50",fill:"transparent",r:"48.75",stroke:"currentColor",strokeWidth:"2.5"})):null,Y.includes("PARTICLE_BURST")?s.createElement(x,{skillColor:oe}):null),p?null:(()=>{const e=ie===R.sJ.FINALIZED,n=(()=>{switch(F){case C.HI.Locked:return"empty";case C.HI.Unlocked:return e?"final":ne.finishedLevels>0?"gold":"empty";default:throw(0,I.RJ)(F),Error(`Unexpected value for sectionStatus: ${F}`)}})(),i=Z?Object.assign(Object.assign({},a.ei(Z,"height","left","top","width")),{position:"fixed"}):void 0;return s.createElement(s.Fragment,null,s.createElement("div",{className:o()(y["crown-container"],{[y["crown-scale"]]:Y.includes("CROWN_SCALE")}),ref:re},s.createElement(d.Z,{className:y.crown,crownNumber:e?void 0:ne.finishedLevels,crownVariant:n,outlineVariant:U,ref:ae,style:{fontSize:.14*B}})),"SKILL_LEVEL_UP"===(null==t?void 0:t.name)?(0,r.createPortal)(s.createElement("div",{className:y["crown-container-transportable"],style:Object.assign(Object.assign({},i),{transform:z,zIndex:L})},Y.includes("CROWN_TRANSPORT_0")||Y.includes("CROWN_TRANSPORT_100")?s.createElement(d.Z,{className:y["crown-transportable"],crownVariant:n,outlineVariant:U}):null,s.createElement("div",{className:o()(y["crown-sparkles-container"],{[y["crown-scale"]]:Y.includes("CROWN_SCALE")})},s.createElement(s.Suspense,{fallback:null},s.createElement(c.Z,{className:y["crown-sparkles"+(Y.includes("CROWN_TRANSPORT_SPARKLES")?"-transported":Y.includes("CROWN_SPARKLES")?"":"-hidden")],isPlaying:Y.includes("CROWN_SPARKLES")||Y.includes("CROWN_TRANSPORT_SPARKLES"),path:f})))),document.getElementById("overlays")):null)})())}},39248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(27378),o=n(91783),s=n(92947),r=n(64756),a=n(85171),l=n(96772),c=n(68903),u=n(17251);const d=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,63,64,65,66,69],p=({className:e,iconId:t,skillStatus:n})=>{const p=(()=>{switch(n){case u.sJ.GILDED:return r;case u.sJ.FINALIZED:return s;case u.sJ.LOCKED:return a;case u.sJ.UNLOCKED:return l;default:throw(0,c.RJ)(n),Error(`Unexpected skillStatus: ${n}`)}})();return i.createElement(o.Z,{className:e,index:d.indexOf(t),itemHeight:135,length:d.length,src:p,width:135})}},54452:(e,t,n)=>{"use strict";n.r(t),n.d(t,{APP_HOME_DEEP_LINK:()=>b,default:()=>S,isOnExperimentalMobileEmailVerificationPage:()=>E});var i=n(60042),o=n.n(i),s=n(27378),r=n(50065),a=n(69635),l=n(83063),c=n(47725),u=n(62827),d=n(94144);const p={"expanded-height":"_2l3RY","main-container":"_1QVD8","centered-image":"_9Fl1R",success:"muLbj",fail:"_1fX8Z",message:"_3fXhI","centered-text":"Iy-ZR","cta-box":"_6Zbky",cta:"_1Romf"};var m,g=n(30977),h=n(53229),_=n(13840),v=n(74597),f=n(16086);!function(e){e[e.VERIFYING=0]="VERIFYING",e[e.SUCCEEDED=1]="SUCCEEDED",e[e.FAILED=2]="FAILED"}(m||(m={}));class y extends s.Component{constructor(){super(...arguments),this.state={pageState:m.VERIFYING},this.renderVerifyingState=()=>s.createElement(u.Z,{className:p["expanded-height"]},s.createElement("img",{className:p["centered-image"],src:"https://d35aaqx5ub95lt.cloudfront.net/images/duo-spinner@2x.gif"})),this.renderSucceededState=()=>{const e=E(this.props.location);return s.createElement(s.Fragment,null,s.createElement(u.Z,{className:p[e?"main-container":"expanded-height"]},s.createElement("div",{className:p["centered-text"]},e?s.createElement("img",{alt:"",src:"https://d35aaqx5ub95lt.cloudfront.net/images/duo-email.svg"}):null,s.createElement("span",{className:p.success},(0,_._i)(22104)),s.createElement("span",{className:p.message},(0,_._i)(23690)))),e?s.createElement("div",{className:p["cta-box"]},s.createElement(c.Z,{className:o()((0,l.y)({color:"macaw",variant:"solid"}),p.cta),href:b,trackingScreen:"verification_page",trackingTarget:"mobile_app_open_or_install"},(0,_._i)(32344))):null)},this.renderFailedState=()=>s.createElement(u.Z,{className:p["expanded-height"]},s.createElement("div",{className:p["centered-text"]},s.createElement("span",{className:p.fail},(0,_._i)(21553)),s.createElement("span",{className:p.message},(0,_._i)(11554))))}componentDidMount(){return e=this,t=void 0,i=function*(){const{dispatch:e,history:t,match:{params:n},location:i}=this.props;let o,s,r=!1;try{o=(0,f.Jb)()}catch(e){o=void 0}if(s=parseInt((0,h.vl)(i.search).userId||"",10),!s&&o)s=o;else if(!s)return void this.setState({pageState:m.FAILED});o===s&&(r=!0);let a=!1;try{(yield g.Vi.emailVerificationUpdate(s,n.token)).success?(r||this.setState({pageState:m.SUCCEEDED}),a=!0):this.setState({pageState:m.FAILED})}catch(e){this.setState({pageState:m.FAILED})}if(r){const n=e((0,d.eY)());a&&(yield n,t.push("/"))}},new((n=void 0)||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i}render(){const{pageState:e}=this.state;switch(e){case m.SUCCEEDED:return this.renderSucceededState();case m.FAILED:return this.renderFailedState();case m.VERIFYING:default:return this.renderVerifyingState()}}}const E=e=>{const t=(0,h.vl)(e.search);return"verify_email"===t.target&&"2021-11"===t.version&&v.Z.hasMobileApp&&!(0,f.Pc)()},b=v.Z.android?"https://app.adjust.com/z5vyqb?deep_link=duolingo%3A%2F%2Fhome":"https://af4a.adj.st/home?adj_t=r4yebem&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fduolingo-language-lessons%2Fid570060128&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.duolingo",S=(0,a.EN)((0,r.$j)()(y))},51900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(60042),o=n.n(i),s=n(27378),r=n(24448);const a={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",overlay:"_36g-h","overlay-drawer-on-modal":"_1Z19a"};const l=e=>{var{className:t,isDrawerOnModalOverlay:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["className","isDrawerOnModalOverlay"]);return s.createElement(r.Z,Object.assign({className:o()(a["overlay"+(n?"-drawer-on-modal":"")],t)},i))}},94434:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(60042),o=n.n(i),s=n(27378),r=n(47725),a=n(48982);var l=n(30033),c=n(80388),u=n(67173),d=n(13840),p=n(74245),m=n(785),g=n(3800);const h=({children:e,href:t,linkClass:n,onClick:i,target:a})=>s.createElement("li",{className:"_1KXNm"},s.createElement(r.Z,{className:o()("_3KnwL _3yAjN",n),href:t,onClick:i,target:a},e)),_=({dividerStyle:e,linkStyle:t})=>s.createElement(s.Fragment,null,g.h?null:s.createElement("div",{className:"_3ky4c"},s.createElement("hr",{className:o()("_2tnT1",e)}),s.createElement("div",Object.assign({className:"_3dgVT"},(0,l._q)(u.V.FooterLinks)),s.createElement("ul",{className:"R1UFe"},s.createElement(h,{href:"/info",linkClass:t},(0,d._i)(7957)),"en"===p.h9?s.createElement(h,{href:"https://blog.duolingo.com",linkClass:t},(0,d._i)(14615)):null,s.createElement(h,{href:"https://schools.duolingo.com",linkClass:t},(0,d._i)(3984)),s.createElement(h,{href:"/mobile",linkClass:t},(0,d._i)(18971)),s.createElement(h,{href:"/efficacy",linkClass:t,onClick:()=>(0,m.j)("web_footer_efficacy_cta",{})},(0,d._i)(30464)),s.createElement(h,{href:"/help",linkClass:t},(0,d._i)(2922)),s.createElement(h,{href:"/guidelines",linkClass:t},(0,d._i)(16027)),s.createElement(h,{href:"https://careers.duolingo.com",linkClass:t},(0,d._i)(5919)),s.createElement(h,{href:"https://investors.duolingo.com",linkClass:t},(0,d._i)(30108)),s.createElement(h,{href:"/terms",linkClass:t},(0,d._i)(22838)),s.createElement(h,{href:"/privacy",linkClass:t},(0,d._i)(19704))))),(0,c.J9)()?s.createElement(a.dw,null):null)},45834:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(60042),o=n.n(i),s=n(27378),r=n(83063);var a=n(13840),l=n(35160),c=n(785);class u extends s.Component{constructor(){super(...arguments),this.handleLogin=()=>{const{dispatch:e,redirectPath:t,trackingScreen:n,via:i}=this.props;(0,c.j)("click",{screen:n,target:"login"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:l.tl.SignInUp,redirectPath:t,removeFooter:!0,via:i},type:"TOGGLE_MODAL"})}}render(){const{buttonClassName:e,className:t,text:n}=this.props;return s.createElement("div",{className:o()("_1R3fw",t)},s.createElement(r.Z,{className:o()("_1dzAz _2pIQ_",e),id:"sign-in-btn",onClick:this.handleLogin,variant:"solid"},(0,a._i)(n||9109)))}}},62827:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(60042),o=n.n(i),s=n(27378),r=n(94434);const a=({children:e,className:t,includeFooterLinks:n=!0})=>s.createElement(s.Fragment,null,s.createElement("div",{className:o()(t,"_2PVaI")},e),n?s.createElement(r.Z,null):null)},76864:(e,t,n)=>{"use strict";n.d(t,{hr:()=>z,NA:()=>Z,aT:()=>W});var i=n(60042),o=n.n(i),s=n(27378),r=n(69635),a=n(56e3),l=n(83063),c=n(47725),u=n(43670),d=n(81928),p=n(45834),m=n(80254),g=n(81734);const h={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","single-column":"WU2c8","ui-language-item":"_1L4sH","double-column":"_2bJUZ","ui-language-flag":"_24Zlo"};var _=n(74245),v=n(785),f=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const y=(0,_.Ho)(),E=m.XP(y),b=({className:e,singleColumn:t,trackingScreen:n,via:i})=>s.createElement("ul",{className:o()(e,h[(t?"single":"double")+"-column"])},E.map((e=>{const{pathname:t,search:o,hash:r}=window.location,a=`//${"zh"===e?"zh-CN":e}.duolingo.com${t}${o}${r}`;return s.createElement("li",{className:h["ui-language-item"],key:e},s.createElement(c.Z,{href:a,onClick:()=>{var t;t=e,f(void 0,void 0,void 0,(function*(){"splash"!==n&&"course_picker"!==n&&"courses_page"!==n&&"course_splash"!==n||(yield(0,v.j)("language_selector_tap",{fromLanguage:_.h9,toLanguage:t,via:i}))})),f(void 0,void 0,void 0,(function*(){"splash"===n&&(yield(0,v.j)("splash_tap",{target:"switch_language"}))}))}},s.createElement(g.Z,{className:h["ui-language-flag"],lang:e,size:24}),s.createElement("span",{className:h["ui-language-label"]},(0,_.lx)(e))))})));var S=n(87539);var w=n(35160);const T=()=>s.createElement(S.Z,{className:"_1d09m",modalName:w.tl.PickUiLanguage},(()=>s.createElement(b,{className:"QKKr1",singleColumn:!0})));var I=n(83537);const k="_2-EEb",C="_2EUSW _1Jk5X";var R=n(88528),O=n(53229),N=n(13840),L=n(64865),P=n(74597);class A extends s.Component{constructor(){super(...arguments),this.state={displayPopover:!1},this.handleUiLanguageChange=()=>{"splash"===this.props.trackingScreen&&(0,v.j)("splash_tap",{target:"hamburger_switch_language"}),this.props.dispatch({options:{name:w.tl.PickUiLanguage},type:"TOGGLE_MODAL"})}}componentDidMount(){(0,L.VF)({via:"mobile_menu"})&&(0,v.j)("web_to_app_store_load",{via:"mobile_menu"})}render(){const{via:e}=(0,O.vl)(),t=(0,L.VF)({via:"share_profile"===e?"share_profile":"mobile_menu"}),n=s.createElement(I.Z,{className:"IqgUt",onToggle:()=>this.setState((e=>({displayPopover:!e.displayPopover})),(()=>{if(this.state.displayPopover)switch(this.props.trackingScreen){case"splash":(0,v.j)("splash_tap",{target:"hamburger"});break;case"course_picker":(0,v.j)("course_picker_tap",{target:"hamburger",via:"onboarding"})}}))});return s.createElement("div",{className:"kbGl0"},n,this.state.displayPopover?s.createElement(a.Z,{direction:"down",offset:-40,onClick:()=>this.setState({displayPopover:!1}),onRequestClose:()=>this.setState({displayPopover:!1}),zIndex:parseInt(R.Z["z-index-popover"],10)},s.createElement("ul",null,s.createElement("li",{className:k},s.createElement(c.Z,{className:C,href:"/log-in",onClick:()=>{"splash"===this.props.trackingScreen&&(0,v.j)("splash_tap",{target:"hamburger_login"})}},(0,N._i)(1032))),s.createElement("li",{className:k},s.createElement(c.Z,{className:C,href:"/register",onClick:()=>{(0,v.j)("click",{which:"topbar get started"}),"splash"===this.props.trackingScreen&&(0,v.j)("splash_tap",{target:"hamburger_get_started"})}},(0,N._i)(18550))),t?s.createElement("li",{className:k},s.createElement(c.Z,{className:C,href:t,onClick:()=>{(0,v.j)("web_to_app_store_tap",{target:P.Z.ios?"apple":"google_or_China",via:"mobile_menu"})}},(0,N._i)(17779))):null,s.createElement("li",{className:k},s.createElement("button",{className:"MpS4m _1Jk5X",onClick:this.handleUiLanguageChange},(0,N._i)(18889)," ",(0,N._i)(154,{language_name:(0,_.vY)(_.h9)}))))):null,s.createElement(T,null))}}const D=A;var x=n(44629),M=n(94144),U=n(87122),F=n(82793),j=n(30033),B=n(67173),H=n(96894),G=n(80321),V=n(20028);class Z extends s.Component{constructor(){super(...arguments),this.state={showPopover:!1},this.popoverRef=s.createRef()}render(){const{config:e,dispatch:t,items:n,user:i,via:o}=this.props,{showPopover:r}=this.state;return s.createElement(x.Z,{className:F.Z["user-cell-minimal"],isOpen:r,onClose:()=>this.setState({showPopover:!1}),onOpen:()=>this.setState({showPopover:!0}),onToggle:()=>this.setState((e=>({showPopover:!e.showPopover}))),popoverState:{direction:"down",ref:this.popoverRef}},s.createElement("div",{className:F.Z["user-popover-wrap"]},s.createElement(u.Z,{displaySize:40,size:"medium",user:i}),r?s.createElement(a.Z,{direction:"down",innerClassName:F.Z["user-popover"],offset:-30,onRequestClose:()=>this.setState({showPopover:!1}),ref:this.popoverRef,zIndex:100},s.createElement("ul",null,(0,V.pN)(i)?s.createElement("li",{className:F.Z["user-item"]},s.createElement("span",{className:F.Z["user-link"],onClick:()=>{(0,v.j)("create_profile_button_tap",{source:"user_dropdown"}),t({options:{isSignIn:!1,name:w.tl.SignInUp,via:o},type:"TOGGLE_MODAL"})}},(0,N._i)(10954))):s.createElement("li",{className:F.Z["user-item"]},s.createElement(c.Z,Object.assign({},(0,j._q)(B.V.UserProfile),{className:F.Z["user-link"],href:`/profile/${i.username}`}),(0,N._i)(18538))),s.createElement("li",{className:F.Z["user-item"]},s.createElement(c.Z,Object.assign({},(0,j._q)(B.V.SoundSettings),{className:F.Z["user-link"],href:"/settings"}),(0,N._i)(185))),(0,G.n2)(i,n,e)?s.createElement("li",{className:F.Z["user-item"]},s.createElement("span",{className:F.Z["user-link"],onClick:()=>{(0,G.Zb)(t,"dropdown"),t({timestamp:Date.now(),type:"RESET_INVITE_BANNER_DISMISSALS"})}},(0,H.Y)()?(0,N._i)(37198):(0,N._i)(14147))):null,s.createElement("li",{className:F.Z["user-item"]},s.createElement(d.Z,{className:F.Z["user-link"]},(0,N._i)(2922))),(0,V.B8)(i)?s.createElement("li",{className:F.Z["user-item"]},s.createElement(c.Z,{className:F.Z["user-link"],href:"/admin_tools"},(0,N._i)(24305))):null,(0,V.pN)(i)?s.createElement("li",{className:F.Z["user-item"]},s.createElement("span",{className:F.Z["user-link"],onClick:()=>t({options:{isSignIn:!0,name:w.tl.SignInUp,via:o},type:"TOGGLE_MODAL"})},(0,N._i)(1032))):s.createElement("li",{className:F.Z["user-item"]},s.createElement("span",{className:F.Z["user-link"],onClick:()=>t((0,M.kS)())},(0,N._i)(11491))))):null))}}const W=({className:e,style:t,trackingScreen:n})=>{const i=s.useRef(null),[r,l]=s.useState(!1),c="splash"===n?"splash":"course_picker"===n?"splash_course_picker":"courses_page"===n?"courses_logged_out_top_bar":"course_splash"===n?"course_splash":void 0;return s.createElement(x.Z,{className:o()(F.Z["ui-language-wrap"],e),isOpen:r,onClose:()=>l(!1),onOpen:()=>l(!0),onToggle:()=>l(!r),popoverState:{direction:"down",ref:i}},s.createElement("div",{className:F.Z["ui-language"]},s.createElement("div",{className:F.Z["ui-language-text"+(t?`-${t}`:"")]},(0,N._i)(18889)," ",s.createElement("span",null,(0,N._i)(154,{language_name:(0,_.vY)(_.h9)})),s.createElement("span",{className:F.Z["caret"+(t?`-${t}`:"")]})),r?s.createElement(a.Z,{direction:"down",innerClassName:F.Z["ui-language-picker"],offset:-120,onRequestClose:()=>()=>l(!1),ref:i,zIndex:parseInt(R.Z["z-index-popover"],10)},s.createElement(b,{singleColumn:!1,trackingScreen:n,via:c})):null))},z=({dispatch:e,simple:t,trackingScreen:n})=>{const i=(0,r.TH)();return s.createElement("div",Object.assign({className:o()(F.Z["logged-out-topbar-wrap"],{[F.Z["splash-topbar-wrap"]]:t})},(0,j._q)("logged-out-topbar")),s.createElement("div",{className:F.Z["logged-out-topbar"]},s.createElement(c.Z,{className:F.Z["logged-out-logo-container"],href:"/",onClick:()=>(0,v.j)("topbar_logo_tapped",{})},s.createElement("img",{alt:(0,N.H8)(23227),className:F.Z["logged-out-logo"],height:"36px",src:U,width:"153px"})),s.createElement("div",{className:F.Z["right-header"]},s.createElement(W,{className:F.Z["hidden-on-mobile"],trackingScreen:n}),s.createElement(p.Z,{buttonClassName:F.Z["login-button"],className:F.Z["hidden-on-mobile"],dispatch:e,redirectPath:"/join-beta"===i.pathname||"/stories"===i.pathname?i.pathname:void 0,trackingScreen:n,via:"stories"}),t?null:s.createElement(c.Z,{className:o()((0,l.y)({color:"owl",variant:"solid"}),F.Z["get-started"]),href:"/register",onClick:()=>(0,v.j)("click",{which:"topbar get started"})},(0,N._i)(18550)),s.createElement(D,{dispatch:e,trackingScreen:n}))))}},44451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(27378),o=n(42659);var s=n(60610),r=n(785);const a=e=>{var t,n,a,l;const c=(0,s.Fx)(o.Mb),u=(0,s.Fx)(o.Lm),d=null!==(n=null===(t=c.featureFlags)||void 0===t?void 0:t.web_frame_metrics_sampling_rate)&&void 0!==n?n:0,p=null!==(l=null===(a=c.featureFlags)||void 0===a?void 0:a.web_frame_metrics_slow_frame_threshold)&&void 0!==l?l:Math.ceil(1e3/60);i.useEffect((()=>{if(u&&Math.random()<d){const t=new class{constructor(e,{resetEvery:t,slowFrameThreshold:n}){this.isObserving=!1,this.slowFrames=0,this.slowFramesDuration=0,this.totalDuration=0,this.totalFrames=0,this.disconnect=()=>{this.isObserving=!1},this.flush=()=>{this.report(),this.reset()},this.observe=()=>{this.isObserving=!0,this.lastFrame=void 0,this.requestFrame()},this.frame=e=>{var t;const n=this.lastFrame?Math.min(e-this.lastFrame,1e4):void 0;this.lastFrame=e,void 0!==n&&(this.slowestFrame=Math.max(null!==(t=this.slowestFrame)&&void 0!==t?t:0,n),this.totalDuration+=n,this.totalFrames++,n>=this.slowFrameThreshold&&(this.slowFrames++,this.slowFramesDuration+=n),void 0!==this.resetEvery&&this.totalDuration>=this.resetEvery&&this.flush()),this.requestFrame()},this.report=()=>{void 0!==this.slowestFrame&&this.callback({slowFrames:this.slowFrames,slowFramesDuration:this.slowFramesDuration,slowestFrame:this.slowestFrame,totalDuration:this.totalDuration,totalFrames:this.totalFrames})},this.requestFrame=()=>{this.isObserving&&requestAnimationFrame(this.frame)},this.reset=()=>{this.lastFrame=void 0,this.slowFrames=0,this.slowFramesDuration=0,this.slowestFrame=void 0,this.totalDuration=0,this.totalFrames=0},this.callback=e,this.resetEvery=t,this.slowFrameThreshold=n}}((t=>{e?(0,r.j)("app_performance_frames",{sampling_rate:d,slow_frame_count:t.slowFrames,slow_frame_duration_total:Math.round(t.slowFramesDuration),slow_frame_max_duration:t.slowestFrame>=p?Math.round(t.slowestFrame):void 0,slow_frame_session_duration:Math.round(t.totalDuration),slow_frame_session_name:e,slow_frame_threshold:p,total_frame_count:t.totalFrames}):(0,r.j)("app_performance_frames_aggregated",{sampling_rate:d,slow_frame_count_agg:t.slowFrames,slow_frame_duration_total_agg:Math.round(t.slowFramesDuration),slow_frame_max_duration_agg:t.slowestFrame>=p?Math.round(t.slowestFrame):void 0,slow_frame_session_duration_agg:Math.round(t.totalDuration),slow_frame_threshold:p,total_frame_count_agg:t.totalFrames})}),{resetEvery:36e5,slowFrameThreshold:p}),n=()=>{"hidden"===document.visibilityState?(t.disconnect(),t.flush()):t.observe()};return document.addEventListener("visibilitychange",n),n(),()=>{document.removeEventListener("visibilitychange",n),t.disconnect(),t.flush()}}}),[])}},72865:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(27378);const o=()=>{const e="IntersectionObserver"in window,[t,n]=i.useState(!e),o=i.useRef(null),s=i.useRef(null);return i.useLayoutEffect((()=>{if(e){const e=new IntersectionObserver((([e])=>n(e.isIntersecting)));return s.current&&e.observe(s.current),o.current=e,()=>e.disconnect()}}),[]),[t,i.useCallback((e=>{var t,n;s.current&&(null===(t=o.current)||void 0===t||t.unobserve(s.current)),e&&(null===(n=o.current)||void 0===n||n.observe(e)),s.current=e}),[])]}},17060:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(27378);let o=!1;const s=({disabled:e,id:t,offset:n=0}={})=>{i.useEffect((()=>{if(!e&&!o&&window.location.hash.length>1){const e=window.location.hash.slice(1);if(t&&e!==t)return;const i=document.getElementById(e);i&&(window.scrollTo(0,window.pageYOffset+i.getBoundingClientRect().top+n),o=!0)}}),[])}},87539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(60042),o=n.n(i),s=n(27378),r=n(31542),a=n(64426),l=n(94856),c=n(33389),u=n(42659);const d={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","style-gray":"_77Bg3","style-plus":"JMaEo","style-super":"eQGGV","style-white":"_3lUbm",_content:"_13Rl7",content:"_1hEOp _13Rl7","content-fullscreen":"SBf4a _13Rl7",close:"FrL-W"};var p=n(9979),m=n(50498),g=n(30033),h=n(67173),_=n(68903),v=n(60610),f=n(26506),y=n(35160);const E=({children:e,className:t,fullscreen:n,hideClose:i,isVisible:r,onDismiss:y,restoreScrollPosition:E})=>{const b=(0,v.Fx)(u.Sg),S=(0,v.Fx)((e=>e.ui.modalShouldWaitForOverlay)),[w,T]=s.useState(r?"visible":"invisible"),I=s.useRef(null);return(0,l.Z)({disabled:"visible"!==w||b||n,onClick:y,ref:I}),(0,v.HF)("visible"===w,E),s.useEffect((()=>{let e=!1;return t=void 0,i=void 0,s=r?function*(){switch(w){case"before-fade-in":yield(0,p.Gg)(),e||T("overlay");break;case"fading-out":T("overlay");break;case"invisible":T("before-fade-in");break;case"overlay":!n&&S&&(yield(0,m._v)(p.nN)),e||T("visible");break;case"visible":break;default:(0,_.RJ)(w)}}:function*(){switch(w){case"before-fade-in":T("invisible");break;case"fading-out":yield(0,m._v)(p.nN),e||T("invisible");break;case"invisible":break;case"overlay":case"visible":T("fading-out");break;default:(0,_.RJ)(w)}},new((o=void 0)||(o=Promise))((function(e,n){function r(e){try{l(s.next(e))}catch(e){n(e)}}function a(e){try{l(s.throw(e))}catch(e){n(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}l((s=s.apply(t,i||[])).next())})),()=>{e=!0};var t,i,o,s}),[n,r,w]),s.useEffect((()=>{if(!b&&"visible"===w){const e=e=>{"Escape"===e.key&&y()};return f.U.disableListeners(),f._.disableListeners(),document.addEventListener("keydown",e),()=>{f.U.enableListeners(),f._.enableListeners(),document.removeEventListener("keydown",e)}}}),[b,y,w]),"invisible"===w?null:s.createElement(a.ZP,{autoFocus:!1,whiteList:e=>{var t,n;return null!==(n=null===(t=document.getElementById("overlays"))||void 0===t?void 0:t.contains(e))&&void 0!==n&&n}},s.createElement(c.Z,{isVisible:"visible"===w},s.createElement("div",{className:o()(d["content"+(n?"-fullscreen":"")],t),ref:I},i?null:s.createElement("div",Object.assign({},(0,g._q)(h.V.CloseButton),{className:d.close,onClick:y}),s.createElement("img",{src:"https://d35aaqx5ub95lt.cloudfront.net/images/x.svg"})),e)))},b=({children:e,className:t,customStyle:n=y.Wy.White,hideClose:i,modalName:a,onDismiss:l})=>{var c;const u=(0,v.tX)(),p=(0,v.Fx)((e=>e.ui.isModalReallyOpen)),m=(0,v.Fx)((e=>e.ui.modal)),g=(0,v.CC)(),[h,_]=s.useState(),f=void 0!==h&&(0,y.rm)(h.name),b=(null==m?void 0:m.name)===a;b&&m!==h&&_(m),s.useLayoutEffect((()=>(u({name:a,type:"MODAL_MOUNTED"}),()=>{u({name:a,type:"MODAL_UNMOUNTED"})})),[]),s.useEffect((()=>{if(b)return p||u({type:"MODAL_OPENED"}),()=>{var e;void 0===(null===(e=g.getState().ui.modal)||void 0===e?void 0:e.name)&&u({type:"MODAL_CLOSED"})}}),[b]);const S=l&&h?()=>l({modalOptions:h}):()=>u({options:void 0,type:"TOGGLE_MODAL"});return(0,r.createPortal)(s.createElement(E,{className:o()(d[n],t),fullscreen:f,hideClose:!!i,isVisible:b,onDismiss:S,restoreScrollPosition:null===(c=null==h?void 0:h.restoreScrollPosition)||void 0===c||c},h?e({modalOptions:h,onDismiss:S}):null),document.getElementById("overlays"))}},4243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(60042),o=n.n(i),s=n(27378),r=n(83063),a=n(86522),l=n(42659),c=n(394),u=n(30033),d=n(67173),p=n(60610);const m=({ctaContent:e,description:t,disabled:n,dismissContent:i,dismissDisabled:m,image:g,onCtaClick:h,onDismiss:_,style:v,submitting:f,title:y})=>{const E=(0,p.Fx)(l.$4);return s.createElement("div",{className:o()(c.Z.grid,v?c.Z[v]:void 0,{[c.Z["has-description"]]:t,[c.Z["has-dismiss"]]:i,[c.Z["has-image"]]:g})},g?s.createElement("div",{className:c.Z["image-container"]},g):null,s.createElement("span",{className:c.Z.title},y),t?s.createElement("span",{className:c.Z.description},t):null,s.createElement("div",{className:c.Z["right-top"]},s.createElement(a.Z,{customStyle:c.Z["cta-button"],disabled:n,onClick:h,style:v,submitting:f},e)),i?s.createElement("div",{className:c.Z["left-bottom"]},s.createElement(r.Z,Object.assign({className:c.Z[`dismiss-${E?"desktop":"mobile"}${v?`-${v}`:""}`],disabled:null!=m?m:n||f,onClick:_,unstyledDisabled:!0,variant:E?"stroke":"text"},(0,u._q)(d.V.NotificationDrawerNoThanksButton)),i)):null)}},83120:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(27378);var o=n(60610);const s=({children:e})=>{const t=(0,o.Fx)((e=>e.ui.viewportHeight)),n=(0,o.Fx)((e=>e.ui.viewportWidth)),[s,r]=i.useState(),a=i.useRef(null);return i.useLayoutEffect((()=>{a.current&&r(a.current.getBoundingClientRect().width)}),[t,n]),i.createElement("div",{className:"_1qefU",ref:a},s?e({width:s}):null)}},86522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(60042),o=n.n(i),s=n(27378),r=n(83063);const a={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","button-red":"_3UWae NAidc","button-plus":"_2slxu SD9wr","button-dark-plus":"_2Jnzz jn69D","button-stroked":"AD177 _3Byo7","button-super":"_320l8 _1SeBB","button-dark-super":"_2hSDG _1Rcu8","standard-layout":"_2qoRw"};var l=n(30033),c=n(67173);const u=({children:e,customStyle:t,disabled:n,onClick:i,style:u,submitting:d})=>s.createElement(r.Z,Object.assign({className:o()(u?a[`button-${u}`]:void 0,null!=t?t:a["standard-layout"]),disabled:n,onClick:i,submitting:d,variant:"stroked"===u?"stroke":"solid"},(0,l._q)(c.V.NotificationButton)),e)},31507:(e,t,n)=>{"use strict";n.d(t,{z:()=>d,Z:()=>p});var i=n(60042),o=n.n(i),s=n(27378),r=n(31542),a=n(64426),l=n(75631);var c=n(60610),u=n(26506);const d=400,p=({children:e,className:t,disableTypeToSelect:n=!0,isVisible:i,onDismiss:d,onEnter:p,submitting:m})=>{const g=s.useRef(),h=s.useRef();return g.current=d,h.current=p,s.useEffect((()=>{if(i){const e=e=>{var t,n;"Enter"===e.key?null===(t=h.current)||void 0===t||t.call(h):"Escape"===e.key&&(null===(n=g.current)||void 0===n||n.call(g))};return u.U.disableListeners(),n&&u._.disableListeners(),document.addEventListener("keydown",e),()=>{u.U.enableListeners(),n&&u._.enableListeners(),document.removeEventListener("keydown",e)}}}),[n,i]),(0,c.HF)(i,!0),(0,r.createPortal)(s.createElement(a.ZP,{disabled:!i},s.createElement(l.Z,{animateOnMount:i,className:o()("_1szh4",t),isVisible:i,onDismiss:m?void 0:d},s.createElement("div",{className:"_1yodw"},e))),document.getElementById("overlays"))}},80150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(27378),o=n(31507),s=n(50498),r=n(60610);const a=e=>{const t=(0,r.tX)(),n=(0,r.Fx)((e=>e.ui.drawer)),[a]=i.useState(n);return{fadeOut:()=>{return e=void 0,n=void 0,r=function*(){t({options:void 0,type:"TOGGLE_DRAWER"}),yield(0,s._v)(o.z)},new((i=void 0)||(i=Promise))((function(t,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r},isVisible:(null==n?void 0:n.name)===e,options:a}}},83537:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(60042),o=n.n(i),s=n(27378);const r=s.forwardRef(((e,t)=>{var{children:n,className:i,onToggle:r,tabIndex:a}=e,l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["children","className","onToggle","tabIndex"]);return s.createElement("div",Object.assign({className:o()("_2eeKH",i),onClick:r,onKeyDown:e=>{["Enter"," "].includes(e.key)&&(r(),e.preventDefault())},onMouseUp:e=>{e.stopPropagation()},ref:t,tabIndex:null!=a?a:0},l),n)}))},29531:(e,t,n)=>{"use strict";n.d(t,{R:()=>r,f:()=>c});var i=n(27378),o=n(84932),s=n(88528);const r="bottom",a=parseFloat(s.Z["juicy-length"]),l=e=>[{name:"arrow",options:{element:e,padding:parseFloat(s.Z["margin-popover-stem"])}},{name:"flip",options:{padding:a}},{name:"offset",options:{offset:[0,parseFloat(s.Z["margin-popover"])]}},{name:"preventOverflow",options:{padding:a}}],c=(e={})=>{var t,n,{modifiers:s=[]}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["modifiers"]);const[c,u]=i.useState(null),[d,p]=i.useState(null),[m,g]=i.useState(null),h=(0,o.D)(d,m,Object.assign({modifiers:[...l(null!=c?c:void 0),...s]},a));return{currentPlacement:null!==(n=null===(t=h.state)||void 0===t?void 0:t.placement)&&void 0!==n?n:r,props:h,setArrowRef:u,setElementRef:p,setPopoverRef:g}}},44629:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(60042),o=n.n(i),s=n(27378),r=n(56e3),a=n(29531);const l={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_after:"_15ywt",wrap:"_34k_q","wrap-open-down":"fYaYB _15ywt _34k_q","wrap-open-left":"_1j0Jz _15ywt _34k_q","wrap-open-right":"JF6Vl _15ywt _34k_q","wrap-open-up":"_14-op _15ywt _34k_q"};const c=e=>null!==e&&"direction"in e,u=s.forwardRef(((e,t)=>{var n,{children:i,className:u,customOffset:d,isOpen:p,onClose:m,onOpen:g,onToggle:h,popoverState:_,tabIndex:v}=e,f=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["children","className","customOffset","isOpen","onClose","onOpen","onToggle","popoverState","tabIndex"]);const y=c(_)?_.direction:(0,r.h)(null!==(n=null==_?void 0:_.placement)&&void 0!==n?n:a.R),E=()=>c(_)?_.ref.current:null==_?void 0:_.elements.popper;return s.createElement("div",Object.assign({className:o()(l["wrap"+(p?`-open-${y}`:"")],u),onClick:e=>{var t;(null===(t=E())||void 0===t?void 0:t.contains(e.target))||h()},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(h(),e.preventDefault())},onMouseEnter:g,onMouseLeave:m,onMouseUp:e=>{e.stopPropagation()},onTouchEnd:e=>{var t;(null===(t=E())||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),h())},ref:t,style:void 0!==d&&d>=0?{"--offset":`${d}px`}:void 0,tabIndex:null!=v?v:0},f),i)}))},52761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(27378),o=n(56e3),s=n(29531),r=n(13840);const a=e=>"placement"in e,l=i.forwardRef(((e,t)=>{var n,l,{dir:c,popperProps:u,style:d}=e,p=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["dir","popperProps","style"]);let m=(0,o.h)(a(u)?u.placement:null!==(l=null===(n=u.state)||void 0===n?void 0:n.placement)&&void 0!==l?l:s.R);const g="left"===m?90:"right"===m?-90:"up"===m?180:0,h=Object.assign({margin:0},a(u)?u.arrowProps.style:u.styles.arrow);h.transform&&(h.transform=`${h.transform} rotate(${g}deg)`);const _=Object.assign(Object.assign({margin:0},a(u)?u.style:u.styles.popper),d);return r.lw&&("left"===m?m="right":"right"===m&&(m="left")),i.createElement(o.Z,Object.assign({},p,{direction:m,manualPositioning:!0,ref:t,stemContainerStyle:h,style:_}))}))},15116:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(48453),o=n(27378),s=n(80254),r=n(9979);const a=e=>2*e*Math.PI,l=({cornerRadius:e,endAngle:t,radius:n,startAngle:o,width:s})=>{var r;return null!==(r=i.Z().cornerRadius(null!=e?e:0)({endAngle:t,innerRadius:n-s,outerRadius:n,startAngle:null!=o?o:0}))&&void 0!==r?r:""},c=o.memo((({animationDelay:e=0,animationDuration:t,backgroundColor:n,className:i,denominator:c,foregroundColor:u,numerator:d,style:p,tipColor:m})=>{const[g,h]=o.useState(c),[_,v]=o.useState(d),[f]=o.useState(s.EL("session/ProgressRing")),y=o.useRef(),E=o.useRef();o.useEffect((()=>{if(void 0!==t&&void 0!==y.current&&void 0!==E.current){let n=!1;const i=y.current,o=E.current;return(0,r.jt)({animationDelay:e,animationDuration:t,easingFunction:r.q8.Linear,onAnimate:e=>{n||(h(i+e*(c-i)),v(o+e*(d-o)))}}),()=>{n=!0}}h(c),v(d),y.current=c,E.current=d}),[e,t,c,d]);const b=_/g,S=m&&_>0?8/3:0,w=S/a(46),T=b+w>=1,I=(46,k=(b-4/a(46)-.25)*Math.PI*2,{x:46*Math.cos(k),y:46*Math.sin(k)});var k;return o.createElement("svg",{className:i,style:p,viewBox:"0 0 100 100"},o.createElement("defs",null,o.createElement("clipPath",{id:`clip-${f}`},o.createElement("path",{d:l({cornerRadius:4,endAngle:(b+2*w)*Math.PI*2,radius:50,width:8})}))),o.createElement("g",{transform:"translate(50, 50)"},o.createElement("path",{d:l({endAngle:2*Math.PI,radius:50,width:8}),fill:T?u:n}),m?o.createElement("circle",{clipPath:`url(#clip-${f})`,cx:I.x,cy:I.y,fill:m,r:4+S}):null,o.createElement("path",{d:l({cornerRadius:4,endAngle:b*Math.PI*2,radius:50,startAngle:T?(b-1+w)*Math.PI*2:0,width:8}),fill:u})))}))},40851:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(60042),o=n.n(i),s=n(27378),r=n(80254),a=n(81734),l=n(47725);const c="TNj94";var u=n(26886),d=n(13840),p=n(74245);const m=["en","es","fr","de","it","pt","nl-NL","ja"];class g extends s.Component{constructor(){super(...arguments),this.translateXLookupTable=[],this.updateTranslateXLookupTable=(e,t)=>{e&&(this.translateXLookupTable[t]=e.clientWidth+(this.translateXLookupTable[t-1]||0))},this.lookupTranslateXValue=()=>this.translateXLookupTable[this.props.slideIndex-1]||0}render(){const{disabled:e,learningLanguageIds:t,onCarouselItemClick:n,onLeftArrowClick:i,onRightArrowClick:o,trackingScreen:g}=this.props,h=m.filter((e=>t.includes(e))),_=r.jj([...h,...t]);return s.createElement("nav",{className:"fh7hk"},s.createElement("svg",{className:"_2tzcF _1-WUC",fill:"none",onClick:i,viewBox:"0 0 16 16"},s.createElement("path",{d:"M10 2L4 8L10 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})),s.createElement("div",{className:"kuc9r"},s.createElement("ul",{className:"_1NFpv",style:{transform:`translateX(-${this.lookupTranslateXValue()}px)`}},_.map(((t,i)=>{return s.createElement("li",{className:"_3G2L1",key:t,ref:e=>this.updateTranslateXLookupTable(e,i)},(o=s.createElement(s.Fragment,null,s.createElement(a.Z,{className:"_1v6Jc",lang:t,size:36}),s.createElement("span",{className:"w9lql"},(0,d._i)(154,{language_name:(0,p.vY)(t)}))),e?s.createElement("span",{className:c},o):s.createElement(l.Z,{className:c,href:(0,u.og)(t),onClick:n,trackingScreen:g,trackingTarget:"flag"},o)));var o})))),s.createElement("svg",{className:"_2tbJx _1-WUC",fill:"none",onClick:o,viewBox:"0 0 16 16"},s.createElement("path",{d:"M6 2L12 8L6 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})))}}const h=parseInt("7",10),_=(0,p.Ho)();class v extends s.Component{constructor(){super(...arguments),this.state={slideIndex:0},this.handleLeftArrowClick=()=>{var e,t;0===this.state.slideIndex?this.setState({slideIndex:(null!==(t=null===(e=_[p.h9])||void 0===e?void 0:e.length)&&void 0!==t?t:0)-h}):this.setState({slideIndex:Math.max(0,this.state.slideIndex-2)})},this.handleRightArrowClick=()=>{var e,t,n,i;this.state.slideIndex===(null!==(t=null===(e=_[p.h9])||void 0===e?void 0:e.length)&&void 0!==t?t:0)-h?this.setState({slideIndex:0}):this.setState({slideIndex:Math.min((null!==(i=null===(n=_[p.h9])||void 0===n?void 0:n.length)&&void 0!==i?i:0)-h,this.state.slideIndex+2)})}}render(){var e;const{className:t,disabled:n,onCarouselItemClick:i,trackingScreen:r}=this.props,{slideIndex:a}=this.state;return s.createElement("div",{className:o()("_2QTTU",t)},s.createElement(g,{disabled:n,learningLanguageIds:null!==(e=_[p.h9])&&void 0!==e?e:[],onCarouselItemClick:i,onLeftArrowClick:this.handleLeftArrowClick,onRightArrowClick:this.handleRightArrowClick,slideIndex:a,trackingScreen:r}))}}},48982:(e,t,n)=>{"use strict";n.d(t,{dw:()=>k,Ml:()=>I,YM:()=>T});var i=n(27378),o=n(80254),s=n(47725),r=n(81928),a=n(42659),l=n(84199);const c={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","site-map-wrap":"_2-Hvl","site-map":"_1KUWD","column-header":"SP0EV",column:"_3wvOu",spacer:"_2vpsV","footer-language-wrap":"_3OyZb","footer-site-language-header":"_2QXQh","footer-ui-language-item":"_2FFXE","footer-ui-language-link":"_1Iqi7","footer-icplicense-wrap":"_2BYVA","footer-icplicense-header":"_3BM0q"};var u=n(30033),d=n(80388),p=n(67173),m=n(60610),g=n(13840),h=n(74245),_=n(64865),v=n(44746),f=n(95975),y=n(419),E=n(785);const b=(0,h.Ho)(),S=o.XP(b),w=(0,y.Q)(window.duo.uiLanguage),T=()=>{let e;switch(window.duo.uiLanguage){case"zh-CN":e="zs";break;case"zh-TW":e="zt";break;default:e=(0,h.D3)(h.h9)}const t=(window.duo.detUiLanguages||[]).includes(e)?e:"",n="en"===e,{featureFlags:o}=(0,m.Fx)(a.Mb);return i.useEffect((()=>{(0,E.j)("web_to_app_store_load",{via:"site_map"})}),[]),i.createElement("div",{className:c["site-map-wrap"]},i.createElement("div",{className:c["site-map"]},i.createElement("div",{className:c.column},i.createElement("div",{className:c["column-header"]},(0,g._i)(29912)),i.createElement("ul",null,i.createElement("li",null,i.createElement(s.Z,Object.assign({},(0,u._q)(p.V.CoursesLink),{href:"/courses"}),(0,g._i)(20631))),i.createElement("li",null,i.createElement(s.Z,{href:"/info"},(0,g._i)(17103))),i.createElement("li",null,i.createElement(s.Z,{href:"/approach"},(0,g._i)(6695))),i.createElement("li",null,i.createElement(s.Z,{href:"/efficacy"},(0,g._i)(29913))),i.createElement("li",null,i.createElement(s.Z,{href:"/team"},(0,g._i)(11435))),i.createElement("li",null,i.createElement(s.Z,{href:"https://research.duolingo.com"},(0,g._i)(6746))),i.createElement("li",null,i.createElement(s.Z,{href:"https://incubator.duolingo.com/"},(0,g._i)(7551))),i.createElement("li",null,i.createElement(s.Z,{href:"https://careers.duolingo.com"},(0,g._i)(5919))),i.createElement("li",null,i.createElement(s.Z,{href:"https://design.duolingo.com"},(0,g._i)(29914))),i.createElement("li",null,i.createElement(s.Z,{href:"https://press.duolingo.com"},(0,g._i)(18072))),i.createElement("li",null,i.createElement(s.Z,{href:"https://investors.duolingo.com"},(0,g._i)(30107))),i.createElement("li",null,i.createElement(s.Z,{href:"/contact"},(0,g._i)(23037))))),i.createElement("div",{className:c.column},i.createElement("div",{className:c["column-header"]},(0,g._i)(17225)),i.createElement("ul",null,i.createElement("li",null,i.createElement(s.Z,{href:"/"},(0,g._i)(23227))),(0,d.J9)()?null:i.createElement("li",null,i.createElement(s.Z,{href:"https://schools.duolingo.com"},(0,g._i)(13199))),i.createElement("li",null,i.createElement(s.Z,{href:`https://englishtest.duolingo.com/${t}`},"Duolingo English Test")),"en"===h.h9?i.createElement(i.Fragment,null,i.createElement("li",null,i.createElement(s.Z,{href:"https://www.duolingo.com/abc"},"Duolingo ABC")),i.createElement("li",null,i.createElement(s.Z,{href:"https://events.duolingo.com"},"Duolingo Events")),i.createElement("li",null,i.createElement(s.Z,{href:"https://www.duolingo.com/math"},"Duolingo Math"))):null,i.createElement("li",null,i.createElement(s.Z,{href:f.$},(0,g._i)(3735))),i.createElement("li",null,i.createElement(s.Z,{href:"/stories"},(0,g._i)(19593))),(0,v.Ak)(o)?i.createElement("li",null,i.createElement(s.Z,{href:"/business",onClick:()=>(0,E.mh)(window.location.href,"/business","soft")},"Duolingo for Business")):null)),i.createElement("div",{className:c.column},i.createElement("div",{className:c["column-header"]},(0,g._i)(18971)),i.createElement("ul",null,i.createElement("li",null,i.createElement(s.Z,{href:(0,_.Ir)({via:"site_map"}),onClick:()=>{(0,E.j)("web_to_app_store_tap",{target:"google_or_China",via:"site_map"})}},(0,g._i)(7946))),i.createElement("li",null,i.createElement(s.Z,{href:(0,_.fy)({via:"site_map"}),onClick:()=>{(0,E.j)("web_to_app_store_tap",{target:"apple",via:"site_map"})}},(0,g._i)(24192))),"en"===h.h9?i.createElement("li",null,i.createElement(s.Z,{href:"https://apps.apple.com/app/duolingo-abc-learn-to-read/id1440502568?pt=1374442&ct=Site%20map&mt=8"},"Duolingo ABC (iOS)")):null)),i.createElement("div",{className:c.column},i.createElement("div",{className:c["column-header"]},(0,g._i)(29915)),i.createElement("ul",null,i.createElement("li",null,i.createElement(r.Z,Object.assign({},(0,u._q)(p.V.FaqLink)),(0,g._i)(12338))),(0,d.J9)()?null:i.createElement("li",null,i.createElement(s.Z,{href:"https://duolingoschools.zendesk.com/hc/en-us"},(0,g._i)(6932))),i.createElement("li",null,i.createElement(s.Z,{href:"https://englishtest.duolingo.com/faq"},(0,g._i)(20482,{test_name:"Duolingo English Test"}))),i.createElement("li",null,i.createElement(s.Z,{href:"https://status.duolingo.com/"},(0,g._i)(12464))))),i.createElement("div",{className:c.column},i.createElement("div",{className:c["column-header"]},(0,g._i)(29916)),i.createElement("ul",null,i.createElement("li",null,i.createElement(s.Z,{href:"/guidelines"},(0,g._i)(29917))),i.createElement("li",null,i.createElement(s.Z,{href:"/terms"},(0,g._i)(22838))),i.createElement("li",null,i.createElement(s.Z,{href:"/privacy"},(0,g._i)(19704))),n?i.createElement("li",null,i.createElement(s.Z,{href:"/privacy#california"},'Respecting your "do not sell my personal information " rights')):null),i.createElement("div",{className:c.spacer}),i.createElement("div",{className:c["column-header"]},(0,g._i)(16166)),i.createElement("ul",null,i.createElement("li",null,i.createElement(s.Z,{href:"https://blog.duolingo.com"},(0,g._i)(14615))),(0,d.J9)()?null:i.createElement(i.Fragment,null,i.createElement("li",null,i.createElement(s.Z,{href:w.instagram.link},(0,g._i)(616))),i.createElement("li",null,i.createElement(s.Z,{href:w.facebook.link},(0,g._i)(17511))),i.createElement("li",null,i.createElement(s.Z,{href:w.twitter.link},(0,g._i)(5061))),i.createElement("li",null,i.createElement(s.Z,{href:"https://www.youtube.com/user/duolingo"},"YouTube")))))))},I=()=>i.createElement("div",{className:c["footer-language-wrap"]},i.createElement("div",{className:c["footer-site-language-header"]},(0,g._i)(18889)),i.createElement("ul",{className:c["footer-ui-language-list"]},S.map((e=>i.createElement("li",{className:c["footer-ui-language-item"],key:e},i.createElement(s.Z,{className:c["footer-ui-language-link"],href:`//${(0,h.D3)(e)}.duolingo.com`},(0,h.lx)(e))))))),k=()=>i.createElement("div",{className:c["footer-icplicense-wrap"]},i.createElement("div",{className:c["footer-icplicense-header"]},i.createElement(s.Z,{href:"http://beian.miit.gov.cn"},"京ICP备14061397号-1"),i.createElement("span",null," • "),i.createElement("img",{src:l}),i.createElement(s.Z,{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502039019"},"京公网安备 11010502039019 号")))},14649:(e,t,n)=>{"use strict";n.d(t,{M:()=>u,_:()=>d});var i=n(84389),o=n(30977),s=n(785),r=n(66195),a=n(16086),l=n(20028),c=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const u=()=>e=>c(void 0,void 0,void 0,(function*(){try{const t=yield o.Vi.userAchievements((0,a.Jb)());e({achievements:t._achievements,type:"UPDATE_USER_ACHIEVEMENTS"})}catch(e){(0,s.DT)("load_user_achievements_failed","Failed to load user achievements",e)}e(d())})),d=()=>(e,t)=>c(void 0,void 0,void 0,(function*(){const n=t(),{config:a,user:c,user:{fromLanguage:u,learningLanguage:d}}=n;if((0,i.mh)(a)&&d)try{const t=yield o.I7.getAchievementsV3(c.id,u,d,(0,l.jq)(c),(0,r.rt)(c),(0,l.dE)(c),c.hasPlus);t.length>0?e({achievements:t,type:"UPDATE_USER_ACHIEVEMENTS_V3"}):(0,i.jO)(c.id,a)}catch(e){(0,s.DT)("load_v3_user_achievements_failed","Failed to load V3 user achievements",e)}}))},50791:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});var i=n(30977),o=n(785);const s=()=>e=>{return t=void 0,n=void 0,r=function*(){try{e({config:yield i.Vi.getConfig(),type:"UPDATE_CONFIG"})}catch(e){(0,o.DT)("load_config_failed","Failed to load config",e)}},new((s=void 0)||(s=Promise))((function(e,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(o,a)}l((r=r.apply(t,n||[])).next())}));var t,n,s,r}},14092:(e,t,n)=>{"use strict";n.d(t,{F:()=>a,Z:()=>l});var i=n(30977),o=n(74245),s=n(785),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const a=(e,t,n,a)=>r(void 0,void 0,void 0,(function*(){yield i._s.courseSubscribe(t,n,a);const r=(0,o.D3)(null!=n?n:o.h9);(0,s.j)("course subscribe",{from_language:r,learning_language:(0,o.D3)(t),logged_in:e})})),l=(e,t,n)=>r(void 0,void 0,void 0,(function*(){yield i._s.courseUnsubscribe(e,t,n)}))},61544:(e,t,n)=>{"use strict";n.d(t,{TF:()=>a,Ek:()=>l,HQ:()=>c,oh:()=>u,tD:()=>d,Fn:()=>p,w7:()=>m});var i=n(42659),o=n(30977),s=n(66195),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const a=()=>(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,i.np)(t());if(!(0,s.rt)(n))return;const r=(0,i.Mb)(t()),[a,l,c]=yield Promise.all([o.i_.getKudosFeed(n.fromLanguage,r),o.i_.getKudosAssets(r),o.i_.getKudosDrawer(n.fromLanguage,r)]);e({feedRedesign:a,type:"SET_KUDOS_FEED"}),e({assets:l,type:"SET_KUDOS_ASSETS"}),e({drawer:c,type:"SET_KUDOS_DRAWER"})})),l=(e,t)=>n=>r(void 0,void 0,void 0,(function*(){yield o.i_.updateKudos(e,!1,t),yield n(a())})),c=(e,t,n)=>i=>r(void 0,void 0,void 0,(function*(){yield o.i_.sendKudos(e,t,n),yield i(a())})),u=e=>t=>r(void 0,void 0,void 0,(function*(){yield o.i_.unsendKudos(e),yield t(a())})),d=(e,t)=>n=>r(void 0,void 0,void 0,(function*(){const i=yield o.i_.getFriendRecommendations(e,t);n({recommendationInfo:i,type:"SET_FOLLOW_SUGGESTIONS"})})),p=(e,t)=>n=>r(void 0,void 0,void 0,(function*(){const{filteredIds:i,rotatedIds:s}=yield o.i_.updateFriendRecommendations(e,t);n({filteredIds:i,rotatedIds:s,type:"UPDATE_FOLLOW_SUGGESTIONS"})})),m=(e,t)=>n=>r(void 0,void 0,void 0,(function*(){yield o.i_.deleteFriendRecommendation(e,t),n({deletedId:t,type:"DELETE_FOLLOW_SUGGESTION"})}))},9249:(e,t,n)=>{"use strict";n.d(t,{ke:()=>l,ZK:()=>c,xD:()=>u,w4:()=>d});var i=n(14649),o=n(42659),s=n(30977),r=n(785),a=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const l=()=>e=>a(void 0,void 0,void 0,(function*(){try{e({items:yield s.Vi.getShopItems(),type:"SET_SHOP_ITEMS"})}catch(e){(0,r.DT)("load_shop_items_failed","Failed to load shop items",e)}})),c=(e,t)=>a(void 0,void 0,void 0,(function*(){const n=t.shop.misc.streak_freeze;if(n)try{yield e(u(n,"item_offer",!0)),e({gift:"streakFreeze",type:"RECEIVE_GIFT"})}catch(e){(0,r.DT)("streak_freeze_gifting_failed","Failed to gift the user a streak freeze",e)}})),u=(e,t,n=!1,l=1)=>(c,u)=>a(void 0,void 0,void 0,(function*(){const a=(0,o.iH)(u()),d=n?{isFree:!0}:{};c({status:"START",type:"PURCHASE_ITEM"});try{const[o]=(yield Promise.all(new Array(l).fill(null).map((()=>s.Vi.purchaseUserShopItem(e.id,Object.assign({learningLanguage:a},d)))))).map((e=>e.item));(0,r.j)("purchase_item",Object.assign({item_name:e.id,num_purchased:l,purchased_via:t},n?{is_free:!0}:{})),c(Object.assign({item:o,purchaseQuantity:l,status:"SUCCESS",type:"PURCHASE_ITEM"},"bonus_skill"===e.type?{bonusSkillId:e.skillId}:{})),c(i.M())}catch(e){(0,r.DT)("purchase_failed","Failed to purchase item",e),c({status:"FAIL",type:"PURCHASE_ITEM"})}})),d=e=>t=>a(void 0,void 0,void 0,(function*(){try{const n=yield s.Vi.getUserShopItem(e);t({item:n,type:"REFRESH_USER_ITEM"})}catch(e){(0,r.DT)("load_user_shop_item_failed","Failed to get user item",e)}}))},44483:(e,t,n)=>{"use strict";n.d(t,{v:()=>l,s:()=>c});var i=n(42659),o=n(83936),s=n(30977),r=n(66195),a=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const l=()=>(e,t)=>a(void 0,void 0,void 0,(function*(){const n=(0,i.np)(t());if(!(0,r.rt)(n))return;const a=0===(0,o._C)(t()),l=yield s.dQ.get(s.dQ.LEAGUES_ID,n.id,a);e({alias:"leagues",leaderboard:l,type:"UPDATE_LEADERBOARD"})})),c=()=>(e,t)=>a(void 0,void 0,void 0,(function*(){const n=(0,i.np)(t());(0,r.rt)(n)&&(yield s.dQ.patch(s.dQ.LEAGUES_ID,n.id),yield e(l()))}))},45788:(e,t,n)=>{"use strict";n.d(t,{e:()=>l,Gs:()=>c,$0:()=>u,az:()=>d});var i=n(30977),o=n(61948),s=n(6986),r=n(785),a=n(20028);const l=e=>t=>{return n=void 0,s=void 0,a=function*(){t({notificationType:e,timestamp:Date.now(),type:"DISMISS_PERSISTENT_NOTIFICATION"});const n=(()=>{switch(e){case"WEB_TO_APP_CONVERSION_AGGRESSIVE":return"WEB_TO_APP_CONVERSION";default:return e}})();(0,o.Qp)(n)&&(yield i.d0.dismissNotification(n))},new((r=void 0)||(r=Promise))((function(e,t){function i(e){try{l(a.next(e))}catch(e){t(e)}}function o(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,o)}l((a=a.apply(n,s||[])).next())}));var n,s,r,a},c=(e,t)=>(n,s)=>{n({isHomeBanner:t,notificationType:e,timestamp:Date.now(),type:"PERSISTENT_NOTIFICATION_SHOWN"});const a=o.bu[e];if(a){if((0,r.j)("home_message_shown",{message_name:a}),!t||s().uiPersisted.homeBannerShown.count>=3)try{i.zi.ackHomeMessage(a)}catch(e){(0,r.DT)("ack_message_failed","Failed to acknowledge home message",e)}}else"DOGFOODING"===e&&(0,r.j)("home_message_shown",{message_name:"adminBetaNag"})},u=e=>(t,n)=>{const i=n().user,o=!("username"in i)&&"username"in e&&(!("id"in e)||i.id===e.id);(0,s.yI)(n().config,(0,a.jq)(e),o)&&t({notificationType:"MARKETING_OPT_IN",type:"CREATE_PERSISTENT_NOTIFICATION"})},d=e=>(t,n)=>{n().ui.canShowHomeNotification||t({notificationType:"STREAK_REPAIRED",type:"CAN_SHOW_HOME_NOTIFICATION"}),t({length:e,type:"CREATE_STREAK_REPAIRED_NOTIFICATION"})}},7924:(e,t,n)=>{"use strict";n.d(t,{nn:()=>c,VE:()=>u,vS:()=>d,zB:()=>p});var i=n(80254),o=n(9249),s=n(42659),r=n(30977),a=n(785),l=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const c=(e,t)=>n=>l(void 0,void 0,void 0,(function*(){var i;try{const s=yield r.bu.joinClassroom(e);(0,a.j)("add_observer",{from_settings:t,with_classroom:!0}),n({classroom:s,type:"JOIN_CLASSROOM"}),n(o.ke()),t||n({notificationType:"SCHOOLS_JOINED_CLASSROOM",observerName:null!==(i=s.observer_name)&&void 0!==i?i:s.observer_username,type:"CREATE_PERSISTENT_NOTIFICATION"})}catch(e){(0,a.DT)("join_classroom_failed","Failed to add teacher",e)}})),u=e=>t=>l(void 0,void 0,void 0,(function*(){try{yield r.bu.leaveClassroom(e),(0,a.j)("remove_observer",{}),t({classroomId:e,type:"LEAVE_CLASSROOM"})}catch(e){(0,a.DT)("leave_classroom_failed","Failed to leave classroom",e)}})),d=()=>e=>l(void 0,void 0,void 0,(function*(){var t;const n=yield r.bu.getUserAssignments(),o=n.next_skill;let s=(null!==(t=n.assignments)&&void 0!==t?t:[]).map((e=>{const{status:t,skill_id:n,lessons_completed:i,num_lessons:o,xp_gained:s}=e,r=n?i:s,a="completed"===t;return Object.assign(Object.assign({},e),{complete:a,num_completed:a?o:r})}));const a=i.ZP.groupBy(s,(e=>e.complete?"complete":e.overdue?"overdue":"current"));s=[...i.ZP.sortBy(a.current,(e=>e.due_date_ord)),...i.ZP.sortBy(a.overdue,(e=>-e.due_date_ord)),...i.ZP.sortBy(a.complete,(e=>e.completion_date_ord))],e({assignments:s,nextSkill:o,type:"UPDATE_ASSIGNMENTS"})})),p=()=>(e,t)=>l(void 0,void 0,void 0,(function*(){const n=(0,s.np)(t());try{const t=yield r.bu.getUserClassroomContestState(n.id);if(yield r.dQ.patch(r.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID,n.id),!t[0])return;e({classroomContest:t[0],type:"UPDATE_CLASSROOM_CONTEST"})}catch(e){(0,a.DT)("update_classroom_contest_failed","Failed to update Schools classroom contests",e)}}))},26174:(e,t,n)=>{"use strict";n.d(t,{g:()=>d,i:()=>p});var i=n(42659),o=n(30977),s=n(21061),r=n(17251),a=n(8718),l=n(785),c=n(20028),u=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const d=()=>(e,t)=>u(void 0,void 0,void 0,(function*(){var n;const u=t(),d=(0,i.np)(u),p=(0,i.Oz)(u),m=d.learningLanguage,g=null!==(n=null==p?void 0:p.fromLanguage)&&void 0!==n?n:(0,a.c6)(),h=d.privacySettings.includes("DISABLE_MATURE_WORDS"),_=(0,i.oe)(u),v=p.crowns===(0,r.vu)(p.skills,_),f=(0,c.d1)(d)?"schools":v?"all":"crowns";let y;try{y=yield o.Mw.getListingUpdate(m,g,h,p.crowns,f)}catch(e){return void(0,l.DT)("stories_listing_update","Failed to fetch listing update",e)}const E=(0,s.Zo)();if(y.newStoryIds.length>0&&y.timeOfUpdate){const t=y.timeOfUpdate,n=y.newStoryIds.map((e=>({storyId:e,unlockedTimeInEpochSeconds:t})));e({newlyPublishedUpdate:{courseId:p.id,lastCheckedTime:E,showRedDot:!0,timeOfUpdate:y.timeOfUpdate},type:"stories/SET_NEWLY_PUBLISHED_UPDATE"}),e({isNewlyPublishedUpdate:!0,type:"stories/SET_UNVISITED_STORIES",unvisitedStories:n}),e({mostRecentlyUnlockedStory:n[0],type:"stories/SET_MOST_RECENTLY_UNLOCKED_STORY"})}else e({newlyPublishedUpdate:{courseId:p.id,lastCheckedTime:E,showRedDot:!1,timeOfUpdate:void 0},type:"stories/SET_NEWLY_PUBLISHED_UPDATE"})})),p=()=>(e,t)=>u(void 0,void 0,void 0,(function*(){var n;const s=t(),r=(0,i.np)(s),c=(0,i.Oz)(s),u=r.learningLanguage,d=null!==(n=null==c?void 0:c.fromLanguage)&&void 0!==n?n:(0,a.c6)();try{e({config:yield o.Mw.getConfig(u,d),type:"stories/SET_CONFIG"})}catch(e){(0,l.DT)("load_stories_config_failed","Failed to load Stories config",e)}}))},94144:(e,t,n)=>{"use strict";n.d(t,{eY:()=>D,hv:()=>x,DZ:()=>M,rf:()=>U,zv:()=>F,kS:()=>j,jK:()=>B,Kb:()=>H,TS:()=>G,oQ:()=>V});var i=n(50065),o=n(80254),s=n(14649),r=n(50791),a=n(61544),l=n(9249),c=n(44483),u=n(45788),d=n(7924),p=n(42659),m=n(93540),g=n(83936),h=n(51827),_=n(30977),v=n(70326),f=n(11202),y=n(54412),E=n(21061),b=n(59273),S=n(50548),w=n(74245),T=n(23275),I=n(71371),k=n(88787),C=n(51158),R=n(88868),O=n(11908),N=n(785),L=n(16086),P=n(20028),A=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const D=(e,t,n)=>(i,p)=>A(void 0,void 0,void 0,(function*(){try{let m;try{m=yield _.Vi.userInfo((0,L.Jb)()),null==n||n(m),(0,N.XZ)(m.id),(0,h.N1)(m)}catch(t){if(e)return void(0,N.hK)();throw t}i(u.$0(m)),m.learningLanguage||(0,R.v$)(window.location.pathname)||(yield(0,R.Zs)("/welcome",!0)),w.h9!==m.fromLanguage&&(yield(0,R.Zs)(t)),(0,P.Sk)(m)&&(0,b.R)(),i({type:"UPDATE_USER",user:m}),document.hidden||"/reset_password"===window.location.pathname||((0,N.j)("user_active",{product:"learning_app"}),(0,N.Bf)({activity_trigger:"user_model_update"})),i({achievements:m._achievements,type:"UPDATE_USER_ACHIEVEMENTS"});const g=p().notifications;let v=o.ZP.isEmpty(g);if(!v){const e=m.webNotificationIds||[],t=o.ZP.pluck(o.ZP.values(g),"id");v=!!o.ZP.difference(e,t).length}if(v||(0,N.j)("notification_bell_load",{has_unread_notifications:!1}),v&&A(void 0,void 0,void 0,(function*(){try{const e=(yield _.d0.getNotifications()).map((e=>Object.assign(Object.assign({},e),{id:`ev_${e.id}`,pretty_datetime:e.pretty_datetime.trim()})));(0,N.j)("notification_bell_load",{has_unread_notifications:o.ZP.where(e,{unseen:!0}).length>0}),i({notifications:o.ZP.indexBy(e,"id"),type:"SET_NOTIFICATIONS"})}catch(e){(0,N.DT)("load_user_notifications_failed","Failed to load web notifications",e)}})),A(void 0,void 0,void 0,(function*(){try{const e=yield _.Vi.getUserInventory(),t=o.ZP.indexBy(e,"itemName");i({inventory:t,type:"UPDATE_INVENTORY"})}catch(e){(0,N.DT)("load_user_inventory_failed","Failed to load user inventory",e)}})),i(l.ke()),m.trackingProperties.has_observer&&(A(void 0,void 0,void 0,(function*(){try{const e=yield _.bu.getUserClassrooms();i({classrooms:e,type:"UPDATE_CLASSROOMS"})}catch(e){(0,N.DT)("load_user_classrooms_failed","Failed to load classrooms",e)}})),i(d.vS()),i(d.zB())),"true"!==(0,y.ej)(y.Vj.Impersonate)){const e=(0,E.NP)();m.timezone!==e&&(console.log(`Changing time zone from ${m.timezone} to ${e}`),i(M({timezone:e})))}if(["fromLanguage","learningLanguage"].forEach((e=>{const t=m[e],n=`${O.Qt.LanguageTokens}.${t}`;(0,O.No)(n)||A(void 0,void 0,void 0,(function*(){try{(0,O.LS)(n,yield _._s.getLanguageTokens(t))}catch(e){(0,N.DT)("load_user_language_tokens_failed","Failed to load language tokens",e)}}))})),(0,f.gE)())try{const e=yield _.bG.requestGradingConfig();(0,f.tc)(e)}catch(e){(0,N.DT)("load_user_grading_config_failed","Failed to download client-side grading config.",e)}i(r.i()),i(c.v()),i(a.TF()),i(a.tD(m.id,m.currentCourse.fromLanguage)),i(s._())}catch(e){(0,N.DT)("load_user_failed","Failed to load user",e)}(0,N.hK)()})),x=()=>(e,t)=>A(void 0,void 0,void 0,(function*(){let n;try{n=yield _.Vi.userInfoPartial((0,L.Jb)(),["currentCourse"])}catch(e){return void(0,N.DT)("load_current_course_failed","Failed to load current course",e)}(0,i.dC)((()=>{var i,o;const s=null===(i=(0,m.cb)(t()))||void 0===i?void 0:i.level;if(s){e({type:"UPDATE_USER",user:n});const i=null===(o=(0,m.cb)(t()))||void 0===o?void 0:o.level;(null==i?void 0:i.id)!==s.id&&e({animations:(0,T.P6)(s,i,{isPathVisible:!0}),type:"QUEUE_ANIMATIONS"})}}))})),M=(e,t=!0)=>n=>A(void 0,void 0,void 0,(function*(){const i=Object.assign({trackingProperties:!0},e);delete i.currentPassword,"facebookToken"in e&&(i.email=!0,i.facebookId=!0,i.name=!0,delete i.facebookToken),"googleToken"in e&&(i.email=!0,i.googleId=!0,i.name=!0,delete i.googleToken),e.learningLanguage&&(i.courses=!0,i.currentCourse=!0),"password"in e&&(i.name=!0,i.username=!0,delete i.password),"timezone"in e&&(i.timezoneOffset=!0),"age"in e&&(i.adsConfig=!0,i.privacySettings=!0,delete i.age);const s=o.ZP.keys(i).sort();if(e.picture instanceof File){try{yield _.d0.uploadAvatar(e.picture),(0,N.j)("profile_picture_activity_result",{is_success:!0})}catch(e){(0,N.j)("profile_picture_activity_result",{is_success:!1})}delete e.picture}try{const t=yield _.Vi.userUpdate((0,L.Jb)(),Object.assign(Object.assign({},e),{picture:e.picture}),s);n(u.$0(t)),"age"in e&&n(l.ke()),n({type:"UPDATE_USER",user:Object.assign(Object.assign({},o.ZP.object(s.map((e=>[e,null])))),t)}),e.privacySettings&&(0,N.j)("privacy_settings_update",{forum_enabled:!e.privacySettings.includes("DISABLE_DISCUSSIONS"),public_profile:!e.privacySettings.includes("DISABLE_STREAM")})}catch(e){throw console.error("Failed to update user",e),t?e.response?(0,v.lV)(e.response.data.details):{}:e}})),U=e=>(t,n)=>A(void 0,void 0,void 0,(function*(){const i=(0,p.np)(n()).blockedUserIds||[];i.includes(e)||(yield _.i_.block(e),t({type:"UPDATE_USER",user:{blockedUserIds:[e,...i]}}))})),F=e=>(t,n)=>A(void 0,void 0,void 0,(function*(){const i=(0,p.np)(n()).blockedUserIds||[];i.includes(e)&&(yield _.i_.unblock(e),t({type:"UPDATE_USER",user:{blockedUserIds:i.filter((t=>t!==e))}}))})),j=(e="/")=>(t,n)=>A(void 0,void 0,void 0,(function*(){yield(0,N.j)("sign_out",{},!1),t({type:"LOGOUT"}),(0,P.Sk)((0,p.np)(n()))||(0,O.cl)(O.Qt.LoggedOutExperiments),(0,O.cl)(O.Qt.AchievementsMigrationTimestamp);try{yield(0,k.r1)()}catch(e){(0,C.Kp)("Failed to unsubscribe from push notifications",{ex:e})}yield _.d0.logout(e)})),B=()=>e=>A(void 0,void 0,void 0,(function*(){yield _.d0.deactivate(),e({type:"RESET_STATE"}),yield(0,R.Zs)("/")})),H=(e,t)=>n=>A(void 0,void 0,void 0,(function*(){try{yield n(((e,t)=>n=>A(void 0,void 0,void 0,(function*(){yield(0,v.pK)(e,t),yield n(D()),(0,N.j)("welcome",{})})))(e,t)),t&&t!==w.h9?((0,y.d8)(y.Vj.ShouldTrackWelcome,"true"),yield(0,R.Zs)("/welcome")):S.m.push("/welcome")}catch(e){}})),G=({courseId:e,fromLanguage:t,learningLanguage:n,redirectToHome:i=!0,resetScrollPosition:o})=>(s,r)=>A(void 0,void 0,void 0,(function*(){const a="/learn"===window.location.pathname&&(0,g.N9)(r())({fromLanguageId:t,learningLanguageId:n});a&&I.Z.start("language_switch");const l={courseId:e,fromLanguage:t,learningLanguage:n},c={from_language:t,learning_language:n};e&&(c.course_id=e),(0,N.j)("switch_language",c),r().ui.canShowHomeNotification||s({notificationType:"NEW_TREE_CHANGE_V2",type:"CAN_SHOW_HOME_NOTIFICATION"}),i&&"/learn"!==window.location.pathname&&S.m.push("/learn");try{yield _.Vi.userUpdate((0,L.Jb)(),l,[]);const e=yield _.Vi.userInfoPartial((0,L.Jb)(),["courses","currentCourse","fromLanguage","learningLanguage"]);s({type:"UPDATE_USER",user:e}),(0,p.np)(r()).trackingProperties.has_observer&&(yield s(d.vS())),(!0===o||"if-v1"===o&&!(0,m.kn)(r()))&&window.scrollTo(0,0),t!==w.h9&&(yield(0,R.Zs)()),a&&I.Z.finish("language_switch")}catch(e){(0,N.DT)("switch_course_failed","Failed to switch course",e)}})),V=(e,t,n,i,o)=>s=>{const r=(0,E.HR)(300);s(void 0===n?{mistakeCountInfo:void 0,type:"SET_MISTAKE_COUNT"}:{mistakeCountInfo:{courseId:e,expirationTime:r,includeListening:i,includeSpeaking:o,mistakeCount:n},type:"SET_MISTAKE_COUNT"}),s(Z(e,t,r,i,o))},Z=(e,t,n,i,o)=>s=>A(void 0,void 0,void 0,(function*(){const r=yield _.wO.getMistakeCount(e,t,i,o);s({mistakeCountInfo:{courseId:e,expirationTime:n+1,includeListening:i,includeSpeaking:o,mistakeCount:r},type:"SET_MISTAKE_COUNT"})}))},42659:(e,t,n)=>{"use strict";n.d(t,{jv:()=>o,Mb:()=>s,dE:()=>r,Rv:()=>a,Sg:()=>l,mk:()=>c,SJ:()=>u,YW:()=>d,bE:()=>p,Xr:()=>m,__:()=>g,Ss:()=>_,iH:()=>v,hp:()=>f,yV:()=>y,Ch:()=>E,tw:()=>b,lA:()=>S,w0:()=>w,Lv:()=>T,WN:()=>I,oe:()=>k,Bs:()=>C,wW:()=>R,Jw:()=>O,np:()=>N,is:()=>L,hy:()=>P,iM:()=>A,MY:()=>D,Oz:()=>x,B8:()=>M,$4:()=>U,Bk:()=>F,vw:()=>j,Lm:()=>B,Fp:()=>H,NT:()=>G,Ec:()=>V,Fl:()=>Z,Y4:()=>W,r8:()=>z,aQ:()=>$,dY:()=>Y,gg:()=>K,bW:()=>q,Y2:()=>J,Cm:()=>X,yk:()=>Q,gl:()=>ee});var i=n(80406);const o=e=>e.browserSettings,s=e=>e.config,r=e=>e.courses,a=e=>e.user.fromLanguage,l=e=>void 0!==e.ui.drawer&&void 0!==e.ui.modal,c=e=>void 0!==e.ui.drawer||void 0!==e.ui.modal,u=e=>void 0!==e.ui.modal,d=e=>e.ui.online,p=e=>e.ui.isShopItemsFresh,m=e=>e.ui.isUserModelFresh,g=e=>e.items,h=e=>e.profile,_=e=>e.leaderboards.leagues,v=e=>e.user.learningLanguage,f=({},e)=>e.location,y=e=>e.notifications,E=e=>e.paymentMethods,b=e=>e.ui.persistentNotifications,S=e=>e.player,w=e=>e.animations,T=e=>e.referralStats,I=e=>e.ui.scrollToStoriesCarousel,k=e=>e.skills,C=e=>e.student,R=e=>e.subscriptions,O=e=>e.ui,N=e=>e.user,L=i.P1(S,(e=>e.session)),P=i.P1(S,L,((e,t)=>t&&(e.currentIndex===t.challenges.length-1||e.endedEarly||t.heartsLeft<(e.sessionParams.isFinalLevel?1:0)))),A=i.P1(L,(e=>{var t;return null!==(t=null==e?void 0:e.challenges.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})))&&void 0!==t?t:[]})),D=i.P1(S,L,((e,t)=>null==t?void 0:t.challenges[e.currentIndex])),x=i.P1(r,N,((e,t)=>t.currentCourseId?e[t.currentCourseId]:void 0)),M=i.P1((e=>e.courseHistories),x,((e,t)=>e[t.id])),U=i.P1(O,(e=>e.viewportWidth>=700)),F=i.P1(O,(e=>e.viewportWidth<530)),j=i.P1(O,(e=>!!e.purchasingItem)),B=i.P1(N,(e=>!!e.id)),H=i.P1(O,(e=>e.popoverId)),G=i.P1(h,(e=>e.user)),V=i.P1(h,(e=>e.followers)),Z=i.P1(h,(e=>e.following)),W=i.P1(h,(e=>e.socialProfile)),z=i.P1(h,(e=>e.achievements)),$=i.P1(h,(e=>e.xpEvents)),Y=i.P1(N,(e=>e.id)),K=i.P1(s,(e=>{var t,n,i,o;return"CN"===e.ipCountry&&null!==(n=null===(t=e.featureFlags)||void 0===t?void 0:t.disable_avatars_cn)&&void 0!==n&&n||null!==(o=null===(i=e.featureFlags)||void 0===i?void 0:i.disable_avatars_global)&&void 0!==o&&o})),q=i.P1(M,(e=>e.numSessionsWithMistakes)),J=i.P1(g,(e=>e.inventory.premium_subscription)),X=i.P1(J,(e=>null==e?void 0:e.subscriptionInfo)),Q=i.P1(g,(e=>e.inventory.immersive_subscription)),ee=i.P1(S,(e=>{var t,n;return null!==(n=null===(t=e.sessionParams)||void 0===t?void 0:t.isGrammarSkill)&&void 0!==n&&n}))},57817:(e,t,n)=>{"use strict";n.d(t,{S6:()=>l,Ye:()=>c,T:()=>u});var i=n(80406),o=n(42659),s=n(83936),r=n(86233),a=n(61948);const l=i.P1(i.zB({currentCourse:o.Oz,isDesktop:o.$4,isEligibleForDuolingoPlus:s.du,isShopItemsFresh:o.bE,isUserModelFresh:o.Xr,items:o.__,kudosAssets:e=>e.friends.assets,kudosDrawer:e=>e.friends.drawer,leagues:o.Ss,maxTreeRow:s.f,persistentNotifications:o.tw,referralStats:o.Lv,sessionsToUnlockLeagues:s._C,unlockedStories:e=>r.nn(e).unlockedStories,user:o.np}),(e=>{var{isEligibleForDuolingoPlus:t,isUserModelFresh:n,maxTreeRow:i,user:o}=e,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["isEligibleForDuolingoPlus","isUserModelFresh","maxTreeRow","user"]);return o.id&&n&&void 0!==t&&void 0!==i?(0,a.UY)(Object.assign({isEligibleForDuolingoPlus:t,isUserModelFresh:n,user:o},s)):[]})),c=i.P1(o.w0,o.Jw,((e,t)=>e.some((e=>e.blocksHomeMessages))||t.drawer&&!t.drawerIsUhmManaged||t.modal&&!t.modalIsUhmManaged?void 0:t.homeNotification)),u=i.P1(c,(e=>"WEB_LEADERBOARDS_INTRODUCTION"===e))},93540:(e,t,n)=>{"use strict";n.d(t,{HF:()=>a,cb:()=>l,fg:()=>c,kn:()=>u,bw:()=>d});var i=n(80406),o=n(42659),s=n(23275),r=n(43940);const a=i.P1(o.Oz,(e=>e.path)),l=i.P1(a,(e=>e?(0,s.ry)(e):void 0)),c=i.P1(o.w0,(e=>e.find((e=>"PATH_LEVEL_CENTER"===e.name)))),u=i.P1(o.Oz,(e=>void 0!==e&&(0,r.B)(e))),d=i.P1(o.w0,(e=>e.find((e=>"PATH_SCROLL"===e.name))))},83936:(e,t,n)=>{"use strict";n.d(t,{f:()=>b,RB:()=>S,Y_:()=>w,ef:()=>T,du:()=>I,QK:()=>k,Qo:()=>C,K_:()=>R,QQ:()=>O,oE:()=>N,_C:()=>L,nS:()=>P,y1:()=>A,E6:()=>D,N9:()=>x,WM:()=>M,A5:()=>U,Rq:()=>F,wc:()=>j,yj:()=>B});var i=n(80406),o=n(80254),s=n(42659),r=n(51827),a=n(40387),l=n(95332),c=n(16970),u=n(59273),d=n(51748),p=n(68903),m=n(74245),g=n(85381),h=n(51158),_=n(18313),v=n(87477),f=n(68564),y=n(16086),E=n(20028);const b=i.P1(s.Oz,s.oe,((e,t)=>{if(void 0!==(null==e?void 0:e.path)){let t=0;return e.path.forEach((e=>{e.levels.forEach((e=>{"passed"===e.state&&(t+=1)}))})),t}if(!e||!t)return;let n=-1;const i=e.skills;return i?(i.forEach((e=>{let i=!1;t[e[0]].bonus||(e.forEach((e=>{t[e].accessible||(i=!0)})),i||++n)})),n):void 0})),S=i.P1(s.np,s.Oz,s.oe,s.hp,((e,t,n,i)=>{if(!n||!i)return;const s=i.pathname;if(!s.startsWith("/skill/"))return;const r=s.split("/"),a=r[2],l=r[3],c=encodeURIComponent(l),u=decodeURIComponent(l),d=e.fromLanguage,p=(0,m.Py)(a),g=t?t.skills.flat():void 0,_=o.VO(n).find((e=>{let t;try{t=decodeURIComponent(e.urlName)}catch(e){}const n=t===u,i=e.urlName===l||e.urlName===c||e.urlName===u;return void 0===t?(console.error("Unable to decode skill urlName"),(0,h.um)("Unable to decode skill urlName",{data:{urlName:e.urlName},sample:.01})):!n&&i&&(console.error("Decoded skill name did not match when it should have",t),(0,h.um)("Decoded skill name did not match when it should have",{data:{urlName:e.urlName},sample:.01})),(n||i)&&e.fromLanguage===d&&e.learningLanguage===p&&(!g||g.includes(e.id))}));return _?n[_.id]:void 0})),w=i.P1(s.jv,s.MY,s.$4,s.gl,s.is,((e,t,n,i,o)=>t&&o?(0,l.eK)({browserSettings:e,challenge:t,isDesktop:n,isGrammar:i,session:o}):{canToggleTyping:!1,isToggledToTyping:!1})),T=i.P1(s.__,(e=>{var t;return null===(t=e.inventory.premium_subscription)||void 0===t?void 0:t.familyPlanInfo})),I=i.P1(s.__,s.Mb,r.NX),k=i.P1(s.__,(e=>(0,r.RZ)(e))),C=i.P1(s.__,(e=>(0,r._H)(e))),R=i.P1(s.Mb,s.__,((e,t)=>(0,y.Pc)()?(0,r.BY)(t):e.ipCountry?(0,g.kk)(e.ipCountry):void 0)),O=i.P1(s.Oz,s.oe,((e,t)=>(0,_.cp)({course:e,skills:t}))),N=i.P1(s.Oz,s.oe,((e,t)=>(0,_.me)({course:e,skills:t}))),L=i.P1(s.Ss,(e=>void 0===e?void 0:e.numSessionsRemainingToUnlock)),P=i.P1(s.Ss,(e=>void 0!==(null==e?void 0:e.ended)&&e.ended.length>0?e.ended:void 0)),A=i.P1(k,(e=>!1!==e)),D=i.P1(s.w0,(e=>e.some((e=>"SKILL_UNLOCK"===e.name)))),x=i.P1(s.np,s.dE,((e,t)=>{const n=(e.courses||[]).map((e=>t[e])).map((e=>`${e.learningLanguage}_${e.fromLanguage}`));return e=>n.includes(`${e.learningLanguageId}_${e.fromLanguageId}`)})),M=i.P1(s.Mb,(e=>e.clientExperiments)),U=i.P1(s.np,s.Lm,I,k,((e,t,n,i)=>{if(!t||(0,E.pN)(e))return"eligibleFreeTrial";if(e.hasPlus)return"alreadyHasPlus";switch(n){case!0:return i?"eligibleFreeTrial":"eligible";case!1:return"ineligible";case void 0:return;default:return void(0,p.RJ)(n)}})),F=i.P1(s.lA,s.hy,((e,t)=>{if(!e.session)return;if(e.sessionParams.isFinalLevel){const[t,n]=(0,v.Dk)(e);return![v.cS.PartialXpDuo,v.cS.PartialXpDuoSliding].includes(e.status)&&void 0!==t&&t<e.challengeIdSections.length-1&&n===e.challengeIdSections[t].length-1?"partialXpDuo":void 0}const n=[v.cS.CoachDuo,v.cS.CoachDuoSliding,v.cS.SmartTip,v.cS.SmartTipBlaming,v.cS.SmartTipSliding,v.cS.HardModeDuo,v.cS.HardModeDuoSliding];let i=n.indexOf(e.status)<n.indexOf(v.cS.CoachDuo)&&e.coachDuo.model&&(!t||e.coachDuo.model.showReason===d.w.PerfectLesson);const o=n.indexOf(e.status)<n.indexOf(v.cS.SmartTip)&&e.smartTipToShow&&!t,s=n.indexOf(e.status)<n.indexOf(v.cS.HardModeDuo)&&((0,u.gQ)("hardModeDuo")||(0,a.IF)(e)||(0,c.Yt)(e));return i&&!o&&s&&(i=!1),i?"coachDuo":o?"smartTip":s?"hardModeDuo":void 0})),j=i.P1(s.np,s.jv,((e,t)=>e.enableSpeaker&&t.listenDisabledUntil)),B=i.P1(s.np,s.jv,((e,t)=>e.enableMicrophone&&f.c&&t.speakDisabledUntil))},86233:(e,t,n)=>{"use strict";n.d(t,{nn:()=>l,A9:()=>c,qW:()=>u,iH:()=>d,pl:()=>p,Jz:()=>m,RR:()=>g,Uy:()=>h,jf:()=>_,VR:()=>v,$2:()=>f,jH:()=>y,Vm:()=>E,Bw:()=>b,nO:()=>S,wB:()=>w,lN:()=>T,yL:()=>I,Un:()=>k,s8:()=>C,Dk:()=>R,ml:()=>O,Ib:()=>N,yo:()=>L,uR:()=>P,WT:()=>A});var i=n(80406),o=n(8718),s=n(18513),r=n(43094),a=n(20028);const l=e=>e.storiesPersisted,c=e=>e.stories,u=e=>l(e).config,d=i.P1(c,(e=>e.learningLanguage)),p=i.P1(c,(e=>e.trackingProperties)),m=i.P1(c,(e=>{var t,n;return null!==(n=null===(t=e.storySession)||void 0===t?void 0:t.speakCount)&&void 0!==n?n:0})),g=i.P1(c,(e=>{var t;return null===(t=e.storySession)||void 0===t?void 0:t.challengeSession})),h=i.P1(c,(e=>e.storySession)),_=i.P1(c,(e=>-1!==e.speakingDisabledLineIndex)),v=i.P1(c,(e=>{var t;const n=e.storyElements,i=null===(t=e.storySession)||void 0===t?void 0:t.furthestPosition.elementIndex;return n&&i?n[i]:void 0})),f=i.P1(c,(e=>{var t;return null===(t=e.storySession)||void 0===t?void 0:t.furthestPosition})),y=i.P1(c,(e=>{var t;return null===(t=e.storySession)||void 0===t?void 0:t.status})),E=i.P1(l,(e=>e.unvisitedStories)),b=i.P1(l,(e=>e.mostRecentlyUnlockedStory)),S=i.P1(l,(e=>e.newlyPublishedUpdate)),w=i.P1(l,(e=>e.carousel)),T=i.P1(c,(e=>{var t;const n=e.storyListing;if(void 0===n)return;let i=!1;const o=n.sets.map((e=>{const t=e.every((e=>e.completed));return{complete:t,firstIncompleteSet:!t&&!i&&(i=!0),locked:e.every((e=>e.setLocked)),stories:e}}));return{crownGating:n.crownGating,storySets:o,unorderedStories:null!==(t=n.unpublishedStories)&&void 0!==t?t:[]}})),I=i.P1(c,(e=>(0,o.C7)(e.storyElements))),k=i.P1(c,(e=>void 0!==e.storyListing&&e.storyListing.sets.length>0&&e.storyListing.sets.every((e=>e.every((e=>"GILDED"===e.state)))))),C=i.P1((e=>e.user),c,((e,t)=>{var n;return!(0,a.pN)(e)||!!(null===(n=t.storyListing)||void 0===n?void 0:n.sets.every((e=>e.every((e=>"GILDED"!==e.state)))))})),R=i.P1(c,(e=>{var t,n;const i=null===(t=e.storySession)||void 0===t?void 0:t.selectedPosition,o=e.storyElements,s=void 0!==(null===(n=e.storySession)||void 0===n?void 0:n.freeformChallengeSubmittedResponse);return i&&o?(0,r.lo)(o,i.elementIndex,s):0})),O=i.P1(c,(e=>{var t;return e.storyElements&&(null===(t=e.storySession)||void 0===t?void 0:t.furthestPosition)&&(0,r.O$)(e.storyElements,e.storySession.furthestPosition.elementIndex)})),N=i.P1(O,c,((e,t)=>{var n;return e?null===(n=null==t?void 0:t.storyElements)||void 0===n?void 0:n[e]:void 0})),L=i.P1((e=>e.stories.storyElements),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.furthestPosition}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.selectedPosition}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.challengeSession}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.status}),(e=>{var t,n;return"in-progress"===(null===(t=e.stories.storySession)||void 0===t?void 0:t.storyCompleteRequestStatus)||"in-progress"===(null===(n=e.stories.storySession)||void 0===n?void 0:n.grammarCorrectionRequestStatus)}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.onboardingStep}),(e=>e.stories.audio.playError),((e,t,n,i,s,a,l,c)=>{var u;if(c)return!0;if(a)return!1;if("completed"===s)return!1;if("story-end"===s)return!0;if(void 0===t||void 0===e||void 0===n)return!1;if("tap-translation-hint"===l)return!1;if(null==i?void 0:i.completed)return!0;if("type-text"===(null==i?void 0:i.type)&&!i.completed&&i.answer.length>0)return!0;if("freeform-writing"===(null==i?void 0:i.type)&&!i.completed&&i.fetchedCorrection)return!0;if(i&&!i.completed)return!1;const d=e[t.elementIndex],p=null===(u=(0,o.z_)(d))||void 0===u?void 0:u.text.length;if("DUO_POPUP"===d.type)return!0;const m=!!(void 0===p||void 0!==t.textIndex&&t.textIndex>=p-1),g=e[t.elementIndex+1],h=!(0,o.z$)(g)&&"CHALLENGE_PROMPT"!==d.type,_=(0,r.lo)(e,t.elementIndex,!0),v=e[_],f="LINE"===v.type?v.line.content.text.length:0,y="LINE"===e[t.elementIndex].type?t:{elementIndex:_,textIndex:f-1};return(0,r.Nh)(n,y)||m&&h})),P=i.P1((e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.challengeSession}),(e=>"freeform-writing"===(null==e?void 0:e.type)&&!e.completed&&(0,s.Bv)(e))),A=i.P1(h,(e=>{var t;return null===(t=null==e?void 0:e.visibleStoryEndSections)||void 0===t?void 0:t.slice(-1)[0]}))},23005:(e,t,n)=>{"use strict";n(95830);var i=n(67899),o=n(39852),s=n(74971),r=(n(91575),n(27378)),a=n(31542),l=n(50065),c=n(69635),u=n(99369),d=n(80254),p=n(84389);const m=(0,u.from)({status:"disabled"}),g=(0,u.from)({coachEnabled:!0,completeReverseTranslationTypingEnabled:!1,listenDisabledUntil:0,prefersReducedMotion:!1,speakDisabledUntil:0,transliterationsSettings:{"ja<en":{enabled:!0,type:"romaji"}},typingEnabled:!1}),h={activeAlphabetName:void 0,changedCharacters:void 0,characterChart:void 0,fromLanguage:void 0,learningLanguage:void 0,stagedCharacterChart:void 0},_=JSON.parse('{"ageRestrictionLimit":13,"clientExperiments":{},"courses":{"ar":["en","fr","de","sv"],"cs":["en"],"de":["en","es","fr"],"el":["en"],"en":["es","fr","de","it","pt","nl-NL","ga","da","sv","tr","eo","no-BO","uk","ru","pl","cy"],"es":["en","fr","pt","de","it","ca"],"fr":["de","en","es","it"],"hi":["en"],"hu":["en"],"id":["en"],"it":["fr","en"],"ja":["en"],"ko":["en"],"nl-NL":["en"],"pl":["en"],"pt":["de","en","es","fr"],"ro":["en"],"ru":["en","de","fr","es"],"tr":["en","de"],"uk":["en"],"vi":["en"],"zh":["en"]},"dictionaryHost":"d2.duolingo.com","featureFlags":{},"speechHost":"speech.duolingo.com"}');var v=n(59273),f=n(21061),y=n(68903);const E=({history:e,updateTimestamp:t,values:n})=>e.filter((e=>t<e.expirationTimestamp)).filter((e=>!(0,y.cY)(n,e.value))),b=(0,f.dz)({days:28}),S=({challenges:e,history:t,updateTimestamp:n})=>{const i=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>({generatorIdentifier:e.challengeGeneratorIdentifier})));return(({history:e,ttl:t,unique:n,updateTimestamp:i,values:o})=>{let s=[...e,...o.map((e=>({expirationTimestamp:i+t,value:e})))].filter((e=>i<e.expirationTimestamp));if(n){const e=[];s.sort(((e,t)=>t.expirationTimestamp-e.expirationTimestamp)).forEach((t=>{(0,y.cY)(e.map((e=>e.value)),t.value)||e.push(t)})),s=e}return s.sort(((e,t)=>e.expirationTimestamp-t.expirationTimestamp))})({history:t,ttl:b,unique:!0,updateTimestamp:n,values:i})},w=({challenges:e,history:t,updateTimestamp:n})=>{const i=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>({generatorIdentifier:e.challengeGeneratorIdentifier})));return E({history:t,updateTimestamp:n,values:i})};var T=n(11811);const I=(e=(0,u.from)({globalPlacementSessionStarts:0,globalPracticeSessionEnds:0,globalPracticeSessionStarts:0,mistakeHistory:[],numSessionsWithMistakes:0}),t)=>{var n,i;switch(t.type){case"QUIT_SESSION":{const{sessionParams:{generatorIdentifiersOfRecentMistakes:n},session:i,session:{challenges:o,startTime:s}}=t;return i.type===T.FF.Lesson&&(e=(0,u.set)(e,"mistakeHistory",S({challenges:o.filter((e=>{var t;return!1===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})),history:e.mistakeHistory,updateTimestamp:s}))),n&&(e=(0,u.set)(e,"mistakeHistory",w({challenges:o.filter((e=>{var t;return!0===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})),history:e.mistakeHistory,updateTimestamp:s}))),e}case"START_SESSION":{const{sessionParams:{generatorIdentifiersOfRecentMistakes:i},session:o,startTime:s}=t;return o.type===T.FF.GlobalPractice&&(e=(0,u.set)(e,"globalPracticeSessionStarts",e.globalPracticeSessionStarts+1)),o.type===T.FF.PlacementTest&&(e=(0,u.set)(e,"globalPlacementSessionStarts",(null!==(n=e.globalPlacementSessionStarts)&&void 0!==n?n:0)+1)),i&&(e=(0,u.set)(e,"mistakeHistory",(({challenges:e,generatorIdentifiers:t,history:n,updateTimestamp:i})=>{const o=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>e.challengeGeneratorIdentifier)),s=t.filter((e=>!(0,y.cY)(o,e))).map((e=>({generatorIdentifier:e})));return E({history:n,updateTimestamp:i,values:s})})({challenges:o.challenges,generatorIdentifiers:i,history:e.mistakeHistory,updateTimestamp:s}))),e}case"SUBMITTED_SESSION":{const{requestSession:n,requestSession:{challenges:o,endTime:s},sessionParams:{generatorIdentifiersOfRecentMistakes:r}}=t;if(n.type===T.FF.GlobalPractice&&(e=(0,u.set)(e,"globalPracticeSessionEnds",e.globalPracticeSessionEnds+1)),n.type===T.FF.Lesson){const t=o.filter((e=>!1===e.correct));t.length>0&&(e=(0,u.set)(e,"numSessionsWithMistakes",(null!==(i=e.numSessionsWithMistakes)&&void 0!==i?i:0)+1)),e=(0,u.set)(e,"mistakeHistory",S({challenges:t,history:e.mistakeHistory,updateTimestamp:s}))}return r&&(e=(0,u.set)(e,"mistakeHistory",w({challenges:o.filter((e=>void 0!==e.correct)),history:e.mistakeHistory,updateTimestamp:s}))),e}default:return e}};var k=n(23275);const C=e=>e.reduce(((e,t)=>(e.push(t.map((e=>e.id))),e)),[]),R=(e,t,n)=>{const i=e.filter((e=>!t.includes(e.userId))),o=i.filter((e=>n.includes(e.userId)));return i.filter((e=>!n.includes(e.userId))).concat(o)};var O=n(16086),N=n(87477),L=n(74923),P=n(64591),A=n(97106);const D=(0,u.from)({challengeIdSections:[],challengeStates:[],coachDuo:{allCharacters:[],allShowReasons:[],currentCorrectStreak:0,currentIncorrectStreak:0},completedWithHeartsRemaining:!1,confidence:0,currentInLessonStreak:0,currentIndex:0,enableBonusPoints:!1,endedEarly:!1,hasNativeAd:!1,hints:{},inLessonTipResources:{},inLessonTipShowing:!1,isFinalLevel:!1,maxHearts:0,maxInLessonStreak:0,numInLessonTipOpens:0,receivedGifts:{streakFreeze:!1},session:void 0,sessionParams:void 0,sessionSubmitError:void 0,sessionSubmitted:!1,sessionSubmitting:!1,shownSmartTipIds:[],slideData:[],smartTipResources:{},status:void 0,strength:0,useHearts:!1}),x=(e,t)=>void 0===e.time[e.time.length-1][1]?(0,u.setIn)(e,["time",e.time.length-1,1],t):e;var M=n(8718),U=n(77042),F=n(18513),j=n(20662),B=n(43094),H=n(785);const G={audio:{instructionId:0,playState:"PAUSE",seekTo:0,speed:1},fromLanguage:void 0,learningLanguage:void 0,listenModeCharacterIds:[],masterVersion:!1,mode:"READ",showMasterScripts:!1,speakingDisabledLineIndex:-1,storyAudioLoadState:"UNDEFINED",storyListing:void 0,trackingProperties:{}},V=e=>setTimeout(e),Z={carousel:void 0,config:{courses:M.Yb},mostRecentlyUnlockedStory:void 0,newlyPublishedUpdate:void 0,unlockedStories:void 0,unvisitedStories:void 0};var W=n(61948);const z=(0,u.from)({availableModals:[],b2bPricingData:void 0,canShowHomeNotification:!0,drawer:void 0,drawerIsUhmManaged:!1,isDimmedOverlayOpen:!1,isLoggingOut:!1,isModalReallyOpen:!1,isRequestingNotificationPermission:!1,isShopItemsFresh:!1,isUserModelFresh:!1,modal:void 0,modalIsUhmManaged:!1,modalShouldWaitForOverlay:!1,online:!0,persistentNotifications:{dogfooding:!0,dogfoodingPreview:!0,dogfoodingV2:!0,requestNotificationPermission:!0},purchasingItem:!1,scrollToStoriesCarousel:!1,viewportHeight:window.innerHeight,viewportWidth:window.innerWidth});var $=n(59096);const Y=e=>({discountType:e.discountType,expirationTime:e.secondsUntilExpiration>0?(0,f.HR)(e.secondsUntilExpiration):0});var K=n(51158),q=n(18804);const J=(e=>{const t=d.XP(e);return(n=(0,u.from)({}),i)=>t.reduce(((t,o)=>(0,u.set)(t,o,e[o](n[o],i))),n)})({achievements:(e=(0,u.from)({}),t)=>{switch(t.type){case"MARK_ACHIEVEMENT_UNLOCK_SHOWN":{const n=(0,u.asMutable)(e.achievements).map((e=>e.name===t.name?(0,u.set)(e,"shouldShowUnlock",!1):e));e=(0,u.set)(e,"achievements",n);break}case"SET_SESSION_START_ACHIEVEMENTS":e=(0,u.set)(e,"sessionStartAchievements",e.achievements);break;case"UPDATE_USER_ACHIEVEMENTS":{const n=(0,p.GC)(t.achievements);e=(0,u.set)(e,"achievements",n);break}}return e},achievementsV3:(e=(0,u.from)({}),t)=>{switch(t.type){case"MARK_ACHIEVEMENT_UNLOCK_SHOWN_V3":{const n=(0,u.asMutable)(e.achievements).map((e=>e.name===t.achievement.name?(0,u.set)(e,"shouldShowUnlock",!1):e));e=(0,u.set)(e,"achievements",n);break}case"SET_SESSION_START_ACHIEVEMENTS_V3":e=(0,u.set)(e,"sessionStartAchievements",e.achievements);break;case"UPDATE_USER_ACHIEVEMENTS_V3":{const n=(0,p.H2)(t.achievements);e=(0,u.set)(e,"achievements",n);break}}return e},animations:(e=(0,u.from)([]),t)=>{switch(t.type){case"QUEUE_ANIMATION":e=e.concat(t.animation);break;case"QUEUE_ANIMATIONS":e=e.concat(t.animations);break;case"DEQUEUE_ANIMATION":e=e.filter((e=>e.id!==t.id))}return e},brb:(e=m,t)=>{switch(t.type){case"brb/DISABLED":e=(0,u.set)(e,"resetAt",void 0),e=(0,u.set)(e,"status","disabled");break;case"brb/ENABLED":e=(0,u.set)(e,"resetAt",t.resetAt),e=(0,u.set)(e,"status","enabled");break;case"brb/IGNORED":e=(0,u.set)(e,"ignoreUntil",t.ignoreUntil),e=(0,u.set)(e,"resetAt",void 0),e=(0,u.set)(e,"status","disabled")}return e},browserSettings:(e=g,t)=>{switch(t.type){case"DISABLE_LISTEN":e=(0,u.set)(e,"listenDisabledUntil",t.listenDisabledUntil);break;case"DISABLE_REDUCED_MOTION":e=(0,u.set)(e,"prefersReducedMotion",!1);break;case"DISABLE_SPEAK":e=(0,u.set)(e,"speakDisabledUntil",t.speakDisabledUntil);break;case"ENABLE_LISTEN":e=(0,u.set)(e,"listenDisabledUntil",0);break;case"ENABLE_REDUCED_MOTION":e=(0,u.set)(e,"prefersReducedMotion",!0);break;case"ENABLE_SPEAK":e=(0,u.set)(e,"speakDisabledUntil",0);break;case"TOGGLE_COACH":e=(0,u.set)(e,"coachEnabled",!e.coachEnabled);break;case"TOGGLE_COMPLETE_REVERSE_TRANSLATION":e=(0,u.set)(e,"completeReverseTranslationTypingEnabled",!e.completeReverseTranslationTypingEnabled);break;case"TOGGLE_TAP":e=(0,u.set)(e,"typingEnabled",!e.typingEnabled);break;case"SET_TRANSLITERATIONS_SETTINGS":e=(0,u.set)(e,"transliterationsSettings",t.settings)}return e},characters:(e=(0,u.from)(h),t)=>{switch(t.type){case"characters/UPDATE_CHARACTER_CHART":return(0,u.merge)(e,{characterChart:t.characterChart});case"characters/SET_CHARACTER_CHART":return(0,u.merge)(e,{activeAlphabetName:t.activeAlphabetName,characterChart:t.characterChart,fromLanguage:t.fromLanguage,learningLanguage:t.learningLanguage});case"characters/SET_ACTIVE_TAB":return(0,u.merge)(e,{activeAlphabetName:t.activeAlphabetName});case"characters/STAGE_CHART_UPDATE":return(0,u.merge)(e,{changedCharacters:t.changedCharacters,stagedCharacterChart:t.stagedCharacterChart})}return e},config:(e=(0,u.from)(_),t)=>{switch(t.type){case"UPDATE_CONFIG":e=(0,v.gQ)("debugIpCountry")?Object.assign(Object.assign({},t.config),{ipCountry:(0,v.ky)("debugIpCountry")}):t.config}return e},courseHistories:(e=(0,u.from)({}),t)=>{switch(t.type){case"QUIT_SESSION":case"START_SESSION":case"SUBMITTED_SESSION":{const{courseId:n}=t;return(0,u.set)(e,n,I(e[n],t))}case"UPDATE_USER":{const{user:n}=t;return n.courses&&(e=d.Ry(n.courses.map((n=>[n.id,I(e[n.id],t)])))),e}default:return e}},courses:(e=(0,u.from)({}),t)=>{var n;switch(t.type){case"CONSUME_PATH_CHEST_REWARD":{const{courseId:i,levelId:o}=t,s=e[i];if((e=>"path"in e)(s)&&s.path){const{levelIndex:t,unitIndex:r}=null!==(n=(0,k.m8)(s.path,(e=>e.id===o)))&&void 0!==n?n:{};void 0!==t&&void 0!==r&&"active"===s.path[r].levels[t].state&&(e=(0,u.setIn)(e,[i,"path",r,"levels",t,"finishedSessions"],s.path[r].levels[t].totalSessions),e=(0,u.setIn)(e,[i,"path",r,"levels",t,"state"],"passed"),e=(0,u.setIn)(e,[i,"path",r,"levels",t+1,"state"],"active"))}break}case"DISABLE_PLACEMENT_TEST":e=(0,u.setIn)(e,[t.courseId,"placementTestAvailable"],!1);break;case"SUBMITTED_SESSION":t.progressQuizHistory&&(e=(0,u.setIn)(e,[t.courseId,"progressQuizHistory"],t.progressQuizHistory));break;case"UPDATE_CROWNS":e=(0,u.setIn)(e,[t.courseId,"crowns"],t.crowns);break;case"UPDATE_USER":{const{currentCourse:n,courses:i}=t.user;i&&(e=(0,u.from)(d.Ry(i.map((e=>[e.id,e]))))),n&&(e=void 0===n.path||0===n.path.length?(0,u.set)(e,n.id,Object.assign(Object.assign({},n),{path:void 0,skills:C(n.skills)})):(0,u.set)(e,n.id,Object.assign(Object.assign({},n),{skills:C(n.skills)})));break}}return e},debug:(e=(0,u.from)({warnings:[]}),t)=>{switch(t.type){case"debug/ADD_UNIQUE_DEBUG_WARNING":e.warnings.some((e=>e.type===t.warning.type))||(e=(0,u.update)(e,"warnings",(e=>e.concat([t.warning]))));break;case"debug/PAGE_LOAD":e=(0,u.set)(e,"pageLoadTime",t.timestamp)}return e},friends:(e=(0,u.from)({assets:{},drawer:null,feedRedesign:null,recommendationInfo:null}),t)=>{switch(t.type){case"SET_KUDOS_FEED":e=(0,u.set)(e,"feedRedesign",t.feedRedesign);break;case"SET_KUDOS_ASSETS":e=(0,u.set)(e,"assets",t.assets);break;case"SET_KUDOS_DRAWER":e=(0,u.set)(e,"drawer",t.drawer);break;case"SET_FOLLOW_SUGGESTIONS":e=(0,u.set)(e,"recommendationInfo",t.recommendationInfo);break;case"UPDATE_FOLLOW_SUGGESTIONS":{if(null===e.recommendationInfo)break;const n=Object.assign(Object.assign({},e.recommendationInfo),{recommendations:R(e.recommendationInfo.recommendations,t.filteredIds,t.rotatedIds)});e=(0,u.set)(e,"recommendationInfo",n);break}case"DELETE_FOLLOW_SUGGESTION":{if(null===e.recommendationInfo)break;const n=Object.assign(Object.assign({},e.recommendationInfo),{recommendations:e.recommendationInfo.recommendations.filter((e=>e.userId!==t.deletedId))});e=(0,u.set)(e,"recommendationInfo",n);break}}return e},items:(e=(0,u.from)({inventory:{},shop:{bonus_skill:{},in_app_purchase:[],isLoaded:!1,misc:{}}}),t)=>{switch(t.type){case"PURCHASE_ITEM":{if("SUCCESS"!==t.status)break;const{item:n}=t;"streak_freeze"!==n.itemName?e=(0,u.setIn)(e,["inventory",n.itemName],n):t.purchaseQuantity&&(e=(0,u.setIn)(e,["inventory","streak_freeze","quantity"],e.inventory.streak_freeze?e.inventory.streak_freeze.quantity+t.purchaseQuantity:t.purchaseQuantity));break}case"REFRESH_USER_ITEM":{const n=t.item;e=(0,u.set)(e,"inventory",Object.assign(Object.assign({},e.inventory),{[n.itemName]:n}));break}case"SET_SHOP_ITEMS":{const n={bonus_skill:{},in_app_purchase:[],isLoaded:!1,misc:{}};t.items.forEach((e=>{switch(e.type){case"bonus_skill":case"misc":n[e.type][e.id]=e;break;case"in_app_purchase":n[e.type].push(e);break;default:(0,y.RJ)(e)}})),n.isLoaded=!0,e=(0,u.set)(e,"shop",n);break}case"UPDATE_INVENTORY":e=(0,u.set)(e,"inventory",t.inventory)}return e},leaderboards:(e=(0,u.from)({}),t)=>{var n,i,o,s,r;switch(t.type){case"UPDATE_LEADERBOARD":if("leagues"===t.alias){const n=t.leaderboard,i=n.numSessionsRemainingToUnlock,o=e.leagues?e.leagues.numSessionsRemainingToUnlock:void 0;n.numSessionsRemainingToUnlock=void 0===o||void 0===i?i:Math.max(0,Math.min(o,i)),e=(0,u.set)(e,"leagues",n)}break;case"SUBMITTED_SESSION":{void 0!==(null===(n=e.leagues)||void 0===n?void 0:n.numSessionsRemainingToUnlock)&&(e=(0,u.setIn)(e,["leagues","numSessionsRemainingToUnlock"],e.leagues.numSessionsRemainingToUnlock-1));const a=t.responseSession.xpGain,l=e.leagues,c=null===(i=null==l?void 0:l.active)||void 0===i?void 0:i.cohort.rankings.findIndex((e=>e.userId===(0,O.Jb)()));if(l&&c&&c>=0){const t=(0,u.updateIn)(l,["active","cohort","rankings",c,"score"],(e=>e+a)),n=(0,u.asMutable)(null!==(r=null===(s=null===(o=null==t?void 0:t.active)||void 0===o?void 0:o.cohort)||void 0===s?void 0:s.rankings)&&void 0!==r?r:[]).sort(((e,t)=>e.score>t.score?-1:e.score<t.score?1:0));e=(0,u.setIn)(e,["leagues","active","cohort","rankings"],n)}break}}return e},notifications:(e=(0,u.from)({}),t)=>{switch(t.type){case"MARK_NOTIFICATIONS_READ":e=d.Xc(e,(e=>Object.assign(Object.assign({},e),{unseen:!1})));break;case"SET_NOTIFICATIONS":e=t.notifications;break;case"UPDATE_FOLLOW_NOTIFICATION":e=d.Xc(e,(e=>e.id===t.notificationId?Object.assign(Object.assign({},e),{is_following:t.isFollowing}):e))}return e},paymentMethods:(e=(0,u.from)([]),t)=>{switch(t.type){case"REFRESH_USER_PAYMENT_METHODS":e=t.paymentMethods}return e},player:(e=D,t)=>{var n,i,o,s;switch(e=((e,t)=>{switch(t.type){case"LOAD_SMART_TIP_RESOURCE":return(0,u.setIn)(e,["smartTipResources",t.smartTipId],t.smartTipResource);case"SET_SMART_TIP_TO_SHOW":return e=(0,u.set)(e,"shownSmartTipIds",[t.smartTipResource.identifier,...e.shownSmartTipIds]),(0,u.set)(e,"smartTipToShow",t.smartTipResource);case"UPDATE_GRADED_SMART_TIP":return e=(0,u.set)(e,"status",N.cS.SmartTipBlaming),(0,u.setIn)(e,["smartTipToShow","gradingResult"],{correct:t.correct});default:return e}})(e,t),t.type){case"PLAYER_RESET":e=D;break;case"RECEIVE_GIFT":e=(0,u.setIn)(e,["receivedGifts",t.gift],!0);break;case"CLEAR_IN_LESSON_TIP":return(0,u.merge)(e,{inLessonTip:void 0,inLessonTipShowing:!1});case"CREATE_SESSION":{const{levelData:i,session:o,sessionParams:s}=t,r=o.challenges[e.currentIndex],a=(0,L.BY)({challenge:r}),l=!s.isFinalLevel&&o.beginner?4:3,c=o.type,d=null!==(n=(()=>{switch(s.type){case T.FF.Checkpoint:return N.cS.CheckpointSplash;case T.FF.CheckpointTest:return N.cS.CheckpointTestSplash;case T.FF.Lesson:return s.isFinalLevel?N.cS.FinalLevelDuo:s.showGrammarSkillSplash?N.cS.GrammarSkillSplash:void 0;case T.FF.Legendary:return N.cS.LegendaryDuo;case T.FF.LevelReview:return N.cS.CapstoneReviewSplash;case T.FF.MistakesReview:return N.cS.MistakesReviewDuo;case T.FF.PlacementTest:return N.cS.PlacementSplash;case T.FF.SkillTest:return N.cS.SkillTestSplash;case T.FF.UnitReview:return N.cS.UnitReviewSplash;case T.FF.UnitTest:return N.cS.UnitTestSplash;default:return}})())&&void 0!==n?n:(0,N.ct)(r,a),p=s.isFinalLevel||(0,N.LJ)(c)&&!(0,N.l$)(c);e=(0,u.merge)(e,{challengeIdSections:(0,N.oT)(o.challenges,s.isFinalLevel?2:1),challengeStates:[a],levelData:i,maxHearts:l,session:Object.assign(Object.assign({},o),{heartsLeft:p?l:0}),sessionParams:s,status:d,useHearts:p});break}case"ADD_CHALLENGE":{e=(0,u.updateIn)(e,["session","challenges"],(e=>[...e,t.challenge]));const n=(0,u.asMutable)(e.challengeIdSections,{deep:!0});n[n.length-1].push(t.challenge.id),e=(0,u.set)(e,"challengeIdSections",n);break}case"CHALLENGE_GUESS_CHANGE":e=e.status===N.cS.SmartTip?(0,u.setIn)(e,["smartTipToShow","guess"],t.value):(0,u.setIn)(e,["challengeStates",e.currentIndex,"guess"],t.value);break;case"CHALLENGE_HAS_BROKEN_TTS":e=(0,u.setIn)(e,["challengeStates",e.currentIndex,"hasBrokenTts"],!0);break;case"CHALLENGE_STARTED":e=e.status===N.cS.SmartTip?(0,u.setIn)(e,["smartTipToShow","startTime"],t.timestamp):(0,u.setIn)(e,["session","challenges",e.currentIndex,"startTime"],t.timestamp);break;case"CHALLENGE_WORLD_CHARACTER_SHOWN":e=(0,u.setIn)(e,["session","challenges",e.currentIndex,"worldCharacterShown"],t.wasShown);break;case"COACH_DUO_SHOWN":e=(0,u.updateIn)(e,["coachDuo","allCharacters"],(e=>[...e,t.model.template.character])),e=(0,u.updateIn)(e,["coachDuo","allShowReasons"],(e=>[...e,t.model.showReason]));break;case"CONTINUE_CURRENT_CHALLENGE":{const t=e.session.challenges[e.currentIndex],n=e.challengeStates[e.currentIndex],i=(0,L.uu)({challenge:t,challengeState:n});e=(0,u.setIn)(e,["challengeStates",e.currentIndex],i),e=(0,u.set)(e,"status",(0,L.j4)({challenge:t,challengeState:i})?N.cS.Guessing:N.cS.Showing);break}case"REPLACE_WITH_ADAPTIVE_CHALLENGES":{const n=(0,u.asMutable)(e.challengeIdSections,{deep:!0}),i=(0,u.asMutable)(e.session.challenges);let o=0,s=0;i.forEach(((r,a)=>{const l=a-e.currentIndex-1;if(l>=0&&l<t.challenges.length){const r=t.challenges[a-e.currentIndex-1];i[a]=r,n[o][s]=r.id}s<e.challengeIdSections[o].length?s++:(o++,s=0)})),e=(0,u.setIn)(e,["session","challenges"],i),e=(0,u.set)(e,"challengeIdSections",n);break}case"ADVANCE_SESSION":{const t=e.currentIndex+1;e=(0,u.setIn)(e,["challengeStates",t],(0,L.BY)({challenge:e.session.challenges[t]})),e=(0,u.setIn)(e,["coachDuo","model"],void 0),e=(0,u.set)(e,"currentIndex",t),e=(0,u.set)(e,"smartTipToShow",void 0),e=(0,u.set)(e,"status",N.cS.Sliding);break}case"DISABLE_LISTEN":case"DISABLE_SPEAK":{if(void 0===e.session)return e;const n="DISABLE_LISTEN"===t.type?(0,N.tq)():(0,N.bc)();e.session.adaptiveChallenges&&(e=(0,u.setIn)(e,["session","adaptiveChallenges"],e.session.adaptiveChallenges.filter((e=>!n.includes(e.type)))));const i=[],o=[],s=[];(0,N.L1)(e,(({challenge:t,challengeIndex:r,sectionIndex:a})=>{var l,c;const u=null===(l=e.session.adaptiveInterleavedChallenges)||void 0===l?void 0:l.speakOrListenReplacementIndices,d=u?u[r]:null;if((r<=e.currentIndex||!n.includes(t.type))&&(i.push(t),o[a]=o[a]||[],o[a].push(t.id),s.push(null!=d?d:null)),r>=e.currentIndex&&null!==d&&n.includes(t.type)){const t=null===(c=e.session.adaptiveInterleavedChallenges)||void 0===c?void 0:c.challenges,n=null==t?void 0:t[d];n&&(i.push(n),o[a]=o[a]||[],o[a].push(n.id),s.push(d))}return!1})),e=(0,u.setIn)(e,["session","challenges"],i),(e=(0,u.set)(e,"challengeIdSections",o)).session.adaptiveInterleavedChallenges&&(e=(0,u.setIn)(e,["session","adaptiveInterleavedChallenges","speakOrListenReplacementIndices"],s));break}case"ENABLE_BONUS_POINTS":e=(0,u.set)(e,"enableBonusPoints",!0);break;case"START_SESSION_SUBMIT":e=(0,u.set)(e,"sessionSubmitting",!0);break;case"END_SESSION_SUBMIT":e=(0,u.set)(e,"sessionSubmitting",!1);break;case"END_SESSION":{const{enableBonusPoints:n,endedEarly:i,maxInLessonStreak:o,progressScore:s,session:{heartsLeft:r},sessionParams:{isFinalLevel:a}}=e,l=e.useHearts&&r<(a?1:0),c=!i&&!l;e=(0,u.set)(e,"completedWithHeartsRemaining",c);const d={enableBonusPoints:n,endTime:t.timestamp,failed:!e.partialXpGiven&&l,maxInLessonStreak:o,progressScore:s,shouldLearnThings:!a||c,xpPromised:(0,A.xc)(e)};e=(0,P.$f)(e,["session"],d);break}case"END_SESSION_EARLY":e=(0,u.set)(e,"endedEarly",!0);break;case"END_SESSION_FAILED":e=(0,u.set)(e,"sessionSubmitError",t.error);break;case"END_SESSION_SUCCESS":e=(0,u.set)(e,"hasNativeAd",t.hasNativeAd),e=(0,u.set)(e,"sessionSubmitted",!0),e=(0,u.set)(e,"slideData",t.slideData);break;case"LOAD_HINTS":e=(0,u.setIn)(e,["hints",t.challenge.id],t.hints);break;case"LOAD_IN_LESSON_TIP_RESOURCE":return(0,u.setIn)(e,["inLessonTipResources",t.url],t.explanationResource);case"SET_ADAPTIVE_SCORES":e=(0,u.merge)(e,{confidence:t.confidence,progressScore:t.progressScore,status:N.cS.Blaming});break;case"SET_COACH_DUO_MODEL":e=(0,u.setIn)(e,["coachDuo","model"],t.model);break;case"SET_IN_LESSON_TIP":return(0,u.set)(e,"inLessonTip",t.explanationResource);case"SET_PARTIAL_XP_GIVEN":e=(0,u.set)(e,"partialXpGiven",t.xpGiven);break;case"SET_PLAYER_STATUS":e=(0,u.set)(e,"status",t.status);break;case"SET_PRIOR_PROFICIENCY":e=(0,u.setIn)(e,["session","priorProficiency"],t.priorProficiency);break;case"SHOW_HINT":{const n=e.challengeStates[e.currentIndex].hintsShown;e=(0,u.setIn)(e,["challengeStates",e.currentIndex,"hintsShown"],void 0===n?[t.token]:[...n,t.token]);break}case"SPEECH_RECOGNIZER_FAILED":e=(0,u.setIn)(e,["challengeStates",e.currentIndex,"recognizerFailed"],!0);break;case"START_SESSION":{const{startTime:n}=t,{challengeStates:i,currentIndex:o,session:{challenges:s},coachDuo:r}=e,a=s[o];e=(0,u.merge)(e,{session:{startTime:n},status:void 0===r.model?(0,N.ct)(a,i[o]):N.cS.CoachDuo},{deep:!0});break}case"SUBMITTED_SESSION":e=(0,P.FL)(e,["session"],t.responseSession);break;case"TOGGLE_IN_LESSON_TIP":return(0,u.merge)(e,{inLessonTipShowing:t.shouldShow,numInLessonTipOpens:e.numInLessonTipOpens+(t.shouldShow?1:0)});case"UPDATE_GRADED_CHALLENGE":{e.status!==N.cS.Grading||(0,N.l$)(e.session.type)||e.session.type===T.FF.Checkpoint||(e=t.challenge.type===T.Sm.Speak&&(null!==(o=null===(i=t.challenge.gradingResult)||void 0===i?void 0:i.numRetriesLeft)&&void 0!==o?o:0)>0?(0,u.set)(e,"status",N.cS.SpeakRetryBlaming):(0,u.set)(e,"status",N.cS.Blaming)),e=(0,P.FL)(e,["session","challenges",e.currentIndex],t.challenge);const n=null===(s=t.challenge.gradingResult)||void 0===s?void 0:s.correct,r=t.challenge.skipped,a=()=>{r||(n?(e=(0,u.setIn)(e,["coachDuo","currentCorrectStreak"],e.coachDuo.currentCorrectStreak+1),e=(0,u.setIn)(e,["coachDuo","currentIncorrectStreak"],0)):(e=(0,u.setIn)(e,["coachDuo","currentCorrectStreak"],0),e=(0,u.setIn)(e,["coachDuo","currentIncorrectStreak"],e.coachDuo.currentIncorrectStreak+1)))};if(e.useHearts&&!n&&(e=(0,u.setIn)(e,["session","heartsLeft"],e.session.heartsLeft-1)),e.session.type===T.FF.PlacementTest||e.session.type===T.FF.UnitTest||e.session.type===T.FF.CheckpointTest||e.status===N.cS.SpeakRetryBlaming)a();else if(e.session.type!==T.FF.Checkpoint&&!(0,N.LJ)(e.session.type)){const t=e.session.challenges[e.currentIndex],i=e.challengeStates[e.currentIndex],[o,s]=(0,N.Dk)(e);if(void 0===o||void 0===s)throw Error("Could not find current challenge in challengeIdSections; this is a bug.");if(!n&&!i.hasBrokenTts){const n=e.challengeIdSections[o].length,{challengeIndex:i}=(0,N.L1)(e,(({sectionChallengeIndex:e,sectionIndex:t})=>t===o&&e===n-1));if(void 0===i)throw Error("This should never happen.");const s=(0,u.asMutable)(e.session.challenges,{deep:!0});s.splice(i+1,0,d.CE((0,P.Xh)(t),"gradingResult","skipped")),e=(0,u.setIn)(e,["session","challenges"],s);const r=(0,u.asMutable)(e.challengeIdSections,{deep:!0});r[o].push(t.id),e=(0,u.set)(e,"challengeIdSections",r)}const l=e.challengeIdSections.length,c=e.challengeIdSections[o].length,p=o+(s===c-1?1:0);let m=e.strength;const g=(o+1)/l-m,h=c-s,_=r&&n?0:(n?1:-.5)*g/h;m=Math.max(p/l,e.strength+_),m>.97&&(m=1),e=(0,u.set)(e,"strength",m),a();const v=r?0:1;e=(0,u.set)(e,"currentInLessonStreak",n?e.currentInLessonStreak+v:0),e=(0,u.set)(e,"maxInLessonStreak",Math.max(e.currentInLessonStreak,e.maxInLessonStreak))}break}}return e},profile:(e=(0,u.from)({}),t)=>{var n;switch(t.type){case"RESET_PROFILE":e={};break;case"LOAD_ACHIEVEMENTS":{const{v2:n,v3:i}=t.achievements;e=(0,u.set)(e,"achievements",{v2:(0,p.GC)(n),v3:(0,p.H2)(i)});break}case"LOAD_PROFILE_USER":e=(0,u.set)(e,"user",t.user);break;case"LOAD_PROFILE_XP":e=(0,u.set)(e,"xpEvents",t.summaries);break;case"LOAD_PROFILE_FOLLOWERS":e=(0,u.set)(e,"followers",t.followersData);break;case"LOAD_PROFILE_FOLLOWING":e=(0,u.set)(e,"following",t.followingData);break;case"LOAD_SOCIAL_PROFILE":e=(0,u.set)(e,"socialProfile",t.socialProfile);break;case"UPDATE_USER":try{if((0,O.Jb)()===(null===(n=e.user)||void 0===n?void 0:n.id)){const n=(0,u.merge)(e.user,t.user,{deep:!0});e=(0,u.set)(e,"user",n)}}catch(e){}}return e},referralStats:(e=(0,u.from)({inviteBannerDismissals:0,inviteBannerLastShown:0,lessonsCompleted:0}),t)=>{switch(t.type){case"DISMISS_PERSISTENT_NOTIFICATION":"INVITE_FRIENDS"===t.notificationType&&(e=(0,u.set)(e,"inviteBannerDismissals",e.inviteBannerDismissals+1),e=(0,u.set)(e,"inviteBannerLastShown",t.timestamp));break;case"INCREMENT_LESSONS_COMPLETED_COUNT":e=(0,u.set)(e,"lessonsCompleted",e.lessonsCompleted+1);break;case"RESET_INVITE_BANNER_DISMISSALS":e=(0,u.set)(e,"inviteBannerDismissals",0),e=(0,u.set)(e,"inviteBannerLastShown",t.timestamp)}return e},sessionEnd:(e=(0,u.from)({slides:[]}),t)=>{var n,i,o;const s=e.slides.length-1;switch(t.type){case"sessionEnd/CTA_CLICK":s>-1&&(e=(0,u.setIn)(e,["slides",s,"action"],"cta"));break;case"sessionEnd/DISMISSED":s>-1&&(e=(0,u.setIn)(e,["slides",s,"action"],null!==(n=e.slides[s].action)&&void 0!==n?n:"dismiss"));break;case"sessionEnd/READY":e.nativeAd&&(e=(0,u.setIn)(e,["nativeAd","status"],"can-track")),e.nativeAd&&(e=(0,u.set)(e,"nativeAd",x(e.nativeAd,t.timestamp))),s>-1&&(e=(0,u.setIn)(e,["slides",s,"status"],"can-track"),e=(0,u.setIn)(e,["slides",s],x(e.slides[s],t.timestamp)));break;case"sessionEnd/RESET":e=(0,u.set)(e,"nativeAd",void 0),e=(0,u.set)(e,"slides",[]);break;case"sessionEnd/SLIDE_HIDDEN":"native-ad"===t.slide&&e.nativeAd&&(e=(0,u.set)(e,"nativeAd",x(e.nativeAd,t.timestamp)));break;case"sessionEnd/SLIDE_SHOWN":"native-ad"===t.slide?e=(0,u.set)(e,"nativeAd",{slide:"native-ad",status:"pending",time:[...null!==(o=null===(i=e.nativeAd)||void 0===i?void 0:i.time)&&void 0!==o?o:[],[t.timestamp]]}):(s>-1&&(e=(0,u.setIn)(e,["slides",s,"status"],"can-track"),e=(0,u.setIn)(e,["slides",s],x(e.slides[s],t.timestamp))),e=(0,u.set)(e,"slides",[...e.slides,{slide:t.slide,status:"pending",time:[[t.timestamp]]}]));break;case"sessionEnd/TRACKED":e.nativeAd&&t.slides.includes("native-ad")&&(e=(0,u.setIn)(e,["nativeAd","status"],"tracked")),e.slides.forEach(((n,i)=>{t.slides.includes(n.slide)&&(e=(0,u.setIn)(e,["slides",i,"status"],"tracked"))}))}return e},skills:(e=(0,u.from)({}),t)=>{switch(t.type){case"PURCHASE_ITEM":"SUCCESS"===t.status&&t.bonusSkillId&&(e=(0,P.$f)(e,[t.bonusSkillId],{accessible:!0,finishedLessons:0}));break;case"UPDATE_SKILL":{const n=t.skill;n.urlName=encodeURIComponent(n.urlName),e=(0,P.FL)(e,[n.id],n);break}case"UPDATE_USER":{const{currentCourse:n}=t.user;if(n){const{fromLanguage:t,learningLanguage:i,skills:o}=n,s=o;e=d.Ry(s.map(((e,n)=>e.map((e=>[e.id,Object.assign(Object.assign({accessible:!1,decayed:!1,finishedLessons:0,finishedLevels:0,indicatingNewContent:!1,levels:0,strength:0},e),{fromLanguage:t,learningLanguage:i,row:n,urlName:encodeURIComponent(e.urlName)})])))).flat())}break}}return e},stories:(e=(0,u.from)(G),t)=>{var n,i,o,s,r,a,l,c,p,m,g,h,_,v,f,y,E,b,S,w,T,I,k,C,R,O,N,L,P,A,D,x,Z,W,z,$,Y,K,q,J,X,Q;switch(t.type){case"stories/SET_STORY_LISTING":return(0,u.merge)(e,{fromLanguage:t.fromLanguage,learningLanguage:t.learningLanguage,storyListing:t.storyListing});case"stories/UNLOAD_STORY":return e.audio&&"PLAY"===e.audio.playState&&(e=(0,u.merge)(e,{audio:(0,U.EU)({playState:"PAUSE"})(e.audio)})),e.storyElements&&(0,U.FG)(e.storyElements),(0,u.merge)(e,{audioPrefetchState:void 0,pendingAudio:void 0,showMasterScripts:t.showMasterVersions,storyAudioLoadState:"UNDEFINED",storyElements:void 0,storyId:void 0,storyListing:{sets:[]},storyRevision:void 0,storySession:void 0,trackingProperties:void 0});case"stories/SELECT_STORY":return(0,u.merge)(e,{masterVersion:t.masterVersion,storyId:t.storyId,storySession:void 0});case"stories/SET_STORY":return(0,u.merge)(e,{audioPrefetchState:t.audioPrefetchState,cefrLevel:t.cefrLevel,conversationModeListenCharacterIds:t.conversationModeListenCharacterIds,conversationModeSpeakCharacterIds:t.conversationModeSpeakCharacterIds,conversationModeSpeakLineIds:t.conversationModeSpeakLineIds,fallbackElements:t.fallbackElements,fromLanguage:t.storyFromLanguage,illustrations:t.illustrations,learningLanguage:t.storyLanguage,listenModeCharacterIds:t.listenModeCharacterIds,loadTime:t.startTime,mode:t.mode,multiPartInfo:t.multiPartInfo,pathLevelMetadata:t.pathLevelMetadata,showPromptsInTargetLanguage:t.showPromptsInTargetLanguage,speakingDisabledLineIndex:t.speakingDisabledLineIndex,storyAudioLoadState:"LOADING",storyElements:t.storyElements,storyFromLanguageName:t.fromLanguageName,storyId:t.storyId,storyListing:void 0,storyRevision:t.storyRevision,storySession:void 0,trackingConstants:t.trackingConstants,trackingProperties:t.trackingProperties});case"stories/AUDIO_FOR_ELEMENT_PREFETCHED":return e.audioPrefetchState?(0,u.merge)(e,{audioPrefetchState:(0,u.merge)(e.audioPrefetchState,{[t.elementIndex]:!0})}):e;case"stories/UPDATE_STORY_AUDIO_FILE_LOAD_STATE":return(e=(0,u.merge)(e,{storyAudioLoadState:t.state})).pendingAudio&&(e=(0,u.merge)(e,{audio:e.pendingAudio,pendingAudio:void 0})),e;case"stories/START_STORY":{const s={elementIndex:(0,M.HD)(e),textIndex:0},r={completed:!1,furthestPosition:s,grammarCorrectionRequestStatus:"not-done",hintPosition:void 0,hintsUsed:[],maxScore:0,onboardingStep:void 0,score:0,selectedPosition:s,speakCount:0,startTime:null!==(n=e.loadTime)&&void 0!==n?n:Date.now(),status:"in-progress",storyCompleteRequestStatus:"ok",timeline:[{time:t.time/1e3,type:"line-start"}]},a=null===(i=(e=(0,u.merge)(e,{storySession:r})).storyElements)||void 0===i?void 0:i[s.elementIndex],l=a&&(0,M.z_)(a);if(void 0===l)throw Error("Unexpected type for first element");const c=null!==(o=l.audioPrefix)&&void 0!==o?o:l.audio,d=(0,U.EU)({audioSyncModel:c,playState:"PLAY"})(e.audio),p="LOAD_SUCCESS"===e.storyAudioLoadState;return e=(0,u.merge)(e,{audio:p?d:e.audio,pendingAudio:p?void 0:d})}case"stories/AUTO_ADVANCE_STORY_POSITION":{const n=e.storySession,i=e.storyElements,o=null==i?void 0:i[t.position.elementIndex];if("HINT_ONBOARDING"===(null==o?void 0:o.type)&&0===(null==n?void 0:n.hintsUsed.length)&&(e=(0,u.merge)(e,{storySession:(0,u.merge)(n,{onboardingStep:"newUser"===o.onboardingType?"tap-translation-hint":void 0})})),(!(null==n?void 0:n.selectedPosition)||t.position.elementIndex>n.selectedPosition.elementIndex)&&o&&(0,M.P3)(o)){if(void 0===e.fromLanguage||void 0===e.learningLanguage)throw Error("From- or learning language cannot be undefined during story.");const n=(0,F.FE)(o,t.position.elementIndex,null!==(r=null===(s=e.storySession)||void 0===s?void 0:s.hintsUsed)&&void 0!==r?r:[],t.showLengthReducedMatchChallenge,e.fromLanguage,e.learningLanguage);e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:n})}),n&&(V((()=>(0,F.M6)(e,n))),e=(0,F.v5)(e))}return(0,B.DG)(e,t.position)}case"stories/AUDIO_STOPPED":return(0,u.merge)(e,{audio:Object.assign(Object.assign({},e.audio),{playState:"PAUSE"})});case"stories/SHOW_TRANSCRIPT_HINT":{const n=null===(a=e.storyElements)||void 0===a?void 0:a[t.position.elementIndex];return V((()=>(0,H.j)("LINE"===(null==n?void 0:n.type)?"stories_story_translation_hint":"stories_challenge_translation_hint",Object.assign(Object.assign(Object.assign({},e.trackingProperties),null==n?void 0:n.trackingProperties),{phrase:t.hint})))),(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{hintPosition:t.position,hintShownTime:t.time,hintText:t.hint,hintsUsed:[...null!==(c=null===(l=e.storySession)||void 0===l?void 0:l.hintsUsed)&&void 0!==c?c:[],{phrase:t.text,translation:t.hint}]})})}case"stories/DISMISS_HINT":{const n=e.storySession,i=200;return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{hintPosition:void 0,hintText:void 0,hintsUsed:(null==n?void 0:n.hintShownTime)&&t.time-n.hintShownTime<i?n.hintsUsed.slice(n.hintsUsed.length-1):null==n?void 0:n.hintsUsed})})}case"stories/REPLAY_LINE_AUDIO":{const n=e.storySession,i=e.storyElements,o=i&&i[(0,B.lo)(i,t.elementIndex,!0)];if(!o||!["LINE","HEADER","FREEFORM_WRITING_EXAMPLE_RESPONSE","FREEFORM_WRITING"].includes(o.type))throw Error("Tried to replay an element of type other than line, header, or example response");if(!(null==n?void 0:n.furthestPosition)||!i)throw Error("No story session found when replaying audio");let s=1;t.elementIndex===(null==n?void 0:n.previousReplayElementIndex)&&(s=.6);const r=(()=>{var s,r;switch(o.type){case"LINE":return o.line.content.audioPrefix&&i&&(0,B.O$)(i,(null==n?void 0:n.furthestPosition.elementIndex)||0)===t.elementIndex+1&&!(null===(r=null===(s=e.storySession)||void 0===s?void 0:s.challengeSession)||void 0===r?void 0:r.completed)?o.line.content.audioPrefix:o.line.content.audio;case"HEADER":return o.learningLanguageTitleContent.audio;case"FREEFORM_WRITING_EXAMPLE_RESPONSE":return(0,M.Au)(o);case"FREEFORM_WRITING":if(!n.freeformChallengeSubmittedResponseTtsUrl||!n.freeformChallengeSubmittedResponseWithHints)throw Error("No TTS or hints for user's response!");return(0,M.Au)({content:n.freeformChallengeSubmittedResponseWithHints,ttsURL:n.freeformChallengeSubmittedResponseTtsUrl})}throw Error(`No audio for "${o.type}" element`)})();return V((()=>(0,H.j)("stories_audio_replay",Object.assign(Object.assign(Object.assign({},e.trackingProperties),o.trackingProperties),{first_replay:t.elementIndex!==n.previousReplayElementIndex,furthest_line:(0,B.D5)(n.furthestPosition.elementIndex,i)})))),(0,u.merge)(e,{audio:(0,U.EU)({audioSyncModel:r,playState:"PLAY",speed:s})(e.audio),storySession:(0,u.merge)(n,{previousReplayElementIndex:t.elementIndex,selectedPosition:{elementIndex:t.elementIndex,textIndex:void 0}})})}case"stories/ADVANCE_STORY_POSITION":{e=(0,u.merge)(e,{audio:(0,u.merge)(e.audio,{playError:!1})}),e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{hintPosition:void 0})});const n=(e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{timeline:[...null!==(m=null===(p=e.storySession)||void 0===p?void 0:p.timeline)&&void 0!==m?m:[],{time:t.time/1e3,type:"line-start"}]})})).storyElements;if(!n)throw Error("No story element list found");const i=null===(g=e.storySession)||void 0===g?void 0:g.furthestPosition.elementIndex,o=t.position.elementIndex,s=n[o],r=n[(0,B.lo)(n,o,void 0!==(null===(h=e.storySession)||void 0===h?void 0:h.freeformChallengeSubmittedResponseTtsUrl))];(!i||o>i)&&(e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:void 0})}));const a="LINE"===s.type&&e.storyElements&&"CONVERSATION"===e.mode&&-1===e.speakingDisabledLineIndex&&"SPEAK"===(0,j.gu)({conversationModeSpeakCharacterIds:null!==(_=e.conversationModeSpeakCharacterIds)&&void 0!==_?_:[],conversationModeSpeakLineIds:null!==(v=e.conversationModeSpeakLineIds)&&void 0!==v?v:[],line:s.line,lineIndex:(0,M.IG)(s),listenModeCharacterIds:[],mode:e.mode,nextElement:n[o+1]});if(s&&(0,M.P3)(s)||a){if(void 0===e.fromLanguage||void 0===e.learningLanguage)throw Error("From- or learning language cannot be undefined during story.");const n=(0,F.FE)(s,o,null!==(y=null===(f=e.storySession)||void 0===f?void 0:f.hintsUsed)&&void 0!==y?y:[],t.showLengthReducedMatchChallenge,e.fromLanguage,e.learningLanguage);e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:n})}),n&&(V((()=>(0,F.M6)(e,n))),e=(0,F.v5)(e))}const l="LINE"===(null==s?void 0:s.type)?t.position:Object.assign(Object.assign({},t.position),{textIndex:"LINE"===(null==r?void 0:r.type)?r.line.content.text.length-1:0});e=(0,B.DG)(e,l);const c=n[l.elementIndex],d=(0,M.z_)(c);if(d){const n=null!==(E=d.audioPrefix)&&void 0!==E?E:d.audio;e=(0,u.set)(e,"audio",(0,U.EU)({audioSyncModel:n,playState:"PLAY",seekTo:(0,B.SU)(n,null!==(b=l.textIndex)&&void 0!==b?b:0),speed:t.playbackRate})(e.audio))}return e}case"stories/SELECT_MULTIPLE_CHOICE":{let n;if(!e.storySession)throw Error("No story session found");const i=e.storySession.furthestPosition,o=e.storySession.challengeSession;if("multiple-choice"!==(null==o?void 0:o.type))throw Error("Unexpected challenge type");const s=(0,u.set)(e.storySession,"challengeSession",(o=>{var s;const r=[...o.selectedIndices,t.index],a=r.includes(o.correctAnswerIndex),l=null===(s=e.storyElements)||void 0===s?void 0:s[i.elementIndex-1];a&&"LINE"===(null==l?void 0:l.type)&&l.line.content.audioSuffix&&(n=(0,U.EU)({audioSyncModel:l.line.content.audioSuffix,playState:"PLAY"}));const c={mistakeCount:t.index===o.correctAnswerIndex?o.mistakeCount:o.mistakeCount+1,selectedIndices:r};return(0,u.merge)(o,c)})(o));e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,s)}),n&&(e=(0,u.set)(e,"audio",n(e.audio))),t.index===o.correctAnswerIndex&&(e=(0,F.Q5)(e),V((()=>(0,F.S5)(e))));const r=null===(S=e.storySession)||void 0===S?void 0:S.challengeSession;return V((()=>(0,H.j)("stories_select_multiple_choice",Object.assign(Object.assign(Object.assign({},e.trackingProperties),o.trackingProperties),{select_method:t.selectMethod,success:!!r&&0===r.mistakeCount})))),e}case"stories/SELECT_PHRASE":{if("select-phrases"!==(null===(T=null===(w=e.storySession)||void 0===w?void 0:w.challengeSession)||void 0===T?void 0:T.type))throw Error("Unexpected type");const n=null===(I=e.storySession)||void 0===I?void 0:I.challengeSession,i=t.optionIndex===n.correctAnswerIndex?0:1;e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(e.storySession.challengeSession,{mistakeCount:e.storySession.challengeSession.mistakeCount+i,selectedIndices:[...e.storySession.challengeSession.selectedIndices,t.optionIndex]})})}),t.optionIndex===n.correctAnswerIndex&&(e=(0,F.Q5)(e),V((()=>(0,F.S5)(e))));const o=null===(k=e.storySession)||void 0===k?void 0:k.challengeSession;return V((()=>(0,H.j)("stories_select_multiple_choice",Object.assign(Object.assign(Object.assign({},e.trackingProperties),n.trackingProperties),{select_method:t.selectMethod,success:!!o&&0===o.mistakeCount})))),e}case"stories/SELECT_MATCH_TOKEN":{if("match"!==(null===(R=null===(C=e.storySession)||void 0===C?void 0:C.challengeSession)||void 0===R?void 0:R.type))throw Error("Challenge type is incorrect. It should be 'match'.");const n=e.storySession.challengeSession,i=d.cx(n.tokens,{status:"selected"}),o=n.tokens[i],s=n.tokens[t.index];if(t.index===i)e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{tokens:n.tokens.map(((e,n)=>n===t.index?(0,u.set)(e,"status","initial"):e))})})});else if(o&&o.language!==s.language){const r=n.dictionary[`from:${o.text}`],a=s.text===r?"correct":"incorrect",l=n.tokens.map(((e,n)=>n===t.index||n===i?(0,u.set)(e,"status",a):e)),c="correct"===a&&l.every((e=>"correct"===e.status));e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{mistakeCount:n.mistakeCount+("incorrect"===a?1:0),tokens:l})})}),c&&(e=(0,F.Q5)(e),V((()=>(0,F.S5)(e))))}else e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{tokens:n.tokens.map(((e,n)=>n===t.index?(0,u.set)(e,"status","selected"):n===i||"incorrect"===e.status?(0,u.set)(e,"status","initial"):e))})})});return e}case"stories/SELECT_ARRANGE_PHRASE":{const n=null===(O=e.storySession)||void 0===O?void 0:O.challengeSession;if("arrange"!==(null==n?void 0:n.type))throw Error("Unexpected type");const i=null===(N=e.storySession)||void 0===N?void 0:N.furthestPosition,o=i?null===(L=e.storyElements)||void 0===L?void 0:L[i.elementIndex]:void 0;if("ARRANGE"!==(null==o?void 0:o.type))throw Error("Unexpected challenge type");if(o.selectablePhrases[t.index]===o.selectablePhrases[o.phraseOrder[n.arrangedPhrases]]){const i=[...n.phraseOrder];t.index!==o.phraseOrder[n.arrangedPhrases]&&(i[n.arrangedPhrases]=t.index,i[i.indexOf(t.index)]=o.phraseOrder[n.arrangedPhrases]);const s=n.arrangedPhrases+1;return e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{arrangedPhrases:s,phraseOrder:i,selectedIncorrectIndices:[]})})}),s>=o.selectablePhrases.length&&(e=(0,F.Q5)(e),V((()=>(0,F.S5)(e)))),e}return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{mistakeCount:n.selectedIncorrectIndices.includes(t.index)?n.mistakeCount:n.mistakeCount+1,selectedIncorrectIndices:[...n.selectedIncorrectIndices.filter((e=>e!==t.index)),t.index]})})})}case"stories/SET_STORY_COMPLETE_REQUEST_STATUS":return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{storyCompleteRequestStatus:t.status})});case"stories/SET_GRAMMAR_CORRECTION_REQUEST_STATUS":return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{grammarCorrectionRequestStatus:t.status,grammarCorrectionTimeTaken:t.timeTaken})});case"stories/COMPLETE_STORY":return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:void 0,nextMode:(0,u.from)(t.nextMode),onboardingStep:void 0,pendingStoryEndSections:(0,u.from)(t.storyEndSections),status:"story-end",storyCompleteRequestStatus:"ok",visibleStoryEndSections:(0,u.from)([])})});case"stories/SHOW_NEXT_STORY_END_SECTION":{if(!e.storySession||!e.storySession.furthestPosition)return e;if((0,B.DG)(e,e.storySession.furthestPosition),!e.storySession.pendingStoryEndSections||0===e.storySession.pendingStoryEndSections.length)return e;const t=e.storySession.pendingStoryEndSections[0],n=e.storySession.pendingStoryEndSections.slice(1);return V((()=>{var n,i,o,s,r,a;(null===(i=null===(n=e.storySession)||void 0===n?void 0:n.pendingStoryEndSections)||void 0===i?void 0:i.length)&&(0,H.j)("stories_show_end_section",{end_section_position:null!==(s=null===(o=e.storySession.visibleStoryEndSections)||void 0===o?void 0:o.length)&&void 0!==s?s:0,end_section_type:t.type,total_end_sections:(null!==(a=null===(r=e.storySession.visibleStoryEndSections)||void 0===r?void 0:r.length)&&void 0!==a?a:0)+e.storySession.pendingStoryEndSections.length})})),(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{pendingStoryEndSections:n,status:0===n.length?"completed":"story-end",visibleStoryEndSections:[...null!==(P=e.storySession.visibleStoryEndSections)&&void 0!==P?P:[],t]})})}case"stories/SET_EDITING_TEXT":return(null===(A=e.storySession)||void 0===A?void 0:A.challengeSession)?(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(e.storySession.challengeSession,{answer:t.text})})}):e;case"stories/SET_CORRECTED_TEXT":return"freeform-writing"!==(null===(x=null===(D=e.storySession)||void 0===D?void 0:D.challengeSession)||void 0===x?void 0:x.type)?e:(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(e.storySession.challengeSession,{answer:t.correctedText,fetchedCorrection:t.correctedText}),freeformChallengeCorrectedResponse:t.correctedText,freeformChallengeCorrectionModel:t.model,freeformChallengeCorrectionModelVersion:t.modelVersion,freeformChallengeOriginalResponse:t.originalText})});case"stories/RE_EDIT_TEXT":return(null===(Z=e.storySession)||void 0===Z?void 0:Z.challengeSession)?(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(e.storySession.challengeSession,{allowEditAfterGrammarCheck:!0})})}):e;case"stories/DISMISS_CORRECTION":{const n=null===(W=e.storySession)||void 0===W?void 0:W.challengeSession;return"freeform-writing"!==(null==n?void 0:n.type)?e:(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{answer:t.text,numberOfCorrectionsDismissed:n.numberOfCorrectionsDismissed+1})})})}case"stories/START_CHALLENGE":{const n=null===(z=e.storySession)||void 0===z?void 0:z.challengeSession;return n&&"freeform-writing"===n.type?(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{startTime:t.startTime})})}):e}case"stories/DID_SCROLL_DURING_FREEFORM_CHALLENGE":{const t=null===($=e.storySession)||void 0===$?void 0:$.challengeSession;return t&&"freeform-writing"===t.type?(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(t,{didScroll:!0})})}):e}case"stories/TYPE_TEXT_SUBMIT":return e=(0,F.vX)(e,t.gradingResult),e=(0,F.Q5)(e),V((()=>(0,F.S5)(e))),e;case"stories/FREEFORM_WRITING_SUBMIT":return e=(0,F.Om)(e),e=(0,F.Q5)(e),V((()=>(0,F.S5)(e))),(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{freeformChallengeSubmittedResponseWithHints:t.responseWithHints,responseTtsStatus:"done"})});case"stories/ONBOARDING_HINT_VIEWED":return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{onboardingStep:void 0})});case"stories/ANSWER_POINT_TO_PHRASE":{const n=null===(Y=e.storySession)||void 0===Y?void 0:Y.challengeSession;if("point-to-phrase"!==(null==n?void 0:n.type))throw Error("Unexpected type");const i=n.correctAnswerIndex;return e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{mistakeCount:n.mistakeCount+(t.partIndex===n.correctAnswerIndex?0:1),selectedIndices:d.G0(n.selectedIndices,[t.partIndex])})})}),t.partIndex===i&&(e=(0,F.Q5)(e),V((()=>(0,F.S5)(e)))),e}case"stories/SET_AUDIO_ERROR":return(0,u.setIn)(e,["audio","playError"],!0);case"stories/SET_LINE_AUDIO_DURATION":return(0,u.setIn)(e,["audio","duration"],t.duration);case"stories/SKIP_CHALLENGE":{const t=null===(K=e.storySession)||void 0===K?void 0:K.challengeSession;if("freeform-writing"!==(null==t?void 0:t.type))throw Error("Attempted to skip unskippable challenge");return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(t,{skipped:!0})})})}case"stories/SET_HOOTS_USER_PROPERTIES":return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{freeformUserProperties:t.properties})});case"stories/FREEFORM_WRITING_SET_TTS_URL":if("freeform-writing"!==(null===(J=null===(q=e.storySession)||void 0===q?void 0:q.challengeSession)||void 0===J?void 0:J.type))throw Error("Unexpected challenge type");return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{freeformChallengeSubmittedResponseTtsUrl:t.url})});case"stories/FREEFORM_WRITING_PREPARE_SUBMIT":return(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{responseTtsStatus:"in-progress"})});case"stories/USED_KEYBOARD_FOR_MATCH_CHALLENGE":return(0,u.setIn)(e,["storySession","usedKeyboardForMatchChallenge"],!0);case"stories/GRADE_SPEAK_LINE":{const n=null===(X=e.storySession)||void 0===X?void 0:X.challengeSession;if("speak"!==(null==n?void 0:n.type))throw Error(`Unexpected speak challenge on ${null==n?void 0:n.type}`);return e=(0,u.merge)(e,{storySession:(0,u.merge)(e.storySession,{challengeSession:(0,u.merge)(n,{mistakeCount:t.correct||t.skipped?0:1,skipped:t.skipped})})}),e=(0,F.Q5)(e),V((()=>(0,F.S5)(e))),e}case"DISABLE_SPEAK":{if(void 0===e.storySession)return e;const t=e.storyElements,n=null===(Q=e.storySession)||void 0===Q?void 0:Q.furthestPosition.elementIndex,i=t&&n?t[n]:void 0;if("LINE"!==(null==i?void 0:i.type))throw Error(`Unexpected switch to fall back ${null==i?void 0:i.type}`);const o=e.fallbackElements;if(!o)throw Error("No fallback elements");if(!t)throw Error("No elements");const s=(0,M.IG)(i),r=(0,M.BT)(s,t),a=t.slice(0,r),l=(0,M.BT)(s,o),c=[...a,...o.slice(l,o.length)];return(0,u.merge)(e,{speakingDisabledLineIndex:s,storyElements:c})}}return e},storiesPersisted:(e=(0,u.from)(Z),t)=>{var n;switch(t.type){case"stories/HAS_SEEN_UNLOCKED_STORIES_SLIDE":e.unlockedStories&&(e=(0,u.setIn)(e,["unlockedStories","hasSeenStoriesUnlockSlide"],!0));break;case"stories/SET_UNLOCKED_STORIES":e=(0,u.set)(e,"unlockedStories",t.unlockedStories);break;case"stories/SET_UNVISITED_STORIES":if(e.unvisitedStories){let i=(0,M.Bs)(e.unvisitedStories);t.isNewlyPublishedUpdate&&t.unvisitedStories&&(i=(0,M.gG)(i,t.unvisitedStories.map((e=>e.storyId)))),e=(0,u.set)(e,"unvisitedStories",i.concat(null!==(n=t.unvisitedStories)&&void 0!==n?n:[]))}else e=(0,u.set)(e,"unvisitedStories",t.unvisitedStories);break;case"stories/SET_MOST_RECENTLY_UNLOCKED_STORY":e=(0,u.set)(e,"mostRecentlyUnlockedStory",t.mostRecentlyUnlockedStory);break;case"stories/SET_NEWLY_PUBLISHED_UPDATE":e=(0,u.set)(e,"newlyPublishedUpdate",t.newlyPublishedUpdate);break;case"stories/SEEN_NEWLY_PUBLISHED_STORIES":e.newlyPublishedUpdate&&(e=(0,u.set)(e,"newlyPublishedUpdate",Object.assign(Object.assign({},e.newlyPublishedUpdate),{showRedDot:!1})));break;case"stories/REMOVE_UNVISITED_STORY":if(void 0!==e.unvisitedStories&&void 0!==t.visitedStoryId){const n=(0,M.Bs)(e.unvisitedStories).filter((e=>e.storyId!==t.visitedStoryId));e=(0,u.set)(e,"unvisitedStories",n)}break;case"stories/SET_CONFIG":return(0,u.merge)(e,{config:t.config});case"stories/SET_CAROUSEL":return(0,u.merge)(e,{carousel:t.carousel})}return e},student:(e=(0,u.from)({assignments:[],classrooms:[]}),t)=>{var n;switch(t.type){case"JOIN_CLASSROOM":if(-1!==e.classrooms.findIndex((e=>e.classroom_id===t.classroom.classroom_id)))break;e=(0,u.set)(e,"classrooms",[...e.classrooms,t.classroom]);break;case"LEAVE_CLASSROOM":(null===(n=(e=(0,u.set)(e,"classrooms",e.classrooms.filter((e=>e.classroom_id!==t.classroomId)))).classroomContest)||void 0===n?void 0:n.classroom_id)===t.classroomId&&(e=(0,u.set)(e,"classroomContest",void 0));break;case"UPDATE_ASSIGNMENTS":e=(0,u.set)(e,"assignments",t.assignments),e=(0,u.set)(e,"nextSkill",t.nextSkill);break;case"UPDATE_CLASSROOMS":e=(0,u.set)(e,"classrooms",t.classrooms);break;case"UPDATE_CLASSROOM_CONTEST":e=(0,u.set)(e,"classroomContest",t.classroomContest)}return e},subscriptions:(e=(0,u.from)({}),t)=>{switch(t.type){case"SET_SUBSCRIPTIONS":e=(0,u.from)(t.subscriptions);break;case"ADD_SUBSCRIPTION":e=(0,u.set)(e,`${t.followedUser.id}`,t.followedUser);break;case"REMOVE_SUBSCRIPTION":{const n=d.XP(e).filter((e=>e!==`${t.userId}`)).map((t=>e[t]));e=(0,u.from)(d.HK(n,"id"));break}}return e},ui:(e=z,t)=>{var n,i;switch(t.type){case"CAN_SHOW_HOME_NOTIFICATION":e=(0,u.set)(e,"canShowHomeNotification",null===(n=t.notificationType)||void 0===n||n);break;case"CAPTURE_SCROLL":e=(0,u.set)(e,"capturedScrollY",t.y);break;case"COME_ONLINE":e=(0,u.set)(e,"online",!0);break;case"CREATE_PERSISTENT_NOTIFICATION":switch(t.notificationType){case"MARKETING_OPT_IN":e=(0,u.setIn)(e,["persistentNotifications","marketingOptIn"],!0);break;case"SCHOOLS_JOINED_CLASSROOM":e=(0,u.setIn)(e,["persistentNotifications","schoolsJoinedClassroom"],{observerName:t.observerName});break;case"PERFORMANCE_BASED_TEST_OUT":e=(0,u.setIn)(e,["persistentNotifications","performanceBasedTestOut"],{skillId:t.skillId});break;case"PLUS_BADGE":e=(0,u.setIn)(e,["persistentNotifications","plusBadge"],!0);break;case"PLUS_BADGE_FAMILY":e=(0,u.setIn)(e,["persistentNotifications","plusBadgeFamily"],!0)}break;case"DIMMED_OVERLAY_CLOSED":e=(0,u.set)(e,"isDimmedOverlayOpen",!1);break;case"DIMMED_OVERLAY_OPENED":e=(0,u.set)(e,"isDimmedOverlayOpen",!0);break;case"DISABLE_PERSISTENT_NOTIFICATION":case"DISMISS_PERSISTENT_NOTIFICATION":{"DISMISS_PERSISTENT_NOTIFICATION"===t.type&&(0,W.m4)(t.notificationType)&&(["DOGFOODING","DOGFOODING_PREVIEW","DOGFOODING_V2"].includes(t.notificationType)||(e=(0,u.set)(e,"canShowHomeNotification",!1)),e=(0,u.set)(e,"homeNotification",void 0));const n={DOGFOODING:"dogfooding",DOGFOODING_PREVIEW:"dogfoodingPreview",DOGFOODING_V2:"dogfoodingV2",IMMERSIVE_PLUS_PROMO:"immersivePlusPromo",INVITE_FRIENDS:"inviteFriends",MARKETING_OPT_IN:"marketingOptIn",PERFORMANCE_BASED_TEST_OUT:"performanceBasedTestOut",PLUS_BADGE:"plusBadge",PLUS_BADGE_FAMILY:"plusBadgeFamily",PLUS_EARNED:"plusEarned",REQUEST_NOTIFICATION_PERMISSION:"requestNotificationPermission",RESURRECTION_BANNER:"resurrectionBanner",STREAK_FREEZE_RECURRING_OFFER:"streakFreezeRecurringOffer",WEB_TO_APP_CONVERSION:"webToAppConversion",WEB_TO_APP_CONVERSION_AGGRESSIVE:"webToAppConversionAggressive",WELCOME_BACK_BANNER:"welcomeBackBanner"}[t.notificationType];n&&(e=(0,u.setIn)(e,["persistentNotifications",n],void 0));break}case"DISMISS_STICKY_APP_BANNER":e=(0,u.set)(e,"isAppBannerDismissed",!0);break;case"GO_OFFLINE":e=(0,u.set)(e,"online",!1);break;case"LOGOUT":e=(0,u.set)(e,"isLoggingOut",!0);break;case"MODAL_CLOSED":e=(0,u.set)(e,"isModalReallyOpen",!1);break;case"MODAL_MOUNTED":e=(0,u.set)(e,"availableModals",[...e.availableModals,t.name]);break;case"MODAL_OPENED":e=(0,u.set)(e,"isModalReallyOpen",!0);break;case"MODAL_UNMOUNTED":(null===(i=(e=(0,u.set)(e,"availableModals",e.availableModals.filter((e=>e!==t.name)))).modal)||void 0===i?void 0:i.name)===t.name&&(e=(0,u.set)(e,"modal",void 0),e=(0,u.set)(e,"modalIsUhmManaged",!1),e=(0,u.set)(e,"isModalReallyOpen",!1));break;case"PERSISTENT_NOTIFICATION_MEETS_TIME_CRITERION":{const n={IMMERSIVE_PLUS_PROMO:"immersivePlusPromo",INVITE_FRIENDS:"inviteFriends",PLUS_EARNED:"plusEarned",RESURRECTION_BANNER:"resurrectionBanner",STREAK_FREEZE_RECURRING_OFFER:"streakFreezeRecurringOffer",WEB_TO_APP_CONVERSION:"webToAppConversion",WEB_TO_APP_CONVERSION_AGGRESSIVE:"webToAppConversionAggressive",WELCOME_BACK_BANNER:"welcomeBackBanner"};e=(0,u.setIn)(e,["persistentNotifications",n[t.notificationType]],!0);break}case"PURCHASE_ITEM":switch(t.status){case"FAIL":case"SUCCESS":e=(0,u.set)(e,"purchasingItem",!1);break;case"START":e=(0,u.set)(e,"purchasingItem",!0)}break;case"RELEASE_SCROLL":e=(0,u.set)(e,"capturedScrollY",void 0);break;case"RESIZE_WINDOW":e=(0,u.merge)(e,{viewportHeight:t.height,viewportWidth:t.width});break;case"SET_HOME_NOTIFICATION":e=(0,u.set)(e,"homeNotification",t.notificationType);break;case"SET_POPOVER":e=(0,u.merge)(e,{popoverId:t.id});break;case"SET_HOME_PAGE_POPOVER":e=(0,u.merge)(e,{homePagePopoverId:void 0!==t.id&&void 0!==t.section?`${t.section}/${t.id}`:void 0});break;case"SUBMITTED_SESSION":e=(0,u.setIn)(e,["persistentNotifications","resurrectionBanner"],void 0),e=(0,u.setIn)(e,["persistentNotifications","welcomeBackBanner"],void 0);break;case"TOGGLE_DRAWER":t.options?(e=(0,u.merge)(e,{drawer:t.options,drawerIsUhmManaged:!0===t.isUhmManaged}),t.keepFullscreenModal||(e=(0,u.merge)(e,{modal:void 0,modalIsUhmManaged:!1}))):e=(0,u.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1});break;case"TOGGLE_MODAL":if(t.options){if(!e.availableModals.includes(t.options.name))break;if(!1===t.replaceExisting&&e.modal)break;e=(0,u.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,modal:t.options,modalIsUhmManaged:!0===t.isUhmManaged,modalShouldWaitForOverlay:!e.isDimmedOverlayOpen})}else e=(0,u.merge)(e,{modal:void 0,modalIsUhmManaged:!1});break;case"TOGGLE_REQUEST_NOTIFICATION_PERMISSION":e=(0,u.set)(e,"isRequestingNotificationPermission",t.isVisible);break;case"SCROLL_TO_STORIES_CAROUSEL":e=(0,u.set)(e,"scrollToStoriesCarousel",t.shouldScroll);break;case"SET_SHOP_ITEMS":e=(0,u.set)(e,"isShopItemsFresh",!0);break;case"UPDATE_B2B_PRICING_DATA":e=(0,u.set)(e,"b2bPricingData",t.b2bPricingData);break;case"UPDATE_USER":e=(0,u.set)(e,"isUserModelFresh",!0)}return e},uiPersisted:(e=(0,u.from)({homeBannerShown:{count:0,notificationType:void 0},persistentNotifications:{streakFreezeRecurringOffer:{shows:0},webToAppConversion:{shows:0}},plusBannerShown:{count:0},reportedProfileUserIds:[],sessionEndPlusAdShown:{count:0},typeToSelect:{initializedAt:Date.now()}}),t)=>{var n,i,o,s,r,a,l;switch(t.type){case"DISMISS_PERSISTENT_NOTIFICATION":e=(0,u.set)(e,"homeBannerShown",{count:0,notificationType:void 0});break;case"PERSISTENT_NOTIFICATION_SHOWN":t.isHomeBanner&&(e=(0,u.setIn)(e,["homeBannerShown","count"],e.homeBannerShown.count+1)),"WEB_TO_APP_CONVERSION"!==t.notificationType&&"WEB_TO_APP_CONVERSION_AGGRESSIVE"!==t.notificationType||(e=(0,u.setIn)(e,["persistentNotifications","webToAppConversion","lastShown"],t.timestamp),e=(0,u.updateIn)(e,["persistentNotifications","webToAppConversion","shows"],(e=>e+1))),"STREAK_FREEZE_RECURRING_OFFER"===t.notificationType&&(e=(0,u.setIn)(e,["persistentNotifications","streakFreezeRecurringOffer","lastShown"],t.timestamp),e=(0,u.updateIn)(e,["persistentNotifications","streakFreezeRecurringOffer","shows"],(e=>e+1)));break;case"PURCHASE_ITEM":"SUCCESS"===t.status&&"streak_freeze"===t.item.itemName&&(e=(0,u.setIn)(e,["persistentNotifications","streakFreezeRecurringOffer"],{shows:0}));break;case"UPDATE_USER":void 0!==(null===(n=t.user)||void 0===n?void 0:n.streak)&&t.user.streak<3&&(e=(0,u.setIn)(e,["persistentNotifications","streakFreezeRecurringOffer"],{shows:0}));break;case"TOGGLE_DRAWER":"TYPE_TO_SELECT"===(null===(i=t.options)||void 0===i?void 0:i.name)&&(e=(0,u.setIn)(e,["typeToSelect","calloutShown"],!0));break;case"USED_TYPE_TO_SELECT_TOKEN":e=(0,u.setIn)(e,["typeToSelect","used"],!0);break;case"SET_HOME_NOTIFICATION":t.notificationType!==e.homeBannerShown.notificationType&&(e=(0,u.set)(e,"homeBannerShown",{count:0,notificationType:t.notificationType}));break;case"PLUS_BANNER_SHOWN":e=(0,u.set)(e,"plusBannerShown",{count:(null!==(s=null===(o=e.plusBannerShown)||void 0===o?void 0:o.count)&&void 0!==s?s:0)+1,lastShown:t.timestamp});break;case"SAVE_REPORTED_PROFILE_USER_ID":{const n=null!==(r=e.reportedProfileUserIds)&&void 0!==r?r:[];e=(0,u.set)(e,"reportedProfileUserIds",[t.profileUserId,...n.slice(0,32)]);break}case"SESSION_END_PLUS_AD_SHOWN":e=(0,u.set)(e,"sessionEndPlusAdShown",{count:(null!==(l=null===(a=e.sessionEndPlusAdShown)||void 0===a?void 0:a.count)&&void 0!==l?l:0)+1,lastShown:t.timestamp})}return e},user:(e=(0,u.from)({coachRecords:{},explanationsSeen:{},recentlySeenSmartTips:{},sessionsCompleted:0}),t)=>{var n,i,o,s;switch(t.type){case"MARK_NOTIFICATIONS_READ":e=(0,u.set)(e,"webNotificationIds",[]);break;case"DISABLE_PERSISTENT_NOTIFICATION":case"DISMISS_PERSISTENT_NOTIFICATION":if((0,W.Qp)(t.notificationType))e=(0,u.set)(e,"persistentNotifications",d.zu(e.persistentNotifications,t.notificationType));else{switch(t.notificationType){case"STREAK_REPAIR_OFFER":e=(0,u.set)(e,"streakRepairOffer",void 0);break;case"STREAK_REPAIRED":e=(0,u.set)(e,"streakRepairedNotification",void 0)}if("DISMISS_PERSISTENT_NOTIFICATION"===t.type)switch(t.notificationType){case"IMMERSIVE_PLUS_PROMO":e=(0,u.set)(e,"plusExpirationDate",void 0);break;case"PLUS_EARNED":e=(0,u.set)(e,"plusEarnedBannerLastClosed",t.timestamp);break;case"RESURRECTION_BANNER":e=(0,u.set)(e,"resurrectionBannerLastClosed",t.timestamp/1e3);break;case"WELCOME_BACK_BANNER":e=(0,u.set)(e,"welcomeBackBannerLastClosed",t.timestamp/1e3)}}break;case"ACTIVATE_PLUS":e=(0,u.set)(e,"plusExpirationDate",t.plusExpirationDate);break;case"ADD_PLUS_DISCOUNT":e=(0,u.setIn)(e,["plusDiscounts"],[Y(t.apiDiscount),...e.plusDiscounts]);break;case"EXPLANATION_SHOWN":e=(0,u.setIn)(e,["explanationsSeen",t.explanationSkillId],t.timestamp);break;case"PURCHASE_ITEM":if("SUCCESS"!==t.status)break;e=(0,u.set)(e,"lingots",e.lingots-t.item.purchasePrice*(null!==(n=t.purchaseQuantity)&&void 0!==n?n:1));break;case"UPDATE_EXPERIMENT_RECORD":e=(0,u.setIn)(e,["experiments",t.name,"treated"],!0),t.contexts&&(e=(0,u.setIn)(e,["experiments",t.name,"contexts"],t.contexts));break;case"SUBMITTED_SESSION":e=(0,u.set)(e,"lastSessionFinished",t.timestamp/1e3),e=(0,u.set)(e,"sessionsCompleted",e.sessionsCompleted+1);break;case"CREATE_STREAK_REPAIRED_NOTIFICATION":e=(0,u.setIn)(e,["streakRepairedNotification"],{expirationTime:(0,f.mm)(),length:t.length});break;case"UPDATE_USER_LINGOTS":e=(0,u.setIn)(e,["lingots"],e.lingots+t.lingots);break;case"CONSUME_DAILY_GOAL_REWARD":{const t=(0,u.asMutable)(e.rewardBundles).map((e=>"DAILY_GOAL_DOUBLE"===e.rewardBundleType?(0,u.updateIn)(e,["rewards",0,"consumed"],(()=>!0)):e));e=(0,u.set)(e,"rewardBundles",t);break}case"COACH_DUO_SHOWN":{const n=t.model.showReason,o=null===(i=e.coachRecords)||void 0===i?void 0:i[n],s=void 0===o?0:(0,f.zk)(o.lastShown)?o.timesShownToday:0,r={lastShown:t.timestamp/1e3,timesShownToday:s+1};e=(0,u.setIn)(e,["coachRecords",n],r);break}case"RESET_COACH":e=(0,u.set)(e,"coachRecords",{});break;case"SET_MISTAKE_COUNT":(void 0===e.mistakeCountInfo||void 0===t.mistakeCountInfo||t.mistakeCountInfo.expirationTime>e.mistakeCountInfo.expirationTime)&&(e=(0,u.set)(e,"mistakeCountInfo",t.mistakeCountInfo));break;case"SET_NY_PROMO_DRAWER_NEXT_SHOW":e=(0,u.set)(e,"newYearsDrawerNextShowTimestamp",t.timestamp);break;case"SET_SMART_TIP_TO_SHOW":{const n=Object.assign({},e.recentlySeenSmartTips);d.XP(n).forEach((e=>{n[e]<t.timestamp&&delete n[e]})),e=(0,u.set)(e,"recentlySeenSmartTips",n);const i=t.smartTipResource,s=(0,$.r8)(i),r=t.timestamp+(null!==(o=i.policy.minimumTimeBetweenShows)&&void 0!==o?o:$.U);e=(0,u.setIn)(e,["recentlySeenSmartTips",s],r);break}case"SET_SHOULD_TRACK_SEE_SKILL_TREE":e=(0,u.set)(e,"shouldTrackSeeSkillTree",!0);break;case"RESET_SHOULD_TRACK_SEE_SKILL_TREE":e=(0,u.set)(e,"shouldTrackSeeSkillTree",void 0);break;case"UPDATE_USER":{const n=t.user,{currentCourse:i,courses:o,plusDiscounts:r}=n,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(n,["currentCourse","courses","plusDiscounts"]),l=(0,P.Xh)(a);o&&(l.courses=o.map((e=>e.id))),i&&(l.currentCourseId=i.id),r&&(l.plusDiscounts=r.map((e=>Y(e)))),(null===(s=l.lastStreak)||void 0===s?void 0:s.isAvailableForRepair)&&!(null==e?void 0:e.streakRepairOffer)?l.streakRepairOffer={expirationTime:(0,f.HR)(172800),length:l.lastStreak.length}:l.lastStreak&&!l.lastStreak.isAvailableForRepair&&(l.streakRepairOffer=void 0),e=(0,u.merge)(e,l,{deep:!0}),l.adsConfig&&(e=(0,u.setIn)(e,["adsConfig"],l.adsConfig));break}}return e}});var X=n(88868);const Q=({location:e})=>(r.useEffect((()=>{var t,n,i,o;(null==e?void 0:e.pathname)!==X.Oy&&(t=void 0,n=void 0,o=function*(){yield(0,H.j)("page_not_found",{}),yield(0,X.Zs)(X.Oy,!0)},new((i=void 0)||(i=Promise))((function(e,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}l((o=o.apply(t,n||[])).next())})))}),[]),null);var ee=n(3583),te=n(79129),ne=n(33389),ie=n(2352),oe=n(59815),se=n(11908);class re extends r.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){return n=this,i=void 0,s=function*(){if(console.warn("RedirectingErrorBoundary caught an error"),!(0,oe.Wp)(e)){const n=(0,K.vU)(e,{data:Object.assign(Object.assign({},t),{isFromRedirectingErrorBoundary:!0})});yield(0,H.j)("app_crash",{crash_message:e.message,crash_type:e.name,rollbar_uuid:null==n?void 0:n.uuid})}(0,oe.Wp)(e)||((0,se.cl)(se.Qt.State),(0,X.Zs)("/learn",!0))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{l(s.next(e))}catch(e){t(e)}}function a(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}l((s=s.apply(n,i||[])).next())}));var n,i,o,s}render(){return this.state.hasError?null:this.props.children}}const ae=re;var le=n(51900),ce=n(42659),ue=n(57817),de=n(93540),pe=n(60610);const me=()=>{const e=(0,c.k6)(),t=(0,c.TH)(),n=(0,pe.Fx)(ue.T),i=(0,pe.Fx)(de.kn),o=(0,pe.Fx)((e=>e.ui.homePagePopoverId)),s=(0,pe.Fx)(ce.WN),a=r.useRef(),l=t.pathname===X.B6&&i?"manual":"auto";return r.useLayoutEffect((()=>{window.history.scrollRestoration=l}),[l]),r.useLayoutEffect((()=>{if(t.pathname!==a.current){const r=t.pathname===X.B6&&(n||i||o||s),a="POP"===e.action;r||a||window.scrollTo(0,0)}a.current=t.pathname})),null};var ge=n(30977),he=n(50498),_e=n(80388),ve=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};var fe=n(44451);let ye=Date.now();const Ee=3e5,be=["mousedown","keydown","touchstart"];var Se=n(50791),we=n(26174),Te=n(94144),Ie=n(86233);class ke extends r.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){if(!(0,oe.Wp)(e)){const n=(0,K.vU)(e,{data:t});(0,H.j)("app_crash",{crash_message:e.message,crash_type:e.name,rollbar_uuid:null==n?void 0:n.uuid})}}render(){return this.state.hasError?null:r.createElement(r.Suspense,{fallback:null},this.props.children)}}const Ce=ke;var Re=n(41461),Oe=n(23630),Ne=n(60042),Le=n.n(Ne),Pe=n(83063),Ae=n(67073),De=n(99021),xe=n(28886),Me=n(79848),Ue=n(47725),Fe=n(87539),je=n(13456);const Be={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","button-inner":"_2SZSG",form:"_3MuAI",h2:"_1U6wL",header:"_1qJTn",icon:"_3gpzB","link-ellipsis":"_2soN_",list:"_2uH3b","modal-container":"CbS80",scroll:"_2DWsm",small:"_1BJfc"};var He=n(95332),Ge=n(35160),Ve=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Ze="None apply",We=({onDismiss:e})=>{const t=(0,pe.Fx)(de.kn),n=(0,pe.Fx)(ce.np),i=(0,pe.CC)(),[o,s]=r.useState(""),[a,l]=r.useState(),[c,u]=r.useState(),[d,p]=r.useState(""),[m]=r.useState((()=>(({player:e,player:{session:t,sessionParams:n},user:i},o)=>{var s,r,a;const l=Oe.getParser(navigator.userAgent);let c="";try{c=null!==(s=Re.Hr(!0))&&void 0!==s?s:""}catch(e){}const u=null==t?void 0:t.challenges[e.currentIndex],d=[["Session id",null==t?void 0:t.id],["Session type",null==n?void 0:n.type.toLowerCase()],["Skill tree id",null==t?void 0:t.trackingProperties.skill_tree_id],["Level number",null==n?void 0:n.levelIndex],["Lesson number",null==n?void 0:n.levelSessionIndex],["Skill name",null==t?void 0:t.trackingProperties.skill_name],["Skill id",null==t?void 0:t.trackingProperties.skill_id],["Challenge generator id",null===(r=null==u?void 0:u.challengeGeneratorIdentifier)||void 0===r?void 0:r.generatorId],["Challenge type",u?He.SJ[u.type]:void 0],["Challenge generator specific type",null===(a=null==u?void 0:u.challengeGeneratorIdentifier)||void 0===a?void 0:a.specificType],["Challenge prompt text",u?(0,He.r1)(u).join(" "):void 0],["User input text",void 0]].filter((([,e])=>void 0!==e));return`-------------------\nApp information:\n\nApp version: ${window.duo.version}\nApp version number: ${window.duo.versionNumber}\nBrowser: ${l.getBrowserName()} ${l.getBrowserVersion()}\nOS: ${l.getOSName()} ${l.getOSVersion()}\nPlatform: ${l.getPlatformType()}\nScreen: ${screen.width}x${screen.height}, DPR ${devicePixelRatio}\nLanguages: ${i.learningLanguage}<-${i.fromLanguage}\nUsername: ${i.username}\nCourse: ${i.currentCourseId}\n${o?"Experiments:\n\t- web_v2_dev: true":""}\n\n-------------------\nSession information:\n\nFullStory session: ${c||"unavailable"}\nURL: ${window.location.href}\n${d.map((([e,t])=>`${e}: ${t}`)).join("\n")}\n\n-------------------\nReported with shake-to-report`})(i.getState(),t))),[g,h]=r.useState(),[_,f]=r.useState([]),[y,E]=r.useState(),[b,S]=r.useState("report"),[w,T]=r.useState(!1),[I,k]=r.useState(),[C,R]=r.useState(""),O=(0,pe.PX)(void 0,(()=>"features"===b?ge.PA.getSuggestedFeatures({description:o.trim(),generated_description:m,summary:C.trim()}):Promise.resolve(void 0)),[o,m,b,C]),N=r.useMemo((()=>O?[...O.other_features].sort(((e,n)=>t&&"v2 feedback"===e?-1:t&&"v2 feedback"===n?1:e.localeCompare(n))):void 0),[O,t]),L=O?[...O.suggested_features,Ze]:void 0,P=(0,pe.PX)(void 0,(()=>ge.PA.getSlackReportTypes()),[]),A=void 0!==O,D=null!=c?c:I,x=w||"features"===b&&!A,[M,U,F]="report"===b||"features"===b&&!A?[r.createElement("div",{className:Be.header,key:"header"},r.createElement("h2",{className:Be.h2},"Internal bug report")),r.createElement(r.Fragment,null,r.createElement(De.Z,{disabled:x,onChange:e=>R(e.target.value),placeholder:"Short description",required:!0,type:"text",value:C}),r.createElement(xe.Z,{disabled:x,onChange:e=>s(e.target.value),placeholder:"What went wrong in more detail?",value:o}),r.createElement(Me.Z,{disabled:x,onChange:e=>E(null==P?void 0:P.find((t=>t.name===e.target.value))),options:[{text:"Choose Slack (optional)",value:""},...null!==(j=null==P?void 0:P.map((e=>({text:e.name,value:e.name}))))&&void 0!==j?j:[]],value:null!==(B=null==y?void 0:y.name)&&void 0!==B?B:""}),r.createElement("span",{className:Be.small},"If your report belongs in #visual-polish, #feedback-language, #feedback-tts, or #feedback-product on Slack, choose one.")),r.createElement(Pe.Z,{color:void 0===y||y.alsoPostsToJira?void 0:"owl",disabled:!C.trim(),key:"footer",submitting:x,type:"submit",variant:void 0===y||y.alsoPostsToJira?"stroke":"solid"},void 0===y||y.alsoPostsToJira?"Next":"Post to Slack")]:"features"===b?[r.createElement("div",{className:Be.header,key:"header"},r.createElement(Pe.Z,{disabled:x,onClick:()=>S("report")},r.createElement("img",{className:Be.icon,src:je})),r.createElement("h2",{className:Be.h2},"Choose a feature")),r.createElement(r.Fragment,null,void 0!==L&&L.length>1?r.createElement(r.Fragment,null,r.createElement("strong",null,"Recommended features"),r.createElement(Ae.Z,{className:Be.list,items:L.map((e=>({text:e}))),onChange:e=>k(e.selectedIndices.length?L[e.selectedIndices[0]]:void 0),selectedIndices:void 0!==I&&L.includes(I)?[L.indexOf(I)]:[]})):null,void 0===N||1!==(null==L?void 0:L.length)&&I!==Ze?null:r.createElement(r.Fragment,null,r.createElement("strong",null,"Select a feature"),r.createElement(Ae.Z,{className:Be.list,items:N.map((e=>({text:e}))),onChange:e=>u(e.selectedIndices.length?N[e.selectedIndices[0]]:void 0),onQueryChange:e=>p(e.value),query:d,selectedIndices:void 0!==D&&N.includes(D)?[N.indexOf(D)]:[],showSearch:!0}))),r.createElement(Pe.Z,{color:"owl",disabled:!D||D===Ze,key:"footer",submitting:x,type:"submit",variant:"solid"},"Create Jira ticket")]:"duplicates"===b||"submitted"===b?(()=>{var e,t;return[r.createElement("div",{className:Be.header,key:"header"},r.createElement("h2",{className:Be.h2},"duplicates"===b?"Possible duplicates":"Thank you")),r.createElement(r.Fragment,null,r.createElement("strong",null,"Thanks for your feedback!"),(null==a?void 0:a.length)?r.createElement(r.Fragment,null,r.createElement("span",null,"We’ve identified potential duplicate reports."),r.createElement("span",null,"Please help us improve our duplicate detection system by taking a few moments to mark any of the following reports that might be duplicates of your issue.")):null,r.createElement(Ue.Z,{className:Le()((0,Pe.y)({variant:"stroke"}),Be.button),href:null!==(t=null!==(e=null==g?void 0:g.jiraUrl)&&void 0!==e?e:null==g?void 0:g.slackUrl)&&void 0!==t?t:"",target:"_blank"},r.createElement("span",{className:Be["button-inner"]},(null==g?void 0:g.issueKey)?`Your Jira ticket: ${g.issueKey}`:`View in ${null==g?void 0:g.slackChannel}`)),(null==a?void 0:a.length)?r.createElement(Ae.Z,{className:Be.list,items:a.map((e=>({text:`${e.issue_key}: ${e.header_text}`,textEl:r.createElement(Ue.Z,{className:Be["link-ellipsis"],href:`https://duolingo.atlassian.net/browse/${encodeURIComponent(e.issue_key)}`,onClick:e=>e.stopPropagation(),target:"_blank"},e.issue_key,": ",e.header_text)}))),multiple:!0,onChange:e=>f(e.selectedIndices),selectedIndices:_}):null),r.createElement(Pe.Z,{color:"owl",key:"footer",type:"submit",variant:"solid"},"Done")]})():[];var j,B;return r.createElement(r.Fragment,null,M,r.createElement("form",{className:Be.form,noValidate:!0,onSubmit:t=>Ve(void 0,void 0,void 0,(function*(){if(t.preventDefault(),!t.target.checkValidity())return;switch(b){case"duplicates":return a&&_.length&&ge.PA.fullyConnectDuplicates(_.map(((e,t)=>a[t].issue_key))),void e();case"features":break;case"report":if(void 0===y||(null==y?void 0:y.alsoPostsToJira))return void S("features");break;case"submitted":return void e();default:return}const i=[],s=(0,K.c2)();s.length&&i.push(["telemetry",new File([JSON.stringify(s,null,2)],"telemetry.json",{type:"application/json"})]),T(!0);try{const e=yield ge.PA.reportIssue({description:o.trim(),feature:D,generatedDescription:m,preRelease:(0,v.oj)(),project:"DLAW",reporterEmail:n.email,slackReportType:null==y?void 0:y.name,summary:C.trim()},i);h(e);const t=yield Ve(void 0,void 0,void 0,(function*(){if(e.issueKey)try{return yield ge.PA.detectDuplicates(e.issueKey)}catch(e){}return[]}));t.length?(l(t),S("duplicates")):S("submitted"),(0,H.j)("shake_to_report_feedback",{feature:D,number_suggested_features:L?L.length-1:0,report_type:"internal",selected_suggested_feature:void 0!==I&&I!==Ze,slack_channel:null==y?void 0:y.name})}finally{T(!1)}}))},r.createElement("div",{className:Be.scroll},U),F))},ze=()=>r.createElement(Fe.Z,{className:Be["modal-container"],modalName:Ge.tl.ShakeToReport},(e=>r.createElement(We,Object.assign({},e))));var $e=n(43670),Ye=n(29531),Ke=n(44629),qe=n(52761);const Je="_2mhcq",Xe="_1zf34";var Qe=n(88528),et=n(30033),tt=n(13840);const nt=({[et.m5]:e,autoComplete:t,disabled:n,error:i,focusField:o=!1,inner:s,label:a,onBlur:l,onChange:c,onResetError:u,placeholder:d,suggestedUsernames:p,tooltip:m,type:g,value:h})=>{const _=(0,pe.Fx)(ce.$4),v=r.useRef(null),[f,y]=r.useState(!1),E=r.useCallback((({placement:e})=>[0,"bottom"!==e||_?parseFloat(Qe.Z["margin-popover"]):-6]),[_]),b=(0,Ye.f)({modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}},{name:"offset",options:{offset:E}}],placement:tt.lw?"left":"right"}),S=(0,Ye.f)();return r.useLayoutEffect((()=>{var e;o&&(null===(e=v.current)||void 0===e||e.focus())}),[]),r.createElement("div",{className:"_2a3s4"},r.createElement("label",{className:"_2S_JP"},a?r.createElement("div",{className:"_2agB9 _2rjZr"},a):null,r.createElement("div",{className:"_2rjZr",ref:b.setElementRef},r.createElement("input",Object.assign({},(0,et._q)(e),{autoComplete:t,autoFocus:o,className:Le()("_3MNft",H.qE),disabled:n,onBlur:l,onChange:e=>c(e.target.value),placeholder:d,ref:v,type:g,value:h}))),s?r.createElement("div",{className:Je},s):null),m?r.createElement(Ke.Z,{className:Je,isOpen:f,onClose:()=>y(!1),onOpen:()=>y(!0),onToggle:()=>y(!f),popoverState:S.props.state},r.createElement("div",{className:"_2Aobv",ref:S.setElementRef},"?"),f?r.createElement(qe.Z,{className:Xe,innerClassName:"XYk_i",onRequestClose:()=>y(!1),popperProps:S.props,ref:S.setPopoverRef,stemContainerRef:S.setArrowRef,zIndex:parseInt(Qe.Z["z-index-popover"],10)+1},m):null):null,i?r.createElement(qe.Z,{className:Xe,innerClassName:"_31fY5",popperProps:b.props,ref:b.setPopoverRef,stemContainerRef:b.setArrowRef,zIndex:parseInt(Qe.Z["z-index-popover"],10)},p?r.createElement("div",{className:"_2qX0a"},r.createElement("div",{className:"_1vVSc"},i),r.createElement("div",{className:"_3MrO1"},(0,tt._i)(22391)),r.createElement("div",{className:"_3FY0X"},p.map((e=>r.createElement("button",{className:"_3tqFH",key:e,onClick:()=>{c(e),null==u||u()},type:"button"},e))))):i):null)};var it=n(36843),ot=n(67173);const st=({children:e})=>e?r.createElement("div",Object.assign({},(0,et._q)(ot.V.InvalidFormField),{className:it.Z["invalid-form-field"]}),e):null,rt=({children:e})=>{const t=r.Children.toArray(e).filter((e=>!!e)).map(((e,t)=>r.createElement(st,{key:t},e)));return t.length?r.createElement("div",{className:it.Z["invalid-form-fields"]},t):null};var at=n(14649);const lt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","modal-wrapper":"_3gyBG","right-controls":"_3Kwrp","left-controls":"_1M8vB",modal:"_2z95t",table:"_3jeu0","link-container":"_8oBzi","link-container-stacked":"_2Jpfm _8oBzi","account-icon":"_3zB0T",button:"_2oW4v","close-button":"_2P5sI _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ",forgot:"_2np70 _3yAjN",header:"_2xBMb",title:"_2GC65","signin-error-message":"fJChu","last-login-name":"_2-N6b","blue-link":"_3WxKE _2__FI _2RTMn _3yAjN","blue-link-body":"_24PjM _2__FI _2RTMn _3yAjN","created-with-social-title":"_3SARz _2GC65","created-with-social-body":"_5vH8Z",google:"xijNL _1-mWU",facebook:"_3U3Uo _3kyUU","require-google-button":"_1_jR6 _1-mWU",footer:"_29viM","terms-and-privacy":"_29ZQh","no-account":"_1hKmP","no-account-link":"oRujQ",hr:"_7pBya","hr-bar":"_2_JcM","hr-text":"_36kWA _3yAjN","google-sign-in-up-header":"zKlGX","google-sign-in-up-title":"_2i91r","google-sign-in-up-subtitle":"_2IFvx"};var ct=n(44536),ut=n(70326),dt=n(41679),pt=n(8649),mt=n(67574),gt=n(53229),ht=n(71371),_t=n(6986),vt=n(66195),ft=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))},yt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const Et=({dispatch:e,errors:t,focusPasswordField:n=!1,identifier:i,onIdentifierChange:o,onPasswordChange:s,password:a,showEmailField:l,submitting:c,via:u})=>r.createElement("div",{className:lt.table},l?r.createElement(nt,Object.assign({autoComplete:"email",disabled:!!c,error:t.identifier,onChange:o,placeholder:(0,tt.H8)(14299),type:"text",value:i},(0,et._q)(ot.V.EmailInput))):null,r.createElement(nt,Object.assign({autoComplete:"current-password",disabled:!!c,error:t.password,focusField:n,inner:r.createElement(Ue.Z,Object.assign({className:lt.forgot},(0,et._q)(ot.V.ForgotPassword),{href:"/forgot_password",onClick:()=>{(0,H.j)("sign_in_tap",{target:"forgot_password",via:u}),e({options:void 0,type:"TOGGLE_MODAL"})}}),(0,tt._i)(18857)),onChange:s,placeholder:(0,tt.H8)(18716),type:"password",value:a},(0,et._q)(ot.V.PasswordInput)))),bt=({age:e,ageRestricted:t,isUGCDisabled:n,email:i,errors:o,name:s,onAgeBlur:a,onAgeChange:l,onEmailChange:c,onNameChange:u,onPasswordChange:d,onResetError:p,onUsernameBlur:m,onUsernameChange:g,password:h,submitting:_,username:v})=>r.createElement("div",{className:lt.table},r.createElement(nt,Object.assign({disabled:!!_,error:o.age,onBlur:a,onChange:l,placeholder:(0,tt.H8)(15038),tooltip:(0,tt._i)(19089),type:"text",value:e},(0,et._q)(ot.V.AgeInput))),n?null:t?r.createElement(nt,Object.assign({autoComplete:"username",disabled:!!_,error:o.username,onBlur:m,onChange:g,onResetError:p,placeholder:(0,tt.H8)(17475),suggestedUsernames:o.suggestedUsernames,type:"text",value:v},(0,et._q)(ot.V.UsernameInput))):r.createElement(nt,Object.assign({autoComplete:"name",disabled:!!_,error:o.name,onChange:u,placeholder:(0,tt.H8)(6101),type:"text",value:s},(0,et._q)(ot.V.FullNameInput))),r.createElement(nt,Object.assign({autoComplete:"email",disabled:!!_,error:o.email,onChange:c,placeholder:t?(0,tt.H8)(24103):(0,tt.H8)(2928),type:"email",value:i},(0,et._q)(ot.V.EmailInput))),r.createElement(nt,Object.assign({autoComplete:"new-password",disabled:!!_,error:o.password,onChange:d,placeholder:(0,tt.H8)(18716),type:"password",value:h},(0,et._q)(ot.V.PasswordInput)))),St=({onClick:e,platform:t,submitting:n})=>r.createElement(Pe.Z,{className:lt[t],disabled:!1!==n&&n!==t,onClick:e,submitting:n===t,type:"button",unstyledDisabled:!0,variant:"stroke"},r.createElement("img",{className:lt["account-icon"],src:`https://d35aaqx5ub95lt.cloudfront.net/images/${"facebook"===t?"facebook-blue":"google-color"}.svg`}),(0,tt._i)("facebook"===t?17511:11701)),wt=e=>{var{errors:t,header:n,lastLoginType:i,name:o="",onFacebookClick:s,onGoogleClick:a,onUseAnotherAccount:l,picture:c=vt.tU,registerButton:u,signInErrors:d,submitting:p,title:m,via:g}=e,h=yt(e,["errors","header","lastLoginType","name","onFacebookClick","onGoogleClick","onUseAnotherAccount","picture","registerButton","signInErrors","submitting","title","via"]);return r.createElement("div",null,r.createElement("div",null,n?r.createElement("div",{className:lt.header},n):null,r.createElement("h1",{className:lt.title},m),r.createElement($e.Z,{size:"medium",user:{id:0,name:o,picture:c}}),r.createElement("div",{className:lt["last-login-name"]},o),r.createElement("div",Object.assign({},(0,et._q)(ot.V.UseAnotherAccount),{className:lt["blue-link"],onClick:l}),r.createElement("span",null,(0,tt._i)(2745)))),"email"===i?r.createElement("div",null,r.createElement(Et,Object.assign({errors:d?{}:t,showEmailField:!1,submitting:p,via:g},h)),d,u):"social"===i?r.createElement("p",{className:lt["link-container-stacked"]},r.createElement(St,{onClick:s,platform:"facebook",submitting:p}),r.createElement(St,{onClick:a,platform:"google",submitting:p})):null)},Tt=({isSignIn:e,onGoogleClick:t,renderHeader:n,renderSubtitle:i,renderTitle:o,submitting:s})=>{var a;return r.createElement("div",null,r.createElement("div",{className:lt["google-sign-in-up-header"]},void 0===n?null:r.createElement("div",{className:lt["google-sign-in-up-header"]},n(e)),r.createElement("h1",{className:lt["google-sign-in-up-title"]},null!==(a=null==o?void 0:o(e))&&void 0!==a?a:(0,tt._i)(9109)),i?r.createElement("p",{className:lt["google-sign-in-up-subtitle"]},i(e)):null),r.createElement(Pe.Z,{className:lt["require-google-button"],onClick:t,submitting:"google"===s,type:"button",variant:"stroke"},r.createElement("img",{className:ct.Z["account-icon"],src:"https://d35aaqx5ub95lt.cloudfront.net/images/google-color.svg"}),r.createElement("span",{className:ct.Z["account-text"]},(0,tt._i)(1327))))},It=({name:e,picture:t,platform:n,onFacebookClick:i,onGoogleClick:o,onUseAnotherAccount:s,submitting:a})=>r.createElement("div",null,r.createElement("div",null,r.createElement("h1",{className:lt["created-with-social-title"]},(0,tt._i)("facebook"===n?23083:693)),r.createElement($e.Z,{size:"large",user:{id:0,name:e,picture:t}}),r.createElement("div",{className:lt["last-login-name"]},e)),r.createElement("div",{className:lt["created-with-social-body"]},r.createElement(Pe.Z,{className:ct.Z[n],onClick:"facebook"===n?i:o,submitting:a===n,type:"button",variant:"solid"},r.createElement("img",{className:ct.Z["account-icon"],src:`https://d35aaqx5ub95lt.cloudfront.net/images/${n}-white.svg`}),r.createElement("span",{className:ct.Z["account-text"]},(0,tt._i)("facebook"===n?15620:1327))),r.createElement("div",{className:lt["blue-link-body"],onClick:s},r.createElement("span",null,(0,tt._i)(2745))))),kt=e=>{var t,{errors:n,isFamilyPlan:i,isSignIn:o,onFacebookClick:s,onGoogleClick:a,renderHeader:l,renderTitle:c,registerButton:u,signInErrors:d,submitting:p}=e,m=yt(e,["errors","isFamilyPlan","isSignIn","onFacebookClick","onGoogleClick","renderHeader","renderTitle","registerButton","signInErrors","submitting"]);return r.createElement("div",null,void 0===l?null:r.createElement("div",{className:lt.header},l(o)),r.createElement("h1",{className:lt.title},null!==(t=null==c?void 0:c(o))&&void 0!==t?t:o?(0,tt._i)(3830):(0,tt._i)(14145)),o?r.createElement(Et,Object.assign({errors:d?{}:n,submitting:p},m)):r.createElement(bt,Object.assign({errors:n,submitting:p},m)),d,u,r.createElement("div",{className:lt.hr},r.createElement("div",{className:lt["hr-bar"]}),r.createElement("div",{className:lt["hr-text"]},(0,tt._i)(18747)),r.createElement("div",{className:lt["hr-bar"]})),r.createElement("p",{className:lt["link-container"]},r.createElement(St,{onClick:s,platform:"facebook",submitting:p}),r.createElement(St,{onClick:a,platform:"google",submitting:p})))};class Ct extends r.Component{constructor(){super(...arguments),this.state={ageRestricted:!1,alternateView:null,errors:{},fields:{age:"",email:"",identifier:"",name:"",password:"",username:""},isUsernameVerified:!1,loginAttempts:{count:0,emailSent:!1,lastEmailUsed:"",showEmailSentNotification:!1},submitting:!1,useImprovedErrorMessages:!1},this.memoizeUsernameValidate=d.HP(ut.rV),this.mounted=!1,this.emailSignup=e=>ft(this,void 0,void 0,(function*(){const{dispatch:t,modalOptions:{allowLanguagelessUser:n}}=this.props,{ageRestricted:i}=this.state,o={};if(e.email.trim()||(o.email=(0,tt.H8)(11696)),e.password.trim()||(o.password=(0,tt.H8)(5030)),e.age.trim()||(o.age=(0,tt.H8)(15012)),!d.xb(o))return Promise.reject(new ut.Wj(!1,o));const s=Object.assign(Object.assign({},e),{age:e.age,name:i?null:e.name,username:i?e.username:null});if((0,O.Pc)())try{yield t((0,Te.DZ)(s,!1)),this.trackSuccessfulSignUp()}catch(e){this.handleSignUpFail(e)}else{n||(0,K.Kp)("Forced to create languageless user account despite being asked not to.");try{yield(0,ut.$C)(s),yield t((0,Te.eY)()),this.trackSuccessfulSignUp()}catch(e){this.handleSignUpFail(e)}}})),this.trackSuccessfulSignUp=()=>ft(this,void 0,void 0,(function*(){const{dispatch:e,modalOptions:{limitRedirect:t,via:n},gildedStoriesCount:o}=this.props;(0,H.j)("register",{num_gilded_stories:o,successful:!0,through:"email",via:n}),(0,i.SX)({event:"sign_up"}),this.handleGeneralSuccess(!1,t),yield e(at.M())})),this.handleUseAnotherAccount=()=>{const{modalOptions:{via:e}}=this.props;(0,H.j)("sign_in_tap",{target:"use_another_account",via:e}),this.clearAlternateView()},this.handleSignUpFail=e=>{var t,n;const{modalOptions:{via:i},gildedStoriesCount:o}=this.props,s=(0,ge.IZ)(e)&&(null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.details);throw(0,H.j)("register",{num_gilded_stories:o,successful:!1,through:"email",via:i}),s?(0,ut.lV)(s):new ut.Wj(!1,{})},this.facebookSignup=()=>ft(this,void 0,void 0,(function*(){const{dispatch:e,history:t,modalOptions:{allowLanguagelessUser:n,isSignIn:i,limitRedirect:o,redirectPath:s="/",trackingProps:r,via:a},gildedStoriesCount:l}=this.props;this.setState({errors:{},submitting:"facebook"});try{(0,H.j)(i?"sign_in_tap":"registration_tap",Object.assign({target:"facebook",via:a},r));const c=yield(0,dt.k3)({allowLanguagelessUser:n,dispatch:e,gildedStoriesCount:l,history:t,onLoginSuccess:this.handleLoginSuccess,redirectPath:s,via:a});this.handleGeneralSuccess(c,o)}catch(e){this.setState({submitting:!1}),i||this.handleRegisterFailure("facebook")}})),this.clearAlternateView=()=>{this.setState({alternateView:null}),(0,_t.ub)()},this.googleSignup=()=>ft(this,void 0,void 0,(function*(){const{dispatch:e,modalOptions:{allowLanguagelessUser:t,isSignIn:n,limitRedirect:i,redirectPath:o="/",trackingProps:s,via:r},gildedStoriesCount:a,history:l}=this.props;this.setState({errors:{},submitting:"google"});try{(0,H.j)(n?"sign_in_tap":"registration_tap",Object.assign({target:"google",via:r},s));const c=yield(0,mt.Fc)({allowLanguagelessUser:t,dispatch:e,gildedStoryCount:a,history:l,onLoginSuccess:this.handleLoginSuccess,redirectPath:o,via:r});this.handleGeneralSuccess(c,i)}catch(e){this.setState({errors:{social:(0,tt.H8)(19737)},submitting:!1,useImprovedErrorMessages:!0}),n||this.handleRegisterFailure("google")}})),this.handleAgeChange=()=>{this.setState({ageRestricted:parseInt(this.state.fields.age,10)<this.props.config.ageRestrictionLimit})},this.validateUsername=()=>ft(this,void 0,void 0,(function*(){if(!this.state.fields.username||!this.state.ageRestricted)return!0;const e=this.state.fields.username;try{if(yield this.memoizeUsernameValidate(e),this.mounted)return this.setState((t=>{if(e===t.fields.username){const e=t.errors,{username:n}=e;return{errors:yt(e,["username"]),isUsernameVerified:!0}}return null})),!0}catch(t){if(t instanceof ut.Wj)return this.mounted&&this.setState((n=>e===n.fields.username?{errors:t.errorFields,useImprovedErrorMessages:t.useImprovedErrorMessages}:null)),!1;throw t}})),this.handleResetUsernameError=()=>{this.setState((e=>{const t=e.errors,{username:n}=t;return{errors:yt(t,["username"]),isUsernameVerified:!0}}))},this.handleFieldChange=(e,t)=>{this.setState((n=>({fields:Object.assign(Object.assign({},n.fields),{[e]:t}),isUsernameVerified:"username"!==e&&n.isUsernameVerified})))},this.handleGeneralSuccess=(e,t)=>{const{history:n,modalOptions:{closeModalOnLogin:i=!0,goBack:o,isSignIn:s}}=this.props;s||(0,H.j)("registration_tap",{}),this.mounted&&!s&&i&&this.finishSignInOrSignUp(),s&&(e||t||n.push("/welcome")),e&&"no-redirects"===t||null==o||o(i?void 0:()=>this.finishSignInOrSignUp())},this.finishSignInOrSignUp=()=>{const{dispatch:e}=this.props;e({options:void 0,type:"TOGGLE_MODAL"})},this.handleLogin=e=>ft(this,void 0,void 0,(function*(){const{dispatch:t,history:n,isOnline:i,modalOptions:{closeModalOnLogin:o=!0,goBack:s,redirectPath:r="/",trackingProps:a,via:l}}=this.props,{alternateView:c}=this.state,u=c&&"welcomeBack"===c.type&&this.prefilledLoginData&&this.prefilledLoginData.email?{identifier:this.prefilledLoginData.email,password:e.password}:e;this.setState({loginAttempts:Object.assign(Object.assign({},this.state.loginAttempts),{showEmailSentNotification:!1})}),yield(0,H.j)("sign_in_tap",Object.assign({target:"sign_in",via:l},a));try{yield(0,ut.IS)(u,i),yield t((0,Te.eY)(void 0,void 0,(e=>{(0,_t.oV)("email",e)}))),o&&t({options:void 0,type:"TOGGLE_MODAL"}),(0,X.KE)(window.location.pathname)||n.push(r),null==s||s(o?void 0:()=>{t({options:void 0,type:"TOGGLE_MODAL"})})}catch(e){if(i&&u.identifier.trim()){const e=yield(0,_t.gT)(u.identifier);if(e&&(e.hasFacebook||e.hasGoogle)){const t=e.hasGoogle?"google":"facebook";return(0,H.j)("sign_in_load",Object.assign({screen:`sign_in_with_${t}`,via:l},a)),void this.setState({alternateView:{name:e.name,picture:e.picture,platform:t,type:"createdWithSocial"},submitting:!1})}}throw e}})),this.handleLoginSuccess=()=>{const{dispatch:e,history:t,modalOptions:{closeModalOnLogin:n=!0,limitRedirect:i,redirectPath:o="/"}}=this.props;n&&e({options:void 0,type:"TOGGLE_MODAL"}),i||(0,X.KE)(window.location.pathname)||t.push(o)},this.handleRegisterFailure=e=>{const{modalOptions:{via:t},gildedStoriesCount:n}=this.props;(0,H.j)("registration_tap",{target:"create_account"}),(0,H.j)("register",{num_gilded_stories:n,successful:!1,through:e,via:t})},this.handleSubmit=e=>ft(this,void 0,void 0,(function*(){const{modalOptions:{isSignIn:t}}=this.props;if(e.preventDefault(),!this.state.ageRestricted||this.state.isUsernameVerified||(yield this.validateUsername())){this.setState({errors:{},submitting:"email"});try{t?(ht.Z.start("login_success_or_fail"),yield this.handleLogin(this.state.fields)):(ht.Z.start("registration_success_or_fail"),(0,H.j)("registration_tap",{target:"create_account"}),yield this.emailSignup(this.state.fields))}catch(e){if(this.setState({submitting:!1}),!(e instanceof ut.Wj))throw e;this.setState({errors:e.errorFields,useImprovedErrorMessages:e.useImprovedErrorMessages})}finally{t?ht.Z.finish("login_success_or_fail"):ht.Z.finish("registration_success_or_fail")}}})),this.handleToggleForm=()=>{const{dispatch:e,modalOptions:t}=this.props,{isSignIn:n,trackingProps:i,via:o}=t;n?(0,H.j)("sign_in_tap",Object.assign({target:"sign_up",via:o},i)):(0,H.j)("registration_tap",{target:"sign_in"}),e({options:Object.assign(Object.assign({},t),{isSignIn:!n}),type:"TOGGLE_MODAL"})}}componentDidMount(){(0,dt.L8)(),(0,pt.d)();const{history:e,modalOptions:{isFamilyPlan:t,isSignIn:n,trackingProps:i,via:o}}=this.props;if(this.mounted=!0,n){this.prefilledLoginData=(0,_t.MG)();const e=n&&!t&&!!this.prefilledLoginData;if(e){if("email"===this.prefilledLoginData.type)(0,H.j)("sign_in_load",Object.assign({screen:"email_prefilled",via:o},i));else if("social"===this.prefilledLoginData.type){const e=this.prefilledLoginData.hasGoogle&&this.prefilledLoginData.hasFacebook?"google_and_facebook":this.prefilledLoginData.hasGoogle?"google":"facebook";(0,H.j)("sign_in_load",Object.assign({screen:`sign_in_with_${e}`,via:o},i))}}else(0,H.j)("sign_in_load",Object.assign({screen:"sign_in_modal",via:o},i));this.setState({alternateView:e?{title:(0,tt.H8)(1086),type:"welcomeBack"}:null})}else(0,H.j)("registration_load",{screen:"sign_in_modal"});const s=(0,gt.Lm)();"true"!==s.isLoggingIn&&e.replace({pathname:window.location.pathname,search:(0,gt.Vp)(Object.assign(Object.assign({},s),{isLoggingIn:!0}))})}componentWillUnmount(){this.mounted=!1;const{history:e,modalOptions:{isSignIn:t,onBeforeClose:n,via:i}}=this.props;t?(0,H.j)("sign_in_tap",{target:"dismiss",via:i}):(0,H.j)("registration_tap",{target:"dismiss"}),null==n||n();const o=(0,gt.Lm)(),{isLoggingIn:s}=o,r=yt(o,["isLoggingIn"]);"true"===s&&e.replace({pathname:window.location.pathname,search:(0,gt.Vp)(r)})}render(){const{dispatch:e,isDesktop:t,modalOptions:{allowLanguagelessUser:n,closeModalOnLogin:i=!0,goBack:o,isFamilyPlan:s,onCloseButtonClick:a,isSignIn:l,limitRedirect:c,redirectPath:u="/",removeSignUp:d,renderHeader:p,renderSubtitle:m,renderTitle:g,requireGoogle:h,trackingProps:_,via:v}}=this.props,{ageRestricted:f,alternateView:y,errors:E,fields:b,submitting:S,useImprovedErrorMessages:w}=this.state,T=(0,vt.P_)(this.props.config),I=l&&y&&"welcomeBack"===y.type,k=I&&y.title||"",C=l&&y&&"createdWithSocial"===y.type,R=C&&y,O=I?1032:l?35497:11927,N=r.createElement(Pe.Z,Object.assign({},(0,et._q)(ot.V.RegisterButton),{className:lt.button,disabled:I?void 0:!1!==S&&"email"!==S,key:O,submitting:"email"===S,type:"submit",unstyledDisabled:!I,variant:"solid"}),(0,tt._i)(O)),L=l&&w&&(E.password||E.identifier||E.connectivity||E.social)?r.createElement(rt,null,E.identifier,E.password,E.connectivity,E.social):null,P=(()=>h?r.createElement(Tt,{isSignIn:l,onGoogleClick:this.googleSignup,renderHeader:p,renderSubtitle:m,renderTitle:g,submitting:S}):I&&this.prefilledLoginData?r.createElement(wt,{dispatch:e,errors:E,header:null==p?void 0:p(!0),identifier:b.identifier,lastLoginType:this.prefilledLoginData.type,name:this.prefilledLoginData.name,onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onIdentifierChange:e=>this.handleFieldChange("identifier",e),onPasswordChange:e=>this.handleFieldChange("password",e),onUseAnotherAccount:this.handleUseAnotherAccount,password:b.password,picture:this.prefilledLoginData.picture,registerButton:N,signInErrors:L,submitting:S,title:k,via:v}):C?r.createElement(It,{name:R.name,onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onUseAnotherAccount:this.handleUseAnotherAccount,picture:R.picture,platform:R.platform,submitting:S}):r.createElement(kt,{age:b.age,ageRestricted:f,dispatch:e,email:b.email,errors:E,focusPasswordField:!1,identifier:b.identifier,isFamilyPlan:s,isSignIn:l,isUGCDisabled:T,name:b.name,onAgeBlur:this.handleAgeChange,onAgeChange:e=>this.handleFieldChange("age",e),onEmailChange:e=>this.handleFieldChange("email",e),onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onIdentifierChange:e=>this.handleFieldChange("identifier",e),onNameChange:e=>this.handleFieldChange("name",e),onPasswordChange:e=>this.handleFieldChange("password",e),onResetError:this.handleResetUsernameError,onUsernameBlur:this.validateUsername,onUsernameChange:e=>this.handleFieldChange("username",e),password:b.password,registerButton:N,renderHeader:p,renderTitle:g,showEmailField:!0,signInErrors:L,submitting:S,username:b.username,via:v}))(),A=()=>{null==a||a(),e({options:void 0,type:"TOGGLE_MODAL"})},D=l?(0,tt._i)(19234):(0,tt._i)(9109);return r.createElement("div",{className:lt["modal-wrapper"]},t?r.createElement(r.Fragment,null,r.createElement("div",{className:lt["left-controls"]},r.createElement("button",{className:lt["close-button"],onClick:A},r.createElement("img",{src:"https://d35aaqx5ub95lt.cloudfront.net/images/x.svg"}))),r.createElement("div",{className:lt["right-controls"]},d?null:r.createElement(Pe.Z,Object.assign({},(0,et._q)(ot.V.SignUpButton),{color:"macaw",onClick:this.handleToggleForm,variant:"stroke"}),D))):r.createElement("div",{className:lt["right-controls"]},r.createElement("button",{className:lt["close-button"],onClick:A},r.createElement("img",{src:"https://d35aaqx5ub95lt.cloudfront.net/images/x.svg"}))),r.createElement("form",{className:lt.modal,method:"POST",noValidate:!0,onSubmit:this.handleSubmit},P,r.createElement("div",{className:lt.footer},r.createElement("div",{className:lt["terms-and-privacy"]},(0,tt._i)(18519)),t?null:l?r.createElement("div",{className:lt["no-account"]},(0,tt._i)(11114),r.createElement("span",Object.assign({},(0,et._q)(ot.V.SignUpLink),{className:lt["no-account-link"],onClick:()=>{(0,H.j)("sign_in_tap",Object.assign({target:"sign_up",via:v},_)),e({options:{allowLanguagelessUser:n,closeModalOnLogin:i,goBack:o,isSignIn:!1,limitRedirect:c,name:Ge.tl.SignInUp,redirectPath:u,renderHeader:p,renderSubtitle:m,renderTitle:g,via:v},type:"TOGGLE_MODAL"})}}),(0,tt._i)(19234))):r.createElement("div",{className:lt["no-account"]},(0,tt._i)(6220),r.createElement("span",{className:lt["no-account-link"],onClick:()=>{(0,H.j)("registration_tap",{target:"sign_in"}),e({options:{allowLanguagelessUser:n,closeModalOnLogin:i,goBack:o,isSignIn:!0,limitRedirect:c,name:Ge.tl.SignInUp,redirectPath:u,renderHeader:p,renderSubtitle:m,renderTitle:g,via:v},type:"TOGGLE_MODAL"})}},(0,tt._i)(3830))))))}}const Rt=()=>{const e=(0,pe.Fx)(ce.Mb),t=(0,pe.Fx)(ce.$4),n=(0,pe.Fx)(ce.YW),i=(0,pe.tX)(),o=(0,c.k6)(),s=(0,pe.Fx)(Ie.A9).storyListing;return r.createElement(Fe.Z,{hideClose:!0,modalName:Ge.tl.SignInUp,onDismiss:()=>{const e=(0,gt.vl)(window.location.search);o.replace({search:(0,gt.Vp)(d.CE(e,["sign-in","sign-up","register"]))}),i({options:void 0,type:"TOGGLE_MODAL"})}},(({modalOptions:a,onDismiss:l})=>r.createElement(Ct,{config:e,dispatch:i,gildedStoriesCount:(0,M.rc)(s),history:o,isDesktop:t,isOnline:n,modalOptions:a,onDismiss:l})))},Ot=({drawer:e})=>{const[t,n]=r.useState(0),i=r.useRef(),o=r.useRef(),s=(0,W.Xr)(null!=e?e:i.current);return r.useEffect((()=>{void 0!==e&&e===i.current&&void 0===o.current&&n((e=>e+1)),i.current=null!=e?e:i.current,o.current=e})),s?r.createElement(r.Suspense,{fallback:null},r.createElement(s,{key:t})):null};var Nt=n(81149),Lt=n(88268),Pt=n(1398),At=n(26506),Dt=n(89803),xt=n(20028);const Mt=(0,Pt.Z)((()=>n.e(7332).then(n.bind(n,17332)))),Ut=(0,Pt.Z)((()=>n.e(4695).then(n.bind(n,14695)))),Ft={getConditionAndTreat:Nt.j6},jt=({children:e})=>{const t=(0,pe.tX)(),n=(0,pe.Fx)((e=>e.ui.drawer)),i=(0,pe.Fx)((e=>(0,xt.ms)((0,ce.np)(e)))),s=(0,pe.Fx)((e=>{var t;return"TYPE_TO_SELECT"===(null===(t=e.ui.drawer)||void 0===t?void 0:t.name)?e.ui.drawer.spotlight:void 0})),l=(0,pe.Fx)((e=>e.ui.viewportHeight)),u=(0,pe.Fx)((e=>e.ui.viewportWidth)),p=(0,pe.Fx)((e=>(0,ce.Sg)(e)&&e.ui.isModalReallyOpen)),m=(0,pe.Fx)((e=>void 0!==e.ui.drawer||void 0!==e.ui.modal&&!(0,Ge.rm)(e.ui.modal.name)&&e.ui.isModalReallyOpen||e.ui.isRequestingNotificationPermission)),g=(()=>{const e=(0,pe.tX)(),t=(0,pe.Fx)((e=>e.brb.ignoreUntil)),n=(0,pe.Fx)((e=>e.brb.resetAt)),i=(0,pe.Fx)((e=>e.brb.status)),o=r.useRef(),s=r.useRef(i);return o.current=o=>ve(void 0,void 0,void 0,(function*(){if(void 0!==t&&Date.now()<t)return;if("enabled"===i&&"visible"!==document.visibilityState)return;const s=(0,_e.J9)()||(0,se.rV)(se.Qt.DisableBigRedButton)?"disabled":yield ge.Uw.getStatus();o.isCancelled()||(i!==s?"enabled"===s?(console.warn("Enabling maintenance mode."),e({resetAt:Date.now()+1e3*(0,f.dz)({hours:5,minutes:d.MX(0,5)}),type:"brb/ENABLED"})):(console.warn("Disabling maintenance mode."),e({type:"brb/DISABLED"})):void 0!==n&&Date.now()>=n&&(console.warn("Disabling maintenance mode automatically after 5 hours."),e({ignoreUntil:Date.now()+1e3*(0,f.dz)({hours:12}),type:"brb/IGNORED"})))})),s.current=i,r.useEffect((()=>{const e=new he.$B,t=()=>ve(void 0,void 0,void 0,(function*(){var n;e.isCancelled()||(yield null===(n=o.current)||void 0===n?void 0:n.call(o,e),setTimeout(t,1e3*d.MX(30,"enabled"===s.current?300:60)))}));return t(),()=>e.cancel()}),[]),i})(),h=(0,pe.Tb)();(0,fe.Z)(),(()=>{const e=(0,pe.CC)(),t=(0,c.k6)(),n=(0,c.TH)(),[i]=r.useState(Date.now());r.useEffect((()=>{let s=n;const r=t.listen((n=>{const r=`${s.pathname}${s.search}`,a=`${n.pathname}${n.search}`;(0,o.bP)(`route "${r}" -> "${a}"`,[{data:s,name:"from"},{data:n,name:"to"}]),(0,K.GN)(r,a);let l=n.pathname;const c=new URLSearchParams(n.search);if((0,X.fu)(l))return console.log("Path owned by old web; refreshing"),void(0,X.Zs)();if((Date.now()-i)/36e5>72)return console.log("Window too old; refreshing"),void(0,X.Zs)();if((0,O.Pc)()){let n=!1;const i=(0,ce.Lm)(e.getState()),o=(0,ce.iH)(e.getState());!i||o||(0,X.v$)(l)||(console.log(`Redirecting "${l}" to "/welcome" to select learning language`),l="/welcome",n=!0),c.has("isLoggingIn")&&(c.delete("isLoggingIn"),n=!0),n&&t.replace({pathname:l,search:c.toString()})}s=n}));return()=>{r()}}),[])})(),(({disabled:e})=>{r.useEffect((()=>{const t=d.P2((()=>{if(!e){const e=Date.now(),t=e-ye;ye=e,H.sF(t)}}),1e3,{trailing:!0});return document.addEventListener("mousedown",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}}),[e]),r.useEffect((()=>{const t=d.P2((()=>{if(!e){const e={};let t=0;Object.entries(H.dU).forEach((([n,i])=>{t+=i,e[`engagement_type_${n}`]=Math.floor(i/1e3)})),e.total_time_spent=Math.floor(t/1e3),H.j("time_spent",e),H.zS()}}),6e4,{trailing:!0});return document.addEventListener("mousedown",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}}),[e])})({disabled:"enabled"===g}),(()=>{const e=r.useRef((0,f.Ml)()),[t,n]=r.useState((0,O.Pc)());r.useEffect((()=>{const e=d.P2((()=>{(0,O.Pc)()&&"/reset_password"!==window.location.pathname&&H.j("user_active",{product:"learning_app"})}),Ee,{trailing:!1});return be.forEach((t=>{document.addEventListener(t,e)})),()=>{be.forEach((t=>{document.removeEventListener(t,e)}))}}),[]),r.useEffect((()=>{const i=()=>{setTimeout((()=>{H.Bf({activity_trigger:"user_interaction"})&&(e.current=(0,f.Ml)())}),500)},o=d.P2(i,Ee,{trailing:!1}),s=()=>{(0,f.Ml)()!==e.current&&i()},r=()=>{t!==(0,O.Pc)()&&(n((0,O.Pc)()),i())};return be.forEach((e=>{document.addEventListener(e,o),document.addEventListener(e,s),document.addEventListener(e,r)})),()=>{be.forEach((e=>{document.removeEventListener(e,o),document.removeEventListener(e,s),document.removeEventListener(e,r)}))}}),[t])})(),(({disabled:e})=>{const t=(0,pe.tX)(),n=(0,pe.CC)();r.useEffect((()=>{if(!e){const e=(0,f.nC)((()=>{try{(0,O.Jb)()}catch(t){return void clearInterval(e)}const i=n.getState();(0,ce.is)(i)||Ie.Uy(i)||(t((0,Te.eY)()),t((0,Se.i)()),t((0,we.i)()))}),36e5);return()=>clearInterval(e)}}),[e])})({disabled:"enabled"===g});const[_,y]=r.useState("enabled"===g);return r.useEffect((()=>{"disabled"===g&&(t((0,Se.i)()),t((0,we.i)()),t((0,Te.eY)(!0)))}),[]),r.useEffect((()=>{if("enabled"===g)return y(!0),()=>{(0,X.Zs)()}}),[g]),r.useEffect((()=>{if(m)return t({type:"DIMMED_OVERLAY_OPENED"}),()=>{t({type:"DIMMED_OVERLAY_CLOSED"})}}),[m]),r.useEffect((()=>{if((0,v.Au)()||i){const e=e=>{(0,Lt.b)(e,"debug")&&t({options:{name:Ge.tl.Debug},type:"TOGGLE_MODAL"})};return At.U.addListener(document,"keydown",e),()=>At.U.removeListener(document,"keydown",e)}}),[i]),r.useEffect((()=>{const e=()=>t({type:"GO_OFFLINE"}),n=()=>t({type:"COME_ONLINE"});return window.addEventListener("offline",e),window.addEventListener("online",n),()=>{window.removeEventListener("offline",e),window.removeEventListener("online",n)}}),[]),r.useEffect((()=>{const e=d.Ds((()=>t({height:window.innerHeight,type:"RESIZE_WINDOW",width:window.innerWidth})),250);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),r.useEffect((()=>(window.addEventListener("beforeunload",Dt.u6),window.addEventListener("unload",Dt.u6),()=>{window.removeEventListener("beforeunload",Dt.u6),window.removeEventListener("unload",Dt.u6)})),[]),_?r.createElement(r.Suspense,{fallback:null},r.createElement(Ut,null)):r.createElement(ae,null,r.createElement(ee.Z.Provider,{value:Ft},r.createElement(te.Z.Provider,{value:h},r.createElement(me,null),e,r.createElement(Ot,{drawer:null==n?void 0:n.name}),(0,a.createPortal)(r.createElement(r.Fragment,null,s?r.createElement(ie.Z,Object.assign({animateOnMount:m,className:"z_dyN",height:l,isVisible:m,width:u},s)):r.createElement(ne.Z,{animateOnMount:m,isVisible:m},r.createElement(le.Z,null)),r.createElement(ne.Z,{animateOnMount:p,isVisible:p},r.createElement(le.Z,{isDrawerOnModalOverlay:!0}))),document.getElementById("overlays")),r.createElement(Ce,null,r.createElement(Mt,null)),r.createElement(Ce,null,r.createElement(ze,null)),r.createElement(Rt,null))))},Bt=(0,Pt.Z)((()=>n.e(6710).then(n.bind(n,56710)))),Ht=(0,Pt.Z)((()=>n.e(7017).then(n.bind(n,57017)))),Gt=["/p","/leaderboard"],Vt=[r.createElement(c.AW,{component:Bt,key:"deeplink",path:Gt}),r.createElement(c.AW,{component:Ht,key:"logout",path:"/logout"})];const Zt=(0,Pt.Z)((()=>Promise.all([n.e(3),n.e(2668),n.e(9681),n.e(9993),n.e(4274),n.e(4045),n.e(9246)]).then(n.bind(n,80439)))),Wt=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,4293)))),zt=(0,Pt.Z)((()=>n.e(1436).then(n.bind(n,61436)))),$t=(0,Pt.Z)((()=>n.e(2193).then(n.bind(n,22193)))),Yt=(0,Pt.Z)((()=>n.e(2177).then(n.bind(n,12177)))),Kt=(0,Pt.Z)((()=>n.e(8962).then(n.bind(n,28962)))),qt=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(7466),n.e(4675),n.e(2473),n.e(1826),n.e(987)]).then(n.bind(n,80306)))),Jt=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(7466),n.e(4675),n.e(2473),n.e(1826),n.e(8956)]).then(n.bind(n,98968)))),Xt=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(7466),n.e(7424)]).then(n.bind(n,10599)))),Qt=(0,Pt.Z)((()=>Promise.all([n.e(407),n.e(783),n.e(2473),n.e(4045),n.e(4466),n.e(1272)]).then(n.bind(n,86411)))),en=(0,Pt.Z)((()=>Promise.all([n.e(8211),n.e(2306)]).then(n.bind(n,47190)))),tn=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,7283)))),nn=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(7493),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(875),n.e(4274),n.e(6732),n.e(2615),n.e(421),n.e(5993)]).then(n.bind(n,45993)))),on=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,65637)))),sn=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,41898)))),rn=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,71084)))),an=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,82116)))),ln=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(407),n.e(3),n.e(2668),n.e(5036),n.e(7466),n.e(4675),n.e(783),n.e(9993),n.e(3007),n.e(4274),n.e(6732),n.e(2615),n.e(7507)]).then(n.bind(n,89267)))),cn=(0,Pt.Z)((()=>n.e(9998).then(n.bind(n,69998)))),un=(0,Pt.Z)((()=>n.e(9165).then(n.bind(n,99165)))),dn=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(7466),n.e(3695)]).then(n.bind(n,23695)))),pn=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(7466),n.e(4675),n.e(174)]).then(n.bind(n,34675)))),mn=(0,Pt.Z)((()=>n.e(730).then(n.bind(n,40730)))),gn=(0,Pt.Z)((()=>Promise.all([n.e(9804),n.e(3914)]).then(n.bind(n,29804)))),hn=(0,Pt.Z)((()=>n.e(4951).then(n.bind(n,14951)))),_n=(0,Pt.Z)((()=>n.e(4127).then(n.bind(n,94127)))),vn=(0,Pt.Z)((()=>n.e(186).then(n.bind(n,50186)))),fn=(0,Pt.Z)((()=>n.e(8223).then(n.bind(n,18223)))),yn=(0,Pt.Z)((()=>n.e(2231).then(n.bind(n,52231)))),En=(0,Pt.Z)((()=>Promise.all([n.e(8211),n.e(1745)]).then(n.bind(n,50581)))),bn=(0,Pt.Z)((()=>n.e(6387).then(n.bind(n,36387)))),Sn=(0,Pt.Z)((()=>n.e(298).then(n.bind(n,20298)))),wn=(0,Pt.Z)((()=>n.e(5185).then(n.bind(n,65185)))),Tn=(0,Pt.Z)((()=>n.e(4152).then(n.bind(n,24152)))),In=(0,Pt.Z)((()=>n.e(7520).then(n.bind(n,67520)))),kn=(0,Pt.Z)((()=>n.e(9707).then(n.bind(n,19707)))),Cn=(0,Pt.Z)((()=>n.e(949).then(n.bind(n,70949)))),Rn=(0,Pt.Z)((()=>n.e(1348).then(n.bind(n,41348)))),On=(0,Pt.Z)((()=>n.e(1751).then(n.bind(n,31751)))),Nn=(0,Pt.Z)((()=>n.e(5862).then(n.bind(n,5862)))),Ln=(0,Pt.Z)((()=>n.e(6820).then(n.bind(n,46820)))),Pn=(0,Pt.Z)((()=>n.e(4772).then(n.bind(n,4772)))),An=(0,Pt.Z)((()=>n.e(3026).then(n.bind(n,93026)))),Dn=(0,Pt.Z)((()=>n.e(6150).then(n.bind(n,16150)))),xn=(0,Pt.Z)((()=>n.e(4658).then(n.bind(n,44658)))),Mn=(0,Pt.Z)((()=>n.e(1207).then(n.bind(n,41207)))),Un=(0,Pt.Z)((()=>n.e(7451).then(n.bind(n,27451)))),Fn=(0,Pt.Z)((()=>n.e(6782).then(n.bind(n,26782)))),jn=(0,Pt.Z)((()=>n.e(6001).then(n.bind(n,46001)))),Bn=(0,Pt.Z)((()=>n.e(288).then(n.bind(n,40288)))),Hn=(0,Pt.Z)((()=>n.e(5116).then(n.bind(n,35116)))),Gn=(0,Pt.Z)((()=>Promise.all([n.e(4872),n.e(5187)]).then(n.bind(n,65487)))),Vn=(0,Pt.Z)((()=>Promise.all([n.e(4872),n.e(8053)]).then(n.bind(n,63933)))),Zn=(0,Pt.Z)((()=>n.e(1316).then(n.bind(n,46411)))),Wn=(0,Pt.Z)((()=>Promise.all([n.e(4228),n.e(3580)]).then(n.bind(n,44819)))),zn=(0,Pt.Z)((()=>n.e(8396).then(n.bind(n,68396)))),$n=(0,Pt.Z)((()=>n.e(4702).then(n.bind(n,24702)))),Yn=(0,Pt.Z)((()=>n.e(6202).then(n.bind(n,56202)))),Kn=(0,Pt.Z)((()=>n.e(3827).then(n.bind(n,83827)))),qn=(0,Pt.Z)((()=>n.e(7957).then(n.bind(n,97957)))),Jn=(0,Pt.Z)((()=>n.e(3473).then(n.bind(n,13473)))),Xn=(0,Pt.Z)((()=>Promise.resolve().then(n.bind(n,54452)))),Qn=(0,Pt.Z)((()=>n.e(7872).then(n.bind(n,57872)))),ei=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(4243),n.e(7181),n.e(9804),n.e(2437)]).then(n.bind(n,94973)))),ti=(0,Pt.Z)((()=>Promise.all([n.e(4243),n.e(1494)]).then(n.bind(n,10843)))),ni=(0,Pt.Z)((()=>Promise.all([n.e(4243),n.e(1806)]).then(n.bind(n,85180)))),ii=(0,Pt.Z)((()=>Promise.all([n.e(7181),n.e(2982)]).then(n.bind(n,96369)))),oi=(0,Pt.Z)((()=>n.e(6036).then(n.bind(n,26036)))),si=(0,Pt.Z)((()=>Promise.all([n.e(4243),n.e(1106)]).then(n.bind(n,94629)))),ri=(0,Pt.Z)((()=>n.e(2392).then(n.bind(n,72392)))),ai=(0,Pt.Z)((()=>Promise.all([n.e(4243),n.e(1235)]).then(n.bind(n,16855)))),li=(0,Pt.Z)((()=>n.e(411).then(n.bind(n,87596)))),ci=(0,Pt.Z)((()=>n.e(411).then(n.bind(n,32947)))),ui=(0,Pt.Z)((()=>Promise.all([n.e(407),n.e(783),n.e(4466),n.e(8115)]).then(n.bind(n,75064)))),di=(0,Pt.Z)((()=>Promise.all([n.e(407),n.e(3),n.e(7493),n.e(783),n.e(3007),n.e(875),n.e(421),n.e(5719)]).then(n.bind(n,569)))),pi=(0,Pt.Z)((()=>n.e(8837).then(n.bind(n,48837)))),mi=(0,Pt.Z)((()=>n.e(8517).then(n.bind(n,18517)))),gi=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(3485),n.e(7466),n.e(4675),n.e(6732),n.e(5342)]).then(n.bind(n,59709)))),hi=(0,Pt.Z)((()=>n.e(811).then(n.bind(n,20811)))),_i=e=>e.flatMap((e=>{if(void 0===e.subroutes)return e;const{components:t=[],exact:n=!1,path:i="",props:o={}}=e;return _i(e.subroutes).map((({components:e=[],exact:s=!1,path:r="",props:a={}})=>({components:[...t,...e],exact:n||s,path:`${i}${r}`,props:Object.assign(Object.assign({},o),a)})))})),vi=!0,fi=!0,yi={noMobileTabbar:vi,noMobileTopbar:fi},Ei={noDesktopTopbar:!0,noMobileTabbar:vi,noMobileTopbar:fi},bi={noContainer:!0,noDesktopTopbar:!0,noMobileTabbar:vi,noMobileTopbar:fi},Si=({appProps:e,components:t,routerProps:n})=>{const i=r.useMemo((()=>{const e=[Zt,...t].filter(Pt.N).filter((e=>!e.hasLoaded()));return 0===e.length?void 0:Promise.all(e.map((e=>e.preload())))}),[t]),o=(0,pe.PX)([],(()=>{return e=void 0,n=void 0,s=function*(){return yield i,t},new((o=void 0)||(o=Promise))((function(t,i){function r(e){try{l(s.next(e))}catch(e){i(e)}}function a(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}l((s=s.apply(e,n||[])).next())}));var e,n,o,s}),[i]),s=void 0===i?t:o,a=(()=>{if(t===s)return t;const e=t.findIndex(((e,t)=>e!==s[t]));return 0!==s.length&&-1===e?t:t.slice(0,e)})();return r.createElement(Zt,Object.assign({},n,e),a.reduceRight(((e,t)=>r.createElement(t,Object.assign({},n),e)),null))},wi=(0,Pt.Z)((()=>n.e(6557).then(n.bind(n,36557)))),Ti=[r.createElement(c.AW,{component:wi,key:"debug",path:"/debug/:splat*"})],Ii=({target:e})=>(r.useEffect((()=>{window.location.replace(e)}),[]),null),ki=[r.createElement(c.AW,{key:"404",path:"/404",render:()=>r.createElement(Ii,{target:X.Oy})}),r.createElement(c.AW,{key:"careers",path:["/careers","/jobs"],render:()=>r.createElement(Ii,{target:"https://careers.duolingo.com"})}),r.createElement(c.AW,{key:"events",path:"/events",render:()=>r.createElement(Ii,{target:"https://events.duolingo.com?source=main"})}),r.createElement(c.AW,{key:"schools",path:"/schools",render:()=>r.createElement(Ii,{target:"https://schools.duolingo.com?source=main"})}),r.createElement(c.AW,{key:"press",path:"/press",render:()=>r.createElement(Ii,{target:"https://press.duolingo.com"})}),r.createElement(c.AW,{key:"research",path:["/effectiveness-study","/research"],render:()=>r.createElement(Ii,{target:"https://research.duolingo.com"})}),r.createElement(c.AW,{key:"troubleshooting",path:"/troubleshooting",render:()=>r.createElement(Ii,{target:`/topic/${window.duo.troubleshootingForumId||647}`})})],Ci=(0,Pt.Z)((()=>n.e(8718).then(n.bind(n,98718)))),Ri=(0,Pt.Z)((()=>n.e(6676).then(n.bind(n,66676)))),Oi=(0,Pt.Z)((()=>n.e(8496).then(n.bind(n,18496)))),Ni=(0,Pt.Z)((()=>n.e(4922).then(n.bind(n,84922)))),Li=(0,Pt.Z)((()=>n.e(5906).then(n.bind(n,35906)))),Pi=(0,Pt.Z)((()=>n.e(2401).then(n.bind(n,42401)))),Ai=(0,Pt.Z)((()=>n.e(6734).then(n.bind(n,11152)))),Di=(0,Pt.Z)((()=>Promise.all([n.e(1206),n.e(5199)]).then(n.bind(n,2746)))),xi=(0,Pt.Z)((()=>Promise.all([n.e(1206),n.e(7452)]).then(n.bind(n,83101)))),Mi=(0,Pt.Z)((()=>n.e(7550).then(n.bind(n,97550)))),Ui=(0,Pt.Z)((()=>n.e(4181).then(n.bind(n,4181)))),Fi=(0,Pt.Z)((()=>n.e(3968).then(n.bind(n,33968)))),ji=(0,Pt.Z)((()=>Promise.all([n.e(1206),n.e(8050)]).then(n.bind(n,61206)))),Bi=(0,Pt.Z)((()=>Promise.all([n.e(2013),n.e(961),n.e(7068)]).then(n.bind(n,77068)))),Hi=(0,Pt.Z)((()=>n.e(6897).then(n.bind(n,17136)))),Gi=(0,Pt.Z)((()=>n.e(2041).then(n.bind(n,42041)))),Vi=[r.createElement(c.AW,{component:Ui,key:"abc",path:"/abc"}),r.createElement(c.AW,{component:Fi,key:"math",path:"/math"}),r.createElement(c.AW,{component:Ci,key:"bango",path:"/bango/:reseller/:token"}),r.createElement(c.AW,{component:Ri,key:"duocon",path:"/duocon"}),r.createElement(c.AW,{component:Oi,key:"duocon2020",path:"/duocon2021"}),r.createElement(c.AW,{component:Ni,key:"duocon2020",path:"/duocon2020"}),r.createElement(c.AW,{component:Li,key:"duocon2019",path:"/duocon2019"}),r.createElement(c.AW,{component:Pi,key:"efficacy",path:"/efficacy"}),r.createElement(c.AW,{component:Ai,key:"evergreen",path:"/2022-campaigns"}),r.createElement(c.AW,{component:Bi,key:"weekly-report",path:"/weekly-report"}),r.createElement(c.AW,{component:Hi,key:"share-direct-sm",path:"/share-direct/sm"}),r.createElement(c.AW,{component:Hi,key:"share-sm",path:"/share/sm"}),r.createElement(c.AW,{component:Gi,key:"china-apk-download",path:"/apk-download"}),r.createElement(c.l_,{from:"/learningseason",key:"learningseason",to:"/learning-season"}),r.createElement(c.AW,{component:xi,key:"learning-season",path:"/learning-season"}),r.createElement(c.AW,{component:Di,key:"nocuesta",path:"/nocuesta"}),r.createElement(c.AW,{component:Mi,key:"family",path:["/family-plan","/share-family-plan"]}),r.createElement(c.AW,{component:ji,key:"summer2020",path:"/summer2020"})],Zi=({data:e})=>(e["@context"]=e["@context"]||"http://schema.org",r.createElement("script",{type:"application/ld+json"},JSON.stringify(e,null,"\t"))),Wi=({crumbs:e})=>{const t={"@type":"BreadcrumbList",itemListElement:e.map(((e,t)=>({"@type":"ListItem",item:{"@id":e.url.toString(),name:e.label},position:t+1})))};return r.createElement(Zi,{data:t})};var zi=n(75025),$i=n(54452),Yi=n(45834),Ki=n(76864),qi=n(87122),Ji=n(82793);const Xi=({children:e,dispatch:t,page:n,showButtons:i,simple:o,trackingScreen:s,via:a})=>{const l=(0,c.TH)(),u=(0,$i.isOnExperimentalMobileEmailVerificationPage)(l);return r.createElement("div",Object.assign({className:Le()(Ji.Z["logged-out-topbar-wrap"],{[Ji.Z["splash-topbar-wrap"]]:o})},(0,et._q)(ot.V.LoggedOutTopbar)),r.createElement("div",{className:Ji.Z["logged-out-topbar"]},r.createElement(Ue.Z,{className:Ji.Z["logged-out-logo-container"],href:u?$i.APP_HOME_DEEP_LINK:"/",onClick:()=>(0,H.j)("topbar_logo_tapped",{via:n})},r.createElement("img",{alt:(0,tt.H8)(23227),className:Ji.Z["logged-out-logo"],src:qi})),u?null:r.createElement("div",{className:Ji.Z["right-header"]},r.createElement(Ki.aT,{className:Ji.Z["hidden-on-mobile"],trackingScreen:s}),e,r.createElement(Yi.Z,{buttonClassName:Ji.Z["login-button"],className:void 0===i||i?Ji.Z["hidden-on-mobile"]:Ji.Z["hidden-everywhere"],dispatch:t,redirectPath:"/join-beta"===l.pathname||"/stories"===l.pathname?l.pathname:void 0,trackingScreen:s,via:a}),o?null:r.createElement(Ue.Z,{className:Le()((0,Pe.y)({color:"owl",variant:"solid"}),Ji.Z["get-started"]),href:"/register",onClick:()=>(0,H.j)("click",{which:"topbar get started"})},(0,tt._i)(18550)))))},Qi=e=>{const{dispatch:t,trackingScreen:n="unknown",via:i}=e;return r.createElement(Pe.Z,Object.assign({},(0,et._q)(ot.V.HaveAccount),{className:"_3mSsk _32wa0",onClick:()=>{(0,H.j)("click",{screen:n,target:"has_account"}),(0,H.j)("splash_tap",{target:"has_account"}),t({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Ge.tl.SignInUp,via:i},type:"TOGGLE_MODAL"})},variant:"stroke"}),(0,tt._i)(20690))};var eo=n(81734);const to={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","hero-wrap":"_2quRS",globe:"_2eTYC","hero-short":"_8p5dJ","hero-shorter":"QKdy5","globe-flag":"EZsOD"},no=({learningLanguageId:e,variant:t})=>{const n=e?r.createElement(eo.Z,{className:to["globe-flag"],lang:e,size:88}):null;return r.createElement("div",{className:Le()(to["hero-wrap"],{[to[`hero-${t}`]]:!!t})},r.createElement("div",{className:to.globe}),n)};no.VARIANTS={SHORT:"short",SHORTER:"shorter"};const io=no,oo="_2O-uQ _1NnRQ whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk",so={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",footer:"_1SrGE","_space-background":"_30_lR","splash-wrap-inner":"_2F5q9","_splash-header-base":"_2jDQw","full-height":"_3z5VG","splash-header":"_18cH1","splash-header-wrap":"_1RQS6 _30_lR _2jDQw","prevent-long-splash":"_1FMDq","cta-container":"_3wkBv",tagline:"_3bXAY","splash-cta":"_6TCdY","have-account":"N8lkg","login-panel-wrap":"AsTXN","enter-details":"_2AyzT","content-section":"_338aW","content-section-divider":"DHwFZ","_content-wrap":"_8bBwZ","_content-wrap-row":"_2HZDe _8bBwZ","content-wrap-row-left":"RVdan _2HZDe _8bBwZ","content-wrap-row-right":"_3xrJa _2HZDe _8bBwZ","content-wrap-column":"_1gei2 _8bBwZ","_content-img":"kzV-q","_content-img-left":"_13IhJ","_content-img-right":"_2lVpu","duo-img":"_22SOo kzV-q _13IhJ","efficacy-img":"_1sRIT kzV-q _13IhJ _1G1lu","plus-duo-img":"HBGBC kzV-q _13IhJ _1G1lu","travel-img":"hmzIl kzV-q _2lVpu _1G1lu","school-img":"_1-lCk kzV-q _13IhJ _1G1lu","english-test-img":"_3hB7q kzV-q _2lVpu _1G1lu","content-description":"_2gzeH","content-description-small":"_1c0wn",link:"_1UbsT","play-video-icon":"_1e2pl","gamification-columns":"_2KQih","gamification-column":"_2XjE9","gamification-img":"_11DdV","gamification-img-top":"_2H12S _11DdV","small-content-wrap":"QDrP9","small-content-text-wrap":"_3_NlK",_icon:"_22sJd","check-icon":"_258Bh _22sJd","crown-icon":"My_aK _22sJd","streak-icon":"_2tMVK _22sJd","profile-icon":"_3KVV8 _22sJd","app-button-container":"_2UDuf","app-button":"_2xIzh","blue-link":"_1U0Kv _2__FI _2RTMn _3yAjN","footer-wrap":"_2_I80 _30_lR","footer-header":"_3yc4l","footer-tagline":"cWbmH","footer-cta":"_3H4pA","hidden-on-mobile":"LKK32","splash-bottom":"IvcaF","splash-cta-container":"liLLN","already-have-account-container":"_3uMJF",arrow:"_3cOeS d98MI _2jNpf","language-carousel":"_1u7qP","logged-out-logo":"_3s2_U","china-apk-download":"_1R_jZ","china-apk-download-qrcode":"F6uNr","china-apk-download-hint":"GXJ4O","china-apk-download-message":"_2QQDH"};class ro extends r.Component{constructor(){super(...arguments),this.renderCourseHatchingForm=()=>{const{course:e,email:t,isEmailInputVisible:n,errorString:i,newlySubscribed:o,onEmailChange:s,onNotifyMeClick:a,onSubscribeClick:l}=this.props,{learningLanguageName:c,subscriberCount:u,userSubscribed:d}=e,p=d||o;return n?r.createElement("div",{className:"pguY_"},r.createElement("div",{className:"tF1i1"},r.createElement("input",{className:"IMg9F",onChange:e=>s(e.target.value),placeholder:(0,tt.H8)(3980),value:t}),r.createElement("button",{className:"wa4cN _2O-uQ _1NnRQ whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk",onClick:l},(0,tt._i)(19532))),r.createElement("div",{className:"_2WMsJ"},i)):r.createElement("div",null,p?r.createElement("span",{className:oo},(0,tt._i)(11141)):r.createElement("button",{className:oo,onClick:a},(0,tt._i)(9753)),r.createElement("div",{className:"_38yEk _2kE-G"},(0,tt._i)(12826,{learning_language_name:c,num_users:u.toLocaleString()})))},this.renderHatchedForm=()=>{const{dispatch:e,isRegistering:t,onStartLearningClick:n,topElementRef:i}=this.props;return r.createElement("div",null,r.createElement("div",{className:"_2SQ3H",ref:i},r.createElement(Pe.Z,{className:so["splash-cta"],color:"owl",disabled:t,onClick:n,variant:"solid"},(0,tt._i)(7709))),r.createElement("div",null,r.createElement(Qi,{dispatch:e,via:"course_page"})))},this.renderCTA=()=>{const{course:e,courseHatching:t,isDesktop:n,isEmailInputVisible:i}=this.props,{estimatedBetaDateString:o="",fromLanguageName:s,learningLanguageName:a}=e,l=t?(0,tt._i)(8291,{from_language_name:s,learning_language_name:a}):(0,tt._i)(n?18929:13834,{learning_language_name:a}),c=t&&o&&!i;return r.createElement("div",{className:so["cta-container"],key:"cta-container"},c?r.createElement("h2",{className:"_2ooXi"},(0,tt._i)(7261,{beta_launch_date:o})):null,r.createElement("div",{className:so.headings},r.createElement("h1",{className:so.tagline},l)),r.createElement("div",{className:"_3Lgvp",onClick:e=>e.stopPropagation()},t?this.renderCourseHatchingForm():this.renderHatchedForm()))},this.renderHeroElement=()=>r.createElement(r.Suspense,{fallback:null},r.createElement(io,{learningLanguageId:this.props.course.learningLanguageId}))}render(){return r.createElement("div",{className:Le()(so["splash-header-wrap"],so["full-height"])},r.createElement("div",{className:so["splash-header"]},this.renderHeroElement(),this.renderCTA()))}}const ao=ro;var lo=n(14092),co=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};class uo extends r.Component{constructor(){super(...arguments),this.state={email:"",errorString:"",isEmailInputVisible:!1,isRegistering:!1,newlySubscribed:!1},this.onSubscribeClick=()=>co(this,void 0,void 0,(function*(){const{course:e}=this.props,{learningLanguageId:t,fromLanguageId:n}=e;try{yield(0,lo.F)(!1,t,n,this.state.email),this.setState({isEmailInputVisible:!1,newlySubscribed:!0})}catch(e){this.setState({errorString:(0,tt.H8)(11696)})}})),this.onStartLearningClick=()=>co(this,void 0,void 0,(function*(){const{course:e,dispatch:t}=this.props,{learningLanguageId:n,fromLanguageId:i}=e;ht.Z.start("trial_user_creation"),this.setState({isRegistering:!0}),yield Promise.all([(0,H.j)("click",{screen:"course_splash",target:"get_started"}),(0,H.j)("course_splash_tap",{target:"get_started"})]),t((0,Te.Kb)(n,i))}))}render(){const{course:e,courseHatching:t,dispatch:n,isDesktop:i,topElementRef:o}=this.props,{email:s,errorString:a,isEmailInputVisible:l,isRegistering:c,newlySubscribed:u}=this.state;return r.createElement(ao,{course:e,courseHatching:t,dispatch:n,email:s,errorString:a,isDesktop:i,isEmailInputVisible:l,isRegistering:c,newlySubscribed:u,onEmailChange:e=>this.setState({email:e}),onNotifyMeClick:()=>this.setState({isEmailInputVisible:!0}),onStartLearningClick:this.onStartLearningClick,onSubscribeClick:this.onSubscribeClick,topElementRef:o})}}const po=uo,mo=({children:e})=>{const t=r.createElement("div",{className:so["content-section-divider"]}),n=r.Children.toArray(e),i=(n.length,n.filter((e=>!!e)).map(((e,n)=>r.createElement(r.Fragment,{key:n},0!==n?t:null,e,null))));return r.createElement("div",{className:so["splash-content-wrap"]},i)};var go=n(48982);const ho=({ctaResource:e,trackingScreen:t})=>r.createElement("div",{className:so["footer-wrap"]},r.createElement("div",{className:so.footer},e?r.createElement("div",{className:so["footer-header"]},r.createElement("h1",{className:so["footer-tagline"]},(0,tt._i)(e)),r.createElement(Ue.Z,{className:Le()((0,Pe.y)({color:"owl",variant:"solid"}),so["footer-cta"]),href:"/register",id:"signup-link",onClick:()=>{(0,H.j)("splash_tap",{target:"get_started"}),(0,H.j)("click",{which:"splash page get started bottom"})},trackingScreen:t,trackingTarget:"get_started"},(0,tt._i)(18550))):null,r.createElement(go.YM,null),r.createElement(go.Ml,null),(0,_e.J9)()?r.createElement(go.dw,null):null)),_o="_3hwU0 _2dZP2";const vo=e=>{const{className:t,dispatch:n,fromLanguageId:i,isRegistering:o,learningLanguageId:s,label:a=7709}=e;return r.createElement(Pe.Z,{className:Le()(t,_o),color:"owl",disabled:o,onClick:()=>{return e=void 0,t=void 0,r=function*(){ht.Z.start("trial_user_creation"),yield Promise.all([(0,H.j)("click",{which:"course splash page get started topbar"}),(0,H.j)("course_splash_tap",{target:"get_started"})]),n((0,Te.Kb)(s,i))},new((o=void 0)||(o=Promise))((function(n,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}));var e,t,o,r},variant:"solid"},(0,tt._i)(a))};var fo=n(54126),yo=n(64865),Eo=n(74597);const bo=({headingResource:e=4666,trackingScreen:t,via:n})=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-row-right"]},r.createElement("div",{className:so["content-text"]},r.createElement("h2",null,(0,tt._i)(e)),r.createElement("div",{className:so["content-description"]},(0,tt._i)(12387)),r.createElement("div",{className:so["app-button-container"]},r.createElement(fo.Z,{className:so["app-button"],href:Eo.Z.desktop?(0,tt.H8)(22504):(0,yo.fy)({via:n}),onClick:()=>{(0,H.j)("click",{screen:t,target:"mobile_download_ios"}),(0,H.j)("click",{which:"mobile download ios"}),(0,H.j)("web_to_app_store_tap",{target:"apple",via:n})},type:"apple",via:n}),r.createElement(fo.Z,{className:so["app-button"],href:Eo.Z.desktop?(0,yo.A)({utmCampaign:"splash",utmContent:"download_button"}):(0,yo.Ir)({via:n}),onClick:()=>{(0,H.j)("click",{screen:t,target:"mobile_download_android"}),(0,H.j)("click",{which:"mobile download android"}),(0,H.j)("web_to_app_store_tap",{target:"google_or_China",via:n})},type:(0,_e.J9)()?"china":"google"}))),r.createElement("div",{className:so["travel-img"]}))),So=({description:e,iconClassName:t,onClick:n,title:i})=>r.createElement("div",{className:so["small-content-wrap"],onClick:n},r.createElement("div",{className:t}),r.createElement("div",{className:so["small-content-text-wrap"]},r.createElement("h3",null,i),r.createElement("div",{className:so["content-description-small"]},e))),wo=e=>e.replace(/<a href="(.*?)">/g,`<a class="${so.link}" href="$1">`),To=({headingResource:e=17123,learningLanguageName:t})=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-column"]},r.createElement("div",{className:so["gamification-img-top"]}),r.createElement("h2",null,t?(0,tt._i)(e,{learning_language_name:t}):(0,tt._i)(29903)),r.createElement("div",{className:so["gamification-columns"]},r.createElement("div",{className:so["gamification-column"]},r.createElement(So,{description:(0,tt._i)(32749,{href:"/efficacy"},{preprocess:wo}),iconClassName:so["streak-icon"],onClick:e=>{var t;"a"===(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&(0,H.j)("duolingo_landing_efficacy_cta",{})},title:(0,tt._i)(32748)}),r.createElement(So,{description:(0,tt._i)(29907),iconClassName:so["check-icon"],title:(0,tt._i)(29906)})),r.createElement("div",{className:so["gamification-img"]}),r.createElement("div",{className:so["gamification-column"]},r.createElement(So,{description:(0,tt._i)(29909),iconClassName:so["crown-icon"],title:(0,tt._i)(29908)}),r.createElement(So,{description:(0,tt._i)(29911),iconClassName:so["profile-icon"],title:(0,tt._i)(29910)}))))),Io=({learningLanguageName:e,trackingScreen:t})=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-row-left"]},r.createElement("div",{className:so["duo-img"]}),r.createElement("div",{className:so["content-text"]},r.createElement("h2",null,e?(0,tt._i)(3721,{learning_language_name:e}):(0,tt._i)(29901)),r.createElement("div",{className:so["content-description"]},r.createElement(Ue.P,{trackingScreen:t,trackingTarget:"proof"},e?`${(0,tt.H8)(20266,{learning_language_name:e})} `:(0,tt._i)(29902),e?(0,tt._i)(17300):null))))),ko=()=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-row-left"]},r.createElement("div",{className:so["plus-duo-img"]}),r.createElement("div",{className:so["content-text"]},r.createElement("h2",null,(0,tt._i)(24097)),r.createElement("div",{className:so["content-description"]},(0,tt._i)(29897,{num_days:14})),r.createElement(Ue.Z,Object.assign({},(0,et._q)(ot.V.LearnWithPlus),{className:so["blue-link"],href:"/plus"}),(0,tt._i)(7669))))),Co=({trackingScreen:e})=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-row-left"]},r.createElement("div",{className:so["school-img"]}),r.createElement("div",{className:so["content-text"]},r.createElement("h2",null,(0,tt._i)(13199)),r.createElement("div",{className:so["content-description"]},(0,tt._i)(29898)),r.createElement(Ue.Z,{className:so["blue-link"],href:"https://schools.duolingo.com",onClick:()=>(0,H.j)("click",{which:"web splash schools"}),trackingScreen:e,trackingTarget:"schools"},(0,tt._i)(14816))))),Ro=(0,Pt.Z)((()=>n.e(7408).then(n.bind(n,97408)))),Oo=({course:e,courseHatching:t,dispatch:n,isDesktop:i,showTopbarButtons:o,topElementRef:s})=>{const{fromLanguageId:a,learningLanguageId:l,learningLanguageName:c}=e,u=r.createElement(mo,null,r.createElement(Io,{dispatch:n,learningLanguageName:c,trackingScreen:"course_splash"}),r.createElement(To,{learningLanguageName:c}),r.createElement(ko,null),r.createElement(bo,{headingResource:1150,trackingScreen:"course_splash",via:"course_splash"}),(0,_e.J9)()?null:r.createElement(Co,{trackingScreen:"course_splash"}));return r.createElement(r.Fragment,null,r.createElement(zi.Z,{content:(0,tt.H8)(6807,{learning_language_name:c}),title:`${(0,tt.H8)(3053,{learning_language_name:c})} - ${(0,tt.H8)(23227)}`}),r.createElement(Xi,{dispatch:n,showButtons:o,simple:!0,trackingScreen:"course_splash",via:"course_splash"},r.createElement(vo,{className:Le()(o?Ji.Z["hidden-on-mobile"]:Ji.Z["hidden-everywhere"]),dispatch:n,fromLanguageId:a,isRegistering:!1,label:18550,learningLanguageId:l})),r.createElement(po,{course:e,courseHatching:t,dispatch:n,isDesktop:i,topElementRef:s}),u,r.createElement(ho,{trackingScreen:"course_splash"}),r.createElement(Ce,null,r.createElement(Ro,null)))},No=new class{constructor(){this.ticking=null,this.handlers=[],this.onFrameRequest=()=>{this.handlers.forEach((e=>e())),this.ticking=null},this.requestTick=()=>{null===this.ticking&&(this.ticking=requestAnimationFrame(this.onFrameRequest))}}addListener(e){0===this.handlers.length&&(document.addEventListener("scroll",this.requestTick),window.addEventListener("resize",this.requestTick,!1),this.requestTick()),this.handlers.push(e)}removeListener(e){1===this.handlers.length&&(document.removeEventListener("scroll",this.requestTick),window.removeEventListener("resize",this.requestTick,!1),null!==this.ticking&&(cancelAnimationFrame(this.ticking),this.ticking=null)),this.handlers=this.handlers.filter((t=>t!==e))}};class Lo extends r.Component{constructor(e){super(e),this.handleViewportChange=()=>{const{onViewportChange:e}=this.props,t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,[i,o]=this.partitionCurrentWatchedElementRefs(),[s,r]=this.partitionInViewportElementRefs(n,t);e({elementRefsInViewport:s,elementRefsNotInViewport:r,elementRefsNotSet:o,elementRefsSet:i,viewportHeight:t,viewportWidth:n})},this.partitionCurrentWatchedElementRefs=()=>{const{elementRefsToWatch:e}=this.props;return d.uK(e,(e=>null!==e.current))},this.partitionInViewportElementRefs=(e,t)=>{const{elementRefsToWatch:n}=this.props;return d.uK(n,(n=>{const i=n.current;if(null===i)return!1;const o=i.getBoundingClientRect();return o.bottom>0&&o.right>0&&o.left<e&&o.top<t}))},No.addListener(this.handleViewportChange)}componentWillUnmount(){No.removeListener(this.handleViewportChange)}render(){return null}}const Po=Lo;var Ao=n(26886),Do=n(74245);const xo=({history:e,location:t,match:{params:n}})=>{const i=(0,pe.tX)(),o=(0,pe.Fx)(ce.Mb),s=(0,pe.Fx)(ce.$4),[a,l]=r.useState(!1),[c,u]=r.useState(),d=r.useRef(null);r.useEffect((()=>{let i=!0;(0,Dt.Bf)(t,"course_splash");const{fromLanguageId:o=Do.h9,learningLanguageId:s}=n;var r,a,l,c;r=void 0,a=void 0,c=function*(){const e=yield ge._s.courseShow(s,o);i&&(u(e),(0,H.j)("course splash",{course_id:`${e.learningLanguageId}<-${e.fromLanguageId}`,logged_in:!1}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof l?o:new l((function(e){e(o)}))).then(n,i)}o((c=c.apply(r,a||[])).next())}));const d=(0,Ao.og)(s,o);return t.pathname!==d&&e.push({pathname:d,search:t.search}),()=>{i=!1}}),[]);const p=r.useCallback((({elementRefsInViewport:e})=>{l(e.length>0)}),[]);if(!c)return null;const{fromLanguageId:m,learningLanguageId:g,phase:h}=c,_=h===Do.AP.Active&&!(0,Ao.s7)(o,m,!1,g,h);return r.createElement(r.Fragment,null,r.createElement(Oo,{course:c,courseHatching:_,dispatch:i,isDesktop:s,showTopbarButtons:!a,topElementRef:d}),r.createElement(Po,{elementRefsToWatch:[d],onViewportChange:p}),r.createElement(Wi,{crumbs:[{label:(0,tt.H8)(23227),url:new URL(`${window.location.protocol}//${window.location.host}`)},{label:(0,tt.H8)(20631),url:new URL(`${window.location.protocol}//${window.location.host}/courses`)}]}))};var Mo=n(97015),Uo=n(13325);const Fo="CA8O7 _2ciGU _1DGat";class jo extends r.Component{constructor(){super(...arguments),this.state={show:!0}}componentDidMount(){this.state.show&&Eo.Z.android&&!Eo.Z.silk&&((0,H.j)("android_banner_load",{}),(0,H.j)("web_to_app_store_load",{via:"Android_banner"}))}render(){const{show:e}=this.state;return e&&Eo.Z.android&&!Eo.Z.silk?r.createElement("div",{className:"_15MEM"},r.createElement("div",{className:"_2BbZ4 _96iJP _1TSHz _1G1lu"}),r.createElement("div",{className:"pZc1g"},r.createElement("div",null,r.createElement("div",{className:"_3xdYT"},(0,tt._i)(20861)),r.createElement("span",{className:"_33TRp"},"4.7"),r.createElement("span",{className:Fo}),r.createElement("span",{className:Fo}),r.createElement("span",{className:Fo}),r.createElement("span",{className:Fo}),r.createElement("span",{className:"nqTry _2ciGU _1DGat"},r.createElement("span",{className:"_7EH26 CA8O7 _2ciGU _1DGat",style:{width:"70%"}})),r.createElement("span",{className:"_2HDbl"},"5,000,000+")),r.createElement("div",{className:"_1E3JA"},r.createElement("span",{className:"_2Jt9X _1DGat"}),r.createElement(Ue.Z,{className:"qdLIR",href:(0,yo.A)({isAndroidBanner:!0,utmCampaign:"splash_mobile_banner",utmContent:"mobile_banner"}),onClick:()=>{(0,H.j)("click",{which:"mobile banner android"}),(0,H.j)("android_banner_tap",{target:"install"}),(0,H.j)("web_to_app_store_tap",{target:"google_or_China",via:"Android_banner"})},target:"_blank"},(0,tt._i)(4441))),r.createElement("button",{className:"N3mdh _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ _1DGat",onClick:()=>{(0,H.j)("android_banner_tap",{target:"dismiss"}),this.setState({show:!1})}}))):null}}var Bo=n(42158);const Ho=()=>{const e=(0,gt.vl)().via;return r.useEffect((()=>{(0,_e.J9)()&&!Eo.Z.silk&&(0,H.j)("china_apk_banner_load",{})}),[]),(0,_e.J9)()&&!Eo.Z.silk?r.createElement("div",{className:"_3Dcul"},r.createElement("img",{className:"_11VYN",src:Bo}),r.createElement("div",null,r.createElement("div",{className:"_23wYk"},"下载多邻国 APP 开始免费学习")),r.createElement("div",{className:"_2Qvim",onClick:()=>{Eo.Z.android?(0,yo.ci)(`splash-banner-${e}`):(0,X.Zs)(`${yo.JN}?adjust_label=${e}`,!0)}},"去下载")):null},Go=({logo:e,name:t,sameAs:n,url:i})=>{const o={"@type":"Organization",logo:e,name:t,sameAs:n,url:i};return r.createElement(Zi,{data:o})},Vo=({sameAs:e})=>r.createElement(Go,{logo:"https://d35aaqx5ub95lt.cloudfront.net/images/logo-with-duo.png",name:"Duolingo",sameAs:e,url:"https://www.duolingo.com/"}),Zo=e=>{const{className:t="",trackingScreen:n}=e;return r.createElement(Ue.Z,{className:Le()(t,(0,Pe.y)({color:"owl",variant:"solid"}),_o),href:"/register",id:"signup-link",onClick:()=>{(0,H.j)("splash_tap",{target:"get_started"}),(0,H.j)("click",{which:"splash page get started topbar"})},trackingScreen:n,trackingTarget:"get_started"},(0,tt._i)(18550))};var Wo=n(54412);class zo extends r.Component{constructor(){super(...arguments),this.state={dismissed:!1},this.onClose=()=>{this.setState({dismissed:!0}),(0,Wo.d8)(Wo.Vj.Gdpr,"true")}}render(){return this.state.dismissed||!(0,tt.k_)(this.props.config)||(0,Wo.ej)(Wo.Vj.Gdpr)?null:r.createElement("div",{className:"PTev0"},r.createElement("div",{className:"_387Ys"},r.createElement("span",{className:"_1rf3j"},(0,tt._i)(11064)),r.createElement("button",{className:"_3w0eR _1DC8p _2jNpf",onClick:this.onClose})))}}const $o=(0,l.$j)((e=>({config:(0,ce.Mb)(e)})))(zo);var Yo=n(40851),Ko=n(56090),qo=n(33096);const Jo={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","height-topbar":"70px","height-topbar-mobile":"58px","juicy-bee":"#ffc800","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","max-width-skill":"106px","max-width-skill-mobile":"96px","size-checkpoint":"90px","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",wrap:"_3l_Dd","language-chooser-header":"_1Ii2h","from-language-chooser-list":"_1N6uu","from-language-item":"_2IaY3","from-language-flag":"_3g9Q_","from-language-bottom":"kkmpJ","white-stroke-transparent":"_3r8CI _1NnRQ whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk","loading-container":"_1JZrk"},Xo={de:4,es:0,fr:3,pt:1,ru:2},Qo=({availableCourses:e,isNavigating:t,isSelectingFromLanguage:n,onChooseAnotherCourseClick:i,onFromLanguageClick:o,onSelectCourse:s,selectedLearningLanguage:a,uiLanguageId:l})=>{let c=!1;const u=e.filter((e=>{const{fromLanguageId:t,learningLanguageId:n}=e;return t===l||"en"===l&&"en"===n&&!c&&(c=!0,!0)})).map((e=>{const{learningLanguageId:t}=e;return"en"===l&&"en"===t?Object.assign(Object.assign({},e),{numLearners:479e4,numLearnersString:`${4.79.toPrecision(3)}M`}):e}));return r.createElement("div",{className:Jo.wrap},r.createElement("h1",{className:Jo["language-chooser-header"],key:"header"},n?a?"What language do you speak?":(0,tt._i)(16916):(0,tt._i)(13091)),t?r.createElement("div",{className:Jo["loading-container"]},r.createElement(Uo.Z,{type:"screen"})):r.createElement(r.Fragment,null,n?r.createElement("ul",{className:Jo["from-language-chooser-list"]},d.MR(e.filter((({learningLanguage:e})=>!a||e===a)),(e=>e.fromLanguage in Xo?Xo[e.fromLanguage]:1/0)).map((({fromLanguageId:e})=>r.createElement("li",{className:Jo["from-language-item"],key:e,onClick:t=>o(t,e)},r.createElement(eo.Z,{className:Jo["from-language-flag"],lang:e,size:40}),(0,Do.lx)(e))))):r.createElement("ul",{className:qo.Z["course-card-container"]},d.MR(u,(e=>-e.numLearners)).map((e=>{const t="en"===l&&"en"===e.learningLanguageId;return r.createElement(Ko.Z,{className:Jo["choose-language"],course:e,"data-language":(0,Do.D3)(e.learningLanguageId),headingTag:"h2",key:"en"===l&&"en"===e.learningLanguageId?"english-placeholder":e.learningLanguageId,onSelectCourse:n=>{s(e,t,n)},theme:"transparent"})}))),n?r.createElement("div",{className:Jo["from-language-bottom"]},r.createElement("p",null,"Don’t see the language you speak? We’re still working on an English course for you. Coming soon!"),r.createElement("button",{className:Jo["white-stroke-transparent"],onClick:i},"Choose another course")):null))};class es extends r.Component{constructor(){super(...arguments),this.state={isNavigating:!1,isSelectingFromLanguage:!1},this.onFromLanguageClick=({},e)=>{return t=this,n=void 0,o=function*(){const{dispatch:t,location:n}=this.props,i=window.performance.now();if(this.state.selectedLearningLanguage)(0,H.j)("course_picker_tap",{from_language:(0,Do.D3)(e),learning_language:"en",target:"course",via:"onboarding"}),window.scrollTo(0,0),this.setState({isNavigating:!0}),(0,gt.vl)(n.search).short?yield(0,X.Zs)(`//${e}.duolingo.com/welcome/${this.state.selectedLearningLanguage}?short=1`):(ht.Z.start("trial_user_creation",{startTime:i}),t((0,Te.Kb)(this.state.selectedLearningLanguage,e)));else{yield(0,H.j)("ui_picker_screen_tap",{});const t=`//${"zh"===e?"zh-CN":e}.duolingo.com/register`;yield(0,X.Zs)(t)}},new((i=void 0)||(i=Promise))((function(e,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}l((o=o.apply(t,n||[])).next())}));var t,n,i,o},this.onChooseAnotherCourseClick=()=>{this.setState({isSelectingFromLanguage:!1,selectedLearningLanguage:void 0})},this.onSelectCourse=(e,t)=>{const{dispatch:n,history:i,location:o,trackingScreen:s}=this.props,r=window.performance.now();(0,H.j)("click",{screen:s,target:"flag"}),(0,H.j)("course_selected",{learning_language:(0,Do.D3)(e.learningLanguageId),ui_language:(0,Do.D3)(Do.h9)}),n({type:"SET_SHOULD_TRACK_SEE_SKILL_TREE"}),(0,H.j)("course_picker_tap",{from_language:(0,Do.D3)(Do.h9),learning_language:(0,Do.D3)(e.learningLanguageId),target:"course",via:"onboarding"}),t?this.setState({isSelectingFromLanguage:!0,selectedLearningLanguage:e.learningLanguageId}):(window.scrollTo(0,0),this.setState({isNavigating:!0,selectedLearningLanguage:e.learningLanguageId}),(0,gt.vl)(o.search).short?i.push(`/welcome/${e.learningLanguageId}?short=1`):(ht.Z.start("trial_user_creation",{startTime:r}),this.props.dispatch((0,Te.Kb)(e.learningLanguageId))))}}componentDidMount(){(0,H.j)("course_picker_load",{ui_language:Do.h9,via:"onboarding"})}render(){const{availableCourses:e}=this.props,{isNavigating:t,isSelectingFromLanguage:n,selectedLearningLanguage:i}=this.state;return r.createElement(Qo,{availableCourses:e,isNavigating:t,isSelectingFromLanguage:n,onChooseAnotherCourseClick:this.onChooseAnotherCourseClick,onFromLanguageClick:this.onFromLanguageClick,onSelectCourse:this.onSelectCourse,selectedLearningLanguage:i,uiLanguageId:Do.h9})}}const ts=(0,c.EN)((0,l.$j)()(es));var ns=n(29144),is=n(13159),os=n(19974),ss=n(12340);const rs=({availableCourses:e,dispatch:t,isChoosingLanguage:n,trackingScreen:i})=>{const o=n,a=(0,gt.vl)().via,l="WeChat"===a?os:"DET"===a?is:ss;let c;if(n)c=r.createElement(ts,{availableCourses:e,trackingScreen:i});else{const e=r.createElement(Ue.Z,Object.assign({className:Le()((0,Pe.y)({color:"owl",variant:"solid"}),so["splash-cta"]),href:"/register",id:"signup-link"},(0,et._q)(ot.V.GetStartedTop),{onClick:()=>{(0,H.j)("splash_tap",{target:"get_started"}),(0,H.j)("click",{which:"splash page get started top"})},trackingScreen:i,trackingTarget:"get_started"}),(0,tt._i)(18550)),n=["zh","zh-CN"].includes(window.duo.uiLanguage)&&Eo.Z.desktop&&(0,_e.J9)()?r.createElement("div",{className:so["china-apk-download"]},r.createElement("img",{className:so["china-apk-download-qrcode"],src:l}),r.createElement("div",{className:so["china-apk-download-hint"],onClick:()=>(0,yo.ci)("splash-page")},r.createElement("div",{className:so["china-apk-download-message"]},"扫一扫下载 APP"),r.createElement("img",{src:ns}))):null;c=r.createElement(r.Fragment,null,r.createElement(io,{variant:Eo.Z.android?io.VARIANTS.SHORT:io.VARIANTS.SHORTER}),r.createElement("div",{className:so["cta-container"],key:"cta-container"},r.createElement("h1",{className:so.tagline},(0,tt._i)(29896)),r.createElement("div",{className:so["splash-cta-container"]},e),r.createElement("div",{className:so["already-have-account-container"]},r.createElement(Qi,{dispatch:t,trackingScreen:i,via:"onboarding"})),r.createElement("div",{className:so["china-apk-download-button-container"]},n)))}return r.createElement("div",{className:Le()(so["splash-header-wrap"],o?so["full-height"]:so["prevent-long-splash"])},r.createElement("div",{className:so["splash-header"]},c),o?null:r.createElement("div",{className:so["splash-bottom"]},r.createElement(Yo.Z,{className:Le()(so["language-carousel"],so["hidden-on-mobile"]),onCarouselItemClick:()=>(0,H.j)("click",{which:"splash page flag"}),trackingScreen:i}),s.U9?null:r.createElement($o,null)))},as=({trackingScreen:e})=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-row-right"]},r.createElement("div",{className:so["content-text"]},r.createElement("h2",null,(0,tt._i)(14855)),r.createElement("div",{className:so["content-description"]},(0,tt._i)(29899)),r.createElement(Ue.Z,{className:so["blue-link"],href:"https://englishtest.duolingo.com",onClick:()=>(0,H.j)("click",{which:"web splash det"}),trackingScreen:e,trackingTarget:"det"},(0,tt._i)(29900))),r.createElement("div",{className:so["english-test-img"]}))),ls=()=>r.createElement("section",{className:so["content-section"]},r.createElement("div",{className:so["content-wrap-row-left"]},r.createElement("div",{className:so["efficacy-img"]}),r.createElement("div",{className:so["content-text"]},r.createElement("h2",null,(0,tt._i)(32750)),r.createElement("div",{className:so["content-description"]},(0,tt._i)(32751)),r.createElement(Ue.Z,{className:so["blue-link"],href:"/efficacy",onClick:()=>(0,H.j)("duo_plus_efficacy_cta",{})},(0,tt._i)(32752)))));var cs=n(85381),us=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const ds=(0,Pt.Z)((()=>n.e(7408).then(n.bind(n,97408)))),ps=(0,Pt.Z)((()=>Promise.all([n.e(2668),n.e(9993),n.e(4e3)]).then(n.bind(n,85830)))),ms=()=>{const e=(0,pe.tX)(),t=(0,c.TH)(),{pathname:n,search:i}=t,o="/"===t.pathname;r.useEffect((()=>{o&&(0,Dt.Bf)(t,"splash")}),[o]);const s=(0,gt.vl)(i),a="/register"===n?"course_picker":"splash";r.useEffect((()=>{const{email:t,purchasePlus:n}=s;n&&(0,cs.lP)({email:t,purchasePlus:n},e),window.location.host.startsWith("join")&&e({options:{goBack:()=>(0,X.Zs)(void 0,!0),isSignIn:!0,name:Ge.tl.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"})}),[]),r.useEffect((()=>{"/log-in"===n&&((0,H.j)("sign_in_load",{screen:"splash_login_page",via:"onboarding"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Ge.tl.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"}))}),[n]),r.useEffect((()=>{(0,H.j)("screen_load",{screen:a})}),[a]),r.useEffect((()=>{ht.Z.finishOptional("splash_to_intro")}),[]);const[l,u]=r.useState(!0),d=r.useRef(null),p=r.useRef(null),m=(0,pe.PX)([],(()=>us(void 0,void 0,void 0,(function*(){return(yield ge._s.courseList()).filter((({phase:e})=>e>Do.AP.Active))}))),[]),g=(0,Do.Ho)()[Do.h9],h=1===(null==g?void 0:g.length)&&"en"===(null==g?void 0:g[0]);return r.createElement("div",{className:so["splash-wrap"]},r.createElement("div",{className:so["splash-wrap-inner"]},(()=>{let e,t;switch(n){case"/":e=`${(0,tt.H8)(23227)} - ${(0,tt.H8)(10751)}`,t=(0,tt.H8)(19956);break;case"/log-in":e=`${(0,tt.H8)(18855)} - ${(0,tt.H8)(23227)}`,t=(0,tt.H8)(28228);break;case"/register":case"/register_user":e=`${(0,tt.H8)(15785)} - ${(0,tt.H8)(23227)}`,t=(0,tt.H8)(1100);break;default:e=`${(0,tt.H8)(23227)} - ${(0,tt.H8)(10751)}`,t=(0,tt.H8)(19956)}return r.createElement(r.Fragment,null,r.createElement(zi.Z,{content:t}),r.createElement(Mo.q,null,r.createElement("title",null,e)))})(),r.createElement(Xi,{dispatch:e,showButtons:!l,simple:!0,trackingScreen:a,via:"onboarding"},r.createElement(Zo,{className:Le()(l?Ji.Z["hidden-everywhere"]:Ji.Z["hidden-on-mobile"]),trackingScreen:a})),r.createElement("span",{ref:d},r.createElement(rs,{availableCourses:m,dispatch:e,isChoosingLanguage:"/register"===n||"/referred"===n,trackingScreen:a})),"/register"===n||"/referred"===n?null:r.createElement(r.Fragment,null,r.createElement(mo,null,r.createElement(Io,{dispatch:e,trackingScreen:a}),r.createElement(To,null),r.createElement(ko,null),r.createElement(bo,{trackingScreen:a,via:"splash_page"}),(0,_e.J9)()?null:r.createElement(Co,{trackingScreen:a}),r.createElement(as,{trackingScreen:a}),r.createElement(ls,null)),r.createElement("span",{key:"footer-wrap",ref:p},r.createElement(ho,{ctaResource:h?1521:591,trackingScreen:a}))),r.createElement(Ce,null,r.createElement(ds,null)),r.createElement(Ce,null,r.createElement(ps,null)),(0,_e.J9)()?r.createElement(Ho,null):r.createElement(jo,null),r.createElement(Vo,{sameAs:["https://www.youtube.com/duolingo","https://twitter.com/duolingo","https://www.facebook.com/duolingo","https://www.linkedin.com/company/duolingo/","https://www.instagram.com/duolingo/","https://www.twitch.tv/Duolingo"]})),r.createElement(Po,{elementRefsToWatch:[d,p],onViewportChange:({elementRefsInViewport:e})=>u(e.length>0)}))},gs=(0,Pt.Z)((()=>n.e(9751).then(n.bind(n,49751)))),hs=({children:e,location:t,match:{params:n}})=>{const i=(0,O.Pc)();return(0,pe.$h)(i,["/enroll",n.learningLanguageId,n.fromLanguageId,n.text].reduceRight(((e,t)=>t?e?`${t}/${e}`:t:""),""),t.search),i?null:r.createElement(r.Fragment,null,e)},_s=()=>((0,pe.$h)(!0,"/"),null),vs=[r.createElement(c.AW,{component:()=>{const e=(0,pe.tX)(),t=(0,c.k6)(),n=(0,c.TH)(),i=(0,O.Pc)();r.useEffect((()=>{const e=(0,gt.vl)(n.search);if("/referred"===n.pathname)if(i){const n=e.inviter_id;n?t.replace(`/u/${n}?via=referral`):t.replace(X.B6)}else{(0,H.j)("referral click",{});const t=e.user_invite;t&&us(void 0,void 0,void 0,(function*(){yield ge.xr.trackSplashLoad(t),(0,se.LS)(se.Qt.InviteCode,t)}))}else if(i){const e="/register"===n.pathname?"/welcome":X.B6;(0,H.mh)(window.location.href,e,"soft"),t.replace({pathname:e,search:n.search})}}),[i]);const o=(0,c.$B)("/register/:languageId"),s=!i&&null!==o;return r.useEffect((()=>{if(s){const{params:{languageId:n}}=o;(0,Do.jO)(n)?e((0,Te.Kb)(n)):t.replace("/")}}),[s]),i?null:s?r.createElement(Uo.Z,{type:"screen-white"}):r.createElement(ms,null)},exact:!0,key:"splash",path:["/","/log-in","/referred","/register","/register/:languageId","/register_user"]}),r.createElement(c.AW,{component:gs,exact:!0,key:"classroom",path:["/classroom","/classroom/:classroomCode"]}),r.createElement(c.AW,{key:"course",path:"/course/:learningLanguageId/:fromLanguageId?/:text?",render:e=>r.createElement(hs,Object.assign({},e),r.createElement(xo,Object.assign({},e)))}),...d.XP((0,Do.Ho)()).map((e=>r.createElement(c.AW,{component:_s,key:e,path:`/${(0,Do.D3)(e)}`})))];var fs=n(50548),ys=n(88787),Es=n(3800);let bs;console.log(`On commit https://github.com/duolingo/duolingo-web/commit/${window.duo.version}`),Es.h&&console.log("Showing only plain info"),document.documentElement.lang=window.duo.uiLanguage,window.location.host!==X.Vb&&window.location.host!==X.a_&&"true"===(0,Wo.ej)(Wo.Vj.RedirectToPreview)&&(0,X.Zs)((0,X.gg)(window.location.href),!0),v.Au()&&(0,Ao.KO)();try{bs=(0,O.Jb)()}catch(e){}const Ss=(0,q.xC)(((e=(0,u.from)({}),t)=>{(0,K.cj)(t);const n=e.user;return"RESET_STATE"===t.type&&(e=(0,q.Dg)("Resetting state")),n!==(e=J(e,t)).user&&(0,K.av)(e.user),e}),(0,q.aY)(bs));(0,xt.Sk)(Ss.getState().user)&&v.R(),(()=>{const e=(0,Wo.ej)(Wo.Vj.JWT);e&&((0,Wo.nJ)(Wo.Vj.JWT),(0,Wo.d8)(Wo.Vj.JWT,e,!0,!(0,_e.J9)()))})(),(0,Dt.vi)();const ws=["/","/learn"].includes(window.location.pathname);if(bs)console.log("User is logged in"),ws&&ht.Z.start("splash_to_home");else{console.log("User is not logged in"),ws&&ht.Z.start("splash_to_intro");const e=(0,Wo.ej)(Wo.Vj.LoggedOutUUID);e&&H.XZ(e),(0,i.dl)()}K.YJ((e=>{var t,n,i,o;return H.j("chunk_download_failure",{offline:!navigator.onLine,path:null!==(o=null===(i=/\n\((error: )?(.*?)\)$/.exec(null!==(n=null===(t=e.body.trace)||void 0===t?void 0:t.exception.message)&&void 0!==n?n:""))||void 0===i?void 0:i.slice(-1)[0])&&void 0!==o?o:""})})),K._b((e=>{var t,n,i,o,s;["Cannot load facebook SDK","Cannot load google SDK"].includes(null===(t=e.body.trace)||void 0===t?void 0:t.exception.message)||(null===(i=null===(n=e.body.trace)||void 0===n?void 0:n.exception.message)||void 0===i?void 0:i.startsWith("Request failed with status code "))||H.j("app_crash",{crash_message:null===(o=e.body.trace)||void 0===o?void 0:o.exception.message,crash_type:null===(s=e.body.trace)||void 0===s?void 0:s.exception.class,rollbar_uuid:e.uuid})}));const Ts=(0,gt.Lm)();var Is,ks,Cs,Rs;H.d6(Ts)&&H.Cm(Ts),H.j("app_open",{}),(0,Wo.ej)(Wo.Vj.ShouldTrackWelcome)&&(H.j("welcome",{}),(0,Wo.nJ)(Wo.Vj.ShouldTrackWelcome)),(0,a.render)(r.createElement(l.zt,{store:Ss},r.createElement(c.F0,{history:fs.m},r.createElement((()=>{const e=(0,c.TH)(),t=(0,O.Pc)(),n=(0,v.Au)(),i=r.useMemo((()=>(e=>_i((e=>[...e?[]:[{components:[({location:e})=>r.createElement(c.l_,{to:{pathname:"/",search:e.search}})],path:X.B6}],{props:{userMustBeLoggedIn:!0},subroutes:[{components:[Xt],subroutes:[{components:[Qt],path:X.B6},{components:[en],path:"/shop"},{components:[un],path:"/review",props:{noMobileTopbar:fi}},{components:[mi],path:"/characters"},{components:[hi],exact:!0,path:"/alphabets/:languageAbbrev/tips",props:yi},{components:[gi],path:"/alphabets/:languageAbbrev/tips/:groupIndex/:tipIndex",props:yi}]},{components:[on,tn],props:Ei,subroutes:[{exact:!0,path:"/alphabets/:languageAbbrev/:alphabetSessionId"},{path:"/checkpoint/:languageAbbrev/:index/:urlType?"},{path:"/placement/:languageAbbrev"},{path:"/practice"},{path:"/preview/:skillId/:lesson"},{path:"/progress-quiz/:languageAbbrev"}]},{components:[Wt,nn],props:Ei,subroutes:[{exact:!0,path:"/lesson"},{path:"/lesson/unit/:pathUnitNumber/level/:pathLevelNumber"},{path:"/lesson/unit/:pathUnitNumber/legendary"},{path:"/lesson/unit/:pathUnitNumber/test"}]},{components:[ln,tn],path:"/mistakes-review",props:Ei},{components:[qt],exact:!0,path:"/guidebook/:languageAbbrev/:unitNumber",props:yi},{components:[Jt],exact:!0,path:"/guidebook/preview/:fromLanguageAbbrev/:learningLanguageAbbrev/:unitNumber",props:yi},{components:[sn],path:"/skill",subroutes:[{components:[rn,on,tn],exact:!0,path:"/:languageAbbrev/:urlName",props:Ei},{components:[dn],path:"/:languageAbbrev/:urlName/tips-and-notes",props:yi},{components:[pn],path:"/:languageAbbrev/:urlName/tips",props:yi},{components:[tn],path:"/:languageAbbrev/:urlName/:lesson(practice)",props:Ei},{components:[an,tn],path:"/:languageAbbrev/:urlName/:lesson(test)",props:Ei},{components:[on,tn],path:"/:languageAbbrev/:urlName/:lesson",props:Ei}]},{components:[Q],path:"/skill/*"},{components:[li],path:"/settings",subroutes:[{components:[ci],exact:!0,path:"/"},{components:[gn],path:"/account"},{components:[hn],path:"/coach"},{components:[_n],path:"/deactivate"},{components:[vn],path:"/direction"},{components:[fn],path:"/notifications"},{components:[yn],path:"/password"},{components:[En],path:"/plus"},{components:[En],path:"/super"},{components:[bn],path:"/profile"},{components:"experiment"===(0,Nt.j6)("schools_new_dweb_schools_setting",void 0)?[wn]:[Sn],path:"/observer"},{components:[Tn],path:"/reset_lang"},{components:"experiment"===(0,Nt.j6)("schools_new_dweb_schools_setting",void 0)?[wn]:[Sn],path:"/schools"},{components:[In],path:"/sound"},{components:[kn],path:"/privacy"}]},{components:[cn],path:"/progress-quiz"},{components:[Pn],path:"/admin_tools"},{components:[mn],path:"/new-comment",props:yi},{components:[si],path:"/user-search",props:yi},{components:[ri],exact:!0,path:"/friend-updates"},{components:[ai],path:"/friend-updates/:kudosFilter"},{components:[Cn],path:"/welcome/:linkCode?",props:Ei}]},{components:[Rn],subroutes:[{components:[On],path:"/approach"},{components:[Nn],path:"/contact"},{components:[Ln],path:"/info"},{components:[An],path:"/team"}]},{components:[zt],path:"/login-page",props:bi},{components:[qn],path:"/abc-privacy"},{components:[Dn],path:"/art_commission"},{components:[xn],path:"/communityartsprogram"},{components:[Un],path:"/courses/:fromLanguageId?"},{components:[pi],path:"/dictionary*"},{components:[Yt],path:"/forgot_password"},{components:[Jn],path:"/remove/:token/:email"},{components:[Fn],path:"/guidelines"},{components:[jn],path:"/help"},{components:[()=>r.createElement(c.l_,{to:"join-beta"})],path:"/beta-app"},{components:[Mn],path:"/join-beta"},{components:[Bn],path:"/mobile"},{components:[Hn],path:"/participation"},...X.zl.map((e=>({components:[Gn],path:e,props:bi}))),{components:[Vn],path:"/redeem",props:bi},{components:[Wn],path:"/business/checkout",props:bi},{components:[Zn],path:"/business",props:bi},{components:[Kt],path:"/reset_password/:client_abbrev?"},{components:[$n],path:"/privacy"},{components:[Yn],path:"/terms"},{components:[zn],path:"/auto-renewal-agreement"},{components:[Kn],path:"/cookies"},{components:[Xn],path:"/verify/:token"},{components:[Qn],path:"/words"},{components:[ui],exact:!0,path:"/stories"},{components:[di],path:"/stories/:storyId",props:Ei},{components:[ti],path:"/profile/:username",subroutes:[{path:"/followers"},{path:"/following"}]},{components:[ii],path:"/profile/:username/achievements"},{components:[ni],path:"/friend-suggestions"},{components:[oi],path:"/profile/:username/courses"},{components:[$t],path:"/enroll/:learningLanguageId/:fromLanguageId?/:text?"},{components:[gi],path:"/alphabets/:languageAbbrev/:alphabetSessionId/tips",props:Ei},{props:{noMobileTopbar:e},subroutes:[{components:[ei],path:"/profile/:username"},{components:[ei],path:"/u/:userId"},{components:[ei],exact:!0,path:"/:username"}]}])(e)).map((({exact:e,path:t,props:n,components:i=[]})=>r.createElement(c.AW,{exact:e,key:"app",path:t,render:e=>r.createElement(Si,{appProps:null!=n?n:{},components:i,routerProps:e})}))))(t)),[t,n]),[o,s]=r.useState(!1);if(!o){const t=(0,X.o_)(e);if(t.pathname!==e.pathname||t.search!==e.search)return r.createElement(c.l_,{to:t});s(!0)}return r.createElement(jt,null,r.createElement(r.Suspense,{fallback:null},r.createElement(c.rs,null,...ki,...vs,...n?Ti:[],...Vt,r.createElement(c.l_,{from:"/labs",to:X.B6}),r.createElement(c.l_,{from:"/home",to:X.B6}),r.createElement(c.l_,{from:"/c",to:X.B6}),r.createElement(c.l_,{from:"/o/:classroomCode",to:"/classroom/:classroomCode"}),...Vi,...i,r.createElement(c.AW,{component:Q}))))}),null))),document.getElementById("root")),Is=void 0,ks=void 0,Rs=function*(){try{yield ys.S1()}catch(e){console.warn(e)}},new((Cs=void 0)||(Cs=Promise))((function(e,t){function n(e){try{o(Rs.next(e))}catch(e){t(e)}}function i(e){try{o(Rs.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof Cs?o:new Cs((function(e){e(o)}))).then(n,i)}o((Rs=Rs.apply(Is,ks||[])).next())}))},40472:(e,t,n)=>{"use strict";n.d(t,{y:()=>r,M:()=>m});const i=[["...","…"]],o=["ca","cs","cy","da","de","en","eo","es","fi","fr","ga","gd","ht","hu","hv","hw","id","it","la","mi","nl-NL","no-BO","pl","pt","ro","sv","sw","tl","tr","vi","xx-ZB","yu"],s=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!==t[n])return n;return e.length},r=e=>o.includes(e),a=[['[’\\"´‘`′ʻ́̀´]',"'"],["¡","!"],["¿","?"]];class l{constructor(e,t={}){this.match=(e,t)=>{e=this.normalize(e);const n=null!=t?t:this.originalTokens,i=t?t.map((e=>this.normalize(e))):this.tokens;let o,s=0;return{highlights:i.map(((t,i)=>{const r=this.matchToken(t,e);return r.index>0&&(r.isComposing?o=-1:void 0===o?o=i:o>-1&&this.normalizeWithoutAccents(n[o])!==this.normalizeWithoutAccents(n[i])&&(o=-1),s++),r})),match:null!=o?o:-1,partialMatches:s}},this.matchAlias=(e,t)=>{var n,i;const o=null!==(i=null===(n=this.options.aliases)||void 0===n?void 0:n.filter((([,t])=>t===e)))&&void 0!==i?i:[];let r;for(const[e]of o){const n=s(e,t);n>0&&(!r||n>r.length)&&(r={isComposing:n<e.length,length:n})}return r},this.matchToken=(e,t)=>{const n={index:0,isComposing:!1};for(let i=0,o=0;i<t.length;i++,o++){if(t[i]===e[o]){n.index++;continue}const s=this.matchAlias(e[o],t.slice(i));if(!s||s.isComposing&&s.length!==t.length-i)return{index:0,isComposing:!1};n.index++,n.isComposing=s.isComposing,i+=s.length-1}return n},this.normalize=e=>(e=this.normalizeAccents(e),e=this.normalizeCase(e),this.normalizePatterns(e)),this.normalizeAccents=e=>{const{accentedCharacterMap:t}=this.options;return t&&(e=e.split("").map((e=>{var n;return null!==(n=t[e])&&void 0!==n?n:e})).join("")),e},this.normalizeCase=e=>{const{ignoreCase:t}=this.options;return t?e.toLowerCase():e},this.normalizePatterns=e=>{const{normalizationData:t}=this.options;return null==t||t.forEach((([t,n])=>{e=e.replace(new RegExp(t,"g"),n)})),e},this.normalizeWithoutAccents=e=>(e=this.normalizeCase(e),this.normalizePatterns(e)),this.options=Object.assign({normalizationData:a},t),this.originalTokens=e,this.tokens=e.map((e=>this.normalize(e)))}}class c extends l{constructor(e,t={}){var n;super(e,Object.assign(Object.assign({},t),{aliases:[["ae","æ"],...null!==(n=t.aliases)&&void 0!==n?n:i]}))}}class u extends l{constructor(e,t={}){var n;super(e,Object.assign(Object.assign({},t),{aliases:null!==(n=t.aliases)&&void 0!==n?n:i}))}}class d extends l{constructor(e,t={}){var n;super(e,Object.assign(Object.assign({},t),{aliases:[["ae","æ"],["oe","œ"],...null!==(n=t.aliases)&&void 0!==n?n:i]}))}}class p extends l{constructor(e,t={}){var n;super(e,Object.assign(Object.assign({},t),{aliases:[["ss","ß"],...null!==(n=t.aliases)&&void 0!==n?n:i]}))}}const m=e=>{switch(e){case"da":case"no-BO":return(...e)=>new c(...e);case"de":return(...e)=>new p(...e);case"fr":return(...e)=>new d(...e);default:return(...e)=>new u(...e)}}},70220:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});const i=matchMedia("(prefers-reduced-motion: reduce)").matches},84389:(e,t,n)=>{"use strict";n.d(t,{bK:()=>c,GC:()=>p,H2:()=>m,Ay:()=>g,A9:()=>h,Kv:()=>_,Mw:()=>v,an:()=>f,vO:()=>y,ET:()=>E,$9:()=>b,UK:()=>S,xu:()=>w,Si:()=>T,mh:()=>I,jO:()=>k});var i=n(99369),o=n(30977),s=n(13840),r=n(87471),a=n(35160),l=n(11908);const c="strategist",u={champion:{displayString:7018,getCompletedDescription:(e,t,n)=>{const i=e-1;if(0===i)return(0,s.H8)(t?27195:15352,{name:n});const o=(0,s.H8)(r.Vq[i]);return(0,s.H8)(t?27196:5667,{league:o,name:n})},getDescription:e=>{const t=e-1;if(0===t)return(0,s.H8)(18931);const n=(0,s.H8)(r.Vq[t]);return(0,s.H8)(9836,{league:n})},position:4},conqueror:{displayString:6676,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27197:17870,{name:n,number:e}),getDescription:e=>(0,s.H8)(24339,{number:e}),position:6},friendly:{displayString:2148,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27198:21686,{name:n}),getDescription:()=>(0,s.H8)(6105),position:10},legendary:{displayString:31855,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27199:7181,{name:n}),getDescription:()=>(0,s.H8)(13781),position:8},overtime:{displayString:19748,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27200:11321,{name:n}),getDescription:()=>(0,s.H8)(10191),position:11},photogenic:{displayString:20036,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27201:22947,{name:n}),getDescription:()=>(0,s.H8)(19790),position:12},regal:{displayString:9220,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27202:4438,{name:n,number_1:e}),getDescription:e=>(0,s.H8)(15694,{number_1:e}),position:3},sage:{displayString:20797,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27203:21311,{name:n,number_1:e}),getDescription:e=>(0,s.H8)(20170,{number_1:e}),position:1},scholar:{displayString:7357,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27204:1301,{name:n,number_of_words:e}),getDescription:e=>(0,s.H8)(22639,{number_of_words:e}),position:2},sharpshooter:{displayString:2932,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27205:17946,{name:n,number_1:e}),getDescription:e=>(0,s.H8)(19943,{number_1:e}),position:5},strategist:{displayString:7441,earn:e=>{o.I7.earnTipsAchievement(e)},getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27206:18657,{name:n}),getDescription:()=>(0,s.H8)(8963),position:9},wildfire:{displayString:6641,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27207:20666,{name:n,number_1:e}),getDescription:e=>(0,s.H8)(5551,{number_1:e}),position:0},winner:{displayString:14814,getCompletedDescription:(e,t,n)=>(0,s.H8)(t?27208:19806,{name:n}),getDescription:()=>(0,s.H8)(14009),position:7}},d={clubs:{lockedDescription:[9511,2867,2684],position:7,supportedOnWeb:!1,unlockedDescription:[398,11778,19408],variableName:void 0},completion:{lockedDescription:[22773,22773,19914],position:1,supportedOnWeb:!0,unlockedDescription:[19057,19057,5091],variableName:"num_skills"},gold_skills:{lockedDescription:[9287,9287,24430],position:6,supportedOnWeb:!1,unlockedDescription:[24056,24056,6063],variableName:"num_gold_skills"},items:{lockedDescription:[11714,16164,15140],position:4,supportedOnWeb:!1,unlockedDescription:[764,12847,8376],variableName:void 0},perfect:{lockedDescription:[5220,5220,5220],position:10,supportedOnWeb:!0,unlockedDescription:[21692,21692,21692],variableName:"num_perfect_lessons"},social:{lockedDescription:[6105,4192,4863],position:3,supportedOnWeb:!0,unlockedDescription:[21686,13965,10258],variableName:void 0},spending:{lockedDescription:[3723,3723,3723],position:8,supportedOnWeb:!0,unlockedDescription:[1507,1507,1507],variableName:"num_lingots"},streak:{lockedDescription:[7589,7589,7589],position:0,supportedOnWeb:!0,unlockedDescription:[14697,14697,14697],variableName:"streak"},time:{lockedDescription:[169,24544,16690],position:9,supportedOnWeb:!0,unlockedDescription:[4715,4834,5834],variableName:"streak"},xp:{lockedDescription:[21803,21803,21803],position:5,supportedOnWeb:!0,unlockedDescription:[13959,13959,13959],variableName:"xp"}},p=e=>(0,i.from)((0,i.asMutable)(e).sort(((e,t)=>d[e.name].position-d[t.name].position)).filter((e=>d[e.name].supportedOnWeb))),m=e=>(0,i.from)((0,i.asMutable)(e).sort(((e,t)=>u[e.name].position-u[t.name].position))),g=e=>{const t=e.filter((e=>!y(e)));if(0!==t.length)return(0,i.from)((0,i.asMutable)(t).sort(((e,t)=>e.tierCounts[e.tier]/e.count-t.tierCounts[t.tier]/t.count)))[0]},h=(e,t,n,i)=>{const o=t?Math.max(0,e.tier-1):e.tier;if(!(e.name in u))return((e,t,n,i)=>{const o=d[e];if(!o)return e;const r=Math.min(2,t),a={};o.variableName&&(a[o.variableName]=n[r]);const l=i?"unlockedDescription":"lockedDescription";return(0,s.H8)(o[l][r],a)})(e.name,o,e.tierCounts,t);const r=u[e.name],a=e.tierCounts[o];return t?r.getCompletedDescription(a,n,i):r.getDescription(a)},_=e=>{if(!(e.name in u))return(e=>{switch(e){case"clubs":return(0,s.H8)(1131);case"completion":return(0,s.H8)(7018);case"gold_skills":return(0,s.H8)(7982);case"items":return(0,s.H8)(5967);case"perfect":return(0,s.H8)(2932);case"social":return(0,s.H8)(2148);case"spending":return(0,s.H8)(18001);case"streak":return(0,s.H8)(6641);case"time":return(0,s.H8)(21888);case"xp":return(0,s.H8)(8908);default:return e}})(e.name);const t=u[e.name];return(0,s.H8)(t.displayString)},v=e=>e.tierCounts[e.tier]||0,f=e=>Math.max(1,e.tier<e.tierCounts.length?e.tier+1:e.tier),y=e=>e.count>=v(e),E=e=>e.reduce(((e,t)=>(e[t.name]=t,e)),{}),b=(e,t,n,i,o,s)=>{e({options:{achievement:t,achieverName:s,name:a.tl.Achievement,thirdPerson:o,useV3:i,viewMore:n},replaceExisting:!1,type:"TOGGLE_MODAL"})},S=(e,t,n)=>{const i={[n]:{shouldShowUnlock:!1}};o.Vi.achievementsUpdate(t,i),e({name:n,type:"MARK_ACHIEVEMENT_UNLOCK_SHOWN"})},w=(e,t,n)=>{o.I7.claimAchievement(n,t),e({achievement:n,type:"MARK_ACHIEVEMENT_UNLOCK_SHOWN_V3"})},T=(e,t,n,o)=>{const s=u[o];(null==s?void 0:s.earn)&&(s.earn(n),t({achievements:(0,i.asMutable)(e).map((e=>e.name===o?(0,i.set)(e,"tier",v(e)):e)),type:"UPDATE_USER_ACHIEVEMENTS_V3"}))},I=e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.featureFlags)||void 0===t?void 0:t.web_achievements_v3_migration)||void 0===n||n},k=(e,t)=>{var n;if(!I(t))return;const i=(0,l.rV)(l.Qt.AchievementsMigrationTimestamp),s=null===(n=null==t?void 0:t.featureFlags)||void 0===n?void 0:n.web_achievements_v3_migration_retries;if(i){if(!s)return;if(i>Date.now()-864e5)return}(0,l.LS)(l.Qt.AchievementsMigrationTimestamp,Date.now()),o.I7.migrateToV3(e)}},51827:(e,t,n)=>{"use strict";n.d(t,{ZD:()=>i,N1:()=>y,nc:()=>E,Z7:()=>b,EY:()=>S,OE:()=>w,NX:()=>T,RZ:()=>I,_H:()=>k,BY:()=>C,ZM:()=>R,i1:()=>O,VF:()=>A,Ph:()=>D,po:()=>x,d2:()=>M,Pg:()=>U,qC:()=>F,V3:()=>j,AD:()=>B,su:()=>H});var i,o=n(80254),s=n(21061),r=n(53229),a=n(74971),l=n(85381),c=n(51158),u=n(11908),d=n(1079),p=n(785),m=n(16086),g=n(20028);!function(e){e.SessionEnd="SESSION_END",e.Tree="TREE"}(i||(i={}));const h=o.IH((()=>(0,r.lh)("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")));let _,v=!0;const f=new Promise((e=>{_=e})),y=e=>{v=e.privacySettings.includes("DISABLE_PERSONALIZED_ADS"),_()},E=()=>{return e=void 0,t=void 0,i=function*(){yield h(),yield f;const e=(0,m.Pc)()?v:!(0,a.Xb)("targeting");(window.adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=e?1:0,console.log((e?"Disable":"Enable")+" personalized ads"),(window.adsbygoogle=window.adsbygoogle||[]).push({})},new((n=void 0)||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i},b=(e,t)=>{var n,i;if(i=window.location.href,decodeURIComponent(i).includes("@")||(0,g.pN)(e))return null;if(void 0!==(null===(n=e.adsConfig)||void 0===n?void 0:n.units)){const n=e.adsConfig.units[t];if(void 0!==n&&""!==n.id){if(e.hasPlus)return(0,c.Kp)(`Plus user inappropriately provided ads unit for placement '${t}'`),null;if((e=>(0,g.jq)(e)||(0,g.dE)(e))(e)&&!n.familySafe)return(0,c.Kp)(`User inappropriately provided non-family safe ads unit (id='${n.id}') for placement '${t}'`,{once:!0}),null;const[i,o]=n.id.split("/");return{client:i,familySafe:n.familySafe,slot:o}}}return null},S=(e,t)=>`${e.toLowerCase()}_ad${t?`_${t}`:""}`,w=(e,t,n,i)=>{(0,p.j)(e,{ad_network:"adsense",ad_placement:t.toLowerCase(),ad_type:"banner",ad_unit:n,family_safe:i})},T=(e,t)=>!e.inventory.premium_subscription&&!e.inventory.schools_pro_subscription&&(e.shop.isLoaded?e.shop.in_app_purchase.some((({productId:e})=>(0,l.n9)(e))):void 0)&&!(0,l.J9)(t.ipCountry),I=e=>e.shop.isLoaded?e.shop.in_app_purchase.some((({productId:e})=>(0,l.n9)(e)&&(0,l.TF)(e)&&!(0,l.Me)(e))):void 0,k=e=>e.shop.isLoaded?e.shop.in_app_purchase.some((({productId:e})=>(0,l.n9)(e)&&(0,l.Zi)(e))):void 0,C=e=>{var t;if(!e.shop.isLoaded)return;const n=null===(t=e.shop.in_app_purchase.find((e=>(0,l.n9)(e.productId)&&(0,l.u0)(e.productId))))||void 0===t?void 0:t.productId;return void 0!==n&&(0,l.n9)(n)?(0,l.qG)((0,l.ZT)(n)):"USD"},R=(e,t)=>e&&t,O=e=>e,N={"progress-quiz-ad":"duo.internalAds.plus.progressQuizAd","progress-quiz-reminder":"duo.internalAds.sessionEnd.progressQuizReminder",standard:"duo.internalAds.sessionEnd.plus"},L=(e,t)=>{let n=null!=t?t:{lastShowTimestamp:0,showCount:0};return(0,u.No)(N[e])?n=(0,u.rV)(N[e]):P(e,n),n},P=(e,t)=>{(0,u.LS)(N[e],t)},A=({config:e,isDesktop:t,items:n,user:i})=>{if(!T(n,e)||!t||(0,g.pN)(i))return!1;const o=L("standard"),r=Math.min(o.showCount,7)*(0,s.dz)({days:1})*1e3;return 0===o.showCount||Date.now()>o.lastShowTimestamp+r},D=()=>{P("standard",{lastShowTimestamp:Date.now(),showCount:L("standard").showCount+1})},x=({config:e,isDesktop:t,items:n,user:i})=>{if(!T(n,e)||!(e=>e.shop.isLoaded?e.shop.in_app_purchase.some((({productId:e})=>(0,l.gK)(e))):void 0)(n)||!t||(0,g.pN)(i))return!1;const o=i.streak;return 7===o||o>0&&o%50==0},M=(e,t,n)=>{var i;if(!n||!t||(0,g.pN)(e))return!1;const o=e.sessionsCompleted,s=L("progress-quiz-ad",{lastSessionsCompleted:o-Math.floor(10*Math.random()),lastShowTimestamp:Date.now(),showCount:0});return o<(s.lastSessionsCompleted||0)&&(s.lastSessionsCompleted=0,P("progress-quiz-ad",s)),s.showCount<3&&(o-(null!==(i=s.lastSessionsCompleted)&&void 0!==i?i:0)>=10||Date.now()-s.lastShowTimestamp>5184e5)},U=(e,t="recurring")=>{const n=L("progress-quiz-ad");P("progress-quiz-ad",{lastSessionsCompleted:e.sessionsCompleted,lastShowTimestamp:Date.now(),showCount:"introduction"===t?0:n.showCount+1})},F=()=>{const e=L("progress-quiz-ad");P("progress-quiz-ad",{lastSessionsCompleted:e.lastSessionsCompleted,lastShowTimestamp:Date.now(),showCount:0})},j=(e,t,n)=>{var i;if(!t||!e.hasPlus)return!1;const o=e.sessionsCompleted,s=L("progress-quiz-reminder",{lastSessionsCompleted:o-Math.floor(10*Math.random()),lastShowTimestamp:Date.now(),showCount:0});return o<(s.lastSessionsCompleted||0)&&(s.lastSessionsCompleted=0,P("progress-quiz-reminder",s)),((e,t)=>{var n;return t>=(null!==(n=(0,d.dx)(e.learningLanguage).rowsUnlocked)&&void 0!==n?n:0)+2})(e,n)&&(o-(null!==(i=s.lastSessionsCompleted)&&void 0!==i?i:0)>=10||Date.now()-s.lastShowTimestamp>5184e5)},B=e=>{const t=L("progress-quiz-reminder");P("progress-quiz-reminder",{lastSessionsCompleted:e.sessionsCompleted,lastShowTimestamp:Date.now(),showCount:t.showCount+1})},H=e=>{P("progress-quiz-reminder",{lastSessionsCompleted:e.sessionsCompleted,lastShowTimestamp:Date.now(),showCount:0})}},40387:(e,t,n)=>{"use strict";n.d(t,{hM:()=>s,jJ:()=>r,IF:()=>a});var i=n(80254),o=n(11811);const s=e=>{const{currentIndex:t,session:n,session:{adaptiveChallenges:s,challenges:a}}=e;if(!s)return;if(r(n))return;const l=a.slice(0,t+1),c=a.slice(t+1),u=l.every((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct}))&&c.length===s.length,d=i.jj(a,!1,(e=>e.id)),p=d[d.length-1],m=1===l.filter((e=>{var t;return!1===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})).length&&t+1===a.indexOf(p)&&p.type!==o.Sm.Speak;switch(n.type){case o.FF.GlobalPractice:return u?s:m?[s[0]]:void 0;case o.FF.Lesson:case o.FF.SkillPractice:return u?s:void 0;default:return}},r=({adaptiveChallenges:e,challenges:t})=>e&&i.jV(t.map((e=>e.id)),e.map((e=>e.id))).length>0,a=e=>{const{currentIndex:t,session:{adaptiveChallenges:n,challenges:o}}=e;if(void 0===n)return!1;const s=n.map((e=>e.id)),r=o.slice(0,t+1).map((e=>e.id)),a=o[t+1];return 0===i.jV(r,s).length&&s.includes(null==a?void 0:a.id)}},9979:(e,t,n)=>{"use strict";n.d(t,{nN:()=>a,Gg:()=>l,q8:()=>c,jt:()=>u});var i=n(88528),o=n(50498),s=n(59815),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const a=1e3*parseFloat(i.Z["duration-fade"]),l=()=>new Promise((e=>{requestAnimationFrame((()=>requestAnimationFrame(e)))})),c={EaseInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,EaseInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,EaseInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,EaseInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,EaseInQuad:e=>e*e,EaseInQuart:e=>e*e*e*e,EaseInQuint:e=>e*e*e*e*e,EaseOutCubic:e=>--e*e*e+1,EaseOutExpo:e=>1-Math.pow(2,-10*e),EaseOutQuad:e=>e*(2-e),EaseOutQuart:e=>1- --e*e*e*e,EaseOutQuint:e=>1+--e*e*e*e*e,Linear:e=>e},u=({animationDelay:e=0,animationDuration:t,cancelToken:n,easingFunction:i=c.Linear,onAnimate:a})=>r(void 0,void 0,void 0,(function*(){if(e>0&&(yield(0,o._v)(e)),null==n?void 0:n.isCancelled())throw new s.$K;const l=Date.now(),c=l+t;return new Promise(((e,t)=>{const o=()=>r(void 0,void 0,void 0,(function*(){yield new Promise((e=>{requestAnimationFrame(e)})),(null==n?void 0:n.isCancelled())&&t(new s.$K);const r=Date.now();if(r<c){const e=i((r-l)/(c-l));a(e),o()}else a(1),e()}));o()}))}))},30977:(e,t,n)=>{"use strict";n.d(t,{Sl:()=>V,I7:()=>i,d0:()=>I,_s:()=>k,Vi:()=>C,WF:()=>o,Uw:()=>s,zQ:()=>r,bG:()=>a,lr:()=>l,mJ:()=>c,i_:()=>u,zk:()=>d,lB:()=>p,IZ:()=>X,qF:()=>m,dQ:()=>g,Ny:()=>h,dF:()=>_,zi:()=>v,wO:()=>f,xr:()=>y,s3:()=>a,bu:()=>E,PA:()=>b,uf:()=>S,yG:()=>w,Mw:()=>T,w1:()=>R});var i={};n.r(i),n.d(i,{claimAchievement:()=>oe,earnTipsAchievement:()=>se,getAchievementsV3:()=>ne,migrateToV3:()=>ie});var o={};n.r(o),n.d(o,{createB2BInvoice:()=>ce,getB2BPricingData:()=>le,submitB2BInvoice:()=>de,updateB2BInvoice:()=>ue});var s={};n.r(s),n.d(s,{getStatus:()=>ge});var r={};n.r(r),n.d(r,{getCharacterChart:()=>ve,sessionCreate:()=>ye,sessionSubmit:()=>fe});var a={};n.r(a),n.d(a,{getExplanation:()=>Se,getLottieAnimation:()=>we,getSmartTip:()=>Te,requestGradingConfig:()=>Ie});var l={};n.r(l),n.d(l,{getDraftExplanation:()=>Ce});var c={};n.r(c),n.d(c,{addModerator:()=>xe,isSpecialForumTopic:()=>Le,listAllMods:()=>De,listMods:()=>Ae,listTopics:()=>Pe,removeModerator:()=>Me,undeleteComment:()=>Ne});var u={};n.r(u),n.d(u,{block:()=>nt,deleteFriendRecommendation:()=>Ke,facebookToDuolingo:()=>ot,follow:()=>et,getFollowers:()=>Qe,getFollowing:()=>Xe,getFriendRecommendations:()=>$e,getKudosAssets:()=>Ge,getKudosDrawer:()=>Ve,getKudosFeed:()=>Be,getKudosReactions:()=>He,getSocialProfile:()=>Je,searchUsers:()=>qe,sendKudos:()=>Ze,unblock:()=>it,unfollow:()=>tt,unsendKudos:()=>We,updateFriendRecommendations:()=>Ye,updateKudos:()=>ze});var d={};n.r(d),n.d(d,{getHints:()=>rt});var p={};n.r(p),n.d(p,{submitDuoconForm:()=>lt});var m={};n.r(m),n.d(m,{L:()=>ut});var g={};n.r(g),n.d(g,{LEAGUES_ID:()=>mt,SCHOOLS_CLASSROOM_LEADERBOARD_ID:()=>gt,get:()=>bt,patch:()=>wt,post:()=>St});var h={};n.r(h),n.d(h,{complete:()=>Rt,detectLanguage:()=>Lt,inspect:()=>Pt,search:()=>Ct,translate:()=>Nt,translateInfo:()=>Ot});var _={};n.r(_),n.d(_,{betaSignup:()=>Dt});var v={};n.r(v),n.d(v,{ackHomeMessage:()=>Ut,ackSessionEndMessages:()=>Ft,getHomeMessages:()=>jt,getSessionEndMessages:()=>Bt});var f={};n.r(f),n.d(f,{getMistakeCount:()=>Vt,getMistakes:()=>Zt});var y={};n.r(y),n.d(y,{trackSplashLoad:()=>zt});var E={};n.r(E),n.d(E,{AssignmentType:()=>$t,getClassroomByCode:()=>Qt,getUserAssignments:()=>Xt,getUserClassroomContestState:()=>nn,getUserClassrooms:()=>Jt,joinClassroom:()=>en,leaveClassroom:()=>tn});var b={};n.r(b),n.d(b,{detectDuplicates:()=>rn,fullyConnectDuplicates:()=>an,getSlackReportTypes:()=>ln,getSuggestedFeatures:()=>cn,reportIssue:()=>un});var S={};n.r(S),n.d(S,{sendDownloadSMS:()=>pn});var w={};n.r(w),n.d(w,{ReportReason:()=>_n,reportProfileUser:()=>vn});var T={};n.r(T),n.d(T,{getCarousel:()=>On,getConfig:()=>kn,getListingUpdate:()=>Cn,getStories:()=>bn,getStory:()=>Sn,postStoryComplete:()=>Tn,recordUserReply:()=>In,seenListingUpdate:()=>Rn});var I={};n.r(I),n.d(I,{createSentenceDiscussion:()=>Bn,deactivate:()=>Dn,dismissNotification:()=>jn,getDeleteModLog:()=>Hn,getNotifications:()=>Mn,getSentence:()=>Fn,getShadowbannedUsers:()=>Gn,getSocialCurrencyStats:()=>Wn,getVocabulary:()=>zn,inviteFriend:()=>xn,logout:()=>An,resetPassword:()=>$n,shadowbanUser:()=>Vn,unshadowbanUser:()=>Zn,uploadAvatar:()=>Un});var k={};n.r(k),n.d(k,{courseList:()=>ti,courseShow:()=>ni,courseSubscribe:()=>ai,courseUnsubscribe:()=>li,getDictionaryPage:()=>di,getExampleSentences:()=>ui,getLanguageTokens:()=>ii,getVerbTable:()=>ci,legacyLanguageId:()=>Qn,registerDevice:()=>si,unregisterDevice:()=>ri,updateExperiment:()=>oi,userBan:()=>Jn});var C={};n.r(C),n.d(C,{ChallengeReports:()=>Ki,EventType:()=>Si,achievementsUpdate:()=>Oi,addUserStripePaymentMethod:()=>io,challengeCreate:()=>$i,challengeGrade:()=>Yi,consumeDuoPlus:()=>fo,consumeReward:()=>yo,createUserPlusDiscount:()=>So,emailVerificationSend:()=>Ni,emailVerificationUpdate:()=>Li,forgotPassword:()=>_o,generatePracticeTestoutSession:()=>To,getConfig:()=>mo,getCustomAcquisitionSurveyResponses:()=>Eo,getShopItems:()=>Ji,getUnfilteredPrivacySettings:()=>ho,getUserInventory:()=>no,getUserPaymentMethods:()=>to,getUserShopItem:()=>Xi,getUserXPSummaries:()=>Fi,login:()=>wi,patchUserShopItem:()=>Qi,purchaseUserShopItem:()=>oo,registerTrackingStatus:()=>vo,removeEmailUpdate:()=>Pi,removeUserFromFamilyPlan:()=>lo,reportSentence:()=>qi,resetPassword:()=>Ti,sessionCreate:()=>Wi,sessionSubmit:()=>zi,skillUpdate:()=>Zi,subscribeToBangoPlan:()=>po,subscribeToFamilyPlan:()=>ao,updateOptionalFeature:()=>wo,updatePriorProficiencyOnboarding:()=>bo,updateUserStripePaymentMethod:()=>eo,useUserShopItem:()=>go,userAchievements:()=>Ri,userCreate:()=>Ii,userDeleteCourse:()=>Vi,userInfo:()=>ki,userInfoPartial:()=>Ci,userMessage:()=>Gi,userModeratedEvents:()=>Hi,userSearch:()=>Di,userSearchByEmail:()=>xi,userSubscribersData:()=>Bi,userSubscriptions:()=>Ui,userSubscriptionsData:()=>ji,userUpdate:()=>Mi,usernameValidate:()=>Ai,validateBangoToken:()=>uo,validateFamilyInviteToken:()=>ro,validatePromoCode:()=>so});var R={};n.r(R),n.d(R,{getReport:()=>ko});var O=n(14206),N=n.n(O),L=n(60581),P=n.n(L),A=n(54412),D=n(53229),x=n(51158),M=n(18804),U=n(16086),F=n(20028),j=n(59815);class B extends j.pY{static from(e,{method:t,url:n}){var i;if(e instanceof B)return e;const o=new B(e.message);return o.code=(null!==(i=e.code)&&void 0!==i?i:"AbortError"===e.name)?"ECONNABORTED":void 0,o.method=t,o.response=e.response,o.url=n,o}}const H=B;var G=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const V=class{constructor(e){this.addBearer=!1,this.addCacheBuster=!1,this.addTraceHeaders=!1,this.errorInterceptors=[],this.interceptors=[],this.serviceMap={},this.useFormEncoding=!1,this.baseUrl=(null==e?void 0:e.startsWith("/"))?`${window.location.origin}${e}`:null!=e?e:""}addErrorInterceptor(e){return this.errorInterceptors.push(e),this}addResponseInterceptor(e){return this.interceptors.push(e),this}delete(e,t,n){return this.request("DELETE",e,t,n)}enableBearer(){return this.addBearer=!0,this}enableCacheBuster(){return this.addCacheBuster=!0,this}enableFormEncoding(){return this.useFormEncoding=!0,this}enableTraceHeaders(){return this.addTraceHeaders=!0,this}get(e,t){return this.request("GET",e,void 0,t)}getBlob(e,t){return this.request("GET",e,void 0,t,"blob")}getBuffer(e,t){return this.request("GET",e,void 0,t,"arraybuffer")}getText(e,t){return this.request("GET",e,void 0,t,"text")}patch(e,t,n){return this.request("PATCH",e,t,n)}post(e,t,n){return this.request("POST",e,t,n)}put(e,t,n){return this.request("PUT",e,t,n)}setServiceEnvironment(e,t){return t?this.serviceMap[e]=t:delete this.serviceMap[e],this}request(e,t,n,i={},o="json"){var s,r;return G(this,void 0,void 0,(function*(){const a=Object.assign({},i.headers),l=i.params instanceof URLSearchParams?new URLSearchParams(i.params):Object.assign({},i.params),c=(0,A.ej)(A.Vj.JWT);if(this.addBearer&&c&&(a.Authorization=`Bearer ${c}`),this.addCacheBuster&&"GET"===e&&(l instanceof URLSearchParams?l.set("_",`${Date.now()}`):l._=Date.now()),this.addTraceHeaders){if(c){const e=null===(s=null===M.y0||void 0===M.y0?void 0:(0,M.y0)())||void 0===s?void 0:s.user,t=null!==(r=(0,U.MJ)(c))&&void 0!==r?r:0;e&&(0,F.Sk)(e)&&(a["Jaeger-Debug-Id"]=`${t}`),a["X-Amzn-Trace-Id"]=`User=${t}`}else a["X-Amzn-Trace-Id"]="User=0";"/deactivate"!==t&&"/logout"!==t&&(a["X-Requested-With"]="XMLHttpRequest")}const u=Object.entries(this.serviceMap);u.length&&(a["x-duolingo-service-map"]=u.map((([e,t])=>`${e}=${t}`)).join(";")),!this.useFormEncoding||!n||n instanceof FormData||(n=(0,D.Vp)(n),a["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");let d=P()(t,l);d=(0,D.qy)(d.startsWith("//")?d:d.startsWith("/")?`${this.baseUrl}${d}`:d);const p=(()=>G(this,void 0,void 0,(function*(){var s,r;const l=window.duo.useFetch&&void 0!==i.timeout&&!("AbortController"in window);if(l&&(0,x.um)("The AbortController API isn't available. Falling back to Axios.",{once:!0}),window.duo.useFetch&&!l){void 0===n||n instanceof FormData||(null==a?void 0:a["Content-Type"])||(a["Content-Type"]="application/json; charset=UTF-8");const r=new AbortController;void 0!==i.timeout&&setTimeout((()=>r.abort()),i.timeout);const l=yield fetch(d,{body:n instanceof FormData?n:JSON.stringify(n),credentials:this.addBearer?"include":"same-origin",headers:a,method:e,signal:r.signal}),c="https://d3kwyfyztuo0xs.cloudfront.net/config/latest/0.9.6"===t||(null===(s=l.headers.get("content-type"))||void 0===s?void 0:s.split(";").some((e=>"application/json"===e.trim()))),u={data:yield"arraybuffer"===o?l.arrayBuffer():"blob"===o?l.blob():"text"===o?l.text():c?l.json():void 0,headers:Object.fromEntries(l.headers.entries()),status:l.status,statusText:l.statusText};if(!l.ok){const t=new H(`Request failed with status code ${l.status}`);throw t.method=e,t.response=u,t.url=d,t}return u}return N().request({data:n,headers:a,method:e,responseType:o,timeout:null!==(r=i.timeout)&&void 0!==r?r:1e9,url:d,withCredentials:this.addBearer})})))();try{const e=yield p;return this.interceptors.forEach((t=>t(e))),e}catch(n){const i=H.from(n,{method:e,url:d});throw this.errorInterceptors.forEach((e=>e(t,i))),i}}))}};var Z=n(80254),W=n(59273),z=n(8649),$=n(11908);const Y=e=>new V(e).addErrorInterceptor(((e,{response:t})=>{})).addResponseInterceptor((e=>{})).enableBearer().enableCacheBuster().enableTraceHeaders(),K=(e="")=>{const t=(0,W.pL)();return void 0!==t?Y(`https://www.duolingo.com${e}`).setServiceEnvironment("monolith",`next-${t}`):Y(e)},q=e=>Y(e).enableFormEncoding(),J=()=>{Z.VO(A.Vj).forEach((e=>(0,A.nJ)(e))),(0,$.cl)($.Qt.State);try{new Promise((e=>{window.FB?window.FB.logout((()=>e())):e()}))}catch(e){}try{(0,z.w)()}catch(e){}},X=e=>e instanceof H;var Q=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const ee=["champion","conqueror","friendly","legendary","overtime","photogenic","regal","sage","scholar","sharpshooter","strategist","wildfire","winner"],te=Y("https://duolingo-achievements-prod.duolingo.com"),ne=(e,t,n,i,o,s,r)=>Q(void 0,void 0,void 0,(function*(){const a=`/users/${e}/achievements`;if(!t||!n)return[];const l={fromLanguage:t,hasPlus:r?1:0,isAgeRestricted:i?1:0,isProfilePublic:o?1:0,isSchools:s?1:0,learningLanguage:n};return(c=(yield te.get(a,{params:l})).data,null!==(u=c.achievements)&&void 0!==u?u:[]).filter((({name:e})=>ee.includes(e)));var c,u})),ie=(e,t=!0)=>Q(void 0,void 0,void 0,(function*(){const n=`/users/${e}/migrate`;yield te.post(n,{async:t,dryRun:!1})})),oe=(e,t)=>Q(void 0,void 0,void 0,(function*(){const n=`/users/${t}/${e.name}/${e.tier}/claim`;yield te.post(n)})),se=e=>Q(void 0,void 0,void 0,(function*(){const t=`/users/${e}/update`;yield te.post(t,{tip_read:!0})}));var re=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const ae=new V((0,W.gQ)("debugBusinessPage")?"https://duolingo-subscriptions-stage.duolingo.com":"https://duolingo-subscriptions-prod.duolingo.com").addErrorInterceptor(((e,{response:t})=>{})).addResponseInterceptor((e=>{})).enableCacheBuster().enableTraceHeaders(),le=e=>re(void 0,void 0,void 0,(function*(){return(yield ae.get("/b2b/pricing/",{params:{country_code:e}})).data})),ce=e=>re(void 0,void 0,void 0,(function*(){return(yield ae.post("/b2b/invoices/",e)).data})),ue=(e,t)=>re(void 0,void 0,void 0,(function*(){return(yield ae.patch(`/b2b/invoices/${e}/`,t)).data})),de=e=>re(void 0,void 0,void 0,(function*(){return(yield ae.post(`/b2b/invoices/${e}/finalize/`)).data}));var pe=n(21061);const me=new V("https://brb.duolingo.com"),ge=()=>{return e=void 0,t=void 0,i=function*(){let e;try{e=(0,U.Jb)()}catch(t){e=0}const t=e%100;try{if(void 0!==(yield me.get(`/${t}/web.json?user=${e}&ts=${(0,pe.Zo)()}&tzoffset=${(0,pe.pQ)()/-60}`,{timeout:1e4})).data.brb_version)return"enabled"}catch(e){}return"disabled"},new((n=void 0)||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i};var he=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const _e=Y("https://www-prod.duolingo.com/2017-06-30/alphabets"),ve=(e,t)=>he(void 0,void 0,void 0,(function*(){return(yield _e.get(`/courses/${e}/${t}`)).data})),fe=(e,t)=>he(void 0,void 0,void 0,(function*(){return _e.put(`/sessions/${t.learningLanguage}/${t.fromLanguage}/${e.id}`,e)})),ye=(e,t,n)=>he(void 0,void 0,void 0,(function*(){return _e.post(`/sessions/${e}/${t}`,n)}));var Ee=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const be=new V,Se=e=>Ee(void 0,void 0,void 0,(function*(){return(yield be.get(e)).data})),we=e=>Ee(void 0,void 0,void 0,(function*(){return(yield be.get(e)).data})),Te=e=>Ee(void 0,void 0,void 0,(function*(){return(yield be.get(e)).data})),Ie=()=>Ee(void 0,void 0,void 0,(function*(){return(yield be.get("https://d3kwyfyztuo0xs.cloudfront.net/config/latest/0.9.6")).data}));const ke=Y("https://explanations.duolingo.com"),Ce=(e,t)=>{return n=void 0,i=void 0,s=function*(){const n=`/diagnostics-api/explanations/${t}/${e}`;return(yield ke.get(n)).data},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{l(s.next(e))}catch(e){t(e)}}function a(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}l((s=s.apply(n,i||[])).next())}));var n,i,o,s};var Re=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Oe=q("https://forum-api.duolingo.com"),Ne=e=>Oe.post(`/comments/${e}/undelete`),Le=e=>null===e.learning_language,Pe=()=>Re(void 0,void 0,void 0,(function*(){return(yield Oe.post("/diagnostics/topic_moderators/list_topics")).data})),Ae=e=>Re(void 0,void 0,void 0,(function*(){return(yield Oe.post("/diagnostics/topic_moderators/list_mods",{topic_id:e})).data})),De=()=>Re(void 0,void 0,void 0,(function*(){return(yield Oe.post("/diagnostics/topic_moderators/list_mods")).data})),xe=(e,t)=>Re(void 0,void 0,void 0,(function*(){return(yield Oe.post("/diagnostics/topic_moderators/add",{topic_id:e,user_id:t})).data})),Me=(e,t)=>Re(void 0,void 0,void 0,(function*(){return(yield Oe.post("/diagnostics/topic_moderators/remove",{topic_id:e,user_id:t})).data}));var Ue=n(81149),Fe=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const je=Y("https://friends-prod.duolingo.com"),Be=(e,t,n)=>Fe(void 0,void 0,void 0,(function*(){var i;return(null===(i=null==t?void 0:t.featureFlags)||void 0===i?void 0:i.friends_microservice_web_client)?(yield je.get(`/kudos/${(0,U.Jb)()}/feed`,{params:Object.assign({uiLanguage:e},void 0===n?{}:{after:n})})).data:{kudosConfig:{reactions:[],shareLabel:""},kudosFeed:[]}})),He=(e,t,n,i,o)=>Fe(void 0,void 0,void 0,(function*(){var s;if(null===(s=null==n?void 0:n.featureFlags)||void 0===s?void 0:s.friends_microservice_web_client){const n=void 0===o?{pageSize:i}:{pageAfter:o,pageSize:i};return(yield je.get(`/kudos/${e}/reactions/${t}`,{params:n})).data}return{cursor:null,userReactions:[]}})),Ge=e=>Fe(void 0,void 0,void 0,(function*(){var t;if(null===(t=null==e?void 0:e.featureFlags)||void 0===t?void 0:t.friends_microservice_web_client){const e=(yield je.get("/kudos/assets")).data;return Object.assign(Object.assign({},e.kudosFeedAssets),e.kudosDrawerAssets)}return{}})),Ve=(e,t)=>Fe(void 0,void 0,void 0,(function*(){var n;if(null===(n=null==t?void 0:t.featureFlags)||void 0===n?void 0:n.friends_microservice_web_client){const t=(yield je.get(`/kudos/${(0,U.Jb)()}/drawer`,{params:{uiLanguage:e}})).data.kudosDrawer;return t?t.isSystemGenerated?null:t:null}return null})),Ze=(e,t,n)=>Fe(void 0,void 0,void 0,(function*(){yield je.post("/kudos",{eventIds:e,reactionType:t,screen:n})})),We=e=>Fe(void 0,void 0,void 0,(function*(){yield je.delete(`/kudos/${e}`)})),ze=(e,t,n)=>Fe(void 0,void 0,void 0,(function*(){yield je.patch("/kudos",{eventIds:e,isInteractionEnabled:t,screen:n})})),$e=(e,t)=>Fe(void 0,void 0,void 0,(function*(){const n={filterUsers:!0,pageSize:"experiment"===(0,Ue.j6)("connect_web_rotating_suggestions",void 0)?50:100,uiLanguage:t};return(yield je.get(`/users/${e}/recommendations`,{params:n})).data})),Ye=(e,t)=>Fe(void 0,void 0,void 0,(function*(){return(yield je.patch(`/users/${e}/recommendations`,{userIds:t})).data})),Ke=(e,t)=>Fe(void 0,void 0,void 0,(function*(){yield je.delete(`/users/${e}/recommendations/${t}`)})),qe=(e,t,n)=>Fe(void 0,void 0,void 0,(function*(){const i={cursor:n,pageSize:e,query:t,searchType:"QUERY"};return(yield je.get("/users",{params:i})).data})),Je=(e,t)=>Fe(void 0,void 0,void 0,(function*(){return(yield je.get(`/users/${e}/profile`,{params:{pageSize:t}})).data})),Xe=(e,t,n)=>Fe(void 0,void 0,void 0,(function*(){return(yield je.get(`/users/${e}/following`,{params:Object.assign({pageSize:t},n?{pageAfter:n}:void 0)})).data.following})),Qe=(e,t,n)=>Fe(void 0,void 0,void 0,(function*(){return(yield je.get(`/users/${e}/followers`,{params:Object.assign({pageSize:t},n?{pageAfter:n}:void 0)})).data.followers})),et=(e,t,n,i,o)=>Fe(void 0,void 0,void 0,(function*(){const s={component:t,follow_reason:n,follow_suggestion_score:o,suggested_reason:i};yield je.post(`/users/${(0,U.Jb)()}/follow/${e}`,s)})),tt=e=>Fe(void 0,void 0,void 0,(function*(){yield je.delete(`/users/${(0,U.Jb)()}/follow/${e}`)})),nt=e=>Fe(void 0,void 0,void 0,(function*(){yield je.post(`/users/${(0,U.Jb)()}/block/${e}`)})),it=e=>Fe(void 0,void 0,void 0,(function*(){yield je.delete(`/users/${(0,U.Jb)()}/block/${e}`)})),ot=(e,t)=>Fe(void 0,void 0,void 0,(function*(){return(yield je.post("/facebook-connect",{facebookFriends:JSON.stringify(t.map((e=>({id:e})))),facebookId:e})).data.users}));var st=n(74245);const rt=(e,t,n,i)=>{return o=void 0,s=void 0,a=function*(){const{tokens:o}=yield(0,D.g3)(((e,t,n)=>`https://${e}/api/1/dictionary/hints/${(0,st.D3)(t)}/${(0,st.D3)(n)}`)(e,n,t),{cache:"true",format:"new",sentence:i});return o.map((e=>{var{hint_table:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["hint_table"]);return Object.assign({hintTable:t&&Object.assign(Object.assign({},t),{headers:t.headers?t.headers.map((e=>e.token)):void 0,rows:t.rows.map((e=>e.cells))})},n)}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{l(a.next(e))}catch(e){t(e)}}function i(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,i)}l((a=a.apply(o,s||[])).next())}));var o,s,r,a},at=new V("https://api.hsforms.com"),lt=e=>ct("6860078","f7f63028-e5eb-43e6-842e-945d3041b113",[{name:"email",value:e}]),ct=(e,t,n)=>at.post(`/submissions/v3/integration/submit/${e}/${t}`,{context:{pageUri:window.location.href},fields:n});var ut;!function(e){e.IOS="APPLE",e.Schools="DUOLINGO_SCHOOLS",e.Stripe="DUOLINGO",e.Android="GOOGLE_PLAY",e.ImmersivePlus="IMMERSIVE_PLUS",e.Admin="NONE",e.ReferralInvitee="REFERRAL_INVITEE",e.ReferralInviter="REFERRAL_INVITER",e.Referral="REFERRAL"}(ut||(ut={}));var dt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const pt=Y("https://duolingo-leaderboards-prod.duolingo.com"),mt="7d9f5dd1-8423-491a-91f2-2532052038ce",gt="7d9f5dd1-8423-491a-91f2-2532052038ce",ht=e=>({itemId:e.item_id,itemQuantity:e.item_quantity,rank:e.rank,rewardType:e.reward_type,tier:e.tier}),_t=e=>({cohortSize:e.cohort_size,cohortType:e.cohort_type,numDemoted:e.num_demoted,numLosers:e.num_losers,numPromoted:e.num_promoted,numWinners:e.num_winners,rewards:e.rewards.map(ht),scoreType:e.score_type}),vt=e=>({contestEnd:Date.parse(e.contest_end),contestStart:Date.parse(e.contest_start),contestState:e.contest_state,registrationEnd:Date.parse(e.registration_end),registrationStart:Date.parse(e.registration_start),registrationState:e.registration_state,ruleset:_t(e.ruleset)}),ft=e=>({avatarUrl:e.avatar_url,displayName:e.display_name,score:e.score,userId:e.user_id}),yt=e=>({rankings:e.rankings.map(ft),tier:e.tier}),Et=e=>({cohort:yt(e.cohort),complete:e.complete,contest:vt(e.contest),score:e.score,userId:e.user_id}),bt=(e,t,n=!1)=>dt(void 0,void 0,void 0,(function*(){const i=`/leaderboards/${e}/users/${t}`,o={};return n&&(o.client_unlocked=!0),(e=>{const t={tier:e.tier};return void 0!==e.num_sessions_remaining_to_unlock&&(t.numSessionsRemainingToUnlock=e.num_sessions_remaining_to_unlock),void 0!==e.active&&(t.active=null===e.active?null:Et(e.active)),void 0!==e.ended&&(t.ended=e.ended.map(Et)),void 0!==e.leaderboard&&(t.leaderboard=(e=>({activeContest:e.active_contest?vt(e.active_contest):null,nextContestStart:e.next_contest_start?Date.parse(e.next_contest_start):null}))(e.leaderboard)),t})((yield pt.get(i,{params:o})).data)})),St=(e,t)=>dt(void 0,void 0,void 0,(function*(){const n=`/leaderboards/${e}/users/${t}`;yield pt.post(n)})),wt=(e,t)=>dt(void 0,void 0,void 0,(function*(){const n=`/leaderboards/${e}/users/${t}`;yield pt.patch(n)}));var Tt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const It=Y(((0,W.NY)(),"https://duolingo-lexicon-prod.duolingo.com/api/1")),kt=(e,t)=>t.map((t=>`${e}=${encodeURIComponent(t)}`)).join("&"),Ct=({exactitude:e=!1,fromLanguageId:t=st.h9,learningLanguageId:n,query:i})=>Tt(void 0,void 0,void 0,(function*(){const o=(yield It.get("/search",{params:{exactness:e?1:0,languageId:n,query:i,uiLanguageId:t}})).data;if(!(e=>Array.isArray(e.results)&&e.results.every((e=>(e=>(0,st.jO)(e.languageId)&&"string"==typeof e.lexemeId&&"string"==typeof e.text&&(e=>Object.entries(e).every((([e,t])=>(0,st.jO)(e)&&Array.isArray(t)&&t.every((e=>"string"==typeof e)))))(e.translations)&&(void 0===e.exactMatch||"boolean"==typeof e.exactMatch))(e))))(o))throw Error("Unexpected/non-conformant API response received.");return o})),Rt=(e,t)=>Tt(void 0,void 0,void 0,(function*(){return(yield It.get("/complete",{params:{languageId:t,query:e,uiLanguageId:st.h9}})).data})),Ot=()=>Tt(void 0,void 0,void 0,(function*(){return{supportedLanguageIds:(yield It.get("/translate-info")).data.supportedLanguageIDs}})),Nt=e=>Tt(void 0,void 0,void 0,(function*(){const t=(yield It.get("/translate",{params:e})).data;return t.results.length,t.results.length>1&&(0,x.Kp)("Multiple translation results found, which should not happen.",{data:{request:e,response:t}}),t.results[0]})),Lt=e=>Tt(void 0,void 0,void 0,(function*(){const t=(yield It.get(`/detect-language?${kt("query",e)}`)).data;return t.forEach((e=>e.input=decodeURIComponent(e.input))),t})),Pt=e=>Tt(void 0,void 0,void 0,(function*(){e.query.length>16&&((0,x.Kp)(`Truncating an inspection with too many (${e.query.length}) queries.`,{data:e}),e.query=e.query.slice(0,15));const t=(yield It.get(`/inspect?${kt("query",e.query)}`,{params:{fromLanguageId:e.fromLanguageId,learningLanguageId:e.learningLanguageId,sourceLanguageId:e.sourceLanguageId,targetLanguageId:e.targetLanguageId}})).data;return 0===t.results.length&&(0,x.Kp)(`No inspection results found for (${JSON.stringify(e)})`),t.results.length!==e.query.length&&(0,x.Kp)(`Different number of inspections than items in query: "${e.query}" returned ${t.results.length} inspections.`),t.results})),At=Y("https://math-prod.duolingo.com"),Dt=e=>At.post("/beta/signup",{email:e});var xt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Mt=Y("https://www.duolingo.com/2017-06-30/messaging"),Ut=e=>Mt.post("/ack-message/",{messageId:{[e]:{}},userId:(0,U.Jb)()}),Ft=e=>Mt.post("/ack-messages/",{sessionEndMessageLogs:e.map((({ctaWasClicked:e,messageId:t,timestamp:n})=>({ctaWasClicked:e,sessionEndMessageId:{[t]:{}},timestamp:n}))),userId:(0,U.Jb)()}),jt=(e,t)=>xt(void 0,void 0,void 0,(function*(){return(yield Mt.post("/get-messages/",{potentialMessageIds:e.map((e=>({[e]:{}}))),useOnboardingBackend:t,userId:(0,U.Jb)()})).data})),Bt=(e,t)=>xt(void 0,void 0,void 0,(function*(){return(yield Mt.post("/get-messages/",{sessionEndPotentialMessageIds:e.map((e=>({[e]:{}}))),useOnboardingBackend:t,userId:(0,U.Jb)()})).data}));var Ht=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Gt=Y("https://www.duolingo.com/v2/mistakes"),Vt=(e,t,n,i)=>Ht(void 0,void 0,void 0,(function*(){return(yield Gt.get(`/users/${t}/courses/${e}/count`,{params:{includeListening:n,includeSpeaking:i}})).data.numberMistakes})),Zt=(e,t,n,i)=>Ht(void 0,void 0,void 0,(function*(){return(yield Gt.get(`/users/${t}/courses/${e}`,{params:{includeListening:n,includeSpeaking:i,limit:10,requestType:"INBOX"}})).data.mistakes})),Wt=Y("https://invite.duolingo.com"),zt=e=>Wt.post("/user/splash-load",{invite_code:e});var $t,Yt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};!function(e){e.SKILL="SKILL",e.STORY="STORY",e.XP="XP_CHALLENGE"}($t||($t={}));const Kt=Y("https://schools.duolingo.com/api/1"),qt=Y("https://schools.duolingo.com/api/2"),Jt=()=>Yt(void 0,void 0,void 0,(function*(){return(yield Kt.get("/observers/list_settings_classrooms")).data.classrooms})),Xt=()=>Yt(void 0,void 0,void 0,(function*(){return(yield Kt.get("/observers/student_language_assignments")).data})),Qt=e=>Yt(void 0,void 0,void 0,(function*(){return(yield Kt.get("/observers/get_observer_for_code",{params:{link_code:e}})).data})),en=e=>Yt(void 0,void 0,void 0,(function*(){return(yield Kt.post("/observers/join_classroom_by_code",{link_code:e})).data})),tn=e=>Yt(void 0,void 0,void 0,(function*(){yield Kt.post("/observers/leave_classroom",{classroom_id:e})})),nn=e=>Yt(void 0,void 0,void 0,(function*(){return(yield qt.get("/leaderboards/contest_state",{params:{user_id:e}})).data.contests}));Y("https://www.duolingo.com/v1/score");var on=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const sn=Y("https://jeeves.duolingo.com"),rn=e=>on(void 0,void 0,void 0,(function*(){return(yield sn.get("/api/1/detect_duplicates",{params:{issue_key:e}})).data})),an=e=>sn.post("/api/1/fully_connect_duplicates",{issue_keys:e}),ln=()=>on(void 0,void 0,void 0,(function*(){return(yield sn.get("/api/2/shakira/slack_report_types")).data})),cn=e=>on(void 0,void 0,void 0,(function*(){return(yield sn.get("/api/2/shakira/suggested_features",{params:e})).data})),un=(e,t)=>on(void 0,void 0,void 0,(function*(){const n=new FormData;return n.set("issueData",JSON.stringify(e)),t.forEach((([e,t])=>n.set(e,t))),(yield sn.post("/api/2/shakira/report_issue",n)).data}));const dn=K(""),pn=e=>{return t=void 0,n=void 0,o=function*(){yield dn.post("/d",{phoneNumber:e})},new((i=void 0)||(i=Promise))((function(e,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}l((o=o.apply(t,n||[])).next())}));var t,n,i,o};var mn=n(50498),gn=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const hn=Y("https://duolingo-spam-control-prod.duolingo.com");var _n;!function(e){e.NUDITY="nudity",e.SPAM="spam",e.SOMETHING_ELSE="something_else"}(_n||(_n={}));const vn=(e,t)=>gn(void 0,void 0,void 0,(function*(){const{name:n="(Unknown)",picture:i,username:o="(Unknown)",id:s}=e;yield(0,mn.XD)((()=>gn(void 0,void 0,void 0,(function*(){return hn.post("/reports/user_profiles",{name:n,picture:`https:${i}/xlarge`,reason:t,user_id:s,username:o})}))),{retries:1})}));var fn=n(36571),yn=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const En=Y("https://stories.duolingo.com"),bn=(e,t,n,i,o,s,r)=>yn(void 0,void 0,void 0,(function*(){return(yield En.get("/api2/stories",{params:{crowns:o,filterMature:i,fromLanguage:n,illustrationFormat:"svg",learningLanguage:t,masterVersions:e,proposed:r,setSize:s?4:void 0,unlockingMechanism:s}})).data})),Sn=(e,t,n,i,o)=>yn(void 0,void 0,void 0,(function*(){return(yield En.get(`/api2/stories/${t}`,{params:{crowns:i,debugShowAllChallenges:(0,W.gQ)("debugShowAllStoryChallenges"),debugShowOnboarding:(0,W.gQ)("debugShowStoriesOnboarding")?"newUser":void 0,illustrationFormat:"svg",isDesktop:e,masterVersion:n,mode:o,supportedElements:(0,fn.b5)().join(",")}})).data})),wn=["story-complete","part-complete","next-part-unlocked"],Tn=({storyId:e,storySession:t,isMasterVersion:n,mode:i,fromLanguage:o,learningLanguage:s,pathLevelSpecifics:r,isV2Story:a})=>yn(void 0,void 0,void 0,(function*(){var l;const c={awardXp:!0,completedBonusChallenge:null!==(l=t.completedBonusChallenge)&&void 0!==l&&l,customPromptType:t.customPromptType,freeformChallengeCorrectedResponse:t.freeformChallengeCorrectedResponse,freeformChallengeCorrectionModel:t.freeformChallengeCorrectionModel,freeformChallengeCorrectionModelVersion:t.freeformChallengeCorrectionModelVersion,freeformChallengeOriginalResponse:t.freeformChallengeOriginalResponse,freeformChallengePrompt:t.freeformChallengePrompt,freeformChallengePromptType:t.freeformChallengePromptType,freeformChallengeSubmittedResponse:t.freeformChallengeSubmittedResponse,freeformChallengeSumTimeTaken:t.freeformChallengeSumTimeTaken,fromLanguage:o,genericPromptType:t.genericPromptType,hasExamples:t.hasExamples,illustrationFormat:"svg",isV2Story:a,learningLanguage:s,masterVersion:n,maxScore:t.maxScore,mode:i,numHintsUsed:t.hintsUsed.length,pathLevelSpecifics:r,score:t.score,startTime:t.startTime,supportedPartCompleteSubslideTypes:wn.join(",")};return(yield En.post(`/api2/stories/${e}/complete`,c)).data})),In=e=>yn(void 0,void 0,void 0,(function*(){return(yield En.post("/api/userReply",e)).data})),kn=(e,t)=>yn(void 0,void 0,void 0,(function*(){return(yield En.get("/api2/config",{params:{fields:"courses",fromLanguage:t,learningLanguage:e}})).data})),Cn=(e,t,n,i,o)=>yn(void 0,void 0,void 0,(function*(){return(yield En.get("/api2/listingUpdate",{params:{crowns:i,filterMature:n,fromLanguage:t,illustrationFormat:"svg",learningLanguage:e,masterVersion:!1,setSize:o?4:void 0,unlockingMechanism:o}})).data})),Rn=(e,t,n)=>yn(void 0,void 0,void 0,(function*(){yield En.post("/api2/seenListingUpdate",{fromLanguage:t,learningLanguage:e,timeOfUpdate:n})})),On=(e,t,n,i,o,s,r,a)=>yn(void 0,void 0,void 0,(function*(){return(yield En.get("/api2/user/carouselStories",{params:{carouselStories:null==o?void 0:o.join(","),crowns:s,filterMature:i,fromLanguage:n,illustrationFormat:"svg",learningLanguage:t,masterVersions:e,proposed:a,setSize:r?4:void 0,unlockingMechanism:r}})).data}));var Nn=n(88868),Ln=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Pn=q(""),An=(e="/")=>Ln(void 0,void 0,void 0,(function*(){yield Pn.post("/logout"),J(),yield(0,Nn.Zs)(e)})),Dn=()=>Ln(void 0,void 0,void 0,(function*(){yield Pn.post("/deactivate"),(0,$.cl)($.Qt.State)})),xn=e=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.post("/invite",{email:e})).data})),Mn=()=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.get("/notifications")).data})),Un=e=>Ln(void 0,void 0,void 0,(function*(){const t=new FormData;t.append("image",e),yield Pn.post("/avatars",t)})),Fn=(e,t,n)=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.get(`/sentence/${e}`,{params:{learning_language:(0,st.D3)(t),ui_language:(0,st.D3)(n)}})).data})),jn=e=>Ln(void 0,void 0,void 0,(function*(){yield Pn.post("/dismiss_notification",{message:e.toLowerCase()})})),Bn=(e,t,n,i)=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.post("/sentences/comment",{learning_language:(0,st.D3)(t),message:n,sentence_id:i,ui_language:(0,st.D3)(e)})).data})),Hn=e=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.get("/admin_tools",{params:{log_type:"deletes",page:e}})).data})),Gn=()=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.get("/admin_tools/shadow_banned")).data})),Vn=e=>Ln(void 0,void 0,void 0,(function*(){const t=(yield Pn.post("/admin_tools/shadow_banned/add",{username:e})).data;if(t.error)throw t.error;return t})),Zn=e=>Ln(void 0,void 0,void 0,(function*(){const t=(yield Pn.post("/admin_tools/shadow_banned/remove",{user_id:e})).data;if(t.error)throw t.error;return t})),Wn=()=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.get("/admin_tools/social_currency_stats")).data})),zn=()=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.get("/vocabulary/overview")).data})),$n=(e,t,n,i)=>Ln(void 0,void 0,void 0,(function*(){return(yield Pn.post("/reset",{confirm_new_password:i,email:e,new_password:n,token:t})).data}));var Yn=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))},Kn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const qn=q("/api/1"),Jn=(e,t,n,i)=>Yn(void 0,void 0,void 0,(function*(){const o=new FormData;o.append("user_id",`${e}`),o.append("username",t),i&&o.append("image",i),n.length&&o.append("ban_description",n),yield qn.post("/shadowban_user",o)})),Xn=e=>{switch(e){case"zh-CN":return"zh";default:return e}},Qn=e=>{switch(e){case"zh":return"zh-CN";default:return e}},ei=e=>{var{from_language:t,from_language_id:n,from_language_name:i,learning_language:o,learning_language_id:s,learning_language_name:r,num_learners:a,num_learners_string:l}=e,c=Kn(e,["from_language","from_language_id","from_language_name","learning_language","learning_language_id","learning_language_name","num_learners","num_learners_string"]);return Object.assign({fromLanguage:t,fromLanguageId:Xn(n),fromLanguageName:i,learningLanguage:o,learningLanguageId:Xn(s),learningLanguageName:r,numLearners:a,numLearnersString:l},c)},ti=()=>Yn(void 0,void 0,void 0,(function*(){return(yield qn.get("/courses/list")).data.map(ei).filter((({fromLanguageId:e,learningLanguageId:t})=>(0,st.zp)(t,e)))})),ni=(e,t=st.h9,n=st.h9)=>Yn(void 0,void 0,void 0,(function*(){return(e=>{var{beta_date:t,course_data:n,estimated_beta_date:i,estimated_beta_date_string:o,from_language:s,from_language_name:r,from_language_id:a,learning_language:l,learning_language_id:c,learning_language_name:u,num_learners:d,num_learners_string:p,released_date:m,released_date_string:g,start_date:h,subscriber_count:_,user_subscribed:v}=e,f=Kn(e,["beta_date","course_data","estimated_beta_date","estimated_beta_date_string","from_language","from_language_name","from_language_id","learning_language","learning_language_id","learning_language_name","num_learners","num_learners_string","released_date","released_date_string","start_date","subscriber_count","user_subscribed"]);return Object.assign({betaDate:t,courseData:n,estimatedBetaDate:i,estimatedBetaDateString:o,fromLanguage:s,fromLanguageId:Xn(a),fromLanguageName:r,learningLanguage:l,learningLanguageId:Xn(c),learningLanguageName:u,numLearners:d,numLearnersString:p,releasedDate:m,releasedDateString:g,startDate:h,subscriberCount:_,userSubscribed:v},f)})((yield qn.get(`/courses/${Qn(e)}/${Qn(t)}/show`,{params:{ui_language_abbrev:(0,st.D3)(n)}})).data)})),ii=Z.HP((e=>Yn(void 0,void 0,void 0,(function*(){return(yield qn.get("/get_language_tokens",{params:{language:e}})).data.tokens||[]})))),oi=(e,t)=>Yn(void 0,void 0,void 0,(function*(){yield qn.post(`/experiments/${e}/treatments`,t)})),si=(e,t)=>Yn(void 0,void 0,void 0,(function*(){yield qn.post("/me/register_device",{registration_id:e,subscription:t})})),ri=e=>Yn(void 0,void 0,void 0,(function*(){yield qn.post("/me/unregister_device",{registration_id:e})})),ai=(e,t,n)=>Yn(void 0,void 0,void 0,(function*(){const i={};n&&(i.email=n),yield qn.post(`/courses/${Qn(e)}/${Qn(null!=t?t:st.h9)}/subscribe`,i)})),li=(e,t,n)=>Yn(void 0,void 0,void 0,(function*(){const i={};n&&(i.email=n),yield qn.post(`/courses/${Qn(e)}/${Qn(null!=t?t:st.h9)}/unsubscribe`,i)})),ci=(e,t,n)=>Yn(void 0,void 0,void 0,(function*(){return(yield qn.get(`/dictionary_page/verb_tables/${(0,st.D3)(e)}?${(0,D.Vp)({infinitives:JSON.stringify(t),verb_patterns:n})}`)).data})),ui=e=>Yn(void 0,void 0,void 0,(function*(){return(yield qn.get("/vocab/example_sentences",{params:{lexeme_ids:e.join(",")}})).data})),di=(e,t,n=!0)=>Yn(void 0,void 0,void 0,(function*(){const i={lexeme_id:e,use_cache:n};return t&&(i.from_language_id=t),(yield qn.get("/dictionary_page",{params:i})).data}));var pi=n(46435),mi=n(41364),gi=n(71371),hi=n(85381),_i=n(54448),vi=n(785),fi=n(11811),yi=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Ei=K("/2017-06-30");Ei.addErrorInterceptor(((e,{response:t})=>{if(401===(null==t?void 0:t.status)&&!e.includes("login")){if((0,U.Pc)())return(0,x.um)("Requiring logged-out user to log in again",{sample:.1}),J(),(0,Nn.Zs)();(0,x.vU)("Attempted authenticated call while logged-out")}})),(0,W.gQ)("debugStripe")&&Ei.setServiceEnvironment("purchasing-backend","staging").setServiceEnvironment("shop-backend","staging").setServiceEnvironment("subscriptions-backend","staging");const bi=()=>["acquisitionSurveyReason","adsConfig","betaStatus","bio","blockedUserIds","canUseModerationTools","courses","creationDate","currentCourse","email","emailAnnouncement","emailAssignment","emailAssignmentComplete","emailClassroomJoin","emailClassroomLeave","emailEditSuggested","emailEventsDigest","emailFollow","emailPass","emailPromotion","emailWeeklyProgressReport","emailSchoolsAnnouncement","emailSchoolsNewsletter","emailSchoolsProductUpdate","emailSchoolsPromotion","emailStreamPost","emailVerified","emailWeeklyReport","enableMicrophone","enableSoundEffects","enableSpeaker",`experiments{${pi.rn}}`,"facebookId","fromLanguage","globalAmbassadorStatus","googleId","hasPlus","id","inviteURL","joinedClassroomIds","lastStreak{isAvailableForRepair,length}","learningLanguage","lingots","location","monthlyXp","name","observedClassroomIds","optionalFeatures","persistentNotifications","picture","plusDiscounts","practiceReminderSettings","privacySettings","referralInfo","rewardBundles","roles","streak","streakData{length}","timezone","timezoneOffset","totalXp","trackingProperties","unconsumedGiftIds","username","webNotificationIds","weeklyXp","xpGains","xpGoal","zhTw","_achievements"];var Si;!function(e){e.COMMENT="COMMENT",e.FOLLOW="FOLLOW",e.LESSON="LESSON",e.MASTER="MASTER",e.PASS="PASS",e.PRACTICE="PRACTICE",e.STREAM_POST="STREAM_POST",e.TEST="TEST",e.TRANSLATION="TRANSLATION",e.WELCOME="WELCOME"}(Si||(Si={}));const wi=(e,t=!0)=>yi(void 0,void 0,void 0,(function*(){yield Ei.post("/login",Object.assign({distinctId:(0,vi.kG)()},e),{params:{fields:t?bi().join(","):""}})})),Ti=e=>yi(void 0,void 0,void 0,(function*(){yield Ei.post("/login",Object.assign({distinctId:(0,vi.kG)()},e),{params:{fields:""}})})),Ii=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.post("/users",Object.assign({distinctId:(0,vi.kG)()},e),{params:{fields:"id"}})).data})),ki=(0,mi.p)("GET_USER")((e=>yi(void 0,void 0,void 0,(function*(){return yield Ci(e,bi())})))),Ci=(e,t)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${e}`,{params:{fields:t.join(",")}})).data})),Ri=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${e}`,{params:{fields:"_achievements"}})).data})),Oi=(e,t={})=>yi(void 0,void 0,void 0,(function*(){yield Ei.patch(`/users/${e}/achievements`,Object.assign({},t))})),Ni=e=>Ei.post(`/users/${e}/email-verifications`),Li=(e,t)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.patch(`/users/${e}/email-verifications/${t}`,{verified:!0})).data})),Pi=(e,t)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.post("/email-removals",{email:e,token:t})).data})),Ai=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get("/onboarding/validate-username",{params:{username:e}})).data})),Di=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get("/users",{params:{username:e}})).data.users})),xi=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get("/users",{params:{email:e}})).data.users})),Mi=(e,t,n)=>yi(void 0,void 0,void 0,(function*(){const i=n?{fields:n.join(",")}:{};return(yield Ei.patch(`/users/${e}`,Object.assign({},t),{params:i})).data})),Ui=(e,t)=>yi(void 0,void 0,void 0,(function*(){const n=t?{fields:t.join(",")}:{};return(yield Ei.get(`/users/${e}/subscriptions`,{params:n})).data.subscriptions})),Fi=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${e}/xp_summaries`)).data.summaries})),ji=(e,t,n)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${e}/subscriptions`,{params:{pageAfter:n,pageSize:t}})).data})),Bi=(e,t,n)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${e}/subscribers`,{params:{pageAfter:n,pageSize:t}})).data})),Hi=(e,t,n)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${e}/moderated-events`,{params:{limit:n,types:t.join(",")}})).data.events})),Gi=(e,t)=>yi(void 0,void 0,void 0,(function*(){yield Ei.post(`/users/${e}/messages`,{message:t})})),Vi=e=>Ei.delete(`/users/${(0,U.Jb)()}/courses/${e}`,{}),Zi=(e,t,n,i)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.patch(`/users/${(0,U.Jb)()}/courses/${e}/skills/${t}`,Object.assign(Object.assign({},n),{isV2:i}))).data})),Wi=e=>yi(void 0,void 0,void 0,(function*(){const t=(e.type===fi.FF.AlphabetLesson&&(0,W.NY)()?yield ye(e.learningLanguage,e.fromLanguage,e):yield Ei.post("/sessions",e)).data;if(!Array.isArray(t.challenges))throw Error("No challenges present in session");return t})),zi=({cancelToken:e,currentCourse:t,onError:n,session:i})=>(0,mn.XD)((()=>yi(void 0,void 0,void 0,(function*(){try{let e;if(e=i.type===fi.FF.AlphabetLesson?yield fe(i,t):yield Ei.put(`/sessions/${i.id}`,Object.assign({},i),{headers:{"Idempotency-Key":i.id},timeout:1e4}),202===e.status)throw Error("Session has been accepted but not yet processed.");return e.data}catch(t){throw gi.Z.remove("session_end_grade"),null==n||n(t),t.response&&(t.response.status>=500&&t.response.status<600&&!t.response.headers["no-retry"]||e.cancel()),t}}))),{backoffFn:e=>{const t=.75+2*Math.random()*.25;return 250*Math.pow(2,e-1)*t},cancelToken:e,retries:1/0,stopAtTime:Date.now()+24e4}),$i=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.post(`/sessions/${e.id}/challenges`,Object.assign({},e))).data})),Yi=e=>yi(void 0,void 0,void 0,(function*(){return Z.ei((yield Ei.put(`/challenges/${e.id}`,Object.assign({},e))).data,"blameMessage","blameType","closestSolution","correct","gradingMetadata","guess","highlights")})),Ki={BAD_AUDIO:"BAD_AUDIO",BAD_HINTS:"BAD_HINTS",BAD_IMAGE:"BAD_IMAGE",BAD_OPTION:"BAD_OPTION",BAD_PROMPT:"BAD_PROMPT",CHARACTER_DISPLAY:"CHARACTER_DISPLAY",MISSING_AUDIO:"MISSING_AUDIO",MISSING_HINTS:"MISSING_HINTS",MISSING_IMAGE:"MISSING_IMAGE",NOT_ACCEPTED:"NOT_ACCEPTED",OFFENSIVE_OPTION:"OFFENSIVE_OPTION",OTHER_ISSUE:"OTHER_ISSUE",WRONG_ACCEPTED:"WRONG_ACCEPTED"},qi=(e,t)=>yi(void 0,void 0,void 0,(function*(){const n={challenge:(0,_i.g)(e),problems:t};yield Ei.post(`/challenges/${e.id}/reports`,n)})),Ji=()=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get("/shop-items")).data.shopItems})),Xi=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${(0,U.Jb)()}/shop-items/${e}`)).data})),Qi=(e,t)=>yi(void 0,void 0,void 0,(function*(){return Ei.patch(`/users/${(0,U.Jb)()}/shop-items/${e}`,t)})),eo=(e,t,n,i)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.put(`/users/${(0,U.Jb)()}/payment-methods/${e}`,{product:t,stripeToken:n},{headers:{"Idempotency-Key":i}})).data})),to=()=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${(0,U.Jb)()}`,{params:{fields:"paymentMethods"}})).data.paymentMethods})),no=()=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${(0,U.Jb)()}`,{params:{fields:"shopItems{familyPlanInfo{inviteToken,ownerId,secondaryMembers},itemName,purchaseDate,purchaseId,purchasePrice,quantity,subscriptionInfo{currency,expectedExpiration,extendedFreeTrialLength,isFreeTrialPeriod,periodLength,price,renewer,renewing},wagerDay}"}})).data.shopItems})),io=(e,t)=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.post(`/users/${(0,U.Jb)()}/payment-methods`,{product:hi.hp.Duolingo,stripeToken:e},{headers:{"Idempotency-Key":t}})).data})),oo=(e,t={},n)=>yi(void 0,void 0,void 0,(function*(){const i=new mn.$B;let o=0;return(0,mn.XD)((()=>yi(void 0,void 0,void 0,(function*(){try{return{item:(yield Ei.post(`/users/${(0,U.Jb)()}/shop-items`,Object.assign({itemName:e},t),{headers:n?{"Idempotency-Key":n}:void 0})).data,numRetries:o}}catch(e){throw e.response&&(e.response.status>=500&&e.response.status<600&&!e.response.headers["no-retry"]&&"experiment"===(0,Ue.j6)("plus_web_purchase_error_retry",void 0)?o++:i.cancel()),e}}))),{cancelToken:i,retries:1})})),so=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/plus-coupon-codes/${e}`)).data})),ro=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/family-plan/invite/${e}`)).data.isValid})),ao=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.post(`/users/${(0,U.Jb)()}/family-plan/members/invite/${e}`,{})).data})),lo=(e,t)=>Ei.delete(`/users/${e}/family-plan/members/${t}`,{}),co=["ageRestrictionLimit",`clientExperiments{${pi.Sg}}`,"courses","dictionaryHost","featureFlags","ipCountry","speechHost"],uo=e=>yi(void 0,void 0,void 0,(function*(){return 200===(yield Ei.get(`/bango/invite/${e}`)).status})),po=e=>yi(void 0,void 0,void 0,(function*(){return 200===(yield Ei.post(`/users/${(0,U.Jb)()}/activate-bango-subscription`,{inviteToken:e})).status})),mo=()=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get("/config",{params:{fields:co.join(",")}})).data})),go=e=>yi(void 0,void 0,void 0,(function*(){yield Ei.delete(`/users/${(0,U.Jb)()}/shop-items`,{itemName:e})})),ho=()=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/users/${(0,U.Jb)()}/privacy-settings`)).data.privacySettings.map((e=>Object.assign(Object.assign({},e),{id:e.id.toUpperCase()})))})),_o=e=>Ei.post("/password-reset",{email:e}),vo=(e,t)=>yi(void 0,void 0,void 0,(function*(){yield Ei.post("/tracking-status",{distinctId:t,enabled:e})})),fo=e=>yi(void 0,void 0,void 0,(function*(){yield Ei.post(`/users/${e}/referral-bonuses`)})),yo=({id:e,fromLanguage:t,learningLanguage:n},i,o)=>yi(void 0,void 0,void 0,(function*(){yield Ei.patch(`/users/${e}/rewards/${i}`,{consumed:!0,fromLanguage:t,learningLanguage:n,pathLevelSpecifics:o})})),Eo=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.get(`/attribution/survey/custom?uiLanguage=${e}`)).data.responses})),bo=(e,t,n)=>yi(void 0,void 0,void 0,(function*(){const i=`/users/${e}/prior-proficiency-onboarding`;yield Ei.post(i,{fromLanguage:st.h9,learningLanguage:Qn(t),priorProficiency:n})})),So=e=>yi(void 0,void 0,void 0,(function*(){return(yield Ei.post(`/users/${(0,U.Jb)()}/plus-discounts`,{discountType:e})).data})),wo=(e,t,n)=>yi(void 0,void 0,void 0,(function*(){yield Ei.patch(`/users/${e}/optional-features/${t}`,{status:n})})),To=(e,t)=>{const n=[...crypto.getRandomValues(new Uint8Array(8))].map((e=>`0${e.toString(16)}`.slice(-2))).join("");return{beginner:!1,challengeTimeTakenCutoff:0,challenges:[],confidence:0,enableBonusPoints:!1,endTime:(Date.now()+100)/1e3,failed:!1,fromLanguage:e.fromLanguage,heartBonus:0,heartsLeft:0,id:n,isV2:!0,learnedSkills:[],learningLanguage:e.learningLanguage,levelSessionIndex:t.totalSessions,metadata:{id:n,language:e.learningLanguage,level_session_index:t.totalSessions},pathLevelSpecifics:t.pathLevelMetadata,startTime:Date.now()/1e3,trackingProperties:{},type:fi.FF.LexemePractice,xpGain:0}};const Io=Y("https://www.duolingo.com/2017-06-30"),ko=()=>{return e=void 0,t=void 0,i=function*(){var e;if(null===(e=window.webkit)||void 0===e?void 0:e.messageHandlers)return new Promise((e=>{window.weekly_data_callback=t=>{window.user_model_callback=n=>{if(t.current_streak=n.streakData.length,t.current_learning_language=n.currentCourse.learningLanguage,n.currentCourse.skills){const e=n.currentCourse.skills;let i=0,o=0;e.forEach((e=>{e.forEach((({finishedLevels:e})=>{i+=1,e>0&&(o+=1)}))})),t.current_course_progress=o/i}e(t)},window.webkit.messageHandlers.observer.postMessage({get_user_model:{callback:"user_model_callback",fields:["currentCourse","streakData"]}})},window.webkit.messageHandlers.observer.postMessage({get_weekly_report_info:{callback:"weekly_data_callback"}})}));const{data:t}=yield Io.get("/weekly-report-info");return t},new((n=void 0)||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i}},50498:(e,t,n)=>{"use strict";n.d(t,{$B:()=>r,p4:()=>a,f:()=>l,XD:()=>c,_v:()=>u});var i=n(80254),o=n(59815),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};class r{constructor(){this.cancelled=!1,this.cancel=()=>{this.cancelled=!0},this.isCancelled=()=>this.cancelled}}const a=e=>s(void 0,void 0,void 0,(function*(){const t={};try{return(yield Promise.race([e,t]))===t?"pending":"fulfilled"}catch(e){return"rejected"}})),l=i.IH((()=>new Promise((()=>{})))),c=(e,{backoffFn:t,cancelToken:n,retries:i,stopAtTime:r})=>s(void 0,void 0,void 0,(function*(){let s,a=0;for(;a<i+1;){if(a>0){const e=t?t(a):Math.round(Math.min(1e3*a,3e4)*(Math.random()+1));console.log(`Backing off for ${e}ms before retrying`),yield u(e)}if((null==n?void 0:n.isCancelled())||r&&Date.now()>=r)break;try{return yield e(a)}catch(e){s=e}if(a++,null==n?void 0:n.isCancelled())break}throw null!=s?s:new o.$K})),u=e=>new Promise((t=>{window.setTimeout(t,e)}))},13942:(e,t,n)=>{"use strict";n.d(t,{Tc:()=>b,N$:()=>O,cq:()=>N,IZ:()=>A,a1:()=>D,GN:()=>x,nU:()=>M,Ap:()=>U,Ms:()=>B});var i=n(91367),o=n(80254),s=n(1330),r=n(39158),a=n(81891),l=n(37939),c=n(33418),u=n(21384),d=n(1563),p=n(62103),m=n(50498),g=n(80388),h=n(71371),_=n(51158),v=n(18804),f=n(785);const y={BONUS:{url:s,volume:.5},CORRECT:{url:l,volume:.35},FAILED:{url:a,volume:.5},INCORRECT:{url:p,volume:.35},PASSED:{url:r,volume:.5},TEST:{url:u,volume:.4},TIMER:{url:d,volume:.6}},E=Symbol("SOUND_OPTIONS_KEY"),b=o.Xc(y,(e=>e.url)),S=o.Ry(o.VO(y).map((({url:e,volume:t})=>[e,t]))),w=[],T={},I={};let k,C=!1;const R=({failureReason:e,source:t,timeTaken:n,url:i})=>{const o=(0,g.J9)()?.005:5e-4;if(Math.random()<o){const s=new URL(F(i));(0,f.j)("tts_play_finished",{failure_reason:e,host:s.host,path:s.pathname,sampling_rate:o,successful:void 0===e,time_taken:n,tts_source:t})}},O=({text:e,url:t})=>{const n=(0,g.J9)()?.1:.01;Math.random()<n&&(0,f.j)("tts_download_failure",{offline:!navigator.onLine,path:t?F(t):"",text:e})},N=()=>w.length>0||C,L=e=>{var t;return new i.Howl({format:["mp3"],html5:!0,onloaderror:(t,n)=>(0,_.vU)("Failed to load audio",{data:{errorCode:n,url:e},sample:1e-4}),onplayerror:(t,n)=>(0,_.vU)("Failed to play audio",{data:{errorCode:n,url:e},sample:1e-4}),preload:!0,src:[e],volume:null!==(t=S[e])&&void 0!==t?t:1})},P=e=>{switch(e){case"ended":return"end";case"error":return"loaderror";default:return e}},A=e=>{if(!e)return Promise.reject();if(e=F(e),!T[e]){const t=L(e);T[e]=new Promise((