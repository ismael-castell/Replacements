(window.webpackJsonp=window.webpackJsonp||[]).push([["e2820"],{"+3YS":function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},"+6XX":function(t,e,i){var n=i("y1pI");t.exports=function(t){return n(this.__data__,t)>-1}},"+IV6":function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},"+JPL":function(t,e,i){t.exports={default:i("+SFK"),__esModule:!0}},"+K+b":function(t,e,i){var n=i("JHRd");t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},"+KH8":function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));i("I5cv");var n=i("lSNA"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("7W2i"),l=i.n(c),h=i("a1gu"),d=i.n(h),f=i("Nsbk"),p=i.n(f);function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var g=new(function(t){l()(i,t);var e=v(i);function i(){return a()(this,i),e.apply(this,arguments)}return u()(i,[{key:"getRoomActivityList",value:function(t){var e=this.lang,i=this.countryCode,n=this.clang,r=this.buildUri("roomActivity/roomActivityList"),o={encrypt:!0,queryParams:[i,e,n],data:y({deviceType:3,version:this.udbVersion,bizToken:this.udbBizToken,udbUserId:this.udbUserId,countryCode:this.countryCode},t)};return this.fetch(r,o)}}]),i}(i("70i0").b))},"+RUc":function(t,e,i){"use strict";i.d(e,"d",(function(){return u})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return h}));var n=i("lSNA"),r=i.n(n),o=i("p1oI");function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t){var e=t.videoHeight,i=t.videoWidth,n=document.createElement("canvas");return n.width=i,n.height=e,n.getContext("2d").drawImage(t,0,0,i,e),n.toDataURL()||""}function c(){return"0"!==Object(o.a)("_autoplay")}function l(){return"1"!==Object(o.a)("_muted")}function h(){if(!window.G_roomBaseInfo)return null;var t=window.G_roomBaseInfo||{},e=t.roomId,i=t.roomScreenshots,n=t.videoUrl,r=t.videoStreamStatus,o=t.videoResolution,a=void 0===o?"":o,u=t.resolution,c=void 0===u?0:u,l=t.multiResolutionVideoUrl,h=void 0===l?[]:l,d=t.roomLineInfo,f=t.mStreamPkg,p=t.businessType,m=t.templateType,y=t.cdnFlag;return{roomId:e,anchorId:t.anchorId,screenshot:(i&&i.find((function(t){return 2===t.key}))||{}).url,videoUrl:n,videoStreamStatus:r,videoResolution:a,resolution:c,multiResolutionVideoUrl:h,cdnFlag:y,businessType:p,templateType:m,roomLineInfo:s(s({},d),{},{mStreamPkg:f})}}},"+SFK":function(t,e,i){t.exports=i("4KFe")(190)},"+Sw5":function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n},t.exports.default=t.exports,t.exports.__esModule=!0},"+bRE":function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},"+c4W":function(t,e,i){var n=i("711d"),r=i("4/ic"),o=i("9ggG"),a=i("9Nap");t.exports=function(t){return o(t)?n(a(t)):r(t)}},"+iFO":function(t,e,i){var n=i("dTAl"),r=i("LcsW"),o=i("6sVZ");t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:n(r(t))}},"+qE3":function(t,e,i){"use strict";var n,r="object"===typeof Reflect?Reflect:null,o=r&&"function"===typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(i,n){function r(i){t.removeListener(e,o),n(i)}function o(){"function"===typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,i){"function"===typeof t.on&&v(t,"error",e,i)}(t,r,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,i,n){var r,o,a,s;if(c(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),a=o[e]),void 0===a)a=o[e]=i,++t._eventsCount;else if("function"===typeof a?a=o[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=l(t))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function p(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"===typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):y(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"===typeof i)return 1;if(void 0!==i)return i.length}return 0}function y(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function v(t,e,i,n){if("function"===typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){n.once&&t.removeEventListener(e,r),i(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=r[t];if(void 0===u)return!1;if("function"===typeof u)o(u,this,e);else{var c=u.length,l=y(u,c);for(i=0;i<c;++i)o(l[i],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,n,r,o,a;if(c(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!==typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"+rth":function(t,e,i){"use strict";var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=function(){function t(e,i,n){r()(this,t),this.player=e,this.pluginName="Plugin",this.playerConfig=i,this.config=n}return a()(t,[{key:"dispose",value:function(){this.pluginName=null,this.playerConfig=null,this.config=null,this.player=null}},{key:"safeInvoke",value:function(t){if(this.player&&this.player[t]){for(var e,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(e=this.player)[t].apply(e,n)}}},{key:"log",value:function(){for(var t,e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];null===(t=this.player)||void 0===t||null===(e=t.logger)||void 0===e||e.log.apply(e,[this.pluginName].concat(n))}}]),t}();e.a=s},"+xEq":function(t,e,i){"use strict";var n=i("lSNA"),r=i.n(n);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}e.a=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},{isDebug:"false",isLocal:!1,logging:!1,maindomain:"www.nimo.tv",wapdomain:"m.nimo.tv",dashboarddomain:"dashboard.nimo.tv",wsserver:"wss://tube.nimo.tv:443",wsserver_dns_domain:"wss://tube.nimo.tv",httpServer:"https://wup.nimo.tv",sail_rank_domain:"https://sail-rank.nimo.tv",usernimotv:"https://user.nimo.tv",userinfonimotv:"https://userinfo.nimo.tv",apinimotv:"https://api.nimo.tv",eventnimotv:"https://event.nimo.tv",follownimotv:"https://follow.nimo.tv",paynimotv:"https://pay.nimo.tv",vipnimotv:"https://vip.nimo.tv",gatewaynimotv:"https://gateway.nimo.tv",upgrade_domain:"https://upgrade.nimo.tv",article_domain:"https://article.nimo.tv",metricServer:"https://metric.nimo.tv",withdrawdomain:"https://api-commission.nimo.tv",metricdomain:"https://metric.nimo.tv",offlinepush_domain:"https://offlinepush.nimo.tv",feedback_domain:"https://kefu.zbase.nimo.tv/s/dist/tpl/nimofeedback.html?product=NIMOPC&typeId=1",guessnimotv:"https://guess.nimo.tv",udbsec_nimo_domain:"https://udbsec.nimo.tv",webapi_domain:"https://webapi.nimo.tv",tx_flv_stream_domain:"https://tx.flv.nimo.tv",tx_hls_stream_domain:"https://tx.hls.nimo.tv",ws_flv_stream_domain:"https://ws.flv.nimo.tv",ws_hls_stream_domain:"https://ws.hls.nimo.tv",al_flv_stream_domain:"https://al.flv.nimo.tv",al_hls_stream_domain:"https://al.hls.nimo.tv",tx_slice_domain:"https://tx-slice.nimo.tv",ws_slice_domain:"https://ws-slice.nimo.tv",al_slice_domain:"https://al-slice.nimo.tv",api_cf_domain:"https://api-cf.nimo.tv",video_domain:"https://video.nimo.tv",guild_domain:"https://guild.nimo.tv",follow_cf_dynamic_domain:"https://follow-cf-dynamic.nimo.tv",home_cf_domain:"https://home-cf.nimo.tv",cdncb_domain:"https://ws.cdncb.nimo.tv",hapi_domain:"https://estat.nimo.tv",udb_domain:"nimo.tv",udb_protocol:"https",udb_login:"udblgn",udb_thrid:"udb3lgn",udb_register:"udbreg",udb_api:"udbapi",gatrackid:"G-Q9F868YX7R",activity_gatrackid:"G-R88F84SHW9",pasnimoweb:"nimo_web",pasnimowap:"nimo_wap",pasnimoactivity:"nimo_activity",pasnimowebpush:"nimo_webpush",pasnimoplayer:"nimo_player",upgradeRequests:"upgrade-insecure-requests",vip_short_chain_domain:"svip.nimo.tv",metric_ver_suffix:"",streamerAppStoreUrl:"https://play.google.com/store/apps/details?id=com.huya.nimogameassist",streamerGooglePlayUrl:"https://play.google.com/store/apps/details?id=com.huya.nimogameassist",sdkpath:"/static/main/lib/nimotv-min.js",flashVersion:"flash",firebaseSDKVersion:"5.5.6",firebaseMessagingSenderId:"647447867032",firebasePublicVapidKey:"BFdpsPYzLelUJMTGitgOiVh1iO8R1w073IQLmxNQGBhTq5bGn1_Y2fcHCb4GgQvfJQOEWrz41oy5Pd-ZVlrlEs4",img:"https://img.nimo.tv",imgService:"https://img-service.nimo.tv",gtmdomain:"https://www.googletagmanager.com",gadomain:"https://www.google-analytics.com",sgdcdomain:"https://stats.g.doubleclick.net",vjsdomain:"https://vjs.zencdn.net",fbdomain:"https://www.facebook.com",fbcdomain:"https://connect.facebook.net",gsdomain:"https://www.gstatic.com",ylogdomain:"https://ylog.nimo.tv",wspicdomain:"https://wspic.vod.nimo.tv",txpicdomain:"https://txpic.vod.nimo.tv",signaling_wss_ip:"testws.master.live",sentryAppDsn:"https://741f4a8efcf94c0bae4b6dcc1891959a@fems.huya.com/179",hyplayer_appid:81,udb_appid:1005,search_domain:"https://sail-api.nimo.tv",search_static_domain:"https://sail-api-static.nimo.tv",sail_rank_static_domain:"https://sail-rank-static.nimo.tv",activity_domain:"https://sail-activity.nimo.tv",skyNetProjectName:"nimo-www-prod",skyNetProjectId:27})},"/6Id":function(t,e,i){"use strict";var n=i("ZMLX"),r=i("EoCF"),o=function(){this.lUid=0,this.sNick="",this.sAvatarUrl="",this.lScore=0};o.prototype._clone=function(){return new n.a.ItemTallyUserInfo},o.prototype._write=function(t,e,i){t.writeStruct(e,i)},o.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},o.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sNick),t.writeString(2,this.sAvatarUrl),t.writeInt64(3,this.lScore)},o.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sNick=t.readString(1,!1,this.sNick),this.sAvatarUrl=t.readString(2,!1,this.sAvatarUrl),this.lScore=t.readInt64(3,!1,this.lScore)},n.a.ItemTallyUserInfo=o;var a=function(){this.iItemID=0,this.iItemCount=0,this.iItemTargetCount=0,this.sTitle="",this.lAddTimestamp=0,this.lFinishTimestamp=0,this.iMode=0,this.iHide=0,this.iIsEnd=0,this.sPromise="",this.iItemInitialCount=0,this.iDurationTime=0,this.iGiftId=0,this.sGiftIcon="",this.vContributerInfo=new r.Taf.Vector(new n.a.ItemTallyUserInfo),this.vFollowerInfo=new r.Taf.Vector(new n.a.ItemTallyUserInfo),this.sGiftName="",this.iLeftTime=0};a.prototype._clone=function(){return new n.a.ItemTallyRecord},a.prototype._write=function(t,e,i){t.writeStruct(e,i)},a.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},a.prototype.writeTo=function(t){t.writeInt32(0,this.iItemID),t.writeInt32(1,this.iItemCount),t.writeInt32(2,this.iItemTargetCount),t.writeString(3,this.sTitle),t.writeInt64(4,this.lAddTimestamp),t.writeInt64(5,this.lFinishTimestamp),t.writeInt32(6,this.iMode),t.writeInt32(7,this.iHide),t.writeInt32(8,this.iIsEnd),t.writeString(9,this.sPromise),t.writeInt32(10,this.iItemInitialCount),t.writeInt32(11,this.iDurationTime),t.writeInt32(12,this.iGiftId),t.writeString(13,this.sGiftIcon),t.writeVector(14,this.vContributerInfo),t.writeVector(15,this.vFollowerInfo),t.writeString(16,this.sGiftName),t.writeInt32(17,this.iLeftTime)},a.prototype.readFrom=function(t){this.iItemID=t.readInt32(0,!1,this.iItemID),this.iItemCount=t.readInt32(1,!1,this.iItemCount),this.iItemTargetCount=t.readInt32(2,!1,this.iItemTargetCount),this.sTitle=t.readString(3,!1,this.sTitle),this.lAddTimestamp=t.readInt64(4,!1,this.lAddTimestamp),this.lFinishTimestamp=t.readInt64(5,!1,this.lFinishTimestamp),this.iMode=t.readInt32(6,!1,this.iMode),this.iHide=t.readInt32(7,!1,this.iHide),this.iIsEnd=t.readInt32(8,!1,this.iIsEnd),this.sPromise=t.readString(9,!1,this.sPromise),this.iItemInitialCount=t.readInt32(10,!1,this.iItemInitialCount),this.iDurationTime=t.readInt32(11,!1,this.iDurationTime),this.iGiftId=t.readInt32(12,!1,this.iGiftId),this.sGiftIcon=t.readString(13,!1,this.sGiftIcon),this.vContributerInfo=t.readVector(14,!1,this.vContributerInfo),this.vFollowerInfo=t.readVector(15,!1,this.vFollowerInfo),this.sGiftName=t.readString(16,!1,this.sGiftName),this.iLeftTime=t.readInt32(17,!1,this.iLeftTime)},n.a.ItemTallyRecord=a;e.a=a},"/6rt":function(t,e,i){"use strict";var n=i("E7Vc");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"/9aa":function(t,e,i){var n=i("NykK"),r=i("ExA7");t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==n(t)}},"/MKj":function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return V})),i.d(e,"e",(function(){return K})),i.d(e,"f",(function(){return Q})),i.d(e,"d",(function(){return E}));var n=i("q1tI"),r=i.n(n),o=(i("17x9"),r.a.createContext(null));var a=function(t){t()},s={notify:function(){}};function u(){var t=a,e=null,i=null;return{clear:function(){e=null,i=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],i=e;i;)t.push(i),i=i.next;return t},subscribe:function(t){var n=!0,r=i={callback:t,next:null,prev:i};return r.prev?r.prev.next=r:e=r,function(){n&&null!==e&&(n=!1,r.next?r.next.prev=r.prev:i=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var c=function(){function t(t,e){this.store=t,this.parentSub=e,this.unsubscribe=null,this.listeners=s,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=u())},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},t}();var l=function(t){var e=t.store,i=t.context,a=t.children,s=Object(n.useMemo)((function(){var t=new c(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),u=Object(n.useMemo)((function(){return e.getState()}),[e]);Object(n.useEffect)((function(){var t=s.subscription;return t.trySubscribe(),u!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[s,u]);var l=i||o;return r.a.createElement(l.Provider,{value:s},a)},h=i("wx14"),d=i("zLVn"),f=i("2mql"),p=i.n(f),m=i("TOwV"),y="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?n.useLayoutEffect:n.useEffect,v=[],g=[null,null];function _(t,e){var i=t[1];return[e.payload,i+1]}function S(t,e,i){y((function(){return t.apply(void 0,e)}),i)}function w(t,e,i,n,r,o,a){t.current=n,e.current=r,i.current=!1,o.current&&(o.current=null,a())}function b(t,e,i,n,r,o,a,s,u,c){if(t){var l=!1,h=null,d=function(){if(!l){var t,i,d=e.getState();try{t=n(d,r.current)}catch(f){i=f,h=f}i||(h=null),t===o.current?a.current||u():(o.current=t,s.current=t,a.current=!0,c({type:"STORE_UPDATED",payload:{error:i}}))}};i.onStateChange=d,i.trySubscribe(),d();return function(){if(l=!0,i.tryUnsubscribe(),i.onStateChange=null,h)throw h}}}var I=function(){return[null,0]};function T(t,e){void 0===e&&(e={});var i=e,a=i.getDisplayName,s=void 0===a?function(t){return"ConnectAdvanced("+t+")"}:a,u=i.methodName,l=void 0===u?"connectAdvanced":u,f=i.renderCountProp,y=void 0===f?void 0:f,T=i.shouldHandleStateChanges,P=void 0===T||T,E=i.storeKey,k=void 0===E?"store":E,R=(i.withRef,i.forwardRef),C=void 0!==R&&R,O=i.context,A=void 0===O?o:O,L=Object(d.a)(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),N=A;return function(e){var i=e.displayName||e.name||"Component",o=s(i),a=Object(h.a)({},L,{getDisplayName:s,methodName:l,renderCountProp:y,shouldHandleStateChanges:P,storeKey:k,displayName:o,wrappedComponentName:i,WrappedComponent:e}),u=L.pure;var f=u?n.useMemo:function(t){return t()};function T(i){var o=Object(n.useMemo)((function(){var t=i.forwardedRef,e=Object(d.a)(i,["forwardedRef"]);return[i.context,t,e]}),[i]),s=o[0],u=o[1],l=o[2],p=Object(n.useMemo)((function(){return s&&s.Consumer&&Object(m.isContextConsumer)(r.a.createElement(s.Consumer,null))?s:N}),[s,N]),y=Object(n.useContext)(p),T=Boolean(i.store)&&Boolean(i.store.getState)&&Boolean(i.store.dispatch);Boolean(y)&&Boolean(y.store);var E=T?i.store:y.store,k=Object(n.useMemo)((function(){return function(e){return t(e.dispatch,a)}(E)}),[E]),R=Object(n.useMemo)((function(){if(!P)return g;var t=new c(E,T?null:y.subscription),e=t.notifyNestedSubs.bind(t);return[t,e]}),[E,T,y]),C=R[0],O=R[1],A=Object(n.useMemo)((function(){return T?y:Object(h.a)({},y,{subscription:C})}),[T,y,C]),L=Object(n.useReducer)(_,v,I),M=L[0][0],U=L[1];if(M&&M.error)throw M.error;var D=Object(n.useRef)(),B=Object(n.useRef)(l),F=Object(n.useRef)(),x=Object(n.useRef)(!1),j=f((function(){return F.current&&l===B.current?F.current:k(E.getState(),l)}),[E,M,l]);S(w,[B,D,x,l,j,F,O]),S(b,[P,E,C,k,B,D,x,F,O,U],[E,C,k]);var V=Object(n.useMemo)((function(){return r.a.createElement(e,Object(h.a)({},j,{ref:u}))}),[u,e,j]);return Object(n.useMemo)((function(){return P?r.a.createElement(p.Provider,{value:A},V):V}),[p,V,A])}var E=u?r.a.memo(T):T;if(E.WrappedComponent=e,E.displayName=o,C){var R=r.a.forwardRef((function(t,e){return r.a.createElement(E,Object(h.a)({},t,{forwardedRef:e}))}));return R.displayName=o,R.WrappedComponent=e,p()(R,e)}return p()(E,e)}}function P(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function E(t,e){if(P(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(e,i[r])||!P(t[i[r]],e[i[r]]))return!1;return!0}var k=i("ANjH");function R(t){return function(e,i){var n=t(e,i);function r(){return n}return r.dependsOnOwnProps=!1,r}}function C(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function O(t,e){return function(e,i){i.displayName;var n=function(t,e){return n.dependsOnOwnProps?n.mapToProps(t,e):n.mapToProps(t)};return n.dependsOnOwnProps=!0,n.mapToProps=function(e,i){n.mapToProps=t,n.dependsOnOwnProps=C(t);var r=n(e,i);return"function"===typeof r&&(n.mapToProps=r,n.dependsOnOwnProps=C(r),r=n(e,i)),r},n}}var A=[function(t){return"function"===typeof t?O(t):void 0},function(t){return t?void 0:R((function(t){return{dispatch:t}}))},function(t){return t&&"object"===typeof t?R((function(e){return Object(k.b)(t,e)})):void 0}];var L=[function(t){return"function"===typeof t?O(t):void 0},function(t){return t?void 0:R((function(){return{}}))}];function N(t,e,i){return Object(h.a)({},i,{},t,{},e)}var M=[function(t){return"function"===typeof t?function(t){return function(e,i){i.displayName;var n,r=i.pure,o=i.areMergedPropsEqual,a=!1;return function(e,i,s){var u=t(e,i,s);return a?r&&o(u,n)||(n=u):(a=!0,n=u),n}}}(t):void 0},function(t){return t?void 0:function(){return N}}];function U(t,e,i,n){return function(r,o){return i(t(r,o),e(n,o),o)}}function D(t,e,i,n,r){var o,a,s,u,c,l=r.areStatesEqual,h=r.areOwnPropsEqual,d=r.areStatePropsEqual,f=!1;function p(r,f){var p=!h(f,a),m=!l(r,o);return o=r,a=f,p&&m?(s=t(o,a),e.dependsOnOwnProps&&(u=e(n,a)),c=i(s,u,a)):p?(t.dependsOnOwnProps&&(s=t(o,a)),e.dependsOnOwnProps&&(u=e(n,a)),c=i(s,u,a)):m?function(){var e=t(o,a),n=!d(e,s);return s=e,n&&(c=i(s,u,a)),c}():c}return function(r,l){return f?p(r,l):(s=t(o=r,a=l),u=e(n,a),c=i(s,u,a),f=!0,c)}}function B(t,e){var i=e.initMapStateToProps,n=e.initMapDispatchToProps,r=e.initMergeProps,o=Object(d.a)(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=i(t,o),s=n(t,o),u=r(t,o);return(o.pure?D:U)(a,s,u,t,o)}function F(t,e,i){for(var n=e.length-1;n>=0;n--){var r=e[n](t);if(r)return r}return function(e,n){throw new Error("Invalid value of type "+typeof t+" for "+i+" argument when connecting component "+n.wrappedComponentName+".")}}function x(t,e){return t===e}function j(t){var e=void 0===t?{}:t,i=e.connectHOC,n=void 0===i?T:i,r=e.mapStateToPropsFactories,o=void 0===r?L:r,a=e.mapDispatchToPropsFactories,s=void 0===a?A:a,u=e.mergePropsFactories,c=void 0===u?M:u,l=e.selectorFactory,f=void 0===l?B:l;return function(t,e,i,r){void 0===r&&(r={});var a=r,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,m=void 0===p?x:p,y=a.areOwnPropsEqual,v=void 0===y?E:y,g=a.areStatePropsEqual,_=void 0===g?E:g,S=a.areMergedPropsEqual,w=void 0===S?E:S,b=Object(d.a)(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),I=F(t,o,"mapStateToProps"),T=F(e,s,"mapDispatchToProps"),P=F(i,c,"mergeProps");return n(f,Object(h.a)({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:I,initMapDispatchToProps:T,initMergeProps:P,pure:l,areStatesEqual:m,areOwnPropsEqual:v,areStatePropsEqual:_,areMergedPropsEqual:w},b))}}var V=j();function G(){return Object(n.useContext)(o)}function H(t){void 0===t&&(t=o);var e=t===o?G:function(){return Object(n.useContext)(t)};return function(){return e().store}}var W=H();function q(t){void 0===t&&(t=o);var e=t===o?W:H(t);return function(){return e().dispatch}}var K=q(),Y=function(t,e){return t===e};function z(t){void 0===t&&(t=o);var e=t===o?G:function(){return Object(n.useContext)(t)};return function(t,i){void 0===i&&(i=Y);var r=e();return function(t,e,i,r){var o,a=Object(n.useReducer)((function(t){return t+1}),0)[1],s=Object(n.useMemo)((function(){return new c(i,r)}),[i,r]),u=Object(n.useRef)(),l=Object(n.useRef)(),h=Object(n.useRef)();try{o=t!==l.current||u.current?t(i.getState()):h.current}catch(d){throw u.current&&(d.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),d}return y((function(){l.current=t,h.current=o,u.current=void 0})),y((function(){function t(){try{var t=l.current(i.getState());if(e(t,h.current))return;h.current=t}catch(d){u.current=d}a({})}return s.onStateChange=t,s.trySubscribe(),t(),function(){return s.tryUnsubscribe()}}),[i,s]),o}(t,i,r.store,r.subscription)}}var J,Q=z(),X=i("i8i4");J=X.unstable_batchedUpdates,a=J},"/SS/":function(t,e,i){var n=i("XKFU");n(n.S,"Object",{setPrototypeOf:i("i5dc").set})},"/TH8":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),i("/6Id"),i("d1Vj"),function(){this.lUid=0,this.lRoomId=0,this.iNotifyType=0,this.tRecord=new n.a.ItemTallyRecord,this.tAnchorSystemMessage=new n.a.RichText,this.tAudienceSystemMessage=new n.a.RichText,this.iAnchorSysMessageJump=0,this.iAudiencesysMessageJump=0});r.prototype._clone=function(){return new n.a.ItemTallyInfoNotify},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt64(1,this.lRoomId),t.writeInt32(2,this.iNotifyType),t.writeStruct(3,this.tRecord),t.writeStruct(4,this.tAnchorSystemMessage),t.writeStruct(5,this.tAudienceSystemMessage),t.writeInt32(6,this.iAnchorSysMessageJump),t.writeInt32(7,this.iAudiencesysMessageJump)},r.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.iNotifyType=t.readInt32(2,!1,this.iNotifyType),this.tRecord=t.readStruct(3,!1,this.tRecord),this.tAnchorSystemMessage=t.readStruct(4,!1,this.tAnchorSystemMessage),this.tAudienceSystemMessage=t.readStruct(5,!1,this.tAudienceSystemMessage),this.iAnchorSysMessageJump=t.readInt32(6,!1,this.iAnchorSysMessageJump),this.iAudiencesysMessageJump=t.readInt32(7,!1,this.iAudiencesysMessageJump)},n.a.ItemTallyInfoNotify=r,e.a=r},"/cTh":function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+=(null==(__t=__webpack_require__("NcXi")())?"":__t)+"\n";return __p}},"/kAC":function(t,e,i){var n=i("3cYt")({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=n},"/sfa":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),{ESPEC_PROP_ROOM:0,ESPEC_PROP_COUN_GAME:1,ESPEC_PROP_COUN:2,ESPEC_PROP_GAME:3,ESPEC_PROP_LANG:4});n.a.ESpecPropType=r},"/zoD":function(t,e,i){"use strict";var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("oTF3"),u=i.n(s),c=i("KFtC"),l=i("mTTC"),h=i("BYFT"),d=i("tdpk"),f=i("5yvJ"),p=["nimo_web","nimo_wap","nimo_activity"],m=new(function(){function t(){r()(this,t);try{var e=((null===d.a||void 0===d.a?void 0:d.a.config)||{}).pro;if(-1===p.indexOf(e))throw new Error("report pro please use DOMAINS.pasnimowap, DOMAINS.pasnimoacitivity or DOMAINS.pasnimoweb!")}catch(i){throw new Error(i)}this.report=d.a,this.isPC=h.a,this.platform=this.isPC?"web":"web_h5",this.uid=0,this.getTestConfig()}return a()(t,[{key:"_setReportExtParam",value:function(t){var e=this;this.report&&this.report.ya?t&&(this.report.report({eid:"sys/show/abtest_group_success",eid_desc:"ABTEST分组成功",prop:JSON.stringify({mpExperiment:t})}),this.report.ya.setExtParam("oexp=".concat(t))):this.report.onInit((function(){e._setReportExtParam(t)}))}},{key:"getABTestInstance",value:function(){var t=this;return this.ABTestInstance?Promise.resolve(this.ABTestInstance):l.default.getUserInfo().then((function(e){var i=e.uid;return t.uid=i,t.ABTestInstance||(t.ABTestInstance=new u.a({platform:t.platform,businessId:"nimo",guid:Object(c.j)(),uid:t.uid,env:!1,variable:{client_mid:Object(f.a)()}})),t.ABTestInstance}))}},{key:"getTestConfig",value:function(){var t=this;return this.getABTestInstance().then((function(t){return t.getABExtParam()})).then((function(e){var i=e.mpExperiment;return i&&t._setReportExtParam(i),e}))}},{key:"getSyncTestConfig",value:function(){if(this.ABTestInstance){var t=this.ABTestInstance.getSyncABExtParam(),e=t.mpExperiment;return e&&this._setReportExtParam(e),t}return{}}}]),t}());e.a=m},0:function(t,e){},"0/R4":function(t,e,i){t.exports=i("4KFe")(3)},"03A+":function(t,e,i){var n=i("JTzB"),r=i("ExA7"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},"0A3a":function(t,e,i){(function(t){var n,r,o,a,s=i("cDf5");i("Vd3H"),i("5Pf0"),i("FlsD"),i("mura"),i("JduL"),i("3xty"),i("xpiv"),i("9VmF"),i("rvZc"),i("/SS/"),a=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=113)}([function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){var n=i(4),r=i(0),o=i(11),a=i(12),s=i(14),u=function t(e,i,u){var c,l,h,d=e&t.F,f=e&t.G,p=e&t.S,m=e&t.P,y=e&t.B,v=e&t.W,g=f?r:r[i]||(r[i]={}),_=g.prototype,S=f?n:p?n[i]:(n[i]||{}).prototype;for(c in f&&(u=i),u)(l=!d&&S&&void 0!==S[c])&&s(g,c)||(h=l?S[c]:u[c],g[c]=f&&"function"!=typeof S[c]?u[c]:y&&l?o(h,n):v&&S[c]==h?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((g.virtual||(g.virtual={}))[c]=h,e&t.R&&_&&!_[c]&&a(_,c,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,i){"use strict";e.__esModule=!0;var n,r=(n=i(105))&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var n=i(60)("wks"),r=i(41),o=i(4).Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=n},function(t,e){t.exports=function(t){return"object"==s(t)?null!==t:"function"==typeof t}},function(t,e,i){var n=i(6);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(7),r=i(76),o=i(57),a=Object.defineProperty;e.f=i(8)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(49))&&n.__esModule?n:{default:n},o=99;function a(t,e){var i=t.toString().length,n=Math.max(0,e-i),r="";if(n>0)for(var o=0;o<n;o++)r+="0";return r+t}function s(){var t=new Date;return t.getFullYear()+"-"+a(t.getMonth()+1,2)+"-"+a(t.getDate(),2)+" "+a(t.getHours(),2)+":"+a(t.getMinutes(),2)+":"+a(t.getSeconds(),2)+"."+a(t.getMilliseconds(),3)+" "}var u={_data:[],_length:0,debug:function(){var t=s(),e=Array.prototype.slice.call(arguments);e[0]=t+e[0],o<=-1&&console.log.apply(console,e)},log:function(t){var e=s(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],o<=0&&console.log.apply(console,i),u.record(i,"log")},info:function(t){var e=s(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],o<=1&&console.info.apply(console,i),u.record(i,"info")},warn:function(t){var e=s(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],o<=2&&console.warn.apply(console,i),u.record(i,"warn")},error:function(t){var e=s(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],o<=3&&console.error.apply(console,i),u.record(i,"error")},group:function(t){var e=s(),i=Array.prototype.slice.call(arguments);if(i[0]=e+i[0],o<=1){var n=console.groupCollapsed||console.group||console.log;n.apply(console,i)}u.record(i,"group")},groupEnd:function(){console.groupEnd&&console.groupEnd.apply(console)},setLevel:function(t){t!=o&&(console.log(s()+" set log level from "+o+" to "+t),o=t)},getLevel:function(){return o},record:function(t,e){1100===u._length&&(u._data.splice(0,100),u._length=1e3);var i=0,n=(t.shift()||"").toString();for(n=n.replace(/\%c/gi,(function(t,e){return i++,""}));i--&&t.length;)t.shift();for(var o=0,a=t.length;o<a;o++){var s=t[o];"object"==(void 0===s?"undefined":(0,r.default)(s))&&(t[o]="")}t.unshift(n);var c=t.join(" ");u._length++,u._data.push("["+e+"]"+c)},getLog:function(){return u._data}};e.default=u},function(t,e,i){var n=i(19);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(9),r=i(32);t.exports=i(8)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(58),r=i(54);t.exports=function(t){return n(r(t))}},function(t,e,i){t.exports={default:i(182),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(16)),r=v(i(1)),o=v(i(3)),a=v(i(27)),s=v(i(28)),u=v(i(39)),c=v(i(21)),l=v(i(50)),h=v(i(10)),d=v(i(22)),f=v(i(73)),p=v(i(107)),m=v(i(108)),y=v(i(29));function v(t){return t&&t.__esModule?t:{default:t}}var g={"web_magics-audi_test":173,"web_magics-audi":174},_=new(function(t){function e(){(0,r.default)(this,e);var t=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this)),i=Number(localStorage.channelLogLevel);return isNaN(i)||h.default.setLevel(i),t.isLogin=!1,t.config=null,t.appId=0,t.sHuYaUA="media_"+y.default[1]+"&2206131428&sea",t.mediaUid=Math.floor(1e5*Math.random()+999999999),t.sUid="",t.sToken="",t.sCookie="",t.deviceId="",t.bAnonymous=0,t.netType=t.getNetType(),t.mediaUserId=new u.default.MediaUserId,t._refreshCookieReq=new u.default.RefreshCookieReq,t._onLoginMediaBind=t._onLoginMedia.bind(t),t._onRefreshCookieBind=t._onRefreshCookie.bind(t),t._onGetMediaCofigBind=t._onGetMediaCofig.bind(t),t.Events={LOGIN_SUC:"LOGIN_SUC",ON_GET_CONFIG:"ON_GET_CONFIG"},t.PlayerClass=null,t.anonymousuid=0,t}return(0,s.default)(e,t),(0,o.default)(e,[{key:"isSupported",value:function(){return 1!=Number(localStorage._closeMse)&&window.HYPlayer&&window.HYPlayer.isSupported()}},{key:"getMediaUserId",value:function(){return this.mediaUserId.lUid=0==this.mediaUid?this.anonymousuid:this.mediaUid,this.mediaUserId.sGuid=this.deviceId,this.mediaUserId.sToken=this.sToken,this.mediaUserId.sUA=this.sHuYaUA,this.mediaUserId.sCookie=this.sCookie,this.mediaUserId.iAppid=this.appId,this.mediaUserId.bAnonymous=this.bAnonymous,this.mediaUserId.sStrUid=this.sUid,this.mediaUserId.sUAppId=this.appId,this.mediaUserId.iNetType=this.netType,this.mediaUserId}},{key:"setAppId",value:function(t){g.hasOwnProperty(t)?this.appId=g[t]:this.appId=Number(t)||81}},{key:"setProperties",value:function(t){t.hasOwnProperty("deviceId")&&(this.deviceId=t.deviceId)}},{key:"createPlayer",value:function(t){return new this.PlayerClass(t)}},{key:"loginMedia",value:function(t){t.hasOwnProperty("sToken")&&(this.sToken=t.sToken),t.hasOwnProperty("uid")&&(this.mediaUid=t.uid,this.sUid=t.uid),this.isLogin||this._loginMedia()}},{key:"_loginMedia",value:function(){var t=new u.default.LoginVerifyReq;t.tId=this.getMediaUserId(),h.default.log("Main._loginMedia",t.tId.lUid,t.tId.sGuid,t),c.default.sendWup(f.default.MEDIAUISEA,f.default.LOGIN_VERIFY,t,this._onLoginMediaBind)}},{key:"_onLoginMedia",value:function(t){h.default.log("Main._onLoginMedia",t.iResCode),0===t.iResCode?(this.isLogin=!0,this.sCookie=t.sCookie,d.default.add(this._refreshCookie,this,1e3),this._getMediaConfig(),this.trigger(this.Events.LOGIN_SUC)):1===t.iResCode&&(this.bAnonymous=1,this._loginMedia())}},{key:"_getMediaConfig",value:function(){var t=new u.default.GetMediaConfigReq;t.tId=this.getMediaUserId(),c.default.sendWup(f.default.MEDIAUISEA,f.default.GET_MEDIA_CONFIG,t,this._onGetMediaCofigBind)}},{key:"_onGetMediaCofig",value:function(t){var e=t.mpConfig.value;if(this.config=e,e&&e.hasOwnProperty("nimoConfig"))try{var i=JSON.parse(e.nimoConfig);m.default.setConfig(i),p.default.setConfig(i)}catch(t){h.default.log("get config error")}this.trigger(this.Events.ON_GET_CONFIG)}},{key:"_refreshCookie",value:function(t,e){this.isLogin&&e%60==0&&(this._refreshCookieReq.tId=this.getMediaUserId(),c.default.sendWup(f.default.MEDIAUISEA,f.default.REFRESH_COOKIE,this._refreshCookieReq,this._onRefreshCookieBind))}},{key:"_onRefreshCookie",value:function(t){this.sCookie=t.sCookie}},{key:"getNetType",value:function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(t)if(t.effectiveType){if("4g"===t.effectiveType)return u.default.EMediaNetType.ENET_4G;if("3g"===t.effectiveType)return u.default.EMediaNetType.ENET_3G;if("2g"===t.effectiveType||"slow-2g"===t.effectiveType)return u.default.EMediaNetType.ENET_2G}else if(t.type&&"wifi"===t.type)return u.default.EMediaNetType.ENET_WIFI;return u.default.EMediaNetType.ENET_UNKNOWN}}]),e}(l.default));e.default=_},function(t,e,i){"use strict";var n=i(117)(!0);i(55)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(54);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i(16)),r=p(i(1)),o=p(i(3)),a=p(i(27)),s=p(i(28)),u=p(i(39)),c=p(i(206)),l=p(i(50)),h=p(i(106)),d=p(i(207)),f=p(i(29));function p(t){return t&&t.__esModule?t:{default:t}}var m="wup",y="http",v=new(function(t){function e(){(0,r.default)(this,e);var t=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return t._signalSdk=null,t._waits=[],t._onNoticeBind=t._onNotice.bind(t),t._onkMediaPackTypeRoomStreamChangeNoticeBind=t._onkMediaPackTypeRoomStreamChangeNotice.bind(t),t.SIGNAL_INIT="SIGNAL_INIT",t}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getSignalSdk",value:function(){return this._signalSdk}},{key:"getTaf",value:function(){return this._signalSdk?this._signalSdk.getTaf():null}},{key:"init",value:function(t){t&&this._signalSdk!=t&&(this.destroy(),this._signalSdk=t,u.default.setTaf(t.getTaf()),t.registerWupMap(c.default.WupMapping),t.registerUriMap(c.default.UriMapping),t.on(h.default.kMediaPackTypeStreamChangeNotice,this._onNoticeBind),t.on(h.default.kMediaPackTypeMediaStopStream,this._onNoticeBind),t.on(h.default.kMediaPackTypeMediaChgUpStream,this._onNoticeBind),t.on(h.default.kMediaPackTypeRoomStreamChangeNotice,this._onkMediaPackTypeRoomStreamChangeNoticeBind),t.on(d.default.WEBSOCKET_CONNECTED,this._onNoticeBind),t.on(d.default.WEBSOCKET_DOLAUNCH,this._onNoticeBind),this._checkWaits(),this.trigger(this.SIGNAL_INIT))}},{key:"isWSConnected",value:function(){return this._signalSdk&&this._signalSdk.isWSConnected()}},{key:"isWSLaunch",value:function(){return this._signalSdk&&this._signalSdk.isWSLaunch()}},{key:"rspDecode",value:function(t,e){return this._signalSdk&&this._signalSdk.rspDecode?this._signalSdk.rspDecode(t,e):null}},{key:"_checkWaits",value:function(){for(;this._waits.length>0;){var t=this._waits.shift();t.type===m?this.sendWup.apply(this,t.params):t.type===y&&this.sendWupHttp.apply(this,t.params)}}},{key:"_onNotice",value:function(t,e){this.trigger(t,e)}},{key:"_onkMediaPackTypeRoomStreamChangeNotice",value:function(t){this.trigger(h.default.kMediaPackTypeRoomStreamChangeNotice,t)}},{key:"destroy",value:function(){if(this._signalSdk){var t=this._signalSdk;t.off(h.default.kMediaPackTypeStreamChangeNotice,this._onNoticeBind),t.off(h.default.kMediaPackTypeMediaStopStream,this._onNoticeBind),t.off(h.default.kMediaPackTypeMediaChgUpStream,this._onNoticeBind),t.off(h.default.kMediaPackTypeRoomStreamChangeNotice,this._onkMediaPackTypeRoomStreamChangeNoticeBind)}this._signalSdk=null}},{key:"sendWup",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._signalSdk?this._signalSdk.sendWup(t,e,i,n,r):this._waits.push({type:m,params:[t,e,i,n,r]})}},{key:"sendWupHttp",value:function(t,e,i,n){this._signalSdk?this._signalSdk.sendWupHttp(t,e,i,n):this._waits.push({type:y,params:[t,e,i,n]})}},{key:"sendDataMetric",value:function(t){this._signalSdk&&this._signalSdk.sendDataMetric(t,(1===f.default.wap?"wap":"webh5")+"&2206131428&websocket")}}]),e}(l.default));e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(10)),r=o(i(51));function o(t){return t&&t.__esModule?t:{default:t}}var a=!1,s=[],u=0;function c(t,e){for(var i=0,n=s.length;i<n;i++){var r=s[i];if(r.callback==t&&r.thisObj==e)return r}return null}function l(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if((i=0|(Number(i)||0))<10||i%10!=0||!t)return n.default.error("Timer.add Invalide interval value or callback function."),!1;var a=c(t,e);return a||(a={callback:t,thisObj:e,bindCallback:e?t.bind(e):t,param:r},s.push(a)),a.times=o,a.tickCount=0,a.interval=i/10,a.delayDel=!1,h(),!0}function h(){!u&&s.length>0&&(u=setInterval(d,10))}function d(){if(0==s.length)return clearInterval(u),void(u=0);a=!0;for(var t=r.default.now(),e=s.length-1;e>=0;e--){var i=s[e];if(i&&!i.delayDel){if(++i.tickCount%i.interval==0){var n=i.bindCallback,o=i.tickCount/i.interval;n(t,o,i.param),i.times>0&&i.times<=o&&i.tickCount>0&&s.splice(e,1)}}else s.splice(e,1)}a=!1}e.default={has:function(t,e){return!!c(t,e)},add:l,remove:function(t,e){for(var i=0,n=s.length;i<n;i++){var r=s[i];if(r.callback==t&&r.thisObj==e)return a?r.delayDel=!0:s.splice(i,1),!0}return!1},once:function(t,e,i,n){l(t,e,i+10,n,1)},getSize:function(){return s.length}}},function(t,e){t.exports={}},function(t,e,i){var n=i(78),r=i(61);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){i(122);for(var n=i(4),r=i(12),o=i(23),a=i(5)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=n[c],h=l&&l.prototype;h&&!h[a]&&r(h,a,c),o[c]=o.Array}},function(t,e,i){t.exports={default:i(162),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=(n=i(49))&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){"use strict";e.__esModule=!0;var n=a(i(101)),r=a(i(103)),o=a(i(49));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={1:"web",2:"wap",web:1,wap:2}},function(t,e){},function(t,e){t.exports=!0},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(7),r=i(119),o=i(61),a=i(59)("IE_PROTO"),s=function(){},u=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t,e=i(56)("iframe"),n=o.length;for(e.style.display="none",i(79).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()}));t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[a]=t):i=u(),void 0===e?i:r(i,e)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(9).f,r=i(14),o=i(5)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){var n=i(11),r=i(82),o=i(83),a=i(7),s=i(40),u=i(65),c={},l={};(e=t.exports=function(t,e,i,h,d){var f,p,m,y,v=d?function(){return t}:u(t),g=n(i,h,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(f=s(t.length);f>_;_++)if((y=e?g(a(p=t[_])[0],p[1]):g(t[_]))===c||y===l)return y}else for(m=v.call(t);!(p=m.next()).done;)if((y=r(m,g,p.value,e))===c||y===l)return y}).BREAK=c,e.RETURN=l},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(1))&&n.__esModule?n:{default:n},o=function t(){(0,r.default)(this,t)};o.VIDEO_ERROR="VIDEO_ERROR",o.VIDEO_FRAME_LOADED="VIDEO_FRAME_LOADED",o.VIDEO_PLAY="VIDEO_PLAY",o.VIDEO_REAL_PLAY="VIDEO_REAL_PLAY",o.VIDEO_STOP="VIDEO_STOP",o.VIDEO_PAUSE="VIDEO_PAUSE",o.VIDEO_WAITING="VIDEO_WAITING",o.VIDEO_SEEK="VIDEO_SEEK",o.VIDEO_ENDED="VIDEO_ENDED",o.ANCHOR_STOP="ANCHOR_STOP",o.PLAY_STATUS="PLAY_STATUS",o.PLAY_DOWNLINK_INFO="PLAY_DOWNLINK_INFO",o.PLAY_TIME="PLAY_TIME",o.LINK_TIMEOUT="LINK_TIMEOUT",o.LOAD_DATA_TIMEOUT="LOAD_DATA_TIMEOUT",o.LINK_UNAVAILABLE="LINK_UNAVAILABLE",o.NO_DATA_RECEIVED="NO_DATA_RECEIVED",o.VIDEO_CLOSE="VIDEO_CLOSE",o.METADATA="METADATA",o.VIDEO_FRAME_JITTERBUFFER="VIDEO_FRAME_JITTERBUFFER",o.AUTO_PLAY_ERR="AUTO_PLAY_ERR",o.PLAY_TIMEOUT="PLAY_TIMEOUT",o.SEEK_TIMEOUT="SEEK_TIMEOUT",o.MEDIA_STREAMSTOP_NOTICE="MEDIA_STREAMSTOP_NOTICE",o.ROOM_STREAM_CHANGE="ROOM_STREAM_CHANGE",o.ROOM_NO_STREAM="ROOM_NO_STREAM",o.SWITCH_DONE="SWITCH_DONE",o.UPDATE_INTERSITY="UPDATE_INTERSITY",o.MEDIA_STREAM_UPDATE="MEDIA_STREAM_UPDATE",o.MEDIA_STREAM_INFO_ERROR="MEDIA_STREAM_INFO_ERROR",o.NEED_UPDATE_M3U8="NEED_UPDATE_M3U8",o.PLAYBACK_M3U8_UPDATED="PLAYBACK_M3U8_UPDATED",o.SEI_INFO="SEI_INFO",o.AUTO_BITRATE_CHANGED="AUTO_BITRATE_CHANGED",e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},r={setTaf:function(t){return n=t}};e.default=r,r.EMediaNetType={ENET_WIFI:0,ENET_MOB:1,ENET_DISCONNECT:2,ENET_2G:3,ENET_3G:4,ENET_4G:5,ENET_UNKNOWN:127},r.MediaUserId=function(){this.lUid=0,this.sGuid="",this.sToken="",this.sUA="",this.sCookie="",this.iAppid=0,this.sStrUid="",this.sUAppId="",this.iNetType=127},r.MediaUserId.prototype._clone=function(){return new r.MediaUserId},r.MediaUserId.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaUserId.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaUserId.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sToken),t.writeString(3,this.sUA),t.writeString(4,this.sCookie),t.writeInt32(6,this.iAppid),t.writeString(8,this.sStrUid),t.writeString(9,this.sUAppId),t.writeInt32(10,this.iNetType)},r.MediaUserId.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sToken=t.readString(2,!1,this.sToken),this.sUA=t.readString(3,!1,this.sUA),this.sCookie=t.readString(4,!1,this.sCookie),this.iAppid=t.readInt32(6,!1,this.iAppid),this.sStrUid=t.readString(8,!1,this.sStrUid),this.sUAppId=t.readString(9,!1,this.sUAppId),this.iNetType=t.readInt32(10,!1,this.iNetType)},r.LoginVerifyReq=function(){this.tId=new r.MediaUserId,this.iCookieDeadTime=0},r.LoginVerifyReq.prototype._clone=function(){return new r.LoginVerifyReq},r.LoginVerifyReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.LoginVerifyReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.LoginVerifyReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeInt32(1,this.iCookieDeadTime)},r.LoginVerifyReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.iCookieDeadTime=t.readInt32(1,!1,this.iCookieDeadTime)},r.LoginVerifyRsp=function(){this.iResCode=0,this.lUid=0,this.sCookie="",this.sUid="",this.iAppId=0},r.LoginVerifyRsp.prototype._clone=function(){return new r.LoginVerifyRsp},r.LoginVerifyRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.LoginVerifyRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.LoginVerifyRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iResCode),t.writeInt64(1,this.lUid),t.writeString(2,this.sCookie),t.writeString(3,this.sUid),t.writeInt32(4,this.iAppId)},r.LoginVerifyRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode),this.lUid=t.readInt64(1,!1,this.lUid),this.sCookie=t.readString(2,!1,this.sCookie),this.sUid=t.readString(3,!1,this.sUid),this.iAppId=t.readInt32(4,!1,this.iAppId)},r.RefreshCookieReq=function(){this.tId=new r.MediaUserId,this.iCookieDeadTime=0},r.RefreshCookieReq.prototype._clone=function(){return new r.RefreshCookieReq},r.RefreshCookieReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RefreshCookieReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RefreshCookieReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeInt32(1,this.iCookieDeadTime)},r.RefreshCookieReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.iCookieDeadTime=t.readInt32(1,!1,this.iCookieDeadTime)},r.RefreshCookieRsp=function(){this.iResCode=0,this.sCookie=""},r.RefreshCookieRsp.prototype._clone=function(){return new r.RefreshCookieRsp},r.RefreshCookieRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RefreshCookieRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RefreshCookieRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iResCode),t.writeString(1,this.sCookie)},r.RefreshCookieRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode),this.sCookie=t.readString(1,!1,this.sCookie)},r.MediaStreamInfo=function(){this.sCdnName="",this.sStreamName="",this.sFlvUrl="",this.sFlvSuffix="",this.sHlsUrl="",this.sHlsSuffix="",this.iLineIndex=0,this.vFlvIPList=new n.Vector(new n.STRING),this.iIsP2PSupport=0,this.sP2pUrl="",this.sP2pSuffix="",this.lFreeFlag=0,this.iIsHEVCSupport=0,this.vP2pIPList=new n.Vector(new n.STRING),this.iPCPriorityRate=0,this.iWebPriorityRate=0,this.iMobilePriorityRate=0,this.sAdditionalParam="",this.mMediaStreamFormatInfo=new n.Map(new n.STRING,new r.MediaStreamFormatInfo)},r.MediaStreamInfo.prototype._clone=function(){return new r.MediaStreamInfo},r.MediaStreamInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaStreamInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaStreamInfo.prototype.writeTo=function(t){t.writeString(0,this.sCdnName),t.writeString(1,this.sStreamName),t.writeString(2,this.sFlvUrl),t.writeString(3,this.sFlvSuffix),t.writeString(4,this.sHlsUrl),t.writeString(5,this.sHlsSuffix),t.writeInt32(6,this.iLineIndex),t.writeVector(7,this.vFlvIPList),t.writeInt32(8,this.iIsP2PSupport),t.writeString(9,this.sP2pUrl),t.writeString(10,this.sP2pSuffix),t.writeInt64(11,this.lFreeFlag),t.writeInt32(12,this.iIsHEVCSupport),t.writeVector(13,this.vP2pIPList),t.writeInt32(14,this.iPCPriorityRate),t.writeInt32(15,this.iWebPriorityRate),t.writeInt32(16,this.iMobilePriorityRate),t.writeString(17,this.sAdditionalParam),t.writeMap(18,this.mMediaStreamFormatInfo)},r.MediaStreamInfo.prototype.readFrom=function(t){this.sCdnName=t.readString(0,!1,this.sCdnName),this.sStreamName=t.readString(1,!1,this.sStreamName),this.sFlvUrl=t.readString(2,!1,this.sFlvUrl),this.sFlvSuffix=t.readString(3,!1,this.sFlvSuffix),this.sHlsUrl=t.readString(4,!1,this.sHlsUrl),this.sHlsSuffix=t.readString(5,!1,this.sHlsSuffix),this.iLineIndex=t.readInt32(6,!1,this.iLineIndex),this.vFlvIPList=t.readVector(7,!1,this.vFlvIPList),this.iIsP2PSupport=t.readInt32(8,!1,this.iIsP2PSupport),this.sP2pUrl=t.readString(9,!1,this.sP2pUrl),this.sP2pSuffix=t.readString(10,!1,this.sP2pSuffix),this.lFreeFlag=t.readInt64(11,!1,this.lFreeFlag),this.iIsHEVCSupport=t.readInt32(12,!1,this.iIsHEVCSupport),this.vP2pIPList=t.readVector(13,!1,this.vP2pIPList),this.iPCPriorityRate=t.readInt32(14,!1,this.iPCPriorityRate),this.iWebPriorityRate=t.readInt32(15,!1,this.iWebPriorityRate),this.iMobilePriorityRate=t.readInt32(16,!1,this.iMobilePriorityRate),this.sAdditionalParam=t.readString(17,!1,this.sAdditionalParam),this.mMediaStreamFormatInfo=t.readMap(18,!1,this.mMediaStreamFormatInfo)},r.QuitMediaGroupReq=function(){this.tId=new r.MediaUserId,this.vGroupId=new n.Vector(new n.STRING),this.iGroupType=0},r.QuitMediaGroupReq.prototype._clone=function(){return new r.QuitMediaGroupReq},r.QuitMediaGroupReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.QuitMediaGroupReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.QuitMediaGroupReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeVector(1,this.vGroupId),t.writeInt32(2,this.iGroupType)},r.QuitMediaGroupReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.vGroupId=t.readVector(1,!1,this.vGroupId),this.iGroupType=t.readInt32(2,!1,this.iGroupType)},r.QuitMediaGroupRsp=function(){this.iCode=0,this.sMsg="",this.vGroupId=new n.Vector(new n.STRING)},r.QuitMediaGroupRsp.prototype._clone=function(){return new r.QuitMediaGroupRsp},r.QuitMediaGroupRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.QuitMediaGroupRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.QuitMediaGroupRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeString(1,this.sMsg),t.writeVector(2,this.vGroupId)},r.QuitMediaGroupRsp.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.sMsg=t.readString(1,!1,this.sMsg),this.vGroupId=t.readVector(2,!1,this.vGroupId)},r.GetStreamInfoByRoomReq=function(){this.tId=new r.MediaUserId,this.sRoomId="",this.iMediaPackType=0,this.iLoopTime=0},r.GetStreamInfoByRoomReq.prototype._clone=function(){return new r.GetStreamInfoByRoomReq},r.GetStreamInfoByRoomReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetStreamInfoByRoomReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetStreamInfoByRoomReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeString(1,this.sRoomId),t.writeInt32(2,this.iMediaPackType),t.writeInt32(3,this.iLoopTime)},r.GetStreamInfoByRoomReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.sRoomId=t.readString(1,!1,this.sRoomId),this.iMediaPackType=t.readInt32(2,!1,this.iMediaPackType),this.iLoopTime=t.readInt32(3,!1,this.iLoopTime)},r.GetStreamInfoByRoomRsp=function(){this.tStreamInfoPack=new r.MediaStreamInfoPack,this.sRoomId="",this.sRoomGroupId="",this.lModifyTime=0},r.GetStreamInfoByRoomRsp.prototype._clone=function(){return new r.GetStreamInfoByRoomRsp},r.GetStreamInfoByRoomRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetStreamInfoByRoomRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetStreamInfoByRoomRsp.prototype.writeTo=function(t){t.writeStruct(0,this.tStreamInfoPack),t.writeString(1,this.sRoomId),t.writeString(2,this.sRoomGroupId),t.writeInt64(3,this.lModifyTime)},r.GetStreamInfoByRoomRsp.prototype.readFrom=function(t){this.tStreamInfoPack=t.readStruct(0,!1,this.tStreamInfoPack),this.sRoomId=t.readString(1,!1,this.sRoomId),this.sRoomGroupId=t.readString(2,!1,this.sRoomGroupId),this.lModifyTime=t.readInt64(3,!1,this.lModifyTime)},r.MediaStreamInfoPack=function(){this.mMediaStreamInfoPack=new n.Map(new n.STRING,new r.MediaStreamNameInfoPack)},r.MediaStreamInfoPack.prototype._clone=function(){return new r.MediaStreamInfoPack},r.MediaStreamInfoPack.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaStreamInfoPack.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaStreamInfoPack.prototype.writeTo=function(t){t.writeMap(0,this.mMediaStreamInfoPack)},r.MediaStreamInfoPack.prototype.readFrom=function(t){this.mMediaStreamInfoPack=t.readMap(0,!1,this.mMediaStreamInfoPack)},r.MediaStreamNameInfoPack=function(){this.vMediaStreamInfo=new n.Vector(new r.MediaStreamInfo),this.vStreamGearInfo=new n.Vector(new r.StreamGearInfo),this.sStreamGroupId="",this.lLiveCompatibleFlag=0,this.sAntiCode="",this.lStreamId=0,this.lUid=0,this.iStreamProperty=0,this.iBitRate=0,this.iStreamType=0,this.iPcDefaultBitRate=0,this.iWebDefaultBitRate=0,this.iMobileDefaultBitRate=0,this.sStreamBusiProperty="",this.sAdditionalParam=""},r.MediaStreamNameInfoPack.prototype._clone=function(){return new r.MediaStreamNameInfoPack},r.MediaStreamNameInfoPack.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaStreamNameInfoPack.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaStreamNameInfoPack.prototype.writeTo=function(t){t.writeVector(0,this.vMediaStreamInfo),t.writeVector(1,this.vStreamGearInfo),t.writeString(2,this.sStreamGroupId),t.writeInt64(3,this.lLiveCompatibleFlag),t.writeString(4,this.sAntiCode),t.writeInt64(5,this.lStreamId),t.writeInt64(6,this.lUid),t.writeInt32(7,this.iStreamProperty),t.writeInt32(8,this.iBitRate),t.writeInt32(9,this.iStreamType),t.writeInt32(10,this.iPcDefaultBitRate),t.writeInt32(11,this.iWebDefaultBitRate),t.writeInt32(12,this.iMobileDefaultBitRate),t.writeString(13,this.sStreamBusiProperty),t.writeString(14,this.sAdditionalParam)},r.MediaStreamNameInfoPack.prototype.readFrom=function(t){this.vMediaStreamInfo=t.readVector(0,!1,this.vMediaStreamInfo),this.vStreamGearInfo=t.readVector(1,!1,this.vStreamGearInfo),this.sStreamGroupId=t.readString(2,!1,this.sStreamGroupId),this.lLiveCompatibleFlag=t.readInt64(3,!1,this.lLiveCompatibleFlag),this.sAntiCode=t.readString(4,!1,this.sAntiCode),this.lStreamId=t.readInt64(5,!1,this.lStreamId),this.lUid=t.readInt64(6,!1,this.lUid),this.iStreamProperty=t.readInt32(7,!1,this.iStreamProperty),this.iBitRate=t.readInt32(8,!1,this.iBitRate),this.iStreamType=t.readInt32(9,!1,this.iStreamType),this.iPcDefaultBitRate=t.readInt32(10,!1,this.iPcDefaultBitRate),this.iWebDefaultBitRate=t.readInt32(11,!1,this.iWebDefaultBitRate),this.iMobileDefaultBitRate=t.readInt32(12,!1,this.iMobileDefaultBitRate),this.sStreamBusiProperty=t.readString(13,!1,this.sStreamBusiProperty),this.sAdditionalParam=t.readString(14,!1,this.sAdditionalParam)},r.StreamGearInfo=function(){this.sDisplayName="",this.iBitRate=0,this.iCodecType=0,this.iHEVCBitRate=-1,this.tResolution=new r.MediaResolution,this.sAdditionalParam="",this.mSupportFormat=new n.Map(new n.STRING,new n.INT64),this.sBusiGearIndex=""},r.StreamGearInfo.prototype._clone=function(){return new r.StreamGearInfo},r.StreamGearInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.StreamGearInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.StreamGearInfo.prototype.writeTo=function(t){t.writeString(0,this.sDisplayName),t.writeInt32(1,this.iBitRate),t.writeInt32(2,this.iCodecType),t.writeInt32(3,this.iHEVCBitRate),t.writeStruct(4,this.tResolution),t.writeString(5,this.sAdditionalParam),t.writeMap(6,this.mSupportFormat),t.writeString(7,this.sBusiGearIndex)},r.StreamGearInfo.prototype.readFrom=function(t){this.sDisplayName=t.readString(0,!1,this.sDisplayName),this.iBitRate=t.readInt32(1,!1,this.iBitRate),this.iCodecType=t.readInt32(2,!1,this.iCodecType),this.iHEVCBitRate=t.readInt32(3,!1,this.iHEVCBitRate),this.tResolution=t.readStruct(4,!1,this.tResolution),this.sAdditionalParam=t.readString(5,!1,this.sAdditionalParam),this.mSupportFormat=t.readMap(6,!1,this.mSupportFormat),this.sBusiGearIndex=t.readString(7,!1,this.sBusiGearIndex)},r.MediaResolution=function(){this.iWidth=0,this.iHeight=0},r.MediaResolution.prototype._clone=function(){return new r.MediaResolution},r.MediaResolution.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaResolution.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaResolution.prototype.writeTo=function(t){t.writeInt32(0,this.iWidth),t.writeInt32(1,this.iHeight)},r.MediaResolution.prototype.readFrom=function(t){this.iWidth=t.readInt32(0,!1,this.iWidth),this.iHeight=t.readInt32(1,!1,this.iHeight)},r.EMediaStreamType={EMST_UNKNOWN:-1,EMST_WS_RTMP:1,EMST_AL_RTMP:3,EMST_HUYA_UDP:5,EMST_TX_RTMP:6,EMST_JS_RTMP:8,EMST_HUYA_RTMP:15,EMST_HW_RTMP:16,EMST_BD_RTMP:17,EMST_WS2_RTMP:18,EMST_SW_UDP:20,EMST_ZG_UDP:21,EMST_HWVR_RTMP:22},r.EMediaStreamProperty={EOriginalStream:1,EMixStream:2,ECommStream:3},r.GetStreamInfoByRoomFakeReq=function(){this.tId=new r.MediaUserId,this.sRoomId="",this.mpVariable=new n.Map(new n.STRING,new n.STRING),this.iMediaPackType=-1},r.GetStreamInfoByRoomFakeReq.prototype._clone=function(){return new r.GetStreamInfoByRoomFakeReq},r.GetStreamInfoByRoomFakeReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetStreamInfoByRoomFakeReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetStreamInfoByRoomFakeReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeString(1,this.sRoomId),t.writeMap(2,this.mpVariable),t.writeInt32(3,this.iMediaPackType)},r.GetStreamInfoByRoomFakeReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.sRoomId=t.readString(1,!1,this.sRoomId),this.mpVariable=t.readMap(2,!1,this.mpVariable),this.iMediaPackType=t.readInt32(3,!1,this.iMediaPackType)},r.GetStreamInfoByRoomFakeRsp=function(){this.tStreamInfoPack=new r.MediaStreamInfoPack,this.mpConfig=new n.Map(new n.STRING,new n.STRING),this.sRoomId=""},r.GetStreamInfoByRoomFakeRsp.prototype._clone=function(){return new r.GetStreamInfoByRoomFakeRsp},r.GetStreamInfoByRoomFakeRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetStreamInfoByRoomFakeRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetStreamInfoByRoomFakeRsp.prototype.writeTo=function(t){t.writeStruct(0,this.tStreamInfoPack),t.writeMap(1,this.mpConfig),t.writeString(2,this.sRoomId)},r.GetStreamInfoByRoomFakeRsp.prototype.readFrom=function(t){this.tStreamInfoPack=t.readStruct(0,!1,this.tStreamInfoPack),this.mpConfig=t.readMap(1,!1,this.mpConfig),this.sRoomId=t.readString(2,!1,this.sRoomId)},r.MediaStreamFormatInfo=function(){this.sFormatName="",this.sUrl="",this.sSuffix="",this.vIPList=new n.Vector(new n.STRING),this.iIsSupport=0,this.iRate=0,this.sAdditionalParam="",this.lFormatPropertyFlag=0},r.MediaStreamFormatInfo.prototype._clone=function(){return new r.MediaStreamFormatInfo},r.MediaStreamFormatInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaStreamFormatInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaStreamFormatInfo.prototype.writeTo=function(t){t.writeString(0,this.sFormatName),t.writeString(1,this.sUrl),t.writeString(2,this.sSuffix),t.writeVector(3,this.vIPList),t.writeInt32(4,this.iIsSupport),t.writeInt32(5,this.iRate),t.writeString(6,this.sAdditionalParam),t.writeInt64(7,this.lFormatPropertyFlag)},r.MediaStreamFormatInfo.prototype.readFrom=function(t){this.sFormatName=t.readString(0,!1,this.sFormatName),this.sUrl=t.readString(1,!1,this.sUrl),this.sSuffix=t.readString(2,!1,this.sSuffix),this.vIPList=t.readVector(3,!1,this.vIPList),this.iIsSupport=t.readInt32(4,!1,this.iIsSupport),this.iRate=t.readInt32(5,!1,this.iRate),this.sAdditionalParam=t.readString(6,!1,this.sAdditionalParam),this.lFormatPropertyFlag=t.readInt64(7,!1,this.lFormatPropertyFlag)},r.StreamChangeNotice=function(){this.tStreamPack=new r.MediaStreamInfoPack,this.sRoomId=""},r.StreamChangeNotice.prototype._clone=function(){return new r.StreamChangeNotice},r.StreamChangeNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.StreamChangeNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.StreamChangeNotice.prototype.writeTo=function(t){t.writeStruct(0,this.tStreamPack),t.writeString(1,this.sRoomId)},r.StreamChangeNotice.prototype.readFrom=function(t){this.tStreamPack=t.readStruct(0,!1,this.tStreamPack),this.sRoomId=t.readString(1,!1,this.sRoomId)},r.RoomStreamChangeNotic=function(){this.sRoomId="",this.sSeq="",this.iDelay=0},r.RoomStreamChangeNotic.prototype._clone=function(){return new r.RoomStreamChangeNotic},r.RoomStreamChangeNotic.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RoomStreamChangeNotic.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RoomStreamChangeNotic.prototype.writeTo=function(t){t.writeString(0,this.sRoomId),t.writeString(1,this.sSeq),t.writeInt32(2,this.iDelay)},r.RoomStreamChangeNotic.prototype.readFrom=function(t){this.sRoomId=t.readString(0,!1,this.sRoomId),this.sSeq=t.readString(1,!1,this.sSeq),this.iDelay=t.readInt32(2,!1,this.iDelay)},r.MediaChangeUpStreamNotic=function(){this.iStreamtype=0,this.sUpUrl="",this.vIps=new n.Vector(new n.STRING)},r.MediaChangeUpStreamNotic.prototype._clone=function(){return new r.MediaChangeUpStreamNotic},r.MediaChangeUpStreamNotic.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaChangeUpStreamNotic.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaChangeUpStreamNotic.prototype.writeTo=function(t){t.writeInt32(0,this.iStreamtype),t.writeString(1,this.sUpUrl),t.writeVector(2,this.vIps)},r.MediaChangeUpStreamNotic.prototype.readFrom=function(t){this.iStreamtype=t.readInt32(0,!1,this.iStreamtype),this.sUpUrl=t.readString(1,!1,this.sUpUrl),this.vIps=t.readVector(2,!1,this.vIps)},r.MediaStopStreamNotice=function(){this.iAppId=0,this.lSequence=0,this.sStreamName="",this.sReason="",this.iReason=0,this.iFlag=0},r.MediaStopStreamNotice.prototype._clone=function(){return new r.MediaStopStreamNotice},r.MediaStopStreamNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaStopStreamNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaStopStreamNotice.prototype.writeTo=function(t){t.writeInt32(0,this.iAppId),t.writeInt64(1,this.lSequence),t.writeString(2,this.sStreamName),t.writeString(3,this.sReason),t.writeInt32(4,this.iReason),t.writeInt32(5,this.iFlag)},r.MediaStopStreamNotice.prototype.readFrom=function(t){this.iAppId=t.readInt32(0,!1,this.iAppId),this.lSequence=t.readInt64(1,!1,this.lSequence),this.sStreamName=t.readString(2,!1,this.sStreamName),this.sReason=t.readString(3,!1,this.sReason),this.iReason=t.readInt32(4,!1,this.iReason),this.iFlag=t.readInt32(5,!1,this.iFlag)},r.GetMediaConfigReq=function(){this.tId=new r.MediaUserId,this.mpVariable=new n.Map(new n.STRING,new n.STRING)},r.GetMediaConfigReq.prototype._clone=function(){return new r.GetMediaConfigReq},r.GetMediaConfigReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetMediaConfigReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetMediaConfigReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeMap(1,this.mpVariable)},r.GetMediaConfigReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.mpVariable=t.readMap(1,!1,this.mpVariable)},r.GetMediaConfigRsp=function(){this.mpConfig=new n.Map(new n.STRING,new n.STRING)},r.GetMediaConfigRsp.prototype._clone=function(){return new r.GetMediaConfigRsp},r.GetMediaConfigRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetMediaConfigRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetMediaConfigRsp.prototype.writeTo=function(t){t.writeMap(0,this.mpConfig)},r.GetMediaConfigRsp.prototype.readFrom=function(t){this.mpConfig=t.readMap(0,!1,this.mpConfig)},r.GetAntiCodeForStreamReq=function(){this.tId=new r.MediaUserId,this.sStreamName=""},r.GetAntiCodeForStreamReq.prototype._clone=function(){return new r.GetAntiCodeForStreamReq},r.GetAntiCodeForStreamReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetAntiCodeForStreamReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetAntiCodeForStreamReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeString(1,this.sStreamName)},r.GetAntiCodeForStreamReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.sStreamName=t.readString(1,!1,this.sStreamName)},r.GetAntiCodeForStreamRsp=function(){this.sAntiCode="",this.sStreamName=""},r.GetAntiCodeForStreamRsp.prototype._clone=function(){return new r.GetAntiCodeForStreamRsp},r.GetAntiCodeForStreamRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetAntiCodeForStreamRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetAntiCodeForStreamRsp.prototype.writeTo=function(t){t.writeString(0,this.sAntiCode),t.writeString(1,this.sStreamName)},r.GetAntiCodeForStreamRsp.prototype.readFrom=function(t){this.sAntiCode=t.readString(0,!1,this.sAntiCode),this.sStreamName=t.readString(1,!1,this.sStreamName)}},function(t,e,i){var n=i(53),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(34),r=i(5)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(37),r=i(32),o=i(15),a=i(57),s=i(14),u=i(76),c=Object.getOwnPropertyDescriptor;e.f=i(8)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(2),r=i(0),o=i(13);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],a={};a[t]=e(i),n(n.S+n.F*o((function(){i(1)})),"Object",a)}},function(t,e,i){e.f=i(5)},function(t,e,i){t.exports={default:i(180),__esModule:!0}},function(t,e,i){t.exports={default:i(192),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var n=a(i(102)),r=a(i(104)),o="function"==typeof r.default&&"symbol"==s(n.default)?function(t){return s(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":s(t)};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===o(n.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(1)),r=a(i(3)),o=a(i(10));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t),this.listeners={}}return(0,r.default)(t,[{key:"has",value:function(t,e,i){var n=this.listeners[t];if(!n)return!1;for(var r=0,o=n.length;r<o;r++){var a=n[r];if(a.callback==e&&a.thisObj==i)return!0}return!1}},{key:"on",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this.has(t,e,i)){var o=this.listeners[t]||[];o.push({once:r,priority:n||0,callback:e,thisObj:i,bindCallback:i&&e?e.bind(i):e}),o.sort((function(t,e){return e.priority-t.priority})),this.listeners[t]=o}}},{key:"once",value:function(t,e,i,n){this.on(t,e,i,n,!0)}},{key:"off",value:function(t,e,i){var n=this.listeners[t];if(n)for(var r=n.length-1;r>=0;r--){var o=n[r];if(o.callback==e&&o.thisObj==i)return void n.splice(r,1)}}},{key:"clear",value:function(){this.listeners={}}},{key:"trigger",value:function(t,e,i){var n=this.listeners[t];if(n){n.forEach((function(n){var r=n.bindCallback;"function"==typeof r?r(e,i):o.default.warn("logger.trigger uri="+t+" callback=undefined",n)}));for(var r=n.length-1;r>=0;r--)n[r].once&&n.splice(r,1)}}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t,e){var i=t.toString().length,n=Math.max(0,e-i);return"0".repeat(n)+t}Object.defineProperty(e,"__esModule",{value:!0});var r=0,o={now:function(){0===r&&(r=Date.now()-1);var t=Date.now()-r;return t>4294967295?(r+=4294967295,t-4294967295):t},utc:function(){return Math.round(Date.now()/1e3)},getDateStr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=null,i=(e=t?new Date(t):new Date).getFullYear(),r=n(e.getMonth()+1,2),o=n(e.getDate(),2);return i+"-"+r+"-"+o},getTimeStr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=null,r=n((i=t?new Date(t):new Date).getHours(),2),o=n(i.getMinutes(),2),a=n(i.getSeconds(),2),s=r+":"+o+":"+a;if(e){var u=n(i.getMilliseconds(),3);s+="."+u}return s},getDateTimeStr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=null,r=(i=t?new Date(t):new Date).getFullYear(),o=n(i.getMonth()+1,2),a=n(i.getDate(),2),s=n(i.getHours(),2),u=n(i.getMinutes(),2),c=n(i.getSeconds(),2),l=r+"-"+o+"-"+a+" "+s+":"+u+":"+c;if(e){var h=n(i.getMilliseconds(),3);l+="."+h}return l}};e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(48)),r=l(i(1)),o=l(i(3)),a=l(i(17)),s=l(i(21)),u=l(i(29)),c=l(i(111));function l(t){return t&&t.__esModule?t:{default:t}}var h=new(function(){function t(){(0,r.default)(this,t),this.anonymousuid=0,this.myid=0}return(0,o.default)(t,[{key:"onNimoDataMetric2",value:function(t,e,i,r,o,l,h,d,f,p){var m={anchoruid:e,line:o,coderate:i,coderatebps:1e3*i,h265:0,gameId:d,place_p:l,room_id:h,stream_from:p,platform_h5:u.default[1],appid:a.default.appId};f&&(m.oexp=f),0==this.myid&&(m.anonymousuid=0==this.anonymousuid?c.default.getAnonymousUid():this.anonymousuid),t.forEach((function(t){t.vDimension||(t.vDimension={}),(0,n.default)(t.vDimension,m)})),s.default.sendDataMetric(t)}}]),t}());e.default=h},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(31),r=i(2),o=i(77),a=i(12),s=i(23),u=i(118),c=i(35),l=i(62),h=i(5)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,i,p,m,y,v){u(i,e,p);var g,_,S,w=function(t){if(!d&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},b=e+" Iterator",I="values"==m,T=!1,P=t.prototype,E=P[h]||P["@@iterator"]||m&&P[m],k=E||w(m),R=m?I?w("entries"):k:void 0,C="Array"==e&&P.entries||E;if(C&&(S=l(C.call(new t)))!==Object.prototype&&S.next&&(c(S,b,!0),n||"function"==typeof S[h]||a(S,h,f)),I&&E&&"values"!==E.name&&(T=!0,k=function(){return E.call(this)}),n&&!v||!d&&!T&&P[h]||a(P,h,k),s[e]=k,s[b]=f,m)if(g={values:I?k:w("values"),keys:y?k:w("keys"),entries:R},v)for(_ in g)_ in P||o(P,_,g[_]);else r(r.P+r.F*(d||T),e,g);return g}},function(t,e,i){var n=i(6),r=i(4).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){var n=i(6);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(60)("keys"),r=i(41);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(0),r=i(4),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(31)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(14),r=i(20),o=i(59)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){var n=i(12);t.exports=function(t,e,i){for(var r in e)i&&t[r]?t[r]=e[r]:n(t,r,e[r]);return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(42),r=i(5)("iterator"),o=i(23);t.exports=i(0).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){var n=i(41)("meta"),r=i(6),o=i(14),a=i(9).f,u=0,c=Object.isExtensible||function(){return!0},l=!i(13)((function(){return c(Object.preventExtensions({}))})),h=function(t){a(t,n,{value:{i:"O"+ ++u,w:{}}})},d=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==s(t)?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!c(t))return"F";if(!e)return"E";h(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!c(t))return!0;if(!e)return!1;h(t)}return t[n].w},onFreeze:function(t){return l&&d.NEED&&c(t)&&!o(t,n)&&h(t),t}}},function(t,e,i){var n=i(6);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){var n=i(78),r=i(61).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){"use strict";var n=i(19);function r(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)}t.exports.f=function(t){return new r(t)}},function(t,e,i){t.exports={default:i(149),__esModule:!0}},function(t,e,i){t.exports={default:i(163),__esModule:!0}},function(t,e,i){var n=i(4),r=i(0),o=i(31),a=i(46),s=i(9).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(1))&&n.__esModule?n:{default:n},o=function t(){(0,r.default)(this,t)};o.MEDIAUISEA="mediauisea",o.GET_MEDIA_CONFIG="getMediaConfig",o.GET_INFO_FROM_VGM="getInfoFromVGM",o.CHECK_ID_BY_STR="checkIdByStr",o.LOGIN_VERIFY="loginVerify",o.REFRESH_COOKIE="refreshCookie",o.JOIN_GROUP="joinGroup",o.QUIT_GROUP="quitGroup",o.GET_STREAM_INFO_BY_ROOM="getStreamInfoByRoom",o.GET_STREAM_INFO_BY_STREAMNAME="getStreamInfoByStreamName",o.GET_STREAM_INFO_BY_ROOM_FAKE="getStreamInfoByRoomFake",e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={p2p:"video/p2p",flv:"video/flv",mp4:"video/mp4",hls:"video/hls",playback:"video/playback",f_p2p:"p2p",f_flv:"flv",f_hls:"hls",f_mp4:"mp4",isLivingFormat:function(t){return t===this.f_p2p||t===this.f_flv||t===this.f_hls}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={STREAM_ERROR:"stream_error",BUSI_STREAM:"busi_stream",DIF_STREAM:"dif_stream",VIDEO_LOAD_TS:"video_load_ts",BLACK_SCREEN:"black_screen",ROOM_SDK_STREAM:"room_sdk_stream"}},function(t,e,i){t.exports=!i(8)&&!i(13)((function(){return 7!=Object.defineProperty(i(56)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){t.exports=i(12)},function(t,e,i){var n=i(14),r=i(15),o=i(120)(!1),a=i(59)("IE_PROTO");t.exports=function(t,e){var i,s=r(t),u=0,c=[];for(i in s)i!=a&&n(s,i)&&c.push(i);for(;e.length>u;)n(s,i=e[u++])&&(~o(c,i)||c.push(i));return c}},function(t,e,i){var n=i(4).document;t.exports=n&&n.documentElement},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(9).f,r=i(33),o=i(63),a=i(11),s=i(64),u=i(36),c=i(55),l=i(80),h=i(84),d=i(8),f=i(66).fastKey,p=i(67),m=d?"_s":"size",y=function(t,e){var i,n=f(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var l=t((function(t,n){s(t,l,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,null!=n&&u(n,i,t[c],t)}));return o(l.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=p(this,e),n=y(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[m]--}return!!n},forEach:function(t){p(this,e);for(var i,n=a(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!y(p(this,e),t)}}),d&&n(l.prototype,"size",{get:function(){return p(this,e)[m]}}),l},def:function(t,e,i){var n,r,o=y(t,e);return o?o.v=i:(t._l=o={i:r=f(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[m]++,"F"!==r&&(t._i[r]=o)),t},getEntry:y,setStrong:function(t,e,i){c(t,e,(function(t,i){this._t=p(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),i?"entries":"values",!i,!0),h(e)}}},function(t,e,i){var n=i(7);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,i){var n=i(23),r=i(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(9),a=i(8),s=i(5)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:n[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){"use strict";var n=i(4),r=i(2),o=i(66),a=i(13),s=i(12),u=i(63),c=i(36),l=i(64),h=i(6),d=i(35),f=i(9).f,p=i(125)(0),m=i(8);t.exports=function(t,e,i,y,v,g){var _=n[t],S=_,w=v?"set":"add",b=S&&S.prototype,I={};return m&&"function"==typeof S&&(g||b.forEach&&!a((function(){(new S).entries().next()})))?(S=e((function(e,i){l(e,S,t,"_c"),e._c=new _,null!=i&&c(i,v,e[w],e)})),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;!(t in b)||g&&"clear"==t||s(S.prototype,t,(function(i,n){if(l(this,S,t),!e&&g&&!h(i))return"get"==t&&void 0;var r=this._c[t](0===i?0:i,n);return e?this:r}))})),g||f(S.prototype,"size",{get:function(){return this._c.size}})):(S=y.getConstructor(e,t,v,w),u(S.prototype,i),o.NEED=!0),d(S,t),I[t]=S,r(r.G+r.W+r.F,I),g||y.setStrong(S,t,v),S}},function(t,e,i){var n=i(34);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(42),r=i(129);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,i){"use strict";var n=i(2);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(2),r=i(19),o=i(11),a=i(36);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,s,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),null==t?new this:(i=[],e?(n=0,s=o(u,arguments[2],2),a(t,!1,(function(t){i.push(s(t,n++))}))):a(t,!1,i.push,i),new this(i))}})}},function(t,e,i){t.exports={default:i(143),__esModule:!0}},function(t,e,i){var n=i(7),r=i(19),o=i(5)("species");t.exports=function(t,e){var i,a=n(t).constructor;return void 0===a||null==(i=n(a)[o])?e:r(i)}},function(t,e,i){var n,r,o,a=i(11),s=i(93),u=i(79),c=i(56),l=i(4),h=l.process,d=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,y=0,v={},g=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},_=function(t){g.call(t.data)};d&&f||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return v[++y]=function(){s("function"==typeof t?t:Function(t),e)},n(y),y},f=function(t){delete v[t]},"process"==i(34)(h)?n=function(t){h.nextTick(a(g,t,1))}:m&&m.now?n=function(t){m.now(a(g,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=_,n=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:d,clear:f}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(7),r=i(6),o=i(69);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){var n=i(5)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:i=!0}},o[n]=function(){return a},t(o)}catch(t){}return i}},function(t,e,i){t.exports={default:i(151),__esModule:!0}},function(t,e,i){t.exports={default:i(160),__esModule:!0}},function(t,e,i){var n=i(15),r=i(68).f,o={}.toString,a="object"==("undefined"===typeof window?"undefined":s(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return a.slice()}}(t):r(n(t))}},function(t,e,i){"use strict";var n=i(4),r=i(14),o=i(8),a=i(2),u=i(77),c=i(66).KEY,l=i(13),h=i(60),d=i(35),f=i(41),p=i(5),m=i(46),y=i(72),v=i(179),g=i(86),_=i(7),S=i(6),w=i(20),b=i(15),I=i(57),T=i(32),P=i(33),E=i(99),k=i(44),R=i(43),C=i(9),O=i(24),A=k.f,L=C.f,N=E.f,M=n.Symbol,U=n.JSON,D=U&&U.stringify,B=p("_hidden"),F=p("toPrimitive"),x={}.propertyIsEnumerable,j=h("symbol-registry"),V=h("symbols"),G=h("op-symbols"),H=Object.prototype,W="function"==typeof M&&!!R.f,q=n.QObject,K=!q||!q.prototype||!q.prototype.findChild,Y=o&&l((function(){return 7!=P(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=A(H,e);n&&delete H[e],L(t,e,i),n&&t!==H&&L(H,e,n)}:L,z=function(t){var e=V[t]=P(M.prototype);return e._k=t,e},J=W&&"symbol"==s(M.iterator)?function(t){return"symbol"==s(t)}:function(t){return t instanceof M},Q=function t(e,i,n){return e===H&&t(G,i,n),_(e),i=I(i,!0),_(n),r(V,i)?(n.enumerable?(r(e,B)&&e[B][i]&&(e[B][i]=!1),n=P(n,{enumerable:T(0,!1)})):(r(e,B)||L(e,B,T(1,{})),e[B][i]=!0),Y(e,i,n)):L(e,i,n)},X=function(t,e){_(t);for(var i,n=v(e=b(e)),r=0,o=n.length;o>r;)Q(t,i=n[r++],e[i]);return t},Z=function(t){var e=x.call(this,t=I(t,!0));return!(this===H&&r(V,t)&&!r(G,t))&&(!(e||!r(this,t)||!r(V,t)||r(this,B)&&this[B][t])||e)},$=function(t,e){if(t=b(t),e=I(e,!0),t!==H||!r(V,e)||r(G,e)){var i=A(t,e);return!i||!r(V,e)||r(t,B)&&t[B][e]||(i.enumerable=!0),i}},tt=function(t){for(var e,i=N(b(t)),n=[],o=0;i.length>o;)r(V,e=i[o++])||e==B||e==c||n.push(e);return n},et=function(t){for(var e,i=t===H,n=N(i?G:b(t)),o=[],a=0;n.length>a;)!r(V,e=n[a++])||i&&!r(H,e)||o.push(V[e]);return o};W||(u((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function e(i){this===H&&e.call(G,i),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),Y(this,t,T(1,i))};return o&&K&&Y(H,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",(function(){return this._k})),k.f=$,C.f=Q,i(68).f=E.f=tt,i(37).f=Z,R.f=et,o&&!i(31)&&u(H,"propertyIsEnumerable",Z,!0),m.f=function(t){return z(p(t))}),a(a.G+a.W+a.F*!W,{Symbol:M});for(var it="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;it.length>nt;)p(it[nt++]);for(var rt=O(p.store),ot=0;rt.length>ot;)y(rt[ot++]);a(a.S+a.F*!W,"Symbol",{for:function(t){return r(j,t+="")?j[t]:j[t]=M(t)},keyFor:function(t){if(!J(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!W,"Object",{create:function(t,e){return void 0===e?P(t):X(P(t),e)},defineProperty:Q,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=l((function(){R.f(1)}));a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return R.f(w(t))}}),U&&a(a.S+a.F*(!W||l((function(){var t=M();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(S(e)||void 0!==t)&&!J(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!J(e))return e}),n[1]=e,D.apply(U,n)}}),M.prototype[F]||i(12)(M.prototype,F,M.prototype.valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(t,e,i){t.exports={default:i(184),__esModule:!0}},function(t,e,i){t.exports={default:i(187),__esModule:!0}},function(t,e,i){t.exports={default:i(195),__esModule:!0}},function(t,e,i){t.exports={default:i(197),__esModule:!0}},function(t,e,i){t.exports={default:i(202),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={kMediaPackTypeStreamChangeNotice:1e5,kMediaPackTypeMediaStopStream:100102,kMediaPackTypeMediaChgUpStream:100200,kMediaPackTypeRoomStreamChangeNotice:100300}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(26)),r=a(i(1)),o=a(i(3));function a(t){return t&&t.__esModule?t:{default:t}}var s="ctrlConfig",u=new(function(){function t(){(0,r.default)(this,t),this._localKey="_"+s,this._config={},this._initLocalConfig(),this.CTRL_KEY={SWITCH_PLAY:"switchPlay",SWITCH_LEVEL:"switchLevel",ANTICODE:"anticode",OPEN_SDK_STREAM:"openSdkStream"}}return(0,o.default)(t,[{key:"_initLocalConfig",value:function(){localStorage.hasOwnProperty(this._localKey)?this._config=JSON.parse(localStorage.getItem(this._localKey)):this._config={}}},{key:"setConfig",value:function(t){t&&t.hasOwnProperty(s)?(this._config=t[s],localStorage.setItem(this._localKey,(0,n.default)(this._config))):(this._config={},localStorage.removeItem(this._localKey))}},{key:"isOpen",value:function(t,e){if(this._config.hasOwnProperty(e)){var i=this._config[e];return"all"===i||-1!==i.indexOf(t+"")}return!1}}]),t}());e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1)),r=o(i(3));function o(t){return t&&t.__esModule?t:{default:t}}var a=new(function(){function t(){(0,n.default)(this,t),this.bitrates={6e3:"_veryhigh",2500:"_high",1e3:"_mid",500:"_low",250:"_verylow",0:""}}return(0,r.default)(t,[{key:"setConfig",value:function(t){t&&t.hasOwnProperty("testRooms")?localStorage._testRooms=t.testRooms:localStorage.removeItem("_testRooms")}},{key:"isTest",value:function(t){var e=localStorage._testRooms;return e&&-1!==e.indexOf(t.toString())}},{key:"getStreamName",value:function(t,e,i){return i&&(t+=this.bitrates[e]),t}}]),t}());e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(47)),r=u(i(48)),o=u(i(71)),a=u(i(1)),s=u(i(3));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){(0,a.default)(this,t),this.comDim=new o.default,this.coreDim=new o.default,this.actDim=new o.default,this.extDim=new o.default,this.coreMap=new o.default,this.compMap=new o.default,this.heart_type=0}return(0,s.default)(t,[{key:"reset",value:function(){this.comDim.clear(),this.coreDim.clear(),this.actDim.clear(),this.extDim.clear(),this.coreMap.clear(),this.compMap.clear(),this.heart_type=0}},{key:"createAct",value:function(t,e){return this._createAct(t,e)}},{key:"_createAct",value:function(t,e){var i={sMetricName:"yspwl.web.live.user.act",vField:{},vDimension:{}};if(i.vDimension.act_type=t,this._fillFromMap(i.vDimension,this.comDim),this._fillFromMap(i.vDimension,this.actDim),e){var n=0;if(e.hasOwnProperty("value")){var o=e.value;for(n=0;n<o.length;n++)i.vField["value"+(n+1)]=o[n]}if(e.hasOwnProperty("str")){var a=e.str;for(n=0;n<a.length;n++)i.vDimension["str"+(n+1)]=a[n]}e.hasOwnProperty("dim")&&(0,r.default)(i.vDimension,e.dim)}return this.actDim.clear(),i}},{key:"fill",value:function(t,e){e?(this.heart_type=2,this._fill(t)):this._fill(t)}},{key:"_fill",value:function(t){var e={sMetricName:"yspwl.web.live.user.heart20",vField:{},vDimension:{},vExLog:{}};this.coreDim.set("heart_type",this.heart_type),this._fillFromMap(e.vDimension,this.comDim),this._fillFromMap(e.vDimension,this.coreDim),this._fillFromMap(e.vExLog,this.extDim),this._fillFromMap(e.vField,this.coreMap),this._fillComp(e.vDimension),this.coreDim.clear(),this.extDim.clear(),this.coreMap.clear(),this.compMap.clear(),0==this.heart_type&&(this.heart_type=1),t.push(e)}},{key:"_fillComp",value:function(t){var e=!0,i=!1,r=void 0;try{for(var o,a=(0,n.default)(this.compMap.keys());!(e=(o=a.next()).done);e=!0){var s=o.value,u=this.compMap.get(s),c="",l=!0,h=!1,d=void 0;try{for(var f,p=(0,n.default)(u.keys());!(l=(f=p.next()).done);l=!0){var m=f.value;c.length>0&&(c+=";"),c+=m+","+u.get(m)}}catch(t){h=!0,d=t}finally{try{!l&&p.return&&p.return()}finally{if(h)throw d}}t[s]=c}}catch(t){i=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"_fillFromMap",value:function(t,e){var i=!0,r=!1,o=void 0;try{for(var a,s=(0,n.default)(e.keys());!(i=(a=s.next()).done);i=!0){var u=a.value;t[u]=e.get(u)}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}},{key:"setComDim",value:function(t,e){this.comDim.set(t,e)}},{key:"setCoreDim",value:function(t,e){this.coreDim.set(t,e)}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(70)),r=l(i(1)),o=l(i(3)),a=l(i(21)),s=l(i(10)),u=l(i(29)),c=l(i(74));function l(t){return t&&t.__esModule?t:{default:t}}l(i(17));var h=function(){function t(){(0,r.default)(this,t)}return(0,o.default)(t,[{key:"setParams",value:function(t,e){this.pid=Number(t)||0,this.gearIndexList=e}},{key:"setLivingInfo",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments[3],o=[],a=r.line||-1,s=r.mediaFormat||"";for(var u in e.streams){var c=e.streams[u],l=c.iBitRate,h=[],d=0,f=0,p=-1,m=[],y=c.vMediaStreamInfo,v=c.vStreamGearInfo;f=-1==i?c.iWebDefaultBitRate:i;for(var g=0;g<y.length;g++){var _=y[g];if(_.iWebPriorityRate<0)m.push(g);else{var S=_.iLineIndex;d+=_.iWebPriorityRate,h.push({line:S,rate:_.iWebPriorityRate}),a==S&&(p=S)}}for(var w=m.length-1;w>=0;w--){var b=m[w];y.splice(b,1)}if(0==y.length)break;if(1===y.length||0===d)p=y[0].iLineIndex;else if(-1===p)for(var I=0,T=Math.random(),P=0,E=h.length;P<E;P++){var k=h[P],R=k.rate/d;if(T<=(I+=R)){p=k.line;break}}f=this.checkDefalutBitRate(v,f,n);for(var C=null,O=0;O<y.length;O++)if(y[O].iLineIndex==p){C=t.getMediaStreamFormat(y[O].mMediaStreamFormatInfo.value,s,!0);break}var A={streamName:u,vMediaStreamInfo:y,chooseLine:p,vStreamGearInfo:v,defaultBitRate:f,iBitRate:l,playFormat:C,sAdditionalParam:c.sAdditionalParam,sAntiCode:c.sAntiCode};o.push(A)}return o}},{key:"checkDefalutBitRate",value:function(t,e,i){var n=this.getByGearIndex(t,i);return-1===n&&(n=this.getByBitrate(t,e)),n}},{key:"getByBitrate",value:function(t,e){for(var i=t.length>0?-1:0,r=e,o=0,a=n.default,s=0;s<t.length;s++){var u=t[s].iBitRate;if(0===r){if(0===u){i=u;break}}else if(u>0&&u<=r){i=u;break}o=Math.max(o,u),a=Math.min(a,u)}return-1===i&&(i=0===r?o:a),i}},{key:"getByGearIndex",value:function(t,e){if(!this.gearIndexList||0===this.gearIndexList.length)return-1;if(-1===(e=Number(e)))return-1;var i=this.gearIndexList.indexOf(e);if(-1===i)return-1;var n=this._getByGearIndex(t,e);if(-1===n)for(var r=this.gearIndexList.length,o=0;o<r;o++){var a=i-o,s=i+o;if(s<r&&(n=this._getByGearIndex(t,this.gearIndexList[s])),-1===n&&a>0&&(n=this._getByGearIndex(t,this.gearIndexList[a])),-1!==n)break}return n}},{key:"_getByGearIndex",value:function(t,e){for(var i=0;i<t.length;i++)if(Number(t[i].sBusiGearIndex)===e)return Number(t[i].iBitRate);return-1}},{key:"setLiveRoomBinData",value:function(t){try{for(var e=new ArrayBuffer(t.length/2),i=new Uint8Array(e),n=0,r=t.length/2;n<r;n++){var o=parseInt(t[2*n]+t[2*n+1]+"",16);i[n]=o}return a.default.rspDecode(i.buffer,"HUYA.GetStreamInfoByRoomRsp")}catch(t){s.default.warn("LivingInfo.setLiveRoomBinData",t.message)}return null}}],[{key:"reSelectFormat",value:function(e,i){for(var n=0;n<e.vMediaStreamInfo.length;n++){var r=e.vMediaStreamInfo[n];if(r.iLineIndex==e.chooseLine){e.playFormat=t.getMediaStreamFormat(r.mMediaStreamFormatInfo.value,null,i);break}}}},{key:"getMediaStreamFormat",value:function(e,i,n){var r=[];for(var o in e)if(c.default.isLivingFormat(o)){if(i&&i===o)return e[o];r.push(e[o])}return 1===u.default.wap?t.getMediaStreamFormatWap(r):t.getMediaStreamFormatNew(r,n)}},{key:"getMediaStreamFormatOld",value:function(t){var e=t.length,i=0,n=0;for(i=0;i<e;i++)n+=t[i].iRate;var r=Math.random()*n,o=0,a=null;for(i=0;i<e;i++){if(o<r&&r<=t[i].iRate+o){a=t[i];break}o+=t[i].iRate}return null===a&&e>0&&(a=t[0]),a}},{key:"getMediaStreamFormatNew",value:function(t,e){var i=null,n=null,r=null;return t.forEach((function(t){t.sFormatName===c.default.f_p2p&&e?i=t:t.sFormatName===c.default.f_flv?n=t:t.sFormatName===c.default.f_hls&&(r=t)})),i||n||r}},{key:"getMediaStreamFormatWap",value:function(t){var e=null;return t.forEach((function(t){t.sFormatName===c.default.f_flv||t.sFormatName===c.default.f_hls&&(e=t)})),e}}]),t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1)),r=o(i(3));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t)}return(0,r.default)(t,null,[{key:"setCookie",value:function(t,e,i,n,r){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var a=t+"="+e+"; expires="+o.toUTCString();n&&(a+="; domain="+n),r&&(a+="; path="+r),document.cookie=a}},{key:"setWholeCookie",value:function(t,e){var i=new Date;i.setTime(i.getTime()+24*e*60*60*1e3);var n="expires="+i.toUTCString();document.cookie=t+"; "+n}},{key:"setCompleteCookie",value:function(t){document.cookie=t}},{key:"getCookie",value:function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){var o=i[n].trim();if(0==o.indexOf(e))return o.substr(e.length)}return""}},{key:"storeIps",value:function(e){for(var i="",n=t.getIpsKey(!0),r=e.join("|").toLocaleLowerCase(),o=0,a=r.length;o<a;o++){var s=n[r.charAt(o)],u=Math.random()*s.length>>0;i+=s.charAt(u)}localStorage.wssips=i}},{key:"getIps",value:function(){var e=localStorage.wssips;if(!e)return[];for(var i="",n=t.getIpsKey(!1),r=0,o=e.length;r<o;r++)i+=n[e.charAt(r)];return i.split("|")}},{key:"getIpsKey",value:function(t){for(var e=["-",".",":","|"],i="_N1Y%/ny^6?Mi7|wCe#$VmT=.GBut]3L*f<acX2Eop>d}WqKPQ@r;zx!s`(:IHFRZ~[A{Jb-O&D)v0Ukj95,8lg+h4S",n={},r=0;r<40;r++){var o=r<11?3:2,a=i.substr(0,o);i=i.substr(o);var s=r+"";if(r>13?s=String.fromCharCode(r+83):r>9&&(s=e[r-10]),t)n[s]=a;else for(var u=0;u<a.length;u++)n[a.charAt(u)]=s}return n}},{key:"removeUrlEndSlash",value:function(t){if(!t)return t;var e=t.split("");return"/"===e[e.length-1]&&e.pop(),e.join("")}},{key:"getAnonymousUid",value:function(){return Number((Date.now()%1e10*1e3+(1e3*Math.random()|0))%4294967295)}},{key:"logcss",value:function(t,e,i){var n="font-weight:900";return t&&(n+=";color:"+t),e&&(n+=";background:"+e),i&&(n+=";border:3px solid "+i),n}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(47)),r=c(i(48)),o=c(i(71)),a=c(i(1)),s=c(i(3)),u=c(i(219));function c(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,a.default)(this,t),this.pid=0,this.roomid=0,this.autoFeedbackKeys={},this.autoFeedbackRooms="",this.initKeys=!1,this.waitMap=new o.default}return(0,s.default)(t,[{key:"setRoomid",value:function(t,e){this.pid=t,this.roomid=e,this._sendWait()}},{key:"setConfig",value:function(t){this.initKeys=!0;try{(t=JSON.parse(t)).hasOwnProperty("autoFeedbackRooms")&&(this.autoFeedbackRooms=t.autoFeedbackRooms),t.autoFeedbackKeys&&(0,r.default)(this.autoFeedbackKeys,t.autoFeedbackKeys)}catch(t){}this._sendWait()}},{key:"_sendWait",value:function(){if(0!=this.roomid&&this.initKeys){var t=!0,e=!1,i=void 0;try{for(var r,o=(0,n.default)(this.waitMap.keys());!(t=(r=o.next()).done);t=!0){var a=r.value;this.feedback(a,this.waitMap.get(a))}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}this.waitMap.clear()}}},{key:"_checkAble",value:function(){if("all"===this.autoFeedbackRooms)return!0;var t=this.roomid+"";return""!==t&&-1!==this.autoFeedbackRooms.indexOf(t)}},{key:"_feedbackAble",value:function(t){return!!(this.autoFeedbackKeys.hasOwnProperty(t)&&100*Math.random()<Number(this.autoFeedbackKeys[t]))&&this._checkAble()}},{key:"feedback",value:function(t,e){this.initKeys&&0!=this.roomid?this._feedbackAble(t)&&this._feedback(t,e):this.waitMap.set(t,e)}},{key:"_feedback",value:function(t,e){(new u.default).feedBack(this.pid,e,t)}}]),t}();l.PLAY_VIDEO="playVideo",l.BLACK_SCREEN="blackScreen",l.BLACK_SCREEN_WAP="blackScreenWap",l.BAD_RESEND="badResend",l.RESEND="resend",l.BAD="bad",e.default=l},function(t,e,i){i(114),t.exports=i(204)},function(t,e,i){"use strict";var n=A(i(115)),r=A(i(132)),o=A(i(135)),a=A(i(139)),s=A(i(90)),u=A(i(70)),c=A(i(97)),l=A(i(153)),d=A(i(156)),f=A(i(98)),p=A(i(26)),m=A(i(71)),y=A(i(168)),v=A(i(171)),g=A(i(174)),_=A(i(177)),S=A(i(47)),w=A(i(16)),b=A(i(101)),I=A(i(102)),T=A(i(188)),P=A(i(48)),E=A(i(103)),k=A(i(49)),R=A(i(200)),C=A(i(104)),O=A(i(105));function A(t){return t&&t.__esModule?t:{default:t}}!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||(0,O.default)(t,e,{enumerable:!0,get:n})},i.r=function(t){void 0!==C.default&&R.default&&(0,O.default)(t,R.default,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":(0,k.default)(t))&&t&&t.__esModule)return t;var n=(0,E.default)(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=57)}([function(t,e,i){var n=i(4),r=i(3),o=99;function a(){return r.a.getDateTimeStr()+" "}var s=!1,u={_data:[],_length:0,debug:function(){var t=a(),e=Array.apply(null,arguments);e[0]=t+e[0],o<=-1&&console.log.apply(console,e)},log:function(t){var e=a(),i=Array.apply(null,arguments);i[0]=e+i[0],o<=0&&console.log.apply(console,i),u.record(i,"log")},info:function(t){var e=a(),i=Array.apply(null,arguments);i[0]=e+i[0],o<=1&&console.info.apply(console,i),u.record(i,"info")},warn:function(t){var e=a(),i=Array.apply(null,arguments);i[0]=e+i[0],o<=2&&console.warn.apply(console,i),u.record(i,"warn")},error:function(t){var e=a(),i=Array.apply(null,arguments);i[0]=e+i[0],o<=3&&console.error.apply(console,i),u.record(i,"error")},group:function(t){var e=a(),i=Array.apply(null,arguments);if(i[0]=e+i[0],o<=1){var n=console.groupCollapsed||console.group||console.log;n.apply(console,i)}u.record(i,"group")},groupEnd:function(){console.groupEnd&&console.groupEnd.apply(console)},setLevel:function(t){t!=o&&(console.log(a()+" set log level from "+o+" to "+t),o=t)},getLevel:function(){return o},record:function(t,e){1100===u._length&&(u._data.splice(0,100),u._length=1e3);var i=0,n=(t.shift()||"").toString();for(n=n.replace(/\%c/gi,(function(t,e){return i++,""}));i--&&t.length;)t.shift();for(var r=0,o=t.length;r<o;r++)"object"==(0,k.default)(t[r])&&(t[r]="");t.unshift(n);var a=t.join(" ");u._length++,u._data.push("[".concat(e,"]").concat(a))},getLog:function(){return s||(s=!0,u._data.unshift(n.a.platform+" "+n.a.name+" "+n.a.version.string)),u._data},logcss:function(t,e,i){var n="font-weight:900";return t&&(n+=";color:"+t),e&&(n+=";background:"+e),i&&(n+=";border:3px solid "+i),n},padNum:function(t,e){var i=t.toString().length,n=Math.max(0,e-i);return"0".repeat(n)+t}};e.a=u},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return n}))},function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,O.default)(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.d(e,"a",(function(){return r}))},function(t,e,i){function n(t,e){var i=t.toString().length,n=Math.max(0,e-i),r="";if(n>0)for(var o=0;o<n;o++)r+="0";return r+t}var r=0,o={now:function(){if(void 0!==window.performance){var t=window.performance;if(void 0!==t.now)return~~t.now();if(void 0!==t.webkitNow)return~~t.webkitNow();if(void 0!==t.mozNow)return~~t.mozNow();if(void 0!==t.msNow)return~~t.msNow()}0===r&&(r=Date.now()-1);var e=Date.now()-r;return e>4294967295?(r+=4294967295,e-4294967295):e},utc:function(){return Math.round(Date.now()/1e3)},getDateStr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=null,i=(e=t?new Date(t):new Date).getFullYear(),r=n(e.getMonth()+1,2),o=n(e.getDate(),2);return"".concat(i,"-").concat(r,"-").concat(o)},getTimeStr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=null,r=n((i=t?new Date(t):new Date).getHours(),2),o=n(i.getMinutes(),2),a=n(i.getSeconds(),2),s="".concat(r,":").concat(o,":").concat(a);if(e){var u=n(i.getMilliseconds(),3);s+="."+u}return s},getDateTimeStr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=null,r=(i=t?new Date(t):new Date).getFullYear(),o=n(i.getMonth()+1,2),a=n(i.getDate(),2),s=n(i.getHours(),2),u=n(i.getMinutes(),2),c=n(i.getSeconds(),2),l="".concat(r,"-").concat(o,"-").concat(a," ").concat(s,":").concat(u,":").concat(c);if(e){var h=n(i.getMilliseconds(),3);l+="."+h}return l}};e.a=o},function(t,e,i){var n={};self||(self=window),function(){var t=self.navigator.userAgent.toLowerCase(),e=/(edge)\/([\w.]+)/.exec(t)||/(edg)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(t)||[],i=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(android)/.exec(t)||/(windows)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[],r={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",majorVersion:e[4]||e[2]||"0",platform:i[0]||""},o={};if(r.browser){o[r.browser]=!0;var a=r.majorVersion.split(".");o.version={major:parseInt(r.majorVersion,10),string:r.version},a.length>1&&(o.version.minor=parseInt(a[1],10)),a.length>2&&(o.version.build=parseInt(a[2],10))}for(var s in r.platform&&(o[r.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,r.browser="msie",o.msie=!0),o.edge&&(delete o.edge,r.browser="msedge",o.chrome=!0),o.edg&&(delete o.edg,r.browser="msedge",o.chrome=!0),o.opr&&(r.browser="opera",o.opera=!0),o.safari&&o.android&&(r.browser="android",o.android=!0),o.name=r.browser,o.platform=r.platform,n)n.hasOwnProperty(s)&&delete n[s];(0,P.default)(n,o)}(),n.version||(n.version={major:0,minor:0,build:0,string:"0.0.0"}),e.a=n},function(t,e,i){i.d(e,"a",(function(){return u}));var n=i(8);function r(){if("undefined"==typeof Reflect||!T.default)return!1;if(T.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,T.default)(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t){return(o="function"==typeof C.default&&"symbol"==(0,k.default)(I.default)?function(t){return void 0===t?"undefined":(0,k.default)(t)}:function(t){return t&&"function"==typeof C.default&&t.constructor===C.default&&t!==C.default.prototype?"symbol":void 0===t?"undefined":(0,k.default)(t)})(t)}var a=i(9);function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?Object(a.a)(t):e}function u(t){return function(){var e,i=Object(n.a)(t);if(r()){var o=Object(n.a)(this).constructor;e=(0,T.default)(i,arguments,o)}else e=i.apply(this,arguments);return s(this,e)}}},function(t,e,i){function n(t,e){return(n=b.default||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=(0,E.default)(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}i.d(e,"a",(function(){return r}))},function(t,e,i){var n={PAudienceGetProxyListReq:530178,PAudienceGetProxyListRsp:530434,PNotifyStreamSwitch:268034,PLoginVideoProxyUniformly:5650690,PLoginVideoProxyUniformlyRes:5650434,PNotifyCurrentCdnStream:2739202,PNotifyCurrentStream4:2675714,PSubscribeStream3:2667266,PSubscribeStreamRes3:2667522,PStreamData3:2666754,PStopStream3:2666498,PStopStream:2560514,PPullStreamData:2694146,PResendStreamData4:2689026,PResendStreamDataFailAck:2694402,PVideoSyncSpeakerTime3:2674690,PForceConnectVideoProxy3:2685442,PVideoProxyPing3:2669570,PVideoProxyPingRes4:2683650,PNotifyMultiVideo:2746370,PLoginAndSubscribe:4097282,PLoginAndSubscribeRes:4097538,PNotifyUplinkRecvCount3:2672642,PVideoBroadcast4:2754050,PUpdateVideoConfig2:2569474,PVideoQualityStatistics:2591746,PP2pPing2:40706,PP2pPing3:41218,PP2pVideoPing3:2671874,VIDEOP2P_PFlashP2PKeepAlive:3072514,VIDEOP2P_PFlashP2PKeepAliveRes:3072770,P2PGetNodesProxy3:2673410,P2PGetNodesProxyRes3:2673666,P2PSubscribeStream3:2673922,P2PRemoveSubscribe3:2674178,P2PKeepAlive:3074562,P2PKeepAliveRes:3074818,P2PNotifyNodeLeave:3075074,P2PSyncDepth:3075330,P2PKeepAliveWebrtc:3075842,P2PKeepAliveWebrtcRes:3076098,PP2PWSForward:2757378,PP2PWSForwardReject:5653506,P2PSubStream:3073026,P2PSubStreamRes:3073282,P2PSyncSubTree:3073538,P2PTest:3073794,P2PRemoveSub:3074306,P2PRemoveSubRes:3075586,P2PStreamAlive:3076354,P2POffer:12316162,P2PAnswer:12316418,P2PCandidate:12316674,P2POfferReject:12316930,P2PRequestOffer:12317186,P2PVersionFailed:12317442,P2PPingOverProxy:12317698,P2PPunchBackReq:12317954,P2PPunchBackRsp:12318210,PCDNNotifyUrl:20740866,PCDNStatusReport:20741122,PCDNGetUrl:20741378,PCDNSwitchUrl:20741634,PCdnP2PWSForward:53283,PCdnP2PWSForwardReject:53539,PCdnProxyPing:26147,PCdnProxyPingRes:26403,PCdnP2PStatics:26659,PCdnP2PErrStatics:26915,PCdnP2pGetNode:51235,PCdnP2pGetNodeRes:51491,PCdnP2PNodePingThroughProxy:52259,PCdnP2PNodePunchThroughProxy:52515,PCdnP2PUserRegister:52771,PCdnP2PUserRegisterRes:53027,PCdnP2pReportLog:54051,PCdnForceConnectVideoProxy:54563,PCDNGetProxyListReq:153635,PCDNGetProxyListRsp:153891,PCDNGetSliceStreamInfoReq:154147,PCDNGetSliceStreamInfoRsp:154403,PCDNSubscribeReq:768547,PCDNSubscribeRes:768803,PCDNCompeteSubscribeReq:769059,PCDNCompeteSubscribeRes:769315,PCDNForceSubscribeNotify:769571,PCdnP2pUserUnRegister:770083,PP2pSliceData:511779,PP2pSliceAudioData:512035,PP2pSliceVideoData:512291,PP2pSliceCommonData:514083,PP2pSliceSignalData:514595,PP2pSliceAudioDataV2:517411,PP2pSliceControlData:1024547,PForceConnectCdnVideoProxy3:2711042,HuyaDelaySeiData:17920770};!function t(){if(!t.done){t.done=!0;var e=[];for(var i in n){var r=n[i];e.push({uri:r,name:i})}e.forEach((function(t){n[t.uri]=t.name}))}}(),e.a=n},function(t,e,i){function n(t){return(n=b.default?w.default:function(t){return t.__proto__||(0,w.default)(t)})(t)}i.d(e,"a",(function(){return n}))},function(t,e,i){function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,"a",(function(){return n}))},function(t,e,i){var n=i(1),r=i(2),o=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(n.a)(this,t),this.hasHeader=e,this.segments=[],this.data=null,this.totalLen=0,this.uri=0,this.hasHeader&&(this.pushUInt32(10),this.pushUInt32(this.uri),this.pushUInt16(200))}return Object(r.a)(t,[{key:"marshall",value:function(){if(0===this.segments.length)return null;this.data=new Uint8Array(this.totalLen);for(var t=0,e=0;e<this.segments.length;++e){var i=this.segments[e];this.data.set(i,t),t+=i.length}return this.hasHeader&&(this.replaceUInt32(0,this.totalLen),this.replaceUInt32(4,this.uri)),this.data}},{key:"setUri",value:function(t){this.uri=t}},{key:"replaceUInt32",value:function(t,e){new DataView(this.data.buffer).setUint32(t,e,!0)}},{key:"pushBool",value:function(t){this.pushUInt8(t?1:0)}},{key:"pushUInt8",value:function(t){var e=new Uint8Array(1);new DataView(e.buffer).setUint8(0,t),this.segments.push(e),this.totalLen++}},{key:"pushUInt16",value:function(t){var e=new Uint8Array(2);new DataView(e.buffer).setUint16(0,t,!0),this.segments.push(e),this.totalLen+=2}},{key:"pushUInt32",value:function(t){var e=new Uint8Array(4);new DataView(e.buffer).setUint32(0,t,!0),this.segments.push(e),this.totalLen+=4}},{key:"pushUInt64",value:function(t){var e=new Uint8Array(8),i=new DataView(e.buffer),n=t%4294967296,r=t/4294967296>>0;i.setUint32(0,n,!0),i.setUint32(4,r,!0),this.segments.push(e),this.totalLen+=8}},{key:"pushUint8Array",value:function(t){this.pushUInt16(t.length),this.segments.push(t),this.totalLen+=t.length}},{key:"pushUint8ArrayWithoutLen",value:function(t){this.segments.push(t),this.totalLen+=t.length}},{key:"pushUint8Array32",value:function(t){this.pushUInt32(t.length),this.segments.push(t),this.totalLen+=t.length}},{key:"pushUInt32Vector",value:function(t){this.pushUInt32(t.length);for(var e=0;e<t.length;e++)this.pushUInt32(t[e])}},{key:"pushUInt64Vector",value:function(t){this.pushUInt32(t.length);for(var e=0;e<t.length;e++)this.pushUInt64(t[e])}},{key:"pushUInt16Vector",value:function(t){this.pushUInt32(t.length);for(var e=0;e<t.length;e++)this.pushUInt16(t[e])}},{key:"popObjVector",value:function(t){for(var e=this.popUInt32(),i=[],n=0;n<e;n++){var r=new t;i.push(r.unmarshall(this))}return i}},{key:"pushString",value:function(t){this.pushUInt16(t.length);for(var e=new Uint8Array(t.length),i=new DataView(e.buffer),n=0;n<t.length;++n)i.setUint8(n,t.charCodeAt(n));this.segments.push(e),this.totalLen+=t.length}},{key:"pushString32",value:function(t){this.pushUInt32(t.length);for(var e=new Uint8Array(t.length),i=new DataView(e.buffer),n=0;n<t.length;++n)i.setUint8(n,t.charCodeAt(n));this.segments.push(e),this.totalLen+=t.length}}]),t}();e.a=o},function(t,e,i){i.d(e,"a",(function(){return r}));var n=i(32);function r(t){if(void 0===C.default||null==t[I.default]){if(Array.isArray(t)||(t=Object(n.a)(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,s=!1;return{s:function(){r=(0,S.default)(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}},function(t,e,i){i.r(e),e.default={STREAM_UNKNOWN:0,AUDIO_SPEEX:0,AUDIO_AACPLUS:1,AUDIO_SILK:2,AUDIO_AAC_44100HZ_STEREO_128KBPS:35,AUDIO_AAC_44100HZ_STEREO_160KBPS:36,AUDIO_AAC_44100HZ_STEREO_192KBPS:37,AUDIO_ELD_AAC_44100HZ_STEREO:38,AUDIO_ELD_AAC_SBR_44100HZ_STEREO:39,SIGNAL_STREAM_DATA:47,SIGNAL_STREAM_COMPRESS_DATA:48,AUDIO_MP3:50,AUDIO_NELLYMOSER:54,VIDEO_264_START:401,VIDEO_H264_100K:401,VIDEO_H264_500K:405,VIDEO_H264_800K:408,VIDEO_H264_1200K:412,VIDEO_H264_1500K:415,VIDEO_H264_2000K:420,VIDEO_H264_3000K:430,VIDEO_H264_4000K:440,VIDEO_H264_6000K:460,VIDEO_H264_8000K:480,VIDEO_H264_END:480,VIDEO_265_START:503,VIDEO_H265_300K:503,VIDEO_H265_500K:505,VIDEO_H265_800K:508,VIDEO_H265_1200K:512,VIDEO_H265_1500K:515,VIDEO_H265_2000K:520,VIDEO_H265_3000K:530,VIDEO_H265_4000K:540,VIDEO_H265_6000K:560,VIDEO_H265_8000K:580,VIDEO_H265_END:580,VIDEO_H264_EX_BASE:1e3,VIDEO_H264_EX_START:1005,VIDEO_H264_EX_500K:1005,VIDEO_H264_EX_1M:1010,VIDEO_H264_EX_5M:1050,VIDEO_H264_EX_8M:1080,VIDEO_H264_EX_10M:1100,VIDEO_H264_EX_12M:1120,VIDEO_H264_EX_15M:1150,VIDEO_H264_EX_20M:1200,VIDEO_H264_EX_END:1200,VIDEO_H265_EX_BASE:4e3,VIDEO_H265_EX_START:4005,VIDEO_H265_EX_500K:4005,VIDEO_H265_EX_1M:4010,VIDEO_H265_EX_5M:4050,VIDEO_H265_EX_8M:4080,VIDEO_H265_EX_10M:4100,VIDEO_H265_EX_12M:4120,VIDEO_H265_EX_15M:4150,VIDEO_H265_EX_20M:4200,VIDEO_H265_EX_END:4200}},function(t,e,i){i.r(e);var n={},r={setTaf:function(t){return n=t}};e.default=r,r.UserId=function(){this.lUid=0,this.sGuid="",this.sToken="",this.sHuYaUA="",this.sCookie="",this.iTokenType=0,this.sDeviceInfo=""},r.UserId.prototype._clone=function(){return new r.UserId},r.UserId.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.UserId.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.UserId.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sToken),t.writeString(3,this.sHuYaUA),t.writeString(4,this.sCookie),t.writeInt32(5,this.iTokenType),t.writeString(6,this.sDeviceInfo)},r.UserId.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sToken=t.readString(2,!1,this.sToken),this.sHuYaUA=t.readString(3,!1,this.sHuYaUA),this.sCookie=t.readString(4,!1,this.sCookie),this.iTokenType=t.readInt32(5,!1,this.iTokenType),this.sDeviceInfo=t.readString(6,!1,this.sDeviceInfo)},r.GetInfoFromVGReq=function(){this.lUid=0,this.iServiceType=0,this.iClientType=0,this.iClientIp=0,this.iTerminalType=0,this.iRequestVPType=0,this.sMsg=new n.BinBuffer,this.iUri=0,this.sProtoName="",this.lSid=0,this.vStreamName=new n.Vector(new n.STRING),this.tId=new r.UserId},r.GetInfoFromVGReq.prototype._clone=function(){return new r.GetInfoFromVGReq},r.GetInfoFromVGReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetInfoFromVGReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetInfoFromVGReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt32(1,this.iServiceType),t.writeInt32(2,this.iClientType),t.writeInt64(3,this.iClientIp),t.writeInt32(4,this.iTerminalType),t.writeInt32(5,this.iRequestVPType),t.writeBytes(6,this.sMsg),t.writeInt64(7,this.iUri),t.writeString(8,this.sProtoName),t.writeInt64(9,this.lSid),t.writeVector(10,this.vStreamName),t.writeStruct(11,this.tId)},r.GetInfoFromVGReq.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.iServiceType=t.readInt32(1,!1,this.iServiceType),this.iClientType=t.readInt32(2,!1,this.iClientType),this.iClientIp=t.readInt64(3,!1,this.iClientIp),this.iTerminalType=t.readInt32(4,!1,this.iTerminalType),this.iRequestVPType=t.readInt32(5,!1,this.iRequestVPType),this.sMsg=t.readBytes(6,!1,this.sMsg),this.iUri=t.readInt64(7,!1,this.iUri),this.sProtoName=t.readString(8,!1,this.sProtoName),this.lSid=t.readInt64(9,!1,this.lSid),this.vStreamName=t.readVector(10,!1,this.vStreamName),this.tId=t.readStruct(11,!1,this.tId)},r.GetInfoFromVGRsp=function(){this.lUid=0,this.ServerId=0,this.sMsg=new n.BinBuffer,this.iUri=0,this.sProtoName=""},r.GetInfoFromVGRsp.prototype._clone=function(){return new r.GetInfoFromVGRsp},r.GetInfoFromVGRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetInfoFromVGRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetInfoFromVGRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt64(1,this.ServerId),t.writeBytes(2,this.sMsg),t.writeInt64(3,this.iUri),t.writeString(4,this.sProtoName)},r.GetInfoFromVGRsp.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.ServerId=t.readInt64(1,!1,this.ServerId),this.sMsg=t.readBytes(2,!1,this.sMsg),this.iUri=t.readInt64(3,!1,this.iUri),this.sProtoName=t.readString(4,!1,this.sProtoName)},r.GetCdnTokenExReq=function(){this.sFlvUrl="",this.sStreamName="",this.iLoopTime=0,this.tId=new r.UserId,this.iAppId=66},r.GetCdnTokenExReq.prototype._clone=function(){return new r.GetCdnTokenExReq},r.GetCdnTokenExReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetCdnTokenExReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetCdnTokenExReq.prototype.writeTo=function(t){t.writeString(0,this.sFlvUrl),t.writeString(1,this.sStreamName),t.writeInt32(2,this.iLoopTime),t.writeStruct(3,this.tId),t.writeInt32(4,this.iAppId)},r.GetCdnTokenExReq.prototype.readFrom=function(t){this.sFlvUrl=t.readString(0,!1,this.sFlvUrl),this.sStreamName=t.readString(1,!1,this.sStreamName),this.iLoopTime=t.readInt32(2,!1,this.iLoopTime),this.tId=t.readStruct(3,!1,this.tId),this.iAppId=t.readInt32(4,!1,this.iAppId)},r.GetCdnTokenExRsp=function(){this.sFlvToken="",this.iExpireTime=0},r.GetCdnTokenExRsp.prototype._clone=function(){return new r.GetCdnTokenExRsp},r.GetCdnTokenExRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetCdnTokenExRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetCdnTokenExRsp.prototype.writeTo=function(t){t.writeString(0,this.sFlvToken),t.writeInt32(1,this.iExpireTime)},r.GetCdnTokenExRsp.prototype.readFrom=function(t){this.sFlvToken=t.readString(0,!1,this.sFlvToken),this.iExpireTime=t.readInt32(1,!1,this.iExpireTime)},r.WSTimeSyncReq=function(){this.sGuid="",this.lClientTime=0},r.WSTimeSyncReq.prototype._clone=function(){return new r.WSTimeSyncReq},r.WSTimeSyncReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.WSTimeSyncReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.WSTimeSyncReq.prototype.writeTo=function(t){t.writeString(0,this.sGuid),t.writeInt64(1,this.lClientTime)},r.WSTimeSyncReq.prototype.readFrom=function(t){this.sGuid=t.readString(0,!1,this.sGuid),this.lClientTime=t.readInt64(1,!1,this.lClientTime)},r.WSTimeSyncRsp=function(){this.lServerTime=0},r.WSTimeSyncRsp.prototype._clone=function(){return new r.WSTimeSyncRsp},r.WSTimeSyncRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.WSTimeSyncRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.WSTimeSyncRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lServerTime)},r.WSTimeSyncRsp.prototype.readFrom=function(t){this.lServerTime=t.readInt64(0,!1,this.lServerTime)},r.MediaUserId=function(){this.lUid=0,this.sGuid="",this.sToken="",this.sUA="",this.sCookie="",this.iTokenType=0,this.iAppid=0,this.bAnonymous=0,this.sStrUid=""},r.MediaUserId.prototype._clone=function(){return new r.MediaUserId},r.MediaUserId.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.MediaUserId.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.MediaUserId.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sToken),t.writeString(3,this.sUA),t.writeString(4,this.sCookie),t.writeInt32(5,this.iTokenType),t.writeInt32(6,this.iAppid),t.writeInt32(7,this.bAnonymous),t.writeString(8,this.sStrUid)},r.MediaUserId.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sToken=t.readString(2,!1,this.sToken),this.sUA=t.readString(3,!1,this.sUA),this.sCookie=t.readString(4,!1,this.sCookie),this.iTokenType=t.readInt32(5,!1,this.iTokenType),this.iAppid=t.readInt32(6,!1,this.iAppid),this.bAnonymous=t.readInt32(7,!1,this.bAnonymous),this.sStrUid=t.readString(8,!1,this.sStrUid)},r.RecSysInfo=function(){this.sAnchorUid="",this.sRoomId="",this.sDispatchId="",this.iScene=0,this.sStrategy="",this.lServerTs=0,this.lAction=0,this.sActionReason="",this.sActValue=""},r.RecSysInfo.prototype._clone=function(){return new r.RecSysInfo},r.RecSysInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RecSysInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RecSysInfo.prototype.writeTo=function(t){t.writeString(0,this.sAnchorUid),t.writeString(1,this.sRoomId),t.writeString(2,this.sDispatchId),t.writeInt32(3,this.iScene),t.writeString(4,this.sStrategy),t.writeInt64(5,this.lServerTs),t.writeInt64(6,this.lAction),t.writeString(7,this.sActionReason),t.writeString(8,this.sActValue)},r.RecSysInfo.prototype.readFrom=function(t){this.sAnchorUid=t.readString(0,!1,this.sAnchorUid),this.sRoomId=t.readString(1,!1,this.sRoomId),this.sDispatchId=t.readString(2,!1,this.sDispatchId),this.iScene=t.readInt32(3,!1,this.iScene),this.sStrategy=t.readString(4,!1,this.sStrategy),this.lServerTs=t.readInt64(5,!1,this.lServerTs),this.lAction=t.readInt64(6,!1,this.lAction),this.sActionReason=t.readString(7,!1,this.sActionReason),this.sActValue=t.readString(8,!1,this.sActValue)},r.RecSysReq=function(){this.tId=new r.MediaUserId,this.sAnchorUid="",this.sRoomId="",this.sDispatchId="",this.iScene=0,this.bDebug=0,this.sNet="",this.sSdkVer="",this.mAppendInfo=new n.Map(new n.STRING,new n.STRING)},r.RecSysReq.prototype._clone=function(){return new r.RecSysReq},r.RecSysReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RecSysReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RecSysReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeString(1,this.sAnchorUid),t.writeString(2,this.sRoomId),t.writeString(3,this.sDispatchId),t.writeInt32(4,this.iScene),t.writeInt32(5,this.bDebug),t.writeString(6,this.sNet),t.writeString(7,this.sSdkVer),t.writeMap(8,this.mAppendInfo)},r.RecSysReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.sAnchorUid=t.readString(1,!1,this.sAnchorUid),this.sRoomId=t.readString(2,!1,this.sRoomId),this.sDispatchId=t.readString(3,!1,this.sDispatchId),this.iScene=t.readInt32(4,!1,this.iScene),this.bDebug=t.readInt32(5,!1,this.bDebug),this.sNet=t.readString(6,!1,this.sNet),this.sSdkVer=t.readString(7,!1,this.sSdkVer),this.mAppendInfo=t.readMap(8,!1,this.mAppendInfo)},r.RecSysRsp=function(){this.iStatus=0,this.sError="",this.tRecSysInfo=new r.RecSysInfo},r.RecSysRsp.prototype._clone=function(){return new r.RecSysRsp},r.RecSysRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RecSysRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RecSysRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iStatus),t.writeString(1,this.sError),t.writeStruct(2,this.tRecSysInfo)},r.RecSysRsp.prototype.readFrom=function(t){this.iStatus=t.readInt32(0,!1,this.iStatus),this.sError=t.readString(1,!1,this.sError),this.tRecSysInfo=t.readStruct(2,!1,this.tRecSysInfo)},r.RecSysNotice=function(){this.tRecSysInfo=new r.RecSysInfo},r.RecSysNotice.prototype._clone=function(){return new r.RecSysNotice},r.RecSysNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.RecSysNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.RecSysNotice.prototype.writeTo=function(t){t.writeStruct(0,this.tRecSysInfo)},r.RecSysNotice.prototype.readFrom=function(t){this.tRecSysInfo=t.readStruct(0,!1,this.tRecSysInfo)},r.GetAntiCodeForStreamReq=function(){this.tId=new r.MediaUserId,this.sStreamName=""},r.GetAntiCodeForStreamReq.prototype._clone=function(){return new r.GetAntiCodeForStreamReq},r.GetAntiCodeForStreamReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetAntiCodeForStreamReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetAntiCodeForStreamReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeString(1,this.sStreamName)},r.GetAntiCodeForStreamReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.sStreamName=t.readString(1,!1,this.sStreamName)},r.GetAntiCodeForStreamRsp=function(){this.sAntiCode="",this.sStreamName=""},r.GetAntiCodeForStreamRsp.prototype._clone=function(){return new r.GetAntiCodeForStreamRsp},r.GetAntiCodeForStreamRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.GetAntiCodeForStreamRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.GetAntiCodeForStreamRsp.prototype.writeTo=function(t){t.writeString(0,this.sAntiCode),t.writeString(1,this.sStreamName)},r.GetAntiCodeForStreamRsp.prototype.readFrom=function(t){this.sAntiCode=t.readString(0,!1,this.sAntiCode),this.sStreamName=t.readString(1,!1,this.sStreamName)}},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(12),a=i(10),s=function(){function t(){Object(n.a)(this,t),this.streamName="",this.codecType=0,this.cdnBrand=0}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new a.a(!1);return t.pushString(this.streamName),t.pushUInt16(this.codecType),t.pushUInt16(this.cdnBrand),t.marshall()}},{key:"unmarshall",value:function(t){return this.streamName=t.popString(),this.codecType=t.popUInt16(),this.cdnBrand=t.popUInt16(),this}},{key:"getDefCodecRate",value:function(){return this.codecType>=o.default.VIDEO_264_START&&this.codecType<=o.default.VIDEO_H264_END?100*(this.codecType-o.default.VIDEO_264_START):this.codecType>=o.default.VIDEO_265_START&&this.codecType<=o.default.VIDEO_H265_END?100*(this.codecType-o.default.VIDEO_265_START):128}},{key:"text",value:function(){return this.streamName+"_"+this.codecType+"_"+this.cdnBrand}},{key:"equal",value:function(t){return!!t&&this.streamName==t.streamName&&this.codecType==t.codecType&&this.cdnBrand==t.cdnBrand}},{key:"isValidID",get:function(){return this.codecType>0}},{key:"isH264",get:function(){return this.codecType>=o.default.VIDEO_264_START&&this.codecType<=o.default.VIDEO_H264_END}},{key:"isH265",get:function(){return this.codecType>=o.default.VIDEO_265_START&&this.codecType<=o.default.VIDEO_H265_END}}]),t}();e.default=s},function(t,e,i){var n,r="object"==("undefined"==typeof Reflect?"undefined":(0,k.default)(Reflect))?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:_.default?function(t){return(0,g.default)(t).concat((0,_.default)(t))}:function(t){return(0,g.default)(t)};var a=v.default||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===t?"undefined":(0,k.default)(t)))}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,i,n){var r,o,a,s;if(c(i),void 0===(o=t._events)?(o=t._events=(0,E.default)(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),a=o[e]),void 0===a)a=o[e]=i,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=l(t))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function p(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):S(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function S(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==(0,w.default)(this)._events||(this._events=(0,E.default)(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=r[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=S(u,c);for(i=0;i<c;++i)o(l[i],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,n,r,o,a;if(c(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=(0,E.default)(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=(0,E.default)(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=(0,E.default)(null):delete i[t]),this;if(0===arguments.length){var r,o=(0,y.default)(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=(0,E.default)(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){i.r(e),e.default={STREAM_UNKNOWN:0,AUDIO_SPEEX:0,AUDIO_AACPLUS:1,AUDIO_SILK:2,AUDIO_AAC_44100HZ_STEREO_128KBPS:35,AUDIO_AAC_44100HZ_STEREO_160KBPS:36,AUDIO_AAC_44100HZ_STEREO_192KBPS:37,AUDIO_ELD_AAC_44100HZ_STEREO:38,AUDIO_ELD_AAC_SBR_44100HZ_STEREO:39,AUDIO_MP3:50,AUDIO_NELLYMOSER:54,VIDEO_264_START:401,VIDEO_H264_100K:401,VIDEO_H264_500K:405,VIDEO_H264_800K:408,VIDEO_H264_1200K:412,VIDEO_H264_1500K:415,VIDEO_H264_2000K:420,VIDEO_H264_3000K:430,VIDEO_H264_4000K:440,VIDEO_H264_6000K:460,VIDEO_H264_8000K:480,VIDEO_H264_END:480,VIDEO_265_START:503,VIDEO_H265_300K:503,VIDEO_H265_500K:505,VIDEO_H265_800K:508,VIDEO_H265_1200K:512,VIDEO_H265_1500K:515,VIDEO_H265_2000K:520,VIDEO_H265_3000K:530,VIDEO_H265_4000K:540,VIDEO_H265_6000K:560,VIDEO_H265_8000K:580,VIDEO_H265_END:580}},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=function(){function t(){Object(n.a)(this,t),this.ip=0,this.tcpPorts=[],this.udpPorts=[],this.videoProxyInfo=new m.default}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return"number"==typeof this.ip?t.pushUInt32(this.ip):t.pushUInt32(this.ip2uint(this.ip)),t.pushUInt16Vector(this.tcpPorts),t.pushUInt16Vector(this.udpPorts),t.pushUInt32(this.videoProxyInfo.size),this.videoProxyInfo.forEach((function(e,i){t.pushUInt8(i),t.pushUInt32(e)})),t.marshall()}},{key:"unmarshall",value:function(t){this.ip=this.uint2ip(t.popUInt32()),this.tcpPorts=t.popUInt16Vector(),this.udpPorts=t.popUInt16Vector(),this.videoProxyInfo.clear();for(var e=t.popUInt32(),i=0;i<e;i++){var n=t.popUInt8(),r=t.popUInt32();this.videoProxyInfo.set(n,r)}return this}},{key:"ip2uint",value:function(t){for(var e=0,i=t.split("."),n=0;n<i.length;n++)e|=Number(i[n])<<8*n;return e<0&&(e+=4294967296),e}},{key:"uint2ip",value:function(t){return(255&t)+"."+(t>>8&255)+"."+(t>>16&255)+"."+(t>>24&255)}}]),t}();e.default=a},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(22),a=i(16),s=i(10),u=function(){function t(){Object(n.a)(this,t),this.appid=0,this.streamType=0,this.codecType=0,this.sid=0,this.startTs=0,this.serverGenSeq=0}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new s.a(!1);return t.pushUInt8(this.appid),t.pushUInt8(this.streamType),t.pushUInt16(this.codecType),t.pushUInt64(this.sid),t.pushUInt32(this.startTs),t.pushUInt16(this.serverGenSeq),t.marshall()}},{key:"unmarshall",value:function(t){return this.appid=t.popUInt8(),this.streamType=t.popUInt8(),this.codecType=t.popUInt16(),this.sid=t.popUInt64(),this.startTs=t.popUInt32(),this.serverGenSeq=t.popUInt16(),this}},{key:"text",value:function(){return this.appid+"-"+this.streamType+"-"+this.codecType+"-"+this.sid+"-"+this.startTs+"-"+this.serverGenSeq}},{key:"equal",value:function(t){return null!==t&&this.appid===t.appid&&this.streamType===t.streamType&&this.codecType===t.codecType&&this.sid===t.sid&&this.startTs===t.startTs&&this.serverGenSeq===t.serverGenSeq}},{key:"isValidID",get:function(){return this.appid>0}},{key:"isTransStream",get:function(){return 1==(1&this.streamType)}},{key:"isAudioStream",get:function(){return this.streamType>=o.default.STRAEM_TYPE_AUDIO_START}},{key:"isVideoStream",get:function(){return this.streamType<o.default.STRAEM_TYPE_AUDIO_START}},{key:"isH264VideoStream",get:function(){return this.isVideoStream&&this.codecType>=a.default.VIDEO_264_START&&this.codecType<=a.default.VIDEO_H264_END}},{key:"isH265VideoStream",get:function(){return this.isVideoStream&&this.codecType>=a.default.VIDEO_265_START&&this.codecType<=a.default.VIDEO_H265_END}},{key:"videoTypeId",get:function(){return this.appid<<24|this.streamType<<16|this.codecType}},{key:"hashKey",get:function(){return 4294967296*this.sid+(this.codecType<<16|this.appid<<8|this.streamType)}},{key:"streamId",get:function(){return 281474976710656*this.streamType+4294967296*this.codecType+this.startTs}}]),t}();e.default=u},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=function(){function t(){Object(n.a)(this,t),this.ip=0,this.tcpPorts=[],this.udpPorts=[],this.videoProxyInfo=new m.default}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return"number"==typeof this.ip?t.pushUInt32(this.ip):t.pushUInt32(this.ip2uint(this.ip)),t.pushUInt16Vector(this.tcpPorts),t.pushUInt16Vector(this.udpPorts),t.pushUInt32(this.videoProxyInfo.size),this.videoProxyInfo.forEach((function(e,i){t.pushUInt8(i),t.pushUInt32(e)})),t.marshall()}},{key:"unmarshall",value:function(t){this.ip=this.uint2ip(t.popUInt32()),this.tcpPorts=t.popUInt16Vector(),this.udpPorts=t.popUInt16Vector(),this.videoProxyInfo.clear();for(var e=t.popUInt32(),i=0;i<e;i++){var n=t.popUInt8(),r=t.popUInt32();this.videoProxyInfo.set(n,r)}return this}},{key:"ip2uint",value:function(t){for(var e=0,i=t.split("."),n=0;n<i.length;n++)e|=Number(i[n])<<8*n;return e<0&&(e+=4294967296),e}},{key:"uint2ip",value:function(t){return(255&t)+"."+(t>>8&255)+"."+(t>>16&255)+"."+(t>>24&255)}}]),t}();e.default=a},function(t,e,i){var n=i(1),r=i(2),o=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(n.a)(this,t),this.view=e,this.pos=0,this.len=0,this.uri=0,this.resCode=0,!0===i&&(this.len=this.popUInt32(),this.uri=this.popUInt32(),this.resCode=this.popUInt16())}return Object(r.a)(t,[{key:"bytesAvailable",value:function(){return this.view.byteLength-this.pos}},{key:"popBool",value:function(){return 1==this.popUInt8()}},{key:"popUInt8",value:function(){if(this.pos+1>this.view.byteLength)return 0;var t=this.view.getUint8(this.pos);return this.pos++,t}},{key:"popUInt16",value:function(){if(this.pos+2>this.view.byteLength)return 0;var t=this.view.getUint16(this.pos,!0);return this.pos+=2,t}},{key:"popUInt32",value:function(){if(this.pos+4>this.view.byteLength)return 0;var t=this.view.getUint32(this.pos,!0);return this.pos+=4,t}},{key:"popUInt64",value:function(){if(this.pos+8>this.view.byteLength)return 0;var t=this.view.getUint32(this.pos,!0);this.pos+=4;var e=this.view.getUint32(this.pos,!0);return this.pos+=4,4294967296*e+t}},{key:"popInt64",value:function(){for(var t=0,e=(128&this.view.getUint8(this.pos+7))>0,i=!0,n=0;n<8;n++){var r=this.view.getUint8(this.pos+n);e&&(i?0!=r&&(r=255&~(r-1),i=!1):r=255&~r),t+=r*Math.pow(2,8*n)}return e&&(t=-t),this.pos+=8,t}},{key:"popUint8Array",value:function(){var t=this.popUInt16();if(this.pos+t>this.view.byteLength)return null;var e=new Uint8Array(this.view.buffer,this.pos,t);return this.pos+=t,e.slice()}},{key:"popUint8Array32",value:function(){var t=this.popUInt32();if(this.pos+t>this.view.byteLength)return null;var e=new Uint8Array(this.view.buffer,this.pos,t);return this.pos+=t,e.slice()}},{key:"popUInt64Vector",value:function(){var t=this.popUInt32();if(this.pos+8*t>this.view.byteLength)return null;for(var e=[],i=0;i<t;i++)e.push(this.popUInt64());return e}},{key:"popUInt32Vector",value:function(){var t=this.popUInt32();if(this.pos+4*t>this.view.byteLength)return null;for(var e=[],i=0;i<t;i++)e.push(this.popUInt32());return e}},{key:"popUInt16Vector",value:function(){var t=this.popUInt32();if(this.pos+2*t>this.view.byteLength)return null;for(var e=[],i=0;i<t;i++)e.push(this.popUInt16());return e}},{key:"popString",value:function(){var t=this.popUInt16();if(this.pos+t>this.view.byteLength)return null;for(var e=[],i=0;i<t;++i)e[i]=String.fromCharCode(this.popUInt8());return e.join("")}},{key:"popMapKey8Val32",value:function(){for(var t=this.popUInt32(),e=new m.default,i=0;i<t;i++){var n=this.popUInt8(),r=this.popUInt32();e.set(n,r)}return e}},{key:"popMapKey64Val64",value:function(){for(var t=this.popUInt32(),e=new m.default,i=0;i<t;i++){var n=this.popUInt64(),r=this.popUInt64();e.set(n,r)}return e}}]),t}();e.a=o},function(t,e,i){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||(0,O.default)(t,e,{enumerable:!0,get:n})},i.r=function(t){void 0!==C.default&&R.default&&(0,O.default)(t,R.default,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":(0,k.default)(t))&&t&&t.__esModule)return t;var n=(0,E.default)(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,O.default)(t,n.key,n)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){var i=t.toString().length,n=Math.max(0,e-i),r="";if(n>0)for(var o=0;o<n;o++)r+="0";return r+t}function u(){var t=new Date,e=t.getFullYear(),i=s(t.getMonth()+1,2),n=s(t.getDate(),2),r=s(t.getHours(),2),o=s(t.getMinutes(),2),a=s(t.getSeconds(),2);return"["+"".concat(e,"-").concat(i,"-").concat(n," ").concat(r,":").concat(o,":").concat(a)+"."+s(t.getMilliseconds(),3)+"][w265]"}i.r(e);var c=[];function l(){for(var t,e=u(),i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];n[0]=e+n[0],self.logCallback?(t=self.logCallback).call.apply(t,[null].concat(n)):c.push(n)}var h=function(){function t(e,i){n(this,t),this.width=e,this.height=i,this.stridey=this.width,this.strideu=this.stridey/2,this.stridev=this.stridey/2}return o(t,[{key:"calc",value:function(t){for(var e=new Uint8Array(this.stridey*this.height).fill(128,0,this.stridey*this.height),i=new Uint8Array(this.strideu*this.height).fill(128,0,this.strideu*this.height),n=new Uint8Array(this.stridev*this.height).fill(128,0,this.stridev*this.height),r=new Uint8Array(this.width*this.height*4),o=1e3*window.performance.now(),a=0;a<t;a++)this.convertYUV420(e,i,n,this.width,this.height,this.stridey,this.strideu,this.stridev,r);return 1e3*window.performance.now()-o}},{key:"convertYUV420",value:function(t,e,i,n,r,o,a,s,u){for(var c,l,h,d,f,p=0,m=0,y=n>>1,v=y*r,g=0,_=0,S=0,w=0;w<v;w++)f=w<<1,c=1.164*(t[g+(d=p<<1)]-16),l=e[_+p]-128,h=i[S+p]-128,u[0+(f<<2)]=c+1.596*h,u[1+(f<<2)]=c-.813*h-.391*l,u[2+(f<<2)]=c+2.018*l,u[3+(f<<2)]=255,c=1.164*(t[g+d+1]-16),u[0+(f+1<<2)]=c+1.596*h,u[1+(f+1<<2)]=c-.813*h-.391*l,u[2+(f+1<<2)]=c+2.018*l,u[3+(f+1<<2)]=255,++p===y&&(p=0,g+=o,_=(++m>>1)*a,S=(m>>1)*s)}}]),t}(),m=function(){function t(){n(this,t)}return o(t,null,[{key:"isSupportWasm",value:function(){return"object"==("undefined"==typeof WebAssembly?"undefined":(0,k.default)(WebAssembly))}},{key:"isSupportWasmThread",value:function(){if("undefined"==typeof SharedArrayBuffer||"undefined"==typeof Atomics)return l("hevcd","SharedArrayBuffer undefined or Atomics undefined"),!1;var t=new WebAssembly.Memory({initial:1,maximum:1,shared:!0}).buffer instanceof SharedArrayBuffer;return self.SharedArrayBuffer&&self.Atomics&&t}}]),t}(),y=function(){function t(){n(this,t),this.cla="hevcd",this.configs=null,this.costUs=0,this.reason=0,this.cores=navigator.hardwareConcurrency,this.is64bit=this.is64bitSoftware(),this.enableCost=!0}return o(t,[{key:"parseConfigs",value:function(t){this.configs=t,l(this.cla,"parse",(0,p.default)(t),"cfg",this.configs.enableWebH265)}},{key:"isSupportH265",value:function(t,e){if(null==this.configs)return l(this.cla,"isSupportH265 configs==null"),!1;this.reason=0;var i=this.isConfigEnable()&&this.isCPUCoresSatisfy(e)&&this.isWasm()&&this.isBitrateInRange(e)&&this.isCostInRange(e);return l(this.cla,"isSupportH265",i,"kbps=",e,"costUs",this.costUs.toFixed(0),"cores",this.cores,"64b",this.is64bit,"reason",this.reason,"version",t,"cfg",(0,p.default)(this.configs)),l("ua:",navigator.userAgent),{isSupport:i,costUs:this.costUs.toFixed(0),reason:this.reason}}},{key:"isWasm",value:function(){return!!m.isSupportWasm()||(this.reason=7,!1)}},{key:"isConfigEnable",value:function(){return!(!this.hasOwnProperty("enableWebH265")||1!=this.configs.enableWebH265&&(this.reason=1,1))}},{key:"isCPUCoresSatisfy",value:function(t){if(this.hasOwnProperty("core")){var e=this.configs.core[4e3];if(this.configs.core.hasOwnProperty(t)&&(e=this.configs.core[t]),this.cores>e)return!0}else if(this.cores>4)return!0;return this.reason=2,!1}},{key:"is64bitSoftware",value:function(){return-1!=navigator.userAgent.indexOf("Macintosh")||-1!=navigator.userAgent.indexOf("x64")}},{key:"isBitrateInRange",value:function(t){return m.isSupportWasmThread()?!(!this.hasOwnProperty("multiThreadBitKbps")||((t>=4e3||0==t)&&!this.checkX86(t)?(this.reason=4,1):(!Array.isArray(this.configs.multiThreadBitKbps)||!this.configs.multiThreadBitKbps.includes(t))&&(this.reason=3,1))):(this.reason=6,!1)}},{key:"checkX86",value:function(t){if(this.is64bit)return!0;if(!this.hasOwnProperty("x86"))return!1;var e=!1;return this.configs.x86.hasOwnProperty(t)&&(e=1==this.configs.x86[t]),e}},{key:"isCostInRange",value:function(t){if(!this.enableCost)return!0;if(!this.hasOwnProperty("baseCostUs"))return!1;var e=this.configs.baseCostUs[2e3];return this.configs.baseCostUs.hasOwnProperty(t)&&(e=this.configs.baseCostUs[t]),this.costUs=this.getCost(),this.costUs<=e||(this.reason=5,!1)}},{key:"getCost",value:function(){var t=this;if(!this.hasOwnProperty("loopCount"))return l(this.cla,"getCost configs==null or has no key=loopCount"),0;var e=0;return localStorage.hasOwnProperty("w265LastCost")&&(e=Number(localStorage.w265LastCost)),this.sid&&clearTimeout(this.sid),this.sid=setTimeout((function(){var e=new h(120,120);localStorage.w265LastCost=Math.floor(e.calc(t.configs.loopCount))}),5e3),e}},{key:"hasOwnProperty",value:function(t){return!!this.configs.hasOwnProperty(t)||(this.reason=1,!1)}}]),t}(),v=function(){function t(){n(this,t),this.configMgr=new y}return o(t,[{key:"parseConfigs",value:function(t){this.configMgr.parseConfigs(t)}},{key:"isSupportH265",value:function(t){return this.configMgr.isSupportH265(this.version(),t)}},{key:"version",value:function(){return"1.5.2"}},{key:"setLogCallback",value:function(t){var e;e=t,self.logCallback=e,l("Logger setLogCallback"),c.length>0&&(c.forEach((function(t){var e;(e=self.logCallback).call.apply(e,[null].concat(function(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if(void 0!==C.default&&(0,f.default)(Object(t)))return(0,d.default)(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?(0,d.default)(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t)))})),c.length=0)}},{key:"isStripe",value:function(){return-1!==navigator.userAgent.indexOf("Windows")}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();e.default=v}]).default},function(t,e,i){i.r(e),e.default={STREAM_VIDEO_RAW:0,STREAM_VIDEO_TRANSCODE:1,STREAM_VIDEO_RTMP_RAW:2,STREAM_VIDEO_RTMP_TRANSCODE:3,STRAEM_TYPE_AUDIO_START:32,STREAM_AUDIO_RAW:32,STREAM_AUDIO_TRANSCODE:33,STREAM_AUDIO_FLV_RAW:34,STREAM_AUDIO_FLV_TRANSCODE:35,STREAM_AUDIO_RTMP_RAW:36,STREAM_AUDIO_RTMP_TRANSCODE:37,STREAM_AUDIO_ALL_SID:39,STREAM_TYPE_UNKNOWN:255}},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(14),a=i(17),s=function(){function t(){Object(n.a)(this,t),this.streamId=new o.default,this.videoProxyInfos=[],this.token="",this.streamSeqSN=0,this.quickAccessBeginIndex=0,this.quickAccessEndIndex=0,this.ip=0,this.urlTokenTime=0,this.urlToken=""}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.streamId.unmarshall(t),this.videoProxyInfos=[];for(var e=t.popUInt32(),i=0;i<e;i++){var n=new a.default;this.videoProxyInfos.push(n.unmarshall(t))}return this.token=t.popString(),this.streamSeqSN=t.popUInt64(),this.quickAccessBeginIndex=t.popUInt64(),this.quickAccessEndIndex=t.popUInt64(),this.ip=t.popUInt32(),this.urlTokenTime=t.popUInt32(),this.urlToken=t.popString(),this}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=i(14),s=i(17),u=function(){function t(){Object(n.a)(this,t),this.currentProxyInfos=new m.default}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return t.pushUInt32(this.currentProxyInfos.size),this.currentProxyInfos.forEach((function(e,i){t.pushUint8ArrayWithoutLen(i.marshall()),t.pushUInt32(e.length),e.forEach((function(e){t.pushUint8ArrayWithoutLen(e.marshall())}))})),t.marshall()}},{key:"unmarshall",value:function(t){this.currentProxyInfos.clear();for(var e=t.popUInt32(),i=0;i<e;i++){var n=new a.default;n.unmarshall(t);for(var r=[],o=t.popUInt32(),u=0;u<o;u++){var c=new s.default;r.push(c.unmarshall(t))}this.currentProxyInfos.set(n,r)}return this}}]),t}();e.default=u},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(7),a=i(10),s=function(){function t(){Object(n.a)(this,t),this.seq=0,this.uri=0,this.from=0,this.uid=0,this.streamSeqSN=0,this.payload=null}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new a.a;return t.setUri(o.a.PP2pSliceData),t.pushUInt64(this.seq),t.pushUInt32(this.uri),t.pushUInt8(this.from),t.pushUInt64(this.uid),t.pushUInt64(this.streamSeqSN),t.pushUint8Array(this.payload),t.marshall()}},{key:"unmarshall",value:function(t){return this.seq=t.popUInt64(),this.uri=t.popUInt32(),this.from=t.popUInt8(),this.uid=t.popUInt64(),this.streamSeqSN=t.popUInt64(),this.payload=t.popUint8Array(),this}},{key:"isAudio",get:function(){return this.uri==o.a.PP2pSliceAudioData}},{key:"isVideo",get:function(){return this.uri==o.a.PP2pSliceVideoData}},{key:"isCtrlSlice",get:function(){return this.uri==o.a.PP2pSliceControlData}},{key:"isFullSlice",get:function(){return 1==this.from}},{key:"isSubSlice",get:function(){return 2==this.from}},{key:"isResend",get:function(){return 3==this.from&&0==this.uid}},{key:"isPatchSlice",get:function(){return 4==this.from}},{key:"isFromPeer",get:function(){return 0!==this.uid}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=i(18),s=i(19),u=function(){function t(){Object(n.a)(this,t),this.currentProxyInfos=new m.default}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return t.pushUInt32(this.currentProxyInfos.size),this.currentProxyInfos.forEach((function(e,i){t.pushUint8ArrayWithoutLen(i.marshall()),t.pushUInt32(e.length),e.forEach((function(e){t.pushUint8ArrayWithoutLen(e.marshall())}))})),t.marshall()}},{key:"unmarshall",value:function(t){this.currentProxyInfos.clear();for(var e=t.popUInt32(),i=0;i<e;i++){var n=new a.default;n.unmarshall(t);for(var r=[],o=t.popUInt32(),u=0;u<o;u++){var c=new s.default;r.push(c.unmarshall(t))}this.currentProxyInfos.set(n,r)}return this}}]),t}();e.default=u},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=function(){function t(){Object(n.a)(this,t),this.h264Only=!1,this.maxCodeRateH264=0,this.maxCodeRateH265=0,this.reserve=0}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return t.pushBool(this.h264Only),t.pushUInt16(this.maxCodeRateH264),t.pushUInt16(this.maxCodeRateH265),t.pushUInt32(this.reserve),t.marshall()}},{key:"unmarshall",value:function(t){return this.h264Only=t.popBool(),this.maxCodeRateH264=t.popUInt16(),this.maxCodeRateH265=t.popUInt16(),this.reserve=t.popUInt32(),this}}]),t}();e.default=a},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(18),a=i(19),s=function(){function t(){Object(n.a)(this,t),this.streamId=new o.default,this.videoProxyInfos=[],this.token=""}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.streamId.unmarshall(t),this.videoProxyInfos=[];for(var e=t.popUInt32(),i=0;i<e;i++){var n=new a.default;this.videoProxyInfos.push(n.unmarshall(t))}return this.token=t.popString(),this}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=function(){function t(){Object(n.a)(this,t),this.uid=0,this.encoderSource=0,this.uploadType=0,this.frameDts=0,this.caputureTime=0,this.encodeEndTime=0,this.sendFrameTime=0}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.uid=t.popUInt64(),this.encoderSource=t.popUInt8(),this.uploadType=t.popUInt8(),this.frameDts=t.popUInt64(),this.caputureTime=t.popUInt64(),this.encodeEndTime=t.popUInt64(),this.sendFrameTime=t.popUInt64()}}]),t}();e.default=o},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(31),a=function(){function t(){Object(n.a)(this,t),this.dtsGapSum=0,this.delaySum=0,this.serverInfos=[]}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.dtsGapSum=t.popInt64(),this.delaySum=t.popUInt64();for(var e=t.popUInt32();e>0;){e--;var i=new o.default;i.unmarshall(t),this.serverInfos.push(i)}}}]),t}();e.default=a},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=function(){function t(){Object(n.a)(this,t),this.enable=0,//!=0时表示有效数据
this.proxyIdLow=0,this.proxyIdHigh=0,this.proxyType=0,this.serverDelay=0,this.lastPeriodDelay=0}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.enable=t.popUInt8(),this.proxyIdLow=t.popUInt32(),this.proxyIdHigh=t.popUInt32(),this.proxyType=t.popUInt16(),this.serverDelay=t.popUInt32(),this.lastPeriodDelay=t.popUInt32()}},{key:"getProxyIdStr",value:function(){return this.proxyIdHigh.toString(16)+this.proxyIdLow.toString(16)}}]),t}();e.default=o},function(t,e,i){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?(0,d.default)(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}i.d(e,"a",(function(){return r}))},function(t,e,i){var n={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var i=null,r=null,o=/^([^#]*)(.*)$/.exec(e);o&&(r=o[2],e=o[1]);var a=/^([^\?]*)(.*)$/.exec(e);a&&(i=a[2],e=a[1]);var s=/^([^#]*)(.*)$/.exec(t);s&&(t=s[1]);var u=/^([^\?]*)(.*)$/.exec(t);u&&(t=u[1]);var c=/^((([a-z]+):)?\/\/[a-z0-9\.-]+(:[0-9]+)?\/)(.*)$/i.exec(t),l=c[3],h=c[1],d=c[5],f=null;return f=/^\/\//.test(e)?l+"://"+n.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?h+n.buildAbsolutePath("",e.substring(1)):h+n.buildAbsolutePath(d,e),i&&(f+=i),r&&(f+=r),f},buildAbsolutePath:function(t,e){for(var i,n,r=e,o="",a=t.replace(/[^\/]*$/,r.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;(n=a.indexOf("/../",s))>-1;s=n+i)i=/^\/(?:\.\.\/)*/.exec(a.slice(n))[0].length,o=(o+a.substring(s,n)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(i-1)/3+"}$"),"/");var u=/\.\.\//g;if(u.test(e)){var c=t.split("/"),l=e.match(u).length;o=c.splice(0,c.length-1-l);var h=a.substr(s);return h.startsWith("/")?o.join("/")+h:o.join("/")+"/"+h}return o+a.substr(s)},getTimeFromUrl:function(t,e){var i=e?/\d+_(\d+)_\d+.ts?/:/(\d+)_\d+_\d+.ts?/,n=t.match(i);return n?e?n[1]:Math.round(n[1]/1e3):-1},getVodUrl:function(t,e,i,n){return"http://106.38.255.95:9123/xcrs/"+t+"_"+e+"_"+i+".m3u8?btime="+n}};t.exports=n},function(t,e,i){var n={"./CdnAllocateInfo":23,"./CdnAllocateInfo.js":23,"./CdnGroupID":14,"./CdnGroupID.js":14,"./CurrentCdnProxyInfo":24,"./CurrentCdnProxyInfo.js":24,"./PCDNGetProxyListReq":37,"./PCDNGetProxyListReq.js":37,"./PCDNGetProxyListRsp":38,"./PCDNGetProxyListRsp.js":38,"./PP2pSliceAudioData":39,"./PP2pSliceAudioData.js":39,"./PP2pSliceAudioDataV2":40,"./PP2pSliceAudioDataV2.js":40,"./PP2pSliceControlData":41,"./PP2pSliceControlData.js":41,"./PP2pSliceData":25,"./PP2pSliceData.js":25,"./PP2pSliceVideoData":42,"./PP2pSliceVideoData.js":42,"./SlaveProxyInfo":17,"./SlaveProxyInfo.js":17,"./StreamCodecType":12,"./StreamCodecType.js":12};function r(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return(0,y.default)(n)},r.resolve=o,t.exports=r,r.id=34},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=i(27),s=function(){function t(){Object(n.a)(this,t),this.sid=0,this.fuzzyParam=new a.default}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return t.pushUInt64(this.sid),t.pushUint8ArrayWithoutLen(this.fuzzyParam.marshall()),t.marshall()}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(6),a=i(5),s=i(13),u=i(15),c=i(0),l=i(7),h=i(20),d=!!Number(localStorage._printProtocol),f=!!Number(localStorage._printGateway);function p(t,e,i){var n="font-weight:900";return t&&(n+=";color:"+t),e&&(n+=";background:"+e),i&&(n+=";border:3px solid "+i),n}var m=new(function(t){Object(o.a)(u,t);var e=Object(a.a)(u);function u(){var t;return Object(n.a)(this,u),(t=e.call(this))._taf=null,t.requestId=1,t.TAFLINK_INITED="TAFLINK_INITED",t}return Object(r.a)(u,[{key:"getTaf",value:function(){return this._taf}},{key:"getUserId",value:function(){return this._taf.getUserId()}},{key:"getRequestId",value:function(){return this.requestId++,1e5===this.requestId&&(this.requestId=1),this.requestId}},{key:"setTafHandler",value:function(t){t.registerWupMap({getCdnTokenInfoEx:s.default.GetCdnTokenExRsp,wsTimeSync:s.default.WSTimeSyncRsp,getInfoFromVG:s.default.GetInfoFromVGRsp,GetInfoFromVG:s.default.GetInfoFromVGRsp,getInfoFromCdnVG:s.default.GetInfoFromVGRsp,getMediaRec:s.default.RecSysRsp,getAntiCodeForStream:s.default.GetAntiCodeForStreamRsp}),this._taf=t,t.getTaf&&s.default.setTaf(t.getTaf()),this.emit(this.TAFLINK_INITED)}},{key:"sendWup",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this._taf.sendWup2?this._taf.sendWup2(t,e,i,n,r,o,a):this._taf.sendWup(t,e,i,n,r,o,a)}},{key:"sendYY",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._taf){var r=t.constructor.name,o=l.a[r];o||"function"!=typeof t.marshall||(o=new DataView(t.marshall().buffer).getUint32(4,!0));var a=this._taf.getTaf().BinBuffer,u=new s.default.GetInfoFromVGReq;u.lUid=n||0,u.sMsg=new a(t.marshall().buffer),u.sProtoName="yy",u.iUri=o||0,this.sendWup("videogateway","getInfoFromCdnVG",u,(function(t){if(0!=t.sMsg.len)if(t.lUid&&u.lUid&&t.lUid!=u.lUid)c.a.warn("GetInfoFromVG response lUid dif.req=".concat(u.lUid," rsp=").concat(t.lUid));else{var n=new DataView(t.sMsg.buffer),o=new h.a(n);if(!(r=l.a[o.uri]))throw f||c.a.log("%c<<<<<<< %crspWup:%c GetInfoFromVG",p("#0000E3"),p("black"),p("#0000E3"),"videogateway",t),new Error("[x] Unmatched protocol, uri=".concat(o.uri>>8," resCode=").concat(o.resCode," len=").concat(o.len));var a=o,s=null;try{s=i(34)("./"+r).default}catch(t){c.a.warn("[x] Unmatched protocol",o.uri>>8,r)}d&&c.a.log("%c<<<<<<< "+r,p("#0000E3"),a),s&&(a=new s).unmarshall(o),e&&e(a)}else c.a.warn("GetInfoFromVG response an empty pkg.")}))}else c.a.warn("TafLink.sendYY taf not init!")}},{key:"inited",get:function(){return!!this._taf}},{key:"connected",get:function(){return!!this._taf&&(this._taf.isWSConnected?this._taf.isWSConnected():this._taf.connected)}}]),u}(u.EventEmitter));e.default=m},function(t,e,i){i.r(e);var n=i(11),r=i(1),o=i(2),a=i(7),s=i(10),u=(i(14),i(24)),c=function(){function t(){Object(r.a)(this,t),this.uid=0,this.version=0,this.cdnGroupIdList=[],this.currentInfo=new u.default,this.appid=0,this.clientAppid=0,this.clientType=0,this.ip=0,this.sendTime=0,this.sdkVersion=0,this.imsi=0,this.appId=0,this.anchorStreamNam2UId=new m.default}return Object(o.a)(t,[{key:"marshall",value:function(){var t=new s.a;t.setUri(a.a.PCDNGetProxyListReq),t.pushUInt64(this.uid),t.pushUInt8(this.version),t.pushUInt32(this.cdnGroupIdList.length),this.cdnGroupIdList.forEach((function(e){t.pushUint8ArrayWithoutLen(e.marshall())})),t.pushUint8ArrayWithoutLen(this.currentInfo.marshall()),t.pushUInt8(this.appid),t.pushUInt32(this.clientAppid),t.pushUInt32(this.clientType),t.pushUInt32(this.ip),t.pushUInt32(this.sendTime),t.pushUInt32(this.sdkVersion),t.pushUInt64(this.imsi),t.pushUInt32(this.appId),t.pushUInt32(this.anchorStreamNam2UId.size);var e,i=Object(n.a)(this.anchorStreamNam2UId.keys());try{for(i.s();!(e=i.n()).done;){var r=e.value;t.pushString(r),t.pushUInt64(this.anchorStreamNam2UId.get(r))}}catch(t){i.e(t)}finally{i.f()}return t.marshall()}}]),t}();e.default=c},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=(i(7),i(23)),a=function(){function t(){Object(n.a)(this,t),this.uid=0,this.allocatedStreams=[],this.clientAppid=0,this.clientType=0,this.sendTime=0,this.userArea=0,this.videoGroupId=0,this.retryType=0,this.retryFreq=0,this.result=0,this.proxyType=0,this.tokenVersion=0,this.sslUrl="",this.appId=0}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.uid=t.popUInt64(),this.allocatedStreams=[];for(var e=t.popUInt32(),i=0;i<e;i++){var n=new o.default;this.allocatedStreams.push(n.unmarshall(t))}return this.clientAppid=t.popUInt32(),this.clientType=t.popUInt32(),this.sendTime=t.popUInt32(),this.userArea=t.popUInt32(),this.videoGroupId=t.popUInt32(),this.retryType=t.popUInt8(),this.retryFreq=t.popUInt16(),this.result=t.popUInt32(),this.proxyType=t.popUInt32(),this.tokenVersion=t.popUInt32(),this.sslUrl=t.popString(),this.appId=t.popUInt32(),this}}]),t}();e.default=a},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(7),a=i(10),s=function(){function t(){Object(n.a)(this,t),this.seq=0,this.checkSum=0,this.codecType=0,this.streamData=null}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new a.a;return t.setUri(o.a.PP2pSliceAudioData),t.pushUInt8(this.checkSum),t.pushUInt16(this.codecType),t.pushUint8Array(this.streamData),t.marshall()}},{key:"unmarshall",value:function(t){return this.checkSum=t.popUInt8(),this.codecType=t.popUInt16(),this.streamData=t.popUint8Array(),this}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=i(7),s=function(){function t(){Object(n.a)(this,t),this.checkSum=0,this.codecType=0,this.seqNum=0,this.frameNum=0,this.frameId=0,this.audioHeader=null,this.streamData=null}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a;t.setUri(a.a.PP2pSliceAudioDataV2),t.pushUInt8(this.checkSum),t.pushUInt16(this.codecType),t.pushUInt16(this.seqNum),t.pushUInt16(this.frameNum),t.pushUInt32(this.frameId),t.pushUint8Array(this.audioHeader),t.pushUint8Array(this.streamData)}},{key:"unmarshall",value:function(t){this.checkSum=t.popUInt8(),this.codecType=t.popUInt16(),this.seqNum=t.popUInt16(),this.frameNum=t.popUInt16(),this.frameId=t.popUInt32(),this.audioHeader=t.popUint8Array(),this.streamData=t.popUint8Array()}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(7),a=i(10),s=function(){function t(){Object(n.a)(this,t),this.seq=0,this.strData=null}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new a.a;return t.setUri(o.a.PP2pSliceControlData),t.pushUint8Array(this.strData),t.marshall()}},{key:"unmarshall",value:function(t){return this.strData=t.popUint8Array(),this}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(7),a=i(10),s=function(){function t(){Object(n.a)(this,t),this.seq=0,this.uid=0,this.isResend=!1,this.checkSum=0,this.seqNum=0,this.frameNum=0,this.frameId=0,this.config=new m.default,this.streamData=null}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new a.a;return t.setUri(o.a.PP2pSliceVideoData),t.pushUInt8(this.checkSum),t.pushUInt16(this.seqNum),t.pushUInt16(this.frameNum),t.pushUInt32(this.frameId),t.pushUInt32(this.config.size),this.config.forEach((function(e,i){t.pushUInt8(i),t.pushUInt32(e)})),t.pushUint8Array(this.streamData),t.marshall()}},{key:"unmarshall",value:function(t){this.checkSum=t.popUInt8(),this.seqNum=t.popUInt16(),this.frameNum=t.popUInt16(),this.frameId=t.popUInt32(),this.config.clear();for(var e=t.popUInt32(),i=0;i<e;i++){var n=t.popUInt8(),r=t.popUInt32();this.config.set(n,r)}return this.streamData=t.popUint8Array(),this}}]),t}();e.default=s},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=function(){function t(){Object(n.a)(this,t),this.strToken=""}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return t.pushString(this.strToken),t.marshall()}}]),t}();e.default=a},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=function(){function t(){Object(n.a)(this,t),this.ip=0,this.tcpPorts=[],this.udpPorts=[]}return Object(r.a)(t,[{key:"unmarshall",value:function(t){return this.ip=t.popUInt32(),this.tcpPorts=t.popUInt16Vector(),this.udpPorts=t.popUInt16Vector(),this}}]),t}();e.default=o},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(7),a=i(10),s=(i(35),i(26)),u=function(){function t(){Object(n.a)(this,t),this.uid=0,this.version=0,this.streamNames=[],this.fuzzyQueryKeys=[],this.currentInfo=new s.default,this.appid=0,this.clientAppid=0,this.clientType=0,this.ip=0,this.sendTime=0,this.sdkVersion=0,this.imsi=0,this.useCase=0,this.appSysName="",this.appUA="",this.retryFailCount=0,this.extInfo=new m.default,this.latencyModel=0}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new a.a;return t.setUri(o.a.PAudienceGetProxyListReq),t.pushUInt64(this.uid),t.pushUInt8(this.version),t.pushUInt32(this.streamNames.length),this.streamNames.forEach((function(e){t.pushString(e)})),t.pushUInt32(this.fuzzyQueryKeys.length),this.fuzzyQueryKeys.forEach((function(e){t.pushUint8ArrayWithoutLen(e.marshall())})),t.pushUint8ArrayWithoutLen(this.currentInfo.marshall()),t.pushUInt8(this.appid),t.pushUInt32(this.clientAppid),t.pushUInt32(this.clientType),t.pushUInt32(this.ip),t.pushUInt32(this.sendTime),t.pushUInt32(this.sdkVersion),t.pushUInt64(this.imsi),t.pushUInt8(this.useCase),t.pushString(this.appSysName),t.pushString(this.appUA),t.pushUInt8(this.retryFailCount),t.pushUInt32(this.extInfo.size),this.extInfo.forEach((function(e,i){t.pushString(i),t.pushString(e)})),t.pushUInt16(this.latencyModel),t.marshall()}}]),t}();e.default=u},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=(i(7),i(28)),a=function(){function t(){Object(n.a)(this,t),this.uid=0,this.allocatedStreams=new m.default,this.clientAppid=0,this.clientType=0,this.sendTime=0,this.userArea=0,this.videoGroupId=0,this.retryType=0,this.retryFreq=0,this.result=0,this.proxyType=0,this.tokenVersion=0,this.sslUrl=""}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.uid=t.popUInt64(),this.allocatedStreams.clear();for(var e=t.popUInt32(),i=0;i<e;i++){for(var n=t.popString(),r=[],a=t.popUInt32(),s=0;s<a;s++){var u=new o.default;r.push(u.unmarshall(t))}this.allocatedStreams.set(n,r)}return this.clientAppid=t.popUInt32(),this.clientType=t.popUInt32(),this.sendTime=t.popUInt32(),this.userArea=t.popUInt32(),this.videoGroupId=t.popUInt32(),this.retryType=t.popUInt8(),this.retryFreq=t.popUInt16(),this.result=t.popUInt32(),this.proxyType=t.popUInt32(),this.tokenVersion=t.popUInt32(),this.sslUrl=t.popString(),this}}]),t}();e.default=a},function(t,e,i){i.r(e),e.default={ACCEPT_SUBSCRIBE:0,EMPTY_UPLINK_BW:1,DETECT_SUBSCRIBE_CYCLE:2,EMPTY_PEER_INFO:3,SUBSCRIBE_UPLINK_NOT_ENOUGH:4,PUBLISHER_KICK_OFF:5,NOT_SUBSCRIBER:6,INVALID_SUB_STREAM:7,ACCEPT_BY_SUBSCRIBER_UPLINK:9,INVALID_STREAMID:10,SERVER_EMPTY_BW:11,PUBLISHER_LEAVE:12,DIFFERENT_VIDEO_PROXY:13,OLD_VERSION_REQ:14,SUBSCRIBER_NO_PERMISSION:15}},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=function(){function t(){Object(n.a)(this,t),this.ssrc=0,this.framenum=0,this.type=0,this.framebase=0,this.critical=!1,this.payload=null,this.transMode=0,this.packData=!1,this.bHasVideoSid=!1,this.byteVoiceMarks=0,this.capTimeStamp=0,this.m_isMarshalVoiceMarks=!1}return Object(r.a)(t,[{key:"unmarshall",value:function(e){this.capTimeStamp=e.popUInt32(),this.ssrc=e.popUInt8();var i=e.popUInt8();return this.type=e.popUInt16(),this.framebase=e.popUInt32(),this.payload=e.popUint8Array(),e.bytesAvailable()?this.byteVoiceMarks=e.popUInt8():this.byteVoiceMarks=t.VOICE_MARK_KEY_BIT0,this.framenum=i&t.FRAMENUM_MASK,this.critical=!!(i&t.CRITICAL_MASK),this.bHasVideoSid=!!(i&t.VIDEOSID_MASK),this.transMode=1+((i&t.FTMMODE_MASK)>>4),this}},{key:"setIsKeyVoice",value:function(e){this.byteVoiceMarks|=e?t.VOICE_MARK_KEY_BIT0:0}},{key:"isKeyVoice",get:function(){return this.byteVoiceMarks&t.VOICE_MARK_KEY_BIT0}}]),t}();o.FRAMENUM_MASK=15,o.FTMMODE_MASK=48,o.VIDEOSID_MASK=64,o.CRITICAL_MASK=128,o.VOICE_MARK_KEY_BIT0=1,e.default=o},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(10),a=function(){function t(){Object(n.a)(this,t),this.strToken=""}return Object(r.a)(t,[{key:"marshall",value:function(){var t=new o.a(!1);return t.pushString(this.strToken),t.marshall()}}]),t}();e.default=a},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=function(){function t(){Object(n.a)(this,t),this.systime=0,this.encode_delay=0,this.send_buffer=0}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.systime=t.popUInt64(),this.encode_delay=t.popUInt32(),this.send_buffer=t.popUInt32()}}]),t}();e.default=o},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=i(29),a=i(30),s=function(){function t(){Object(n.a)(this,t),this.anchorSei=new o.default,this.serverSei=new a.default}return Object(r.a)(t,[{key:"unmarshall",value:function(t){this.anchorSei.unmarshall(t),this.serverSei.unmarshall(t)}}]),t}();e.default=s},function(t,e,i){function n(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||(0,O.default)(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var n=i(i.s=ENTRY_MODULE);return n.default||n}function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t,e,n){var o={};o[n]=[];var a=e.toString(),s=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var u,c=s[1],l=new RegExp("(\\\\n|\\W)"+r(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=l.exec(a);)"dll-reference"!==u[3]&&o[n].push(u[3]);for(l=new RegExp("\\("+r(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=l.exec(a);)t[u[2]]||(o[n].push(u[1]),t[u[2]]=i(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var h,d=(0,y.default)(o),f=0;f<d.length;f++)for(var p=0;p<o[d[f]].length;p++)h=o[d[f]][p],isNaN(1*h)||(o[d[f]][p]=1*o[d[f]][p]);return o}function a(t){return(0,y.default)(t).reduce((function(e,i){return e||t[i].length>0}),!1)}t.exports=function(t,e){e=e||{};var r={main:i.m},s=e.all?{main:(0,y.default)(r.main)}:function(t,e){for(var i={main:[e]},n={main:[]},r={main:{}};a(i);)for(var s=(0,y.default)(i),u=0;u<s.length;u++){var c=s[u],l=i[c].pop();if(r[c]=r[c]||{},!r[c][l]&&t[c][l]){r[c][l]=!0,n[c]=n[c]||[],n[c].push(l);for(var h=o(t,t[c][l],c),d=(0,y.default)(h),f=0;f<d.length;f++)i[d[f]]=i[d[f]]||[],i[d[f]]=i[d[f]].concat(h[d[f]])}}return n}(r,t),u="";(0,y.default)(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",(0,p.default)(e))+")({"+s[t].map((function(e){return(0,p.default)(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),u=u+"new (("+n.toString().replace("ENTRY_MODULE",(0,p.default)(t))+")({"+s.main.map((function(t){return(0,p.default)(t)+": "+r.main[t].toString()})).join(",")+"}))(self);";var c=new window.Blob([u],{type:"text/javascript"});if(e.bare)return c;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),h=new window.Worker(l);return h.objectURL=l,h}},function(t,e,i){var n={"./ApToken":43,"./ApToken.js":43,"./CurrentProxyInfo":26,"./CurrentProxyInfo.js":26,"./FuzzyQueryKey":35,"./FuzzyQueryKey.js":35,"./FuzzyQueryParam":27,"./FuzzyQueryParam.js":27,"./IpInfo":44,"./IpInfo.js":44,"./PAudienceGetProxyListReq":45,"./PAudienceGetProxyListReq.js":45,"./PAudienceGetProxyListRsp":46,"./PAudienceGetProxyListRsp.js":46,"./SlaveProxyInfo":19,"./SlaveProxyInfo.js":19,"./StreamAllocateInfo":28,"./StreamAllocateInfo.js":28,"./StreamCodecType":16,"./StreamCodecType.js":16,"./StreamGroupID":18,"./StreamGroupID.js":18,"./StreamType":22,"./StreamType.js":22,"./SubscribeResCode":47,"./SubscribeResCode.js":47,"./VoiceChatEx":48,"./VoiceChatEx.js":48,"./VpToken":49,"./VpToken.js":49};function r(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return(0,y.default)(n)},r.resolve=o,t.exports=r,r.id=53},function(t,e){t.exports=function(t){console.log("[ Timer worker init ]");var e=null;t.addEventListener("message",(function(i){switch(i.data){case"start":e||(e=setInterval((function(){t.postMessage({})}),10));break;case"stop":e&&(clearInterval(e),e=null)}})),t.addEventListener("messageerror",(function(t){console.error("[TimerWorker.messageerror]",t)}))}},function(t,e,i){var n={"./AnchorDtsSei":29,"./AnchorDtsSei.js":29,"./AnchorSeiInfo":50,"./AnchorSeiInfo.js":50,"./HuyaDelaySeiData":51,"./HuyaDelaySeiData.js":51,"./ServerDtsSei":30,"./ServerDtsSei.js":30,"./ServerNodeInfo":31,"./ServerNodeInfo.js":31};function r(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return(0,y.default)(n)},r.resolve=o,t.exports=r,r.id=55},function(t,e,i){i.r(e);var n=i(1),r=i(2),o=function(){function t(){Object(n.a)(this,t)}return Object(r.a)(t,null,[{key:"isSupported",value:function(){return!1}}]),t}();e.default=o},function(t,e,i){i.r(e);var v=i(1),g=i(2),_={PLAY_STATUS:"PLAY_STATUS",PLAY_CARTON:"PLAY_CARTON",PLAY_TIME_STATUS:"PLAY_TIME_STATUS",VIDEO_PLAY:"VIDEO_PLAY",VIDEO_PLAYING:"VIDEO_PLAYING",VIDEO_PAUSE:"VIDEO_PAUSE",VIDEO_BAD_QUALITY:"VIDEO_BAD_QUALITY",METADATA:"METADATA",RECV_VIDEO_FRAME:"RECV_VIDEO_FRAME",VIDEO_STOP:"VIDEO_STOP",VIDEO_SEEK:"VIDEO_SEEK",BROWSER_PAUSE:"BROWSER_PAUSE",AUDIO_PLAY:"AUDIO_PLAY",AUDIO_SOUND:"AUDIO_SOUND",ANCHOR_STOP:"ANCHOR_STOP",VIDEO_LINK_CLOSE:"VIDEO_LINK_CLOSE",NO_VIDEO:"NO_VIDEO",HLS_URL_UNAVAILABLE:"HLS_URL_UNAVAILABLE",HLS_URL_LOAD_TIMEOUT:"HLS_URL_LOAD_TIMEOUT",HLS_MAINFEST_LOAD_TIMEOUT:"HLS_MAINFEST_LOAD_TIMEOUT",FLV_URL_UNAVAILABLE:"FLV_URL_UNAVAILABLE",FLV_URL_LOAD_TIMEOUT:"FLV_URL_LOAD_TIMEOUT",H5_PLAYER_ERROR:"H5_PLAYER_ERROR",PAUSE_5S_RETRY:"PAUSE_5S_RETRY",NO_DATA_RECEIVED:"NO_DATA_RECEIVED",P2P_REPORT:"P2P_REPORT",DATA_METRIC:"DATA_METRIC",DATA_METRIC2:"DATA_METRIC2",P2P_TIMEOUT:"P2P_TIMEOUT",FLV_TO_P2P:"FLV_TO_P2P",FLV_TRY_TO_P2P:"FLV_TRY_TO_P2P",FLAC_AUDIO_START:"FLAC_AUDIO_START",FLAC_AUDIO_ERROR:"FLAC_AUDIO_ERROR",FLAC_AUDIO_NEED_RETRY:"FLAC_AUDIO_NEED_RETRY",SIGNAL_PLAY:"SIGNAL_PLAY",SIGNAL_HEART:"SIGNAL_HEART",SIGNAL_DATA:"SIGNAL_DATA",SIGNAL_ERROR:"SIGNAL_ERROR",H264_SEI_PLAY:"H264_SEI_PLAY",TRANS_END:"TRANS_END",NEED_UPDATE_M3U8:"NEED_UPDATE_M3U8",PLAYBACK_UPDATE:"PLAYBACK_UPDATE",PLAYBACK_M3U8_UPDATED:"PLAYBACK_M3U8_UPDATED",PLAYBACK_DIF_CDN:"PLAYBACK_DIF_CDN",UPDATE_INTERSITY:"UPDATE_INTERSITY",PLAY_DOWNLINK_INFO:"PLAY_DOWNLINK_INFO",PLAY_FRAME_BUFFER:"PLAY_FRAME_BUFFER",WEBRTC_VIDEO_ERROR:"WEBRTC_VIDEO_ERROR",SWITCH_DONE:"SWITCH_DONE",AUTO_BITRATE_CHANGED:"AUTO_BITRATE_CHANGED",AUTO_FORCE_RSP:"AUTO_FORCE_RSP",VISIBILITY_CHANGE:"VISIBILITY_CHANGE",REPLAY_VIDEO:"REPLAY_VIDEO",P2P_PLAYING_EVENT:"P2P_PLAYING_EVENT",TURN_TO_H264:"TURN_TO_H264",H265_VIDEO_RETRY:"H265_VIDEO_RETRY",H265_PLAY:"H265_PLAY",PAUSE_5SEC_ERROR:"PAUSE_5SEC_ERROR",M3U8_PLAY_ENDED:"M3U8_PLAY_ENDED",SEI_INFO:"SEI_INFO",VIDEO_RESOLUTION_CHANGE:"VIDEO_RESOLUTION_CHANGE"},w="VIDEO_PLAYING",b="VIDEO_STOP",I="VIDEO_CACHING",T=_,E=i(0),R=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"turnStr",value:function(t,e,i){for(var n=t.toString(e),r=n.length;r<i;r++)n="0"+n;return n}},{key:"rotl64",value:function(e,i){var n=t.turnStr(e,2,64),r=n.substring(0,32),o=n.substring(32),a=o.substr(i,32-i)+o.substr(0,i);return parseInt(r+a,2)}},{key:"rotr64",value:function(e,i){var n=t.turnStr(e,2,64),r=n.substring(0,32),o=n.substring(32),a=o.substr(32-i,i)+o.substr(0,32-i);return parseInt(r+a,2)}},{key:"rotUid",value:function(e,i){return 0===e&&(e="1234"+t.turnStr(parseInt(9999*Math.random()),10,4)),isNaN(i)&&(i=0),e=parseInt(e),i=parseInt(i),t.rotl64(e,8)}},{key:"revertUid",value:function(e,i){return e=parseInt(e),t.rotr64(e,8)}},{key:"inet_ntoa",value:function(t){var e,i,n,r=new Uint8Array(4),o=new DataView(r.buffer);return o.setUint32(0,t),e=o.getUint8(0),i=o.getUint8(1),n=o.getUint8(2),o.getUint8(3)+"."+n+"."+i+"."+e}},{key:"ip2uint",value:function(t){for(var e=0,i=t.split("."),n=0;n<i.length;n++)e|=Number(i[n])<<8*n;return e<0&&(e+=4294967296),e}},{key:"isBiggerUint",value:function(t,e){return t!==e&&(t>e?t-e<2147483647:!(e-t<2147483647))}},{key:"isEqualOrBiggerUint",value:function(t,e){return t===e||(t>e?t-e<2147483647:!(e-t<2147483647))}},{key:"isUintMax",value:function(t){return 4294967295===t}},{key:"isUint64Max",value:function(t){return 0x10000000000000000===t}},{key:"getQueryString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=(e||window.location.search.substr(1)).match(i);return null!=n?unescape(n[2]):null}},{key:"printHexBytes",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new DataView(t.buffer),n=e?10:0,r=[];n<i.byteLength;){var o=i.getUint8(n++);(o=o.toString(16).toUpperCase()).length<2&&(o="0"+o),r.push(o,"\t"),n%10==0&&r.push("\n")}console.log(r.join("")+"\tsize:",i.byteLength)}},{key:"getCookie",value:function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){var o=i[n].trim();if(0==o.indexOf(e))return o.substr(e.length)}return""}},{key:"formatByteSize",value:function(t){var e=t/1024;return e>1024?(e/=1024).toFixed(1)+"MB":e.toFixed(1)+"KB"}},{key:"padStrLen",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.length>=e)return t;var n=" ".repeat(e-t.length);return i?n+t:t+n}},{key:"xhr",value:function(t,e,i,n,r){var o=new XMLHttpRequest;o.overrideMimeType("text/plain; charset=x-user-defined"),o.addEventListener("readystatechange",(function t(){4===o.readyState&&(200===o.status||304===o.status?n(o.response):r(o.status),o.removeEventListener("readystatechange",t),o=void 0)})),o.open(e,t,!0),o.send(i)}},{key:"getAv1Random",value:function(t,e){if(!t)return!1;var i=localStorage.av1PresentUid,n=t.presenterUid;localStorage.randomAv1Percent&&i==n||(localStorage.randomAv1Percent=Math.floor(1e4*Math.random()));var r=Number(localStorage.randomAv1Percent);return localStorage.av1PresentUid=t.presenterUid,r<e}},{key:"is64bitSoftware",value:function(){return-1!=navigator.userAgent.indexOf("Macintosh")||-1!=navigator.userAgent.indexOf("x64")}},{key:"isGameIdSupport265",value:function(t,e){if(t[0])return!0;var i=!1;return t[1].map((function(t){e&&e.toString()==t.toString()&&(i=!0)})),i}},{key:"unescapeHTML",value:function(t){return(t=""+t).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#39;/g,"'").replace("↵","")}},{key:"getSdkAbRandom",value:function(t){var e=localStorage.abPresentUid;localStorage.randomAbPercent&&e==t.presenterUid||(localStorage.randomAbPercent=Math.floor(1e4*Math.random()));var i=Number(localStorage.randomAbPercent);return localStorage.abPresentUid=t.presenterUid,i<B.simdAbPercentConfig}},{key:"removeUrlParam",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return t;var i=t.split("?"),n=i[0],r=i.length>1?i[1]:"";if(!r)return t;for(var o={},a=r.split("&"),s=0;s<a.length;s++)a[s]=a[s].split("="),o[a[s][0]]=a[s][1];return e.forEach((function(t){r.indexOf(t)>-1&&delete o[t]})),n+(0,p.default)(o).replace(/[\"\{\}]/g,"").replace(/\:/g,"=").replace(/\,/g,"&")}},{key:"removeUrlAllParam",value:function(t){return t?t.split("?")[0]:t}}]),t}();function A(t){return atob(t)}R.indateLocalStorage={set:function(t,e,i){var n={value:e,expirse:new Date(i).getTime()};localStorage.setItem(t,(0,p.default)(n))},get:function(t){var e=JSON.parse(localStorage.getItem(t));if(null!==e){if(!(null!=e.expirse&&e.expirse<(new Date).getTime()))return e.value;localStorage.removeItem(t)}return null},update:function(t,e){var i=JSON.parse(localStorage.getItem(t));i&&(i.value=e,localStorage.setItem(t,(0,p.default)(i)))}},R.IntMax=2147483647,R.IntMin=-2147483647,R.UintMax=4294967295;var L=R,N=new(function(){function t(){Object(v.a)(this,t),this.version=1100,this.baseSubs=10,this.uid=0,this.sGuid="",this.roomId=0,this.uuid=0,this.convertUid=0,this.appId=66,this.appid=66,this.p2pCooling=!1,this.flvTryToP2P=0}return Object(g.a)(t,[{key:"initUUId",value:function(){0===this.uuid&&(this.uuid=Number((Date.now()%1e10*1e3+(1e3*Math.random()|0))%4294967295));var t=Number(localStorage.appid);t&&(this.appid=t,E.a.warn("--- test appid "+t+" ---",this))}}]),t}()),M={SLICE_SPEED:12.5,MAX_PACKET_CNT:1e4,SWITCH_INTERVAL:10,MAX_DELAY:66e4,DEFAULT_DELAY:65535,SUBSCRIBE_TIMEOUT:1e4,PUNCH_BACK_COOLING:2e4,PUNCH_IGNORE_TIME:3e5,SUB_TIMEOUT:5e3,RESUB_TIMEOUT:3e4,STREAM_DELAY:2e3,EMULATE_DELAY:1800,MAX_DEPTH:1,PROXY_NUM:3,MAX_PEER_STREAM_NUM:8,MAX_PUSH_NUM:3,MAX_PULL_NUM:3,SLICE_DELAY:100,SLICE_LATE:50,SLICE_FAST:50,SLICE_TIMEOUT:2e3,SWITCH_DELAY:500,StreamType:{NONE:0,FORCE:1,FIXED:2,COMPETE:3,PEER:4},LeaveReason:{PING_DIF:1,RESET:2},DEL_REASON:{CHANNEL_CLOSE:1,CHANNEL_ERROR:2,NODE_LEAVE:3,SERVER_REJECT:5,PEER_ERROR:6,PEER_TIMEOUT:7,PING_TIMEOUT:8,OTHER_SID:9,EMPTY_SLICE:10,SUB_TIMEOUT:11,SUB_FAIL_TIMES:12,NODE_REJECT:13,DIF_CDNP:14,PEER_HANDLER_ERR:15},PERIOD:{UPLINK_CALC:10,CHECK_SEED:20,GET_NODE:5},SubType:{SUBSCRIBE_FORCE:0,SUBSCRIBE_NORMAL:1},LoadVideoTimeoutReason:{FLV_DISCONNECTED:0,FLV_CONNECTED:1,FLV_CONNECT_ERROR:2,FLV_RECV_DATA:3,FLV_DATA_INVALID:4,FLV_STARTPLAY:5,FLV_PLAYERROR:6,HLS_DISCONNECTED:7,HLS_LOADMANIFEST_ERROR:8,HLS_LOADMANIFEST_SUCCESS:9,HLS_LOADFRAMENT:10,HLS_LOADFRAMENT_ERROR:11,HLS_LOADFRAMENT_SUCCESS:12,HLS_PLAY_ERROR:13},SubResCode:{ACCEPT_SUBSCRIBE:0,EMPTY_UPLOAD_NUM:1,DETECT_SUBSCRIBE_CYCLE:2,EMPTY_PEER_INFO:3,SUBSCRIBE_UPLINK_NOT_ENOUGH:4,PUBLISHER_KICK_OFF:5,NOT_SUBSCRIBER:6,INVALID_SUB_STREAM:7,ACCEPT_BY_SUBSCRIBER_UPLINK:9,INVALID_STREAMID:10,SERVER_EMPTY_BW:11,PUBLISHER_LEAVE:12,DIFFERENT_VIDEO_PROXY:13,OLD_VERSION_REQ:14,INVALID_TREE_DEPTH:15,INVALID_MAX_SUBSTREAM_NUM:16,STREAM_LATE:17,DEPTH_LARGE:18,STREAM_LIMIT:19,SLICE_LARGE:20,NOT_FOUND_PKG:21,KICK_OUT:22,SELF_WORST:23,SLICE_LATE:24,SLICE_FAST:25,RESTART:26,RESET:27,DIF_BASE_SUBS:28},VIDEO_COMPETE_UID:4294967295,VIDEO_FORCE_UID:0,VIDEO_FIXED_UID:-1,VIDEO_DEFAULT_UID:-2,isProxyUid:function(t){return t===M.VIDEO_COMPETE_UID||t===M.VIDEO_FORCE_UID||t===M.VIDEO_FIXED_UID||t===M.VIDEO_DEFAULT_UID},isCompete:function(t){return t===M.VIDEO_COMPETE_UID},isForce:function(t){return t===M.VIDEO_FORCE_UID},isFixed:function(t){return t===M.VIDEO_FIXED_UID},isDefault:function(t){return t===M.VIDEO_DEFAULT_UID},isSliceJumpFromPeer:function(t,e){return e.isFromPeer&&t>0&&e.seq-t>10*M.LOST_SEQ_NUM},offerReject:{REASON_NOTSTART:1,REASON_PUNCHFAILED_CD:2,REASON_PUNCHED_FULL:3,REASON_QUOTA_EXHAUST:4,REASON_VERSION:5,REASON_DIF_LINE:6,REASON_FAIL:7,REASON_IGNORE:8,REASON_HAS_NODE:9,REASON_WAITING:10,REASON_OTHER:100},offerRejectTime:12e4,punchBackRet:{SUC:0,DIF_STREAM:1,CLOSING:2,COOLING:3,REQUEST:4,REJECT:5},restartReason:{RANGE_SEQ_MAX:1,RANGE_SEQ_LARGE:2,CDN_JUMP:3,PLAYER_NO_DATA:4,LOST_SEQ:5,CONNECT:6,WORKER_ERROR:7,MULTI_CDN:8,FLV_TO_P2P:9,PLAYER_ERROR:10,PLAYER_DISPOSE:11,LOST_SEQ_JUMP:12},turnToFlvReason:{FULL_PLAY_FAIL:1,FULL_CONNECT_TIMEOUT:2,SUB_CONNECT_TIMEOUT:3,FULL_NO_DATA:4,SUB_NO_DATA:5,P2P_ARGS_ERROR:6,P2P_COOLING:7,FLV_TO_P2P_FAIL:8,FLV_TO_P2P_FULL_STREAM_COMPLETE:9,FULL_ERROR:10,FULL_CLOSE:11,SUB_ERROR:12,SUB_CLOSE:13,RESTART_TIMES:14,SIGNAL_TIMEOUT:15,PROBE_TIMEOUT:16,PROBE_ERROR:17,NO_DATA_TIMEOUT:18,IS_NOT_FIRST_FETCH:19,VIDEO_BUFFER_EMPTY:20,PLAY_TIMEOUT:21},userProperty:{SERVER_CLOSE:1,CLIENT_CLOSE:2,BROWSER_UN_SUPPORT:3,FLASH:4,UNKNOW:5,P2P:6,FIRST_FULL_CONNECT_TIMEOUT:7,FIRST_FULL_PLAY_FAIL:8,FIRST_FULL_NO_DATA:17,RESTART_RANGE_MAX:9,RESTART_RANGE_LARGE:10,RESTART_CONNECT:11,RESTART_MUTI_CDN:12,RESTART_PLAYER_NO_DATA:13,RESTART_PLAYER_ERROR:14,SUB_NO_DATA:15,SUB_CONNECT_TIMEOUT:16,P2P_ARGS_ERROR:18,FLV_TO_P2P:19,LOST_SEQ:20,P2P_COOLING:21,IS_NOT_FIRST_FETCH:22,VIDEO_BUFFER_EMPTY:23},h265TurnToH264Reason:{DECODE_ERROR:1,RENDER_ERROR:2},pauseReason:{FLV_NO_BUFF:1,FLV_UNKNOW_PAUSE:2,FLV_NET_SLOW:3,P2P_NO_BUFF:4,P2P_UNKNOW_PAUSE:5,P2P_FULL_LOADER_NO_DATA:10,P2P_FULL_LOADER_CONNECT_FAIL:11,P2P_SUB_LOADER_NO_DATA:12,P2P_SUB_LOADER_CONNECT_FAIL:13,FLV_NO_DATA:14,P2P_NO_SLICE:15,P2P_RESEND_SKIP_FRAME:20,P2P_RESEND_TOOLATE:21,P2P_RESEND_TIMEOUT:22,P2P_RESEND_ERROR:23,P2P_RESEND_MISSING:24,P2P_DTS_JUMP:25,P2P_NET_SLOW:26},DataType:{SIGNALLING:0,PING:1,SLICE:2},LOST_SEQ_NUM:4e3,BAD_REASONS:{UNKNOW:100,SUB_LINK:1,DOWN_LINK:2,RANGE_MISS:3,RANGE_RECV_TIMEOUT:4,FRAME_SEQ_LOST:5,BUFFER_JUMP:6,TIMESTAMP_JUMP:7,FRAME_VIDEO_JUMP:8,FRAME_AUDIO_JUMP:9,FRAME_DROP:10,PERFORMANCE:11},initConfig:function(t,e){for(var i=e.coderates,n=null,r=0;r<i.length;r++)if(n=i[r],t>Number(n[0])){M.PROXY_NUM=Number(n[1]),M.SLICE_DELAY=Number(n[2]),M.MAX_PUSH_NUM=Number(n[3]),M.MAX_PULL_NUM=Number(n[4]),M.SLICE_LARGE=Number(n[5]);break}M.MAX_PEER_STREAM_NUM=Number(e.maxPeerStreamNum)||8;var o=M.SLICE_SPEED*N.baseSubs*(t/1e3);M.SLICE_LATE=parseInt(o*((Number(e.sliceLate)||1e3)/1e3)),M.SLICE_FAST=parseInt(o*((Number(e.sliceFast)||2e3)/1e3)),M.STREAM_DELAY=Number(e.badDelay)||2e3,M.EMULATE_DELAY=Number(e.emuteDelay)||1800,M.RESUB_TIMEOUT=Number(e.resubTime)||3e4,M.SLICE_TIMEOUT=Number(e.sliceTimeout)||2e3,M.SWITCH_DELAY=Number(e.switchDelay)||500},HLS_LOAD_TYPE:{FETCH:1,XHR:2},LATENCY_MODEL_TYPE:{NONE:0,CONTROL_MODEL:2,RTC_MODEL:4,TOPSPEED_MODEL:99},PLATFORM_TYPE:{web:100,mini_app:102,wap:103,huya_liveshareh5:104,adr:2,ios:3},PLATFORM_TYPE_NAME:{web:"web",wap:"wap"},H5_ERROR_CODE:{VIDEO_ERROR:-1e3,PLAY_TIMEOUT:-1001},VISIBILITY_STATE:{VISIBLE:"visible",HIDDEN:"hidden",PRERENDER:"prerender"},PCDN_OPEN_BUFFER:8e3,PCDN_CLOSE_BUFFER:5e3,PCDN_COOL_TIME:6e4},U=M,D=i(4),B=new(function(){function t(){Object(v.a)(this,t),this.pushGop=!1,this.jitBufLen=3e3,this.jitMaxBufLen=4e3,this.jitMinBufLen=2e3,this.resendPlayThreshold=1800,this.mutilLinkConfig=[[0,4e3],[8,4]],this.resendModeConfig=[[0,4e3],[1,2]],this.resendMode=1,this.resendWaitLimitList={500:3e3,2e3:3e3,4e3:3e3,8e3:3e3,1e4:3e3,12e3:3500,2e4:5e3},this.noUrgentResentBuffer=2e3,this.latency=[[3e3,2e3,4e3,2e3],[1e3,500,1500,1500]],this.jitTest=[2e3,5e3,1500],this.jitPid=[],this.hlsJitCfg=[6e3,4e3,8e3],this.hlsUseFetch=100,this.obsUseFull=0,this.obsFullRatio=1,this.obsBgRatio=0,this.obsFaceRatio=0,this.obsSrAudio=1,this.obsFrame=0,this.obsSyncTs=50,this.obsSeekTs=200,this.obsSeekJumpTs=0,this.obsRateTs=10,this.baseSubs=10,this.urgentResend=1,this.urgentResendAudio=1,this.crossCdn=0,this.crossLineSub="",this.p2pWssLines="all",this.connectTotalTime=6e3,this.connectTimeout=2e3,this.connectPcdnTimeout=4e3,this.flowTimeout=2e3,this.flowRetryTimes=3,this.renderTimeout=4e3,this.noDataTimeout=3e3,this.noPcdnDataTimeout=1e3,this.testResender=0,this.maxResendTs=3e3,this.minResendTs=200,this.maxResendTimes=2,this.resendGapTs=400,this.resendMinCnt=10,this.resendDelayTs=400,this.patchSubTs=250,this.http2Channel="",this.deleteH264Aud=[],this.useChangeRate=[],this.freeBufferBitrate=1e4,this.needCooling=1,this.needQueue=1,this.queueTime=3e3,this.punchedCoolingTime=3e4,this.delayCloseNum=200,this.punchTimeout=1e6,this.maxPunchedCnt=15,this.maxPunchedCntMore=30,this.maxNodeCnt=30,this.punchBackCooling=2e4,this.punchIgnoreTime=3e5,this.coefficient=8,this.trySubNum=5,this.trySubTime=5e3,this.fastTime=5e3,this.lostSeqTime=6,this.sliceLate=500,this.sliceFast=2e3,this.sliceConstraints=6e3,this.badDelay=2e3,this.emuteDelay=1800,this.switchDelay=500,this.aliveTimeout=1e3,this.resubTime=3e4,this.sliceTimeout=2e3,this.maxPeerStreamNum=7,this.maxPeerStreamNum20M=4,this.maxUplinkBw=2e3,this.closeUids=[],this.closeSub=0,this.closeSubRooms=[],this.flvEmptyAudioFrame=1,this.sendHeartBeatAlone=0,this.signalNoCdnp=[],this.switchSeamLessLine=0,this.isProduce=!0,this.coderates=[[15e3,1,8e3,5,5,230,1,20],[8e3,1,4e3,5,5,230,5,10],[6e3,1,4e3,5,5,170,5,10],[4e3,0,4e3,5,5,120,5,10],[3e3,0,4e3,5,5,80,5,10],[0,0,4e3,5,5,50,5,10]],this.seaSubNums=[],this.swapdomain={},this.iP2PType=2,this.danmuZipPids=[],this.randomPercent=1e4,this.frameBufLen=[2e3,2e3,1500,2500],this.bufferMode=2,this.bufferConfig=[],this.urgentResendTime=1500,this.forceSkipFrameTime=3900,this.frameTimeout=2500,this.p2pBuffer=[3500,2500,4500],this.jitCfg=[[0,3e3,2e3,4e3]],this.jitCfgPid=[],this.jitJump=[2e4,8e3],this.jitLowLatency=2e3,this.jitLow=[1500,1e3,2e3],this.safariPlayDelay=500,this.safariFirstLoad=!0,this.jitAB=[],this.waitAudio=1,this._isFrameBuffer=-1,this.isSubUseHttps=1,this.pcdnSubsConfig=[1,1,1],this.notUsePcdnUids=[],this.isPcdnReportErr=1,this.isMute=1,this.isAutoNoPicture=0,this.playbackrateMin=.95,this.playbackrateMax=1.05,this.pcdnFlv=1,this.isAiP2PToFlv=1,this.randomAIP2PFlvPercent=Math.floor(1e4*Math.random()),this.aiRandomPercent=5e3,this.aiABRandomPercent=2e3,this.aiUids=[],this.aiBlackUids=[],this.aiBlackLines=[],this.aiBlack2Uids=[],this.isAutoH265=0,this.renderDelta=300,this.h265Config=[[[2e3,4e3],[4e4,4e4]],[4e3,2e3,500],75,[[2e3,4e3],[3,4]],30,3,[!0,!0]],this.h265Config2=[6,1],this.h265BlackUids=[],this.h265NoPushVideoDis=2e4,this.randomH265Percent=Math.floor(1e4*Math.random()),this.h265PercentConfig=1e5,this.enableAiMosaic=0,this.aiMosaicUis=[],this.aiRequestInterval=5e3,this.aiBathRequestInterval=3e4,this.aiBufferEmptyRequestInterval=3e5,this.playerdata={profileP2POpt:""},this.isCommonAb=1,this.aiP2PFlvConfig=[5e3,5],this.closePcdnBitrate=8e3,this.closePcdn500=500,this.closePlayBackRateCfg=[[90,91,92,93,96],0],this.setVideoCTCfg=[-100,1500,1e4],this.sliceQuantityPerSecond=1e3,this.useNewPloy=1,this.minPlayout=300,this.maxPlayout=500,this.playoutUids=[],this.isMuteAct=1,this.useAV1=!1,this.useAV1PidList=[],this.useAV1LinesAndBitRates=[[],0],this.isClosePlayBackRate=1,this.pcdnAbConnectData=[0,[1e3,2e3,3e3,4e3]],this.isUseWebWorkerTick=1,this.isForceUseWorker=0,this.platform=U.PLATFORM_TYPE_NAME.web,this.av1PercentConfig=5e3,this.isConfigSupportH265=1,this.abUseAv1=1,this.platform=U.PLATFORM_TYPE_NAME.web,this.h265GameIds=[!0,[]],this.isNoVideoReport=0,this.simdAbPercentConfig=5e3,this.isH265Filter4MCfg=[1,1,1,1080],this.useNewParser=1,this.maxGop=3e3,this.autoCfg={close:0,closeLines:[],closePids:[],upGap:0,downGap:15e3,backGap:15e3,upPer:.8,downPer:.3,downNowPer:.2,waitPer:.8,downBitrate:2e3,slow:.85,bufCnt:10,sucPer:.9,sampleTime:200,minTime:1e4,maxTime:3e5,sysTime:1e4,evalTime:300,highRate:4e3,badBuf:2e3,badCnt:3,badS:[1e4,3],badL:[6e4,5],noRederTime:12e4,monitorTime:15e3},this.continueBufferDeltaStart=6e3,this.continueBufferDeltaEnd=3e3,this.autoBufferScore=1e3,this.autoConnectScore=500,this.autoFirstScore=500,this.autoPtsScore=500,this.force_auto_count=9999,this.force_auto_effective_time=2592e5,this.autoReportCfg=[1,3,0,1],this.autoReportSea=0,this.isWebAutoAB=0,this.maxBitRate=500,this.recSysExpiredTime=6e4,this.autoDownTimer=0,this.autoDownMaxBitrate=1,this.minFps=24,this.dropTime=0,this.perfBitrate=4e3,this.perfCnt=1,this.perfBuf=2e3,this.p2p302Config=[[[6,1,0,1]],1],this.pushFramePloy=1,this.frameAblePloy=1,this.closeBigAudio=0,this.sdkCloseAutoAi=0,this.closeP2PConfig=[1,1],this.enableAutoCloseP2P=1,this.closeNimoAuto=0,this.isCloseVodPcdn=0}return Object(g.a)(t,[{key:"initByBitrate",value:function(t){if(this.maxPeerStreamNum=t>=1e4?this.maxPeerStreamNum20M:7,this.resendMode=1,this.resendModeConfig&&this.resendModeConfig[0].length===this.resendModeConfig[1].length)for(var e=this.resendModeConfig[0].length-1;e>=0;e--)if(t>=this.resendModeConfig[0][e]){this.resendMode=this.resendModeConfig[1][e];break}}},{key:"isAutoClose",value:function(t,e){if(1===this.autoCfg.close||-1!==this.autoCfg.closeLines.indexOf(Number(t)))return!0;for(var i=this.autoCfg.closePids.length,n=0;n<i;n++){var r=this.autoCfg.closePids[n];if(Number(r.pid)===Number(e))return!r.hasOwnProperty("lines")||-1!==r.lines.indexOf(t)}return!1}},{key:"setLowLatency",value:function(t){t&&t.setJitter(this.jitLow[0],this.jitLow[1],this.jitLow[2])}},{key:"setJitterCfg",value:function(t,e,i){this.setJitterAB(t,e,i)||this.setJitterByPid(t,e,i)||this.setJitterByRate(t,i,this.jitCfg)}},{key:"setJitterAB",value:function(t,e,i){if(this.jitAB.length>0){var n=this.jitAB[0],r=this.jitAB[1],o=this.jitAB[2];if("all"===n||-1!==n.indexOf(e+"")){var a=this.getGroupNum(o.length);return E.a.log("setJitterAB name=".concat(r," group=").concat(a)),this.setJitterByRate(t,i,o[a]),!0}}return!1}},{key:"getGroupNum",value:function(t){for(var e=1e4*Math.random(),i=t-1;i<t;i--)if(e>1e4/t*i)return i;return 0}},{key:"setJitterByPid",value:function(t,e,i){for(var n=0;n<this.jitCfgPid.length;n++){var r=this.jitCfgPid[n];if(-1!==r[0].indexOf(e+""))return E.a.log("setJitterByPid"),this.setJitterByRate(t,i,r[1]),!0}return!1}},{key:"setJitterByRate",value:function(t,e,i){for(var n=0;n<i.length;n++){var r=i[n];if(e>=r[0])return t&&t.setJitter(r[1],r[2],r[3]),!0}return!1}},{key:"init",value:function(t){if(t){(0,P.default)(this,t),E.a.group("Configs");var e=["Configs:"];for(var i in this){var n=this[i];"string"==typeof n&&("pushGop"==i?n=!!Number(n):"coderates"==i||"testCoderates"==i||"swapdomain"==i?(n=n.replace(/[↵\s+\n]/gm,""),n=JSON.parse(n)):"p2pWssLines"!=i&&"http2Channel"!=i&&"crossLineSub"!=i&&(n=Number(n))),this[i]=n,"object"==(void 0===n?"undefined":(0,k.default)(n))&&(n=(0,p.default)(n)),i=L.padStrLen(i,18,!1),e.push("\t"+i+" => "+n)}E.a.log(e.join("\n")),E.a.groupEnd(),E.a.log("Config",this)}}},{key:"setAiP2PToFlv",value:function(t){this.isAiP2PToFlv=t}},{key:"setUseAV1",value:function(t){var e=this.useAV1PidList,i=t.presenterUid,n=!1,r=this.useAV1LinesAndBitRates[0],o=this.useAV1LinesAndBitRates[1];e.forEach((function(t){i&&t.toString()==i.toString()&&(n=!0)})),n&&(r.forEach((function(e){e==t.lineType&&(n=!1)})),t.curBitrate<Number(o)&&(n=!1)),this.useAV1=n,n&&(this.autoCfg.close=1)}},{key:"isCloseP2P",value:function(t){return t&&this.closeUids&&-1!==this.closeUids.indexOf(t)}},{key:"getEnableAiMosaic",value:function(t){return!!this.enableAiMosaic}},{key:"setMute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isMute=t}},{key:"setUseAuto",value:function(t){t&&(this.isConfigSupportH265=0)}},{key:"getEnableJumpBuffer",value:function(){var t=D.a.version.major,e=this.closePlayBackRateCfg.length>0&&(1==this.closePlayBackRateCfg[1]||-1!=this.closePlayBackRateCfg[0].indexOf(t));return D.a.chrome&&e}},{key:"isFrameBuffer",get:function(){return 2}}]),t}()),F=i(3),x="value",j="str",V="p2p",G="oexp",H="stream_url",W="original_bitrate",q="browser_kernel",K="browser_kernel_version",Y="os_name",z="os_version",J="render_info",Q="sphd_type",X="dpi",Z="cdnip",$="act_load_type",tt="player_type",et="live_type",it="stream_type",nt="cdn_sip",rt="pcdn_origin",ot="sub_pcdn_state",at="flv_pcdn_state",st="h265",ut="v_decodec",ct="v_recv_frames",lt="v_to_decode_frames",ht="v_decode_frames",dt="v_play_frame",ft="v_to_play_frames",pt="sub_change_state",mt="mute_data",yt="video_min_buf",vt="hardware_concurrency",gt="auto_user_tags",_t="video_bad_quality_old",St="video_bad_quality",wt="video_bad_reason",bt="user_property",It="heart_type",Tt="signal_user_property",Pt="video_h265_bad_quality",Et="auto_u_reason",kt="auto_down_reason",Rt="dispatch_id",Ct="get_pcdn_url_total_cnt",Ot="use_pcdn",At={name:"link_sta",CONNECT_SUC:"cns",HAS_DATA:"hd",DATA_ENOUGH:"de",AUDIO_CONFIG:"acf",VIDEO_CONFIG:"vcf",VIDEO_IFRAME:"vif",VIDEO_FRAME:"vf",AUDIO_FRAME:"af",NO_SLICE_DATA:"nsd",H265:"h265"},Lt="link_sam",Nt="ad",Mt="vd",Ut="ar",Dt="vr",Bt="vwp",Ft="vbet",xt="vbec",jt="sp",Vt="h265_sam",Gt="cdn_ip",Ht="cdn_total_bw",Wt="buffer_length",qt="play_delay",Kt="video_block_count",Yt="video_block_duration",zt="pcdn_total_bw",Jt="get_stream_cnt",Qt="get_stream_error_cnt",Xt="has_punch_nodes",Zt="forward_reject_cnt",$t="frame_buffer_delay",te="range_sip_suc_cnt",ee="range_sip_dif_cnt",ie="range_req_cnt",ne="range_rsp_cnt",re="range_connect_time",oe="range_rsp_time",ae="updown_info",se="hls_info",ue="m3u8_cnt",ce="m3u8_suc_cnt",le="m3u8_fail_cnt",he="m3u8_timeout_cnt",de="ts_cnt",fe="frame_info",pe="sub_info",me="punch_info",ye="punch_back_ret",ve="resend_info",ge="forcesub_reason",_e="sub_return",Se="switch_return",we="last_return",be="nonode_return",Ie="auto_info",Te="p2p_tcp_type",Pe="p2p_tcp_state",Ee="pcdn_bw_data",ke="ai_control_data",Re="ai_p2p_cnt",Ce="ai_flv_cnt",Oe="ai_p2p_timeout_cnt",Ae="ai_flv_timeout_cnt",Le="ai_p2p_error_cnt",Ne="ai_flv_error_cnt",Me="ai_p2p_switch_cnt",Ue="ai_flv_switch_cnt",De="ai_p2p_not_switch_cnt",Be="ai_flv_not_switch_cnt",Fe="ai_flv_error_switch_cnt",xe="ai_flv_error_not_switch_cnt：flv",je="ai_start_p2p_cnt",Ve="ai_start_flv_cnt",Ge="act_type",He="connect_video_ts",We="recv_video_ts",qe="first_video_pkg_ts",Ke="first_video_iframe_ts",Ye="first_video_render_ts",ze="video_played_ts",Je="video_load_ts",Qe="load_m3u8_ts",Xe="first_frag_load_ts",Ze="first_frag_loaded_ts",$e="first_frag_size",ti="h265_status",ei="vod_videosourceid",ii="vod_ab_switch",ni="repeat_pic_ts",ri=function(){function t(e){var i=e.eventEmiter,n=e.stat;Object(v.a)(this,t),this.eventEmiter=i,this.stat=n,this.isSendLoadTime=!1,this.isSendH265=!1,this.hasP2P=0,this.restartReason=-1,this.restartTimes=0,this.turnToFlvReason=-1,this.turnToFlvTimes=0,this.httpError=!1,this.busiSource="",this.isSendM3u8LoadTime=!1}return Object(g.a)(t,[{key:"sendCdnTime",value:function(t,e,i){if(!this.isSendLoadTime)if(this.isSendLoadTime=!0,e){var n=Math.max(0,t.connectVideoTime-t.startTime),r=t.firstVideoPkgTime-t.connectVideoTime,o=t.firstIFrameTime1-t.connectVideoTime,a=t.firstIFrameTime2-t.firstIFrameTime1,s=t.firstRenderTime-t.firstIFrameTime2,u=t.onPlayTime-t.firstRenderTime,c=t.recvDataTime-t.startTime,l=(t.onPlayTime,t.startTime,t.firstP2POnDataTime-t.startTime);l=l<0?0:l;var h=0;t.firstP2PIframeTime>0&&(h=(h=t.firstP2PIframeTime-t.startTime)<0?0:h);var d=[t.hyPlayerLoadTs,c,n,0,0,i,0,0,0,l,h],f=[this.stat.createAct(He,{value:[n]}),this.stat.createAct(qe,{value:[r]}),this.stat.createAct(Ke,{value:[o]}),this.stat.createAct("video_iframe_ts",{value:[a]}),this.stat.createAct(Ye,{value:[s]}),this.stat.createAct(ze,{value:[u]}),this.stat.createAct(Je,{value:d})];this.sendMetrics(f)}else{var p=t.getVPTime-t.startTime,m=Math.max(0,t.connectVideoTime-t.getVPTime),y=t.loginTime-t.connectVideoTime,v=t.firstVideoPkgTime-t.loginTime,g=t.firstIFrameTime-t.firstVideoPkgTime,_=t.firstRenderTime-t.firstIFrameTime,S=t.onPlayTime-t.firstRenderTime,w=t.onPlayTime-t.startTime,b=[this.stat.createAct("video_get_vp_ts",{value:[p]}),this.stat.createAct(He,{value:[m]}),this.stat.createAct("video_login_ts",{value:[y]}),this.stat.createAct(qe,{value:[v]}),this.stat.createAct(Ke,{value:[g]}),this.stat.createAct(Ye,{value:[_]}),this.stat.createAct(ze,{value:[S]}),this.stat.createAct(Je,{value:[w]})];this.sendMetrics(b)}}},{key:"sendFlvTime",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if((!this.isSendLoadTime||r)&&(this.isSendLoadTime=!0,!(t>1e4||e>1e4))){var l=0;a&&(l+=1),o&&(l+=2),this.stat.setComDim($,l);var h=[t,i,e,o,a,s,0,0,0,u,c],d=[this.stat.createAct(Je,{value:h}),this.stat.createAct(He,{value:[e]}),this.stat.createAct(We,{value:[i,n]})];this.sendMetrics(d)}}},{key:"sendWebRtcTime",value:function(t,e,i,n,r){this.isSendLoadTime=!0,this.stat.setActDim("p2p","3");var o=[this.stat.createAct(Je,{value:[t,0,0,0,0,e,i,n,r]})];this.sendMetrics(o)}},{key:"sendHlsTime",value:function(t,e,i,n,r,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;if(!this.isSendLoadTime){var c=0;if(s&&(c+=1),a&&(c+=2),this.stat.setComDim($,c),this.isSendLoadTime=!0,!(e>1e4||i>1e4||r>1e4)){var l=[this.stat.createAct(Je,{value:[e,t,0,a,s,r,u],str:[this.busiSource]}),this.stat.createAct(Xe,{value:[n,t]}),this.stat.createAct(Ze,{value:[r,t,u]}),this.stat.createAct($e,{value:[o,t]})];i>0&&!this.isSendM3u8LoadTime&&(l.push(this.stat.createAct(Qe,{value:[i,t]})),this.isSendM3u8LoadTime=!0),this.sendMetrics(l)}}}},{key:"sendM3u8LoadedTime",value:function(t,e){if(!(this.isSendM3u8LoadTime||e>1e4)){this.isSendM3u8LoadTime=!0;var i=[this.stat.createAct(Qe,{value:[e,t]})];this.sendMetrics(i)}}},{key:"setBusiSource",value:function(t){this.busiSource=t}},{key:"sendMP4Time",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.loadTime;if(!(e>1e4)){var i=[this.stat.createAct(Je,{value:[e],str:[this.busiSource]})];this.sendMetrics(i)}}},{key:"sendMetrics",value:function(t){this.eventEmiter.trigger(T.DATA_METRIC2,t)}},{key:"sendOldMetrics",value:function(t){this.eventEmiter.trigger(T.DATA_METRIC,t)}}]),t}();ri.METRIC={VIDEO_FLOW_LINE:"video.flow.line",VIDEO_FLOW_P2P:"video.flow.p2p",VIDEO_BAD_QUALITY_RATIO:"video.video_bad_quality_ratio",WEB_HLS_PLAY_VIDEO_RATIO:"web.hls.play_video_ratio",WEB_HLS_PLAY_SUC_RATIO:"web.hls.play_suc_ratio",WEB_P2P_PLAY_RATIO:"web.p2p.play_ratio",WEB_P2P_PUNCH:"web.p2p.punch",WEB_P2P_BW_P2P_VALID:"web.p2p.bw_p2p_valid",WEB_P2P_BW_P2P_REPEAT:"web.p2p.bw_p2p_repeat",WEB_P2P_BW_P2P_TOTAL:"web.p2p.bw_p2p_total",WEB_P2P_BW_CDN_VALID:"web.p2p.bw_cdn_valid",WEB_P2P_BW_CDN_REPEAT:"web.p2p.bw_cdn_repeat",WEB_P2P_BW_CDN_TOTAL:"web.p2p.bw_cdn_total",WEB_P2P_BW_RANGE_VALID:"web.p2p.bw_range_valid",WEB_P2P_BW_RANGE_TOTAL:"web.p2p.bw_range_total",WEB_P2P_PLAY_FAIL:"web.p2p.play_fail",WEB_P2P_LOAD_RATIO:"web.p2p.load_ratio",WEB_P2P_CDN_RESTART:"web.p2p.cdn_restart",WEB_P2P_TCP_NO_SLICE:"web.p2p.tcp_no_slice",WEB_P2P_TCP_OPEN_TIME:"web.p2p.tcp_open_time",WEB_P2P_HTTP_CODE:"web.p2p.http_code_",WEB_P2P_TCP_TIMEOUT:"web.p2p.tcp_timeout",WEB_H265:"web.h265",SDK_P2P_TCP:"sdk.p2p.tcp",SDK_VIDEO_LOGIN_SUC:"sdk.video.login_suc",SDK_P2P_COOLING:"sdk.p2p.cooling",SDK_P2P_SERVER_OPEN:"sdk.p2p.server_open",SDK_P2P_USER_PROPERTY:"sdk.p2p.user_property",VIDEO_VIDEO_BAD_QUALITY_5M_RATIO:"video.video_bad_quality_5m_ratio",VIDEO_VIDEO_LOAD_ERROR:"video_load_error",RECV_DANMU_CARTON:"recv_danmu_carton",SDK_P2P_DETAILS:"sdk.p2p.details",SDK_P2P_FORCE_REASON:"sdk.p2p.force_reason",SDK_P2P_DEFAULT_REASON:"sdk.p2p.default_reason",SDK_P2P_VALID_RET:"sdk.p2p.valid_ret",SDK_P2P_GET_NODE:"sdk.p2p.get_node",WEB_USER:"web.user"},ri.INTERVAL={SDK_VIDEO_QUALITY:"sdk.video.quality",SDK_VIDEO_QUALITY_5M:"sdk.video.quality_5m",SDK_CALC_FLOW:"sdk.calc.flow",SDK_P2P_TCP:"sdk.p2p.tcp",SDK_P2P_FLOW:"sdk.p2p.flow",SDK_P2P_PUNCH:"sdk.p2p.punch",SDK_P2P_SUB:"sdk.p2p.sub",SDK_P2P_RESEND:"sdk.p2p.resend",SDK_P2P_DELAY:"sdk.p2p.resend",SDK_P2P_OTHER:"sdk.p2p.other"},ri.TRIGGER={SDK_HLS_PLAY:"sdk.hls.play",SDK_HLS_LOAD:"sdk.hls.load",SDK_MSE_ERROR:"sdk.mse.error",SDK_P2P_LOAD:"sdk.p2p.load",SDK_P2P_LOAD_SAMPLE:"sdk.p2p.load_sample",SDK_P2P_RESTART:"sdk.p2p.restart",SDK_WEB_H265:"sdk.web.h265"};var oi=ri,ai=navigator.userAgent,si=new(function(){function t(){Object(v.a)(this,t),this.matches=null,this.versionFuncs=null,this.device="",this.language="",this.browser="",this.version={major:0,full:""},this.kernel="",this.kernelVersion=0,this.os="",this.osVersion="",this.genBrowserInfo()}return Object(g.a)(t,[{key:"getMatches",value:function(){var t=ai;this.matches={Trident:t.indexOf("Trident")>-1||t.indexOf("NET CLR")>-1,Presto:t.indexOf("Presto")>-1,WebKit:t.indexOf("AppleWebKit")>-1,Gecko:t.indexOf("Gecko/")>-1,KHTML:t.indexOf("KHTML/")>-1,Safari:t.indexOf("Safari")>-1,Chrome:t.indexOf("Chrome")>-1||t.indexOf("CriOS")>-1,IE:t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1,Edge:t.indexOf("Edge")>-1||t.indexOf("Edg/")>-1,Firefox:t.indexOf("Firefox")>-1||t.indexOf("FxiOS")>-1,"Firefox Focus":t.indexOf("Focus")>-1,Chromium:t.indexOf("Chromium")>-1,Opera:t.indexOf("Opera")>-1||t.indexOf("OPR")>-1,Vivaldi:t.indexOf("Vivaldi")>-1,Yandex:t.indexOf("YaBrowser")>-1,Arora:t.indexOf("Arora")>-1,Lunascape:t.indexOf("Lunascape")>-1,QupZilla:t.indexOf("QupZilla")>-1,"Coc Coc":t.indexOf("coc_coc_browser")>-1,Kindle:t.indexOf("Kindle")>-1||t.indexOf("Silk/")>-1,Iceweasel:t.indexOf("Iceweasel")>-1,Konqueror:t.indexOf("Konqueror")>-1,Iceape:t.indexOf("Iceape")>-1,SeaMonkey:t.indexOf("SeaMonkey")>-1,Epiphany:t.indexOf("Epiphany")>-1,360:t.indexOf("QihooBrowser")>-1||t.indexOf("QHBrowser")>-1,"360EE":t.indexOf("360EE")>-1,"360SE":t.indexOf("360SE")>-1,UC:t.indexOf("UCBrowser")>-1||t.indexOf(" UBrowser")>-1||t.indexOf("UCWEB")>-1,QQBrowser:t.indexOf("QQBrowser")>-1,QQ:t.indexOf("QQ/")>-1,Baidu:t.indexOf("Baidu")>-1||t.indexOf("BIDUBrowser")>-1||t.indexOf("baidubrowser")>-1||t.indexOf("baiduboxapp")>-1||t.indexOf("BaiduHD")>-1,Maxthon:t.indexOf("Maxthon")>-1,Sogou:t.indexOf("MetaSr")>-1||t.indexOf("Sogou")>-1,Liebao:t.indexOf("LBBROWSER")>-1||t.indexOf("LieBaoFast")>-1,"2345Explorer":t.indexOf("2345Explorer")>-1||t.indexOf("Mb2345Browser")>-1||t.indexOf("2345chrome")>-1,"115Browser":t.indexOf("115Browser")>-1,TheWorld:t.indexOf("TheWorld")>-1,XiaoMi:t.indexOf("MiuiBrowser")>-1,Quark:t.indexOf("Quark")>-1,Qiyu:t.indexOf("Qiyu")>-1,Wechat:t.indexOf("MicroMessenger")>-1,WechatWork:t.indexOf("wxwork/")>-1,Taobao:t.indexOf("AliApp(TB")>-1,Alipay:t.indexOf("AliApp(AP")>-1,Weibo:t.indexOf("Weibo")>-1,Douban:t.indexOf("com.douban.frodo")>-1,Suning:t.indexOf("SNEBUY-APP")>-1,iQiYi:t.indexOf("IqiyiApp")>-1,DingTalk:t.indexOf("DingTalk")>-1,Huawei:t.indexOf("HuaweiBrowser")>-1||t.indexOf("HUAWEI/")>-1||t.indexOf("HONOR")>-1,Vivo:t.indexOf("VivoBrowser")>-1,Windows:t.indexOf("Windows")>-1,Linux:t.indexOf("Linux")>-1||t.indexOf("X11")>-1,"Mac OS":t.indexOf("Macintosh")>-1,Android:t.indexOf("Android")>-1||t.indexOf("Adr")>-1,HarmonyOS:t.indexOf("HarmonyOS")>-1,Ubuntu:t.indexOf("Ubuntu")>-1,FreeBSD:t.indexOf("FreeBSD")>-1,Debian:t.indexOf("Debian")>-1,"Windows Phone":t.indexOf("IEMobile")>-1||t.indexOf("Windows Phone")>-1,BlackBerry:t.indexOf("BlackBerry")>-1||t.indexOf("RIM")>-1,MeeGo:t.indexOf("MeeGo")>-1,Symbian:t.indexOf("Symbian")>-1,iOS:t.indexOf("like Mac OS X")>-1,"Chrome OS":t.indexOf("CrOS")>-1,WebOS:t.indexOf("hpwOS")>-1,Mobile:t.indexOf("Mobi")>-1||t.indexOf("iPh")>-1||t.indexOf("480")>-1,Tablet:t.indexOf("Tablet")>-1||t.indexOf("Pad")>-1||t.indexOf("Nexus 7")>-1},this.matches.Mobile?this.matches.Mobile=!(t.indexOf("iPad")>-1):this.is360()&&(this.mime("type","application/gameplugin")||navigator&&void 0!==navigator.connection&&void 0===navigator.connection.saveData?this.matches["360SE"]=!0:this.matches["360EE"]=!0),this.matches.Baidu&&this.matches.Opera?this.matches.Baidu=!1:this.matches.iOS&&(this.matches.Safari=!0),window.chrome&&(window.chrome.adblock2345||window.chrome.common2345)&&(this.matches["2345Explorer"]=!0)}},{key:"genBrowserInfo",value:function(){this.getMatches();var t,e={kernel:["WebKit","Trident","Gecko","Presto","KHTML"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","XiaoMi","Vivo","360","360SE","360EE","UC","QQBrowser","QQ","Huawei","Baidu","Maxthon","Sogou","Liebao","2345Explorer","115Browser","TheWorld","Quark","Qiyu","Wechat","WechatWork","Taobao","Alipay","Weibo","Douban","Suning","iQiYi","DingTalk"],os:["Windows","Linux","Mac OS","Android","HarmonyOS","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet"]};for(var i in this.device="PC",this.language=((t=(navigator.browserLanguage||navigator.language).split("-"))[1]&&(t[1]=t[1].toUpperCase()),t.join("_")),e)for(var n=0;n<e[i].length;n++){var r=e[i][n];this.matches[r]&&(this[i]=r)}this.getOSVersion(),this.getBrowserVersion(),this.amendSpecialCase()}},{key:"getOSVersion",value:function(){var t=ai,e={Windows:function(){var e=t.replace(/^Mozilla\/\d.0 \(Windows NT ([\d.]+)[;)].*$/,"$1");return{10:"10",6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[e]||e},Android:function(){return t.replace(/^.*Android ([\d.]+);.*$/,"$1")},HarmonyOS:function(){return{10:"2"}[t.replace(/^Mozilla.*Android ([\d.]+)[;)].*$/,"$1")]||""},iOS:function(){return t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return t.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return t.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return t.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return t.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};this.osVersion="",e[this.os]&&(this.osVersion=e[this.os](),this.osVersion==t&&(this.osVersion=""))}},{key:"getBrowserVersion",value:function(){var t=ai;if(this.versionFuncs={Safari:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return t.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return t.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return t.replace(/^.*Edge\/([\d.]+).*$/,"$1").replace(/^.*Edg\/([\d.]+).*$/,"$1")},Firefox:function(){return t.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return t.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return t.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return t.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return t.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return t.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return t.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return t.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return t.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return t.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return t.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return t.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return t.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return t.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return t.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return t.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){return{86:"13.0",78:"12.0",69:"11.0",63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[t.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"360EE":function(){return{86:"13.0",78:"12.0",69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[t.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},Maxthon:function(){return t.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return t.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return t.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return t.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1").replace(/^.*baiduboxapp\/([\d.]+).*$/,"$1")},UC:function(){return t.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return t.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},Liebao:function(){var e="";t.indexOf("LieBaoFast")>-1&&(e=t.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1"));var i=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e||{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[i]||""},"2345Explorer":function(){return{69:"10.0",55:"9.9"}[navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||t.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1").replace(/^.*Mb2345Browser\/([\d.]+).*$/,"$1")},"115Browser":function(){return t.replace(/^.*115Browser\/([\d.]+).*$/,"$1")},TheWorld:function(){return t.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return t.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Vivo:function(){return t.replace(/^.*VivoBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return t.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return t.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return t.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},WechatWork:function(){return t.replace(/^.*wxwork\/([\d.]+).*$/,"$1")},Taobao:function(){return t.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return t.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return t.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return t.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return t.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return t.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")},DingTalk:function(){return t.replace(/^.*DingTalk\/([\d.]+).*$/,"$1")},Huawei:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1").replace(/^.*HuaweiBrowser\/([\d.]+).*$/,"$1")}},this.versionFuncs[this.browser]){var e=this.versionFuncs[this.browser]();e!==t&&(this.version.major=parseInt(e),this.version.full=e)}}},{key:"amendSpecialCase",value:function(){var t=ai;if("Chrome"==this.browser&&t.match(/\S+Browser/)){this.browser=t.match(/\S+Browser/)[0];var e=t.replace(/^.*Browser\/([\d.]+).*$/,"$1");this.version.major=parseInt(e),this.version.full=e}if("Firefox"!=this.browser||!window.clientInformation&&window.u2f||(this.kernel=this.browser,this.kernelVersion=this.version.major,this.browser+=" Nightly"),"Edge"==this.browser)this.version.major>75?(this.kernel="Chrome",this.kernelVersion=parseInt(this.versionFuncs.Chrome())):(this.kernel="EdgeHTML",this.kernelVersion=0);else if(this.matches.Chrome&&"WebKit"===this.kernel&&parseInt(this.versionFuncs.Chrome())>27)this.kernel="Chrome",this.kernelVersion=parseInt(this.versionFuncs.Chrome());else if("Opera"==this.browser&&this.version.major>12)this.kernel="Chrome",this.kernelVersion=parseInt(this.versionFuncs.Chrome());else if("Yandex"==this.browser)this.kernel="Chrome",this.kernelVersion=parseInt(this.versionFuncs.Chrome());else if(this.matches.Safari&&"WebKit"===this.kernel){var i=t.replace(/^.*Version\/([\d.]+).*$/,"$1");i===t&&(i=t.replace(/^.*AppleWebKit\/([\d.]+).*$/,"$1")),this.kernelVersion=parseInt(i)||0}}},{key:"is360",value:function(){var t=ai,e=!1;if(window.chrome){var i=Number(t.replace(/^.*Chrome\/([\d]+).*$/,"$1"));this.mime("type","application/360softmgrplugin")||this.mime("type","application/mozilla-npqihooquicklogin")||i>36&&window.showModalDialog?e=!0:i>45&&!(e=this.mime("type","application/vnd.chromium.remoting-viewer"))&&i>=69&&(e=this.mime("type","application/hwepass2001.installepass2001")||this.mime("type","application/asx"))}return e}},{key:"mime",value:function(t,e){var i=navigator.mimeTypes;for(var n in i)if(i[n][t]==e)return!0;return!1}}]),t}()),ui=i(11),ci=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(v.a)(this,t),this.maxSize=e,this.sum=0,this.list=[],this.idx=0,this.cur=0}return Object(g.a)(t,[{key:"reset",value:function(){this.sum=0,this.list=[],this.idx=0,this.cur=0}},{key:"addCur",value:function(t){this.cur+=t}},{key:"calculate",value:function(){this.add(this.cur);var t=this.cur;return this.cur=0,t}},{key:"add",value:function(t){this.sum+=t,this.list.length<this.maxSize?this.list.push(t):(this.sum-=this.list[this.idx],this.list[this.idx]=t),this.idx++,this.idx>=this.maxSize&&(this.idx=0)}},{key:"average",value:function(){return 0===this.list.length?L.UintMax:Math.round(this.sum/this.list.length)}},{key:"getSamples",value:function(){return this.list}},{key:"max",value:function(){if(0===this.list.length)return L.UintMax;var t,e=0,i=Object(ui.a)(this.list);try{for(i.s();!(t=i.n()).done;){var n=t.value;n>e&&(e=n)}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"min",value:function(){var t,e=L.UintMax,i=Object(ui.a)(this.list);try{for(i.s();!(t=i.n()).done;){var n=t.value;n<e&&(e=n)}}catch(t){i.e(t)}finally{i.f()}return e}}]),t}(),li=function(){function t(){Object(v.a)(this,t),this.speed=new ci(20),this.rtt=new ci(20),this.p2p=0}return Object(g.a)(t,[{key:"addSpeed",value:function(t){var e=parseInt(t.replace("KB",""));this.speed.add(e)}},{key:"addRtt",value:function(t){this.rtt.add(t)}},{key:"setP2p",value:function(t){this.p2p=t}},{key:"getP2p",value:function(){return this.p2p}},{key:"getResult",value:function(){return{speed:this.speed.getSamples(),rtt:this.rtt.getSamples(),p2p:this.p2p}}}]),t}(),hi=function(){function t(e){Object(v.a)(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return Object(g.a)(t,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){this.loader&&(this.stats.aborted=!0,this.loader.abort()),this.timeoutHandle&&window.clearTimeout(this.timeoutHandle)}},{key:"load",value:function(t,e,i,n,r,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.url=t,this.responseType=e,this.onSuccess=i,this.onError=n,this.onTimeout=r,this.onProgress=u,this.stats={trequest:performance.now(),retry:0},this.timeout=o,this.maxRetry=a,this.retryDelay=s,this.timeoutHandle=window.setTimeout(this.loadtimeout.bind(this),o),this.loadInternal()}},{key:"loadBuffer",value:function(t,e,i,n,r,o,a,s,u){this.onOpen=e,this.load(t,"arraybuffer",(function(t){var e=t.target;return n(e.response)}),r,o,a,s,u)}},{key:"loadInternal",value:function(){var t=this.loader=new XMLHttpRequest;t.onload=this.loadsuccess.bind(this),t.onerror=this.loaderror.bind(this),t.onprogress=this.loadprogress.bind(this),t.onloadend=this.loadend.bind(this),t.onloadstart=this.loadstart.bind(this),t.responseType=this.responseType,t.open("GET",this.url,!0),null!=this.fromByte&&null!=this.toByte&&t.setRequestHeader("Range","bytes="+this.fromByte+"-"+this.toByte),this.stats.tstart=null,this.stats.loaded=0,this.xhrSetup&&this.xhrSetup(t),this.stats.tstart=performance.now(),t.send()}},{key:"loadsuccess",value:function(t){window.clearTimeout(this.timeoutHandle),this.stats.tload=performance.now(),t.requestURL=this.url,this.onSuccess(t,this.stats)}},{key:"loaderror",value:function(t){404!==t.currentTarget.status&&0!==t.currentTarget.status?this.stats.retry<this.maxRetry?(E.a.warn("XhrLoader.loaderror url="+this.url+" retryDelay="+this.retryDelay),this.destroy(),window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,64e3),this.stats.retry++):(window.clearTimeout(this.timeoutHandle),E.a.warn("XhrLoader.loaderror reach max retry url="+this.url),this.onError(t)):this.onError(t)}},{key:"loadtimeout",value:function(){this.stats.retry<this.maxRetry?(E.a.warn("XhrLoader.loadtimeout url="+this.url+" retryDelay="+this.retryDelay),this.destroy(),window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,64e3),this.stats.retry++):(window.clearTimeout(this.timeoutHandle),E.a.warn("XhrLoader.loadtimeout max retry url="+this.url),this.onTimeout(this.url))}},{key:"loadstart",value:function(){this.onOpen&&this.onOpen()}},{key:"loadprogress",value:function(t){var e=this.stats;null===e.tfirst&&(e.tfirst=performance.now()),e.loaded=t.loaded,this.onProgress&&this.onProgress(t,e)}},{key:"loadend",value:function(t){404===t.currentTarget.status&&this.loaderror(t)}}]),t}(),di=i(33),fi=i.n(di),pi=function(){function t(){Object(v.a)(this,t),this.startSeq=1e3,this.m3u8Len=0,this.preTsArr=void 0}return Object(g.a)(t,[{key:"genSnFromM3u8",value:function(t){var e=this.convertM3u8ToArray(t);if(void 0===this.preTsArr)this.preTsArr=e;else{var i=this.findSeq(this.preTsArr,e[0],this.startSeq);-1===i&&(i=this.startSeq+this.preTsArr.length),this.preTsArr=e,this.startSeq=i}return this.startSeq}},{key:"convertM3u8ToArray",value:function(t){for(var e,i=/#EXT(INF):([\d\.]+)[^\r\n]*[\r\n]+([^#|\r\n]+)?/gi,n=[];null!==(e=i.exec(t));)e.shift(),"INF"===(e=e.filter((function(t){return void 0!==t})))[0]&&n.push(e[2]),e=[];return n}},{key:"findSeq",value:function(t,e,i){for(var n=t.length-1;n>=0;n--){var r=t[n],o=r.split("?");r=o.length>1?o[0]:r;var a=e.split("?");if(r===(e=a.length>1?a[0]:e))return i+n}return-1}}]),t}(),mi=function(){function t(e){Object(v.a)(this,t),this.url="",this.time=0,this.duration=0,this.start=0,this.level=0,this.sn=0,this.discontinuity=!1,this.discontinuityCnt=0,this.byteRangeStartOffset=0,this.byteRangeEndOffset=0,this.decryptdata=null,this.pcdnFreetime=!1,this.pcdnBw=0,this.isPcdn=!1,this.tryCnt=0,this.isPcdnSwitchedCdn=!1,this.pcdnUrls=[]}return Object(g.a)(t,[{key:"getUrl",value:function(t){var e=t.useCdn,i=t.bufferLen;return this.pcdnUrls.length>0&&i>=U.PCDN_OPEN_BUFFER&&!e?(this.isPcdn=!0,this.pcdnUrls.shift()):(this.isPcdnSwitchedCdn=this.isPcdn,this.isPcdn=!1,this.url)}},{key:"hasPcdn",value:function(){return this.pcdnUrls.length>0}}]),t}(),yi=function(){function t(e){Object(v.a)(this,t),this.isLive=e,this.seqGener=new pi,this.isSwitchSeamLessLine=!1}return Object(g.a)(t,[{key:"resolve",value:function(t,e){return fi.a.buildAbsoluteURL(e,t)}},{key:"cloneObj",value:function(t){return JSON.parse((0,p.default)(t))}},{key:"parseMasterPlaylist",value:function(t,e){for(var i,n,r,o=[],a={},s=/#EXT-X-STREAM-INF:([^\n\r]*(BAND)WIDTH=(\d+))?([^\n\r]*(CODECS)=\"([^\"\n\r]*)\",?)?([^\n\r]*(RES)OLUTION=(\d+)x(\d+))?([^\n\r]*(NAME)=\"(.*)\")?[^\n\r]*[\r\n]+([^\r\n]+)/gi;null!=(i=s.exec(t));){for(i.shift(),i=i.filter((function(t){return void 0!==t})),(a={}).url=this.resolve(i.pop(),e);i.length>0;)switch(i.shift()){case"RES":a.width=parseInt(i.shift()),a.height=parseInt(i.shift());break;case"BAND":a.bitrate=parseInt(i.shift());break;case"NAME":a.name=i.shift();break;case"CODECS":for(n=i.shift().split(",");n.length>0;)-1!==(r=n.shift()).indexOf("avc1")?a.videoCodec=this.avc1toavcoti(r):a.audioCodec=r}o.push(a)}return o}},{key:"avc1toavcoti",value:function(t){var e,i=t.split(".");return i.length>2?(e=i.shift()+".",e+=parseInt(i.shift()).toString(16),e+=("00"+parseInt(i.shift()).toString(16)).substr(-4)):e=t,e}},{key:"parseKeyParamsByRegex",value:function(t,e){var i=e.exec(t);return i&&(i.shift(),2===(i=i.filter((function(t){return void 0!==t}))).length)?i[1]:null}},{key:"parseLevelPlaylist",value:function(t,e,i){return this._parseByLine(t,e,i)}},{key:"_getValue",value:function(t,e,i){for(var n=e+1;n<i;n++)if(!t[n].startsWith("#"))return[n,t[n]];return!1}},{key:"_getIv",value:function(t){for(var e=new Uint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e}},{key:"_parseByLine",value:function(t,e,i){var n,r,o,a,s,u,c=0,l=0,h=!1,d=0,f={url:e,fragments:[],live:this.isLive,startSN:0},p=!1,m=0,y=!1;this.isLive||(y=!0,n=this.seqGener.genSnFromM3u8(t),f.startSN=n);for(var v={method:null,key:null,iv:null,uri:null},g=t.replace("\r").split("\n"),_=g.length,S=0;S<_;S++){var w=g[S];if(-1!==w.indexOf("#EXT-X-MEDIA-SEQUENCE"))this.isLive&&(l=f.startSN=parseInt(w.match(/\d+/g)[0]));else if(-1!==w.indexOf("#EXT-X-TARGETDURATION"))f.targetduration=parseFloat(w.match(/[\d\.]+/g)[0]);else if(-1!==w.indexOf("#EXT-X-ENDLIST"))f.live=!1,E.a.info("M3u8Parser.parseLevelPlaylist ENDLIST isLive=false");else if(-1!==w.indexOf("#EXT-X-DISCONTINUITY"))p=!0,m++;else if(-1!==w.indexOf("#EXT-X-BYTERANGE")){var b=w.match(/[\d@]+/g)[0].split("@");if(u=1===b.length?s:parseInt(b[1]),s=parseInt(b[0])+u,(a=f.fragments.length?f.fragments[f.fragments.length-1]:null)&&(a.byteRangeStartOffset=u,a.byteRangeEndOffset=s,(r=this._getValue(g,S,_))&&!a.url)){var I=r[1];a.url=I?this.resolve(I,e):null}}else if(-1!==w.indexOf("#EXT-ALIGN-PTS"))1===B.switchSeamLessLine&&(c=Number(w.replace("#EXT-ALIGN-PTS:","")),h=!0,this.isSwitchSeamLessLine=!0);else if(-1!==w.indexOf("#EXTINF")){var T=parseFloat(w.match(/[\d\.]+/g)[0]);if(!isNaN(T)){if(y&&T<1)continue;var P;if(y=!1,o=h?c:++l,this.isLive||(o=n++),v.method&&v.uri&&!v.iv?(P=this.cloneObj(v)).iv=this._getIv(this.isLive?l:o):P=v,r=this._getValue(g,S,_)){var k=r[1];(a=new mi).url=k?this.resolve(k,e):null,a.time=k?fi.a.getTimeFromUrl(k,this.isLive):0,a.duration=T,a.start=d,a.level=i,a.sn=o,a.discontinuity=p,a.discontinuityCnt=m,a.byteRangeStartOffset=u,a.byteRangeEndOffset=s,a.decryptdata=P,f.fragments.push(a),p&&(p=!1),d+=T,u=null}}}else if(-1!==w.indexOf("#EXT-X-KEY")){var R=w.replace("#EXT-X-KEY:",""),C=this.parseKeyParamsByRegex(R,/(METHOD)=([^,]*)/),O=this.parseKeyParamsByRegex(R,/(URI)=["]([^,]*)["]/),A=this.parseKeyParamsByRegex(R,/(IV)=([^,]*)/);C&&(v={method:null,key:null,iv:null,uri:null},O&&"AES-128"===C&&(v.method=C,v.uri=this.resolve(O,e),v.key=null,A&&(v.iv=A,"0x"===v.iv.substring(0,2)&&(v.iv=v.iv.substring(2)),v.iv=v.iv.match(/.{8}/g),v.iv[0]=parseInt(v.iv[0],16),v.iv[1]=parseInt(v.iv[1],16),v.iv[2]=parseInt(v.iv[2],16),v.iv[3]=parseInt(v.iv[3],16),v.iv=new Uint32Array(v.iv))))}}return f.totalduration=d,f.endSN=c-1,this.isLive||(f.endSN=n-1),f}},{key:"_parseByReg",value:function(t,e,i){var n,r,o,a,s,u=0,c=0,l={url:e,fragments:[],live:this.isLive,startSN:0},h=!1;this.isLive||(n=this.seqGener.genSnFromM3u8(t),l.startSN=n);for(var d={method:null,key:null,iv:null,uri:null},f=/(?:#EXT-X-(MEDIA-SEQUENCE):(\d+))|(?:#EXT-X-(TARGETDURATION):(\d+))|(?:#EXT-X-(KEY):(.*))|(?:#EXT(INF):([\d\.]+)[^\r\n]*([\r\n]+[^#|\r\n]+)?)|(?:#EXT-X-(BYTERANGE):([\d]+[@[\d]*)]*[\r\n]+([^#|\r\n]+)?|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DIS)CONTINUITY))/g;null!==(r=f.exec(t));)switch(r.shift(),(r=r.filter((function(t){return void 0!==t})))[0]){case"MEDIA-SEQUENCE":this.isLive&&(u=l.startSN=parseInt(r[1]));break;case"TARGETDURATION":l.targetduration=parseFloat(r[1]);break;case"ENDLIST":l.live=!1,E.a.info("M3u8Parser.parseLevelPlaylist ENDLIST isLive=false");break;case"DIS":h=!0;break;case"BYTERANGE":var p=r[1].split("@");s=1===p.length?a:parseInt(p[1]),a=parseInt(p[0])+s,(o=l.fragments.length?l.fragments[l.fragments.length-1]:null)&&!o.url&&(o.byteRangeStartOffset=s,o.byteRangeEndOffset=a,o.url=this.resolve(r[2],e));break;case"INF":var m=parseFloat(r[1]);if(!isNaN(m)){var y,v=u++;if(this.isLive||(v=n++),d.method&&d.uri&&!d.iv){y=this.cloneObj(d);for(var g=new Uint8Array(16),_=12;_<16;_++)g[_]=v>>8*(15-_)&255;y.iv=g}else y=d;var S=r[2];l.fragments.push({url:S?this.resolve(S,e):null,time:S?fi.a.getTimeFromUrl(S,this.isLive):0,duration:m,start:c,level:i,sn:v,discontinuity:h,byteRangeStartOffset:s,byteRangeEndOffset:a,decryptdata:y}),h&&(h=!1),c+=m,s=null}break;case"KEY":var w=r[1],b=this.parseKeyParamsByRegex(w,/(METHOD)=([^,]*)/),I=this.parseKeyParamsByRegex(w,/(URI)=["]([^,]*)["]/),T=this.parseKeyParamsByRegex(w,/(IV)=([^,]*)/);b&&(d={method:null,key:null,iv:null,uri:null},I&&"AES-128"===b&&(d.method=b,d.uri=this.resolve(I,e),d.key=null,T&&(d.iv=T,"0x"===d.iv.substring(0,2)&&(d.iv=d.iv.substring(2)),d.iv=d.iv.match(/.{8}/g),d.iv[0]=parseInt(d.iv[0],16),d.iv[1]=parseInt(d.iv[1],16),d.iv[2]=parseInt(d.iv[2],16),d.iv[3]=parseInt(d.iv[3],16),d.iv=new Uint32Array(d.iv))))}return l.totalduration=c,l.endSN=u-1,this.isLive||(l.endSN=n-1),l}}]),t}(),vi={},gi={setTaf:function(t){return vi=t}},_i=gi;gi.UserId=function(){this.lUid=0,this.sGuid="",this.sToken="",this.sHuYaUA="",this.sCookie="",this.iTokenType=0},gi.UserId.prototype._clone=function(){return new gi.UserId},gi.UserId.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.UserId.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.UserId.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sToken),t.writeString(3,this.sHuYaUA),t.writeString(4,this.sCookie),t.writeInt32(5,this.iTokenType)},gi.UserId.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sToken=t.readString(2,!1,this.sToken),this.sHuYaUA=t.readString(3,!1,this.sHuYaUA),this.sCookie=t.readString(4,!1,this.sCookie),this.iTokenType=t.readInt32(5,!1,this.iTokenType)},gi.VideoGatewayProxy2VGPingReq=function(){this.lLocalTime=0},gi.VideoGatewayProxy2VGPingReq.prototype._clone=function(){return new gi.VideoGatewayProxy2VGPingReq},gi.VideoGatewayProxy2VGPingReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.VideoGatewayProxy2VGPingReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.VideoGatewayProxy2VGPingReq.prototype.writeTo=function(t){t.writeInt64(0,this.lLocalTime)},gi.VideoGatewayProxy2VGPingReq.prototype.readFrom=function(t){this.lLocalTime=t.readInt64(0,!1,this.lLocalTime)},gi.VideoGatewayProxy2VGPingRsp=function(){this.lLocalTime=0},gi.VideoGatewayProxy2VGPingRsp.prototype._clone=function(){return new gi.VideoGatewayProxy2VGPingRsp},gi.VideoGatewayProxy2VGPingRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.VideoGatewayProxy2VGPingRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.VideoGatewayProxy2VGPingRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lLocalTime)},gi.VideoGatewayProxy2VGPingRsp.prototype.readFrom=function(t){this.lLocalTime=t.readInt64(0,!1,this.lLocalTime)},gi.GetInfoFromVGReq=function(){this.lUid=0,this.iServiceType=0,this.iClientType=0,this.iClientIp=0,this.iTerminalType=0,this.iRequestVPType=0,this.sMsg=new vi.BinBuffer,this.iUri=0,this.sProtoName="",this.lSid=0,this.vStreamName=new vi.Vector(new vi.STRING),this.tId=new gi.UserId},gi.GetInfoFromVGReq.prototype._clone=function(){return new gi.GetInfoFromVGReq},gi.GetInfoFromVGReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetInfoFromVGReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetInfoFromVGReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt32(1,this.iServiceType),t.writeInt32(2,this.iClientType),t.writeInt64(3,this.iClientIp),t.writeInt32(4,this.iTerminalType),t.writeInt32(5,this.iRequestVPType),t.writeBytes(6,this.sMsg),t.writeInt64(7,this.iUri),t.writeString(8,this.sProtoName),t.writeInt64(9,this.lSid),t.writeVector(10,this.vStreamName),t.writeStruct(11,this.tId)},gi.GetInfoFromVGReq.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.iServiceType=t.readInt32(1,!1,this.iServiceType),this.iClientType=t.readInt32(2,!1,this.iClientType),this.iClientIp=t.readInt64(3,!1,this.iClientIp),this.iTerminalType=t.readInt32(4,!1,this.iTerminalType),this.iRequestVPType=t.readInt32(5,!1,this.iRequestVPType),this.sMsg=t.readBytes(6,!1,this.sMsg),this.iUri=t.readInt64(7,!1,this.iUri),this.sProtoName=t.readString(8,!1,this.sProtoName),this.lSid=t.readInt64(9,!1,this.lSid),this.vStreamName=t.readVector(10,!1,this.vStreamName),this.tId=t.readStruct(11,!1,this.tId)},gi.GetInfoFromVGRsp=function(){this.lUid=0,this.ServerId=0,this.sMsg=new vi.BinBuffer,this.iUri=0,this.sProtoName=""},gi.GetInfoFromVGRsp.prototype._clone=function(){return new gi.GetInfoFromVGRsp},gi.GetInfoFromVGRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetInfoFromVGRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetInfoFromVGRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt64(1,this.ServerId),t.writeBytes(2,this.sMsg),t.writeInt64(3,this.iUri),t.writeString(4,this.sProtoName)},gi.GetInfoFromVGRsp.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.ServerId=t.readInt64(1,!1,this.ServerId),this.sMsg=t.readBytes(2,!1,this.sMsg),this.iUri=t.readInt64(3,!1,this.iUri),this.sProtoName=t.readString(4,!1,this.sProtoName)},gi.GetCdnTokenExReq=function(){this.sFlvUrl="",this.sStreamName="",this.iLoopTime=0,this.tId=new gi.UserId,this.iAppId=66},gi.GetCdnTokenExReq.prototype._clone=function(){return new gi.GetCdnTokenExReq},gi.GetCdnTokenExReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetCdnTokenExReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetCdnTokenExReq.prototype.writeTo=function(t){t.writeString(0,this.sFlvUrl),t.writeString(1,this.sStreamName),t.writeInt32(2,this.iLoopTime),t.writeStruct(3,this.tId),t.writeInt32(4,this.iAppId)},gi.GetCdnTokenExReq.prototype.readFrom=function(t){this.sFlvUrl=t.readString(0,!1,this.sFlvUrl),this.sStreamName=t.readString(1,!1,this.sStreamName),this.iLoopTime=t.readInt32(2,!1,this.iLoopTime),this.tId=t.readStruct(3,!1,this.tId),this.iAppId=t.readInt32(4,!1,this.iAppId)},gi.GetCdnTokenExRsp=function(){this.sFlvToken="",this.iExpireTime=0},gi.GetCdnTokenExRsp.prototype._clone=function(){return new gi.GetCdnTokenExRsp},gi.GetCdnTokenExRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetCdnTokenExRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetCdnTokenExRsp.prototype.writeTo=function(t){t.writeString(0,this.sFlvToken),t.writeInt32(1,this.iExpireTime)},gi.GetCdnTokenExRsp.prototype.readFrom=function(t){this.sFlvToken=t.readString(0,!1,this.sFlvToken),this.iExpireTime=t.readInt32(1,!1,this.iExpireTime)},gi.LiveScenarioType={ECommon_Live:0,EAudio_Only:1,EVideo_Only:2,ELink_Live:3},gi.LimitedStreamInfo=function(){this.iVerMin=0,this.iVerMax=0,this.sCdnType="",this.iIsMaster=0,this.lChannelId=0,this.lSubChannelId=0,this.lPresenterUid=0,this.sStreamName="",this.sFlvUrl="",this.sFlvUrlSuffix="",this.sFlvAntiCode="",this.sHlsUrl="",this.sHlsUrlSuffix="",this.sHlsAntiCode="",this.iLineIndex=0,this.iIsMultiStream=0,this.iPCPriorityRate=0,this.iWebPriorityRate=0,this.iMobilePriorityRate=0,this.vFlvIPList=new vi.Vector(new vi.STRING),this.iIsP2PSupport=0,this.sP2pUrl="",this.sP2pUrlSuffix="",this.sP2pAntiCode="",this.lFreeFlag=0},gi.LimitedStreamInfo.prototype._clone=function(){return new gi.LimitedStreamInfo},gi.LimitedStreamInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.LimitedStreamInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.LimitedStreamInfo.prototype.writeTo=function(t){t.writeInt32(0,this.iVerMin),t.writeInt32(1,this.iVerMax),t.writeString(2,this.sCdnType),t.writeInt32(3,this.iIsMaster),t.writeInt64(4,this.lChannelId),t.writeInt64(5,this.lSubChannelId),t.writeInt64(6,this.lPresenterUid),t.writeString(7,this.sStreamName),t.writeString(8,this.sFlvUrl),t.writeString(9,this.sFlvUrlSuffix),t.writeString(10,this.sFlvAntiCode),t.writeString(11,this.sHlsUrl),t.writeString(12,this.sHlsUrlSuffix),t.writeString(13,this.sHlsAntiCode),t.writeInt32(14,this.iLineIndex),t.writeInt32(15,this.iIsMultiStream),t.writeInt32(16,this.iPCPriorityRate),t.writeInt32(17,this.iWebPriorityRate),t.writeInt32(18,this.iMobilePriorityRate),t.writeVector(19,this.vFlvIPList),t.writeInt32(20,this.iIsP2PSupport),t.writeString(21,this.sP2pUrl),t.writeString(22,this.sP2pUrlSuffix),t.writeString(23,this.sP2pAntiCode),t.writeInt64(24,this.lFreeFlag)},gi.LimitedStreamInfo.prototype.readFrom=function(t){this.iVerMin=t.readInt32(0,!1,this.iVerMin),this.iVerMax=t.readInt32(1,!1,this.iVerMax),this.sCdnType=t.readString(2,!1,this.sCdnType),this.iIsMaster=t.readInt32(3,!1,this.iIsMaster),this.lChannelId=t.readInt64(4,!1,this.lChannelId),this.lSubChannelId=t.readInt64(5,!1,this.lSubChannelId),this.lPresenterUid=t.readInt64(6,!1,this.lPresenterUid),this.sStreamName=t.readString(7,!1,this.sStreamName),this.sFlvUrl=t.readString(8,!1,this.sFlvUrl),this.sFlvUrlSuffix=t.readString(9,!1,this.sFlvUrlSuffix),this.sFlvAntiCode=t.readString(10,!1,this.sFlvAntiCode),this.sHlsUrl=t.readString(11,!1,this.sHlsUrl),this.sHlsUrlSuffix=t.readString(12,!1,this.sHlsUrlSuffix),this.sHlsAntiCode=t.readString(13,!1,this.sHlsAntiCode),this.iLineIndex=t.readInt32(14,!1,this.iLineIndex),this.iIsMultiStream=t.readInt32(15,!1,this.iIsMultiStream),this.iPCPriorityRate=t.readInt32(16,!1,this.iPCPriorityRate),this.iWebPriorityRate=t.readInt32(17,!1,this.iWebPriorityRate),this.iMobilePriorityRate=t.readInt32(18,!1,this.iMobilePriorityRate),this.vFlvIPList=t.readVector(19,!1,this.vFlvIPList),this.iIsP2PSupport=t.readInt32(20,!1,this.iIsP2PSupport),this.sP2pUrl=t.readString(21,!1,this.sP2pUrl),this.sP2pUrlSuffix=t.readString(22,!1,this.sP2pUrlSuffix),this.sP2pAntiCode=t.readString(23,!1,this.sP2pAntiCode),this.lFreeFlag=t.readInt64(24,!1,this.lFreeFlag)},gi.ClassifiedStreamInfoPack=function(){this.iLiveScenarioType=0,this.vStreamInfo=new vi.Vector(new gi.LimitedStreamInfo),this.vCdnList=new vi.Vector(new vi.STRING),this.lLiveId=0,this.sLinkGroupId="",this.mStreamRatioWeb=new vi.Map(new vi.STRING,new vi.INT32),this.mStreamRatioPC=new vi.Map(new vi.STRING,new vi.INT32),this.mStreamRatioMobile=new vi.Map(new vi.STRING,new vi.INT32)},gi.ClassifiedStreamInfoPack.prototype._clone=function(){return new gi.ClassifiedStreamInfoPack},gi.ClassifiedStreamInfoPack.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClassifiedStreamInfoPack.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClassifiedStreamInfoPack.prototype.writeTo=function(t){t.writeInt32(0,this.iLiveScenarioType),t.writeVector(1,this.vStreamInfo),t.writeVector(2,this.vCdnList),t.writeInt64(3,this.lLiveId),t.writeString(4,this.sLinkGroupId),t.writeMap(5,this.mStreamRatioWeb),t.writeMap(6,this.mStreamRatioPC),t.writeMap(7,this.mStreamRatioMobile)},gi.ClassifiedStreamInfoPack.prototype.readFrom=function(t){this.iLiveScenarioType=t.readInt32(0,!1,this.iLiveScenarioType),this.vStreamInfo=t.readVector(1,!1,this.vStreamInfo),this.vCdnList=t.readVector(2,!1,this.vCdnList),this.lLiveId=t.readInt64(3,!1,this.lLiveId),this.sLinkGroupId=t.readString(4,!1,this.sLinkGroupId),this.mStreamRatioWeb=t.readMap(5,!1,this.mStreamRatioWeb),this.mStreamRatioPC=t.readMap(6,!1,this.mStreamRatioPC),this.mStreamRatioMobile=t.readMap(7,!1,this.mStreamRatioMobile)},gi.LivingStreamInfoNotice=function(){this.lPresenterUid=0,this.lLiveId=0,this.mStreamInfo=new vi.Map(new vi.INT32,new gi.ClassifiedStreamInfoPack)},gi.LivingStreamInfoNotice.prototype._clone=function(){return new gi.LivingStreamInfoNotice},gi.LivingStreamInfoNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.LivingStreamInfoNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.LivingStreamInfoNotice.prototype.writeTo=function(t){t.writeInt64(0,this.lPresenterUid),t.writeInt64(1,this.lLiveId),t.writeMap(2,this.mStreamInfo)},gi.LivingStreamInfoNotice.prototype.readFrom=function(t){this.lPresenterUid=t.readInt64(0,!1,this.lPresenterUid),this.lLiveId=t.readInt64(1,!1,this.lLiveId),this.mStreamInfo=t.readMap(2,!1,this.mStreamInfo)},gi.LivingStreamEndNotice=function(){this.sStreamName="",this.sCdnType="",this.iLineIndex=0,this.lLiveId=0,this.iLiveScenarioType=0},gi.LivingStreamEndNotice.prototype._clone=function(){return new gi.LivingStreamEndNotice},gi.LivingStreamEndNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.LivingStreamEndNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.LivingStreamEndNotice.prototype.writeTo=function(t){t.writeString(0,this.sStreamName),t.writeString(1,this.sCdnType),t.writeInt32(2,this.iLineIndex),t.writeInt64(3,this.lLiveId),t.writeInt32(4,this.iLiveScenarioType)},gi.LivingStreamEndNotice.prototype.readFrom=function(t){this.sStreamName=t.readString(0,!1,this.sStreamName),this.sCdnType=t.readString(1,!1,this.sCdnType),this.iLineIndex=t.readInt32(2,!1,this.iLineIndex),this.lLiveId=t.readInt64(3,!1,this.lLiveId),this.iLiveScenarioType=t.readInt32(4,!1,this.iLiveScenarioType)},gi.GetLivingStreamInfoReq=function(){this.tId=new gi.UserId,this.lTopSid=0,this.lSubSid=0,this.lPresenterUid=0,this.sTraceSource=""},gi.GetLivingStreamInfoReq.prototype._clone=function(){return new gi.GetLivingStreamInfoReq},gi.GetLivingStreamInfoReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetLivingStreamInfoReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetLivingStreamInfoReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeInt64(1,this.lTopSid),t.writeInt64(2,this.lSubSid),t.writeInt64(3,this.lPresenterUid),t.writeString(4,this.sTraceSource)},gi.GetLivingStreamInfoReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.lTopSid=t.readInt64(1,!1,this.lTopSid),this.lSubSid=t.readInt64(2,!1,this.lSubSid),this.lPresenterUid=t.readInt64(3,!1,this.lPresenterUid),this.sTraceSource=t.readString(4,!1,this.sTraceSource)},gi.GetLivingStreamInfoRsp=function(){this.bIsLiving=0,this.tNotice=new gi.LivingStreamInfoNotice,this.bIsSelfLiving=0},gi.GetLivingStreamInfoRsp.prototype._clone=function(){return new gi.GetLivingStreamInfoRsp},gi.GetLivingStreamInfoRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetLivingStreamInfoRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetLivingStreamInfoRsp.prototype.writeTo=function(t){t.writeInt32(0,this.bIsLiving),t.writeStruct(1,this.tNotice),t.writeInt32(2,this.bIsSelfLiving)},gi.GetLivingStreamInfoRsp.prototype.readFrom=function(t){this.bIsLiving=t.readInt32(0,!1,this.bIsLiving),this.tNotice=t.readStruct(1,!1,this.tNotice),this.bIsSelfLiving=t.readInt32(2,!1,this.bIsSelfLiving)},gi.VideoClientReportReq=function(){this.iReportType=0,this.sReportString="",this.sMsg=new vi.BinBuffer,this.lUid=0},gi.VideoClientReportReq.prototype._clone=function(){return new gi.VideoClientReportReq},gi.VideoClientReportReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.VideoClientReportReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.VideoClientReportReq.prototype.writeTo=function(t){t.writeInt32(0,this.iReportType),t.writeString(1,this.sReportString),t.writeBytes(2,this.sMsg),t.writeInt64(3,this.lUid)},gi.VideoClientReportReq.prototype.readFrom=function(t){this.iReportType=t.readInt32(0,!1,this.iReportType),this.sReportString=t.readString(1,!1,this.sReportString),this.sMsg=t.readBytes(2,!1,this.sMsg),this.lUid=t.readInt64(3,!1,this.lUid)},gi.LiveMeetingSyncNotice=function(){this.tStat=new gi.MeetingStat,this.vSeats=new vi.Vector(new gi.MeetingSeat),this.iVersion=0,this.sMessage=""},gi.LiveMeetingSyncNotice.prototype._clone=function(){return new gi.LiveMeetingSyncNotice},gi.LiveMeetingSyncNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.LiveMeetingSyncNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.LiveMeetingSyncNotice.prototype.writeTo=function(t){t.writeStruct(0,this.tStat),t.writeVector(1,this.vSeats),t.writeInt32(2,this.iVersion),t.writeString(3,this.sMessage)},gi.LiveMeetingSyncNotice.prototype.readFrom=function(t){this.tStat=t.readStruct(0,!1,this.tStat),this.vSeats=t.readVector(1,!1,this.vSeats),this.iVersion=t.readInt32(2,!1,this.iVersion),this.sMessage=t.readString(3,!1,this.sMessage)},gi.MeetingStat=function(){this.lPresenterUid=0,this.sPresenterNick="",this.sPresenterAvatarUrl="",this.mpContext=new vi.Map(new vi.STRING,new vi.STRING),this.iVersion=0,this.iCurAction=0,this.sPassword="",this.lSessionId=0,this.vApplyList=new vi.Vector(new gi.ApplyUser),this.iState=0,this.iSilence=0,this.iActiveTime=0,this.iLastSyncTime=0,this.mpUserSession=new vi.Map(new vi.INT64,new vi.STRING),this.iBeginTime=0,this.iPresenterGender=0,this.tTransferRoom=new gi.TransferLiveRoomState,this.iMode=0,this.iModeV2=0},gi.MeetingStat.prototype._clone=function(){return new gi.MeetingStat},gi.MeetingStat.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.MeetingStat.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.MeetingStat.prototype.writeTo=function(t){t.writeInt64(0,this.lPresenterUid),t.writeString(1,this.sPresenterNick),t.writeString(2,this.sPresenterAvatarUrl),t.writeMap(4,this.mpContext),t.writeInt32(5,this.iVersion),t.writeInt32(6,this.iCurAction),t.writeString(7,this.sPassword),t.writeInt64(8,this.lSessionId),t.writeVector(9,this.vApplyList),t.writeInt32(10,this.iState),t.writeInt32(11,this.iSilence),t.writeInt32(12,this.iActiveTime),t.writeInt32(13,this.iLastSyncTime),t.writeMap(14,this.mpUserSession),t.writeInt32(15,this.iBeginTime),t.writeInt32(16,this.iPresenterGender),t.writeStruct(17,this.tTransferRoom),t.writeInt32(18,this.iMode),t.writeInt32(19,this.iModeV2)},gi.MeetingSeat=function(){this.mpContext=new vi.Map(new vi.STRING,new vi.STRING),this.iPos=0,this.iLocked=0,this.lUid=0,this.sNick="",this.sAvatarUrl="",this.iMute=0,this.iVersion=0,this.iCurAction=0,this.iActiveTime=0,this.iSilence=0,this.iGender=0,this.lOfferSeatTimeStamp=0,this.iSilenceTime=0,this.iMuteTime=0,this.iSeatType=0,this.iSeatTypeV2=0,this.sSeatUrl="",this.sCharm="",this.sName="",this.sSourceUrl=""},gi.MeetingSeat.prototype._clone=function(){return new gi.MeetingSeat},gi.MeetingSeat.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.MeetingSeat.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.MeetingSeat.prototype.writeTo=function(t){t.writeMap(0,this.mpContext),t.writeInt32(1,this.iPos),t.writeInt32(2,this.iLocked),t.writeInt64(3,this.lUid),t.writeString(4,this.sNick),t.writeString(5,this.sAvatarUrl),t.writeInt32(7,this.iMute),t.writeInt32(8,this.iVersion),t.writeInt32(9,this.iCurAction),t.writeInt32(10,this.iActiveTime),t.writeInt32(11,this.iSilence),t.writeInt32(12,this.iGender),t.writeInt64(13,this.lOfferSeatTimeStamp),t.writeInt32(14,this.iSilenceTime),t.writeInt32(15,this.iMuteTime),t.writeInt32(16,this.iSeatType),t.writeInt32(17,this.iSeatTypeV2),t.writeString(18,this.sSeatUrl),t.writeString(19,this.sCharm),t.writeString(20,this.sName),t.writeString(21,this.sSourceUrl)},gi.MeetingSeat.prototype.readFrom=function(t){this.mpContext=t.readMap(0,!1,this.mpContext),this.iPos=t.readInt32(1,!1,this.iPos),this.iLocked=t.readInt32(2,!1,this.iLocked),this.lUid=t.readInt64(3,!1,this.lUid),this.sNick=t.readString(4,!1,this.sNick),this.sAvatarUrl=t.readString(5,!1,this.sAvatarUrl),this.iMute=t.readInt32(7,!1,this.iMute),this.iVersion=t.readInt32(8,!1,this.iVersion),this.iCurAction=t.readInt32(9,!1,this.iCurAction),this.iActiveTime=t.readInt32(10,!1,this.iActiveTime),this.iSilence=t.readInt32(11,!1,this.iSilence),this.iGender=t.readInt32(12,!1,this.iGender),this.lOfferSeatTimeStamp=t.readInt64(13,!1,this.lOfferSeatTimeStamp),this.iSilenceTime=t.readInt32(14,!1,this.iSilenceTime),this.iMuteTime=t.readInt32(15,!1,this.iMuteTime),this.iSeatType=t.readInt32(16,!1,this.iSeatType),this.iSeatTypeV2=t.readInt32(17,!1,this.iSeatTypeV2),this.sSeatUrl=t.readString(18,!1,this.sSeatUrl),this.sCharm=t.readString(19,!1,this.sCharm),this.sName=t.readString(20,!1,this.sName),this.sSourceUrl=t.readString(21,!1,this.sSourceUrl)},gi.ApplyUser=function(){this.lUid=0,this.sNick="",this.sAvatarUrl="",this.lActiveTime=0,this.mpContext=new vi.Map(new vi.STRING,new vi.STRING),this.iGender=0,this.sStreamName="",this.iSeatType=0},gi.ApplyUser.prototype._clone=function(){return new gi.ApplyUser},gi.ApplyUser.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ApplyUser.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ApplyUser.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sNick),t.writeString(2,this.sAvatarUrl),t.writeInt64(3,this.lActiveTime),t.writeMap(4,this.mpContext),t.writeInt32(5,this.iGender),t.writeString(6,this.sStreamName),t.writeInt32(7,this.iSeatType)},gi.ApplyUser.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sNick=t.readString(1,!1,this.sNick),this.sAvatarUrl=t.readString(2,!1,this.sAvatarUrl),this.lActiveTime=t.readInt64(3,!1,this.lActiveTime),this.mpContext=t.readMap(4,!1,this.mpContext),this.iGender=t.readInt32(5,!1,this.iGender),this.sStreamName=t.readString(6,!1,this.sStreamName),this.iSeatType=t.readInt32(7,!1,this.iSeatType)},gi.TransferLiveRoomState=function(){this.lTargetUid=0,this.iInviteTime=0,this.iTokeOverTime=0,this.iBeginLiveTime=0,this.lNewLiveId=0,this.iInviteExpire=0,this.iState=0,this.iResult=0,this.iSuccessTime=0,this.sTargetNick=""},gi.TransferLiveRoomState.prototype._clone=function(){return new gi.TransferLiveRoomState},gi.TransferLiveRoomState.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.TransferLiveRoomState.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.TransferLiveRoomState.prototype.writeTo=function(t){t.writeInt64(0,this.lTargetUid),t.writeInt32(1,this.iInviteTime),t.writeInt32(2,this.iTokeOverTime),t.writeInt32(3,this.iBeginLiveTime),t.writeInt64(4,this.lNewLiveId),t.writeInt32(5,this.iInviteExpire),t.writeInt32(6,this.iState),t.writeInt32(7,this.iResult),t.writeInt32(8,this.iSuccessTime),t.writeString(9,this.sTargetNick)},gi.TransferLiveRoomState.prototype.readFrom=function(t){this.lTargetUid=t.readInt64(0,!1,this.lTargetUid),this.iInviteTime=t.readInt32(1,!1,this.iInviteTime),this.iTokeOverTime=t.readInt32(2,!1,this.iTokeOverTime),this.iBeginLiveTime=t.readInt32(3,!1,this.iBeginLiveTime),this.lNewLiveId=t.readInt64(4,!1,this.lNewLiveId),this.iInviteExpire=t.readInt32(5,!1,this.iInviteExpire),this.iState=t.readInt32(6,!1,this.iState),this.iResult=t.readInt32(7,!1,this.iResult),this.iSuccessTime=t.readInt32(8,!1,this.iSuccessTime),this.sTargetNick=t.readString(9,!1,this.sTargetNick)},gi.GetP2PStreamInfoReq=function(){this.lUid=0,this.sStreamName="",this.iP2PType=0},gi.GetP2PStreamInfoReq.prototype._clone=function(){return new gi.GetP2PStreamInfoReq},gi.GetP2PStreamInfoReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetP2PStreamInfoReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetP2PStreamInfoReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sStreamName),t.writeInt32(2,this.iP2PType)},gi.GetP2PStreamInfoReq.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sStreamName=t.readString(1,!1,this.sStreamName),this.iP2PType=t.readInt32(2,!1,this.iP2PType)},gi.GetP2PStreamInfoRsp=function(){this.lUid=0,this.sStreamName="",this.iP2PType=0,this.sP2PToken="",this.iP2PExpireTime=0,this.sP2PUrl="",this.sCodecType="",this.sCdnBrand="",this.mpOption=new vi.Map(new vi.INT16,new vi.INT64),this.line=0},gi.GetP2PStreamInfoRsp.prototype._clone=function(){return new gi.GetP2PStreamInfoRsp},gi.GetP2PStreamInfoRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetP2PStreamInfoRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetP2PStreamInfoRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sStreamName),t.writeInt32(2,this.iP2PType),t.writeString(3,this.sP2PToken),t.writeInt32(4,this.iP2PExpireTime),t.writeString(5,this.sP2PUrl),t.writeString(6,this.sCodecType),t.writeString(7,this.sCdnBrand),t.writeMap(8,this.mpOption),t.writeUInt8(9,this.line)},gi.GetP2PStreamInfoRsp.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sStreamName=t.readString(1,!1,this.sStreamName),this.iP2PType=t.readInt32(2,!1,this.iP2PType),this.sP2PToken=t.readString(3,!1,this.sP2PToken),this.iP2PExpireTime=t.readInt32(4,!1,this.iP2PExpireTime),this.sP2PUrl=t.readString(5,!1,this.sP2PUrl),this.sCodecType=t.readString(6,!1,this.sCodecType),this.sCdnBrand=t.readString(7,!1,this.sCdnBrand),this.mpOption=t.readMap(8,!1,this.mpOption),this.line=t.readUInt8(9,!1,this.line)},gi.GetP2PStreamTokenExReq=function(){this.sStreamName="",this.iLoopTime=0},gi.GetP2PStreamTokenExReq.prototype._clone=function(){return new gi.GetP2PStreamTokenExReq},gi.GetP2PStreamTokenExReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetP2PStreamTokenExReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetP2PStreamTokenExReq.prototype.writeTo=function(t){t.writeString(0,this.sStreamName),t.writeInt32(1,this.iLoopTime)},gi.GetP2PStreamTokenExReq.prototype.readFrom=function(t){this.sStreamName=t.readString(0,!1,this.sStreamName),this.iLoopTime=t.readInt32(1,!1,this.iLoopTime)},gi.GetP2PStreamTokenExRsp=function(){this.sP2PToken="",this.iExpireTime=0},gi.GetP2PStreamTokenExRsp.prototype._clone=function(){return new gi.GetP2PStreamTokenExRsp},gi.GetP2PStreamTokenExRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.GetP2PStreamTokenExRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.GetP2PStreamTokenExRsp.prototype.writeTo=function(t){t.writeString(0,this.sP2PToken),t.writeInt32(1,this.iExpireTime)},gi.GetP2PStreamTokenExRsp.prototype.readFrom=function(t){this.sP2PToken=t.readString(0,!1,this.sP2PToken),this.iExpireTime=t.readInt32(1,!1,this.iExpireTime)},gi.HttpDnsItem=function(){this.vIp=new vi.Vector(new vi.STRING),this.iExpireTime=0,this.vIpv6=new vi.Vector(new vi.STRING)},gi.HttpDnsItem.prototype._clone=function(){return new gi.HttpDnsItem},gi.HttpDnsItem.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.HttpDnsItem.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.HttpDnsItem.prototype.writeTo=function(t){t.writeVector(0,this.vIp),t.writeInt64(1,this.iExpireTime),t.writeVector(2,this.vIpv6)},gi.HttpDnsItem.prototype.readFrom=function(t){this.vIp=t.readVector(0,!1,this.vIp),this.iExpireTime=t.readInt64(1,!1,this.iExpireTime),this.vIpv6=t.readVector(2,!1,this.vIpv6)},gi.QueryHttpDnsReq=function(){this.lUid=0,this.sUA="",this.vDomain=new vi.Vector(new vi.STRING),this.sAppSrc=""},gi.QueryHttpDnsReq.prototype._clone=function(){return new gi.QueryHttpDnsReq},gi.QueryHttpDnsReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.QueryHttpDnsReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.QueryHttpDnsReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sUA),t.writeVector(2,this.vDomain),t.writeString(3,this.sAppSrc)},gi.QueryHttpDnsReq.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sUA=t.readString(1,!1,this.sUA),this.vDomain=t.readVector(2,!1,this.vDomain),this.sAppSrc=t.readString(3,!1,this.sAppSrc)},gi.QueryHttpDnsRsp=function(){this.mDomain2Ip=new vi.Map(new vi.STRING,new gi.HttpDnsItem)},gi.QueryHttpDnsRsp.prototype._clone=function(){return new gi.QueryHttpDnsRsp},gi.QueryHttpDnsRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.QueryHttpDnsRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.QueryHttpDnsRsp.prototype.writeTo=function(t){t.writeMap(0,this.mDomain2Ip)},gi.QueryHttpDnsRsp.prototype.readFrom=function(t){this.mDomain2Ip=t.readMap(0,!1,this.mDomain2Ip)},gi.WSTimeSyncReq=function(){this.sGuid="",this.lClientTime=0},gi.WSTimeSyncReq.prototype._clone=function(){return new gi.WSTimeSyncReq},gi.WSTimeSyncReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.WSTimeSyncReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.WSTimeSyncReq.prototype.writeTo=function(t){t.writeString(0,this.sGuid),t.writeInt64(1,this.lClientTime)},gi.WSTimeSyncReq.prototype.readFrom=function(t){this.sGuid=t.readString(0,!1,this.sGuid),this.lClientTime=t.readInt64(1,!1,this.lClientTime)},gi.WSTimeSyncRsp=function(){this.lServerTime=0},gi.WSTimeSyncRsp.prototype._clone=function(){return new gi.WSTimeSyncRsp},gi.WSTimeSyncRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.WSTimeSyncRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.WSTimeSyncRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lServerTime)},gi.WSTimeSyncRsp.prototype.readFrom=function(t){this.lServerTime=t.readInt64(0,!1,this.lServerTime)},gi.MediaUserId=function(){this.lUid=0,this.sGuid="",this.sToken="",this.sUA="",this.sCookie="",this.iTokenType=0,this.iAppid=0,this.bAnonymous=0,this.sStrUid=""},gi.MediaUserId.prototype._clone=function(){return new gi.MediaUserId},gi.MediaUserId.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.MediaUserId.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.MediaUserId.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sToken),t.writeString(3,this.sUA),t.writeString(4,this.sCookie),t.writeInt32(5,this.iTokenType),t.writeInt32(6,this.iAppid),t.writeInt32(7,this.bAnonymous),t.writeString(8,this.sStrUid)},gi.MediaUserId.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sToken=t.readString(2,!1,this.sToken),this.sUA=t.readString(3,!1,this.sUA),this.sCookie=t.readString(4,!1,this.sCookie),this.iTokenType=t.readInt32(5,!1,this.iTokenType),this.iAppid=t.readInt32(6,!1,this.iAppid),this.bAnonymous=t.readInt32(7,!1,this.bAnonymous),this.sStrUid=t.readString(8,!1,this.sStrUid)},gi.LoginVerifyReq=function(){this.tId=new gi.MediaUserId,this.iCookieDeadTime=0},gi.LoginVerifyReq.prototype._clone=function(){return new gi.LoginVerifyReq},gi.LoginVerifyReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.LoginVerifyReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.LoginVerifyReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeInt32(1,this.iCookieDeadTime)},gi.LoginVerifyReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.iCookieDeadTime=t.readInt32(1,!1,this.iCookieDeadTime)},gi.LoginVerifyRsp=function(){this.iResCode=0,this.lUid=0,this.sCookie="",this.sUid="",this.iAppId=0},gi.LoginVerifyRsp.prototype._clone=function(){return new gi.LoginVerifyRsp},gi.LoginVerifyRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.LoginVerifyRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.LoginVerifyRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iResCode),t.writeInt64(1,this.lUid),t.writeString(2,this.sCookie),t.writeString(3,this.sUid),t.writeInt32(4,this.iAppId)},gi.LoginVerifyRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode),this.lUid=t.readInt64(1,!1,this.lUid),this.sCookie=t.readString(2,!1,this.sCookie),this.sUid=t.readString(3,!1,this.sUid),this.iAppId=t.readInt32(4,!1,this.iAppId)},gi.JoinMediaGroupReq=function(){this.tId=new gi.MediaUserId,this.vGroupId=new vi.Vector(new vi.STRING)},gi.JoinMediaGroupReq.prototype._clone=function(){return new gi.JoinMediaGroupReq},gi.JoinMediaGroupReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.JoinMediaGroupReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.JoinMediaGroupReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeVector(1,this.vGroupId)},gi.JoinMediaGroupReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.vGroupId=t.readVector(1,!1,this.vGroupId)},gi.JoinMediaGroupRsp=function(){this.iCode=0,this.sMsg="",this.vGroupId=new vi.Vector(new vi.STRING)},gi.JoinMediaGroupRsp.prototype._clone=function(){return new gi.JoinMediaGroupRsp},gi.JoinMediaGroupRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.JoinMediaGroupRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.JoinMediaGroupRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeString(1,this.sMsg),t.writeVector(2,this.vGroupId)},gi.JoinMediaGroupRsp.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.sMsg=t.readString(1,!1,this.sMsg),this.vGroupId=t.readVector(2,!1,this.vGroupId)},gi.QuitMediaGroupReq=function(){this.tId=new gi.MediaUserId,this.vGroupId=new vi.Vector(new vi.STRING)},gi.QuitMediaGroupReq.prototype._clone=function(){return new gi.QuitMediaGroupReq},gi.QuitMediaGroupReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.QuitMediaGroupReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.QuitMediaGroupReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeVector(1,this.vGroupId)},gi.QuitMediaGroupReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.vGroupId=t.readVector(1,!1,this.vGroupId)},gi.QuitMediaGroupRsp=function(){this.iCode=0,this.sMsg="",this.vGroupId=new vi.Vector(new vi.STRING)},gi.QuitMediaGroupRsp.prototype._clone=function(){return new gi.QuitMediaGroupRsp},gi.QuitMediaGroupRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.QuitMediaGroupRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.QuitMediaGroupRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeString(1,this.sMsg),t.writeVector(2,this.vGroupId)},gi.QuitMediaGroupRsp.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.sMsg=t.readString(1,!1,this.sMsg),this.vGroupId=t.readVector(2,!1,this.vGroupId)},gi.ikk=1,gi.skk="123",gi.eIType={k4AM:10001,k6AM:10002},gi.EM_PCDN_MODE={E_PcdnMode_Min:0,E_PcdnMode_P2pHttpSubstream:1,E_PcdnMode_P2pOutsideSdkSubstream:2,E_PcdnMode_FlvHttpFullstream:3,E_PcdnMode_FlvOutsideSdkFullstream:4,E_PcdnMode_Max:255},gi.EM_BUSI_TYPE={E_BusiType_Min:0,E_BusiType_Live:1,E_BusiType_Max:255},gi.EM_CLINET_TYPE={E_CLIENT_MIN:0,E_CLIENT_PC:1,E_CLIENT_ADR:2,E_CLIENT_IOS:3,E_CLIENT_WEB:4,E_CLIENT_MAX:255},gi.ERR_CODE_FOR_HY_PCDNGW_CLIENT_RSP={E_SUCCESS:0,E_HYGW_ERR:1,E_PCDNGW_40X:2,E_PCDNGW_50X:3,E_PCDNGW_TIO:4,E_PCDNGW_RSPERR:5,E_CLIREQ_ERR:6,E_PCDN_OFF:7,E_LIMIT_FLOWS:8},gi.MyReq=function(){this.name="",this.opt="",this.mMap=new vi.Map(new vi.STRING,new vi.STRING)},gi.MyReq.prototype._clone=function(){return new gi.MyReq},gi.MyReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.MyReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.MyReq.prototype.writeTo=function(t){t.writeString(0,this.name),t.writeString(1,this.opt),t.writeMap(2,this.mMap)},gi.MyReq.prototype.readFrom=function(t){this.name=t.readString(0,!1,this.name),this.opt=t.readString(1,!1,this.opt),this.mMap=t.readMap(2,!1,this.mMap)},gi.MyRsp=function(){this.value=0,this.origin=new gi.MyReq,this.types=new vi.Vector(new vi.INT32),this.eType=0},gi.MyRsp.prototype._clone=function(){return new gi.MyRsp},gi.MyRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.MyRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.MyRsp.prototype.writeTo=function(t){t.writeInt32(0,this.value),t.writeStruct(1,this.origin),t.writeVector(2,this.types),t.writeInt32(3,this.eType)},gi.MyRsp.prototype.readFrom=function(t){this.value=t.readInt32(0,!1,this.value),this.origin=t.readStruct(1,!1,this.origin),this.types=t.readVector(2,!1,this.types),this.eType=t.readInt32(3,!1,this.eType)},gi.ClientQueryPcdnScheduleReq=function(){this.lReqTs=0,this.lUid=0,this.sGuid="",this.lAnchorUid=0,this.iCdnLine=0,this.iCliType=0,this.lBucketPara=0,this.vPcdnMode=new vi.Vector(new vi.INT32),this.iBusiType=0,this.sStreamName="",this.mPcdnModeCliSupportPcdns=new vi.Map(new vi.INT32,new vi.Vector(new vi.STRING))},gi.ClientQueryPcdnScheduleReq.prototype._clone=function(){return new gi.ClientQueryPcdnScheduleReq},gi.ClientQueryPcdnScheduleReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientQueryPcdnScheduleReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientQueryPcdnScheduleReq.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lUid),t.writeString(2,this.sGuid),t.writeInt64(3,this.lAnchorUid),t.writeInt32(4,this.iCdnLine),t.writeInt32(5,this.iCliType),t.writeInt64(6,this.lBucketPara),t.writeVector(30,this.vPcdnMode),t.writeInt32(31,this.iBusiType),t.writeString(32,this.sStreamName),t.writeMap(100,this.mPcdnModeCliSupportPcdns)},gi.ClientQueryPcdnScheduleReq.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lUid=t.readInt64(1,!1,this.lUid),this.sGuid=t.readString(2,!1,this.sGuid),this.lAnchorUid=t.readInt64(3,!1,this.lAnchorUid),this.iCdnLine=t.readInt32(4,!1,this.iCdnLine),this.iCliType=t.readInt32(5,!1,this.iCliType),this.lBucketPara=t.readInt64(6,!1,this.lBucketPara),this.vPcdnMode=t.readVector(30,!1,this.vPcdnMode),this.iBusiType=t.readInt32(31,!1,this.iBusiType),this.sStreamName=t.readString(32,!1,this.sStreamName),this.mPcdnModeCliSupportPcdns=t.readMap(100,!1,this.mPcdnModeCliSupportPcdns)},gi.ClientQueryPcdnScheduleRsp=function(){this.lReqTs=0,this.lRspTs=0,this.iErrCode=0,this.mPcdnModeSwitch=new vi.Map(new vi.INT32,new vi.INT32),this.cliProv="",this.cliIsp="",this.lUid=0,this.iCdnLine=0,this.sStreamName="",this.mPcdnModePcdnName=new vi.Map(new vi.INT32,new vi.STRING)},gi.ClientQueryPcdnScheduleRsp.prototype._clone=function(){return new gi.ClientQueryPcdnScheduleRsp},gi.ClientQueryPcdnScheduleRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientQueryPcdnScheduleRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientQueryPcdnScheduleRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lRspTs),t.writeInt32(2,this.iErrCode),t.writeMap(10,this.mPcdnModeSwitch),t.writeString(30,this.cliProv),t.writeString(31,this.cliIsp),t.writeInt64(100,this.lUid),t.writeInt32(101,this.iCdnLine),t.writeString(102,this.sStreamName),t.writeMap(200,this.mPcdnModePcdnName)},gi.ClientQueryPcdnScheduleRsp.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lRspTs=t.readInt64(1,!1,this.lRspTs),this.iErrCode=t.readInt32(2,!1,this.iErrCode),this.mPcdnModeSwitch=t.readMap(10,!1,this.mPcdnModeSwitch),this.cliProv=t.readString(30,!1,this.cliProv),this.cliIsp=t.readString(31,!1,this.cliIsp),this.lUid=t.readInt64(100,!1,this.lUid),this.iCdnLine=t.readInt32(101,!1,this.iCdnLine),this.sStreamName=t.readString(102,!1,this.sStreamName),this.mPcdnModePcdnName=t.readMap(200,!1,this.mPcdnModePcdnName)},gi.ClientGetStunAndPcdnProxyReq=function(){this.lReqTs=0,this.lUid=0,this.sStreamname="",this.iBaseSubs=0,this.vSub=new vi.Vector(new vi.INT32),this.sGuid="",this.lAnchorUid=0,this.iCdnLine=0,this.iCliType=0,this.lBucketPara=0,this.iBusiType=0,this.curPcdnName=""},gi.ClientGetStunAndPcdnProxyReq.prototype._clone=function(){return new gi.ClientGetStunAndPcdnProxyReq},gi.ClientGetStunAndPcdnProxyReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetStunAndPcdnProxyReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetStunAndPcdnProxyReq.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lUid),t.writeString(2,this.sStreamname),t.writeInt32(3,this.iBaseSubs),t.writeVector(4,this.vSub),t.writeString(5,this.sGuid),t.writeInt64(6,this.lAnchorUid),t.writeInt32(7,this.iCdnLine),t.writeInt32(8,this.iCliType),t.writeInt64(9,this.lBucketPara),t.writeInt32(10,this.iBusiType),t.writeString(11,this.curPcdnName)},gi.ClientGetStunAndPcdnProxyReq.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lUid=t.readInt64(1,!1,this.lUid),this.sStreamname=t.readString(2,!1,this.sStreamname),this.iBaseSubs=t.readInt32(3,!1,this.iBaseSubs),this.vSub=t.readVector(4,!1,this.vSub),this.sGuid=t.readString(5,!1,this.sGuid),this.lAnchorUid=t.readInt64(6,!1,this.lAnchorUid),this.iCdnLine=t.readInt32(7,!1,this.iCdnLine),this.iCliType=t.readInt32(8,!1,this.iCliType),this.lBucketPara=t.readInt64(9,!1,this.lBucketPara),this.iBusiType=t.readInt32(10,!1,this.iBusiType),this.curPcdnName=t.readString(11,!1,this.curPcdnName)},gi.PCdnProxyUrl=function(){this.sProtocol="",this.vUrl=new vi.Vector(new vi.STRING),this.iStatusPcdn=0,this.iPcdnThresholdHotDegreeIn=-1,this.iPcdnThresholdHotDegreeKick=-1,this.iPcdnNowHotDegree=-1,this.iPcdnNowPullstreamUcnt=-1,this.iPcdnNowGetpcdnUcnt=-1},gi.PCdnProxyUrl.prototype._clone=function(){return new gi.PCdnProxyUrl},gi.PCdnProxyUrl.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.PCdnProxyUrl.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.PCdnProxyUrl.prototype.writeTo=function(t){t.writeString(0,this.sProtocol),t.writeVector(2,this.vUrl),t.writeInt32(3,this.iStatusPcdn),t.writeInt32(10,this.iPcdnThresholdHotDegreeIn),t.writeInt32(11,this.iPcdnThresholdHotDegreeKick),t.writeInt32(12,this.iPcdnNowHotDegree),t.writeInt32(13,this.iPcdnNowPullstreamUcnt),t.writeInt32(14,this.iPcdnNowGetpcdnUcnt)},gi.PCdnProxyUrl.prototype.readFrom=function(t){this.sProtocol=t.readString(0,!1,this.sProtocol),this.vUrl=t.readVector(2,!1,this.vUrl),this.iStatusPcdn=t.readInt32(3,!1,this.iStatusPcdn),this.iPcdnThresholdHotDegreeIn=t.readInt32(10,!1,this.iPcdnThresholdHotDegreeIn),this.iPcdnThresholdHotDegreeKick=t.readInt32(11,!1,this.iPcdnThresholdHotDegreeKick),this.iPcdnNowHotDegree=t.readInt32(12,!1,this.iPcdnNowHotDegree),this.iPcdnNowPullstreamUcnt=t.readInt32(13,!1,this.iPcdnNowPullstreamUcnt),this.iPcdnNowGetpcdnUcnt=t.readInt32(14,!1,this.iPcdnNowGetpcdnUcnt)},gi.ClientGetStunAndPcdnProxyRsp=function(){this.lReqTs=0,this.lRspTs=0,this.lUid=0,this.sStreamname="",this.iErrCode=0,this.iBaseSubs=0,this.mSubToPullStreamUrl=new vi.Map(new vi.INT32,new vi.Map(new vi.STRING,new gi.PCdnProxyUrl)),this.cliProv="",this.cliIsp="",this.pcdnName="",this.iCdnLine=0,this.sPcdnIsp="",this.sPcdnArea=""},gi.ClientGetStunAndPcdnProxyRsp.prototype._clone=function(){return new gi.ClientGetStunAndPcdnProxyRsp},gi.ClientGetStunAndPcdnProxyRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetStunAndPcdnProxyRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetStunAndPcdnProxyRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lRspTs),t.writeInt64(2,this.lUid),t.writeString(3,this.sStreamname),t.writeInt32(4,this.iErrCode),t.writeInt32(5,this.iBaseSubs),t.writeMap(12,this.mSubToPullStreamUrl),t.writeString(13,this.cliProv),t.writeString(14,this.cliIsp),t.writeString(15,this.pcdnName),t.writeInt32(100,this.iCdnLine),t.writeString(200,this.sPcdnIsp),t.writeString(201,this.sPcdnArea)},gi.ClientGetStunAndPcdnProxyRsp.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lRspTs=t.readInt64(1,!1,this.lRspTs),this.lUid=t.readInt64(2,!1,this.lUid),this.sStreamname=t.readString(3,!1,this.sStreamname),this.iErrCode=t.readInt32(4,!1,this.iErrCode),this.iBaseSubs=t.readInt32(5,!1,this.iBaseSubs),this.mSubToPullStreamUrl=t.readMap(12,!1,this.mSubToPullStreamUrl),this.cliProv=t.readString(13,!1,this.cliProv),this.cliIsp=t.readString(14,!1,this.cliIsp),this.pcdnName=t.readString(15,!1,this.pcdnName),this.iCdnLine=t.readInt32(100,!1,this.iCdnLine),this.sPcdnIsp=t.readString(200,!1,this.sPcdnIsp),this.sPcdnArea=t.readString(201,!1,this.sPcdnArea)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq=function(){this.lReqTs=0,this.lUid=0,this.sGuid="",this.lAnchorUid=0,this.iCdnLine=0,this.sStreamname="",this.iBaseSubs=0,this.vSub=new vi.Vector(new vi.INT32),this.iCliType=0,this.lBucketPara=0,this.iBusiType=0,this.vCliSupportPcdns=new vi.Vector(new vi.STRING),this.curPcdnName=""},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq.prototype._clone=function(){return new gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lUid),t.writeString(2,this.sGuid),t.writeInt64(3,this.lAnchorUid),t.writeInt32(4,this.iCdnLine),t.writeString(5,this.sStreamname),t.writeInt32(6,this.iBaseSubs),t.writeVector(7,this.vSub),t.writeInt32(8,this.iCliType),t.writeInt64(9,this.lBucketPara),t.writeInt32(10,this.iBusiType),t.writeVector(11,this.vCliSupportPcdns),t.writeString(12,this.curPcdnName)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoReq.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lUid=t.readInt64(1,!1,this.lUid),this.sGuid=t.readString(2,!1,this.sGuid),this.lAnchorUid=t.readInt64(3,!1,this.lAnchorUid),this.iCdnLine=t.readInt32(4,!1,this.iCdnLine),this.sStreamname=t.readString(5,!1,this.sStreamname),this.iBaseSubs=t.readInt32(6,!1,this.iBaseSubs),this.vSub=t.readVector(7,!1,this.vSub),this.iCliType=t.readInt32(8,!1,this.iCliType),this.lBucketPara=t.readInt64(9,!1,this.lBucketPara),this.iBusiType=t.readInt32(10,!1,this.iBusiType),this.vCliSupportPcdns=t.readVector(11,!1,this.vCliSupportPcdns),this.curPcdnName=t.readString(12,!1,this.curPcdnName)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp=function(){this.lReqTs=0,this.lRspTs=0,this.iErrCode=0,this.sPcdnName="",this.mP2pSubstreamUrl=new vi.Map(new vi.INT32,new vi.STRING),this.cliProv="",this.cliIsp="",this.lUid=0,this.iCdnLine=0,this.sStreamname=""},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp.prototype._clone=function(){return new gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lRspTs),t.writeInt32(2,this.iErrCode),t.writeString(10,this.sPcdnName),t.writeMap(11,this.mP2pSubstreamUrl),t.writeString(30,this.cliProv),t.writeString(31,this.cliIsp),t.writeInt64(100,this.lUid),t.writeInt32(101,this.iCdnLine),t.writeString(102,this.sStreamname)},gi.ClientGetPcdnP2pOutsideSdkSubstreamInfoRsp.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lRspTs=t.readInt64(1,!1,this.lRspTs),this.iErrCode=t.readInt32(2,!1,this.iErrCode),this.sPcdnName=t.readString(10,!1,this.sPcdnName),this.mP2pSubstreamUrl=t.readMap(11,!1,this.mP2pSubstreamUrl),this.cliProv=t.readString(30,!1,this.cliProv),this.cliIsp=t.readString(31,!1,this.cliIsp),this.lUid=t.readInt64(100,!1,this.lUid),this.iCdnLine=t.readInt32(101,!1,this.iCdnLine),this.sStreamname=t.readString(102,!1,this.sStreamname)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq=function(){this.lReqTs=0,this.lUid=0,this.sGuid="",this.lAnchorUid=0,this.iCdnLine=0,this.sStreamName="",this.iRatio=0,this.sCodec="",this.iCliType=0,this.lBucketPara=0,this.iBusiType=0,this.vCliSupportPcdns=new vi.Vector(new vi.STRING),this.curPcdnName=""},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq.prototype._clone=function(){return new gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lUid),t.writeString(2,this.sGuid),t.writeInt64(3,this.lAnchorUid),t.writeInt32(4,this.iCdnLine),t.writeString(5,this.sStreamName),t.writeInt32(6,this.iRatio),t.writeString(7,this.sCodec),t.writeInt32(8,this.iCliType),t.writeInt64(9,this.lBucketPara),t.writeInt32(10,this.iBusiType),t.writeVector(11,this.vCliSupportPcdns),t.writeString(12,this.curPcdnName)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lUid=t.readInt64(1,!1,this.lUid),this.sGuid=t.readString(2,!1,this.sGuid),this.lAnchorUid=t.readInt64(3,!1,this.lAnchorUid),this.iCdnLine=t.readInt32(4,!1,this.iCdnLine),this.sStreamName=t.readString(5,!1,this.sStreamName),this.iRatio=t.readInt32(6,!1,this.iRatio),this.sCodec=t.readString(7,!1,this.sCodec),this.iCliType=t.readInt32(8,!1,this.iCliType),this.lBucketPara=t.readInt64(9,!1,this.lBucketPara),this.iBusiType=t.readInt32(10,!1,this.iBusiType),this.vCliSupportPcdns=t.readVector(11,!1,this.vCliSupportPcdns),this.curPcdnName=t.readString(12,!1,this.curPcdnName)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp=function(){this.lReqTs=0,this.lRspTs=0,this.iErrCode=0,this.sPcdnName="",this.sFlvFullstreamUrl="",this.cliProv="",this.cliIsp="",this.lUid=0,this.iCdnLine=0,this.sStreamName="",this.iRatio=0,this.sTransUid=""},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp.prototype._clone=function(){return new gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp.prototype.writeTo=function(t){t.writeInt64(0,this.lReqTs),t.writeInt64(1,this.lRspTs),t.writeInt32(2,this.iErrCode),t.writeString(10,this.sPcdnName),t.writeString(11,this.sFlvFullstreamUrl),t.writeString(30,this.cliProv),t.writeString(31,this.cliIsp),t.writeInt64(100,this.lUid),t.writeInt32(101,this.iCdnLine),t.writeString(102,this.sStreamName),t.writeInt32(103,this.iRatio),t.writeString(104,this.sTransUid)},gi.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp.prototype.readFrom=function(t){this.lReqTs=t.readInt64(0,!1,this.lReqTs),this.lRspTs=t.readInt64(1,!1,this.lRspTs),this.iErrCode=t.readInt32(2,!1,this.iErrCode),this.sPcdnName=t.readString(10,!1,this.sPcdnName),this.sFlvFullstreamUrl=t.readString(11,!1,this.sFlvFullstreamUrl),this.cliProv=t.readString(30,!1,this.cliProv),this.cliIsp=t.readString(31,!1,this.cliIsp),this.lUid=t.readInt64(100,!1,this.lUid),this.iCdnLine=t.readInt32(101,!1,this.iCdnLine),this.sStreamName=t.readString(102,!1,this.sStreamName),this.iRatio=t.readInt32(103,!1,this.iRatio),this.sTransUid=t.readString(104,!1,this.sTransUid)},gi.RecSysInfo=function(){this.sAnchorUid="",this.sRoomId="",this.sDispatchId="",this.iScene=0,this.sStrategy="",this.lServerTs=0,this.lAction=0,this.sActionReason="",this.sActValue=""},gi.RecSysInfo.prototype._clone=function(){return new gi.RecSysInfo},gi.RecSysInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.RecSysInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.RecSysInfo.prototype.writeTo=function(t){t.writeString(0,this.sAnchorUid),t.writeString(1,this.sRoomId),t.writeString(2,this.sDispatchId),t.writeInt32(3,this.iScene),t.writeString(4,this.sStrategy),t.writeInt64(5,this.lServerTs),t.writeInt64(6,this.lAction),t.writeString(7,this.sActionReason),t.writeString(8,this.sActValue)},gi.RecSysInfo.prototype.readFrom=function(t){this.sAnchorUid=t.readString(0,!1,this.sAnchorUid),this.sRoomId=t.readString(1,!1,this.sRoomId),this.sDispatchId=t.readString(2,!1,this.sDispatchId),this.iScene=t.readInt32(3,!1,this.iScene),this.sStrategy=t.readString(4,!1,this.sStrategy),this.lServerTs=t.readInt64(5,!1,this.lServerTs),this.lAction=t.readInt64(6,!1,this.lAction),this.sActionReason=t.readString(7,!1,this.sActionReason),this.sActValue=t.readString(8,!1,this.sActValue)},gi.RecSysReq=function(){this.tId=new gi.MediaUserId,this.sAnchorUid="",this.sRoomId="",this.sDispatchId="",this.iScene=0,this.bDebug=0,this.sNet="",this.sSdkVer="",this.mAppendInfo=new vi.Map(new vi.STRING,new vi.STRING)},gi.RecSysReq.prototype._clone=function(){return new gi.RecSysReq},gi.RecSysReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.RecSysReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.RecSysReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeString(1,this.sAnchorUid),t.writeString(2,this.sRoomId),t.writeString(3,this.sDispatchId),t.writeInt32(4,this.iScene),t.writeInt32(5,this.bDebug),t.writeString(6,this.sNet),t.writeString(7,this.sSdkVer),t.writeMap(8,this.mAppendInfo)},gi.RecSysReq.prototype.readFrom=function(t){this.tId=t.readStruct(0,!1,this.tId),this.sAnchorUid=t.readString(1,!1,this.sAnchorUid),this.sRoomId=t.readString(2,!1,this.sRoomId),this.sDispatchId=t.readString(3,!1,this.sDispatchId),this.iScene=t.readInt32(4,!1,this.iScene),this.bDebug=t.readInt32(5,!1,this.bDebug),this.sNet=t.readString(6,!1,this.sNet),this.sSdkVer=t.readString(7,!1,this.sSdkVer),this.mAppendInfo=t.readMap(8,!1,this.mAppendInfo)},gi.RecSysRsp=function(){this.iStatus=0,this.sError="",this.tRecSysInfo=new gi.RecSysInfo},gi.RecSysRsp.prototype._clone=function(){return new gi.RecSysRsp},gi.RecSysRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.RecSysRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.RecSysRsp.prototype.writeTo=function(t){t.writeInt32(0,this.iStatus),t.writeString(1,this.sError),t.writeStruct(2,this.tRecSysInfo)},gi.RecSysRsp.prototype.readFrom=function(t){this.iStatus=t.readInt32(0,!1,this.iStatus),this.sError=t.readString(1,!1,this.sError),this.tRecSysInfo=t.readStruct(2,!1,this.tRecSysInfo)},gi.RecSysNotice=function(){this.tRecSysInfo=new gi.RecSysInfo},gi.RecSysNotice.prototype._clone=function(){return new gi.RecSysNotice},gi.RecSysNotice.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.RecSysNotice.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.RecSysNotice.prototype.writeTo=function(t){t.writeStruct(0,this.tRecSysInfo)},gi.RecSysNotice.prototype.readFrom=function(t){this.tRecSysInfo=t.readStruct(0,!1,this.tRecSysInfo)},gi.VodUrlRange=function(){this.sUrl="",this.sRange="",this.index=0},gi.VodUrlRange.prototype._clone=function(){return new gi.VodUrlRange},gi.VodUrlRange.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.VodUrlRange.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.VodUrlRange.prototype.writeTo=function(t){t.writeString(0,this.sUrl),t.writeString(1,this.sRange),t.writeInt64(2,this.index)},gi.VodUrlRange.prototype.readFrom=function(t){this.sUrl=t.readString(0,!1,this.sUrl),this.sRange=t.readString(1,!1,this.sRange),this.index=t.readInt64(2,!1,this.index)},gi.VodPcdnProxyUrl=function(){this.reqKey=new gi.VodUrlRange,this.iStatusPcdn=0,this.iVodPcdnHotDegreeIn=-1,this.iVodPcdnHotDegreeNow=-1,this.vUrls=new vi.Vector(new vi.STRING)},gi.VodPcdnProxyUrl.prototype._clone=function(){return new gi.VodPcdnProxyUrl},gi.VodPcdnProxyUrl.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.VodPcdnProxyUrl.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.VodPcdnProxyUrl.prototype.writeTo=function(t){t.writeStruct(0,this.reqKey),t.writeInt32(1,this.iStatusPcdn),t.writeInt32(2,this.iVodPcdnHotDegreeIn),t.writeInt32(3,this.iVodPcdnHotDegreeNow),t.writeVector(4,this.vUrls)},gi.VodPcdnProxyUrl.prototype.readFrom=function(t){this.reqKey=t.readStruct(0,!1,this.reqKey),this.iStatusPcdn=t.readInt32(1,!1,this.iStatusPcdn),this.iVodPcdnHotDegreeIn=t.readInt32(2,!1,this.iVodPcdnHotDegreeIn),this.iVodPcdnHotDegreeNow=t.readInt32(3,!1,this.iVodPcdnHotDegreeNow),this.vUrls=t.readVector(4,!1,this.vUrls)},gi.ClientGetVodPcdnProxyReq=function(){this.appid=0,this.lReqTs=0,this.lUid=0,this.sGuid="",this.iCliType=0,this.lBucketPara=0,this.sOrigUrl="",this.vKeys=new vi.Vector(new gi.VodUrlRange)},gi.ClientGetVodPcdnProxyReq.prototype._clone=function(){return new gi.ClientGetVodPcdnProxyReq},gi.ClientGetVodPcdnProxyReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetVodPcdnProxyReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetVodPcdnProxyReq.prototype.writeTo=function(t){t.writeInt32(0,this.appid),t.writeInt64(1,this.lReqTs),t.writeInt64(2,this.lUid),t.writeString(3,this.sGuid),t.writeInt32(4,this.iCliType),t.writeInt64(5,this.lBucketPara),t.writeString(6,this.sOrigUrl),t.writeVector(7,this.vKeys)},gi.ClientGetVodPcdnProxyReq.prototype.readFrom=function(t){this.appid=t.readInt32(0,!1,this.appid),this.lReqTs=t.readInt64(1,!1,this.lReqTs),this.lUid=t.readInt64(2,!1,this.lUid),this.sGuid=t.readString(3,!1,this.sGuid),this.iCliType=t.readInt32(4,!1,this.iCliType),this.lBucketPara=t.readInt64(5,!1,this.lBucketPara),this.sOrigUrl=t.readString(6,!1,this.sOrigUrl),this.vKeys=t.readVector(7,!1,this.vKeys)},gi.ClientGetVodPcdnProxyReqRsp=function(){this.appid=0,this.lReqTs=0,this.lRspTs=0,this.lUid=0,this.sOrigUrl="",this.iErrCode=0,this.vPcdnUrls=new vi.Vector(new gi.VodPcdnProxyUrl),this.cliProv="",this.cliIsp="",this.pcdnName="",this.sPcdnIsp="",this.sPcdnArea=""},gi.ClientGetVodPcdnProxyReqRsp.prototype._clone=function(){return new gi.ClientGetVodPcdnProxyReqRsp},gi.ClientGetVodPcdnProxyReqRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},gi.ClientGetVodPcdnProxyReqRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},gi.ClientGetVodPcdnProxyReqRsp.prototype.writeTo=function(t){t.writeInt32(0,this.appid),t.writeInt64(1,this.lReqTs),t.writeInt64(2,this.lRspTs),t.writeInt64(3,this.lUid),t.writeString(4,this.sOrigUrl),t.writeInt32(5,this.iErrCode),t.writeVector(6,this.vPcdnUrls),t.writeString(7,this.cliProv),t.writeString(8,this.cliIsp),t.writeString(9,this.pcdnName),t.writeString(10,this.sPcdnIsp),t.writeString(11,this.sPcdnArea)},gi.ClientGetVodPcdnProxyReqRsp.prototype.readFrom=function(t){this.appid=t.readInt32(0,!1,this.appid),this.lReqTs=t.readInt64(1,!1,this.lReqTs),this.lRspTs=t.readInt64(2,!1,this.lRspTs),this.lUid=t.readInt64(3,!1,this.lUid),this.sOrigUrl=t.readString(4,!1,this.sOrigUrl),this.iErrCode=t.readInt32(5,!1,this.iErrCode),this.vPcdnUrls=t.readVector(6,!1,this.vPcdnUrls),this.cliProv=t.readString(7,!1,this.cliProv),this.cliIsp=t.readString(8,!1,this.cliIsp),this.pcdnName=t.readString(9,!1,this.pcdnName),this.sPcdnIsp=t.readString(10,!1,this.sPcdnIsp),this.sPcdnArea=t.readString(11,!1,this.sPcdnArea)};var Si=i(6),wi=i(5),bi=i(15),Ii=i.n(bi),Ti=i(7),Pi=i(20),Ei=!!Number(localStorage._printProtocol),ki=!!Number(localStorage._printGateway),Ri=function(t){Object(Si.a)(n,t);var e=Object(wi.a)(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).WEBSOCKET_CONNECTED="WEBSOCKET_CONNECTED",t.WEBSOCKET_CLOSED="WEBSOCKET_CLOSED",t.WEBSOCKET_ERROR="WEBSOCKET_ERROR",t.TAFLINK_INITED="TAFLINK_INITED",t._taf=null,t.delayWup=[],t.delayListener=[],t.streamName=null,t.requestId=1,t}return Object(g.a)(n,[{key:"getRequestId",value:function(){return this.requestId++,1e5===this.requestId&&(this.requestId=1),this.requestId}},{key:"getTaf",value:function(){return this._taf}},{key:"setTafHandler",value:function(t){var e=F.a.now();E.a.log("%c[TIME] initTafTime="+e,"color:#A23400;background:#FFF5C2"),t.getTaf&&_i.setTaf(t.getTaf()),t.registerUriMap(Oi.UriMapping),t.registerWupMap(Oi.WupMapping),this._taf=t,this._taf.connected?this._onConnected():this._taf.addListener(this.WEBSOCKET_CONNECTED,this._onConnected.bind(this)),this.emit(this.TAFLINK_INITED)}},{key:"_onConnected",value:function(){E.a.log("TafLink._onConnected sendWup size=".concat(this.delayWup.length));var t=this;this.delayWup.forEach((function(e){var i=e.servantName,n=e.funcName,r=e.data,o=e.callback,a=e.once,s=e.iRequestId,u=e.noTid;t.sendWup(i,n,r,o,a,s,u)})),this.delayWup=[],this.delayListener.forEach((function(e){var i=e.p0,n=e.p1,r=e.p2;switch(i){case"add":t.addListener(n,r);break;case"remove":t.removeListener(n,r);break;case"dispatch":t.dispatch(n,r)}})),this.delayListener=[]}},{key:"getUserId",value:function(){return this._taf.getUserId()}},{key:"sendWup",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!this.connected)return E.a.log("TafLink.sendWup connected=false",t,e),void this.delayWup.push({servantName:t,funcName:e,data:i,callback:n,once:r,iRequestId:o,noTid:a});this._taf.sendWup2?this._taf.sendWup2(t,e,i,n,r,o,a):this._taf.sendWup(t,e,i,n,r,o,a)}},{key:"sendYY",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._taf){var a=t.constructor.name,s=Ti.a[a];s||"function"!=typeof t.marshall||(s=new DataView(t.marshall().buffer).getUint32(4,!0)),Ei&&E.a.log("%c>>>>>>> "+a,Ci("#009100"),"uri="+s,t);var u=null,c="mediaui",l="getInfoFromVGM";if("function"==typeof this._taf.packVGInfo)u=this._taf.packVGInfo(s,t,this.streamName);else{var h=this._taf.getTaf().BinBuffer;c="videogateway",l=o?"getInfoFromCdnVG":"getInfoFromVG",(u=new _i.GetInfoFromVGReq).lUid=n||0,u.sMsg=new h(t.marshall().buffer),u.sProtoName="yy",u.iUri=s||0,u.lSid=0,u.tId=this.getUserId()}this.sendWup(c,l,u,function(n){if(0!=n.sMsg.len){if(!n.lUid||!u.lUid||n.lUid==u.lUid){var r=new DataView(n.sMsg.buffer),s=new Pi.a(r);if(!(a=Ti.a[s.uri]))throw ki||E.a.log("%c<<<<<<< %crspWup:%c GetInfoFromVG",Ci("#0000E3"),Ci("black"),Ci("#0000E3"),"videogateway",n),new Error("[x] Unmatched protocol, uri=".concat(s.uri>>8," resCode=").concat(s.resCode," len=").concat(s.len));var c=s,l=null;try{PLATFORM_FLV||(l=o?i(34)("./"+a).default:i(53)("./"+a).default)}catch(t){E.a.warn("[x] Unmatched protocol",s.uri>>8,a)}l&&(c=new l).unmarshall(s),Ei&&E.a.log("%c<<<<<<< "+a,Ci("#0000E3"),c),"function"==typeof e?e(c):this.dispatch(s.uri,c)}}else E.a.warn("GetInfoFromVG response an empty pkg.",t,u,n)}.bind(this),r)}else E.a.warn("TafLink.sendYY taf not init!")}},{key:"addListener",value:function(t,e){this.connected?this._taf.addListener(t,e):this.delayListener.push({p0:"add",p1:t,p2:e})}},{key:"removeListener",value:function(t,e){this.connected?this._taf.removeListener(t,e):this.delayListener.push({p0:"remove",p1:t,p2:e})}},{key:"dispatch",value:function(t,e){this.connected?this._taf.dispatch(t,e):this.delayListener.push({p0:"dispatch",p1:t,p2:e})}},{key:"inited",get:function(){return!!this._taf}},{key:"connected",get:function(){return this._taf&&this._taf.connected}}]),n}(bi.EventEmitter);function Ci(t,e,i){var n="font-weight:900";return t&&(n+=";color:"+t),e&&(n+=";background:"+e),i&&(n+=";border:3px solid "+i),n}var Oi={UriMapping:{8102:_i.LivingStreamInfoNotice,8103:_i.LivingStreamEndNotice,1025601:_i.LiveMeetingSyncNotice},WupMapping:{getInfoFromVG:_i.GetInfoFromVGRsp,GetInfoFromVG:_i.GetInfoFromVGRsp,getInfoFromCdnVG:_i.GetInfoFromVGRsp,getCdnTokenInfoEx:_i.GetCdnTokenExRsp,getLivingStreamInfo:_i.GetLivingStreamInfoRsp,getP2PStreamInfo:_i.GetP2PStreamInfoRsp,getP2PStreamTokenInfoEx:_i.GetP2PStreamTokenExRsp,queryHttpDns:_i.QueryHttpDnsRsp,loginVerify:_i.LoginVerifyRsp,joinGroup:_i.JoinMediaGroupRsp,quitGroup:_i.QuitMediaGroupRsp,wsTimeSync:_i.WSTimeSyncRsp,onClientGetStunAndPcdnProxyReq:_i.ClientGetStunAndPcdnProxyRsp,clientQueryPcdnSchedule:_i.ClientQueryPcdnScheduleRsp,onClientGetPcdnFlvOutsideSdkFullstreamInfo:_i.ClientGetPcdnFlvOutsideSdkFullstreamInfoRsp,onClientGetVodPcdnProxyReq:_i.ClientGetVodPcdnProxyReqRsp,getMediaRec:_i.RecSysRsp},NoLog:{8102:1,8103:1,1025601:1,getInfoFromVG:1,GetInfoFromVG:1,getInfoFromCdnVG:1,getInfoFromVGM:1,getCdnTokenInfoEx:1,videoClientReport:1}},Ai=new Ri,Li=function(){function t(e,i){Object(v.a)(this,t),this._statVod=e,this._oldStat=i,this._open=!0,this._fragsMap=new m.default,this._subsUrlReqTs=0,this._onGetVodPcdnProxyBind=this._onGetVodPcdnProxy.bind(this)}return Object(g.a)(t,[{key:"getVodPcdnProxy",value:function(t,e){if(this._open){this._subsUrlReqTs=F.a.now();var i=new _i.ClientGetVodPcdnProxyReq;i.appid=N.appid,i.lReqTs=Date.now(),i.lUid=N.uid,i.sGuid=N.sGuid,i.iCliType=_i.EM_CLINET_TYPE.E_CLIENT_WEB,i.lBucketPara=0,i.sOrigUrl=t,this._fragsMap.clear();for(var n=e.length,r=0;r<n;r++){var o=e[r],a=o.url.replace(/http.*?\/\//,"");this._fragsMap.set(o.sn,o);var s=new _i.VodUrlRange;s.sUrl=a,o.byteRangeEndOffset&&(s.sRange="bytes=".concat(o.byteRangeStartOffset,"-").concat(o.byteRangeEndOffset-1)),s.index=o.sn,i.vKeys.value.push(s)}Number(localStorage._print_pcdn_req)<=1&&E.a.log("PcdnVodProxy.getVodPcdnProxy",i),Ai.sendWup("hypcdnvodgw","onClientGetVodPcdnProxyReq",i,this._onGetVodPcdnProxyBind)}}},{key:"_onGetVodPcdnProxy",value:function(t){if(Number(localStorage._print_pcdn_req)<=1&&E.a.log("PcdnVodProxy._onGetVodPcdnProxy",t),this._subsUrlReqTs>0&&(this._statVod.addCore("get_pcdn_subs_url_time",F.a.now()-this._subsUrlReqTs),this._statVod.addCore("get_pcdn_subs_url_time_cnt",1),this._subsUrlReqTs=0),t)if(this._oldStat.setComDim(rt,t.pcdnName),this._statVod.setComDim(rt,t.pcdnName),this._statVod.setComDim("cli_isp",t.cliIsp),this._statVod.setComDim("cli_prov",t.cliProv),this._statVod.setCoreDim("pcdn_svr_isp",t.sPcdnIsp),this._statVod.setCoreDim("pcdn_svr_area",t.sPcdnArea),t.iErrCode===_i.ERR_CODE_FOR_HY_PCDNGW_CLIENT_RSP.E_SUCCESS){this._statVod.setComDim(Ot,1);for(var e=t.vPcdnUrls.value.length,i=0;i<e;i++){var n=t.vPcdnUrls.value[i];switch(this._statVod.addCore(Ct,1),n.iStatusPcdn){case 100:this._statVod.addCore("get_pcdn_url_success",1),this._rspVodPcdnProxyUrl(n);break;case 101:this._statVod.addCore("get_pcdn_err_not_reached",1);break;case 102:this._statVod.addCore("get_pcdn_err_over_run",1);break;case 200:this._statVod.addCore("get_pcdn_url_suc_freetime",1),this._rspVodPcdnProxyUrl(n);break;case 201:this._statVod.addCore("get_pcdn_err_over_run_freetime",1);break;case 301:this._statVod.addCore("get_pcdn_err_not_coverd",1);break;case 302:this._statVod.addCore("get_pcdn_err_req",1);break;default:this._statVod.addCore("get_pcdn_err_other",1)}}}else t.iErrCode===_i.ERR_CODE_FOR_HY_PCDNGW_CLIENT_RSP.E_PCDN_OFF&&(this._open=!1,this._statVod.setComDim(Ot,0));else this._statVod.addCore(Ct,1),this._statVod.addCore("get_subs_url_error_cnt",1)}},{key:"_rspVodPcdnProxyUrl",value:function(t){var e=this._fragsMap.get(t.reqKey.index);e&&(e.pcdnUrls=t.vUrls.value.slice(),e.tryCnt=e.pcdnUrls.length,e.pcdnFreetime=200===t.iStatusPcdn)}}]),t}(),Ni=function(){function t(e,i){Object(v.a)(this,t),this._details=null,this._fragments=null,this._totalDuration=0,this._idx=0,this._lastFrag=null,this._curFrag=null,this._seekTime=0,this._sOrigUrl="",this._pcdnIdx=-1,this._pcdnVodProxy=new Li(e,i)}return Object(g.a)(t,[{key:"setOrigUrl",value:function(t){this._sOrigUrl=t}},{key:"reset",value:function(){this._details=null,this._fragments=null,this._totalDuration=0,this._idx=0,this._lastFrag=null,this._curFrag=null,this._seekTime=0,this._pcdnIdx=-1,this._sOrigUrl=""}},{key:"getNearFragStart",value:function(t){var e=this._fragments;if(e)for(var i=null,n=0,r=e.length-1;n<r;n++)if((i=e[n]).start>t)return i.start;return Math.ceil(t+1)}},{key:"getFrag",value:function(t){var e=this._idx,i=this._fragments,n=null;return t?i.length>0&&(n=i.shift()):e<i.length&&(n=i[e],e++),n&&(this._idx=e,this._lastFrag=this._curFrag,this._curFrag=n),n}},{key:"seek",value:function(t){this._pcdnIdx=-1;var e=this._fragments;if(!e)return this._seekTime=t,!1;t=Math.min(t,this._totalDuration);for(var i=null,n=0,r=0,o=!1,a=this._fragments.length;r<a;r++)if(n=(i=e[r]).start+i.duration,i.start<=t&&t<n){n-.2<t&&r<a-1&&(i=e[r+1]),i.seeking=!0,o=!0;break}return o?(E.a.info("HlsPlaylist.seek suc seekTime=".concat(t," fragIdx=").concat(this._idx,", ").concat(r),i.sn),this._idx=r):E.a.info("HlsPlaylist.seek fail seekTime=".concat(t," fragIdx=").concat(this._idx)),o}},{key:"mergeDetails",value:function(t){var e=null;if(this._details){e=this._details;var i,n,r=t,o=0,a=0;n=e.fragments.length>0?e.fragments[e.fragments.length-1]:this._curFrag,i=n.sn,a=n.start+n.duration,r.fragments.forEach((function(t){t.sn>i&&e.fragments.push(t)})),e.endSN=r.endSN,e.fragments.forEach((function(t){o+=t.duration,t.sn>i&&(t.start=a,a+=t.duration)})),e.totalduration=o}else e=t;this.details=e}},{key:"getVodPcdnProxy",value:function(){if(1!==B.isCloseVodPcdn&&(-1===this._pcdnIdx||this._pcdnIdx-this._idx<=3)){-1===this._pcdnIdx&&(this._pcdnIdx=this._idx);for(var t=this._pcdnIdx+10,e=Math.min(this._fragments.length,t),i=[],n=[],r=this._pcdnIdx;r<e;r++){var o=this._fragments[r];i.push(o),n.push(o.sn)}i.length>0&&(E.a.log("FragHelper.getVodPcdnProxy firstIdx=".concat(this._pcdnIdx," sn=").concat(n.join(","))),this._pcdnVodProxy.getVodPcdnProxy(this._sOrigUrl,i),this._pcdnIdx=t)}}},{key:"details",set:function(t){this._details=t,this._fragments=t.fragments,this._totalDuration=t.totalduration,this._seekTime>0&&(this.seek(this._seekTime),this._seekTime=0)},get:function(){return this._details}},{key:"currFragNum",get:function(){return this._fragments?this._fragments.length:0}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"lastFrag",get:function(){return this._lastFrag},set:function(t){t&&(this._lastFrag=t)}},{key:"curFrag",get:function(){return this._curFrag},set:function(t){t&&(this._lastFrag=this._curFrag,this._curFrag=t)}}]),t}(),Mi=function(){function t(e){Object(v.a)(this,t),this.hls=e,this.isLive=e.isLive,this.config=e.config,this.m3u8Parser=new yi(e.isLive),this.currLevelId=0,this.levels=[],this.firstLevelLoaded=!1,this.m3u8Parsered=!1,this.loader=null,this.manifestLoadedTs=0,this.isMasterPlayList=!1,this.currLevel=null,this.fragHelper=new Ni(e.statVod,e.stat),this.firstTsInfo=null}return Object(g.a)(t,[{key:"destroy",value:function(){this.m3u8Parser=null,this.currLevelId=0,this.levels=null,this.currLevel=null,this.firstLevelLoaded=!1,this.m3u8Parsered=!1,this.loader.abort(),this.loader=null,this.manifestLoadedTs=0,this.isMasterPlayList=!1,this.fragHelper.reset(),this.firstTsInfo=null}},{key:"getNearFragStart",value:function(t){return this.fragHelper.getNearFragStart(t)}},{key:"setOrigUrl",value:function(t){this.fragHelper.setOrigUrl(t)}},{key:"setCurrentFrag",value:function(t){t&&(this.lastFrag=this.currFrag,this.currFrag=t)}},{key:"seek",value:function(t){return!this.isLive&&this.fragHelper.seek(t)}},{key:"loadFirstFragment",value:function(t){t&&!this.firstLevelLoaded&&(E.a.log("HlsPlaylist.loadFirstFragment firstTsInfo = ",t),this.firstLevelLoaded=!0,this.firstTsInfo=t,this.hls.loadFragment(!1,t))}},{key:"loadManifest",value:function(t){this.m3u8Parser.isSwitchSeamLessLine=!1,this.loader&&(this.loader.destroy(),this.loader=null),t=this.addUrlParams(t),this.manifsetUrl=t,this.hls.stat.addComp(se,ue,1),this.loader=new hi(this.config),this.loader.load(t,"",this.onManifestLoaded.bind(this),this.loadManifestError.bind(this),this.loadManifestTimeout.bind(this),this.config.listLoadingTimeOut,this.config.listLoadingMaxRetry,this.config.listLoadingRetryDelay)}},{key:"refreshManifsetUrl",value:function(t){t=this.addUrlParams(t),this.manifsetUrl=t}},{key:"addUrlParams",value:function(t){var e=B.platform,i=U.PLATFORM_TYPE[e]||U.PLATFORM_TYPE.web;t+=-1===t.indexOf("?")?"?":"&";var n=e===U.PLATFORM_TYPE_NAME.wap?"&uid=".concat(N.uid,"&uuid=").concat(N.uuid):"&u=".concat(N.convertUid);return t+"".concat(n,"&t=").concat(i,"&sv=").concat(2206101758)}},{key:"onManifestLoaded",value:function(t,e){0==this.manifestLoadedTs&&(this.manifestLoadedTs=F.a.now());var i=t.currentTarget.status;if(404===i||0===i||403===i)return this.hls.stat.addComp(se,le,1),E.a.warn("HlsPlaylist.onManifestLoaded status=".concat(i)),void this.hls.setLoadStatus(U.LoadVideoTimeoutReason.HLS_LOADMANIFEST_ERROR);var n,r=t.currentTarget.responseText,o=this.manifsetUrl,a=null,s=[];if(-1==r.indexOf("#EXTM3U"))return this.hls.stat.addComp(se,"m3u8_wrong_cnt",1),E.a.error("HlsPlaylist.onManifestLoaded m3u8 doesn't match #EXTM3U\n",r),void this.hls.setLoadStatus(U.LoadVideoTimeoutReason.HLS_LOADMANIFEST_ERROR);this.hls.stat.addComp(se,ce,1);var u=-1==r.indexOf("#EXTINF:");u?(this.isMasterPlayList=!0,a=this.m3u8Parser.parseMasterPlaylist(r,o)):(this.isMasterPlayList=!1,a=[{url:o}]),n=(s=a)[0].bitrate,s.sort((function(t,e){return t.bitrate-e.bitrate})),this.levels=s;for(var c=0;c<s.length;c++)if(s[c].bitrate===n){this.currLevelId=c;break}this.currLevel={bitrate:n},u?(this.currLevel.url=s[this.currLevelId].url,this.loadLevel()):(this.currLevel.url=this.manifsetUrl,this.onLevelLoaded(t)),this.hls.setLoadStatus(U.LoadVideoTimeoutReason.HLS_LOADMANIFEST_SUCCESS)}},{key:"loadManifestError",value:function(t){this.hls.stat.addComp(se,le,1),E.a.warn("HlsPlaylist.loadManifestError "+t.currentTarget.status),404!==t.currentTarget.status&&0!==t.currentTarget.status||this.hls.onAnchorStop(),this.hls.onLoadM3u8Error()}},{key:"loadManifestTimeout",value:function(t){this.hls.stat.addComp(se,he,1),t>=2?this.hls.onLoadManifestTimeout():this.hls.onConnectManifestTimeout()}},{key:"loadLevel",value:function(){if(this.currLevel){var t=this.currLevel.url;if(!this.isLive&&this.currDetails){var e=this.currDetails.fragments,i=e[e.length-1];i||(E.a.log("HlsPlaylist.loadLevel: fragments run out"),i=this.fragHelper.curFrag),t=e.length<=this.config.minFragBufferNum?this.currLevel.url.replace(/\?btime=\d*$/,"?btime=".concat(i.time)):null}t&&this._loadLevel(t)}}},{key:"updateLiveVodUrl",value:function(t){this.currLevel&&(this.manifsetUrl=t,this.m3u8Updating=!0,this.currLevel.url=t,this._loadLevel(t))}},{key:"_loadLevel",value:function(t){this.loader&&(this.loader.destroy(),this.loader=null),this.anticode&&(t+="?"+this.anticode),this.hls.stat.addComp(se,ue,1),this.loader=new hi(this.config),this.loader.load(t,"",this.onLevelLoaded.bind(this),this.loadLevelError.bind(this),this.loadLevelTimeout.bind(this),this.config.listLoadingTimeOut,this.config.listLoadingMaxRetry,this.config.listLoadingRetryDelay)}},{key:"onLevelLoaded",value:function(t,e){if(404!==t.currentTarget.status&&0!==t.currentTarget.status){var i=t.currentTarget.responseText,n=this.manifsetUrl,r=this.currLevel,o=null;if(n&&(r.url=n),0===i.indexOf("#EXTM3U")&&i.indexOf("#EXTINF:")>0){if(this.hls.stat.addComp(se,ce,1),o=this.m3u8Parser.parseLevelPlaylist(i,r.url,this.currLevelId),this.fragHelper.mergeDetails(o),r.details=this.fragHelper.details,this.isLive||this.hls.eventEmitter.trigger(_.PLAYBACK_M3U8_UPDATED,{totalDuration:this.totalDuration}),this.m3u8Parsered=!0,this.isLive&&r.details.fragments.length>10)return E.a.info("HlsPlaylist.onLevelLoaded fragments.length =",r.details.fragments.length),void this.hls.reconnectLive();this.hls.setTargetDuration(this.currDetails.targetduration),this.firstLevelLoaded||(this.firstLevelLoaded=!0,this.hls.loadFragment())}else{this.hls.stat.addComp(se,"m3u8_empty_cnt",1);var a=r.details.fragments.length;E.a.warn("HlsPlaylist.onLevelLoaded no playlist. fragments.length=".concat(a,"\n").concat(i))}this.hls.isSwitchSeamLessLine=this.m3u8Parser.isSwitchSeamLessLine}else this.hls.stat.addComp(se,le,1)}},{key:"loadLevelError",value:function(t){this.hls.stat.addComp(se,le,1),E.a.warn("HlsPlaylist.loadLevelError "+t.currentTarget.status),404!==t.currentTarget.status&&0!==t.currentTarget.status||this.hls.onAnchorStop()}},{key:"loadLevelTimeout",value:function(){this.hls.stat.addComp(se,he,1),this.hls.reset()}},{key:"onCheckTimer",value:function(t){this.isLive&&this.loadLevel()}},{key:"currDetails",get:function(){return this.fragHelper.details}},{key:"currFragNum",get:function(){return this.fragHelper.currFragNum}},{key:"totalDuration",get:function(){return this.firstTsInfo&&this.firstTsInfo.totalDuration||this.fragHelper.totalDuration}},{key:"currFrag",get:function(){return this.fragHelper.curFrag},set:function(t){t&&(this.lastFrag=this.currFrag,this.fragHelper.curFrag=t)}},{key:"lastFrag",get:function(){return this.fragHelper.lastFrag},set:function(t){t&&(this.fragHelper.lastFrag=t)}},{key:"nextFrag",get:function(){return this.fragHelper.getFrag(this.isLive)}}]),t}(),Ui=i(52),Di=i.n(Ui),Bi=!1,Fi=[],xi=0,ji=!1,Vi=null;function Gi(t,e){for(var i=0,n=Fi.length;i<n;i++){var r=Fi[i];if(r.callback==t&&r.thisObj==e)return r}return null}function Hi(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if((i=0|(Number(i)||0))<10||i%10!=0||!t)return E.a.error("Timer.add Invalide interval value or callback function."),!1;var o=Gi(t,e);return o||(o={callback:t,thisObj:e,bindCallback:e?t.bind(e):t,param:n},Fi.push(o)),o.times=r,o.tickCount=0,o.interval=i/10,o.delayDel=!1,Wi(),!0}function Wi(){!Vi||1!=Number(B.isUseWebWorkerTick)&&1!=B.isForceUseWorker?(qi(),0===xi&&(xi=setInterval(Ki,10))):(Yi(),ji=!0,Vi&&Vi.postMessage("start"))}function qi(){ji=!1,Vi&&Vi.postMessage("stop")}function Ki(){ji||zi()}function Yi(){xi>0&&(clearInterval(xi),xi=0)}function zi(){if(0==Fi.length)return qi(),void Yi();Bi=!0;for(var t=F.a.now(),e=Fi.length-1;e>=0;e--){var i=Fi[e];if(i&&!i.delayDel){if(++i.tickCount%i.interval==0){var n=i.bindCallback,r=i.tickCount/i.interval;n(t,r,i.param),i.times>0&&i.times<=r&&i.tickCount>0&&Fi.splice(e,1)}}else Fi.splice(e,1)}Bi=!1}var Ji={initWorker:function(){Vi||((Vi=Di()(54)).addEventListener("message",(function(t){ji&&zi()})),Vi.addEventListener("error",(function(t){E.a.error("TimerWorker.error:",t.lineno+","+t.colno,t.message),Vi.terminate(),Vi=null,E.a.warn("[ TimerWorker terminate ]"),Wi()})))},has:function(t,e){return!!Gi(t,e)},add:Hi,remove:function(t,e){for(var i=0,n=Fi.length;i<n;i++){var r=Fi[i];if(r.callback==t&&r.thisObj==e)return Bi?r.delayDel=!0:Fi.splice(i,1),!0}return!1},once:function(t,e,i,n){Hi(t,e,i+10,n,1)},getSize:function(){return Fi.length}},Qi=function(){function t(){Object(v.a)(this,t),this.fpsIndex=0,this.fpsArr=[],this.fpsMap=new m.default,this.started=!1,this.realFps=0,this.recvFps=new ci(20),this.perSecondIndex=0,this.perSecondArr=[],this.perSecondMap=new m.default}return Object(g.a)(t,[{key:"reset",value:function(){this.fpsArr=[],this.fpsMap.clear(),this.started=!1,this.realFps=0,this.recvFps.reset(),Ji.remove(this.onFrameTimer,this),this.perSecondIndex=0,this.perSecondArr=[],this.perSecondMap.clear()}},{key:"onFrameTimer",value:function(t,e){this.recvFps.calculate()}},{key:"addDts",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.recvFps.addCur(1),this.started||(this.started=!0,Ji.add(this.onFrameTimer,this,1e3));var i=parseInt(t/1e3);if(this.fpsMap.has(i))this.fpsMap.set(i,this.fpsMap.get(i)+1);else{this.fpsIndex>=10&&(this.calcRealFps(),this.fpsIndex=0);var n=this.fpsArr[this.fpsIndex];this.fpsMap.delete(n),this.fpsArr[this.fpsIndex]=i,this.fpsMap.set(i,1),this.fpsIndex++}e&&this.addDataSize(i,e)}},{key:"calcRealFps",value:function(){if(0===this.realFps){var t=this.fpsArr[1];this.realFps=this.fpsMap.get(t)}}},{key:"getRecvFps",value:function(){var t=this.recvFps.average();return t===L.UintMax?0:t}},{key:"getFps",value:function(){if(this.fpsArr.length>1){var e=this.fpsArr[1],i=this.fpsMap.get(e),n=0,r=i;return t.FIXED_FPS.forEach((function(t){var e=t>i?t-i:i-t;e<3&&(0===n||e<n)&&(n=e,r=t)})),r}return 0}},{key:"getCalculate",value:function(){this.recvFps.calculate()}},{key:"addDataSize",value:function(t,e){if(this.perSecondMap.has(t))this.perSecondMap.set(t,this.perSecondMap.get(t)+e);else{this.perSecondIndex>=10&&(this.perSecondIndex=0);var i=this.perSecondArr[this.perSecondIndex];this.perSecondMap.delete(i),this.perSecondArr[this.perSecondIndex]=t,this.perSecondMap.set(t,e),this.perSecondIndex++}}},{key:"getRealBitrate",value:function(){var t=0,e=this.perSecondArr.length;if(e>1){var i=this.perSecondArr[e-2];t=this.perSecondMap.get(i)}return parseInt(8*t/1e3)}}]),t}();Qi.FIXED_FPS=[0,15,20,24,30,40,48,60];var Xi=Qi,Zi=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"init",value:function(){var e;for(e in t.types={av01:[],av1C:[],avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:i,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,u,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))}},{key:"box",value:function(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=8,r=i.length,o=r;r--;)n+=i[r].byteLength;for((e=new Uint8Array(n))[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),r=0,n=8;r<o;r++)e.set(i[r],n),n+=i[r].byteLength;return e}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,i){return t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,i,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,i))}},{key:"moov",value:function(e){for(var i=e.length,n=[];i--;)n[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var i=e.length,n=[];i--;)n[i]=t.trex(e[i]);return t.box.apply(null,[t.types.mvex].concat(n))}},{key:"mvhd",value:function(e,i){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,n)}},{key:"sdtp",value:function(e){var i,n,r=e.samples||[],o=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,o[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,o)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"av01",value:function(e){var i=e.bytes,n=e.width,r=e.height;return t.box(t.types.av01,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>8&255,255&n,r>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),t.box(t.types.av1C,i))}},{key:"avc1",value:function(e){var i,n,r,o=[],a=[];for(i=0;i<e.sps.length;i++)r=(n=e.sps[i]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(n));for(i=0;i<e.pps.length;i++)r=(n=e.pps[i]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),u=e.width,c=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"hvc1",value:function(e){var i,n,r,o=[],a=[],s=[];for(o.push(161),o.push(e.vps.length>>>8&255),o.push(255&e.vps.length),i=0;i<e.vps.length;i++)r=(n=e.vps[i]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(n));for(a.push(162),a.push(e.sps.length>>>8&255),a.push(255&e.sps.length),i=0;i<e.sps.length;i++)r=(n=e.sps[i]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));var u=[],c=0;for(i=0;i<a.length;)n=a[i],2!==c||3!==n?(0===n?c++:c=0,u.push(n),++i):(++i,c=0);for(s.push(163),s.push(e.pps.length>>>8&255),s.push(255&e.pps.length),i=0;i<e.pps.length;i++)r=(n=e.pps[i]).byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(n));var l=t.box(t.types.hvcC,new Uint8Array([1,u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15],u[16],u[17],u[18],u[19],240,0,255,253,248,248,0,0,15].concat([3]).concat(o).concat(a).concat(s))),h=e.width,d=e.height;return t.box(t.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,255&h,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),l,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var i=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return"audio"===e.type?t.box(t.types.stsd,t.STSD,t.mp4a(e)):e.isHevc?t.box(t.types.stsd,t.STSD,t.hvc1(e)):e.isAV01?t.box(t.types.stsd,t.STSD,t.av01(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var i=e.id,n=e.duration,r=e.width,o=e.height;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(e,i){var n=t.sdtp(e),r=e.id;return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.trun(e,n.length+16+16+8+16+8+8),n)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var i=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,i){var n,r,o,a,s,u,c=e.samples||[],l=c.length,h=12+16*l,d=new Uint8Array(h);for(i+=8+h,d.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),n=0;n<l;n++)o=(r=c[n]).duration,a=r.size,s=r.flags,u=r.cts,d.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return t.box(t.types.trun,d)}},{key:"initSegment",value:function(e){t.types||t.init();var i,n=t.moov(e);return(i=new Uint8Array(t.FTYP.byteLength+n.byteLength)).set(t.FTYP),i.set(n,t.FTYP.byteLength),i}}]),t}(),$i=function(){function t(e){Object(v.a)(this,t),this.mse=e,this.audioISGenerated=!1,this.videoISGenerated=!1,this.PES2MP4SCALEFACTOR=1,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR,this._forceFirstIDR=!(!D.a.chrome||!(D.a.version.major<50||50===D.a.version.major&&D.a.version.build<2661))}return Object(g.a)(t,[{key:"destroy",value:function(){this.reset()}},{key:"reset",value:function(){this.insertDiscontinuity(),this.switchLevel()}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=this.nextAacPts=this.nextAvcDts=void 0}},{key:"getInitDts",value:function(){return void 0!==this._initDTS?this._initDTS/90:void 0}},{key:"switchLevel",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E.a.log("mp4-remuxer.switchLevel"),t&&(this.videoISGenerated=!1),e&&(this.audioISGenerated=!1)}},{key:"remux",value:function(t,e,i,n){Number(localStorage._printMp4Remux)&&E.a.debug("\n### Audio",t,"\n### Video",e),this.audioISGenerated||this.generateAudioIS(t,i),this.videoISGenerated||this.isWebglRender||this.generateVideoIS(e,i),this.initTs(t,e,i),e.samples.length&&(this.isWebglRender?this.renderVideo(e,n):this.remuxVideo(e,n)),t.samples.length&&this.remuxAudio(t,n),this.mse.onFragParsed()}},{key:"initTs",value:function(t,e,i){if(null==this._initPTS){var n=t.samples,r=e.samples,o=n.length,a=r.length,s=this.PES_TIMESCALE;0===o&&0===a?E.a.warn("mp4-remuxer.initTs have no nbAudio&nbVideo"):0===a?(this._initPTS=n[0].pts-s*i,this._initDTS=n[0].dts-s*i):0===o?(this._initPTS=r[0].pts-s*i,this._initDTS=r[0].dts-s*i):(this._initPTS=Math.min(r[0].pts,n[0].pts)-s*i,this._initDTS=Math.min(r[0].dts,n[0].dts)-s*i),E.a.log("mp4-remuxer initDTS/initPTS=[".concat(this._initDTS,", ").concat(this._initPTS,"]"))}}},{key:"generateAudioIS",value:function(t,e){if(t.config){var i={audioMoov:Zi.initSegment([t]),audioCodec:t.codec,audioChannelCount:t.channelCount};this.mse.onInitSegment(i),this.audioISGenerated=!0}}},{key:"generateVideoIS",value:function(t,e){if(t.isAV01||t.sps&&t.pps){var i={videoMoov:Zi.initSegment([t]),videoCodec:t.isAV01?t.codec:"avc1.640033",videoWidth:1280,videoHeight:720};this.mse.onInitSegment(i),this.videoISGenerated=!0}}},{key:"remuxVideo",value:function(t,e){var i,n,r,o,a,s,u,c,l,h,d,f,p,m,y=8,v=this.PES2MP4SCALEFACTOR,g=[],_=t.isAV01?0:4*t.naluCnt;for(u=new Uint8Array(t.len+_+8),(i=new DataView(u.buffer)).setUint32(0,u.byteLength),u.set(Zi.types.mdat,4);t.samples.length;){for(r=t.samples.shift(),a=0;r.units.length;)n=(s=r.units.shift()).data.byteLength,"av01"!=r.type&&(i.setUint32(y,n),y+=4,a+=4),u.set(s.data,y),y+=n,a+=n;if(d=r.pts-this._initDTS,((f=r.dts-this._initDTS)<0||d<0)&&Number(localStorage._printMp4RemuxVideo)&&E.a.log("mp4-remuxer.remuxVideo warn dts=".concat(f,", pts=").concat(d)),void 0!==h)p=this._PTSNormalize(d,h),m=this._PTSNormalize(f,h),o.duration=(m-h)/v,o.duration<0&&(Number(localStorage._printMp4RemuxVideo)&&E.a.warn("mp4-remuxer.remuxVideo invalid sample duration at pts="+r.pts/90+" dts="+r.dts/90+" duration="+o.duration/90),o.duration=0,m=h);else{var S,w=this.nextAvcDts||f;p=this._PTSNormalize(d,w),m=this._PTSNormalize(f,w),S=Math.round((m-w)/90),(e||Math.abs(S)<600)&&S&&(S>1&&Number(localStorage._printMp4RemuxVideo)?E.a.warn("mp4-remuxer.remuxVideo hole="+S+" filling it"):S<-1&&Number(localStorage._printMp4RemuxVideo)&&E.a.warn("mp4-remuxer.remuxVideo overlapping="+-S+" detected"),m=w,p=Math.max(p-S,m)),Math.max(0,p),l=Math.max(0,m)}var b=r.key;o={size:a,duration:0,cts:(p-m)/v,flags:{isLeading:0,degradPrio:0,hasRedundancy:0,dependsOn:b?2:1,isDependedOn:b?1:0,isNonSync:b?0:1}},g.push(o),h=m}this._forceFirstIDR&&(g[0].flags.dependsOn=2,g[0].flags.isNonSync=0),void 0!==t.endDts?(o.duration=(90*t.endDts-this._initDTS-m)/v,o.duration<0?(o.duration=0,this.nextAvcDts=m):this.nextAvcDts=90*t.endDts-this._initDTS):(g.length>=2&&(o.duration=g[g.length-2].duration),this.nextAvcDts=m+o.duration*v),t.len=0,t.naluCnt=0,t.samples=g,c=Zi.moof(t.sn,l/v,t),t.samples=[];var I={type:"video",data:this._mergeBoxes(c,u)};this.mse.onFragParsing(I)}},{key:"remuxAudio",value:function(t,e){var i,n,r,o,a,s,u,c,l,h,d,f=8,p=this.PES_TIMESCALE,m=this.PES2MP4SCALEFACTOR,y=[];for(o=new Uint8Array(t.len+8),new DataView(o.buffer).setUint32(0,o.byteLength),o.set(Zi.types.mdat,4);t.samples.length;){if(r=(i=t.samples.shift()).unit,o.set(r,f),f+=r.byteLength,c=i.pts-this._initDTS,l=i.dts-this._initDTS,void 0!==u)h=this._PTSNormalize(c,u),d=this._PTSNormalize(l,u),n.duration=(d-u)/m,n.duration<0&&(Number(localStorage._printMp4RemuxAudio)&&E.a.warn("mp4-remuxer.remuxAudio invalid AAC sample duration at PTS="+i.pts+" duration="+n.duration),n.duration=0,h=d=u);else{var v,g=this.nextAacPts||c;h=this._PTSNormalize(c,g),d=this._PTSNormalize(l,g),v=Math.round(1e3*(h-g)/p),(e||Math.abs(v)<600)&&v&&(h=d=g),Math.max(0,h),s=Math.max(0,d)}n={size:r.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(n),u=d}y.length>=2&&(n.duration=y[y.length-2].duration),this.nextAacPts=h+n.duration*m,t.len=0,t.samples=y,a=Zi.moof(t.sn,s/m,t),t.samples=[];var _={type:"audio",data:this._mergeBoxes(a,o)};this.mse.onFragParsing(_)}},{key:"renderVideo",value:function(t,e){this.mse.h265Proxy.pushVideoFrame(t,e)}},{key:"_mergeBoxes",value:function(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(t,0),i.set(e,t.byteLength),i}},{key:"_PTSNormalize",value:function(t,e){var i;if(void 0===e)return t;for(i=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=i;return t}},{key:"timescale",get:function(){return this.MP4_TIMESCALE}},{key:"isWebglRender",get:function(){return this.mse.h265Proxy&&this.mse.h265Proxy.renderInited}}]),t}(),tn=function(){function t(e){Object(v.a)(this,t),this.data=e,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return Object(g.a)(t,[{key:"loadWord",value:function(){var t=this.data.byteLength-this.bytesAvailable,e=new Uint8Array(4),i=Math.min(4,this.bytesAvailable);if(0===i)throw new Error("no bytes available");e.set(this.data.subarray(t,t+i)),this.word=new DataView(e.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}},{key:"readBits",value:function(t){var e=Math.min(this.bitsAvailable,t),i=this.word>>>32-e;return t>32&&E.a.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0?i<<e|this.readBits(e):i}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(t){var e,i=8,n=8;for(e=0;e<t;e++)0!==n&&(n=(i+this.readEG()+256)%256),i=0===n?i:n}},{key:"readSPS",value:function(){var t,e,i,n,r,o,a,s=0,u=0,c=0,l=0,h=0;if(this.readUByte(),t=this.readUByte(),this.readBits(5),this.skipBits(3),this.readUByte(),this.skipUEG(),100===t||110===t||122===t||144===t||244===t||44===t||83===t||86===t||118===t||128===t||138===t){var d=this.readUEG();if(3===d&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(o=3!==d?8:12,a=0;a<o;a++)this.readBoolean()&&(a<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var f=this.readUEG();if(0===f)this.readUEG();else if(1===f)for(this.skipBits(1),this.skipEG(),this.skipEG(),e=this.readUEG(),a=0;a<e;a++)this.skipEG();if(this.skipUEG(),this.skipBits(1),i=this.readUEG(),n=this.readUEG(),0===(r=this.readBits(1))&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(s=this.readUEG(),u=this.readUEG(),c=this.readUEG(),l=this.readUEG()),this.readBoolean()&&(this.readBoolean()&&255===this.readUByte()&&(this.readBits(16),this.readBits(16)),this.readBoolean()&&this.skipBits(1),this.readBoolean()&&(this.readBits(3),this.skipBits(1),this.readBoolean()&&(this.readUByte(),this.readUByte(),this.readUByte())),this.readBoolean()&&(this.readUEG(),this.readUEG()),this.readBoolean())){var p=this.readBits(32);h=this.readBits(32)/p,this.readBoolean()&&(h=Math.ceil(h/2))}return{fps:h,width:16*(i+1)-2*s-2*u,height:(2-r)*(n+1)*16-(c+l)*(r?2:4)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),t}(),en=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"getSilentFrame",value:function(t,e){if(2===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),t}();en.emptyAacFrameAdts=[255,241,92,64,18,64,252,0,208,32,6,238,90,119,128,0,128,0,0,0,0,26,37,65,0,13,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28],en.emptyAacFrame=[0,208,32,6,238,90,119,128,0,128,0,0,0,0,26,37,65,0,13,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28],en.emptyAacFrame_44_1=[1,64,34,128,163,78,129,64,0,0,0,0,4,96,6,246,81,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94];var nn=en,rn=function(){function t(e,i){Object(v.a)(this,t),this.mse=e,this.remuxer=i,this.width=0,this.height=0,this.lastSN=0,this.lastLevel=0,this.PES_TIMESCALE=9e4,this.lastTsData=null,this.lastPos=0,this.hasRemux=!1,this.fragStartTs=0,this.ignoreSei=!1,this.closeFetch=!1,this.vFps=new Xi,this.aFps=new Xi,this._initPts=0,this.nextAudioPts=0}return Object(g.a)(t,[{key:"getFps",value:function(){return this.vFps&&this.vFps.getFps()}},{key:"getAudioFps",value:function(){return this.aFps&&this.aFps.getFps()}},{key:"getStartTs",value:function(){return this.fragStartTs}},{key:"destroy",value:function(){this.switchLevel(),this.duration=0}},{key:"probe",value:function(t){return t.length>=564&&71===t[0]&&71===t[188]&&71===t[376]}},{key:"resetAVData",value:function(){this._avcTrack&&(this._avcTrack.len=0,this._avcTrack.naluCnt=0,this._avcTrack.samples=[]),this._aacTrack&&(this._aacTrack.len=0,this._aacTrack.samples=[])}},{key:"pushAllData",value:function(){this._avcTrack&&this._avcTrack.sn>0&&this.remuxTs(this._aacTrack,this._avcTrack,this._avcTrack.sn)}},{key:"switchLevel",value:function(){var t=this.createTrack;!this._avcTrack&&(this._avcTrack=t("video")),!this._aacTrack&&(this._aacTrack=t("audio")),!this._id3Track&&(this._id3Track=t("id3")),this.pmtParsed=!1,this._pmtId=-1,this.remuxer.switchLevel()}},{key:"createTrack",value:function(t){return{type:t,id:-1,sn:0,samples:[],len:0,naluCnt:0}}},{key:"insertDiscontinuity",value:function(t){E.a.log("TsParser.insertDiscontinuity timeOffset=".concat(t)),this.resetTsData(),this.switchLevel(),this.remuxer.insertDiscontinuity(),this.mse.insertDiscontinuity(t)}},{key:"reset",value:function(){this.vFps.reset(),this.aFps.reset(),this.hasRemux=!1,this.lastTsData=null,this._avcTrack&&(this._avcTrack.sps=null,this._avcTrack.pps=null,this._avcTrack.len=0,this._avcTrack.naluCnt=0,this._avcTrack.samples=[]),this._aacTrack&&(this._aacTrack.len=0,this._aacTrack.naluCnt=0,this._aacTrack.samples=[])}},{key:"resetTsData",value:function(){var t=this._avcTrack,e=this._aacTrack,i=this._id3Track;e&&(t.pesData=null,e.pesData=null,i.pesData=null,this.lastTsData=null),this.fragStartTs=0}},{key:"appendTsData",value:function(t,e){var i;e&&this.resetTsData(),t instanceof Uint8Array||(t=new Uint8Array(t));var n=this.lastTsData,r=this.lastPos;if(n){var o=n.byteLength-r,a=o+t.byteLength;(i=new Uint8Array(a)).set(n.slice(r),0),i.set(t,o)}else i=t;return this.lastPos=0,this.lastTsData=i,i}},{key:"syncOffset",value:function(t){for(var e=Math.min(188,t.length-564),i=0;i<e;){if(71===t[i]&&71===t[i+188]&&71===t[i+376])return i;i++}return-1}},{key:"parseTs",value:function(t){var e=t.data,i=t.audioCodec,n=t.videoCodec,r=t.timeOffset,o=t.duration,a=t.discontinuity,s=t._discontinuity,u=t.level,c=t.sn,l=t.seeking,h=t.hlsDT,d=t.tsDT;this.contiguous=!1,a||s?(E.a.log("TsParser.parseTs discontinuity detected timeOffset=".concat(r)),this.insertDiscontinuity(r)):u!==this.lastLevel?(E.a.log("TsParser.parseTs level switch detected"),this.switchLevel(),this.lastLevel=u):c===this.lastSN+1&&(this.contiguous=!0);var f=(e=this.appendTsData(e,l,c)).length;this.audioCodec=i,this.videoCodec=n,this.timeOffset=r,this.duration=o,this.lastSN=c,this.contiguous||(this.aacOverFlow=null),this._avcTrack||this.insertDiscontinuity(r);var p=this.syncOffset(e);if(!(p<0)){this.lastPos=f-=(f+p)%188,f===e.length&&(this.lastTsData=null);for(var m,y,v,g,_,S=this._avcTrack,w=this._aacTrack,b=this._id3Track,I=this.pmtParsed,T=S.pesData,P=w.pesData,k=b.pesData,R=S.id,C=w.id,O=b.id,A=p;A<f;A+=188)if(71===e[A]){if(m=!!(64&e[A+1]),y=((31&e[A+1])<<8)+e[A+2],(48&e[A+3])>>4>1){if((v=A+5+e[A+4])===A+188)continue}else v=A+4;if(I)if(g=(_=A+188)-v,y===R){if(this.mse.isPureAudio)continue;m&&(T&&this._parseAVCPES(this._parsePES(T,r,h,d)),T={data:[],size:0}),T&&(T.data.push(e.subarray(v,_)),T.size+=g)}else if(y===C){if(this.mse.isPureVideo)continue;m&&(P&&(this._parseAACPES(this._parsePES(P,r,h,d)),!this.closeFetch&&!this.hasRemux&&S.samples.length>1&&this.remuxTs(w,S,c)),P={data:[],size:0}),P&&(P.data.push(e.subarray(v,_)),P.size+=g)}else y===O&&(m&&(k&&this._parseID3PES(this._parsePES(k,r,h,d)),k={data:[],size:0}),k&&(k.data.push(e.subarray(v,_)),k.size+=g));else m&&(v+=e[v]+1),0===y?this._parsePAT(e,v):y===this._pmtId&&(this._parsePMT(e,v),I=this.pmtParsed=!0,R=this._avcTrack.id,C=this._aacTrack.id,O=this._id3Track.id)}else E.a.error("TsParser.parseTs ERROR: TS packet did not start with 0x47");if(T&&(S.pesData=T),P&&(w.pesData=P),k&&(b.pesData=k),w.samples.length>1||this.maxVideo()||this.mse.isPureAudio&&w.samples.length>0||this.mse.isPureVideo&&S.samples.length>0){if(0===w.samples.length&&"firefox"===D.a.name&&this.mse.reloadInError&&!this.mse.isLive)return void this.mse.reloadInError();this.remuxTs(w,S,c)}}}},{key:"maxVideo",value:function(){var t=this._avcTrack;if(t.samples.length>1){var e=t.samples[0];return(t.samples[t.samples.length-1].dts-e.dts)/90>2e3}return!1}},{key:"remuxTs",value:function(t,e,i){t.sn=e.sn=i,this.hasRemux=!0;try{if(!this._initPts){var n=t.samples.length>0?t.samples[0].pts:0,r=e.samples.length>0?e.samples[0].pts:0;this._initPts=Math.min(n,r)}this.remuxAudio(t,e.samples.length>0)}catch(t){E.a.error("remux ts error: ",t)}this.remuxer.remux(t,e,this.timeOffset,this.contiguous)}},{key:"remuxAudio",value:function(t,e){var i=9216e4/t.audiosamplerate;0==this.nextAudioPts&&(this.nextAudioPts=this._initPts);for(var n=this.nextAudioPts,r=t.samples,o=0,a=n;o<r.length;o++){var s=r[o].pts,u=s-a,c=Math.abs(1e3*u/t.timescale);if(u<=-i&&e)0===o&&(E.a.warn("Audio frame @ ".concat((s/t.timescale).toFixed(3),"s \n                        overlaps nextAudioPts by ").concat(Math.round(1e3*u/t.timescale)," ms.")),this.nextAudioPts=n=a=s);else if(u>i&&c<1e4&&e){var l=Math.round(u/i);(a=s-l*i)<0&&(l--,a+=i),0===o&&(this.nextAudioPts=n=a),E.a.warn("[mp4-remuxer]: Injecting ".concat(l," audio frame nextPts=").concat(a," @ ").concat((a/t.timescale).toFixed(3),"s \n                    due to ").concat(Math.round(1e3*u/t.timescale)," ms gap."));for(var h=0;h<l;h++){var d=Math.max(a,0),f=nn.getSilentFrame(t.config[0],t.channelCount),p={unit:f,pts:Math.round(d),dts:Math.round(d)};r.splice(o,0,p),t.len+=f.length,a+=i,o++}}a+=i,this.nextAudioPts=a}}},{key:"_parsePAT",value:function(t,e){var i=t[e+8]<<8|t[e+9];1==i&&(this._pmtId=(31&t[e+10])<<8|t[e+11]),E.a.log("TsParser._parsePAT program_number=".concat(i," pmtId=").concat(this._pmtId))}},{key:"_parsePMT",value:function(t,e){var i=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){var n=t[e],r=(31&t[e+1])<<8|t[e+2];switch(n){case 15:this._aacTrack.id=r;break;case 21:this._id3Track.id=r;break;case 27:this._avcTrack.id=r;break;default:E.a.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}E.a.log("TsParser._parsePMT aacTrack.id=".concat(this._aacTrack.id," avcTrack.id=").concat(this._avcTrack.id))}},{key:"_parsePES",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.data[0],o=(r[0]<<16)+(r[1]<<8)+r[2];if(1!=o)return null;var a,s,u=(r[4]<<8)+r[5],c=r[7];192&c&&(a=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,s=64&c?536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2:a);var l=r[8],h=l+9;t.data[0]=t.data[0].subarray(h),t.size-=h;for(var d=0,f=new Uint8Array(t.size);t.data.length;)r=t.data.shift(),f.set(r,d),d+=r.byteLength;return n>i&&n-i-1e3*e>0&&(a-=90*(n-i-1e3*e),s-=90*(n-i-1e3*e)),{data:f,pts:a,dts:s,len:u}}},{key:"_parseAVCPES",value:function(t){if(null!=t){0===this.fragStartTs&&(this.fragStartTs=t.pts/this.PES_TIMESCALE);var e,i=this._avcTrack,n=i.samples,r=this._parseAVCNALu(t.data),o=[],a=0;0===r.length&&n.length>0&&this._pushToPreUnit(t.data),t.data=null;var s,u=!1,c=!1,l="",h=Object(ui.a)(r);try{for(h.s();!(s=h.n()).done;){var d=s.value;switch(d.type){case 1:c=!0;break;case 5:c=!0,u=!0,i.idr=!0;break;case 6:c=!0,(this.ignoreSei||1==localStorage._noSei)&&(c=!1);break;case 7:if(c=!0,!i.sps){i.sps=[d.data],i.timescale=this.remuxer.timescale,i.duration=this.remuxer.timescale*this.duration;var f=new tn(d.data).readSPS();this.width=i.width=f.width,this.height=i.height=f.height,this.mse&&this.mse.setResolution&&this.mse.setResolution(this.width,this.height);for(var p=d.data.subarray(1,4),m="avc1.",y=0;y<3;y++){var v=p[y].toString(16);v.length<2&&(v="0"+v),m+=v}i.codec=m}break;case 8:c=!0,i.pps||(i.pps=[d.data]);break;case 9:c=!0,1==localStorage._noAud&&(c=!1);break;default:c=!1,l+="unknown NAL "+d.type+" "}c&&(o.push(d),a+=d.data.byteLength)}}catch(t){h.e(t)}finally{h.f()}if(l.length,i.idr&&this.mse.setExceptionStat(At.VIDEO_IFRAME,1),i.codec&&this.mse.setExceptionStat(At.VIDEO_CONFIG,1),(!i.sps||!i.pps||i.idr)&&o.length&&(!0===u||i.sps)){if(1==localStorage._printVideoTs){var g=t.dts/90-this.mse.curVideoDts;E.a.debug("%cTsParser.parseAvcPes dts=","color:green",t.dts/90,g,"pts=".concat(t.pts/90," cts=").concat((t.pts-t.dts)/90)),g>200&&E.a.warn("TsParser.parseAvcPes dts gap=".concat(g))}this.mse&&(this.mse.curVideoDts=parseInt(t.dts/90)),this.mse&&this.mse.setExceptionStat(At.VIDEO_FRAME,1),this.vFps.addDts(t.dts/90),e={units:o,dts:t.dts,pts:t.pts,key:u},n.push(e),i.len+=a,i.naluCnt+=o.length}}else E.a.error("TsParser._parseAVCPES pes is null.")}},{key:"_parseAVCNALu",value:function(t){for(var e,i,n,r,o,a,s=0,u=t.byteLength,c=0,l=[];s<u;)switch(e=t[s++],c){case 0:0===e&&(c=1);break;case 1:c=0===e?2:0;break;case 2:case 3:0===e?c=3:1===e?(r=31&t[s],o?(n={data:t.subarray(o,s-c-1),type:a},l.push(n)):(i=s-c-1)&&this._pushToPreUnit(t.subarray(0,i)),s<u?(o=s,a=r,c=0):c=-1):c=0}return o&&(n={data:t.subarray(o,u),type:a},l.push(n)),l}},{key:"_pushToPreUnit",value:function(t){var e=this._avcTrack.samples.length;if(0!=e){var i=this._avcTrack.samples[e-1],n=i.units[i.units.length-1],r=new Uint8Array(n.data.byteLength+t.byteLength);r.set(n.data,0),r.set(t,n.data.byteLength),n.data=r,this._avcTrack.len+=t.byteLength}}},{key:"_parseAACPES",value:function(t){var e=this;if(null!=t){var i,n,r,o,a,s,u,c,l=this._aacTrack,h=t.data,d=h.length,f=0;if(this.aacOverFlow){var p=new Uint8Array(this.aacOverFlow.byteLength+h.byteLength);p.set(this.aacOverFlow,0),p.set(h,this.aacOverFlow.byteLength),h=p,this.aacOverFlow=null}for(n=0;n<d-1&&(255!==h[n]||240!=(240&h[n+1]));n++);if(n&&(n<d-1?(u="AAC PES did not start with ADTS header, offset:".concat(n),c=!1):(u="no ADTS header found in AAC PES",c=!0),E.a.error("TsParser._parseAACPES ERROR:".concat(u)),c))return;var m=function(t){l.config=t.config,l.audiosamplerate=t.samplerate,l.channelCount=t.channelCount,l.codec=t.codec,l.timescale=e.remuxer.timescale,l.duration=e.remuxer.timescale*e.duration,e.mse&&e.mse.setExceptionStat(At.AUDIO_CONFIG,1),E.a.log("TsParser._parseAACPES parsed codec:".concat(l.codec,",rate:").concat(t.samplerate,",nb channel:").concat(t.channelCount))};if(this.mse&&this.mse.isLive)l.audiosamplerate||m(this._ADTStoAudioConfig(h,n,this.audioCodec));else{var y=this._ADTStoAudioConfig(h,n,this.audioCodec);l.audiosamplerate?l.audiosamplerate!==y.samplerate&&this.mse&&this.mse.onParseError(99):m(y)}for(;n+5<d;){if(r=1&h[n+1]?7:9,o=(3&h[n+3])<<11,o|=h[n+4]<<3,o|=(224&h[n+5])>>>5,(o-=r)<0)return void E.a.error("TsParser._parseAACPES adtsFrameSize:".concat(o,", adtsStartOffset:").concat(n,", len:").concat(d));if(0!=o){if(!((a=n+r)+o<=d))break;if(s=Math.round(t.pts+1024*f*this.PES_TIMESCALE/l.audiosamplerate),i={unit:h.subarray(a,a+o),pts:s,dts:s},this.aFps.addDts(s/90),1==localStorage._printAudioTs){var v=s/90-this.mse.curAudioDts;E.a.debug("%cTsParser.parseAacPes dts=","color:red",s/90,v,"pts=".concat(t.pts/90," cts=").concat((t.pts-t.dts)/90)),v>200&&E.a.warn("TsParser.parseAacPes dts gap=".concat(v))}for(this.mse&&(this.mse.curAudioDts=parseInt(s/90)),this.mse&&this.mse.setExceptionStat(At.AUDIO_FRAME,1),l.samples.push(i),l.len+=o,n+=r+o,f++;n<d-1&&(255!==h[n]||240!=(240&h[n+1]));n++);}else n+=r}n<d&&(this.aacOverFlow=h.subarray(n,d))}else E.a.error("TsParser._parseAACPES pes is null.")}},{key:"_ADTStoAudioConfig",value:function(e,i,n){var r=t.AdtsSampleingRates,o=1+((192&e[i+2])>>>6),a=(60&e[i+2])>>>2;if(!(a>r.length-1)){var s,u,c=(1&e[i+2])<<2|(192&e[i+3])>>>6,l=navigator.userAgent.toLowerCase();return-1!==l.indexOf("firefox")?a>=6?(o=5,u=new Array(4),s=a-3):(o=2,u=new Array(2),s=a):-1!==l.indexOf("android")?-1!==l.indexOf("mqqbrowser")?(o=2,u=new Array(2),s=a):(o=5,u=new Array(4),s=a):(o=5,u=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&a>=6?s=a-3:(n&&-1!==n.indexOf("mp4a.40.2")&&(a>=6||1===c)&&(o=2,u=new Array(2)),s=a)),u[0]=o<<3,u[0]|=(14&a)>>1,u[1]|=(1&a)<<7,u[1]|=c<<3,5===o&&(u[1]|=(14&s)>>1,u[2]=(1&s)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:r[a],channelCount:c,codec:"mp4a.40."+o}}E.a.error("TsParser._ADTStoAudioConfig ERROR:invalid ADTS sampling index:".concat(a))}},{key:"_parseID3PES",value:function(t){this._id3Track.samples.push(t)}}]),t}();rn.AdtsSampleingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var on,an=rn,sn=i(9),un=function(){function t(){Object(v.a)(this,t),this.size=0,this.buffers=[]}return Object(g.a)(t,[{key:"destroy",value:function(){this.reset()}},{key:"reset",value:function(){E.a.log("FlvCacher.reset",this.size),this.size=0,this.buffers=[]}},{key:"append",value:function(t){0!==t.length&&(this.buffers.push(t),this.size+=t.length)}},{key:"getByte",value:function(t){for(var e=0,i=0;i<this.buffers.length;++i){var n=this.buffers[i];if(e+n.length>t)return n[t-e];e+=n.length}return E.a.warn("FlvCacher.getByte has no offset="+t),0}},{key:"popFrame",value:function(){if(0===this.size)return null;if(0===this.buffers.length)return E.a.error("FlvCacher.popFront error no buffers, size:"+this.size+" not eq 0"),this.reset(),null;if(this.size<=Xn.TAG_HEADER_LEN+Xn.PREV_TAG_SIZE_LEN)return null;var t=(this.getByte(1)<<16)+(this.getByte(2)<<8)+this.getByte(3),e=Xn.TAG_HEADER_LEN+t+Xn.PREV_TAG_SIZE_LEN;if(this.size<e)return null;if(1===this.buffers.length){if(this.buffers[0].length===e)return this.size-=e,this.buffers.shift();var i=this.buffers[0].slice(0,e);return this.buffers[0]=this.buffers[0].slice(e),this.size-=e,i}for(var n,r=new Uint8Array(e),o=0,a=0;o<e;){var s=e-o;if(this.buffers[0].length>s){n=this.buffers[0].slice(0,s),r.set(n,a),a+=s,o+=s,this.buffers[0]=this.buffers[0].slice(s),this.size-=s;break}n=this.buffers.shift(),r.set(n,a),a+=n.length,o+=n.length,this.size-=n.length}return r}}]),t}(),cn=(on=new ArrayBuffer(2),new DataView(on).setInt16(0,256,!0),256===new Int16Array(on)[0]),ln=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"parseObject",value:function(e,i,n){var r=t.parseString(e,i),o=t.parseScript(e,i+r.size);return{data:{name:r.data,value:o.data},size:o.size}}},{key:"parseVariable",value:function(e,i,n){return t.parseObject(e,i,n)}},{key:"parseDate",value:function(t,e,i){if(i<10)throw new Error("Data size invalid when parse Date");var n=new DataView(t,e),r=n.getFloat64(0,!cn),o=n.getInt16(8,!cn);return{data:new Date(r+=60*o*1e3),size:10}}},{key:"parseString",value:function(t,e){var i=new DataView(t,e),n=i.getUint16(0,!cn),r="";if(n>0)for(var o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(o+2));return{data:r,size:2+n}}},{key:"parseMetadata",value:function(e){var i=t.parseScript(e,0);return t.parseScript(e,i.size,e.length-i.size)}},{key:"parseScript",value:function(e,i,n){var r=i,o=new Uint8Array(e).buffer,a=new DataView(o,0,n),s=null,u=a.getUint8(r);switch(r+=1,u){case 0:s=a.getFloat64(r,!cn),r+=8;break;case 1:s=!!a.getUint8(r),r+=1;break;case 2:var c=t.parseString(o,r);s=c.data,r+=c.size;break;case 3:for(s={};r<n-3;){var l=t.parseObject(o,r,n-i);if(s[l.data.name]=l.data.value,r=l.size,0===a.getUint8(r)&&0===a.getUint8(r+1)&&9===a.getUint8(r+2)){r+=3;break}}break;case 8:for(s={},r+=4;r<n-8;){var h=t.parseVariable(o,r);s[h.data.name]=h.data.value,r=h.size}r<=n-3&&9==(16777215&a.getUint32(r-1,!cn))&&(r+=3);break;case 10:s=[];var d=a.getUint32(r,!cn);r+=4;for(var f=0;f<d;f++){var p=t.parseScript(o,r);s.push(p.data),r=p.size}break;case 11:var m=t.parseDate(o,r+1,n-1);s=m.data,r+=m.size;break;case 12:var y=t.parseString(o,r+1);s=y.data,r+=y.size;break;default:r=n,console.log("AMF","Unsupported AMF value type "+u)}return{data:s,size:r}}},{key:"getStr",value:function(t,e,i){for(var n="",r=0;r<i;r++)n+=String.fromCharCode(t[e++]);return n}}]),t}(),hn=function(){function t(){Object(v.a)(this,t),this.listeners={}}return Object(g.a)(t,[{key:"clear",value:function(){this.listeners={}}},{key:"has",value:function(t,e,i){var n=this.listeners[t];if(!n)return!1;for(var r=0,o=n.length;r<o;r++){var a=n[r];if(a.callback==e&&a.thisObj==i)return!0}return!1}},{key:"on",value:function(t,e,i,n){if(!this.has(t,e,i)){var r=this.listeners[t]||[];r.push({priority:n||0,callback:e,thisObj:i,bindCallback:i?e.bind(i):e}),r.sort((function(t,e){return e.priority-t.priority})),this.listeners[t]=r}}},{key:"off",value:function(t,e,i){var n=this.listeners[t];if(n)for(var r=n.length-1;r>=0;r--){var o=n[r];if(o.callback==e&&o.thisObj==i)return void n.splice(r,1)}}},{key:"trigger",value:function(t,e){var i=this.listeners[t];if(i)for(var n=i.length-1;n>=0;n--)(0,i[n].bindCallback)(e)}}]),t}(),dn=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).printProtocol=!!Number(localStorage._printProtocol),t}return Object(g.a)(i,[{key:"onData",value:function(t,e){var i=this.unmarshall(t,e);this.trigger(t,i)}},{key:"unmarshall",value:function(t,e){var i=new Pi.a(e),n=Ti.a[t],r=i,o=null;try{o=this.getClass(n)}catch(e){E.a.warn("%c[x] Unmatched protocol ".concat(t>>8," ").concat(n),"color:red;background:#FFF0F0")}return o&&(void 0===(r=new o).unmarshall?E.a.error("[x]"+n+".unmarshall undefined!"):r.unmarshall(i)),this.printProtocol&&!fn[n]&&E.a.debug("%c<<<<< "+n,"font-weight:900;color:#0000E3",r),r}},{key:"getClass",value:function(t){return null}}]),i}(hn),fn={PCdnProxyPing:1,PCdnProxyPingRes:1,PP2pSliceAudioData:1,PP2pSliceVideoData:1,PP2pSliceControlData:1,PCdnP2pGetNode:1,PCdnP2pGetNodeRes:1,P2POffer:1,P2PAnswer:1,P2PCandidate:1,P2POfferReject:1,P2PRequestOffer:1,PCdnP2PWSForward:1,PCdnP2PWSForwardReject:1,PCdnP2pReportLog:1,PCDNSubscribeReq:1,PCDNSubscribeRes:1,PCDNCompeteSubscribeReq:1,PCDNCompeteSubscribeRes:1,P2PPunchBackReq:1,P2PPunchBackRsp:1,HuyaDelaySeiData:1},pn=dn,mn=function(){function t(){Object(v.a)(this,t),this.osTime=0,this.syncLocalTime=0,this.rttList=[]}return Object(g.a)(t,[{key:"convertToSrvTime",value:function(t){if(0===this.osTime)return 0;var e=t-this.osTime;return this.syncLocalTime+e}},{key:"isFinishNtp",value:function(){return 0!==this.osTime}},{key:"ntpProcess",value:function(t,e){var i=F.a.now(),n=i-t,r=Math.round(e+n/2);if(0===this.osTime&&0===this.syncLocalTime)this.osTime=i,this.syncLocalTime=r,this.rttList.push(n);else if(this.rttList.length<10)this.osTime=i,this.syncLocalTime=r,this.rttList.push(n);else{for(var o=[],a=0;a<this.rttList.length;++a)o.push(this.rttList[a]);o.sort((function(t,e){return t-e}));for(var s=0,u=0;u<4;++u)s+=o[u];var c=s>>2;(4*n>3*c&&4*n<5*c||n>6e4)&&(this.osTime=i,this.syncLocalTime=r),this.rttList.shift(),this.rttList.push(n),o=null}}}]),t}(),yn=i(13).default,vn=i(36).default,gn=new(function(){function t(){Object(v.a)(this,t),this._info=new mn,this._clientTime=0,this._requestId=0,this._onWsTimeSyncBind=this._onWsTimeSync.bind(this)}return Object(g.a)(t,[{key:"start",value:function(){this.wsTimeSync(),Ji.add(this._onTimer,this,1e3)}},{key:"_onTimer",value:function(t,e){e%60==0&&this.wsTimeSync()}},{key:"wsTimeSync",value:function(){""!==N.sGuid&&(this._req||(this._req=new yn.WSTimeSyncReq),this._requestId=vn.getRequestId(),this._clientTime=F.a.now(),this._req.sGuid=N.sGuid,this._req.lClientTime=this._clientTime,vn.sendWup("launch","wsTimeSync",this._req,this._onWsTimeSyncBind,!0,this._requestId))}},{key:"_onWsTimeSync",value:function(t){this._info.ntpProcess(this._clientTime,Number(t.lServerTime))}},{key:"getSyncTime",value:function(){return this._info.convertToSrvTime(F.a.now())}},{key:"isFinishNtp",value:function(){return this._info.isFinishNtp()}}]),t}()),_n=function(){function t(e){Object(v.a)(this,t),this._split=e,this._str=""}return Object(g.a)(t,[{key:"isEmpty",value:function(){return""===this._str}},{key:"addStr",value:function(t){this._str.length>0&&(this._str+=this._split),this._str+=t}},{key:"getStr",value:function(){return this._str}}]),t}(),Sn=[72,85,89,65,58],wn=[44,162,222,9,181,23,71,219,187,85,164,254,127,194,252,78],bn={HUMEN:"00000001",DELAY:"00000200",VOLUME:"00000400",IFRAME:"00000600"},In=function(t){Object(Si.a)(n,t);var e=Object(wi.a)(n);function n(){return Object(v.a)(this,n),e.call(this)}return Object(g.a)(n,[{key:"getClass",value:function(t){return i(55)("./"+t).default}}]),n}(pn),Tn=function(){function t(e){Object(v.a)(this,t),this._mse=e,this._protoHandler=new In,this._proto=null,this._netDelaySum=0,this._c2cDelaySum=0,this._svrDelaySum=0,this._delayCnt=0,this._curAnchorDelay=0,this._offset=0,this.initDts=0,this.initSeiDts=0}return Object(g.a)(t,[{key:"getStat",value:function(){if(0===this._delayCnt)return null;var t={fields:{},dims:{}};if(this._delayCnt>0&&(t.fields.delay_anchor=Math.floor(this._c2cDelaySum/this._delayCnt),t.fields.delay_server=Math.floor(this._svrDelaySum/this._delayCnt),t.fields.delay_net=Math.floor(this._netDelaySum/this._delayCnt),this._proto)){t.dims.uploader_type=this._proto.anchorSei.uploadType+"",t.dims.encoder_source=this._proto.anchorSei.encoderSource+"";var e=new _n(","),i=new _n(","),n=new _n(",");this._proto.serverSei.serverInfos.forEach((function(t){t.enable>0&&(e.addStr(t.getProxyIdStr()+"-"+t.proxyType),t.serverDelay>0&&t.serverDelay<1e4&&i.addStr(t.proxyType+":"+t.serverDelay),t.lastPeriodDelay>0&&t.lastPeriodDelay<1e4&&n.addStr(t.proxyType+":"+t.lastPeriodDelay))})),e.isEmpty()||(t.dims.delay_node_info=e.getStr()),i.isEmpty()||(t.dims.svr_delay_infos=i.getStr()),n.isEmpty()||(t.dims.svr_last_p_delay=n.getStr())}return this._netDelaySum=0,this._c2cDelaySum=0,this._svrDelaySum=0,this._delayCnt=0,this._proto=null,t}},{key:"_record",value:function(t,e){this._proto=e;var i=gn.getSyncTime(),n=t-e.serverSei.dtsGapSum-e.anchorSei.frameDts,r=i-e.anchorSei.sendFrameTime-n;if(this.initSeiDts!=e.anchorSei.frameDts&&(this._mse.offsetDts=t-e.anchorSei.frameDts),this.initSeiDts=e.anchorSei.frameDts,0<r&&r<3e4){var o=i-e.anchorSei.caputureTime-n;this._netDelaySum+=r,this._c2cDelaySum+=o,this._svrDelaySum+=r-e.serverSei.delaySum,this._delayCnt++,this._curAnchorDelay=o||this._curAnchorDelay,this._curAnchorDelay>3e5&&(this._curAnchorDelay=0),this._mse.setSeiDelay(this._curAnchorDelay)}}},{key:"parseSei",value:function(e,i,n,r){if(e+=this.initDts,this._offset=0,n==t.H265_CODEC_TYPE?(i=this._nalUintExtractRbsp(i),this._offset+=2):n==t.AV1_CODEC_TYPE||(this._offset+=1),this._getValue(i),this._getValue(i),this._getH265Len(i),this._isHuya(i)){var o=i.subarray(this._offset),a=this._getType(o);r[a]=1,this._mse.saveSeiInfo(e,o,a),a===bn.DELAY?this._parseDelay(e,o):a===bn.HUMEN?this._mse.saveH264SeiData(e,o):a===bn.VOLUME&&this._mse.parser&&this._mse.parser.parseScriptTagMixAudio&&this._mse.parser.parseScriptTagMixAudio(this._getStr(o),e)}}},{key:"_nalUintExtractRbsp",value:function(t){for(var e=new Uint8Array(t.length),i=t.length,n=0,r=0;n+2<i;)t[n]||t[n+1]||3!==t[n+2]?e[r++]=t[n++]:(e[r++]=t[n++],e[r++]=t[n++],n++);for(;n<i;)e[r++]=t[n++];return e.subarray(0,r)}},{key:"_getStr",value:function(t){for(var e=t.length,i=new Uint8Array(t.length),n=0;n<e;n++)i[n]=t[n];e=this._getLength(t)+8+16+2;for(var r=26,o=new DataView(i.buffer),a=[];r+9<=e;){var s=4294967296*o.getUint32(r,!1)+o.getUint32(r+4,!1),u=o.getUint8(r+8);a.push(s+"_"+u),r+=9}return a.join(",")}},{key:"_getLength",value:function(t){for(var e="",i=9;i<26;i++)e+=String.fromCharCode(t[i]);return parseInt(e)}},{key:"_getValue",value:function(t){for(var e=0,i=t.length;this._offset<i;){if(e+=t[this._offset],255!==t[this._offset]){this._offset++;break}this._offset++}return e}},{key:"_parseDelay",value:function(t,e){if(gn.isFinishNtp())for(var i=this._decodeData(e),n=i.length,r=new DataView(i.buffer),o=0;o+10<n;){var a=r.getUint32(o,!0),s=r.getUint32(o+4,!0);if(0===a||a>n)break;if(s===Ti.a.HuyaDelaySeiData){var u=new DataView(i.buffer,o,a),c=this._protoHandler.unmarshall(s,u);this._record(t,c)}o+=a}}},{key:"_decodeData",value:function(t){for(var e=this._decodeBase64(t),i=e.length,n=new Uint8Array(i),r=0;r<i;r++)n[r]=e.charCodeAt(r);return n}},{key:"_decodeBase64",value:function(t){for(var e="",i=this._getPayloadLen(t),n=0;n<i;n++)e+=String.fromCharCode(t[n+26]);return atob(e)}},{key:"_getPayloadLen",value:function(t){for(var e="",i=0;i<16;i++)e+=String.fromCharCode(t[i+9]);return parseInt(e)}},{key:"_getType",value:function(t){for(var e="",i=0;i<8;i++)e+=String.fromCharCode(t[i]);return e}},{key:"_getH265Len",value:function(t){for(var e=0,i=0;i<16&&t[this._offset]===wn[i];i++)this._offset++,e++;return e}},{key:"_isHuya",value:function(t){for(var e=0;e<5;e++){if(t[this._offset]!==Sn[e])return!1;this._offset++}return!0}}]),t}();Tn.H264_CODEC_TYPE=0,Tn.H265_CODEC_TYPE=1,Tn.AV1_CODEC_TYPE=2,Tn.SEI_TYPES=bn;var Pn=Tn,En=function(){function t(e){Object(v.a)(this,t),this._bytes=e,this._bitIndex=0,this._bitLen=8*e.byteLength}return Object(g.a)(t,[{key:"getBits",value:function(t){var e=Math.floor(this._bitIndex/8),i=8-this._bitIndex%8,n=this._bytes[e]&(1<<i)-1;if(t<=i)return this._bitIndex+=t,n>>>i-t;var r=t-i;return this._bitIndex+=i,(n<<r|this.getBits(r))>>>0}},{key:"skipBits",value:function(t){this._bitIndex+=t}},{key:"getBytes",value:function(t){if(this._bitIndex%8!=0)throw new Error("can't get bytes from mid-byte: bit index="+this._bitIndex);var e=Math.floor(this._bitIndex/8);return this._bitIndex+=8*t,this._bytes.subarray(e,e+t)}},{key:"bytePosition",get:function(){return Math.floor(this._bitIndex/8)}},{key:"bitposition",get:function(){return this._bitIndex}}]),t}(),kn=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"leb128",value:function(t){for(var e=0,i=0;i<8;i++){var n=t.getBits(8);if(e|=(127&n)<<7*i,!(128&n))break}return e}},{key:"parseOBUHeader",value:function(t){var e={},i=t.bits;return e.obu_forbidden_bit=i.getBits(1),e.obu_type=i.getBits(4),e.obu_extension_flag=i.getBits(1),e.obu_has_size_field=i.getBits(1),e.obu_reserved_1bit=i.getBits(1),1==e.obu_extension_flag&&(e.temporal_id=i.getBits(3),e.spatial_id=i.getBits(2),e.extension_header_reserved_3bits=i.getBits(3)),e}},{key:"uvlc",value:function(t){for(var e=0;!t.getBits(1);)++e;return e>=32?0:t.getBits(e)+(1<<e)-1}},{key:"color_config",value:function(e){var i={};return i.high_bitdepth=e.getBits(1),2==i.seq_profile&&i.high_bitdepth?(i.twelve_bit=e.getBits(1),i.BitDepth=i.twelve_bit?12:10):i.BitDepth=i.high_bitdepth?10:8,1==i.seq_profile?i.mono_chrome=0:i.mono_chrome=e.getBits(1),i.color_description_present_flag=e.getBits(1),i.color_description_present_flag?(i.color_primaries=e.getBits(8),i.transfer_characteristics=e.getBits(8),i.matrix_coefficients=e.getBits(8)):(i.color_primaries=t.CP_UNSPECIFIED,i.transfer_characteristics=t.TC_UNSPECIFIED,i.matrix_coefficients=t.MC_UNSPECIFIED),i.mono_chrome?(i.color_range=e.getBits(1),i.subsampling_x=1,i.subsampling_y=1,i.chroma_sample_position=t.CSP_UNKNOWN,i.separate_uv_delta_q=0,i):(i.color_primaries==t.CP_BT_709&&i.transfer_characteristics==t.TC_SRGB&&i.matrix_coefficients==t.MC_IDENTITY?(i.color_range=1,i.subsampling_x=0,i.subsampling_y=0):(i.color_range=e.getBits(1),0==i.seq_profile?(i.subsampling_x=1,i.subsampling_y=1):1==i.seq_profile?(i.subsampling_x=0,i.subsampling_y=0):12==i.BitDepth?(i.subsampling_x=e.getBits(1),i.subsampling_x?i.subsampling_y=e.getBits(1):i.subsampling_y=0):(i.subsampling_x=1,i.subsampling_y=0),i.subsampling_x&&i.subsampling_y&&(i.chroma_sample_position=e.getBits(2))),i.separate_uv_delta_q=e.getBits(1),i)}},{key:"metadata_obu",value:function(e,i){var n={},r=e.bits;if(n.metadata_type=t.leb128(r),n.metadata_type==t.METADATA_TYPE_ITUT_T35){n.itu_t_t35_country_code=r.getBits(8),255==n.itu_t_t35_country_code&&(n.itu_t_t35_country_code_extension_byte=r.getBits(8));var o=(8*i-r.bitposition)/8;n.itu_t_t35_payload_bytes=r.getBytes(o)}else if(n.metadata_type==t.METADATA_TYPE_HDR_CLL)n.max_cll=r.getBits(16),n.max_fall=r.getBits(16);else if(n.metadata_type==t.METADATA_TYPE_HDR_MDCV){n.primary_chromaticity_x=[],n.primary_chromaticity_y=[];for(var a=0;a<3;a++)n.primary_chromaticity_x[a]=r.getBits(16),n.primary_chromaticity_y[a]=r.getBits(16);n.white_point_chromaticity_x=r.getBits(16),n.white_point_chromaticity_y=r.getBits(16),n.luminance_max=r.getBits(32),n.luminance_min=r.getBits(32)}else if(n.metadata_type==t.METADATA_TYPE_SCALABILITY){if(n.scalability_mode_idc=r.getBits(8),n.scalability_mode_idc==t.SCALABILITY_SS){if(n.spatial_layers_cnt_minus_1=r.getBits(2),n.spatial_layer_dimensions_present_flag=r.getBits(1),n.spatial_layer_description_present_flag=r.getBits(1),n.temporal_group_description_present_flag=r.getBits(1),n.scalability_structure_reserved_3bits=r.getBits(3),n.spatial_layer_dimensions_present_flag)for(var s=0;s<=n.spatial_layers_cnt_minus_1;s++)n.spatial_layer_max_width[s]=r.getBits(16),n.spatial_layer_max_height[s]=r.getBits(16);if(n.spatial_layer_description_present_flag)for(var u=0;u<=n.spatial_layers_cnt_minus_1;u++)n.spatial_layer_ref_id[u]=r.getBits(8);if(n.temporal_group_description_present_flag){n.temporal_group_size=r.getBits(8);for(var c=0;c<n.temporal_group_size;c++){n.temporal_group_temporal_id[c]=r.getBits(3),n.temporal_group_temporal_switching_up_point_flag[c]=r.getBits(1),n.temporal_group_spatial_switching_up_point_flag[c]=r.getBits(1),n.temporal_group_ref_cnt[c]=r.getBits(3);for(var l=0;l<temporal_group_ref_cnt[c];l++)n.temporal_group_ref_pic_diff[c][l]=r.getBits(8)}}}}else n.metadata_type==t.METADATA_TYPE_TIMECODE&&(n.counting_type=r.getBits(5),n.full_timestamp_flag=r.getBits(1),n.discontinuity_flag=r.getBits(1),n.cnt_dropped_flag=r.getBits(1),n.n_frames=r.getBits(9),n.full_timestamp_flag?(n.seconds_value=r.getBits(6),n.minutes_value=r.getBits(6),n.hours_value=r.getBits(5)):(n.seconds_flag=r.getBits(1),n.seconds_flag&&(n.seconds_value=r.getBits(6),n.minutes_flag=r.getBits(1),n.minutes_flag&&(n.minutes_value=r.getBits(6),n.hours_flag=r.getBits(1),n.hours_flag&&(n.hours_value=r.getBits(5))))),n.time_offset_length=r.getBits(5),n.time_offset_length>0&&(n.time_offset_value=r.getBits(n.time_offset_length)));return n}},{key:"sequence_header_obu",value:function(e){var i={},n=e.bits;if(i.seq_profile=n.getBits(3),i.still_picture=n.getBits(1),i.reduced_still_picture_header=n.getBits(1),i.reduced_still_picture_header)i.timing_info_present_flag=0,i.decoder_model_info_present_flag=0,i.initial_display_delay_present_flag=0,i.operating_points_cnt_minus_1=0,i["operating_point_idc[0]"]=0,i["seq_level_idx[0]"]=n.getBits(5),i["seq_tier[0]"]=0,i["decoder_model_present_for_this_op[0]"]=0,i["initial_display_delay_present_for_this_op[0]"]=0;else{i.timing_info_present_flag=n.getBits(1),i.timing_info_present_flag?(i.num_units_in_display_tick=n.getBits(32),i.time_scale=n.getBits(32),i.equal_picture_interval=n.getBits(1),i.equal_picture_interval&&(i.num_ticks_per_picture_minus_1=t.uvlc(n)),i.decoder_model_info_present_flag=n.getBits(1),i.decoder_model_info_present_flag&&(i.buffer_delay_length_minus_1=n.getBits(5)),i.num_units_in_decoding_tick=n.getBits(32),i.buffer_removal_time_length_minus_1=n.getBits(5),i.frame_presentation_time_length_minus_1=n.getBits(5),i.initial_display_delay_present_flag=n.getBits(1),i.operating_points_cnt_minus_1=n.getBits(5)):(i.decoder_model_info_present_flag=0,i.initial_display_delay_present_flag=n.getBits(1),i.operating_points_cnt_minus_1=n.getBits(5));for(var r=0;r<=i.operating_points_cnt_minus_1;r++){if(i["operating_point_idc["+r+"]"]=n.getBits(12),i["seq_level_idx["+r+"]"]=n.getBits(5),i["seq_level_idx["+r+"]"]>7?i["seq_tier["+r+"]"]=n.getBits(1):i["seq_tier["+r+"]"]=0,i.decoder_model_info_present_flag){if(i["decoder_model_present_for_this_op["+r+"]"]=n.getBits(1),i["decoder_model_present_for_this_op["+r+"]"]){var o=i.buffer_delay_length_minus_1+1;i["decoder_buffer_delay["+r+"]"]=n.getBits(o),i["encoder_buffer_delay["+r+"]"]=n.getBits(o),i["low_delay_mode_flag["+r+"]"]=n.getBits(1)}}else i["decoder_model_present_for_this_op["+r+"]"]=0;i.initial_display_delay_present_flag&&(i["initial_display_delay_present_for_this_op["+r+"]"]=n.getBits(1)),i["initial_display_delay_present_for_this_op["+r+"]"]&&(i["initial_display_delay_minus_1["+r+"]"]=n.getBits(4))}}return i.frame_width_bits_minus_1=n.getBits(4),i.frame_height_bits_minus_1=n.getBits(4),i.max_frame_width_minus_1=n.getBits(i.frame_width_bits_minus_1+1),i.max_frame_height_minus_1=n.getBits(i.frame_height_bits_minus_1+1),i.reduced_still_picture_header?i.frame_id_numbers_present_flag=0:i.frame_id_numbers_present_flag=n.getBits(1),i.frame_id_numbers_present_flag&&(i.delta_frame_id_length_minus_2=n.getBits(4),i.additional_frame_id_length_minus_1=n.getBits(3)),i.use_128x128_superblock=n.getBits(1),i.enable_filter_intra=n.getBits(1),i.enable_intra_edge_filter=n.getBits(1),i.reduced_still_picture_header?(i.enable_interintra_compound=0,i.enable_masked_compound=0,i.enable_warped_motion=0,i.enable_dual_filter=0,i.enable_order_hint=0,i.enable_jnt_comp=0,i.enable_ref_frame_mvs=0,i.seq_force_screen_content_tools=t.SELECT_SCREEN_CONTENT_TOOLS,i.seq_force_integer_mv=1,i["#OrderHintBits"]=0):(i.enable_interintra_compound=n.getBits(1),i.enable_masked_compound=n.getBits(1),i.enable_warped_motion=n.getBits(1),i.enable_dual_filter=n.getBits(1),i.enable_order_hint=n.getBits(1),i.enable_order_hint&&(i.enable_jnt_comp=n.getBits(1),i.enable_ref_frame_mvs=n.getBits(1)),i.seq_choose_screen_content_tools=n.getBits(1),i.seq_choose_screen_content_tools?i.seq_force_screen_content_tools=t.SELECT_SCREEN_CONTENT_TOOLS:i.seq_force_screen_content_tools=n.getBits(1),i.seq_force_screen_content_tools>0&&(i.seq_choose_integer_mv=n.getBits(1),i.seq_choose_integer_mv?i.seq_force_integer_mv=1:i.seq_force_integer_mv=n.getBits(1)),i.enable_order_hint?(i.order_hint_bits_minus_1=n.getBits(3),i["#OrderHintBits"]=i.order_hint_bits_minus_1+1):i["#OrderHintBits"]=0,i.enable_superres=n.getBits(1),i.enable_cdef=n.getBits(1),i.enable_restoration=n.getBits(1),(0,P.default)(i,t.color_config(n)),i.film_grain_params_present=n.getBits(1)),i}},{key:"parseOBU",value:function(e,i,n,r){for(var o={bits:new En(e)},a=0;e.length-a>1;){var s;1==(s=t.parseOBUHeader(o)).obu_extension_flag&&a++;var u,c=e.length-a;if(u=s.obu_has_size_field?t.leb128(o.bits):c-1-s.obu_extension_flag,s.obu_type==t.OBU_SEQUENCE_HEADER&&n)n(t.sequence_header_obu(o));else if(s.obu_type==t.OBU_METADATA&&r){var l=t.metadata_obu(o,o.bits.bytePosition+u);l.itu_t_t35_payload_bytes&&r(i,l)}else o.bits.skipBits(8*u);a=o.bits.bytePosition}}},{key:"zeroPad",value:function(t,e,i){t||(t=0),void 0===i&&(i=10);for(var n=t.toString(i);n.length<e;)n="0"+n;return n}}]),t}();kn.OBU_SEQUENCE_HEADER=1,kn.OBU_TEMPORAL_DELIMITER=2,kn.OBU_FRAME_HEADER=3,kn.OBU_TILE_GROUP=4,kn.OBU_METADATA=5,kn.OBU_FRAME=6,kn.OBU_REDUNDANT_FRAME_HEADER=7,kn.OBU_TILE_LIST=8,kn.OBU_PADDING=15,kn.SELECT_SCREEN_CONTENT_TOOLS=2,kn.CP_BT_709=1,kn.CP_UNSPECIFIED=2,kn.TC_SRGB=13,kn.TC_UNSPECIFIED=2,kn.MC_IDENTITY=0,kn.MC_UNSPECIFIED=2,kn.CSP_UNKNOWN=0,kn.METADATA_TYPE_HDR_CLL=1,kn.METADATA_TYPE_HDR_MDCV=2,kn.METADATA_TYPE_SCALABILITY=3,kn.METADATA_TYPE_ITUT_T35=4,kn.METADATA_TYPE_TIMECODE=5,kn.SCALABILITY_SS=14;var Rn=kn,Cn=i(8);function On(t,e,i){return(On="undefined"!=typeof Reflect&&l.default?l.default:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(Cn.a)(t)););return t}(t,e);if(n){var r=(0,c.default)(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}var An=function(){function t(){Object(v.a)(this,t),this.type=-1,this.sn=0,this.samples=[],this.firstDts=0,this.playDts=0,this.lastSampleDts=0}return Object(g.a)(t,[{key:"destroy",value:function(){this.samples=[]}},{key:"clear",value:function(){this.samples=[],this.firstDts=0,this.playDts=0,this.lastSampleDts=0}},{key:"addSample",value:function(t){if(this.lastSampleDts>0){var e=t.ts-this.lastSampleDts;(e>100||e<-100)&&E.a.warn("BufferFrame.addSample type=".concat(this.type," dis=").concat(e," lastDts=").concat(this.lastSampleDts," curDts=").concat(t.ts))}return this.lastSampleDts=t.ts,this.samples.push(t),this._setFirstDts(t.ts),this.setPlayDts(t.ts),t.ts-this.playDts}},{key:"_setFirstDts",value:function(t){0===this.firstDts&&(this.firstDts=t)}},{key:"setPlayDts",value:function(t){0===this.playDts&&(this.playDts=t)}},{key:"_createTrack",value:function(e){return{type:e,id:e===t.TYPES.video?1:2,sn:0,samples:[],len:0,duration:0,startDts:-1,endDts:0,naluCnt:0}}},{key:"getTrack",value:function(t){var e=this._createTrack(this.type),i=this._fillTrack(e,t);return i>0&&this.samples.splice(0,i),e.endDts>0&&(e.sn=this.sn,this.sn++),e}},{key:"_fillTrack",value:function(t,e){return 0}},{key:"_addTrack",value:function(t,e){t.samples.push(e),-1===t.startDts&&(t.startDts=e.ts),t.endDts=e.ts,e.av1Bytes&&(t.bytes=e.av1Bytes)}},{key:"getBufferLen",value:function(){var t=this.samples.length;if(t>1){var e=this.samples[0];return this.samples[t-1].ts-e.ts}return 0}},{key:"getSize",value:function(){return this.samples.length}}]),t}();An.TYPES={video:"video",audio:"audio"};var Ln=An,Nn=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).type=Ln.TYPES.video,t}return Object(g.a)(i,[{key:"_fillTrack",value:function(t,e){for(var i=0,n=this.samples.length,r=this.playDts+e,o=0;o<n;o++){var a=this.samples[o];if(a.ts>=r){t.endDts=a.ts;break}i++,this._addTrack(t,a)}return t.endDts>0&&(this.playDts=t.endDts),i}},{key:"_addTrack",value:function(t,e){On(Object(Cn.a)(i.prototype),"_addTrack",this).call(this,t,e),t.naluCnt+=e.units.length,t.len+=e.len}}]),i}(Ln),Mn=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).type=Ln.TYPES.audio,t.needEmptyAudioFrame=!0,t.isPureAudio=!1,t.lastAacTs=0,t.audioObjectType=5,t.audioChannelCount=1,t.audioSampleRate=22050,t.aacTimeLen=1024e3/t.audioSampleRate,t}return Object(g.a)(i,[{key:"_setFirstDts",value:function(t){this.playDts>0&&0===this.firstDts&&t>this.playDts&&t-this.playDts<this.aacTimeLen&&(E.a.log("BufferFrameAudio._setFirstDts reset playDts ".concat(this.playDts," to ").concat(t)),this.playDts=t),On(Object(Cn.a)(i.prototype),"_setFirstDts",this).call(this,t)}},{key:"_fillTrack",value:function(t,e){for(var i=e,n=this.playDts,r=0,o=0,a=0,s=this.samples.length,u=0;n<i;n+=this.aacTimeLen){var c=this.samples[r];if(u=Math.round(n),c&&c.ts<=u){if(r++,a++,this._fixDts(c,u),this._addTrack(t,c),r>=s){n+=this.aacTimeLen;break}}else if(!this.isPureAudio&&this.needEmptyAudioFrame){o++;var l={unit:null,pts:0,dts:0,ts:0};22050===this.audioSampleRate&&2===this.audioObjectType?l.unit=new Uint8Array(nn.emptyAacFrame):l.unit=nn.getSilentFrame(this.audioObjectType,this.audioChannelCount),this._fixDts(l,u),this._addTrack(t,l)}}return this.playDts=n,o>0&&E.a.log("BufferFrameAudio add empty frames ".concat(o)),a}},{key:"_fixDts",value:function(t,e){t.pts=t.dts=90*e,t.ts=e}},{key:"_addTrack",value:function(t,e){On(Object(Cn.a)(i.prototype),"_addTrack",this).call(this,t,e),t.len+=e.unit.length}}]),i}(Ln),Un=function(){function t(e,i){Object(v.a)(this,t),this.popSize=e.bufferSize+e.popDuration,this.waitSize=e.waitSize||2e3,this.popDuration=e.popDuration,this.timescale=e.timescale,this.isPureAudio=e.isPureAudio,this.remuxCb=i,this.avcChange=!1,this.inited=!0,this.hasOriginIFrame=!1,this.gop=B.maxGop,this.lastKeyFrameDts=0,this.paused=!1,this.videoConfig={isHevc:!1,vps:null,sps:null,pps:null,codec:"",width:0,height:0},this.audioConfig={config:null,codec:"mp4a.40.5",audioSampleRate:22050,aacTimeLen:1024e3/22050,audioObjectType:5,audioChannelCount:1},this.vBuffer=new Nn,this.aBuffer=new Mn}return Object(g.a)(t,[{key:"_updateGop",value:function(t){!t.key||this.hasOriginIFrame&&!t.origin_iframe||(this.lastKeyFrameDts>0&&(this.gop=Math.min(B.maxGop,t.ts-this.lastKeyFrameDts)),this.lastKeyFrameDts=t.ts)}},{key:"updateVideoConfig",value:function(t,e){this.videoConfig=t,this.avcChange=e}},{key:"updateAudioConfig",value:function(t){this.audioConfig=t,this.aBuffer.audioSampleRate=t.audiosamplerate,this.aBuffer.aacTimeLen=t.aacTimeLen,this.aBuffer.audioObjectType=t.audioObjectType,this.aBuffer.audioChannelCount=t.audioChannelCount}},{key:"destroy",value:function(){this.remuxCb=null,this.vBuffer.destroy(),this.aBuffer.destroy()}},{key:"addSample",value:function(e){this.inited=!1,e.type===t.TYPES.avc||e.type===t.TYPES.av01?this._addSampleVideo(e):e.type===t.TYPES.aac&&this._addSmapleAudio(e)}},{key:"_addSampleVideo",value:function(t){t.key&&t.origin_iframe&&!this.hasOriginIFrame&&(E.a.log("BufferAv.addSampleVideo find origin_iframe! isIframe=".concat(t.key)),this.hasOriginIFrame=!0),!t.key&&t.origin_iframe&&E.a.warn("BufferAv.addSampleVideo find origin_iframe sei not in iframe"),this.aBuffer.setPlayDts(t.ts),this._updateGop(t);var e=this.vBuffer.addSample(t);!this.paused&&e>this.popSize&&(e>this.waitSize||this.aBuffer.getSize()>0)&&this.popBuffer(this.popDuration)}},{key:"_addSmapleAudio",value:function(t){var e=this.aBuffer.addSample(t);!this.paused&&this.isPureAudio&&e>this.popSize&&this.popBuffer(this.popDuration)}},{key:"popBuffer",value:function(t){var e=this.vBuffer.getTrack(t);e&&(0===e.sn||this.avcChange)&&(0,P.default)(e,this.videoConfig),e.timescale=this.timescale,e.duration=Math.round((e.endDts-e.startDts)*(this.timescale/1e3)),this.avcChange=!1;var i=null;(i=this.isPureAudio?this.aBuffer.getTrack(this.aBuffer.playDts+t):this.aBuffer.getTrack(e.endDts)).config=this.audioConfig.config,i.audiosamplerate=this.audioConfig.audiosamplerate,i.channelCount=this.audioConfig.channelCount,i.codec=this.audioConfig.codec,i.timescale=this.timescale,i.duration=Math.round((i.endDts-i.startDts)*(this.timescale/1e3)),this.remuxCb&&this.remuxCb(e,i)}},{key:"clearBuffer",value:function(){this.vBuffer.clear(),this.aBuffer.clear()}},{key:"setNeedEmptyAudioFrame",value:function(t){this.aBuffer.needEmptyAudioFrame=t}},{key:"getBufferLen",value:function(){return this.isPureAudio?this.aBuffer.getBufferLen():this.vBuffer.getBufferLen()}},{key:"getSize",value:function(){return this.vBuffer.getSize()}}]),t}();Un.TYPES={avc:"avc",av01:"av01",aac:"aac"};var Dn=Un,Bn=function(){function t(){Object(v.a)(this,t),this.list=[],this.switchIFrameDts=0,this.switchIFramePts=0,this.lastIFrameDts=0,this.lastIFRamePts=0}return Object(g.a)(t,[{key:"getDts",value:function(){return this.switchIFrameDts||this.lastIFrameDts}},{key:"getPts",value:function(){return this.switchIFramePts||this.lastIFRamePts}},{key:"setSwitchTs",value:function(t,e){this.switchIFrameDts=t,this.switchIFramePts=e}},{key:"setLastTs",value:function(t,e){this.lastIFrameDts=t,this.lastIFRamePts=e}},{key:"resetPtsSample",value:function(){this.list=[]}},{key:"addPtsSample",value:function(t,e,i,n,r,o){this.list.push({dts:t,pts:e,dtsGap:i,ptsGap:n,hasOrigin:r,isOrigin:o})}},{key:"getMetric",value:function(){var t=[0,0,0],e=[0,0];if(this.list.length>0){var i=this.list[0],n=this.list[this.list.length-1];t[0]=i.dtsGap,t[1]=i.ptsGap,t[2]=this.list.length,t[3]=0,t[4]=n.ptsGap,e[0]=n.hasOrigin?1:2,e[1]=n.isOrigin?1:2,e[2]=0}return{values:t,strs:e}}}]),t}(),Fn=0,xn=function(){function t(e,i){Object(v.a)(this,t),this.config=e,this.remuxCb=i,this.hasVideoConfig=!1,this.needEmptyAudioFrame=!0,this.timescale=9e4,this.hasFrame=!1,this.state=0,this.switchTs=new Bn,this.avBuffer=this._createBuffer(),this.evalBw=null,this.callbacks=null,this._buffered=null,this.id=Fn++,E.a.log("CtrlBuffer.constructor(".concat(this.id,")")),this._curFrameId=0}return Object(g.a)(t,[{key:"setCurFrameId",value:function(t){this._curFrameId=t}},{key:"setBuffered",value:function(t){this._buffered=t}},{key:"addBuffered",value:function(t,e,i){(t.type===Dn.TYPES.avc||t.type===Dn.TYPES.av01&&this._buffered)&&this._buffered.addSample(this._curFrameId,t.ts,e,i)}},{key:"destroy",value:function(){this.remuxCb=null,this.callbacks=null,this._destroyBuffer()}},{key:"_destroyBuffer",value:function(){this.avBuffer&&(this.avBuffer.destroy(),this.avBuffer=null)}},{key:"_createBuffer",value:function(){this._destroyBuffer();var t=new Dn(this.config,this.remuxCb);return t.timescale=this.timescale,t.setNeedEmptyAudioFrame(this.needEmptyAudioFrame),t}},{key:"pause",value:function(){this.avBuffer.paused=!0}},{key:"play",value:function(){this.avBuffer.paused=!1}},{key:"isPaused",value:function(){return this.avBuffer.paused}},{key:"isWaitForIFrame",value:function(){return 1===this.state}},{key:"switchBitrate",value:function(t,e,i){E.a.log("CtrlBuffer(".concat(this.id,").switchBitrate isDown=").concat(t)),this._lastBitrate=e,this._curBitrate=i,this.state=1}},{key:"switchBack",value:function(){E.a.log("CtrlBuffer(".concat(this.id,").switchBack switchIFramePts=").concat(this.switchTs.getDts()," lastIFramePts=").concat(this.switchTs.getPts())),this.state=2,this.avBuffer=this._createBuffer(),this.callbacks&&this.callbacks.start(this.switchTs.getDts(),this.switchTs.getPts())}},{key:"setEval",value:function(t){this.evalBw=t}},{key:"addSample",value:function(t){var e=t.key&&(!this.avBuffer.hasOriginIFrame||t.origin_iframe);if(e&&this.switchTs.setLastTs(t.ts,t.ts+t.cts),t.type!==Dn.TYPES.avc&&t.type!==Dn.TYPES.av01||this.evalBw&&this.evalBw.addSample(t),2===this.state&&(this.hasFrame||t.type!==Dn.TYPES.avc&&t.type!==Dn.TYPES.av01||(E.a.log("CtrlBuffer(".concat(this.id,").addSample first sample dts=").concat(t.ts," pts=").concat(t.ts+t.cts)),this.hasFrame=!0,this.callbacks&&this.callbacks.first())),t.type!==Dn.TYPES.avc&&t.type!==Dn.TYPES.av01||this.hasVideoConfig)if(2===this.state){if(t.key){var i=t.ts+t.cts,n=t.ts-this.switchTs.getDts(),r=i-this.switchTs.getPts();E.a.log("CtrlBuffer(".concat(this.id,").addSample find IFrame origin_iframe=").concat(t.origin_iframe," dts=").concat(t.ts," pts=").concat(i," switchDts=").concat(this.switchTs.switchIFrameDts," switchPts=").concat(this.switchTs.switchIFramePts," dtsGap=").concat(n," ptsGap=").concat(r," iFrameGap=").concat(this.avBuffer.gop)),this.switchTs.addPtsSample(t.ts,i,n,r,this.avBuffer.hasOriginIFrame,t.origin_iframe),i>=this.switchTs.switchIFramePts&&(E.a.log("CtrlBuffer(".concat(this.id,").addSample find new IFrame, switch done")),this.state=0,this.switchTs.setSwitchTs(0,0),this.avBuffer.addSample(t),this.addBuffered(t,!0,r),this.callbacks&&this.callbacks.done(n,t.ts,r))}}else 1===this.state?e?(this._popAllBuffer(),this.avBuffer.hasOriginIFrame=!1,this.hasVideoConfig=!1,this.hasFrame=!1,this.state=2,this.switchTs.setSwitchTs(t.ts,t.ts+t.cts),this.switchTs.resetPtsSample(),E.a.log("CtrlBuffer(".concat(this.id,").addSample find next IFrame origin_iframe=").concat(t.origin_iframe," dts=").concat(this.switchTs.switchIFrameDts," pts=").concat(this.switchTs.switchIFramePts," iFrameGap=").concat(this.avBuffer.gop,", switch start!")),this.callbacks&&this.callbacks.start(this.switchTs.switchIFrameDts,this.switchTs.switchIFramePts)):(t.key&&E.a.log("CtrlBuffer(".concat(this.id,").addSample find next IFrame fail, origin_iframe=").concat(t.origin_iframe," dts=").concat(t.ts," pts=").concat(t.ts+t.cts)),this.avBuffer.addSample(t),this.addBuffered(t,!1,0)):(1===Number(localStorage._printIFramePts)&&t.key&&E.a.log("CtrlBuffer(".concat(this.id,").addSample find next IFrame fail, origin_iframe=").concat(t.origin_iframe," dts=").concat(t.ts," pts=").concat(t.ts+t.cts)),this.avBuffer.addSample(t),this.addBuffered(t,!1,0))}},{key:"_popAllBuffer",value:function(){this.avBuffer&&(this.avBuffer.getBufferLen()>0&&this.avBuffer.popBuffer(u.default),this.avBuffer.clearBuffer())}},{key:"updateVideoConfig",value:function(t,e){e&&this._popAllBuffer(),this.hasVideoConfig=!0,this.avBuffer.updateVideoConfig(t,e)}},{key:"updateAudioConfig",value:function(t,e){e&&this._popAllBuffer(),this.avBuffer.updateAudioConfig(t)}},{key:"setNeedEmptyAudioFrame",value:function(t){this.needEmptyAudioFrame=t,this.avBuffer.setNeedEmptyAudioFrame(t)}},{key:"getBufferLen",value:function(){return this.avBuffer.getBufferLen()}},{key:"getLastIFrameDts",value:function(){return this.switchTs.lastIFrameDts}},{key:"getSize",value:function(){return this.avBuffer.getSize()}}]),t}(),jn=function(){function t(e){Object(v.a)(this,t),this.hasSample=!1,this.samples=new ci(e)}return Object(g.a)(t,[{key:"getSamples",value:function(){return this.samples.getSamples()}},{key:"addCur",value:function(t,e){this.hasSample=!0}},{key:"getResult",value:function(){var t=[],e=this.samples.getSamples(),i=e.length;if(i>0){t.push("size:"+i);for(var n=0;n<i;n++)t.push("".concat(i-n,":").concat(e[n]))}return t.join(",")}},{key:"reset",value:function(){var t=this.samples.cur;this.samples.reset(),this.samples.addCur(t)}}]),t}(),Vn=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Object(v.a)(this,i),(t=e.call(this,n)).lastTs=0,t}return Object(g.a)(i,[{key:"addCur",value:function(t,e){On(Object(Cn.a)(i.prototype),"addCur",this).call(this,t,e);var n=parseInt(e/1e3);this.lastTs>0&&this.lastTs!==n&&this.samples.calculate(),this.lastTs=n,this.samples.addCur(t)}}]),i}(jn),Gn=function(){function t(){Object(v.a)(this,t),this.aSample=new Vn(20),this.vSample=new Vn(20)}return Object(g.a)(t,[{key:"addAudioSample",value:function(t,e){this.aSample.addCur(t,e)}},{key:"addVideoSample",value:function(t,e){this.vSample.addCur(t,e)}},{key:"getResult",value:function(){var t=[],e=this.aSample.getSamples(),i=this.vSample.getSamples(),n=Math.min(i.length,e.length);if(n>0){t.push("size:".concat(n));for(var r=0;r<n;r++)t.push("".concat(n-r,":").concat(i[r]+e[r]))}return t.join(",")}},{key:"reset",value:function(){this.aSample.reset(),this.vSample.reset()}},{key:"recordStat",value:function(t){var e=this.getResult();""!==e&&(this.reset(),t.setCoreDim("real_kbps_sample",e))}}]),t}(),Hn=function(){function t(){Object(v.a)(this,t),this.realFps=0,this.maxDropCnt=0,this.curDropCnt=0,this.startDropDts=0,this.lastDropDts=0,this.started=!1,this.dropTime=0,this.minFps=1e3}return Object(g.a)(t,[{key:"setConfig",value:function(t){this.dropTime=t.dropTime||0;var e=t.minFps||1e3;this.minFps=Math.max(e,parseInt(2*this.realFps/3))}},{key:"reset",value:function(){this.realFps=0,this.maxDropCnt=0,this.curDropCnt=0,this.startDropDts=0,this.lastDropDts=0,this.started=!1}},{key:"start",value:function(){E.a.log("DropFrameController.start"),this.started=!0}},{key:"stop",value:function(){this.started=!1}},{key:"setRealFps",value:function(t){t>0&&0===this.realFps&&(this.realFps=t,this.minFps=Math.max(this.minFps,parseInt(2*t/3)),this.maxDropCnt=Math.max(0,t-this.minFps),E.a.log("DropFrameController.setRealFps fps=".concat(t," minFps=").concat(this.minFps," maxDrop=").concat(this.maxDropCnt)))}},{key:"isCanDrop",value:function(t,e,i){return!(!this.started||this.maxDropCnt<=0||0===this.dropTime)&&!e&&0==(96&i)&&((0===this.startDropDts||t-this.startDropDts>=1e3)&&(this.curDropCnt=0,this.startDropDts=t),this.curDropCnt<this.maxDropCnt&&(0===this.lastDropDts||t-this.lastDropDts>=this.dropTime))&&(this.curDropCnt++,this.lastDropDts=t,!0)}}]),t}(),Wn=function t(){Object(v.a)(this,t),this.totalTime=0,this.frameNum=0},qn=function(){function t(){Object(v.a)(this,t),this.started=!1,this.lastCheckTs=0,this.seg=new Wn,this.segList=[],this.idx=0,this.segSize=10}return Object(g.a)(t,[{key:"addFrame",value:function(){var t=F.a.now();this.started||(this.started=!0,this.lastCheckTs=t,Ji.add(this.onCheckFrameRate,this,200)),this.seg.frameNum++,this.onCheckFrameRate(t)}},{key:"reset",value:function(){this.started=!1,this.lastCheckTs=0,this.seg=new Wn,this.segList=[],this.idx=0,Ji.remove(this.onCheckFrameRate,this)}},{key:"onCheckFrameRate",value:function(t){if(this.lastCheckTs>0&&this.seg){var e=t-this.lastCheckTs;e>=1e3&&(this.seg.totalTime=e,this.segList[this.idx]=this.seg,this.idx++,this.idx>=this.segSize&&(this.idx=0),this.seg=new Wn,this.lastCheckTs=t)}}},{key:"isDownEnough",value:function(t){return t>0&&this.segList.length>0&&this.getAvg()>.9*t}},{key:"getAvg",value:function(){for(var t=0,e=0,i=this.segList.length,n=0;n<i;n++){var r=this.segList[n];t+=r.frameNum,e+=r.totalTime}return t/e*1e3}}]),t}(),Kn=!!Number(localStorage._dropAudio),Yn=!!Number(localStorage._dropVideo),zn=(Number(localStorage._dropGap),function(){function t(){Object(v.a)(this,t),this.lastDts=0,this.lastPts=0,this.lastCts=0,this.dtsStat=[0,0,0,0,0,0],this.ptsStat=[0,0,0,0,0,0],this.ctsStat=[0,0,0,0,0,0],this.playVideoFrameCnt=0,this.playAudioFrameCnt=0}return Object(g.a)(t,[{key:"reset",value:function(){this.lastDts=this.lastPts=this.lastCts=0,this.playVideoFrameCnt=this.playAudioFrameCnt=0,this.dtsStat=[0,0,0,0,0,0],this.ptsStat=[0,0,0,0,0,0],this.ctsStat=[0,0,0,0,0,0]}},{key:"setTimeStamp",value:function(t,e,i){this.addStat(this.dtsStat,this.lastDts,t),this.addStat(this.ptsStat,this.lastPts,e),this.addStat(this.ctsStat,this.lastCts,i),this.lastDts=t,this.lastPts=e,this.lastCts=i}},{key:"addStat",value:function(t,e,i){if(e>0&&i>e){var n=i-e;n>=1e3?t[4]++:n>=800?t[3]++:n>=600?t[2]++:n>=400?t[1]++:n>=200&&t[0]++}}}]),t}()),Jn=[43,138,8,0],Qn=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t,n){var r;return Object(v.a)(this,i),(r=e.call(this)).mse=t,r.remuxer=n,r.flvCacher=new un,r.fps=new Xi,r.downFrameRate=new qn,r.audioFps=new Xi,r.sei=new Pn(t),r.avSample=new Gn,r.timeStampStat=new zn,r.emptyFrames=0,r.ctrlBuffer=new xn({bufferSize:0,popDuration:200,timescale:n.timescale,isPureAudio:t.isPureAudio},r._remux.bind(Object(sn.a)(r))),r.dropFrameCtrl=new Hn,r.DEFAULT_GOP=200,r.bufLen=400,r.firstBufLen=400,r.remuxLen=r.firstBufLen,r.maxWaitTime=2e3,r.pushGop=!1,r.parseFlvHead=!1,r.lengthSizeMinusOne=0,r.hasRemuxed=!1,r.recvVideoFrameTimeStamp=0,r.recvVideoFrameNums=0,r.videoFramePlayDelayTs=0,r.videoFrameCalculatePlayDelayFrames=0,r.audioConfig=Jn.slice(),r.audioSampleRate=22050,r.aacTimeLen=1024e3/r.audioSampleRate,r.validAacTime=500*r.aacTimeLen,r.audioChannelCount=1,r.audioObjectType=5,r.audioIncreaseTSMap=new m.default,r.firstDemuxAudioTS=-1,r.ctrlBuffer.updateAudioConfig({config:r.audioConfig,codec:"mp4a.40.5",audiosamplerate:r.audioSampleRate,aacTimeLen:r.aacTimeLen,audioObjectType:r.audioObjectType,audioChannelCount:r.audioChannelCount},!1),r.spsUnit=null,r.ppsUnit=null,r.vpsUnit=null,r.videoConfig={},r.hasCtsZero=!1,r.paused=!1,r.hasEmptyFrames=!1,r.playVideoFrameCnt=0,r.playVideoLength=0,r.playAudioFrameCnt=0,r.playAudioLength=0,r.playEmptyAudioFrameCnt=0,r.beginParseTs=0,r.hasAudioTag=!1,r.lastAacTs=0,r.hasKeyFrame=!1,r.lastAudioTs=0,r.lastVideoTs=0,r.lastParseDts=0,r.maxaudioptsList=[0,0,0,0,0,0,0,0,0,0],r.last10anduiptsList=[0,0,0,0,0,0,0,0,0,0],r.firstAudioTs=-1,r.showH265Tip=!1,r.appendHighQualityEmptyAudio=!0,r.deleteH264Aud=!1,r.incompleteFlvheaderLen=0,r.videoFrames=0,r.audioFrames=0,r.headCache=null,r.OBUParser=new Rn,r.seiTypes={},r.av1Bytes=0,r.lastDropDts=0,r.reset(),r.onAV1SequenceHeaderBind=r.onAV1SequenceHeader.bind(Object(sn.a)(r)),r.onAV1MetaDataBind=r.onAV1MetaData.bind(Object(sn.a)(r)),r}return Object(g.a)(i,[{key:"printPlayFrameInfo",value:function(){E.a.log("FlvParser.playFrameInfo",this.timeStampStat.playVideoFrameCnt,this.timeStampStat.playAudioFrameCnt)}},{key:"getLastIFrameDts",value:function(){return this.ctrlBuffer.getLastIFrameDts()}},{key:"getFrameBufferLen",value:function(){return this.ctrlBuffer.getBufferLen()}},{key:"getAudioFrames",value:function(){return this.audioFrames}},{key:"getVideoFrames",value:function(){return this.videoFrames}},{key:"getFps",value:function(){return this.fps.getFps()}},{key:"getRealFps",value:function(){return this.fps.realFps}},{key:"isDownEnough",value:function(){return this.downFrameRate.isDownEnough(this.fps.realFps)}},{key:"getAudioFps",value:function(){return this.audioFps&&this.audioFps.getFps()}},{key:"getFrameReadyed",value:function(){return this.ctrlBuffer.getSize()}},{key:"setDecoctorTimeAbnormal",value:function(){var t=localStorage.decodeabnormal;if(t&&t.split("_").length>1){var e=parseInt(t.split("_")[1]),i=(new Date).getTime()-e;i&&i>864e5?(this.appendHighQualityEmptyAudio=!0,localStorage.decodeabnormal=""):this.appendHighQualityEmptyAudio=!1}}},{key:"destroy",value:function(){this.reset()}},{key:"reset",value:function(t){E.a.log("FlvParser.reset"),this.printFirstVideoTs=!1,this.printFirstAudioTs=!1,this.pfvTs=!1,this.pfaTs=!1,this.fps.reset(),this.audioFps.reset(),this.flvCacher.destroy(),this.timeStampStat.reset(),this.dropFrameCtrl.reset(),this.lastParseDts=0,this.hasAudioTag=!1,this.lastAacTs=0,this.hasKeyFrame=!1,this.lastAudioTs=0,this.lastVideoTs=0,this.lastDropDts=0,this.showH265Tip=!1,this.bufLen=400,this.remuxLen=this.firstBufLen,this.hasCtsZero=!1,this.hasRemuxed=!1,this.audioIncreaseTSMap.clear(),this.firstDemuxAudioTS=-1,this.recvVideoFrameTimeStamp=0,this.recvVideoFrameNums=0,this.videoFramePlayDelayTs=0,this.videoFrameCalculatePlayDelayFrames=0,this.incompleteFlvheaderLen=0,this.parseFlvHead=!1,this.switchingUrl=!1,this.droppingSample=null,this.decodeIFRTime=0,this.waitRemuxTime=0,this.isFirstRemux=!1,this.av1Bytes=0,this.onAV1SequenceHeaderBind=null,this.onAV1MetaDataBind=null}},{key:"getPlayStat",value:function(){var t={videoFrameCnt:this.playVideoFrameCnt,videoLength:this.playVideoLength,audioFrameCnt:this.playAudioFrameCnt,audioLength:this.playAudioLength,emptyAudioFrameCnt:this.playEmptyAudioFrameCnt};return this.playVideoFrameCnt=0,this.playVideoLength=0,this.playAudioFrameCnt=0,this.playAudioLength=0,this.playEmptyAudioFrameCnt=0,t}},{key:"setPaused",value:function(t){this.paused=t}},{key:"setPushGop",value:function(t){this.pushGop=t,E.a.log("FlvParser.setPushGop "+t)}},{key:"setDeleteH264Aud",value:function(t){this.deleteH264Aud=t,E.a.log("FlvParser.deleteH264Aud "+t)}},{key:"setNeedEmptyAudioFrame",value:function(t){this.ctrlBuffer.setNeedEmptyAudioFrame(t),E.a.log("FlvParser.setNeedEmptyAudioFrame "+t)}},{key:"getParserBufLen",value:function(){return this.ctrlBuffer.getBufferLen()}},{key:"setDroppingSample",value:function(t){this.droppingSample=t}},{key:"parseFlv",value:function(t){var e=0;if(this.headCache){var n=new Uint8Array(t.length+this.headCache.length);n.set(this.headCache,0),n.set(t,this.headCache.length),t=n}var r,o=t.length;if(!1===this.parseFlvHead){var a=i.FLV_HEADER_LEN+i.PREV_TAG_SIZE_LEN;if(o<a)return E.a.warn("FlvParser.parseFlv flv has no header len="+o),void(this.headCache=t.slice());if(this.headCache=null,e+=a,!i.probe(t))return;this.parseFlvHead=!0,this.beginParseTs=Date.now()}for(0===e?this.flvCacher.append(t):this.flvCacher.append(t.slice(e));null!==(r=this.flvCacher.popFrame());)this.parseTag(r)}},{key:"parseTag",value:function(t){var e=t.length;if(e<i.TAG_HEADER_LEN+i.PREV_TAG_SIZE_LEN)E.a.warn("FlvParser.parseTag flv has no whole tag len="+e+" data="+t);else{var n=0,r=t[n++],o=(t[n++]<<16)+(t[n++]<<8)+t[n++];if(e-(i.TAG_HEADER_LEN+i.PREV_TAG_SIZE_LEN)<o)E.a.warn("FlvParser.parseTag flv has no enough data dataLen="+o+" len="+e);else if(0!==o){var a=(t[n++]<<16)+(t[n++]<<8)+t[n++]+parseInt(t[n++].toString(16)+"000000",16);n+=3,r===i.VIDEO_TYPE?(this.avSample.addVideoSample(e,a),Yn||this.mse.isPureAudio||(this.parseVideo(t,11,o,a),this.mse.setExceptionStat(At.VIDEO_FRAME,1))):r===i.AUDIO_TYPE?(this.avSample.addAudioSample(e,a),Kn||this.mse.isPureVideo||(this.parseAudio(t,11,o,a),this.mse.setExceptionStat(At.AUDIO_FRAME,1))):r===i.SCRIPT_TYPE?this.parseScriptTag(t,11,o,a):(E.a.warn("%cFlvParser.parseTag discard type="+r+" len="+o,"color:white;background:black"),this.mse&&this.mse.onVideoParseInvalid&&this.mse.onVideoParseInvalid())}else E.a.warn("FlvParser.parseTag flvtag empty type="+r)}}},{key:"parseScriptTag",value:function(t,e,n,r){if(e+i.SCRIPT_AMF1_HEAD_LEN>n)E.a.log("script too small");else{t[e++];var o=(t[e++]<<8)+t[e++],a=ln.getStr(t,e,o);e+=o,"onMetaData"===a?(0,P.default)(this.mse.metadata,ln.parseScript(t,e,t.length).data):-1!==a.indexOf("onMixAudio")&&this.mse.scriptVolumeInfos.addMixAudio(a.replace("onMixAudio:",""),r)}}},{key:"parseVideo",value:function(t,e,n,r){if(n<5)E.a.warn("FlvParser.parseVideo avc videotag not enough dataLen="+n);else{var o=t[e]>>4;this.codec=15&t[e++];var a=t[e++];if(5!==n)if(0===a)this.parseVideoConfig(t,e,n,r);else if(1===a){if(o==i.IFRAME)this.mse.setExceptionStat(At.VIDEO_IFRAME,1),this.hasKeyFrame||(this.decodeIFRTime=F.a.now()),this.hasKeyFrame=!0;else if(!this.hasKeyFrame)return void E.a.log("-------- drop video tag has no IFrame",r);Number(localStorage._printVideoTs)&&E.a.debug("%cFlvParser video ts","color:green",r,r-this.lastVideoTs),this.lastVideoTs>0&&r-this.lastVideoTs>200&&E.a.warn("FlvParser video dts jump lastDts=".concat(this.lastVideoTs," curDts=").concat(r," gap=").concat(r-this.lastVideoTs)),this.lastVideoTs=r,this.parseVideoNalu(t,e,n,r,o)}else 2===a?E.a.info("%cFlvParser.parseVideo avc_end dataLen="+n,"color:white;background:black"):E.a.warn("%cFlvParser.parseVideo error avc packet type="+a,"color:white;background:black");else E.a.log("FlvParser.parseVideo avc_empty frameType="+o+" avcPacketType="+a)}}},{key:"onAV1SequenceHeader",value:function(t){var e="av01."+t.seq_profile+"."+Rn.zeroPad(t["seq_level_idx[0]"],2)+(t["seq_tier[0]"]?"H":"M")+"."+Rn.zeroPad(t.BitDepth,2)+"."+t.mono_chrome+"."+t.subsampling_x+t.subsampling_y+(1===t.subsampling_x&&1===t.subsampling_y?t.chroma_sample_position:0);t.color_description_present_flag&&(e+="."+Rn.zeroPad(t.colorPrimaries,2)+"."+Rn.zeroPad(t.transferCharacteristics,2)+"."+Rn.zeroPad(t.matrixCoefficients,2)+"."+t.color_range);var i=t.max_frame_width_minus_1+1,n=t.max_frame_height_minus_1+1,r={isHevc:!1,isAV01:!0,width:i,height:n,codec:e};this.mse.setExceptionStat(At.VIDEO_CONFIG,1),this.mse.setResolution(i,n),this.remuxer.switchLevel(!1,!1),this.ctrlBuffer.updateVideoConfig(r,!1)}},{key:"onAV1MetaData",value:function(t,e){e.itu_t_t35_payload_bytes&&this.sei.parseSei(t,e.itu_t_t35_payload_bytes,Pn.AV1_CODEC_TYPE,this.seiTypes)}},{key:"parseVideoConfig",value:function(t,e,n,r){var o,a,s=[],u=[],c=[],l=!1,h=null,d=(e+=3)+n-5;if(this.isAv01()){this.av1Bytes=t.subarray(e,e+n-5);var f=t.subarray(e+=4,e+n);Rn.parseOBU(f,0,this.onAV1SequenceHeaderBind)}else{if(this.isHevc()){this.showH265Tip||(this.showH265Tip=!0,E.a.warn("This is a H265 video.")),this.mse.setExceptionStat(At.H265,1);for(var p=(126&t[e+=4])>>1,m=e;e<d;){if(this.isHevcNal(t,e)||e+1===d){switch(p){case i.NAL_VPS:var y={data:t.subarray(m,e),type:p};this.vpsUnit&&this.vpsUnit.data.toString(16)!==y.data.toString(16)&&(E.a.log("FlvParser.parseVideoConfig vps changed"),l=!0),this.vpsUnit=y,c.push(y.data);break;case i.NAL_SPS:var v={data:t.subarray(m,e),type:p};this.spsUnit&&this.spsUnit.data.toString(16)!==v.data.toString(16)&&(E.a.log("FlvParser.parseVideoConfig sps changed"),l=!0),this.spsUnit=v,s.push(v.data);break;case i.NAL_PPS:var g={data:t.subarray(m,e),type:p};this.ppsUnit&&this.ppsUnit.data.toString(16)!==g.data.toString(16)&&(E.a.log("FlvParser.parseVideoConfig pps changed"),l=!0),this.ppsUnit=g,u.push(g.data)}if(e+4<d){p=(126&t[e+=4])>>1,m=e;continue}}e++}h={isHevc:!0,isAV01:!1,vps:c,sps:s,pps:u,codec:"avc1.4d401f",width:this.mse.width,height:this.mse.height},this.hasCtsZero=!0}else{e+=4,this.lengthSizeMinusOne=3&t[e++];for(var _=0,S=0,w="",b=31&t[e++],I=0;I<b;++I){o=(t[e++]<<8)+t[e++];var T={data:t.subarray(e,e+o),type:7};this.spsUnit&&this.spsUnit.data.toString(16)!==T.data.toString(16)&&(E.a.log("FlvParser.parseVideoConfig sps changed"),l=!0),this.spsUnit=T,e+=o,s.push(T.data);var P=new tn(T.data).readSPS();_=P.width,S=P.height;for(var k=T.data.subarray(1,4),R="avc1.",C=0;C<3;C++){var O=k[C].toString(16);O.length<2&&(O="0"+O),R+=O}w=R}for(var A=t[e++],L=0;L<A;++L){a=(t[e++]<<8)+t[e++];var N={data:t.subarray(e,e+a),type:8};this.ppsUnit&&this.ppsUnit.data.toString(16)!==N.data.toString(16)&&(E.a.log("FlvParser.parseVideoConfig pps changed"),l=!0),this.ppsUnit=N,e+=a,u.push(N.data)}h={isHevc:!1,isAV01:!1,sps:s,pps:u,width:_,height:S,codec:w},this.mse.setExceptionStat(At.VIDEO_CONFIG,1),this.mse.setResolution(_,S)}this.remuxer.switchLevel(l,!1),this.ctrlBuffer.updateVideoConfig(h,l),E.a.log("FlvParser.parseVideoConfig avccfg dataLen="+n+" spsLen="+o+" ppsLen="+a+" w/h="+h.width+"/"+h.height+" codec="+h.codec)}}},{key:"parseVideoNalu",value:function(t,e,n,r,o){var a,s,u=[],c=0,l=o===i.IFRAME,h=(t[e++]<<16)+(t[e++]<<8)+t[e++];0===h?this.hasCtsZero||(this.hasCtsZero=!0):h>=8388608?h-=16777216:h>2500&&h<3500?h=0:h>600&&E.a.warn("FlvParser.parseVideoNalu large cts="+h+" dts="+r),l&&!this.isAv01()&&(this.vpsUnit&&(u.push(this.vpsUnit),c+=this.vpsUnit.data.length),this.spsUnit&&(u.push(this.spsUnit),c+=this.spsUnit.data.length),this.ppsUnit&&(u.push(this.ppsUnit),c+=this.ppsUnit.data.length));var d=e+n-5,f=!1;if(this.seiTypes={},this.isAv01()){var p=t.subarray(e,e+n-5);u.push({data:p,type:1===o?5:1}),Rn.parseOBU(p,r,null,this.onAV1MetaDataBind),c+=p.length,a=1}else if(this.isHevc()){var m=this.hevcFindNextStartCode(t,e);if(!m.found)return E.a.error("hevcFindNextStartCode failed! dataLen",n),void this.mse.on265StartCodeError();for(var y=(126&t[e+=m.startCodeSize])>>1,v=e;e<d;)((m=this.hevcFindNextStartCode(t,e)).found||e+1===d)&&(y<10&&(f=!((98&y)>>1)),s={data:t.subarray(v,e),type:y},39===y?this.sei.parseSei(r,s.data,Pn.H265_CODEC_TYPE,this.seiTypes):(u.push(s),c+=s.data.length),e+m.startCodeSize<d)?(y=(126&t[e+=m.startCodeSize])>>1,v=e):e++}else for(var g=n-5;g;){a=0;for(var _=t[e+4],S=0;S<=this.lengthSizeMinusOne;++S)a+=t[e++]<<8*(this.lengthSizeMinusOne-S);if(g-=this.lengthSizeMinusOne+1,0!==a){if(a<0||a>n-5)break;if(a>g){e+=g;break}g-=a,s={data:t.subarray(e,e+a),type:1===o?5:1},this.isH264Sei(s.data)?this.sei.parseSei(r,s.data,Pn.H264_CODEC_TYPE,this.seiTypes):this.isH264NALUPPS(s.data)?(u.push(s),c+=s.data.length):this.isH264Aud(s.data)&&this.deleteH264Aud||this.dropFrameCtrl.isCanDrop(r,l,_)||(u.push(s),c+=s.data.length),e+=a}}if(c>0){var w={type:this.isAv01()?"av01":"avc",units:u,len:c,ts:r,cts:h,dts:90*r,pts:90*(r+h),key:o===i.IFRAME,origin_iframe:1===this.seiTypes[Pn.SEI_TYPES.IFRAME],isBFrameType:f,av1Bytes:this.av1Bytes};if(this.droppingSample&&this.droppingSample(w))return;this.printFirstVideoTs||(this.printFirstVideoTs=!0,E.a.log("FlvParser.parseVideo dts=".concat(r," pts=").concat(w.pts/90," isIFrame=").concat(l))),this.pfvTs||(this.pfvTs=!0,E.a.log("FlvParser.parseVideo11 dts=".concat(r," pts=").concat(w.pts/90," isIFrame=").concat(l))),this.fps.addDts(r,n),this.downFrameRate.addFrame(),this.dropFrameCtrl.setRealFps(this.fps.realFps),this.mse.curVideoDts=r,this.lastParseDts=r,this.videoFrames++,this.timeStampStat.setTimeStamp(r,r+h,h),this.ctrlBuffer.addSample(w),this.playVideoFrameCnt++,this.timeStampStat.playVideoFrameCnt++,this.playVideoLength+=n}}},{key:"parseAudio",value:function(t,e,n,r){var o=t[e++]>>>4,a=!0,s=r;10!=o&&E.a.error("FlvParser.parseAudio Unsupported audio codec, soundFormat="+o),this.calcAudioFrameRate(r),null!=this.audioIncreaseTSMap.get(r)&&(r=this.audioIncreaseTSMap.get(r)),r<this.lastAudioTs&&0!=this.lastAudioTs&&(a=!1);var u=t[e++];if(0===u)if(n>=4){var c=t[e]>>3;this.audioObjectType=c;var l=((7&t[e])<<1)+((128&t[e+1])>>7);if(l>=i.AdtsSampleingRates.length)return void E.a.error("FlvParser.parseAudio SampleingRate out of bounds. samplingIndex="+l);this.audioChannelCount=(120&t[e+1])>>3;var h=!1,d=this.getAdtsConfig(c,l,this.audioChannelCount);d.toString(16)!==this.audioConfig.toString(16)&&(this.audioConfig.toString(16)===Jn.toString(16)&&this.remuxer.videoISGenerated&&(h=!0),E.a.warn("FlvParser.parseAudio adts changed old="+this.audioConfig+" new="+d)),this.audioConfig=d,this.ctrlBuffer.updateAudioConfig({config:d,codec:"mp4a.40.5",audiosamplerate:this.audioSampleRate,aacTimeLen:this.aacTimeLen,audioObjectType:this.audioObjectType,audioChannelCount:this.audioChannelCount},h),this.firstAudioTs=-1,this.firstDemuxAudioTS=-1,this.lastAudioTs=0,this.remuxer.switchLevel(!1,h),this.mse.setExceptionStat(At.AUDIO_CONFIG,1)}else E.a.warn("FlvParser.parseAudio adts error dataLen="+n+" ts="+r);else if(1===u){if(this.last10anduiptsList.shift(),this.last10anduiptsList.push(r),-1==this.firstAudioTs&&(this.firstAudioTs=r),-1==this.firstDemuxAudioTS)this.firstDemuxAudioTS=r;else if(r==this.firstDemuxAudioTS)return void E.a.warn("parseaudio audio too much audio in firstTs ts="+r);if(!a)return void E.a.warn("parseaudio audio ts too small maxlist="+this.maxaudioptsList+"  now="+r+"  first="+this.firstAudioTs+"  last="+this.lastAudioTs);for(var f=0;f<10;f++)this.maxaudioptsList[f]=this.last10anduiptsList[f];if(this.lastAudioTs>0&&this.lastAudioTs==r){var p=r+(0|this.aacTimeLen);this.audioIncreaseTSMap.set(s,p),r=p}if(Number(localStorage._printAudioTs)&&E.a.debug("%cFlvParser audio ts","color:red",r,r-this.lastAudioTs),this.lastAudioTs=r,this.hasAudioTag=!0,!this.validAacSample(r))return;var m=n-2,y={type:"aac",unit:t.subarray(e,e+m),dts:90*r,pts:90*r,ts:r};if(this.droppingSample&&this.droppingSample(y))return;this.printFirstAudioTs||(this.printFirstAudioTs=!0,E.a.log("FlvParser.parseAudio",r)),this.pfaTs||(this.pfaTs=!0,E.a.log("FlvParser.parseAudio11",r)),this.audioFps.addDts(r),this.mse.curAudioDts=r,this.lastParseDts=r,this.audioFrames++,this.ctrlBuffer.addSample(y)}else E.a.warn("FlvParser.parseAudio error aac packet type="+u)}},{key:"validAacSample",value:function(t){var e=this.ctrlBuffer.avBuffer.aBuffer.samples,i=e.length;if(i>0){var n=e[i-1];return 1===i&&n.ts>t&&n.ts-t>this.validAacTime?(e.shift(),!0):t-n.ts<this.validAacTime}return!0}},{key:"getAdtsConfig",value:function(t,e,n){var r=0,o=null,a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("firefox")?e>=6?(t=5,o=new Array(4),r=e-3):(t=2,o=new Array(2),r=e):-1!==a.indexOf("android")?-1!==a.indexOf("mqqbrowser")?(t=2,o=new Array(2),r=e):(t=5,o=new Array(4),r=e):(t=5,o=new Array(4),r=e,e>=6?r=e-3:1===n&&(t=2,o=new Array(2),r=e)),this.audioSampleRate=i.AdtsSampleingRates[e],this.aacTimeLen=1024e3/this.audioSampleRate,E.a.log("FlvParser.getAdtsConfig audioSampleRate="+this.audioSampleRate+" aacTimeLen="+this.aacTimeLen),o[0]=t<<3,o[0]|=(14&e)>>1,o[1]=(1&e)<<7,o[1]|=n<<3,5===t&&(o[1]|=(14&r)>>1,o[2]=(1&r)<<7,o[2]|=8,o[3]=0),E.a.log("FlvParser.getAdtsConfig type="+t+" index="+e+" channel="+n+" exIndex="+r+" config="+o),o}},{key:"parseOBUHeader",value:function(t){var e={};return e.obu_forbidden_bit=t>>7,e.obu_type=(120&t)>>3,e.obu_extension_flag=(4&t)>>2,e.obu_has_size_field=(2&t)>>1,e.obu_reserved_1bit=1&t,e}},{key:"isHevc",value:function(){return 12==this.codec}},{key:"isAv01",value:function(){return 13==this.codec}},{key:"hevcFindNextStartCode",value:function(t,e){return 0===t[e]&&0===t[e+1]?1===t[e+2]?{found:!0,startCodeSize:3}:0===t[e+2]&&1===t[e+3]?{found:!0,startCodeSize:4}:{found:!1}:{found:!1}}},{key:"isHevcNal",value:function(t,e){return 0===t[e]&&0===t[e+1]&&0===t[e+2]&&1===t[e+3]}},{key:"isH264Sei",value:function(t){return 6===t[0]}},{key:"isH264Aud",value:function(t){return 9===t[0]}},{key:"isH264NALUPPS",value:function(t){return 40===t[0]}},{key:"getCalculateVideoFramePlayDelay",value:function(){return 0}},{key:"_remux",value:function(t,e){this.hasRemuxed||(this.hasRemuxed=!0,this.mse&&this.mse.recvDataFull&&this.mse.recvDataFull()),this.remuxer.remux(e,t,0,!1)}},{key:"calcAudioFrameRate",value:function(t){this.audioFrameRateTs||(this.audioFrameRateTs=t,this.audioFrameCnt=0),t-this.audioFrameRateTs<1e3?this.audioFrameCnt++:(Number(localStorage._printAudioFrameRate)&&E.a.log("@@@@@@@@ audioFrameRate="+this.audioFrameCnt),this.audioFrameRateTs=t,this.audioFrameCnt=0)}}],[{key:"probe",value:function(t){return!(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])}}]),i}(hn);Qn.EVENTS={META_DATA:"meta_data",SWITCH_URL_DONE:"switch_url_done"},Qn.REMUX_TYPE_AUDIO=0,Qn.REMUX_TYPE_VIDEO=1,Qn.FLV_HEADER_LEN=9,Qn.TAG_HEADER_LEN=11,Qn.PREV_TAG_SIZE_LEN=4,Qn.AUDIO_TYPE=8,Qn.VIDEO_TYPE=9,Qn.SCRIPT_TYPE=18,Qn.SCRIPT_AMF1_HEAD_LEN=13,Qn.SCRIPT_AMF2_HEAD_LEN=5,Qn.IFRAME=1,Qn.NAL_VPS=32,Qn.NAL_SPS=33,Qn.NAL_PPS=34,Qn.H265_SEI_HEAD=[44,162,222,9,181,23,71,219,187,85,164,254,127,194,252,78],Qn.AdtsSampleingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var Xn=Qn,Zn=function(){function t(e){Object(v.a)(this,t),this.seiList=[],this.player=e,this.lastTs=-1,this.internal=10,this.timerStart=!1}return Object(g.a)(t,[{key:"add",value:function(t,e){var i=this.seiList.length;if(this.seiList.length>0)for(i=this.seiList.length-1;i>0&&!(t>this.seiList[i].timeStamp);i--);this.seiList.splice(i+1,0,{timeStamp:t,data:e}),this.timerStart||(this.timerStart=!0,setTimeout(this.checkDispatchSei.bind(this),this.internal))}},{key:"checkDispatchSei",value:function(){if(this.timerStart){for(var t=this.player.getCurrentRealTime(),e=0,i=null;e<this.seiList.length-2;){if(t>=this.seiList[e].timeStamp&&this.seiList[e+1].timeStamp>t){i=this.seiList[e+1].data,this.player.onH264Sei(i,this.seiList[e+1].timeStamp),this.seiList.splice(0,e+1);break}e++}setTimeout(this.checkDispatchSei.bind(this),this.internal)}}},{key:"reset",value:function(){this.seiList=[],this.player=null,this.lastTs=-1,this.timerStart=!1}}]),t}(),$n=function(){function t(e){Object(v.a)(this,t),this.volumeList=[],this.player=e,this.lastTs=-1,this.internal=100,this.timerStart=!1,this.dispatchMap=new m.default}return Object(g.a)(t,[{key:"addMixAudio",value:function(t,e){if(t.length>0)for(var i=t.split(","),n=0;n<i.length;n++)this.add(e,i[n])}},{key:"add",value:function(t,e){var i=this.volumeList.length;if(this.volumeList.length>0)for(i=this.volumeList.length-1;i>0&&!(t>this.volumeList[i].timeStamp);i--);this.volumeList.splice(i+1,0,{timeStamp:t,data:e}),this.timerStart||(this.timerStart=!0,setTimeout(this.checkDispatchVolume.bind(this),this.internal))}},{key:"checkDispatchVolume",value:function(){var t=this;if(this.timerStart){var e=this.player.getCurrentRealTime(),i=0;for(this.dispatchMap.clear();this.volumeList[i]&&this.volumeList[i].timeStamp<e;){var n=this.volumeList[i].data.split("_");n.length>1&&this.dispatchMap.set(n[0],n[1]),i++}this.dispatchMap.forEach((function(e,i,n){t.player.onScriptVolumeInfo(i,e)})),this.dispatchMap.clear(),this.volumeList.splice(0,i),this.volumeList.length>0?setTimeout(this.checkDispatchVolume.bind(this),this.internal):this.timerStart=!1}}},{key:"reset",value:function(){this.volumeList=[],this.player=null,this.lastTs=-1,this.timerStart=!1}}]),t}(),tr=function(){function t(e,i){Object(v.a)(this,t),this.mse=e,this.video=i,this.playing=!1,this.seekTime=0,this.isMuffled=!1,this.cacheVolume=1,i.addEventListener("pause",e.onVideoPauseBind),i.addEventListener("error",e.onVideoErrorBind),i.addEventListener("play",e.onVideoPlayBind),i.addEventListener("playing",e.onVideoPlayingBind),i.addEventListener("loadeddata",e.onVideoLoadedBind)}return Object(g.a)(t,[{key:"seek",value:function(t){this.seekTime=t,this.video&&(this.video.currentTime=t)}},{key:"_checkPlay",value:function(){E.a.log("MSEVideo.checkPlay seekTime=".concat(this.seekTime," playing=").concat(this.playing," currentTime=").concat(this.video&&this.video.currentTime)),this.video&&0===this.video.currentTime&&!this.playing?(this.seekTime>0?(this.seekTime++,this.video.currentTime=this.seekTime):this.video.currentTime+=1,this._play()):Ji.remove(this._checkPlay,this)}},{key:"play",value:function(){"safari"!==D.a.name||this.mse.isLive?(this._play(),Ji.add(this._checkPlay,this,1e3)):Ji.add(this._checkPlay,this,1e3)}},{key:"_play",value:function(){var t=this;if(this.video){var e=this.video.play();e?e.then((function(){Ji.remove(t._checkPlay,t),E.a.log("MSEVideo._play suc currentTime=".concat(t.video&&t.video.currentTime)),t.mse&&t.mse.handler._hyPlayer&&t.mse.handler._hyPlayer.roomRecordStat&&t.mse.handler._hyPlayer.roomRecordStat.roomNoRenderStat.resume(),B.platform===U.PLATFORM_TYPE_NAME.wap&&!t.playing&&t.mse&&t.mse.triggerH5PlayVideo(),t.playing=!0})).catch((function(e){t.playing=!1;var i=e.toString();E.a.warn("MSEVideo.play error: ".concat(i)),t.mse&&(i.indexOf("NotAllowedError")>=0||i.indexOf("request was interrupted")>=0||t.video.paused)&&(t.mse&&t.mse.onPauseByBrowser(),B.platform===U.PLATFORM_TYPE_NAME.wap&&Ji.remove(t._checkPlay,t))})):this.playing=!1}else Ji.remove(this._checkPlay,this)}},{key:"pause",value:function(){this.video.pause()}},{key:"getBufferLen",value:function(){var t=0;if(this.video){var e=this.video.buffered;e.length>0&&(t=1e3*(e.end(e.length-1)-this.video.currentTime)>>0)}return t}},{key:"printBuffered",value:function(){for(var t=this.video.buffered,e=[],i=0;i<t.length;i++)e.push("[".concat(t.start(i),", ").concat(t.end(i),"]"));E.a.log("video.buffered",e.join(" "),"video.currentTime=",this.video.currentTime)}},{key:"getCurrentTime",value:function(){return Math.round(1e3*this.video.currentTime)}},{key:"setVolume",value:function(t){this.isMuffled?this.video.volume=0:this.video.volume=t,this.cacheVolume=t}},{key:"setMuffledVolume",value:function(t){this.isMuffled=t,this.isMuffled?this.video.volume=0:this.setVolume(this.cacheVolume)}},{key:"getVolume",value:function(){return this.video.volume}},{key:"setMuted",value:function(t){this.video&&(this.video.muted=t,E.a.log("MSEVideo.setMuted ".concat(t," hasVideo=").concat(!!this.videoSourceBuffer," hasAudio=").concat(!!this.audioSourceBuffer)))}},{key:"getMuted",value:function(){return this.video?this.video.muted:-1}},{key:"destroy",value:function(){this.video.removeEventListener("error",this.mse.onVideoErrorBind),this.video.removeEventListener("pause",this.mse.onVideoPauseBind),this.video.removeEventListener("play",this.mse.onVideoPlayBind),this.video.removeEventListener("playing",this.mse.onVideoPlayingBind),this.video.removeEventListener("loadeddata",this.mse.onVideoLoadedBind),this.pause(),this.video.removeAttribute("src"),"function"==typeof this.video.load&&function(){try{this.video.load()}catch(t){}}(),this.video=null,this.mse=null}}]),t}(),er=function(){function t(){Object(v.a)(this,t),this.emptyTs=0,this.emptyTime=0,this.emptyCnt=0,this.aiEmptyTime=0,this.aiEmptyCnt=0}return Object(g.a)(t,[{key:"reset",value:function(){this.emptyTs=0,this.emptyTime=0,this.emptyCnt=0}},{key:"getStats",value:function(){var t={emptyTime:this.emptyTime,emptyCnt:this.emptyCnt};return this.emptyTime=0,this.emptyCnt=0,t}},{key:"getAiStats",value:function(){var t={aiEmptyTime:this.aiEmptyTime,aiEmptyCnt:this.aiEmptyCnt};return this.aiEmptyTime=0,this.aiEmptyCnt=0,t}},{key:"checkBuffer",value:function(t,e){e<200&&0===this.emptyTs?this.emptyTs=t:e>500&&this.emptyTs>0&&(this.emptyTime+=t-this.emptyTs,this.aiEmptyTime+=t-this.emptyTs,this.emptyTs=0,this.emptyCnt++,this.aiEmptyCnt++)}}]),t}(),ir=function(){function t(){Object(v.a)(this,t),this._cnt=0,this._duration=0,this._pauseTs=0,this._aiCnt=0,this._aiDuration=0}return Object(g.a)(t,[{key:"reset",value:function(){this.resetStat(),this.resetAiStat(),this._pauseTs=0}},{key:"getCnt",value:function(){return this._cnt}},{key:"resetStat",value:function(){this._cnt=0,this._duration=0}},{key:"pause",value:function(){0===this._pauseTs&&(this._pauseTs=F.a.now())}},{key:"resume",value:function(){this.calc(!0)}},{key:"calc",value:function(t){if(this._pauseTs>0){var e=F.a.now(),i=e-this._pauseTs;i>=200&&(this._cnt++,this._aiCnt++,this._duration+=i,this._aiDuration+=i),this._pauseTs=t?0:e}}},{key:"resetAiStat",value:function(){this._aiCnt=0,this._aiDuration=0}},{key:"getAiStat",value:function(){var t={aiCnt:this._aiCnt,aiDuration:this._aiDuration};return this.resetAiStat(),t}},{key:"record",value:function(t){this.calc(!1),t.setCore(Kt,this._cnt),t.setCore(Yt,this._duration),this.resetStat()}}]),t}(),nr=function(){function t(e,i){Object(v.a)(this,t),this._mse=e,this._callbacks=i,this._paused=!1,this._playedTime=0,this._pausedTs=0,this._lastPausedTs=0}return Object(g.a)(t,[{key:"reset",value:function(){this._paused=!1,this._playedTime=0,this._pausedTs=0,this._lastPausedTs=0}},{key:"check",value:function(t){var e=this._mse.video.video;!this._mse.isLive&&e.currentTime<=1||(0!==this._playedTime&&(e.currentTime===this._playedTime?this._paused?this._fixedCurrentTime(t,e):this._setPaused(t,e):this._paused&&this._setResume(t,e)),this._playedTime=e.currentTime)}},{key:"_setPaused",value:function(t,e){this._paused=!0,this._pausedTs=t,this._lastPausedTs=t,this._log("_setPaused",e),this._callbacks.pause(t)}},{key:"_setResume",value:function(t,e){var i=t-this._pausedTs;this._paused=!1,this._pausedTs=0,this._lastPausedTs=0,this._log("_setResume",e),this._callbacks.resume(t,i)}},{key:"_fixedCurrentTime",value:function(t,e){t-this._lastPausedTs>500&&(this._fixedByBuffered(e)||this._fixedByDts(e))&&(this._lastPausedTs=t)}},{key:"_fixedByBuffered",value:function(t){if("flv"===this._mse.videoType){var e=t.buffered.length;if(e>0){var i=t.buffered.start(e-1),n=t.buffered.end(e-1);if(i>t.currentTime&&n-i>1)return this._log("_fixedByBuffered",t),t.currentTime=i,!0}}return!1}},{key:"_fixedByDts",value:function(t){return!!(this._mse.getBufferLen()>2e3&&this._mse.isLive)&&(this._log("_fixedByDts",t),t.currentTime+=1,!0)}},{key:"_log",value:function(t,e,i){this._mse.video.printBuffered(),E.a.log("MSEPause(".concat(this._mse._num_,").").concat(t," readyState=").concat(e.readyState," currentTime=").concat(e.currentTime," buf=").concat(this._mse.getBufferLen()," dts=").concat(this._mse.getCurrentDts()," ").concat(i||""))}},{key:"paused",get:function(){return this._paused}},{key:"pausedTs",get:function(){return this._pausedTs}}]),t}(),rr=function(){function t(){Object(v.a)(this,t),this.startDts=0,this.endDts=0,this.endFrameId=0}return Object(g.a)(t,[{key:"isDisconnectDts",value:function(t){return this.endDts>0&&t-this.endDts>200}},{key:"isDisconnectFrame",value:function(t){return this.endFrameId>0&&t-this.endFrameId!=1}},{key:"getContinueBuffer",value:function(t){return t>=this.startDts&&t<=this.endDts?this.endDts-t:0}},{key:"addBuffer",value:function(t,e){0===this.startDts&&(this.startDts=e),this.endDts=e,this.endFrameId=t}}]),t}(),or="record",ar="resume",sr=function(){function t(){Object(v.a)(this,t),this._frameId=0,this._lastFrameId=0,this._startFrameId=0}return Object(g.a)(t,[{key:"reset",value:function(){this._frameId=0,this._lastFrameId=0,this._startFrameId=0}},{key:"setStartFrameId",value:function(t){this._startFrameId=t,this._lastFrameId=this._frameId}},{key:"getFrameId",value:function(t,e){return 0===t?(this._frameId++,e>0&&this._frameId++):(e>0&&this._lastFrameId++,this._frameId=this._lastFrameId+(t-this._startFrameId+1)),this._frameId}}]),t}(),ur=function(){function t(){Object(v.a)(this,t),this._mse=null,this._list=[],this._dtsList=[],this._tsList=[],this._currentBuffered=null,this._continueBuffer=-1,this._lastFrameTs=0,this._startTs=0,this._started=!1,this._lastRemoveTs=0,this._deltaStart=Number(B.continueBufferDeltaStart)||6e3,this._deltaEnd=Number(B.continueBufferDeltaEnd)||3e3,this._localFrameId=new sr,this._printContinueBuffer=1==localStorage._printContinueBuffer}return Object(g.a)(t,[{key:"setMse",value:function(t){this._mse=t}},{key:"stop",value:function(){E.a.log("VideoBufferedList.stop"),this._startTs=0,this._list=[],this._dtsList=[],this._continueBuffer=-1,this._currentBuffered=null,this._localFrameId.reset(),Ji.remove(this.onCheckFastTimer,this)}},{key:"printInfo",value:function(t){var e=[];this._list.forEach((function(t){e.push("[".concat(t.startDts,", ").concat(t.endDts,"]"))})),E.a.log("VideoBufferedList.print dts=".concat(t," buffered=").concat(e.join(" ")))}},{key:"record",value:function(t){this._calc(F.a.now(),or),t.setCore("video_continue_buffer",this._continueBuffer),this._continueBuffer=-1}},{key:"start",value:function(){0===this._startTs&&(E.a.log("VideoBufferList.start"),this._startTs=F.a.now(),Ji.add(this.onCheckFastTimer,this,50))}},{key:"onCheckFastTimer",value:function(t){if(0===this._lastRemoveTs)this._lastRemoveTs=t;else if(this._lastRemoveTs>0&&t-this._lastRemoveTs>5e3){this._lastRemoveTs=t;for(var e=this._mse.getCurrentDts()-2e4,i=this._dtsList.length-1;i>=0;i--)if(this._dtsList[i]<e){this._dtsList=this._dtsList.slice(i),this._tsList=this._tsList.slice(i);break}}var n=t-this._lastFrameTs;this._lastFrameTs>0&&n>100&&(this._calc(t,"timer"),this._lastFrameTs=t)}},{key:"addSample",value:function(t,e,i,n){var r=F.a.now();this._tsList.push(r),this._dtsList.push(e),(0===this._lastFrameTs||i)&&this._localFrameId.setStartFrameId(t),this._lastFrameTs=r;var o=this._localFrameId.getFrameId(t,n);this._currentBuffered&&!this._currentBuffered.isDisconnectFrame(o)||(this._currentBuffered=new rr,this._list.push(this._currentBuffered),this._list.length>10&&e-this._list[0].endDts>3e5&&this._list.shift()),this._currentBuffered.addBuffer(o,e)}},{key:"_calc",value:function(t,e){var i=t-this._deltaStart,n=t-this._deltaEnd;if((e===or||e===ar)&&-1===this._continueBuffer)return this._continueBuffer=this._getContinueBuffer(this._mse.getCurrentDts()),void(this._printContinueBuffer&&this.printInfo(this._mse.getCurrentDts()+" continueBuffer=".concat(this._continueBuffer," from=").concat(e," ")));if(!(0===this._startTs||i<this._startTs)){for(var r=this._getDtsBound(i,n),o=r.startDts,a=r.endDts,s=u.default,c=this._dtsList.length,l=0;l<c;l++){var h=this._dtsList[l];if(h>a)break;if(h>=o&&h<=a&&(s=Math.min(s,this._getContinueBuffer(h))),0===s)break}s===u.default&&(s=0),(-1===this._continueBuffer||this._continueBuffer>s)&&(this._continueBuffer=s,this._printContinueBuffer&&this.printInfo(this._mse.getCurrentDts()+" now=".concat(t," startDts=").concat(o," endDts=").concat(a," continueBuffer=").concat(s," from=").concat(e)))}}},{key:"_getDtsBound",value:function(t,e){for(var i=this._tsList.length,n=u.default,r=0,o=0;o<i;o++){var a=this._tsList[o];if(a>=t&&a<=e){var s=this._dtsList[o];s<n&&(n=s),s>r&&(r=s)}else if(a>e)break}return{startDts:n,endDts:r}}},{key:"_getContinueBuffer",value:function(t){for(var e=0,i=0;i<this._list.length&&0===(e=this._list[i].getContinueBuffer(t));i++);return e}},{key:"continueBuffer",get:function(){return this._continueBuffer},set:function(t){this._continueBuffer=t}}]),t}(),cr=i(32);function lr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(void 0!==C.default&&(0,f.default)(Object(t))){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=(0,S.default)(t);!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,e)||Object(cr.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hr=localStorage,dr=[95,112,101,114,102],fr=function(){function t(){Object(v.a)(this,t),this.bitrate=4e3,this.blockCount=1,this.continueBuffer=2e3,this.map=new m.default,this.key="",this._initKey(),this._initLocal()}return Object(g.a)(t,[{key:"_initKey",value:function(){for(var t=0;t<dr.length;t++)this.key+=String.fromCharCode(dr[t])}},{key:"setConfig",value:function(t){this.bitrate=t.perfBitrate||4e3,this.blockCount=t.perfCnt||1,this.continueBuffer=t.perfBuf||2e3}},{key:"_initLocal",value:function(){if(hr.hasOwnProperty(this.key)){for(var t=hr[this.key].split(","),e="",i=!0,n=0;n<t.length;n++){var r=Number(t[n]);if(isNaN(r)){i=!1;break}e+=String.fromCharCode(Number(t[n]))}i&&e.length>0&&this._parseLocal(e)}}},{key:"_parseLocal",value:function(t){for(var e=t.split("|"),i=0;i<e.length;i++){var n=e[i].split(":"),r=Number(n[0]),o=n[1].split(",");this.map.set(r,o)}}},{key:"checkLocal",value:function(t,e){if(t=Number(t),this.map.has(t)){var i=this.map.get(t);return this._hasBitrate(i,e)}return!1}},{key:"checkLive",value:function(t,e,i,n){if(t=Number(t),e>=this.bitrate&&i>this.blockCount&&n>this.continueBuffer){var r=this.map.get(t);if(r||(r=[],this.map.set(t,r)),!this._hasBitrate(r,e))return r.push(e),this._saveMap(),E.a.log("PausePerformance.checkLive pid=".concat(t," bitrate=").concat(e)),!0}return!1}},{key:"_hasBitrate",value:function(t,e){for(var i=0;i<t.length;i++)if(Number(e)===Number(t[i]))return!0;return!1}},{key:"_saveMap",value:function(){var t,e=[],i=Object(ui.a)(this.map.entries());try{for(i.s();!(t=i.n()).done;){var n=lr(t.value,2),r=n[0],o=n[1];e.push(r+":"+o.join(","))}}catch(t){i.e(t)}finally{i.f()}if(e.length>0){for(var a=e.join("|"),s=[],u=0;u<a.length;u++)s.push(a.charCodeAt(u));hr[this.key]=s.join(",")}}}]),t}(),pr=0,mr=function(){function t(e,i){Object(v.a)(this,t);var n=i.videoType,r=void 0===n?"flv":n,o=i.isLive,a=void 0===o||o,s=i.isPureAudio,u=void 0!==s&&s,c=i.isPureVideo,l=void 0!==c&&c,h=i.h265Proxy,d=void 0===h?null:h,f=i.videoElement,p=void 0===f?null:f,m=i.ignoreSei,y=void 0!==m&&m,g=i.closeFetch,_=void 0!==g&&g;this.handler=e,this.videoType=r,this.isLive=a,this.isPureAudio=u,this.isPureVideo=l,this.pushVideoStartRenderTime=0,this.h265Proxy=d,this.videoElement=p,this.requestAnimationId=-1,this.pid=0,this.bitrate=0,this._num_=++pr,E.a.log("MSEPlayer(".concat(this._num_,").constructor")),this.buffered=new ur,this.buffered.setMse(this),this.remuxer=new $i(this),"ts"===r?(this.parser=new an(this,this.remuxer),this.parser.ignoreSei=y,this.parser.closeFetch=_):(this.parser=new Xn(this,this.remuxer),this.parser.ctrlBuffer.setBuffered(this.buffered),this.parser.dropFrameCtrl.setConfig({dropTime:B.dropTime,minFps:B.minFps})),this.JITTER_BUFMIN=1e3,this.JITTER_BUFLEN=4e3,this.JITTER_BUFMAX=8e3,this.latencySeek=0,this.userPaused=!1,this._triggerPlay=!1,this.hasData=!1,this.playing=!1,this.lastPlayTime=0,this.lastCheckPlayTime=0,this.maxGop=0,this.playStartTime=0,this.delayReset=!1,this.isPlayerError=!1,this.isErrorEvent=!1,this.startPlayBackRate=.9,this.pausedByBrowser=!1,this.metadata={},this.bufStat=new er,this.pauseStat=new ir,this.pausePerf=new fr,this.tryPlayAgainTimout=0,this.onUpdateErrorBind=this.onUpdateError.bind(this),this.onAudioUpdateEndBind=this.onAudioUpdateEnd.bind(this),this.onVideoUpdateEndBind=this.onVideoUpdateEnd.bind(this),this.onMediaSourceOpenBind=this.onMediaSourceOpen.bind(this),this.onVideoErrorBind=this.onVideoError.bind(this),this.onVideoPauseBind=this.onVideoPause.bind(this),this.onVideoPlayBind=this.onVideoPlay.bind(this),this.onVideoLoadedBind=this.onVideoLoaded.bind(this),this.checkVideoPlayingBind=this.checkVideoPlaying.bind(this),this.onVideoPlayingBind=this.onVideoPlaying.bind(this),this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",this.onMediaSourceOpenBind),this.h264SeiInfos=new Zn(this),this.scriptVolumeInfos=new $n(this),this.video=this.createVideo(),this.msePause=new nr(this,{pause:this._msePaused.bind(this),resume:this._mseResume.bind(this)}),this.audioSourceBuffer=null,this.videoSourceBuffer=null,this.audioCodec=null,this.videoCodec=null,this.audioSegments=[],this.videoSegments=[],this.width=1280,this.height=720,this.autoJitter=!0,this.autoBitrateJitter=!1,this.playbackrateChangeAccess=!0,this.enableLowLatency=!1,this.sensitivePause=!0,this.waitSwapToPcdn=!1,this.printJitter=!!Number(localStorage._printJitter);var S=navigator.userAgent.toLowerCase();this.isAndroid=-1!==S.indexOf("Android"),-1==E.a.getLevel()&&window.chrome&&(window.chrome.mse=this),this.videoDataAppended=!1,this.avcchangeCheckTimer=0,this.offsetDts=0,this.curVideoDts=0,this.curAudioDts=0,this.isOnFragParsed=!1,this.onFragParsedTime=0,this.isH265Play=!1,this.playRateIncrease=0,this.playRateDecrease=0,this.startPlayTime=0,this.isStartBuffer=!0,this.bufferCd=12e4,this.startCd=5e3,this.setVideoCurrentTime=0,this.startMoreBufferTime=0,this.bufferMoreContinueTime=6e4,this.maxJumpWaitNow=0,this.lastJumpBufferTs=0,this.mediaDelay=null,this.seiAnchorDelay=-1,this.discontinuityAudio=!1,this.discontinuityVideo=!1,this.isPlaybackRateNormal=!0,d&&d.initRender(this)}return Object(g.a)(t,[{key:"setParams",value:function(t,e){this.pid=t,this.bitrate=e,this._initPerf()}},{key:"_initPerf",value:function(){"ts"!==this.videoType&&this.pausePerf.checkLocal(this.pid,this.bitrate)&&this.parser.dropFrameCtrl.start()}},{key:"getDelayStat",value:function(){return"ts"!==this.videoType?this.parser.sei.getStat():null}},{key:"getDelayInfo",value:function(){return E.a.log("MSEPlayer.getDelayInfo: delay: ",this.mediaDelay),this.mediaDelay}},{key:"setSeiDelay",value:function(t){if(this.seiAnchorDelay!==t||!this.mediaDelay){var e=this.getBufferLen();this.seiAnchorDelay=t,this.mediaDelay={total_delay:this.seiAnchorDelay+e,buffer_delay:e,status:0},0===this.seiAnchorDelay&&(this.mediaDelay.status=1)}}},{key:"getRealFps",value:function(){return this.parser.getRealFps?this.parser.getRealFps():0}},{key:"getIsDownEnough",value:function(){return!this.parser.isDownEnough||this.parser.isDownEnough()}},{key:"getRealBitrate",value:function(){var t=0;return this.parser.fps&&(t=this.parser.fps.getRealBitrate()),t}},{key:"destroy",value:function(){if(E.a.log("MSEPlayer(".concat(this._num_,").destroy")),this.buffered.stop(),this.h265Proxy&&this.h265Proxy.stop(),this.playing=!1,this.lastPlayTime=0,this.playStartTime=0,this.lastCheckPlayTime=0,this.hasData=!1,this.handler&&this.handler.onVideoStop(this.video.video,!!this.videoSourceBuffer),this.remuxer.destroy(),this.parser.destroy(),this.audioCodec=null,this.videoCodec=null,this.audioSegments=[],this.videoSegments=[],this.audioSourceBuffer&&(this.audioSourceBuffer.removeEventListener("updateend",this.onAudioUpdateEndBind),this.audioSourceBuffer.removeEventListener("error",this.onUpdateErrorBind),this.audioSourceBuffer=null),this.videoSourceBuffer&&(this.videoSourceBuffer.removeEventListener("updateend",this.onVideoUpdateEndBind),this.videoSourceBuffer.removeEventListener("error",this.onUpdateErrorBind),this.videoSourceBuffer=null),this.mediaSource){this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpenBind);for(var t=this.mediaSource.sourceBuffers;t.length;)this.mediaSource.removeSourceBuffer(t[0]);this.mediaSource=this.onMediaSourceOpenBind=null}this.onAudioUpdateEndBind=this.onVideoUpdateEndBind=this.onUpdateErrorBind=null,this.video&&(this.video.destroy(),this.video=null),this.videoElement=null,this.pushVideoStartRenderTime=0,this.playbackrateChangeAccess=!0,-1!==this.requestAnimationId&&(cancelAnimationFrame(this.requestAnimationId),this.requestAnimationId=-1),this.onFragParsedTime=0,Ji.remove(this.triggerPlayVideo,this)}},{key:"resetHls",value:function(){this.parser.pushAllData&&this.parser.pushAllData(),this.parser.reset&&this.parser.reset(),this.remuxer.reset()}},{key:"reset",value:function(){if(E.a.log("MSEPlayer(".concat(this._num_,").reset")),this.handler.onVideoStop(this.video.video,!!this.videoSourceBuffer),this.JITTER_BUFMIN=1e3,this.JITTER_BUFLEN=4e3,this.JITTER_BUFMAX=8e3,this.userPaused=!1,this.playing=!1,this.lastPlayTime=0,this.playStartTime=0,this.lastCheckPlayTime=0,this.hasData=!1,this.audioCodec=null,this.videoCodec=null,this.audioSegments=[],this.videoSegments=[],this.discontinuityAudio=!1,this.discontinuityVideo=!1,this.metadata={},this.msePause.paused&&this.handler.onPlayResume(F.a.now()),this.pauseStat.reset(),this.bufStat.reset(),this.msePause.reset(),this.maxGop=0,this.isPlaybackRateNormal=!0,clearTimeout(this.tryPlayAgainTimout),this.audioSourceBuffer&&(this.audioSourceBuffer.removeEventListener("updateend",this.onAudioUpdateEndBind),this.audioSourceBuffer.removeEventListener("error",this.onUpdateErrorBind),this.audioSourceBuffer=null),this.videoSourceBuffer&&(this.videoSourceBuffer.removeEventListener("updateend",this.onVideoUpdateEndBind),this.videoSourceBuffer.removeEventListener("error",this.onUpdateErrorBind),this.videoSourceBuffer=null),this.mediaSource){this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpenBind);for(var t=this.mediaSource.sourceBuffers;t.length;)this.mediaSource.removeSourceBuffer(t[0])}this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",this.onMediaSourceOpenBind),this.video&&(this.video.destroy(),this.video=null),this.video=this.createVideo(),this.playbackrateChangeAccess=!0,this.videoDataAppended=!1,this.onFragParsedTime=0,this.startPlayTime=0,this.isStartBuffer=!0,this.setVideoCurrentTime=0,this.startMoreBufferTime=0,this.maxJumpWaitNow=0}},{key:"resetVideo",value:function(){if(this.audioSourceBuffer&&(this.audioSourceBuffer.removeEventListener("updateend",this.onAudioUpdateEndBind),this.audioSourceBuffer.removeEventListener("error",this.onUpdateErrorBind),this.audioSourceBuffer=null),this.videoSourceBuffer&&(this.videoSourceBuffer.removeEventListener("updateend",this.onVideoUpdateEndBind),this.videoSourceBuffer.removeEventListener("error",this.onUpdateErrorBind),this.videoSourceBuffer=null),this.mediaSource){this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpenBind);for(var t=this.mediaSource.sourceBuffers;t.length;)this.mediaSource.removeSourceBuffer(t[0])}this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",this.onMediaSourceOpenBind),this.video&&(this.video.destroy(),this.video=null),this.video=this.createVideo(),this.videoCodec=null,this.audioCodec=null,this.lastPlayTime=0}},{key:"createVideo",value:function(){this._triggerPlay=!1;var t=this.videoElement?this.videoElement:document.createElement("video");return t.src=URL.createObjectURL(this.mediaSource),new tr(this,t)}},{key:"insertDiscontinuity",value:function(t){t>0&&(this.resetVideo(),this.playing=!1,this.seek(t))}},{key:"setPushGop",value:function(t){this.parser.setPushGop(t)}},{key:"setDeleteH264Aud",value:function(t){this.parser.setDeleteH264Aud(t)}},{key:"setNeedEmptyAudioFrame",value:function(t){this.parser.setNeedEmptyAudioFrame(t)}},{key:"getPlayStat",value:function(){return this.parser.getPlayStat()}},{key:"getPlayVideo",value:function(){return this.video?this.video.video:null}},{key:"getFrameReadyed",value:function(){return this.parser&&this.parser.getFrameReadyed?this.parser.getFrameReadyed():0}},{key:"getFramePlayDelays",value:function(){return this.parser.getCalculateVideoFramePlayDelay?this.parser.getCalculateVideoFramePlayDelay():0}},{key:"getBufferLen",value:function(){return this.video?this.video.getBufferLen():0}},{key:"getFrameBufferLen",value:function(){return this.parser.getFrameBufferLen?this.parser.getFrameBufferLen():0}},{key:"getContinueBuffer",value:function(){return this.buffered.continueBuffer}},{key:"setSensitivePause",value:function(t){this.sensitivePause=t}},{key:"getParserBufLen",value:function(){return this.parser.getParserBufLen()}},{key:"getCurrentDts",value:function(){return void 0===this.remuxer.getInitDts()?0:this.video?this.video.getCurrentTime()+this.remuxer.getInitDts():0}},{key:"getCurrentSeiOffsetDts",value:function(){return this.offsetDts||0}},{key:"getCurrentTime",value:function(){return this.video?this.video.getCurrentTime():0}},{key:"getCurrentRealTime",value:function(){return this.video?this.getCurrentDts():0}},{key:"appendFlv",value:function(t){this.addPlayEvent(),this.parser.parseFlv(t)}},{key:"addPlayEvent",value:function(){this.hasData||(this.hasData=!0,this.videoElement&&(this.videoElement.addEventListener("loadeddata",this.onVideoLoadedBind),this.requestAnimationId=requestAnimationFrame(this.checkVideoPlayingBind)))}},{key:"appendTs",value:function(t){this.addPlayEvent(),this.parser.parseTs(t)}},{key:"saveH264SeiData",value:function(t,e){this.h264SeiInfos.add(t,e)}},{key:"saveSeiInfo",value:function(t,e,i){1===Number(localStorage._printSeiInfo)&&E.a.log("MSEPlayer.saveSeiInfo, timestamp=".concat(t,", type=").concat(i)),this.handler&&this.handler.eventEmitter.trigger(_.SEI_INFO,{timestamp:t,data:e})}},{key:"setPlaybackrateAccess",value:function(t){this.playbackrateChangeAccess=t}},{key:"checkBuffer",value:function(){if(!this.video.video.paused){var t=F.a.now(),e=this.video.video.buffered,i=e.length,n=this.getBufferLen();if(this.bufStat.checkBuffer(t,n),0===this.video.video.currentTime&&0!==this.lastPlayTime)return E.a.warn("MSEPlayer.checkBuffer onPlayerError(true) lastPlayTime="+this.lastPlayTime+" bufLen="+n),this._onPlayerError(!0),this._onErrorEvent(9),void(this.lastPlayTime=0);if(this.lastPlayTime=this.video.video.currentTime,t>this.playStartTime+3e3&&n>4e3&&0==this.video.currentTime&&(i>0&&e.start(0)<=4&&(E.a.log("MSEPlayer.checkBuffer buffer full but can not play"),this.video.currentTime=Math.round(e.start(0)+1)),this.video.play()),0!==this.playStartTime&&t>this.playStartTime+5e3&&(n>5e3||0===n))if(0==this.video.video.currentTime&&n>2e3)E.a.log("MSEPlayer(".concat(this._num_,") ####### currentTime=0 ++ bufLen=").concat(n," paused=").concat(this.video.video.paused)),this.video.play();else if(this.playStartTime=0,0===this.video.video.currentTime&&!this.isAndroid)return E.a.warn("MSEPlayer(".concat(this._num_,").checkBuffer onPlayerError(true) playTime=")+this.video.video.currentTime+" bufLen="+n),this._onErrorEvent(6),void this._onPlayerError(!0);null==this.videoElement&&i&&this.video.video.currentTime-e.start(0)>20&&(this.audioSourceBuffer&&!this.audioSourceBuffer.updating&&this.audioSourceBuffer.remove(0,this.video.video.currentTime-10),this.videoSourceBuffer&&!this.videoSourceBuffer.updating&&this.videoSourceBuffer.remove(0,this.video.video.currentTime-10))}}},{key:"_onPlayerError",value:function(t){!this.isPlayerError&&this.handler&&(this.isPlayerError=!0,this.handler.onPlayerError(t))}},{key:"_onErrorEvent",value:function(t){this.isErrorEvent||(this.isErrorEvent=!0,this.handler&&this.handler.onErrorEvent&&this.handler.onErrorEvent({type:t}))}},{key:"onParseError",value:function(t){this._onErrorEvent(t)}},{key:"onAvcCfgChange",value:function(){return E.a.log("MSEPlayer(".concat(this._num_,").onAvcCfgChange")),this.getBufferLen()<500?(E.a.log("MSEPlayer(".concat(this._num_,").onAvcCfgChange reset player")),this.remuxer.reset(),this.parser.setPaused(!1),!1):(this.delayReset=!0,!0)}},{key:"onRestart",value:function(){E.a.log("MSEPlayer(".concat(this._num_,").onRestart")),this.reset()}},{key:"onVideoParseInvalid",value:function(){this.handler&&this.handler.onVideoParseInvalid&&this.handler.onVideoParseInvalid()}},{key:"onGop",value:function(t){this.handler.onGop&&this.handler.onGop(t),t>this.maxGop&&(this.maxGop=t,E.a.log("MSEPlayer(".concat(this._num_,").onGop update maxGop=")+this.maxGop))}},{key:"getMaxGop",value:function(){return this.maxGop}},{key:"setVolume",value:function(t){this.video.setVolume(t)}},{key:"setEnableLowLatency",value:function(t){this.enableLowLatency=t}},{key:"getVolume",value:function(){return this.video?this.video.getVolume():-1}},{key:"setMuted",value:function(t){this.video&&(this.video.setMuted(t),E.a.log("MSEPlayer.setMuted ".concat(t," hasVideo=").concat(!!this.videoSourceBuffer," hasAudio=").concat(!!this.audioSourceBuffer)))}},{key:"getMuted",value:function(){return this.video?this.video.getMuted():-1}},{key:"setResolution",value:function(t,e){E.a.log("MSEPlayer(".concat(this._num_,").setResolution w/h=")+t+"/"+e),this.width&&this.height&&(this.width!==t||this.height!==e)&&this.handler.eventEmitter&&this.handler.eventEmitter.trigger(_.VIDEO_RESOLUTION_CHANGE),this.width=t,this.height=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setExceptionStat",value:function(t,e){this.handler&&this.handler.exceptionStat&&this.handler.exceptionStat.setStat(t,e)}},{key:"turnToH264",value:function(){this.h265Proxy&&this.h265Proxy.stop(),this.handler&&this.handler.turnToH264()}},{key:"on265StartCodeError",value:function(){this.h265Proxy&&this.h265Proxy.on265StartCodeError(14)}},{key:"h265Retry",value:function(){this.h265Proxy&&this.h265Proxy.stop(),this.handler.h265Retry()}},{key:"onInitSegment",value:function(t){t.audioCodec&&(this.audioCodec=t.audioCodec),t.videoCodec&&(this.videoCodec=t.videoCodec),this.isMediaSourceOpen&&this.initSourceBuffer(),t.audioMoov&&this.audioSegments.push(t.audioMoov),t.videoMoov&&this.videoSegments.push(t.videoMoov),this.playStartTime=0}},{key:"onFragParsing",value:function(t){"audio"===t.type?this.audioSegments.push(t.data):"video"===t.type&&this.videoSegments.push(t.data)}},{key:"onFragParsed",value:function(){this.audioSourceBuffer&&this.appendBuffer("audio"),this.videoSourceBuffer&&this.appendBuffer("video"),null==this.videoElement&&this.isLive&&(this.isOnFragParsed||(this.onFragParsedTime=F.a.now(),E.a.log("MSEPlayer.onFragParsed",this.onFragParsedTime),this.isOnFragParsed=!0),this.triggerPlay())}},{key:"checkVideoPlaying",value:function(){0==this.pushVideoStartRenderTime&&this.video&&this.video.video&&this.video.video.videoWidth>0&&this.video.video.videoHeight>0?this.pushVideoStartRenderTime=F.a.now():this.requestAnimationId=requestAnimationFrame(this.checkVideoPlayingBind)}},{key:"onVideoLoaded",value:function(){E.a.log("MSEPlayer.onVideoLoaded"),this.triggerPlay()}},{key:"reloadInError",value:function(){this.handler.reloadInError&&this.handler.reloadInError()}},{key:"initSourceBuffer",value:function(){if(this.audioCodec&&!this.audioSourceBuffer){E.a.log("MSEPlayer(".concat(this._num_,").initSourceBuffer audio codec=")+this.audioCodec);try{this.audioSourceBuffer=this.mediaSource.addSourceBuffer("video/mp4;codecs=".concat(this.audioCodec)),this.audioSourceBuffer.addEventListener("updateend",this.onAudioUpdateEndBind),this.audioSourceBuffer.addEventListener("error",this.onUpdateErrorBind)}catch(t){return E.a.warn("MSEPlayer.initSourceBuffer audio err="+t.message),t.message&&-1!=t.message.indexOf("No additional SourceBuffer objects may be added")&&(E.a.log("MSEPlayer.initSourceBuffer resetMediasource in audio"),this.handler.resetMediasource)?void this.handler.resetMediasource():(this._onErrorEvent(4),void this._onPlayerError(!0))}}else this.audioCodec&&this.audioSourceBuffer&&this.discontinuityAudio&&(E.a.log("MSEPlayer(".concat(this._num_,").initSourceBuffer reset audio codec=")+this.audioCodec),this.audioSourceBuffer.changeType("video/mp4;codecs=".concat(this.audioCodec)));if(this.videoCodec&&!this.videoSourceBuffer){E.a.log("MSEPlayer(".concat(this._num_,").initSourceBuffer video codec=")+this.videoCodec);try{this.videoSourceBuffer=this.mediaSource.addSourceBuffer("video/mp4;codecs=".concat(this.videoCodec)),this.videoSourceBuffer.addEventListener("updateend",this.onVideoUpdateEndBind),this.videoSourceBuffer.addEventListener("error",this.onUpdateErrorBind)}catch(t){if(t.message&&-1!=t.message.indexOf("No additional SourceBuffer objects may be added")&&(E.a.log("MSEPlayer.initSourceBuffer resetMediasource in video"),this.handler.resetMediasource))return void this.handler.resetMediasource();E.a.warn("MSEPlayer(".concat(this._num_,").initSourceBuffer video err=")+t.message),this._onErrorEvent(5),this._onPlayerError(!0)}}else this.videoCodec&&this.videoSourceBuffer&&this.discontinuityVideo&&(E.a.log("MSEPlayer(".concat(this._num_,").initSourceBuffer reset video codec=")+this.videoCodec),this.videoSourceBuffer.changeType("video/mp4;codecs=".concat(this.videoCodec)));this.discontinuityVideo=!1,this.discontinuityAudio=!1}},{key:"appendBuffer",value:function(t){if(0!=this.mediaSource.sourceBuffers.length&&!this.isPlayerError)if("audio"==t){if(this.audioSegments.length>0&&this.audioSourceBuffer&&!this.audioSourceBuffer.updating){var e=this.audioSegments.shift();try{this.audioSourceBuffer.appendBuffer(e),this.videoDataAppended=!0}catch(t){E.a.warn("MSEPlayer(".concat(this._num_,").appendBuffer audio err=")+t.message),this._onErrorEvent(7),this._onPlayerError(!0)}}}else{if("video"!=t)throw new Error("MSEPlayer(".concat(this._num_,").appendBuffer type error! Valide type is audio or video."));if(this.videoSegments.length>0&&this.videoSourceBuffer&&!this.videoSourceBuffer.updating){var i=this.videoSegments.shift();try{this.videoSourceBuffer.appendBuffer(i),this.videoDataAppended=!0}catch(t){E.a.warn("MSEPlayer(".concat(this._num_,").appendBuffer video err=")+t.message),this._onErrorEvent(8),this._onPlayerError(!0)}}}}},{key:"recvDataFull",value:function(){this.handler&&this.handler.recvDataFull&&this.handler.recvDataFull()}},{key:"getVideoFrames",value:function(){return this.parser&&this.parser.getVideoFrames?this.parser.getVideoFrames():0}},{key:"getAudioFrames",value:function(){return this.parser&&this.parser.getAudioFrames?this.parser.getAudioFrames():0}},{key:"triggerH265Play",value:function(t,e){this.isH265Play||(E.a.log("MSEPlayer.triggerH265Play"),this.isH265Play=!0,this.h265Proxy&&this.h265Proxy.reportDecodeRenderTime(t,e))}},{key:"triggerPlay",value:function(){if(!this.playing&&this.isMediaSourceOpen){if(this.playing=!0,this.playStartTime=F.a.now(),this.videoElement&&!this.videoElement.autoplay||this.video.play(),B.platform===U.PLATFORM_TYPE_NAME.wap)return;"safari"===D.a.name?B.safariFirstLoad?(B.safariFirstLoad=!1,this.triggerPlayVideo()):Ji.once(this.triggerPlayVideo,this,B.safariPlayDelay):this.triggerPlayVideo()}}},{key:"triggerPlayVideo",value:function(){var t=!!this.videoSourceBuffer,e="h264";13==this.parser.codec?e="av1":12==this.parser.codec&&(e="h265"),E.a.log("MSEPlayer.onPlayVideo codec: ",e),0==this.parser.decodeIFRTime&&1==Number(B.isNoVideoReport)&&this.handler.eventEmitter&&this.handler.eventEmitter.trigger(_.P2P_REPORT),this.h265Proxy&&this.h265Proxy.isReady?this.handler.onPlayVideo(this.video.video,this.width,this.height,t,this.h265Proxy.canvas,this.onFragParsedTime,e):this.handler.onPlayVideo(this.video.video,this.width,this.height,t,null,this.onFragParsedTime,e),this.startPlayTime=F.a.now()}},{key:"triggerH5PlayVideo",value:function(){if(E.a.log("trigger h5 video play"),this.pausedByBrowser)this.pausedByBrowser=!1;else{this.startPlayTime=F.a.now();var t=!!this.videoSourceBuffer;this.handler.onPlayVideo(this.video.video,this.width,this.height,t,null,this.onFragParsedTime)}}},{key:"onH264Sei",value:function(t,e){this.handler.onSendSeiData(t,e,this.video.video.currentTime)}},{key:"onScriptVolumeInfo",value:function(t,e){this.handler.onSendScriptVolumeInfo(t,e)}},{key:"onMediaSourceOpen",value:function(){this.mediaSource.removeEventListener("sourceopen",this.onMediaSourceOpenBind),(this.audioSegments.length>0||this.videoSegments.length>0)&&(this.initSourceBuffer(),this.appendBuffer("audio"),this.appendBuffer("video"),E.a.log("MSEPlayer.onMediaSourceOpen"),0==this.onFragParsedTime&&(this.onFragParsedTime=F.a.now()),null==this.videoElement&&this.triggerPlay())}},{key:"onAudioUpdateEnd",value:function(){this.appendBuffer("audio"),this.checkAppendOver()}},{key:"onVideoUpdateEnd",value:function(){this.appendBuffer("video"),this.checkAppendOver()}},{key:"checkAppendOver",value:function(){0===this.videoSegments.length&&0===this.audioSegments.length&&(this.videoSourceBuffer&&this.videoSourceBuffer.updating||this.audioSourceBuffer&&this.audioSourceBuffer.updating||this.handler&&this.handler.onSBUpdateEnd&&this.handler.onSBUpdateEnd())}},{key:"onUpdateError",value:function(t){E.a.warn("MSEPlayer.onUpdateError",t)}},{key:"onVideoPause",value:function(t){this.userPaused=!0}},{key:"onPauseByBrowser",value:function(){this.handler&&(this.handler.onPauseByBrowser&&this.handler.onPauseByBrowser(),this.handler.updateStatus&&this.handler.updateStatus("BROWSER_PAUSE"),this.pausedByBrowser=!0,this.handler.eventEmitter&&this.handler.eventEmitter.trigger(_.BROWSER_PAUSE,{video:this.video.video}))}},{key:"onVideoPlaying",value:function(){if(this.handler&&this.handler.updateStatus){if(this.video&&this.video.video&&this.video.video.paused)return void E.a.log("video is playing, video.paused=",this.video.video.paused);E.a.log("video is playing",this.isPureAudio);var t=this.isPureAudio?"AUDIO_PLAYING":w;this.handler.updateStatus(t)}}},{key:"onVideoPlay",value:function(t){this.userPaused=!1}},{key:"onVideoError",value:function(t){var e="";if(this.video.video.error){var i=this.video.video.error.code;e=" errCode="+i+" "+["Unknow","用户终止","网络错误","解码错误","格式不支持"][i],3!=i&&4!=i||(this._onErrorEvent(3==i?1:2),this._onPlayerError(!0),localStorage.decodeabnormal="abnormal_"+(new Date).getTime())}E.a.warn("MSEPlayer.onVideoError"+e)}},{key:"pause",value:function(){E.a.info("MSEPlayer.pause"),this.userPaused=!0,this.video&&this.video.pause(),this.handler._hyPlayer&&this.handler._hyPlayer.roomRecordStat&&this.handler._hyPlayer.roomRecordStat.roomNoRenderStat.pause()}},{key:"play",value:function(){E.a.info("MSEPlayer.play"),this.userPaused=!1,this.video&&this.video.play()}},{key:"seek",value:function(t){this.lastPlayTime=t,E.a.info("MSEPlayer.seek seekTime="+t,"currentTime="+this.video.video.currentTime),this.video&&this.video.seek(t)}},{key:"onCheckTimer",value:function(t,e){if(this.playing&&this.isMediaSourceOpen){this.parser&&this.parser.fps&&(this.metadata.fps=this.parser.fps.getFps(),this.metadata.recvVideoFps=this.parser.fps.getRecvFps()),this.parser&&this.parser.audioFps&&(this.metadata.audioFps=this.parser.audioFps.getFps(),this.metadata.recvAudioFps=this.parser.audioFps.getRecvFps());var i=this.getBufferLen(),n=Number(localStorage._printBufferLen);if(-1==n||n>0&&n==this._num_){var r=Math.max(0,i/100);E.a.debug(this._getTag(),"bufLen","-".repeat(r),i)}if(Number(localStorage._printMseLog)&&this.audioSegments&&this.videoSegments&&E.a.debug("MSE aSegments=".concat(this.audioSegments.length," vSegments=").concat(this.videoSegments.length," bufLen=").concat(this.getBufferLen())),!this.video.video.paused&&!this.userPaused){if(null==this.videoElement&&this.isLive&&e%4==0&&i>B.jitJump[0]&&!Number(localStorage._localFlvTest)){var o=.001*(B.jitJump[0]-B.jitJump[1]);this.video.video.currentTime+=o,E.a.warn("MSEPlayer.onCheckTimer jumpTs=".concat(o," bufLen=").concat(this.getBufferLen()))}this.checkBuffer(),this.onJitterTimer();var a=(this.handler?this.handler.lastEmptySliceTs:0)||0,s=a>0&&t-a<3e3,u=!!this.videoSourceBuffer;this.isLive&&u&&this.msePause.pausedTs>0&&t-this.msePause.pausedTs>5e3&&!s&&this.sensitivePause&&(E.a.warn("MSEPlayer.onCheckTimer paused 5 sec."),this._onErrorEvent(3),this._onPlayerError(!0),this.handler&&this.handler.onPause5Sec&&this.handler.onPause5Sec())}}else this.parser&&this.parser.printPlayFrameInfo&&this.parser.printPlayFrameInfo()}},{key:"onCheckFastTimer",value:function(t,e){if(1===Number(B.isMute)&&this.muffledVoice(),this.playing&&this.isMediaSourceOpen&&!this.video.video.paused&&!this.userPaused){this.checkEmptyFrames(),this.checkDelayReset(),this.msePause.check(t);var i=(this.handler?this.handler.lastEmptySliceTs:0)||0,n=i>0&&t-i<3e3,r=!!this.videoSourceBuffer;if(null==this.videoElement&&!this.pause500checked&&r&&this.msePause.pausedTs>0&&t-this.msePause.pausedTs>500&&!n){this.pause500checked=!0;var o=this.bufferedInfo(),a=o.bufferLen.toFixed(2),s=(o.nextStart-o.end).toFixed(2);if(E.a.info("MSEPlayer(".concat(this._num_,").onCheckFastTimer paused"),"bufferLen="+a,"hole="+s,"nextStart="+o.nextStart.toFixed(2),"currentTime="+this.video.video.currentTime),this.isLive&&"ts"!=this.videoType){this.video.printBuffered();var u=Number(o.nextStart);this.video.video&&u&&s>0&&s<3&&u-this.video.video.currentTime>.5&&(this.video.video.currentTime=u,E.a.log("MSEPlayer(".concat(this._num_,").onCheckFastTimer try jump currentTime=")+this.video.video.currentTime))}}}}},{key:"checkEmptyFrames",value:function(){this.handler.setEmptyFrames&&this.parser.hasEmptyFrames&&this.handler.setEmptyFrames(this.parser.hasEmptyFrames)}},{key:"checkDelayReset",value:function(){this.delayReset&&this.getBufferLen()<500&&(E.a.log("MSEPlayer(".concat(this._num_,").checkDelayReset reset player")),this.remuxer.reset(),this.parser.setPaused(!1),this.delayReset=!1)}},{key:"_msePaused",value:function(t){this.pauseStat.pause(),this.handler._hyPlayer&&this.handler._hyPlayer.roomRecordStat&&this.handler._hyPlayer.roomRecordStat.roomNoRenderStat.pause(),this.handler.onPlayPause(t,!!this.videoSourceBuffer)}},{key:"_mseResume",value:function(t,e){this.pause500checked=!1,this.pauseStat.resume(),this.handler._hyPlayer&&this.handler._hyPlayer.roomRecordStat&&this.handler._hyPlayer.roomRecordStat.roomNoRenderStat.resume(),this.parser.dropFrameCtrl&&this.pausePerf.checkLive(this.pid,this.bitrate,this.pauseStat.getCnt(),this.buffered.continueBuffer)&&this.parser.dropFrameCtrl.start(),this.handler.onPlayResume(t,!!this.videoSourceBuffer)}},{key:"bufferedInfo",value:function(){var t,e,i,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2,a=[],s=[],u=this.video.video.buffered;for(r=0;r<u.length;r++)a.push({start:u.start(r),end:u.end(r)});for(a.sort((function(t,e){return t.start-e.start||e.end-t.end})),r=0;r<a.length;r++){var c=s.length;if(c){var l=s[c-1].end;a[r].start-l<o?a[r].end>l&&(s[c-1].end=a[r].end):s.push(a[r])}else s.push(a[r])}var h=this.video.video.currentTime;for(r=0,t=0,e=i=h;r<s.length;r++){var d=s[r].start,f=s[r].end;if(h+o>=d&&h<f)e=d,t=(i=f)-h;else if(h+o<d){n=d;break}}return n||(n=i),{bufferLen:t,start:e,end:i,nextStart:n}}},{key:"printBuffer",value:function(t){if(this.video.video){var e=this.video.video.buffered,i="buffered=["+(1e3*e.start(0)|0)+","+(1e3*e.end(0)|0)+"]",n=1e3*this.video.video.currentTime>>0,r=this.getBufferLen();E.a.log("MSEPlayer(".concat(this._num_,").printBuffer ").concat(t," currentTime=").concat(n," bufLen=").concat(r," ").concat(i))}}},{key:"playbackRateSet",value:function(t){var e=this,i=this.getPlayVideo();if(i){var n=function(t){if(e.playRateIncrease%2==0){var n=t<1&&t+.02>1?1:t+.02;n>B.playbackrateMax&&(n=B.playbackrateMax),e.playRateDecrease=0,i.playbackRate=n}},r=function(t){if(e.playRateDecrease%2==0){var n=t>1&&t-.02<1?1:t-.02;n<B.playbackrateMin&&(n=B.playbackrateMin),e.playRateIncrease=0,i.playbackRate=n}},o=this.getBufferLen(),a=i.playbackRate;t<0?r(a):t>0?n(a):1!==a&&(a<1&&o<this.JITTER_BUFLEN?r(a):a>1&&o>this.JITTER_BUFLEN?n(a):i.playbackRate=1),this.playRateDecrease++,this.playRateIncrease++}}},{key:"setPlaybackRate",value:function(t){if(!(this.handler&&this.handler._hyPlayer&&this.handler._hyPlayer.getSupportAuto)||this.handler._hyPlayer.getSupportAuto()){var e=this.getPlayVideo();e&&(e.playbackRate=t)}}},{key:"onJitterTimer",value:function(t,e){if(this.playing&&("ts"!=this.videoType||this.isLive)&&this.autoJitter&&!this.autoBitrateJitter){var i=this.getPlayVideo();if(i){var n=this.getBufferLen();if(B.getEnableJumpBuffer()){var r=F.a.now();if(this.latencySeek>0&&n>4e3)return void(i.currentTime+=n-this.latencySeek);if(this.enableLowLatency&&n>Number(B.jitLowLatency))i.currentTime+=n-B.jitLowLatency;else{var o=n-this.JITTER_BUFLEN;if(r-this.startPlayTime<this.startCd)return;if(n>=(B.setVideoCTCfg[2]||1e4))return void this.setJumpBufferCurrentTime(o,n,0,r);if(this.isStartBuffer&&r-this.startPlayTime>this.startCd)o>=B.setVideoCTCfg[1]&&this.setJumpBufferCurrentTime(o,n,1,r),this.isStartBuffer=!1;else if(r-this.setVideoCurrentTime>=this.bufferCd||0==this.setVideoCurrentTime){if(r-this.startMoreBufferTime>=this.bufferMoreContinueTime&&0!=this.startMoreBufferTime)return this.setJumpBufferCurrentTime(o,n,2,r),void(this.startMoreBufferTime=0);o>=B.setVideoCTCfg[1]?0==this.startMoreBufferTime&&(this.startMoreBufferTime=r):this.startMoreBufferTime=0}}}else if(this.latencySeek>0&&n>4e3)i.currentTime+=n-this.latencySeek;else try{var a=0;n<this.JITTER_BUFMIN?a=n-this.JITTER_BUFLEN:n>this.JITTER_BUFMAX&&(a=n-this.JITTER_BUFMAX),this.enableLowLatency&&n>Number(B.jitLowLatency)?i.playbackRate=1.1:this.playbackrateChangeAccess?(a=Number(localStorage.ab_adjust)||a,1!=i.playbackRate&&this.isPlaybackRateNormal&&E.a.log("MSEPlayer.onJitterTimer.playbackRate=",i.playbackRate),1!=i.playbackRate?this.isPlaybackRateNormal=!1:this.isPlaybackRateNormal=!0,this.playbackRateSet(a)):i.playbackRate=1,-1===Number(localStorage._print_ab_log)&&E.a.log("BUFMIN: %d, BUFMAX: %d, BUFLEN:%d, bufLen: %d, adjust: %d, playbackRate: %f",this.JITTER_BUFMIN,this.JITTER_BUFMAX,this.JITTER_BUFLEN,n,a,i.playbackRate)}catch(t){E.a.error("MSEPlayer.onJitterTimer set playbackRateSet error",t)}}}}},{key:"setJumpBufferCurrentTime",value:function(t,e,i,n){this.lastJumpBufferTs=n||F.a.now(),this.h265Proxy&&this.h265Proxy.isReady?this.h265Proxy.jumpBuffer(t,e,i,n):this.setVideoCurrentTimeHand(t,e,i,n)}},{key:"setVideoCurrentTimeHand",value:function(t,e,i,n){var r=this.getPlayVideo();if(r){var o="";0===i?o="maxBuffer":1===i?o="fiveJump":2===i&&(o="ContinueJudgeJump"),E.a.log("MSEPlayer.onJitterTimer.jumpBuffer ".concat(o," video.currentTime before=").concat(r.currentTime," bufLen=").concat(e," minusBuffer=").concat(t," curDts=").concat(this.getCurrentDts())),r.currentTime+=t/1e3,this.setVideoCurrentTime=n,E.a.log("MSEPlayer.onJitterTimer.jumpBuffer ".concat(o," video.currentTime now=").concat(r.currentTime," curDts=").concat(this.getCurrentDts()," bufLen=").concat(this.getBufferLen()))}}},{key:"setJitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;this.JITTER_BUFLEN=t,this.JITTER_BUFMIN=e,this.JITTER_BUFMAX=i,E.a.info("".concat(this._getTag()," MSEPlayer.setJitter bufMin=").concat(e," bufLen=").concat(t," bufMax=").concat(i))}},{key:"_getTag",value:function(){var t=this.handler.constructor.name;return this._num_+" "+t}},{key:"muffledVoice",value:function(){var t=this;if(this.handler&&this.handler.voiceEliminationData){var e=this.handler.voiceEliminationData,i=!1;if(e&&0!==e.length){var n=this.getCurrentDts(),r=0,o=0;[].slice.call(e).map((function(e,a){r=e.begin,o=e.end,0==e.type&&(r+=t.offsetDts,o+=t.offsetDts),n>=r&&n<=o?(i=!0,E.a.log("MSEPlayer.muffledVoice data",(0,p.default)(e))):n>o&&(E.a.log("MSEPlayer.muffledVoice stop muffle audio"),t.handler.voiceEliminationData.splice(a,1))})),i?this.video.setMuffledVolume(!0):this.video.setMuffledVolume(!1)}}}},{key:"isMediaSourceOpen",get:function(){return this.mediaSource&&"open"===this.mediaSource.readyState}}]),t}(),yr=function(){function t(e){Object(v.a)(this,t),this._config=e,this._receivedLength=0}return Object(g.a)(t,null,[{key:"isSupported",value:function(){if(1==localStorage._noFetch)return!1;try{var t=D.a.msedge&&D.a.version.minor>=15048,e=!D.a.msedge||t;return fetch&&ReadableStream&&e}catch(t){return!1}}}]),Object(g.a)(t,[{key:"destroy",value:function(){this.onChunk=null,this.onSuccess=null,this.onError=null,this.onTimeout=null,this._clearTimeout(),this.abort()}},{key:"loadBuffer",value:function(t,e,i,n,r,o,a,s,u){this.url=t,this.onOpen=e,this.onChunk=i,this.onSuccess=n,this.onError=r,this.onTimeout=o,this.stats={trequest:performance.now(),retry:0},this.timeout=a,this.maxRetry=s,this.retryDelay=u,this.timeoutHandle=window.setTimeout(this.loadtimeout.bind(this),a),this.loadInternal()}},{key:"loadInternal",value:function(){var t=this;this._requestAbort=!1;var e=this.fromByte,i=this.toByte,n=new self.Headers;null!=this.fromByte&&null!=this.toByte&&n.append("Range","bytes=".concat(e,"-").concat(i));var r={method:"GET",headers:n,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};fetch(this.url,r).then((function(e){if(!t._requestAbort)return e.ok&&e.status>=200&&e.status<=299?(t._onopen(),t._pump.call(t,e.body.getReader())):void t._onerror({code:e.status,msg:e.statusText});t._requestAbort=!1})).catch((function(e){t._onerror({code:-1,msg:e.message})}))}},{key:"abort",value:function(){this._requestAbort=!0}},{key:"_clearTimeout",value:function(){var t=this.timeoutHandle;t&&(clearTimeout(t),this.timeoutHandle=null)}},{key:"_pump",value:function(t){var e=this;return t.read().then((function(i){if(e._clearTimeout(),i.done)e._onsuccess();else{if(!0===e._requestAbort)return e._requestAbort=!1,t.cancel();var n=i.value.buffer;e.onChunk&&e.onChunk(n),e._pump(t)}})).catch((function(t){if(11!==t.code||!D.a.msedge){var i={code:t.code,msg:t.message};e._onerror(i)}}))}},{key:"_onopen",value:function(){this.onOpen&&this.onOpen()}},{key:"_onerror",value:function(t){0!==t.code&&404!==t.code?this.stats.retry<this.maxRetry?(E.a.warn("FetchLoader.loaderror url=".concat(this.url," retryDelay=").concat(this.retryDelay," error: "),t),window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,64e3),this.stats.retry++,this.abort()):(this._clearTimeout(),E.a.warn("FetchLoader.loaderror reach max retry url=".concat(this.url," error: "),t),this.onError&&this.onError(t)):this.onError&&this.onError(t)}},{key:"_onsuccess",value:function(t){this._clearTimeout(),this.onSuccess&&this.onSuccess(t)}},{key:"loadtimeout",value:function(){this.stats.retry<this.maxRetry?(E.a.warn("FetchLoader.loadtimeout url="+this.url+" retryDelay="+this.retryDelay),this.abort(),window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,64e3),this.stats.retry++):(this._clearTimeout(),E.a.warn("FetchLoader.loadtimeout max retry url="+this.url),this.onTimeout&&this.onTimeout())}}]),t}(),vr=function(){function t(e){Object(v.a)(this,t),this.hlsPlayer=e,this.stat=this.hlsPlayer.stat,this.statVod=this.hlsPlayer.statVod,this.tsdbUtil=this.hlsPlayer.tsdb,this.isPaused=!1,this.tsOpens=[],this.tsLoadeds=[],this.tsSpeeds=[],this.tsSizes=[]}return Object(g.a)(t,[{key:"setPause",value:function(){this.isPaused=!0,this.stat.setCore(St,100)}},{key:"start",value:function(){this.stop(),Ji.once(this.checkSuc,this,1e4),Ji.once(this.checkVideo,this,2e4)}},{key:"stop",value:function(){this.tsOpens=[],this.tsLoadeds=[],this.tsSpeeds=[],this.tsSizes=[],Ji.remove(this.checkSuc,this),Ji.remove(this.checkVideo,this)}},{key:"checkSuc",value:function(){var t=this.hlsPlayer,e=t._loaderType,i=t.hasVideo,n=t.url,r=t.playTs,o=i?100:0,a=[];a.push(this.stat.createAct("hls_play_succ",{value:[o,e],str:[n,"".concat(r)]})),this.tsdbUtil.sendMetrics(a)}},{key:"checkVideo",value:function(){var t=this.hlsPlayer.hasVideo?100:0,e=[];e.push(this.stat.createAct("hls_load_succ",{value:[t]})),this.tsdbUtil.sendMetrics(e)}},{key:"report",value:function(){var t=[{sMetricName:oi.METRIC.VIDEO_BAD_QUALITY_RATIO,vField:{value:this.isPaused?100:0},vDimension:{p2p:2}}];this.hlsPlayer.mse.metadata.recvAudioFps&&this.stat.setComp(Lt,Ut,this.hlsPlayer.mse.metadata.recvAudioFps),this.hlsPlayer.mse.metadata.recvVideoFps&&this.stat.setComp(Lt,Dt,this.hlsPlayer.mse.metadata.recvVideoFps),this.stat.setComp(Lt,jt,this.hlsPlayer.getSpeed()),this.stat.setComp(Lt,Mt,this.hlsPlayer.mse.curVideoDts),this.stat.setComp(Lt,Nt,this.hlsPlayer.mse.curAudioDts),this.stat.setCompFormat(Lt,":",","),this.stat.setCore(qt,this.hlsPlayer.getBufferLen()),this.stat.setCore($t,this.hlsPlayer.getFrameBufferLen()),this.stat.setCoreDim(St,this.isPaused?100:0),this.stat.setComp(se,"ts_open_avg",this.getAvg(this.tsOpens)),this.stat.setComp(se,"ts_loaded_avg",this.getAvg(this.tsLoadeds)),this.stat.setComp(se,"ts_speed_avg",this.getAvg(this.tsSpeeds)),this.stat.setComp(se,"ts_size_avg",this.getAvg(this.tsSizes)),this.stat.fill(t,!1),this.hlsPlayer&&!this.hlsPlayer.isLive&&this.statVod.fill(t,!1),this.tsdbUtil.sendMetrics(t),this.isPaused=!1,this.tsOpens=[],this.tsLoadeds=[],this.tsSpeeds=[],this.tsSizes=[]}},{key:"getAvg",value:function(t){var e=t.length;if(0===e)return 0;for(var i=0,n=0;n<e;n++)i+=t[n];return Math.floor(i/e)}}]),t}(),gr=function(){function t(e){Object(v.a)(this,t),this._hlsPlayer=e,this._seekTime=0}return Object(g.a)(t,[{key:"seek",value:function(t){this._seekTime=t}},{key:"check",value:function(){this._seekTime>0&&(this._seek()?this._seekTime=0:this._reseek())}},{key:"_seek",value:function(){for(var t=this._seekTime,e=this._hlsPlayer.mse.video.video.buffered,i=[],n=!1,r=0;r<e.length;r++){var o=e.start(r),a=e.end(r);if(i.push("[".concat(o,", ").concat(a,"]")),o-.5<=t&&t<a+1){n=!0;break}if(t<o){this._seekTime=o;break}}return n&&(this._hlsPlayer.onVideoSeek(t),!this._hlsPlayer.userPaused&&this._hlsPlayer.play()),E.a.log("HlsSeek.buffered",i.join(" ")),n}},{key:"_reseek",value:function(){E.a.log("HlsSeek._reseek");var t=this._hlsPlayer.playlist.currDetails;t&&t.fragments&&(t.fragIdx>1&&t.fragIdx--,this._hlsPlayer.mse.seek(this._seekTime),this._hlsPlayer.mse.resetHls(),this._hlsPlayer.seekTime=this._seekTime,E.a.log("HlsSeek._reseek",t.fragIdx))}},{key:"_findIdxFront",value:function(t,e,i){for(var n=e.length,r=null,o=i;o<n;o++)if((t+=(r=e[o]).duration)>=this._seekTime)return r.seeking=!0,o;return n-1}},{key:"_findIdxBack",value:function(t,e,i){for(var n=null,r=i;r>0;r--)if((t-=(n=e[r]).duration)<this._seekTime)return n.seeking=!0,r;return 0}}]),t}();function _r(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function Sr(t,e,i,n,r,o){return _r((a=_r(_r(e,t),_r(n,o)))<<(s=r)|a>>>32-s,i);var a,s}function wr(t,e,i,n,r,o,a){return Sr(e&i|~e&n,t,e,r,o,a)}function br(t,e,i,n,r,o,a){return Sr(e&n|i&~n,t,e,r,o,a)}function Ir(t,e,i,n,r,o,a){return Sr(e^i^n,t,e,r,o,a)}function Tr(t,e,i,n,r,o,a){return Sr(i^(e|~n),t,e,r,o,a)}function Pr(t,e){var i,n,r,o,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,u=-271733879,c=-1732584194,l=271733878;for(i=0;i<t.length;i+=16)n=s,r=u,o=c,a=l,s=wr(s,u,c,l,t[i],7,-680876936),l=wr(l,s,u,c,t[i+1],12,-389564586),c=wr(c,l,s,u,t[i+2],17,606105819),u=wr(u,c,l,s,t[i+3],22,-1044525330),s=wr(s,u,c,l,t[i+4],7,-176418897),l=wr(l,s,u,c,t[i+5],12,1200080426),c=wr(c,l,s,u,t[i+6],17,-1473231341),u=wr(u,c,l,s,t[i+7],22,-45705983),s=wr(s,u,c,l,t[i+8],7,1770035416),l=wr(l,s,u,c,t[i+9],12,-1958414417),c=wr(c,l,s,u,t[i+10],17,-42063),u=wr(u,c,l,s,t[i+11],22,-1990404162),s=wr(s,u,c,l,t[i+12],7,1804603682),l=wr(l,s,u,c,t[i+13],12,-40341101),c=wr(c,l,s,u,t[i+14],17,-1502002290),s=br(s,u=wr(u,c,l,s,t[i+15],22,1236535329),c,l,t[i+1],5,-165796510),l=br(l,s,u,c,t[i+6],9,-1069501632),c=br(c,l,s,u,t[i+11],14,643717713),u=br(u,c,l,s,t[i],20,-373897302),s=br(s,u,c,l,t[i+5],5,-701558691),l=br(l,s,u,c,t[i+10],9,38016083),c=br(c,l,s,u,t[i+15],14,-660478335),u=br(u,c,l,s,t[i+4],20,-405537848),s=br(s,u,c,l,t[i+9],5,568446438),l=br(l,s,u,c,t[i+14],9,-1019803690),c=br(c,l,s,u,t[i+3],14,-187363961),u=br(u,c,l,s,t[i+8],20,1163531501),s=br(s,u,c,l,t[i+13],5,-1444681467),l=br(l,s,u,c,t[i+2],9,-51403784),c=br(c,l,s,u,t[i+7],14,1735328473),s=Ir(s,u=br(u,c,l,s,t[i+12],20,-1926607734),c,l,t[i+5],4,-378558),l=Ir(l,s,u,c,t[i+8],11,-2022574463),c=Ir(c,l,s,u,t[i+11],16,1839030562),u=Ir(u,c,l,s,t[i+14],23,-35309556),s=Ir(s,u,c,l,t[i+1],4,-1530992060),l=Ir(l,s,u,c,t[i+4],11,1272893353),c=Ir(c,l,s,u,t[i+7],16,-155497632),u=Ir(u,c,l,s,t[i+10],23,-1094730640),s=Ir(s,u,c,l,t[i+13],4,681279174),l=Ir(l,s,u,c,t[i],11,-358537222),c=Ir(c,l,s,u,t[i+3],16,-722521979),u=Ir(u,c,l,s,t[i+6],23,76029189),s=Ir(s,u,c,l,t[i+9],4,-640364487),l=Ir(l,s,u,c,t[i+12],11,-421815835),c=Ir(c,l,s,u,t[i+15],16,530742520),s=Tr(s,u=Ir(u,c,l,s,t[i+2],23,-995338651),c,l,t[i],6,-198630844),l=Tr(l,s,u,c,t[i+7],10,1126891415),c=Tr(c,l,s,u,t[i+14],15,-1416354905),u=Tr(u,c,l,s,t[i+5],21,-57434055),s=Tr(s,u,c,l,t[i+12],6,1700485571),l=Tr(l,s,u,c,t[i+3],10,-1894986606),c=Tr(c,l,s,u,t[i+10],15,-1051523),u=Tr(u,c,l,s,t[i+1],21,-2054922799),s=Tr(s,u,c,l,t[i+8],6,1873313359),l=Tr(l,s,u,c,t[i+15],10,-30611744),c=Tr(c,l,s,u,t[i+6],15,-1560198380),u=Tr(u,c,l,s,t[i+13],21,1309151649),s=Tr(s,u,c,l,t[i+4],6,-145523070),l=Tr(l,s,u,c,t[i+11],10,-1120210379),c=Tr(c,l,s,u,t[i+2],15,718787259),u=Tr(u,c,l,s,t[i+9],21,-343485551),s=_r(s,n),u=_r(u,r),c=_r(c,o),l=_r(l,a);return[s,u,c,l]}function Er(t){var e,i="",n=32*t.length;for(e=0;e<n;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function kr(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;e<i.length;e+=1)i[e]=0;var n=8*t.length;for(e=0;e<n;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function Rr(t){var e,i,n="";for(i=0;i<t.length;i+=1)e=t.charCodeAt(i),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n}function Cr(t){return unescape(encodeURIComponent(t))}function Or(t){return function(t){return Er(Pr(kr(t),8*t.length))}(Cr(t))}function Ar(t,e){return function(t,e){var i,n,r=kr(t),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=Pr(r,8*t.length)),i=0;i<16;i+=1)o[i]=909522486^r[i],a[i]=1549556828^r[i];return n=Pr(o.concat(kr(e)),512+8*e.length),Er(Pr(a.concat(n),640))}(Cr(t),Cr(e))}var Lr,Nr,Mr,Ur=function(t,e,i){return e?i?Ar(e,t):Rr(Ar(e,t)):i?Or(t):Rr(Or(t))},Dr=A("X2Zt"),Br=A("Zm0="),Fr=A("X3dzVGltZQ=="),xr=A("d3NUaW1l"),jr=A("X2ludmFsaWRUaW1l"),Vr=A("X25leHRSZWZyZXNoVGltZQ=="),Gr=A("X2N0eXBl"),Hr=A("Y3R5cGU="),Wr=A("d3NTZWNyZXQ="),qr=A("X3BhcmFtcw=="),Kr=A("X3NGbHZBbnRpY29kZQ=="),Yr=A("X3NGbHZVcmw="),zr=A("X3NTdHJlYW1OYW1l"),Jr=A("X3JlcQ=="),Qr=A("c2VxaWQ="),Xr=A("X3NlcWlk"),Zr=A("X3BjZG4="),$r=A("JDA="),to=A("JDE="),eo=A("JDI="),io=A("JDM="),no=A("aW5pdA=="),ro=A("aXNJbnZhbGlk"),oo=A("Z2V0QW50aWNvZGU="),ao=A("cGFyc2VBbnRpY29kZQ=="),so=A("aGFzQW50aWNvZGU="),uo=A("b25DaGVja1RpbWVy"),co=A("X29uUmVmcmVzaA=="),lo=A("X29uUmVmcmVzaEJpbmQ="),ho=A("dmFsaWQ="),fo=A("Z2V0VG9rZW4="),po=A("X2dldFRva2Vu"),mo=(A("bGl2ZXVp"),A("Z2V0Q2RuVG9rZW5JbmZvRXg="),A("MTAw"),A("dmVyPTE=")),yo=A("Jg=="),vo=A("PQ=="),go=A("UkVGUkVTSA=="),_o=A("cmVmcmVzaA=="),So=(A("ZGVjb2RlVVJJ"),A("dW5lc2NhcGU="),A("Z2V0U2VxaWQ=")),wo=A("bWVkaWF1aXNlYQ=="),bo=A("Z2V0QW50aUNvZGVGb3JTdHJlYW0="),Io=A("X25pbW9UaWQ="),To=i(13).default,Po=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this))[Fr]="",t[Dr]="",t[Gr]="",t[qr]=[],t[Kr]="",t[Yr]="",t[zr]="",t[Xr]="",t[jr]=u.default,t[Vr]=u.default,t[Io]=null,t[lo]=t[co].bind(Object(sn.a)(t)),t}return Object(g.a)(i,[{key:so,value:function(){return""!==this[Kr]}},{key:no,value:function(t,e,i,n){this[Yr]=t,this[zr]=e,this[ao](i),this[Io]=n}},{key:ao,value:function(t){var e=this;this[Dr]="",this[Fr]="",this[Gr]="",this[qr]=[],this[Kr]=t,t.split(yo).forEach((function(t){var i=lr(t.split(vo),2),n=i[0],r=i[1];if(n===Br)r=decodeURI(r),r=unescape(r),r=atob(r),e[Dr]=r;else if(n===xr){e[Fr]=r;var o=1e3*parseInt(r,16)+3e5;e[jr]=F.a.now()+(o-Date.now()),e[Vr]=e[jr]-3e4}else n==Hr?e[Gr]=r:n!==Wr&&e[qr].push(t)}))}},{key:ro,value:function(t){return t>this[jr]}},{key:oo,value:function(t){if(""===this[Dr])return this[Kr];var e=B.platform,i=U.PLATFORM_TYPE[e]||U.PLATFORM_TYPE.web;this[Xr]=N.uid+Date.now();var n=Ur("".concat(this[Xr],"|").concat(this[Gr],"|").concat(i)),r=e===U.PLATFORM_TYPE_NAME.wap?N.uid:N.convertUid,o=this[Dr].replace($r,r).replace(to,this[zr]).replace(eo,n).replace(io,this[Fr]);t&&(o+=Zr);var a="".concat(Wr).concat(vo).concat(Ur(o)).concat(yo).concat(xr).concat(vo).concat(this[Fr]).concat(yo).concat(Qr).concat(vo).concat(this[Xr]).concat(yo).concat(Hr).concat(vo).concat(this[Gr]).concat(yo).concat(mo);return this[qr].length>0&&(a+=yo+this[qr].join(yo)),a}},{key:So,value:function(){return this[Xr]}},{key:uo,value:function(t,e){t>=this[Vr]&&this[fo]().then(this[lo])}},{key:co,value:function(){this.trigger(i.Events[go])}},{key:ho,value:function(){var t=this;return new s.default((function(e){t[ro](F.a.now())?t[fo]().then(e):e()}))}},{key:fo,value:function(){var t=this;return new s.default((function(e){vn.connected?t[po](e):vn.on(vn.TAFLINK_INITED,(function(){t[po](e)}))}))}},{key:po,value:function(t){var e=this;this[Jr]||(this[Jr]=new To.GetAntiCodeForStreamReq),this[Jr].sStreamName=this._sStreamName,this[Jr].tId=this[Io]?this[Io]:vn.getUserId(),this[Vr]=u.default;var n=wo,r=bo;vn.sendWup(n,r,this._req,(function(n){var r;r=n.sAntiCode,E.a.log("".concat(i.name,".").concat(fo,"="),r),e[ao](r),t()}),!0,vn.getRequestId())}}]),i}(hn);Po.Events=(Mr=_o,(Nr=go)in(Lr={})?(0,O.default)(Lr,Nr,{value:Mr,enumerable:!0,configurable:!0,writable:!0}):Lr[Nr]=Mr,Lr);var Eo=Po;if(!a.default){var ko=Function.bind.call(Function.call,Array.prototype.reduce),Ro=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),Co=Function.bind.call(Function.call,Array.prototype.concat),Oo=o.default;Object.values=function(t){return ko(Oo(t),(function(e,i){return Co(e,"string"==typeof i&&Ro(t,i)?[t[i]]:[])}),[])}}var Ao=function(){function t(e){Object(v.a)(this,t),this.player=e,this.recordMap=new m.default,this.init(),this.reset()}return Object(g.a)(t,[{key:"init",value:function(){this.keys=(0,a.default)(At);var t=this.keys.indexOf(At.name);-1!==t&&this.keys.splice(t,1)}},{key:"setStat",value:function(t,e){this.recordMap.has(t)||(this.recordMap.set(t,1),this.exceptionStat[t]=e)}},{key:"getStat",value:function(){var t=this;this.player.getDurationTime&&this.player.getDurationTime()>2&&this.setStat(At.DATA_ENOUGH,1);var e=[];return(0,y.default)(this.exceptionStat).forEach((function(i){e.push("".concat(i,":").concat(t.exceptionStat[i]))})),e.join(",")}},{key:"reset",value:function(){var t=this;this.recordMap.clear(),this.exceptionStat={},this.keys.forEach((function(e){t.exceptionStat[e]=0}))}}]),t}(),Lo=function(t,e,i){i=i||"";var n="cdndomain",r=(e=e||"").match(/\/\/(.+?)\//i);r&&r.length>1&&(n=r[1]),t.setComDim("cdndomain",n),t.setComDim("stream",i||"stream")},No=function(){function t(e,i){Object(v.a)(this,t);var n=i.stat,r=i.statVod,o=i.tsdb,a=i.videoElement,s=i.h265Proxy;this.config={autoStartLoad:!0,maxBufferLength:30,minBufferLength:15,bs2Delay:3e3,fragLoadingTimeOut:5e3,fragLoadingMaxRetry:a?3:1,fragLoadingRetryDelay:1e3,listLoadingTimeOut:a?15e3:3e3,listLoadingMaxRetry:a?0:3,listLoadingRetryDelay:1e3,appendErrorMaxRetry:200,minFragBufferNum:3,autoReconnect:!0,firstFragLoadTimeout:1e4},this.eventEmitter=e,this.stat=n,this.statVod=r,this.tsdb=o,this.h265Proxy=s,this.isLive=!1,this.liveType=0,this.url=null,this.cdnName=null,this.seekTime=0,this.playlist=null,this.mse=null,this.userPaused=!1,this.targetDuration=0,this.isLoading=!1,this.fragStartTs=0,this.fragOpenTs=0,this.fragSize=0,this.startTs=0,this.pauseTs=0,this.pauseCnt=0,this.playTs=0,this.started=!1,this.isTryAgain=!1,this.fragLoader=null,this.tryTimer=null,this.hasVideo=!1,this.playStat=new vr(this),this.hlsSeek=new gr(this),this.firstPlay=!0,this.firstFragLoadTs=0,this.firstFragLoadedTs=0,this.firstFragSize=0,this.videoStatus=b,this.flvLoadTimeSended=!1,this.sOrigUrl="",this.curAppendFrag=null,this.seeking=!1,this.skipStatForSeek=!1,this.playTriggered=!1;var c,l,h,d,f=(c=B.hlsUseFetch>Math.floor(100*Math.random())&&yr.isSupported(),h=(l=U.HLS_LOAD_TYPE).FETCH,d=l.XHR,{clz:c?yr:hi,type:c?h:d}),p=f.clz,m=f.type;this._loaderClz=p,this._loaderType=m,this.videoElement=a,this.loadHlsStatus=U.LoadVideoTimeoutReason.HLS_DISCONNECTED,this.needReset=!1,this.resetPlayTs=0,this.lastPlayTs=0,this.pauseInBufferFullTimes=0,this.sendPauseTimeout=0,this.businessStartCost=0,this.startTimeStamp=0,this.loadStartTs=0,this.anticode=new Eo,this.isSwitchSeamLessLine=!1,this.pausedByBrowser=!1,this._nextRefreshTime=u.default,this._pcdnFragStartTs=0,this._cdnFragStartTs=0,this.firstTsInfo=null,this._getPcdnDataTime=0,this._getCdnDataTime=0,this.forceUseCdn=!1,this.coolLoadFragment=!1,this.isOpenPcdn=!1,this.pcdnRepeatByteLen=0,this.lastSN=-1,this.errorPcdnSN=-1,this.needStatPcdnRepeatBW=!1,this.avgSpeed=new ci(20),this.exceptionStat=new Ao(this),this.realStartBind=this.realStart.bind(this),this._clickEventBind=this._clickEvent.bind(this),this.refreshAnticodeBind=this.refreshAnticode.bind(this),this.anticode.on(Eo.Events.REFRESH,this.refreshAnticodeBind)}return Object(g.a)(t,[{key:"selectXhrLoader",value:function(){this._loaderClz=hi,this._loaderType=U.HLS_LOAD_TYPE.XHR}},{key:"selectFetchLoader",value:function(){this._loaderClz=yr,this._loaderType=U.HLS_LOAD_TYPE.FETCH}},{key:"getSpeed",value:function(){var t=this.avgSpeed.average();return t===L.UintMax?0:t}},{key:"destroy",value:function(){E.a.log("HlsPlayer.destroy"),this.started=!1,this.removeTimer(),this.tryTimer&&(clearTimeout(this.tryTimer),this.tryTimer=null),this.mse&&(this.mse.destroy(),this.mse=null),this.playlist&&(this.playlist.destroy(),this.playlist=null),this.releaseLoader(),this.isSwitchSeamLessLine=!1}},{key:"reset",value:function(){E.a.log("HlsPlayer.reset"),this.exceptionStat.reset(),this.avgSpeed.reset(),this.removeTimer(),this.isLive=null,this.liveType=0,this.url=null,this.cdnName=null,this.seekTime=0,this.targetDuration=0,this.isLoading=!1,this.startTs=0,this.pauseTs=0,this.pauseCnt=0,this.playTs=0,this.hasVideo=!1,this.started=!1,this.userPaused=!1,this.isTryAgain=!1,this.playStat.stop(),this.firstFragLoadTs=0,this.firstFragLoadedTs=0,this.firstFragSize=0,this.curAppendFrag=null,this.seeking=!1,this.skipStatForSeek=!1,this.firstPlay=!0,this.playTriggered=!1,this.isSwitchSeamLessLine=!1,this.pausedByBrowser=!1,this.sOrigUrl="",this._pcdnFragStartTs=0,this._cdnFragStartTs=0,this.firstTsInfo=null,this._getPcdnDataTime=0,this._getCdnDataTime=0,this.forceUseCdn=!1,this.coolLoadFragment=!1,this.pcdnRepeatByteLen=0,this.lastSN=-1,this.errorPcdnSN=-1,this.needStatPcdnRepeatBW=!1,this.isOpenPcdn=!1}},{key:"resetMediasource",value:function(){this.resetPlayTs=0,this.needReset=!0}},{key:"reloadInError",value:function(){if(this.isLive){var t=this.playlist.currFrag;t&&(this.releaseLoader(),this.destroyMse(),this.mse=this.createMse(),this.isLoading=!1,this.seek(t.start+.5))}else if(this.info){var e=this.getCurrentTime();this.info.seekTime=e+1,this.start(this.info)}}},{key:"destroyMse",value:function(){this.mse&&(this.mse.destroy(),this.mse=null)}},{key:"createMse",value:function(){var t={isLive:this.isLive,videoType:"ts",videoElement:this.videoElement,h265Proxy:this.h265Proxy,ignoreSei:this.ignoreSei,closeFetch:this.closeFetch};return 1==localStorage._isPureAudio&&(t.isPureAudio=!0),1==localStorage._isPureVideo&&(t.isPureVideo=!0),new mr(this,t)}},{key:"releaseLoader",value:function(){this.fragLoader&&(this.fragLoader.destroy(),this.fragLoader=null)}},{key:"removeTimer",value:function(){Ji.remove(this.onCheckTimer,this),Ji.remove(this.onCheckFastTimer,this),Ji.remove(this.onCheckIfCanPCDN,this)}},{key:"setConfig",value:function(t,e){}},{key:"start",value:function(t){this.stop(),this.checkParams(t,this.realStartBind)}},{key:"checkParams",value:function(t,e){t.isLive||(this.isOpenPcdn=L.getSdkAbRandom(t),this.stat.setComDim(ii,this.isOpenPcdn?1:0),this.statVod.setComDim(ii,this.isOpenPcdn?1:0),E.a.log("%cIs Open Pcdn = ".concat(this.isOpenPcdn),"color:#A23400;background:#FFF5C2")),E.a.log("HlsPlayer.checkParams",(0,p.default)(t)),this.started=!0,t.isLive&&t.sHlsUrl&&t.sStreamName?(t.sHlsUrl=t.sHlsUrl.replace("http://","https://"),t.sHlsAntiCode?(this.anticode.init(t.sHlsUrl,t.sStreamName,t.sHlsAntiCode),this.anticode.valid().then((function(){e(t)}))):e(t)):t.url?e(t):E.a.error("HlsPlayer.checkParams has no params(sHlsUrl,sStreamName,url)")}},{key:"initInfo",value:function(t){this.info=t;var e=t.url;t.sHlsUrl&&t.sStreamName&&(e=t.sHlsUrl+"/"+t.sStreamName+".m3u8"),this.sOrigUrl=e;var i=[];return this.anticode.hasAnticode()&&i.push(this.anticode.getAnticode()),t.iBitRate>0&&i.push("ratio=".concat(t.iBitRate)),i.length>0&&(e+=(-1!==e.indexOf("?")?"&":"?")+"".concat(i.join("&"))),this.lineType=t.lineType,e}},{key:"realStart",value:function(t){if(this.started){this.url=this.initInfo(t),this.firstTsInfo=t.tsInfo;var e=(new Date).getTime();if(this.businessStartCost=0,this.UIStartCost=0,this.loadStartTs=0,this.startTimeStamp=Number(t.startTimeStamp)||0,t.noNeedSendVideoLoadTime?this.noNeedSendVideoLoadTime=!0:(this.businessStartCost=t.startTimeStamp?Math.floor(e-t.startTimeStamp):0,this.noNeedSendVideoLoadTime=!1),t.uistartTs&&t.uistartTs>0&&(this.UIStartCost=Math.floor(e-t.uistartTs)),E.a.log("HlsPlayer.start startTimeStamp="+t.startTimeStamp,"uistartTs="+t.uistartTs,"businessStartCost="+this.businessStartCost,"UIStartCost="+this.UIStartCost,"now="+e,"uistartTs="+t.uistartTs),this.url){this.loadHlsStatus=U.LoadVideoTimeoutReason.HLS_DISCONNECTED,this.isLive=t.isLive,this.closeFetch=Boolean(t.closeFetch),this.ignoreSei=Boolean(t.ignoreSei),this.cdnName=t.cdnName,this.liveType=t.liveType,this.closeFetch&&this.selectXhrLoader(),E.a.log("HlsPlayer.start isLive=".concat(this.isLive," url=").concat(this.url)),this.playlist=new Mi(this),this.playlist.setOrigUrl(this.url),this.destroyMse(),this.mse=this.createMse();var i=t.seekTime||this.seekTime;if(this.firstTsInfo&&i&&(this.firstTsInfo.tsDuration?i<=this.firstTsInfo.tsDuration?this.firstTsInfo.seeking=!0:i>this.firstTsInfo.tsDuration&&(this.firstTsInfo=null):this.firstTsInfo=null),this.startTs=F.a.now(),this.firstTsInfo&&this.playlist.loadFirstFragment(this.firstTsInfo),this.playlist.loadManifest(this.url),Lo(this.stat,this.url,this.info.sStreamName),this.seek(t.seekTime||this.seekTime),this.playStat.start(),this.stat.setComDim(H,this.url),this.stat.setComDim(V,2),this.stat.setComDim(it,3),this.stat.setComDim("hls_type",t.isLhls?2:1),this.statVod.setComDim(H,this.url),this.statVod.setComDim(it,3),!this.isLive){var n=t.vid||L.getQueryString("vid",this.url);this.stat.setComDim(ei,n||""),this.stat.setComDim("coderatebps",t.iBitRate||t.coderate),this.stat.setComDim("anchoruid",t.presenterUid||0),this.statVod.setComDim("vod_coderate",t.iBitRate||t.coderate),this.statVod.setComDim(ei,n||""),this.statVod.setComDim("vodanchorid",t.presenterUid||0)}}else E.a.error("HlsPlayer.start invalid argument, pls check the url.")}}},{key:"refreshAnticode",value:function(){this.url=this.initInfo(this.info),this.playlist.refreshManifsetUrl(this.url)}},{key:"setVideoPlayTimeSended",value:function(){this.flvLoadTimeSended=!0}},{key:"setLoadStatus",value:function(t){if(this.loadHlsStatus!==t){if(t===U.LoadVideoTimeoutReason.HLS_LOADMANIFEST_SUCCESS){this.exceptionStat.setStat(At.CONNECT_SUC,1);var e=this.playlist.manifestLoadedTs-this.startTs;this.tsdb.sendM3u8LoadedTime(this._loaderType,e)}this.loadHlsStatus=t}}},{key:"sendLoadVideoErrorStatus",value:function(){this.eventEmitter.tsdbUtil.sendMetrics([this.stat.createAct(TsdbUtil.METRIC.VIDEO_VIDEO_LOAD_ERROR,{value:[this.loadHlsStatus]})])}},{key:"getPlayVideo",value:function(){return this.mse.getPlayVideo()}},{key:"stop",value:function(){this.started&&(E.a.log("HlsPlayer.stop"),this.destroy(),this.reset())}},{key:"seek",value:function(t){if(!this.isLive&&null!=t){if(this.seeking=!0,this.skipStatForSeek=!0,this.seekTime=t,this.hlsSeek.seek(0),0==t){if(this.firstPlay=!1,!this.mse||!this.mse.video)return;if(0==this.mse.video.currentTime)return}this.playlist&&(E.a.log("HlsPlayer.seek "+t),t=Math.max(0,Number(t)),this.playlist.seek(t)?(this.mse.seek(t),this.mse.resetHls(),this.releaseLoader(),this.isLoading=!1,this.loadFragment(),this.hlsSeek.seek(this.seekTime)):this.playlist.m3u8Parsered&&this.playlist.firstLevelLoaded&&(E.a.warn("HlsPlayer.seek out of range."),this.stop(),this.onAnchorStop()))}}},{key:"pause",value:function(){this.started&&(E.a.info("HlsPlayer.pause"),this.userPaused=!0,this.mse&&this.mse.pause())}},{key:"play",value:function(){this.started&&(E.a.info("HlsPlayer.play"),this.userPaused=!1,this.mse&&this.mse.play())}},{key:"setVolume",value:function(t){this.mse&&this.mse.setVolume(t)}},{key:"getVolume",value:function(){return this.mse?this.mse.getVolume():-1}},{key:"getBufferLen",value:function(){if(!this.isLive){var t=this.mse.getPlayVideo(),e=this.bufferedInfo(t.currentTime,t.buffered).len;return parseInt(1e3*e)}this.mse.getBufferLen()}},{key:"getFrameBufferLen",value:function(){return this.mse.getFrameBufferLen()}},{key:"getCurrentTime",value:function(){return this.mse&&(this.lastPlayTs=Math.round(this.mse.getCurrentTime()/1e3)),this.lastPlayTs>this.getDurationTime()?this.getDurationTime():this.lastPlayTs}},{key:"getCurrentDts",value:function(){return this.mse.getCurrentDts()}},{key:"getCurrentSeiOffsetDts",value:function(){return this.mse.getCurrentSeiOffsetDts()}},{key:"getDurationTime",value:function(){return Math.floor(this.playlist&&this.playlist.totalDuration?this.playlist.totalDuration:0)}},{key:"getFixedDurationTime",value:function(){return this.playlist&&this.playlist.totalDuration?this.playlist.totalDuration:0}},{key:"getAnticodeHandler",value:function(){return this.anticode}},{key:"updateFlvConfig",value:function(){this.mse&&this.mse.setJitter(B.hlsJitCfg[0],B.hlsJitCfg[1],B.hlsJitCfg[2])}},{key:"updateLiveVodUrl",value:function(t,e){e!==this.cdnName?this.eventEmitter.trigger(_.PLAYBACK_DIF_CDN):this.playlist.updateLiveVodUrl(t)}},{key:"setMuted",value:function(t){this.mse&&this.mse.setMuted(t)}},{key:"getMuted",value:function(){return this.mse?this.mse.getMuted():-1}},{key:"reconnectLive",value:function(){if(E.a.log("HlsPlayer.reconnectLive"),this.isLive)this.destroy(),this.reset(),this.start(this.info);else{var t=this.playlist.currFrag;t.tryCnt>0&&!t.isPcdn?(t.tryCnt--,this.loadFragment(!0)):t.isPcdn||this.loadFragment(!1)}}},{key:"setTargetDuration",value:function(t){this.targetDuration=t*this.config.minFragBufferNum}},{key:"loadFragment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;if(!this.isLoading&&(null!==this.playlist.currDetails||e)&&(this.hlsSeek.check(),this.started)){var i=void 0;if(0==this.seekTime){var n=this.config.maxBufferLength,r=this.config.minBufferLength,o=this.mse.getPlayVideo();if(i=this.bufferedInfo(o.currentTime,o.buffered).len,this.coolLoadFragment){if(i>=r)return;this.coolLoadFragment=!1}if(i>=n)return void(this.coolLoadFragment=!0)}var a=null;if(e)(a=new mi).url=e.tsUrl,a.start=~~e.tsStartTime,a.discontinuity=!!e.discontinuity,a.seeking=!!this.firstTsInfo.seeking,a.byteRangeStartOffset=e.byteRangeStartOffset,a.byteRangeEndOffset=e.byteRangeEndOffset,this.playlist.currFrag=a;else if((a=t?this.playlist.currFrag:this.playlist.nextFrag)&&this.firstTsInfo){var s=L.removeUrlAllParam(this.firstTsInfo.tsUrl),u=L.removeUrlAllParam(a.url);a.byteRangeEndOffset&&s===u?a=a.byteRangeEndOffset===this.firstTsInfo.byteRangeEndOffset?this.playlist.nextFrag:a:s===u&&(a=this.playlist.nextFrag)}if(a){this.playlist.m3u8Parsered&&this.isOpenPcdn&&this.playlist.fragHelper.getVodPcdnProxy();var c=this.config,l=c.bs2Delay+this.targetDuration/3*1e3,h=a.getUrl({bufferLen:this.getBufferLen(),useCdn:this.forceUseCdn});0==this.firstFragLoadTs&&(this.firstFragLoadTs=F.a.now()),a.isPcdn?(this.statVod.addCore(Jt,1),this._pcdnFragStartTs=F.a.now()):this._cdnFragStartTs=F.a.now(),this.playlist.m3u8Parsered||(l=this.config.firstFragLoadTimeout),this.isLoading=!0,this.releaseLoader();var d=new this._loaderClz(c);this.fragLoader=d,a.byteRangeEndOffset&&(d.fromByte=a.byteRangeStartOffset,d.toByte=a.byteRangeEndOffset-1),1==localStorage._printFragSn&&E.a.log("HlsPlayer.loadFragment sn="+a.sn,h),this.fragStartTs=F.a.now(),this.fragSize=0,this.stat.addComp(se,de,1),d.loadBuffer(h,this.loadOpen.bind(this),this.loadChunk.bind(this),this.loadSuccess.bind(this),this.loadError.bind(this),this.loadTimeout.bind(this),l,a.isPcdn?0:c.fragLoadingMaxRetry,a.isPcdn?0:c.fragLoadingRetryDelay)}else if(null!=i&&i<=1){if(E.a.log("HlsPlayer.loadFragment ANCHOR_STOP bufferedLen="+i.toFixed(2)),!this.isLive){var f=this.mse.getPlayVideo(),p=f.currentTime,m=this.getFixedDurationTime();m-p-i<=2&&(2===Number(this.liveType)?(this.stop(),this.onAnchorStop()):(f.currentTime=m,this.onEnded()))}}else if(this.seekTime>0)if(E.a.warn("HlsPlayer.seek out of range."),this.isLive)this.stop(),this.onAnchorStop();else{var y=this.mse.getPlayVideo(),v=y.currentTime,g=this.getFixedDurationTime();g-v<=2&&this.seek(g)}}}},{key:"loadOpen",value:function(){this.fragOpenTs=F.a.now();var t=this.fragOpenTs-this.fragStartTs;t<5e3&&this.playStat.tsOpens.push(t)}},{key:"loadChunk",value:function(t){this.pushData(t)}},{key:"loadSuccess",value:function(t){this.isLoading=!1,this.pushData(t);var e=F.a.now()-this.fragOpenTs;e<1e4&&(this.playStat.tsLoadeds.push(e),this.playStat.tsSpeeds.push(this.fragSize/e),this.playStat.tsSizes.push(this.fragSize)),this.stat.addComp(se,"ts_suc_cnt",1),this.fragSize=0}},{key:"pushData",value:function(t){if(t){var e=this.playlist.currLevel||{},i=this.playlist.currFrag,n=this.playlist.lastFrag,r=this.playlist.totalDuration;if(this.exceptionStat.setStat(At.HAS_DATA,1),this.avgSpeed.addCur(t.byteLength),this.fragSize+=t.byteLength,this.statFragData(t),t=this.discardPcdnRepeatData(t)){0==this.firstFragLoadedTs&&(this.firstFragLoadedTs=F.a.now(),this.firstFragSize=t.byteLength/1024|0);var o=i.discontinuity;this.curAppendFrag&&this.curAppendFrag.sn===i.sn?o=!1:this.curAppendFrag&&this.curAppendFrag.sn!==i.sn&&(this.curAppendFrag=i),this.curAppendFrag||(this.curAppendFrag=i),this.lastSN!==i.sn&&(this.lastSN=i.sn),this.mse.appendTs({data:t,audioCodec:e.audioCodec,videoCodec:e.videoCodec,timeOffset:i.start,duration:r,discontinuity:o,_discontinuity:i.seeking&&n&&i.discontinuityCnt!==n.discontinuityCnt,level:i.level,sn:i.sn,seeking:i.seeking,hlsDT:i.hlsDT,tsDT:i.tsDT}),i&&i.seeking&&(i.seeking=!1,this.firstPlay&&(this.firstPlay=!1,this.mse.seek(this.seekTime),this.onVideoSeek(this.seekTime),this.play()),this.seekTime=0),Ji.has(this.onCheckTimer,this)||(Ji.add(this.onCheckTimer,this,1e3),Ji.add(this.onCheckFastTimer,this,100)),this.setLoadStatus(U.LoadVideoTimeoutReason.HLS_LOADFRAMENT_SUCCESS)}}}},{key:"loadError",value:function(t){var e=t.code,i=t.currentTarget,n=t.msg;this.playlist&&this.playlist.currFrag&&this.playlist.currFrag.isPcdn&&(this.errorPcdnSN=this.playlist.currFrag.sn,this.needStatPcdnRepeatBW=!0,this.statVod.addCore("get_stream_link_error_cnt",1),this.statVod.addCore(Qt,1)),this.stat.addComp(se,"ts_fail_cnt",1),E.a.warn("load fragment error:".concat(e||i&&i.status," ").concat(n||"")),this.isLoading=!1,this.config.autoReconnect&&this.reconnectLive(),this.setLoadStatus(U.LoadVideoTimeoutReason.HLS_LOADFRAMENT_ERROR)}},{key:"loadTimeout",value:function(t){this.playlist&&this.playlist.currFrag&&this.playlist.currFrag.isPcdn&&(this.statVod.addCore("get_stream_link_timeout_cnt",1),this.statVod.addCore(Qt,1)),this.stat.addComp(se,"ts_timeout_cnt",1),E.a.warn("load fragment timeout",t),this.isLoading=!1,this.config.autoReconnect&&this.reconnectLive()}},{key:"discardPcdnRepeatData",value:function(t){var e=this.playlist.currFrag;if(this.lastSN!==e.sn&&(this.pcdnRepeatByteLen=0),!e.isPcdn&&this.errorPcdnSN===e.sn&&this.pcdnRepeatByteLen>0){if(this.needStatPcdnRepeatBW&&(this.statVod.setCore("pcdn_repeat_bw",this.pcdnRepeatByteLen),this.needStatPcdnRepeatBW=!1),this.pcdnRepeatByteLen>t.byteLength)return this.pcdnRepeatByteLen-=t.byteLength,null;var i=t.slice(this.pcdnRepeatByteLen,t.byteLength);this.pcdnRepeatByteLen=0,t=i}return e.isPcdn&&(this.pcdnRepeatByteLen+=t.byteLength),t}},{key:"statFragData",value:function(t){var e=this.playlist.currFrag;if(this.lastSN!==e.sn&&(this._getPcdnDataTime>0&&(this.statVod.addCore("get_pcdn_data_time",this._getPcdnDataTime),this.statVod.addCore("get_pcdn_data_time_cnt",1),this._getPcdnDataTime=0),this._getCdnDataTime>0&&(this.statVod.addCore("get_cdn_data_time",this._getCdnDataTime),this.statVod.addCore("get_cdn_data_time_cnt",1),this._getCdnDataTime=0)),e.isPcdn){var i=e.pcdnFreetime?"pcdn_freetime_bw":"pcdn_realtime_bw";this.statVod.addCore(i,t.byteLength),this.stat.addCore(zt,t.byteLength),this._pcdnFragStartTs>0&&(this._getPcdnDataTime+=F.a.now()-this._pcdnFragStartTs,this._pcdnFragStartTs=F.a.now())}else this.statVod.addCore(Ht,t.byteLength),this.stat.addCore(Ht,t.byteLength),this._cdnFragStartTs>0&&(this._getCdnDataTime+=F.a.now()-this._cdnFragStartTs,this._cdnFragStartTs=F.a.now())}},{key:"bufferedInfo",value:function(t,e){var i,n,r,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3,u=[],c=[];for(a=0;a<e.length;a++)u.push({start:e.start(a),end:e.end(a)});for(u.sort((function(t,e){return t.start-e.start||e.end-t.end})),a=0;a<u.length;a++){var l=c.length;if(l){var h=c[l-1].end;u[a].start-h<s?u[a].end>h&&(c[l-1].end=u[a].end):c.push(u[a])}else c.push(u[a])}for(a=0,i=0,n=r=t;a<c.length;a++){var d=c[a].start,f=c[a].end;if(t+s>=d&&t<f)n=d,i=(r=f)-t;else if(t+s<d){o=d;break}}return{len:i,start:n,end:r,nextStart:o}}},{key:"checkCatonError",value:function(){if(this.mse&&this.mse.getBufferLen&&this.mse.getBufferLen()>8e3&&!this.mse.video.paused&&Math.floor(this.mse.getCurrentTime()/1e3)<5){if(Math.floor(this.lastPlayTs)==Math.floor(this.mse.getCurrentTime()/1e3)&&this.pauseInBufferFullTimes++,this.playTriggered)return;if(this.pauseInBufferFullTimes>=5){var t=this.playlist.getNearFragStart(this.lastPlayTs+1);this.seek(t),this.pauseInBufferFullTimes=0}}}},{key:"onCheckTimer",value:function(t,e){if(this.anticode.onCheckTimer(t,e),this.avgSpeed.calculate(),this.started&&this.mse&&!this.needReset){var i=this.getBufferLen(),n=this.playlist.currFrag;if(-1===Number(localStorage._print_pcdn_buf)&&E.a.log("%cHlsPlayer.onCheckTimer isPcdn=".concat(n.isPcdn," bufferlen=").concat(this.getBufferLen()," forceUseCdn=").concat(this.forceUseCdn),"color:green"),n.isPcdn&&i<U.PCDN_CLOSE_BUFFER&&!this.forceUseCdn?(E.a.log("%cHlsPlayer.onCheckTimer: pcdn close","color:#A23400;background:#FFF5C2"),this.fragLoader.abort(),this.forceUseCdn=!0,this.isLoading=!1,this.errorPcdnSN=n.sn,this.needStatPcdnRepeatBW=!0,this.loadFragment(!0),this.statVod.addCore("get_stream_low_data_cnt",1),Ji.once(this.onCheckIfCanPCDN,this,U.PCDN_COOL_TIME)):this.loadFragment(),this.mse&&!this.mse.userPaused){if(this.mse&&this.mse.onCheckTimer(t,e),this.playlist&&this.playlist.onCheckTimer(e),this.playTs>0){var r=t-this.pauseTs;this.playStat&&(this.pauseTs>0&&r>200&&!this.skipStatForSeek&&0==this.pauseCnt&&this.playStat.setPause(),this.pauseCnt>0&&(this.pauseCnt=0,this.playStat.setPause()),e%20==0&&this.playStat.report()),this.pauseTs>0&&r>5e3&&(E.a.warn("HlsPlayer.onCheckTimer pauseTime=".concat(r,", bufferLen=").concat(this.getBufferLen())),this.isLive||(this.triggerH5PlayError(),this.pauseTs=0))}this.checkCatonError(),this.eventEmitter.trigger(_.PLAY_TIME_STATUS,{current:this.getCurrentTime(),total:this.getDurationTime()}),this.eventEmitter.trigger(_.PLAY_FRAME_BUFFER,{frameStorage:this.mse&&this.mse.getFrameReadyed(),jitterBuffer:this.mse&&this.mse.getBufferLen()})}}}},{key:"onCheckFastTimer",value:function(t,e){if(this.needReset)return 0===this.resetPlayTs&&(this.resetPlayTs=t+this.mse.getBufferLen()-500),void((this.mse&&this.mse.getBufferLen()<500||t>this.resetPlayTs)&&(this.reloadInError(),this.needReset=!1,this.resetPlayTs=0));if(this.started&&this.mse&&!this.mse.userPaused){this.mse&&this.mse.onCheckFastTimer(t,e);var i=t-this.pauseTs;if(this.info&&9===this.info.type){var n=this.getBufferLen();if(this.pauseTs>0&&i>=1e3&&n>2e3){var r=this.mse.video.video;r.currentTime+=1,E.a.log("HlsPlayer.onCheckFastTimer.playback pauseTime=".concat(i,", currentTime + 1, currentTime=").concat(r.currentTime)),this.play()}}}}},{key:"onCheckIfCanPCDN",value:function(t,e){E.a.log("%cHlsPlayer.onCheckIfCanPCDN: pcdn open","color:#A23400;background:#FFF5C2"),this.forceUseCdn=!1,Ji.remove(this.onCheckIfCanPCDN,this)}},{key:"updateStatus",value:function(t){this.videoStatus!==t&&(this.videoStatus=t,this.eventEmitter.trigger(_.PLAY_STATUS,{status:t}))}},{key:"onStartVideo",value:function(){this.loadStartTs=F.a.now()}},{key:"onPlayVideo",value:function(t,e,i,n){var r=F.a.now();if(this.playTs=r,this.hasVideo=n,0!==this.startTs){var o=r-this.startTs,a=this.playlist.manifestLoadedTs-this.startTs,s=this.firstFragLoadTs-this.playlist.manifestLoadedTs;this.firstTsInfo&&(s=this.firstFragLoadTs-this.startTs);var u=this.firstFragLoadedTs-this.firstFragLoadTs,c=r-this.firstFragLoadedTs,l=this.UIStartCost>0?o+this.UIStartCost:0,h=0;this.startTimeStamp>1?h=o+this.businessStartCost:1===this.startTimeStamp&&(h=r-this.loadStartTs),this.tsdb.sendHlsTime(this._loaderType,o,a,s,u,this.firstFragSize,h,l,c),E.a.log("%cHlsPlayer.onPlayVideo loadTime="+o,"color:#A23400;background:#FFF5C2")}!this.pausedByBrowser&&this.updateStatus(w),this.seeking=!1,this.skipStatForSeek=!1,this.playTriggered=!0,this.eventEmitter.trigger(_.VIDEO_PLAY,{video:t,width:e,height:i})}},{key:"onVideoStop",value:function(t,e){E.a.log("HlsPlayer.onVideoStop hasVideo="+e),this.hasVideo=!1,e&&(this.updateStatus(b),this.eventEmitter.trigger(_.VIDEO_STOP,{video:t}))}},{key:"onAnchorStop",value:function(){var t=this.mse?this.mse.getPlayVideo():null;this.eventEmitter.trigger(_.ANCHOR_STOP,{video:t})}},{key:"onEnded",value:function(){this.started=!1,this.eventEmitter.trigger(_.M3U8_PLAY_ENDED)}},{key:"onLoadM3u8Error",value:function(){this.eventEmitter.trigger(_.HLS_URL_UNAVAILABLE)}},{key:"onLoadManifestTimeout",value:function(){this.eventEmitter.trigger(_.HLS_MAINFEST_LOAD_TIMEOUT)}},{key:"onConnectManifestTimeout",value:function(){this.eventEmitter.trigger(_.HLS_URL_LOAD_TIMEOUT)}},{key:"onPlayerError",value:function(t){this.videoElement}},{key:"triggerH5PlayError",value:function(){if(9!==this.info.type){var t=this.getCurrentTime();E.a.log("HlsPlayer.triggerH5PlayError seekTime = ".concat(t)),this.info&&(this.eventEmitter.trigger(_.PAUSE_5S_RETRY),this.info.seekTime=t,this.start(this.info))}}},{key:"onErrorEvent",value:function(t){var e=this.mse?this.mse.getPlayVideo():null;this.eventEmitter.trigger(_.H5_PLAYER_ERROR,{video:e,code:t.type,msg:"播放错误"}),this.setLoadStatus(U.LoadVideoTimeoutReason.HLS_PLAY_ERROR)}},{key:"onPlayPause",value:function(t,e){if(e&&(this.pauseTs=t,this.updateStatus(I),this.playlist&&!this.isLive)){var i=1e3*this.playlist.totalDuration,n=this.mse?this.mse.getCurrentTime():0;i>0&&n>0&&Math.abs(i-n)<1e3&&this.isLive&&(E.a.warn("HlsPlayer detect anchor stop."),this.onAnchorStop(),this.stop()),this.startSendPauseTimer()}}},{key:"onPlayResume",value:function(t,e){if(this.pauseTs>0){var i=t-this.pauseTs;i>200&&!this.skipStatForSeek&&(E.a.warn("HlsPlayer.onPlayResume pauseTime="+i),this.pauseCnt++,this.stat.addCore(Kt,1),this.stat.addCore(Yt,i),this.eventEmitter.trigger(_.VIDEO_BAD_QUALITY)),this.pauseTs=0}this.skipStatForSeek=this.seeking,e&&this.updateStatus(w)}},{key:"onVideoSeek",value:function(t){this.seeking=!1;var e=this.mse?this.mse.getPlayVideo():null;this.eventEmitter.trigger(_.VIDEO_SEEK,{video:e,currentTime:t})}},{key:"onPauseByBrowser",value:function(){window&&(E.a.warn("HlsPlayer.onPauseBrowser: video was paused by browser, define click listener"),window.removeEventListener("click",this._clickEventBind,!0),window.addEventListener("click",this._clickEventBind,!0),this.pausedByBrowser=!0)}},{key:"_clickEvent",value:function(){document&&(E.a.log("HlsPlayer._clickEvent: click for play a temp video"),document.createElement("video").play(),this.pausedByBrowser=!1,window&&window.removeEventListener("click",this._clickEventBind,!0))}},{key:"startSendPauseTimer",value:function(){this.stopSendPauseTimer(),this.sendPauseTimeout=setTimeout(this.sendPauseEvent.bind(this),200)}},{key:"stopSendPauseTimer",value:function(){clearTimeout(this.sendPauseTimeout)}},{key:"sendPauseEvent",value:function(){this.videoStatus!==w&&this.eventEmitter.trigger(_.PLAY_CARTON)}},{key:"getCostTimes",value:function(){if(!this.playlist)return[0,0,0];var t=this.playlist.manifestLoadedTs>0?this.playlist.manifestLoadedTs-this.startTs:0,e=this.firstFragLoadedTs>0?this.firstFragLoadTs-this.playlist.manifestLoadedTs:0;return this.firstTsInfo&&(e=this.firstFragLoadedTs>0?this.firstFragLoadTs-this.startTs:0),[t,e,this.firstFragLoadedTs>0?this.firstFragLoadedTs-this.firstFragLoadTs:0,this.playTs&&this.firstFragLoadedTs>0?this.playTs-this.firstFragLoadedTs:0]}},{key:"switchLevel",value:function(t){var e=this.playlist.levels,i=t.curBitRate;if(e.length>0&&this.playlist.isMasterPlayList){for(var n=0;n<e.length;n++)if(e[n].bitrate===i&&this.playlist.currLevel.bitrate!=i){this.playlist.currLevel.bitrate=i,this.playlist.currLevelId=n,this.playlist.currLevel.url=e[n].url,this.mse.parser.switchLevel(),this.play();break}}else this.playlist.currLevel.url=t.url,this.playlist.currLevel.bitrate=i,this.mse.parser.switchLevel(),this.play()}},{key:"isPlaying",get:function(){return this.videoStatus!==b}},{key:"hasPicture",get:function(){return this.isPlaying&&0!==this.mse.getCurrentTime()}}]),t}(),Mo=function(){function t(){Object(v.a)(this,t),this.comDim=new m.default,this.coreDim=new m.default,this.actDim=new m.default,this.extDim=new m.default,this.comFormatMap=new m.default,this.coreMap=new m.default,this.compMap=new m.default,this.heart_type=0,this.create_time=F.a.now()}return Object(g.a)(t,[{key:"setCreateTime",value:function(t){isNaN(t)||(this.create_time=t)}},{key:"reset",value:function(){this.comDim.clear(),this.coreDim.clear(),this.actDim.clear(),this.extDim.clear(),this.coreMap.clear(),this.compMap.clear(),this.heart_type=0,this.create_time=F.a.now()}},{key:"createAct",value:function(t,e){return this._createAct(t,e)}},{key:"createActs",value:function(t){var e=[];if(t)for(var i=0;i<t.length;i++){var n=t[i],r=this._createAct(n.type,n.params);e.push(r)}return e}},{key:"_createAct",value:function(t,e){var i={sMetricName:"yspwl.web.live.user.act",vField:{},vDimension:{}};if(i.vDimension[Ge]=t,i.vDimension.create_time=F.a.now()-this.create_time,this._fillFromMap(i.vDimension,this.comDim),this._fillFromMap(i.vDimension,this.actDim),e){var n=0;if(e.hasOwnProperty(x)){var r=e[x];for(n=0;n<r.length;n++)i.vField[x+(n+1)]=r[n]}if(e.hasOwnProperty(j)){var o=e.str;for(n=0;n<o.length;n++)i.vDimension[j+(n+1)]=o[n]}e.hasOwnProperty("dim")&&(0,P.default)(i.vDimension,e.dim)}return i.vDimension.appid=N.appid,this.actDim.clear(),i}},{key:"fill",value:function(t,e){e?(this.heart_type=2,this._fill(t),this.heart_type=0):this._fill(t)}},{key:"_fill",value:function(t){if(0!=this.coreMap.size||0!=this.compMap.size){var e={sMetricName:"yspwl.web.live.user.heart20",vField:{},vDimension:{},vExLog:{}};this.coreDim.set(It,this.heart_type),this._fillFromMap(e.vDimension,this.comDim),this._fillFromMap(e.vDimension,this.coreDim),this._fillFromMap(e.vExLog,this.extDim),this._fillFromMap(e.vField,this.coreMap),this._fillComp(e.vDimension),this.coreDim.clear(),this.extDim.clear(),this.coreMap.clear(),this.compMap.clear(),0==this.heart_type&&(this.heart_type=1),e.vDimension.appid=N.appid,t.push(e)}}},{key:"_fillComp",value:function(t){var e,i=Object(ui.a)(this.compMap.keys());try{for(i.s();!(e=i.n()).done;){var n,r=e.value,o=this._getCompMapFormat(r),a=o.get("ref")||",",s=o.get("split")||";",u=this.compMap.get(r),c="",l=Object(ui.a)(u.keys());try{for(l.s();!(n=l.n()).done;){var h=n.value;c.length>0&&(c+=s),c+=h+a+u.get(h)}}catch(t){l.e(t)}finally{l.f()}t[r]=c}}catch(t){i.e(t)}finally{i.f()}}},{key:"_fillFromMap",value:function(t,e){var i,n=Object(ui.a)(e.keys());try{for(n.s();!(i=n.n()).done;){var r=i.value;t[r]=e.get(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"setComDim",value:function(t,e){this.comDim.set(t,e)}},{key:"setCoreDim",value:function(t,e){this.coreDim.set(t,e)}},{key:"setActDim",value:function(t,e){this.actDim.set(t,e)}},{key:"setExtDim",value:function(t,e){this.extDim.set(t,e)}},{key:"delDim",value:function(t){this.comDim.has(t)?this.comDim.delete(t):this.coreDim.has(t)?this.coreDim.delete(t):this.actDim.has(t)&&this.actDim.delete(t)}},{key:"setCore",value:function(t,e){this.coreMap.set(t,e)}},{key:"addCore",value:function(t,e){this._addValue(this.coreMap,t,e)}},{key:"setComp",value:function(t,e,i){this._getCompMap(t).set(e,i)}},{key:"addComp",value:function(t,e,i){var n=this._getCompMap(t);this._addValue(n,e,i)}},{key:"setCompFormat",value:function(t,e,i){var n=this._getCompMapFormat(t);n.set("ref",e),n.set("split",i)}},{key:"_getCompMapFormat",value:function(t){if(this.comFormatMap.has(t))return this.comFormatMap.get(t);var e=new m.default;return this.comFormatMap.set(t,e),e}},{key:"_getCompMap",value:function(t){if(this.compMap.has(t))return this.compMap.get(t);var e=new m.default;return this.compMap.set(t,e),e}},{key:"_addValue",value:function(t,e,i){if(t.has(e)){var n=t.get(e);t.set(e,n+i)}else t.set(e,i)}}]),t}(),Uo=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){return Object(v.a)(this,i),e.call(this)}return Object(g.a)(i,[{key:"_createAct",value:function(t,e){var i={sMetricName:"yspwl.web.vod.user.act",vField:{},vDimension:{}};if(i.vDimension[Ge]=t,this._fillFromMap(i.vDimension,this.comDim),this._fillFromMap(i.vDimension,this.actDim),e){var n=0;if(e.hasOwnProperty(x)){var r=e[x];for(n=0;n<r.length;n++)i.vField[x+(n+1)]=r[n]}if(e.hasOwnProperty(j)){var o=e.str;for(n=0;n<o.length;n++)i.vDimension[j+(n+1)]=o[n]}e.hasOwnProperty("dim")&&(0,P.default)(i.vDimension,e.dim)}return i.vDimension.appid=N.appid,this.actDim.clear(),i}},{key:"_fill",value:function(t){if(0!=this.coreMap.size||0!=this.compMap.size){var e={sMetricName:"yspwl.web.vod.user.heart20",vField:{},vDimension:{},vExLog:{}};this.coreDim.set(It,this.heart_type),this._fillFromMap(e.vDimension,this.comDim),this._fillFromMap(e.vDimension,this.coreDim),this._fillFromMap(e.vExLog,this.extDim),this._fillFromMap(e.vField,this.coreMap),this._fillComp(e.vDimension),this.coreDim.clear(),this.extDim.clear(),this.coreMap.clear(),this.compMap.clear(),0==this.heart_type&&(this.heart_type=1),e.vDimension.appid=N.appid,t.push(e)}}}]),i}(Mo);window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;var Do=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).audioContext=null,t.playing=!1,t.audio=null,t.analyser=null,t.source=null,t.timer=0,t}return Object(g.a)(i,[{key:"reset",value:function(){this.playing=!1}},{key:"createAudioContext",value:function(t){if(t)try{this.audio!=t&&(this.audio=t,this.audioContext=new AudioContext,this.source=this.audioContext.createMediaElementSource(t),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination)),this.playing=!0,this.loop(2e3)}catch(t){E.a.log("createAudioContext err:"+t)}}},{key:"loop",value:function(t){if(this.playing&&this.analyser&&this.analyser.fftSize){this.audio&&!this.audio.error&&this.playing&&(clearTimeout(this.timer),this.timer=setTimeout(this.loop.bind(this),t,t));var e=this.analyser.fftSize,n=new Uint8Array(e);this.analyser.getByteFrequencyData(n),n.some((function(t){return t}))?this.emit(i.AUDIO_FREQUENCY,{value:1}):this.emit(i.AUDIO_FREQUENCY,{value:0})}}}]),i}(bi.EventEmitter),Bo=Do;Do.AUDIO_FREQUENCY="AUDIO_FREQUENCY";var Fo=[T.H264_SEI_PLAY,T.AUDIO_SOUND,T.SIGNAL_DATA,T.UPDATE_INTERSITY,T.SIGNAL_HEART,T.METADATA,T.TRANS_END,T.PLAY_DOWNLINK_INFO,T.PLAY_FRAME_BUFFER,T.PLAY_TIME_STATUS,T.PLAYBACK_UPDATE,T.PLAYBACK_M3U8_UPDATED,T.SEI_INFO,"VIDEO_TIMEUPDATE","VIDEO_PROGRESS"],xo=i(36),jo=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Object(v.a)(this,i),(n=e.call(this,r)).duration=t,n.lastTs=0,n}return Object(g.a)(i,[{key:"addCur",value:function(t,e){On(Object(Cn.a)(i.prototype),"addCur",this).call(this,t,e),this.samples.addCur(t),this.calculate(e)}},{key:"calculate",value:function(t){0===this.lastTs?this.lastTs=t:t-this.lastTs>=this.duration&&(this.lastTs=t,this.samples.calculate())}},{key:"onCheckFastTimer",value:function(t,e){this.calculate(t)}}]),i}(jn),Vo=function(){function t(){Object(v.a)(this,t),this.recvTotalSample=new jo(1e3),this.recvLanSample=new jo(1e3),this.realFlacSample=new Vn}return Object(g.a)(t,[{key:"start",value:function(){Ji.add(this.onCheckFastTimer,this,100)}},{key:"stop",value:function(){Ji.remove(this.onCheckFastTimer,this)}},{key:"onCheckFastTimer",value:function(t,e){this.recvTotalSample.onCheckFastTimer(t,e),this.recvLanSample.onCheckFastTimer(t,e)}},{key:"addTotalSample",value:function(t){this.recvTotalSample.addCur(t,F.a.now())}},{key:"recordStat",value:function(t,e){this._recordStat(t,"recv_total_sample",this.recvTotalSample,!0,e),this._recordStat(t,"recv_lan_sample",this.recvLanSample,!0,e),this._recordStat(t,"real_flac_kbps_sample",this.realFlacSample)}},{key:"_recordStat",value:function(t,e,i,n,r){if(i.hasSample){var o=i.getResult();""!==o&&(i.reset(),n?t.setCoreDim(e,"type:".concat(r?2:t.heart_type,",").concat(o)):t.setCoreDim(e,o))}}},{key:"addLanSample",value:function(t){this.recvLanSample.addCur(t,F.a.now())}}]),t}(),Go=function(){function t(e){Object(v.a)(this,t),this.handler=e,this._duration=0,this._pauseTs=0}return Object(g.a)(t,[{key:"reset",value:function(){this._duration=0}},{key:"pause",value:function(){0===this._pauseTs&&(this._pauseTs=F.a.now())}},{key:"resume",value:function(){this.calc(!0)}},{key:"calc",value:function(t){if(this._pauseTs>0){var e=F.a.now();this._duration+=e-this._pauseTs,this._duration<0&&(this._duration=0),this._pauseTs=t?0:e}}},{key:"getRoomStat",value:function(){this.calc(!1);var t={duration:this._duration};return this.reset(),t}}]),t}(),Ho=function(){function t(e){Object(v.a)(this,t),this.handler=e,this.sessionId=this.handler.sdkInRoomTs,this.lastRealTime=0,this.repeatPicTs=0,this.noRenderTs=0,this.roomNoRenderStat=new Go(this),this.roomNoRenderStat.pause(),this.liveType=1,this.anchoruid=0}return Object(g.a)(t,[{key:"reset",value:function(){this.lastRealTime=0,this.repeatPicTs=0,this.noRenderTs=0}},{key:"getMetric",value:function(){var t={sMetricName:"yspwl.web.liveroom.user.heart1",vDimension:{},vExLog:{},vField:{}};return E.a.log("RoomRecord.getMetric","repeatPicTs = ".concat(this.repeatPicTs,", noRenderTs=").concat(this.noRenderTs)),t.vDimension.session_id=this.sessionId,t.vDimension.now_ts=this.sessionId,t.vDimension[V]=this.liveType,this.repeatPicTs<0?t.vField[ni]=0:t.vField[ni]=this.repeatPicTs,t.vField.max_no_render_du=0,this.noRenderTs>=6e4&&(this.noRenderTs=6e4),t.vField.no_render_duration=this.noRenderTs,t}},{key:"fillCore",value:function(t,e){if(e.core)for(var i in e.core)t[i]=e.core[i]}},{key:"fillComp",value:function(t,e,i){if(e.hasOwnProperty(i)){var n="",r=e[i];for(var o in r)n.length>0&&(n+=";"),n+=o+","+r[o];""!==n&&(t[i]=n)}}},{key:"fillFlow",value:function(t,e){if(e.bw)for(var i in e.bw){var n=e.bw[i];n>0&&(t[i]=n)}}},{key:"onCheckTimer",value:function(t,e){var i=this.handler.getFrameData();if(i&&i.pts>0){var n=i.pts;n<this.lastRealTime&&(this.repeatPicTs+=this.lastRealTime-n),this.lastRealTime=n}if(e%60==0){this.getPauseStat();var r=this.getMetric();this.handler.trigger(T.DATA_METRIC2,[r]),this.reset()}}},{key:"getPauseStat",value:function(){var t=this.roomNoRenderStat.getRoomStat().duration;this.noRenderTs=t}}]),t}(),Wo=function(){function t(e){Object(v.a)(this,t),this.samples=new ci(e),this.maxSize=e,this.lastTs=0,this.isOver=!1,this.callback=null}return Object(g.a)(t,[{key:"getResult",value:function(){for(var t=this.samples.getSamples(),e=t.length,i=[],n=0;n<e;n++)i.push("".concat(n+1,":").concat(t[n]));return i.join(",")}},{key:"start",value:function(t){this.isOver=!1,this.callback=t,Ji.add(this.onCheckTime,this,20)}},{key:"stop",value:function(){this.callback=null,this.samples.reset(),this.lastTs=0,Ji.remove(this.onCheckTime,this)}},{key:"setOver",value:function(){if(!this.isOver){this.isOver=!0;var t=this.getResult();E.a.log("FastSample.over result=".concat(t)),this.callback&&this.callback(t),this.stop()}}},{key:"add",value:function(t){if(!this.isOver){this.samples.addCur(t);var e=F.a.now();0===this.lastTs?this.lastTs=e:this._checkSample(e)}}},{key:"onCheckTime",value:function(t){this._checkSample(t)}},{key:"_checkSample",value:function(t){this.lastTs>0&&t-this.lastTs>500&&(this.lastTs=t,this.samples.calculate(),this.samples.getSamples().length===this.maxSize&&this.setOver())}}]),t}(),qo="heart",Ko=null,Yo=function(){if(null==Ko)try{var t=document.createElement("canvas").getContext("experimental-webgl"),e=t.getExtension("WEBGL_debug_renderer_info");Ko=t.getParameter(e.UNMASKED_RENDERER_WEBGL)}catch(t){Ko="",E.a.log("RenderInfo.getRenderInfo",t.message)}return Ko},zo=0,Jo=function(){function t(e,i){Object(v.a)(this,t),this._id=zo++,this.eventEmitter=e,this.stat=i.stat,this.tsdb=i.tsdb,this.statSwitch=i.statSwitch,this.sampleController=i.sampleController,this.h265Proxy=i.h265Proxy,this.autoMonitor=i.autoMonitor,this.recSysStat=i.recSysStat,this.info=null,this.isH265Playing=!1,this.playerType=-1,this.started=!1,this.heart20Ts=0,this.pauseCnt=0,this.pauseTime=0,this.pauseCnt5=0,this.pauseTime5=0,this.pauseCnt60Sec=0,this.pauseStartTs=0,this.pauseReason=0,this.pauseCheckLock=!1,this.videoStatus=b,this.isSwitchPause=!1,this._useAV1=!1,this.isAV1MediaSupported=this.checkAV1MediaSupported(),this.resetAiProps(),this.videoBadList=[],this.fastSample=new Wo(20),this.onFastSampleOverBind=this.onFastSampleOver.bind(this),this.p2pFlvPlayer=i.p2pFlvPlayer,this.videoFpsList=[],this.startFps=!1,this._hyPlayer=i.hyPlayerIns}return Object(g.a)(t,[{key:"on302",value:function(t){}},{key:"onConnected",value:function(){this.p2pFlvPlayer.onConnected()}},{key:"onPlayVideo",value:function(t,e,i,n,r,o,a){this.info&&this.info.isAuto&&0===Number(B.autoCfg.close)&&(this.p2pFlvPlayer.ctrlBitrate.start(this.getMse(),{sessionId:this.info._sessionId,startBitrate:this.info._startBitrate,bitrateList:this.info.bitrateList,curBitrate:this.info.curBitrate}),this.p2pFlvPlayer._triggerAutoChanged());var s=this.getMse();s&&s.setParams(this.info.presenterUid,this.info.curBitrate),this.stat.setComDim(X,e+"*"+i),this.h265Proxy.needPreload&&this.h265Proxy.loadDecoder(this.info.h5Root,null),this.stat.setComDim(J,Yo())}},{key:"_startContinueBuffer",value:function(){var t=this.getMse();t&&t.buffered.start()}},{key:"onPlayPause",value:function(t,e){this.pauseStartTs=t,this.pauseCheckLock=!1,this.isSwitchPause=!0,this.autoMonitor.setPause(t,this.getBufferLen()),e&&this.updateStatus(I)}},{key:"onPlayResume",value:function(t,e){this._checkPaused(t,"resume"),e&&this.updateStatus(w)}},{key:"_checkPaused",value:function(t,e){if(this.pauseStartTs>0){var i=t-this.pauseStartTs;if(i>=200){E.a.warn("IPlayer(".concat(this._id,")._checkPaused type=").concat(e," pauseTime=").concat(i));var n=this.getMse(),r=0;n&&(n.buffered._calc(t,ar),r=n.getContinueBuffer()),this.autoMonitor.addBadQuality(t,i,e,r),this.pauseCnt++,this.pauseTime+=i,this.pauseCnt5++,this.pauseTime5+=i,this.p2pFlvPlayer.ctrlBitrate.addBadQuality(t,i,this.getBufferLen()),this.pauseCnt60Sec++;var o=this._getBadReason(t);E.a.warn("IPlayer(".concat(this._id,")._checkPaused curReason=").concat(o," lastReason=").concat(this.pauseReason)),(0===this.pauseReason||o<this.pauseReason)&&(this.pauseReason=o)}else this.autoMonitor.resetPausedTs();this.pauseStartTs=e===qo?t:0}e===qo&&this._autoReportSea()}},{key:"_getBadReason",value:function(t){return 0}},{key:"_autoReportSea",value:function(){}},{key:"updateStatus",value:function(t){this.videoStatus!==t&&(this.videoStatus=t,this.eventEmitter.trigger(_.PLAY_STATUS,{status:t}))}},{key:"onErrorEvent",value:function(t){3===t.type&&this.p2pFlvPlayer.ctrlBitrate._badStat.setNoIFrame()}},{key:"getMse",value:function(){return null}},{key:"onHeader",value:function(t){t.hasOwnProperty("cdncip")&&this.stat.setComDim("cdn_cip",t.cdncip),t.hasOwnProperty("cdnsip")&&(this.cdnsip=t.cdnsip,this.stat.setComDim(nt,t.cdnsip)),t.hasOwnProperty("alt-svc")&&this.stat.setComDim("alt_svc",t["alt-svc"]),t.hasOwnProperty("x-hy-quic")&&this.stat.setComDim("quic",t["x-hy-quic"])}},{key:"getBufferLen",value:function(){return 0}},{key:"getWaitBufferLen",value:function(){return 0}},{key:"getWaitFrameTime",value:function(t){return 0}},{key:"triggerVideoBadQuality",value:function(){this.eventEmitter.trigger(_.VIDEO_BAD_QUALITY)}},{key:"trigger",value:function(t,e){this.eventEmitter.trigger(t,e)}},{key:"onFastSampleOver",value:function(t){var e=[this.stat.createAct("fast_sample",{str:[t]})];this.tsdb.sendMetrics(e)}},{key:"startFastSample",value:function(){this.fastSample.start(this.onFastSampleOverBind)}},{key:"addBytes",value:function(t){this.sampleController.addTotalSample(t),this.fastSample.add(t)}},{key:"init",value:function(t){}},{key:"start",value:function(t){this.stop(),Ji.add(this.getVideoBadQuality,this,2e4),this.sampleController.start(),this.startFps=!1,Ji.add(this.onIPlayerCheckTimer,this,1e3)}},{key:"stop",value:function(){this.isH265Playing=!1,this.heart20Ts=0,this.videoBadList=[],this.pauseCnt60Sec=0,this.isSwitchPause=!1,this.fastSample.stop(),this.sampleController.stop(),Ji.remove(this.timeoutRecSysRsp,this),Ji.remove(this.getVideoBadQuality,this),Ji.remove(this.getVideoLoad,this),Ji.remove(this.pauseGetRecSysRspOnce,this),Ji.remove(this.onIPlayerCheckTimerBind,this),this.startFps=!1}},{key:"getVideoBadQuality",value:function(){}},{key:"pauseGetRecSysRsp",value:function(t){var e={info:this.info,type:"flv",metadata:null};1===t?(e.type="p2p",e.metadata=this.player?this.player.msePlayer.metadata:null,e.reason=U.turnToFlvReason.VIDEO_BUFFER_EMPTY):0===t&&(e.type="flv",e.metadata=this.mse.metadata);var i=10*~~(3e3*Math.random()/10);Ji.once(this.pauseGetRecSysRspOnce,this,i,e)}},{key:"pauseGetRecSysRspOnce",value:function(t,e,i){this.getRecSysRsp(i)}},{key:"startP2PUrl",value:function(t){}},{key:"stopStream",value:function(t){}},{key:"checkPcdnMode",value:function(t,e){if(this.info){this.info.usePcdn=this._getUsePcdn(t),localStorage.usePcdn&&(this.info.usePcdn=1),this.p2pMgr&&this.p2pMgr.stream&&(this.p2pMgr.stream.usePcdn=this._checkUsePcdn()),this.stat.setComDim("force_sub_type",this.info.usePcdn);var i=this._getPcdnName(e);""!=i&&null!=i&&this.stat.setComDim(rt,i)}}},{key:"_checkUsePcdn",value:function(){return this.info.isAuto&&Number(B.closePcdn500)===this.info.curBitrate?0:this.info.usePcdn}},{key:"checkAV1MediaSupported",value:function(){return MediaSource.isTypeSupported('video/mp4; codecs="av01.0.08M.08"')}},{key:"setUseAV1",value:function(t){this._useAV1=t}},{key:"isUseAV1",value:function(t){this._useAV1=B.useAV1;var e=!0;return this._hyPlayer.noLoadAv1Count&&(e=this._hyPlayer.noLoadAv1Count<3),this.isAV1MediaSupported&&this._useAV1&&e&&L.getAv1Random(t,B.av1PercentConfig)&&1==Number(B.abUseAv1)}},{key:"_getUsePcdn",value:function(t){return 0}},{key:"_getPcdnName",value:function(){return""}},{key:"setEnableLowLatency",value:function(t){}},{key:"setPlaybackrateAccess",value:function(t){}},{key:"setVolume",value:function(t){}},{key:"getCurrentTime",value:function(){return 0}},{key:"getFrameData",value:function(){return null}},{key:"resetAiProps",value:function(){this.aiP2PCnt=0,this.aiFlvCnt=0,this.aiP2PTimeoutCnt=0,this.aiFlvTimeoutCnt=0,this.aiP2PErrorCnt=0,this.aiFlvErrorCnt=0,this.aiP2PSwitchCnt=0,this.aiFlvSwitchCnt=0,this.aiP2PNotSwitchCnt=0,this.aiFlvNotSwitchCnt=0,this.aiFlvErrorNotSwitchCnt=0,this.aiFlvErrorSwitchCnt=0}},{key:"recordAiP2PFlv",value:function(t){"p2p"==t?this.aiP2PCnt++:"flv"==t&&this.aiFlvCnt++}},{key:"initAiReq",value:function(t,e,i,n,r,o){var a=new yn.RecSysReq;a.tId.iAppid=N.appid,a.tId.lUid=N.uid,a.tId.sGuid=N.sGuid,a.tId.sUA="webh5",a.sAnchorUid=t.presenterUid,a.sRoomId=N.roomId,a.iScene=6,a.bDebug=1,a.mAppendInfo.value={streamType:e,expVideoFps:i&&null!=i.fps?i.fps:0,expAudioFps:i&&null!=i.audioFps?i.audioFps:0,codeRate:t.curBitrate,isOriginal:0==t.originalBitrate?1:0,line:o,codeType:this.isH265?"265":"264",sStreamName:t.sStreamName,playType:n,isServer:0,iIsP2PSupport:t.iIsP2PSupport};var s=(0,P.default)({},a);return E.a.log("IPlayer(".concat(this._id,").getRecSysRsp.req"),a,(0,p.default)(s)),a}},{key:"getRecSysRsp",value:function(t,e){t.info;var i=t.type;return t.reason,t.metadata,t.isNotAi,F.a.now(),this.recordAiP2PFlv(i),void this.recSysRspHandler(!1,null,t)}},{key:"getAiStat",value:function(){var t={};this._hyPlayer&&this._hyPlayer.getAiStartStat&&(t=this._hyPlayer.getAiStartStat()),this.aiP2PSwitchCnt+=t.aiStartFlvCnt;var e={aiP2PCnt:this.aiP2PCnt,aiFlvCnt:this.aiFlvCnt,aiP2PTimeoutCnt:this.aiP2PTimeoutCnt,aiFlvTimeoutCnt:this.aiFlvTimeoutCnt,aiP2PErrorCnt:this.aiP2PErrorCnt,aiFlvErrorCnt:this.aiFlvErrorCnt,aiP2PSwitchCnt:this.aiP2PSwitchCnt,aiFlvSwitchCnt:this.aiFlvSwitchCnt,aiP2PNotSwitchCnt:this.aiP2PNotSwitchCnt,aiFlvNotSwitchCnt:this.aiFlvNotSwitchCnt,aiStartP2PCnt:t.aiStartP2PCnt||0,aiStartFlvCnt:t.aiStartFlvCnt||0,aiFlvErrorSwitchCnt:this.aiFlvErrorSwitchCnt,aiFlvErrorNotSwitchCnt:this.aiFlvErrorNotSwitchCnt};return this.resetAiProps(),e}},{key:"timeoutRecSysRsp",value:function(){if(this.isTimeout){var t=this.aiP2PFlvProps,e=t.type;if(t.isNotFirstFetch)return;"p2p"==e?this.aiP2PTimeoutCnt++:"flv"==e&&(this.aiFlvTimeoutCnt++,t.isFlvError&&this.aiFlvErrorSwitchCnt++),this.recSysRspHandler(!1,null,t),this.isResTimeout=!0}}},{key:"onPause5Sec",value:function(){this.eventEmitter&&(E.a.log("IPlayer(".concat(this._id,").onPause5Sec")),this.eventEmitter.trigger(_.PAUSE_5SEC_ERROR))}},{key:"onIPlayerCheckTimer",value:function(t,e){if(this.mse&&this.mse.parser&&this.mse.parser.fps){this.startFps||(this.startFps=!0,this.mse.parser.fps.getCalculate());var i=this.mse.parser.fps.getRecvFps();this.videoFpsList.push(i)}}},{key:"recordRecvFps",value:function(t){var e=this.videoFpsList,i="",n=[];e.map((function(t,e){i="k"+(e+1)+":"+t,n.push(i)})),t.setCoreDim("v_recv_frames",n.join(",")),n=[],this.videoFpsList=[]}},{key:"hasPicture",get:function(){return!1}},{key:"isPlaying",get:function(){return!1}}]),t}(),Qo=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t,n){var r;return Object(v.a)(this,i),(r=e.call(this,t,n)).playerParams=n,r.player=null,r.updating=!1,r.seeking=!1,r.waitSeekTime=0,r.onSeekBind=r.onSeek.bind(Object(sn.a)(r)),r.onM3u8UpdatedBind=r.onM3u8Updated.bind(Object(sn.a)(r)),r.m3u8UpdateTime=30,r}return Object(g.a)(i,[{key:"start",value:function(t){t.isLive=!1,On(Object(Cn.a)(i.prototype),"start",this).call(this,t),t.m3u8UpdateTime&&(this.m3u8UpdateTime=Number(t.m3u8UpdateTime)),this.seeking=!0,this.player=new No(this.eventEmitter,this.playerParams),this.player.start(t),Ji.add(this.onCheckTimer,this,1e3),this.eventEmitter.on(_.VIDEO_SEEK,this.onSeekBind),this.eventEmitter.on(_.PLAYBACK_M3U8_UPDATED,this.onM3u8UpdatedBind)}},{key:"seek",value:function(t){this.player&&this.player.playlist&&(this.seeking=!0,this.player.playlist.totalDuration-t<30?(this.waitSeekTime=t,this.eventEmitter.trigger(_.NEED_UPDATE_M3U8)):(this.waitSeekTime=0,this.player.seek(t)))}},{key:"onSeek",value:function(t,e){this.seeking=!1}},{key:"onM3u8Updated",value:function(t,e){E.a.log("PlaybackPlayer.onM3u8Updated totalDuration=".concat(e.totalDuration)),this.waitSeekTime&&(this.player.seek(this.waitSeekTime),this.waitSeekTime=0),this.updating=!1}},{key:"stop",value:function(){this.player&&(this.player.stop(),this.player=null),this.seeking=!1,Ji.remove(this.onCheckTimer,this),this.eventEmitter.off(_.VIDEO_SEEK,this.onSeekBind),this.eventEmitter.off(_.PLAYBACK_M3U8_UPDATED,this.onM3u8UpdatedBind)}},{key:"setVolume",value:function(t){this.player&&this.player.setVolume(t)}},{key:"onCheckTimer",value:function(t,e){!this.updating&&this.needUpdate()&&(this.updating=!0,this.eventEmitter.trigger(_.NEED_UPDATE_M3U8)),!this.seeking&&this.player&&this.player.mse&&this.player.playlist&&this.eventEmitter.trigger(_.PLAYBACK_UPDATE,{currentTime:this.player.mse.getCurrentTime(),totalDuration:this.player.playlist.totalDuration})}},{key:"needUpdate",value:function(){if(this.player&&this.player.mse&&this.player.playlist){var t=this.player.mse.getCurrentTime()/1e3;if(t>0){var e=this.player.playlist.totalDuration;if(e>0)return e-t<this.m3u8UpdateTime}}return!1}},{key:"updateLiveVodUrl",value:function(t){this.player&&this.player.updateLiveVodUrl(t)}},{key:"getDurationTime",value:function(){return this.player?this.player.getDurationTime():0}}]),i}(Jo),Xo=-1,Zo=-1,$o=function(){function t(e,i,n){Object(v.a)(this,t),this.tsdb=e,this.stat=i,this.autoMonitor=null,this.recSysStat=null,this.autoForce=null,this.handler=n}return Object(g.a)(t,[{key:"init",value:function(t,e,i){this.autoMonitor=t,this.recSysStat=e,this.autoForce=i}},{key:"check",value:function(t,e){if(!isNaN(t.lineType)&&!isNaN(t.curBitrate)&&-1!==t.lineType){if(this.stat.setComDim(gt,this.handler.autoUserTags),-1!==Xo){var i=null;if(Xo!==t.lineType)i=this.stat.createAct("switch_line",{value:[Xo,t.lineType]});else{var n=1e3*t.curBitrate,r=1e3*Zo,o=e?1:0,a=0;e?Zo!==t.curBitrate&&(a=2):t&&1==t.pullStreamFrom&&(a=1);var s=[n,r,o,a,0,0,1,t.bitrateList?t.bitrateList.length:0];1==a&&this.handler&&(s[8]=F.a.now()-this.handler.inRoomTimeNow),1===o&&(this.recSysStat.recordAct(this.stat),1===a&&(this.autoForce.addForce(),this.recSysStat.removeItem(1))),this.autoMonitor.addSwitch(F.a.now(),n,r,a),i=this.stat.createAct("switch_bitrate",{value:s}),E.a.log("StatSwitch.reportSwitchBitrate value4=".concat(a," metric="),i)}i&&this.tsdb.sendMetrics([i])}Xo=t.lineType,Zo=t.curBitrate,e=t.isAuto}}},{key:"sendSwitchAuto",value:function(t){1===t[0]?this.stat.addComp(Ie,"up_cnt",1):2===t[0]?this.stat.addComp(Ie,"down_cnt",1):3===t[0]&&this.stat.addComp(Ie,"back_cnt",1),this.stat.setComDim(gt,this.handler.autoUserTags);var e=this.stat.createAct("switch_auto",{value:t});this.tsdb.sendMetrics([e])}},{key:"sendSwitchCost",value:function(t,e){this.stat.setComDim(gt,this.handler.autoUserTags),this._sendMetric("switch_cost",t,e)}},{key:"sendSwitchPts",value:function(t,e){this.stat.setComDim(gt,this.handler.autoUserTags),this._sendMetric("switch_pts",t,e)}},{key:"_sendMetric",value:function(t,e,i){var n=this.stat.createAct(t,{value:e,str:i});this.tsdb.sendMetrics([n])}}]),t}(),ta=i(21),ea=i.n(ta),ia=function(){function t(e,i){Object(v.a)(this,t),this.stat=e,this.tsdb=i,this.isP2PUseH265=!0,this.isFlvUseH265=!0,this.costUs=0,this.isCodecSupport=!1,this.isBrowserSupport=!1,this.isCfgSupport=!1}return Object(g.a)(t,[{key:"onTurntoH264",value:function(t){2===t?this.isP2PUseH265=!1:1===t&&(this.isFlvUseH265=!1)}},{key:"init",value:function(t){this.isCodecSupport=!1,this.isBrowserSupport=!1,this.isCfgSupport=!1,this._initCodec(t),this._initBrowser(),this._initRandom(t),this._initCfg(),E.a.log("H265Support.init isCodecSupport=".concat(this.isCodecSupport," isBrowserSupport=").concat(this.isBrowserSupport," isCfgSupport=").concat(this.isCfgSupport))}},{key:"_initCodec",value:function(t){var e=arguments;if(1==localStorage.open265&&(localStorage.w265LastCost=0),this.isReport265||5===t.type||(this.tsdb.sendMetrics([this.stat.createAct(ti,{value:[10],str:[L.is64bitSoftware()?1:2]})]),this.tsdb.sendMetrics([this.stat.createAct(ti,{value:[5],str:[navigator.hardwareConcurrency]})]),E.a.log("HYPlayer.initH265 support hardwareConcurrency hardwareConcurrency=",navigator.hardwareConcurrency),this.isReport265=!0),this._isSupported(t)&&ea.a&&ea.a.getInstance){var i={enableWebH265:1,baseCostUs:{2e3:32e3,4e3:3e4},loopCount:100,singleThreadBitKbps:[10],multiThreadBitKbps:[4e3,2e3,500],threadCount:2,degrade:0,statIntervalMs:1e3,fmt:11,share:0,wasmLoad:500,core:{2e3:3,4e3:4},x86:{4e3:1}},n={};L.is64bitSoftware()||(B.h265Config[3][1][1]=B.h265Config2[0]),1==Number(B.h265Config2[1])?i.x86={4e3:1}:i.x86={4e3:0},B.h265Config[0][0].forEach((function(t,e){n[t]=B.h265Config[0][1][e]})),i.baseCostUs=n,i.multiThreadBitKbps=B.h265Config[1];var r={};B.h265Config[3][0].forEach((function(t,e){r[t]=B.h265Config[3][1][e]})),i.core=r,1===Number(localStorage._enable4000Bitrate)&&(i.multiThreadBitKbps=[4e3,2e3,500],i.core=2),ea.a.getInstance().parseConfigs(i);var o=ea.a.getInstance().isSupportH265(0===t.originalBitrate?0:t.curBitrate),a=window.screen.height;1!=B.isH265Filter4MCfg[0]||4e3!=t.curBitrate||L.isGameIdSupport265(B.h265GameIds,t.gameId)?1==B.isH265Filter4MCfg[1]&&4e3==t.curBitrate&&-1!=navigator.userAgent.indexOf("Macintosh")?(o.isSupport=!1,o.reason=101):1==B.isH265Filter4MCfg[2]&&4e3==t.curBitrate&&a<(B.isH265Filter4MCfg[3]||1080)&&(o.isSupport=!1,o.reason=102):(o.isSupport=!1,o.reason=100),E.a.log("H265Support.initH265 bitRate",0===t.originalBitrate?0:t.curBitrate,o),this.isCodecSupport=o.isSupport,this.costUs=o.costUs,this.tsdb.sendMetrics([this.stat.createAct(ti,{value:[2],str:[o.reason]})]),ea.a.getInstance().setLogCallback((function(){var t=["H265 render setLogCallback"].concat(Array.apply(null,e));E.a.log.apply(E.a,t)}))}}},{key:"_isSupported",value:function(t){var e;return e=t.iIsHEVCSupport>0&&t.iHEVCBitRate>=0||this._isH265(t.iCodecType)&&0===t.iBitRate,1===t.type?this.isFlvUseH265&&e:2===t.type&&this.isP2PUseH265&&e}},{key:"_isH265",value:function(t){return 1===t||4===t||6===t||8===t}},{key:"_initBrowser",value:function(){var t=D.a.version.major,e=!1;D.a.chrome&&t>=B.h265Config[2]&&(e=!0),1===Number(localStorage._enableBrowser)&&(e=!0),this.isBrowserSupport=e}},{key:"_initRandom",value:function(t){var e=this._getRandomUse(t);this.isCodecSupport&&(e?this.stat.setComDim("backup_field2",1):(this.isCodecSupport=!1,this.stat.setComDim("backup_field2",2))),t.randomH265=e}},{key:"_getRandomUse",value:function(t){var e=localStorage.h265PresentUid,i=t.presenterUid,n=!0;if(B.h265BlackUids.forEach((function(t){i&&t.toString()==i.toString()&&(n=!1)})),!n)return!1;localStorage.randomH265Percent&&e==i||(localStorage.randomH265Percent=B.randomH265Percent),1==localStorage.open265?localStorage.randomH265Percent=3e3:2==localStorage.open265&&(localStorage.randomH265Percent=6e3);var r=Number(localStorage.randomH265Percent);return localStorage.h265PresentUid=t.presenterUid,r<B.h265PercentConfig}},{key:"_initCfg",value:function(){this.isCfgSupport=1===Number(B.isConfigSupportH265)}},{key:"isSupported",get:function(){return this.isCodecSupport&&this.isBrowserSupport&&this.isCfgSupport||1===Number(localStorage._enableForceH265)}},{key:"canPreload",get:function(){return this.isBrowserSupport&&this.isCfgSupport}}]),t}(),na=function(){function t(e,i){Object(v.a)(this,t),this._stat=e,this._tsdb=i,this._onMessageBind=this._onMessage.bind(this),this._onErrorBind=this._onError.bind(this),this._startTs=0,this._readyTs=0,this._isReady=!1,this._isTimeout=!1,this._isError=!1,this._decoder=null,this._callbacks=null,this._onMessageCb=null}return Object(g.a)(t,[{key:"terminate",value:function(){E.a.log("H265Decoder.terminate"),this._destroyDecoder(),Ji.remove(this._onTimeout,this),this._callbacks=null,this._onMessageCb=null,this._isReady=!1,this._startTs=0,this._readyTs=0}},{key:"destroy",value:function(){E.a.log("H265Decoder.destroy"),this._stat=null,this._tsdb=null,this.stopDecoder()}},{key:"_destroyDecoder",value:function(){if(this._decoder){this._decoder.onmessage=null,this._decoder.onerror=null,this.stopDecoder();try{this._decoder.terminate()}catch(t){E.a.log("H265Decoder._destroyDecoder",t)}this._decoder=null}}},{key:"stopDecoder",value:function(){this._decoder&&this._decoder.postMessage({t:6})}},{key:"load",value:function(t,e){if(this._callbacks=e,this._decoder)this._callbacks&&this._callbacks.ready();else{var i=D.a.chrome&&D.a.version.major>=91;1==Number(localStorage._unSupportSimd)&&(i=!1),E.a.log("H265Decoder.load"),this._startTs=F.a.now();var n='importScripts("'.concat(t+(i?"decoder.worker.simd.js":"decoder.worker.js"),'")'),r=new Blob([n],{type:"application/javascript"}),o=window.URL.createObjectURL(r),a=new Worker(o);a.onmessage=this._onMessageBind,a.onerror=this._onErrorBind,this._decoder=a,Ji.once(this._onTimeout,this,1e3)}}},{key:"_onMessage",value:function(e){switch(e.data.t){case 0:this._decoder.postMessage({t:1});break;case 2:E.a.log("H265Decoder._onMessage worker isReady!"),Ji.remove(this._onTimeout,this),t.preloaded=!0,this._isReady=!0,this._readyTs=F.a.now();var i=this._readyTs-this._startTs;this._tsdb.sendMetrics([this._stat.createAct("h265_worker_load_ts",{value:[i]})]),this._isError||this._isTimeout||this._callbacks&&this._callbacks.ready()}this._onMessageCb&&this._onMessageCb(e)}},{key:"_onError",value:function(t){E.a.error("H265Decoder._onError",t),this._tsdb.sendMetrics([this._stat.createAct(ti,{value:[1],str:[11]})]),this._destroyDecoder(),Ji.remove(this._onTimeout,this),this._readyTs=0,this._isReady=!1,this._isError=!0,localStorage.h265WorkerError=1,this._callbacks&&this._callbacks.error()}},{key:"_onTimeout",value:function(){E.a.log("H265Decoder._onTimeout"),this._destroyDecoder(),this._readyTs=0,this._isTimeout=!0,this._isReady=!1,this._callbacks&&this._callbacks.timeout()}},{key:"onMessageCb",set:function(t){this._onMessageCb=t}},{key:"decoder",get:function(){return this._decoder}},{key:"isReady",get:function(){return this._isReady}}]),t}();na.preloaded=!1;var ra=na,oa=i(56).default,aa=function(){function t(e,i){Object(v.a)(this,t),this._stat=e,this._tsdb=i,this._support=new ia(e,i),this._decoder=new ra(e,i),this._render=new oa(e,i),this._renderInited=!1,this._rendering=!1}return Object(g.a)(t,[{key:"stop",value:function(){E.a.log("H265Proxy.stop"),this._rendering=!1,this._renderInited=!1,this._decoder.stopDecoder(),this._render&&this._render.destroy&&this._render.destroy()}},{key:"destroy",value:function(){this._render.destroy(),this._support.destroy(),this._decoder.destroy(),this._stat=null,this._tsdb=null,this._render=null,this._support=null,this._decoder=null}},{key:"initSupport",value:function(t){this._support.init(t)}},{key:"loadDecoder",value:function(t,e){this._decoder.load(t,e)}},{key:"initRender",value:function(t){this.isSupported&&(E.a.log("H265Proxy.initRender isSupported=".concat(this._support.isSupported," isReady=").concat(this._decoder.isReady)),this._rendering=!1,this._renderInited=!1,this._render.destroy(),this.isReady&&(this._renderInited=!0,this._render.attachMse(t)))}},{key:"terminate",value:function(){this._decoder.terminate()}},{key:"containerResize",value:function(t){this.rendering&&this._render.containerResize(t)}},{key:"pushVideoFrame",value:function(t,e){this._rendering=!0,this._render&&this._render.pushVideoFrame(t,e)}},{key:"onTurnToH264",value:function(t){this._rendering=!1,this._renderInited=!1,this._support.onTurntoH264(t)}},{key:"checkUrl",value:function(t){this.isReady&&-1===t.url.indexOf("codec=265")&&(t.url+="&codec=265")}},{key:"on265StartCodeError",value:function(t){this._render&&this._render.handlerError(t)}},{key:"reportDecodeRenderTime",value:function(t,e){this._render&&this._render.reportDecodeRenderTime(t,e)}},{key:"getStats",value:function(){return this._render.getStats()}},{key:"jumpBuffer",value:function(t,e,i,n){this._rendering&&this._render.jumpBuffer(t,e,i,n)}},{key:"render",get:function(){return this._render}},{key:"canvas",get:function(){return this._render.canvas}},{key:"decoder",get:function(){return this._decoder}},{key:"isSupported",get:function(){return this._support.isSupported}},{key:"isReady",get:function(){return this._support.isSupported&&this._decoder.isReady}},{key:"needPreload",get:function(){return!ra.preloaded&&this._support.canPreload&&!this._decoder.isReady}},{key:"renderInited",get:function(){return this._renderInited}},{key:"rendering",get:function(){return this._rendering}}]),t}(),sa=function(){function t(e){Object(v.a)(this,t),this.hyPlayer=e,this.hasEvent=!1,this.isSupported=void 0!==document.addEventListener&&void 0!==document.hidden,this.onVisibilitychangeBind=this.onVisibilitychange.bind(this),this.stat=null,this.hiddenTs=0,this.visibleTs=F.a.now(),this.lastStatHiddenTs=0}return Object(g.a)(t,[{key:"setStat",value:function(t){this.stat=t,this.onVisibilitychange(),this.addVisibilitychange()}},{key:"addVisibilitychange",value:function(){!this.hasEvent&&this.isSupported&&(this.hasEvent=!0,document.addEventListener("visibilitychange",this.onVisibilitychangeBind))}},{key:"delVisibilitychange",value:function(){this.hasEvent&&(this.hasEvent=!1,document.removeEventListener("visibilitychange",this.onVisibilitychangeBind))}},{key:"onVisibilitychange",value:function(){this.isSupported&&(E.a.log("Visibility.onVisibilitychange visibilityState=".concat(document.visibilityState)),this.stat&&this.stat.setComDim("visibility_state",document.visibilityState),this.hyPlayer.trigger(_.VISIBILITY_CHANGE),document.visibilityState===U.VISIBILITY_STATE.VISIBLE?this.visibleTs=F.a.now():document.visibilityState===U.VISIBILITY_STATE.HIDDEN&&(this.hiddenTs=F.a.now()))}},{key:"setHiddenTimeStat",value:function(){if(this.isSupported){var t=F.a.now(),e=0;0!=this.hiddenTs&&(document.visibilityState===U.VISIBILITY_STATE.HIDDEN&&this.hiddenTs>=this.visibleTs?e=t-this.hiddenTs:document.visibilityState===U.VISIBILITY_STATE.VISIBLE&&t-this.visibleTs<t-this.lastStatHiddenTs&&0!=this.lastStatHiddenTs&&(e=this.visibleTs-this.hiddenTs)),this.stat&&this.stat.setCore("visibility_hidden_time",e),this.lastStatHiddenTs=t}}}]),t}(),ua=function(){function t(){Object(v.a)(this,t),this._buffer=-1}return Object(g.a)(t,[{key:"reset",value:function(){this._buffer=-1}},{key:"buffer",get:function(){return this._buffer},set:function(t){(-1===this._buffer||t<this._buffer)&&(this._buffer=t<0?0:t)}}]),t}(),ca=function(){function t(){Object(v.a)(this,t),this._badBuffer=new ua}return Object(g.a)(t,[{key:"reset",value:function(){this._badBuffer.reset()}},{key:"setItem",value:function(t){this._badBuffer.buffer=t.badBuffer}},{key:"setBuffers",value:function(t){this._badBuffer.buffer=t}},{key:"badBuffer",get:function(){return this._badBuffer.buffer}}]),t}(),la=function(){function t(){Object(v.a)(this,t),this.autoBuffer=new ca,this.videoBuffer=new ca}return Object(g.a)(t,[{key:"reset",value:function(){this.autoBuffer.reset(),this.videoBuffer.reset()}}]),t}(),ha=function(){function t(){Object(v.a)(this,t),this.stat=null,this.endTs=0,this.pausedStartTs=0,this.isInTime=!1,this.switchType=0,this.switchCodecType=0,this.recordCodecType=0,this.heartType=0,this.monitorTime=Number(B.autoCfg.monitorTime),this.tempBuffer=new la,this.usefulBuffer=new la,this._continueBuffer=-1,this._badReasons=0,this._minReason=0}return Object(g.a)(t,[{key:"init",value:function(t){this.stat=t}},{key:"start",value:function(t,e){0===this.endTs&&(this._badReasons=0,this._minReason=0),this.switchType=t,this.switchCodecType=e,E.a.log("AutoSwitchMonitor.start"),this.endTs=F.a.now()+this.monitorTime,this.pausedStartTs>0&&(this.isInTime=!0,this.tempBuffer.autoBuffer.setItem(this.tempBuffer.videoBuffer)),this._checkStat(),Ji.add(this.onCheckTimer,this,100)}},{key:"_checkStat",value:function(){this.endTs>F.a.now()?(this.heartType=this._getHeartType(),this.recordCodecType=this.switchCodecType):(this.heartType=0,this.recordCodecType=0)}},{key:"recordHeartType",value:function(){this.stat.setCoreDim("auto_heart_type",this.heartType),this.stat.setCoreDim("auto_codec_change_type",this.recordCodecType),this.stat.setCoreDim("auto_bad_buffer",this.usefulBuffer.autoBuffer.badBuffer),this.stat.setCoreDim("video_bad_buffer",this.usefulBuffer.videoBuffer.badBuffer),this.stat.setCore("auto_continue_buffer",this._continueBuffer),this.usefulBuffer.reset(),this._continueBuffer=-1,this._checkStat()}},{key:"_getHeartType",value:function(){return 1===this.switchType?1:2}},{key:"stop",value:function(){this.endTs=0,Ji.remove(this.onCheckTimer,this)}},{key:"addBadReason",value:function(t){this._badReasons|=t;var e=(0,r.default)(t)+1;(0===this._minReason||this._minReason>e)&&(this._minReason=e)}},{key:"addSwitch",value:function(t,e,i,n){1===n&&(E.a.log("AutoSwitchMonitor.addSwitch, now=".concat(t,", value1=").concat(e,", value2=").concat(i,", value4=").concat(n)),this.stat.addCore("auto_switch_cnt",1),e===i&&this.stat.addCore("auto_switch_same_cnt",1),this.endTs>t&&(e===i&&this.stat.addCore("auto_bad_switch_same",1),1===this.switchType&&this.stat.addCore("auto_bad_switch_up",1),this.stat.addCore("auto_bad_switch",1)))}},{key:"addBadQuality",value:function(t,e,i,n){E.a.log("AutoSwitchMonitor.addBadQuality isIntime=".concat(this.isInTime," pausedStartTs=").concat(this.pausedStartTs," endTs=").concat(this.endTs," now=").concat(t)),this.usefulBuffer.videoBuffer.setItem(this.tempBuffer.videoBuffer),this.isInTime&&(this.usefulBuffer.autoBuffer.setItem(this.tempBuffer.autoBuffer),this.stat.addCore("auto_bad_quality",1),this.stat.addCore("auto_bad_duration",e),this.stat.setCoreDim("auto_bad_reason",this._badReasons),this.stat.setCoreDim("auto_bad_min_reason",this._minReason),this._continueBuffer=n,1===this.switchType&&(this.stat.addCore("auto_bad_quality_up",1),this.stat.addCore("auto_bad_duration_up",e))),i!==qo&&(this.pausedStartTs=0,this.isInTime=!1),this.tempBuffer.reset()}},{key:"onCheckTimer",value:function(t,e){t>=this.endTs&&(E.a.log("AutoSwitchMonitor.onCheckTimer stop."),this.stat.setCore("auto_bad_done",1),this.stop())}},{key:"resetPausedTs",value:function(){this.tempBuffer.reset(),this.pausedStartTs=0,this.isInTime=!1}},{key:"setPause",value:function(t,e){E.a.log("AutoSwitchMonitor.setPause now=".concat(t," buffer=").concat(e," endTs=").concat(this.endTs)),this.pausedStartTs=t,this.tempBuffer.videoBuffer.setBuffers(e),this.endTs>t?(this.isInTime=!0,this.tempBuffer.autoBuffer.setBuffers(e)):this.isInTime=!1}}]),t}(),da=function(){function t(e){Object(v.a)(this,t),this.scene=e,this.sDispatchId="",this.expiredTime=0}return Object(g.a)(t,[{key:"isExpired",value:function(t){return t>this.expiredTime}}]),t}(),fa=function(){function t(){Object(v.a)(this,t),this._sysMap=new m.default}return Object(g.a)(t,[{key:"addItem",value:function(t,e,i){E.a.log("RecSysStat.addItem scene=".concat(t," now=").concat(F.a.now()," expiredTime=").concat(i));var n=this._sysMap.get(t);n||(n=new da(t),this._sysMap.set(t,n)),n.sDispatchId=e,n.expiredTime=Number(i)||F.a.now()+6e4}},{key:"removeItem",value:function(t){this._sysMap.delete(t)}},{key:"recordAct",value:function(t){var e=this.getResult();e.length>0&&t.setActDim(Rt,e)}},{key:"recordHeart",value:function(t){var e=this.getResult();e.length>0&&t.setCoreDim(Rt,e)}},{key:"getResult",value:function(){var t=[],e=F.a.now();return this._sysMap.forEach((function(i){i.isExpired(e)||t.push("".concat(i.scene,":").concat(i.sDispatchId))})),t.join(",")}}]),t}(),pa="force_auto_count",ma="force_auto_effective_time",ya=localStorage,va=function(){function t(e,i){Object(v.a)(this,t),this._abConfig=i,this._forceCnt=0,this._sysForceCnt=0,this._effectiveTime=0,this._sysEffectiveTime=0,this._isInit=!1,this._closed=!1,e.on(T.AUTO_FORCE_RSP,this.onAutoForceRsp.bind(this))}return Object(g.a)(t,[{key:"_init",value:function(){if(!this._isInit)if(this._isInit=!0,this._sysEffectiveTime>0?this._effectiveTime=this._sysEffectiveTime:this._effectiveTime=Number(B.force_auto_effective_time),this._sysForceCnt>0)this._forceCnt=this._sysForceCnt,E.a.log("AutoForce._init useSys");else{this._forceCnt=Number(B.force_auto_count);var t=[],e=this._abConfig.getConfig("quitAutoCount");null!==e&&(this._forceCnt=Number(e),t.push("_forceCnt=".concat(this._forceCnt)));var i=this._abConfig.getConfig("isWebAutoABBBB");null!==i&&(this._closed=1===i,t.push("isWebAutoAB=".concat(i))),E.a.log("AutoForce._init ".concat(t.join(" ")))}}},{key:"onAutoForceRsp",value:function(t,e){var i=e.force_auto_count,n=e.force_auto_effective_time;E.a.log("AutoForce.onAutoForceRsp force_auto_count=".concat(i," force_auto_effective_time=").concat(n)),this._forceCnt=this._sysForceCnt=i,this._effectiveTime=this._sysEffectiveTime=1e3*n,this._checkEffective()}},{key:"addForce",value:function(){var t=Number(ya.getItem(pa))||0;ya.setItem(pa,t+1),E.a.log("AutoForce.addForce forceCnt=".concat(t+1)),this._checkEffective()}},{key:"_checkEffective",value:function(){(Number(ya.getItem(pa))||0)>=this._forceCnt&&!ya.hasOwnProperty(ma)&&(ya.setItem(ma,Date.now()+this._effectiveTime),E.a.log("AutoForce._checkEffective cooling"))}},{key:"getUseAuto",value:function(){if(this._init(),this._closed)return!1;if(ya.hasOwnProperty(ma)){var t=Number(ya.getItem(ma));if(Date.now()<t)return E.a.log("AutoForce.getUseAuto cooling!"),!1;ya.removeItem(pa),ya.removeItem(ma)}var e=Number(ya.getItem(pa))||0;return E.a.log("AutoForce.getUseAuto forceCnt=".concat(e," _forceCnt=").concat(this._forceCnt)),e<this._forceCnt}}]),t}(),ga=localStorage,_a=function(){function t(){Object(v.a)(this,t),this._isInit=!1,this._mpConfig=null}return Object(g.a)(t,[{key:"_init",value:function(){if(!this._isInit){E.a.log("AbConfigParser._init",ga.abConfig),this._isInit=!0;try{var t=JSON.parse(ga.abConfig);t&&t.mpConfig&&(this._mpConfig=t.mpConfig)}catch(t){E.a.log("AbConfigParser._init ".concat(t.message))}}}},{key:"getConfig",value:function(t){return this._init(),this._mpConfig&&this._mpConfig.hasOwnProperty(t)?this._mpConfig[t]:null}}]),t}(),Sa=function(){function t(e){Object(v.a)(this,t),this._abConfig=e,this._isInit=!1,this._pids=new n.default,this._lines=new n.default,this._bitrateMap=new m.default}return Object(g.a)(t,[{key:"_init",value:function(){var t=this;if(!this._isInit){E.a.log("BitrateChange._init"),this._isInit=!0;var e=this._abConfig.getConfig("pidList");null!==e&&0!==Number(e)&&e.split(",").forEach((function(e){t._pids.add(Number(e))}));var i=this._abConfig.getConfig("lineList");null!==i&&0!==Number(i)&&i.split(",").forEach((function(e){t._lines.add(Number(e))}));var n=this._abConfig.getConfig("bitrateList");null!==n&&0!==Number(n)&&(n=n.split(",")).forEach((function(e){var i=e.split(":");t._bitrateMap.set(Number(i[0]),Number(i[1]))}))}}},{key:"getBitrate",value:function(t,e,i){return this._init(),this._pids.has(Number(t))&&this._lines.has(Number(e))&&this._bitrateMap.has(Number(i))&&(i=this._bitrateMap.get(i)),i}}]),t}(),wa={isMacChrome72:function(){return"mac"===D.a.platform&&"chrome"===D.a.name&&72===Number(D.a.version.major)},isNeedAud:function(){return D.a.chrome&&D.a.version.major>=73},isBrowserSupport:function(){return D.a.firefox||D.a.opera||D.a.chrome&&53!=D.a.version.major||D.a.safari||D.a.edge||D.a.edg},isP2PCooling:function(){return 1===Number(B.needCooling)&&1===Number(localStorage.getItem("__p2p_cooling_play"))},isSupportP2P:function(){return this.isBrowserSupport()&&!this.isP2PCooling()},isWebrtcSupport:function(){try{var t=navigator.userAgent,e={Trident:t.indexOf("Trident")>0||t.indexOf("NET CLR")>0,Presto:t.indexOf("Presto")>0,WebKit:t.indexOf("AppleWebKit")>0,Gecko:t.indexOf("Gecko/")>0,UC:t.indexOf("UC")>0||t.indexOf(" UBrowser")>0,BaiDu:t.indexOf("Baidu")>0||t.indexOf("BIDUBrowser")>0,Maxthon:t.indexOf("Maxthon")>0,LBBROWSER:t.indexOf("LBBROWSER")>0,SouGou:t.indexOf("MetaSr")>0||t.indexOf("Sogou")>0,IE:t.indexOf("MSIE")>0||t.indexOf("Trident")>0,Firefox:t.indexOf("Firefox")>0,Opera:t.indexOf("Opera")>0||t.indexOf("OPR")>0,Safari:t.indexOf("Safari")>0,Chrome:t.indexOf("Chrome")>0||t.indexOf("CriOS")>0,Wechat:t.indexOf("MicroMessenger")>0,Windows:t.indexOf("Windows")>0,Linux:t.indexOf("Linux")>0,Mac:t.indexOf("Macintosh")>0,Android:t.indexOf("Android")>0||t.indexOf("Adr")>0,WP:t.indexOf("IEMobile")>0,BlackBerry:t.indexOf("BlackBerry")>0||t.indexOf("RIM")>0||t.indexOf("BB")>0,MeeGo:t.indexOf("MeeGo")>0,Symbian:t.indexOf("Symbian")>0,iOS:t.indexOf("like Mac OS X")>0,iPhone:t.indexOf("iPh")>0,iPad:t.indexOf("iPad")>0,Mobile:t.indexOf("Mobi")>0||t.indexOf("iPh")>0||t.indexOf("480")>0,Tablet:t.indexOf("Tablet")>0||t.indexOf("iPad")>0||t.indexOf("Nexus 7")>0,TheWorld:t.indexOf("TheWorld")>0};return e.Chrome&&(e.Chrome=!(e.Opera||e.BaiDu||e.Maxthon||e.SouGou||e.UC||e.LBBROWSER||e.TheWorld)),e.Chrome}catch(t){return!1}}},ba=function(){function t(e){Object(v.a)(this,t),this.flvPlayer=e,this.eventEmitter=e.eventEmitter,this.jumpToP2PCd=1e3*(Math.floor(120*Math.random())+180),this.nextJumpToP2PTs=0,this.waitPlayEnd=!1,this.lastP2PInfo=null}return Object(g.a)(t,[{key:"reset",value:function(){this.waitPlayEnd=!1}},{key:"initJumpTs",value:function(t){0==this.nextJumpToP2PTs&&(this.nextJumpToP2PTs=t+this.jumpToP2PCd)}},{key:"onCheckTimer",value:function(t,e){if(!this.waitPlayEnd&&wa.isSupportP2P()&&!(t<this.nextJumpToP2PTs)){var i=this.flvPlayer;if(this.lastP2PInfo&&!B.isCloseP2P(this.lastP2PInfo.uid)&&this.lastP2PInfo.lineType==i.lineType){var n=this.lastP2PInfo.sStreamName;n&&i.url&&-1!=i.url.indexOf(n)&&(i.getBufferLen()<i.mse.JITTER_BUFLEN||(i.loader&&(E.a.warn("BackToP2P.tryPlayP2P"),i.loader.close()),this.waitPlayEnd=!0))}}}},{key:"onCheckFastTimer",value:function(t,e){var i=this.flvPlayer.getBufferLen();this.waitPlayEnd&&i<1e3&&(this.waitPlayEnd=!1,this.jumpToP2PCd<18e5&&(this.jumpToP2PCd+=12e4),this.nextJumpToP2PTs=t+this.jumpToP2PCd,this.flvPlayer.getRecSysRsp({info:this.flvPlayer.info,type:"flv",metadata:this.flvPlayer.mse.metadata,isBackToP2P:!0}))}},{key:"recSysRspHandler",value:function(t,e,i){t&&e&&e.tRecSysInfo&&0==e.tRecSysInfo.lAction||(E.a.warn("BackToP2P.onCheckFastTimer jumpToP2PCd=".concat(this.jumpToP2PCd/6e4,"min")),this.eventEmitter.trigger(_.FLV_TRY_TO_P2P),this.lastP2PInfo=null)}}]),t}(),Ia=function(){function t(e){Object(v.a)(this,t),this.flvPlayer=e,this.stat=e.stat,this.tsdb=e.tsdb,this.img=null,this.isPaused=!1,this.isFirstReport=!0}return Object(g.a)(t,[{key:"sendFlow",value:function(t,e,i,n,r,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.record(t,e,i,n,r,o,a)}},{key:"getUserProperty",value:function(){var t=this.tsdb;return B[100]?B[101]?wa.isBrowserSupport()?wa.isP2PCooling()?U.userProperty.P2P_COOLING:1==t.turnToFlvTimes&&0==t.restartTimes?t.turnToFlvReason==U.turnToFlvReason.FULL_CONNECT_TIMEOUT?U.userProperty.FIRST_FULL_CONNECT_TIMEOUT:t.turnToFlvReason==U.turnToFlvReason.FULL_NO_DATA?U.userProperty.FIRST_FULL_NO_DATA:t.turnToFlvReason==U.turnToFlvReason.FULL_PLAY_FAIL?U.userProperty.FIRST_FULL_PLAY_FAIL:t.turnToFlvReason==U.turnToFlvReason.SUB_CONNECT_TIMEOUT?U.userProperty.SUB_CONNECT_TIMEOUT:t.turnToFlvReason==U.turnToFlvReason.SUB_NO_DATA?U.userProperty.SUB_NO_DATA:t.turnToFlvReason==U.turnToFlvReason.P2P_ARGS_ERROR?U.userProperty.P2P_ARGS_ERROR:t.turnToFlvReason==U.turnToFlvReason.P2P_COOLING?U.userProperty.P2P_COOLING:t.turnToFlvReason==U.turnToFlvReason.IS_NOT_FIRST_FETCH?U.userProperty.IS_NOT_FIRST_FETCH:t.turnToFlvReason==U.turnToFlvReason.VIDEO_BUFFER_EMPTY?U.userProperty.VIDEO_BUFFER_EMPTY:U.userProperty.UNKNOW:t.turnToFlvReason==U.turnToFlvReason.FULL_CONNECT_TIMEOUT||t.turnToFlvReason==U.turnToFlvReason.FULL_NO_DATA||t.turnToFlvReason==U.turnToFlvReason.FULL_PLAY_FAIL?t.restartReason==U.restartReason.RANGE_SEQ_MAX?U.userProperty.RESTART_RANGE_MAX:t.restartReason==U.restartReason.RANGE_SEQ_LARGE?U.userProperty.RESTART_RANGE_LARGE:t.restartReason==U.restartReason.CONNECT?U.userProperty.RESTART_CONNECT:t.restartReason==U.restartReason.MULTI_CDN?U.userProperty.RESTART_MUTI_CDN:t.restartReason==U.restartReason.PLAYER_NO_DATA?U.userProperty.RESTART_PLAYER_NO_DATA:t.restartReason==U.restartReason.PLAYER_ERROR?U.userProperty.RESTART_PLAYER_ERROR:t.restartReason==U.restartReason.FLV_TO_P2P?U.userProperty.FLV_TO_P2P:t.restartReason==U.restartReason.LOST_SEQ?U.userProperty.LOST_SEQ:U.userProperty.UNKNOW:t.turnToFlvReason==U.turnToFlvReason.SUB_CONNECT_TIMEOUT?U.userProperty.SUB_CONNECT_TIMEOUT:t.turnToFlvReason==U.turnToFlvReason.SUB_NO_DATA?U.userProperty.SUB_NO_DATA:t.turnToFlvReason==U.turnToFlvReason.P2P_ARGS_ERROR?U.userProperty.P2P_ARGS_ERROR:t.turnToFlvReason==U.turnToFlvReason.P2P_COOLING?U.userProperty.P2P_COOLING:t.turnToFlvReason==U.turnToFlvReason.IS_NOT_FIRST_FETCH?U.userProperty.IS_NOT_FIRST_FETCH:t.turnToFlvReason==U.turnToFlvReason.VIDEO_BUFFER_EMPTY?U.userProperty.VIDEO_BUFFER_EMPTY:U.userProperty.UNKNOW:U.userProperty.BROWSER_UN_SUPPORT:U.userProperty.CLIENT_CLOSE:U.userProperty.SERVER_CLOSE}},{key:"record",value:function(t,e,i,n,r,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.volumeEnergy=o,i&&(this.isPaused=!0);var s=this.getUserProperty();this.stat.setCoreDim(bt,s),this.stat.setCoreDim(Tt,0),this.stat.setComDim(yt,this.flvPlayer.mse.JITTER_BUFLEN);var u=this.flvPlayer.mse.parser.timeStampStat,c=[];u.reset();var l=this.flvPlayer.info;this.stat.setCoreDim(_t,i?100:0),this.stat.setCoreDim(St,i||t>0?100:0),this.stat.setCoreDim(wt,r),this.stat.setCore(Wt,this.flvPlayer.getBufferLen()+this.flvPlayer.getFrameBufferLen()),this.stat.setCore(qt,this.flvPlayer.getBufferLen()),this.stat.setCore($t,this.flvPlayer.getFrameBufferLen()),this.flvPlayer._hyPlayer&&this.flvPlayer._hyPlayer.visibility&&this.flvPlayer._hyPlayer.visibility.setHiddenTimeStat&&this.flvPlayer._hyPlayer.visibility.setHiddenTimeStat(),this.recordSample(),this.recordAuto(),this.flvPlayer.recSysStat.recordHeart(this.stat),this.flvPlayer.mse.buffered.record(this.stat),this.flvPlayer.mse.pauseStat.record(this.stat),this.flvPlayer.autoMonitor.recordHeartType();var h=this.flvPlayer.mse.metadata,d=h.recvVideoFps,f=h.recvAudioFps;this.stat.setComp(Lt,Ut,f),this.stat.setComp(Lt,Dt,d);var p=this.flvPlayer.mse.bufStat.getStats(),m=p.emptyTime,y=p.emptyCnt;if(this.stat.setComp(Lt,xt,y),this.stat.setComp(Lt,Ft,m),this.flvPlayer.h265Proxy.rendering){var v=this.flvPlayer.h265Proxy.getStats(),g=v.statProps,_=v.h265PauseCnt;for(var S in g)"toDecode"==S?this.recordH265Frame(g[S],lt):"decoded"==S?this.recordH265Frame(g[S],ht):"render"==S?this.recordH265Frame(g[S],dt):"rawList"==S?this.recordH265Frame(g[S],ct):"frameList"==S?this.recordH265Frame(g[S],ft):this.stat.setComp(Vt,S,g[S].join("|"));this.stat.setCoreDim(Pt,_>0?100:0)}this.flvPlayer._hyPlayer&&this.flvPlayer._hyPlayer.costUs>0&&this.stat.setComp(Vt,"costUs",this.flvPlayer._hyPlayer.costUs);var w=this.flvPlayer.loader.speed;this.stat.setComp(Lt,jt,w);var b=this.flvPlayer.mse.curVideoDts,I=this.flvPlayer.mse.curAudioDts;this.stat.setComp(Lt,Mt,b),this.stat.setComp(Lt,Nt,I),this.stat.setCompFormat(Lt,":",","),this.flvPlayer.recordRecvFps(this.stat),this.recordC2CDelay(),this.flvPlayer.mse.metadata&&this.flvPlayer.mse.metadata.codecname&&this.stat.setComDim(Q,this.flvPlayer.mse.metadata.codecname),this.isFirstReport?this.isFirstReport=!1:c.push({sMetricName:oi.METRIC.VIDEO_BAD_QUALITY_RATIO,vField:{value:this.isPaused?100:0,pausecnt:t},vDimension:{p2p:0,originalBitrate:0===l.originalBitrate?1:0,p2pCooling:N.p2pCooling?1:0,topSid:l.sid,reason:r,quality:i||t>0?100:0},vExLog:{cdnip:this.flvPlayer.cdnip}}),this.stat.setComDim(Z,this.flvPlayer.cdnip),this.recordAiData(),this.recordMuteData(),this.stat.fill(c,a),this.tsdb.sendMetrics(c),this.isPaused=!1}},{key:"recordSample",value:function(t){this.flvPlayer.sampleController.recordStat(this.stat,t),this.flvPlayer.mse.parser.avSample.recordStat(this.stat)}},{key:"recordAuto",value:function(){var t=this.flvPlayer.p2pFlvPlayer.ctrlBitrate;t&&(this.stat.setCoreDim(Et,t._switchUpReason),this.stat.setCoreDim(kt,t._switchDownReason))}},{key:"recordH265Frame",value:function(t,e){var i=this;this.stat.setComp(e,"size",t.length),t.map((function(t,n){i.stat.setComp(e,"k"+(n+1),t),i.stat.setCompFormat(e,":",",")}))}},{key:"recordAiData",value:function(){var t=this.flvPlayer.getAiStat(),e=t.aiP2PCnt,i=t.aiFlvCnt,n=t.aiP2PTimeoutCnt,r=t.aiFlvTimeoutCnt,o=t.aiP2PErrorCnt,a=t.aiFlvErrorCnt,s=t.aiP2PSwitchCnt,u=t.aiFlvSwitchCnt,c=t.aiP2PNotSwitchCnt,l=t.aiFlvNotSwitchCnt,h=t.aiFlvErrorSwitchCnt,d=t.aiFlvErrorNotSwitchCnt,f=t.aiStartP2PCnt,p=t.aiStartFlvCnt;this.stat.setComp(ke,Re,e),this.stat.setComp(ke,Ce,i),this.stat.setComp(ke,Oe,n),this.stat.setComp(ke,Ae,r),this.stat.setComp(ke,Le,o),this.stat.setComp(ke,Ne,a),this.stat.setComp(ke,Me,s),this.stat.setComp(ke,Ue,u),this.stat.setComp(ke,De,c),this.stat.setComp(ke,Be,l),this.stat.setComp(ke,Fe,h),this.stat.setComp(ke,xe,d),this.stat.setComp(ke,je,f),this.stat.setComp(ke,Ve,p),this.stat.setCompFormat(ke,":",",")}},{key:"recordMuteData",value:function(){if(this.flvPlayer._hyPlayer&&this.flvPlayer._hyPlayer.getMuteStat&&this.flvPlayer._hyPlayer.getMuteStat){var t=this.flvPlayer._hyPlayer.getMuteStat().muteData,e=[];t.map((function(t){var i=[];i.push(t.value),i.push(t.type),i.push(t.currentDts),i.push(t.reqKey),i.push(t.begin),i.push(t.end),e.push(i.join(":"))})),this.stat.setCoreDim(mt,e.join(","))}}},{key:"recordC2CDelay",value:function(){var t=this.flvPlayer.mse.getDelayStat();if(t){for(var e in t.fields)this.stat.setCore(e,t.fields[e]);for(var i in t.dims)this.stat.setCoreDim(i,t.dims[i])}}}]),t}(),Ta=function(){function t(e,i){Object(v.a)(this,t),this.eventEmitter=e,this.mse=i,this.tickCnt=0}return Object(g.a)(t,[{key:"reset",value:function(){this.tickCnt=0}},{key:"onCheckTimer",value:function(t,e){this.tickCnt++,4!==this.tickCnt&&this.tickCnt%10!=0||this.trigger()}},{key:"trigger",value:function(){var t={};(0,P.default)(t,this.mse.metadata),this.eventEmitter.trigger(T.METADATA,t)}}]),t}(),Pa=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;Object(v.a)(this,t),this.linkHandler=e,this.ws=null,this.connected=!1,this.isYY=i,this.url=null,this.avgSpeed=new ci(n)}return Object(g.a)(t,[{key:"destroy",value:function(){this.linkHandler=null,this.reset(),Ji.remove(this.onCheckTimer,this)}},{key:"connect",value:function(t){this.reset(),Ji.add(this.onCheckTimer,this,1e3),this.url=t,this.ws=new WebSocket(t),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onopen.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onclose=this.onclose.bind(this),this.ws.onmessage=this.onmessage.bind(this)}},{key:"reset",value:function(){this.ws&&(this.connected=!1,this.ws.onopen=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.onmessage=null,this.ws.close(),this.ws=null),this.url=null,this.avgSpeed.reset()}},{key:"send",value:function(t){this.ws&&this.connected&&this.ws.send(t)}},{key:"onopen",value:function(){this.connected=!0,this.linkHandler&&this.linkHandler.onopen()}},{key:"onerror",value:function(t){E.a.log("ProtoLink.onerror event="+t),this.connected=!1,this.ws=null,this.linkHandler&&(this.linkHandler.onerror(t),this.linkHandler=null)}},{key:"onclose",value:function(){this.connected=!1,this.ws=null,this.linkHandler&&(this.linkHandler.onclose(),this.linkHandler=null)}},{key:"onmessage",value:function(t){this.avgSpeed.addCur(t.data.byteLength),t.data instanceof ArrayBuffer?this.processArrayBuffer(t.data):this.processText(t.data)}},{key:"processText",value:function(t){E.a.log("ProtoLink.processText data="+t)}},{key:"processArrayBuffer",value:function(t){if(this.isYY)for(var e=new DataView(t),i=0,n=0,r=0;i+10<t.byteLength;){if(i+(n=e.getUint32(i,!0))>t.byteLength||n<10)return void E.a.error("ProtoLink.processArrayBuffer length error pktLen="+n+" bufferLen="+t.byteLength);r=e.getUint32(i+4,!0);var o=new DataView(t,i,n);this.linkHandler&&this.linkHandler.onData(r,o),i+=n}else this.linkHandler&&this.linkHandler.onData(t)}},{key:"onCheckTimer",value:function(t,e){this.connected&&this.avgSpeed.calculate()}},{key:"speed",get:function(){return this.avgSpeed.average()}}]),t}(),Ea=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(v.a)(this,t),this.linkHandler=e,this.connected=!1,this.url=null,this.xhr=null,this.avgSpeed=new ci(i)}return Object(g.a)(t,null,[{key:"isSupported",value:function(){try{var t=new XMLHttpRequest;return t.open("GET","https://example.com",!0),t.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===t.responseType}catch(t){return E.a.warn("MozChunkedLoader",t.message),!1}}}]),Object(g.a)(t,[{key:"destroy",value:function(){this.reset(),this.linkHandler=null,Ji.remove(this.onCheckTimer,this)}},{key:"reset",value:function(){this.abort(),this.url=null,this.xhr=null,this.connected=!1,this.avgSpeed.reset()}},{key:"abort",value:function(){this.xhr&&(E.a.log("ProtoLinkXhrFF abort"),this.xhr.abort())}},{key:"connect",value:function(t){this.reset(),this.url=t;var e=this.xhr=new XMLHttpRequest;e.responseType="moz-chunked-arraybuffer",e.open("GET",this.url,!0),e.onerror=this.onerror.bind(this),e.onprogress=this.onprogress.bind(this),e.onloadend=this.loadend.bind(this),e.onload=this.onclose.bind(this),e.send(),Ji.add(this.onCheckTimer,this,1e3)}},{key:"onprogress",value:function(t){this.connected||this.onopen();var e=t.target.response;this.linkHandler.onData(e),this.avgSpeed.addCur(e.byteLength)}},{key:"onreadystatechange",value:function(t){}},{key:"onopen",value:function(){this.connected=!0,this.linkHandler&&this.linkHandler.onopen()}},{key:"onerror",value:function(t){E.a.log("ProtoLinkXhrFF.onerror "+t);var e=t.currentTarget.status;this.connected=!1,this.linkHandler&&(this.linkHandler.onerror(t,e),this.linkHandler=null)}},{key:"loadend",value:function(t){404===t.currentTarget.status&&this.onerror(t)}},{key:"onclose",value:function(){E.a.log("ProtoLinkXhrFF.onclose"),this.connected=!1,this.linkHandler&&(this.linkHandler.onclose(),this.linkHandler=null)}},{key:"onCheckTimer",value:function(t,e){this.connected&&this.avgSpeed.calculate()}},{key:"speed",get:function(){return this.avgSpeed.average()}}]),t}(),ka=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(v.a)(this,t),this.linkHandler=e,this.connected=!1,this.url=null,this.requestAbort=!1,this.controller=null,this.reader=null,this.avgSpeed=new ci(i)}return Object(g.a)(t,[{key:"destroy",value:function(){this.abort(),this.linkHandler=null,this.reset(),Ji.remove(this.onCheckTimer,this)}},{key:"reset",value:function(){this.url=null,this.connected=!1,this.avgSpeed.reset()}},{key:"pump",value:function(t){var e=this;t.read().then(function(i){if(i.done)e.onclose();else if(!e.checkAbort(t)){var n=i.value.buffer;e.avgSpeed.addCur(n.byteLength),e.linkHandler&&e.linkHandler.onData(n),e.pump(t)}}.bind(this))}},{key:"checkAbort",value:function(t){return!!this.requestAbort&&(this.requestAbort=!1,t.cancel(),!0)}},{key:"connect",value:function(t){var e=this;Ji.add(this.onCheckTimer,this,1e3),this.url=t;var i=null;window.AbortController&&((i=new AbortController).signal,this.controller=i),fetch(t).then((function(t){Number(localStorage._printFetchUrl)&&E.a.log("FetchUrl",t.url);var i=t.body.getReader();e.reader=i,e.checkAbort(i)||(e.linkHandler&&e.linkHandler.onstatus&&e.linkHandler.onstatus(t.status),t.ok&&t.status>=200&&t.status<300?(e.onheader(t),t.redirected&&e.on302(t),e.onopen(),e.pump.call(e,i)):(E.a.log("ProtoLinkFetch http code invalid status:"+t.status),e.onerror(t.statusText,t.status)))})).catch((function(t){E.a.log("ProtoLinkFetch exception"),e.onerror(t.message)}))}},{key:"abort",value:function(){if(this.requestAbort=!0,this.reader&&this.reader.cancel&&(E.a.log("ProtoLinkFetch.abort reader"),this.reader.cancel(),this.reader=null),this.controller&&this.controller.abort)return E.a.log("ProtoLinkFetch.abort controller"),this.controller.abort(),void(this.controller=null)}},{key:"on302",value:function(t){E.a.log("ProtoLinkFetch.on302 url=".concat(t.url)),this.linkHandler.on302&&this.linkHandler.on302(t.url)}},{key:"onheader",value:function(t){var e,i={},n=[],r=Object(ui.a)(t.headers);try{for(r.s();!(e=r.n()).done;){var o=lr(e.value,2),a=o[0],s=o[1];i[a]=s,n.push(a+":"+s)}}catch(t){r.e(t)}finally{r.f()}E.a.log("ProtoLinkFetch.onheader",n.join(" | ")),this.linkHandler.onheader&&this.linkHandler.onheader(i)}},{key:"onopen",value:function(){this.connected=!0,this.linkHandler&&this.linkHandler.onopen()}},{key:"onerror",value:function(t,e){E.a.log("ProtoLinkFetch.onerror "+t),this.connected=!1,this.linkHandler&&(this.linkHandler.onerror(t,e),this.linkHandler=null)}},{key:"onclose",value:function(){this.connected=!1,this.linkHandler&&(this.linkHandler.onclose(),this.linkHandler=null)}},{key:"onCheckTimer",value:function(t,e){this.connected&&this.avgSpeed.calculate()}},{key:"speed",get:function(){return this.avgSpeed.average()}}]),t}(),Ra=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(v.a)(this,t),this.flvPlayer=e,e.hyPlayer&&(this.hyPlayer=e.hyPlayer,this.stat=e.hyPlayer.stat),this._newLink(),this.needRetry=i,this.status=0,this.url=null,this.started=!1,this.lastGetProxyTime=0,this.getProxyPeriod=t.DEFAULT_GET_PROXY_PERIOD,this.headers=null}return Object(g.a)(t,[{key:"_newLink",value:function(){D.a.firefox&&Ea.isSupported()?this.link=new Ea(this):wa.isMacChrome72()?this.link=new Pa(this):this.link=new ka(this)}},{key:"abort",value:function(){this.link.destroy()}},{key:"reset",value:function(){this.lastGetProxyTime=0,this.status=0,this.url=null,this.started&&(E.a.log("FlvLoader.reset"),this.link.destroy(),this._newLink())}},{key:"connect",value:function(t){t?(this.link instanceof Pa&&(t=t.replace("http","ws")),this.reset(),this.lastGetProxyTime=F.a.now()-2e3,E.a.log("FlvLoader.connect url="+t,this.lastGetProxyTime),this.headers=null,this.url=t,this.link.connect(this.url),this.started=!0):E.a.warn("FlvLoader.connect url is null")}},{key:"close",value:function(){E.a.log("FlvLoader.close"),this.reset(),this.started=!1}},{key:"onstatus",value:function(t){this.status=t}},{key:"onheader",value:function(t){this.headers=t,E.a.log("FlvLoader.onheader",t),this.flvPlayer&&this.flvPlayer.onHeader&&this.flvPlayer.onHeader(t)}},{key:"onopen",value:function(){E.a.log("FlvLoader.onopen"),this.getProxyPeriod=t.DEFAULT_GET_PROXY_PERIOD,this.flvPlayer.onConnected()}},{key:"onclose",value:function(){localStorage.hasOwnProperty("_toPcdn")||(E.a.log("FlvLoader.onclose"),this.flvPlayer.onClosed(),this.lastGetProxyTime=0,this.needRetry&&this.getProxy())}},{key:"onerror",value:function(t,e){E.a.log("FlvLoader.onerror",e),this.lastGetProxyTime=0,this.needRetry&&this.getProxy(),this.flvPlayer.onLoadError&&this.flvPlayer.onLoadError(t)}},{key:"onData",value:function(t){this.flvPlayer.onData(t,1)}},{key:"onCheckTimer",value:function(t,e){if(this.started&&(this.onCheckConnect(t),e%10==0)){var i=this.link.speed;i!=L.UintMax&&(i=L.formatByteSize(i),E.a.log("FlvLoader speed ".concat(i,"/s")))}}},{key:"onCheckConnect",value:function(t){this.connected||(this.needRetry?this.getProxy():t-this.lastGetProxyTime>15e3&&0!=this.lastGetProxyTime&&this.flvPlayer&&this.flvPlayer.onLoadTimeout&&(this.flvPlayer.onLoadTimeout(),this.lastGetProxyTime=0))}},{key:"getProxy",value:function(){var t=F.a.now();t-this.lastGetProxyTime<this.getProxyPeriod||(E.a.log("FlvLoader.getProxy lastGetProxyTime="+this.lastGetProxyTime+" now="+t+" period="+this.getProxyPeriod),this.reset(),this.lastGetProxyTime=t,this.getProxyPeriod=Math.min(2*this.getProxyPeriod,128e3),this.flvPlayer.requestUrl())}},{key:"speed",get:function(){var t=this.link.speed;return t==L.UintMax&&(t=0),t}},{key:"connected",get:function(){return this.link&&this.link.connected}}]),t}();Ra.DEFAULT_GET_PROXY_PERIOD=4e3;var Ca=Ra,Oa="loaded",Aa="error",La="timeout",Na=new m.default,Ma=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t){var n;return Object(v.a)(this,i),(n=e.call(this))._libName=t,n._script=null,n._loaded=!1,n._onLoadBind=n._onLoad.bind(Object(sn.a)(n)),n._onErrorBind=n._onError.bind(Object(sn.a)(n)),n}return Object(g.a)(i,[{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;if(this._loaded)this.trigger(Oa);else{var i=this._script;i||((i=document.createElement("script")).async=!0,i.onload=i.onreadystatechange=this._onLoadBind,i.onerror=this._onErrorBind,i.src=t.endsWith("/")?t+this._libName:t+"/"+this._libName,document.getElementsByTagName("head")[0].appendChild(i),this._script=i,Ji.once(this._onTimeout,this,e))}}},{key:"_onLoad",value:function(){var t=this._script,e=t.readyState;e&&"loaded"!==e&&"complete"!==e||(t.onload=t.onreadystatechange=null,this._loaded=!0,Ji.remove(this._onTimeout,this),this.trigger(Oa))}},{key:"_onTimeout",value:function(){this._clear(),this.trigger(La)}},{key:"_onError",value:function(){this._clear(),this.trigger(Aa)}},{key:"_clear",value:function(){var t=this._script;t&&(t.onload=t.onreadystatechange=t.onerror=null,t.src="",t.parentNode&&t.parentNode.removeChild(t),this._script=null)}}]),i}(hn),Ua=function(t,e,i){var n=i.onLoaded,r=void 0===n?null:n,o=i.onError,a=void 0===o?null:o,s=i.onTimeout,u=void 0===s?null:s,c=i.thisObj,l=void 0===c?null:c,h=i.timeout,d=void 0===h?6e4:h,f=Na.get(e);return f||(f=new Ma(e),Na.set(e,f)),r&&f.on(Oa,r,l),a&&f.on(Aa,a,l),u&&f.on(La,u,l),f.load(t,d),f},Da=function(t,e){var i=e.onLoaded,n=void 0===i?null:i,r=e.onError,o=void 0===r?null:r,a=e.onTimeout,s=void 0===a?null:a,u=e.thisObj,c=void 0===u?null:u,l=Na.get(t);l&&(n&&l.off(Oa,n,c),o&&l.off(Aa,o,c),s&&l.off(La,s,c))},Ba={ppio:"ppio",xy:"xy"},Fa={ppio:"EcdnLive.js",xy:"XYLive.js"},xa={},ja=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this))._pcdnName="",t._loader=null,t._lastDataTs=0,t._started=!1,t._speed=new ci(10),t._callbacks={onLoaded:t._onLoadLibSUc,onError:t._onLoadLibErr,thisObj:Object(sn.a)(t)},t._binds={},t._binds.LOAD_FAIL=t._onLoadFail.bind(Object(sn.a)(t)),t._binds.GATHER_SUC=t._onGatherSuc.bind(Object(sn.a)(t)),t._binds.GATHER_FAIL=t._onGatherFail.bind(Object(sn.a)(t)),t._binds.DATA=t._onData.bind(Object(sn.a)(t)),t._binds.LOAD_STOP=t._onLoadStop.bind(Object(sn.a)(t)),t._binds.LOAD_FINISH=t._onLoadFinish.bind(Object(sn.a)(t)),t._binds.SDK_DESTROYED=t._sdkDestroy.bind(Object(sn.a)(t)),t}return Object(g.a)(i,[{key:"setPcdnName",value:function(t){this._pcdnName=t}},{key:"isLibReady",value:function(){return xa[this._pcdnName]}},{key:"loadLib",value:function(t){this.isLibReady()?this.trigger(i.BaseEvents.LIB_READY,{type:i.BaseEvents.LIB_READY,isFirst:!1}):Ua(t,Fa[this._pcdnName],this._callbacks)}},{key:"_onLoadLibSUc",value:function(){Da(Fa[this._pcdnName],this._callbacks),this._hasInterface()?(xa[this._pcdnName]=1,this.trigger(i.BaseEvents.LIB_READY,{type:i.BaseEvents.LIB_READY,isFirst:!0})):this.trigger(i.BaseEvents.LIB_ERR,{type:i.BaseEvents.LIB_ERR,msg:"".concat(this._pcdnName," has no constructor!")})}},{key:"_hasInterface",value:function(){return this._pcdnName===Ba.ppio?!!window.EcdnLive:this._pcdnName===Ba.xy&&!!window.xyvp&&!!window.xyvp.Loader}},{key:"_createLoader",value:function(){this._pcdnName===Ba.ppio?this._loader=new window.EcdnLive({appId:"huya",debug:!1,logLevel:""}):this._pcdnName===Ba.xy&&(this._loader=new window.xyvp.Loader),this._doPcdnEvents(!0)}},{key:"_destroyLoader",value:function(){this._loader&&(this._doPcdnEvents(!1),this._loader.stopLoad(),this._loader.stopPeerGather(),this._loader.destroy(),this._loader=null)}},{key:"_doPcdnEvents",value:function(t){if(this._loader)for(var e in this._binds)t?this._loader.on(e,this._binds[e]):this._loader.off(e,this._binds[e])}},{key:"_onLoadLibErr",value:function(){this.trigger(i.BaseEvents.LIB_ERR,{type:i.BaseEvents.LIB_ERR,msg:"".concat(this._pcdnName," load_fail")})}},{key:"_onLoadFail",value:function(){this.trigger(i.LoadEvents.LOAD_FAIL,{type:i.LoadEvents.LOAD_FAIL})}},{key:"_onData",value:function(t){0===this._lastDataTs&&(this.trigger(i.LoadEvents.LOAD_SUC,{type:i.LoadEvents.LOAD_SUC}),Ji.remove(this.onConnectTimeout,this));var e="xy"===this._pcdnName?t:t.data;this._lastDataTs=F.a.now(),this._speed.addCur(e.byteLength),this.trigger(i.LoadEvents.DATA,{type:i.LoadEvents.DATA,data:e})}},{key:"_onGatherSuc",value:function(){this.trigger(i.BaseEvents.GATHER_SUC,{type:i.BaseEvents.GATHER_SUC})}},{key:"_onGatherFail",value:function(){this.trigger(i.BaseEvents.GATHER_FAIL,{type:i.BaseEvents.GATHER_FAIL})}},{key:"_onLoadStop",value:function(){this.trigger(i.LoadEvents.LOAD_STOP,{type:i.LoadEvents.LOAD_STOP})}},{key:"_onLoadFinish",value:function(){this.trigger(i.LoadEvents.LOAD_FINISH,{type:i.LoadEvents.LOAD_FINISH})}},{key:"_sdkDestroy",value:function(){this.trigger(i.LoadEvents.SDK_DESTROYED,{type:i.LoadEvents.SDK_DESTROYED})}},{key:"getName",value:function(){return this._pcdnName}},{key:"create",value:function(){this._destroyLoader(),this._createLoader()}},{key:"startPeerGather",value:function(t){this._callPcdn("startPeerGather",[t])}},{key:"stopPeerGather",value:function(){this._callPcdn("stopPeerGather")}},{key:"refreshUrl",value:function(t){this._callPcdn("refreshUrl",[t])}},{key:"startLoad",value:function(t,e){E.a.log("PcdnLoader.startLoad url="+t,(0,p.default)(e)),this._started=!0,this._lastDataTs=0,Ji.once(this.onConnectTimeout,this,3e3),this._callPcdn("startLoad",[t,e])}},{key:"onConnectTimeout",value:function(){this.trigger(i.LoadEvents.CONNECT_TIMEOUT,{type:i.LoadEvents.CONNECT_TIMEOUT})}},{key:"stopLoad",value:function(t){this._started&&(this._lastDataTs=0,this._started=!1,this._speed.reset(),Ji.remove(this.onConnectTimeout,this),this._callPcdn("stopLoad",{reason:t}))}},{key:"destroy",value:function(){this.clear(),this._lastDataTs=0,this._started=!1,Ji.remove(this.onConnectTimeout,this),this._doPcdnEvents(!1),this._callPcdn("destroy")}},{key:"close",value:function(){this.clear(),this._doPcdnEvents(!1),this.stopLoad(),this.stopPeerGather(),this._callPcdn("destroy"),this._loader=null}},{key:"_callPcdn",value:function(t,e){this._loader&&this._loader[t]?(E.a.log("PcdnLoader.".concat(t," ").concat(this._pcdnName," ").concat(e?(0,p.default)(e):"")),this._loader[t].apply(this._loader,e)):E.a.log("PcdnLoader.".concat(t," ").concat(this._pcdnName," hasLoader=").concat(!!this._loader," hasInterface=").concat(!!this._loader&&!!this._loader[t]))}},{key:"onCheckTimer",value:function(t,e){this._speed.calculate()}},{key:"onCheckFastTimer",value:function(t,e){this._lastDataTs>0&&t-this._lastDataTs>500&&(this._lastDataTs=t,this.trigger(i.LoadEvents.DATA_TIMEOUT,{type:i.LoadEvents.DATA_TIMEOUT}))}},{key:"speed",get:function(){var t=this._speed.average();return t===L.UintMax&&(t=0),t}},{key:"connected",get:function(){return this._lastDataTs>0}}],[{key:"hasPcdn",value:function(t){return!!Ba[t]}}]),i}(hn);ja.BaseEvents={LIB_READY:"LIB_READY",LIB_ERR:"LIB_ERR",GATHER_SUC:"GATHER_SUC",GATHER_FAIL:"GATHER_FAIL"},ja.LoadEvents={CONNECT_TIMEOUT:"CONNECT_TIMEOUT",LOAD_SUC:"LOAD_SUC",DATA:"DATA",DATA_TIMEOUT:"DATA_TIMEOUT",LOAD_FAIL:"LOAD_FAIL",LOAD_STOP:"LOAD_STOP",LOAD_FINISH:"LOAD_FINISH",SDK_DESTROYED:"SDK_DESTROYED"};var Va=ja,Ga=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(v.a)(this,t),this._flvPlayer=e,this._flvLoader=new Ca(e,i),this._pcdnLoader=new Va,this._sPcdnName="",this._requesting=!1,this._loader=null,this._swapTs=0,this._gatherSuc=!1,this._failCnt=0,this.url="",this._checkSampleBind=this._checkSample.bind(this)}return Object(g.a)(t,[{key:"close",value:function(){E.a.log("LoaderCtrl.close"),this._flvPlayer.anticode.off(Eo.Events.REFRESH,this._onAnticodeRefresh,this),this._flvLoader.close(),this._pcdnLoader.close(),this._requesting=!1,this._loader=null,this._failCnt=0,this._gatherSuc=!1,this._swapTs=0,this._sPcdnName=""}},{key:"checkPcdnMode",value:function(){this._reqPcdn()}},{key:"connect",value:function(t){this.close(),this.url=t,this._connect(t),this._reqPcdn()}},{key:"_connect",value:function(t,e){t=this._getUrlParams(t,!1),E.a.log("LoaderCtrl._connect",t),this._flvPlayer.anticode.off(Eo.Events.REFRESH,this._onAnticodeRefresh,this),this._stopPcdn(e),this._flvLoader.connect(t),this._loader=this._flvLoader,this.url=this._flvLoader.url?this._flvLoader.url:t}},{key:"_stopPcdn",value:function(t){this._doPcdnEventHandler(Va.LoadEvents,!1),this._pcdnLoader.stopLoad(t)}},{key:"_reqPcdn",value:function(){var t=this;if(1!=localStorage._closePcdn){if(this._flvPlayer.info.isAuto&&Number(B.closePcdn500)===this._flvPlayer.info.curBitrate)E.a.log("LoaderCtrl._reqPcdn closePcdn500");else if(localStorage._pcdnName&&(this._flvPlayer.info.usePcdn=1),1!==this._flvPlayer.info.usePcdn&&this._flvPlayer.stat.setComDim(at,1),1===this._flvPlayer.info.usePcdn&&!this._requesting&&""===this._sPcdnName){this._flvPlayer.stat.setComDim(at,2),this._requesting=!0;var e=new yn.ClientGetPcdnFlvOutsideSdkFullstreamInfoReq;e.lReqTs=Date.now(),e.lUid=N.uid,e.sGuid=N.sGuid,e.lAnchorUid=this._flvPlayer.info.presenterUid,e.iCdnLine=this._flvPlayer.info.lineType,e.iCliType=yn.EM_CLINET_TYPE.E_CLIENT_WEB,e.lBucketPara=Number(localStorage.randomPcdnPercent)||0,e.iBusiType=yn.EM_BUSI_TYPE.E_BusiType_Live,e.vCliSupportPcdns.value=["ppio","xy"],e.sStreamName=this._flvPlayer.info.sStreamName,E.a.log("LoaderCtrl.reqPcdn req",e),vn.sendWup("hypcdngw","onClientGetPcdnFlvOutsideSdkFullstreamInfo",e,(function(e){E.a.log("HYPlayer.reqPcdn res",e),!e||0!=e.iErrCode&&7!=e.iErrCode||t._rspPcdn(e)}),!0,vn.getRequestId())}}else E.a.log("LoaderCtrl._reqPcdn host close")}},{key:"_rspPcdn",value:function(t){this._requesting=!1,localStorage._pcdnName&&(t.sPcdnName=localStorage._pcdnName),this._sPcdnName!==t.sPcdnName&&(this._sPcdnName=t.sPcdnName,this._flvPlayer.stat.setComDim(rt,t.sPcdnName),this._flvPlayer.stat.setComDim(at,3),this._loadPcdn())}},{key:"onCheckTimer",value:function(t,e){this._loader&&this._loader.onCheckTimer(t,e),this._checkSwapToPcdn(t)}},{key:"_checkSwapToPcdn",value:function(t){return!!(t>this._swapTs&&this._gatherSuc&&this._loader!==this._pcdnLoader)&&(this._flvPlayer.stat.setComDim(at,10),this._swapToPcdn(),!0)}},{key:"onCheckFastTimer",value:function(t,e){this._loader&&this._loader.onCheckFastTimer&&this._loader.onCheckFastTimer(t,e)}},{key:"_loadPcdn",value:function(){Va.hasPcdn(this._sPcdnName)?(this._flvPlayer.stat.setComDim(at,5),this._doPcdnEventHandler(Va.BaseEvents,!0),this._pcdnLoader.setPcdnName(this._sPcdnName),this._pcdnLoader.loadLib(this._flvPlayer.info.h5Root)):this._flvPlayer.stat.setComDim(at,4)}},{key:"_doPcdnEventHandler",value:function(t,e){for(var i in t){var n=t[i];e?this._pcdnLoader.on(n,this._onPcdnEventHandler,this):this._pcdnLoader.off(n,this._onPcdnEventHandler,this)}}},{key:"_onPcdnEventHandler",value:function(t){switch(t.type!==Va.LoadEvents.DATA&&E.a.log("LoaderCtrl._onPcdnEventHandler",t.type,t.msg),t.type){case Va.BaseEvents.LIB_READY:t.isFirst&&this._reportPcdnLibAct([0],[this._pcdnLoader.getName()]),this._flvPlayer.stat.setComDim(at,7),this._pcdnLoader.create(),this._pcdnLoader.startPeerGather(this._getUrl(!0));break;case Va.BaseEvents.LIB_ERR:this._flvPlayer.stat.setComDim(at,6),this._reportPcdnLibAct([100],[this._pcdnLoader.getName()]);break;case Va.LoadEvents.CONNECT_TIMEOUT:this._flvPlayer.stat.setComDim(at,11),this._swapToCdn(t.type);break;case Va.LoadEvents.DATA_TIMEOUT:this._flvPlayer.getBufferLen()<1500&&(this._flvPlayer.stat.setComDim(at,12),this._swapToCdn(t.type));break;case Va.LoadEvents.LOAD_SUC:this._failCnt=0,this._flvLoader.close(),this._flvPlayer.stat.setComDim(at,15),this._beforeSwap();break;case Va.LoadEvents.LOAD_FAIL:this._flvPlayer.stat.setComDim(at,14),this._swapToCdn(t.type);break;case Va.BaseEvents.GATHER_SUC:this._gatherSuc=!0,E.a.log("LoaderCtrl gather_suc",this._loader!==this._pcdnLoader),this._checkSwapToPcdn(F.a.now())||this._loader===this._pcdnLoader||this._flvPlayer.stat.setComDim(at,9);break;case Va.BaseEvents.GATHER_FAIL:this._gatherSuc=!1,this._flvPlayer.stat.setComDim(at,8);break;case Va.LoadEvents.DATA:this._flvPlayer.onData(t.data,2);break;case Va.LoadEvents.LOAD_STOP:this._flvPlayer.stat.setComDim(at,13),this._swapToCdn(t.type);break;case Va.LoadEvents.LOAD_FINISH:this._flvPlayer.stat.setComDim(at,16),this._swapToCdn(t.type);break;case Va.LoadEvents.SDK_DESTROYED:this._flvPlayer.stat.setComDim(at,17),this._swapToCdn(t.type)}}},{key:"_reportPcdnLibAct",value:function(t,e){this._flvPlayer.tsdb.sendMetrics([this._flvPlayer.stat.createAct("load_pcdnlib_error",{value:t,str:e})])}},{key:"_onAnticodeRefresh",value:function(){this._flvPlayer.initInfo(this._flvPlayer.info,!0),this._pcdnLoader.refreshUrl(this._flvPlayer.info.url)}},{key:"_checkSample",value:function(t){var e=this._flvPlayer.mse.parser;return e.lastParseDts>0&&t.ts<=e.lastParseDts||(e.setDroppingSample(null),!1)}},{key:"_swapToPcdn",value:function(){this._flvPlayer.anticode.on(Eo.Events.REFRESH,this._onAnticodeRefresh,this),this._doPcdnEventHandler(Va.LoadEvents,!0);var t=this._flvPlayer.mse,e=t.parser||{};E.a.log("LoaderCtrl.swapToPcdn vDts=".concat(t.curVideoDts," aDts=").concat(t.curAudioDts," lastParseDts=").concat(e.lastParseDts)),this._pcdnLoader.startLoad(this._getUrl(!0),{startDts:e.lastParseDts}),this._loader=this._pcdnLoader,this._flvPlayer.stat.addCore(Jt,1)}},{key:"_swapToCdn",value:function(t){var e=this._loader!==this._flvLoader;E.a.log("LoaderCtrl.swapToCdn reason=".concat(t," swap=").concat(e)),e&&(this._flvPlayer.tsdb.sendMetrics([this._flvPlayer.stat.createAct("pcdn_to_cdn",{str:[t]})]),this._failCnt++,this._swapTs=F.a.now()+1e4*Math.min(6,this._failCnt),this._flvPlayer.stat.addCore("switch_cdn_cnt",1),this._beforeSwap(),this._connect(this._getUrl(!1),t))}},{key:"_getUrl",value:function(t){return this._flvPlayer.initInfo(this._flvPlayer.info,t),this._getUrlParams(this._flvPlayer.info.url,t)}},{key:"_getUrlParams",value:function(t,e){var i="";e&&(i+="pulltype=pcdn&"),i+="&wsiphost=ipdbme&";var n=B.platform,r=U.PLATFORM_TYPE[n]||U.PLATFORM_TYPE.web,o=n===U.PLATFORM_TYPE_NAME.wap?"uid=".concat(N.uid,"&uuid=").concat(N.uuid):"u=".concat(N.convertUid);i+="".concat(o,"&t=").concat(r,"&sv=").concat(2206101758),-1===t.indexOf("?")?t+="?":t+="&";var a={url:t+=i};return e&&this._flvPlayer.isUseAV1()?a.url+="&codec=av1":e&&this._flvPlayer.h265Proxy.checkUrl(a),a.url}},{key:"_beforeSwap",value:function(){var t=this._flvPlayer.mse.parser;t.parseFlvHead=!1,t.flvCacher.reset(),t.printFirstVideoTs=!1,t.printFirstAudioTs=!1,t.pfvTs=!1,t.pfaTs=!1,t.setDroppingSample(this._checkSampleBind)}},{key:"connected",get:function(){return this._loader&&this._loader.connected}},{key:"speed",get:function(){return this._loader&&this._loader.speed}}]),t}(),Ha=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(v.a)(this,i),r=e.call(this,t,n),E.a.log("FlvPlayer(".concat(r._id,").constructor"));var a=n.isPureAudio,s=n.isPureVideo;return r.startTs=0,r.startTime=0,r.lineType=0,r.loader=new Ga(Object(sn.a)(r),!0),r.recvTime=0,r.firstPkgTime=0,r.connectTime=0,r.loadFlvStatus=0,r.isPureAudio=a,r.isPureVideo=s,r.videoElement=o,r.flvLoadTimeSended=!1,r.enableLowLatency=!1,r.anticode=n.anticode,r.mse=n.mse,r.pauseStartTs=0,r.metadataTick=new Ta(t,r.mse),r.pauseReason=0,r.loadTime=0,r.connectTime=0,r.recvDataTime=0,r.loadStartTs=0,r.cdnip="",r.cdnsip="",r.sendPauseTimeout=0,r.videoStatus=b,void 0!==Ia&&(r.qaStat=new Ia(Object(sn.a)(r))),r.playedStat=null,r.flowSize=0,r.flvDataSize=0,r.backToP2P=new ba(Object(sn.a)(r)),r.volumeCount=0,r.sendMetricTimer=0,r.sendMetricTimes=0,r.businessStartCost=0,r.startTimeStamp=0,r.noNeedSendVideoLoadTime=!1,r.exceptionStat=n.exceptionStat,r.startUrlBind=r.startUrl.bind(Object(sn.a)(r)),r.playerType=0,r}return Object(g.a)(i,[{key:"getFrameData",value:function(){return{pts:this.mse.getCurrentRealTime()}}},{key:"reset",value:function(){this.started&&(E.a.log("FlvPlayer(".concat(this._id,").reset")),this.loader.close(),this.pauseStartTs=0,this.qaStat.isFirstReport=!0,this.metadataTick.reset(),this.metadataTick.mse=this.mse,this.startTs=0,this.recvTime=0,this.startTime=0,this.enableLowLatency=!1,this.pauseCheckLock=!1,this.loadTime=0,this.connectTime=0,this.recvDataTime=0,this.flowSize=0,this.flvDataSize=0,this.recvDataEnough=!1,this.recvFlvData=!1,this.cdnip="",this.cdnsip="",this.backToP2P.reset(),this.stopPlayer(),this.audiouitil&&(this.audiouitil.reset(),this.audiouitil=null),this.videoStatus=b)}},{key:"getCostTimes",value:function(){return[this.connectTime>0?this.connectTime-this.startTs:0,this.recvDataTime>0?this.recvDataTime-this.connectTime:0,this.mse.pushVideoStartRenderTime>0?this.mse.pushVideoStartRenderTime-this.startTs:0]}},{key:"getRecvInfo",value:function(){return[this.connectTime>0?this.connectTime-this.startTs:0,this.recvDataTime>0?this.recvDataTime-this.connectTime:0,this.mse.pushVideoStartRenderTime>0?this.mse.pushVideoStartRenderTime-this.startTs:0,this.mse.getVideoFrames(),this.mse.getAudioFrames(),this.flowSize]}},{key:"checkPcdnMode",value:function(t){On(Object(Cn.a)(i.prototype),"checkPcdnMode",this).call(this,t),this.loader.checkPcdnMode()}},{key:"_getUsePcdn",value:function(t){return 1===Number(t[yn.EM_PCDN_MODE.E_PcdnMode_FlvOutsideSdkFullstream])?1:0}},{key:"_getPcdnName",value:function(t){var e="";return t&&(e=t[yn.EM_PCDN_MODE.E_PcdnMode_FlvOutsideSdkFullstream]),e}},{key:"start",value:function(t){E.a.log("FlvPlayer(".concat(this._id,").start"),(0,p.default)(t)),this.firstPkgTime=0,On(Object(Cn.a)(i.prototype),"start",this).call(this),this.reset(),this.started=!0,this.checkParams(t,this.startUrlBind)}},{key:"checkParams",value:function(t,e){this.info=t,t.sFlvUrl&&t.sStreamName?(t.sFlvUrl=t.sFlvUrl.replace("http://","https://"),t.sFlvAntiCode?(this.anticode.init(t.sFlvUrl,t.sStreamName,t.sFlvAntiCode,t.nimoTid),this.anticode.valid().then((function(){e&&e(t)}))):e&&e(t)):t.url?e&&e(t):E.a.error("FlvPlayer(".concat(this._id,").start has no params(sFlvUrl,sStreamName,url)"))}},{key:"startUrl",value:function(t){if(this.initDomain(t),this.started){this.initInfo(t);var e=F.a.now();if(this.businessStartCost=0,this.UIStartCost=0,this.loadStartTs=0,this.startTimeStamp=Number(t.startTimeStamp)||0,t.noNeedSendVideoLoadTime?this.noNeedSendVideoLoadTime=!0:(this.businessStartCost=Math.floor(t.startTimeStamp>1?(new Date).getTime()-t.startTimeStamp:0),this.noNeedSendVideoLoadTime=!1),t.uistartTs&&t.uistartTs>0&&(this.UIStartCost=Math.floor((new Date).getTime()-t.uistartTs)),this.startTs=e,E.a.log("FlvPlayer(".concat(this._id,").startNow"),Date.now(),e),this.startTime=e,this.backToP2P.initJumpTs(e),this.loadFlvStatus=0,this.mse.setPushGop(B.pushGop),wa.isNeedAud()?this.mse.setDeleteH264Aud(-1===B.deleteH264Aud.indexOf(t.presenterUid)?0:1):this.mse.setDeleteH264Aud(0),t.latencyLevel){var i=B.latency[t.latencyLevel];i||(i=[3e3,2e3,4e3,2e3]),this.mse.latencySeek=i[3],this.mse.setJitter(i[0],i[1],i[2])}else this.enableLowLatency?B.setLowLatency(this.mse):B.setJitterCfg(this.mse,t.presenterUid,t.curBitrate);var n=this.h265Proxy.isReady,r=this.isUseAV1(t);this.stat.setComDim(W,0===t.originalBitrate?1:0),this.stat.setComDim(st,n?1:0),this.stat.setComDim(ut,r?2:n?1:0),r?(t.url+="&codec=av1",-1==t.url.indexOf("ratio")&&(t.url+="&ratio=0")):n&&(this.h265Proxy.checkUrl(t),this._hyPlayer.tsdbUtil.sendMetrics([this.stat.createAct(ti,{value:[0],str:[0]})])),this.statSwitch.check(t,!1),delete t.pullStreamFrom,this.startFastSample(),this._startContinueBuffer(),this.loader.connect(t.url,null==this.videoElement),this.stat.setComDim(H,this.loader.url),Lo(this.stat,this.info.url,this.info.sStreamName),this.startPlayer()}}},{key:"startPlayer",value:function(){this.started=!0,Ji.add(this.onCheckTimer,this,1e3),Ji.add(this.onCheckFastTimer,this,100),null!=this.videoElement&&this.startMetricTimer(2e4),this.stat.setComDim(V,0),this.stat.setComDim(it,1)}},{key:"stopPlayer",value:function(){Ji.remove(this.onCheckTimer,this),Ji.remove(this.onCheckFastTimer,this),this.stopMetricTimer(),this.started=!1}},{key:"_switchStart",value:function(t,e){this.initInfo(this.info),-1!==this.info.url.indexOf("?")?this.info.url+="&startPts=".concat(e):this.info.url+="?startPts=".concat(e),this.h265Proxy.checkUrl(this.info),this.mse.parser.reset(),this.loader.close(),1==localStorage._testBack?localStorage._testBack=0:(this.startTs=F.a.now(),this.loader.connect(this.info.url)),this.updateFlvConfig()}},{key:"initInfo",value:function(t,e){this.info=t,t.sFlvUrl&&t.sStreamName&&(t.url="".concat(t.sFlvUrl,"/").concat(t.sStreamName,".flv"));var i=[];this.anticode.hasAnticode()&&i.push(this.anticode.getAnticode(e)),-1!==B.useChangeRate.indexOf(Number(t.presenterUid))?i.push("ratio=".concat(t.curBitrate)):t.iBitRate>0?i.push("ratio=".concat(t.iBitRate)):localStorage._ratio&&i.push("&ratio=".concat(localStorage._ratio)),-1===t.url.indexOf("va.huya.com")&&-1===t.url.indexOf("cdnweb.huya.com")&&-1===t.url.indexOf("va-cmcc.huya.com")||i.push("&https=1"),i.length>0&&(t.url+=(-1!==t.url.indexOf("?")?"&":"?")+"".concat(i.join("&"))),this.url=t.url,this.lineType=t.lineType}},{key:"recSysRspHandler",value:function(t,e,i){i&&i.isBackToP2P?this.backToP2P.recSysRspHandler(t,e,i):!t||e&&e.tRecSysInfo&&1==e.tRecSysInfo.lAction?(E.a.warn("FlvPlayer(".concat(this._id,").recSysRspHandler FLV_TRY_TO_P2P")),this.eventEmitter.trigger(_.FLV_TRY_TO_P2P)):(E.a.warn("FlvPlayer(".concat(this._id,").recSysRspHandler jumpToP2PCd=").concat(this.jumpToP2PCd/6e4,"min fail")),this.eventEmitter.trigger(_.H5_PLAYER_ERROR))}},{key:"setVideoPlayTimeSended",value:function(){this.flvLoadTimeSended=!0}},{key:"getPlayVideo",value:function(){return this.mse.getPlayVideo()}},{key:"setJitter",value:function(t,e,i){this.mse&&this.mse.setJitter(t,e,i)}},{key:"stop",value:function(){this.started&&(E.a.log("FlvPlayer(".concat(this._id,").stopFlv")),this._reportFlvFlow(),this.reset(),this.started=!1),this.audiouitil&&(this.audiouitil.reset(),this.audiouitil=null),this.recvDataEnough=!1,this.recvFlvData=!1,On(Object(Cn.a)(i.prototype),"stop",this).call(this)}},{key:"recvDataFull",value:function(){this.recvDataTime=F.a.now(),this.eventEmitter.trigger(_.RECV_VIDEO_FRAME),E.a.log("FlvPlayer(".concat(this._id,").recvDataFull"))}},{key:"initDomain",value:function(t){if(!t.inited){t.inited=!0;var e=t.domainList;if(e&&e.length){var i=t.sFlvUrl.match(/\/\/(.+?)\//i);t._domain=i?i[1]:"",E.a.log("FlvPlayer(".concat(this._id,").initDomain:\n\t")+e.join("\n\t"));var n=e.shift();this.cdnip=n,this.stat.setComDim(Z,n),t.sFlvUrl=t.sFlvUrl.replace(/\/\/(.+?)\//,"//"+n+"/"+t._domain+"/")}}}},{key:"retryVideo",value:function(){this.eventEmitter.trigger(_.REPLAY_VIDEO)}},{key:"setEnableLowLatency",value:function(t){this.enableLowLatency=t,t&&B.setLowLatency(this.mse)}},{key:"updateFlvConfig",value:function(){this.enableLowLatency?B.setLowLatency(this.mse):B.setJitterCfg(this.mse,this.info.presenterUid,this.info.curBitrate),this.mse&&(this.mse.setNeedEmptyAudioFrame(B.flvEmptyAudioFrame>0),E.a.log("FlvPlayer(".concat(this._id,").updateFlvConfig flvEmptyAudioFrame=")+this.getConfig("flvEmptyAudioFrame")))}},{key:"requestUrl",value:function(){var t=this.info,e=t.domainList;if(e&&t._domain){var i=new RegExp("//(.*?)"+t._domain+"/"),n=e.shift();return n?(this.cdnip=n,this.stat.setExtDim(Gt,n),E.a.warn("FlvPlayer(".concat(this._id,").requestUrl change domain to ").concat(n)),t.sFlvUrl=t.sFlvUrl.replace(i,"//"+n+"/"+t._domain+"/")):(this.cdnip="",this.stat.delDim(Gt),E.a.warn("FlvPlayer(".concat(this._id,").requestUrl change domain to ").concat(t._domain)),t.sFlvUrl=t.sFlvUrl.replace(i,"//"+t._domain+"/"),delete t.domainList),this._reportFlvFlow(),void this.startUrl(t)}this.eventEmitter.trigger(_.FLV_URL_UNAVAILABLE)}},{key:"setConfig",value:function(t,e){B.setConfig(t,e)}},{key:"getConfig",value:function(t){return B[t]}},{key:"setVolume",value:function(t){this.mse.setVolume(t)}},{key:"setMuted",value:function(t){this.mse.setMuted(t)}},{key:"getMuted",value:function(){return this.mse.getMuted()}},{key:"getBufferLen",value:function(){return this.mse&&this.mse.getBufferLen?this.mse.getBufferLen():0}},{key:"getFrameBufferLen",value:function(){return this.mse&&this.mse.getFrameBufferLen?this.mse.getFrameBufferLen():0}},{key:"getCurrentTime",value:function(){return this.mse.getCurrentRealTime()}},{key:"getCurrentDts",value:function(){return this.mse.getCurrentDts()}},{key:"getCurrentSeiOffsetDts",value:function(){return this.mse.getCurrentSeiOffsetDts()}},{key:"getDurationTime",value:function(){var t=(this.mse.video||{}).video,e=0;return t&&(e=Math.floor(t.duration||0)),e}},{key:"getVolumeEnergy",value:function(){var t=this.volumeCount>5?1:0;return this.volumeCount=0,t}},{key:"getAnticodeHandler",value:function(){return this.anticode}},{key:"play",value:function(){this.mse.play()}},{key:"pause",value:function(){this.loader.close(),this.mse&&this.mse.pause(),Ji.remove(this.onCheckTimer,this),Ji.remove(this.onCheckFastTimer,this),this.stopMetricTimer()}},{key:"setPlaybackrateAccess",value:function(t){this.mse&&this.mse.setPlaybackrateAccess(t)}},{key:"setAutoJitter",value:function(t){this.mse.autoJitter=t}},{key:"setLoadFlvStatus",value:function(t){t>this.loadFlvStatus&&(this.loadFlvStatus=t)}},{key:"sendLoadVideoErrorStatus",value:function(){this._hyPlayer.tsdbUtil.sendMetrics([this.stat.createAct(oi.METRIC.VIDEO_VIDEO_LOAD_ERROR,{value:[this.loadFlvStatus]})])}},{key:"getCdnSip",value:function(){return this.cdnsip}},{key:"turnToH264",value:function(){this.stop(),this.eventEmitter.trigger(_.TURN_TO_H264)}},{key:"h265Retry",value:function(){this.stop(),this.eventEmitter.trigger(_.H265_VIDEO_RETRY)}},{key:"onConnected",value:function(){On(Object(Cn.a)(i.prototype),"onConnected",this).call(this),this.connectTime=F.a.now(),E.a.log("%c[TIME] FlvPlayer(".concat(this._id,").onConnected connectTime=")+(this.connectTime-this.startTs),"color:#A23400;background:#FFF5C2"),this.setLoadFlvStatus(U.LoadVideoTimeoutReason.FLV_CONNECTED),this.exceptionStat.setStat(At.CONNECT_SUC,1)}},{key:"onClosed",value:function(){this.eventEmitter.trigger(_.VIDEO_LINK_CLOSE,{video:this.mse.getPlayVideo()})}},{key:"onError",value:function(){this.eventEmitter.trigger(_.ANCHOR_STOP,{video:this.mse.getPlayVideo()})}},{key:"onData",value:function(t,e){0==this.firstPkgTime&&(this.firstPkgTime=F.a.now()),this.exceptionStat.setStat(At.HAS_DATA,1);var i=new Uint8Array(t);this.flowSize+=i.byteLength,this.addBytes(i.byteLength),this.recvDataEnough||(this.flvDataSize+=i.byteLength,this.flvDataSize>1e6&&(this.setLoadFlvStatus(U.LoadVideoTimeoutReason.FLV_DATA_INVALID),this.recvDataEnough=!0)),1===e?this.stat.addCore(Ht,i.byteLength):this.stat.addCore(zt,i.byteLength),this.mse.appendFlv(i);var n=F.a.now();0==this.recvTime&&(E.a.log("%c[TIME] FlvPlayer(".concat(this._id,").onData firstPkgTime=")+(n-this.connectTime),"color:#A23400;background:#FFF5C2"),this.setLoadFlvStatus(U.LoadVideoTimeoutReason.FLV_RECV_DATA)),this.recvTime=n}},{key:"getMse",value:function(){return this.mse}},{key:"onPlayVideo",value:function(t,e,n,r,o,a,s){On(Object(Cn.a)(i.prototype),"onPlayVideo",this).call(this,t,e,n,r,o,a,s),this.updateStatus(w),this.stat.setComDim(X,e+"*"+n);var u=F.a.now();E.a.log("FlvPlayer(".concat(this._id,").onStartVideo loadeddata=").concat(u)),this.loadTime=u-this.startTs,this.newLoadTime=u-this._hyPlayer.startTs,this.waitRemuxTime=0,this.mse&&this.mse.parser&&0!=this.mse.parser.waitRemuxTime&&(this.waitRemuxTime=this.mse.parser.waitRemuxTime);var c=this.connectTime-this.startTs,l=this.recvDataTime-this.startTs,h=this.mse.pushVideoStartRenderTime-this.startTs,d=this.UIStartCost>0?this.loadTime+this.UIStartCost:0,f=0;this.startTimeStamp>1?f=this.loadTime+this.businessStartCost:1===this.startTimeStamp&&(f=this.loadTime);var p=this.firstPkgTime-this.startTs,m=0;0!=this.mse.parser.decodeIFRTime&&(m=this.mse.parser.decodeIFRTime-this.startTs),E.a.log("%cFlvPlayer(".concat(this._id,").onPlayVideo loadTime=")+this.loadTime+"  businessStartCost="+this.businessStartCost+"  UIStartCost="+this.UIStartCost,"color:#A23400;background:#FFF5C2"),E.a.log("%cFlvPlayer(".concat(this._id,").onPlayVideo newLoadTime=")+this.newLoadTime,"color:#A23400;background:#FFF5C2"),this.tsdb.sendFlvTime(this.newLoadTime,c,l,h,null!=this.videoElement,f,d,this.waitRemuxTime,p,m);var y={video:t,width:e,height:n,loadTime:this.loadTime,connectTime:c,recvDataTime:l,pushVideoTime:h,canvas:o,videoCodec:s,delayRemove:this.info._delayRemove};this.info._delayRemove=!1,this.setLoadFlvStatus(U.LoadVideoTimeoutReason.FLV_STARTPLAY),this.eventEmitter.trigger(_.VIDEO_PLAY,y),this._hyPlayer.onPlayVideo&&this._hyPlayer.onPlayVideo(t)}},{key:"onAudioFrequency",value:function(t){t.value&&this.volumeCount++}},{key:"onVideoStop",value:function(t,e){E.a.log("FlvPlayer(".concat(this._id,").onVideoStop hasVideo=")+e),e&&this.updateStatus(b),this.eventEmitter.trigger(_.VIDEO_STOP,{video:t,hasVideo:e})}},{key:"onSendSeiData",value:function(t,e,i){this.eventEmitter.trigger(_.H264_SEI_PLAY,{data:t,ts:e,now:(new Date).getTime(),vt:i})}},{key:"onSendScriptVolumeInfo",value:function(t,e){Number(localStorage._printAudioIntensity)&&E.a.log("FlvPlayer(".concat(this._id,").onSendScriptVolumeInfo uid:")+t+"  intensity:"+e),this.eventEmitter.trigger(_.UPDATE_INTERSITY,{uid:t,intensity:e})}},{key:"onLoadError",value:function(t){this.eventEmitter.trigger(_.FLV_URL_UNAVAILABLE,{msg:t}),this.setLoadFlvStatus(U.LoadVideoTimeoutReason.FLV_CONNECT_ERROR)}},{key:"onVideoParseInvalid",value:function(){this.setLoadFlvStatus(U.LoadVideoTimeoutReason.FLV_DATA_INVALID)}},{key:"onLoadTimeout",value:function(){this.eventEmitter.trigger(_.FLV_URL_LOAD_TIMEOUT)}},{key:"onPlayerError",value:function(t){}},{key:"onErrorEvent",value:function(t){On(Object(Cn.a)(i.prototype),"onErrorEvent",this).call(this,t),this._hyPlayer&&this._hyPlayer.lastP2PInfo?this.getRecSysRsp({info:this.info,type:"flv",metadata:this.mse.metadata,isFlvError:!0}):this._hyPlayer.trigger(_.H5_PLAYER_ERROR,{code:t.type,msg:"播放错误"})}},{key:"onPlayPause",value:function(t,e){this.startSendPauseTimer(),On(Object(Cn.a)(i.prototype),"onPlayPause",this).call(this,t,e)}},{key:"onPlayResume",value:function(t,e){this.stopSendPauseTimer(),On(Object(Cn.a)(i.prototype),"onPlayResume",this).call(this,t,e)}},{key:"_getBadReason",value:function(t){return this.mse.getIsDownEnough()?this.mse.lastJumpBufferTs>0&&t-this.mse.lastJumpBufferTs<5e3?U.BAD_REASONS.BUFFER_JUMP:this.getBufferLen()>2e3?U.BAD_REASONS.PERFORMANCE:U.BAD_REASONS.UNKNOW:U.BAD_REASONS.DOWN_LINK}},{key:"sendPauseEvent",value:function(){this.eventEmitter.trigger(_.PLAY_CARTON)}},{key:"startMetricTimer",value:function(t){clearTimeout(this.sendMetricTimer),this.sendMetricTimer=setTimeout(this.heartBeat20sMetric.bind(this),t)}},{key:"stopMetricTimer",value:function(){this.sendMetricTimes=0,clearTimeout(this.sendMetricTimer)}},{key:"setAudioUtil",value:function(t){this.audiouitil=t,this.audiouitil.removeAllListeners([Bo.AUDIO_FREQUENCY]),this.mse&&this.mse.video&&this.mse.video.video&&(this.audiouitil.createAudioContext(this.mse.video.video),this.audiouitil.on(Bo.AUDIO_FREQUENCY,this.onAudioFrequency.bind(this)))}},{key:"startSendPauseTimer",value:function(){this.stopSendPauseTimer(),this.sendPauseTimeout=setTimeout(this.sendPauseEvent.bind(this),200)}},{key:"stopSendPauseTimer",value:function(){clearTimeout(this.sendPauseTimeout)}},{key:"heartBeat20sMetric",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,e=F.a.now();if(E.a.log("FlvPlayer(".concat(this._id,").heartBeat20sMetric ")),this.sendMetricTimes++,this._checkPaused(e,qo),this.qaStat){0==this.pauseTime&&(this.pauseReason=0);var i=this.pauseStartTs>0;this.qaStat.record(this.pauseCnt,this.pauseTime,i,this.flowSize,this.pauseReason,this.getVolumeEnergy())}this.pauseStartTs>0&&this.autoMonitor.setPause(this.pauseStartTs,this.getBufferLen()),this.pauseCnt=0,this.pauseTime=0,this.pauseReason=0,this.flowSize=0,this.sendMetricTimes%15==0&&(this.tsdb.sendMetrics([{sMetricName:oi.METRIC.VIDEO_VIDEO_BAD_QUALITY_5M_RATIO,vField:{value:this.pauseCnt5>0?100:0}}]),this.pauseCnt5=0,this.pauseTime5=0),t>0&&this.startMetricTimer(t)}},{key:"onCheckTimer",value:function(t,e){if(this.started){if(this.connected&&this.recvTime>0&&t-this.recvTime>8e3){var i=this.getBufferLen();return E.a.warn("FlvPlayer(".concat(this._id,").onCheckTimer no data received ")+(t-this.recvTime)+" buffLen="+i),void this.eventEmitter.trigger(_.NO_DATA_RECEIVED)}if(this.loader.onCheckTimer(t,e),this.mse&&this.mse.onCheckTimer(t,e),this.metadataTick.onCheckTimer(t,e),this.connected){null==this.videoElement&&(0===this.heart20Ts?this.heart20Ts=t:t-this.heart20Ts>=2e4&&(this.heartBeat20sMetric(0),this.heart20Ts=t));try{this.eventEmitter.trigger(_.PLAY_DOWNLINK_INFO,{buffer:this.getBufferLen()/1e3,downLinkSpeed:0|this.loader.speed,videoBufferEnd:this.mse.video.video.buffered.end(this.mse.video.video.buffered.length-1)})}catch(t){E.a.log("FlvPlayer(".concat(this._id,").onCheckTimer cannot get down link info"))}this.backToP2P.onCheckTimer(t,e),this.eventEmitter.trigger(_.PLAY_FRAME_BUFFER,{frameStorage:this.mse.getFrameReadyed(),jitterBuffer:this.mse.getBufferLen(),playdelay:this.mse.getFramePlayDelays()})}}}},{key:"onCheckFastTimer",value:function(t,e){this.started&&(this.mse.onCheckFastTimer(t,e),this.backToP2P.onCheckFastTimer(t,e),this.loader.onCheckFastTimer(t,e))}},{key:"_reportFlvFlow",value:function(){this.qaStat&&(this._checkPaused(F.a.now(),"stop"),this.qaStat.sendFlow(this.pauseCnt,this.pauseTime,this.pauseStartTs,this.flowSize,this.pauseReason,this.getVolumeEnergy(),!0),this.pauseCnt=0,this.pauseTime=0,this.pauseReason=0,this.flowSize=0)}},{key:"pauseCheck",value:function(t){if(this.started){var e=0,i=this.info.curBitrate/8-10,n=this.loader.speed/1024|0;e=n>0&&n<i?U.pauseReason.FLV_NET_SLOW:U.pauseReason.FLV_NO_BUFF,this.recvTime>0&&t-this.recvTime>2e3&&(e=U.pauseReason.FLV_NO_DATA);var r=this.getBufferLen();r>1e3&&(e=U.pauseReason.FLV_UNKNOW_PAUSE),e>this.pauseReason&&(this.pauseReason=e),E.a.warn("FlvPlayer(".concat(this._id,").pauseCheck curReason=").concat(e," reportReason=").concat(this.pauseReason," buffLen=").concat(r))}}},{key:"connected",get:function(){return this.loader.connected}},{key:"hasPicture",get:function(){var t=this.p2pFlvPlayer.isPlaying&&0!==this.mse.getCurrentTime();return this.h265Proxy.rendering&&(t=t&&this.isH265Playing),t}}]),i}(Jo);function Wa(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.length<e&&(n+=" ".repeat(e-n.length),t[i]=n)}return t.join("\n")}var qa=function(){function t(){Object(v.a)(this,t),this.version=1019,this.BASE_SUBS=10,this.presenterUid=0,this.uid=0,this.uuid=0,this.convertUid=0,this.appId=66,this.appid=66;var e=Number(localStorage.appid);e&&(this.appid=e,E.a.warn("--- test appid "+e+" ---",this)),this.sid=0,this.subSid=0,this.lineType=-1,this.bitrate=0,this.curBitrate=0,this.originalBitrate=0,this.userAbility=null,this.isStartFromUrl=!1,this.streamId=null,this.streamSeqSN=0,this.quickAccessBeginIndex=0,this.quickAccessEndIndex=0,this.exip=0,this.sslUrl="",this.myIp="",this.quickTime=0,this.urlTokenTime=0,this.urlToken="",this.wsTime="",this.videoNtp=new mn,this.stampcSvr=0,this.stampcNow=0,this.wanIp="",this.wanPort=0,this.cdnpConnected=0,this.proxyIp="",this.cdnpIp=0,this.stunPorts=[],this.enableFeatures=0,this.cdnpip=0,this.firstLogin=!0,this.loaderMgr=null,this.p2pMgr=null,this.globalSpeedCalc=new ci(20),this.initTafTime=0,this.reqVpTime=0,this.getVPTime=0,this.startTime=0,this.connectVideoTime=0,this.firstVideoPkgTime=0,this.firstIFrameTime1=0,this.firstIFrameTime2=0,this.firstRenderTime=0,this.recvDataTime=0,this.onPlayTime=0,this.loadedDataTs=0,this.hyPlayerLoadTs=0,this.firstP2POnDataTime=0,this.firstP2PIframeTime=0}return Object(g.a)(t,[{key:"initUid",value:function(t){this.uuid=t,this.convertUid=L.rotUid(this.uid,this.presenterUid),E.a.log("Global.initUid uid=".concat(this.uid," uuid=").concat(this.uuid," convertUid=").concat(this.convertUid))}},{key:"getServTime",value:function(t){if(0==this.stampcSvr)return 0;var e=t||F.a.now();return this.stampcSvr+(e-this.stampcNow)}},{key:"initUseTime",value:function(t){E.a.log("initUseTime",t),this.startTime=t,this.getLivingInfoTime=0,this.connectVideoTime=0,this.firstVideoPkgTime=0,this.firstAudioPkgTime=0,this.firstIFrameTime1=0,this.firstIFrameTime2=0,this.firstRenderTime=0,this.recvDataTime=0,this.onPlayTime=0,this.loadedDataTs=0,this.hyPlayerLoadTs=0,this.firstP2POnDataTime=0,this.firstP2PIframeTime=0}},{key:"printUseTime",value:function(){var t=["\n%c"+".".repeat(28)," getLivingInfoTime    = "+Math.max(0,this.getLivingInfoTime-this.startTime)," connectVideoTime     = "+(this.connectVideoTime-this.startTime)];this.firstVideoPkgTime>0?t.push(" firstVideoPkgTime    = "+(this.firstVideoPkgTime-this.connectVideoTime)," firstIFrameTime1     = "+(this.firstIFrameTime1-this.connectVideoTime)," firstIFrameTime2     = "+(this.firstIFrameTime2-this.firstIFrameTime1)," firstRenderTime      = "+(this.firstRenderTime-this.firstIFrameTime2)):t.push(" firstAudioPkgTime    = "+(this.firstAudioPkgTime-this.connectVideoTime)," firstRenderTime      = "+(this.firstRenderTime-this.firstAudioPkgTime)),t.push(" onPlayTime           = "+(this.onPlayTime-this.firstRenderTime)," totalTime            = "+(this.onPlayTime-this.startTime),".".repeat(28));var e=Wa(t,28);E.a.log(e,"color:#007500;background:#FFF5C2")}},{key:"printVpTime",value:function(){if(!this.printVpTime.done){this.printVpTime.done=!0;var t=Wa(["\n%c"+".".repeat(28)," initTafTime      = "+(this.initTafTime-0)," getVPTime        = "+(this.getVPTime-this.reqVpTime)," connectVpTime    = "+(this.connectVpTime-this.getVPTime)," loginTime        = "+(this.loginTime-this.connectVpTime)," totalTime        = "+(this.loginTime-this.reqVpTime),".".repeat(28)],28);E.a.log(t,"color:#007500;background:#FFF5C2")}}}]),t}(),Ka=i(25),Ya=function(){function t(e){Object(v.a)(this,t),this.loaderHandler=e,this._destroy=!1,this.reset()}return Object(g.a)(t,[{key:"reset",value:function(){this.u8arr=new Uint8Array(0)}},{key:"destroy",value:function(){E.a.log("SliceHandler.destroy"),this.u8arr=null,this._destroy=!0,this.loaderHandler=null}},{key:"onData",value:function(t){var e=this.u8arr,i=new Uint8Array(t);0===e.length?this.u8arr=i:(this.u8arr=new Uint8Array(e.length+i.length),this.u8arr.set(e,0),this.u8arr.set(i,e.length));var n=this.onProto(this.u8arr);n>0&&!this._destroy&&(this.u8arr=this.u8arr.slice(n))}},{key:"onProto",value:function(t){for(var e,i,n,r,o,a=new DataView(t.buffer),s=0,u=0;s+10<t.byteLength&&!this._destroy;){if((u=a.getUint16(s+8,!0))<10)return this.loaderHandler.onProtoError(u),s;if(s+u>t.byteLength)return s;n=a.getUint32(s,!0),r=4294967296*a.getUint32(s+4,!0)+n,o=a.getUint32(s+14,!0),i=t.slice(s+10,s+u),(e=new Ka.default).seq=r,e.uri=o,e.payload=i,this.loaderHandler&&this.loaderHandler.onSlice(Ti.a.PP2pSliceData,e),s+=u}return s}}]),t}(),za=function(){function t(e){Object(v.a)(this,t),this.loaderMgr=e,this.p2pPlayer=e.p2pPlayer,this.tsdbUtil=e.p2pPlayer.tsdb,this.stat=e.p2pPlayer.stat,this.type=t.TYPE_FULL,this.sliceHandler=new Ya(this),this.url=null,this.lineType=-1,this.started=!1,this.status=0,this.connecting=!1,this.connectTotalTs=0,this.flowRetryTimes=0,this.lastSeq=0,this.connectTs=0,this.connectedTs=0,this.firstPkgTs=0,this.reportUrl=null,this.sliceTs=0,this.sliceStamp=0,this.tcpStamp=0,this.logMark="FullStream",this.logMarkCss="color:#01814A;background:#FFF5C2;font-weight:bold;",this._testNodata=1==localStorage._testNodata,this._testRenderTimeout=1==localStorage._testRenderTimeout,this.ConnectTotalTime=Number(B.connectTotalTime),this.ConnectTimeout=Number(B.connectTimeout),this.FlowTimeout=Number(B.flowTimeout),this.FlowRetryTimes=Number(B.flowRetryTimes),this.RenderTimeout=Number(B.renderTimeout),this.NoDataTimeout=Number(B.noDataTimeout)}return Object(g.a)(t,[{key:"onSlice",value:function(t,e){var i=e.seq;0===this.lastSeq&&E.a.log("VideoLoader.onFirstSeq",this.getLoaderInfo(),"seq",i),this.lastSeq>0&&Math.abs(i-this.lastSeq)>1&&E.a.warn("VideoLoader seq discontinuous, lastSeq="+this.lastSeq+" curSeq="+i+" jump="+(i-this.lastSeq)),this.lastSeq=i,e.from=this.type,this.p2pPlayer.sliceProtoHandler.onSlice(e)}},{key:"onProtoError",value:function(t){E.a.error("SliceHandler.onProto length error pktLen="+t+", smaller than 10 bytes.",this.getLoaderInfo())}},{key:"getLoaderInfo",value:function(){var t="bufLen="+this.p2pPlayer.bufferLen;return"type=".concat(this.type," line=").concat(this.lineType," ").concat(t)}},{key:"resetReport",value:function(){this.sliceStamp=0,this.tcpStamp=0}},{key:"reset",value:function(){this.sliceHandler&&(this.sliceHandler.destroy(),this.sliceHandler=null),this.sliceHandler=new Ya(this),this.status=0,this.lastSeq=0,this.connecting=!1,this.connectTs=0,this.connectedTs=0,this.firstPkgTs=0,this.sliceTs=0,this.resetReport(),Ji.remove(this.onCheckTimer,this),Ji.remove(this.onConnectTimeout,this),Ji.remove(this.onFirstDataTimeout,this),Ji.remove(this.onRenderTimeout,this),this.link&&this.link.destroy(),this.url&&this.url.startsWith("http")?D.a.firefox&&Ea.isSupported()?this.link=new Ea(this):this.link=new ka(this):this.link=new Pa(this,!1)}},{key:"connect",value:function(t,e){this.url=t,this.lineType=e,this.reset();var i=F.a.now();this.connectTs=i,this.tcpStamp=i;var n=t,r=this.p2pPlayer.G;if(!r.isStartFromUrl){var o=B.platform,a=U.PLATFORM_TYPE[o]||U.PLATFORM_TYPE.web,s=o===U.PLATFORM_TYPE_NAME.wap?"&uid=".concat(r.uid,"&uuid=").concat(r.uuid):"&u=".concat(r.convertUid);n+="&timeStamp="+F.a.getDateTimeStr().replace(" ","_"),n+="".concat(s,"&t=").concat(a,"&sv=").concat(2206101758),r.myIp&&(n+="&myIp="+r.myIp)}E.a.log("%c".concat(this.logMark),this.logMarkCss,"".concat(n," ").concat(this.getLoaderInfo())),this.connecting=!0,this.link.connect(n),this.stat.setComDim(H,n),this.started=!0,Ji.add(this.onCheckTimer,this,1e3),this.p2pPlayer.beforeTurnToFlv(U.turnToFlvReason.FULL_CONNECT_TIMEOUT),Ji.once(this.onConnectTimeout,this,this.ConnectTimeout)}},{key:"reconnect",value:function(){if(null!=this.url&&-1!==this.lineType){var t=this.loaderMgr.antiCode;t&&-1===this.url.indexOf(t)&&(this.url=this.url.replace(/(wsSecret=.+?&wsTime=.+?)(\&|$)/,t+"$2"));var e=this.p2pPlayer.info;if(e){var i=new RegExp("//(.*?)"+e._domain+"/"),n=this.p2pPlayer.changeDomain();this.url=n?this.url.replace(i,"//"+n+"/"+e._domain+"/"):this.url.replace(i,"//"+e._domain+"/")}E.a.log("VideoLoader.reconnect"),this.close(),this.connect(this.url,this.lineType)}else E.a.error("VideoLoader.reconnect url=".concat(this.url," line=").concat(this.lineType))}},{key:"close",value:function(){this.reset(),this.started=!1}},{key:"on302",value:function(t){this.loaderMgr.on302(t)}},{key:"onheader",value:function(t){this.p2pPlayer.onHeader(t)}},{key:"onopen",value:function(){var t=F.a.now();this.connectedTs=t;var e=this.connectedTs-this.connectTs;E.a.log("VideoLoader.onopen ".concat(this.getLoaderInfo()," cost time=").concat(e));var i=this.p2pPlayer.G;0===i.connectVideoTime&&(i.connectVideoTime=t,E.a.log("%c[TIME] connectVideoTime="+(i.connectVideoTime-i.startTime)+" totalTime="+(t-i.startTime),"color:#A23400;background:#FFF5C2")),this.connecting=!1,this._reportTcp(),this.p2pPlayer.exceptionStat.setStat(At.CONNECT_SUC,1),this.p2pPlayer.beforeTurnToFlv(U.turnToFlvReason.FULL_NO_DATA),Ji.remove(this.onConnectTimeout,this),Ji.once(this.onFirstDataTimeout,this,this.FlowTimeout),this.loaderMgr.onConnected()}},{key:"_onclose",value:function(){this.connecting=!1,this.resetReport(),this.sliceTs>0?this.getProxy("onclose"):this.connectedTs>0?this.onFirstDataTimeout():Ji.once(this.onConnectTimeout,this,1e3),this.p2pPlayer.exceptionStat.setStat(At.CONNECT_SUC,0)}},{key:"onclose",value:function(){E.a.log("VideoLoader.onclose ".concat(this.getLoaderInfo())),this._onclose()}},{key:"onerror",value:function(t,e){E.a.log("VideoLoader.onerror ".concat(this.getLoaderInfo())),404!==e&&403!==e||(this.tsdbUtil.httpError=!0,this.tsdbUtil.sendMetrics([this.stat.createAct("http_code_"+e,{value:[this.type]})])),this._onclose()}},{key:"onstatus",value:function(t){this.status=t}},{key:"onConnectTimeout",value:function(){this.connectedTs>0||(this._reportStat(1),this.connectTotalTs+=F.a.now()-this.connectTs,E.a.warn("VideoLoader.onConnectTimeout connectTotalTs=".concat(this.connectTotalTs,"/").concat(this.ConnectTotalTime," ").concat(this.getLoaderInfo())),this.connectTotalTs<this.ConnectTotalTime&&this.reconnect(),this.p2pPlayer.loaderErrorTimes++)}},{key:"onFirstDataTimeout",value:function(){if(!(this.sliceTs>0)){var t=F.a.now();E.a.warn("VideoLoader.onFirstDataTimeout",t-this.connectedTs),this.flowRetryTimes++<this.FlowRetryTimes&&this.reconnect(),this.p2pPlayer.loaderErrorTimes++}}},{key:"onRenderTimeout",value:function(){this.sliceTs>0&&this.p2pPlayer.onRenderTimeout()}},{key:"_reportStat",value:function(t){this.stat.addComp(Te,"k"+this.type,1),this.stat.addComp(Pe,"k"+t,1)}},{key:"_reportNoSlice",value:function(t){if(0!==this.sliceStamp&&t-this.sliceStamp>2500&&this.url){this.p2pPlayer.exceptionStat.setStat(At.NO_SLICE_DATA,1);var e=this.p2pPlayer.G;this.tsdbUtil.sendMetrics([this.stat.createAct("tcp_no_slice",{value:[this.type],str:[e.wanIp]})]),this.sliceStamp=0}}},{key:"_reportNoHeader",value:function(){this.url&&this.reportUrl!==this.url&&(this.reportUrl=this.url)}},{key:"_reportTcp",value:function(){var t=this.p2pPlayer.G,e=F.a.now()-this.tcpStamp;this.tcpStamp>0&&e>1e3&&this.url&&e<1e4&&this.tsdbUtil.sendMetrics([this.stat.createAct("tcp_open_time",{value:[this.type,e],str:[t.wanIp]})]),this.tcpStamp=0}},{key:"onData",value:function(t){if(!this._testNodata){this.p2pPlayer.G.globalSpeedCalc.addCur(t.byteLength),this.p2pPlayer.addBytes(t.byteLength);var e=F.a.now();if(this.sliceTs=e,this.sliceStamp=e,0===this.firstPkgTs){this.firstPkgTs=e;var i=this.firstPkgTs-this.connectedTs,n=L.formatByteSize(t.byteLength);E.a.log("VideoLoader.onData ".concat(this.getLoaderInfo()," firstPkgTs=").concat(i," size=").concat(n)),this.p2pPlayer.beforeTurnToFlv(U.turnToFlvReason.FULL_PLAY_FAIL),Ji.remove(this.onFirstDataTimeout,this),Ji.once(this.onRenderTimeout,this,this.RenderTimeout),this.connectTotalTs=0,this.flowRetryTimes=0}this._testRenderTimeout||(this.link instanceof Pa?this.sliceHandler.onProto(new Uint8Array(t)):this.sliceHandler.onData(t),this.p2pPlayer.exceptionStat.setStat(At.HAS_DATA,1))}}},{key:"onCheckTimer",value:function(t,e){this.started&&(this._reportNoSlice(t),this.sliceTs>0&&t-this.sliceTs>=this.NoDataTimeout&&this.getProxy("noDataTime="+(t-this.sliceTs)))}},{key:"getProxy",value:function(t){E.a.log("VideoLoader.getProxy ".concat(t," ").concat(this.getLoaderInfo())),this._reportNoHeader(),this.reset(),this.p2pPlayer.loaderErrorTimes++,this.p2pPlayer.onRestart(U.restartReason.CONNECT)}},{key:"connected",get:function(){return this.link&&this.link.connected}},{key:"speed",get:function(){var t=this.link.speed;return t==L.UintMax&&(t=0),t}}]),t}();za.TYPE_FULL=1,za.TYPE_SUB=2,za.TYPE_RANGE=3,za.TYPE_PATCH=4;var Ja=za,Qa=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e,this.resetProperty(),this.fullLoader=new Ja(this)}return Object(g.a)(t,[{key:"init",value:function(t,e){this.p2pUrl=t,this.antiCode=e;var i=this.p2pPlayer.G;if(!i.isStartFromUrl){"/"===this.p2pUrl.substr(-1)&&(this.p2pUrl=this.p2pUrl.substr(0,this.p2pUrl.length-1)),this.p2pUrl=this.p2pUrl.replace(/^(http|ws)s?\:/i,""),this.streamName=i.streamId.text()+"_"+N.appid;var n=!0;if(-1===self.location.protocol.indexOf("https")){var r=B.p2pWssLines;"string"==typeof r&&(n="all"==(r=r.toLowerCase())||-1!=r.split(",").indexOf(i.lineType.toString()))}else n=!0;void 0===localStorage._testSSL?this.openWss=n:this.openWss=Number(localStorage._testSSL)>0}}},{key:"stop",value:function(){E.a.log("LoaderMgr.stop"),this.stopFullStream(),this.resetProperty()}},{key:"resetProperty",value:function(){this.p2pUrl=null,this.antiCode="",this.streamName="",this.openWss=!0}},{key:"getUrl",value:function(t){var e=t===Ja.TYPE_RANGE||t===Ja.TYPE_FULL&&!wa.isMacChrome72()?"http":"ws";this.openWss&&(e+="s");var i="",n=this.p2pPlayer.G;return this.p2pUrl.match(/al\.p2p\.huya\.com/)&&t!=Ja.TYPE_RANGE&&t!=Ja.TYPE_FULL&&(i="/websocket"),this.url="".concat(e,":").concat(this.p2pUrl).concat(i,"/").concat(this.streamName,".slice?").concat(this.antiCode,"&ex1=").concat(n.exip,"&baseIndex="),this.url}},{key:"loadFullStream",value:function(t,e,i){var n=this.p2pPlayer.G;isNaN(t)&&(E.a.error("LoaderMgr.loadSubStream baseIndex isNaN ["+t+"] change to 0."),t=0);var r=this.getUrl(Ja.TYPE_FULL)+t;i?r+="&startPts=".concat(i):0===t&&n.quickTime>0&&(r+="&quickTime=".concat(n.quickTime)),this.url=r,this.fullLoader.connect(r,n.lineType)}},{key:"stopFullStream",value:function(){this.fullLoader.close()}},{key:"onConnected",value:function(){this.p2pPlayer.onConnected()}},{key:"on302",value:function(t){this.p2pPlayer.on302(t)}}]),t}(),Xa=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"getFlvHeader",value:function(){var t=new Uint8Array(13),e=0;return t[e++]=70,t[e++]=76,t[e++]=86,t[e++]=1,t[e++]=5,t[e++]=0,t[e++]=0,t[e++]=0,t[e++]=9,t[e++]=0,t[e++]=0,t[e++]=0,t[e++]=0,t}},{key:"packAudioFlvTag",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=e.length+2,r=new Uint8Array(11+n+4),o=0;return r[o++]=8,r[o++]=n>>16&255,r[o++]=n>>8&255,r[o++]=255&n,r[o++]=t>>16&255,r[o++]=t>>8&255,r[o++]=255&t,r[o++]=t>>24&255,r[o++]=0,r[o++]=0,r[o++]=0,-1!=i&&(r[o++]=175,r[o++]=i),r.set(e,o),o+=e.length,n+=11,r[o++]=n>>24&255,r[o++]=n>>16&255,r[o++]=n>>8&255,r[o++]=255&n,r}},{key:"packAvcFlvTag",value:function(t,e,i){var n=e.length+5,r=new Uint8Array(11+n+4),o=0;r[o++]=9,r[o++]=n>>16&255,r[o++]=n>>8&255,r[o++]=255&n,r[o++]=t>>16&255,r[o++]=t>>8&255,r[o++]=255&t,r[o++]=t>>24&255,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=i||23,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,r.set(e,o),o+=e.length;var a=11+n;return r[o++]=a>>24&255,r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=255&a,r}},{key:"adtsToConfig",value:function(t){var e=new Uint8Array(2),i=1+((192&t[2])>>6),n=(60&t[2])>>2,r=(1&t[2])<<2|(192&t[3])>>6;return e[0]=i<<3|(14&n)>>1,e[1]=(1&n)<<7|r<<3,e}},{key:"setFrameTimestamp",value:function(t,e){e[4]=t>>16&255,e[5]=t>>8&255,e[6]=255&t,e[7]=t>>24&255}},{key:"getAvc",value:function(t){var e=t.streamData[0];return e+=t.streamData[1]<<8,e+=t.streamData[2]<<16,e+=t.streamData[3]<<24>>>0,t.streamData.slice(4,4+e)}},{key:"trimIFrame",value:function(t,e){t.streamData=t.streamData.slice(4+e)}}]),t}(),Za=function(){function t(){Object(v.a)(this,t),this.key=null,this.frameType=-1,this.pktNum=null,this.size=0,this.packets=[],this.streamData=null,this.firstPktSeq=null,this.lastPktSeq=null,this.dts=L.UintMax,this.recvTs=null,this.createTs=0,this._autoDrop=!1,this.urgentResendTimes=0}return Object(g.a)(t,[{key:"append",value:function(t){if(0===this.packets.length)this.createTs=F.a.now(),this.key=t.frameId,this.frameType=3&t.seqNum,this.pktNum=t.frameNum,this.packets.push(t),this.size+=t.streamData.length;else{if(1==localStorage._autoDrop&&(localStorage._autoDrop=0,this._autoDrop=!0),this._autoDrop)return!1;if(this.isFull)return!0;for(var e=!0,i=this.packets.length-1;i>=0;i--){if(this.packets[i].seqNum===t.seqNum)return!0;if(this.packets[i].seqNum<t.seqNum){this.packets.splice(i+1,0,t),this.size+=t.streamData.length,e=!1;break}}e&&(this.packets.splice(0,0,t),this.size+=t.streamData.length)}if(this.isFull){this.streamData=new Uint8Array(this.size);for(var n=0,r=this.packets.length,o=0;o<r;o++)try{this.streamData.set(this.packets[o].streamData,n),n+=this.packets[o].streamData.length}catch(t){return E.a.error("VideoFrame.append error, name:"+t.name+" msg:"+t.message),!1}if(n!==this.size)return E.a.error("VideoFrame.Append size error, infact:"+n+" expected:"+this.size+" key:"+this.key+" firstSeq:"+this.firstPktSeq+" lastSeq:"+(this.firstPktSeq+2*this.pktNum)+" num:"+this.pktNum+" len:"+this.packets.length),this.reset(),!1;if(this.firstPktSeq=this.packets[0].seq,this.lastPktSeq=this.packets[r-1].seq,this.dts=this.getFrameTime(),this.recvTs=F.a.now(),Number(localStorage._printVideoFrame)){var a=this.dts-E.a.lastDts,s=a>100?"background:#FF9797":"",u=a>100?"-_-":"";E.a.debug("%cVideo frameType="+this.frameType+" seq="+t.seq+" frameId="+this.key+" dts="+this.dts+" %c^dts="+a,"color:#F00",s,u),E.a.lastDts=this.dts}}return!0}},{key:"getMaxSeq",value:function(){return this.packets[this.packets.length-1].seq}},{key:"getFrameTime",value:function(){if(this.dts!==L.UintMax)return this.dts;if(!this.isFull)return L.UintMax;var t=0;this.isKeyFrame&&(t=this.streamData[0],t+=this.streamData[1]<<8,t+=this.streamData[2]<<16,t+=this.streamData[3]<<24>>>0,t+=4);var e=(255&this.streamData[t+7])<<24>>>0,i=(255&this.streamData[t+4])<<16,n=(255&this.streamData[t+5])<<8,r=255&this.streamData[t+6];return this.dts=e+i+n+r,this.dts}},{key:"getLostSeqs",value:function(){var t=[],e=this.packets.length;if(e<this.pktNum){for(var i=this.packets[0].seq,n=this.packets[e-1].seq,r=i,o=1;o<e;o++)for(var a=this.packets[o].seq;r<a;)t.push(r),r++;for(var s=this.pktNum-e;s-- >0;)t.unshift(--i),t.push(++n)}return t}},{key:"getSeqs",value:function(){var t=[];return this.packets.forEach((function(e){t.push(e.seq)})),t}},{key:"reset",value:function(){this.key=null,this.frameType=-1,this.pktNum=null,this.size=0,this.packets=[],this.firstPktSeq=null,this.lastPktSeq=null,this.dts=L.UintMax,this.recvTs=null}},{key:"isFull",get:function(){return this.packets.length===this.pktNum}},{key:"isEmpty",get:function(){return 0===this.packets.length}},{key:"isKeyFrame",get:function(){return 0===this.frameType}},{key:"isPFrame",get:function(){return 1===this.frameType}},{key:"isBFrame",get:function(){return 2===this.frameType}}]),t}(),$a=function(){function t(){Object(v.a)(this,t),this.size=0,this.head=null,this.freeChainSize=0,this.freeChain=null,this.travelNode=null}return Object(g.a)(t,[{key:"resetTravel",value:function(){this.travelNode=this.head}},{key:"travel",value:function(){if(null===this.travelNode&&(this.travelNode=this.head,null===this.travelNode))return null;var t=this.travelNode.data;return this.travelNode=this.travelNode.next,this.travelNode===this.head||null===this.travelNode?null:t}},{key:"reset",value:function(){this.resetTravel();var t=null,e=null;for(t=this.head;null!=t;)e=t,t=t.next,e.data=null,e.prev=null,e.next=null,t===this.head&&(t=null);for(this.head=null,t=this.freeChain;null!=t;)e=t,t=t.next,e.data=null,e.prev=null,e.next=null;this.freeChain=null,this.size=0,this.freeChainSize=0}},{key:"put",value:function(t){var e=this.getFree(t);if(this.size++,null===this.head)e.prev=e,e.next=e,this.head=e;else if(e.data.key<this.head.data.key)e.prev=this.head.prev,e.next=this.head,e.prev.next=e,e.next.prev=e,this.head=e;else{for(var i=this.head.prev;e.data.key<i.data.key;)i=i.prev;if(e.data.key===i.data.key)return this.size--,this.putFree(e),!1;e.prev=i,e.next=i.next,e.prev.next=e,e.next.prev=e}return!0}},{key:"put2",value:function(t){var e=this.getFree(t);if(this.size++,null===this.head)e.prev=e,e.next=e,this.head=e;else if(e.data.key<this.head.data.key)e.prev=this.head.prev,e.next=this.head,e.prev.next=e,e.next.prev=e,this.head=e;else{for(var i=this.head;e.data.key>i.data.key&&(i=i.next)!==this.head;);if(e.data.key===i.data.key)return this.size--,this.putFree(e),!1;e.prev=i.prev,e.next=i,i.prev.next=e,i.prev=e}return!0}},{key:"get",value:function(){if(null===this.head)return null;var t=this.head,e=t.data;return this.size--,0===this.size?this.head=null:(t.prev.next=t.next,t.next.prev=t.prev,this.head=this.head.next),this.putFree(t),e}},{key:"peek",value:function(){return null===this.head?null:this.head.data}},{key:"peekLast",value:function(){return null===this.head?null:this.head.prev.data}},{key:"getOrNewNode",value:function(t){var e=null;if(null===this.head)this.size++,(e=this.getFree(null)).prev=e,e.next=e,this.head=e;else if(t<this.head.data.key)this.size++,(e=this.getFree(null)).prev=this.head.prev,e.next=this.head,e.prev.next=e,e.next.prev=e,this.head=e;else{for(var i=this.head.prev;t<i.data.key;)i=i.prev;i.data.key===t?e=i:(this.size++,(e=this.getFree(null)).prev=i,e.next=i.next,e.prev.next=e,e.next.prev=e)}return e}},{key:"putFree",value:function(t){t.data=null,t.next=this.freeChain,t.prev=null,this.freeChain=t,this.freeChainSize++}},{key:"getFree",value:function(t){if(null===this.freeChain)return new ts(t);var e=this.freeChain;return e.data=t,this.freeChain=e.next,this.freeChainSize--,e}},{key:"getLast",value:function(){if(null==this.head)return null;var t=this.head.prev,e=t.data;return this.size--,0===this.size?this.head=null:(t.prev.next=t.next,t.next.prev=t.prev),this.putFree(t),e}}]),t}(),ts=function t(e){Object(v.a)(this,t),this.next=null,this.prev=null,this.data=e},es=$a,is=function(){function t(e){Object(v.a)(this,t),this.videoPlayer=e,this.firstFrameDts=0,this.isCanPlay=!1,this.lastPlaySeq=0,this.lastPlayDts=0,this.lastPlayFrameId=0,this.lastDtsJumpTs=0,this.lastFrameIdJumpTs=0,this.chain=new es}return Object(g.a)(t,[{key:"getSize",value:function(){return this.chain.size}},{key:"getWaitFrames",value:function(){return this.chain.size<=0?0:this.chain.peekLast().key-this.lastPlayFrameId}},{key:"getReason",value:function(){var t=this.chain.peek();return t&&this.lastPlayFrameId>0?t.isFull?t.key-this.lastPlayFrameId>1?1:2:3:0}},{key:"getFrameGap",value:function(){var t=this.chain.peek();return t&&this.lastPlayFrameId>0?t.key-this.lastPlayFrameId:0}},{key:"checkPlay",value:function(t,e){0===this.firstFrameDts&&(this.firstFrameDts=t,this.lastPlayDts=t-1),this.isCanPlay||(this.isCanPlay=t-this.firstFrameDts>=e)}},{key:"trimBeforeDts",value:function(t){for(var e=this.chain.peek();e&&e.dts<t;)this.chain.get(),e=this.chain.peek();return e&&E.a.log("Recver.trimBeforeDts "+(e instanceof Za?"video":"audio")+", firstFrame="+e.key+" firstDts="+e.dts),e}},{key:"_getFrameAble",value:function(t,e){if(0===this.lastPlayFrameId)return!0;if(e.key-this.lastPlayFrameId==1)return!0;var i=this.videoPlayer.getBufferLen();if(1===B.frameAblePloy){if(t-this.lastPushTs>i&&t-e.createTs>B.frameTimeout)return!0}else{if(t-this.lastPushTs>i)return!0;if(t-e.createTs>B.frameTimeout)return!0}return i<1e3&&t-e.recvTs>B.frameTimeout}},{key:"getFrame",value:function(t){var e=this.chain.peek();return e&&e.isFull&&this._getFrameAble(t,e)?(this.lastPlayFrameId>0&&e.key-this.lastPlayFrameId>1&&(this.lastFrameIdJumpTs=t,E.a.warn("Recver.getFrame isAudio=".concat(e.isAudio," frameId disconnect, lastId=").concat(this.lastPlayFrameId," curId=").concat(e.key," gap=").concat(e.key-this.lastPlayFrameId," cache=").concat(this.chain.size," disLastPushTs=").concat(t-this.lastPushTs))),this.lastPlayFrameId=e.key,this.lastPlayDts>0&&(e.dts-this.lastPlayDts>1e3||this.lastPlayDts-e.dts>1e3)&&(this.lastDtsJumpTs=t),this.lastPlayDts=e.dts,this.lastPushTs=t,this.chain.get(),e):null}},{key:"getMaxSeq",value:function(t){for(var e=this.chain.head,i=0;e;){var n=e.data;if(!(t-n.createTs>1100))break;if(i=n.getMaxSeq(),e.next===this.chain.head)break;e=e.next}return i}},{key:"hasNextFrame",value:function(t){var e=this.chain.peek();return!(!e||!e.isFull)&&(0===this.lastPlayFrameId||e.key-this.lastPlayFrameId==1||e.isTimeout(t))}},{key:"getNeedRangeSeqs",value:function(t,e,i){}},{key:"reset",value:function(){this.lastPlayFrameId=0,this.lastPlayDts=0,this.chain.reset(),this.isCanPlay=!1,this.firstFrameDts=0,this.lastPushTs=0}}]),t}(),ns=function(){function t(){Object(v.a)(this,t),this.type=null,this.createTs=0,this.recvTs=0,this.key=null,this.size=0,this.pktNum=0,this.packets=[],this.dts=0,this.streamData=null,this.aacConfig=null,this.firstPktSeq=0,this.lastPktSeq=0}return Object(g.a)(t,[{key:"setData",value:function(t,e,i){}},{key:"addData",value:function(t){}},{key:"reset",value:function(){this.key=null,this.pktNum=null,this.size=0,this.packets=[],this.streamData=null,this.firstPktSeq=0,this.lastPktSeq=0,this.dts=L.UintMax,this.recvTs=null}},{key:"isTimeout",value:function(t){return this.createTs>0&&t-this.createTs>B.frameTimeout}},{key:"getPos",value:function(){return 0}},{key:"getDts",value:function(){var t=this.getPos();return((255&this.streamData[t+7])<<24>>>0)+((255&this.streamData[t+4])<<16)+((255&this.streamData[t+5])<<8)+(255&this.streamData[t+6])}},{key:"getMaxSeq",value:function(){return this.packets[this.packets.length-1].seq}},{key:"getMinSeq",value:function(){return this.packets[0].seq}},{key:"getSeqs",value:function(){var t=[];return this.packets.forEach((function(e){t.push(e.seq)})),t}},{key:"getLostSeqs",value:function(){var t=[],e=this.packets.length;if(e<this.pktNum){for(var i=this.packets[0].seq,n=this.packets[e-1].seq,r=i,o=1;o<e;o++)for(var a=this.packets[o].seq;r<a;)t.push(r),r++;for(var s=this.pktNum-e;s-- >0;)t.unshift(--i),t.push(++n)}return t}},{key:"isAudio",get:function(){return this.type===t.Types.Audio}},{key:"isVideo",get:function(){return this.type===t.Types.Video}},{key:"isFull",get:function(){return this.packets.length===this.pktNum}},{key:"isEmpty",get:function(){return 0===this.packets.length}}]),t}();ns.Types={Video:"video",Audio:"audio"};var rs=ns,os=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){return Object(v.a)(this,i),e.call(this)}return Object(g.a)(i,[{key:"addData",value:function(t){if(0===this.packets.length)this.createTs=F.a.now(),this.key=t.frameId,this.frameType=3&t.seqNum,this.pktNum=t.frameNum,this.packets.push(t),this.size+=t.streamData.length;else{if(1==localStorage._autoDropVideo&&this.isVideo?(localStorage._autoDropVideo=0,this._autoDrop=!0):1==localStorage._autoDropAudio&&this.isAudio&&(localStorage._autoDropAudio=0,this._autoDrop=!0),this._autoDrop)return!1;if(this.isFull)return!0;for(var e=!0,i=this.packets.length-1;i>=0;i--){if(this.packets[i].seqNum===t.seqNum)return!0;if(this.packets[i].seqNum<t.seqNum){this.packets.splice(i+1,0,t),this.size+=t.streamData.length,e=!1;break}}e&&(this.packets.splice(0,0,t),this.size+=t.streamData.length)}if(this.isFull){this.streamData=new Uint8Array(this.size);for(var n=0,r=this.packets.length,o=0;o<r;o++)this.streamData.set(this.packets[o].streamData,n),n+=this.packets[o].streamData.length;this.firstPktSeq=this.packets[0].seq,this.lastPktSeq=this.packets[r-1].seq,this.dts=this.getDts(),this.recvTs=F.a.now()}return!0}}]),i}(rs),as=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).type=rs.Types.Video,t}return Object(g.a)(i,[{key:"getPos",value:function(){var t=0;return this.isKeyFrame&&(t=this.streamData[0],t+=this.streamData[1]<<8,t+=this.streamData[2]<<16,t+=this.streamData[3]<<24>>>0,t+=4),t}},{key:"isKeyFrame",get:function(){return 0===this.frameType}},{key:"isPFrame",get:function(){return 1===this.frameType}},{key:"isBFrame",get:function(){return 2===this.frameType}}]),i}(os),ss=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t){var n;return Object(v.a)(this,i),(n=e.call(this,t)).codecname="",n.avcConfig=null,n.lastRecvTs=0,n.lateSeqs=0,n.dropFrames=0,n.playedFrames=0,n.dtsJumpPauseTimes=0,n.skipFramePauseTimes=0,n.forceSkipFrameNums=0,n.waitNextIFrame=!1,n.frameSeqLostTs=0,n.frameDropTs=0,n}return Object(g.a)(i,[{key:"recvData",value:function(t){if(t.frameId<=this.lastPlayFrameId)return this.lateSeqs++,3;this.lastRecvTs=F.a.now(),t.config.has(12)&&(this.codecname=t.config.get(12));var e=this.chain.getOrNewNode(t.frameId);if(!e)return 4;var i=e.data;i||(i=new as,e.data=i),i.addData(t);var n=F.a.now(),r=this.videoPlayer.p2pPlayer.G;0===r.firstVideoPkgTime&&(r.firstVideoPkgTime=n,E.a.log("%c[TIME] firstVideoPkgTime="+(n-r.connectVideoTime)+" totalTime="+(n-r.startTime)+" seq="+t.seq+" frameType="+i.frameType,"color:#A23400;background:#FFF5C2"," frameId="+i.key)),0===r.firstIFrameTime1&&0===i.frameType&&(r.firstIFrameTime1=n,E.a.log("%c[TIME] firstIFrameTime1="+(n-r.connectVideoTime)+" totalTime="+(n-r.startTime)+" seq="+t.seq+" sliceNum="+i.pktNum,"color:#A23400;background:#FFF5C2"," frameId="+i.key));var o=i.isFull;return this.videoPlayer.firstTsStatus<2&&o&&i.isKeyFrame&&(this.videoPlayer.setFirstDTs(2,i.dts),r.firstIFrameTime2=n,E.a.log("%c[TIME] firstIFrameTime2="+(n-r.firstIFrameTime1)+" totalTime="+(n-r.startTime)+" seq="+t.seq+" sliceNum="+i.pktNum,"color:#A23400;background:#FFF5C2"," frameId="+i.key)),o?(this.checkPlay(i.dts,230),2):0}},{key:"needUrgendResend",value:function(t){var e=this.chain.peek();return e&&t-e.createTs>B.urgentResendTime}},{key:"getWaitFrameTime",value:function(t){var e=this.chain.peek();return e?t-e.createTs:0}},{key:"checkDropFrames",value:function(t){var e=this.chain.peek();if(!(e&&t-e.createTs<B.forceSkipFrameTime)){var i=this.lastPlayFrameId,n=0,r=this.chain.get();E.a.log("VideoRecver.checkDropFrames",r);var o=this.chain.peek(),a="VideoRecver.checkDropFrames",s=[],u=this.videoPlayer.p2pPlayer.p2pMgr.getLastContinueSeq(),c=0;for(r&&(u-(c=r.getMaxSeq())>200&&(this.frameSeqLostTs=t),n++,s.push(r.key),a+=" resendTimes:"+r.urgentResendTimes+" frameId:"+r.key+" pktNum:"+r.pktNum+" hasNum:"+r.packets.length+" seqs:"+(r.pktNum>0?"".concat(r.packets[0].seq,"-").concat(r.packets[r.packets.length-1].seq):""),a+=" lastContinueSeq=".concat(u));o;){if(o.isKeyFrame){this.setNextIFrame(o);break}this.waitNextIFrame=!0,s.push(o.key),o.isFull&&(this.lastPlayDts=o.dts,this.lastPlaySeq=o.firstPktSeq),c=o.getMaxSeq(),this.chain.get(),o=this.chain.peek(),n++}c>0&&c>u&&this.videoPlayer.p2pPlayer.p2pMgr.setLastContinueSeq(c),n>0&&(this.frameDropTs=t,this.forceSkipFrameNums+=n,a+=" dropNum:"+n+" cache:"+this.chain.size+" lastPlayFrameID:"+i,E.a.log(a,s))}}},{key:"checkNextIframe",value:function(){if(this.waitNextIFrame)for(var t=this.chain.peek();t;){if(t.isKeyFrame){this.setNextIFrame(t);break}this.lastPlayFrameId=t.key,t.isFull&&(this.lastPlayDts=t.dts,this.lastPlaySeq=t.firstPktSeq),this.chain.get(),t=this.chain.peek()}}},{key:"setNextIFrame",value:function(t){E.a.log("VideoRecver.setNextIFrame",this.lastPlayFrameId,this.lastPlayDts,t.key,t.dts),this.lastPlayFrameId=t.key-1,t.isFull&&(this.lastPlayDts=t.dts,this.lastPlaySeq=t.firstPktSeq),this.waitNextIFrame=!1}},{key:"getNeedRangeSeqs",value:function(t,e){var i=this;if(this.lastPlayFrameId>0&&this.chain.size>0)for(var n=this.chain.head;;){var r=n.data;if(r.isFull&&r.dts>=t)break;if(r.isFull||0!==r.urgentResendTimes||(r.urgentResendTimes=1,r.getLostSeqs().forEach((function(t){i.videoPlayer.hasSeq(t)||e.add(t)}))),e.size>640)break;if((n=n.next)===this.chain.head)break}}},{key:"getFrame",value:function(t){var e=On(Object(Cn.a)(i.prototype),"getFrame",this).call(this,t);return e&&(this.lastPlaySeq=e.firstPktSeq),e}},{key:"printInfo",value:function(t){var e=this.chain.head,i=0,n=0,r=0,o=0;e&&(i=e.data.key,n=e.data.getMaxSeq());for(var a=0,s=0,u=0;e;){var c=e.data;if(a++,s+=c.pktNum,u+=c.size,e.next===this.chain.head){r=c.key,o=c.getMaxSeq();break}e=e.next}E.a.log("VideoInfo ".concat(t," frameCnt=").concat(a," pktCnt=").concat(s," hasCnt=").concat(u," firstId=").concat(i," firstSeq=").concat(n," endId=").concat(r," endSeq=").concat(o))}},{key:"reset",value:function(){On(Object(Cn.a)(i.prototype),"reset",this).call(this),this.waitNextIFrame=!1,this.codecname="",this.avcConfig=null,this.lastRecvTs=0}}]),i}(is),us={MUSIC_MID:1,MUSIC_MID_TIME_LEN:2048e3/44100,MUSIC_MID_128:35,MUSIC_MID_128_TIME_LEN:1024e3/44100,MUSIC_MID_160:36,MUSIC_MID_160_TIME_LEN:1024e3/44100,MUSIC_MID_192:37,MUSIC_MID_192_TIME_LEN:1024e3/44100,MUSIC_MID_48K_MONO:100,MUSIC_MID_48K_STEREO:101,MUSIC_MID_48K_TIME_LEN:1024e3/48e3,VOICE_HIGHER:2,VOICE_HIGHER_TIME_LEN:20,VOICE_HIGHER_FRAME_LEN:882,VOICE_HIGHER_QUALITY1:22,VOICE_HIGHER_QUALITY1_TIME_LEN:20,VOICE_HIGHER_QUALITY1_FRAME_LEN:882,getAudioTimeLen:function(t){switch(t){case this.MUSIC_MID:return this.MUSIC_MID_TIME_LEN;case this.MUSIC_MID_128:return this.MUSIC_MID_128_TIME_LEN;case this.MUSIC_MID_160:return this.MUSIC_MID_160_TIME_LEN;case this.MUSIC_MID_192:return this.MUSIC_MID_192_TIME_LEN;case this.MUSIC_MID_48K_MONO:case this.MUSIC_MID_48K_STEREO:return this.MUSIC_MID_48K_TIME_LEN;case this.VOICE_HIGHER:return this.VOICE_HIGHER_TIME_LEN;default:return this.MUSIC_MID_TIME_LEN}}},cs=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).type=rs.Types.Audio,t}return i}(function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){return Object(v.a)(this,i),e.call(this)}return Object(g.a)(i,[{key:"setData",value:function(t,e,i){this.key=t,this.streamData=e,this.packets.push(i),this.dts=this.getDts(),this.recvTs=this.createTs=F.a.now(),this.firstPktSeq=this.lastPktSeq=i.seq}},{key:"isFull",get:function(){return!0}}]),i}(rs)),ls=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).type=rs.Types.Audio,t}return Object(g.a)(i,[{key:"getAacConfig",value:function(){return this.isFull?this.packets[0].audioHeader:null}}]),i}(os),hs=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t){var n;return Object(v.a)(this,i),(n=e.call(this,t)).isAudioFrameTimeLenInited=!1,n.audioFrameTimeLen=us.MUSIC_MID_TIME_LEN,n.isAacCfgChange=!1,n.offset=0,n.lastRecvFrameDts=0,n.lastResendSeq=0,n.lastResendFrameId=0,n.audioCnt=0,n.bigAudioCnt=0,n.aacConfig=null,n}return Object(g.a)(i,[{key:"resetAudioNum",value:function(){this.audioCnt=0,this.bigAudioCnt=0}},{key:"reset",value:function(){On(Object(Cn.a)(i.prototype),"reset",this).call(this),this.isAudioFrameTimeLenInited=!1,this.audioFrameTimeLen=us.MUSIC_MID_TIME_LEN,this.lastRecvFrameDts=0,this.lastPlaySeq=0,this.aacConfig=null,this.lastResendSeq=0,this.lastResendFrameId=0,this.resetAudioNum()}},{key:"recvData",value:function(t){if(t.seq<=this.lastPlaySeq)return 3;var e=F.a.now(),i=this.videoPlayer.p2pPlayer.G;return 0===i.firstAudioPkgTime&&(i.firstAudioPkgTime=e,E.a.log("%c[TIME] firstAudioPkgTime="+(e-i.connectVideoTime)+" totalTime="+(e-i.startTime),"color:#A23400;background:#FFF5C2")),this.isAudioFrameTimeLenInited||(this.isAudioFrameTimeLenInited=!0,this.audioFrameTimeLen=us.getAudioTimeLen(t.codecType),E.a.log("AudioRecver.recvData codecType="+t.codecType+" aacTimeLen="+this.audioFrameTimeLen)),this.offset=0,this.readAacConfig(t),this.readAacTag(t),2}},{key:"recvDataV2",value:function(t){if(1!=B.closeBigAudio){if(t.frameId<=this.lastPlayFrameId)return 3;var e=this.chain.getOrNewNode(t.frameId);if(!e)return 4;var i=e.data;if(i||(i=new ls,e.data=i,this.bigAudioCnt++),i.addData(t),i.isFull){var n=i.getAacConfig();return this._printAudioFrame(i),this._updateAacConfig(n),this.isAacCfgChange&&(i.aacConfig=n),this.checkPlay(i.dts,500),2}return 0}}},{key:"readAacConfig",value:function(t){var e=t.streamData,i=(e[1]<<16)+(e[2]<<8)+e[3];this.offset=11+i+4;var n=e.slice(0,this.offset);this._updateAacConfig(n)}},{key:"_updateAacConfig",value:function(t){this.isAacCfgChange=!1,null===this.aacConfig?(this.aacConfig=t,this.videoPlayer.initAacConfig(t),E.a.log("AudioRecver.decodeAacConfig aacConfig="+t.slice(-8,-4).toString())):this.aacConfig.toString()!==t.toString()&&(E.a.warn("AudioRecver.decodeAacConfig aacConfig change, "+this.aacConfig.slice(-8,-4).toString()+" -> "+t.slice(-8,-4).toString()),this.isAacCfgChange=!0,this.aacConfig=t)}},{key:"readAacTag",value:function(t){for(var e,i,n,r=t.streamData,o=this.videoPlayer.isFirstAudio(),a=new DataView(r.buffer),s=r.length,u=this.offset;u<s;)if(e=a.getUint32(u,!0),(i=a.getUint32(u+4,!0))<=this.lastPlayFrameId)u+=e;else{n=r.slice(u+8,u+e),u+=e;var c=new cs;c.setData(i,n,t),this.isAacCfgChange&&(c.aacConfig=this.aacConfig),this.audioCnt++,this.chain.put(c),o&&(o=!1,this.videoPlayer.setFirstDTs(0,c.dts)),this.checkPlay(c.dts,500),this._printAudioFrame(c),this.lastRecvFrameDts=c.dts}}},{key:"_printAudioFrame",value:function(t){if(1===Number(localStorage._printAudioFrame)){var e=t.dts-this.lastRecvFrameDts,i=e>100?"background:#FF9797":"",n=e>100?"-.-":"";E.a.debug("%cAudio firstSeq="+t.firstPktSeq+(t.firstPktSeq!==t.lastPktSeq?" lastSeq="+t.lastPktSeq:"")+" frameId="+t.key+" dts="+t.dts+" %c^dts="+e,"color:#090",i,n)}}},{key:"checkDropFrames",value:function(){var t=this.chain.peek();if(t&&!t.isFull){var e=this.videoPlayer.getCurrentDts();if(this.lastPlayDts<e||this.lastPlayDts-e<800){for(var i=[],n=0,r=0;t&&!t.isFull;)0===n&&(n=t.getMinSeq()),i.push(t.key),this.lastPlaySeq=r=t.getMaxSeq(),this.lastPlayFrameId=t.key,this.chain.get(),t=this.chain.peek();i.length>0&&E.a.log("AudioRecver.checkDropFrames frames=".concat(i.join(",")," seqFrom=").concat(n," seqTo=").concat(r," curDts=").concat(e," lastPushDts=").concat(this.lastPlayDts," hasFrames=").concat(this.chain.size))}}}},{key:"hasNextFrame",value:function(t){var e=On(Object(Cn.a)(i.prototype),"hasNextFrame",this).call(this,t);return e||this.videoPlayer.fastOver||1!=B.closeBigAudio||(e=!0),e}},{key:"_getFrameAble",value:function(t,e){var n=On(Object(Cn.a)(i.prototype),"_getFrameAble",this).call(this,t,e);return n||this.videoPlayer.fastOver||1!=B.closeBigAudio||(n=!0),n}},{key:"getFrame",value:function(t){var e=On(Object(Cn.a)(i.prototype),"getFrame",this).call(this,t);return e&&(this.lastPlaySeq=e.firstPktSeq),e}},{key:"getNeedRangeSeqs",value:function(t,e,i){if(this.lastPlayFrameId>0&&this.chain.size>0){for(var n=Math.max(this.lastResendFrameId,this.lastPlayFrameId),r=this.chain.head;;){var o=r.data;if(o.key-1>n&&(this.getLostSeqs(o,e,i),n=o.key),e.size>=640)break;if((r=r.next)===this.chain.head)break}this.lastResendFrameId=n}}},{key:"getLostSeqs",value:function(t,e,i){for(var n=Math.max(this.lastResendSeq,this.lastPlaySeq),r=t.getMaxSeq(),o=n;o<r&&(o>this.lastResendSeq&&(i(o)||e.add(o),this.lastResendSeq=o),!(e.size>=640));o++);}}]),i}(is),ds=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e,this.sliceSpeed=(e.info.curBitrate||500)/1e3*125,this.firstDts=0,this.firstTsStatus=-1,this.fastOver=!1,this.startDts=0,this.startTs=0,this.startSeq=0,this.recvSeqs=0,this.lastRecvSeqs=0,this.pushFrames=0,this.lastPushFrames=0,this.lastPushFrameTs=0,this.lastResendSeq=0,this.lastPlayVideoSeq=0,this.lastPushFrameTimerTs=0,this.lastPushFrameTimerCnt=0,this.printRecvFrameTs=0,this.videoRecver=new ss(this),this.audioRecver=new hs(this),this.downFrameRate=new qn,this.flvHeader=Xa.getFlvHeader(),this.msePlayer=e.mse,this.createMse(this.msePlayer),this.metadataTick=new Ta(e.eventEmitter,this.msePlayer),this.pushVideoFrameBind=this.pushVideoFrame.bind(this),this.pushAudioFrameBind=this.pushAudioFrame.bind(this),this.hasSeqBind=this.hasSeq.bind(this)}return Object(g.a)(t,[{key:"dispose",value:function(){this.startDts=0,this.startTs=0,this.lastResendSeq=0,this.lastPushFrameTimerTs=0,this.lastPushFrameTimerCnt=0,this.videoRecver.reset(),this.audioRecver.reset(),Ji.remove(this.onPushFrameTimer,this)}},{key:"createMse",value:function(t){t.parser.reset(),this.videoRecver.reset(),this.audioRecver.reset(),t.setPushGop(B.pushGop),t.appendFlv(this.flvHeader)}},{key:"resetMse",value:function(){this.startDts=0,this.startTs=0,this.lastResendSeq=0,this.audioRecver.aacConfig=null,this.videoRecver.avcConfig=null,this.lastPushFrameTimerTs=0,this.lastPushFrameTimerCnt=0,Ji.remove(this.onPushFrameTimer,this),this.metadataTick.reset(),this.metadataTick.mse=this.msePlayer}},{key:"onVideoStreamData",value:function(t){this.recvSeqs++,this.lastRecvSeq=t.seq,2===this.videoRecver.recvData(t)&&(this.downFrameRate.addFrame(),this._onFrameData())}},{key:"onAudioStreamData",value:function(t){this.lastRecvSeq=t.seq,2===this.audioRecver.recvData(t)&&this._onFrameData()}},{key:"onAudioStreamDataV2",value:function(t){this.lastRecvSeq=t.seq,2===this.audioRecver.recvDataV2(t)&&this._onFrameData()}},{key:"_onFrameData",value:function(){1===B.pushFramePloy&&this.fastOver?this.onPushFrameTimer(F.a.now()):this.pushFastFrame()}},{key:"onPushFrameTimer",value:function(t,e){1===B.pushFramePloy?0===this.lastPushFrameTimerTs?this.lastPushFrameTimerTs=t:t-this.lastPushFrameTimerTs>=200&&(this.lastPushFrameTimerTs=t,this.lastPushFrameTimerCnt++,this._onPushFrameTimer(t,this.lastPushFrameTimerCnt)):this._onPushFrameTimer(t,e)}},{key:"_onPushFrameTimer",value:function(t,e){0===this.printRecvFrameTs?this.printRecvFrameTs=t:t-this.printRecvFrameTs>=1e3&&(this.printRecvFrameTs=t,this.lastRecvSeqs>0&&1===Number(localStorage._printRecvFrame)&&E.a.log("RecvSeqs",this.recvSeqs-this.lastRecvSeqs,"PushFrames",this.pushFrames-this.lastPushFrames,"HasFrames",this.videoRecver.chain.size,"buffer",this.msePlayer?this.msePlayer.getBufferLen():0,"lastPlayDts",this.videoRecver.lastPlayDts,"lastPlayFrameId",this.videoRecver.lastPlayFrameId),this.lastRecvSeqs=this.recvSeqs,this.lastPushFrames=this.pushFrames),this.videoRecver.checkNextIframe(),this.pushFrame(this.startDts+(t-this.startTs),t),this.msePlayer.buffered._calc(t,"push"),this.p2pPlayer.p2pMgr.setLastPushedFrame(this.videoRecver.lastPlayDts,this.videoRecver.lastPlayFrameId,this.getBufferLen()),this.checkRangeSeqs(t)}},{key:"onUpdateLastPlayedFrameId",value:function(t,e){this.setLastPlayVideoSeq(e)}},{key:"hasSeq",value:function(t){return this.p2pPlayer.p2pMgr.hasSeq(t)}},{key:"setLastPlayVideoSeq",value:function(t){this.lastPlayVideoSeq=t,this.p2pPlayer.p2pMgr.setLastPlaySeq(t)}},{key:"checkRangeSeqs",value:function(t){var e=this.startDts+(t-this.startTs),i=e-this.videoRecver.lastPlayDts;if(i>6e3&&this.getBufferLen()<600&&this.videoRecver.checkDropFrames(t),this.audioRecver.checkDropFrames(),this.msePlayer.getBufferLen()<2e3&&this.p2pPlayer.p2pMgr.hasPub()&&this.videoRecver.needUrgendResend(t)&&2!=B.resendMode){var r=new n.default;if(this.videoRecver.getNeedRangeSeqs(e,r,this.hasSeqBind),this.audioRecver.getNeedRangeSeqs(e,r,this.hasSeqBind),r.size<640)for(var o=Math.max(this.lastResendSeq,this.videoRecver.lastPlaySeq),a=this.videoRecver.lastPlaySeq+Math.ceil(this.sliceSpeed*i/1e3*.6),s=o;s<a&&(s>this.lastResendSeq&&(this.hasSeq(s)||r.add(s),this.lastResendSeq=s),!(r.size>=640));s++);var u=(0,d.default)(r);u.length>0&&(1===Number(localStorage._printRange)&&E.a.log("VideoPlayer.checkRangeSeqs time=".concat(i," bufferLen=").concat(this.msePlayer.getBufferLen()," seqCnt=").concat(u.length," firstSeq=").concat(u[0]," endSeq=").concat(u[u.length-1]," size=").concat(this.videoRecver.chain.size," lastRecvSeq=").concat(this.lastRecvSeq," lastPlayDts=").concat(this.videoRecver.lastPlayDts," lastPlayFrameId=").concat(this.videoRecver.lastPlayFrameId)),this.p2pPlayer.p2pMgr.urgentResend(u))}}},{key:"pausedTooLong",value:function(){}},{key:"pushFastFrame",value:function(){this.fastOver||0===this.firstTsStatus&&!this.audioRecver.isCanPlay||2===this.firstTsStatus&&!this.videoRecver.isCanPlay||this.pushFrame(this.firstDts+36e5,0)}},{key:"pushFrame",value:function(t,e){for(;;)if(this.audioRecver.hasNextFrame(e)&&this.audioRecver.lastPlayDts<this.videoRecver.lastPlayDts){if(!this.checkPushFrame(e,this.audioRecver,this.pushAudioFrameBind))break}else if(!this.checkPushFrame(e,this.videoRecver,this.pushVideoFrameBind))break}},{key:"getDtsGap",value:function(){return this.videoRecver.lastPlayDts-this.audioRecver.lastPlayDts}},{key:"isDownEnough",value:function(){return this.downFrameRate.isDownEnough(this.msePlayer.getRealFps())}},{key:"getReasons",value:function(t){var e=this.getReason(this.audioRecver),i=this.getReason(this.videoRecver);return 2===i&&this.audioRecver.hasNextFrame(t)&&this.audioRecver.lastPlayDts<this.videoRecver.lastPlayDts&&this.msePlayer.getBufferLen()>1e3&&(i=4),2===e&&this.audioRecver.lastPlayDts>this.videoRecver.lastPlayDts&&(e=3),{audioReason:e,videoReason:i}}},{key:"getReason",value:function(t){var e=t.chain.peek();return e&&t.lastPlayFrameId>0?e.isFull?e.key-t.lastPlayFrameId>1?1:2:3:0}},{key:"checkPushFrame",value:function(t,e,i){var n=e.getFrame(t);return!!n&&(i(n,t),!0)}},{key:"pushVideoFrame",value:function(t,e){if(t){if(this.pushFrames++,this.lastPushFrameTs=e,t.isKeyFrame){var i=Xa.getAvc(t);if(!this.videoRecver.avcConfig||this.videoRecver.avcConfig.toString()!==i.toString()){var n=i.length+4+11,r=31&t.streamData[n];this.videoRecver.avcConfig=i;var o=Xa.packAvcFlvTag(t.dts,i,r);this.msePlayer&&this.msePlayer.appendFlv(o)}Xa.trimIFrame(t,i.length)}this.videoRecver.avcConfig&&(this.msePlayer&&(this.msePlayer.parser.ctrlBuffer.setCurFrameId(t.key),this.msePlayer.appendFlv(t.streamData)),t.streamData=null,this.onUpdateLastPlayedFrameId(t.id,t.lastPktSeq-1)),t.played=!0}}},{key:"pushAudioFrame",value:function(t,e){t&&(t.dts<this.firstDts-this.audioRecver.audioFrameTimeLen||(t.aacConfig&&(E.a.log("VideoPlayer.playAudio aacConfig change"),this.msePlayer&&this.msePlayer.appendFlv(t.aacConfig),t.aacConfig=null),this.msePlayer&&this.msePlayer.appendFlv(t.streamData),t.streamData=null))}},{key:"initAacConfig",value:function(t){this.msePlayer&&this.msePlayer.appendFlv(t)}},{key:"setFirstDTs",value:function(t,e){var i=this.firstTsStatus;i>=t||(E.a.log("VideoPlayer.setFirstTs status="+i+"->"+t+" firstTs="+e+" jitBufLen="+B.jitBufLen),this.firstDts=e,this.lastPlayDts=e+200,this.firstTsStatus=t,0===i&&2===t&&(E.a.info("VideoPlayer.setFirstDTs resetMse"),this.resetMse()),2===t?(this.videoRecver.trimBeforeDts(this.firstDts),this.audioRecver.trimBeforeDts(this.firstDts),this.msePlayer&&this.audioRecver.aacConfig&&this.msePlayer.appendFlv(this.audioRecver.aacConfig)):0===t&&this.audioRecver.trimBeforeDts(this.firstDts))}},{key:"isFirstAudio",value:function(){return this.firstTsStatus<=0}},{key:"onCheckFastTimer",value:function(t,e){this.msePlayer&&e%10==0&&this.msePlayer.onCheckFastTimer(t,e)}},{key:"onCheckTimer",value:function(t,e){this.msePlayer&&this.msePlayer.onCheckTimer(t,e),this.metadataTick.onCheckTimer(t,e)}},{key:"setFastOver",value:function(){E.a.log("VideoPlayer.setFastOver firstDts",this.firstDts,"videoDts",this.videoRecver.firstFrameDts,this.videoRecver.lastPlayDts,"autioDts",this.audioRecver.firstFrameDts,this.audioRecver.lastPlayDts),this.fastOver=!0,0===this.videoRecver.lastPlayFrameId||0===this.audioRecver.lastPlayFrameId?E.a.warn("VideoPlayer.setFastOver video||audio lastPlayFrameId=0"):(this.startDts=this.videoRecver.lastPlayDts,this.startTs=F.a.now(),this.startSeq=this.videoRecver.lastPlaySeq,Ji.add(this.onPushFrameTimer,this,200))}},{key:"getCurrentTime",value:function(){return this.msePlayer?this.msePlayer.getCurrentTime():0}},{key:"getCurrentDts",value:function(){return this.msePlayer?this.msePlayer.getCurrentDts():0}},{key:"getCurrentSeiOffsetDts",value:function(){return this.msePlayer?this.msePlayer.getCurrentSeiOffsetDts():0}},{key:"getCurrentRealTime",value:function(){return this.msePlayer.getCurrentRealTime()}},{key:"getBufferLen",value:function(){return this.msePlayer?this.msePlayer.getBufferLen():0}},{key:"getFrameBufferLen",value:function(){return this.msePlayer?this.msePlayer.getFrameBufferLen():0}},{key:"getWaitBufferLen",value:function(){var t=this.videoRecver.getWaitFrames();return t>0&&this.msePlayer.metadata&&this.msePlayer.metadata.fps>0?t/this.msePlayer.metadata.fps*1e3:0}},{key:"getWaitFrameTime",value:function(t){return this.videoRecver.getWaitFrameTime(t)}},{key:"setQuickVideoLen",value:function(t){}},{key:"setPlaybackrateAccess",value:function(t){this.msePlayer&&this.msePlayer.setPlaybackrateAccess(t)}},{key:"getStat",value:function(){var t={lateSeqs:this.videoRecver.lateSeqs,dropFrames:this.videoRecver.dropFrames,playedFrames:this.videoRecver.playedFrames,dtsJumpPauseTimes:this.videoRecver.dtsJumpPauseTimes,skipFramePauseTimes:this.videoRecver.skipFramePauseTimes,forceSkipFrameNums:this.videoRecver.forceSkipFrameNums,playDelayAvg:0,hasFrames:this.videoRecver.chain.size,emptyFrames:this.msePlayer.parser.emptyFrames||0};return this.videoRecver.lateSeqs=0,this.videoRecver.dropFrames=0,this.videoRecver.playedFrames=0,this.videoRecver.dtsJumpPauseTimes=0,this.videoRecver.skipFramePauseTimes=0,this.videoRecver.forceSkipFrameNums=0,this.msePlayer.parser.emptyFrames=0,t}},{key:"switchStart",value:function(){E.a.log("VideoPlayer.switchStart lastPlayFrameId(video=".concat(this.videoRecver.lastPlayFrameId," audio=").concat(this.audioRecver.lastPlayFrameId,") lastPlayDts=(video=").concat(this.videoRecver.lastPlayDts," audio=").concat(this.audioRecver.lastPlayDts,")")),this.msePlayer.parser.reset(),this.videoRecver.reset(),this.audioRecver.reset(),this.msePlayer.setPushGop(B.pushGop),this.msePlayer.appendFlv(this.flvHeader)}}]),t}(),fs=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e,this.tsdbUtil=e.tsdb,this.stat=e.stat,this.data={act:"webhuyah5qa",uid:0,sid:0,subsid:0,linetype:-1,sendcnt:0,paucount:0,paulength:0,bflength:0,vr:0,httphead:"",rel:"jsscene",ref:location.href,isp2p:1},this.img=null,this.isPaused=!1,this.hasEmptyFrames=!1,this.isFirstReport=!0}return Object(g.a)(t,[{key:"send",value:function(){}},{key:"record",value:function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];i&&(this.isPaused=!0),this.sendNewMetrics(t,e,i,n,r,o)}},{key:"sendFlow",value:function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.p2pPlayer.p2pMgr;a&&a.fast_bw>0&&this.stat.addCore(Ht,a.fast_bw),this.record(t,e,i,n,r,o)}},{key:"sendNewMetrics",value:function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.p2pPlayer.G,s=this.p2pPlayer.p2pStat.getMetrics(),u=this.p2pPlayer.mse;if(this.stat.setCoreDim(bt,U.userProperty.P2P),this.stat.setCoreDim(_t,i?100:0),this.stat.setCoreDim(St,i||t>0?100:0),this.stat.setCoreDim(wt,n),this.stat.setCoreDim(Tt,0),this.stat.setComDim(yt,u.JITTER_BUFLEN),this.p2pPlayer._hyPlayer&&this.p2pPlayer._hyPlayer.visibility&&this.p2pPlayer._hyPlayer.visibility.setHiddenTimeStat&&this.p2pPlayer._hyPlayer.visibility.setHiddenTimeStat(),this.p2pPlayer.player&&(u.pauseStat.record(this.stat),u.buffered.record(this.stat)),this.p2pPlayer.recSysStat.recordHeart(this.stat),this.p2pPlayer.autoMonitor.recordHeartType(),this.recordC2CDelay(),this.recordAuto(),this.isFirstReport?this.isFirstReport=!1:s.push({sMetricName:oi.METRIC.VIDEO_BAD_QUALITY_RATIO,vField:{value:this.isPaused?100:0,pausecnt:t,forceskipframe:r},vDimension:{success:this.tsdbUtil.hasP2P,originalBitrate:0===this.p2pPlayer.info.originalBitrate?1:0,p2pCooling:N.p2pCooling?1:0,topSid:a.sid,reason:n,quality:i||t>0?100:0},vExLog:{cdnip:this.p2pPlayer.getCdnip()}}),this.isPaused=!1,this.hasEmptyFrames=!1,this.p2pPlayer.p2pMgr.stream){var c=this.p2pPlayer.p2pMgr.stream,l=c.stat;if(l.record&&l.record(),l.subStreamStat){var h=l.subStreamStat.substream_type,d=l.subStreamStat.substream_state;if(h&&d&&h.length===d.length){for(var f=h.length,p="",m=0;m<f;m++)m>0&&(p+=","),p+=h[m]+":"+d[m];this.stat.setCoreDim(ot,p)}}for(var y in l.bw){var v=l.bw[y];v>0&&this.stat.addCore(y,v)}for(var g in l.pcdn_data){var _=l.pcdn_data[g];_>0&&this.stat.setCore(g,_)}for(var S in l.pcdn_rsp){var w=l.pcdn_rsp[S];switch(void 0===w?"undefined":(0,k.default)(w)){case"string":""!==w&&this.stat.setCoreDim(S,w);break;case"object":var b=this._getPcdnRspValue(w);""!==b&&this.stat.setCoreDim(S,b)}}if(l.sub_change_state){var I=this.getSubChangeState(l.sub_change_state);I.length>0&&this.stat.setCoreDim(pt,I)}for(var T in l.core)T===H&&Lo(this.stat,l.core[T],this.p2pPlayer.info.sStreamName),this.stat.setComDim(T,l.core[T]);for(var P in this.stat.cdn_sip&&""!=this.stat.cdn_sip&&this.stat.setComDim(nt,this.stat.cdn_sip),l.pcdn_data_state)this.stat.setComDim(P,l.pcdn_data_state[P]);l.hasOwnProperty("range_sip_suc_cnt")&&(l.range_sip_suc_cnt>0&&this.stat.setCore(te,l.range_sip_suc_cnt),l.range_sip_dif_cnt>0&&this.stat.setCore(ee,l.range_sip_dif_cnt),l.range_req_cnt>0&&this.stat.setCore(ie,l.range_req_cnt),l.range_rsp_cnt>0&&this.stat.setCore(ne,l.range_rsp_cnt),l.range_info.connectCnt>0&&this.stat.setCore(re,parseInt(l.range_info.connectTime/l.range_info.connectCnt)),l.range_info.rspCnt>0&&this.stat.setCore(oe,parseInt(l.range_info.rspTime/l.range_info.rspCnt))),this.recordSample(!1),this.stat.setCore(Wt,this.p2pPlayer.bufferLen+this.p2pPlayer.frameBufferLen),this.stat.setCore(Xt,c.getPunchedCnt()),this.stat.setCore(Zt,l.forward_reject_cnt),this.setComp(l,ae),this.setComp(l,pe),this.setComp(l,me),this.setComp(l,ye),this.setComp(l,ve),this.setComp(l,_e),this.setComp(l,Se),this.setComp(l,we),this.setComp(l,ge),this.setComp(l,be),this.setComp(l,Te),this.setComp(l,Pe),this.setComp(l,Ee);var E=this.p2pPlayer.player,R=u.metadata,C=R.recvVideoFps,O=R.recvAudioFps;this.stat.setComp(Lt,Ut,O),this.stat.setComp(Lt,Dt,C);var A=u.bufStat.getStats(),L=A.emptyTime,M=A.emptyCnt;if(this.stat.setComp(Lt,xt,M),this.stat.setComp(Lt,Ft,L),this.p2pPlayer.h265Proxy.rendering){var D=this.p2pPlayer.h265Proxy.getStats(),B=D.statProps,x=D.h265PauseCnt;for(var j in B)"toDecode"==j?this.recordH265Frame(B[j],lt):"decoded"==j?this.recordH265Frame(B[j],ht):"render"==j?this.recordH265Frame(B[j],dt):"rawList"==j?this.recordH265Frame(B[j],ct):"frameList"==j?this.recordH265Frame(B[j],ft):this.stat.setComp(Vt,j,B[j].join("|"));this.stat.setCoreDim(Pt,x>0?100:0)}this.p2pPlayer._hyPlayer&&this.p2pPlayer._hyPlayer.costUs>0&&this.stat.setComp(Vt,"costUs",this.p2pPlayer._hyPlayer.costUs),this.stat.setComp(Lt,Bt,E.videoRecver.chain.size),this.stat.setComp(Lt,"vdf",r),this.stat.setComp(Lt,"vag",E.getDtsGap()),this.stat.setComp(Lt,"awg",E.audioRecver.getFrameGap()),this.stat.setComp(Lt,"vwg",E.videoRecver.getFrameGap()),this.stat.setComp(Lt,"awp",E.audioRecver.getSize()),this.stat.setComp(Lt,Bt,E.videoRecver.getSize());var V=E.getReasons(F.a.now());this.stat.setComp(Lt,"awr",V.audioReason),this.stat.setComp(Lt,"vwr",V.videoReason);var G=this.p2pPlayer.p2pMgr.stream.stat.updown_info||{},W=G.downlink_bw||0;this.stat.setComp(Lt,jt,W);var q=u.curVideoDts,K=u.curAudioDts;this.stat.setComp(Lt,Mt,q),this.stat.setComp(Lt,Nt,K),this.p2pPlayer.recordRecvFps(this.stat),l.reset()}u.metadata&&u.metadata.codecname&&this.stat.setComDim(Q,u.metadata.codecname),this.stat.setCompFormat(Lt,":",","),this.stat.setComDim(Z,this.p2pPlayer.getCdnip()),this.recordAiData(),this.recordMuteData(),this.stat.fill(s,o),this.tsdbUtil.sendMetrics(s)}},{key:"_getPcdnRspValue",value:function(t){var e=[];for(var i in t)e.push("".concat(i,":").concat(t[i]));return e.join(",")}},{key:"recordSample",value:function(t){this.p2pPlayer.sampleController.recordStat(this.stat,t),this.p2pPlayer.mse.parser.avSample.recordStat(this.stat)}},{key:"recordAiData",value:function(){var t=this.p2pPlayer.getAiStat(),e=t.aiP2PCnt,i=t.aiFlvCnt,n=t.aiP2PTimeoutCnt,r=t.aiFlvTimeoutCnt,o=t.aiP2PErrorCnt,a=t.aiFlvErrorCnt,s=t.aiP2PSwitchCnt,u=t.aiFlvSwitchCnt,c=t.aiP2PNotSwitchCnt,l=t.aiFlvNotSwitchCnt,h=t.aiFlvErrorSwitchCnt,d=t.aiFlvErrorNotSwitchCnt,f=t.aiStartP2PCnt,p=t.aiStartFlvCnt;this.stat.setComp(ke,Re,e),this.stat.setComp(ke,Ce,i),this.stat.setComp(ke,Oe,n),this.stat.setComp(ke,Ae,r),this.stat.setComp(ke,Le,o),this.stat.setComp(ke,Ne,a),this.stat.setComp(ke,Me,s),this.stat.setComp(ke,Ue,u),this.stat.setComp(ke,De,c),this.stat.setComp(ke,Be,l),this.stat.setComp(ke,Fe,h),this.stat.setComp(ke,xe,d),this.stat.setComp(ke,je,f),this.stat.setComp(ke,Ve,p),this.stat.setCompFormat(ke,":",",")}},{key:"recordMuteData",value:function(){if(this.p2pPlayer._hyPlayer.getMuteStat){var t=this.p2pPlayer._hyPlayer.getMuteStat().muteData,e=[];t.map((function(t){var i=[];i.push(t.value),i.push(t.type),i.push(t.currentDts),i.push(t.reqKey),i.push(t.begin),i.push(t.end),e.push(i.join(":"))})),this.stat.setCoreDim(mt,e.join(","))}}},{key:"recordC2CDelay",value:function(){var t=this.p2pPlayer.mse.getDelayStat();if(t){for(var e in t.fields)this.stat.setCore(e,t.fields[e]);for(var i in t.dims)this.stat.setCoreDim(i,t.dims[i])}}},{key:"recordAuto",value:function(){var t=this.p2pPlayer.p2pFlvPlayer.ctrlBitrate;t&&(this.stat.setCoreDim(Et,t._switchUpReason),this.stat.setCoreDim(kt,t._switchDownReason))}},{key:"recordH265Frame",value:function(t,e){var i=this;this.stat.setComp(e,"size",t.length),t.map((function(t,n){i.stat.setComp(e,"k"+(n+1),t),i.stat.setCompFormat(e,":",",")}))}},{key:"getSubChangeState",value:function(t){var e=[];for(var i in t){var n=t[i],r=[];for(var o in n)r.push("".concat(o,":").concat(n[o]));e.push(i+";"+r.join("|"))}return e.join(",")}},{key:"setComp",value:function(t,e){var i=t[e];for(var n in i){var r=i[n];"number"==typeof r?r>0&&this.stat.setComp(e,n,r):this.stat.setComp(e,n,r)}}}]),t}(),ps=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e,this.tsdbUtil=e.tsdb,this.stat=e.stat,this.p2pState=-1,this.hasFlow=!1,this.metric=new m.default,this.total=new m.default,this.metric20=new m.default,this.subNodes=new m.default,this.playBufLength=0,this.record={resendTimes:0,resendTimeoutCnt:0,resendErrorTimes:0,resendSliceCnt:0,resendRespondCnt:0,resendLateCnt:0,resendMissCnt:0,repeatResendCnt:0,repeatResendSucc:0,repeatResendFail:0,dropFrames:0,playedFrames:0,dtsJumpPauseTimes:0,skipFramePauseTimes:0,fullFrameRatio:0}}return Object(g.a)(t,[{key:"addSubNodes",value:function(t){this.subNodes.set(t,0)}},{key:"add",value:function(t,e){this.hasFlow=!0,this.addValue(this.metric,t,e),this.addValue(this.total,t,e),this.addValue(this.metric20,t,e)}},{key:"reset",value:function(){this.hasFlow=!1,this.total.clear(),this.metric.clear(),this.subNodes.clear()}},{key:"reportFlow",value:function(){if(this.hasFlow){this.hasFlow=!1;var t=[];this.fillFlow(t),this.metric.clear(),this.stat.setCoreDim(bt,U.userProperty.P2P),this.stat.fill(t,!0),this.tsdbUtil.sendMetrics(t)}}},{key:"getMetrics",value:function(){var t=[];return this.fillLogin(t),Number(localStorage._noP2p)||(this.fillPunch(t),this.fillPlayRatio(t),this.fillFlow(t),this.fillDetails(t),this.stat.setCore(Xt,0)),this.metric.clear(),t}},{key:"onCheckTimer",value:function(t,e){e%20==0&&this.p2pPlayer.p2pMgr.stream&&this.p2pPlayer.p2pMgr.stream.printInfo()}},{key:"getOldMetrics",value:function(){return[]}},{key:"fillPlayRatio",value:function(t){}},{key:"fillLogin",value:function(t){}},{key:"fillPunch",value:function(t){}},{key:"fillDetails",value:function(t){}},{key:"fillFlow",value:function(t){}},{key:"addValue",value:function(t,e,i){var n=0;t.has(e)&&(n=t.get(e)),t.set(e,n+i)}},{key:"recordPlayBuf",value:function(){this.playBufLength=this.getMetricValue(t.keys.SERVER_TOTAL_STREAM_FLOW)}},{key:"printLoadFail",value:function(e){if(Number(localStorage._printP2PInfo)){var i=this.getMetricValue(t.keys.SERVER_TOTAL_STREAM_FLOW);e?E.a.warn("出视频失败，当前收到数据，bufferLength",i):E.a.warn("出视频成功，当前收到数据，bufferLength",i,"出视频时BufferLength",this.playBufLength)}}},{key:"getValueFromMap",value:function(t,e){return t.has(e)?t.get(e):0}},{key:"getMetricValue",value:function(t){return this.metric.has(t)?this.metric.get(t):0}}]),t}(),ms=5e3;function ys(){return ms++}ps.keys={P2P_TOTAL_STREAM_FLOW:1,P2P_VALID_STREAM_FLOW:2,SERVER_TOTAL_STREAM_FLOW:3,SERVER_VALID_STREAM_FLOW:4,RESEND_SEQ_NUM:7,REAL_UPLINK_STREAM_SUM:8,SUBSCRIBE_TIMEOUT_TIMES:10,SUBSCRIBE_FAILED_TIMES:11,SUBSCRIBE_SUCCESS_TIMES:12,SUBSCRIBE_TOTAL_TIMES:14,INVALID_PACKET_NUM:13,TOTAL_PEER_NODES:22,ACTIVE_PUNCH_NODES:23,PASSIVE_PUNCH_NODES:24,TRY_PUNCH_NUM:29,PUNCH_FAIL_NUM:30,PUNCH_SUC_NUM:31,FORWARD_REJECT_NUM:32,GET_NODES_VALID:ys(),GET_NODES_TOTAL:ys(),SUB_NODES:ys(),CDN_SLICE_SEND_COUNT:85,CDN_SLICE_RECV_COUNT:86,PUNCH_FAIL_HAS_ICE:500,PUNCH_FAIL_NO_ICE:501,RANGE_TOTAL_STREAM_FLOW:502,RANGE_VALID_STREAM_FLOW:503,SLICE_REPEAT_CDN:504,SLICE_REPEAT_P2P:505,PATCH_FLOW:ys(),SUB_TIMEOUT_TIMES:ys(),SUB_SUC_TIMES:ys(),SUB_FAIL_TIMES:ys(),SUB_TOTAL_TIMES:ys(),SUB_TRY_TIMES:ys(),SUB_KICK_TIMES:ys(),COMPETE_TIMEOUT_TIMES:ys(),COMPETE_SUC_TIMES:ys(),COMPETE_FAIL_TIMES:ys(),COMPETE_TOTAL_TIMES:ys(),DIF_PEER_NUM:ys(),FORCE_NO_PEER:ys(),FORCE_SUB_END:ys(),FORCE_SUB_TIMEOUT:ys(),FORCE_SUB_FAIL:ys(),FORCE_DEPTH_LARGE:ys(),FORCE_SUB_FAIL_SWITCH:ys(),FLOW_COMPETE:ys(),FLOW_FORCE:ys(),FLOW_FIXED:ys(),FLOW_SINGLLING:ys(),FLOW_DEFAULT:ys(),FLOW_FAST:ys(),FLOW_SINGLLING_DOWN:ys(),FORCE_TIMES:ys(),REMOVE_SUB_TIMES:ys(),SUB_RES_TOTAL:ys(),SUB_FAIL_SUC:ys(),SUB_FAIL_STREAM_LIMIT:ys(),SUB_FAIL_SLICE_LATE:ys(),SUB_FAIL_SLICE_FAST:ys(),SUB_FAIL_SLICE_LARGE:ys(),SUB_FAIL_EMPTY_PEER_INFO:ys(),SUB_FAIL_STREAM_LATE:ys(),SUB_FAIL_SUBSCRIBE_UPLINK_NOT_ENOUGHE:ys(),SUB_FAIL_SUBSCRIBE_CYCLE:ys(),SUB_FAIL_OTHER:ys(),SUB_FAIL_KICK_OUT:ys(),SUB_FAIL_SELF_WORST:ys(),SWITCH_LAST_PUB:ys(),SWITCH_STREAM_LIMIT:ys(),SWITCH_SLICE_LARGE:ys(),SWITCH_SLICE_LATE:ys(),SWITCH_SLICE_FAST:ys(),SWITCH_EMPTY_PEER_INFO:ys(),SWITCH_STREAM_LATE:ys(),SWITCH_SUBSCRIBE_UPLINK_NOT_ENOUGH:ys(),SWITCH_SUBSCRIBE_CYCLE:ys(),SWITCH_KICK_OUT:ys(),SWITCH_SELF_WORST:ys(),SWITCH_SUC:ys(),SWITCH_OTHER:ys(),LAST_STREAM_LIMIT:ys(),LAST_SLICE_LARGE:ys(),LAST_SLICE_LATE:ys(),LAST_SLICE_FAST:ys(),LAST_STREAM_LATE:ys(),LAST_UPLINK:ys(),LAST_CYCLE:ys(),LAST_KICK:ys(),LAST_SELF_WORST:ys(),LAST_SUC:ys(),LAST_OTHER:ys(),DEFAULT_REASON:ys(),LEAVE_PING_DIF:ys(),LEAVE_RESET:ys(),PUNCH_BACK_TIMES:ys(),PUNCH_BACK_SUC:ys(),PUNCH_BACK_TRY:ys(),PUNCH_BACK_RET_SUC:ys(),PUNCH_BACK_RET_DIF_STREAM:ys(),PUNCH_BACK_RET_CLOSING:ys(),PUNCH_BACK_RET_COOLING:ys(),PUNCH_BACK_RET_REQUEST:ys(),PUNCH_BACK_REJECT:ys(),RESEND_FETCH_ERROR:ys(),VALID_RET_PRESENTER:ys(),VALID_RET_UPLINK:ys(),VALID_RET_PULL:ys(),VALID_RET_SUBED:ys(),VALID_RET_COOLING:ys(),VALID_RET_DELAY:ys(),VALID_RET_RTT:ys(),VALID_RET_BW:ys(),VALID_RET_LATE:ys(),VALID_RET_FAST:ys(),VALID_RET_NONE:ys(),CLIENT_TYPE:160,RATE:120};var vs=ps,gs={},_s=gs;gs.INT8=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt8(e,i)},this._read=function(t,e,i){return t.readInt8(e,!0,i)},this._className=function(){return gs.CHAR}},gs.INT16=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt16(e,i)},this._read=function(t,e,i){return t.readInt16(e,!0,i)},this._className=function(){return gs.SHORT}},gs.INT32=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt32(e,i)},this._read=function(t,e,i){return t.readInt32(e,!0,i)},this._className=function(){return gs.INT32}},gs.INT64=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt64(e,i)},this._read=function(t,e,i){return t.readInt64(e,!0,i)},this._className=function(){return gs.INT64}},gs.UINT8=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt16(e,i)},this._read=function(t,e,i){return t.readInt16(e,!0,i)},this._className=function(){return gs.SHORT}},gs.UInt16=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt32(e,i)},this._read=function(t,e,i){return t.readInt32(e,!0,i)},this._className=function(){return gs.INT32}},gs.UInt32=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt64(e,i)},this._read=function(t,e,i){return t.readInt64(e,!0,i)},this._className=function(){return gs.INT64}},gs.Float=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeFloat(e,i)},this._read=function(t,e,i){return t.readFloat(e,!0,i)},this._className=function(){return gs.FLOAT}},gs.Double=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeDouble(e,i)},this._read=function(t,e,i){return t.readDouble(e,!0,i)},this._className=function(){return gs.DOUBLE}},gs.STRING=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeString(e,i)},this._read=function(t,e,i){return t.readString(e,!0,i)},this._className=function(){return gs.STRING}},gs.BOOLEAN=function(){this._clone=function(){return!1},this._write=function(t,e,i){return t.writeBoolean(e,i)},this._read=function(t,e,i){return t.readBoolean(e,!0,i)},this._className=function(){return gs.BOOLEAN}},gs.ENUM=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt32(e,i)},this._read=function(t,e,i){return t.readInt32(e,!0,i)}},gs.Vector=function(t){this.proto=t,this.value=new Array},gs.Vector.prototype._clone=function(){return new gs.Vector(this.proto)},gs.Vector.prototype._write=function(t,e,i){return t.writeVector(e,i)},gs.Vector.prototype._read=function(t,e,i){return t.readVector(e,!0,i)},gs.Vector.prototype._className=function(){return gs.TypeHelp.VECTOR.replace("$t",this.proto._className())},gs.Map=function(t,e){this.kproto=t,this.vproto=e,this.value=new Object},gs.Map.prototype._clone=function(){return new gs.Map(this.kproto,this.vproto)},gs.Map.prototype._write=function(t,e,i){return t.writeMap(e,i)},gs.Map.prototype._read=function(t,e,i){return t.readMap(e,!0,i)},gs.Map.prototype.put=function(t,e){this.value[t]=e},gs.Map.prototype.get=function(t){return this.value[t]},gs.Map.prototype.getKeys=function(){var t=[];for(var e in this.value)""!=e&&t.push(e);return t},gs.Map.prototype.hasKey=function(t){return this.value.hasOwnProperty(t)},gs.Map.prototype.remove=function(t){delete this.value[t]},gs.Map.prototype.clear=function(){this.value=new Object},gs.Map.prototype.size=function(){var t=0;for(var e in this.value)t++;return t},gs.Vector.prototype._className=function(){return gs.TypeHelp.Map.replace("$k",this.kproto._className()).replace("$v",this.vproto._className())},gs.DataHelp={EN_INT8:0,EN_INT16:1,EN_INT32:2,EN_INT64:3,EN_FLOAT:4,EN_DOUBLE:5,EN_STRING1:6,EN_STRING4:7,EN_MAP:8,EN_LIST:9,EN_STRUCTBEGIN:10,EN_STRUCTEND:11,EN_ZERO:12,EN_SIMPLELIST:13},gs.TypeHelp={BOOLEAN:"bool",CHAR:"char",SHORT:"short",INT32:"int32",INT64:"int64",FLOAT:"float",DOUBLE:"double",STRING:"string",VECTOR:"list<$t>",MAP:"map<$k, $v>"},gs.BinBuffer=function(t){this.buf=null,this.vew=null,this.len=0,this.position=0,null!=t&&null!=t&&(t instanceof ArrayBuffer?(this.buf=t,this.vew=new DataView(this.buf),this.len=this.vew.byteLength,this.position=0):(this.buf=t.buf,this.vew=new DataView(this.buf),this.len=t.length,this.position=t.position)),this.__defineGetter__("length",(function(){return this.len})),this.__defineGetter__("buffer",(function(){return this.buf}))},gs.BinBuffer.prototype._write=function(t,e,i){return t.writeBytes(e,i)},gs.BinBuffer.prototype._read=function(t,e,i){return t.readBytes(e,!0,i)},gs.BinBuffer.prototype._clone=function(){return new gs.BinBuffer},gs.BinBuffer.prototype.allocate=function(t){if(t=this.position+t,!(null!=this.buf&&this.buf.length>t)){var e=new ArrayBuffer(Math.max(256,2*t));null!=this.buf&&(new Uint8Array(e).set(new Uint8Array(this.buf)),this.buf=void 0),this.buf=e,this.vew=void 0,this.vew=new DataView(this.buf)}},gs.BinBuffer.prototype.getBuffer=function(){var t=new ArrayBuffer(this.len);return new Uint8Array(t).set(new Uint8Array(this.buf,0,this.len)),t},gs.BinBuffer.prototype.memset=function(t,e,i){this.allocate(i),new Uint8Array(this.buf).set(new Uint8Array(t,e,i),this.position)},gs.BinBuffer.prototype.writeInt8=function(t){this.allocate(1),this.vew.setInt8(this.position,t),this.position+=1,this.len=this.position},gs.BinBuffer.prototype.writeUInt8=function(t){this.allocate(1),this.vew.setUint8(this.position++,t),this.len=this.position},gs.BinBuffer.prototype.writeInt16=function(t){this.allocate(2),this.vew.setInt16(this.position,t),this.position+=2,this.len=this.position},gs.BinBuffer.prototype.writeUInt16=function(t){this.allocate(2),this.vew.setUint16(this.position,t),this.position+=2,this.len=this.position},gs.BinBuffer.prototype.writeInt32=function(t){this.allocate(4),this.vew.setInt32(this.position,t),this.position+=4,this.len=this.position},gs.BinBuffer.prototype.writeUInt32=function(t){this.allocate(4),this.vew.setUint32(this.position,t),this.position+=4,this.len=this.position},gs.BinBuffer.prototype.writeInt64=function(t){this.allocate(8),this.vew.setUint32(this.position,parseInt(t/4294967296)),this.vew.setUint32(this.position+4,t%4294967296),this.position+=8,this.len=this.position},gs.BinBuffer.prototype.writeFloat=function(t){this.allocate(4),this.vew.setFloat32(this.position,t),this.position+=4,this.len=this.position},gs.BinBuffer.prototype.writeDouble=function(t){this.allocate(8),this.vew.setFloat64(this.position,t),this.position+=8,this.len=this.position},gs.BinBuffer.prototype.writeString=function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));this.allocate(e.length),new Uint8Array(this.buf).set(new Uint8Array(e),this.position),this.position+=e.length,this.len=this.position},gs.BinBuffer.prototype.writeBytes=function(t){0!=t.length&&null!=t.buf&&(this.allocate(t.length),new Uint8Array(this.buf).set(new Uint8Array(t.buf,0,t.length),this.position),this.position+=t.length,this.len=this.position)},gs.BinBuffer.prototype.readInt8=function(){return this.vew.getInt8(this.position++)},gs.BinBuffer.prototype.readInt16=function(){return this.position+=2,this.vew.getInt16(this.position-2)},gs.BinBuffer.prototype.readInt32=function(){return this.position+=4,this.vew.getInt32(this.position-4)},gs.BinBuffer.prototype.readUInt8=function(){return this.position+=1,this.vew.getUint8(this.position-1)},gs.BinBuffer.prototype.readUInt16=function(){return this.position+=2,this.vew.getUint16(this.position-2)},gs.BinBuffer.prototype.readUInt32=function(){return this.position+=4,this.vew.getUint32(this.position-4)},gs.BinBuffer.prototype.readInt64=function(){var t=this.vew.getUint32(this.position),e=this.vew.getUint32(this.position+4);return this.position+=8,4294967296*t+e},gs.BinBuffer.prototype.readFloat=function(){var t=this.vew.getFloat32(this.position);return this.position+=4,t},gs.BinBuffer.prototype.readDouble=function(){var t=this.vew.getFloat64(this.position);return this.position+=8,t},gs.BinBuffer.prototype.readString=function(t){for(var e=[],i=0;i<t;i++)e.push(String.fromCharCode(this.vew.getUint8(this.position++)));var n=e.join("");try{n=decodeURIComponent(escape(n))}catch(t){}return n},gs.BinBuffer.prototype.readBytes=function(t){var e=new gs.BinBuffer;return e.allocate(t),e.memset(this.buf,this.position,t),e.position=0,e.len=t,this.position=this.position+t,e},gs.JceOutputStream=function(){this.buf=new gs.BinBuffer,this.getBinBuffer=function(){return this.buf},this.getBuffer=function(){return this.buf.getBuffer()}},gs.JceOutputStream.prototype.clear=function(){return this.buf=new gs.BinBuffer,this},gs.JceOutputStream.prototype.writeTo=function(t,e){t<15?this.buf.writeUInt8(t<<4&240|e):this.buf.writeUInt16((240|e)<<8|t)},gs.JceOutputStream.prototype.writeBoolean=function(t,e){this.writeInt8(t,1==e?1:0)},gs.JceOutputStream.prototype.writeInt8=function(t,e){0==e?this.writeTo(t,gs.DataHelp.EN_ZERO):(this.writeTo(t,gs.DataHelp.EN_INT8),this.buf.writeInt8(e))},gs.JceOutputStream.prototype.writeInt16=function(t,e){e>=-128&&e<=127?this.writeInt8(t,e):(this.writeTo(t,gs.DataHelp.EN_INT16),this.buf.writeInt16(e))},gs.JceOutputStream.prototype.writeInt32=function(t,e){e>=-32768&&e<=32767?this.writeInt16(t,e):(this.writeTo(t,gs.DataHelp.EN_INT32),this.buf.writeInt32(e))},gs.JceOutputStream.prototype.writeInt64=function(t,e){e>=-2147483648&&e<=2147483647?this.writeInt32(t,e):(this.writeTo(t,gs.DataHelp.EN_INT64),this.buf.writeInt64(e))},gs.JceOutputStream.prototype.writeUInt8=function(t,e){this.writeInt16(t,e)},gs.JceOutputStream.prototype.writeUInt16=function(t,e){this.writeInt32(t,e)},gs.JceOutputStream.prototype.writeUInt32=function(t,e){this.writeInt64(t,e)},gs.JceOutputStream.prototype.writeFloat=function(t,e){0==e?this.writeTo(t,gs.DataHelp.EN_ZERO):(this.writeTo(t,gs.DataHelp.EN_FLOAT),this.buf.writeFloat(e))},gs.JceOutputStream.prototype.writeDouble=function(t,e){0==e?this.writeTo(t,gs.DataHelp.EN_ZERO):(this.writeTo(t,gs.DataHelp.EN_DOUBLE),this.buf.writeDouble(e))},gs.JceOutputStream.prototype.writeStruct=function(t,e){if(null==e.writeTo)throw Error("not defined writeTo Function");this.writeTo(t,gs.DataHelp.EN_STRUCTBEGIN),e.writeTo(this),this.writeTo(0,gs.DataHelp.EN_STRUCTEND)},gs.JceOutputStream.prototype.writeString=function(t,e){var i=e;try{i=unescape(encodeURIComponent(i))}catch(t){}i.length>255?(this.writeTo(t,gs.DataHelp.EN_STRING4),this.buf.writeUInt32(i.length)):(this.writeTo(t,gs.DataHelp.EN_STRING1),this.buf.writeUInt8(i.length)),this.buf.writeString(i)},gs.JceOutputStream.prototype.writeBytes=function(t,e){this.writeTo(t,gs.DataHelp.EN_SIMPLELIST),this.writeTo(0,gs.DataHelp.EN_INT8),this.writeInt32(0,e.length),this.buf.writeBytes(e)},gs.JceOutputStream.prototype.writeVector=function(t,e){this.writeTo(t,gs.DataHelp.EN_LIST),this.writeInt32(0,e.value.length);for(var i=0;i<e.value.length;i++)e.proto._write(this,0,e.value[i])},gs.JceOutputStream.prototype.writeMap=function(t,e){for(var i in this.writeTo(t,gs.DataHelp.EN_MAP),this.writeInt32(0,e.size()),e.value)e.kproto._write(this,0,i),e.vproto._write(this,1,e.value[i])},gs.JceInputStream=function(t){this.buf=new gs.BinBuffer(t)},gs.JceInputStream.prototype.setBuffer=function(t){return this.buf=new gs.BinBuffer(t),this},gs.JceInputStream.prototype.readFrom=function(){var t=this.buf.readUInt8(),e=(240&t)>>4,i=15&t;return e>=15&&(e=this.buf.readUInt8()),{tag:e,type:i}},gs.JceInputStream.prototype.peekFrom=function(){var t=this.buf.position,e=this.readFrom();return this.buf.position=t,{tag:e.tag,type:e.type,size:e.tag>=15?2:1}},gs.JceInputStream.prototype.skipField=function(t){switch(t){case gs.DataHelp.EN_INT8:this.buf.position+=1;break;case gs.DataHelp.EN_INT16:this.buf.position+=2;break;case gs.DataHelp.EN_INT32:this.buf.position+=4;break;case gs.DataHelp.EN_INT64:this.buf.position+=8;break;case gs.DataHelp.EN_STRING1:var e=this.buf.readUInt8();this.buf.position+=e;break;case gs.DataHelp.EN_STRING4:var i=this.buf.readInt32();this.buf.position+=i;break;case gs.DataHelp.EN_STRUCTBEGIN:this.skipToStructEnd();break;case gs.DataHelp.EN_STRUCTEND:case gs.DataHelp.EN_ZERO:break;case gs.DataHelp.EN_MAP:for(var n=this.readInt32(0,!0),r=0;r<2*n;++r){var o=this.readFrom();this.skipField(o.type)}break;case gs.DataHelp.EN_SIMPLELIST:if((o=this.readFrom()).type!=gs.DataHelp.EN_INT8)throw Error("skipField with invalid type, type value: "+t+","+o.type);e=this.readInt32(0,!0),this.buf.position+=e;break;case gs.DataHelp.EN_LIST:for(n=this.readInt32(0,!0),r=0;r<n;++r)o=this.readFrom(),this.skipField(o.type);break;default:throw new Error("skipField with invalid type, type value: "+t)}},gs.JceInputStream.prototype.skipToStructEnd=function(){for(;;){var t=this.readFrom();if(this.skipField(t.type),t.type==gs.DataHelp.EN_STRUCTEND)return}},gs.JceInputStream.prototype.skipToTag=function(t,e){for(;this.buf.position<this.buf.length;){var i=this.peekFrom();if(t<=i.tag||i.type==gs.DataHelp.EN_STRUCTEND)return i.type!=gs.DataHelp.EN_STRUCTEND&&t==i.tag;this.buf.position+=i.size,this.skipField(i.type)}if(e)throw Error("require field not exist, tag:"+t);return!1},gs.JceInputStream.prototype.readBoolean=function(t,e,i){return 1==this.readInt8(t,e,i)},gs.JceInputStream.prototype.readInt8=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();switch(n.type){case gs.DataHelp.EN_ZERO:return 0;case gs.DataHelp.EN_INT8:return this.buf.readInt8()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+n.type)},gs.JceInputStream.prototype.readInt16=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();switch(n.type){case gs.DataHelp.EN_ZERO:return 0;case gs.DataHelp.EN_INT8:return this.buf.readInt8();case gs.DataHelp.EN_INT16:return this.buf.readInt16()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+n.type)},gs.JceInputStream.prototype.readInt32=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();switch(n.type){case gs.DataHelp.EN_ZERO:return 0;case gs.DataHelp.EN_INT8:return this.buf.readInt8();case gs.DataHelp.EN_INT16:return this.buf.readInt16();case gs.DataHelp.EN_INT32:return this.buf.readInt32()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+n.type)},gs.JceInputStream.prototype.readInt64=function(t,e,i){if(0==this.skipToTag(t,e))return i;switch(this.readFrom().type){case gs.DataHelp.EN_ZERO:return 0;case gs.DataHelp.EN_INT8:return this.buf.readInt8();case gs.DataHelp.EN_INT16:return this.buf.readInt16();case gs.DataHelp.EN_INT32:return this.buf.readInt32();case gs.DataHelp.EN_INT64:return this.buf.readInt64()}throw Error("read int64 type mismatch, tag:"+t+", get type:"+h.type)},gs.JceInputStream.prototype.readFloat=function(t,e,i){if(0==this.skipToTag(t,e))return i;switch(this.readFrom().type){case gs.DataHelp.EN_ZERO:return 0;case gs.DataHelp.EN_FLOAT:return this.buf.readFloat()}throw Error("read float type mismatch, tag:"+t+", get type:"+h.type)},gs.JceInputStream.prototype.readDouble=function(t,e,i){if(0==this.skipToTag(t,e))return i;switch(this.readFrom().type){case gs.DataHelp.EN_ZERO:return 0;case gs.DataHelp.EN_DOUBLE:return this.buf.readDouble()}throw Error("read double type mismatch, tag:"+t+", get type:"+h.type)},gs.JceInputStream.prototype.readUInt8=function(t,e,i){return this.readInt16(t,e,i)},gs.JceInputStream.prototype.readUInt16=function(t,e,i){return this.readInt32(t,e,i)},gs.JceInputStream.prototype.readUInt32=function(t,e,i){return this.readInt64(t,e,i)},gs.JceInputStream.prototype.readStruct=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type!=gs.DataHelp.EN_STRUCTBEGIN)throw Error("read struct type mismatch, tag: "+t+", get type:"+n.type);return i.readFrom(this),this.skipToStructEnd(),i},gs.JceInputStream.prototype.readString=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type==gs.DataHelp.EN_STRING1)return this.buf.readString(this.buf.readUInt8());if(n.type==gs.DataHelp.EN_STRING4)return this.buf.readString(this.buf.readUInt32());throw Error("read 'string' type mismatch, tag: "+t+", get type: "+n.type+".")},gs.JceInputStream.prototype.readString2=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type==gs.DataHelp.EN_STRING1)return this.buf.readBytes(this.buf.readUInt8());if(n.type==gs.DataHelp.EN_STRING4)return this.buf.readBytes(this.buf.readUInt32());throw Error("read 'string' type mismatch, tag: "+t+", get type: "+n.type+".")},gs.JceInputStream.prototype.readBytes=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type==gs.DataHelp.EN_SIMPLELIST){var r=this.readFrom();if(r.type!=gs.DataHelp.EN_INT8)throw Error("type mismatch, tag:"+t+",type:"+n.type+","+r.type);if((o=this.readInt32(0,!0))<0)throw Error("invalid size, tag:"+t+",type:"+n.type+","+r.type);return this.buf.readBytes(o)}if(n.type==gs.DataHelp.EN_LIST){var o=this.readInt32(0,!0);return this.buf.readBytes(o)}throw Error("type mismatch, tag:"+t+",type:"+n.type)},gs.JceInputStream.prototype.readVector=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type!=gs.DataHelp.EN_LIST)throw Error("read 'vector' type mismatch, tag: "+t+", get type: "+n.type);var r=this.readInt32(0,!0);if(r<0)throw Error("invalid size, tag: "+t+", type: "+n.type+", size: "+r);for(var o=0;o<r;++o)i.value.push(i.proto._read(this,0,i.proto._clone()));return i},gs.JceInputStream.prototype.readMap=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type!=gs.DataHelp.EN_MAP)throw Error("read 'map' type mismatch, tag: "+t+", get type: "+n.type);var r=this.readInt32(0,!0);if(r<0)throw Error("invalid map, tag: "+t+", size: "+r);for(var o=0;o<r;o++){var a=i.kproto._read(this,0,i.kproto._clone()),s=i.vproto._read(this,1,i.vproto._clone());i.put(a,s)}return i},gs.Wup=function(){this.iVersion=3,this.cPacketType=0,this.iMessageType=0,this.iRequestId=0,this.sServantName="",this.sFuncName="",this.sBuffer=new gs.BinBuffer,this.iTimeout=0,this.context=new gs.Map(new gs.STRING,new gs.STRING),this.status=new gs.Map(new gs.STRING,new gs.STRING),this.data=new gs.Map(new gs.STRING,new gs.Map(new gs.STRING,new gs.BinBuffer)),this.newdata=new gs.Map(new gs.STRING,new gs.BinBuffer),this.iStream=new gs.JceInputStream,this.oStream=new gs.JceOutputStream},gs.Wup.prototype.hasKey=function(t){return this.newdata.hasKey(t)},gs.Wup.prototype.setVersion=function(t){this.iVersion=t},gs.Wup.prototype.getVersion=function(t){return this.iVersion},gs.Wup.prototype.setServant=function(t){this.sServantName=t},gs.Wup.prototype.setFunc=function(t){this.sFuncName=t},gs.Wup.prototype.setRequestId=function(t){this.iRequestId=t||++this.iRequestId},gs.Wup.prototype.getRequestId=function(){return this.iRequestId},gs.Wup.prototype.setTimeOut=function(t){this.iTimeout=t},gs.Wup.prototype.getTimeOut=function(){return this.iTimeout},gs.Wup.prototype.writeTo=function(){var t=this.oStream.clear();return t.writeInt16(1,this.iVersion),t.writeInt8(2,this.cPacketType),t.writeInt32(3,this.iMessageType),t.writeInt32(4,this.iRequestId),t.writeString(5,this.sServantName),t.writeString(6,this.sFuncName),t.writeBytes(7,this.sBuffer),t.writeInt32(8,this.iTimeout),t.writeMap(9,this.context),t.writeMap(10,this.status),new gs.BinBuffer(t.getBuffer())},gs.Wup.prototype.encode=function(){var t=this.oStream.clear();3==this.iVersion?t.writeMap(0,this.newdata):t.writeMap(0,this.data),this.sBuffer=t.getBinBuffer();var e=this.writeTo(),i=new gs.BinBuffer;return i.writeInt32(4+e.len),i.writeBytes(e),i},gs.Wup.prototype.writeBoolean=function(t,e){var i=this.oStream.clear();if(i.writeBoolean(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.BOOLEAN;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new gs.BinBuffer(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeInt8=function(t,e){var i=this.oStream.clear();if(i.writeInt8(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.CHAR;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new gs.BinBuffer(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeInt16=function(t,e){var i=this.oStream.clear();if(i.writeInt16(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.SHORT;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeInt32=function(t,e){var i=this.oStream.clear();if(i.writeInt32(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.INT32;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeInt64=function(t,e){var i=this.oStream.clear();if(i.writeInt64(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.INT64;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeFloat=function(t,e){var i=this.oStream.clear();if(i.writeFloat(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.FLOAT;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeDouble=function(t,e){var i=this.oStream.clear();if(i.writeDouble(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=TAF.TypeHelp.DOUBLE;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeString=function(t,e){var i=this.oStream.clear();if(i.writeString(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=gs.TypeHelp.STRING;null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeVector=function(t,e){var i=this.oStream.clear();if(i.writeVector(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBinBuffer()));else{var n=this.data.get(t),r=e._className();null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeStruct=function(t,e){var i=this.oStream.clear();if(i.writeStruct(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t);null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(" ",new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeBytes=function(t,e){var i=this.oStream.clear();if(i.writeBytes(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t);null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put("vec",new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.writeMap=function(t,e){var i=this.oStream.clear();if(i.writeMap(0,e),3==this.iVersion)this.newdata.put(t,new gs.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=gs.Util.getClassType(e);null==n&&(n=new gs.Map(gs.STRING,gs.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},gs.Wup.prototype.readFrom=function(t){this.iVersion=t.readInt16(1,!0),this.cPacketType=t.readInt8(2,!0),this.iMessageType=t.readInt32(3,!0),this.iRequestId=t.readInt32(4,!0),this.sServantName=t.readString(5,!0),this.sFuncName=t.readString(6,!0),localStorage.__wup&&console.info("%c@@@ "+this.sServantName+"."+this.sFuncName,"color:white;background:black;",this),this.sBuffer=t.readBytes(7,!0),this.iTimeout=t.readInt32(8,!0),this.context=t.readMap(9,!0,this.context),this.status=t.readMap(10,!0,this.status)},gs.Wup.prototype.decode=function(t){var e=this.iStream.setBuffer(t);if(e.buf.vew.getInt32(e.buf.position)<4)throw Error("packet length too short");e.buf.position+=4,this.readFrom(e),e=this.iStream.setBuffer(this.sBuffer.getBuffer()),3==this.iVersion?(this.newdata.clear(),e.readMap(0,!0,this.newdata)):(this.data.clear(),e.readMap(0,!0,this.data))},gs.Wup.prototype.readBoolean=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=this.iStream.setBuffer(e.buffer).readBoolean(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.BOOLEAN,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=this.iStream.setBuffer(r).readBoolean(0,!0,i)}return i},gs.Wup.prototype.readInt8=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=this.iStream.setBuffer(e.buffer).readInt8(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.CHAR,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=this.iStream.setBuffer(r).readInt8(0,!0,i)}return i},gs.Wup.prototype.readInt16=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=(o=this.iStream.setBuffer(e.buffer)).readInt16(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.SHORT,r=e.get(n),o=this.iStream.setBuffer(r);if(null==r)throw Error("UniAttribute not found type:"+n);i=o.readInt16(0,!0,i)}return i},gs.Wup.prototype.readInt32=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=this.iStream.setBuffer(e.buffer).readInt32(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.INT32,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=this.iStream.setBuffer(r).readInt32(0,!0,i)}return i},gs.Wup.prototype.readInt64=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=this.iStream.setBuffer(e.buffer).readInt64(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.INT64,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=this.iStream.setBuffer(r).readInt64(0,!0,i)}return i},gs.Wup.prototype.readFloat=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=this.iStream.setBuffer(e.buffer).readFloat(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.FLOAT,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=this.iStream.setBuffer(r).readFloat(0,!0,i)}return i},gs.Wup.prototype.readDouble=function(t){var e;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);var i=this.iStream.setBuffer(e.buffer);def=i.readDouble(0,!0,def)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=gs.TypeHelp.DOUBLE,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=this.iStream.setBuffer(r),def=i.readDouble(0,!0,def)}return def},gs.Wup.prototype.readVector=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=this.iStream.setBuffer(n.buffer).readVector(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=this.iStream.setBuffer(r).readVector(0,!0,e)}return e},gs.Wup.prototype.readStruct=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=this.iStream.setBuffer(n.buffer).readStruct(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=this.iStream.setBuffer(r).readStruct(0,!0,e)}return e},gs.Wup.prototype.readMap=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=this.iStream.setBuffer(n.buffer).readMap(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=this.iStream.setBuffer(r).readMap(0,!0,e)}return e},gs.Wup.prototype.readBytes=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=this.iStream.setBuffer(n.buffer).readBytes(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=this.iStream.setBuffer(r).readBytes(0,!0,e)}return e},gs.Util=gs.Util||{},gs.Util.jcestream=function(t,e){if(null!=t&&null!=t)if(t instanceof ArrayBuffer){e=e||16;for(var i=new Uint8Array(t),n="",r=0;r<i.length;r++)0!=r&&r%e==0?n+="\n":0!=r&&(n+=" "),n+=(i[r]>15?"":"0")+i[r].toString(16);console.log(n.toUpperCase())}else console.log("Taf.Util.jcestream::value is not ArrayBuffer");else console.log("Taf.Util.jcestream::value is null or undefined")},gs.Util.str2ab=function(t){var e,i=t.length,n=new Array(i);for(e=0;e<i;++e)n[e]=t.charCodeAt(e);return new Uint8Array(n).buffer},gs.Util.ajax=function(t,e,i,n){var r=new XMLHttpRequest;r.overrideMimeType("text/plain; charset=x-user-defined"),r.addEventListener("readystatechange",(function t(){4===r.readyState&&(200===r.status||304===r.status?i(gs.Util.str2ab(r.response)):n(r.status),r.removeEventListener("readystatechange",t),r=void 0)})),r.open("post",t),r.send(e)};var Ss=new(function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(){var t;return Object(v.a)(this,i),(t=e.call(this)).libName="p2plib.js",t.libName="p2plib-v15.js",t.loaded=!1,t.p2pLib=null,t.ON_LOAD="on_load",t.callbacks={onLoaded:t.onLoaded,onError:t.onLoadedError,thisObj:Object(sn.a)(t)},t}return Object(g.a)(i,[{key:"isSupport",value:function(){return window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.PeerConnection||window.webkitPeerConnection||window.mozPeerConnection}},{key:"hasLib",value:function(){return null!==window.P2PLib}},{key:"loadLib",value:function(t,e){this.hyPlyer=e,t?this.loaded?this.trigger(this.ON_LOAD):Ua(t,this.libName,this.callbacks):E.a.warn("P2PLibProxy.loadLib root none")}},{key:"onLoaded",value:function(){Da(this.libName,this.callbacks),window.P2PLib?(this.loaded=!0,this.p2pLib=new P2PLib({userInfo:N,roomInfo:null,config:B,TafLink:vn,Timer:Ji,TimeUtil:F.a,logger:E.a,HUYA:_i,Taf:_s}),this.trigger(this.ON_LOAD),this.hyPlyer.reportLoadP2PLib(!1)):this.loadP2PLibError()}},{key:"onLoadedError",value:function(){this.loadP2PLibError()}},{key:"loadP2PLibError",value:function(){this.hyPlyer.reportLoadP2PLib(!0)}},{key:"playStream",value:function(t){return this.p2pLib?this.p2pLib.playStream(t):null}},{key:"removeStream",value:function(t){t&&this.p2pLib.removeStream(t)}},{key:"clearPunch",value:function(){this.p2pLib&&this.p2pLib.clearPunch()}},{key:"clearVideo",value:function(){this.p2pLib&&this.p2pLib.clearVideo()}},{key:"inflate",value:function(t,e){if(this.p2pLib)return this.p2pLib.inflate(t,e)}}]),i}(hn)),ws=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e}return Object(g.a)(t,[{key:"addBytes",value:function(t){this.p2pPlayer.addBytes(t)}},{key:"onNoVideo",value:function(){this.p2pPlayer.hyPlayer.trigger(_.NO_VIDEO)}},{key:"onRestart",value:function(t){this.p2pPlayer.onRestart(t)}},{key:"turnToFlv",value:function(t){this.p2pPlayer.turnToFlv(t)}},{key:"setPcdnName",value:function(t){this.p2pPlayer.setPcdnName(t)}},{key:"onSliceData",value:function(t){this.p2pPlayer.onSliceData(t)}},{key:"onGetToken",value:function(t){this.p2pPlayer.info.sFlvAntiCode=t,this.p2pPlayer.loaderMgr.antiCode=t}},{key:"autoReport",value:function(){this.p2pPlayer.hyPlayer.trigger(_.P2P_REPORT)}},{key:"getBufferLen",value:function(){return this.p2pPlayer.bufferLen}}]),t}(),bs=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e,this.handler=new ws(e),this.stream=null,this.started=!1,this.fast_bw=0,this.lastPlaySeq=0,this.fastNum=0}return Object(g.a)(t,[{key:"onFastSliceData",value:function(t){this.stream?(this.fast_bw>0&&(this.stream.stat.bw.cdn_total_bw+=this.fast_bw,this.stream.stat.bw.fast_bw+=this.fast_bw,this.fast_bw=0),this.stream.onFastSliceData(t),this.fastNum<100&&(this.fastNum++,100===this.fastNum&&this.checkStart())):this.fast_bw+=t.parent.payload.length+10}},{key:"hasSeq",value:function(t){return!(!this.stream||!this.stream.hasSeq)&&this.stream.hasSeq(t)}},{key:"isSubsReady",value:function(){return!this.stream||!this.stream.isSubsReady||this.stream.isSubsReady()}},{key:"getLastFullSubTs",value:function(){return this.stream&&this.stream.getLastFullSubTs?this.stream.getLastFullSubTs():0}},{key:"setLastContinueSeq",value:function(t){this.stream&&this.stream.setLastContinueSeq&&this.stream.setLastContinueSeq(t)}},{key:"getLastContinueSeq",value:function(){return this.stream&&this.stream.getLastContinueSeq?this.stream.getLastContinueSeq():0}},{key:"hasPub",value:function(){return!this.stream||!this.stream.hasPub||this.stream.hasPub}},{key:"urgentResend",value:function(t){this.stream&&this.stream.urgentResend(t)}},{key:"setLastPushedFrame",value:function(t,e,i,n,r){this.stream&&this.stream.setLastPushedFrame(t,e,i,n,r)}},{key:"setLastPlaySeq",value:function(t){this.lastPlaySeq=t,this.stream&&this.stream.setLastPlaySeq(t)}},{key:"loadLib",value:function(){1!=localStorage._closeSub&&(E.a.log("P2pMgr.loadLib"),Ss.on(Ss.ON_LOAD,this.onLoadLib,this),Ss.loadLib(this.p2pPlayer.info.h5Root,this.p2pPlayer._hyPlayer))}},{key:"onLoadLib",value:function(){E.a.log("P2pMgr.onLoadLib"),Ss.off(Ss.ON_LOAD,this.onLoadLib,this),this.stream||(this.stream=Ss.playStream(this.p2pPlayer.info),this.stream&&(this.stream.setLastPlaySeq(this.lastPlaySeq),this.stream.streamHandler=this.handler,this.stream.tsdbUtil=this.p2pPlayer.tsdb,this.stream.tsdbStat=this.p2pPlayer.stat,null!=this.p2pPlayer.info.usePcdn&&(this.stream.usePcdn=this.p2pPlayer._checkUsePcdn())))}},{key:"updateConfig",value:function(){this.stream&&this.stream.updateConfig&&this.stream.updateConfig()}},{key:"checkStart",value:function(){this.stream&&this.started&&this.fastNum>=100&&!this._isCloseSub()&&(this.p2pPlayer.onStartP2P(),this.stream.start(),this.stream.startSubStream())}},{key:"_isCloseSub",value:function(){if(1==B.closeSub)return!0;if(B.closeSubRooms)for(var t=0;t<B.closeSubRooms.length;t++)if(B.closeSubRooms[t]==this.p2pPlayer.info.roomId)return!0;return!1}},{key:"start",value:function(){this.started=!0,this.checkStart()}},{key:"stop",value:function(){E.a.log("P2PMgr.stop"),this.started=!1,this.fast_bw=0,this.lastPlaySeq=0,this.fastNum=0,this.stopStream()}},{key:"stopStream",value:function(){this.stream&&(Ss.removeStream(this.stream),this.stream.streamHandler=null,this.stream=null)}},{key:"onRestart",value:function(){this.fast_bw=0,this.fastNum=0,this.started=!1,this.stream&&this.stream.onRestart()}},{key:"destroy",value:function(){this.stop()}},{key:"switchStart",value:function(){this.stop()}}]),t}(),Is=i(14),Ts=function(){function t(e,i,n){Object(v.a)(this,t),this.eventEmiter=e,this.stat=i,this.tsdb=n,this.lastTickTime=0,this.catonCheckStart=!0,this.lastCheckerTimeStamp=0,this.visibilityChanged=!1,this.lostVisibility=!1,this.hidden="",this.visibilityChange="",this.addVisibilityChange()}return Object(g.a)(t,[{key:"reset",value:function(){this.lastTickTime=0,this.onRemoveWakeTimeoutChecker()}},{key:"addVisibilityChange",value:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),document.addEventListener(this.visibilityChange,this.handleVisibilityChange.bind(this),!1)}},{key:"handleVisibilityChange",value:function(){document[this.hidden]?this.lostVisibility=!0:this.lostVisibility=!1,this.visibilityChange=!0}},{key:"onCheckFastTimer",value:function(t,e){if(0!=this.lastCheckerTimeStamp&&this.catonCheckStart){var i=t-this.lastCheckerTimeStamp;this.onWakeTimeoutTimeout(i)}this.lastCheckerTimeStamp=t}},{key:"startWakeTimeoutChecker",value:function(){this.catonCheckStart=!0}},{key:"onWakeTimeoutTimeout",value:function(t){if(this.lostVisibility||this.visibilityChange)this.visibilityChange=!1;else if(!(t<3e3||t>15e3)){N.p2pCooling=!0,localStorage.setItem("p2p_cooling_date",(new Date).getTime());var e=[this.stat.createAct("p2p_cooling",{str:[D.a.name,D.a.version.major]})];this.tsdb.sendMetrics(e),E.a.log("WakeChecker onWakeTimeoutTimeout large than 3000 cost = "+t),100*Math.random()>99&&this.eventEmiter.trigger(Event.P2P_REPORT)}}},{key:"onWakeTimeoutError",value:function(t){this.onRemoveWakeTimeoutChecker(),E.a.log("MAIN: ","ERROR",t),E.a.log("filename:"+t.filename+"-message:"+t.message+"-lineno:"+t.lineno)}},{key:"onRemoveWakeTimeoutChecker",value:function(){this.catonCheckStart=!1,this.lastCheckerTimeStamp=0}}]),t}(),Ps=function(){function t(e){Object(v.a)(this,t),this.p2pPlayer=e,window.addEventListener("beforeunload",this.onBeforeUnload.bind(this))}return Object(g.a)(t,[{key:"onBeforeUnload",value:function(t){this.p2pPlayer.stop(1)}}]),t}(),Es=function(){function t(){Object(v.a)(this,t),this.sP2pUrl="",this.domainList=[],this.cdnip="",this.domain="",this.cdnDomain=""}return Object(g.a)(t,[{key:"initDomain",value:function(t,e){this.sP2pUrl=t,this.domainList=e;var i=this.sP2pUrl.match(/\/\/(.+?)\//i);if(this.cdnDomain=i?i[1]:"",this.domainList&&this.domainList.length){E.a.log("P2PPlayer.initDomain:\n\t"+this.domainList.join("\n\t")),this.domain=this.cdnDomain;var n=this.domainList.shift();n!==this.domain&&(this.cdnip=n,this.sP2pUrl=this.sP2pUrl.replace(/\/\/(.+?)\//,"//"+n+"/"+this.domain+"/"))}return this.sP2pUrl}},{key:"changeDomain",value:function(){if(this.domainList&&""!==this.domain){var t=this.domainList.shift();if(t===this.domain)return this.changeDomain();var e=new RegExp("//(.*?)"+this.domain+"/");return t?(this.cdnip=t,E.a.warn("P2PPlayer change domain to ".concat(t)),this.sP2pUrl=this.sP2pUrl.replace(e,"//"+t+"/"+this.domain+"/")):(E.a.warn("P2PPlayer change domain to ".concat(this.domain)),this.cdnip="",this.sP2pUrl=this.sP2pUrl.replace(e,"//"+this.domain+"/"),this.domainList=null),t}return null}}]),t}(),ks=function(t){Object(Si.a)(n,t);var e=Object(wi.a)(n);function n(){return Object(v.a)(this,n),e.call(this)}return Object(g.a)(n,[{key:"onSlice",value:function(t){var e=new DataView(t.payload.buffer),i=this.unmarshall(t.uri,e);i.seq=t.seq,this.trigger(Ti.a.PP2pSliceData,{parent:t,child:i})}},{key:"getClass",value:function(t){return i(34)("./"+t).default}}]),n}(pn),Rs=function(){function t(e){Object(v.a)(this,t),this.streamName=e,this.lastTokenTime=0,this.antiCode="",this.getTokenInterval=24e4,this.onGetTokenCb=null}return Object(g.a)(t,[{key:"start",value:function(){this.lastTokenTime=F.a.now(),Ji.add(this.onCheckTimer,this,1e4)}},{key:"stop",value:function(){Ji.remove(this.onCheckTimer,this)}},{key:"onCheckTimer",value:function(t,e){this.lastTokenTime>0&&t-this.lastTokenTime>=this.getTokenInterval&&this.getToken(t)}},{key:"getToken",value:function(t){this.lastTokenTime=t;var e=new yn.GetCdnTokenExReq;e.sStreamName=this.streamName,vn.sendWup("liveui","getCdnTokenInfoEx",e,this.onGetToken.bind(this),!0,vn.getRequestId())}},{key:"onGetToken",value:function(t){this.antiCode=t.sFlvToken,this.onGetTokenCb&&this.onGetTokenCb();var e="GetCdnToken.onGetToken",i=t.sFlvToken.match(/wsTime=(.+?)($|\&)/);if(i){var n=1e3*parseInt(i[1],16),r=F.a.getDateTimeStr(n,!1);e+="\n【wsTime】"+i[1]+" => "+r}e+="\n"+t.sFlvToken,e+="\nstreamName"+this.streamName,E.a.log(e)}}],[{key:"getToken",value:function(t){return new s.default((function(e,i){var n=vn.getRequestId(),r=new yn.GetCdnTokenExReq;r.sStreamName=t,vn.sendWup("liveui","getCdnTokenInfoEx",r,(function(t){e(t)}),!0,n)}))}}]),t}(),Cs=function(t){Object(Si.a)(i,t);var e=Object(wi.a)(i);function i(t,n){var r;return Object(v.a)(this,i),r=e.call(this,t,n),E.a.log("P2PPlayer(".concat(r._id,") version ").concat(N.version)),r.videoElement=n.videoElement,r.G=new qa,r.fastTimerInterval=10,r.restartTimes=0,r.resetProperty(),r.p2pStat=new vs(Object(sn.a)(r)),r.qaStat=new fs(Object(sn.a)(r)),r.wakeChecker=new Ts(t,n.stat,n.tsdb),r.url=null,r.player=null,r.sliceProtoHandler=new ks,r.streamDomain=new Es,r.p2pMgr=new bs(Object(sn.a)(r)),r.loaderMgr=new Qa(Object(sn.a)(r)),r.userClose=new Ps(Object(sn.a)(r)),r.firstRecvFullStreamFrameTs=0,r.lastRecvFullStreamFrameTs=0,r.fullStreamLoading=!1,r.startFullStreamTs=0,r.stopFullStreamTs=0,r.isH265=!1,r.turnToFlvParams=null,r.exceptionStat=n.exceptionStat,r.playerType=1,r.askAITimeout=null,r.mse=n.mse,r}return Object(g.a)(i,[{key:"getCdnip",value:function(){return this.p2pMgr.stream?this.p2pMgr.stream.stat.core.cdnip:this.streamDomain.cdnip}},{key:"addHandler",value:function(){this.sliceProtoHandler.on(Ti.a.PP2pSliceData,this.onFastSliceData,this)}},{key:"delHandler",value:function(){this.sliceProtoHandler.off(Ti.a.PP2pSliceData,this.onFastSliceData,this)}},{key:"addTimer",value:function(){Ji.add(this.onCheckTimer,this,1e3),Ji.add(this.onCheckFastTimer,this,this.fastTimerInterval)}},{key:"delTimer",value:function(){Ji.remove(this.onCheckTimer,this),Ji.remove(this.onCheckFastTimer,this)}},{key:"delTimerOnce",value:function(){Ji.remove(this.playTimeout,this),Ji.remove(this.onFastTimeOver,this),Ji.remove(this.onP2PPlayTimeout,this),Ji.remove(this.reportP2PSwitchFlvReport,this)}},{key:"resetProperty",value:function(){this.loadStream=!1,this.started=!1,this.startTs=0,this.loadTime=0,this.pauseStartTs=0,this.hasEmptyFrames=!1,this.videoStatus=b,this.fastTimeOver=!1,this.firstSlicePrinted=!1,this.pauseCnt=0,this.pauseTime=0,this.pauseCnt5=0,this.pauseTime5=0,this.pauseCheckLock=!1,this.loaderErrorTimes=0}},{key:"stop",value:function(){if(E.a.log("P2PPlayer(".concat(this._id,").stop")),this.turnToFlvParams=null,this.started){this._checkPaused(F.a.now(),"stop");var t=0;this.player&&(t=this.player.getStat().forceSkipFrameNums),this.qaStat.sendFlow(this.pauseCnt,this.pauseTime,this.pauseStartTs>0,this.pauseReason,t,!0),this.stopPlayer(),this.resetProperty()}this.isEverSuccessPlayed=!1;var e=this.G;e.firstP2POnDataTime=0,e.firstP2PIframeTime=0,On(Object(Cn.a)(i.prototype),"stop",this).call(this)}},{key:"destroy",value:function(){this.stop(),this.p2pMgr.destroy(),this.askAITimeout=null}},{key:"disposePlayer",value:function(){this.player&&(this.player.dispose(),this.player=null)}},{key:"resetRestart",value:function(){this.loaderMgr&&this.loaderMgr.reset&&this.loaderMgr.reset(),this.disposePlayer(),this.loadStream=!1,this.startTs=0,this.loadTime=0,this.pauseCnt=0,this.pauseTime=0,this.pauseCnt5=0,this.pauseTime5=0,this.pauseStartTs=0,this.firstRecvFullStreamFrameTs=0,this.lastRecvFullStreamFrameTs=0,this.startFullStreamTs=0,this.stopFullStreamTs=0,this.fullStreamLoading=!1,this.pauseCheckLock=!1,this.hasEmptyFrames=!1,this.firstSlicePrinted=!1,this.videoStatus=b,this.loaderErrorTimes=0,this.qaStat.isFirstReport=!0}},{key:"removeTimer",value:function(){Ji.remove(this.onCheckTimer,this),Ji.remove(this.onCheckFastTimer,this),Ji.remove(this.playTimeout,this),Ji.remove(this.onFastTimeOver,this)}},{key:"resetGlobal",value:function(){var t=this.G;t.streamSeqSN=0,t.quickAccessBeginIndex=0,t.quickAccessEndIndex=0,t.quickTime=0,t.exip=0,t.sslUrl="",t.myIp="",t.wanIp="",t.wanPort=0,t.cdnpConnected=0}},{key:"reset",value:function(t){E.a.group("P2PPlayer(".concat(this._id,").reset")),this.resetRestart(),this.wakeChecker.reset(),this.removeTimer(),this.resetGlobal(),this.p2pMgr.stop(t),this.p2pStat.reset(),E.a.groupEnd()}},{key:"start",value:function(t){var e=this;On(Object(Cn.a)(i.prototype),"start",this).call(this),localStorage._sP2PUrl&&(t.sP2pUrl=localStorage._sP2PUrl),this.isH265=this.h265Proxy.isReady,t.isH265=this.isH265,this.stat.setComDim(V,1);var n=(0,p.default)(t).replace(/\,/g,"\n").replace(/[\"\{\}]/g,"");if(!(t.sP2pUrl&&t.sStreamName&&t.sFlvUrl&&t.sFlvAntiCode&&void 0!==t.curBitrate&&void 0!==t.lineType))return console.error("P2PPlayer(".concat(this._id,").start P2P参数不完整，跳转至FLV！\n")+n),void this.turnToFlv(U.turnToFlvReason.P2P_ARGS_ERROR,!0,!0);this.started=!0,this.info=t,E.a.log("P2PPlayer(".concat(this._id,").start \n")+n),this.validAntiCode(t.sFlvAntiCode)?this.realStart(t):Rs.getToken(t.sStreamName).then((function(i){E.a.log("P2PPlayer(".concat(e._id,").start getToken"),i.sFlvToken),t.sFlvAntiCode=i.sFlvToken,e.realStart(t)})),Math.floor(2e3*Math.random()+1e3)}},{key:"notSdkPlay",value:function(){this._hyPlayer.isBusiStop||(this.getRecSysRsp({info:this.info,type:"p2p",metadata:this.mse?this.mse.metadata:null,reason:U.turnToFlvReason.IS_NOT_FIRST_FETCH,isNotFirstFetch:!0}),this.aiP2PFlvStatus=1,Ji.once(this.reportP2PSwitchFlvReport,this,2e3))}},{key:"_getUsePcdn",value:function(t){return 1===Number(t[_i.EM_PCDN_MODE.E_PcdnMode_P2pHttpSubstream])?1:0}},{key:"_getPcdnName",value:function(t){var e="";return t&&(e=t[_i.EM_PCDN_MODE.E_PcdnMode_P2pHttpSubstream]),e}},{key:"realStart",value:function(t){if(this.started){var e=this.isUseAV1(t);this.startTs=F.a.now(),E.a.log("P2PPlayer(".concat(this._id,").startNow"),Date.now(),this.startTs),this.stat.setComDim(W,0===t.originalBitrate?1:0),this.stat.setComDim(st,this.isH265?1:0),this.stat.setComDim(ut,e?2:this.isH265?1:0),t.isAv1=e;var i=this.G;i.isStartFromUrl=!1,(0,P.default)(i,t),this.isH265&&this.tsdb.sendMetrics([this.stat.createAct(ti,{value:[0],str:[0]})]),this.startPlayer(t,e),this.quickAccessVideoOnly(!0),Ji.once(this.playTimeout,this,4e3)}}},{key:"startPlayer",value:function(t,e){this.info=t,this.started=!0;var i=this.G;i.lineType=t.lineType,i.streamId=this.createStreamId(Number(t.iIsP2PSupport),this.isH265,e),this.streamDomain.initDomain(t.sP2pUrl,t.p2pDomainList?t.p2pDomainList.slice():[]),this.statDomain(),this.loaderMgr.init(this.streamDomain.sP2pUrl,t.sFlvAntiCode,this.isH265),this.player=this.createPlayer(),this.player.needFreeBuffer=t.curBitrate<=B.freeBufferBitrate,this.checkAud(),this.addHandler(),this.addTimer(),Ji.once(this.playTimeout,this,4e3),Ji.once(this.onP2PPlayTimeout,this,5500),this.statSwitch.check(t,!1),delete t.pullStreamFrom,this.stat.setComDim(V,1),this.stat.setComDim(it,2),this.wakeChecker.startWakeTimeoutChecker(),B.setJitterCfg(this.mse,t.presenterUid,t.curBitrate)}},{key:"stopPlayer",value:function(){this.delHandler(),this.delTimer(),this.delTimerOnce(),this.loaderMgr.stop(),this.p2pMgr.stop(),this.disposePlayer(),this.started=!1}},{key:"createPlayer",value:function(){return new ds(this)}},{key:"validAntiCode",value:function(t){for(var e=t.split("&"),i=e.length,n=0;n<i;n++){var r=e[n].split("="),o=r[0],a=r[1];if("wsTime"===o)return new Date(1e3*parseInt(a,16)).getTime()+24e4>Date.now()}return!1}},{key:"checkAud",value:function(){wa.isNeedAud()?this.mse.setDeleteH264Aud(-1===B.deleteH264Aud.indexOf(this.G.presenterUid)?0:1):this.mse.setDeleteH264Aud(0)}},{key:"changeDomain",value:function(){var t=this.streamDomain.changeDomain();return this.statDomain(),t}},{key:"setEnableLowLatency",value:function(t){this.enableLowLatency=t,t&&this.mse&&B.setLowLatency(this.mse)}},{key:"statDomain",value:function(){""===this.streamDomain.cdnip?this.stat.delDim(Gt):this.stat.setExtDim(Gt,this.streamDomain.cdnip)}},{key:"recvDataFull",value:function(){this.G.recvDataTime=F.a.now(),this.eventEmitter.trigger(_.RECV_VIDEO_FRAME),E.a.log("P2PPlayer(".concat(this._id,").recvDataFull"))}},{key:"getCurrentTime",value:function(){return this.player?this.player.getCurrentRealTime():0}},{key:"getCurrentDts",value:function(){return this.player?this.player.getCurrentDts():0}},{key:"getCurrentSeiOffsetDts",value:function(){return this.player?this.player.getCurrentSeiOffsetDts():0}},{key:"getFrameData",value:function(){return{pts:this.player?this.player.getCurrentRealTime():0}}},{key:"getBufferLen",value:function(){return this.player?this.player.getBufferLen():0}},{key:"getFrameBufferLen",value:function(){return this.player?this.player.getFrameBufferLen():0}},{key:"getWaitBufferLen",value:function(){return this.player?this.player.getWaitBufferLen():0}},{key:"getWaitFrameTime",value:function(t){return this.player?this.player.getWaitFrameTime(t):0}},{key:"playTimeout",value:function(){var t=0,e=0;this.p2pFlvPlayer.isPlaying?(this.p2pStat.printLoadFail(!1),t=100):(this.p2pStat.printLoadFail(!0),this.p2pStat.p2pState=0,e=this.tsdb.httpError?1:2);var i=[];i.push(this.stat.createAct("p2p_load_video",{value:[t,e]})),this.tsdb.sendMetrics(i)}},{key:"onRenderTimeout",value:function(){this.started&&!this.p2pFlvPlayer.isPlaying&&(E.a.warn("P2PPlayer(".concat(this._id,").onRenderTimeout")),this.loaderErrorTimes++)}},{key:"onP2PPlayTimeout",value:function(t,e){E.a.log("P2PPlayer.onP2PPlayTimeout isPlaying=".concat(this.p2pFlvPlayer.isPlaying)),this.p2pFlvPlayer.isPlaying||(this.turnToFlvParams||(this.turnToFlvParams={reason:U.turnToFlvReason.PLAY_TIMEOUT,force:!1,isNotAi:!1}),this.turnToFlv(this.turnToFlvParams.reason,this.turnToFlvParams.force,this.turnToFlvParams.isNotAi))}},{key:"turnToFlv",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;(this.started||e)&&this.getRecSysRsp({info:this.info,type:"p2p",metadata:this.mse?this.mse.metadata:null,reason:t,isNotAi:i})}},{key:"beforeTurnToFlv",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.turnToFlvParams={reason:t,force:e,isNotAi:i}}},{key:"turnToFlv",value:function(t){var e=arguments.length>2?arguments[2]:void 0;this.getRecSysRsp({info:this.info,type:"p2p",metadata:this.player?this.player.msePlayer.metadata:null,reason:t,isNotAi:e})}},{key:"recSysRspHandler",value:function(t,e,i){var n=i.reason;if(!t||e&&e.tRecSysInfo&&1==e.tRecSysInfo.lAction){if(e&&e.tRecSysInfo){var r=e.tRecSysInfo.sActValue;if(i.isNotFirstFetch&&""!=r)try{var o=JSON.parse(L.unescapeHTML(r)).sAiPidsP2PDes.split("|"),a=o[o.length-1];if(E.a.log("P2PPlayer(".concat(this._id,").recSysRspHandler isTurnToFlv"),a),0==a)return void(this.aiP2PFlvStatus=3);this.aiP2PFlvStatus=2}catch(t){E.a.error("P2PPlayer(".concat(this._id,").recSysRspHandler isNotFirstFetch"),t)}}E.a.warn("P2PPlayer(".concat(this._id,").recSysRspHandler.turnToFlv reason=").concat(n)),this.tsdb.turnToFlvReason=n,this.tsdb.turnToFlvTimes++,this.stop(),this.eventEmitter.trigger(_.P2P_TIMEOUT)}else{if(i&&i.isNotFirstFetch)return;E.a.warn("P2PPlayer(".concat(this._id,").recSysRspHandler fail reason=").concat(n)),this.eventEmitter.trigger(_.H5_PLAYER_ERROR)}}},{key:"reportP2PSwitchFlvReport",value:function(){var t=1;2===this.aiP2PFlvStatus?t=1:3===this.aiP2PFlvStatus?t=2:1===this.aiP2PFlvStatus&&(t=3),this.tsdb.sendMetrics([this.stat.createAct("ai_p2p_flv_switch",{value:[t],str:[1]})])}},{key:"setPcdnName",value:function(t){null!=t&&this.stat.setComDim(rt,t)}},{key:"quickAccessVideoOnly",value:function(t,e,i){var n=this.G,r=F.a.now();n.initUseTime(r),this.fullStreamLoading=!0,this.firstRecvFullStreamFrameTs=0,this.lastRecvFullStreamFrameTs=0,n.quickTime=2e3,n.quickAccessBeginIndex=n.exip=0,t&&this.startFastSample(),this.stat.setComDim("backup_field4",4),this.loadFullStream("quickTime",e,i),this._startContinueBuffer(),Lo(this.stat,this.loaderMgr.url,this.info.sStreamName),Ji.once(this.onFastTimeOver,this,Number(B.fastTime))}},{key:"onFastTimeOver",value:function(){this.fastTimeOver=!0,this.player&&this.player.setFastOver&&this.player.setFastOver(),this.videoStatus!==b&&this.p2pMgr.start()}},{key:"updateP2PConfig",value:function(){this.enableLowLatency?B.setLowLatency(this.mse):B.setJitterCfg(this.mse,this.info.presenterUid,this.info.curBitrate),this.p2pMgr.updateConfig(),this.p2pMgr.checkStart()}},{key:"onPausedTooLong",value:function(){this.player&&this.player.pausedTooLong&&this.player.pausedTooLong()}},{key:"onStartP2P",value:function(){if(this.fastSample.setOver(),this.loaderMgr.stopFullStream(),this.fullStreamLoading=!1,this.stopFullStreamTs=F.a.now(),this.startFullStreamTs&&this.firstRecvFullStreamFrameTs>0){var t=this.lastRecvFullStreamFrameTs-this.firstRecvFullStreamFrameTs-(this.stopFullStreamTs-this.startFullStreamTs);this.player&&this.player.setQuickVideoLen(t)}}},{key:"startP2PUrl",value:function(t){this.info=t;var e=t.p2purl;E.a.log("P2PPlayer(".concat(this._id,").startP2PUrl ")+e),this.reset(0),this.addHandler(),this.addTimer(),this.info={};var i=this.G;i.isStartFromUrl=!0,this.url=e,this.started=!0,this.startTs=F.a.now(),i.initUseTime(this.startTs),i.getVPTime=this.startTs,i.connectVpTime=this.startTs,i.connectVideoTime=this.startTs,i.loginTime=this.startTs,this.player=this.createPlayer(),this.loaderMgr.fullLoader.connect(e)}},{key:"onRestart",value:function(t){E.a.log("%cP2PPlayer(".concat(this._id,").onRestart"),"background:#FFBFFF",t),this.checkSendRestart(t);var e=this.G;if(t===U.restartReason.FLV_TO_P2P||e.isStartFromUrl)e.isStartFromUrl?this.startP2PUrl(this.url):this.start(this.info);else{if(this.restartTimes>=5)return void this.turnToFlv(U.turnToFlvReason.RESTART_TIMES);this.restartTimes++,this.fullStreamLoading=!1,this.firstRecvFullStreamFrameTs=0,this.lastRecvFullStreamFrameTs=0,this.startFullStreamTs=0,this.stopFullStreamTs=0;var i=this.getMse().buffered.continueBuffer;this.loaderMgr.stopFullStream(),this.disposePlayer(),this.resetProperty(),this.p2pMgr.onRestart(),this.started=!0,this.player=this.createPlayer(),this.quickAccessVideoOnly(!1),this.getMse().buffered.continueBuffer=i}}},{key:"checkSendRestart",value:function(t){if(t){this.tsdb.restartReason=t,this.tsdb.restartTimes++;var e=!0;if(t===U.restartReason.LOST_SEQ_JUMP||t===U.restartReason.CONNECT){var i=F.a.now();this.restartStamp>0&&i-this.restartStamp<2e4&&(e=!1),this.restartStamp=i}if(e){var n=[];n.push(this.stat.createAct("p2p_restart",{value:[t]})),this.tsdb.sendMetrics(n)}}}},{key:"setPlaybackrateAccess",value:function(t){this.player&&this.player.setPlaybackrateAccess(t)}},{key:"setAutoJitter",value:function(t){this.mse.autoJitter=t}},{key:"setJitter",value:function(t,e,i){this.mse&&this.mse.setJitter(t,e,i)}},{key:"play",value:function(){this.mse.play()}},{key:"pause",value:function(){this.mse.pause()}},{key:"_getCodec",value:function(t,e){var i=e;return 0===e?3===t?i=0:2===t?i=2:1===t&&(i=4):e%100==0?3===t?i=e>8e3?1e3+(e/100>>0):400+(e/100>>0):2===t?i=e>8e3?4e3+(e/100>>0):500+(e/100>>0):1===t&&(i=9e3+(e/100>>0)):e%10==0&&(3===t?e>0&&(i=2e4+(e/10>>0)):2===t?e>0&&(i=3e4+(e/10>>0)):1===t&&(i=4e4+(e/10>>0))),i}},{key:"createStreamId",value:function(t,e,i){t=t>1?t:0;var n=this.info.sStreamName,r=Number(this.info.iBitRate);-1!==B.useChangeRate.indexOf(Number(this.info.presenterUid))&&(r=this.info.curBitrate),r=i?this._getCodec(1,r):e?this._getCodec(2,r):this._getCodec(3,r);var o=new Is.default;return o.streamName=n,o.codecType=r,o.cdnBrand=t,o}},{key:"loadFullStream",value:function(t,e,i){this.loadStream||(E.a.log("%cQuickAccess from "+t,"background:#FFBFFF"),this.loadStream=!0,this.startFullStreamTs=0,this.loaderMgr.loadFullStream(this.G.quickAccessBeginIndex,e,i))}},{key:"on302",value:function(t){this.stat.setComDim("backup_field4",3);var e=t.match(/\/\/(.+?)\//i),i=B.p2p302Config;i&&Array.isArray(i)&&0===i[1]||(e&&e.length>1&&(this.info._domain302=e[1]),E.a.log("P2PPlayer.on302, url=".concat(t,", info.domain302=").concat(this.info._domain302)))}},{key:"getDurationTime",value:function(){var t=((this.mse||{}).video||{}).video,e=0;return t&&(e=Math.floor(t.duration||0)),e}},{key:"turnToH264",value:function(){this.stop(),this.eventEmitter.trigger(_.TURN_TO_H264)}},{key:"h265Retry",value:function(){this.stop(),this.eventEmitter.trigger(_.H265_VIDEO_RETRY)}},{key:"onFastSliceData",value:function(t){var e=this.G;0==e.firstP2POnDataTime&&(e.firstP2POnDataTime=F.a.now()),this.onSliceData(t),this.p2pMgr.onFastSliceData(t)}},{key:"onSliceData",value:function(t){var e=t.parent.uri===Ti.a.PP2pSliceVideoData,i=t.parent.uri===Ti.a.PP2pSliceAudioData,n=t.parent.uri===Ti.a.PP2pSliceAudioDataV2;if(i||e||n){if(!this.firstSlicePrinted){this.firstSlicePrinted=!0;var r="%cFirst Slice isVideo=".concat(e," seq=").concat(t.parent.seq);E.a.log(r,"background:#FFBFFF")}this.player&&(e?this.player.onVideoStreamData(t.child):i?this.player.onAudioStreamData(t.child):n&&this.player.onAudioStreamDataV2(t.child))}}},{key:"onCheckTimer",value:function(t,e){if(e%10==0&&(this.restartTimes=0),this.player&&this.player.onCheckTimer(t,e),this.player){this.p2pStat.onCheckTimer(t,e);var i=this.G;if(i.globalSpeedCalc.calculate(),e%(Number(localStorage._speedPrintRate)||20)==0){var n=i.curBitrate/8,r=this.getGlobalSpeed();E.a.log("P2PPlayer(".concat(this._id,").onCheckTimer avgSpeed=").concat(r,"KB/s expectSpeed=").concat(n,"KB/s"))}if(0===this.heart20Ts)this.heart20Ts=t;else if(t-this.heart20Ts>2e4){this.heart20Ts=t,this._checkPaused(t,qo),this.loaderErrorTimes,this.loaderErrorTimes=0;var o=null;if(this.player&&(o=this.player.getStat()),o){this.p2pStat.record.dropFrames=o.dropFrames,this.p2pStat.record.playedFrames=o.playedFrames,this.p2pStat.record.dtsJumpPauseTimes=o.dtsJumpPauseTimes,this.p2pStat.record.skipFramePauseTimes=o.skipFramePauseTimes;var a=o.dropFrames;this.p2pStat.record.fullFrameRatio=0==a?100:0,this.stat.setComp(fe,"late_seqs",o.lateSeqs),this.stat.setComp(fe,"loss_frames",o.dropFrames),this.stat.setComp(fe,"play_frames",o.playedFrames),this.stat.setComp(fe,"dts_jumppause_cnt",o.dtsJumpPauseTimes),this.stat.setComp(fe,"skip_pause_cnt",o.skipFramePauseTimes),this.stat.setComp(fe,"full_ratio",0==a?100:0),this.stat.setComp(fe,"empty_frames",o.emptyFrames)}this.stat.setCore(qt,this.bufferLen),this.stat.setCore($t,this.getFrameBufferLen()),this.stat.setCore("audio_cnt",this.player.audioRecver.audioCnt),this.stat.setCore("big_audio_cnt",this.player.audioRecver.bigAudioCnt),this.player.audioRecver.resetAudioNum();var s=this.pauseStartTs>0;this.qaStat.record(this.pauseCnt,this.pauseTime,s,this.pauseReason,o?o.forceSkipFrameNums:0),this.qaStat.hasEmptyFrames=this.hasEmptyFrames,this.pauseStartTs>0&&this.autoMonitor.setPause(this.pauseStartTs,this.getBufferLen()),this.pauseCnt=0,this.pauseTime=0,this.pauseReason=0}e%300==0&&(this.tsdb.sendMetrics([{sMetricName:oi.METRIC.VIDEO_VIDEO_BAD_QUALITY_5M_RATIO,vField:{value:this.pauseCnt5>0?100:0}}]),this.pauseCnt5=0,this.pauseTime5=0)}}},{key:"_getBadReason",value:function(t){if(!this.p2pMgr.isSubsReady())return U.BAD_REASONS.SUB_LINK;var e=this.p2pMgr.getLastFullSubTs();if(e>0&&t-e>5e3&&!this.player.isDownEnough())return U.BAD_REASONS.DOWN_LINK;var i=this.p2pMgr.stream;if(i){var n=i.stat;if(n.range_miss_ts>0&&t-n.range_miss_ts<1e4)return U.BAD_REASONS.RANGE_MISS;if(n.range_recv_timeout_ts>0&&t-n.range_recv_timeout_ts<1e4)return U.BAD_REASONS.RANGE_RECV_TIMEOUT}return this.player.isDownEnough()?this.player.videoRecver.frameSeqLostTs>0&&t-this.player.videoRecver.frameSeqLostTs<1e4?U.BAD_REASONS.FRAME_SEQ_LOST:this.player.msePlayer.lastJumpBufferTs>0&&t-this.player.msePlayer.lastJumpBufferTs<1e4?U.BAD_REASONS.BUFFER_JUMP:this.player.videoRecver.lastDtsJumpTs>0&&t-this.player.videoRecver.lastDtsJumpTs<1e4?U.BAD_REASONS.TIMESTAMP_JUMP:this.player.videoRecver.lastFrameIdJumpTs>0&&t-this.player.videoRecver.lastFrameIdJumpTs<1e4?U.BAD_REASONS.FRAME_VIDEO_JUMP:this.player.audioRecver.lastFrameIdJumpTs>0&&t-this.player.audioRecver.lastFrameIdJumpTs<1e4?U.BAD_REASONS.FRAME_AUDIO_JUMP:this.player.videoRecver.frameDropTs>0&&t-this.player.videoRecver.frameDropTs<1e4?U.BAD_REASONS.FRAME_DROP:this.getBufferLen()>2e3?U.BAD_REASONS.PERFORMANCE:U.BAD_REASONS.UNKNOW:U.BAD_REASONS.DOWN_LINK}},{key:"onCheckFastTimer",value:function(t,e){this.started&&(this.wakeChecker.onCheckFastTimer(t,e),this.player&&this.player.onCheckFastTimer(t,e),!this.pauseCheckLock&&this.pauseStartTs>0&&t-this.pauseStartTs>200&&(this.pauseCheckLock=!0))}},{key:"_autoReportSea",value:function(){1==B.autoReportSea&&this.pauseCnt>0&&this.eventEmitter&&this.eventEmitter.trigger(_.P2P_REPORT,"bad"+this.pauseReason)}},{key:"getGlobalSpeed",value:function(){var t=this.G.globalSpeedCalc.average();return Math.round(t/1024)}},{key:"isLowNet",value:function(){var t=this.G.curBitrate/8;return this.getGlobalSpeed()<t-20}},{key:"setVolume",value:function(t){this.player&&this.mse.setVolume(t)}},{key:"setMuted",value:function(t){this.player&&this.mse.setMuted(t)}},{key:"getMuted",value:function(){return this.player?this.mse.getMuted():-1}},{key:"getMse",value:function(){return this.mse}},{key:"onPlayVideo",value:function(t,e,n,r,o,a,s){On(Object(Cn.a)(i.prototype),"onPlayVideo",this).call(this,t,e,n,r,o,a,s),this.updateStatus(w),this.stat.setComDim(X,e+"*"+n),this.p2pStat.recordPlayBuf(),this.p2pMgr.loadLib();var u=this.G,c=F.a.now();0!==this.startTs&&(u.onPlayTime=a,E.a.log("%c[TIME] P2PPlayer(".concat(this._id,").onPlayVideo onPlayTime=")+(c-u.firstRenderTime)+" totalTime="+(c-u.startTime),"color:#A23400;background:#FFF5C2"));var l={video:t,width:e,height:n,hasVideo:r,connectTime:u.connectVideoTime-this.startTs,recvDataTime:u.recvDataTime-this.startTs,canvas:o,delayRemove:this.info._delayRemove};this.info._delayRemove=!1,l.videoCodec=s,this.eventEmitter.trigger(_.VIDEO_PLAY,l),this.waitRemuxTime=0,this.mse&&this.mse.parser&&0!=this.mse.parser.waitRemuxTime&&(this.waitRemuxTime=this.mse.parser.waitRemuxTime),0!==this.startTs?(this.loadTime=c-this.startTs,u.loadedDataTs=c-this._hyPlayer.startTs,u.hyPlayerLoadTs=c-this._hyPlayer.startTs,this.mse&&(u.firstP2PIframeTime=this.mse.parser.decodeIFRTime),E.a.log("%cP2PPlayer(".concat(this._id,").onPlayVideo w/h=")+e+"/"+n+" loadTime="+this.loadTime,"color:#A23400;background:#FFF5C2"),E.a.log("%cP2PPlayer(".concat(this._id,").onPlayVideo G.loadedDataTs=")+u.loadedDataTs+" G.hyPlayerLoadTs="+u.hyPlayerLoadTs,"color:#A23400;background:#FFF5C2"),this.tsdb.sendCdnTime(u,!0,this.waitRemuxTime),this.startTs=0,u.printUseTime()):E.a.log("P2PPlayer(".concat(this._id,").onPlayVideo w/h=")+e+"/"+n),this.isEverSuccessPlayed=!0}},{key:"onVideoStop",value:function(t,e){E.a.log("P2PPlayer(".concat(this._id,").onVideoStop hasVideo=")+e),e&&(this.updateStatus(b),this.eventEmitter.trigger(_.VIDEO_STOP,{video:t,haveVideo:!0}))}},{key:"onSendSeiData",value:function(t){this.eventEmitter.trigger(_.H264_SEI_PLAY,{data:t})}},{key:"onSendScriptVolumeInfo",value:function(t,e){this.eventEmitter.trigger(_.UPDATE_INTERSITY,{uid:t,intensity:e})}},{key:"onPlayerError",value:function(t){var e=this;E.a.log("P2PPlayer.onPlayerError, needNotify=",t),setTimeout((function(){e._hyPlayer.isBusiStop||t&&(e.tsdb.restartReason=U.restartReason.PLAYER_ERROR,e.eventEmitter.trigger(_.H5_PLAYER_ERROR))}),1e3)}},{key:"onErrorEvent",value:function(t){if(On(Object(Cn.a)(i.prototype),"onErrorEvent",this).call(this,t),3===t.type){var e=this.player&&this.player.getStat(),n=e.dropFrames,r=e.playedFrames;E.a.log("P2PPlayer(".concat(this._id,") onErrorEvent dropFrames"),n,"playedFrames",r)}var o=[];o.push(this.stat.createAct("p2p_play_fail",{value:[t.type,this.bufferLen]})),this.tsdb.sendMetrics(o)}},{key:"updateFrameTs",value:function(t){this.fullStreamLoading&&(0==this.firstRecvFullStreamFrameTs?(this.startFullStreamTs=F.a.now(),this.firstRecvFullStreamFrameTs=t):t>this.lastRecvFullStreamFrameTs&&(this.lastRecvFullStreamFrameTs=t))}},{key:"_switchStart",value:function(t,e){this.loadStream=!1,this.p2pMgr&&this.p2pMgr.switchStart(),this.player&&this.player.switchStart(),E.a.groupEnd();var i=this.info;i.isH265=this.isH265=this.h265Proxy.isReady,this.G.streamId=this.createStreamId(Number(i.iIsP2PSupport),this.isH265),this.loaderMgr.init(this.streamDomain.sP2pUrl,this.loaderMgr.antiCode),this.quickAccessVideoOnly(!1,t,e),B.setJitterCfg(this.mse,i.presenterUid,i.curBitrate)}},{key:"_switchDone",value:function(t,e,i){this.p2pMgr.loadLib()}},{key:"streamName",get:function(){return this.info?this.info.sStreamName:""}},{key:"hasPicture",get:function(){var t=this.p2pFlvPlayer.isPlaying&&this.player&&0!==this.player.getCurrentTime();return this.h265Proxy.rendering&&(t=t&&this.isH265Playing),t}},{key:"bufferLen",get:function(){return this.player?this.player.getBufferLen():0}},{key:"frameBufferLen",get:function(){return this.mse&&this.mse.getFrameBufferLen?this.mse.getFrameBufferLen():0}}]),i}(Jo),Os=function t(e){Object(v.a)(this,t),this.iHEVCBitRate=e.iHEVCBitRate,this.iCodecType=e.iCodecType,this.iBitRate=e.iBitRate,this.bitrate=e.bitrate},As=0,Ls=function(){function t(e){Object(v.a)(this,t),this._id=As++,this._callbacks=e,this._timeout=!1,this._destroy=!1,this._timeoutTime=1e3,this._onRspBind=this._onRsp.bind(this)}return Object(g.a)(t,[{key:"destroy",value:function(){this._destroy=!0,this._callbacks=null,Ji.remove(this._onTimeout,this)}},{key:"sendP2PFlv",value:function(t){var e=t.info,i=this._getReq(t);i.mAppendInfo.value={streamType:t.type,expVideoFps:t.metadata&&t.metadata.fps||0,expAudioFps:t.metadata&&t.metadata.audioFps||0,codeRate:e.curBitrate,isOriginal:Number(0===e.originalBitrate),line:t.lineType,codeType:t.isH265?"265":"264",sStreamName:e.sStreamName,playType:t.playType,isServer:0,iIsP2PSupport:e.iIsP2PSupport},this._sendReq(i)}},{key:"sendAuto",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this._timeoutTime=e;var i=this._getReq(t);i.mAppendInfo.value=t.appendInfo,this._sendReq(i)}},{key:"_getReq",value:function(t){var e=new yn.RecSysReq;return e.tId.iAppid=N.appid,e.tId.lUid=N.uid,e.tId.sGuid=N.sGuid,e.tId.sUA="webh5",e.sAnchorUid=t.presenterUid,e.sRoomId=t.roomId,e.iScene=t.scene,e.bDebug=1,e}},{key:"_sendReq",value:function(t){var e=(0,P.default)({},t);E.a.log("RecSysProxy(".concat(this._id,").sendReq"),t,(0,p.default)(e)),vn.sendWup("mediaui","getMediaRec",t,this._onRspBind,!0,vn.getRequestId(),!0),Ji.once(this._onTimeout,this,this._timeoutTime)}},{key:"_onRsp",value:function(t){if(1!=localStorage._testTimeout){Ji.remove(this._onTimeout,this);var e=(0,P.default)({},t);E.a.log("RecSysProxy(".concat(this._id,").onRsp"),t,(0,p.default)(e)),this._destroy||this._callbacks&&this._callbacks.onRsp(t)}else E.a.log("RecSysProxy._onRsp _testTimeout=".concat(localStorage._testTimeout))}},{key:"_onTimeout",value:function(){this._callbacks&&this._callbacks.onTimeout&&this._callbacks.onTimeout()}}]),t}(),Ns=function(){function t(e){Object(v.a)(this,t),this.ctrlBitrate=e,this.timeLineTs=0,this.sampleTs=0,this.sampleCheckTs=0,this.sampleDts=0,this.sampleCheckDts=0,this.printTs=0,this.printSampleTs=0,this.printSampleDts=0,this.startTs=0,this.startDts=0,this.cnt12=0}return Object(g.a)(t,[{key:"start",value:function(t,e){E.a.log("EvalBw.start now=".concat(t," dts=").concat(e)),this.startTs=this.timeLineTs=this.sampleTs=this.sampleCheckTs=this.printTs=this.printSampleTs=t,this.startDts=this.printSampleDts=this.sampleCheckDts=this.sampleDts=e,this.cnt12=0}},{key:"stop",value:function(){this.reset()}},{key:"reset",value:function(){E.a.log("EvalBw.reset"),this.startTs=this.timeLineTs=this.sampleTs=this.sampleCheckTs=this.printTs=this.printSampleTs=0,this.startDts=this.printSampleDts=this.sampleCheckDts=this.sampleDts=0,this.cnt12=0}},{key:"onCheckFastTimer",value:function(t,e){if(this.startTs>0){var i=t-this.timeLineTs;if(i>300){var n=this.sampleTs-this.sampleCheckTs,r=this.sampleDts-this.sampleCheckDts,o=r>0?n/r:2;E.a.log("EvalBw.onCheckFastTimer eval timeline=".concat(i," costtime=").concat(n," duration=").concat(r," costtime/duration=").concat(o," dts=").concat(this.sampleDts)),o>1.4&&!this._downBwCheck()?this._evalFail():o>1.2&&!this._downBwCheck()?(this.cnt12++,this.cnt12>=2&&this._evalFail()):this.cnt12=0,this.timeLineTs=t,this.sampleCheckTs=t,this.sampleCheckDts=this.sampleDts}}if(Number(localStorage._printEval)>0&&t-this.printTs>Number(localStorage._printEval)&&this.sampleDts>0){var a=t-this.printTs,s=this.sampleTs-this.printSampleTs,u=this.sampleDts-this.printSampleDts;E.a.log("EvalBw.onCheckFastTimer print timeline=".concat(a," duration=").concat(u," costtime=").concat(s," costtime/duration=").concat(s/u," dts=").concat(this.sampleDts)),this.printTs=t,this.printSampleTs=this.sampleTs,this.printSampleDts=this.sampleDts}}},{key:"_evalFail",value:function(){this.stop(),this.ctrlBitrate.evalFail()}},{key:"_downBwCheck",value:function(){var t=this.sampleTs-this.startTs,e=this.sampleDts-this.startDts;return E.a.log("EvalBw._downBwCheck costtime=".concat(t," duration=").concat(e," costtime/duration=").concat(t/e," dts=").concat(this.sampleDts)),e>0&&t/e<1.2}},{key:"addSample",value:function(t){var e=F.a.now();if(0===this.printSampleDts&&(this.printSampleDts=t.ts,this.printTs=this.printSampleTs=e),this.sampleTs=e,this.sampleDts=t.ts,this.startTs>0&&t.key){var i=this._downBwCheck();this.stop(),i?this.ctrlBitrate.evalSuc():this.ctrlBitrate.evalFail()}}}]),t}(),Ms=function(){function t(e){Object(v.a)(this,t),this.statSwitch=e,this.type=0,this.startTs=0,this.nextIFrameTs=0,this.connectedTs=0,this.firstVideoPkgTs=0,this.ptsIFrameTs=0,this.endTs=0,this.lastPlayerType=0}return Object(g.a)(t,[{key:"start",value:function(t){var e=t.type,i=t.reason,n=t.playerType;E.a.log("AutoSeg.start, type=".concat(e,", reason=").concat(i,", playerType=").concat(n)),this.lastPlayerType=n||0,this.statSwitch.sendSwitchAuto([e,i||0]),this.type=e,this.reset(),this.startTs=F.a.now()}},{key:"nextIFrame",value:function(){this.startTs>0&&(this.nextIFrameTs=F.a.now())}},{key:"connected",value:function(){this.startTs>0&&(this.connectedTs=F.a.now())}},{key:"firstVideo",value:function(){this.startTs>0&&(this.firstVideoPkgTs=F.a.now())}},{key:"ptsIFrame",value:function(){this.startTs>0&&(this.ptsIFrameTs=F.a.now())}},{key:"end",value:function(t){var e=t.full,i=t.playerType;if(this.startTs>0){this.endTs=F.a.now();var n=[this.endTs-this.startTs,this.nextIFrameTs>0?this.nextIFrameTs-this.startTs:-1,this.connectedTs>0&&this.nextIFrameTs>0?this.connectedTs-this.nextIFrameTs:-1,this.firstVideoPkgTs>0&&this.connectedTs>0?this.firstVideoPkgTs-this.connectedTs:-1,this.ptsIFrameTs>0&&this.firstVideoPkgTs>0?this.ptsIFrameTs-this.firstVideoPkgTs:-1,this.ptsIFrameTs>0?this.endTs-this.ptsIFrameTs:-1,i||0,this.lastPlayerType];E.a.log("AutoSeg.end, result=".concat(n.toString(),", full=").concat(e,", playerType=").concat(i)),this.statSwitch.sendSwitchCost(n,[this.type,e])}this.reset()}},{key:"reset",value:function(){this.startTs=0,this.nextIFrameTs=0,this.connectedTs=0,this.firstVideoPkgTs=0,this.ptsIFrameTs=0,this.endTs=0}}]),t}(),Us=function(){function t(){Object(v.a)(this,t),this._size=0,this._cnt=0,this._index=0,this._map=new m.default,this._bufCnt=Number(B.autoCfg.bufCnt),this._sucPer=Number(B.autoCfg.sucPer),this._sucCnt=0,this._contiCnt=0}return Object(g.a)(t,[{key:"reset",value:function(){this._cnt=0,this._index=0,this._map.clear(),this._sucCnt=0,this._contiCnt=0}},{key:"setSwitchTime",value:function(t){this.reset(),this._size=t/Number(B.autoCfg.sampleTime)}},{key:"addSample",value:function(t){if(this._cnt++,t?(this._contiCnt++,this._sucCnt++,this._map.set(this._index,1)):(this._contiCnt=0,this._map.set(this._index,0)),this._cnt>this._size){this._cnt--;var e=this._index-this._size,i=this._map.get(e);this._map.delete(e),1===i&&this._sucCnt--}return this._index++,this.isFullSize()&&this.isLastReach()&&this.isPercentReach()}},{key:"isFullSize",value:function(){return this._cnt>=this._size}},{key:"isLastReach",value:function(){return this._contiCnt>=this._bufCnt}},{key:"isPercentReach",value:function(){return this._sucCnt/this._cnt>=this._sucPer}}]),t}(),Ds=function(){function t(){Object(v.a)(this,t),this._minTime=Number(B.autoCfg.minTime),this._maxTime=Number(B.autoCfg.maxTime),this._map=new m.default}return Object(g.a)(t,[{key:"reset",value:function(){E.a.log("AutoUpGap.reset"),this._map.clear()}},{key:"getMin",value:function(){return this._minTime}},{key:"getGap",value:function(t){return this._map.has(t)||this._map.set(t,this._minTime),this._map.get(t)}},{key:"addFail",value:function(t,e){E.a.log("AutoUpGap.addFail bitrate=".concat(t," isMin=").concat(e));var i=this.getGap(t);if(!e){var n=Math.min(2*i,this._maxTime);this._map.set(t,n)}}}]),t}(),Bs=new n.default,Fs=new m.default,xs=function(){function t(){Object(v.a)(this,t),this._highRate=Number(B.autoCfg.highRate),this._badBuf=Number(B.autoCfg.badBuf),this._badCnt=Number(B.autoCfg.badCnt),this._sList=[],this._sTime=B.autoCfg.badS[0],this._sCnt=B.autoCfg.badS[1],this._lList=[],this._lTime=B.autoCfg.badL[0],this._lCnt=B.autoCfg.badL[1]}return Object(g.a)(t,[{key:"reset",value:function(){this._sList=[],this._lList=[]}},{key:"getBitrates",value:function(){return(0,d.default)(Bs).join(",")}},{key:"hasBitrate",value:function(t){return Bs.has(t)}},{key:"addBadQuality",value:function(t,e,i,n){return this._addBadQuality(t,e,i,n,this._sList,this._sTime,this._sCnt)||this._addBadQuality(t,e,i,n,this._lList,this._lTime,this._lCnt)}},{key:"_addBadQuality",value:function(t,e,i,n,r,o,a){if(r.push({now:e,pauseTime:i,bufferLen:n}),r.length>a&&r.shift(),r.length>=a){var s=e-r[0].now;if(s<=o)return E.a.log("AutoBadQuality._addBadQuality disTime=".concat(s," time=").concat(o," cnt=").concat(a)),this._checkPerformance(t,r),!0}return!1}},{key:"_checkPerformance",value:function(t,e){var i=this;if(t>this._highRate)if(e.some((function(t){return t.bufferLen<i._badBuf}))){Fs.has(t)||Fs.set(t,0);var n=Fs.get(t)+1;Fs.set(t,n),n>=this._badCnt&&Bs.add(t)}else Bs.add(t)}}]),t}(),js={UP_PTS:Math.pow(2,0),UP_WAIT_IFRAME:Math.pow(2,1),UP_CONNECT_FAIL:Math.pow(2,2),UP_CONNECT_SLOW:Math.pow(2,3),UP_FIRST_FRAME:Math.pow(2,4),UP_PTS_FRAME:Math.pow(2,5),BACK_CONNECT_FAIL:Math.pow(2,6),BACK_PTS:Math.pow(2,7),EVAL_BEFORE:Math.pow(2,8),EVAL_AFTER:Math.pow(2,9),BACK_CONNECT_SLOW:Math.pow(2,10),BACK_FIRST_FRAME:Math.pow(2,11),BACK_PTS_FRAME:Math.pow(2,12),DOWN_NO_IFRAME:Math.pow(2,13),DOWN_CONNECT_FAIL:Math.pow(2,14),DOWN_PTS:Math.pow(2,15),DOWN_CONNECT_SLOW:Math.pow(2,16),DOWN_FIRST_FRAME:Math.pow(2,17),DOWN_PTS_FRAME:Math.pow(2,18),UP_NO_IFRAME:Math.pow(2,19)},Vs=function(){function t(e,i){Object(v.a)(this,t),this._ctrlBitrate=e,this._autoMonitor=i,this._buffer=null,this._startTs=0,this._connectedTs=0,this._firstFrameTs=0}return Object(g.a)(t,[{key:"setStart",value:function(t){this._startTs=F.a.now(),this._connectedTs=0,this._firstFrameTs=0,t<B.autoBufferScore&&this._ctrlBitrate.isSwitchUp()&&this._autoMonitor.addBadReason(js.UP_WAIT_IFRAME)}},{key:"setConnected",value:function(){this._connectedTs=F.a.now(),this._connectedTs-this._startTs>B.autoConnectScore&&(this._ctrlBitrate.isSwitchUp()?this._autoMonitor.addBadReason(js.UP_CONNECT_SLOW):this._ctrlBitrate.isSwitchDown()?this._autoMonitor.addBadReason(js.DOWN_CONNECT_SLOW):this._ctrlBitrate.isSwitchBack()&&this._autoMonitor.addBadReason(js.BACK_CONNECT_SLOW))}},{key:"setFirstFrame",value:function(){this._firstFrameTs=F.a.now(),this._checkFirstFrame()}},{key:"setFirstVideoTimeout",value:function(){this._connectedTs>0?this._checkFirstFrame():this._ctrlBitrate.isSwitchUp()?this._autoMonitor.addBadReason(js.UP_CONNECT_FAIL):this._ctrlBitrate.isSwitchDown()?this._autoMonitor.addBadReason(js.DOWN_CONNECT_FAIL):this._ctrlBitrate.isSwitchBack()&&this._autoMonitor.addBadReason(js.BACK_CONNECT_FAIL)}},{key:"_checkFirstFrame",value:function(){F.a.now()-this._connectedTs>B.autoFirstScore&&(this._ctrlBitrate.isSwitchUp()?this._autoMonitor.addBadReason(js.UP_FIRST_FRAME):this._ctrlBitrate.isSwitchDown()?this._autoMonitor.addBadReason(js.DOWN_FIRST_FRAME):this._ctrlBitrate.isSwitchBack()&&this._autoMonitor.addBadReason(js.BACK_FIRST_FRAME))}},{key:"setPtsFrame",value:function(t){this._checkPtsFrame(),t>0&&(this._ctrlBitrate.isSwitchUp()?this._autoMonitor.addBadReason(js.UP_PTS):this._ctrlBitrate.isSwitchDown()?this._autoMonitor.addBadReason(js.DOWN_PTS):this._ctrlBitrate.isSwitchBack()&&this._autoMonitor.addBadReason(js.BACK_PTS))}},{key:"setPtsFrameTimeout",value:function(){this._checkPtsFrame()}},{key:"_checkPtsFrame",value:function(){F.a.now()-this._firstFrameTs>B.autoPtsScore&&(this._ctrlBitrate.isSwitchUp()?this._autoMonitor.addBadReason(js.UP_PTS_FRAME):this._ctrlBitrate.isSwitchDown()?this._autoMonitor.addBadReason(js.DOWN_PTS_FRAME):this._ctrlBitrate.isSwitchBack()&&this._autoMonitor.addBadReason(js.BACK_PTS_FRAME))}},{key:"setEvalBefore",value:function(t){t<B.autoBufferScore&&this._autoMonitor.addBadReason(js.EVAL_BEFORE)}},{key:"setEvalAfter",value:function(t){t<B.autoBufferScore&&this._autoMonitor.addBadReason(js.EVAL_AFTER)}},{key:"setNoIFrame",value:function(){this._buffer&&this._buffer.isWaitForIFrame()&&(this._ctrlBitrate.isSwitchUp()?this._autoMonitor.addBadReason(js.UP_NO_IFRAME):this._ctrlBitrate.isSwitchDown()&&this._autoMonitor.addBadReason(js.DOWN_NO_IFRAME))}},{key:"reset",value:function(){this._startTs=0,this._connectedTs=0,this._firstFrameTs=0}},{key:"buffer",set:function(t){this._buffer=t}}]),t}(),Gs={NONE:0,H264ToH264:1,H264ToH265:2,H265ToH264:3,H265ToH265:4},Hs=function(){function t(e,i){var n=e.player,r=e.statSwitch,o=e.autoMonitor,a=e.recSysStat;Object(v.a)(this,t),this._player=n,this._statSwitch=r,this._autoMonitor=o,this._recSysStat=a,this._callbacks=i,this._seg=new Ms(r),this._badStat=new Vs(this,o),this._buffer=null,this._curBitrate=0,this._lastBitrate=0,this._startBitrate=0,this._sessionId=0,this._maxBitrate=0,this._originalMaxBitrate=0,this._minBitrate=0,this._bitrateList=[],this._allBitratebps="",this._switchSampleTime=Number(B.autoCfg.sampleTime),this._switchUpGap=Number(B.autoCfg.upGap),this._switchDownGap=Number(B.autoCfg.downGap),this._switchBackGap=Number(B.autoCfg.backGap),this._nextReqInterval=Number(B.recSysExpiredTime),this._firstRecSysTime=Number(B.autoCfg.sysTime),this._switchUpPer=Number(B.autoCfg.upPer),this._switchDownPer=Number(B.autoCfg.downPer),this._switchDownNowPer=Number(B.autoCfg.downNowPer),this._switchWaitPer=Number(B.autoCfg.waitPer),this._switchDownBitrate=Number(B.autoCfg.downBitrate),this._beforeSwitchCb=null,this._mse=null,this._evalBw=new Ns(this),this._switchNextTime=0,this._switchSampleTs=0,this._upGap=new Ds,this._switchUpSample=new Us,this._badRate=new xs,this._switchUpReason=0,this._switchDownReason=0,this._switchType=Gs.NONE,this._switchOver=!1,this._evalOver=!1,this._started=!1,this._nextRecSysTs=0,this._switchState=0,this._recSysProxy=null,this._badQualityCoderatebps=[],this._recSysExpiredTime=0,this._visibilityState=U.VISIBILITY_STATE.VISIBLE,this._onRecSysBind=this._onRecSys.bind(this),this._onRecSysDownTimeoutBind=this._onRecSysDownTimeout.bind(this),this._onRecSysIntervalTimeoutBind=this._onRecSysIntervalTimeout.bind(this),this._onVisibilityChangeBind=this._onVisibilityChange.bind(this),this._switchUpSample.setSwitchTime(this._upGap.getMin()),this.closeAuto=2===Number(localStorage.openAuto),this.switchStartTime=0}return Object(g.a)(t,[{key:"isSwitchUp",value:function(){return 1===this._switchState}},{key:"isSwitchDown",value:function(){return 3===this._switchState}},{key:"isSwitchBack",value:function(){return 4===this._switchState}},{key:"start",value:function(t,e){var i=this;if(!this._started)if(t&&t.parser&&t.parser.ctrlBuffer){E.a.log("CtrlBitrate.start",(0,p.default)(e)),this._mse=t;var n=t.parser.ctrlBuffer;n.setEval(this._evalBw),n.callbacks=this._callbacks,this._buffer=n,this._badStat.buffer=n,this._sessionId=e.sessionId,this._curBitrate=e.curBitrate,this._maxBitrate=e.startBitrate,3===Number(B.isWebAutoAB)&&(this._maxBitrate=B.maxBitRate),this._originalMaxBitrate=this._maxBitrate,this._startBitrate=e.startBitrate,this._bitrateList=[],this._minBitrate=u.default;var r=[];e.bitrateList.forEach((function(t){i._bitrateList.push(new Os(t)),r.push(1e3*t.bitrate),i._minBitrate=Math.min(i._minBitrate,t.bitrate)})),this._allBitratebps=r.join(","),this._bitrateList.sort((function(t,e){return t.bitrate>e.bitrate?-1:1})),this._start()}else E.a.warn("CtrlBitrate.start waring mse")}},{key:"_start",value:function(){E.a.log("CtrlBitrate._start started=".concat(this._started," bitrates=").concat(this._bitrateList.length," mse=").concat(!!this._mse)),this._mse&&this._bitrateList.length>0&&!this._started&&(this._started=!0,this._player.eventEmitter.on(T.VISIBILITY_CHANGE,this._onVisibilityChangeBind),this._switchNextTime=F.a.now()+5e3,Ji.add(this._onCheckFastTimer,this,100),Ji.once(this._firstReqAuto,this,1e3+10*Math.floor(Math.random()*this._firstRecSysTime/10)),this._onVisibilityChange())}},{key:"_onVisibilityChange",value:function(){E.a.log("CtrlBitrate._onVisibilityChange old=".concat(this._visibilityState," new=").concat(document.visibilityState)),this._visibilityState!==U.VISIBILITY_STATE.VISIBLE&&document.visibilityState===U.VISIBILITY_STATE.VISIBLE&&(this._switchSampleTs=0,this._switchUpSample.reset()),this._visibilityState=document.visibilityState}},{key:"_firstReqAuto",value:function(){E.a.log("CtrlBitrate._firstReqAuto"),this._reqAutoRecSys(1,this._onRecSysIntervalTimeoutBind)}},{key:"stop",value:function(){E.a.log("CtrlBitrate.stop"),this._mse=null,this._buffer=null,this._started=!1,this._switchState=0,this._switchType=Gs.NONE,this._switchUpReason=0,this._switchDownReason=0,this._badQualityCoderatebps=[],this._recSysExpiredTime=0,this._switchNextTime=0,this._switchTarget=null,this._curBitrate=0,this._lastBitrate=0,this._nextRecSysTs=0,this._bitrateList=[],this._evalBw.stop(),this._switchUpSample.reset(),this._upGap.reset(),this._badRate.reset(),this._destroyRecSys(),this._player.eventEmitter.off(T.VISIBILITY_CHANGE,this._onVisibilityChangeBind),Ji.remove(this._onCheckFastTimer,this),Ji.remove(this._firstReqAuto,this),this.switchStartTime=0}},{key:"pause",value:function(){this._buffer.pause()}},{key:"_sendSwitchStat",value:function(t){var e=this._buffer.switchTs.getMetric(),i=e.values,n=e.strs;this._buffer.switchTs.resetPtsSample(),i[3]=this._seg.type,n[2]=t,this._statSwitch.sendSwitchPts(i,n),this._seg.end({full:t,playerType:this._player._type})}},{key:"switchBitrate",value:function(t){this._curBitrate!==t&&(0!==this._curBitrate&&E.a.log("CtrlBitrate.switchBitrate from=".concat(this._curBitrate," to=").concat(t," buffer=").concat(this._mse.getBufferLen())),this._switchOver=!1,this._lastBitrate=this._curBitrate,this._curBitrate=t,this._buffer.switchBitrate(3===this._switchState,this._lastBitrate,this._curBitrate))}},{key:"switchBack",value:function(t){if(this.switchStartTime=0,0!==this._switchState&&this._lastBitrate<this._curBitrate){this._upGap.addFail(this._lastBitrate,this._curBitrate===this._minBitrate),this._evalBw.stop(),this._sendSwitchStat(3===t?1:2),this._seg.start({type:3,reason:t,playerType:this._player._type}),this._switchState=4,E.a.log("CtrlBitrate.switchBack from=".concat(this._curBitrate," lastBitrate=").concat(this._lastBitrate," reason=").concat(t," buffer=").concat(this._mse.getBufferLen()));for(var e=this._bitrateList.length,i=0;i<e;i++){var n=this._bitrateList[i];if(n.bitrate===this._lastBitrate){var r=this._getDownInfo(i+1,e);r&&r.bitrate>=this._switchDownBitrate&&(n=r),E.a.log("CtrlBitrate.switchBack to=".concat(n.bitrate)),this._beforeSwitchCb&&this._beforeSwitchCb(n),this._buffer.switchBack();break}}}}},{key:"startEval",value:function(t){if(1===this._switchState){var e=this._mse.getBufferLen();E.a.log("CtrlBitrate.switchDone start eval buffer=".concat(e)),this._badStat.setEvalBefore(e),this._switchState=6,this._switchUpReason=9,this._evalOver=!1,this._evalBw.start(F.a.now(),t)}}},{key:"evalSuc",value:function(){var t=this._mse.getBufferLen();E.a.log("CtrlBirate.evalSuc buffer=".concat(t)),this._badStat.setEvalAfter(t);var e=F.a.now();this._switchNextTime>e?this._switchNextTime+=this._switchUpGap:this._switchNextTime=e+this._switchUpGap,this._evalOver=!0,this._resetProperties(),this._sendSwitchStat(1),this._setPlaybackrate(!1),this._switchUpSample.setSwitchTime(this._upGap.getGap(this._curBitrate))}},{key:"evalFail",value:function(){var t=this._mse.getBufferLen();E.a.log("CtrlBirate.evalFail buffer=".concat(t)),this._badStat.setEvalAfter(t),this._switchUpReason=10,this._evalOver=!0,this.switchBack(3)}},{key:"_resetProperties",value:function(){this._evalOver&&this._switchOver&&(this._switchState=0,this._switchType=Gs.NONE,this._switchUpReason=0,this._switchDownReason=0)}},{key:"switchDone",value:function(t){this._switchOver=!0;var e=this._mse.getBufferLen();E.a.log("CtrlBitrate.switchDone buffer=".concat(e," switchType=").concat(this._switchType," switchNextGap=").concat(t));var i=F.a.now();if(this._switchNextTime=i+t,6===this._switchState&&(this.switchStartTime=i),3===this._switchState||4===this._switchState){this._evalBw.reset(),this._sendSwitchStat(1),3===this._switchState?(this._switchUpReason=0,this._switchDownReason=0,this._switchNextTime+=this._switchDownGap,this._switchState=0,this._switchType=Gs.NONE,this._setPlaybackrate(!1)):(this._switchState=5,this._switchNextTime+=this._switchBackGap);var n=this._upGap.getGap(this._curBitrate);E.a.log("CtrlBitrate.switchDone switchTime=".concat(n)),this._switchUpSample.setSwitchTime(n)}else this._resetProperties();this._buffer.play()}},{key:"_setPlaybackrate",value:function(t){var e=this._mse.getBufferLen(),i=Number(B.autoCfg.slow);i=e>3e3?.95:e>2e3?.9:.85,this._mse.setPlaybackRate(t?i:1),this._mse.autoBitrateJitter=t}},{key:"_switchUp",value:function(){if(this._curBitrate<this.maxBitrate){if(0===this._switchState){for(var t=null,e=this._bitrateList.length-1;e>=0;e--){var i=this._bitrateList[e];if(i.bitrate>this._curBitrate&&!this._badRate.hasBitrate(i.bitrate)&&i.bitrate<=this.maxBitrate&&!this._isBadBitrate(i.bitrate)){t=i;break}}if(t){if(this._player&&this._player.getIsEnableAuto&&!this._player.getIsEnableAuto(t))return void(this._switchUpReason=11);E.a.log("CtrlBitrate._switchUp suc"),this._setPlaybackrate(!0),this._seg.start({type:1,playerType:this._player._type}),this._switchState=1,this._beforeSwitchCb&&this._beforeSwitchCb(t),this._autoMonitor.start(1,this.switchType)}else this._bitrateList[0].bitrate>this.maxBitrate?this._switchUpReason=7:this._switchUpReason=6}}else this._switchUpReason=5}},{key:"addBadQuality",value:function(t,e,i){t=t||F.a.now(),E.a.log("CtrlBitrate.addBadQuality started=".concat(this._started," switchState=").concat(this._switchState)),this._started&&0===this._switchState&&this._badRate.addBadQuality(this._curBitrate,t,e,i)&&(this._badRate.reset(),E.a.log("CtrlBitrate pause down!"),this._switchDownBefore())}},{key:"_switchDownBefore",value:function(){if(0!==Number(B.autoDownTimer)){var t=this._bitrateList[this._bitrateList.length-1].bitrate;this._curBitrate>t&&(this._switchState=2,1===Number(B.sdkCloseAutoAi)||2===Number(B.isWebAutoAB)||3===Number(B.isWebAutoAB)?this._switchDown():this._reqAutoRecSys(2,this._onRecSysDownTimeoutBind))}}},{key:"_switchDown",value:function(t){var e=F.a.now();B.autoCfg&&0!=this.switchStartTime&&e-this.switchStartTime<B.autoCfg.noRederTime&&this._upGap.addFail(this._lastBitrate,this._curBitrate===this._minBitrate),t||(t=this._curBitrate),this.switchStartTime=0;for(var i=this.badQualityCoderatebps,n=this._bitrateList.length,r=null,o=0;o<n;o++){var a=this._bitrateList[o];if(a.bitrate<t&&!this._isBadBitrate(a.bitrate)){if(a.bitrate===this._minBitrate||a.bitrate<=this._switchDownBitrate)r=a;else{var s=this._getDownInfo(o+1,n);r=!s||s.bitrate<this._switchDownBitrate?a:s}break}}if(r){if(this._player&&this._player.getIsEnableAuto&&!this._player.getIsEnableAuto(r))return void(this._switchDownReason=5);E.a.log("CtrlBitrate._switchDown suc"),this._setPlaybackrate(!0),this._seg.start({type:2,playerType:this._player._type}),this._switchState=3,this._beforeSwitchCb&&this._beforeSwitchCb(r),this._autoMonitor.start(2,this.switchType)}else{E.a.log("CtrlBitrate._switchDown fail bad_host=".concat(this._badRate.getBitrates()," bad_svr=").concat(i.join(",")));var u=this._bitrateList[n-1];-1!==i.indexOf(1e3*u.bitrate)?this._switchDownReason=3:this._badRate.hasBitrate(u.bitrate)&&(this._switchDownReason=4)}}},{key:"_isBadBitrate",value:function(t){return-1!==this.badQualityCoderatebps.indexOf(1e3*t)||this._badRate.hasBitrate(t)}},{key:"_getDownInfo",value:function(t,e){return null}},{key:"_onRecSysDownTimeout",value:function(){E.a.log("CtrlBitrate._onRecSysTimeout"),this._nextRecSysTs=F.a.now()+this.nextReqInterval,this._destroyRecSys(),this._switchDown()}},{key:"_onCheckFastTimer",value:function(t,e){if(this._evalBw.onCheckFastTimer(t,e),5===this._switchState)this._fillBuf();else if(this._visibilityState===U.VISIBILITY_STATE.VISIBLE&&0===this._switchState&&t>this._switchNextTime&&!this._buffer.isPaused()&&!this.closeAuto){if(0===this._switchSampleTs)this._switchSampleTs=t;else if(t-this._switchSampleTs>=this._switchSampleTime){this._switchSampleTs=t;var i=this._mse.getBufferLen(),n=this._player.getWaitBufferLen(),r=this._player.getWaitFrameTime(t);this._needSwitchDown(t,i,n,r)?(E.a.log("CtrlBitrate buffer down! buffer=".concat(i," waitBuffer=").concat(n," waitFrameTime=").concat(r)),this._switchDownBefore()):(this._switchDownReason=2,this._switchUpSample.addSample(i>=this._mse.JITTER_BUFLEN*this._switchUpPer)?this._switchUp():this._switchUpSample.isFullSize()?this._switchUpSample.isLastReach()?this._switchUpSample.isPercentReach()||(this._switchUpReason=4):this._switchUpReason=3:this._switchUpReason=2)}}else t<this._switchNextTime&&(this._switchUpReason=1,this._switchDownReason=1);this._nextRecSysTs>0&&t>=this._nextRecSysTs&&this._reqAutoRecSys(0,this._onRecSysIntervalTimeoutBind)}},{key:"_needSwitchDown",value:function(t,e,i,n){return e+i<this._mse.JITTER_BUFLEN*this._switchDownPer}},{key:"_fillBuf",value:function(){var t=this._mse.getBufferLen();t>=this._mse.JITTER_BUFLEN*this._switchUpPer&&(E.a.log("CtrlBitrate.fillBuf suc bufferLen=".concat(t)),this._switchState=0,this._switchType=Gs.NONE,this._setPlaybackrate(!1))}},{key:"_reqAutoRecSys",value:function(t,e){if(1!==Number(B.sdkCloseAutoAi)&&2!==Number(B.isWebAutoAB)&&3!==Number(B.isWebAutoAB)){this._nextRecSysTs=u.default,this._destroyRecSys();var i=this._player.info,n=new Ls({onRsp:this._onRecSysBind,onTimeout:e});n.sendAuto({presenterUid:i.presenterUid,roomId:i.roomId,scene:1,appendInfo:{platform:"webh5&".concat(2206101758),p2p:this._player._type,h265:this._player.h265Proxy&&this._player.h265Proxy.isReady?1:0,line:i.lineType,coderatebps:1e3*i.curBitrate,gameid:i.gameId,all_coderatebps:this._allBitratebps,req_type:t,start_coderatebps:1e3*this._startBitrate,session_id:this._sessionId}},1e3),this._recSysProxy=n}}},{key:"_onRecSysIntervalTimeout",value:function(){this._nextRecSysTs=F.a.now()+this.nextReqInterval,this._destroyRecSys()}},{key:"_onRecSys",value:function(t){var e=!1,i=F.a.now();if(t){if(this._recSysStat.addItem(1,t.tRecSysInfo.sDispatchId,i+B.recSysExpiredTime),Number(localStorage._testAction)>0&&(E.a.log("CtrlBitrate._onRecSys _testAction=".concat(localStorage._testAction)),t.tRecSysInfo.lAction=Number(localStorage._testAction)),0===t.tRecSysInfo.lAction)e=!0;else if(t.tRecSysInfo.lAction>=100&&t.tRecSysInfo.lAction<200){if(""!==t.tRecSysInfo.sActValue){var n=JSON.parse(L.unescapeHTML(t.tRecSysInfo.sActValue));E.a.log("CtrlBitrate._onRecSys",(0,p.default)(n)),this._maxBitrate=Number(n.auto_max_coderatebps)/1e3||this._maxBitrate,this._nextReqInterval=1e3*Number(n.next_req_interval)||this._nextReqInterval,this._badQualityCoderatebps=n.bad_quality_coderatebps||[],this._recSysExpiredTime=F.a.now();var r=n.auto_user_tags||"";this._player.eventEmitter.autoUserTags=r,this._statSwitch.stat.setComDim(gt,r);var o=Number(n.force_auto_count),a=Number(n.force_auto_effective_time);o>0&&a>0&&this._player.trigger(T.AUTO_FORCE_RSP,{force_auto_count:o,force_auto_effective_time:a})}e=!0}}else e=!0;Number(localStorage._testBadQuality)>0&&(E.a.log("CtrlBitrate._onRecSys _testBadQuality=".concat(localStorage._testBadQuality)),this._badQualityCoderatebps=[1e3*Number(localStorage._testBadQuality)]),Number(localStorage._testMaxBitrate)>0&&(E.a.log("CtrlBitrate._onRecSys _testMaxBitrate=".concat(localStorage._testMaxBitrate)),this._maxBitrate=Number(localStorage._testMaxBitrate)),2===this._switchState?(this._switchState=0,e?this._switchDown():this._switchNextTime=this._nextRecSysTs):1===Number(B.autoDownMaxBitrate)&&this._maxBitrate<this._curBitrate&&this._switchDown(this._maxBitrate+1),this._nextRecSysTs=i+this.nextReqInterval-1e4}},{key:"_destroyRecSys",value:function(){this._recSysProxy&&this._recSysProxy.destroy(),this._recSysProxy=null}},{key:"_recSysExpired",value:function(){var t=F.a.now()-this._recSysExpiredTime;return 0!=this._recSysExpiredTime&&t>B.recSysExpiredTime}},{key:"switchType",get:function(){return this._switchType},set:function(t){this._switchType=t}},{key:"beforeSwitchCb",set:function(t){this._beforeSwitchCb=t}},{key:"lastBitrate",get:function(){return this._lastBitrate}},{key:"curBitrate",get:function(){return this._curBitrate}},{key:"maxBitrate",get:function(){return this._recSysExpired()&&(this._maxBitrate=this._originalMaxBitrate),this._maxBitrate}},{key:"nextReqInterval",get:function(){return this._recSysExpired()&&(this._nextReqInterval=Number(B.recSysExpiredTime)),this._nextReqInterval}},{key:"badQualityCoderatebps",get:function(){return this._recSysExpired()&&(this._badQualityCoderatebps=[]),this._badQualityCoderatebps}}]),t}();Hs.SwitchType=Gs;var Ws=Hs,qs=function(){function t(){Object(v.a)(this,t),this.mse=null,this.dtsGap=0,this.lastBufferLen=0,this.pauseCnt=0,this.callbacks=null}return Object(g.a)(t,[{key:"stop",value:function(){this.mse=null,this.dtsGap=0,this.callbacks=null,Ji.remove(this._onTimer,this)}},{key:"start",value:function(t,e,i){E.a.log("SwitchDoneBefore.start bufferLen=".concat(t.getBufferLen()," dtsGap=").concat(e)),this.mse=t,this.dtsGap=e,this.lastBufferLen=0,this.pauseCnt=0,this.callbacks=i,Ji.add(this._onTimer,this,100),this._onTimer(0)}},{key:"_onTimer",value:function(t){if(this.mse){var e=200;Number(localStorage._localBuffer)>0&&(e=Number(localStorage._localBuffer));var i=this.mse.getBufferLen();i<=e||this.dtsGap+i<=0||this.pauseCnt>2?(E.a.log("SwitchDoneBefore.done bufferLen=".concat(i," dtsGap=").concat(this.dtsGap," pauseCnt=").concat(this.pauseCnt)),Ji.remove(this._onTimer,this),this.callbacks&&this.callbacks.done()):i===this.lastBufferLen&&this.pauseCnt++,this.lastBufferLen=i}else this.stop()}}]),t}(),Ks=0,Ys=function(){function t(e,i,n){Object(v.a)(this,t),this._id=Ks++,E.a.log("P2PFlvPlayer(".concat(this._id,").constructor")),this._isP2pPlayIng=!1,this._type=1,this.eventEmitter=e,this._hyPlayer=i.hyPlayerIns,this.player=null,this.p2pPlayer=null,this.flvPlayer=null,this.exceptionStat=new Ao(this),this.info=null,this.h265Proxy=i.h265Proxy,this.statSwitch=i.statSwitch,this.autoMonitor=i.autoMonitor,this.recSysStat=i.recSysStat,this._switch265FailBind=this._switch265Fail.bind(this),this.ctrlBitrate=new Ws({player:this,statSwitch:this.statSwitch,autoMonitor:this.autoMonitor,recSysStat:this.recSysStat},{start:this._switchStart.bind(this),first:this._switchFirstSample.bind(this),done:this._switchDone.bind(this)}),this.videoElement=i.videoElement,this.mse=this.createMse(),this.ctrlBitrate.beforeSwitchCb=this._beforeSwitch.bind(this),this.switchDoneBefore=new qs,this.anticode=new Eo,this.videoStatus=b,this.closeP2pCoderates=[],this.onP2PTimeoutBind=this.onP2pTimeout.bind(this),this.flvTryToP2PBind=this.flvTryToP2P.bind(this),this.eventEmitter.on(_.P2P_TIMEOUT,this.onP2PTimeoutBind),this.eventEmitter.on(_.FLV_TRY_TO_P2P,this.flvTryToP2PBind),this.handlerType=0}return Object(g.a)(t,[{key:"initPlayer",value:function(t,e){this.info=t,t.mpExtArgs&&t.mpExtArgs.closep2pcoderate&&(this.closeP2pCoderates=t.mpExtArgs.closep2pcoderate.split(","));var i=t.iIsP2PSupport,n=this.getIsCloseP2P();i&&n&&(t.type===HYPlayer.VR?t.vr.playerType=0:t.type=HYPlayer.FLV),this.handlerType=e.handlerType,E.a.log("P2PFlvPlayer.initPlayer, closeP2pCoderates",this.closeP2pCoderates),Ji.add(this.onCheckTimer,this,1e3),e.mse=this.mse,e.exceptionStat=this.exceptionStat,e.p2pFlvPlayer=this,e.anticode=this.anticode,this.flvPlayer=new Ha(this.eventEmitter,e,this.videoElement),this.p2pPlayer=new Cs(this.eventEmitter,e,this.videoElement),this.startPlayer(t)}},{key:"createMse",value:function(){var t=new mr(this,{videoType:"flv",isPureAudio:this.isPureAudio,isPureVideo:this.isPureVideo,h265Proxy:this.h265Proxy,videoElement:this.videoElement});return t.setPushGop(B.pushGop),t}},{key:"startPlayer",value:function(t){switch(t.type){case 1:this._hyPlayer.lastFlvInfo=t,this._hyPlayer.lastP2PInfo&&(this.flvPlayer.backToP2P.lastP2PInfo=this._hyPlayer.lastP2PInfo),this.player=this.flvPlayer,this._type=1;break;case 2:if(!wa.isSupportP2P()||B.isCloseP2P(t.uid))return this._hyPlayer.lastP2PInfo=t,this.onP2pTimeout(),void E.a.error("xxxxxxx "+D.a.name+" "+D.a.version.major+" unsupport p2p !");this._hyPlayer.lastP2PInfo=t,this._isP2pPlayIng=!0,this.p2pPlayingEvent(this._isP2pPlayIng),this._hyPlayer.isForceFlv=!1,this.player=this.p2pPlayer,this._type=2}}},{key:"start",value:function(t){2==t.type&&this.flvPlayer.checkParams(t),2==t.type&&t.p2purl?this.player.startP2PUrl(t):this.player.start(t)}},{key:"startP2PUrl",value:function(t){2==t.type&&t.p2purl&&this.player.startP2PUrl(t)}},{key:"onCheckTimer",value:function(t,e){this.anticode.onCheckTimer(t,e)}},{key:"flvTryToP2P",value:function(){this._hyPlayer.lastP2PInfo&&(this._hyPlayer.metrics.setP2p(1),N.flvTryToP2P=1,this._hyPlayer.lastP2PInfo.type===HYPlayer.VR?this._hyPlayer.lastP2PInfo.vr.playerType=1:this._hyPlayer.lastP2PInfo.type=HYPlayer.P2P,this.trigger(_.FLV_TO_P2P),this._hyPlayer.start(this._hyPlayer.lastP2PInfo),this._hyPlayer.isForceFlv=!1,this._hyPlayer.sdkTurnToP2P=!0),this._hyPlayer.flacMgr&&(this._hyPlayer.stopFlac(),this._hyPlayer.startFlac())}},{key:"onP2pTimeout",value:function(){this._hyPlayer.stat.reset(),this._isP2pPlayIng=!1,this.p2pPlayingEvent(this._isP2pPlayIng),this._hyPlayer.isForceFlv=!0,this._hyPlayer.lastP2PInfo.type===HYPlayer.VR?this._hyPlayer.lastP2PInfo.vr.playerType=0:this._hyPlayer.lastP2PInfo.type=HYPlayer.FLV,this._hyPlayer.start(this._hyPlayer.lastP2PInfo)}},{key:"p2pPlayingEvent",value:function(t){this.trigger(_.P2P_PLAYING_EVENT,{isP2pPlayIng:t})}},{key:"trigger",value:function(t,e){this.eventEmitter.trigger(t,e)}},{key:"setVolume",value:function(t){this.player.setVolume(t)}},{key:"setEnableLowLatency",value:function(t){this.player&&this.player.setEnableLowLatency&&this.player.setEnableLowLatency(t)}},{key:"setPlaybackrateAccess",value:function(t){this.player&&this.player.setPlaybackrateAccess&&this.player.setPlaybackrateAccess(t)}},{key:"updateFlvConfig",value:function(){this.player&&this.player.updateFlvConfig&&this.player.updateFlvConfig()}},{key:"updateP2PConfig",value:function(){this.player&&this.player.updateP2PConfig&&this.player.updateP2PConfig()}},{key:"getFrameData",value:function(){return this.player&&this.player.getFrameData()}},{key:"getExceptionStat",value:function(){return this.player.exceptionStat?this.player.exceptionStat.getStat():""}},{key:"seek",value:function(t){this.player&&this.player.seek&&this.player.seek(t)}},{key:"getBufferLen",value:function(){return this.mse&&this.mse.getBufferLen?this.mse.getBufferLen():0}},{key:"setMuted",value:function(){this.player&&this.player.setMuted(val)}},{key:"getMuted",value:function(){return this.player&&this.player.getMuted()}},{key:"getCurrentTime",value:function(){return this.player&&this.player.getCurrentTime()}},{key:"getCurrentDts",value:function(){return this.player?this.player.getCurrentDts():0}},{key:"getCurrentSeiOffsetDts",value:function(){return this.player?this.player.getCurrentSeiOffsetDts():0}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"pause",value:function(){this.player&&this.player.pause()}},{key:"stop",value:function(){this._isP2pPlayIng=!1,this.videoStatus=b,this.p2pPlayingEvent(this._isP2pPlayIng),this.flvPlayer.stop(),this.p2pPlayer.stop(),this.mse&&(this.mse.destroy(),this.mse=null),this.exceptionStat.reset(),this.flvPlayer=null,this.p2pPlayer=null,this.eventEmitter.off(_.P2P_TIMEOUT,this.onP2PTimeoutBind),this.eventEmitter.off(_.FLV_TRY_TO_P2P,this.flvTryToP2PBind),this.ctrlBitrate.stop(),this.switchDoneBefore.stop(),Ji.remove(this._switchFirstVideoTimeout,this),Ji.remove(this._switchPtsIFrameTimeout,this),Ji.remove(this.onCheckTimer,this),this.info=null,this.handlerType=0}},{key:"destroy",value:function(){this.player&&this.player.destroy&&this.player&&this.player.destroy()}},{key:"stopStream",value:function(t){this.player&&this.player.stopStream&&this.player.stopStream(t)}},{key:"checkPcdnMode",value:function(t){this.player&&this.player.checkPcdnMode&&this.player.checkPcdnMode(t.mPcdnModeSwitch.value,t.mPcdnModePcdnName.value)}},{key:"containerResize",value:function(t){this.player&&this.player.h265Proxy&&this.player.h265Proxy.containerResize(t)}},{key:"getCdnSip",value:function(){return this.player&&this.player.getCdnSip&&this.player.getCdnSip()}},{key:"getDelayInfo",value:function(){return this.player&&this.player.mse.getDelayInfo()}},{key:"getRealBitrate",value:function(){return this.player&&this.player.mse.getRealBitrate()}},{key:"setVideoPlayTimeSended",value:function(){this.player&&this.player.setVideoPlayTimeSended&&this.player.setVideoPlayTimeSended()}},{key:"onVideoStop",value:function(t,e){this.player&&this.player.onVideoStop&&this.player.onVideoStop(t,e)}},{key:"onPlayResume",value:function(t){this.player&&this.player.onPlayResume&&this.player.onPlayResume(t)}},{key:"onPlayerError",value:function(t){this.player&&this.player.onPlayerError&&this.player.onPlayerError(t)}},{key:"onErrorEvent",value:function(t){E.a.log("P2PFlvPlayer.onErrorEvent",t),this.player&&this.player.onErrorEvent&&this.player.onErrorEvent(t)}},{key:"onVideoParseInvalid",value:function(){this.player&&this.player.onVideoParseInvalid&&this.player.onVideoParseInvalid()}},{key:"onGop",value:function(t){this.player&&this.player.onGop&&this.player.onGop(t)}},{key:"turnToH264",value:function(){this.player&&this.player.turnToH264&&this.player.turnToH264()}},{key:"h265Retry",value:function(){this.player&&this.player.h265Retry&&this.player.h265Retry()}},{key:"reloadInError",value:function(){this.player&&this.player.reloadInError&&this.player.reloadInError()}},{key:"resetMediasource",value:function(){this.player&&this.player.resetMediasource&&this.player.resetMediasource()}},{key:"recvDataFull",value:function(){this.player&&this.player.recvDataFull&&this.player.recvDataFull()}},{key:"onPlayVideo",value:function(t,e,i,n,r,o,a){this.updateStatus(w),this.player&&this.player.onPlayVideo&&this.player.onPlayVideo(t,e,i,n,r,o,a)}},{key:"onSendSeiData",value:function(t,e,i){this.player&&this.player.onSendSeiData&&this.player.onSendSeiData(t,e,i)}},{key:"onSendScriptVolumeInfo",value:function(t,e){this.player&&this.player.onSendScriptVolumeInfo&&this.player.onSendScriptVolumeInfo(t,e)}},{key:"onSBUpdateEnd",value:function(){this.player&&this.player.onSBUpdateEnd&&this.player.onSBUpdateEnd()}},{key:"onPauseByBrowser",value:function(){this.player&&this.player.onPauseByBrowser&&this.player.onPauseByBrowser()}},{key:"updateStatus",value:function(t){this.player&&this.player.updateStatus&&this.player.updateStatus(t),this.videoStatus=t}},{key:"onPause5Sec",value:function(){this.player&&this.player.onPause5Sec&&this.player.onPause5Sec()}},{key:"setEmptyFrames",value:function(t){this.player&&this.player.hasEmptyFrames&&(this.player.hasEmptyFrames=t)}},{key:"onPlayPause",value:function(t,e){this.player&&this.player.onPlayPause&&this.player.onPlayPause(t,e)}},{key:"getWaitBufferLen",value:function(){return this.player?this.player.getWaitBufferLen():0}},{key:"getWaitFrameTime",value:function(t){return this.player?this.player.getWaitFrameTime(t):0}},{key:"getRecvInfo",value:function(){return this.player&&this.player.getRecvInfo&&this.player.getRecvInfo()}},{key:"setAudioUtil",value:function(t){return this.player&&this.player.setAudioUtil&&this.player.setAudioUtil(t)}},{key:"_beforeSwitch",value:function(t){this.switchDoneBefore.stop();var e=this.info;e._delayRemove=!1,e.iBitRate=t.iBitRate,e.curBitrate=t.bitrate,e.originalBitrate=0===t.iBitRate,e.iCodecType=t.iCodecType,e.iHEVCBitRate=t.iHEVCBitRate;var i=this.h265Proxy.renderInited;this.h265Proxy.initSupport(e);var n=this.h265Proxy.isSupported;!i&&n?(this.ctrlBitrate.switchType=Ws.SwitchType.H264ToH265,this.h265Proxy.loadDecoder(e.h5Root,{ready:this._onH265DecoderReady.bind(this),error:this._switch265FailBind,timeout:this._switch265FailBind})):(i||n?i&&n?this.ctrlBitrate.switchType=Ws.SwitchType.H265ToH265:i&&!n&&(this.ctrlBitrate.switchType=Ws.SwitchType.H265ToH264,e._delayRemove=!0):this.ctrlBitrate.switchType=Ws.SwitchType.H264ToH264,this.switchLevel(e))}},{key:"_onH265DecoderReady",value:function(){E.a.log("IPlayer._onH265DecoderReady"),this.info._delayRemove=!0,this.switchLevel(this.info)}},{key:"_switch265Fail",value:function(){this.ctrlBitrate.switchType=Ws.SwitchType.H264ToH264,this.switchLevel(this.info)}},{key:"setAutoInfo",value:function(t){this.ctrlBitrate.setAutoInfo(t)}},{key:"switchLevel",value:function(t){B.initByBitrate(t.curBitrate),this.player.started&&(this.info=t,this.statSwitch.check(t,!0),this.ctrlBitrate.switchBitrate(t.curBitrate),this._triggerAutoChanged())}},{key:"getIsCloseP2P",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===B.closeP2PConfig[0])return!1;var e=t.iBitRate||this.info.iBitRate,i=!1;return this.closeP2pCoderates.map((function(t){Number(t)===Number(e)&&(i=!0)})),i}},{key:"getIsEnableAuto",value:function(t){var e=this;if(0==B.closeP2PConfig[0]||0==B.closeP2PConfig[1])return!0;if(this.info.iIsP2PSupport&&1==B.closeP2PConfig[1]){var i=this.info.bitrateList,n=0;if(i.map((function(t){-1!=e.closeP2pCoderates.indexOf(String(t.iBitRate))&&n++})),0!=i.length){if(0===n)return!0;if(0!=n&&n!=i.length)return!1;if(0!=n&&n==i.length)return!0}}return!0}},{key:"getDurationTime",value:function(){return this.player?this.player.getDurationTime&&this.player.getDurationTime():0}},{key:"_switchStart",value:function(t,e){var i=this.info.iBitRate,n=this.info.iIsP2PSupport,r=this.getIsCloseP2P(),o=this.getBufferLen();E.a.log("IPlayer(".concat(this._id,")._switchStart bufferLen=").concat(o," dts=").concat(t," pts=").concat(e," isCloseP2P=").concat(r," iIsP2PSupport=").concat(n," iBitRate=").concat(i)),n?r&&2==this._type?(this.info.type=1,this._type=1,this.flvPlayer.info=this.info,this.p2pPlayer.stopPlayer(),this.flvPlayer.startPlayer(this.info),this._switchStartFlv(t,e),this.player=this.flvPlayer):r&&1==this._type?this._switchStartFlv():r||2!=this._type?r||1!=this._type||(this.info.type=2,this.flvPlayer.stopPlayer(),this.flvPlayer.loader.close(),this._type=2,this.p2pPlayer.startPlayer(this.info),this._hyPlayer.lastP2PInfo=this.info,this._switchStartP2P(t,e),this.player=this.p2pPlayer):this._switchStartP2P(t,e):this._switchStartFlv(t,e),this.ctrlBitrate._badStat.setStart(o),this.ctrlBitrate._seg.nextIFrame(),Ji.once(this._switchFirstVideoTimeout,this,1e3),this.isSwitchPause=!1}},{key:"_switchStartP2P",value:function(t,e){this.p2pPlayer.loaderMgr.stopFullStream(),this.p2pPlayer._switchStart(t,e),this.p2pFlvPlayerSetType(2)}},{key:"_switchStartFlv",value:function(t,e){this.flvPlayer.loader.close(),this.flvPlayer._switchStart(t,e),this.p2pFlvPlayerSetType(1)}},{key:"p2pFlvPlayerSetType",value:function(t){1==this.handlerType&&this._hyPlayer.p2pFlvPlayerSetType(t)}},{key:"onConnected",value:function(){E.a.log("IPlayer(".concat(this._id,").onConnected")),this.ctrlBitrate._badStat.setConnected(),this.ctrlBitrate._seg.connected()}},{key:"_switchFirstSample",value:function(){E.a.log("IPlayer(".concat(this._id,")._switchFirstSample")),this.ctrlBitrate._badStat.setFirstFrame(),this.ctrlBitrate._seg.firstVideo(),Ji.remove(this._switchFirstVideoTimeout,this),Ji.once(this._switchPtsIFrameTimeout,this,1e3)}},{key:"_switchFirstVideoTimeout",value:function(){E.a.log("IPlayer(".concat(this._id,")._switchFirstVideoTimeout")),this.ctrlBitrate._badStat.setFirstVideoTimeout(),this.switchDoneBefore.stop(),this.ctrlBitrate.switchBack(1)}},{key:"_switchPtsIFrameTimeout",value:function(){E.a.log("IPlayer(".concat(this._id,")._switchPtsIFrameTimeout")),this.ctrlBitrate._badStat.setPtsFrameTimeout(),this.switchDoneBefore.stop(),this.ctrlBitrate.switchBack(2)}},{key:"_switchDone",value:function(t,e,i){this.ctrlBitrate._badStat.setPtsFrame(i),this.ctrlBitrate._seg.ptsIFrame(),Ji.remove(this._switchPtsIFrameTimeout,this),this.ctrlBitrate.startEval(e),this.ctrlBitrate.switchType===Ws.SwitchType.H264ToH265||this.ctrlBitrate.switchType===Ws.SwitchType.H265ToH264?(this.ctrlBitrate.pause(),this.switchDoneBefore.start(this.mse,t,{done:this._onSwitchDoneBefore.bind(this)})):this._switchDoneReal(0),E.a.log("P2PFlvPlayer._switchDone _type=".concat(this._type)),2===this._type&&this.p2pPlayer._switchDone(t,e,i)}},{key:"_onSwitchDoneBefore",value:function(){var t=this.mse;E.a.log("IPlayer(".concat(this._id,")._onSwitchDoneBefore mse=").concat(!!t," switchType=").concat(this.ctrlBitrate.switchType)),t&&(t.resetVideo(),t.playing=!1,t.parser.remuxer.reset(),this.ctrlBitrate.switchType===Ws.SwitchType.H265ToH264?this.h265Proxy.stop():this.ctrlBitrate.switchType===Ws.SwitchType.H264ToH265&&this.h265Proxy.initRender(t)),this._switchDoneReal(3e3)}},{key:"_switchDoneReal",value:function(t){E.a.log("IPlayer(".concat(this._id,")._switchDoneReal")),this.ctrlBitrate.switchDone(t)}},{key:"_triggerAutoChanged",value:function(){this.eventEmitter.trigger(_.AUTO_BITRATE_CHANGED,{lastBitrate:this.ctrlBitrate.lastBitrate,curBitrate:this.ctrlBitrate.curBitrate})}},{key:"isP2P",get:function(){return 2==this._type}},{key:"type",get:function(){return this._type}},{key:"isFlv",get:function(){return 1==this._type}},{key:"isPlaying",get:function(){return this.videoStatus!==b}},{key:"hasPicture",get:function(){if(!this.player)return!1;var t=this.isPlaying&&0!==this.player.mse.getCurrentTime();return this.player&&this.player.h265Proxy&&this.player.h265Proxy.rendering&&(t=t&&this.player.h265Proxy.rendering),t}},{key:"voiceEliminationData",get:function(){return this.player.voiceEliminationData},set:function(t){this.player.voiceEliminationData=t}},{key:"connected",get:function(){return!!this.player&&this.player.connected}}]),t}(),zs=F.a.now(),Js=function(){function t(e){Object(v.a)(this,t),F.a.now();var i=Number(localStorage.sdkLogLevel);isNaN(i)||this.setLogLevel(i),N.initUUId(),this.uuid=N.uuid,this.VideoPlayTimeSended=!1;var n=D.a.platform+" "+D.a.name+" "+D.a.version.string;E.a.warn("SDK ".concat(2206101758," | ").concat("2022-06-10 17:58:51"," | ").concat("RELEASE"," | ").concat(n," | ").concat(this.uuid)),this.config=B,this.config.init(e),this.config.jitBufLen=6e3,this.config.jitMaxBufLen=16e3,this.config.jitMinBufLen=3e3;var r=function(){var t=new Ii.a;return t.trigger=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var o=n;"Array"===n.constructor.name&&(o=n[0]),e===T.PLAY_STATUS?E.a.log("%c"+e+" %c"+o.status,"color:#F9F900;background:gray","color:#53FF53;background:gray"):-1===Fo.indexOf(e)&&E.a.log("%c"+e,"color:#F9F900;background:gray",o),t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))},t}();this.on=r.on.bind(r),this.off=r.off.bind(r),this.trigger=r.trigger.bind(r),this.volume=1,this._type=0,this.player=null,this.lastFlvInfo=null,this.lastP2PInfo=null,this.noPictureSended=!1,this.playingMgr=null,this.videoPlaybackrateAccess=!D.a.firefox,this.stat=new Mo,this.statVod=new Uo,this.metrics=new li,this.abConfig=new _a,this.tsdbUtil=new oi({stat:this.stat,statVod:this.statVod,eventEmiter:this}),this.statSwitch=new $o(this.tsdbUtil,this.stat,this),this.sampleController=new Vo,this.h265Proxy=new aa(this.stat,this.tsdbUtil),this.autoMonitor=new ha,this.recSysStat=new fa,this.visibility=new sa(this),this.autoForce=new va(this,this.abConfig),this.bitrateChange=new Sa(this.abConfig),this.statSwitch.init(this.autoMonitor,this.recSysStat,this.autoForce),this.autoMonitor.init(this.stat),this.enableLowLatency=!1,this.nimoPlayConfig=null,this.audiouitil=null,this.startTs=0,this.on(T.VIDEO_PLAY,this.onPlayVideo.bind(this)),this.on(T.AUTO_BITRATE_CHANGED,this.onAutoBitrateChanged.bind(this)),this.sdkInRoomTs=Date.now(),this.roomRecordStat=new Ho(this),this.autoStartBitrate=0,this.inRoomTimeNow=zs,this.autoUserTags=""}return Object(g.a)(t,null,[{key:"isSupported",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')&&!D.a.msie}},{key:"Events",get:function(){return T}}]),Object(g.a)(t,[{key:"initWorker",value:function(){B.isForceUseWorker=1,Ji.initWorker()}},{key:"isBrowserSupport",value:function(){return D.a.firefox||D.a.opera||D.a.chrome&&53!=D.a.version.major}},{key:"isNeedAud",value:function(){return D.a.chrome&&D.a.version.major>=73}},{key:"isP2PCooling",value:function(){return!1}},{key:"setOexp",value:function(t){this.stat.setComDim(G,t)}},{key:"setExtendConfig",value:function(t){var e={};t.p2pConfig&&((0,P.default)(e,t.p2pConfig),delete t.p2pConfig),t.sdk&&(t.sdk.p2pConfig&&((0,P.default)(e,t.sdk.p2pConfig),delete t.sdk.p2pConfig),(0,P.default)(e,t.sdk),delete t.sdk),(0,P.default)(e,t),this.config.init(e)}},{key:"setConfig",value:function(t,e){this.config[t]!=e&&(this.config[t]=e,E.a.log("HYPlayer.setConfig ".concat(t,"=").concat(e)))}},{key:"setNimoConfig",value:function(t){try{t.nimoConfig&&(this.nimoPlayConfig=JSON.parse(t.nimoConfig)),this.setExtendConfig(this.nimoPlayConfig),this.player&&this.player.updateFlvConfig&&this.player.updateFlvConfig(),this.player&&this.player.updateP2PConfig&&this.player.updateP2PConfig()}catch(t){E.a.log("config err")}}},{key:"getConfig",value:function(t){return this.config[t]}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){var e=Math.max(0,Number(t));e=Math.min(1,e),this.volume=e,this.player&&this.player.setVolume(e)}},{key:"getRecvInfo",value:function(){return this.player&&this.player.getRecvInfo?this.player.getRecvInfo():null}},{key:"pause",value:function(){this.player&&(this.player.pause?this.player.pause():this.player.stop())}},{key:"play",value:function(){this.player&&this.player.play&&this.player.play()}},{key:"setLogLevel",value:function(t){E.a.setLevel(t)}},{key:"updateLiveVodUrl",value:function(t){this.player&&this.player.updateLiveVodUrl&&this.player.updateLiveVodUrl(t)}},{key:"getExceptionStat",value:function(){return this.player.exceptionStat?this.player.exceptionStat.getStat():""}},{key:"seek",value:function(t){this.player&&this.player.seek&&this.player.seek(t)}},{key:"getLog",value:function(){return E.a.getLog()}},{key:"getMetrics",value:function(){return this.metrics.getResult()}},{key:"getBufferLen",value:function(){return this.player&&this.player.getBufferLen&&this.player.getBufferLen()||0}},{key:"getCurrentTime",value:function(){return this.player?this.player.getCurrentTime():0}},{key:"getCurrentDts",value:function(){return this.player&&this.player.getCurrentDts?this.player.getCurrentDts():0}},{key:"getCurrentSeiOffsetDts",value:function(){return this.player&&this.player.getCurrentSeiOffsetDts?this.player.getCurrentSeiOffsetDts():0}},{key:"getCurrentSeiDts",value:function(){return this.getCurrentDts()-this.getCurrentSeiOffsetDts()}},{key:"getDurationTime",value:function(){return this.player?this.player.getDurationTime&&this.player.getDurationTime():0}},{key:"sendMetrics",value:function(t){this.trigger(T.DATA_METRIC2,t)}},{key:"sendDanmuCarton",value:function(t,e,i){this.tsdbUtil.sendMetrics([this.stat.createAct(oi.METRIC.RECV_DANMU_CARTON,{str:[t,e,i]})])}},{key:"start",value:function(e){e.appid&&(N.appId=e.appid,N.appid=e.appid),1==Number(B.closeNimoAuto)&&(B.autoCfg.close=1),B.isConfigSupportH265=0,B.isAiP2PToFlv=0,B.sdkCloseAutoAi=1,B.isCloseVodPcdn=1,e.iBitRate=this.bitrateChange.getBitrate(e.presenterUid,e.lineType,e.iBitRate),!e.isAuto||0!==this.autoStartBitrate&&1!=e.pullStreamFrom||(this.autoStartBitrate=e.curBitrate),e._startBitrate=this.autoStartBitrate,e._sessionId=this.sdkInRoomTs,B.closeP2PConfig=[0,0],e=(0,P.default)({uuid:this.uuid,type:0,lineType:-1,curBitrate:0,originalBitrate:0,enableLowLatency:0},e),this.stop(),this.enableLowLatency=e.enableLowLatency,E.a.log("HYPlayer.start type=".concat(e.type),e),e.type===t.P2PFLV&&(e.iIsP2PSupport?(this.lastP2PInfo=e,e.type=t.P2P):e.type=t.FLV),this.stat.setComDim("browser_name",D.a.name),this.stat.setComDim("browser_version",D.a.version.major),this.stat.setComDim(q,D.a.name),this.stat.setComDim(K,D.a.version.major),this.stat.setComDim("auto_open",e.hasAutoBitrate?1:0),this.stat.setComDim("start_coderatebps",1e3*this.autoStartBitrate),this.stat.setComDim("auto_version",1),this.stat.setComDim(tt,e.type),this.stat.setComDim(et,e.liveType||0),this.stat.setComDim("start_type",e.startType||1),this.stat.setComDim(Y,si.os),this.stat.setComDim(z,si.osVersion),this.stat.setComDim(vt,navigator.hardwareConcurrency||0),!!Ko&&this.stat.setComDim(J,Yo()),this.stat.setComDim("auto_bitrate",e.isAuto?1:0),e.hasOwnProperty("isLive")&&!e.isLive&&(this.statVod.setComDim(tt,e.type),this.statVod.setComDim(et,e.liveType||0),this.statVod.setComDim("vr_enable",e.type===t.VR?1:0),this.statVod.setComDim(q,D.a.name),this.statVod.setComDim(K,D.a.version.major),this.statVod.setComDim(Y,si.os),this.statVod.setComDim(z,si.osVersion),this.statVod.setComDim(vt,navigator.hardwareConcurrency||0),this.statVod.setComDim(J,Yo()),this.statVod.setComDim("session_id",this.sdkInRoomTs)),this.visibility.setStat(this.stat),this._type=e.type,N.uid=e.uid||N.uid,N.sGuid=e.sGuid||N.sGuid,0===N.convertUid&&N.uid>0&&(N.convertUid=L.rotUid(N.uid,e.presenterUid)),Ji.once(this.onNoPicture,this,1e4),e.url&&(e.url=e.url.replace("http://","https://")),this.startTs=F.a.now();var i={stat:this.stat,tsdb:this.tsdbUtil,statSwitch:this.statSwitch,sampleController:this.sampleController,h265Proxy:this.h265Proxy,autoMonitor:this.autoMonitor,recSysStat:this.recSysStat,videoElement:this.videoElement,hyPlayerIns:this,statVod:this.statVod};switch(E.a.log("HYPlayer.startNow",Date.now(),this.startTs),e.type){case t.P2P:case t.FLV:i.handlerType=1,this.player=new Ys(this,i),this.player.initPlayer(e,i);break;case t.HLS:var n=t.isSupported()?No:HlsTagPlayer;this.player=new n(this,i);break;case t.PLAYBACK:this.player=new Qo(this,i)}this.player.setVideoPlayTimeSended&&this.VideoPlayTimeSended&&this.player.setVideoPlayTimeSended(),this.player.start(e),this.nimoPlayConfig&&this.setNimoConfig(this.nimoPlayConfig),this.enableLowLatency&&this.player&&this.player.setEnableLowLatency&&this.player.setEnableLowLatency(!0),this.player.setPlaybackrateAccess&&this.player.setPlaybackrateAccess(this.videoPlaybackrateAccess),this.playingMgr=this.player}},{key:"attachMediaElement",value:function(t){this.videoElement=t}},{key:"sendVideoLoadError",value:function(){this.player&&this.player.sendLoadVideoErrorStatus()}},{key:"getPlayStats",value:function(){return{create_time:this.stat.create_time,isSendLoadTime:this.tsdbUtil.isSendLoadTime,noPictureP2PSended:this.noPictureP2PSended,noPictureFlvSended:this.noPictureFlvSended}}},{key:"setPlayStats",value:function(t){t.hasOwnProperty("create_time")&&this.stat.setCreateTime(t.create_time),this.tsdbUtil.isSendLoadTime=t.isSendLoadTime,this.noPictureP2PSended=t.noPictureP2PSended,this.noPictureFlvSended=t.noPictureFlvSended}},{key:"onNoPicture",value:function(){if(Ji.remove(this.onNoPicture,this),!this.noPictureSended&&this.player){this.noPictureSended=!0;var t=this.player.getRecvInfo?this.player.getRecvInfo():[],e=[this.player.isPlaying?0:100,this.player.hasPicture?0:100].concat(t),i="no_picture";F.a.now()-this.stat.create_time<1e4&&this.isP2P&&!this.player.isPlaying&&(i="no_picture_p2p");var n=[this.stat.createAct(i,{value:e})];this.stat.setActDim(At.name,this.getExceptionStat()),n.push(this.stat.createAct("link_sta",{value:[this.player.hasPicture?0:100],str:[D.a.platform]})),this.trigger(T.DATA_METRIC2,n)}}},{key:"reportNoPictureProps",value:function(){E.a.log("HYNimoPlayer.reportNoPictureProps");var t=this.player.getCostTimes?this.player.getCostTimes():[],e=[this.player.isPlaying?0:100,this.player.hasPicture?0:100].concat(t),i=[this.stat.createAct("no_picture2",{value:e})];this.trigger(T.DATA_METRIC2,i)}},{key:"onPlayVideo",value:function(t){this.audiouitil||(this.audiouitil=new Bo),this.player&&this.player.setAudioUtil&&this.player.setAudioUtil(this.audiouitil),this.VideoPlayTimeSended=!0}},{key:"stop",value:function(){E.a.group("HYPlayer.stop"),Ji.remove(this.onNoPicture,this),Ji.remove(this.tryPlayP2PTimeout,this),this.player&&(this.player.stop(),this.player.destroy&&this.player.destroy(),this.player=null),this.visibility.delVisibilitychange(),E.a.groupEnd(),this.stat.reset(),this.startTs=0}},{key:"setAppHandler",value:function(t){t.onHySDKPlayerInited(this)}},{key:"setTafHandler",value:function(t){xo.default.setTafHandler(t),gn.start()}},{key:"flvTryToP2P",value:function(){this.lastP2PInfo&&(this.metrics.setP2p(1),N.flvTryToP2P=1,this.lastP2PInfo.type=t.P2P,this.noPictureSended=!1,this.trigger(T.FLV_TO_P2P),this.start(this.lastP2PInfo),this.isForceFlv=!1,this.sdkTurnToP2P=!0,Ji.once(this.tryPlayP2PTimeout,this,3e3)),this.flacMgr&&this.player&&(this.stopFlac(),this.startFlac())}},{key:"onP2pTimeout",value:function(){this.onNoPicture(),this._isP2pPlayIng=!1,this.isForceFlv=!0,this.noPictureSended=!1,this.lastP2PInfo.type===t.VR?this.lastP2PInfo.vr.playerType=0:this.lastP2PInfo.type=t.FLV,this.start(this.lastP2PInfo)}},{key:"tryPlayP2PTimeout",value:function(){!this.player||this.isP2P&&this.player.isPlaying||this.trigger(T.P2P_TIMEOUT)}},{key:"reportLoadP2PLib",value:function(t){var e=[this.stat.createAct("load_p2plib_error",{value:[t?100:0],str:[D.a.platform]})];this.trigger(T.DATA_METRIC2,e)}},{key:"switchLevel",value:function(t){t&&t.url&&(t.url=t.url.replace("http://","https://")),this.player&&this.player.switchLevel(t)}},{key:"getCdnSip",value:function(){return this.player.getCdnSip&&this.player.getCdnSip()}},{key:"setAbTestConfig",value:function(t){if(E.a.log("HYPlayer.setAbTestConfig abConfig",t),!t)return null;""!=t.mpExperiment&&this.stat.setComDim(G,t.mpExperiment)}},{key:"getUseAuto",value:function(){return this.autoForce.getUseAuto()}},{key:"getSupportAuto",value:function(){return!B.getEnableJumpBuffer()}},{key:"p2pFlvPlayerSetType",value:function(e){switch(this._type=e,e){case t.FLV:this.roomRecordStat.liveType=0;break;case t.P2P:this.roomRecordStat.liveType=1}}},{key:"onAutoBitrateChanged",value:function(){if(this.player){var t=this.player.info;if(t){var e={curBitrate:t.curBitrate,originalBitrate:t.originalBitrate,iBitRate:t.iBitRate,iCodecType:t.iCodecType,iHEVCBitRate:t.iHEVCBitRate};this.lastP2PInfo&&(0,P.default)(this.lastP2PInfo,e),this.lastFlvInfo&&(0,P.default)(this.lastFlvInfo,e)}}}},{key:"isSupportP2P",get:function(){return!1}},{key:"type",get:function(){return this._type}},{key:"isFlv",get:function(){return this._type==t.FLV}},{key:"isP2P",get:function(){return this._type==t.P2P}},{key:"isHls",get:function(){return this._type==t.HLS}}]),t}();Js.FLV=1,Js.P2P=2,Js.HLS=3,Js.HUYA=4,Js.STREAM=5,Js.PLAYBACK=9,Js.P2PFLV=10,e.default=Js,window.HYPlayer=Js,window.H5Player=Js}])},function(t,e,i){t.exports={default:i(116),__esModule:!0}},function(t,e,i){i(30),i(18),i(25),i(124),i(128),i(130),i(131),t.exports=i(0).Set},function(t,e,i){var n=i(53),r=i(54);t.exports=function(t){return function(e,i){var o,a,s=String(r(e)),u=n(i),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(33),r=i(32),o=i(35),a={};i(12)(a,i(5)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(a,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var n=i(9),r=i(7),o=i(24);t.exports=i(8)?Object.defineProperties:function(t,e){r(t);for(var i,a=o(e),s=a.length,u=0;s>u;)n.f(t,i=a[u++],e[i]);return t}},function(t,e,i){var n=i(15),r=i(40),o=i(121);t.exports=function(t){return function(e,i,a){var s,u=n(e),c=r(u.length),l=o(a,c);if(t&&i!=i){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===i)return t||l||0;return!t&&-1}}},function(t,e,i){var n=i(53),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){"use strict";var n=i(123),r=i(80),o=i(23),a=i(15);t.exports=i(55)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e,i){"use strict";var n=i(81),r=i(67);t.exports=i(85)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){var n=i(11),r=i(58),o=i(20),a=i(40),s=i(126);t.exports=function(t,e){var i=1==t,u=2==t,c=3==t,l=4==t,h=6==t,d=5==t||h,f=e||s;return function(e,s,p){for(var m,y,v=o(e),g=r(v),_=n(s,p,3),S=a(g.length),w=0,b=i?f(e,S):u?f(e,0):void 0;S>w;w++)if((d||w in g)&&(y=_(m=g[w],w,v),t))if(i)b[w]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:b.push(m)}else if(l)return!1;return h?-1:c||l?l:b}}},function(t,e,i){var n=i(127);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(6),r=i(86),o=i(5)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(2);n(n.P+n.R,"Set",{toJSON:i(87)("Set")})},function(t,e,i){var n=i(36);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){i(88)("Set")},function(t,e,i){i(89)("Set")},function(t,e,i){t.exports={default:i(133),__esModule:!0}},function(t,e,i){i(134),t.exports=i(0).Math.log2},function(t,e,i){var n=i(2);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){t.exports={default:i(136),__esModule:!0}},function(t,e,i){i(137),t.exports=i(0).Reflect.ownKeys},function(t,e,i){var n=i(2);n(n.S,"Reflect",{ownKeys:i(138)})},function(t,e,i){var n=i(68),r=i(43),o=i(7),a=i(4).Reflect;t.exports=a&&a.ownKeys||function(t){var e=n.f(o(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){t.exports={default:i(140),__esModule:!0}},function(t,e,i){i(141),t.exports=i(0).Object.values},function(t,e,i){var n=i(2),r=i(142)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){var n=i(8),r=i(24),o=i(15),a=i(37).f;t.exports=function(t){return function(e){for(var i,s=o(e),u=r(s),c=u.length,l=0,h=[];c>l;)i=u[l++],n&&!a.call(s,i)||h.push(t?[i,s[i]]:s[i]);return h}}},function(t,e,i){i(30),i(18),i(25),i(144),i(147),i(148),t.exports=i(0).Promise},function(t,e,i){"use strict";var n,r,o,a,s=i(31),u=i(4),c=i(11),l=i(42),h=i(2),d=i(6),f=i(19),p=i(64),m=i(36),y=i(91),v=i(92).set,g=i(145)(),_=i(69),S=i(94),w=i(146),b=i(95),I=u.TypeError,T=u.process,P=T&&T.versions,E=P&&P.v8||"",k=u.Promise,R="process"==l(T),C=function(){},O=r=_.f,A=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[i(5)("species")]=function(t){t(C,C)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var i=t._c;g((function(){for(var n=t._v,r=1==t._s,o=0,a=function(e){var i,o,a,s=r?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(r||(2==t._h&&D(t),t._h=1),!0===s?i=n:(l&&l.enter(),i=s(n),l&&(l.exit(),a=!0)),i===e.promise?c(I("Promise-chain cycle")):(o=L(i))?o.call(i,u,c):u(i)):c(n)}catch(t){l&&!a&&l.exit(),c(t)}};i.length>o;)a(i[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)}))}},M=function(t){v.call(u,(function(){var e,i,n,r=t._v,o=U(t);if(o&&(e=S((function(){R?T.emit("unhandledRejection",r,t):(i=u.onunhandledrejection)?i({promise:t,reason:r}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",r)})),t._h=R||U(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},U=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){v.call(u,(function(){var e;R?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},B=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},F=function t(e){var i,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw I("Promise can't be resolved itself");(i=L(e))?g((function(){var r={_w:n,_d:!1};try{i.call(e,c(t,r,1),c(B,r,1))}catch(e){B.call(r,e)}})):(n._v=e,n._s=1,N(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};A||(k=function(t){p(this,k,"Promise","_h"),f(t),n.call(this);try{t(c(F,this,1),c(B,this,1))}catch(t){B.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(63)(k.prototype,{then:function(t,e){var i=O(y(this,k));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=R?T.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&N(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=c(F,t,1),this.reject=c(B,t,1)},_.f=O=function(t){return t===k||t===a?new o(t):r(t)}),h(h.G+h.W+h.F*!A,{Promise:k}),i(35)(k,"Promise"),i(84)("Promise"),a=i(0).Promise,h(h.S+h.F*!A,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!A),"Promise",{resolve:function(t){return b(s&&this===a?k:this,t)}}),h(h.S+h.F*!(A&&i(96)((function(t){k.all(t).catch(C)}))),"Promise",{all:function(t){var e=this,i=O(e),n=i.resolve,r=i.reject,o=S((function(){var i=[],o=0,a=1;m(t,!1,(function(t){var s=o++,u=!1;i.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,i[s]=t,--a||n(i))}),r)})),--a||n(i)}));return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=O(e),n=i.reject,r=S((function(){m(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}})},function(t,e,i){var n=i(4),r=i(92).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==i(34)(a);t.exports=function(){var t,e,i,c=function(){var n,r;for(u&&(n=a.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(u)i=function(){a.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);i=function(){l.then(c)}}else i=function(){r.call(n,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e,i){var n=i(4).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){"use strict";var n=i(2),r=i(0),o=i(4),a=i(91),s=i(95);n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then((function(){return i}))}:t,i?function(i){return s(e,t()).then((function(){throw i}))}:t)}})},function(t,e,i){"use strict";var n=i(2),r=i(69),o=i(94);n(n.S,"Promise",{try:function(t){var e=r.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){i(150),t.exports=9007199254740991},function(t,e,i){var n=i(2);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){i(152);var n=i(0).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){var n=i(15),r=i(44).f;i(45)("getOwnPropertyDescriptor",(function(){return function(t,e){return r(n(t),e)}}))},function(t,e,i){t.exports={default:i(154),__esModule:!0}},function(t,e,i){i(155),t.exports=i(0).Reflect.get},function(t,e,i){var n=i(44),r=i(62),o=i(14),a=i(2),s=i(6),u=i(7);a(a.S,"Reflect",{get:function t(e,i){var a,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[i]:(a=n.f(e,i))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=r(e))?t(c,i,l):void 0}})},function(t,e,i){t.exports={default:i(157),__esModule:!0}},function(t,e,i){i(18),i(158),t.exports=i(0).Array.from},function(t,e,i){"use strict";var n=i(11),r=i(2),o=i(20),a=i(82),s=i(83),u=i(40),c=i(159),l=i(65);r(r.S+r.F*!i(96)((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,r,h,d=o(t),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,y=void 0!==m,v=0,g=l(d);if(y&&(m=n(m,p>2?arguments[2]:void 0,2)),null==g||f==Array&&s(g))for(i=new f(e=u(d.length));e>v;v++)c(i,v,y?m(d[v],v):d[v]);else for(h=g.call(d),i=new f;!(r=h.next()).done;v++)c(i,v,y?a(h,m,[r.value,v],!0):r.value);return i.length=v,i}})},function(t,e,i){"use strict";var n=i(9),r=i(32);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){i(25),i(18),t.exports=i(161)},function(t,e,i){var n=i(42),r=i(5)("iterator"),o=i(23);t.exports=i(0).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(n(e))}},function(t,e,i){var n=i(0),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,i){i(30),i(18),i(25),i(164),i(165),i(166),i(167),t.exports=i(0).Map},function(t,e,i){"use strict";var n=i(81),r=i(67);t.exports=i(85)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){var n=i(2);n(n.P+n.R,"Map",{toJSON:i(87)("Map")})},function(t,e,i){i(88)("Map")},function(t,e,i){i(89)("Map")},function(t,e,i){t.exports={default:i(169),__esModule:!0}},function(t,e,i){i(170),t.exports=i(0).Object.keys},function(t,e,i){var n=i(20),r=i(24);i(45)("keys",(function(){return function(t){return r(n(t))}}))},function(t,e,i){t.exports={default:i(172),__esModule:!0}},function(t,e,i){i(173),t.exports=i(0).Number.isNaN},function(t,e,i){var n=i(2);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){t.exports={default:i(175),__esModule:!0}},function(t,e,i){i(176);var n=i(0).Object;t.exports=function(t){return n.getOwnPropertyNames(t)}},function(t,e,i){i(45)("getOwnPropertyNames",(function(){return i(99).f}))},function(t,e,i){t.exports={default:i(178),__esModule:!0}},function(t,e,i){i(100),t.exports=i(0).Object.getOwnPropertySymbols},function(t,e,i){var n=i(24),r=i(43),o=i(37);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var a,s=i(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,i){i(25),i(18),t.exports=i(181)},function(t,e,i){var n=i(7),r=i(65);t.exports=i(0).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){i(183),t.exports=i(0).Object.getPrototypeOf},function(t,e,i){var n=i(20),r=i(62);i(45)("getPrototypeOf",(function(){return function(t){return r(n(t))}}))},function(t,e,i){i(185),t.exports=i(0).Object.setPrototypeOf},function(t,e,i){var n=i(2);n(n.S,"Object",{setPrototypeOf:i(186).set})},function(t,e,i){var n=i(6),r=i(7),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(11)(Function.call,i(44).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){i(18),i(25),t.exports=i(46).f("iterator")},function(t,e,i){t.exports={default:i(189),__esModule:!0}},function(t,e,i){i(190),t.exports=i(0).Reflect.construct},function(t,e,i){var n=i(2),r=i(33),o=i(19),a=i(7),s=i(6),u=i(13),c=i(191),l=(i(4).Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),d=!u((function(){l((function(){}))}));n(n.S+n.F*(h||d),"Reflect",{construct:function(t,e){o(t),a(e);var i=arguments.length<3?t:o(arguments[2]);if(d&&!h)return l(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=i.prototype,f=r(s(u)?u:Object.prototype),p=Function.apply.call(t,f,e);return s(p)?p:f}})},function(t,e,i){"use strict";var n=i(19),r=i(6),o=i(93),a=[].slice,s={},u=function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=a.call(arguments,1),s=function n(){var r=i.concat(a.call(arguments));return this instanceof n?u(e,r.length,r):o(e,r,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,i){i(193),t.exports=i(0).Object.assign},function(t,e,i){var n=i(2);n(n.S+n.F,"Object",{assign:i(194)})},function(t,e,i){"use strict";var n=i(8),r=i(24),o=i(43),a=i(37),s=i(20),u=i(58),c=Object.assign;t.exports=!c||i(13)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n}))?function(t,e){for(var i=s(t),c=arguments.length,l=1,h=o.f,d=a.f;c>l;)for(var f,p=u(arguments[l++]),m=h?r(p).concat(h(p)):r(p),y=m.length,v=0;y>v;)f=m[v++],n&&!d.call(p,f)||(i[f]=p[f]);return i}:c},function(t,e,i){i(196);var n=i(0).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(2);n(n.S,"Object",{create:i(33)})},function(t,e,i){i(100),i(30),i(198),i(199),t.exports=i(0).Symbol},function(t,e,i){i(72)("asyncIterator")},function(t,e,i){i(72)("observable")},function(t,e,i){t.exports={default:i(201),__esModule:!0}},function(t,e,i){i(30),t.exports=i(46).f("toStringTag")},function(t,e,i){i(203);var n=i(0).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(2);n(n.S+n.F*!i(8),"Object",{defineProperty:i(9).f})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(205)),r=u(i(38)),o=u(i(17)),a=u(i(21)),s=u(i(208));function u(t){return t&&t.__esModule?t:{default:t}}o.default.PlayerClass=s.default;var c={Events:n.default,PlayerEvents:r.default,setAppId:o.default.setAppId.bind(o.default),setSignalSdk:a.default.init.bind(a.default),loginMedia:o.default.loginMedia.bind(o.default),setProperties:o.default.setProperties.bind(o.default),createPlayer:o.default.createPlayer.bind(o.default),isSupported:o.default.isSupported.bind(o.default)};e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(1))&&n.__esModule?n:{default:n},o=function t(){(0,r.default)(this,t)};o.WEBSOCKET_CONNECTED="WEBSOCKET_CONNECTED",o.WEBSOCKET_CLOSED="WEBSOCKET_CLOSED",o.WEBSOCKET_ERROR="WEBSOCKET_ERROR",o.SERVER_OPEN="SERVER_OPEN",o.SERVER_CLOSE="SERVER_CLOSE",o.SERVER_ERROR="SERVER_ERROR",o.SERVER_PROTO="SERVER_PROTO",o.SERVER_INITED="SERVER_INITED",o.SERVER_LOGIN="SERVER_LOGIN",o.SERVER_CFG_INITED="SERVER_CFG_INITED",o.UPDATE_STREAM_INFO="UPDATE_STREAM_INFO",o.UPDATE_STREAM_INFO_FAIL="UPDATE_STREAM_INFO_FAIL",o.ROOM_LIVE_END="ROOM_LIVE_END",o.MEDIA_STOPSTREAM_NOTICE="MEDIA_STOPSTREAM_NOTICE",o.MEDIA_STREAMCHANGED_NOTICE="MEDIA_STREAMCHANGED_NOTICE",e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(39))&&n.__esModule?n:{default:n},o={};o.UriMapping={1e5:r.default.StreamChangeNotice,100102:r.default.MediaStopStreamNotice,100200:r.default.MediaChangeUpStreamNotic,100300:r.default.RoomStreamChangeNotic},o.WupMapping={loginVerify:r.default.LoginVerifyRsp,refreshCookie:r.default.RefreshCookieRsp,getMediaConfig:r.default.GetMediaConfigRsp,quitGroup:r.default.QuitMediaGroupRsp,getAntiCodeForStream:r.default.GetAntiCodeForStreamRsp,getStreamInfoByRoom:r.default.GetStreamInfoByRoomRsp,getStreamInfoByRoomFake:r.default.GetStreamInfoByRoomFakeRsp},o.NoLog={loginVerify:1,refreshCookie:1,getMediaConfig:1,getInfoFromVGM:1,getStreamInfoByRoomFake:1},e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={WEBSOCKET_CONNECTED:"WEBSOCKET_CONNECTED",WEBSOCKET_DOLAUNCH:"WEBSOCKET_DOLAUNCH",VERIFYCOOKIE_PASS:"VERIFYCOOKIE_PASS",WS_REGISTER_GROUP_RSP:"WS_REGISTER_GROUP_RSP",WS_UNREGISTER_GROUP_RSP:"WS_UNREGISTER_GROUP_RSP",WS_CONNET_STATE:"WS_CONNET_STATE"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=E(i(26)),r=E(i(16)),o=E(i(1)),a=E(i(3)),s=E(i(27)),u=E(i(209)),c=E(i(28)),l=E(i(210)),h=(E(i(108)),E(i(107))),d=E(i(10)),f=E(i(38)),p=E(i(220)),m=E(i(74)),y=E(i(17)),v=E(i(221)),g=E(i(112)),_=E(i(222)),S=E(i(52)),w=E(i(75)),b=E(i(29)),I=E(i(110)),T=E(i(22)),P=E(i(225));function E(t){return t&&t.__esModule?t:{default:t}}var k=function(t){function e(t){return(0,o.default)(this,e),(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,c.default)(e,t),(0,a.default)(e,[{key:"initIns",value:function(){(0,u.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"initIns",this).call(this),this.antiCode=new _.default}},{key:"backToBusi",value:function(t){d.default.log("WebPlayer("+this.id+").backToSusi type="+t);var e=[this.stat.createAct(w.default.STREAM_ERROR,{value:[t]})];S.default.onNimoDataMetric2(e,this.startPlayInfo.pid,0,"",0,this.startPlayInfo.place,this.startPlayInfo.roomId,this.startPlayInfo.gameid,"",this.stream_from),this.trigger(f.default.MEDIA_STREAM_INFO_ERROR)}},{key:"reportBusiStream",value:function(t,e){var i=[this.stat.createAct(w.default.BUSI_STREAM,{value:[t?0:1,e?1:0]})];d.default.log("WebPlayer("+this.id+").reportBusiStream hasStream",t,i),S.default.onNimoDataMetric2(i,this.startPlayInfo.pid,0,"",0,this.startPlayInfo.place,this.startPlayInfo.roomId,this.startPlayInfo.gameid,"",this.stream_from)}},{key:"_hasP2p",value:function(){var t=this._getStream(this.streamList);if(t){var e=this._getLineInfo(t),i=I.default.getMediaStreamFormat(e.mMediaStreamFormatInfo.value,null,!0);return i&&i.sFormatName===m.default.f_p2p}return!1}},{key:"reportDifStream",value:function(t){d.default.log("WebPlayer("+this.id+").reportDifStream isDif",t);var e=[this.stat.createAct(w.default.DIF_STREAM,{value:[t?1:0]})];S.default.onNimoDataMetric2(e,this.startPlayInfo.pid,0,"",0,this.startPlayInfo.place,this.startPlayInfo.roomId,this.startPlayInfo.gameid,"",this.stream_from)}},{key:"_checkP2PConfig",value:function(t){try{t=JSON.parse(t),this.nimoConfig=t,this.currentRoomStream&&this.currentRoomStream.stream&&(P.default.isCanUse(t,this.currentRoomStream.roomId,this.currentRoomStream.line,this.currentRoomStream.iBitRate)||this.currentRoomStream.mediaFormat!=m.default.f_p2p||this._playStreamInfo(this.currentRoomStream.stream,this.currentRoomStream.iBitRate))}catch(t){d.default.log("WebPlayer.checkConfig err")}}},{key:"switchLevel",value:function(t){d.default.log("WebPlayer("+this.id+").switchLevel",t?JSON.parse(t):""),this.room.needSeek=!!t.needSeek,"hls"===t.type&&this.player&&this.player.hyPlayer&&this.player.hyPlayer.player&&this.player.hyPlayer.player.isSwitchSeamLessLine||"flv"===t.type&&h.default.isOpen(this.room.roomId,h.default.CTRL_KEY.SWITCH_PLAY)?this.player.switchLevel(t):this.startPlay(t,this.vjsOptions)}},{key:"needPlay",value:function(t){var e=this;if(t&&t.length>0){var i=t[0];if(i.streamName!==this.currentRoomStream.sStreamName)return d.default.log("WebPlayer("+this.id+").needPlay dif streamname",i.streamName,this.currentRoomStream.sStreamName),!0;var n=!1;if(i.vMediaStreamInfo.forEach((function(t){t.iLineIndex===e.currentRoomStream.line&&(n=!0)})),!n)return d.default.log("WebPlayer("+this.id+").needPlay no line"),!0;var r=!1,o="",a="";if(i.vStreamGearInfo.forEach((function(t){t.iBitRate===e.currentRoomStream.iBitRate&&Number(t.tResolution.iWidth)===Number(e.currentRoomStream.iWidth)&&Number(t.tResolution.iHeight)===Number(e.currentRoomStream.iHeight)&&(r=!0,o=t.sDisplayName,a=t.sBusiGearIndex)})),!r)return d.default.log("WebPlayer("+this.id+").needPlay no gear"),!0;this.currentRoomStream.sDisplayName=o,this.currentRoomStream.sBusiGearIndex=a}return!1}},{key:"_getStream",value:function(t){return t&&t.length>0?t[0]:null}},{key:"playStreamInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!0,r=this._getStream(t);r&&(n=this._playStreamInfo(r,e,i)),n&&(d.default.log("WebPlayer("+this.id+").playStreamInfo ROOM_NO_STREAM"),this.trigger(f.default.ROOM_NO_STREAM))}},{key:"_playStreamInfo",value:function(t,e,i){var n=this._getLineInfo(t),r=this._getGearInfo(t,e),o=t.playFormat,a=!0;if(n&&r&&o){if(this.nimoConfig){var s=P.default.isCanUse(this.nimoConfig,this.startPlayInfo.roomId,n.iLineIndex,r.iBitRate);if((o.sFormatName===m.default.f_p2p&&!s||o.sFormatName===m.default.f_flv&&s)&&(I.default.reSelectFormat(t,s),!(o=t.playFormat)))return}if(this._stop(),this.createVideo()){var u=r.tResolution||{},c=u.iWidth>0&&u.iHeight>0&&0===r.iBitRate?this.broadcastBitrate:r.iBitRate,l=r.iBitRate,h=this.getParams(t,n,0);""!==r.sAdditionalParam&&h.push(r.sAdditionalParam),""!==o.sAdditionalParam&&h.push(o.sAdditionalParam);var f=t.sAntiCode+"&"+h.join("&");f=this._dealSphd(f);var p={sdkver:2206131428,video:this.playerVideo,playFormat:o.sFormatName,bLive:this.startPlayInfo.bLive,pid:this.startPlayInfo.pid,myid:this.startPlayInfo.myid,place:this.startPlayInfo.place,anonymousuid:this.startPlayInfo.anonymousuid,appid:y.default.appId,roomId:this.startPlayInfo.roomId,lineType:n.iLineIndex,liveType:this.startPlayInfo.bLive?1:3,startType:this.start_type,stream_from:this.stream_from,sGuid:y.default.deviceId,bitrate:c,curBitrate:c,iBitRate:l,sFlvUrl:n.sFlvUrl,sFlvSuffix:n.sFlvSuffix,sFlvAntiCode:f,sHlsUrl:n.sHlsUrl,sHlsSuffix:n.sHlsSuffix,sHlsAntiCode:f,sP2pUrl:n.sP2pUrl,sP2pSuffix:n.sP2pSuffix,enableLowLatency:this.startPlayInfo.enableLowLatency,startTimeStamp:this.startPlayInfo.startTimeStamp,uistartTs:this.uistartTs,isPureAudio:this.startPlayInfo.isPureAudio||!1,cdnName:n.sCdnName,h5Root:this.startPlayInfo.h5Root,sStreamName:n.sStreamName,sAdditionalParam:h.join("&"),mediaType:m.default[this.startPlayInfo.busiType||o.sFormatName]};switch(o.sFormatName){case m.default.f_p2p:p.sUrl=n.sP2pUrl,p.isP2PSupport=1;break;case m.default.f_flv:p.sUrl=n.sFlvUrl;break;case m.default.f_hls:p.sUrl=n.sHlsUrl;break;default:p.sUrl=""}this.currentRoomStream.mediaFormat=o.sFormatName,this.currentRoomStream.stream=t,this.currentRoomStream.roomId=this.startPlayInfo.roomId,this.setCurrentRoomStreamGearInfo(t,l,h),this.saveCurrentStream(p.sUrl,n.sStreamName,l,n.iLineIndex),p.originalBitrate=this.currentRoomStream.isSrc?0:1,T.default.once(this.onBlackScreen,this,1e4),y.default.isSupported()?(this.player=new v.default(this,this.config),this.player.roomId=this.startPlayInfo.roomId||0,this.player.gameid=this.startPlayInfo.gameid,this.player.startPlay(p,i),a=!1):d.default.warn("WebPlayer("+this.id+")._playStreamInfo not supported!",null!==window.HYPlayer),this.mediaStreamUpdate(t.vMediaStreamInfo,t.vStreamGearInfo,this.currentRoomStream)}else d.default.warn("WebPlayer("+this.id+").playStreamInfo create video error")}return a}},{key:"_getLineInfo",value:function(t){for(var e=0;e<t.vMediaStreamInfo.length;e++){var i=t.vMediaStreamInfo[e];if(t.chooseLine==i.iLineIndex)return i}return null}},{key:"_getGearInfo",value:function(t,e){for(var i=-1===e?t.defaultBitRate:e,n=0;n<t.vStreamGearInfo.length;n++){var r=t.vStreamGearInfo[n];if(i==r.iBitRate)return r}return null}},{key:"_dealSphd",value:function(t){return this.sphd>0&&-1!=t.indexOf("sphd=1")&&(t=t.replace(/sphd=1|sphd=0|&sphd=1|&sphd=0/g,""),1==this.sphd&&(t+="&sphd=1")),t}},{key:"realPlayStream",value:function(t){var e=t.isTest,i=t.mediaFormat,n=t.url,r=t.params,o=t.stream,a=t.isSwitch,s=t.bitrate;if(e&&"flv"===i?0===s&&(n+="?needwm=0"):r.length>0&&(n+="?"+r.join("&")),n=this._dealSphd(n),d.default.log("WebPlayer.realPlayStream",this.bUserStoped,n),!this.bUserStoped){var u=new p.default;u.id=this.startPlayInfo.id,u.url=n,u.type=i,u.bLive=!0,u.pid=this.startPlayInfo.pid,u.myid=this.startPlayInfo.myid,u.needSeek=this.room.needSeek,u.videoquality=Number(this.currentRoomStream.sBusiGearIndex),u.enableLowLatency=this.startPlayInfo.enableLowLatency,u.vjsOptions=this.vjsOptions,u.line=o.chooseLine,u.clickroomts=this.clickroomts,u.curBitRate=s,u.isPureAudio=this.startPlayInfo.isPureAudio,u.stream_from=this.stream_from,a&&"hls"===i&&this.player&&this.player.hyPlayer&&this.player.hyPlayer.player&&this.player.hyPlayer.player.isSwitchSeamLessLine||a&&"flv"===i&&h.default.isOpen(this.room.roomId,h.default.CTRL_KEY.SWITCH_PLAY)?this.player.switchLevel(u):this.startPlayUrl(n)}d.default.log("WebPlayer.realPlayStream UPDATE_STREAM_INFO",this.bUserStoped),this.mediaStreamUpdate(o.vMediaStreamInfo,o.vStreamGearInfo,this.currentRoomStream)}},{key:"realStartPlay",value:function(t){var e=m.default[this.startPlayInfo.type]||m.default.flv;e===m.default.mp4?this.playMp4(t):this.playSdk(t,e)}},{key:"playSdk",value:function(t,e){y.default.isSupported()?(this.player=new v.default(this,this.config),this.player.roomId=this.startPlayInfo.roomId||0,this.player.gameid=this.startPlayInfo.gameid,this.player.startPlay({video:this.playerVideo,pid:this.startPlayInfo.pid,myid:this.startPlayInfo.myid,bLive:this.startPlayInfo.bLive,lineType:this.currentRoomStream.line,place:this.startPlayInfo.place,url:t,bitrate:this.currentRoomStream.iBitRate,isPureAudio:this.startPlayInfo.isPureAudio||!1,needSeek:this.room.needSeek,oexp:this.startPlayInfo.oexp,originalBitrate:this.currentRoomStream.isSrc?0:1,enableLowLatency:this.startPlayInfo.enableLowLatency,mediaType:e,startTimeStamp:this.startPlayInfo.startTimeStamp,uistartTs:this.uistartTs,startType:this.start_type,stream_from:this.stream_from,seekTime:this.startPlayInfo.seekTime||0})):d.default.warn("WebPlayer("+this.id+").playSdk not supported!",null!==window.HYPlayer)}},{key:"autoFeedback",value:function(t){var e=(t||"")+"\n\n"+this.getLog();1===b.default.web&&this.fbCtrl.feedback(g.default.BLACK_SCREEN,e),this.player&&this.player.hyPlayer&&(d.default.log("WebPlayer.autoFeedback reportNoPictureProps"),this.player.hyPlayer.reportNoPictureProps())}},{key:"getLog",value:function(){var t;return t=this.player&&this.player.getLog?d.default.getLog().concat(this.player.getLog()):d.default.getLog(),(0,n.default)(t)}},{key:"onStopVideo",value:function(){this.trigger(f.default.VIDEO_STOP,{})}},{key:"onNoDataReceived",value:function(){this.trigger(f.default.NO_DATA_RECEIVED,{})}},{key:"onLinkTimeout",value:function(){this.trigger(f.default.LINK_TIMEOUT,{})}},{key:"onVideoFrameLoaded",value:function(){this.trigger(f.default.VIDEO_FRAME_LOADED,{})}},{key:"onLoadDataTimeout",value:function(){this.trigger(f.default.LOAD_DATA_TIMEOUT,{})}},{key:"onLinkUnAvailable",value:function(){this.trigger(f.default.LINK_UNAVAILABLE,{})}},{key:"onPlayDownLinkInfo",value:function(t){this.trigger(f.default.PLAY_DOWNLINK_INFO,t)}},{key:"onClose",value:function(){this.trigger(f.default.VIDEO_CLOSE)}},{key:"onPlayFrameBuffer",value:function(t){this.trigger(f.default.VIDEO_FRAME_JITTERBUFFER,{frameStorage:t.frameStorage,jitterBuffer:t.jitterBuffer,playdelay:t.playdelay})}},{key:"onMetaData",value:function(t){this.trigger(f.default.METADATA,t)}},{key:"onSwitchDone",value:function(){this.trigger(f.default.SWITCH_DONE)}},{key:"onUpdateIntersity",value:function(t){this.trigger(f.default.UPDATE_INTERSITY,t)}},{key:"onPlayStatus",value:function(){}},{key:"onP2PReport",value:function(t,e){e&&-1!==e.toString().indexOf("bad")&&this.fbCtrl.feedback(e,this.getLog())}}]),e}(l.default);e.default=k},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(16)),r=o(i(97));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,o){null===e&&(e=Function.prototype);var a=(0,r.default)(e,i);if(void 0===a){var s=(0,n.default)(e);return null===s?void 0:t(s,i,o)}if("value"in a)return a.value;var u=a.get;return void 0!==u?u.call(o):void 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=b(i(26)),r=b(i(16)),o=b(i(1)),a=b(i(3)),s=b(i(27)),u=b(i(28)),c=b(i(109)),l=b(i(38)),h=b(i(10)),d=b(i(211)),f=b(i(110)),p=b(i(213)),m=b(i(214)),y=b(i(50)),v=b(i(52)),g=b(i(75)),_=b(i(22)),S=b(i(112)),w=b(i(17));function b(t){return t&&t.__esModule?t:{default:t}}var I=0,T=function(t){function e(t){(0,o.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return i.id=I++,h.default.log("BasePlayer.constructor("+i.id+")",2206131428,navigator&&navigator.userAgent),i.params=t,i.abTestConfig=null,i.fbCtrl=new S.default,i.stat=new c.default,i.room=new d.default(i),i.liveInfo=new f.default,i.Events=l.default,i.initIns(),i.config=null,i.nimoConfig=null,i.player=null,i.playerVideo=null,i.startPlayInfo=null,i.vjsOptions=null,i.streamList=null,i.broadcastBitrate=0,i.currentRoomStream={},i.stream_from=0,i.start_type=0,i.bUserStoped=!1,i.uistartTs=performance?performance.timing.fetchStart:0,i.clickroomts=0,i.startTimeStamp=0,i.qualityBitrate={0:0,6:6e3,2:2500,3:1e3,4:500,5:250},i.emitVideoPlayerEventBind=i.emitVideoPlayerEvent.bind(i),i.VideoEvents=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],i.streamGearInfo=[],i.hasAutoBitrate=!1,i.isAutoBitrate=!1,i.setFetchTime(),i.room._checkConfig(),i}return(0,u.default)(e,t),(0,a.default)(e,[{key:"initIns",value:function(){}},{key:"reset",value:function(){this.player&&this.player.dispose(),this.player=null}},{key:"autoFeedback",value:function(t){}},{key:"clearVideoChildnote",value:function(){if(h.default.log("BasePlayer("+this.id+").clearVideoChildnote has playerVideo",null!==this.playerVideo),this.playerVideo&&(this.delH5EventListeners(this.playerVideo),this.playerVideo=null),this.startPlayInfo&&this.startPlayInfo.id){var t=document.getElementById(this.startPlayInfo.id);if(h.default.log("BasePlayer("+this.id+").clearVideoChildnote has playerContainer",null!==t,t&&t.childNodes.length),t)for(var e=t.childNodes,i=0;i<e.length;i++)t.removeChild(e[i])}}},{key:"createVideo",value:function(){this.clearVideoChildnote();var t=document.getElementById(this.startPlayInfo.id);return!!t&&(h.default.log("BasePlayer("+this.id+").createVideo createVideo",t.childNodes.length),this.clickroomts=this.startPlayInfo.clickroomts>0?(new Date).getTime()-(performance.now()-this.startPlayInfo.clickroomts):0,this.uistartTs=this.clickroomts,this.playerVideo=document.createElement("video"),t.appendChild(this.playerVideo),this.addH5EventListeners(this.playerVideo),p.default.setVideoAttributeOptions(this.playerVideo,this.vjsOptions||{}),this.checkAutoPlay(),!0)}},{key:"checkAutoPlay",value:function(){var t=this;if(this.playerVideo&&this.vjsOptions&&this.vjsOptions.autoplay){h.default.log("BasePlayer("+this.id+").checkAutoPlay");var e=this.playerVideo.play();void 0!==e&&e.then((function(e){h.default.log("BasePlayer("+t.id+").checkAutoPlay auto play")})).catch((function(e){h.default.log("BasePlayer("+t.id+").checkAutoPlay play err "+e),t.trigger(l.default.AUTO_PLAY_ERR)}))}}},{key:"addH5EventListeners",value:function(t){for(var e=0;e<this.VideoEvents.length;e++)t.addEventListener(this.VideoEvents[e],this.emitVideoPlayerEventBind)}},{key:"delH5EventListeners",value:function(t){for(var e=0;e<this.VideoEvents.length;e++)t.removeEventListener(this.VideoEvents[e],this.emitVideoPlayerEventBind)}},{key:"emitVideoPlayerEvent",value:function(t){t&&t.type?("timeupdate"!=t.type&&"progress"!=t.type&&"durationchange"!=t.type&&h.default.log("BasePlayer("+this.id+").emitVideoPlayerEvent type="+t.type),this.trigger(t.type,t)):h.default.log("BasePlayer("+this.id+").emitVideoPlayerEvent error")}},{key:"setFetchTime",value:function(){localStorage&&performance&&(localStorage.uifetch&&localStorage.uifetch>=performance.timing.fetchStart?this.uistartTs=0:this.setLocalVideoStarted(!1),localStorage.uifetch=performance.timing.fetchStart)}},{key:"setLocalVideoStarted",value:function(t){localStorage&&(localStorage.videoStarted=t?1:0)}},{key:"setHYPlayerConfig",value:function(t){this.player&&this.player.setPlayerConfig(t)}},{key:"updateInfo",value:function(t){this.startPlayInfo.gameid=t.gameid||0,this.room.gameid=t.gameid||0,this.room.pid=t.pid||0,this.room.myid=t.myid||0}},{key:"setConfig",value:function(t){h.default.log("BasePlayer("+this.id+").setConfig config=",t),this.config=t,this.fbCtrl.setConfig(t.nimoConfig),this.config&&this.player&&this.setHYPlayerConfig(this.config),t.nimoConfig&&this._checkP2PConfig(t.nimoConfig)}},{key:"_checkP2PConfig",value:function(t){}},{key:"reportBusiStream",value:function(t,e){}},{key:"_hasP2p",value:function(){return!1}},{key:"reportNoStream",value:function(t){h.default.log("BasePlayer("+this.id+").reportNoStream from="+t);var e=[this.stat.createAct(g.default.STREAM_ERROR,{value:[t]})];v.default.onNimoDataMetric2(e,this.startPlayInfo.pid,0,"",0,this.startPlayInfo.place,this.startPlayInfo.roomId,this.startPlayInfo.gameid,this.startPlayInfo.oexp,this.stream_from)}},{key:"reportSdkStream",value:function(t,e){h.default.log("WebPlayer("+this.id+").reportSdkStream",t,e);var i=1===t&&this._hasP2p(),n=[this.stat.createAct(g.default.ROOM_SDK_STREAM,{value:[t,i?1:0],str:[e]})];h.default.log("WebPlayer("+this.id+").reportSdkStream.DATA_METRIC2",n),v.default.onNimoDataMetric2(n,this.startPlayInfo.pid,0,"",0,this.startPlayInfo.place,this.startPlayInfo.roomId,this.startPlayInfo.gameid,"",this.stream_from)}},{key:"quitRoom",value:function(t){this.room.quit(t)}},{key:"fleshVideo",value:function(t){if(h.default.log("HyOpenPlayer.fleshVideo bUserStoped="+this.bUserStoped),this.bUserStoped=!1,t&&"playback"==t.type&&!t.bLive)return h.default.log("HyOpenPlayer.fleshVideo info.type="+t.type+", info.time="+t.time+", info.bLive="+t.bLive),t.time&&(this.startPlayInfo.seekTime=t.time),void this.startPlay(this.startPlayInfo,this.vjsOptions);this.room.roomId&&this.streamList&&this.streamList.length>0?this.playStreamInfo(this.streamList,this.currentRoomStream.hasOwnProperty("iBitRate")?this.currentRoomStream.iBitRate:-1):this.startPlayInfo&&this.startPlay(this.startPlayInfo,this.vjsOptions)}},{key:"switchLine",value:function(t){if(h.default.log("BasePlaer.switchLine",t),this.streamList&&this.streamList.length>0){var e=this.streamList[0];if(e.vMediaStreamInfo&&e.vMediaStreamInfo.length>0)for(var i=0;i<e.vMediaStreamInfo.length;i++)if(e.vMediaStreamInfo[i].iLineIndex===t)return e.chooseLine=t,this.currentRoomStream.isSwitchLine=!0,this.playStreamInfo(this.streamList,this.currentRoomStream?this.currentRoomStream.iBitRate:-1),this.currentRoomStream.isSwitchLine=!1,!0}return!1}},{key:"switchBitRate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"auto"!=t?this.isAutoBitrate=!1:(t=this.currentRoomStream.sDisplayName,e=this.currentRoomStream.iBitRate,this.isAutoBitrate=!0,this.currentRoomStream.sBusiGearIndex="auto"),h.default.log("BasePlaer.switchBitrate",t,e,i),this.room.needSeek=!!i,this.bUserStoped=!1;var n=-1;if(this.streamList.length>0&&this.streamList[0].vStreamGearInfo&&this.streamList[0].vStreamGearInfo.length>0){for(var r=0;r<this.streamList[0].vStreamGearInfo.length;r++)if(t==this.streamList[0].vStreamGearInfo[r].sDisplayName){n=this.streamList[0].vStreamGearInfo[r].iBitRate,this.streamList[0].vStreamGearInfo[r].sDisplayName;break}if(-1==n&&-1!=e){h.default.log("HyOpenPlayer.switchBitRate no videoquality:"+t);for(var o=0;o<this.streamList[0].vStreamGearInfo.length;o++)if(e==this.streamList[0].vStreamGearInfo[o].iBitRate){n=this.streamList[0].vStreamGearInfo[o].iBitRate,this.streamList[0].vStreamGearInfo[o].sDisplayName;break}}}return-1==n?(h.default.log("HyOpenPlayer.switchBitRate switchBitRateError no stream videoquality="+t+"  targetBitrate="+e),!1):(this.playStreamInfo(this.streamList,n,!0),!0)}},{key:"startPlay",value:function(t,e){var i;t&&(v.default.anonymousuid=t.anonymousuid||0,v.default.myid=t.myid||0,w.default.anonymousuid=t.anonymousuid||0),h.default.log("BasePlayer("+this.id+").startPlay",(0,n.default)(t),e?(0,n.default)(e):""),this.startPlayInfo=t,this.vjsOptions=e,this.fbCtrl.setRoomid(t.pid,t.roomId),this.sphd=0,t.sphd&&(this.sphd=t.sphd),this.liveInfo.setParams(t.pid,t.gearIndexList||[]),this.bUserStoped=!1,t.bLive&&Number(t.roomId)>0?("auto"==t.sBusiGearIndex&&(this.isAutoBitrate=!0),this.resetPlay(),this.start_type=2,this.playRoomInfo(t)):(this.start_type=1,this.startPlayVideo(t)),i=t.bLive?1:"playback"==t.type?2:3,this.stat.setComDim("live_type",i)}},{key:"onBlackScreen",value:function(){var t=!this.player||!this.player.playing,e=null;this.player&&this.player.getRecvInfo&&(e=this.player.getRecvInfo());var i=[t?1:0,this.room.hasStream?1:0];e&&(i=i.concat(e));var n=[this.stat.createAct(g.default.BLACK_SCREEN,{value:i,str:[this.room.busiState,this.room.httpState,this.room.signalState]})];h.default.log("BasePlayer("+this.id+").onBlackScreen "+t,n),v.default.onNimoDataMetric2(n,this.startPlayInfo.pid,this.currentRoomStream.iBitRate||0,"",this.currentRoomStream.line||0,this.startPlayInfo.place,this.startPlayInfo.roomId,this.startPlayInfo.gameid,this.startPlayInfo.oexp,this.stream_from)}},{key:"resetPlay",value:function(){h.default.log("BasePlayer("+this.id+").resetPlay"),this.currentRoomStream={},this.reset()}},{key:"playRoomInfo",value:function(t){localStorage._use_stream&&(t.useStream=1===Number(localStorage._use_stream)),this.room.update(t);var e=t.yspwlStreamPkg,i=t.useStream||!1;if(e){var n=this.liveInfo.setLiveRoomBinData(e);n?(this.room.onGetStreamByBusi(n),this.room.join(-1,!1),this.reportBusiStream(!0,this._hasP2p())):(this.reportBusiStream(!1,this._hasP2p()),this.room.join(-1,!0))}else this.reportBusiStream(!1,this._hasP2p()),i?this.room.join(-1,!0):this.backToBusi&&this.backToBusi(1)}},{key:"onUpdateStreamInfoFail",value:function(){h.default.warn("BasePlayer("+this.id+").onUpdateStreamInfoFail "+l.default.ROOM_NO_STREAM),this.trigger(l.default.ROOM_NO_STREAM)}},{key:"onUpdateStreamInfo",value:function(t){var e=this.liveInfo.setLivingInfo(t.liveStreams,-1,Number(this.startPlayInfo.sBusiGearIndex)||-1,this.currentRoomStream),i=e[0].vStreamGearInfo;this.streamGearInfo=i,this.streamList=e,this.broadcastBitrate=t.broadcastBitrate,this.needPlay(e)?(this.room.setStreamState(5,t.from),this.currentRoomStream.needPlay=!0,1===this.stream_from&&this.reportDifStream&&this.reportDifStream(1!==t.from),this.stream_from=t.from,this.playStreamInfo(e)):e.length>0&&(this.room.setStreamState(4,t.from),h.default.log("BasePlayer.onUpdateStreamInfo"),this.mediaStreamUpdate(e[0].vMediaStreamInfo,i,this.currentRoomStream))}},{key:"mediaStreamUpdate",value:function(t,e,i){h.default.log("BasePlayer.mediaStreamUpdate"),this.hasAutoBitrate&&this.isAutoBitrate&&(this.currentRoomStream.sBusiGearIndex="auto");var n={streamInfo:t,streamGearInfo:e,currentRoomStream:i};this.trigger(l.default.MEDIA_STREAM_UPDATE,n)}},{key:"needPlay",value:function(t){return!this.player}},{key:"playStream",value:function(t){}},{key:"playStreamInfo",value:function(t){}},{key:"saveCurrentStream",value:function(t,e,i,r){this.currentRoomStream.backsrc=this.getBacksrc(t),this.currentRoomStream.sStreamName=e,this.currentRoomStream.iBitRate=i,this.currentRoomStream.isSrc=this.currentRoomStream.iWidth>0&&this.currentRoomStream.iHeight>0&&0===i,this.currentRoomStream.line=r,h.default.log("BasePlayer("+this.id+").saveCurrentStream",(0,n.default)(this.currentRoomStream),this.currentRoomStream)}},{key:"getParams",value:function(t,e,i){var n=[];return t.sAdditionalParam&&n.push(t.sAdditionalParam),e.sAdditionalParam&&n.push(e.sAdditionalParam),i>0&&n.push("ratio="+i),n}},{key:"setCurrentRoomStreamGearInfo",value:function(t,e,i){var n=this.getStreamGearInfo(t,e);n?(this.currentRoomStream.sDisplayName=n.sDisplayName,this.currentRoomStream.sBusiGearIndex=n.sBusiGearIndex,this.currentRoomStream.iWidth=n.tResolution.iWidth,this.currentRoomStream.iHeight=n.tResolution.iHeight):(this.currentRoomStream.sDisplayName="",this.currentRoomStream.sBusiGearIndex="")}},{key:"getStreamGearInfo",value:function(t,e){for(var i=0;i<t.vStreamGearInfo.length;i++)if(Number(e)===Number(t.vStreamGearInfo[i].iBitRate))return t.vStreamGearInfo[i];return null}},{key:"getBacksrc",value:function(t){var e=(t=t.replace("//","")).split("/");return t.endsWith("/")&&e.pop(),e.length>1?e.pop():""}},{key:"validUrl",value:function(t){return t+(t.endsWith("/")?"":"/")}},{key:"startPlayVideo",value:function(t){this.currentRoomStream.iBitRate=this.qualityBitrate[t.videoquality]||0,this.currentRoomStream.line=t.line,this.startPlayUrl(t.url)}},{key:"startPlayUrl",value:function(t){t&&(this.stat.setComDim("stream_url",t),_.default.once(this.onBlackScreen,this,1e4),t=window&&window.location&&-1!==window.location.protocol.indexOf("https")?t.replace("http://","https://"):t.replace("https://","http://"),this._stop(),this.createVideo()&&this.realStartPlay(t))}},{key:"realStartPlay",value:function(t){}},{key:"playMp4",value:function(t){this.stat.setComDim("stream_url",t),this.player=new m.default(this,this.playerVideo),this.player.roomId=this.startPlayInfo.roomId,this.player.gameid=this.startPlayInfo.gameid,this.player.startPlay({url:t,uistartTs:this.uistartTs,startTimeStamp:this.startPlayInfo.startTimeStamp,pid:this.startPlayInfo.pid,oexp:this.startPlayInfo.oexp,bitrate:this.currentRoomStream.iBitRate,lineType:this.currentRoomStream.line,stream_from:this.stream_from,place:this.startPlayInfo.place})}},{key:"onPlayVideo",value:function(t){h.default.log("BasePlayer.onPlayVideo",(0,n.default)(t)),this.startPlayInfo.startTimeStamp=0,this.setLocalVideoStarted(!0),this.trigger(l.default.VIDEO_PLAY,{video:t.video,loadTime:t&&t.loadTime?t.loadTime:0,connectTime:t&&t.connectTime?t.connectTime:0,recvDataTime:t&&t.recvDataTime?t.recvDataTime:0}),t&&t.loadTime&&t.loadTime>1e3&&this.fbCtrl.feedback(S.default.PLAY_VIDEO,this.getLog())}},{key:"onPlayerError",value:function(t){this.trigger(l.default.VIDEO_ERROR,{type:t})}},{key:"onPlayEnded",value:function(){this.trigger(l.default.VIDEO_ENDED)}},{key:"onPlayTime",value:function(t,e,i){this.trigger(l.default.PLAY_TIME,{currentTime:t,buffered:i,duration:e})}},{key:"onP2PReport",value:function(t,e){}},{key:"onSeiInfo",value:function(t,e){this.trigger(l.default.SEI_INFO,e)}},{key:"autoBitrateChanged",value:function(t,e){var i=e.curBitrate;i===this.broadcastBitrate?this.currentRoomStream.iBitRate=0:this.currentRoomStream.iBitRate=i,this.trigger(l.default.AUTO_BITRATE_CHANGED,e)}},{key:"seek",value:function(t,e){h.default.log("BasePlayer.seek time="+t,"waitTime",e),this.player&&this.player.setCurrentTime(t,e)}},{key:"updateLiveVodUrl",value:function(t){h.default.log("BasePlayer.updateLiveVodUrl url="+t),this.player&&this.player.updateLiveVodUrl(t)}},{key:"setVolume",value:function(t){h.default.log("BasePlayer.setVolume volume="+t),this.player&&this.player.setVolume(t)}},{key:"replayVideo",value:function(){this.startPlay(this.startPlayInfo,this.vjsOptions)}},{key:"play",value:function(){h.default.log("BasePlayer.play"),this.player&&this.player.play()}},{key:"pause",value:function(){h.default.log("BasePlayer.pause"),this.player&&this.player.pause()}},{key:"getCdnSip",value:function(){return this.player&&this.player.getCdnSip&&this.player.getCdnSip()}},{key:"getDurationTime",value:function(){return this.player&&this.player.getDurationTime()}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];h.default.log("BasePlayer("+this.id+").stop",t),this.bUserStoped=t,this.isAutoBitrate=!1,this._stop()}},{key:"_stop",value:function(){h.default.log("BasePlayer("+this.id+")._stop"),_.default.remove(this.onBlackScreen,this),this.playerVideo&&this.delH5EventListeners(this.playerVideo),this.player&&(this.player.stop(),this.player=null)}},{key:"resume",value:function(){this.bUserStoped=!1,this.playStreamInfo(this.streamList,this.currentRoomStream.iBitRate||-1)}},{key:"getEl",value:function(){return this.playerVideo}},{key:"getLog",value:function(){return""}},{key:"destroy",value:function(){h.default.log("HyOpenPlayer.destroy"),this.destroyed=!0,_.default.remove(this.onBlackScreen,this),this.player&&(this.player.dispose(),this.player=null),this.currentRoomStream={},this.room.quit(),this.clear(),this.clearVideoChildnote()}},{key:"setAbTestConfig",value:function(t){h.default.log("HyOpenPlayer.setAbTestConfig abConfig",t),this.abTestConfig=t}},{key:"onNeedUpdateM3u8Bind",value:function(t,e){this.trigger(l.default.NEED_UPDATE_M3U8,e)}},{key:"onPlaybackM3u8Updated",value:function(t,e){this.trigger(l.default.PLAYBACK_M3U8_UPDATED,e)}},{key:"getCurrentDts",value:function(){return this.player&&this.player.getCurrentDts?this.player.getCurrentDts():0}}]),e}(y.default);e.default=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i(1)),r=p(i(3)),o=p(i(17)),a=p(i(39)),s=p(i(21)),u=p(i(73)),c=p(i(212)),l=p(i(22)),h=p(i(106)),d=p(i(10)),f=p(i(38));function p(t){return t&&t.__esModule?t:{default:t}}var m=function(){function t(e){(0,n.default)(this,t),this._player=e,this.enableLowLatency=!1,this.roomId=0,this.pid=0,this.myid=0,this.gameid=0,this.videoBoxid="",this.place="",this.getStreamSuc=!1,this.needSeek=!1,this.hasStream=!1,this.busiState=0,this.httpState=0,this.signalState=0,this._onGetStreamInfoByRoomBind=this._onGetStreamInfoByRoom.bind(this),this._onGetStreamInfoByRoomFakeBind=this._onGetStreamInfoByRoomFake.bind(this)}return(0,r.default)(t,[{key:"destroy",value:function(){o.default.off(o.default.Events.LOGIN_SUC,this._onLoginSuc,this),o.default.off(o.default.Events.ON_GET_CONFIG,this._checkConfig,this),s.default.off(h.default.kMediaPackTypeRoomStreamChangeNotice,this._roomStreamChangeNotice,this)}},{key:"_checkConfig",value:function(){o.default.config?(o.default.off(o.default.Events.ON_GET_CONFIG,this._checkConfig,this),this._player.setConfig(o.default.config)):o.default.on(o.default.Events.ON_GET_CONFIG,this._checkConfig,this)}},{key:"update",value:function(t){this.enableLowLatency=t.enableLowLatency,this.roomId=t.roomId,this.pid=t.pid,this.videoBoxid=t.id,this.place=t.place}},{key:"_roomStreamChangeNotice",value:function(t){d.default.log("HYChannel.roomStreamChangeNotice roomId="+t.sRoomId+"  delay="+t.iDelay),t.sRoomId===this.roomId+""&&l.default.once(this._onUpdateRoomStreamInfoTime,this,t.iDelay+1e3)}},{key:"_onUpdateRoomStreamInfoTime",value:function(){this.join(h.default.kMediaPackTypeRoomStreamChangeNotice)}},{key:"quit",value:function(t){var e=new a.default.QuitMediaGroupReq;e.tId=o.default.getMediaUserId(),e.vGroupId.value=[t+""],s.default.sendWup(u.default.MEDIAUISEA,u.default.QUIT_GROUP,e),s.default.off(h.default.kMediaPackTypeRoomStreamChangeNotice,this._roomStreamChangeNotice,this)}},{key:"join",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d.default.log("Room.join mediaPackType",t,"loadInfoImmediately",e),s.default.on(h.default.kMediaPackTypeRoomStreamChangeNotice,this._roomStreamChangeNotice,this),o.default.isLogin?this._getStreamInfoByRoom(t):(e&&this._getStreamInfoByRoomFake(),o.default.on(o.default.Events.LOGIN_SUC,this._onLoginSuc,this))}},{key:"_onLoginSuc",value:function(){this._getStreamInfoByRoom(-1)}},{key:"onGetStreamByBusi",value:function(t){d.default.log("Room.onGetStreamByBusi",t),this.setStreamState(1,1),this._updateMediaStream(t.tStreamInfoPack,1)}},{key:"_getStreamInfoByRoom",value:function(t){this.handleReqFrom(3);var e=new a.default.GetStreamInfoByRoomReq;e.tId=o.default.getMediaUserId(),e.sRoomId=this.roomId+"",e.iMediaPackType=t||-1,d.default.log("Room._getStreamInfoByRoom",e.tId.lUid,e.sRoomId,e.iMediaPackType,e),s.default.sendWup(u.default.MEDIAUISEA,u.default.GET_STREAM_INFO_BY_ROOM,e,this._onGetStreamInfoByRoomBind)}},{key:"_onGetStreamInfoByRoom",value:function(t){d.default.log("Room._onGetStreamInfoByRoom",t,t.sRoomId,this.roomId),""===t.sRoomId&&0!==this.roomId?this._getStreamInfoByRoomFake():(this.setStreamState(1,3),this._updateMediaStream(t.tStreamInfoPack,3))}},{key:"_getStreamInfoByRoomFake",value:function(){this.handleReqFrom(2),this.getStreamSuc=!1,l.default.once(this._onGetStreamInfoByRoomFakeFailed,this,2e3);var t=new a.default.GetStreamInfoByRoomFakeReq;t.tId=o.default.getMediaUserId(),t.sRoomId=this.roomId+"",d.default.log("Room._getStreamInfoByRoomFake",t.tId.lUid,t.sRoomId,t),s.default.sendWupHttp(u.default.MEDIAUISEA,u.default.GET_STREAM_INFO_BY_ROOM_FAKE,t,this._onGetStreamInfoByRoomFakeBind)}},{key:"_onGetStreamInfoByRoomFake",value:function(t){d.default.log("Room._onGetStreamInfoByRoomFake",t,t.sdkcode,t.sRoomId,this.roomId);var e=Number(t.sRoomId);0!==e&&e===Number(this.roomId)&&(l.default.remove(this._onGetStreamInfoByRoomFakeFailed,this),0===t.sdkcode?(this.getStreamSuc=!0,this.setStreamState(1,2),this._updateMediaStream(t.tStreamInfoPack,2)):this._onGetStreamInfoByRoomFakeFailed())}},{key:"_onGetStreamInfoByRoomFakeFailed",value:function(){d.default.log("Room._onGetStreamInfoByRoomFakeFailed"),this._player.onUpdateStreamInfoFail()}},{key:"_updateMediaStream",value:function(t,e){var i=this,n=t.mMediaStreamInfoPack.value,r={streams:{}};r.vproto=t.mMediaStreamInfoPack.vproto;var o=0,s=!1;for(var u in n){var l=n[u];if(l.iStreamType!==a.default.EMediaStreamType.EMST_HUYA_UDP||l.iStreamProperty!==a.default.EMediaStreamProperty.EOriginalStream){s=!0;for(var h=[],p=l.vMediaStreamInfo.value,m=0;m<p.length;m++){var y=p[m];y.iLineIndex<1||4===y.iLineIndex||0!==y.mMediaStreamFormatInfo.size()&&h.push(y)}if(h.length>0){h.sort((function(t,e){return t.iLineIndex-e.iLineIndex}));var v=new c.default;v.streamName=u,v.lLiveCompatibleFlag=l.lLiveCompatibleFlag,v.lStreamId=l.lStreamId,v.sAntiCode=l.sAntiCode,v.iWebDefaultBitRate=l.iWebDefaultBitRate,v.vStreamGearInfo=l.vStreamGearInfo.value,v.vMediaStreamInfo=h,v.iStreamProperty=l.iStreamProperty,v.iBitRate=l.iBitRate,v.iStreamType=l.iStreamType,v.sAdditionalParam=l.sAdditionalParam,v.lUid=l.lUid,r.streams[u]=v,v.vStreamGearInfo.forEach((function(t){"auto"==t.sDisplayName&&(i._player.hasAutoBitrate=!0)})),v.vStreamGearInfo.sort((function(t,e){return 0==t.iBitRate?-1:0==e.iBitRate?1:e.iBitRate-t.iBitRate}))}o=l.iBitRate}}this.hasStream||(this.hasStream=s),s?(d.default.log("Room._updateMediaStream",r),this.setStreamState(2,e),this._player.onUpdateStreamInfo({liveStreams:r,from:e,broadcastBitrate:o}),this.handleReqSuccessFrom(e)):(this.setStreamState(3,e),d.default.warn("Room._updateMediaStream has no streams"),this._player.trigger(f.default.ROOM_NO_STREAM),this._player&&this._player.reportNoStream&&this._player.reportNoStream(e))}},{key:"setStreamState",value:function(t,e){1===e?this.busiState=t:2===e?this.httpState=t:3===e&&(this.signalState=t)}},{key:"handleReqFrom",value:function(t){2!==t&&3!==t||this._player&&this._player.reportSdkStream&&this._player.reportSdkStream(0,t)}},{key:"handleReqSuccessFrom",value:function(t){2!==t&&3!==t||this._player&&this._player.reportSdkStream&&this._player.reportSdkStream(1,t)}}]),t}();e.default=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(1)),r=a(i(3)),o=a(i(10));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t),this.streamName="",this.lLiveCompatibleFlag=0,this.lStreamId=0,this.sAntiCode="",this.vStreamGearInfo=null,this.vMediaStreamInfo=null,this.lUid=0}return(0,r.default)(t,[{key:"getLineInfo",value:function(t){var e=this.vMediaStreamInfo;if(e){for(var i=0;i<e.length;i++){var n=e[i];if(n.iLineIndex==Number(t))return n}return null}o.default.warn("StreamInfo.getLineInfo streamInfo=null")}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(1))&&n.__esModule?n:{default:n},o=function t(){(0,r.default)(this,t)};o.setVideoAttributeOptions=function(t,e){for(var i in void 0!==e.preload&&o.setAttribute(t,"preload",e.preload),e){var n=e[i];o.setAttribute(t,i,n)}for(var r=["loop","muted","playsinline","autoplay","controls"],a=0;a<r.length;a++){var s=r[a],u=e[s];void 0!==u&&(u||o.removeAttribute(t,s),t[s]=u)}},o.setAttribute=function(t,e,i){t.setAttribute(e,i)},o.removeAttribute=function(t,e){t.removeAttribute(e)},e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(16)),r=u(i(1)),o=u(i(3)),a=u(i(27)),s=u(i(28));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){return(0,r.default)(this,e),(0,a.default)(this,(e.__proto__||(0,n.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:"_initStat",value:function(){this._stat.setComDim("p2p",3),this._stat.setComDim("stream_type",6)}}]),e}(u(i(215)).default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=S(i(26)),r=S(i(16)),o=S(i(1)),a=S(i(3)),s=S(i(27)),u=S(i(28)),c=S(i(51)),l=S(i(109)),h=S(i(22)),d=S(i(52)),f=S(i(10)),p=S(i(50)),m=S(i(75)),y=S(i(38)),v=S(i(216)),g=S(i(217)),_=S(i(218));function S(t){return t&&t.__esModule?t:{default:t}}var w=function(t){function e(t,i){(0,o.default)(this,e);var n=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n._handler=t,n._el=i,n.pauseByUser=!1,n.clickroomts=0,n.startPlayTs=0,n.businessStartCost=0,n.UIStartCost=0,n.pid=0,n.bitrate=0,n.videoSrc="",n.lineType=0,n.seekTime=0,n.roomId=0,n._tickCnt=0,n.videoInfo=null,n.waiting=!1,n.ended=!1,n.sysPause=!1,n._stat=new l.default,n._pauseStat=new g.default,n._tsSeg=new v.default,n._initStat(),n._videoEvts=["loadstart","pause","loadedmetadata","loadeddata","error","playing","ended"],n._videoEvtHandlerBind=n._videoEvtHandler.bind(n),n}return(0,u.default)(e,t),(0,a.default)(e,[{key:"_videoEvtHandler",value:function(t){switch(t.type){case"loadstart":this.onLoadStart();break;case"pause":this.onVideoPause();break;case"loadedmetadata":this.onLoadedmetadata();break;case"loadeddata":this.onVideoPlay();break;case"error":this.onVideoError(t);break;case"playing":this.onVideoRealPlay();break;case"ended":this.setEnded()}}},{key:"addEvents",value:function(){var t=this;this._el&&!this.hasEvents&&(this.hasEvents=!0,this._videoEvts.forEach((function(e){t._el.addEventListener(e,t._videoEvtHandlerBind)})))}},{key:"delEvents",value:function(){var t=this;this._el&&this.hasEvents&&(this.hasEvents=!1,this._videoEvts.forEach((function(e){t._el.removeEventListener(e,t._videoEvtHandlerBind)})))}},{key:"_initStat",value:function(){}},{key:"startPlay",value:function(t){f.default.log("TagPlayer.startPlay",(0,n.default)(t)),this.videoInfo=t;var e=t.url,i=t.uistartTs,r=t.startTimeStamp,o=t.pid,a=t.bitrate,s=t.bLive,u=t.lineType,l=t.place,d=t.playTimeout;this._tsSeg.reset(),this._stat.setComDim("live_type",s?1:2),this._stat.setComDim("stream_url",e);var p=c.default.now();this._tsSeg.srcTs=p,this.startPlayTs=p,this.uistartTs=i,this.pid=o,this.bitrate=a,this.videoSrc=e,this.lineType=u,this.place=l,this.UIStartCost=0,this.businessStartCost=r?p-r:0,this.uistartTs&&this.uistartTs>0&&(this.UIStartCost=p-this.uistartTs),this.waiting=!1,this.ended=!1,this.playing=!1,this.realPlaying=!1,this.sysPause=!1,this.addEvents(),this._el.src=e,this._tickCnt=0,h.default.add(this.onCheckTimer,this,1e3),h.default.remove(this.onPlayTimeout,this),this._el.autoplay&&(h.default.once(this.onPlayTimeout,this,d||2e4),this._el.play())}},{key:"onPlayTimeout",value:function(){this._el&&(f.default.log("TagPlayer.onPlayTimeout----------",navigator.userAgent,this._el.paused,this.pauseByUser),this._el.paused?(f.default.log("PlayerEvents.VIDEO_PAUSE"),!this.pauseByUser&&this._handler&&this._handler.trigger(y.default.VIDEO_PAUSE)):_.default.isXiaomi(navigator.userAgent)||0!==this._el.currentTime||(f.default.log("PlayerEvents.PLAY_TIMEOUT"),this._handler&&this._handler.trigger(y.default.PLAY_TIMEOUT)))}},{key:"setCurrentTime",value:function(t,e){0!==this._el.duration&&(t!==Math.ceil(this._el.duration)?(this.seekTime=t,this._el.currentTime=t,h.default.remove(this.onPlayTimeout,this),h.default.once(this.onSeekTimeout,this,e||2e4)):this.setEnded())}},{key:"onSeekTimeout",value:function(){this.seekTime>0&&this.seekTime===this._el.currentTime&&!this.pauseByUser&&(this.seekTime=0,this._handler&&this._handler.trigger(y.default.SEEK_TIMEOUT))}},{key:"getCurrentTime",value:function(){return this._el.currentTime}},{key:"getDurationTime",value:function(){return this._el.duration}},{key:"setVolume",value:function(t){this._el&&(this._el.volume=t)}},{key:"play",value:function(){this.pauseByUser=!1,this.addEvents(),this._el.play()}},{key:"pause",value:function(){this.pauseByUser=!0,this.delEvents(),this._el.pause()}},{key:"stop",value:function(){this._el.pause(),this._el.src="",this.delEvents(),h.default.remove(this.onPlayTimeout,this),h.default.remove(this.onCheckTimer,this),h.default.remove(this.onCheckFastTimer,this)}},{key:"setPlayerConfig",value:function(t){}},{key:"dispose",value:function(){this.stop()}},{key:"reset",value:function(){this.stop()}},{key:"onCheckTimer",value:function(t,e){this._tickCnt++,!this.playing||this.pauseByUser||this.sysPause||this._tickCnt%20!=0||this.reportVideoQuality()}},{key:"onCheckFastTimer",value:function(t,e){!this.playing||this.pauseByUser||this.sysPause||(this.checkPause(t),e%10==0&&this.updateTime())}},{key:"updateTime",value:function(){if(this._handler&&!this.ended){var t=0;if(this._el&&this._el.buffered&&this._el.currentTime>0){var e=this._el.buffered;if("function"!=typeof e.start||"function"!=typeof e.end)return void f.default.warn("video.buffered start&end not a function");for(var i=0;i<e.length;i++)if(e.start(i)<=this._el.currentTime&&e.end(i)>=this._el.currentTime){t=(t=e.end(i)-this._el.currentTime)<0?0:t,this._el.duration>0&&this._el.currentTime>=this._el.duration?this.setEnded():this._handler.onPlayTime(Math.floor(this._el.currentTime),Math.floor(this._el.duration),Math.floor(t));break}}}}},{key:"setEnded",value:function(){this.ended=!0,this._el.currentTime=this._el.duration,this._el.pause();var t=Math.ceil(this._el.duration);this._handler.onPlayTime(t,t,0),this._handler.onPlayEnded()}},{key:"checkPause",value:function(t){!this.ended&&!this.sysPause&&!this.pauseByUser&&this.setWaiting(this._pauseStat.paused)}},{key:"onLoadStart",value:function(){this._tsSeg.loadstartTs=c.default.now()}},{key:"onLoadedmetadata",value:function(){this._tsSeg.loadedmetadataTs=c.default.now()}},{key:"onVideoPause",value:function(){f.default.log("onVideoPause--------"),this.sysPause=!0}},{key:"onVideoPlay",value:function(){if(!this.playing){f.default.log("TagPlayer.onVideoPlay",this._el.paused);var t=c.default.now();this._pauseStat.start(this._el),this._tsSeg.loadeddataTs=t,this.playing=!0,this._handler.onPlayVideo({video:this._el});var e=t-this.startPlayTs,i=this.UIStartCost>0?e+this.UIStartCost:0,n=this.businessStartCost>0?e+this.businessStartCost:0;this.reportVideoLoadTs(e,i,n),h.default.add(this.onCheckFastTimer,this,100)}}},{key:"onVideoRealPlay",value:function(){this.sysPause=!1,this.realPlaying||(this.realPlaying=!0,this._handler.trigger(y.default.VIDEO_REAL_PLAY,{video:this._el}))}},{key:"onVideoError",value:function(t){this._handler&&(f.default.log("tag play error"),this._handler.onPlayerError())}},{key:"setWaiting",value:function(t){this.waiting!==t&&(this.waiting=t,this._handler.trigger(y.default.VIDEO_WAITING,t))}},{key:"reportVideoQuality",value:function(){this._pauseStat.checkBadQuality();var t=[];this._stat.setCoreDim("video_bad_quality",this._pauseStat.paused?100:0),this._stat.fill(t,!1),this._pauseStat.reset20(),this.sendMetrics(t)}},{key:"reportVideoLoadTs",value:function(t,e,i){var n=[],r=0;e&&(r+=1),i&&(r+=2),this._stat.setComDim("act_load_type",r);var o=[t,0,0,e,i];this._tsSeg.srcTs>0&&(o.push(this._tsSeg.loadstartTs-this._tsSeg.srcTs),o.push(this._tsSeg.loadedmetadataTs-this._tsSeg.loadstartTs),o.push(this._tsSeg.loadeddataTs-this._tsSeg.loadedmetadataTs)),n.push(this._stat.createAct(m.default.VIDEO_LOAD_TS,{value:o})),this.sendMetrics(n)}},{key:"sendMetrics",value:function(t){d.default.onNimoDataMetric2(t,this.pid,this.bitrate,this.videoSrc,this.lineType,this.place,this.roomId,this.gameid,this.videoInfo.oexp,this.videoInfo.stream_from)}}]),e}(p.default);e.default=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1)),r=o(i(3));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.srcTs=0,this.loadstartTs=0,this.loadedmetadataTs=0,this.loadeddataTs=0}return(0,r.default)(t,[{key:"reset",value:function(){this.srcTs=0,this.loadstartTs=0,this.loadedmetadataTs=0,this.loadeddataTs=0}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(1)),r=u(i(3)),o=u(i(51)),a=u(i(22)),s=u(i(10));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){(0,n.default)(this,t),this.video=null,this._startWaitingTs=0,this._badQualityCnt=0,this._badQualityTime=0,this._badQuality=!1,this._paused=!1,this.onWaitingBind=this.onWaiting.bind(this),this.onPlayingBind=this.onPlaying.bind(this),this.onPauseBind=this.onPause.bind(this)}return(0,r.default)(t,[{key:"reset20",value:function(){this._badQuality&&(this._startWaitingTs=o.default.now()),this._badQuality=!1,this.resetBadQuality()}},{key:"reset",value:function(){this.delEventListener(this.video),this.resetBadQuality(),this.resetStat(),this._paused=!1,this.video=null}},{key:"resetBadQuality",value:function(){this._badQualityCnt=0,this._badQualityTime=0}},{key:"resetStat",value:function(){this._startWaitingTs=0,this._badQuality=!1}},{key:"start",value:function(t){this.reset(),this.addEventListener(t),this.video=t,a.default.add(this.onCheckStat,this,50)}},{key:"stop",value:function(){this.reset(),a.default.remove(this.onCheckStat,this)}},{key:"addEventListener",value:function(t){t&&(t.addEventListener("waiting",this.onWaitingBind),t.addEventListener("playing",this.onPlayingBind),t.addEventListener("pause",this.onPauseBind))}},{key:"delEventListener",value:function(t){t&&(t.removeEventListener("waiting",this.onWaitingBind),t.removeEventListener("playing",this.onPlayingBind),t.removeEventListener("onPause",this.onPauseBind))}},{key:"onCheckStat",value:function(t,e){!this._paused&&this._startWaitingTs>0&&t-this._startWaitingTs>200&&(this._badQuality||(this._badQuality=!0,this._badQualityCnt++))}},{key:"onWaiting",value:function(t){0===this._startWaitingTs&&(this._startWaitingTs=o.default.now())}},{key:"onPlaying",value:function(t){this.checkBadQuality(),this.resetStat(),this._paused=!1}},{key:"onPause",value:function(t){this.checkBadQuality(),this.resetStat(),this._paused=!0}},{key:"checkBadQuality",value:function(){if(this._badQuality&&this._startWaitingTs>0){var t=o.default.now()-this._startWaitingTs;s.default.log("PauseStat.onPlaying badQualityTime="+t),this._badQualityTime+=t}}},{key:"paused",get:function(){return this._badQualityCnt>0}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getBrand:function(t){return this.isIphone(t)?"iphone":this.isHuawei(t)?"huawei":this.isOppo(t)?"oppo":this.isVivo(t)?"vivo":this.isXiaomi(t)?"xiaomi":this.isSamsung(t)?"samsung":this.isUc(t)?"uc":"default"},isIphone:function(t){return t&&(t=t.toLowerCase()),t&&"iphone"==t.match(/iphone/i)},isHuawei:function(t){return t&&(t=t.toLowerCase()),t&&("huawei"==t.match(/huawei/i)||"honor"==t.match(/honor/i))},isOppo:function(t){return t&&(t=t.toLowerCase()),t&&("oppo"==t.match(/oppo/i)||"pacm00"==t.match(/pacm00/i))},isVivo:function(t){return t&&(t=t.toLowerCase()),t&&"vivo"==t.match(/vivo/i)},isXiaomi:function(t){return t&&(t=t.toLowerCase()),t&&("mi "==t.match(/mi\s/i)||"mix "==t.match(/mix\s/i)||"redmi"==t.match(/redmi/i))},isSamsung:function(t){return t&&(t=t.toLowerCase()),t&&"sm-"==t.match(/sm-/i)},isUc:function(t){return t&&(t=t.toLowerCase()),t&&"ucbrowser"==t.match(/ucbrowser/i)},isWeChat:function(t){return t&&(t=t.toLowerCase()),/micromessenger/.test(t)},getPlatform:function(t){var e="ipad"==t.match(/ipad/i),i="iphone os"==t.match(/iphone os/i),n="midp"==t.match(/midp/i),r="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),o="ucweb"==t.match(/ucweb/i),a="android"==t.match(/android/i),s="windows ce"==t.match(/windows ce/i),u="windows mobile"==t.match(/windows mobile/i);return i||n||r||o||a||s||u||e?e?"pad":"phone":"pc"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(1)),r=a(i(3)),o=a(i(29));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t)}return(0,r.default)(t,[{key:"detectOS",value:function(){var t=navigator.userAgent,e="Win32"==navigator.platform||"Windows"==navigator.platform,i="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(i)return"Mac";if("X11"==navigator.platform&&!e&&!i)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(e){if(t.indexOf("Windows NT 5.0")>-1||t.indexOf("Windows 2000")>-1)return"Win2000";if(t.indexOf("Windows NT 5.1")>-1||t.indexOf("Windows XP")>-1)return"WinXP";if(t.indexOf("Windows NT 5.2")>-1||t.indexOf("Windows 2003")>-1)return"Win2003";if(t.indexOf("Windows NT 6.0")>-1||t.indexOf("Windows Vista")>-1)return"WinVista";if(t.indexOf("Windows NT 6.1")>-1||t.indexOf("Windows 7")>-1)return"Win7";if(t.indexOf("Windows NT 10")>-1||t.indexOf("Windows 10")>-1)return"Win10"}return"other"}},{key:"feedBack",value:function(t,e,i){this.getFbId(t,e,o.default[1],i,this.postLog.bind(this))}},{key:"getFbId",value:function(t,e,i,n,r){var o=18e11+parseInt(1e11*Math.random());if(window.XMLHttpRequest){var a=new XMLHttpRequest,s=new FormData;s.append("fbType",i),s.append("fbDetails",n||i),s.append("uid",o),s.append("gid",this.getCookie("guid")),s.append("device",this.detectOS()),s.append("appVersion",2206131428),s.append("deviceType",1),s.append("anchorId",t),s.append("ssid",0),s.append("appId",4e3),a.open("post","//ffilelogapp.nimo.tv/addFeedBack",!1),a.onload=function(t){var i=JSON.parse(t.target.responseText),n=i.fbId;1==i.result?(r(n,e),console.info("获取fbid成功")):console.info("获取fbid失败")},a.send(s)}}},{key:"getCookie",value:function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){var o=i[n].trim();if(0==o.indexOf(e))return o.substr(e.length)}return""}},{key:"gblen",value:function(t){for(var e=0,i=t.length,n=0;n<i;n++){var r=t.charCodeAt(n);r>=1&&r<=126||65376<=r&&r<=65439?e++:e+=2}return e}},{key:"postLog",value:function(t,e){var i=this.gblen(e);if(window.XMLHttpRequest){var n=new XMLHttpRequest,r=new FormData;r.append("feedbackId",t),r.append("log",e),r.append("fileSize",i),n.open("post","//ffilelogupload.nimo.tv/uploadStringLog",!1),n.onreadystatechange=function(){if(console.log(n.readyState),4==n.readyState&&200==n.status){var t=n.responseText;console.log(t)}},n.onload=function(t){},n.send(r)}}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(1))&&n.__esModule?n:{default:n};e.default=function t(){(0,r.default)(this,t),this.id="",this.line=0,this.url="",this.type="",this.bLive=!1,this.pid=0,this.myid=0,this.videoquality=0,this.enableLowLatency=!1,this.vjsOptions=null,this.clickroomts=0,this.curBitRate=-1,this.stream_from=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(26)),r=d(i(1)),o=d(i(3)),a=d(i(52)),s=d(i(21)),u=d(i(17)),c=d(i(10)),l=d(i(74)),h=d(i(111));function d(t){return t&&t.__esModule?t:{default:t}}var f=0,p=function(){function t(e,i){(0,r.default)(this,t),this.id=f++,c.default.log("HysdkPlayer.constructor"),this.handler=e,this.playerConfig=i,this.playing=!1,this.onPlayVideoBind=this.onPlayVideo.bind(this),this.onStopVideoBind=this.onStopVideo.bind(this),this.onSeekVideoBind=this.onSeekVideo.bind(this),this.onAnchorStopBind=this.onAnchorStop.bind(this),this.onPlayStatusBind=this.onPlayStatus.bind(this),this.onPlayTimeStatusBind=this.onPlayTimeStatus.bind(this),this.onPlayDataMeteric2Bind=this.onPlayDataMeteric2.bind(this),this.onPlayDownLinkInfoBind=this.onPlayDownLinkInfo.bind(this),this.onLinkUavailableBind=this.onLinkUavailable.bind(this),this.onLinkTimeoutBind=this.onLinkTimeout.bind(this),this.onLoadTimeoutBind=this.onLoadTimeout.bind(this),this.onPlayerErrorBind=this.onPlayerError.bind(this),this.onNoDataReceivedBind=this.onNoDataReceived.bind(this),this.onCloseBind=this.onClose.bind(this),this.onReplayVideoBind=this.onReplayVideo.bind(this),this.onRecvVideoFramesBind=this.onRecvVideoFrames.bind(this),this.onUpdateFrameBufferBind=this.onUpdateFrameBuffer.bind(this),this.onMetaDataBind=this.onMetaData.bind(this),this.onSwitchDoneBind=this.onSwitchDone.bind(this),this.onUpdateIntersityBind=this.onUpdateIntersity.bind(this),this.onVideoPauseBind=this.onVideoPause.bind(this),this.onVideoStartBind=this.onVideoStart.bind(this),this.onVideoStartLoadBind=this.onVideoStartLoad.bind(this),this.onSetSignalBind=this.onSetSignal.bind(this),this.onPause5SecBind=this.onPause5SecError.bind(this),this.onNeedUpdateM3u8Bind=this.onNeedUpdateM3u8.bind(this),this.onPlaybackM3u8UpdatedBind=this.onPlaybackM3u8Updated.bind(this),this.onP2PReportBind=this.onP2PReport.bind(this),this.onSeiInfoBind=this.onSeiInfo.bind(this),this.autoBitrateChangedBind=this.autoBitrateChanged.bind(this),this.roomId=0,this.gameid=0,this.videoInfo=null,this.pause5SecRetryTime=0}return(0,o.default)(t,[{key:"setTafHandler",value:function(){var t=s.default.getSignalSdk();t?this.hyPlayer.setTafHandler&&this.hyPlayer.setTafHandler(t):s.default.on(s.default.SIGNAL_INIT,this.onSetSignalBind)}},{key:"getMeidaType",value:function(t){var e="";switch(t){case l.default.flv:e=HYPlayer.FLV;break;case l.default.hls:e=HYPlayer.HLS;break;case l.default.playback:e=HYPlayer.PLAYBACK;break;case l.default.p2p:e=HYPlayer.P2PFLV;break;default:e=HYPlayer.FLV}return e}},{key:"startPlay",value:function(t,e){this.videoInfo=t,this.sdkver=t.sdkver,this.lineType=t.lineType,this.videoSrc=t.url,this.bitrate=t.bitrate,this.originalBitrate=t.originalBitrate||0,this.iBitRate=t.iBitRate||0,this.curBitrate=t.curBitrate||0,this.enableLowLatency=t.enableLowLatency,this.mediaType=t.mediaType,this.pidpresenterUid=t.pid,this.myid=t.myid,this.anonymousuid=this.myid?0:t.anonymousuid||h.default.getAnonymousUid(),this.roomId=t.roomId,this.needSeek=t.needSeek,this.el_=t.video,this.startTimeStamp=t.startTimeStamp,this.isPureAudio=t.isPureAudio,this.uistartTs=t.uistartTs,this.bLive=t.bLive,this.startType=t.startType,this.place=t.place,this.noNeedSendVideoLoadTime=t.noNeedSendVideoLoadTime,this.seekTime=t.seekTime,this.cdnName=t.cdnName,this.h5Root=t.h5Root,this.sStreamName=t.sStreamName,this.sAdditionalParam=t.sAdditionalParam,this.hyPlayer||(this.hyPlayer=new HYPlayer,this.hyPlayer.attachMediaElement(this.el_),this.hyPlayer.on(HYPlayer.Events.VIDEO_PLAY,this.onPlayVideoBind),this.hyPlayer.on(HYPlayer.Events.VIDEO_STOP,this.onStopVideoBind),this.hyPlayer.on(HYPlayer.Events.VIDEO_SEEK,this.onSeekVideoBind),this.hyPlayer.on(HYPlayer.Events.ANCHOR_STOP,this.onAnchorStopBind),this.hyPlayer.on(HYPlayer.Events.PLAY_STATUS,this.onPlayStatusBind),this.hyPlayer.on(HYPlayer.Events.PLAY_TIME_STATUS,this.onPlayTimeStatusBind),this.hyPlayer.on(HYPlayer.Events.DATA_METRIC2,this.onPlayDataMeteric2Bind),this.hyPlayer.on(HYPlayer.Events.PLAY_DOWNLINK_INFO,this.onPlayDownLinkInfoBind),this.hyPlayer.on(HYPlayer.Events.FLV_URL_UNAVAILABLE,this.onLinkUavailableBind),this.hyPlayer.on(HYPlayer.Events.FLV_URL_LOAD_TIMEOUT,this.onLinkTimeoutBind),this.hyPlayer.on(HYPlayer.Events.HLS_URL_UNAVAILABLE,this.onLinkUavailableBind),this.hyPlayer.on(HYPlayer.Events.HLS_URL_LOAD_TIMEOUT,this.onLinkTimeoutBind),this.hyPlayer.on(HYPlayer.Events.HLS_MAINFEST_LOAD_TIMEOUT,this.onLoadTimeoutBind),this.hyPlayer.on(HYPlayer.Events.H5_PLAYER_ERROR,this.onPlayerErrorBind),this.hyPlayer.on(HYPlayer.Events.NO_DATA_RECEIVED,this.onNoDataReceivedBind),this.hyPlayer.on(HYPlayer.Events.VIDEO_LINK_CLOSE,this.onCloseBind),this.hyPlayer.on(HYPlayer.Events.REPLAY_VIDEO,this.onReplayVideoBind),this.hyPlayer.on(HYPlayer.Events.RECV_VIDEO_FRAME,this.onRecvVideoFramesBind),this.hyPlayer.on(HYPlayer.Events.PLAY_FRAME_BUFFER,this.onUpdateFrameBufferBind),this.hyPlayer.on(HYPlayer.Events.METADATA,this.onMetaDataBind),this.hyPlayer.on(HYPlayer.Events.SWITCH_DONE,this.onSwitchDoneBind),this.hyPlayer.on(HYPlayer.Events.UPDATE_INTERSITY,this.onUpdateIntersityBind),this.hyPlayer.on(HYPlayer.Events.PAUSE_5SEC_ERROR,this.onPause5SecBind),this.hyPlayer.on(HYPlayer.Events.NEED_UPDATE_M3U8,this.onNeedUpdateM3u8Bind),this.hyPlayer.on(HYPlayer.Events.PLAYBACK_M3U8_UPDATED,this.onPlaybackM3u8UpdatedBind),this.hyPlayer.on(HYPlayer.Events.M3U8_PLAY_ENDED,this.onStopVideoBind),this.hyPlayer.on(HYPlayer.Events.P2P_REPORT,this.onP2PReportBind),this.hyPlayer.on(HYPlayer.Events.SEI_INFO,this.onSeiInfoBind),this.hyPlayer.on(HYPlayer.Events.AUTO_BITRATE_CHANGED,this.autoBitrateChangedBind),this.el_.addEventListener("waiting",this.onVideoPauseBind),this.el_.addEventListener("playing",this.onVideoStartBind),this.el_.addEventListener("loadstart",this.onVideoStartLoadBind),this.playerConfig&&this.hyPlayer.setNimoConfig(this.playerConfig)),this.handler.abTestConfig&&(c.default.log("HysdkPlayer.startPlay setAbTestConfig"),this.hyPlayer.setAbTestConfig(this.handler.abTestConfig)),t.isP2PSupport&&this.hyPlayer.initWorker&&this.hyPlayer.initWorker(),this.sdkPlay(this.videoSrc,this.mediaType,{isSwitchBitrate:e})}},{key:"sdkPlay",value:function(t,e){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.playing=!1;var o=this.getMeidaType(e),a=this.h5Root;a||(a=location.origin+location.pathname);var s=[];this.handler.streamGearInfo.forEach((function(t){var e=t.tResolution||{},n=e.iWidth>0&&e.iHeight>0&&0===t.iBitRate;"auto"!==t.sDisplayName&&s.push({bitrate:n?i.handler.broadcastBitrate:t.iBitRate,iBitRate:t.iBitRate,iCodecType:t.iCodecType,iHEVCBitRate:t.iHEVCBitRate,iIsHEVCSupport:t.iIsHEVCSupport})}));var l=this.handler.hasAutoBitrate&&this.handler.isAutoBitrate,d={sdkver:this.sdkver,type:o,isLive:this.bLive,appid:u.default.appId,uid:Number(this.myid||this.anonymousuid),presenterUid:this.pidpresenterUid,roomId:this.roomId,lineType:this.lineType,liveType:this.bLive?1:3,startType:this.startType,url:t,sGuid:u.default.deviceId,iBitRate:this.iBitRate,curBitrate:this.curBitrate,originalBitrate:this.originalBitrate,enableLowLatency:this.enableLowLatency,startTimeStamp:this.startTimeStamp,uistartTs:this.uistartTs,isPureAudio:this.isPureAudio,cdnName:this.cdnName,h5Root:a,sStreamName:this.sStreamName,sAdditionalParam:this.sAdditionalParam,isAuto:l,bitrateList:s,hasAutoBitrate:this.handler.hasAutoBitrate,nimoTid:u.default.getMediaUserId()};r.isSwitchBitrate&&(d.pullStreamFrom=1),this.bLive&&(d.iIsP2PSupport=this.videoInfo.isP2PSupport||0,d.sFlvAntiCode=this.videoInfo.sFlvAntiCode||"",d.sFlvUrl=h.default.removeUrlEndSlash(this.videoInfo.sFlvUrl||""),d.sFlvUrlSuffix=this.videoInfo.sFlvSuffix||"",d.sHlsAntiCode=this.videoInfo.sHlsAntiCode||"",d.sHlsUrl=h.default.removeUrlEndSlash(this.videoInfo.sHlsUrl||""),d.sHlsUrlSuffix=this.videoInfo.sHlsSuffix||"",d.sP2pAntiCode=this.videoInfo.sP2pAntiCode||"",d.sP2pUrl=h.default.removeUrlEndSlash(this.videoInfo.sP2pUrl||""),d.sP2pUrlSuffix=this.videoInfo.sP2pSuffix||""),this.bLive||(d.seekTime=this.seekTime),c.default.log("HysdkPlayer("+this.id+").sdkPlay type="+d.type+", info=",(0,n.default)(d)),this.setTafHandler(),this.videoSrc=t,this.videoInfo&&this.videoInfo.oexp&&this.hyPlayer.setOexp&&this.hyPlayer.setOexp(this.videoInfo.oexp),this.hyPlayer.start(d)}},{key:"retryPlay",value:function(){this.retryTimes++;var t=this.videoSrc,e=this.mediaType;this.sdkPlay(t,e)}},{key:"onSetSignal",value:function(){this.hyPlayer&&this.hyPlayer.setTafHandler(s.default.getSignalSdk())}},{key:"onP2PReport",value:function(t,e){this.handler&&this.handler.onP2PReport(t,e)}},{key:"onSeiInfo",value:function(t,e){this.handler&&this.handler.onSeiInfo(t,e)}},{key:"autoBitrateChanged",value:function(t,e){this.handler&&this.handler.autoBitrateChanged(t,e)}},{key:"onPlayVideo",value:function(t,e){this.playing=!0,this.handler&&this.handler.onPlayVideo(e)}},{key:"onStopVideo",value:function(t,e){this.handler&&this.handler.onStopVideo(e)}},{key:"onSeekVideo",value:function(){}},{key:"onAnchorStop",value:function(){}},{key:"onPlayerError",value:function(t,e){this.handler&&this.handler.onPlayerError(e?e.code:"unknow")}},{key:"onPause5SecError",value:function(t,e){this.retryStart()}},{key:"onNoDataReceived",value:function(t){this.handler&&this.handler.onNoDataReceived&&this.handler.onNoDataReceived()}},{key:"onNeedUpdateM3u8",value:function(t,e){this.handler&&this.handler.onNeedUpdateM3u8Bind&&this.handler.onNeedUpdateM3u8Bind(t,e)}},{key:"onPlaybackM3u8Updated",value:function(t,e){this.handler&&this.handler.onPlaybackM3u8Updated&&this.handler.onPlaybackM3u8Updated(t,e)}},{key:"onPlayStatus",value:function(){}},{key:"onPlayDownLinkInfo",value:function(t,e){this.handler&&this.handler.onPlayDownLinkInfo(e)}},{key:"retryStart",value:function(){var t=Date.now();t-this.pause5SecRetryTime<2e3||(c.default.log("HysdkPlayer.retryStart videoSrc = "+this.videoSrc+" , type="+this.mediaType),this.sdkPlay(this.videoSrc,this.mediaType),this.pause5SecRetryTime=t)}},{key:"getRecvInfo",value:function(){return this.hyPlayer&&this.hyPlayer.getRecvInfo?this.hyPlayer.getRecvInfo():null}},{key:"getCurrentDts",value:function(){return this.hyPlayer&&this.hyPlayer.getCurrentDts?this.hyPlayer.getCurrentDts():0}},{key:"onPlayDataMeteric2",value:function(t,e){a.default.onNimoDataMetric2(e,this.pidpresenterUid,this.bitrate,this.videoSrc,this.lineType,this.place,this.roomId,this.gameid,"",this.videoInfo.stream_from)}},{key:"onPlayTimeStatus",value:function(t,e){this.handler&&this.handler.onPlayTime(Math.floor(e.current),Math.floor(e.total),0)}},{key:"onLinkUavailable",value:function(){this.handler&&this.handler.onLinkUnAvailable()}},{key:"onLoadTimeout",value:function(){this.handler&&this.handler.onLoadDataTimeout()}},{key:"onLinkTimeout",value:function(){this.handler&&this.handler.onLinkTimeout()}},{key:"onClose",value:function(){this.handler&&this.handler.onClose()}},{key:"onReplayVideo",value:function(){this.handler&&this.handler.replayVideo()}},{key:"onUpdateFrameBuffer",value:function(t,e){this.handler&&this.handler.onPlayFrameBuffer(e)}},{key:"onMetaData",value:function(t,e){this.handler&&this.handler.onMetaData&&this.handler.onMetaData(e)}},{key:"onSwitchDone",value:function(t,e){this.handler&&this.handler.onSwitchDone&&this.handler.onSwitchDone()}},{key:"onUpdateIntersity",value:function(t,e){this.handler&&this.handler.onUpdateIntersity&&this.handler.onUpdateIntersity(e)}},{key:"onRecvVideoFrames",value:function(){this.handler&&this.handler.onVideoFrameLoaded()}},{key:"onVideoPause",value:function(t){}},{key:"onVideoStart",value:function(t){}},{key:"onVideoStartLoad",value:function(){}},{key:"removeHyPlayerEventListeners",value:function(){this.hyPlayer&&(this.hyPlayer.off(HYPlayer.Events.VIDEO_PLAY,this.onPlayVideoBind),this.hyPlayer.off(HYPlayer.Events.VIDEO_STOP,this.onStopVideoBind),this.hyPlayer.off(HYPlayer.Events.VIDEO_SEEK,this.onSeekVideoBind),this.hyPlayer.off(HYPlayer.Events.ANCHOR_STOP,this.onAnchorStopBind),this.hyPlayer.off(HYPlayer.Events.PLAY_STATUS,this.onPlayStatusBind),this.hyPlayer.off(HYPlayer.Events.PLAY_TIME_STATUS,this.onPlayTimeStatusBind),this.hyPlayer.off(HYPlayer.Events.DATA_METRIC2,this.onPlayDataMeteric2Bind),this.hyPlayer.off(HYPlayer.Events.PLAY_DOWNLINK_INFO,this.onPlayDownLinkInfoBind),this.hyPlayer.off(HYPlayer.Events.FLV_URL_UNAVAILABLE,this.onLinkUavailableBind),this.hyPlayer.off(HYPlayer.Events.FLV_URL_LOAD_TIMEOUT,this.onLinkTimeoutBind),this.hyPlayer.off(HYPlayer.Events.HLS_URL_UNAVAILABLE,this.onLinkUavailableBind),this.hyPlayer.off(HYPlayer.Events.HLS_URL_LOAD_TIMEOUT,this.onLinkTimeoutBind),this.hyPlayer.off(HYPlayer.Events.HLS_MAINFEST_LOAD_TIMEOUT,this.onLoadTimeoutBind),this.hyPlayer.off(HYPlayer.Events.H5_PLAYER_ERROR,this.onPlayerErrorBind),this.hyPlayer.off(HYPlayer.Events.NO_DATA_RECEIVED,this.onNoDataReceivedBind),this.hyPlayer.off(HYPlayer.Events.VIDEO_LINK_CLOSE,this.onCloseBind),this.hyPlayer.off(HYPlayer.Events.REPLAY_VIDEO,this.onReplayVideoBind),this.hyPlayer.off(HYPlayer.Events.RECV_VIDEO_FRAME,this.onRecvVideoFramesBind),this.hyPlayer.off(HYPlayer.Events.PLAY_FRAME_BUFFER,this.onUpdateFrameBufferBind),this.hyPlayer.off(HYPlayer.Events.METADATA,this.onMetaDataBind),this.hyPlayer.off(HYPlayer.Events.SWITCH_DONE,this.onSwitchDoneBind),this.hyPlayer.off(HYPlayer.Events.UPDATE_INTERSITY,this.onUpdateIntersityBind),this.hyPlayer.off(HYPlayer.Events.PAUSE_5SEC_ERROR,this.onPause5SecBind),this.hyPlayer.off(HYPlayer.Events.NEED_UPDATE_M3U8,this.onNeedUpdateM3u8Bind),this.hyPlayer.off(HYPlayer.Events.PLAYBACK_M3U8_UPDATED,this.onPlaybackM3u8UpdatedBind),this.hyPlayer.off(HYPlayer.Events.M3U8_PLAY_ENDED,this.onStopVideoBind),this.hyPlayer.off(HYPlayer.Events.SEI_INFO,this.onSeiInfoBind),this.hyPlayer.stop(),this.hyPlayer=null)}},{key:"removeElEventListeners",value:function(){this.el_&&(this.el_.removeEventListener("waiting",this.onVideoPauseBind),this.el_.removeEventListener("playing",this.onVideoStartBind),this.el_.removeEventListener("loadstart",this.onVideoStartLoadBind))}},{key:"reset",value:function(){this.handler=null,this.removeHyPlayerEventListeners(),this.removeElEventListeners()}},{key:"play",value:function(){this.hyPlayer&&this.hyPlayer.play()}},{key:"pause",value:function(){this.hyPlayer&&this.hyPlayer.pause()}},{key:"stop",value:function(){this.reset()}},{key:"setCurrentTime",value:function(t){this.hyPlayer&&this.hyPlayer.seek(t)}},{key:"updateLiveVodUrl",value:function(t){this.hyPlayer&&this.hyPlayer.updateLiveVodUrl(t)}},{key:"getPlayStats",value:function(){return this.hyPlayer&&this.hyPlayer.getPlayStats?this.hyPlayer.getPlayStats():null}},{key:"getCurrentTime",value:function(){return this.hyPlayer?this.hyPlayer.getCurrentTime():this.el_?this.el_.currentTime:0}},{key:"getDurationTime",value:function(){return this.hyPlayer?this.hyPlayer.getDurationTime():this.el_?this.el_.duration:0}},{key:"setVolume",value:function(t){this.hyPlayer&&this.hyPlayer.setVolume(t)}},{key:"getLog",value:function(){return this.hyPlayer?this.hyPlayer.getLog():""}},{key:"setPlayerConfig",value:function(t){this.playerConfig=t,this.hyPlayer&&this.hyPlayer.setNimoConfig(this.playerConfig)}},{key:"sendDanmuMetric",value:function(t,e,i){}},{key:"dispose",value:function(){this.stop()}},{key:"switchLevel",value:function(t){this.hyPlayer&&this.hyPlayer.switchLevel(t)}},{key:"getCdnSip",value:function(){if(this.hyPlayer&&this.hyPlayer.getCdnSip)return this.hyPlayer.getCdnSip()}},{key:"isPlaying",get:function(){return this.hyPlayer&&this.hyPlayer.player&&this.hyPlayer.player.isPlaying}}]),t}();e.default=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=m(i(90)),r=m(i(223)),o=m(i(70)),a=m(i(1)),s=m(i(3)),u=m(i(224)),c=m(i(51)),l=m(i(39)),h=m(i(17)),d=m(i(21)),f=m(i(22)),p=m(i(73));function m(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(){(0,a.default)(this,t),this.uid=Number((Date.now()%1e10*1e3+(1e3*Math.random()|0))%4294967295),this._wsTime="",this._fm="",this._params=[],this._sAnticode="",this._sStreamName="",this._invalidTime=o.default,this._nextRefreshTime=o.default,this._req=new l.default.GetAntiCodeForStreamReq}return(0,s.default)(t,[{key:"stop",value:function(){f.default.remove(this.onCheckTimer,this)}},{key:"init",value:function(t,e){this._sStreamName!==t&&(this._sStreamName=t,this._req&&(this._req.sStreamName=t),this.parseAnticode(e)),f.default.add(this.onCheckTimer,this,1e3)}},{key:"parseAnticode",value:function(t){var e=this;this._fm="",this._wsTime="",this._params=[],this._sAnticode=t,t.split("&").forEach((function(t){var i=t.split("="),n=(0,r.default)(i,2),o=n[0],a=n[1];if("fm"===o)a=decodeURI(a),a=unescape(a),a=atob(a),e._fm=a;else if("wsTime"===o){e._wsTime=a;var s=1e3*parseInt(a,16)+3e5;e._invalidTime=c.default.now()+(s-Date.now()),e._nextRefreshTime=e._invalidTime-3e4}else"wsSecret"!==o&&e._params.push(t)}))}},{key:"isInvalid",value:function(t){return t>this._invalidTime}},{key:"getAnticode",value:function(){if(""===this._fm)return this._sAnticode;var t=this.uid+Date.now(),e=this._fm.replace("$0",this.uid).replace("$1",this._sStreamName).replace("$2",t+"").replace("$3",this._wsTime),i="wsSecret="+(0,u.default)(e)+"&wsTime="+this._wsTime+"&seqid="+t;return this._params.length>0&&(i+="&"+this._params.join("&")),i+"&u="+this.uid+"&t=110&sv=2206131428"}},{key:"onCheckTimer",value:function(t,e){t>=this._nextRefreshTime&&this.getToken()}},{key:"valid",value:function(){var t=this;return new n.default((function(e){t.isInvalid(c.default.now())?t.getToken().then(e):e()}))}},{key:"getToken",value:function(){var t=this;return new n.default((function(e){t._nextRefreshTime=o.default,t._req.tId=h.default.getMediaUserId(),d.default.sendWup(p.default.MEDIAUISEA,"getAntiCodeForStream",t._req,(function(i){i.sStreamName===t._sStreamName&&t.parseAnticode(i.sAntiCode),e()}))}))}}]),t}();e.default=y},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(98)),r=o(i(47));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,u=(0,r.default)(t);!(n=(s=u.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,i){"use strict";function n(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function r(t,e,i,r,o,a){return n((s=n(n(e,t),n(r,a)))<<(u=o)|s>>>32-u,i);var s,u}function o(t,e,i,n,o,a,s){return r(e&i|~e&n,t,e,o,a,s)}function a(t,e,i,n,o,a,s){return r(e&n|i&~n,t,e,o,a,s)}function s(t,e,i,n,o,a,s){return r(e^i^n,t,e,o,a,s)}function u(t,e,i,n,o,a,s){return r(i^(e|~n),t,e,o,a,s)}function c(t,e){var i,r,c,l,h;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var d=1732584193,f=-271733879,p=-1732584194,m=271733878;for(i=0;i<t.length;i+=16)r=d,c=f,l=p,h=m,d=o(d,f,p,m,t[i],7,-680876936),m=o(m,d,f,p,t[i+1],12,-389564586),p=o(p,m,d,f,t[i+2],17,606105819),f=o(f,p,m,d,t[i+3],22,-1044525330),d=o(d,f,p,m,t[i+4],7,-176418897),m=o(m,d,f,p,t[i+5],12,1200080426),p=o(p,m,d,f,t[i+6],17,-1473231341),f=o(f,p,m,d,t[i+7],22,-45705983),d=o(d,f,p,m,t[i+8],7,1770035416),m=o(m,d,f,p,t[i+9],12,-1958414417),p=o(p,m,d,f,t[i+10],17,-42063),f=o(f,p,m,d,t[i+11],22,-1990404162),d=o(d,f,p,m,t[i+12],7,1804603682),m=o(m,d,f,p,t[i+13],12,-40341101),p=o(p,m,d,f,t[i+14],17,-1502002290),d=a(d,f=o(f,p,m,d,t[i+15],22,1236535329),p,m,t[i+1],5,-165796510),m=a(m,d,f,p,t[i+6],9,-1069501632),p=a(p,m,d,f,t[i+11],14,643717713),f=a(f,p,m,d,t[i],20,-373897302),d=a(d,f,p,m,t[i+5],5,-701558691),m=a(m,d,f,p,t[i+10],9,38016083),p=a(p,m,d,f,t[i+15],14,-660478335),f=a(f,p,m,d,t[i+4],20,-405537848),d=a(d,f,p,m,t[i+9],5,568446438),m=a(m,d,f,p,t[i+14],9,-1019803690),p=a(p,m,d,f,t[i+3],14,-187363961),f=a(f,p,m,d,t[i+8],20,1163531501),d=a(d,f,p,m,t[i+13],5,-1444681467),m=a(m,d,f,p,t[i+2],9,-51403784),p=a(p,m,d,f,t[i+7],14,1735328473),d=s(d,f=a(f,p,m,d,t[i+12],20,-1926607734),p,m,t[i+5],4,-378558),m=s(m,d,f,p,t[i+8],11,-2022574463),p=s(p,m,d,f,t[i+11],16,1839030562),f=s(f,p,m,d,t[i+14],23,-35309556),d=s(d,f,p,m,t[i+1],4,-1530992060),m=s(m,d,f,p,t[i+4],11,1272893353),p=s(p,m,d,f,t[i+7],16,-155497632),f=s(f,p,m,d,t[i+10],23,-1094730640),d=s(d,f,p,m,t[i+13],4,681279174),m=s(m,d,f,p,t[i],11,-358537222),p=s(p,m,d,f,t[i+3],16,-722521979),f=s(f,p,m,d,t[i+6],23,76029189),d=s(d,f,p,m,t[i+9],4,-640364487),m=s(m,d,f,p,t[i+12],11,-421815835),p=s(p,m,d,f,t[i+15],16,530742520),d=u(d,f=s(f,p,m,d,t[i+2],23,-995338651),p,m,t[i],6,-198630844),m=u(m,d,f,p,t[i+7],10,1126891415),p=u(p,m,d,f,t[i+14],15,-1416354905),f=u(f,p,m,d,t[i+5],21,-57434055),d=u(d,f,p,m,t[i+12],6,1700485571),m=u(m,d,f,p,t[i+3],10,-1894986606),p=u(p,m,d,f,t[i+10],15,-1051523),f=u(f,p,m,d,t[i+1],21,-2054922799),d=u(d,f,p,m,t[i+8],6,1873313359),m=u(m,d,f,p,t[i+15],10,-30611744),p=u(p,m,d,f,t[i+6],15,-1560198380),f=u(f,p,m,d,t[i+13],21,1309151649),d=u(d,f,p,m,t[i+4],6,-145523070),m=u(m,d,f,p,t[i+11],10,-1120210379),p=u(p,m,d,f,t[i+2],15,718787259),f=u(f,p,m,d,t[i+9],21,-343485551),d=n(d,r),f=n(f,c),p=n(p,l),m=n(m,h);return[d,f,p,m]}function l(t){var e,i="",n=32*t.length;for(e=0;e<n;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function h(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;e<i.length;e+=1)i[e]=0;var n=8*t.length;for(e=0;e<n;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function d(t){var e,i,n="";for(i=0;i<t.length;i+=1)e=t.charCodeAt(i),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n}function f(t){return unescape(encodeURIComponent(t))}function p(t){return function(t){return l(c(h(t),8*t.length))}(f(t))}function m(t,e){return function(t,e){var i,n,r=h(t),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=c(r,8*t.length)),i=0;i<16;i+=1)o[i]=909522486^r[i],a[i]=1549556828^r[i];return n=c(o.concat(h(e)),512+8*e.length),l(c(a.concat(n),640))}(f(t),f(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){return e?i?m(e,t):d(m(e,t)):i?p(t):d(p(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={isCanUse:function(t,e,i,n){var r=this.isCanUseAll(t,i,n);return r=this.isCanUseRoom(r,t,e,i,n)},isCanUseAll:function(t,e,i){var n=1==t.use_p2p;return n=this.isCanUseProperty(n,t.p2pLines,e),this.isCanUseProperty(n,t.p2pRates,i)},isCanUseRoom:function(t,e,i,n,r){var o=e.p2pRoomIds;if(o)for(var a=o.length,s=0;s<a;s++){var u=o[s];if(u[0]==i){t=1==u[1];var c=u[2];c&&(t=this.isCanUseProperty(t,c.lines,n),t=this.isCanUseProperty(t,c.rates,r))}}return t},isCanUseProperty:function(t,e,i){if(e)for(var n=e.length,r=0;r<n;r++){var o=e[r];if(o[0]==i){t=1==o[1];break}}return t}}}]).default},"object"==s(e)&&"object"==s(t)?t.exports=a():(r=[],void 0===(o="function"===typeof(n=a)?n.apply(e,r):n)||(t.exports=o))}).call(this,i("YuTi")(t))},"0Cz8":function(t,e,i){var n=i("Xi7e"),r=i("ebwN"),o=i("e4Nc");t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!r||a.length<199)return a.push([t,e]),this.size=++i.size,this;i=this.__data__=new o(a)}return i.set(t,e),this.size=i.size,this}},"0XuU":function(t,e,i){t.exports=i("43KI").Transform},"0k09":function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return a}));var n=i("tdpk"),r=function(t){n.a.report(n.a._formatReportObj("sys/show/loginguide/videoplayer","直播间播放器登录引导展示",{trigger_:t}))},o=function(t){n.a.report(n.a._formatReportObj("usr/click/download/loginguide","直播间播放器登录引导-点击下载",{trigger_:t}))},a=function(t){n.a.report(n.a._formatReportObj("usr/click/login/loginguide","直播间播放器登录引导-点击登录",{trigger_:t}))}},"0sh+":function(t,e,i){t.exports=i("4KFe")(125)},"0ycA":function(t,e){t.exports=function(){return[]}},"0zF6":function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div id="nimo-room-recommend" class="'+(null==(__t=className)?"":__t)+'">\n  '+(null==(__t=__webpack_require__("9Q1T")())?"":__t)+'\n  <ul class="n-fx-grid-300">\n    ',[1,2,3].forEach((function(t){__p+="\n    <li>\n      "+(null==(__t=__webpack_require__("P3na")())?"":__t)+"\n    </li>\n    "})),__p+="\n  </ul>\n</div>\n";return __p}},1:function(t,e){},"1+5i":function(t,e,i){var n=i("w/wX"),r=i("sEf8"),o=i("mdPL"),a=o&&o.isSet,s=a?r(a):n;t.exports=s},"16Al":function(t,e,i){"use strict";var n=i("WbBG");function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},"17x9":function(t,e,i){t.exports=i("16Al")()},"1Alt":function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},"1DhJ":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.sAvatarBoxUrl="",this.sDynamicAvatarBoxUrl="",this.iScene=0});r.prototype._clone=function(){return new n.a.AvatarBox},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeString(0,this.sAvatarBoxUrl),t.writeString(1,this.sDynamicAvatarBoxUrl),t.writeInt32(2,this.iScene)},r.prototype.readFrom=function(t){this.sAvatarBoxUrl=t.readString(0,!1,this.sAvatarBoxUrl),this.sDynamicAvatarBoxUrl=t.readString(1,!1,this.sDynamicAvatarBoxUrl),this.iScene=t.readInt32(2,!1,this.iScene)},n.a.AvatarBox=r},"1IWx":function(t,e,i){t.exports=r;var n=i("+qE3").EventEmitter;function r(){n.call(this)}i("P7XM")(r,n),r.Readable=i("43KI"),r.Writable=i("LGOv"),r.Duplex=i("CWBI"),r.Transform=i("0XuU"),r.PassThrough=i("wq4j"),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",s),i.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"===typeof t.destroy&&t.destroy())}function c(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){i.removeListener("data",r),t.removeListener("drain",o),i.removeListener("end",s),i.removeListener("close",u),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",l),i.removeListener("close",l),t.removeListener("close",l)}return i.on("error",c),t.on("error",c),i.on("end",l),i.on("close",l),t.on("close",l),t.emit("pipe",i),t}},"1Nqh":function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=(0,r.default)(t);return{getItem:function(t){return new Promise((function(i,n){i(e.getItem(t))}))},setItem:function(t,i){return new Promise((function(n,r){n(e.setItem(t,i))}))},removeItem:function(t){return new Promise((function(i,n){i(e.removeItem(t))}))}}};var n,r=(n=i("ycJa"))&&n.__esModule?n:{default:n}},"1OyB":function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return n}))},"1hJj":function(t,e,i){var n=i("e4Nc"),r=i("ftKO"),o=i("3A9y");function a(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new n;++e<i;)this.add(t[e])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,t.exports=a},"2/Zn":function(t,e,i){"use strict";i.d(e,"f",(function(){return ut})),i.d(e,"g",(function(){return dt})),i.d(e,"b",(function(){return v})),i.d(e,"a",(function(){return _})),i.d(e,"c",(function(){return St})),i.d(e,"e",(function(){return bt})),i.d(e,"d",(function(){return Bt}));var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("lSNA"),u=i.n(s),c=i("RIqP"),l=i.n(c),h=i("J4zp"),d=i.n(h),f=i("nimoua"),p=i.n(f),m=i("KFtC"),y=i("w6NW"),v={JUMP_OUTER_BROWSER:990,POPUP_SHARE:991,FOLLOW_EVENT:992,SHOW_USER_INFO_DIALOG:993,GET_LIVE_ROOM_INFO:994,POPUP_LOGIN:995,JUMP_TO_LIVE_ROOM:996,SHOW_TOAST:997,REGISTER_SOCKET_MSG:998,UNREGISTER_SOCKET_MSG:999,OPEN_ACTIVITY_MODAL:1e3,RESIZE_WEB_VIEW:1001,OPEN_ROOM_GIFT_PANEL:1002,REGISTER_BUSINESS_MSG:1003,SET_BUSINESS_MSG_CALLBACK:1004,UNREGISTER_BUSINESS_MSG:1005,POPUP_JOIN_FANS_MODAL:1008,POPUP_PAID_SUBSCRIPTION_MODAL:1009,CLOSE_ACTIVITY_MODAL:1010,SUBSCRIBE_TOPIC:1011,UNSUBSCRIBE_TOPIC:1012,UPDATE_ACCOUNT_BALANCE:1013,OPEN_FINAL_BOX:1014,HOIST_EMBED_INFO:1015,OPEN_FANS_BOX:1016,CLOSE_SELF:1017,OPEN_RAMADAN_BOX:1018,OPEN_WEEK_STAR_ACTIVITY_MODAL:1019,DISPATCH_PLAYER_EVENT:10001},g=Object.keys(v).map((function(t){return[v[t],Object(y.j)(t)]})),_={SYNC_ROOM_INFO:2e3,SYNC_MODAL_VISIBILITY:2001,INVOKE_PLAYER_PLAY:3001,INVOKE_PLAYER_PAUSE:3002,INVOKE_PLAYER_GET_PLAYER_STATE:3003,INVOKE_PLAYER_MUTED:3004},S=[v.HOIST_EMBED_INFO],w=(i("I5cv"),i("cDf5")),b=i.n(w),I=i("PJYZ"),T=i.n(I),P=i("7W2i"),E=i.n(P),k=i("a1gu"),R=i.n(k),C=i("Nsbk"),O=i.n(C),A=i("RA07"),L=i("jKdo"),N=i("xB+L"),M=i("iWIM"),U=i.n(M),D=i("+qE3"),B=i.n(D),F=i("cOjp"),x={};var j=function(t,e){e&&(x[t]=e)},V=function(t){return!!{}.hasOwnProperty.call(x,t)&&x[t]},G=function(t){return!!{}.hasOwnProperty.call(x,t)&&(x[t]=null,delete x[t],!0)};function H(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O()(t);if(e){var r=O()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return R()(this,i)}}var W=function(t){E()(i,t);var e=H(i);function i(){var t;return r()(this,i),t=e.call(this),u()(T()(t),"clientType",""),u()(T()(t),"initialized",!1),u()(T()(t),"_logger",null),t.initAPI(),t}return a()(i,[{key:"initAPI",value:function(){var t=this;if("function"!==typeof this._sendBizMsg)throw new ReferenceError("`this._sendBizMsg` is not a function.");g.forEach((function(e){var i=e||[],n=d()(i,2),r=n[0],o=n[1];"undefined"===typeof t[o]&&(t[o]=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t._sendBizMsg.apply(t,[r].concat(i))})}))}},{key:"on",value:function(t,e,n){var r;return"function"===typeof n?(this._addUnpacker(t,e),r=n):"function"===typeof e&&(r=e),r&&U()(O()(i.prototype),"on",this).call(this,t,r),this}},{key:"off",value:function(t,e){return"function"===typeof e&&(U()(O()(i.prototype),"off",this).call(this,t,e),0===this.listenerCount(t)&&this._removeUnpacker(t)),this}},{key:"createLogger",value:function(){return new F.a({prefix:"nm-messenger".concat(this.clientType?"--".concat(this.clientType):"")})}},{key:"_addUnpacker",value:function(t,e){j(t,e)}},{key:"_removeUnpacker",value:function(t){G(t)}}]),i}(B.a);function q(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O()(t);if(e){var r=O()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return R()(this,i)}}var K=function(t){E()(i,t);var e=q(i);function i(t){var n;return r()(this,i),n=e.call(this,t),u()(T()(n),"_msgCallback",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=d()(t,2),i=e[0],r=e[1],o=Object(A.a)("data:text/plain;base64,".concat(r));Object(L.c)(o).then((function(t){var e=V(i);return Object(L.d)(t,e,i)})).then((function(t){n._logger.success("[msgCallback]",i,t),n.emit(i,Object(A.f)(i,t))})).catch((function(t){n._logger.error("[msgCallback]",t)}))})),u()(T()(n),"_protocolCallback",(function(t){var e=d()(t,2),i=e[0],r=e[1];n._logger.success("[msgCallback]",i,r);var o=Object(A.b)("data:text/plain;base64,".concat(r));try{var a=JSON.parse(o);n._logger.success("[msgCallback]",i,a),n.emit(i,a)}catch(s){n._logger.err("[msgCallback]",i,r)}})),u()(T()(n),"_businessMsgCallback",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.msgCallback,i=function(t){var i=t||[],r=d()(i,2),o=r[0],a=r[1],s=Object(A.b)("data:text/plain;base64,".concat(a));n._logger.log("[msgCallback]",o,a,b()(s),s);try{var u=JSON.parse(s);"function"===typeof e&&e([o,u])}catch(c){n._logger.err(c)}};Object(N.setBusinessMsgCallback)({msgCallback:i})})),n.clientType="webview",n._logger=n.createLogger(),n._timer=null,n.init(),n}return a()(i,[{key:"init",value:function(){var t=this;this.initialized||this._timer||(this._timer=setTimeout((function(){Object(N.setSocketMsgCallback)({msgCallback:t._msgCallback,protocolCallback:t._protocolCallback}),t.initialized=!0}),200))}},{key:"_sendBizMsg",value:function(t,e){switch(t){case v.REGISTER_SOCKET_MSG:Object(N.registerSocketMsg)(e);break;case v.UNREGISTER_SOCKET_MSG:Object(N.unregisterSocketMsg)(e);break;case v.SHOW_TOAST:Object(N.showToastByApp)(e);break;case v.JUMP_TO_LIVE_ROOM:Object(N.jumpToLiveRoom)(e);break;case v.POPUP_LOGIN:Object(N.toastLoginBoxByApp)(e);break;case v.REGISTER_BUSINESS_MSG:Object(N.registerBusinessMsg)(e);break;case v.UNREGISTER_BUSINESS_MSG:Object(N.unregisterBusinessMsg)(e);break;case v.SET_BUSINESS_MSG_CALLBACK:this._businessMsgCallback(e);break;case v.GET_LIVE_ROOM_INFO:var i=(e||{}).successCallback;Object(N.getLiveroomInfo)(e).then(i);break;case v.SHOW_USER_INFO_DIALOG:Object(N.showUserInfoDialog)(e);break;case v.POPUP_JOIN_FANS_MODAL:Object(N.popupJoinFansModal)(e);break;case v.POPUP_PAID_SUBSCRIPTION_MODAL:Object(N.popupPaidSubscriptionModal)(e);break;case v.FOLLOW_EVENT:Object(N.followEvent)(e);break;case v.SUBSCRIBE_TOPIC:Object(N.subscribeTopic)(e);break;case v.UNSUBSCRIBE_TOPIC:Object(N.unsubscribeTopic)(e);break;case v.POPUP_SHARE:Object(N.toastShareBoxByApp)(e);break;case v.JUMP_OUTER_BROWSER:Object(N.jumpToOuterBrowser)(e);break;case v.UPDATE_ACCOUNT_BALANCE:break;case v.CLOSE_SELF:Object(N.closeWebView)();break;default:Object(N.sendBussinessMsg)(t,e)}}}]),i}(W),Y=i("QILm"),z=i.n(Y),J=i("Wwog"),Q=i("p1oI"),X=["https://www.nimo.tv","https://article.nimo.tv","https://m.nimo.tv","https://dashboard.nimo.tv","https://eadmin.nimo.tv"],Z=function(){if(location.ancestorOrigins&&location.ancestorOrigins.length>0)return location.ancestorOrigins[0];var t=document.referrer;if(t){var e=/^\w+:\/\/[^/?#]+/.exec(t);if(e)return e[0]}return""},$=["type","_uuid"];function tt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function et(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function it(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O()(t);if(e){var r=O()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return R()(this,i)}}var nt=function(t){E()(i,t);var e=it(i);function i(t){var n;r()(this,i),n=e.call(this,t),u()(T()(n),"getUrlParams",Object(J.a)((function(t){return Object(Q.a)(t,window.location.search)}))),u()(T()(n),"_handleMessage",(function(t){var e=(t||{}).data||{},i=e.type,r=e._uuid,o=z()(e,$);if(r===n._uuid)switch(i){case"taf_msg":n._msgCallback(o);break;case"java_msg":n._protocolCallback(o);break;case"biz_msg":n._bizCallback(o);break;case"biz_func":n._callBizFunc(o)}})),n.clientType="iframe",n._logger=n.createLogger(),n._uuid=n.getUrlParams("_uuid"),n.init(),n._callbackParams={},n._callback_prefix="i_".concat(Math.random().toString(32).slice(2,10)),n._fId=0;var o=window.top!==window?Z():"";return n._parentOrigin=o&&X.includes(o)?o:"",n}return a()(i,[{key:"getCallbackId",value:function(){return this._fId+=1,"".concat(this._callback_prefix,"_").concat(this._fId)}},{key:"init",value:function(){this.initialized=!0,window.addEventListener("message",this._handleMessage)}},{key:"_sendBizMsg",value:function(t,e){switch(t){case v.SET_BUSINESS_MSG_CALLBACK:var i=this.getCallbackId();this._registerCallback({callbackId:i,callback:e.msgCallback,messageId:t,once:!1}),this._sendBizMsgToParentWithCallback(t,{msgCallback:i});break;case v.GET_LIVE_ROOM_INFO:var n=this.getCallbackId();this._registerCallback({callbackId:n,callback:e.successCallback,messageId:t}),this._sendBizMsgToParentWithCallback(t,{successCallback:n});break;case v.POPUP_PAID_SUBSCRIPTION_MODAL:window.parent.postMessage({messageId:t,_uuid:this._uuid},"*");break;case v.POPUP_SHARE:var r=this.getCallbackId();this._registerCallback({callbackId:r,callback:e.platformCallback,messageId:t}),this._sendBizMsgToParentWithCallback(t,et(et({},e),{},{platformCallback:r}));break;case v.POPUP_JOIN_FANS_MODAL:var o=this.getCallbackId();this._registerCallback({callbackId:o,callback:e.clickJoinCallback,messageId:t}),this._sendBizMsgToParentWithCallback(t,{clickJoinCallback:o});break;default:this._sendBizMsgToParent(t,e)}}},{key:"_msgCallback",value:function(t){var e=this,i=t||{},n=i.uri,r=i.data,o=V(n);o&&Object(L.d)(r,o,n).then((function(t){e._logger.success("[msgCallback]",t),e.emit(n,Object(A.f)(n,t))})).catch((function(t){e._logger.error("[msgCallback]",t)}))}},{key:"_protocolCallback",value:function(t){var e=t||{},i=e.sProtocolName,n=e.data;this._logger.success("[protocolCallback]",i,n),this.emit(i,n)}},{key:"_bizCallback",value:function(t){var e=t||{},i=e.messageId,n=e.data;this._logger.success("[bizCallback]",i,n),this.emit("business_message",t)}},{key:"_sendBizMsgToParent",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.callbackType;if(window.parent&&"function"===typeof window.parent.postMessage){var r={messageId:t,data:e,_uuid:this._uuid};n&&(r.callbackType=n);var o=S.includes(t);o?this._parentOrigin&&window.parent.postMessage(r,this._parentOrigin):window.parent.postMessage(r,"*")}}},{key:"_sendBizMsgToParentWithCallback",value:function(t,e){this._sendBizMsgToParent(t,e,{callbackType:"postMessage"})}},{key:"_registerCallback",value:function(t){var e=t.callbackId,i=t.callback;window[e]=i,this._callbackParams[e]=t}},{key:"_unregisterCallback",value:function(t){delete window[t],delete this._callbackParams[t]}},{key:"_callBizFunc",value:function(t){var e=t.callbackId,i=t.args;if(Object.prototype.hasOwnProperty.call(this._callbackParams,e)){var n=this._callbackParams[e];if(n){var r=n.callback,o=n.once,a=void 0===o||o,s=n.messageId;if("function"===typeof r&&(void 0===i||Array.isArray(i))){try{void 0===i?r():r.apply(void 0,l()(i)),this._logger.success("[biz_func]",s,e,i)}catch(h){var u,c;"function"===typeof(null===(u=window)||void 0===u||null===(c=u.Sentry)||void 0===c?void 0:c.captureException)&&window.Sentry.captureException(h),this._logger.error("[biz_func]",s,e,i,h)}a&&this._unregisterCallback(e)}}}}}]),i}(W);function rt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O()(t);if(e){var r=O()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return R()(this,i)}}var ot=function(t){E()(i,t);var e=rt(i);function i(t){var n;return r()(this,i),n=e.call(this,t),u()(T()(n),"_messengerPhone",void 0),u()(T()(n),"handleMessengerPhoneCall",(function(t){var e=t||{},i=e.type,r=e.data;switch(i){case"taf_msg":n._msgCallback(r);break;case"java_msg":n._protocolCallback(r);break;case"biz_msg":n._bizCallback(r)}})),n.clientType="web",n._logger=n.createLogger(),n}return a()(i,[{key:"messengerPhone",get:function(){if(this._messengerPhone)return this._messengerPhone;throw new ReferenceError("[messengerPhone] is undefined.")},set:function(t){if(!t)throw new ReferenceError("[messengerPhone] is undefined.");this._messengerPhone=t}},{key:"init",value:function(){this.messengerPhone.on("incomingCall",this.handleMessengerPhoneCall)}},{key:"dispose",value:function(){this.messengerPhone.off("incomingCall",this.handleMessengerPhoneCall)}},{key:"_sendBizMsg",value:function(t,e){this.messengerPhone.emit("message",{messageId:t,data:e})}},{key:"_msgCallback",value:function(t){var e=t||{},i=e.uri,n=e.data;this.emit(i,Object(A.f)(i,n))}},{key:"_protocolCallback",value:function(t){var e=t||{},i=e.sProtocolName,n=e.data;this._logger.success("[protocolCallback]",i,n),this.emit(i,n)}},{key:"_bizCallback",value:function(t){var e=t||[],i=d()(e,2),n=i[0],r=i[1];this._logger.success("[bizCallback]",n,r),this.emit("business_message",[n,r])}}]),i}(W),at=function(){function t(){r()(this,t),u()(this,"messenger",null),this.messenger=t.createMessenger(),this._logger=this.messenger.createLogger(),this.initAPI()}return a()(t,[{key:"eMessageName",get:function(){return g.map((function(t){return d()(t,2)[1]}))}},{key:"eBusinessMessageId",get:function(){return _}},{key:"initAPI",value:function(){var t=this;["init","on","off","emit"].concat(l()(this.eMessageName)).forEach((function(e){"undefined"===typeof t[e]&&(t[e]=function(){var i;return(i=t.messenger)[e].apply(i,arguments)})}))}},{key:"setMessengerPhone",value:function(t){this.messenger.messengerPhone=t}}],[{key:"createInstance",value:function(){return new t}},{key:"createMessenger",value:function(){return p.a.isInNimoApp?new K:Object(m.v)()?new nt:new ot}}]),t}(),st=function(){function t(){r()(this,t)}return a()(t,null,[{key:"getInstance",value:function(){return null===t._instance&&(t._instance=at.createInstance()),t._instance}}]),t}();u()(st,"_instance",null);var ut=st,ct=i("4TRz");function lt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var ht=ct.a.EUriJServerPacket,dt=function(){function t(e){r()(this,t),u()(this,"_messenger",void 0),this.defaults=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):lt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e)}return a()(t,[{key:"messenger",get:function(){if(this._messenger)return this._messenger;throw new ReferenceError("[messenger] is undefined.")},set:function(t){this._messenger=t}},{key:"on",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.isProtocol,r=i.version,o=void 0===r?1:r;if(n)return 2===o?this.onProtocol(t,e):this.messenger.on(t,e);var a=this._getBroadcast(t),s=a||[],u=d()(s,2),c=u[0],l=u[1];return this.messenger.on(c,l,e)}},{key:"onProtocol",value:function(t,e){var i=this,n=this._getBroadcast(t)||[],r=d()(n,2),o=r[0],a=r[1],s=function(t){var i,n=(t||{}).sData;try{i=JSON.parse(n)}catch(r){console.warn(r)}i&&"function"===typeof e&&e(i)};return this.messenger.on(o,a,s),function(){i.messenger.off(t,s)}}},{key:"off",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.isProtocol;if(n)return this.messenger.off(t,e);var r=this._getBroadcast(t),o=r||[],a=d()(o,1),s=a[0];return this.messenger.off(s,e)}},{key:"registerSocketMsg",value:function(t){var e=this._covertParams(t);this.messenger.registerSocketMsg(e)}},{key:"unregisterSocketMsg",value:function(t){var e=this._covertParams(t);this.messenger.unregisterSocketMsg(e)}},{key:"register",value:function(){var t=this,e=this.defaults.broadcasts;return e&&this.registerSocketMsg({ids:Object.keys(e)}),function(){t.unregister()}}},{key:"unregister",value:function(){var t=this.defaults.broadcasts;t&&this.unregisterSocketMsg({ids:Object.keys(t)})}},{key:"_covertParams",value:function(t){var e=t||{},i=e.ids,n=void 0===i?[]:i,r=e.protocols,o=void 0===r?[]:r,a=this._convertIds(n),s=o,u={};return o.length>0&&!p.a.isInNimoApp&&a.push(ht),a.length>0&&(u.ids=a),s.length>0&&(u.protocols=s),u}},{key:"_convertIds",value:function(t){for(var e=[];t.length>0;){var i=t.shift(),n=this._getBroadcast(i)||[],r=d()(n,1)[0];r&&e.push(r)}return e}},{key:"_getBroadcast",value:function(t){var e=this.defaults.broadcasts,i=(void 0===e?{}:e)[t];if(void 0===i)throw new TypeError("the broadcast [".concat(t,"] is not found."));return i}}]),t}(),ft=i("Kw0i"),pt=i("USXb"),mt=["sData"];function yt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function vt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):yt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function gt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O()(t);if(e){var r=O()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return R()(this,i)}}var _t=ct.a.EUriJServerPacket,St=function(t){E()(i,t);var e=gt(i);function i(){var t;return r()(this,i),t=e.call(this),u()(T()(t),"_uriQueue",[]),u()(T()(t),"_protocolQueue",[]),u()(T()(t),"_eventListenerCount",0),u()(T()(t),"_bizMsgQueue",[]),u()(T()(t),"_bizMsgEventListenerCount",0),u()(T()(t),"handleReceiveTafMsg",(function(e){var i=Object(A.c)(e.uri);t._uriQueue.indexOf(i)>-1&&(i===_t?t.sendJavaMsg(vt(vt({},e),{},{uri:i})):t.sendTafMsg(vt(vt({},e),{},{uri:i})))})),u()(T()(t),"handleBizMsg",(function(e){t.emit("business_message",{type:"biz_msg",data:e})})),t._logger=new F.a({prefix:"nm-interphone"}),t}return a()(i,[{key:"dispose",value:function(){ft.b.off(ft.a.TAF_MESSAGE_RECEIVE,this.handleReceiveTafMsg),ft.b.off(ft.a.GLOBAL_BUSINESS_MESSAGE,this.handleBizMsg),this._uriQueue=null,this._protocolQueue=null,this._eventListenerCount=null,this._bizMsgQueue=null,this._bizMsgEventListenerCount=null}},{key:"registerSocketMsg",value:function(t){var e=this,i=t||{},n=i.ids,r=void 0===n?[]:n,o=i.protocols,a=void 0===o?[]:o;r.forEach((function(t){-1===e._uriQueue.indexOf(t)&&e._uriQueue.push(t)})),a.forEach((function(t){-1===e._protocolQueue.indexOf(t)&&e._protocolQueue.push(t)}))}},{key:"unregisterSocketMsg",value:function(t){var e=t||{},i=e.ids,n=void 0===i?[]:i,r=e.protocols,o=void 0===r?[]:r;if(Array.isArray(n)&&n.length>0){for(var a=[],s=this._uriQueue.length,u=0;u<s;u++){var c=this._uriQueue[u];-1===n.indexOf(c)&&a.push(c)}this._uriQueue=a}Array.isArray(o)&&o.length>0&&(this._protocolQueue=this._protocolQueue.filter((function(t){return-1===o.indexOf(t)})))}},{key:"registerBusinessMsg",value:function(t){var e=this,i=(t||{}).ids;(void 0===i?[]:i).forEach((function(t){-1===e._bizMsgQueue.indexOf(t)&&e._bizMsgQueue.push(t)}))}},{key:"unregisterBusinessMsg",value:function(t){var e=(t||{}).ids,i=void 0===e?[]:e;Array.isArray(i)&&i.length>0&&(this._uriQueue=this._uriQueue.filter((function(t){return-1===i.indexOf(t)})))}},{key:"on",value:function(t,e){U()(O()(i.prototype),"on",this).call(this,t,e),"message"===t&&!this._eventListenerCount&&(this._uriQueue.length>0||this._protocolQueue.length>0)&&(ft.b.on(ft.a.TAF_MESSAGE_RECEIVE,this.handleReceiveTafMsg),this._eventListenerCount+=1),"business_message"===t&&!this._bizMsgEventListenerCount&&this._bizMsgQueue.length>0&&(ft.b.on(ft.a.GLOBAL_BUSINESS_MESSAGE,this.handleBizMsg),this._bizMsgEventListenerCount+=1)}},{key:"off",value:function(t,e){U()(O()(i.prototype),"off",this).call(this,t,e),"message"===t&&this._eventListenerCount&&0===this._uriQueue.length&&0===this._protocolQueue.length&&(ft.b.off(ft.a.TAF_MESSAGE_RECEIVE,this.handleReceiveTafMsg),this._eventListenerCount-=1),"business_message"===t&&this._bizMsgEventListenerCount&&0===this._bizMsgQueue.length&&(ft.b.off(ft.a.GLOBAL_BUSINESS_MESSAGE,this.handleBizMsg),this._bizMsgEventListenerCount-=1)}},{key:"sendTafMsg",value:function(t){var e=this,i=t||{},n=i.uri,r=i.data;if(this._uriQueue.indexOf(n)>-1){var o=V(n);o&&Object(L.d)(r,o,n).then((function(t){e._logger.success("[sendTafMsg]",t),e.emit("message",{type:"taf_msg",data:{uri:n,data:t}})})).catch((function(t){e._logger.error("[sendTafMsg]",t)}))}}},{key:"sendJavaMsg",value:function(t){var e=this,i=t||{},n=i.uri,r=i.data;Object(L.d)(r,pt.a,n).then((function(t){var i,n=t||{},r=n.sData,o=z()(n,mt),a=o.sProtocolName;try{i=JSON.parse(r),e._protocolQueue.indexOf(a)>-1&&e.emit("message",{type:"java_msg",data:vt(vt({},o),{},{data:i})})}catch(s){return Promise.reject(s)}}))}}]),i}(B.a);function wt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O()(t);if(e){var r=O()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return R()(this,i)}}var bt=function(t){E()(i,t);var e=wt(i);function i(){var t;r()(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),u()(T()(t),"_caller",void 0),t}return a()(i,[{key:"caller",get:function(){if(this._caller)return this._caller;throw new ReferenceError("[caller] is undefined.")},set:function(t){if("function"!==typeof t)throw new ReferenceError("[caller] is not a function.");this._caller=t}},{key:"dispose",value:function(){this.caller=null}},{key:"call",value:function(t,e){this.caller(t,e)}}]),i}(B.a),It=i("pVnL"),Tt=i.n(It),Pt=i("q1tI"),Et=i.n(Pt),kt=i("L7RH"),Rt=i("lhie"),Ct=i("wkQf"),Ot=i("CH3P"),At=i("mTTC"),Lt=i("Nxq2"),Nt=["url","target","iframeStyle","iframeProps"],Mt=["title","content","wrapClassName","width","closeIcon","className"];function Ut(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Dt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ut(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Bt=function(){function t(e){var i=this;r()(this,t),u()(this,"_globalModalInstance",null),u()(this,"messageEventAdded",{message:!1,business_message:!1}),u()(this,"closeActivityModal",(function(){i._closeGlobalModal()})),u()(this,"handleMessengerPhoneMessage",(function(e){var n=e.messageId,r=e.data;switch(n){case v.REGISTER_SOCKET_MSG:if(i.interphone.registerSocketMsg(r),i.messageEventAdded.message)return;i.messageEventAdded.message=!0,i.interphone.on("message",i.handleInterphoneMessage);break;case v.UNREGISTER_SOCKET_MSG:i.interphone.unregisterSocketMsg(r);break;case v.OPEN_ACTIVITY_MODAL:i.openActivityModal(r);break;case v.SHOW_TOAST:t.showToast(r);break;case v.JUMP_TO_LIVE_ROOM:t.jumpToLiveRoom(r);break;case v.POPUP_LOGIN:t.popupLogin(r);break;case v.REGISTER_BUSINESS_MSG:if(i.messageEventAdded.business_message)return;i.messageEventAdded.business_message=!0,i.interphone.registerBusinessMsg(r),i.interphone.on("business_message",i.handleInterphoneMessage);break;case v.UNREGISTER_BUSINESS_MSG:i.interphone.unregisterBusinessMsg(r),i.interphone.off("business_message",i.handleInterphoneMessage);break;case v.POPUP_JOIN_FANS_MODAL:ft.b.emit(ft.a.POPUP_JOIN_FANS_MODAL);break;case v.CLOSE_ACTIVITY_MODAL:i.closeActivityModal();break;case v.SUBSCRIBE_TOPIC:i.subscribeTopic(r);break;case v.UNSUBSCRIBE_TOPIC:i.unsubscribeTopic(r);break;case v.POPUP_SHARE:Object(Lt.a)(r);break;case v.UPDATE_ACCOUNT_BALANCE:break;case v.SHOW_USER_INFO_DIALOG:ft.b.emit(ft.a.SHOW_USER_INFO_DIALOG,r)}})),u()(this,"handleInterphoneMessage",(function(t){var e=t||{},n=e.type,r=e.data;i.sendBizMsgToMessenger(n,r)}));var n=e||{},o=n.interphone,a=n.messengerPhone;this._messengerPhone=a,this._interphone=o}return a()(t,[{key:"messengerPhone",get:function(){if(this._messengerPhone)return this._messengerPhone;throw new ReferenceError("[messengerPhone] is undefined.")},set:function(t){this._messengerPhone=t}},{key:"interphone",get:function(){if(this._interphone)return this._interphone;throw new ReferenceError("[interphone] is undefined.")},set:function(t){this._interphone=t}},{key:"openActivityModal",value:function(t){var e=t||{},i=e.url,n=e.target,r=void 0===n?"_blank":n,o=e.iframeStyle,a=e.iframeProps,s=void 0===a?{}:a,u=z()(e,Nt);Object(y.a)(i)&&("_modal"===r?this._showGlobalModal(Dt(Dt({},u),{},{content:Et.a.createElement(Ct.a,Tt()({src:i,style:o,closeModal:this.closeActivityModal},s,{className:"n-as-rnd"}))})):window.open(i,r))}},{key:"init",value:function(){this.messengerPhone.on("message",this.handleMessengerPhoneMessage)}},{key:"dispose",value:function(){this.messengerPhone.off("message",this.handleMessengerPhoneMessage),this.interphone.off("message",this.handleInterphoneMessage),this.interphone.off("business_message",this.handleInterphoneMessage),this._messengerPhone=null,this._interphone=null,this._globalModalInstance&&(this._globalModalInstance.destroy(),this._globalModalInstance=null)}},{key:"sendBizMsgToMessenger",value:function(t,e){this.messengerPhone.emit("incomingCall",{type:t,data:e})}},{key:"_showGlobalModal",value:function(t){var e=t||{},i=e.title,n=e.content,r=e.wrapClassName,o=Dt({title:i,wrapClassName:void 0===r?"global-modal-wrap":r,closable:!0,maskClosable:!1,mask:!0,footer:null,content:n,width:e.width,closeIcon:e.closeIcon,className:e.className},z()(e,Mt));this._globalModalInstance?this._globalModalInstance.update(o):this._globalModalInstance=Ot.a.info(o)}},{key:"_closeGlobalModal",value:function(){this._globalModalInstance&&(this._globalModalInstance.destroy({triggerCancel:!0}),this._globalModalInstance=null)}},{key:"subscribeTopic",value:function(t){kt.channel.subTopicList(t)}},{key:"unsubscribeTopic",value:function(t){kt.channel.unsubTopicList(t)}}],[{key:"createInstance",value:function(e){return new t(e)}},{key:"showToast",value:function(t){var e=t||{},i=e.content,n=e.time_length,r=e.onClose;Rt.a.info(i,n,r)}},{key:"jumpToLiveRoom",value:function(t){Object(m.J)(t)}},{key:"popupLogin",value:function(t){At.default.openLoginView(t)}}]),t}()},"21pC":function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n);e.a=r.a.createContext(!1)},"2B47":function(t,e,i){"use strict";i.d(e,"b",(function(){return g})),i.d(e,"a",(function(){return _})),i.d(e,"f",(function(){return S})),i.d(e,"c",(function(){return w})),i.d(e,"d",(function(){return b})),i.d(e,"e",(function(){return I})),i.d(e,"h",(function(){return T})),i.d(e,"g",(function(){return E})),i.d(e,"i",(function(){return k}));var n,r,o,a,s,u,c,l=i("cDf5"),h=i.n(l),d=i("lSNA"),f=i.n(d),p=i("KkFV");function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){f()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var v="text-bulletscreen-settings",g="switch",_="pickme",S={position:{full:"1",top:"2",bottom:"3"},size:{sm:"1",md:"2",lg:"3"},speed:{xs:1,sm:2,md:3,lg:4,xl:5}},w=(n={},f()(n,S.position.full,{start:0,end:1}),f()(n,S.position.top,{start:0,end:.333}),f()(n,S.position.bottom,{start:.667,end:1}),n),b=(r={},f()(r,S.size.sm,16),f()(r,S.size.md,25),f()(r,S.size.lg,36),r),I=(o={},f()(o,S.speed.xs,2e4),f()(o,S.speed.sm,13333),f()(o,S.speed.md,1e4),f()(o,S.speed.lg,8e3),f()(o,S.speed.xl,6666),o),T=(c={position:(a={},f()(a,S.position.full,"full"),f()(a,S.position.top,"top"),f()(a,S.position.bottom,"bottom"),a),size:(s={},f()(s,S.size.sm,"min"),f()(s,S.size.md,"mid"),f()(s,S.size.lg,"max"),s),speed:(u={},f()(u,S.speed.xs,"50%"),f()(u,S.speed.sm,"75%"),f()(u,S.speed.md,"100%"),f()(u,S.speed.lg,"125%"),f()(u,S.speed.xl,"150%"),u)},f()(c,_,{true:"1",false:"0"}),f()(c,g,{true:"1",false:"0"}),c);function P(){return f()({position:S.position.full,size:S.size.md,speed:S.speed.md,opacity:70},g,void 0)}function E(){var t,e=p.b.get(v);if(!e)return P();try{t=JSON.parse(e)}catch(i){}return t=t?y(y({},P()),t):P()}function k(t){"object"===h()(t)&&null!==t&&p.b.set(v,JSON.stringify(t))}},"2GS6":function(t,e,i){"use strict";function n(){var t=[].slice.call(arguments,0);return 1===t.length?t[0]:function(){for(var e=0;e<t.length;e++)t[e]&&t[e].apply&&t[e].apply(this,arguments)}}i.d(e,"a",(function(){return n}))},"2GYh":function(t,e,i){"use strict";i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("7W2i"),u=i.n(s),c=i("a1gu"),l=i.n(c),h=i("Nsbk"),d=i.n(h),f=i("lSNA"),p=i.n(f),m=i("q1tI"),y=(i("17x9"),i("KFtC")),v=i("KEvM");function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var r=d()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l()(this,i)}}i.d(e,"b",(function(){return v.e}));var _=function(t){u()(i,t);var e=g(i);function i(t){var n;return r()(this,i),(n=e.call(this,t)).state={langPkg:[{}]},n}return a()(i,[{key:"componentDidMount",value:function(){var t=this,e=this.props,i=e.module,n=e.lang,r=e.fetcher,o=e.registry,a=n||Object(y.k)();if(i&&console.error("LangPkgProvider module deprecated",i),"function"===typeof r)r(a).then((function(e){t.setState({langPkg:[e]})}));else if(o){var s=Array.isArray(o)?o:[o];Promise.all(s.map((function(t){return Object(v.c)(t,a)}))).then((function(e){t.setState({langPkg:e})}))}}},{key:"render",value:function(){var t,e=this.props,i=e.module,n=e.children,r=e.fetcher,o=e.registry,a=this.state.langPkg;if("function"===typeof r)t=n(a[0]);else if(i){t=n(i.split(",").length>1?a:a[0])}else o&&(t=n(o.length>1?a:a[0]));return t?m.Children.only(t):null}}]),i}(m.Component);p()(_,"defaultProps",{module:"",lang:null,fetcher:null,registry:null}),e.a=_},"2Nb0":function(t,e,i){t.exports=i("4KFe")(201)},"2OiF":function(t,e,i){t.exports=i("4KFe")(32)},"2UZc":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.iFontColor=-1,this.iFontSize=4,this.iPopupStyle=0});r.prototype._clone=function(){return new n.a.ContentFormat},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt32(0,this.iFontColor),t.writeInt32(1,this.iFontSize),t.writeInt32(2,this.iPopupStyle)},r.prototype.readFrom=function(t){this.iFontColor=t.readInt32(0,!1,this.iFontColor),this.iFontSize=t.readInt32(1,!1,this.iFontSize),this.iPopupStyle=t.readInt32(2,!1,this.iPopupStyle)},n.a.ContentFormat=r},"2ajD":function(t,e){t.exports=function(t){return t!==t}},"2gN3":function(t,e,i){var n=i("Kz5y")["__core-js_shared__"];t.exports=n},"2mql":function(t,e,i){"use strict";var n=i("TOwV"),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return n.isMemo(t)?a:s[t.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,i,n){if("string"!==typeof i){if(p){var r=f(i);r&&r!==p&&t(e,r,n)}var a=l(i);h&&(a=a.concat(h(i)));for(var s=u(e),m=u(i),y=0;y<a.length;++y){var v=a[y];if(!o[v]&&(!n||!n[v])&&(!m||!m[v])&&(!s||!s[v])){var g=d(i,v);try{c(e,v,g)}catch(_){}}}}return e}},"2tSK":function(t,e,i){var n=i("We69"),r=i("4feL");t.exports=function(t,e,i){var o=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||r(a)}},"30NK":function(t,e,i){"use strict";i.d(e,"u",(function(){return y})),i.d(e,"z",(function(){return v})),i.d(e,"J",(function(){return g})),i.d(e,"E",(function(){return _})),i.d(e,"h",(function(){return S})),i.d(e,"M",(function(){return w})),i.d(e,"p",(function(){return b})),i.d(e,"r",(function(){return I})),i.d(e,"j",(function(){return T})),i.d(e,"L",(function(){return P})),i.d(e,"K",(function(){return E})),i.d(e,"f",(function(){return k})),i.d(e,"i",(function(){return R})),i.d(e,"o",(function(){return O})),i.d(e,"t",(function(){return A})),i.d(e,"y",(function(){return L})),i.d(e,"d",(function(){return N})),i.d(e,"C",(function(){return M})),i.d(e,"A",(function(){return U})),i.d(e,"l",(function(){return D})),i.d(e,"m",(function(){return B})),i.d(e,"n",(function(){return F})),i.d(e,"F",(function(){return x})),i.d(e,"G",(function(){return j})),i.d(e,"w",(function(){return V})),i.d(e,"c",(function(){return G})),i.d(e,"H",(function(){return H})),i.d(e,"D",(function(){return W})),i.d(e,"N",(function(){return q})),i.d(e,"a",(function(){return K})),i.d(e,"q",(function(){return Y})),i.d(e,"s",(function(){return z})),i.d(e,"b",(function(){return J})),i.d(e,"x",(function(){return Q})),i.d(e,"O",(function(){return X})),i.d(e,"I",(function(){return Z})),i.d(e,"B",(function(){return $})),i.d(e,"v",(function(){return tt})),i.d(e,"k",(function(){return et})),i.d(e,"e",(function(){return it})),i.d(e,"g",(function(){return nt}));var n=i("lSNA"),r=i.n(n),o=i("q1tI"),a=i.n(o),s=i("/MKj"),u=i("tbCU"),c=i("pVnL"),l=i.n(c),h=i("p1oI"),d=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r=Object(h.b)("_from"),s=!1;return a.a.forwardRef((function(e,n){var u=Object(o.useCallback)((function(){return!s&&(s=!0,i.indexOf(r)>-1)}),[]);return a.a.createElement(t,l()({},e,{ref:n,showYouSelf:u,from:r}))}))},f=i("uuUH");function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var y=Object(u.a)((function(){return Promise.resolve().then(i.bind(null,"PxAQ"))}),{loading:!1,when:u.b}),v=Object(u.a)((function(){return i.e("d0c4d").then(i.bind(null,"DaSF")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo}}))(e)}}))}),{loading:!1,when:u.b}),g=Object(u.a)((function(){return Promise.all([i.e("edfd6"),i.e("93a4d"),i.e("70dfb")]).then(i.bind(null,"xmGg")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{baseLangPkg:t.common.langPkg.base,lang:t.home.room.userInfo.lang,followCount:t.home.room.followCount,viewCount:t.home.room.viewCount,isFollow:t.home.room.isFollow,gotFollowed:t.home.room.gotFollowed}}))(Object(f.b)(e))}}))}),{loading:a.a.createElement("div",{dangerouslySetInnerHTML:{__html:i("FcMc")()}})}),_=Object(u.a)((function(){return Promise.all([i.e("081f4"),i.e("1df6f")]).then(i.bind(null,"5ObY")).then((function(t){var e=t.default,i=t.CONST;return{default:Object(s.c)((function(t){var e=t.home.room||{},n=e.roomInfo,r=e.userInfo;return{poster:(n.roomScreenshots||[]).find((function(t){return 2===t.key})),roomId:n.roomId,anchorId:n.auId,info:n,mode:i.MODE.ROOM,userId:r.userId,udbUserId:r.udbUserId,userInfo:r}}))(e)}}))}),{loading:a.a.createElement("div",{className:"n-as-abs n-as-full n-sk-black"})}),S=Object(u.a)((function(){return i.e("a716c").then(i.bind(null,"JQSE"))}),{loading:!1,when:u.b}),w=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("94b44")]).then(i.bind(null,"sFzI")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,userInfo:t.home.room.userInfo}}))(e)}}))}),{loading:!1,when:u.b}),b=Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("93a4d"),i.e("9cc44")]).then(i.bind(null,"uzF9")).then((function(t){var e=t.default,i=t.GiftBulletScreenReport;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,userInfo:t.home.room.userInfo,langPkg:t.home.common.langPkg.home}}))(i(e))}}))}),{loading:!1,when:u.b}),I=Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("93a4d"),i.e("13c10")]).then(i.bind(null,"bhRz")).then((function(t){var e=t.default,i=Object(f.b)(e),n=function(t){var e=Object(s.f)((function(t){var e,i;return(null===(e=t.home.common)||void 0===e||null===(i=e.langPkg)||void 0===i?void 0:i.home)||{}})),n=Object(s.f)((function(t){var e,i;return null===(e=t.home.common)||void 0===e||null===(i=e.langPkg)||void 0===i?void 0:i.fansGroup})),r=Object(s.f)((function(t){var e,i;return null===(e=t.home.common)||void 0===e||null===(i=e.langPkg)||void 0===i?void 0:i.room})),u=Object(o.useMemo)((function(){var t=e.sendAnchorRedGem,i=e.sendGift,o=e.room,a=(o=void 0===o?{}:o).enterNum,s=e.rechargeText,u=e.toast,c=(u=void 0===u?{}:u).logExpire,l=u.gift_consume_success,h=u.gift_consume_failed,d=u.gift_payrespcode_notenoughmoney,f=u.gift_payrespcode_notenough_pkg_gift,p=u.gift_tips_dialog_charge_message,m=u.live_goldbeansend_fail,y=u.live_coinsend_fail,v=u.overLimit,g=u.gift_consume_royal,_=u.cannotConsume,S=u.gift_consume_ban_currency_agent,w=u.family_gift_error_tips,b=e.popup,I=b.yes,T=b.cancel,P=e.recharge,E=(P=void 0===P?{}:P).tooFast,k=e.header,R=(k=void 0===k?{}:k).error,C=e.boxGift,O=e.streamer,A=e.micIndex,L=e.sendFortuneGiftTips,N=e.pool,M=e.giftStar,U=e.sendGiftForGiftStar;return{homeLangPkg:e,fansGroup:n,room:r,yes:I,cancel:T,sendGift:i,enterNum:a,rechargeText:s,logExpire:c,gift_consume_success:l,gift_payrespcode_notenoughmoney:d,gift_tips_dialog_charge_message:p,gift_payrespcode_notenough_pkg_gift:f,live_goldbeansend_fail:m,live_coinsend_fail:y,gift_consume_royal:g,gift_consume_ban_currency_agent:S,family_gift_error_tips:w,tooFast:E,netErr:R,boxGift:C,sendAnchorRedGem:t,overLimit:v,gift_consume_failed:h,cannotConsume:_,streamer:O,micIndex:A,sendFortuneGiftTips:L,pool:N,giftStar:M,sendGiftForGiftStar:U}}),[n,e,r]),c=m(m({},t),{},{langPkg:u,dispatch:Object(s.e)()},Object(s.f)((function(t){return{roomInfo:t.home.room.roomInfo,giftList:t.home.room.giftList,giftTabList:t.home.room.giftTabList,packageList:t.home.room.packageList,accountBalance:t.home.room.accountBalance,normalActivityList:t.home.room.normalActivityList}}),s.d));return a.a.createElement(i,c)};return{default:a.a.memo(n)}}))}),{loading:a.a.createElement("div",{dangerouslySetInnerHTML:{__html:i("o7gQ")()}}),when:u.b}),T=Object(u.a)((function(){return Promise.all([i.e("edfd6"),i.e("d040e"),i.e("93a4d"),i.e("f0f73")]).then(i.bind(null,"dLvg")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,decorations:t.common.decorations}}))(Object(f.b)(e))}}))}),{loading:a.a.createElement("div",{className:"n-fx-bn n-fx-col n-fx1",dangerouslySetInnerHTML:{__html:i("Kh3L")()}})}),P=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("9befe")]).then(i.bind(null,"Ho55")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomId:t.home.room.roomInfo.roomId,anchorId:t.home.room.roomInfo.auId,gameId:t.home.room.roomInfo.gameId,userId:t.home.room.userInfo.userId,udbUserId:t.home.room.userInfo.udbUserId,giftList:t.home.room.giftList,langPkg:t.home.common.langPkg,fanGroupInfo:t.home.room.fanGroupInfo}}))(e)}}))}),{loading:a.a.createElement("div",{style:{height:168},className:"bc-brighter"}),when:u.b}),E=Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("93a4d"),i.e("ad3cc")]).then(i.bind(null,"hBTx")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomId:t.home.room.roomInfo.roomId,auId:t.home.room.roomInfo.auId,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),k=Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("93a4d"),i.e("e066c")]).then(i.bind(null,"GUre")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomId:t.home.room.roomInfo.roomId,anchorId:t.home.room.roomInfo.auId,roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,giftList:t.home.room.giftList}}))(e)}}))}),{loading:!1,when:u.b}),R=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("4c26c")]).then(i.bind(null,"mjRt")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomId:t.home.room.roomInfo.roomId,anchorId:t.home.room.roomInfo.auId,roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),C=Object(u.a)((function(){return i.e("5ae1d").then(i.bind(null,"fy+4"))}),{loading:!1,when:u.b}),O=Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,isFollow:t.home.room.isFollow,gotFollowed:t.home.room.gotFollowed}}))((function(t){return t.gotFollowed?a.a.createElement(C,t):null})),A=Object(u.a)((function(){return i.e("445eb").then(i.bind(null,"N20w")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),L=Object(u.a)((function(){return i.e("05587").then(i.bind(null,"Ko5E")).then((function(t){var e=t.MicTogether;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),N=(Object(u.a)((function(){return i.e("05587").then(i.bind(null,"Ko5E")).then((function(t){var e=t.MultiMicTogether;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,userInfo:t.home.room.userInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("93a4d"),i.e("f6ab2")]).then(i.bind(null,"Hx+G")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{anchorId:t.home.room.roomInfo.auId,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b})),M=Object(u.a)((function(){return i.e("e045e").then(i.bind(null,"yltI"))}),{loading:!1}),U=Object(u.a)((function(){return i.e("a8483").then(i.bind(null,"LfJU")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),D=Object(u.a)((function(){return i.e("dceaf").then(i.bind(null,"Suma")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:u.b}),B=Object(u.a)((function(){return i.e("3f1b3").then(i.bind(null,"YaEi")).then((function(t){var e=t.default;return{default:(0,t.FansGroupJoinNewReport)(e)}}))}),{loading:!0}),F=Object(u.a)((function(){return i.e("0a24b").then(i.bind(null,"k4Rk"))}),{loading:!0}),x=(Object(u.a)((function(){return i.e("5b0b1").then(i.bind(null,"nqTH"))}),{loading:!0}),Object(u.a)((function(){return Promise.all([i.e("edfd6"),i.e("93a4d"),i.e("383eb")]).then(i.bind(null,"eUS+")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,viewCount:t.home.room.viewCount,followCount:t.home.room.followCount,isFollow:t.home.room.isFollow,gotFollowed:t.home.room.gotFollowed}}))(e)}}))}),{loading:!1,when:u.b})),j=Object(u.a)((function(){return i.e("e5d1e").then(i.bind(null,"Pdmd"))}),{loading:!1,when:u.b}),V=(Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("1aa38")]).then(i.bind(null,"LCIP"))}),{loading:!1,when:u.b}),Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("86ffe")]).then(i.bind(null,"QjoO"))}),{loading:!1,when:u.b})),G=Object(u.a)((function(){return i.e("0d17f").then(i.bind(null,"8SIV"))}),{loading:!1}),H=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("6034f")]).then(i.bind(null,"2Ef7")).then((function(t){var e=t.default;return{default:Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,userInfo:t.home.room.userInfo}}))(e)}}))}),{loading:!1}),W=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("de86a")]).then(i.bind(null,"+zVe")).then((function(t){var e=t.default;return{default:d(Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,userInfo:t.home.room.userInfo}}))(e),"pickme")}}))}),{loading:!1}),q=Object(u.a)((function(){return i.e("abffe").then(i.bind(null,"L6Aq"))}),{loading:!1}),K=Object(u.a)((function(){return i.e("b0a22").then(i.bind(null,"iomc"))}),{loading:!1}),Y=Object(u.a)((function(){return i.e("f94e8").then(i.bind(null,"h6GX"))}),{loading:!1}),z=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("5d660")]).then(i.bind(null,"CBof")).then((function(t){var e=t.default;return{default:d(Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,userInfo:t.home.room.userInfo}}))(e),"GroupUp")}}))}),{loading:!1}),J=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("a571e")]).then(i.bind(null,"k0MM"))}),{loading:!1}),Q=Object(u.a)((function(){return i.e("ef17a").then(i.bind(null,"bp6c"))}),{loading:!1}),X=Object(u.a)((function(){return i.e("d0149").then(i.bind(null,"zZEz"))}),{loading:!1}),Z=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("12f28")]).then(i.bind(null,"9TK2"))}),{loading:!1}),$=Object(u.a)((function(){return Promise.all([i.e("93a4d"),i.e("e2610")]).then(i.bind(null,"VjHo"))}),{loading:!1}),tt=Object(u.a)((function(){return Promise.all([i.e("d040e"),i.e("71608")]).then(i.bind(null,"46QX"))}),{loading:!1}),et=Object(u.a)((function(){return i.e("9c8a6").then(i.bind(null,"9Ek3"))}),{loading:!1}),it=Object(u.a)((function(){return Promise.all([i.e("f0ca8"),i.e("afde9")]).then(i.bind(null,"TVeg"))}),{loading:!1}),nt=Object(u.a)((function(){return i.e("716c4").then(i.bind(null,"uDh6")).then((function(t){var e=t.default;return{default:d(Object(s.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,userInfo:t.home.room.userInfo}}))(e),"BossComing")}}))}),{loading:!1})},"36nk":function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+='<div class="n-as-conf n-as-mrgb-lg n-fx1 main-container">\n  <div class="n-as-w20 n-as-mrgv-md n-sk n-sk-t24"></div>\n  <div class="n-as-w40 n-as-mrgv-md n-sk n-sk-t28"></div>\n  <ul class="n-fx-grid-300">\n    ';for(var i=0;i<60;i++)__p+='\n      <li class="n-as-mrgb-md">\n        '+(null==(__t=__webpack_require__("P3na")())?"":__t)+"\n      </li>\n    ";__p+="\n  </ul>\n</div>\n"}return __p}},"3A9y":function(t,e){t.exports=function(t){return this.__data__.has(t)}},"3BRs":function(t,e,i){"use strict";(function(e,n,r){var o=i("lm0R");function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=g;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;g.WritableState=v;var c=i("Onz0");c.inherits=i("P7XM");var l={deprecate:i("t9FE")},h=i("QpuX"),d=i("hwdV").Buffer,f=r.Uint8Array||function(){};var p,m=i("RoFp");function y(){}function v(t,e){s=s||i("sZro"),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,r){--e.pendingcb,i?(o.nextTick(r,n),o.nextTick(T,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(r(n),t._writableState.errorEmitted=!0,t.emit("error",n),T(t,e))}(t,i,n,e,r);else{var a=b(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||w(t,i),n?u(S,t,i,a,r):S(t,i,a,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function g(t){if(s=s||i("sZro"),!p.call(g,this)&&!(this instanceof s))return new g(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,i,n,r,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function S(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),T(t,e)}function w(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var s=0,u=!0;i;)r[s]=i,i.isBuf||(u=!1),i=i.next,s+=1;r.allBuffers=u,_(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,l=i.encoding,h=i.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,l,h),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function I(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),T(t,e)}))}function T(t,e){var i=b(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(I,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}c.inherits(g,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===g&&(t&&t._writableState instanceof v)}})):p=function(t){return t instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(t,e,i){var n,r=this._writableState,a=!1,s=!r.objectMode&&(n=t,d.isBuffer(n)||n instanceof f);return s&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"===typeof e&&(i=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),"function"!==typeof i&&(i=y),r.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),o.nextTick(e,i)}(this,i):(s||function(t,e,i,n){var r=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"===typeof i||void 0===i||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(n,a),r=!1),r}(this,r,t,i))&&(r.pendingcb++,a=function(t,e,i,n,r,o){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=d.from(e,i));return e}(e,n,r);n!==a&&(i=!0,r="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,n,r,o);return u}(this,r,s,t,e,i)),a},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},g.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(t,e,i){var n=this._writableState;"function"===typeof t?(i=t,t=null,e=null):"function"===typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,T(t,e),i&&(e.finished?o.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),g.prototype.destroy=m.destroy,g.prototype._undestroy=m.undestroy,g.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i("8oxB"),i("URgk").setImmediate,i("yLpj"))},"3Fdi":function(t,e){var i=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return i.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},"3GJH":function(t,e,i){t.exports=i("4KFe")(209)},"3Lyj":function(t,e,i){t.exports=i("4KFe")(66)},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"3Yl8":function(t,e,i){"use strict";i.r(e);var n=i("lwsE"),r=i.n(n),o=i("lSNA"),a=i.n(o),s=i("4oOK"),u=i("KkFV"),c=i("p1oI"),l=i("KFtC"),h=i("JwEE"),d=i("fGII"),f=i("nimoua"),p=i.n(f),m=i("J4zp"),y=i.n(m),v=i("q1tI"),g=i.n(v),_=function(){return i.e("52c2d").then(i.bind(null,"JxiG"))},S=!1,w=document.createElement("div");document.querySelector("body").appendChild(w);var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Promise.all([Promise.resolve().then(i.t.bind(null,"i8i4",7)),_()]).then((function(i){var n=y()(i,2),r=n[0],o=n[1].default;o.setinitedType(t),r.render(g.a.createElement(o,{visible:!0,onClose:function(){r.unmountComponentAtNode(w)},config:e}),w),S=!1}))},I={showLogin:function(t){S||(S=!0,b("login",t))},showRegister:function(){S||(S=!0,b("register"))},showForgetPass:function(){S||(S=!0,b("forget_password"))},autoLogin:function(t,e,i,n){_().then((function(r){(0,r.NimoLogin)(t,e,i,void 0,void 0,void 0,void 0,void 0,n)}))}},T=i("uofp");i("yXPU"),i("ls82");function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var k={_nickname:"userName",_avatarUrl:"avatarUrl",_userid:"userid",_lang:"lang",_clang:"clang",_country:"country",_guid:"guid",_theme:"theme"},R={_udbtoken:"bizToken",_udbid:"udbUserId",_udbver:"version"},C=(E(E({},k),R),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.token,i=t.uid,n=t.countryCode,r=e||Object(c.a)("_udbtoken"),o=i||Object(c.a)("_udbid"),a=n||Object(c.a)("_country");return new Promise((function(t,e){fetch("".concat("https","://").concat("udblgn",".").concat("nimo.tv","/login/biztoken/web"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:1005,countryCode:a,data:{uid:o,biztoken:r}})}).then((function(t){return t.json()})).then((function(i){0===(i||{}).returnCode?t(i):e(i)})).catch(e)}))}),O=["s.syzs.qq.com"],A=function(){return i.e("b99ed").then(i.bind(null,"7Vhv")).catch((function(){return Promise.reject(new Error("load loginSDK fail"))}))},L=new function t(){var e=this;r()(this,t),a()(this,"autoLogin",(function(){var t=Object(c.a)("_udbtoken"),i=Object(c.a)("_udbid"),n=Object(c.a)("_udbver"),r=0;t&&i&&n&&(e._isAutoLogin=!0,e.initUDB(),C({token:t,uid:i,countryCode:Object(l.g)()}).then((function(){var e=u.a.get("udb_biztoken"),o=u.a.get("udb_version"),a=u.a.get("udb_uid");e&&a&&o&&(t=e,i=a,n=o,r=25)})).catch((function(){})).finally((function(){I.autoLogin(decodeURIComponent(t),i,n,{cookieExpires:r})})))})),a()(this,"initUDB",(function(){A().then((function(t){t.default.isInitUDB({success:function(){},error:function(){console.error("UDB_init_error")}})}))})),a()(this,"logout",(function(){A().then((function(t){t.default.logout({success:function(t){u.a.remove("avatarUrl"),u.a.remove("userName"),u.a.remove("version"),u.a.remove("bizToken"),u.a.remove("udb_biztoken"),u.a.remove("udb_guiddata"),u.a.remove("udb_openid"),u.a.remove("udb_passport"),u.a.remove("udb_uid"),u.a.remove("udbUserId"),u.a.remove("yyuid"),u.a.remove("userid"),!0===((t||{}).data||{}).destroyUser?Object(d.a)():location.reload()}})}))})),a()(this,"login",(function(t){A().then((function(e){e.default.login(t)})).catch((function(e){"function"===typeof t.error&&t.error(e)}))})),a()(this,"checkLogin",(function(){var t=u.a.get("bizToken"),e=u.a.get("udbUserId"),i=u.a.get("version");return e&&e.length&&t&&t.length&&i})),a()(this,"getUserInfo",(function(){var t=u.a.get("userid"),i=u.a.get("userName"),n=u.a.get("avatarUrl")||void 0,r=u.a.get("bizToken"),o=u.a.get("udbUserId"),a=u.a.get("version"),s=u.a.get("isAnchor"),c=Object(l.e)(),h=Object(l.j)(),d=Object(l.k)(),f=Object(l.g)(),p=Object(l.f)(),m=Object(l.l)(),y=Object(l.l)(),v=u.b.get("sdid")||"";return{userId:t,userName:i,userImg:n,bizToken:r,udbUserId:o,version:a,lang:d,country:f,cCountry:c,clang:p,guid:h,ua:e.ua,mid:m,deviceId:y,safeDeviceId:v,isAnchor:s}})),a()(this,"getCurrUid",(function(){var t=e.getUserInfo();return t&&t.udbUserId?t.udbUserId-0:0})),a()(this,"register",(function(t){return A().then((function(e){e.default.register(t)})).catch((function(e){"function"===typeof t.error&&t.error(e)}))})),a()(this,"codeSend",(function(t){return A().then((function(e){e.default.codeSend(t)})).catch((function(e){"function"===typeof t.error&&t.error(e)}))})),a()(this,"thirdLogin",(function(t){return A().then((function(e){e.default.thirdLogin(t)})).catch((function(e){"function"===typeof t.error&&t.error(e)}))})),a()(this,"passFind",(function(t){return A().then((function(e){e.default.passFind(t)})).catch((function(e){"function"===typeof t.error&&t.error(e)}))})),a()(this,"thirdLoginConnect",(function(t){return A().then((function(e){e.default.thirdLoginConnect(t)})).catch((function(e){"function"===typeof t.error&&t.error(e)}))})),a()(this,"codeVerify",(function(t){return A().then((function(e){e.default.codeVerify(t)}))})),a()(this,"getAppInfo",(function(t){return A().then((function(e){e.default.appInfo(t)}))})),a()(this,"oauthPasswordLogin",(function(t){return A().then((function(e){e.default.oauthPasswordLogin(t)}))})),a()(this,"anonymousLogin",(function(t){return A().then((function(e){e.default.anonymousLogin(t)}))})),this._isAutoLogin=!1,p.a.isInNimoPc&&Object(c.a)("_userid")||this.autoLogin(),this.ua="web&1.0.4&nimoTV"},N=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.self!==window.top&&-1===O.indexOf(Object(l.n)())||window._NIMO_NEW_PAGE_LOGIN_)h.a.login(t);else{var i={login:"showLogin",register:"showRegister",reset:"showForgetPass"};I[i[t]](e)}};e.default={initUDB:function(){L.initUDB()},login:function(t){L.login(t)},loginOut:function(){L.logout()},autoLogout:function(){Object(s.a)(800).then((function(){return L.logout()}))},checkLogin:function(t){return!!L.checkLogin()||(t&&(N("login"),Object(T.c)()),!1)},showLogin:function(t){return N("login",t)},showRegister:function(){return N("register")},showForgetPass:function(){return N("reset")},checkIsAutoLogin:function(){return L._isAutoLogin},getUserInfo:L.getUserInfo,currUid:L.getCurrUid(),register:L.register,passFind:L.passFind,codeSend:L.codeSend,thirdLogin:L.thirdLogin,thirdLoginWithBizData:L.thirdLoginWithBizData,thirdLoginConnect:L.thirdLoginConnect,codeVerify:L.codeVerify,getAppInfo:L.getAppInfo,oauthPasswordLogin:L.oauthPasswordLogin,anonymousLogin:L.anonymousLogin}},"3cYt":function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},"3e1F":function(t,e){t.exports='<div id="nimo-footer" class="bc16">\n  <div class="wrap n-as-padv-xxs n-as-bd-box">\n    <div class="official-media-img">\n      <a title=\'facebook\' href="" target="_blank" id="nimo-footer-facebook" rel="nofollow"><i class="nimo-icon nimo-icon-facebook n-as-mrgh-md c-hover2"></i></a>\n      <a title=\'twitter\' href="" target="_blank" id=\'nimo-footer-twitter\' rel="nofollow"><i class="nimo-icon nimo-icon-twitter n-as-mrgh-md c-hover2"></i></a>\n      <a title=\'instagram\' href="" target="_blank" id="nimo-footer-instagram" rel="nofollow"><i class="nimo-icon nimo-icon-instagram n-as-mrgh-md c-hover2"></i></a>\n      <a title="youtube" href="" target="_blank" id=\'nimo-footer-youtube\' rel="nofollow"><i class="nimo-icon nimo-icon-youtube n-as-mrgh-md c-hover2"></i></a>\n    </div>\n    <div class="info">\n      <div class="info-explain">\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/about" target="_blank" class="exp-item c1 bdc8 c-hover4"\n          report=\'{"eid":"footer_abouttus_click","eid_desc":"底栏_关于我们_点击"}\' data-lang="foot.aboutUs">About us</a>\n        <span class="exp-item-split c1 bdc8">|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/contact" target="_blank" class="exp-item c1 bdc8 c-hover4"\n          report=\'{"eid":"footer_contactus_click","eid_desc":"底栏_联系我们_点击"}\' data-lang="foot.contactUs">Contact us</a>\n        <span class="exp-item-split c1 bdc8">|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/download/nimotv" target="_blank" class="exp-item c1 bdc8 c-hover4"\n          report=\'{"eid":"footer_download_click","eid_desc":"底部_下载_点击"}\' data-lang="foot.Download">Download</a>\n        <span class="exp-item-split c1 bdc8">|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/agreement5" target="_blank" class="exp-item second c1 bdc8 c-hover4"\n          report=\'{"eid":"click/cookie/footer","eid_desc":"点击/cookie政策/底栏"}\' data-lang="foot.cookiePolicy">Cookie Policy</a>\n        <span class="exp-item-split c1 bdc8">|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/agreement6" target="_blank" class="exp-item second c1 bdc8 c-hover4"\n          report=\'{"eid":"click/private/footer","eid_desc":"点击/隐私政策/底栏"}\' data-lang="foot.privacyPolicy">Privacy Policy</a>\n        <span class="exp-item-split c1 bdc8">|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/agreement1" target="_blank" class="exp-item second c1 bdc8 c-hover4"\n          report=\'{"eid":"footer_agreement_click","eid_desc":"底部_用户协议_点击"}\' data-lang="foot.Agreement">Agreement</a>\n         <span class=\'exp-item-split c1 bdc8\'>|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/volunteer" target="_blank" class="exp-item second c1 bdc8 c-hover4"\n          report=\'{"eid":"usr/click/homepage/tylist","eid_desc":"用户_点击_首页_感谢名单"}\' data-lang="thanklist">ThankList</a>\n         <span class=\'exp-item-split c1 bdc8\'>|</span>\n        <a href="//<%- DOMAINS[\'maindomain\'] %>/p/openplatform" target="_blank" class="exp-item second c1 bdc8 c-hover4" report=\'{"eid":"sys/enter/openplatform","eid_desc":"开放平台页曝光量"}\'\n           data-lang=\'foot.openplatform\'>open Platform</a>\n      </div>\n      <p class="copyright c2">\n        Copyright © 2018-2022 Huya PTE. LTD. All Rights Reserved\n      </p>\n    </div>\n  </div>\n</div>\n'},"3xty":function(t,e,i){var n=i("XKFU"),r=i("2OiF"),o=i("y3w9"),a=(i("dyZX").Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!i("eeVq")((function(){a((function(){}))})),"Reflect",{apply:function(t,e,i){var n=r(t),u=o(i);return a?a(n,e,u):s.call(n,e,u)}})},"4/ic":function(t,e,i){var n=i("ZWtO");t.exports=function(t){return function(e){return n(e,t)}}},"43KI":function(t,e,i){(e=t.exports=i("rXFu")).Stream=e,e.Readable=e,e.Writable=i("3BRs"),e.Duplex=i("sZro"),e.Transform=i("J78i"),e.PassThrough=i("eA/Y")},"44Ds":function(t,e,i){var n=i("e4Nc");function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function i(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a)||o,a};return i.cache=new(r.Cache||n),i}r.Cache=n,t.exports=r},"49sm":function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},"4CjR":function(t,e,i){"use strict";i.d(e,"a",(function(){return N}));i("I5cv");var n=i("QILm"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("PJYZ"),l=i.n(c),h=i("7W2i"),d=i.n(h),f=i("a1gu"),p=i.n(f),m=i("Nsbk"),y=i.n(m),v=i("lSNA"),g=i.n(v),_=i("q1tI"),S=i.n(_),w=i("qhky"),b=i("bmMU"),I=i.n(b),T=i("xB+L"),P=i("nimoua"),E=["defaultDescription","appTitle"];function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function R(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){g()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var O="data-react-helmet",A=i.n(P).a.isInNimoApp,L=document.querySelector("head"),N=function(t){d()(i,t);var e=C(i);function i(){var t;a()(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r)),g()(l()(t),"_preAppTitle",""),g()(l()(t),"setAppTitle",(function(e){A&&e&&e!==t._preAppTitle&&(Object(T.setNavigationBar)({title:e}),t._preAppTitle=e)})),g()(l()(t),"getState",(function(){return w.a.peek()||{}})),g()(l()(t),"findOldDescription",(function(){var e=t.getState().metaTags;return(void 0===e?[]:e).find((function(t){return"description"===t.name}))||{}})),g()(l()(t),"removeExtraDescription",(function(){document.querySelector('meta[name="description"]['.concat(O,"=true]"))&&document.querySelectorAll('meta[name="description"]:not(['.concat(O,"=true])")).forEach((function(t){L.removeChild(t)}))})),g()(l()(t),"onChangeClientState",(function(e,i,n){var r=t.props.onChangeClientState;"function"===typeof r&&r(e,i,n),t.removeExtraDescription()})),g()(l()(t),"_notCompleteStr",(function(t){return"string"!==typeof t||~t.indexOf("%s")})),g()(l()(t),"getSaveContent",(function(e,i){return t._notCompleteStr(e)?i:e||i})),g()(l()(t),"replaceSaveContent",(function(){var e=t.props,i=e.title,n=e.meta,r=void 0===n?[]:n,o=e.children,a=e.defaultTitle,s=e.defaultDescription,u=e.appTitle,c=t.findOldDescription(),l=t.getSaveContent(i,a);return A&&(l=u||l),{title:l,meta:r.map((function(e){var i=e;if("description"===e.name){var n=t.getSaveContent(e.content,s);i=n?R(R({},e),{},{content:n}):c}return i})),children:S.a.Children.map(o,(function(e){if(e&&e.props){if("title"===e.type&&e.props.children){var i=t.getSaveContent(e.props.children,a);return A&&(i=u||i),S.a.cloneElement(e,{children:i})}if("meta"===e.type&&"description"===e.props.name){var n=t.getSaveContent(e.props.content,s);return n?S.a.cloneElement(e,{content:n}):S.a.createElement(e.type,c)}}return e}))}})),t}return u()(i,[{key:"shouldComponentUpdate",value:function(t){return!I()(this.props,t)}},{key:"componentDidUpdate",value:function(){this.setAppTitle(this.getState().title)}},{key:"render",value:function(){var t=this.props,e=(t.defaultDescription,t.appTitle,R(R({},r()(t,E)),{},{onChangeClientState:this.onChangeClientState},this.replaceSaveContent()));return S.a.createElement(w.a,e)}}]),i}(S.a.Component)},"4KFe":function(t,e){t.exports=nimoDLL},"4L88":function(t,e,i){"use strict";i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("7W2i"),a=i.n(o),s=i("a1gu"),u=i.n(s),c=i("Nsbk"),l=i.n(c),h=i("CbbO"),d=i("ZMLX"),f=(i("EoCF"),function(){this.eBoardcastType=0,this.lRoomId=0,this.iStatus=0,this.iBoxNum=0,this.iCountDown=0,this.sBoxIcon="",this.sNickName="",this.sAvatarUrl="",this.lEndTime=0,this.lDataTime=0,this.lCurSeqId=0,this.lNextSeqId=0,this.iAwardingTime=0,this.iGiftId=0});f.prototype._clone=function(){return new d.a.BGBoardcastData},f.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.prototype.writeTo=function(t){t.writeInt32(0,this.eBoardcastType),t.writeInt64(1,this.lRoomId),t.writeInt32(2,this.iStatus),t.writeInt32(3,this.iBoxNum),t.writeInt32(4,this.iCountDown),t.writeString(5,this.sBoxIcon),t.writeString(6,this.sNickName),t.writeString(7,this.sAvatarUrl),t.writeInt64(8,this.lEndTime),t.writeInt64(9,this.lDataTime),t.writeInt64(10,this.lCurSeqId),t.writeInt64(11,this.lNextSeqId),t.writeInt32(12,this.iAwardingTime),t.writeInt32(13,this.iGiftId)},f.prototype.readFrom=function(t){this.eBoardcastType=t.readInt32(0,!1,this.eBoardcastType),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.iStatus=t.readInt32(2,!1,this.iStatus),this.iBoxNum=t.readInt32(3,!1,this.iBoxNum),this.iCountDown=t.readInt32(4,!1,this.iCountDown),this.sBoxIcon=t.readString(5,!1,this.sBoxIcon),this.sNickName=t.readString(6,!1,this.sNickName),this.sAvatarUrl=t.readString(7,!1,this.sAvatarUrl),this.lEndTime=t.readInt64(8,!1,this.lEndTime),this.lDataTime=t.readInt64(9,!1,this.lDataTime),this.lCurSeqId=t.readInt64(10,!1,this.lCurSeqId),this.lNextSeqId=t.readInt64(11,!1,this.lNextSeqId),this.iAwardingTime=t.readInt32(12,!1,this.iAwardingTime),this.iGiftId=t.readInt32(13,!1,this.iGiftId)},d.a.BGBoardcastData=f;var p=f,m=function(){this.lRoomId=0,this.sGeterName="",this.sSenderName="",this.iAwardType=0,this.sAwardNameLang="",this.iAwardNum=0};m.prototype._clone=function(){return new d.a.BGWinnerNotice},m.prototype._write=function(t,e,i){t.writeStruct(e,i)},m.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},m.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeString(1,this.sGeterName),t.writeString(2,this.sSenderName),t.writeInt32(3,this.iAwardType),t.writeString(4,this.sAwardNameLang),t.writeInt32(5,this.iAwardNum)},m.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.sGeterName=t.readString(1,!1,this.sGeterName),this.sSenderName=t.readString(2,!1,this.sSenderName),this.iAwardType=t.readInt32(3,!1,this.iAwardType),this.sAwardNameLang=t.readString(4,!1,this.sAwardNameLang),this.iAwardNum=t.readInt32(5,!1,this.iAwardNum)},d.a.BGWinnerNotice=m;var y=m,v=i("4TRz");function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=l()(t);if(e){var r=l()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return u()(this,i)}}var _=v.a.EUriBGStatusNotice,S=v.a.EUriBGWinnerNotice,w=function(t){a()(i,t);var e=g(i);function i(){return r()(this,i),e.apply(this,arguments)}return i}(h.a);e.a=new w({broadcasts:{BGBroadcastData:[_,p],BGWinnerNotice:[S,y]}})},"4OHv":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.lUid=0,this.sLang="",this.lRoomType=0,this.sCountry="",this.lRoomId=0,this.sSystemCode="",this.sDeviceModel=""});r.prototype._clone=function(){return new n.a.AnchorInfo},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sLang),t.writeInt64(2,this.lRoomType),t.writeString(3,this.sCountry),t.writeInt64(4,this.lRoomId),t.writeString(5,this.sSystemCode),t.writeString(6,this.sDeviceModel)},r.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sLang=t.readString(1,!1,this.sLang),this.lRoomType=t.readInt64(2,!1,this.lRoomType),this.sCountry=t.readString(3,!1,this.sCountry),this.lRoomId=t.readInt64(4,!1,this.lRoomId),this.sSystemCode=t.readString(5,!1,this.sSystemCode),this.sDeviceModel=t.readString(6,!1,this.sDeviceModel)},n.a.AnchorInfo=r},"4Oe1":function(t,e,i){var n=i("YO3V");t.exports=function(t){return n(t)?void 0:t}},"4TRz":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),{EUriHelloString:8e3,EUriStreamNew:8001,EUriStreamStop:8002,EUriRoomAttendeeChange:8003,EUriRoomAttendeeChangeForUid:8004,EUriLiveOver:8005,EUriLiveBeginNotice:8006,EUriLiveEndNotice:8007,EUriLiveBeginNoticeNew:8008,EUriNonPublicLiveBeginNotice:8009,EUriNoticeBan:8100,EUriNoticeBeKick:8101,EUriMessageNotice:1400,EUriJServerPacket:1401,EUriFavorLive:1402,EUriRoomMessageBanner:1403,EUriShareRoom:1404,EUriSystemMessage:1405,EUriFavorResChg:1406,EUriRoomAnimation:1407,EUriNewRoomAnimation:1408,EUriQuickChat:1409,EUriVipBarListChgNotice:1410,EUriThirdMessageNotice:1411,EUriMarqueeNotice:1412,EUriChatModeChangeNotice:1413,EUriThirdMessageBatchNotice:1414,EUriRoomWelcomeNotice:1415,EUriAnchorMsgBannerNotice:1416,EUriChatBotMessageNotice:1417,EUriSystemChatMessage:1418,EUriPayChatNotice:1419,EUriVoiceRoomEmojiNotice:1420,EUriGetTaskPackNotice:1421,EUriTaskProgressChange:1422,EUriStarLevelUp:1423,EUriSeniorStarTaskChg:1424,EUriSystemChatMessageNew:1425,EUriVoiceRoomRandomEmojiNotice:1426,EUriPayChatRichTextNotice:1427,EUriPayChatRichTextNewNotice:1428,EUriUserForbitMessage:1500,EUriUserLifBanMessage:1501,EUriUserBoxReset:1510,EUriUserSetRoomManager:1511,EUriUserSpecialBox:1512,EUriUserEnterRoom:1513,EUriAnchorKickUser:1514,EUriFansLevelUp:1515,EUriNewUserEnterRoom:1516,EUriVIPLevelChange:1517,EUriNoRankEnterRoom:1518,EUriVoiceRoomBan:1519,EUriEmoticonGroupUnLock:1520,EUriNobleJoinRecommand:1521,EUriMatchRoundChange:1600,EUriCampStatChange:1601,EUriSetUserCampSupport:1602,EMsgMarkReadNotify:1700,EMsgSessionNew:1701,EIMMsgSessionNew:1702,EIMMsgGroupMemberChange:1703,EIMMsgPictureMsgIllegal:1704,EIMMsgSessionDelete:1705,EUriBSLotteryStart:1800,EUriBSLotteryPopularity:1801,EUriBSLotteryEnd:1802,EUriBSLotteryDetail:1803,EUriBSLotteryWinner:1804,EUriMulLotBoardcast:1805,EUriBSLotteryStartNew:1806,EUriBSLotteryPopularityNew:1807,EUriBSLotteryEndNew:1808,EUriBSLotteryWinnerNew:1809,EUriBSLotteryStartV2:1810,EUriBSLotteryPopularityV2:1811,EUriBSLotteryEndV2:1812,EUriBSLotteryWinnerV2:1813,EUriBSLotteryStartV3:1814,EUriBSLotteryPopularityV3:1815,EUriBSLotteryEndV3:1816,EUriBSLotteryWinnerV3:1817,EUriNoticeRoomMcEvent:2001,EUriNoticeMcRequest:2002,EUriNoticeMcResponse:2003,EUriNoticeMcReqTimeout:2004,EUriNoticeRoomConfigChange:2005,EUriNoticeWaitUserUpMc:2006,EUriNoticeWaitUserLeave:2007,EUriNoticeUserEvent:2008,EUriAudienceChangeEvent:2009,EUriNoticeCancelInv:2010,EUriNoticePresenterBeInvite:2011,EUriNoticePresenterInviteResult:2012,EUriNoticePresenterLinkChange:2013,EUriNoticePresenterCancelInvite:2014,EUriNoticePresenterLinkNetworkQua:2015,EUriNoticeShowMicBoxChange:2016,EUriVoiceRoomUp:2017,EUriJoinRoomClub:2018,EUriMeetingSeatChange:2100,EUriMeetingInvite:2101,EUriMeetingInviteResponse:2102,EUriMeetingKick:2103,EUriCharmValue:2104,EUriMeetingAnnouncementNotify:2105,EUriMeetingStatusChange:2106,EUriMeetingPairing:2107,EUriMeetingThemeChange:2108,EUriLinkMicSessionStatNotify:2200,EUriLinkMicListChangeNotify:2201,EUriLinkMicRandomInviteNotify:2202,EUriLinkMicAudienceAskUpNotice:2203,EUriLinkMicLinkMicClientDataChange:2204,EUriLinkMicLinkMicStatusChange:2205,EUriLinkMicAudienceLinkMicResultNotice:2206,EUriLinkMicUserInfoChange:2207,EUriSundryDiceGame:2300,EUriSundryFingerGuessingGame:2301,EUriSundryBasketballGame:2302,EUriSundryAlertBoxNotify:2304,EUriAirRaidEvent:2305,EUriSundryRandomGames:2306,EUriRouletteBet:2310,EUriGiftRoomBroadCastNotice:9e3,EUriGiftEffectBroadCastNotice:9001,EUriGiftRoomMgsBroadCastNotice:9002,EUriVoteRoomBroadCastNotice:9600,EUriVoteRoomBroadCastNoticeStart:9601,EUriVoteRoomBroadCastNoticeFinshed:9602,EUriAnchorLevelUp:9701,EUriAnchorLevelUpToAnchor:9702,EUriAnchorPanelInfo:9703,EUriAnchorPKNotifyAskPK:9731,EUriAnchorPKNotifyAnswerPK:9732,EUriAnchorPKNotifySyncGifts:9733,EUriAnchorPKNotifySyncTop3:9734,EUriAnchorPKNotifyPKStart:9735,EUriAnchorPKNotifyPKOverCountDown:9736,EUriAnchorPKNotifyPKOver:9737,EUriAnchorPKNotifyPKShowResultOver:9738,EUriAnchorPKNotifyCancelPK:9739,EUriAnchorPKNotifyPKSituation:9740,EUriAnchorPKNotifyReachHighLight:9741,EUriAnchorPKNotifyHighLightBanner:9742,EUriAnchorPKNotifyTips:9743,EUriAnchorPKNotifyClientDataChange:9744,EUriAnchorPKNotifyRidicule:9745,EUriVideoPlayBlackNotify:9800,EUriVideoPlayBlackNotify2:9801,EUriBGStatusNotice:9900,EUriBGWinnerNotice:9901,EUriCheckinNotice:1e4,EUriLuckyGiftNotice:10100,EUriLuckyGiftRewardRoom:10101,EUriLuckyAwardNotice:10102,EUriLuckyGiftSuperScoreChangeNotice:10103,EUriLuckyGiftPieceAwardNotice:10104,EUriLuckyGiftPrizeRecordListNotice:10105,EUriTaskBoxOpening:10200,EUriForceUserLogout:10300,EUriPickMeStart:10400,EUriPickMeEnd:10401,EUriPickMeDetails:10402,EUriPickMeWinners:10403,EUriPickMeTask:10404,EUriThirdPartyTokenAuthFailed:10500,EUriThirdPartyRepushSwitchChange:10501,EUriThirdPartyPickMeInvite:10502,EUriThirdPartyPickMeInviteEnd:10503,EUriThirdPartyStreamStatusNotify:10504,EUriThirdPartyStreamStopNotify:10505,EUriThirdPartyActionNotify:10506,EUriItemTallyNotice:10600,EUriItemTallyWishNotice:10601,EUriItemTallyWishNewNotice:10602,EUriItemTallyWishNewSysNotify:10603,EUriItemTallyNewWishNotice:10604,EUriFortuneGiftPrizeNotice:10700,EUriFortuneGiftPrizeRecordNotice:10701,EUriFortuneGiftSuperFortuneChangeNotice:10702,EUriFortuneGiftStreamerEffectNotice:10703,EUriGoldBeanLotteryBuyOrSellNotice:10800,EUriRouletteBetNotice:10801,EUriRouletteStatusUpdateNotice:10802,EUriRouletteRewardNotice:10803,EUriGamePromoteExhaustNotice:10804,EUriActivityPromoteInviteNotice:10900,EUriActivityPromoteGroupUpStartNotice:10901,EUriOpenLotteryNotice:11e3,EUriInteractiveGiftUpdateNotice:11100,EUriInteractiveGiftWinnerRecordNotice:11101,EUriUserBoxTaskDoubleCoinPrizeNotice:11200,EUriWealthFamilyClumpEndNotice:11300,EUriWatchTogetherStart:11400,EUriTurntableStartNotice:11500,EUriTurntableParticipateNotice:11501,EUriTurntableExitNotice:11502,EUriTurntableRoundNotice:11503,EUriTurntableEndNotice:11504,EUriTurntableNotice:11505,EUriTurntableSysMsg:11506,EUriUserLevelExpAddNotice:11600,EUriUserGrowthTask:11601,EUriWealthSeatUpdateNotice:11700,EUriFamilyClumpUpdateNotice:11800,EUriRoomFamilyClumpListUpdateNotice:11801,EUriRoomFamilyClumpWinnerNotice:11802,EUriSecPackTypeShennongLagSolvedNotice:11900,EUriActivityDrawUpdateNotice:12e3,EUriActivityDrawWinnerNotice:12001,EUriSupperTreasureGiftNotice:12100,EUriSupperTreasureFairyGiftNotice:12101,EUriBossGameStatNotice:12200,EUriBossGameRewardNotice:12201,EUriBossGameTaskNotice:12202,EUriBossGameWarriorNotice:12203,EUriFisingKingFishPrizePoolNotice:12300,EUriFishingWinningKingFishNotice:12301,EUriPickUpStatNotice:12400,EUriPickUpPairingNotice:12401,EUriConfessSystemMessageNotice:12500,EUriFirstPayGuideSGift:20001,EUriRevenuePanelBean:20002,EUriActivityTaskBean:20003,EUriActivityCommonPanel:20004,EUriRoomRankChange:20005,EUriRoomRankUp:20006,EUriRoomFansRankChange:20007,EUriRoomGiftsChange:20008,EUriResRankUp:20009,EUriLogCollect:20010,EUriActivitySign:20011,EUriMissionOpen:20012,EUriMissionMessage:20013,EUriMissionInfo:20014,EUriRoomGiftRankChange:20015,EUriCurrentLiveRank:20016,EUriLiveHouseShowChange:20017,EUriWeekGiftRank:20018,EUriRobWeekGiftInfo:20019,EUriRegularLottery:20020,EUriGambleRadioChange:4e4,EUriGuessRadioChange:40001,EUriGambleItemChange:40002,EUriGuessPannel:40003,EUriGamblePannel:40004,EUriGambleBankerChange:40005,EUriGambleStatusChange:40006,EUriGuessStatusChange:40007,EUriGambleResult:40008,EUriGuessResult:40009,EUriAuditPunish:40010,EUriEmperorListUpdate:40011,EUriEmperorSceptreMsg:40012,EUriEmperorScreenMsg:40013,EUriLiveInfoToPC:40014,EUriFollow:40015,EUriReJoinClubTip:40016,EUriFanUpgradeClub:40017,EUriFanJoinClub:40018,EUriSubcriptionNotice:40019,EUriMicroNotifyUser:40020,EUriRoyalWealthNotice:40021,EUriRedHotNotice:40022,EUriFanIntimacy:40023,EUriNewRedHotNotice:40024,EUriIntimacyProgress:40025,EUriGuildRecommendToAnchor:40026,EUriGuildRecommendToUser:40027,EUriGuessRadioChangeWithCurrency:40028,EUriGuessStatusChangeWithCurrency:40029,EUriGuessResultWithCurrency:40030,EUriGuessPanelWithCurrency:40031,EUriOfflineRecommendV2ToUser:40032,EUriVideoCommentReplyNotice:40033,EUriMatchQuizRadioChange:40034,EUriMatchQuizPannel:40035,EUriMatchQuizStatusChange:40036,EuriVoiceRoomAnnounceChange:40037,EUriSubcriptionNoticeV2:40038,EUriFansLevelUpV2:40039,EUriFansLevelUpPopup:40040,EUriFanUpgradeClubV2:40041,EUriFanJoinClubV2:40042,EUriUserClipSwtichChange:40043,EUriUserRecordSwtichChange:40044});n.a.EURI=r,e.a=r},"4fRq":function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},"4feL":function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=i;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}},"4kuk":function(t,e,i){var n=i("SfRM"),r=i("Hvzi"),o=i("u8Dt"),a=i("ekgI"),s=i("JSQU");function u(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=r,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},"4oOK":function(t,e,i){"use strict";e.a=function(t){return new Promise((function(e){return setTimeout((function(){return e()}),t)}))}},"4pQm":function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var n=i("QILm"),r=i.n(n),o=i("J4zp"),a=i.n(o),s=i("lwsE"),u=i.n(s),c=i("W8MJ"),l=i.n(c),h=i("lSNA"),d=i.n(h),f=i("FpfA"),p=i("KFtC"),m=i("nimoua"),y=i.n(m),v=["addition"];function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){d()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var S=function(){function t(e,i,n){var r=this;u()(this,t),d()(this,"onLoadStart",(function(){r.reset(),r.startBlackScreenReport(),r.startCarltonReport()})),d()(this,"onLoadedData",(function(){var t,e,i,n=r.getStatInfo(),o=n.loadedDataTime,a=void 0===o?0:o,s=n.loadedStartTime,u=void 0===s?0:s,c=n.realLoadedStartTime,l=void 0===c?0:c,h=n.loadedMetadataTime,d=void 0===h?0:h,f=n.fetchStartToSrcTime,p=void 0===f?0:f;r.loadedData=!0,r.loadTime=a-u,r.seg_0=l-u,r.seg_1=d-l,r.seg_2=a-d,r.seg_3=p,null!==(t=window.performance)&&void 0!==t&&null!==(e=t.timing)&&void 0!==e&&e.fetchStart&&r.enableReportPageTime&&(r.durationFromPageFetchStart=Date.now()-window.performance.timing.fetchStart),null!==(i=r.config)&&void 0!==i&&i.isWap&&r.reportWapLoadTime(),r.startVideoInfoReport(),r.startDelayReport(),r.blackScreenTimeout&&(clearTimeout(r.blackScreenTimeout),r.reportBlackScreen())})),d()(this,"onEnded",(function(){r.ended||(r.ended=!0,r.reset())})),d()(this,"onPlay",(function(){r.ended&&(r.ended=!1,r.startCarltonReport(),r.startVideoInfoReport())})),d()(this,"onGetPullInfo",(function(t){var e=["live","replay"].indexOf(t)>=0;-1===r.durationFromPageFetchStart&&e&&r.config.isLandingPage&&(r.enableReportPageTime=!0,r.durationFromPageFetchStart=0)})),d()(this,"onStreamInfoUpdate",(function(t){var e=t.value,i=void 0===e?{}:e,n=i.rate,o=i.cdn,a=i.hyCdn,s=void 0===a?0:a,u=i.streamName,c=void 0===u?"":u,l=i.url,h=i.mediaType,d=void 0===h?"":h,f=i.streamSource,p=void 0===f?"":f,m=i.bitrate,y=void 0===m?-1:m,v=i.width,g=void 0===v?"":v,_=i.height,S=void 0===_?"":_,w=i.isSrc,b=void 0===w?-1:w,I=i.backsrc,T=void 0===I?"":I,P=r.parent.const.MEDIA_TYPE_MAP;r.rate="".concat(n),r.cdn="".concat(o),r.hyCdn="".concat(s),r.streamName="".concat(c),r.streamUrl=l,r.mediaType="".concat(P[d]),r.streamSource="".concat(p),r.bitrate=y,r.width="".concat(g),r.height="".concat(S),r.isSrc="".concat(b),r.backsrc="".concat(T)})),d()(this,"onParentIsIdleStateChange",(function(t){t.value&&r.reset()})),d()(this,"onParentConfigChange",(function(t){var e=t.value,i=e.roomId,n=void 0===i?r.roomId:i,o=e.businessType,a=void 0===o?r.businessType:o,s=e.templateType,u=void 0===s?r.templateType:s;r.config=_(_({},r.config),{},{roomId:n,businessType:a,templateType:u})})),d()(this,"reportBlackScreen",(function(){if(r.parent){var t=r.parent.state.dataLoaded,e=w(),i={nameSpace:"video",key:"blackscreen",field:{value:t?0:1},addition:{browser:y.a.appBrowser.name,browser_version:y.a.appBrowser.version,os:y.a.os.name,os_version:y.a.os.version}},n=r.getVideoInfo(i);f.a.report(n,e),t||r.autoFeedback()}})),this.config=n,this.parent=e,this.playerConfig=i,this.loadStartTS=0,this.loadTime=0,this.seg_0=0,this.seg_1=0,this.seg_2=0,this.seg_3=0,this.durationFromPageFetchStart=-1,this.enableReportPageTime=!1,this.loadedData=e.state.dataLoaded,this.ended=!1,this.carltonIndex=0,this.codedFrames=0,this.version="1.2.0",this.carltonTimeout=0,this.videoInfoTimeout=0,this.blackScreenTimeout=0,this.delayStatTimeout=0,this.onStreamInfoUpdate({value:e.streamInfo||{}}),this.listenAllParentEvent(),this.loadedData&&this.onLoadedData()}return l()(t,[{key:"dispose",value:function(){this.reset(),this.removeAllParentEvent()}},{key:"listenAllParentEvent",value:function(){var t=this.parent,e=this.parent.events,i=e.STREAM_INFO_UPDATE,n=e.LOAD_START;t.on("loadeddata",this.onLoadedData),t.on("ended",this.onEnded),t.on("play",this.onPlay),t.on(i,this.onStreamInfoUpdate),t.on(n,this.onLoadStart),t.onConfigChange(this.onParentConfigChange),t.onStateChange("isIdle",this.onParentIsIdleStateChange)}},{key:"removeAllParentEvent",value:function(){var t=this.parent,e=this.parent.events,i=e.STREAM_INFO_UPDATE,n=e.LOAD_START;t.off("loadeddata",this.onLoadedData),t.off("ended",this.onEnded),t.off("play",this.onPlay),t.off(i,this.onStreamInfoUpdate),t.off(n,this.onLoadStart),t.offConfigChange(this.onParentConfigChange),t.offStateChange("isIdle",this.onParentIsIdleStateChange)}},{key:"reportLoadTime",value:function(){var t=this.getStatInfo(),e=t._initRange,i=void 0===e?[]:e,n=t._handleBeforePullStreamRange,r=void 0===n?[]:n,o=t._pullStreamRange,s=void 0===o?[]:o,u=t._otherRange,c=void 0===u?[]:u,l=a()(c,3),h=l[0],d=void 0===h?0:h,p=l[1],m=void 0===p?0:p,y=l[2],v=void 0===y?Date.now():y,g={value:b(s[1],s[0]),ui_value:b(r[1],i[0]),video_value:b(s[1],s[0])};d||(g.click_room=b(s[1],i[0]));var _=w(),S={nameSpace:"video",key:"loadtimeout",field:g},I=this.getVideoInfo(S);"string"===typeof window.__clickRoomFrom?(I.dim.page_source=window.__clickRoomFrom.toLowerCase().replace(/-/g,"_"),window.__clickRoomFrom=""):d?I.dim.page_source=I.dim.mode:this.isReportedLoadTime?I.dim.page_source="player_load_again":I.dim.page_source="other",d?window.performance&&(I.field.page=b(v,window.performance.timing.fetchStart)):window.__clickRoomTs=0,I.dim.prefetch=m?"1":"0",f.a.report(I,_),this.isReportedLoadTime=!0}},{key:"reportWapLoadTime",value:function(){var t=this.loadTime,e=this.parent,i=this.seg_0,n=this.seg_1,r=this.seg_2,o=this.seg_3,a=window.__clickRoomTs,s=void 0===a?0:a,u=w(),c={nameSpace:"video",key:"loadtimeout",field:{seg_0:i,seg_1:n,seg_2:r,seg_3:o,value:t}},l=this.getVideoInfo(c);"string"===typeof window.__clickRoomFrom?(l.dim.page_source=window.__clickRoomFrom.toLowerCase().replace("-","_"),window.__clickRoomFrom=""):this.enableReportPageTime?l.dim.page_source=l.dim.mode:this.isReportedLoadTime?l.dim.page_source="player_load_again":l.dim.page_source="other",this.enableReportPageTime&&(l.field.page=this.durationFromPageFetchStart,this.enableReportPageTime=!1),s>0&&(l.dim.prefetch=e.usedExistedStreamInfo?"1":"0",l.field.click_room=Object(p.h)()-s,window.__clickRoomTs=0),f.a.report(l,u),this.isReportedLoadTime=!0}},{key:"startCarltonReport",value:function(){var t=this;clearTimeout(this.carltonTimeout);var e=window.navigator&&window.navigator.webdriver;this.carltonTimeout=setTimeout((function(){var i,n=t.carltonCount,r=void 0===n?0:n,o=t.getStatInfo(),a=o.carltonCount,s=o.touchPoint,u=a-r,c=w();t.carltonIndex+=1;var l=t.getVideoInfo({nameSpace:"video",key:"videocarlton",field:{value:u>0?100:0,sid:t.carltonIndex},addition:{videocarltoncount:"".concat(u),touch_point:s,is_automated:e?"1":"0",referer:(null===(i=document)||void 0===i?void 0:i.referrer)||""}});f.a.report(l,c),t.carltonCount=a,t.startCarltonReport()}),2e4)}},{key:"startVideoInfoReport",value:function(){var t=this;clearTimeout(this.videoInfoTimeout),this.videoInfoTimeout=setTimeout((function(){var e=t.getStatInfo(),i=e.codedFrames,n=void 0===i?0:i,r=e.jitterBuffer,o=void 0===r?0:r,a=n-t.codedFrames,s=w(),u=t.getVideoInfo({nameSpace:"video",key:"videoinfo",field:{value:11e3},addition:{packet_count:"".concat(a),dcoded_frame_count:"0",real_time_bit_rate:"0",render_frame_count:"0",real_jitter_buffer:"".concat(o)}});t.codedFrames=n,f.a.report(u,s),t.startVideoInfoReport()}),2e4)}},{key:"startDelayReport",value:function(){var t=this;clearTimeout(this.delayStatTimeout),this.delayStatTimeout=setTimeout((function(){var e=t.parent;if(e&&e.getAvgDelayStatData){var i=t.parent.getAvgDelayStatData(),n=0,r=w();(i=i.filter((function(t){return!!t&&t<3e4})))&&i.length&&(i.forEach((function(t){n+=t})),n=Math.floor(n/i.length));var o=t.getVideoInfo({nameSpace:"video",key:"playdelay",field:{value:n}});f.a.report(o,r),t.startDelayReport()}}),2e4)}},{key:"startBlackScreenReport",value:function(){clearTimeout(this.blackScreenTimeout),this.blackScreenTimeout=setTimeout(this.reportBlackScreen,1e4)}},{key:"reportLoadError",value:function(){var t=w(),e=this.getVideoInfo({nameSpace:"video",key:"pullerror",field:{value:1}});f.a.report(e,t)}},{key:"reportLoadTimeout",value:function(){var t=w(),e=this.getVideoInfo({nameSpace:"video",key:"pulltimeout",field:{value:1}});f.a.report(e,t)}},{key:"getBaseInfo",value:function(t){var e=t.nameSpace,i=t.key,n=t.field,r=this.config,o=r.roomId,a=void 0===o?"0":o,s=r.businessType,u=void 0===s?"1":s,c=r.templateType,l=void 0===c?"1":c,h=r.country,d=void 0===h?"other":h,f=r.version,p=void 0===f?"1.0.0":f,m=this.parent,y=(m=void 0===m?{}:m).mode,v=m.const,g=(v=void 0===v?{}:v).MODE,_=(g=void 0===g?{}:g).CLIP;return{name:"".concat("nimo",".").concat(e,".").concat(i),field:n,dim:{room_id:"".concat(y===_?"v":"").concat(a),biz_type:"".concat(u),live_template:"".concat(l),country_flg:"".concat(d),sub_version:p}}}},{key:"getVideoInfo",value:function(t){var e,i=((null===(e=window)||void 0===e?void 0:e.navigator)||{}).connection,n=(i=void 0===i?{}:i).effectiveType,o=void 0===n?"":n,a=t.addition,s=void 0===a?{}:a,u=r()(t,v),c=this.getBaseInfo(u),l=this.parent,h=this.cdn,d=void 0===h?"0":h,f=this.hyCdn,p=void 0===f?"0":f,m=this.rate,g=void 0===m?"2":m,S=this.streamName,w=void 0===S?"":S,b=this.streamUrl,I=void 0===b?"":b,T=this.streamSource,P=void 0===T?"":T,E=this.mediaType,k=void 0===E?"":E,R=this.config,C=R.uid,O=void 0===C?"0":C,A=R.playerGreyGroup,L=void 0===A?0:A,N=this.width,M=this.height,U=this.isSrc,D=this.backsrc,B=this.bitrate,F=l.dotType,x=void 0===F?"1":F,j=l.mode,V=void 0===j?"":j,G=l.isLiveType(),H=V.toLowerCase();return c.field=_(_({},c.field),{},{bitrate:B}),G&&(c.field.cdn_node_ip=l.getCdnSip()),c.dim=_(_({},c.dim),{},{viewer_uid:"".concat(O||0)||"0",cdn_flg:d,hy_cdn_flg:p,rate_flg:"0"===g||"1"===g?"".concat(l.getVideoRate()):g,stream_name:G?w:I,stream_type:G?"0":"".concat(x),stream_source:P,media_type:k,player_version:L?"hy":"nimo",network:o,mode:H,page_type:H,width:N,height:M,is_raw:U,publish_path:D,is_crawler:y.a.isCrawler?"1":"0"},s),c}},{key:"reset",value:function(){clearTimeout(this.carltonTimeout),clearTimeout(this.videoInfoTimeout),clearTimeout(this.blackScreenTimeout),clearTimeout(this.delayStatTimeout),this.loadedData=!1,this.carltonIndex=0,this.carltonCount=0,this.codedFrames=0,this.isReportedLoadTime=!1,this.loadTime=0,this.seg_0=0,this.seg_1=0,this.seg_2=0,this.seg_3=0}},{key:"getStatInfo",value:function(){return this.parent.plugins.get("stat")||{}}},{key:"autoFeedback",value:function(){var t;return this.parent&&"function"===typeof this.parent.autoFeedback&&(t=this.parent).autoFeedback.apply(t,arguments)}}]),t}();function w(){return Math.floor(Date.now()/1e3)}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t-e||i}},"4sDh":function(t,e,i){var n=i("4uTw"),r=i("03A+"),o=i("Z0cm"),a=i("wJg7"),s=i("shjB"),u=i("9Nap");t.exports=function(t,e,i){for(var c=-1,l=(e=n(e,t)).length,h=!1;++c<l;){var d=u(e[c]);if(!(h=null!=t&&i(t,d)))break;t=t[d]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&s(l)&&a(d,l)&&(o(t)||r(t))}},"4uTw":function(t,e,i){var n=i("Z0cm"),r=i("9ggG"),o=i("GNiM"),a=i("dt0z");t.exports=function(t,e){return n(t)?t:r(t,e)?[t]:o(a(t))}},"53oe":function(t,e,i){"use strict";i.d(e,"b",(function(){return h})),i.d(e,"a",(function(){return d})),i.d(e,"e",(function(){return f})),i.d(e,"c",(function(){return p})),i.d(e,"d",(function(){return m})),i.d(e,"y",(function(){return y})),i.d(e,"x",(function(){return v})),i.d(e,"H",(function(){return g})),i.d(e,"z",(function(){return _})),i.d(e,"u",(function(){return S})),i.d(e,"E",(function(){return w}));var n=i("lSNA"),r=i.n(n),o=i("J4zp"),a=i.n(o),s=i("w6NW"),u=i("KEvM"),c=(i("j0d6"),i("oedx"));i.d(e,"j",(function(){return c.K})),i.d(e,"i",(function(){return c.J})),i.d(e,"I",(function(){return c.eb})),i.d(e,"p",(function(){return c.Q})),i.d(e,"D",(function(){return c.ab})),i.d(e,"w",(function(){return c.W})),i.d(e,"J",(function(){return c.fb})),i.d(e,"s",(function(){return c.T})),i.d(e,"h",(function(){return c.I})),i.d(e,"r",(function(){return c.S})),i.d(e,"C",(function(){return c.Z})),i.d(e,"q",(function(){return c.R})),i.d(e,"F",(function(){return c.cb})),i.d(e,"g",(function(){return c.H})),i.d(e,"m",(function(){return c.N})),i.d(e,"t",(function(){return c.V})),i.d(e,"k",(function(){return c.L})),i.d(e,"f",(function(){return c.G})),i.d(e,"l",(function(){return c.M})),i.d(e,"o",(function(){return c.P})),i.d(e,"n",(function(){return c.O})),i.d(e,"B",(function(){return c.Y})),i.d(e,"A",(function(){return c.X})),i.d(e,"G",(function(){return c.db}));i("OLmr");var l=i("gW2+");i.d(e,"v",(function(){return l.b}));var h="update_home_langpkg",d="update_header_nav_active",f="update_sidebar_location",p="update_player",m="update_home_profile_langpkg",y=function(t){var e=t||-1;return function(t){return Promise.all([Object(u.c)(i("wlnV"),e),Object(u.c)(i("aIjZ"),e)]).then((function(e){var i=a()(e,2),n={login:i[0],home:i[1]};return t({type:h,payload:n}),n}))}},v=function(t){return{type:d,payload:t}},g=function(t){return{type:f,payload:t}},_=function(t,e){return function(i){var n=Object(u.e)(t);if(!n)return Promise.reject(new Error("is not a lang registry"));var o=n.namespace.replace(/^common_/,"");return Object(u.c)(t,e).then((function(t){return i({type:h,payload:r()({},Object(s.i)(o),t)}),t}))}},S=function(t){return _(i("b30m"),t)},w=function(t){return function(e){return e({type:p,payload:t})}}},"54MT":function(t,e,i){"use strict";i.r(e),e.default={namespace:"js_home",loaders:{1025:function(){return i.e("ea1c9").then(i.bind(null,"1N4B"))},1028:function(){return i.e("b1a52").then(i.bind(null,"wo/p"))},1033:function(){return i.e("333b5").then(i.bind(null,"0Abj"))},1034:function(){return i.e("142a2").then(i.bind(null,"1o4R"))},1041:function(){return i.e("73199").then(i.bind(null,"NIvA"))},1046:function(){return i.e("2b584").then(i.bind(null,"7o5Q"))},1049:function(){return i.e("41ad9").then(i.bind(null,"coaa"))},1054:function(){return i.e("1c8be").then(i.bind(null,"xg5H"))},1055:function(){return i.e("bdab3").then(i.bind(null,"ctZ2"))},1057:function(){return i.e("a313e").then(i.bind(null,"cHo5"))},1066:function(){return i.e("91bea").then(i.bind(null,"cZJ3"))},1081:function(){return i.e("fa578").then(i.bind(null,"Wvl3"))},1086:function(){return i.e("37cd6").then(i.bind(null,"bStp"))},1124:function(){return i.e("222aa").then(i.bind(null,"dOvY"))}}}},"5BGN":function(t,e,i){"use strict";i.d(e,"d",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return s}));var n=i("KkFV"),r="gift-record-height",o=.15,a=.5;function s(){var t=n.b.get(r);if("string"===typeof t){var e=Number(t.slice(0,-1));if(!isNaN(e)&&e>=100*o&&e<=100*a)return t}return"20%"}},"5Bev":function(t,e,i){"use strict";i.d(e,"a",(function(){return b})),i.d(e,"b",(function(){return I}));var n=i("yXPU"),r=i.n(n),o=i("lSNA"),a=i.n(o),s=(i("ls82"),i("bUty")),u=i("tESU"),c=i("8Eie"),l=i("q1tI"),h=i("KkFV");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var p="client-chat-settings",m="client-chat-conf-cache",y=function(t){var e="",i=null;try{(e=h.b.get(t))&&(i=JSON.parse(e))}catch(n){}return i},v=y(m),g=y(p),_=!!g,S=Object(s.atom)(f(f({},{chat_pickme_switch:!1,chat_enter_effect_switch:!1,chat_gift_effect_switch:!1}),g||v)),w=Object(s.atom)((function(t){return t(S)}),(function(t,e,i){var n="function"===typeof i?i(t(S)):i;n.__no_store__?(delete n.__no_store__,e(S,n)):(n.__touched__=!0,e(S,n),h.b.set(p,JSON.stringify(n)))}));w.onMount=function(t){_||r()(regeneratorRuntime.mark((function e(){var i,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.configCfModel.configSwitchList();case 2:i=e.sent,n=!1,r={},Object.keys({chat_pickme_switch:!1,chat_enter_effect_switch:!1,chat_gift_effect_switch:!1}).forEach((function(t){var e=null===i||void 0===i?void 0:i[t];if(e)try{var o,a=null===(o=JSON.parse(e))||void 0===o?void 0:o.status,s=1===a||"1"===a;r[t]=s,s&&(n=!0)}catch(u){}})),n&&h.b.set(m,JSON.stringify(r)),t((function(t){return t.__touched__?t:f(f(f({},{chat_pickme_switch:!1,chat_enter_effect_switch:!1,chat_gift_effect_switch:!1}),r),{},{__no_store__:!0})}));case 8:case"end":return e.stop()}}),e)})))()};var b=function(){return Object(s.useAtom)(w)},I=function(t){var e=Object(l.useMemo)((function(){return Object(u.selectAtom)(w,(function(e){return e[t]}))}),[t]);return Object(u.useAtomValue)(e)}},"5HW4":function(t,e,i){"use strict";i.d(e,"d",(function(){return L})),i.d(e,"c",(function(){return N})),i.d(e,"e",(function(){return M})),i.d(e,"a",(function(){return U}));var n,r=i("RIqP"),o=i.n(r),a=i("QILm"),s=i.n(a),u=i("lSNA"),c=i.n(u),l=i("yXPU"),h=i.n(l),d=i("lwsE"),f=i.n(d),p=i("W8MJ"),m=i.n(p),y=(i("ls82"),i("oaUe")),v=i("ztCj"),g={set:v.d,get:v.c,del:v.b},_=i("nimoua"),S=i.n(_);var w=function(){try{return function(){var t,e;return!navigator.userAgentData&&(S.a.isIOS||"Safari"===(null===(t=S.a.browser)||void 0===t?void 0:t.name)||navigator.platform&&/iPhone|iPod|iPad/.test(navigator.platform))&&indexedDB.databases?new Promise((function(t){var i=function(){return indexedDB.databases().finally(t)};e=setInterval(i,100),i()})).finally((function(){return clearInterval(e)})):Promise.resolve()}()}catch(t){return Promise.resolve()}},b=function(){return n||(n=w()),n},I=i("KkFV"),T=["iGiftId","sGiftName","sGiftDesc","iCostCoin","iCostDiamond"],P=["vBulletMsgEffect","vWorldBannerEffect"];function E(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?E(Object(i),!0).forEach((function(e){c()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var R="NIMO_GIFT_INFO",C="LAST_CONSUME_GIFT",O=[],A=function(){function t(){f()(this,t)}return m()(t,[{key:"getGiftListOfRoom",value:function(t){var e=this;return this._getGiftListByRoom(t).then((function(i){return e._wrapReplaceItem(i,t)}))}},{key:"_getGiftListByRoom",value:function(){var t=h()(regeneratorRuntime.mark((function t(e){var i,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getLocalGift();case 2:return i=t.sent,n=(i||{}).k,t.abrupt("return",y.i.getGiftListByRoom({sGiftItemListMD5:n,tAnchorInfo:e}).then((function(t){var e=t||{},n=e.iCode,a=e.vGiftItem,s=e.sGiftItemListMD5,u=e.vReplaceItem,c=e.iComboCountDown,l=e.vGiftTab;return n===y.h.kMRC_OK&&(r=k(k({},i),{},""!==s?{p:a,s:u,cd:c,k:s,t:l}:{s:u,cd:c,t:l}),o._updateLocalGift(r)),r})));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_wrapReplaceItem",value:function(t){var e,i=t||{},n=i.p,r=i.s,o=i.cd,a=i.t,u=[],c=(null===r||void 0===r||null===(e=r.reduce)||void 0===e?void 0:e.call(r,(function(t,e){return t[e.iGiftId]=e,t}),{}))||{};for(var l in n)if(Object.hasOwnProperty.call(n,l)){var h=n[l],d=(h=c[h.iGiftId]||h)||{},f=d.iGiftId,p=d.sGiftName,m=d.sGiftDesc,y=d.iCostCoin,v=d.iCostDiamond,g=s()(d,T);u.push(this._enhanceItem(k(k({},g),{},{iComboCountDown:o,iPropsId:f,sPropsName:p,sPropsDesc:m,fCostSilver:y,fCostGold:v})))}return{giftList:u,giftTabList:a}}},{key:"_enhanceItem",value:function(t){var e=t||{},i=e.fCostGold,n=e.fCostSilver,r=e.iCostBean,o=i>0||0===i&&0===n,a=r>0;return k(k({},t),{},a?{__GIFT_TYPE__:"chips",__GIFT_PRICE__:r,__GIFT_DIAMOND_PRICE__:r/100}:{__GIFT_TYPE__:o?"diamond":"coin",__GIFT_PRICE__:o?i:n,__GIFT_DIAMOND_PRICE__:i})}},{key:"_getLocalGift",value:function(){var t=h()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:return t.prev=2,t.next=5,g.get(R);case 5:e=t.sent,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"_updateLocalGift",value:function(){var t=h()(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.set(R,e);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}]),t}();function L(t,e){if(!Array.isArray(t))throw new TypeError("giftList is not an array.");return t.find((function(t){return t.iPropsId===e}))}function N(t,e){if(!Array.isArray(t))throw new TypeError("giftList is not an array.");var i=e||{},n=i.__msgtype__,r=i.iItemType,o=i.iComboScore,a=i.iItemCount,u=i.mUpgradeEffect,c=void 0===u?[]:u,l=t.find((function(t){return t.iPropsId===r})),h=l||{},d=h.fCostGold,f=h.tGiftResource,p=(f=void 0===f?{}:f).tGiftEffect||{},m=p.vBulletMsgEffect,v=void 0===m?[]:m,g=p.vWorldBannerEffect,_=void 0===g?[]:g,S=s()(p,P),w=o*a*d,b=n===y.d,I={};b||(I=S);var T=c[y.f.EFFECT_TYPE_BULLET];return void 0!==T&&(w>=T||b)&&(I.vBulletMsgEffect=v.filter((function(t){return t.lTriggerCondition>=T}))),void 0!==(T=c[y.f.EFFECT_TYPE_WORLD_BANNER])&&(w>=T||b)&&(I.vWorldBannerEffect=_.filter((function(t){return t.lTriggerCondition>=T}))),k(k({},l),{},{tGiftEffect:I})}function M(){if(!O||!O.length){var t=I.b.get(C)||"";O=t.split(",").map((function(t){return Number(t)})).filter((function(t){return t}))}return o()(O||[])}function U(t){if(Number(t)){var e=M();e.unshift(t),O=o()(new Set(e)).slice(0,2),I.b.set(C,O.join(","))}}e.b=new A},"5IZv":function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"e",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"f",(function(){return u})),i.d(e,"g",(function(){return c})),i.d(e,"j",(function(){return l})),i.d(e,"i",(function(){return h})),i.d(e,"h",(function(){return d})),i.d(e,"k",(function(){return f}));i("KEvM");var n="set_meeting_info",r="set_content_country_List",o="set_content_country",a="set_royal_level_config",s="set_popout_state",u="set_self_room_link",c="base_update_langpkg";function l(t){return{type:n,meetingInfo:t}}function h(t){return{type:r,cCountryList:t}}function d(t){return{type:o,cCountry:t}}function f(t){return{type:a,royalLevelConfig:t}}},"5KyW":function(t,e,i){},"5MU4":function(t,e,i){var n=i("Bsg+");t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"5NfL":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="nimo-theme-dark bc1 n-as-rel bsc3 n-as-w'+(null==(__t="undefined"!==typeof isCollapse&&isCollapse?"50":"220")?"":__t)+'px">\n  <div class="n-as-fixed n-as-h100 bc1 n-as-w'+(null==(__t="undefined"!==typeof isCollapse&&isCollapse?"50":"220")?"":__t)+'px">\n    <div class="n-sk n-sk-t16 n-sk-min-w20px n-as-mrgh n-as-mrgv-lg"></div>\n    <div class="n-sk n-sk-t16 n-sk-min-w20px n-as-mrgh n-as-mrgv-lg"></div>\n    <div class="n-sk n-sk-t16 n-sk-min-w20px n-as-mrgh n-as-mrgv-lg"></div>\n    <div class="n-sk n-sk-t16 n-sk-min-w20px n-as-mrgh n-as-mrgv-lg"></div>\n  </div>\n</div>\n';return __p}},"5Pf0":function(t,e,i){var n=i("S/j/"),r=i("OP3Y");i("Xtr8")("getPrototypeOf",(function(){return function(t){return r(n(t))}}))},"5Tg0":function(t,e,i){(function(t){var n=i("Kz5y"),r=e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===r?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=s?s(i):new t.constructor(i);return t.copy(n),n}}).call(this,i("YuTi")(t))},"5WRv":function(t,e,i){var n=i("iNmH"),r=i("Qatm"),o=i("Zhxd"),a=i("kluZ");t.exports=function(t){return n(t)||r(t)||o(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},"5orL":function(t,e,i){"use strict";var n=i("ZMLX"),r=i("EoCF"),o=function(){this.sResource=""};o.prototype._clone=function(){return new n.a.ChatMsgEffect},o.prototype._write=function(t,e,i){t.writeStruct(e,i)},o.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},o.prototype.writeTo=function(t){t.writeString(0,this.sResource)},o.prototype.readFrom=function(t){this.sResource=t.readString(0,!1,this.sResource)},n.a.ChatMsgEffect=o;var a=function(){this.sResource="",this.iRoomStatus=0,this.iMP4Width=0,this.iMP4Height=0,this.sMP4Resource=""};a.prototype._clone=function(){return new n.a.BigAnimEffect},a.prototype._write=function(t,e,i){t.writeStruct(e,i)},a.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},a.prototype.writeTo=function(t){t.writeString(0,this.sResource),t.writeInt32(1,this.iRoomStatus),t.writeInt32(2,this.iMP4Width),t.writeInt32(3,this.iMP4Height),t.writeString(4,this.sMP4Resource)},a.prototype.readFrom=function(t){this.sResource=t.readString(0,!1,this.sResource),this.iRoomStatus=t.readInt32(1,!1,this.iRoomStatus),this.iMP4Width=t.readInt32(2,!1,this.iMP4Width),this.iMP4Height=t.readInt32(3,!1,this.iMP4Height),this.sMP4Resource=t.readString(4,!1,this.sMP4Resource)},n.a.BigAnimEffect=a;var s=function(){this.sResource=""};s.prototype._clone=function(){return new n.a.MainAnimEffect},s.prototype._write=function(t,e,i){t.writeStruct(e,i)},s.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},s.prototype.writeTo=function(t){t.writeString(0,this.sResource)},s.prototype.readFrom=function(t){this.sResource=t.readString(0,!1,this.sResource)},n.a.MainAnimEffect=s;var u=function(){this.iStreamerLevel=0};u.prototype._clone=function(){return new n.a.ChatBannerEffect},u.prototype._write=function(t,e,i){t.writeStruct(e,i)},u.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},u.prototype.writeTo=function(t){t.writeInt32(0,this.iStreamerLevel)},u.prototype.readFrom=function(t){this.iStreamerLevel=t.readInt32(0,!1,this.iStreamerLevel)},n.a.ChatBannerEffect=u;var c=function(){this.sResource="",this.lTriggerCondition=0};c.prototype._clone=function(){return new n.a.BulletMsgEffect},c.prototype._write=function(t,e,i){t.writeStruct(e,i)},c.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},c.prototype.writeTo=function(t){t.writeString(0,this.sResource),t.writeInt64(1,this.lTriggerCondition)},c.prototype.readFrom=function(t){this.sResource=t.readString(0,!1,this.sResource),this.lTriggerCondition=t.readInt64(1,!1,this.lTriggerCondition)},n.a.BulletMsgEffect=c;var l=function(){this.sResource="",this.lTriggerCondition=0,this.iChannelType=0,this.iJumpType=0,this.sJumpUrl=""};l.prototype._clone=function(){return new n.a.WorldBannerEffect},l.prototype._write=function(t,e,i){t.writeStruct(e,i)},l.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},l.prototype.writeTo=function(t){t.writeString(0,this.sResource),t.writeInt64(1,this.lTriggerCondition),t.writeInt32(2,this.iChannelType),t.writeInt32(3,this.iJumpType),t.writeString(4,this.sJumpUrl)},l.prototype.readFrom=function(t){this.sResource=t.readString(0,!1,this.sResource),this.lTriggerCondition=t.readInt64(1,!1,this.lTriggerCondition),this.iChannelType=t.readInt32(2,!1,this.iChannelType),this.iJumpType=t.readInt32(3,!1,this.iJumpType),this.sJumpUrl=t.readString(4,!1,this.sJumpUrl)},n.a.WorldBannerEffect=l;i("vVVP");var h=function(){this.vChatMsgEffect=new r.Taf.Vector(new n.a.ChatMsgEffect),this.vBigAnimEffect=new r.Taf.Vector(new n.a.BigAnimEffect),this.vMainAnimEffect=new r.Taf.Vector(new n.a.MainAnimEffect),this.vChatBannerEffect=new r.Taf.Vector(new n.a.ChatBannerEffect),this.vBulletMsgEffect=new r.Taf.Vector(new n.a.BulletMsgEffect),this.vWorldBannerEffect=new r.Taf.Vector(new n.a.WorldBannerEffect),this.vStickerEffect=new r.Taf.Vector(new n.a.StickerEffect)};h.prototype._clone=function(){return new n.a.GiftEffect},h.prototype._write=function(t,e,i){t.writeStruct(e,i)},h.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},h.prototype.writeTo=function(t){t.writeVector(0,this.vChatMsgEffect),t.writeVector(1,this.vBigAnimEffect),t.writeVector(2,this.vMainAnimEffect),t.writeVector(3,this.vChatBannerEffect),t.writeVector(4,this.vBulletMsgEffect),t.writeVector(5,this.vWorldBannerEffect),t.writeVector(6,this.vStickerEffect)},h.prototype.readFrom=function(t){this.vChatMsgEffect=t.readVector(0,!1,this.vChatMsgEffect),this.vBigAnimEffect=t.readVector(1,!1,this.vBigAnimEffect),this.vMainAnimEffect=t.readVector(2,!1,this.vMainAnimEffect),this.vChatBannerEffect=t.readVector(3,!1,this.vChatBannerEffect),this.vBulletMsgEffect=t.readVector(4,!1,this.vBulletMsgEffect),this.vWorldBannerEffect=t.readVector(5,!1,this.vWorldBannerEffect),this.vStickerEffect=t.readVector(6,!1,this.vStickerEffect)},n.a.GiftEffect=h},"5wMN":function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="root" class="nimo-root" >\n    '+(null==(__t=__webpack_require__("NcXi")())?"":__t)+"\n    "+(null==(__t=__webpack_require__("k3tm")())?"":__t)+"\n</div>";return __p}},"5yvJ":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n,r=i("KkFV"),o=i("uq/f"),a="__yamid_new";function s(){if(!n){var t=r.a.get(a)||r.b.get(a)||function(){var t="";try{t=YA.cookie.get("__yamid_new")}catch(e){}return t}();t?n=t:(n=Object(o.a)(),window.__yamid_new=n,r.a.set(a,n,730),r.b.set(a,n))}return n}},"66+j":function(t,e,i){"use strict";var n=i("RIqP"),r=i.n(n);e.a=function(t,e){if(!e)return t;var i=(t||"").split("?"),n=Object.keys(e),o=new RegExp("(".concat(n.join("|"),")=(\\w|.)+")),a="undefined"!==typeof i[1]?i[1].split("&").filter((function(t){return!o.test(t)})):[],s=[].concat(r()(a),r()(n.map((function(t){return"".concat(t,"=").concat(e[t])}))));return"".concat(i[0]).concat(Array.isArray(s)&&s.length>0?"?".concat(s.join("&")):"")}},"69bn":function(t,e,i){t.exports=i("4KFe")(102)},"6sVZ":function(t,e){var i=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},"7/Bs":function(t,e){t.exports=/<%=([\s\S]+?)%>/g},"70i0":function(t,e,i){"use strict";i.d(e,"b",(function(){return z})),i.d(e,"a",(function(){return J})),i.d(e,"i",(function(){return Q})),i.d(e,"e",(function(){return X})),i.d(e,"d",(function(){return Z})),i.d(e,"c",(function(){return $})),i.d(e,"n",(function(){return tt})),i.d(e,"o",(function(){return et})),i.d(e,"h",(function(){return it})),i.d(e,"j",(function(){return nt})),i.d(e,"k",(function(){return rt})),i.d(e,"m",(function(){return ot})),i.d(e,"l",(function(){return at})),i.d(e,"f",(function(){return st})),i.d(e,"p",(function(){return ut})),i.d(e,"g",(function(){return ct})),i.d(e,"q",(function(){return lt}));i("I5cv");var n,r=i("QILm"),o=i.n(r),a=i("yXPU"),s=i.n(a),u=i("lwsE"),c=i.n(u),l=i("W8MJ"),h=i.n(l),d=i("PJYZ"),f=i.n(d),p=i("iWIM"),m=i.n(p),y=i("7W2i"),v=i.n(y),g=i("a1gu"),_=i.n(g),S=i("Nsbk"),w=i.n(S),b=i("RIqP"),I=i.n(b),T=i("lSNA"),P=i.n(T),E=(i("ls82"),i("f3Pk")),k=i("AUqF"),R=i("mI8m"),C=i("+xEq"),O=i("KFtC"),A=i("AA7u"),L=i("qxPZ"),N=i("mTTC"),M=function(){return(n?Promise.resolve(n):new Promise((function(t,e){try{N.default.getUserInfo().then((function(e){var i=e||{},r=i.guid,o=i.ua,a=i.country,s=i.udbUserId,u={};s&&(u.udbUserId=s),a&&(u.countryCode=a),o&&(u.UA=o),r&&(u.guid=r),n=u,t(u)}))}catch(i){e(i)}}))).catch((function(){return{}}))},U=["baseURL","method","data","transformRequest","transformResponse","paramType"];function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function F(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?B(Object(i),!0).forEach((function(e){P()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var x=/nimo/.test(navigator.userAgent),j=0,V=2,G=1;function H(t){return Array.isArray(t)?t.reduce((function(t,e){var i=e||{},n=i.key,r=i.value;return F(F({},t),{},P()({},"".concat(n),r))}),{}):t}function W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.code;return{code:i,isSuccess:[].concat(I()(e),[1,200]).indexOf(i)>-1}}function q(t){var e={};switch(t){case E.PARAMS_TYPE_SLASH:e=E.slashParamsConfig;break;case E.PARAMS_TYPE_BAR:e=E.barParamsConfig}return e}var K=Object(E.combine)(E.fetchAdapter,E.withRetry,Object(E.withCache)({length:50,maxAge:12e4})),Y=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),n=e.call(this,t),P()(f()(n),"prefix","oversea/nimo/api"),P()(f()(n),"version","v1"),P()(f()(n),"requestSource","WEB"),t&&void 0!==t.version&&(n.version=t.version),n}return h()(i,[{key:"fetch",value:function(){var t=s()(regeneratorRuntime.mark((function t(e,n){var r,a,s,u,c,l,h,d,f,p,y,v,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(r=n||{}).baseURL,s=r.method,u=void 0===s?"post":s,c=r.data,l=r.transformRequest,h=void 0===l?[]:l,d=r.transformResponse,f=void 0===d?[]:d,p=r.paramType,y=o()(r,U),v=q(p),t.next=4,M();case 4:return g=t.sent,t.abrupt("return",m()(w()(i.prototype),"fetch",this).call(this,e,F(F({server:k.API_SERVER_NAME.JAVA,baseURL:a||this.baseURL,method:u,adapter:K,encrypt:!1,decrypt:!0,data:F(F(F({},g),c),{},{requestSource:this.requestSource,iNetType:this.netType}),transformRequest:h.concat([function(t){var e;if(Object(E.validateParams)(null===n||void 0===n?void 0:n.queryParams)&&"post"===u.toLowerCase()&&Object(E.validateParams)(c)){var i=H(t);if(null===n||void 0===n||!n.withoutWrapper){var r=JSON.stringify(F({},i));i=null!==n&&void 0!==n&&n.encrypt?{keyType:V,body:Object(R.b)(r)}:{keyType:j,body:r}}e=Object(E.formData)(i)}return e}]),transformResponse:[function(t,e){return t.json().then((function(t){var i,n,r=W(t),o=r.code,a=r.isSuccess,s=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.keyType,u=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.result;return void 0===u?u=null===t||void 0===t?void 0:t.data:s!==V&&s!==G||null===e||void 0===e||!e.decrypt||(u="string"===typeof u&&""!==u?JSON.parse(Object(R.a)(u,s)):u),{data:u,code:o,isSuccess:a,config:e,rawData:t}}),(function(t){throw new E.NetError(t,e)}))}].concat(f)},v),y)));case 6:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"authFetch",value:function(t,e){try{if(this.authorize())return this.fetch(t,e);throw new Error("Authentication failure")}catch(i){return Promise.reject(i)}}},{key:"buildUri",value:function(t,e){return e=F({prefix:this.prefix,version:this.version},e),"".concat(e.prefix,"/").concat(e.version,"/").concat(t)}},{key:"authorize",value:function(){return this.udbBizToken&&this.udbUserId&&this.udbVersion}},{key:"getUserIdInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=A.a||{},i=e.user;i.sGuid||x||(i.sGuid=Object(O.j)());var n=F(F({},i),t||{}),r={lUid:n.uid,sGuid:n.sGuid,sToken:n.token,sUA:n.sUA,sLang:n.lang,sUDBVer:n.version,iRegOrigin:n.regOrigin,sCountry:n.sCountry,sRegion:n.sRegion,sOpSeq:n.sOpSeq,iNetType:n.iNetType};return n.sGuid&&(r.sGuid=n.sGuid),r}}]),i}(L.a),z=(e.r=Y,function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.apinimotv,n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y)),J=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.api_cf_domain,n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y),Q=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.paynimotv,n.defaultData={version:n.udbVersion,bizToken:n.udbBizToken,udbUserId:n.udbUserId,udbDeviceType:"WEB"},n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y),X=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.follownimotv,n.defaultData={udbDeviceType:"WEB",requestSource:"WEB"},n.defaultAuthData=F(F({},n.defaultData),{},{udbUserId:n.udbUserId,bizToken:n.udbBizToken,version:n.udbVersion}),n}return i}(Y),Z=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.follow_cf_dynamic_domain,n.defaultData={udbDeviceType:"WEB",requestSource:"WEB"},n.defaultAuthData=F(F({},n.defaultData),{},{udbUserId:n.udbUserId,bizToken:n.udbBizToken,version:n.udbVersion}),n}return i}(Y),$=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.eventnimotv,n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y),tt=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.upgrade_domain,n}return i}(Y),et=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.usernimotv,n}return i}(Y),it=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.offlinepush_domain,n}return i}(Y),nt=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.search_domain,n}return i}(Y),rt=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.search_static_domain,n}return i}(Y),ot=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.sail_rank_static_domain,n}return i}(Y),at=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.sail_rank_domain,n}return i}(Y),st=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.guessnimotv,n.defaultData={requestSource:"WEB"},n.defaultAuthData=F(F({},n.defaultData),{},{udbUserId:n.udbUserId,bizToken:n.udbBizToken,version:n.udbVersion}),n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y),ut=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.video_domain,n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y),ct=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.guild_domain,n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y),lt=function(t){v()(i,t);var e=D(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).baseURL=n.baseURL||C.a.vipnimotv,n}return h()(i,[{key:"fetch",value:function(t,e){return m()(w()(i.prototype),"fetch",this).call(this,t,F({paramType:E.PARAMS_TYPE_SLASH},e))}}]),i}(Y)},"711d":function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},"75qL":function(t,e,i){"use strict";i.d(e,"a",(function(){return x})),i.d(e,"b",(function(){return W}));i("I5cv");var n=i("pVnL"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("PJYZ"),l=i.n(c),h=i("7W2i"),d=i.n(h),f=i("a1gu"),p=i.n(f),m=i("Nsbk"),y=i.n(m),v=i("lSNA"),g=i.n(v),_=i("q1tI"),S=i.n(_),w=i("vARU"),b=i("KFtC"),I=i("66+j"),T=i("oJ+Q"),P=i("I+st"),E=function(t,e,i){var n=P.a.formatReportObj("liveroom_activityseat_".concat(t),"直播间_活动位".concat(t,"_曝光"),{activityID_:e,activityType:i});P.a.report(n)},k=function(t,e,i){var n=P.a.formatReportObj("liveroom_activityseat_".concat(t,"_click"),"直播间_活动位".concat(t,"_点击"),{activityID_:e,activityType:i});P.a.report(n)},R=i("TSYQ"),C=i.n(R),O=i("p1oI"),A=i("2/Zn").f.getInstance(),L=function(t){var e=t.src,i=t.roomInfo,n=t.handleModalClose,r=Object(I.a)(e,{_anchorid:null===i||void 0===i?void 0:i.auId,_roomid:null===i||void 0===i?void 0:i.roomId,_alise:null===i||void 0===i?void 0:i.alise,_gameid:null===i||void 0===i?void 0:i.gameId,_game:null===i||void 0===i?void 0:i.game,_anchorlang:null===i||void 0===i?void 0:i.anchorLang,_anchorcountrycode:null===i||void 0===i?void 0:i.anchorCountryCode,_roomsort:null===i||void 0===i?void 0:i.roomSort,_businesstype:null===i||void 0===i?void 0:i.businessType,_eventid:null===i||void 0===i?void 0:i.eventId,_teamid:null===i||void 0===i?void 0:i.teamId});return Object(_.useEffect)((function(){A.openActivityModal({url:r,target:"_modal",width:540,maskClosable:!1,footer:null,className:"act-message-iframe-modal",iframeStyle:{width:540,height:740,borderRadius:16},maskStyle:{background:"transparent"},onCancel:n})}),[]),null},N=i("cOjp"),M=i("CH3P");function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var D=N.b.log,B=function(t){d()(i,t);var e=U(i);function i(t){var n;a()(this,i),n=e.call(this,t),g()(l()(n),"modalClick",(function(t,e,i,r,o){k(i,r,o),n.setState({isShowModal:!0})})),g()(l()(n),"modalOnClose",(function(){if(n.iframe){var t=n.iframe,e="_".concat(n.rangeChar,"_closeWindow");try{t.contentWindow[e]&&t.contentWindow[e]()}catch(i){}}setTimeout((function(){n.setState({isShowModal:!1})}),200)})),g()(l()(n),"getIframe",(function(t){n.iframe=t})),g()(l()(n),"_getIframeType",(function(){var t=n.props.redirectUrl;try{var e=new URL(t),i=Object(O.a)("itype",e.search);return Number(i)}catch(r){}})),n.state={isShowModal:!1,isRender:!1};var r=Object(b.o)(64);return n.rangeChar=r,D("随机字符串",r),window["_".concat(r,"_roomEnter")]=b.J,window["_".concat(r,"_closeModal")]=n.modalOnClose,n}return u()(i,[{key:"shouldComponentUpdate",value:function(t,e){var i,n=this.props.roomInfo;return this.state.isShowModal!==(null===e||void 0===e?void 0:e.isShowModal)||(null===t||void 0===t||null===(i=t.roomInfo)||void 0===i?void 0:i.roomId)!==n.roomId}},{key:"componentWillUnmount",value:function(){window["_".concat(this.rangeChar,"_roomEnter")]=null,window["_".concat(this.rangeChar,"_closeModal")]=null}},{key:"render",value:function(){var t=this,e=this.props,i=e.redirectUrl,n=e.positionMap,r=e.index,o=e.id,a=e.activityType,s=e.picture,u=e.roomInfo,c=e.className,l=this.state.isShowModal;this.state.isRender=!0;var h=1===this._getIframeType();return S.a.createElement("div",{className:C()(c,"display-position-item n-as-mrgh")},S.a.createElement(w.a,{onClick:function(e){return t.modalClick(e,i,n[r],o,a)},width:72,src:s}),l?[h?S.a.createElement(L,{src:i,roomInfo:u,handleModalClose:this.modalOnClose,key:"0"}):null,h?null:S.a.createElement(M.a,{className:"nimo-room-resource-rank-modal",onCancel:this.modalOnClose,wrapClassName:"nimo-room-resource-rank-modal-wrap",title:!1,visible:l,footer:null,key:"1"},S.a.createElement("iframe",{ref:this.getIframe,src:Object(I.a)(i,{_rangechar:this.rangeChar,_anchorid:null===u||void 0===u?void 0:u.auId,_roomid:null===u||void 0===u?void 0:u.roomId,_alise:null===u||void 0===u?void 0:u.alise,_gameid:null===u||void 0===u?void 0:u.gameId,_game:null===u||void 0===u?void 0:u.game,_anchorlang:null===u||void 0===u?void 0:u.anchorLang,_anchorcountrycode:null===u||void 0===u?void 0:u.anchorCountryCode,_roomsort:null===u||void 0===u?void 0:u.roomSort,_businesstype:null===u||void 0===u?void 0:u.businessType,_eventid:null===u||void 0===u?void 0:u.eventId,_teamid:null===u||void 0===u?void 0:u.teamId}),className:"room-display-position-item-iframe"}))]:null)}}]),i}(S.a.Component);function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var x=function(t){d()(i,t);var e=F(i);function i(t){var n;return a()(this,i),n=e.call(this,t),g()(l()(n),"handleImgClick",(function(t,e,i,r,o){var a;t.preventDefault(),k(i,r,o);var s=e,u=(null===(a=Object(b.H)(s))||void 0===a?void 0:a.params)||{},c=n.props.roomInfo,l={_lang:Object(b.k)()};u._anchorId||(l._anchorId=null===c||void 0===c?void 0:c.anchorId),u._gameId||(l._gameId=null===c||void 0===c?void 0:c.gameId),u._roomId||(l._roomId=null===c||void 0===c?void 0:c.roomId),u._anchorCountryCode||(l._anchorCountryCode=null===c||void 0===c?void 0:c.anchorCountryCode),u._nickname||(l._nickname=encodeURIComponent(Object(T.b)(null===c||void 0===c?void 0:c.nickname))),s=Object(I.a)(s,l),window.open(s,"_blank")})),n.state={},n.init=!1,n}return u()(i,[{key:"componentDidMount",value:function(){var t=this.props.normalActivityList;if(t){var e=t.length;if(e>0){var i=t[0];E("A",i.id,i.activityType)}if(e>1){var n=t[1];E("B",n.id,n.activityType)}}}},{key:"render",value:function(){var t,e=this,i=this.props,n=i.normalActivityList,o=i.roomInfo,a={0:"A",1:"B"},s=(null===n||void 0===n||null===(t=n.slice)||void 0===t?void 0:t.call(n,0,2))||[];return(null===s||void 0===s?void 0:s.length)>0?n.slice(0,2).map((function(t,i){return 1===+(null===t||void 0===t?void 0:t.jump)?S.a.createElement("a",{key:null===t||void 0===t?void 0:t.id,className:"display-position-item n-as-mrgh-xxs n-as-pointer",onClick:function(n){return e.handleImgClick(n,null===t||void 0===t?void 0:t.redirectUrl,a[i],null===t||void 0===t?void 0:t.id)}},S.a.createElement(w.a,{width:72,src:null===t||void 0===t?void 0:t.picture})):S.a.createElement(B,r()({className:"n-as-mrgh-xxs",positionMap:a,index:i,key:null===t||void 0===t?void 0:t.id,roomInfo:o},t))})):null}}]),i}(S.a.Component),j=(i("njtY"),i("Wwog")),V=i("trzW"),G=i.n(V);function H(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var W=function(t){d()(i,t);var e=H(i);function i(t){var n;return a()(this,i),n=e.call(this,t),g()(l()(n),"reportShow",Object(j.a)((function(t){if(t){var e=n.props.specialActivity;E("S",e.id)}}))),g()(l()(n),"handleImgClick",(function(t){var e,i=n.props.specialActivity,r=i.redirectUrl,o=i.id;t.preventDefault(),k("S",o);var a=r,s=(null===(e=Object(b.H)(a))||void 0===e?void 0:e.params)||{},u=n.props.roomInfo,c={};s._anchorId||(c._anchorId=null===u||void 0===u?void 0:u.anchorId),s._gameId||(c._gameId=null===u||void 0===u?void 0:u.gameId),s._roomId||(c._roomId=null===u||void 0===u?void 0:u.roomId),s._anchorCountryCode||(c._anchorCountryCode=null===u||void 0===u?void 0:u.anchorCountryCode),a=Object(I.a)(a,c),window.open(a,"_blank")})),g()(l()(n),"handleCloseBtnClick",(function(){!function(){var t=P.a.formatReportObj("liveroom_activityseat_S_close","直播间_活动位S_关闭");P.a.report(t)}(),n.setState({showSpecialActivity:!1})})),n.state={showSpecialActivity:!0},n}return u()(i,[{key:"componentDidMount",value:function(){this.reportShow(this._showed)}},{key:"componentDidUpdate",value:function(){this.reportShow(this._showed)}},{key:"render",value:function(){var t=this.props,e=t.businessType,i=t.anchorPKOn,n=t.specialActivity,r=t.anchorPKOnFetched,o=this.state.showSpecialActivity;return this._showed=n&&!i&&o,(2===e?r&&!i&&o:o)&&n?S.a.createElement("div",{className:"special-activity-item n-as-rel n-as-mrgb"},S.a.createElement(w.a,{src:G.a,width:14,className:"close-icon n-as-abs n-as-pointer",onClick:this.handleCloseBtnClick}),S.a.createElement("a",{className:"n-as-pointer",onClick:this.handleImgClick},S.a.createElement(w.a,{width:108,src:n.picture}))):null}}]),i}(S.a.Component)},"77Zs":function(t,e,i){var n=i("Xi7e");t.exports=function(){this.__data__=new n,this.size=0}},"7DDg":function(t,e,i){"use strict";if(i("nh4g")){var n=i("LQAc"),r=i("dyZX"),o=i("eeVq"),a=i("XKFU"),s=i("D4iV"),u=i("7Qtz"),c=i("m0Pp"),l=i("9gX7"),h=i("RjD/"),d=i("Mukb"),f=i("3Lyj"),p=i("RYi7"),m=i("ne8i"),y=i("Cfrj"),v=i("d/Gc"),g=i("apmT"),_=i("aagx"),S=i("I8a+"),w=i("0/R4"),b=i("S/j/"),I=i("M6Qj"),T=i("Kuth"),P=i("OP3Y"),E=i("kJMx").f,k=i("J+6e"),R=i("ylqs"),C=i("K0xU"),O=i("CkkT"),A=i("w2a5"),L=i("69bn"),N=i("yt8O"),M=i("hPIQ"),U=i("XMVh"),D=i("elZq"),B=i("Nr18"),F=i("upKx"),x=i("hswa"),j=i("EemH"),V=x.f,G=j.f,H=r.RangeError,W=r.TypeError,q=r.Uint8Array,K="ArrayBuffer",Y="SharedArrayBuffer",z="BYTES_PER_ELEMENT",J=Array.prototype,Q=u.ArrayBuffer,X=u.DataView,Z=O(0),$=O(2),tt=O(3),et=O(4),it=O(5),nt=O(6),rt=A(!0),ot=A(!1),at=N.values,st=N.keys,ut=N.entries,ct=J.lastIndexOf,lt=J.reduce,ht=J.reduceRight,dt=J.join,ft=J.sort,pt=J.slice,mt=J.toString,yt=J.toLocaleString,vt=C("iterator"),gt=C("toStringTag"),_t=R("typed_constructor"),St=R("def_constructor"),wt=s.CONSTR,bt=s.TYPED,It=s.VIEW,Tt="Wrong length!",Pt=O(1,(function(t,e){return Ot(L(t,t[St]),e)})),Et=o((function(){return 1===new q(new Uint16Array([1]).buffer)[0]})),kt=!!q&&!!q.prototype.set&&o((function(){new q(1).set({})})),Rt=function(t,e){var i=p(t);if(i<0||i%e)throw H("Wrong offset!");return i},Ct=function(t){if(w(t)&&bt in t)return t;throw W(t+" is not a typed array!")},Ot=function(t,e){if(!w(t)||!(_t in t))throw W("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Lt(L(t,t[St]),e)},Lt=function(t,e){for(var i=0,n=e.length,r=Ot(t,n);n>i;)r[i]=e[i++];return r},Nt=function(t,e,i){V(t,e,{get:function(){return this._d[i]}})},Mt=function(t){var e,i,n,r,o,a,s=b(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,d=k(s);if(void 0!=d&&!I(d)){for(a=d.call(s),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);s=n}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,i=m(s.length),r=Ot(this,i);i>e;e++)r[e]=h?l(s[e],e):s[e];return r},Ut=function(){for(var t=0,e=arguments.length,i=Ot(this,e);e>t;)i[t]=arguments[t++];return i},Dt=!!q&&o((function(){yt.call(new q(1))})),Bt=function(){return yt.apply(Dt?pt.call(Ct(this)):Ct(this),arguments)},Ft={copyWithin:function(t,e){return F.call(Ct(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Ct(this),arguments)},filter:function(t){return At(this,$(Ct(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Ct(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return nt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Ct(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ot(Ct(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return rt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(Ct(this),arguments)},lastIndexOf:function(t){return ct.apply(Ct(this),arguments)},map:function(t){return Pt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Ct(this),arguments)},reduceRight:function(t){return ht.apply(Ct(this),arguments)},reverse:function(){for(var t,e=this,i=Ct(e).length,n=Math.floor(i/2),r=0;r<n;)t=e[r],e[r++]=e[--i],e[i]=t;return e},some:function(t){return tt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ft.call(Ct(this),t)},subarray:function(t,e){var i=Ct(this),n=i.length,r=v(t,n);return new(L(i,i[St]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,m((void 0===e?n:v(e,n))-r))}},xt=function(t,e){return At(this,pt.call(Ct(this),t,e))},jt=function(t){Ct(this);var e=Rt(arguments[1],1),i=this.length,n=b(t),r=m(n.length),o=0;if(r+e>i)throw H(Tt);for(;o<r;)this[e+o]=n[o++]},Vt={entries:function(){return ut.call(Ct(this))},keys:function(){return st.call(Ct(this))},values:function(){return at.call(Ct(this))}},Gt=function(t,e){return w(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return Gt(t,e=g(e,!0))?h(2,t[e]):G(t,e)},Wt=function(t,e,i){return!(Gt(t,e=g(e,!0))&&w(i)&&_(i,"value"))||_(i,"get")||_(i,"set")||i.configurable||_(i,"writable")&&!i.writable||_(i,"enumerable")&&!i.enumerable?V(t,e,i):(t[e]=i.value,t)};wt||(j.f=Ht,x.f=Wt),a(a.S+a.F*!wt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:Wt}),o((function(){mt.call({})}))&&(mt=yt=function(){return dt.call(this)});var qt=f({},Ft);f(qt,Vt),d(qt,vt,Vt.values),f(qt,{slice:xt,set:jt,constructor:function(){},toString:mt,toLocaleString:Bt}),Nt(qt,"buffer","b"),Nt(qt,"byteOffset","o"),Nt(qt,"byteLength","l"),Nt(qt,"length","e"),V(qt,gt,{get:function(){return this[bt]}}),t.exports=function(t,e,i,u){var c=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,f="set"+t,p=r[c],v=p||{},g=p&&P(p),_=!p||!s.ABV,b={},I=p&&p.prototype,k=function(t,i){V(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[h](i*e+n.o,Et)}(this,i)},set:function(t){return function(t,i,n){var r=t._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[f](i*e+r.o,n,Et)}(this,i,t)},enumerable:!0})};_?(p=i((function(t,i,n,r){l(t,p,c,"_d");var o,a,s,u,h=0,f=0;if(w(i)){if(!(i instanceof Q||(u=S(i))==K||u==Y))return bt in i?Lt(p,i):Mt.call(p,i);o=i,f=Rt(n,e);var v=i.byteLength;if(void 0===r){if(v%e)throw H(Tt);if((a=v-f)<0)throw H(Tt)}else if((a=m(r)*e)+f>v)throw H(Tt);s=a/e}else s=y(i),o=new Q(a=s*e);for(d(t,"_d",{b:o,o:f,l:a,e:s,v:new X(o)});h<s;)k(t,h++)})),I=p.prototype=T(qt),d(I,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&U((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=i((function(t,i,n,r){var o;return l(t,p,c),w(i)?i instanceof Q||(o=S(i))==K||o==Y?void 0!==r?new v(i,Rt(n,e),r):void 0!==n?new v(i,Rt(n,e)):new v(i):bt in i?Lt(p,i):Mt.call(p,i):new v(y(i))})),Z(g!==Function.prototype?E(v).concat(E(g)):E(v),(function(t){t in p||d(p,t,v[t])})),p.prototype=I,n||(I.constructor=p));var R=I[vt],C=!!R&&("values"==R.name||void 0==R.name),O=Vt.values;d(p,_t,!0),d(I,bt,c),d(I,It,!0),d(I,St,p),(u?new p(1)[gt]==c:gt in I)||V(I,gt,{get:function(){return c}}),b[c]=p,a(a.G+a.W+a.F*(p!=v),b),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){v.of.call(p,1)})),c,{from:Mt,of:Ut}),z in I||d(I,z,e),a(a.P,c,Ft),D(c),a(a.P+a.F*kt,c,{set:jt}),a(a.P+a.F*!C,c,Vt),n||I.toString==mt||(I.toString=mt),a(a.P+a.F*o((function(){new p(1).slice()})),c,{slice:xt}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){I.toLocaleString.call([1,2])}))),c,{toLocaleString:Bt}),M[c]=C?R:O,n||C||d(I,vt,O)}}else t.exports=function(){}},"7GkX":function(t,e,i){var n=i("b80T"),r=i("A90E"),o=i("MMmD");t.exports=function(t){return o(t)?n(t):r(t)}},"7Ix3":function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},"7Qtz":function(t,e,i){"use strict";var n=i("dyZX"),r=i("nh4g"),o=i("LQAc"),a=i("D4iV"),s=i("Mukb"),u=i("3Lyj"),c=i("eeVq"),l=i("9gX7"),h=i("RYi7"),d=i("ne8i"),f=i("Cfrj"),p=i("kJMx").f,m=i("hswa").f,y=i("Nr18"),v=i("fyDq"),g="ArrayBuffer",_="DataView",S="Wrong index!",w=n.ArrayBuffer,b=n.DataView,I=n.Math,T=n.RangeError,P=n.Infinity,E=w,k=I.abs,R=I.pow,C=I.floor,O=I.log,A=I.LN2,L="buffer",N="byteLength",M="byteOffset",U=r?"_b":L,D=r?"_l":N,B=r?"_o":M;function F(t,e,i){var n,r,o,a=new Array(i),s=8*i-e-1,u=(1<<s)-1,c=u>>1,l=23===e?R(2,-24)-R(2,-77):0,h=0,d=t<0||0===t&&1/t<0?1:0;for((t=k(t))!=t||t===P?(r=t!=t?1:0,n=u):(n=C(O(t)/A),t*(o=R(2,-n))<1&&(n--,o*=2),(t+=n+c>=1?l/o:l*R(2,1-c))*o>=2&&(n++,o/=2),n+c>=u?(r=0,n=u):n+c>=1?(r=(t*o-1)*R(2,e),n+=c):(r=t*R(2,c-1)*R(2,e),n=0));e>=8;a[h++]=255&r,r/=256,e-=8);for(n=n<<e|r,s+=e;s>0;a[h++]=255&n,n/=256,s-=8);return a[--h]|=128*d,a}function x(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,a=o>>1,s=r-7,u=i-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;n=256*n+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-P:P;n+=R(2,e),l-=a}return(c?-1:1)*n*R(2,l-e)}function j(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function V(t){return[255&t]}function G(t){return[255&t,t>>8&255]}function H(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function W(t){return F(t,52,8)}function q(t){return F(t,23,4)}function K(t,e,i){m(t.prototype,e,{get:function(){return this[i]}})}function Y(t,e,i,n){var r=f(+i);if(r+e>t[D])throw T(S);var o=t[U]._b,a=r+t[B],s=o.slice(a,a+e);return n?s:s.reverse()}function z(t,e,i,n,r,o){var a=f(+i);if(a+e>t[D])throw T(S);for(var s=t[U]._b,u=a+t[B],c=n(+r),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(a.ABV){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),w.name!=g}))){for(var J,Q=(w=function(t){return l(this,w),new E(f(t))}).prototype=E.prototype,X=p(E),Z=0;X.length>Z;)(J=X[Z++])in w||s(w,J,E[J]);o||(Q.constructor=w)}var $=new b(new w(2)),tt=b.prototype.setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||u(b.prototype,{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else w=function(t){l(this,w,g);var e=f(t);this._b=y.call(new Array(e),0),this[D]=e},b=function(t,e,i){l(this,b,_),l(t,w,_);var n=t[D],r=h(e);if(r<0||r>n)throw T("Wrong offset!");if(r+(i=void 0===i?n-r:d(i))>n)throw T("Wrong length!");this[U]=t,this[B]=r,this[D]=i},r&&(K(w,N,"_l"),K(b,L,"_b"),K(b,N,"_l"),K(b,M,"_o")),u(b.prototype,{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var e=Y(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Y(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return j(Y(this,4,t,arguments[1]))},getUint32:function(t){return j(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return x(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return x(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){z(this,1,t,V,e)},setUint8:function(t,e){z(this,1,t,V,e)},setInt16:function(t,e){z(this,2,t,G,e,arguments[2])},setUint16:function(t,e){z(this,2,t,G,e,arguments[2])},setInt32:function(t,e){z(this,4,t,H,e,arguments[2])},setUint32:function(t,e){z(this,4,t,H,e,arguments[2])},setFloat32:function(t,e){z(this,4,t,q,e,arguments[2])},setFloat64:function(t,e){z(this,8,t,W,e,arguments[2])}});v(w,g),v(b,_),s(b.prototype,a.VIEW,!0),e.ArrayBuffer=w,e.DataView=b},"7W2i":function(t,e,i){t.exports=i("4KFe")(221)},"7fqy":function(t,e){t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}},"7wO+":function(t,e,i){var n=i("www5"),r=i("rapA"),o=i("JmpY"),a=i("l0DE"),s=i("Uib+"),u=i("PtqM"),c=i("mv/X"),l=i("7GkX"),h=i("7/Bs"),d=i("Zqk6"),f=i("dt0z"),p=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/[()=,{}\[\]\/\s]/,g=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_=/($^)/,S=/['\n\r\u2028\u2029\\]/g,w=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var b=d.imports._.templateSettings||d;i&&c(t,e,i)&&(e=void 0),t=f(t),e=n({},e,b,a);var I,T,P=n({},e.imports,b.imports,a),E=l(P),k=o(P,E),R=0,C=e.interpolate||_,O="__p += '",A=RegExp((e.escape||_).source+"|"+C.source+"|"+(C===h?g:_).source+"|"+(e.evaluate||_).source+"|$","g"),L=w.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(A,(function(e,i,n,r,o,a){return n||(n=r),O+=t.slice(R,a).replace(S,s),i&&(I=!0,O+="' +\n__e("+i+") +\n'"),o&&(T=!0,O+="';\n"+o+";\n__p += '"),n&&(O+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),R=a+e.length,e})),O+="';\n";var N=w.call(e,"variable")&&e.variable;if(N){if(v.test(N))throw new Error("Invalid `variable` option passed into `_.template`")}else O="with (obj) {\n"+O+"\n}\n";O=(T?O.replace(p,""):O).replace(m,"$1").replace(y,"$1;"),O="function("+(N||"obj")+") {\n"+(N?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(I?", __e = _.escape":"")+(T?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+O+"return __p\n}";var M=r((function(){return Function(E,L+"return "+O).apply(void 0,k)}));if(M.source=O,u(M))throw M;return M}},"8+s/":function(t,e,i){"use strict";var n,r=i("q1tI"),o=(n=r)&&"object"===typeof n&&"default"in n?n.default:n;function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=!("undefined"===typeof window||!window.document||!window.document.createElement);t.exports=function(t,e,i){if("function"!==typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof e)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof i&&"function"!==typeof i)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!==typeof n)throw new Error("Expected WrappedComponent to be a React component.");var u,c=[];function l(){u=t(c.map((function(t){return t.props}))),h.canUseDOM?e(u):i&&(u=i(u))}var h=function(t){var e,i;function r(){return t.apply(this,arguments)||this}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i,r.peek=function(){return u},r.rewind=function(){if(r.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var t=u;return u=void 0,c=[],t};var a=r.prototype;return a.UNSAFE_componentWillMount=function(){c.push(this),l()},a.componentDidUpdate=function(){l()},a.componentWillUnmount=function(){var t=c.indexOf(this);c.splice(t,1),l()},a.render=function(){return o.createElement(n,this.props)},r}(r.PureComponent);return a(h,"displayName","SideEffect("+function(t){return t.displayName||t.name||"Component"}(n)+")"),a(h,"canUseDOM",s),h}}},"8/kV":function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"h",(function(){return s})),i.d(e,"c",(function(){return u})),i.d(e,"g",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"b",(function(){return h})),i.d(e,"a",(function(){return d}));var n=i("KkFV"),r=i("KFtC");i.d(e,"f",(function(){return r.E}));var o=i("IkgH"),a=function(t,e){var i=Object(r.f)();return!t.lcidText||e==i&&"1000"!=e?"":t.lcidText},s=function(t){var e=(null===t||void 0===t?void 0:t.alise)||(null===t||void 0===t?void 0:t.alias),i=u(t);return e?"/".concat(e):"/live/".concat(i)},u=function(t){return(null===t||void 0===t?void 0:t.roomId)||(null===t||void 0===t?void 0:t.roomID)||(null===t||void 0===t?void 0:t.roomid)||(null===t||void 0===t?void 0:t.id)},c=r.J,l=function(t){return{0:"normal",1:"match",2:"team",3:"star"}[t]||"normal"},h=function(t){var e=Object(r.k)(),i="1033"!=e&&e?e:"1000",n="?_theme=".concat(t||Object(r.t)());return"".concat("https://article.nimo.tv","/p/").concat(i,"/host-recruitment-activity100-rules.html").concat(n)},d=function(){var t=n.a.get("udbUserId"),e=n.a.get("version"),i=n.a.get("bizToken"),a="";t&&e&&i&&(t=encodeURIComponent(t),e=encodeURIComponent(e),i=encodeURIComponent(i),a+="&udb_uid=".concat(t,"&udb_version=").concat(e,"&udb_biztoken=").concat(i,"&udb_passport=").concat(""));var s=Object(r.k)(),u=Object(o.a)(),c=Object(r.l)();return a+="&lcid=".concat(s,"&_theme=").concat(u,"&mid=").concat(c),"".concat("https://kefu.zbase.nimo.tv/s/dist/tpl/nimofeedback.html?product=NIMOPC&typeId=1").concat(a)}},"88Gu":function(t,e){var i=Date.now;t.exports=function(t){var e=0,n=0;return function(){var r=i(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},"8Eie":function(t,e,i){"use strict";i.r(e),i.d(e,"configCfModel",(function(){return _}));i("I5cv");var n=i("lSNA"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("7W2i"),l=i.n(c),h=i("a1gu"),d=i.n(h),f=i("Nsbk"),p=i.n(f),m=i("70i0"),y=i("J66h");function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var _=new(function(t){l()(i,t);var e=g(i);function i(){return a()(this,i),e.apply(this,arguments)}return u()(i,[{key:"fetchLanguageSetting",value:function(){var t=this.buildUri("config/languageSetting"),e={method:"GET",logicErrorOpen:!0,paramsConnector:"?",queryParams:["keyType=".concat(100,"&body=").concat(y.Base64.encodeURI(JSON.stringify({requestSource:"WEB"})))]};return this.fetch(t,e).then((function(t){return(null===t||void 0===t?void 0:t.lcIds)||[]}))}},{key:"getLotterySwitchFilterByCountry",value:function(t,e){var i=this.buildUri("configSwitch/getLotterySwitchFilterByCountry"),n=e||[this.lang,this.countryCode,this.clang],o=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({requestSource:"WEB"},t),a=n.pop();void 0===a&&(a=""),a="".concat(a,"?keyType=").concat(100,"&body=").concat(y.Base64.encodeURI(JSON.stringify(o))),n.push(a);var s={method:"GET",queryParams:n};return this.fetch(i,s).then((function(t){return t&&t.lotterySwitchView||{}})).catch((function(){}))}},{key:"configSwitchList",value:function(t){var e=t||{},i=e.countryCode,n=void 0===i?this.countryCode:i,r=e.lang,o=void 0===r?this.lang:r,a=e.clientType,s=void 0===a?3:a,u=this.buildUri("configSwitch/configSwitchList"),c=[n,o,s],l=c.pop();void 0===l&&(l=""),l="".concat(l,"?keyType=").concat(100,"&body=").concat(y.Base64.encodeURI(JSON.stringify({requestSource:"WEB"}))),c.push(l);var h={method:"GET",queryParams:c,useCache:6e4};return this.fetch(u,h).then((function(t){return t&&t.configList||{}})).catch((function(){}))}}]),i}(m.a))({version:"v2"})},"8MEG":function(t,e,i){"use strict";var n=i("2OiF"),r=i("0/R4"),o=i("MfQN"),a=[].slice,s={},u=function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=a.call(arguments,1),s=function(){var n=i.concat(a.call(arguments));return this instanceof s?u(e,n.length,n):o(e,n,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},"8OQS":function(t,e){t.exports=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r},t.exports.default=t.exports,t.exports.__esModule=!0},"8g70":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.iPlay=0,this.iPlayBoxId=0,this.iRoyalLevel=0});r.prototype._clone=function(){return new n.a.GiftPlay},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt32(0,this.iPlay),t.writeInt32(1,this.iPlayBoxId),t.writeInt32(2,this.iRoyalLevel)},r.prototype.readFrom=function(t){this.iPlay=t.readInt32(0,!1,this.iPlay),this.iPlayBoxId=t.readInt32(1,!1,this.iPlayBoxId),this.iRoyalLevel=t.readInt32(2,!1,this.iRoyalLevel)},n.a.GiftPlay=r},"8kJd":function(t,e,i){var n=i("ZVIm")("keys"),r=i("1Alt");t.exports=function(t){return n[t]||(n[t]=r(t))}},"8oxB":function(t,e,i){t.exports=i("4KFe")(180)},"93q7":function(t,e,i){"use strict";var n=i("cz3H"),r=(i("EoCF"),function(){this.relationship=0});r.prototype._clone=function(){return new n.a.FollowRequestView},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt32(0,this.relationship)},r.prototype.readFrom=function(t){this.relationship=t.readInt32(0,!1,this.relationship)},n.a.FollowRequestView=r,e.a=r},"9CRm":function(t,e,i){!function(t,e,i,n,r,o,a,s){"use strict";function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=u(e),l=u(i),h=u(n),d=u(r),f=u(o),p=u(a),m=u(s),y="nimo.tv",v={get:function(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=e?decodeURI(e[2]):null},set:function(t,e,i,n){var r=i||30,o=n||y,a=new Date;a.setTime(a.getTime()+864e5*r);var s="expires="+a.toGMTString(),u=t+"="+encodeURI(e)+";domain=."+o+";path=/;"+s;document.cookie=u},remove:function(t,e){var i=e||y,n=new Date;n.setTime(n.getTime()-1);var r=this.get(t);null!=r&&(document.cookie=t+"="+r+";domain=."+i+";path=/;expires="+n.toGMTString())},del:function(){v.remove.apply(v,arguments)},clear:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var i=t[e]?t[e].split("="):null,n=i[0]?i[0].trim():null;this.remove(n),this.remove(n,window.location.host)}}},g={get:function(t){try{return window.localStorage.getItem(t.toLowerCase())||null}catch(t){console.log(t)}return null},set:function(t,e){try{window.localStorage.setItem(t.toLowerCase(),e)}catch(t){console.log(t)}},remove:function(t){try{window.localStorage.removeItem(t.toLowerCase())}catch(t){console.log(t)}},has:function(t){try{return window.localStorage.hasOwnProperty(t.toLowerCase())}catch(t){console.log(t)}},clear:function(){try{return window.localStorage.clear()}catch(t){logger.log(t)}}},_={get:function(t){try{return window.sessionStorage.getItem(t.toLowerCase())||null}catch(t){console.log(t)}return null},set:function(t,e){try{window.sessionStorage.setItem(t.toLowerCase(),e)}catch(t){console.log(t)}},remove:function(t){try{window.sessionStorage.removeItem(t.toLowerCase())}catch(t){console.log(t)}},clear:function(){try{return window.sessionStorage.clear()}catch(t){logger.log(t)}}},S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"000".concat(t).slice(-1*e)};function w(t){var e=t?new Date(t):new Date,i=e.getFullYear(),n=S(e.getMonth()+1),r=S(e.getDate()),o=S(e.getHours()),a=S(e.getMinutes()),s=S(e.getSeconds()),u=S(e.getMilliseconds(),3);return"".concat(i,"-").concat(n,"-").concat(r," ").concat(o,":").concat(a,":").concat(s,".").concat(u)}function b(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var I="nimo_log_level",T={OFF:0,FATAL:-1,ERROR:-2,WARN:-3,INFO:-4,DEBUG:-5,ALL:-6},P=Number(g.get(I));P=isNaN(P)?T.OFF:P;var E=!1,k={log:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n,r=e[0],o=e.slice(1),a=f.default(o),s=a[0],u=a.slice(1),c=w(),l="string"==typeof s,h=l?"".concat(c,"|Lv").concat(Math.abs(r)," ").concat(s):c,p=l?u:o;if(P<=r)if(r>=T.ERROR)(n=console).error.apply(n,[h].concat(d.default(p)));else if(r>=T.WARN){var m;(m=console).warn.apply(m,[h].concat(d.default(p)))}else if(E){var y;(y=console).log.apply(y,[h].concat(d.default(p)))}}};["time","timeEnd","group","groupCollapsed","groupEnd","table"].forEach((function(t){k[t]=function(){var e;P<=T.ALL&&(e=console)[t].apply(e,arguments)}}));var R={log:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];k.log.apply(k,[T.DEBUG].concat(e))},success:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1);k.log.apply(k,[T.INFO,"%c".concat(n),"background-color: #00a854;color: #fff;"].concat(d.default(r)))},warning:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1);k.log.apply(k,[T.WARN,"%c".concat(n),"background-color: #ffc000;color: #fff;"].concat(d.default(r)))},warn:function(){R.warning.apply(R,arguments)},error:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1);k.log.apply(k,[T.ERROR,"%c".concat(n),"background-color: #f04134;color: #fff;"].concat(d.default(r)))},info:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1);k.log.apply(k,[T.INFO,"%c".concat(n),"background-color: #343ed1;color: #fff;"].concat(d.default(r)))},vip:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1);k.log.apply(k,[T.WARN,"%c".concat(n),"background-color: #d752ff;color: #fff;"].concat(d.default(r)))},title:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e[1],o=e.slice(2),a=12+2*Math.max(6-r,0);k.log.apply(k,[T.DEBUG,"%c".concat(n),"font-weight: ".concat(r<=3?"bolder":"normal",";font-size: ").concat(a,"px")].concat(d.default(o)))},time:function(){k.time.apply(k,arguments)},timeEnd:function(){k.timeEnd.apply(k,arguments)},group:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1),o=w();k.group.apply(k,["".concat(o," ").concat(n)].concat(d.default(r)))},groupCollapsed:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],r=e.slice(1),o=w();k.groupCollapsed.apply(k,["".concat(o," ").concat(n)].concat(d.default(r)))},groupEnd:function(){k.groupEnd.apply(k,arguments)},table:function(){k.table.apply(k,arguments)}},C=function(){function t(e){c.default(this,t);var i=(e||{}).maxCount,n=void 0===i?0:i;this.maxCount=n,this.pool=[]}return l.default(t,[{key:"dispose",value:function(){this.pool=null}},{key:"add",value:function(){var t,e=(t=this.pool).push.apply(t,arguments);e>this.maxCount&&this.pool.splice(0,e-this.maxCount)}},{key:"toString",value:function(){return JSON.stringify(this.pool.join("\n"))}}]),t}(),O=function(){function t(e){c.default(this,t),this.defaults=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),!0).forEach((function(e){h.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e);var i=(e||{}).cached;void 0!==i&&i&&(this.logCache=new C({maxCount:1e3})),this.initAPI()}return l.default(t,[{key:"dispose",value:function(){this.cachePool=null,this.logCache&&(this.logCache.dispose(),this.logCache=null),this.defaults=null}},{key:"initAPI",value:function(){var t=this,e=this.defaults.prefix,i=function(i){if(Object.prototype.hasOwnProperty.call(R,i)){var n=R[i];t[i]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=o[0],u=o.slice(1);if(["table"].indexOf(i)>-1?n(s):n.apply(void 0,["".concat(e?"[".concat(e,"] "):"").concat(s)].concat(d.default(u))),t.logCache){var c=[w(),"[".concat(i,"]").concat(e?"[".concat(e,"] "):"").concat(s)].concat(d.default(u));t.logCache.add(c.join(" "))}}}};for(var n in R)i(n)}},{key:"getLogCache",value:function(){return this.logCache&&this.logCache.toString&&this.logCache.toString()}}]),t}(),A=function(){function t(){c.default(this,t),this.q=[]}return l.default(t,[{key:"dispose",value:function(){this.clear(),this.q=null}},{key:"add",value:function(t,e,i){if("function"!=typeof t)return R.error("%c<utils queue add> not function:","color:gray;",t),!1;this.q.push({func:t,params:e,object:i})}},{key:"run",value:function(t){if(!this.q.length)return!1;for(var e in this.q){var i=this.q[e];i&&"function"==typeof i.func&&(t?i.func(t):i.func.apply(i.object,i.params))}}},{key:"clear",value:function(){this.q=[]}},{key:"runAndClear",value:function(t){this.run(t),this.clear()}}]),t}();function L(t){return null!=t&&"function"==typeof t.then}function N(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search).substring(1).split("&"),i="[object Array]"===Object.prototype.toString.call(t),n={},r=0;r<e.length;r++){var o=e[r].split("=")||[],a=m.default(o,2),s=a[0],u=a[1];if(i&&t.indexOf(s>=0))n[s]=u;else if(s===t)return u}return!!i&&n}function M(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.length,r=e.reduce((function(t,e){return t+e}),0);return function(){var t=0,i=0,o=Math.random()*r;return e.findIndex((function(e,r){return i+=e,o>=t&&o<i||r===n-1&&o===i||(t+=e,!1)}))}}function U(){return M.apply(void 0,arguments)()}function D(t){var e=0;if(e=parseInt(g.get(t),10),isNaN(e)){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e=U.apply(void 0,n),g.set(t,e)}return e}var B={cookie:function(){try{document.cookie="cookietest=1";var t=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(t){return!1}}(),localStorage:function(){var t=!1;try{localStorage.setItem("locals_test","y"),"y"===localStorage.getItem("locals_test")&&(t=!0,localStorage.removeItem("locals_test"))}catch(t){}return t}()};t.LOG_LEVEL=T,t.Logger=O,t.NIMO_LOG_LEVEL_KEY=I,t.Queue=A,t.clearGreyGroup=function(t){g.has(t)&&g.remove(t)},t.cookie=v,t.formData=function(t){var e=new FormData;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.append(i,t[i]);return e},t.getGrepGroupFunc=M,t.getGreyGroup=U,t.getLogLevel=function(){return P},t.isDate=function(t){return"[object Date]"===toString.call(t)},t.isObject=function(t){return null!==t&&"object"===p.default(t)},t.isPromise=L,t.isURLSearchParams=function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},t.local=g,t.logger=R,t.session=_,t.setDebug=function(t){E=t},t.setGreyGroup=D,t.setGreyGroupOverrideByUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=N("_".concat(t.toLowerCase()));e=parseInt(e,10);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return e>=0&&e<n.length?e:D.apply(void 0,[t].concat(n))},t.setLogLevel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.WARN;g.set(I,String(t)),P=t},t.silencePromise=function(t){L(t)&&t.then(null,(function(){}))},t.storageFeatures=B,Object.defineProperty(t,"__esModule",{value:!0})}(e,i("SDJZ"),i("NToG"),i("OvAC"),i("5WRv"),i("nriI"),i("e+GP"),i("nxTg"))},"9Fjj":function(t,e,i){"use strict";i("I5cv");var n=i("pVnL"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("PJYZ"),l=i.n(c),h=i("7W2i"),d=i.n(h),f=i("a1gu"),p=i.n(f),m=i("Nsbk"),y=i.n(m),v=i("lSNA"),g=i.n(v),_=i("q1tI"),S=(i("17x9"),i("TSYQ")),w=i.n(S),b=i("rsGM"),I=i.n(b),T=i("i8i4"),P=i("Fcj4"),E=i.n(P),k=i("bKFb"),R=i.n(k),C=i("MFj2");function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var L=function(t){d()(i,t);var e=A(i);function i(){return a()(this,i),e.apply(this,arguments)}return u()(i,[{key:"shouldComponentUpdate",value:function(t){return!!t.hiddenClassName||!!t.visible}},{key:"render",value:function(){var t=this.props.className;this.props.hiddenClassName&&!this.props.visible&&(t+=" ".concat(this.props.hiddenClassName));var e=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){g()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.props);return delete e.hiddenClassName,delete e.visible,e.className=t,_.createElement("div",e)}}]),i}(_.Component);function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function M(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){g()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var D=0;function B(t,e){var i=t["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if("number"!==typeof i){var r=t.document;"number"!==typeof(i=r.documentElement[n])&&(i=r.body[n])}return i}function F(t,e){var i=t.style;["Webkit","Moz","Ms","ms"].forEach((function(t){i["".concat(t,"TransformOrigin")]=e})),i.transformOrigin=e}var x=function(t){d()(i,t);var e=U(i);function i(t){var n;return a()(this,i),n=e.call(this,t),g()(l()(n),"inTransition",void 0),g()(l()(n),"titleId",void 0),g()(l()(n),"openTime",void 0),g()(l()(n),"lastOutSideFocusNode",void 0),g()(l()(n),"wrap",void 0),g()(l()(n),"dialog",void 0),g()(l()(n),"sentinelStart",void 0),g()(l()(n),"sentinelEnd",void 0),g()(l()(n),"scrollbarWidth",void 0),g()(l()(n),"onAnimateLeave",(function(){var t=n.props.afterClose;n.wrap&&(n.wrap.style.display="none"),n.inTransition=!1,t&&t()})),g()(l()(n),"onMaskClick",(function(t){Date.now()-n.openTime<300||t.target===t.currentTarget&&n.close(t)})),g()(l()(n),"onKeyDown",(function(t){var e=l()(n).props;if(e.keyboard&&t.keyCode===E.a.ESC)return t.stopPropagation(),void n.close(t);if(e.visible&&t.keyCode===E.a.TAB){var i=document.activeElement,r=l()(n).sentinelStart;t.shiftKey?i===r&&n.sentinelEnd.focus():i===n.sentinelEnd&&r.focus()}})),g()(l()(n),"getDialogElement",(function(){var t,e,i,o=l()(n).props,a=o.contentClassName,s=o.bodyClassName,u=o.closable,c=o.prefixCls,h={};void 0!==o.width&&(h.width=o.width),void 0!==o.height&&(h.height=o.height),o.footer&&(t=_.createElement("div",{className:"".concat(c,"-footer"),ref:n.saveRef("footer")},o.footer)),o.title&&(e=_.createElement("div",{className:"".concat(c,"-header bc23"),ref:n.saveRef("header")},_.createElement("div",{className:"".concat(c,"-title c1"),id:n.titleId},o.title))),u&&(i=_.createElement("button",{type:"button",onClick:n.close,"aria-label":"Close",className:"".concat(c,"-close")},o.closeIcon||_.createElement("span",{className:"".concat(c,"-close-x c1")})));var d=M(M({},o.style),h),f={width:0,height:0,overflow:"hidden"},p=n.getTransitionName(),m=_.createElement(L,{key:"dialog-element",role:"document",ref:n.saveRef("dialog"),style:d,className:"".concat(c," ").concat(o.className||""),visible:o.visible},_.createElement("div",{tabIndex:0,ref:n.saveRef("sentinelStart"),style:f},"sentinelStart"),_.createElement("div",{className:"".concat(c,"-content ").concat(a||"")},i,e,_.createElement("div",r()({className:"".concat(c,"-body ").concat(s||""),style:o.bodyStyle,ref:n.saveRef("body")},o.bodyProps),o.children),t),_.createElement("div",{tabIndex:0,ref:n.saveRef("sentinelEnd"),style:f},"sentinelEnd"));return _.createElement(C.a,{key:"dialog",showProp:"visible",onLeave:n.onAnimateLeave,transitionName:p,component:"",transitionAppear:!0},o.visible||!o.destroyOnClose?m:null)})),g()(l()(n),"getZIndexStyle",(function(){var t={},e=l()(n).props;return void 0!==e.zIndex&&(t.zIndex=e.zIndex),t})),g()(l()(n),"getWrapStyle",(function(){return M(M({},n.getZIndexStyle()),n.props.wrapStyle)})),g()(l()(n),"getMaskStyle",(function(){return M(M({},n.getZIndexStyle()),n.props.maskStyle)})),g()(l()(n),"getMaskElement",(function(){var t,e=l()(n).props;if(e.mask){var i=n.getMaskTransitionName();t=_.createElement(L,r()({style:n.getMaskStyle(),key:"mask",className:"".concat(e.prefixCls,"-mask"),hiddenClassName:"".concat(e.prefixCls,"-mask-hidden"),visible:e.visible},e.maskProps)),i&&(t=_.createElement(C.a,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:i},t))}return t})),g()(l()(n),"getMaskTransitionName",(function(){var t=l()(n).props,e=t.maskTransitionName,i=t.maskAnimation;return!e&&i&&(e="".concat(t.prefixCls,"-").concat(i)),e})),g()(l()(n),"getTransitionName",(function(){var t=l()(n).props,e=t.transitionName,i=t.animation;return!e&&i&&(e="".concat(t.prefixCls,"-").concat(i)),e})),g()(l()(n),"close",(function(t){var e=n.props.onClose;e&&e(t)})),g()(l()(n),"saveRef",(function(t){return function(e){n[t]=e}})),n.inTransition=!1,n.titleId="rcDialogTitle".concat(D),D+=1,n}return u()(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate({})}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=this.props.mousePosition;if(e.visible){if(!t.visible){this.openTime=Date.now(),this.tryFocus();var n=T.findDOMNode(this.dialog);if(i){var r=function(t){var e=t.getBoundingClientRect(),i={left:e.left,top:e.top},n=t.ownerDocument,r=n.defaultView||n.parentWindow;return i.left+=B(r),i.top+=B(r,!0),i}(n);F(n,"".concat(i.x-r.left,"px ").concat(i.y-r.top,"px"))}else F(n,"")}}else if(t.visible&&(this.inTransition=!0,e.mask&&this.lastOutSideFocusNode)){try{this.lastOutSideFocusNode.focus()}catch(o){this.lastOutSideFocusNode=null}this.lastOutSideFocusNode=null}}},{key:"tryFocus",value:function(){R()(this.wrap,document.activeElement)||(this.lastOutSideFocusNode=document.activeElement,this.sentinelStart.focus())}},{key:"render",value:function(){var t=this.props,e=t.prefixCls,i=t.maskClosable,n=this.getWrapStyle();return t.visible&&(n.display=null),_.createElement("div",null,this.getMaskElement(),_.createElement("div",r()({tabIndex:-1,onKeyDown:this.onKeyDown,className:"".concat(e,"-wrap ").concat(t.wrapClassName||""),ref:this.saveRef("wrap"),onClick:i?this.onMaskClick:void 0,role:"dialog","aria-labelledby":t.title?this.titleId:null,style:n},t.wrapProps),this.getDialogElement()))}}]),i}(_.Component);g()(x,"defaultProps",{className:"",mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,destroyOnClose:!1,prefixCls:"rc-dialog",contentClassName:"bc1 bsc3",bodyClassName:"n-as-scroll"});var j=i("nqHh"),V=i.n(j);function G(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var H=function(t){d()(i,t);var e=G(i);function i(){var t;a()(this,i);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),g()(l()(t),"_component",void 0),g()(l()(t),"renderComponent",void 0),g()(l()(t),"removeContainer",void 0),g()(l()(t),"saveDialog",(function(e){t._component=e})),g()(l()(t),"getComponent",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _.createElement(x,r()({ref:t.saveDialog},t.props,e,{key:"dialog"}))})),g()(l()(t),"getContainer",(function(){var e=document.createElement("div");return t.props.getContainer?t.props.getContainer().appendChild(e):document.body.appendChild(e),e})),t}return u()(i,[{key:"shouldComponentUpdate",value:function(t){var e=t.visible;return!(!this.props.visible&&!e)}},{key:"render",value:function(){var t=null;return(this.props.visible||this._component)&&(t=_.createElement(V.a,{getContainer:this.getContainer},this.getComponent())),t}}]),i}(_.Component);g()(H,"defaultProps",{visible:!1});var W=H,q=i("L0GJ");function K(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var Y=null,z=null,J=function(t){d()(i,t);var e=K(i);function i(t){var n;return a()(this,i),n=e.call(this,t),g()(l()(n),"_dialog",null),g()(l()(n),"handleCancel",(function(t){var e=n.props.onCancel;e&&e(t)})),g()(l()(n),"handleOk",(function(t){var e=n.props.onOk;e&&e(t)})),g()(l()(n),"saveDialog",(function(t){n._dialog=t})),g()(l()(n),"renderFooter",(function(){var t=n.props,e=t.okText,i=t.okType,o=t.okCancel,a=t.cancelText,s=t.cancelType,u=t.confirmLoading,c=t.cancelButtonProps,l=t.okButtonProps,h=t.buttonComponent;return _.createElement("div",{className:"n-fx-cc n-as-w100"},_.createElement(h,r()({type:i,loading:u,onClick:n.handleOk},l),e),o?_.createElement(h,r()({type:s,onClick:n.handleCancel},c),a):null)})),n.state={},n}return u()(i,[{key:"componentDidMount",value:function(){z||(I()(document.documentElement,"click",(function(t){Y={x:t.pageX,y:t.pageY},setTimeout((function(){Y=null}),100)})),z=!0)}},{key:"render",value:function(){var t=this.props,e=t.footer,i=t.visible,n=t.centered,o=t.wrapClassName,a=t.prefixCls,s=t.removeHidden;return _.createElement(W,r()({ref:this.saveDialog},this.props,{wrapClassName:w()(g()({},"".concat(a,"-centered"),!!n),o),footer:void 0===e?this.renderFooter():e,visible:i,mousePosition:Y,onClose:this.handleCancel,removeHidden:s}))}}]),i}(_.Component);g()(J,"info",void 0),g()(J,"success",void 0),g()(J,"error",void 0),g()(J,"warn",void 0),g()(J,"warning",void 0),g()(J,"confirm",void 0),g()(J,"show",void 0),g()(J,"defaultProps",{prefixCls:"nimo-modal",width:510,transitionName:"zoom",maskTransitionName:"fade",confirmLoading:!1,visible:!1,cancelType:"secondary-ghost",okType:"secondary",okCancel:!0,buttonComponent:q.a});e.a=J},"9GYk":function(t,e,i){!function(t,e,i,n,r,o,a,s,u,c,l,h,d,f,p,m,y){"use strict";function v(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var g=v(e),_=v(i),S=v(n),w=v(r),b=v(o),I=v(a),T=v(l),P=v(h),E=v(d),k=v(m),R=function(){function t(){g.default(this,t)}return _.default(t,null,[{key:"number",value:function(t){return"number"==typeof t}},{key:"string",value:function(t){return"string"==typeof t}}]),t}(),C="/",O="-",A={paramsConnector:C,paramsSeparator:C,paramsSerializer:function(t){return N(t).join(C)}},L={paramsConnector:O,paramsSeparator:O,paramsSerializer:function(t){return N(t).join(O)}};function N(t){var e=Object.prototype.toString,i=[];return"[object Array]"===e.call(t)&&t.map((function(t){if((R.string(t)||R.number(t))&&(t={value:t}),"[object Object]"!==e.call(t))throw new TypeError("queryParams has invalid item(s).");var n=(t||{}).value;i.push(n)})),i}var M=function(){function t(){g.default(this,t),this.handlers=[]}return _.default(t,[{key:"push",value:function(t,e){return this.handlers.push({onFulfilled:t,onRejected:e}),this.handlers.length-1}},{key:"unshift",value:function(t,e){return this.handlers.unshift({onFulfilled:t,onRejected:e}),this.handlers.length-1}},{key:"remove",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"forEach",value:function(t){this.handlers.forEach((function(e){null!==e&&t(e)}))}}]),t}();function U(t,e,i){return i?(i.forEach((function(i){t=i(t,e)})),t):t}function D(t,e,i){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];t[n]=i&&"function"==typeof r?r.bind(i):r}return t}function B(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function F(t,e,i){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"?",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"&";if(!e)return t;if(i)n=i(e);else if(u.isURLSearchParams(e))n=e.toString();else{var a=[];Object.keys(e).forEach((function(t){var i=e[t];null!=i&&(Array.isArray(i)?t+="[]":i=[i],i.forEach((function(e){u.isDate(e)?e=e.toISOString():u.isObject(e)&&(e=JSON.stringify(e)),a.push("".concat(B(t),"=").concat(B(e)))})))})),n=a.join("&")}if(n){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf(r)?r:o)+n}return t}function x(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function j(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}function V(t){return new Promise((function(e){setTimeout(e,t)}))}function G(t,e){var i=V(e).then((function(){var t=new Error("Request timed out after ".concat(e," ms."));throw t.name="TimeoutError",t}));return Promise.race([t,i])}var H=function(){function t(e,i){g.default(this,t);var n=i||{},r=n.baseURL,o=n.url,a=n.pathname,s=n.server,u="string"==typeof e?new Error(e):e;this.message=u.message,this.name="ApiError",this.description=u.description,this.number=u.number,this.fileName=u.fileName,this.lineNumber=u.lineNumber,this.columnNumber=u.columnNumber,this.stack=u.stack,this.server=s,this.origin=r,this.pathname=a||o,this.config=i}return _.default(t,[{key:"toJSON",value:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack}}},{key:"toString",value:function(){return(this.name?this.name:"")+": "+(this.message?this.message:"")}}]),t}();function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=E.default(t);if(e){var r=E.default(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P.default(this,i)}}var q=function(t){T.default(i,t);var e=W(i);function i(t,n){var r;return g.default(this,i),(r=e.call(this,t,n)).name=t.name||"JSError",r.type="js_err",r}return i}(H);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=E.default(t);if(e){var r=E.default(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P.default(this,i)}}var Y=function(t){T.default(i,t);var e=K(i);function i(t,n,r){var o;return g.default(this,i),(o=e.call(this,t,n)).name="NetError",o.type="net_err",o.status=r&&r.status||0,o.code=o.status,o}return i}(H),z=["baseURL","delay","timeout","data"];function J(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?J(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function X(t,e){return Z.apply(this,arguments)}function Z(){return(Z=I.default(regeneratorRuntime.mark((function t(e,i){var n,r,o,a,s,u,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.url,e.baseURL&&!j(e.url)&&(o=x(e.baseURL,e.url)),null===e.queryParams||"object"!==b.default(e.queryParams)){t.next=10;break}t.prev=3,o=F(o,e.queryParams,e.paramsSerializer,e.paramsConnector,e.paramsSeparator),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(3),new q(t.t0,e);case 10:t.prev=10,e.body=U(e.data,e,e.transformRequest),t.next=17;break;case 14:throw t.prev=14,t.t1=t.catch(10),new q(t.t1,e);case 17:if(window.AbortController&&"function"==typeof window.AbortController&&(n=new AbortController,r=n.signal),(a=e||{}).baseURL,s=a.delay,u=a.timeout,a.data,c=w.default(a,z),l=fetch(o,Q(Q({},c),{signal:r})),!(Number.isInteger(s)&&s>0)){t.next=23;break}return t.next=23,V(s);case 23:return Number.isInteger(u)&&u>0&&Number.isFinite(u)&&(l=G(l,u).catch((function(t){return n&&n.abort(),Promise.reject(t)}))),t.abrupt("return",l.then((function(t){if(i.response=t,t.ok)return Promise.resolve(t);throw new Y("Request failed with status code ".concat(t.status),e,{status:t.status})}),(function(t){throw new Y(t,e)})));case 25:case"end":return t.stop()}}),t,null,[[3,7],[10,14]])})))).apply(this,arguments)}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=E.default(t);if(e){var r=E.default(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P.default(this,i)}}var tt=function(t){T.default(i,t);var e=$(i);function i(t,n,r,o){var a;return g.default(this,i),(a=e.call(this,t,n)).code=r,a.name="BusinessError",a.type="business_err",a.data=o,a.data&&void 0===a.data.code&&(a.data.code=r),a}return i}(H);function et(t,e){var i=t.adapter,n=void 0===i?X:i,r=t.transformResponse,o=t.beforeRequest,a=t.afterUnpack,s=t.afterResponse,u=t.onError,c=t.exportReportParams,l=t.customHandleError,h=t.transformError;return"function"==typeof o&&o(t),n(t,e).then((function(e){return a(t,(null==e?void 0:e.status)||0),U(e,t,r).then((function(t){var e=t||{},i=e.code,n=e.isSuccess,r=e.config,o=e.rawData;if(!n)throw new tt("A Business Error occurred with code ".concat(i),r,i,o);return t}),(function(e){if(e instanceof Y)throw e;throw new q(e,t)}))})).then((function(t){if(c)return t;var e=t||{},i=e.data,n=e.code,r=e.isSuccess,o=e.config;return s(o,{isBusinessSuccess:r,code:n},t),i})).catch((function(e){if(c)throw e;if(h&&U(e,t,h),s(e.config,{isBusinessSuccess:!1,status:e.code},e),u(e),l||e)throw e instanceof tt?e.data:e}))}function it(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function rt(t){this.defaults=t,this.interceptors={request:new M,response:new M}}rt.prototype.request=function(t,e){var i;"string"==typeof t?(i=e||{}).url=t:i=t||{},(i=nt(nt({},this.defaults),i)).method=i.method?i.method.toLowerCase():"get";var n=[et,void 0],r=Promise.resolve(i);this.interceptors.request.forEach((function(t){n.unshift(t.onFulfilled,t.onRejected)})),this.interceptors.response.forEach((function(t){n.push(t.onFulfilled,t.onRejected)}));for(var o={config:i,response:null};n.length;){var a=n.shift(),s=n.shift();r=r.then(ot(a,o),ot(s,o))}return r.then((function(){o=null})).catch((function(){o=null})),r};var ot=function(t,e){return"function"!=typeof t?t:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.push(e),t.apply(t,n)}},at={baseURL:"",collector:!1,delay:0,timeout:0,signal:null,onProgress:function(){}};function st(t){return new Error("http: ".concat(t))}var ut=["requestId","bcode","sdkcode"];function ct(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function lt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ct(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ht=Object.create(null),dt=!1,ft=function(){},pt=null,mt=function(t,e){if("function"!=typeof t)return function(){};var i=k.default();return ht[i]={func:t,store:e},function(){delete ht[i]}},yt=function(t){var e=t||{},i=e.type,n=e.code;if("error"===i||"close"===i){pt=!1;for(var r=Object.values(ht);r.length;){var o=r.shift(),a=o.func;o.store.response=lt(lt({},t),{},{status:n}),a(st("Request failed with signal socket ".concat(i," with code ").concat(n)))}ft()}};function vt(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var o=function(t){dt||(dt=!0,t.on(e.WS_CONNET_STATE,yt),t.on(e.WEBSOCKET_DOLAUNCH,(function(){pt=!0})),ft=function(){t.reconnetWS()})};return function(e,i){var r=e||{},a=r.data,s=r.retry,u=void 0===s?0:s,c=r.url,l=n[1]||c,h=n[2]||e.structure,d=n[0]||e.moduleName;return t({noConnect:1}).then((function(t){return o(t),null===pt&&(pt=t.wsLaunch),e.baseURL=t&&t.tafHandler&&t.tafHandler.url||"",new Promise((function(n,r){var o=mt(r,i);t.registerWup(l,h),t.sendWup(d,l,a,(function(t){var a=t||{},s=(a.requestId,a.bcode),u=a.sdkcode,c=w.default(a,ut);if(o(),!u&&s>=0)n(lt(lt({},c),{},{funcName:l,returnValue:s}));else{var h=u||s;i.response={status:h,response:t},u===y.SDK_ERROR_CODE.SIGNAL_ERROR_NO_REGISTER&&n(lt(lt({},c),{},{funcName:l,returnValue:0})),r(new Y("Request failed with ".concat(u?"sdkcode error: ".concat(u):"signal channel error: ".concat(s)),e,{status:h}))}}),u+1)}))}))}}function gt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _t(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function St(t){var e=new rt(t),i=rt.prototype.request.bind(e);return i=D(i,rt.prototype,e),D(i,e)}var wt=St(at);wt.create=function(t){return St(_t(_t({},fetch.defaults),t))};var bt=function(){function t(){g.default(this,t),S.default(this,"length",0),S.default(this,"head",null),S.default(this,"tail",null)}return _.default(t,[{key:"remove",value:function(t){if(!t)return!1;var e=t.prev,i=t.next;return i&&(i.prev=e),e&&(e.next=i),t===this.head&&(this.head=i),t===this.tail&&(this.tail=e),this.length-=1,t.next=null,t.prev=null,t.list=null,t}},{key:"unshift",value:function(t){return t.list&&t.list.remove(t),t.list=this,t.next=this.head,t.prev=null,this.head&&(this.head.prev=t),this.head=t,this.tail||(this.tail=t),this.length+=1,!0}},{key:"shift",value:function(){var t=this.head;if(t){var e=t.next;return this.head=e,this.head?e.prev=null:this.tail=null,this.length-=1,t}}},{key:"pop",value:function(){var t=this.tail;if(t){var e=t.prev;return this.tail=e,this.tail?e.next=null:this.head=null,this.length-=1,t}}},{key:"push",value:function(t){return t.list&&t.list.remove(t),t.list=this,t.next=null,t.prev=this.tail,this.tail&&(this.tail.next=t),this.tail=t,this.head||(this.head=t),this.length+=1,!0}}]),t}();function It(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Tt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?It(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):It(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}bt.Node=function t(e){var i=e.value,n=e.prev,r=e.next,o=e.list;g.default(this,t),this.value=i,this.prev=n,this.next=r,this.list=o};var Pt=function(){function t(e){g.default(this,t);var i=e||{},n=i.length,r=i.maxAge;this._maxLength=n||100,this._maxAge=r||3e5,this._store=Object.create(null),this._list=new bt}return _.default(t,[{key:"length",get:function(){return this._list.length}},{key:"get",value:function(t){var e=this._store[t];if(e){var i=Date.now(),n=e.expirationTime,r=e.node,o=e.data;return i>=n||!o?(this._list.remove(r),this.delete(t),null):(this._list.unshift(r),this._store[t]={expirationTime:n,data:o,node:this._list.head},o)}return null}},{key:"set",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._maxAge;if(!t||!e)return!1;var n=Date.now(),r=this._store[t],o=(r||{}).node;if(r)this._list.unshift(o);else{var a=new bt.Node({value:{key:t,value:e},next:this._list.head,prev:null,list:null});this._list.unshift(a)}return this._store[t]={expirationTime:n+i,data:e,node:this._list.head},this.trim(),!0}},{key:"setWithoutUpdate",value:function(t,e){if(!t||!e)return!1;var i=this._store[t];return!!i&&(this._store[t]=Tt(Tt({},i),{},{data:e}),!0)}},{key:"delete",value:function(t){if(!t)return!1;var e=this._store[t].node;return e&&this._list.remove(e),delete this._store[t],!0}},{key:"trim",value:function(){if(this._list.length>this._maxLength){var t=this._list.tail.value.key;this.delete(t)}}}]),t}(),Et=function(t){var e=t.data,i=t.structure,n=t.moduleName,r=t.baseURL,o=t.url,a="";if(n&&i)a="".concat(n,"/").concat(o,"@").concat(i.toString(),"@").concat(JSON.stringify(e));else try{a=F(r&&!j(o)?x(r,o):o,t.queryParams,t.paramsSerializer,t.paramsConnector,t.paramsSeparator);var s=Object.keys(e).sort(),u=[];s.forEach((function(t){var i=e[t];u.push("".concat(t,"=").concat(i))})),a+="?".concat(u.join("&"))}catch(t){a=null}return a};function kt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Rt=null,Ct="cache_pending",Ot=Object.create(null),At=function(t){if(!Rt){var e=new Pt(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({length:1e3,maxAge:6e5},t));Rt=e}return Rt},Lt=["baseURL","data"];function Nt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Mt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(i),!0).forEach((function(e){S.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Nt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Ut=wt.create(),Dt={};Object.defineProperty(t,"formData",{enumerable:!0,get:function(){return u.formData}}),t.BusinessError=tt,t.JSError=q,t.NetError=Y,t.PARAMS_TYPE_BAR=O,t.PARAMS_TYPE_SLASH=C,t.ParamType=R,t.barParamsConfig=L,t.combine=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce((function(t,e){return e(t)}))},t.createError=st,t.enhanceError=function(t,e,i,n){return t.config=e,void 0===t.code&&(t.code=void 0!==i?i:null),t.response=n,t.isFetchError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,errCode:this.code,response:this.response}},t},t.fetchAdapter=X,t.http=wt,t.raceAdapter=function(t){var e=(t||{}).fetchArray,i={isResolve:!1,rejectCount:0};return Object.seal(i),new Promise((function(t,n){var r=e.length;e.forEach((function(e){e.then((function(e){i.isResolve||(i.isResolve=!0,t(e))})).catch((function(t){i.rejectCount+=1,i.rejectCount===r&&n(t)}))}))}))},t.request=function(t,e){var i=e||{},n=i.baseURL,r=i.data,o=void 0===r?{}:r,a=w.default(i,Lt);return Ut(t,Mt(Mt({baseURL:n,data:o},Dt),a))},t.signalingAdapter=function(t,e){return function(i,n,r){return vt(t,e,i,n,r)}},t.signalingAdapterInner=vt,t.slashParamsConfig=A,t.validateParams=function(t){var e=Object.prototype.toString.call(t);if("[object Object]"===e)return!0;if("[object Array]"===e)t.map((function(t){if("[object Object]"===Object.prototype.toString.call(t)){var e=t||{},i=e.key,n=e.value,r=e.validator;if(!r(n))throw new TypeError("".concat(i," is not ").concat(r.name||"valid"))}}));else if(t)throw new TypeError("The type of params is ".concat(e,", not an object or an array."));return!0},t.withCache=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return function(i){for(var n=i.useCache,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(n){var s=(t||{}).defaultCache||At(t),u=Et(i),c=s.get(u),l=function(t,e){Object.defineProperty(i,t,{value:e,writable:!1})};return c===Ct?new Promise((function(t,e){var i=Ot[u]||[];i.push({resolve:t,reject:e}),Ot[u]=i,l("responseFrom","queue")})):c?(c.clone&&s.setWithoutUpdate(u,c.clone()),l("responseFrom","cache"),Promise.resolve(c)):(s.set(u,Ct,3e3),e.apply(void 0,[i].concat(o)).then((function(t){for(var e=Ot[u],i=function(){return t.clone?t.clone():t};Array.isArray(e)&&e.length;)(0,e.shift().resolve)(i());return delete Ot[u],s.set(u,i(),"boolean"!=typeof n?n:void 0),t})).catch((function(t){s.delete(u);for(var e=Ot[u];Array.isArray(e)&&e.length;)(0,e.shift().reject)(t);return delete Ot[u],Promise.reject(t)})))}return e.apply(void 0,[i].concat(o))}}},t.withRetry=function(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var o=e.retry,a=void 0===o?0:o,s=0,u=function(){Object.defineProperty(e,"retryCount",{value:s,writable:!1})},c=function(){return t.apply(void 0,[e].concat(n)).then((function(t){return u(),t})).catch((function(t){if(t instanceof Y)return l(t);throw t}))},l=function(t){return a>s?(s+=1,c()):(u(),Promise.reject(t))};return c()}},Object.defineProperty(t,"__esModule",{value:!0})}(e,i("SDJZ"),i("NToG"),i("OvAC"),i("RiSW"),i("e+GP"),i("fFdx"),i("wcNg"),i("QjRD"),i("LXYL"),i("eef+"),i("K4DB"),i("+IV6"),i("ACU4"),i("HZro"),i("2tSK"),i("KKvs"),i("U8p0"))},"9Nap":function(t,e,i){var n=i("/9aa");t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},"9P93":function(t,e,i){var n=i("XKFU"),r=Math.imul;n(n.S+n.F*i("eeVq")((function(){return-5!=r(4294967295,5)||2!=r.length})),"Math",{imul:function(t,e){var i=65535,n=+t,r=+e,o=i&n,a=i&r;return 0|o*a+((i&n>>>16)*a+o*(i&r>>>16)<<16>>>0)}})},"9Q1T":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="n-fx-bc n-as-padv">\n  <div class="n-fx-sc n-fx1">\n    <span class="n-sk n-sk-t18 n-as-w50"></span>\n  </div>\n</div>\n';return __p}},"9R94":function(t,e,i){"use strict";var n="Invariant failed";e.a=function(t,e){if(!t)throw new Error(n)}},"9SJS":function(t,e,i){"use strict";i("I5cv");var n=i("cDf5"),r=i.n(n),o=i("yXPU"),a=i.n(o),s=i("lwsE"),u=i.n(s),c=i("W8MJ"),l=i.n(c),h=i("PJYZ"),d=i.n(h),f=i("iWIM"),p=i.n(f),m=i("7W2i"),y=i.n(m),v=i("a1gu"),g=i.n(v),_=i("Nsbk"),S=i.n(_),w=i("lSNA"),b=i.n(w),I=(i("ls82"),i("L7RH")),T=i("jqZc");function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){b()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=S()(t);if(e){var r=S()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g()(this,i)}}i.d(e,"b",(function(){return I.unpackCommon}));var R=function(t){y()(i,t);var e=k(i);function i(t){var n;return u()(this,i),n=e.call(this,t),b()(d()(n),"_ws",null),n.defaults=E({},t),n.moduleName=t&&t.moduleName||I.MODULE_NIMO_UI,n.channel=T.a,n._ws=Object(T.b)(),n._inited=!1,n}return l()(i,[{key:"init",value:function(t){return!0===(null===t||void 0===t?void 0:t.avoidRepeatSub)&&this.inited||(this.channel.broadcastWithUser=!1,this._updateRuntimeLiveRoom(t),this._subscribeChannelTopic(t),this.inited=!0),this}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._unsubscribeChannelTopic(),t||this._clearRuntimeLiveRoom(),this._inited=!1,this}},{key:"on",value:function(t,e,n){return I.logger.log("on",t),p()(S()(i.prototype),"on",this).call(this,t,e,n)}},{key:"off",value:function(t,e){return I.logger.log("off",t),p()(S()(i.prototype),"off",this).call(this,t,e)}},{key:"onSocketOpen",value:function(t){return p()(S()(i.prototype),"on",this).call(this,"open",t)}},{key:"offSocketOpen",value:function(t){return p()(S()(i.prototype),"off",this).call(this,"open",t)}},{key:"waitUntilSocketOpen",value:function(){var t=a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._ws.ready){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,new Promise((function(t){I.eventEmitter.on("open",(function e(){I.eventEmitter.off("open",e),t()}))}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"send",value:function(){var t;return(t=this._ws).send.apply(t,arguments)}},{key:"invoke",value:function(t,e){"function"===typeof t&&t(e)}},{key:"loginChannel",value:function(){this.channel.broadcastWithUser=!0,I.runtime.channel&&(I.runtime.channel.isOpened()||this.channel.open(this._ws))}},{key:"_updateRuntimeLiveRoom",value:function(t){var e=t||{},i=e.roomId,n=e.auId;if(void 0===i||void 0===n)throw new ReferenceError("roomId is type of ".concat(r()(i)," and auId is type of ").concat(r()(n),", invalid."));I.runtime.liveRoom&&!I.runtime.liveRoom.isReady()&&(I.runtime.liveRoom.init(E({},t)),I.logger.vip("Runtime liveRoom updated",I.runtime.liveRoom))}},{key:"_clearRuntimeLiveRoom",value:function(){I.runtime.liveRoom&&(I.runtime.liveRoom.clear(),I.logger.vip("Runtime liveRoom cleared",I.runtime.liveRoom))}},{key:"_subscribeChannelTopic",value:function(t){I.runtime.channel&&(I.runtime.channel.isOpened()?(this.channel.heartbeat(t),this.channel.subTopic(t)):this.channel.open(this._ws))}},{key:"setPlatform",value:function(t){var e=I.userSocketModel.getUserAgent(t);return this.updateRuntimeUser({sUA:e}),this}},{key:"updateRuntimeUser",value:function(t){I.userSocketModel.updateRuntimeUser(t)}},{key:"initInNimoApp",value:function(t){I.runtime.user.isUAFromApp&&I.runtime.user.isGuidFromApp||(this.setPlatform("wap"),this.updateRuntimeUser({sGuid:"component"})),this.init(t)}},{key:"initInComponent",value:function(t){this.updateRuntimeUser({sGuid:"component"}),this.init(t)}},{key:"_unsubscribeChannelTopic",value:function(t){I.runtime.channel&&I.runtime.channel.isOpened()&&this.channel.unsubTopic(t)}},{key:"_getBroadcast",value:function(t){var e=this.defaults.broadcasts,i=(void 0===e?{}:e)[t];if(void 0===i)throw new TypeError("the broadcast [".concat(t,"] is not found."));return i}}]),i}(I.SocketModel);e.a=R},"9VmF":function(t,e,i){"use strict";var n=i("XKFU"),r=i("ne8i"),o=i("0sh+"),a="startsWith",s="".startsWith;n(n.P+n.F*i("UUeW")(a),"String",{startsWith:function(t){var e=o(this,t,a),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,i):e.slice(i,i+n.length)===n}})},"9XZ3":function(t,e,i){"use strict";var n=i("P7XM"),r=i("k+aG"),o=i("hwdV").Buffer,a=new Array(16);function s(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function c(t,e,i,n,r,o,a){return u(t+(e&i|~e&n)+r+o|0,a)+e|0}function l(t,e,i,n,r,o,a){return u(t+(e&n|i&~n)+r+o|0,a)+e|0}function h(t,e,i,n,r,o,a){return u(t+(e^i^n)+r+o|0,a)+e|0}function d(t,e,i,n,r,o,a){return u(t+(i^(e|~n))+r+o|0,a)+e|0}n(s,r),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,n=this._b,r=this._c,o=this._d;i=c(i,n,r,o,t[0],3614090360,7),o=c(o,i,n,r,t[1],3905402710,12),r=c(r,o,i,n,t[2],606105819,17),n=c(n,r,o,i,t[3],3250441966,22),i=c(i,n,r,o,t[4],4118548399,7),o=c(o,i,n,r,t[5],1200080426,12),r=c(r,o,i,n,t[6],2821735955,17),n=c(n,r,o,i,t[7],4249261313,22),i=c(i,n,r,o,t[8],1770035416,7),o=c(o,i,n,r,t[9],2336552879,12),r=c(r,o,i,n,t[10],4294925233,17),n=c(n,r,o,i,t[11],2304563134,22),i=c(i,n,r,o,t[12],1804603682,7),o=c(o,i,n,r,t[13],4254626195,12),r=c(r,o,i,n,t[14],2792965006,17),i=l(i,n=c(n,r,o,i,t[15],1236535329,22),r,o,t[1],4129170786,5),o=l(o,i,n,r,t[6],3225465664,9),r=l(r,o,i,n,t[11],643717713,14),n=l(n,r,o,i,t[0],3921069994,20),i=l(i,n,r,o,t[5],3593408605,5),o=l(o,i,n,r,t[10],38016083,9),r=l(r,o,i,n,t[15],3634488961,14),n=l(n,r,o,i,t[4],3889429448,20),i=l(i,n,r,o,t[9],568446438,5),o=l(o,i,n,r,t[14],3275163606,9),r=l(r,o,i,n,t[3],4107603335,14),n=l(n,r,o,i,t[8],1163531501,20),i=l(i,n,r,o,t[13],2850285829,5),o=l(o,i,n,r,t[2],4243563512,9),r=l(r,o,i,n,t[7],1735328473,14),i=h(i,n=l(n,r,o,i,t[12],2368359562,20),r,o,t[5],4294588738,4),o=h(o,i,n,r,t[8],2272392833,11),r=h(r,o,i,n,t[11],1839030562,16),n=h(n,r,o,i,t[14],4259657740,23),i=h(i,n,r,o,t[1],2763975236,4),o=h(o,i,n,r,t[4],1272893353,11),r=h(r,o,i,n,t[7],4139469664,16),n=h(n,r,o,i,t[10],3200236656,23),i=h(i,n,r,o,t[13],681279174,4),o=h(o,i,n,r,t[0],3936430074,11),r=h(r,o,i,n,t[3],3572445317,16),n=h(n,r,o,i,t[6],76029189,23),i=h(i,n,r,o,t[9],3654602809,4),o=h(o,i,n,r,t[12],3873151461,11),r=h(r,o,i,n,t[15],530742520,16),i=d(i,n=h(n,r,o,i,t[2],3299628645,23),r,o,t[0],4096336452,6),o=d(o,i,n,r,t[7],1126891415,10),r=d(r,o,i,n,t[14],2878612391,15),n=d(n,r,o,i,t[5],4237533241,21),i=d(i,n,r,o,t[12],1700485571,6),o=d(o,i,n,r,t[3],2399980690,10),r=d(r,o,i,n,t[10],4293915773,15),n=d(n,r,o,i,t[1],2240044497,21),i=d(i,n,r,o,t[8],1873313359,6),o=d(o,i,n,r,t[15],4264355552,10),r=d(r,o,i,n,t[6],2734768916,15),n=d(n,r,o,i,t[13],1309151649,21),i=d(i,n,r,o,t[4],4149444226,6),o=d(o,i,n,r,t[11],3174756917,10),r=d(r,o,i,n,t[2],718787259,15),n=d(n,r,o,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+n|0,this._c=this._c+r|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},"9ZvN":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),{ClientTypeIos:100,ClientTypeAndroid:200,ClientTypeWinPhone:300,ClientTypePc:400,ClientTypeWeb:500});n.a.EClientType=r,e.a=r},"9gX7":function(t,e,i){t.exports=i("4KFe")(67)},"9ggG":function(t,e,i){var n=i("Z0cm"),r=i("/9aa"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!r(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},"9kvq":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+="<div class=\"n-as-rel n-as-mrgh-lg n-as-of-hidden\" style=\"margin-bottom: 50px;margin-top: 30px;\">\n    <div class=\"n-fx-sc n-as-mrgb\">\n      <div class='n-sk n-sk-t32 n-as-w340px n-as-mrgr-lg'></div>\n      <div class='n-sk n-sk-t32 n-as-w80px n-as-mrgr-lg'></div>\n      <div class='n-sk n-sk-t32 n-as-w80px n-as-mrgr-lg'></div>\n      <div class='n-sk n-sk-t32 n-as-w80px n-as-mrgr-lg'></div>\n      <div class='n-sk n-sk-t32 n-as-w80px n-as-mrgr-lg'></div>\n    </div>\n    <ul class='n-fx-sc n-as-of-hidden n-as-mrgt-lg'>\n      ";for(var i=0;i<8;i++)__p+='\n        <li class="n-fx-sr0 n-as-mrgr-lg">\n          <div class="n-sk n-as-rnd-md" style="width: 188px;height:282px;transform: skew(-8.745deg) translateX(22px)"></div>\n          <div class="n-sk n-sk-t16 n-as-mrgv-xs"></div>\n          <div class="n-sk n-sk-t12 n-as-mrgv-xs n-as-w100px"></div>\n          <div class="n-sk n-sk-t12 n-as-rnd-md n-as-mrgv-xs n-as-w70px"></div>\n        </li>\n      ';__p+="\n    </ul>\n</div>\n"}return __p}},"9liC":function(t,e,i){var n=i("b8Rm");t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},"9wSV":function(t,e,i){!function(t,e,i,n,r,o,a,s,u,c,l,h,d){"use strict";function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=f(i),m=f(n),y=f(r),v=f(o),g=f(a),_=f(s),S=f(c),w=f(l),b=f(d),I="fed.page.loadstatus";function T(t){return"object"===b.default(t)?function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)||Array.isArray(t)?JSON.stringify(t):"":Number.isInteger(t)?"".concat(t):t||""}function P(){return Math.floor(Date.now()/1e3)}var E=function(){function t(e){var i=e.getUid,n=void 0===i?function(){}:i,r=e.getDeviceId,o=void 0===r?function(){}:r,a=e.getGuid,s=void 0===a?function(){}:a,u=e.getCountry,c=void 0===u?function(){}:u,l=e.logger,h=e.host,d=e.isDebug,f=e.isMobile,p=e.metricVerSuffix,y=void 0===p?"":p;m.default(this,t),this.host=h,this.isDebug=d,this.isMobile=f,this.platform=this.isMobile?"wap":"web",this.version="1.2.0".concat(y),this.ua="".concat(this.platform,"&").concat(this.version),this._getDeviceId=o,this._getUid=n,this._getCountry=c,this._getGuid=s,this.logger=l||{log:function(){},error:function(){}}}var e;return y.default(t,[{key:"report",value:(e=w.default(regeneratorRuntime.mark((function t(e,i){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getUid();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0="0";case 5:return n=t.t0,this.uid=n,t.abrupt("return",this._report(e,i));case 8:case"end":return t.stop()}}),t,this)}))),function(t,i){return e.apply(this,arguments)})},{key:"_report",value:function(t,e){var i=this,n=this.transformData(t,e);return n=function(t,e){var i,n,r,o,a,s,u,c,l,h,d,f,p,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i=n=r="",o=a=0;var y=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t);for(o=y.length-1,s=0;o>=0;o--)n=y[o]^e.charCodeAt(s)^a,i+=String.fromCharCode(n),s=++s%e.length,a=n;for(o=0;o<i.length;)h=(u=i.charCodeAt(o++))>>2,d=(3&u)<<4|(c=i.charCodeAt(o++))>>4,f=(15&c)<<2|(l=i.charCodeAt(o++))>>6,p=63&l,isNaN(c)?f=p=64:isNaN(l)&&(p=64),r=r+m.charAt(h)+m.charAt(d)+m.charAt(f)+m.charAt(p);return r}(JSON.stringify(n),String(e)),fetch("".concat(this.host,"?ts=").concat(e),{method:"POST",body:n}).catch((function(t){i.logger.error("fail to fetch",t)}))}},{key:"transformData",value:function(t,e){var i=(S.default.navigator||{}).connection,n=(i=void 0===i?{}:i).rtt,r=void 0===n?-1:n,o=i.downlink,a=void 0===o?-1:o,s={dim:{},field:{},exlog:{}};if(s.dim=t.dim,void 0===s.dim.success&&(s.dim.success="1"),void 0===s.dim.retcode&&(s.dim.retcode="0"),void 0===s.dim.platform&&(s.dim.platform=this.platform),void 0===s.dim.curl&&(s.dim.curl=S.default.location&&S.default.location.href||""),s.field=t.field,void 0===s.field.network_rtt&&(s.field.network_rtt=r),void 0===s.field.network_downlink&&(s.field.network_downlink=a),s.exlog.cookie_enabled=u.storageFeatures.cookie?"true":"false",void 0===s.dim.cookie_enabled&&(s.dim.cookie_enabled=u.storageFeatures.cookie?"1":"0"),void 0===s.dim.device_id&&(s.dim.device_id=this._getDeviceId()||0),void 0===s.dim.sguid&&(s.dim.sguid=this._getGuid()||0),void 0===s.dim.country_flg&&(s.dim.country_flg=this._getCountry()),s.exlog.useragent=S.default.navigator&&S.default.navigator.userAgent||"",s.name=t.name,s.its=e,t.exlog)for(var c in t.exlog)if(Object.prototype.hasOwnProperty.call(t.exlog,c)){var l=T(t.exlog[c]);""!==l&&(s.exlog[c]=l)}var h=String(t.uid||this.uid);return this.logger.log(s.name,s.field,s.dim,h),{m:[s],ua:this.ua,uid:h}}}]),t}();function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_.default(t);if(e){var r=_.default(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g.default(this,i)}}var C=function(t){v.default(i,t);var e=R(i);function i(t){var n;return m.default(this,i),(n=e.call(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){p.default(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({logger:new u.Logger({prefix:"MetricReport"})},t))).loadStatReport(),n}return y.default(i,[{key:"loadStatReport",value:function(){if(S.default&&S.default.getLoadStatData){var t=S.default.getLoadStatData()||{},e=t.pageType,i=t.isLoaded,n=location.protocol;this.report({dim:{platform:this.platform,version:this.version,page_type:e||"",path:location.pathname,schema:n.substr(0,n.length-1),success:i?"1":"0",retcode:"0",load_diff:window.__NM_DIFF__,abtest:"",temp:function(){try{return window.matchMedia("(display-mode: standalone)").matches?"pwa-1":"pwa-0"}catch(t){return""}}()},field:{value:1},name:I},P())}}}]),i}(E);t.API_ERROR_METRIC_NAME="nimo.web_cgi.error",t.API_ERROR_TYPE={NET_ERROR:"net_err",BUSINESS_ERROR:"business_err",JS_ERROR:"js_err"},t.API_RESPONSE_INFO_METRIC_NAME="nimo.api.responseinfo",t.API_RESPONSE_INFO_XL_METRIC_NAME="nimo.api.responseinfo_xl",t.API_SERVER_NAME={JAVA:"java",TAF:"taf",SIGNALING:"signaling",SIGNAL:"signal",JAVA_SIGNAL:"java signal",SAIL:"sail",HAPI:"hapi",UDBAPI:"udbapi"},t.MetricReport=C,t.MetricReportBase=E,t.PAGE_LOAD_STATUS_METRIC_NAME=I,t.VIDEO_BLACK_SCREEN_METRIC_NAME="nimo.video.blackscreen",t.VIDEO_LOAD_TIMEOUT_METRIC_NAME="nimo.video.loadtimeout",t.VIDEO_PLAY_DELAY_METRIC_NAME="nimo.video.playdelay",t.VIDEO_PULL_ERROR_METRIC_NAME="nimo.video.pullerror",t.VIDEO_VIDEO_CARLTON_METRIC_NAME="nimo.video.videocarlton",t.VIDEO_VIDEO_INFO_METRIC_NAME="nimo.video.videoinfo",t.WEB_SOCKET_CONNECT_METRIC_NAME="nimo.ws.connect",t.WEB_SOCKET_RECONNECT_METRIC_NAME="nimo.ws.reconnect",t.getTimestampInSecond=P,Object.defineProperty(t,"__esModule",{value:!0})}(e,i("LXYL"),i("OvAC"),i("SDJZ"),i("NToG"),i("eef+"),i("K4DB"),i("+IV6"),i("QjRD"),i("UXgV"),i("fFdx"),i("wcNg"),i("e+GP"))},A90E:function(t,e,i){var n=i("6sVZ"),r=i("V6Ve"),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return r(t);var e=[];for(var i in Object(t))o.call(t,i)&&"constructor"!=i&&e.push(i);return e}},AA7u:function(t,e,i){"use strict";var n=i("lSNA"),r=i.n(n),o=i("KFtC"),a=i("Wntp"),s=i("EoCF"),u=i("w5j5");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var l=new s.Runtime,h=Object(o.k)(),d=Object(o.g)(),f={isAnonymous:!0,nick:"",lcid:"",uid:0,sGuid:"",token:"",sUA:Object(u.a)("web"),lang:h,version:"",regOrigin:99,sCountry:d,sRegion:"",sOpSeq:"",iNetType:Object(a.a)()},p={roomId:0,lessonId:0,auId:0,nickname:"",topicId:0,iLessonStatus:-1,iTerminalType:6},m={status:!1,roomId:0},y=new s.Runtime(f);y.clear=function(){y.reset(f)};var v=new s.Runtime(p);v.clear=function(){v.reset(p)};var g=new s.Runtime(m);g.open=function(t){return g.init(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({status:!0},t))},g.close=function(){g.reset()},g.clear=function(){g.reset(m)},g.isOpened=function(t){return g.status},l.init({user:y,liveRoom:v,channel:g}),e.a=l},ACU4:function(t,e,i){"use strict";var n=i("X6VK"),r=i("UnHL"),o=i("5MU4");n(n.P+n.F*i("E7Vc")((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=r(this),i=o(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},ANjH:function(t,e,i){"use strict";i.d(e,"a",(function(){return y})),i.d(e,"b",(function(){return h})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return s}));var n=i("bCCX"),r=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+r(),REPLACE:"@@redux/REPLACE"+r(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r()}};function a(t){if("object"!==typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function s(t,e,i){var r;if("function"===typeof e&&"function"===typeof i||"function"===typeof i&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof e&&"undefined"===typeof i&&(i=e,e=void 0),"undefined"!==typeof i){if("function"!==typeof i)throw new Error("Expected the enhancer to be a function.");return i(s)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var u=t,c=e,l=[],h=l,d=!1;function f(){h===l&&(h=l.slice())}function p(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(t){if("function"!==typeof t)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return f(),h.push(t),function(){if(e){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,f();var i=h.indexOf(t);h.splice(i,1),l=null}}}function y(t){if(!a(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,c=u(c,t)}finally{d=!1}for(var e=l=h,i=0;i<e.length;i++){(0,e[i])()}return t}function v(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");u=t,y({type:o.REPLACE})}function g(){var t,e=m;return(t={subscribe:function(t){if("object"!==typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function i(){t.next&&t.next(p())}return i(),{unsubscribe:e(i)}}})[n.a]=function(){return this},t}return y({type:o.INIT}),(r={dispatch:y,subscribe:m,getState:p,replaceReducer:v})[n.a]=g,r}function u(t,e){var i=e&&e.type;return"Given "+(i&&'action "'+String(i)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(t){for(var e=Object.keys(t),i={},n=0;n<e.length;n++){var r=e[n];0,"function"===typeof t[r]&&(i[r]=t[r])}var a,s=Object.keys(i);try{!function(t){Object.keys(t).forEach((function(e){var i=t[e];if("undefined"===typeof i(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof i(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(i)}catch(c){a=c}return function(t,e){if(void 0===t&&(t={}),a)throw a;for(var n=!1,r={},o=0;o<s.length;o++){var c=s[o],l=i[c],h=t[c],d=l(h,e);if("undefined"===typeof d){var f=u(c,e);throw new Error(f)}r[c]=d,n=n||d!==h}return(n=n||s.length!==Object.keys(t).length)?r:t}}function l(t,e){return function(){return e(t.apply(this,arguments))}}function h(t,e){if("function"===typeof t)return l(t,e);if("object"!==typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var i={};for(var n in t){var r=t[n];"function"===typeof r&&(i[n]=l(r,e))}return i}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(i,!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function y(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return function(){var i=t.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r={getState:i.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=e.map((function(t){return t(r)}));return p({},i,{dispatch:n=m.apply(void 0,o)(i.dispatch)})}}}},AP2z:function(t,e,i){var n=i("nmnc"),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),i=t[s];try{t[s]=void 0;var n=!0}catch(u){}var r=a.call(t);return n&&(e?t[s]=i:delete t[s]),r}},AUqF:function(t,e,i){"use strict";t.exports=i("9wSV")},AVt5:function(t,e,i){"use strict";var n=i("QILm"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=(i("Wr5T"),["onShow","onHide"]),l=function(){},h=function(){function t(e){a()(this,t);var i=e.onShow,n=e.onHide,o=r()(e,c);this._observer=new IntersectionObserver(this._callback(i,n),o),this._map=Object.create(null)}return u()(t,[{key:"_callback",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=this;return function(r){r.forEach((function(r){var o=r.isIntersecting,a=r.target,s=t._map[a.id],u=t.remove.bind(n,a);o?e(r,s,u):i(r,s,u)}))}}},{key:"add",value:function(t,e){var i=t.id;if(!i)throw Error("observer target required id attribute");return this._observer?(this._map[i]||(this._observer.observe(t),this._map[i]=e),this.remove.bind(this,t)):function(){}}},{key:"remove",value:function(t){this._observer&&(this._observer.unobserve(t),this._map[t.id]=null,delete this._map[t.id])}},{key:"destroyed",value:function(){this._map=Object.create(null),this._observer&&(this._observer.disconnect(),this._observer=null)}}]),t}();e.a=h},AphP:function(t,e,i){"use strict";var n=i("XKFU"),r=i("S/j/"),o=i("apmT");n(n.P+n.F*i("eeVq")((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=r(this),i=o(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},AyUB:function(t,e,i){t.exports={default:i("3GJH"),__esModule:!0}},B8du:function(t,e){t.exports=function(){return!1}},BACS:function(t,e,i){"use strict";i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("PJYZ"),u=i.n(s),c=i("7W2i"),l=i.n(c),h=i("a1gu"),d=i.n(h),f=i("Nsbk"),p=i.n(f),m=i("lSNA"),y=i.n(m),v=i("q1tI"),g=(i("17x9"),i("pYKy"));function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var S=function(t){l()(i,t);var e=_(i);function i(t){var n;r()(this,i);var o=g.a.getHiddenProp();return n=e.call(this,t),y()(u()(n),"evtName",null),n.handleVisibilityChange=n.handleVisibilityChange.bind(u()(n)),o&&(n.evtName="".concat(o.replace(/[H|h]idden/,""),"visibilitychange")),n}return a()(i,[{key:"componentDidMount",value:function(){this.evtName&&document.addEventListener(this.evtName,this.handleVisibilityChange,!1)}},{key:"componentWillUnmount",value:function(){this.evtName&&(document.removeEventListener(this.evtName,this.handleVisibilityChange,!1),this.evtName=null)}},{key:"handleVisibilityChange",value:function(){var t=this.props.onChange,e=g.a.isHidden();"function"===typeof t&&t(!e)}},{key:"render",value:function(){var t=this.props.children;return void 0===t?null:t}}]),i}(v.PureComponent);y()(S,"defaultProps",{onChange:function(){}}),e.a=S},BSQF:function(t,e,i){"use strict";i.r(e),e.default={namespace:"common_rank",loaders:{1025:function(){return i.e("22745").then(i.bind(null,"YDcR"))},1028:function(){return i.e("9d05b").then(i.bind(null,"JZgl"))},1033:function(){return i.e("0c64f").then(i.bind(null,"xHF/"))},1034:function(){return i.e("0a74f").then(i.bind(null,"Tcfb"))},1041:function(){return i.e("90a5a").then(i.bind(null,"d7HY"))},1046:function(){return i.e("bb597").then(i.bind(null,"ju+S"))},1049:function(){return i.e("e171c").then(i.bind(null,"aMj1"))},1054:function(){return i.e("9ad1c").then(i.bind(null,"kRcX"))},1055:function(){return i.e("cf67e").then(i.bind(null,"EMBc"))},1057:function(){return i.e("53917").then(i.bind(null,"6XEU"))},1066:function(){return i.e("f49cb").then(i.bind(null,"PVwM"))},1081:function(){return i.e("a3653").then(i.bind(null,"FQ2M"))},1086:function(){return i.e("51903").then(i.bind(null,"HLRH"))},1124:function(){return i.e("07d98").then(i.bind(null,"YHK3"))}}}},BUlT:function(t,e,i){var n=i("mvii"),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},BUsv:function(t,e,i){"use strict";i.d(e,"i",(function(){return f.a})),i.d(e,"a",(function(){return p.a})),i.d(e,"g",(function(){return m.e})),i.d(e,"h",(function(){return m.f})),i.d(e,"e",(function(){return m.a})),i.d(e,"f",(function(){return m.b})),i.d(e,"d",(function(){return y.e})),i.d(e,"c",(function(){return y.d}));var n=i("RIqP"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("lSNA"),l=i.n(c),h=i("W7YU"),d=function(){function t(){a()(this,t),this.handlers=[]}return u()(t,[{key:"push",value:function(t,e){return this.handlers.push({onFulfilled:t,onRejected:e}),this.handlers.length-1}},{key:"unshift",value:function(t,e){return this.handlers.unshift({onFulfilled:t,onRejected:e}),this.handlers.length-1}},{key:"remove",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"forEach",value:function(t){this.handlers.forEach((function(e){null!==e&&t(e)}))}}]),t}(),f=i("WgMg"),p=i("WQyD"),m=i("jKdo"),y=i("RA07");function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){l()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var _={OPEN:0,RE_OPEN:1,ERROR:2,CLOSE:3},S=function(){function t(e){a()(this,t),l()(this,"ready",!1),l()(this,"socket",null),this.defaults=e,this.interceptors={request:new d,response:new d},this.channel=e.channel}return u()(t,[{key:"dispose",value:function(){this.ready=null,this.defaults=null,this.interceptors=null,this.socket.dispose&&this.socket.dispose(),this.socket=null}},{key:"init",value:function(t){var e=t||{},i=e.wsServer,n=e.user;return this.isReady()||(this.defaults=g(g({},this.defaults),t),f.a.init(n),this.socket||(this.socket=this.defaults.socket({onOpen:this.handleSocketOpen.bind(this),onError:this.handleSocketError.bind(this),onClose:this.handleSocketClose.bind(this),onMessage:this.handleSocketReceiveMessage.bind(this)}),this.socket.connect(i))),this}},{key:"handleSocketOpen",value:function(t,e,i){var n=this.defaults.onSocketOpen;this.channel&&this.channel.open(this,e),this.ready=!0;var r=_[e?"RE_OPEN":"OPEN"];this.dispatch(r,{isReconnection:e}),"function"===typeof n&&n(i)}},{key:"handleSocketError",value:function(t){this.channel&&this.channel.close(),this.dispatch(_.ERROR,t.type||"")}},{key:"handleSocketClose",value:function(t,e){var i=this.defaults.onSocketClose;this.channel&&this.channel.close(),this.dispatch(_.CLOSE,t.reason),"function"===typeof i&&i(e)}},{key:"handleSocketReceiveMessage",value:function(t){var e=(t||{}).data,i=[],n=Promise.resolve(e);for(this.interceptors.response.forEach((function(t){i.push(t.onFulfilled,t.onRejected)}));i.length;)n=n.then(i.shift(),i.shift())}},{key:"request",value:function(t){var e,i=(t||{}).requestData,n=(e=this.socket).send.apply(e,r()(i));return n||Promise.resolve(t)}},{key:"send",value:function(){for(var t=[this.request.bind(this),void 0],e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=Promise.resolve(i);for(this.interceptors.request.forEach((function(e){t.unshift(e.onFulfilled,e.onRejected)}));t.length;)r=r.then(t.shift(),t.shift());return r}},{key:"sendGroup",value:function(t){if(this.socket&&this.socket.sendRegisterGroup){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r,o;if(t)(r=this.socket).sendRegisterGroup.apply(r,i);else(o=this.socket).sendUnRegisterGroup.apply(o,i)}}},{key:"onGroup",value:function(t){if(this.socket&&this.socket.onRegisterGroup){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r,o;if(t)(r=this.socket).onRegisterGroup.apply(r,i);else(o=this.socket).onUnRegisterGroup.apply(o,i)}}},{key:"offGroup",value:function(t){if(this.socket&&this.socket.offRegisterGroup){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r,o;if(t)(r=this.socket).offRegisterGroup.apply(r,i);else(o=this.socket).offUnRegisterGroup.apply(o,i)}}},{key:"isReady",value:function(){return this.ready}},{key:"dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case _.OPEN:case _.RE_OPEN:h.e.emit("open",e);break;case _.CLOSE:h.e.emit("close",e)}}}]),t}();e.b=S},BYFT:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"d",(function(){return o})),i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return s})),i.d(e,"g",(function(){return u})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return l}));var n="www.nimo.tv"===location.hostname||"dashboard.nimo.tv"===location.hostname,r=location.protocol;"https:"!==r&&"http:"!==r&&(r="https:");var o=r,a=n?"www.nimo.tv":"m.nimo.tv",s="".concat(o,"//").concat(a),u="m.nimo.tv",c="www.nimo.tv",l=["".concat(o,"//").concat(u),"".concat(o,"//").concat(c),"".concat(o,"//").concat("dashboard.nimo.tv")]},BZaN:function(t,e,i){"use strict";i("I5cv");var n,r,o,a=i("lwsE"),s=i.n(a),u=i("W8MJ"),c=i.n(u),l=i("7W2i"),h=i.n(l),d=i("a1gu"),f=i.n(d),p=i("Nsbk"),m=i.n(p),y=i("lSNA"),v=i.n(y),g=i("q1tI"),_=i.n(g),S=i("/MKj"),w=i("TSYQ"),b=i.n(w),I=i("cOjp"),T=i("YBQF"),P=i("j0d6");function E(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=m()(t);if(e){var r=m()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f()(this,i)}}var k=new I.a({prefix:"PlayerPuppet"}),R=Object(S.c)((function(t){var e;return{playerLoadedData:t.common.playerLoadedData,playerPuppetMounted:null===(e=t.common.player)||void 0===e?void 0:e.puppetMounted}}),(function(t){return{updatePlayerState:function(e){k.log("updatePlayerState",e),t(P.A(e))}}}))((o=r=function(t){h()(i,t);var e=E(i);function i(){return s()(this,i),e.apply(this,arguments)}return c()(i,[{key:"componentDidMount",value:function(){(0,this.props.updatePlayerState)({puppetMounted:!0})}},{key:"componentWillUnmount",value:function(){(0,this.props.updatePlayerState)({puppetMounted:!1})}},{key:"render",value:function(){var t=this.props,e=t.id,i=t.prefixCls,n=t.className,r=t.playerLoadedData;return _.a.createElement("div",{id:e||i,className:b()(i,n)},r?null:_.a.createElement(T.h,{loading:!0,delay:500}))}}]),i}(_.a.PureComponent),v()(r,"defaultProps",{prefixCls:"nimo-player-puppet",className:""}),n=o))||n;e.a=R},BiGR:function(t,e,i){var n=i("nmnc"),r=i("03A+"),o=i("Z0cm"),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||r(t)||!!(a&&t&&t[a])}},"BlI/":function(t,e,i){"use strict";i.d(e,"c",(function(){return C})),i.d(e,"a",(function(){return v.a}));i("I5cv");var n=i("J4zp"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("7W2i"),l=i.n(c),h=i("a1gu"),d=i.n(h),f=i("Nsbk"),p=i.n(f),m=i("U+yc"),y=i.n(m),v=i("ULCk"),g=i("ZMLX"),_=i("EoCF"),S=(i("leMB"),function(){this.tUser=new g.a.UserId,this.vAppId=new _.Taf.Vector(new _.Taf.INT32)});S.prototype._clone=function(){return new g.a.GetDecorationInfoListReq},S.prototype._write=function(t,e,i){t.writeStruct(e,i)},S.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},S.prototype.writeTo=function(t){t.writeStruct(0,this.tUser),t.writeVector(1,this.vAppId)},S.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser),this.vAppId=t.readVector(1,!1,this.vAppId)},g.a.GetDecorationInfoListReq=S;var w=S,b=(i("OC+i"),function(){this.iCode=0,this.vDecorationInfo=new _.Taf.Vector(new g.a.DecorationInfo)});b.prototype._clone=function(){return new g.a.GetDecorationInfoListRsp},b.prototype._write=function(t,e,i){t.writeStruct(e,i)},b.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},b.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeVector(1,this.vDecorationInfo)},b.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.vDecorationInfo=t.readVector(1,!1,this.vDecorationInfo)},g.a.GetDecorationInfoListRsp=b;var I,T=b,P=i("w0rY"),E=i("Mk7s");function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var R=(I=function(t){l()(i,t);var e=k(i);function i(){return a()(this,i),e.apply(this,arguments)}return u()(i,[{key:"getDecorationInfoList",value:function(t){var e=(t||{}).appIds,i=void 0===e?[v.a.kDecorationAppTypeNobleVIP,v.a.kDecorationAppTypeSubscribeVIP]:e,n=new w;return n.vAppId.value=i,this.setUserId(n.tUser),this.fetch("getDecorationInfoList",n,T,{customHandleError:!0}).then((function(t){var e=(t||{}).vDecorationInfo;return void 0===e?[]:e}))}}]),i}(P.a),y()(I.prototype,"getDecorationInfoList",[E.a],Object.getOwnPropertyDescriptor(I.prototype,"getDecorationInfoList"),I.prototype),I),C=(e.b=new R,function(t,e){return t.filter((function(t){return!!e.find((function(e){var i=r()(e,2),n=i[0],o=i[1];return n===t.iAppId&&o===t.iRank}))}))})},BmoR:function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),{BGGoldCoin:1,BGDiamond:2,BGCdKey:3,BGGift:4,BGDecoration:5,BGAvatarDecoration:6,BGGEM:7,BGPIECE:8,BGBONUS:9,BGLuckyAward:10,BGActLotteryTimes:11,BGCoupon:12,BGStarshineScore:13,BGEnterRoomEffect:14,BGLuckyClover:15,BGExperience:16,BGEmoticon:17,BGSpeakSkin:18,BGGoldbean:19,BGLevelUpdateTips:20,BGApproacheNotice:21,BGCreateFamily:22,BGMedalLimitNum:23});n.a.EBoxAwardType=r,e.a=r},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},"Bsg+":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},Bvyh:function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.videourl="",this.Duration=0,this.vtype=0,this.iCdn=0,this.lVid=0,this.sVideoTypeName=""});r.prototype._clone=function(){return new n.a.VideoData},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeString(0,this.videourl),t.writeInt32(1,this.Duration),t.writeInt32(2,this.vtype),t.writeInt32(3,this.iCdn),t.writeInt64(4,this.lVid),t.writeString(5,this.sVideoTypeName)},r.prototype.readFrom=function(t){this.videourl=t.readString(0,!1,this.videourl),this.Duration=t.readInt32(1,!1,this.Duration),this.vtype=t.readInt32(2,!1,this.vtype),this.iCdn=t.readInt32(3,!1,this.iCdn),this.lVid=t.readInt64(4,!1,this.lVid),this.sVideoTypeName=t.readString(5,!1,this.sVideoTypeName)},n.a.VideoData=r},BxBT:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o}));var n=i("KkFV");function r(){var t=n.c.get("room-view")||0;return Number(t)||0}function o(){var t=r()+1;return n.c.set("room-view",String(t)),t}},"C+HQ":function(t,e,i){"use strict";var n;e.__esModule=!0,e.default=void 0;var r=(0,((n=i("1Nqh"))&&n.__esModule?n:{default:n}).default)("local");e.default=r},CH3K:function(t,e){t.exports=function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}},CH3P:function(t,e,i){"use strict";var n=i("lSNA"),r=i.n(n),o=i("9Fjj"),a=i("nZ4e"),s=i("q1tI"),u=i("i8i4");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}o.a.info=function(t){var e=d({type:"info",iconType:"info-circle",okCancel:!1},t);return Object(a.a)(e)},o.a.success=function(t){var e=d({type:"success",iconType:"check-circle",okCancel:!1},t);return Object(a.a)(e)},o.a.error=function(t){var e=d({type:"error",iconType:"cross-circle",okCancel:!1},t);return Object(a.a)(e)},o.a.warn=function(t){var e=d({type:"warning",iconType:"exclamation-circle",okCancel:!1},t);return Object(a.a)(e)},o.a.warning=o.a.warn,o.a.confirm=function(t){var e=d({type:"confirm",okCancel:!0},t);return Object(a.a)(e)},o.a.show=function(t){var e,i=document.createElement("div");function n(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];a(l(l({},e),{},{visible:!1,afterClose:function(){return r.apply(void 0,i)}}))}function r(){var e=u.unmountComponentAtNode(i);e&&i.parentNode&&i.parentNode.removeChild(i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=r&&r.length&&r.some((function(t){return t&&t.triggerCancel}));t.onCancel&&a&&t.onCancel.apply(t,r)}function a(t){e=l(l({visible:!0,footer:null},t),{},{onCancel:function(){n({triggerCancel:!0})}}),u.render(s.createElement(o.a,e),i)}return t.getContainer?t.getContainer().appendChild(i):(t.getContainer=function(){return document.body},document.body.appendChild(i)),a(t),{update:a,destroy:n}};e.a=o.a},CLuC:function(t,e,i){var n=i("P56o").document;t.exports=n&&n.documentElement},CMye:function(t,e,i){var n=i("GoyQ");t.exports=function(t){return t===t&&!n(t)}},CTc9:function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n),o=i("TSYQ"),a=i.n(o),s=i("vARU"),u=function(t){var e=t.img,i=t.width,n=t.className,o=void 0===n?"":n;return r.a.createElement("div",{className:a()(o,"nimo-blur-bg","n-as-abs n-as-full")},r.a.createElement(s.a,{width:i,src:e,className:"n-as-abs n-as-full"}),r.a.createElement("div",{className:"nimo-blur-bg-mask n-as-abs n-as-full bc18"}))};e.a=u},CWBI:function(t,e,i){t.exports=i("sZro")},CZoQ:function(t,e){t.exports=function(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}},CbbO:function(t,e,i){"use strict";i("I5cv");var n,r=i("J4zp"),o=i.n(r),a=i("lSNA"),s=i.n(a),u=i("lwsE"),c=i.n(u),l=i("W8MJ"),h=i.n(l),d=i("iWIM"),f=i.n(d),p=i("7W2i"),m=i.n(p),y=i("a1gu"),v=i.n(y),g=i("Nsbk"),_=i.n(g),S=i("U+yc"),w=i.n(S),b=i("r5Lm"),I=i("9SJS");function T(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_()(t);if(e){var r=_()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return v()(this,i)}}i.d(e,"b",(function(){return I.b}));var E=(n=function(t){m()(i,t);var e=P(i);function i(t){var n;return c()(this,i),(n=e.call(this,t)).defaults=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?T(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t),n}return h()(i,[{key:"on",value:function(t,e){var n=this._getBroadcast(t)||[],r=o()(n,2),a=r[0],s=r[1];return f()(_()(i.prototype),"on",this).call(this,a,s,e)}},{key:"off",value:function(t,e){var n=this._getBroadcast(t)||[],r=o()(n,1)[0];return f()(_()(i.prototype),"off",this).call(this,r,e)}},{key:"onTotalMessageNotice",value:function(t){var e=this,i=this.defaults.broadcasts,n=void 0===i?{}:i;Object.keys(n).forEach((function(i){e.on(i,t)}))}},{key:"offTotalMessageNotice",value:function(t){var e=this,i=this.defaults.broadcasts,n=void 0===i?{}:i;Object.keys(n).forEach((function(i){e.off(i,t)}))}}]),i}(I.a),w()(n.prototype,"onTotalMessageNotice",[b.a],Object.getOwnPropertyDescriptor(n.prototype,"onTotalMessageNotice"),n.prototype),w()(n.prototype,"offTotalMessageNotice",[b.a],Object.getOwnPropertyDescriptor(n.prototype,"offTotalMessageNotice"),n.prototype),n);e.a=E},Cfrj:function(t,e,i){var n=i("RYi7"),r=i("ne8i");t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},CkkT:function(t,e,i){t.exports=i("4KFe")(52)},Cmsx:function(t,e,i){var n=i("n+VH");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},Cwc5:function(t,e,i){var n=i("NKxu"),r=i("Npjl");t.exports=function(t,e){var i=r(t,e);return n(i)?i:void 0}},"D+3q":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("lSNA"),u=i.n(s),c=i("xk4V"),l=i.n(c),h=function(){function t(e){var i=this;r()(this,t),u()(this,"onVideoLoadStart",(function(){var t=i.parent.streamInfo,e=t.cdn,n=t.rate,r=i.streamInfo,o=r.cdn,a=void 0===o?-1:o,s=r.rate;e===a&&n===(void 0===s?-1:s)?(i.stopHeartbeat(),i.playId=0):i.streamInfo=t})),u()(this,"onVideoPlayerPlay",(function(){i.parent.isLiveType()?i.stopHeartbeat():i.isHeartbeat()||(i.playId=l()(),i.startHeartbeat())})),u()(this,"onVideoPlayerEnded",(function(){i.stopHeartbeat()})),this.parent=e,this.heartbeatTimeout=-1,this.playId=0,this.streamInfo={},this.listenAllParentEvents()}return a()(t,[{key:"dispose",value:function(){this.removeAllParentEvents(),this.stopHeartbeat(),this.streamInfo=null,this.parent=null,this.playId="",this.heartbeatTimeout=-1}},{key:"listenAllParentEvents",value:function(){var t=this.parent;t.on("play",this.onVideoPlayerPlay),t.on("loadstart",this.onVideoLoadStart),t.on("ended",this.onVideoPlayerEnded)}},{key:"removeAllParentEvents",value:function(){var t=this.parent;t.off("play",this.onVideoPlayerPlay),t.off("loadstart",this.onVideoLoadStart),t.off("ended",this.onVideoPlayerEnded)}},{key:"heartbeat",value:function(){var t=this,e=this.parent.plugins.get("reporter");e&&(this.heartbeatTimeout=setTimeout((function(){e.reportVideoPlayHeartbeat(t.playId),t.heartbeat()}),5e3))}},{key:"stopHeartbeat",value:function(){clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=-1}},{key:"startHeartbeat",value:function(){this.heartbeat()}},{key:"isHeartbeat",value:function(){return-1!==this.heartbeatTimeout}}]),t}()},"D+av":function(t,e,i){t.exports=i("4KFe")(119)},D4iV:function(t,e,i){for(var n,r=i("dyZX"),o=i("Mukb"),a=i("ylqs"),s=a("typed_array"),u=a("view"),c=!(!r.ArrayBuffer||!r.DataView),l=c,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(n=r[d[h++]])?(o(n.prototype,s,!0),o(n.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},DSRE:function(t,e,i){(function(t){var n=i("Kz5y"),r=i("B8du"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?n.Buffer:void 0,u=(s?s.isBuffer:void 0)||r;t.exports=u}).call(this,i("YuTi")(t))},Dk78:function(t,e,i){"use strict";var n=i("ZMLX"),r=i("EoCF"),o=(i("yyBc"),i("2UZc"),i("TJ08"),i("OC+i"),i("f7Wj"),function(){this.iNormalModeColor=4287270602,this.iNightModeColor=4286347469});o.prototype._clone=function(){return new n.a.NickNameFormat},o.prototype._write=function(t,e,i){t.writeStruct(e,i)},o.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},o.prototype.writeTo=function(t){t.writeInt32(0,this.iNormalModeColor),t.writeInt32(1,this.iNightModeColor)},o.prototype.readFrom=function(t){this.iNormalModeColor=t.readInt32(0,!1,this.iNormalModeColor),this.iNightModeColor=t.readInt32(1,!1,this.iNightModeColor)},n.a.NickNameFormat=o;var a=function(){this.iIsCamp=0,this.iIsPickMe=0,this.iIs1Diamond=0,this.iIsPayChat=0,this.iIsInterGift=0,this.iIsVoiceEmoji=0,this.iIsGamePlay=0,this.iIsFanActivity=0};a.prototype._clone=function(){return new n.a.MessageBussInfo},a.prototype._write=function(t,e,i){t.writeStruct(e,i)},a.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},a.prototype.writeTo=function(t){t.writeInt32(0,this.iIsCamp),t.writeInt32(1,this.iIsPickMe),t.writeInt32(2,this.iIs1Diamond),t.writeInt32(3,this.iIsPayChat),t.writeInt32(4,this.iIsInterGift),t.writeInt32(5,this.iIsVoiceEmoji),t.writeInt32(6,this.iIsGamePlay),t.writeInt32(7,this.iIsFanActivity)},a.prototype.readFrom=function(t){this.iIsCamp=t.readInt32(0,!1,this.iIsCamp),this.iIsPickMe=t.readInt32(1,!1,this.iIsPickMe),this.iIs1Diamond=t.readInt32(2,!1,this.iIs1Diamond),this.iIsPayChat=t.readInt32(3,!1,this.iIsPayChat),this.iIsInterGift=t.readInt32(4,!1,this.iIsInterGift),this.iIsVoiceEmoji=t.readInt32(5,!1,this.iIsVoiceEmoji),this.iIsGamePlay=t.readInt32(6,!1,this.iIsGamePlay),this.iIsFanActivity=t.readInt32(7,!1,this.iIsFanActivity)},n.a.MessageBussInfo=a;i("1DhJ");var s=function(){this.tUserInfo=new n.a.SenderInfo,this.lRoomId=0,this.sContent="",this.iShowMode=0,this.tFormat=new n.a.ContentFormat,this.tBulletFormat=new n.a.BulletFormat,this.iTermType=0,this.vDecorationPrefix=new r.Taf.Vector(new n.a.DecorationInfo),this.vDecorationSuffix=new r.Taf.Vector(new n.a.DecorationInfo),this.vAtSomeone=new r.Taf.Vector(new n.a.UidNickName),this.lPid=0,this.sAvatar="",this.lCombo=0,this.bFindSWord=!1,this.bIsVIP=!1,this.bIsCamp=!1,this.tNickNameFormat=new n.a.NickNameFormat,this.iRoyalLevel=0,this.bIsPickMe=!1,this.iExtraStyle=0,this.tMessageBussInfo=new n.a.MessageBussInfo,this.mExtraData=new r.Taf.Map(new r.Taf.STRING,new r.Taf.STRING),this.tAvatarBox=new n.a.AvatarBox};s.prototype._clone=function(){return new n.a.MessageNotice},s.prototype._write=function(t,e,i){t.writeStruct(e,i)},s.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},s.prototype.writeTo=function(t){t.writeStruct(0,this.tUserInfo),t.writeInt64(1,this.lRoomId),t.writeString(2,this.sContent),t.writeInt32(3,this.iShowMode),t.writeStruct(4,this.tFormat),t.writeStruct(5,this.tBulletFormat),t.writeInt32(6,this.iTermType),t.writeVector(7,this.vDecorationPrefix),t.writeVector(8,this.vDecorationSuffix),t.writeVector(9,this.vAtSomeone),t.writeInt64(10,this.lPid),t.writeString(11,this.sAvatar),t.writeInt64(12,this.lCombo),t.writeBoolean(13,this.bFindSWord),t.writeBoolean(14,this.bIsVIP),t.writeBoolean(15,this.bIsCamp),t.writeStruct(16,this.tNickNameFormat),t.writeInt32(17,this.iRoyalLevel),t.writeBoolean(18,this.bIsPickMe),t.writeInt32(19,this.iExtraStyle),t.writeStruct(20,this.tMessageBussInfo),t.writeMap(21,this.mExtraData),t.writeStruct(22,this.tAvatarBox)},s.prototype.readFrom=function(t){this.tUserInfo=t.readStruct(0,!1,this.tUserInfo),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.sContent=t.readString(2,!1,this.sContent),this.iShowMode=t.readInt32(3,!1,this.iShowMode),this.tFormat=t.readStruct(4,!1,this.tFormat),this.tBulletFormat=t.readStruct(5,!1,this.tBulletFormat),this.iTermType=t.readInt32(6,!1,this.iTermType),this.vDecorationPrefix=t.readVector(7,!1,this.vDecorationPrefix),this.vDecorationSuffix=t.readVector(8,!1,this.vDecorationSuffix),this.vAtSomeone=t.readVector(9,!1,this.vAtSomeone),this.lPid=t.readInt64(10,!1,this.lPid),this.sAvatar=t.readString(11,!1,this.sAvatar),this.lCombo=t.readInt64(12,!1,this.lCombo),this.bFindSWord=t.readBoolean(13,!1,this.bFindSWord),this.bIsVIP=t.readBoolean(14,!1,this.bIsVIP),this.bIsCamp=t.readBoolean(15,!1,this.bIsCamp),this.tNickNameFormat=t.readStruct(16,!1,this.tNickNameFormat),this.iRoyalLevel=t.readInt32(17,!1,this.iRoyalLevel),this.bIsPickMe=t.readBoolean(18,!1,this.bIsPickMe),this.iExtraStyle=t.readInt32(19,!1,this.iExtraStyle),this.tMessageBussInfo=t.readStruct(20,!1,this.tMessageBussInfo),this.mExtraData=t.readMap(21,!1,this.mExtraData),this.tAvatarBox=t.readStruct(22,!1,this.tAvatarBox)},n.a.MessageNotice=s;e.a=s},Dn2j:function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));i("I5cv");var n,r=i("lSNA"),o=i.n(r),a=i("lwsE"),s=i.n(a),u=i("W8MJ"),c=i.n(u),l=i("7W2i"),h=i.n(l),d=i("a1gu"),f=i.n(d),p=i("Nsbk"),m=i.n(p),y=i("70i0"),v=i("KFtC"),g=i("cOjp");function _(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_(Object(i),!0).forEach((function(e){o()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function w(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=m()(t);if(e){var r=m()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f()(this,i)}}var b=null===(n=Object(v.H)())||void 0===n?void 0:n.params,I=g.b.log,T=new(function(t){h()(i,t);var e=w(i);function i(){return s()(this,i),e.apply(this,arguments)}return c()(i,[{key:"getSubscribeInfo",value:function(t){var e,i=this.buildUri("vip/subscribeInfo",{version:"v3"}),n={encrypt:!0,data:t.data};if(I("订阅状态接口-参数",t),1===+(null===b||void 0===b?void 0:b._mock)){var r=function(t){return{alreadySubscribeData:{channelId:0,diamondContinuousChannelId:0,diamondContinuousProdId:"string",expireTime:12312312,fromLevel:1,needDay:60,nextLevel:2,renew:0,subscribeSource:0,totalDay:3},anchorImage:"1.jpg",anchorNickName:"我不是人杰",channelPackagePrice:[{continuous:0,date:8,dateUnit:"M",fanExchange:1,month:0,originalPrice:4.99,price:2.99,nextPrice:1.99,productId:"com.nimo.sub1",productName:"包月订阅(无免费试用)"},{continuous:0,date:8,dateUnit:"M",fanExchange:0,month:1,originalPrice:4.99,price:2.99,nextPrice:1.99,productId:103,productName:"one month"},{continuous:0,date:8,dateUnit:"M",fanExchange:0,month:3,originalPrice:16.99,price:14.99,nextPrice:1.99,productId:"902",productName:"three months（泰国）"},{continuous:0,date:8,dateUnit:"M",fanExchange:0,month:12,originalPrice:59.88,price:35.99,nextPrice:1.99,productId:"105",productName:"one year"}],diamondPackagePrice:[{continuous:1,date:8,dateUnit:"M",fanExchange:0,month:0,originalPrice:499,price:299,nextPrice:1.99,productId:"202129900p0dx1799511839152_tg",productName:"2243081817"},{continuous:0,date:8,dateUnit:"M",fanExchange:0,month:1,originalPrice:499,price:299,nextPrice:1.99,productId:"subscribution_1month_test",productName:"一个月测试"},{continuous:0,date:8,dateUnit:"M",fanExchange:0,month:3,originalPrice:1499,price:899,nextPrice:1.99,productId:"test4.99three",productName:"三个月测试（泰国）"},{continuous:0,date:8,dateUnit:"M",fanExchange:0,month:12,originalPrice:5988,price:3599,nextPrice:1.99,productId:"subscribution_12months_test",productName:"十二个月测试"}],tab:0,fanExchange:1,type:0}};return Promise.resolve().then(r).catch(r)}return!1===!(null===(e=t.data)||void 0===e||!e.bizToken)?Promise.reject():this.fetch(i,n)}},{key:"fetchVipSubscribeStatus",value:function(t){var e=this.buildUri("vip/vipSubscribeStatus"),i={encrypt:!1,data:S({requestSource:"WEB",version:this.udbVersion,bizToken:this.udbBizToken,udbUserId:this.udbUserId,lang:this.lang,deviceType:7},t)};return this.fetch(e,i)}},{key:"getFansCurrentSubscribeList",value:function(t){var e=this.buildUri("vip/getFansCurrentSubscribeList"),i={encrypt:!0,data:S({requestSource:"WEB",udbDeviceType:"WEB",version:this.udbVersion,bizToken:this.udbBizToken,udbUserId:this.udbUserId},t)};return this.fetch(e,i)}},{key:"getFansExpiredSubscribeList",value:function(t){var e=this.buildUri("vip/getFansExpiredSubscribeList"),i={encrypt:!0,data:S({requestSource:"WEB",udbDeviceType:"WEB",version:this.udbVersion,bizToken:this.udbBizToken,udbUserId:this.udbUserId},t)};return this.fetch(e,i)}},{key:"renewal",value:function(t){var e=this.buildUri("account/subscribe/renewal/".concat(null===t||void 0===t?void 0:t.countryCode),{version:"v2"}),i={encrypt:!0,data:S({requestSource:"WEB",udbDeviceType:"WEB",version:this.udbVersion,bizToken:this.udbBizToken,udbUserId:this.udbUserId},t)};return this.fetch(e,i)}}]),i}(y.q))},Dp90:function(t,e,i){"use strict";i.d(e,"b",(function(){return u})),i.d(e,"a",(function(){return c}));var n=i("xB+L"),r=i("lpJ4"),o={1:"v",3:"clip",4:"clip",6:"v",7:"clip"};function a(t){return o[t]||"v"}var s=Object(n.isInNimoApp)();function u(t){var e=t.dotType,i=t.resourceId,n=a(e);return"//".concat("www.nimo.tv","/").concat(n,"/").concat(i)}function c(t){if(s){var e=t||{},i=e.title,o=e.videoUrl,c=e.businessType,l=e.resourceId,h=e.cdnFlag,d=e.videoResolution,f=e.roomId,p=e.anchorId,m=e.from;Object(n.jumpToPlayerPage)({title:i,videoUrl:o,businessType:c,resourceId:l,cdnFlag:h,videoResolution:d,roomId:f,anchorId:p,from:m})}else if("wap"===(null===t||void 0===t?void 0:t.from))setTimeout((function(){window.location.href=u(t)}),200);else{var y=t.resourceId,v=a(t.dotType);r.a.push("/".concat(v,"/").concat(y))}}},"Dw+G":function(t,e,i){var n=i("juv8"),r=i("mTTR");t.exports=function(t,e){return t&&n(e,r(e),t)}},DzJC:function(t,e,i){var n=i("sEfC"),r=i("GoyQ");t.exports=function(t,e,i){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return r(i)&&(o="leading"in i?!!i.leading:o,a="trailing"in i?!!i.trailing:a),n(t,e,{leading:o,maxWait:e,trailing:a})}},"E+oP":function(t,e,i){var n=i("A90E"),r=i("QqLw"),o=i("03A+"),a=i("Z0cm"),s=i("MMmD"),u=i("DSRE"),c=i("6sVZ"),l=i("c6wG"),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=r(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!n(t).length;for(var i in t)if(h.call(t,i))return!1;return!0}},E0u0:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i("QDlc")),o=n(i("MgzW")),a=!1,s=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function u(t){return null===t||void 0===t}var c=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(t,e){u(t.which)&&(t.which=u(e.charCode)?e.keyCode:e.charCode),void 0===t.metaKey&&(t.metaKey=t.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(t,e){var i=void 0,n=void 0,r=void 0,o=e.wheelDelta,a=e.axis,s=e.wheelDeltaY,u=e.wheelDeltaX,c=e.detail;o&&(r=o/120),c&&(r=0-(c%3===0?c/3:c)),void 0!==a&&(a===t.HORIZONTAL_AXIS?(n=0,i=0-r):a===t.VERTICAL_AXIS&&(i=0,n=r)),void 0!==s&&(n=s/120),void 0!==u&&(i=-1*u/120),i||n||(n=r),void 0!==i&&(t.deltaX=i),void 0!==n&&(t.deltaY=n),void 0!==r&&(t.delta=r)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(t,e){var i=void 0,n=void 0,r=void 0,o=t.target,a=e.button;return o&&u(t.pageX)&&!u(e.clientX)&&(n=(i=o.ownerDocument||document).documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),!t.relatedTarget&&t.fromElement&&(t.relatedTarget=t.fromElement===o?t.toElement:t.fromElement),t}}];function l(){return true}function h(){return a}function d(t){var e=t.type,i="function"===typeof t.stopPropagation||"boolean"===typeof t.cancelBubble;r.default.call(this),this.nativeEvent=t;var n=h;"defaultPrevented"in t?n=t.defaultPrevented?l:h:"getPreventDefault"in t?n=t.getPreventDefault()?l:h:"returnValue"in t&&(n=t.returnValue===a?l:h),this.isDefaultPrevented=n;var o=[],u=void 0,d=void 0,f=s.concat();for(c.forEach((function(t){e.match(t.reg)&&(f=f.concat(t.props),t.fix&&o.push(t.fix))})),u=f.length;u;)this[d=f[--u]]=t[d];for(!this.target&&i&&(this.target=t.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),u=o.length;u;)(0,o[--u])(this,t);this.timeStamp=t.timeStamp||Date.now()}var f=r.default.prototype;(0,o.default)(d.prototype,f,{constructor:d,preventDefault:function(){var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=a,f.preventDefault.call(this)},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=true,f.stopPropagation.call(this)}}),e.default=d,t.exports=e.default},E2jh:function(t,e,i){var n=i("2gN3"),r=function(){var t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!r&&r in t}},E7Vc:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},EA7m:function(t,e,i){var n=i("zZ0H"),r=i("Ioao"),o=i("wclG");t.exports=function(t,e){return o(r(t,e,n),t+"")}},EEGq:function(t,e,i){var n=i("juv8"),r=i("oCl/");t.exports=function(t,e){return n(t,r(t),e)}},EG1n:function(t,e,i){"use strict";i("I5cv");var n=i("QILm"),r=i.n(n),o=i("lSNA"),a=i.n(o),s=i("lwsE"),u=i.n(s),c=i("W8MJ"),l=i.n(c),h=i("iWIM"),d=i.n(h),f=i("7W2i"),p=i.n(f),m=i("a1gu"),y=i.n(m),v=i("Nsbk"),g=i.n(v),_=i("AUqF"),S=i("QjRD"),w=i("W7YU"),b=i("cHZA"),I=i("BYFT"),T=["useSignal"],P=["avatar","avatarUrl","guid","ua","userid","userName","bizToken","lang","clang","country","udbUserId","version"];function E(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?E(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var r=g()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y()(this,i)}}var C=function(t){p()(i,t);var e=R(i);function i(t){return u()(this,i),e.call(this,k({prefix:"nimojavaui"},t))}return l()(i,[{key:"fetch",value:function(t,e,n,o){var a=o||{},s=a.useSignal,u=void 0===s?this.useSignal:s,c=r()(a,T);return d()(g()(i.prototype),"fetch",this).call(this,t,e,n,k({server:u?_.API_SERVER_NAME.JAVA_SIGNAL:_.API_SERVER_NAME.JAVA,useSignal:u},c))}},{key:"setUserId",value:function(t,e){var i=e||{},n=(i.avatar,i.avatarUrl,i.guid,i.ua),o=(i.userid,i.userName),a=void 0===o?this.nickname:o,s=i.bizToken,u=void 0===s?this.udbBizToken:s,c=i.lang,l=void 0===c?this.lang:c,h=i.clang,d=void 0===h?this.clang:h,f=i.country,p=void 0===f?this.countryCode:f,m=i.udbUserId,y=void 0===m?this.udbUserId:m,v=i.version,g=void 0===v?this.udbVersion:v,_=r()(i,P),S=k({isAnonymous:!y,nick:a,lcid:d,uid:y,token:u,lang:l,version:g,sCountry:p,sUA:n||Object(w.h)(I.a?"web":"wap")},_),b=w.i.user.isReady();Object(w.j)(t.userId,e||!b?S:null)}},{key:"commonSetUserId",value:function(t,e){Object(w.j)(t,e)}},{key:"setBaseParam",value:function(t,e){var i=Object.prototype.hasOwnProperty,n=k({requestSource:"WEB",deviceType:7,apiVersionCode:"v1"},e);for(var r in t)i.call(t,r)&&("userId"===r?this.setUserId(t,n[r]):Object(S.isObject)(t[r])?this.setBaseParam(t[r],n[r]):i.call(n,r)&&(t[r]=n[r]))}}]),i}(b.a);e.a=C},EJiy:function(t,e,i){"use strict";e.__esModule=!0;var n=a(i("F+2o")),r=a(i("+JPL")),o="function"===typeof r.default&&"symbol"===typeof n.default?function(t){return typeof t}:function(t){return t&&"function"===typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"===typeof r.default&&"symbol"===o(n.default)?function(t){return"undefined"===typeof t?"undefined":o(t)}:function(t){return t&&"function"===typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":"undefined"===typeof t?"undefined":o(t)}},ENBB:function(t,e,i){"use strict";i.r(e),e.default={namespace:"common_clip",loaders:{1025:function(){return i.e("96057").then(i.bind(null,"/vca"))},1028:function(){return i.e("7a137").then(i.bind(null,"dN7d"))},1033:function(){return i.e("8f738").then(i.bind(null,"vq+L"))},1034:function(){return i.e("1af43").then(i.bind(null,"w0cA"))},1041:function(){return i.e("4a863").then(i.bind(null,"gFM5"))},1046:function(){return i.e("c11e9").then(i.bind(null,"ldmO"))},1049:function(){return i.e("da2b8").then(i.bind(null,"4h7S"))},1054:function(){return i.e("2e4f4").then(i.bind(null,"7Cbq"))},1055:function(){return i.e("9fcd0").then(i.bind(null,"RIAM"))},1057:function(){return i.e("57cf9").then(i.bind(null,"IvC1"))},1066:function(){return i.e("91971").then(i.bind(null,"XoZD"))},1081:function(){return i.e("3ed67").then(i.bind(null,"MevB"))},1086:function(){return i.e("fc602").then(i.bind(null,"zkAu"))},1124:function(){return i.e("fa413").then(i.bind(null,"jQ8o"))}}}},EbDI:function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},EemH:function(t,e,i){t.exports=i("4KFe")(41)},EoCF:function(t,e,i){"use strict";t.exports=i("vljf")},EpBk:function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},ExA7:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},"F+2o":function(t,e,i){t.exports={default:i("2Nb0"),__esModule:!0}},FEzi:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="nimo-clip nimo-clip__sk n-as-padv-lg">\n  <div class="n-as-conf n-as-mrgb-lg">\n    <div class="n-as-16x9 n-as-rel n-as-rnd n-as-of-hidden n-as-mrgb">\n      <div\n        id="nimo-player-puppet"\n        class="n-as-full nimo-player n-as-abs n-sk-black"\n      ></div>\n    </div>\n    <div class="n-fx-ss n-as-mrgh-xs-back">\n      <div class="bc1 c1 bsc1 n-fx-sc n-as-mrgh-xs n-as-pad-md n-as-rnd n-fx1">\n        <div class="n-fx1 n-as-mrgv">\n          <div class="n-sk n-sk-t24 n-fx1 n-as-mrgb-md"></div>\n          <div class="n-sk n-sk-t12 c2 n-as-w30 n-as-mrgb-xs"></div>\n        </div>\n      </div>\n      <div\n        class="bc1 c1 bsc1 n-as-mrgh-xs n-fx0 n-as-pad-xs n-as-rnd"\n        style="width: 341px"\n      >\n        <div class="n-sk n-sk-t18 n-fx-sc n-as-mrgb-md"></div>\n        <div class="n-fx-sc n-as-mrgh-back n-as-mrgv">\n          <div class="n-as-padh n-fx0">\n            <div class="n-sk n-sk-ava-lg-o"></div>\n          </div>\n          <div class="n-fx1 n-as-padh">\n            <div class="n-sk n-sk-t18 n-fx-sc n-as-mrgb n-as-w80"></div>\n            <div class="n-sk n-sk-btn n-as-w20"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p}},FV0c:function(t,e,i){"use strict";var n=i("q1tI"),r=i.n(n),o=i("TSYQ"),a=i.n(o),s=i("xKuZ");e.a=function(t){var e=t.className,i=t.sAvatar,n=t.voiceActive,o=t.onClick;return r.a.createElement("div",{className:"".concat(e||""," nimo-audio-room-seat-avatar-wrapper n-as-rel"),onClick:o},r.a.createElement(s.a,{src:i,width:90,className:a()("nimo-audio-room-seat-avatar",n?"nimo-audio-room-seat-active":"")}),r.a.createElement("div",{className:a()("nimo-audio-room-seat-circles",n?"":"nimo-audio-room-seat-circles-hide")},r.a.createElement("div",{className:"nimo-audio-room-seat-circle"}),r.a.createElement("div",{className:"nimo-audio-room-seat-circle"}),r.a.createElement("div",{className:"nimo-audio-room-seat-circle"})))}},FYw3:function(t,e,i){"use strict";e.__esModule=!0;var n,r=i("EJiy"),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":(0,o.default)(e))&&"function"!==typeof e?t:e}},FcMc:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="nimo-room-meta" class="n-fx-bc n-as-rndt n-as-pad bc1">\n    <span class="n-fx0 n-sk n-sk-ava-lg"></span>\n    <div class="n-fx-col n-fx-as n-fx1">\n        <div class="n-fx-bc n-as-w100 n-as-mrgb-xs">\n            <div class="n-sk n-sk-t18 n-fx1 n-as-mrgh"></div>\n        </div>\n        <div class="n-fx-sc n-as-w100">\n            <div class="n-as-mrgh">\n              <div class="n-sk n-sk-t12"></div>\n            </div>\n            <div class="n-as-mrgh">\n                <div class="n-sk n-sk-t12"></div>\n            </div>\n            <div class="n-as-mrgh">\n                <div class="n-sk n-sk-t12"></div>\n            </div>\n            <div class="n-as-mrgh">\n                <div class="n-sk n-sk-t12"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}},Fcj4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=n.F1&&e<=n.F12)return!1;switch(e){case n.ALT:case n.CAPS_LOCK:case n.CONTEXT_MENU:case n.CTRL:case n.DOWN:case n.END:case n.ESC:case n.HOME:case n.INSERT:case n.LEFT:case n.MAC_FF_META:case n.META:case n.NUMLOCK:case n.NUM_CENTER:case n.PAGE_DOWN:case n.PAGE_UP:case n.PAUSE:case n.PRINT_SCREEN:case n.RIGHT:case n.SHIFT:case n.UP:case n.WIN_KEY:case n.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=n.ZERO&&t<=n.NINE)return!0;if(t>=n.NUM_ZERO&&t<=n.NUM_MULTIPLY)return!0;if(t>=n.A&&t<=n.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case n.SPACE:case n.QUESTION_MARK:case n.NUM_PLUS:case n.NUM_MINUS:case n.NUM_PERIOD:case n.NUM_DIVISION:case n.SEMICOLON:case n.DASH:case n.EQUALS:case n.COMMA:case n.PERIOD:case n.SLASH:case n.APOSTROPHE:case n.SINGLE_QUOTE:case n.OPEN_SQUARE_BRACKET:case n.BACKSLASH:case n.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},r=n;e.default=r},FlsD:function(t,e,i){var n=i("0/R4");i("Xtr8")("isExtensible",(function(t){return function(e){return!!n(e)&&(!t||t(e))}}))},FpfA:function(t,e,i){"use strict";var n=i("UXgV"),r=i.n(n),o=i("AUqF"),a=i("nimoua"),s=i.n(a),u=i("KFtC"),c=i("lSNA"),l=i.n(c),h=i("X8JN"),d=i("KkFV");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var p={udbUserId:"",guid:""};s.a.isInNimoApp&&i("mTTC").default.getUserInfo().then((function(t){var e=t.udbUserId,i=t.guid;e&&"-1"!==e&&-1!==e&&(p.udbUserId=String(e)),i&&(p.guid=i)}));var m,y=function(){return s.a.isInNimoApp||(p.guid=Object(h.a)(),p.udbUserId=d.a.get("udbUserId")||""),function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){l()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},p)},v=new o.MetricReport({getUid:function(){return y().udbUserId||"0"},getDeviceId:function(){return Object(u.l)()},getCountry:function(){return Object(u.g)()},getGuid:function(){return y().guid},host:"https://metric.nimo.tv",isDebug:"false",isMobile:"mobile"===(null===r.a||void 0===r.a||null===(m=r.a.__NIMO_APP_DATA__)||void 0===m?void 0:m.platform)||s.a.isWap,metricVerSuffix:""});v.report.bind(v),e.a=v},Fv9B:function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.lForbidUid=0,this.lRoomId=0,this.lTimeS=0,this.sForbidNick="",this.lOperateUid=0,this.sOperateNick="",this.bPrsentner=!0});r.prototype._clone=function(){return new n.a.ForbidUserMessageNotice},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt64(0,this.lForbidUid),t.writeInt64(1,this.lRoomId),t.writeInt64(2,this.lTimeS),t.writeString(3,this.sForbidNick),t.writeInt64(4,this.lOperateUid),t.writeString(5,this.sOperateNick),t.writeBoolean(6,this.bPrsentner)},r.prototype.readFrom=function(t){this.lForbidUid=t.readInt64(0,!1,this.lForbidUid),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.lTimeS=t.readInt64(2,!1,this.lTimeS),this.sForbidNick=t.readString(3,!1,this.sForbidNick),this.lOperateUid=t.readInt64(4,!1,this.lOperateUid),this.sOperateNick=t.readString(5,!1,this.sOperateNick),this.bPrsentner=t.readBoolean(6,!1,this.bPrsentner)},n.a.ForbidUserMessageNotice=r,e.a=r},G5Pb:function(t,e,i){"use strict";i.r(e);var n=i("3Yl8");e.default=function(){return!n.default.checkIsAutoLogin()&&(n.default.checkLogin()?n.default.getUserInfo():void(window.location="//".concat("www.nimo.tv")))}},G5So:function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i("J4zp"),r=i.n(n),o=i("lSNA"),a=i.n(o),s=i("QILm"),u=i.n(s),c=i("he48"),l=i("cz3H"),h=i("EoCF"),d=(i("SfD4"),function(){this.baseParam=new l.a.BaseParam,this.channelId=0,this.anchorId=0,this.aliase="",this.searchType=0,this.language="",this.countryCode="",this.lcid=0});d.prototype._clone=function(){return new l.a.LiveChannelToCParam},d.prototype._write=function(t,e,i){t.writeStruct(e,i)},d.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},d.prototype.writeTo=function(t){t.writeStruct(0,this.baseParam),t.writeInt64(1,this.channelId),t.writeInt64(2,this.anchorId),t.writeString(3,this.aliase),t.writeInt32(4,this.searchType),t.writeString(5,this.language),t.writeString(6,this.countryCode),t.writeInt32(7,this.lcid)},d.prototype.readFrom=function(t){this.baseParam=t.readStruct(0,!1,this.baseParam),this.channelId=t.readInt64(1,!1,this.channelId),this.anchorId=t.readInt64(2,!1,this.anchorId),this.aliase=t.readString(3,!1,this.aliase),this.searchType=t.readInt32(4,!1,this.searchType),this.language=t.readString(5,!1,this.language),this.countryCode=t.readString(6,!1,this.countryCode),this.lcid=t.readInt32(7,!1,this.lcid)},l.a.LiveChannelToCParam=d;var f=d,p=(i("N6wT"),i("YFJr"),i("Wut1"),i("w7fm"),i("Gak8"),function(){this.channelId=0,this.roomTheme="",this.alise="",this.roomType=0,this.roomTypeName="",this.roomSort=0,this.businessType=0,this.templateType=0,this.anchorName="",this.anchorAvatarUrl="",this.avatarBoxUrl="",this.authenticatedAnchor=0,this.anchorAnnouncement="",this.anchorCountryCode="",this.eventId=0,this.eventRoomListView=new h.Taf.Vector(new l.a.EventRoomView),this.headImg="",this.backgroundImg="",this.anchorId=0,this.userNimoId=0,this.roomScreenshots=new h.Taf.Vector(new l.a.RoomScreenshotsView),this.showScreenshots=new h.Taf.Vector(new l.a.RoomScreenshotsView),this.roomNumbering="",this.liveStreamStatus=0,this.lcid=0,this.lcidText="",this.endLiveTime=0,this.createdTime=0,this.updatedTime=0,this.teamRoomViews=new h.Taf.Vector(new l.a.TeamRoomView),this.teamId=0,this.starLiveRoomView=new l.a.StarLiveRoomView,this.dynamicAvatarBoxUrl="",this.normalMultiRoomList=new h.Taf.Vector(new l.a.NormalMultiRoomView),this.liveId=0,this.chatRuleStatus=0,this.chatRuleText="",this.subRoomSort=0,this.voiceScreenshots=new h.Taf.Vector(new l.a.RoomScreenshotsView),this.isLiveHouse=0,this.liveType=0});p.prototype._clone=function(){return new l.a.LiveChannelStaticVo},p.prototype._write=function(t,e,i){t.writeStruct(e,i)},p.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},p.prototype.writeTo=function(t){t.writeInt64(1,this.channelId),t.writeString(2,this.roomTheme),t.writeString(3,this.alise),t.writeInt64(4,this.roomType),t.writeString(5,this.roomTypeName),t.writeInt32(6,this.roomSort),t.writeInt32(7,this.businessType),t.writeInt32(8,this.templateType),t.writeString(9,this.anchorName),t.writeString(10,this.anchorAvatarUrl),t.writeString(11,this.avatarBoxUrl),t.writeInt32(12,this.authenticatedAnchor),t.writeString(13,this.anchorAnnouncement),t.writeString(14,this.anchorCountryCode),t.writeInt64(15,this.eventId),t.writeVector(16,this.eventRoomListView),t.writeString(17,this.headImg),t.writeString(18,this.backgroundImg),t.writeInt64(19,this.anchorId),t.writeInt64(20,this.userNimoId),t.writeVector(21,this.roomScreenshots),t.writeVector(22,this.showScreenshots),t.writeString(23,this.roomNumbering),t.writeInt32(24,this.liveStreamStatus),t.writeInt32(25,this.lcid),t.writeString(26,this.lcidText),t.writeInt32(27,this.endLiveTime),t.writeInt64(28,this.createdTime),t.writeInt64(29,this.updatedTime),t.writeVector(30,this.teamRoomViews),t.writeInt32(31,this.teamId),t.writeStruct(32,this.starLiveRoomView),t.writeString(33,this.dynamicAvatarBoxUrl),t.writeVector(34,this.normalMultiRoomList),t.writeInt64(35,this.liveId),t.writeInt32(36,this.chatRuleStatus),t.writeString(37,this.chatRuleText),t.writeInt32(38,this.subRoomSort),t.writeVector(39,this.voiceScreenshots),t.writeInt32(40,this.isLiveHouse),t.writeInt32(41,this.liveType)},p.prototype.readFrom=function(t){this.channelId=t.readInt64(1,!1,this.channelId),this.roomTheme=t.readString(2,!1,this.roomTheme),this.alise=t.readString(3,!1,this.alise),this.roomType=t.readInt64(4,!1,this.roomType),this.roomTypeName=t.readString(5,!1,this.roomTypeName),this.roomSort=t.readInt32(6,!1,this.roomSort),this.businessType=t.readInt32(7,!1,this.businessType),this.templateType=t.readInt32(8,!1,this.templateType),this.anchorName=t.readString(9,!1,this.anchorName),this.anchorAvatarUrl=t.readString(10,!1,this.anchorAvatarUrl),this.avatarBoxUrl=t.readString(11,!1,this.avatarBoxUrl),this.authenticatedAnchor=t.readInt32(12,!1,this.authenticatedAnchor),this.anchorAnnouncement=t.readString(13,!1,this.anchorAnnouncement),this.anchorCountryCode=t.readString(14,!1,this.anchorCountryCode),this.eventId=t.readInt64(15,!1,this.eventId),this.eventRoomListView=t.readVector(16,!1,this.eventRoomListView),this.headImg=t.readString(17,!1,this.headImg),this.backgroundImg=t.readString(18,!1,this.backgroundImg),this.anchorId=t.readInt64(19,!1,this.anchorId),this.userNimoId=t.readInt64(20,!1,this.userNimoId),this.roomScreenshots=t.readVector(21,!1,this.roomScreenshots),this.showScreenshots=t.readVector(22,!1,this.showScreenshots),this.roomNumbering=t.readString(23,!1,this.roomNumbering),this.liveStreamStatus=t.readInt32(24,!1,this.liveStreamStatus),this.lcid=t.readInt32(25,!1,this.lcid),this.lcidText=t.readString(26,!1,this.lcidText),this.endLiveTime=t.readInt32(27,!1,this.endLiveTime),this.createdTime=t.readInt64(28,!1,this.createdTime),this.updatedTime=t.readInt64(29,!1,this.updatedTime),this.teamRoomViews=t.readVector(30,!1,this.teamRoomViews),this.teamId=t.readInt32(31,!1,this.teamId),this.starLiveRoomView=t.readStruct(32,!1,this.starLiveRoomView),this.dynamicAvatarBoxUrl=t.readString(33,!1,this.dynamicAvatarBoxUrl),this.normalMultiRoomList=t.readVector(34,!1,this.normalMultiRoomList),this.liveId=t.readInt64(35,!1,this.liveId),this.chatRuleStatus=t.readInt32(36,!1,this.chatRuleStatus),this.chatRuleText=t.readString(37,!1,this.chatRuleText),this.subRoomSort=t.readInt32(38,!1,this.subRoomSort),this.voiceScreenshots=t.readVector(39,!1,this.voiceScreenshots),this.isLiveHouse=t.readInt32(40,!1,this.isLiveHouse),this.liveType=t.readInt32(41,!1,this.liveType)},l.a.LiveChannelStaticVo=p;var m=p,y=i("ZMLX"),v=(i("qiiG"),i("hk0M"),function(){this.channelId=0,this.viewerNum=0,this.fanCount=0,this.isFollow=!0,this.liveStreamStatus=0,this.isLottery=0,this.microPKStatus=0,this.isGuessing=0,this.roomLineInfo=new y.a.RoomLineInfo,this.mStreamPkg="",this.isPlayback=0,this.startLiveTime=0,this.endLiveTime=0,this.userTitleData=new y.a.UserTitleData});v.prototype._clone=function(){return new l.a.LiveChannelDynamicVo},v.prototype._write=function(t,e,i){t.writeStruct(e,i)},v.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},v.prototype.writeTo=function(t){t.writeInt64(1,this.channelId),t.writeInt64(2,this.viewerNum),t.writeInt64(3,this.fanCount),t.writeBoolean(4,this.isFollow),t.writeInt32(5,this.liveStreamStatus),t.writeInt32(6,this.isLottery),t.writeInt32(7,this.microPKStatus),t.writeInt32(8,this.isGuessing),t.writeStruct(9,this.roomLineInfo),t.writeString(10,this.mStreamPkg),t.writeInt32(11,this.isPlayback),t.writeInt32(12,this.startLiveTime),t.writeInt32(13,this.endLiveTime),t.writeStruct(14,this.userTitleData)},v.prototype.readFrom=function(t){this.channelId=t.readInt64(1,!1,this.channelId),this.viewerNum=t.readInt64(2,!1,this.viewerNum),this.fanCount=t.readInt64(3,!1,this.fanCount),this.isFollow=t.readBoolean(4,!1,this.isFollow),this.liveStreamStatus=t.readInt32(5,!1,this.liveStreamStatus),this.isLottery=t.readInt32(6,!1,this.isLottery),this.microPKStatus=t.readInt32(7,!1,this.microPKStatus),this.isGuessing=t.readInt32(8,!1,this.isGuessing),this.roomLineInfo=t.readStruct(9,!1,this.roomLineInfo),this.mStreamPkg=t.readString(10,!1,this.mStreamPkg),this.isPlayback=t.readInt32(11,!1,this.isPlayback),this.startLiveTime=t.readInt32(12,!1,this.startLiveTime),this.endLiveTime=t.readInt32(13,!1,this.endLiveTime),this.userTitleData=t.readStruct(14,!1,this.userTitleData)},l.a.LiveChannelDynamicVo=v;var g=v,_=["channelId"];function S(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?S(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var b=new c.b;function I(t){var e=t||{},i=e.roomId,n=e.alias,r=e.anchorId,o=e.lang,a=void 0===o?b.lang:o,s=e.countryCode,u=void 0===s?b.countryCode:s,c=e.clang,l=void 0===c?b.clang:c,h=new f;return b.setBaseParam(h.baseParam),i?(h.channelId=i,h.searchType=1):r?(h.anchorId=r,h.searchType=2):n&&(h.aliase=n,h.searchType=3),h.language=a,h.countryCode=u,h.lcid=Number(l),h}function T(t){return w({id:t.channelId},u()(t,_))}function P(t){var e={customHandleError:!0,reportResult:!0,tag:"live_room",useSignal:!0,wupConfig:{data:I(t),structure:m,url:"liveChannelStatic"},retry:1};return b.fetch(e).then(T)}function E(t){var e={customHandleError:!0,reportResult:!1,useSignal:!0,wupConfig:{data:I(t),structure:g,url:"liveChannelDynamic"},retry:1};return b.fetch(e)}function k(t){return Promise.all([P(t),E(t)]).then((function(t){var e=r()(t,2),i=e[0],n=e[1];return w(w({},i),n)}))}},G6z8:function(t,e,i){var n=i("fR/l"),r=i("oCl/"),o=i("mTTR");t.exports=function(t){return n(t,o,r)}},GCOZ:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},GDhZ:function(t,e,i){var n=i("wF/u"),r=i("mwIZ"),o=i("hgQt"),a=i("9ggG"),s=i("CMye"),u=i("IOzZ"),c=i("9Nap");t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(i){var a=r(i,t);return void 0===a&&a===e?o(i,t):n(e,a,3)}}},GGqZ:function(t,e,i){t.exports=!i("E7Vc")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},GJiU:function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));i("I5cv");var n=i("lSNA"),r=i.n(n),o=i("QILm"),a=i.n(o),s=i("lwsE"),u=i.n(s),c=i("W8MJ"),l=i.n(c),h=i("7W2i"),d=i.n(h),f=i("a1gu"),p=i.n(f),m=i("Nsbk"),y=i.n(m),v=i("70i0"),g=["country","lang","clang"],_=["country","lang","clang","udbUserId"],S=["country","lang","clang","udbUserId"];function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function I(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var T=new(function(t){d()(i,t);var e=I(i);function i(){return u()(this,i),e.apply(this,arguments)}return l()(i,[{key:"fetchEventConfigList",value:function(t){var e=t||{},i=e.country,n=void 0===i?this.countryCode:i,r=e.lang,o=void 0===r?this.lang:r,s=e.clang,u=void 0===s?this.clang:s,c=a()(e,g),l=this.buildUri("event/configList"),h={encrypt:!0,queryParams:[n,o,u],data:c};if(void 0===c.eventId)throw new Error("eventId is undefined");return this.fetch(l,h).catch((function(){}))}},{key:"fetchScheduleListByEventId",value:function(t){var e=t||{},i=e.country,n=void 0===i?this.countryCode:i,r=e.lang,o=void 0===r?this.lang:r,s=e.clang,u=void 0===s?this.clang:s,c=e.udbUserId,l=void 0===c?this.udbUserId:c,h=a()(e,_),d=this.buildUri("event/listSchedule"),f={encrypt:!0,queryParams:[n,o,u],data:b({udbUserId:l},h)};if(void 0===h.eventId)throw new Error("eventId is undefined");return this.fetch(d,f)}},{key:"fetchEventStatusByEventId",value:function(t){var e=t||{},i=e.country,n=void 0===i?this.countryCode:i,r=e.lang,o=void 0===r?this.lang:r,s=e.clang,u=void 0===s?this.clang:s,c=e.udbUserId,l=void 0===c?this.udbUserId:c,h=a()(e,S),d=this.buildUri("event/getNextSchedule"),f={encrypt:!0,queryParams:[n,o,u,2],data:b({udbUserId:l},h)};if(void 0===h.eventId)throw new Error("eventId is undefined");return this.fetch(d,f)}},{key:"fetchTeamIntroductionList",value:function(t){var e=t||{},i=e.country,n=void 0===i?this.countryCode:i,r=e.lang,o=void 0===r?this.lang:r,a=e.clang,s=void 0===a?this.clang:a,u=e.eventId,c=e.offset,l=e.pageSize,h=void 0===l?5:l,d=this.buildUri("event/teamIntroductionList"),f={encrypt:!0,queryParams:[n,o,s],data:{eventId:u,offset:c,pageSize:h}};if(void 0===u)throw new Error("eventId is undefined");return this.fetch(d,f)}},{key:"fetchEventList",value:function(t){var e=t.offset,i=t.pageSize,n=t.countryCode,r=void 0===n?this.countryCode:n,o=t.language,a=void 0===o?this.lang:o,s=t.lcid,u=void 0===s?this.clang:s,c=t.udbUserId,l=void 0===c?this.udbUserId:c;if(!r||!a||!u)throw new Error("countryCode || language || lcid is undefined");var h=this.buildUri("event/eventList",{version:"v1"}),d={encrypt:!0,data:{offset:e,pageSize:i,udbUserId:l},queryParams:[r,a,u]};return this.fetch(h,d)}},{key:"fetchTeamList",value:function(t){var e=t.eventId,i=t.groupShow,n=t.countryCode,r=void 0===n?this.countryCode:n,o=t.language,a=void 0===o?this.lang:o,s=t.lcid,u=void 0===s?this.clang:s,c=this.buildUri("event/teamList",{version:"v1"}),l={encrypt:!0,data:{eventId:e,groupShow:i},queryParams:[r,a,u]};return this.fetch(c,l)}}]),i}(v.c))({version:"v1"})},GNiM:function(t,e,i){var n=i("I01J"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,i,n,r){e.push(n?r.replace(o,"$1"):i||t)})),e}));t.exports=a},Gak8:function(t,e,i){"use strict";var n=i("cz3H"),r=(i("EoCF"),function(){this.roomId=0,this.title="",this.alise="",this.liveStreamStatus=0,this.appImg="",this.webImg="",this.anchorId=0});r.prototype._clone=function(){return new n.a.NormalMultiRoomView},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt64(0,this.roomId),t.writeString(1,this.title),t.writeString(2,this.alise),t.writeInt32(3,this.liveStreamStatus),t.writeString(4,this.appImg),t.writeString(5,this.webImg),t.writeInt64(6,this.anchorId)},r.prototype.readFrom=function(t){this.roomId=t.readInt64(0,!1,this.roomId),this.title=t.readString(1,!1,this.title),this.alise=t.readString(2,!1,this.alise),this.liveStreamStatus=t.readInt32(3,!1,this.liveStreamStatus),this.appImg=t.readString(4,!1,this.appImg),this.webImg=t.readString(5,!1,this.webImg),this.anchorId=t.readInt64(6,!1,this.anchorId)},n.a.NormalMultiRoomView=r},Gi0A:function(t,e,i){var n=i("QqLw"),r=i("ExA7");t.exports=function(t){return r(t)&&"[object Map]"==n(t)}},GkpK:function(t,e,i){"use strict";i("I5cv");var n=i("lSNA"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("7W2i"),l=i.n(c),h=i("a1gu"),d=i.n(h),f=i("Nsbk"),p=i.n(f);function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var g=function(t){l()(i,t);var e=v(i);function i(){return a()(this,i),e.apply(this,arguments)}return u()(i,[{key:"fetchFanCount",value:function(t){var e=t.userID,i="".concat(this.buildUri("follow/anchor/fanCount",{version:"v1"})),n={encrypt:!0,data:{udbDeviceType:"WEB",requestSource:"WEB",userID:e}};return this.fetch(i,n)}},{key:"fetchFollowStatusAndCount",value:function(t){var e=t.anchorID,i=t.fanID,n=t.roomID,r=t.udbDeviceType,o=t.requestSource,a=t.version,s=void 0===a?this.udbVersion:a,u=t.bizToken,c=void 0===u?this.udbBizToken:u,l=t.udbUserId,h=void 0===l?this.udbUserId:l,d=this.buildUri("follow/anchor/FollowStatusAndCount",{version:"v1"}),f={encrypt:!0,data:{version:s,bizToken:c,udbUserId:h,anchorID:e,fanID:i,roomID:n,udbDeviceType:r,requestSource:o}};return this.fetch(d,f)}},{key:"followInfo",value:function(t){var e=this.buildUri("follow/anchor/followInfo",{version:"v5"}),i={encrypt:!0,data:y(y({},this.defaultAuthData),t)};return this.fetch(e,i)}},{key:"fanPageList",value:function(t){var e=this.buildUri("follow/anchor/fanPageList",{version:"v5"}),i={encrypt:!0,data:y(y({},this.defaultAuthData),t)};return this.fetch(e,i)}}]),i}(i("70i0").e);e.a=new g},GoyQ:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},H4nB:function(t,e,i){"use strict";i.d(e,"a",(function(){return it}));i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("7W2i"),u=i.n(s),c=i("a1gu"),l=i.n(c),h=i("Nsbk"),d=i.n(h),f=i("U+yc"),p=i.n(f),m=i("ZMLX"),y=i("EoCF"),v=(i("leMB"),function(){this.user=new m.a.UserId,this.lRoomId=0,this.bGetHostIp=!1,this.mUserData=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.sPassword=""});v.prototype._clone=function(){return new m.a.GetPullInfoReq},v.prototype._write=function(t,e,i){t.writeStruct(e,i)},v.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},v.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeInt64(1,this.lRoomId),t.writeBoolean(2,this.bGetHostIp),t.writeMap(15,this.mUserData),t.writeString(16,this.sPassword)},v.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.bGetHostIp=t.readBoolean(2,!1,this.bGetHostIp),this.mUserData=t.readMap(15,!1,this.mUserData),this.sPassword=t.readString(16,!1,this.sPassword)},m.a.GetPullInfoReq=v;var g=v,_=(i("qiiG"),i("Bvyh"),function(){this.iVideoStatus=0,this.iVedoNums=0,this.vVedioList=new y.Taf.Vector(new m.a.VideoData),this.iRecommendCode=0});_.prototype._clone=function(){return new m.a.GetVideoListRsp},_.prototype._write=function(t,e,i){t.writeStruct(e,i)},_.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},_.prototype.writeTo=function(t){t.writeInt32(0,this.iVideoStatus),t.writeInt32(1,this.iVedoNums),t.writeVector(2,this.vVedioList),t.writeInt32(3,this.iRecommendCode)},_.prototype.readFrom=function(t){this.iVideoStatus=t.readInt32(0,!1,this.iVideoStatus),this.iVedoNums=t.readInt32(1,!1,this.iVedoNums),this.vVedioList=t.readVector(2,!1,this.vVedioList),this.iRecommendCode=t.readInt32(3,!1,this.iRecommendCode)},m.a.GetVideoListRsp=_;var S=function(){this.code=0,this.roomLine=new m.a.RoomLineInfo,this.playblackvideodata=new m.a.GetVideoListRsp};S.prototype._clone=function(){return new m.a.GetPullInfoRsp},S.prototype._write=function(t,e,i){t.writeStruct(e,i)},S.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},S.prototype.writeTo=function(t){t.writeInt32(0,this.code),t.writeStruct(1,this.roomLine),t.writeStruct(2,this.playblackvideodata)},S.prototype.readFrom=function(t){this.code=t.readInt32(0,!1,this.code),this.roomLine=t.readStruct(1,!1,this.roomLine),this.playblackvideodata=t.readStruct(2,!1,this.playblackvideodata)},m.a.GetPullInfoRsp=S;var w=S,b={EPUSH_APP:0,EPUSH_OBS:1};m.a.EPushUrlType=b;var I=function(){this.iWidth=0,this.iHeight=0,this.iFrameRate=0,this.iBandWidth=0,this.sVideoCode="",this.sAudioCode=""};I.prototype._clone=function(){return new m.a.StreamInfo},I.prototype._write=function(t,e,i){t.writeStruct(e,i)},I.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},I.prototype.writeTo=function(t){t.writeInt32(0,this.iWidth),t.writeInt32(1,this.iHeight),t.writeInt32(2,this.iFrameRate),t.writeInt32(3,this.iBandWidth),t.writeString(4,this.sVideoCode),t.writeString(5,this.sAudioCode)},I.prototype.readFrom=function(t){this.iWidth=t.readInt32(0,!1,this.iWidth),this.iHeight=t.readInt32(1,!1,this.iHeight),this.iFrameRate=t.readInt32(2,!1,this.iFrameRate),this.iBandWidth=t.readInt32(3,!1,this.iBandWidth),this.sVideoCode=t.readString(4,!1,this.sVideoCode),this.sAudioCode=t.readString(5,!1,this.sAudioCode)},m.a.StreamInfo=I;var T=function(){this.user=new m.a.UserId,this.lRoomId=0,this.bCreateNew=!0,this.bKickOther=!1,this.eUseType=m.a.EPushUrlType.EPUSH_APP,this.tStreamInfo=new m.a.StreamInfo,this.sRegion="",this.sNetwork="",this.sNetvender="",this.sDevice="",this.sCpu="",this.iMem=0,this.sGpu="",this.iHWACC=0,this.bNotRepush=!1};T.prototype._clone=function(){return new m.a.GetPushInfoReq},T.prototype._write=function(t,e,i){t.writeStruct(e,i)},T.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},T.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeInt64(1,this.lRoomId),t.writeBoolean(2,this.bCreateNew),t.writeBoolean(3,this.bKickOther),t.writeInt32(4,this.eUseType),t.writeStruct(5,this.tStreamInfo),t.writeString(6,this.sRegion),t.writeString(7,this.sNetwork),t.writeString(8,this.sNetvender),t.writeString(9,this.sDevice),t.writeString(10,this.sCpu),t.writeInt32(11,this.iMem),t.writeString(12,this.sGpu),t.writeInt32(13,this.iHWACC),t.writeBoolean(14,this.bNotRepush)},T.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.bCreateNew=t.readBoolean(2,!1,this.bCreateNew),this.bKickOther=t.readBoolean(3,!1,this.bKickOther),this.eUseType=t.readInt32(4,!1,this.eUseType),this.tStreamInfo=t.readStruct(5,!1,this.tStreamInfo),this.sRegion=t.readString(6,!1,this.sRegion),this.sNetwork=t.readString(7,!1,this.sNetwork),this.sNetvender=t.readString(8,!1,this.sNetvender),this.sDevice=t.readString(9,!1,this.sDevice),this.sCpu=t.readString(10,!1,this.sCpu),this.iMem=t.readInt32(11,!1,this.iMem),this.sGpu=t.readString(12,!1,this.sGpu),this.iHWACC=t.readInt32(13,!1,this.iHWACC),this.bNotRepush=t.readBoolean(14,!1,this.bNotRepush)},m.a.GetPushInfoReq=T;var P=T,E=function(){this.iCdn=0,this.sUrlBase="",this.vUrlBases=new y.Taf.Vector(new y.Taf.STRING),this.sCode="",this.vQuicsUrlBases=new y.Taf.Vector(new y.Taf.STRING),this.sQuicSNI="",this.bWebIpPushUrl=!1,this.sSrtUrl=""};E.prototype._clone=function(){return new m.a.CdnPushInfo},E.prototype._write=function(t,e,i){t.writeStruct(e,i)},E.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},E.prototype.writeTo=function(t){t.writeInt32(0,this.iCdn),t.writeString(1,this.sUrlBase),t.writeVector(2,this.vUrlBases),t.writeString(3,this.sCode),t.writeVector(4,this.vQuicsUrlBases),t.writeString(5,this.sQuicSNI),t.writeBoolean(6,this.bWebIpPushUrl),t.writeString(7,this.sSrtUrl)},E.prototype.readFrom=function(t){this.iCdn=t.readInt32(0,!1,this.iCdn),this.sUrlBase=t.readString(1,!1,this.sUrlBase),this.vUrlBases=t.readVector(2,!1,this.vUrlBases),this.sCode=t.readString(3,!1,this.sCode),this.vQuicsUrlBases=t.readVector(4,!1,this.vQuicsUrlBases),this.sQuicSNI=t.readString(5,!1,this.sQuicSNI),this.bWebIpPushUrl=t.readBoolean(6,!1,this.bWebIpPushUrl),this.sSrtUrl=t.readString(7,!1,this.sSrtUrl)},m.a.CdnPushInfo=E;var k=function(){this.sUrlBase="",this.sCode="",this.iBlacklistInterceptType=0,this.iBlacklistInterceptFinishTime=0,this.vInfos=new y.Taf.Vector(new m.a.CdnPushInfo),this.iCode=0,this.sErrMsg=""};k.prototype._clone=function(){return new m.a.GetPushInfoRsp},k.prototype._write=function(t,e,i){t.writeStruct(e,i)},k.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},k.prototype.writeTo=function(t){t.writeString(0,this.sUrlBase),t.writeString(1,this.sCode),t.writeInt32(2,this.iBlacklistInterceptType),t.writeInt32(3,this.iBlacklistInterceptFinishTime),t.writeVector(4,this.vInfos),t.writeInt32(5,this.iCode),t.writeString(6,this.sErrMsg)},k.prototype.readFrom=function(t){this.sUrlBase=t.readString(0,!1,this.sUrlBase),this.sCode=t.readString(1,!1,this.sCode),this.iBlacklistInterceptType=t.readInt32(2,!1,this.iBlacklistInterceptType),this.iBlacklistInterceptFinishTime=t.readInt32(3,!1,this.iBlacklistInterceptFinishTime),this.vInfos=t.readVector(4,!1,this.vInfos),this.iCode=t.readInt32(5,!1,this.iCode),this.sErrMsg=t.readString(6,!1,this.sErrMsg)},m.a.GetPushInfoRsp=k;var R=k,C=function(){this.user=new m.a.UserId,this.iPage=0,this.iPageNum=0};C.prototype._clone=function(){return new m.a.GetPushVideoHisReq},C.prototype._write=function(t,e,i){t.writeStruct(e,i)},C.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},C.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeInt32(1,this.iPage),t.writeInt32(2,this.iPageNum)},C.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.iPage=t.readInt32(1,!1,this.iPage),this.iPageNum=t.readInt32(2,!1,this.iPageNum)},m.a.GetPushVideoHisReq=C;var O=C,A=function(){this.sUrl="",this.iSize=0,this.iStartTime=0,this.iEndTime=0,this.iDuration=0,this.sVid="",this.sFormat="",this.iTurnCodeState=0,this.sTurnCodeKey=""};A.prototype._clone=function(){return new m.a.PushVideoHis},A.prototype._write=function(t,e,i){t.writeStruct(e,i)},A.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},A.prototype.writeTo=function(t){t.writeString(0,this.sUrl),t.writeInt32(1,this.iSize),t.writeInt32(2,this.iStartTime),t.writeInt32(3,this.iEndTime),t.writeInt32(4,this.iDuration),t.writeString(5,this.sVid),t.writeString(6,this.sFormat),t.writeInt32(7,this.iTurnCodeState),t.writeString(8,this.sTurnCodeKey)},A.prototype.readFrom=function(t){this.sUrl=t.readString(0,!1,this.sUrl),this.iSize=t.readInt32(1,!1,this.iSize),this.iStartTime=t.readInt32(2,!1,this.iStartTime),this.iEndTime=t.readInt32(3,!1,this.iEndTime),this.iDuration=t.readInt32(4,!1,this.iDuration),this.sVid=t.readString(5,!1,this.sVid),this.sFormat=t.readString(6,!1,this.sFormat),this.iTurnCodeState=t.readInt32(7,!1,this.iTurnCodeState),this.sTurnCodeKey=t.readString(8,!1,this.sTurnCodeKey)},m.a.PushVideoHis=A;var L=function(){this.lRoomId=0,this.iTotalNum=0,this.iPage=0,this.iPageNum=0,this.vVideos=new y.Taf.Vector(new m.a.PushVideoHis),this.sTimezone=""};L.prototype._clone=function(){return new m.a.GetPushVideoHisRsp},L.prototype._write=function(t,e,i){t.writeStruct(e,i)},L.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},L.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt32(1,this.iTotalNum),t.writeInt32(2,this.iPage),t.writeInt32(3,this.iPageNum),t.writeVector(4,this.vVideos),t.writeString(5,this.sTimezone)},L.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.iTotalNum=t.readInt32(1,!1,this.iTotalNum),this.iPage=t.readInt32(2,!1,this.iPage),this.iPageNum=t.readInt32(3,!1,this.iPageNum),this.vVideos=t.readVector(4,!1,this.vVideos),this.sTimezone=t.readString(5,!1,this.sTimezone)},m.a.GetPushVideoHisRsp=L;var N=L,M=i("UUa7"),U=function(){this.user=new m.a.UserId,this.sTurnCodeKey="",this.sVid=""};U.prototype._clone=function(){return new m.a.VideoTurnCodeReq},U.prototype._write=function(t,e,i){t.writeStruct(e,i)},U.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},U.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeString(1,this.sTurnCodeKey),t.writeString(2,this.sVid)},U.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.sTurnCodeKey=t.readString(1,!1,this.sTurnCodeKey),this.sVid=t.readString(2,!1,this.sVid)},m.a.VideoTurnCodeReq=U;var D=U,B=function(){this.sTurnCodeKey="",this.iTurnCodeState=0,this.sUrl=""};B.prototype._clone=function(){return new m.a.VideoTurnCodeRsp},B.prototype._write=function(t,e,i){t.writeStruct(e,i)},B.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},B.prototype.writeTo=function(t){t.writeString(0,this.sTurnCodeKey),t.writeInt32(1,this.iTurnCodeState),t.writeString(2,this.sUrl)},B.prototype.readFrom=function(t){this.sTurnCodeKey=t.readString(0,!1,this.sTurnCodeKey),this.iTurnCodeState=t.readInt32(1,!1,this.iTurnCodeState),this.sUrl=t.readString(2,!1,this.sUrl)},m.a.VideoTurnCodeRsp=B;var F=B,x=function(){this.user=new m.a.UserId,this.lRoomId=0};x.prototype._clone=function(){return new m.a.GetPushStateReq},x.prototype._write=function(t,e,i){t.writeStruct(e,i)},x.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},x.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeInt64(1,this.lRoomId)},x.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.lRoomId=t.readInt64(1,!1,this.lRoomId)},m.a.GetPushStateReq=x;var j=x,V=function(){this.lRoomId=0,this.state=0};V.prototype._clone=function(){return new m.a.GetPushStateRsp},V.prototype._write=function(t,e,i){t.writeStruct(e,i)},V.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},V.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt32(1,this.state)},V.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.state=t.readInt32(1,!1,this.state)},m.a.GetPushStateRsp=V;var G=V,H=function(){this.tUser=new m.a.UserId};H.prototype._clone=function(){return new m.a.GetHuyaSdkTokenReq},H.prototype._write=function(t,e,i){t.writeStruct(e,i)},H.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},H.prototype.writeTo=function(t){t.writeStruct(0,this.tUser)},H.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser)},m.a.GetHuyaSdkTokenReq=H;var W=H,q=function(){this.sHuyaToken="",this.iHuyaTokenTime=0,this.iCode=0,this.sMessage=""};q.prototype._clone=function(){return new m.a.GetHuyaSdkTokenRsp},q.prototype._write=function(t,e,i){t.writeStruct(e,i)},q.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},q.prototype.writeTo=function(t){t.writeString(0,this.sHuyaToken),t.writeInt32(1,this.iHuyaTokenTime),t.writeInt32(2,this.iCode),t.writeString(3,this.sMessage)},q.prototype.readFrom=function(t){this.sHuyaToken=t.readString(0,!1,this.sHuyaToken),this.iHuyaTokenTime=t.readInt32(1,!1,this.iHuyaTokenTime),this.iCode=t.readInt32(2,!1,this.iCode),this.sMessage=t.readString(3,!1,this.sMessage)},m.a.GetHuyaSdkTokenRsp=q;var K=q,Y=function(){this.tUserId=new m.a.UserId,this.lPid=0};Y.prototype._clone=function(){return new m.a.QueryUserInRoomReq},Y.prototype._write=function(t,e,i){t.writeStruct(e,i)},Y.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},Y.prototype.writeTo=function(t){t.writeStruct(0,this.tUserId),t.writeInt64(1,this.lPid)},Y.prototype.readFrom=function(t){this.tUserId=t.readStruct(0,!1,this.tUserId),this.lPid=t.readInt64(1,!1,this.lPid)},m.a.QueryUserInRoomReq=Y;var z=Y,J=function(){this.bInRoom=0,this.lPid=0};J.prototype._clone=function(){return new m.a.QueryUserInRoomRsp},J.prototype._write=function(t,e,i){t.writeStruct(e,i)},J.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},J.prototype.writeTo=function(t){t.writeInt32(0,this.bInRoom),t.writeInt64(1,this.lPid)},J.prototype.readFrom=function(t){this.bInRoom=t.readInt32(0,!1,this.bInRoom),this.lPid=t.readInt64(1,!1,this.lPid)},m.a.QueryUserInRoomRsp=J;var Q,X=J,Z=i("w0rY"),$=i("Mk7s");function tt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var r=d()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l()(this,i)}}var et=(Q=function(t){u()(i,t);var e=tt(i);function i(){return r()(this,i),e.apply(this,arguments)}return a()(i,[{key:"getPullInfo",value:function(t){var e=new g;return e.lRoomId=t,this.setUserId(e.user),this.fetch("GetPullInfo",e,w,{okCode:[M.a.kMRC_MASTEROFFLINE,M.a.kMRC_PLAYBLACK_FINISHED,M.a.kMRC_AUTH_FORBID,M.a.kMRC_PRESENTER_AUTH_ERR]})}},{key:"getPushInfo",value:function(t,e,i){var n=new P;return n.lRoomId=t||1e3,n.bCreateNew=!!e,this.setUserId(n.user,i),this.fetch("GetPushInfo",n,R,{customHandleError:!0})}},{key:"getPushVideoHis",value:function(t,e){var i=new O;return i.iPage=t||0,i.iPageNum=e||50,this.setUserId(i.user),this.authFetch("getPushVideoHis",i,N,{customHandleError:!0})}},{key:"videoTurnCode",value:function(t){var e=new D;return e.sTurnCodeKey=t,this.setUserId(e.user),this.authFetch("videoTurnCode",e,F)}},{key:"getPushState",value:function(t){var e=new j;return e.lRoomId=t||1e3,this.setUserId(e.user),this.fetch("getPushState",e,G)}},{key:"getHuyaSdkToken",value:function(){var t=new W;return this.setUserId(t.tUser),this.fetch("getHuyaSdkToken",t,K)}},{key:"queryUserInRoom",value:function(t){var e=t.anchorId,i=t.userInfo,n=new z;return n.lPid=e,this.setUserId(n.tUserId,i),this.fetch("queryUserInRoom",n,X,{customHandleError:!0})}}]),i}(Z.a),p()(Q.prototype,"getPullInfo",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"getPullInfo"),Q.prototype),p()(Q.prototype,"getPushInfo",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"getPushInfo"),Q.prototype),p()(Q.prototype,"getPushVideoHis",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"getPushVideoHis"),Q.prototype),p()(Q.prototype,"videoTurnCode",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"videoTurnCode"),Q.prototype),p()(Q.prototype,"getPushState",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"getPushState"),Q.prototype),p()(Q.prototype,"getHuyaSdkToken",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"getHuyaSdkToken"),Q.prototype),p()(Q.prototype,"queryUserInRoom",[$.a],Object.getOwnPropertyDescriptor(Q.prototype,"queryUserInRoom"),Q.prototype),Q),it=(e.b=new et,M.a)},H5Do:function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+='<div class="n-as-w100 n-fx1 main-container">\n  <div id="head-bg-wrap">\n    <div class="n-as-mrgb-lg n-as-rel">\n      <div class="n-as-abs n-as-tl n-as-w100 bc1 n-as-op80" style="height: 100%"></div>\n      <div class="n-as-conf n-as-padt-lg n-fx-ss n-fx-col n-as-rel">\n        <div class="n-fx1 n-as-mrgh-md n-as-padt-md">\n          <div class="n-as-w10 n-sk  n-as-mrgb" style="height:46px;width:300px"></div>\n          <div class="n-as-w50  n-sk  n-as-mrgb"  style="height:60px;width:680px"></div>\n          <div class="n-as-w10 n-sk  n-as-mrgb" style="width:74px;height:18px;margin-bottom:80px"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="container" class="n-as-conf n-as-mrgb-lg">\n    <ul class="n-fx-grid-300">\n      ';for(var i=0;i<24;i++)__p+='\n        <li class="n-as-mrgb-md">\n          '+(null==(__t=__webpack_require__("P3na")())?"":__t)+"\n        </li>\n      ";__p+="\n    </ul>\n  </div>\n</div>\n"}return __p}},H7XF:function(t,e,i){"use strict";e.byteLength=function(t){var e=c(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,n=c(t),a=n[0],s=n[1],u=new o(function(t,e,i){return 3*(e+i)/4-i}(0,a,s)),l=0,h=s>0?a-4:a;for(i=0;i<h;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,u[l++]=255&e);1===s&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o=[],a=16383,s=0,u=i-r;s<u;s+=a)o.push(l(t,s,s+a>u?u:s+a));1===r?(e=t[i-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],r[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,i){for(var r,o,a=[],s=e;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},H8j4:function(t,e,i){var n=i("QkVE");t.exports=function(t,e){var i=n(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}},HDyB:function(t,e,i){var n=i("nmnc"),r=i("JHRd"),o=i("ljhN"),a=i("or5M"),s=i("7fqy"),u=i("rEGp"),c=n?n.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,i,n,c,h,d){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=s;case"[object Set]":var p=1&n;if(f||(f=u),t.size!=e.size&&!p)return!1;var m=d.get(t);if(m)return m==e;n|=2,d.set(t,e);var y=a(f(t),f(e),n,c,h,d);return d.delete(t),y;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},HOxn:function(t,e,i){var n=i("Cwc5")(i("Kz5y"),"Promise");t.exports=n},HWsP:function(t,e,i){t.exports=!i("GGqZ")&&!i("E7Vc")((function(){return 7!=Object.defineProperty(i("mggL")("div"),"a",{get:function(){return 7}}).a}))},HZro:function(t,e,i){var n=i("Bsg+"),r=i("zIP/").onFreeze;i("gRlk")("seal",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},Howd:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+='<div style="margin: 20px auto 49px" class="n-as-con">\n  <div class="n-fx-sn" style="direction: ltr;">\n    <div class="n-as-rnd n-as-of-hidden" style="width: 85%;">\n      <div class="n-as-16x9">\n        <div\n          id="nimo-player-puppet"\n          class="nimo-player n-as-abs n-as-full n-sk-black"\n        >\n          <div\n            class="n-as-abs n-as-cc n-as-z0"\n            style="width: 206px; height: 77px; background-size: contain; background-repeat: no-repeat; background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAtIAAADGCAMAAADIbJc8AAAApVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+4/eNVAAAANnRSTlMAEPxRNdUYDTGDBlvaxbv385PvCaKfJ9/qRQL7zxTlciIceMBsYaeWh0vKrI1nLbE6tj9Um37x0ZaGAAAVFklEQVR42uzd63aiMBQF4COtWkFFwQKCFS94v7e63//RZmZ1LhZQCTgSZs73u3axdBNCcpIQY+zOqpud7Sn9pl8hxopvsG7hJ31dJcaKbb/ycKZuEWPF5X40EOJwpllhVQMbUTb3PVgxDecGYrWJseJ56ei4QB8SYwWzGOOKETFWJOamjKvGxFhxVGoObjCIsaLYHnXcphJjhdA9AOBIs3+EOunhE3c82D+gNOojqR4xJjlr1kJyU2JMau87BSJqxJi8VG0JQRoxJquSb0PYMzEmp8HaQAolYkxGz1MPaTjEmHzcpwYu4hIPVjRmUEcy/egfHokxuVTmBpLpaarqcG0pk1ukuP8SZfdO30Xi/0SMyWPRRDL6zKIf3hDG62mZNCLF/Rc5pzf6tEeIwnV4TBLDmoNkyhOVfpkgxONIMwm4VtBUkEyzS2fmCAuIsQcxrfcnbbIJAt8fjU612ny9bs+Ox+mh10JC+uuWvlgh4rCez2un02jk+0GwmWgf71ueUGT3tt3MGg6ycmoVCukhEaP36u+5S8LuozJZGbiDemBShI7k9KbPwyEsq+qkqeAexk8uRQ0hqDfiHXtZBtbMwD1402eK1YUwb/VOjKXyslNwD8Z6SBcESGO5oEKpvOwtfhHI32Cl4B5sv0oXrZHOsjgt9f7Yx3f6eGMSy5E513EPyw+XrjggrWkxdoO0mvjN2RDLTdfGHSirPV1XR2pGEQLy1MK5FTfUOTHbuINWe0A3qB4yOEg/+KEp+GrMmc7FoIfs+qMS3WQhE6dLUnvREfZK7PEWBjLraSolsEA2nk8SU3uIKthgzT8hUJCRcuhSMhNkdZR4cGzC26NJYY6M9KNFSXWR2UHe3ukScYoz/PiPaCMbe/RGyal9iCvKG9cQsdbEHmmNLPoz0SZo4SGzpqSZ/kCsBrEHOiEtrzwNtiSuW0dmO5dk5CNWn9jjaLihvzyspp3X43HWXq/ntdpnnf7k432gUlrbxeLpQ9O0ye/FBafa/OfqgtfOdLVr1D1cNyMZnXhH+NztdVxmTINnk/LhWtrsvDUvxuIubqVzV+njktaxm/vD3TrZuETfk3y4L527Ji6wAznO9XYvHwHal3B1Io945M1HPCeQaDaj20O8FcmHx6XzZemIoxzlav/coFWYswN49jBfY8Rx5CtJGCwRx5Hr1uMaj9xpiDOWsc5ebRdlJI8r8XJk9hFjKlEv+pyvIMrbknS4Xjo/I8Ro5z5wd4nmIWpH8uFVLXkpGUChtuPXlIIcxTU4X3s4IfYoo+JUTvzkF6SZ5hXieYiv8SxL/gO8IkKRdXuxyssz7+PxWBoiWrLG4xezjIg2MXZpTFr+bt9WR5gh+ZOFPcoAEU2S36kQU4gsDyOEebJ3O34w7YK8ILKH6xVhJi7RK4AuR8kgy1klmgwZ58Gj3Dr40ESWqGCsQ8WwKdT0EHuYDsJkXCMSxzQQUifGqI6QMhXFEWFvxP57bwirUVF071KOPByNHd1Yzi1KRdVWtm70Ln58O186Rn2lqXTRfjR7XU+GlMo2aL+2AyvdMuVap1F3dEXRjXpjOte2KqU1mMzbmdW0AaWhdkfrmlb5FYtClP/EU1sIGZEoc63jk9JJ08bvy78XAFUp6m2q4JO9oFjuxv75D5p7EvbRw6dll4Rs/YOBiFZz9EIpPDdxJ40FiVJHDn5Qdlb8cSmG1PVKN04RmJKgYRl/9LckaqHjt3KFwiwbf5xiL6CB35S1SkLezr+AjklJWfM6LrLXwqk+Kbifg2DLUlniF12L3TPsQMVxQsiSxLzVcc7ZZtr7pGde30gioAjr61/sVKGrL+Nco5qwp9TADcuJmvpnyK4+JAHV8y9B0Yhoh5A5FccTQhwSs8JX/SGJUOtXXkOiX65uUUjJzjAMaS5TtEZqYCOBvm9SUu8K7qtspq7JbA2IlkUulLAQpmZ8vyyXsozpt6p0bn9zb4ZOlp2jpik+rNlIqL9xKZkGsslUU7lVIpMqdpE3mlAzjuLtENFUs9QwatcHGb3Q5b0gwutmWLjhVOmqrVD6evt07Up23iD1QK5eIgMhFuVk4M83FRISvfoBCTB1RHUEPu9dr46xb83YvyLKGVAiCwVRG7pCrXkQorTNVLU22c0ooVIr+hXrCKlQLtS5B6C1ISF2phvyGXFqGfo9OzqjKrg+yOgaiFGuUgJW7GcP13dAEVbepnlaZNcqpV6x55OCkBKJMrVp2TDKU82k1LY9fPogEWWEvJCABWJt0t8STTpTQkQtySN7R7eV6ohj3PtYqZYmkKo78ikR145pNRBWJTGu7+Anx1cpHV/HT/YDI/2EWN7iQZHuAimfE+4BEdd/vZGCdOYptmjNrp66UZpkjvTbGGfGb5TCsIk/BrlHGq2Xx0T6CRd8pD6BpEKx3BlSm6o3EuDhL1ik3W73JVOko6P9KKfI9Ifx5ZLyjzT6wxwiLXBPaRCLtDr9m6eWrfAXHFIOttQpY6TdZuRHdUlMqRNamSJBpFEu5Rpp2JXrc5ZikXanGeOl0jVWC/enWOkOgAuyRnqDiA0JebfxxWv+fekfxmo+kY7Wi0TtDYhF+oiMVq7A5lePm26pthBmVDNGWrUR0VeFhu4UfNEryRFpTPONNOoDuqBrQCzSI2S2Fug6phUN5y1B3IVmjPRCqGMfNezhq2OVJIn0N/budDtRJADD8AdxRQxEjIqK+65Ro/G7/0ubMzOdmQQKoUSwOMfnb590p+NrhKIWrjJJWv7Q/1mPckm/6ExujqvGy/tHPZN/9amPkib9luwBvWMGd2hXJml+PDZp6isDAd6BlEu6FR2bZTGKVcF1RuFcE7jQz6wJVDs3jOO5DDggadJTCkxv3UFk60GlpHvrxyZNmmd/N8MGJZM2Ngynb3a1gtcFul6ltqr3GM4s4xaFmEeKjdsMcOVn6LiJky5SoHjbO6IxB5RKmnblwUmTxQ8P/xldBqRs0lWG2sw8/KLNpwz1lWrSqEmP4410QXqJk+6HJi3/5e+GaklzMHp00qS+WQ7ntdp88m6SlE5636OYvi1AYN/sMcQp1aSNgeDCWPZx0zx50p8UeL1xwm9/r1rSLGoPT9pHNukNxeoVhGi9Usw00kwaEwbs5La8YMdJnnSVAivEdeIv1qSrWNKcGvlOusagyAmPtQaFhqkm7dlyW9HOReUlT/pIgePtb4npSLGkuch10kY7fMqo/DTUhpZm0viSG3Tq0683vkPS6Cc8rHJu8xf7rFjSXOU56RlFppFpOgeKVFNNei91W3ZiwAL3SNplgAsZozp/0deKJc1ZfpM2BhQ4OIhkNMUP9NJMGq8yMS0YcLxL0lgm3ci3O7H4k6la0r11bpOuUWDqIIbugQLDVJNeS6yGGPfot8F9kjYO9G9EIatSJNWaL/2bXchr0huJQRw/p84gM9Wku2b8cbwqA2p3ShrGjj/sDMhz3lSbL+1f4JrPpPcMsveIadxgkJtm0pjFvpUxOsLpcvJJix2n/GN6wm3cAb/1NOWSpqnlMukVgz6S/XTeU0263Ig7jldjwAURSUtpDZufn81hCzfztvxjodq19N/qTh6TbjOgnnCXk4aRZtLYxX0PbuhneRJJJzU6FkqING/wb2ZJxaS5yCjp9umdcemTc+9a0hUG6BVIGFkMcFNNeqTHGxMuMOAdWSVdeW+QZHsVmeq4abOx1FQbl/5jl03STWAZt+g5YF5LesKALaQsGbBLNWkc4k0taTJgn1HS5S9+s6sOInS1h8/xsCdTis2yShorxmHVIEw6YvW0lFGPfv10kz7Feht6Fv2myCbpUp8/tGu4ToGZeAs4GwrpL1kljbnFSIMjIpLu2uKakl1N61qaSYsfc8eZ4fSSTdKGv456QfWk3wHPDBuezippFNqMMB0jKuk9Az4g6cwAN9WkxZORole8trvZJL2in/5eUj7p0JVNnVFWSaO81HmFPewiMuka/Xpe8pNDOEwxafGAc8eJfqMNkUnSJYtB9sRQPWmcLAqZXlZJA4U6w+iLMRCd9EoUU/Irj690k0Y1einvNFiVlk3SQwqZL6onHbovRd3JLGlgLY66t60AcZJe0G91j9dwmnLSJSvqlnTPgDdkk/QnQ7zuFU8aE4ptu9klDVTeOvQxL2MgXtIb+p3vcQxfO+Wk0WTAMWJoUW9llHSbYXpvntpJ44tiuyyTBrrHy+d31np7O9wDiJt0m377exwwb6eddCHiQZdm0+8TGSXdYLjGzFA6aeOTYrO0kw7S9qe1e2o58IlIukE/DfIs+hkpJ4369XG8IQPcrJK2eU3RVTlplPthw9MZJC0mmXQvEAZuMKCflnbSZwZUr85ALUKNpMnDSOGkMR5QyDrmI+ku/ez7XD2WEictv7N/x7i2TuBDmaRprcrqJo192PB0K6dJN3ADM/ukMWFA7cqgQ8NRJ2lyMO8qmzTcHoVMLw9JQ8/rhQc0O3wRVkun3woqJU1ujsomjTnF6k4ekrbv8spa9HNSTxrL8HG8neDeUbGkycVY1aRRDR2ezkHSdxnE81IexBNrCSoJXfeyhXJJ074YiiaNBcXecpD0hn4vkHbM/lGL+ILZKoWdOnFSMGlyU1I0aWNKsaH6SW/vsbPMLOMH4uHDGhfx680+lEyapqdm0tCKFNLPyie9S1qj+GOqmUXSMMULwF0G1BRNmq+KJo1RJ2x4WvWk5/SzypDU7dBvkknSM3G7W8GItapJ86xo0ijYYcPTiiddEFUhyWXAOpOknQb96sItli5QNum6qkmHnt7T9tRO2rCSfxY2GeBlkjR2DChgJbhrVDdpllRNGjOKbVo7lZNGXWJb/dhbPpvIJumRTr/2u0W/JhROeq1s0nhjGKWTriY+b2XFgGVGSWPLOCoqJ/2hbtLdQy6TPjLAGkGC12DAS1ZJnxhDHc+kb0oaziaPSXc7DDhAwhcDbCerpNFntLPSSb8onDRK7RwmjWWyH/NJZ8AWmSU9Z6R2V+mkxyonjVYjh0kfGdQZIyatzaCX7JI2OowygcpJb5QdxPvXycpf0igyqG4ANx8DMDCySxoXRrA1pZOuKZ40ajlMekaBRRdxLClwQYZJlyxet4TKSU9VfSD+v0n+knY6MiVEz6u1vCyTRpPXtVROuj1WP2l85S5pXCiyMBCh+0aRN2SadCXqZ61w0sWRopNLfzFec5d0uUORaQlXaQeKWKVsk8aU16zVTdpaOaouAfit3M9b0hhSqOPiimObQlVknPSZV5hQNunPlrILtfzGg7wlbRQptighhPelU2hQzjrpbpvhZqomXXTVXU4bVLFzljRODGHvhFF71QZDnJF10hgyVKOsZtKNoaHupgcibi9nSeOLYazF2sAvXbdpM8wB2Set2Qyzg4pJ60tP4a1pxD7ylnTZZLjGdnb08A/t+LHoMNzAe0DSWIa2M1Ix6ele5Q3EwqxyljQKFq+z28Vi2+Z1uotHJN3SKXaAekm3z0Aek8YiZ0njg3dwwUOSxifFTvhJhc147YmDnCZtTHOWNJZMbIEHJe1SqI/fHr5lut4sAXlNGpqZs6S7ByZUdx6VNIoUmcPnwQdb1AuqH2xx3aiTr6ThTJnIRsPDkv6gQMd5TNJDCg1qyh8/FKVg5ytplBM13ffwuKSdBoOqeEzSY4tBVtVR/pC4aC96vpKG88mb1TU8MGmsRJNNHpQ0dgzYjtQ/yjPJY61PRZOG8cUbLRw8MGnhfjQLPCppp8/f+qccHLgczxuF3hMm/Z7wv88Swsx6vIF+AR6bNLb0KzwsaYxN/tD56Cp2LL4rOT0+ehRhiB8M/fqf45T0tM0p/ZyICXaSOi6SqSRP+ij7N/To4+F+tC2/9XYa7s9MtC14KcEmhs6GAvuI64J1xL9/hpSd1O7PWpOSDoljKNHvE7I2kov6bPqMcU+nrUWSnbcR0jCgTyvZL/kjBOJvhLCJeMZhafilH/xzKSfJT5l1mxIG5zReoRVk1STX9HboU8F9GRXXbXWRDivZG3KYZMe3ViNqoUUl6u5vHlGk7P4t+h7XORebPumddyZ+W5/kCxrIfZIWgy9LfmgJ7wSctsTnfvRGCIeIBaH2CL91N/ypU4Kkky77lvB2dqygl2PcRasX8ShbdvsD25O+w5ghPwr0sYAEVTYh59zjT0Ut4tl5DX6jAf9nuZA2lH9urU3ajNCpllIaytVPkKd1pC5cmvT5Qn7M6WNC0vpH01sDkl4aP4PyEDAu8j+9GYJaRX5ruLjBsMdvnxri6a4XNkNZ2xcDyYlXIQ9xi3WP3zaO/IYNfeTHMvkBGZX+d1EzyBst9O8vn3QhUH6z+K/+MeTqtvNvSM0xblL4k4w5hwRnvTQp0P46l3FfzoHfrBl8ZH93vGqIVKNPr4zc6NNnCXnucmP2t/MybjKaHPrmplkrI8R4+Fk060sXYYzTsDo5e7jZaH6pflQgzVtPmvWBxX/0BvXFZV1CGmom/9bb7nGr0q5NWtMzYtjT7wV5MabfB55klUvjcamMVFU+JsMXL+n3aSAWw6JPE3nxQb8Cnp7qgpPzc2JKH8vA09OKfnPkQ4t+Uzw9wWVexzyW9Lvg6QmGTT8XeVCyn5fSTzHno26QB2/0G+DpSbw/ZA3qa/Xot8PTk3jB4kCD8qZ8Xnc8xd94bAHVzZjb29qn1FXI3D2Gq1j5+56fsvPKAKsClXkmAzq5eUT0lLo1gwYjqMupM6iKp6e/2ru73QSBIArAW1KqUnUtNVZ0wRDrL5Vosef9H60XTZMmLig1gdnkfM9AJmdndodfe1zqPympghMuhQ4caakxESz6Uut0ZwiAk0Oqv5IxkZmn4z0sEiZp+muiYaEl9hA+EwBuToeoST1YraUF1OBrDpuhIrrpB3mJrOp3NLAaSc391J6uht1ezr28PMMPZ694U5MWKGNWEo5es93JQ4lMEV3KUCocF+2G6iD6SFDKd+hROzWoY1DBM+f3XTeNH5oVp3l0eFlqVAgnisgmTeAiLSfskzR5CPd4snoyJMvjCK7x2OygKo+u1Wl+0XRF7lae1oUiqpYauGN6VETXdDK4wnAMTjdZaDjhLGGoSU7o+pBv6s7SYGpf0BNfqNexIqphcoJkhhNDqi0aQKq31UwR1RcNIZG/4mJ0+q98I22aqDNGDrrLa5HJufcxXx54KKT7BdF20H4DxDObQtrbXnJYkD/3xks/CbXXLD2a9gfr7eHIhytERETu+waJ5JWw/76hJAAAAABJRU5ErkJggg==&quot;);"\n          ></div>\n        </div>\n      </div>\n      <div class="n-as-w100 n-fx-bc" style="height: 40px;">\n        <div class="n-fx-bc">\n          <div class="n-sk n-as-30px n-as-circle n-as-mrg"></div>\n          <div class="n-sk n-as-30px n-as-circle n-as-mrg"></div>\n        </div>\n        <div class="n-fx-bc">\n          <div class="n-sk n-sk-btn-sm n-as-rnd n-as-mrg"></div>\n          <div class="n-sk n-sk-btn-sm n-as-rnd n-as-mrg"></div>\n          <div class="n-sk n-sk-btn-sm n-as-rnd n-as-mrg n-as-w100px"></div>\n        </div>\n      </div>\n    </div>\n    <ul\n      class="n-fx-col n-fx-bc"\n      style="width: calc(15% - 12px);margin-left: 12px;"\n    >\n      ';for(var i=0;i<5;i++)__p+='\n      <li class="n-sk n-as-rnd n-as-w100 n-fx1 n-as-mrgb"></li>\n      ';__p+='\n      <li class="n-sk n-as-rnd n-as-w100 n-fx1"></li>\n    </ul>\n  </div>\n</div>\n'}return __p}},Hvzi:function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},"I+st":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"e",(function(){return s})),i.d(e,"d",(function(){return u})),i.d(e,"b",(function(){return c}));var n=i("KkFV"),r=i("V7zW"),o=i("tdpk");o.a.bindPcEvent();var a={BARRAGE:"barrage",GIFTS:"gifts",FOLLOW:"fllow",RECHARGE:"recharge",REPORT:"report_bt",TIPS_1:"tips1",TIPS_2:"tips2",FULLSCREEN:"fullscreen",BULLET_1:"bullet1",BULLET_2:"bullet2",NOLIVE:"nolive",MATCH_NO_LIVE:"matchnolive",LOGIN_TIP_1:"logintips1",LOGIN_TIP_2:"logintips2",LOGINWINDOW:"loginwindow",COINS:"coins",FEEDBACK:"feedback",BULLET_REPORT:"bulletreport",HOME:"home",HOVER:"hover",PICK_ME:"pickme"};function s(t){var e=r.a.loginFrom,i=Object(r.c)("login_alert","拉起登录弹框",{from_:t});n.a.set(e,t),o.a.report(i)}function u(t,e){var i=Object(r.c)("open_liveroom","进入直播间",{from_:t,type_:e});o.a.report(i)}function c(){return 1===window.room_pk_state?"pk":1===window.room_connect_state?"line":"normal"}e.a=o.a},I01J:function(t,e,i){var n=i("44Ds");t.exports=function(t){var e=n(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}},I2ZF:function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=i;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}},I5cv:function(t,e,i){var n=i("XKFU"),r=i("Kuth"),o=i("2OiF"),a=i("y3w9"),s=i("0/R4"),u=i("eeVq"),c=i("8MEG"),l=(i("dyZX").Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),d=!u((function(){l((function(){}))}));n(n.S+n.F*(h||d),"Reflect",{construct:function(t,e){o(t),a(e);var i=arguments.length<3?t:o(arguments[2]);if(d&&!h)return l(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=i.prototype,f=r(s(u)?u:Object.prototype),p=Function.apply.call(t,f,e);return s(p)?p:f}})},I78H:function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),i("d1Vj"),function(){this.tList=new n.a.RichText,this.tTitle=new n.a.RichText,this.tContent=new n.a.RichText});r.prototype._clone=function(){return new n.a.PayChatRichTextItem},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeStruct(0,this.tList),t.writeStruct(1,this.tTitle),t.writeStruct(2,this.tContent)},r.prototype.readFrom=function(t){this.tList=t.readStruct(0,!1,this.tList),this.tTitle=t.readStruct(1,!1,this.tTitle),this.tContent=t.readStruct(2,!1,this.tContent)},n.a.PayChatRichTextItem=r},"I8a+":function(t,e,i){t.exports=i("4KFe")(61)},IOzZ:function(t,e){t.exports=function(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}},IiaG:function(t,e,i){"use strict";i.r(e),e.default={namespace:"common_base",loaders:{1025:function(){return i.e("770fd").then(i.bind(null,"/cS3"))},1028:function(){return i.e("3e720").then(i.bind(null,"VypQ"))},1033:function(){return i.e("a4697").then(i.bind(null,"Hp8d"))},1034:function(){return i.e("3c15f").then(i.bind(null,"w3qo"))},1041:function(){return i.e("f5d08").then(i.bind(null,"SU3T"))},1046:function(){return i.e("c8ba9").then(i.bind(null,"drPw"))},1049:function(){return i.e("f5fd2").then(i.bind(null,"njJd"))},1054:function(){return i.e("ff17e").then(i.bind(null,"yRZA"))},1055:function(){return i.e("a96d5").then(i.bind(null,"SmuY"))},1057:function(){return i.e("cb275").then(i.bind(null,"l6eC"))},1066:function(){return i.e("f6a07").then(i.bind(null,"mS/d"))},1081:function(){return i.e("c70ac").then(i.bind(null,"R8c/"))},1086:function(){return i.e("2c269").then(i.bind(null,"zV7+"))},1124:function(){return i.e("1a79a").then(i.bind(null,"tdb1"))}}}},Ijbi:function(t,e,i){var n=i("WkPL");t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},IkgH:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("KkFV"),r=i("YZRX"),o=function(){var t,e=(null===(t=window)||void 0===t?void 0:t.nimo_base)||{},i=e.hasMulTheme,o=e.defaultTheme;if(i){var a=n.a.get("theme")||1;return Object(r.g)(a)}return o?Object(r.g)(o):1}},Ioao:function(t,e,i){var n=i("heNW"),r=Math.max;t.exports=function(t,e,i){return e=r(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=r(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=i(u),n(t,this,c)}}},"J+6e":function(t,e,i){t.exports=i("4KFe")(96)},J4zp:function(t,e,i){var n=i("wTVA"),r=i("m0LI"),o=i("ZhPi"),a=i("wkBT");t.exports=function(t,e){return n(t)||r(t,e)||o(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},J66h:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){module.exports=e(t)}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:this,(function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},i=0,n=t.length;i<n;i++)e[t.charAt(i)]=i;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[b64chars.charAt(i>>>18),b64chars.charAt(i>>>12&63),e>=2?"=":b64chars.charAt(i>>>6&63),e>=1?"=":b64chars.charAt(63&i)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(e>>>10))+fromCharCode(56320+(1023&e));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,i=e%4,n=(e>0?b64tab[t.charAt(0)]<<18:0)|(e>1?b64tab[t.charAt(1)]<<12:0)|(e>2?b64tab[t.charAt(2)]<<6:0)|(e>3?b64tab[t.charAt(3)]:0),r=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return r.length-=[0,0,2,1][i],r.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"===typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(t){return encode(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}}))}).call(this,__webpack_require__("yLpj"))},J78i:function(t,e,i){"use strict";t.exports=a;var n=i("sZro"),r=i("Onz0");function o(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"===typeof this._flush?this._flush((function(e,i){u(t,e,i)})):u(this,null,null)}function u(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i("P7XM"),r.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))}},JGfN:function(t,e,i){t.exports=i("ZVIm")("native-function-to-string",Function.toString)},JGns:function(t,e,i){"use strict";i.r(e);var n=i("QILm"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("lSNA"),l=i.n(c),h=i("KkFV"),d=i("KFtC"),f=i("JwEE"),p=i("fGII"),m=["bizData"];function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){l()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var g=function(){return i.e("b99ed").then(i.bind(null,"7Vhv"))},_=25,S=function(){function t(){a()(this,t),l()(this,"initUDB",(function(){g().then((function(t){t.default.isInitUDB({success:function(){},error:function(){console.error("UDB_init_error")}})}))})),l()(this,"getAppInfo",(function(t){return g().then((function(e){e.default.appInfo(t)}))})),l()(this,"oauthPasswordLogin",(function(t){return g().then((function(e){e.default.oauthPasswordLogin(t)}))})),l()(this,"anonymousLogin",(function(t){return g().then((function(e){e.default.anonymousLogin(t)}))})),this.bizToken="",this.country="",this.version="",this.avatarUrl="",this.lang="",this.nickName="",this.udbUserId=0,this.isLogin=!1,this.ua="wap&1.0.4&nimoTV",this.isAnchor="",this.getUserInfo()}return u()(t,[{key:"getUserInfo",value:function(){return this.udbUserId=parseInt(h.a.get("udbUserId")||0,10),this.bizToken=h.a.get("bizToken"),this.userid=h.a.get("userid"),this.nickName=h.a.get("userName"),this.avatarUrl=h.a.get("avatarUrl"),this.version=h.a.get("version"),this.isAnchor=h.a.get("isAnchor"),this.lang=Object(d.k)(),this.country=Object(d.g)(),this.cCountry=Object(d.e)(),this.clang=Object(d.f)(),this.guid=Object(d.j)(),this.mid=Object(d.l)(),this.deviceId=Object(d.l)(),this.safeDeviceId=h.b.get("sdid")||"",this.isLogin=this.udbUserId>0,{userid:this.userid,udbUserId:this.udbUserId,bizToken:this.bizToken,userName:this.nickName,avatarUrl:this.avatarUrl,version:this.version,lang:this.lang,country:this.country,cCountry:this.cCountry,clang:this.clang,ua:this.ua,guid:this.guid,mid:this.mid,deviceId:this.deviceId,safeDeviceId:this.safeDeviceId,isAnchor:this.isAnchor}}},{key:"login",value:function(t){var e=this,i=t.phone,n=t.password,r=t.success,o=t.error,a=function(){o.apply(void 0,arguments)},s=function(t){return e.loginSuccessCallback(t).then(r).catch(a)};g().then((function(t){t.default.login({phone:i,password:n,success:s,error:a})}))}},{key:"thirdLogin",value:function(t){var e=this,i=t.style,n=t.type,o=t.success,a=t.error,s=t.data,u=function(){a.apply(void 0,arguments)},c=function(t){t.bizData;var i=r()(t,m),a=JSON.parse(s.bizData),c=a.birthday,l=void 0===c?null:c,h=a.countryCode;return e.loginSuccessCallback(v(v({},i),{},{birthday:l,countryCode:h}),!0,n).then(o).catch(u)};g().then((function(t){t.default.thirdLogin({style:i,type:n,data:s,success:c,error:u})}))}},{key:"thirdLoginConnect",value:function(t){var e=this,i=t.style,n=t.type,r=t.success,o=t.error,a=t.data,s=function(){o.apply(void 0,arguments)},u=function(t){var i=JSON.parse(a.bizData),o=i.birthday,u=void 0===o?null:o,c=i.countryCode,l=void 0===c?"":c;return e.loginSuccessCallback(v(v({},t),{},{birthday:u,countryCode:l}),!0,n).then(r).catch(s)};g().then((function(t){t.default.thirdLoginConnect({style:i,type:n,data:a,success:u,error:s})}))}},{key:"loginSuccessCallback",value:function(t,e,n){var r=t.data;return function(t){var e=this,n=t.biztoken,r=t.uid,o=t.version,a=t.birthday,s=void 0===a?null:a,u=t.countryCode,c=void 0===u?Object(d.g)():u,l=t.isThirdLogin,f=t.type;h.a.set("version",o,_),h.a.set("bizToken",n,_);var p={tw:1,gg:3,fb:2,phone:4,line:7,ins:6,zalo:8},m={lcid:Object(d.k)(),countryCode:c,accountType:f?p[f]:p.phone,version:o,udbDeviceType:"WEB",bizToken:n,udbUserId:r,avatarUrl:l?decodeURIComponent(h.a.get("avatar")):void 0,nickName:l?h.a.get("nickname"):void 0};"string"===typeof s&&(m.birthday=Number(s));return i.e("bc641").then(i.bind(null,"f0HM")).then((function(t){return t.userInfoModel.registerOrLogin(m,{uid:r}).then((function(t){return h.a.set("userid",t.userId,_),h.a.set("userName",t.nickName,_),h.a.set("udbUserId",t.udbUserId,_),h.a.set("udb_uid",t.udbUserId,_),h.a.set("isAnchor",t.isAnchor,_),null==t.avatarUrl?h.a.remove("avatarUrl"):h.a.set("avatarUrl",t.avatarUrl,_),t}),(function(t){return 10405===t.code&&setTimeout((function(){e.logout()}),800),t}))}))}({biztoken:r.biztoken,uid:r.uid,version:r.version,birthday:t.birthday,countryCode:t.countryCode,isThirdLogin:e,type:n})}},{key:"logout",value:function(){g().then((function(t){t.default.logout({success:function(t){h.a.remove("avatarUrl"),h.a.remove("userName"),h.a.remove("version"),h.a.remove("bizToken"),h.a.remove("udb_biztoken"),h.a.remove("udb_guiddata"),h.a.remove("udb_openid"),h.a.remove("udb_passport"),h.a.remove("udb_uid"),h.a.remove("udbUserId"),h.a.remove("yyuid"),h.a.remove("userid"),!0===((t||{}).data||{}).destroyUser?Object(p.a)():location.reload()}})}))}},{key:"checkLogin",value:function(t){return this.getUserInfo(),!!this.isLogin||(t&&this.openAuthView("login"),!1)}},{key:"openAuthView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(window.self!==window.top||window._NIMO_NEW_PAGE_LOGIN_)f.a.login(t);else{var i=window.location.search,n="?next=".concat(encodeURIComponent(e||location.href)).concat(i?"&".concat(i.substring(1)):""),r="".concat(location.protocol,"//").concat("m.nimo.tv","/").concat(t).concat(n);window.location.href=r}}},{key:"sendVerifyCode",value:function(t){g().then((function(e){e.default.codeSend(t)}))}},{key:"register",value:function(t){var e=this,i=t.phone,n=t.password,r=t.smsCode,o=t.birthday,a=t.success,s=t.error,u=function(){s.apply(void 0,arguments)},c=function(t){return e.loginSuccessCallback(v(v({},t),{},{birthday:o})).then(a).catch(u)};g().then((function(t){t.default.register({phone:i,password:n,smsCode:r,success:c,error:u})}))}},{key:"findPassword",value:function(t){var e=t.phone,i=t.password,n=t.smsCode,r=t.success,o=t.error;g().then((function(t){t.default.passFind({phone:e,password:i,smsCode:n,success:r,error:o})}))}}]),t}();e.default=new S},JHRd:function(t,e,i){var n=i("Kz5y").Uint8Array;t.exports=n},JHgL:function(t,e,i){var n=i("QkVE");t.exports=function(t){return n(this,t).get(t)}},JLRk:function(t,e,i){"use strict";i.d(e,"B",(function(){return dt.b})),i.d(e,"m",(function(){return vt})),i.d(e,"u",(function(){return gt})),i.d(e,"x",(function(){return _t})),i.d(e,"v",(function(){return St})),i.d(e,"t",(function(){return wt})),i.d(e,"f",(function(){return bt})),i.d(e,"e",(function(){return It})),i.d(e,"g",(function(){return Tt})),i.d(e,"d",(function(){return Pt})),i.d(e,"k",(function(){return kt})),i.d(e,"r",(function(){return Ct})),i.d(e,"q",(function(){return Ot})),i.d(e,"w",(function(){return At})),i.d(e,"s",(function(){return Nt})),i.d(e,"o",(function(){return Dt})),i.d(e,"c",(function(){return Ft})),i.d(e,"p",(function(){return Bt})),i.d(e,"y",(function(){return qt})),i.d(e,"z",(function(){return Kt})),i.d(e,"a",(function(){return K.a})),i.d(e,"b",(function(){return z})),i.d(e,"h",(function(){return jt})),i.d(e,"n",(function(){return Vt})),i.d(e,"j",(function(){return Gt})),i.d(e,"l",(function(){return Ht})),i.d(e,"i",(function(){return Wt}));i("I5cv");var n=i("lSNA"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("7W2i"),u=i.n(s),c=i("a1gu"),l=i.n(c),h=i("Nsbk"),d=i.n(h),f=i("Dk78"),p=i("Fv9B"),m=i("ZMLX"),y=i("EoCF"),v=function(){this.lBannedUid=0,this.lRoomId=0,this.lTimeS=0,this.sBannedNick="",this.lOperatorUid=0,this.sOperatorNick="",this.iIsAnchor=0,this.iIsOnVoice=0};v.prototype._clone=function(){return new m.a.VoiceRoomBanNotice},v.prototype._write=function(t,e,i){t.writeStruct(e,i)},v.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},v.prototype.writeTo=function(t){t.writeInt64(0,this.lBannedUid),t.writeInt64(1,this.lRoomId),t.writeInt64(2,this.lTimeS),t.writeString(3,this.sBannedNick),t.writeInt64(4,this.lOperatorUid),t.writeString(5,this.sOperatorNick),t.writeInt32(6,this.iIsAnchor),t.writeInt32(7,this.iIsOnVoice)},v.prototype.readFrom=function(t){this.lBannedUid=t.readInt64(0,!1,this.lBannedUid),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.lTimeS=t.readInt64(2,!1,this.lTimeS),this.sBannedNick=t.readString(3,!1,this.sBannedNick),this.lOperatorUid=t.readInt64(4,!1,this.lOperatorUid),this.sOperatorNick=t.readString(5,!1,this.sOperatorNick),this.iIsAnchor=t.readInt32(6,!1,this.iIsAnchor),this.iIsOnVoice=t.readInt32(7,!1,this.iIsOnVoice)},m.a.VoiceRoomBanNotice=v;var g=v,_=i("dxGG"),S=(i("OC+i"),function(){this.lUserId=0,this.sNick="",this.iRank=0,this.iBgColor=0,this.sBgUrl="",this.lRoomId=0,this.bIsManager=!0,this.sAvatarUrl="",this.sCountry="",this.iRankType=0,this.iEffectShowTime=0,this.sVerticalUrlWeb="",this.sVerticalUrlApp="",this.sHorizontalUrlWeb="",this.sHorizontalUrlApp="",this.sBgUrlWeb="",this.sBgUrlApp="",this.mRankName=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.iEffectType=0,this.sNewUrlWeb="",this.sNewUrlApp="",this.sAdrMP4Url="",this.sIosMP4Url="",this.sWebMP4Url="",this.sTraceSource="",this.bIsShowContent=0,this.iUserLevel=0,this.vDecorationPrefix=new y.Taf.Vector(new m.a.DecorationInfo)});S.prototype._clone=function(){return new m.a.NewUserEnterRoomNotice},S.prototype._write=function(t,e,i){t.writeStruct(e,i)},S.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},S.prototype.writeTo=function(t){t.writeInt64(0,this.lUserId),t.writeString(1,this.sNick),t.writeInt32(2,this.iRank),t.writeInt32(3,this.iBgColor),t.writeString(4,this.sBgUrl),t.writeInt64(5,this.lRoomId),t.writeBoolean(6,this.bIsManager),t.writeString(7,this.sAvatarUrl),t.writeString(8,this.sCountry),t.writeInt32(9,this.iRankType),t.writeInt32(10,this.iEffectShowTime),t.writeString(11,this.sVerticalUrlWeb),t.writeString(12,this.sVerticalUrlApp),t.writeString(13,this.sHorizontalUrlWeb),t.writeString(14,this.sHorizontalUrlApp),t.writeString(15,this.sBgUrlWeb),t.writeString(16,this.sBgUrlApp),t.writeMap(17,this.mRankName),t.writeInt32(18,this.iEffectType),t.writeString(19,this.sNewUrlWeb),t.writeString(20,this.sNewUrlApp),t.writeString(21,this.sAdrMP4Url),t.writeString(22,this.sIosMP4Url),t.writeString(23,this.sWebMP4Url),t.writeString(24,this.sTraceSource),t.writeInt32(25,this.bIsShowContent),t.writeInt32(26,this.iUserLevel),t.writeVector(27,this.vDecorationPrefix)},S.prototype.readFrom=function(t){this.lUserId=t.readInt64(0,!1,this.lUserId),this.sNick=t.readString(1,!1,this.sNick),this.iRank=t.readInt32(2,!1,this.iRank),this.iBgColor=t.readInt32(3,!1,this.iBgColor),this.sBgUrl=t.readString(4,!1,this.sBgUrl),this.lRoomId=t.readInt64(5,!1,this.lRoomId),this.bIsManager=t.readBoolean(6,!1,this.bIsManager),this.sAvatarUrl=t.readString(7,!1,this.sAvatarUrl),this.sCountry=t.readString(8,!1,this.sCountry),this.iRankType=t.readInt32(9,!1,this.iRankType),this.iEffectShowTime=t.readInt32(10,!1,this.iEffectShowTime),this.sVerticalUrlWeb=t.readString(11,!1,this.sVerticalUrlWeb),this.sVerticalUrlApp=t.readString(12,!1,this.sVerticalUrlApp),this.sHorizontalUrlWeb=t.readString(13,!1,this.sHorizontalUrlWeb),this.sHorizontalUrlApp=t.readString(14,!1,this.sHorizontalUrlApp),this.sBgUrlWeb=t.readString(15,!1,this.sBgUrlWeb),this.sBgUrlApp=t.readString(16,!1,this.sBgUrlApp),this.mRankName=t.readMap(17,!1,this.mRankName),this.iEffectType=t.readInt32(18,!1,this.iEffectType),this.sNewUrlWeb=t.readString(19,!1,this.sNewUrlWeb),this.sNewUrlApp=t.readString(20,!1,this.sNewUrlApp),this.sAdrMP4Url=t.readString(21,!1,this.sAdrMP4Url),this.sIosMP4Url=t.readString(22,!1,this.sIosMP4Url),this.sWebMP4Url=t.readString(23,!1,this.sWebMP4Url),this.sTraceSource=t.readString(24,!1,this.sTraceSource),this.bIsShowContent=t.readInt32(25,!1,this.bIsShowContent),this.iUserLevel=t.readInt32(26,!1,this.iUserLevel),this.vDecorationPrefix=t.readVector(27,!1,this.vDecorationPrefix)},m.a.NewUserEnterRoomNotice=S;var w=S,b=function(){this.lUid=0,this.iFromLevel=0,this.iToLevel=0,this.iCurrentExp=0};b.prototype._clone=function(){return new m.a.AnchorLevelUp},b.prototype._write=function(t,e,i){t.writeStruct(e,i)},b.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},b.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt32(1,this.iFromLevel),t.writeInt32(2,this.iToLevel),t.writeInt32(3,this.iCurrentExp)},b.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.iFromLevel=t.readInt32(1,!1,this.iFromLevel),this.iToLevel=t.readInt32(2,!1,this.iToLevel),this.iCurrentExp=t.readInt32(3,!1,this.iCurrentExp)},m.a.AnchorLevelUp=b;var I=b,T=function(){this.lRoomId=0,this.sUserNick="",this.iFansLevel=0};T.prototype._clone=function(){return new m.a.FansLevelUpNotice},T.prototype._write=function(t,e,i){t.writeStruct(e,i)},T.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},T.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeString(1,this.sUserNick),t.writeInt32(2,this.iFansLevel)},T.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.sUserNick=t.readString(1,!1,this.sUserNick),this.iFansLevel=t.readInt32(2,!1,this.iFansLevel)},m.a.FansLevelUpNotice=T;var P=T,E=(i("d1Vj"),function(){this.iRecordId=0,this.sBannerName="",this.mBannerContent=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.sBannerBgUrlWeb="",this.sBannerVBgUrlApp="",this.sBannerHBgUrlApp="",this.iJumpType=0,this.sJumpUrl="",this.lRoomId=0,this.lAnchorId=0,this.iBusinessType=0,this.iBannerType=0,this.lTriggerRoomId=0,this.iWeight=0,this.iDurationS=0,this.iCategory=0,this.tRichText=new m.a.RichText,this.sNewAppVerticalUrl="",this.mHorizontalPadding=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.mVerticalPadding=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.vExtraData=new y.Taf.BinBuffer,this.sZip="",this.sSvga="",this.sZip2=""});E.prototype._clone=function(){return new m.a.RoomMsgBannerNotice},E.prototype._write=function(t,e,i){t.writeStruct(e,i)},E.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},E.prototype.writeTo=function(t){t.writeInt32(0,this.iRecordId),t.writeString(1,this.sBannerName),t.writeMap(2,this.mBannerContent),t.writeString(3,this.sBannerBgUrlWeb),t.writeString(4,this.sBannerVBgUrlApp),t.writeString(5,this.sBannerHBgUrlApp),t.writeInt32(6,this.iJumpType),t.writeString(7,this.sJumpUrl),t.writeInt64(8,this.lRoomId),t.writeInt64(9,this.lAnchorId),t.writeInt32(10,this.iBusinessType),t.writeInt32(11,this.iBannerType),t.writeInt64(12,this.lTriggerRoomId),t.writeInt32(13,this.iWeight),t.writeInt32(14,this.iDurationS),t.writeInt32(15,this.iCategory),t.writeStruct(16,this.tRichText),t.writeString(17,this.sNewAppVerticalUrl),t.writeMap(18,this.mHorizontalPadding),t.writeMap(19,this.mVerticalPadding),t.writeBytes(20,this.vExtraData),t.writeString(21,this.sZip),t.writeString(22,this.sSvga),t.writeString(23,this.sZip2)},E.prototype.readFrom=function(t){this.iRecordId=t.readInt32(0,!1,this.iRecordId),this.sBannerName=t.readString(1,!1,this.sBannerName),this.mBannerContent=t.readMap(2,!1,this.mBannerContent),this.sBannerBgUrlWeb=t.readString(3,!1,this.sBannerBgUrlWeb),this.sBannerVBgUrlApp=t.readString(4,!1,this.sBannerVBgUrlApp),this.sBannerHBgUrlApp=t.readString(5,!1,this.sBannerHBgUrlApp),this.iJumpType=t.readInt32(6,!1,this.iJumpType),this.sJumpUrl=t.readString(7,!1,this.sJumpUrl),this.lRoomId=t.readInt64(8,!1,this.lRoomId),this.lAnchorId=t.readInt64(9,!1,this.lAnchorId),this.iBusinessType=t.readInt32(10,!1,this.iBusinessType),this.iBannerType=t.readInt32(11,!1,this.iBannerType),this.lTriggerRoomId=t.readInt64(12,!1,this.lTriggerRoomId),this.iWeight=t.readInt32(13,!1,this.iWeight),this.iDurationS=t.readInt32(14,!1,this.iDurationS),this.iCategory=t.readInt32(15,!1,this.iCategory),this.tRichText=t.readStruct(16,!1,this.tRichText),this.sNewAppVerticalUrl=t.readString(17,!1,this.sNewAppVerticalUrl),this.mHorizontalPadding=t.readMap(18,!1,this.mHorizontalPadding),this.mVerticalPadding=t.readMap(19,!1,this.mVerticalPadding),this.vExtraData=t.readBytes(20,!1,this.vExtraData),this.sZip=t.readString(21,!1,this.sZip),this.sSvga=t.readString(22,!1,this.sSvga),this.sZip2=t.readString(23,!1,this.sZip2)},m.a.RoomMsgBannerNotice=E;var k=E,R=(i("2UZc"),function(){this.mSystemMessage=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.tFormat=new m.a.ContentFormat,this.lRoomId=0});R.prototype._clone=function(){return new m.a.SystemMessageNotice},R.prototype._write=function(t,e,i){t.writeStruct(e,i)},R.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},R.prototype.writeTo=function(t){t.writeMap(0,this.mSystemMessage),t.writeStruct(1,this.tFormat),t.writeInt64(2,this.lRoomId)},R.prototype.readFrom=function(t){this.mSystemMessage=t.readMap(0,!1,this.mSystemMessage),this.tFormat=t.readStruct(1,!1,this.tFormat),this.lRoomId=t.readInt64(2,!1,this.lRoomId)},m.a.SystemMessageNotice=R;var C=R,O=function(){this.lRoomId=0,this.lUid=0,this.lAnchorId=0,this.iVIPLevel=0};O.prototype._clone=function(){return new m.a.VIPLevelChangeNotice},O.prototype._write=function(t,e,i){t.writeStruct(e,i)},O.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},O.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt64(1,this.lUid),t.writeInt64(2,this.lAnchorId),t.writeInt32(3,this.iVIPLevel)},O.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.lUid=t.readInt64(1,!1,this.lUid),this.lAnchorId=t.readInt64(2,!1,this.lAnchorId),this.iVIPLevel=t.readInt32(3,!1,this.iVIPLevel)},m.a.VIPLevelChangeNotice=O;var A=O,L=function(){this.lRoomId=0,this.lUserId=0,this.sNick="",this.sAvatarUrl="",this.sVerticalUrlWeb="",this.sVerticalUrlApp="",this.sAdrMP4Url="",this.sIosMP4Url="",this.sWebMP4Url="",this.iEffectShowTime=0,this.iEffectType=0,this.mText=new y.Taf.Map(new y.Taf.STRING,new y.Taf.Vector(new y.Taf.STRING)),this.vDecorationUrl=new y.Taf.Vector(new y.Taf.STRING),this.iLevelType=0,this.sTraceSource="",this.bIsShowContent=0,this.iUserLevel=0,this.sGamePlayUrl=""};L.prototype._clone=function(){return new m.a.NoRankUserEnterRoomNotice},L.prototype._write=function(t,e,i){t.writeStruct(e,i)},L.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},L.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt64(1,this.lUserId),t.writeString(2,this.sNick),t.writeString(3,this.sAvatarUrl),t.writeString(4,this.sVerticalUrlWeb),t.writeString(5,this.sVerticalUrlApp),t.writeString(6,this.sAdrMP4Url),t.writeString(7,this.sIosMP4Url),t.writeString(8,this.sWebMP4Url),t.writeInt32(9,this.iEffectShowTime),t.writeInt32(10,this.iEffectType),t.writeMap(11,this.mText),t.writeVector(13,this.vDecorationUrl),t.writeInt32(14,this.iLevelType),t.writeString(15,this.sTraceSource),t.writeInt32(16,this.bIsShowContent),t.writeInt32(17,this.iUserLevel),t.writeString(18,this.sGamePlayUrl)},L.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.lUserId=t.readInt64(1,!1,this.lUserId),this.sNick=t.readString(2,!1,this.sNick),this.sAvatarUrl=t.readString(3,!1,this.sAvatarUrl),this.sVerticalUrlWeb=t.readString(4,!1,this.sVerticalUrlWeb),this.sVerticalUrlApp=t.readString(5,!1,this.sVerticalUrlApp),this.sAdrMP4Url=t.readString(6,!1,this.sAdrMP4Url),this.sIosMP4Url=t.readString(7,!1,this.sIosMP4Url),this.sWebMP4Url=t.readString(8,!1,this.sWebMP4Url),this.iEffectShowTime=t.readInt32(9,!1,this.iEffectShowTime),this.iEffectType=t.readInt32(10,!1,this.iEffectType),this.mText=t.readMap(11,!1,this.mText),this.vDecorationUrl=t.readVector(13,!1,this.vDecorationUrl),this.iLevelType=t.readInt32(14,!1,this.iLevelType),this.sTraceSource=t.readString(15,!1,this.sTraceSource),this.bIsShowContent=t.readInt32(16,!1,this.bIsShowContent),this.iUserLevel=t.readInt32(17,!1,this.iUserLevel),this.sGamePlayUrl=t.readString(18,!1,this.sGamePlayUrl)},m.a.NoRankUserEnterRoomNotice=L;var N=L,M=function(){this.iPlatform=0,this.sNickName="",this.lRoomId=0,this.sContent="",this.sBadgeIcon=""};M.prototype._clone=function(){return new m.a.ThirdMessageNotice},M.prototype._write=function(t,e,i){t.writeStruct(e,i)},M.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},M.prototype.writeTo=function(t){t.writeInt32(0,this.iPlatform),t.writeString(1,this.sNickName),t.writeInt64(2,this.lRoomId),t.writeString(3,this.sContent),t.writeString(4,this.sBadgeIcon)},M.prototype.readFrom=function(t){this.iPlatform=t.readInt32(0,!1,this.iPlatform),this.sNickName=t.readString(1,!1,this.sNickName),this.lRoomId=t.readInt64(2,!1,this.lRoomId),this.sContent=t.readString(3,!1,this.sContent),this.sBadgeIcon=t.readString(4,!1,this.sBadgeIcon)},m.a.ThirdMessageNotice=M;var U=M,D=function(){this.sPreIcon="",this.tRichText=new m.a.RichText};D.prototype._clone=function(){return new m.a.MarqueeNotice},D.prototype._write=function(t,e,i){t.writeStruct(e,i)},D.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},D.prototype.writeTo=function(t){t.writeString(0,this.sPreIcon),t.writeStruct(1,this.tRichText)},D.prototype.readFrom=function(t){this.sPreIcon=t.readString(0,!1,this.sPreIcon),this.tRichText=t.readStruct(1,!1,this.tRichText)},m.a.MarqueeNotice=D;var B=D,F=function(){this.mContent=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.mLabel=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.udbUserId=0,this.anchorId=0,this.userNickName=""};F.prototype._clone=function(){return new m.a.ActivitySignNotice},F.prototype._write=function(t,e,i){t.writeStruct(e,i)},F.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},F.prototype.writeTo=function(t){t.writeMap(0,this.mContent),t.writeMap(1,this.mLabel),t.writeInt64(2,this.udbUserId),t.writeInt64(3,this.anchorId),t.writeString(4,this.userNickName)},F.prototype.readFrom=function(t){this.mContent=t.readMap(0,!1,this.mContent),this.mLabel=t.readMap(1,!1,this.mLabel),this.udbUserId=t.readInt64(2,!1,this.udbUserId),this.anchorId=t.readInt64(3,!1,this.anchorId),this.userNickName=t.readString(4,!1,this.userNickName)},m.a.ActivitySignNotice=F;var x=F,j=i("4TRz"),V=i("M1/F"),G=function(){this.sWelcomeText="",this.sIcon="",this.sTextColor="",this.sBGColor="",this.lRoomId=0};G.prototype._clone=function(){return new m.a.RoomWelcomeNotice},G.prototype._write=function(t,e,i){t.writeStruct(e,i)},G.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},G.prototype.writeTo=function(t){t.writeString(0,this.sWelcomeText),t.writeString(1,this.sIcon),t.writeString(2,this.sTextColor),t.writeString(3,this.sBGColor),t.writeInt64(4,this.lRoomId)},G.prototype.readFrom=function(t){this.sWelcomeText=t.readString(0,!1,this.sWelcomeText),this.sIcon=t.readString(1,!1,this.sIcon),this.sTextColor=t.readString(2,!1,this.sTextColor),this.sBGColor=t.readString(3,!1,this.sBGColor),this.lRoomId=t.readInt64(4,!1,this.lRoomId)},m.a.RoomWelcomeNotice=G;var H=G,W=function(){this.lUid=0,this.lRoomId=0,this.sNickName="",this.sChannelName="",this.sChannelIcon="",this.iShareType=0,this.lComboNum=0,this.sComboId="",this.sAnchorName=""};W.prototype._clone=function(){return new m.a.ShareRoomNotice},W.prototype._write=function(t,e,i){t.writeStruct(e,i)},W.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},W.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt64(1,this.lRoomId),t.writeString(2,this.sNickName),t.writeString(3,this.sChannelName),t.writeString(4,this.sChannelIcon),t.writeInt32(5,this.iShareType),t.writeInt64(6,this.lComboNum),t.writeString(7,this.sComboId),t.writeString(8,this.sAnchorName)},W.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.lRoomId=t.readInt64(1,!1,this.lRoomId),this.sNickName=t.readString(2,!1,this.sNickName),this.sChannelName=t.readString(3,!1,this.sChannelName),this.sChannelIcon=t.readString(4,!1,this.sChannelIcon),this.iShareType=t.readInt32(5,!1,this.iShareType),this.lComboNum=t.readInt64(6,!1,this.lComboNum),this.sComboId=t.readString(7,!1,this.sComboId),this.sAnchorName=t.readString(8,!1,this.sAnchorName)},m.a.ShareRoomNotice=W;var q=W,K=i("ULCk"),Y={kDecorationViewTypeCustomized:0,kDecorationViewTypeText:1,kDecorationViewTypeIcon:2};m.a.EDecorationViewType=Y;var z=Y,J=function(){this.sUrl=""};J.prototype._clone=function(){return new m.a.MsgCommDecoIcon},J.prototype._write=function(t,e,i){t.writeStruct(e,i)},J.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},J.prototype.writeTo=function(t){t.writeString(0,this.sUrl)},J.prototype.readFrom=function(t){this.sUrl=t.readString(0,!1,this.sUrl)},m.a.MsgCommDecoIcon=J;var Q=function(){this.tNotice=new m.a.RoomMsgBannerNotice,this.iJumpProb=0};Q.prototype._clone=function(){return new m.a.ExtendRoomMsgBannerNoticeItem},Q.prototype._write=function(t,e,i){t.writeStruct(e,i)},Q.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},Q.prototype.writeTo=function(t){t.writeStruct(0,this.tNotice),t.writeInt32(1,this.iJumpProb)},Q.prototype.readFrom=function(t){this.tNotice=t.readStruct(0,!1,this.tNotice),this.iJumpProb=t.readInt32(1,!1,this.iJumpProb)},m.a.ExtendRoomMsgBannerNoticeItem=Q;var X=function(){this.vNotices=new y.Taf.Vector(new m.a.ExtendRoomMsgBannerNoticeItem)};X.prototype._clone=function(){return new m.a.ExtendRoomMsgBannerNotice},X.prototype._write=function(t,e,i){t.writeStruct(e,i)},X.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},X.prototype.writeTo=function(t){t.writeVector(0,this.vNotices)},X.prototype.readFrom=function(t){this.vNotices=t.readVector(0,!1,this.vNotices)},m.a.ExtendRoomMsgBannerNotice=X;var Z=X,$=function(){this.tSystemMessage=new m.a.RichText,this.lAnchorId=0};$.prototype._clone=function(){return new m.a.SystemChatMessageNotice},$.prototype._write=function(t,e,i){t.writeStruct(e,i)},$.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},$.prototype.writeTo=function(t){t.writeStruct(0,this.tSystemMessage),t.writeInt64(1,this.lAnchorId)},$.prototype.readFrom=function(t){this.tSystemMessage=t.readStruct(0,!1,this.tSystemMessage),this.lAnchorId=t.readInt64(1,!1,this.lAnchorId)},m.a.SystemChatMessageNotice=$;var tt=$,et=i("ZD01"),it=(i("yyBc"),function(){this.tUserInfo=new m.a.SenderInfo,this.sMessage="",this.lRoomId=0});it.prototype._clone=function(){return new m.a.ChatBotMessageNotice},it.prototype._write=function(t,e,i){t.writeStruct(e,i)},it.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},it.prototype.writeTo=function(t){t.writeStruct(0,this.tUserInfo),t.writeString(1,this.sMessage),t.writeInt64(2,this.lRoomId)},it.prototype.readFrom=function(t){this.tUserInfo=t.readStruct(0,!1,this.tUserInfo),this.sMessage=t.readString(1,!1,this.sMessage),this.lRoomId=t.readInt64(2,!1,this.lRoomId)},m.a.ChatBotMessageNotice=it;var nt=it,rt=(i("db0I"),i("I78H"),i("f7Wj"),function(){this.lAnchorId=0,this.lUid=0,this.sNickName="",this.sAvatarUrl="",this.tOption=new m.a.PayChatOption,this.iShowType=0,this.lSendTime=0,this.tRichTextItem=new m.a.PayChatRichTextItem,this.mExtraData=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.vAtSomeone=new y.Taf.Vector(new m.a.UidNickName),this.iRuleType=0,this.iSource=0});rt.prototype._clone=function(){return new m.a.PayChatRichTextNotice},rt.prototype._write=function(t,e,i){t.writeStruct(e,i)},rt.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},rt.prototype.writeTo=function(t){t.writeInt64(0,this.lAnchorId),t.writeInt64(1,this.lUid),t.writeString(2,this.sNickName),t.writeString(3,this.sAvatarUrl),t.writeStruct(5,this.tOption),t.writeInt32(6,this.iShowType),t.writeInt64(7,this.lSendTime),t.writeStruct(8,this.tRichTextItem),t.writeMap(9,this.mExtraData),t.writeVector(10,this.vAtSomeone),t.writeInt32(11,this.iRuleType),t.writeInt32(12,this.iSource)},rt.prototype.readFrom=function(t){this.lAnchorId=t.readInt64(0,!1,this.lAnchorId),this.lUid=t.readInt64(1,!1,this.lUid),this.sNickName=t.readString(2,!1,this.sNickName),this.sAvatarUrl=t.readString(3,!1,this.sAvatarUrl),this.tOption=t.readStruct(5,!1,this.tOption),this.iShowType=t.readInt32(6,!1,this.iShowType),this.lSendTime=t.readInt64(7,!1,this.lSendTime),this.tRichTextItem=t.readStruct(8,!1,this.tRichTextItem),this.mExtraData=t.readMap(9,!1,this.mExtraData),this.vAtSomeone=t.readVector(10,!1,this.vAtSomeone),this.iRuleType=t.readInt32(11,!1,this.iRuleType),this.iSource=t.readInt32(12,!1,this.iSource)},m.a.PayChatRichTextNotice=rt;var ot=rt,at=i("/TH8"),st=(i("b1ko"),function(){this.level=0});st.prototype._clone=function(){return new m.a.UserLevelObject},st.prototype._write=function(t,e,i){t.writeStruct(e,i)},st.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},st.prototype.writeTo=function(t){t.writeInt32(0,this.level)},st.prototype.readFrom=function(t){this.level=t.readInt32(0,!1,this.level)},m.a.UserLevelObject=st;var ut=function(){this.badgeName="",this.level=0,this.badgeIcon="",this.leftBadgeIcon=""};ut.prototype._clone=function(){return new m.a.FanCard},ut.prototype._write=function(t,e,i){t.writeStruct(e,i)},ut.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},ut.prototype.writeTo=function(t){t.writeString(0,this.badgeName),t.writeInt32(1,this.level),t.writeString(2,this.badgeIcon),t.writeString(3,this.leftBadgeIcon)},ut.prototype.readFrom=function(t){this.badgeName=t.readString(0,!1,this.badgeName),this.level=t.readInt32(1,!1,this.level),this.badgeIcon=t.readString(2,!1,this.badgeIcon),this.leftBadgeIcon=t.readString(3,!1,this.leftBadgeIcon)},m.a.FanCard=ut;var ct=function(){this.userId=0,this.udbUserId=0,this.nickName="",this.avatarUrl="",this.score=0,this.rank=0,this.countryCode="",this.liveStatus=0,this.contributors=new y.Taf.Vector(new m.a.SimpleUserRankInfo),this.rankStatus=0,this.gender=0,this.avatarBoxUrl="",this.dynamicAvatarBoxUrl="",this.userLevelInfo=new m.a.UserLevelObject,this.royalLevel=0,this.fanCard=new m.a.FanCard};ct.prototype._clone=function(){return new m.a.UserRankInfo},ct.prototype._write=function(t,e,i){t.writeStruct(e,i)},ct.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},ct.prototype.writeTo=function(t){t.writeInt64(0,this.userId),t.writeInt64(1,this.udbUserId),t.writeString(2,this.nickName),t.writeString(3,this.avatarUrl),t.writeDouble(4,this.score),t.writeInt64(5,this.rank),t.writeString(6,this.countryCode),t.writeInt32(7,this.liveStatus),t.writeVector(8,this.contributors),t.writeInt32(9,this.rankStatus),t.writeInt32(10,this.gender),t.writeString(11,this.avatarBoxUrl),t.writeString(12,this.dynamicAvatarBoxUrl),t.writeStruct(13,this.userLevelInfo),t.writeInt32(14,this.royalLevel),t.writeStruct(15,this.fanCard)},ct.prototype.readFrom=function(t){this.userId=t.readInt64(0,!1,this.userId),this.udbUserId=t.readInt64(1,!1,this.udbUserId),this.nickName=t.readString(2,!1,this.nickName),this.avatarUrl=t.readString(3,!1,this.avatarUrl),this.score=t.readDouble(4,!1,this.score),this.rank=t.readInt64(5,!1,this.rank),this.countryCode=t.readString(6,!1,this.countryCode),this.liveStatus=t.readInt32(7,!1,this.liveStatus),this.contributors=t.readVector(8,!1,this.contributors),this.rankStatus=t.readInt32(9,!1,this.rankStatus),this.gender=t.readInt32(10,!1,this.gender),this.avatarBoxUrl=t.readString(11,!1,this.avatarBoxUrl),this.dynamicAvatarBoxUrl=t.readString(12,!1,this.dynamicAvatarBoxUrl),this.userLevelInfo=t.readStruct(13,!1,this.userLevelInfo),this.royalLevel=t.readInt32(14,!1,this.royalLevel),this.fanCard=t.readStruct(15,!1,this.fanCard)},m.a.UserRankInfo=ct;var lt=function(){this.ranks=new y.Taf.Vector(new m.a.UserRankInfo),this.personalInfo=new m.a.UserRankInfo,this.summary=0};lt.prototype._clone=function(){return new m.a.CurrentLiveRankRsp},lt.prototype._write=function(t,e,i){t.writeStruct(e,i)},lt.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},lt.prototype.writeTo=function(t){t.writeVector(0,this.ranks),t.writeStruct(1,this.personalInfo),t.writeInt64(2,this.summary)},lt.prototype.readFrom=function(t){this.ranks=t.readVector(0,!1,this.ranks),this.personalInfo=t.readStruct(1,!1,this.personalInfo),this.summary=t.readInt64(2,!1,this.summary)},m.a.CurrentLiveRankRsp=lt;var ht=lt,dt=i("CbbO"),ft=function(){this.tMessage=new m.a.RichText,this.sGiftIcon="",this.iGiftNum=0,this.iConfessType=0};ft.prototype._clone=function(){return new m.a.ConfessionMessageNotice},ft.prototype._write=function(t,e,i){t.writeStruct(e,i)},ft.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},ft.prototype.writeTo=function(t){t.writeStruct(0,this.tMessage),t.writeString(1,this.sGiftIcon),t.writeInt32(2,this.iGiftNum),t.writeInt32(3,this.iConfessType)},ft.prototype.readFrom=function(t){this.tMessage=t.readStruct(0,!1,this.tMessage),this.sGiftIcon=t.readString(1,!1,this.sGiftIcon),this.iGiftNum=t.readInt32(2,!1,this.iGiftNum),this.iConfessType=t.readInt32(3,!1,this.iConfessType)},m.a.ConfessionMessageNotice=ft;var pt,mt=ft;function yt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var r=d()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l()(this,i)}}var vt=j.a.EUriMessageNotice,gt=j.a.EUriUserForbitMessage,_t=j.a.EUriVoiceRoomBan,St=j.a.EUriUserSetRoomManager,wt=j.a.EUriNewUserEnterRoom,bt=j.a.EUriBSLotteryStartV3,It=j.a.EUriBSLotteryEndV3,Tt=j.a.EUriBSLotteryWinnerV3,Pt=j.a.EUriBGWinnerNotice,Et=j.a.EUriAnchorLevelUp,kt=j.a.EUriFansLevelUp,Rt=j.a.EUriRoomMessageBanner,Ct=j.a.EUriSystemMessage,Ot=j.a.EUriSystemChatMessage,At=j.a.EUriVIPLevelChange,Lt=j.a.EUriNoRankEnterRoom,Nt=j.a.EUriThirdMessageNotice,Mt=j.a.EUriMarqueeNotice,Ut=j.a.EUriAnchorPKNotifyHighLightBanner,Dt=j.a.EUriRoomWelcomeNotice,Bt=j.a.EUriShareRoom,Ft=j.a.EUriActivitySign,xt=j.a.EUriMissionMessage,jt=j.a.EUriChatBotMessageNotice,Vt=j.a.EUriPayChatRichTextNewNotice,Gt=j.a.EUriCurrentLiveRank,Ht=j.a.EUriItemTallyWishNewSysNotify,Wt=j.a.EUriConfessSystemMessageNotice,qt=V.a.MsgSys,Kt=V.a.MsgSysSubscribe,Yt=function(t){u()(i,t);var e=yt(i);function i(){return a()(this,i),e.apply(this,arguments)}return i}(dt.a);e.A=new Yt({broadcasts:(pt={MessageNotice:[vt,f.a],UserForbidMessage:[gt,p.a],VoiceRoomBan:[_t,g],UserSetRoomManager:[St,_.a],UserEnterRoom:[wt,w],AnchorLevelUp:[Et,I],FansLevelUp:[kt,P],RoomMsgBannerNotice:[Rt,k],ExtendRoomMsgBannerNotice:[Ut,Z],SystemMessage:[Ct,C],SystemChatMessage:[Ot,tt],VIPLevelChange:[At,A],NoRankUserEnterRoomNotice:[Lt,N],ThirdMessageNotice:[Nt,U],MarqueeNotice:[Mt,B],RoomWelcomeNotice:[Dt,H],ShareRoomNotice:[Bt,q],ActivitySignNotice:[Ft,x],GroupUpShareRewardNotice:[xt,et.a],ChatBotMessageNotice:[jt,nt],PayChatRichTextNewNotice:[Vt,ot],CurrentLiveRank:[Gt,ht]},r()(pt,Ht,[Ht,at.a]),r()(pt,"ConfessionMessageNotice",[Wt,mt]),pt)})},JSQU:function(t,e,i){var n=i("YESw");t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},JTzB:function(t,e,i){var n=i("NykK"),r=i("ExA7");t.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}},JbBM:function(t,e,i){t.exports=i("4KFe")(211)},JduL:function(t,e,i){i("Xtr8")("getOwnPropertyNames",(function(){return i("e7yV").f}))},JmpY:function(t,e,i){var n=i("eUgh");t.exports=function(t,e){return n(e,(function(e){return t[e]}))}},Juji:function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},JwEE:function(t,e,i){"use strict";var n={LOGIN:"".concat("NiMO_IFRAME_LOGIN","_LOGIN")};e.a={login:function(t){i.e("df9c8").then(i.bind(null,"uOuc")).then((function(e){(0,e.default)({type:t,events:n})}))}}},K0CG:function(t,e,i){"use strict";i.d(e,"h",(function(){return a})),i.d(e,"f",(function(){return s})),i.d(e,"d",(function(){return u})),i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"e",(function(){return h})),i.d(e,"j",(function(){return d})),i.d(e,"c",(function(){return f})),i.d(e,"k",(function(){return p})),i.d(e,"g",(function(){return m})),i.d(e,"i",(function(){return y}));i("J4zp");var n=i("Wwog");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=(t/e).toFixed(1);return i}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return+"".concat(Math.floor(+"".concat(t/e,"e1")),"e-1")}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",i=/(-?\d+)(\d{3})/,n=null,r="",o="";if(isNaN(t))return t;if(!isFinite(t))return 0;if(o=t="number"===typeof t?"".concat(t):t,(n=t.indexOf("."))>-1&&(o=t.substring(0,n),r=t.substring(n+1)),"string"===typeof o)for(;i.test(o);)o=o.replace(i,"$1".concat(e,"$2"));return r&&(o+=".".concat(r)),o}var s=function(t){var e;return isNaN(t)?t:isFinite(t)?(e="number"!==typeof t?+t:t)<1e3?e:e<Math.pow(10,6)?(e=r(e,1e3),"".concat(a(e),"k")):e<Math.pow(10,9)?(e=r(e,Math.pow(10,6)),"".concat(a(e),"m")):(e=r(e,Math.pow(10,9)),"".concat(a(e),"b")):0},u=function(t){var e;return isNaN(t)?t:isFinite(t)?(e="number"!==typeof t?+t:t)<1e3?e:e<Math.pow(10,6)?(e=o(e,1e3),"".concat(a(e),"k")):e<Math.pow(10,9)?(e=o(e,Math.pow(10,6)),"".concat(a(e),"m")):(e=o(e,Math.pow(10,9)),"".concat(a(e),"b")):0},c=Object(n.a)((function(t){var e=l(t);return"#".concat(e.toString(16))||!1}));function l(t){return 16777215&t}var h=Object(n.a)((function(t){return t.replace(/#([a-zA-Z0-9]{2})([a-zA-Z0-9]*)/,"#$2$1")}));function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Number(100*t);return isNaN(i)?0:"".concat(i.toFixed(e),"%")}function f(t){return s(t)}function p(t){return"0".concat(t=t||0).substr(-2)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=Math.pow(10,e);return t>=i?"".concat(i-1,"+"):t}function y(t){var e,i="0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ".split(""),n=i.length,r=+t,o=[];do{r=(r-(e=r%n))/n,o.unshift(i[e])}while(r);return o.join("")}},K0xU:function(t,e,i){t.exports=i("4KFe")(2)},K4DB:function(t,e,i){var n=i("e+GP").default,r=i("T1e2");t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!==typeof e?r(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},KEvM:function(t,e,i){"use strict";i.d(e,"d",(function(){return d})),i.d(e,"b",(function(){return f})),i.d(e,"e",(function(){return m})),i.d(e,"a",(function(){return _})),i.d(e,"c",(function(){return w})),i.d(e,"f",(function(){return b}));var n=i("yXPU"),r=i.n(n),o=(i("ls82"),i("KFtC")),a=i("p1oI"),s=i("ODcA"),u=i("OFL0"),c=i.n(u),l=i("eSnk"),h="illegal lang registry",d={},f=function(t){return t===d},p=function(t){return t&&t.__esModule&&t.default?t.default:t},m=function(t){var e=p(t);return e&&e.loaders&&e.namespace?e:null},y=Object(o.k)(),v={},g=function(t,e){var i=!t||t<0?y:t;return c()(e,i)?i:"1033"},_=function(t,e){var i,n=m(t);if(!n)return null;var r=n.loaders,o=n.namespace,a=g(e,r);return null===(i=v[a])||void 0===i?void 0:i[o]},S=function(){var t=r()(regeneratorRuntime.mark((function t(e,i){var n,r,o,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m(e)){t.next=3;break}throw Error(h);case 3:if(o=r.loaders,a=r.namespace,s=g(i,o),!(u=null===(n=v[s])||void 0===n?void 0:n[a])){t.next=8;break}return t.abrupt("return",u);case 8:if("function"===typeof(c=o[s])){t.next=11;break}throw Error(h);case 11:return t.next=13,c();case 13:return l=t.sent,d=p(l),v[s]||(v[s]={}),v[s][a]=d,t.abrupt("return",d);case 18:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),w=Object(l.a)(S,1e3,5),b=function(){var t="_lang";return Object(a.a)(t)?Object(s.b)(t):null}},KFSm:function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},KFtC:function(t,e,i){"use strict";i.d(e,"R",(function(){return n.k})),i.d(e,"k",(function(){return n.e})),i.d(e,"Q",(function(){return n.j})),i.d(e,"O",(function(){return n.h})),i.d(e,"P",(function(){return n.i})),i.d(e,"g",(function(){return n.d})),i.d(e,"e",(function(){return n.b})),i.d(e,"f",(function(){return n.c})),i.d(e,"a",(function(){return n.a})),i.d(e,"S",(function(){return n.l})),i.d(e,"t",(function(){return n.f})),i.d(e,"H",(function(){return p})),i.d(e,"E",(function(){return g})),i.d(e,"I",(function(){return _})),i.d(e,"N",(function(){return S})),i.d(e,"u",(function(){return w})),i.d(e,"K",(function(){return b})),i.d(e,"V",(function(){return I})),i.d(e,"L",(function(){return T})),i.d(e,"J",(function(){return P})),i.d(e,"q",(function(){return E})),i.d(e,"w",(function(){return k})),i.d(e,"A",(function(){return R})),i.d(e,"T",(function(){return C})),i.d(e,"M",(function(){return O})),i.d(e,"s",(function(){return A})),i.d(e,"B",(function(){return L})),i.d(e,"x",(function(){return N})),i.d(e,"W",(function(){return M})),i.d(e,"G",(function(){return U})),i.d(e,"p",(function(){return D})),i.d(e,"o",(function(){return B})),i.d(e,"h",(function(){return F})),i.d(e,"z",(function(){return x})),i.d(e,"i",(function(){return j})),i.d(e,"v",(function(){return V})),i.d(e,"d",(function(){return G})),i.d(e,"m",(function(){return H})),i.d(e,"l",(function(){return m.a})),i.d(e,"j",(function(){return y.a})),i.d(e,"n",(function(){return W})),i.d(e,"F",(function(){return q})),i.d(e,"c",(function(){return K})),i.d(e,"r",(function(){return Y})),i.d(e,"y",(function(){return z})),i.d(e,"D",(function(){return J})),i.d(e,"C",(function(){return Q})),i.d(e,"b",(function(){return X})),i.d(e,"U",(function(){return Z}));i("pVnL"),i("Vd3H");var n=i("YZRX"),r=i("nimoua"),o=i.n(r),a=i("cOjp"),s=i("lpJ4"),u=i("66+j"),c=i("BYFT"),l=i("VdUd"),h=(i("9ZvN"),{}),d=i("J4zp"),f=i.n(d),p=function(t){var e,i=t||location.href,n=i.match(/^(?:(\w+):\/{2,3})?(?:(\w+):?(\w+)?@)?([^:/?#]+)(?::(\d+))?(\/[^?#]+)?(?:\?([^#]+))?(?:#(\w+))?/),r=n[4];e=(e=i.match(/((\?))((?!#).)*/g))?e[0]:"";var o=n[6]||"",a=i.match(/[^?#]*\//)[0],s=(i.match(/tps?:\/\/[^/]+(.+)/)||["",""])[1],u=s.match(/([^?#]*\/)?/)[0];return{href:i,protocol:n[1],username:n[2],password:n[3],host:r,port:n[5],query:e,params:function(){for(var t={},i=e.replace(/^\?/,"").split("&"),n=i.length,r=0;r<n;r+=1)if(i[r]){var o=i[r].split("="),a=f()(o,2),s=a[0],u=a[1];t[s]=u}return t}(),file:(o.match(/\/([^/?#]+)$/i)||["",""])[1],hash:n[8]?n[8].replace("#",""):"",dirname:a,path:u,pathname:o,relative:s,segments:u.replace(/^\/|\/$/g,"").split("/"),pathArray:o.replace(/^\/|\/$/g,"").split("/")}},m=i("5yvJ"),y=i("X8JN"),v=a.b.log,g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;if(window.isHomeSPA)s.a.push(t);else{var i=function(){location.href="//".concat("www.nimo.tv").concat(t)};"number"===typeof e&&e>0?setTimeout(i,e):i()}},_=function(){var t=0,e=0,i=Array.prototype.slice.apply(arguments),n=i.length;0===n&&(e=1),1===n&&(e=i[0]),2===n&&(t=i[0],e=i[1]);var r=(e*=1)-(t*=1)+1,o=Math.random(),a=t+Math.floor(o*r);return a},S=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=p(document.URL),n=null===i||void 0===i||null===(t=i.params)||void 0===t?void 0:t.activity;if(n&&2===+n){var r,o=e||(null===(r=window.G_roomBaseInfo)||void 0===r?void 0:r.roomId);if(o){var a="ss_source_anchor_link_roomId=".concat(encodeURI(o),";domain=.nimo.tv;path=/");document.cookie=a}}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-8,e=new Date,i=e.getTime()-6e4*e.getTimezoneOffset(),n=new Date(i+36e5*t);return n},b=function(t){var e=t||{},i=e.alias,n=e._extraParams,r=(t||{}).alise,o=E(t),a=(r=r||i)?"/".concat(r):"/live/".concat(o);return void 0!==n&&(a=Object(u.a)(a,n)),a},I=function(t){var e=t||{},i=e.alias,n=e._extraParams,r=(t||{}).alise,o=E(t),a="/user/".concat((r=r||i)||o);return void 0!==n&&(a=Object(u.a)(a,n)),a},T=function(t){var e=b(t);return"".concat(c.f).concat(e)},P=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.queue.forEach((function(t,i){try{t(e,i)}catch(n){console.error(n)}}));var n=o.a.isInNimoApp,r=o.a.isInNimoPc;if(v("触发roomEnter -> ",{isInNimoApp:n,data:e,opt:i}),n||r||Object(l.a)({from:(null===e||void 0===e?void 0:e._from)||"other_click"}),n){var a=null===e||void 0===e?void 0:e.anchorId,u=null===e||void 0===e?void 0:e.roomId;u&&a&&null!==i&&void 0!==i&&i.jumpToLiveRoom&&(null===i||void 0===i||i.jumpToLiveRoom({anchorId:a,roomId:u}))}else r&&h.openBrowser?h.openBrowser("".concat(c.f).concat(b(e))):null!==i&&void 0!==i&&i.openNewTab||window._IS_POPOUT_?window.open("".concat(c.f).concat(b(e))):window.isHomeSPA?(window.__clickRoomFrom=(null===e||void 0===e?void 0:e._from)||"other_click",window.__clickRoomTs=F(),s.a.push(b(e))):setTimeout((function(){location.href="".concat(c.f).concat(b(e))}),200)};P.queue=[],P.add=function(t){P.queue.push(t)};var E=function(t){return(null===t||void 0===t?void 0:t.roomId)||(null===t||void 0===t?void 0:t.roomID)||(null===t||void 0===t?void 0:t.roomid)||(null===t||void 0===t?void 0:t.id)},k=function(t){return["https://article.nimo.tv","https://web-article.nimostatic.tv"].indexOf(t)>-1},R=function(t){return["https://www.nimo.tv","https://m.nimo.tv","https://dashboard.nimo.tv","https://".concat("www.nimo.tv"),"https://".concat("m.nimo.tv"),"https://".concat("dashboard.nimo.tv")].indexOf(t)>-1},C=function(t){return t>1e3?"".concat(Math.round(t/100)/10,"k"):t},O=function(){var t;if(null===(t=window)||void 0===t||!t.scroll)return!1;window.scroll(0,0)},A=function(){return void 0!==window.pageYOffset?window.pageYOffset:document.body.scrollTop||document.documentElement.scrollTop},L=function(){var t=(p()||{}).pathArray;return"i"===(void 0===t?[]:t)[0]};function N(t){var e=new Date(t),i=e.getFullYear();return e.setHours(0,0,0,0),e.setFullYear(i+18),e<=new Date}var M=function(){var t=Array.from(arguments),e=window.open.apply(void 0,t);return e.location.href=decodeURIComponent(t[0]),e},U=function(t){if(!t||"number"!==typeof t)return null;var e="th";switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},D=function(){var t={_direct_:{type:"0"},nimo:{type:"0"},_other_:{type:"1"},google:{type:"2"},yahoo:{type:"2"},bing:{type:"2"},facebook:{type:"3"},youtube:{type:"3"},twitter:{type:"3"},"t.co":{type:"3"},instagram:{type:"3"}},e="_direct_",i="_other_";function n(e){var n=!1,o=!1;return Object.keys(t).forEach((function(i){var r="".concat(i),a=t[i];-1!==e.host.indexOf(r)&&!1===n&&(n=a,o=r)})),{value:n=n||t._other_,name:r(o=o||i)}}function r(t){return"t.co"===t?"twitter":t}var o=p().params,a=(null===o||void 0===o?void 0:o._ss_source)||(null===o||void 0===o?void 0:o._referrer)||!1;if(a){var s=n({host:"_".concat(a)}),u=s.value,c=s.name;return{type:u.type,name:c}}var l=document.referrer||"",h=[],d=i;if(l){var f=l.match(/(http|https):\/\/[\w\d-.]+/);if(f&&f[0]&&f[0].length>0){var m=n({host:"_".concat(f[0])});h=m.value,d=m.name}else h=t._direct_,d=e}else h=t._direct_,d=e;return{type:h.type,name:r(d)}},B=function(t){var e;for(e="";e.length<t;e+=Math.random().toString(36).substr(2));return e.substr(0,t)},F=function(){return window.performance&&"function"===typeof window.performance.now?Math.floor(performance.now()):Date.now()},x=function(){return self.frameElement&&"IFRAME"===self.frameElement.tagName};function j(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.length,r=0,o=0,a=e.reduce((function(t,e){return t+e}),0),s=Math.random()*a,u=e.findIndex((function(t,e){if(o+=t,s>=r&&s<o||e===n-1&&s===o)return!0;r+=t}));return u}function V(){return window.self!==window.top}function G(t){return decodeURIComponent(String(t).replace(/\+/g," "))}function H(){if(o.a.isInNimoStreamer)return"nimostreamer";var t=o.a.os.name.toLocaleLowerCase();return o.a.isInNimoApp?t:o.a.isWap?"wap":"web"}var W=function(){var t=function(){var t="";if(window.parent!==window)try{t=parent.location.href}catch(e){t=document.referrer}return t}();return new URL(t).host},q=function(){},K=function(t){var e=Number(t);return-1===[185,420,208,210,211,263].indexOf(e)},Y=function(t){switch(Number(t)){case 185:return"starshow";case 420:return"voice";case 208:case 210:case 211:case 263:return"others";default:return"game"}},z=function(t){return"function"===typeof t},J=function(t){return"undefined"===typeof t},Q=function(t){return"string"===typeof t},X=function(t){return!/^\d+$/.test(t)&&/[a-zA-Z]+/.test(t)},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t>=0&&t<=999?t:t>=1e3&&t<=999999?"".concat((t/1e3).toFixed(e),"K"):t>=1e6?"".concat((t/1e6).toFixed(e),"M"):t}},KKvs:function(t,e,i){"use strict";t.exports=i("uZc2")},KMkd:function(t,e){t.exports=function(){this.__data__=[],this.size=0}},KNwJ:function(t){t.exports=JSON.parse('{"CU":[1034],"DZ":[1025],"AF":[1025],"AR":[1034],"AE":[1025],"OM":[1025],"AZ":[1055,1049],"EG":[1025],"AG":[1033],"BS":[1033],"PK":[1000,1033],"PY":[1034],"PS":[1025],"BH":[1025],"PA":[1034],"BR":[1046],"BO":[1034],"BZ":[1033,1034],"RU":[1049],"EC":[1034],"ER":[1025],"PH":[1033,1124],"CO":[1034],"CR":[1034],"GD":[1033],"HT":[1033],"HN":[1034],"DJ":[1025],"CA":[1033],"KH":[1000],"QA":[1025],"KM":[1025],"KW":[1025],"LA":[1000],"LB":[1025],"LY":[1025],"MY":[1086,1057],"MR":[1025],"US":[1033,1034],"BD":[1000],"PE":[1034],"MM":[1000],"MA":[1025],"MX":[1034],"NI":[1034],"JP":[1041],"SV":[1034,1033],"SA":[1025],"SD":[1025],"SO":[1025],"TH":[1054],"TT":[1033],"ABC":[1000,1057,1066,1054],"TN":[1025],"TR":[1055],"GT":[1034],"VE":[1034],"BN":[1086,1033],"UY":[1034],"ES":[1034],"SG":[1033,1028],"SY":[1025],"JM":[1033],"YE":[1025],"IQ":[1025],"IR":[1025],"IL":[1025],"IN":[1081,1033],"ID":[1057],"JO":[1025],"VN":[1066],"TD":[1025],"CL":[1034],"CN":[1028],"MO":[1028],"TW":[1028],"HK":[1028]}')},KTY0:function(t,e,i){"use strict";i.d(e,"c",(function(){return d})),i.d(e,"a",(function(){return f}));var n=i("3Yl8"),r=i("KkFV"),o=i("Kw0i"),a=i("qSuo"),s=i("I+st"),u=i("GkpK"),c=i("Xd0b");i.d(e,"b",(function(){return c.a}));var l=n.default.getUserInfo();r.a.get("version"),r.a.get("bizToken"),r.a.get("udbUserId");function h(t){var e=t||window.G_roomBaseInfo,i=(l.udbUserId||(l=n.default.getUserInfo()),l),r=i.udbUserId;return{bizToken:i.bizToken,udbUserId:r,version:i.version,anchorID:null===e||void 0===e?void 0:e.auId,fanID:r||"",roomID:null===e||void 0===e?void 0:e.roomId,udbDeviceType:"WEB",requestSource:"WEB"}}var d={SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unSubscribe"},f={LOGIN_EXPIRE:501,OPER_TOO_FREQUENT:16003,REPEAT_OPER:16004,BEYOND_LIMIT:16020};e.d={subscribe:function(t,e){var i=h(e),n=i.anchorID,r=i.fanID,u=function(t){o.b.emit(o.a.FOLLOW,{anchorID:n,fanID:r,sta:1,type:"subscribe",relationship:t})};return a.a.followAnchorV2(i).then((function(e){u(null===e||void 0===e?void 0:e.relationship),t&&"string"===typeof t&&s.a.report({eid:"follow_success",eid_desc:"关注_成功",prop:JSON.stringify({from:t,style_:Object(s.b)()})})}),(function(t){if((t||{}).code!==f.REPEAT_OPER)throw t;u()}))},unsubscribe:function(t){var e=h(t),i=e.anchorID,n=e.fanID;return a.a.unFollowAnchor(e).catch((function(t){if((t||{}).code!==f.REPEAT_OPER)throw t})).then((function(){o.b.emit(o.a.UNFOLLOW,{anchorID:i,fanID:n,sta:0,type:"unsubscribe"})}))},followStatusAndCount:function(t){return u.a.fetchFollowStatusAndCount(h(t))},getFanCount:function(t){return u.a.fetchFanCount(t)}}},KfNM:function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},Kh3L:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="nimo-chat-room n-fx-bn n-fx-col n-as-of-hidden n-fx1 bc1" style="height: 100%;">\n  <div class="n-fx1 n-as-mrgh n-as-mrgt">\n    <div class="n-as-mrgb n-sk n-sk-t12"></div>\n    <div class="n-as-mrgb n-sk n-sk-t12"></div>\n    <div class="n-as-mrgb n-as-w50 n-sk n-sk-t12"></div>\n    <div class="n-as-mrgb n-as-w40 n-sk n-sk-t12"></div>\n  </div>\n  <div class="n-fx0 n-fx-bc n-as-pad">\n    <div class="n-sk n-sk-btn-lg n-as-rnd n-as-w100"></div>\n  </div>\n</div>\n';return __p}},"Khc/":function(t,e,i){"use strict";i.d(e,"h",(function(){return U})),i.d(e,"g",(function(){return D})),i.d(e,"d",(function(){return F})),i.d(e,"j",(function(){return x})),i.d(e,"e",(function(){return j})),i.d(e,"c",(function(){return A})),i.d(e,"a",(function(){return V})),i.d(e,"i",(function(){return G})),i.d(e,"f",(function(){return H})),i.d(e,"b",(function(){return W}));var n=i("pVnL"),r=i.n(n),o=i("lSNA"),a=i.n(o),s=i("q1tI"),u=i.n(s),c=i("tbCU"),l=i("/MKj"),h=i("NQ3n"),d=i("uuUH"),f=i("5BGN");i("I5cv");var p,m=i("lwsE"),y=i.n(m),v=i("W8MJ"),g=i.n(v),_=i("PJYZ"),S=i.n(_),w=i("7W2i"),b=i.n(w),I=i("a1gu"),T=i.n(I),P=i("Nsbk"),E=i.n(P),k=i("x13s"),R=i("4L88");function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=E()(t);if(e){var r=E()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return T()(this,i)}}var O=(k.d||{}).kMRC_OK,A=Object(l.c)((function(t){return{roomInfo:t.home.room.roomInfo}}))(p=function(t){b()(i,t);var e=C(i);function i(t){var n;return y()(this,i),(n=e.call(this,t)).state={visible:!1,currBox:{}},n.handleBGBroadcastData=n.handleBGBroadcastData.bind(S()(n)),n}return g()(i,[{key:"componentDidMount",value:function(){this.queryBoxGiftEvent(),R.a.on("BGBroadcastData",this.handleBGBroadcastData)}},{key:"componentWillUnmount",value:function(){this.unmounted=!0,R.a.off("BGBroadcastData",this.handleBGBroadcastData)}},{key:"queryBoxGiftEvent",value:function(){var t=this,e=(this.props.roomInfo||{}).roomId;return e?k.e.queryBoxGiftEvent(e).then((function(e){t.unmounted||(e||{}).iCode===O&&t.showBoxGift(e)}),(function(){})):Promise.resolve()}},{key:"handleBGBroadcastData",value:function(t){var e=t||{},i=e.eBoardcastType,n=e.lRoomId;i===k.a.BGBegin&&this._roomIdGuard(n)&&this.showBoxGift(t)}},{key:"_roomIdGuard",value:function(t){return+t===+(this.props.roomInfo||{}).roomId}},{key:"showBoxGift",value:function(t){this.setState({currBox:t,visible:!0})}},{key:"render",value:function(){var t=this.props.children,e=this.state,i=e.currBox,n=e.visible;return s.cloneElement(s.Children.only(t),{canLoad:n,dataSource:i})}}]),i}(s.PureComponent))||p;function L(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?L(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var M=function(){return Promise.all([i.e("d040e"),i.e("dfc9b")]).then(i.bind(null,"2dYX"))},U=Object(c.a)((function(){return M().then((function(t){var e=t.GiftBanner;return{default:Object(l.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home,roomLangPkg:t.home.common.langPkg.room,userInfo:t.home.room.userInfo}}))(e)}}))}),{loading:!1}),D=Object(c.a)((function(){return M().then((function(t){var e=t.GiftAnimation;return{default:Object(l.c)((function(t){return{langPkg:t.home.common.langPkg.home,userInfo:t.home.room.userInfo}}))(e)}}))}),{loading:!1}),B={},F=Object(c.a)((function(){return Object(h.a)().then((function(t){var e=t.default;return{default:Object(l.c)((function(t){var e,i=t.common.langPkg.base,n=null!==(e=t.home)&&void 0!==e?e:t;return{langPkg:i||B,roomInfo:n.room.roomInfo,msgWhiteList:n.room.msgWhiteList,wearBadgeInfo:n.room.wearBadgeInfo,currFansBarrage:n.room.currFansBarrage,userInfo:n.room.userInfo,payChatList:n.room.payChatList}}))(Object(d.b)(e))}}))}),{loading:s.createElement("div",{className:"n-as-pad"},s.createElement("div",{className:"n-sk n-sk-btn-lg n-as-rnd n-as-w100"}))}),x=Object(c.a)((function(){return Object(h.a)().then((function(t){var e=t.LoginGuide,i=(0,t.LoginGuideReport)(e),n=function(t){var e=Object(l.f)((function(t){return(t.home||t).room.roomInfo})),n=Object(l.f)((function(t){return t.common.langPkg.base})),o=Object(l.e)(),a=n.login,u=N(N({},n.loginGuide),{},{login:a});return s.createElement(i,r()({},t,{dispatch:o,langPkg:u,roomInfo:e}))};return{default:s.memo(n)}}))}),{loading:!1}),j=Object(c.a)((function(){return i.e("235c9").then(i.bind(null,"3cT+"))}),{loading:!1}),V=(Object(c.a)((function(){return i.e("8336f").then(i.bind(null,"d4kt"))}),{loading:!1}),Object(c.a)((function(){return i.e("10ed6").then(i.bind(null,"r6qB")).then((function(t){var e=t.BoxGift,i=t.BoxGiftReport;return{default:Object(l.c)((function(t){return{langPkg:t.home.common.langPkg.home.boxGift,roomInfo:t.home.room.roomInfo}}))(Object(d.b)(i(e)))}}))}),{loading:!1})),G=Object(c.a)((function(){return i.e("a8cd2").then(i.bind(null,"dFw8"))}),{loading:function(){var t=Object(s.useMemo)((function(){return{height:Object(f.a)(),minHeight:100}}),[]);return u.a.createElement("div",{className:"n-as-rel bc17 n-as-mrg n-as-pad-xs n-as-rnd",style:t})}}),H=Object(c.a)((function(){return i.e("a8f44").then(i.bind(null,"uR3N"))}),{loading:!1}),W=Object(c.a)((function(){return i.e("69316").then(i.bind(null,"sWPC")).then((function(t){var e=t.default;return{default:Object(l.c)((function(t){var e,i,n,r,o,a;return{langPkg:null===t||void 0===t||null===(e=t.home)||void 0===e||null===(i=e.common)||void 0===i||null===(n=i.langPkg)||void 0===n||null===(r=n.home)||void 0===r?void 0:r.boxGift,roomInfo:null===t||void 0===t||null===(o=t.home)||void 0===o||null===(a=o.room)||void 0===a?void 0:a.roomInfo}}))(e)}}))}),{loading:!1})},"Kj+h":function(t,e,i){"use strict";i.d(e,"a",(function(){return V}));var n=i("BUsv"),r=(i("I5cv"),i("cDf5")),o=i.n(r),a=i("RIqP"),s=i.n(a),u=i("lwsE"),c=i.n(u),l=i("W8MJ"),h=i.n(l),d=i("PJYZ"),f=i.n(d),p=i("7W2i"),m=i.n(p),y=i("a1gu"),v=i.n(y),g=i("Nsbk"),_=i.n(g),S=i("lSNA"),w=i.n(S),b=i("W7YU"),I=i("ZMLX"),T=(i("EoCF"),i("leMB"),function(){this.tUser=new I.a.UserId,this.eOp=0,this.lPid=0,this.lRoomId=0,this.bWatchVideo=!1,this.sTraceSource=""});T.prototype._clone=function(){return new I.a.UserEventReq},T.prototype._write=function(t,e,i){t.writeStruct(e,i)},T.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},T.prototype.writeTo=function(t){t.writeStruct(0,this.tUser),t.writeInt32(1,this.eOp),t.writeInt64(2,this.lPid),t.writeInt64(3,this.lRoomId),t.writeBoolean(4,this.bWatchVideo),t.writeString(5,this.sTraceSource)},T.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser),this.eOp=t.readInt32(1,!1,this.eOp),this.lPid=t.readInt64(2,!1,this.lPid),this.lRoomId=t.readInt64(3,!1,this.lRoomId),this.bWatchVideo=t.readBoolean(4,!1,this.bWatchVideo),this.sTraceSource=t.readString(5,!1,this.sTraceSource)},I.a.UserEventReq=T;var P=T,E=function(){this.iCode=0,this.iUserHeartBeatInterval=20};E.prototype._clone=function(){return new I.a.UserEventRsp},E.prototype._write=function(t,e,i){t.writeStruct(e,i)},E.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},E.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeInt32(1,this.iUserHeartBeatInterval)},E.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.iUserHeartBeatInterval=t.readInt32(1,!1,this.iUserHeartBeatInterval)},I.a.UserEventRsp=E;var k=E,R=function(){this.tUser=new I.a.UserId,this.lPid=0,this.lRoomId=0,this.bWatchVideo=!1};R.prototype._clone=function(){return new I.a.UserHeartBeatReq},R.prototype._write=function(t,e,i){t.writeStruct(e,i)},R.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},R.prototype.writeTo=function(t){t.writeStruct(0,this.tUser),t.writeInt64(1,this.lPid),t.writeInt64(2,this.lRoomId),t.writeBoolean(3,this.bWatchVideo)},R.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser),this.lPid=t.readInt64(1,!1,this.lPid),this.lRoomId=t.readInt64(2,!1,this.lRoomId),this.bWatchVideo=t.readBoolean(3,!1,this.bWatchVideo)},I.a.UserHeartBeatReq=R;var C=R,O=function(){this.iCode=0,this.iTimestamp=0};O.prototype._clone=function(){return new I.a.UserHeartBeatRsp},O.prototype._write=function(t,e,i){t.writeStruct(e,i)},O.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},O.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeInt32(1,this.iTimestamp)},O.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.iTimestamp=t.readInt32(1,!1,this.iTimestamp)},I.a.UserHeartBeatRsp=O;var A=O,L={OP_USER_IN:1,OP_USER_OUT:2};I.a.EUserOperation=L;var N=L,M=i("WQyD"),U=i("iU4o"),D=i("jKdo"),B=i("TrR6");function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_()(t);if(e){var r=_()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return v()(this,i)}}var x=i("BYFT").a?"web":"wap";function j(t){var e=[],i=t||{},n=i.roomId,r=i.anchorLang,o=i.gameId,a=i.anchorCountryCode,s=b.i.user||{},u=s.lang,c=s.sCountry,l=n||b.i.liveRoom.roomId,h=r||b.i.liveRoom.anchorLang,d=o||b.i.liveRoom.gameId,f=a||b.i.liveRoom.anchorCountryCode;return l&&(e.push("nimo:all"),e.push("nimo:".concat(B.a.kRoom,"_").concat(l)),e.push("nimo:".concat(B.a.kRoomPlat,"_").concat(l,"_").concat(x)),c&&e.push("nimo:".concat(B.a.kRoom,"_").concat(l,"_").concat(c,"_").concat(x))),c&&e.push("nimo:".concat(B.a.kCountry,"_").concat(c)),e.push("nimo:".concat(B.a.kPlatform,"_").concat(x)),u&&(e.push("nimo:".concat(B.a.kLang,"_").concat(u)),e.push("nimo:".concat(B.a.kLangPlat,"_").concat(u,"_").concat(x))),u&&c&&(e.push("nimo:".concat(B.a.kCountryLang,"_").concat(c,"_").concat(u)),e.push("nimo:".concat(B.a.kCountryLangPlat,"_").concat(c,"_").concat(u,"_").concat(x))),h&&e.push("nimo:".concat(B.a.kRoomLang,"_").concat(h)),d&&h&&e.push("nimo:".concat(B.a.kRoomTypeLang,"_").concat(d,"_").concat(h)),d&&e.push("nimo:".concat(B.a.kRoomType,"_").concat(d)),f&&e.push("nimo:".concat(B.a.kAnchorCountry,"_").concat(f)),f&&d&&e.push("nimo:".concat(B.a.kAnchorCountryType,"_").concat(f,"_").concat(d)),l&&u&&(e.push("nimo:".concat(B.a.kRoomUserLang,"_").concat(l,"_").concat(u)),c&&e.push("nimo:".concat(B.a.kRoomCountryLangPlat,"_").concat(l,"_").concat(c,"_").concat(u,"_").concat(x))),e}var V=new(function(t){m()(i,t);var e=F(i);function i(t){var n;return c()(this,i),n=e.call(this,t),w()(f()(n),"heartbeatInterval",2e4),w()(f()(n),"heartbeatTimer",null),w()(f()(n),"socket",null),w()(f()(n),"broadcastWithUser",!1),w()(f()(n),"registerHandler",!1),w()(f()(n),"_groups",[]),w()(f()(n),"_unsubTopicList",[]),n.heartbeatInterval=t&&t.heartbeatInterval||n.heartbeatInterval,n.handleSubRsp=n.handleSubRsp.bind(f()(n)),n.handleUnsubRsp=n.handleUnsubRsp.bind(f()(n)),n.handleHeartBeatRsp=n.handleHeartBeatRsp.bind(f()(n)),n.handleUserEventRsp=n.handleUserEventRsp.bind(f()(n)),n}return h()(i,[{key:"dispose",value:function(){this.close(),this.heartbeatInterval=null,this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.socket.offGroup(!0,this.handleSubRsp),this.socket.offGroup(!1,this.handleUnsubRsp),this.socket=null}},{key:"handleSubRsp",value:function(t){D.a.vip("[channel] The topics have been subscribed",t)}},{key:"handleUnsubRsp",value:function(t){D.a.vip("[channel] The topics have been unsubscribed",t)}},{key:"handleHeartBeatRsp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.response;D.a.log("[channel] UserHeartbeat",e)}},{key:"handleUserEventRsp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.response;if(e){var i=e.iUserHeartBeatInterval;("number"!==typeof i||isNaN(i)||i<0)&&(i=20),this.heartbeatInterval=1e3*i}D.a.info("[channel] userEvent Rsp",e)}},{key:"open",value:function(t,e){var i=b.i.channel,n=b.i.liveRoom,r=i.roomId,o=parseInt(n.roomId,10);this.socket=t,this.registerHandler||(t.onGroup(!0,this.handleSubRsp),t.onGroup(!1,this.handleUnsubRsp),this.registerHandler=!0),i.isOpened("signal")?0===r||+r!==+o&&0!==o?this.reOpen():e&&this.subTopic():this.doOpen()}},{key:"doOpen",value:function(){if(b.i.user.isReady()){if(!b.i.liveRoom.isReady()&&!this.broadcastWithUser)return b.i.channel.close(),void D.a.warning("[channel] close channel when runtime liveRoom is not ready.");this.updateRuntimeChannel(),this.subTopic(),this.subTopicList(),this.heartbeat(),D.a.log("[channel] do open channel")}else U.a.user.add(this.open)}},{key:"reOpen",value:function(){this.updateRuntimeChannel(),D.a.log("[channel] redo open channel")}},{key:"close",value:function(){b.i.channel.close(),this.unsubTopic(),D.a.vip("[channel] close channel")}},{key:"subTopic",value:function(t){if(this.socket){var e=j(t);this._groups=e,this.socket.sendGroup(!0,e),(null!==t&&void 0!==t&&t.roomId||b.i.liveRoom.roomId)&&this.sendUserEvent(t,!0),D.a.info("[channel] subscribe topic",e)}}},{key:"subTopicList",value:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((null===i||void 0===i?void 0:i.length)>0||(null===(t=this._unsubTopicList)||void 0===t?void 0:t.length)>0)if(null!==(e=this.socket)&&void 0!==e&&e.socket){var n=i.concat(this._unsubTopicList).map((function(t){return"nimo:".concat(["".concat(null===t||void 0===t?void 0:t.id)].concat(s()((null===t||void 0===t?void 0:t.subId)||[])).join("_"))}));this._groups.concat(n),this.socket.sendGroup(!0,n),this._unsubTopicList=[],D.a.info("[channel] subscribe topic list",n)}else this._unsubTopicList=this._unsubTopicList.concat(i)}},{key:"unsubTopic",value:function(t){if(this.socket){var e=j(t);this.socket.sendGroup(!1,e),(null!==t&&void 0!==t&&t.roomId||b.i.liveRoom.roomId)&&this.sendUserEvent(t,!1),D.a.info("[channel] unsubscribe topic",e)}}},{key:"unsubTopicList",value:function(t){if(this.socket){var e=t.map((function(t){return"nimo:".concat(["".concat(null===t||void 0===t?void 0:t.id)].concat(s()((null===t||void 0===t?void 0:t.subId)||[])).join("_"))}));this.socket.sendGroup(!1,e),D.a.info("[channel] unsubscribe topic list",e)}}},{key:"heartbeat",value:function(t){var e=new C,i=t||{},n=i.roomId,r=void 0===n?b.i.liveRoom.roomId:n,o=i.auId,a=void 0===o?b.i.liveRoom.auId:o;Object(b.j)(e.tUser),r&&(e.lRoomId=r,e.bWatchVideo=!0),a&&(e.lPid=a),this.send("OnUserHeartBeat",e,A).then(this.handleHeartBeatRsp),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.heartbeatInterval>0&&(this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),this.heartbeatInterval))}},{key:"sendUserEvent",value:function(t,e){var i=new P,n=t||{},r=n.roomId,o=void 0===r?b.i.liveRoom.roomId:r,a=n.auId,s=void 0===a?b.i.liveRoom.auId:a,u=n.traceSource,c=void 0===u?b.i.liveRoom.traceSource:u;Object(b.j)(i.tUser),o&&(i.lRoomId=o,i.bWatchVideo=!0),e&&(i.sTraceSource=c||"ignore"),b.i.liveRoom.traceSource="",s&&(i.lPid=s),i.eOp=e?N.OP_USER_IN:N.OP_USER_OUT,this.send("OnUserEvent",i,k).then(this.handleUserEventRsp),D.a.info("[channel] userEvent Req",i)}},{key:"send",value:function(t,e,i){if(this.socket)return this.socket.send(t,e,i);throw new Error("this.socket is typeof ".concat(o()(this.socket),"."))}},{key:"updateRuntimeChannel",value:function(){var t=parseInt(b.i.liveRoom.roomId,10);b.i.channel.open({roomId:t,type:"signal"}),D.a.vip("[channel] Runtime Channel updated",b.i.channel)}},{key:"groups",get:function(){return this._groups}}]),i}(M.a)),G=i("J4zp"),H=i.n(G),W=i("QILm"),q=i.n(W),K=i("zvxk"),Y=i("f3Pk"),z=i("ntvm"),J=["requestId"];function Q(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(i),!0).forEach((function(e){w()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Z=0,$=1,tt=2,et=3,it=function(){function t(e){c()(this,t),w()(this,"signal",null),w()(this,"queue",new b.a),w()(this,"rejectPools",Object.create(null)),w()(this,"reconnectCount",0),w()(this,"isReconnection",!1),w()(this,"timer",null),w()(this,"readyState",Z),w()(this,"timeout",2e4),w()(this,"_bulkRejectTimer",null),w()(this,"_bulkRejectInterval",1e4),this.props=e||{},this.connected=!1,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),this.handleError=this.handleError.bind(this),this.handleMessage=this.handleMessage.bind(this),this._handleSocketStateChange=this._handleSocketStateChange.bind(this),"number"===typeof e.timeout&&(this.timeout=e.timeout)}return h()(t,[{key:"close",value:function(){this.signal&&(this.signal.off(K.a.WEBSOCKET_DOLAUNCH,this.handleOpen),this.signal.off(K.a.WS_CONNET_STATE,this._handleSocketStateChange),Object(z.c)(this.handleMessage),this.readyState=et)}},{key:"handleOpen",value:function(t){var e=this.props.onOpen;this.readyState=$,D.a.vip("[signal] signal opened!"),e(t,this.isReconnection,this),this.connected=!0,this.queue.runAndClear(),this.clearTimer()}},{key:"handleClose",value:function(t){var e=this.props.onClose;this.readyState=tt,this.isReconnection=!1,D.a.error("[signal] signal closed."),e(t,this),this.reconnect()}},{key:"handleError",value:function(t){var e=this.props.onError;D.a.error("[signal] signal error."),e(t),this.reconnect()}},{key:"handleMessage",value:function(t){(0,this.props.onMessage)({data:t})}},{key:"createWebSocket",value:function(){var t=this;Object(K.b)({noConnect:0}).then((function(e){t.signal=e,e.wsLaunch?t.handleOpen():e.on(K.a.WEBSOCKET_DOLAUNCH,t.handleOpen),e.on(K.a.WS_CONNET_STATE,t._handleSocketStateChange),Object(z.a)(e),Object(z.e)(t.handleMessage)}))}},{key:"_handleSocketStateChange",value:function(t){var e=t.connected,i=t.type,n=t.code,r=t.reason;"close"===i?(this.connected=!1,this.handleClose({reason:r,code:n,connected:e})):"error"===i&&(this.connected=!1,this.handleError({type:n,reason:r,connected:e}))}},{key:"sendRegisterGroup",value:function(t,e){this.connected?this.signal.sendRegisterGroup(t,e):this.queue.add(this.sendRegisterGroup,arguments,this)}},{key:"sendUnRegisterGroup",value:function(t){this.connected?this.signal.sendUnRegisterGroup(t):this.queue.add(this.sendUnRegisterGroup,arguments,this)}},{key:"onRegisterGroup",value:function(t){this.connected?this.signal.on(K.a.WS_REGISTER_GROUP_RSP,t):this.queue.add(this.onRegisterGroup,arguments,this)}},{key:"onUnRegisterGroup",value:function(t){this.connected?this.signal.on(K.a.WS_UNREGISTER_GROUP_RSP,t):this.queue.add(this.onUnRegisterGroup,arguments,this)}},{key:"offRegisterGroup",value:function(t){this.connected?this.signal.off(K.a.WS_REGISTER_GROUP_RSP,t):this.queue.add(this.offRegisterGroup,arguments,this)}},{key:"offUnRegisterGroup",value:function(t){this.connected?this.signal.off(K.a.WS_UNREGISTER_GROUP_RSP,t):this.queue.add(this.offUnRegisterGroup,arguments,this)}},{key:"onUriNotice",value:function(t){this.connected?this.signal.on(K.a.WS_URI_NOTICE,t):this.queue.add(this.onUriNotice,arguments,this)}},{key:"offUriNotice",value:function(t){this.connected?this.signal.off(K.a.WS_URI_NOTICE,t):this.queue.add(this.offUriNotice,arguments,this)}},{key:"connect",value:function(t){this.props=X(X({},this.props),{},{wsServer:t}),D.a.warn("[signal] signal connecting..."),this.isReconnection=!1,this.open()}},{key:"reconnect",value:function(){var t=this,e=this.props.reconnectInterval,i=void 0===e?2e3:e;this.isReconnected()||this.isReconnecting()||(D.a.log("[signal] signal reconnecting..."),this.isReconnection=!0,this.open(),this.reconnectCount+=1,this.timer=setTimeout((function(){t.clearTimer(),t.reconnect()}),i))}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"open",value:function(){this.signal?this.signal.reconnetWS():this.createWebSocket()}},{key:"send",value:function(t,e,i,n){var r=arguments,o=this;return new Promise((function(a,u){if(o.isOpened()){o._startBulkReject();var c="".concat(Date.now(),".").concat(e);o.rejectPools[c]=u,o.signal.registerWup(e,n),o.signal.sendWup(t,e,i,(function(t){var n=t||{},r=(n.requestId,q()(n,J));delete o.rejectPools[c],a({type:e,data:i,response:r})}))}else{o.queue.add((function(t,e,i){o.send.apply(o,s()(i)).then((function(e){t(e)})).catch((function(t){e(t)}))}),[a,u,r],o),o.reconnect()}})).catch((function(){}))}},{key:"isOpening",value:function(){return Boolean(this.readyState===Z)}},{key:"isOpened",value:function(){return Boolean(this.readyState===$)}},{key:"isClosing",value:function(){return Boolean(this.readyState===tt)}},{key:"isClosed",value:function(){return Boolean(this.readyState===et)}},{key:"isReconnected",value:function(){return this.isOpening()||this.isOpened()}},{key:"isReconnecting",value:function(){return!!this.timer}},{key:"_startBulkReject",value:function(){var t=this;this._bulkRejectTimer||(this._bulkRejectTimer=setTimeout((function(){t._bulkRejectTimer=null;var e=Object.entries(t.rejectPools);if(e.length){var i=Date.now();e.forEach((function(e){var n=H()(e,2),r=n[0],o=n[1];i-parseFloat(r)>=t.timeout&&(D.a.error("request timeout"),o(Object(Y.createError)("Error occurred with timeout")),delete t.rejectPools[r])})),t._startBulkReject()}}),this._bulkRejectInterval))}},{key:"_stopBulkReject",value:function(){this._bulkRejectTimer&&(clearTimeout(this._bulkRejectTimer),this._bulkRejectTimer=null)}}]),t}();i("WgMg"),i("RA07"),e.b=new n.b({channel:V,socket:function(t){return new it(t)}})},KkFV:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a}));var n="nimo.tv",r={get:function(t){var e=document.cookie.match(new RegExp("(^| )".concat(t,"=([^;]*)(;|$)")));return null!=e?decodeURI(e[2]):null},set:function(t,e,i,r){var o=null!==i&&void 0!==i?i:30,a=r||n,s=0;if(o){var u=new Date;u.setTime(u.getTime()+864e5*o),s=u.toGMTString()}var c="expires=".concat(s),l="".concat(t,"=").concat(encodeURI(e),";domain=.").concat(a,";path=/;").concat(c);document.cookie=l},remove:function(t,e){var i=e||n,r=new Date;r.setTime(r.getTime()-1);var o=this.get(t);null!=o&&(document.cookie="".concat(t,"=").concat(o,";domain=.").concat(i,";path=/;expires=").concat(r.toGMTString()))},del:function(){r.remove.apply(r,arguments)},clear:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e+=1){var i,n,r=null===(n=(null===(i=t[e])||void 0===i?void 0:i.split("="))[0])||void 0===n?void 0:n.trim();this.remove(r),this.remove(r,window.location.host)}}},o={get:function(t){try{return window.localStorage.getItem(t.toLowerCase())||null}catch(e){console.log(e)}return null},set:function(t,e){try{window.localStorage.setItem(t.toLowerCase(),e)}catch(i){console.log(i)}},remove:function(t){try{window.localStorage.removeItem(t.toLowerCase())}catch(e){console.log(e)}},has:function(t){try{return window.localStorage.hasOwnProperty(t.toLowerCase())}catch(e){console.log(e)}return!1},clear:function(){try{window.localStorage.clear()}catch(t){console.log(t)}}},a={get:function(t){try{return window.sessionStorage.getItem(t.toLowerCase())||null}catch(e){console.log(e)}return null},set:function(t,e){try{window.sessionStorage.setItem(t.toLowerCase(),e)}catch(i){console.log(i)}},remove:function(t){try{window.sessionStorage.removeItem(t.toLowerCase())}catch(e){console.log(e)}},clear:function(){try{window.sessionStorage.clear()}catch(t){console.log(t)}}}},Kuth:function(t,e,i){t.exports=i("4KFe")(59)},Kw0i:function(t,e,i){"use strict";i.d(e,"b",(function(){return b})),i.d(e,"a",(function(){return S}));i("I5cv");var n=i("RIqP"),r=i.n(n),o=i("lwsE"),a=i.n(o),s=i("W8MJ"),u=i.n(s),c=i("iWIM"),l=i.n(c),h=i("7W2i"),d=i.n(h),f=i("a1gu"),p=i.n(f),m=i("Nsbk"),y=i.n(m),v=i("+qE3"),g=i.n(v);function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=y()(t);if(e){var r=y()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p()(this,i)}}var S={PLAYER_TECH_LOADED:"player.tech.ready",PLAYER_LOAD_TIMEOUT:"player.load.timeout",PLAYER_LOAD_ERROR:"player.load.error",PLAYER_STAT_INFO:"player.stat.info",PLAYER_STREAM_CHANGE:"player.stream.change",PLAYER_CHANGE_LOCK_STATE:"player.change.lock.state",CLIPBOARD_COPY:"clipboard.copy",ROOMCHAT_RECV:"taf.roomchat.recv",ROOMCHAT_SEND:"taf.roomchat.send",GIFT_LIST_RECV:"taf.gift.recv",LIVE_ROOM_SHARE:"live.room.share",LIVE_SHARED:"live.shared",LIVE_STREAM_STOP:"live.stream.stop",LIVE_STREAM_NEW:"live.stream.new",PLAYBACK_NOTIFY:"playback.notify",THEME_CHANGE:"theme.change",SIDEBAR_LOCATION:"sidebar.location",PROFILE_LANG_CHANGE:"profilelang.change",PLAYER_FULLSCREEN:"palyer.fullscreen",PLAYER_EXIT_FULLSCREEN:"palyer.exit_fullscreen",FOLLOW:"follow",UNFOLLOW:"unfollow",FANS_GROUP_CONSUME_FANS_GIFT:"fansGroup.consumeFansGift",FANS_GROUP_BADGE_LIST_UPDATE:"fansGroup.badgeListUpdate",ROOMCHAT_TOP_GUIDE_MSG:"taf.roomchat.topGuideMsg",TEXT_BULLETSCREEN_SETTINGS:"text.bulletscreen.settings",LIVE_INTERACTIVE_POP_OUT:"live.interactive.pop.out",ROOM_SEND_MSG_SUCCEED:"room.send.msg.succeed",ROOM_SEND_GIFT_STATUS:"room.send.gift.status",TAF_MESSAGE_RECEIVE:"taf.message.receive",BSLOTTERY_STATE:"bslottery.state",GLOBAL_BUSINESS_MESSAGE:"global.business.message",SHOW_USER_INFO_DIALOG:"show.user.info.dialog",POPUP_JOIN_FANS_MODAL:"fansGroup.popup.joinFansModal",POPUP_PAID_SUBSCRIPTION_MODAL:"room.subscribePay.pop",OPEN_WEEK_STAR_ACTIVITY_MODAL:"room.week.star.activity.modal",POPUP_FANS_PRIVILEGE_POPOVER:"fansGroup.popup.fansPrivilegePopover",AT_USER_IN_BARRAGE_OR_IM:"chat.at.user.barrage",POPUP_FORTUNE_GIFT_MODAL:"fortuneGift.popup.fortuneGiftModal",UPDATE_ACCOUNT_BALANCE:"room.account.balance.update",POPOUT_SOCIAL_MEDIA:"social.media.popout",ROOM_INTERACTIVE_MODULE_POPOUT:"room.interactive.module.popout",ROOM_INTERACTIVE_GIFT_MODULE_POPOUT:"room.interactiveGift.module.popout",CHATBOX_FILL_CONTENT:"room.chatbox.fillcontent",DASHBOARD_OPEN_ACTION:"dashboard.open.action",DASHBOARD_OPEN_FEEDBACK:"dashboard.open.feedback",TEXT_FORBID:"TEXT_FORBID",DASHBOARD_OPEN_LEVEL_UP:"dashboard.open.level_up",POPUP_WEEKLY_STAR_MODAL:"weeklyStar.popup.modal",OPEN_FINAL_BOX:"revenue.open.final.modal",REPLY_COMMENT:"reply.comment",REPLY_COMMENT_SUCCESS:"reply.comment.success",OPEN_FANS_BOX:"revenue.open.fans.modal",GIFT_PACK_TIP:"GIFT_PACK_TIP",SHOW_ANCHOR_DAILY_TASK_MODAL:"room.anchorDailyTask.modal.show",DASHBOARD_GRAPHIC_CONFIG_DATA:"dashboard.graphic.config.data",PERSONAL_COMMENT:"personal.comment",PERSONAL_DEL_COMMENT:"personal.del.comment",OPEN_BOSS_COMING_PANEL:"open.boss.coming.panel",OPEN_RAMADAN_BOX:"revenue.open.ramadan.modal",ANMOSID_UPDATE:"anmosid.update"},w=[S.WS_CONNECT,S.SIDEBAR_LOCATION],b=new(function(t){d()(i,t);var e=_(i);function i(){var t;return a()(this,i),(t=e.call(this)).emitedEvents={},t.initOneTimeEventListener(),t}return u()(i,[{key:"initOneTimeEventListener",value:function(){var t=this;w.forEach((function(e){t.once(e,(function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];t.saveEvent.apply(t,[e].concat(n))}))}))}},{key:"emit",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=l()(y()(i.prototype),"emit",this)).call.apply(t,[this].concat(n))}},{key:"re_emit",value:function(t){if(this.hasEmited(t)){var e=this.emitedEvents[t];this.emit.apply(this,[t].concat(r()(e)))}}},{key:"hasEmited",value:function(t){return void 0!==this.emitedEvents[t]}},{key:"saveEvent",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.emitedEvents[t]=i}},{key:"on",value:function(t,e){var n=w.indexOf(t)>-1;l()(y()(i.prototype),"on",this).call(this,t,e),n&&this.hasEmited(t)&&this.re_emit(t)}},{key:"off",value:function(t,e){if(e)l()(y()(i.prototype),"removeListener",this).call(this,t,e);else{var n=this._events||{};(n[t]||null)&&delete n[t]}}},{key:"addListener",value:function(){this.on.apply(this,arguments)}}]),i}(g.a));b.setMaxListeners(12)},KwMD:function(t,e){t.exports=function(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}},KxBF:function(t,e){t.exports=function(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o}},Kz5y:function(t,e,i){var n=i("WFqU"),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o},L0GJ:function(t,e,i){"use strict";var n=i("pVnL"),r=i.n(n),o=i("q1tI"),a=i.n(o),s=i("hks1"),u=i("lSNA"),c=i.n(u),l=i("QILm"),h=i.n(l),d=i("TSYQ"),f=i.n(d),p=(i("17x9"),["prefixCls","size","className","children"]),m=function(t){var e=t.prefixCls,i=void 0===e?"nimo-btn-group":e,n=t.size,a=t.className,s=t.children,u=h()(t,p),l="";switch(n){case"large":l="lg";break;case"small":l="sm"}var d=f()(i,c()({},"".concat(i,"-").concat(l),l),a);return o.createElement("div",r()({},u,{className:d}),s)},y=(i("5KyW"),Object(o.forwardRef)((function(t,e){return a.a.createElement(s.a,r()({},t,{nodeRef:e}))})));s.a.Group=m,y.Group=m;e.a=y},L7RH:function(t,e,i){"use strict";i.r(e),i.d(e,"MODULE_NIMO_UI",(function(){return a})),i.d(e,"useSignal",(function(){return s}));var n=i("BUsv");i.d(e,"setTubeId",(function(){return n.g})),i.d(e,"genTubeKey",(function(){return n.d})),i.d(e,"genDownMsgKey",(function(){return n.c})),i.d(e,"SocketModel",(function(){return n.a})),i.d(e,"userSocketModel",(function(){return n.i})),i.d(e,"unpackCommon",(function(){return n.h})),i.d(e,"logger",(function(){return n.e}));var r=i("W7YU");i.d(e,"runtime",(function(){return r.i})),i.d(e,"eventEmitter",(function(){return r.e}));var o=i("jqZc");i.d(e,"channel",(function(){return o.a}));var a="nimoui",s=!0},L7xG:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("KkFV"),u={VERSION:"version",BIZ_TOKEN:"bizToken",UDB_USER_ID:"udbUserId",LANG:"lang",CONTENT_LANG:"clang",COUNTRY_CODE:"country",SELECT_CONTENT_LANG:"sel_clang",DEVICE_ID:"__yamid_new",USER_ID:"userid",MID:"__yamid_new",USER_NAME:"userName",CONTENT_COUNTRY:"ccountry"},c={LANG:"1033",CONTENT_LANG:"1000",COUNTRY_CODE:"ID"},l=Object.values(u),h=function(){function t(){r()(this,t)}return a()(t,[{key:"get",value:function(t){if(!this.validate(t))throw new ReferenceError("".concat(this.name));var e=s.a.get(t);return e||0===e?e:c[t]}},{key:"validate",value:function(t){return~l.indexOf(t)}}]),t}();e.b=new h},L8xA:function(t,e){t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},LGOv:function(t,e,i){t.exports=i("3BRs")},LGYb:function(t,e,i){var n=i("1hJj"),r=i("jbM+"),o=i("Xt/L"),a=i("xYSL"),s=i("dQpi"),u=i("rEGp");t.exports=function(t,e,i){var c=-1,l=r,h=t.length,d=!0,f=[],p=f;if(i)d=!1,l=o;else if(h>=200){var m=e?null:s(t);if(m)return u(m);d=!1,l=a,p=new n}else p=e?[]:f;t:for(;++c<h;){var y=t[c],v=e?e(y):y;if(y=i||0!==y?y:0,d&&v===v){for(var g=p.length;g--;)if(p[g]===v)continue t;e&&p.push(v),f.push(y)}else l(p,v,i)||(p!==f&&p.push(v),f.push(y))}return f}},LIAx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){function r(e){var n=new o.default(e);i.call(t,n)}if(t.addEventListener){var a=function(){var i=!1;return"object"===typeof n?i=n.capture||!1:"boolean"===typeof n&&(i=n),t.addEventListener(e,r,n||!1),{v:{remove:function(){t.removeEventListener(e,r,i)}}}}();if("object"===typeof a)return a.v}else if(t.attachEvent)return t.attachEvent("on"+e,r),{remove:function(){t.detachEvent("on"+e,r)}}};var n,r=i("E0u0"),o=(n=r)&&n.__esModule?n:{default:n};t.exports=e.default},LQAc:function(t,e,i){t.exports=i("4KFe")(23)},LXYL:function(t,e,i){var n=i("X6VK"),r=i("Vx+c"),o=i("b8Rm"),a=i("PAFS"),s=i("Bsg+"),u=i("E7Vc"),c=i("oAuq"),l=(i("P56o").Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),d=!u((function(){l((function(){}))}));n(n.S+n.F*(h||d),"Reflect",{construct:function(t,e){o(t),a(e);var i=arguments.length<3?t:o(arguments[2]);if(d&&!h)return l(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=i.prototype,f=r(s(u)?u:Object.prototype),p=Function.apply.call(t,f,e);return s(p)?p:f}})},LXxW:function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[r++]=a)}return o}},LcsW:function(t,e,i){var n=i("kekF")(Object.getPrototypeOf,Object);t.exports=n},LhCv:function(t,e,i){"use strict";i.d(e,"a",(function(){return I})),i.d(e,"b",(function(){return C})),i.d(e,"d",(function(){return A})),i.d(e,"c",(function(){return m})),i.d(e,"f",(function(){return y})),i.d(e,"e",(function(){return p}));var n=i("wx14");function r(t){return"/"===t.charAt(0)}function o(t,e){for(var i=e,n=i+1,r=t.length;n<r;i+=1,n+=1)t[i]=t[n];t.pop()}var a=function(t,e){void 0===e&&(e="");var i,n=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&r(t),u=e&&r(e),c=s||u;if(t&&r(t)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";if(a.length){var l=a[a.length-1];i="."===l||".."===l||""===l}else i=!1;for(var h=0,d=a.length;d>=0;d--){var f=a[d];"."===f?o(a,d):".."===f?(o(a,d),h++):h&&(o(a,d),h--)}if(!c)for(;h--;h)a.unshift("..");!c||""===a[0]||a[0]&&r(a[0])||a.unshift("");var p=a.join("/");return i&&"/"!==p.substr(-1)&&(p+="/"),p};function s(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}var u=function t(e,i){if(e===i)return!0;if(null==e||null==i)return!1;if(Array.isArray(e))return Array.isArray(i)&&e.length===i.length&&e.every((function(e,n){return t(e,i[n])}));if("object"===typeof e||"object"===typeof i){var n=s(e),r=s(i);return n!==e||r!==i?t(n,r):Object.keys(Object.assign({},e,i)).every((function(n){return t(e[n],i[n])}))}return!1},c=i("9R94");function l(t){return"/"===t.charAt(0)?t:"/"+t}function h(t){return"/"===t.charAt(0)?t.substr(1):t}function d(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function f(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function p(t){var e=t.pathname,i=t.search,n=t.hash,r=e||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function m(t,e,i,r){var o;"string"===typeof t?(o=function(t){var e=t||"/",i="",n="",r=e.indexOf("#");-1!==r&&(n=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(i=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===i?"":i,hash:"#"===n?"":n}}(t)).state=e:(void 0===(o=Object(n.a)({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(o.key=i),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function y(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&u(t.state,e.state)}function v(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,i,n,r){if(null!=t){var o="function"===typeof t?t(e,i):t;"string"===typeof o?"function"===typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(t){var i=!0;function n(){i&&t.apply(void 0,arguments)}return e.push(n),function(){i=!1,e=e.filter((function(t){return t!==n}))}},notifyListeners:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.forEach((function(t){return t.apply(void 0,i)}))}}}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(t,e){e(window.confirm(t))}var S="popstate",w="hashchange";function b(){try{return window.history.state||{}}catch(t){return{}}}function I(t){void 0===t&&(t={}),g||Object(c.a)(!1);var e=window.history,i=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,h=void 0===u?_:u,y=o.keyLength,I=void 0===y?6:y,T=t.basename?f(l(t.basename)):"";function P(t){var e=t||{},i=e.key,n=e.state,r=window.location,o=r.pathname+r.search+r.hash;return T&&(o=d(o,T)),m(o,n,i)}function E(){return Math.random().toString(36).substr(2,I)}var k=v();function R(t){Object(n.a)(j,t),j.length=e.length,k.notifyListeners(j.location,j.action)}function C(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||L(P(t.state))}function O(){L(P(b()))}var A=!1;function L(t){if(A)A=!1,R();else{k.confirmTransitionTo(t,"POP",h,(function(e){e?R({action:"POP",location:t}):function(t){var e=j.location,i=M.indexOf(e.key);-1===i&&(i=0);var n=M.indexOf(t.key);-1===n&&(n=0);var r=i-n;r&&(A=!0,D(r))}(t)}))}}var N=P(b()),M=[N.key];function U(t){return T+p(t)}function D(t){e.go(t)}var B=0;function F(t){1===(B+=t)&&1===t?(window.addEventListener(S,C),r&&window.addEventListener(w,O)):0===B&&(window.removeEventListener(S,C),r&&window.removeEventListener(w,O))}var x=!1;var j={length:e.length,action:"POP",location:N,createHref:U,push:function(t,n){var r="PUSH",o=m(t,n,E(),j.location);k.confirmTransitionTo(o,r,h,(function(t){if(t){var n=U(o),a=o.key,u=o.state;if(i)if(e.pushState({key:a,state:u},null,n),s)window.location.href=n;else{var c=M.indexOf(j.location.key),l=M.slice(0,c+1);l.push(o.key),M=l,R({action:r,location:o})}else window.location.href=n}}))},replace:function(t,n){var r="REPLACE",o=m(t,n,E(),j.location);k.confirmTransitionTo(o,r,h,(function(t){if(t){var n=U(o),a=o.key,u=o.state;if(i)if(e.replaceState({key:a,state:u},null,n),s)window.location.replace(n);else{var c=M.indexOf(j.location.key);-1!==c&&(M[c]=o.key),R({action:r,location:o})}else window.location.replace(n)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=k.setPrompt(t);return x||(F(1),x=!0),function(){return x&&(x=!1,F(-1)),e()}},listen:function(t){var e=k.appendListener(t);return F(1),function(){F(-1),e()}}};return j}var T="hashchange",P={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+h(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:h,decodePath:l},slash:{encodePath:l,decodePath:l}};function E(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function k(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function R(t){window.location.replace(E(window.location.href)+"#"+t)}function C(t){void 0===t&&(t={}),g||Object(c.a)(!1);var e=window.history,i=(window.navigator.userAgent.indexOf("Firefox"),t),r=i.getUserConfirmation,o=void 0===r?_:r,a=i.hashType,s=void 0===a?"slash":a,u=t.basename?f(l(t.basename)):"",h=P[s],y=h.encodePath,S=h.decodePath;function w(){var t=S(k());return u&&(t=d(t,u)),m(t)}var b=v();function I(t){Object(n.a)(j,t),j.length=e.length,b.notifyListeners(j.location,j.action)}var C=!1,O=null;function A(){var t,e,i=k(),n=y(i);if(i!==n)R(n);else{var r=w(),a=j.location;if(!C&&(e=r,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(O===p(r))return;O=null,function(t){if(C)C=!1,I();else{var e="POP";b.confirmTransitionTo(t,e,o,(function(i){i?I({action:e,location:t}):function(t){var e=j.location,i=U.lastIndexOf(p(e));-1===i&&(i=0);var n=U.lastIndexOf(p(t));-1===n&&(n=0);var r=i-n;r&&(C=!0,D(r))}(t)}))}}(r)}}var L=k(),N=y(L);L!==N&&R(N);var M=w(),U=[p(M)];function D(t){e.go(t)}var B=0;function F(t){1===(B+=t)&&1===t?window.addEventListener(T,A):0===B&&window.removeEventListener(T,A)}var x=!1;var j={length:e.length,action:"POP",location:M,createHref:function(t){var e=document.querySelector("base"),i="";return e&&e.getAttribute("href")&&(i=E(window.location.href)),i+"#"+y(u+p(t))},push:function(t,e){var i="PUSH",n=m(t,void 0,void 0,j.location);b.confirmTransitionTo(n,i,o,(function(t){if(t){var e=p(n),r=y(u+e);if(k()!==r){O=e,function(t){window.location.hash=t}(r);var o=U.lastIndexOf(p(j.location)),a=U.slice(0,o+1);a.push(e),U=a,I({action:i,location:n})}else I()}}))},replace:function(t,e){var i="REPLACE",n=m(t,void 0,void 0,j.location);b.confirmTransitionTo(n,i,o,(function(t){if(t){var e=p(n),r=y(u+e);k()!==r&&(O=e,R(r));var o=U.indexOf(p(j.location));-1!==o&&(U[o]=e),I({action:i,location:n})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=b.setPrompt(t);return x||(F(1),x=!0),function(){return x&&(x=!1,F(-1)),e()}},listen:function(t){var e=b.appendListener(t);return F(1),function(){F(-1),e()}}};return j}function O(t,e,i){return Math.min(Math.max(t,e),i)}function A(t){void 0===t&&(t={});var e=t,i=e.getUserConfirmation,r=e.initialEntries,o=void 0===r?["/"]:r,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,c=void 0===u?6:u,l=v();function h(t){Object(n.a)(S,t),S.length=S.entries.length,l.notifyListeners(S.location,S.action)}function d(){return Math.random().toString(36).substr(2,c)}var f=O(s,0,o.length-1),y=o.map((function(t){return m(t,void 0,"string"===typeof t?d():t.key||d())})),g=p;function _(t){var e=O(S.index+t,0,S.entries.length-1),n=S.entries[e];l.confirmTransitionTo(n,"POP",i,(function(t){t?h({action:"POP",location:n,index:e}):h()}))}var S={length:y.length,action:"POP",location:y[f],index:f,entries:y,createHref:g,push:function(t,e){var n="PUSH",r=m(t,e,d(),S.location);l.confirmTransitionTo(r,n,i,(function(t){if(t){var e=S.index+1,i=S.entries.slice(0);i.length>e?i.splice(e,i.length-e,r):i.push(r),h({action:n,location:r,index:e,entries:i})}}))},replace:function(t,e){var n="REPLACE",r=m(t,e,d(),S.location);l.confirmTransitionTo(r,n,i,(function(t){t&&(S.entries[S.index]=r,h({action:n,location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(t){var e=S.index+t;return e>=0&&e<S.entries.length},block:function(t){return void 0===t&&(t=!1),l.setPrompt(t)},listen:function(t){return l.appendListener(t)}};return S}},LsHQ:function(t,e,i){var n=i("EA7m"),r=i("mv/X");t.exports=function(t){return n((function(e,i){var n=-1,o=i.length,a=o>1?i[o-1]:void 0,s=o>2?i[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&r(i[0],i[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var u=i[n];u&&t(e,u,n,a)}return e}))}},LuBU:function(t,e,i){var n=i("at5L"),r=i("fQty");t.exports=Object.keys||function(t){return n(t,r)}},LyE8:function(t,e,i){t.exports=i("4KFe")(88)},"M1/F":function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),{MsgSys:-1,MsgSysSubscribe:-2});n.a.MsgSysType=r,e.a=r},M6Qj:function(t,e,i){t.exports=i("4KFe")(94)},MFj2:function(t,e,i){"use strict";var n=i("QbLZ"),r=i.n(n),o=i("YEIV"),a=i.n(o),s=i("iCc5"),u=i.n(s),c=i("V7oC"),l=i.n(c),h=i("FYw3"),d=i.n(h),f=i("mRg0"),p=i.n(f),m=i("q1tI"),y=i.n(m),v=i("17x9"),g=i.n(v);function _(t){var e=[];return y.a.Children.forEach(t,(function(t){e.push(t)})),e}function S(t,e){var i=null;return t&&t.forEach((function(t){i||t&&t.key===e&&(i=t)})),i}function w(t,e,i){var n=null;return t&&t.forEach((function(t){if(t&&t.key===e&&t.props[i]){if(n)throw new Error("two child with same key for <rc-animate> children");n=t}})),n}var b=i("i8i4"),I=i.n(b),T=i("EJiy"),P=i.n(T),E={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},k={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},R=[],C=[];function O(t,e,i){t.addEventListener(e,i,!1)}function A(t,e,i){t.removeEventListener(e,i,!1)}"undefined"!==typeof window&&"undefined"!==typeof document&&function(){var t=document.createElement("div").style;function e(e,i){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];for(var o in r)if(o in t){i.push(r[o]);break}}}"AnimationEvent"in window||(delete E.animationstart.animation,delete k.animationend.animation),"TransitionEvent"in window||(delete E.transitionstart.transition,delete k.transitionend.transition),e(E,R),e(k,C)}();var L={startEvents:R,addStartEventListener:function(t,e){0!==R.length?R.forEach((function(i){O(t,i,e)})):window.setTimeout(e,0)},removeStartEventListener:function(t,e){0!==R.length&&R.forEach((function(i){A(t,i,e)}))},endEvents:C,addEndEventListener:function(t,e){0!==C.length?C.forEach((function(i){O(t,i,e)})):window.setTimeout(e,0)},removeEndEventListener:function(t,e){0!==C.length&&C.forEach((function(i){A(t,i,e)}))}},N=i("PFWz"),M=i.n(N),U=0!==L.endEvents.length,D=["Webkit","Moz","O","ms"],B=["-webkit-","-moz-","-o-","ms-",""];function F(t,e){for(var i=window.getComputedStyle(t,null),n="",r=0;r<B.length&&!(n=i.getPropertyValue(B[r]+e));r++);return n}function x(t){if(U){var e=parseFloat(F(t,"transition-delay"))||0,i=parseFloat(F(t,"transition-duration"))||0,n=parseFloat(F(t,"animation-delay"))||0,r=parseFloat(F(t,"animation-duration"))||0,o=Math.max(i+e,r+n);t.rcEndAnimTimeout=setTimeout((function(){t.rcEndAnimTimeout=null,t.rcEndListener&&t.rcEndListener()}),1e3*o+200)}}function j(t){t.rcEndAnimTimeout&&(clearTimeout(t.rcEndAnimTimeout),t.rcEndAnimTimeout=null)}var V=function(t,e,i){var n="object"===("undefined"===typeof e?"undefined":P()(e)),r=n?e.name:e,o=n?e.active:e+"-active",a=i,s=void 0,u=void 0,c=M()(t);return i&&"[object Object]"===Object.prototype.toString.call(i)&&(a=i.end,s=i.start,u=i.active),t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(e){e&&e.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),j(t),c.remove(r),c.remove(o),L.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,a&&a())},L.addEndEventListener(t,t.rcEndListener),s&&s(),c.add(r),t.rcAnimTimeout=setTimeout((function(){t.rcAnimTimeout=null,c.add(o),u&&setTimeout(u,0),x(t)}),30),{stop:function(){t.rcEndListener&&t.rcEndListener()}}};V.style=function(t,e,i){t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(e){e&&e.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),j(t),L.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,i&&i())},L.addEndEventListener(t,t.rcEndListener),t.rcAnimTimeout=setTimeout((function(){for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);t.rcAnimTimeout=null,x(t)}),0)},V.setTransition=function(t,e,i){var n=e,r=i;void 0===i&&(r=n,n=""),n=n||"",D.forEach((function(e){t.style[e+"Transition"+n]=r}))},V.isCssAnimationSupported=U;var G=V,H={isAppearSupported:function(t){return t.transitionName&&t.transitionAppear||t.animation.appear},isEnterSupported:function(t){return t.transitionName&&t.transitionEnter||t.animation.enter},isLeaveSupported:function(t){return t.transitionName&&t.transitionLeave||t.animation.leave},allowAppearCallback:function(t){return t.transitionAppear||t.animation.appear},allowEnterCallback:function(t){return t.transitionEnter||t.animation.enter},allowLeaveCallback:function(t){return t.transitionLeave||t.animation.leave}},W={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},q=function(t){function e(){return u()(this,e),d()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return p()(e,t),l()(e,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(t){H.isEnterSupported(this.props)?this.transition("enter",t):t()}},{key:"componentWillAppear",value:function(t){H.isAppearSupported(this.props)?this.transition("appear",t):t()}},{key:"componentWillLeave",value:function(t){H.isLeaveSupported(this.props)?this.transition("leave",t):t()}},{key:"transition",value:function(t,e){var i=this,n=I.a.findDOMNode(this),r=this.props,o=r.transitionName,a="object"===typeof o;this.stop();var s=function(){i.stopper=null,e()};if((U||!r.animation[t])&&o&&r[W[t]]){var u=a?o[t]:o+"-"+t,c=u+"-active";a&&o[t+"Active"]&&(c=o[t+"Active"]),this.stopper=G(n,{name:u,active:c},s)}else this.stopper=r.animation[t](n,s)}},{key:"stop",value:function(){var t=this.stopper;t&&(this.stopper=null,t.stop())}},{key:"render",value:function(){return this.props.children}}]),e}(y.a.Component);q.propTypes={children:g.a.any};var K=q,Y="rc_animate_"+Date.now();function z(t){var e=t.children;return y.a.isValidElement(e)&&!e.key?y.a.cloneElement(e,{key:Y}):e}function J(){}var Q=function(t){function e(t){u()(this,e);var i=d()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return X.call(i),i.currentlyAnimatingKeys={},i.keysToEnter=[],i.keysToLeave=[],i.state={children:_(z(t))},i.childrenRefs={},i}return p()(e,t),l()(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.showProp,i=this.state.children;e&&(i=i.filter((function(t){return!!t.props[e]}))),i.forEach((function(e){e&&t.performAppear(e.key)}))}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.nextProps=t;var i=_(z(t)),n=this.props;n.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(t){e.stop(t)}));var r=n.showProp,o=this.currentlyAnimatingKeys,s=n.exclusive?_(z(n)):this.state.children,u=[];r?(s.forEach((function(t){var e=t&&S(i,t.key),n=void 0;(n=e&&e.props[r]||!t.props[r]?e:y.a.cloneElement(e||t,a()({},r,!0)))&&u.push(n)})),i.forEach((function(t){t&&S(s,t.key)||u.push(t)}))):u=function(t,e){var i=[],n={},r=[];return t.forEach((function(t){t&&S(e,t.key)?r.length&&(n[t.key]=r,r=[]):r.push(t)})),e.forEach((function(t){t&&Object.prototype.hasOwnProperty.call(n,t.key)&&(i=i.concat(n[t.key])),i.push(t)})),i=i.concat(r)}(s,i),this.setState({children:u}),i.forEach((function(t){var i=t&&t.key;if(!t||!o[i]){var n=t&&S(s,i);if(r){var a=t.props[r];if(n)!w(s,i,r)&&a&&e.keysToEnter.push(i);else a&&e.keysToEnter.push(i)}else n||e.keysToEnter.push(i)}})),s.forEach((function(t){var n=t&&t.key;if(!t||!o[n]){var a=t&&S(i,n);if(r){var s=t.props[r];if(a)!w(i,n,r)&&s&&e.keysToLeave.push(n);else s&&e.keysToLeave.push(n)}else a||e.keysToLeave.push(n)}}))}},{key:"componentDidUpdate",value:function(){var t=this.keysToEnter;this.keysToEnter=[],t.forEach(this.performEnter);var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(t,e){var i=this.props.showProp;return i?w(t,e,i):S(t,e)}},{key:"stop",value:function(t){delete this.currentlyAnimatingKeys[t];var e=this.childrenRefs[t];e&&e.stop()}},{key:"render",value:function(){var t=this,e=this.props;this.nextProps=e;var i=this.state.children,n=null;i&&(n=i.map((function(i){if(null===i||void 0===i)return i;if(!i.key)throw new Error("must set key for <rc-animate> children");return y.a.createElement(K,{key:i.key,ref:function(e){t.childrenRefs[i.key]=e},animation:e.animation,transitionName:e.transitionName,transitionEnter:e.transitionEnter,transitionAppear:e.transitionAppear,transitionLeave:e.transitionLeave},i)})));var o=e.component;if(o){var a=e;return"string"===typeof o&&(a=r()({className:e.className,style:e.style},e.componentProps)),y.a.createElement(o,a,n)}return n[0]||null}}]),e}(y.a.Component);Q.isAnimate=!0,Q.propTypes={component:g.a.any,componentProps:g.a.object,animation:g.a.object,transitionName:g.a.oneOfType([g.a.string,g.a.object]),transitionEnter:g.a.bool,transitionAppear:g.a.bool,exclusive:g.a.bool,transitionLeave:g.a.bool,onEnd:g.a.func,onEnter:g.a.func,onLeave:g.a.func,onAppear:g.a.func,showProp:g.a.string,children:g.a.node},Q.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:J,onEnter:J,onLeave:J,onAppear:J};var X=function(){var t=this;this.performEnter=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillEnter(t.handleDoneAdding.bind(t,e,"enter")))},this.performAppear=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillAppear(t.handleDoneAdding.bind(t,e,"appear")))},this.handleDoneAdding=function(e,i){var n=t.props;if(delete t.currentlyAnimatingKeys[e],!n.exclusive||n===t.nextProps){var r=_(z(n));t.isValidChildByKey(r,e)?"appear"===i?H.allowAppearCallback(n)&&(n.onAppear(e),n.onEnd(e,!0)):H.allowEnterCallback(n)&&(n.onEnter(e),n.onEnd(e,!0)):t.performLeave(e)}},this.performLeave=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillLeave(t.handleDoneLeaving.bind(t,e)))},this.handleDoneLeaving=function(e){var i=t.props;if(delete t.currentlyAnimatingKeys[e],!i.exclusive||i===t.nextProps){var n=_(z(i));if(t.isValidChildByKey(n,e))t.performEnter(e);else{var r=function(){H.allowLeaveCallback(i)&&(i.onLeave(e),i.onEnd(e,!1))};!function(t,e,i){var n=t.length===e.length;return n&&t.forEach((function(t,r){var o=e[r];t&&o&&(t&&!o||!t&&o||t.key!==o.key||i&&t.props[i]!==o.props[i])&&(n=!1)})),n}(t.state.children,n,i.showProp)?t.setState({children:n},r):r()}}}};e.a=Q},MMmD:function(t,e,i){var n=i("lSCD"),r=i("shjB");t.exports=function(t){return null!=t&&r(t.length)&&!n(t)}},MQdA:function(t,e,i){"use strict";i.d(e,"b",(function(){return r}));var n=i("21pC");i.d(e,"a",(function(){return n.a}));i("q1tI");var r=function(t){var e;return 1===(null===(e=t.base.meetingInfo)||void 0===e?void 0:e.iMeetingStatus)}},Mc3C:function(t,e,i){"use strict";i.r(e),e.default={namespace:"common_header",loaders:{1025:function(){return i.e("cd52b").then(i.bind(null,"sPHo"))},1028:function(){return i.e("09036").then(i.bind(null,"hqb9"))},1033:function(){return i.e("b3657").then(i.bind(null,"bw/j"))},1034:function(){return i.e("22527").then(i.bind(null,"Cvk9"))},1041:function(){return i.e("68b8c").then(i.bind(null,"8QnL"))},1046:function(){return i.e("cb355").then(i.bind(null,"4m+7"))},1049:function(){return i.e("cef64").then(i.bind(null,"GreP"))},1054:function(){return i.e("696f9").then(i.bind(null,"+vUj"))},1055:function(){return i.e("d442b").then(i.bind(null,"EIjM"))},1057:function(){return i.e("f0d00").then(i.bind(null,"T50v"))},1066:function(){return i.e("40694").then(i.bind(null,"J+eX"))},1081:function(){return i.e("2a408").then(i.bind(null,"B0/1"))},1086:function(){return i.e("f5cc1").then(i.bind(null,"7uEC"))},1124:function(){return i.e("5b8bb").then(i.bind(null,"jk7h"))}}}},MfQN:function(t,e,i){t.exports=i("4KFe")(169)},MgzW:function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var i,s,u=a(t),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))r.call(i,l)&&(u[l]=i[l]);if(n){s=n(i);for(var h=0;h<s.length;h++)o.call(i,s[h])&&(u[s[h]]=i[s[h]])}}return u}},Mk7s:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("cDf5"),r=i.n(n),o=i("W7YU"),a=i("TqI2");function s(t,e,i){var n=i.value;if("function"!==typeof n)throw new TypeError("@withUser decorator can only be applied to methods not: ".concat(r()(n)));return i.value=function(){for(var t=this,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return o.i.user.isReady()?n.apply(this,i):Object(a.a)().then((function(t){o.i.user.init(t)})).then((function(){return n.apply(t,i)}))},i}},MrPd:function(t,e,i){var n=i("hypo"),r=i("ljhN"),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var a=t[e];o.call(t,e)&&r(a,i)&&(void 0!==i||e in t)||n(t,e,i)}},MtdB:function(t,e,i){var n=i("XKFU");n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},Mukb:function(t,e,i){t.exports=i("4KFe")(14)},MvSz:function(t,e,i){var n=i("LXxW"),r=i("0ycA"),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return o.call(t,e)})))}:r;t.exports=s},N6wT:function(t,e,i){"use strict";var n=i("cz3H"),r=(i("EoCF"),function(){this.title="",this.roomId=0,this.alise="",this.weight=0,this.updateTime=0,this.liveStreamStatus=0});r.prototype._clone=function(){return new n.a.EventRoomView},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeString(0,this.title),t.writeInt64(1,this.roomId),t.writeString(2,this.alise),t.writeInt32(3,this.weight),t.writeInt64(4,this.updateTime),t.writeInt32(5,this.liveStreamStatus)},r.prototype.readFrom=function(t){this.title=t.readString(0,!1,this.title),this.roomId=t.readInt64(1,!1,this.roomId),this.alise=t.readString(2,!1,this.alise),this.weight=t.readInt32(3,!1,this.weight),this.updateTime=t.readInt64(4,!1,this.updateTime),this.liveStreamStatus=t.readInt32(5,!1,this.liveStreamStatus)},n.a.EventRoomView=r},N93r:function(t,e,i){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(i,!0).forEach((function(e){var n,r,o;n=t,o=i[r=e],r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s="1.1.16",u={ISDEBUG:!1,appSrc:"",userId:null,uid:0,guid:0,ua:"",config:null,iRequestId:0,dims:{}};u.ver=s,u.report=null,u.enableTrace=0,u.setEnableTrace=function(){if(u.config.hasOwnProperty("enableTrace"))u.enableTrace=u.config.enableTrace;else{var t=Math.random()<.1;u.enableTrace=t?1:0}},u.getTraceId=function(){return"xxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},u.reportAPI=null;var c={Wup:function(){this.iVersion=3,this.cPacketType=0,this.iMessageType=0,this.iRequestId=0,this.sServantName="",this.sFuncName="",this.sBuffer=new c.BinBuffer,this.iTimeout=0,this.context=new c.Map(new c.STRING,new c.STRING),this.status=new c.Map(new c.STRING,new c.STRING),this.data=new c.Map(new c.STRING,new c.Map(new c.STRING,new c.BinBuffer)),this.newdata=new c.Map(new c.STRING,new c.BinBuffer)}};c.Wup.prototype.setVersion=function(t){this.iVersion=t},c.Wup.prototype.getVersion=function(t){return this.iVersion},c.Wup.prototype.setServant=function(t){this.sServantName=t},c.Wup.prototype.setFunc=function(t){this.sFuncName=t},c.Wup.prototype.setRequestId=function(t){this.iRequestId=t||++this.iRequestId},c.Wup.prototype.getRequestId=function(){return this.iRequestId},c.Wup.prototype.setTimeOut=function(t){this.iTimeout=t},c.Wup.prototype.getTimeOut=function(){return this.iTimeout},c.Wup.prototype.writeTo=function(){var t=new c.JceOutputStream;return t.writeInt16(1,this.iVersion),t.writeInt8(2,this.cPacketType),t.writeInt32(3,this.iMessageType),t.writeInt32(4,this.iRequestId),t.writeString(5,this.sServantName),t.writeString(6,this.sFuncName),t.writeBytes(7,this.sBuffer),t.writeInt32(8,this.iTimeout),t.writeMap(9,this.context),t.writeMap(10,this.status),new c.BinBuffer(t.getBuffer())},c.Wup.prototype.encode=function(){var t=new c.JceOutputStream;3==this.iVersion?t.writeMap(0,this.newdata):t.writeMap(0,this.data),this.sBuffer=t.getBinBuffer();var e=new c.BinBuffer;e=this.writeTo();var i=new c.BinBuffer;return i.writeInt32(4+e.len),i.writeBytes(e),i},c.Wup.prototype.writeBoolean=function(t,e){var i=new c.JceOutputStream;if(i.writeBoolean(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.BOOLEAN;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new c.BinBuffer(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeInt8=function(t,e){var i=new c.JceOutputStream;if(i.writeInt8(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.CHAR;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new c.BinBuffer(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeInt16=function(t,e){var i=new c.JceOutputStream;if(i.writeInt16(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.SHORT;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeInt32=function(t,e){var i=new c.JceOutputStream;if(i.writeInt32(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.INT32;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeInt64=function(t,e){var i=new c.JceOutputStream;if(i.writeInt64(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.INT64;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeFloat=function(t,e){var i=new c.JceOutputStream;if(i.writeFloat(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.FLOAT;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeDouble=function(t,e){var i=new c.JceOutputStream;if(i.writeDouble(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.DOUBLE;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeString=function(t,e){var i=new c.JceOutputStream;if(i.writeString(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.TypeHelp.STRING;null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeVector=function(t,e){var i=new c.JceOutputStream;if(i.writeVector(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBinBuffer()));else{var n=this.data.get(t),r=e._className();null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeStruct=function(t,e){var i=new c.JceOutputStream;if(i.writeStruct(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t);null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(" ",new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeBytes=function(t,e){var i=new c.JceOutputStream;if(i.writeBytes(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t);null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put("vec",new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.writeMap=function(t,e){var i=new c.JceOutputStream;if(i.writeMap(0,e),3==this.iVersion)this.newdata.put(t,new c.BinBuffer(i.getBuffer()));else{var n=this.data.get(t),r=c.Util.getClassType(e);null==n&&(n=new c.Map(c.STRING,c.STRING)),n.put(r,new Uint8Array(i.getBuffer())),this.data.put(t,n)}},c.Wup.prototype.readFrom=function(t){this.iVersion=t.readInt16(1,!0),this.cPacketType=t.readInt8(2,!0),this.iMessageType=t.readInt32(3,!0),this.iRequestId=t.readInt32(4,!0),this.sServantName=t.readString(5,!0),this.sFuncName=t.readString(6,!0),localStorage.__wup&&console.info("%c@@@ "+this.sServantName+"."+this.sFuncName,"color:white;background:black;",this),this.sBuffer=t.readBytes(7,!0),this.iTimeout=t.readInt32(8,!0),this.context=t.readMap(9,!0,new c.Map(new c.STRING,new c.STRING)),this.status=t.readMap(10,!0,new c.Map(new c.STRING,new c.STRING))},c.Wup.prototype.decode=function(t){var e=new c.JceInputStream(t);if(e.buf.vew.getInt32(e.buf.position)<4)throw Error("packet length too short");e.buf.position+=4,this.readFrom(e),e=new c.JceInputStream(this.sBuffer.getBuffer()),3==this.iVersion?(this.newdata.clear(),e.readMap(0,!0,this.newdata)):(this.data.clear(),e.readMap(0,!0,this.data))},c.Wup.prototype.readBoolean=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=new c.JceInputStream(e.buffer).readBoolean(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.BOOLEAN,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=new c.JceInputStream(r).readBoolean(0,!0,i)}return i},c.Wup.prototype.readInt8=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=new c.JceInputStream(e.buffer).readInt8(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.CHAR,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=new c.JceInputStream(r).readInt8(0,!0,i)}return i},c.Wup.prototype.readInt16=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=(o=new c.JceInputStream(e.buffer)).readInt16(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.SHORT,r=e.get(n),o=new c.JceInputStream(r);if(null==r)throw Error("UniAttribute not found type:"+n);i=o.readInt16(0,!0,i)}return i},c.Wup.prototype.readInt32=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=new c.JceInputStream(e.buffer).readInt32(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.INT32,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=new c.JceInputStream(r).readInt32(0,!0,i)}return i},c.Wup.prototype.readInt64=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=new c.JceInputStream(e.buffer).readInt64(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.INT64,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=new c.JceInputStream(r).readInt64(0,!0,i)}return i},c.Wup.prototype.readFloat=function(t){var e,i;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);i=new c.JceInputStream(e.buffer).readFloat(0,!0,i)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.FLOAT,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=new c.JceInputStream(r).readFloat(0,!0,i)}return i},c.Wup.prototype.readDouble=function(t){var e;if(3==this.iVersion){if(null==(e=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);var i=new c.JceInputStream(e.buffer);def=i.readDouble(0,!0,def)}else{if(null==(e=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var n=c.TypeHelp.DOUBLE,r=e.get(n);if(null==r)throw Error("UniAttribute not found type:"+n);i=new c.JceInputStream(r),def=i.readDouble(0,!0,def)}return def},c.Wup.prototype.readVector=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new c.JceInputStream(n.buffer).readVector(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=new c.JceInputStream(r).readVector(0,!0,e)}return e},c.Wup.prototype.readStruct=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new c.JceInputStream(n.buffer).readStruct(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=new c.JceInputStream(r).readStruct(0,!0,e)}return e},c.Wup.prototype.readMap=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new c.JceInputStream(n.buffer).readMap(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=new c.JceInputStream(r).readMap(0,!0,e)}return e},c.Wup.prototype.readBytes=function(t,e,i){var n;if(3==this.iVersion){if(null==(n=this.newdata.get(t)))throw Error("UniAttribute not found key:"+t);e=new c.JceInputStream(n.buffer).readBytes(0,!0,e)}else{if(null==(n=this.data.get(t)))throw Error("UniAttribute not found key:"+t);var r=n.get(i);if(null==r)throw Error("UniAttribute not found type:"+i);e=new c.JceInputStream(r).readBytes(0,!0,e)}return e},c.DataHelp={EN_INT8:0,EN_INT16:1,EN_INT32:2,EN_INT64:3,EN_FLOAT:4,EN_DOUBLE:5,EN_STRING1:6,EN_STRING4:7,EN_MAP:8,EN_LIST:9,EN_STRUCTBEGIN:10,EN_STRUCTEND:11,EN_ZERO:12,EN_SIMPLELIST:13},c.TypeHelp={BOOLEAN:"bool",CHAR:"char",SHORT:"short",INT32:"int32",INT64:"int64",FLOAT:"float",DOUBLE:"double",STRING:"string",VECTOR:"list<$t>",MAP:"map<$k, $v>"},c.BinBuffer=function(t){this.buf=null,this.vew=null,this.len=0,this.position=0,null!=t&&null!=t&&t instanceof c.BinBuffer&&(this.buf=t.buf,this.vew=new DataView(this.buf),this.len=t.length,this.position=t.position),null!=t&&null!=t&&t instanceof ArrayBuffer&&(this.buf=t,this.vew=new DataView(this.buf),this.len=this.vew.byteLength,this.position=0),this.__defineGetter__("length",(function(){return this.len})),this.__defineGetter__("buffer",(function(){return this.buf}))},c.BinBuffer.prototype._write=function(t,e,i){return t.writeBytes(e,i)},c.BinBuffer.prototype._read=function(t,e,i){return t.readBytes(e,!0,i)},c.BinBuffer.prototype._clone=function(){return new c.BinBuffer},c.BinBuffer.prototype.allocate=function(t){if(t=this.position+t,!(null!=this.buf&&this.buf.length>t)){var e=new ArrayBuffer(Math.max(256,2*t));null!=this.buf&&(new Uint8Array(e).set(new Uint8Array(this.buf)),this.buf=void 0),this.buf=e,this.vew=void 0,this.vew=new DataView(this.buf)}},c.BinBuffer.prototype.getBuffer=function(){var t=new ArrayBuffer(this.len);return new Uint8Array(t).set(new Uint8Array(this.buf,0,this.len)),t},c.BinBuffer.prototype.memset=function(t,e,i){this.allocate(i),new Uint8Array(this.buf).set(new Uint8Array(t,e,i),this.position)},c.BinBuffer.prototype.writeInt8=function(t){this.allocate(1),this.vew.setInt8(this.position,t),this.position+=1,this.len=this.position},c.BinBuffer.prototype.writeUInt8=function(t){this.allocate(1),this.vew.setUint8(this.position++,t),this.len=this.position},c.BinBuffer.prototype.writeInt16=function(t){this.allocate(2),this.vew.setInt16(this.position,t),this.position+=2,this.len=this.position},c.BinBuffer.prototype.writeUInt16=function(t){this.allocate(2),this.vew.setUint16(this.position,t),this.position+=2,this.len=this.position},c.BinBuffer.prototype.writeInt32=function(t){this.allocate(4),this.vew.setInt32(this.position,t),this.position+=4,this.len=this.position},c.BinBuffer.prototype.writeUInt32=function(t){this.allocate(4),this.vew.setUint32(this.position,t),this.position+=4,this.len=this.position},c.BinBuffer.prototype.writeInt64=function(t){if("string"==typeof t){this.allocate(8);for(var e=4294967296,i=0,n=0,r=(t=t.toLowerCase()).length,o=0;o<r;o++){var a=t.charCodeAt(o)-48;9<a&&(a-=39),i=10*i+a,n=10*n+Math.floor(i/e),i%=e}return this.vew.setUint32(this.position,n),this.vew.setUint32(this.position+4,i),this.position+=8,void(this.len=this.position)}this.allocate(8),this.vew.setUint32(this.position,parseInt(t/4294967296)),this.vew.setUint32(this.position+4,t%4294967296),this.position+=8,this.len=this.position},c.BinBuffer.prototype.writeFloat=function(t){this.allocate(4),this.vew.setFloat32(this.position,t),this.position+=4,this.len=this.position},c.BinBuffer.prototype.writeDouble=function(t){this.allocate(8),this.vew.setFloat64(this.position,t),this.position+=8,this.len=this.position},c.BinBuffer.prototype.writeString=function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));this.allocate(e.length),new Uint8Array(this.buf).set(new Uint8Array(e),this.position),this.position+=e.length,this.len=this.position},c.BinBuffer.prototype.writeBytes=function(t){0!=t.length&&null!=t.buf&&(this.allocate(t.length),new Uint8Array(this.buf).set(new Uint8Array(t.buf,0,t.length),this.position),this.position+=t.length,this.len=this.position)},c.BinBuffer.prototype.readInt8=function(){return this.vew.getInt8(this.position++)},c.BinBuffer.prototype.readInt16=function(){return this.position+=2,this.vew.getInt16(this.position-2)},c.BinBuffer.prototype.readInt32=function(){return this.position+=4,this.vew.getInt32(this.position-4)},c.BinBuffer.prototype.readUInt8=function(){return this.position+=1,this.vew.getUint8(this.position-1)},c.BinBuffer.prototype.readUInt16=function(){return this.position+=2,this.vew.getUint16(this.position-2)},c.BinBuffer.prototype.readUInt32=function(){return this.position+=4,this.vew.getUint32(this.position-4)};var l=Math.pow(2,53);function d(t){return"function"==typeof t?(new t)._className():t._className()}c.BinBuffer.prototype.readInt64=function(){var t=this.vew.getUint32(this.position),e=this.vew.getUint32(this.position+4);this.position+=8;var i=4294967296*t+e;if(i<l)return i;for(var n,r,o,a="",s=Math.pow(2,32);0!=t||0!=e;)a=(r=(o=(n=t%10)*s+e)%10).toString(10)+a,t=(t-n)/10,e=(o-r)/10;return a},c.BinBuffer.prototype.readFloat=function(){var t=this.vew.getFloat32(this.position);return this.position+=4,t},c.BinBuffer.prototype.readDouble=function(){var t=this.vew.getFloat64(this.position);return this.position+=8,t},c.BinBuffer.prototype.readString=function(t){for(var e=[],i=0;i<t;i++)e.push(String.fromCharCode(this.vew.getUint8(this.position++)));var n=e.join("");try{n=decodeURIComponent(escape(n))}catch(t){}return n},c.BinBuffer.prototype.readBytes=function(t){var e=new c.BinBuffer;return e.allocate(t),e.memset(this.buf,this.position,t),e.position=0,e.len=t,this.position=this.position+t,e},c.JceOutputStream=function(){this.buf=new c.BinBuffer,this.getBinBuffer=function(){return this.buf},this.getBuffer=function(){return this.buf.getBuffer()}},c.JceOutputStream.prototype.writeTo=function(t,e){t<15?this.buf.writeUInt8(t<<4&240|e):this.buf.writeUInt16((240|e)<<8|t)},c.JceOutputStream.prototype.writeBoolean=function(t,e){this.writeInt8(t,1==e?1:0)},c.JceOutputStream.prototype.writeInt8=function(t,e){0==e?this.writeTo(t,c.DataHelp.EN_ZERO):(this.writeTo(t,c.DataHelp.EN_INT8),this.buf.writeInt8(e))},c.JceOutputStream.prototype.writeInt16=function(t,e){-128<=e&&e<=127?this.writeInt8(t,e):(this.writeTo(t,c.DataHelp.EN_INT16),this.buf.writeInt16(e))},c.JceOutputStream.prototype.writeInt32=function(t,e){-32768<=e&&e<=32767?this.writeInt16(t,e):(this.writeTo(t,c.DataHelp.EN_INT32),this.buf.writeInt32(e))},c.JceOutputStream.prototype.writeInt64=function(t,e){-2147483648<=e&&e<=2147483647?this.writeInt32(t,e):(this.writeTo(t,c.DataHelp.EN_INT64),this.buf.writeInt64(e))},c.JceOutputStream.prototype.writeUInt8=function(t,e){this.writeInt16(t,e)},c.JceOutputStream.prototype.writeUInt16=function(t,e){this.writeInt32(t,e)},c.JceOutputStream.prototype.writeUInt32=function(t,e){this.writeInt64(t,e)},c.JceOutputStream.prototype.writeFloat=function(t,e){0==e?this.writeTo(t,c.DataHelp.EN_ZERO):(this.writeTo(t,c.DataHelp.EN_FLOAT),this.buf.writeFloat(e))},c.JceOutputStream.prototype.writeDouble=function(t,e){0==e?this.writeTo(t,c.DataHelp.EN_ZERO):(this.writeTo(t,c.DataHelp.EN_DOUBLE),this.buf.writeDouble(e))},c.JceOutputStream.prototype.writeStruct=function(t,e){if(null==e.writeTo)throw Error("not defined writeTo Function");this.writeTo(t,c.DataHelp.EN_STRUCTBEGIN),e.writeTo(this),this.writeTo(0,c.DataHelp.EN_STRUCTEND)},c.JceOutputStream.prototype.writeString=function(t,e){var i=e;try{i=unescape(encodeURIComponent(i))}catch(t){}255<i.length?(this.writeTo(t,c.DataHelp.EN_STRING4),this.buf.writeUInt32(i.length)):(this.writeTo(t,c.DataHelp.EN_STRING1),this.buf.writeUInt8(i.length)),this.buf.writeString(i)},c.JceOutputStream.prototype.writeBytes=function(t,e){this.writeTo(t,c.DataHelp.EN_SIMPLELIST),this.writeTo(0,c.DataHelp.EN_INT8),this.writeInt32(0,e.length),this.buf.writeBytes(e)},c.JceOutputStream.prototype.writeVector=function(t,e){var i=e.value.length;this.writeTo(t,c.DataHelp.EN_LIST),this.writeInt32(0,i);for(var n=0;n<i;n++)("function"==typeof e.proto?new e.proto:e.proto)._write(this,0,e.value[n])},c.JceOutputStream.prototype.writeMap=function(t,e){for(var i in this.writeTo(t,c.DataHelp.EN_MAP),this.writeInt32(0,e.size()),e.value){var n="function"==typeof e.kproto?new e.kproto:e.kproto,r="function"==typeof e.vproto?new e.vproto:e.vproto;n._write(this,0,i),r._write(this,1,e.value[i])}},c.JceInputStream=function(t){this.buf=new c.BinBuffer(t)},c.JceInputStream.prototype.readFrom=function(){var t=this.buf.readUInt8(),e=(240&t)>>4,i=15&t;return 15<=e&&(e=this.buf.readUInt8()),{tag:e,type:i}},c.JceInputStream.prototype.peekFrom=function(){var t=this.buf.position,e=this.readFrom();return this.buf.position=t,{tag:e.tag,type:e.type,size:15<=e.tag?2:1}},c.JceInputStream.prototype.skipField=function(t){switch(t){case c.DataHelp.EN_INT8:this.buf.position+=1;break;case c.DataHelp.EN_INT16:this.buf.position+=2;break;case c.DataHelp.EN_INT32:this.buf.position+=4;break;case c.DataHelp.EN_INT64:this.buf.position+=8;break;case c.DataHelp.EN_STRING1:var e=this.buf.readUInt8();this.buf.position+=e;break;case c.DataHelp.EN_STRING4:var i=this.buf.readInt32();this.buf.position+=i;break;case c.DataHelp.EN_STRUCTBEGIN:this.skipToStructEnd();break;case c.DataHelp.EN_STRUCTEND:case c.DataHelp.EN_ZERO:break;case c.DataHelp.EN_MAP:for(var n=this.readInt32(0,!0),r=0;r<2*n;++r){var o=this.readFrom();this.skipField(o.type)}break;case c.DataHelp.EN_SIMPLELIST:if((o=this.readFrom()).type!=c.DataHelp.EN_INT8)throw Error("skipField with invalid type, type value: "+t+","+o.type);e=this.readInt32(0,!0),this.buf.position+=e;break;case c.DataHelp.EN_LIST:for(n=this.readInt32(0,!0),r=0;r<n;++r)o=this.readFrom(),this.skipField(o.type);break;case c.DataHelp.EN_FLOAT:this.buf.position+=4;break;case c.DataHelp.EN_DOUBLE:this.buf.position+=8;break;default:throw new Error("skipField with invalid type, type value: "+t)}},c.JceInputStream.prototype.skipToStructEnd=function(){for(;;){var t=this.readFrom();if(this.skipField(t.type),t.type==c.DataHelp.EN_STRUCTEND)return}},c.JceInputStream.prototype.skipToTag=function(t,e){for(;this.buf.position<this.buf.length;){var i=this.peekFrom();if(t<=i.tag||i.type==c.DataHelp.EN_STRUCTEND)return i.type!=c.DataHelp.EN_STRUCTEND&&t==i.tag;this.buf.position+=i.size,this.skipField(i.type)}if(e)throw Error("require field not exist, tag:"+t);return!1},c.JceInputStream.prototype.readBoolean=function(t,e,i){return 1==this.readInt8(t,e,i)},c.JceInputStream.prototype.readInt8=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();switch(n.type){case c.DataHelp.EN_ZERO:return 0;case c.DataHelp.EN_INT8:return this.buf.readInt8()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+n.type)},c.JceInputStream.prototype.readInt16=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();switch(n.type){case c.DataHelp.EN_ZERO:return 0;case c.DataHelp.EN_INT8:return this.buf.readInt8();case c.DataHelp.EN_INT16:return this.buf.readInt16()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+n.type)},c.JceInputStream.prototype.readInt32=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();switch(n.type){case c.DataHelp.EN_ZERO:return 0;case c.DataHelp.EN_INT8:return this.buf.readInt8();case c.DataHelp.EN_INT16:return this.buf.readInt16();case c.DataHelp.EN_INT32:return this.buf.readInt32()}throw Error("read int8 type mismatch, tag:"+t+", get type:"+n.type)},c.JceInputStream.prototype.readInt64=function(t,e,i){if(0==this.skipToTag(t,e))return i;switch(this.readFrom().type){case c.DataHelp.EN_ZERO:return 0;case c.DataHelp.EN_INT8:return this.buf.readInt8();case c.DataHelp.EN_INT16:return this.buf.readInt16();case c.DataHelp.EN_INT32:return this.buf.readInt32();case c.DataHelp.EN_INT64:return this.buf.readInt64()}throw Error("read int64 type mismatch, tag:"+t+", get type:"+h.type)},c.JceInputStream.prototype.readFloat=function(t,e,i){if(0==this.skipToTag(t,e))return i;switch(this.readFrom().type){case c.DataHelp.EN_ZERO:return 0;case c.DataHelp.EN_FLOAT:return this.buf.readFloat()}throw Error("read float type mismatch, tag:"+t+", get type:"+h.type)},c.JceInputStream.prototype.readDouble=function(t,e,i){if(0==this.skipToTag(t,e))return i;switch(this.readFrom().type){case c.DataHelp.EN_ZERO:return 0;case c.DataHelp.EN_DOUBLE:return this.buf.readDouble()}throw Error("read double type mismatch, tag:"+t+", get type:"+h.type)},c.JceInputStream.prototype.readUInt8=function(t,e,i){return this.readInt16(t,e,i)},c.JceInputStream.prototype.readUInt16=function(t,e,i){return this.readInt32(t,e,i)},c.JceInputStream.prototype.readUInt32=function(t,e,i){return this.readInt64(t,e,i)},c.JceInputStream.prototype.readStruct=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type!=c.DataHelp.EN_STRUCTBEGIN)throw Error("read struct type mismatch, tag: "+t+", get type:"+n.type);return i.readFrom(this),this.skipToStructEnd(),i},c.JceInputStream.prototype.readString=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type==c.DataHelp.EN_STRING1)return this.buf.readString(this.buf.readUInt8());if(n.type==c.DataHelp.EN_STRING4)return this.buf.readString(this.buf.readUInt32());throw Error("read 'string' type mismatch, tag: "+t+", get type: "+n.type+".")},c.JceInputStream.prototype.readString2=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type==c.DataHelp.EN_STRING1)return this.buf.readBytes(this.buf.readUInt8());if(n.type==c.DataHelp.EN_STRING4)return this.buf.readBytes(this.buf.readUInt32());throw Error("read 'string' type mismatch, tag: "+t+", get type: "+n.type+".")},c.JceInputStream.prototype.readBytes=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type==c.DataHelp.EN_SIMPLELIST){var r=this.readFrom();if(r.type!=c.DataHelp.EN_INT8)throw Error("type mismatch, tag:"+t+",type:"+n.type+","+r.type);if((o=this.readInt32(0,!0))<0)throw Error("invalid size, tag:"+t+",type:"+n.type+","+r.type);return this.buf.readBytes(o)}if(n.type!=c.DataHelp.EN_LIST)throw Error("type mismatch, tag:"+t+",type:"+n.type);var o=this.readInt32(0,!0);return this.buf.readBytes(o)},c.JceInputStream.prototype.readVector=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type!=c.DataHelp.EN_LIST)throw Error("read 'vector' type mismatch, tag: "+t+", get type: "+n.type);var r=this.readInt32(0,!0);if(r<0)throw Error("invalid size, tag: "+t+", type: "+n.type+", size: "+r);for(var o=0;o<r;++o){var a="function"==typeof i.proto?new i.proto:i.proto;i.value.push(a._read(this,0,a._clone()))}return i},c.JceInputStream.prototype.readMap=function(t,e,i){if(0==this.skipToTag(t,e))return i;var n=this.readFrom();if(n.type!=c.DataHelp.EN_MAP)throw Error("read 'map' type mismatch, tag: "+t+", get type: "+n.type);var r=this.readInt32(0,!0);if(r<0)throw Error("invalid map, tag: "+t+", size: "+r);for(var o=0;o<r;o++){var a="function"==typeof i.kproto?new i.kproto:i.kproto,s="function"==typeof i.vproto?new i.vproto:i.vproto,u=a._read(this,0,a._clone()),l=s._read(this,1,s._clone());i.put(u,l)}return i},c.Util=c.Util||{},c.Util.jcestream=function(t,e){if(null!=t&&null!=t)if(t instanceof ArrayBuffer){e=e||16;for(var i=new Uint8Array(t),n="",r=0;r<i.length;r++)0!=r&&r%e==0?n+="\n":0!=r&&(n+=" "),n+=(15<i[r]?"":"0")+i[r].toString(16);console.log(n.toUpperCase())}else console.log("Taf.Util.jcestream::value is not ArrayBuffer");else console.log("Taf.Util.jcestream::value is null or undefined")},c.Util.str2ab=function(t){var e,i=t.length,n=new Array(i);for(e=0;e<i;++e)n[e]=t.charCodeAt(e);return new Uint8Array(n).buffer},c.Util.ajax=function(t,e,i,n){var r=new XMLHttpRequest;r.overrideMimeType("text/plain; charset=x-user-defined"),r.addEventListener("readystatechange",(function t(){4===r.readyState&&(200===r.status||304===r.status?i(c.Util.str2ab(r.response)):n(r.status),r.removeEventListener("readystatechange",t),r=void 0)})),r.open("post",t),r.send(e)},c.INT8=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt8(e,i)},this._read=function(t,e,i){return t.readInt8(e,!0,i)},this._className=function(){return c.CHAR}},c.INT16=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt16(e,i)},this._read=function(t,e,i){return t.readInt16(e,!0,i)},this._className=function(){return c.SHORT}},c.INT32=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt32(e,i)},this._read=function(t,e,i){return t.readInt32(e,!0,i)},this._className=function(){return c.INT32}},c.INT64=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt64(e,i)},this._read=function(t,e,i){return t.readInt64(e,!0,i)},this._className=function(){return c.INT64}},c.UINT8=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt16(e,i)},this._read=function(t,e,i){return t.readInt16(e,!0,i)},this._className=function(){return c.SHORT}},c.UInt16=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt32(e,i)},this._read=function(t,e,i){return t.readInt32(e,!0,i)},this._className=function(){return c.INT32}},c.UInt32=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt64(e,i)},this._read=function(t,e,i){return t.readInt64(e,!0,i)},this._className=function(){return c.INT64}},c.Float=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeFloat(e,i)},this._read=function(t,e,i){return t.readFloat(e,!0,i)},this._className=function(){return c.FLOAT}},c.Double=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeDouble(e,i)},this._read=function(t,e,i){return t.readDouble(e,!0,i)},this._className=function(){return c.DOUBLE}},c.STRING=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeString(e,i)},this._read=function(t,e,i){return t.readString(e,!0,i)},this._className=function(){return c.STRING}},c.BOOLEAN=function(){this._clone=function(){return!1},this._write=function(t,e,i){return t.writeBoolean(e,i)},this._read=function(t,e,i){return t.readBoolean(e,!0,i)},this._className=function(){return c.BOOLEAN}},c.ENUM=function(){this._clone=function(){return 0},this._write=function(t,e,i){return t.writeInt32(e,i)},this._read=function(t,e,i){return t.readInt32(e,!0,i)}},c.Vector=function(t){this.proto=t,this.value=[]},c.Vector.prototype._clone=function(){return new c.Vector("function"==typeof this.proto?new this.proto:this.proto)},c.Vector.prototype._write=function(t,e,i){return t.writeVector(e,i)},c.Vector.prototype._read=function(t,e,i){return t.readVector(e,!0,i)},c.Vector.prototype._className=function(){var t=d(this.proto);return c.TypeHelp.VECTOR.replace("$t",t)},c.Map=function(t,e){this.kproto=t,this.vproto=e,this.value=new Object},c.Map.prototype._clone=function(){var t="function"==typeof this.kproto?new this.kproto:this.kproto,e="function"==typeof this.vproto?new this.vproto:this.vproto;return new c.Map(t,e)},c.Map.prototype._write=function(t,e,i){return t.writeMap(e,i)},c.Map.prototype._read=function(t,e,i){return t.readMap(e,!0,i)},c.Map.prototype.put=function(t,e){this.value[t]=e},c.Map.prototype.get=function(t){return this.value[t]},c.Map.prototype.remove=function(t){delete this.value[t]},c.Map.prototype.clear=function(){this.value=new Object},c.Map.prototype.size=function(){var t=0;for(var e in this.value)t++;return t},c.Map.prototype._className=function(){var t=d(this.kproto),e=d(this.vproto);return c.TypeHelp.Map.replace("$k",t).replace("$v",e)};var f={EWebSocketCommandType:{EWSCmd_NULL:0,EWSCmd_RegisterReq:1,EWSCmd_RegisterRsp:2,EWSCmd_WupReq:3,EWSCmd_WupRsp:4,EWSCmdC2S_HeartBeat:5,EWSCmdS2C_HeartBeatAck:6,EWSCmdS2C_MsgPushReq:7,EWSCmdC2S_DeregisterReq:8,EWSCmdS2C_DeRegisterRsp:9,EWSCmdC2S_VerifyCookieReq:10,EWSCmdS2C_VerifyCookieRsp:11,EWSCmdC2S_VerifyHuyaTokenReq:12,EWSCmdS2C_VerifyHuyaTokenRsp:13,EWSCmdC2S_UNVerifyReq:14,EWSCmdS2C_UNVerifyRsp:15,EWSCmdC2S_RegisterGroupReq:16,EWSCmdS2C_RegisterGroupRsp:17,EWSCmdC2S_UnRegisterGroupReq:18,EWSCmdS2C_UnRegisterGroupRsp:19,EWSCmdC2S_HeartBeatReq:20,EWSCmdS2C_HeartBeatRsp:21,EWSCmdS2C_MsgPushReq_V2:22,EWSCmdC2S_UpdateUserExpsReq:23,EWSCmdS2C_UpdateUserExpsRsp:24,EWSCmdC2S_WSHistoryMsgReq:25,EWSCmdS2C_WSHistoryMsgRsp:26,EWSCmdS2C_EnterP2P:27,EWSCmdS2C_EnterP2PAck:28,EWSCmdS2C_ExitP2P:29,EWSCmdS2C_ExitP2PAck:30,EWSCmdC2S_SyncGroupReq:31,EWSCmdS2C_SyncGroupRsp:32,EWSCmdC2S_UpdateUserInfoReq:33,EWSCmdS2C_UpdateUserInfoRsp:34,EWSCmdC2S_MsgAckReq:35,EWSCmdS2C_MsgAckRsp:36,EWSCmdC2S_CloudGameReq:37,EWSCmdS2C_CloudGamePush:38,EWSCmdS2C_CloudGameRsp:39,EWSCmdS2C_RpcReq:40,EWSCmdC2S_RpcRsp:41,EWSCmdS2C_RpcRspRsp:42,EWSCmdC2S_GetStunPortReq:101,EWSCmdS2C_GetStunPortRsp:102,EWSCmdC2S_WebRTCOfferReq:103,EWSCmdS2C_WebRTCOfferRsp:104,EWSCmdC2S_SignalUpgradeReq:105,EWSCmdS2C_SignalUpgradeRsp:106},ELiveSource:{PC_YY:0,PC_HUYA:1,MOBILE_HUYA:2,WEB_HUYA:3},EGender:{MALE:0,FEMALE:1},TemplateType:{PRIMARY:1,RECEPTION:2},EStreamLineType:{STREAM_LINE_OLD_YY:0,STREAM_LINE_WS:1,STREAM_LINE_NEW_YY:2,STREAM_LINE_AL:3,STREAM_LINE_HUYA:4,STREAM_LINE_TX:5,STREAM_LINE_CDN:8,STREAM_LINE_HW:6,STREAM_LINE_BD:7,STREAM_LINE_GG:9,STREAM_LINE_CF:10,STREAM_LINE_QUICK_HUYA:99},eUserOperation:{USER_IN:1,USER_OUT:2,USER_MOVE:3},WebSocketCommand:function(){this.iCmdType=0,this.vData=new c.BinBuffer,this.lRequestId=0,this.traceId="",this.iEncryptType=0,this.lTime=0,this.sMD5=""}};f.WebSocketCommand.prototype._clone=function(){return new f.WebSocketCommand},f.WebSocketCommand.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WebSocketCommand.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WebSocketCommand.prototype.writeTo=function(t){t.writeInt32(0,this.iCmdType),t.writeBytes(1,this.vData),t.writeInt64(2,this.lRequestId),t.writeString(3,this.traceId),t.writeInt32(4,this.iEncryptType),t.writeInt64(5,this.lTime),t.writeString(6,this.sMD5)},f.WebSocketCommand.prototype.readFrom=function(t){this.iCmdType=t.readInt32(0,!1,this.iCmdType),this.vData=t.readBytes(1,!1,this.vData),this.lRequestId=t.readInt64(2,!1,this.lRequestId),this.traceId=t.readString(3,!1,this.traceId),this.iEncryptType=t.readInt32(4,!1,this.iEncryptType),this.lTime=t.readInt64(5,!1,this.lTime),this.sMD5=t.readString(6,!1,this.sMD5)},f.WSRegisterRsp=function(){this.iResCode=0,this.lRequestId=0,this.sMessage="",this.sBCConnHost=""},f.WSRegisterRsp.prototype._clone=function(){return new f.WSRegisterRsp},f.WSRegisterRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSRegisterRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSRegisterRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode),this.lRequestId=t.readInt64(1,!1,this.lRequestId),this.sMessage=t.readString(2,!1,this.sMessage),this.sBCConnHost=t.readString(3,!1,this.sBCConnHost)},f.WSPushMessage=function(){this.ePushType=0,this.iUri=0,this.sMsg=new c.BinBuffer,this.iProtocolType=0,this.sGroupId="",this.lMsgId=0,this.iMsgTag=0},f.WSPushMessage.prototype._clone=function(){return new f.WSPushMessage},f.WSPushMessage.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSPushMessage.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSPushMessage.prototype.writeTo=function(t){t.writeInt32(0,this.ePushType),t.writeInt64(1,this.iUri),t.writeBytes(2,this.sMsg),t.writeInt32(3,this.iProtocolType),t.writeString(4,this.sGroupId),t.writeInt64(5,this.lMsgId),t.writeInt32(6,this.iMsgTag)},f.WSPushMessage.prototype.readFrom=function(t){this.ePushType=t.readInt32(0,!1,this.ePushType),this.iUri=t.readInt64(1,!1,this.iUri),this.sMsg=t.readBytes(2,!1,this.sMsg),this.iProtocolType=t.readInt32(3,!1,this.iProtocolType),this.sGroupId=t.readString(4,!1,this.sGroupId),this.lMsgId=t.readInt64(5,!1,this.lMsgId),this.iMsgTag=t.readInt32(6,!1,this.iMsgTag)},f.WSUserInfo=function(){this.lUid=0,this.bAnonymous=!0,this.sGuid="",this.sToken="",this.lTid=0,this.lSid=0,this.lGroupId=0,this.lGroupType=0,this.sAppId="",this.sUA=""},f.WSUserInfo.prototype._clone=function(){return new f.WSUserInfo},f.WSUserInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSUserInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSUserInfo.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeBoolean(1,this.bAnonymous),t.writeString(2,this.sGuid),t.writeString(3,this.sToken),t.writeInt64(4,this.lTid),t.writeInt64(5,this.lSid),t.writeInt64(6,this.lGroupId),t.writeInt64(7,this.lGroupType),t.writeString(8,this.sAppId),t.writeString(9,this.sUA)},f.WSUserInfo.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.bAnonymous=t.readBoolean(1,!1,this.bAnonymous),this.sGuid=t.readString(2,!1,this.sGuid),this.sToken=t.readString(3,!1,this.sToken),this.lTid=t.readInt64(4,!1,this.lTid),this.lSid=t.readInt64(5,!1,this.lSid),this.lGroupId=t.readInt64(6,!1,this.lGroupId),this.lGroupType=t.readInt64(7,!1,this.lGroupType),this.sAppId=t.readString(8,!1,this.sAppId),this.sUA=t.readString(9,!1,this.sUA)},f.WSVerifyCookieReq=function(){this.lUid=0,this.sUA="",this.sCookie="",this.sGuid="",this.bAutoRegisterUid=0,this.sAppSrc=""},f.WSVerifyCookieReq.prototype._clone=function(){return new f.WSVerifyCookieReq},f.WSVerifyCookieReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSVerifyCookieReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSVerifyCookieReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sUA),t.writeString(2,this.sCookie),t.writeString(3,this.sGuid),t.writeInt32(4,this.bAutoRegisterUid),t.writeString(5,this.sAppSrc)},f.WSVerifyCookieRsp=function(){this.iValidate=0},f.WSVerifyCookieRsp.prototype._clone=function(){return new f.WSVerifyCookieRsp},f.WSVerifyCookieRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSVerifyCookieRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSVerifyCookieRsp.prototype.readFrom=function(t){this.iValidate=t.readInt32(0,!1,this.iValidate)},f.UserId=function(){this.lUid=0,this.sGuid="",this.sToken="",this.sHuYaUA="",this.sCookie="",this.iTokenType=0,this.sDeviceInfo=""},f.UserId.prototype._clone=function(){return new f.UserId},f.UserId.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.UserId.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.UserId.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sToken),t.writeString(3,this.sHuYaUA),t.writeString(4,this.sCookie),t.writeInt32(5,this.iTokenType),t.writeString(6,this.sDeviceInfo)},f.UserId.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sToken=t.readString(2,!1,this.sToken),this.sHuYaUA=t.readString(3,!1,this.sHuYaUA),this.sCookie=t.readString(4,!1,this.sCookie),this.iTokenType=t.readInt32(5,!1,this.iTokenType),this.sDeviceInfo=t.readString(6,!1,this.sDeviceInfo)},f.WSRegisterGroupReq=function(){this.vGroupId=new c.Vector(new c.STRING),this.sToken=""},f.WSRegisterGroupReq.prototype._clone=function(){return new f.WSRegisterGroupReq},f.WSRegisterGroupReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSRegisterGroupReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSRegisterGroupReq.prototype.writeTo=function(t){t.writeVector(0,this.vGroupId),t.writeString(1,this.sToken)},f.WSRegisterGroupRsp=function(){this.iResCode=0,this.vSupportP2PGroupId=new c.Vector(new c.STRING)},f.WSRegisterGroupRsp.prototype._clone=function(){return new f.WSRegisterGroupRsp},f.WSRegisterGroupRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSRegisterGroupRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSRegisterGroupRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode),this.vSupportP2PGroupId=t.readVector(1,!1,this.vSupportP2PGroupId)},f.WSUpdateUserInfoReq=function(){this.sAppSrc="",this.sGuid="",this.iReportMsgIdRatio=0,this.iSupportAck=0,this.tWSMsgStatInfo=new f.WSMsgStatInfo},f.WSUpdateUserInfoReq.prototype._clone=function(){return new f.WSUpdateUserInfoReq},f.WSUpdateUserInfoReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSUpdateUserInfoReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSUpdateUserInfoReq.prototype.writeTo=function(t){t.writeString(0,this.sAppSrc),t.writeString(1,this.sGuid),t.writeInt32(2,this.iReportMsgIdRatio),t.writeInt32(3,this.iSupportAck),t.writeStruct(6,this.tWSMsgStatInfo)},f.WSUpdateUserInfoRsp=function(){this.iResCode=0,this.iSupportAckMsgStat=0},f.WSUpdateUserInfoRsp.prototype._clone=function(){return new f.WSUpdateUserInfoRsp},f.WSUpdateUserInfoRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSUpdateUserInfoRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSUpdateUserInfoRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode),this.iSupportAckMsgStat=t.readInt32(1,!1,this.iSupportAckMsgStat)},f.WSMsgStatInfo=function(){this.mSignalPushUriCount=new c.Map(new c.STRING,new c.Map(new c.INT64,new c.INT32)),this.mP2pPushUriCount=new c.Map(new c.STRING,new c.Map(new c.INT64,new c.INT32)),this.iSupportAckMsgStat=0},f.WSMsgStatInfo.prototype._clone=function(){return new f.WSMsgStatInfo},f.WSMsgStatInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSMsgStatInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSMsgStatInfo.prototype.writeTo=function(t){t.writeMap(0,this.mSignalPushUriCount),t.writeMap(1,this.mP2pPushUriCount),t.writeInt32(3,this.iSupportAckMsgStat)},f.WSMsgStatInfo.prototype.readFrom=function(t){this.mSignalPushUriCount=t.readMap(0,!1,this.mSignalPushUriCount),this.mP2pPushUriCount=t.readMap(1,!1,this.mP2pPushUriCount),this.iSupportAckMsgStat=t.readInt32(3,!1,this.iSupportAckMsgStat)},f.WSRedirect=function(){this.vRemoveIps=new c.Vector(new c.STRING),this.sRedirectIp=""},f.WSRedirect.prototype._clone=function(){return new f.WSRedirect},f.WSRedirect.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSRedirect.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSRedirect.prototype.writeTo=function(t){t.writeVector(0,this.vRemoveIps),t.writeString(1,this.sRedirectIp)},f.WSRedirect.prototype.readFrom=function(t){this.vRemoveIps=t.readVector(0,!1,this.vRemoveIps),this.sRedirectIp=t.readString(1,!1,this.sRedirectIp)},f.WSPushMessage_V2=function(){this.sGroupId="",this.vMsgItem=new c.Vector(new f.WSMsgItem)},f.WSPushMessage_V2.prototype._clone=function(){return new f.WSPushMessage_V2},f.WSPushMessage_V2.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSPushMessage_V2.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSPushMessage_V2.prototype.writeTo=function(t){t.writeString(0,this.sGroupId),t.writeVector(1,this.vMsgItem)},f.WSPushMessage_V2.prototype.readFrom=function(t){this.sGroupId=t.readString(0,!1,this.sGroupId),this.vMsgItem=t.readVector(1,!1,this.vMsgItem)},f.WSMsgItem=function(){this.iUri=0,this.sMsg=new c.BinBuffer,this.lMsgId=0},f.WSMsgItem.prototype._clone=function(){return new f.WSMsgItem},f.WSMsgItem.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSMsgItem.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSMsgItem.prototype.writeTo=function(t){t.writeInt64(0,this.iUri),t.writeBytes(1,this.sMsg),t.writeInt64(2,this.lMsgId)},f.WSMsgItem.prototype.readFrom=function(t){this.iUri=t.readInt64(0,!1,this.iUri),this.sMsg=t.readBytes(1,!1,this.sMsg),this.lMsgId=t.readInt64(2,!1,this.lMsgId)},f.LiveLaunchReq=function(){this.tId=new f.UserId,this.tLiveUB=new f.LiveUserbase,this.bSupportDomain=0},f.LiveLaunchReq.prototype._clone=function(){return new f.LiveLaunchReq},f.LiveLaunchReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.LiveLaunchReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.LiveLaunchReq.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeStruct(1,this.tLiveUB),t.writeInt32(2,this.bSupportDomain)},f.LiveLaunchRsp=function(){this.sGuid="",this.iTime=0,this.vProxyList=new c.Vector(new f.LiveProxyValue),this.eAccess=0,this.sClientIp=""},f.LiveLaunchRsp.prototype._clone=function(){return new f.LiveLaunchRsp},f.LiveLaunchRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.LiveLaunchRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.LiveLaunchRsp.prototype.readFrom=function(t){this.sGuid=t.readString(0,!1,this.sGuid),this.iTime=t.readInt32(1,!1,this.iTime),this.vProxyList=t.readVector(2,!1,this.vProxyList),this.eAccess=t.readInt32(3,!1,this.eAccess),this.sClientIp=t.readString(4,!1,this.sClientIp)},f.LiveProxyValue=function(){this.eProxyType=0,this.sProxy=new c.Vector(new c.STRING)},f.LiveProxyValue.prototype._clone=function(){return new f.LiveProxyValue},f.LiveProxyValue.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.LiveProxyValue.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.LiveProxyValue.prototype.writeTo=function(t){t.writeInt32(0,this.eProxyType),t.writeVector(1,this.sProxy)},f.LiveProxyValue.prototype.readFrom=function(t){this.eProxyType=t.readInt32(0,!1,this.eProxyType),this.sProxy=t.readVector(1,!1,this.sProxy)},f.WSLaunchReq=function(){this.lUid=0,this.sGuid="",this.sUA="",this.sAppSrc="",this.tDeviceInfo=new f.WSDeviceInfo},f.WSLaunchReq.prototype._clone=function(){return new f.WSLaunchReq},f.WSLaunchReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSLaunchReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSLaunchReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sUA),t.writeString(3,this.sAppSrc),t.writeStruct(4,this.tDeviceInfo)},f.WSLaunchRsp=function(){this.sGuid="",this.sClientIp=""},f.WSLaunchRsp.prototype._clone=function(){return new f.WSLaunchRsp},f.WSLaunchRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSLaunchRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSLaunchRsp.prototype.readFrom=function(t){this.sGuid=t.readString(0,!1,this.sGuid),this.sClientIp=t.readString(1,!1,this.sClientIp)},f.WSDeviceInfo=function(){this.sIMEI="",this.sAPN="",this.sNetType="",this.sDeviceId="",this.sMId=""},f.WSDeviceInfo.prototype._clone=function(){return new f.WSDeviceInfo},f.WSDeviceInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSDeviceInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSDeviceInfo.prototype.writeTo=function(t){t.writeString(0,this.sIMEI),t.writeString(1,this.sAPN),t.writeString(2,this.sNetType),t.writeString(3,this.sDeviceId),t.writeString(4,this.sMId)},f.WSDeviceInfo.prototype.readFrom=function(t){this.sIMEI=t.readString(0,!1,this.sIMEI),this.sAPN=t.readString(1,!1,this.sAPN),this.sNetType=t.readString(2,!1,this.sNetType),this.sDeviceId=t.readString(3,!1,this.sDeviceId),this.sMId=t.readString(4,!1,this.sMId)},f.QueryHttpDnsReq=function(){this.lUid=0,this.sUA="",this.vDomain=new c.Vector(new c.STRING),this.sAppSrc="",this.sClientIp="",this.iIpStack=0,this.iIpType=0},f.QueryHttpDnsReq.prototype._clone=function(){return new f.QueryHttpDnsReq},f.QueryHttpDnsReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.QueryHttpDnsReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.QueryHttpDnsReq.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sUA),t.writeVector(2,this.vDomain),t.writeString(3,this.sAppSrc),t.writeString(4,this.sClientIp),t.writeInt32(5,this.iIpStack),t.writeInt32(6,this.iIpType)},f.QueryHttpDnsRsp=function(){this.mDomain2Ip=new c.Map(new c.STRING,new f.HttpDnsItem),this.iEnvType=0},f.QueryHttpDnsRsp.prototype._clone=function(){return new f.QueryHttpDnsRsp},f.QueryHttpDnsRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.QueryHttpDnsRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.QueryHttpDnsRsp.prototype.readFrom=function(t){this.mDomain2Ip=t.readMap(0,!1,this.mDomain2Ip),this.iEnvType=t.readInt32(1,!1,this.iEnvType)},f.HttpDnsItem=function(){this.vIp=new c.Vector(new c.STRING),this.iExpireTime=0,this.vIpv6=new c.Vector(new c.STRING)},f.HttpDnsItem.prototype._clone=function(){return new f.HttpDnsItem},f.HttpDnsItem.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.HttpDnsItem.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.HttpDnsItem.prototype.writeTo=function(t){t.writeVector(0,this.vIp),t.writeInt64(1,this.iExpireTime),t.writeVector(2,this.vIpv6)},f.HttpDnsItem.prototype.readFrom=function(t){this.vIp=t.readVector(0,!1,this.vIp),this.iExpireTime=t.readInt64(1,!1,this.iExpireTime),this.vIpv6=t.readVector(2,!1,this.vIpv6)},f.MetricDetailSet=function(){this.tId=new f.UserId,this.vMetricDetail=new c.Vector(new f.MetricDetail)},f.MetricDetailSet.prototype._clone=function(){return new f.MetricDetailSet},f.MetricDetailSet.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.MetricDetailSet.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.MetricDetailSet.prototype.writeTo=function(t){t.writeStruct(0,this.tId),t.writeVector(1,this.vMetricDetail)},f.MetricDetailSet.prototype.readFrom=function(t){this.tId=t.readStruct(0,!0,this.tId),this.vMetricDetail=t.readVector(1,!0,this.vMetricDetail)},f.MetricDetail=function(){this.sMetricName="",this.iTS=0,this.vDimension=new c.Vector(new f.Dimension),this.vFiled=new c.Vector(new f.Field),this.vExLog=new c.Vector(new f.Dimension)},f.MetricDetail.prototype._clone=function(){return new f.MetricDetail},f.MetricDetail.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.MetricDetail.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.MetricDetail.prototype.writeTo=function(t){t.writeString(0,this.sMetricName),t.writeInt64(1,this.iTS),t.writeVector(2,this.vDimension),t.writeVector(3,this.vFiled),t.writeVector(4,this.vExLog)},f.MetricDetail.prototype.readFrom=function(t){this.sMetricName=t.readString(0,!0,this.sMetricName),this.iTS=t.readInt64(1,!1,this.iTS),this.vDimension=t.readVector(2,!1,this.vDimension),this.vFiled=t.readVector(3,!1,this.vFiled),this.vExLog=t.readVector(4,!1,this.vExLog)},f.Field=function(){this.sName="",this.fValue=0},f.Field.prototype._clone=function(){return new f.Field},f.Field.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.Field.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.Field.prototype.writeTo=function(t){t.writeString(0,this.sName),t.writeDouble(1,this.fValue)},f.Field.prototype.readFrom=function(t){this.sName=t.readString(0,!1,this.sName),this.fValue=t.readDouble(1,!1,this.fValue)},f.Dimension=function(){this.sName="",this.sValue=""},f.Dimension.prototype._clone=function(){return new f.Dimension},f.Dimension.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.Dimension.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.Dimension.prototype.writeTo=function(t){t.writeString(0,this.sName),t.writeString(1,this.sValue)},f.Dimension.prototype.readFrom=function(t){this.sName=t.readString(0,!1,this.sName),this.sValue=t.readString(1,!1,this.sValue)},f.WSUnRegisterGroupReq=function(){this.vGroupId=new c.Vector(new c.STRING)},f.WSUnRegisterGroupReq.prototype._clone=function(){return new f.WSUnRegisterGroupReq},f.WSUnRegisterGroupReq.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSUnRegisterGroupReq.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSUnRegisterGroupReq.prototype.writeTo=function(t){t.writeVector(0,this.vGroupId)},f.WSUnRegisterGroupRsp=function(){this.iResCode=0},f.WSUnRegisterGroupRsp.prototype._clone=function(){return new f.WSUnRegisterGroupRsp},f.WSUnRegisterGroupRsp.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSUnRegisterGroupRsp.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSUnRegisterGroupRsp.prototype.readFrom=function(t){this.iResCode=t.readInt32(0,!1,this.iResCode)},f.WSConnectParaInfo=function(){this.lUid=0,this.sGuid="",this.sUA="",this.sAppSrc="",this.sMid="",this.sExp="",this.iTokenType=0,this.sToken="",this.sCookie="",this.sTraceId="",this.mCustomHeaders=new c.Map(new c.STRING,new c.STRING)},f.WSConnectParaInfo.prototype._clone=function(){return new f.WSConnectParaInfo},f.WSConnectParaInfo.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.WSConnectParaInfo.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.WSConnectParaInfo.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeString(1,this.sGuid),t.writeString(2,this.sUA),t.writeString(3,this.sAppSrc),t.writeString(4,this.sMid),t.writeString(5,this.sExp),t.writeInt32(6,this.iTokenType),t.writeString(7,this.sToken),t.writeString(8,this.sCookie),t.writeString(9,this.sTraceId),t.writeMap(10,this.mCustomHeaders)},f.WSConnectParaInfo.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.sGuid=t.readString(1,!1,this.sGuid),this.sUA=t.readString(2,!1,this.sUA),this.sAppSrc=t.readString(3,!1,this.sAppSrc),this.sMid=t.readString(4,!1,this.sMid),this.sExp=t.readString(5,!1,this.sExp),this.iTokenType=t.readInt32(6,!1,this.iTokenType),this.sToken=t.readString(7,!1,this.sToken),this.sCookie=t.readString(8,!1,this.sCookie),this.sTraceId=t.readString(9,!1,this.sTraceId),this.mCustomHeaders=t.readMap(10,!1,this.mCustomHeaders)},f.CloudGamePacket=function(){this.sToken="",this.sCommand="",this.packetBytes=new c.BinBuffer,this.sRequestId=""},f.CloudGamePacket.prototype._clone=function(){return new f.CloudGamePacket},f.CloudGamePacket.prototype._write=function(t,e,i){t.writeStruct(e,i)},f.CloudGamePacket.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},f.CloudGamePacket.prototype.writeTo=function(t){t.writeString(0,this.sToken),t.writeString(1,this.sCommand),t.writeBytes(2,this.packetBytes),t.writeString(3,this.sRequestId)},f.CloudGamePacket.prototype.readFrom=function(t){this.sToken=t.readString(0,!1,this.sToken),this.sCommand=t.readString(1,!1,this.sCommand),this.packetBytes=t.readBytes(2,!1,this.packetBytes),this.sRequestId=t.readString(3,!1,this.sRequestId)};var p=0,m=1,y=2,v=-1,g=-3,_=-10,S=-500,w=-10092,b=-10504,I=-20001,T=-20002,P=-20003,E={storeDns:function(t,e){for(var i="",n=this.getIpsKey(!0),r=t.join("|").toLocaleLowerCase(),o=0,a=r.length;o<a;o++){var s=n[r.charAt(o)],u=Math.random()*s.length>>0;i+=s.charAt(u)}localStorage["wssdns".concat(e)]=i},getDns:function(t){var e=localStorage["wssdns".concat(t)];if(!e)return[];for(var i="",n=this.getIpsKey(!1),r=0,o=e.length;r<o;r++)i+=n[e.charAt(r)];return i.split("|")},storeIps:function(t,e){for(var i="",n=this.getIpsKey(!0),r=t.join("|").toLocaleLowerCase(),o=0,a=r.length;o<a;o++){var s=n[r.charAt(o)],u=Math.random()*s.length>>0;i+=s.charAt(u)}localStorage["wssips".concat(e)]=i},getIps:function(t){var e=localStorage["wssips".concat(t)];if(!e)return[];for(var i="",n=this.getIpsKey(!1),r=0,o=e.length;r<o;r++)i+=n[e.charAt(r)];return i.split("|")},getIpsKey:function(t){for(var e=["-",".",":","|"],i="_N1Y%/ny^6?Mi7|wCe#$VmT=.GBut]3L*f<acX2Eop>d}WqKPQ@r;zx!s`(:IHFRZ~[A{Jb-O&D)v0Ukj95,8lg+h4S",n={},r=0;r<40;r++){var o=r<11?3:2,a=i.substr(0,o);i=i.substr(o);var s=r+"";if(13<r?s=String.fromCharCode(r+83):9<r&&(s=e[r-10]),t)n[s]=a;else for(var u=0;u<a.length;u++)n[a.charAt(u)]=s}return n},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null},parseQueryString:function(t){for(var e=/([^\?\=\&]+)\=([^\?\=\&]*)/g,i={};e.exec(t);)i[RegExp.$1]=RegExp.$2;return i},ab2str:function(t,e){for(var i=new DataView(t),n=i.byteLength,r=0,o=[],a=0;a<n;a++)o.push(String.fromCharCode(i.getUint8(r++)));var s=o.join("");if(e)try{s=decodeURIComponent(escape(s))}catch(t){}return s},copy:function(t,e){for(var i in e)t[i]=e[i];return t}},k={};k.UriMapping=o({},k.UriMapping,{1025305:f.WSRedirect}),k.WupMapping=o({},k.WupMapping,{wsLaunch:f.WSLaunchRsp,queryHttpDns:f.QueryHttpDnsRsp});var R=99;function C(t,e){var i=t.toString().length,n=Math.max(0,e-i);return"0".repeat(n)+t}function O(){var t=new Date,e=t.getFullYear(),i=C(t.getMonth()+1,2),n=C(t.getDate(),2),r=C(t.getHours(),2),o=C(t.getMinutes(),2),a=C(t.getSeconds(),2),s=C(t.getMilliseconds(),3);return"".concat(e,"-").concat(i,"-").concat(n," ").concat(r,":").concat(o,":").concat(a,".").concat(s," ")}var A={_data:[],_length:0,init:function(){var t=Number(localStorage._logLevel);isNaN(t)||(R=t)},debug:function(){var t=O(),e=Array.prototype.slice.call(arguments);e[0]=t+e[0],R<=-1&&console.log.apply(console,e)},log:function(t){var e=O(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],R<=0&&console.log.apply(console,i),A.record(i,"log")},info:function(t){var e=O(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],R<=1&&console.info.apply(console,i),A.record(i,"info")},warn:function(t){var e=O(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],R<=2&&console.warn.apply(console,i),A.record(i,"warn")},error:function(t){var e=O(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],R<=3&&console.error.apply(console,i),A.record(i,"error")},group:function(t){var e=O(),i=Array.prototype.slice.call(arguments);i[0]=e+i[0],R<=1&&(console.groupCollapsed||console.group||console.log).apply(console,i),A.record(i,"group")},groupEnd:function(){console.groupEnd&&console.groupEnd.apply(console)},setLevel:function(t){t!=R&&(console.log(O()+" set log level from "+R+" to "+t),R=t)},getLevel:function(){return R},record:function(e,i){1100===A._length&&(A._data.splice(0,100),A._length=1e3);var n=0,r=(e.shift()||"").toString();for(r=r.replace(/\%c/gi,(function(t,e){return n++,""}));n--&&e.length;)e.shift();for(var o=0,a=e.length;o<a;o++)"object"==t(e[o])&&(e[o]="");e.unshift(r);var s=e.join(" ");A._length++,A._data.push("[".concat(i,"]").concat(s))},getLog:function(){return A._data},logcss:function(t){return"color:"+t+";font-weight:900"}},L={WEBSOCKET_CONNECTED:"WEBSOCKET_CONNECTED",WEBSOCKET_DOLAUNCH:"WEBSOCKET_DOLAUNCH",VERIFYCOOKIE_PASS:"VERIFYCOOKIE_PASS",WS_REGISTER_GROUP_RSP:"WS_REGISTER_GROUP_RSP",WS_UNREGISTER_GROUP_RSP:"WS_UNREGISTER_GROUP_RSP",WS_CONNET_STATE:"WS_CONNET_STATE",WS_URI_NOTICE:"WS_URI_NOTICE",EXT_TAF_DATA:"extTafData",CLOUD_GAME_DATA:"CLOUD_GAME_DATA"},N={setCookie:function(t,e,i,n,r){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var a=t+"="+e+"; expires="+o.toUTCString();n&&(a+="; domain="+n),r&&(a+="; path="+r),document.cookie=a},getCookie:function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){var o=i[n].trim();if(0==o.indexOf(e))return o.substr(e.length)}return""},clearCookie:function(t){setCookie(t,"",-1)}},M=function(){function t(){e(this,t),this.list=[],this.tickHandler=0,this.trytime=u.config.tryCime||8}return n(t,[{key:"add",value:function(t){-1!=t.id&&(t.trycount=1,t.time=0,t.paramlist=t.paramlist||[t.moduleName,t.funcName,t.data,t.id,t.callbackFun],this.list.push(t),this.turnOn())}},{key:"getCallBack",value:function(t){for(var e in this.list)if(this.list[e].id==t)return this.list[e].callbackFun;return null}},{key:"del",value:function(t){if(-1!=t)for(var e in this.list)if(this.list[e].id==t){this.list.splice(e,1);break}}},{key:"getDataById",value:function(t){for(var e in this.list)if(this.list[e].id==t)return this.list[e];return null}},{key:"loop",value:function(){var t=[];for(var e in this.list){var i=this.list[e];if(i.time<this.trytime)i.time++;else if(i.trycount++,i.time=0,i.trycount>i.tryCountMax)i.errFun(i.id,i.funcName,i.callbackFun),t.push(i.id);else{var n=i.paramlist;i.reSend&&i.reSend.apply(this,n),u.report.setDim(i.id,"trycount",i.trycount)}}for(var r in t)this.del(t[r]);0==this.list.length&&this.turnOff()}},{key:"turnOn",value:function(){var t=this;0==this.tickHandler&&(this.tickHandler=setInterval((function(){t.loop()}),1e3))}},{key:"turnOff",value:function(){clearInterval(this.tickHandler),this.tickHandler=0}}]),t}(),U={},D=null,B={},F={addEvent:function(t,e){return void 0===U[t]&&(U[t]=[]),"function"==typeof e&&U[t].push(e),this},removeEvent:function(t,e){if(null!=t&&t===D)return void 0===B[t]&&(B[t]=[]),B[t].push(e),this;var i=U[t];if(i instanceof Array)if("function"==typeof e){for(var n=0,r=i.length;n<r;n++)if(i[n]===e){i.splice(n,1);break}0==i.length&&delete U[t]}else null==e&&delete U[t];return this},fireEvent:function(t,e){var i=U[D=t];if(i instanceof Array)for(var n=0,r=i.length;n<r;n++)"function"==typeof i[n]&&i[n](e);if(D=null,(i=B[t])instanceof Array){for(n=0,r=i.length;n<r;n++)this.removeEvent(t,i[n]);delete B[t]}return this},hasListener:function(t,e){if(!t)return!1;var i=U[t];if(i instanceof Array)if("function"==typeof e){for(var n=0,r=i.length;n<r;n++)if(i[n]===e)return!0}else if(null==e&&0<i.length)return!0;return!1}},x=function(){function t(){e(this,t),this.index=0,this.MAX_MESSAGE_COUNT=1e3,this.cacheArr=[]}return n(t,[{key:"cache",value:function(t){var e=this.cacheArr.indexOf(t);return this.index>=this.MAX_MESSAGE_COUNT&&(this.index=0),this.cacheArr[this.index]=t,this.index++,-1!=e}}]),t}(),j=function(){function i(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e(this,i),this.DEBUG_IP=n.DEBUG_IP||"testws.va.huya.com:80",this.DEFAULT_IP=n.DEFAULT_IP||"ws.api.huya.com",this.CDN_IP=n.CDN_IP||"cdnws.api.huya.com",this.WSS_DEBUG_IP=n.WSS_DEBUG_IP||"testws.va.huya.com:443",this.WSS_DEFAULT_IP=n.WSS_DEFAULT_IP||"wsapi.huya.com",this.WSS_CDN_IP=n.WSS_CDN_IP||"cdnws.api.huya.com",this.HTTP_IP=n.HTTP_IP||"cdnws.api.huya.com",this.HTTP_DEBUG_IP=n.HTTP_DEBUG_IP||"testws.va.huya.com",this.STORE_DNS=this.WSS_CDN_IP,this.connected=!1,this.ws=null,this.url="",this.wsType=n.wsType||0,this.listeners={},this.lockType=null,this.delayRemove={},this._pingTimer=0,this.isDoLaunch=!1,this.isHttps=-1<location.protocol.indexOf("https"),this.baseinfo="?baseinfo=default",this.wsBaseInfo="?baseinfo=default",this.extTafFunNameList=[],this.wsProtocol=!u.ISDEBUG||this.isHttps?"wss://":"ws://",this.connectType=n.connectType||0,this.wsConnectTime=0,this.reConnectTimes=0,this.reconnectDecay=1.5,this.maxReconnectInterval=3e4,this.reconnectInterval=1e3,this.reconnectTimeId=0,this.reconnectMax=120,this.cloudGameIpList=[],this.signalCache=new x,this.wsurl="",this.wsIps=[],this.httpWs=[],this.wsBaseInfo=this.setBaseinfo(!1,""),this.retry=new M,1!=this.connectType&&(A.log("configs",n),A.log("G",u),n.isForeign&&(this.WSS_DEBUG_IP=n.WSS_DEBUG_IP||"testws.master.live:443",this.WSS_DEFAULT_IP=n.WSS_DEFAULT_IP||"wsapi.nimo.tv",this.WSS_CDN_IP=n.WSS_CDN_IP||"wsapi-global.nimo.tv",this.HTTP_IP=n.HTTP_IP||"wsapi.nimo.tv",this.HTTP_DEBUG_IP=n.HTTP_DEBUG_IP||"testws.master.live",this.STORE_DNS=this.WSS_DEFAULT_IP,A.log("======",this.WSS_DEBUG_IP)),F.addEvent("1025305",(function(e){t.onWSRedirect(e)})))}return n(i,[{key:"start",value:function(){this.wsConnectTime=Date.now(),this._testws=localStorage._testws,this._testws&&""!=this._testws||u.ISDEBUG?this.connecting():this.testWsIp(),setTimeout(function(){this.wsIps.unshift(u.ISDEBUG?this.CDN_IP:this.WSS_CDN_IP),this.connecting()}.bind(this),5e3)}},{key:"testWsIp",value:function(t){var e;t&&0<t.length?e=t:u.ISDEBUG?(e=E.getIps(this.connectType),delete localStorage.wssips):(e=E.getDns(this.connectType),delete localStorage.wssdns);var i=e.length;0==i&&this.connecting();for(var n=!1,r=[],o=function(t){var e=t.currentTarget,i=e.ip;e.onopen=e.onclose=e.onerror=void 0,n?(this.wsIps.push(i),e.close()):(n=!0,this.url=this.wsProtocol+i,this.connecting(e),this.onopen())},a=function(t){var e=t.currentTarget.ip;-1==r.indexOf(e)&&r.push(e),r.length!=i||n||1==this.connectType||this.connecting()},s=0;s<i;s++){var c=e[s],l=this.wsProtocol+c+this.wsBaseInfo;A.log("WebSocket",l);var h=new WebSocket(l);h.ip=c,h.onopen=o.bind(this),h.onclose=a.bind(this),h.onerror=a.bind(this)}}},{key:"connecting",value:function(t){if(!this.connected){if(A.log("connecting"),this.ws){this.releaseWs(this.ws);var e=this.url.replace(this.wsProtocol,"");1==this.wsType?this.wsIps.push(e):2==this.wsType&&this.httpWs.push(e)}if(t)this.ws=t,this.wsType=1;else{var i="",n=localStorage._testws;n&&""!=n?(this.wsType=3,i=n):(this.wsType=0,i=u.ISDEBUG?this.DEFAULT_IP:this.WSS_DEFAULT_IP,u.report.setCommonDim("iptype",2),u.ISDEBUG?(this.wsType=4,i=this.isHttps?this.WSS_DEBUG_IP:this.DEBUG_IP,u.report.setCommonDim("iptype",1)):0<this.wsIps.length?(this.wsType=1,i=this.wsIps.shift(),this.WSS_CDN_IP==i?u.report.setCommonDim("iptype",5):u.report.setCommonDim("iptype",4)):0<this.httpWs.length&&(this.wsType=2,i=this.httpWs.shift())),this.url=this.wsProtocol+i,A.log("WebSocket,connet",this.url+this.wsBaseInfo),this.ws=new WebSocket(this.url+this.wsBaseInfo)}this.ws.onopen=this.onopen.bind(this),this.ws.onclose=this.onclose.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onmessage=this.onmessage.bind(this)}}},{key:"releaseWs",value:function(t){if(t){A.log("===== releaseWs =====",t),clearInterval(this._pingTimer),this._pingTimer=0,t.onopen=t.onclose=t.onerror=t.onmessage=void 0;try{t.close()}catch(t){}}}},{key:"doLaunch",value:function(){if(!this.isDoLaunch){this.isDoLaunch=!0;var t=new f.WSLaunchReq;t.lUid=u.uid,t.sGuid=u.guid,t.sUA=u.ua,t.sAppSrc=u.appSrc,this.sendWup("launch","wsLaunch",t,this.onDoLaunch.bind(this))}}},{key:"onDoLaunch",value:function(t){if(u.guid!=t.sGuid&&(u.guid=t.sGuid,u.userId.sGuid=u.guid,this.sendWSUpdateUserInfoReq("",t.sGuid)),localStorage)try{localStorage.setItem("_SIGNAL_GUID_",u.guid)}catch(t){}window._SIGNAL_GUID_=u.guid;var e=u.config.domain||"";N.setCookie("guid",t.sGuid,365,e,"/"),this.queryHttpDns(),F.fireEvent(L.WEBSOCKET_DOLAUNCH,{guid:u.guid})}},{key:"queryHttpDns",value:function(){var t,e=this,i=new f.QueryHttpDnsReq;i.lUid=u.uid,i.sUA=u.ua,i.sAppSrc=u.appSrc,i.iIpType=1;var n=[this.STORE_DNS];(t=i.vDomain.value).push.apply(t,n),this.sendWupHttp("launch","queryHttpDns",i,-1,(function(t){e.onGueryHttpDns(t)}))}},{key:"onGueryHttpDns",value:function(t){if(!u.ISDEBUG)for(var e in t.mDomain2Ip.value)if(e==this.STORE_DNS){var i=t.mDomain2Ip.value[e].vIp.value;E.storeDns(i,this.connectType);break}}},{key:"send",value:function(t){this.ws&&this.connected&&this.ws.send(t)}},{key:"onopen",value:function(){var t=this;this.wsurl=this.url.replace(this.wsProtocol,""),this.connected||0!=this.reConnectTimes||(this.wsConnectTime=Date.now()-this.wsConnectTime),A.log("onopen",this.wsurl),this.connected=!0,F.fireEvent(L.WEBSOCKET_CONNECTED,{type:this.connectType}),F.fireEvent(L.WS_CONNET_STATE,{connected:this.connected,type:"open",connectType:this.connectType}),clearInterval(this._pingTimer),this._pingTimer=setInterval((function(){t.sendHeartBeat()}),6e4),this.reConnectTimes=0,clearTimeout(this.reconnectTimeId),1!=this.connectType&&(this.doLaunch(),this.sendVerifyCookie())}},{key:"onclose",value:function(t){var e=this;if(this.connected=!1,this.isDoLaunch=!1,F.fireEvent(L.WS_CONNET_STATE,{connected:this.connected,type:"close",code:t.code,reason:t.reason,connectType:this.connectType}),this.reConnectTimes++,this.reConnectTimes>this.reconnectMax)A.log("%c=== WebSocket重连次数超标 ===","font-size:120%");else{1==this.connectType&&(this.reconnectDecay=.1);var i=this.reconnectInterval*Math.pow(this.reconnectDecay,this.reConnectTimes);clearTimeout(this.reconnectTimeId),this.reconnectTimeId=setTimeout((function(){e.reconnect(!0),A.log("%c=== WebSocket 重连"+e.reConnectTimes+"==="+e.wsurl,"font-size:120%")}),i>this.maxReconnectInterval?this.maxReconnectInterval:i)}}},{key:"reconnetWS",value:function(){this.wsconnected||(this.reConnectTimes=0,this.isDoLaunch=!1,this.connecting())}},{key:"onerror",value:function(t){this.connected=!1,F.fireEvent(L.WS_CONNET_STATE,{connected:this.connected,type:"error",connectType:this.connectType}),A.log("%c=== WebSocket Error ===","font-size:120%",t)}},{key:"sendHeartBeat",value:function(){var t=new f.WebSocketCommand;t.iCmdType=f.EWebSocketCommandType.EWSCmdC2S_HeartBeatReq;var e=new c.JceOutputStream;t.writeTo(e),this.send(e.getBuffer())}},{key:"onmessage",value:function(t){var e=this,i=new FileReader;i.onload=function(){e.decodeTaf(i)},i.readAsArrayBuffer(t.data)}},{key:"decodeTaf",value:function(t){var e=t.result;1<localStorage.__wup&&c.Util.jcestream(e,32);var i=new c.JceInputStream(e),n=new f.WebSocketCommand;switch(n.readFrom(i),n.iCmdType){case f.EWebSocketCommandType.EWSCmd_RegisterRsp:i=new c.JceInputStream(n.vData.buffer);var r=new f.WSRegisterRsp;r.readFrom(i),F.fireEvent("WSRegisterRsp",r);break;case f.EWebSocketCommandType.EWSCmdS2C_RegisterGroupRsp:i=new c.JceInputStream(n.vData.buffer);var o=new f.WSRegisterGroupRsp;o.readFrom(i),A.log("%c<<<<<<< %crspregisterGroup",A.logcss("#0000E3"),A.logcss("#D9006C"),o),F.fireEvent(L.WS_REGISTER_GROUP_RSP,o),this.retry.del("group");break;case f.EWebSocketCommandType.EWSCmdS2C_UnRegisterGroupRsp:i=new c.JceInputStream(n.vData.buffer);var a=new f.WSUnRegisterGroupRsp;a.readFrom(i),A.log("%c<<<<<<< %crspunRegisterGroup",A.logcss("#0000E3"),A.logcss("#D9006C"),a),F.fireEvent(L.WS_UNREGISTER_GROUP_RSP,a);break;case f.EWebSocketCommandType.EWSCmd_WupRsp:var s=new c.Wup;s.decode(n.vData.buffer);var l=-1,h=!1;try{l=s.readInt32("")}catch(t){h=!0,A.log("获取返回值失败",t)}var d=s.iRequestId,m=s.sFuncName,v=s.sServantName;u.report.setField(d,"hysignal_response"),u.report.setDim(d,"retcode",l),l<0?u.report.setDim(d,"success",y):u.report.setDim(d,"success",p),u.report.setField(d,"decode_response_begin"),u.report.setField(d,"unipacket_decode_begin"),u.report.setField(d,"unipacket_decode_end"),this.fireExtTafData(0,m,n.vData.buffer);var g=k.WupMapping[m],_=this.retry.getCallBack(d),S={id:d,fn:m,cb:_};if(g){var w=new g;w.bcode=l;try{if(0<=l){var I=3==s.iVersion?s.newdata:s.data,P=this.getWupKey(I,h);u.report.setField(d,"unipacket_read_rsp_end"),"noKey"!=P&&s.readStruct(P,w,g)}}catch(t){return A.log("ConstEnum.SIGNAL_ERROR_READ_ERROR",t),S.code=b,void this.reportError(S)}u.report.setField(d,"decode_response_end"),0<d&&(w.iRequestId=d),A.log("%c<<<<<<< %crspWup:%c "+m,A.logcss("#0000E3"),A.logcss("black"),A.logcss("#0000E3"),v,w),u.report.setField(d,"join_dispatcher_thread"),u.report.setField(d,"dispatcher_thread_execute_time"),w.sdkcode=0,F.fireEvent(0<d?m+d:m,w)}else _&&_({sdkcode:T,bcode:l}),u.report.clearData(d),this.retry.del(d);break;case f.EWebSocketCommandType.EWSCmdS2C_MsgPushReq:i=new c.JceInputStream(n.vData.buffer),(B=new f.WSPushMessage).readFrom(i);var E=B.iUri,R=B.lMsgId,C=B.sGroupId,O=this.signalCache.cache(R);if(R&&O)return void A.log("重复的消息id",R,C);i=new c.JceInputStream(B.sMsg.buffer);var N=k.UriMapping[B.iUri];if(N){var M=new N;M.readFrom(i),A.log("%c<<<<<<< %crspMsgPush, %curi="+E,A.logcss("#0000E3"),A.logcss("black"),A.logcss("#8600FF"),M),F.fireEvent(E,M)}else A.log("收到未映射的 WSPushMessage，uri="+B.iUri);F.fireEvent("origin:"+E,{data:B.sMsg.buffer,groupId:C,connectType:this.connectType}),F.fireEvent(L.WS_URI_NOTICE,{uri:E,data:B.sMsg.buffer,groupId:C,connectType:this.connectType}),this.fireExtTafData(E,"",B.sMsg.buffer);break;case f.EWebSocketCommandType.EWSCmdS2C_HeartBeatRsp:break;case f.EWebSocketCommandType.EWSCmdS2C_VerifyCookieRsp:i=new c.JceInputStream(n.vData.buffer);var U=new f.WSVerifyCookieRsp;U.readFrom(i);var D=0==U.iValidate;F.fireEvent(L.VERIFYCOOKIE_PASS,D),A.log("VerifyCookie校验"+(D?"通过！":"失败！"));break;case f.EWebSocketCommandType.EWSCmdS2C_MsgPushReq_V2:var B;i=new c.JceInputStream(n.vData.buffer),(B=new f.WSPushMessage_V2).readFrom(i);for(var x=0,j=B.vMsgItem.value.length;x<j;x++){var V=B.vMsgItem.value[x],G=V.iUri,H=V.lMsgId,W=k.UriMapping[G],q=B.sGroupId,K=this.signalCache.cache(H);if(H&&K)A.log("重复的消息id",H,q);else if(F.fireEvent("origin:"+G,{data:V.sMsg.buffer,groupId:q,connectType:this.connectType}),F.fireEvent(L.WS_URI_NOTICE,{uri:G,data:V.sMsg.buffer,groupId:q,connectType:this.connectType}),this.fireExtTafData(G,"",V.sMsg.buffer),W){var Y=new W,z=new c.JceInputStream(V.sMsg);Y.readFrom(z),A.log("%c<<<<<<< %crspMsgPushV2, %curi="+G,A.logcss("#0000E3"),A.logcss("black"),A.logcss("#8600FF"),Y),F.fireEvent(G,Y)}else A.log("收到未映射的 WSPushMessage_V2 uri="+G)}break;case f.EWebSocketCommandType.EWSCmdS2C_CloudGamePush:i=new c.JceInputStream(n.vData.buffer);var J=new f.CloudGamePacket;J.readFrom(i),J.sRequestId,F.fireEvent(L.CLOUD_GAME_DATA,J),A.log("%c<<<<<<< %ccloundGameData:",A.logcss("#0000E3"),A.logcss("black"),J);break;default:A.log("%c<<<<<<< Not matched CmdType: "+n.iCmdType)}}},{key:"getWupKey",value:function(t,e){return t.get("tRsp")?"tRsp":e&&t.get("")?"":"noKey"}},{key:"onWSRedirect",value:function(t){var e=t.vRemoveIps.value;A.log("---onWSRedirect---"),A.log("vRemoveIps",e),A.log("this.wsurl",this.wsurl);for(var i=0;i<this.wsIps.length;i++)for(var n=0;n<e.length;n++)this.wsIps[i]==e[n]&&this.wsIps.splice(i,1),this.wsurl==e[n]&&this.reconnect();A.log("storeDns",this.wsIps),E.storeDns(this.wsIps,this.connectType)}},{key:"reconnect",value:function(t){t||(this.reConnectTimes=0),this.releaseWs(this.ws),this.ws=null,this.connected=!1,this.isDoLaunch=!1,1==this.connectType?this.connectIPList(this.cloudGameIpList):this.connecting()}},{key:"_sendWup",value:function(t,e,i,n,r){A.log("%c>>>>>>> %creqWup: %c"+e,A.logcss("#009100"),A.logcss("black"),A.logcss("#009100"),t,i),u.report.setDim(n,"path","/"+t+"/"+e),u.report.setDim(n,"channel","ws"),u.report.setDim(n,"ip",this.wsurl),u.report.setDim(n,"curl",window.location&&window.location.href||""),u.report.setField(n,"unipacket_encode_begin");var o={id:n,fn:e,cb:r};try{var a=new c.Wup;a.setServant(t),a.setFunc(e),a.setRequestId(n),a.writeStruct("tReq",i);var s=new f.WebSocketCommand;s.iCmdType=f.EWebSocketCommandType.EWSCmd_WupReq,s.vData=a.encode();var l=u.report.getTraceId(n);if(l){var h="".concat(l,":").concat(l,":").concat(0,":").concat(u.enableTrace);s.traceId=h}var d=new c.JceOutputStream;s.writeTo(d),u.report.setField(n,"unipacket_encode_end")}catch(t){return A.log(t),o.code=I,void this.reportError(o)}try{this.send(d.getBuffer())}catch(t){return A.log(t),o.code=w,void this.reportError(o)}u.report.setField(n,"hysignal_enqueue")}},{key:"sendWup",value:function(t,e,i,n,r,o){var a=this,s=3<arguments.length&&void 0!==n?n:null,c=4<arguments.length&&void 0!==r?r:-1,l=5<arguments.length&&void 0!==o?o:1,h=+new Date;"function"==typeof s&&F.addEvent(0<c?e+c:e,(function i(n){u.report.setField(c,"execute_end"),s&&s(n),a.sendReport(c),u.report.clearData(c),a.retry.del(c),F.removeEvent(0<c?e+c:e,i),u.reportAPI&&u.reportAPI({type:"reportApiTime",state:"end",moduleName:t,funcName:e,startTime:h,endTime:+new Date})}));var d={id:c,reSend:this._sendWup.bind(this),moduleName:t,funcName:e,data:i,tryCountMax:l,errFun:this.sendTimeoutReport.bind(this),callbackFun:s};this.retry.add(d),this._sendWup(t,e,i,c,s),u.reportAPI&&u.reportAPI({type:"reportApiTime",state:"start",moduleName:t,funcName:e,startTime:h})}},{key:"sendRegister",value:function(t){var e=new c.JceOutputStream;t.writeTo(e);var i=new f.WebSocketCommand;i.iCmdType=f.EWebSocketCommandType.EWSCmd_RegisterReq,i.vData=e.getBinBuffer(),e=new c.JceOutputStream,i.writeTo(e),this.send(e.getBuffer())}},{key:"sendRegisterGroup",value:function(t,e){var i=this;this._sendRegisterGroup(t,e);var n={id:"group",reSend:function(t,e){var n=1<arguments.length&&void 0!==e?e:"";i._sendRegisterGroup(t,n)},moduleName:"group",funcName:"group",data:null,tryCountMax:2,errFun:this.sendRegisterGroupErr,callbackFun:null,paramlist:[t]};this.retry.add(n)}},{key:"_sendRegisterGroup",value:function(t,e){var i,n=new f.WSRegisterGroupReq;(i=n.vGroupId.value).push.apply(i,a(t)),n.sToken=e||"",A.log("%c>>>>>>> %creqRegisterGroup:",A.logcss("#009100"),A.logcss("#D26900"),n);var r=new c.JceOutputStream;n.writeTo(r);var o=new f.WebSocketCommand;o.iCmdType=f.EWebSocketCommandType.EWSCmdC2S_RegisterGroupReq,o.vData=r.getBinBuffer(),r=new c.JceOutputStream,o.writeTo(r),this.send(r.getBuffer())}},{key:"sendRegisterGroupErr",value:function(){A.log("进组重试超过次数")}},{key:"sendUnRegisterGroup",value:function(t){var e,i=new f.WSUnRegisterGroupReq;(e=i.vGroupId.value).push.apply(e,a(t)),A.log("%c>>>>>>> %creqUnRegisterGroup:",A.logcss("#009100"),A.logcss("#D26900"),i);var n=new c.JceOutputStream;i.writeTo(n);var r=new f.WebSocketCommand;r.iCmdType=f.EWebSocketCommandType.EWSCmdC2S_UnRegisterGroupReq,r.vData=n.getBinBuffer(),n=new c.JceOutputStream,r.writeTo(n),this.send(n.getBuffer()),this.retry.del("group")}},{key:"sendWSUpdateUserInfoReq",value:function(t,e){A.log(">>>>>>>  sendWSUpdateUserInfoReq:",t,e);var i=new f.WSUpdateUserInfoReq;i.sAppSrc=t||u.appSrc,i.sGuid=e||u.guid;var n=new c.JceOutputStream;i.writeTo(n);var r=new f.WebSocketCommand;r.iCmdType=f.EWebSocketCommandType.EWSCmdC2S_UpdateUserInfoReq,r.vData=n.getBinBuffer(),n=new c.JceOutputStream,r.writeTo(n),this.send(n.getBuffer())}},{key:"sendVerifyCookie",value:function(){var t=new f.WSVerifyCookieReq;t.lUid=u.uid,t.sGuid=u.guid,t.sUA=u.ua,t.bAutoRegisterUid=1,t.sAppSrc=u.appSrc,t.sCookie=document.cookie;var e=new c.JceOutputStream;t.writeTo(e);var i=new f.WebSocketCommand;i.iCmdType=f.EWebSocketCommandType.EWSCmdC2S_VerifyCookieReq,i.vData=e.getBinBuffer(),e=new c.JceOutputStream,i.writeTo(e),this.send(e.getBuffer()),A.log("VerifyCookie:",t)}},{key:"sendReport",value:function(t){if(-1!==t&&!(u.enableTrace<=0)){var e=new f.MetricDetailSet,i=new f.UserId;E.copy(i,u.userId),i.sHuYaUA=u.config.APPID.toLowerCase()+"&"+u.ver+"&signalsdk",e.tId=i,e.vMetricDetail.value.push(this.createDetailById(t)),A.log("sendReport",e),this.sendReportHttp("metric","reportDetailV2",e)}}},{key:"createDetailById",value:function(t){var e=new f.MetricDetail;e.sMetricName="hymtp.hyns.monitor.client",e.iTS=Date.now();var i=u.report.getFieldData(t),n=u.report.getDimData(t);return this.fillField(i,e.vFiled.value),this.fillDimension(n,e.vDimension.value),e}},{key:"fillField",value:function(t,e){if(t)for(var i in t){var n=new f.Field;n.sName=i,n.fValue=t[i],e.push(n)}}},{key:"fillDimension",value:function(t,e){for(var i in t){var n=new f.Dimension;n.sName=i,n.sValue=t[i],e.push(n)}}},{key:"sendDataMetric",value:function(t,e){var i=new f.MetricDetailSet,n=new f.UserId;E.copy(n,u.userId),e&&(n.sHuYaUA=e),i.tId=n;var r=Date.now();for(var o in t)i.vMetricDetail.value.push(this.createDetail(t[o],r));A.log("sendDataMetric",i),this.sendReportHttp("metric","reportDetailV2",i)}},{key:"createDetail",value:function(t,e){var i=new f.MetricDetail;return i.sMetricName=t.sMetricName,i.iTS=e,this.fillField(t.vField,i.vFiled.value),this.fillDimension(t.vDimension,i.vDimension.value),this.fillExLog(t.vExLog,i.vExLog.value),i}},{key:"fillExLog",value:function(t,e){this.fillDimension(t,e)}},{key:"rspDecode",value:function(t,e){var i=new c.Wup;i.decode(t);var n=k.WupMapping[i.sFuncName];if(n){var r=new n,o=3==i.iVersion?i.newdata:i.data,a=this.getWupKey(o);return i.readStruct(a,r,e),r}return null}},{key:"sendReportHttp",value:function(t,e,i){var n=new c.Wup;n.setServant(t),n.setFunc(e),n.writeStruct("tReq",i);var r=n.encode().getBuffer(),o=(new Date).getTime(),a=u.config.reportUrl||"https://statwup.huya.com";c.Util.ajax(a+"?timestamp="+o,r,(function(){}),(function(t){A.log("上报失败",t)}))}},{key:"sendExtWup",value:function(t){var e=t.buff,i=t.funcName;-1==this.extTafFunNameList.indexOf(i)&&this.extTafFunNameList.push(i),e&&this.send(e)}},{key:"fireExtTafData",value:function(t,e,i){(t||e&&-1!=this.extTafFunNameList.indexOf(e))&&F.fireEvent(L.EXT_TAF_DATA,{uri:t,funcName:e,data:i})}},{key:"sendWupHttp",value:function(t,e,i,n,r){var o=this,a=+new Date,s={id:n,fn:e,cb:r},l=new c.Wup;u.report.setDim(n,"path","/"+t+"/"+e),u.report.setField(n,"unipacket_encode_begin"),u.report.setDim(n,"channel","http"),u.report.setDim(n,"curl",window.location&&window.location.href||"");var h=u.ISDEBUG?this.HTTP_DEBUG_IP:this.HTTP_IP;u.report.setDim(n,"ip",h);try{l.setServant(t),l.setFunc(e),l.setRequestId(n),l.writeStruct("tReq",i),A.log("%c>>>>>>> %c http reqWup: %c"+e,A.logcss("#009100"),A.logcss("black"),A.logcss("#009100"),t,i);var d=l.encode().getBuffer()}catch(i){return A.log("writeStruct错误",i),s.code=I,void this.reportError(s)}var f=(new Date).getTime(),m=u.report.getTraceId(n);m&&(m="".concat(m,":").concat(m,":").concat(0,":").concat(u.enableTrace)),this.baseinfo=this.setBaseinfo(!0,m);var v="https://".concat(h).concat(this.baseinfo);u.report.setField(n,"unipacket_encode_end"),u.report.setField(n,"hysignal_enqueue");try{c.Util.ajax(v+"&timestamp="+f,d,(function(i){var n,l;try{(n=new c.Wup).decode(i)}catch(i){return A.log("decodewup错误",i),s.code=S,void o.reportError(s)}var h=!1;try{l=n.readInt32("")}catch(i){h=!0}var d=n.iRequestId,f=n.sFuncName,m=n.sServantName;u.report.setField(d,"hysignal_response"),u.report.setDim(d,"retcode",l),l<0?u.report.setDim(d,"success",y):u.report.setDim(d,"success",p),u.report.setField(d,"decode_response_begin"),u.report.setField(d,"unipacket_decode_begin"),u.report.setField(d,"unipacket_decode_end");var v=k.WupMapping[f];if(v){var g=new v;g.bcode=l;try{if(0<=l){var _=3==n.iVersion?n.newdata:n.data,w=o.getWupKey(_,h);u.report.setField(d,"unipacket_read_rsp_end"),"noKey"!=w&&n.readStruct(w,g,v)}}catch(i){return A.log("readStruct错误",i),s.code=b,void o.reportError(s)}u.report.setField(d,"decode_response_end"),0<d&&(g.iRequestId=d),A.log("%c<<<<<<< %chttp rspWup:%c"+e,A.logcss("#0000E3"),A.logcss("black"),A.logcss("#0000E3"),m,g),u.report.setField(d,"join_dispatcher_thread"),u.report.setField(d,"dispatcher_thread_execute_time"),u.report.setField(d,"execute_end"),o.sendReport(d),g.sdkcode=0,r&&r(g),u.reportAPI&&u.reportAPI({type:"reportApiTime",state:"end",servantName:t,funcName:e,startTime:a,endTime:+new Date})}else r&&r({sdkcode:T,bcode:l}),u.report.clearData(d),o.retry.del(d)}),(function(i){s.code=P,o.reportError(s,i),A.log("http请求失败",t,e,i)})),u.reportAPI&&u.reportAPI({type:"reportApiTime",state:"start",servantName:t,funcName:e,startTime:a})}catch(i){A.log("http请求error",i),s.code=w,this.reportError(s)}}},{key:"sendTimeoutReport",value:function(t,e,i){var n={id:t,fn:e,code:v,cb:i};this.reportError(n)}},{key:"reportError",value:function(t,e){var i=t.fn,n=t.id,r=t.code;u.report.setDim(n,"retcode",r),u.report.setDim(n,"success",m),u.report.setField(n,"execute_end"),this.sendReport(n),u.report.clearData(n),this.retry.del(n);var o,a=k.WupMapping[i];if(a){var s=new a;s.bcode=void 0===e?0:e,s.sdkcode=r,t.cb&&(t.cb(s),F.removeEvent(i+n,t.cb))}else o={sdkcode:r},t.cb&&(t.cb(o),F.removeEvent(i+n,t.cb))}},{key:"setBaseinfo",value:function(t,e){try{var i=this.makeBaseInfo(t,e);return A.log("baseinfo",i),i}catch(t){return A.log("setBaseinfo",t),"?baseinfo=default"}}},{key:"makeBaseInfo",value:function(e,i){var n=new f.WSConnectParaInfo;n.lUid=u.uid,n.sGuid=u.guid||"",n.sUA=u.ua,n.sAppSrc=u.appSrc,e&&(n.sCookie=document.cookie,i&&(n.sTraceId=i));var r=u.config.customHeaders;r&&"object"===t(r)&&E.copy(n.mCustomHeaders.value,r);var o=new c.JceOutputStream;n.writeTo(o);var a=o.getBuffer(),s=E.ab2str(a,!1),l=window.btoa(s);return"?baseinfo=".concat(encodeURIComponent(l))}},{key:"connectIPList",value:function(t){for(var e=[],i=0,n=(this.cloudGameIpList=t).length;i<n;i++){var r=t[i],o=r.host,a=r.ip,s=this.isHttps?"".concat(o):"".concat(a||o);e.push(s)}this.testWsIp(e)}},{key:"sendCloudGameReq",value:function(t){var e=new c.JceOutputStream;t.writeTo(e);var i=new f.WebSocketCommand;i.iCmdType=f.EWebSocketCommandType.EWSCmdC2S_CloudGameReq,i.vData=e.getBinBuffer(),e=new c.JceOutputStream,i.writeTo(e),this.send(e.getBuffer()),A.log("%c>>>>>>> %csendCloudGameReq:",A.logcss("#009100"),A.logcss("black"),t)}},{key:"clear",value:function(){this.releaseWs(this.ws),this.ws=null}},{key:"getCurrentWSUrl",value:function(){return this.wsurl}},{key:"logcss",value:function(t){return"color:"+t+";font-weight:900"}}]),i}(),V=function(){function t(){e(this,t),this.fieldsList={},this.dimsList={},this.dims={};var i=window.navigator&&window.navigator.connection&&window.navigator.connection.effectiveType;this.dims.appid=u.config.APPID.toLowerCase(),this.dims.platform="web",this.dims.schema="hysignal",this.dims.nettype=i||"",this.dims.osver=u.config.osver||"",this.dims.iptype="0",this.dims.device=u.config.device||"",this.dims.sguid=u.config.guid,this.dims.ns_version=u.ver,this.dims.ns_compat="0",this.dims.trycount=1,this.dims.prodenv=u.ISDEBUG?"test":"prod"}return n(t,[{key:"setField",value:function(t,e){this.fieldsList[t]=this.fieldsList[t]||{};var i=this.fieldsList[t];i.ctime=i.ctime||performance&&performance.now()||Date.now(),i.data=i.data||{};var n=performance&&performance.now()||Date.now();i.data[e]=n-i.ctime,"execute"==e&&(i.begintime=n),"execute_end"==e&&(i.data.response_time=n-i.begintime),i.ctime=n}},{key:"getFieldData",value:function(t){return this.fieldsList[t]?o({},this.fieldsList[t].data):{}}},{key:"setDim",value:function(t,e,i){this.dimsList[t]=this.dimsList[t]||o({},this.dims),this.dimsList[t][e]=i}},{key:"getTraceId",value:function(t){return this.dimsList[t]?this.dimsList[t].traceid:""}},{key:"getDimData",value:function(t){return this.dimsList[t]?o({},this.dimsList[t]):{}}},{key:"clearData",value:function(t){delete this.fieldsList[t],delete this.dimsList[t]}},{key:"setCommonDim",value:function(t,e){this.dims[t]=e}}]),t}(),G=function(){function t(i){var n=this;e(this,t),A.init(),A.log("初始化",i),u.ISDEBUG=i.isDebug||0,u.appSrc=i.appSrc||"",u.uid=i.uid||0,u.guid=i.guid||N.getCookie("guid"),u.ua=i.ua||"",u.config=i,u.setEnableTrace(),N.setCookie("huya_ua",u.ua,365),this.creatUserId(i),u.report=new V,this.TafHandlerList=[],this.tafHandler=new j(i),i.noConnect||(this.tafHandler.start(),this.doSocketConnect=!0),this.doSocketConnect=!1,this.TafHandlerList.push(this.tafHandler),this.wsLaunch=!1,this.queue=[],this.on(L.WEBSOCKET_DOLAUNCH,(function(){A.log("sendWup 缓存队列"),n.wsLaunch=!0,n.queue.forEach((function(t){return t()})),n.queue=[]})),this.inited=!0}return n(t,[{key:"creatUserId",value:function(t){u.userId=new f.UserId,u.userId.lUid=u.uid,u.userId.sGuid=u.guid,u.userId.sToken="",u.userId.sHuYaUA=u.ua,u.userId.sCookie=document.cookie,u.userId.sDeviceInfo=t.device||""}},{key:"bindWup",value:function(t){var e=this;return function(i){var n=i.funcName,r=i.resStruct;return e.registerWup(n,r),function(i){var r=i.data,o=i.callback,a=i.iRequestId;e.sendWup(t,n,r,o,a)}}}},{key:"sendWup",value:function(t,e,i,n,r){var o=4<arguments.length&&void 0!==r?r:1;u.iRequestId++;var a=u.getTraceId();u.report.setDim(u.iRequestId,"traceid",a),u.report.setDim(u.iRequestId,"spanid",a),u.report.setField(u.iRequestId,"execute");var s={id:u.iRequestId,fn:e,cb:n};if(!this.inited)return s.code=_,void this.tafHandler.reportError(s);try{this.tafHandler.connected?(A.log("sendWup",e),this.tafHandler.sendWup(t,e,i,n,u.iRequestId,o)):(A.log("sendWupHttp",e),this.tafHandler.sendWupHttp(t,e,i,u.iRequestId,n))}catch(t){s.code=g,this.tafHandler.reportError(s)}}},{key:"sendWupHttp",value:function(t,e,i,n){u.iRequestId++;var r=u.getTraceId();u.report.setDim(u.iRequestId,"traceid",r),u.report.setDim(u.iRequestId,"spanid",r),u.report.setField(u.iRequestId,"execute");var o={id:u.iRequestId,fn:e,cb:n};if(!this.inited)return o.code=_,void this.tafHandler.reportError(o);this.tafHandler.sendWupHttp(t,e,i,u.iRequestId,n)}},{key:"registerUri",value:function(t,e){this.startWS(),k.UriMapping[t+""]=e}},{key:"registerUriMap",value:function(t){for(var e in t){var i=t[e];k.UriMapping[e+""]=i}}},{key:"registerWup",value:function(t,e){k.WupMapping[t]=e}},{key:"registerWupMap",value:function(t){for(var e in t){var i=t[e];k.WupMapping[e]=i}}},{key:"on",value:function(t,e){F.addEvent(t,e)}},{key:"off",value:function(t,e){F.removeEvent(t,e)}},{key:"has",value:function(t,e){return F.hasListener(t,e)}},{key:"sendRegisterGroup",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:"";this.tafHandler.sendRegisterGroup(t,i)}},{key:"sendUnRegisterGroup",value:function(t){this.tafHandler.sendUnRegisterGroup(t)}},{key:"sendVerifyCookie",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:"webh5&0.0.1&huya";this.tafHandler.sendVerifyCookie(t,e,n)}},{key:"reconnetWS",value:function(t){var e=0<arguments.length&&void 0!==t?t:0,i=this.TafHandlerList.find((function(t){return t.connectType===e}));if(i)return i.reconnetWS()}},{key:"isWSConnected",value:function(t){var e=0<arguments.length&&void 0!==t?t:0,i=this.TafHandlerList.find((function(t){return t.connectType===e}));return!!i&&i.connected}},{key:"isWSLaunch",value:function(){return this.wsLaunch}},{key:"sendWSUpdateUserInfoReq",value:function(t){this.tafHandler.sendWSUpdateUserInfoReq(t)}},{key:"getTaf",value:function(){return c}},{key:"getUserId",value:function(){return u.userId}},{key:"getTafProtocol",value:function(){return{HUYA:f,TafMx:k,Taf:c}}},{key:"rspDecode",value:function(t,e){return this.tafHandler.rspDecode(t,e)}},{key:"sendDataMetric",value:function(t,e){this.tafHandler.sendDataMetric(t,e)}},{key:"sendExtWup",value:function(t){this.tafHandler.sendExtWup(t)}},{key:"connectCloudGameWS",value:function(t){A.log("云游戏建连",t),this.cloudTaf&&this.clearCloudTaf();var e=o({},u.config,{connectType:1});return this.cloudTaf=new j(e),this.cloudTaf.connectIPList(t),this.TafHandlerList.push(this.cloudTaf),this.cloudTaf}},{key:"clearCloudTaf",value:function(){var t=this.TafHandlerList.indexOf(this.cloudTaf);-1<t&&this.TafHandlerList.splice(t,1),this.cloudTaf.clear(),this.cloudTaf=null}},{key:"sendCloudGameReq",value:function(t){this.cloudTaf?this.cloudTaf.sendCloudGameReq(t):A.log("云游戏连接未创建")}},{key:"getCurrentWSUrl",value:function(t){var e=0<arguments.length&&void 0!==t?t:0,i=this.TafHandlerList.find((function(t){return t.connectType===e}));return i?i.getCurrentWSUrl():""}},{key:"setReportAPI",value:function(t){u.reportAPI=t}},{key:"startWS",value:function(){this.isWSConnected()||this.doSocketConnect||(this.tafHandler.start(),this.doSocketConnect=!0)}}]),t}();return{HUYA:f,Taf:c,init:function(t){return new G(t)},events:L,utils:E,store:N,version:s}}()},NKxu:function(t,e,i){var n=i("lSCD"),r=i("E2jh"),o=i("GoyQ"),a=i("3Fdi"),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(n(t)?d:s).test(a(t))}},NQ3n:function(t,e,i){"use strict";e.a=function(){return Promise.all([i.e("d040e"),i.e("93a4d"),i.e("583bc")]).then(i.bind(null,"/Ok5"))}},NToG:function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},NV4i:function(t,e,i){"use strict";i.r(e);i("I5cv");var n,r,o,a=i("pVnL"),s=i.n(a),u=i("J4zp"),c=i.n(u),l=i("lwsE"),h=i.n(l),d=i("W8MJ"),f=i.n(d),p=i("PJYZ"),m=i.n(p),y=i("7W2i"),v=i.n(y),g=i("a1gu"),_=i.n(g),S=i("Nsbk"),w=i.n(S),b=i("lSNA"),I=i.n(b),T=i("q1tI"),P=i.n(T),E=i("TSYQ"),k=i.n(E),R=i("KFtC"),C=i("ht2s"),O=i("ypqu"),A=i("lpJ4"),L=i("ap7j"),N=i("w6NW"),M=i("/MKj"),U=i("53oe"),D=i("j0d6"),B=i("I+st"),F=i("G5So"),x=i("U+eq"),j=i("kYlo"),V=i("zv/K"),G=i("YBQF"),H=i("4CjR"),W=i("zQ4q"),q=i("lhie"),K=i("oJ+Q"),Y=i("x2FP"),z=(i("17x9"),i("5HW4")),J=i("OI0W"),Q=i("Dn2j"),X=i("+KH8"),Z=i("UWNJ"),$=i("mTTC"),tt=i("S3uo"),et=i("fDX5"),it=i("BxBT"),nt=i("PxAQ"),rt=i("30NK"),ot=i("QILm"),at=i.n(ot),st=i("tbCU"),ut=function(){return Promise.all([i.e("93a4d"),i.e("a7d7e")]).then(i.bind(null,"QAfS"))},ct=Object(st.a)((function(){return ut().then((function(t){var e=t.LiveRoomRecommendList;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:T.createElement("div",{dangerouslySetInnerHTML:{__html:i("0zF6")({className:"n-fx1",placeholderList:[1,2,3,4,5,6,7,8,9,10,11,12]})}}),async:!0}),lt=Object(st.a)((function(){return ut().then((function(t){var e=t.LiveRoomRecommendVideos;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:T.createElement("div",null),async:!0}),ht=Object(st.a)((function(){return ut().then((function(t){var e=t.AnchorInfo;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo,userInfo:t.common.userInfo}}))(e)}}))}),{loading:T.createElement("div",null),async:!0}),dt=i("sNTW"),ft=["prefixCls","className"];function pt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var mt=Object(M.c)((function(t){return{langPkg:t.home.common.langPkg,roomInfo:t.home.room.roomInfo}}))((o=r=function(t){v()(i,t);var e=pt(i);function i(t){var n;return h()(this,i),(n=e.call(this,t)).state={},n}return f()(i,[{key:"render",value:function(){var t=this.props,e=t.prefixCls,i=t.className,n=at()(t,ft),r=n||{},o=r.roomInfo,a=r.timeToForceLoad,u=o||{},c=u.roomId,l=u.gameId,h=u.anchorLang,d=k()(e,i);return T.createElement(dt.a,s()({},n,{className:d}),(function(t){var e=t.subscribe;return T.createElement(T.Fragment,null,T.createElement(ht,{subscribe:e,className:"n-as-rnd"}),T.createElement("div",{className:"n-fx-bn"},T.createElement(ct,{roomId:c,gameId:l,anchorLang:h,className:"n-fx0",timeToForceLoad:a})),T.createElement("div",{className:"n-as-mrgb-lg"},T.createElement(lt,null)))}))}}]),i}(T.Component),I()(r,"defaultProps",{prefixCls:"nimo-common-room",className:"",components:{}}),n=o))||n,yt=i("GJiU");function vt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var gt,_t,St,wt=new(function(t){v()(i,t);var e=vt(i);function i(){return h()(this,i),e.apply(this,arguments)}return f()(i,[{key:"fetchMatchModuleListForWeb",value:function(t){var e=t.eventId,i=t.roomId,n=t.country,r=void 0===n?this.countryCode:n,o=t.lang,a=void 0===o?this.lang:o,s=t.lcid,u=void 0===s?this.clang:s,c=this.buildUri("eventModule/matchModuleListForWeb"),l={encrypt:!0,queryParams:[r,a,u],data:{eventId:e,roomId:i,requestType:"web"}};return this.fetch(c,l)}},{key:"fetchMatchModuleListForAPP",value:function(t){var e=t.eventId,i=t.roomId,n=t.requestType,r=t.country,o=void 0===r?this.countryCode:r,a=t.lang,s=void 0===a?this.lang:a,u=t.clang,c=void 0===u?this.clang:u,l=this.buildUri("eventModule/matchModuleListForAPP"),h=[o,s,c],d={roomId:i,requestType:n};e&&(d.eventId=e);var f={encrypt:!0,queryParams:h,data:d};return this.fetch(l,f)}},{key:"fetchMatchModuleListForWap",value:function(t){var e=t.eventId,i=t.roomId,n=t.requestType,r=t.country,o=void 0===r?this.countryCode:r,a=t.lang,s=void 0===a?this.lang:a,u=t.clang,c=void 0===u?this.clang:u,l=this.buildUri("eventModule/matchModuleListForWarp"),h=[o,s,c],d={roomId:i,requestType:n};e&&(d.eventId=e);var f={encrypt:!0,queryParams:h,data:d};return this.fetch(l,f)}}]),i}(i("70i0").c))({version:"v1"}),bt=function(){return Promise.all([i.e("edfd6"),i.e("5d90d")]).then(i.bind(null,"wVNF"))},It=Object(st.a)((function(){return Promise.all([i.e("edfd6"),i.e("52e5e")]).then(i.bind(null,"srhJ")).then((function(t){var e=t.default;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo,langPkg:t.home.common.langPkg.home}}))(e)}}))}),{loading:!1,when:st.b}),Tt=Object(st.a)((function(){return bt().then((function(t){return{default:t.MatchIntro}}))}),{loading:T.createElement("div",{dangerouslySetInnerHTML:{__html:i("VKJA")()}}),async:!0}),Pt=Object(st.a)((function(){return i.e("80aca").then(i.bind(null,"OZmu"))}),{loading:T.createElement("div",{dangerouslySetInnerHTML:{__html:i("rMHs")()}}),async:!0}),Et=Object(st.a)((function(){return bt().then((function(t){var e=t.MatchProcess;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo}}))(e)}}))}),{loading:T.createElement("div",{dangerouslySetInnerHTML:{__html:i("alNl")()}}),async:!0}),kt=Object(st.a)((function(){return bt().then((function(t){return{default:t.MatchSchedule}}))}),{loading:T.createElement("div",{dangerouslySetInnerHTML:{__html:i("tm0o")()}}),async:!0}),Rt=Object(st.a)((function(){return bt().then((function(t){var e=t.MatchVideo;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo}}))(e)}}))}),{loading:T.createElement("div",{dangerouslySetInnerHTML:{__html:i("wMmG")()}}),async:!0}),Ct=Object(st.a)((function(){return bt().then((function(t){var e=t.MatchShareLottery;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo}}))(e)}}))}),{loading:!1,async:!0}),Ot=Object(st.a)((function(){return bt().then((function(t){var e=t.MatchFrame;return{default:Object(M.c)((function(t){return{roomInfo:t.home.room.roomInfo}}))(e)}}))}),{loading:!1,async:!0}),At=["enableList","enable","teamPk"],Lt=["prefixCls","className","components","roomInfo"];function Nt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Mt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(i),!0).forEach((function(e){I()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Nt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ut(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var Dt,Bt,Ft,xt=Object(M.c)((function(t){return{langPkg:t.home.common.langPkg,roomInfo:t.home.room.roomInfo}}))((St=_t=function(t){v()(i,t);var e=Ut(i);function i(t){var n;return h()(this,i),(n=e.call(this,t)).state={enableList:[],eventCompConfig:{},enable:!1,showPK:!1},n.getScheduleList=n.getScheduleList.bind(m()(n)),n}return f()(i,[{key:"componentDidMount",value:function(){var t=this,e=this.props.roomInfo||{},i=e.eventId,n=e.roomId;"number"===typeof i&&wt.fetchMatchModuleListForWeb({eventId:i,roomId:n}).then((function(e){var i=e||{},n=i.enableList,r=void 0===n?[]:n,o=i.enable,a=void 0===o?0:o,s=i.teamPk,u=void 0===s?1:s,c=at()(i,At);t.setState({enableList:r,eventCompConfig:c,enable:0!==a,showPK:a&&0===u})}))}},{key:"componentWillUnmount",value:function(){this.defaultComponents=null}},{key:"getScheduleList",value:function(t){var e=(this.props.roomInfo||{}).eventId;if(!e)return Promise.reject(new TypeError("eventId is invalid."));var i=(new Date).getTimezoneOffset()/60,n="Etc/GMT".concat(i<0?"-":"+").concat(Math.abs(Math.round(i)));return 0===i&&(n=n.replace("+0","")),yt.a.fetchScheduleListByEventId(Mt({timeZone:n,eventId:e,pageSize:7},t))}},{key:"renderChildComps",value:function(){var t=this.props,e=t.langPkg,i=t.roomInfo||{},n=i.eventId,r=i.roomId,o=this.state,a=o.enableList,s=o.eventCompConfig;if(!o.enable)return null;var u={eventIntroConfig:Tt,teamIntroConfig:Pt,eventProcessConfig:Et,scheduleConfig:kt,matchVideoConfig:Rt,matchShareConfig:Ct,matchDataConfig:Ot,matchRealTimeDataConfig:Ot},c={scheduleConfig:{getScheduleList:this.getScheduleList}},l=a.map((function(t){var i=u[t],o=c[t],a=s&&s[t]||{};return i?(o&&(a=Mt(Mt({},a),o)),T.createElement("div",{className:"n-as-mrgb-lg"},T.createElement(i,{dataSource:a,compName:t,langPkg:e.home,eventId:n,roomId:r,nimoReport:B.a}))):null}));return T.Children.map(l,(function(t){return t?T.cloneElement(t):""}))}},{key:"render",value:function(){var t=this.props,e=t.prefixCls,i=t.className,n=t.components,r=t.roomInfo,o=at()(t,Lt),a=this.state.showPK,u=(o||{}).timeToForceLoad,c=(r||{}).roomId,l=this.renderChildComps(),h=k()(e,i);return T.createElement(dt.a,s()({},o,{className:h,components:Mt(Mt({},n),{},{BackgroundImg:void 0,MatchRound:a?T.createElement(It,{roomId:c,nimoReport:B.a,timeToForceLoad:u}):null,RoomRankTabs:!1,RoomNodeLottery:!0})}),T.createElement("div",{className:"n-as-mrgb-lg"},T.createElement(lt,null)),l)}}]),i}(T.Component),I()(_t,"defaultProps",{prefixCls:"nimo-match-room",className:"",components:{}}),gt=St))||gt,jt=i("mHuI"),Vt=function(){return i.e("07d34").then(i.bind(null,"HYoX"))},Gt=Object(st.a)((function(){return Vt().then((function(t){return{default:t.TeamIntro}}))}),{loading:!1,async:!0}),Ht=Object(st.a)((function(){return Vt().then((function(t){return{default:t.TeamMember}}))}),{loading:!1,async:!0}),Wt=["starMemberList"],qt=["prefixCls","className","langPkg","roomInfo"];function Kt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var Yt,zt,Jt,Qt=Object(M.c)((function(t){return{langPkg:t.home.common.langPkg,roomInfo:t.home.room.roomInfo}}))((Ft=Bt=function(t){v()(i,t);var e=Kt(i);function i(t){var n;return h()(this,i),(n=e.call(this,t)).state={starMemberList:[],starTeamIntro:{}},n}return f()(i,[{key:"componentDidMount",value:function(){var t=this,e=(this.props.roomInfo||{}).teamId;"number"===typeof e&&jt.a.getTeamIntro({teamId:e}).then((function(e){var i=e||{},n=i.starMemberList,r=void 0===n?[]:n,o=at()(i,Wt);t.setState({starMemberList:r,starTeamIntro:o})}))}},{key:"render",value:function(){var t=this.props,e=t.prefixCls,i=t.className,n=t.langPkg,r=t.roomInfo,o=at()(t,qt),a=this.state,u=a.starMemberList,c=a.starTeamIntro,l=void 0===c?{}:c,h=(r||{}).teamId,d=k()(e,i);return T.createElement(dt.a,s()({},o,{className:d}),T.createElement("div",{className:"n-as-rel n-as-z0"},T.createElement(Gt,s()({},l,{langPkg:n.home})),T.createElement(Ht,{dataSource:u,teamId:h,langPkg:n.home})))}}]),i}(T.Component),I()(Bt,"defaultProps",{prefixCls:"nimo-star-team-room",className:"",components:{}}),Dt=Ft))||Dt,Xt=Object(st.a)((function(){return i.e("16ba7").then(i.bind(null,"juVr"))}),{loading:!1,async:!0}),Zt=["prefixCls","className","langPkg","roomInfo"];function $t(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var te,ee,ie,ne=Object(M.c)((function(t){return{langPkg:t.home.common.langPkg,roomInfo:t.home.room.roomInfo}}))((Jt=zt=function(t){v()(i,t);var e=$t(i);function i(t){var n;return h()(this,i),(n=e.call(this,t)).state={},n}return f()(i,[{key:"render",value:function(){var t=this.props,e=t.prefixCls,i=t.className,n=t.langPkg,r=t.roomInfo,o=at()(t,Zt),a=(o||{}).timeToForceLoad,u=r||{},c=u.roomId,l=u.gameId,h=u.anchorLang,d=k()(e,i);return T.createElement(dt.a,s()({},o,{className:d}),(function(t){var e=t.subscribe;return T.createElement(T.Fragment,null,T.createElement(ht,{subscribe:e,className:"n-as-rndt"}),T.createElement("div",{className:"bc1 n-as-padh-md n-as-padb-md"},T.createElement("div",{style:{height:1},className:"bc10"})),T.createElement("div",{className:"n-fx-bn"},T.createElement("div",{className:"n-fx1 n-fx-col n-fx-cc bc1 bsc5 n-as-rndb",style:{padding:"0 40px"}},T.createElement(Xt,{langPkg:n.home,timeToForceLoad:a}))),T.createElement("div",{className:"n-fx-bn"},T.createElement(ct,{roomId:c,gameId:l,anchorLang:h,className:"n-fx0",timeToForceLoad:a})),T.createElement("div",{className:"n-as-mrgb-lg"},T.createElement(lt,null)))}))}}]),i}(T.Component),I()(zt,"defaultProps",{prefixCls:"nimo-star-anchor-room",className:"",components:{}}),Yt=Jt))||Yt;function re(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var oe,ae,se=Object(M.c)((function(t){return{streamInfo:t.common.streamInfo,userInfo:t.common.userInfo,roomInfo:t.home.room.roomInfo}}))((ie=ee=function(t){v()(i,t);var e=re(i);function i(t){var n;return h()(this,i),n=e.call(this,t),Object(it.b)(),n}return f()(i,[{key:"componentDidMount",value:function(){var t=this.props,e=t.dispatch,i=t.dataSource,n=t.onMount,r=t.userInfo,o=t.roomInfo,a=i||{},s=a.roomId,u=a.auId,c=a.nickname,l=a.gameId,h=a.anchorLang,d=a.businessType,f=a.anchorCountryCode;n&&n(),z.b.getGiftListOfRoom({roomId:s,gameId:l,anchorLang:h,anchorCountryCode:f,anchorId:u}).then((function(t){var i=t||{},n=i.giftList,r=i.giftTabList;e(Object(U.i)(n,r))})),X.a.getRoomActivityList({gameType:l,udbUserId:null===r||void 0===r?void 0:r.udbUserId,roomId:null===o||void 0===o?void 0:o.roomId}).then((function(t){e(Object(U.h)(t))})).catch((function(){}));var p=Object(L.b)();J.a.dispose().init({roomId:s,auId:u,nickname:c,gameId:l,anchorLang:h,anchorCountryCode:f,traceSource:p}),B.a.formatAndSend("non_full_live_enter","进入直播间",{from_:p,way_:Object(R.r)(null===o||void 0===o?void 0:o.gameId)}),this._updateVisitHistory(),tt.g.getEmoticonByRoom({anchorId:u,roomId:s,businessType:d}).then((function(t){e(Object(U.g)(t))})).catch((function(){})),Q.a.fetchVipSubscribeStatus({anchorId:u}).then((function(t){e(Object(U.k)(null===t||void 0===t?void 0:t.status))})),et.a.getPayChatList(u).then((function(t){var i=t.vPayChatOption,n=t.vPayChatRecord,r=t.iRecordSizeLimit;e(Object(U.o)({vPayChatOption:i,vPayChatRecord:n,iRecordSizeLimit:r}))})).catch((function(){}))}},{key:"componentWillUnmount",value:function(){var t=this.props.getContainer;if("function"===typeof t){var e=t();e.classList.contains("n-as-of-hidden")&&e.classList.remove("n-as-of-hidden")}}},{key:"_updateVisitHistory",value:function(){var t=this;$.default.checkLogin().then((function(e){if(e){var i=t.props,n=i.userInfo,r=(i.dataSource||{}).auId;Z.a.updateVisitHistory({udbUserId:null===n||void 0===n?void 0:n.udbUserId,anchorId:r}).catch((function(){}))}})).catch((function(){}))}},{key:"render",value:function(){var t=this.props,e=t.className,i=t.dataSource,n=t.roomInfo,r=i||{},o=r.businessType,a=r.roomSort,s=r.eventRoomListView,u=void 0===s?[]:s,c=r.teamRoomViews,l=void 0===c?[]:c,h=r.normalMultiRoomList,d=void 0===h?[]:h,f=k()(e,"n-fx1"),p=2===o,m=3e3,y=Object(R.c)(null===n||void 0===n?void 0:n.gameId);return 0!==a&&a?1===a?T.createElement(xt,{className:f,components:{HeadImg:T.createElement(nt.default,{height:540}),BackgroundImg:{backgroundPositionY:540},DailyLotteryEntry:!1,NavTag:T.createElement(rt.z,{dataSource:u.length>0?u:d,nimoReport:B.a}),Player:{components:{AnchorPK:!0,MicTogether:p,MultiMicTogether:!0,BlurBG:p,FollowGuide:!0,LoginGuidePanel5Min:!0,AdPlayer:y,LivePreviewModal:!0,PassingVideo:!0}}},timeToForceLoad:m}):2===a?T.createElement(Qt,{defaultBackgroundColor:!0,className:f,components:{HeadImg:T.createElement(nt.default,{height:568}),BackgroundImg:{backgroundPositionY:568},DailyLotteryEntry:!1,NavTag:T.createElement(rt.z,{dataSource:l.length>0?l:d}),Player:{components:{AnchorPK:!0,MicTogether:p,MultiMicTogether:!0,BlurBG:p,FollowGuide:!0,LoginGuidePanel5Min:!0,AdPlayer:y,LivePreviewModal:!0,PassingVideo:!0}}},timeToForceLoad:m}):3===a?T.createElement(ne,{defaultBackgroundColor:!0,className:f,components:{HeadImg:T.createElement(nt.default,{height:300}),BackgroundImg:{backgroundPositionY:300},Player:{components:{AnchorPK:!0,MicTogether:p,MultiMicTogether:!0,BlurBG:p,PassingVideo:!0,FollowGuide:!0,LoginGuidePanel5Min:!0,AdPlayer:y,LivePreviewModal:!0}}},timeToForceLoad:m}):null:T.createElement(mt,{defaultBackgroundColor:!1,className:f,components:{Player:{components:{AnchorPK:!0,MicTogether:p,MultiMicTogether:!0,BlurBG:p,FollowGuide:!0,LoginGuidePanel5Min:!0,AdPlayer:y,LivePreviewModal:!0,PassingVideo:!0}}},timeToForceLoad:m})}}]),i}(T.Component),I()(ee,"defaultProps",{className:"",dataSource:{}}),te=ie))||te,ue=i("PMPE"),ce=i("uuUH");function le(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w()(t);if(e){var r=w()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _()(this,i)}}var he=0,de=1,fe=2,pe=3,me=4,ye=Object(R.k)(),ve=Object(C.a)()(oe=function(t){v()(n,t);var e=le(n);function n(t){var i;h()(this,n),i=e.call(this,t),I()(m()(i),"getContainer",(function(){return document.getElementById("root")||document.body})),I()(m()(i),"handleDidMount",(function(){V.c.stashCorePlayer(),i.setState({status:me},(function(){V.c.moveCorePlayerToPuppet()}))})),I()(m()(i),"handleNonPublicLiveBegin",(function(t){if(window.isHomeSPA)A.a.push("/user/".concat(t));else{var e="https://".concat("www.nimo.tv","/user/").concat(t);window.location.href=e}}));var r=t.roomId,o=t.alias,a=t.roomSort,s=t.head_img;return i.alias=o,i.roomId=r,i.state={status:he,roomInfo:{roomId:r,alias:o,roomSort:a,head_img:s},roomTitle:"",roomDescription:""},V.c.stashCorePlayer(),i}return f()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.initBaseInfo,r=e.dispatch;Object(R.M)(),V.c.moveCorePlayerToPuppet(),Promise.all([this.initRoomInfo(),n()]).then((function(e){var i,n=c()(e,1)[0];if(!t.unmounted){var r=n||{},o=r.gameId,a=r.game,s=r.auId,u=r.roomId,l=r.roomDescription,h=r.roomTitle,d=r.roomScreenshots,f=r.createdTime,p=r.endLiveTime,m=r.liveStreamStatus,y=r.startLiveTime,v=r.businessType,g=r.roomSort,_=r.liveType,S=function(t,e,i){var n="",r=[],o=[],a={},s=i.game,u=Object(K.b)(i.nickname);return 2===t?(n="starroom",r=[u,u],o=[u,u]):1===t&&1===e?(n="matchroom",r=[u,s],o=[u,s]):(n="room",r=[u,s,u,s],o=[u,s]),a.roomTitleLang=n,a.roomTitleLangParam=r,a.roomDescriptionLangParam=o,a}(v,g,n);if(_&&2===v)t.handleNonPublicLiveBegin(u);else{""===document.referrer&&Object(B.d)("/","match"),Object(R.N)(u),t.initViewHistory(n),t.updateSideBarState(n),B.a.initRoom({gameId:o,gameName:a,ayyuid:s});var w=t.props.baseLang;Object(W.a)(Object(R.K)(n),location.pathname),t.setState({roomTitle:h||Object(N.c)(null===w||void 0===w?void 0:w.titles["".concat(S.roomTitleLang)],S.roomTitleLangParam),roomDescription:l||Object(N.c)(null===w||void 0===w?void 0:w.descriptions["".concat(S.roomTitleLang)],S.roomDescriptionLangParam)}),V.c.stashCorePlayer(),t._setRoomInfo(n,(function(){V.c.moveCorePlayerToPuppet()}));var b=document.createElement("script");b.type="application/ld+json",b.id="desktopRoomScriptTag";var I={"@context":"https://schema.org","@type":"VideoObject",name:h||Object(N.c)(null===w||void 0===w?void 0:w.titles["".concat(S.roomTitleLang)],S.roomTitleLangParam),description:l||Object(N.c)(null===w||void 0===w?void 0:w.descriptions["".concat(S.roomTitleLang)],S.roomDescriptionLangParam),thumbnailUrl:(null===d||void 0===d||null===(i=d[0])||void 0===i?void 0:i.url)||"https://article.nimo.tv/screen-285x160.jpg",uploadDate:f?new Date(Number(f)).toISOString():f,embedUrl:"https://".concat("www.nimo.tv","/embed/").concat(u),publication:{"@type":"BroadcastEvent",isLiveBroadcast:!!m,startDate:y?new Date(Number(1e3*y)).toISOString():y,endDate:m?null:p?new Date(1e3*Number(p)).toISOString():p}};b.innerText=JSON.stringify(I),document.body.appendChild(b)}}}),(function(e){if(!t.unmounted){var i=t.props.baseLang;!e||11022!==e.code&&11033!==e.code&&11051!==e.code&&10306!==e.code?e&&500===e.code?t.setState({status:pe,roomTitle:"Error 500(Internal Server Error)"}):q.a.error(null===i||void 0===i?void 0:i.netError):t.setState({status:fe,roomTitle:i.roomNotExist}),t._setPlayerLoadedData(!0)}})),r(Object(U.z)(i("zZh0"),ye))}},{key:"componentWillUnmount",value:function(){var t=this.props.dispatch;window.G_roomBaseInfo=null,this.roomId=null,this.alias=null,Object(Y.b)(null),B.a.setProp({gameId:null,gameName:null,ayyuid:null}),B.a.disposeRoom(),this.unmounted=!0,t(Object(U.H)({locationTag:"",values:""})),t(Object(U.m)()),this._setPlayerLoadedData(!1);var e=document.getElementById("desktopRoomScriptTag");e&&document.body.removeChild(e)}},{key:"updateSideBarState",value:function(t){(0,this.props.dispatch)(Object(U.H)({locationTag:"room",values:t.roomId}))}},{key:"initRoomInfo",value:function(){if(window.G_roomBaseInfo){var t=window.G_roomBaseInfo;return Promise.resolve(t)}return this.fetchRoomInfo()}},{key:"initViewHistory",value:function(t){var e=t.auId,i=t.roomId,n=t.title,r=t.nickname;O.a.setViewHistory(e,i,n,r)}},{key:"fetchRoomInfo",value:function(){return Object(F.a)({roomId:this.roomId,alias:this.alias}).then(L.e)}},{key:"_setRoomInfo",value:function(t,e){(0,this.props.dispatch)(Object(U.j)(t)),Object(Y.b)(t),this.setState({roomInfo:t,status:de},e)}},{key:"_setPlayerLoadedData",value:function(t){(0,this.props.dispatch)(Object(D.z)(t))}},{key:"render",value:function(){var t=this.state,e=t.roomInfo,i=t.status,n=t.roomTitle,r=t.roomDescription,o=this.props,a=o.baseLang,s=o.playerLoadedData,u=null;switch(i){case fe:u=P.a.createElement(x.a,{text:a.roomNotExist});break;case pe:u=P.a.createElement(j.a,{baseLangPkg:a});break;default:u=P.a.createElement(ce.a.Provider,{value:{getContainer:this.getContainer}},i>=de?P.a.createElement(se,{dataSource:e,className:k()({"n-as-hidden":i!==me}),getContainer:this.getContainer,onMount:this.handleDidMount}):null,P.a.createElement(ue.a,{dataSource:e,className:k()({"n-as-hidden":i===me})}),s?null:P.a.createElement(G.i,{loading:!0}))}return P.a.createElement(P.a.Fragment,null,u,P.a.createElement(H.a,null,P.a.createElement("title",null,n),P.a.createElement("meta",{name:"description",content:r})))}}]),n}(P.a.Component))||oe,ge=Object(M.c)((function(t){return{baseLang:t.common.langPkg.base,playerLoadedData:t.common.playerLoadedData}}))(ae=function(t){v()(i,t);var e=le(i);function i(t){var n;return h()(this,i),n=e.call(this,t),I()(m()(n),"initBaseInfo",(function(){if(!n._baseInfoPromise){var t=n.props.dispatch;n._baseInfoPromise=Promise.all([t(Object(U.u)()),t(Object(U.I)())])}return n._baseInfoPromise})),n.state={showLoading:!1},V.c.stashCorePlayer(),n}return f()(i,[{key:"componentDidMount",value:function(){this.setState({showLoading:!0},(function(){V.c.moveCorePlayerToPuppet()}))}},{key:"getRoomRawInfo",value:function(){var t,e=this.props,i=e.match,n=e.alias,r=(i.params||{}).roomId,o=(null===(t=window)||void 0===t?void 0:t.G_roomBaseInfo)||{},a=o.head_img,s=o.roomSort;return{alias:n||"",roomId:Number(r)||0,head_img:a,roomSort:s}}},{key:"render",value:function(){var t=this.props.playerLoadedData,e=this.state.showLoading,i=this.getRoomRawInfo();return[t?P.a.createElement(ve,s()({key:"".concat(i.roomId,"-").concat(i.alias),initBaseInfo:this.initBaseInfo},this.props,i)):null,P.a.createElement(ue.a,{dataSource:i,key:"".concat(i.roomId,"-").concat(i.alias,"-sk"),className:k()({"n-as-hidden":t})}),e?P.a.createElement(G.i,{loading:!1,delay:500,key:"".concat(i.roomId,"-").concat(i.alias,"-loading")}):null]}}]),i}(P.a.Component))||ae;e.default=ge},NcXi:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="header" style="height: 110px">\n  <div class="n-as-fixed n-as-tl n-as-w100 n-as-z999 n-fx-ec n-fx-col bc2" style="height: 110px">\n    <div\n      class="n-as-h60px n-as-w100 n-as-padh n-fx-bc bc1 bsc1"\n    >\n      <div class="n-fx1 n-fx-sc">\n        <div class="n-fx0 n-as-padh-md">\n          <div class="header-logo c8 nm-logo"></div>\n        </div>\n        <div class="n-fx0 n-as-mrgh">\n          <ul class="n-fx-bc">\n            <li class="n-sk n-sk-t14 n-as-mrgh-md"></li>\n            <li class="n-sk n-sk-t14 n-as-mrgh-md"></li>\n            <li class="n-sk n-sk-t14 n-as-mrgh-md"></li>\n          </ul>\n        </div>\n      </div>\n      <div class="n-fx0 n-fx-ec n-as-mrgh-md">\n        <ul class="n-fx0 n-fx-bc n-as-padh-md">\n          <li class="n-sk n-sk-in-o n-as-mrgh n-as-w80px"></li>\n          <li class="n-sk n-sk-ic14 n-as-mrgh n-as-pad-xs"></li>\n          <li class="n-sk n-sk-ic14 n-as-mrgh n-as-pad-xs"></li>\n          <li class="n-sk n-sk-ic14 n-as-mrgh n-as-pad-xs"></li>\n          <li class="n-sk n-sk-ic14 n-as-mrgh n-as-pad-xs"></li>\n        </ul>\n        <div class="n-fx0">\n          <span class="n-sk n-sk-ava-o"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p}},NkSV:function(t){t.exports=JSON.parse('{"AC":["en"],"AD":["ca"],"AE":["ar","en"],"AF":["fa"],"AG":["en"],"AI":["en"],"AL":["ar","fr"],"AM":["hy"],"AN":["en"],"AO":["pt"],"AQ":["en"],"AR":["es"],"AS":["en"],"AT":["de"],"AU":["en"],"AW":["nl"],"AX":["sv"],"AZ":["az","ru"],"BA":["en","sh","hr"],"BB":["en"],"BD":["bn"],"BE":["fr","nl","en"],"BF":["fr"],"BG":["bg"],"BH":["ar","en"],"BI":["fr"],"BJ":["en"],"BL":["fr"],"BM":["en"],"BN":["ms","en"],"BO":["es"],"BQ":["nl"],"BR":["pt","es"],"BS":["es"],"BT":["dz"],"BV":["en"],"BW":["en"],"BY":["ru","be"],"BZ":["en","es"],"CA":["en"],"CC":["en"],"CD":["fr"],"CF":["fr"],"CG":["fr"],"CH":["de","fr","it"],"CI":["fr"],"CK":["en"],"CL":["es"],"CM":["fr","en"],"CN":["zh"],"CO":["es"],"CR":["es"],"CU":["es"],"CV":["pt"],"CW":["es"],"CX":["en"],"CY":["en","el","tr"],"CZ":["cs"],"DE":["de"],"DG":["en"],"DJ":["fr","ar"],"DK":["da"],"DM":["es"],"DO":["es"],"DZ":["ar","fr"],"EC":["es"],"EE":["et"],"EG":["ar","en","fr"],"EH":["ar"],"ER":["en","ar"],"ES":["es"],"ET":["am"],"FI":["fi","sv"],"FJ":["en"],"FK":["en"],"FM":["en"],"FO":["da","fo"],"FR":["fr"],"GA":["fr"],"GB":["en"],"GD":["en"],"GE":["ka"],"GF":["fr"],"GG":["en"],"GH":["en"],"Gl":["en","es"],"GL":["en"],"GM":["en"],"GN":["fr"],"GP":["fr"],"GQ":["es"],"GR":["el"],"GS":["en"],"GT":["es"],"GU":["en"],"GW":["ht"],"GY":["en"],"HK":["zh","en"],"HM":["en"],"HN":["es"],"HR":["hr"],"HT":["fr"],"HU":["hu"],"ID":["id","in"],"IE":["en","ga"],"IL":["he"],"IM":["en"],"IN":["hi"],"IO":["en"],"IQ":["ar"],"IR":["fa"],"IS":["is"],"IT":["it"],"JE":["en"],"JM":["en"],"JO":["en"],"JP":["ja"],"KE":["en","sw"],"KG":["ru","ky"],"KH":["km"],"KI":["en"],"KM":["ar","fr"],"KN":["en"],"KP":["ko"],"KR":["ko"],"KW":["ar","en"],"KY":["en"],"KZ":["ru","kk"],"LA":["lo"],"LB":["ar"],"LC":["en"],"LI":["de"],"LK":["ta","si"],"LR":["en"],"LS":["en"],"LT":["lt"],"LU":["de","fr","lb"],"LV":["lv"],"LY":["ar"],"MA":["ar","fr"],"MC":["fr"],"MD":["mo"],"ME":["sr"],"MF":["fr"],"MG":["fr"],"MH":["mh"],"MK":["mk"],"ML":["fr"],"MM":["my"],"MN":["mn"],"MO":["zh"],"MP":["en"],"MQ":["fr"],"MR":["ar"],"MS":["en"],"MT":["en","mt"],"MU":["en","fr"],"MV":["en","dv"],"MW":["en"],"MX":["es"],"MY":["ms","en"],"MZ":["pt"],"NA":["en"],"NC":["fr"],"NE":["fr"],"NF":["en"],"NG":["en"],"NI":["es"],"NL":["nl"],"NO":["no"],"NP":["ne"],"NR":["en"],"NU":["en"],"NZ":["en"],"OM":["ar","en"],"PA":["es"],"PE":["es"],"PF":["fr"],"PG":["en"],"PH":["fil","tl","en"],"PK":["ur"],"PL":["pl"],"PM":["fr"],"PN":["en"],"PR":["es","en"],"PS":["ar"],"PT":["pt"],"PW":["en"],"PY":["es"],"QA":["ar","en"],"RE":["fr"],"RO":["ro","en"],"RS":["sr"],"RU":["ru"],"RW":["fr","rw"],"SA":["ar"],"SB":["en"],"SC":["fr","ht"],"SD":["ar"],"SE":["sv"],"SG":["en","zh"],"SH":["en"],"SI":["sl"],"SJ":["no"],"SK":["sk"],"SL":["en"],"SM":["it"],"SN":["fr"],"SO":["ar","so"],"SR":["nl","to"],"SS":["ar"],"ST":["pt"],"SV":["es"],"SX":["nl"],"SY":["ar"],"SZ":["en"],"TC":["en"],"TD":["ar","fr"],"TF":["fr"],"TG":["fr"],"TH":["th"],"TJ":["ru","fa"],"TK":["en"],"TL":["pt"],"TM":["tk"],"TN":["ar"],"TO":["en"],"TP":["pt"],"TR":["tr"],"TT":["en"],"TV":["en"],"TW":["zh"],"TZ":["sw"],"UA":["ru","uk"],"UG":["en"],"UM":["en"],"US":["abc"],"UY":["es"],"UZ":["en","uz"],"VA":["it"],"VC":["en"],"VE":["es"],"VG":["en"],"VI":["en"],"VN":["vi"],"VU":["en"],"WF":["fr"],"WS":["en"],"YE":["ar"],"YT":["fr"],"ZA":["zu","af","en"],"ZM":["en"],"ZW":["en"]}')},Npjl:function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},Nr18:function(t,e,i){t.exports=i("4KFe")(123)},Nsbk:function(t,e,i){t.exports=i("4KFe")(226)},Nxq2:function(t,e,i){"use strict";var n;e.a=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n?n.apply(void 0,e):i.e("ca66e").then(i.bind(null,"dsvQ")).then((function(t){var i=t.default;n=i,i.apply(void 0,e)}))}},NykK:function(t,e,i){var n=i("nmnc"),r=i("AP2z"),o=i("KfNM"),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):o(t)}},O0oS:function(t,e,i){var n=i("Cwc5"),r=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=r},O7RO:function(t,e,i){var n=i("CMye"),r=i("7GkX");t.exports=function(t){for(var e=r(t),i=e.length;i--;){var o=e[i],a=t[o];e[i]=[o,a,n(a)]}return e}},OBhP:function(t,e,i){var n=i("fmRc"),r=i("gFfm"),o=i("MrPd"),a=i("WwFo"),s=i("Dw+G"),u=i("5Tg0"),c=i("Q1l4"),l=i("VOtZ"),h=i("EEGq"),d=i("qZTm"),f=i("G6z8"),p=i("QqLw"),m=i("yHx3"),y=i("wrZu"),v=i("+iFO"),g=i("Z0cm"),_=i("DSRE"),S=i("zEVN"),w=i("GoyQ"),b=i("1+5i"),I=i("7GkX"),T=i("mTTR"),P="[object Arguments]",E="[object Function]",k="[object Object]",R={};R[P]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[k]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[E]=R["[object WeakMap]"]=!1,t.exports=function t(e,i,C,O,A,L){var N,M=1&i,U=2&i,D=4&i;if(C&&(N=A?C(e,O,A,L):C(e)),void 0!==N)return N;if(!w(e))return e;var B=g(e);if(B){if(N=m(e),!M)return c(e,N)}else{var F=p(e),x=F==E||"[object GeneratorFunction]"==F;if(_(e))return u(e,M);if(F==k||F==P||x&&!A){if(N=U||x?{}:v(e),!M)return U?h(e,s(N,e)):l(e,a(N,e))}else{if(!R[F])return A?e:{};N=y(e,F,M)}}L||(L=new n);var j=L.get(e);if(j)return j;L.set(e,N),b(e)?e.forEach((function(n){N.add(t(n,i,C,n,e,L))})):S(e)&&e.forEach((function(n,r){N.set(r,t(n,i,C,r,e,L))}));var V=B?void 0:(D?U?f:d:U?T:I)(e);return r(V||e,(function(n,r){V&&(n=e[r=n]),o(N,r,t(n,i,C,r,e,L))})),N}},"OC+i":function(t,e,i){"use strict";var n=i("ZMLX"),r=i("EoCF"),o=function(){this.iAppId=0,this.iViewType=0,this.vData=new r.Taf.BinBuffer,this.sName="",this.iAvailableDays=0,this.iSort=0,this.iRank=0,this.sIconUrl="",this.lFansBadgeId=0,this.iFansLevel=0,this.iPositionType=0,this.iRecordId=0,this.sDynamicUrl="",this.mNameLang=new r.Taf.Map(new r.Taf.STRING,new r.Taf.STRING),this.mExtraData=new r.Taf.Map(new r.Taf.STRING,new r.Taf.STRING)};o.prototype._clone=function(){return new n.a.DecorationInfo},o.prototype._write=function(t,e,i){t.writeStruct(e,i)},o.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},o.prototype.writeTo=function(t){t.writeInt32(0,this.iAppId),t.writeInt32(1,this.iViewType),t.writeBytes(2,this.vData),t.writeString(3,this.sName),t.writeInt32(4,this.iAvailableDays),t.writeInt32(5,this.iSort),t.writeInt32(6,this.iRank),t.writeString(7,this.sIconUrl),t.writeInt64(8,this.lFansBadgeId),t.writeInt32(9,this.iFansLevel),t.writeInt32(10,this.iPositionType),t.writeInt32(11,this.iRecordId),t.writeString(12,this.sDynamicUrl),t.writeMap(13,this.mNameLang),t.writeMap(14,this.mExtraData)},o.prototype.readFrom=function(t){this.iAppId=t.readInt32(0,!1,this.iAppId),this.iViewType=t.readInt32(1,!1,this.iViewType),this.vData=t.readBytes(2,!1,this.vData),this.sName=t.readString(3,!1,this.sName),this.iAvailableDays=t.readInt32(4,!1,this.iAvailableDays),this.iSort=t.readInt32(5,!1,this.iSort),this.iRank=t.readInt32(6,!1,this.iRank),this.sIconUrl=t.readString(7,!1,this.sIconUrl),this.lFansBadgeId=t.readInt64(8,!1,this.lFansBadgeId),this.iFansLevel=t.readInt32(9,!1,this.iFansLevel),this.iPositionType=t.readInt32(10,!1,this.iPositionType),this.iRecordId=t.readInt32(11,!1,this.iRecordId),this.sDynamicUrl=t.readString(12,!1,this.sDynamicUrl),this.mNameLang=t.readMap(13,!1,this.mNameLang),this.mExtraData=t.readMap(14,!1,this.mExtraData)},n.a.DecorationInfo=o},ODcA:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=["_pop","_udbid","_udbtoken","_udbver"];e.b=function(t){var e=window.location.href.replace(location.hash,"").replace("#","").split("?"),i=t;t instanceof Array&&(i=t.join("|"));var n=new RegExp("(".concat(i,")=(\\w|.)+")),r=e[1]?e[1].split("&").filter((function(t){return!n.test(t)})).join("&"):"";return"".concat(e[0]).concat(r?"?".concat(r):"")}},OFL0:function(t,e,i){var n=i("lvO4"),r=i("4sDh");t.exports=function(t,e){return null!=t&&r(t,e,n)}},OHLN:function(t,e,i){"use strict";i.d(e,"b",(function(){return y})),i.d(e,"a",(function(){return v}));var n=i("pVnL"),r=i.n(n),o=i("lSNA"),a=i.n(o),s=i("QILm"),u=i.n(s),c=i("q1tI"),l=i.n(c),h=i("TSYQ"),d=i.n(h),f=["wrapperClassName","className","loading","size","type"],p="nimo-loading-linear";function m(t){var e,i=t||{},n=i.wrapperClassName,o=i.className,s=i.loading,c=void 0===s||s,h=i.size,m=i.type,y=u()(i,f),v="";switch(h){case"large":v="lg";break;case"small":v="sm"}var g=d()(p,o,(e={},a()(e,"".concat(p,"-").concat(m),m),a()(e,"".concat(p,"-").concat(v),v),e));return c?l.a.createElement("div",r()({className:n||""},y),l.a.createElement("div",{className:"".concat(p," ").concat(g)})):null}function y(t){var e=t.loading,i=t.content,n=void 0===i?"loading":i;return e?l.a.createElement("div",{className:"H_tips j-loading"},l.a.createElement(m,null),n):l.a.createElement("div",null)}function v(t){var e=t.loading,i=t.className;return e?l.a.createElement("div",{className:"i-center_loading ".concat(i||"")},l.a.createElement(m,null)):l.a.createElement("div",null)}e.c=m},OI0W:function(t,e,i){"use strict";i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("7W2i"),u=i.n(s),c=i("a1gu"),l=i.n(c),h=i("Nsbk"),d=i.n(h),f=i("ZMLX"),p=i("EoCF"),m=function(){this.lRoomId=0};m.prototype._clone=function(){return new f.a.WS_StreamStop},m.prototype._write=function(t,e,i){t.writeStruct(e,i)},m.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},m.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId)},m.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId)},f.a.WS_StreamStop=m;i("qiiG");var y=function(){this.lRoomId=0,this.roomLine=new f.a.RoomLineInfo};y.prototype._clone=function(){return new f.a.WS_StreamNew},y.prototype._write=function(t,e,i){t.writeStruct(e,i)},y.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},y.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeStruct(1,this.roomLine)},y.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.roomLine=t.readStruct(1,!1,this.roomLine)},f.a.WS_StreamNew=y;var v=function(){this.lRoomId=0,this.iAttendee=0,this.bIfAttendeeChange=!0,this.iFans=0,this.bIfFansChange=!0};v.prototype._clone=function(){return new f.a.WS_RoomAttendeeChange},v.prototype._write=function(t,e,i){t.writeStruct(e,i)},v.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},v.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt32(1,this.iAttendee),t.writeBoolean(2,this.bIfAttendeeChange),t.writeInt32(3,this.iFans),t.writeBoolean(4,this.bIfFansChange)},v.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.iAttendee=t.readInt32(1,!1,this.iAttendee),this.bIfAttendeeChange=t.readBoolean(2,!1,this.bIfAttendeeChange),this.iFans=t.readInt32(3,!1,this.iFans),this.bIfFansChange=t.readBoolean(4,!1,this.bIfFansChange)},f.a.WS_RoomAttendeeChange=v;var g=v,_=(i("Bvyh"),function(){this.lRoomId=0,this.iVedoNums=0,this.vVedioList=new p.Taf.Vector(new f.a.VideoData),this.iRecommendCode=0,this.sBizVideoID="",this.iPassReview=1});_.prototype._clone=function(){return new f.a.NoticeVideoList},_.prototype._write=function(t,e,i){t.writeStruct(e,i)},_.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},_.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt32(1,this.iVedoNums),t.writeVector(2,this.vVedioList),t.writeInt32(3,this.iRecommendCode),t.writeString(4,this.sBizVideoID),t.writeInt32(5,this.iPassReview)},_.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.iVedoNums=t.readInt32(1,!1,this.iVedoNums),this.vVedioList=t.readVector(2,!1,this.vVedioList),this.iRecommendCode=t.readInt32(3,!1,this.iRecommendCode),this.sBizVideoID=t.readString(4,!1,this.sBizVideoID),this.iPassReview=t.readInt32(5,!1,this.iPassReview)},f.a.NoticeVideoList=_;var S=_,w=function(){this.lRoomId=0,this.lUid=0,this.iAttendee=0,this.iGemsAdd=0,this.iSubsAdd=0,this.iFansAdd=0,this.iLiveTime=0,this.iStreamState=0,this.iVipsAdd=0};w.prototype._clone=function(){return new f.a.AnchorPanelInfo},w.prototype._write=function(t,e,i){t.writeStruct(e,i)},w.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},w.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomId),t.writeInt64(1,this.lUid),t.writeInt32(2,this.iAttendee),t.writeInt32(3,this.iGemsAdd),t.writeInt32(4,this.iSubsAdd),t.writeInt32(5,this.iFansAdd),t.writeInt32(6,this.iLiveTime),t.writeInt32(7,this.iStreamState),t.writeInt32(8,this.iVipsAdd)},w.prototype.readFrom=function(t){this.lRoomId=t.readInt64(0,!1,this.lRoomId),this.lUid=t.readInt64(1,!1,this.lUid),this.iAttendee=t.readInt32(2,!1,this.iAttendee),this.iGemsAdd=t.readInt32(3,!1,this.iGemsAdd),this.iSubsAdd=t.readInt32(4,!1,this.iSubsAdd),this.iFansAdd=t.readInt32(5,!1,this.iFansAdd),this.iLiveTime=t.readInt32(6,!1,this.iLiveTime),this.iStreamState=t.readInt32(7,!1,this.iStreamState),this.iVipsAdd=t.readInt32(8,!1,this.iVipsAdd)},f.a.AnchorPanelInfo=w;var b=w,I=(i("glnx"),function(){this.tLiveInfo=new f.a.LiveInfo,this.iType=0});I.prototype._clone=function(){return new f.a.LiveEndNotice},I.prototype._write=function(t,e,i){t.writeStruct(e,i)},I.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},I.prototype.writeTo=function(t){t.writeStruct(0,this.tLiveInfo),t.writeInt32(1,this.iType)},I.prototype.readFrom=function(t){this.tLiveInfo=t.readStruct(0,!1,this.tLiveInfo),this.iType=t.readInt32(1,!1,this.iType)},f.a.LiveEndNotice=I;var T=I,P=function(){this.lRoomType=0,this.mRoomTypeNameLang=new p.Taf.Map(new p.Taf.STRING,new p.Taf.STRING),this.sRoomTheme="",this.iLcid=0,this.iTemplateType=0,this.iBusinessType=0,this.iRoomSort=0};P.prototype._clone=function(){return new f.a.LiveSetting},P.prototype._write=function(t,e,i){t.writeStruct(e,i)},P.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},P.prototype.writeTo=function(t){t.writeInt64(0,this.lRoomType),t.writeMap(1,this.mRoomTypeNameLang),t.writeString(2,this.sRoomTheme),t.writeInt32(3,this.iLcid),t.writeInt32(4,this.iTemplateType),t.writeInt32(5,this.iBusinessType),t.writeInt32(6,this.iRoomSort)},P.prototype.readFrom=function(t){this.lRoomType=t.readInt64(0,!1,this.lRoomType),this.mRoomTypeNameLang=t.readMap(1,!1,this.mRoomTypeNameLang),this.sRoomTheme=t.readString(2,!1,this.sRoomTheme),this.iLcid=t.readInt32(3,!1,this.iLcid),this.iTemplateType=t.readInt32(4,!1,this.iTemplateType),this.iBusinessType=t.readInt32(5,!1,this.iBusinessType),this.iRoomSort=t.readInt32(6,!1,this.iRoomSort)},f.a.LiveSetting=P;var E=function(){this.tLiveInfo=new f.a.LiveInfo,this.tLiveSet=new f.a.LiveSetting};E.prototype._clone=function(){return new f.a.LiveBeginNotice},E.prototype._write=function(t,e,i){t.writeStruct(e,i)},E.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},E.prototype.writeTo=function(t){t.writeStruct(0,this.tLiveInfo),t.writeStruct(1,this.tLiveSet)},E.prototype.readFrom=function(t){this.tLiveInfo=t.readStruct(0,!1,this.tLiveInfo),this.tLiveSet=t.readStruct(1,!1,this.tLiveSet)},f.a.LiveBeginNotice=E;var k=E,R=i("4TRz"),C=i("9SJS");function O(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var r=d()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l()(this,i)}}var A=R.a.EUriRoomAttendeeChange,L=R.a.EUriRoomAttendeeChangeForUid,N=R.a.EUriVideoPlayBlackNotify2,M=R.a.EUriAnchorPanelInfo,U=R.a.EUriLiveEndNotice,D=R.a.EUriLiveBeginNotice,B=function(t){u()(i,t);var e=O(i);function i(){return r()(this,i),e.apply(this,arguments)}return a()(i,[{key:"onNoticeVideoList",value:function(t){return this.on(N,S,t)}},{key:"offNoticeVideoList",value:function(t){return this.off(N,t)}},{key:"onRoomAttendeeChange",value:function(t){return this.on(A,g,t)}},{key:"offRoomAttendeeChange",value:function(t){return this.off(A,t)}},{key:"onRoomAttendeeChangeForUid",value:function(t){return this.on(L,g,t)}},{key:"offRoomAttendeeChangeForUid",value:function(t){return this.off(L,t)}},{key:"onAnchorPanelInfo",value:function(t){return this.on(M,b,t)}},{key:"offAnchorPanelInfo",value:function(t){return this.off(M,t)}},{key:"onLiveBeginNotice",value:function(t){return this.on(D,k,t)}},{key:"offLiveBeginNotice",value:function(t){return this.off(D,t)}},{key:"onLiveEndNotice",value:function(t){return this.on(U,T,t)}},{key:"offLiveEndNotice",value:function(t){return this.off(U,t)}}]),i}(C.a);e.a=new B},OK13:function(t,e,i){"use strict";var n=i("ZMLX"),r=(i("EoCF"),function(){this.iLevel=0,this.iDurationMS=0,this.sUrl="",this.iMin=0,this.iMax=0,this.iTerminalType=0,this.iRecordId=0,this.iShowLevel=0,this.iComboPattern=0,this.iComboCurrent=0,this.iComboPre=0});r.prototype._clone=function(){return new n.a.StreamerEffect},r.prototype._write=function(t,e,i){t.writeStruct(e,i)},r.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},r.prototype.writeTo=function(t){t.writeInt32(0,this.iLevel),t.writeInt32(1,this.iDurationMS),t.writeString(2,this.sUrl),t.writeInt32(3,this.iMin),t.writeInt32(4,this.iMax),t.writeInt32(5,this.iTerminalType),t.writeInt32(6,this.iRecordId),t.writeInt32(7,this.iShowLevel),t.writeInt32(8,this.iComboPattern),t.writeInt32(9,this.iComboCurrent),t.writeInt32(10,this.iComboPre)},r.prototype.readFrom=function(t){this.iLevel=t.readInt32(0,!1,this.iLevel),this.iDurationMS=t.readInt32(1,!1,this.iDurationMS),this.sUrl=t.readString(2,!1,this.sUrl),this.iMin=t.readInt32(3,!1,this.iMin),this.iMax=t.readInt32(4,!1,this.iMax),this.iTerminalType=t.readInt32(5,!1,this.iTerminalType),this.iRecordId=t.readInt32(6,!1,this.iRecordId),this.iShowLevel=t.readInt32(7,!1,this.iShowLevel),this.iComboPattern=t.readInt32(8,!1,this.iComboPattern),this.iComboCurrent=t.readInt32(9,!1,this.iComboCurrent),this.iComboPre=t.readInt32(10,!1,this.iComboPre)},n.a.StreamerEffect=r},OLmr:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r}));var n="init_video_info";function r(t){return{type:n,payload:t}}},OP3Y:function(t,e,i){t.exports=i("4KFe")(154)},"Of+w":function(t,e,i){var n=i("Cwc5")(i("Kz5y"),"WeakMap");t.exports=n},Onz0:function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=t.isBuffer}).call(this,i("tjlA").Buffer)},OvAC:function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0},P2sY:function(t,e,i){t.exports={default:i("UbbE"),__esModule:!0}},P3na:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="n-as-rnd n-as-of-hidden bc1 bsc6">\n  <div class="nimo-card-cover n-as n-as-16x9 n-as-rndt n-sk-black">\n  </div>\n  <div class="nimo-card-body">\n    <div class="n-fx-sc n-as-pad">\n      <span class="n-fx0 n-sk n-sk-ava-lg-o"></span>\n      <div class="n-as-padh n-fx-col n-as-w100">\n        <div class="n-sk n-sk-t16 n-as-w100"></div>\n        <div class="n-sk n-sk-t14 n-as-w60" style="margin: 4px 0 4px;"></div>\n        <div class="n-fx-bc n-as-w100">\n          <span class="n-sk n-sk-t12 n-as-w40"></span>\n          <span class="n-sk n-sk-t12"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p}},P56o:function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},P7XM:function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},PAFS:function(t,e,i){var n=i("Bsg+");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},PE9J:function(t,e){t.exports=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r},t.exports.default=t.exports,t.exports.__esModule=!0},PFWz:function(t,e,i){try{var n=i("zs13")}catch(s){n=i("zs13")}var r=/\s+/,o=Object.prototype.toString;function a(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}t.exports=function(t){return new a(t)},a.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~n(e,t)||e.push(t),this.el.className=e.join(" "),this},a.prototype.remove=function(t){if("[object RegExp]"==o.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),i=n(e,t);return~i&&e.splice(i,1),this.el.className=e.join(" "),this},a.prototype.removeMatching=function(t){for(var e=this.array(),i=0;i<e.length;i++)t.test(e[i])&&this.remove(e[i]);return this},a.prototype.toggle=function(t,e){return this.list?("undefined"!==typeof e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!==typeof e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},a.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(r);return""===t[0]&&t.shift(),t},a.prototype.has=a.prototype.contains=function(t){return this.list?this.list.contains(t):!!~n(this.array(),t)}},PHUK:function(t,e,i){"use strict";i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("7W2i"),u=i.n(s),c=i("a1gu"),l=i.n(c),h=i("Nsbk"),d=i.n(h),f=i("U+yc"),p=i.n(f),m=i("ZMLX"),y=i("EoCF"),v=function(){this.iLevel=0,this.iLangID=0,this.iNeedNextLevel=0};v.prototype._clone=function(){return new m.a.AnchorLevelConfigReq},v.prototype._write=function(t,e,i){t.writeStruct(e,i)},v.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},v.prototype.writeTo=function(t){t.writeInt32(0,this.iLevel),t.writeInt32(1,this.iLangID),t.writeInt32(2,this.iNeedNextLevel)},v.prototype.readFrom=function(t){this.iLevel=t.readInt32(0,!1,this.iLevel),this.iLangID=t.readInt32(1,!1,this.iLangID),this.iNeedNextLevel=t.readInt32(2,!1,this.iNeedNextLevel)},m.a.AnchorLevelConfigReq=v;var g=v,_=function(){this.iLevel=0,this.iExp=0,this.sMedal=""};_.prototype._clone=function(){return new m.a.AnchorLevelConfig},_.prototype._write=function(t,e,i){t.writeStruct(e,i)},_.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},_.prototype.writeTo=function(t){t.writeInt32(0,this.iLevel),t.writeInt32(1,this.iExp),t.writeString(2,this.sMedal)},_.prototype.readFrom=function(t){this.iLevel=t.readInt32(0,!1,this.iLevel),this.iExp=t.readInt32(1,!1,this.iExp),this.sMedal=t.readString(2,!1,this.sMedal)},m.a.AnchorLevelConfig=_;var S=function(){this.iCode=0,this.vConfig=new y.Taf.Vector(new m.a.AnchorLevelConfig)};S.prototype._clone=function(){return new m.a.AnchorLevelConfigRsp},S.prototype._write=function(t,e,i){t.writeStruct(e,i)},S.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},S.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeVector(1,this.vConfig)},S.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.vConfig=t.readVector(1,!1,this.vConfig)},m.a.AnchorLevelConfigRsp=S;var w=S,b=(i("leMB"),function(){this.user=new m.a.UserId,this.iNeedLevelConfig=0,this.iNeedNextLevelConfig=0});b.prototype._clone=function(){return new m.a.AnchorLevelDetailReq},b.prototype._write=function(t,e,i){t.writeStruct(e,i)},b.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},b.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeInt32(1,this.iNeedLevelConfig),t.writeInt32(2,this.iNeedNextLevelConfig)},b.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.iNeedLevelConfig=t.readInt32(1,!1,this.iNeedLevelConfig),this.iNeedNextLevelConfig=t.readInt32(2,!1,this.iNeedNextLevelConfig)},m.a.AnchorLevelDetailReq=b;var I=b,T=function(){this.lUid=0,this.iLevel=0,this.iExp=0};T.prototype._clone=function(){return new m.a.AnchorLevelDetail},T.prototype._write=function(t,e,i){t.writeStruct(e,i)},T.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},T.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt32(1,this.iLevel),t.writeInt32(2,this.iExp)},T.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.iLevel=t.readInt32(1,!1,this.iLevel),this.iExp=t.readInt32(2,!1,this.iExp)},m.a.AnchorLevelDetail=T;var P=function(){this.iCode=0,this.detail=new m.a.AnchorLevelDetail,this.vConfig=new y.Taf.Vector(new m.a.AnchorLevelConfig)};P.prototype._clone=function(){return new m.a.AnchorLevelDetailRsp},P.prototype._write=function(t,e,i){t.writeStruct(e,i)},P.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},P.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeStruct(1,this.detail),t.writeVector(2,this.vConfig)},P.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.detail=t.readStruct(1,!1,this.detail),this.vConfig=t.readVector(2,!1,this.vConfig)},m.a.AnchorLevelDetailRsp=P;var E=P,k=function(){this.lUid=0,this.user=new m.a.UserId};k.prototype._clone=function(){return new m.a.AnchorLevelDetailByUid},k.prototype._write=function(t,e,i){t.writeStruct(e,i)},k.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},k.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeStruct(1,this.user)},k.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.user=t.readStruct(1,!1,this.user)},m.a.AnchorLevelDetailByUid=k;var R=k,C=function(){this.iLevel=0,this.iLangID=0};C.prototype._clone=function(){return new m.a.AnchorTaskConfigReq},C.prototype._write=function(t,e,i){t.writeStruct(e,i)},C.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},C.prototype.writeTo=function(t){t.writeInt32(0,this.iLevel),t.writeInt32(1,this.iLangID)},C.prototype.readFrom=function(t){this.iLevel=t.readInt32(0,!1,this.iLevel),this.iLangID=t.readInt32(1,!1,this.iLangID)},m.a.AnchorTaskConfigReq=C;var O=C,A=function(){this.iID=0,this.iType=0,this.iClass=0,this.sName="",this.sDesc="",this.iEnableLevel=0,this.mExt=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.lReserve=0,this.iExp=0,this.iEnableEndLevel=0,this.lEnableBeginTime=0,this.lEnableEndTime=0,this.sIcon="",this.sIconComplete="",this.sIconBackground="",this.sIconBackgroundComplete=""};A.prototype._clone=function(){return new m.a.AnchorTaskConfig},A.prototype._write=function(t,e,i){t.writeStruct(e,i)},A.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},A.prototype.writeTo=function(t){t.writeInt32(0,this.iID),t.writeInt32(1,this.iType),t.writeInt32(2,this.iClass),t.writeString(3,this.sName),t.writeString(4,this.sDesc),t.writeInt32(5,this.iEnableLevel),t.writeMap(6,this.mExt),t.writeInt64(7,this.lReserve),t.writeInt32(8,this.iExp),t.writeInt32(9,this.iEnableEndLevel),t.writeInt64(10,this.lEnableBeginTime),t.writeInt64(11,this.lEnableEndTime),t.writeString(12,this.sIcon),t.writeString(13,this.sIconComplete),t.writeString(14,this.sIconBackground),t.writeString(15,this.sIconBackgroundComplete)},A.prototype.readFrom=function(t){this.iID=t.readInt32(0,!1,this.iID),this.iType=t.readInt32(1,!1,this.iType),this.iClass=t.readInt32(2,!1,this.iClass),this.sName=t.readString(3,!1,this.sName),this.sDesc=t.readString(4,!1,this.sDesc),this.iEnableLevel=t.readInt32(5,!1,this.iEnableLevel),this.mExt=t.readMap(6,!1,this.mExt),this.lReserve=t.readInt64(7,!1,this.lReserve),this.iExp=t.readInt32(8,!1,this.iExp),this.iEnableEndLevel=t.readInt32(9,!1,this.iEnableEndLevel),this.lEnableBeginTime=t.readInt64(10,!1,this.lEnableBeginTime),this.lEnableEndTime=t.readInt64(11,!1,this.lEnableEndTime),this.sIcon=t.readString(12,!1,this.sIcon),this.sIconComplete=t.readString(13,!1,this.sIconComplete),this.sIconBackground=t.readString(14,!1,this.sIconBackground),this.sIconBackgroundComplete=t.readString(15,!1,this.sIconBackgroundComplete)},m.a.AnchorTaskConfig=A;var L=function(){this.iCode=0,this.vTasks=new y.Taf.Vector(new m.a.AnchorTaskConfig)};L.prototype._clone=function(){return new m.a.AnchorTaskConfigRsp},L.prototype._write=function(t,e,i){t.writeStruct(e,i)},L.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},L.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeVector(1,this.vTasks)},L.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.vTasks=t.readVector(1,!1,this.vTasks)},m.a.AnchorTaskConfigRsp=L;var N=L,M=function(){this.lUid=0,this.iType=0,this.iLangID=0};M.prototype._clone=function(){return new m.a.AnchorPrivilegeByTypeReq},M.prototype._write=function(t,e,i){t.writeStruct(e,i)},M.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},M.prototype.writeTo=function(t){t.writeInt64(0,this.lUid),t.writeInt32(1,this.iType),t.writeInt32(2,this.iLangID)},M.prototype.readFrom=function(t){this.lUid=t.readInt64(0,!1,this.lUid),this.iType=t.readInt32(1,!1,this.iType),this.iLangID=t.readInt32(2,!1,this.iLangID)},m.a.AnchorPrivilegeByTypeReq=M;var U=M,D=function(){this.iID=0,this.iType=0,this.sName="",this.sDesc="",this.iEnableLevel=0,this.mExt=new y.Taf.Map(new y.Taf.STRING,new y.Taf.STRING),this.sPhoto="",this.sDescDetail="",this.sPhotoDetail=""};D.prototype._clone=function(){return new m.a.AnchorPrivilegeConfig},D.prototype._write=function(t,e,i){t.writeStruct(e,i)},D.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},D.prototype.writeTo=function(t){t.writeInt32(0,this.iID),t.writeInt32(1,this.iType),t.writeString(2,this.sName),t.writeString(3,this.sDesc),t.writeInt32(4,this.iEnableLevel),t.writeMap(5,this.mExt),t.writeString(6,this.sPhoto),t.writeString(7,this.sDescDetail),t.writeString(8,this.sPhotoDetail)},D.prototype.readFrom=function(t){this.iID=t.readInt32(0,!1,this.iID),this.iType=t.readInt32(1,!1,this.iType),this.sName=t.readString(2,!1,this.sName),this.sDesc=t.readString(3,!1,this.sDesc),this.iEnableLevel=t.readInt32(4,!1,this.iEnableLevel),this.mExt=t.readMap(5,!1,this.mExt),this.sPhoto=t.readString(6,!1,this.sPhoto),this.sDescDetail=t.readString(7,!1,this.sDescDetail),this.sPhotoDetail=t.readString(8,!1,this.sPhotoDetail)},m.a.AnchorPrivilegeConfig=D;var B=function(){this.iCode=0,this.vPrivileges=new y.Taf.Vector(new m.a.AnchorPrivilegeConfig)};B.prototype._clone=function(){return new m.a.AnchorPrivilegeByTypeRsp},B.prototype._write=function(t,e,i){t.writeStruct(e,i)},B.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},B.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeVector(1,this.vPrivileges)},B.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.vPrivileges=t.readVector(1,!1,this.vPrivileges)},m.a.AnchorPrivilegeByTypeRsp=B;var F=B,x=function(){this.user=new m.a.UserId};x.prototype._clone=function(){return new m.a.AnchorTaskDetailReq},x.prototype._write=function(t,e,i){t.writeStruct(e,i)},x.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},x.prototype.writeTo=function(t){t.writeStruct(0,this.user)},x.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user)},m.a.AnchorTaskDetailReq=x;var j=x,V=function(){this.user=new m.a.UserId,this.lUID=0};V.prototype._clone=function(){return new m.a.AnchorTaskDetailByUidReq},V.prototype._write=function(t,e,i){t.writeStruct(e,i)},V.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},V.prototype.writeTo=function(t){t.writeStruct(0,this.user),t.writeInt64(1,this.lUID)},V.prototype.readFrom=function(t){this.user=t.readStruct(0,!1,this.user),this.lUID=t.readInt64(1,!1,this.lUID)},m.a.AnchorTaskDetailByUidReq=V;var G=V,H=function(){this.iID=0,this.iProgress=0,this.lCompleteTime=0,this.iCurrentNum=0,this.iTargetNum=0};H.prototype._clone=function(){return new m.a.AnchorTaskDetail},H.prototype._write=function(t,e,i){t.writeStruct(e,i)},H.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},H.prototype.writeTo=function(t){t.writeInt32(0,this.iID),t.writeInt32(1,this.iProgress),t.writeInt64(2,this.lCompleteTime),t.writeInt32(3,this.iCurrentNum),t.writeInt32(4,this.iTargetNum)},H.prototype.readFrom=function(t){this.iID=t.readInt32(0,!1,this.iID),this.iProgress=t.readInt32(1,!1,this.iProgress),this.lCompleteTime=t.readInt64(2,!1,this.lCompleteTime),this.iCurrentNum=t.readInt32(3,!1,this.iCurrentNum),this.iTargetNum=t.readInt32(4,!1,this.iTargetNum)},m.a.AnchorTaskDetail=H;var W=function(){this.iCode=0,this.vTasks=new y.Taf.Vector(new m.a.AnchorTaskDetail)};W.prototype._clone=function(){return new m.a.AnchorTaskDetailRsp},W.prototype._write=function(t,e,i){t.writeStruct(e,i)},W.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},W.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeVector(1,this.vTasks)},W.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.vTasks=t.readVector(1,!1,this.vTasks)},m.a.AnchorTaskDetailRsp=W;var q=W,K=function(){this.iLevel=0,this.iLangID=0};K.prototype._clone=function(){return new m.a.AnchorPrivilegeConfigReq},K.prototype._write=function(t,e,i){t.writeStruct(e,i)},K.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},K.prototype.writeTo=function(t){t.writeInt32(0,this.iLevel),t.writeInt32(1,this.iLangID)},K.prototype.readFrom=function(t){this.iLevel=t.readInt32(0,!1,this.iLevel),this.iLangID=t.readInt32(1,!1,this.iLangID)},m.a.AnchorPrivilegeConfigReq=K;var Y=K,z=function(){this.iCode=0,this.vPrivileges=new y.Taf.Vector(new m.a.AnchorPrivilegeConfig)};z.prototype._clone=function(){return new m.a.AnchorPrivilegeConfigRsp},z.prototype._write=function(t,e,i){t.writeStruct(e,i)},z.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},z.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeVector(1,this.vPrivileges)},z.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.vPrivileges=t.readVector(1,!1,this.vPrivileges)},m.a.AnchorPrivilegeConfigRsp=z;var J=z,Q=function(){this.tUser=new m.a.UserId};Q.prototype._clone=function(){return new m.a.AnchorLevelCareerReq},Q.prototype._write=function(t,e,i){t.writeStruct(e,i)},Q.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},Q.prototype.writeTo=function(t){t.writeStruct(0,this.tUser)},Q.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser)},m.a.AnchorLevelCareerReq=Q;var X=Q,Z=function(){this.iCode=0,this.sMessage="",this.lBeAnchorDays=0,this.lFollowerCnt=0,this.lContributorCnt=0};Z.prototype._clone=function(){return new m.a.AnchorLevelCareerRsp},Z.prototype._write=function(t,e,i){t.writeStruct(e,i)},Z.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},Z.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeString(1,this.sMessage),t.writeInt64(2,this.lBeAnchorDays),t.writeInt64(3,this.lFollowerCnt),t.writeInt64(4,this.lContributorCnt)},Z.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.sMessage=t.readString(1,!1,this.sMessage),this.lBeAnchorDays=t.readInt64(2,!1,this.lBeAnchorDays),this.lFollowerCnt=t.readInt64(3,!1,this.lFollowerCnt),this.lContributorCnt=t.readInt64(4,!1,this.lContributorCnt)},m.a.AnchorLevelCareerRsp=Z;var $=Z,tt=function(){this.tUser=new m.a.UserId};tt.prototype._clone=function(){return new m.a.GetAnchorUnReadPrivilegeReq},tt.prototype._write=function(t,e,i){t.writeStruct(e,i)},tt.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},tt.prototype.writeTo=function(t){t.writeStruct(0,this.tUser)},tt.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser)},m.a.GetAnchorUnReadPrivilegeReq=tt;var et=tt,it=function(){this.iCode=0,this.sErrMsg="",this.vUnreadPrivilegeIds=new y.Taf.Vector(new y.Taf.INT32)};it.prototype._clone=function(){return new m.a.GetAnchorUnReadPrivilegeRsp},it.prototype._write=function(t,e,i){t.writeStruct(e,i)},it.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},it.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeString(1,this.sErrMsg),t.writeVector(2,this.vUnreadPrivilegeIds)},it.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.sErrMsg=t.readString(1,!1,this.sErrMsg),this.vUnreadPrivilegeIds=t.readVector(2,!1,this.vUnreadPrivilegeIds)},m.a.GetAnchorUnReadPrivilegeRsp=it;var nt=it,rt=function(){this.tUser=new m.a.UserId,this.vPrivilegeIds=new y.Taf.Vector(new y.Taf.INT32)};rt.prototype._clone=function(){return new m.a.SetAnchorPrivilegeReadReq},rt.prototype._write=function(t,e,i){t.writeStruct(e,i)},rt.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},rt.prototype.writeTo=function(t){t.writeStruct(0,this.tUser),t.writeVector(1,this.vPrivilegeIds)},rt.prototype.readFrom=function(t){this.tUser=t.readStruct(0,!1,this.tUser),this.vPrivilegeIds=t.readVector(1,!1,this.vPrivilegeIds)},m.a.SetAnchorPrivilegeReadReq=rt;var ot=rt,at=function(){this.iCode=0,this.sErrMsg=""};at.prototype._clone=function(){return new m.a.SetAnchorUnReadPrivilegeRsp},at.prototype._write=function(t,e,i){t.writeStruct(e,i)},at.prototype._read=function(t,e,i){return t.readStruct(e,!0,i)},at.prototype.writeTo=function(t){t.writeInt32(0,this.iCode),t.writeString(1,this.sErrMsg)},at.prototype.readFrom=function(t){this.iCode=t.readInt32(0,!1,this.iCode),this.sErrMsg=t.readString(1,!1,this.sErrMsg)},m.a.SetAnchorUnReadPrivilegeRsp=at;var st,ut=at,ct=i("w0rY"),lt=i("Mk7s");function ht(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var r=d()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l()(this,i)}}var dt=(st=function(t){u()(i,t);var e=ht(i);function i(){return r()(this,i),e.apply(this,arguments)}return a()(i,[{key:"getAnchorLevelConfig",value:function(t){var e=t.iLevel,i=t.iLangID,n=t.iNeedNextLevel,r=void 0===n?-1:n,o=new g;return o.iLevel=e,o.iLangID=i,o.iNeedNextLevel=r,this.fetch("getAnchorLevelConfig",o,w,{customHandleError:!0,useCache:!0})}},{key:"getAnchorLevelDetail",value:function(t){var e=t||{},i=e.needLevelConfig,n=e.needNextLevelConfig,r=new I;return i&&(r.iNeedLevelConfig=1),n&&(r.iNeedNextLevelConfig=1),this.setUserId(r.user),this.fetch("getAnchorLevelDetail",r,E,{customHandleError:!0})}},{key:"getAnchorLevelDetailByUid",value:function(t){var e=t.lUid,i=new R;return i.lUid=e,this.fetch("getAnchorLevelDetailByUid",i,E,{customHandleError:!0,useSignal:!0,reportResult:!0,tag:"get_anchor_level_detail_by_uid",signalHttp:!0,useCache:!0})}},{key:"getAnchorTaskConfig",value:function(t){var e=t.iLevel,i=t.iLangID,n=new O;return n.iLevel=e,n.iLangID=i,this.fetch("getAnchorTaskConfig",n,N,{customHandleError:!0})}},{key:"getAnchorPrivilegeByType",value:function(t){var e=t.lUid,i=t.iType,n=t.iLangID,r=new U;return r.lUid=e,r.iType=i,r.iLangID=n,this.fetch("getAnchorPrivilegeByType",r,F,{customHandleError:!0})}},{key:"getAnchorTaskDetail",value:function(){var t=new j;return this.setUserId(t.user),this.fetch("getAnchorTaskDetail",t,q,{customHandleError:!0})}},{key:"getAnchorTaskDetailByUid",value:function(t){var e=t.lUID,i=new G;return i.lUID=e,this.setUserId(i.user),this.fetch("getAnchorTaskDetailByUid",i,q,{customHandleError:!0})}},{key:"getAnchorPrivilegeConfig",value:function(t){var e=t.iLevel,i=t.iLangID,n=new Y;return n.iLevel=e,n.iLangID=i,this.fetch("getAnchorPrivilegeConfig",n,J,{customHandleError:!0})}},{key:"getAnchorLevelCareer",value:function(){var t=new X;return this.setUserId(t.tUser),this.fetch("getAnchorLevelCareer",t,$,{customHandleError:!0})}},{key:"getAnchorUnReadPrivilege",value:function(){var t=new et;return this.setUserId(t.tUser),this.fetch("getAnchorUnReadPrivilege",t,nt,{customHandleError:!0})}},{key:"setAnchorPrivilegeRead",value:function(t){var e=t.vPrivilegeIds,i=void 0===e?[]:e,n=new ot;return n.vPrivilegeIds.value=i,this.setUserId(n.tUser),this.fetch("setAnchorPrivilegeRead",n,ut,{customHandleError:!0})}}]),i}(ct.a),p()(st.prototype,"getAnchorLevelDetail",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"getAnchorLevelDetail"),st.prototype),p()(st.prototype,"getAnchorLevelDetailByUid",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"getAnchorLevelDetailByUid"),st.prototype),p()(st.prototype,"getAnchorTaskDetail",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"getAnchorTaskDetail"),st.prototype),p()(st.prototype,"getAnchorTaskDetailByUid",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"getAnchorTaskDetailByUid"),st.prototype),p()(st.prototype,"getAnchorLevelCareer",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"getAnchorLevelCareer"),st.prototype),p()(st.prototype,"getAnchorUnReadPrivilege",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"getAnchorUnReadPrivilege"),st.prototype),p()(st.prototype,"setAnchorPrivilegeRead",[lt.a],Object.getOwnPropertyDescriptor(st.prototype,"setAnchorPrivilegeRead"),st.prototype),st);e.a=new dt},PJYZ:function(t,e,i){t.exports=i("4KFe")(117)},PMPE:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("pVnL"),r=i.n(n),o=i("QILm"),a=i.n(o),s=i("q1tI"),u=i("TSYQ"),c=i.n(u),l=["className","dataSource"],h={0:0,1:540,2:568,3:300},d=function(t){var e=t.className,n=t.dataSource,o=a()(t,l),u=n||{},d=u.head_img,f=void 0===d?"":d,p=u.roomSort,m=""!==f&&h[void 0===p?0:p]||0;return s.createElement("div",r()({},o,{className:c()(e,"n-fx1"),dangerouslySetInnerHTML:{__html:i("k3tm")({headImgHeight:m})}}))}},PtqM:function(t,e,i){var n=i("NykK"),r=i("ExA7"),o=i("YO3V");t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}},Puqe:function(t,e,i){var n=i("eUgh"),r=i("OBhP"),o=i("S7Xf"),a=i("4uTw"),s=i("juv8"),u=i("4Oe1"),c=i("xs/l"),l=i("G6z8"),h=c((function(t,e){var i={};if(null==t)return i;var c=!1;e=n(e,(function(e){return e=a(e,t),c||(c=e.length>1),e})),s(t,l(t),i),c&&(i=r(i,7,u));for(var h=e.length;h--;)o(i,e[h]);return i}));t.exports=h},PxAQ:function(t,e,i){"use strict";i.r(e);var n=i("pVnL"),r=i.n(n),o=i("QILm"),a=i.n(o),s=i("q1tI"),u=i("TSYQ"),c=i.n(u),l=i("lSNA"),h=i.n(l),d=i("hI8Q");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){h()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m=function(t){var e=t.prefixCls,i=void 0===e?"HeadImg":e,n=t.className,r=void 0===n?"":n,o=t.src,a=void 0===o?"":o,u=t.height,l=void 0===u?0:u,h=t.style,f=t.clip,m=void 0!==f&&f,y=c()(i,r);return s.createElement("div",{className:y,style:p(p({},h),{},{backgroundImage:"url(".concat(Object(d.b)(a,!!m&&{height:l},"webp"),")"),height:l})})},y=["prefixCls","className"];e.default=function(t){var e=t.prefixCls,i=void 0===e?"nimo-room__head-img":e,n=t.className,o=void 0===n?"":n,u=a()(t,y),l=c()(i,o);return s.createElement(m,r()({},u,{className:l}))}},Q1l4:function(t,e){t.exports=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}},QDlc:function(t,e,i){"use strict";function n(){return!1}function r(){return!0}function o(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(e,"__esModule",{value:!0}),o.prototype={isEventObject:1,constructor:o,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(t){t?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},e.default=o,t.exports=e.default},QILm:function(t,e,i){var n=i("8OQS");t.exports=function(t,e){if(null==t)return{};var i,r,o=n(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o},t.exports.default=t.exports,t.exports.__esModule=!0},QIyF:function(t,e,i){var n=i("Kz5y");t.exports=function(){return n.Date.now()}},QYxq:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"h",(function(){return u})),i.d(e,"c",(function(){return c})),i.d(e,"g",(function(){return l})),i.d(e,"e",(function(){return h})),i.d(e,"b",(function(){return d})),i.d(e,"f",(function(){return f})),i.d(e,"d",(function(){return p}));var n=i("KkFV"),r="nimo_room_login_guide_panel",o="nimo_room_player_rate_switch",a="nimo_room_watching_within_5_min",s=function(){var t=!1,e=n.b.get(r);return e&&Date.now()-Number(e)<864e5&&(t=!0),t},u=function(){n.b.set(r,Date.now())},c=function(){return n.b.get(o)},l=function(t){n.b.set(o,t)},h=function(){n.b.remove(o)},d=function(){return n.c.get(a)},f=function(){n.c.set(a,1)},p=function(){n.c.remove(a)}},Qatm:function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},QbLZ:function(t,e,i){"use strict";e.__esModule=!0;var n,r=i("P2sY"),o=(n=r)&&n.__esModule?n:{default:n};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}},QcOe:function(t,e,i){var n=i("GoyQ"),r=i("6sVZ"),o=i("7Ix3"),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=r(t),i=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&i.push(s);return i}},Qdcs:function(t,e,i){"use strict";i("I5cv");var n=i("QILm"),r=i.n(n),o=i("J4zp"),a=i.n(o),s=i("lSNA"),u=i.n(s),c=i("lwsE"),l=i.n(c),h=i("W8MJ"),d=i.n(h),f=i("iWIM"),p=i.n(f),m=i("7W2i"),y=i.n(m),v=i("a1gu"),g=i.n(v),_=i("Nsbk"),S=i.n(_),w=i("9SJS"),b=["sData"];function I(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function T(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?I(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=S()(t);if(e){var r=S()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g()(this,i)}}var E=function(t){y()(i,t);var e=P(i);function i(t){var n;return l()(this,i),(n=e.call(this,t)).defaults=T({},t),n}return d()(i,[{key:"on",value:function(t,e){var n=this,o=this._getBroadcast(t)||[],s=a()(o,2),u=s[0],c=s[1],l=function(t){var i,o=t||{},a=o.sData,s=r()(o,b);try{i=JSON.parse(a)}catch(u){console.warn(u)}i&&n.invoke(e,T(T({},s),{},{data:i}))};return p()(S()(i.prototype),"on",this).call(this,u,c,l),function(){p()(S()(i.prototype),"off",n).call(n,u,l)}}}]),i}(w.a);e.a=E},QjRD:function(t,e,i){"use strict";t.exports=i("9CRm")},QkVE:function(t,e,i){var n=i("EpBk");t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},QoRX:function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}},Qolz:function(t,e,i){"use strict";i.d(e,"a",(function(){return _}));i("I5cv");var n=i("lwsE"),r=i.n(n),o=i("W8MJ"),a=i.n(o),s=i("7W2i"),u=i.n(s),c=i("a1gu"),l=i.n(c),h=i("Nsbk"),d=i.n(h),f=i("lSNA"),p=i.n(f),m=i("q1tI"),y=i.n(m),v=i("lpJ4");function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var r=d()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l()(this,i)}}var _=function(t){u()(i,t);var e=g(i);function i(t){var n;return r()(this,i),(n=e.call(this,t)).state={errorInfo:null},n}return a()(i,[{key:"componentDidMount",value:function(){var t=this;this.unregister=v.a.listen((function(){t.state.errorInfo&&t.setState({errorInfo:null})}))}},{key:"componentWillUnmount",value:function(){this.unregister&&this.unregister()}},{key:"componentDidCatch",value:function(t,e){this.setState({errorInfo:e}),window.Sentry&&"function"===typeof window.Sentry.captureException&&window.Sentry.captureException(t)}},{key:"render",value:function(){var t=this.state.errorInfo,e=this.props,i=e.children,n=e.renderErrorInfo;return t?n?y.a.createElement("div",{className:"n-as-text-center n-as-fs16 c1",style:{marginTop:"40vh"}},"Sorry, something went wrong. Please try again"):null:i}}]),i}(y.a.Component);p()(_,"defaultProps",{renderErrorInfo:!0})},QpuX:function(t,e,i){t.exports=i("+qE3").EventEmitter},QqLw:function(t,e,i){var n=i("tadb"),r=i("ebwN"),o=i("HOxn"),a=i("yGk4"),s=i("Of+w"),u=i("NykK"),c=i("3Fdi"),l="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(n),y=c(r),v=c(o),g=c(a),_=c(s),S=u;(n&&S(new n(new ArrayBuffer(1)))!=p||r&&S(new r)!=l||o&&S(o.resolve())!=h||a&&S(new a)!=d||s&&S(new s)!=f)&&(S=function(t){var e=u(t),i="[object Object]"==e?t.constructor:void 0,n=i?c(i):"";if(n)switch(n){case m:return p;case y:return l;case v:return h;case g:return d;case _:return f}return e}),t.exports=S},"R/W3":function(t,e,i){var n=i("KwMD"),r=i("2ajD"),o=i("CZoQ");t.exports=function(t,e,i){return e===e?o(t,e,i):n(t,r,i)}},R5TD:function(t,e){var i=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=i)},RA07:function(t,e,i){"use strict";i.d(e,"e",(function(){return f})),i.d(e,"d",(function(){return p})),i.d(e,"c",(function(){return m})),i.d(e,"f",(function(){return y})),i.d(e,"a",(function(){return v})),i.d(e,"b",(function(){return g}));var n=i("lSNA"),r=i.n(n),o=i("J4zp"),a=i.n(o),s=i("W7YU"),u=i("ZMLX"),c=(i("EoCF"),{ETube:0,EAppidMessageServer:101,EAppidGiftRoomServer:201,EAppidTafUserServer:301,EAppidMsgCenterServer:401,EAppidMatchServer:501});u.a.EAppType=c;var l=c,h=i("uYE1");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){return Object(s.g)(l.ETube,t)}function(){}