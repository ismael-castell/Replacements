function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
(function(){var ROOT_NAME_SPACE={};var root=window;var ROOTNSNAME;var assertRootName=function assertRootName(){if(!ROOTNSNAME){throw"No Root Name configured for the namespace. Try calling namespace.init(\"MyNameSpace\");";}};var namespace=function namespace(){"use strict";assertRootName();var a=arguments;for(var i=0;i<a.length;i=i+1){var d=a[i].split(".");var o=root[ROOTNSNAME];var s=d[0]===ROOTNSNAME?1:0;var n=ROOTNSNAME;for(var j=s;j<d.length;j=j+1){n=n+"."+d[j];o[d[j]]=o[d[j]]||function(ns){var _parent;var _nsName=n;ns.extend=ROOT_NAME_SPACE.extend;ns.getChildren=function(){return ROOT_NAME_SPACE.getChildren(ns);};ns.setParent=function(p){_parent=p;};ns.getNSName=function(){return _nsName;};ns.toString=function(){return _nsName;};ns.isNamespace=true;ns.parent=function(propertyName){if(propertyName){return _parent[propertyName];}
return _parent;};return ns;}({});o[d[j]].setParent(o);o=o[d[j]];}}
return o;};ROOT_NAME_SPACE.namespace=namespace;ROOT_NAME_SPACE.setParent=function(){assertRootName();};ROOT_NAME_SPACE.isNamespace=true;ROOT_NAME_SPACE.getNSName=function(){assertRootName();return ROOTNSNAME;};ROOT_NAME_SPACE.toString=ROOT_NAME_SPACE.getNSName;ROOT_NAME_SPACE.parent=function(propertyName){return propertyName?root[propertyName]:root;};ROOT_NAME_SPACE.getChildren=function(me){var result=[];me=me||this;for(var k in me){if(me[k]&&me[k].isNamespace){var addChild=true;for(var rKey in result){if(result[rKey]===me[k])addChild=false;}
if(addChild){result.push(me[k]);}}}
return result===[]?undefined:result;};ROOT_NAME_SPACE.extend=function(c,p,o){"use strict";var _BASE_='base';var override=false;var child;var parent;if(arguments.length>2){child=c;parent=p;override=typeof arguments[2]==="boolean"?o:override;}
if(arguments.length==2){if(typeof arguments[1]==="boolean"){child=this;parent=c;override=p;}else{child=c;parent=p;}}
if(arguments.length==1){child=this;parent=c;}
if(!child||!parent){throw new Error("Insufficient arguments for extend");}
if(!(_typeof(child)==="object")||!(_typeof(parent)==="object")){console.warn("Both child and parent must be objects, naughty, naughty");return child;}
if(child===parent){console.warn("Child and parent are the same, naughty, naughty");return;}
var property;for(property in parent){if(property in child){if(override){var to=child[property];var from=parent[property];var temp;if(Array.isArray(from)){temp=to&&Array.isArray(to)?to:[];child[property]=e(temp,from,override);}else if(_typeof(from)==="object"){temp=to&&_typeof(to)==="object"?to:{};child[property]=e(temp,from,override);}else{child[property]=parent[property];}}else{var to=child[property];var from=parent[property];if(typeof to==="function"&&typeof from==="function"){if(Object.keys(ROOT_NAME_SPACE).indexOf(property)===-1){var assignBase=function assignBase(t,f){return function(){var temp=this[_BASE_]?this[_BASE_]:undefined;this[_BASE_]=f;var result=t.apply(this,arguments);if(temp){this[_BASE_]=temp;}
return result;};};child[property]=assignBase(to,from);}}}}else{if(!(child===parent[property])&&!(_typeof(parent[property])==="object"&&parent[property].isNamespace)){child[property]=parent[property];}}}
child.setParent(parent);return child;};namespace.init=function(rootName){if(ROOTNSNAME){if(rootName!==ROOTNSNAME){throw"Root Namespace is already set. You cannot change the root NameSpace from: "+ROOTNSNAME+" to: "+rootName;}else{console.warn("Root Namespace is already set to: "+ROOTNSNAME);}}
ROOTNSNAME=rootName||ROOTNSNAME;root[ROOTNSNAME]=ROOT_NAME_SPACE;};ROOT_NAME_SPACE.noConflict=function(){assertRootName();var previous_RNS;if(root!=null){previous_RNS=root[ROOTNSNAME];}
root[ROOTNSNAME]=previous_RNS;return ROOT_NAME_SPACE;};if(typeof module!=='undefined'&&module.exports){module.exports=namespace;}
else if(typeof define!=='undefined'&&define.amd){define("namespace",[],function(){return namespace;});}
root.namespace=namespace;})();;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace.init("PLY");namespace("PLY.App");(function(ns){window.exports=window.exports||{"__esModule":true};var angular=window["angular"];var _fl;var _f=undefined;var getLocalStorage=function getLocalStorage(){var _getOrCreateStorage=function _getOrCreateStorage(storageName){try{if(window[storageName]!=="undefined"){return window[storageName];}}catch(e){}
var _sS={};return{setItem:function setItem(k,v){_sS[k]=v;},getItem:function getItem(k){return _sS[k];},removeItem:function removeItem(k){delete _ss[k];}};};var _lS=_getOrCreateStorage("localStorage");return function(key,value){try{switch(arguments.length){case 2:if(value===null||value===undefined){_lS.removeItem(key);}else{_lS.setItem(key,value);}
return _lS;case 1:return _lS.getItem(key);case 0:return _lS;default:return;}}catch(e){console.error("Error: Local Storage:",e);}};};var l=getLocalStorage();var extraModules=window.rrVendorType==='core'?[]:["angularTrix"];ns.Module=angular.module('PLYApp',['ngSanitize','ngCookies','ngAnimate','ui.bootstrap'].concat(extraModules));ns.Module.factory('fingerprint',['$q',function($q){_fl=$q.defer();ns.onF=function(){return _fl.promise;};if(_f){console.log('early resolve');_fl.resolve(_f);}
try{if(l('f')&&l('f').length){_f=l('f');_fl.resolve(_f);}else{setTimeout(function(){_fl.resolve(_f);},3000);var d=document['createElement']('script');d['type']='text/javascript';d['async']=true;var s=document['getElementsByTagName']('script')[0];s['parentNode']['insertBefore'](d,s);d.onload=function(){new fd().get(function(r){_f=r;l('f',r);if(_fl&&_fl.resolve){_fl.resolve(_f);}});};d.src='/static/js/lib/fd.min.js';}}catch(e){console.error(e);}
return{request:function request(config,d,e,onFDone){if(/rocketreach.co/i.exec(config.url)||!/^http.?\:/.exec(config.url)){d=$q.defer();e='headers';onFDone=function onFDone(){if(_typeof(config)==="object"){config[e]=config[e]||{};config[e]['X-RR-For']=_f;}
d.resolve(config);};_fl.promise.then(onFDone,onFDone);return d.promise;}
return config;}};}]);ns.Module.factory('path',['$q','$location',function($q,$location){return{request:function request(config,d,e,onFDone){if(/rocketreach.co/i.exec(config.url)||!/^http.?\:/.exec(config.url)){d=$q.defer();e='headers';onFDone=function onFDone(){if(_typeof(config)==="object"){config[e]=config[e]||{};config[e]['X-SOURCE-PAGE']=$location.path();}
d.resolve(config);};_fl.promise.then(onFDone,onFDone);return d.promise;}
return config;}};}]);ns.Module.factory('f01',['$q',function($q){return{responseError:function responseError(rejection){if(rejection&&rejection.data&&rejection.data.error_code===PLY.Errors.ErrorCode.REFRESH_REQUIRED){window.location.reload();}
return $q.reject(rejection);}};}]);Object.defineProperty(ns,"f",{get:function get(){return _f;},set:function set(value){var __f;__f=value;}});ns.Module.factory('ExtensionAudit',[function(){return{response:function response(_response){var _response$headers,_chrome,_chrome$runtime;if(!URLSearchParams)return _response;var params=new URLSearchParams(window.location.href);var extensionId=params.get('extension_id');var apiAuditId=(_response$headers=_response.headers())===null||_response$headers===void 0?void 0:_response$headers['x-api-audit-id'];if(extensionId&&apiAuditId&&(_chrome=chrome)!==null&&_chrome!==void 0&&(_chrome$runtime=_chrome.runtime)!==null&&_chrome$runtime!==void 0&&_chrome$runtime.sendMessage){chrome.runtime.sendMessage(extensionId,{method:'audit',apiAuditId:apiAuditId});}
return _response;}};}]);var mergeInitStoreWithPLYNamespace=function mergeInitStoreWithPLYNamespace(){if(!window.RR_INIT_STORE)return;PLY=_objectSpread(_objectSpread({},PLY),window.RR_INIT_STORE);delete window.RR_INIT_STORE;};mergeInitStoreWithPLYNamespace();ns.Module.config(['$logProvider','$locationProvider','$httpProvider','$animateProvider','$cookiesProvider',function($logProvider,$locationProvider,$httpProvider,$animateProvider,$cookiesProvider){$locationProvider.html5Mode({enabled:true,requireBase:false});$logProvider.debugEnabled(false);$httpProvider.defaults.xsrfHeaderName='X-CSRFToken';$httpProvider.defaults.xsrfCookieName='validation_token';$httpProvider.interceptors.push('fingerprint');$httpProvider.interceptors.push('path');$httpProvider.interceptors.push('f01');$httpProvider.interceptors.push('ExtensionAudit');$cookiesProvider.defaults.secure=true;$cookiesProvider.defaults.samesite="none";$animateProvider.classNameFilter(/^((?!(fa-spin)).)*$/);}]).run(['PLY.Models.AnalyticsModel','PLY.Models.ExperimentationModel','DatadogService','$location','$http','$injector',function(analyticsModel,experimentationModel,DatadogService,$location,$http,$injector){var searchParams=$location.search();if(searchParams.hasOwnProperty('audit_id')){$http.defaults.headers.common['X-AUDIT-ID']=searchParams.audit_id;}
if(!PLY.Utils.settings('pluginMode')&&PLY.Utils.settings('showChat')){var feedbackService=$injector.get('FeedbackService');feedbackService.init({delay:0});setTimeout(function(){feedbackService.showSmilies(feedbackService.getQuestion('search_results'));},1000);}}]);})(PLY.App);;namespace("PLY.Utils");(function(ns){var BSTR_STORE={"11081143":"20200423T234332","16214464":"20200921T215704","75106642":"20210217T235105","128057039":"20191209T225521","180967675":"20191206T193657","184749440":"20200707T224631","207418505":"20201204T222135","229377342":"20210727T193412","241746620":"20210525T214400","253665303":"20190925T023526","314762829":"20200423T044048","334396524":"20210218T051554","337710766":"20200507T173549","360356362":"20210526T211403","367261357":"20210625T153944","368057407":"20200722T022330","402508546":"20210707T141520","406453286":"20191108T182235","406598216":"20191106T213511","425537411":"20200107T220718","429910768":"20210206T055550","439650950":"20210728T225303","449209319":"20210412T180326","491953201":"20210514T034347","518387278":"20191122T175721","567362557":"20201105T061355","572273328":"20190905T043654","578430303":"20200721T215927","598507218":"20210722T191202","601692828":"20191106T213446","609349442":"20200227T013435","609592255":"20201214T154734","630618111":"20210419T234539","639083700":"20210604T132207","640440214":"20200625T073736","642512618":"20210204T184021","662864715":"20200309T223906","674412564":"20201204T203055","710810187":"20200324T042943","728661396":"20210217T033123","742096590":"20200409T225506","767169803":"20210525T214243","785502588":"20191106T213437","795320085":"20201207T213800","840555900":"20210525T214304","860655515":"20210617T205309","888987536":"20210203T145304","909734337":"20210217T034045","918059134":"20210604T144812","921831167":"20200730T235129","925842489":"20201014T224709","943873674":"20200211T063422","958723547":"20210720T030719","968962378":"20200922T222827","1013597066":"20200408T185319","1022069971":"20200909T194155","1024920700":"20201109T204201","1034302591":"20191122T181957","1040500207":"20210412T222420","1045826252":"20200313T063820","1052111513":"20201201T232611","1060402242":"20210114T061459","1072617594":"20200207T081152","1087649325":"20191205T223144","1108136452":"20191121T223011","1108276587":"20210720T175904","1123806117":"20210203T213937","1154522286":"20210720T144635","1161491430":"20200312T040946","1165802476":"20210720T174442","1173458555":"20190821T223640","1175877892":"20210720T033430","1186044139":"20210618T000406","1196987108":"20210519T063745","1217059055":"20200922T221943","1220378435":"20200918T203043","1221059584":"20201119T153742","1225389816":"20191121T213737","1237136776":"20191010T230213","1246879054":"20210720T173637","1263072800":"20201212T011617","1274916557":"20200824T222925","1282512473":"20200110T232510","1296864498":"20200110T005227","1305572076":"20191018T000815","1312210625":"20200930T190411","1314332801":"20210325T145054","1324652824":"20201105T185852","1338031122":"20201204T142610","1368232094":"20200630T155214","1368313882":"20210720T005029","1373483306":"20210207T043112","1380411351":"20210609T214400","1381463981":"20210416T024158","1402525339":"20210727T194336","1417727476":"20190923T185942","1421452319":"20210727T194209","1433729954":"20210222T211444","1441331310":"20210423T000601","1442087852":"20190913T222657","1468284088":"20210617T205508","1468669030":"20201218T043323","1489402251":"20210503T164702","1505225583":"20200306T222956","1525854040":"20210730T060132","1528631063":"20200323T220901","1537123946":"20201106T222300","1579599773":"20210203T150346","1603770593":"20201208T222208","1611568501":"20200930T192842","1612356852":"20201216T031358","1614652207":"20210525T214332","1622090917":"20201216T221617","1629288953":"20201204T015808","1638235361":"20210706T214049","1700670827":"20201001T033219","1713020905":"20200923T030756","1789504480":"20210623T210027","1807432520":"20210422T231840","1826367837":"20200720T052014","1871521488":"20201216T214900","1891581784":"20200211T220726","1916961748":"20200520T212854","1939597660":"20200302T212436","1980831514":"20210217T215438","1984195543":"20200402T003514","1990197417":"20210114T014517","2015058278":"20210217T235328","2049687109":"20210317T000839","2052144244":"20210722T034937","2075452999":"20210628T210607","2086366354":"20200110T224617","2127577351":"20210513T174030","2142894962":"20201105T185329","-1793225968":"20200930T190930","-274043153":"20190822T001534","-619797491":"20200602T003318","-791556271":"20190822T205310","-1279701081":"20210714T233952","-1976458903":"20201105T070909","-1419662200":"20210730T031915","-1359967679":"20210222T183819","-1476766672":"20201216T213242","-489007782":"20210727T194829","-598353155":"20210424T002049","-1862019928":"20210527T231144","-795549258":"20190917T053654","-597271653":"20210513T011551","-1630485312":"20190930T222738","-818275495":"20190925T000845","-2112556968":"20190925T182601","-1834328945":"20210331T035858","-153226335":"20200408T185356","-1786995754":"20190926T174821","-875968817":"20201205T055402","-486636908":"20190930T224215","-1877565521":"20191001T010502","-693950967":"20190927T222401","-1150082496":"20191015T220957","-2104899912":"20191008T003509","-202308951":"20191015T011053","-451561869":"20210707T181634","-1936109741":"20200127T233625","-689004357":"20200116T000216","-1057187141":"20200505T171833","-1129634631":"20191106T213112","-476918348":"20191106T213156","-683949905":"20200331T164334","-1646756611":"20191106T213349","-1417842271":"20210204T185712","-1171585792":"20200522T002555","-424347808":"20210727T194032","-38072573":"20210406T224554","-283859554":"20210722T194354","-1928296189":"20191108T010114","-1813191404":"20191114T053419","-1595021715":"20191108T231041","-213707927":"20191113T011649","-252450678":"20200204T223641","-986416588":"20200824T103822","-1960642390":"20191121T031629","-2118406629":"20200110T005200","-1545247352":"20191209T225849","-1562783600":"20210324T192418","-861316007":"20201216T215421","-733889868":"20210413T211857","-1177087913":"20200413T194502","-637907415":"20210127T213243","-265251785":"20210527T184708","-222334704":"20200206T222841","-1169565333":"20200207T081136","-801636284":"20200211T004518","-1086371163":"20201027T221036","-241887630":"20200408T185743","-377759625":"20200224T235019","-237643695":"20210423T203414","-777332263":"20200227T180110","-1042890342":"20200313T081948","-181790491":"20200325T035014","-1238396021":"20210708T011258","-424443435":"20200429T000330","-1896044771":"20210421T023011","-92066994":"20210513T020130","-302801166":"20201217T023558","-92773213":"20200507T223301","-2052162783":"20200724T025823","-1799765635":"20210720T023201","-1126611378":"20200525T212742","-1482690487":"20210121T224123","-1818962559":"20200630T165418","-1343382453":"20210324T174518","-1239137661":"20200708T162654","-1173413116":"20200912T031550","-1415320585":"20210422T234443","-935073427":"20200824T195937","-935769269":"20200804T235618","-1512164769":"20200729T053123","-1242832034":"20210218T225029","-2095664344":"20210413T135906","-1614590495":"20200902T193247","-701371673":"20210402T195534","-1827595492":"20210302T220432","-1584748008":"20210114T062234","-1414981753":"20201014T221305","-1451861433":"20210427T023103","-1223261303":"20210217T052411","-670825863":"20201218T000609","-1572547414":"20210115T193851","-88041534":"20210106T010538","-932677708":"20210218T012539","-462319950":"20210122T215712","-404760461":"20210203T232704","-1719253785":"20210218T015723","-1642104638":"20210218T225219","-441141008":"20210225T223125","-1149900483":"20210226T022413","-90315535":"20210317T210618","-735483877":"20210331T041721","-964086752":"20210416T151718","-747766963":"20210608T231316","-680682404":"20210524T183849","-321593274":"20210420T233747","-1878648793":"20210714T200829","-101542086":"20210625T154342","-1226059849":"20210720T165948","-744191656":"20210720T174041","-2057588824":"20210728T232913","MANUAL":"20211006T194725"};var stampToDate=function stampToDate(ts){ts=ts.replace(/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2,})/,'$1-$2-$3T$4:$5:$6Z');return Date.parse(ts)||-1;};ns.BSTRv2=function(fileName){};ns.BSTR=function(){var newestStamp=null;var tmpStamp='';Object.keys(BSTR_STORE).forEach(function(key){tmpStamp=BSTR_STORE[key];if(!newestStamp||stampToDate(newestStamp)<stampToDate(tmpStamp)){newestStamp=tmpStamp;}});return newestStamp;}();})(PLY.Utils);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace("PLY.Utils");(function(ns){var _getOrCreateStorage=function _getOrCreateStorage(storageName){try{if(window[storageName]!=="undefined"){return window[storageName];}}catch(e){}
var _sS={};return{setItem:function setItem(k,v){_sS[k]=v;},getItem:function getItem(k){return _sS[k];},removeItem:function removeItem(k){delete _ss[k];}};};var _sS=_getOrCreateStorage("sessionStorage");ns.sessionStorage=function(key,value){try{switch(arguments.length){case 2:if(value===null||value===undefined){_sS.removeItem(key);}else{_sS.setItem(key,value);}
return _sS;case 1:return _sS.getItem(key);case 0:return _sS;default:return;}}catch(e){console.error("Error: Session Storage:",e);}};var _lS=_getOrCreateStorage("localStorage");ns.localStorage=function(key,value){try{switch(arguments.length){case 2:if(value===null||value===undefined){_lS.removeItem(key);}else{_lS.setItem(key,value);}
return _lS;case 1:return _lS.getItem(key);case 0:return _lS;default:return;}}catch(e){console.error("Error: Local Storage:",e);}};ns.detectIE=function(){try{var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}
var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}
var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}}catch(e){}
return false;};var DESKTOP_MEDIA_QUERY_PX=768;ns.isOnDesktop=function(){return window.innerWidth>=DESKTOP_MEDIA_QUERY_PX;};ns.isSafariDesktop=function(){var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return isSafari&&typeof window.orientation==='undefined';};ns.isChromeDesktop=function(){if(window.navigator&&window.navigator.userAgent){return window.navigator.userAgent.match(/Chrome/i)&&typeof window.orientation==='undefined';}
return false;};ns.isEdgeDesktop=function(){if(window.navigator&&window.navigator.userAgent){return window.navigator.userAgent.match(/ Edge?/i)&&typeof window.orientation==='undefined';}
return false;};ns.settings=function(key,value){window.RR_SETTINGS_CONFIG=window.RR_SETTINGS_CONFIG||{};if(typeof value==='undefined'){return window.RR_SETTINGS_CONFIG[key];}else{return window.RR_SETTINGS_CONFIG[key]=value;}};ns.promiseOf=function($q,value){var deferred=$q.defer();deferred.resolve(value);return deferred.promise;};ns.promiseErrorOf=function($q,error){var deferred=$q.defer();deferred.reject(error);return deferred.promise;};var base64toArray=function base64toArray(str){var c,decoded,fragment,i,op,n,table_length,v,il;var table=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-2,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];table_length=table.length;decoded=new Array(((table_length+2)/3|0)*4);c=n=op=0;for(i=0,il=str.length;i<il;++i){v=(str.charCodeAt(i)&0xff)-43;if(v<0||v>=table_length){continue;}
fragment=table[v];if(fragment<0){continue;}
switch(n){case 0:c=(fragment&0x03f)<<2;++n;break;case 1:c|=(fragment&0x030)>>4;decoded[op++]=c;c=(fragment&0x00f)<<4;++n;break;case 2:c|=(fragment&0x03c)>>2;decoded[op++]=c;c=(fragment&0x003)<<6;++n;break;case 3:c|=fragment&0x03f;decoded[op++]=c;n=0;}}
decoded.length=op;return decoded;};ns.rrxor={decode:function decode(text){var key=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'rr';var byteArr=new Zlib.Gunzip(base64toArray(text)).decompress();var result='';byteArr.forEach(function(j,i){result+=String.fromCharCode(j^key.charCodeAt(i%key.length));});return result;},encode:function encode(text){var key=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'rr';}};ns.addQueryParamsToUrl=function(url,params,hash){var url=url;if(params&&Object.keys(params).length>0){url+=url.indexOf('?')===-1?'?':'&';var tmpArr=[];Object.keys(params).forEach(function(key){var val=params[key];if(val!==undefined){tmpArr.push(key+'='+val);}});url+=tmpArr.join('&');}
if(hash){url+='#'+hash;}
return url;};ns.shuffle=function(array){var currentIndex=array.length;var temporaryValue;var randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue;}
return array;};ns.parseQueryString=function(queryString){var queryMap={};if(typeof queryString=='string'){var keyVals=queryString.split('&');keyVals.forEach(function(keyVal){var keyValSplit=keyVal.split('=');queryMap[keyValSplit[0]]=keyValSplit[1];});}
return queryMap;};ns.scrollIntoView=function(elementId){var element=document.getElementById(elementId);if(!element)return;if(element.scrollIntoViewIfNeeded)return element.scrollIntoViewIfNeeded(true);element.scrollIntoView(true);};ns.convertObjectKeys={snakeToCamel:function snakeToCamel(obj,deep){if(!ns.isObject(obj)){return obj;}
var deep=deep||false;var newObj={};Object.keys(obj).forEach(function(attr){newObj[ns.convert.snakeToCamel(attr)]=(deep?ns.convertObjectKeys.snakeToCamel(obj[attr],deep):obj[attr])||null;});return newObj;},camelToSnake:function camelToSnake(obj,deep){if(!ns.isObject(obj)){return obj;}
var deep=deep||false;var newObj={};Object.keys(obj).forEach(function(attr){newObj[ns.convert.camelToSnake(attr)]=(deep?ns.convertObjectKeys.camelToSnake(obj[attr],deep):obj[attr])||null;});return newObj;}};ns.convert={snakeToCamel:function snakeToCamel(str){if(typeof str!=='string'){return str;}
return str.replace(/_([^_]{0,1})/g,function(m,m1){return m1.toUpperCase();});},camelToSnake:function camelToSnake(str){if(typeof str!=='string'){return str;}
return str.replace(/([A-Z0-9])/g,function(m,m1){return'_'+m1.toLowerCase();});}};ns.displayify=function(str){return str.replace(/_/g,' ').split(' ').map(function(str){return str[0].toUpperCase()+str.slice(1);}).join(' ');};ns.isObject=function(x){return(_typeof(x)==="object"||typeof x==='function')&&x!==null&&!Array.isArray(x);};ns.isTouchDevice=function(){var queryParams=new URLSearchParams(window.location.search);if(!!queryParams.get('forceTouchDevice')){return true;}
var prefixes=' -webkit- -moz- -o- -ms- '.split(' ');var mq=function mq(query){return window.matchMedia(query).matches;};if('ontouchstart'in window||window.DocumentTouch&&document instanceof DocumentTouch){return true;}
var query=['(',prefixes.join('touch-enabled),('),'heartz',')'].join('');return mq(query);}();ns.isEncoded=function(uri){uri=uri||'';return uri!==decodeURIComponent(uri);};ns.createLoader=function(scriptURL,async,defer,onload,onerr){var d=document;var l=function l(){if(async==undefined){async=true;}
if(defer==undefined){defer=false;}
var s=d.createElement('script');s.type='text/javascript';s.async=async;s.src=scriptURL;s.defer=defer;s.onload=function(){if(onload){onload();}};s.onerr=function(e){if(onerr){onerr(e);}};var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};l();};ns.generateUUID=function(){var d=new Date().getTime();if(typeof performance!=='undefined'&&typeof performance.now==='function'){d+=performance.now();}
return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:r&0x3|0x8).toString(16);});};ns.escapeHTML=function(text){var p=document.createElement('p');p.textContent=text;return p.innerHTML;};var _humaneSpawn=function _humaneSpawn(type){var humaneInstance=humane.spawn({addnCls:type,timeout:5000,clickToClose:true});return function(){humane.remove();escapeHTML=false;if(arguments[1]){var opts=arguments[1];if(opts.escapeHTML){escapeHTML=true;arguments[0]=ns.escapeHTML(arguments[0]);}}
humaneInstance.apply(humaneInstance,arguments);};};humane.error=_humaneSpawn('humane-flatty-error');humane.info=_humaneSpawn('humane-flatty-info');humane.success=_humaneSpawn('humane-flatty-success');ns.semVersionCompare=function(v1,v2,options){var lexicographical=options&&options.lexicographical||false,zeroExtend=options&&options.zeroExtend||true,v1parts=(v1||"0").split('.'),v2parts=(v2||"0").split('.');var isValidPart=function isValidPart(x){return(lexicographical?/^\d+[A-Za-zαß]*$/:/^\d+[A-Za-zαß]?$/).test(x);};if(!v1parts.every(isValidPart)||!v2parts.every(isValidPart))return NaN;if(zeroExtend){while(v1parts.length<v2parts.length){v1parts.push("0");}
while(v2parts.length<v1parts.length){v2parts.push("0");}}
if(!lexicographical){v1parts=v1parts.map(function(x){var match=/[A-Za-zαß]/.exec(x);return Number(match?x.replace(match[0],"."+x.charCodeAt(match.index)):x);});v2parts=v2parts.map(function(x){var match=/[A-Za-zαß]/.exec(x);return Number(match?x.replace(match[0],"."+x.charCodeAt(match.index)):x);});}
for(var i=0;i<v1parts.length;++i){if(v2parts.length==i)return 1;if(v1parts[i]==v2parts[i]){continue;}else if(v1parts[i]>v2parts[i]){return 1;}else{return-1;}}
if(v1parts.length!=v2parts.length)return-1;return 0;};ns.webdingies=function(){var glyphsQuery=!!window.location.search.replace(/^\?/,'').split('=').filter(function(items){return items==='glyphs';}).length;if(glyphsQuery&&window.WebDingies!==undefined){angular.element(document).ready(function(){new WebDingies({el:'.glyph-frame',speed:'0.0055, 0.0025'});angular.element('.glyphs-container').show();});}};ns.ENV=function(){var _window$location;return((_window$location=window.location)===null||_window$location===void 0?void 0:_window$location.hostname)==='rocketreach.co'?'production':'development';}();var RR_MONITORED_EVENTS_FAILSAFE_SHUTOFF_SWITCH=false;ns.r7m8e5=function(name,count,data){try{if(!window.sessionStorage.getItem("RR2018_disableMonitoredEvents")&&!RR_MONITORED_EVENTS_FAILSAFE_SHUTOFF_SWITCH){count=count||1;var xhr=new XMLHttpRequest();xhr.open("POST","/v1/m8e5");try{xhr.setRequestHeader('X-SOURCE-PAGE',window.location.pathname);xhr.setRequestHeader("X-RR-For",PLY.App.f);}catch(e){}
xhr.onload=function(){if(xhr.status==429){RR_MONITORED_EVENTS_FAILSAFE_SHUTOFF_SWITCH=true;window.sessionStorage.setItem("RR2018_disableMonitoredEvents","true");}};xhr.setRequestHeader("Content-type","application/json");xhr.send(JSON.stringify({"name":name,"count":count,"data":data}));}}catch(e){RR_MONITORED_EVENTS_FAILSAFE_SHUTOFF_SWITCH=true;window.sessionStorage.setItem("RR2018_disableMonitoredEvents","true");}};})(PLY.Utils);;(function(){var serviceName='DatadogService';angular.module('PLYApp').service(serviceName,['PLY.Models.UserModel',function(UserModel){var _window$PLY;return;if(!((_window$PLY=window.PLY)!==null&&_window$PLY!==void 0&&_window$PLY.DatadogConfig))return;var _window$PLY$DatadogCo=window.PLY.DatadogConfig,logs=_window$PLY$DatadogCo.logs,rum=_window$PLY$DatadogCo.rum;if(!logs||!rum)return;var loadLogs=function loadLogs(){(function(h,o,u,n,d){h=h[d]=h[d]||{q:[],onReady:function onReady(c){return h.q.push(c);}};d=o.createElement(u);d.async=1;d.src=n;n=o.getElementsByTagName(u)[0];n.parentNode.insertBefore(d,n);})(window,document,'script','https://www.datadoghq-browser-agent.com/datadog-logs-v4.js','DD_LOGS');DD_LOGS.onReady(function(){return DD_LOGS.init(logs);});};var loadRUM=function loadRUM(){(function(h,o,u,n,d){h=h[d]=h[d]||{q:[],onReady:function onReady(c){return h.q.push(c);}};d=o.createElement(u);d.async=1;d.src=n;n=o.getElementsByTagName(u)[0];n.parentNode.insertBefore(d,n);})(window,document,'script','https://www.datadoghq-browser-agent.com/datadog-rum-v4.js','DD_RUM');DD_RUM.onReady(function(){DD_RUM.init(rum);UserModel.getUserInfo().then(function(user){if(user.isAnonymous())return;var id=user.id,displayName=user.displayName,email=user.email,product=user.product,isPayingUser=user.isPayingUser;DD_RUM.setUser({id:id,email:email,isPayingUser:isPayingUser,name:displayName,product:product===null||product===void 0?void 0:product.id,pretty_product:product===null||product===void 0?void 0:product.displayName});if(!isPayingUser)return;DD_RUM.startSessionReplayRecording();});});};loadLogs();loadRUM();}]);})();;namespace("PLY.Errors");(function(ns){ns.ErrorCode={INTERNAL_ERROR:100,EMAIL_TAKEN:200,VERIFICATION_NEEDED:201,INSUFFICIENT_CREDITS:202,INVALID_EMAIL:203,LOGIN_REQUIRED:204,PHONE_VERIFICATION_REQUIRED:205,PHONE_VERIFICATION_FAILED:206,HAS_PAST_DUE_PAYMENT:207,USAGE_EXCEEDED_QUOTA:208,RATE_LIMITED:209,REFRESH_REQUIRED:210,DECLINED_ERROR:300,CVV_ERROR:301,AVS_ERROR:302,INVALID_PAYMENT_METHOD:303,PAYMENT_CLIENT_INIT_ERROR:304,DUPLICATE_CARD_ERROR:305,VERIFICATION_ERROR:306,THREE_D_SECURE_ERROR:307,PAYMENT_PROCESSOR_UNAVAILABLE:3000};})(PLY.Errors);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace("PLY.Models");(function(ns){var $q,$timeout,$cache,$http;ns.setMockMode=function(flag){this.mockMode=Boolean(flag);};ns.isMockMode=function(){return this.mockMode;};ns.getMockResponse=function(){return{};};ns.mockJAX=function(query){console.log("Mock Web Service called ns:"+this.getNSName()+" with Arguments",JSON.stringify(query));var response=this.getMockResponse(query);var result=$q(function(resolve){resolve(response);});result.success=function(callback){$timeout(callback.bind(null,response,200,{},"OK"),0);return result;};result.error=function(){return result;};return result;};ns.getHTTPCache=function(){return $cache;};ns.declareProtectedAttribute=function(_,key){_[key]=undefined;Object.defineProperty(this,key,{get:function get(){return _[key];},set:function set(){throw key+" cannot be set directly. Use appropriate setter function!";}});};ns.updatePublicAttribute=function(dataFrom,keyInto){var _self=this;if(_typeof(keyInto)==="object"){_self[keyInto.jsName]=dataFrom[keyInto.pyName]||_self[keyInto.jsName];}else{var keyFrom=keyInto;var keyInto=keyFrom.replace(/_[a-z]/g,function(v){return v[1].toUpperCase();});_self[keyInto]=dataFrom[keyFrom]!==undefined&&dataFrom[keyFrom]!==null?dataFrom[keyFrom]:_self[keyInto];}};ns.simulateResponse=function(response){var deferred=$q(function(resolve){$timeout(resolve.bind(deferred,response),0);});deferred.success=function(callback){$timeout(callback.bind(undefined,response,200,{},"OK"),0);return deferred;};deferred.error=function(){return deferred;};return deferred;};ns.simulateError=function(error){var deferred=$q(function(resolve,reject){$timeout(reject.bind(deferred,error),0);});deferred.success=function(callback){return deferred;};deferred.error=function(callback){$timeout(callback.bind(undefined,error,0,{},typeof error==="string"?error:"error"),0);return deferred;};return deferred;};ns.createResponseTransformer=function(responseTransformer){var wrapper=[].concat(angular.isArray($http.defaults.transformResponse)?$http.defaults.transformResponse:[$http.defaults.transformResponse],responseTransformer);return wrapper;};ns.modelFactory=function(q,timeout,$cacheFactory,http){$q=q;$timeout=timeout;$http=http;$cache=$cacheFactory('PLY.Models.Cache');return ns;};ns.PaginatedResponse=function(response,recordTransform){this.records=[];this.numPages=0;this.pagination={next:null,previous:null,currentPage:response.currentPage||null,count:null};if(!response||!response.data){return;}
if(Array.isArray(response.data.records)){if(recordTransform){this.records=response.data.records.map(recordTransform);}else{this.records=response.data.records;}}
if(angular.isNumber(response.data.num_pages)){this.numPages=response.data.num_pages;}
this.pagination={next:response.data.next,previous:response.data.previous,currentPage:response.currentPage||null,count:response.data.count};this.hasNext=function(){return Boolean(this.pagination.next);};this.hasPrev=function(){return Boolean(this.pagination.previous);};this._getPage=function(url,pageNum){return $http({method:'GET',url:url}).then(function(data){data.currentPage=pageNum;return new ns.PaginatedResponse(data,recordTransform);});};this.nextPage=function(){if(this.pagination.next){return this._getPage(this.pagination.next,this.pagination.currentPage+1);}else{throw Error("No more profle lists!");}};this.prevPage=function(){if(this.pagination.previous){return this._getPage(this.pagination.previous,this.pagination.currentPage-1);}else{throw Error("No more profle lists!");}};};PLY.App.Module.factory('PLY.Models',["$q","$timeout","$cacheFactory","$http",ns.modelFactory]);})(PLY.Models);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
namespace('PLY.Models.Analytics').extend(PLY.Models);(function(ns){ns.PLY_GA_KEY='UA-65100102-1';ns.PLY_GTM_KEY='GTM-P9JP9GC';ns.analyticsModelFactory=function(parent,userModel,ExperimentationModel,$log,$timeout,$q,$location,$http){var _suppressDefaultPageView=false;var _suppressAllPageViews=false;var gaReady=$q.defer();var loadGoogleAnalytics=function loadGoogleAnalytics(){var i=window;var r='ga';i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();(function(i,s,o,g,r,a,m){a=s.createElement(o);m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');};var loadGoogleTagManager=function loadGoogleTagManager(){return function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0];var j=d.createElement(s);var dl=l!='dataLayer'?"&l=".concat(l):'';j.async=true;j.src="https://www.googletagmanager.com/gtm.js?id=".concat(i).concat(dl);f.parentNode.insertBefore(j,f);}(window,document,'script','dataLayer',ns.PLY_GTM_KEY);};var sendPageViewWithUserExperiments=function sendPageViewWithUserExperiments(page){ExperimentationModel.getExperiments().then(function(allExperiments){var promiseQueue=[];var fetchExperimentVariantForUser=function fetchExperimentVariantForUser(experiment){var q=$q.defer();ExperimentationModel.getVariant(experiment.id,5000).then(function(variant){q.resolve({experimentId:experiment.id,variant:variant});},function(error){$log.error("Could not get variant for experiment: ".concat(experiment.id||experiment.name||'<unknown>',", error: ").concat(error));$q.reject();});return q.promise;};allExperiments.forEach(function(experiment){if(!experiment.id)return;promiseQueue.push(fetchExperimentVariantForUser(experiment));});$q.all(promiseQueue).then(function(resolvedExperiments){var dimensionData={};resolvedExperiments.forEach(function(experiment){dimensionData[experiment.experimentId]=experiment.variant;});var data={dimension1:JSON.stringify(dimensionData)};if(page)data['page']=page;ga('set',data);ga('send','pageview');});});};var init=function init(){loadGoogleAnalytics();userModel.getUserInfo().then(function(user){try{if(user.id){ga('create',ns.PLY_GA_KEY,'auto',{userId:user.id,'cookieFlags':'SameSite=None; Secure'});}else{ga('create',ns.PLY_GA_KEY,'auto',{'cookieFlags':'SameSite=None; Secure'});}
ga('require','linkid');ga(function(){if(!_suppressDefaultPageView&&!_suppressAllPageViews){sendPageViewWithUserExperiments();}
loadGoogleTagManager();gaReady.resolve();});}catch(e){$log.error("Error while loading GA",e);}});};ns.addDataLayerEvent=function(event){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var dataLayerDeferred=$q.defer();if(!event||typeof event!=='string'){throw"Event name is required and be of type string, given: ".concat(event);}
window.dataLayer=window.dataLayer||[];window.dataLayer.push(_objectSpread(_objectSpread({event:event},data),{},{eventCallback:function eventCallback(e){dataLayerDeferred.resolve();},eventTimeout:1000}));return dataLayerDeferred.promise;};ns.trackEvent=function(eventCategory,eventAction,eventLabel,eventValue){var trackEventDeferred=$q.defer();try{var ec="DEFAULT";if(typeof eventCategory=="string"&&eventCategory.length){ec=eventCategory;}else if(_typeof(eventCategory)=="object"&&eventCategory.name&&eventCategory.name.length){ec=eventCategory.name;}
if(_typeof(eventLabel)=="object"){eventLabel=JSON.stringify(eventLabel);}
ga('send',{hitType:'event',eventCategory:ec,eventAction:eventAction||'',eventLabel:eventLabel||'',eventValue:eventValue||0,transport:'beacon',hitCallback:function hitCallback(){trackEventDeferred.resolve("Event sent: [".concat(eventCategory,":").concat(eventAction,"]"));}});}catch(e){trackEventDeferred.reject(e);$log.error("Error when tracking event",eventCategory,eventAction,eventLabel,e);}
return trackEventDeferred.promise;};ns.trackRREvent=function(args){var extractParameter=function extractParameter(param,required){var value;if(args[param]){if(typeof args[param]==="string"){value=args[param];}else if(_typeof(args[param])==="object"){value=args[param].name;}}
if(value===undefined&&required===true){throw new TypeError("Encountered unexpected event ".concat(param," type."));}
return value;};var category=extractParameter("category",true);var action=extractParameter("action",true);var labels=args.labels;var value=extractParameter("value",false);var data={category:category,action:action};if(labels!==undefined)data.labels=labels;if(value!==undefined)data.value=value;return $http.post("/v1/experiments/events/",data).then(function(response){return response.data;},function(error){console.log(error);});};ns.recordFunnelMetric=function(metric,value,tags){var data={name:metric,value:value};if(tags!==undefined)data.tags=tags;var recordMetricDeferred=$q.defer();var attempts=0;var wait=1000;var request=function request(){attempts++;$http.post("/record_funnel_metric",data).then(function(response){recordMetricDeferred.resolve(response.data);},function(error){if(error.status===429&&attempts<10){wait*=2;$timeout(request,wait);}else{console.log(error);recordMetricDeferred.reject(error);}});};request();return recordMetricDeferred.promise;};ns.trackPageViewByIframe=function(url){(function(){var i=document.createElement('iframe');i.style.display='none';i.style.width=1;i.style.height=1;i.onload=function(){return i.parentNode.removeChild(i);};i.src=url;document.body.appendChild(i);})();};ns.trackPageView=function(url,suppressDefaultPageView,delay){try{if(suppressDefaultPageView!==undefined){ns.suppressDefaultPageView();}
gaReady.promise.then(function(){if(_suppressAllPageViews)return;if(delay)return $timeout(function(){return sendPageViewWithUserExperiments(url);},delay);sendPageViewWithUserExperiments(url);});}catch(e){$log.error("Error when tracking virtual page view",url,e);}};ns.suppressAllPageViews=function(){_suppressAllPageViews=true;};ns.suppressDefaultPageView=function(){_suppressDefaultPageView=true;};init();return ns;};ns.Category={SEARCH_PAGE:{name:'search_page',actions:{SEARCH:'search',SEARCH_BY_REGISTERED_PAYING_USER:'search_by_registered_paying_user',SEARCH_BY_REGISTERED_FREE_USER:'search_by_registered_free_user',SEARCH_BY_ANONYMOUS_USER:'search_by_anonymous_user',SHOW_CONTACT:'show_contact',SHOW_CONTACT_BY_REGISTERED_PAYING_USER:'show_contact_by_registered_paying_user',SHOW_CONTACT_BY_REGISTERED_FREE_USER:'show_contact_by_registered_free_user',SHOW_CONTACT_BY_ANONYMOUS_USER:'show_contact_by_anonymous_user',FOUND_CONTACT:'found_contact',FOUND_CONTACT_RECOVERED:'found_contact_recovered',ADD_CRITERIA:'add_criteria',REMOVE_CRITERIA:'remove_criteria',NEXT_PAGE:'next_page',PREV_PAGE:'prev_page',SIGNUP:'signup',FREE_TRIAL:'free_trial',EXHAUST_CREDITS:'exhaust_credits',EXIT:'exit',KEYWORD_AUTOCOMPLETE:'keyword_autocomplete',VERSION_SWITCH:'verion_switch'}},PRICING:{name:'pricing',actions:{SELECT_PLAN:'select_plan',DOWNGRADE_MESSSAGE:"downgrade_message",DOWNGRADE_ATTEMPT:"downgrade_attempt",DOWNGRADE_ATTEMPT_EXISTING_PAYMENT:"downgrade_using_existing_payment_info",DOWNGRADE_ATTEMPT_SUCCEEDED:"downgrade_succeeded",DOWNGRADE_ATTEMPT_FAILED:"downgrade_failed",UPGRADE_ATTEMPT:"upgrade_attempt",UPGRADE_ATTEMPT_EXISTING_PAYMENT:"upgrade_using_existing_payment_info",UPGRADE_ATTEMPT_SUCCEEDED:"upgrade_succeeded",UPGRADE_ATTEMPT_FAILED:"upgrade_failed",PAYMENT_COMPLETE:"payment_complete",PLAN_SUCCESS:"plan_success",SIGNUP_MODAL:"anonymous_pricing_signup",ERROR_DURING_PAYMENT:"error_during_payment",TOGGLE_MONTHLY_PLAN:"toggle_monthly_plan",TOGGLE_YEARLY_PLAN:"toggle_yearly_plan",STRIPE_FORM:"stripe_form",BRAINTREE_FORM:"braintree_form",SHOW_FAQ_ANSWER:"show_faq_answer"}},SIGNUP:{name:'signup',actions:{SIGNUP_START:'signup_start',SIGNUP_SUCCESS:"signup_success",SIGNUP_ERROR:"signup_error"}},PLUGIN:{name:'plugin',actions:{LOGIN_REQUIRED:'login_required',GET_CONTACT:'get_contact',GET_CONTACTS_BULK:'get_contacts_bulk',GET_CONTACTS_BY_REGISTERED_PAYING_USER:'get_contacts_by_registered_paying_user',GET_CONTACTS_BY_REGISTERED_FREE_USER:'get_contacts_by_registered_free_user',GET_CONTACTS_BY_ANONYMOUS_USER:'get_contacts_by_registered_free_user',VERIFICATION_REQUIRED:'verification_required',FP_EXCEEDED:'fingerprint_usage_exceeded',INSUFFICIENT_CREDITS:'insufficient_credits',INTERNAL_ERROR:'internal_error',SHOWN_EXTENSION_PROMPT:'shown_extension_prompt',SHOWN_EXTENSION_MODAL:'shown_extension_modal',CLICKED_INSTALL_FROM_INTERSTITIAL:'clicked_install_from_interstitial',CLICKED_SKIP_FROM_INTERSTITIAL:'clicked_skip_from_interstitial',CLICKED_INSTALL_FROM_HEADER:'clicked_install_from_header',INSTALL_SUCCESS:'install_success',CLICKED_EXTENSION_PROMPT:'clicked_extension_prompt',INLINE_INSTALL_SUCCESS:'inline_install_success',INLINE_INSTALL_FAILURE:'inline_install_failure',EXTENSION_POPUP:'extension_popup',RESOLVE_LI_INT_URL:'resolve_li_int_url',RESOLVE_LI_SALES_URL:'resolve_li_sales_url',RESOLVE_LI_PUB_URL:'resolve_li_pub_url',RESOLVE_LI_ENC_EXT_URL:'resolve_li_enc_ext_url',RESOLVE_LI_RECRUITER_URL:'resolve_li_recruiter_url'}},CONTACTS:{name:'contacts',actions:{COMPOSE_EMAIL:'compose_email',COMPOSE_EMAIL_SHOW_SPLASH:'compose_email_show_splash',COMPOSE_EMAIL_CLICK_SPLASH:'compose_email_click_splash',CONNECT_GMAIL_ATTEMPT:'connect_gmail_attempt',CONNECT_EMAIL_ATTEMPT:'connect_email_attempt',SEND_EMAIL:'send_email'}},OUTREACH:{name:'outreach',actions:{SHOWN_OUTREACH_PROMPT:'shown_outreach_prompt',CLICKED_OUTREACH_PROMPT:'clicked_extension_prompt'}},LANDING:{name:'landing',actions:{PRIMARY_CTA:'activate_primary_cta',SECONDARY_CTA:'activate_secondary_cta',EXIT:'exit'}},ONBOARDING:{name:'onboarding',actions:{EXIT:'exit'}},TRIAL:{name:'trial',actions:{SHOWN_OFFER:'shown_offer',CLICKED_OFFER:'clicked_offer'}},BILLING:{name:'billing',actions:{UPDATED_PAYMENT_METHOD:'updated_payment_method',RETRIED_PAYMENT_METHOD:'retried_payment_method'}},FEEDBACK:{name:'feedback',actions:{ATTEMPTED_TO_REVIEW:'attempted_to_review',RECIEVED_FEEDBACK:'recieved_feedback',RECIEVED_FEEDBACK_NEGATIVE_REASONS:'recieved_feedback_negative_reasons',RECIEVED_FEEDBACK_COMPANY_SEARCH:'recieved_feedback_company_search',RECIEVED_FEEDBACK_NEGATIVE_REASONS_COMPANY_SEARCH:'recieved_feedback_negative_reasons_company_search'}}};PLY.App.Module.factory('PLY.Models.AnalyticsModel',['PLY.Models','PLY.Models.UserModel','PLY.Models.ExperimentationModel','$log','$timeout','$q','$location','$http',ns.analyticsModelFactory]);})(PLY.Models.Analytics);;namespace("PLY.Models.AnnouncementModel").extend(PLY.Models);(function(ns){ns.modelFactory=function(parent,$http,$q,$cookies,userModel){ns.Announcement=function(data){var _self=this;var _publicAttributes=["id","date","title","description","features","link"];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};function extractAnnouncements(response){var data=response&&response.data;if(Array.isArray(data)){return data.map(function(announcement){return new ns.Announcement(announcement);});}else{return[];}}
ns.getUnread=function(){return userModel.getUserInfo().then(function(user){if(!user.isAnonymous()){return $http({url:"/v1/announcements/unread",method:"GET",cache:ns.getHTTPCache()});}else{return[];}}).then(extractAnnouncements);};ns.getAll=function(){return $http({url:"/v1/announcements/",method:"GET",cache:ns.getHTTPCache()}).then(extractAnnouncements);};ns.getAllNew=function(){var deferred=$q.defer();ns.getAll().then(function(announcments){deferred.resolve(announcments.filter(function(announcement){return!ns.hasCookie(announcement);}));});return deferred.promise;};ns.acknowledge=function(announcement){ns.setCookie(announcement);return $http({url:"/v1/announcements/"+announcement.id+"/",method:"DELETE"});};ns.hasCookie=function(announcement){var cookie="announcment_acknowledgement_"+announcement.id;return $cookies.get(cookie)==="1";};ns.setCookie=function(announcement){var expireDate=new Date();expireDate.setDate(expireDate.getDate()+40);var cookie="announcment_acknowledgement_"+announcement.id;$cookies.put(cookie,"1",{"expires":expireDate});};ns.mostRecentUnread=function(){var deferred=$q.defer();ns.getUnread().then(function(announcements){if(angular.isArray(announcements)&&announcements.length){var mostRecent=announcements[0];for(var i=1;i<announcements.length;i++){ns.acknowledge(announcements[i]);}
deferred.resolve(mostRecent);}else{deferred.resolve(null);}},function(error){deferred.resolve(null);});return deferred.promise;};return ns;};PLY.App.Module.factory('PLY.Models.AnnouncementModel',["PLY.Models","$http","$q","$cookies",'PLY.Models.UserModel',ns.modelFactory]);})(PLY.Models.AnnouncementModel);;require("./departments.model.es6");function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace("PLY.Models.CompanyModel").extend(PLY.Models);(function(ns){ns.companyModelFactory=function(parent,profileModel,DepartmentsModel,$http,$q,$httpParamSerializerJQLike){ns.Company=function(data){var _self=this;var _publicAttributes=["id","name","website_url","email_domain","best_address","street","city","region","postal_code","country_code","founded","funding","revenue","revenue_val","industry","industry_tags","industry_str","company_size","type","phone","fax","description","num_followers","employees","sic_codes","naics_codes","ticker_symbol","links","logo_url","profile_count","total_profiles","format_summary","locale","top_employees","website_rank","website_country_code","website_country_rank","website_category","website_category_rank","website_total_visits","website_search_keywords","similar_websites","info_url","calculated_employee_size"];this.update=function(data){this.departments=this.departments||null;_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);Object.defineProperty(this,'location',{get:function get(){if(!data.region||!data.country_code){return false;}else{var locale=data.region+' '+data.country_code;if(data.city){locale=data.city+', '+locale;}
return locale;}}});Object.defineProperty(this,'locale',{get:function get(){return[this.city,this.region,this.countryCode].filter(function(val){return val&&val.trim()!=='';}).map(function(val){return val.charAt(0).toUpperCase()+val.substr(1);}).join(', ');}});if(Array.isArray(this.formatSummary)){this.formatSummary=this.formatSummary.map(function(format){return new ns.EmailFormat(format);});}
if(Array.isArray(this.topEmployees)){this.topEmployees=this.topEmployees.map(function(profile){return new profileModel.Profile(profile);});}
this.getCompanyExpandedDetails=function(user){var _this=this;var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var deptsDeferred=$q.defer();if(!this.departments){return $http({url:'/v2/companyDepartments/',method:'POST',data:{id:this.id}}).then(function(resp){_this.departments=new DepartmentsModel.Departments(resp.data,user,opts);return _this.departments;})["catch"](function(e){console.log('error getting depts:',e);return null;});}else{deptsDeferred.resolve(this.departments);return deptsDeferred.promise;}};};ns.EmailFormat=function(data){var _self=this;var _publicAttributes=["percentage","description","example"];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getCompanyPartial=function(id,name,captchaToken,nonce,partialName,targetDepartment,tab){return $http({url:'/v2/landing/c/'+id+'/'+name+'/',params:{'g-recaptcha-response':captchaToken,'nonce':nonce,partialName:partialName,targetDepartment:targetDepartment,tab:tab||null},method:"GET"}).then(function(response){var data=response&&response.data;return data;});};ns.getCompany=function(id,name,captchaToken,nonce){return $http({url:"/v2/landing/c/"+id+"/"+name+"/",params:{"g-recaptcha-response":captchaToken,'nonce':nonce},method:"GET"}).then(function(response){var data=response&&response.data;if(data){return new ns.Company(data);}else{return null;}});};ns.getCompanyDetailsById=function(id){var companyDetailsDeferred=$q.defer();if(id===null||id===undefined){companyDetailsDeferred.reject('No company data can be found at this time.');return companyDetailsDeferred.promise;}else{return $http({url:"/v2/companyDetails?id="+id,cache:true,method:"GET"}).then(function(response){return response;});}};ns.getFormattedCompanyData=function(id){var companyDetailsDeferred=$q(function(resolve,reject){ns.getCompanyDetailsById(id).then(function(results){var fields=[['website Url','website_url'],['revenue','revenue'],['employees','employees'],['founded','founded'],['locale',function(data){if(!data.region||!data.country_code){return false;}else{var locale=data.region+' '+data.country_code;if(data.city){locale=data.city+', '+locale;}
if(data.street){locale=data.street+', '+locale;}
return locale;}}],['phone','phone'],['category','website_category'],['Web Visits','website_total_visits'],['keywords','keywords'],['sic','sic_codes'],['Company Page','info_url']];var filteredData=[];fields.forEach(function(keyVal){var key=keyVal[0];var val=keyVal[1];if(typeof val==='function'){val=val(results.data);}else{val=Array.isArray(results.data[val])?results.data[val].join(', '):results.data[val];}
if(val){key=key[0].toUpperCase()+key.substr(1);filteredData.push([key,val]);}});resolve({name:results.data.name,image:results.data.logo_url,fields:filteredData});})["catch"](function(error){if(_typeof(error)==="object"&&error.data&&error.data.detail){error=error.data.detail;}else{error="Could not look up company information at this time.";}
reject(error);});});return companyDetailsDeferred;};ns.getCompanyById=function(id){return $http({url:"/v1/pluginCompany",params:{"id":id},method:"GET"}).then(function(response){var data=response&&response.data;if(data){return new ns.Company(data);}else{return null;}});};ns.adminUpdate=function(profileId,data){return $http.put('/v1/admin/updateCompany/'+profileId,data).then(function(response){if(!response||!response.data||response.status!=200){return false;}
return true;});};return ns;};PLY.App.Module.factory('PLY.Models.CompanyModel',["PLY.Models","PLY.Models.ProfileModel","PLY.Models.DepartmentsModel","$http","$q","$httpParamSerializerJQLike",ns.companyModelFactory]);})(PLY.Models.CompanyModel);;var _departments=require("../resources/departments.es6");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
(function(){namespace("PLY.Models.CompanyGrowthModel").extend(PLY.Models);(function(ns){return PLY.App.Module.factory("PLY.Models.CompanyGrowthModel",[function()
{ns.CompanyGrowth=function(data){this.deptsGrowth={};this._deptsGrowthRaw=data.depts_growth;var TOTAL_OPTION='Total';var PUBLIC_ATTRS=['quarters','has_growth','depts_growth'];this.resolveDeptName=function(deptName){var deptNameToCheck=deptName;if(_departments.DEPT_ALIASES[deptName]){deptNameToCheck=_departments.DEPT_ALIASES[deptName];}
if(this._deptsGrowthRaw[deptName]){deptNameToCheck=Object.keys(this.deptsGrowth)[Object.keys(this._deptsGrowthRaw).indexOf(deptName)];}
if(!deptName){return TOTAL_OPTION;}
return deptNameToCheck;};this.hasGrowthInDept=function(deptName){var GROWTH_ALIASES_FROM_LANDING=_objectSpread(_objectSpread({},_departments.COMPANY_GROWTH_FROM_LANDING_TO_ACTUAL_ALIASES),{},{'Management':TOTAL_OPTION});var deptNameToTarget=GROWTH_ALIASES_FROM_LANDING[deptName]||deptName;return this.deptsGrowth[this.resolveDeptName(deptNameToTarget)];};this.update=function(data){var _this=this;Object.keys(data).forEach(function(attr){if(PUBLIC_ATTRS.indexOf(attr)!==-1){if(attr==='depts_growth'){_this.deptsGrowth={};_this._deptsGrowthRaw=data.depts_growth;Object.keys(data.depts_growth).forEach(function(deptName){_this.deptsGrowth[PLY.Utils.displayify(deptName)]=data.depts_growth[deptName];});}else{_this[PLY.Utils.convert.snakeToCamel(attr)]=data[attr];}}});};this.init=function(data){this.update(data);};this.init(data);};return ns;}]);})(PLY.Models.CompanyGrowthModel);})();;require("../models/companyGrowth.model.es6");require("../services/profilePollingService.es6");function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}
function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter);}
function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}
namespace("PLY.Models.DepartmentsModel").extend(PLY.Models);(function(ns){ns.DepartmentsModelFactory=function($q,$http,ProfileModel,CompanyGrowthModel,ProfilePollingService){var PollingList=new ProfilePollingService.PollingList();ns.Departments=function(data,user){var _this=this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.topEmployees=[];this.lazyFetchFullProfiles=opts.lazyFetchFullProfiles===undefined?true:opts.lazyFetchFullProfiles;this.user=user;this.depts={};this.hasDepts=false;this.activeDept=null;this.activeSubDept=null;this.profileCache={};this.activeDistribution={totals:{},roleTotals:{},seniorityTotals:{},profilePreviews:[]};var coerceProfilesFromIds=function coerceProfilesFromIds(){_this.activeDistribution.profiles=_this.activeDistribution.profilePreviews.map(function(_ref){var id=_ref.id;return _this.profileCache[id];}).filter(function(el){return!!el;});};var getProfiles=function getProfiles(idsArr){return $http({url:'v2/services/search/person',method:'POST',data:{id:idsArr}}).then(function(data){return data.data.people;})["catch"](function(e){console.log(e);return[];});};var grabFirstProfilePreviewFromDept=function grabFirstProfilePreviewFromDept(){var dept=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.activeDept;var firstProfilePreview=null;var subDepts=_this.depts[dept].subDepts;Object.keys(subDepts).forEach(function(subDeptKey){if(!firstProfilePreview&&subDepts[subDeptKey].profiles.length){firstProfilePreview=subDepts[subDeptKey].profiles[0];}});return firstProfilePreview?new ProfileModel.Profile(firstProfilePreview):null;};this.hasSampleProfiles=function(){var dept=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.activeDept;return!!grabFirstProfilePreviewFromDept(dept);};var getProfilePreviewModels=function getProfilePreviewModels(rawProfileData){return rawProfileData.map(function(p){return new ProfileModel.Profile(p);});};var updateActiveDistribution=function updateActiveDistribution(){_this.activeDistribution={totals:{},roleTotals:{},seniorityTotals:{},profilePreviews:[]};if(!_this.activeDept){Object.keys(_this.depts).forEach(function(deptKey){_this.activeDistribution.totals[deptKey]=_this.depts[deptKey].total;});_this.activeDistribution.profilePreviews=_toConsumableArray(_this.topEmployees);}else if(_this.activeDept==='__management__'){_this.activeDistribution.orderedDepts=[];if(_this.topEmployees.length){_this.activeDistribution.profilePreviews.push(_this.topEmployees[0]);_this.activeDistribution.orderedDepts.push('C-Level');}
Object.keys(_this.depts).forEach(function(deptKey){var deptHead=grabFirstProfilePreviewFromDept(deptKey);if(deptHead){_this.activeDistribution.totals[deptKey]=_this.depts[deptKey].total;_this.activeDistribution.profilePreviews.push(deptHead);_this.activeDistribution.orderedDepts.push(deptKey);}});}else{['roleTotals','seniorityTotals'].forEach(function(attr){if(_this.depts[_this.activeDept][attr]){_this.activeDistribution[attr]=_this.depts[_this.activeDept][attr];}});var subDepts=_this.depts[_this.activeDept].subDepts;Object.keys(subDepts).forEach(function(subDeptKey){_this.activeDistribution.totals[subDeptKey]=subDepts[subDeptKey].total;if(_this.activeSubDept){_this.activeDistribution.profilePreviews=getProfilePreviewModels(subDepts[_this.activeSubDept].profiles);}else{_this.activeDistribution.profilePreviews=[].concat(_toConsumableArray(_this.activeDistribution.profilePreviews),_toConsumableArray(getProfilePreviewModels(subDepts[subDeptKey].profiles)));}});};if(_this.lazyFetchFullProfiles){return lazyLoadProfilesForActiveDist();}else{var activeDistributionDeferred=$q.defer();activeDistributionDeferred.resolve(_this.activeDistribution);return activeDistributionDeferred.promise;}};var lazyLoadProfilesForActiveDist=function lazyLoadProfilesForActiveDist(){var profilesToCollect=[];_this.activeDistribution.profilePreviews.forEach(function(_ref2){var id=_ref2.id;if(!_this.profileCache[id]){profilesToCollect.push(id);}});if(!profilesToCollect.length){var activeDistributionDeferred=$q.defer();activeDistributionDeferred.resolve(_this.activeDistribution);coerceProfilesFromIds();return activeDistributionDeferred.promise;}else{return getProfiles(profilesToCollect).then(function(rawProfiles){rawProfiles.forEach(function(rawData){_this.profileCache[rawData.id]=new ProfileModel.Profile(rawData);_this.addToPolling(_this.profileCache[rawData.id]);});coerceProfilesFromIds();return _this.activeDistribution;});}};var reformatDeptKeys=function reformatDeptKeys(depts){var _camelToDisplayName=function _camelToDisplayName(str){return str.replace(/([^A-Z])\s*([A-Z])/g,function(m,m1,m2){return"".concat(m1," ").concat(m2);}).replace('&',' &').trim();};var formattedDepts={};Object.keys(depts).forEach(function(deptName){var currDept=depts[deptName];var formattedDeptName=_camelToDisplayName(deptName);formattedDepts[formattedDeptName]={total:currDept.total,subDepts:{},roleTotals:{},seniorityTotals:{}};['subDepts','roleTotals','seniorityTotals'].forEach(function(key){Object.keys(currDept[key]).forEach(function(name){var formattedName=PLY.Utils.displayify(_camelToDisplayName(name));formattedDepts[formattedDeptName][key][formattedName]=currDept[key][name];});});});return formattedDepts;};this.addToPolling=function(p){if(p.hasPii){PollingList.addProfiles([p]);}};this.update=function(data){var _this2=this;var _PLY$Utils$convertObj=PLY.Utils.convertObjectKeys.snakeToCamel(data,true),topEmployees=_PLY$Utils$convertObj.topEmployees,depts=_PLY$Utils$convertObj.depts;if(topEmployees){this.topEmployees=topEmployees.map(function(profile){var p=new ProfileModel.Profile(profile);_this2.profileCache[p.id]=p;_this2.addToPolling(p);return p;});}
if(depts){this.depts=reformatDeptKeys(depts);this.hasDepts=!!Object.keys(this.depts).length;}
updateActiveDistribution();};this.setActiveDept=function(){var deptName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var subDeptName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.activeDept=deptName;this.activeSubDept=subDeptName;return updateActiveDistribution();};this.init=function(data){this.update(data);ProfilePollingService.registerPollingList(PollingList).startPolling();};this.init(data);};ns.getDepartmentGrowthById=function(id){return $http({url:'v2/companyDepartmentGrowth/',method:'POST',data:{id:id}}).then(function(data){return new CompanyGrowthModel.CompanyGrowth(data.data);});};return ns;};PLY.App.Module.factory('PLY.Models.DepartmentsModel',['$q','$http','PLY.Models.ProfileModel','PLY.Models.CompanyGrowthModel','ProfilePollingService',ns.DepartmentsModelFactory]);})(PLY.Models.DepartmentsModel);;var _this=void 0;namespace('PLY.Models.EnterpriseInquiryModel').extend(PLY.Models);(function(ns){ns.EnterpriseInquiryFactory=function($cookies,$http){ns.EnterpriseInquiry=function(data){var PUBLIC_ATTRS=['first_name','last_name','email','phone','company','team_size','message'];_this.init=function(data){return _this.update(data);};_this.update=function(data){return PUBLIC_ATTRS.forEach(function(att){_this[att.replace(/_([^_]{0,1})/g,function(m,m1){return m1.toUpperCase();})]=data[att]||null;});};_this.init(data);};ns.submitInquiry=function(formData){formData.append('csrfmiddlewaretoken',$cookies.get('validation_token'));return $http({url:'/enterprise/send',headers:{'Content-Type':undefined},data:formData,method:'POST'}).then(function(response){return response.status===202;});};return ns;};PLY.App.Module.factory('PLY.Models.EnterpriseInquiryModel',['$cookies','$http',ns.EnterpriseInquiryFactory]);})(PLY.Models.EnterpriseInquiryModel);;namespace("PLY.Models.ExperimentModel").extend(PLY.Models);(function(ns){ns.experimentModelFactory=function(parent,$http,$httpParamSerializerJQLike){ns.ExperimentSession=function(data){var _self=this;var _publicAttributes=["id","name","variant"];this.update=function(data){_publicAttributes.forEach(parent.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.Experiment=function(data){var _publicAttributes=["id","name","num_variants","variant_options","description"];this.update=function(data){_publicAttributes.forEach(parent.updatePublicAttribute.bind(this,data));};var parseVariantDescFromMainDesc=function parseVariantDescFromMainDesc(){var variantDescPattern=/^\s*(.+?)\s*=\s*(.+?)\s*$/gm;if(!this.description){this.variantDescriptions={};}else{var matches=null;this.variantDescriptions={};while(matches=variantDescPattern.exec(this.description)){matches[1]=matches[1].toUpperCase();this.variantDescriptions[matches[1]]=matches[1]+': '+matches[2];}}};var init=function init(){if(data){this.update.call(this,data);}
parseVariantDescFromMainDesc.call(this);};init.call(this);};ns.getExperimentSessions=function(){return $http({url:"/v1/experiments",method:"GET",cache:ns.getHTTPCache()}).then(function(response){var experiments=response&&response.data;if(Array.isArray(experiments)){var experimentObj={};experiments.forEach(function(experiment){experimentObj[experiment.id]=new ns.ExperimentSession(experiment);});return experimentObj;}else{return{};}});};ns.postExperimentSession=function(id,variant){var data={id:id,variant:variant};return $http({url:"/v1/experiments",method:"POST",data:data});};ns.activeExperiments=function(){return $http({url:"/v1/experiments/active/",method:"GET",timeout:120000,cache:true});};ns.getActiveExperiments=function(){return ns.activeExperiments().then(function(response){return response.data.map(function(data){return new ns.Experiment(data);});});};ns.getTrialStats=function(experimentId,start,end){var argList=[];if(start){argList.push('start='+start);}
if(end){argList.push('end='+end);}
var queryParams='';if(argList.length){queryParams='?'+argList.join('&');}
return $http({url:"/v1/experiments/stats/"+experimentId+"/trials/"+queryParams,method:"GET",timeout:60*5*1000,cache:true});};ns.getStats=function(experimentId){return $http({url:"/v1/experiments/stats/"+experimentId+"/",method:"GET",timeout:60*5*1000,cache:true});};return ns;};PLY.App.Module.factory('PLY.Models.ExperimentModel',["PLY.Models","$http","$httpParamSerializerJQLike",ns.experimentModelFactory]);})(PLY.Models.ExperimentModel);;var experimentationModelFactory=function experimentationModelFactory(parent,experimentModel,$q,$timeout,$location,$log,$cookies){var experimentPromises={};var ORIGINAL_VARIATION_ID=0;var NOT_PARTICIPATING=-2;var dbExperimentsPromise=experimentModel.getExperimentSessions();var TIMEOUT_DELAY_MILLIS=5000;var getStoredVariant=function getStoredVariant(experiment_id){return dbExperimentsPromise.then(function success(dbExperiments){var dbExperiment=dbExperiments[experiment_id];if(dbExperiment!==undefined){storeSelectedVariant(experiment_id,dbExperiment.variant,true);return dbExperiment.variant;}},function failure(error){$log.error('exp error:',error);return undefined;});};var storeSelectedVariant=function storeSelectedVariant(experiment_id,variant,doNotPushToBackend){if(Number.isInteger(variant)){if(!doNotPushToBackend){experimentModel.postExperimentSession(experiment_id,variant);}}};var setVariant=function setVariant(experiment_id,variant){return experimentModel.postExperimentSession(experiment_id,variant);};var forceVariantAndReload=function forceVariantAndReload(experiment,variantIndex,urlToRedirectTo){if(variantIndex!==undefined){storeSelectedVariant(experiment.id,variantIndex);if(urlToRedirectTo){humane.info("Set experiment '"+(experiment.name||experiment.id)+"' variant to: "+getVariantName(variantIndex)+".<br><span class=\"animated-ellipsis\">Going to page: "+urlToRedirectTo+"</span>");if(urlToRedirectTo==='<reload>'){urlToRedirectTo=$location.absUrl();}
$timeout(function(){window.location.href=urlToRedirectTo;},3000);}}};var getVariantName=function getVariantName(id){var lower=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var result='CONTROL';if(id>0){result='ABCDEFGHIJKLMNOPQRSTUVWXYZ'[id-1];}
return lower?result.toLowerCase():result;};var getExperiments=function getExperiments(){return experimentModel.getActiveExperiments();};var loadedExperimentCodePromise=null;var loadGAExperimentation=function loadGAExperimentation(experimentId){if(!loadedExperimentCodePromise){loadedExperimentCodePromise=$q(function(resolve,reject){try{(function(i,s,o,g,r,a,m){a=s.createElement(o);m=s.getElementsByTagName(o)[0];a.async=1;a.src=g+r;a.onload=function(){if(typeof cxApi==='undefined'){var errorMessage="Unable to load experiment code for experimentId=".concat(experimentId);console.error(errorMessage);reject(errorMessage);}else{resolve(cxApi);}};m.parentNode.insertBefore(a,m);})(window,document,'script','//www.google-analytics.com/cx/api.js',"");}catch(e){var errorMessage="Error while loading experimentation for experimentId=".concat(experimentId);console.error(errorMessage);reject(e);}});}
return loadedExperimentCodePromise;};var getVariant=function getVariant(experimentKey){var timeout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:TIMEOUT_DELAY_MILLIS;var experimentDeferred=$q.defer();if(!experimentKey){$log.error("Experiment key ".concat(experimentKey,"is not a valid experiment."));experimentDeferred.resolve(ORIGINAL_VARIATION_ID);return experimentDeferred.promise;}
if(experimentPromises[experimentKey]){return experimentPromises[experimentKey];}
experimentPromises[experimentKey]=experimentDeferred.promise;var resolved=false;var timeoutPromise=$timeout(function(){if(!resolved){experimentDeferred.resolve(ORIGINAL_VARIATION_ID);}},timeout);var experimentId=experimentKey;getStoredVariant(experimentId).then(function(storedVariant){$timeout.cancel(timeoutPromise);if(storedVariant!==undefined){loadGAExperimentation(experimentId).then(function success(experimentAPI){experimentAPI.setChosenVariation(storedVariant,experimentId);});experimentDeferred.resolve(storedVariant);}else{loadGAExperimentation(experimentId).then(function success(experimentAPI){experimentAPI.setChosenVariation(NOT_PARTICIPATING,experimentId);});experimentDeferred.resolve(NOT_PARTICIPATING);}});return experimentDeferred.promise;};return{getVariantName:getVariantName,getVariant:getVariant,setVariant:setVariant,forceVariantAndReload:forceVariantAndReload,getExperiments:getExperiments};};var _module=angular.module('PLYApp');_module.factory('PLY.Models.ExperimentationModel',["PLY.Models","PLY.Models.ExperimentModel","$q","$timeout","$location","$log","$cookies",experimentationModelFactory]);;var _state=_interopRequireDefault(require("../resources/onboarding/state"));require("./integrations.model.es6");require("./orderModel.es6");require("./paymentInfo.es6");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
namespace("PLY.Models.UserModel").extend(PLY.Models);(function(ns){var _currentUser;ns.Roles={Unknown:-1,Other:0,Recruiting:1,Sales:2,Marketing:3};ns.userModelFactory=function(parent,PaymentInfoModel,BrowserExtensionModel,IntegrationsModel,$http,$httpParamSerializerJQLike,$httpParamSerializer,$log,$cookies,$q,$rootScope,$location,$interval){var extensionChecked=false;var ProductModelEssentials={LookupOperationType:{StandardLookup:1,PremiumLookup:2,BulkLookup:3,PhoneLookup:5,PersonEnrich:6,Export:9},OperationTypeDisplay:{1:'Lookup',2:'Premium Lookup',3:'Bulk Lookup',4:'Search',5:'Phone Lookup',6:'Enrich',9:'Export'}};ns.User=function(data){var _this=this;var _self=this;var _={};var _protectedAttributes=["candidateSearches","paymentInfo","latestPaymentInfo","paymentInfoList"];_protectedAttributes.forEach(ns.declareProtectedAttribute.bind(_self,_));Object.defineProperty(_self,"isNormalTeamMember",{get:function get(){return _self.isTeamAccount&&!_self.isTeamAccountOwner&&!_self.isTeamAccountAdmin&&!_self.isTeamAccountManager;}});Object.defineProperty(_self,"displayName",{get:function get(){if(_self.state=="registered"){return(_self.firstName||"")+(_self.lastName?" "+_self.lastName:"");}
return"anonymous";}});Object.defineProperty(_self,"totalProfileCount",{get:function get(){if(_.totalProfileCount==undefined){throw Error("must explicitly call user.refreshProfileCount() first");}
return _.totalProfileCount;}});Object.defineProperty(this,"canSearch",{get:function get(){return _this.isPayingUser||_this.lookupCreditBalance>0||_this.source==500;}});Object.defineProperty(this,'tooManyDevices',{get:function get(){return(_this.concurrentDevices||1)>(_this.concurrentDeviceLimit||Infinity);}});Object.defineProperty(this,'isExportLimited',{get:function get(){return ProductModelEssentials.LookupOperationType.Export in _this.credits;}});Object.defineProperty(this,'exportOrLookupDisplay',{get:function get(){if(_this.isExportLimited){return ProductModelEssentials.OperationTypeDisplay[ProductModelEssentials.LookupOperationType.Export];}else{return ProductModelEssentials.OperationTypeDisplay[ProductModelEssentials.LookupOperationType.StandardLookup];}}});Object.defineProperty(this,'recentlySignedUp',{get:function get(){var daysThresholdSinceRegistration=3;var daysMs=daysThresholdSinceRegistration*86400*1000;return Date.now()-Date.parse(_this.createTime)<=daysMs;}});Object.defineProperty(this,'activeCreditsUsed',{get:function get(){var totalActiveCreditsUsed=0;Object.keys(_this.credits).forEach(function(creditsIssuedType){var creditsIssuedObj=_this.credits[creditsIssuedType];totalActiveCreditsUsed+=creditsIssuedObj.used||0;});return totalActiveCreditsUsed;}});Object.defineProperty(this,'exportOrLookupCredits',{get:function get(){if(_this.credits[ProductModelEssentials.LookupOperationType.Export]){return _this.credits[ProductModelEssentials.LookupOperationType.Export];}else{return{issued:_this.lookupCreditsIssueds,type:'lookup',remaining:_this.lookupCreditBalance,rollover_credits:_this.lookupCreditRolloverBalance,overage_price:_this.effectiveLookupCreditOveragePrice,overages_used:_this.lookupCreditOverage,overages_used_price:_this.lookupCreditOverageAmount,overages_remaining:_this.lookupCreditOverageBalance};}}});var _publicAttributes=[{jsName:"firstName",pyName:"first_name"},{jsName:"lastName",pyName:"last_name"},"email","country_code","id","role","state","lookup_credit_balance","lookup_credit_rollover_balance","rollover_credits_enabled","can_enable_overages","lookup_credit_overage_balance","lookup_credit_overage","lookup_credit_overage_amount","credits","num_free_lookups","default_product","lifetime_credits_spent","lifetime_api_num_calls","domain","api_key_domain","daily_api_num_calls","lookup_credits_issueds","concurrent_devices","concurrent_device_limit","device_limit_logged_out","product","plan_end_date","api_key","source","is_beta_tester","is_super_user","is_verified","is_paid_trial_eligible","is_new_subscriber","claimed_free_credits","trial_time_left","trial_start_time","trial_end_time",'paid_trial_converted_and_handled',"is_subscribed","next_billing_date","has_installed_companion","has_used_outreach","is_companion_offer_eligible","is_outreach_offer_eligible","enable_receipts","is_paying_user","paused_subscription","has_past_due_payment","has_phone_lookups","has_grandfathered_standard_phones","num_seats","is_team_account","is_team_account_owner","is_team_account_admin","is_team_account_manager","team_account_id","team_invites","can_enable_overages","can_incur_overages","has_enabled_overages","override_lookup_credit_overage_price","override_lookup_credit_overage_minimum","effective_lookup_credit_overage_price","product_lookup_credit_overage_price","override_search_credit_overage_price","override_search_credit_overage_minimum","effective_search_credit_overage_price","product_search_credit_overage_price","metered_balance","metered_overage","metered_usage","plugin_settings","is_trusted","filter_eu_profiles","prevent_eu_emailing","email_type_preference","lookup_operation_type_order","salesforce_import_type","integrations","create_time","target_profile","subscribe_time",'is_onboarded','recently_subscribed'];this.setPaymentInfo=function(paymentData){if(paymentData){_.paymentInfo=paymentData;}};this.setLatestPaymentInfo=function(paymentData){if(paymentData){_.latestPaymentInfo=paymentData;}};this.setAllPaymentInfos=function(paymentData){if(paymentData){_.paymentInfoList=paymentData;}};this.shouldOfferTrial=function(){if(this.isCurrentlyOnPaidProduct()){return false;}
if(this.claimedFreeCredits||!this.isPaidTrialEligible){return false;}
if(this.isTeamAccount){return false;}
return true;};_.pendingProfileCountDefrerred=undefined;this.refreshProfileCount=function(){if(!_.totalProfileCount){_.totalProfileCount=0;}
if(!_.pendingProfileCountDefrerred){_.pendingProfileCountDefrerred=$q.defer();$http({method:'GET',url:'/v1/profileList/profiles/count'}).then(function success(response){if(response&&response.data&&response.data.count){_.totalProfileCount=response.data.count;}
_.pendingProfileCountDefrerred.resolve(_.totalProfileCount);_.pendingProfileCountDefrerred=undefined;},function error(e){_.pendingProfileCountDefrerred.resolve(_.totalProfileCount);_.pendingProfileCountDefrerred=undefined;$log.error("Error while retrieving profile count",e);});}
return _.pendingProfileCountDefrerred.promise;};this.pauseSubscription=function(){var monthsToPauseFor=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return $http.post("/v1/services/subscription/pause/",{months:monthsToPauseFor}).then(function(response){return response.data;});};this.canPauseSubscription=function(){if(!_this.isPayingUser)return false;if(_this.isTrialing())return false;if(!!_this.pausedSubscription)return false;if(_this.product.isAnnual)return false;return true;};this.update=function(data){data=data||{};_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));if(data.integrations){_self.integrations=new IntegrationsModel.createIntegrations(data.integrations);}
if(data.product){_self.product=PLY.Utils.convertObjectKeys.snakeToCamel(data.product);_self.productInfo=PLY.Utils.convertObjectKeys.snakeToCamel(data.product);_self.productRawData=data.product;}
if(data.paused_subscription){_self.pausedSubscription=PLY.Utils.convertObjectKeys.snakeToCamel(data.paused_subscription);_self.pausedSubscriptionInfo=PLY.Utils.convertObjectKeys.snakeToCamel(data.paused_subscription);_self.pausedSubscriptionRawData=data.paused_subscription;}
if(_self.targetProfile){_self.targetProfile=PLY.Utils.convertObjectKeys.snakeToCamel(_self.targetProfile);}
for(var _i=0,_arr=['lookupCreditBalance','lookupCreditOverageBalance'];_i<_arr.length;_i++){var attr=_arr[_i];if(_self[attr]==='inf'){_self[attr]=Infinity;}}
for(var operationType in _self.credits){if(_self.credits.hasOwnProperty(operationType)){for(var _i2=0,_arr2=['issued','remaining','overages_remaining'];_i2<_arr2.length;_i2++){var attr=_arr2[_i2];if(_self.credits[operationType][attr]==='inf'){_self.credits[operationType][attr]=Infinity;}}}}};this.startTrial=function(){return $http.post("/v1/startTrial").then(function success(response){_currentUser.update(response.data);});};this.checkTrialConvertedAndNotHandled=function(){var convertedButNotHandled=$q.defer();var status={NOT_TRIAL_CONVERT:-1,CONVERTED_NOT_HANDLED:0,CONVERTED_AND_HANDLED:1};if(this.paidTrialConvertedAndHandled===status.CONVERTED_NOT_HANDLED){return $http.post("/v1/handledTrialConversion").then(function(response){_currentUser.update(response.data);return _currentUser;});}else{convertedButNotHandled.reject('Not needed to handle');}
return convertedButNotHandled.promise;};this.completeOrder=function(orderData){return $http.post("/v1/services/completeOrder",orderData).then(function success(response){_currentUser.update(response.data);});};this.getPaymentInfo=function(force){if(_currentUser.paymentInfo&&!force){return ns.simulateResponse(_currentUser.paymentInfo);}
var params=null;if(this.update_payment_method_token){params={user_id:this.id,update_payment_method_token:this.update_payment_method_token};}
return $http.get("/v1/paymentInfo",{params:params}).then(function success(response){if(response&&response.data){_currentUser.setPaymentInfo(response.data);return response.data;}});};this.getLatestPaymentInfo=function(providerId){if(_currentUser.latestPaymentInfo){return ns.simulateResponse(_currentUser.latestPaymentInfo);}
return PaymentInfoModel.getLatestPaymentInfo(providerId).then(function(paymentInfo){_currentUser.setLatestPaymentInfo(paymentInfo);return paymentInfo;});};this.getAllPaymentInfos=function(){if(_currentUser.allPaymentInfos){return ns.simulateResponse(_currentUser.allPaymentInfos);}
return PaymentInfoModel.getAllPaymentInfos().then(function(paymentInfoList){_currentUser.setAllPaymentInfos(paymentInfoList);return paymentInfoList;});};this.broadcastBalance=function(){$rootScope.$broadcast("rr-credit-balance-updated",_this);};this.deductCredit=function(){var count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(_this.lookupCreditBalance%10===0){_this.refreshLookupCount();}
if(_this.lookupCreditBalance<1){_this.refreshLookupCount();}
var spent=Math.min(count,_this.lookupCreditBalance);if(_this.lookupCreditBalance>0){_this.lookupCreditBalance-=spent;}
if(_this.lookupCreditRolloverBalance>0){_this.lookupCreditRolloverBalance-=spent;}
if(spent<count){var over=count-spent;_this.lookupCreditOverageBalance-=over;_this.lookupCreditOverage+=over;}
_this.broadcastBalance();};this.refundCredit=function(){var count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(_this.lookupCreditOverage>0){var reversed=Math.min(_this.lookupCreditOverage,count);_this.lookupCreditOverage-=reversed;count-=reversed;}
if(count){_this.lookupCreditBalance+=count;}
_this.broadcastBalance();};this.isAnonymous=function(){return _self.state!='registered';};this.shouldBeOnboarded=function(){return['/','/search'].indexOf($location.path())!==-1&&_state["default"].shouldOnboard();};this.isRegistered=function(){return _self.state=='registered';};this.isCurrentlyOnPaidProduct=function(){return _self.product&&_self.product.purchasePrice>0;};this.getExpVariant=function(expId){return $http({url:"/v1/experiments",method:"GET",cache:ns.getHTTPCache()}).then(function(response){var experiments=response&&response.data;var experimentObj={};if(Array.isArray(experiments)){experiments.forEach(function(experiment){experimentObj[experiment.id]=experiment.variant;});}
return experimentObj[expId];});};this.getPostSignupURL=function(next){var browserExtensionOnboarding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!next)next='/';var postSignupURL=next;if(next.startsWith('/browser_extension')){browserExtensionOnboarding=false;}
if(browserExtensionOnboarding==null){browserExtensionOnboarding=false;}
if(browserExtensionOnboarding){var params=$httpParamSerializer({'next':next,'onboarding':true});postSignupURL='/browser_extension?'+params;}
return postSignupURL;};this.refreshLookupCount=function(){return $http.get("/v1/user/balance/").then(function(response){if(response&&response.data){_currentUser.update(response.data);_this.broadcastBalance();}
return response;});};this.canRelookupProfile=function(profile){if(!this.hasPhoneLookups)return false;try{return profile.lookupType===ProductModelEssentials.LookupOperationType.StandardLookup&&profile.status==='complete'&&profile.numTeaserPhones()>0;}catch(e){return false;}};this.deactivate=function(reason){var data={reason:reason};return $http.post('/v1/deactivate/',data);};this.isTrialing=function(){return _this.trialTimeLeft>0;};this.update(data);this.refreshProfileCount();};ns.updatePluginInstallationState=function(browser){var deferred=$q.defer();ns.getExtensionId().then(function(extensionId){try{if(PLY.Utils.isOnDesktop()&&typeof chrome!=="undefined"&&chrome.runtime){var method='version';chrome.runtime.sendMessage(extensionId,{method:method},function(reply){if(reply&&reply.version){_currentUser.hasInstalledCompanion=true;$rootScope.$broadcast('plugin-installed',{browser:browser});$rootScope.$apply();deferred.resolve(true);}else{deferred.resolve(false);}});}else{deferred.resolve(false);}}catch(e){deferred.resolve(false);}});return deferred.promise;};ns.resendVerification=function(){return $http.post("/v1/resendVerification");};ns.regenerateAPIKey=function(){var data={"api_key":_currentUser.apiKey};return $http.post("/api/account/key",data).then(function(response){if(response&&response.data&&response.data.api_key){_currentUser.apiKey=response.data.api_key;}
return _currentUser.apiKey;},function(error){console.log(error);});};ns.saveProfile=function(nameData){if(nameData&&nameData.firstName&&nameData.lastName){return $http.put("/v1/user",{"first_name":nameData.firstName,"last_name":nameData.lastName,"email":nameData.email}).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}});}else{return ns.simulateError("Name Data passed in was corrupt");}};ns.savePassword=function(nameData){if(nameData&&nameData.oldPassword&&nameData.password&&nameData.password==nameData.confirmPassword){return $http.put("/v1/user",{"old_password":nameData.oldPassword,"password":nameData.password}).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}});}else{return ns.simulateError("Name Data passed in was corrupt");}};ns.storeCancellationData=function(type,value){var version=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var data={};if(version)data['version']=version;data[type]=value;return $http.post('/v1/cancellation/reason',data);};ns.claimCancellationCredits=function(){return $http.post('/v1/cancellation/claimCredits');};ns.setUninstallReason=function(reason){return $http.post('/v1/uninstall/reason',{'reason':reason});};ns.setUserValue=function(field,value){var data={};data[field]=value;return $http.put("/v1/user",data).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}
return response;});};ns.setEnableReceipts=function(value){return ns.setUserValue("enable_receipts",value);};ns.setEnableOverages=function(value){return ns.setUserValue("has_enabled_overages",value);};ns.setFilterEUProfiles=function(value){return ns.setUserValue("filter_eu_profiles",value);};ns.setPreventEUEmailing=function(value){return ns.setUserValue("prevent_eu_emailing",value);};ns.setEmailTypePreference=function(value){return ns.setUserValue("email_type_preference",value);};ns.setLookupOperationTypeOrder=function(value){return ns.setUserValue("lookup_operation_type_order",value);};ns.setSalesforceImportType=function(value){return ns.setUserValue("salesforce_import_type",value);};ns.setAutoImport=function(value){return ns.setUserValue("auto_import",value);};ns.saveAPIDomain=function(domain){if(domain&&domain.length){return $http.put("/v1/user",{"api_key_domain":domain}).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}});}else{return ns.simulateError("Name Data passed in was corrupt");}};var _saveCurrentUser=function _saveCurrentUser(response){if(response&&response.data){var data=response.data;if(data&&!data.error){if(!_currentUser){_currentUser=new ns.User(data);if(!_currentUser.hasInstalledCompanion&&!extensionChecked){extensionChecked=true;ns.updatePluginInstallationState();}}else{_currentUser.update(data);}
return _currentUser;}}else{throw new Error('Malformed response from User Web Service');}};ns.getUserInfo=function(flush){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var handleErrorResponse=function handleErrorResponse(errorResponse){return $q.reject((errorResponse.data||{}).detail||"Unable to connect to RocketReach. Please try again.");};if(_currentUser&&!flush){return ns.simulateResponse(_currentUser);}else{return $http({url:'/v1/user',params:params,method:'GET',cache:flush?undefined:ns.getHTTPCache()}).then(_saveCurrentUser,handleErrorResponse);}};ns.getExtensionId=function(){var deferred=$q.defer();BrowserExtensionModel.getBrowserExtensionProperties().then(function(response){if(response&&response.data&&response.data.extension){var extensionId=response.data.extension.extension_id;return deferred.resolve(extensionId);}
return deferred.reject();});return deferred.promise;};ns.signupUser=function(userData,forcePhone,sourcePage){userData.csrfmiddlewaretoken=$cookies.get('validation_token');if(sourcePage)userData['sourcePage']=sourcePage;userData.force_phone=Boolean(forcePhone);return $http({url:'/v1/signup',headers:{'Content-Type':'application/x-www-form-urlencoded'},data:$httpParamSerializerJQLike(userData),method:'POST'}).then(_saveCurrentUser);};ns.isUniqueEmail=function(email,domainOnly){return $http({url:"/v1/validateEmail",params:{"email_address":email,"check_domain_only":domainOnly},method:'GET'});};var refreshLookupCounterSeconds=3600;$interval(function(){return _currentUser&&_currentUser.refreshLookupCount();},refreshLookupCounterSeconds*1000);$rootScope.$on('rr-deduct-lookup-credits',function(ev,count){return _currentUser&&_currentUser.deductCredit(count);});$rootScope.$on('rr-refund-lookup-credits',function(ev,count){return _currentUser&&_currentUser.refundCredit(count);});return ns;};PLY.App.Module.factory('PLY.Models.UserModel',["PLY.Models","PLY.Models.PaymentInfoModel",'PLY.Models.BrowserExtensionModel','PLY.Models.IntegrationsModel',"$http","$httpParamSerializerJQLike","$httpParamSerializer","$log","$cookies","$q","$rootScope","$location","$interval",ns.userModelFactory]);})(PLY.Models.UserModel);;namespace('PLY.Models.FaqModel').extend(PLY.Models);(function(ns){ns.faqModelFactory=function(parent,$sce,productModel,analyticsModel){return function(faqName,ctx){var categoryPricing=analyticsModel.Category.PRICING;var showingAnswerForQuestion={};var self={};var pairsDic={'pricing':function pricing(ctx){var _ctx$user;var freeLookupsWording=ctx!==null&&ctx!==void 0&&(_ctx$user=ctx.user)!==null&&_ctx$user!==void 0&&_ctx$user.numFreeLookups?"".concat(ctx.user.numFreeLookups," free lookups per month"):'some free lookups';return[{question:'Is RocketReach Free?',answer:"\n                It is free to create a RocketReach account.\n                Free accounts have access to ".concat(freeLookupsWording," with no credit card required.\n                You can then upgrade your account at any time to billing that is either monthly or annual.\n                Once you are signed up, feel free to upgrade, downgrade, or cancel anytime.\n              ")},{question:'What if I want to pay from my bank account?',answer:'Use PayPal to pay from your bank account. We accept most bank credit and debit cards.'},{question:'Do you have larger plans? How do I get RocketReach for my team?',answer:'We can support plans and teams of any size. You can create a team from your <a href="https://rocketreach.co/account?section=nav_gen_team" target="_blank"> account page</a>. Please <a href="/enterprise" target="_blank">contact us</a> if you have further questions.'},{question:'Why is my credit card being declined?',answer:$sce.trustAsHtml('The most common reason is your bank needs you to approve the transaction, so contact them. '+'If declines persist, try the PayPal option. Please <a href="javascript:PLY.Services.ZopimService.showZopim();">chat with us</a> '+'or email <a href="mailto:support@rocketreach.co">support@rocketreach.co</a> for further assistance.')},{question:'What happens if a lookup doesn\'t return verified email or phone?',answer:'A lookup is used if we find and verify email or phone, otherwise it is refunded.'},{question:'Can I cancel my subscription when I want? Will I keep my lookups if I cancel?',answer:'Yes, you can cancel anytime through your accounts page. Since you prepay for a year or month, cancellation takes effect the following term. You retain access to your plan features for the full 1 year or 1 month term.'},{question:'What happens if I run out of lookups?',answer:$sce.trustAsHtml('You can exceed your plan allocated lookups if \'Additional Lookups\' are enabled in your account settings.  Additional Lookups are billed to your account at the end of the month and depending on your your plan, range from <b>$'+productModel.AdditionalLookupCost.Standard.toFixed(2)+' to $'+productModel.AdditionalLookupCost.Premium.toFixed(2)+' / lookup</b>.  Please email us at <a href="mailto:support@rocketreach.co">support@rocketreach.co</a> for more information.')},{question:'What if I just want professional or personal emails?',answer:$sce.trustAsHtml('You can select to lookup only personal or only professional emails by updating your <a target="_blank" href="https://rocketreach.co/account?section=nav_gen_other">email type preferences</a>. '+'Once you make that selection, you will never see emails of the filtered type.')}];},'trial_selection':function trial_selection(ctx){return[{question:"What happens if the lookup doesn't return verified information?",answer:"Lookups are automatically refunded if no verified information can be found. We try to make refunds work as seamlessly as possible, but it can sometimes take up to 1 hour before the refunded credit is available."},{question:'Can I change or cancel my plan?',answer:"Yes, you can change your plan and billing cycle as long as your trial is active. Visit your <a href=\"/account\" target=\"_blank\">account page</a> after checkout to modify your plan. "},{question:'Can my colleagues use my RocketReach account?',answer:"<a href=\"https://rocketreach.co/account?section=nav_gen_team\" target=\"_blank\">RocketReach teams</a> are the easiest and most secure way to share RocketReach with your colleagues."},{question:'What is your refund policy?',answer:"Our refund policy is available <a href=\"/refunds\" target=\"_blank\">here</a>."},{question:'How many lookups does a trial include?',answer:"All plans have 50 lookups during the trial period."},{question:'Can I trial Phone Plans?',answer:'Yes, phone plan trials include 50 Phone lookups.'}];},'trial_checkout':function trial_checkout(ctx){return[{question:'Will I be charged for my free trial?',answer:"No, you won't be charged for you free trial, which begins ".concat(ctx.trialStartDate," and ends on ").concat(ctx.trialEndDate,". You can cancel anytime before ").concat(ctx.trialEndDate," to avoid being charged.")},{question:'How can I cancel my free trial?',answer:"Visit your <a href=\"/account\" target=\"_blank\">account page</a> after checkout to modify your subscription."},{question:'What happens after the free trial period?',answer:"The remainder of your first month's credits will be unlocked and you can continue using RocketReach with no interruptions."}];},'rollover_faq':function rollover_faq(ctx){return[{question:'1. How do rollover lookups work?',answer:"Rollover lookups allow you to accumulate up to 12 months\u2019 worth of unused lookups for you to use at any time your subscription remains current and on an eligible plan."},{question:'2. Which plans support rollover lookups?',answer:"Rollover lookups are supported for Essentials, Pro and Ultimate monthly premium and standard plans. Annual plans or plans not specified here are not supported."},{question:'3. I recently reinstated my subscription after letting it lapse. Do I get access to my previous subscription’s unused lookups?',answer:"Your current subscription will accumulate rollover lookups only for the period since your last renewal. Lookups from your previous subscription(s) have expired and cannot be reinstated."},{question:'4. Can I roll over annual lookups?',answer:"Only monthly plans support rollover lookups. Annual plans allocate all lookups at the start of the subscription and must be used during the subscription period."},{question:'5. In what order are lookups consumed?',answer:"Lookups are used in a first-in, first-out order so those issued at the beginning of your subscription will be consumed first. Any unused lookups older than 12 months will expire permanently."},{question:'6. What happens to my lookups if I cancel my subscription?',answer:"You will have access to your current and rollover lookups until the end of your subscription. After this point, you will no longer be able to use your rollover lookups, even if you subscribe again in the future."},{question:'7. What happens if I change my subscription level?',answer:"You will still be able to use your rollover lookups so long as you remain on a monthly Essentials, Pro or Ultimate plan. Any other plan may render you ineligible for rollover lookups."},{question:'8. Do my lookups ever expire?',answer:"Rollover lookups expire after 12 months."},{question:'9. What happens if I pause my subscription?',answer:"During the time your subscription is paused, you cannot access rollover credits and you will not be accumulating any additional lookups, while any lookups older than 12 months will expire. Once you resume your subscription, you will have access to your rollover lookups again."},{question:'10. How can I see how many rollover lookups I have?',answer:"Log into RocketReach and hover over the yellow disc in the upper right hand corner of your screen. You will be able to see your current month\u2019s lookups and your accumulated rollover lookups."},{question:'11. What if I have other questions?',answer:"Contact us at support@rocketreach.co and we\u2019ll be happy to help!"}];}};self.faqPairs=pairsDic[faqName]?pairsDic[faqName](ctx):pairsDic['pricing'](ctx);self.toggleShowingAnswerForQuestion=function(question){showingAnswerForQuestion[question]=!showingAnswerForQuestion[question];if(showingAnswerForQuestion[question]){analyticsModel.trackEvent(categoryPricing,categoryPricing.actions.SHOW_FAQ_ANSWER,question);}};self.questionExpanded=function(question){return!!showingAnswerForQuestion[question];};return self;};};PLY.App.Module.factory('PLY.Models.FaqModel',['PLY.Models','$sce','PLY.Models.ProductModel','PLY.Models.AnalyticsModel',ns.faqModelFactory]);})(PLY.Models.FaqModel);;namespace("PLY.Models.OrderModel").extend(PLY.Models);(function(ns){ns.orderModelFactory=function(parent,$http,ProductModel){ns.DEFAULT_PROVIDER_ID=2000;ns.PaymentProviders={1000:'Stripe',2000:'Braintree'};ns.PaymentMethodTypes={CreditCard:1,ACH:2,PayPal:3,AliPay:4,ThreeDSecure:5};ns.PaymentMethod=function(data){var _this=this;this.Providers=ns.PaymentProviders;this.Types=ns.PaymentMethodTypes;var _publicAttributes=['id','name','provider_id','type'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_this,data));};this.update(data);Object.defineProperty(this,'providerName',{get:function get(){return _this.Providers[_this.providerId]||_this.Providers[ns.DEFAULT_PROVIDER_ID];}});};ns.Order=function(data){var _this2=this;var _publicAttributes=['id','product_id','product','provider_id','payment_methods','trial_period_days','purchase_price','discount','billing_cycle'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_this2,data));if(data.product){_this2.product=new ProductModel.Product(data.product);}
var paymentMethods=[];if(_this2.paymentMethods){_this2.paymentMethods.forEach(function(paymentMethod){paymentMethods.push(new ns.PaymentMethod(paymentMethod));});}
_this2.paymentMethods=paymentMethods;};this.update(data);Object.defineProperty(this,'isTrial',{get:function get(){return _this2.trialPeriodDays&&_this2.trialPeriodDays>0;}});Object.defineProperty(this,'totalPrice',{get:function get(){return _this2.purchasePrice-_this2.discount;}});Object.defineProperty(this,'enable3ds',{get:function get(){return _this2.paymentMethods.some(function(paymentMethod){return paymentMethod.type===ns.PaymentMethodTypes.ThreeDSecure;});}});Object.defineProperty(this,'allowAlipay',{get:function get(){return _this2.paymentMethods.some(function(paymentMethod){return paymentMethod.type===ns.PaymentMethodTypes.AliPay;});}});Object.defineProperty(this,'allowPaypal',{get:function get(){return _this2.paymentMethods.some(function(paymentMethod){return paymentMethod.type===ns.PaymentMethodTypes.PayPal;});}});};ns.createOrder=function(productId,providerId,trial){var data={productId:productId,providerId:providerId};if(trial){data.trial=trial;}
return $http.post('/v1/services/createOrder',data).then(function(response){return new ns.Order(response.data);});};ns.pendingOrder=function(){return $http.get('/v1/services/orders/').then(function(response){return new ns.Order(response.data);},function(response){return null;});};ns.updatePurchaseOrder=function(orderId,data){return $http({method:"PUT",url:"v1/services/purchaseOrder/"+orderId+"/update",data:data}).then(function(response){var o;if(response&&response.data){o=new ns.Order(response.data);}
return o;});};ns.purchaseOrderInvoiceDraft=function(orderId){return $http({method:"GET",url:"v1/services/purchaseOrder/"+orderId+"/invoiceDraft"}).then(function(response){return response&&response.data;});};ns.purchaseOrderACHTransfer=function(orderId,orderToken){var url="v1/services/purchaseOrder/"+orderId+"/achTransfer";if(orderToken){url+='/'+orderToken;}
return $http({method:"GET",url:url}).then(function(response){return response&&response.data;});};return ns;};PLY.App.Module.factory('PLY.Models.OrderModel',["PLY.Models","$http","PLY.Models.ProductModel",ns.orderModelFactory]);})(PLY.Models.OrderModel);;namespace("PLY.Models.OauthModel").extend(PLY.Models);(function(ns){ns.oauthModelFactory=function(parent,$http,$httpParamSerializerJQLike,$httpParamSerializer){ns.OauthAssociation=function(data){var _self=this;var _publicAttributes=["uid","provider","extra_data"];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getAssociations=function(providers,extraData){var url="/v1/oauth?";var params={};if(providers){params.providers=providers.join(',');}
if(extraData){params.extra_data=extraData.join(',');}
url+=$httpParamSerializer(params);return $http({url:url,method:"GET",cache:ns.getHTTPCache()}).then(function(response){var data=response&&response.data;if(Array.isArray(data.associations)){return data.associations.map(function(association){return new ns.OauthAssociation(association);});}else{return[];}});};ns.getEmailAssociations=function(){return ns.getAssociations(['gmail'],['email','fullname']);};ns.disconnect=function(provider,uid,password,token){var data={};data.uid=uid;data.provider=provider;data.password=password;data.csrfmiddlewaretoken=token;return $http({url:"/v1/oauth",headers:{'Content-Type':'application/x-www-form-urlencoded'},data:$httpParamSerializerJQLike(data),method:"DELETE"});};return ns;};PLY.App.Module.factory('PLY.Models.OauthModel',["PLY.Models","$http","$httpParamSerializerJQLike","$httpParamSerializer",ns.oauthModelFactory]);})(PLY.Models.OauthModel);;namespace("PLY.Models.ProfileModel").extend(PLY.Models);(function(ns){ns.profileModelFactory=function(parent,$http,$log,$q,$timeout){ns.ContactType=Object.freeze({"invalidPhone":-3,"faxPhone":-2,"generalPhone":-1,"mobilePhone":1,"officePhone":2,"verifiedEmail":3,"unverifiedEmail":4,"pastEmail":5,"invalidEmail":6});ns.ContactFeedback=Object.freeze({"negative":0,"positive":1});ns.ContactMethod=function(type,contactObj,score,additionalMetaData){var self=this;self.type=type;self.typeStr=contactObj.type;self.score=score||0;self.recommended=contactObj.recommended;self.source=contactObj.source;self.isRecovery=contactObj.is_recovery;self.summary=contactObj.summary;self.validity=contactObj.validity;self.isPhone=function(){return self.isGeneralPhone()||self.isOfficePhone()||self.isMobilePhone()||self.isFaxPhone()||self.isInvalidPhone();};self.isIndividualPhone=function(){return self.isGeneralPhone()||self.isMobilePhone();};self.isGeneralPhone=function(){return self.type===ns.ContactType.generalPhone;};self.isMobilePhone=function(){return self.type===ns.ContactType.mobilePhone;};self.isFaxPhone=function(){return self.type===ns.ContactType.faxPhone;};self.isOfficePhone=function(){return self.type===ns.ContactType.officePhone;};self.isInvalidPhone=function(){return self.type===ns.ContactType.invalidPhone;};if(self.isPhone()){self.isPremium=contactObj.is_premium||false;}
self.key=self.isPhone()?contactObj.key:contactObj.email;self.display=self.isPhone()?contactObj.number:contactObj.email;self.emailInfo={feedback:contactObj.feedback,email:self.key};self.contactInfo={feedback:contactObj.feedback,value:self.key};self.isEmail=function(){return self.isVerified()||self.isUnverified()||self.isOld()||self.isInvalid();};self.isVerified=function(){return self.type===ns.ContactType.verifiedEmail;};self.isUnverified=function(){return self.type===ns.ContactType.unverifiedEmail;};self.isOld=function(){return self.type===ns.ContactType.pastEmail;};self.isInvalid=function(){return self.type===ns.ContactType.invalidEmail;};self.contactClass=function(){switch(type){case ns.ContactType.generalPhone:return"Phone";case ns.ContactType.mobilePhone:return"Mobile Phone";case ns.ContactType.officePhone:return"Office Phone";case ns.ContactType.invalidPhone:return"Invalid Phone";case ns.ContactType.verifiedEmail:return"Verified Email";case ns.ContactType.unverifiedEmail:return"Possible Email";case ns.ContactType.pastEmail:return"Past Email";case ns.ContactType.invalidEmail:return"Invalid Email";default:return"Unknown";}};self.getHref=function(){switch(type){case ns.ContactType.generalPhone:case ns.ContactType.mobilePhone:case ns.ContactType.officePhone:case ns.ContactType.invalidPhone:return"tel:"+self.key;default:return"mailto:"+self.key;}};self.href=self.getHref();self.getAsyncValidationTimeEstimate=function(){var ETA_MINUTES=20;if(self.asyncValidatingTime){var timeLeft=ETA_MINUTES*60*1000+new Date(self.asyncValidatingTime).getTime()-new Date().getTime();if(timeLeft>0){return new Date(new Date().getTime()+timeLeft).toUTCString();}else{return false;}}else{return false;}};self.retractFeedback=function(profile,type){return self.sendFeedback(profile,type,true);};self.sendFeedback=function(profile,type,retract){if(retract===undefined){retract=false;}
var url="/v2/profiles/"+profile.id+"/feedback/";var data={"feedback":type,"retract":retract};data[self.isPhone()?'phone':'email']=self.contactInfo.value;return $http({url:url,method:"PUT",data:data}).then(function(response){self.contactInfo={feedback:response.data.feedback,value:response.data.phone||response.data.email};return self.contactInfo;});};if(self.isPhone()){self.display=self.display.replace(/^(1|)?(\d{3})(\d{3})(\d{4})$/,function(m,m1,m2,m3,m4){var intlCode=m1?'+1 ':'';return[intlCode,m2,'-',m3,'-',m4].join('');});}
if(additionalMetaData){Object.keys(additionalMetaData).forEach(function(key){self[key]=additionalMetaData[key];});}};ns.PredictionStatus={RapportiveVerified:-4,FoundPhone:-3,FoundScraped:-2,SMTPVerified:-1,NoResponse:0,NotScraped:1,NoCurrentCompany:2,NoEmailDomain:3,NotSMTPValidatable:4,NoValidEmailFound:5,UnknownError:6};ns.Profile=function(data){var _self=this;var _={};var _protectedAttributes=["emails","phones","officePhones"];_protectedAttributes.forEach(ns.declareProtectedAttribute.bind(_self,_));this.LookupStatusType={NotStarted:0,FindingEmails:1,FindingPhones:2,VerifyingEmails:3,VerifyingPhones:4,Classifying:5};var _publicAttributes=["id","company_id","company_url","name","first_name","last_name","url","linkedin_url","facebook_url","twitter_url","profile_pic","search_url","lookup_url","current_title","current_employer","last_job_change","flags","create_time","update_time","links","years_experience","location","city","postal_code","region","country_code","summary","snippet","headline","is_currently_unemployed","jobs","education","profile","has_pii","last_predict_time","prediction_status","status","lookup_status_stage","progress","is_recoverable","recovery_status","recovery_progress","lookup_charge_type","lookup_type","credit_spent","teaser","meta_tags","email_events_count","demo","is_premium_data_available","profile_list","is_exported","last_integration_sync_time","integration_sync_status","no_upsell","is_synthesized","is_verified"];this.update=function(data){data=data||{};if(data.emails||data.phones){_["emails"]=data.emails||[];_["phones"]=data.phones||[];_["officePhones"]=data.office_phones||[];}
if(data.email_events_count){_.outReach={counter:data.email_events_count,activity:[]};for(var i=0;i<data.email_events_count;i++){_.outReach.activity.push("");}}
_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));_self.isPredictionStatusRapportiveVerified=function(){return _self.predictionStatus===ns.PredictionStatus.RapportiveVerified;};_self.isPredictionStatusFoundPhone=function(){return _self.predictionStatus===ns.PredictionStatus.FoundPhone;};_self.isPredictionStatusFoundScraped=function(){return _self.predictionStatus===ns.PredictionStatus.FoundScraped;};_self.isPredictionStatusSMTPVerified=function(){return _self.predictionStatus===ns.PredictionStatus.SMTPVerified;};_self.isPredictionStatusNoResponse=function(){return _self.predictionStatus===ns.PredictionStatus.NoResponse;};_self.isPredictionStatusNotScraped=function(){return _self.predictionStatus===ns.PredictionStatus.NotScraped;};_self.isPredictionStatusNoCurrentCompany=function(){return _self.predictionStatus===ns.PredictionStatus.NoCurrentCompany;};_self.isPredictionStatusNoEmailDomain=function(){return _self.predictionStatus===ns.PredictionStatus.NoEmailDomain;};_self.isPredictionStatusNotSMTPValidatable=function(){return _self.predictionStatus===ns.PredictionStatus.NotSMTPValidatable;};_self.isPredictionStatusNoValidEmailFound=function(){return _self.predictionStatus===ns.PredictionStatus.NoValidEmailFound;};_self.isPredictionStatusUnknownError=function(){return _self.predictionStatus===ns.PredictionStatus.UnknownError;};_self.profilePic=_self.profilePic||'//static.rocketreach.co/images/default_thumb.png';if(_self.profilePic.indexOf("http://")!=-1){_self.profilePic="//"+_self.profilePic.substr(_self.profilePic.indexOf("://")+3);}
if(_self.links){_self.links.twitterHandle=_self.links.Twitter?'@'+/[^\/]*$/.exec(_self.links.Twitter):undefined;for(var key in _self.links){if(key.toLowerCase()==="twitterhandle"){delete _self.links[key];}}}
if(_self.lastJobChange){var MONTHS_RECENT_THRESHOLD=9;var jobChangedMonthsAgo=(new Date().getTime()-new Date(_self.lastJobChange).getTime())/(1000*3600*24*30);_self.recentJobChange=jobChangedMonthsAgo<=MONTHS_RECENT_THRESHOLD;}
_self.numEmails=0;_self.numVerifiedEmails=0;_self.numVerifiedProfessionalEmails=0;_self.numVerifiedPersonalEmails=0;_self.numUnverifiedEmails=0;_self.numPastEmails=0;_self.numInvalidEmails=0;if(_.emails){_.emails.forEach(function(e){_self.numEmails++;if(e.validity==='valid'){_self.numVerifiedEmails++;if(e.type==='professional'){_self.numVerifiedProfessionalEmails++;}else if(e.type==='personal'){_self.numVerifiedPersonalEmails++;}}else if(e.validity==='accept_all'||e.validity==='unknown'){_self.numUnverifiedEmails++;}else if(e.last_valid){_self.numPastEmails++;}else if(e.validity==='invalid'){_self.numInvalidEmails++;}});}};this.hasContactInfo=function(){return Boolean(this.numVerifiedEmails);};this.profileLookupTrulyDone=function(user){if(this.status==='complete'){if(user&&user.integrations.manualSyncAvailable()){return false;}
if(this.creditSpent!==undefined&&this.creditSpent!==true){return false;}
if(PLY.Utils.ENV==='development'&&(!PLY.Utils.localStorage('disableAdminControls')||PLY.Utils.localStorage('disableAdminControls')==='false')){return false;}
return!(this.isRecoverable&&!this.hasContactInfo());}else{return false;}};this.hasPotentialNumbers=function(nonPremiumOnly){return nonPremiumOnly?!!this.numTeaserStandardPhones():!!this.numTeaserPhones()||this.teaser&&this.teaser.is_premium_phone_available;};this.hasPotentialPremiumNumbers=function(){return!!this.numTeaserPremiumPhones()||this.teaser.is_premium_phone_available;};this.numTeaserPhones=function(){return this.teaser?this.teaser.phones.length:0;};this.getTeaserPremiumPhones=function(){return this.teaser.phones.filter(function(phoneObj){return phoneObj.is_premium;});};this.numTeaserPremiumPhones=function(){return this.getTeaserPremiumPhones().length;};this.getTeaserStandardPhones=function(){return this.teaser.phones.filter(function(phoneObj){return!phoneObj.is_premium;});};this.numTeaserStandardPhones=function(){return this.getTeaserStandardPhones().length;};this.getTeaserNumbersPrefixText=function(onStandardPlan,hasGrandfatheredStandardPhones){var resultText='';var shouldHaveColon=true;if(onStandardPlan===true){if(hasGrandfatheredStandardPhones){var nonPremiumCount=this.numTeaserStandardPhones();if(nonPremiumCount){resultText='Found '+nonPremiumCount+' phone'+(nonPremiumCount>1?'s':'');}else if(!!this.hasPotentialNumbers()){resultText=!!this.numTeaserPhones()?'Found phones':'Search';}}else{resultText=!!this.numTeaserPhones()?'Found phones':'Search';}}else{if(!this.hasPotentialNumbers()){resultText='Search For numbers now';}else if(this.numTeaserPhones()===0&&this.teaser.is_premium_phone_available){resultText='Found 1+ phone(s)';shouldHaveColon=false;}else{var text='Found ';if(this.numTeaserPhones()===1){if(this.teaser.is_premium_phone_available){text+='1+ phone(s)';shouldHaveColon=false;}else{text+='1 phone';}}else{var extraNumbersSuffix=this.teaser.is_premium_phone_available&&!this.numTeaserPremiumPhones()?'+':'';text+=this.numTeaserPhones()+extraNumbersSuffix+' phones';}
resultText=text;}}
return resultText+(shouldHaveColon?':':'');};this.getTeaserPremiumUpsellText=function(hasGrandfatheredStandardPhones){if(hasGrandfatheredStandardPhones&&!this.hasPotentialPremiumNumbers()){return false;}
var availablePhones={};if(hasGrandfatheredStandardPhones){availablePhones={premiumCount:this.numTeaserPremiumPhones(),standardCount:this.numTeaserStandardPhones()};}else{availablePhones={premiumCount:this.numTeaserPremiumPhones()+this.numTeaserStandardPhones(),standardCount:0};}
var resultText='available on <b>+Phone</b> plans';resultText=(availablePhones.premiumCount===0?'':availablePhones.premiumCount)+' '+resultText;if(availablePhones.standardCount>0){resultText=(availablePhones.premiumCount===0?'more ':'+')+resultText;}else if(this.numTeaserPhones()===0){resultText='phones'+resultText;}
return resultText;};this.numTeaserEmails=function(){return(this.teaser.emails||[]).length;};this.numPhones=function(){return _.phones?_.phones.length:0;};this.numOfficePhones=function(){return _.officePhones?_.officePhones.length:0;};this.outReachActivity=function(){return _.outReach?_.outReach.activity:[];};this.outReachCounter=function(){return _.outReach?_.outReach.counter:0;};this.getRecoveryState=function(){switch(_self.recoveryStatus){case"complete":return"RECOVERY_COMPLETE";case"progress":return"RECOVERY_STARTED";default:return"RECOVERY_NOT_STARTED";}};this.isRecoveryComplete=function(){return _self.getRecoveryState()==="RECOVERY_COMPLETE";};Object.defineProperty(this,'recoveryEmails',{get:function(){var getEmailsBySource=function(source){return this.emails.filter(function(emailObj){return emailObj.is_recovery;}).filter(function(emailObj){return source?emailObj.source===source:true;});}.bind(this);return{userContributed:getEmailsBySource('usercontributed'),predicted:getEmailsBySource('predicted'),all:getEmailsBySource()};}.bind(this)});this.getPredictionState=function(){switch(_self.status){case"complete":return"PREDICTION_COMPLETE";case"progress":return"PREDICTION_STARTED";case"searching":return"PREDICTION_STARTED";default:return"PREDICTION_NOT_STARTED";}};this.isPredictionComplete=function(){return _self.getPredictionState()==="PREDICTION_COMPLETE";};this.shouldPoll=function(){return!this.isPredictionComplete();};this.shouldAsyncValidationPoll=function(){return this.lookupHasAsyncValidatingEntries();};this.lookupDetailsUrl=function(profileListId){var url=_self.lookupUrl;if(url&&profileListId&&profileListId>0){url+='?profile_list_id='+profileListId;}
return url;};this.contactInfo=function(opts){opts=angular.extend({noCollapse:false,filter:function filter(entry){return true;}},opts);var displayed=[];var collapsed=[];var phone,phoneNums;var email,bestPersonalEmail,bestProfessionalEmail;var contactType;var method;var i;function addContactMethod(method){if(opts.filter(method)){if(method.recommended||opts.noCollapse){displayed.push(method);}else{collapsed.push(method);}}}
for(i=0;i<_self.numEmails;i++){email=this.emails[i];if(email.validity==='valid'){contactType=ns.ContactType.verifiedEmail;}else if(email.validity==='accept_all'||email.validity==='unknown'){contactType=ns.ContactType.unverifiedEmail;}else if(email.last_valid){contactType=ns.ContactType.pastEmail;}else{contactType=ns.ContactType.invalidEmail;}
var additionalMetadata={};if(email.last_checked){additionalMetadata.lastChecked=email.last_checked;}
var capitalize=function capitalize(str){return str.replace(/^(.{1})(.*)$/,function(m,m1,m2){return m1.toUpperCase()+(m2||'');});};if(email.recommended&&email.validity==='valid'&&email.type==='professional'&&!bestProfessionalEmail){additionalMetadata.bestLabel='Best '+capitalize(email.type);bestProfessionalEmail=email;}else if(email.recommended&&email.validity==='valid'&&email.type==='personal'&&!bestPersonalEmail){additionalMetadata.bestLabel='Best '+capitalize(email.type);bestPersonalEmail=email;}
if(email.async_validating_time){additionalMetadata.asyncValidatingTime=email.async_validating_time;}
method=new ns.ContactMethod(contactType,email,email.format_probability,additionalMetadata);addContactMethod(method);}
if(this.phones){this.phones.forEach(function(phone){if(phone.validity==='invalid'){contactType=ns.ContactType.invalidPhone;}else{switch(phone.type){case'mobile':contactType=ns.ContactType.mobilePhone;break;case'work_fax':case'fax':contactType=ns.ContactType.faxPhone;break;default:contactType=ns.ContactType.generalPhone;}}
var additionalMetadata={};if(phone.last_checked){additionalMetadata.lastChecked=phone.last_checked;}
method=new ns.ContactMethod(contactType,phone,phone.confidence,additionalMetadata);addContactMethod(method);});}
for(i=0;i<this.numOfficePhones();i++){phone=this.officePhones[i];method=new ns.ContactMethod(ns.ContactType.officePhone,{key:phone,number:phone});if(opts.filter(method)){if(opts.noCollapse||displayed.length<3){displayed.push(method);}else{collapsed.push(method);}}}
var emailCount=collapsed.filter(function(contact){return contact.isEmail();}).length;var phoneCount=collapsed.filter(function(contact){return contact.isPhone();}).length;return{display:displayed,collapsed:collapsed,updateEmails:function updateEmails(emails){if(emails){var attributesToUpdate=['async_validating_time','last_checked'];var emailEntriesObj={};emails.forEach(function(emailObjUpdates){Object.keys(emailObjUpdates).forEach(function(att){if(attributesToUpdate.indexOf(att)!==-1){if(!emailEntriesObj[emailObjUpdates.email]){emailEntriesObj[emailObjUpdates.email]={};}
emailEntriesObj[emailObjUpdates.email][att]=emailObjUpdates[att];}});});[this.display,this.collapsed].forEach(function(collapsedOrDisplayed){collapsedOrDisplayed.forEach(function(contactMethod){if(contactMethod.isEmail()&&emailEntriesObj[contactMethod.key]){var tmpEntryObject,attVal,camelCasedAttName;tmpEntryObject=emailEntriesObj[contactMethod.key];Object.keys(tmpEntryObject).forEach(function(attNameToUpdate){attVal=tmpEntryObject[attNameToUpdate];camelCasedAttName=attNameToUpdate.replace(/(_)(.)/g,function(m0,m1,m2){return m2.toUpperCase();});if(contactMethod[camelCasedAttName]!==attVal){contactMethod[camelCasedAttName]=attVal;}});}});});}},collapsed_counts:{total:collapsed.length,email:emailCount,phone:phoneCount,emailDescriptor:emailCount>1?'emails':'email',phoneDescriptor:'phone'}};};this.lookupNotStarted=function(){return!!this.status===false||this.status==="not started";};this.lookupInProgress=function(){return this.status==="searching"||this.status==="progress"||this.status==="queued"||this.status==="not queued";};this.lookupComplete=function(){return this.status==="complete";};this.lookupHasAsyncValidatingEntries=function(){return!!this.emails&&!!this.emails.filter(function(e){return!!e.async_validating_time;}).length;};this.update(data);this.getCompleteness=function(){var deferred=$q.defer();var hasEduHistory=this.education&&this.education.length>0||false;var hasJobHistory=this.jobs&&this.jobs.length>0||false;var hasPic=false;var image=new Image();image.src=this.profilePic;image.onload=function(){if(image.width>1&&image.height>1){hasPic=true;}
finish();};image.onerror=function(){hasPic=false;finish();};var numEmails=this.numTeaserEmails();var numPhones=this.numTeaserPhones();var finish=function finish(){$timeout.cancel(timer);deferred.resolve({hasEducation:hasEduHistory,hasWork:hasJobHistory,hasPic:hasPic,numEmails:numEmails,numPhones:numPhones});};var timer=$timeout(finish,1000);return deferred.promise;};this.equals=function(other){if(this.id&&other.id){return this.id===other.id;}else{return this.linkedinUrl===other.linkedinUrl;}};this.deleteProfileListEntry=function(){return $http({url:'/v1/profiles/'+this.id,method:'DELETE'}).then(function(){humane.success('Profile reset! Refresh to see changes.');this.status=null;})["catch"](function(error){humane.error('An error occurred when resetting entry: ',error.message||JSON.stringify(error));});};};var profileDataToProfileObjects=function profileDataToProfileObjects(profileData){var selectedProfiles=[];if(angular.isArray(profileData)&&profileData.length){selectedProfiles=profileData.map(function(profileDict){return new ns.Profile(profileDict);});}
return selectedProfiles;};ns.reloadProfile=function(profiles,pii,polling){profiles=profiles instanceof ns.Profile?[profiles]:profiles;if(angular.isArray(profiles)&&profiles.length>0){var pids=profiles.map(function(p){return p.id;});var url='/v1/profiles/'+pids.join(",");return $http({url:url,method:'GET',params:{"pii":pii,"polling":polling}}).then(function success(response){if(response&&response.data&&angular.isArray(response.data)&&response.data.length){var responseDict={};for(var i=0;i<response.data.length;i++){responseDict[response.data[i].id]=response.data[i];}
for(var j=0;j<profiles.length;j++){var profile=profiles[j];if(responseDict[profile.id]){profile.update(responseDict[profile.id]);}}
return profiles;}
return undefined;});}else{ns.simulateError("Valid arguments to reloadProfile must be an "+"array of profiles or a single profile. Agruments passed in:"+JSON.stringify(arguments));}};ns.getProfile=function(id,name,captchaToken,nonce){return $http({url:"/v2/landing/p/"+id+"/"+name+"/",params:{"g-recaptcha-response":captchaToken,'nonce':nonce},method:"GET"}).then(function(response){var data=response&&response.data;if(data){return new ns.Profile(data);}else{return null;}});};ns.getProfileSuggestions=function(profile,nonce){return $http({url:"/v2/landing/p/s/"+profile.id+'/'+profile.name+'/',params:{"nonce":nonce},method:"GET"}).then(function(response){var suggestions=[];if(response&&response.data){suggestions=response.data.map(function(profileData){return new ns.Profile(profileData);});}
return suggestions;});};ns.getProfileData=function(profileIds){if(!angular.isArray(profileIds)||profileIds.length==0){var deferred=$q.defer();deferred.resolve({});return deferred.promise;}
return $http({url:'/v1/profiles/'+profileIds.join(','),method:'GET',params:{'pii':true,'polling':true}}).then(function(response){if(!angular.isArray(response.data)){return{};}
var resultProfileDataMap={};var resultProfiles=response.data;resultProfiles.forEach(function(profileData){resultProfileDataMap[profileData.id]=profileData;});return resultProfileDataMap;});};ns.getProfiles=function(idsArray,pii){if(idsArray&&angular.isArray(idsArray)&&idsArray.length){var url='/v1/profiles/'+idsArray.join(",");url=url+(pii?"?pii=true":"");return $http({url:url,method:'GET',transformResponse:ns.createResponseTransformer(profileDataToProfileObjects)}).then(function(response){if(response&&response.data&&angular.isArray(response.data)){return response.data;}
return[];});}else{return ns.simulateResponse([]);}};ns.createOrGetProfiles=function(params){if(!params){return null;}
return $http.post('/v1/profiles',params).then(function(response){if(!response||!response.data){return[];}
return profileDataToProfileObjects(response.data);});};ns.update=function(profile){return $http.put('/v1/profiles',profile).then(function(response){if(!response||!response.data||response.status!=200){return false;}
return true;});};ns.adminUpdate=function(profileId,data){return $http.put('/v1/admin/updateProfile/'+profileId,data).then(function(response){if(!response||!response.data||response.status!=200){return false;}
return true;});};ns.adminAction=function(profileId,action){return $http.post("/v1/admin/updateProfile/".concat(profileId,"/").concat(action,"/")).then(function(response){console.log(response);if(!response||response.status>=400){return false;}
return true;});};ns.recoverProfile=function(profileId,companyId,companyName,companyDomain,email){var url="/v2/profiles/"+profileId+"/recover";var params={company_id:companyId,company_name:companyName,company_domain:companyDomain,email:email};return $http.post(url,params).then(function(response){var data=response&&response.data;if(data){return new ns.Profile(data);}else{return null;}});};return ns;};PLY.App.Module.factory('PLY.Models.ProfileModel',["PLY.Models","$http","$log","$q","$timeout",ns.profileModelFactory]);})(PLY.Models.ProfileModel);;namespace("PLY.Models.Plugin").extend(PLY.Models);(function(ns){ns.pluginModelFactory=function(parent,userModel,profileModel,profileListModel,searchModel,analyticsModel,companyModel,experimentationModel,$http,$location,$log,$q,$timeout,$window,modalService,profilePollingService,linkedInUrlResolver){ns.capturePluginUser=function(){$http({method:'POST',url:'/companion_install_callback'});};ns.transformProfilesData=function(data){var deferred=$q.defer();if("linkedin"in data){data.profilesData=data.linkedin;delete data.linkedin;}
var profilesData=data.profilesData;data.untransformedProfileData=profilesData;var via=data.via;if(Array.isArray(profilesData)){var accumulatedDeferreds=[];profilesData.forEach(function(liProfile,index){if(liProfile&&liProfile.linkedinUrl){var delay=null;if(via==='background'){delay=index*750;}
accumulatedDeferreds.push(linkedInUrlResolver.resolveUrl(liProfile.linkedinUrl,via,delay).then(function(result){if(result&&result.resolvedUrl){liProfile.linkedinUrl=result.resolvedUrl;}}));}});$q.all(accumulatedDeferreds).then(function(){var linkedinUrls={};profilesData=profilesData.filter(function(p){if(p.linkedinUrl in linkedinUrls||linkedInUrlResolver.shouldResolveUrl(p.linkedinUrl)){return false;}
linkedinUrls[p.linkedinUrl]=true;return true;});data.profilesData=profilesData;if(profilesData.length){data.skipLinkResolution=false;data.transformationComplete=true;}
deferred.resolve(data);});}else{deferred.resolve(data);}
if(data.skipLinkResolution){$timeout(function(){if(!data.transformationComplete){deferred.resolve(data);}},4000);}
return deferred.promise;};ns.createOrGetProfilesFromProfileData=function(transformedData){var deferred=$q.defer();if(!transformedData.skipLinkResolution){profileModel.createOrGetProfiles(transformedData).then(deferred.resolve);}else{try{var profiles=[];if(Array.isArray(transformedData.untransformedProfileData)){transformedData.untransformedProfileData.forEach(function(profile){if(profile.experience&&profile.experience.length){var profileData={'name':profile.fullName,'current_employer':profile.experience[0].company,'current_title':profile.experience[0].title,'location':profile.location};profiles.push(profileData);}});}
searchModel.getPluginMatchResults(profiles).then(function(matchedProfiles){profileModel.createOrGetProfiles(ns.mergePluginAndSearchData(transformedData,matchedProfiles.profiles)).then(deferred.resolve);},function(error){console.log(error);deferred.resolve();});}catch(e){console.error("Could not search for profile",transformedData);deferred.resolve();}}
return deferred.promise;};ns.mergePluginAndSearchData=function(pluginData,searchProfiles){var mergedData=angular.extend({},pluginData);mergedData.profilesData=[];if(searchProfiles&&searchProfiles.length){mergedData.profilesData=searchProfiles.map(function(p){return{"fullName":p.name,"location":p.location,"linkedinUrl":p.linkedinUrl};});}
return mergedData;};ns.queueProfileInBackground=function(profileId){window.parent.postMessage({method:'queueProfile',profileId:profileId},'*');};ns.dataContainsValidProfiles=function(data){if(data&&"profilesData"in data){return data.profilesData&&data.profilesData.length>0;}
if(data&&Object.keys(data).length>0){for(var key in data){value=data[key];if(Array.isArray(value)){return value.length>0;}}}
return false;};ns.containsValidCompanyData=function(data){return data&&Object.keys(data).length>0&&data.id;};ns.getCompany=function(data){if(data.previewOnly){return companyModel.getCompanyById(data.id);}
return PLY.Utils.promiseOf($q,new companyModel.Company(data));};return ns;};PLY.App.Module.factory('PLY.Models.PluginModel',["PLY.Models",'PLY.Models.UserModel','PLY.Models.ProfileModel','PLY.Models.ProfileListModel',"PLY.Models.SearchModel",'PLY.Models.AnalyticsModel','PLY.Models.CompanyModel','PLY.Models.ExperimentationModel','$http','$location','$log','$q','$timeout','$window','ModalService','ProfilePollingService','LinkedInUrlResolver',ns.pluginModelFactory]);})(PLY.Models.Plugin);;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
namespace('PLY.Models.ProfileListModel').extend(PLY.Models);(function(ns){var SELECTED_PROFILE_LIST_ID_COOKIE='selected_profile_list_id';var ALL_CONTACTS_LIST=-1;var PROFILE_LISTS_LIMIT=75;ns.profileListModelFactory=function(parent,profileModel,$rootScope,$cookies,$http,$q,$timeout){ns.ProfileLookupError=function(args){this.status=null;this.message=null;this.type=null;this.code='unknown_error';if(args&&args.response){this.status=args.response.status;this.message=args.response.data.detail;this.type=ns.ProfileLookupError.ErrorTypes.UnknownError;if(this.status>=500){this.type=ns.ProfileLookupError.ErrorTypes.ServerError;this.code='server_error';}else if(this.status===429){this.type=ns.ProfileLookupError.ErrorTypes.ClientThrottled;this.code='throttled';}else if(this.status===413||this.status===414){this.type=ns.ProfileLookupError.ErrorTypes.RequestTooLarge;this.code='request_too_large';}else if(this.status===401||this.status===403){this.type=ns.ProfileLookupError.ErrorTypes.PermissionError;this.code='permission_denied';if(this.message==='Insufficient Credits'){this.type=ns.ProfileLookupError.ErrorTypes.OutOfCredits;this.code='out_of_credits';}}else if(this.status>=400){this.type=ns.ProfileLookupError.ErrorTypes.ClientError;this.code='client_error';}}};ns.ProfileLookupError.ErrorTypes=Object.freeze({UnknownError:0,ServerError:1,ServerTimeout:2,ClientError:3,ClientThrottled:4,RequestTooLarge:5,PermissionError:6,OutOfCredits:7});ns.ProfileList=function(data){var _self=this;var _publicAttributes=['id','name','user_id','profiles','num_profiles','num_profiles_exported','update_time','create_time'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));if(angular.isDefined(data.profiles)){_self.profiles=data.profiles.map(function(profileData){return new profileModel.Profile(profileData);});}else{_self.profiles=[];}};this.update(data);};ns.getProfilesByListId=function(id,page,orderBy,limit,filters){page=page||1;var url="/v1/profileList/".concat(id,"/profiles?page=").concat(page);if(orderBy){url+="&order_by=".concat(orderBy);}
if(limit){url+="&limit=".concat(limit);}
if(filters){Object.keys(filters).forEach(function(field){url+="&".concat(field,"=").concat(filters[field]);});}
return $http({method:'GET',url:url}).then(function(response){return new ns.PaginatedResponse(_objectSpread(_objectSpread({},response),{},{currentPage:page}),function(profileData){return new profileModel.Profile(profileData);});});};ns.getAll=function(page,orderBy,limit){page=page||1;limit=limit||PROFILE_LISTS_LIMIT;var url="/v1/profileList/?page=".concat(page);if(orderBy){url+="&order_by=".concat(orderBy);}
if(limit){url+="&limit=".concat(limit);}
return $http({method:'GET',url:url}).then(function(response){return new ns.PaginatedResponse(_objectSpread(_objectSpread({},response),{},{currentPage:page}),function(listData){return new ns.ProfileList(listData);});});};ns.getAllProfiles=function(page,orderBy,limit,filters){page=page||1;var url="/v1/profileList/profiles?page=".concat(page);if(orderBy){url+="&order_by=".concat(orderBy);}
if(limit){url+="&limit=".concat(limit);}
if(filters){Object.keys(filters).forEach(function(field){url+="&".concat(field,"=").concat(filters[field]);});}
return $http({method:'GET',url:url}).then(function(response){return new ns.PaginatedResponse(_objectSpread(_objectSpread({},response),{},{currentPage:page}),function(profileData){return new profileModel.Profile(profileData);});});};ns.getTotalCount=function(){return $http({method:'GET',url:'/v1/profileList/profiles/count'}).then(function(response){if(response&&response.data&&response.data.count){return response.data.count;}
return 0;});};ns.addProfile=function(profileListId,profileId,userSuggestions){var profileData={};if(userSuggestions){profileData.user_suggestions={};profileData.user_suggestions[profileId]=userSuggestions;}
return ns.addProfiles(profileListId,[profileId],profileData);};ns.addProfiles=function(profileListId,profileIds,profileData){var data=profileData||{};data.profile_ids=profileIds.filter(function(profile){return!!profile;});return $http({method:'POST',url:"/v1/profileList/".concat(profileListId,"/lookup"),data:data}).then(function(response){$rootScope.$broadcast('rr-contact-lookup',profileListId,profileIds);return response.data;});};ns.lookupProfiles=function(args){var profileListId;var data={profile_ids:[],linkedin_urls:[]};if(!args)throw Error('invalid argument: no arguments provided.');if(args.profiles){if(!angular.isArray(args.profiles)){args.profiles=[args.profiles];}
for(var i=0;i<args.profiles.length;i++){var profile=args.profiles[i];if(Number.isInteger(profile)){data.profile_ids.push(profile);}else if(Number.isInteger(profile.id)){data.profile_ids.push(profile.id);}else{data.linkedin_urls.push(profile.linkedinUrl);}}}
data.profile_ids=data.profile_ids.filter(function(profile){return!!profile;});data.linkedin_urls=data.linkedin_urls.filter(function(profile){return!!profile;});if(args.promoId){data.promoId=args.promoId;}
if(!data.profile_ids.length&&!data.linkedin_urls.length){throw Error("invalid argument 'profiles' was missing or empty.");}
if(args.profileList===null||args.profileList===undefined){throw Error("invalid argument 'profileList' was missing or empty.");}
if(args.profileList.constructor===ns.ProfileList){profileListId=args.profileList.id;}else{profileListId=args.profileList;}
var resultsDeferred=$q.defer();var startTime=new Date();var attempt=0;var request=function request(){attempt++;$http({method:'POST',url:"/v1/profileList/".concat(profileListId,"/lookup"),data:data}).then(function(response){var profileIds=response.data.profiles.map(function(p){return p.id;});$rootScope.$broadcast('rr-contact-lookup',response.data.id,profileIds);resultsDeferred.resolve(response.data.profiles);},function(response){var retry=false;if(response.status===502&&new Date()-startTime<60000){retry=true;}
if(retry){$timeout(request,500*attempt);}else{resultsDeferred.reject(new ns.ProfileLookupError({response:response}));}});};request();return resultsDeferred.promise;};ns.createProfileList=function(name){return $http({method:'POST',url:'/v1/profileList/',data:{name:name}}).then(function(response){return new ns.ProfileList(response.data);});};ns.getProfileList=function(profileListId){return $http({method:'GET',url:"/v1/profileList/".concat(profileListId,"/")}).then(function(response){return new ns.ProfileList(response.data);});};ns.refreshProfileList=function(profileList){return $http({method:'GET',url:"/v1/profileList/".concat(profileList.id,"/")}).then(function(response){if(response&&response.data){profileList.update(response.data);}});};ns.deleteProfileList=function(profileListId){return $http({method:'DELETE',url:"/v1/profileList/".concat(profileListId,"/")}).then(function(response){return new ns.ProfileList(response.data);});};ns.renameProfileList=function(profileListId,newName){return $http({method:'PATCH',url:"/v1/profileList/".concat(profileListId,"/"),data:{name:newName}}).then(function(response){return response;});};ns.deleteProfiles=function(profileListId,profileIds){return $http({method:'DELETE',url:"/v1/profileList/".concat(profileListId===ALL_CONTACTS_LIST?'profiles':"".concat(profileListId,"/profiles")),data:{profile_ids:profileIds}}).then(function(response){return new ns.ProfileList(response.data);});};ns.copyProfiles=function(srcProfileListId,destProfileListId,srcProfileIds,move){srcProfileIds=srcProfileIds||[];move=Boolean(move);return $http({method:'POST',url:'/v1/profileList/copyProfiles',data:{src_profile_list_id:srcProfileListId,dest_profile_list_id:destProfileListId,src_profile_ids:srcProfileIds,move:move}}).then(function(response){return response;});};ns.cookieProfileListIdKey=function(user){return"".concat(SELECTED_PROFILE_LIST_ID_COOKIE,"_").concat(user.id);};ns.getCookieProfileListId=function(user){if(user.isAnonymous()){return null;}
return parseInt($cookies.get(ns.cookieProfileListIdKey(user)));};ns.setCookieProfileListId=function(user,profileListId){$cookies.put(ns.cookieProfileListIdKey(user),profileListId);};return ns;};PLY.App.Module.factory('PLY.Models.ProfileListModel',['PLY.Models','PLY.Models.ProfileModel','$rootScope','$cookies','$http','$q','$timeout',ns.profileListModelFactory]);})(PLY.Models.ProfileListModel);;namespace("PLY.Models.ProfileListsModel").extend(PLY.Models);(function(ns){ns.factory=function(parent,UserModel,ProfileListModel,ModalService,$cookies,$http,$q){var ANONYMOUS_LIST_ID=0;var CONTACT_LIST_PAGE_SIZE=15;ns.ProfileListsError=function(msg){this.errorMessage=msg;return this;};ns.ProfileLists=function(data){var self=this;self.lists=data.records;self.pagination={next:data.next,previous:data.previous,total:data.count};self.add=function(profileList){self.lists.unshift(profileList);self.select(profileList.id);};self.swap=function(a,b){if(a!==b){var temp=self.lists[a];self.lists[a]=self.lists[b];self.lists[b]=temp;}};self.select=function(id){id=id||ANONYMOUS_LIST_ID;var i;for(i=0;i<self.lists.length;i++){var currentList=self.lists[i];if(currentList.id===id){self.swap(i,0);break;}}
return i!==self.lists.length;};self.selected=function(){if(self.lists.length===0){throw new ns.ProfileListsError("No profile lists available.");}
return self.lists[0];};return self;};ns.ProfileListCollection=function(lists,currentList){this.all=lists;this.selected=currentList;this.add=function(profileList){this.all.unshift(profileList);};};function createListWithName(profileLists,name){var createdDeferred=$q.defer();if(name&&name.length){ProfileListModel.createProfileList(name).then(function(newList){profileLists.add(newList);createdDeferred.resolve(newList);},function(error){createdDeferred.reject(error);});}else{createdDeferred.reject("Empty name");}
return createdDeferred.promise;};ns.addList=function(user,profileLists){var listDeferred=$q.defer();if(user.isAnonymous()){listDeferred.reject(new ns.ProfileListsError("Anonymous User"));}else{ModalService.promptModal("Create Contact List","New list name").then(function(name){createListWithName(profileLists,name).then(function(list){listDeferred.resolve(list);},function(error){listDeferred.reject(error);});});}
return listDeferred.promise;};ns.selectList=function(user,profileLists,id){var profilesDeferred=$q.defer();if(profileLists.select(id)){ProfileListModel.getProfilesByListId(id,1,'-create_time',CONTACT_LIST_PAGE_SIZE).then(function(data){var response={profiles:data.records,numPages:data.numPages};ProfileListModel.setCookieProfileListId(user,id);profilesDeferred.resolve(response);});}else{profilesDeferred.reject(new ns.ProfileListsError("Profile List does not exist."));}
return profilesDeferred.promise;};ns.getLists=function(){var profileListsDeferred=$q.defer();ProfileListModel.getAll().then(function(response){profileListsDeferred.resolve(new ns.ProfileLists(response));});return profileListsDeferred.promise;};ns.getMetadata=function(user){var mostRecentProfileListId=ProfileListModel.getCookieProfileListId(user);return ProfileListModel.getAll().then(function(response){var lists=response.records;var selectedList=null;var selectedLists=lists.filter(function(list){return list.id===mostRecentProfileListId;});if(selectedLists.length>0){selectedList=selectedLists[0];}else{selectedList=lists[0];}
return new ns.ProfileListCollection(lists,selectedList);},function(error){return new ns.ProfileListCollection([],0);});};return ns;};PLY.App.Module.factory("PLY.Models.ProfileListsModel",["PLY.Models","PLY.Models.UserModel","PLY.Models.ProfileListModel","ModalService","$cookies","$http","$q",ns.factory]);})(PLY.Models.ProfileListsModel);;namespace("PLY.Models.ProfileSelectionModel").extend(PLY.Models);(function(ns){ns.factory=function(Parent,$q,$rootScope){var ProfileSelection=function ProfileSelection(){var _this=this;this._all=false;this.ids={};this.profiles=[];this.profilesReady=$q.defer();$rootScope.$on('rr-search-begin',function(event,query){_this.profilesReady=$q.defer();});$rootScope.$on('rr-search-complete',function(event,query,results){_this._all=false;_this.profilesReady.resolve(results.allProfiles);});this.toggleAll=function(){var that=this;return this.profilesReady.promise.then(function(profiles){profiles.forEach(function(profile){if(that.all){that.selectProfile(profile);}else{that.deselectProfile(profile);}});});};this.count=function(){return this.profiles.length;};this.lookedUpCount=function(){return this.profiles.filter(function(p){return p.lookupComplete();}).length;};this.clear=function(){this.ids={};this.profiles.splice(0,this.profiles.length);this.all=false;};this.selectProfile=function(profile){if(!this.isSelected(profile)){this.profiles.push(profile);}};this.deselectProfile=function(profile){this.profiles=this.profiles.filter(function(p){return!p.equals(profile);});};this.isSelected=function(profile){var sameProfile=this.profiles.filter(function(p){return p.equals(profile);});return sameProfile.length>0;};this.changed=function(profile){if(this.isSelected(profile)){this.deselectProfile(profile);}else{this.selectProfile(profile);}};Object.defineProperty(this,"selected",{get:function get(){return _this.profiles;}});Object.defineProperty(this,"all",{get:function get(){return _this._all;},set:function set(value){_this._all=value;_this.toggleAll();}});};var Singleton=function(){var instance;function createInstance(){var object=new ProfileSelection();return object;}
return{getInstance:function getInstance(){if(!instance){instance=createInstance();}
return instance;}};}();ns.getOrCreate=function(){return Singleton.getInstance();};return ns;};PLY.App.Module.factory('PLY.Models.ProfileSelectionModel',["PLY.Models","$q","$rootScope",ns.factory]);})(PLY.Models.ProfileSelectionModel);;namespace("PLY.Models.ProductModel").extend(PLY.Models);(function(ns){ns.productModelFactory=function(parent,$http,$q){ns.BillingType={OneTime:0,MonthlyRecurring:1,QuarterlyRecurring:2,YearlyRecurring:3,PerCall:4};ns.CommitType={QuarterlyRecurring:1,YearlyRecurring:2};ns.AdditionalLookupCost={Standard:0.30,Premium:0.45};ns.LookupOperationType={StandardLookup:1,PremiumLookup:2,BulkLookup:3,PhoneLookup:5,PersonEnrich:6,Export:9};ns.LookupOperationTypeNames={1:'Standard',2:'Premium',3:'Bulk',5:'Phone',6:'Enrich',9:'Export',10:'Company'};ns.OperationTypeDisplay={1:'Lookup',2:'Premium Lookup',3:'Bulk Lookup',4:'Search',5:'Phone Lookup',6:'Enrich',9:'Export',10:'Company Lookup'};ns.LookupAllocationPolicy={OnPayment:1,ProratedMonthly:2};ns.FREE_PRODUCT_IDS=[4,14];ns.Product=function(data){var _this=this;var _self=this;var _publicAttributes=['id','name','display_name','lookup_limit','trial_limit','bonus_lookups','is_available','device_limit','purchase_price','lookup_overage_price','lookup_overage_limit','currency_code','country_code','is_recurring','billing_type','commit_type','additional_lookups_available','lookup_charge_type','lookup_operation_type','lookup_allocation_policy','operation_limits','is_enterprise','is_team','is_metered_billing','metered_pricing','metered_max_prepaid_lookups','metered_max_prepaid_searches','savings_amount','savings_percentage','has_enabled_overages','billing_description','monthly_price','display_price_value','display_price_symbol','display_price','display_monthly_price','display_local_price','display_local_monthly_price','original_monthly_price','original_display_monthly_price','original_display_local_monthly_price','commit_price','display_commit_price','display_local_commit_price','can_trial','trial_period_days','annual_comparison','feature_set','rollover_credits_enabled'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));_self.cost=_self.purchasePrice*100;switch(_self.billingType){case ns.BillingType.OneTime:_self.period="one time";break;case ns.BillingType.MonthlyRecurring:_self.period="monthly";break;case ns.BillingType.QuarterlyRecurring:_self.period="quarterly";break;case ns.BillingType.YearlyRecurring:_self.period="yearly";break;case ns.BillingType.PerCall:_self.period="per call";break;default:_self.period="custom";break;}
switch(_self.commitType){case ns.CommitType.QuarterlyRecurring:_self.commitPeriod="quarterly";break;case ns.CommitType.YearlyRecurring:_self.commitPeriod="yearly";break;default:_self.commitPeriod=null;break;}
if(_self.isEnterprise){_self.isAvailable=true;}
_self.pricingPeriod=_self.commitPeriod||_self.period;_self.isMostPopular='pro|silver'.indexOf(_self.name.toLowerCase())>=0;for(var _i=0,_arr=['lookupLimit','lookupOverageLimit','meteredMaxPrepaidLookups','meteredMaxPrepaidSearches'];_i<_arr.length;_i++){var attr=_arr[_i];if(_self[attr]==='inf'){_self[attr]=Infinity;}}};this.update(data);this.getPhonePlanVersionFromAvailableProducts=function(availableProducts){var exact=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var availPhoneProducts=availableProducts.filter(function(product){return product.isPhonePlan&&parseFloat(_this.purchasePrice)<=parseFloat(product.purchasePrice);});var exactPhoneProduct=null;availPhoneProducts.forEach(function(product){if(product.name===_this.name&&_this.billingType===product.billingType){exactPhoneProduct=product;}});return exactPhoneProduct||exact?exactPhoneProduct:availPhoneProducts;};this.compareToProduct=function(comparisonPlan){var annualPlan=_this.isAnnual?_this:comparisonPlan;var monthlyPlan=_this.isMonthly?_this:comparisonPlan;var fullPrice=monthlyPlan.monthlyPrice*12;var discountedPrice=annualPlan.monthlyPrice*12;var annualSavings=Math.abs(fullPrice-discountedPrice);var annualSavingsRate=annualSavings/fullPrice;var annualSavingsPercentage=Math.ceil(annualSavingsRate*100);return{annualFullPrice:fullPrice,annualDiscountedPrice:discountedPrice,annualSavings:annualSavings,annualSavingsRate:annualSavingsRate,annualSavingsPercentage:annualSavingsPercentage};};Object.defineProperty(this,"isPhonePlan",{get:function get(){return this.lookupOperationType===ns.LookupOperationType.PremiumLookup||this.lookupOperationType===ns.LookupOperationType.PhoneLookup;}});Object.defineProperty(this,"shortDisplayName",{get:function get(){return this.displayName.replace(" + Phone","").replace(" Annual","");}});Object.defineProperty(this,"isAnnual",{get:function get(){return this.billingType===ns.BillingType.YearlyRecurring||this.commitType===ns.CommitType.YearlyRecurring;}});Object.defineProperty(this,"isPaidProduct",{get:function get(){return this.cost>0;}});Object.defineProperty(this,"isMonthly",{get:function get(){return this.billingType===ns.BillingType.MonthlyRecurring;}});Object.defineProperty(this,"lookupAllocationPeriod",{get:function get(){return this.isAnnual&&this.lookupAllocationPolicy===ns.LookupAllocationPolicy.OnPayment?'year':'month';}});Object.defineProperty(this,"lookupOperationTypeName",{get:function get(){return ns.LookupOperationTypeNames[this.lookupOperationType];}});Object.defineProperty(this,"operationTypes",{get:function get(){return Object.keys(this.operationLimits);}});Object.defineProperty(this,"creditOperationType",{get:function get(){if(this.lookupLimit===Infinity&&this.operationTypes.length>1){var limitedOperationType=null;for(var i=0;i<this.operationTypes.length;i++){var operationType=this.operationTypes[i];if(operationType!==this.lookupOperationType&&this.operationLimits[operationType]){limitedOperationType=operationType;}}
return limitedOperationType;}else{return this.lookupOperationType;}}});Object.defineProperty(this,"creditOperationTypeDisplay",{get:function get(){var display=ns.OperationTypeDisplay[this.lookupOperationType]+'s';if(this.lookupLimit===Infinity){display='Unlimited '+display;var productCreditOperationType=this.creditOperationType;if(this.lookupOperationType!==productCreditOperationType){display=ns.OperationTypeDisplay[productCreditOperationType]+'s ('+display+')';}}
return display;}});Object.defineProperty(this,"teamAdminDisplay",{get:function get(){if(this.isEnterprise){return this.creditOperationTypeDisplay;}
return this.billingDescription;}});Object.defineProperty(this,"coinType",{get:function get(){var normalized=['free','bronze','silver','gold','premium','essentials','pro','ultimate'];var normalizedPlanName=null;for(var i=0;i<normalized.length;i++){if(this.name.toLowerCase().indexOf(normalized[i])!==-1){normalizedPlanName=normalized[i];break;}};var coin='coin-silver';switch(normalizedPlanName){case'free':coin='coin-free';break;case'bronze':case'essentials':coin='coin-bronze';break;case'premium':case'silver':case'pro':default:coin='coin-silver';break;case'gold':case'ultimate':coin='coin-gold';break;};return coin;}});Object.defineProperty(this,"coinImageUrl",{get:function get(){return"//static.rocketreach.co/images/pricing/v2/".concat(this.coinType,".svg");}});};ns.getProduct=function(productId){return $http({url:"/v2/product/".concat(productId),method:'GET',cache:ns.getHTTPCache()}).then(function(response){var data=response&&response.data;var p;if(data){p=new ns.Product(data);}
return p;});};ns.getAlternateBillingCycle=function(product){return $http({url:"/v2/product/".concat(product.id,"/alternate_billing/"),method:'GET',cache:ns.getHTTPCache()}).then(function(response){var data=response&&response.data;var p;if(data){p=new ns.Product(data);}
return p;});};ns.getProducts=function(optionalProductIds,country_code,version){var url='/v2/product';var params={};if(typeof optionalProductIds!=='undefined'&&optionalProductIds!==null){params['pids']=optionalProductIds.join(',');}
if(country_code){params['country']=country_code;}
if(version){params['version']=version;}
return $http({url:url,method:'GET',params:params,cache:ns.getHTTPCache()}).then(function(response){if(response&&Array.isArray(response.data)){return response.data.map(function(p){var product=new ns.Product(p);product.isCustom=optionalProductIds&&optionalProductIds.indexOf(product.id)!==-1;return product;});}
return[];});};ns.getTeamSpecificProducts=function(countryCode,version){var url='/v2/product/team';var params={};if(countryCode){params['country']=countryCode;}
if(version){params['version']=version;}
return $http({url:url,method:'GET',params:params,cache:ns.getHTTPCache()}).then(function(response){if(response&&Array.isArray(response.data)){return response.data.map(function(p){var product=new ns.Product(p);return product;});}
return[];});};ns.findCheapestPlan=function(products){var cheapestPlan=products[0];products.forEach(function(plan){if(parseFloat(plan.monthlyPrice)<parseFloat(cheapestPlan.monthlyPrice)){cheapestPlan=plan;}});return cheapestPlan;};ns.lookupTypeInPlans=function(type,products){type=type!==undefined?type:this.LookupOperationType.StandardLookup;var lookUpTypes=products.map(function(product){return product.lookupOperationType;});return!(lookUpTypes.indexOf(type)===-1);};ns.getSuggestedPlanOptions=function(products,user,userProductOverride){var preferCustomProducts=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var activeProduct=userProductOverride||user&&ns.getUserProduct(user)||{};var DEFAULT_LOOKUP_TYPE=user&&activeProduct?activeProduct.lookupOperationType:this.LookupOperationType.StandardLookup;var DEFAULT_INTERVAL=activeProduct&&activeProduct.isPaidProduct&&activeProduct.period||'yearly';var planInterval=DEFAULT_INTERVAL;var planLookupType=DEFAULT_LOOKUP_TYPE;var lookupTypeTogglable=false;var planIntervalTogglable=false;var _this$categorizeProdu=this.categorizeProducts(products),standardProducts=_this$categorizeProdu.standardProducts,premiumProducts=_this$categorizeProdu.premiumProducts,monthlyProducts=_this$categorizeProdu.monthlyProducts,yearlyProducts=_this$categorizeProdu.yearlyProducts,customProducts=_this$categorizeProdu.customProducts;if(!!premiumProducts.length&&!!standardProducts.length){lookupTypeTogglable=true;}
if(!this.lookupTypeInPlans(planLookupType,products)&&products.length){planLookupType=products[0].lookupOperationType;}
if(monthlyProducts&&yearlyProducts){planIntervalTogglable=true;if(preferCustomProducts&&customProducts.length){planInterval=customProducts[0].period||'yearly';planLookupType=customProducts[0].lookupOperationType;}}
return{planInterval:planInterval,planLookupType:planLookupType,lookupTypeTogglable:lookupTypeTogglable,planIntervalTogglable:planIntervalTogglable};};ns.getUserProduct=function(user){return!!user.productRawData?new ns.Product(user.productRawData):null;};ns.getUserPausedSubscriptionProduct=function(user){return!!user.pausedSubscriptionRawData?new ns.Product(user.pausedSubscriptionRawData):null;};ns.changeUserSubscription=function(plan,options){return $http({method:'PUT',url:'/v1/services/subscription/',data:{product:plan.id,options:options}}).then(function(response){var data=response.data;return ns.getProducts([data.product]).then(function(products){return products[0];});},function(errorResponse){return $q.reject(errorResponse.data);});};ns.categorizeProducts=function(products){var monthlyStandardProducts=[];var yearlyStandardProducts=[];var monthlyPremiumProducts=[];var yearlyPremiumProducts=[];var monthlyFreeProducts=[];var yearlyFreeProducts=[];var customProducts=[];for(var i=0;i<products.length;i++){var product=products[i];if(!product.isPaidProduct){if(product.isAnnual){yearlyFreeProducts.push(product);}else{monthlyFreeProducts.push(product);}}
if(product.lookupOperationType===ns.LookupOperationType.PremiumLookup){if(product.isMonthly){monthlyPremiumProducts.push(product);}else if(product.isAnnual){yearlyPremiumProducts.push(product);}}else if(product.isPaidProduct){if(product.isMonthly){monthlyStandardProducts.push(product);}else if(product.isAnnual){yearlyStandardProducts.push(product);}}
if(product.isCustom){customProducts.push(product);}}
return{monthlyStandardProducts:monthlyStandardProducts,yearlyStandardProducts:yearlyStandardProducts,monthlyPremiumProducts:monthlyPremiumProducts,yearlyPremiumProducts:yearlyPremiumProducts,monthlyFreeProducts:monthlyFreeProducts,yearlyFreeProducts:yearlyFreeProducts,monthlyProducts:[].concat(monthlyStandardProducts,monthlyPremiumProducts),yearlyProducts:[].concat(yearlyStandardProducts,yearlyPremiumProducts),standardProducts:[].concat(monthlyStandardProducts,yearlyStandardProducts),premiumProducts:[].concat(monthlyPremiumProducts,yearlyPremiumProducts),customProducts:customProducts,freeProducts:[].concat(monthlyFreeProducts,yearlyFreeProducts)};};ns.getDowngradeMonthlyProduct=function(){var url='/v1/product/downgradeMonthly/';return $http({url:url,method:'GET',cache:ns.getHTTPCache()}).then(function(response){if(Object.keys(response.data).length){return new ns.Product(response.data);}else{return null;}});};ns.getExtremeDowngradeProducts=function(){var url='/v1/product/downgradeEx/';return $http({url:url,method:'GET',cache:ns.getHTTPCache()}).then(function(response){if(response.data.length){return response.data.map(function(productObj){return new ns.Product(productObj);});}else{return false;}});};ns.getDowngradeProducts=function(){var url='/v1/product/downgrade/';return $http({url:url,method:'GET',cache:ns.getHTTPCache()}).then(function(response){if(response.data.length){return response.data.map(function(productObj){return new ns.Product(productObj);});}else{return false;}});};return ns;};PLY.App.Module.factory('PLY.Models.ProductModel',["PLY.Models","$http","$q",ns.productModelFactory]);})(PLY.Models.ProductModel);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace("PLY.Models.SearchModel").extend(PLY.Models);(function(ns){ns.SearchModelFactory=function(Parent,ProfileModel,$http,$q,$rootScope){ns.Pagination=function(args){this.pageSize=null;this.currentPage=null;this.totalPages=null;this.start=null;this.end=null;this.total=null;this.pages=[];var makePageList=function makePageList(remPages){this.pages=[];var leftPage=this.currentPage;var rightPage=this.currentPage;var lastRemPages=remPages--;while(remPages>0&&lastRemPages!==remPages){lastRemPages=remPages;if(rightPage<this.totalPages){rightPage++;remPages--;}
if(remPages&&leftPage>1){leftPage--;remPages--;}}
if(leftPage>1&&rightPage<this.totalPages){if(this.currentPage-leftPage<rightPage-this.currentPage){--rightPage;}}
for(var i=leftPage;i<=rightPage;i++){this.pages.push(i);}};if(args){if(args.constructor===ns.Pagination){Object.assign(this,args);}else if(args.data){var data=args.data;this.pageSize=Math.max(data.nextPage-data.thisPage,data.pageSize||0);if(this.pageSize>0){this.currentPage=Math.floor((data.thisPage-1)/this.pageSize)+1;this.totalPages=Math.ceil(data.total/this.pageSize);}
var totalPages=args.numPagesDisplay||10;this.total=data.total;this.start=data.thisPage;this.end=data.nextPage-1;if(this.end>this.total){this.end=this.total;}
if(this.total===0){this.start=this.end=0;}
makePageList.bind(this)(totalPages);}}
Object.defineProperty(this,"hasPreviousPage",{get:function get(){return this.currentPage>1;}});Object.defineProperty(this,"hasNextPage",{get:function get(){return this.currentPage<this.totalPages;}});};ns.Pagination.STANDARD_PAGE_SIZES=Object.freeze([10,25]);ns.Pagination.PREMIUM_PAGE_SIZES=Object.freeze([50,100]);Object.defineProperty(ns.Pagination,"DEFAULT_PAGE_SIZE",{get:function get(){return 10;}});ns.SearchResult=function(data){var self=this;this.profiles=[];this.selectedProfilesIds=[];this.pagination=null;this.suggestedProfiles=[];if(data&&data.constructor===ns.SearchResult){Object.assign(this,data);}else if(data){if(Array.isArray(data.profiles)){this.profiles=data.profiles.map(function(profileData){return new ProfileModel.Profile(profileData);});}
if(Array.isArray(data.suggested_profiles)){this.suggestedProfiles=data.suggested_profiles.map(function(profileData){return new ProfileModel.Profile(profileData);});}
this.selectedProfilesIds=data.selected_profile_ids||[];this.profiles.filter(function(p){return self.selectedProfilesIds.indexOf(p.id)>=0;}).map(function(p){p.selected=true;});this.pagination=new ns.Pagination({data:data.pagination});}else{this.pagination=new ns.Pagination();}
Object.defineProperty(this,"allProfiles",{get:function get(){return this.profiles.concat(this.suggestedProfiles||[]);}});};var naturalTimeDelta=function naturalTimeDelta(seconds){if(seconds<5){return"a moment";}else if(seconds<60){return seconds+" seconds";}else if(seconds>=60&&seconds<120){return"a minute";}else if(seconds>=120&&seconds<3600){return Math.ceil(seconds/60)+" minutes";}else if(seconds>=3600&&seconds<3600*2){return"an hour";}else if(seconds>3600){return Math.ceil(seconds/3600)+" hours";}};ns.SearchError=function(args){this.status=null;this.message=null;this.type=null;if(args){if(args.response){var _args$response$data;this.status=args.response.status;if(!this.message&&(_args$response$data=args.response.data)!==null&&_args$response$data!==void 0&&_args$response$data.detail){var _args$response$data2;this.message=(_args$response$data2=args.response.data)===null||_args$response$data2===void 0?void 0:_args$response$data2.detail;}
this.type=ns.SearchError.ErrorTypes.UnknownError;if(this.status>=500){this.type=ns.SearchError.ErrorTypes.ServerError;}else if(this.status===429){var _args$error;this.type=ns.SearchError.ErrorTypes.ClientThrottled;if(args.response.headers&&typeof args.response.headers==='function'){this.retryAfter=naturalTimeDelta(args.response.headers('Retry-After'));}else if(args!==null&&args!==void 0&&(_args$error=args.error)!==null&&_args$error!==void 0&&_args$error.retryAfter){this.retryAfter=args.error.retryAfter;}}else if(this.status===413||this.status===414){this.type=ns.SearchError.ErrorTypes.RequestTooLarge;}else if(this.status===401){this.type=ns.SearchError.ErrorTypes.AuthenticationError;}else if(this.status===403){this.type=ns.SearchError.ErrorTypes.PermissionError;}else if(this.status===402){this.type=ns.SearchError.ErrorTypes.SubscriptionRequired;}else if(this.status>=400){this.type=ns.SearchError.ErrorTypes.ClientError;}}
if(args.error){if(!this.message&&args.error.message){this.message=args.error.message;}}}};ns.SearchError.ErrorTypes=Object.freeze({"UnknownError":"UnknownError","ServerError":"ServerError","ServerTimeout":"ServerTimeout","ClientError":"ClientError","ClientThrottled":"ClientThrottled","RequestTooLarge":"RequestTooLarge","AuthenticationError":"AuthenticationError","PermissionError":"PermissionError","SubscriptionRequired":"SubscriptionRequired"});function transformResponse(response){if(response&&response.data){return new ns.SearchResult(response.data);}else{throw Error("SearchModel:Malformed Response returned by Search Web Service");}}
function getBody(tags,args){var data={"mode":args.mode,"start":args.start||1,"pageSize":args.size||10,"terms":tags};if("boost"in args){data.boost=args.boost;}
if("filter"in args){data.score_filter=args.filter;}
return data;}
ns.getSearchResultsV2=function(tags,searchArgs){return $http({url:'/v2/services/customSearch',method:'POST',data:getBody(tags,searchArgs)}).then(transformResponse);};ns.getPluginMatchResults=function(profileData){return $http({url:'/v1/pluginProfileMatch',method:'POST',data:{profiles:profileData}}).then(transformResponse);};ns.executeQuery=function(query){$rootScope.$broadcast('rr-search-begin',query);return $http({url:'/v2/services/customSearch',method:'POST',data:query.getHTTPPostBody()}).then(function(response){var searchResults=transformResponse(response);$rootScope.$broadcast('rr-search-complete',query,searchResults);return searchResults;},function(error){var searchError=new ns.SearchError({response:error});$rootScope.$broadcast('rr-search-failed',query,searchError);throw searchError;});};ns.getSearchCompletion=function(facet,keyword){var dict={};dict[facet]=keyword;return $http({url:'/v2/services/search/suggestions',method:'GET',params:dict}).then(function(response){var suggestions=[];if(response&&response.data){if(!Array.isArray(response.data)){if(_typeof(response.data)==='object'&&Object.keys(response.data).length){return response.data[Object.keys(response.data)[0]];}}else{suggestions=response.data;}}
return suggestions;});};ns.requestMoreSearches=function(){return $http({url:'/v1/services/throttle/reset/',method:'POST',data:{'name':'search'}});};ns.subscribe=function(scope,callback){var cleanupBegin=$rootScope.$on('rr-search-begin',function(event,query){callback(event,'begin',{query:query,results:null,error:null});});var cleanupEnd=$rootScope.$on('rr-search-complete',function(event,query,results){callback(event,'complete',{query:query,results:results,error:null});});var cleanupFailed=$rootScope.$on('rr-search-failed',function(event,query,error){callback(event,'error',{query:query,results:null,error:error});});if(scope){scope.$on('$destroy',cleanupBegin);scope.$on('$destroy',cleanupEnd);scope.$on('$destroy',cleanupFailed);}
return[cleanupBegin,cleanupEnd,cleanupFailed];};return ns;};PLY.App.Module.factory('PLY.Models.SearchModel',["PLY.Models","PLY.Models.ProfileModel","$http","$q","$rootScope",ns.SearchModelFactory]);})(PLY.Models.SearchModel);;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace("PLY.Models.AutocompleteModel").extend(PLY.Models);(function(ns){ns.AutocompleteModelFactory=function(parent,SearchModel,QueryTagModel,QueryFacetModel,$log){ns.Autocomplete=function(args){this.form=new ns.AutocompleteForm();this.suggestions=[];this.data={last:[]};this.facetType=null;if(!args||!args.facet){throw Error("Autocomplete requires a facet.");}
this.facetType=args.facet.type;this.mustExist=Boolean(args.facet.forceAutocomplete);this.getSuggestions=function(){var self=this;this.form.waiting=true;SearchModel.getSearchCompletion(this.facetType,this.form.input).then(function(data){data=data.map(function(item){if(_typeof(item)==='object'){return item.display;}else if(typeof item==='string'){return item;}else{return JSON.stringify(item);}});self.data.last=data;self.activeSuggestion=null;self.form.errors=data.length===0&&self.mustExist;self.form.waiting=false;self.showSuggestions();},function(error){$log.error("Autocomplete failed: "+error);self.form.reset();});};this.showSuggestions=function(){this.suggestions=this.data.last;};this.hideSuggestions=function(){this.suggestions=[];};this.findSuggestion=function(input){var i;for(i=0;i<this.data.last.length;i++){var suggestion=this.data.last[i];if(suggestion.localeCompare(input,"en",{sensitivity:"base"})===0){return i;}}
return-1;};this.submitInput=function(){if(this.mustExist){if(this.findSuggestion(this.form.input)<0){this.form.errors=true;return;}}
var tag=QueryTagModel.makeTag(this.facetType,this.form.input);args.facet.addTagAsPreset(tag);this.hideSuggestions();this.form.reset();return tag;};this.selectSuggestion=function(index){var selected="";if(index===null){index=this.findSuggestion(this.form.input);}
if(0<=index&&index<this.data.last.length){selected=this.data.last[index];}else if(this.mustExist){this.form.errors=true;return null;}else{selected=this.form.input;}
this.form.input=selected;};};ns.AutocompleteForm=function(){this.reset=function(){this.input="";this.errors=false;this.waiting=false;};this.reset();};return ns;};PLY.App.Module.factory("PLY.Models.AutocompleteModel",["PLY.Models","PLY.Models.SearchModel","PLY.Models.QueryTagModel","PLY.Models.QueryFacetModel","$log",ns.AutocompleteModelFactory]);})(PLY.Models.AutocompleteModel);;namespace("PLY.Models.LeadGenModel").extend(PLY.Models);(function(ns){ns.LeadGenModelFactory=function(parent,$q,UserModel,QueryModel,SearchModel){ns.LeadGenState=function(args){(function init(){this.featureAllowed=false;this.enabled=false;if(args.user&&args.user.isBetaTester){this.featureAllowed=true;}
var query=QueryModel.getQueryFromURL();this.enabled=query.mode==="leads"&&this.featureAllowed;}).call(this);this.toggle=function(){if(this.featureAllowed){if(this.enabled){QueryModel.getQueryFromURL().modify({"function":"leads",value:"enable"}).updateURL();}else{QueryModel.getQueryFromURL().modify({"function":"leads",value:"disable"}).updateURL();}}else{this.enabled=false;}};this.getLeads=function(){if(this.featureAllowed){QueryModel.getQueryFromURL().modify({"function":"leads",value:"more"}).updateURL();}};};ns.getState=function(){var deferred=$q.defer();UserModel.getUserInfo().then(function(user){deferred.resolve(new ns.LeadGenState({user:user}));});return deferred.promise;};return ns;};PLY.App.Module.factory("PLY.Models.LeadGenModel",["PLY.Models","$q","PLY.Models.UserModel","PLY.Models.QueryModel","PLY.Models.SearchModel",ns.LeadGenModelFactory]);})(PLY.Models.LeadGenModel);;namespace("PLY.Models.QueryTagModel").extend(PLY.Models);(function(ns){ns.QueryTagModel=function(parent,$log){var EXCLUDE_STR="exclude";var INCLUDE_STR="include";var liRe=new RegExp("^https?://www.linkedin.com/.*");ns.Tag=function(data){if(data&&data.constructor===ns.Tag){Object.assign(this,data);}else if(data){this.keyword=data.keyword;this.type=data.type;if(data.incexc){if(data.incexc!==EXCLUDE_STR&&data.incexc!==INCLUDE_STR){throw"Invalid Value for 'incexc'";}
this.incexc=data.incexc;}else{if(/^-/.exec(this.keyword)){this.keyword=this.keyword.substring(1);this.incexc=EXCLUDE_STR;}else{this.incexc=INCLUDE_STR;}}}
if(!this.keyword||typeof this.keyword!=="string"||!this.keyword.length){throw"Keyword must be a valid non-empty String";}
this.type=this.type||"keywords";this.toggleExactMatch=function(){if(this.exact){this.keyword=this.keyword.substring(1,this.keyword.length-1);}else{this.keyword="\""+this.keyword+"\"";}};this.equals=function(o){var s1=this.keyword;var s2=o.keyword;if(!this.exact&&!o.exact){s1=s1.toLowerCase();s2=s2.toLowerCase();}
return s1.localeCompare(s2,"en",{sensitivity:"base"})===0&&this.type===o.type;};Object.defineProperty(this,"isValid",{get:function get(){return!!this.keyword&&!!this.incexc&&!!this.type;}});Object.defineProperty(this,"exclude",{get:function get(){return this.incexc==='exclude';},set:function set(value){this.include=!value;}});Object.defineProperty(this,"include",{get:function get(){return this.incexc==='include';},set:function set(value){if(value===false){this.incexc='exclude';}else{this.incexc='include';}}});Object.defineProperty(this,"exact",{get:function get(){if((this.keyword||"").length>2){if(this.keyword[0]===this.keyword[this.keyword.length-1]){if(this.keyword[0]==='"'){return true;}}}
return false;}});Object.defineProperty(this,"hidden",{get:function get(){return this.type==='link';}});Object.defineProperty(this,"display",{get:function get(truncate){truncate=!!truncate;var kw=this.keyword;if(typeof kw==="number"){kw=kw.toString();}else if(truncate&&kw.length>40){kw=kw.substring(0,40)+"&hellip;";}
if(data.display){kw=data.display;}
return kw;}});Object.defineProperty(this,"isLinkedInUrl",{get:function get(){return liRe.test(this.keyword.toLowerCase());}});};ns.TagList=function(args){this.items=[];this.setTags=function(tags){var that=this;this.items=[];tags.forEach(function(tag){if(tag.constructor!==ns.Tag){tag=new ns.Tag(tag);}
that.items.push(tag);});};this.addTag=function(tag){if(tag.keyword){if(this.getTag(tag)<0){this.items.push(tag);}}};this.removeTagType=function(type){var i;for(i=0;i<this.items.length;i++){if(this.items[i].type===type){this.items.splice(i--,1);}}};this.removeHiddenTags=function(){var i;for(i=0;i<this.items.length;i++){if(this.items[i].hidden===true){this.items.splice(i--,1);}}};this.removeTag=function(tag){var index=this.getTag(tag);if(index<0){return false;}else{this.items.splice(index,1);}
return true;};this.forEach=function(callback){return this.items.forEach(callback);};this.filter=function(callback){return this.items.filter(callback);};this.at=function(index){return this.items[index];};this.getTag=function(tag){for(var i=0;i<this.items.length;i++){if(this.items[i].equals(tag)){return i;}}
return-1;};if(args&&args.constructor===ns.TagList){Object.assign(this.items,args.items);}else if(args&&args.tags.length){this.setTags(args.tags);}};Object.defineProperty(ns.TagList.prototype,"length",{get:function get(){return this.items.length;}});ns.makeTag=function(type,keyword,incexc){return new ns.Tag({"type":type,"keyword":keyword,"incexc":incexc});};ns.makeKeywordsTag=function(value){return new ns.Tag({"type":"keywords","keyword":value,"incexc":"include"});};return ns;};PLY.App.Module.factory('PLY.Models.QueryTagModel',["PLY.Models","$log",ns.QueryTagModel]);})(PLY.Models.QueryTagModel);;namespace("PLY.Models.QueryModel").extend(PLY.Models);(function(ns){ns.QueryModelFactory=function(parent,QueryTagModel,QueryFacetModel,SearchUrlService,$q,$location,$log,$rootScope){ns.Query=function(data){data=data||{};var modes={"default":"default",leads:"leads",advanced:"advanced"};if(data.constructor===ns.Query){this.start=data.start;this.pageSize=data.pageSize;this.tags=new QueryTagModel.TagList({tags:data.tags});this.mode=data.mode;}else{var tags=data.tags||[];this.start=Math.max(Number(data.start||1),1);this.pageSize=Math.max(Number(data.pageSize||10),1);this.tags=new QueryTagModel.TagList();this.mode=data.mode||"default";for(var i=0;i<tags.length;i++){this.tags.addTag(new QueryTagModel.Tag(tags[i]));}}
var setMode=function setMode(value){this.mode=value;if(modes[value]===undefined){this.updateMode();}};this.updateMode=function(){var that=this;if(this.mode!==modes.leads){this.mode="default";this.tags.forEach(function(tag){if(tag.type!=="keywords"){that.mode="advanced";}});}};this.getHTTPPostBody=function(){return{"start":this.start,"pageSize":this.pageSize,"terms":this.terms,"mode":this.mode};};var setKeywords=function setKeywords(value){var keywordTag=null;this.tags.forEach(function(tag){if(tag.type==="keywords"){keywordTag=tag;}});if(!Boolean(value)){if(keywordTag){this.tags.removeTag(keywordTag);}}else{if(keywordTag===null){keywordTag=new QueryTagModel.makeKeywordsTag(value);this.tags.addTag(keywordTag);}
keywordTag.keyword=value;}
if(keywordTag.isLinkedInUrl){this.tags.setTags([keywordTag]);}};var addTags=function addTags(tags){var that=this;if(tags===undefined){tags=[];}
if(tags.constructor!==QueryTagModel.TagList){tags=[tags];}
tags.forEach(function(tag){that.tags.addTag(tag);});if((this.keywordTag||{}).isLinkedInUrl){this.tags.removeTagType("keywords");}};var removeTags=function removeTags(tags){var that=this;if(tags===undefined){tags=[];}
if(!Array.isArray(tags)){tags=[tags];}
tags.forEach(function(tag){that.tags.removeTag(tag);});};var removeTagsByType=function removeTagsByType(type){this.tags.removeTagType(type);};var pagination=function pagination(args){if(this.isEmpty){return;}
if(args==="nextPage"){this.start+=this.pageSize;}else if(args==="previousPage"){this.start-=this.pageSize;}else{if(args.page){this.start=(args.page-1)*this.pageSize+1;}
if(args.pageSize){this.start=1;this.pageSize=args.pageSize;}}
this.start=Math.max(1,this.start);this.pageSize=Math.max(1,this.pageSize);return false;};var leads=function leads(args){if(this.isEmpty){return;}
if(args==="enable"){setMode.call(this,"leads");}else if(args==="disable"){setMode.call(this,null);}else if(args==="more"){this.start++;}
return false;};var mutators={setKeywords:setKeywords,addTags:addTags,removeTags:removeTags,removeTagsByType:removeTagsByType,pagination:pagination,setMode:setMode,leads:leads};this.modify=function(args){if(args===undefined){args=[];}
if(!Array.isArray(args)){args=[args];}
var clone=new ns.Query(this);args.forEach(function(modificationItem){var modifierName=modificationItem["function"];var modifierValue=modificationItem.value;if(mutators[modifierName]){var rv=mutators[modifierName].call(clone,modifierValue);if(rv!==false){clone.start=1;clone.updateMode();}}else{throw Error("Unsupported query modification operation: "+modifierName);}});return clone;};Object.defineProperty(this,"isEmpty",{get:function get(){return!this.tags.length;}});Object.defineProperty(this,"terms",{get:function get(){var data=[];this.tags.forEach(function(tag){data.push({keyword:tag.keyword.toString(),incexc:tag.incexc,type:tag.type});});return data;}});Object.defineProperty(this,"keywords",{get:function get(){var value="";this.tags.forEach(function(tag){if(tag.type==="keywords"){value=tag.display;}});return value;}});Object.defineProperty(this,"keywordTag",{get:function get(){var t=this.tags.filter(function(tag){return tag.type==="keywords";});if(t.length===0){return null;}else{return t[0];}}});this.updateURL=function(options){options=options||{};var start=this.start;var pageSize=this.pageSize;var mode=this.mode;var tagsRison=rison.encode(this.terms);pageSize=Math.max(1,pageSize);if(options.nextPage){start+=pageSize;}
if(options.previousPage){start-=pageSize;}
if(options.jumpToPage){start=(options.jumpToPage-1)*pageSize+1;}
if(options.clear){start=1;pageSize=1;mode="default";tagsRison="";}
start=Math.max(1,start);var oldSearch=$location.search();oldSearch.tags=tagsRison;oldSearch.page_size=pageSize;oldSearch.start=start;oldSearch.mode=mode;$location.search(oldSearch);if(options.replace){$location.replace();}
return $location.url();};this.updateMode();};ns.getQueryFromURL=function(){var query=null;var urlParams=$location.search();try{var decodeTags=function decodeTags(tagParam){if(tagParam===""){return[];}
var tagArray=rison.decode(tagParam);return tagArray;};var tagRison=urlParams.tags;if(tagRison){var tags=decodeTags(urlParams.tags);var params={tags:tags,mode:urlParams.mode,start:urlParams.start,pageSize:urlParams.page_size};query=new ns.Query(params);}else if(SearchUrlService.getSearchURLType(urlParams)!==SearchUrlService.URL_TYPES.RISON){params=SearchUrlService.resolveParamsTo(SearchUrlService.URL_TYPES.RISON);if(params.tags){query=new ns.Query(params);}}}catch(e){$log.error("Error while parsing URL Error:",e,urlParams);}
if(query===null){query=new ns.Query({});}
return query;};ns.getQueryFromActiveSearch=function(activeSearch){try{var tags=[];if(activeSearch&&activeSearch.tags){tags=activeSearch.tags;}
return new ns.Query({tags:tags});}catch(e){$log.error("Error while retrieving active Search:",e);return new ns.Query({});}};ns.sendNotify=true;ns.notify=function(query){if(ns.sendNotify){$rootScope.$emit('rr-search-query-update',query);}};ns.subscribe=function(scope,callback){var handler=$rootScope.$on('rr-search-query-update',callback);scope.$on('$destroy',handler);};ns.disableUpdates=function(){ns.sendNotify=false;};ns.enableUpdates=function(){ns.sendNotify=true;};return ns;};PLY.App.Module.factory('PLY.Models.QueryModel',["PLY.Models","PLY.Models.QueryTagModel","PLY.Models.QueryFacetModel","SearchUrlService","$q","$location","$log","$rootScope",ns.QueryModelFactory]);})(PLY.Models.QueryModel);;namespace("PLY.Models.SearchFilterModel").extend(PLY.Models);(function(ns){ns.searchFilterModelFactory=function(parent,$http){function Preset(value,description,estimate){description=description||value;this.selected=false;this.show=true;this.value=value;this.description=description;this.estimate=estimate;this.setSelected=function(value){this.selected=Boolean(value);};this.reset=function(){this.selected=false;this.show=true;};};ns.Preset=Preset;function Filter(data,register){this.name=data.name;this.type=null;this.presets=[];this.customizable=true;this.ranged=false;this.forceAutocomplete=Boolean(data.force_autocomplete);this.codeMap={};this.filters=[];this.more=null;this.dataType="keyword";this.expanded=true;this.searchable=function(){return this.customizable&&!this.ranged;};this.filterable=function(){return!this.customizable&&!this.ranged;};this.rangeable=function(){return this.customizable&&this.ranged;};this.addPreset=function(preset){this.presets.push(preset);};this.updatePreset=function(tag,selected){var i;if(tag.type!==this.type){for(i=0;i<this.filters.length;i++){this.filters[i].updatePreset(tag,selected);}
return;}
var found=false;for(i=0;i<this.presets.length;i++){if(this.presets[i].value==tag.keyword){this.presets[i].setSelected(selected);tag.display=this.presets[i].description;found=true;}}
if(!found){this.addPreset(ns.makePresetFromTag(tag));}};this.selectedPresets=function(){var i;var presetObj={};var otherPresetObj;var attrname;presetObj[this.type]=[];for(i=0;i<this.presets.length;i++){if(this.presets[i].selected){presetObj[this.type].push(this.presets[i]);}}
for(i=0;i<this.filters.length;i++){otherPresetObj=this.filters[i].selectedPresets();for(attrname in otherPresetObj){presetObj[attrname]=otherPresetObj[attrname];}}
if(this.more){otherPresetObj=this.more.selectedPresets();for(attrname in otherPresetObj){presetObj[attrname]=otherPresetObj[attrname];}}
return presetObj;};this.setCode=function(code,description){this.codeMap[code]=description;};this.clone=function(){return angular.copy(this);};this.reset=function(tagList){var i;for(i=0;i<this.presets.length;i++){this.presets[i].reset(tagList);}
for(i=0;i<this.filters.length;i++){this.filters[i].reset(tagList);}
if(this.more){this.more.reset(tagList);}
if(tagList!==undefined){tagList.removeAll(this.type);}};function isCoded(facet){if(facet.defaults.length){return facet.defaults[1].code!==undefined;}
return false;}
var rangeRe=/\$?(\d+)\s*-\s*\$?(\d+)/;function isRanged(facet){if(facet.defaults.length){return rangeRe.exec(facet.defaults[1].value);}
return false;}
this.init=function(){var i;this.expanded=Boolean(data.expanded);if(data.filters){for(i=0;i<data.filters.length;i++){var subFilter=new ns.Filter(data.filters[i],register);if("more"in data.filters[i]){this.more=subFilter;}else{this.filters.push(subFilter);}}}else if(data.more){for(i=0;i<data.more.length;i++){this.filters.push(new ns.Filter(data.more[i],register));}}else{this.type=data.facet;for(i=0;i<data.defaults.length;i++){var item=data.defaults[i];var preset;var description=item.description||item.value;var value=item.code||item.value;preset=new Preset(value,description,item.estimate);if(isCoded(data)){this.dataType="code";this.customizable=false;this.setCode(item.code,item.description);}else if(isRanged(data)){this.dataType="range";this.ranged=true;}
this.addPreset(preset);}}
register(this);};this.init();};ns.Filter=Filter;function FilterPresets(data){this.filters=[];this.filterByType={};this.getFiltersForType=function(type){if(this.filterByType.hasOwnProperty(type)){return this.filterByType[type];}else{return[];}};this.registerFilter=function(filter){if(this.filterByType[filter.type]===undefined){this.filterByType[filter.type]=[filter];}else{this.filterByType[filter.type].push(filter);}};this.reset=function(tagList){for(var i=0;i<this.filters.length;i++){this.filters[i].reset(tagList);}};this.populateSearchFilter=function(){var self=this;var register=function register(filter){self.registerFilter(filter);};for(var i=0;i<data.length;i++){this.filters.push(new Filter(data[i],register));}};this.update=function(tag,selected){var i;var filters=this.getFiltersForType(tag.type);for(i=0;i<filters.length;i++){filters[i].updatePreset(tag,selected);}};};ns.FilterPresets=FilterPresets;ns.getProfileSearchPresets=function(){var transformResponse=function transformResponse(response){if(response&&response.data){var presets=new FilterPresets(response.data);presets.populateSearchFilter();return presets;}else{throw Error("SearchModel:Malformed Response returned by Search Web Service");}};return $http({url:'/v2/services/customSearchPresets',method:'GET',cache:ns.getHTTPCache()}).then(transformResponse);};ns.makePresetFromTag=function(tag){var preset=new Preset(tag.keyword,tag.display,0);preset.selected=true;return preset;};return ns;};PLY.App.Module.factory('PLY.Models.SearchFilterModel',["PLY.Models","$http",ns.searchFilterModelFactory]);})(PLY.Models.SearchFilterModel);;namespace("PLY.Models.SearchTagModel").extend(PLY.Models);(function(ns){ns.searchTagModelFactory=function(parent,$log){ns.Tag=function(data){var self=this;self.keyword=data.keyword;self.incexc=data.incexc;self.type=data.type;self.display=data.keyword;self.isValid=function(){return!!self.keyword&&!!self.incexc&&!!self.type;};self.exclude=function(){return self.incexc==='exclude';};self.include=function(){return self.incexc==='include';};self.equals=function(o){return self.keyword==o.keyword&&self.incexc===o.incexc&&self.type===o.type;};self.rawData=function(){return{keyword:self.keyword.toString(),incexc:self.incexc,type:self.type};};self._get_display=function(truncate){truncate=!!truncate;var kw=self.keyword;if(typeof kw==="number"){kw=kw.toString();}else if(truncate&&kw.length>40){kw=kw.substring(0,40)+'&hellip;';}
if(self.exclude()){kw='-'+kw;}
return kw;};function clean(){if(typeof self.keyword==="string"){self.keyword=self.keyword.replace(/[\x00-\x1F\x7F-\x9F]/g,"  ").trim();self.display=self._get_display(true);}}
clean();};ns.TagList=function(tagRemoved,tagAdded){var self=this;self.tags=[];self.removedCallback=tagRemoved;self.addedCallback=tagAdded;self.init=function(tags){self.tags=tags;};self.length=function(){return self.tags.length;};self.empty=function(){return self.tags.length===0;};self.at=function(index){if(index<0||index>=self.tags.length){return null;}
return self.tags[index];};self.find=function(tag){for(var i=0;i<self.tags.length;i++){var curTag=self.tags[i];if(curTag.equals(tag)){return i;}}
return-1;};self.map=function(callback){return self.tags.map(callback);};self.filter=function(callback){return self.tags.filter(callback);};self._added=function(tag){if(typeof self.addedCallback==="function"){self.addedCallback(tag);}};self._removed=function(tag){if(typeof self.removedCallback==="function"){self.removedCallback(tag);}};self.prepend=function(tag){if(self.find(tag)===-1){self.tags.unshift(tag);self._added(tag);return true;}
return false;};self.prependAll=function(tags){var success=false;for(var i=0;i<tags.length;i++){if(self.prepend(tags[i])){success=true;}}
return success;};self.append=function(tag,notify){if(typeof notify==='undefined'){notify=true;}
if(self.find(tag)===-1){self.tags.push(tag);if(notify){self._added(tag);}
return true;}
return false;};self.remove=function(index,notify){if(typeof notify==='undefined'){notify=true;}
if(index<0||index>=self.tags.length){$log.error("Failed to remove tag at index "+index);return false;}else{var tag=self.tags.splice(index,1)[0];if(notify){self._removed(tag);}
return tag;}};self.removeAll=function(type){self.tags=self.tags.filter(function(tag){return tag.type!==type;});};self.clear=function(notify){if(typeof notify==="undefined"){notify=false;}
while(self.tags.length){self.remove(0,notify);}};self.serialize=function(){var tagData=[];for(var i=0;i<self.tags.length;i++){tagData.push(self.tags[i].rawData());}
return tagData;};self.encode=function(){return rison.encode(self.serialize());};self.clone=function(){};};ns.decode=function(tagParam,presets){try{if(tagParam===""){return[];}
var tagArray=rison.decode(tagParam);return ns.deserialize(tagArray,presets);}catch(e){$log.error("Location String seems to be corrupt",e);return[];}};ns.deserialize=function(tagArray,presets){var tags=[];for(var i=0;i<tagArray.length;i++){var tagData=tagArray[i];var tag=new ns.Tag(tagData);var filters=presets.getFiltersForType(tagData.type);if(filters.length>=1){var filter=filters[0];if(!filter.customizable){tag.display=filter.codeMap[tagData.keyword];}}
if(tag.isValid()){tags.push(tag);}}
return tags;};function makeTag(type,keyword,incexc,display){var tag=new ns.Tag({keyword:keyword,incexc:incexc,type:type});if(typeof display!=="undefined"){tag.display=display;}
return tag;}
ns.makeTag=function(type,keyword,display){return makeTag(type,keyword,"include",display);};ns.makeExcludeTag=function(type,keyword,display){return makeTag(type,keyword,"exclude",display);};return ns;};PLY.App.Module.factory('PLY.Models.SearchTagModel',["PLY.Models","$log",ns.searchTagModelFactory]);})(PLY.Models.SearchTagModel);;namespace("PLY.Models.EmailEventModel").extend(PLY.Models);(function(ns){ns.emailEventModelFactory=function(parent,$http,$httpParamSerializer){ns.EventType={Send:1,Open:2,Click:3,Bounce:4,Reply:5};ns.EmailEvent=function(data){var _self=this;var _publicAttributes=['id','message_id','gmail_message_id','event_time','event_type','event_type_name','event_ip_address','from_email','profile_id','profile_name','to_email','template_id','template_name','subject'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getEmailEvents=function(page,filterParams){var url='/v1/emailEvents?';var params={};if(page){params.page=page;}
if(filterParams){for(var k in filterParams){if(filterParams.hasOwnProperty(k)){params[k]=filterParams[k];}}}
url+=$httpParamSerializer(params);return $http({url:url,method:'GET'}).then(function(response){if(response&&response.data){response.data.results=response.data.results.map(function(data){return new ns.EmailEvent(data);});return response.data;}else{throw Error("EmailEventModel.getEmailEvents: Malformed Response returned");}});};ns.getEmailEventsPer=function(per,page,ids){page=page||1;var url='/v1/emailEvents/'+per+'?page='+page;if(ids){url+='&ids='+ids.join(",");}
return $http({url:url,method:'GET'}).then(function(response){if(response&&response.data){return response.data;}else{throw Error("EmailEventModel.getEmailEventsPer: Malformed Response returned");}});};return ns;};PLY.App.Module.factory('PLY.Models.EmailEventModel',["PLY.Models","$http","$httpParamSerializer",ns.emailEventModelFactory]);})(PLY.Models.EmailEventModel);;namespace("PLY.Models.EmailTemplateModel").extend(PLY.Models);(function(ns){ns.emailTemplateModelFactory=function(parent,$http){ns.EmailTemplate=function(data){var _self=this;var _publicAttributes=['id','is_default','name','subject','body','create_time','update_time'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getEmailTemplateData=function(emailTemplateId){var url='/v1/emailTemplates/'+emailTemplateId;return $http({url:url,method:'GET'}).then(function(response){return response&&response.data;});};ns.getEmailTemplate=function(emailTemplateId){return ns.getEmailTemplateData(emailTemplateId).then(function(data){var p;if(data){p=new ns.EmailTemplate(data);}
return p;});};ns.getEmailTemplates=function(page){var url='/v1/emailTemplates';if(page){url+='?page='+page;}
return $http({url:url,method:'GET'}).then(function(response){if(response&&response.data){response.data.results=response.data.results.map(function(data){return new ns.EmailTemplate(data);});return response.data;}else{throw Error("EmailTemplateModel.getEmailTemplates: Malformed Response returned");}});};ns.createEmailTemplate=function(emailTemplate){var url='/v1/emailTemplates';return $http.post(url,emailTemplate).then(function(response){if(response&&response.data){emailTemplate.update(response.data);return true;}
return false;});};ns.updateEmailTemplate=function(emailTemplate){var url='/v1/emailTemplates/'+emailTemplate.id;return $http.put(url,emailTemplate).then(function(response){if(response&&response.data){emailTemplate.update(response.data);return true;}
return false;});};ns.deleteEmailTemplate=function(emailTemplate){var url='/v1/emailTemplates/'+emailTemplate.id;return $http["delete"](url).then(function(response){return true;});};ns.generateEmail=function(profileId,subject,body){return $http.post('/v1/generateEmail',{profile_id:profileId,subject:subject,body:body}).then(function(response){return response&&response.data;},function(error){return undefined;});};ns.sendEmail=function(profileId,toEmail,templateId,subject,body){return $http.post('/v1/sendEmail',{profile_id:profileId,to_email:toEmail,template_id:templateId,subject:subject,body:body});};ns.getMailto=function(profileId,toEmail,emailTemplate){return ns.generateEmail(profileId,emailTemplate).then(function(email){var mailto='mailto:'+toEmail;if(email){mailto+='?subject='+encodeURIComponent(email.subject)+'&body='+encodeURIComponent(email.body);}
return mailto;});};return ns;};PLY.App.Module.factory('PLY.Models.EmailTemplateModel',["PLY.Models","$http",ns.emailTemplateModelFactory]);})(PLY.Models.EmailTemplateModel);;namespace("PLY.Models.EmailDraftModel").extend(PLY.Models);(function(ns){ns.emailDraftModelFactory=function(parent,$http){ns.EmailDraft=function(data){var _self=this;var _publicAttributes=['id','from_email','profile_id','profile_name','to_email','subject','body'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getEmailDraft=function(emailDraftId){var url='/v1/emailDrafts/'+emailDraftId;return $http({url:url,method:'GET'}).then(function(response){var p;if(response&&response.data){p=new ns.EmailDraft(response.data);}
return p;});};ns.getEmailDraftFor=function(profileId){var url='/v1/emailDrafts/for/'+profileId;return $http({url:url,method:'GET'}).then(function(response){var p;if(response&&response.data){p=new ns.EmailDraft(response.data);}
return p;},function(errorResponse){return null;});};ns.createEmailDraft=function(emailDraft){var url='/v1/emailDrafts';return $http.post(url,emailDraft).then(function(response){if(response&&response.data){emailDraft.update(response.data);return true;}
return false;});};ns.updateEmailDraft=function(emailDraft){var url='/v1/emailDrafts/'+emailDraft.id;return $http.put(url,emailDraft).then(function(response){if(response&&response.data){emailDraft.update(response.data);return true;}
return false;});};ns.deleteEmailDraft=function(emailDraft){var url='/v1/emailDrafts/'+emailDraft.id;return $http["delete"](url).then(function(response){return true;});};return ns;};PLY.App.Module.factory('PLY.Models.EmailDraftModel',["PLY.Models","$http",ns.emailDraftModelFactory]);})(PLY.Models.EmailDraftModel);;namespace("PLY.Models.DomainEmailSettingsModel").extend(PLY.Models);(function(ns){ns.domainEmailSettingsModelFactory=function(parent,$http){ns.DomainEmailSettings=function(data){var _self=this;var _publicAttributes=['id','provider','domains','imap_username','imap_host','imap_port','imap_socket_type','smtp_username','smtp_host','smtp_port','smtp_socket_type'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getDomainEmailSettings=function(domain){var url='/v1/domainEmailSettings/'+domain;return $http({url:url,method:'GET'}).then(function(response){if(response&&response.data){return new ns.DomainEmailSettings(response.data);}
return null;},function(errorResponse){return null;});};return ns;};PLY.App.Module.factory('PLY.Models.DomainEmailSettingsModel',["PLY.Models","$http",ns.domainEmailSettingsModelFactory]);})(PLY.Models.DomainEmailSettingsModel);;namespace("PLY.Models.UserEmailAccountModel").extend(PLY.Models);(function(ns){ns.userEmailAccountModelFactory=function(parent,$http){ns.UserEmailAccount=function(data){var _self=this;var _publicAttributes=['id','email','from_name','imap_username','imap_password','imap_host','imap_port','smtp_username','smtp_password','smtp_host','smtp_port','create_time','update_time'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getUserEmailAccountData=function(userEmailAccountId){var url='/v1/userEmailAccounts/'+userEmailAccountId;return $http({url:url,method:'GET',cache:ns.getHTTPCache()}).then(function(response){return response&&response.data;});};ns.getUserEmailAccount=function(userEmailAccountId){return ns.getUserEmailAccountData(userEmailAccountId).then(function(data){var p;if(data){p=new ns.UserEmailAccount(data);}
return p;});};ns.getUserEmailAccounts=function(){var url='/v1/userEmailAccounts';return $http({url:url,method:'GET',cache:ns.getHTTPCache()}).then(function(response){if(response&&response.data){response.data=response.data.map(function(data){return new ns.UserEmailAccount(data);});return response.data;}else{throw Error("UserEmailAccount.getUserEmailAccounts: Malformed Response returned");}});};ns.createUserEmailAccount=function(userEmailAccount){var url='/v1/userEmailAccounts';return $http.post(url,userEmailAccount).then(function(response){if(response&&response.data){userEmailAccount.update(response.data);return true;}
return false;});};ns.updateUserEmailAccount=function(userEmailAccount){var url='/v1/userEmailAccounts/'+userEmailAccount.id;return $http.put(url,userEmailAccount).then(function(response){if(response&&response.data){userEmailAccount.update(response.data);return true;}
return false;});};ns.deleteUserEmailAccount=function(userEmailAccount){var url='/v1/userEmailAccounts/'+userEmailAccount.id;return $http["delete"](url).then(function(response){return true;});};return ns;};PLY.App.Module.factory('PLY.Models.UserEmailAccountModel',["PLY.Models","$http",ns.userEmailAccountModelFactory]);})(PLY.Models.UserEmailAccountModel);;namespace("PLY.Models.TeamAccountModel").extend(PLY.Models);(function(ns){ns.teamAccountModelFactory=function(parent,$q,$http,ProductModel){ns.DEFAULT_MAX_SEATS=5;ns.TeamAccount=function(data){var _self=this;var _publicAttributes=['id','user_id','user_name','order','order_id','trial_time','trial_credits_expire_time','subscribe_time','end_time','is_ended','is_active','is_disabled','pooled_credits_enabled','master_credits_enabled','pooled_credits','create_time','update_time','current_period_start_time','current_period_end_time','seats','products','pending_details','discount','seats_left','can_renew_enterprise_team','enterprise_pid_purchase_price','enterprise_seat_pid_purchase_price','sso_data'];this.listeners={};this.DEFAULT_MAX_SEATS=ns.DEFAULT_MAX_SEATS;this.registerListener=function(type,callback){this.listeners[type]=this.listeners[type]||[callback];};this.getSeatsDistribution=function(){var seatsDistribution={};_self.seats.forEach(function(seat){if(!seatsDistribution[seat.product_id]){seatsDistribution[seat.product_id]={product:seat.product,count:0,userIds:[]};}
seatsDistribution[seat.product_id].count++;seatsDistribution[seat.product_id].userIds.push(seat.user_id);});return seatsDistribution;};this.getPendingLineItemsInfo=function(){var lineItemsDict={};var lineItemsTotal=0;this.seats.forEach(function(seat){var product=seat.newProduct||seat.product;if(!lineItemsDict[product.id]){lineItemsDict[product.id]={quantity:1,product:product};}else{lineItemsDict[product.id].quantity++;}
lineItemsTotal+=product.cost/100;});var lineItems=Object.keys(lineItemsDict).map(function(pid){return lineItemsDict[pid];});return{items:lineItems,total:lineItemsTotal};};this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));_self.isStarted=Boolean(_self.subscribeTime||_self.trialTime);_self.isTrialing=Boolean(!_self.subscribeTime&&_self.trialTime);_self.isTrialCreditsExpired=_self.isTrialing&&new Date().toISOString()>_self.trialCreditsExpireTime;_self.assignedSeatCount=_self.seats.reduce(function(count,seat){return count+(seat.user_email?1:0);},0);if(data.maxSeats!==undefined){_self.maxSeats=data.maxSeats;}else{_self.maxSeats=this.DEFAULT_MAX_SEATS;}
if(_self.seatsLeft&&(_self.seatsLeft==='inf'||_self.seatsLeft===Infinity||data.seatsLeft==='inf'||data.seatsLeft===Infinity)){_self.seatsLeft=Infinity;_self.maxSeats=null;}else if(!_self.seatsLeft){_self.seatsLeft=this.DEFAULT_MAX_SEATS;}
if(_self.products){for(var pid in _self.products){if(_self.products.hasOwnProperty(pid)){_self.products[pid]=new ProductModel.Product(_self.products[pid]);}}}
if(_self.seats){_self.seats.forEach(function(seat){if(seat.product_id){seat.product=_self.products[seat.product_id];}
for(var operationType in seat.credit_usage){if(seat.credit_usage.hasOwnProperty(operationType)){if(seat.credit_usage[operationType]['issued']==='inf'){seat.credit_usage[operationType]['issued']=Infinity;}}}});_self.seatsDistribution=_self.getSeatsDistribution();if(_self.seats.length){_self.isEnterprise=_self.seats[0].product.isEnterprise;}}
if(_self.ssoData){_self.ssoData=PLY.Utils.convertObjectKeys.snakeToCamel(_self.ssoData);}
for(var operationType in _self.pooledCredits){if(_self.pooledCredits.hasOwnProperty(operationType)){['issued','remaining'].forEach(function(attr){if(_self.pooledCredits[operationType][attr]==='inf'){_self.pooledCredits[operationType][attr]=Infinity;}});}}
if(this.listeners['onUpdate']&&this.listeners['onUpdate'].length){this.listeners['onUpdate'].forEach(function(listenerCB){listenerCB(this);});}
return this;};Object.defineProperty(this,"hasPooledOverages",{get:function get(){if(!this.pooledCredits){return false;}
for(var operationType in this.pooledCredits){if(this.pooledCredits.hasOwnProperty(operationType)&&this.pooledCredits[operationType].overages_used){return true;}}
return false;}});this.initSeats=function(owner,productId,quantity){for(var i=0;i<(quantity||1);i++){var seat={product_id:productId,product_name:'',user_id:null,user_name:null,user_email:null,is_owner:false,is_unsaved:true};if(!this.seats.length){seat.is_owner=true;seat.user_id=owner.id;seat.user_name=owner.displayName;seat.user_email=owner.email;if(!seat.product_id){seat.product_id=owner.product&&owner.product.id;}}
this.seats.push(seat);}};Object.defineProperty(this,"owner",{get:function get(){ownerSeats=this.seats.filter(function(seat){return seat.is_owner;});return ownerSeats.length?ownerSeats[0]:null;}});this.addSeats=function(productIdQuantities,options){return ns.addSeats(this,productIdQuantities,options);};this.inviteUsers=function(invites,options){return ns.inviteUsers(this,invites,options);};this.update(data);this.isIndividualPlan=function(){return this.seats.length<=1;};};ns.createTeamAccount=function(teamAccount,shouldTrial){shouldTrial=shouldTrial||false;var data={seats:teamAccount.seats};if(teamAccount.discount){data.discount=teamAccount.discount;}
if(teamAccount.pooledCreditsEnabled){data.pooled_credits_enabled=teamAccount.pooledCreditsEnabled;}
if(teamAccount.masterCreditsEnabled){data.master_credits_enabled=teamAccount.masterCreditsEnabled;}
if(teamAccount.trial||shouldTrial){data.trial=teamAccount.trial;data.trial_credits=teamAccount.trialCredits;data.trial_end_date=teamAccount.trialEndDate;}
if(teamAccount.autoCreateOwner){data.auto_create_owner=teamAccount.autoCreateOwner;}
if(teamAccount.autoAcceptInvites){data.auto_accept_invites=teamAccount.autoAcceptInvites;}
if(teamAccount.autoValidateMembers){data.auto_validate_members=teamAccount.autoValidateMembers;}
if(teamAccount.teamMigration){data.team_migration=teamAccount.teamMigration;}
return $http({url:'/v1/teamAccount/',method:'PUT',data:data}).then(function(response){var ta;if(response&&response.data){ta=new ns.TeamAccount(response.data);}
return ta;});};ns.updateTeamAccount=function(teamAccountId,data){return $http({url:'/v1/teamAccount/'+teamAccountId,method:'POST',data:data}).then(function(response){var ta;if(response&&response.data){ta=new ns.TeamAccount(response.data);}
return ta;});};ns.orderTeamAccount=function(teamAccountId,options){var data={};if(options){data.options=options;}
return $http({url:'/v1/teamAccount/'+teamAccountId+'/order',method:'POST',data:data}).then(function(response){var ta;if(response&&response.data){ta=new ns.TeamAccount(response.data);}
return ta;});};ns.getUserTeamAccount=function(){return $http({url:'/v1/user/teamAccount/',method:'GET'}).then(function(response){var ta;if(response&&response.data){ta=new ns.TeamAccount(response.data);}
return ta;});};ns.getTeamAccount=function(teamAccountId){return $http({url:'/v1/teamAccount/'+teamAccountId,method:'GET'}).then(function(response){var ta;if(response&&response.data){ta=new ns.TeamAccount(response.data);}
return ta;});};ns.inviteUsers=function(teamAccount,invites,options){var data={invites:invites};if(options){data.options=options;}
return $http({url:'/v1/teamAccount/'+teamAccount.id+'/invite',method:'PUT',data:data}).then(function(response){teamAccount.update(response.data);return teamAccount;});};ns.resendInvites=function(teamAccount,userEmails){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/invite',method:'POST',data:{user_emails:userEmails,resend:true}}).then(function(response){teamAccount.update(response.data);});};ns.unassignSeats=function(teamAccount,userEmails){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/unassignSeat',method:'POST',data:{user_emails:userEmails}}).then(function(response){teamAccount.update(response.data);});};ns.reassignOwner=function(teamAccount,userId){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/reassignOwner',method:'POST',data:{user_id:userId}}).then(function(response){teamAccount.update(response.data);});};ns.assignAdmin=function(teamAccount,userId){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/assignAdmin',method:'POST',data:{user_id:userId}}).then(function(response){teamAccount.update(response.data);});};ns.unassignAdmin=function(teamAccount,userId){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/unassignAdmin',method:'POST',data:{user_id:userId}}).then(function(response){teamAccount.update(response.data);});};ns.addSeats=function(teamAccount,productIdQuantities,options){var data={product_id_quantities:productIdQuantities};if(options){data.options=options;}
return $http({url:'/v1/teamAccount/'+teamAccount.id+'/addSeats',method:'POST',data:data}).then(function(response){return teamAccount.update(response.data);});};ns.changeSeats=function(teamAccount,seatChanges){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/changeSeats',method:'POST',data:{seatChanges:seatChanges}}).then(function(response){var _response$data,_response$data$errors;if(response.data&&response.data.teamAccount){teamAccount.update(response.data.teamAccount);return teamAccount;}
if((_response$data=response.data)!==null&&_response$data!==void 0&&(_response$data$errors=_response$data.errors)!==null&&_response$data$errors!==void 0&&_response$data$errors.length){throw{data:{error:'Could not change '+response.data.errors.length+' seat(s). Errors: ['+response.data.errors.map(function(seat){return'"'+seat.error+'"';}).join(', ')+']'}};}});};ns.resetSeats=function(teamAccount,productId,quantity){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/resetSeats',method:'POST',data:{productId:productId,quantity:quantity}}).then(function(response){var _response$data2,_response$data2$error;if(response.data&&response.data.teamAccount){teamAccount.update(response.data.teamAccount);return teamAccount;}
if((_response$data2=response.data)!==null&&_response$data2!==void 0&&(_response$data2$error=_response$data2.errors)!==null&&_response$data2$error!==void 0&&_response$data2$error.length){throw{data:{error:'Could not change '+response.data.errors.length+' seat(s). Errors: ['+response.data.errors.map(function(seat){return'"'+seat.error+'"';}).join(', ')+']'}};}});};ns.addMasterCredits=function(teamAccount,quantity,options){var data={quantity:quantity};if(options){data.options=options;}
return $http({url:'/v1/teamAccount/'+teamAccount.id+'/addMasterCredits',method:'POST',data:data}).then(function(response){return teamAccount.update(response.data);});};ns.acceptInvite=function(teamAccountId,userEmails){var data={'accept':true};if(userEmails){data['user_emails']=userEmails;}
return $http({url:'/v1/teamAccount/'+teamAccountId+'/invite',method:'POST',data:data}).then(function(response){var ta;if(response&&response.data){ta=new ns.TeamAccount(response.data);}
return ta;});};ns.declineInvite=function(teamAccountId,userEmail){var data={'accept':false};if(userEmail){data['user_email']=userEmail;}
return $http({url:'/v1/teamAccount/'+teamAccountId+'/invite',method:'POST',data:data}).then(function(response){return response.data;});};ns.declineInvite=function(teamAccountId,userEmail){var data={'accept':false};if(userEmail){data['user_email']=userEmail;}
return $http({url:'/v1/teamAccount/'+teamAccountId+'/invite',method:'POST',data:data}).then(function(response){return response.data;});};ns.leaveTeamAccount=function(teamAccount){return $http({url:'/v1/teamAccount/'+teamAccount.id+'/leave',method:'POST'}).then(function(response){return response.data;});};ns.cancelTeamAccount=function(teamAccount){return $http({url:'/v1/teamAccount/'+teamAccount.id,method:'DELETE'}).then(function(response){return response.data;});};ns.getOrCreateTeamAccount=function(user,shouldTrial){var allowFreeUser=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var teamAccountDeferred=$q.defer();ns.getUserTeamAccount().then(function(teamAccount){teamAccountDeferred.resolve(teamAccount);})["catch"](function(err){if(err.data&&err.data.status===404){if(allowFreeUser||user.isPayingUser){var teamAccount=new ns.TeamAccount({seats:[]});teamAccount.initSeats(user);ns.createTeamAccount(teamAccount,shouldTrial).then(function(teamAccount){teamAccountDeferred.resolve(teamAccount);})["catch"](function(err){teamAccountDeferred.reject(err);});}else{teamAccountDeferred.reject('Team account cannot be created for free accounts');}}else{teamAccountDeferred.reject(err);}});return teamAccountDeferred.promise;};return ns;};PLY.App.Module.factory('PLY.Models.TeamAccountModel',["PLY.Models","$q","$http","PLY.Models.ProductModel",ns.teamAccountModelFactory]);})(PLY.Models.TeamAccountModel);;namespace("PLY.Models.EnterpriseSeatProductModel").extend(PLY.Models);(function(ns){ns.enterpriseSeatProductModelFactory=function(parent,$http,$q){ns.EnterpriseSeatProduct=function(data){var _self=this;var _publicAttributes=['id','name','purchase_price'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.getEnterpriseSeatProduct=function(enterpriseSeatProductId){return $http({url:"/v1/enterpriseSeatProduct/".concat(enterpriseSeatProductId),method:'GET',cache:ns.getHTTPCache()}).then(function(response){var data=response&&response.data;var p;if(data){p=new ns.EnterpriseSeatProduct(data);}
return p;});};ns.getEnterpriseSeatProducts=function(enterpriseSeatProductIds){var url='/v1/enterpriseSeatProduct';var params={};if(typeof enterpriseSeatProductIds!=='undefined'&&enterpriseSeatProductIds!==null){params['pids']=enterpriseSeatProductIds.join(',');}
return $http({url:url,method:'GET',params:params,cache:ns.getHTTPCache()}).then(function(response){if(response&&Array.isArray(response.data)){return response.data.map(function(p){return new ns.EnterpriseSeatProduct(p);});}
return[];});};return ns;};PLY.App.Module.factory('PLY.Models.EnterpriseSeatProductModel',["PLY.Models","$http","$q",ns.enterpriseSeatProductModelFactory]);})(PLY.Models.EnterpriseSeatProductModel);;namespace("PLY.Models.CandidateSearchModel").extend(PLY.Models);(function(ns){ns.candidateSearchModelFactory=function(parent,profileModel,$http,$log){ns.TO_TAG_TYPE={'keywords':'keywords','keyword':'keywords','locations':'location','industries':'industry','current_titles':'current_title','current_employers':'current_employer'};ns.CandidateSearch=function(data){var _self=this;var _={};["tags","selectedProfiles","selectedProfileIds","activeJobs","reachGoal"].forEach(ns.declareProtectedAttribute.bind(_self,_));var _publicAttributes=["id","name"];this.update=function(data){data=data||{};_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));_.tags=[];_.inputs=data.inputs;for(var incexc in _.inputs||{}){for(var type in _.inputs[incexc]){var keyWordArray=angular.isArray(_.inputs[incexc][type])?_.inputs[incexc][type]:angular.isArray(_.inputs[incexc][type]["keywords"])?_.inputs[incexc][type]["keywords"]:[];if(keyWordArray&&keyWordArray.length){for(var i=0;i<keyWordArray.length;i++){var tag={"incexc":incexc,"type":type in ns.TO_TAG_TYPE?ns.TO_TAG_TYPE[type]:type,"keyword":keyWordArray[i]};if(_.inputs[incexc][type].id){tag.id=_.inputs[incexc][type].id;}
_.tags.push(tag);}}}}
_.selectedProfileIds=data.selected_profile_ids||[];_.selectedProfiles=undefined;_.reachGoal=data.reach_goal||(data.selected_profile_ids&&data.selected_profile_ids.length?data.selected_profile_ids.length:0);_.activeJobs=[];if(angular.isArray(data.active_jobs)&&data.active_jobs.length){_.activeJobs=data.active_jobs.map(function(job_dict){return job_dict;});}};this.getJobInQueue=function(){if(_.activeJobs){for(j in _.activeJobs){var job=_.activeJobs[j];var current_stage=job.stage_data&&job.stage_data.stages&&job.stage_data.stages[job.stage_data.current_stage];if(current_stage&&/^queued$|^processed$/i.test(current_stage.state)){return job;}}}};var pushToBackend=function(dataBlob){dataBlob=dataBlob||{};var url="/v1/user/ANONYMOUS/activeSearch";if(this.id){dataBlob.id=this.id;url="/v1/profileSearch/"+this.id;}
return $http.put(url,dataBlob).then(function(){return _self;});}.bind(_self);this.setSelectedProfiles=function(selectedPeople){if(!_.isActive){$log.error("Cannot select Profiles for inactive search session");return ns.simulateError("Cannot select Profiles for inactive search session");}
if(selectedPeople){_.selectedProfiles.splice(0,_.selectedProfiles.length);_.selectedProfiles=_.selectedProfiles.concat(selectedPeople);var pids=[];for(var i=0;selectedPeople&&i<selectedPeople.length;i++){if(selectedPeople[i].id){pids.push(selectedPeople[i].id);}}
return pushToBackend({selected_profile_ids:pids});}};this.fetchSelectedProfiles=function(){_.selectedProfileIds=_.selectedProfileIds||[];return profileModel.getProfiles(_.selectedProfileIds).then(function(profileArray){_.selectedProfiles=profileArray;return profileArray;});};this.markActive=function(){_.isActive=true;};this.markInActive=function(){_.isActive=false;};this.setTags=function(tags){if(tags){_.tags=tags;}else{$log.error("Cant pass falsy value, argument must be an array");}};this.setReachGoal=function(goal){if(goal>=0&&goal<=1000){_.reachGoal=goal;return pushToBackend({reach_goal:goal});}else{return ns.simulateError("Goal needs to be between 0 and 1000");}};this.pushName=function(){return pushToBackend({'name':_self.name&&_self.name.length>0?_self.name:"Contact List"});};this.triggerNewJob=function(token){return $http.post("v1/services/triggerJobForSearch",token?{payment_data:token}:undefined).then(function(jobData){if(jobData&&jobData.data){this.activeJobs.push(jobData.data);return jobData.data;}}.bind(this));};this.update(data);};return ns;};PLY.App.Module.factory('PLY.Models.CandidateSearchModel',["PLY.Models","PLY.Models.ProfileModel","$http","$log",ns.candidateSearchModelFactory]);})(PLY.Models.CandidateSearchModel);;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
namespace("PLY.Models.TestimonialModel").extend(PLY.Models);(function(ns){ns.TestimonialModelFactory=function(userModel,$cookies,$http,$q){var constructTestimonialFromResponse=function constructTestimonialFromResponse(response){var _constructTestimonialFromData=function _constructTestimonialFromData(data){if(Object.keys(data).length){return new ns.Testimonial(data);}else{return null;}};if(response&&response.data){var data=response.data;if(data&&!data.error){if(data.results&&Array.isArray(data.results)){return _objectSpread(_objectSpread({},data),{},{results:data.results.map(function(data){return _constructTestimonialFromData(data);})});}else{return _constructTestimonialFromData(data);}}else if(data.error){throw new Error(data.error);}else{throw new Error('An unknown error occurred');}}else{throw new Error('Malformed response from Testimonial Web Service');}};ns.Testimonial=function(data){var _this=this;var PUBLIC_ATTRS=['id','user_id','name','company','company_name','company_role','company_site','testimonial_type','comment','tagline','profile_url','score','body','status','status_name','award_credits_issued','create_time'];this.init=function(data){_this.update(data);};this.update=function(data){PUBLIC_ATTRS.forEach(function(att){_this[att.replace(/_([^_]{0,1})/g,function(m,m1){return m1.toUpperCase();})]=data[att]||null;});if(_this.score===null){_this.score=0;}};Object.defineProperty(this,'statusDisplayName',{get:function get(){return ns.getStatusDisplayName(_this.status);}});Object.defineProperty(this,'bodyLengthWarning',{get:function get(){var charCount=_this.body.length;if(charCount>=600){return'Too long';}else if(charCount>=500&&charCount<600){return'Very high';}else if(charCount>=450&&charCount<500){return'High';}else if(charCount>=100&&charCount<450){return false;}else if(charCount<100){return'Too short';}}});this.init(data);};ns.getStatusDisplayName=function(status){return status.replace(/^([a-z])/,function(m,m1){return m1.toUpperCase();}).replace(/_([a-z])/g,function(m,m1){return' '+m1.toUpperCase();});};ns.getTestimonialCounts=function(options){return $http({url:'v2/testimonials/count',method:'GET'}).then(function(response){if(response&&response.data&&response.data.counts){return response.data.counts;}else{throw'invalid data shape, could not locate `counts`';}});};ns.getTestimonialsPaginated=function(options){var opts=angular.extend({'filterByStatus':null,'pii':false,'page':1},options);var extraParams={};var canBeQueryParamOptions=['pii','page','filterByStatus'];canBeQueryParamOptions.forEach(function(key){if(opts[key]){extraParams[key]=opts[key];}});return $http({url:PLY.Utils.addQueryParamsToUrl('v2/testimonials',extraParams),method:'GET'}).then(function(data){return constructTestimonialFromResponse(data);});};ns.getTestimonialById=function(id){return $http({url:"/v2/testimonial/".concat(id),method:'GET'}).then(function(data){return constructTestimonialFromResponse(data);});};ns.updateTestimonial=function(formData){return $http({url:"/v2/testimonial/",method:'PUT',headers:{'Content-Type':undefined},data:formData}).then(function(resp){return resp.data;});};ns.updateTestimonialById=function(id,params){return $http({url:"/v2/testimonial/".concat(id),method:'PUT',data:params}).then(function(resp){return resp.data;});};ns.getCurrentUserTestimonial=function(){return $http({url:"/v2/testimonial",method:'GET'}).then(function(data){return constructTestimonialFromResponse(data);});};ns.submitTestimonial=function(formData){formData.append('csrfmiddlewaretoken',$cookies.get('validation_token'));return $http({url:'/v2/testimonials',headers:{'Content-Type':undefined},data:formData,method:'POST'}).then(function(data){return constructTestimonialFromResponse(data);});};return ns;};PLY.App.Module.factory('PLY.Models.TestimonialModel',["PLY.Models.UserModel","$cookies","$http","$q",ns.TestimonialModelFactory]);})(PLY.Models.TestimonialModel);;namespace("PLY.Models.UserEmailMessageEventModel").extend(PLY.Models);(function(ns){ns.userEmailMessageEventModelFactory=function(parent,$http,$httpParamSerializer){ns.EventType={Send:1,Open:2,Click:3,Bounce:4,Reply:5};ns.UserEmailMessageEvent=function(data){var _self=this;var _publicAttributes=['id','message_id','event_time','event_type','event_type_name','event_ip_address','from_email','to_email','email_type','email_categories','template_name','subject'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));};_self.isEventSend=function(){return _self.eventType===ns.EventType.Send;};_self.isEventOpen=function(){return _self.eventType===ns.EventType.Open;};_self.isEventClick=function(){return _self.eventType===ns.EventType.Click;};_self.isEventBounce=function(){return _self.eventType===ns.EventType.Bounce;};_self.isEventReply=function(){return _self.eventType===ns.EventType.Reply;};this.update(data);};ns.getUserEmailMessageEvents=function(userId,page){var url='/v1/userEmailMessageEvents?';var params={};if(userId){params.user_id=userId;}
if(page){params.page=page;}
url+=$httpParamSerializer(params);return $http({url:url,method:'GET'}).then(function(response){if(response&&response.data){response.data.results=response.data.results.map(function(data){return new ns.UserEmailMessageEvent(data);});return response.data;}else{throw Error("UserEmailMessageEventModel.getUserEmailMessageEvents: Malformed Response returned");}});};return ns;};PLY.App.Module.factory('PLY.Models.UserEmailMessageEventModel',["PLY.Models","$http","$httpParamSerializer",ns.userEmailMessageEventModelFactory]);})(PLY.Models.UserEmailMessageEventModel);;namespace("PLY.Filters.JoinFilter");(function(ns){PLY.App.Module.filter('join',[function(){return function(input,delimiter){if(input instanceof Array&&delimiter){return input.join(delimiter);}else{return input;}};}]);})(PLY.Filters.JoinFilter);;namespace("PLY.Filters.ArticleFilter");(function(ns){PLY.App.Module.filter('article',[function(){return function(input,type){if(type==='a'){return'aeiou'.indexOf(input[0].toLowerCase())!==-1?'an '+input:'a '+input;}else{return input;}};}]);})(PLY.Filters.ArticleFilter);;namespace("PLY.Filters.ReplaceFilter");(function(ns){ns.filter=function($filter){return function(input,from,to){input=input||'';from=from||'';to=to||'';return input.replace(new RegExp(from,'g'),to);};};PLY.App.Module.filter('replace',ns.filter);})(PLY.Filters.ReplaceFilter);;namespace("PLY.Filters.PercentFilter");(function(ns){PLY.App.Module.filter('percent',['$filter',function($filter){return function(input,decimals){return $filter('number')(input*100,decimals)+'%';};}]);})(PLY.Filters.PercentFilter);;namespace("PLY.Filters.TimeAgoHumanizedFilter");(function(ns){function humanized_time_span(date,ref_date,date_formats,time_units){date_formats=date_formats||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]};time_units=time_units||[[31556926,'years'],[2629744,'months'],[86400,'days'],[3600,'hours'],[60,'minutes'],[1,'seconds']];if(typeof date==='number'){date=new Date(new Date(date*1000).toJSON());}else if(typeof date==='string'&&/^[a-zA-Z0-9:\-\.]+$/.test(date)){if(!/^.+z|Z$/.test(date)){date+='Z';}
date=new Date(date);}else{date=new Date(date);}
if(isNaN(date.getTime())){return'at an unknown time';}
ref_date=ref_date?new Date(ref_date):new Date();var seconds_difference=(ref_date-date)/1000;var tense='past';if(seconds_difference<0){tense='future';seconds_difference=0-seconds_difference;}
function get_format(){for(var i=0;i<date_formats[tense].length;i++){if(date_formats[tense][i].ceiling==null||seconds_difference<=date_formats[tense][i].ceiling){return date_formats[tense][i];}}
return null;}
function get_time_breakdown(){var seconds=seconds_difference;var breakdown={};for(var i=0;i<time_units.length;i++){var occurences_of_unit=Math.floor(seconds/time_units[i][0]);seconds=seconds-time_units[i][0]*occurences_of_unit;breakdown[time_units[i][1]]=occurences_of_unit;}
return breakdown;}
function render_date(date_format){var breakdown=get_time_breakdown();var time_ago_text=date_format.text.replace(/\$(\w+)/g,function(){return breakdown[arguments[1]];});return depluralize_time_ago_text(time_ago_text,breakdown);}
function depluralize_time_ago_text(time_ago_text,breakdown){for(var i in breakdown){if(breakdown[i]==1){var regexp=new RegExp("\\b"+i+"\\b");time_ago_text=time_ago_text.replace(regexp,function(){return arguments[0].replace(/s\b/g,'');});}}
return time_ago_text;}
return render_date(get_format());}
ns.filter=function($filter){return function(input,template){var timeAgo=humanized_time_span(input);if(template){return template.replace(/%time%/g,timeAgo);}else{return timeAgo;}};};PLY.App.Module.filter('timeAgoHumanized',ns.filter);})(PLY.Filters.TimeAgoHumanizedFilter);;namespace("PLY.Filters.MillifyShorthandFilter");(function(ns){PLY.App.Module.filter('millifyShorthand',[function(){var round=function round(val,decimals){decimals=decimals||1;return Math.round(val*Math.pow(10,decimals))/Math.pow(10,decimals);};return function(input,decimals){var STR_NUM_CONVERSION_TABLE={'k':{description:'thousands',value:Math.pow(10,3)},'m':{description:'millions',value:Math.pow(10,6)},'b':{description:'billions',value:Math.pow(10,9)},'t':{description:'trillions',value:Math.pow(10,12)}};var result=input;if(isNaN(result)){return result;}
Object.keys(STR_NUM_CONVERSION_TABLE).forEach(function(shorthand){var data=STR_NUM_CONVERSION_TABLE[shorthand];if(input>=data.value){result=round(input/data.value,decimals)+shorthand;}});return result;};}]);})(PLY.Filters.MillifyShorthandFilter);;namespace("PLY.Filters.StripHTMLFilter");(function(ns){PLY.App.Module.filter('stripHTML',[function(){return function(text){return angular.element('<div>'+text+'</div>').text();};}]);})(PLY.Filters.StripHTMLFilter);;namespace("PLY.Filters.TitleFilter");(function(ns){PLY.App.Module.filter('title',function(){return function(input){if(!input){return"";}
var smallWords=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;input=input.toLowerCase();return input.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(match,index,title){if(index>0&&index+match.length!==title.length&&match.search(smallWords)>-1&&title.charAt(index-2)!==":"&&(title.charAt(index+match.length)!=='-'||title.charAt(index-1)==='-')&&title.charAt(index-1).search(/[^\s-]/)<0){return match.toLowerCase();}
if(match.substr(1).search(/[A-Z]|\../)>-1){return match;}
return match.charAt(0).toUpperCase()+match.substr(1);});};});})(PLY.Filters.TitleFilter);;namespace("PLY.Services.ProfileLookupPipeline");(function(ns){ns.service=function(analyticsModel,profileListModel,ProductModel,$q,$cookies,$log){var self=this;self.Pipeline=function(user,profile,profileList,modalFunctions,profileAddedCallback){var self=this;self.error=null;var eventCategory=analyticsModel.Category.SEARCH_PAGE;function checkCreditBalance(){if(user.lookupCreditBalance<=0){if(user.hasPastDuePayment){modalFunctions.pastDue(user);return false;}}
return true;}
function select(){profile.selected=true;}
function recordStats(){var event;if(user.isAnonymous()){event=eventCategory.actions.SHOW_CONTACT_BY_ANONYMOUS_USER;}else if(user.isPayingUser){event=eventCategory.actions.SHOW_CONTACT_BY_REGISTERED_PAYING_USER;}else{event=eventCategory.actions.SHOW_CONTACT_BY_REGISTERED_FREE_USER;}
analyticsModel.trackEvent(eventCategory,event);if(user.isAnonymous()&&profile.id==5356){analyticsModel.trackPageView('/virtual/lookup/markCuban',true);}}
function updateCredits(){user.deductCredit();}
function lowBalance(){var userProduct=ProductModel.getUserProduct(user);if(user.lookupCreditBalance==2&&userProduct.lookupLimit>3){return true;}
if(user.lookupCreditBalance==5&&userProduct.lookupLimit>=10){return true;}
if(user.lookupCreditBalance==10&&userProduct.lookupLimit>=50){return true;}
return false;}
function registered(){return user.isRegistered();}
function paidProduct(){if(user.isCurrentlyOnPaidProduct()){modalFunctions.lowLookups(user,true);return false;}
return true;}
function freeProduct(){if(!user.hasInstalledCompanion&&PLY.Utils.isOnDesktop()){modalFunctions.pluginInstall(user);}else{modalFunctions.lowLookups(user);}}
function notEnoughCredits(){if(user.isPayingUser&&user.hasEnabledOverages){modalFunctions.lowLookups(user,true);}else{modalFunctions.lowLookups(user,false);}}
function notVerified(){modalFunctions.verification(user);}
function rateLimited(){}
function exceededQuota(){modalFunctions.exceededQuota(user);}
function pastDue(){modalFunctions.pastDue(user);}
function mustPhoneVerify(){window.location.href="/phone_verify";}
function run(pipeline){for(var i=0;i<pipeline.length;i++){var f=pipeline[i];try{if(f()===false){return false;}}catch(e){$log.error("Profile Search Service failed to run "+f.name+", error: "+e);}}
return true;}
function recordAnalytics(){analyticsModel.trackPageView('/virtual/show_contacts');if(user&&profile){analyticsModel.trackEvent(eventCategory,eventCategory.actions.SHOW_CONTACT,JSON.stringify({"user":{"name":user.displayName,"id":user.id},"profile":{"name":profile.name,"id":profile.id}}));}}
self.preLookup=[checkCreditBalance,select];self.postLookup=[recordStats,updateCredits,lowBalance,registered,paidProduct,freeProduct];self.failedLookup={};self.failedLookup[PLY.Errors.ErrorCode.INSUFFICIENT_CREDITS]=notEnoughCredits;self.failedLookup[PLY.Errors.ErrorCode.VERIFICATION_NEEDED]=notVerified;self.failedLookup[PLY.Errors.ErrorCode.RATE_LIMITED]=rateLimited;self.failedLookup[PLY.Errors.ErrorCode.USAGE_EXCEEDED_QUOTA]=exceededQuota;self.failedLookup[PLY.Errors.ErrorCode.HAS_PAST_DUE_PAYMENT]=pastDue;self.failedLookup[PLY.Errors.ErrorCode.PHONE_VERIFICATION_REQUIRED]=mustPhoneVerify;self.lookup=function(){var plistId=profileList!=null?profileList.id:0;profileListModel.addProfile(plistId,profile.id).then(function(){profileAddedCallback(profile);run(self.postLookup);},function(error){self.error=error;profile.selected=false;if(user.isAnonymous()){modalFunctions.signup();}
var errorCode=error.data.error_code;if(errorCode in self.failedLookup){self.failedLookup[errorCode]();}else{$log.error("Internal error when adding to profile list for user "+user.id+". errorCode="+errorCode);modalFunctions.unknownError(user,error.data.detail);}});};self.execute=function(){if(!run(self.preLookup)){return;}
self.lookup();recordAnalytics();};return self;};};PLY.App.Module.service("ProfileLookupPipeline",["PLY.Models.AnalyticsModel","PLY.Models.ProfileListModel","PLY.Models.ProductModel","$q","$cookies","$log",ns.service]);})(PLY.Services.ProfileLookupPipeline);;namespace("PLY.Services.ModalService");(function(ns){ns.modalService=function($uibModal,$timeout,SearchTagModel,SearchFilterModel){this.showModal=function(options){options=options||{};var size=options.size||"lg";var attrs=angular.extend({},options);if(options.backdrop===undefined){options.backdrop=true;}
var modalInstance=$uibModal.open({template:"<div class=\"modal-template\">\n    <!-- @needs /static/js_es6/controllers/signupFormController.es6 -->\n    <div class=\"modal-header \">\n        <h5 class=\"modal-title\" ng-if=\"heading && heading.length\">{{ heading }}</h5>\n        <span ng-if=\"subHeading && subHeading.length\">{{ subHeading }}</span>\n        <a class=\"modal-close\"\n           aria-label=\"Close\"\n           ng-click=\"cancel();$event.stopPropagation();\"\n           title=\"close\">\n            <span aria-hidden=\"true\">\n                <i class=\"fa fa-times close-button\"></i>\n            </span>\n        </a>\n    </div>\n    <div ng-if=\"!customContent\">\n        <div class=\"modal-body \">\n            <p class=\"callout\" ng-if=\"defaultContent.callout\" ng-bind-html=\"defaultContent.callout\"></p>\n            <p class=\"sub-callout\" ng-if=\"defaultContent.subCallout\" ng-bind-html=\"defaultContent.subCallout\"></p>\n        </div>\n        <div class=\"modal-footer \">\n            <button\n                    type=\"button\"\n                    ng-if=\"defaultContent.buttonText\"\n                    ng-click=\"cancel();$event.stopPropagation();\"\n                    class=\"btn btn-primary\"\n                    ng-bind-html=\"defaultContent.buttonText\">\n            </button>\n        </div>\n    </div>\n    <div ng-if=\"customContent\" class=\" \">\n        <div ng-bind-html=\"customContent\"></div>\n    </div>\n</div>\n",controller:options.controller||function($scope,$uibModalInstance,$attrs,$sce){angular.extend($scope,$attrs);if($scope.customContent){$scope.customContent=$sce.trustAsHtml($scope.customContent);}
$scope.ok=function(){$uibModalInstance.close();};$scope.cancel=function(){$uibModalInstance.dismiss('cancel');};},animation:true,size:size,resolve:{'$attrs':attrs},backdrop:options.backdrop});return modalInstance.result;};this.onBoardingModal=function(options){return this.showModal(angular.extend({controller:function controller($scope,$uibModalInstance,$attrs,$sce){angular.extend($scope,options);if($scope.customContent){$scope.customContent=$sce.trustAsHtml($scope.customContent);}
$scope.ok=function(){$uibModalInstance.close();};$scope.cancel=function(){$uibModalInstance.dismiss('cancel');};$scope.getStatus=function(){return $scope.status||'prompt';};$scope.asyncOk=function(){if($scope.async){$scope.statusMessage=$scope.loadingMessage||'Loading..';$scope.status='loading';$scope.async().then(function(successMsg){$scope.statusMessage=successMsg;$scope.status='success';$timeout(function(){humane.success(successMsg);$uibModalInstance.close();},500);})["catch"](function(errorMsg){$scope.statusMessage=errorMsg;$scope.status='error';humane.error(errorMsg);$uibModalInstance.close();});}else{$scope.ok();}};},template:"<div ng-attr-class=\"modal-template variable-onboarding-modal {{layout}}\">\n    <div class=\"modal-header \">\n        <h5 class=\"modal-title\" ng-if=\"heading && heading.length\">{{ heading }}</h5>\n        <span ng-if=\"subHeading && subHeading.length\">{{ subHeading }}</span>\n        <a class=\"modal-close\"\n           aria-label=\"Close\"\n           ng-click=\"cancel();$event.stopPropagation();\"\n           title=\"close\">\n            <span aria-hidden=\"true\">\n                <i class=\"fa fa-times close-button\"></i>\n            </span>\n        </a>\n    </div>\n    <!-- error -->\n    <div class=\"error\" ng-if=\"getStatus()=='error'\">\n        <div class=\"error-wpr\">\n            <i class=\"fa fa-close\"></i> An error occurred<span ng-if=\"statusMessage\" class=\"error-detail\">: {{statusMessage}}</span>\n         </div>\n    </div>\n    <!-- success -->\n    <div class=\"success\" ng-if=\"getStatus()=='success'\">\n        <div class=\"success-wpr\">\n            <div>\n                <i class=\"fa fa-check fa-success\"></i>\n            </div>\n            <div ng-if=\"statusMessage\">\n                {{statusMessage}}\n            </div>\n        </div>\n    </div>\n    <!-- loading -->\n    <div class=\"loading\" ng-if=\"getStatus()=='loading'\">\n        <div class=\"loading-wpr\">\n            <div>\n                <i class=\"fa fa-circle-o-notch fa-spin\"></i>\n            </div>\n            <div ng-if=\"statusMessage\">\n                {{statusMessage}}\n            </div>\n        </div>\n    </div>\n    <!-- basic layout -->\n    <div ng-if=\"getStatus()=='prompt' && !customContent && layout=='basic'\">\n        <div class=\"modal-body \">\n            <!-- cta text -->\n            <div class=\"cta-wpr\">\n                <p class=\"callout\" ng-if=\"defaultContent.callout\" ng-bind-html=\"defaultContent.callout\"></p>\n                <p class=\"sub-callout\" ng-if=\"defaultContent.subCallout\" ng-bind-html=\"defaultContent.subCallout\"></p>\n            </div>\n            <!-- image -->\n            <div>\n                <img ng-src=\"{{defaultContent.image}}\" ng-class=\"{shadow: defaultContent.imageShadow }\">\n            </div>\n            <!-- cta button -->\n            <div>\n                <!--link version -->\n                <span ng-if=\"!!defaultContent.linkSettings && !!defaultContent.buttonText\">\n                    <a \n                        ng-attr-href=\"{{defaultContent.linkSettings.href}}\" \n                        ng-attr-target=\"{{defaultContent.linkSettings.target}}\"\n                        class=\"btn btn-success btn-lg\"\n                    >\n                        {{defaultContent.buttonText}}\n                    </a>\n                </span>\n                <!-- button version -->\n                <button\n                    type=\"button\"\n                    class=\"btn btn-success btn-lg\"\n                    ng-if=\"!defaultContent.linkSettings && !!defaultContent.buttonText\"\n                    ng-click=\"asyncOk();$event.stopPropagation();\"\n                    ng-bind-html=\"defaultContent.buttonText\">\n                </button>\n            </div>\n            <div ng-if=\"disclaimer\" class=\"section disclaimer\">\n                {{disclaimer}}\n            </div>\n            <!-- cancel section -->\n            <div class=\"section\">\n               <!-- cancel -->\n                <button\n                    type=\"button\"\n                    class=\"btn btn-link\"\n                    ng-click=\"cancel();$event.stopPropagation();\"\n                    ng-bind-html=\"defaultContent.cancelText\">\n                </button>\n            </div>\n        </div>\n    </div>\n     <!-- 2 column -->\n    <div ng-if=\"\"getStatus()=='prompt' && !customContent && layout=='image-right'\">\n        <div class=\"modal-body row\">\n            <!--CTA area -->\n            <div class=\"col-xs-12 col-sm-6 cta-column\">\n                <div class=\"cta-wpr\">\n                    <p class=\"callout\" ng-if=\"defaultContent.callout\" ng-bind-html=\"defaultContent.callout\"></p>\n                    <p class=\"sub-callout\" ng-if=\"defaultContent.subCallout\" ng-bind-html=\"defaultContent.subCallout\"></p>\n                    <!--link version -->\n                    <span ng-if=\"!!defaultContent.linkSettings && !!defaultContent.buttonText\">\n                        <a \n                            ng-attr-href=\"{{defaultContent.linkSettings.href}}\" \n                            ng-attr-target=\"{{defaultContent.linkSettings.target}}\"\n                            class=\"btn btn-success btn-lg\"\n                        >\n                            {{defaultContent.buttonText}}\n                        </a>\n                    </span>\n                    <!-- button version -->\n                    <button\n                        type=\"button\"\n                        ng-if=\"!defaultContent.linkSettings && !!defaultContent.buttonText\"\n                        ng-click=\"asyncOk();$event.stopPropagation();\"\n                        class=\"btn btn-success btn-lg\"\n                        ng-bind-html=\"defaultContent.buttonText\">\n                    </button>\n                    <!-- cancel section -->\n                    <p>\n                        <!-- cancel -->\n                        <button\n                            type=\"button\"\n                            class=\"btn btn-link\"\n                            ng-click=\"cancel();$event.stopPropagation();\"\n                            ng-bind-html=\"defaultContent.cancelText\">\n                        </button>\n                    </p>\n                </div>\n            </div>\n            <!-- image area -->\n            <div class=\"col-xs-12  col-sm-6\">\n                <img ng-src=\"{{defaultContent.image}}\" ng-class=\"{shadow: defaultContent.imageShadow }\">\n            </div>\n        </div>\n    </div>\n    <!-- custom content -->\n    <div ng-if=\"\"getStatus()=='prompt' && customContent\" class=\" \">\n        <div ng-bind-html=\"customContent\"></div>\n    </div>\n</div>\n"},options));};this.alertModal=function(body,heading,opts){opts=angular.extend({buttonText:'OK',theme:'RR2018',size:'md',subHeading:'',subCallout:''},opts);return this.showModal({theme:opts.theme,heading:heading||'',subHeading:opts.subHeading,defaultContent:{callout:body,subCallout:opts.subCallout,buttonText:opts.buttonText},size:opts.size});};this.confirmModal=function(text,subtext,options){if(options===undefined){options={};}
var modalInstance=$uibModal.open({template:"<div class=\"modal-template\">\n    <div class=\"modal-header\">\n        <h5 class=\"modal-title\" ng-if=\"text\" ng-bind-html=\"text\"></h5>\n        <span ng-if=\"subtext\" ng-bind-html=\"subtext\"></span>\n        <a class=\"modal-close\" aria-label=\"Close\" ng-click=\"cancel();\" title=\"close\">\n            <span aria-hidden=\"true\">\n                <i class=\"fa fa-times close-button\"></i>\n            </span>\n        </a>\n    </div>\n    <div class=\"modal-footer\">\n        <p class=\"modal-squelch-input\" ng-if=\"showSquelchOption\">Don't ask again <input type=\"checkbox\" ng-model=\"userInputs.squelch\"></p>\n        <button class=\"btn btn-primary\" ng-click=\"ok();\">{{ okText }}</button>\n        <button class=\"btn btn-default\" ng-click=\"cancel();\">{{ cancelText }}</button>\n    </div>\n</div>\n",controller:function controller($scope,$uibModalInstance,$sce){$scope.text=$sce.trustAsHtml(text);$scope.subtext=$sce.trustAsHtml(subtext);$scope.showSquelchOption=!!options.squelch;$scope.userInputs={squelch:false};$scope.okText=options.okText||'Ok';$scope.cancelText=options.cancelText||'Cancel';$scope.ok=function(){var result=true;if($scope.showSquelchOption){result={squelched:$scope.userInputs.squelch,confirm:true};}
$uibModalInstance.close(result);};$scope.cancel=function(){$uibModalInstance.dismiss(false);};},animation:false,size:'md'});return modalInstance.result;};this.promptModal=function(text,placeholderText,defaultValue,options){if(options===undefined){options={};}
var modalInstance=$uibModal.open({template:"<div class=\"modal-template\">\n    <div class=\"modal-header\">\n        <h5 class=\"modal-title\" ng-if=\"text\" ng-bind-html=\"text\"></h5>\n        <span ng-if=\"subtext\" ng-bind-html=\"subtext\"></span>\n        <a class=\"modal-close\" aria-label=\"Close\" ng-click=\"cancel();\" title=\"close\">\n            <span aria-hidden=\"true\">\n                <i class=\"fa fa-times close-button\"></i>\n            </span>\n        </a>\n    </div>\n    <div class=\"modal-body\">\n        <form ng-submit=\"ok()\">\n            <fieldset>\n                <input type=\"text\"\n                       class=\"form-control\"\n                       ng-model=\"results.value\"\n                       ng-attr-placeholder=\"{{ placeholderText }}\"\n                       ng-if=\"!textarea\"\n                       required/>\n                <textarea class=\"form-control\"\n                          rows=\"4\" cols=\"75\" maxlength=\"512\"\n                          ng-model=\"results.value\"\n                          ng-attr-placeholder=\"{{ placeholderText }}\"\n                          ng-if=\"textarea\"\n                          required>\n                </textarea>\n            </fieldset>\n        </form>\n    </div>\n    <div class=\"modal-footer\">\n        <button class=\"btn btn-primary\" ng-click=\"ok();\">{{ okText }}</button>\n        <button class=\"btn btn-default\" ng-click=\"cancel();\">{{ cancelText }}</button>\n    </div>\n</div>\n",controller:function controller($scope,$uibModalInstance,$sce){$scope.results={value:defaultValue||''};$scope.text=$sce.trustAsHtml(text);$scope.subtext=$sce.trustAsHtml(options.subtext);$scope.placeholderText=$sce.trustAsHtml(placeholderText);if(options&&options.textarea){$scope.textarea=options.textarea;}
$scope.okText=options.okText||'Ok';$scope.cancelText=options.cancelText||'Cancel';$scope.ok=function(){var value=$scope.results.value;if(typeof value=='undefined'){value=null;}else{value=String(value).trim();}
if(value||options.blank){$uibModalInstance.close(value);}};$scope.cancel=function(){$uibModalInstance.dismiss(false);};},animation:true,size:'sm'});return modalInstance.result;};this.showMultiPromptModal=function(promptsStringList,options){var modalInstance=$uibModal.open({template:"<div class=\"modal-template\">\n    <div class=\"modal-header\">\n        <h1 class=\"modal-title\">{{ title || \"Please enter a value below\" }}</h1>\n        <a class=\"modal-close\" ng-click=\"cancel()\" title=\"close\">\n            <i class=\"fa fa-times close-button\"></i>\n        </a>\n    </div>\n    <div class=\"modal-body\">\n        <h3 ng-if=\"description\" ng-bind-html=\"description\"></h3>\n        <form ng-submit=\"ok()\">\n            <div class=\"form-group row\" ng-repeat=\"prompt in promptsList track by $index\">\n                <div ng-switch on=\"prompt.type\">\n                    <div ng-switch-when=\"checkbox\" ng-class=\"{{'multi-modal-'+ prompt.type}}\">\n                        <div class=\"col-sm-3\">\n                            <b>{{ prompt.label }}?</b>\n                        </div>\n                        <div class=\"col-sm-9 switch-container\">\n                            <span class=\"label label-success\" ng-show=\"values[$index]\"><i class=\"fa fa-check\"></i> Yes</span>\n                            <span class=\"label label-danger\" ng-hide=\"values[$index]\"><i class=\"fa fa-times\"></i> No</span>\n                            <span class=\"switch\">\n                                <input ng-attr-id=\"cmn-toggle-{{ $index }}\" class=\"cmn-toggle cmn-toggle-round-flat\" type=\"checkbox\" ng-model=\"values[$index]\">\n                                <label for=\"cmn-toggle-{{ $index }}\"></label>\n                            </span>\n                        </div>\n                    </div>\n                    <div ng-switch-when=\"select\" ng-class=\"{{'multi-modal-'+ prompt.type}}\">\n                        <label class=\"col-sm-3\">{{ prompt.label }}</label>\n                        <div class=\"col-sm-9\">\n                            <select class=\"form-control\" ng-model=\"values[$index]\" ng-options=\"option for option in prompt.options\"></select>\n                        </div>\n                    </div>\n                    <div ng-switch-when=\"textarea\">\n                        <label class=\"col-sm-3\">{{ prompt.label }}</label>\n                        <div class=\"col-sm-9\"><textarea class=\"form-control text\" rows=\"4\" ng-model=\"values[$index]\" placeholder=\"{{ prompt.label }}\"></textarea></div>\n                    </div>\n                    <div class=\"animate-switch\" ng-switch-default>\n                        <label class=\"col-sm-3\">{{ prompt.label }}</label>\n                        <div class=\"col-sm-9\"><input class=\"form-control\" type=\"text\" ng-model=\"values[$index]\" placeholder=\"{{ prompt.label }}\"/></div>\n                    </div>\n                </div>\n            </div>\n        </form>\n        <div class=\"alert alert-warning\" role=\"alert\" ng-if=\"warning\" ng-bind-html=\"warning\"></div>\n    </div>\n    <div class=\"modal-footer\">\n        <button class=\"btn btn-primary\" ng-click=\"ok()\">{{ buttonText }}</button>\n    </div>\n</div>\n",controller:function controller($scope,$uibModalInstance,$sce){$scope.values=[];$scope.promptsList=[];for(var i=0;i<promptsStringList.length;i++){var promptSplit=/(.*)\|([^\^]*)(\^(.*))?/.exec(promptsStringList[i]);if(promptSplit&&promptSplit.length==5){var prompt={type:promptSplit[1],label:promptSplit[2]};if(promptSplit[4]&&promptSplit[4].length){prompt.defaultValue=promptSplit[4];}
if(prompt.type==="select"){var splitOptions=prompt.defaultValue.split(',');prompt.options=[];for(var o=0;o<splitOptions.length;o++){var option=splitOptions[o];if(option[0]==='!'){option=option.slice(1);prompt.defaultValue=option;}
prompt.options.push(option);}}
$scope.promptsList.push(prompt);$scope.values[i]=prompt.defaultValue;if(prompt.type==="checkbox"){$scope.values[i]=false;if(prompt.defaultValue&&prompt.defaultValue.toLowerCase()=="true"){$scope.values[i]=true;}}
if(/checkbox/i.exec(prompt[0])){$scope.values[i]=false;}}else{$scope.values[i]=promptsStringList[i];}}
$scope.title=options.title;$scope.description=options.description;$scope.warning=options.warning;$scope.buttonText=options.buttonText||'Submit';$scope.ok=function(){$uibModalInstance.close($scope.values);};$scope.cancel=function(reason){$uibModalInstance.dismiss(reason);};},animation:true,size:options.size||"lg"});return modalInstance.result;};};PLY.App.Module.service('ModalService',['$uibModal','$timeout','PLY.Models.SearchTagModel','PLY.Models.SearchFilterModel',ns.modalService]);})(PLY.Services.ModalService);;namespace("PLY.Services.ZopimService");(function(ns){window.zESettings=angular.extend(window.zESettings||{},{webWidget:{offset:{vertical:'15px'},contactForm:{attachments:false},zindex:1,launcher:{chatLabel:{'en-US':'Help','*':'Help'}},color:{theme:'#3A589B',launcher:'#3A589B',launcherText:'#FFFFFF',bypassAccessibilityRequirement:true}}});ns.ZopimService=function(userModel,$window,$q){var loadZopimLib=function loadZopimLib(){window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments);},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s;}catch(e){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s;}
o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date(),this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o);},o.write('<body onload="document._l();">'),o.close();}("//assets.zendesk.com/embeddable_framework/main.js","rocketreach.zendesk.com");};ns.showZopim=this.showZopim=function(){if(window.zE){zE.activate();}};ns.hideZopim=this.hideZopim=function(){if(window.zE){zE.hide();}};this.initZopim=function(hideOnLoad){var hideOnLoad=hideOnLoad||false;var deferred=$q.defer();try{angular.element($window).bind('load',function(){userModel.getUserInfo().then(function(user){loadZopimLib();zE(function(){if(user.id){zE.identify({name:user.displayName,email:user.email});zE.setHelpCenterSuggestions({search:window.document.title});if(hideOnLoad){ns.hideZopim();}}else{zE(function(){if(hideOnLoad){ns.hideZopim();}});}
deferred.resolve(zE);});});});}catch(e){console.error(e);}
return deferred.promise;};};PLY.App.Module.service('ZopimService',['PLY.Models.UserModel','$window','$q',ns.ZopimService]);})(PLY.Services.ZopimService);;namespace("PLY.Services.AdaService");(function(ns){ns.AdaService=function(userModel,experimentationModel,productModel){var getUserFieldsForAda=function getUserFieldsForAda(){return userModel.getUserInfo().then(function(user){var product=productModel.getUserProduct(user);return{'RocketReachID':user.id,'FirstName':user.firstName,'LastName':user.lastName,'Email':user.email,'CountryCode':user.countryCode,'UserState':user.state,'IsPayingUser':user.isPayingUser,'ProductName':product.name,'ProductPrice':product.purchasePrice,'ProductSubscriptionDate':user.subscribeTime,'ProductBillingDate':product.nextBillingDate};});};this.toggleAda=function(){adaEmbed.getInfo().then(function(info){adaEmbed.toggle();if(info.isChatOpen||info.hasClosedChat){return;}
getUserFieldsForAda().then(function(userFields){adaEmbed.setMetaFields(userFields);});});};ns.initAda=this.initAda=function(){var tag=document.createElement("script");tag.src="https://static.ada.support/embed2.js";tag.id="__ada";tag.dataset.handle="rocketreach";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);};};PLY.App.Module.service('AdaService',['PLY.Models.UserModel','PLY.Models.ExperimentationModel','PLY.Models.ProductModel',ns.AdaService]);})(PLY.Services.AdaService);;namespace("PLY.Services.RecaptchaService");(function(ns){ns.service=function($q,$http,$log){var siteKeyDeferred=$q.defer();var grecaptchaLoaded=$q.defer();function retrieveSiteKeys(){$http({method:"GET",url:"/v1/recaptchaKeys"}).then(function(response){var siteKey=response.data["score"];if(siteKey===undefined){$log.error('Failed to retrieve site key for reCAPTCHA.');siteKey=response.datpa["default"];}
siteKeyDeferred.resolve(siteKey);},function(error){$log.error(error);});}
function loaded(){grecaptchaLoaded.resolve();}
function loadLibrary(){siteKeyDeferred.promise.then(function(key){if(!window.PLY_Service_RecaptchaV3Service_loaded){window.PLY_Service_RecaptchaV3Service_loaded=loaded;PLY.Utils.createLoader("https://www.google.com/recaptcha/api.js?onload=PLY_Service_RecaptchaV3Service_loaded&render="+key,true,true);}});}
this.init=function(){retrieveSiteKeys();loadLibrary();};this.execute=function(action){var tokenDeferred=$q.defer();action=action||"default";$q.all([siteKeyDeferred.promise,grecaptchaLoaded.promise]).then(function(results){var siteKey=results[0];grecaptcha.ready(function(){grecaptcha.execute(siteKey,{action:action}).then(function(token){tokenDeferred.resolve(token);},function(error){tokenDeferred.reject(error);});});});return tokenDeferred.promise;};};PLY.App.Module.service("RecaptchaService",["$q","$http","$log",ns.service]);})(PLY.Services.RecaptchaService);;var _module=angular.module('PLYApp');namespace("PLY.Services.SpiralyzeService");(function(ns){var service=function service($http){var _this=this;this.registerVariant=function(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var variant=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(typeof variant!=='number'&&typeof name==='number'){var actualName=id;var actualVariant=name;id=null;name=actualName;variant=actualVariant;}
return $http.post('/v1/experiments/spiralyze',{experiment_id:id,experiment_name:name,variant:variant});};this.init=function(){ns.instance=_this;};};_module.service('SpiralyzeService',['$http',service]);})(PLY.Services.SpiralyzeService);;namespace("PLY.Services.ExitService");(function(ns){ns.service=function($window,$q,UserModel,AnalyticsModel){var Tuple=function Tuple(value,label){this.value=value;this.label=label;};var defaultShortDurations=[new Tuple(6,"0s-5s"),new Tuple(11,"5s-10s"),new Tuple(31,"10s-30s"),new Tuple(61,"30s-60s"),new Tuple(Infinity,"60+s")];var defaultLongDurations=[new Tuple(60,"<1m"),new Tuple(600,"1m-10m"),new Tuple(3600,"10m-1h"),new Tuple(Infinity,"1h+")];var defaultIntegers=[new Tuple(1,"0"),new Tuple(2,"1"),new Tuple(4,"2-3"),new Tuple(7,"4-6"),new Tuple(11,"7-10"),new Tuple(Infinity,"10+")];var oneToTenIntegers=[new Tuple(1,0),new Tuple(2,1),new Tuple(3,2),new Tuple(4,3),new Tuple(5,4),new Tuple(6,5),new Tuple(7,6),new Tuple(8,7),new Tuple(9,8),new Tuple(10,9),new Tuple(Infinity,10)];var UnloadEventHandler=function UnloadEventHandler(args){args=args||{};var start=new Date();var category=args.category;var action=args.action||"exit";var durationThresholds=args.durations||defaultLongDurations;var integerThresholds=defaultIntegers;if(category){if(category==="landing"||category.name==="landing"){durationThresholds=defaultShortDurations;integerThresholds=oneToTenIntegers;}}
var calculateLabel=function calculateLabel(value,thresholdArray){if(thresholdArray===undefined||thresholdArray===null){thresholdArray=[];}
for(var i=0;i<thresholdArray.length;i++){if(thresholdArray[i].value>value){return thresholdArray[i].label;}}
return value;};var durationLabel=function durationLabel(start,end){var delta=Math.round((end-start)/1000);return calculateLabel(delta,durationThresholds);};var getThresholdArray=function getThresholdArray(property,value){var thresholdName=property+"Threshold";var thresholds=args[thresholdName];if(thresholds===undefined){if(Number.isInteger(value)){thresholds=integerThresholds;}}
return thresholds;};var aggregateLabels=function aggregateLabels(labels){var newLabels={};for(var property in labels){if(labels.hasOwnProperty(property)){var value=labels[property];var thresholdArray=getThresholdArray(property,value);newLabels[property]=calculateLabel(value,thresholdArray);}}
return newLabels;};var getLabels=function getLabels(){var end=new Date();var duration=durationLabel(start,end);var labels;if(args.labelCallback){labels=args.labelCallback();}else{labels={};}
if(labels){labels.duration=duration;return aggregateLabels(labels);}
return labels;};var execute=function execute(){var labels=getLabels();if(labels){AnalyticsModel.trackRREvent({category:category,action:action,labels:labels});return true;}else{return false;}};var attachToWindow=function attachToWindow(){if(category){$window.onbeforeunload=function(){execute();};return true;}else{return false;}};return{getLabels:getLabels,execute:execute,attach:attachToWindow};};return{tuple:Tuple,create:function create(args){var category=(args||{}).category;var callback=(args||{}).callback;var handler=new UnloadEventHandler({category:category,labelCallback:callback});return handler;}};};PLY.App.Module.service("ExitService",["$window","$q","PLY.Models.UserModel","PLY.Models.AnalyticsModel",ns.service]);})(PLY.Services.ExitService);;namespace("PLY.Services.CrazyEggAnalyticsService");(function(ns){ns.service=function($location,$q){var CRAZY_EGG_SCRIPT_URL='//script.crazyegg.com/pages/scripts/0083/8405.js';var CE_SESSION_KEY='rr_ce_anlytx';var PERSITENCE_EXPIRES_AFTER_X_SECS=60*15;this.SNAPSHOT=false;this.RECORDING=true;var expireStaleSession=function expireStaleSession(){var _removeSession=function _removeSession(){PLY.Utils.sessionStorage(CE_SESSION_KEY,null);};if(PLY.Utils.sessionStorage(CE_SESSION_KEY)){try{var createdUnix=new Date(PLY.Utils.sessionStorage(CE_SESSION_KEY)).getTime();var todayUnix=new Date().getTime();if(isNaN(createdUnix)){_removeSession();}
if((todayUnix-createdUnix)/1000>PERSITENCE_EXPIRES_AFTER_X_SECS){_removeSession();}}catch(e){_removeSession();}}};expireStaleSession();this.hasActiveSession=function(){return PLY.Utils.sessionStorage(CE_SESSION_KEY);};this.init=function(snapshotName,persistent){var deferred=$q.defer();try{if(snapshotName){this.forceSnapshotName(snapshotName);}
if(persistent){PLY.Utils.sessionStorage(CE_SESSION_KEY,new Date());}
if(window.CE2===undefined){var d=document;var script=d.createElement('script');script.type='text/javascript';script.async=true;script.onload=function(){deferred.resolve();};script.onerror=function(e){deferred.reject(e);};script.src=CRAZY_EGG_SCRIPT_URL;d.getElementsByTagName('head')[0].appendChild(script);}}catch(e){deferred.reject(e);}
return deferred.promise;};this.forceSnapshotName=function(snapshotName){if($location.search().ce_snapshot_name||snapshotName){window.CE_SNAPSHOT_NAME=$location.search().ce_snapshot_name?$location.search().ce_snapshot_name:snapshotName;}};this.forceSnapshotName();};PLY.App.Module.service('CrazyEggAnalyticsService',['$location','$q',ns.service]);})(PLY.Services.CrazyEggAnalyticsService);;function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}
function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter);}
function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}
function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}
function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
var _module=angular.module('PLYApp');_module.service('SearchUrlService',['$location','$window','$log',function($location,$window,$log){var _IMPORT_RULES,_this=this;this.URL_TYPES={RISON:'rison',V4:'v4'};var FLAG_TYPES={EXACT:'exact',NOT:'not'};var FILTER_TYPES={TEXT:'text',RANGE:'range'};var IMPORT_RULES=(_IMPORT_RULES={},_defineProperty(_IMPORT_RULES,this.URL_TYPES.RISON,{STRIP_MODIFIERS:[],REMOVE_FILTER_VALUE_IF_HAS_MODIFIER:[],REDUCE_TYPES_TO_SINGLE_ENTRY:[],POST_PROCESS:function POST_PROCESS(univDataShape){if(univDataShape.filters['keyword']){univDataShape.filters['keywords']=univDataShape.filters['keyword'];delete univDataShape.filters['keyword'];}
['link','contact_info'].forEach(function(keywordAlias){if(univDataShape.filters[keywordAlias]){univDataShape.filters['keywords']=univDataShape.filters[keywordAlias];delete univDataShape.filters[keywordAlias];}});if(univDataShape.filters['employer']){univDataShape.filters['current_employer']=univDataShape.filters['current_employer'];delete univDataShape.filters['employer'];}
if(Object.keys(univDataShape.filters).length&&(Object.keys(univDataShape.filters).length>1||!univDataShape.filters['keywords'])){univDataShape.mode='advanced';}}}),_defineProperty(_IMPORT_RULES,this.URL_TYPES.V4,{SUFFIX:{'[]':['current_title','employer','current_employer','previous_employer','geo','major','school','degree','category','tags'],'()':['company_size','company_revenue','employees','company_funding','company_industry','revenue','funding']},STRIP_MODIFIERS:['not','exact'],REMOVE_FILTER_VALUE_IF_HAS_MODIFIER:['not'],REDUCE_TYPES_TO_SINGLE_ENTRY:['range'],POST_PROCESS:function POST_PROCESS(univDataShape){var toRemove=[];var tmpGeo=['city','state','country'].filter(function(filterKey){return!!univDataShape.filters[filterKey];}).map(function(filterKey){toRemove.push(filterKey);return univDataShape.filters[filterKey].data[0].value;}).join(', ').trim();toRemove.forEach(function(filterKey){delete univDataShape.filters[filterKey];});if(univDataShape.filters['current_employer']){univDataShape.filters['employer']=univDataShape.filters['current_employer'];delete univDataShape.filters['current_employer'];}
if(tmpGeo&&!univDataShape.filters['geo']){univDataShape.filters['geo']=angular.merge({},UNIV_DATA_FILTER_TMPL);var filterValue=angular.merge({},UNIV_DATA_FILTER_VALUE_TMPL);filterValue.value=tmpGeo;univDataShape.filters['geo'].data.push(filterValue);}
if(univDataShape.filters['keywords']){univDataShape.filters['keyword']=univDataShape.filters['keywords'];delete univDataShape.filters['keywords'];}}}),_IMPORT_RULES);var UNIV_DATA_FILTER_VALUE_TMPL={modifiers:{},value:null};var UNIV_DATA_FILTER_TMPL={type:FILTER_TYPES.TEXT,data:[]};var UNIV_DATA_SHAPE_TMPL={type:'person',mode:'default',orderBy:'popularity',pageSize:10,start:1,filters:{}};this.translatorFactory=function(self){var _ref;var self=_this;return _ref={},_defineProperty(_ref,_this.URL_TYPES.RISON,{toUniv:self.decodeRisonParamsToUniv,fromUniv:self.encodeUnivToRisonParams}),_defineProperty(_ref,_this.URL_TYPES.V4,{toUniv:self.decodeV4ParamsToUniv,fromUniv:self.encodeUnivToV4Params}),_ref;};var univRangeToFormatStr=function univRangeToFormatStr(univRange,rules){var _defined=function _defined(val){return val!==null&&val!==undefined;};var _format=function _format(ruleFormatStr,_ref2){var _ref3=_slicedToArray(_ref2,2),start=_ref3[0],end=_ref3[1];return ruleFormatStr.replace('{{start}}',start).replace('{{end}}',end);};var _univRange=_slicedToArray(univRange,2),start=_univRange[0],end=_univRange[1];if(!_defined(start)&&_defined(end)){return _format(rules.lt,univRange);}else if(_defined(start)&&_defined(end)){return _format(rules.range,univRange);}else{return _format(rules.gt,univRange);}};var decodeURLToParts=function decodeURLToParts(url){var parser=document.createElement('a');var searchParams={};parser.href=url;var _format=function _format(val){return/^[0-9]+$/.test(val)?parseInt(val):val;};_toConsumableArray(new URLSearchParams(parser.search).entries()).forEach(function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];if(searchParams[key]){if(!Array.isArray(searchParams[key])){searchParams[key]=[searchParams[key]];}
searchParams[key].push(_format(val));}else{searchParams[key]=_format(val);}});return{searchParams:searchParams,fullpathname:parser.pathname,pathname:parser.pathname.replace(/\/$/,'').split('/').pop()};};this.modifyForImportRules=function(univDataShape,type){univDataShape=angular.merge({},univDataShape);var reduceToSingleEntry=IMPORT_RULES[type].REDUCE_TYPES_TO_SINGLE_ENTRY;if(reduceToSingleEntry&&reduceToSingleEntry.length){Object.keys(univDataShape.filters).forEach(function(filterName){var filter=univDataShape.filters[filterName];if(reduceToSingleEntry.indexOf(filter.type)!==-1){if(filter.data&&filter.data.length>1){filter.data=[filter.data[0]];}}});}
var removeFiltersIfHasModifier=IMPORT_RULES[type].REMOVE_FILTER_VALUE_IF_HAS_MODIFIER;if(removeFiltersIfHasModifier&&removeFiltersIfHasModifier.length){Object.keys(univDataShape.filters).forEach(function(filterName){var filter=univDataShape.filters[filterName];removeFiltersIfHasModifier.forEach(function(modifierKey){filter.data=filter.data.filter(function(filterValue){if(Object.keys(filterValue.modifiers).indexOf(modifierKey)!==-1){return false;}else{return true;}});});});}
var stripModifiers=IMPORT_RULES[type].STRIP_MODIFIERS;if(stripModifiers&&stripModifiers.length){Object.keys(univDataShape.filters).forEach(function(filterName){var filter=univDataShape.filters[filterName];stripModifiers.forEach(function(modifierKey){filter.data.forEach(function(filterValue){if(Object.keys(filterValue.modifiers).indexOf(modifierKey)!==-1){delete filterValue.modifiers[modifierKey];}});});});}
if(IMPORT_RULES[type].POST_PROCESS){IMPORT_RULES[type].POST_PROCESS(univDataShape);}
return univDataShape;};this.encodeUnivToRisonParams=function(univDataShape){univDataShape=_this.modifyForImportRules(univDataShape,_this.URL_TYPES.RISON);var _format=function _format(value,type,modifiers){if(type===FILTER_TYPES.RANGE){value=univRangeToFormatStr(value,{lt:'< {{end}}',gt:'{{start}}+',range:'{{start}} - {{end}}'});}
if(Object.keys(modifiers).indexOf(FLAG_TYPES.EXACT)!==-1){value="\"".concat(value,"\"");}
return value;};var params={};['start','pageSize','mode'].forEach(function(key){params[key]=univDataShape[key];});params.tags=[];for(var _i2=0,_Object$entries=Object.entries(univDataShape.filters);_i2<_Object$entries.length;_i2++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i2],2),filterName=_Object$entries$_i[0],filterObj=_Object$entries$_i[1];var _iterator=_createForOfIteratorHelper(filterObj.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var filterValue=_step.value;params.tags.push({type:filterName,incexc:Object.keys(filterValue.modifiers).indexOf(FLAG_TYPES.NOT)!==-1?'exclude':'include',keyword:_format(filterValue.value,filterObj.type,filterValue.modifiers)});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}
return params;};this.decodeRisonParamsToUniv=function(){var url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:$window.location.href;var _decodeURLToParts=decodeURLToParts(url),searchParams=_decodeURLToParts.searchParams;var univObj=angular.merge({},UNIV_DATA_SHAPE_TMPL);try{var _decodeTags=function _decodeTags(tagParam){if(tagParam===''){return[];}
return rison.decode(tagParam);};var _tagPipeline=[function setValue(currFilterValue,legacyTag,currFilter){currFilterValue.value=legacyTag.keyword;},function detectmodifiers(currFilterValue,legacyTag,currFilter){if(legacyTag.incexc&&legacyTag.incexc==='exclude'){currFilterValue.modifiers[FLAG_TYPES.NOT]={value:true};}
var matches=null;if(matches=/^"(.+)"$/.exec(currFilterValue.value)){currFilterValue.modifiers[FLAG_TYPES.EXACT]={value:true};currFilterValue.value=matches[1];}},function dectectRange(currFilterValue,legacyTag,currFilter){var rangePatterns=[{name:'lt',pattern:/^<\s*(\d+)$/,resolve:function resolve(m,m1){return[null,parseInt(m1)];}},{name:'range',pattern:/^(\d+)\s*-\s*(\d+)$/,resolve:function resolve(m,m1,m2){return[parseInt(m1),parseInt(m2)];}},{name:'gt',pattern:/^(\d+)\s*\+$/,resolve:function resolve(m,m1){return[parseInt(m1),null];}}];var matches=null;for(var _i3=0,_rangePatterns=rangePatterns;_i3<_rangePatterns.length;_i3++){var patternObj=_rangePatterns[_i3];if(matches=patternObj.pattern.exec(currFilterValue.value)){currFilter.type=FILTER_TYPES.RANGE;currFilterValue.value=patternObj.resolve.apply(patternObj,_toConsumableArray(matches));break;}}}];univObj.mode=searchParams.mode;univObj.start=searchParams.start;univObj.pageSize=searchParams.page_size;if(searchParams.tags){_decodeTags(searchParams.tags).forEach(function(tag){if(!univObj.filters[tag.type]){univObj.filters[tag.type]=angular.merge({},UNIV_DATA_FILTER_TMPL);}
var univFilter=univObj.filters[tag.type];var univFilterValue=angular.merge({},UNIV_DATA_FILTER_VALUE_TMPL);univFilter.data.push(univFilterValue);_tagPipeline.forEach(function(step){step(univFilterValue,tag,univFilter);});});}}catch(e){$log.error("Error while parsing URL Error:",e,searchParams);}
return univObj;};this.encodeUnivToV4Params=function(univDataShape){univDataShape=_this.modifyForImportRules(univDataShape,_this.URL_TYPES.V4);var _v4FilterNameFormat=function _v4FilterNameFormat(filterName){for(var _i4=0,_Object$entries2=Object.entries(IMPORT_RULES[_this.URL_TYPES.V4].SUFFIX);_i4<_Object$entries2.length;_i4++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i4],2),suffixKey=_Object$entries2$_i[0],filterNamesToApplyTo=_Object$entries2$_i[1];if(filterNamesToApplyTo.indexOf(filterName)!==-1){return"".concat(filterName).concat(suffixKey);}}
return filterName;};var _format=function _format(value,type,modifiers){if(type===FILTER_TYPES.RANGE){value=univRangeToFormatStr(value,{lt:'<{{end}}',gt:'{{start}}<',range:'{{start}}-{{end}}'});}
if(Object.keys(modifiers).indexOf(FLAG_TYPES.EXACT)!==-1){value="\"".concat(value,"\"");}
if(Object.keys(modifiers).indexOf(FLAG_TYPES.NOT)!==-1){value="!".concat(value);}
return value;};var params={};['start','pageSize','orderBy'].forEach(function(key){params[key]=univDataShape[key];});for(var _i5=0,_Object$entries3=Object.entries(univDataShape.filters);_i5<_Object$entries3.length;_i5++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i5],2),filterName=_Object$entries3$_i[0],filterObj=_Object$entries3$_i[1];var _iterator2=_createForOfIteratorHelper(filterObj.data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var filterValue=_step2.value;filterName=_v4FilterNameFormat(filterName);if(params[filterName]!==undefined){if(!Array.isArray(params[filterName])){params[filterName]=[params[filterName]];}
params[filterName].push(_format(filterValue.value,filterObj.type,filterValue.modifiers));}else{params[filterName]=_format(filterValue.value,filterObj.type,filterValue.modifiers);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}
return params;};this.decodeV4ParamsToUniv=function(){var url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:$window.location.href;var _decodeURLToParts2=decodeURLToParts(url),searchParams=_decodeURLToParts2.searchParams,pathname=_decodeURLToParts2.pathname;var univObj=angular.merge({},UNIV_DATA_SHAPE_TMPL);if(pathname==='company'){univObj.type='company';}
var _tagPipeline=[function setValue(currFilterValue,origParamValue,currFilter){currFilterValue.value=origParamValue;},function detectmodifiers(currFilterValue,origParamValue,currFilter){var _modifiersDict;var modifiersDict=(_modifiersDict={},_defineProperty(_modifiersDict,FLAG_TYPES.NOT,{pattern:/^!(.+)$/,resolve:function resolve(currVal,m,m1){currVal.modifiers[FLAG_TYPES.NOT]={value:true};currVal.value=m1;}}),_defineProperty(_modifiersDict,FLAG_TYPES.EXACT,{pattern:/^"(.+)"$/,resolve:function resolve(currVal,m,m1){currVal.modifiers[FLAG_TYPES.EXACT]={value:true};currVal.value=m1;}}),_modifiersDict);Object.keys(modifiersDict).forEach(function(modifierKey){var currModifierObj=modifiersDict[modifierKey];if(currModifierObj.pattern.test(currFilterValue.value)){currModifierObj.resolve.apply(currModifierObj,[currFilterValue].concat(_toConsumableArray(currModifierObj.pattern.exec(currFilterValue.value))));}});},function dectectRange(currFilterValue,origParamValue,currFilter){var rangePatterns=[{name:'lt',pattern:/^<\s*(\d+)$/,resolve:function resolve(m,m1){return[null,parseInt(m1)];}},{name:'range',pattern:/^(\d+)\s*-\s*(\d+)$/,resolve:function resolve(m,m1,m2){return[parseInt(m1),parseInt(m2)];}},{name:'gt',pattern:/^(\d+)\s*<$/,resolve:function resolve(m,m1){return[parseInt(m1),null];}}];var matches=null;for(var _i6=0,_rangePatterns2=rangePatterns;_i6<_rangePatterns2.length;_i6++){var patternObj=_rangePatterns2[_i6];if(matches=patternObj.pattern.exec(currFilterValue.value)){currFilter.type=FILTER_TYPES.RANGE;currFilterValue.value=patternObj.resolve.apply(patternObj,_toConsumableArray(matches));break;}}}];var copyAndDestroy=['start','pageSize','orderBy'];copyAndDestroy.forEach(function(key){if(searchParams[key]!==undefined){univObj[key]=searchParams[key];delete searchParams[key];}});var _process=function _process(key,val){var origParamValue=val;key=key.replace('[]','').replace('()','');if(!univObj.filters[key]){univObj.filters[key]=angular.merge({},UNIV_DATA_FILTER_TMPL);}
var univFilter=univObj.filters[key];var univFilterValue=angular.merge({},UNIV_DATA_FILTER_VALUE_TMPL);univFilter.data.push(univFilterValue);_tagPipeline.forEach(function(step){step(univFilterValue,origParamValue,univFilter);});};Object.keys(searchParams).forEach(function(key){var origParamValue=searchParams[key];if(Array.isArray(origParamValue)){origParamValue.forEach(function(val){_process(key,val);});}else{_process(key,origParamValue);}});return univObj;};this.getSearchURLType=function(){var searchParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:$location.search();if(searchParams.tags){return _this.URL_TYPES.RISON;}else{return _this.URL_TYPES.V4;}};this.resolveParamsTo=function(targetType){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:$window.location.href;var sourceSearchParams=decodeURLToParts(url).searchParams;var determinedType=_this.getSearchURLType(sourceSearchParams);if(!_this.translators[targetType]){throw"target: '".concat(targetType,"' url type is not defined in translators so cannot convert to desired params");}
if(determinedType===targetType){return _this.translators[targetType].fromUniv(_this.translators[targetType].toUniv(url));}else{if(!_this.translators[determinedType]){throw"source: '".concat(determinedType,"' url type is not defined in translators so cannot convert to desired params");}
return _this.translators[targetType].fromUniv(_this.translators[determinedType].toUniv(url));}};var init=function init(){_this.translators=_this.translatorFactory(_this);};init();}]);;namespace("PLY.Services.ProfilePollingService");(function(ns){ns.profilePollingService=function(profileModel,$q,$interval,$rootScope){var _this2=this;var service=this;var intervalPromise=null;var POLL_INTERVAL_MILLIS=4000;var POLL_BACKOFF_THRESHOLD=30000;var POLL_BACKOFF_INTERVAL=5000;var POLL_ASYNC_VALIDATION_INTERVAL=5*60*1000;this.pollingInterval=POLL_INTERVAL_MILLIS;this.lastRanInterval=null;this.totalPollingDuration=0;var pollingLists=[];var pollingDuration=0;var refundSignalEnabled=true;this.PollingList=function(){var _this=this;this.profiles=[];this.assignProfiles=function(profiles){if(Array.isArray(profiles)){_this.profiles=profiles;service.startPolling();}};this.addProfiles=function(profiles){if(Array.isArray(profiles)){_this.profiles=_this.profiles.concat(profiles);service.startPolling();}};};this.registerPollingList=function(pollingList){pollingLists.push(pollingList);return _this2;};this.setInterval=function(interval){interval=Math.max(500,interval);_this2.pollingInterval=interval;_this2.startPolling();return _this2;};this.startPolling=function(){_this2.stopPolling();_this2.lastRanInterval=_this2.pollingInterval;intervalPromise=$interval(_this2.poll,_this2.pollingInterval);return _this2;};this.stopPolling=function(){if(intervalPromise){$interval.cancel(intervalPromise);intervalPromise=null;}
pollingDuration=0;return _this2;};this.setRefundSignalEnabled=function(enabled){refundSignalEnabled=enabled;};var broadcastRefund=function broadcastRefund(count){if(refundSignalEnabled){$rootScope.$broadcast('rr-refund-lookup-credits',count);}};this.shouldAsyncValidationPoll=function(){return Math.floor(_this2.totalPollingDuration/POLL_ASYNC_VALIDATION_INTERVAL)!==Math.max(0,Math.floor((_this2.totalPollingDuration-_this2.lastRanInterval)/POLL_ASYNC_VALIDATION_INTERVAL));};this.poll=function(){pollingDuration+=_this2.pollingInterval;_this2.totalPollingDuration+=_this2.pollingInterval;if(pollingDuration>POLL_BACKOFF_THRESHOLD){var saveInterval=_this2.pollingInterval;_this2.pollingInterval=POLL_BACKOFF_INTERVAL;_this2.startPolling();_this2.pollingInterval=saveInterval;}
var profileIdsObject={};var profileIdsWithAsyncValidationObject={};var refundedCredits=0;pollingLists.forEach(function(pollingList,index){pollingList.profiles.forEach(function(profile){if(profile.id){if(profile.shouldPoll()){profileIdsObject[profile.id]=true;}else if(profile.shouldAsyncValidationPoll()){profileIdsWithAsyncValidationObject[profile.id]=true;}else if(profile.creditSpent===false&&!profile.refunded){profile.refunded=true;refundedCredits++;}else if(profile.lookupComplete()){$rootScope.$broadcast('rr-lookup-complete',profile);}}});});if(refundedCredits){broadcastRefund(refundedCredits);}
var profileIds=[];var asyncValidationProfileIds=[];for(var pid in profileIdsObject){profileIds.push(parseInt(pid));}
for(var _pid in profileIdsWithAsyncValidationObject){asyncValidationProfileIds.push(parseInt(_pid));}
if(profileIds.length==0&&asyncValidationProfileIds.length===0){_this2.stopPolling();return PLY.Utils.promiseOf($q,true);}
if(_this2.shouldAsyncValidationPoll()){profileIds=profileIds.concat(asyncValidationProfileIds);}
return profileModel.getProfileData(profileIds).then(function(profileMap){pollingLists.forEach(function(pollingList){pollingList.profiles.forEach(function(profile){var profileData=profileMap[profile.id];if(profileData){profile.update(profileData);}});});return PLY.Utils.promiseOf($q,true);});};};PLY.App.Module.service('ProfilePollingService',['PLY.Models.ProfileModel','$q','$interval','$rootScope',ns.profilePollingService]);})(PLY.Services.ProfilePollingService);;require("../../scss/RR2018/components/rr-rollover-announcement-modal.scss");var _module=angular.module('PLYApp');_module.service('RolloverAnnouncementModalService',['$uibModal',function($uibModal){this.showModal=function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var modalInstance=$uibModal.open({template:"<div class=\"modal-template rr-rollover-announcement-modal\">\n    <div class=\"rr-rollover-modal modal-cancel\">\n        <a class=\"modal-close\"\n           ng-click=\"cancel();$event.stopPropagation();\"\n           title=\"close\">\n            <i class=\"fa fa-times close-button\"></i>\n        </a>\n    </div>\n    <div class=\"rr-rollover-modal modal-header\">\n        <h4>Congrats, your RocketReach account now has Rollover Lookups!</h4>\n    </div>\n    <div class=\"rr-rollover-modal modal-body\">\n      <img loading=\"lazy\" alt=\"rollover screenshot\"\n        {% image_dimensions \"/static/images/rollover_credits/rollover-modal.svg\" %}\n        src=\"//static.rocketreach.co/images/rollover_credits/rollover-modal.svg\" />\n      <p>Learn more about Rollover Lookups <a href=\"/rollovers\" target=\"_blank\">here</a>.</p>\n    </div>\n    <div class=\"rr-rollover-modal modal-footer\">\n        <button class=\"btn btn-lg btn-pronounced\" ng-click=\"ok()\">Got it </button>\n    </div>\n</div>\n",controller:function controller($scope,$uibModalInstance,$attrs,$sce){angular.extend($scope,$attrs);$scope.ok=function(){$uibModalInstance.close('success');};$scope.cancel=function(){$uibModalInstance.dismiss('cancel');};},animation:true,size:'md',resolve:{$attrs:options}});return modalInstance.result;};}]);;(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/js_dist/";return __webpack_require__(__webpack_require__.s=538);})
({538:(function(module,exports,__webpack_require__){module.exports=__webpack_require__(539);}),539:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _services_feedbackService_es6__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(540);var _services_feedbackService_es6__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_services_feedbackService_es6__WEBPACK_IMPORTED_MODULE_0__);var _directives_feedbackDirective_es6__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(541);}),540:(function(module,exports){function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
namespace('PLY.Services.FeedbackService');(function(ns){ns.service=function($rootScope,experimentationModel,adaService){var _this=this;var FEEDBACK_STORAGE_ID='fdbk_meta';var userAnswers={};var FEEDBACK_QUESTIONS=[{id:'search_results',message:'How are these search results?',negativeReasons:['Phone numbers','Email addresses','Search results','Other'],answerExpiresIn:0},{id:'lookup_accuracy',message:'How is the lookup info accuracy?',negativeReasons:['Emails are bouncing','Contact info is incorrect','Not enough professional / personal info','Phones are incorrect'],answerExpiresIn:0},{id:'company_search',message:'What do you think of our new company search?',animation:true,autoExpand:true,askForHappyFreeformFeedback:true,analyticsCategories:{recievedFeedback:'recieved_feedback_company_search',recievedFeedbackNegativeReasons:'recieved_feedback_negative_reasons_company_search'},theme:'pronounced',negativeReasons:['Inaccurate company data','Missing or incomplete data','Search didn\'t work as expected','Other'],maxInSessionPopUps:1,answerExpiresIn:30}];this.getQuestion=function(id){var found=FEEDBACK_QUESTIONS.filter(function(question){return question.id===id;});var _shuffle=function _shuffle(array){var currentIndex=array.length,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex--;var _ref=[array[randomIndex],array[currentIndex]];array[currentIndex]=_ref[0];array[randomIndex]=_ref[1];}
return array;};if(found[0]){var question=found[0];question.maxInSessionPopUps=question.maxInSessionPopUps||999;question.inSessionPopUps=question.inSessionPopUps||0;var lastOption=question.negativeReasons.pop();_shuffle(question.negativeReasons);question.negativeReasons.push(lastOption);}
return found.length?found[0]:null;};var loadAnswers=function loadAnswers(){var dataStored={};try{dataStored=JSON.parse(PLY.Utils.localStorage(FEEDBACK_STORAGE_ID));if(dataStored===null||dataStored===undefined){dataStored=JSON.parse(PLY.Utils.sessionStorage(FEEDBACK_STORAGE_ID));}}catch(e){}
if(dataStored&&_typeof(dataStored)==='object'){FEEDBACK_QUESTIONS.forEach(function(question){if(dataStored[question.id]!==undefined){userAnswers[question.id]={answeredOn:new Date(Date.parse(dataStored[question.id].answeredOn)||0),answer:dataStored[question.id].answer||'none'};}});}};var answerMissingOrExpired=function answerMissingOrExpired(id){var loadedAnswer=userAnswers[id];var questionObj=_this.getQuestion(id);if(questionObj===undefined||loadedAnswer===undefined||!(loadedAnswer.answeredOn instanceof Date)){return true;}else{var ageMillis=Math.abs(new Date()-loadedAnswer.answeredOn);var ageDays=ageMillis/1000/86400;if(ageDays>questionObj.answerExpiresIn){return true;}else{return false;}}};var markAnswered=function markAnswered(id,answer){userAnswers[id]=userAnswers[id]||{};userAnswers[id].answeredOn=new Date();userAnswers[id].answer=answer||'none';};var saveAnswers=function saveAnswers(){PLY.Utils.localStorage(FEEDBACK_STORAGE_ID,JSON.stringify(userAnswers));};this.init=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};adaService.initAda();loadAnswers();$rootScope.$on('rr-feedback-ready',function(){_this.showWidget(opts);});};this.showWidget=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};$rootScope.$broadcast('rr-feedback-show',opts);};this.hideWidget=function(){$rootScope.$broadcast('rr-feedback-hide');};this.showSmilies=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var question=_this.getQuestion(opts.id);if(question.autoExpand||question.animation){question.inSessionPopUps++;}
if(question.inSessionPopUps>question.maxInSessionPopUps){question.autoExpand=false;question.animation=false;}
if(answerMissingOrExpired(opts.id)){var _onSubmit=function _onSubmit(feedbackStatus,feedbackText){markAnswered(opts.id,feedbackStatus);saveAnswers();if(opts.onSubmit&&typeof opts.onSubmit==='function'){opts.onSubmit(feedbackStatus,feedbackText);}};$rootScope.$broadcast('rr-feedback-show-smilies',angular.merge({},opts,{onSubmit:_onSubmit}));}else{return;}};this.hideSmilies=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};$rootScope.$broadcast('rr-feedback-hide-smilies',opts);};};var module=angular.module('PLYApp');module.service('FeedbackService',['$rootScope','PLY.Models.ExperimentationModel','AdaService',ns.service]);})(PLY.Services.FeedbackService);}),541:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _scss_RR2018_components_rr_feedback_scss__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(542);var _scss_RR2018_components_rr_feedback_scss__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_scss_RR2018_components_rr_feedback_scss__WEBPACK_IMPORTED_MODULE_0__);namespace('PLY.Directives.FeedbackDirective');(function(ns){var $feedbackSection;var CLOSE_SUBMITTED_FORM_AFTER_N_MILLIS=3500;ns.directive=function($rootScope,$timeout,$location,AnalyticsModel,adaService){return{restrict:'E',template:__webpack_require__(543),link:function link($scope,$element,attrs){$feedbackSection=$element.find('.feedback-support-area-feedback-section');$rootScope.$emit('rr-feedback-ready');},controller:function controller($scope){$scope.forms={};$scope.steps={NEGATIVE_REASONS:1,FREEFORM:2,ASK_FOR_REVIEWS:3};$scope.reviewOptions=[{icon:'rr-icon rr-icon-g2crowd',type:'g2crowd',text:'Review us on G2Crowd',href:'https://www.g2.com/products/rocketreach/reviews#reviews'},{icon:'fa fa-chrome',type:'chrome',text:'Review us on Chrome',href:'/browser_extension/reviews'},{icon:'fa fa-check-square',type:'testimonial',text:'Write us a testimonial <span class="reward"><b class="small"><i>+100</i></b> <i class="rr-icon rr-icon-coin"></i></span>',href:'/giveUs5Stars'}];$scope.isTouchDevice=PLY.Utils.isTouchDevice;$scope.visible=false;$scope.$watch('forms.extraForm.text',function(){$scope.feedbackTextMissing=false;});$rootScope.$on('rr-feedback-show',function(e,opts){opts=opts||{};$scope.showWidget(opts&&opts.delay?opts.delay:0);if(opts.showSmilies){$scope.showFeedback(opts);}});$rootScope.$on('rr-feedback-hide',function(){$scope.hideWidget();});$rootScope.$on('rr-feedback-show-smilies',function(e,opts){if($scope.visible){opts=opts||{};$scope.showFeedback(opts);}});$rootScope.$on('rr-feedback-hide-smilies',function(e,opts){if($scope.visible){opts=opts||{};$scope.hideFeedback(opts.animation);}});var onSubmitSuccess=function onSubmitSuccess(){$scope.formSubmitted=true;$timeout(function(){$scope.hideForm();$scope.formSubmitted=false;if($scope.forms.extraForm){$scope.forms.extraForm.text='';}
if($scope.hideOnSubmit){$scope.hideFeedback($scope.withAnimation);}
if($scope.onSubmit){$scope.onSubmit.call(null,$scope.selectedFeedback,$scope.forms.extraForm?$scope.forms.extraForm.text:'');}},CLOSE_SUBMITTED_FORM_AFTER_N_MILLIS);};$scope.showWidget=function(){var delay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;$timeout(function(){$scope.visible=true;},delay);};$scope.expandSmilies=function(){$scope.smiliesExpanded=true;};$scope.collapseSmilies=function(){$scope.smiliesExpanded=false;$scope.hoveringOnSmilies=false;};$scope.hideWidget=function(){$scope.visible=false;};$scope.handleSubmit=function(e){$scope.feedbackTextMissing=false;e.preventDefault();if($scope.selectedFeedback!=='happy'&&!$scope.forms.extraForm.text){$timeout(function(){$scope.feedbackTextMissing=true;});}else if($scope.feedbackId&&$scope.selectedFeedback&&$scope.formActive){var currentDomain=$location.protocol()+'://'+$location.host()+($location.port()?":".concat($location.port()):'');var data={'Feedback Question':"*".concat($scope.feedbackQuestion,"* _[").concat($scope.feedbackId," on  <").concat(window.location.href,"|").concat($location.path()==='/'?'/search':$location.path()," ").concat(PLY.Utils.ENV==='development'?" *".concat(PLY.Utils.ENV):'',">]_"),Response:"\n\n>`".concat({sad:'😡',moderate:'😐',happy:'😍'}[$scope.selectedFeedback]," ").concat($scope.selectedFeedback,"`  *about ").concat($scope.getChosenNegativeReasons()?$scope.getChosenNegativeReasons().join(', '):'',"* --> ").concat($scope.forms.extraForm.text||'',"\n\n"),User:"--".concat($scope.user.displayName,"  ").concat($scope.user.email," (<").concat(currentDomain,"/userAdmin/").concat($scope.user.id,"|").concat($scope.user.id,">)  _[").concat($scope.user.productInfo.name,"]_")};var Category=AnalyticsModel.Category.FEEDBACK;AnalyticsModel.trackEvent(Category.name,$scope.analyticsCategories.recievedFeedback,{type:$scope.selectedFeedback});if($scope.selectedFeedback==='sad'&&$scope.getChosenNegativeReasons()){$scope.getChosenNegativeReasons().forEach(function(reason){AnalyticsModel.trackEvent(Category.name,$scope.analyticsCategories.recievedFeedbackNegativeReasons,{reason:reason});});}
PLY.Utils.r7m8e5("feedback_bubble.".concat($scope.feedbackId),1,data);onSubmitSuccess();}};$scope.handleReviewOptionClick=function(review){if(review){var Category=AnalyticsModel.Category.FEEDBACK;AnalyticsModel.trackEvent(Category.name,Category.actions.ATTEMPTED_TO_REVIEW,{review_type:review.type});AnalyticsModel.trackEvent(Category.name,$scope.analyticsCategories.recievedFeedback,{type:'happy'});onSubmitSuccess();}else{$scope.hideForm();}};$scope.getChosenNegativeReasons=function(){var chosenNegativeReasons=$scope.negativeReasons.filter(function(reason){return reason.checked;}).map(function(reason){return reason.text;});return chosenNegativeReasons.length?chosenNegativeReasons:null;};$scope.handleNegativeReasonsSubmit=function(e){e.preventDefault();e.stopPropagation();$scope.step=$scope.steps.FREEFORM;};$scope.showSupport=function(){adaService.toggleAda();};$scope.updateSmileyMessage=function(message){if(message){$scope.smileyMessage=message;$scope.hoppingSmiley=true;$feedbackSection.css({'pointer-events':'none'});$feedbackSection.tooltip('enable');}else{$scope.hoppingSmiley=false;$feedbackSection.css({'pointer-events':'auto'});$feedbackSection.tooltip('disable');$feedbackSection.tooltip('hide');}};$scope.showForm=function(){$scope.formActive=true;};$scope.hideForm=function(){$scope.formActive=false;$scope.negativeReasons.forEach(function(reason){reason.checked=false;});$scope.collapseSmilies();};$scope.dismissForm=function(){var DIMISSED='dismissed';var Category=AnalyticsModel.Category.FEEDBACK;AnalyticsModel.trackEvent(Category.name,$scope.analyticsCategories.recievedFeedback,{type:DIMISSED});if($scope.onSubmit){$scope.onSubmit(DIMISSED,null);}
$scope.hideForm();$scope.hideFeedback();};$scope.selectFeedback=function(type){$scope.step=null;$scope.selectedFeedback=type;switch($scope.selectedFeedback){case'sad':case'moderate':if($scope.negativeReasons&&$scope.negativeReasons.length){$scope.step=$scope.steps.NEGATIVE_REASONS;}else{$scope.step=$scope.steps.FREEFORM;}
break;case'happy':if($scope.askForHappyFreeformFeedback){$scope.step=$scope.steps.FREEFORM;}else{$scope.step=$scope.steps.ASK_FOR_REVIEWS;}
break;}
$scope.formActive=true;};$scope.toggleNegativeReason=function(reason){reason.checked=!reason.checked;};$scope.showFeedback=function(opts){if(opts.id===$scope.feedbackId){return;}
opts=angular.merge({id:'general',message:'How are we doing?',animation:false,autoExpand:false,hideOnSubmit:true,negativeReasons:[],negativeMessage:'What was wrong with your experience?',analyticsCategories:{recievedFeedback:'recieved_feedback',recievedFeedbackNegativeReasons:'recieved_feedback_negative_reasons'},onSubmit:function onSubmit(answer,text){}},opts);$scope.feedbackQuestion=opts.message;$scope.negativeReasons=opts.negativeReasons.map(function(reason){return{text:reason,checked:false};});$scope.hideForm();$scope.feedbackId=opts.id;$scope.hideOnSubmit=opts.hideOnSubmit;$scope.onSubmit=opts.onSubmit;$scope.withAnimation=opts.animation;$scope.autoExpand=opts.autoExpand;$scope.themeClass="theme-".concat(opts.theme||'default');$scope.analyticsCategories=opts.analyticsCategories;$scope.askForHappyFreeformFeedback=opts.askForHappyFreeformFeedback;$scope.negativeMessage=opts.negativeMessage;$scope.feedbackVisible=true;if(opts.animation&&!opts.autoExpand){$timeout(function(){$scope.updateSmileyMessage(opts.message);$timeout(function(){$scope.updateSmileyMessage('Let us know!');$scope.expandSmilies();$timeout(function(){$scope.updateSmileyMessage(false);$scope.collapseSmilies();},1000);},2000);},1500);}
if(opts.autoExpand){$timeout(function(){$scope.formActive=true;},1000);}};$scope.hideFeedback=function(){var withAnimation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var _hideFeedback=function _hideFeedback(){$scope.feedbackVisible=false;};if(withAnimation){$timeout(function(){$scope.updateSmileyMessage('See ya around!');$timeout(function(){$scope.updateSmileyMessage(false);_hideFeedback();},2000);},1000);}else{_hideFeedback();}};}};};PLY.App.Module.directive('rrFeedbackDirective',['$rootScope','$timeout','$location','PLY.Models.AnalyticsModel','AdaService',ns.directive]);})(PLY.Directives.FeedbackDirective);}),542:(function(module,exports,__webpack_require__){if(false){var cssReload;}}),543:(function(module,exports){module.exports="<div class=\"rr-feedback feedback-support-area\" ng-class=\"\n  {\n    visible: visible, \n    'smiley-visible': feedbackVisible, \n    'form-active': formActive, \n    'form-submitted': formSubmitted,\n    'theme-pronounced': formActive && themeClass === 'theme-pronounced'\n  }\">\n    <!-- mobile close -->\n    <div class=\"feedback-support-area-smilies-mobile-close-wpr hide-after-form-submit\" \n      ng-if=\"isTouchDevice && !formActive && smiliesExpanded\"\n      ng-click=\"collapseSmilies()\"\n    >\n      <i class=\"fa fa-close\"></i>\n    </div>\n    <!-- feedback smileys -->\n    <div \n      class=\"feedback-support-area-feedback-section\"\n      ng-mouseover=\"(!isTouchDevice) ? hoveringOnSmilies = true : ''\"\n      ng-mouseleave=\"(!isTouchDevice) ? hoveringOnSmilies = false : ''\"\n      tooltip-enable=\"!formActive && hoppingSmiley\"\n      tooltip-placement=\"top-right auto\"\n      tooltip-is-open=\"hoppingSmiley\"\n      tooltip-append-to-body=true\n      uib-tooltip-template=\"'rr-feedback-tooltip.html'\"\n      ng-class=\"{'expanded': smiliesExpanded, 'no-hover': isTouchDevice}\"\n    >\n     <!-- form header -->\n    <div class=\"feedback-support-area-form-header show-if-form-active hide-after-form-submit\">\n      <div class=\"left\">\n         {{ feedbackQuestion }}\n      </div>\n       <div class=\"right\">\n         <i class=\"fa fa-close\" ng-click=\"dismissForm()\"></i>\n      </div>\n    </div>\n    <!-- smilies -->\n    <div class=\"feedback-support-area-smilies hide-after-form-submit\" ng-class=\"{'none-selected': formActive && !selectedFeedback}\">\n          <img \n          class=\"feedback-happy\"\n          alt=\"happy face\"\n          ng-class=\"{hopper: hoppingSmiley, selected: selectedFeedback === 'happy', 'no-pointer-events': hoppingSmiley}\" \n          ng-click=\"(!formActive && isTouchDevice && !smiliesExpanded)  ? expandSmilies() : selectFeedback('happy')\"\n          tooltip-enable=\"!isTouchDevice && !formActive\"\n          tooltip-placement=\"top\" \n          tooltip-popup-delay=500\n          tooltip-append-to-body=true\n          uib-tooltip=\"Lovin' it!\" \n          src=\"//static.rocketreach.co/images/feedback/happy.svg\"\n          >\n          <img\n            class=\"feedback-sad\"\n            alt=\"sad face\"\n            ng-class=\"{selected: selectedFeedback === 'sad', 'no-pointer-events': hoppingSmiley}\" \n            ng-click=\"selectFeedback('sad')\"\n            tooltip-enable=\"!isTouchDevice && !formActive\"\n            tooltip-placement=\"top\" \n            tooltip-popup-delay=500\n            tooltip-append-to-body=true\n            uib-tooltip=\"Gah! Not Happy.\" \n            src=\"//static.rocketreach.co/images/feedback/mad.svg\" \n          />\n    </div>\n      <!-- feedback form -->\n    <div class=\"feedback-support-area-feedback-form show-if-form-active  hide-after-form-submit\" ng-show=\"selectedFeedback || !autoExpand\" ng-class=\"{'animated bounceIn': selectedFeedback}\">\n      <div class=\"feedback-support-area-feedback-form--reaction-response  hide-after-form-submit\" ng-switch=\"selectedFeedback\">\n          <span ng-switch-when=\"sad\">That's too bad.</span>\n          <span ng-switch-when=\"moderate\">Help us Improve!</span>\n          <span ng-switch-when=\"happy\">Woo hoo!</span>\n      </div>\n      <div class=\"feedback-support-area-feedback-form--ask-for-feedback-message hide-after-form-submit\">\n        <span ng-if=\"step === steps.FREEFORM\">\n          <span ng-if=\"selectedFeedback === 'happy'\">Let us know how we can make it even better.</span>\n          <span ng-if=\"selectedFeedback !== 'happy'\">Please describe your problem in more detail.</span>\n        </span>\n        <span ng-if=\"step === steps.NEGATIVE_REASONS\">\n          {{ negativeMessage }}\n        </span>\n        <span ng-if=\"step === steps.ASK_FOR_REVIEWS\">\n          Why not give us <i class='fa fa-star' ng-repeat=\"n in '12345'\"></i> ?\n        </span>\n      </div>  \n      <!-- main form-->\n      <form name=\"forms.extraForm\" class=\"submit-form hide-after-form-submit\" ng-if=\"step === steps.FREEFORM\" ng-submit=\"handleSubmit($event)\">\n        <div class=\"feedback-support-area-feedback-form--ask-for-feedback-textarea-wpr\">\n            <textarea placeholder=\"Tell us here, please!\" ng-model='forms.extraForm.text' ng-class=\"{'has-error': feedbackTextMissing}\"></textarea>\n        </div>\n        <div class=\"feedback-support-area-feedback-form--ask-for-feedback-submit\">\n            <input type=\"submit\" value=\"Submit\" class=\"btn btn-pronounced\" ng-disabled=\"!formActive\" />\n        </div>\n      </form>\n      <!-- negative prerolled reasons -->\n      <div name=\"negativeReasonsForm\" class=\"submit-form hide-after-form-submit\" ng-if=\"step === steps.NEGATIVE_REASONS\">\n        <ul class=\"feedback-support-area-feedback-form__button-list\">\n          <li class=\"feedback-support-area-feedback-form__button-list-item\" ng-repeat=\"reason in negativeReasons\">\n            <button class=\"btn btn-secondary\" ng-class=\"{active: reason.checked}\" ng-click=\"toggleNegativeReason(reason)\">\n              <input type=\"checkbox\" ng-model=\"reason.checked\" ng-change=\"toggleNegativeReason(reason)\" />{{ reason.text }}\n            </button>\n          </li>\n        </ul>\n        <div class=\"feedback-support-area-feedback-form--ask-for-feedback-submit\">\n            <button type=\"submit\" class=\"btn btn-pronounced\" ng-disabled=\"!formActive || !getChosenNegativeReasons()\" ng-click=\"handleNegativeReasonsSubmit($event)\">Next</button>\n        </div>\n      </div>\n      <!-- ask for reviews -->\n      <div class=\"submit-form hide-after-form-submit\" ng-if=\"step === steps.ASK_FOR_REVIEWS\">\n        <ul class=\"feedback-support-area-feedback-form__button-list\">\n          <li class=\"feedback-support-area-feedback-form__button-list-item\" ng-repeat=\"review in reviewOptions\">\n            <a ng-href=\"{{ review.href }}\" class=\"btn btn-primary\" ng-click=\"handleReviewOptionClick(review)\" target=\"_blank\">\n              <i ng-attr-class=\"{{ review.icon }}\" ng-if=\"review.icon\"></i><span ng-bind-html=\"review.text\"></span>\n            </a>\n          </li>\n        </ul>\n        <div class=\"feedback-support-area-feedback-form--ask-for-feedback-submit\">\n            <input type=\"submit\" value=\"Skip\" ng-click=\"handleReviewOptionClick()\" class=\"btn btn-pronounced\" ng-disabled=\"!formActive\" />\n        </div>\n      </div>\n    </div>\n      <div class=\"thanks-message animated fadeIn show-after-form-submit\">\n        Thanks for the feedback!\n      </div>\n  </div>\n\n    <!-- feedback divider -->\n    <div class=\"feedback-support-area-divider hide-if-form-active\">\n    </div>\n    <!-- support -->\n    <div class=\"feedback-support-area-support-section hide-if-form-active\" \n      ng-click=\"showSupport()\"\n      tooltip-enable=\"!isTouchDevice && !formActive\"\n      tooltip-placement=\"top\" \n      tooltip-popup-delay=500\n      tooltip-append-to-body=true\n      uib-tooltip=\"Help\" \n    >\n      <i class=\"bot-icon rr-icon-ada-bubble\" aria-hidden=\"true\"></i>\n    </div>\n    <!-- tooltip content-->\n    <script type=\"text/ng-template\" id=\"rr-feedback-tooltip.html\" style='display: none'>\n      <div ng-if=\"smileyMessage\">\n        {{ smileyMessage }}\n      </div>\n    </script>\n</div>";})});(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/js_dist/";return __webpack_require__(__webpack_require__.s=526);})
({146:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var convert=function convert(t){var date=null;if(t instanceof Date){date=t;}
if(t instanceof String||typeof t==='string'){date=new Date("".concat(t,"Z"));}
if(!date||date.toTimeString()==="Invalid Date"){date=new Date();}
return date;};var defaultKey={'recent':'a moment','s':'s','m':'m','h':'h','d':'d'};var secondsPast=function secondsPast(ts){var levels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var delim=arguments.length>2&&arguments[2]!==undefined?arguments[2]:" ";var key=arguments.length>3&&arguments[3]!==undefined?arguments[3]:defaultKey;var results=[];var secondsPastLevel=function secondsPastLevel(s,levels){if(levels===0){return;}
if(s<10&&key['recent']){if(results.length===0){results.push(key['recent']);return;}
if(s===0){return;}}
if(s<60){if(key['s']){results.push(parseInt(s)+key['s']);}else if(key['recent']){results.push(key['recent']);}
return;}
if(s<3600){results.push(parseInt(s/60)+key['m']);secondsPastLevel(s%60,levels-1);return;}
if(s<86400){results.push(parseInt(s/3600)+key['h']);secondsPastLevel(s%3600,levels-1);return;}
if(s<=86400*30){results.push(parseInt(s/86400)+key['d']);secondsPastLevel(s%86400,levels-1);return;}
if(s<=86400*365){results.push(parseInt(s/(86400*30))+' months');secondsPastLevel(s%(86400*30,levels-1));return;}
if(s>86400*365){results.push("over 1 year");return;}};secondsPastLevel(ts,levels);return results.join(delim);};var secondsPastVerbose=function secondsPastVerbose(ts){var levels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var delim=arguments.length>2&&arguments[2]!==undefined?arguments[2]:' ';var key={'recent':'a moment','s':' seconds','m':' minutes','h':' hours','d':' days'};return secondsPast(ts,levels,delim,key);};var timeSince=function timeSince(t){var now=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Date();var timeStamp=convert(t);var ts=Math.abs(now.getTime()-timeStamp.getTime())/1000;var key=defaultKey;key['recent']='just now';delete key['s'];return secondsPast(ts,1," ",key);};var daysPast=function daysPast(date,numDays){var d=new Date();d.setDate(date.getDate()+numDays);return d;};var exports={timeSince:timeSince,secondsPast:secondsPast,secondsPastVerbose:secondsPastVerbose,daysPast:daysPast};__webpack_exports__["default"]=(exports);}),526:(function(module,exports,__webpack_require__){module.exports=__webpack_require__(527);}),527:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _models_alertMessageModel_es6__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(528);var _models_alertMessageModel_es6__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_models_alertMessageModel_es6__WEBPACK_IMPORTED_MODULE_0__);var _services_userNotificationService_es6__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(529);var _directives_notificationShelf_directive_es6__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(532);var _directives_specialAnnouncementBadge_directive_es6__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(535);}),528:(function(module,exports){namespace("PLY.Models.AlertMessageModel");(function(ns){ns.alertMessageModelFactory=function(parent,$log,$timeout,$http){ns.AlertLevels={"DISMISS":-1,"HIDE":0,"INFO":1,"PROMOTION":1.5,"WARNING":2,"DANGER":3};ns.DEBOUNCED_BROADCAST_MS=2000;ns.AlertMessage=function(data){var defaultOptions={priority:0,alertLevel:ns.AlertLevels.INFO,debounceTimeoutMilliseconds:ns.DEBOUNCED_BROADCAST_MS,displayAlertLevel:null,appearIn:['bell'],dismissalRules:{dismissable:true,on_dismiss:function on_dismiss(alertMessage){return false;},close_action:'dismiss',self_destruct_after_x_ms:false,quiet_after_x_ms:false,days_until_respawn_if_dismissed:30,max_respawn_count:9999,poll_for_dismissal:{url:false,interval:30000,on_complete:function on_complete(response){return false;}}}};if(data.alertLevel===ns.AlertLevels.PROMOTION){defaultOptions=angular.merge(defaultOptions,{appearIn:['shelf'],dismissalRules:{close_action:'quiet',dismissable:false}},true);}
if(data.alertLevel===ns.AlertLevels.WARNING){defaultOptions=angular.merge(defaultOptions,{appearIn:['bell','shelf'],dismissalRules:{dismissable:true}},true);}
if(data.alertLevel===ns.AlertLevels.DANGER){defaultOptions=angular.merge(defaultOptions,{appearIn:['shelf'],dismissalRules:{dismissable:false}},true);}
data=data||{};var appearInOverride=data.appearIn;data=angular.merge(defaultOptions,data);data.appearIn=appearInOverride?appearInOverride:data.appearIn;var hideTimer=null;var listeners=[];this.quiet=function(){if(!this.isDismissed()){this.quietTime=new Date();this.broadcastEvent('quiet');this.save();}};this.hide=function(){var skipAnimation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.alertLevel>ns.AlertLevels.HIDE){if(skipAnimation){this.alertLevel=ns.AlertLevels.HIDE;return;}
this.alertLevel=ns.AlertLevels.DISMISS;hideTimer=$timeout(function(){this.alertLevel=ns.AlertLevels.HIDE;}.bind(this),500);}};this.restoreOriginalAlertLevel=function(){if(!this.isDismissed()){this.alertLevel=this.originalAlertLevel;}};this.dismiss=function(){if(this.isDismissed()){this.alertLevel=ns.AlertLevels.HIDE;}else{this.dismissTime=new Date();this.dismissCount=this.dismissCount+1||1;if(data.dismissalRules.on_dismiss){data.dismissalRules.on_dismiss.call(this,this);}
if(this.dismissable){this.save();}
this.hide();this.broadcastEvent('dismiss');}};this.registerListener=function(callback){listeners.push(callback);};this.broadcastEvent=function(eventName){for(var i=0;i<listeners.length;i++){listeners[i](eventName);}};this.isQuieted=function(){return this.quietTime!==null;};this.isDismissed=function(){return this.dismissTime!==null;};this.load=function(){var _this=this;var dataStored=JSON.parse(PLY.Utils.localStorage(this.id));if(dataStored===null||dataStored===undefined){dataStored=JSON.parse(PLY.Utils.sessionStorage(this.id));}
var now=new Date();if(dataStored){var timeAttributes=['createTime','quietTime','dismissTime'];timeAttributes.forEach(function(attr){_this[attr]=new Date(Date.parse(dataStored[attr.replace('Time','')]));});this.dismissCount=parseInt(dataStored.dismissCount)||0;var ageMillis=Math.abs(now-this.createTime);var ageDays=ageMillis/1000/86400;this.createTime=null;if(ageDays>=data.dismissalRules.days_until_respawn_if_dismissed&&this.dismissCount<data.dismissalRules.max_respawn_count){this.createTime=new Date();this.dismissTime=null;}
timeAttributes.forEach(function(attr){var errorDate="Invalid Date";if(_this[attr]&&_this[attr].toString()===errorDate){_this[attr]=null;}});}};this.save=function(){var dataToStore={'create':this.createTime,'quiet':this.quietTime,'dismiss':this.dismissTime,'dismissCount':this.dismissCount};PLY.Utils.localStorage(this.id,JSON.stringify(dataToStore));};this.removeFromStorage=function(){localStorage.removeItem(this.id);};this.hasHigherPriorityThan=function(notification){return this.priorityScore>=notification.priorityScore;};this.shouldAppearIn=function(appearInFilter){return this.appearIn.indexOf(appearInFilter)!==-1;};this.getAlertName=function(alertLevel){if(alertLevel){for(var alertName in ns.AlertLevels){if(ns.AlertLevels[alertName]===alertLevel){return alertName.toLowerCase();}}}
return"hide";};Object.defineProperty(this,"_id",{get:function get(){return data.id||data.message;}});Object.defineProperty(this,"id",{get:function get(){return'alert_meta_'+btoa(data.id||data.message);}});Object.defineProperty(this,"originalAlertLevelName",{get:function get(){return this.getAlertName(this.originalAlertLevel);}});Object.defineProperty(this,"alertLevelName",{get:function get(){return this.getAlertName(this.alertLevel);}});Object.defineProperty(this,"displayAlertLevelName",{get:function get(){return this.getAlertName(data.displayAlertLevel||this.originalAlertLevel);}});Object.defineProperty(this,"hasCTA",{get:function get(){return this.ctaType&&(this.ctaFunction||this.ctaLink)&&this.ctaMessage;}});Object.defineProperty(this,"priorityScore",{get:function get(){return this.priority+this.alertLevel*10000;}});Object.defineProperty(this,"isVisible",{get:function get(){return this.alertLevel!==ns.AlertLevels.HIDE;}});(function init(){var _this2=this;this.priority=data.priority;this.appearIn=data.appearIn;this.dismissable=data.dismissalRules.dismissable;this.actionable=this.dismissable||data.dismissalRules.close_action==='quiet';this.closeAction=data.dismissalRules.close_action==='quiet'?this.quiet:this.dismiss;this.message=data.message;this.title=data.title;this.createTime=new Date();this.debounceTimeoutMilliseconds=data.debounceTimeoutMilliseconds;this.dismissTime=null;this.quietTime=null;this.load();if(this.isDismissed()){this.dismiss();return;}else{this.save();}
if(!this.message||!this.message.length){throw"Alerts must contain a message";}
this.originalAlertLevel=data.alertLevel;this.alertLevel=this.originalAlertLevel;if(this.alertLevel===undefined||data.alertLevel===null){this.alertLevel=ns.AlertLevels.INFO;}
this.id=data.id||PLY.Utils.generateUUID();this.dismissable=Boolean(data.dismissalRules.dismissable);this.quietAfterShownFor=data.dismissalRules.quiet_after_x_ms;this.ctaType=data.ctaType;this.ctaFunction=data.ctaFunction;this.ctaMessage=data.ctaMessage;this.ctaLink=data.ctaLink||"#";this.ctaLinkTarget=data.ctaLinkTarget;if(data.dismissalRules.self_destruct_after_x_ms>0){$timeout(this.dismiss.bind(this),data.dismissalRules.self_destruct_after_x_ms+ns.DEBOUNCED_BROADCAST_MS);}
if(data.dismissalRules.poll_for_dismissal&&data.dismissalRules.poll_for_dismissal.url){var url=data.dismissalRules.poll_for_dismissal.url;var interval=data.dismissalRules.poll_for_dismissal.interval;var onComplete=data.dismissalRules.poll_for_dismissal.on_complete;var callback=function callback(){$http({method:'GET',url:url}).then(function(response){if(onComplete(response)){_this2.dismiss();}else{$timeout(callback,interval);}})["catch"](function(response){return false;});};callback();}}).call(this);};return ns;};PLY.App.Module.service('PLY.Models.AlertMessageModel',["PLY.Models","$log","$timeout","$http",ns.alertMessageModelFactory]);})(PLY.Models.AlertMessageModel);}),529:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _resources_userNotificationState__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(530);namespace("PLY.Services.UserNotificationService");(function(ns){ns.service=function($rootScope,$q,$timeout,$interval,$window,$location,$http,ExperimentationModel,AlertMessageModel,AnalyticsModel,UserModel){var userInfoPromise=UserModel.getUserInfo();var ctaFunctions={resendVerification:function resendVerification(alertMessage){UserModel.resendVerification().then(function(){humane.info('Verification email has been resent');});},updateCreditCard:function updateCreditCard(alertMessage,$event){alertMessage.dismiss();},installChromeExtension:function installChromeExtension(alertMessage,$event){alertMessage.dismiss();AnalyticsModel.trackEvent(AnalyticsModel.Category.PLUGIN,AnalyticsModel.Category.PLUGIN.actions.CLICKED_EXTENSION_PROMPT);},acknowledge:function acknowledge(alertMessage,$event){alertMessage.dismiss();},tryOutReach:function tryOutReach(alertMessage,$event){var outreachCategory=AnalyticsModel.Category.OUTREACH;AnalyticsModel.trackEvent(outreachCategory,outreachCategory.actions.CLICKED_OUTREACH_PROMPT);alertMessage.dismiss();$window.location.href='/email';},freeTrial:function freeTrial(alertMessage,$event){var path=$location.path();AnalyticsModel.recordFunnelMetric('paid_trial.viewed',null);window.location.href='/trial';}};$rootScope.$on('rr-credit-balance-updated',function(event,creditBalance,overages){userInfoPromise.then(function(user){if($rootScope.userNotificationState){$rootScope.userNotificationState.createCreditsAlert(user,creditBalance);}});});$rootScope.$on('rr-user-changed',function(event){constructUserNotificationState().then(function(result){$rootScope.userNotificationState=result;});});var constructUserNotificationState=function constructUserNotificationState(){var userNotificationState=new _resources_userNotificationState__WEBPACK_IMPORTED_MODULE_0__["default"]($rootScope,$timeout,$location,$http,UserModel,ExperimentationModel,AlertMessageModel,AnalyticsModel,ctaFunctions);return $q(function(resolve,reject){function initNotifications(){try{userNotificationState.init(userInfoPromise);resolve(userNotificationState);}catch(e){reject(e);}}
var notificationsDelay=PLY.Utils.settings('notificationsDelay');if(!notificationsDelay&&notificationsDelay!==0){notificationsDelay=15;}
var cancelAutoNotify=$timeout(initNotifications,notificationsDelay*1000);$rootScope.$on('rr-onboarding-event',function(event,value){$timeout.cancel(cancelAutoNotify);if(value==='complete'){initNotifications();}});});};ns.resendVerification=ctaFunctions.resendVerification;return{createNotifications:function createNotifications(){$rootScope.ctaFunctions=ctaFunctions;constructUserNotificationState().then(function(result){$rootScope.userNotificationState=result;});},createOffers:function createOffers(){}};};var module=angular.module('PLYApp');module.service('UserNotificationService',['$rootScope','$q','$timeout','$interval','$window','$location','$http','PLY.Models.ExperimentationModel','PLY.Models.AlertMessageModel','PLY.Models.AnalyticsModel','PLY.Models.UserModel',ns.service]);})(PLY.Services.UserNotificationService);}),530:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _timeAgo__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(146);var _dates__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(531);var _build_node_modules_pluralize__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61);var _build_node_modules_pluralize__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_build_node_modules_pluralize__WEBPACK_IMPORTED_MODULE_2__);function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
var UserNotificationState=function UserNotificationState($rootScope,$timeout,$location,$http,UserModel,ExperimentationModel,AlertMessageModel,AnalyticsModel,ctaFunctions){var notificationMessages=[];var highestPriorityNotification=null;var debounceTimer=null;var KILL_NOTIFICATIONS_BELOW_LEVEL=AlertMessageModel.AlertLevels.DANGER;var PREROLLED_ALERTS={emailVerification:function emailVerification(ctx){return{message:"A verification email has been sent to <b>".concat(ctx.user.email,"</b>. Please click the link in your email to activate your account. &nbsp;"),ctaType:"button",ctaMessage:"Re-send verification email",ctaFunction:ctaFunctions.resendVerification,alertLevel:AlertMessageModel.AlertLevels.DANGER,displayAlertLevel:AlertMessageModel.AlertLevels.INFO,id:"email-verification",priority:10,dismissalRules:{poll_for_dismissal:{url:'/v1/user',on_complete:function on_complete(response){if(response.data&&response.data.is_verified){var userPromise=UserModel.getUserInfo();notificationMessages.forEach(function(notification){notification.restoreOriginalAlertLevel();});$timeout(function(){setHighestPriorityAlert(calculateHighestPriorityAlert());},AlertMessageModel.DEBOUNCED_BROADCAST_MS);userPromise.then(function(user){createSpecialOffers(user);});return true;}else{return false;}}}}};},paymentDeclined:{id:"payment-declined",message:"Your payment method was declined. To continue using the service, please ",alertLevel:AlertMessageModel.AlertLevels.DANGER,ctaType:"link",ctaMessage:"update your payment method",ctaFunction:ctaFunctions.updateCreditCard,ctaLink:"/update_payment_method",ctaLinkTarget:"_self",priority:9,dismissalRules:{poll_for_dismissal:{url:'/v1/user',interval:3000,on_complete:function on_complete(response){return response.data&&!response.data.has_past_due_payment;}}}},outOfCredits:function outOfCredits(ctx){return{id:"out-of-credits",message:"You are out of lookups. "+ctx.messageAdditional,alertLevel:AlertMessageModel.AlertLevels.DANGER,ctaType:"link",ctaMessage:ctx.ctaMessage,ctaFunction:ctaFunctions.acknowledge,ctaLink:ctx.ctaLink,ctaLinkTarget:"_self"};},paymentMethodExpiresSoon:{id:"payment-method-expires-soon",message:"Your payment method is expiring soon. To continue using the service, please ",ctaType:"link",alertLevel:AlertMessageModel.AlertLevels.WARNING,ctaMessage:"update your payment method",ctaFunction:ctaFunctions.updateCreditCard,ctaLink:"/update_payment_method",ctaLinkTarget:"_self"},deviceLimitReached:function deviceLimitReached(ctx){return{id:"device-limit-reached",message:"You've reached your device limit! You're currently using ".concat(ctx.deviceNum," devices."),ctaType:"link",alertLevel:AlertMessageModel.AlertLevels.WARNING,ctaMessage:"View team plan.",ctaLink:"/account?section=nav_gen_team",ctaLinkTarget:"_self"};},deviceLimitLoggedOut:function deviceLimitLoggedOut(ctx){return{id:"device-limit-logged-out",message:"You've been logged out by another device.",alertLevel:AlertMessageModel.AlertLevels.DANGER,debounceTimeoutMilliseconds:0};},creditsAlmostExhausted:function creditsAlmostExhausted(ctx){return{id:"credits-almost-exhausted",message:"You are almost out of lookups. "+ctx.messageAdditional,alertLevel:AlertMessageModel.AlertLevels.WARNING,ctaType:"link",ctaMessage:ctx.ctaMessage,ctaFunction:ctaFunctions.acknowledge,ctaLink:ctx.ctaLink,ctaLinkTarget:"_self"};},teamsInvite:function teamsInvite(ctx){var baseMessage="You have been invited to ".concat(ctx.teamText,".");' Visit the teams section of the account page to accept or deny!';var notification={id:"team-invite",title:"Team Invitation",message:baseMessage,alertLevel:AlertMessageModel.AlertLevels.WARNING,displayAlertLevel:AlertMessageModel.AlertLevels.INFO};return!ctx.isOnAccountPage?angular.extend(notification,{ctaType:"button-style-link",message:baseMessage+' Visit the teams section of the account page to accept or deny!',ctaMessage:"View Team invite"+(ctx.multipleInvites?'s':''),ctaLink:'/account?section=nav_gen_team',ctaLinkTarget:"_self"}):angular.extend(notification,{appearIn:[]});},freeTrial:function freeTrial(ctx){return{id:"free-trial",title:"Free 7 Day Trial!",message:"Get email & mobile phone for 1.5 billion professionals.",alertLevel:AlertMessageModel.AlertLevels.PROMOTION,ctaType:"button-style-link",ctaMessage:"Start my free trial now",ctaLink:ctx.ctaLink,ctaLinkTarget:"_self"};},installChromePlugin:function installChromePlugin(ctx){return{id:"install-chrome-plugin",message:"".concat(ctx.user.firstName,", look up contacts right from LinkedIn. Install the chrome extension and get +5 Free Lookups!"),ctaType:"button-style-link",ctaMessage:"Get the Chrome Extension",ctaFunction:ctaFunctions.installChromeExtension,ctaLink:"/browser_extension/install",ctaLinkTarget:"_blank"};},upgradeBrowserPlugin:function upgradeBrowserPlugin(latestVersion){return{id:'upgrade-browser-plugin',message:"A new version of the extension is available.<br />Update to ".concat(latestVersion," for the full experience."),ctaType:'link',ctaMessage:"Update Now",ctaLink:'/browser_extension/install',ctaLinkTarget:'_blank',alertLevel:AlertMessageModel.AlertLevels.DANGER,debounceTimeoutMilliseconds:0};},limitedTimePremiumUpgrade:function limitedTimePremiumUpgrade(ctx){return{id:"limited-time-premium-upgrade-for-free",message:"Here's a special boost just for you! For a limited time, your free lookups have been upgraded to premium!",ctaType:"button",ctaMessage:"Learn More",ctaFunction:ctaFunctions.limitedTimePremiumUpgrade,onDismiss:function onDismiss(alertMessage){AnalyticsModel.trackRREvent({category:'search',action:'premium_limited_time_offer_modal_show',labels:{modal:'dismissed_notification'}});},priority:1,appearIn:["bell","shelf"]};}};var init=function init(userInfoPromise){clearAllNotifications();userInfoPromise.then(function(user){return user.getPaymentInfo()["finally"](function(){if(user&&user.isRegistered()){createRegisteredUserAlerts(user);createCreditsAlert(user,user.lookupCreditBalance);createSpecialOffers(user);}else{createAnonymousUserAlerts(user);}});});createBrowserExtensionAlert();};var getNotificationMessages=function getNotificationMessages(){var appearInFilter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return notificationMessages.filter(function(notification){return appearInFilter?notification.shouldAppearIn(appearInFilter):true;}).filter(function(notification){return notification.isVisible;});};var getAlertCount=function getAlertCount(){var appearInFilter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return getNotificationMessages(appearInFilter).length;};var alertIdExists=function alertIdExists(alertMessageId){return!!notificationMessages.filter(function(m){return m._id===alertMessageId;}).length;};var alertIdDismissed=function alertIdDismissed(alertMessageId){return!!notificationMessages.filter(function(m){return m._id===alertMessageId&&m.isDismissed();}).length;};var clearAllNotifications=function clearAllNotifications(){notificationMessages.forEach(function(notification,i){notification.dismiss();notification.removeFromStorage();delete notificationMessages[i];});};var removeExistingNotificationsBelowTheKillLevel=function removeExistingNotificationsBelowTheKillLevel(){$timeout(function(){notificationMessages.forEach(function(notification,i){if(notification.alertLevel<KILL_NOTIFICATIONS_BELOW_LEVEL){notification.hide();}});},AlertMessageModel.DEBOUNCED_BROADCAST_MS);};var calculateHighestPriorityAlert=function calculateHighestPriorityAlert(opts){opts=angular.merge({quieted:true},opts);var tempHighest=null;notificationMessages.filter(function(message){if(!message.isVisible){return false;}
if(!opts.quieted){return!message.isQuieted();}else{return true;}}).forEach(function(notification,i){if(!tempHighest||notification.hasHigherPriorityThan(tempHighest)){tempHighest=notification;}});return tempHighest;};var setHighestPriorityAlert=function setHighestPriorityAlert(alertMessage){var silent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!alertMessage){highestPriorityNotification=null;return;}
if(!highestPriorityNotification||highestPriorityNotification.id!==alertMessage.id){highestPriorityNotification=alertMessage;if(!silent){if(debounceTimer){$timeout.cancel(debounceTimer);}
debounceTimer=$timeout(function(){if(!highestPriorityNotification.isQuieted()&&highestPriorityNotification.quietAfterShownFor){$timeout(highestPriorityNotification.quiet.bind(highestPriorityNotification),highestPriorityNotification.quietAfterShownFor+AlertMessageModel.DEBOUNCED_BROADCAST_MS);}
$rootScope.$broadcast("rr-highest-priority-notification-changed",highestPriorityNotification);},alertMessage.debounceTimeoutMilliseconds);}}};var getAlertOptionsByName=function getAlertOptionsByName(name,ctx){var preRolledAlert=PREROLLED_ALERTS[name];if(preRolledAlert){if(typeof preRolledAlert==="function"){return preRolledAlert(ctx);}else if(_typeof(preRolledAlert)==="object"){return preRolledAlert;}}};var addAlert=function addAlert(notification){if(alertIdExists(notification._id)){return;}
setHighestPriorityAlert(calculateHighestPriorityAlert(),true);if(notification.isVisible&&(!highestPriorityNotification||notification.hasHigherPriorityThan(highestPriorityNotification))){setHighestPriorityAlert(notification);}
if(highestPriorityNotification&&highestPriorityNotification.alertLevel>=KILL_NOTIFICATIONS_BELOW_LEVEL){removeExistingNotificationsBelowTheKillLevel();if(notification.alertLevel<highestPriorityNotification.alertLevel){notification.hide(true);}}
notificationMessages.unshift(notification);};var createSpecialOffers=function createSpecialOffers(user){var ctaLink="/trial";if(user.shouldOfferTrial()){addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.freeTrial({ctaLink:ctaLink})));}};var createRegisteredUserAlerts=function createRegisteredUserAlerts(user){if(!user.isVerified){addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.emailVerification({user:user})));}
if(user.hasPastDuePayment){addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.paymentDeclined));}else if(user.isCurrentlyOnPaidProduct()&&user.paymentInfo&&user.paymentInfo.is_expiring_soon){addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.paymentMethodExpiresSoon));}
if(user.teamInvites&&user.teamInvites.length){var teamText;if(user.teamInvites.length>1){teamText="<b>".concat(user.teamInvites.length," Teams</b>");}else{teamText="<b>".concat(user.teamInvites[0].owner_name,"'s Team</b>");}
var isOnAccountPage=$location.path()==='/account';addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.teamsInvite({teamText:teamText,multipleInvites:user.teamInvites.length>1,isOnAccountPage:isOnAccountPage})));}
if(PLY.Utils.isChromeDesktop()&&!user.hasInstalledCompanion&&!/linkedin.com/i.exec(user.email)){AnalyticsModel.trackEvent(AnalyticsModel.Category.PLUGIN,AnalyticsModel.Category.PLUGIN.actions.SHOWN_EXTENSION_PROMPT);addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.installChromePlugin({user:user})));}};var createAnonymousUserAlerts=function createAnonymousUserAlerts(user){if(user.deviceLimitLoggedOut){addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.deviceLimitLoggedOut()));}};var createCreditsAlert=function createCreditsAlert(user,creditBalance){var message="";var ctaLink="/pricing";var ctaMessage="Upgrade your account.";if(user.isAnonymous()){return;}
if(creditBalance===1){if(user.isPayingUser&&user.canIncurOverages){message+="You will incur overages soon.";}
if(user.isPayingUser){addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.creditsAlmostExhausted({messageAdditional:message,ctaMessage:ctaMessage,ctaLink:ctaLink})));}}else if(creditBalance===0){if(user.canIncurOverages){if(user.lookupCreditOverageBalance>0){message+="Additional lookups will be billed to your account.";ctaMessage="Visit settings";ctaLink="/account?section=nav_gen_usage_billing";}else{var m="You've hit the additional lookup cap for "+user.productInfo.name+" ("+user.lookupCreditOverage+"). Upgrade your plan to continue.";message+=m;ctaMessage="View plans";ctaLink="/pricing";}}else if(user.isPayingUser){if(user.productInfo.additionalLookupsAvailable){message+="Enable additional lookups or upgrade to continue.";ctaMessage="Enable additional lookups";ctaLink="/account?section=nav_gen_usage_billing";}else{message+="Upgrade your plan to continue.";ctaMessage="View plans";ctaLink="/pricing";}}else{ctaMessage=" Sign up for a plan to continue searching.";}
addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.outOfCredits({messageAdditional:message,ctaMessage:ctaMessage,ctaLink:ctaLink})));}else{}};var createBrowserExtensionAlert=function createBrowserExtensionAlert(){var clientPluginVersion=$location.search()["mf_version"];if(!clientPluginVersion)return;$http.get('/browser_extension/latest_version').then(function(response){if(response&&response.data&&response.data.approved){var latestVersion=response.data.approved;if(latestVersion==='0.0.0')return;if(PLY.Utils.semVersionCompare(latestVersion,clientPluginVersion)<1)return;addAlert(new AlertMessageModel.AlertMessage(PREROLLED_ALERTS.upgradeBrowserPlugin(latestVersion)));}});};return{init:init,createCreditsAlert:createCreditsAlert,getAlertCount:getAlertCount,getAlertOptionsByName:getAlertOptionsByName,alertIdExists:alertIdExists,alertIdDismissed:alertIdDismissed,addAlert:addAlert,clearAllNotifications:clearAllNotifications,getNotificationMessages:getNotificationMessages,getHighestPriorityNotification:function getHighestPriorityNotification(){var mustAppearIn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var opts=arguments.length>1?arguments[1]:undefined;opts=angular.merge({quieted:true},opts);var hpNotification=calculateHighestPriorityAlert(opts);return hpNotification&&hpNotification.isVisible?mustAppearIn?hpNotification.shouldAppearIn(mustAppearIn)?hpNotification:null:hpNotification:null;}};};__webpack_exports__["default"]=(UserNotificationState);}),531:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var MONTHS=[{'verbose':'January','short':'jan'},{'verbose':'February','short':'feb'},{'verbose':'March','short':'mar'},{'verbose':'April','short':'apr'},{'verbose':'May','short':'may'},{'verbose':'June','short':'june'},{'verbose':'July','short':'july'},{'verbose':'August','short':'aug'},{'verbose':'September','short':'sep'},{'verbose':'October','short':'oct'},{'verbose':'November','short':'nov'},{'verbose':'December','short':'dec'}];function fromUnixTimestamp(timestamp){var d=new Date(timestamp*1000);return d;}
function toUserString(dateObj){var user=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(String(dateObj)==='Invalid Date'){return null;}
var month=MONTHS[dateObj.getUTCMonth()].verbose;var date=dateObj.getUTCDate();var year=dateObj.getUTCFullYear();return"".concat(month," ").concat(date,", ").concat(year);}
function to8DigitString(dateObj){if(typeof dateObj==='string'){dateObj=new Date(dateObj);}
if(isNaN(dateObj.getTime())){return undefined;}
var month=''+(dateObj.getUTCMonth()+1);var day=''+dateObj.getUTCDate();var year=dateObj.getUTCFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;return[year,month,day].join('');}
function to14DigitString(dateObj){if(typeof dateObj==='string'){dateObj=new Date(dateObj);}
if(isNaN(dateObj.getTime())){return undefined;}
var month=''+(dateObj.getUTCMonth()+1);var day=''+dateObj.getUTCDate();var year=dateObj.getUTCFullYear();var hour=dateObj.getUTCHours();var min=dateObj.getUTCMinutes();var sec=dateObj.getUTCSeconds();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;if(hour.length<2)hour='0'+hour;if(min.length<2)min='0'+min;if(sec.length<2)sec='0'+sec;return[year,month,day,hour,min,sec].join('');}
var addMonths=function addMonths(date,numMonths){var relative=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;function daysInMonth(month,year){return new Date(year,month+1,0).getDate();}
var adjustMonth=new Date(date.getTime());if(relative){var dateOfMonth=date.getDate();adjustMonth.setDate(1);adjustMonth.setMonth(date.getMonth()+numMonths);var maxDate=daysInMonth(adjustMonth.getMonth(),adjustMonth.getFullYear());if(dateOfMonth>maxDate){dateOfMonth=maxDate;}
adjustMonth.setDate(dateOfMonth);}else{adjustMonth.setMonth(date.getMonth()+numMonths);var _maxDate=daysInMonth(adjustMonth.getMonth(),adjustMonth.getFullYear());if(adjustMonth.getDate()>_maxDate){adjustMonth.setDate(_maxDate);}}
return adjustMonth;};var exports={fromUnixTimestamp:fromUnixTimestamp,toUserString:toUserString,to8DigitString:to8DigitString,to14DigitString:to14DigitString,addMonths:addMonths};__webpack_exports__["default"]=(exports);}),532:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _scss_RR2018_components_rr_notification_shelf_scss__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(533);var _scss_RR2018_components_rr_notification_shelf_scss__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_scss_RR2018_components_rr_notification_shelf_scss__WEBPACK_IMPORTED_MODULE_0__);namespace("PLY.Directives.NotificationShelfDirective");(function(ns){ns.directive=function($rootScope,$timeout,$window){return{restrict:'E',replace:true,template:__webpack_require__(534),link:function link($scope,$element,attrs){if(PLY.Utils.settings('showNotifications')){$timeout(function(){var $notificationBell=angular.element('.notification-bell');$notificationBell.on('show.bs.dropdown',function(e){$scope.bellDropdownOpen=true;});$notificationBell.on('hide.bs.dropdown',function(e){$scope.bellDropdownOpen=false;});},5000);}},controller:function controller($scope){if(PLY.Utils.settings('showNotifications')){$scope.visible=false;$window.addEventListener('load',function(){$scope.windowLoaded=true;});$scope.dismiss=function(){$scope.visible=false;$scope.notification.closeAction();};$scope.isActive=function(){return $scope.visible&&$scope.notification&&$scope.notification.isVisible&&!$scope.notification.isQuieted();};$rootScope.$on('rr-highest-priority-notification-changed',function(e){var highestPriorityNotification=$rootScope.userNotificationState.getHighestPriorityNotification('shelf',{quieted:false});if(highestPriorityNotification){if($scope.isActive()){var ANIMATION_TIME=200;$scope.concealMessage=true;$timeout(function(){$scope.notification=highestPriorityNotification;$timeout(function(){$scope.concealMessage=false;},ANIMATION_TIME);},ANIMATION_TIME);}else{$timeout(function(){$scope.$watch('windowLoaded',function(){if($scope.windowLoaded){$scope.notification=highestPriorityNotification;$scope.visible=true;}});},1000);}}});}}};};PLY.App.Module.directive('rrNotificationShelf',['$rootScope','$timeout','$window',ns.directive]);})(PLY.Directives.NotificationShelfDirective);}),533:(function(module,exports,__webpack_require__){if(false){var cssReload;}}),534:(function(module,exports){module.exports="<div class=\"rr-notification-shelf type-{{ notification.displayAlertLevelName }}\" ng-class=\"{visible: isActive(), disableSticky: bellDropdownOpen, concealMessage: concealMessage}\">\n  <div class=\"rr-notification-shelf__left\">\n    <div class=\"rr-notification-shelf__icon\" ng-switch=\"notification.displayAlertLevelName\">\n      <i class=\"fa fa-info-circle\" ng-switch-default ></i>\n      <img src=\"//static.rocketreach.co/images/announcements/gift.svg\"  ng-switch-when=\"promotion\" />\n      <i class='fa fa-warning' ng-switch-when=\"warning\"></i>\n      <i class='fa fa-exclamation-circle' ng-switch-when=\"danger\"></i>\n    </div>\n    <div class=\"rr-notification-shelf__body\" ng-bind-html=\"notification.message\">\n    </div>\n    <a \n      ng-if=\"notification.ctaType === 'link'\" \n      ng-click=\"notification.ctaFunction(alert, $event)\" \n      ng-href=\"{{ notification.ctaLink }}\" \n      target=\"{{ notification.ctaLinkTarget }}\"\n    >{{ notification.ctaMessage }}</a>\n    <span class=\"rr-notification-shelf__cta\" ng-if=\"notification.ctaType && notification.ctaType !== 'link'\">\n        <button class=\"btn btn-primary\" ng-if=\"notification.ctaType === 'button'\" ng-click=\"notification.ctaFunction(alert, $event)\">{{ notification.ctaMessage }}</button>\n        <a      class=\"btn btn-primary\" ng-if=\"notification.ctaType === 'button-style-link'\" ng-click=\"notification.ctaFunction(alert, $event)\" ng-href=\"{{ notification.ctaLink }}\" target=\"{{ notification.ctaLinkTarget }}\">{{ notification.ctaMessage }}</a>\n    </span>\n  </div>\n  <div class=\"rr-notification-shelf__right\">\n    <div class=\"rr-notification-shelf__dismissal\" ng-if=\"notification.actionable\" ng-click=\"dismiss()\">\n      <i class=\"fa fa-close\"></i>\n    </div>\n  </div>\n</div>";}),535:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _scss_RR2018_components_rr_special_announcement_badge_scss__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(536);var _scss_RR2018_components_rr_special_announcement_badge_scss__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_scss_RR2018_components_rr_special_announcement_badge_scss__WEBPACK_IMPORTED_MODULE_0__);namespace("PLY.Directives.SpecialAnnouncementBadgeDirective");(function(ns){ns.directive=function($rootScope,$timeout,$window,$sce,AlertMessageModel){return{restrict:'E',replace:false,template:__webpack_require__(537),link:function link($scope,$element,attrs){},controller:function controller($scope){$scope.announcement=null;$rootScope.$on('rr-highest-priority-notification-changed',function(e){var highestPriorityNotification=$rootScope.userNotificationState.getHighestPriorityNotification('shelf',{quieted:true});if(PLY.Utils.settings('showNotifications')){if(highestPriorityNotification&&highestPriorityNotification.alertLevel===AlertMessageModel.AlertLevels.PROMOTION){$scope.announcement=highestPriorityNotification;$scope.tooltipMessage="<b>".concat(highestPriorityNotification.title,"</b><br/> ").concat(highestPriorityNotification.message);highestPriorityNotification.registerListener(function(eventName){if(eventName==='dismiss'){$scope.announcement=null;}});}else{$scope.announcement=null;}}});}};};PLY.App.Module.directive('rrSpecialAnnouncementBadge',['$rootScope','$timeout','$window','$sce','PLY.Models.AlertMessageModel',ns.directive]);})(PLY.Directives.SpecialAnnouncementBadgeDirective);}),536:(function(module,exports,__webpack_require__){if(false){var cssReload;}}),537:(function(module,exports){module.exports="\n<div class=\"rr-special-announcement-badge\" ng-show=\"announcement\" ng-class=\"{visible: announcement}\">\n  <div class=\"rr-special-announcement-badge__wpr\"\n    uib-tooltip-html=\"tooltipMessage\"\n    tooltip-append-to-body=\"true\"\n    tooltip-placement=\"auto bottom-right\"\n  >\n    <!-- badge bg -->\n    <i class=\"badge-background\">\n      <svg width=\"131\" height=\"131\" viewBox=\"0 0 131 131\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M65.9609 131C65.7866 131 65.5541 131 65.3798 131C62.8814 129.075 60.3829 127.033 57.7683 125.282C56.9548 124.757 55.6184 124.524 54.6888 124.757C52.1903 125.458 49.75 126.449 47.3677 127.499C45.9732 128.083 45.1017 127.908 44.2301 126.566C42.8938 124.407 41.3831 122.365 40.0467 120.265C39.117 118.807 38.0131 118.281 36.2118 118.398C33.2486 118.631 30.2272 118.456 27.0896 118.456C26.741 117.348 26.0437 116.181 25.9856 115.014C25.4627 109.063 22.4413 105.796 16.4566 105.329C13.4352 105.096 12.0408 103.579 12.6218 100.37C12.9123 98.6785 12.6218 96.8699 12.9123 95.1196C13.2028 93.2527 12.5637 92.0275 10.9949 90.9773C8.38023 89.3437 5.88178 87.5351 3.20901 85.6682C4.02246 83.3928 4.6035 81.2342 5.59126 79.3089C7.16006 76.2167 7.33437 73.533 4.42919 71.0826C3.32522 70.1492 2.68608 68.749 1.75642 67.6405C0.420041 66.0069 0.478145 64.5483 1.81453 62.9731C3.32522 61.1645 4.77781 59.3559 6.05609 57.4306C6.57902 56.6138 6.81143 55.2719 6.52092 54.3384C5.82367 51.8297 4.83591 49.4377 3.79005 46.9873C3.20901 45.5871 3.44143 44.712 4.71971 43.8369C6.86954 42.495 8.84506 40.9781 10.9949 39.6362C12.4475 38.7028 12.9704 37.5943 12.8542 35.7856C12.6218 32.8102 12.7961 29.7764 12.7961 26.6259C13.2609 26.4509 13.9001 25.9842 14.5392 25.9258C21.6859 25.2841 25.8694 21.6085 26.3923 14.1991C26.5085 12.3321 27.6706 11.632 29.3556 12.0404C36.5605 13.7907 41.3831 11.0486 44.172 4.39758C44.8112 2.88069 45.9732 2.53064 47.4258 3.28908C48.1812 3.69748 49.1108 3.81416 49.8662 4.2809C54.3983 7.08132 58.0588 6.14785 61.8355 2.53064C65.3798 -0.853207 65.9609 -0.853207 69.5633 2.58898C73.3981 6.26453 76.8843 6.55624 81.5907 4.33924C86.5876 1.94722 85.658 1.53882 88.447 6.43956C91.0616 10.9902 93.9668 13.1489 99.4866 12.2738C104.309 11.5153 104.832 11.9821 105.646 16.8245C106.517 21.9586 109.074 24.3506 114.071 25.2841C118.893 26.2175 119.242 26.6259 118.603 31.4683C117.905 36.7191 119.59 39.7529 124.181 42.3783C129.468 45.4121 128.887 44.1869 126.389 49.6711C124.355 54.2218 124.645 57.5473 128.074 61.2228C131.676 65.0734 131.676 65.6568 128.132 69.4491C124.645 73.1246 124.355 76.4501 126.389 81.0008C128.829 86.4266 129.468 85.2598 123.948 88.4686C119.59 90.9773 117.557 93.9528 118.719 98.9118C118.835 99.4953 118.661 100.079 118.777 100.662C119.3 103.346 118.254 104.979 115.523 105.213C109.248 105.68 105.82 108.947 105.355 115.306C105.181 117.99 103.67 119.273 100.881 118.631C94.4897 117.115 90.1901 119.623 87.6916 125.574C86.8201 127.675 85.4256 128.433 83.1595 127.208C81.2421 126.158 79.0923 125.399 76.9424 124.874C75.8385 124.582 74.3278 124.816 73.3981 125.458C70.7835 127.149 68.4012 129.133 65.9609 131Z\" fill=\"black\"/>\n      </svg>\n    </i>\n    \n\n    <div class=\"gift-icon\" >\n      <a \n        ng-if=\"announcement.ctaType === 'link' || announcement.ctaType === 'button-style-link'\" \n        ng-click=\"announcement.ctaFunction(alert, $event)\" \n        ng-href=\"{{ announcement.ctaLink }}\" \n        target=\"{{ announcement.ctaLinkTarget }}\"\n      >\n        <img src=\"//static.rocketreach.co/images/announcements/gift.svg\" />\n      </a>\n      <span \n        ng-if=\"announcement.ctaType === 'button'\"\n        ng-click=\"announcement.ctaFunction(alert, $event)\"\n      >\n        <img src=\"//static.rocketreach.co/images/announcements/gift.svg\" />\n      </span>\n    </div>\n  </div>\n</div>";}),61:(function(module,exports,__webpack_require__){(function(root,pluralize){if(true){module.exports=pluralize();}else{}})(this,function(){var pluralRules=[];var singularRules=[];var uncountables={};var irregularPlurals={};var irregularSingles={};function sanitizeRule(rule){if(typeof rule==='string'){return new RegExp('^'+rule+'$','i');}
return rule;}
function restoreCase(word,token){if(word===token)return token;if(word===word.toLowerCase())return token.toLowerCase();if(word===word.toUpperCase())return token.toUpperCase();if(word[0]===word[0].toUpperCase()){return token.charAt(0).toUpperCase()+token.substr(1).toLowerCase();}
return token.toLowerCase();}
function interpolate(str,args){return str.replace(/\$(\d{1,2})/g,function(match,index){return args[index]||'';});}
function replace(word,rule){return word.replace(rule[0],function(match,index){var result=interpolate(rule[1],arguments);if(match===''){return restoreCase(word[index-1],result);}
return restoreCase(match,result);});}
function sanitizeWord(token,word,rules){if(!token.length||uncountables.hasOwnProperty(token)){return word;}
var len=rules.length;while(len--){var rule=rules[len];if(rule[0].test(word))return replace(word,rule);}
return word;}
function replaceWord(replaceMap,keepMap,rules){return function(word){var token=word.toLowerCase();if(keepMap.hasOwnProperty(token)){return restoreCase(word,token);}
if(replaceMap.hasOwnProperty(token)){return restoreCase(word,replaceMap[token]);}
return sanitizeWord(token,word,rules);};}
function checkWord(replaceMap,keepMap,rules,bool){return function(word){var token=word.toLowerCase();if(keepMap.hasOwnProperty(token))return true;if(replaceMap.hasOwnProperty(token))return false;return sanitizeWord(token,token,rules)===token;};}
function pluralize(word,count,inclusive){var pluralized=count===1?pluralize.singular(word):pluralize.plural(word);return(inclusive?count+' ':'')+pluralized;}
pluralize.plural=replaceWord(irregularSingles,irregularPlurals,pluralRules);pluralize.isPlural=checkWord(irregularSingles,irregularPlurals,pluralRules);pluralize.singular=replaceWord(irregularPlurals,irregularSingles,singularRules);pluralize.isSingular=checkWord(irregularPlurals,irregularSingles,singularRules);pluralize.addPluralRule=function(rule,replacement){pluralRules.push([sanitizeRule(rule),replacement]);};pluralize.addSingularRule=function(rule,replacement){singularRules.push([sanitizeRule(rule),replacement]);};pluralize.addUncountableRule=function(word){if(typeof word==='string'){uncountables[word.toLowerCase()]=true;return;}
pluralize.addPluralRule(word,'$0');pluralize.addSingularRule(word,'$0');};pluralize.addIrregularRule=function(single,plural){plural=plural.toLowerCase();single=single.toLowerCase();irregularSingles[single]=plural;irregularPlurals[plural]=single;};[['I','we'],['me','us'],['he','they'],['she','they'],['them','them'],['myself','ourselves'],['yourself','yourselves'],['itself','themselves'],['herself','themselves'],['himself','themselves'],['themself','themselves'],['is','are'],['was','were'],['has','have'],['this','these'],['that','those'],['echo','echoes'],['dingo','dingoes'],['volcano','volcanoes'],['tornado','tornadoes'],['torpedo','torpedoes'],['genus','genera'],['viscus','viscera'],['stigma','stigmata'],['stoma','stomata'],['dogma','dogmata'],['lemma','lemmata'],['schema','schemata'],['anathema','anathemata'],['ox','oxen'],['axe','axes'],['die','dice'],['yes','yeses'],['foot','feet'],['eave','eaves'],['goose','geese'],['tooth','teeth'],['quiz','quizzes'],['human','humans'],['proof','proofs'],['carve','carves'],['valve','valves'],['looey','looies'],['thief','thieves'],['groove','grooves'],['pickaxe','pickaxes'],['passerby','passersby']].forEach(function(rule){return pluralize.addIrregularRule(rule[0],rule[1]);});[[/s?$/i,'s'],[/[^\u0000-\u007F]$/i,'$0'],[/([^aeiou]ese)$/i,'$1'],[/(ax|test)is$/i,'$1es'],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,'$1es'],[/(e[mn]u)s?$/i,'$1s'],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,'$1'],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,'$1i'],[/(alumn|alg|vertebr)(?:a|ae)$/i,'$1ae'],[/(seraph|cherub)(?:im)?$/i,'$1im'],[/(her|at|gr)o$/i,'$1oes'],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,'$1a'],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,'$1a'],[/sis$/i,'ses'],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,'$1$2ves'],[/([^aeiouy]|qu)y$/i,'$1ies'],[/([^ch][ieo][ln])ey$/i,'$1ies'],[/(x|ch|ss|sh|zz)$/i,'$1es'],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,'$1ices'],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,'$1ice'],[/(pe)(?:rson|ople)$/i,'$1ople'],[/(child)(?:ren)?$/i,'$1ren'],[/eaux$/i,'$0'],[/m[ae]n$/i,'men'],['thou','you']].forEach(function(rule){return pluralize.addPluralRule(rule[0],rule[1]);});[[/s$/i,''],[/(ss)$/i,'$1'],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,'$1fe'],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,'$1f'],[/ies$/i,'y'],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,'$1ie'],[/\b(mon|smil)ies$/i,'$1ey'],[/\b((?:tit)?m|l)ice$/i,'$1ouse'],[/(seraph|cherub)im$/i,'$1'],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,'$1'],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,'$1sis'],[/(movie|twelve|abuse|e[mn]u)s$/i,'$1'],[/(test)(?:is|es)$/i,'$1is'],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,'$1us'],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,'$1um'],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,'$1on'],[/(alumn|alg|vertebr)ae$/i,'$1a'],[/(cod|mur|sil|vert|ind)ices$/i,'$1ex'],[/(matr|append)ices$/i,'$1ix'],[/(pe)(rson|ople)$/i,'$1rson'],[/(child)ren$/i,'$1'],[/(eau)x?$/i,'$1'],[/men$/i,'man']].forEach(function(rule){return pluralize.addSingularRule(rule[0],rule[1]);});['adulthood','advice','agenda','aid','aircraft','alcohol','ammo','analytics','anime','athletics','audio','bison','blood','bream','buffalo','butter','carp','cash','chassis','chess','clothing','cod','commerce','cooperation','corps','debris','diabetes','digestion','elk','energy','equipment','excretion','expertise','firmware','flounder','fun','gallows','garbage','graffiti','hardware','headquarters','health','herpes','highjinks','homework','housework','information','jeans','justice','kudos','labour','literature','machinery','mackerel','mail','media','mews','moose','music','mud','manga','news','only','personnel','pike','plankton','pliers','police','pollution','premises','rain','research','rice','salmon','scissors','series','sewage','shambles','shrimp','software','species','staff','swine','tennis','traffic','transportation','trout','tuna','wealth','welfare','whiting','wildebeest','wildlife','you',/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(pluralize.addUncountableRule);return pluralize;});})});(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/js_dist/";return __webpack_require__(__webpack_require__.s=525);})
({11:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var ONBOARD_STORAGE_NAME='search_page_onboarding';var exports={shouldOnboard:function shouldOnboard(){var value=PLY.Utils.localStorage(ONBOARD_STORAGE_NAME);var searchParams=new URLSearchParams(window.location.search);var forceOnboard=searchParams.get('onboard')&&searchParams.get('onboard')==='true';return forceOnboard||JSON.parse(value)===true;},onboardStateSet:function onboardStateSet(){return!!PLY.Utils.localStorage(ONBOARD_STORAGE_NAME);},setOnboard:function setOnboard(value){value=JSON.stringify(value);PLY.Utils.localStorage(ONBOARD_STORAGE_NAME,value);}};__webpack_exports__["default"]=(exports);}),299:(function(module,exports){var experimentationModelFactory=function experimentationModelFactory(parent,experimentModel,$q,$timeout,$location,$log,$cookies){var experimentPromises={};var ORIGINAL_VARIATION_ID=0;var NOT_PARTICIPATING=-2;var dbExperimentsPromise=experimentModel.getExperimentSessions();var TIMEOUT_DELAY_MILLIS=5000;var getStoredVariant=function getStoredVariant(experiment_id){return dbExperimentsPromise.then(function success(dbExperiments){var dbExperiment=dbExperiments[experiment_id];if(dbExperiment!==undefined){storeSelectedVariant(experiment_id,dbExperiment.variant,true);return dbExperiment.variant;}},function failure(error){$log.error('exp error:',error);return undefined;});};var storeSelectedVariant=function storeSelectedVariant(experiment_id,variant,doNotPushToBackend){if(Number.isInteger(variant)){if(!doNotPushToBackend){experimentModel.postExperimentSession(experiment_id,variant);}}};var setVariant=function setVariant(experiment_id,variant){return experimentModel.postExperimentSession(experiment_id,variant);};var forceVariantAndReload=function forceVariantAndReload(experiment,variantIndex,urlToRedirectTo){if(variantIndex!==undefined){storeSelectedVariant(experiment.id,variantIndex);if(urlToRedirectTo){humane.info("Set experiment '"+(experiment.name||experiment.id)+"' variant to: "+getVariantName(variantIndex)+".<br><span class=\"animated-ellipsis\">Going to page: "+urlToRedirectTo+"</span>");if(urlToRedirectTo==='<reload>'){urlToRedirectTo=$location.absUrl();}
$timeout(function(){window.location.href=urlToRedirectTo;},3000);}}};var getVariantName=function getVariantName(id){var lower=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var result='CONTROL';if(id>0){result='ABCDEFGHIJKLMNOPQRSTUVWXYZ'[id-1];}
return lower?result.toLowerCase():result;};var getExperiments=function getExperiments(){return experimentModel.getActiveExperiments();};var loadedExperimentCodePromise=null;var loadGAExperimentation=function loadGAExperimentation(experimentId){if(!loadedExperimentCodePromise){loadedExperimentCodePromise=$q(function(resolve,reject){try{(function(i,s,o,g,r,a,m){a=s.createElement(o);m=s.getElementsByTagName(o)[0];a.async=1;a.src=g+r;a.onload=function(){if(typeof cxApi==='undefined'){var errorMessage="Unable to load experiment code for experimentId=".concat(experimentId);console.error(errorMessage);reject(errorMessage);}else{resolve(cxApi);}};m.parentNode.insertBefore(a,m);})(window,document,'script','//www.google-analytics.com/cx/api.js',"");}catch(e){var errorMessage="Error while loading experimentation for experimentId=".concat(experimentId);console.error(errorMessage);reject(e);}});}
return loadedExperimentCodePromise;};var getVariant=function getVariant(experimentKey){var timeout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:TIMEOUT_DELAY_MILLIS;var experimentDeferred=$q.defer();if(!experimentKey){$log.error("Experiment key ".concat(experimentKey,"is not a valid experiment."));experimentDeferred.resolve(ORIGINAL_VARIATION_ID);return experimentDeferred.promise;}
if(experimentPromises[experimentKey]){return experimentPromises[experimentKey];}
experimentPromises[experimentKey]=experimentDeferred.promise;var resolved=false;var timeoutPromise=$timeout(function(){if(!resolved){experimentDeferred.resolve(ORIGINAL_VARIATION_ID);}},timeout);var experimentId=experimentKey;getStoredVariant(experimentId).then(function(storedVariant){$timeout.cancel(timeoutPromise);if(storedVariant!==undefined){loadGAExperimentation(experimentId).then(function success(experimentAPI){experimentAPI.setChosenVariation(storedVariant,experimentId);});experimentDeferred.resolve(storedVariant);}else{loadGAExperimentation(experimentId).then(function success(experimentAPI){experimentAPI.setChosenVariation(NOT_PARTICIPATING,experimentId);});experimentDeferred.resolve(NOT_PARTICIPATING);}});return experimentDeferred.promise;};return{getVariantName:getVariantName,getVariant:getVariant,setVariant:setVariant,forceVariantAndReload:forceVariantAndReload,getExperiments:getExperiments};};var module=angular.module('PLYApp');module.factory('PLY.Models.ExperimentationModel',["PLY.Models","PLY.Models.ExperimentModel","$q","$timeout","$location","$log","$cookies",experimentationModelFactory]);}),379:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _resources_onboarding_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);var _integrations_model_es6__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(380);var _orderModel_es6__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(382);var _orderModel_es6__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_orderModel_es6__WEBPACK_IMPORTED_MODULE_2__);var _paymentInfo_es6__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(383);var _paymentInfo_es6__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_paymentInfo_es6__WEBPACK_IMPORTED_MODULE_3__);namespace("PLY.Models.UserModel").extend(PLY.Models);(function(ns){var _currentUser;ns.Roles={Unknown:-1,Other:0,Recruiting:1,Sales:2,Marketing:3};ns.userModelFactory=function(parent,PaymentInfoModel,BrowserExtensionModel,IntegrationsModel,$http,$httpParamSerializerJQLike,$httpParamSerializer,$log,$cookies,$q,$rootScope,$location,$interval){var extensionChecked=false;var ProductModelEssentials={LookupOperationType:{StandardLookup:1,PremiumLookup:2,BulkLookup:3,PhoneLookup:5,PersonEnrich:6,Export:9},OperationTypeDisplay:{1:'Lookup',2:'Premium Lookup',3:'Bulk Lookup',4:'Search',5:'Phone Lookup',6:'Enrich',9:'Export'}};ns.User=function(data){var _this=this;var _self=this;var _={};var _protectedAttributes=["candidateSearches","paymentInfo","latestPaymentInfo","paymentInfoList"];_protectedAttributes.forEach(ns.declareProtectedAttribute.bind(_self,_));Object.defineProperty(_self,"isNormalTeamMember",{get:function get(){return _self.isTeamAccount&&!_self.isTeamAccountOwner&&!_self.isTeamAccountAdmin&&!_self.isTeamAccountManager;}});Object.defineProperty(_self,"displayName",{get:function get(){if(_self.state=="registered"){return(_self.firstName||"")+(_self.lastName?" "+_self.lastName:"");}
return"anonymous";}});Object.defineProperty(_self,"totalProfileCount",{get:function get(){if(_.totalProfileCount==undefined){throw Error("must explicitly call user.refreshProfileCount() first");}
return _.totalProfileCount;}});Object.defineProperty(this,"canSearch",{get:function get(){return _this.isPayingUser||_this.lookupCreditBalance>0||_this.source==500;}});Object.defineProperty(this,'tooManyDevices',{get:function get(){return(_this.concurrentDevices||1)>(_this.concurrentDeviceLimit||Infinity);}});Object.defineProperty(this,'isExportLimited',{get:function get(){return ProductModelEssentials.LookupOperationType.Export in _this.credits;}});Object.defineProperty(this,'exportOrLookupDisplay',{get:function get(){if(_this.isExportLimited){return ProductModelEssentials.OperationTypeDisplay[ProductModelEssentials.LookupOperationType.Export];}else{return ProductModelEssentials.OperationTypeDisplay[ProductModelEssentials.LookupOperationType.StandardLookup];}}});Object.defineProperty(this,'recentlySignedUp',{get:function get(){var daysThresholdSinceRegistration=3;var daysMs=daysThresholdSinceRegistration*86400*1000;return Date.now()-Date.parse(_this.createTime)<=daysMs;}});Object.defineProperty(this,'activeCreditsUsed',{get:function get(){var totalActiveCreditsUsed=0;Object.keys(_this.credits).forEach(function(creditsIssuedType){var creditsIssuedObj=_this.credits[creditsIssuedType];totalActiveCreditsUsed+=creditsIssuedObj.used||0;});return totalActiveCreditsUsed;}});Object.defineProperty(this,'exportOrLookupCredits',{get:function get(){if(_this.credits[ProductModelEssentials.LookupOperationType.Export]){return _this.credits[ProductModelEssentials.LookupOperationType.Export];}else{return{issued:_this.lookupCreditsIssueds,type:'lookup',remaining:_this.lookupCreditBalance,rollover_credits:_this.lookupCreditRolloverBalance,overage_price:_this.effectiveLookupCreditOveragePrice,overages_used:_this.lookupCreditOverage,overages_used_price:_this.lookupCreditOverageAmount,overages_remaining:_this.lookupCreditOverageBalance};}}});var _publicAttributes=[{jsName:"firstName",pyName:"first_name"},{jsName:"lastName",pyName:"last_name"},"email","country_code","id","role","state","lookup_credit_balance","lookup_credit_rollover_balance","rollover_credits_enabled","can_enable_overages","lookup_credit_overage_balance","lookup_credit_overage","lookup_credit_overage_amount","credits","num_free_lookups","default_product","lifetime_credits_spent","lifetime_api_num_calls","domain","api_key_domain","daily_api_num_calls","lookup_credits_issueds","concurrent_devices","concurrent_device_limit","device_limit_logged_out","product","plan_end_date","api_key","source","is_beta_tester","is_super_user","is_verified","is_paid_trial_eligible","is_new_subscriber","claimed_free_credits","trial_time_left","trial_start_time","trial_end_time",'paid_trial_converted_and_handled',"is_subscribed","next_billing_date","has_installed_companion","has_used_outreach","is_companion_offer_eligible","is_outreach_offer_eligible","enable_receipts","is_paying_user","paused_subscription","has_past_due_payment","has_phone_lookups","has_grandfathered_standard_phones","num_seats","is_team_account","is_team_account_owner","is_team_account_admin","is_team_account_manager","team_account_id","team_invites","can_enable_overages","can_incur_overages","has_enabled_overages","override_lookup_credit_overage_price","override_lookup_credit_overage_minimum","effective_lookup_credit_overage_price","product_lookup_credit_overage_price","override_search_credit_overage_price","override_search_credit_overage_minimum","effective_search_credit_overage_price","product_search_credit_overage_price","metered_balance","metered_overage","metered_usage","plugin_settings","is_trusted","filter_eu_profiles","prevent_eu_emailing","email_type_preference","lookup_operation_type_order","salesforce_import_type","integrations","create_time","target_profile","subscribe_time",'is_onboarded','recently_subscribed'];this.setPaymentInfo=function(paymentData){if(paymentData){_.paymentInfo=paymentData;}};this.setLatestPaymentInfo=function(paymentData){if(paymentData){_.latestPaymentInfo=paymentData;}};this.setAllPaymentInfos=function(paymentData){if(paymentData){_.paymentInfoList=paymentData;}};this.shouldOfferTrial=function(){if(this.isCurrentlyOnPaidProduct()){return false;}
if(this.claimedFreeCredits||!this.isPaidTrialEligible){return false;}
if(this.isTeamAccount){return false;}
return true;};_.pendingProfileCountDefrerred=undefined;this.refreshProfileCount=function(){if(!_.totalProfileCount){_.totalProfileCount=0;}
if(!_.pendingProfileCountDefrerred){_.pendingProfileCountDefrerred=$q.defer();$http({method:'GET',url:'/v1/profileList/profiles/count'}).then(function success(response){if(response&&response.data&&response.data.count){_.totalProfileCount=response.data.count;}
_.pendingProfileCountDefrerred.resolve(_.totalProfileCount);_.pendingProfileCountDefrerred=undefined;},function error(e){_.pendingProfileCountDefrerred.resolve(_.totalProfileCount);_.pendingProfileCountDefrerred=undefined;$log.error("Error while retrieving profile count",e);});}
return _.pendingProfileCountDefrerred.promise;};this.pauseSubscription=function(){var monthsToPauseFor=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return $http.post("/v1/services/subscription/pause/",{months:monthsToPauseFor}).then(function(response){return response.data;});};this.canPauseSubscription=function(){if(!_this.isPayingUser)return false;if(_this.isTrialing())return false;if(!!_this.pausedSubscription)return false;if(_this.product.isAnnual)return false;return true;};this.update=function(data){data=data||{};_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));if(data.integrations){_self.integrations=new IntegrationsModel.createIntegrations(data.integrations);}
if(data.product){_self.product=PLY.Utils.convertObjectKeys.snakeToCamel(data.product);_self.productInfo=PLY.Utils.convertObjectKeys.snakeToCamel(data.product);_self.productRawData=data.product;}
if(data.paused_subscription){_self.pausedSubscription=PLY.Utils.convertObjectKeys.snakeToCamel(data.paused_subscription);_self.pausedSubscriptionInfo=PLY.Utils.convertObjectKeys.snakeToCamel(data.paused_subscription);_self.pausedSubscriptionRawData=data.paused_subscription;}
if(_self.targetProfile){_self.targetProfile=PLY.Utils.convertObjectKeys.snakeToCamel(_self.targetProfile);}
for(var _i=0,_arr=['lookupCreditBalance','lookupCreditOverageBalance'];_i<_arr.length;_i++){var attr=_arr[_i];if(_self[attr]==='inf'){_self[attr]=Infinity;}}
for(var operationType in _self.credits){if(_self.credits.hasOwnProperty(operationType)){for(var _i2=0,_arr2=['issued','remaining','overages_remaining'];_i2<_arr2.length;_i2++){var attr=_arr2[_i2];if(_self.credits[operationType][attr]==='inf'){_self.credits[operationType][attr]=Infinity;}}}}};this.startTrial=function(){return $http.post("/v1/startTrial").then(function success(response){_currentUser.update(response.data);});};this.checkTrialConvertedAndNotHandled=function(){var convertedButNotHandled=$q.defer();var status={NOT_TRIAL_CONVERT:-1,CONVERTED_NOT_HANDLED:0,CONVERTED_AND_HANDLED:1};if(this.paidTrialConvertedAndHandled===status.CONVERTED_NOT_HANDLED){return $http.post("/v1/handledTrialConversion").then(function(response){_currentUser.update(response.data);return _currentUser;});}else{convertedButNotHandled.reject('Not needed to handle');}
return convertedButNotHandled.promise;};this.completeOrder=function(orderData){return $http.post("/v1/services/completeOrder",orderData).then(function success(response){_currentUser.update(response.data);});};this.getPaymentInfo=function(force){if(_currentUser.paymentInfo&&!force){return ns.simulateResponse(_currentUser.paymentInfo);}
var params=null;if(this.update_payment_method_token){params={user_id:this.id,update_payment_method_token:this.update_payment_method_token};}
return $http.get("/v1/paymentInfo",{params:params}).then(function success(response){if(response&&response.data){_currentUser.setPaymentInfo(response.data);return response.data;}});};this.getLatestPaymentInfo=function(providerId){if(_currentUser.latestPaymentInfo){return ns.simulateResponse(_currentUser.latestPaymentInfo);}
return PaymentInfoModel.getLatestPaymentInfo(providerId).then(function(paymentInfo){_currentUser.setLatestPaymentInfo(paymentInfo);return paymentInfo;});};this.getAllPaymentInfos=function(){if(_currentUser.allPaymentInfos){return ns.simulateResponse(_currentUser.allPaymentInfos);}
return PaymentInfoModel.getAllPaymentInfos().then(function(paymentInfoList){_currentUser.setAllPaymentInfos(paymentInfoList);return paymentInfoList;});};this.broadcastBalance=function(){$rootScope.$broadcast("rr-credit-balance-updated",_this);};this.deductCredit=function(){var count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(_this.lookupCreditBalance%10===0){_this.refreshLookupCount();}
if(_this.lookupCreditBalance<1){_this.refreshLookupCount();}
var spent=Math.min(count,_this.lookupCreditBalance);if(_this.lookupCreditBalance>0){_this.lookupCreditBalance-=spent;}
if(_this.lookupCreditRolloverBalance>0){_this.lookupCreditRolloverBalance-=spent;}
if(spent<count){var over=count-spent;_this.lookupCreditOverageBalance-=over;_this.lookupCreditOverage+=over;}
_this.broadcastBalance();};this.refundCredit=function(){var count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(_this.lookupCreditOverage>0){var reversed=Math.min(_this.lookupCreditOverage,count);_this.lookupCreditOverage-=reversed;count-=reversed;}
if(count){_this.lookupCreditBalance+=count;}
_this.broadcastBalance();};this.isAnonymous=function(){return _self.state!='registered';};this.shouldBeOnboarded=function(){return['/','/search'].indexOf($location.path())!==-1&&_resources_onboarding_state__WEBPACK_IMPORTED_MODULE_0__["default"].shouldOnboard();};this.isRegistered=function(){return _self.state=='registered';};this.isCurrentlyOnPaidProduct=function(){return _self.product&&_self.product.purchasePrice>0;};this.getExpVariant=function(expId){return $http({url:"/v1/experiments",method:"GET",cache:ns.getHTTPCache()}).then(function(response){var experiments=response&&response.data;var experimentObj={};if(Array.isArray(experiments)){experiments.forEach(function(experiment){experimentObj[experiment.id]=experiment.variant;});}
return experimentObj[expId];});};this.getPostSignupURL=function(next){var browserExtensionOnboarding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!next)next='/';var postSignupURL=next;if(next.startsWith('/browser_extension')){browserExtensionOnboarding=false;}
if(browserExtensionOnboarding==null){browserExtensionOnboarding=false;}
if(browserExtensionOnboarding){var params=$httpParamSerializer({'next':next,'onboarding':true});postSignupURL='/browser_extension?'+params;}
return postSignupURL;};this.refreshLookupCount=function(){return $http.get("/v1/user/balance/").then(function(response){if(response&&response.data){_currentUser.update(response.data);_this.broadcastBalance();}
return response;});};this.canRelookupProfile=function(profile){if(!this.hasPhoneLookups)return false;try{return profile.lookupType===ProductModelEssentials.LookupOperationType.StandardLookup&&profile.status==='complete'&&profile.numTeaserPhones()>0;}catch(e){return false;}};this.deactivate=function(reason){var data={reason:reason};return $http.post('/v1/deactivate/',data);};this.isTrialing=function(){return _this.trialTimeLeft>0;};this.update(data);this.refreshProfileCount();};ns.updatePluginInstallationState=function(browser){var deferred=$q.defer();ns.getExtensionId().then(function(extensionId){try{if(PLY.Utils.isOnDesktop()&&typeof chrome!=="undefined"&&chrome.runtime){var method='version';chrome.runtime.sendMessage(extensionId,{method:method},function(reply){if(reply&&reply.version){_currentUser.hasInstalledCompanion=true;$rootScope.$broadcast('plugin-installed',{browser:browser});$rootScope.$apply();deferred.resolve(true);}else{deferred.resolve(false);}});}else{deferred.resolve(false);}}catch(e){deferred.resolve(false);}});return deferred.promise;};ns.resendVerification=function(){return $http.post("/v1/resendVerification");};ns.regenerateAPIKey=function(){var data={"api_key":_currentUser.apiKey};return $http.post("/api/account/key",data).then(function(response){if(response&&response.data&&response.data.api_key){_currentUser.apiKey=response.data.api_key;}
return _currentUser.apiKey;},function(error){console.log(error);});};ns.saveProfile=function(nameData){if(nameData&&nameData.firstName&&nameData.lastName){return $http.put("/v1/user",{"first_name":nameData.firstName,"last_name":nameData.lastName,"email":nameData.email}).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}});}else{return ns.simulateError("Name Data passed in was corrupt");}};ns.savePassword=function(nameData){if(nameData&&nameData.oldPassword&&nameData.password&&nameData.password==nameData.confirmPassword){return $http.put("/v1/user",{"old_password":nameData.oldPassword,"password":nameData.password}).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}});}else{return ns.simulateError("Name Data passed in was corrupt");}};ns.storeCancellationData=function(type,value){var version=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var data={};if(version)data['version']=version;data[type]=value;return $http.post('/v1/cancellation/reason',data);};ns.claimCancellationCredits=function(){return $http.post('/v1/cancellation/claimCredits');};ns.setUninstallReason=function(reason){return $http.post('/v1/uninstall/reason',{'reason':reason});};ns.setUserValue=function(field,value){var data={};data[field]=value;return $http.put("/v1/user",data).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}
return response;});};ns.setEnableReceipts=function(value){return ns.setUserValue("enable_receipts",value);};ns.setEnableOverages=function(value){return ns.setUserValue("has_enabled_overages",value);};ns.setFilterEUProfiles=function(value){return ns.setUserValue("filter_eu_profiles",value);};ns.setPreventEUEmailing=function(value){return ns.setUserValue("prevent_eu_emailing",value);};ns.setEmailTypePreference=function(value){return ns.setUserValue("email_type_preference",value);};ns.setLookupOperationTypeOrder=function(value){return ns.setUserValue("lookup_operation_type_order",value);};ns.setSalesforceImportType=function(value){return ns.setUserValue("salesforce_import_type",value);};ns.setAutoImport=function(value){return ns.setUserValue("auto_import",value);};ns.saveAPIDomain=function(domain){if(domain&&domain.length){return $http.put("/v1/user",{"api_key_domain":domain}).then(function success(response){if(response&&response.data){_currentUser.update(response.data);}});}else{return ns.simulateError("Name Data passed in was corrupt");}};var _saveCurrentUser=function _saveCurrentUser(response){if(response&&response.data){var data=response.data;if(data&&!data.error){if(!_currentUser){_currentUser=new ns.User(data);if(!_currentUser.hasInstalledCompanion&&!extensionChecked){extensionChecked=true;ns.updatePluginInstallationState();}}else{_currentUser.update(data);}
return _currentUser;}}else{throw new Error('Malformed response from User Web Service');}};ns.getUserInfo=function(flush){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var handleErrorResponse=function handleErrorResponse(errorResponse){return $q.reject((errorResponse.data||{}).detail||"Unable to connect to RocketReach. Please try again.");};if(_currentUser&&!flush){return ns.simulateResponse(_currentUser);}else{return $http({url:'/v1/user',params:params,method:'GET',cache:flush?undefined:ns.getHTTPCache()}).then(_saveCurrentUser,handleErrorResponse);}};ns.getExtensionId=function(){var deferred=$q.defer();BrowserExtensionModel.getBrowserExtensionProperties().then(function(response){if(response&&response.data&&response.data.extension){var extensionId=response.data.extension.extension_id;return deferred.resolve(extensionId);}
return deferred.reject();});return deferred.promise;};ns.signupUser=function(userData,forcePhone,sourcePage){userData.csrfmiddlewaretoken=$cookies.get('validation_token');if(sourcePage)userData['sourcePage']=sourcePage;userData.force_phone=Boolean(forcePhone);return $http({url:'/v1/signup',headers:{'Content-Type':'application/x-www-form-urlencoded'},data:$httpParamSerializerJQLike(userData),method:'POST'}).then(_saveCurrentUser);};ns.isUniqueEmail=function(email,domainOnly){return $http({url:"/v1/validateEmail",params:{"email_address":email,"check_domain_only":domainOnly},method:'GET'});};var refreshLookupCounterSeconds=3600;$interval(function(){return _currentUser&&_currentUser.refreshLookupCount();},refreshLookupCounterSeconds*1000);$rootScope.$on('rr-deduct-lookup-credits',function(ev,count){return _currentUser&&_currentUser.deductCredit(count);});$rootScope.$on('rr-refund-lookup-credits',function(ev,count){return _currentUser&&_currentUser.refundCredit(count);});return ns;};PLY.App.Module.factory('PLY.Models.UserModel',["PLY.Models","PLY.Models.PaymentInfoModel",'PLY.Models.BrowserExtensionModel','PLY.Models.IntegrationsModel',"$http","$httpParamSerializerJQLike","$httpParamSerializer","$log","$cookies","$q","$rootScope","$location","$interval",ns.userModelFactory]);})(PLY.Models.UserModel);}),380:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _integration_model_es6__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(381);var _integration_model_es6__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_integration_model_es6__WEBPACK_IMPORTED_MODULE_0__);function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}
function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}
function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
namespace("PLY.Models.IntegrationsModel").extend(PLY.Models);(function(ns){ns.IntegrationsModelFactory=function(parent,IntegrationModel){ns.Integrations=function(integrations){var _this=this;var _self=this;this.update=function(integrations){_self.integrationDict={};for(var _i=0,_Object$entries=Object.entries(integrations);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),integrationName=_Object$entries$_i[0],integration=_Object$entries$_i[1];_self.integrationDict[integrationName]=integration;}};this.update(integrations);this.getAllIntegrations=function(){return Object.values(_self.integrationDict);};this.manualSyncAvailable=function(){var _iterator=_createForOfIteratorHelper(_this.getAllIntegrations()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var integration=_step.value;if(integration.manualSyncAvailable())return true;}}catch(err){_iterator.e(err);}finally{_iterator.f();}
return false;};this.getFirstAvailableIntegration=function(){var _iterator2=_createForOfIteratorHelper(_this.getAllIntegrations()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var integration=_step2.value;if(integration.isConnected){return integration.integrationName;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}
return null;};};ns.createIntegrations=function(data){var integrations={};for(var _i2=0,_Object$entries2=Object.entries(data);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),integrationName=_Object$entries2$_i[0],integrationData=_Object$entries2$_i[1];integrations[integrationName]=new IntegrationModel.getIntegration(integrationName,integrationData);}
return new ns.Integrations(integrations);};return ns;};PLY.App.Module.factory('PLY.Models.IntegrationsModel',['PLY.Models','PLY.Models.IntegrationModel',ns.IntegrationsModelFactory]);})(PLY.Models.IntegrationsModel);}),381:(function(module,exports){namespace("PLY.Models.IntegrationModel").extend(PLY.Models);(function(ns){ns.IntegrationModelFactory=function($http){ns.Integration=function(integrationName,data){var _this=this;var _self=this;var _publicAttributes=['is_eligible','is_connected','is_syncing','total_unsynced','auto_import'];this.update=function(integrationName,data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_self,data));_self.integrationName=integrationName;_self.integrationNameLower=integrationName.toLowerCase();};this.update(integrationName,data);this.manualSyncAvailable=function(){return _self.isConnected&&_self.autoImport;};this.getUrl=function(baseUrl,profileListId){if(profileListId){baseUrl="".concat(baseUrl,"?profileListId=").concat(profileListId);}
return baseUrl;};this.syncAllContacts=function(){var profileListId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'null';var url=_this.getUrl("/".concat(_self.integrationNameLower,"_sync_all"),profileListId);$http.get(url)["finally"](function(response){_self.isSyncing[profileListId]=true;return response;});};this.cancelSyncAllContacts=function(){var profileListId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'null';var url=_this.getUrl("/".concat(_self.integrationNameLower,"_cancel_sync_all"),profileListId);$http.get(url)["finally"](function(response){_self.isSyncing[profileListId]=false;return response;});};this.syncOrCancelAllContacts=function(){if(_self.isSyncing){return _this.cancelSyncAllContacts();}else{return _this.syncAllContacts();}};};ns.getIntegration=function(integrationName,data){return new ns.Integration(integrationName,data);};return ns;};PLY.App.Module.factory('PLY.Models.IntegrationModel',['$http',ns.IntegrationModelFactory]);})(PLY.Models.IntegrationModel);}),382:(function(module,exports){namespace("PLY.Models.OrderModel").extend(PLY.Models);(function(ns){ns.orderModelFactory=function(parent,$http,ProductModel){ns.DEFAULT_PROVIDER_ID=2000;ns.PaymentProviders={1000:'Stripe',2000:'Braintree'};ns.PaymentMethodTypes={CreditCard:1,ACH:2,PayPal:3,AliPay:4,ThreeDSecure:5};ns.PaymentMethod=function(data){var _this=this;this.Providers=ns.PaymentProviders;this.Types=ns.PaymentMethodTypes;var _publicAttributes=['id','name','provider_id','type'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_this,data));};this.update(data);Object.defineProperty(this,'providerName',{get:function get(){return _this.Providers[_this.providerId]||_this.Providers[ns.DEFAULT_PROVIDER_ID];}});};ns.Order=function(data){var _this2=this;var _publicAttributes=['id','product_id','product','provider_id','payment_methods','trial_period_days','purchase_price','discount','billing_cycle'];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_this2,data));if(data.product){_this2.product=new ProductModel.Product(data.product);}
var paymentMethods=[];if(_this2.paymentMethods){_this2.paymentMethods.forEach(function(paymentMethod){paymentMethods.push(new ns.PaymentMethod(paymentMethod));});}
_this2.paymentMethods=paymentMethods;};this.update(data);Object.defineProperty(this,'isTrial',{get:function get(){return _this2.trialPeriodDays&&_this2.trialPeriodDays>0;}});Object.defineProperty(this,'totalPrice',{get:function get(){return _this2.purchasePrice-_this2.discount;}});Object.defineProperty(this,'enable3ds',{get:function get(){return _this2.paymentMethods.some(function(paymentMethod){return paymentMethod.type===ns.PaymentMethodTypes.ThreeDSecure;});}});Object.defineProperty(this,'allowAlipay',{get:function get(){return _this2.paymentMethods.some(function(paymentMethod){return paymentMethod.type===ns.PaymentMethodTypes.AliPay;});}});Object.defineProperty(this,'allowPaypal',{get:function get(){return _this2.paymentMethods.some(function(paymentMethod){return paymentMethod.type===ns.PaymentMethodTypes.PayPal;});}});};ns.createOrder=function(productId,providerId,trial){var data={productId:productId,providerId:providerId};if(trial){data.trial=trial;}
return $http.post('/v1/services/createOrder',data).then(function(response){return new ns.Order(response.data);});};ns.pendingOrder=function(){return $http.get('/v1/services/orders/').then(function(response){return new ns.Order(response.data);},function(response){return null;});};ns.updatePurchaseOrder=function(orderId,data){return $http({method:"PUT",url:"v1/services/purchaseOrder/"+orderId+"/update",data:data}).then(function(response){var o;if(response&&response.data){o=new ns.Order(response.data);}
return o;});};ns.purchaseOrderInvoiceDraft=function(orderId){return $http({method:"GET",url:"v1/services/purchaseOrder/"+orderId+"/invoiceDraft"}).then(function(response){return response&&response.data;});};ns.purchaseOrderACHTransfer=function(orderId,orderToken){var url="v1/services/purchaseOrder/"+orderId+"/achTransfer";if(orderToken){url+='/'+orderToken;}
return $http({method:"GET",url:url}).then(function(response){return response&&response.data;});};return ns;};PLY.App.Module.factory('PLY.Models.OrderModel',["PLY.Models","$http","PLY.Models.ProductModel",ns.orderModelFactory]);})(PLY.Models.OrderModel);}),383:(function(module,exports){namespace("PLY.Models.PaymentInfoModel").extend(PLY.Models);(function(ns){ns.PaymentInfoModelFactory=function(parent,$http,$httpParamSerializer,$q,$timeout){ns.PaymentInfo=function(data){var _this=this;var _publicAttributes=["id","first_name","last_name","street","city","region","region_name","postal_code","country_code","last4","card_type","expiration_date","expiration_month","expiration_year","paypal_email","provider_id","payment_type","is_expiring_soon","customer_id","payment_method_id","bank_name"];this.update=function(data){_publicAttributes.forEach(ns.updatePublicAttribute.bind(_this,data));};this.update(data);};ns.getLatestPaymentInfo=function(providerId){var params={};if(providerId){params.provider_id=providerId;}
return $http({method:"GET",url:"v2/paymentInfo/latest",params:params}).then(function(response){return new ns.PaymentInfo(response.data);});};ns.getCheckoutPaymentInfo=function(checkoutId){var retries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;return $q(function(resolve,reject){var fetch=function fetch(){return $q(function(success,fail){$http({method:"GET",url:"v3/checkout/payment_info/".concat(checkoutId,"/")}).then(function(response){success(new ns.PaymentInfo(response.data));},function(response){if(response.status===404){success(null);}else{fail(response.data);}});});};var waitTime=1000;var attemptFetch=function attemptFetch(){var retry=function retry(){if(--retries){waitTime+=500;return $timeout(attemptFetch,waitTime);}else{return $q.reject('retries exceeded');}};return fetch().then(function(result){if(result===null){return retry();}else{return result;}},function(error){return retry();});};attemptFetch().then(function(result){resolve(result);},function(error){reject(null);});});};ns.getAllPaymentInfos=function(){return $http({method:"GET",url:"v2/paymentInfo/"}).then(function(response){return response.data.map(function(data){return new ns.PaymentInfo(data);});});};ns.retryPaymentInfo=function(paymentInfo){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var url="v2/paymentInfo/".concat(paymentInfo.id,"/retry/");if(params){url+="?".concat($httpParamSerializer(params));}
return $http({method:"POST",url:url}).then(function(response){return response.data;});};return ns;};PLY.App.Module.factory('PLY.Models.PaymentInfoModel',["PLY.Models","$http","$httpParamSerializer","$q","$timeout",ns.PaymentInfoModelFactory]);})(PLY.Models.PaymentInfoModel);}),490:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _models_userModel_es6__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(379);var _models_browserExtension_model_es6__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(491);var _models_browserExtension_model_es6__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_models_browserExtension_model_es6__WEBPACK_IMPORTED_MODULE_1__);var _models_analyticsModel_es6__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(492);var _models_analyticsModel_es6__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_models_analyticsModel_es6__WEBPACK_IMPORTED_MODULE_2__);var _models_experimentationModel_es6__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(299);var _models_experimentationModel_es6__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_models_experimentationModel_es6__WEBPACK_IMPORTED_MODULE_3__);var _models_experimentModel_es6__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(493);var _models_experimentModel_es6__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_models_experimentModel_es6__WEBPACK_IMPORTED_MODULE_4__);var _models_userStateModel_es6__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68);var _models_userStateModel_es6__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_models_userStateModel_es6__WEBPACK_IMPORTED_MODULE_5__);var _filters_replaceFilter_es6__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(494);var _filters_replaceFilter_es6__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_filters_replaceFilter_es6__WEBPACK_IMPORTED_MODULE_6__);var _services_zopimService_es6__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(495);var _services_zopimService_es6__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_services_zopimService_es6__WEBPACK_IMPORTED_MODULE_7__);var _services_spiralyze_service_es6__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(496);var _services_spiralyze_service_es6__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_services_spiralyze_service_es6__WEBPACK_IMPORTED_MODULE_8__);var _services_crazyEggAnalyticsService_es6__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(497);var _services_crazyEggAnalyticsService_es6__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_services_crazyEggAnalyticsService_es6__WEBPACK_IMPORTED_MODULE_9__);var _services_rolloverAnnouncementModal_service_es6__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(498);var _directives_hoverableUibPopover_directive_es6__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(501);var _directives_hoverableUibPopover_directive_es6__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_directives_hoverableUibPopover_directive_es6__WEBPACK_IMPORTED_MODULE_11__);var _directives_checkMarkDirective_es6__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(502);var _directives_checkMarkDirective_es6__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_directives_checkMarkDirective_es6__WEBPACK_IMPORTED_MODULE_12__);var _directives_validators_es6__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(504);var _directives_validators_es6__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_directives_validators_es6__WEBPACK_IMPORTED_MODULE_13__);var _directives_bsCollapseClassToggler_directive_es6__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(505);var _directives_bsCollapseClassToggler_directive_es6__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_directives_bsCollapseClassToggler_directive_es6__WEBPACK_IMPORTED_MODULE_14__);namespace('PLY.Controllers.HeaderController');(function(ns){ns.controller=function(rolloverModalService,userModel,AnalyticsModel,BrowserExtensionModel,$scope,$rootScope,$log,$location,$window,$timeout,$http,$filter,CrazyEggAnalyticsService,SpiralyzeService,UserStateModel,$injector){$rootScope.ENV=PLY.Utils.ENV;$scope.next=$scope.path=$location.path();$scope.creditsDisplay=null;$scope.creditsDisplayDescription=null;$scope.isChromeDesktop=PLY.Utils.isChromeDesktop();var pluginCategory=AnalyticsModel.Category.PLUGIN;SpiralyzeService.init();try{if(CrazyEggAnalyticsService.hasActiveSession()){CrazyEggAnalyticsService.init();}}catch(e){}
if(PLY.Utils.settings('showNotifications')){var UserNotificationService=$injector.get('UserNotificationService');UserNotificationService===null||UserNotificationService===void 0?void 0:UserNotificationService.createNotifications();}
if($location.search().disableAdminControls){if($location.search().disableAdminControls==='true'){PLY.Utils.localStorage('disableAdminControls','true');}else{PLY.Utils.localStorage('disableAdminControls','false');}}
$rootScope.disableAdminControls=PLY.Utils.localStorage('disableAdminControls')==='true'?true:false;if($location.search().alertSimulator&&$location.search().alertSimulator==='true'){$scope.alertSimulatorOn=true;}
if(!$scope.next||$scope.next==='/contacts'||$scope.next==='/account'||$scope.next==='/login'||$scope.next==='/signup'||$scope.next==='/logout'){$scope.next='/';}
$scope.logout=function(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'default';var redirectLogout=function redirectLogout(){var logoutLink='/logout?next=/login';if(mode==='plugin'){$window.open(logoutLink,'_blank');}else{$window.location=logoutLink;}};var logoutHandle=$timeout(redirectLogout,2500);userModel.getUserInfo().then(function(user){PLY.Utils.localStorage('lastLogin',JSON.stringify({id:user.id,email:user.email}));$timeout.cancel(logoutHandle);redirectLogout();});};$scope.onboardingChangesExp=false;$scope.hasClickedGetExtensionButton=false;$scope.reportGetExtensionClick=function(browser){$scope.hasClickedGetExtensionButton=true;AnalyticsModel.trackEvent(pluginCategory,pluginCategory.actions.CLICKED_INSTALL_FROM_HEADER,{browser:browser});$timeout(function(){window.location.href='/browser_extension';},1000);};$rootScope.$on('plugin-installed',function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var trackInstallWithBrowserFamily=function trackInstallWithBrowserFamily(browser){return AnalyticsModel.trackEvent(pluginCategory,pluginCategory.actions.INSTALL_SUCCESS,{browser:browser});};if(options.browser)return trackInstallWithBrowserFamily(options.browser);BrowserExtensionModel.getBrowserExtensionProperties().then(function(response){if(response&&response.data&&response.data.browser){return trackInstallWithBrowserFamily(response.data.browser);}});});var getCreditDisplay=function getCreditDisplay(metric){switch(true){case metric===Infinity:return'∞';break;case metric>1000000:return Math.floor(metric/1000000)+"M+";break;case metric>1000:return Math.floor(metric/1000)+"K+";break;default:return metric;}};var refreshUserCredits=function refreshUserCredits(user){var credits=user.lookupCreditBalance;var rolloverCredits=user.lookupCreditRolloverBalance;var overages=user.lookupCreditOverage;if(user.isExportLimited&&user.exportOrLookupCredits.issued>0&&user.exportOrLookupCredits.remaining<=0){credits=user.exportOrLookupCredits.remaining;overages=user.exportOrLookupCredits.overages_used;rolloverCredits=user.exportOrLookupCredits.rollover_credits;}
if(!user.rolloverCreditsEnabled||!user.productInfo.rolloverCreditsEnabled){credits=credits-rolloverCredits;}
var metric;if(credits>0){metric=credits;$scope.hasOverages=false;}else{metric=overages;$scope.hasOverages=true;}
$timeout(function(){$scope.creditsDisplay=getCreditDisplay(metric);});var metricDisplay=$filter('number')(metric);if($scope.hasOverages){if(metric){$scope.creditsDisplayDescription='You\'ve incurred '+metricDisplay+' overages!';}else{$scope.creditsDisplayDescription='You\'re out of lookups!';}}else if($scope.creditsDisplay==='∞'){$scope.creditsDisplayDescription='You have unlimited lookups.';}else if(user.rolloverCreditsEnabled&&user.productInfo.rolloverCreditsEnabled){var monthlyCredits=credits-rolloverCredits;var rolloverCreditDisplay=getCreditDisplay(rolloverCredits);var monthlyCreditDisplay=getCreditDisplay(monthlyCredits);$scope.creditsDisplayDescription="Monthly Lookups:  ".concat(monthlyCreditDisplay);if(rolloverCredits>0){$scope.creditsDisplayDescription+="\nAccrued Rollover:  ".concat(rolloverCreditDisplay,"\n<a href=\"/rollovers\" target=\"_blank\"><u>Learn More</u></a>");}}else{$scope.creditsDisplayDescription='You have '+metricDisplay+' lookups remaining.';}};var showRolloverModal=function showRolloverModal(){rolloverModalService.showModal();UserStateModel.createOrUpdateUserState({name:'show-rollover-modal',user_state_type:UserStateModel.TYPE.UserAnnouncement,status:UserStateModel.STATUS.Completed});};userModel.getUserInfo().then(function(user){$scope.user=user;refreshUserCredits(user);if(user.isOnboarded&&user.rolloverCreditsEnabled&&user.productInfo.rolloverCreditsEnabled){UserStateModel.getCurrentUserState(['UserAnnouncement']).then(function(state){if(!state.UserAnnouncement.length){showRolloverModal();}else{state.UserAnnouncement.forEach(function(announcement){if(announcement.name==='show_rollover-modal'&&announcement.status!==UserStateModel.STATUS.Completed){showRolloverModal();}});}});}
user.checkTrialConvertedAndNotHandled().then(function(user){AnalyticsModel.trackPageViewByIframe('/payment_completed_trial?no_redirect=true');})["catch"](function(e){});},function(){$log.error("HeaderController: User Model Web Service Error",arguments);humane.error('User Information could not be retrieved! Check your Internet connection!');});var refreshProfileCount=function refreshProfileCount(){if($scope.user){$scope.user.refreshProfileCount().then(function(count){$scope.totalContacts=count;});}};refreshProfileCount();$rootScope.$on('rr-credit-balance-updated',function(event,user){refreshUserCredits(user);});$rootScope.$on('rr-contact-lookup',refreshProfileCount);try{ServerMessages=$injector.get('ServerMessages');if(ServerMessages&&ServerMessages.messages){for(var i=0;i<ServerMessages.messages.length;i++){var message=ServerMessages.messages[i];if(message.level>25){humane.error(message.message);}else if(message.level===25){humane.success(message.message);}else{humane.info(message.message);}}}}catch(e){}
window.addEventListener('load',function(){$scope.pageLoaded=true;});$rootScope.$on('rr-checkout-header-message',function(ev,message){$scope.checkoutMessage=message.headerText;$scope.checkoutShowLock=message.showLock;});};PLY.App.Module.controller('HeaderController',['RolloverAnnouncementModalService','PLY.Models.UserModel','PLY.Models.AnalyticsModel','PLY.Models.BrowserExtensionModel',"$scope","$rootScope","$log","$location","$window","$timeout","$http","$filter","CrazyEggAnalyticsService","SpiralyzeService","PLY.Models.UserStateModel","$injector",ns.controller]);})(PLY.Controllers.HeaderController);}),491:(function(module,exports){namespace("PLY.Models.BrowserExtensionModel").extend(PLY.Models);(function(ns){ns.BrowserExtensionModelFactory=function($http,$q){var determinedBrowserProperties=null;ns.getBrowserExtensionProperties=function(){var deferred=$q.defer();if(determinedBrowserProperties){deferred.resolve(determinedBrowserProperties);return deferred.promise;}
$http.get('/browser_extension/browser').then(function(response){determinedBrowserProperties=response;deferred.resolve(response);})["catch"](function(error){return deferred.reject(error);});return deferred.promise;};return ns;};PLY.App.Module.factory('PLY.Models.BrowserExtensionModel',['$http','$q',ns.BrowserExtensionModelFactory]);})(PLY.Models.BrowserExtensionModel);}),492:(function(module,exports){function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
namespace('PLY.Models.Analytics').extend(PLY.Models);(function(ns){ns.PLY_GA_KEY='UA-65100102-1';ns.PLY_GTM_KEY='GTM-P9JP9GC';ns.analyticsModelFactory=function(parent,userModel,ExperimentationModel,$log,$timeout,$q,$location,$http){var _suppressDefaultPageView=false;var _suppressAllPageViews=false;var gaReady=$q.defer();var loadGoogleAnalytics=function loadGoogleAnalytics(){var i=window;var r='ga';i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();(function(i,s,o,g,r,a,m){a=s.createElement(o);m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');};var loadGoogleTagManager=function loadGoogleTagManager(){return function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0];var j=d.createElement(s);var dl=l!='dataLayer'?"&l=".concat(l):'';j.async=true;j.src="https://www.googletagmanager.com/gtm.js?id=".concat(i).concat(dl);f.parentNode.insertBefore(j,f);}(window,document,'script','dataLayer',ns.PLY_GTM_KEY);};var sendPageViewWithUserExperiments=function sendPageViewWithUserExperiments(page){ExperimentationModel.getExperiments().then(function(allExperiments){var promiseQueue=[];var fetchExperimentVariantForUser=function fetchExperimentVariantForUser(experiment){var q=$q.defer();ExperimentationModel.getVariant(experiment.id,5000).then(function(variant){q.resolve({experimentId:experiment.id,variant:variant});},function(error){$log.error("Could not get variant for experiment: ".concat(experiment.id||experiment.name||'<unknown>',", error: ").concat(error));$q.reject();});return q.promise;};allExperiments.forEach(function(experiment){if(!experiment.id)return;promiseQueue.push(fetchExperimentVariantForUser(experiment));});$q.all(promiseQueue).then(function(resolvedExperiments){var dimensionData={};resolvedExperiments.forEach(function(experiment){dimensionData[experiment.experimentId]=experiment.variant;});var data={dimension1:JSON.stringify(dimensionData)};if(page)data['page']=page;ga('set',data);ga('send','pageview');});});};var init=function init(){loadGoogleAnalytics();userModel.getUserInfo().then(function(user){try{if(user.id){ga('create',ns.PLY_GA_KEY,'auto',{userId:user.id,'cookieFlags':'SameSite=None; Secure'});}else{ga('create',ns.PLY_GA_KEY,'auto',{'cookieFlags':'SameSite=None; Secure'});}
ga('require','linkid');ga(function(){if(!_suppressDefaultPageView&&!_suppressAllPageViews){sendPageViewWithUserExperiments();}
loadGoogleTagManager();gaReady.resolve();});}catch(e){$log.error("Error while loading GA",e);}});};ns.addDataLayerEvent=function(event){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var dataLayerDeferred=$q.defer();if(!event||typeof event!=='string'){throw"Event name is required and be of type string, given: ".concat(event);}
window.dataLayer=window.dataLayer||[];window.dataLayer.push(_objectSpread(_objectSpread({event:event},data),{},{eventCallback:function eventCallback(e){dataLayerDeferred.resolve();},eventTimeout:1000}));return dataLayerDeferred.promise;};ns.trackEvent=function(eventCategory,eventAction,eventLabel,eventValue){var trackEventDeferred=$q.defer();try{var ec="DEFAULT";if(typeof eventCategory=="string"&&eventCategory.length){ec=eventCategory;}else if(_typeof(eventCategory)=="object"&&eventCategory.name&&eventCategory.name.length){ec=eventCategory.name;}
if(_typeof(eventLabel)=="object"){eventLabel=JSON.stringify(eventLabel);}
ga('send',{hitType:'event',eventCategory:ec,eventAction:eventAction||'',eventLabel:eventLabel||'',eventValue:eventValue||0,transport:'beacon',hitCallback:function hitCallback(){trackEventDeferred.resolve("Event sent: [".concat(eventCategory,":").concat(eventAction,"]"));}});}catch(e){trackEventDeferred.reject(e);$log.error("Error when tracking event",eventCategory,eventAction,eventLabel,e);}
return trackEventDeferred.promise;};ns.trackRREvent=function(args){var extractParameter=function extractParameter(param,required){var value;if(args[param]){if(typeof args[param]==="string"){value=args[param];}else if(_typeof(args[param])==="object"){value=args[param].name;}}
if(value===undefined&&required===true){throw new TypeError("Encountered unexpected event ".concat(param," type."));}
return value;};var category=extractParameter("category",true);var action=extractParameter("action",true);var labels=args.labels;var value=extractParameter("value",false);var data={category:category,action:action};if(labels!==undefined)data.labels=labels;if(value!==undefined)data.value=value;return $http.post("/v1/experiments/events/",data).then(function(response){return response.data;},function(error){console.log(error);});};ns.recordFunnelMetric=function(metric,value,tags){var data={name:metric,value:value};if(tags!==undefined)data.tags=tags;var recordMetricDeferred=$q.defer();var attempts=0;var wait=1000;var request=function request(){attempts++;$http.post("/record_funnel_metric",data).then(function(response){recordMetricDeferred.resolve(response.data);},function(error){if(error.status===429&&attempts<10){wait*=2;$timeout(request,wait);}else{console.log(error);recordMetricDeferred.reject(error);}});};request();return recordMetricDeferred.promise;};ns.trackPageViewByIframe=function(url){(function(){var i=document.createElement('iframe');i.style.display='none';i.style.width=1;i.style.height=1;i.onload=function(){return i.parentNode.removeChild(i);};i.src=url;document.body.appendChild(i);})();};ns.trackPageView=function(url,suppressDefaultPageView,delay){try{if(suppressDefaultPageView!==undefined){ns.suppressDefaultPageView();}
gaReady.promise.then(function(){if(_suppressAllPageViews)return;if(delay)return $timeout(function(){return sendPageViewWithUserExperiments(url);},delay);sendPageViewWithUserExperiments(url);});}catch(e){$log.error("Error when tracking virtual page view",url,e);}};ns.suppressAllPageViews=function(){_suppressAllPageViews=true;};ns.suppressDefaultPageView=function(){_suppressDefaultPageView=true;};init();return ns;};ns.Category={SEARCH_PAGE:{name:'search_page',actions:{SEARCH:'search',SEARCH_BY_REGISTERED_PAYING_USER:'search_by_registered_paying_user',SEARCH_BY_REGISTERED_FREE_USER:'search_by_registered_free_user',SEARCH_BY_ANONYMOUS_USER:'search_by_anonymous_user',SHOW_CONTACT:'show_contact',SHOW_CONTACT_BY_REGISTERED_PAYING_USER:'show_contact_by_registered_paying_user',SHOW_CONTACT_BY_REGISTERED_FREE_USER:'show_contact_by_registered_free_user',SHOW_CONTACT_BY_ANONYMOUS_USER:'show_contact_by_anonymous_user',FOUND_CONTACT:'found_contact',FOUND_CONTACT_RECOVERED:'found_contact_recovered',ADD_CRITERIA:'add_criteria',REMOVE_CRITERIA:'remove_criteria',NEXT_PAGE:'next_page',PREV_PAGE:'prev_page',SIGNUP:'signup',FREE_TRIAL:'free_trial',EXHAUST_CREDITS:'exhaust_credits',EXIT:'exit',KEYWORD_AUTOCOMPLETE:'keyword_autocomplete',VERSION_SWITCH:'verion_switch'}},PRICING:{name:'pricing',actions:{SELECT_PLAN:'select_plan',DOWNGRADE_MESSSAGE:"downgrade_message",DOWNGRADE_ATTEMPT:"downgrade_attempt",DOWNGRADE_ATTEMPT_EXISTING_PAYMENT:"downgrade_using_existing_payment_info",DOWNGRADE_ATTEMPT_SUCCEEDED:"downgrade_succeeded",DOWNGRADE_ATTEMPT_FAILED:"downgrade_failed",UPGRADE_ATTEMPT:"upgrade_attempt",UPGRADE_ATTEMPT_EXISTING_PAYMENT:"upgrade_using_existing_payment_info",UPGRADE_ATTEMPT_SUCCEEDED:"upgrade_succeeded",UPGRADE_ATTEMPT_FAILED:"upgrade_failed",PAYMENT_COMPLETE:"payment_complete",PLAN_SUCCESS:"plan_success",SIGNUP_MODAL:"anonymous_pricing_signup",ERROR_DURING_PAYMENT:"error_during_payment",TOGGLE_MONTHLY_PLAN:"toggle_monthly_plan",TOGGLE_YEARLY_PLAN:"toggle_yearly_plan",STRIPE_FORM:"stripe_form",BRAINTREE_FORM:"braintree_form",SHOW_FAQ_ANSWER:"show_faq_answer"}},SIGNUP:{name:'signup',actions:{SIGNUP_START:'signup_start',SIGNUP_SUCCESS:"signup_success",SIGNUP_ERROR:"signup_error"}},PLUGIN:{name:'plugin',actions:{LOGIN_REQUIRED:'login_required',GET_CONTACT:'get_contact',GET_CONTACTS_BULK:'get_contacts_bulk',GET_CONTACTS_BY_REGISTERED_PAYING_USER:'get_contacts_by_registered_paying_user',GET_CONTACTS_BY_REGISTERED_FREE_USER:'get_contacts_by_registered_free_user',GET_CONTACTS_BY_ANONYMOUS_USER:'get_contacts_by_registered_free_user',VERIFICATION_REQUIRED:'verification_required',FP_EXCEEDED:'fingerprint_usage_exceeded',INSUFFICIENT_CREDITS:'insufficient_credits',INTERNAL_ERROR:'internal_error',SHOWN_EXTENSION_PROMPT:'shown_extension_prompt',SHOWN_EXTENSION_MODAL:'shown_extension_modal',CLICKED_INSTALL_FROM_INTERSTITIAL:'clicked_install_from_interstitial',CLICKED_SKIP_FROM_INTERSTITIAL:'clicked_skip_from_interstitial',CLICKED_INSTALL_FROM_HEADER:'clicked_install_from_header',INSTALL_SUCCESS:'install_success',CLICKED_EXTENSION_PROMPT:'clicked_extension_prompt',INLINE_INSTALL_SUCCESS:'inline_install_success',INLINE_INSTALL_FAILURE:'inline_install_failure',EXTENSION_POPUP:'extension_popup',RESOLVE_LI_INT_URL:'resolve_li_int_url',RESOLVE_LI_SALES_URL:'resolve_li_sales_url',RESOLVE_LI_PUB_URL:'resolve_li_pub_url',RESOLVE_LI_ENC_EXT_URL:'resolve_li_enc_ext_url',RESOLVE_LI_RECRUITER_URL:'resolve_li_recruiter_url'}},CONTACTS:{name:'contacts',actions:{COMPOSE_EMAIL:'compose_email',COMPOSE_EMAIL_SHOW_SPLASH:'compose_email_show_splash',COMPOSE_EMAIL_CLICK_SPLASH:'compose_email_click_splash',CONNECT_GMAIL_ATTEMPT:'connect_gmail_attempt',CONNECT_EMAIL_ATTEMPT:'connect_email_attempt',SEND_EMAIL:'send_email'}},OUTREACH:{name:'outreach',actions:{SHOWN_OUTREACH_PROMPT:'shown_outreach_prompt',CLICKED_OUTREACH_PROMPT:'clicked_extension_prompt'}},LANDING:{name:'landing',actions:{PRIMARY_CTA:'activate_primary_cta',SECONDARY_CTA:'activate_secondary_cta',EXIT:'exit'}},ONBOARDING:{name:'onboarding',actions:{EXIT:'exit'}},TRIAL:{name:'trial',actions:{SHOWN_OFFER:'shown_offer',CLICKED_OFFER:'clicked_offer'}},BILLING:{name:'billing',actions:{UPDATED_PAYMENT_METHOD:'updated_payment_method',RETRIED_PAYMENT_METHOD:'retried_payment_method'}},FEEDBACK:{name:'feedback',actions:{ATTEMPTED_TO_REVIEW:'attempted_to_review',RECIEVED_FEEDBACK:'recieved_feedback',RECIEVED_FEEDBACK_NEGATIVE_REASONS:'recieved_feedback_negative_reasons',RECIEVED_FEEDBACK_COMPANY_SEARCH:'recieved_feedback_company_search',RECIEVED_FEEDBACK_NEGATIVE_REASONS_COMPANY_SEARCH:'recieved_feedback_negative_reasons_company_search'}}};PLY.App.Module.factory('PLY.Models.AnalyticsModel',['PLY.Models','PLY.Models.UserModel','PLY.Models.ExperimentationModel','$log','$timeout','$q','$location','$http',ns.analyticsModelFactory]);})(PLY.Models.Analytics);}),493:(function(module,exports){namespace("PLY.Models.ExperimentModel").extend(PLY.Models);(function(ns){ns.experimentModelFactory=function(parent,$http,$httpParamSerializerJQLike){ns.ExperimentSession=function(data){var _self=this;var _publicAttributes=["id","name","variant"];this.update=function(data){_publicAttributes.forEach(parent.updatePublicAttribute.bind(_self,data));};this.update(data);};ns.Experiment=function(data){var _publicAttributes=["id","name","num_variants","variant_options","description"];this.update=function(data){_publicAttributes.forEach(parent.updatePublicAttribute.bind(this,data));};var parseVariantDescFromMainDesc=function parseVariantDescFromMainDesc(){var variantDescPattern=/^\s*(.+?)\s*=\s*(.+?)\s*$/gm;if(!this.description){this.variantDescriptions={};}else{var matches=null;this.variantDescriptions={};while(matches=variantDescPattern.exec(this.description)){matches[1]=matches[1].toUpperCase();this.variantDescriptions[matches[1]]=matches[1]+': '+matches[2];}}};var init=function init(){if(data){this.update.call(this,data);}
parseVariantDescFromMainDesc.call(this);};init.call(this);};ns.getExperimentSessions=function(){return $http({url:"/v1/experiments",method:"GET",cache:ns.getHTTPCache()}).then(function(response){var experiments=response&&response.data;if(Array.isArray(experiments)){var experimentObj={};experiments.forEach(function(experiment){experimentObj[experiment.id]=new ns.ExperimentSession(experiment);});return experimentObj;}else{return{};}});};ns.postExperimentSession=function(id,variant){var data={id:id,variant:variant};return $http({url:"/v1/experiments",method:"POST",data:data});};ns.activeExperiments=function(){return $http({url:"/v1/experiments/active/",method:"GET",timeout:120000,cache:true});};ns.getActiveExperiments=function(){return ns.activeExperiments().then(function(response){return response.data.map(function(data){return new ns.Experiment(data);});});};ns.getTrialStats=function(experimentId,start,end){var argList=[];if(start){argList.push('start='+start);}
if(end){argList.push('end='+end);}
var queryParams='';if(argList.length){queryParams='?'+argList.join('&');}
return $http({url:"/v1/experiments/stats/"+experimentId+"/trials/"+queryParams,method:"GET",timeout:60*5*1000,cache:true});};ns.getStats=function(experimentId){return $http({url:"/v1/experiments/stats/"+experimentId+"/",method:"GET",timeout:60*5*1000,cache:true});};return ns;};PLY.App.Module.factory('PLY.Models.ExperimentModel',["PLY.Models","$http","$httpParamSerializerJQLike",ns.experimentModelFactory]);})(PLY.Models.ExperimentModel);}),494:(function(module,exports){namespace("PLY.Filters.ReplaceFilter");(function(ns){ns.filter=function($filter){return function(input,from,to){input=input||'';from=from||'';to=to||'';return input.replace(new RegExp(from,'g'),to);};};PLY.App.Module.filter('replace',ns.filter);})(PLY.Filters.ReplaceFilter);}),495:(function(module,exports){namespace("PLY.Services.ZopimService");(function(ns){window.zESettings=angular.extend(window.zESettings||{},{webWidget:{offset:{vertical:'15px'},contactForm:{attachments:false},zindex:1,launcher:{chatLabel:{'en-US':'Help','*':'Help'}},color:{theme:'#3A589B',launcher:'#3A589B',launcherText:'#FFFFFF',bypassAccessibilityRequirement:true}}});ns.ZopimService=function(userModel,$window,$q){var loadZopimLib=function loadZopimLib(){window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments);},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s;}catch(e){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s;}
o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date(),this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o);},o.write('<body onload="document._l();">'),o.close();}("//assets.zendesk.com/embeddable_framework/main.js","rocketreach.zendesk.com");};ns.showZopim=this.showZopim=function(){if(window.zE){zE.activate();}};ns.hideZopim=this.hideZopim=function(){if(window.zE){zE.hide();}};this.initZopim=function(hideOnLoad){var hideOnLoad=hideOnLoad||false;var deferred=$q.defer();try{angular.element($window).bind('load',function(){userModel.getUserInfo().then(function(user){loadZopimLib();zE(function(){if(user.id){zE.identify({name:user.displayName,email:user.email});zE.setHelpCenterSuggestions({search:window.document.title});if(hideOnLoad){ns.hideZopim();}}else{zE(function(){if(hideOnLoad){ns.hideZopim();}});}
deferred.resolve(zE);});});});}catch(e){console.error(e);}
return deferred.promise;};};PLY.App.Module.service('ZopimService',['PLY.Models.UserModel','$window','$q',ns.ZopimService]);})(PLY.Services.ZopimService);}),496:(function(module,exports){var module=angular.module('PLYApp');namespace("PLY.Services.SpiralyzeService");(function(ns){var service=function service($http){var _this=this;this.registerVariant=function(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var variant=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(typeof variant!=='number'&&typeof name==='number'){var actualName=id;var actualVariant=name;id=null;name=actualName;variant=actualVariant;}
return $http.post('/v1/experiments/spiralyze',{experiment_id:id,experiment_name:name,variant:variant});};this.init=function(){ns.instance=_this;};};module.service('SpiralyzeService',['$http',service]);})(PLY.Services.SpiralyzeService);}),497:(function(module,exports){namespace("PLY.Services.CrazyEggAnalyticsService");(function(ns){ns.service=function($location,$q){var CRAZY_EGG_SCRIPT_URL='//script.crazyegg.com/pages/scripts/0083/8405.js';var CE_SESSION_KEY='rr_ce_anlytx';var PERSITENCE_EXPIRES_AFTER_X_SECS=60*15;this.SNAPSHOT=false;this.RECORDING=true;var expireStaleSession=function expireStaleSession(){var _removeSession=function _removeSession(){PLY.Utils.sessionStorage(CE_SESSION_KEY,null);};if(PLY.Utils.sessionStorage(CE_SESSION_KEY)){try{var createdUnix=new Date(PLY.Utils.sessionStorage(CE_SESSION_KEY)).getTime();var todayUnix=new Date().getTime();if(isNaN(createdUnix)){_removeSession();}
if((todayUnix-createdUnix)/1000>PERSITENCE_EXPIRES_AFTER_X_SECS){_removeSession();}}catch(e){_removeSession();}}};expireStaleSession();this.hasActiveSession=function(){return PLY.Utils.sessionStorage(CE_SESSION_KEY);};this.init=function(snapshotName,persistent){var deferred=$q.defer();try{if(snapshotName){this.forceSnapshotName(snapshotName);}
if(persistent){PLY.Utils.sessionStorage(CE_SESSION_KEY,new Date());}
if(window.CE2===undefined){var d=document;var script=d.createElement('script');script.type='text/javascript';script.async=true;script.onload=function(){deferred.resolve();};script.onerror=function(e){deferred.reject(e);};script.src=CRAZY_EGG_SCRIPT_URL;d.getElementsByTagName('head')[0].appendChild(script);}}catch(e){deferred.reject(e);}
return deferred.promise;};this.forceSnapshotName=function(snapshotName){if($location.search().ce_snapshot_name||snapshotName){window.CE_SNAPSHOT_NAME=$location.search().ce_snapshot_name?$location.search().ce_snapshot_name:snapshotName;}};this.forceSnapshotName();};PLY.App.Module.service('CrazyEggAnalyticsService',['$location','$q',ns.service]);})(PLY.Services.CrazyEggAnalyticsService);}),498:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _scss_RR2018_components_rr_rollover_announcement_modal_scss__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(499);var _scss_RR2018_components_rr_rollover_announcement_modal_scss__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_scss_RR2018_components_rr_rollover_announcement_modal_scss__WEBPACK_IMPORTED_MODULE_0__);var module=angular.module('PLYApp');module.service('RolloverAnnouncementModalService',['$uibModal',function($uibModal){this.showModal=function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var modalInstance=$uibModal.open({template:__webpack_require__(500),controller:function controller($scope,$uibModalInstance,$attrs,$sce){angular.extend($scope,$attrs);$scope.ok=function(){$uibModalInstance.close('success');};$scope.cancel=function(){$uibModalInstance.dismiss('cancel');};},animation:true,size:'md',resolve:{$attrs:options}});return modalInstance.result;};}]);}),499:(function(module,exports,__webpack_require__){if(false){var cssReload;}}),500:(function(module,exports){module.exports="<div class=\"modal-template rr-rollover-announcement-modal\">\n    <div class=\"rr-rollover-modal modal-cancel\">\n        <a class=\"modal-close\"\n           ng-click=\"cancel();$event.stopPropagation();\"\n           title=\"close\">\n            <i class=\"fa fa-times close-button\"></i>\n        </a>\n    </div>\n    <div class=\"rr-rollover-modal modal-header\">\n        <h4>Congrats, your RocketReach account now has Rollover Lookups!</h4>\n    </div>\n    <div class=\"rr-rollover-modal modal-body\">\n      <img loading=\"lazy\" alt=\"rollover screenshot\"\n        {% image_dimensions \"/static/images/rollover_credits/rollover-modal.svg\" %}\n        src=\"//static.rocketreach.co/images/rollover_credits/rollover-modal.svg\" />\n      <p>Learn more about Rollover Lookups <a href=\"/rollovers\" target=\"_blank\">here</a>.</p>\n    </div>\n    <div class=\"rr-rollover-modal modal-footer\">\n        <button class=\"btn btn-lg btn-pronounced\" ng-click=\"ok()\">Got it </button>\n    </div>\n</div>\n";}),501:(function(module,exports){(function(){var directiveName='rrHoverableUibPopoverDirective';angular.module('PLYApp').directive(directiveName,['$timeout','$compile',function($timeout,$compile){return{restrict:'A',priority:200,scope:false,compile:function compile(element,attrs){var scopeNameSpace=attrs.rrHoverableUibPopoverDirective;var getNameSpacedScopeValue=function getNameSpacedScopeValue(key){return"".concat(scopeNameSpace,"_").concat(key);};element.removeAttr('rr-hoverable-uib-popover-directive');element.attr('popover-trigger','none');element.attr('popover-is-open',getNameSpacedScopeValue('popoverOpen'));return{'post':function post($scope,element,attr){var promise;var popoverSelector='.popover-content';var clearTimeout=function clearTimeout(){return promise&&$timeout.cancel(promise);};element[0]=element.wrap("\n            <span\n              ng-mouseleave=\"".concat(getNameSpacedScopeValue('mouseLeave'),"()\"\n              ng-mouseover=\"").concat(getNameSpacedScopeValue('mouseOver'),"()\"\n\n            ></span>\n            ")).parent()[0];var setPopoverOpen=function setPopoverOpen(val){$scope[getNameSpacedScopeValue('popoverOpen')]=val;element.find('span').scope()[getNameSpacedScopeValue('popoverOpen')]=$scope[getNameSpacedScopeValue('popoverOpen')];handleHoverOverPopover();};$scope[getNameSpacedScopeValue('mouseLeave')]=function(){clearTimeout();promise=$timeout(function(){setPopoverOpen(false);$scope.$digest();},1500);};$scope[getNameSpacedScopeValue('mouseOver')]=function(){clearTimeout();promise=$timeout(function(){setPopoverOpen(true);$scope.$digest();},100);};var clickedPopover=function clickedPopover(e){var bubblePath=(e.path||e.composedPath()||[]).map(function(e){return e.className;});return!!bubblePath.filter(function(className){return className&&className.indexOf(popoverSelector.replace('.',''))!==-1;}).length;};var handleHoverOverPopover=function handleHoverOverPopover(){$timeout(function(){if(document.querySelector(popoverSelector)){document.querySelector(popoverSelector).addEventListener('mouseover',function(){clearTimeout();setPopoverOpen(true);});document.querySelector(popoverSelector).addEventListener('mouseout',function(){$scope[getNameSpacedScopeValue('mouseLeave')]();});}},100);};var externalDomDismiss=function externalDomDismiss(e){if(clickedPopover(e)){}else if($scope[getNameSpacedScopeValue('popoverOpen')]){$timeout(function(){return setPopoverOpen(false);});}};var setupExternalDomListeners=function(){}