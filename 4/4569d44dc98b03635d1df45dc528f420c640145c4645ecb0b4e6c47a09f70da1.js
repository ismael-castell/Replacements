/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
/**
 * See https://gist.github.com/jonathantneal/3748027
 */
!window.addEventListener&&function(e,t,n,r,i,s,o){e[r]=t[r]=n[r]=function(e,t){var n=this;o.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,o[0][3])},e[i]=t[i]=n[i]=function(e,t){for(var n=0,r;r=o[n];++n)if(r[0]==this&&r[1]==e&&r[2]==t)return this.detachEvent("on"+e,o.splice(n,1)[0][3])},e[s]=t[s]=n[s]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])

//Drupal ('/misc/drupal.js')
// $Id: drupal.js,v 1.41.2.3 2008/06/25 09:06:57 goba Exp $
var Drupal = Drupal || { 'settings': {}, 'behaviors': {}, 'themes': {}, 'locale': {} };

/**
 * Parse a JSON response.
 *
 * The result is either the JSON object, or an object with 'status' 0 and 'data' an error message.
 */
Drupal.parseJson = function (data) {
    if( (data.substring(0, 1) != '{') && (data.substring(0, 1) != '[') )
        return { status: 0, data: data.length ? data : Drupal.t('Unspecified error') };

    return eval('(' + data + ');');
};



// Code below for spb_advpoll only
Drupal.attachBehaviors = function(context) {
    context = context || document;
    //if (Drupal.jsEnabled) {
    // Execute all of them.
    jQuery.each(Drupal.behaviors, function() {
        this(context);
    });
    //}
};
// Global Killswitch on the <html> element
//if (Drupal.jsEnabled) {
// Global Killswitch on the <html> element
//$(document.documentElement).addClass('js');
// 'js enabled' cookie
//document.cookie = 'has_js=1; path=/';
// Attach all behaviors.
$(document).ready(function() {
    Drupal.attachBehaviors(this);
});
//}

//End drupal
/*

   Copyright (c) 2011-2014. Adobe Systems Incorporated.
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
       this list of conditions and the following disclaimer in the documentation
       and/or other materials provided with the distribution.
 Neither the name of Adobe Systems Incorporated nor the names of its
       contributors may be used to endorse or promote products derived from this
       software without specific prior written permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
   POSSIBILITY OF SUCH DAMAGE.

//# sourceMappingURL=edge.6.0.0.min.map

   6.0.0.398
*/
(function(f,r,u){function e(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function p(){var a=c.shift();n=1;a?a.t?s(function(){("c"==a.t?w.injectCss:w.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),p()):n=0}function h(g,d,m,t,v,f,h){function l(a){if(!z&&e(y.readyState)&&(q.r=z=1,!n&&p(),a)){"img"!=g&&s(function(){k.removeChild(y)},50);for(var b in B[d])if(B[d].hasOwnProperty(b))B[d][b].onload();y.onload=y.onreadystatechange=null}}h=h||w.errorTimeout;var y=r.createElement(g),z=0,A=0,q={t:m,s:d,
e:v,a:f,x:h};1===B[d]&&(A=1,B[d]=[]);"object"==g?(y.data=d,y.setAttribute("type","text/css")):(y.src=d,y.type=g);y.width=y.height="0";y.onerror=y.onload=y.onreadystatechange=function(){l.call(this,A)};c.splice(t,0,q);"img"!=g&&(A||2===B[d]?(P(),k.insertBefore(y,a?null:b),s(l,h)):B[d].push(y))}function l(a,b,g,d,k){n=0;b=b||"j";z(a)?h("c"==b?y:m,a,b,this.i++,g,d,k):(c.splice(this.i++,0,a),1==c.length&&p());return this}function q(){var a=w;a.loader={load:l,i:0};return a}var x=r.documentElement,s=f.setTimeout,
b=r.getElementsByTagName("script")[0],d={}.toString,c=[],n=0,v=function(){},t="MozAppearance"in x.style,a=t&&!!r.createRange().compareNode,k=a?x:b.parentNode,g=f.opera&&"[object Opera]"==d.call(f.opera),g=!!r.attachEvent&&!g,x="webkitAppearance"in x.style&&!("async"in r.createElement("script")),m=t?"object":g||x?"script":"img",y=g?"script":x?"img":m,A=Array.isArray||function(a){return"[object Array]"==d.call(a)},z=function(a){return"string"==typeof a},E=function(a){return"[object Function]"==d.call(a)},
P=function(){b&&b.parentNode||(b=r.getElementsByTagName("script")[0])},Q=[],B={},L={timeout:function(a,b){b.length&&(a.timeout=b[0]);return a}},M,w;w=function(a){function b(a){a=a.split("!");var g=Q.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},m,k,n;for(k=0;k<d;k++)n=a[k].split("="),(m=L[n.shift()])&&(c=m(c,n));for(k=0;k<g;k++)c=Q[k](c);return c}function g(a){a=a.split("?")[0];return a.substr(a.lastIndexOf(".")+1)}function c(a,d,m,k,n){var t=b(a),e=t.autoCallback;g(t.url);if(!t.bypass){d&&
(d=E(d)?d:d[a]||d[k]||d[a.split("/").pop().split("?")[0]]);if(t.instead)return t.instead(a,d,m,k,n);B[t.url]&&!0!==t.reexecute?t.noexec=!0:B[t.url]=1;a&&m.load(t.url,t.forceCSS||!t.forceJS&&"css"==g(t.url)?"c":u,t.noexec,t.attrs,t.timeout);(E(d)||E(e))&&m.load(function(){q();d&&d(t.origUrl,n,k);e&&e(t.origUrl,n,k);B[t.url]=2})}}function d(a,b){function g(a,d){if(""!==a&&!a)!d&&e();else if(z(a))d||(n=function(){var a=[].slice.call(arguments);t.apply(this,a);e()}),c(a,n,b,0,k);else if(Object(a)===a)for(h in f=
function(){var b=0,g;for(g in a)a.hasOwnProperty(g)&&b++;return b}(),a)a.hasOwnProperty(h)&&(d||--f||(E(n)?n=function(){var a=[].slice.call(arguments);t.apply(this,a);e()}:n[h]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b);e()}}(t[h])),c(a[h],n,b,h,k))}var k=!!a.test,m=a.load||a.both,n=a.callback||v,t=n,e=a.complete||v,f,h;g(k?a.yep:a.nope,!!m||!!a.complete);m&&g(m);!m&&a.complete&&g("")}var m,k,n=this.yepnope.loader;if(z(a))c(a,0,n,0);else if(A(a))for(m=0;m<a.length;m++)k=
a[m],z(k)?c(k,0,n,0):A(k)?w(k):Object(k)===k&&d(k,n);else Object(a)===a&&d(a,n)};w.addPrefix=function(a,b){L[a]=b};w.addFilter=function(a){Q.push(a)};w.errorTimeout=1E4;null==r.readyState&&r.addEventListener&&(r.readyState="loading",r.addEventListener("DOMContentLoaded",M=function(){r.removeEventListener("DOMContentLoaded",M,0);r.readyState="complete"},0));f.yepnope=q();f.yepnope.executeStack=p;f.yepnope.injectJs=function(a,g,c,d,m,k){var n=r.createElement("script"),t,h;d=d||w.errorTimeout;n.src=
a;for(h in c)n.setAttribute(h,c[h]);g=k?p:g||v;n.onreadystatechange=n.onload=function(){!t&&e(n.readyState)&&(t=1,g(),n.onload=n.onreadystatechange=null)};s(function(){t||(t=1,g(1))},d);P();m?n.onload():b.parentNode.insertBefore(n,b)};f.yepnope.injectCss=function(a,g,c,d,m,k){d=r.createElement("link");var n;g=k?p:g||v;d.href=a;d.rel="stylesheet";d.type="text/css";for(n in c)d.setAttribute(n,c[n]);m||(P(),b.parentNode.insertBefore(d,b),s(g,0))}})(this,document);
"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(f){for(var r=0;r<this.length;r++)f.apply(this,[this[r],r,this])});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var aBootcompsLoaded=[];window.AdobeEdge=window.AdobeEdge||{};
(function(f){function r(a){return"[object Array]"===Object.prototype.toString.call(a)}function u(a,b){var g;for(g=0;a&&g<a.length;g++)b[b.length++]=a[g]}function e(a,b){var g,c;if(r(a))for(c=a.length,g=0;g<c;g++)b(g,a[g]);else for(g in a)a.hasOwnProperty(g)&&b(g,a[g])}function p(a){var b=V.style,g,c;for(c=0;c<a.length;c++)if(g=a[c],void 0!==b[g])return!0;return!1}function h(a){a=""+a;if(!G.rgba&&0==a.indexOf("rgba")){var b=a.lastIndexOf(",");0<b&&(a="rgb("+a.substring(5,b)+")")}return a}function l(a){var b;
e(a,function(a,g){null!==g&&(b=!0)});return!b}function q(a,b){e(b,function(b,g){a[b]=g});return a}function x(a){var b={};b.num=parseFloat(a);b.units=String(a).match(/[a-zA-Z%]+$/);r(b.units)&&(b.units=b.units[0]);return b}function s(a){return a.replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/ig,function(a,b){return String(b).toUpperCase()})}function b(a){var g;AdobeEdge.Notifier.call(this);this.length=0;if(!a)return this;if(a instanceof b)return a;if("string"===typeof a)if(a=a.trim(),/^#([\w\-]+)$/.test(a))(g=
D.getElementById(a.substring(1)))&&(this[this.length++]=g);else if(/<|&#?\w+;/.test(a)){g=this.length++;var c=a;a=document.createElement("div");var d=(ma.exec(c)||["",""])[1].toLowerCase(),d=da[d]||da._default;a.innerHTML=d[1]+c.replace(na,"<$1></$2>")+d[2];for(c=d[0];c--;)a=a.lastChild;this[g]=a}else u(D.querySelectorAll(a),this);else{g=a;c=g.length;g=null!==g&&g===g.window?!1:1===g.nodeType&&c?!0:r(g)||"function"!==typeof g&&(0===c||"number"===typeof c&&0<c&&c-1 in g);if(g)return u(a,this);a.nodeType?
this[this.length++]=a:oa.call(this,a)}return this}function d(a){return new b(a)}function c(a){return a.parent().hasClass("center-wrapper")}function n(a){c(a)||a.wrap("<div class='flow-wrapper' style='width:1px'><div class='center-wrapper'></div></div>")}function v(a,b,g,m,k,t){function e(){var k=c(a),n=k?a.parent().parent().parent():a.parent(),h=n.width(),v=n.height(),f=a.width(),l=a.height(),y=d(window).height(),s=1;(n="body"===n[0].nodeName.toLowerCase())&&(v=y);t||(v=d(window).height(),h=d(window).width());
h=Math.round(h);v=Math.round(v);h/=f;v/=l;"both"===b?s=Math.min(h,v):"height"===b?s=v:"width"===b&&(s=h);void 0!==m&&(s=Math.min(s,m/f));void 0!==g&&(s=Math.max(s,g/f));a.css("-o-transform-origin","0 0");a.css("-ms-transform-origin","0 0");a.css("-webkit-transform-origin","0 0");a.css("-moz-transform-origin","0 0");a.css("-o-transform-origin","0 0");a.css("transform-origin","0 0");v="scale("+s+")";a.css("-o-transform",v);a.css("-ms-transform",v);a.css("-webkit-transform",v);a.css("-moz-transform",
v);a.css("-o-transform",v);a.css("transform",v);n&&!k||a.parent().height(Math.round(l*s)).width(Math.round(f*s));k&&(k=a.parent().parent(),k.height(Math.round(l*s+a.offset().top-k.offset().top)))}k?d.data(a[0],"alreadyWrapped")||(d.data(a[0],"alreadyWrapped",!0),d(window).bind("resize",function(){e()}),W(function(){e()})):c(a)||(n(a),d(window).bind("resize",function(){e()}),e())}function t(a,b){var g=d(a);c(g)&&(g=g.parent());if("both"===b||"horizontal"===b)g.css("position","absolute"),g.css("margin-left",
"auto"),g.css("margin-right","auto"),g.css("left","0"),g.css("right","0");if("both"===b||"vertical"===b)g.css("position","absolute"),g.css("margin-top","auto"),g.css("margin-bottom","auto"),g.css("top","0"),g.css("bottom","0")}function a(){var a=this.notifier={};a.obs=[];a.lvl=0}function k(a,b,g){if(b){g||(g={});g.methodName=b;var c=a.notifier,d=c.obs,k,m;c.lvl++;for(k=0;k<d.length;k++)if(m=(m=d[k])&&!m.deleted?m.o:void 0)if("function"===typeof m)m(b,a,g);else if(m[b])m[b](a,g);c.lvl--;if(0===c.lvl)for(a=
d.length,k=a-1;0<=k;k--)d[k].deleted&&d.splice(k,1)}}function g(a,b,g){var c,d,k,m,n=g?"":" ",t=/\S+/g,e=/[\t\r\n\f]/g;if(g?"undefined"===typeof b||"string"===typeof b&&b:"string"===typeof b&&b)c=(b||"").match(t)||[],a.each(function(a,t){if(d=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(e," "):n)){for(m=0;k=c[m++];)if(g)for(;0<=d.indexOf(" "+k+" ");)d=d.replace(" "+k+" "," ");else 0>d.indexOf(" "+k+" ")&&(d+=k+" ");t.className=g?b?d.trim():"":d.trim()}})}function m(a,b){var g,c="#"==
b[0],d=!c&&"."==b[0],k=c||d?b.slice(1):b,m=/^[\w-]*$/.test(k);return null!=a&&a.nodeType==a.DOCUMENT_NODE&&m&&c?(g=a.getElementById(k))?[g]:[]:1!==a.nodeType&&9!==a.nodeType?[]:Array.prototype.slice.call(m&&!c?d?a.getElementsByClassName(k):a.getElementsByTagName(b):a.querySelectorAll(b))}function y(a,b){b=b.replace(/=#\]/g,'="#"]');var g,c,d=pa.exec(b);d&&d[2]in fa&&(g=fa[d[2]],c=d[3],b=d[1],c&&(d=Number(c),c=isNaN(d)?c.replace(/^["']|["']$/g,""):d));if(!b)return!g||g.call(a,null,c)===a;if(!b||!a||
1!==a.nodeType)return!1;if(g=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector)return g.call(a,b);c=a.parentNode;(g=!c)&&(c=tempParent).appendChild(a);d=~m(c,b).indexOf(a);g&&tempParent.removeChild(a);return d}function A(a){a=d(a);return!(!a.width()&&!a.height())&&"none"!==a.css("display")}function z(a,b,g){function c(a){g._l[b]=null;l(g._l)&&k(g,"assetsLoaded",{inst:a.target})}if(!AdobeEdge.supported.addEventListener)return b;if(g&&"string"===typeof b&&!g._l[b])switch(a){case "image":a=
new Image;a.addEventListener("error",c);a.addEventListener("load",c);a.src=b;g._l[b]=a;break;case "audio":a=new Audio;a.addEventListener("error",c);a.addEventListener("canplaythrough",c);a.src=b;g._l[b]=a;break;case "video":a=document.createElement("video"),a.addEventListener("error",c),a.addEventListener("canplaythrough",c),a.src=b,g._l[b]=a}}function E(a,b){var g=q({name:a,conf:b,apply:function(a,b){1===this.conf.a?a.attr(this.name,b):(1===this.conf.cb&&(a.css("-webkit-"+this.name,b),a.css("-ms-"+
this.name,b),a.css("-moz-"+this.name,b),a.css("-o-"+this.name,b)),a.css(this.name,b))},units:function(a){var b;"auto"!==a&&this.conf.u&&("string"===typeof a&&(b=x(a)),b&&b.units||(a+=this.conf.u));return a},prep:function(a,b,g,c,d,k,m){void 0!==c&&b[g]?(void 0===b[g][c]&&k&&(c=k),void 0!==d&&b[g][c]?a=b[g][c][d]:(a=b[g][c],void 0===a&&(a=this.conf.d))):a=b[g];void 0!==a&&(a=this.units(a),1===this.conf.p&&z(b.type,m._getFullURL(a),m),this.conf.t&&(a=this.conf.t.replace("@@0",a)));return a},render:function(a,
b,g){var c=this.conf.f||this.name;void 0===b[c]||void 0!==this.conf.o&&this.conf.o!==b.tag||void 0!==this.conf.e&&this.conf.e===b.tag||(c=this.prep(a,b,c,this.conf.i,this.conf.j,this.conf.ii,g),null!==c&&void 0!==c&&this.apply(a,c,b,g))}},E.prototype);E.splitUnits=x;b.x&&(g=q(g,b.x));return g}function P(a){e(a,function(a,b){S[a]=new E(a,b)})}function Q(a,b,g,c,m,n,t,v){var h=d(document.createElement(g.tag||"div")),f=h[0];AdobeEdge.$.data(f,"domDef",g);h.attr("id",g.id);h.css("position","absolute");
h.css("margin","0px");b&&g.symbolName&&b._applyBaseStyles(h,g.symbolName);e(S,function(b,c){c.render(h,g,a)});h.css("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)");b&&b.register(f,g,b.ele?b.ele.id:"");h.addClass(h.attr("id")+"_id");v||k(AdobeEdge,"beginEle",{sym:b,ele:f,defn:{dom:g,style:c}});n&&h.addClass(n);(c=document.getElementById(f.id))&&(n=d(c).parent())&&n[0]==m&&m.removeChild(c);m.children&&0<=t&&t<m.children.length?m.insertBefore(f,m.children[t]):m.appendChild(f);AdobeEdge.$.data(f,"originalId",
g.id);AdobeEdge.$.data(f,"symParent",b);b&&(m=f.style.webkitTransform,b.gpuAccelerate&&f.style&&("undefined"===typeof m||""===m||"none"===m)?window.edge_authoring_mode&&"BODY"===f.nodeName||(f.style.webkitTransform="translateZ(0)"):!f.style.zIndex&&window.edge_authoring_mode&&(f.style.zIndex=0));b&&(v||k(b,"newEle",{ele:f,defn:g}));return h}function B(a){a.t&&(a.t=a.t.toLowerCase(),a.type=a.t);a.cs&&(a.className=a.cs);for(var b in Y)null!=a[b]&&(a[Y[b]]=a[b],a[b]=null);a.rect||(a.rect=[]);for(;4>
a.rect.length;)a.rect[a.rect.length]=0;a.transform&&(1>a.transform.length&&(a.transform[0]=[0,0,0]),2>a.transform.length&&(a.transform[1]=[0,0,0]),3>a.transform.length&&(a.transform[2]=[0,0,0]),4>a.transform.length&&(a.transform[3]=[1,1,1]));a.children&&(a.c=a.children,e(a.children,function(a,b){B(b)}))}function L(a,b,g,c,m,n,t){if(m||b||b.id)m=m||d("."+b.id)[0],e(g,function(g,d){var e=Q(a,b,d,c,m,n,t++),h={sym:b,ele:e[0],defn:d};d.c&&L(a,b,d.c,void 0,e[0],n,0);k(AdobeEdge,"endEle",h)})}function M(b,
g,c,d,m){a.call(this);c._s.push(this);q(this,{name:g,composition:c,data:b,prnt:d,tl:[],variables:m||{}});k(c,"newSymbol",{symbol:this,parent:d});return this}function w(a,b){if(b&&a.ci)for(var g=0;g<a.ci.length;++g){var c=a.ci[g];c&&w(c,b)}g=a._getTimeline()?a._getTimeline().getState():{playing:void 0};void 0==a.autoPlay||a.autoPlay?void 0==g.playing&&a.play(0):void 0==g.playing&&a.stop(-1,!1)}function F(a,b){var g,c;for(g in b)if(b.hasOwnProperty(g)){c=b[g];c.typeName=g;c.v&&(c.version=c.v);c.mv&&
(c.minimumCompatibleVersion=c.mv);c.b&&(c.build=c.b);c.bS&&(c.baseState=c.bS);c.iS&&(c.initialState=c.iS);null!=c.gpu&&(c.gpuAccelerate=c.gpu);null!=c.rI&&(c.resizeInstances=c.rI);c.cn&&(c.content=c.cn);if(c.content){var d=c.content;null!=d.sI&&(d.symbolInstances=c.content.sI);if(d.symbolInstances)for(var m=0;m<d.symbolInstances.length;m++){var k=d.symbolInstances[m];null!=k.sN&&(k.symbolName=k.sN);null!=k.a&&(k.autoPlay=k.a);null!=k.x&&(k.variables=k.x)}}e(c.content.dom,function(a,b){B(b)});for(var n in c.content.style)c.content.style.hasOwnProperty(n)&&
B(c.content.style[n]);c.cg&&(c.centerStage=c.cg);c.stf&&(c.scaleToFit=c.stf);c.x&&(c.variables=c.x);c.tt&&(c.timeline=c.tt);d=c.timeline;if(null!=d)for(null!=d.d&&(d.duration=d.d),null!=d.a&&(d.autoPlay=d.a),d.l&&(d.labels=d.l),c=0;c<d.data.length;c++)d.data[c]&&d.data[c][8]&&d.data[c][8].vt&&(d.data[c][8].valueTemplate=d.data[c][8].vt),d.data[c]&&d.data[c][1]&&"tr"===d.data[c][1]&&(d.data[c][1]=Y.tr)}a.sym=b}function I(b,c){a.call(this);this.$=d;q(this,{id:b,opts:q(c||{},aa),_urlRegExp:/^(?:[a-z]+:)?\/\//i,
_l:{},_d:{},_s:[],loaded:function(a,b,c){this._d[a]=null;l(this._d)&&this.ready()},load:function(a,b){b||(this._d[a]=!0);var c=this;yepnope({load:this._getFullURL(a),callback:function(g,d,m){b?b(a,d,m):c.loaded(a,d,m)}})},define:function(a,b,c,g,d,m){F(this,b);this.fnt=c;this.res=d;this.fx=m;ja(b);this.registerFonts(c);var k=this;g&&0<g.length&&g.forEach(function(a){k.load(a)})},_getFullURL:function(a){return this._urlRegExp.test(a)?a:(this.opts.htmlRoot||"")+a},definePreloader:function(a){this.preloaderDOM=
a},defineDownLevelStage:function(a){this.downLevelStageDOM=a},getStage:function(){return this.stage},registerFonts:function(a){if(a){var b,c,g,m,k,n,t;f.fonts=f.fonts||{};for(n in a)if(a.hasOwnProperty(n)&&!f.fonts[n]&&(g=a[n])&&""!==g){b=!1;for(t in f.fonts)f.fonts.hasOwnProperty(t)&&f.fonts[t]===g&&(b=!0);if(!b)if(f.fonts[n]=g,b=g.indexOf("//use.typekit.com/"),0>b&&(b=g.indexOf("//use.typekit.net/")),0>b&&(b=g.indexOf("//use.edgefonts.net/"),k=0<b,window._adobewebfontsappname_="Animate"),0<b)c=
g.indexOf('"',b+1),0<c&&(b=g.substring(b,c),k&&"file:"===window.location.protocol&&(b="http:"+b),g=document.createElement("script"),g.src=this._getFullURL(b),g.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(g),k||(m=function(){try{window.Typekit.load()}catch(a){window.setTimeout(m,100)}},window.setTimeout(m,100)));else if(0>g.indexOf("<script")&&0>g.indexOf("<link"))d("head").append(document.createTextNode(g));else if(0>g.indexOf("<script"))d("head").append(g);else if(b=
g.indexOf(">"),c=g.indexOf("\x3c/script>"),0<b&&0<c){g=g.substring(b+1,c);try{window.eval(g)}catch(e){}}}}},getSymbols:function(a){if(!a)return this._s;var b=[];e(this._s,function(g,c){c.name===a&&b.push(c)});return b},rC:function(a){return a},rR:function(a){this.stage&&O(this.stage,a)},ready:function(){var a=this;AdobeEdge.ready(function(){a.preloaderDOM&&a.preloaderDOM.script&&(new Function("e",a.preloaderDOM.script.loading))({event:"done",progress:1,reason:"complete"});C.AdobeEdge&&C.AdobeEdge.bootstrapLoading&&
(c=c||{},c.bootstrapLoading=!0);window.edge_authoring_mode||(c&&c.framework$&&(f.$=c.framework$),window.jQuery&&(f.$=window.jQuery));AdobeEdge.addTouchSupport();a.bindingFn&&a.bindingFn(f.$);var b=a.stage=new M(a.sym,"stage",a),g,m="."+a.id,k=d(m);k[0]||(k=d("body").addClass(m));b.init(k[0],"edgeLoad-"+a.id);b._applyBaseStyles(k,"stage");k.css("position","relative");if(!window.edge_authoring_mode||c.sym)if(k=b.data.stage,!k||"height"!==k.scaleToFit&&"width"!==k.scaleToFit&&"both"!==k.scaleToFit||
n(d(m)),!k||"vertical"!==k.centerStage&&"horizontal"!==k.centerStage&&"both"!==k.centerStage||t(b.ele,k.centerStage),"height"===k.scaleToFit||"width"===k.scaleToFit||"both"===k.scaleToFit){var m=k.content.style["${stage}"]||k.content.style["${Stage}"],e,h,ca=/px|^0$/;m&&m.sizeRange&&(e=m.sizeRange[0],e=ca.test(e)?parseInt(e,10):void 0,h=m.sizeRange[1],h=ca.test(h)?parseInt(h,10):void 0);v(b.$("stage"),k.scaleToFit,e,h,!0,a.opts.bScaleToParent)}g=function(){if(a.launchCalled||a.opts.bootstrapLoading&&
!f.doPlayWhenReady)f.readyAndWaiting.push(g);else{a.launchCalled=!0;d(".edgePreload-"+a.id).css("display","none");d(".edgeLoad-"+a.id).removeClass("edgeLoad-"+a.id);aBootcompsLoaded.push(a.id);for(var c=window.AdobeEdge.bootstrapListeners.length,k=0;k<c;k++)try{window.AdobeEdge.bootstrapListeners[k](a.id)}catch(m){console.log("bootstrap error "+m)}c=d.Event("compositionReady");c.compId=a.id;d(document).trigger(c);a.readyCalled=!0;window.edge_authoring_mode?b.stopAll(0):w(b,!0)}};l(a._l)?g():a.addObserver({assetsLoaded:function(a,
b){g()}})})},getCompId:function(){return this.id}});return this}function N(a){e(H,function(b,g){a=Math.min(g.rC(a),a)});return a}function J(a,b){e(H,function(g,c){var d=c[b];d&&d.call(c,a)})}function O(a,b){if(a.ci)for(var g=0;g<a.ci.length;++g){var c=a.ci[g];c&&O(c,b)}a&&a._getTimeline().tick(b)}function K(a){a({event:"begin"})}function W(a){if(U||"complete"===D.readyState)a();else if(D.addEventListener){var b=!1;D.addEventListener("DOMContentLoaded",function(g){U=!0;b||(a(),b=!0)},!1);D.onreadystatechange=
function(){"complete"==document.readyState&&(U=!0);D.onreadystatechange=null;b||(a(),b=!0)}}else D.attachEvent&&D.attachEvent("onreadystatechange",function(b){U=!0;a(b)})}function R(a){return a&&"string"===typeof a&&(0<a.indexOf("%")||0<a.indexOf("em")||"auto"===a||"null"===a)?!1:!0}function $(a){if(!a)return 0;if("number"===typeof a)return a;var b=a.indexOf("px").val;return 0<b?(val=a.substring(0,b),parseFloat(val)):parseFloat(a)}function X(a,b,g,c,d){var k,m,n;for(k=0;k<a.length;k++)m=a[k],n="${"+
m.id+"}",g[n]&&(b[n]=!0,m.rect||(m.rect=m.r,m.r=void 0,m.rect||(m.rect=[0,0,0,0])),m.rect&&(m.transform||(m.transform=m.tf,m.tf=void 0,m.transform||(m.transform=[])),m.transform[0]||(m.transform[0]=[0,0]),R(m.rect[0])&&(m.transform[0][0]=$(m.rect[0]),c[n]=m.transform[0][0],m.rect[0]="0px"),R(m.rect[1])&&(m.transform[0][1]=$(m.rect[1]),d[n]=m.transform[0][1],m.rect[1]="0px"))),m.children?X(m.children,b,g,c,d):m.c&&X(m.c,b,g,c,d)}function ja(a){if(!window.edge_authoring_mode)for(var b in a)if(a.hasOwnProperty(b)){var g=
a[b],c=void 0,d=void 0,m=void 0,k=void 0,n={},t={},e={},h={};if(g.timeline)for(m=g.timeline,c=0;c<m.data.length;c++)(k=m.data[c])&&("left"==k[1]||"top"==k[1])&&R(k[7])&&(h[k[5]]=!0);g.content&&g.content.dom&&X(g.content.dom,e,h,n,t);if(g.timeline)for(m=g.timeline,c=0;c<m.data.length;c++)(k=m.data[c])&&("left"==k[1]||"top"==k[1])&&R(k[7])&&e[k[5]]&&("left"===k[1]?d="translateX":"top"===k[1]&&(d="translateY"),k[1]=d)}}var D=document,C=window,S={},H={},aa={imagesDir:"images/"},ba,la=Array.prototype.forEach,
T,U,ka=[],V,oa=[].push,ga={},da={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[1,"",""]},ma=/<([\w:]+)/,na=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,G={},Z={};f.doPlayWhenReady=!1;f.readyAndWaiting=[];var qa={columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,
order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},ha={letterSpacing:0,fontWeight:400};V=document.createElement("div");ba=p(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);d.each=e;d.extend=q;d.data=function(a,b,g){var c="an_"+b;2<arguments.length&&(a[c]=g);return a[c]};q(a.prototype,{addObserver:function(a){if(a){var b=this.notifier.obs,g,c;g=b.length;for(c=0;c<g;c++)if(b[c].o===a)return;b[g]={o:a}}},removeObserver:function(a){if(a){var b=this.notifier,g=b.obs,c;
for(c=0;c<g.length;c++)if(g[c].o===a)if(0===b.lvl){g.splice(c,1);break}else g[c].deleted=!0}},notifyObservers:function(a,b){return k(this,a,b)},removeObservers:function(){var a=this.notifier?this.notifier.obs:null;a&&a.splice(0,a.length)}});b.expr={};var fa=b.expr[":"]={visible:function(){if(A(this))return this},hidden:function(){if(!A(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(a){if(0===
a)return this},last:function(a,b){if(a===b.length-1)return this},eq:function(a,b,c){if(a===c)return this},has:function(a,b,c){if(m(this,c).length)return this}},pa=/(.*):(\w+)(?:\(([^)]+)\))?$\s*/,ra={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};q(b.prototype,{css:function(a,b){if(!(1>
this.length)){if("string"==typeof a){var c,g=s(a);if(1<arguments.length){isNaN(parseFloat(b))||!isFinite(b)||qa[g]||(b+="px");for(c=0;c<this.length;c++)this[c].style[g]=b;return this}c=C.getComputedStyle?C.getComputedStyle(this[0])[g]||this[0].style[g]:this[0].style[g];"normal"===c&&g in ha&&(c=ha[g]);return c}if(r(a)){var m={},k=this[0];d.each(r(a)?a:[a],function(a,b){var c=s(b);m[b]=k.style[c]||C.computedStyle.getPropertyValue(k)[c]});return m}for(g in a)this.css(g,a[g]);return this}},prop:function(a,
b){a=ra[a]||a;return 1 in arguments?this.each(function(c,g){this[a]="function"==typeof b?b.call(this,g,this[a]):b}):this[0]&&this[0][a]},addClass:function(a){g(this,a);return this},removeClass:function(a){g(this,a,!0);return this},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length,g=/[\t\r\n\f]/g;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(g," ").indexOf(a))return!0;return!1},attr:function(a,b){if("string"!==typeof a||!this.length)return null;if(void 0===b)return this[0].getAttribute(a);
this.each(function(c,g){b?this.setAttribute(a,b):this.removeAttribute(a)});return this},removeAttr:function(a){if("string"!==typeof a||!this.length)return null;this.each(function(b,c){c.removeAttribute(a)});return this},each:function(a){la.call(this,function(b,c){a.call(b,c,b)});return this},get:function(a){if(this.length&&a<this.length)return this[a]},_s:function(a,b){if(this.length){if(void 0===a)return this[0][b];this.each(function(c,g){this[b]=a});return this}},parent:function(){var a=this[0].parentNode;
return a&&11!==a.nodeType?d(a):null},parents:function(){for(var a=this[0],b=[];(a=a.parentNode)&&9!==a.nodeType;)1===a.nodeType&&b.push(a);return b},text:function(a){return this._s(a,"textContent")},html:function(a){return this._s(a,"innerHTML")},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display")){var a=this.style,b=this.nodeName,c,g;Z[b]||(c=document.createElement(b),document.body.appendChild(c),
g=getComputedStyle(c,"").getPropertyValue("display"),c.parentNode.removeChild(c),"none"==g&&(g="block"),Z[b]=g);a.display=Z[b]}})},hide:function(){return this.css("display","none")},wrap:function(a){var b="function"==typeof a;if(this[0]&&!b)var c=d(a).get(0),g=c.parentNode||1<this.length;return this.each(function(m){d(this).wrapAll(b?a.call(this,m):g?c.cloneNode(!0):c)})},wrapAll:function(a){if(this[0]){for(this[0].parentElement.insertBefore(a,this[0]);a.firstElementChild;)a=a.firstElementChild;d(a).append(this)}return this},
dimension:function(a){var b=this[0],c=a[0]?a[0].toUpperCase()+a.substr(1):"";if(b===b.window)return b.document.documentElement["client"+c];if(9===b.nodeType)return Math.max(b.body["scroll"+c],D["scroll"+c],b.body["offset"+c],D["offset"+c],D["client"+c]);c=this.css(a)||"";if("auto"!=c&&(c=x(c),!c.units||"px"==c.units))return c.num;b=b.getBoundingClientRect();if("width"===a)return Math.round(b.width);if("height"===a)return Math.round(b.height)},width:function(a){return void 0!=a?this.css("width",a):
this.dimension("width")},height:function(a){return void 0!=a?this.css("height",a):this.dimension("height")},offset:function(){if(!this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:Math.round(a.width),height:Math.round(a.height)}},is:function(a){return 0<this.length&&y(this[0],a)}});P({opacity:{},left:{f:"rect",i:0,u:"px"},top:{f:"rect",i:1,u:"px"},width:{f:"rect",i:2,u:"px"},height:{f:"rect",i:3,u:"px"},right:{f:"rect",
i:4,u:"px"},bottom:{f:"rect",i:5,u:"px"},src:{o:"img",f:"fill",i:1,a:1,p:1,x:{apply:function(a,b,c,g){b=g?g._getFullURL(b):b;a.attr("src",b)}}},poster:{f:"poster",o:"video",a:1},preload:{f:"preload",a:1},medsrc:{e:"img",f:"source",a:1,x:{apply:function(a,b,c,g){var m;a:{m=c.type;var k=c.preload;if(!AdobeEdge.isIOS){var n,t;for(n=0;n<b.length;n++)if(t=b[n].split("."),t=t[t.length-1].toLowerCase(),AdobeEdge.supported[m][t]){t=!1;(t=null===k||""==k?"auto"==("audio"==m?g.opts.gAudioPreloadPreference:
g.opts.gVideoPreloadPreference):"auto"==k)&&z(m,g._getFullURL(b[n]),g);m=g._getFullURL(b[n]);break a}}m=void 0}if(d.isArray(b)&&1!=b.length)for(m=0;m<b.length;m++)k=document.createElement("source"),d(k).attr("src",g._getFullURL(b[m])),a.get(0).appendChild(k);else m?a.attr("src",m):a.attr("src",d.isArray(b)?g._getFullURL(b[0]):g._getFullURL(b));"audio"==c.tag&&a.attr("controls","block"==c.display)}}},"background-image":{e:"img",f:"fill",i:1,t:"url(@@0)",p:1,x:{prep:function(a,b,c,g,d,m,k){var n;b[c]&&
(n=b[c][g]);void 0!==n&&(n=k._getFullURL(n),z(b.type,n,k),n=this.conf.t.replace("@@0",n));return n}}},"background-color":{f:"fill",i:0,x:{apply:function(a,b){a.css("background-color",h(b))}}},text:{x:{apply:function(a,b){a.html(b)}}},"min-width":{f:"sizeRange",i:0},"max-width":{f:"sizeRange",i:1},"min-height":{f:"sizeRange",i:2},"max-height":{f:"sizeRange",i:3},overflow:{x:{apply:function(a,b){a.css("overflow",b);"hidden"!==b&&"scroll"!==b||a.css("text-overflow","clip")}}},"background-repeat":{e:"img",
f:"fill",x:{apply:function(a,b){b&&1!=b.length&&(d.isArray(b[1])||a.css("background-repeat",b[6]||"no-repeat"))}}},"background-attachment":{f:"fill",i:7,x:{apply:function(a,b){"scroll"!==b&&a.css("background-attachment",b)}}},"background-size":{f:"fill",i:4,d:"100% 100%"},autoOrient:{x:{apply:function(a,b){AdobeEdge.$.data(a[0],"doAutoOrient",b)}}},clip:{},display:{},"border-top-left-radius":{f:"borderRadius",i:0},"border-top-right-radius":{f:"borderRadius",i:1,ii:0},"border-bottom-right-radius":{f:"borderRadius",
i:2,ii:0},"border-bottom-left-radius":{f:"borderRadius",i:3,ii:0},"border-width":{f:"stroke",i:0,d:0,u:"px"},"border-color":{f:"stroke",i:1,d:"rgba(0,0,0,0)"},"border-style":{f:"stroke",i:2,d:"none"},cursor:{f:"cursor"},"transform-origin":{cb:1,f:"transform",i:4,x:{prep:function(a,b,c,g,d,m){if(b.transform&&void 0!=b.transform[4])return 1==b.transform[4].length?b.transform[4][0]+" 50%":b.transform[4][0]+" "+b.transform[4][1]}}},"font-family":{f:"font",i:0},"font-size":{f:"font",i:1,u:"px",x:{prep:function(a,
b,c,g,d,m,k){if("text"==b.type)return g=this.conf.i,d=0,c=this.conf.f,a=b[c][g][d],b=b[c][g][d+1],b&&""!=b||(b=this.conf.u),a+b}}},"font-weight":{f:"font",i:3},"letter-spacing":{f:"textStyle",i:0},"word-spacing":{f:"textStyle",i:1},"line-height":{f:"textStyle",i:2},"text-indent":{f:"textStyle",i:3},"text-transform":{f:"textStyle",i:4},color:{f:"font",i:2,x:{apply:function(a,b){a.css("color",h(b))}}},"text-decoration":{f:"font",i:4},"font-style":{f:"font",i:5},"word-wrap":{f:"font",i:6},"text-align":{f:"align"},
"white-space":{f:"rect",x:{prep:function(a,b){if(b.font)return 7<b.font.length?b.font[7]:b.rect},apply:function(a,b){d.isArray(b)?(!b[2]||0>=b[2]||"auto"==b[2])&&(!b[3]||0>=b[3]||"auto"==b[3])&&(a.css("white-space","nowrap"),a.css("wordWrap","break-word")):(a.css("white-space",b),"nowrap"==b&&a.css("wordWrap","break-word"))}}},volume:{f:"volume",x:{apply:function(a,b){a.get(0).volume=b}}},className:{f:"uc",x:{apply:function(a,b){a.addClass(b)}}},controls:{a:1},alt:{a:1},title:{a:1},tabindex:{a:1},
autoplay:{a:1},loop:{a:1},linkURL:{f:"linkURL",a:1,x:{prep:function(a,b){ga[a[0].id]=b;a[0].onclick=function(){var a=ga[this.id];a.linkTarget?window.open(a.linkURL,a.linkTarget):window.location.href=a.linkURL};a[0].style.cursor="pointer"}}}});var Y={c:"children",r:"rect",zr:"sizeRange",br:"borderRadius",cl:"clip",al:"alt",tt:"title",ti:"tabindex",cn:"controls",sr:"source",ps:"poster",pr:"preload",cu:"cursor",ap:"autoplay",lp:"loop",n:"font",tf:"transform",sh:"boxShadow",ts:"textStyle",o:"opacity",
uc:"userClass",s:"stroke",f:"fill",v:"display",fi:"filter",sN:"symbolName",tr:"trigger"};q(M.prototype,a.prototype);q(M.prototype,{init:function(a,b){var c=this.data[this.name];c&&L(this.composition,this,c.content.dom,c.content.style,a,b)},register:function(a,b){},play:function(a){}});q(I.prototype,a.prototype);I._playAuto=w;(function(){var a;T||(a=C.requestAnimationFrame||C.webkitRequestAnimationFrame||C.mozRequestAnimationFrame||C.msRequestAnimationFrame||C.oRequestAnimationFrame||function(a){C.setTimeout(a,
17)},T=function(){var b;b=N(0);J(b,"rP");J(b,"rR");J(b,"rA");a.call(C,T)},a.call(C,T))})();G.cssTransform=p(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);G.cssTransform3d=p(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);G.audio=function(){var a=document.createElement("audio"),b={};a.canPlayType&&(b.m4a=!!a.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,""),b.aac=b.m4a,b.mp3=!!a.canPlayType("audio/mpeg;").replace(/no/,
""),b.wav=!!a.canPlayType('audio/wav; codecs="1"').replace(/no/,""),b.ogg=!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""),b.oga=b.ogg);return b}();G.video=function(){var a=document.createElement("video"),b={};a.canPlayType&&(b.webm=!!a.canPlayType("video/webm").replace(/no/,""),b.mp4=!!a.canPlayType("video/mp4;").replace(/no/,""),b.ogv=!!a.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/,""),b.ogg=!!a.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/,""));
return b}();G.customEvent=function(){if(!window.CustomEvent)return!1;try{return void 0!==new CustomEvent("testCustomEvent",!1,!1)}catch(a){}return!1}();G.addEventListener=void 0!==window.addEventListener;var sa=G,ia;V.style.cssText="background-color:rgba(150,255,150,.5)";ia=0==(""+V.style.backgroundColor).indexOf("rgba")?!0:!1;sa.rgba=ia;q(f,{version:"5.0.0",Composition:I,defaultOpt:aa,$:d,An$:b,renderDOM:L,ready:W,camelize:s,splitUnits:x,loadComposition:function(a,b,c,g,m){function n(a,g){W(function(){var m=
d("."+b),k=/px|^0$/,n=c.scaleToFit,e=c.centerStage,h=c.minW,f=c.maxW,l=c.width,s=c.height,y=m[0]||document.getElementsByTagName("body")[0];"absolute"!=y.style.position&&"relative"!=y.style.position&&(y.style.position="relative");s&&(y.style.height=s);l&&(y.style.width=l);/^height$|^width$|^both$/.test(n)&&(h=k.test(h)?parseInt(h,10):void 0,f=k.test(f)?parseInt(f,10):void 0,v(d(y),n,h,f,!1,c.bScaleToParent));/^vertical$|^horizontal$|^both$/.test(e)&&t(y,e);a&&L(H[b],null,a.dom,a.style,m[0],g+b);m.removeClass("edgeLoad-"+
b)})}function e(){K(function ea(a){a?ea&&setTimeout(ea,20):a={event:"loading",progress:0};f.preloaderDOM.script&&(new Function("e",f.preloaderDOM.script.loading))(a)});n(f.preloaderDOM,"edgePreload-")}function h(){n(f.downLevelStageDOM,"edgeDownLevel-")}var f=H[b]=AdobeEdge.compositions[b]=new I(b,c);k(AdobeEdge,"newComp",{comp:f});ba?(window.edge_authoring_mode||(g?(f.definePreloader(g),e()):f.load(a+"_edgePreload.js",e)),a&&(c&&c.bootstrapLoading?ka.push(a):window.edge_authoring_mode&&c.sym?f.load(a+
"_edge.js?symbol="+c.sym):f.load(a+"_edge.js"))):window.edge_authoring_mode||(m?(f.defineDownLevelStage(m),h()):f.load(a+"_edgePreload.js",h))},registerCompositionDefn:function(a,b,c,g,d,m){H[a].define(m,b,c,g,d)},registerEventBinding:function(a,b){H[a].bindingFn=b},getComposition:function(a){return H[a]},defineProps:P,props:S,Symbol:M,Notifier:a,isSupported:p,supported:G,isIOS:function(){var a=navigator.userAgent;return"webkitAppearance"in document.documentElement.style&&(/iPad/.test(a)||/iPod/.test(a)||
/iPhone/.test(a))}(),isOpera:/Opera/.test(navigator.userAgent),registerFonts:function(a){AdobeEdge.getCurrentComposition().registerFonts(a)},playWhenReady:function(){f.doPlayWhenReady=!0;for(var a=0;a<f.readyAndWaiting.length;a++)f.readyAndWaiting[a]()},_:{c:H,P:E,p:S,rE:Q,nO:k,nDN:B}});q(f,a.prototype);a.call(f)})(window.AdobeEdge);window.AdobeEdge.bootstrapListeners||(window.AdobeEdge.bootstrapListeners=[]);
window.AdobeEdge.bootstrapCallback=function(f){window.AdobeEdge.bootstrapListeners.push(f);if(0<aBootcompsLoaded.length)for(var r=0;r<aBootcompsLoaded.length;r++)f(aBootcompsLoaded[r])};window.AdobeEdge.compositions||(window.AdobeEdge.compositions=[]);window.AdobeEdge.yepnope=window.yepnope;
(function(f){function r(){f.Notifier.call(this);this.animationID="animID-"+r.nextID;r.nextID+=1}function u(b,d,c){f.Animation.call(this);"function"===typeof b?this.handler=b:"string"===typeof b&&(this.eventType=b);this.handlerContext=c;this.data=d;this.isTrigger=!0}function e(b,d,c,n,h){f.Notifier.call(this);this.animation=b;this.position=0;this.duration=-1;this.opts={};l.extend(this.opts,h);this.easing="function"===typeof n?n:n&&l.easing[n]?n:e.defaultEasing;void 0!==d&&(this.position=d);void 0!==
c&&(this.duration=c);this.timeline=null;this.dScale=1;this.dDuration=0;this.done=!1}function p(b){f.Animation.call(this);l.extend(this,f.Timeline.config);l.extend(this,b);this.startPosition=this.timerStart=this.timer=0;this.currentPosition=-1;this.playing=void 0;this.iteration=this.duration=0;this.interval=1E3/this.fps;this.objects=[]}function h(b){return s.test(b[1])}var l=f.$,q={},x={},s=/^(trigger|@)$/;l.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)};l.easing=l.easing||
{};l.extend(l.easing,{linear:function(b,d,c,n){return c+n*b},swing:function(b,d,c,n){return(-Math.cos(b*Math.PI)/2+0.5)*n+c}});r.nextID=1;l.extend(r.prototype,f.Notifier.prototype);l.extend(r.prototype,{constructor:r,setup:function(){},update:function(b,d){},getDuration:function(){return 0}});l.extend(u.prototype,r.prototype);l.extend(u.prototype,{constructor:u,update:function(b){this.fired||(this.fired=!0,this.handler?this.handler.call(this.handlerContext,b,this.data):this.eventType&&this.timeline&&
this.timeline.notifyObservers(this.eventType,{elapsed:b,data:this.data}))},setup:function(b,d){var c=void 0===b.executeTriggers||null===b.executeTriggers;this.fired=b.startingFromCurrent&&c||!c&&!b.executeTriggers?"reverse"!==b.playDirection?b.currentPosition>=d:b.currentPosition<=d:"reverse"!==b.playDirection?b.currentPosition>d:b.currentPosition<d;this.timeline=b}});e.defaultEasing="linear";l.extend(e.prototype,f.Notifier.prototype);l.extend(e.prototype,{constructor:e,setup:function(b){this.timeline=
b;var d=this.duration,c=null;this.animation&&this.animation.getDuration&&(c=this.animation.getDuration());this.dScale=-1!==d&&0!==d?c/d:1;this.dDuration=-1!==d?d:c;this.done=!1;this.animation&&this.animation.setup&&this.animation.setup(b,this.position)},update:function(b){if(!this.done){var d=this.dDuration,c;this.animation&&(0===d?c=0<=b?1:0:(b>=d&&(b=d),0>=b&&(b=0),c=l.easing[this.easing](b/d,b,0,1,d)),this.animation.update(b*this.dScale,c));("reverse"===this.timeline.playDirection?0>=b:b>=d)&&
this.complete()}},complete:function(){this.done=!0;this.timeline&&this.timeline.updateComplete(this)},getPosition:function(){return this.position},setPosition:function(b){this.position=b},getDuration:function(){return-1!==this.duration?this.duration:this.animation&&this.animation.getDuration?this.animation.getDuration():0},setDuration:function(b){this.duration=0<=b?b:-1}});p.config={dropFrames:!0,fps:60,pauseThreshold:250};p.prototype.tick=function(b){this._handleTimer(b)};l.extend(p.prototype,r.prototype);
l.extend(p.prototype,{constructor:p,play:function(b){b=b||{};this.notifyObservers("play");this.playing=!0;this._stop({});if("undefined"===typeof b.pos||null===b.pos)if("reverse"==b.playDirection)b.pos=this.currentPosition,0>=b.pos&&(b.pos=this.getDuration());else if(0>this.currentPosition||this.currentPosition>=this.getDuration())b.pos=0;l.extend(this,b);this.seek(b.pos,b);this.iteration=0;this.timerStart=(new Date).getTime();this.startPosition=this.currentPosition;this.lastUpdateTime=this.timerStart;
this.firstUpdate=!0;this._handleTimer();this.firstUpdate=!1;return this},stop:function(b){this.playing=!1;b&&b.bSeek?this.seek(b.pos,b):this._stop(b)},seek:function(b,d){this.notifyObservers("seek");this.sort(d);var c=this.currentPosition;this._stop(d);l.extend(this,d);void 0!==b&&(this.currentPosition=b);this.startingFromCurrent="number"===typeof b&&c!==this.currentPosition?!1:!0;this.setup(this);this.firstUpdate=!0;this.updateSeek(this.currentPosition,1,c);this.firstUpdate=!1;return this},add:function(b,
d,c,n,h){b=new e(b,d,c,n,h);this.objects.push(b);this.sorted=!1},sort:function(b){var d={width:1,height:2,"-webkit-transform-origin":3,"transform-origin":4,"-moz-transform-origin":5,"-ms-transform-origin":6,left:7,top:8,bottom:9,right:10,motion:11};this.sorted||(this.objects.sort(function(b,c){var a=b.animation,k=c.animation;if(a||k){if(!a)return-1;if(!k)return 1}else return b.position-c.position;if(a.property||k.property){if(!a.property)return-1;if(!k.property)return 1}else return b.position-c.position;
var g=d[a.property],m=d[k.property];return a.sourceElements!==k.sourceElements?a.sourceElements>k.sourceElements?1:-1:g&&(!m||m<g)?1:m&&(!g||m>g)?-1:b.position-c.position}),this.sorted=!0);for(b=1;b<this.objects.length;b++){var c=this.objects[b-1],n=this.objects[b];c.animation&&n.animation&&c.animation.property===n.animation.property&&c.animation.sourceElements===n.animation.sourceElements?(c.animation._nextObj=n.animation,n.animation._prevObj=c.animation):(c.animation&&(c.animation._nextObj=null),
n.animation&&(n.animation._prevObj=null))}},getDuration:function(){var b=this.duration,d=this.objects,c=this.objects.length,n=Math.max,e,t;for(e=0;e<c;e+=1)t=d[e],b=n(b,t.position+t.getDuration());return b},getCurrentPosition:function(){return this.currentPosition},update:function(b,d){this.sort();this.notifyObservers("preUpdate",{elapsed:b,easingConst:d});var c=this.objects,n=this.triggers,e=c.length,t=n.length,a="reverse"!==this.playDirection,k=!1,g=!0,m=!window.edge_authoring_mode&&this.executeTriggers,
h=!window.edge_authoring_mode&&(void 0===this.executeTriggers||null===this.executeTriggers),f,l,s,q,p,r;this.currentDirection=a?"forward":"reverse";for(s=0;s<t;s+=1)if(q=n[a?s:t-s-1],p=q.animation.isTrigger&&!(this.startingFromCurrent&&this.firstUpdate),(h&&p||m||!this.firstUpdate)&&!q.animation.fired&&(a?b>=q.position:b<=q.position+q.duration)){p=this.currentPosition=q.position;r=this.getState();for(k=0;k<e;k+=1)f=c[a?k:e-k-1],(l=a&&!f.opts.reverseOnly||!a&&!f.opts.forwardOnly)&&!f.animation.isTrigger&&
(a?p>=f.position:p<=f.position+f.duration)&&((l=p-f.position)||f.duration||a||(l-=1),f.update(l));k=!0;q.animation.update(p);if(!this.equalState(r)){g=!1;break}}if(!k)for(k=0;k<e;k+=1)f=c[a?k:e-k-1],(l=a&&!f.opts.reverseOnly||!a&&!f.opts.forwardOnly)&&!f.animation.isTrigger&&(a?b>=f.position:b<=f.position+f.duration)&&((l=b-f.position)||f.duration||a||(l-=1),f.update(l));this.notifyObservers("fxUpdate",{elapsed:b});this.notifyObservers("postUpdate",{elapsed:b,easingConst:d});this.notifyObservers("update",
{elapsed:b,easingConst:d});return g},setLoop:function(b){this.loopCount=b},getState:function(){return{pos:this.currentPosition,dir:this.playDirection,playing:this.playing}},equalState:function(b){var d=!!b.playing,c=!!this.playing;return b.pos===this.currentPosition&&b.dir===this.playDirection&&d===c},_handleTimer:function(b){b=b||(new Date).getTime();var d="reverse"===this.playDirection,c=b-this.timerStart-this.iteration*(d?this.startPosition:this.duration-this.startPosition),d=this.startPosition+
(d?-c:c);b-this.lastUpdateTime>this.pauseThreshold&&(this.timerStart+=b-this.lastUpdateTime+this.interval,c=b-this.timerStart);if(this.playing){if(this.currentPosition=d=Math.max(0,Math.min(d,this.duration)),this.update(d,1),this.lastUpdateTime=b,b=(d="reverse"===this.playDirection)?0<this.currentPosition:this.currentPosition<this.duration,!b){if(this.loopCount&&(this.iteration+=1,this.notifyObservers("iterationComplete",{elapsed:c,count:this.iteration}),"forever"===this.loopCount||this.iteration<
this.loopCount)){c=this.objects;b=c.length;for(d=0;d<b;d+=1)c[d].done=!1;this.tick();return}this.stop();this.notifyObservers("complete",{elapsed:c})}}else this.notifyObservers("fxUpdate",{elapsed:c})},setup:function(b){f.Animation.prototype.setup.call(this,b);this.triggers=[];b=this.objects;var d=this.objects.length,c,n;for(c=0;c<d;c+=1)n=b[c],n.done=!1,n.setup(this),n.animation.isTrigger&&this.triggers.push(n);this.duration=this.getDuration()},updateComplete:function(b){b.done=!0},_stop:function(b){b&&
b.dontNotify||this.notifyObservers("stop");this.timer&&clearTimeout(this.timer);this.timerStart=this.timer=0;return this}});p.prototype.updateSeek=p.prototype.update;f.Animation=r;f.TimelineObject=e;f.Timeline=p;f.Timeline.createTimeline=function(b){return new f.Timeline(b)};f.Timeline.createTween=function(b){var d=q[b];return d?d.func.apply(d.context,Array.prototype.slice.call(arguments,1)):null};f.Timeline.addTweenType=function(b,d,c){q[b]={func:d,context:c}};f.Timeline.addTweenProperty=function(b,
d){x[b]=d};f.Timeline.getTweenType=function(b){return x[b]||"style"};f.Timeline.createTrigger=function(b,d){return new u(b,d,arguments[arguments.length-1])};f.Timeline.isTrigger=h;f.Timeline.isTween=function(b){return!h(b)};f.Timeline.createTL=function(b,d,c){var n=f.Timeline.createTimeline(),e=b.length,t,a,k,g;k=b.duration?b.duration:0;var m;n.duration=k;c&&c.loop&&n.setLoop(c.loop);for(c=0;c<e;c+=1)t=b[c],a=null,k=-1,h(t)?(g=t.slice(3,5),g.push(d),a=f.Timeline.createTrigger.apply(null,g),g=t[5],
m="none"):t[1]&&(k=x[t[1]]||"style",g=[k,t[1]].concat(t.slice(5)),a=f.Timeline.createTween.apply(null,g),k=t[3],m=t[4],g=t[8]),a&&(a.id=t[0],n.add(a,t[2],k,m,g));return n}})(window.AdobeEdge);
(function(f){var r=f.$;r.easing.jswing=r.easing.swing;r.extend(r.easing,{def:"easeOutQuad",swing:function(f,e,p,h,l){return r.easing[r.easing.def](f,e,p,h,l)},easeInQuad:function(f,e,p,h,l){return h*(e/=l)*e+p},easeOutQuad:function(f,e,p,h,l){return-h*(e/=l)*(e-2)+p},easeInOutQuad:function(f,e,p,h,l){return 1>(e/=l/2)?h/2*e*e+p:-h/2*(--e*(e-2)-1)+p},easeInCubic:function(f,e,p,h,l){return h*(e/=l)*e*e+p},easeOutCubic:function(f,e,p,h,l){return h*((e=e/l-1)*e*e+1)+p},easeInOutCubic:function(f,e,p,h,
l){return 1>(e/=l/2)?h/2*e*e*e+p:h/2*((e-=2)*e*e+2)+p},easeInQuart:function(f,e,p,h,l){return h*(e/=l)*e*e*e+p},easeOutQuart:function(f,e,p,h,l){return-h*((e=e/l-1)*e*e*e-1)+p},easeInOutQuart:function(f,e,p,h,l){return 1>(e/=l/2)?h/2*e*e*e*e+p:-h/2*((e-=2)*e*e*e-2)+p},easeInQuint:function(f,e,p,h,l){return h*(e/=l)*e*e*e*e+p},easeOutQuint:function(f,e,p,h,l){return h*((e=e/l-1)*e*e*e*e+1)+p},easeInOutQuint:function(f,e,p,h,l){return 1>(e/=l/2)?h/2*e*e*e*e*e+p:h/2*((e-=2)*e*e*e*e+2)+p},easeInSine:function(f,
e,p,h,l){return-h*Math.cos(e/l*(Math.PI/2))+h+p},easeOutSine:function(f,e,p,h,l){return h*Math.sin(e/l*(Math.PI/2))+p},easeInOutSine:function(f,e,p,h,l){return-h/2*(Math.cos(Math.PI*e/l)-1)+p},easeInExpo:function(f,e,p,h,l){return 0==e?p:h*Math.pow(2,10*(e/l-1))+p},easeOutExpo:function(f,e,p,h,l){return e==l?p+h:h*(-Math.pow(2,-10*e/l)+1)+p},easeInOutExpo:function(f,e,p,h,l){return 0==e?p:e==l?p+h:1>(e/=l/2)?h/2*Math.pow(2,10*(e-1))+p:h/2*(-Math.pow(2,-10*--e)+2)+p},easeInCirc:function(f,e,p,h,l){return-h*
(Math.sqrt(1-(e/=l)*e)-1)+p},easeOutCirc:function(f,e,p,h,l){return h*Math.sqrt(1-(e=e/l-1)*e)+p},easeInOutCirc:function(f,e,p,h,l){return 1>(e/=l/2)?-h/2*(Math.sqrt(1-e*e)-1)+p:h/2*(Math.sqrt(1-(e-=2)*e)+1)+p},easeInElastic:function(f,e,p,h,l){f=1.70158;var q=0,r=h;if(0==e)return p;if(1==(e/=l))return p+h;q||(q=0.3*l);r<Math.abs(h)?(r=h,f=q/4):f=q/(2*Math.PI)*Math.asin(h/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*l-f)*Math.PI/q))+p},easeOutElastic:function(f,e,p,h,l){f=1.70158;var q=0,r=h;
if(0==e)return p;if(1==(e/=l))return p+h;q||(q=0.3*l);r<Math.abs(h)?(r=h,f=q/4):f=q/(2*Math.PI)*Math.asin(h/r);return r*Math.pow(2,-10*e)*Math.sin(2*(e*l-f)*Math.PI/q)+h+p},easeInOutElastic:function(f,e,p,h,l){f=1.70158;var q=0,r=h;if(0==e)return p;if(2==(e/=l/2))return p+h;q||(q=0.3*l*1.5);r<Math.abs(h)?(r=h,f=q/4):f=q/(2*Math.PI)*Math.asin(h/r);return 1>e?-0.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*l-f)*Math.PI/q)+p:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*l-f)*Math.PI/q)*0.5+h+p},easeInBack:function(f,
e,p,h,l,q){void 0==q&&(q=1.70158);return h*(e/=l)*e*((q+1)*e-q)+p},easeOutBack:function(f,e,p,h,l,q){void 0==q&&(q=1.70158);return h*((e=e/l-1)*e*((q+1)*e+q)+1)+p},easeInOutBack:function(f,e,p,h,l,q){void 0==q&&(q=1.70158);return 1>(e/=l/2)?h/2*e*e*(((q*=1.525)+1)*e-q)+p:h/2*((e-=2)*e*(((q*=1.525)+1)*e+q)+2)+p},easeInBounce:function(f,e,p,h,l){return h-r.easing.easeOutBounce(f,l-e,0,h,l)+p},easeOutBounce:function(f,e,p,h,l){return(e/=l)<1/2.75?7.5625*h*e*e+p:e<2/2.75?h*(7.5625*(e-=1.5/2.75)*e+0.75)+
p:e<2.5/2.75?h*(7.5625*(e-=2.25/2.75)*e+0.9375)+p:h*(7.5625*(e-=2.625/2.75)*e+0.984375)+p},easeInOutBounce:function(f,e,p,h,l){return e<l/2?0.5*r.easing.easeInBounce(f,2*e,0,h,l)+p:0.5*r.easing.easeOutBounce(f,2*e-l,0,h,l)+0.5*h+p}})})(window.AdobeEdge);
(function(f){function r(a,b){return b?b+"_"+a:a+"_"+k++}function u(a){a.length&&(a=a[0]);return a?a.edgeSymbol:null}function e(a,b){a.length&&(a=a[0]);a&&(a.edgeSymbol=b)}function p(a){var b,c,d,k=a.length;if(n.isArray(a))for(b=[],d=0;d<k;d++)c=a[d],b[d]=null!=c&&"object"===typeof c?p(c):c;else for(d in b={},a)a.hasOwnProperty(d)&&"prototype"!==d&&(c=a[d],b[d]=null!=c&&"object"===typeof c?p(c):c);return b}function h(a){a=a.data[a.name];return a.timeline?a.timeline.data:null}function l(a){a=a.data[a.name];
return a.timeline?a.timeline.duration:0}function q(a,b,c){function d(a,b){for(k=0;k<a.length;k+=1){if(a[k].id===b)return a[k];if(a[k].children)return d(a[k].children,b)}return null}b=b.replace(/[\{\}\$]/g,"");a=a.data[a.name];var k;if(a=a.content?a.content.dom:null)if(b=d(a,b))if(a=f.props[c])return a.prep(null,b,c,a.i,a.j);return null}function x(a,b,c,d,k){return["generated","location",d,k,"linear",a,[[b.x,b.y,0,0],[c.x,c.y,0,0]]]}function s(b,c){var d,k;c&&(b.tlCached=void 0);var n=h(b);if(!n)return null;
n.duration=l(b);n.dirty&&b.tlCached&&(d=b.tlCached.currentPosition,k=b.tlCached.notifier.obs,b.tlCached=void 0);if(!b.tlCached){var e,v=b.data[b.name].timeline,s,p={},r={},u,w,F=n.duration,I;e=b.data[b.name];var N;s=n.length;for(w=n.length-1;0<=w;w--)"injected"===n[w][0]&&n.splice(w,1);s=n.length;"number"!==typeof e.timeline.duration&&(e.timeline.duration=0);for(N=0;N<s;N++)(w=n[N])&&a(w)&&(u=w[5],p[u]||(p[u]=[]),p[u].push(w),u=u+":"+("motion"===w[1]?"location":w[1]),r[u]||(r[u]=[]),r[u].push(w)),
w&&a(w)&&(I=w[3]||0,F=Math.max(F,w[2]+I));p=Math.max(e.timeline.duration,F);w=function(a,b){return a[2]-b[2]};for(u in r)r.hasOwnProperty(u)&&r[u].sort(w);for(u in r)r.hasOwnProperty(u)&&(w=r[u][0],0<w[2]&&(e=q(b,w[5],w[1]),null==e&&(e=w[6]),"location"===w[1]?(w=r[u][0],s={x:w[6][0][0],y:w[6][0][1]},e=x(w[5],s,s,0,Math.max(0,w[2]-1)),e[0]="injected",n.push(e)):void 0!==e&&(w=f.cloneJSONObject(r[u][0]),w[6]=w[7]=e,w[3]=w[2],w[2]=0,w[0]="injected",w[8]&&""!=w[8].valueTemplate&&"string"==typeof e&&(w[8].valueTemplate=
""),n.push(w))),s=r[u].length-1,0<=s&&(w=r[u][s],e=w[2]+w[3],e<F&&("location"===w[1]?(s=w[6].length-1,s={x:w[6][s][0],y:w[6][s][1]},e=x(w[5],s,s,e,p-e),e[0]="injected"):(e=f.cloneJSONObject(r[u][s]),e[6]=w[7],e[2]=p,e[3]=0,e[0]="injected",e[8]=e[8]||{},e[8].reverseOnly=!0),n.push(e))));F<p&&(w=["injected","-an_resting",F,p-F,"linear","${stage}","0","100"],n.push(w));b.tlCached=t.createTL(n,b,{loop:v.loop});n.dirty&&(b.tlCached.currentPosition=d,b.tlCached.notifier.obs=k||b.tlCached.notifier.obs);
b.tlCached.sort()}}function b(a,b){if("string"===typeof b){var c=a.data?a.data[a.name]:0;return(c=c?c.timeline:0)&&c.labels?c.labels[b]:0}return b}function d(a){var b=a,c;"string"===typeof a&&-1!==a.search(/\$\{/)&&(b=a.search(/\$\{/),c=a.search(/\}/),b=a.slice(b+2,c),"string"===typeof b&&(b=f.trimString(b),b=b.replace(/["']/g,"")));return b}function c(a,b){for(var c=a,k;b&&"string"===typeof c&&-1!==c.search(/\$\{/);)k=d(c),c=void 0===b[k]?void 0:c.replace(/\$\{[^\}]*\}/,b[k]);return c}var n=window.jQuery?
window.jQuery:f.$,v=f.Symbol,t=f.Timeline,a=t.isTween,k=0;v._makeUniqueID=r;f.symbol=v;v.get=v.getSymbol=u;v.setSymbol=e;f.addObserver({newComp:function(a,b){b.comp.addObserver({newSymbol:function(a,b){b.symbol.addObserver({newEle:function(a,b){var c=n(b.ele),g=b.defn,d=a.composition;g.userClass&&c.addClass(g.userClass);f.$.data(c[0],"defn",g);g.symbolName&&(g=new v(d.sym,g.symbolName,d,a),g.init(c[0]),a.ci=a.ci||[],a.ci.push(g),g.prnt=a)}})}})}});f.cloneJSONObject=p;v.bldTL=s;v.p2n=b;f.trimString=
function(a){return a.replace(/^\s+|\s+$/g,"")};v.parseVariableName=d;v.substituteVariables=c;n.extend(v.prototype,{init:function(a,b){var c=this.data[this.name],d=n(a),k=d[0].id,t;this.gpuAccelerate=c.gpuAccelerate;"undefined"===typeof this.gpuAccelerate&&(this.gpuAccelerate=!0);this.gpuAccelerate=this.gpuAccelerate&&f.supported.cssTransform3d;this.variables=this.variables||{};this._variables=this._variables||{};a=a||n("."+b)[0];this.autoPlay=c.timeline?c.timeline.autoPlay:!1;e(a,this);if(this.ele=
a)k&&""!==k||(k=r("stage"),d[0].id=k),t="#"+k,this._variables[k]=this._variables.stage=t,this._variables.symbolStage=t,this._variables.symbolSelector=t,d.css("position","absolute"),d.css("z-index","0");if(c){f.renderDOM(this.composition,this,c.content.dom,c.content.style,a,b);var c=c.content.style,h,v;for(h in c)if("${symbolSelector}"!=h&&c.hasOwnProperty(h)&&(d=h,k=/^\$\{/,k.test(d)?(d=d.replace(k,""),d=d.replace(/\}/,""),d=this.find$(d)):d=f.$(d),d))for(v in f._.p)f._.p.hasOwnProperty(v)&&f._.p[v].render(d,
c[h],this.composition)}h={Symbol:this,element:this.ele,performDefaultAction:!0};n.extend(h,void 0);this.notifyObservers("creationComplete",h)},lookupSelector:function(a){if("string"===typeof a)try{return c("${"+a+"}",this._variables)}catch(b){}},getSymbolTypeName:function(){return this.name},getComposition:function(){return this.composition},find$:function(a){a=a.split(" ");var b=this._variables[a[0]];if(2>a.length||!b)return b?f.$(b):null;b=f.$(b);if(!b||!b.length)return null;a.splice(0,1);a=a.join(" ");
return(b=u(b))?b.find$(a):void 0},$:function(a){var b=a;if("string"===typeof a)try{-1===a.search(/\$\{/)?(b=this.lookupSelector(a),"undefined"===typeof b&&(b=a)):b=c(a,this._variables)}catch(k){}void 0===b&&(b=d(a));return f.$(b)},register:function(a,b,c){var d=b.id;c=r(d,c);this._variables[d]="#"+c;b.oldId=b.id;a.id=c},seek:function(a,b){s(this);this.tlCached.seek(a,b)},play:function(a,c,d){s(this);this.tlCached&&(a=b(this,a),this.tlCached.play({pos:a,variables:this._variables,executeTriggers:c,
playDirection:d}))},stop:function(a,c){s(this);this.tlCached&&(a=b(this,a),this.tlCached.stop({pos:a,variables:this._variables,executeTriggers:c,bSeek:void 0!=a}))},playReverse:function(a,b){this.play(a,b,"reverse")},isPlaying:function(){var a=this._getTimeline();return a&&!!a.playing},isPlayDirectionReverse:function(){var a=this._getTimeline();return a&&"reverse"===a.currentDirection?!0:!1},getTimelinePosition:function(){return this.getPosition()},getPosition:function(){s(this);return this.tlCached?
this.tlCached.getCurrentPosition():0},getDuration:function(){s(this);if(this.tlCached)return this.tlCached.getDuration()},getLabelPosition:function(a){return b(this,a)},_getTimeline:function(){s(this);return this.tlCached},_rebuild:function(){s(this,!0)},getTimelineData:function(){return h(this)},getTLD:function(){return this.getTimelineData()},_applyBaseStyles:function(a,b){var c=this.data[b];if(c.content&&c.content.style&&c.content.style["${symbolSelector}"]){var c=c.content.style["${symbolSelector}"],
d;if(a&&a[0])for(d in f._.p)if(f._.p.hasOwnProperty(d)){if("width"==d||"height"==d){var k=a[0].style[d];if(null!=k&&""!=k&&"auto"!=k)continue}f._.p[d].render(a,c,this.composition)}}},getAutoPlay:function(){return this.autoPlay},setAutoPlay:function(a){this.autoPlay=a}})})(window.AdobeEdge);
(function(f){function r(h,l,q,p,s,b){f.Animation.call(this);this.name="prop tween";this.sourceElements=this.elements=q;this.deferElementResolution=!0;this.tweenType=e[h];this.updateTriggered=!1;this.property=l;this.fromValue=p;this.toValue=s;this.duration=1E3;this.fromValues=this.tokens=this.valueTemplate=null;b&&u.extend(this,b);this.deferElementResolution=this.deferElementResolution||"string"===typeof q&&-1!==q.search(/\$\{[^\{\}]+\}/);this.deferElementResolution||(this.elements=this.resolveElementSelector(q));
q=this.toValues=[];p=this.parseValue(s);var d;u.isArray(s)||(s=[s]);p&&0!==p.length||(p=s);h=p.length;for(s=0;s<h;s+=1)b=p[s],f.props[l]&&(b=f.props[l].units(b)),d={},"string"===typeof b?(d.value=parseFloat(b.replace(/[a-zA-Z%]+$/,"")),d.unit=b.replace(/^-?[0-9]*(\.[0-9]+)?/,""),isNaN(d.value)&&(d.value=b,d.unit="")):("number"===typeof b&&(b=parseFloat(b)),d.value=b,d.unit=""),q.push(d);if(null!=this.fromValue)for(l=this.fromValues=[],(s=this.parseValue(this.fromValue))&&0<s.length?this.fromValue=
s:u.isArray(this.fromValue)||(this.fromValue=[this.fromValue]),h=this.fromValue.length,s=0;s<h;s+=1)b=this.fromValue[s],"string"===typeof b?(l[s]=parseFloat(b.replace(/[a-zA-Z%]+$/,"")),isNaN(l[s])&&(l[s]=b)):("number"===typeof b&&(b=parseFloat(b)),l[s]=b);if(this.filter)for(u.isArray(this.filter)||(this.filter=[this.filter]),l=this.filter,h=l.length,s=0;s<h;s+=1)"string"===typeof l[s]&&(l[s]=Math[l[s]]),"function"!==typeof l[s]&&(l[s]=null);this.valueTemplate&&(this.tokens=this.parseTemplate(this.valueTemplate))}
var u=f.$,e={style:0,attribute:1,property:2},p="webkitAppearance"in document.documentElement.style;f.trimString=function(e){return e.replace(/^\s+|\s+$/g,"")};r.Token=function(e,f){this.value=e;this.isPlaceholder=f};r.parseVariableName=function(e){var l=e,q;"string"===typeof e&&-1!==e.search(/\$\{/)&&(l=e.search(/\$\{/),q=e.search(/\}/),l=e.slice(l+2,q),"string"===typeof l&&(l=f.trimString(l),l=l.replace(/["']/g,"")));return l};r.substituteVariables=function(e,f){for(var q=e,p;f&&"string"===typeof q&&
-1!==q.search(/\$\{/);)p=r.parseVariableName(q),q=void 0===f[p]?void 0:q.replace(/\$\{[^\}]*\}/,f[p]);return q};u.extend(r.prototype,f.Animation.prototype);u.extend(r.prototype,{constructor:r,setup:function(e){this.updateTriggered=!1;this.timeline=e;this.animData=void 0},update:function(e,f){var q=this.getElementSet(),p=this,s=this.tweenType,b=this.property,d;this.updateTriggered||(this.updateTriggered=!0,this.setupForAnimation());q.each(function(c,n){var v=p.getPropertyTweenData(n,s,b),t,a,k,g,m,
q,r;if(v.animationID===p.animationID){t=v.fromValues;a=v.toValues;v=v.tokens;k=p.filter;g=t.length;m=[];for(d=0;d<g;d+=1)q=t[d],r=a[d],q="string"===typeof q?0===f&&0<p.duration?q:r.value:q+(r.value-q)*f,k&&k[d]&&(q=k[d](q,p,this,b,r.unit,e)),"number"===typeof q&&1>q&&(q=q.toFixed(6)),m.push(q+r.unit);t=p.formatValue(m);if(0<t.length)v=t;else if(v){t=v.length;a=[];for(d=0;d<t;d+=1)k=v[d],k.isPlaceholder?a.push(m[k.value]):a.push(k.value);v=a.join("")}else v=m.join("");p.setValue.call(this,s,b,v);p.notifyObservers("onUpdate",
{elapsed:e,easingConst:f,property:b,value:v,element:this})}})},setValue:function(e,f,q){switch(e){case 0:e=u(this);e.css(f,q);p&&"background-size"===f?e.css("-webkit-background-size",q):"display"===f&&"AUDIO"==this.nodeName&&e.attr("controls","none"===q?null:"controls");break;case 1:this.setAttribute(f,q);break;case 2:this[f]=q}},getDuration:function(){return this.duration},resolveElementSelector:function(){var e=r.substituteVariables(this.elements,this.timeline.variables);e||(e=this.elements);/^\$\{/.test(e)&&
(e="bad_selector");return u(e)},getElementSet:function(){var e=this.animationID,f;this.timeline.animData=this.timeline.animData||{};(f=this.timeline.animData[e])||(f=this.timeline.animData[e]=this.deferElementResolution?this.resolveElementSelector():this.elements);return f},getValue:function(e,f){var q;switch(f){case 0:q=u(this).css(e);break;case 1:q=this.getAttribute(e);break;case 2:q=String(this[e])}return q},setupForAnimation:function(){var e=this,f=this.tweenType,q=this.property;this.getElementSet().each(function(p,
s){var b=e.getPropertyTweenData(s,f,q),d,c,n,v;b.animationID=e.animationID;b.toValues=e.toValues;b.tokens=e.tokens;if(e.fromValues)b.fromValues=e.fromValues;else if(d=e.getValue.call(this,q,f),void 0===d&&(d="0"),(c=e.parseValue(d))&&0<c.length)for(b=b.fromValues=[],d=c.length,n=0;n<d;n+=1)v=c[n],b[n]="string"===typeof v?parseFloat(v.replace(/[a-zA-Z%]+$/,"")):v,isNaN(b[n])&&(b[n]=v);else b.fromValues=[parseFloat(d.replace(/[a-zA-Z%]+$/,""))]})},parseTemplate:function(e){var f=e.length,q=[],p=0,s=
/@@[0-9]+@@/g,b=null;for(p<f&&(b=s.exec(e));b;)b.index!==p&&q.push(new r.Token(e.substring(p,b.index),!1)),q.push(new r.Token(parseInt(b[0].replace(/@@/g,""),10),!0)),p=s.lastIndex,b=null,p<f&&(b=s.exec(e));p<f&&q.push(new r.Token(e.substring(p,f),!1));return q},parseValue:function(e){return[]},formatValue:function(e){return""},getPropertyTweenData:function(e,l,q){var p=f.$.data(e,"tweenData");p||(p={},f.$.data(e,"tweenData",p));(e=p[l])||(e=p[l]={});(l=e[q])||(l=e[q]={animationID:-1});return l}});
f.PropertyTween=r;f.Timeline.addTweenType("style",function(e,f,p,u,s){return new r("style",e,f,p,u,s)});AdobeEdge.Timeline.addTweenType("attribute",function(e,f,p,u,s){return new r("attribute",e,f,p,u,s)});AdobeEdge.Timeline.addTweenType("property",function(e,f,p,u,s){return new r("property",e,f,p,u,s)});f.Timeline.addTweenProperty("volume","property")})(window.AdobeEdge);
(function(f){var r=f.$,u=function(e){this.handlers={};this.timeline=e};u.Register=function(e,f,h){var l=e.updateFinalizer;"undefined"===typeof l&&(l=new u(e),e.updateFinalizer=l,e.addObserver(l));l.handlers[f]=h};u.unRegister=function(e,f){var h=e.updateFinalizer;"undefined"!==typeof h&&delete h.handlers[f]};r.extend(u.prototype,{_finalizeUpdate:function(e,f){var h={elapsed:e,context:f},l;for(l in this.handlers)if(this.handlers.hasOwnProperty(l)){var q=this.handlers[l];if(q.onFinalUpdate)q.onFinalUpdate(h)}this.handlers=
{}},postUpdate:function(e,f){this._finalizeUpdate(f.elapsed,f.context)},complete:function(e){this.timeline&&this.timeline.removeObserver(this);this.timeline.updateFinalizer=void 0}});f.UpdateFinalizer=u})(window.AdobeEdge);
(function(f){function r(b,d,e){var f=l.event.special[d];f&&f.teardown&&f.teardown.call(b,d,e);var f=b.AnListeners=b.AnListeners||{},a,k;a=f[d]=f[d]||[];if(null!=e)for(b.removeEventListener?b.removeEventListener(d,e):b.detachEvent&&b.detachEvent(d,e),k=f.length-1;0<=k;k--)a[k]===e&&f.splice(k,1);else d&&(f[d].forEach(function(a){b.removeEventListener?b.removeEventListener(d,a):b.detachEvent&&b.detachEvent(d,a)}),f[d]=[])}function u(b,d,e,f){function a(a){if(2<=a.length&&"object"===typeof a[0]&&"object"===
typeof a[1]&&"onError"!==a[1].type){var g;g=l.Event("onError");b&&(g.compId=b.getComposition().compId);g.originalEvent=a[1];document.dispatchEvent(g)}window.console.log("Javascript error in event handler! Event Type = "+d)}var k=b[f[0]],g;return"function"===typeof k?("element"===d?g=function(){var d;d=Array.prototype.slice.call(arguments);d.unshift(b);if(2<=d.length&&"object"===typeof d[0]&&"object"===typeof d[1]&&"compositionReady"===d[1].type&&"string"===typeof d[1].compId&&"object"===typeof d[0].composition&&
d[1].compId!==d[0].composition.id)return null;try{return k.apply(b,d)}catch(g){a(d)}}:"timeline"===d?g=function(g,e){var f,t;t=e&&e.methodName&&/^trig_/.test(e.methodName)?l.Event("trigger"):l.Event(d);e&&l.extend(t,e);t.timeline=g;f=Array.prototype.slice.call(arguments);f.splice(0,0,t);f.unshift(b);try{return k.apply(b,f)}catch(v){a(f)}}:"symbol"===d&&(g=function(b,c){var g,e,f;e=c&&c.methodName?l.Event(c.methodName):l.Event(d);c&&(l.extend(e,c),c.variableValue&&(f=c.variableValue));g=Array.prototype.slice.call(arguments);
g.splice(0,0,e,f);g.unshift(b);try{return k.apply(b,g)}catch(t){a(g)}}),g):null}function e(b,d){var e=d[0],f=s[e[0]],a;f&&(a=u(b,e[0],e[1],d.slice(1)))&&f.apply(b,[a].concat(e.slice(1)))}function p(b,d){d=d||b.data[b.name].actions||{};l.extend(b,d)}function h(b,n,v,t,a,k){var g=f.getComposition(b).sym[n],m=x("binding");v=[[k,v,t],m];var h;if(g&&(g.actions=g.actions||{},g.actions[m]=a,g.bindings=g.bindings||[],g.bindings.push(v),b=f.getComposition(b))&&(b.addObserver(d),b=b.getSymbols()))for(g=b.length,
k=0;k<g;k++)t=b[k],h=t.name,n===h&&(h={},h[m]=a,p(t,h),e(t,v))}var l=f.$,q=f.Symbol,x=f.Symbol._makeUniqueID,s=f.triggerDict={timeline:function(b,d,e){if(b){d={};var f=this._getTimeline();d[e]=b;f.addObserver(d)}},element:function(b,d,e){if(b)if("document"===d)l(document).bind(e,b);else if("window"===d)l(window).bind(e,b);else{var f=/^\$\{/;f.test(d)&&(d=d.replace(f,""),d=d.replace(/\}/,""));(d=this.find$(d))&&d.bind(e,b)}},symbol:function(b,d,e){b&&(d={},d[e]=b,this.addObserver(d))}},b,d;l.Event=
function(b){if(f.supported.customEvent)return new CustomEvent(b,{bubbles:!0,cancelable:!0});var d=document.createEvent("Event");d.initEvent(b,!0,!0);return d};l.event={};l.event.special={};l.extend(f.An$.prototype,{bind:function(b,d){this.each(function(e,f){var a=l.event.special[b];a&&a.setup&&a.setup.call(f,b,d);f.addEventListener?f.addEventListener(b,d):f.attachEvent&&f.attachEvent(b,d);a=f.AnListeners=f.AnListeners||{};a[b]=a[b]||[];a[b].push(d)});return this},unbind:function(b,d){this.each(function(e,
f){r(f,b,d)});return this},trigger:function(b){var d=document;this[0]&&(d=this[0]);d.dispatchEvent(b);return this}});b={creationComplete:function(b,d){p(b);var f;f=b.data[b.name].bindings||[];var t=f.length,a,k;for(a=0;a<t;a++)k=f[a],e(b,k)}};d={newSymbol:function(c,d){d.symbol.addObserver(b)}};q.bindElementAction=function(b,d,e,f,a){h(b,d,e,f,a,"element")};q.bindTimelineAction=function(b,d,e,f,a){h(b,d,e,f,a,"timeline")};q.bindTriggerAction=function(b,d,e,t,a){var k=f.getComposition(b).sym[d],g;
k&&(k=k.timeline?k.timeline.data:null)&&(g=x("trig"),t=[g,"trigger",t,g],k.push(t),k.dirty=!0,h(b,d,e,g,a,"timeline"),k.dirty=!1)};q.bindSymbolAction=function(b,d,e,f){h(b,d,"",e,f,"symbol")};q.bindVariableAction=function(b,d,e,f){h(b,d,"","variableChanged:"+e,f,"symbol")};l.extend(q.prototype,{executeSymbolAction:function(b,d){if(!("object"!==typeof d||3>d.length)){var e=d[0],f=this.$(d[1]),a=d[2];!f||1>f.length||(f=q.getSymbol(f[0]))&&e&&(a&&"object"===typeof a||(a=null),f[e].apply(f,a))}},eSA:function(b,
d){this.executeSymbolAction(b,d)}})})(window.AdobeEdge);
(function(f,r,u){document.createEvent&&(f.addTouchSupport=function(){var e=f.$,p=f.An$;e.fn=e.fn||{};e.each("touchstart touchmove touchend swipe swipeleft swiperight ".split(" "),function(b,d){p.prototype[d]=e.fn[d]=function(b){return b?this.bind(d,b):this.trigger(d)};e.attrFn&&(e.attrFn[d]=!0)});var h="ontouchend"in document,l=!h&&r.navigator.msPointerEnabled,q=h?"touchstart":"mousedown",x=h?"touchend":"mouseup",s=h?"touchmove":"mousemove";e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1E3,
horizontalDistanceThreshold:30,verticalDistanceThreshold:75,swipeEvent:e.Event("swipe"),swipeLeftEvent:e.Event("swipeleft"),swipeRightEvent:e.Event("swiperight"),setup:function(){if(!this.setupDone){var b=e(this);l&&b.css("-ms-touch-action","pan-y pinch-zoom double-tap-zoom");b.bind(q,function(d){function c(d){b.unbind(x,c);b.unbind(s,f);t&&a&&a.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-a.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-
a.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&b.trigger(e.event.special.swipe.swipeEvent).trigger(t.coords[0]>a.coords[0]?e.event.special.swipe.swipeLeftEvent:e.event.special.swipe.swipeRightEvent);t=a=u}function f(b){if(t){var c=b.touches?b.touches[0]:b.originalEvent.touches?b.originalEvent.touches[0]:b;a={time:(new Date).getTime(),coords:[c.pageX,c.pageY]};Math.abs(t.coords[0]-a.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&b.preventDefault()}}var h=d.touches?d.touches[0]:
d.originalEvent.touches?d.originalEvent.touches[0]:d,t={time:(new Date).getTime(),coords:[h.pageX,h.pageY],origin:e(d.target)},a;b.bind(s,f).bind(x,c)});this.setupDone=!0}}};e.each({swipeleft:"swipe",swiperight:"swipe"},function(b,d){e.event.special[b]={setup:function(){e(this).bind(d,e.noop)},teardown:function(b,f,h){e(b).unbind(d)}}})})})(AdobeEdge,window);
(function(f){function r(b,c,a,k,g,e){null!==s[c]&&(this.superProperty=s[c].cssProp,b=s[c].type,"color"===b?f.ColorTween&&(p.extend(this,f.ColorTween.prototype),p.extend(this,d),f.ColorTween.call(this,b,c,a,k,g,e)):(p.extend(this,h.prototype),p.extend(this,d),f.PropertyTween.call(this,b,c,a,k,g,e)));this.name="subpropertyTween"}function u(){var b=f.$.data(this.element,this.prop);b&&r.applySubproperty(this.element,b,b.tween)}function e(b,c){var a=b[0],k=this.name,g=f.$.data(a,s[k].cssProp);g||(g=d.buildProp.call({superProperty:s[k].cssProp},
a),f.$.data(a,s[k].cssProp,g));g[k]=c;g.onFinalUpdate.call({element:a,prop:s[k].cssProp})}var p=f.$,h=f.PropertyTween,l=f.UpdateFinalizer,q,x={"box-shadow":{def:"box-shadow","-webkit-box-shadow":"boxShadow.color boxShadow.offsetH boxShadow.offsetV boxShadow.blur boxShadow.spread boxShadow.inset".split(" "),"-moz-box-shadow":"boxShadow.color boxShadow.offsetH boxShadow.offsetV boxShadow.blur boxShadow.spread boxShadow.inset".split(" "),"box-shadow":"boxShadow.color boxShadow.offsetH boxShadow.offsetV boxShadow.blur boxShadow.spread boxShadow.inset".split(" ")},
"text-shadow":{def:"text-shadow","text-shadow":["textShadow.color","textShadow.offsetH","textShadow.offsetV","textShadow.blur"]},filter:{def:"-webkit-filter","-webkit-filter":"filter.invert filter.hue-rotate filter.contrast filter.saturate filter.brightness filter.sepia filter.grayscale filter.blur filter.drop-shadow.color filter.drop-shadow.offsetH filter.drop-shadow.offsetV filter.drop-shadow.blur".split(" "),"-moz-filter":"filter.invert filter.hue-rotate filter.contrast filter.saturate filter.brightness filter.sepia filter.grayscale filter.blur filter.drop-shadow.color filter.drop-shadow.offsetH filter.drop-shadow.offsetV filter.drop-shadow.blur".split(" "),
filter:"filter.invert filter.hue-rotate filter.contrast filter.saturate filter.brightness filter.sepia filter.grayscale filter.blur filter.drop-shadow.color filter.drop-shadow.offsetH filter.drop-shadow.offsetV filter.drop-shadow.blur".split(" ")},"background-size":{def:"background-size","background-size":["background-size.x","background-size.y"]},"background-position":{def:"background-position","background-position":["background-position.x","background-position.y"]}},s={"boxShadow.offsetH":{cssProp:"box-shadow",
type:"style",def:"0px",u:"px",i:1},"boxShadow.offsetV":{cssProp:"box-shadow",type:"style",def:"0px",u:"px",i:2},"boxShadow.blur":{cssProp:"box-shadow",type:"style",def:"0px",u:"px",i:3},"boxShadow.spread":{cssProp:"box-shadow",type:"style",def:"0px",u:"px",i:4},"boxShadow.color":{cssProp:"box-shadow",type:"color",def:"rgba(0,0,0,0)",i:5},"boxShadow.inset":{cssProp:"box-shadow",def:"",i:0},"textShadow.offsetH":{cssProp:"text-shadow",type:"style",def:"0px",u:"px",i:1},"textShadow.offsetV":{cssProp:"text-shadow",
type:"style",def:"0px",u:"px",i:2},"textShadow.blur":{cssProp:"text-shadow",type:"style",def:"0px",u:"px",i:3},"textShadow.color":{cssProp:"text-shadow",type:"color",def:"rgba(0,0,0,0)",i:0},"filter.drop-shadow.color":{cssProp:"filter",type:"color",def:"rgba(0,0,0,0)",strReplace:"drop-shadow(%1",combinedNum:4,i:8},"filter.drop-shadow.offsetH":{cssProp:"filter",type:"style",def:"0px",u:"px",i:9},"filter.drop-shadow.offsetV":{cssProp:"filter",type:"style",def:"0px",u:"px",i:10},"filter.drop-shadow.blur":{cssProp:"filter",
type:"style",def:"0px",strReplace:"%1)",u:"px",i:11},"filter.grayscale":{cssProp:"filter",type:"style",def:"0",strReplace:"grayscale(%1)",i:6},"filter.sepia":{cssProp:"filter",type:"style",def:"0",strReplace:"sepia(%1)",i:5},"filter.saturate":{cssProp:"filter",type:"style",def:"1",strReplace:"saturate(%1)",i:3},"filter.hue-rotate":{cssProp:"filter",type:"style",def:"0deg",strReplace:"hue-rotate(%1)",u:"deg",i:1},"filter.invert":{cssProp:"filter",type:"style",def:"0",strReplace:"invert(%1)",i:0},"filter.brightness":{cssProp:"filter",
type:"style",def:"0",strReplace:"brightness(%1)",i:4},"filter.contrast":{cssProp:"filter",type:"style",def:"1",strReplace:"contrast(%1)",i:2},"filter.blur":{cssProp:"filter",type:"style",def:"0px",strReplace:"blur(%1)",u:"px",i:7},"background-position.x":{cssProp:"background-position",type:"style",def:"0px",u:"px",i:2,domProp:"fill"},"background-position.y":{cssProp:"background-position",type:"style",def:"0px",u:"px",i:3,domProp:"fill"},"background-size.x":{cssProp:"background-size",type:"style",
def:"100%",u:"%",i:4,domProp:"fill"},"background-size.y":{cssProp:"background-size",type:"style",def:"100%",u:"%",i:5,domProp:"fill"}},b=1,d={setValue:function(b,c,a){f.$.data(this,s[c].cssProp)[c]=a},getValue:function(b,c){f.$.data(this,s[b].cssProp)},setupForAnimation:function(){var b=this;this.getElementSet().each(function(){var c=f.$.data(this,b.superProperty);c||(c=b.buildProp(this),f.$.data(this,b.superProperty,c))});h.prototype.setupForAnimation.call(this)},buildProp:function(c){var d,a={},
k=this.superProperty,g=f.getSubProps(c,k);for(d in g)g.hasOwnProperty(d)&&(a[d]=g[d]);a.id=this.superProperty+b;b+=1;a.element=c;a.prop=k;a.onFinalUpdate=u;return a},update:function(b,c){h.prototype.update.call(this,b,c);var a=this.getElementSet(),d=this,g=this.property,e=this.tweenType;a.each(function(){if(d.getPropertyTweenData(this,e,g).animationID===d.animationID){var a=f.$.data(this,d.superProperty);a.timeline=d.timeline;a.tween=d;l.Register(d.timeline,a.id,a)}})}};r.prototype.constructor=r;
f.getSubProps=function(b,c){var a=p(b),d,g;for(g in x[c])if(x[c].hasOwnProperty(g)&&(d=a.css(g))&&""!==d&&"none"!==d){if("filter"==c){g=x[c][g];d=d.replace(/,\s*/g,",");var a=[],e=void 0;a["filter.invert"]=(e=d.match(/invert\((.*?)\)/))?e[1]:null;a["filter.hue-rotate"]=(e=d.match(/hue-rotate\((.*?)\)/))?e[1]:null;a["filter.contrast"]=(e=d.match(/contrast\((.*?)\)/))?e[1]:null;a["filter.saturate"]=(e=d.match(/saturate\((.*?)\)/))?e[1]:null;a["filter.brightness"]=(e=d.match(/brightness\((.*?)\)/))?
e[1]:null;a["filter.sepia"]=(e=d.match(/sepia\((.*?)\)/))?e[1]:null;a["filter.grayscale"]=(e=d.match(/grayscale\((.*?)\)/))?e[1]:null;a["filter.blur"]=(e=d.match(/blur\((.*?)\)/))?e[1]:null;d=(e=d.match(/drop-shadow\((.*?\)\s*.*?)\)/))?e[1].split(" "):[null,null,null,null];a["filter.drop-shadow.color"]=d[0];a["filter.drop-shadow.offsetH"]=d[1];a["filter.drop-shadow.offsetV"]=d[2];a["filter.drop-shadow.blur"]=d[3];d=[];e=void 0;for(e=0;e<g.length;e+=1)d[g[e]]=a[g[e]]||s[g[e]].def;return d}a=d;g=x[c][g];
a=a.replace(/,\s*/g,",");a=a.split(" ");d=[];e=void 0;for(e=0;e<g.length;e+=1)d[g[e]]=a[e]||s[g[e]].def;return d}return[]};r.getSubType=function(b){return s[b]?s[b].type:void 0};r.getStyle=function(b){return s[b]?s[b].cssProp:void 0};r.applySubproperty=function(b,c,a){var d,g,e,f=p(b);for(g in x[c.prop])if("def"!==g&&x[c.prop].hasOwnProperty(g)){d="";var n=!0;for(b=0;b<x[c.prop][g].length;b+=1){e=c[x[c.prop][g][b]];void 0===e&&(e=s[x[c.prop][g][b]].def);if("combinedNum"in s[x[c.prop][g][b]])for(var n=
!0,h=b;h<b+s[x[c.prop][g][b]].combinedNum;h++)void 0!==c[x[c.prop][g][h]]&&c[x[c.prop][g][h]]!=s[x[c.prop][g][h]].def&&(n=!1);x[c.prop][g][b].match(/^filter./)&&e==s[x[c.prop][g][b]].def&&n||("strReplace"in s[x[c.prop][g][b]]&&(e=s[x[c.prop][g][b]].strReplace.replace("%1",e)),d+=e,b!==x[c.prop][g].length-1&&(d+=" "))}(window.edge_authoring_mode&&g===x[c.prop].def||!window.edge_authoring_mode)&&f.css(g,d)}a&&a.notifier.obs.length&&a.notifyObservers("onUpdate",{elapsed:0,easingConst:0,property:g,value:d,
element:f[0]})};f.SubpropertyTween=r;f.Timeline.addTweenType("subproperty",function(b,c,a,d,g){return new r("subproperty",b,c,a,d,g)});var c,n;for(q in s)c={},s.hasOwnProperty(q)&&(f.Timeline.addTweenProperty(q,"subproperty"),n=s[q],c[q]={f:n.domProp||f.camelize(n.cssProp),i:n.i,j:n.j,def:n.def},s[q].u&&(c[q].u=s[q].u),f.defineProps(c),f._.p[q].apply=e)})(window.AdobeEdge);
(function(f){function r(b,a,c,d,e,n){f.PropertyTween.call(this,b,a,c,d,e,n);this.name="transformTween"}function u(b){var a=0;"string"===typeof b?a=parseFloat(b.replace(/[a-zA-Z%]+$/,"")):"number"===typeof b&&(a=b);return a}function e(b,a,c){if(void 0===a)return c;if(void 0===c)return a;var d=u(a),e=u(c),n;if(!d)return c;if(!e)return a;a=f.splitUnits(a).units;c=f.splitUnits(c).units;n=a;a!==c&&("%"===a&&(n=c,d=d/100*b),"%"===c&&(e=e/100*b));return d+e+n}function p(){}var h=f.$,l=f.PropertyTween,q=
f.UpdateFinalizer,x=Math.cos,s=Math.PI/180,b,d="translateX translateY translateZ scaleX scaleY rotateX rotateY rotateZ skewX skewY".split(" ");b=f.supported=f.supported||{};var c=1,n={translate3d:0,translate:0,translateX:0,translateY:0,translateZ:0,rotate:1,rotateZ:1,rotateX:1,rotateY:1,rotate3d:1,skew:2,skewX:2,skewY:2,scale3d:3,scale:3,scaleX:3,scaleY:3,scaleZ:3,perspective:4},v="webkitAppearance"in document.documentElement.style;b.cssTransform=f.isSupported(["transformProperty","WebkitTransform",
"MozTransform","OTransform","msTransform"]);b.cssTransform3d=f.isSupported(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);f.An$.prototype.hasClass=f.An$.prototype.hasClass||function(b){if(this[0]){var a=(this[0].className||"").split(/\s+/),c;for(c=0;c<a.length;c+=1)if(b===a[c])return!0}return!1};r.removeData=function(b){var a=f.$.data(b,r.dataName);a&&(a.timeline&&q.unRegister(a.timeline,a.id),f.$.data(b,r.dataName,void 0))};r.getNumber=u;r.splitUnits=
f.splitUnits;r.applyTransform=function(b,a,c,d){void 0!==f.applyCount&&(f.applyCount+=1);b=h(b);var m,n=!0,l,p;d&&(n=!d.dontForceZ);m=e(1,a.translateX,a.motionTranslateX);l=e(1,a.translateY,a.motionTranslateY);d=e(1,a.rotateZ,a.motionRotateZ);p=f.supported.cssTransform3d;v?(m="translate("+m+","+l+")",l=u(a.translateZ),(0!==l||n)&&p&&(m+=" translateZ("+a.translateZ+")"),m+=" rotate("+d+") ",p&&(l=u(a.rotateY),0!==l&&(m+=" rotateY("+a.rotateY+")"),l=u(a.rotateX),0!==l&&(m+=" rotateX("+a.rotateX+")")),
a.skewX&&"0deg"!==a.skewX&&(m+=" skewX("+a.skewX+") "),a.skewY&&"0deg"!==a.skewY&&(m+=" skewY("+a.skewY+") "),m+=" scale("+a.scaleX+","+a.scaleY+") ",l=u(a.scaleZ),1!==l&&p&&(m+=" scaleZ("+a.scaleZ+")"),!window.edge_authoring_mode&&p&&b.css("-webkit-transform-style","preserve-3d"),b.css("-webkit-transform",m)):(p=u(a.rotateX),n=u(a.rotateY),n=a.scaleX*x(s*n),p=a.scaleY*x(s*p),m="translate("+m+","+l+")"+(" rotate("+d+")"),a.skewX&&"0deg"!==a.skewX&&(m+=" skewX("+a.skewX+") "),a.skewY&&"0deg"!==a.skewY&&
(m+=" skewY("+a.skewY+") "),m+=" scale("+n+","+p+")",b.css("-moz-transform",m),b.css("-o-transform",m),b.css("-ms-transform",m),b.css("msTransform",m));c&&c.notifier.obs.length&&c.notifyObservers("onUpdate",{elapsed:0,easingConst:0,property:"transform",value:m,element:b[0]});b.css("transform",m)};r.dataName="EdgeTransformData";h.extend(r.prototype,l.prototype);h.extend(r.prototype,{constructor:r,setup:function(b){this.timeline=b;this.updateTriggered=!1},setValue:function(b,a,c){f.$.data(this,r.dataName)[a]=
c},getValue:function(b,a){f.$.data(this,r.dataName)},setupForAnimation:function(){var b=this,a;this.getElementSet().each(function(){a=f.$.data(this,r.dataName);a||(a=b.buildTransformData(this),f.$.data(this,r.dataName,a))});l.prototype.setupForAnimation.call(this)},update:function(b,a){l.prototype.update.call(this,b,a);var c=this.getElementSet(),d=this,e=this.property,n=this.tweenType;c.each(function(){var a;d.getPropertyTweenData(this,n,e).animationID===d.animationID&&(a=f.$.data(this,r.dataName),
a.timeline=d.timeline,a.tween=d,q.Register(d.timeline,a.id,a))})},buildTransformData:function(b){var a=f.parseCanonicalTransform(b);a||(a={translateX:"0px",translateY:"0px",translateZ:"0px",scaleX:1,scaleY:1,scaleZ:1,rotateX:"0deg",rotateY:"0deg",rotateZ:"0deg",skewXZ:0,skewXY:0,skewYZ:0,skewX:"0deg",skewY:"0deg"},a.matrix&&delete a.matrix);null===a&&(a={});a.id="transform_"+c;c+=1;a.element=b;a.onFinalUpdate=q.prototype.applyTransform;return a},buildDefaultTransformData:function(b){var a={translateX:"0px",
translateY:"0px",translateZ:"0px",scaleX:1,scaleY:1,scaleZ:1,rotateX:"0deg",rotateY:"0deg",rotateZ:"0deg",skewXZ:0,skewXY:0,skewYZ:0,skewX:"0deg",skewY:"0deg"};a.id="transform_"+c;c+=1;a.element=b;a.onFinalUpdate=q.prototype.applyTransform;return a}});f.getTransform=function(b){b=h(b);var a=b[0].style,c;v&&((c=b[0].style.webkitTransform)||(c=b.css("-webkit-transform")));if(c)return c;(c=b[0].style.msTransform)||(c=b.css("-ms-transform"));c||(c=b.css("msTransform"));c||(c=a.MozTransform);c||(c=a["-moz-transform"]);
c||(c=b.css("-moz-transform"));c||(c=a.oTransform);c||(c=b.css("-o-transform"));c||(c=a.transform);c||(c=b.css("transform"));return c||""};f.parseCanonicalTransform=function(b,a){var c=("string"===typeof a?a:f.getTransform(b)).match(/(\w+\s*\([^\)]*\))/g),d={},e={},h,s,l;if(!c)return null;e.translateX="0px";e.translateY="0px";e.translateZ="0px";e.scaleX=1;e.scaleY=1;e.scaleZ=1;e.rotateX="0deg";e.rotateY="0deg";e.rotateZ="0deg";e.skewXZ=0;e.skewXY=0;e.skewYZ=0;e.skewX="0deg";e.skewY="0deg";for(h=0;h<
c.length;h+=1){s=c[h].match(/\w+/);if(d[s[0]]||0>n[s[0]])return null;l=c[h].match(/\([^\)]*\)/);l=l[0].replace(/[\(\)]/g,"");l=l.split(",");switch(s[0]){case "matrix":return null;case "translate3d":e.translateX=l[0];e.translateY=1<l.length?l[1]:"0px";e.translateZ=2<l.length?l[2]:"0px";d.translate3d=d.translate=d.translateX=d.translateY=d.translateZ=!0;break;case "translate":e.translateX=l[0];e.translateY=1<l.length?l[1]:"0px";d.translate3d=d.translate=d.translateX=d.translateY=!0;break;case "translateX":e.translateX=
l[0];d.translate3d=d.translate=d.translateX=!0;break;case "translateY":e.translateY=l[0];d.translate3d=d.translate=d.translateY=!0;break;case "translateZ":e.translateZ=l[0];d.translate3d=d.translateZ=!0;break;case "rotate3d":return d.rotate3d=d.rotate=d.rotateX=d.rotateY=d.rotateZ=!0,null;case "rotateX":e.rotateX=l[0];d.rotate3d=d.rotateX=!0;break;case "rotateY":e.rotateY=l[0];d.rotate3d=d.rotateY=!0;break;case "rotateZ":case "rotate":e.rotateZ=l[0];d.rotate3d=d.rotate=d.rotateZ=!0;break;case "skew":e.skewX=
l[0];e.skewY=1<l.length?l[1]:"0px";d.skew=d.skewX=d.skewY=!0;break;case "skewX":e.skewX=l[0];d.skew=d.skewX=!0;break;case "skewY":e.skewY=l[0];d.skew=d.skewY=!0;break;case "scale3d":e.scaleX=l[0];e.scaleY=1<l.length?l[1]:1;e.scaleZ=2<l.length?l[2]:1;d.scale3d=d.scale=d.scaleX=d.scaleY=d.scaleZ=!0;break;case "scale":e.scaleX=l[0];e.scaleY=1<l.length?l[1]:l[0];d.scale=d.scaleX=d.scaleY=!0;break;case "scaleX":e.scaleX=l[0];d.scale3d=d.scale=d.scaleX=!0;break;case "scaleY":e.scaleY=l[0];d.scale3d=d.scale=
d.scaleY=!0;break;case "scaleZ":e.scaleZ=l[0];d.scale3d=d.scaleZ=!0;break;case "perspective":d.perspective=!0}}return e};f.TransformTween=r;h.extend(q.prototype,{applyTransform:function(b){var a=f.$.data(this.element,r.dataName);a&&b&&r.applyTransform(this.element,a,a.tween,b.context)}});p.applySubprop=function(b,a){var c=b[0],d=this.name,e=r.prototype.buildTransformData(c);e[d]=a;r.applyTransform(c,e,null,{})};f.Timeline.addTweenType("transform",function(b,a,c,d,e){return new r("transform",b,a,c,
d,e)});for(b=0;b<d.length;b+=1)f.Timeline.addTweenProperty(d[b],"transform");f.defineProps({translateX:{f:"transform",i:0,j:0,u:"px"},translateY:{f:"transform",i:0,j:1,u:"px"},translateZ:{f:"transform",i:0,j:2,u:"px"},rotateZ:{f:"transform",i:1,j:0,u:"deg"},rotateX:{f:"transform",i:1,j:1,u:"deg"},rotateY:{f:"transform",i:1,j:2,u:"deg"},skewX:{f:"transform",i:2,j:0,u:"deg"},skewY:{f:"transform",i:2,j:1,u:"deg"},scaleX:{f:"transform",i:3,j:0},scaleY:{f:"transform",i:3,j:1},scaleZ:{f:"transform",i:3,
j:2}});for(b=0;b<d.length;b+=1)f._.p[d[b]].apply=p.applySubprop})(window.AdobeEdge);
(function(f){function r(){if(!x){var a=document.createElement("div"),a=h(a),e,g;a.css("background-color","transparent");g=a.css("background-color");a.css("background-color","rgb(100, 100, 100)");e=a.css("background-color");s=e!==g;a.css("background-color","transparent");a.css("background-color","hsl(100, 100%, 100%)");e=a.css("background-color");b=e!==g;a.css("background-color","transparent");a.css("background-color","rgba(100, 100, 100,.5)");e=a.css("background-color");d=e!==g;a.css("background-color",
"transparent");a.css("background-color","hsla(100, 100%, 100%, .5)");e=a.css("background-color");c=e!==g;x=!0}}function u(a,b,c,d,e,n){f.PropertyTween.call(this,a,b,c,d,e,n);this.name="colorTween";r()}function e(a){return 0>a?a+1:1<a?a-1:a}function p(a,b,c,d){return d<v?a+c*d:0.5>d?b:d<t?a+c*(t-d):a}var h=f.$,l=["color","background-color","border-color"],q,x=!1,s=!1,b=!1,d=!1,c=!1,n=1/3,v=1/6,t=2/3;h.extend(u.prototype,f.PropertyTween.prototype);h.extend(u.prototype,{constructor:u,getValue:function(a,
b){return h(this).css(a)},setValue:function(a,b,c){h(this).css(b,c)},parseValue:function(a){var b=f.parseColorValue(a),c=/rgb/gi,d=/hsl/gi;if(b&&b.colorFunction&&b.values){a=b.values;b=b.colorFunction;if(b.match(c))if(this.animationColorSpace&&"HSL"===this.animationColorSpace)c={r:a[0],g:a[1],b:a[2]},(c=f.rgbToHSL(c))?3<a.length?(a=a[3],a=[c.h,c.s,c.l,a]):a=[c.h,c.s,c.l]:a=[];else if(!this.animationColorSpace)this.animationColorSpace="RGB";else{if("RGB"!==this.animationColorSpace)return a}else if(b.match(d))if(this.animationColorSpace&&
"RGB"===this.animationColorSpace)c={h:a[0],s:a[1],l:a[2]},(c=f.hslToRGB(c))?3<a.length?(a=a[3],a=[c.r,c.g,c.b,a]):a=[c.r,c.g,c.b]:a=[];else if(!this.animationColorSpace)this.animationColorSpace="HSL";else if("HSL"!==this.animationColorSpace)return a;3===a.length&&(a[3]=1);return a}},formatValue:function(a){r();if(a){var b,e,n;"HSL"===this.animationColorSpace&&c?(b="hsl",a=4===a.length&&c?b+"a("+a[0]+","+a[1]+"%,"+a[2]+"%,"+a[3]+")":b+"("+a[0]+","+a[1]+"%,"+a[2]+"%)"):d?(b="rgb",a=4===a.length&&d?
b+"a("+a[0]+"%,"+a[1]+"%,"+a[2]+"%,"+a[3]+")":b+"("+a[0]+"%,"+a[1]+"%,"+a[2]+"%)"):(b=a[0],e=a[1],n=a[2],"HSL"===this.animationColorSpace&&(a=f.hslToRGB({h:a[0],g:a[1],b:a[2]}),b=a.r,e=a.g,n=a.b),a=65536*Math.floor(2.55*b)+256*Math.floor(2.55*e)+Math.floor(2.55*n),a="#"+a.toString(16));return a}}});f.ColorTween=u;f.Color={formatValue:u.prototype.formatValue,parseValue:u.prototype.parseValue};f.parseColorValue=function(a){if(a){var b=[],c,d,e=/^\s*#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])\s*$/,f=/rgb/gi,
n=/hsl/gi;(d=/^\s*#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})\s*$/.exec(a))?(b=[parseInt(d[1],16)/255*100,parseInt(d[2],16)/255*100,parseInt(d[3],16)/255*100],c="rgb"):(d=e.exec(a))?(b=[parseInt(d[1]+d[1],16)/255*100,parseInt(d[2]+d[2],16)/255*100,parseInt(d[3]+d[3],16)/255*100],c="rgb"):"transparent"===a&&(b=[0,0,0,0],c="rgb");c||(c=a.toString().match(/\w+/),h.isArray(c)?c=c[0]:c||(c=""),(d=a.toString().match(/\([\d%,\.\s]*\)/))&&0<d.length&&(d=d[0].replace(/[\(\)]/g,"")));if(0===b.length)if(c.match(f))if((e=
/^\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*(?:,\s*([0-9](?:\.[0-9]+)?)\s*)?$/.exec(d))&&4<=e.length){for(a=0;3>a;a+=1)b[a]=e[a+1]/255*100;4<e.length&&(e[4]||(e[4]=1),b[3]=e[4])}else{if((d=/^\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*(?:,\s*([0-9](?:\.[0-9]+)?)\s*)?$/.exec(d))&&4<=d.length)for(5<=d.length&&(d.length=5,d[4]||(d[4]=1)),a=0;a<d.length-1;a+=1)b[a]=d[a+1]}else if(c.match(n)&&(d=/^\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*(?:,\s*([0-9](?:\.[0-9]+)?)\s*)?$/.exec(d))&&
4<=d.length)for(5<=d.length&&(d.length=5,d[4]||(d[4]=1)),a=0;a<d.length-1;a+=1)b[a]=d[a+1];if(b)for(a=0;a<b.length;a+=1)b[a]=Math.round(1E4*b[a])/1E4;return{colorFunction:c,values:b}}};f.hslToRGB=function(a){if(null===a||0>a.s||100<a.s||0>a.l||100<a.l)return null;for(;360<a.h;)a.h-=360;for(;0>a.h;)a.h=360+a.h;var b={},c=a.h/360,d=a.s/100;a=a.l/100;var f,h,l;0===d?b.r=b.g=b.b=a:(d=0.5>=a?a*(1+d):a+d-a*d,a=2*a-d,f=e(c+n),h=e(c),c=e(c-n),l=6*(d-a),b.r=p(a,d,l,f),b.g=p(a,d,l,h),b.b=p(a,d,l,c));b.r=Math.min(100*
b.r,100);b.g=Math.min(100*b.g,100);b.b=Math.min(100*b.b,100);b.r=Math.round(1E4*b.r)/1E4;b.g=Math.round(1E4*b.g)/1E4;b.b=Math.round(1E4*b.b)/1E4;return b};f.rgbToHSL=function(a){if(null===a||0>a.r||100<a.r||0>a.g||100<a.g||0>a.b||100<a.b)return null;var b={h:0,s:0,l:0},c=a.r/100,d=a.g/100;a=a.b/100;var e=Math.max(c,d,a),f=Math.min(c,d,a),n;b.l=(e+f)/2;e>f&&0<b.l&&(n=e-f,b.s=0.5>=b.l?n/(e+f):n/(2-e-f),b.h=e===a?4+(c-d)/n:e===d?2+(a-c)/n:(d-a)/n,b.h*=60,360<b.h?b.h-=360:0>b.h&&(b.h=360+b.h));b.s=Math.min(100*
b.s,100);b.l=Math.min(100*b.l,100);b.h=Math.round(1E4*b.h)/1E4;b.s=Math.round(1E4*b.s)/1E4;b.l=Math.round(1E4*b.l)/1E4;return b};f.colorToSupported=function(a){r();if(!d&&/rgba/.test(a)||!s&&/rgb/.test(a)||!c&&/hsla/.test(a)||!b&&/hsl/.test(a)){var e=f.parseColorValue(a).values,g,n,h;if(4<=e.length&&0.5>e[3])return"transparent";g=e[0];n=e[1];h=e[2];/hsl/.test(a)&&(a=f.hslToRGB({h:e[0],g:e[1],b:e[2]}),g=a.r,n=a.g,h=a.b);g=Math.floor(2.55*g);n=Math.floor(2.55*n);h=Math.floor(2.55*h);g=(15<g?"":"0")+
g.toString(16);n=(15<n?"":"0")+n.toString(16);h=(15<h?"":"0")+h.toString(16);a="#"+g+n+h}return a};f.Timeline.addTweenType("color",function(a,b,c,d,e){return new u("color",a,b,c,d,e)});for(q=0;q<l.length;q+=1)f.Timeline.addTweenProperty(l[q],"color")})(window.AdobeEdge);
(function(f){function r(b){if(document.documentElement.style.hasOwnProperty("webkitAppearance")){var d=e(b).css("-webkit-transform");d.match(/translateZ/)||d.match(/matrix3d/)||e(b).css("-webkit-transform",d+" translateZ(0)")}}function u(b,d,c,n,l,s){var a=null,k,g;2<=l.length&&e.isArray(l[1])&&2<=n.length&&e.isArray(n[1])?a=1:2<=l.length&&e.isArray(l[4])&&2<=n.length&&e.isArray(n[4])&&(a=4);if(a)for(k=n[a].length<l[a].length?n[a]:l[a],g=k===l[a]?n[a]:l[a],a=k.length;a<g.length;a+=1)k[a]=k[a-1];f.PropertyTween.call(this,
b,d,c,n,l,s);this.name="GradientTween";this.tweenType=h[b]}var e=f.$,p=f.PropertyTween,h={gradient:0},l={"background-image":{cssProp:"background-image",def:"0px",u:"px",i:1}},q,x=f._.p["background-image"].apply,s=f._.p["background-image"].prep;f.forceGPU=r;e.extend(u.prototype,p.prototype);e.extend(u.prototype,{constructor:u,setupForAnimation:function(){this.getElementSet().each(function(){r(this)});p.prototype.setupForAnimation.call(this)},getValue:function(b,d){return e(this).css(b)},setValuePre:function(b,
d,c){e(this).css(d,"-webkit-"+c);e(this).css(d,"-moz-"+c);e(this).css(d,"-ms-"+c);e(this).css(d,"-o-"+c)},setValue:function(b,d,c){e(this).css(d,c)},update:function(b,d){var c=this.getElementSet(),e=this,f=this.tweenType,h,a,k,g,m,s;q=l[this.property].cssProp;this.updateTriggered||(this.updateTriggered=!0,this.setupForAnimation());c.each(function(){var c=e.getPropertyTweenData(this,f,e.property),l;if(c.animationID===e.animationID){a=c.fromValues;k=c.toValues;g=e.filter;m=a.length;s=[];for(h=0;h<m;h+=
1)l=a[h],c=k[h],l="string"===typeof l?0===d&&0<e.duration?l:c.value:l+(c.value-l)*d,g&&g[h]&&(l=g[h](l,e,this,q,c.unit,b)),"number"===typeof l&&1>l&&(l=l.toFixed(6)),s.push(l+c.unit);c=e.formatValuePre(s);l=e.formatValue(s);e.setValuePre.call(this,f,q,c);e.setValue.call(this,f,q,l);e.notifyObservers("onUpdate",{elapsed:b,easingConst:d,property:q,value:l,element:this})}})},parseValue:function(b){function d(a,b){if(1<a[b].length)return a[b][1];var c;c=0===b?0:b===a.length-1?100:(d(a,b-1)+d(a,b+1))/
2;a[b].push(c);return c}if(b&&!(2>b.length)){"string"===typeof b&&(b=JSON.parse(b));var c=null,n=null,h=null,l=null,a=null,k=[],g=!1,m=[],s;e.isArray(b[1])?(c=b[0],n=b[1],b[2]&&(g=b[2])):(h=[b[0],b[1]],l=b[2],a=b[3],n=b[4],b[5]&&(g=b[5]));for(b=0;b<n.length;b+=1)if(s=f.Color.parseValue(n[b][0],b))k=k.concat(s),k.push(d(n,b));if((c={angle:c,colorstops:k,centerPoint:h,ellipse:l,extent:a,repeating:g})&&c.colorstops)return null!==c.angle?m=m.concat(c.angle):c.centerPoint&&(m=m.concat(c.centerPoint),m=
m.concat([c.ellipse,c.extent])),m=m.concat(c.colorstops),m.concat(c.repeating)}},formatValue:function(b){return f.formatGradient(b,!1)},formatValuePre:function(b){return f.formatGradient(b,!0)}});f.GradientTween=u;f.Gradient={parseValue:u.prototype.parseValue};f.formatGradient=function(b,d){if(b){var c="",e=null,h,l,a;2===b.length%5?(e=1,c=c+"linear-gradient("+((d?b[0]:(450-b[0])%360)+"deg,")):(e=4,c+="radial-gradient(",c=d?c+(b[0]+"% "+b[1]+"%,"+(1==b[2]?"ellipse":"circle")+" "+b[3]+","):c+(b[3]+
" "+(1==b[2]?"ellipse":"circle")+" at "+b[0]+"% "+b[1]+"%,"));1==b[b.length-1]&&(c="repeating-"+c);if(!(12>b.length||0!==(b.length-e-1)%5)){a=Math.floor((b.length-e-1)/5);for(h=0;h<a;h+=1)l=5*h+e,c+=f.Color.formatValue(b.slice(l,l+4)),-1!==b[l+4]&&(c+=" "+b[l+4]+"%"),h!==a-1&&(c+=",");return c+=")"}}};f.Timeline.addTweenType("gradient",function(b,d,c,e,f){return new u("gradient",b,d,c,e,f)});f._.p["background-image"].apply=function(b,d){var c,e;if("string"===typeof d)return x.call(f._.p["background-image"],
b,d);c=f.Gradient.parseValue(d);e=f.formatGradient(c,!1);c=f.formatGradient(c,!0);b.css("background-image","-webkit-"+c);b.css("background-image","-moz-"+c);b.css("background-image","-ms-"+c);b.css("background-image","-o-"+c);b.css("background-image",e)};f._.p["background-image"].prep=function(b,d,c,e,h,l,a){return void 0==d[c]||"string"===typeof d[c][e]?s.call(f._.p["background-image"],b,d,c,e,h,l,a):d[c][e]};for(q in l)l.hasOwnProperty(q)&&f.Timeline.addTweenProperty(q,"gradient")})(window.AdobeEdge);
(function(f){function r(b,d,c,e,f,h){x.call(this,b,"motion",c,void 0,void 0,h);this.name="motionTween";(this.path=e)&&1<e.length&&6>e[0].length&&(e[0][4]=e[0][5]=0,e[e.length-1].splice(2,0,0,0));this.keyframes=[];b=document.createElement("div");c=q(b);null!==document.body&&document.body.appendChild(b);c.css("left","-9999px").css("width","100px");c.css("transform-origin","50% 50%").css("-webkit-transform-origin","50% 50%").css("-moz-transform-origin","50% 50%").css("-ms-transform-origin","50% 50%").css("-o-transform-origin",
"50% 50%");d=c.css("transform-origin")||c.css("-webkit-transform-origin")||c.css("-moz-transform-origin")||c.css("-ms-transform-origin")||c.css("-o-transform-origin");c.css("border-width","10px").css("border-style","solid");c=c.css("transform-origin")||c.css("-webkit-transform-origin")||c.css("-moz-transform-origin")||c.css("-ms-transform-origin")||c.css("-o-transform-origin");null!==b.parentNode&&b.parentNode.removeChild(b);this.originIncludesBorders=d!==c}function u(b,d,c){try{if(b[0]===d[0]&&b[1]===
d[1])return{x:d[0],y:d[1]}}catch(e){}var f={},h=c*c,a=h*c,k=2*a-3*h+1;c=a-2*h+c;var g=-2*a+3*h,h=a-h;f.x=k*b[0]+c*b[2]+g*d[0]+h*d[4];f.y=k*b[1]+c*b[3]+g*d[1]+h*d[5];return f}function e(b,d,c){if(b[0]===d[0]&&b[1]===d[1])return{dx:0,dy:0};var e={},f=c*c,h=6*f-6*c,a=3*f-4*c+1,k=-6*f+6*c;c=3*f-2*c;var f=b[3],g=d[5];e.dx=h*b[0]+a*b[2]+k*d[0]+c*d[4];e.dy=h*b[1]+a*f+k*d[1]+c*g;return e}function p(b,d){var c=b.x-d.x,e=b.y-d.y;return Math.sqrt(c*c+e*e)}function h(b,d,c,e,f){var l=Math.floor(c[e].b),a=(c[e].b+
c[e+1].b)/2-l,k=u(b,d,a),g=0;p({x:(c[e].x+c[e+1].x)/2,y:(c[e].y+c[e+1].y)/2},k)>f&&(k.b=a+l,c.splice(e+1,0,k),g=h(b,d,c,e+1,f),g=g+h(b,d,c,e,f)+1);return g}function l(b){var d,c,e,f,l,a,k,g;for(d=0;d<b.length-1;d++){f=[0,0,3*b[d].upper.x,3*b[d].upper.y,3*b[d].lower.x,3*b[d].lower.y];l=[1,1,3*b[d+1].upper.x,3*b[d+1].upper.y,3*(1-b[d+1].lower.x),3*(1-b[d+1].lower.y)];a=[];for(c=0;5>c;c++)e=c/4,k={b:e},g=u(f,l,e),k.x=g.x,k.y=g.y,k.b=e,a[c]=k;a:{c=a;e=p(c[c.length-1],c[0]);var m=k=void 0,s=m=void 0;g=
c[c.length-1].x-c[0].x;var q=c[c.length-1].y-c[0].y;for(k=1;k<c.length-1;k++)if(m={x:c[k].x-c[0].x,y:c[k].y-c[0].y},m=m.x*g+m.y*q,s=e*p(c[k],c[0]),0.005<Math.abs(Math.acos(m/s))){c=!1;break a}c=!0}if(c)a.splice(1,3);else for(c=0;4>c;c++)e=3-c,h(f,l,a,e,0.01);f=b[d];l=1;s=m=q=g=k=e=c=void 0;for(c=0;c<a.length-1;c++)0<a[c+1].x-a[c].x&&(l=Math.min(l,a[c+1].x-a[c].x));k=Math.ceil(1/l);g=1/k;q=[];m=0;q[0]={t:0,e:0};for(c=0;c<k;c++){for(e=c*g;e>a[m+1].x&&m<a.length-2;)m++;s=a[m+1].y;0<a[m+1].x-a[m].x&&
(s=a[m].y+(e-a[m].x)*(a[m+1].y-a[m].y)/(a[m+1].x-a[m].x));q[c]={t:e,e:s}}1>q[q.length-1].t&&(q[q.length]={t:1,e:1});f.easingTable=q}}var q=f.$,x=f.TransformTween,s=f.UpdateFinalizer;q.extend(r.prototype,x.prototype);q.extend(r.prototype,{constructor:r,getValue:function(b,d){},setupForAnimation:function(){x.prototype.setupForAnimation.call(this);this.points||(this.setUpPoints(),this.setUpLen2bMap(),l(this.keyframes));this.deltas||window.edge_authoring_mode||(this.getElementSet().each(function(){var b=
q(this),c=f.$.data(this,"p_x")||"left",e=f.$.data(this,"p_y")||"top",h=q(this.parentElement),l=+parseFloat(b.css(c))||0,a=+parseFloat(b.css(e))||0;"%"===f.$.data(this,"u_x")&&(l=l/100*+h.width());"%"===f.$.data(this,"u_y")&&(a=a/100*+h.height());f.$.data(this,"deltaX",l);f.$.data(this,"deltaY",a);b.css(c,"0px").css(e,"0px")}),this.deltas=!0);for(var b=this;b._prevObj&&(2!=b._prevObj.path.length||b._prevObj.path[0][0]!==b._prevObj.path[1][0]||b._prevObj.path[0][1]!==b._prevObj.path[1][1]);)b=b._prevObj;
b=e(b.path[0],b.path[1],1E-6);this.deltaRotate=180*Math.atan2(b.dx,b.dy)/Math.PI},computeEasing:function(b){var d=this.keyframes;b/=this.getDuration();var c=0,e,f,h;for(e=0;e<d.length-1&&!(c=e,b<=d[e+1].t);e++);e=d[c].easingTable;f=d[c+1].l-d[c].l;b=(b-d[c].t)/(d[c+1].t-d[c].t);h=Math.floor(b/(e[1].t-e[0].t));h=Math.min(e.length-2,Math.max(h,0));return d[c].l+(e[h].e+(b-e[h].t)*(e[h+1].e-e[h].e)/(e[h+1].t-e[h].t))*f},originInPx:function(b){var d,c={},e=b.width(),h=b.height(),l,a;d=(b.css("transform-origin")||
b.css("-webkit-transform-origin")||b.css("-moz-transform-origin")||b.css("-ms-transform-origin")||b.css("-o-transform-origin")||"50% 50%").split(" ");0<d[0].indexOf("%")?(l=parseFloat(d[0].substring(0,d[0].length-1))/100,a=parseFloat(d[1].substring(0,d[1].length-1))/100,c.x=e*l,c.y=h*a):(c.x=parseFloat(d[0].substring(0,d[0].length-2)),c.y=parseFloat(d[1].substring(0,d[1].length-2)));this.originIncludesBorders||(l=l||c.x/e,a=a||c.y/h,d=f.splitUnits(b.css("border-left-width")).num+f.splitUnits(b.css("border-right-width")).num||
0,d*=l,b=f.splitUnits(b.css("border-top-width")).num+f.splitUnits(b.css("border-bottom-width")).num||0,c.x+=d,c.y+=b*a);return c},update:function(b,d,c){this.updateTriggered||(this.updateTriggered=!0,this.setupForAnimation(c));c=this.getElementSet(c);var h=this,l=this.property,p=this.tweenType,a=this.findSegment(d),k=this.path,g=this.easeToB(d),m=this.points[this.points.length-1].l,r,g=Math.min(1,Math.max(0,g-a));r=Math.max(1E-6,Math.min(0.999999,g));var A=u(k[a],k[a+1],g),a=e(k[a],k[a+1],r),g=180*
Math.atan2(a.dx,a.dy)/Math.PI,z,E;this._prevObj&&2===k.length&&k[0][0]===k[1][0]&&k[0][1]===k[1][1]?(E=!0,z=0):z=this.deltaRotate-g;if(0>d||1<d)k=Math.atan2(a.dy,a.dx),a=1<d?d-1:d,A.x+=Math.cos(k)*m*a,A.y+=Math.sin(k)*m*a;c.each(function(){var a=q(this),c=h.getPropertyTweenData(this,p,l),e=f.$.data(this,x.dataName),g=this.parentElement,k;e.tween=h;if(c.animationID===h.animationID){var a=h.originInPx(a),c=f.$.data(this,"p_x")||"left",m=f.$.data(this,"p_y")||"top",r=A.x,u=A.y,y=f.$.data(this,"u_x")||
"px",J=f.$.data(this,"u_y")||"px",O=!window.edge_authoring_mode,K=f.$.data(this,"doAutoOrient"),K="true"===K?!0:"false"===K?!1:K;O&&(k=q(g),g=k.width(),k=k.height(),"%"===y&&(r=r/100*g),"%"===J&&(u=u/100*k));r+="right"===c?a.x:-1*a.x;u+="bottom"===m?a.y:-1*a.y;O&&(r+=0,u+=0);r=0!==r&&1E-6>Math.abs(r)?r.toFixed(6):r.toString();u=0!==u&&1E-6>Math.abs(u)?u.toFixed(6):u.toString();E||(K||(z=0),z=0.01<Math.abs(z)?z:0,f.$.data(this,"motionRotateZ",z+"deg"),h.setValue.call(this,void 0,"motionRotateZ",z+
"deg"),s.Register(h.timeline,e.id,e));O?(h.setValue.call(this,void 0,"motionTranslateX",r+"px"),h.setValue.call(this,void 0,"motionTranslateY",u+"px"),s.Register(h.timeline,e.id,e)):(q(this).css(c,r+y),h.notifyObservers("onUpdate",{elapsed:b,easingConst:d,property:c,value:r+y,element:e.tween}),q(this).css(m,u+J),h.notifyObservers("onUpdate",{elapsed:b,easingConst:d,property:m,value:u+J,element:this}))}})},findSegment:function(b){b=this.len2b(b*this.points[this.points.length-1].l);b=Math.floor(b);
return Math.min(Math.max(b,0),this.path.length-2)},easeToB:function(b){return this.len2b(b*this.points[this.points.length-1].l)},setUpLen2bMap:function(){var b=0,d,c,e=60*this.getDuration()/1E3,f=this.len2bMap=[],h=this.points,a;for(d=0;d<h.length-1;d++)h[d].l=b,b+=p(h[d],h[d+1]);c=h[h.length-1].l=b;this.len2bStep=e=c/e;d=b=0;if(0<c){for(;b<=c;){for(;d<h.length-1&&b>h[d+1].l;)d+=1;if(d>=h.length-1)break;a=h[d].b+(b-h[d].l)*(h[d+1].b-h[d].b)/(h[d+1].l-h[d].l);f.push({l:b,b:a});b+=e}f[f.length-1].b<
h[h.length-1].b&&f.push({l:h[h.length-1].l,b:h[h.length-1].b})}else f.push({l:0,b:h[0].b})},setUpPoints:function(){var b=this.path,d,c,e,f;this.points=[];for(d=0;d<b.length-1;d++)for(c=0;5>c;c++)if(4>c||d===b.length-2)f=c/4,e={b:d+f},f=u(b[d],b[d+1],f),e.x=f.x,e.y=f.y,this.points.push(e);for(d=1;d<b.length;d++)for(f=b.length-d-1,c=0;4>c;c++)e=3-c+4*f,h(b[f],b[f+1],this.points,e,2);return this.points},len2b:function(b){this.len2bMap||this.setUpLen2bMap();var d=this.len2bMap,c=Math.min(Math.max(0,Math.floor(b/
this.len2bStep)),this.len2bMap.length-2);return 0===d.length?0:1===d.length?d[0].b:(b-d[c].l)*(d[c+1].b-d[c].b)/(d[c+1].l-d[c].l)+d[c].b}});f.MotionTween=r;f.Timeline.addTweenType("motion",function(b,d,c,e,f,h){return new r("motion",b,d,c,e,f,h)});f.Timeline.addTweenProperty("motion","motion");f.Timeline.addTweenProperty("location","motion")})(window.AdobeEdge);
(function(f){function r(e,b,d,c,f,l){if(d&&c&&e&&e._s&&e.sym&&e.sym[d]){var p=[],a;"object"==typeof c?a=c:(a=b.find$(c))||(a=b.$(c));a.each(function(){var a=h(this),b=document.createElement("div"),c=a._children(),r={},u,x;x=q.getParentSymbol(this,!0);if(u=new q(e.sym,d,e,x,l))(f||0===f)&&a._children().eq(f)[0]?0>f?c.get(f).insertAfter(b):c.get(f).insertBefore(b):a.append(b),u.opts=u.opts||{},h.extend(u.opts,r),u.init(b),u._applyBaseStyles(h(b),d),(x.ci=x.ci||[]).push(u),p.push(u)});e.readyCalled&&
p.forEach(function(a){x._playAuto(a,!0);a.getSymbolElement().css("position","relative")});return p}}function u(e,b){var d,c=b.getSymbolElementNode().id;for(d=e.length-1;0<=d;d--)e[d].getSymbolElementNode().id===c&&e.splice(d,1)}function e(f,b){b=b||[];var d=f.parentNode;f&&1===f.nodeType&&(b.push(d),e(d,b));return b}function p(e,b){b=b||{};var d=e.composition?e.composition._s:null,c={},f=h.Event("beforeDeletion");h.extend(f,{Symbol:e,element:e.ele,performDefaultAction:!0});c&&h.extend(f,c);c=e.ci;
if(d&&(e.notifyObservers("beforeDeletion",f),f.performDefaultAction)){e.stop(0);if(c)for(;0<c.length;)p(c[0],b);e.prnt&&e.prnt.ci&&u(e.prnt.ci,e);u(e.composition._s,e);e.composition=void 0;e.prnt=void 0;d=e.ele;q.setSymbol(h(d)[0],void 0);b._keepElement?h(d).empty():h(d).remove();e.tlCached=null;e.ele=null;e.removeObservers()}}var h=f.$,l=f.An$,q=f.Symbol,x=f.Composition;h.extend(l.prototype,{_parents:function(){var f=[];this.each(function(b,d){e(d,f)});return h(f)},_children:function(){var e=[];
this.each(function(b,d){for(var c=e,c=c||[],f=d.firstElementChild;f;)c.push(f),f=f.nextElementSibling});return h(e)},eq:function(e){return h(this[e])},append:function(e){var b=this;h(e).each(function(d,c){b.each(function(b,d){d.appendChild(c)})})}});q.getParentSymbol=function(e,b){var d=h(e),c=d._parents(),f=c.length,l;if((l=q.getSymbol(d[0]))&&b)return l;for(d=0;d<f;d++)if(l=q.getSymbol(c[d]))return l;return null};h.extend(l.prototype,{empty:function(){var e;this.each(function(b,d){for(e=d.firstChild;e;)d.removeChild(e),
e=d.firstChild})},remove:function(){var e;this.empty();this.each(function(b,d){(e=d.parentNode)&&e.removeChild(d)})}});h.extend(q.prototype,{deleteSymbol:function(e){return p(this,e)},createChildSymbol:function(e,b,d,c){if(e&&b){var f;"object"==typeof b?f=b:(f=this.find$(b))||(f=this.$(b));if(f&&f[0]&&(e=r(this.composition,this,e,b,d,c)))return e.forEach(function(b){}),e[0]}},getVariable:function(e){return this.variables[e]},setVariable:function(e,b){this.variables[e]=b;window.edge_authoring_mode&&
(this._variables[e]=b);if(e){var d=this.getVariable(e),c="variableChanged:"+e,d={variableValue:d},f=h.Event(c);h.extend(f,{Symbol:this,element:this.ele,performDefaultAction:!0});h.extend(f,d);this.notifyObservers(c,f)}return this},getSymbol:function(e){e=this.$(e);return q.getSymbol(e)},getParentSymbol:function(){return q.getParentSymbol(this.ele,!1)},getChildSymbols:function(){return this.ci?this.ci.slice(0):[]},playAll:function(){this.play();for(var e=this.getChildSymbols(),b=0;b<e.length;b++)e[b].playAll()},
stopAll:function(e,b){this.stop(e,b);for(var d=this.getChildSymbols(),c=0;c<d.length;c++)d[c].stopAll(e,b)},getSymbolElementNode:function(){return this.ele},getSymbolElement:function(){return f.$(this.ele)},_executeMediaAction:function(e,b){if(!("object"!==typeof b||3>b.length)){var d=b[0],c=this.$(b[1])[0];if(c&&d){var f=b[2];f&&"object"===typeof f||(f=null);"play"===d?(f&&0<f.length&&"number"===typeof f[0]&&(c.currentTime=f[0]),c.play()):"pause"===d&&c.pause()}}},_executeSymbolAction:function(e,
b){if(!("object"!==typeof b||3>b.length)){var d=b[0],c=f.Symbol.get(this.$(b[1]));if(c&&d){var h=b[2];h&&"object"===typeof h||(h=null);c[d].apply(c,h)}}},eMA:function(e,b){this._executeMediaAction(e,b)}});q.prototype.getParameter=q.prototype.getVariable;q.prototype.setParameter=q.prototype.setVariable;h.extend(x.prototype,{createSymbolChild:function(e,b,d,c){return r(this,this.stage,e,b,d,c)},removeSymbol:function(e,b){if(this.symbolInstances){var d=q.get(e);d&&d.deleteSymbol(b)}}})})(window.AdobeEdge);

/* ADFOX plugins (adfox.asyn.code.ver3.js, adfox.asyn.code.scroll.js) */
function AdFox_SetLayerVis(spritename,state){
    document.getElementById(spritename).style.visibility=state;
}

function AdFox_Open(AF_id){
    AdFox_SetLayerVis('AdFox_DivBaseFlash_'+AF_id, "hidden");
    AdFox_SetLayerVis('AdFox_DivOverFlash_'+AF_id, "visible");
}

function AdFox_Close(AF_id){
    AdFox_SetLayerVis('AdFox_DivOverFlash_'+AF_id, "hidden");
    AdFox_SetLayerVis('AdFox_DivBaseFlash_'+AF_id, "visible");
}

function AdFox_getCodeScript(AF_n,AF_id,AF_src){
    var AF_doc;
    if(AF_n<10){
        try{
            if(document.all && !window.opera){
                AF_doc = window.frames['AdFox_iframe_'+AF_id].document;
            }else if(document.getElementById){
                AF_doc = document.getElementById('AdFox_iframe_'+AF_id).contentDocument;
            }
        }catch(e){}
        if(AF_doc){
            AF_doc.write('<scr'+'ipt onerror="document.close();" type="text/javascript" src="'+AF_src+'"><\/scr'+'ipt>');
        }else{
            setTimeout('AdFox_getCodeScript('+(++AF_n)+','+AF_id+',"'+AF_src+'");', 100);
        }
    }
}

function adfoxSdvigContent(banID, flashWidth, flashHeight){
    var obj = document.getElementById('adfoxBanner'+banID).style;
    if (flashWidth == '100%') obj.width = flashWidth;
    else obj.width = flashWidth + "px";
    if (flashHeight == '100%') obj.height = flashHeight;
    else obj.height = flashHeight + "px";
}

function adfoxVisibilityFlash(banName, flashWidth, flashHeight){
    var obj = document.getElementById(banName).style;
    if (flashWidth == '100%') obj.width = flashWidth;
    else obj.width = flashWidth + "px";
    if (flashHeight == '100%') obj.height = flashHeight;
    else obj.height = flashHeight + "px";
}

function adfoxStart(banID, FirShowFlNum, constVisFlashFir, sdvigContent, flash1Width, flash1Height, flash2Width, flash2Height){
    if (FirShowFlNum == 1) adfoxVisibilityFlash('adfoxFlash1'+banID, flash1Width, flash1Height);
    else if (FirShowFlNum == 2) {
        adfoxVisibilityFlash('adfoxFlash2'+banID, flash2Width, flash2Height);
        if (constVisFlashFir == 'yes') adfoxVisibilityFlash('adfoxFlash1'+banID, flash1Width, flash1Height);
        if (sdvigContent == 'yes') adfoxSdvigContent(banID, flash2Width, flash2Height);
        else adfoxSdvigContent(banID, flash1Width, flash1Height);
    }
}

function adfoxOpen(banID, constVisFlashFir, sdvigContent, flash2Width, flash2Height){
    var aEventOpenClose = new Image();
    var obj = document.getElementById("aEventOpen"+banID);
    if (obj) aEventOpenClose.src =  obj.title+'&rand='+Math.random()*1000000+'&prb='+Math.random()*1000000;
    adfoxVisibilityFlash('adfoxFlash2'+banID, flash2Width, flash2Height);
    if (constVisFlashFir != 'yes') adfoxVisibilityFlash('adfoxFlash1'+banID, 1, 1);
    if (sdvigContent == 'yes') adfoxSdvigContent(banID, flash2Width, flash2Height);
}


function adfoxClose(banID, constVisFlashFir, sdvigContent, flash1Width, flash1Height){
    var aEventOpenClose = new Image();
    var obj = document.getElementById("aEventClose"+banID);
    if (obj) aEventOpenClose.src =  obj.title+'&rand='+Math.random()*1000000+'&prb='+Math.random()*1000000;
    adfoxVisibilityFlash('adfoxFlash2'+banID, 1, 1);
    if (constVisFlashFir != 'yes') adfoxVisibilityFlash('adfoxFlash1'+banID, flash1Width, flash1Height);
    if (sdvigContent == 'yes') adfoxSdvigContent(banID, flash1Width, flash1Height);
}
function AdFox_getWindowSize() {
    var winWidth,winHeight;
    if( typeof( window.innerWidth ) == 'number' ) {
        //Non-IE
        winWidth = window.innerWidth;
        winHeight = window.innerHeight;
    } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
        //IE 6+ in 'standards compliant mode'
        winWidth = document.documentElement.clientWidth;
        winHeight = document.documentElement.clientHeight;
    } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
        //IE 4 compatible
        winWidth = document.body.clientWidth;
        winHeight = document.body.clientHeight;
    }
    return {"width":winWidth, "height":winHeight};
}//END function AdFox_getWindowSize

function AdFox_getElementPosition(elemId){
    var elem;

    if (document.getElementById) {
        elem = document.getElementById(elemId);
    }
    else if (document.layers) {
        elem = document.elemId;
    }
    else if (document.all) {
        elem = document.all.elemId;
    }
    var w = elem.offsetWidth;
    var h = elem.offsetHeight;
    var l = 0;
    var t = 0;

    while (elem)
    {
        l += elem.offsetLeft;
        t += elem.offsetTop;
        elem = elem.offsetParent;
    }

    return {"left":l, "top":t, "width":w, "height":h};
} //END function AdFox_getElementPosition

function AdFox_getBodyScrollTop(){
    return self.pageYOffset || (document.documentElement && document.documentElement.scrollTop) || (document.body && document.body.scrollTop);
} //END function AdFox_getBodyScrollTop

function AdFox_getBodyScrollLeft(){
    return self.pageXOffset || (document.documentElement && document.documentElement.scrollLeft) || (document.body && document.body.scrollLeft);
}//END function AdFox_getBodyScrollLeft

function AdFox_Scroll(elemId,elemSrc){
    var winPos = AdFox_getWindowSize();
    var winWidth = winPos.width;
    var winHeight = winPos.height;
    var scrollY = AdFox_getBodyScrollTop();
    var scrollX =  AdFox_getBodyScrollLeft();
    var divId = 'AdFox_banner_'+elemId;
    var ltwhPos = AdFox_getElementPosition(divId);
    var lPos = ltwhPos.left;
    var tPos = ltwhPos.top;

    if(scrollY+winHeight+5 >= tPos && scrollX+winWidth+5 >= lPos){
        AdFox_getCodeScript_scroll(1,elemId,elemSrc);
    }else{
        setTimeout('AdFox_Scroll('+elemId+',"'+elemSrc+'");',100);
    }
}//End function AdFox_Scroll

function AdFox_getCodeScript_scroll(AF_n, AF_id, AF_src) {
    var
        AF_doc, script = null;
    if (AF_n < 10) {
        try {
            if (document.all && !window.opera) {
                AF_doc = window.frames['AdFox_iframe_' + AF_id].document;
            } else if (document.getElementById) {
                AF_doc = document.getElementById('AdFox_iframe_' + AF_id).contentDocument;
            }
        } catch (e) {}
        if (AF_doc && AF_doc.readyState == 'complete') {
            AF_doc.close();
            AF_doc.open();
            AF_doc.write('<scr' + 'ipt onerror="document.close();" type="text/javascript" src="' + AF_src + '"><\/scr' + 'ipt>');
        } else {
            setTimeout('AdFox_getCodeScript_scroll(' + (++AF_n) + ',' + AF_id + ',"' + AF_src + '");', 100);
        }
    }
}
/* End ADFOX plugins (adfox.asyn.code.ver3.js, adfox.asyn.code.scroll.js) */


function receiveMessage(event)
{
    if (event.data.adfox_branding){
        var background_color = event.data.adfox_branding.background_color || "";
        $("body").css("background", background_color + " url(" + event.data.adfox_branding.background_url + ") no-repeat 0 0");
        $("body").prepend('<a href="' + event.data.adfox_branding.href + '" style="position: fixed; top: 0px; left: 0px; right: 0px; bottom: 0px;" target="_blank" />');
    }

    if (event.data.SPB_AdFox_Adriver_Init_banners){
        new adriver(event.data.SPB_AdFox_Adriver_Init_banners.banner_id, event.data.SPB_AdFox_Adriver_Init_banners.banner_param);
    }

    if (event.data.SPB_AdFox_HTML_Init_banners){
        if(typeof AdobeEdge == 'undefined'){
            var edge_script = document.createElement('script');
            var edge_style = document.createElement('style');
            edge_script.onload = function(){
                setTimeout(function(){
                    AdobeEdge.loadComposition(
                        event.data.SPB_AdFox_HTML_Init_banners.banner_param[0],
                        event.data.SPB_AdFox_HTML_Init_banners.banner_param[1],
                        event.data.SPB_AdFox_HTML_Init_banners.banner_param[2],
                        event.data.SPB_AdFox_HTML_Init_banners.banner_param[3],
                        event.data.SPB_AdFox_HTML_Init_banners.banner_param[4]
                    );
                }, 1000);
            };
            edge_script.src = 'http://animate.adobe.com/runtime/6.0.0/edge.6.0.0.min.js';
            edge_style.innerHTML = '[class*="edgeLoad-EDGE"] {visibility:hidden;}';
            document.getElementsByTagName('head')[0].appendChild(edge_script);
            document.getElementsByTagName('head')[0].appendChild(edge_style);
        }else{
            //setTimeout(function(){
                AdobeEdge.loadComposition(
                    event.data.SPB_AdFox_HTML_Init_banners.banner_param[0],
                    event.data.SPB_AdFox_HTML_Init_banners.banner_param[1],
                    event.data.SPB_AdFox_HTML_Init_banners.banner_param[2],
                    event.data.SPB_AdFox_HTML_Init_banners.banner_param[3],
                    event.data.SPB_AdFox_HTML_Init_banners.banner_param[4]
                );
            //}, 1000);
        }
    }
}

addEventListener("message", receiveMessage, false);

(function () {

    var callbacks_arr = {};
    var is_debug = false;

    window.postMessageCallback = function (str_for_comparing, callback, debug) {
        callbacks_arr[str_for_comparing] = callbacks_arr[str_for_comparing] || [];
        callbacks_arr[str_for_comparing].push(callback);
        if (debug) {
            is_debug = true;
        }
    };


    var postMessageEventCallback = function (event) {

        if (is_debug) {
            console.debug("Received postMessage data", event.data);
        }

        if (!callbacks_arr[event.data]) {
            return;
        }

        callbacks_arr[event.data].forEach(function(callback){
            callback();
        });
    };

    addEventListener("message", postMessageEventCallback, false);

})();

function AdFox()
{
	var instance;
	if (!adfox) instance = this;
	else return adfox;
	/* 
	 *@SETTINGS
	 */
	this.phoneWidth = 480;				// Макс. ширина экрана телефона
	this.tabletWidth = 1200;				// Макс. ширина экрана планшета
	this.minWidth = 200;				// Минимальная ширина баннера при resize & scale
	this.autoReloads = 1;			// Автоматическая перегрузка баннера
	/*
	 *@END SETTINGS
	 */
	this.pc = 'display';	  			// Имя для мониторв
	this.pad = 'tablet';	 			// Имя для планшетов
	this.phone = 'phone';    			// Имя для телефонов
	this.rnd = function()
	{
		return Math.floor(Math.random() * 1000000);
	}
	this.pr = window.pr || this.rnd();
	window.pr = window.pr || this.pr;
	this.ref = escape(document.referrer);
	this.dl = escape(document.location);
	this.banners = [];
	this.state = '';
	this.prev = '';
	this.screen = function()
	{
		var w = this.getWidth();
		if(w > this.tabletWidth)
		{
			this.prev = this.state;
			this.state = this.pc;
		}
		else if((w < this.tabletWidth || w == this.tabletWidth) && w > this.phoneWidth)
		{
			this.prev = this.state;
			this.state = this.pad;
		}
		else if(w < this.phoneWidth || w == this.phoneWidth)
		{
			this.prev = this.state;
			this.state = this.phone;
		}
	}
	this.getWidth = function()
	{
		var win = window,
			d = document,
			e = d.documentElement,
			g = d.getElementsByTagName('body')[0],
			w = e.clientWidth || win.innerWidth || g.clientWidth;
		return w;
	}
	this.getBanner = function(pr1)
	{
		for (var i = 0; i < adfox.banners.length; i++) {
			if (adfox.banners[i].pr1 == pr1) {
				return adfox.banners[i];
			}
		}
		return adfox.banners;
	}
	this.removeBanner = function(e)
	{
		for(var i = 0; i < adfox.banners.length;i++)
		{
			if(adfox.banners[i] == e)
			{
				adfox.banners[i].ph.innerHTML = '';
				adfox.banners.splice(i,1);
			}
		}
	}
	/* ENTER FRAME*/
	this.enterframe = function(){
		var pc = this.pc,
			pad = this.pad,
			phone = this.phone,
			ds = this.displaysSize;
		function update(iter, _rnd)
		{
			iter++;
			var winSize = adfox.getWidth();
			adfox.screen();

			function removeHTMLCodeBanner(id) {
				var iframeWindow = null;
				try{
					if(document.all && !window.opera){
						iframeWindow = window.frames['AdFox_iframe_' + e.pr1];
					}
					else if(document.getElementById){
						iframeWindow = document.getElementById('AdFox_iframe_' + e.pr1).contentWindow;
					}
				}catch(e){}

				if (iframeWindow && typeof(iframeWindow.adfoxRemoveBanner) != 'undefined') {
					iframeWindow.adfoxRemoveBanner();
				}
			}

			for(var i = 0; i < adfox.banners.length; i++)
			{
				var b = adfox.banners[i];
				if(b.settings != 'none')
				{
					/* VISIBILITY */
					if(adfox.parse(pc,b.settings) || adfox.parse(pad,b.settings) || adfox.parse(phone,b.settings))
					{
						if(adfox.parse(adfox.state,b.settings) && b.ph.style.display != 'none')
						{
							b.ph.style.display = 'none';
						}
						else if(!adfox.parse(adfox.state,b.settings) && b.ph.style.display != 'block')
						{
							b.ph.style.display = 'block';
						}
					}

					/* RESIZE BANNER */
					if(adfox.parse('scale',b.settings)  && b.w != '')
					{
						var wid = (b.ph.parentNode.clientWidth/b.w < 1)?b.ph.parentNode.clientWidth/b.w:1;
						b.ph.style.width = Math.floor(wid*b.w)+'px';
						if(parseInt(b.ph.style.width)< adfox.minWidth)
							b.ph.style.width = Math.floor(adfox.minWidth)+'px';
					}

				}
				/* RELOAD */
				if(adfox.autoReloads == true && (b.ph.style.display == 'block' || b.ph.style.display == ''))
				{
					if(adfox.state != adfox.prev)
					{
						removeHTMLCodeBanner(b.pr1);
						adfox.removeBanner(b);
						b.createBanner();
					}
				}
			}
			setTimeout(function() {update(iter, _rnd);},200);
		}
		update(0, Math.random());
	}
	this.parse = function(srch,str)
	{
		var res = false;
		var f = srch.toLowerCase();
		var s = str.toLowerCase();
		if(s.indexOf(f) != -1)
		{
			res = true;
		}
		return res;
	}
}
var adfox = new AdFox();
adfox.enterframe();

function AdFoxBanner(link,settings)
{
	this.pr1 = adfox.rnd();
	this.ph	= null;
	this.date;
	this.iframe;
	this.settings = (settings)?settings:'none';
	this.link;
	this.w = '';
	this.getCode = function(n)
	{
		var link = this.link;
		var pr1 = this.pr1;
		var set = this.settings;
		var n = n;
		var getWid = function()
		{
			if(adfox.banners[n].ph != null)
			{
				var img = adfox.banners[n].ph.getElementsByTagName('img');
				if(img.length == 1)
					adfox.banners[n].w = parseInt(img[0].getAttribute('width'));
				else
					adfox.banners[n].w = adfox.banners[n].ph.clientWidth;
			}
			else
			{
				setTimeout(getWid,1000);
			}
		}
		var timer = function()
		{
			if(set != '')
			{
				if(adfox.parse(adfox.state,set))
				{
					//No request.  
					setTimeout(timer,30);
				}
				else
				{
					AdFox_getCodeScript(1,pr1,link);
					setTimeout(getWid,1000);
				}
			}
			else
			{
				AdFox_getCodeScript(1,pr1, link);
				setTimeout(getWid,1000);
			}
		}
		timer();
	}

	this.createBanner = function()
	{
		var f = true;
		var curIndex;
		this.date = new Date();
		this.link = link;
		this.secParams = '&pr=' + adfox.pr +'&pt=b&pd=' + this.date.getDate() + '&pw=' + this.date.getDay() + '&pv=' + this.date.getHours() + '&prr=' + adfox.ref + '&dl='+adfox.dl+'&pr1='+this.pr1+'&phid=AdFox_banner_'+this.pr1;
		for(var i = 0; i < adfox.banners.length;i++)
		{
			if(adfox.banners[i] == this){
				f=false;
				break;
			}
		}
		if(f)
		{
			adfox.banners.unshift(this);
			curIndex = adfox.banners.length-1;
		};
		if(this.ph == '' || this.ph == null && document.readyState != 'complete')
		{
			document.write('<div id="AdFox_banner_'+this.pr1+'"><\/div>');
			document.write('<div style="visibility:hidden; position:absolute;"><iframe id="AdFox_iframe_'+this.pr1+'" width=1 height=1 marginwidth=0 marginheight=0 scrolling=no frameborder=0><\/iframe><\/div>');
		}
		this.ph = document.getElementById('AdFox_banner_'+this.pr1);
		this.iframe = document.getElementById('AdFox_iframe_'+this.pr1);
		if(this.ph != null){
			this.link = this.link.replace(/&amp;/g,'&');
			this.link += this.secParams;
			this.getCode(curIndex);
		}
	}
}
//old async v3
function AdFox_SetLayerVis(spritename,state){
	document.getElementById(spritename).style.visibility=state;
}

function AdFox_Open(AF_id){
	AdFox_SetLayerVis('AdFox_DivBaseFlash_'+AF_id, "hidden");
	AdFox_SetLayerVis('AdFox_DivOverFlash_'+AF_id, "visible");
}

function AdFox_Close(AF_id){
	AdFox_SetLayerVis('AdFox_DivOverFlash_'+AF_id, "hidden");
	AdFox_SetLayerVis('AdFox_DivBaseFlash_'+AF_id, "visible");
}

function AdFox_getCodeScript(AF_n,AF_id,AF_src){
	var AF_doc;
	if(AF_n<10){

		try{
			if(document.all && !window.opera){
				AF_doc = window.frames['AdFox_iframe_'+AF_id].document;
			}else if(document.getElementById){
				AF_doc = document.getElementById('AdFox_iframe_'+AF_id).contentDocument;
			}
		}catch(e){}
		if(AF_doc && AF_doc.readyState=='complete'){
			var s = document.createElement('script');
			AF_doc.write('<html><head></head><body marginwidth="0" marginheight="0"></body></html>');
			if (typeof(window.chrome) != 'undefined' || navigator.userAgent.indexOf('iPhone') >= 0 || navigator.userAgent.indexOf('iPad') >= 0 || navigator.userAgent.indexOf('iPod') >= 0) {
				AF_doc.location.hash = 'AdFox_fix';
			}
			s.onerror = function() {
				AF_doc.close();
			};
			s.src = AF_src;
			if(AF_doc.getElementsByTagName('head')[0])
				AF_doc.getElementsByTagName('head')[0].appendChild(s);
			else
				AF_doc.appendChild(s);
		}else{
			setTimeout('AdFox_getCodeScript('+(++AF_n)+','+AF_id+',"'+AF_src+'");', 100);
		}
	}
}
function adfoxSdvigContent(banID, flashWidth, flashHeight){
	var obj = document.getElementById('adfoxBanner'+banID).style;
	if (flashWidth == '100%') obj.width = flashWidth;
	else obj.width = flashWidth + "px";
	if (flashHeight == '100%') obj.height = flashHeight;
	else obj.height = flashHeight + "px";
}
function adfoxVisibilityFlash(banName, flashWidth, flashHeight){
	var obj = document.getElementById(banName).style;
	if (flashWidth == '100%') obj.width = flashWidth;
	else obj.width = flashWidth + "px";
	if (flashHeight == '100%') obj.height = flashHeight;
	else obj.height = flashHeight + "px";
}
function adfoxStart(banID, FirShowFlNum, constVisFlashFir, sdvigContent, flash1Width, flash1Height, flash2Width, flash2Height){
	if (FirShowFlNum == 1) adfoxVisibilityFlash('adfoxFlash1'+banID, flash1Width, flash1Height);
	else if (FirShowFlNum == 2) {
		adfoxVisibilityFlash('adfoxFlash2'+banID, flash2Width, flash2Height);
		if (constVisFlashFir == 'yes') adfoxVisibilityFlash('adfoxFlash1'+banID, flash1Width, flash1Height);
		if (sdvigContent == 'yes') adfoxSdvigContent(banID, flash2Width, flash2Height);
		else adfoxSdvigContent(banID, flash1Width, flash1Height);
	}
}
function adfoxOpen(banID, constVisFlashFir, sdvigContent, flash2Width, flash2Height){
	var aEventOpenClose = new Image();
	var obj = document.getElementById("aEventOpen"+banID);
	if (obj) aEventOpenClose.src =  obj.title+'&rand='+Math.random()*1000000+'&prb='+Math.random()*1000000;
	adfoxVisibilityFlash('adfoxFlash2'+banID, flash2Width, flash2Height);
	if (constVisFlashFir != 'yes') adfoxVisibilityFlash('adfoxFlash1'+banID, 1, 1);
	if (sdvigContent == 'yes') adfoxSdvigContent(banID, flash2Width, flash2Height);
}
function adfoxClose(banID, constVisFlashFir, sdvigContent, flash1Width, flash1Height){
	var aEventOpenClose = new Image();
	var obj = document.getElementById("aEventClose"+banID);
	if (obj) aEventOpenClose.src =  obj.title+'&rand='+Math.random()*1000000+'&prb='+Math.random()*1000000;
	adfoxVisibilityFlash('adfoxFlash2'+banID, 1, 1);
	if (constVisFlashFir != 'yes') adfoxVisibilityFlash('adfoxFlash1'+banID, flash1Width, flash1Height);
	if (sdvigContent == 'yes') adfoxSdvigContent(banID, flash1Width, flash1Height);
}
/* AdRiver lib (begin) */
function adriver(ph, prm, defer) {
    var my = this, p = ph;
    if (this instanceof adriver) {
        if (typeof(p) == 'string')p = document.getElementById(ph);
        else ph = p.id;

        if (!p) {
            if (!adriver.isDomReady)adriver.onDomReady(function () {
                new adriver(ph, prm, defer)
            });
            return null
        }
        if (adriver(ph))return adriver(ph);

        my.p = p;
        my.defer = defer;
        my.prm = adriver.extend(prm, {ph: ph});

        my.loadCompleteQueue = new adriver.queue();
        my.domReadyQueue = new adriver.queue(adriver.isDomReady);

        adriver.initQueue.push(function () {
            my.init()
        });
        return adriver.items[ph] = my;
    } else {
        return ph ? adriver.items[ph] : adriver.items;
    }
}

adriver.prototype = {
    isLoading: 0,

    init: function () {
    },
    loadComplete: function () {
    },
    domReady: function () {
    },

    onLoadComplete: function (f) {
        var my = this;
        my.loadCompleteQueue.push(function () {
            f.call(my)
        });
        return my
    },
    onDomReady: function (f) {
        this.domReadyQueue.push(f);
        return this
    },
    reset: function () {
        this.loadCompleteQueue.flush();
        this.domReadyQueue.flush(adriver.isDomReady);
        return this
    }
}

adriver.extend = function () {
    for (var l = arguments[0], i = 1, len = arguments.length, r, j; i < len; i++) {
        r = arguments[i];
        for (j in r) {
            if (r.hasOwnProperty(j)) {
                if (r[j] instanceof Function) {
                    l[j] = r[j]
                }
                else if (r[j] instanceof Object) {
                    if (l[j]) {
                        adriver.extend(l[j], r[j])
                    } else {
                        l[j] = adriver.extend(r[j] instanceof Array ? [] : {}, r[j])
                    }
                }
                else {
                    l[j] = r[j]
                }
            }
        }
    }
    return l
}

adriver.extend(adriver, {
    version: '2.3.7',

    defaults: {tail256: escape(document.referrer || 'unknown')},
    items: {},
    options: {},
    plugins: {},
    pluginPath: {},

    redirectHost: '//ad.adriver.ru',
    defaultMirror: '//content.adriver.ru',

    loadScript: function (req) {
        try {
            var head = document.getElementsByTagName('head')[0],
                s = document.createElement('script');
            s.setAttribute('type', 'text/javascript');
            s.setAttribute('charset', 'windows-1251');
            s.setAttribute('src', req.split('![rnd]').join(Math.round(Math.random() * 9999999)));
            s.onreadystatechange = function () {
                if (/loaded|complete/.test(this.readyState)) {
                    head.removeChild(s);
                    s.onload = null
                }
            };
            s.onload = function () {
                head.removeChild(s)
            };
            head.insertBefore(s, head.firstChild);
        } catch (e) {
        }
    },

    isDomReady: false,
    onDomReady: function (f) {
        adriver.domReadyQueue.push(f)
    },
    onBeforeDomReady: function (f) {
        adriver.domReadyQueue.unshift(f)
    },
    domReady: function () {
        adriver.isDomReady = true;
        adriver.domReadyQueue.execute()
    },
    checkDomReady: function (f) {
        try {
            var d = document, oldOnload = window.onload;

            function ready() {
                if (adriver.isDomReady) {
                    return;
                }
                f()
            }

            if (d.addEventListener) {
                d.addEventListener("DOMContentLoaded", ready, false)
            }
            else if (document.attachEvent) {
                var doScrollCheck = function () {
                    try {
                        document.documentElement.doScroll("left");
                    } catch (e) {
                        setTimeout(doScrollCheck, 1);
                        return;
                    }
                    ready();
                }
                try {
                    toplevel = window.frameElement == null;
                } catch (e) {
                }
                if (document.documentElement.doScroll && toplevel) {
                    doScrollCheck()
                }
                var DOMContentLoaded = function () {
                    if (document.readyState === "complete") {
                        document.detachEvent("onreadystatechange", DOMContentLoaded);
                        ready();
                    }
                }
                document.attachEvent("onreadystatechange", DOMContentLoaded);
            }
            else if (/WebKit/i.test(navigator.userAgent)) {
                (function () {
                    /loaded|complete/.test(d.readyState) ? ready() : setTimeout(arguments.callee, 100)
                })()
            }
            if (window.addEventListener) {
                window.addEventListener('load', ready, false)
            }
            else if (window.attachEvent) {
                window.attachEvent('onload', ready)
            }
            else window.onload = function () {
                    if (oldOnload) {
                        oldOnload();
                    }
                    ready()
                }
        } catch (e) {
        }
    },

    onLoadComplete: function (f) {
        adriver.loadCompleteQueue.push(f);
        return adriver
    },
    loadComplete: function () {
        adriver.loadCompleteQueue.execute();
        return adriver
    },

    setDefaults: function (o) {
        adriver.extend(adriver.defaults, o)
    },
    setOptions: function (o) {
        adriver.extend(adriver.options, o)
    },
    setPluginPath: function (o) {
        adriver.extend(adriver.pluginPath, o)
    },

    queue: function (flag) {
        this.q = [];
        this.flag = flag ? true : false
    },
    Plugin: function (id) {
        if (this instanceof adriver.Plugin) {
            if (id && !adriver.plugins[id]) {
                this.id = id;
                this.q = new adriver.queue();
                adriver.plugins[id] = this;
            }
        }
        return adriver.plugins[id]
    }
});
adriver.sync = function (pair, N) {
    if (!adriver.syncFlag) {
        adriver.syncFlag = 1;
        var ar_duo = [];
        while (N--) {
            ar_duo[N] = N + 1
        }
        ;
        ar_duo.sort(function () {
            return 0.5 - Math.random()
        });
        adriver.synchArray = ar_duo;
    }
    return adriver.synchArray[(!pair || pair <= 0 ? 1 : pair) - 1];
}
adriver.queue.prototype = {
    push: function (f) {
        this.flag ? f() : this.q.push(f)
    },
    unshift: function (f) {
        this.flag ? f() : this.q.unshift(f)
    },
    execute: function (flag) {
        var f;
        var undefined;
        while (f = this.q.shift())f();
        if (flag == undefined)flag = true;
        this.flag = flag ? true : false
    },
    flush: function (flag) {
        this.q.length = 0;
        this.flag = flag ? true : false
    }
}
adriver.Plugin.prototype = {
    loadingStatus: 0,
    load: function () {
        this.loadingStatus = 1;
        adriver.loadScript((adriver.pluginPath[this.id.split('.').pop()] || (adriver.defaultMirror + '/plugins/')) + this.id + '.js')
    },
    loadComplete: function () {
        this.loadingStatus = 2;
        this.q.execute();
        return this
    },
    onLoadComplete: function (f) {
        this.q.push(f);
        return this
    }
}
adriver.Plugin.require = function () {
    var my = this, counter = 0;
    my.q = new adriver.queue();

    for (var i = 0, len = arguments.length, p; i < len; i++) {
        p = new adriver.Plugin(arguments[i]);
        if (p.loadingStatus != 2) {
            counter++;
            p.onLoadComplete(function () {
                if (counter-- == 1)my.q.execute();
            });
            if (!p.loadingStatus)p.load();
        }
    }
    if (!counter) {
        my.q.execute()
    }
}
adriver.Plugin.require.prototype.onLoadComplete = function (f) {
    this.q.push(f);
    return this
}

adriver.domReadyQueue = new adriver.queue();
adriver.loadCompleteQueue = new adriver.queue();
adriver.initQueue = new adriver.queue();

adriver.checkDomReady(adriver.domReady);

new adriver.Plugin.require('autoUpdate.adriver').onLoadComplete(function () {
    adriver.initQueue.execute()
});
/* AdRiver lib (end) */

/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){function n(b){b=f.json?JSON.stringify(b):String(b);return f.raw?b:encodeURIComponent(b)}function m(b,e){var a;if(f.raw)a=b;else a:{var d=b;0===d.indexOf('"')&&(d=d.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{d=decodeURIComponent(d.replace(l," "));a=f.json?JSON.parse(d):d;break a}catch(g){}a=void 0}return c.isFunction(e)?e(a):a}var l=/\+/g,f=c.cookie=function(b,e,a){if(void 0!==e&&!c.isFunction(e)){a=
    c.extend({},f.defaults,a);if("number"===typeof a.expires){var d=a.expires,g=a.expires=new Date;g.setTime(+g+864E5*d)}return document.cookie=[f.raw?b:encodeURIComponent(b),"=",n(e),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}a=b?void 0:{};for(var d=document.cookie?document.cookie.split("; "):[],g=0,l=d.length;g<l;g++){var h=d[g].split("="),k;k=h.shift();k=f.raw?k:decodeURIComponent(k);h=h.join("=");if(b&&
    b===k){a=m(h,e);break}b||void 0===(h=m(h))||(a[k]=h)}return a};f.defaults={};c.removeCookie=function(b,e){if(void 0===c.cookie(b))return!1;c.cookie(b,"",c.extend({},e,{expires:-1}));return!c.cookie(b)}});

/*
 SlidesJS 3.0.4 http://slidesjs.com
 (c) 2013 by Nathan Searles http://nathansearles.com
 Updated: June 26th, 2013
 Apache License: http://www.apache.org/licenses/LICENSE-2.0
 */
(function(){(function(e,t,n){var r,i,s;s="slidesjs";i={width:940,height:528,start:1,navigation:{active:!0,effect:"slide"},pagination:{active:!0,effect:"slide"},play:{active:!1,effect:"slide",interval:5e3,auto:!1,swap:!0,pauseOnHover:!1,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:!0}},callback:{loaded:function(){},start:function(){},complete:function(){}}};r=function(){function t(t,n){this.element=t;this.options=e.extend(!0,{},i,n);this._defaults=i;this._name=s;this.init()}return t}();r.prototype.init=function(){var n,r,i,s,o,u,a=this;n=e(this.element);this.data=e.data(this);e.data(this,"animating",!1);e.data(this,"total",n.children().not(".slidesjs-navigation",n).length);e.data(this,"current",this.options.start-1);e.data(this,"vendorPrefix",this._getVendorPrefix());if(typeof TouchEvent!="undefined"){e.data(this,"touch",!0);this.options.effect.slide.speed=this.options.effect.slide.speed/2}n.css({overflow:"hidden"});n.slidesContainer=n.children().not(".slidesjs-navigation",n).wrapAll("<div class='slidesjs-container'>",n).parent().css({overflow:"hidden",position:"relative"});e(".slidesjs-container",n).wrapInner("<div class='slidesjs-control'>",n).children();e(".slidesjs-control",n).css({position:"relative",left:0});e(".slidesjs-control",n).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"});e.each(e(".slidesjs-control",n).children(),function(t){var n;n=e(this);return n.attr("slidesjs-index",t)});if(this.data.touch){e(".slidesjs-control",n).on("touchstart",function(e){return a._touchstart(e)});e(".slidesjs-control",n).on("touchmove",function(e){return a._touchmove(e)});e(".slidesjs-control",n).on("touchend",function(e){return a._touchend(e)})}n.fadeIn(0);this.update();this.data.touch&&this._setuptouch();e(".slidesjs-control",n).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return e(this).css({zIndex:10})});if(this.options.navigation.active){o=e("<a>",{"class":"slidesjs-previous slidesjs-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(n);r=e("<a>",{"class":"slidesjs-next slidesjs-navigation",href:"#",title:"Next",text:"Next"}).appendTo(n)}e(".slidesjs-next",n).click(function(e){e.preventDefault();a.stop(!0);return a.next(a.options.navigation.effect)});e(".slidesjs-previous",n).click(function(e){e.preventDefault();a.stop(!0);return a.previous(a.options.navigation.effect)});if(this.options.play.active){s=e("<a>",{"class":"slidesjs-play slidesjs-navigation",href:"#",title:"Play",text:"Play"}).appendTo(n);u=e("<a>",{"class":"slidesjs-stop slidesjs-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(n);s.click(function(e){e.preventDefault();return a.play(!0)});u.click(function(e){e.preventDefault();return a.stop(!0)});this.options.play.swap&&u.css({display:"none"})}if(this.options.pagination.active){i=e("<ul>",{"class":"slidesjs-pagination"}).appendTo(n);e.each(new Array(this.data.total),function(t){var n,r;n=e("<li>",{"class":"slidesjs-pagination-item"}).appendTo(i);r=e("<a>",{href:"#","data-slidesjs-item":t,html:t+1}).appendTo(n);return r.click(function(t){t.preventDefault();a.stop(!0);return a.goto(e(t.currentTarget).attr("data-slidesjs-item")*1+1)})})}e(t).bind("resize",function(){return a.update()});this._setActive();this.options.play.auto&&this.play();return this.options.callback.loaded(this.options.start)};r.prototype._setActive=function(t){var n,r;n=e(this.element);this.data=e.data(this);r=t>-1?t:this.data.current;e(".active",n).removeClass("active");return e(".slidesjs-pagination li:eq("+r+") a",n).addClass("active")};r.prototype.update=function(){var t,n,r;t=e(this.element);this.data=e.data(this);e(".slidesjs-control",t).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0});r=t.width();n=this.options.height/this.options.width*r;this.options.width=r;this.options.height=n;return e(".slidesjs-control, .slidesjs-container",t).css({width:r,height:n})};r.prototype.next=function(t){var n;n=e(this.element);this.data=e.data(this);e.data(this,"direction","next");t===void 0&&(t=this.options.navigation.effect);return t==="fade"?this._fade():this._slide()};r.prototype.previous=function(t){var n;n=e(this.element);this.data=e.data(this);e.data(this,"direction","previous");t===void 0&&(t=this.options.navigation.effect);return t==="fade"?this._fade():this._slide()};r.prototype.goto=function(t){var n,r;n=e(this.element);this.data=e.data(this);r===void 0&&(r=this.options.pagination.effect);t>this.data.total?t=this.data.total:t<1&&(t=1);if(typeof t=="number")return r==="fade"?this._fade(t):this._slide(t);if(typeof t=="string"){if(t==="first")return r==="fade"?this._fade(0):this._slide(0);if(t==="last")return r==="fade"?this._fade(this.data.total):this._slide(this.data.total)}};r.prototype._setuptouch=function(){var t,n,r,i;t=e(this.element);this.data=e.data(this);i=e(".slidesjs-control",t);n=this.data.current+1;r=this.data.current-1;r<0&&(r=this.data.total-1);n>this.data.total-1&&(n=0);i.children(":eq("+n+")").css({display:"block",left:this.options.width});return i.children(":eq("+r+")").css({display:"block",left:-this.options.width})};r.prototype._touchstart=function(t){var n,r;n=e(this.element);this.data=e.data(this);r=t.originalEvent.touches[0];this._setuptouch();e.data(this,"touchtimer",Number(new Date));e.data(this,"touchstartx",r.pageX);e.data(this,"touchstarty",r.pageY);return t.stopPropagation()};r.prototype._touchend=function(t){var n,r,i,s,o,u,a,f=this;n=e(this.element);this.data=e.data(this);u=t.originalEvent.touches[0];s=e(".slidesjs-control",n);if(s.position().left>this.options.width*.5||s.position().left>this.options.width*.1&&Number(new Date)-this.data.touchtimer<250){e.data(this,"direction","previous");this._slide()}else if(s.position().left<-(this.options.width*.5)||s.position().left<-(this.options.width*.1)&&Number(new Date)-this.data.touchtimer<250){e.data(this,"direction","next");this._slide()}else{i=this.data.vendorPrefix;a=i+"Transform";r=i+"TransitionDuration";o=i+"TransitionTimingFunction";s[0].style[a]="translateX(0px)";s[0].style[r]=this.options.effect.slide.speed*.85+"ms"}s.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){i=f.data.vendorPrefix;a=i+"Transform";r=i+"TransitionDuration";o=i+"TransitionTimingFunction";s[0].style[a]="";s[0].style[r]="";return s[0].style[o]=""});return t.stopPropagation()};r.prototype._touchmove=function(t){var n,r,i,s,o;n=e(this.element);this.data=e.data(this);s=t.originalEvent.touches[0];r=this.data.vendorPrefix;i=e(".slidesjs-control",n);o=r+"Transform";e.data(this,"scrolling",Math.abs(s.pageX-this.data.touchstartx)<Math.abs(s.pageY-this.data.touchstarty));if(!this.data.animating&&!this.data.scrolling){t.preventDefault();this._setuptouch();i[0].style[o]="translateX("+(s.pageX-this.data.touchstartx)+"px)"}return t.stopPropagation()};r.prototype.play=function(t){var n,r,i,s=this;n=e(this.element);this.data=e.data(this);if(!this.data.playInterval){if(t){r=this.data.current;this.data.direction="next";this.options.play.effect==="fade"?this._fade():this._slide()}e.data(this,"playInterval",setInterval(function(){r=s.data.current;s.data.direction="next";return s.options.play.effect==="fade"?s._fade():s._slide()},this.options.play.interval));i=n;if(this.options.play.pauseOnHover){i.unbind();i.bind("mouseenter",function(){return s.stop()});i.bind("mouseleave",function(){return s.options.play.restartDelay?e.data(s,"restartDelay",setTimeout(function(){return s.play(!0)},s.options.play.restartDelay)):s.play()})}e.data(this,"playing",!0);e(".slidesjs-play",n).addClass("slidesjs-playing");if(this.options.play.swap){e(".slidesjs-play",n).hide();return e(".slidesjs-stop",n).show()}}};r.prototype.stop=function(t){var n;n=e(this.element);this.data=e.data(this);clearInterval(this.data.playInterval);this.options.play.pauseOnHover&&t&&e(".slidesjs-container",n).unbind();e.data(this,"playInterval",null);e.data(this,"playing",!1);e(".slidesjs-play",n).removeClass("slidesjs-playing");if(this.options.play.swap){e(".slidesjs-stop",n).hide();return e(".slidesjs-play",n).show()}};r.prototype._slide=function(t){var n,r,i,s,o,u,a,f,l,c,h=this;n=e(this.element);this.data=e.data(this);if(!this.data.animating&&t!==this.data.current+1){e.data(this,"animating",!0);r=this.data.current;if(t>-1){t-=1;c=t>r?1:-1;i=t>r?-this.options.width:this.options.width;o=t}else{c=this.data.direction==="next"?1:-1;i=this.data.direction==="next"?-this.options.width:this.options.width;o=r+c}o===-1&&(o=this.data.total-1);o===this.data.total&&(o=0);this._setActive(o);a=e(".slidesjs-control",n);t>-1&&a.children(":not(:eq("+r+"))").css({display:"none",left:0,zIndex:0});a.children(":eq("+o+")").css({display:"block",left:c*this.options.width,zIndex:10});this.options.callback.start(r+1);if(this.data.vendorPrefix){u=this.data.vendorPrefix;l=u+"Transform";s=u+"TransitionDuration";f=u+"TransitionTimingFunction";a[0].style[l]="translateX("+i+"px)";a[0].style[s]=this.options.effect.slide.speed+"ms";return a.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){a[0].style[l]="";a[0].style[s]="";a.children(":eq("+o+")").css({left:0});a.children(":eq("+r+")").css({display:"none",left:0,zIndex:0});e.data(h,"current",o);e.data(h,"animating",!1);a.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd");a.children(":not(:eq("+o+"))").css({display:"none",left:0,zIndex:0});h.data.touch&&h._setuptouch();return h.options.callback.complete(o+1)})}return a.stop().animate({left:i},this.options.effect.slide.speed,function(){a.css({left:0});a.children(":eq("+o+")").css({left:0});return a.children(":eq("+r+")").css({display:"none",left:0,zIndex:0},e.data(h,"current",o),e.data(h,"animating",!1),h.options.callback.complete(o+1))})}};r.prototype._fade=function(t){var n,r,i,s,o,u=this;n=e(this.element);this.data=e.data(this);if(!this.data.animating&&t!==this.data.current+1){e.data(this,"animating",!0);r=this.data.current;if(t){t-=1;o=t>r?1:-1;i=t}else{o=this.data.direction==="next"?1:-1;i=r+o}i===-1&&(i=this.data.total-1);i===this.data.total&&(i=0);this._setActive(i);s=e(".slidesjs-control",n);s.children(":eq("+i+")").css({display:"none",left:0,zIndex:10});this.options.callback.start(r+1);if(this.options.effect.fade.crossfade){s.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed);return s.children(":eq("+i+")").stop().fadeIn(this.options.effect.fade.speed,function(){s.children(":eq("+i+")").css({zIndex:0});e.data(u,"animating",!1);e.data(u,"current",i);return u.options.callback.complete(i+1)})}return s.children(":eq("+r+")").stop().fadeOut(this.options.effect.fade.speed,function(){s.children(":eq("+i+")").stop().fadeIn(u.options.effect.fade.speed,function(){return s.children(":eq("+i+")").css({zIndex:10})});e.data(u,"animating",!1);e.data(u,"current",i);return u.options.callback.complete(i+1)})}};r.prototype._getVendorPrefix=function(){var e,t,r,i,s;e=n.body||n.documentElement;r=e.style;i="transition";s=["Moz","Webkit","Khtml","O","ms"];i=i.charAt(0).toUpperCase()+i.substr(1);t=0;while(t<s.length){if(typeof r[s[t]+i]=="string")return s[t];t++}return!1};return e.fn[s]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+s))return e.data(this,"plugin_"+s,new r(this,t))})}})(jQuery,window,document)}).call(this);

/* https://raw.github.com/websanova/js-url/master/url.min.js */
/*! url - v1.8.6 - 2013-11-22 */
window.url=function(){function a(a){return!isNaN(parseFloat(a))&&isFinite(a)}return function(b,c){var d=c||window.location.toString();if(!b)return d;b=b.toString(),"//"===d.substring(0,2)?d="http:"+d:1===d.split("://").length&&(d="http://"+d),c=d.split("/");var e={auth:""},f=c[2].split("@");1===f.length?f=f[0].split(":"):(e.auth=f[0],f=f[1].split(":")),e.protocol=c[0],e.hostname=f[0],e.port=f[1]||("https"===e.protocol.split(":")[0].toLowerCase()?"443":"80"),e.pathname=(c.length>3?"/":"")+c.slice(3,c.length).join("/").split("?")[0].split("#")[0];var g=e.pathname;"/"===g.charAt(g.length-1)&&(g=g.substring(0,g.length-1));var h=e.hostname,i=h.split("."),j=g.split("/");if("hostname"===b)return h;if("domain"===b)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(h)?h:i.slice(-2).join(".");if("sub"===b)return i.slice(0,i.length-2).join(".");if("port"===b)return e.port;if("protocol"===b)return e.protocol.split(":")[0];if("auth"===b)return e.auth;if("user"===b)return e.auth.split(":")[0];if("pass"===b)return e.auth.split(":")[1]||"";if("path"===b)return e.pathname;if("."===b.charAt(0)){if(b=b.substring(1),a(b))return b=parseInt(b,10),i[0>b?i.length+b:b-1]||""}else{if(a(b))return b=parseInt(b,10),j[0>b?j.length+b:b]||"";if("file"===b)return j.slice(-1)[0];if("filename"===b)return j.slice(-1)[0].split(".")[0];if("fileext"===b)return j.slice(-1)[0].split(".")[1]||"";if("?"===b.charAt(0)||"#"===b.charAt(0)){var k=d,l=null;if("?"===b.charAt(0)?k=(k.split("?")[1]||"").split("#")[0]:"#"===b.charAt(0)&&(k=k.split("#")[1]||""),!b.charAt(1))return k;b=b.substring(1),k=k.split("&");for(var m=0,n=k.length;n>m;m++)if(l=k[m].split("="),l[0]===b)return l[1]||"";return null}}return""}}(),"undefined"!=typeof jQuery&&jQuery.extend({url:function(a,b){return window.url(a,b)}});

/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);
/*
 *
 * TableSorter 2.0 - Client-side table sorting with ease!
 * Version 2.0.3
 * @requires jQuery v1.2.3
 *
 * Copyright (c) 2007 Christian Bach
 * Examples and docs at: http://tablesorter.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/*!
 * TableSorter 2.10.8 min - Client-side table sorting with ease!
 * Copyright (c) 2007 Christian Bach
 */
!function(f){f.extend({tablesorter:new function(){function c(d){"undefined"!==typeof console&&"undefined"!==typeof console.log?console.log(d):alert(d)}function t(d,b){c(d+" ("+((new Date).getTime()-b.getTime())+"ms)")}function r(d,b,a){if(!b)return"";var e=d.config,c=e.textExtraction,l="",l="simple"===c?e.supportsTextContent?b.textContent:f(b).text():"function"===typeof c?c(b,d,a):"object"===typeof c&&c.hasOwnProperty(a)?c[a](b,d,a):e.supportsTextContent?b.textContent:f(b).text();return f.trim(l)} function j(d){var b=d.config,a=b.$tbodies=b.$table.children("tbody:not(."+b.cssInfoBlock+")"),e,u,l,p,n,k,h="";if(0===a.length)return b.debug?c("*Empty table!* Not building a parser cache"):"";a=a[0].rows;if(a[0]){e=[];u=a[0].cells.length;for(l=0;l<u;l++){p=b.$headers.filter(":not([colspan])");p=p.add(b.$headers.filter('[colspan="1"]')).filter('[data-column="'+l+'"]:last');n=b.headers[l];k=g.getParserById(g.getData(p,n,"sorter"));b.empties[l]=g.getData(p,n,"empty")||b.emptyTo||(b.emptyToBottom?"bottom": "top");b.strings[l]=g.getData(p,n,"string")||b.stringTo||"max";if(!k)a:{p=d;n=a;k=-1;for(var f=l,m=void 0,t=g.parsers.length,F=!1,D="",m=!0;""===D&&m;)k++,n[k]?(F=n[k].cells[f],D=r(p,F,f),p.config.debug&&c("Checking if value was empty on row "+k+", column: "+f+': "'+D+'"')):m=!1;for(;0<=--t;)if((m=g.parsers[t])&&"text"!==m.id&&m.is&&m.is(D,p,F)){k=m;break a}k=g.getParserById("text")}b.debug&&(h+="column:"+l+"; parser:"+k.id+"; string:"+b.strings[l]+"; empty: "+b.empties[l]+"\n");e.push(k)}}b.debug&& c(h);b.parsers=e}function v(d){var b=d.tBodies,a=d.config,e,u,l=a.parsers,p,n,k,h,q,m,H,j=[];a.cache={};if(!l)return a.debug?c("*Empty table!* Not building a cache"):"";a.debug&&(H=new Date);a.showProcessing&&g.isProcessing(d,!0);for(h=0;h<b.length;h++)if(a.cache[h]={row:[],normalized:[]},!f(b[h]).hasClass(a.cssInfoBlock)){e=b[h]&&b[h].rows.length||0;u=b[h].rows[0]&&b[h].rows[0].cells.length||0;for(n=0;n<e;++n)if(q=f(b[h].rows[n]),m=[],q.hasClass(a.cssChildRow))a.cache[h].row[a.cache[h].row.length- 1]=a.cache[h].row[a.cache[h].row.length-1].add(q);else{a.cache[h].row.push(q);for(k=0;k<u;++k)if(p=r(d,q[0].cells[k],k),p=l[k].format(p,d,q[0].cells[k],k),m.push(p),"numeric"===(l[k].type||"").toLowerCase())j[k]=Math.max(Math.abs(p)||0,j[k]||0);m.push(a.cache[h].normalized.length);a.cache[h].normalized.push(m)}a.cache[h].colMax=j}a.showProcessing&&g.isProcessing(d);a.debug&&t("Building cache for "+e+" rows",H)}function x(d,b){var a=d.config,e=d.tBodies,c=[],l=a.cache,p,n,k,h,q,m,r,j,D,s,v;if(l[0]){a.debug&& (v=new Date);for(j=0;j<e.length;j++)if(p=f(e[j]),p.length&&!p.hasClass(a.cssInfoBlock)){q=g.processTbody(d,p,!0);p=l[j].row;n=l[j].normalized;h=(k=n.length)?n[0].length-1:0;for(m=0;m<k;m++)if(s=n[m][h],c.push(p[s]),!a.appender||!a.removeRows){D=p[s].length;for(r=0;r<D;r++)q.append(p[s][r])}g.processTbody(d,q,!1)}a.appender&&a.appender(d,c);a.debug&&t("Rebuilt table",v);b||g.applyWidget(d);f(d).trigger("sortEnd",d)}}function A(d){var b=[],a={},e=0,u=f(d).find("thead:eq(0), tfoot").children("tr"),l, p,n,k,h,q,m,j,r,s;for(l=0;l<u.length;l++){h=u[l].cells;for(p=0;p<h.length;p++){k=h[p];q=k.parentNode.rowIndex;m=q+"-"+k.cellIndex;j=k.rowSpan||1;r=k.colSpan||1;"undefined"===typeof b[q]&&(b[q]=[]);for(n=0;n<b[q].length+1;n++)if("undefined"===typeof b[q][n]){s=n;break}a[m]=s;e=Math.max(s,e);f(k).attr({"data-column":s});for(n=q;n<q+j;n++){"undefined"===typeof b[n]&&(b[n]=[]);m=b[n];for(k=s;k<s+r;k++)m[k]="x"}}}d.config.columns=e;var v,B,x,A,z,y,C,w=d.config;w.headerList=[];w.headerContent=[];w.debug&& (C=new Date);A=w.cssIcon?'<i class="'+w.cssIcon+'"></i>':"";w.$headers=f(d).find(w.selectorHeaders).each(function(d){B=f(this);v=w.headers[d];w.headerContent[d]=this.innerHTML;z=w.headerTemplate.replace(/\{content\}/g,this.innerHTML).replace(/\{icon\}/g,A);w.onRenderTemplate&&(x=w.onRenderTemplate.apply(B,[d,z]))&&"string"===typeof x&&(z=x);this.innerHTML='<div class="tablesorter-header-inner">'+z+"</div>";w.onRenderHeader&&w.onRenderHeader.apply(B,[d]);this.column=a[this.parentNode.rowIndex+"-"+ this.cellIndex];var b=g.getData(B,v,"sortInitialOrder")||w.sortInitialOrder;this.order=/^d/i.test(b)||1===b?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=!1;y=g.getData(B,v,"lockedOrder")||!1;"undefined"!==typeof y&&!1!==y&&(this.order=this.lockedOrder=/^d/i.test(y)||1===y?[1,1,1]:[0,0,0]);B.addClass(w.cssHeader);w.headerList[d]=this;B.parent().addClass(w.cssHeaderRow);B.attr("tabindex",0)});E(d);w.debug&&(t("Built headers:",C),c(w.$headers))}function y(d,b,a){var e=d.config;e.$table.find(e.selectorRemove).remove(); j(d);v(d);G(e.$table,b,a)}function E(d){var b,a=d.config;a.$headers.each(function(d,c){b="false"===g.getData(c,a.headers[d],"sorter");c.sortDisabled=b;f(c)[b?"addClass":"removeClass"]("sorter-false")})}function C(d){var b,a,e,c=d.config,l=c.sortList,p=[c.cssAsc,c.cssDesc],g=f(d).find("tfoot tr").children().removeClass(p.join(" "));c.$headers.removeClass(p.join(" "));e=l.length;for(b=0;b<e;b++)if(2!==l[b][1]&&(d=c.$headers.not(".sorter-false").filter('[data-column="'+l[b][0]+'"]'+(1===e?":last":"")), d.length))for(a=0;a<d.length;a++)d[a].sortDisabled||(d.eq(a).addClass(p[l[b][1]]),g.length&&g.filter('[data-column="'+l[b][0]+'"]').eq(a).addClass(p[l[b][1]]))}function z(d){var b=0,a=d.config,e=a.sortList,c=e.length,l=d.tBodies.length,p,g,k,h,q,m,j,r,s;if(!a.serverSideSorting&&a.cache[0]){a.debug&&(p=new Date);for(k=0;k<l;k++)q=a.cache[k].colMax,s=(m=a.cache[k].normalized)&&m[0]?m[0].length-1:0,m.sort(function(l,p){for(g=0;g<c;g++){h=e[g][0];r=e[g][1];j=/n/i.test(a.parsers&&a.parsers[h]?a.parsers[h].type|| "":"")?"Numeric":"Text";j+=0===r?"":"Desc";/Numeric/.test(j)&&a.strings[h]&&(b="boolean"===typeof a.string[a.strings[h]]?(0===r?1:-1)*(a.string[a.strings[h]]?-1:1):a.strings[h]?a.string[a.strings[h]]||0:0);var k=f.tablesorter["sort"+j](d,l[h],p[h],h,q[h],b);if(k)return k}return l[s]-p[s]});a.debug&&t("Sorting on "+e.toString()+" and dir "+r+" time",p)}}function I(d,b){d.trigger("updateComplete");"function"===typeof b&&b(d[0])}function G(d,b,a){!1!==b&&!d[0].isProcessing?d.trigger("sorton",[d[0].config.sortList, function(){I(d,a)}]):I(d,a)}function J(d){var b=d.config,a=b.$table,e,c;b.$headers.find(b.selectorSort).add(b.$headers.filter(b.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(a,e){if(1!==(a.which||a.button)&&!/sort|keypress/.test(a.type)||"keypress"===a.type&&13!==a.which||"mouseup"===a.type&&!0!==e&&250<(new Date).getTime()-c)return!1;if("mousedown"=== a.type)return c=(new Date).getTime(),"INPUT"===a.target.tagName?"":!b.cancelSelection;b.delayInit&&!b.cache&&v(d);var n=(/TH|TD/.test(this.tagName)?f(this):f(this).parents("th, td").filter(":first"))[0];if(!n.sortDisabled){var k,h,q,m=d.config,j=!a[m.sortMultiSortKey],r=f(d);r.trigger("sortStart",d);n.count=a[m.sortResetKey]?2:(n.count+1)%(m.sortReset?3:2);m.sortRestart&&(h=n,m.$headers.each(function(){if(this!==h&&(j||!f(this).is("."+m.cssDesc+",."+m.cssAsc)))this.count=-1}));h=n.column;if(j){m.sortList= [];if(null!==m.sortForce){k=m.sortForce;for(q=0;q<k.length;q++)k[q][0]!==h&&m.sortList.push(k[q])}k=n.order[n.count];if(2>k&&(m.sortList.push([h,k]),1<n.colSpan))for(q=1;q<n.colSpan;q++)m.sortList.push([h+q,k])}else if(m.sortAppend&&1<m.sortList.length&&g.isValueInArray(m.sortAppend[0][0],m.sortList)&&m.sortList.pop(),g.isValueInArray(h,m.sortList))for(q=0;q<m.sortList.length;q++)n=m.sortList[q],k=m.headerList[n[0]],n[0]===h&&(n[1]=k.order[k.count],2===n[1]&&(m.sortList.splice(q,1),k.count=-1));else if(k= n.order[n.count],2>k&&(m.sortList.push([h,k]),1<n.colSpan))for(q=1;q<n.colSpan;q++)m.sortList.push([h+q,k]);if(null!==m.sortAppend){k=m.sortAppend;for(q=0;q<k.length;q++)k[q][0]!==h&&m.sortList.push(k[q])}r.trigger("sortBegin",d);setTimeout(function(){C(d);z(d);x(d)},1)}});b.cancelSelection&&b.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"});a.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter", function(a){a.stopPropagation();b.sortList=[];C(d);z(d);x(d)}).bind("updateAll.tablesorter",function(a,b,e){a.stopPropagation();g.refreshWidgets(d,!0,!0);g.restoreHeaders(d);A(d);J(d);y(d,b,e)}).bind("update.tablesorter updateRows.tablesorter",function(a,b,e){a.stopPropagation();E(d);y(d,b,e)}).bind("updateCell.tablesorter",function(e,c,g,k){e.stopPropagation();a.find(b.selectorRemove).remove();var h,q,m;h=a.find("tbody");e=h.index(f(c).parents("tbody").filter(":first"));var u=f(c).parents("tr").filter(":first"); c=f(c)[0];h.length&&0<=e&&(q=h.eq(e).find("tr").index(u),m=c.cellIndex,h=b.cache[e].normalized[q].length-1,b.cache[e].row[d.config.cache[e].normalized[q][h]]=u,b.cache[e].normalized[q][m]=b.parsers[m].format(r(d,c,m),d,c,m),G(a,g,k))}).bind("addRows.tablesorter",function(c,g,f,k){c.stopPropagation();var h=g.filter("tr").length,u=[],m=g[0].cells.length,t=a.find("tbody").index(g.parents("tbody").filter(":first"));b.parsers||j(d);for(c=0;c<h;c++){for(e=0;e<m;e++)u[e]=b.parsers[e].format(r(d,g[c].cells[e], e),d,g[c].cells[e],e);u.push(b.cache[t].row.length);b.cache[t].row.push([g[c]]);b.cache[t].normalized.push(u);u=[]}G(a,f,k)}).bind("sorton.tablesorter",function(b,e,c,g){b.stopPropagation();a.trigger("sortStart",this);var h,u,m,j=d.config;b=e||j.sortList;j.sortList=[];f.each(b,function(a,b){h=[parseInt(b[0],10),parseInt(b[1],10)];if(m=j.headerList[h[0]])j.sortList.push(h),u=f.inArray(h[1],m.order),m.count=0<=u?u:h[1]%(j.sortReset?3:2)});C(d);a.trigger("sortBegin",this);z(d);x(d,g);"function"===typeof c&& c(d)}).bind("appendCache.tablesorter",function(a,b,e){a.stopPropagation();x(d,e);"function"===typeof b&&b(d)}).bind("applyWidgetId.tablesorter",function(a,e){a.stopPropagation();g.getWidgetById(e).format(d,b,b.widgetOptions)}).bind("applyWidgets.tablesorter",function(a,b){a.stopPropagation();g.applyWidget(d,b)}).bind("refreshWidgets.tablesorter",function(a,b,e){a.stopPropagation();g.refreshWidgets(d,b,e)}).bind("destroy.tablesorter",function(a,b,e){a.stopPropagation();g.destroy(d,b,e)})}var g=this; g.version="2.10.8";g.parsers=[];g.widgets=[];g.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple", textSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"tablesorter",cssAsc:"tablesorter-headerAsc",cssChildRow:"tablesorter-childRow",cssDesc:"tablesorter-headerDesc",cssHeader:"tablesorter-header",cssHeaderRow:"tablesorter-headerRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",cssProcessing:"tablesorter-processing",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[], empties:{},strings:{},parsers:[]};g.log=c;g.benchmark=t;g.construct=function(d){return this.each(function(){if(!this.tHead||0===this.tBodies.length||!0===this.hasInitialized)return this.config&&this.config.debug?c("stopping initialization! No thead, tbody or tablesorter has already been initialized"):"";var b=f(this),a=this,e,u="",l=f.metadata;a.hasInitialized=!1;a.isProcessing=!0;a.config={};e=f.extend(!0,a.config,g.defaults,d);f.data(a,"tablesorter",e);e.debug&&f.data(a,"startoveralltimer",new Date); e.supportsTextContent="x"===f("<span>x</span>")[0].textContent;e.supportsDataObject=1.4<=parseFloat(f.fn.jquery);e.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:!0,bottom:!1};/tablesorter\-/.test(b.attr("class"))||(u=""!==e.theme?" tablesorter-"+e.theme:"");e.$table=b.addClass(e.tableClass+u);e.$tbodies=b.children("tbody:not(."+e.cssInfoBlock+")");A(a);if(a.config.widthFixed&&0===f(a).find("colgroup").length){var p=f("<colgroup>"),n=f(a).width();f(a.tBodies[0]).find("tr:first").children("td").each(function(){p.append(f("<col>").css("width", parseInt(1E3*(f(this).width()/n),10)/10+"%"))});f(a).prepend(p)}j(a);e.delayInit||v(a);J(a);e.supportsDataObject&&"undefined"!==typeof b.data().sortlist?e.sortList=b.data().sortlist:l&&(b.metadata()&&b.metadata().sortlist)&&(e.sortList=b.metadata().sortlist);g.applyWidget(a,!0);0<e.sortList.length?b.trigger("sorton",[e.sortList,{},!e.initWidgets]):e.initWidgets&&g.applyWidget(a);e.showProcessing&&b.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter", function(b){g.isProcessing(a,"sortBegin"===b.type)});a.hasInitialized=!0;a.isProcessing=!1;e.debug&&g.benchmark("Overall initialization time",f.data(a,"startoveralltimer"));b.trigger("tablesorter-initialized",a);"function"===typeof e.initialized&&e.initialized(a)})};g.isProcessing=function(d,b,a){d=f(d);var e=d[0].config;d=a||d.find("."+e.cssHeader);b?(0<e.sortList.length&&(d=d.filter(function(){return this.sortDisabled?!1:g.isValueInArray(parseFloat(f(this).attr("data-column")),e.sortList)})),d.addClass(e.cssProcessing)): d.removeClass(e.cssProcessing)};g.processTbody=function(d,b,a){if(a)return d.isProcessing=!0,b.before('<span class="tablesorter-savemyplace"/>'),a=f.fn.detach?b.detach():b.remove();a=f(d).find("span.tablesorter-savemyplace");b.insertAfter(a);a.remove();d.isProcessing=!1};g.clearTableBody=function(d){f(d)[0].config.$tbodies.empty()};g.restoreHeaders=function(d){var b=d.config;b.$table.find(b.selectorHeaders).each(function(a){f(this).find(".tablesorter-header-inner").length&&f(this).html(b.headerContent[a])})}; g.destroy=function(d,b,a){d=f(d)[0];if(d.hasInitialized){g.refreshWidgets(d,!0,!0);var e=f(d),c=d.config,l=e.find("thead:first"),p=l.find("tr."+c.cssHeaderRow).removeClass(c.cssHeaderRow),n=e.find("tfoot:first > tr").children("th, td");l.find("tr").not(p).remove();e.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")); c.$headers.add(n).removeClass(c.cssHeader+" "+c.cssAsc+" "+c.cssDesc).removeAttr("data-column");p.find(c.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter");g.restoreHeaders(d);!1!==b&&e.removeClass(c.tableClass+" tablesorter-"+c.theme);d.hasInitialized=!1;"function"===typeof a&&a(d)}};g.regex=[/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/, /^0x[0-9a-f]+$/i];g.sortText=function(d,b,a,e){if(b===a)return 0;var c=d.config,l=c.string[c.empties[e]||c.emptyTo],f=g.regex;if(""===b&&0!==l)return"boolean"===typeof l?l?-1:1:-l||-1;if(""===a&&0!==l)return"boolean"===typeof l?l?1:-1:l||1;if("function"===typeof c.textSorter)return c.textSorter(b,a,d,e);d=b.replace(f[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");e=a.replace(f[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");b=parseInt(b.match(f[2]),16)||1!==d.length&& b.match(f[1])&&Date.parse(b);if(a=parseInt(a.match(f[2]),16)||b&&a.match(f[1])&&Date.parse(a)||null){if(b<a)return-1;if(b>a)return 1}c=Math.max(d.length,e.length);for(b=0;b<c;b++){a=isNaN(d[b])?d[b]||0:parseFloat(d[b])||0;f=isNaN(e[b])?e[b]||0:parseFloat(e[b])||0;if(isNaN(a)!==isNaN(f))return isNaN(a)?1:-1;typeof a!==typeof f&&(a+="",f+="");if(a<f)return-1;if(a>f)return 1}return 0};g.sortTextDesc=function(d,b,a,e){if(b===a)return 0;var c=d.config,f=c.string[c.empties[e]||c.emptyTo];return""===b&& 0!==f?"boolean"===typeof f?f?-1:1:f||1:""===a&&0!==f?"boolean"===typeof f?f?1:-1:-f||-1:"function"===typeof c.textSorter?c.textSorter(a,b,d,e):g.sortText(d,a,b)};g.getTextValue=function(d,b,a){if(b){var c=d?d.length:0,g=b+a;for(b=0;b<c;b++)g+=d.charCodeAt(b);return a*g}return 0};g.sortNumeric=function(d,b,a,c,f,l){if(b===a)return 0;d=d.config;c=d.string[d.empties[c]||d.emptyTo];if(""===b&&0!==c)return"boolean"===typeof c?c?-1:1:-c||-1;if(""===a&&0!==c)return"boolean"===typeof c?c?1:-1:c||1;isNaN(b)&& (b=g.getTextValue(b,f,l));isNaN(a)&&(a=g.getTextValue(a,f,l));return b-a};g.sortNumericDesc=function(d,b,a,c,f,l){if(b===a)return 0;d=d.config;c=d.string[d.empties[c]||d.emptyTo];if(""===b&&0!==c)return"boolean"===typeof c?c?-1:1:c||1;if(""===a&&0!==c)return"boolean"===typeof c?c?1:-1:-c||-1;isNaN(b)&&(b=g.getTextValue(b,f,l));isNaN(a)&&(a=g.getTextValue(a,f,l));return a-b};g.characterEquivalents={a:"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5",A:"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5",c:"\u00e7\u0107\u010d", C:"\u00c7\u0106\u010c",e:"\u00e9\u00e8\u00ea\u00eb\u011b\u0119",E:"\u00c9\u00c8\u00ca\u00cb\u011a\u0118",i:"\u00ed\u00ec\u0130\u00ee\u00ef\u0131",I:"\u00cd\u00cc\u0130\u00ce\u00cf",o:"\u00f3\u00f2\u00f4\u00f5\u00f6",O:"\u00d3\u00d2\u00d4\u00d5\u00d6",ss:"\u00df",SS:"\u1e9e",u:"\u00fa\u00f9\u00fb\u00fc\u016f",U:"\u00da\u00d9\u00db\u00dc\u016e"};g.replaceAccents=function(d){var b,a="[",c=g.characterEquivalents;if(!g.characterRegex){g.characterRegexArray={};for(b in c)"string"===typeof b&&(a+=c[b],g.characterRegexArray[b]= RegExp("["+c[b]+"]","g"));g.characterRegex=RegExp(a+"]")}if(g.characterRegex.test(d))for(b in c)"string"===typeof b&&(d=d.replace(g.characterRegexArray[b],b));return d};g.isValueInArray=function(d,b){var a,c=b.length;for(a=0;a<c;a++)if(b[a][0]===d)return!0;return!1};g.addParser=function(d){var b,a=g.parsers.length,c=!0;for(b=0;b<a;b++)g.parsers[b].id.toLowerCase()===d.id.toLowerCase()&&(c=!1);c&&g.parsers.push(d)};g.getParserById=function(d){var b,a=g.parsers.length;for(b=0;b<a;b++)if(g.parsers[b].id.toLowerCase()=== d.toString().toLowerCase())return g.parsers[b];return!1};g.addWidget=function(d){g.widgets.push(d)};g.getWidgetById=function(d){var b,a,c=g.widgets.length;for(b=0;b<c;b++)if((a=g.widgets[b])&&a.hasOwnProperty("id")&&a.id.toLowerCase()===d.toLowerCase())return a};g.applyWidget=function(d,b){d=f(d)[0];var a=d.config,c=a.widgetOptions,j=[],l,p,n;a.debug&&(l=new Date);a.widgets.length&&(a.widgets=f.grep(a.widgets,function(b,d){return f.inArray(b,a.widgets)===d}),f.each(a.widgets||[],function(a,b){if((n= g.getWidgetById(b))&&n.id)n.priority||(n.priority=10),j[a]=n}),j.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),f.each(j,function(g,h){h&&(b?(h.hasOwnProperty("options")&&(c=d.config.widgetOptions=f.extend(!0,{},h.options,c)),h.hasOwnProperty("init")&&h.init(d,h,a,c)):!b&&h.hasOwnProperty("format")&&h.format(d,a,c,!1))}));a.debug&&(p=a.widgets.length,t("Completed "+(!0===b?"initializing ":"applying ")+p+" widget"+(1!==p?"s":""),l))};g.refreshWidgets=function(d,b, a){d=f(d)[0];var e,j=d.config,l=j.widgets,p=g.widgets,n=p.length;for(e=0;e<n;e++)if(p[e]&&p[e].id&&(b||0>f.inArray(p[e].id,l)))j.debug&&c("Refeshing widgets: Removing "+p[e].id),p[e].hasOwnProperty("remove")&&p[e].remove(d,j,j.widgetOptions);!0!==a&&g.applyWidget(d,b)};g.getData=function(d,b,a){var c="";d=f(d);var g,l;if(!d.length)return"";g=f.metadata?d.metadata():!1;l=" "+(d.attr("class")||"");"undefined"!==typeof d.data(a)||"undefined"!==typeof d.data(a.toLowerCase())?c+=d.data(a)||d.data(a.toLowerCase()): g&&"undefined"!==typeof g[a]?c+=g[a]:b&&"undefined"!==typeof b[a]?c+=b[a]:" "!==l&&l.match(" "+a+"-")&&(c=l.match(RegExp("\\s"+a+"-([\\w-]+)"))[1]||"");return f.trim(c)};g.formatFloat=function(c,b){if("string"!==typeof c||""===c)return c;var a;c=(b&&b.config?!1!==b.config.usNumberFormat:"undefined"!==typeof b?b:1)?c.replace(/,/g,""):c.replace(/[\s|\.]/g,"").replace(/,/g,".");/^\s*\([.\d]+\)/.test(c)&&(c=c.replace(/^\s*\(/,"-").replace(/\)/,""));a=parseFloat(c);return isNaN(a)?f.trim(c):a};g.isDigit= function(c){return isNaN(c)?/^[\-+(]?\d+[)]?$/.test(c.toString().replace(/[,.'"\s]/g,"")):!0}}});var j=f.tablesorter;f.fn.extend({tablesorter:j.construct});j.addParser({id:"text",is:function(){return!0},format:function(c,t){var r=t.config;c&&(c=f.trim(r.ignoreCase?c.toLocaleLowerCase():c),c=r.sortLocaleCompare?j.replaceAccents(c):c);return c},type:"text"});j.addParser({id:"digit",is:function(c){return j.isDigit(c)},format:function(c,t){var r=j.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),t);return c&& "number"===typeof r?r:c?f.trim(c&&t.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"});j.addParser({id:"currency",is:function(c){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((c||"").replace(/[,. ]/g,""))},format:function(c,t){var r=j.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),t);return c&&"number"===typeof r?r:c?f.trim(c&&t.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"});j.addParser({id:"ipAddress",is:function(c){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(c)}, format:function(c,f){var r,s=c?c.split("."):"",v="",x=s.length;for(r=0;r<x;r++)v+=("00"+s[r]).slice(-3);return c?j.formatFloat(v,f):c},type:"numeric"});j.addParser({id:"url",is:function(c){return/^(https?|ftp|file):\/\//.test(c)},format:function(c){return c?f.trim(c.replace(/(https?|ftp|file):\/\//,"")):c},type:"text"});j.addParser({id:"isoDate",is:function(c){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(c)},format:function(c,f){return c?j.formatFloat(""!==c?(new Date(c.replace(/-/g,"/"))).getTime()|| "":"",f):c},type:"numeric"});j.addParser({id:"percent",is:function(c){return/(\d\s*?%|%\s*?\d)/.test(c)&&15>c.length},format:function(c,f){return c?j.formatFloat(c.replace(/%/g,""),f):c},type:"numeric"});j.addParser({id:"usLongDate",is:function(c){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(c)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(c)},format:function(c,f){return c?j.formatFloat((new Date(c.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||"",f):c},type:"numeric"}); j.addParser({id:"shortDate",is:function(c){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((c||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(c,f,r,s){if(c){r=f.config;var v=r.headerList[s];s=v.dateFormat||j.getData(v,r.headers[s],"dateFormat")||r.dateFormat;c=c.replace(/\s+/g," ").replace(/[\-.,]/g,"/");"mmddyyyy"===s?c=c.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===s?c=c.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/, "$3/$2/$1"):"yyyymmdd"===s&&(c=c.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return c?j.formatFloat((new Date(c)).getTime()||"",f):c},type:"numeric"});j.addParser({id:"time",is:function(c){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(c)},format:function(c,f){return c?j.formatFloat((new Date("2000/01/01 "+c.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||"",f):c},type:"numeric"});j.addParser({id:"metadata",is:function(){return!1},format:function(c,j,r){c=j.config; c=!c.parserMetadataName?"sortValue":c.parserMetadataName;return f(r).metadata()[c]},type:"numeric"});j.addWidget({id:"zebra",priority:90,format:function(c,t,r){var s,v,x,A,y,E,C=RegExp(t.cssChildRow,"i"),z=t.$tbodies;t.debug&&(y=new Date);for(c=0;c<z.length;c++)s=z.eq(c),E=s.children("tr").length,1<E&&(x=0,s=s.children("tr:visible"),s.each(function(){v=f(this);C.test(this.className)||x++;A=0===x%2;v.removeClass(r.zebra[A?1:0]).addClass(r.zebra[A?0:1])}));t.debug&&j.benchmark("Applying Zebra widget", y)},remove:function(c,j,r){var s;j=j.$tbodies;var v=(r.zebra||["even","odd"]).join(" ");for(r=0;r<j.length;r++)s=f.tablesorter.processTbody(c,j.eq(r),!0),s.children().removeClass(v),f.tablesorter.processTbody(c,s,!1)}})}(jQuery);

/*
 * jQuery FlexSlider v2.5.0
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */!function($){$.flexslider=function(e,t){var a=$(e);a.vars=$.extend({},$.flexslider.defaults,t);var n=a.vars.namespace,i=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,s=("ontouchstart"in window||i||window.DocumentTouch&&document instanceof DocumentTouch)&&a.vars.touch,r="click touchend MSPointerUp keyup",o="",l,c="vertical"===a.vars.direction,d=a.vars.reverse,u=a.vars.itemWidth>0,v="fade"===a.vars.animation,p=""!==a.vars.asNavFor,m={},f=!0;$.data(e,"flexslider",a),m={init:function(){a.animating=!1,a.currentSlide=parseInt(a.vars.startAt?a.vars.startAt:0,10),isNaN(a.currentSlide)&&(a.currentSlide=0),a.animatingTo=a.currentSlide,a.atEnd=0===a.currentSlide||a.currentSlide===a.last,a.containerSelector=a.vars.selector.substr(0,a.vars.selector.search(" ")),a.slides=$(a.vars.selector,a),a.container=$(a.containerSelector,a),a.count=a.slides.length,a.syncExists=$(a.vars.sync).length>0,"slide"===a.vars.animation&&(a.vars.animation="swing"),a.prop=c?"top":"marginLeft",a.args={},a.manualPause=!1,a.stopped=!1,a.started=!1,a.startTimeout=null,a.transitions=!a.vars.video&&!v&&a.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(void 0!==e.style[t[n]])return a.pfx=t[n].replace("Perspective","").toLowerCase(),a.prop="-"+a.pfx+"-transform",!0;return!1}(),a.ensureAnimationEnd="",""!==a.vars.controlsContainer&&(a.controlsContainer=$(a.vars.controlsContainer).length>0&&$(a.vars.controlsContainer)),""!==a.vars.manualControls&&(a.manualControls=$(a.vars.manualControls).length>0&&$(a.vars.manualControls)),""!==a.vars.customDirectionNav&&(a.customDirectionNav=2===$(a.vars.customDirectionNav).length&&$(a.vars.customDirectionNav)),a.vars.randomize&&(a.slides.sort(function(){return Math.round(Math.random())-.5}),a.container.empty().append(a.slides)),a.doMath(),a.setup("init"),a.vars.controlNav&&m.controlNav.setup(),a.vars.directionNav&&m.directionNav.setup(),a.vars.keyboard&&(1===$(a.containerSelector).length||a.vars.multipleKeyboard)&&$(document).bind("keyup",function(e){var t=e.keyCode;if(!a.animating&&(39===t||37===t)){var n=39===t?a.getTarget("next"):37===t?a.getTarget("prev"):!1;a.flexAnimate(n,a.vars.pauseOnAction)}}),a.vars.mousewheel&&a.bind("mousewheel",function(e,t,n,i){e.preventDefault();var s=a.getTarget(0>t?"next":"prev");a.flexAnimate(s,a.vars.pauseOnAction)}),a.vars.pausePlay&&m.pausePlay.setup(),a.vars.slideshow&&a.vars.pauseInvisible&&m.pauseInvisible.init(),a.vars.slideshow&&(a.vars.pauseOnHover&&a.hover(function(){a.manualPlay||a.manualPause||a.pause()},function(){a.manualPause||a.manualPlay||a.stopped||a.play()}),a.vars.pauseInvisible&&m.pauseInvisible.isHidden()||(a.vars.initDelay>0?a.startTimeout=setTimeout(a.play,a.vars.initDelay):a.play())),p&&m.asNav.setup(),s&&a.vars.touch&&m.touch(),(!v||v&&a.vars.smoothHeight)&&$(window).bind("resize orientationchange focus",m.resize),a.find("img").attr("draggable","false"),setTimeout(function(){a.vars.start(a)},200)},asNav:{setup:function(){a.asNav=!0,a.animatingTo=Math.floor(a.currentSlide/a.move),a.currentItem=a.currentSlide,a.slides.removeClass(n+"active-slide").eq(a.currentItem).addClass(n+"active-slide"),i?(e._slider=a,a.slides.each(function(){var e=this;e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),e.addEventListener("MSGestureTap",function(e){e.preventDefault();var t=$(this),n=t.index();$(a.vars.asNavFor).data("flexslider").animating||t.hasClass("active")||(a.direction=a.currentItem<n?"next":"prev",a.flexAnimate(n,a.vars.pauseOnAction,!1,!0,!0))})})):a.slides.on(r,function(e){e.preventDefault();var t=$(this),i=t.index(),s=t.offset().left-$(a).scrollLeft();0>=s&&t.hasClass(n+"active-slide")?a.flexAnimate(a.getTarget("prev"),!0):$(a.vars.asNavFor).data("flexslider").animating||t.hasClass(n+"active-slide")||(a.direction=a.currentItem<i?"next":"prev",a.flexAnimate(i,a.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){a.manualControls?m.controlNav.setupManual():m.controlNav.setupPaging()},setupPaging:function(){var e="thumbnails"===a.vars.controlNav?"control-thumbs":"control-paging",t=1,i,s;if(a.controlNavScaffold=$('<ol class="'+n+"control-nav "+n+e+'"></ol>'),a.pagingCount>1)for(var l=0;l<a.pagingCount;l++){if(s=a.slides.eq(l),i="thumbnails"===a.vars.controlNav?'<img src="'+s.attr("data-thumb")+'"/>':"<a>"+t+"</a>","thumbnails"===a.vars.controlNav&&!0===a.vars.thumbCaptions){var c=s.attr("data-thumbcaption");""!==c&&void 0!==c&&(i+='<span class="'+n+'caption">'+c+"</span>")}a.controlNavScaffold.append("<li>"+i+"</li>"),t++}a.controlsContainer?$(a.controlsContainer).append(a.controlNavScaffold):a.append(a.controlNavScaffold),m.controlNav.set(),m.controlNav.active(),a.controlNavScaffold.delegate("a, img",r,function(e){if(e.preventDefault(),""===o||o===e.type){var t=$(this),i=a.controlNav.index(t);t.hasClass(n+"active")||(a.direction=i>a.currentSlide?"next":"prev",a.flexAnimate(i,a.vars.pauseOnAction))}""===o&&(o=e.type),m.setToClearWatchedEvent()})},setupManual:function(){a.controlNav=a.manualControls,m.controlNav.active(),a.controlNav.bind(r,function(e){if(e.preventDefault(),""===o||o===e.type){var t=$(this),i=a.controlNav.index(t);t.hasClass(n+"active")||(a.direction=i>a.currentSlide?"next":"prev",a.flexAnimate(i,a.vars.pauseOnAction))}""===o&&(o=e.type),m.setToClearWatchedEvent()})},set:function(){var e="thumbnails"===a.vars.controlNav?"img":"a";a.controlNav=$("."+n+"control-nav li "+e,a.controlsContainer?a.controlsContainer:a)},active:function(){a.controlNav.removeClass(n+"active").eq(a.animatingTo).addClass(n+"active")},update:function(e,t){a.pagingCount>1&&"add"===e?a.controlNavScaffold.append($("<li><a>"+a.count+"</a></li>")):1===a.pagingCount?a.controlNavScaffold.find("li").remove():a.controlNav.eq(t).closest("li").remove(),m.controlNav.set(),a.pagingCount>1&&a.pagingCount!==a.controlNav.length?a.update(t,e):m.controlNav.active()}},directionNav:{setup:function(){var e=$('<ul class="'+n+'direction-nav"><li class="'+n+'nav-prev"><a class="'+n+'prev" href="#">'+a.vars.prevText+'</a></li><li class="'+n+'nav-next"><a class="'+n+'next" href="#">'+a.vars.nextText+"</a></li></ul>");a.customDirectionNav?a.directionNav=a.customDirectionNav:a.controlsContainer?($(a.controlsContainer).append(e),a.directionNav=$("."+n+"direction-nav li a",a.controlsContainer)):(a.append(e),a.directionNav=$("."+n+"direction-nav li a",a)),m.directionNav.update(),a.directionNav.bind(r,function(e){e.preventDefault();var t;(""===o||o===e.type)&&(t=a.getTarget($(this).hasClass(n+"next")?"next":"prev"),a.flexAnimate(t,a.vars.pauseOnAction)),""===o&&(o=e.type),m.setToClearWatchedEvent()})},update:function(){var e=n+"disabled";1===a.pagingCount?a.directionNav.addClass(e).attr("tabindex","-1"):a.vars.animationLoop?a.directionNav.removeClass(e).removeAttr("tabindex"):0===a.animatingTo?a.directionNav.removeClass(e).filter("."+n+"prev").addClass(e).attr("tabindex","-1"):a.animatingTo===a.last?a.directionNav.removeClass(e).filter("."+n+"next").addClass(e).attr("tabindex","-1"):a.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=$('<div class="'+n+'pauseplay"><a></a></div>');a.controlsContainer?(a.controlsContainer.append(e),a.pausePlay=$("."+n+"pauseplay a",a.controlsContainer)):(a.append(e),a.pausePlay=$("."+n+"pauseplay a",a)),m.pausePlay.update(a.vars.slideshow?n+"pause":n+"play"),a.pausePlay.bind(r,function(e){e.preventDefault(),(""===o||o===e.type)&&($(this).hasClass(n+"pause")?(a.manualPause=!0,a.manualPlay=!1,a.pause()):(a.manualPause=!1,a.manualPlay=!0,a.play())),""===o&&(o=e.type),m.setToClearWatchedEvent()})},update:function(e){"play"===e?a.pausePlay.removeClass(n+"pause").addClass(n+"play").html(a.vars.playText):a.pausePlay.removeClass(n+"play").addClass(n+"pause").html(a.vars.pauseText)}},touch:function(){function t(t){t.stopPropagation(),a.animating?t.preventDefault():(a.pause(),e._gesture.addPointer(t.pointerId),w=0,p=c?a.h:a.w,f=Number(new Date),l=u&&d&&a.animatingTo===a.last?0:u&&d?a.limit-(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo:u&&a.currentSlide===a.last?a.limit:u?(a.itemW+a.vars.itemMargin)*a.move*a.currentSlide:d?(a.last-a.currentSlide+a.cloneOffset)*p:(a.currentSlide+a.cloneOffset)*p)}function n(t){t.stopPropagation();var a=t.target._slider;if(a){var n=-t.translationX,i=-t.translationY;return w+=c?i:n,m=w,y=c?Math.abs(w)<Math.abs(-n):Math.abs(w)<Math.abs(-i),t.detail===t.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){e._gesture.stop()}):void((!y||Number(new Date)-f>500)&&(t.preventDefault(),!v&&a.transitions&&(a.vars.animationLoop||(m=w/(0===a.currentSlide&&0>w||a.currentSlide===a.last&&w>0?Math.abs(w)/p+2:1)),a.setProps(l+m,"setTouch"))))}}function s(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!y&&null!==m){var a=d?-m:m,n=t.getTarget(a>0?"next":"prev");t.canAdvance(n)&&(Number(new Date)-f<550&&Math.abs(a)>50||Math.abs(a)>p/2)?t.flexAnimate(n,t.vars.pauseOnAction):v||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}r=null,o=null,m=null,l=null,w=0}}var r,o,l,p,m,f,g,h,S,y=!1,x=0,b=0,w=0;i?(e.style.msTouchAction="none",e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",t,!1),e._slider=a,e.addEventListener("MSGestureChange",n,!1),e.addEventListener("MSGestureEnd",s,!1)):(g=function(t){a.animating?t.preventDefault():(window.navigator.msPointerEnabled||1===t.touches.length)&&(a.pause(),p=c?a.h:a.w,f=Number(new Date),x=t.touches[0].pageX,b=t.touches[0].pageY,l=u&&d&&a.animatingTo===a.last?0:u&&d?a.limit-(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo:u&&a.currentSlide===a.last?a.limit:u?(a.itemW+a.vars.itemMargin)*a.move*a.currentSlide:d?(a.last-a.currentSlide+a.cloneOffset)*p:(a.currentSlide+a.cloneOffset)*p,r=c?b:x,o=c?x:b,e.addEventListener("touchmove",h,!1),e.addEventListener("touchend",S,!1))},h=function(e){x=e.touches[0].pageX,b=e.touches[0].pageY,m=c?r-b:r-x,y=c?Math.abs(m)<Math.abs(x-o):Math.abs(m)<Math.abs(b-o);var t=500;(!y||Number(new Date)-f>t)&&(e.preventDefault(),!v&&a.transitions&&(a.vars.animationLoop||(m/=0===a.currentSlide&&0>m||a.currentSlide===a.last&&m>0?Math.abs(m)/p+2:1),a.setProps(l+m,"setTouch")))},S=function(t){if(e.removeEventListener("touchmove",h,!1),a.animatingTo===a.currentSlide&&!y&&null!==m){var n=d?-m:m,i=a.getTarget(n>0?"next":"prev");a.canAdvance(i)&&(Number(new Date)-f<550&&Math.abs(n)>50||Math.abs(n)>p/2)?a.flexAnimate(i,a.vars.pauseOnAction):v||a.flexAnimate(a.currentSlide,a.vars.pauseOnAction,!0)}e.removeEventListener("touchend",S,!1),r=null,o=null,m=null,l=null},e.addEventListener("touchstart",g,!1))},resize:function(){!a.animating&&a.is(":visible")&&(u||a.doMath(),v?m.smoothHeight():u?(a.slides.width(a.computedW),a.update(a.pagingCount),a.setProps()):c?(a.viewport.height(a.h),a.setProps(a.h,"setTotal")):(a.vars.smoothHeight&&m.smoothHeight(),a.newSlides.width(a.computedW),a.setProps(a.computedW,"setTotal")))},smoothHeight:function(e){if(!c||v){var t=v?a:a.viewport;e?t.animate({height:a.slides.eq(a.animatingTo).height()},e):t.height(a.slides.eq(a.animatingTo).height())}},sync:function(e){var t=$(a.vars.sync).data("flexslider"),n=a.animatingTo;switch(e){case"animate":t.flexAnimate(n,a.vars.pauseOnAction,!1,!0);break;case"play":t.playing||t.asNav||t.play();break;case"pause":t.pause()}},uniqueID:function(e){return e.filter("[id]").add(e.find("[id]")).each(function(){var e=$(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=m.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){m.pauseInvisible.isHidden()?a.startTimeout?clearTimeout(a.startTimeout):a.pause():a.started?a.play():a.vars.initDelay>0?setTimeout(a.play,a.vars.initDelay):a.play()})}},isHidden:function(){var e=m.pauseInvisible.getHiddenProp();return e?document[e]:!1},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(l),l=setTimeout(function(){o=""},3e3)}},a.flexAnimate=function(e,t,i,r,o){if(a.vars.animationLoop||e===a.currentSlide||(a.direction=e>a.currentSlide?"next":"prev"),p&&1===a.pagingCount&&(a.direction=a.currentItem<e?"next":"prev"),!a.animating&&(a.canAdvance(e,o)||i)&&a.is(":visible")){if(p&&r){var l=$(a.vars.asNavFor).data("flexslider");if(a.atEnd=0===e||e===a.count-1,l.flexAnimate(e,!0,!1,!0,o),a.direction=a.currentItem<e?"next":"prev",l.direction=a.direction,Math.ceil((e+1)/a.visible)-1===a.currentSlide||0===e)return a.currentItem=e,a.slides.removeClass(n+"active-slide").eq(e).addClass(n+"active-slide"),!1;a.currentItem=e,a.slides.removeClass(n+"active-slide").eq(e).addClass(n+"active-slide"),e=Math.floor(e/a.visible)}if(a.animating=!0,a.animatingTo=e,t&&a.pause(),a.vars.before(a),a.syncExists&&!o&&m.sync("animate"),a.vars.controlNav&&m.controlNav.active(),u||a.slides.removeClass(n+"active-slide").eq(e).addClass(n+"active-slide"),a.atEnd=0===e||e===a.last,a.vars.directionNav&&m.directionNav.update(),e===a.last&&(a.vars.end(a),a.vars.animationLoop||a.pause()),v)s?(a.slides.eq(a.currentSlide).css({opacity:0,zIndex:1}),a.slides.eq(e).css({opacity:1,zIndex:2}),a.wrapup(f)):(a.slides.eq(a.currentSlide).css({zIndex:1}).animate({opacity:0},a.vars.animationSpeed,a.vars.easing),a.slides.eq(e).css({zIndex:2}).animate({opacity:1},a.vars.animationSpeed,a.vars.easing,a.wrapup));else{var f=c?a.slides.filter(":first").height():a.computedW,g,h,S;u?(g=a.vars.itemMargin,S=(a.itemW+g)*a.move*a.animatingTo,h=S>a.limit&&1!==a.visible?a.limit:S):h=0===a.currentSlide&&e===a.count-1&&a.vars.animationLoop&&"next"!==a.direction?d?(a.count+a.cloneOffset)*f:0:a.currentSlide===a.last&&0===e&&a.vars.animationLoop&&"prev"!==a.direction?d?0:(a.count+1)*f:d?(a.count-1-e+a.cloneOffset)*f:(e+a.cloneOffset)*f,a.setProps(h,"",a.vars.animationSpeed),a.transitions?(a.vars.animationLoop&&a.atEnd||(a.animating=!1,a.currentSlide=a.animatingTo),a.container.unbind("webkitTransitionEnd transitionend"),a.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(a.ensureAnimationEnd),a.wrapup(f)}),clearTimeout(a.ensureAnimationEnd),a.ensureAnimationEnd=setTimeout(function(){a.wrapup(f)},a.vars.animationSpeed+100)):a.container.animate(a.args,a.vars.animationSpeed,a.vars.easing,function(){a.wrapup(f)})}a.vars.smoothHeight&&m.smoothHeight(a.vars.animationSpeed)}},a.wrapup=function(e){v||u||(0===a.currentSlide&&a.animatingTo===a.last&&a.vars.animationLoop?a.setProps(e,"jumpEnd"):a.currentSlide===a.last&&0===a.animatingTo&&a.vars.animationLoop&&a.setProps(e,"jumpStart")),a.animating=!1,a.currentSlide=a.animatingTo,a.vars.after(a)},a.animateSlides=function(){!a.animating&&f&&a.flexAnimate(a.getTarget("next"))},a.pause=function(){clearInterval(a.animatedSlides),a.animatedSlides=null,a.playing=!1,a.vars.pausePlay&&m.pausePlay.update("play"),a.syncExists&&m.sync("pause")},a.play=function(){a.playing&&clearInterval(a.animatedSlides),a.animatedSlides=a.animatedSlides||setInterval(a.animateSlides,a.vars.slideshowSpeed),a.started=a.playing=!0,a.vars.pausePlay&&m.pausePlay.update("pause"),a.syncExists&&m.sync("play")},a.stop=function(){a.pause(),a.stopped=!0},a.canAdvance=function(e,t){var n=p?a.pagingCount-1:a.last;return t?!0:p&&a.currentItem===a.count-1&&0===e&&"prev"===a.direction?!0:p&&0===a.currentItem&&e===a.pagingCount-1&&"next"!==a.direction?!1:e!==a.currentSlide||p?a.vars.animationLoop?!0:a.atEnd&&0===a.currentSlide&&e===n&&"next"!==a.direction?!1:a.atEnd&&a.currentSlide===n&&0===e&&"next"===a.direction?!1:!0:!1},a.getTarget=function(e){return a.direction=e,"next"===e?a.currentSlide===a.last?0:a.currentSlide+1:0===a.currentSlide?a.last:a.currentSlide-1},a.setProps=function(e,t,n){var i=function(){var n=e?e:(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo,i=function(){if(u)return"setTouch"===t?e:d&&a.animatingTo===a.last?0:d?a.limit-(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo:a.animatingTo===a.last?a.limit:n;switch(t){case"setTotal":return d?(a.count-1-a.currentSlide+a.cloneOffset)*e:(a.currentSlide+a.cloneOffset)*e;case"setTouch":return d?e:e;case"jumpEnd":return d?e:a.count*e;case"jumpStart":return d?a.count*e:e;default:return e}}();return-1*i+"px"}();a.transitions&&(i=c?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",n=void 0!==n?n/1e3+"s":"0s",a.container.css("-"+a.pfx+"-transition-duration",n),a.container.css("transition-duration",n)),a.args[a.prop]=i,(a.transitions||void 0===n)&&a.container.css(a.args),a.container.css("transform",i)},a.setup=function(e){if(v)a.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===e&&(s?a.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+a.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(a.currentSlide).css({opacity:1,zIndex:2}):0==a.vars.fadeFirstSlide?a.slides.css({opacity:0,display:"block",zIndex:1}).eq(a.currentSlide).css({zIndex:2}).css({opacity:1}):a.slides.css({opacity:0,display:"block",zIndex:1}).eq(a.currentSlide).css({zIndex:2}).animate({opacity:1},a.vars.animationSpeed,a.vars.easing)),a.vars.smoothHeight&&m.smoothHeight();else{var t,i;"init"===e&&(a.viewport=$('<div class="'+n+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(a).append(a.container),a.cloneCount=0,a.cloneOffset=0,d&&(i=$.makeArray(a.slides).reverse(),a.slides=$(i),a.container.empty().append(a.slides))),a.vars.animationLoop&&!u&&(a.cloneCount=2,a.cloneOffset=1,"init"!==e&&a.container.find(".clone").remove(),a.container.append(m.uniqueID(a.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(m.uniqueID(a.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),a.newSlides=$(a.vars.selector,a),t=d?a.count-1-a.currentSlide+a.cloneOffset:a.currentSlide+a.cloneOffset,c&&!u?(a.container.height(200*(a.count+a.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){a.newSlides.css({display:"block"}),a.doMath(),a.viewport.height(a.h),a.setProps(t*a.h,"init")},"init"===e?100:0)):(a.container.width(200*(a.count+a.cloneCount)+"%"),a.setProps(t*a.computedW,"init"),setTimeout(function(){a.doMath(),a.newSlides.css({width:a.computedW,"float":"left",display:"block"}),a.vars.smoothHeight&&m.smoothHeight()},"init"===e?100:0))}u||a.slides.removeClass(n+"active-slide").eq(a.currentSlide).addClass(n+"active-slide"),a.vars.init(a)},a.doMath=function(){var e=a.slides.first(),t=a.vars.itemMargin,n=a.vars.minItems,i=a.vars.maxItems;a.w=void 0===a.viewport?a.width():a.viewport.width(),a.h=e.height(),a.boxPadding=e.outerWidth()-e.width(),u?(a.itemT=a.vars.itemWidth+t,a.minW=n?n*a.itemT:a.w,a.maxW=i?i*a.itemT-t:a.w,a.itemW=a.minW>a.w?(a.w-t*(n-1))/n:a.maxW<a.w?(a.w-t*(i-1))/i:a.vars.itemWidth>a.w?a.w:a.vars.itemWidth,a.visible=Math.floor(a.w/a.itemW),a.move=a.vars.move>0&&a.vars.move<a.visible?a.vars.move:a.visible,a.pagingCount=Math.ceil((a.count-a.visible)/a.move+1),a.last=a.pagingCount-1,a.limit=1===a.pagingCount?0:a.vars.itemWidth>a.w?a.itemW*(a.count-1)+t*(a.count-1):(a.itemW+t)*a.count-a.w-t):(a.itemW=a.w,a.pagingCount=a.count,a.last=a.count-1),a.computedW=a.itemW-a.boxPadding},a.update=function(e,t){a.doMath(),u||(e<a.currentSlide?a.currentSlide+=1:e<=a.currentSlide&&0!==e&&(a.currentSlide-=1),a.animatingTo=a.currentSlide),a.vars.controlNav&&!a.manualControls&&("add"===t&&!u||a.pagingCount>a.controlNav.length?m.controlNav.update("add"):("remove"===t&&!u||a.pagingCount<a.controlNav.length)&&(u&&a.currentSlide>a.last&&(a.currentSlide-=1,a.animatingTo-=1),m.controlNav.update("remove",a.last))),a.vars.directionNav&&m.directionNav.update()},a.addSlide=function(e,t){var n=$(e);a.count+=1,a.last=a.count-1,c&&d?void 0!==t?a.slides.eq(a.count-t).after(n):a.container.prepend(n):void 0!==t?a.slides.eq(t).before(n):a.container.append(n),a.update(t,"add"),a.slides=$(a.vars.selector+":not(.clone)",a),a.setup(),a.vars.added(a)},a.removeSlide=function(e){var t=isNaN(e)?a.slides.index($(e)):e;a.count-=1,a.last=a.count-1,isNaN(e)?$(e,a.slides).remove():c&&d?a.slides.eq(a.last).remove():a.slides.eq(e).remove(),a.doMath(),a.update(t,"remove"),a.slides=$(a.vars.selector+":not(.clone)",a),a.setup(),a.vars.removed(a)},m.init()},$(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},$.fn.flexslider=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){var t=$(this),a=e.selector?e.selector:".slides > li",n=t.find(a);1===n.length&&e.allowOneSlide===!0||0===n.length?(n.fadeIn(400),e.start&&e.start(t)):void 0===t.data("flexslider")&&new $.flexslider(this,e)});var t=$(this).data("flexslider");switch(e){case"play":t.play();break;case"pause":t.pause();break;case"stop":t.stop();break;case"next":t.flexAnimate(t.getTarget("next"),!0);break;case"prev":case"previous":t.flexAnimate(t.getTarget("prev"),!0);break;default:"number"==typeof e&&t.flexAnimate(e,!0)}}}(jQuery);
/*!
 * Bootstrap v3.3.2 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=de00013db422f428081b)
 * Config saved to config.json and https://gist.github.com/de00013db422f428081b
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new o(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.2",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var s=t(this),n=s.attr("data-target");n||(n=s.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var a=t(n);e&&e.preventDefault(),a.length||(a=s.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.button"),n="object"==typeof e&&e;s||o.data("bs.button",s=new i(this,n)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.2",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,s=o.is("input")?"val":"html",n=o.data();e+="Text",null==n.resetText&&o.data("resetText",o[s]()),setTimeout(t.proxy(function(){o[s](null==n[e]?this.options[e]:n[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.carousel"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:n.slide;s||o.data("bs.carousel",s=new i(this,n)),"number"==typeof e?s.to(e):a?s[a]():n.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var s="prev"==t?-1:1,n=(i+s)%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var s=this.$element.find(".item.active"),n=o||this.getItemForDirection(e,s),a=this.interval,r="next"==e?"left":"right",l=this;if(n.hasClass("active"))return this.sliding=!1;var h=n[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(n)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,s.addClass(r),n.addClass(r),s.one("bsTransitionEnd",function(){n.removeClass([e,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var s=function(i){var o,s=t(this),n=t(s.attr("data-target")||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=t.extend({},n.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),e.call(n,a),r&&n.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(n).each(function(){var o=t(this),s=i(o),n={relatedTarget:this};s.hasClass("open")&&(s.trigger(e=t.Event("hide.bs.dropdown",n)),e.isDefaultPrevented()||(o.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",n)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var s=".dropdown-backdrop",n='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.2",a.prototype.toggle=function(o){var s=t(this);if(!s.is(".disabled, :disabled")){var n=i(s),a=n.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(n.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var s=i(o),a=s.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&s.find(n).trigger("focus"),o.trigger("click");var r=" li:not(.divider):visible a",l=s.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var h=l.index(e.target);38==e.which&&h>0&&h--,40==e.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,a.prototype.toggle).on("keydown.bs.dropdown.data-api",n,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new i(this,a)),"string"==typeof e?n[e](o):a.show&&n.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.options.backdrop&&o.adjustBackdrop(),o.adjustDialog(),s&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});s?o.$element.find(".modal-dialog").one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(n)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},i.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),s=o.attr("href"),n=t(o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&i.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(n,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tooltip"),n="object"==typeof e&&e;(s||"destroy"!=e)&&(s||o.data("bs.tooltip",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),n=s.length;n--;){var a=s[n];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var s=this,n=this.tip(),a=this.getUID(this.type);this.setContent(),n.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var d=this.getPosition(),p=n[0].offsetWidth,c=n[0].offsetHeight;if(h){var f=r,u=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(u);r="bottom"==r&&d.bottom+c>g.bottom?"top":"top"==r&&d.top-c<g.top?"bottom":"right"==r&&d.right+p>g.width?"left":"left"==r&&d.left-p<g.left?"right":r,n.removeClass(f).addClass(r)}var v=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(v,r);var m=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),s=o[0].offsetWidth,n=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=n&&(e.top=e.top+n-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-s+l:2*d.top-n+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=s.hoverState&&n.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,n=this.tip(),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var n=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,a,r,n)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var s={top:0,left:0};if(!this.$viewport)return s;var n=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-n-a.scroll,l=e.top+n-a.scroll+o;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var h=e.left-n,d=e.left+n+i;h<a.left?s.left=a.left-h:d>a.width&&(s.left=a.left+a.width-d)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.popover"),n="object"==typeof e&&e;(s||"destroy"!=e)&&(s||o.data("bs.popover",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.2",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tab");s||o.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),n=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(n),e.trigger(a),!a.isDefaultPrevented()&&!n.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,o,s){function n(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var a=o.find("> .active"),r=s&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.affix"),n="object"==typeof e&&e;s||o.data("bs.affix",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.2",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var s=this.$target.scrollTop(),n=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=n.top?!1:"bottom":t-o>=s+a?!1:"bottom";var r=null==this.affixed,l=r?s:n.top,h=r?a:e;return null!=i&&i>=s?"top":null!=o&&l+h>=t-o?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,s=o.top,n=o.bottom,a=t("body").height();"object"!=typeof o&&(n=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof n&&(n=o.bottom(this.$element));var r=this.getState(a,e,s,n);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-n})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),n=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&n.toggle&&"show"==e&&(n.toggle=!1),s||i.data("bs.collapse",s=new o(this,n)),"string"==typeof e&&s[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.2",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(o.TRANSITION_DURATION):s.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var s=t(o);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var s=t(this);s.attr("data-target")||o.preventDefault();
var n=e(s),a=n.data("bs.collapse"),r=a?"toggle":t.extend({},s.data(),{trigger:this});i.call(n,r)})}(jQuery),+function(t){"use strict";function e(i,o){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),s=o.data("bs.scrollspy"),n="object"==typeof i&&i;s||o.data("bs.scrollspy",s=new e(this,n)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var o=this;this.$body.find(this.selector).map(function(){var o=t(this),s=o.data("target")||o.attr("href"),n=/^#./.test(s)&&t(s);return n&&n.length&&n.is(":visible")&&[[n[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,n=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=n[n.length-1])&&this.activate(t);if(a&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)a!=n[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(n[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);
/*!
 * Datepicker for Bootstrap v1.5.0-dev (https://github.com/eternicode/bootstrap-datepicker)
 *
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */(function($, undefined){

    function UTCDate(){
        return new Date(Date.UTC.apply(Date, arguments));
    }
    function UTCToday(){
        var today = new Date();
        return UTCDate(today.getFullYear(), today.getMonth(), today.getDate());
    }
    function isUTCEquals(date1, date2) {
        return (
        date1.getUTCFullYear() === date2.getUTCFullYear() &&
        date1.getUTCMonth() === date2.getUTCMonth() &&
        date1.getUTCDate() === date2.getUTCDate()
        );
    }
    function alias(method){
        return function(){
            return this[method].apply(this, arguments);
        };
    }

    var DateArray = (function(){
        var extras = {
            get: function(i){
                return this.slice(i)[0];
            },
            contains: function(d){
                // Array.indexOf is not cross-browser;
                // $.inArray doesn't work with Dates
                var val = d && d.valueOf();
                for (var i=0, l=this.length; i < l; i++)
                    if (this[i].valueOf() === val)
                        return i;
                return -1;
            },
            remove: function(i){
                this.splice(i,1);
            },
            replace: function(new_array){
                if (!new_array)
                    return;
                if (!$.isArray(new_array))
                    new_array = [new_array];
                this.clear();
                this.push.apply(this, new_array);
            },
            clear: function(){
                this.length = 0;
            },
            copy: function(){
                var a = new DateArray();
                a.replace(this);
                return a;
            }
        };

        return function(){
            var a = [];
            a.push.apply(a, arguments);
            $.extend(a, extras);
            return a;
        };
    })();


    // Picker object

    var Datepicker = function(element, options){
        this._process_options(options);

        this.dates = new DateArray();
        this.viewDate = this.o.defaultViewDate;
        this.focusDate = null;

        this.element = $(element);
        this.isInline = false;
        this.isInput = this.element.is('input');
        this.component = this.element.hasClass('date') ? this.element.find('.add-on, .input-group-addon, .btn') : false;
        this.hasInput = this.component && this.element.find('input').length;
        if (this.component && this.component.length === 0)
            this.component = false;

        this.picker = $(DPGlobal.template);
        this._buildEvents();
        this._attachEvents();

        if (this.isInline){
            this.picker.addClass('datepicker-inline').appendTo(this.element);
        }
        else {
            this.picker.addClass('datepicker-dropdown dropdown-menu');
        }

        if (this.o.rtl){
            this.picker.addClass('datepicker-rtl');
        }

        this.viewMode = this.o.startView;

        if (this.o.calendarWeeks)
            this.picker.find('tfoot .today, tfoot .clear')
                .attr('colspan', function(i, val){
                    return parseInt(val) + 1;
                });

        this._allow_update = false;

        this.setStartDate(this._o.startDate);
        this.setEndDate(this._o.endDate);
        this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);
        this.setDatesDisabled(this.o.datesDisabled);

        this.fillDow();
        this.fillMonths();

        this._allow_update = true;

        this.update();
        this.showMode();

        if (this.isInline){
            this.show();
        }
    };

    Datepicker.prototype = {
        constructor: Datepicker,

        _process_options: function(opts){
            // Store raw options for reference
            this._o = $.extend({}, this._o, opts);
            // Processed options
            var o = this.o = $.extend({}, this._o);

            // Check if "de-DE" style date is available, if not language should
            // fallback to 2 letter code eg "de"
            var lang = o.language;
            if (!dates[lang]){
                lang = lang.split('-')[0];
                if (!dates[lang])
                    lang = defaults.language;
            }
            o.language = lang;

            switch (o.startView){
                case 2:
                case 'decade':
                    o.startView = 2;
                    break;
                case 1:
                case 'year':
                    o.startView = 1;
                    break;
                default:
                    o.startView = 0;
            }

            switch (o.minViewMode){
                case 1:
                case 'months':
                    o.minViewMode = 1;
                    break;
                case 2:
                case 'years':
                    o.minViewMode = 2;
                    break;
                default:
                    o.minViewMode = 0;
            }

            o.startView = Math.max(o.startView, o.minViewMode);

            // true, false, or Number > 0
            if (o.multidate !== true){
                o.multidate = Number(o.multidate) || false;
                if (o.multidate !== false)
                    o.multidate = Math.max(0, o.multidate);
            }
            o.multidateSeparator = String(o.multidateSeparator);

            o.weekStart %= 7;
            o.weekEnd = ((o.weekStart + 6) % 7);

            var format = DPGlobal.parseFormat(o.format);
            if (o.startDate !== -Infinity){
                if (!!o.startDate){
                    if (o.startDate instanceof Date)
                        o.startDate = this._local_to_utc(this._zero_time(o.startDate));
                    else
                        o.startDate = DPGlobal.parseDate(o.startDate, format, o.language);
                }
                else {
                    o.startDate = -Infinity;
                }
            }
            if (o.endDate !== Infinity){
                if (!!o.endDate){
                    if (o.endDate instanceof Date)
                        o.endDate = this._local_to_utc(this._zero_time(o.endDate));
                    else
                        o.endDate = DPGlobal.parseDate(o.endDate, format, o.language);
                }
                else {
                    o.endDate = Infinity;
                }
            }

            o.daysOfWeekDisabled = o.daysOfWeekDisabled||[];
            if (!$.isArray(o.daysOfWeekDisabled))
                o.daysOfWeekDisabled = o.daysOfWeekDisabled.split(/[,\s]*/);
            o.daysOfWeekDisabled = $.map(o.daysOfWeekDisabled, function(d){
                return parseInt(d, 10);
            });

            o.datesDisabled = o.datesDisabled||[];
            if (!$.isArray(o.datesDisabled)) {
                var datesDisabled = [];
                datesDisabled.push(DPGlobal.parseDate(o.datesDisabled, format, o.language));
                o.datesDisabled = datesDisabled;
            }
            o.datesDisabled = $.map(o.datesDisabled,function(d){
                return DPGlobal.parseDate(d, format, o.language);
            });

            var plc = String(o.orientation).toLowerCase().split(/\s+/g),
                _plc = o.orientation.toLowerCase();
            plc = $.grep(plc, function(word){
                return /^auto|left|right|top|bottom$/.test(word);
            });
            o.orientation = {x: 'auto', y: 'auto'};
            if (!_plc || _plc === 'auto')
                ; // no action
            else if (plc.length === 1){
                switch (plc[0]){
                    case 'top':
                    case 'bottom':
                        o.orientation.y = plc[0];
                        break;
                    case 'left':
                    case 'right':
                        o.orientation.x = plc[0];
                        break;
                }
            }
            else {
                _plc = $.grep(plc, function(word){
                    return /^left|right$/.test(word);
                });
                o.orientation.x = _plc[0] || 'auto';

                _plc = $.grep(plc, function(word){
                    return /^top|bottom$/.test(word);
                });
                o.orientation.y = _plc[0] || 'auto';
            }
            if (o.defaultViewDate) {
                var year = o.defaultViewDate.year || new Date().getFullYear();
                var month = o.defaultViewDate.month || 0;
                var day = o.defaultViewDate.day || 1;
                o.defaultViewDate = UTCDate(year, month, day);
            } else {
                o.defaultViewDate = UTCToday();
            }
            o.showOnFocus = o.showOnFocus !== undefined ? o.showOnFocus : true;
        },
        _events: [],
        _secondaryEvents: [],
        _applyEvents: function(evs){
            for (var i=0, el, ch, ev; i < evs.length; i++){
                el = evs[i][0];
                if (evs[i].length === 2){
                    ch = undefined;
                    ev = evs[i][1];
                }
                else if (evs[i].length === 3){
                    ch = evs[i][1];
                    ev = evs[i][2];
                }
                el.on(ev, ch);
            }
        },
        _unapplyEvents: function(evs){
            for (var i=0, el, ev, ch; i < evs.length; i++){
                el = evs[i][0];
                if (evs[i].length === 2){
                    ch = undefined;
                    ev = evs[i][1];
                }
                else if (evs[i].length === 3){
                    ch = evs[i][1];
                    ev = evs[i][2];
                }
                el.off(ev, ch);
            }
        },
        _buildEvents: function(){
            var events = {
                keyup: $.proxy(function(e){
                    if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)
                        this.update();
                }, this),
                keydown: $.proxy(this.keydown, this),
                paste: $.proxy(this.paste, this)
            };

            if (this.o.showOnFocus === true) {
                events.focus = $.proxy(this.show, this);
            }

            if (this.isInput) { // single input
                this._events = [
                    [this.element, events]
                ];
            }
            else if (this.component && this.hasInput) { // component: input + button
                this._events = [
                    // For components that are not readonly, allow keyboard nav
                    [this.element.find('input'), events],
                    [this.component, {
                        click: $.proxy(this.show, this)
                    }]
                ];
            }
            else if (this.element.is('div')){  // inline datepicker
                this.isInline = true;
            }
            else {
                this._events = [
                    [this.element, {
                        click: $.proxy(this.show, this)
                    }]
                ];
            }
            this._events.push(
                // Component: listen for blur on element descendants
                [this.element, '*', {
                    blur: $.proxy(function(e){
                        this._focused_from = e.target;
                    }, this)
                }],
                // Input: listen for blur on element
                [this.element, {
                    blur: $.proxy(function(e){
                        this._focused_from = e.target;
                    }, this)
                }]
            );

            if (this.o.immediateUpdates) {
                // Trigger input updates immediately on changed year/month
                this._events.push([this.element, {
                    'changeYear changeMonth': $.proxy(function(e){
                        this.update(e.date);
                    }, this)
                }]);
            }

            this._secondaryEvents = [
                [this.picker, {
                    click: $.proxy(this.click, this)
                }],
                [$(window), {
                    resize: $.proxy(this.place, this)
                }],
                [$(document), {
                    mousedown: $.proxy(function(e){
                        // Clicked outside the datepicker, hide it
                        if (!(
                            this.element.is(e.target) ||
                            this.element.find(e.target).length ||
                            this.picker.is(e.target) ||
                            this.picker.find(e.target).length
                            )){
                            $(this.picker).hide();
                        }
                    }, this)
                }]
            ];
        },
        _attachEvents: function(){
            this._detachEvents();
            this._applyEvents(this._events);
        },
        _detachEvents: function(){
            this._unapplyEvents(this._events);
        },
        _attachSecondaryEvents: function(){
            this._detachSecondaryEvents();
            this._applyEvents(this._secondaryEvents);
        },
        _detachSecondaryEvents: function(){
            this._unapplyEvents(this._secondaryEvents);
        },
        _trigger: function(event, altdate){
            var date = altdate || this.dates.get(-1),
                local_date = this._utc_to_local(date);

            this.element.trigger({
                type: event,
                date: local_date,
                dates: $.map(this.dates, this._utc_to_local),
                format: $.proxy(function(ix, format){
                    if (arguments.length === 0){
                        ix = this.dates.length - 1;
                        format = this.o.format;
                    }
                    else if (typeof ix === 'string'){
                        format = ix;
                        ix = this.dates.length - 1;
                    }
                    format = format || this.o.format;
                    var date = this.dates.get(ix);
                    return DPGlobal.formatDate(date, format, this.o.language);
                }, this)
            });
        },

        show: function(){
            if (this.element.attr('readonly') && this.o.enableOnReadonly === false)
                return;
            if (!this.isInline)
                this.picker.appendTo(this.o.container);
            this.place();
            this.picker.show();
            this._attachSecondaryEvents();
            this._trigger('show');
            if ((window.navigator.msMaxTouchPoints || 'ontouchstart' in document) && this.o.disableTouchKeyboard) {
                $(this.element).blur();
            }
            return this;
        },

        hide: function(){
            if (this.isInline)
                return this;
            if (!this.picker.is(':visible'))
                return this;
            this.focusDate = null;
            this.picker.hide().detach();
            this._detachSecondaryEvents();
            this.viewMode = this.o.startView;
            this.showMode();

            if (
                this.o.forceParse &&
                (
                this.isInput && this.element.val() ||
                this.hasInput && this.element.find('input').val()
                )
            )
                this.setValue();
            this._trigger('hide');
            return this;
        },

        remove: function(){
            this.hide();
            this._detachEvents();
            this._detachSecondaryEvents();
            this.picker.remove();
            delete this.element.data().datepicker;
            if (!this.isInput){
                delete this.element.data().date;
            }
            return this;
        },

        paste: function(evt){
            var dateString;
            if (evt.originalEvent.clipboardData && evt.originalEvent.clipboardData.types
                && $.inArray('text/plain', evt.originalEvent.clipboardData.types) !== -1) {
                dateString = evt.originalEvent.clipboardData.getData('text/plain');
            }
            else if (window.clipboardData) {
                dateString = window.clipboardData.getData('Text');
            }
            else {
                return;
            }
            this.setDate(dateString);
            this.update();
            evt.preventDefault();
        },

        _utc_to_local: function(utc){
            return utc && new Date(utc.getTime() + (utc.getTimezoneOffset()*60000));
        },
        _local_to_utc: function(local){
            return local && new Date(local.getTime() - (local.getTimezoneOffset()*60000));
        },
        _zero_time: function(local){
            return local && new Date(local.getFullYear(), local.getMonth(), local.getDate());
        },
        _zero_utc_time: function(utc){
            return utc && new Date(Date.UTC(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate()));
        },

        getDates: function(){
            return $.map(this.dates, this._utc_to_local);
        },

        getUTCDates: function(){
            return $.map(this.dates, function(d){
                return new Date(d);
            });
        },

        getDate: function(){
            return this._utc_to_local(this.getUTCDate());
        },

        getUTCDate: function(){
            var selected_date = this.dates.get(-1);
            if (typeof selected_date !== 'undefined') {
                return new Date(selected_date);
            } else {
                return null;
            }
        },

        clearDates: function(){
            var element;
            if (this.isInput) {
                element = this.element;
            } else if (this.component) {
                element = this.element.find('input');
            }

            if (element) {
                element.val('').change();
            }

            this.update();
            this._trigger('changeDate');

            if (this.o.autoclose) {
                this.hide();
            }
        },
        setDates: function(){
            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;
            this.update.apply(this, args);
            this._trigger('changeDate');
            this.setValue();
            return this;
        },

        setUTCDates: function(){
            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;
            this.update.apply(this, $.map(args, this._utc_to_local));
            this._trigger('changeDate');
            this.setValue();
            return this;
        },

        setDate: alias('setDates'),
        setUTCDate: alias('setUTCDates'),

        setValue: function(){
            var formatted = this.getFormattedDate();
            if (!this.isInput){
                if (this.component){
                    this.element.find('input').val(formatted).change();
                }
            }
            else {
                this.element.val(formatted).change();
            }
            return this;
        },

        getFormattedDate: function(format){
            if (format === undefined)
                format = this.o.format;

            var lang = this.o.language;
            return $.map(this.dates, function(d){
                return DPGlobal.formatDate(d, format, lang);
            }).join(this.o.multidateSeparator);
        },

        setStartDate: function(startDate){
            this._process_options({startDate: startDate});
            this.update();
            this.updateNavArrows();
            return this;
        },

        setEndDate: function(endDate){
            this._process_options({endDate: endDate});
            this.update();
            this.updateNavArrows();
            return this;
        },

        setDaysOfWeekDisabled: function(daysOfWeekDisabled){
            this._process_options({daysOfWeekDisabled: daysOfWeekDisabled});
            this.update();
            this.updateNavArrows();
            return this;
        },

        setDatesDisabled: function(datesDisabled){
            this._process_options({datesDisabled: datesDisabled});
            this.update();
            this.updateNavArrows();
        },

        place: function(){
            if (this.isInline)
                return this;
            var calendarWidth = this.picker.outerWidth(),
                calendarHeight = this.picker.outerHeight(),
                visualPadding = 10,
                windowWidth = $(this.o.container).width(),
                windowHeight = $(this.o.container).height(),
                scrollTop = $(this.o.container).scrollTop(),
                appendOffset = $(this.o.container).offset();

            var parentsZindex = [];
            this.element.parents().each(function(){
                var itemZIndex = $(this).css('z-index');
                if (itemZIndex !== 'auto' && itemZIndex !== 0) parentsZindex.push(parseInt(itemZIndex));
            });
            var zIndex = Math.max.apply(Math, parentsZindex) + 10;
            var offset = this.component ? this.component.parent().offset() : this.element.offset();
            var height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(false);
            var width = this.component ? this.component.outerWidth(true) : this.element.outerWidth(false);
            var left = offset.left - appendOffset.left,
                top = offset.top - appendOffset.top;

            this.picker.removeClass(
                'datepicker-orient-top datepicker-orient-bottom '+
                'datepicker-orient-right datepicker-orient-left'
            );

            if (this.o.orientation.x !== 'auto'){
                this.picker.addClass('datepicker-orient-' + this.o.orientation.x);
                if (this.o.orientation.x === 'right')
                    left -= calendarWidth - width;
            }
            // auto x orientation is best-placement: if it crosses a window
            // edge, fudge it sideways
            else {
                if (offset.left < 0) {
                    // component is outside the window on the left side. Move it into visible range
                    this.picker.addClass('datepicker-orient-left');
                    left -= offset.left - visualPadding;
                } else if (left + calendarWidth > windowWidth) {
                    // the calendar passes the widow right edge. Align it to component right side
                    this.picker.addClass('datepicker-orient-right');
                    left = offset.left + width - calendarWidth;
                } else {
                    // Default to left
                    this.picker.addClass('datepicker-orient-left');
                }
            }

            // auto y orientation is best-situation: top or bottom, no fudging,
            // decision based on which shows more of the calendar
            var yorient = this.o.orientation.y,
                top_overflow, bottom_overflow;
            if (yorient === 'auto'){
                top_overflow = -scrollTop + top - calendarHeight;
                bottom_overflow = scrollTop + windowHeight - (top + height + calendarHeight);
                if (Math.max(top_overflow, bottom_overflow) === bottom_overflow)
                    yorient = 'top';
                else
                    yorient = 'bottom';
            }
            this.picker.addClass('datepicker-orient-' + yorient);
            if (yorient === 'top')
                top += height;
            else
                top -= calendarHeight + parseInt(this.picker.css('padding-top'));

            if (this.o.rtl) {
                var right = windowWidth - (left + width);
                this.picker.css({
                    top: top,
                    right: right,
                    zIndex: zIndex
                });
            } else {
                this.picker.css({
                    top: top,
                    left: left,
                    zIndex: zIndex
                });
            }
            return this;
        },

        _allow_update: true,
        update: function(){
            if (!this._allow_update)
                return this;

            var oldDates = this.dates.copy(),
                dates = [],
                fromArgs = false;
            if (arguments.length){
                $.each(arguments, $.proxy(function(i, date){
                    if (date instanceof Date)
                        date = this._local_to_utc(date);
                    dates.push(date);
                }, this));
                fromArgs = true;
            }
            else {
                dates = this.isInput
                    ? this.element.val()
                    : this.element.data('date') || this.element.find('input').val();
                if (dates && this.o.multidate)
                    dates = dates.split(this.o.multidateSeparator);
                else
                    dates = [dates];
                delete this.element.data().date;
            }

            dates = $.map(dates, $.proxy(function(date){
                return DPGlobal.parseDate(date, this.o.format, this.o.language);
            }, this));
            dates = $.grep(dates, $.proxy(function(date){
                return (
                date < this.o.startDate ||
                date > this.o.endDate ||
                !date
                );
            }, this), true);
            this.dates.replace(dates);

            if (this.dates.length)
                this.viewDate = new Date(this.dates.get(-1));
            else if (this.viewDate < this.o.startDate)
                this.viewDate = new Date(this.o.startDate);
            else if (this.viewDate > this.o.endDate)
                this.viewDate = new Date(this.o.endDate);

            if (fromArgs){
                // setting date by clicking
                this.setValue();
            }
            else if (dates.length){
                // setting date by typing
                if (String(oldDates) !== String(this.dates))
                    this._trigger('changeDate');
            }
            if (!this.dates.length && oldDates.length)
                this._trigger('clearDate');

            this.fill();
            return this;
        },

        fillDow: function(){
            var dowCnt = this.o.weekStart,
                html = '<tr>';
            if (this.o.calendarWeeks){
                this.picker.find('.datepicker-days thead tr:first-child .datepicker-switch')
                    .attr('colspan', function(i, val){
                        return parseInt(val) + 1;
                    });
                var cell = '<th class="cw">&#160;</th>';
                html += cell;
            }
            while (dowCnt < this.o.weekStart + 7){
                html += '<th class="dow">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';
            }
            html += '</tr>';
            this.picker.find('.datepicker-days thead').append(html);
        },

        fillMonths: function(){
            var html = '',
                i = 0;
            while (i < 12){
                html += '<span class="month">'+dates[this.o.language].monthsShort[i++]+'</span>';
            }
            this.picker.find('.datepicker-months td').html(html);
        },

        setRange: function(range){
            if (!range || !range.length)
                delete this.range;
            else
                this.range = $.map(range, function(d){
                    return d.valueOf();
                });
            this.fill();
        },

        getClassNames: function(date){
            var cls = [],
                year = this.viewDate.getUTCFullYear(),
                month = this.viewDate.getUTCMonth(),
                today = new Date();
            if (date.getUTCFullYear() < year || (date.getUTCFullYear() === year && date.getUTCMonth() < month)){
                cls.push('old');
            }
            else if (date.getUTCFullYear() > year || (date.getUTCFullYear() === year && date.getUTCMonth() > month)){
                cls.push('new');
            }
            if (this.focusDate && date.valueOf() === this.focusDate.valueOf())
                cls.push('focused');
            // Compare internal UTC date with local today, not UTC today
            if (this.o.todayHighlight &&
                date.getUTCFullYear() === today.getFullYear() &&
                date.getUTCMonth() === today.getMonth() &&
                date.getUTCDate() === today.getDate()){
                cls.push('today');
            }
            if (this.dates.contains(date) !== -1)
                cls.push('active');
            if (date.valueOf() < this.o.startDate || date.valueOf() > this.o.endDate ||
                $.inArray(date.getUTCDay(), this.o.daysOfWeekDisabled) !== -1){
                cls.push('disabled');
            }
            if (this.o.datesDisabled.length > 0 &&
                $.grep(this.o.datesDisabled, function(d){
                    return isUTCEquals(date, d); }).length > 0) {
                cls.push('disabled', 'disabled-date');
            }

            if (this.range){
                if (date > this.range[0] && date < this.range[this.range.length-1]){
                    cls.push('range');
                }
                if ($.inArray(date.valueOf(), this.range) !== -1){
                    cls.push('selected');
                }
            }
            return cls;
        },

        fill: function(){
            var d = new Date(this.viewDate),
                year = d.getUTCFullYear(),
                month = d.getUTCMonth(),
                startYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,
                startMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,
                endYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,
                endMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,
                todaytxt = dates[this.o.language].today || dates['en'].today || '',
                cleartxt = dates[this.o.language].clear || dates['en'].clear || '',
                tooltip;
            if (isNaN(year) || isNaN(month))
                return;
            this.picker.find('.datepicker-days thead .datepicker-switch')
                .text(dates[this.o.language].months[month]+' '+year);
            this.picker.find('tfoot .today')
                .text(todaytxt)
                .toggle(this.o.todayBtn !== false);
            this.picker.find('tfoot .clear')
                .text(cleartxt)
                .toggle(this.o.clearBtn !== false);
            this.updateNavArrows();
            this.fillMonths();
            var prevMonth = UTCDate(year, month-1, 28),
                day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());
            prevMonth.setUTCDate(day);
            prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.o.weekStart + 7)%7);
            var nextMonth = new Date(prevMonth);
            nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);
            nextMonth = nextMonth.valueOf();
            var html = [];
            var clsName;
            while (prevMonth.valueOf() < nextMonth){
                if (prevMonth.getUTCDay() === this.o.weekStart){
                    html.push('<tr>');
                    if (this.o.calendarWeeks){
                        // ISO 8601: First week contains first thursday.
                        // ISO also states week starts on Monday, but we can be more abstract here.
                        var
                        // Start of current week: based on weekstart/current date
                            ws = new Date(+prevMonth + (this.o.weekStart - prevMonth.getUTCDay() - 7) % 7 * 864e5),
                        // Thursday of this week
                            th = new Date(Number(ws) + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),
                        // First Thursday of year, year from thursday
                            yth = new Date(Number(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay())%7*864e5),
                        // Calendar week: ms between thursdays, div ms per day, div 7 days
                            calWeek =  (th - yth) / 864e5 / 7 + 1;
                        html.push('<td class="cw">'+ calWeek +'</td>');

                    }
                }
                clsName = this.getClassNames(prevMonth);
                clsName.push('day');

                if (this.o.beforeShowDay !== $.noop){
                    var before = this.o.beforeShowDay(this._utc_to_local(prevMonth));
                    if (before === undefined)
                        before = {};
                    else if (typeof(before) === 'boolean')
                        before = {enabled: before};
                    else if (typeof(before) === 'string')
                        before = {classes: before};
                    if (before.enabled === false)
                        clsName.push('disabled');
                    if (before.classes)
                        clsName = clsName.concat(before.classes.split(/\s+/));
                    if (before.tooltip)
                        tooltip = before.tooltip;
                }

                clsName = $.unique(clsName);
                html.push('<td class="'+clsName.join(' ')+'"' + (tooltip ? ' title="'+tooltip+'"' : '') + '>'+prevMonth.getUTCDate() + '</td>');
                tooltip = null;
                if (prevMonth.getUTCDay() === this.o.weekEnd){
                    html.push('</tr>');
                }
                prevMonth.setUTCDate(prevMonth.getUTCDate()+1);
            }
            this.picker.find('.datepicker-days tbody').empty().append(html.join(''));

            var months = this.picker.find('.datepicker-months')
                .find('th:eq(1)')
                .text(year)
                .end()
                .find('span').removeClass('active');

            $.each(this.dates, function(i, d){
                if (d.getUTCFullYear() === year)
                    months.eq(d.getUTCMonth()).addClass('active');
            });

            if (year < startYear || year > endYear){
                months.addClass('disabled');
            }
            if (year === startYear){
                months.slice(0, startMonth).addClass('disabled');
            }
            if (year === endYear){
                months.slice(endMonth+1).addClass('disabled');
            }

            if (this.o.beforeShowMonth !== $.noop){
                var that = this;
                $.each(months, function(i, month){
                    if (!$(month).hasClass('disabled')) {
                        var moDate = new Date(year, i, 1);
                        var before = that.o.beforeShowMonth(moDate);
                        if (before === false)
                            $(month).addClass('disabled');
                    }
                });
            }

            html = '';
            year = parseInt(year/10, 10) * 10;
            var yearCont = this.picker.find('.datepicker-years')
                .find('th:eq(1)')
                .text(year + '-' + (year + 9))
                .end()
                .find('td');
            year -= 1;
            var years = $.map(this.dates, function(d){
                    return d.getUTCFullYear();
                }),
                classes;
            for (var i = -1; i < 11; i++){
                classes = ['year'];
                if (i === -1)
                    classes.push('old');
                else if (i === 10)
                    classes.push('new');
                if ($.inArray(year, years) !== -1)
                    classes.push('active');
                if (year < startYear || year > endYear)
                    classes.push('disabled');
                html += '<span class="' + classes.join(' ') + '">' + year + '</span>';
                year += 1;
            }
            yearCont.html(html);
        },

        updateNavArrows: function(){
            if (!this._allow_update)
                return;

            var d = new Date(this.viewDate),
                year = d.getUTCFullYear(),
                month = d.getUTCMonth();
            switch (this.viewMode){
                case 0:
                    if (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear() && month <= this.o.startDate.getUTCMonth()){
                        this.picker.find('.prev').css({visibility: 'hidden'});
                    }
                    else {
                        this.picker.find('.prev').css({visibility: 'visible'});
                    }
                    if (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear() && month >= this.o.endDate.getUTCMonth()){
                        this.picker.find('.next').css({visibility: 'hidden'});
                    }
                    else {
                        this.picker.find('.next').css({visibility: 'visible'});
                    }
                    break;
                case 1:
                case 2:
                    if (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear()){
                        this.picker.find('.prev').css({visibility: 'hidden'});
                    }
                    else {
                        this.picker.find('.prev').css({visibility: 'visible'});
                    }
                    if (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear()){
                        this.picker.find('.next').css({visibility: 'hidden'});
                    }
                    else {
                        this.picker.find('.next').css({visibility: 'visible'});
                    }
                    break;
            }
        },

        click: function(e){
            e.preventDefault();
            var target = $(e.target).closest('span, td, th'),
                year, month, day;
            if (target.length === 1){
                switch (target[0].nodeName.toLowerCase()){
                    case 'th':
                        switch (target[0].className){
                            case 'datepicker-switch':
                                this.showMode(1);
                                break;
                            case 'prev':
                            case 'next':
                                var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1);
                                switch (this.viewMode){
                                    case 0:
                                        this.viewDate = this.moveMonth(this.viewDate, dir);
                                        this._trigger('changeMonth', this.viewDate);
                                        break;
                                    case 1:
                                    case 2:
                                        this.viewDate = this.moveYear(this.viewDate, dir);
                                        if (this.viewMode === 1)
                                            this._trigger('changeYear', this.viewDate);
                                        break;
                                }
                                this.fill();
                                break;
                            case 'today':
                                var date = new Date();
                                date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);

                                this.showMode(-2);
                                var which = this.o.todayBtn === 'linked' ? null : 'view';
                                this._setDate(date, which);
                                break;
                            case 'clear':
                                this.clearDates();
                                break;
                        }
                        break;
                    case 'span':
                        if (!target.hasClass('disabled')){
                            this.viewDate.setUTCDate(1);
                            if (target.hasClass('month')){
                                day = 1;
                                month = target.parent().find('span').index(target);
                                year = this.viewDate.getUTCFullYear();
                                this.viewDate.setUTCMonth(month);
                                this._trigger('changeMonth', this.viewDate);
                                if (this.o.minViewMode === 1){
                                    this._setDate(UTCDate(year, month, day));
                                    this.showMode();
                                } else {
                                    this.showMode(-1);
                                }
                            }
                            else {
                                day = 1;
                                month = 0;
                                year = parseInt(target.text(), 10)||0;
                                this.viewDate.setUTCFullYear(year);
                                this._trigger('changeYear', this.viewDate);
                                if (this.o.minViewMode === 2){
                                    this._setDate(UTCDate(year, month, day));
                                }
                                this.showMode(-1);
                            }
                            this.fill();
                        }
                        break;
                    case 'td':
                        if (target.hasClass('day') && !target.hasClass('disabled')){
                            day = parseInt(target.text(), 10)||1;
                            year = this.viewDate.getUTCFullYear();
                            month = this.viewDate.getUTCMonth();
                            if (target.hasClass('old')){
                                if (month === 0){
                                    month = 11;
                                    year -= 1;
                                }
                                else {
                                    month -= 1;
                                }
                            }
                            else if (target.hasClass('new')){
                                if (month === 11){
                                    month = 0;
                                    year += 1;
                                }
                                else {
                                    month += 1;
                                }
                            }
                            this._setDate(UTCDate(year, month, day));
                        }
                        break;
                }
            }
            if (this.picker.is(':visible') && this._focused_from){
                $(this._focused_from).focus();
            }
            delete this._focused_from;
        },

        _toggle_multidate: function(date){
            var ix = this.dates.contains(date);
            if (!date){
                this.dates.clear();
            }

            if (ix !== -1){
                if (this.o.multidate === true || this.o.multidate > 1 || this.o.toggleActive){
                    this.dates.remove(ix);
                }
            } else if (this.o.multidate === false) {
                this.dates.clear();
                this.dates.push(date);
            }
            else {
                this.dates.push(date);
            }

            if (typeof this.o.multidate === 'number')
                while (this.dates.length > this.o.multidate)
                    this.dates.remove(0);
        },

        _setDate: function(date, which){
            if (!which || which === 'date')
                this._toggle_multidate(date && new Date(date));
            if (!which || which  === 'view')
                this.viewDate = date && new Date(date);

            this.fill();
            this.setValue();
            if (!which || which  !== 'view') {
                this._trigger('changeDate');
            }
            var element;
            if (this.isInput){
                element = this.element;
            }
            else if (this.component){
                element = this.element.find('input');
            }
            if (element){
                element.change();
            }
            if (this.o.autoclose && (!which || which === 'date')){
                this.hide();
            }
        },

        moveMonth: function(date, dir){
            if (!date)
                return undefined;
            if (!dir)
                return date;
            var new_date = new Date(date.valueOf()),
                day = new_date.getUTCDate(),
                month = new_date.getUTCMonth(),
                mag = Math.abs(dir),
                new_month, test;
            dir = dir > 0 ? 1 : -1;
            if (mag === 1){
                test = dir === -1
                    // If going back one month, make sure month is not current month
                    // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)
                    ? function(){
                    return new_date.getUTCMonth() === month;
                }
                    // If going forward one month, make sure month is as expected
                    // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)
                    : function(){
                    return new_date.getUTCMonth() !== new_month;
                };
                new_month = month + dir;
                new_date.setUTCMonth(new_month);
                // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11
                if (new_month < 0 || new_month > 11)
                    new_month = (new_month + 12) % 12;
            }
            else {
                // For magnitudes >1, move one month at a time...
                for (var i=0; i < mag; i++)
                    // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...
                    new_date = this.moveMonth(new_date, dir);
                // ...then reset the day, keeping it in the new month
                new_month = new_date.getUTCMonth();
                new_date.setUTCDate(day);
                test = function(){
                    return new_month !== new_date.getUTCMonth();
                };
            }
            // Common date-resetting loop -- if date is beyond end of month, make it
            // end of month
            while (test()){
                new_date.setUTCDate(--day);
                new_date.setUTCMonth(new_month);
            }
            return new_date;
        },

        moveYear: function(date, dir){
            return this.moveMonth(date, dir*12);
        },

        dateWithinRange: function(date){
            return date >= this.o.startDate && date <= this.o.endDate;
        },

        keydown: function(e){
            if (!this.picker.is(':visible')){
                if (e.keyCode === 40 || e.keyCode === 27) // allow down to re-show picker
                    this.show();
                return;
            }
            var dateChanged = false,
                dir, newDate, newViewDate,
                focusDate = this.focusDate || this.viewDate;
            switch (e.keyCode){
                case 27: // escape
                    if (this.focusDate){
                        this.focusDate = null;
                        this.viewDate = this.dates.get(-1) || this.viewDate;
                        this.fill();
                    }
                    else
                        this.hide();
                    e.preventDefault();
                    break;
                case 37: // left
                case 39: // right
                    if (!this.o.keyboardNavigation)
                        break;
                    dir = e.keyCode === 37 ? -1 : 1;
                    if (e.ctrlKey){
                        newDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveYear(focusDate, dir);
                        this._trigger('changeYear', this.viewDate);
                    }
                    else if (e.shiftKey){
                        newDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveMonth(focusDate, dir);
                        this._trigger('changeMonth', this.viewDate);
                    }
                    else {
                        newDate = new Date(this.dates.get(-1) || UTCToday());
                        newDate.setUTCDate(newDate.getUTCDate() + dir);
                        newViewDate = new Date(focusDate);
                        newViewDate.setUTCDate(focusDate.getUTCDate() + dir);
                    }
                    if (this.dateWithinRange(newViewDate)){
                        this.focusDate = this.viewDate = newViewDate;
                        this.setValue();
                        this.fill();
                        e.preventDefault();
                    }
                    break;
                case 38: // up
                case 40: // down
                    if (!this.o.keyboardNavigation)
                        break;
                    dir = e.keyCode === 38 ? -1 : 1;
                    if (e.ctrlKey){
                        newDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveYear(focusDate, dir);
                        this._trigger('changeYear', this.viewDate);
                    }
                    else if (e.shiftKey){
                        newDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);
                        newViewDate = this.moveMonth(focusDate, dir);
                        this._trigger('changeMonth', this.viewDate);
                    }
                    else {
                        newDate = new Date(this.dates.get(-1) || UTCToday());
                        newDate.setUTCDate(newDate.getUTCDate() + dir * 7);
                        newViewDate = new Date(focusDate);
                        newViewDate.setUTCDate(focusDate.getUTCDate() + dir * 7);
                    }
                    if (this.dateWithinRange(newViewDate)){
                        this.focusDate = this.viewDate = newViewDate;
                        this.setValue();
                        this.fill();
                        e.preventDefault();
                    }
                    break;
                case 32: // spacebar
                    // Spacebar is used in manually typing dates in some formats.
                    // As such, its behavior should not be hijacked.
                    break;
                case 13: // enter
                    focusDate = this.focusDate || this.dates.get(-1) || this.viewDate;
                    if (this.o.keyboardNavigation) {
                        this._toggle_multidate(focusDate);
                        dateChanged = true;
                    }
                    this.focusDate = null;
                    this.viewDate = this.dates.get(-1) || this.viewDate;
                    this.setValue();
                    this.fill();
                    if (this.picker.is(':visible')){
                        e.preventDefault();
                        if (typeof e.stopPropagation === 'function') {
                            e.stopPropagation(); // All modern browsers, IE9+
                        } else {
                            e.cancelBubble = true; // IE6,7,8 ignore "stopPropagation"
                        }
                        if (this.o.autoclose)
                            this.hide();
                    }
                    break;
                case 9: // tab
                    this.focusDate = null;
                    this.viewDate = this.dates.get(-1) || this.viewDate;
                    this.fill();
                    this.hide();
                    break;
            }
            if (dateChanged){
                if (this.dates.length)
                    this._trigger('changeDate');
                else
                    this._trigger('clearDate');
                var element;
                if (this.isInput){
                    element = this.element;
                }
                else if (this.component){
                    element = this.element.find('input');
                }
                if (element){
                    element.change();
                }
            }
        },

        showMode: function(dir){
            if (dir){
                this.viewMode = Math.max(this.o.minViewMode, Math.min(2, this.viewMode + dir));
            }
            this.picker
                .children('div')
                .hide()
                .filter('.datepicker-' + DPGlobal.modes[this.viewMode].clsName)
                .css('display', 'block');
            this.updateNavArrows();
        }
    };

    var DateRangePicker = function(element, options){
        this.element = $(element);
        this.inputs = $.map(options.inputs, function(i){
            return i.jquery ? i[0] : i;
        });
        delete options.inputs;

        datepickerPlugin.call($(this.inputs), options)
            .on('changeDate', $.proxy(this.dateUpdated, this));

        this.pickers = $.map(this.inputs, function(i){
            return $(i).data('datepicker');
        });
        this.updateDates();
    };
    DateRangePicker.prototype = {
        updateDates: function(){
            this.dates = $.map(this.pickers, function(i){
                return i.getUTCDate();
            });
            this.updateRanges();
        },
        updateRanges: function(){
            var range = $.map(this.dates, function(d){
                return d.valueOf();
            });
            $.each(this.pickers, function(i, p){
                p.setRange(range);
            });
        },
        dateUpdated: function(e){
            // `this.updating` is a workaround for preventing infinite recursion
            // between `changeDate` triggering and `setUTCDate` calling.  Until
            // there is a better mechanism.
            if (this.updating)
                return;
            this.updating = true;

            var dp = $(e.target).data('datepicker'),
                new_date = dp.getUTCDate(),
                i = $.inArray(e.target, this.inputs),
                j = i - 1,
                k = i + 1,
                l = this.inputs.length;
            if (i === -1)
                return;

            $.each(this.pickers, function(i, p){
                if (!p.getUTCDate())
                    p.setUTCDate(new_date);
            });

            if (new_date < this.dates[j]){
                // Date being moved earlier/left
                while (j >= 0 && new_date < this.dates[j]){
                    this.pickers[j--].setUTCDate(new_date);
                }
            }
            else if (new_date > this.dates[k]){
                // Date being moved later/right
                while (k < l && new_date > this.dates[k]){
                    this.pickers[k++].setUTCDate(new_date);
                }
            }
            this.updateDates();

            delete this.updating;
        },
        remove: function(){
            $.map(this.pickers, function(p){ p.remove(); });
            delete this.element.data().datepicker;
        }
    };

    function opts_from_el(el, prefix){
        // Derive options from element data-attrs
        var data = $(el).data(),
            out = {}, inkey,
            replace = new RegExp('^' + prefix.toLowerCase() + '([A-Z])');
        prefix = new RegExp('^' + prefix.toLowerCase());
        function re_lower(_,a){
            return a.toLowerCase();
        }
        for (var key in data)
            if (prefix.test(key)){
                inkey = key.replace(replace, re_lower);
                out[inkey] = data[key];
            }
        return out;
    }

    function opts_from_locale(lang){
        // Derive options from locale plugins
        var out = {};
        // Check if "de-DE" style date is available, if not language should
        // fallback to 2 letter code eg "de"
        if (!dates[lang]){
            lang = lang.split('-')[0];
            if (!dates[lang])
                return;
        }
        var d = dates[lang];
        $.each(locale_opts, function(i,k){
            if (k in d)
                out[k] = d[k];
        });
        return out;
    }

    var old = $.fn.datepicker;
    var datepickerPlugin = function(option){
        var args = Array.apply(null, arguments);
        args.shift();
        var internal_return;
        this.each(function(){
            var $this = $(this),
                data = $this.data('datepicker'),
                options = typeof option === 'object' && option;
            if (!data){
                var elopts = opts_from_el(this, 'date'),
                // Preliminary otions
                    xopts = $.extend({}, defaults, elopts, options),
                    locopts = opts_from_locale(xopts.language),
                // Options priority: js args, data-attrs, locales, defaults
                    opts = $.extend({}, defaults, locopts, elopts, options);
                if ($this.hasClass('input-daterange') || opts.inputs){
                    var ropts = {
                        inputs: opts.inputs || $this.find('input').toArray()
                    };
                    $this.data('datepicker', (data = new DateRangePicker(this, $.extend(opts, ropts))));
                }
                else {
                    $this.data('datepicker', (data = new Datepicker(this, opts)));
                }
            }
            if (typeof option === 'string' && typeof data[option] === 'function'){
                internal_return = data[option].apply(data, args);
                if (internal_return !== undefined)
                    return false;
            }
        });
        if (internal_return !== undefined)
            return internal_return;
        else
            return this;
    };
    $.fn.datepicker = datepickerPlugin;

    var defaults = $.fn.datepicker.defaults = {
        autoclose: false,
        beforeShowDay: $.noop,
        beforeShowMonth: $.noop,
        calendarWeeks: false,
        clearBtn: false,
        toggleActive: false,
        daysOfWeekDisabled: [],
        datesDisabled: [],
        endDate: Infinity,
        forceParse: true,
        format: 'mm/dd/yyyy',
        keyboardNavigation: true,
        language: 'en',
        minViewMode: 0,
        multidate: false,
        multidateSeparator: ',',
        orientation: "auto",
        rtl: false,
        startDate: -Infinity,
        startView: 0,
        todayBtn: false,
        todayHighlight: false,
        weekStart: 0,
        disableTouchKeyboard: false,
        enableOnReadonly: true,
        container: 'body',
        immediateUpdates: false
    };
    var locale_opts = $.fn.datepicker.locale_opts = [
        'format',
        'rtl',
        'weekStart'
    ];
    $.fn.datepicker.Constructor = Datepicker;
    var dates = $.fn.datepicker.dates = {
        en: {
            days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            today: "Today",
            clear: "Clear"
        }
    };

    var DPGlobal = {
        modes: [
            {
                clsName: 'days',
                navFnc: 'Month',
                navStep: 1
            },
            {
                clsName: 'months',
                navFnc: 'FullYear',
                navStep: 1
            },
            {
                clsName: 'years',
                navFnc: 'FullYear',
                navStep: 10
            }],
        isLeapYear: function(year){
            return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));
        },
        getDaysInMonth: function(year, month){
            return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
        },
        validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,
        nonpunctuation: /[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,
        parseFormat: function(format){
            // IE treats \0 as a string end in inputs (truncating the value),
            // so it's a bad format delimiter, anyway
            var separators = format.replace(this.validParts, '\0').split('\0'),
                parts = format.match(this.validParts);
            if (!separators || !separators.length || !parts || parts.length === 0){
                throw new Error("Invalid date format.");
            }
            return {separators: separators, parts: parts};
        },
        parseDate: function(date, format, language){
            if (!date)
                return undefined;
            if (date instanceof Date)
                return date;
            if (typeof format === 'string')
                format = DPGlobal.parseFormat(format);
            var part_re = /([\-+]\d+)([dmwy])/,
                parts = date.match(/([\-+]\d+)([dmwy])/g),
                part, dir, i;
            if (/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){
                date = new Date();
                for (i=0; i < parts.length; i++){
                    part = part_re.exec(parts[i]);
                    dir = parseInt(part[1]);
                    switch (part[2]){
                        case 'd':
                            date.setUTCDate(date.getUTCDate() + dir);
                            break;
                        case 'm':
                            date = Datepicker.prototype.moveMonth.call(Datepicker.prototype, date, dir);
                            break;
                        case 'w':
                            date.setUTCDate(date.getUTCDate() + dir * 7);
                            break;
                        case 'y':
                            date = Datepicker.prototype.moveYear.call(Datepicker.prototype, date, dir);
                            break;
                    }
                }
                return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);
            }
            parts = date && date.match(this.nonpunctuation) || [];
            date = new Date();
            var parsed = {},
                setters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],
                setters_map = {
                    yyyy: function(d,v){
                        return d.setUTCFullYear(v);
                    },
                    yy: function(d,v){
                        return d.setUTCFullYear(2000+v);
                    },
                    m: function(d,v){
                        if (isNaN(d))
                            return d;
                        v -= 1;
                        while (v < 0) v += 12;
                        v %= 12;
                        d.setUTCMonth(v);
                        while (d.getUTCMonth() !== v)
                            d.setUTCDate(d.getUTCDate()-1);
                        return d;
                    },
                    d: function(d,v){
                        return d.setUTCDate(v);
                    }
                },
                val, filtered;
            setters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];
            setters_map['dd'] = setters_map['d'];
            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);
            var fparts = format.parts.slice();
            // Remove noop parts
            if (parts.length !== fparts.length){
                fparts = $(fparts).filter(function(i,p){
                    return $.inArray(p, setters_order) !== -1;
                }).toArray();
            }
            // Process remainder
            function match_part(){
                var m = this.slice(0, parts[i].length),
                    p = parts[i].slice(0, m.length);
                return m.toLowerCase() === p.toLowerCase();
            }
            if (parts.length === fparts.length){
                var cnt;
                for (i=0, cnt = fparts.length; i < cnt; i++){
                    val = parseInt(parts[i], 10);
                    part = fparts[i];
                    if (isNaN(val)){
                        switch (part){
                            case 'MM':
                                filtered = $(dates[language].months).filter(match_part);
                                val = $.inArray(filtered[0], dates[language].months) + 1;
                                break;
                            case 'M':
                                filtered = $(dates[language].monthsShort).filter(match_part);
                                val = $.inArray(filtered[0], dates[language].monthsShort) + 1;
                                break;
                        }
                    }
                    parsed[part] = val;
                }
                var _date, s;
                for (i=0; i < setters_order.length; i++){
                    s = setters_order[i];
                    if (s in parsed && !isNaN(parsed[s])){
                        _date = new Date(date);
                        setters_map[s](_date, parsed[s]);
                        if (!isNaN(_date))
                            date = _date;
                    }
                }
            }
            return date;
        },
        formatDate: function(date, format, language){
            if (!date)
                return '';
            if (typeof format === 'string')
                format = DPGlobal.parseFormat(format);
            var val = {
                d: date.getUTCDate(),
                D: dates[language].daysShort[date.getUTCDay()],
                DD: dates[language].days[date.getUTCDay()],
                m: date.getUTCMonth() + 1,
                M: dates[language].monthsShort[date.getUTCMonth()],
                MM: dates[language].months[date.getUTCMonth()],
                yy: date.getUTCFullYear().toString().substring(2),
                yyyy: date.getUTCFullYear()
            };
            val.dd = (val.d < 10 ? '0' : '') + val.d;
            val.mm = (val.m < 10 ? '0' : '') + val.m;
            date = [];
            var seps = $.extend([], format.separators);
            for (var i=0, cnt = format.parts.length; i <= cnt; i++){
                if (seps.length)
                    date.push(seps.shift());
                date.push(val[format.parts[i]]);
            }
            return date.join('');
        },
        headTemplate: '<thead>'+
        '<tr>'+
        '<th class="prev">&#171;</th>'+
        '<th colspan="5" class="datepicker-switch"></th>'+
        '<th class="next">&#187;</th>'+
        '</tr>'+
        '</thead>',
        contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>',
        footTemplate: '<tfoot>'+
        '<tr>'+
        '<th colspan="7" class="today"></th>'+
        '</tr>'+
        '<tr>'+
        '<th colspan="7" class="clear"></th>'+
        '</tr>'+
        '</tfoot>'
    };
    DPGlobal.template = '<div class="datepicker">'+
    '<div class="datepicker-days">'+
    '<table class=" table-condensed">'+
    DPGlobal.headTemplate+
    '<tbody></tbody>'+
    DPGlobal.footTemplate+
    '</table>'+
    '</div>'+
    '<div class="datepicker-months">'+
    '<table class="table-condensed">'+
    DPGlobal.headTemplate+
    DPGlobal.contTemplate+
    DPGlobal.footTemplate+
    '</table>'+
    '</div>'+
    '<div class="datepicker-years">'+
    '<table class="table-condensed">'+
    DPGlobal.headTemplate+
    DPGlobal.contTemplate+
    DPGlobal.footTemplate+
    '</table>'+
    '</div>'+
    '</div>';

    $.fn.datepicker.DPGlobal = DPGlobal;


    /* DATEPICKER NO CONFLICT
     * =================== */

    $.fn.datepicker.noConflict = function(){
        $.fn.datepicker = old;
        return this;
    };

    /* DATEPICKER VERSION
     * =================== */
    $.fn.datepicker.version =  "1.4.1-dev";

    /* DATEPICKER DATA-API
     * ================== */

    $(document).on(
        'focus.datepicker.data-api click.datepicker.data-api',
        '[data-provide="datepicker"]',
        function(e){
            var $this = $(this);
            if ($this.data('datepicker'))
                return;
            e.preventDefault();
            // component click requires us to explicitly show it
            datepickerPlugin.call($this, 'show');
        }
    );
    $(function(){
        datepickerPlugin.call($('[data-provide="datepicker-inline"]'));
    });

}(window.jQuery));

/**
 * Russian translation for bootstrap-datepicker
 * Victor Taranenko <darwin@snowdale.com>
 */
;(function($){
	$.fn.datepicker.dates['ru'] = {
		days: ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота", "Воскресенье"],
		daysShort: ["Вск", "Пнд", "Втр", "Срд", "Чтв", "Птн", "Суб", "Вск"],
		daysMin: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Вс"],
		months: ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"],
		monthsShort: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек"],
		today: "Сегодня",
		clear: "Очистить",
		format: "dd.mm.yyyy",
		weekStart: 1
	};
}(jQuery));

/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(c){return a.Bloodhound=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.Bloodhound=b(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c="0.11.1",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){return function(c){return c=b.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function c(a,c){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix)),this.ls=c||h,!this.ls&&this._noop()}function d(){return(new Date).getTime()}function e(a){return JSON.stringify(b.isUndefined(a)?null:a)}function f(b){return a.parseJSON(b)}function g(a){var b,c,d=[],e=h.length;for(b=0;e>b;b++)(c=h.key(b)).match(a)&&d.push(c.replace(a,""));return d}var h;try{h=window.localStorage,h.setItem("~~~","!"),h.removeItem("~~~")}catch(i){h=null}return b.mixin(c.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=b.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(c){"QuotaExceededError"===c.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),f(this.ls.getItem(this._prefix(a)))},set:function(a,c,f){return b.isNumber(f)?this._safeSet(this._ttlKey(a),e(d()+f)):this.ls.removeItem(this._ttlKey(a)),this._safeSet(this._prefix(a),e(c))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a,b=g(this.keyMatcher);for(a=b.length;a--;)this.remove(b[a]);return this},isExpired:function(a){var c=f(this.ls.getItem(this._ttlKey(a)));return b.isNumber(c)&&d()>c?!0:!1}}),c}(),g=function(){"use strict";function c(a){a=a||{},this.cancelled=!1,this.lastReq=null,this._send=a.transport,this._get=a.limiter?a.limiter(this._get):this._get,this._cache=a.cache===!1?new e(0):h}var d=0,f={},g=6,h=new e(10);return c.setMaxPendingRequests=function(a){g=a},c.resetCache=function(){h.reset()},b.mixin(c.prototype,{_fingerprint:function(b){return b=b||{},b.url+b.type+a.param(b.data||{})},_get:function(a,b){function c(a){b(null,a),k._cache.set(i,a)}function e(){b(!0)}function h(){d--,delete f[i],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var i,j,k=this;i=this._fingerprint(a),this.cancelled||i!==this.lastReq||((j=f[i])?j.done(c).fail(e):g>d?(d++,f[i]=this._send(a).done(c).fail(e).always(h)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,d){var e,f;d=d||a.noop,c=b.isString(c)?{url:c}:c||{},f=this._fingerprint(c),this.cancelled=!1,this.lastReq=f,(e=this._cache.get(f))?d(null,e):this._get(c,d)},cancel:function(){this.cancelled=!0}}),c}(),h=window.SearchIndex=function(){"use strict";function c(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.identify=c.identify||b.stringify,this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){var a={};return a[i]=[],a[h]={},a}function f(a){for(var b={},c=[],d=0,e=a.length;e>d;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){var c=0,d=0,e=[];a=a.sort(),b=b.sort();for(var f=a.length,g=b.length;f>c&&g>d;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}var h="c",i="i";return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;c.datums[f=c.identify(a)]=a,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b[h][g]||(b[h][g]=e()),b[i].push(f)})})},get:function(a){var c=this;return b.map(a,function(a){return c.datums[a]})},search:function(a){var c,e,j=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=j.trie,c=a.split("");b&&(d=c.shift());)b=b[h][d];return b&&0===c.length?(f=b[i].slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return j.datums[a]}):[]},all:function(){var a=[];for(var b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={},this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function a(a){this.url=a.url,this.ttl=a.ttl,this.cache=a.cache,this.prepare=a.prepare,this.transform=a.transform,this.transport=a.transport,this.thumbprint=a.thumbprint,this.storage=new f(a.cacheKey)}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(c.data,a,this.ttl),this.storage.set(c.protocol,location.protocol,this.ttl),this.storage.set(c.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b={};return this.cache?(b.data=this.storage.get(c.data),b.protocol=this.storage.get(c.protocol),b.thumbprint=this.storage.get(c.thumbprint),a=b.thumbprint!==this.thumbprint||b.protocol!==location.protocol,b.data&&!a?b.data:null):null},fromNetwork:function(a){function b(){a(!0)}function c(b){a(null,e.transform(b))}var d,e=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(c))},clear:function(){return this.storage.clear(),this}}),a}(),j=function(){"use strict";function a(a){this.url=a.url,this.prepare=a.prepare,this.transform=a.transform,this.transport=new g({cache:a.cache,limiter:a.limiter,transport:a.transport})}return b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:e.transform(c))}var d,e=this;if(b)return a=a||"",d=this.prepare(a,this._settings()),this.transport.get(d,c)},cancelLastRequest:function(){this.transport.cancel()}}),a}(),k=function(){"use strict";function d(d){var e;return d?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:b.identity,transform:b.identity,transport:null},d=b.isString(d)?{url:d}:d,d=b.mixin(e,d),!d.url&&a.error("prefetch requires url to be set"),d.transform=d.filter||d.transform,d.cacheKey=d.cacheKey||d.url,d.thumbprint=c+d.thumbprint,d.transport=d.transport?h(d.transport):a.ajax,d):null}function e(c){var d;if(c)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:b.identity,transport:null},c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),!c.url&&a.error("remote requires url to be set"),c.transform=c.filter||c.transform,c.prepare=f(c),c.limiter=g(c),c.transport=c.transport?h(c.transport):a.ajax,delete c.replace,delete c.wildcard,delete c.rateLimitBy,delete c.rateLimitWait,c}function f(a){function b(a,b){return b.url=f(b.url,a),b}function c(a,b){return b.url=b.url.replace(g,encodeURIComponent(a)),b}function d(a,b){return b}var e,f,g;return e=a.prepare,f=a.replace,g=a.wildcard,e?e:e=f?b:a.wildcard?c:d}function g(a){function c(a){return function(c){return b.debounce(c,a)}}function d(a){return function(c){return b.throttle(c,a)}}var e,f,g;return e=a.limiter,f=a.rateLimitBy,g=a.rateLimitWait,e||(e=/^throttle$/i.test(f)?d(g):c(g)),e}function h(c){return function(d){function e(a){b.defer(function(){g.resolve(a)})}function f(a){b.defer(function(){g.reject(a)})}var g=a.Deferred();return c(d,e,f),g}}return function(c){var f,g;return f={initialize:!0,identify:b.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},c=b.mixin(f,c||{}),!c.datumTokenizer&&a.error("datumTokenizer is required"),!c.queryTokenizer&&a.error("queryTokenizer is required"),g=c.sorter,c.sorter=g?function(a){return a.sort(g)}:b.identity,c.local=b.isFunction(c.local)?c.local():c.local,c.prefetch=d(c.prefetch),c.remote=e(c.remote),c}}(),l=function(){"use strict";function c(a){a=k(a),this.sorter=a.sorter,this.identify=a.identify,this.sufficient=a.sufficient,this.local=a.local,this.remote=a.remote?new j(a.remote):null,this.prefetch=a.prefetch?new i(a.prefetch):null,this.index=new h({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer}),a.initialize!==!1&&this.initialize()}var e;return e=window&&window.Bloodhound,c.noConflict=function(){return window&&(window.Bloodhound=e),c},c.tokenizers=d,b.mixin(c.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){return a?c.reject():(e.add(b),e.prefetch.store(e.index.serialize()),void c.resolve())}var c,d,e=this;return c=a.Deferred(),this.prefetch?(d=this.prefetch.fromCache())?(this.index.bootstrap(d),c.resolve()):this.prefetch.fromNetwork(b):c.resolve(),c.promise()},_initialize:function(){function a(){b.add(b.local)}var b=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(a),this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(a){return a=b.isArray(a)?a:[].slice.call(arguments),this.index.get(a)},search:function(a,c,d){function e(a){var c=[];b.each(a,function(a){!b.some(f,function(b){return g.identify(a)===g.identify(b)})&&c.push(a)}),d&&d(c)}var f,g=this;return f=this.sorter(this.index.search(a)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(a,e):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),c}();return l}),function(a,b){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c=function(){"use strict";function a(a){var g,h;return h=b.mixin({},f,a),g={css:e(),classes:h,html:c(h),selectors:d(h)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(a){b.mixin(a,g)}}}function c(a){return{wrapper:'<span class="'+a.wrapper+'"></span>',menu:'<div class="'+a.menu+'"></div>'}}function d(a){var c={};return b.each(a,function(a,b){c[b]="."+a}),c}function e(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a}var f={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return a}(),d=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d,e;return d="typeahead:",e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},b.mixin(c.prototype,{_trigger:function(b,c){var e;return e=a.Event(d+b),(c=c||[]).unshift(e),this.$el.trigger.apply(this.$el,c),e},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1)),(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),c}(),e=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&f>e;e+=1)d=a[e].apply(b,c)===!1;return!d}return d}function g(){var a;return a=window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),f=function(a){"use strict";function c(a,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)f.push(b.escapeRegExChars(a[g]));return e=d?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")",c?new RegExp(e):new RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,f;return(c=h.exec(b.data))&&(f=a.createElement(e.tagName),e.className&&(f.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(f,d)),!!c}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e),e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),g=function(){"use strict";function c(c,e){c=c||{},c.input||a.error("input is missing"),e.mixin(this),this.$hint=a(c.hint),this.$input=a(c.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function g(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var h;return h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return b.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(a){var b=h[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case"up":case"down":c=!g(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!g(b);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c,d;c=f(a,this.query),d=c?this.query.length!==a.length:!1,this.query=a,b||c?!b&&d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var a,c,d,e,f=this;return a=b.bind(this._onBlur,this),c=b.bind(this._onFocus,this),d=b.bind(this._onKeydown,this),e=b.bind(this._onInput,this),this.$input.on("blur.tt",a).on("focus.tt",c).on("keydown.tt",d),!b.isMsie()||b.isMsie()>9?this.$input.on("input.tt",e):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){h[a.which||a.keyCode]||b.defer(b.bind(f._onInput,f,a))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a),this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),d=""!==a&&c&&!this.hasOverflow(),!d&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=a("<div>")}}),c}(),h=function(){"use strict";function c(c,e){c=c||{},c.templates=c.templates||{},c.templates.notFound=c.templates.notFound||c.templates.empty,c.source||a.error("missing source"),c.node||a.error("missing node"),c.name&&!h(c.name)&&a.error("invalid dataset name: "+c.name),e.mixin(this),this.highlight=!!c.highlight,this.name=c.name||j(),this.limit=c.limit||5,this.displayFn=d(c.display||c.displayKey),this.templates=g(c.templates,this.displayFn),this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source,this.async=b.isUndefined(c.async)?this.source.length>2:!!c.async,this._resetLastSuggestion(),this.$el=a(c.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function d(a){function c(b){return b[a]}return a=a||b.stringify,b.isFunction(a)?a:c}function g(c,d){function e(b){return a("<div>").text(d(b))}return{notFound:c.notFound&&b.templatify(c.notFound),pending:c.pending&&b.templatify(c.pending),header:c.header&&b.templatify(c.header),footer:c.footer&&b.templatify(c.footer),suggestion:c.suggestion||e}}function h(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var i,j;return i={val:"tt-selectable-display",obj:"tt-selectable-object"},j=b.getIdGenerator(),c.extractData=function(b){var c=a(b);return c.data(i.obj)?{val:c.data(i.val)||"",obj:c.data(i.obj)||null}:null},b.mixin(c.prototype,e,{_overwrite:function(a,b){b=b||[],b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty(),this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[],b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a),this.trigger("rendered",this.name,b,!0)},_renderSuggestions:function(a,b){var c;c=this._getSuggestionsFragment(a,b),this.$lastSuggestion=c.children().last(),this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){var c,d;c=this._getSuggestionsFragment(a,b),d=c.children().last(),this.$lastSuggestion.after(c),this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,g=this;return e=document.createDocumentFragment(),b.each(d,function(b){var d,f;f=g._injectQuery(c,b),d=a(g.templates.suggestion(f)).data(i.obj,b).data(i.val,g.displayFn(b)).addClass(g.classes.suggestion+" "+g.classes.selectable),e.appendChild(d[0])}),this.highlight&&f({className:this.classes.highlight,node:e,pattern:c}),a(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,c){return b.isObject(c)?b.mixin({_query:a},c):c},update:function(b){function c(a){g||(g=!0,a=(a||[]).slice(0,e.limit),h=a.length,e._overwrite(b,a),h<e.limit&&e.async&&e.trigger("asyncRequested",b))}function d(c){c=c||[],!f&&h<e.limit&&(e.cancel=a.noop,h+=c.length,e._append(b,c.slice(0,e.limit-h)),e.async&&e.trigger("asyncReceived",b))}var e=this,f=!1,g=!1,h=0;this.cancel(),this.cancel=function(){f=!0,e.cancel=a.noop,e.async&&e.trigger("asyncCanceled",b)},this.source(b,c,d),!g&&c([])},cancel:a.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}}),c}(),i=function(){"use strict";function c(c,d){function e(b){var c=f.$node.find(b.node).first();return b.node=c.length?c:a("<div>").appendTo(f.$node),new h(b,d)}var f=this;c=c||{},c.node||a.error("node is required"),d.mixin(this),this.$node=a(c.node),this.query=null,this.datasets=b.map(c.datasets,e)}return b.mixin(c.prototype,e,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function a(a){return a.isEmpty()}return b.every(this.datasets,a)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>b?this.$node.scrollTop(d+b):c>e&&this.$node.scrollTop(d+(c-e))},bind:function(){var a,c=this;return a=b.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,a),b.each(this.datasets,function(a){a.onSync("asyncRequested",c._propagate,c).onSync("asyncCanceled",c._propagate,c).onSync("asyncReceived",c._propagate,c).onSync("rendered",c._onRendered,c).onSync("cleared",c._onCleared,c)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,c,d,e;return c=this.getActiveSelectable(),b=this._getSelectables(),d=c?b.index(c):-1,e=d+a,e=(e+1)%(b.length+1)-1,e=-1>e?b.length-1:e,-1===e?null:b.eq(e)},setCursor:function(a){this._removeCursor(),(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function c(b){b.update(a)}var d=a!==this.query;return d&&(this.query=a,b.each(this.datasets,c)),d},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function c(a){a.destroy()}this.$node.off(".tt"),this.$node=a("<div>"),b.each(this.datasets,c)}}),c}(),j=function(){"use strict";function a(){i.apply(this,[].slice.call(arguments,0))}var c=i.prototype;return b.mixin(a.prototype,i.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),c.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),c.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),c.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),a}(),k=function(){"use strict";function c(c,e){var f,g,h,i,j,k,l,m,n,o,p;c=c||{},c.input||a.error("missing input"),c.menu||a.error("missing menu"),c.eventBus||a.error("missing event bus"),e.mixin(this),this.eventBus=c.eventBus,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),f=d(this,"activate","open","_onFocused"),g=d(this,"deactivate","_onBlurred"),h=d(this,"isActive","isOpen","_onEnterKeyed"),i=d(this,"isActive","isOpen","_onTabKeyed"),j=d(this,"isActive","_onEscKeyed"),k=d(this,"isActive","open","_onUpKeyed"),l=d(this,"isActive","open","_onDownKeyed"),m=d(this,"isActive","isOpen","_onLeftKeyed"),n=d(this,"isActive","isOpen","_onRightKeyed"),o=d(this,"_openIfActive","_onQueryChanged"),p=d(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",i,this).onSync("escKeyed",j,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",m,this).onSync("rightKeyed",n,this).onSync("queryChanged",o,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);b.each(c,function(b){return a[b].apply(a,d)})}}return b.mixin(c.prototype,{_hacks:function(){var c,d;c=this.input.$input||a("<div>"),d=this.menu.$node||a("<div>"),c.on("blur.tt",function(a){var e,f,g;
e=document.activeElement,f=d.is(e),g=d.has(e).length>0,b.isMsie()&&(f||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){c.focus()}))}),d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){this._updateHint(),this.eventBus.trigger("render",c,d,b)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&b.preventDefault()},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){return a=b.isString(a)?a:this.input.getQuery()||"",a.length>=this.minLength},_updateHint:function(){var a,c,d,e,f,h,i;a=this.menu.getTopSelectable(),c=this.menu.getSelectableData(a),d=this.input.getInputValue(),!c||b.isBlankString(d)||this.input.hasOverflow()?this.input.clearHint():(e=g.normalizeQuery(d),f=b.escapeRegExChars(e),h=new RegExp("^(?:"+f+")(.+$)","i"),i=h.exec(c.val),i&&this.input.setHint(d+i[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(a){this.input.setQuery(b.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){var b=this.menu.getSelectableData(a);return b&&!this.eventBus.before("select",b.obj)?(this.input.setQuery(b.val,!0),this.eventBus.trigger("select",b.obj),this.close(),!0):!1},autocomplete:function(a){var b,c,d;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),d=c&&b!==c.val,d&&!this.eventBus.before("autocomplete",c.obj)?(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj),!0):!1},moveCursor:function(a){var b,c,d,e,f;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),d=this.menu.getSelectableData(c),e=d?d.obj:null,f=this._minLengthMet()&&this.menu.update(b),f||this.eventBus.before("cursorchange",e)?!1:(this.menu.setCursor(c),d?this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),c}();!function(){"use strict";function e(b,c){b.each(function(){var b,d=a(this);(b=d.data(p.typeahead))&&c(b,d)})}function f(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(l(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function h(a,b){a.data(p.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass(b.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(c){}return a}function l(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function m(a){var c,d;c=a.data(p.www),d=a.parent().filter(c.selectors.wrapper),b.each(a.data(p.attrs),function(c,d){b.isUndefined(c)?a.removeAttr(d):a.attr(d,c)}),a.removeData(p.typeahead).removeData(p.www).removeData(p.attr).removeClass(c.classes.input),d.length&&(a.detach().insertAfter(d),d.remove())}function n(c){var d,e;return d=b.isJQuery(c)||b.isElement(c),e=d?a(c).first():[],e.length?e:null}var o,p,q;o=a.fn.typeahead,p={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},q={initialize:function(e,l){function m(){var c,m,q,r,s,t,u,v,w,x,y;b.each(l,function(a){a.highlight=!!e.highlight}),c=a(this),m=a(o.html.wrapper),q=n(e.hint),r=n(e.menu),s=e.hint!==!1&&!q,t=e.menu!==!1&&!r,s&&(q=f(c,o)),t&&(r=a(o.html.menu).css(o.css.menu)),q&&q.val(""),c=h(c,o),(s||t)&&(m.css(o.css.wrapper),c.css(s?o.css.input:o.css.inputWithNoHint),c.wrap(m).parent().prepend(s?q:null).append(t?r:null)),y=t?j:i,u=new d({el:c}),v=new g({hint:q,input:c},o),w=new y({node:r,datasets:l},o),x=new k({input:v,menu:w,eventBus:u,minLength:e.minLength},o),c.data(p.www,o),c.data(p.typeahead,x)}var o;return l=b.isArray(l)?l:[].slice.call(arguments,1),e=e||{},o=c(e.classNames),this.each(m)},isEnabled:function(){var a;return e(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return e(this,function(a){a.enable()}),this},disable:function(){return e(this,function(a){a.disable()}),this},isActive:function(){var a;return e(this.first(),function(b){a=b.isActive()}),a},activate:function(){return e(this,function(a){a.activate()}),this},deactivate:function(){return e(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return e(this.first(),function(b){a=b.isOpen()}),a},open:function(){return e(this,function(a){a.open()}),this},close:function(){return e(this,function(a){a.close()}),this},select:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return e(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var b;return arguments.length?(e(this,function(b){b.setVal(a)}),this):(e(this.first(),function(a){b=a.getVal()}),b)},destroy:function(){return e(this,function(a,b){m(b),a.destroy()}),this}},a.fn.typeahead=function(a){return q[a]?q[a].apply(this,[].slice.call(arguments,1)):q.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=o,this}}()});
/*! mobile-detect - v1.1.0 - 2015-05-11
https://github.com/hgoebl/mobile-detect.js */!function(a,b){a(function(){"use strict";function a(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function c(a){for(var b in a)g.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function d(a,b){this.ua=a||"",this._cache={},this.maxPhoneWidth=b||600}var e={};e.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925",Samsung:"Samsung|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)|^.*Android.*Nexus(?:(?!Mobile).)*$",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-I9205|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237P|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD",LenovoTablet:"Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris E10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.*\\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",Hudl:"Hudl HT7S3",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bJolla\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},e.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i};var f,g=Object.prototype.hasOwnProperty;return e.FALLBACK_PHONE="UnknownPhone",e.FALLBACK_TABLET="UnknownTablet",e.FALLBACK_MOBILE="UnknownMobile",f="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var a,b,d,h,i,j,k=e.mobileDetectRules;for(a in k.props)if(g.call(k.props,a)){for(b=k.props[a],f(b)||(b=[b]),i=b.length,h=0;i>h;++h)d=b[h],j=d.indexOf("[VER]"),j>=0&&(d=d.substring(0,j)+"([\\w._\\+]+)"+d.substring(j+5)),b[h]=new RegExp(d,"i");k.props[a]=b}c(k.oss),c(k.phones),c(k.tablets),c(k.uas),c(k.utils),k.oss0={WindowsPhoneOS:k.oss.WindowsPhoneOS,WindowsMobileOS:k.oss.WindowsMobileOS}}(),e.findMatch=function(a,b){for(var c in a)if(g.call(a,c)&&a[c].test(b))return c;return null},e.getVersionStr=function(a,b){var c,d,f,h,i=e.mobileDetectRules.props;if(g.call(i,a))for(c=i[a],f=c.length,d=0;f>d;++d)if(h=c[d].exec(b),null!==h)return h[1];return null},e.getVersion=function(a,b){var c=e.getVersionStr(a,b);return c?e.prepareVersionNo(c):NaN},e.prepareVersionNo=function(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)},e.isMobileFallback=function(a){return e.detectMobileBrowsers.fullPattern.test(a)||e.detectMobileBrowsers.shortPattern.test(a.substr(0,4))},e.prepareDetectionCache=function(a,c,f){if(a.mobile===b){var g,h,i;return(h=e.findMatch(e.mobileDetectRules.tablets,c))?(a.mobile=a.tablet=h,void(a.phone=null)):(g=e.findMatch(e.mobileDetectRules.phones,c))?(a.mobile=a.phone=g,void(a.tablet=null)):void(e.isMobileFallback(c)?(i=d.isPhoneSized(f),i===b?(a.mobile=e.FALLBACK_MOBILE,a.tablet=a.phone=null):i?(a.mobile=a.phone=e.FALLBACK_PHONE,a.tablet=null):(a.mobile=a.tablet=e.FALLBACK_TABLET,a.phone=null)):a.mobile=a.tablet=a.phone=null)}},e.mobileGrade=function(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":(a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile")<=5.2,
"C")},e.detectOS=function(a){return e.findMatch(e.mobileDetectRules.oss0,a)||e.findMatch(e.mobileDetectRules.oss,a)},e.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},d.prototype={constructor:d,mobile:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===b&&(this._cache.userAgent=e.findMatch(e.mobileDetectRules.uas,this.ua)),this._cache.userAgent},os:function(){return this._cache.os===b&&(this._cache.os=e.detectOS(this.ua)),this._cache.os},version:function(a){return e.getVersion(a,this.ua)},versionStr:function(a){return e.getVersionStr(a,this.ua)},is:function(b){return a(b,this.userAgent())||a(b,this.os())||a(b,this.phone())||a(b,this.tablet())||a(b,e.findMatch(e.mobileDetectRules.utils,this.ua))},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return d.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===b&&(this._cache.grade=e.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?d.isPhoneSized=function(a){return 0>a?b:e.getDeviceSmallerSide()<=a}:d.isPhoneSized=function(){},d._impl=e,d})}(function(a){if("undefined"!=typeof module&&module.exports)return function(a){module.exports=a()};if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof window)return function(a){window.MobileDetect=a()};throw new Error("unknown environment")}());
var SPB = SPB || {};

SPB.constants = {
    'desktop_min_width': 992,
    'tablet_min_width': 560,
    'banner_block_height': 440
};
var spb_scripts = spb_scripts || {};

/* helpers (start) */
spb_scripts.helpers = {

    // возвращает тип устройства
    getUserViewDevice: function() {
        var md = new MobileDetect(window.navigator.userAgent);

        if ( md.phone() ){
            return 'mobile';
        }

        if ( md.tablet() ){
            return 'tablet';
        }

        return 'desktop';
    },

    // возвращает текущий брейкпоинт
    getUserViewWidthDevice: function() {
        var md = new MobileDetect(window.navigator.userAgent);

        if ( md.phone() || document.width < SPB.constants.tablet_min_width ) {
            return 'mobile';
        }

        if ( md.tablet() || document.width < SPB.constants.desktop_min_width ) {
            return 'tablet';
        }

        return 'desktop';
    },

    matchMediaQueries: function(MediaQueries) {
        return window.matchMedia(MediaQueries).matches;
    },

    getCurrentCssDisplayClass: function(displayClass) {
        var result;
        if(typeof displayClass == undefined){
            if ( spb_scripts.helpers.matchMediaQueries('(min-width: 1200px)') ) {
              result = 'lg';
            } else
            if ( spb_scripts.helpers.matchMediaQueries('(min-width: 992px) and (max-width: 1199px)') ) {
              result = 'md';
            } else
            if ( spb_scripts.helpers.matchMediaQueries('(min-width: 561px) and (max-width: 992px)') ) {
              result = 'sm';
            } else
            if ( spb_scripts.helpers.matchMediaQueries('(max-width: 560px)') ) {
              result = 'xs';
            }
        }else{
            result = false;
            if ( spb_scripts.helpers.matchMediaQueries('(min-width: 1200px)') && displayClass == 'lg') {
              result = true;
            } else
            if ( spb_scripts.helpers.matchMediaQueries('(min-width: 992px) and (max-width: 1199px)') && displayClass == 'md') {
              result = true;
            } else
            if ( spb_scripts.helpers.matchMediaQueries('(min-width: 561px) and (max-width: 992px)') && displayClass == 'sm') {
              result = true;
            } else
            if ( spb_scripts.helpers.matchMediaQueries('(max-width: 560px)') && displayClass == 'xs') {
              result = true;
            }
        }
        return result;
    },

    // проверяем юзер агент на оперу мини
    isOperaMini: function() {
        if (navigator.userAgent.indexOf('Opera Mini') != -1) {
            return true;
        } else {
            return false;
        }
    },

    // Подстановка картинки взависимости от DevicePixelRatio
    getImagesByDevicePixelRatio: function(elem){
        var ratio = 1;
        var $elem = $(elem);
        var image_x1 = $elem.data('ratio-x1');
        var image_x2 = $elem.data('ratio-x2');
        var src = $elem.attr('src');

        if(typeof window.devicePixelRatio == "number"){
            ratio = window.devicePixelRatio;
        }

        if (src == image_x1 || src == image_x2) {
            // Проверка на уже изменёный src,
            // т.к. при изменении src срабатывает событие onload и меняет src и далее до бесконечности
            return;

        }

        if(ratio == 1 || image_x2 == ''){
            $elem.attr('src', image_x1);
        }else{
            $elem.attr('src', image_x2);
        }
    },

	// Определение Node ID по URL
	getNodeIdByURL: function(url){
		url = url || location.href;
		var regexp = /_NI(\d+)_/;
		var nid = regexp.exec(url);
		if(nid){
			return parseInt(nid[1]);
		}
	},

	ABtesting: {
		
		conf: {
			name: 'spb_abtests_index_n',
			time: 24 * 60 * 60 * 30,
			rundom: Math.floor(Math.random() * 1000) + 1
		},
		
		init: function(){
			var self = spb_scripts.helpers.ABtesting;
			
			if(self.get() === undefined){
				self.set();
			}
		},
		
		set: function(){
			var self = spb_scripts.helpers.ABtesting;
			var date = new Date(new Date().getTime() + self.conf.time);
			document.cookie = self.conf.name + '=' + self.conf.rundom + '; path=/; expires=' + date.toUTCString();
		},
		
		del: function(){
			var self = spb_scripts.helpers.ABtesting;
			var date = new Date(0);
			document.cookie = self.conf.name + '=; path=/; expires=' + date.toUTCString();
		},
		
		get: function(){
			var self = spb_scripts.helpers.ABtesting;
			var matches = document.cookie.match(new RegExp("(?:^|; )" + self.conf.name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));
			return matches ? decodeURIComponent(matches[1]) : undefined;
		},
		
		getGroup: function(group){
			var self = spb_scripts.helpers.ABtesting;
			var group = group ? group : 2;
			var cookieNum = parseInt(self.get());
			var groupNum = parseInt(cookieNum / (1000 / group) + 1);
			return groupNum;
		}
		
	}

};
/* helpers (end) */

// Запуск скриптов которым не нужно ждать загрузки страницы
spb_scripts.helpers.ABtesting.init();
var spb_scripts = spb_scripts || {};

/* читаем Cookie */
function sb_c_res_def_getCookie(name) {
    var cookie = " " + document.cookie,
        search = " " + name + "=",
        set_str = null,
        offset = 0,
        end = 0;

    if( cookie.length > 0 ){
        offset = cookie.indexOf(search);

        if( offset != -1 ){
            offset += search.length;
            end = cookie.indexOf(";", offset);

            if (end == -1) end = cookie.length;

            set_str = unescape(cookie.substring(offset, end));
        }
    }

    return(set_str);
}

/* ставим Cookie */
function sb_c_res_def_setCookie(name, expire) {
    var now = new Date();

    if( !expire )
        var expire = new Date(now.getTime() + 3600000);

    document.cookie = name + '; path=/; expires='+expire.toGMTString();
}

/* кнопка скролла наверх */
spb_scripts.scrollTopBtn = {
    init: function(){
        var self = spb_scripts.scrollTopBtn;
        self.$btn = $('#scroll-top-btn');
        self.binds();
        self.scrollShowBtn();
    },
    binds: function(){
        var self = spb_scripts.scrollTopBtn;
        self.$btn.on('click', self.scrollTop);
        $(window).on('scroll', self.scrollShowBtn);
    },
    scrollShowBtn: function(){
        var self = spb_scripts.scrollTopBtn;
        if(500 < window.pageYOffset){
            if(!self.$btn.is('.show')){
                self.$btn.addClass('show');
            }
        }else{
            if(self.$btn.is('.show')){
                self.$btn.removeClass('show');
            }
        }
    },
    scrollTop: function(){
        var self = spb_scripts.scrollTopBtn;
        window.scrollTo(0,0);
        return false;
    }
};

$(document).ready(function () {
    var actuallyNews = $('.b-actually__item');

    $.each(actuallyNews, function() {
        var elem = $(this);
        var comments = elem.next().detach();
        elem.append(comments);
    });

    var moreTopVideosObj = {
        limit: 32,
        offset: 16
    };

    $('.b-recommendations__link a, .b-recommendations__title').on('click', function(event) {
        var elem = $(this);
        var type = elem.data('type');

        if (!type) {
            return;
        }
        event.preventDefault();

        $('.list-block').removeClass('active');
        $('#' + type).addClass('active');

        $('.b-recommendations__link a, .b-recommendations__title').removeClass('active');
        elem.addClass('active');

        $('.more-btn-topvideos').removeClass('active');
        $('#more-' + type).addClass('active');
    });

    $('.b-recommendations__list').on('click', '.more-btn-topvideos', function(event) {
        var elem = $(this);
        var isOnLoad = false;
        var i = 0;
        var topVideosBlock = $('.b-recommendations__list .list-block.active').eq(0);
        var url = $(this).data('href');
        moreTopVideosObj.offset = topVideosBlock.find('.cell').length;

        event.preventDefault();

        $.ajax({
            url: url,
            type: 'post',
            beforeSend: function(xhr) {
                if (isOnLoad) {
                    xhr.abort();
                }
                isOnLoad = true;
                elem.addClass('loading');
            },
            success: function(response) {
                var $response = $(response);
                var moreBtn = $response.find('.more-btn');

                if (response === '' || (!$($response[0]).hasClass('cell')) ) {
                    isOnLoad = false;
                    elem.removeClass('loading').addClass('hide');
                    return;
                }
                elem.replaceWith(moreBtn);
                topVideosBlock.append('<span class="col-lg-12" style="height: 15px; display: block;">').append(response);
                topVideosBlock.find('.more-btn').remove();
                topVideosBlock.find('.cell').css('display', 'block');
                elem.removeClass('loading');
                isOnLoad = false;
                i++;
            },
            error: function() {
                isOnLoad = false;
                i++;
                topVideosBlock.removeClass('loading');
                return;
            }
        });
    });


    // актуальное, подгрузка
    $('#b-actualy').on('click', '.more-btn', function(event) {
        var elem = $(this);
        var actuallyBlock = $('#b-actualy');
        var isOnLoad = false;
        var page_size = 36;
        var i = 0;
        var page_offset = $('.b-actually__item').length;
        var term_id = actuallyBlock.data('tid') ? actuallyBlock.data('tid') : false;

        event.preventDefault();

        $.ajax({
            url: '/actual/more',
            type: 'GET',
            data: {
                'page_size': page_size,
                'page_offset': page_offset,
                'term_id': term_id
            },
            beforeSend: function(xhr) {
                if (isOnLoad) {
                    xhr.abort();
                }
                isOnLoad = true;
                elem.addClass('loading');
            },
            success: function(response) {
                var moreBtn = $(response).find('.more-btn');
                if (response === '') {
                    actuallyBlock = false;
                    elem.remove();
                    return;
                }
                elem.remove();
                actuallyBlock.append('<div class="col-lg-12" style="height: 15px">').append(response);
                isOnLoad = false;
                i++;
            },
            error: function() {
                isOnLoad = false;
                i++;
                elem.remove();
                return;
            }
        });
    });
});


/* Подгрузка новостей рубрики по кнопке ЕЩЕ в правом блоке (start) */
$(document).ready(function () {
    var newsRubricBlock = $('.rubric-news');
    var newsListBlock;
    var termId;
    var limit = 30;
    var isOnLoad = false;
    var i = 0;
    var moreBtn = $('.rubric-news__more');

    var loadMoreNews = function(elem) {
        newsListBlock = elem.find('.rubric-news__list');
        var offset = newsRubricBlock.find('li').length;

        $.ajax({
            url: '/news/more/' + termId + '/' +  limit + '/' + offset,
            beforeSend: function(xhr) {
                if (isOnLoad) {
                    xhr.abort();
                }
                isOnLoad = true;
                newsListBlock.addClass('loading');
            },
            success: function(response) {
                newsListBlock.append(response);
                isOnLoad = false;
                i++;
                newsListBlock.removeClass('loading');
                if (i <= 3) {
                    moreBtn.css('display', 'block');
                }
            },
            error: function() {
                isOnLoad = false;
                i++;
                newsListBlock.removeClass('loading');
                if (i <= 3) {
                    moreBtn.css('display', 'block');
                }
                return;
            }
        });
    };

    newsRubricBlock.on('click', '.rubric-news__more', function(event) {
        var elem = $(this).parent('.rubric-news');
        termId = elem.data('autoload-tid');

        event.preventDefault();

        $(this).css('display', 'none');
        loadMoreNews(elem, termId);
    });
});
/* Подгрузка новостей рубрики по кнопке ЕЩЕ в правом блоке (end) */

/* Подгрузка тизеров для рубрики по кнопке ЕЩЕ (start) */
$(document).ready(function () {
    $('#more-teazer-list').on('click', function(event) {
        var elem = $(this);
        var teazerList = $('.teazer-list');
        var termId = teazerList.data('tid');
        var offset = teazerList.find('li').length;
        var limit = 30;
        var isOnLoad = false;
        var longread = teazerList.data('longread') === true ? 1 : 0;

        event.preventDefault();

        $.ajax({
            type: 'GET',
            url: '/teazer-list/more',
            data: {
                'limit': limit,
                'offset': offset,
                'term_id': termId,
                'longread': longread
            },
            beforeSend: function(xhr) {
                if (isOnLoad) {
                    xhr.abort();
                }
                isOnLoad = true;
                teazerList.addClass('loading');
                elem.addClass('loading');
            },
            success: function(response) {
                teazerList.append(response);
                isOnLoad = false;
                teazerList.removeClass('loading');
                elem.removeClass('loading');
            },
            error: function() {
                isOnLoad = false;
                teazerList.removeClass('loading');
                elem.removeClass('loading');
                return;
            }
        });
    });
});
/* Подгрузка тизеров для рубрики по кнопке ЕЩЕ (end) */

/* Table Shorter (start) */
jQuery.fn.TablesShorter = function(options) {
    var options = jQuery.extend({
        rows: 7,
        topRows: 4,
        text: 'Развернуть',
        sides: 'bottom',
        buttonClass: 'table-shorter-2-button',
        buttonReverseClass: 'inverted',
        buttonTopClass: 'empty showUpper',
        exceptClasses: '.total-summary, .forceDisplay, .showUpper, .noHide'
    },options);

    function toggleBottom(table) {
        if (table.is('.stats-tournirs-calendar-table')) {
            var rows = table.find('tbody tr.filled:gt('+options.rows+')');
            options.rows = 3;
        }
        else if (table.is('.stats-tournirs-history-table')) {
            var rows = table.find('tbody tr:not('+options.exceptClasses+'):gt(5)');
            options.rows = 5;
        }
        else {
            var rows = table.find('tbody tr:not('+options.exceptClasses+'):gt('+options.rows+')');
        }
        if (jQuery(rows[0]).is(':visible')) {
            rows.hide();
        }
        else {
            rows.show();
        }
        table.find('.total-summary').hide();
        return rows.length;
    }

    function toggleTop(table) {
        var rows = table.find('tr.empty:not('+options.exceptClasses+')');
        if (jQuery(rows[0]).is(':visible')) {
            rows.hide();
        }
        else {
            rows.show();
        }
    }

    function addBottomButton(table) {
        var button = jQuery('<div class="table-shorter-2-button-wrap"></div>');
        var buttonElement = jQuery('<span class="table-shorter-2-button" data-rows="'+options.rows+'" data-text="'+options.text+'" data-status="1"></span>').text(options.text)
            .click(function() {
                toggleBottom(table);
                table.toggleClass('bottom-margined-table-shorter');
                $(this).toggleClass(options.buttonReverseClass);
                switch($(this).attr('data-status')) {
                    case '1':
                        $(this).prev().find('.total-summary').show();
                        $(this).text('Свернуть').attr('data-status','0');
                        break;
                    case '0':
                        $(this).prev().find('.total-summary').hide();
                        $(this).text(options.text).attr('data-status','1');
                        break;
                    default:
                        break;
                }

            });
        buttonElement.appendTo(button);

        if (table.is('.stats-tournirs-calendar-table')) {
            var rows = table.find('tbody tr.filled');
            options.rows = 3;
        }
        else if ((table.is('.stats-tournirs-calendar-table')) && (table.find('tbody tr.empty').length == 0)) {
            options.rows = 10;
        }
        else {
            var rows = table.find('tbody tr:not('+options.exceptClasses+')');
        }
        if (rows.length >= options.rows) {
            table.after(button);
        }
        else {
            if (table.is('.stats-tournirs-history-table')){ table.css('margin-bottom', '40px'); }
        }

    }

    function addTopButton(table) {
        var button = $('<tr class="'+options.buttonTopClass+'"/>').append( $('<td colspan="'+table.find('tbody tr:last td').length+'" align="center"/>').text('...') ).click(function() {
            toggleTop(table);
        });

        var rows = table.find('tbody tr.empty:not('+options.exceptClasses+')');

        if (rows.length >= options.topRows) {
            table.find('tbody').prepend(button);
            table.find('tbody tr.empty:gt('+(rows.length-(options.topRows-1))+')').show().addClass('noHide');
            toggleTop(table);
        }


    }

    function fixWidths(table) {
        table.find('tbody tr:first').find('td').each(function() {
            $(this).css('width', $(this).width()+'px');
        });
    }

    this.each(function() {
        if ($(this).is('table')) { }
        if ($(this).next().is('.'+options.buttonClass+'') || $(this).next().is('.table-shorter-group-more-button')) { return }
        // fixWidths($(this));

        switch (options.sides) {
            case 'bottom':
                toggleBottom($(this));
                addBottomButton($(this));
                break;
            case 'top':
                addTopButton($(this));
                break;
            case 'topBottom':
                addBottomButton($(this));
                var bottomrows = toggleBottom($(this));
                if (bottomrows == 0) { options.topRows = 10; }
                addTopButton($(this));

                break;
            default:
                return;
                break;
        }
    });
};
/* Table Shorter (end) */

// console.log(jQuery);
// console.log(jQuery.typeahead);
// console.log(jQuery.fn.typeahead);
jQuery(document).ready(function ($) {
    $('input.search_autocomplete').typeahead(
        {
            hint: false,
            highlight: true,
            classNames: {
                menu: 'dropdown-menu'
            }
        },
        {
            source: function (query, syncResults, asyncResults) {
                $.ajax({
                    url: '/ss_autocomplete',
                    method: 'get',
                    data: {
                        qac: query,
                        limit: 10
                    },
                    success: function (data) {
                        var items = data.split('\n');
                        asyncResults(items);
                    }
                });
            },
            limit: 10
        }
    ).bind('typeahead:select', function (e, suggestion) {
        $(this).parents('form').first().submit();
    });
});

/* sessions and cookies */
function checkCookies() {
    //empty function for IE
    if( this.req.responseText ){
        var data=this.req.responseText.split(';');
        document.getElementById('auth_form-show').style.display='none';
        document.getElementById('auth_profile').style.display='block';
        document.getElementById('auth_name').innerHTML=data[1];
    }
}

function checkSession(){
    var authapiSessionId = $.cookie('spb_ums_ssid');
    var session_handler = 'ums_session';

    var nl = new net.Loader('/'+session_handler+'?ssid='+ authapiSessionId +'&random='+Math.random(),checkCookies,null,"get",null,null);
}

function readCookie(name) {
    var nameEQ = name + "=",
        ca = document.cookie.split(';');

    for(var i=0;i < ca.length;i++){
        var c = ca[i];
        while( c.charAt(0)===' ' ){
            c = c.substring(1,c.length);
        }

        if( c.indexOf(nameEQ) === 0 )  return c.substring(nameEQ.length,c.length);
    }

    return null;
}

function setCookie2(name) {
    var now = new Date(),
        expire = new Date(now.getTime() + 3600000);

    document.cookie = name + '; path=/; domain=.sportbox.ru; expires='+expire.toGMTString();
}
/* /sessions and cookies */

var MD5 = function (string) {

    function RotateLeft(lValue, iShiftBits) {
        return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));
    }

    function AddUnsigned(lX,lY) {
        var lX4,lY4,lX8,lY8,lResult;
        lX8 = (lX & 0x80000000);
        lY8 = (lY & 0x80000000);
        lX4 = (lX & 0x40000000);
        lY4 = (lY & 0x40000000);
        lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);
        if (lX4 & lY4) {
            return (lResult ^ 0x80000000 ^ lX8 ^ lY8);
        }
        if (lX4 | lY4) {
            if (lResult & 0x40000000) {
                return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);
            } else {
                return (lResult ^ 0x40000000 ^ lX8 ^ lY8);
            }
        } else {
            return (lResult ^ lX8 ^ lY8);
        }
    }

    function F(x,y,z) { return (x & y) | ((~x) & z); }
    function G(x,y,z) { return (x & z) | (y & (~z)); }
    function H(x,y,z) { return (x ^ y ^ z); }
    function I(x,y,z) { return (y ^ (x | (~z))); }

    function FF(a,b,c,d,x,s,ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    };

    function GG(a,b,c,d,x,s,ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    };

    function HH(a,b,c,d,x,s,ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    };

    function II(a,b,c,d,x,s,ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    };

    function ConvertToWordArray(string) {
        var lWordCount;
        var lMessageLength = string.length;
        var lNumberOfWords_temp1=lMessageLength + 8;
        var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;
        var lNumberOfWords = (lNumberOfWords_temp2+1)*16;
        var lWordArray=Array(lNumberOfWords-1);
        var lBytePosition = 0;
        var lByteCount = 0;
        while ( lByteCount < lMessageLength ) {
            lWordCount = (lByteCount-(lByteCount % 4))/4;
            lBytePosition = (lByteCount % 4)*8;
            lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));
            lByteCount++;
        }
        lWordCount = (lByteCount-(lByteCount % 4))/4;
        lBytePosition = (lByteCount % 4)*8;
        lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);
        lWordArray[lNumberOfWords-2] = lMessageLength<<3;
        lWordArray[lNumberOfWords-1] = lMessageLength>>>29;
        return lWordArray;
    };

    function WordToHex(lValue) {
        var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;
        for (lCount = 0;lCount<=3;lCount++) {
            lByte = (lValue>>>(lCount*8)) & 255;
            WordToHexValue_temp = "0" + lByte.toString(16);
            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);
        }
        return WordToHexValue;
    };

    function Utf8Encode(string) {
        string = string.replace(/\r\n/g,"\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    };

    var x=Array();
    var k,AA,BB,CC,DD,a,b,c,d;
    var S11=7, S12=12, S13=17, S14=22;
    var S21=5, S22=9 , S23=14, S24=20;
    var S31=4, S32=11, S33=16, S34=23;
    var S41=6, S42=10, S43=15, S44=21;

    string = Utf8Encode(string);

    x = ConvertToWordArray(string);

    a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;

    for (k=0;k<x.length;k+=16) {
        AA=a; BB=b; CC=c; DD=d;
        a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);
        d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);
        c=FF(c,d,a,b,x[k+2], S13,0x242070DB);
        b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);
        a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);
        d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);
        c=FF(c,d,a,b,x[k+6], S13,0xA8304613);
        b=FF(b,c,d,a,x[k+7], S14,0xFD469501);
        a=FF(a,b,c,d,x[k+8], S11,0x698098D8);
        d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);
        c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);
        b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);
        a=FF(a,b,c,d,x[k+12],S11,0x6B901122);
        d=FF(d,a,b,c,x[k+13],S12,0xFD987193);
        c=FF(c,d,a,b,x[k+14],S13,0xA679438E);
        b=FF(b,c,d,a,x[k+15],S14,0x49B40821);
        a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);
        d=GG(d,a,b,c,x[k+6], S22,0xC040B340);
        c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);
        b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);
        a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);
        d=GG(d,a,b,c,x[k+10],S22,0x2441453);
        c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);
        b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);
        a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);
        d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);
        c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);
        b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);
        a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);
        d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);
        c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);
        b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);
        a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);
        d=HH(d,a,b,c,x[k+8], S32,0x8771F681);
        c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);
        b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);
        a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);
        d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);
        c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);
        b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);
        a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);
        d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);
        c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);
        b=HH(b,c,d,a,x[k+6], S34,0x4881D05);
        a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);
        d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);
        c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);
        b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);
        a=II(a,b,c,d,x[k+0], S41,0xF4292244);
        d=II(d,a,b,c,x[k+7], S42,0x432AFF97);
        c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);
        b=II(b,c,d,a,x[k+5], S44,0xFC93A039);
        a=II(a,b,c,d,x[k+12],S41,0x655B59C3);
        d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);
        c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);
        b=II(b,c,d,a,x[k+1], S44,0x85845DD1);
        a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);
        d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);
        c=II(c,d,a,b,x[k+6], S43,0xA3014314);
        b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);
        a=II(a,b,c,d,x[k+4], S41,0xF7537E82);
        d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);
        c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);
        b=II(b,c,d,a,x[k+9], S44,0xEB86D391);
        a=AddUnsigned(a,AA);
        b=AddUnsigned(b,BB);
        c=AddUnsigned(c,CC);
        d=AddUnsigned(d,DD);
    }

    var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);

    return temp.toLowerCase();
}

document.textareaCountdown = (function () {

    var textareaObject = null;
    var counterObject = null;
    var limit = 0;

    var init = function(opts){

        if(!opts.textareaObj || !opts.textareaCountObj){
            return '';
        }

        textareaObject = opts.textareaObj;
        counterObject = opts.textareaCountObj;
        limit = opts.limit;

        updateCount();
        textareaObject.on('input', updateCount);
        textareaObject.keyup(updateCount);

    };

    var updateCount = function(){
        var remaining = limit - textareaObject.val().length;
        if(remaining < 0){
            counterObject.css('color', 'red');
        } else {
            counterObject.css('color', '');
        }

        counterObject.text(remaining);
    };

    return {init:init}

})();

/**
 * Нужно указать высоту, добавить overflow: hidden
 */
$.fn.ellipsis = function(offset, savetag, savetext) {
    offset = offset || 0;
    return this.each(function() {
        var el = $(this);
        var flag = false;
        var txt;
        var excludedHtml;

        if (savetag) {
            excludedHtml = el.find(savetag).last();
            if (excludedHtml.text() === savetext) {
                el.find(savetag).last().remove();
            } else {
                excludedHtml = '';
            }
        }
        txt = el.html();

        while (txt.length > 0 && (el[0].scrollHeight - 1 > el.height() || el[0].scrollWidth - 1 > el.width())) { // - 1 - fix for chrome
            txt = txt.substr(0, txt.length - 1);
            el.html(txt + '... ').append(excludedHtml);
            flag = true;
        }

        if (flag) {
            txt = txt.substr(0, txt.length-offset);
            el.html(txt + '... ').append(excludedHtml);
        } else {
            el.html(txt).append(excludedHtml);
        }
    });
};

/*
 Move to authorization file
 */
document.authorize = (function () {

    var userData = null;

    var query_in_progress = false;

    var successCallbackArray = [];
    var errorCallbackArray = [];

    var getAjaxAuthObject = function (successCallback, errorCallback) {

        query_in_progress = true;

        var authCookieName = 'spb_ums_ssid';
        var authapiSessionId = $.cookie(authCookieName);
        var session_handler = 'ums_session';

        var authApiHandler = {
            type: 'GET',
            url: '//'+ location.host +'/' + session_handler + '?ssid='+ authapiSessionId,
            timeout:  10000,
            success:  function(data) {

                var parsedData = JSON.parse(data);

                userData = {
                    "id":       parsedData.id,
                    "name":     parsedData.name,
                    "email":    parsedData.email,
                    "is_soft_banned":  parsedData.isBanned,
                    "date_soft_banned":  parsedData.dateBanned,
                    "passMediaId": parsedData.gidId,
                    "extra_html": parsedData.extra,
                    "dataSource" : "authApi"
                };

                query_in_progress = false;
                callAllSuccessCallbacks(userData);

                return true;
            },
            error: function(err){
                //handler error
                query_in_progress = false;
                callAllErrorCallbacks(userData);

                return true;
            }
        };
        return authApiHandler;
    };

    var getCurrentUserData = function (successCallback, errorCallback) {
        var authCookieName = 'spb_ums_ssid';
        var session_cookie = $.cookie(authCookieName);

        if(!session_cookie){
            errorCallback();
            return;
        }

        // user data already exists, return it
        if(userData){
            successCallback(userData);
            return;
        }

        // save callbacks for calling after query will be done
        collectCallbacks(successCallback, errorCallback);

        if(!query_in_progress){
            // fresh call, let's make a query!
            return $.ajax(getAjaxAuthObject());
        }

    };

    var collectCallbacks = function(successCallback, errorCallback){
        if( typeof successCallback == 'function' ){
            successCallbackArray.push( successCallback );
        }
        if( typeof errorCallback == 'function' ){
            errorCallbackArray.push( errorCallback );
        }
    };

    var callAllSuccessCallbacks = function(dataForCallback){
        while( successCallbackArray[0] ){
            successCallbackArray[0](dataForCallback);
            successCallbackArray.shift();
        }
    };

    var callAllErrorCallbacks = function(dataForCallback){
        while( errorCallbackArray[0] ){
            errorCallbackArray[0](dataForCallback);
            errorCallbackArray.shift();
        }
    };

    var getUsersData = function (users, callback) {

    };

    return {
        getCurrentUserData: getCurrentUserData,
        getUsersData: getUsersData,
        authMethod: true
    };
})();

/* User face */
spb_scripts['user_face'] = function () {
    function callPixel(userId, prefix) {
        var cookieName = 'getintent';
        var getintentUrl = '//px.adhigh.net/p/cm/';
        var domain = getDomainName(location.hostname, 2);
        var getintentCookie = readCookie(cookieName);

        if (getintentCookie !== userId) {
            var pixelUrl = getintentUrl + prefix + '?u=' + userId + '&source=' + domain;
            (new Image()).src = pixelUrl;
            document.cookie = cookieName + '=' + userId;
        }
    }

    function callUserTracking(userId) {
        var THIRTY_MINUTES = 30 * 60 * 1000;
        var params = spb_scripts.userTrackingParams;

        if (userId) {
            params.pmid = userId;
        }

        userTracking.init({
            trackers: {
                'page_view': true,
                'page_ping': true,
            },
            params: params,
            settings: {
                expires: THIRTY_MINUTES,
                siteId: 15
            }
        });
    }

    function getDomainName(hostname, level) {
        return hostname.split('.').slice(-level).join('.');
    }

    var successCallback = function () {
        var successAuthApiCallback = function (user) {
            callPixel(user.passMediaId, 'passm');
            callUserTracking(user.passMediaId);

            var extra_html = "";
            if(user.extra_html){
                extra_html = '<span style="padding-left: 10px;">' + user.extra_html + '</span>';
            }
            var html = '<div id="user_block">' +
                '<a class="avatar" style="display: none" href="/gid/login/form"></a>' +
                '<span style="color: #fff;"><a href="/ums_profile">' + user.name + '</a></span>' +
                '<a style="padding-left:10px;" id="user_logout_link" href="/gid/logout">Выход</a>' + extra_html + '</div>';

            $('#incut_block').html(html);
        };

        return successAuthApiCallback;
    }

    var errorCallback = function () {
        var metricaId = '1598595';
        window.ym(metricaId, 'getClientID', function(clientID) {
            callPixel(clientID, 'gpm');
        });
        callUserTracking();

        //$('#incut_block').append('<a id="enter_link" onclick="spb_scripts.Components.LoginPopup.toggle(event)">Войти</a>');
    };

    // draw login link before any requests
    $('#incut_block').html('<a id="enter_link" href="/gid/login/form?r=' + window.location.href + '">Войти</a>');
    document.authorize.getCurrentUserData(successCallback(), errorCallback);
}

/**
 * Comments
 */

// Date_ru_utf-8
// date localization for locale 'ru-RU', utf-8 encoding
// provided by Sergey Nechaev http://nechaev.org/)
Date.dayNames = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];
Date.abbrDayNames = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];
Date.monthNames = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];
Date.monthNamesGenitive = ['Января', 'Февраля', 'Марта', 'Апреля', 'Мая', 'Июня', 'Июля', 'Августа', 'Сентября', 'Октября', 'Ноября', 'Декабря'];
Date.abbrMonthNames = ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'];
Date.firstDayOfWeek = 1;
Date.format = 'dd.mm.yyyy';
// End  date_ru_utf-8

document.comments = (function () {
    var conf = {
            comments_container_id: 'spb_comments_2014',
            comments_texteare_id: 'spb_comments_textarea',
            comments_send_btn: 'spb-comments-form-submit',
            thread_ajax_url: '',
            current_url: window.url('path'),
            current_url_md5: '',
            comment_add_url: '/comments/add',
            comment_like_url: '/comments/like',
            comment_delete_url: '/comments/delete',
            comment_hardbanuser_url: '/comments/hardban',
            comment_softbanuser_url: '/comments/softban',
            current_authapi_user_obj: null,
            hide_comments: true,
            comments_per_page: 0,
            comments_count: 0,
            comments_collapse_rate_limit: -1,
            is_on_submit: false
        },
        state = {
            current_page_number: 1
        };

    var init = function () {

        if ( Drupal && Drupal.settings && Drupal.settings.spb_comm !== undefined ) {
            conf.current_url = Drupal.settings.spb_comm.nodealias;
            conf.current_url_md5 = MD5(conf.current_url);
            conf.thread_ajax_url = '/comments/' + conf.current_url_md5 + '/list';

            // get auth data
            document.authorize.getCurrentUserData(
                function(userData){
                    conf.current_authapi_user_obj = userData;
                    initCommentsThreadHTML();
                },
                function(){
                    initCommentsThreadHTML();
                }
            );
        } else {
            console.warn('Drupal.settings.spb_comm undefined');
        }
    };

    var showThrobler = function(){
        $('#' + conf.comments_container_id).css('background', 'url(https://s-cdn.sportbox.ru/sites/all/libraries/design/_spbver1_/img/ajax-loader.gif) no-repeat 50% 50%');
    }

    var hideThrobler = function(){
        $('#' + conf.comments_container_id).css('background', 'none');
    }

    var initCommentsThreadHTML = function(){

        // clear container data
        clearCommentsContainerHTML();
        showThrobler();

        // return ajax promise
        return $.ajax({
            type: 'GET',
            url: '//'+ location.host + conf.thread_ajax_url + '/' + state.current_page_number,
            dataType: "json",
            success: renderCommentsHTML,
            error: renderCommentsHTML
        });

    }

    var clearCommentsContainerHTML = function(){

        document.getElementById(conf.comments_container_id).innerHTML = '';

    }

    var hideComment = function(el){
        $(el).find('.comment-body').wrapInner("<div style='display: none;'></div>");
        $(el).find('.comment-body').append('<a href=# onclick="return document.comments.showComment(this)" class="comment-expand">Раскрыть</a>');
    };

    var showComment = function(el){
        $(el).siblings("div").show();
        $(el).remove();
        return false;
    }

    var hideBadComments = function(j_comments_wrapper){

        var show_bad_comments = readCookie('show_bad_comments');
        if (show_bad_comments === "1") {
            return false;
        }

        if(!j_comments_wrapper){
            j_comments_wrapper = $('.spb-comments-wrapper');
        }

        $(j_comments_wrapper).children('.comment').each(function(){
            // hide negative rating and softbanned comments
            if ( ($(this).data('rating') <= conf.comments_collapse_rate_limit) || $(this).data('author-is-softbanned')){
                hideComment(this);
            }
        });
    }

    var hideBadCommentsHandler = function(){
        $.cookie("show_bad_comments", null, { path: '/' });

        $('.hide_bad_comments').css({ 'display' : 'none'});
        $('.show_bad_comments').css({ 'display' : 'inline'});

        hideBadComments($('.spb-comments-wrapper'));
    }

    var showBadCommentsHandler = function(j_comments_wrapper){

        if(!j_comments_wrapper){
            j_comments_wrapper = $('.spb-comments-wrapper');
        }

        $.cookie('show_bad_comments', 1, { expires: 5000, path: '/' });//Wed, 18 May 2033 03:33:20 GMT

        $(j_comments_wrapper).children('.comment').each(function(){
            showComment($('.comment-expand',this));
        });

        $('.hide_bad_comments').css({ 'display' : 'inline'});
        $('.show_bad_comments').css({ 'display' : 'none'});
    }

    var renderCommentsHTML = function(comments_json){

        hideThrobler();

        var j_comments_html = $('<div class="spb-comments-empty">Комментариев пока нет</div>');

        var likes_arr = new Array();
        if(comments_json && comments_json.last_likes_arr){
            likes_arr = comments_json.last_likes_arr;
        }

        if(comments_json && comments_json.html){
            j_comments_html = $(comments_json.html);
            conf.comments_count = j_comments_html.filter('#spb_comments_wrapper').data('comments-total');
            conf.comments_per_page = j_comments_html.filter('#spb_comments_wrapper').data('comments-per-page');
        }

        var comment_form = '';

        //
        //  Logged user function: like, current user comments hightlight, comment form
        //

        if(conf.current_authapi_user_obj && (conf.current_authapi_user_obj.id > 0)){
            if (conf.current_authapi_user_obj.is_soft_banned == 1) {
                var soft_banned_delta_time = 86400*3;
                var date_to_soft_banned = parseInt(conf.current_authapi_user_obj.date_soft_banned) + soft_banned_delta_time;
                var date_to_soft_banned_ms = date_to_soft_banned*1000;
                var date_to_soft_obj = new Date(date_to_soft_banned_ms);
                var month_to_soft_banned = Date.monthNamesGenitive[date_to_soft_obj.getMonth()];
                var minutes_to_soft_banned = date_to_soft_obj.getMinutes();
                if (minutes_to_soft_banned < 10) {
                    minutes_to_soft_banned = '0' + minutes_to_soft_banned.toString();
                }
                j_comments_html.prepend('<div class="spb-comments-anon-message">Вы не можете оставлять комментарии в связи с нарушеним <a href="http://news.sportbox.ru/terms_of_service" target="_blank">правил</a>. Возможность добавления комментариев станет доступной ' +  date_to_soft_obj.getDate() + ' ' + month_to_soft_banned + ' в ' + date_to_soft_obj.getHours() + ':' + minutes_to_soft_banned + '.</div>');
            } else {
                // like controlls
                j_comments_html = appendLikeControllsToThreadList(j_comments_html, likes_arr);


                j_comments_html.children('.comment').each(function(){
                    // highlight current user comments
                    if($(this).data('author-id') == conf.current_authapi_user_obj.id){
                        $(this).addClass('comment-curr-usr');
                    }
                });

                // generate form to add comments
                comment_form = getRenderedCommentForm();
            }
        } else {
            j_comments_html.prepend('<div class="spb-comments-anon-message">Для того, чтобы добавить комментарий, необходимо <a href="//news.sportbox.ru/ums_signon?destination=' + encodeURIComponent(window.url())  + '">войти на сайт</a>.</div>');
        }

        hideBadComments(j_comments_html);

        // comment created date append
        //j_comments_html = processAndAppendCommentsDateTime(j_comments_html);

        var paginator_html = getRenderedPaginator();

        var shoHideBadCommentsControl = getRenderedShowHideBadCommentsControl();


        clearCommentsContainerHTML();

        // inserts collected html
        $('#' + conf.comments_container_id).append(comment_form, j_comments_html, shoHideBadCommentsControl,  paginator_html);

        $(".comment").on("touchstart touchend", function() {
            var hoverClass = "hover-touch";
            $(this).addClass(hoverClass).siblings().removeClass(hoverClass);
        });

    }

    var insertNickname = function(nickName){

        var current_text = $('#' + conf.comments_texteare_id).val();
        $('#' + conf.comments_texteare_id).val(nickName + ', ' + current_text);
        scrollToTextarea();

        return false;

    };

    var getRenderedCommentForm = function(){

        var form_html = '<div class="spb-comments-form-wrapper"><form action="/comments/add" method="POST" class="spb-comments-form"><textarea name="comment_text" class="spb-comments-form-textarea" id="spb_comments_textarea"></textarea><input type="submit" class="spb-comments-form-submit" value="Добавить комментарий"><input type="button" value="Обновить" id="comments-update" class="spb-comments-form-submit"><a href="/terms_of_service" class="spb-comments-form-rules" target="_blank">Правила</a><span class="spb-comments-form-textarea-countdown">3000</span><input type="hidden" name="page_url" value="' + conf.current_url + '"></form></div>';
        if ($.cookie('test_comments_images') == 1 ) {
            form_html = '<div class="spb-comments-form-wrapper"><form action="/comments/add" method="POST" class="spb-comments-form"><div class="spb-comments-form-add-wrapper"><div class="spb-comments-form-image-upload"><div class="spb-comments-form-image-upload-field"><input type="file" multiple="true" name="images[]" size="20"></div></div><textarea name="comment_text" class="spb-comments-form-textarea" id="spb_comments_textarea"></textarea></div><input type="submit" class="spb-comments-form-submit" value="Добавить комментарий"><input type="button" value="Обновить" id="comments-update" class="spb-comments-form-submit"><a href="/terms_of_service" class="spb-comments-form-rules" target="_blank">Правила</a><span class="spb-comments-form-textarea-countdown">3000</span><input type="hidden" name="page_url" value="' + conf.current_url + '"></form></div>';
        }
        var j_form_html = $(form_html);

        j_form_html.find('#comments-update').click(initCommentsThreadHTML);

        j_form_html.find('form').submit(function(e){
            e.preventDefault();
            validateCommentFormData(e);
        });

        if ($.cookie('test_comments_images') == 1) {

            /** INPUT MULTI SELECT IMAGES*/
            j_form_html.find('.spb-comments-form-image-upload-field input').change(function(){
                uploadCommentImages(j_form_html, this.files);
                $(this).val('');
            });

            /** PREVIEWS IMAGES */
            j_form_html.on('mouseenter', '.spb-comments-image-preview', function(){
                if ($(this).find('img').length) {
                    $(this).append('<span class="spb-comments-image-preview__remove">&times;</span>');
                }
            });
            j_form_html.on('mouseleave', '.spb-comments-image-preview', function(){
                $(this).find('.spb-comments-image-preview__remove').remove();
            });
            j_form_html.on('click', '.spb-comments-image-preview__remove', function(){
                $(this).parents('.spb-comments-image-preview').remove();
            });

            /** DRAG'N'DROP IMAGES*/
            var commentsTextarea = j_form_html.find('.spb-comments-form-textarea');

            $(document).on('dragenter', function (e)
            {
                e.stopPropagation();
                e.preventDefault();
                commentsTextarea.addClass('spb-comments-form-textarea-droping');
                var dt = e.originalEvent.dataTransfer;
                dt.effectAllowed = dt.dropEffect = 'none';

            });
            $(document).on('dragover', function (e)
            {
                e.stopPropagation();
                e.preventDefault();
                commentsTextarea.addClass('spb-comments-form-textarea-droping');
                var dt = e.originalEvent.dataTransfer;
                dt.effectAllowed = dt.dropEffect = 'none';
            });
            $(document).on('drop', function (e)
            {
                e.stopPropagation();
                e.preventDefault();
                commentsTextarea.removeClass('spb-comments-form-textarea-droping');
            });
            $(document).on('dragleave', function (e)
            {
                e.stopPropagation();
                e.preventDefault();
                commentsTextarea.removeClass('spb-comments-form-textarea-droping');
            });

            commentsTextarea.on('dragenter', function (e)
            {
                e.stopPropagation();
                e.preventDefault();
                $(this).addClass('spb-comments-form-textarea-droping');
            });
            commentsTextarea.on('dragover', function (e)
            {
                e.stopPropagation();
                e.preventDefault();
                $(this).addClass('spb-comments-form-textarea-droping');
            });
            commentsTextarea.on('drop', function (e)
            {
                $(this).removeClass('spb-comments-form-textarea-droping');
                e.preventDefault();
                var files = e.originalEvent.dataTransfer.files;
                uploadCommentImages(j_form_html, files);
            });

        }

        document.textareaCountdown.init({
            textareaObj: j_form_html.find('.spb-comments-form-textarea'),
            textareaCountObj: j_form_html.find('.spb-comments-form-textarea-countdown'),
            limit: 500});

        return j_form_html;

    }

    /** UPLOAD COMMENT IMAGES */
    var commentImagePreviewHeight = 120;
    var uploadCommentImages = function(j_form_html, files){
        j_form_html.find('.spb-comments-form-image-upload-field input').attr("disabled", true);
        j_form_html.find('.spb-comments-form-submit').attr("disabled", true);
        j_form_html.append('<div class="spb-comment-form-disabler"></div>');

        if (!j_form_html.find('.spb-comments-images-preview-wrapper').length) {
            j_form_html.find('.spb-comments-form-add-wrapper').append('<div class="spb-comments-images-preview-wrapper"></div>');
        }

        var images_preview_wrapper = j_form_html.find('.spb-comments-images-preview-wrapper');
        var images_previews_count = images_preview_wrapper.find('.spb-comments-image-preview').length;
        if (images_previews_count)
        {
            var last_preview = images_preview_wrapper.find('.spb-comments-image-preview').get(images_previews_count - 1);
            images_previews_count = parseInt($(last_preview).attr('data-number')) + 1;
        }

        var fd = new FormData();
        $.each(files, function(i, file){
            fd.append('images_list[]', file);
            var number = (images_previews_count+i);
            images_preview_wrapper.append('<div data-number="'+ number +'" id="spbCommentImagePreview_'+ number +'" class="spb-comments-image-preview">&nbsp;<div class="spb-comment-preview-progress"><div class="spb-comment-preview-progress-bar spb-comment-preview-progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div>')
        });

        $.ajax({
            url: '/comments/image/upload',
            type: "POST",
            data: fd,
            processData: false,
            contentType: false,
            dataType: "json",
            success: function(data){
                if (data)
                {
                    $.each(data, function(i, image_path_in_images){
                        var previewContainer = $('#spbCommentImagePreview_'+(images_previews_count+i));
                        if (image_path_in_images == false) {
                            previewContainer.remove();
                            return true;
                        }

                        previewContainer.html('<img src="https://s-cdn.sportbox.ru/images/styles/120_120_auto/'+ image_path_in_images +'"><input type="hidden" name="comment_images[]" value="'+ image_path_in_images +'">');
                        var previewImg = previewContainer.find('img');
                        previewImg.load(function(){
                            var previewImgMargin = Math.round((commentImagePreviewHeight - previewImg.height()) / 2);
                            previewImg.css("margin-top", previewImgMargin+'px');
                        });
                    });
                }
                j_form_html.find('.spb-comments-form-image-upload-field input').attr("disabled", false);
                j_form_html.find('.spb-comments-form-submit').attr("disabled", false);
                j_form_html.find('.spb-comment-form-disabler').remove();
            }
        });
    }

    var showMoreImages = function(el) {
        $(el).parents('.comment-images').find('.comment-other-images-container').show();
        $(el).remove();
        return;
    };

    var validateCommentFormData = function(e){

        var comment_text = $(e.target).find('textarea').val();

        var comment_images = [];
        $.each($(e.target).find('input[name="comment_images[]"]'), function(i, inp){
            if ($(inp).val() != '')
            {
                comment_images.push($(inp).val());
            }
        });

        // check for message is not empty
        if(($.trim(comment_text) == '') && (!comment_images.length)){
            alert('Введите сообщение');
            return;
        }

        var page_url = $(e.target).find('input[name="page_url"]').val();
        if(page_url == ''){
            alert('Ошибка формы');
            return;
        }

        submitCommentFormData(comment_text, page_url, comment_images);

    }

    var submitCommentFormData = function(comment_text, page_url, comment_images){

        $.ajax({
            url: conf.comment_add_url,
            beforeSend: function(xhr) {
                if (conf.is_on_submit) {
                    xhr.abort();
                }
                conf.is_on_submit = true;
                $('.' + conf.comments_send_btn).addClass('locked');
            },
            data: {
                'comment_text': comment_text,
                'page_url': page_url,
                'comment_images': comment_images
            },
            type: 'post',
            dataType: "json",
            success: function(json){
                renderCommentsHTML(json);
                selectFirstPage();
                setTimeout(function() {
                    conf.is_on_submit = false;
                    $('.' + conf.comments_send_btn).removeClass('locked');
                }, 3000);
            },
            error: function(){
                alert('Ошибка отправки комментария');
                setTimeout(function() {
                    conf.is_on_submit = false;
                    $('.' + conf.comments_send_btn).removeClass('locked');
                }, 3000);
            }
        });

    }

    var getRenderedPaginator = function(){

        // calculate pages
        var pages_count = Math.ceil(conf.comments_count / conf.comments_per_page);

        if(!pages_count || pages_count == 1){
            return '';
        }

        var prev_active_class = '';
        if(state.current_page_number > 1){
            prev_active_class = ' active';
        }
        var prev_page_link = '<li class="pager-previous first' + prev_active_class + '">← <span>предыдущая</span></li>';


        var next_active_class = '';
        if(state.current_page_number < pages_count){
            next_active_class = ' active';
        }
        var next_page_link = '<li class="pager-next last' + next_active_class + '"><span>следующая</span> →</li>';


        var pager_html = '<div class="ls-pager-def"><div class="item-list"><ul class="pager-prev-next">' + prev_page_link + next_page_link + '</ul></div><div class="item-list"><ul class="pager">';

        for(var i=1;i<=pages_count;i++){
            classStr = '';
            if(state.current_page_number == i){
                classStr = ' class="pager-current"';
            }
            pager_html += '<li data-number="' + i + '"' + classStr + '><span>' + i + '</span></li>';
        }

        pager_html += '</ul></div></div>';

        var j_pager_html = $(pager_html);
        j_pager_html.find('.pager li span').click(processSelectedPagerItem);
        j_pager_html.find('.pager-prev-next li span').click(function(e){
            if($(e.target).parent().hasClass('pager-previous')){
                var prev_page_li = $('#' + conf.comments_container_id + ' li.pager-current span').parent().prev();
                prev_page_li.children('span').click();
            } else {
                var next_page_li = $('#' + conf.comments_container_id + ' li.pager-current span').parent().next();
                next_page_li.children('span').click();
            }
        });

        return j_pager_html;

    }

    var getRenderedShowHideBadCommentsControl = function(){


        var hideControl = $('<span class="hide_bad_comments" style="display:inline;" onclick="return document.comments.hideBadCommentsHandler();">Скрыть плохие</span>');
        var showControl = $('<span class="show_bad_comments" style="display:inline;" onclick="return document.comments.showBadCommentsHandler()">Показать плохие</span>');

        var show_bad_comments = readCookie('show_bad_comments');
        if (show_bad_comments === "1"){
            showControl.css({ 'display' : 'none'});
        }else{
            hideControl.css({ 'display' : 'none'});
        }

        var html = $('<div class="spb-comments-visibility-toggler"></div>').append(hideControl, showControl);
        return html;
    }

    var processSelectedPagerItem = function(e){

        $('#' + conf.comments_container_id + ' .pager li').removeClass('pager-current');
        var pager_container = $(e.target).parent();
        pager_container.addClass('pager-current');

        state.current_page_number = pager_container.data('number');
        initCommentsThreadHTML();
        scrollToTextarea();

    };

    var scrollToTextarea = function(){

        $("html, body").scrollTop($("#" + conf.comments_container_id).offset().top);

    };

    var appendLikeControllsToThreadList = function(j_comments_list_html, likes_arr){
        j_comments_list_html.children('.comment').each(function(){
            var controlls_minus_html = '<li class="comment-rate-minus">&ndash;</li>';
            var controlls_plus_html = '<li class="comment-rate-plus">+</li>';

            var allow_only_plus_like = $(this).data('only-plus');
            if(allow_only_plus_like){
                controlls_minus_html = '';
            }

            var controlls_container = $(this).children('.clearfix').children('.comment-rate');
            var comment_id = $(this).data('comment_id');
            var comment_rating = $(this).data('rating');

            var controlls_value_html = '<li class="comment-rate-value">' + comment_rating + '</li>';

            controlls_container.append(controlls_minus_html, controlls_value_html, controlls_plus_html);

            // mark liked comments
            if(likes_arr[comment_id]){
                j_comments_list_html = disableLikeControlls(comment_id, comment_rating, j_comments_list_html);
            }
        });

        j_comments_list_html.on('click', '.comment-rate-minus, .comment-rate-plus', processCommentRate);

        return j_comments_list_html;

    }

    var processCommentRate = function(e){

        if($(e.target).parent().hasClass('disabled')){
            return;
        }

        var comment_id = $(e.target).parents('.comment').data('comment_id');
        if(!comment_id){
            return;
        }

        var rate_vector = -1;

        if($(e.target).hasClass('comment-rate-plus')){
            rate_vector = 1;
        }

        var allow_only_plus_like = $(e.target).parents('.comment').data('only-plus');
        if((rate_vector == -1) && allow_only_plus_like){
            return;
        }

        disableLikeControlls(comment_id, rate_vector);
        changeCommentRating(comment_id, rate_vector);

        $.ajax(
            {
                url     : conf.comment_like_url,
                data    : {
                    comment_id: comment_id,
                    like_value: rate_vector
                },
                type    : 'post'
            }
        );

    };

    var disableLikeControlls = function(comment_id, rate_vector, container){

        $('#comment_' + comment_id + ' .comment-rate', container).addClass('disabled');

        var like_button_class_to_remove = 'comment-rate-plus';
        var like_button_class_to_highlight = 'comment-rate-minus';
        if(rate_vector > '0'){
            like_button_class_to_remove = 'comment-rate-minus';
            like_button_class_to_highlight = 'comment-rate-plus';
        }

        $('#comment_' + comment_id + ' .' + like_button_class_to_remove, container).empty();
        $('#comment_' + comment_id + ' .' + like_button_class_to_highlight, container).addClass('selected');

        if(container){
            return container;
        }

    };

    var changeCommentRating = function(comment_id, rate_vector){

        var comment_rating_obj = $('#comment_' + comment_id + ' .comment-rate-value');
        var comment_rating_value = comment_rating_obj[0].innerHTML;
        var updated_comment_rating_value = parseInt(comment_rating_value) + parseInt(rate_vector);
        comment_rating_obj[0].innerHTML = updated_comment_rating_value;
        if (updated_comment_rating_value <= conf.comments_collapse_rate_limit){
            hideComment(  $('#comment_' + comment_id));
        }

    };

    var processAndAppendCommentsDateTime = function(j_comments_html){

        j_comments_html.children('.comment').each(function(){
            $(this).children('.clearfix').children('.comment-date')[0].innerHTML = dateStringSinceDateFormatter($(this).data('created-ts'));
        });

        return j_comments_html;

    };

    var selectFirstPage = function() {
        state.current_page_number = 1;
        $('#' + conf.comments_container_id + ' .ls-pager-def').remove();

        var paginator = getRenderedPaginator();
        $('#' + conf.comments_container_id).append(paginator);
    };

    var confirmPopup = function() {
        if (confirm('Вы уверены?')) {
            return true;
        }

        return false;
    }

    var deleteComment = function(comment_id) {

        if (('ontouchstart' in document.documentElement) && !confirmPopup()) {
            return false;
        }

        $.ajax({
            url     : conf.comment_delete_url,
            data    : {
                'comment_id'      : comment_id,
                'page_url'  : conf.current_url,
                'current_page_number': state.current_page_number
            },
            type    : 'post',
            dataType: 'json',
            success : function(json){ renderCommentsHTML(json); },
            error   : function(){alert('Ошибка удаления комментария')}
        });
    };

    var hardBanUser = function(user_id, comment_id) {

        if (!confirmPopup()) {
            return false;
        }

        var comment_text = $('#comment_' + comment_id).find('.comment-content').html();

        $.ajax({
            url     : conf.comment_hardbanuser_url,
            data    : {
                'user_id'      : user_id,
                'comment_id'   : comment_id,
                'page_url'  : conf.current_url,
                'current_page_number': state.current_page_number,
                'comment_text': comment_text
            },
            type    : 'post',
            dataType: 'json',
            success : function(json){ renderCommentsHTML(json); },
            error   : function(){alert('Ошибка блокировки пользователя')}
        });
    };

    var softBanUser = function(user_id, comment_id) {

        if (!confirmPopup()) {
            return false;
        }

        var comment_text = $('#comment_' + comment_id).find('.comment-content').html();

        $.ajax({
            url     : conf.comment_softbanuser_url,
            data    : {
                'user_id'      : user_id,
                'comment_id'   : comment_id,
                'page_url'  : conf.current_url,
                'current_page_number': state.current_page_number,
                'comment_text': comment_text
            },
            type    : 'post',
            dataType: 'json',
            success : function(json){ renderCommentsHTML(json); },
            error   : function(){alert('Ошибка блокировки пользователя')}
        });
    };

    return {
        init: init,
        conf: conf,
        showComment: showComment,
        deleteComment: deleteComment,
        showMoreImages: showMoreImages,
        hardBanUser: hardBanUser,
        softBanUser: softBanUser,
        insertNickname: insertNickname,
        showBadCommentsHandler: showBadCommentsHandler,
        hideBadCommentsHandler: hideBadCommentsHandler,
        hide_comments: conf.hide_comments
    };
})();


/* Comments (start) */
spb_scripts.spb_comments = function(options){

    var authCookieName = window.authCookieName ? window.authCookieName : 'spb_ums_ssid';
    var $ = jQuery,
        comments_wrap = $('#spb-comments-new'),
        form       = null,
        commentsLoaded = false,
        comments   = null,
        safe_panel = null,
        pagen_now  = 0,
        sending    = false,
        textShowComments    = 'Показать комментарии',
        textHideComments    = 'Скрыть комментарии',

        options	= $.extend({
            xreal: null,
            title: '',
            is_popup: false,
            js: '',
            auth_cookie: authCookieName,
            debug: false
        }, options);




    var box = {

        init: function() {
            box.show();
        },

        show: function(){

            if(!commentsLoaded){
                comments = comments_wrap.find('.sp_comments_list:first');
                safe_panel = $('<div style=\'position:absolute;background:#000\'><span style=\'width:13px; height:13px;left:-15px;top:-15px;position:absolute;background:url(https://s-cdn.sportbox.ru/sites/all/libraries/design/_spbver9_/img/throbber.gif) no-repeat 0 -20px\'></span></div>');
                safe_panel.appendTo('body').css({opacity:0, zIndex:10});
                if( options.is_popup ){
                    box.init_forum_form();
                    box.init_forum_posts();
                }
                else {
                    box.init_tabs();
                }
                commentsLoaded = true;
            }
            comments_wrap.show();

        },

        init_tabs: function() {
            var fn_init = {
                'rs': function () {
                    var authCookieName = window.authCookieName ? window.authCookieName : 'spb_ums_ssid';
                    try {
                        var fullSiteUrl,
                            auth_param;

                        if (!Drupal.settings.spb_comm.site_url || (Drupal.settings.spb_comm.site_url == '')) {
                            fullSiteUrl = 'http://' + Drupal.settings.spb_comm.nodealias;
                        }
                        else {
                            fullSiteUrl = Drupal.settings.spb_comm.site_url + '/' + Drupal.settings.spb_comm.nodealias;
                        }

                        if (readCookie(authCookieName)) {
                            auth_param = 1;
                        }
                        else {
                            auth_param = 0;
                        }

                        var loadRsScript = function() {
                            $.getScript('http://russiasport.ru/sites/all/modules/mod_comments_api/js/mod_comments_api_out3.js', function () {
                                russiasport_comments_api('rs_comments', 'http://russiasport.ru/', auth_param, fullSiteUrl);
                            });
                        };

                        var comments_toggle_link = $('.comments-open-close-link');

                        if ($.cookie('spb_comments_keep_opened_n') === "1") {
                            loadRsScript();
                            comments_toggle_link.hide();
                        }

                        comments_toggle_link.click(function () {
                            $.cookie('spb_comments_keep_opened_n', 1, { expires: 30, path: '/' + Drupal.settings.spb_comm.nodealias });
                            loadRsScript();
                            comments_toggle_link.hide();
                        });

                    }
                    catch (e) {
                    }
                },

                'default': function() {
                    /* На сегодняшний день 'default' означает форумные комментарии */
                    box.load_forum_form((new RegExp(options.auth_cookie).test(document.cookie)));
                },

                'spb': function() {

                    var spb_comments_toggle_link = $('.spb-comments-open-close-link');

                    if(document.comments.hide_comments) {
                        if ($.cookie('spb_comments_keep_opened_n') === "1") {
                            box.init_spb_comments();
                            spb_comments_toggle_link.hide();
                        }

                        spb_comments_toggle_link.click(function () {
                            $.cookie('spb_comments_keep_opened_n', 1, { expires: 30, path: '/' + Drupal.settings.spb_comm.nodealias });
                            box.init_spb_comments();
                            spb_comments_toggle_link.hide();
                        });
                    } else {
                        box.init_spb_comments();
                        spb_comments_toggle_link.hide();
                    }
                },


                'vk': function(){
                    if( typeof window.VK == 'undefined' )
                        $.getScript(  'http://userapi.com/js/api/openapi.js?48',  function(){box.init_vk()}  );
                    else
                        box.init_vk();
                },

                'fb': function(){
                    $('#fb_comments').addClass('fb-comments');
                    if( window.FB )
                        FB.XFBML.parse( document.body, function(){$('#fb_comments span:first').width('100%')} );
                }
            };

            var select_tab = function( type ){

                var last = $('.sp_c_comm_def_tab_active:first');

                if( last.length ){
                    var last_type = last.data('type');
                    if( last_type == type ) return;

                    last.removeClass('sp_c_comm_def_tab_active');
                    $('.sp_c_comm_def_list-' + last_type + ':first').hide();
                }

                if( fn_init[type] ){
                    fn_init[type]();
                    delete fn_init[type]
                }
                sb_c_res_def_setCookie('sp_c_comm_def_tab_active='+type);
                $('.sp_c_comm_def_tab-' + type).addClass('sp_c_comm_def_tab_active');
                $('.sp_c_comm_def_list-' + type + ':first').show()
            }

            $('.sp_c_comm_def_tab').click(function(){
                select_tab($(this).data('type'))
            });


            var type = sb_c_res_def_getCookie('sp_c_comm_def_tab_active');
            if( !type || !/^(vk|fb|rs|spb|default)$/.test(type) )  type = 'rs';
            select_tab( type )
        },


        init_vk: function() {
            VK.init({apiId:2828493, onlyWidgets:true});
            VK.Widgets.Comments('vk_comments', {
                limit: 50,
                attach: '*',
                autoPublish: 1,
                mini: 1
            }, vk_page_id);

        },


        init_forum_form: function(){
            form = comments_wrap.find('form');
            $('#sp_update_comments').live('click',function(e){
                e.preventDefault();
                if( !$('#sp_update_comments_loader')[0] )
                    $('body').append('<div id="sp_update_comments_loader" style="left:'+ ($(this).offset().left + $(this).width() + 14) +'px;top:'+ ($(this).offset().top + 1) +'px;position:absolute;width:20px;height:20px;background:url(https://s-cdn.sportbox.ru/sites/all/libraries/design/_spbver9_/img/load_process.gif) no-repeat"></div>');

                box.update_forum_posts();

                $(this).attr('disabled', true);
                return false;
            });

            form.find('textarea').keydown(function(e){
                if( e.ctrlKey && e.keyCode == 13 ) box.send_forum_comment();
            });

            comments_wrap.find('.sp_but_cancel_reply').click(function(e){
                e.preventDefault();
                box.reply_forum_post(0);
                return false;
            });

            form.submit(function(){
                return box.send_forum_comment();
            });

            if (console && options.debug) console.log('Comments: (FORUM) Form inited');
        },


        init_forum_posts: function(){
            $('.sp_comment_reply').unbind().live('click', function(e){
                e.preventDefault();
                return box.reply_forum_post(  $(this).closest('.sp_c_comm_def_list_d').attr('id').split('-')[1]  );
            });

            $('.sp_comments_delete').unbind().live('click', function(e){
                e.preventDefault();
                return box.delete_forum_post(  $(this).closest('.sp_c_comm_def_list_d').attr('id').split('-')[1], $(this).attr('href')  );
            });

            $('.sb_c_pages_def_type a').unbind().live('click', function(e){
                e.preventDefault();
                var match = ($(this).attr('href')).match(/pagen=(\d+)/);
                if( match ){
                    box.update_forum_posts( match[1] );
                    document.location.href = "#comments";
                    return false;
                }
            });

            $('.sb_c_pages_def_nums a').unbind().live('click', function(e) {
                e.preventDefault();
                box.update_forum_posts(  ($(this).attr('href')).match(/pagen=(\d+)/)[1]  );
                document.location.href = "#comments";
                return false;
            });

            $('.sp_c_comm_def_list_show').unbind().live('click', function(e){
                e.preventDefault();
                $('#comment-' + $(this).attr('id').split('-')[1]).removeClass('sp_c_comm_def_list_hidden');
                return false;
            });

            var max_width = comments.width();
            comments.find('img').each(function(){
                if( $(this).width() > max_width )
                    $(this).width('100%');
            });

            if (console && options.debug) console.log('Comments: (FORUM) posts inited');
        },


        init_spb_comments: function(){
            document.comments.init();
        },


        safe_panel_toggle: function() {
            // Log
            if( !form ) if (console && options.debug) console.log('Comments: (SAFE PANEL) FORM NOT FOUND!');
            if (console && options.debug) console.log('Comments: (SAFE PANEL) Toggle called');
            // End log

            if( !safe_panel.hasClass('show') ){
                safe_panel.addClass('show').stop().css({
                    opacity:0,
                    left:   form.offset().left - 10,
                    top:    form.offset().top - 10,
                    width:  form.width() + 20,
                    height: form.height() + 20
                }).animate({opacity:0.5});
            }
            else {
                safe_panel.removeClass('show').stop().animate( {opacity:0}, function(){$(this).height(0)} );
            }
        },


        reply_forum_post: function(pid) {
            box.safe_panel_toggle();
            var scriptPath = (options.debug) ? '/ipbcomments.php?do=form&x_real_path=' : '/ipbcomments?do=form&x_real_path=';
            var url = scriptPath + options.xreal + '&quote_pid=' + pid + (options.is_popup ? '&popup_comments=true' : '');
            $.ajax({
                type: "GET",
                dataType: 'html',
                url: url,
                success: function( data ){
                    $('.sp_comments_form').html( data );
                    box.safe_panel_toggle();
                    box.init_forum_form();
                    form.find('textarea').focus();
                    if (console && options.debug) console.log('Comments: (SEND REPLY) Returned from AJAX: '+data);
                },
                error: function(){
                    if (console && options.debug) console.log('Comments: (SEND REPLY) ERROR in ajax returned!');
                }
            });

            return false;
        },


        send_forum_comment: function(){
            if( sending ) return false;

            sending = true;

            var data = form.serialize() + '&clienttitle=' + options.title;

            box.safe_panel_toggle();

            if (console && options.debug) console.log('data params: ' + data );
            if (console && options.debug) console.log('form.action: ' + form.attr('action'));

            $.ajax({
                type: "POST",
                dataType: 'json',
                url : form.attr('action'),
                data: data,
                success: function( json ){
                    sending = false;
                    form.find('textarea').val('').focus();
                    if( json.html ){
                        pagen_now = 0;
                        box.replace_forum_comments( json.html );
                    }
                    else {
                        if (console && options.debug) console.log('Not json.html');
                        if (console && options.debug) console.log('Пришло вот это:');
                        if (console && options.debug) console.log(json);
                    }
                    box.safe_panel_toggle();
                    if (console && options.debug) console.log('Comments: (SEND COMMENT) Returned from AJAX: '+ json);
                },
                error : function(){
                    sending = false;
                    box.safe_panel_toggle();
                    if (console && options.debug) console.log('Comments: (SEND COMMENT) ERROR in ajax returned!');
                }
            });


            return false;
        },


        update_forum_posts: function(pagen){
            if( typeof pagen == 'undefined' ) pagen = pagen_now;
            else pagen_now = pagen;

            var scriptPath = (options.debug) ? '/ipbcomments.php?do=update&x_real_path=' : '/ipbcomments?do=update&x_real_path=';
            var url = scriptPath + options.xreal + '&pagen=' + pagen + '&rnd=' + Math.random();
            $.ajax({
                dataType: "json",
                url: url,
                success: function(data){
                    if( data.html ){
                        box.replace_forum_comments( data.html );
                        $('#sp_update_comments_loader').stop().animate({opacity:0}, 300, function(){  $(this).remove()  });
                        $('#sp_update_comments').attr('disabled', false);
                        if (console && options.debug) console.log('Comments: (UPDATE COMMENTS) Returned from AJAX: '+data);
                    }
                },
                error: function(){
                    if (console && options.debug) console.log('Comments: (UPDATE COMMENTS) ERROR in ajax returned!');
                }
            });
        },


        replace_forum_comments: function(html){
            if (console && options.debug) console.log( 'Comments div: ' + comments[0] );
            comments_wrap.find('.sp_comments_list:first').html( html );
            //box.init_forum_posts();
            if (console && options.debug) console.log('Comments: (function replace_comments) comments replaced with HTML: '+html);
        },


        delete_forum_post: function(pid, url){
            if(!confirm('Вы уверены, что хотите удалить этот комментарий?'))  return false;
            $.ajax({
                dataType: "json",
                url: url,
                success: function(data){
                    if( data.ok ){
                        $('#comment-' + pid).slideUp('fast', function(){
                            $(this).remove();
                            box.update_forum_posts();
                        });
                    }
                    if (console && options.debug) console.log('Comments: (DELETE COMMENT) Ajax return data: '+data);
                },
                error: function(data){
                    if (console && options.debug) console.log('Comments: (DELETE COMMENT) ERROR in ajax returned!');
                }
            });
            return false;
        },


        load_forum_form: function(rnd){
            var scriptPath = (options.debug) ? '/ipbcomments.php?do=show&x_real_path=' : '/ipbcomments?do=show&x_real_path=';
            var url = scriptPath + options.xreal + (options.is_popup ? '&popup_comments=true' : '') + '&js=' + options.js,
                match = (document.location.href).match(/pagen=(\d+)/);
            if( match )  url += '&pagen=' + match[1];
            if( rnd )    url += '&rnd=' + Math.random();
            $.ajax({
                url: url,
                async: false,
                success: function(data){
                    if( data ){
                        $('#sp_c_comm_def_comms').html( data );
                        box.init_forum_form();
                    }
                    else {
                        setTimeout(function(){  box.load_forum_form(1) }, 1000)
                    }
                    if (console && options.debug) console.log('Comments: (LOAD FORM) HTML returned from Ajax:' + data);
                },
                error: function(){
                    if (console && options.debug) console.log('Comments: (LOAD FORM) ERROR in ajax returned!');
                }
            });

            box.init_forum_posts();
        }
    };

    box.init();
};
/* Comments (end) */



/* start spb_comm */
Drupal = Drupal || {};
Drupal.spb_comms = Drupal.spb_comms || {}
Drupal.spb_comms.loaded = Drupal.spb_comms.loaded || false;

if(!Drupal.spb_comms.parseWindowLocation){
    Drupal.spb_comms.parseWindowLocation = function (aLocation){
        var re = /[?&]([^=]+)=([^&]+)/g,
            maches = null,
            urlParts = new Array();

        maches = aLocation.match(re);

        if( maches != null ){
            for(var i=0;i < maches.length;i++){
                var urlPart = maches[i].split("=");
                urlParts[urlPart[0].substr(1)] = urlPart[1];
            }
        }
        return urlParts;
    }
}

if (!Drupal.spb_comms.loaded){

    Drupal.spb_comms.loaded = true;

    $(document).ready(function(){

        if ( window.Drupal.settings.spb_comm !== undefined ) {

            var comms_place = $('#spb-comments-new');

            if( Drupal.settings.spb_comm.nodealias
                && Drupal.settings.spb_comm.nodetitle
                && comms_place.length ) {

                comms_place.show();

                var current_time = new Date(),
                    unixtime_ms = current_time.getTime(),
                    unixtime = parseInt(unixtime_ms / 1000);

                document.cookie = "sportbox_comments_flood=" + unixtime + ";path=/;domain=.sportbox.ru;";
                var $GET = Drupal.spb_comms.parseWindowLocation(window.location.href);

                if( $GET['comments_number'] != null ){
                    var anchorPosition = $GET['comments_number'].indexOf('#');
                    if (anchorPosition > -1) $GET['comments_number'] = $GET['comments_number'].substring(0,anchorPosition);
                    document.cookie = "sportbox_comments_number="+$GET['comments_number']+";expire="+unixtime+3600000+";path=/;domain=.sportbox.ru;"
                }

                var xreal;

                if( !Drupal.settings.spb_comm.site_url || (Drupal.settings.spb_comm.site_url == '') ){
                    // here goes full url in alias
                    xreal = Drupal.settings.spb_comm.nodealias;
                }
                else {
                    xreal = Drupal.settings.spb_comm.site_url + '/' + Drupal.settings.spb_comm.nodealias;
                }

                xreal = xreal.replace(/%23/g,'#');

                var options = {xreal: xreal, auth_cookie: Drupal.settings.spb_comm.auth_cookie};

                if( Drupal.settings.spb_comm.sportkindname ){
                    options.title = Drupal.settings.spb_comm.sportkindname + ". " + Drupal.settings.spb_comm.nodetitle;
                }
                else {
                    options.title = Drupal.settings.spb_comm.nodetitle;
                }

                //$('#spb-comments-new').spb_comments(options);
                if($('#node_comments_btn_show').length != 0){
                    $('#node_comments_btn_show').on('click', function(e){
                        e.preventDefault();
                        spb_scripts.spb_comments( options );
                    });
                }else{
                    spb_scripts.spb_comments( options );
                }

            }

        } else {
            console.warn('Drupal.settings.spb_comm undefined')
        }

    });
}
/* End spb_comm */

function processNewPollVote(obj, poll_id){

    var pollContainerId = 'spbPoll_' + poll_id;
    var pollObj = jQuery('#' + pollContainerId);
    if(!pollObj.length){
        return false;
    }

    var pollAction = pollObj.find('form').attr('action');

    var answers = [];

    jQuery( "input:checked", pollObj).each(function(){
        answers.push(jQuery(this).val());
    });

    if (!answers.length) {
        alert('Ни один из вариантов не выбран');
        return false;
    }

    var url = pollAction + '?answer[]=' + answers.join('&answer[]=');

    $.ajax({
        cache: true,
        async: true,
        url: url,
        type: 'post',
        dataType: 'html',
        success: function (data, textStatus) {
            if (textStatus == 'success') {
                jQuery("#" + pollContainerId).html(data);

                var date = new Date();
                date.setHours(date.getHours() + 6);
                $.cookie("participate_in_vote_as_anonymous", 1, {expires: date, path: '/'});
            }
        }
    });

    return false;

}

var site_menu = {

    sidebar: null,
    sidebar_container: null,
    menu_btn: null,
    menu_item: null,
    menu_loaded: false,
    menu_opened: false,

    init: function () {
        var touchStartPos, touchEndPos;

        site_menu.sidebar = $("#sidebar");
        site_menu.menu_btn = $("#menu-btn-js");
        site_menu.sidebar_container = $('.row-offcanvas');


        site_menu.menu_btn.on('click', function(event) {
            event.stopPropagation();
            event.preventDefault();
            site_menu.openMenu();
        });

        $(document).on({
            'click': function(event){
                if (( $(event.target).parents('#sidebar').length === 0 ) &&
                    ( $(event.target).attr('id') !== 'menu-btn-js' ) &&
                    site_menu.menu_opened) {
                    site_menu.closeOnSwipe();
                }
            },
            'touchstart touchend': function(event) {
                if (event.type === 'touchstart') {
                    touchStartPos = {
                        'x': event.originalEvent.targetTouches[0].pageX,
                        'y': event.originalEvent.targetTouches[0].pageY
                    };
                } else if (event.type === 'touchend') {
                    touchEndPos = {
                        'x': event.originalEvent.changedTouches[0].pageX,
                        'y': event.originalEvent.changedTouches[0].pageY
                    };

                    if ( (touchStartPos.x > touchEndPos.x + 50) && (touchEndPos.y < touchStartPos.y + 50) ) {
                        site_menu.closeOnSwipe();
                    }
                    if ( (touchStartPos.x === touchEndPos.x) && (touchEndPos.y === touchStartPos.y) ) {
                        if (( $(event.target).parents('#sidebar').length === 0 ) && ( $(event.target).parents('#menu-btn-js').length === 0 ) &&
                            ( $(event.target).attr('id') !== 'menu-btn-js' ) &&
                            site_menu.menu_opened) {
                            event.stopPropagation();
                            site_menu.closeOnSwipe();
                        }
                    }
                }
            }
        });


        site_menu.sidebar.on('click', '.b-side-menu > li > a > .tap-area', function(event) {
            var elem = $(this).parent().parent();
            var autoHeight;

            event.stopPropagation();
            event.preventDefault();

            if (elem.hasClass('opened')) {
                elem.find('div').eq(0).animate({
                        'height': '0'
                    }, 200, function() {
                        elem.removeClass('opened');
                        elem.find('div').eq(0).css({
                            'display': 'none'
                        })
                    });

                return;
            }

            autoHeight = elem.find('div').eq(0).css('height', 'auto').height();
            elem.addClass('opened');
            elem.find('div').eq(0).css({
                    'display': 'block',
                    'height': '0'
                }).animate({
                    'height': autoHeight
                }, 300);
        });

        $('#site_menu_more').on('click', site_menu.loadFullMenu);
        site_menu.events.menuLoaded();
    },

    events: {
        menuLoaded: function () {
            var window_width = $(window).width();
            var current_path = document.location.pathname;
            var blur = $('.blur');
            var hover_timeout;

            site_menu.menu_item = $('.b-side-menu > li');

            site_menu.menu_item.find('a').each(function () {
                var item_href = $(this).attr("href");
                var current_path_prefix = current_path.substring(0, item_href.length);

                if (item_href == '/') {
                    return;
                }

                if (current_path_prefix == item_href) {
                    site_menu.menu_item.removeClass("active");
                    $(this).parent().addClass('active');
                    return false; //break loop
                }
            });

            site_menu.menu_item.on({
                'mouseenter': function(event) {
                    if (window_width > 1165) {
                        var this_li = $(this);
                        clearTimeout(hover_timeout);
                        hover_timeout = setTimeout(function () {
                            site_menu.menu_item.removeClass("opened");
                            this_li.addClass("opened");
                            site_menu.menu_opened = true;
                            if (!this_li.hasClass('empty') && !this_li.hasClass('current') && !this_li.hasClass('children') && site_menu.menu_opened) {
								site_menu.sidebar.trigger('site_menu_opened');
                                blur.css('display', 'block');
                            } else {
                                blur.css('display', 'none');
                                $('.b-side-menu > li').removeClass("opened");
                                site_menu.menu_opened = false;
                            }
                        }, 350);
                    } else {
                        event.preventDefault();
                    }
                },
                'mouseleave': function(event) {
                    if (window_width > 1165) {
                        clearTimeout(hover_timeout);
                        hover_timeout = setTimeout(function () {
                            $('.b-side-menu > li').removeClass("opened");
                            site_menu.menu_opened = false;
                            blur.css('display', 'none');
                        }, 350);
                    } else {
                        event.preventDefault();
                    }
                },
                'hover': function(event) {
                    event.preventDefault();
                }
            });
        }
    },

    loadFullMenu: function (event) {
        var siteMenuMore = $("#site_menu_more");

        siteMenuMore.addClass("loading");

        event.preventDefault();

        $.get("/get_site_more_menu", {}, function (data) {
            siteMenuMore.removeClass("loading").replaceWith(data);
            site_menu.events.menuLoaded();
        }, "html")
    },

    openMenu: function() {
        var blur = $('.blur');

        site_menu.sidebar_container.toggleClass('active');

        if (site_menu.sidebar_container.hasClass('active')) {
            site_menu.menu_opened = true;
            blur.css('display', 'block');
        } else {
            site_menu.menu_opened = false;
            blur.css('display', 'none');
        }
    },

    closeOnSwipe: function() {
        if (site_menu.menu_opened) {
            site_menu.menu_btn.click();
        }
    }
};

$(site_menu.init);

/* perfect-scrollbar v0.6.2 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var ps = require('../main')
  , psInstances = require('../plugin/instances');

function mountJQuery(jQuery) {
  jQuery.fn.perfectScrollbar = function (settingOrCommand) {
    return this.each(function () {
      if (typeof settingOrCommand === 'object' ||
          typeof settingOrCommand === 'undefined') {
        // If it's an object or none, initialize.
        var settings = settingOrCommand;

        if (!psInstances.get(this)) {
          ps.initialize(this, settings);
        }
      } else {
        // Unless, it may be a command.
        var command = settingOrCommand;

        if (command === 'update') {
          ps.update(this);
        } else if (command === 'destroy') {
          ps.destroy(this);
        }
      }

      return jQuery(this);
    });
  };
}

if (typeof define === 'function' && define.amd) {
  // AMD. Register as an anonymous module.
  define(['jquery'], mountJQuery);
} else {
  var jq = window.jQuery ? window.jQuery : window.$;
  if (typeof jq !== 'undefined') {
    mountJQuery(jq);
  }
}

module.exports = mountJQuery;

},{"../main":7,"../plugin/instances":18}],2:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

function oldAdd(element, className) {
  var classes = element.className.split(' ');
  if (classes.indexOf(className) < 0) {
    classes.push(className);
  }
  element.className = classes.join(' ');
}

function oldRemove(element, className) {
  var classes = element.className.split(' ');
  var idx = classes.indexOf(className);
  if (idx >= 0) {
    classes.splice(idx, 1);
  }
  element.className = classes.join(' ');
}

exports.add = function (element, className) {
  if (element.classList) {
    element.classList.add(className);
  } else {
    oldAdd(element, className);
  }
};

exports.remove = function (element, className) {
  if (element.classList) {
    element.classList.remove(className);
  } else {
    oldRemove(element, className);
  }
};

exports.list = function (element) {
  if (element.classList) {
    return element.classList;
  } else {
    return element.className.split(' ');
  }
};

},{}],3:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

exports.e = function (tagName, className) {
  var element = document.createElement(tagName);
  element.className = className;
  return element;
};

exports.appendTo = function (child, parent) {
  parent.appendChild(child);
  return child;
};

function cssGet(element, styleName) {
  return window.getComputedStyle(element)[styleName];
}

function cssSet(element, styleName, styleValue) {
  if (typeof styleValue === 'number') {
    styleValue = styleValue.toString() + 'px';
  }
  element.style[styleName] = styleValue;
  return element;
}

function cssMultiSet(element, obj) {
  for (var key in obj) {
    var val = obj[key];
    if (typeof val === 'number') {
      val = val.toString() + 'px';
    }
    element.style[key] = val;
  }
  return element;
}

exports.css = function (element, styleNameOrObject, styleValue) {
  if (typeof styleNameOrObject === 'object') {
    // multiple set with object
    return cssMultiSet(element, styleNameOrObject);
  } else {
    if (typeof styleValue === 'undefined') {
      return cssGet(element, styleNameOrObject);
    } else {
      return cssSet(element, styleNameOrObject, styleValue);
    }
  }
};

exports.matches = function (element, query) {
  if (typeof element.matches !== 'undefined') {
    return element.matches(query);
  } else {
    if (typeof element.matchesSelector !== 'undefined') {
      return element.matchesSelector(query);
    } else if (typeof element.webkitMatchesSelector !== 'undefined') {
      return element.webkitMatchesSelector(query);
    } else if (typeof element.mozMatchesSelector !== 'undefined') {
      return element.mozMatchesSelector(query);
    } else if (typeof element.msMatchesSelector !== 'undefined') {
      return element.msMatchesSelector(query);
    }
  }
};

exports.remove = function (element) {
  if (typeof element.remove !== 'undefined') {
    element.remove();
  } else {
    if (element.parentNode) {
      element.parentNode.removeChild(element);
    }
  }
};

},{}],4:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var EventElement = function (element) {
  this.element = element;
  this.events = {};
};

EventElement.prototype.bind = function (eventName, handler) {
  if (typeof this.events[eventName] === 'undefined') {
    this.events[eventName] = [];
  }
  this.events[eventName].push(handler);
  this.element.addEventListener(eventName, handler, false);
};

EventElement.prototype.unbind = function (eventName, handler) {
  var isHandlerProvided = (typeof handler !== 'undefined');
  this.events[eventName] = this.events[eventName].filter(function (hdlr) {
    if (isHandlerProvided && hdlr !== handler) {
      return true;
    }
    this.element.removeEventListener(eventName, hdlr, false);
    return false;
  }, this);
};

EventElement.prototype.unbindAll = function () {
  for (var name in this.events) {
    this.unbind(name);
  }
};

var EventManager = function () {
  this.eventElements = [];
};

EventManager.prototype.eventElement = function (element) {
  var ee = this.eventElements.filter(function (eventElement) {
    return eventElement.element === element;
  })[0];
  if (typeof ee === 'undefined') {
    ee = new EventElement(element);
    this.eventElements.push(ee);
  }
  return ee;
};

EventManager.prototype.bind = function (element, eventName, handler) {
  this.eventElement(element).bind(eventName, handler);
};

EventManager.prototype.unbind = function (element, eventName, handler) {
  this.eventElement(element).unbind(eventName, handler);
};

EventManager.prototype.unbindAll = function () {
  for (var i = 0; i < this.eventElements.length; i++) {
    this.eventElements[i].unbindAll();
  }
};

EventManager.prototype.once = function (element, eventName, handler) {
  var ee = this.eventElement(element);
  var onceHandler = function (e) {
    ee.unbind(eventName, onceHandler);
    handler(e);
  };
  ee.bind(eventName, onceHandler);
};

module.exports = EventManager;

},{}],5:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

module.exports = (function () {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
               .toString(16)
               .substring(1);
  }
  return function () {
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
           s4() + '-' + s4() + s4() + s4();
  };
})();

},{}],6:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var cls = require('./class')
  , d = require('./dom');

exports.toInt = function (x) {
  if (typeof x === 'string') {
    return parseInt(x, 10);
  } else {
    return ~~x;
  }
};

exports.clone = function (obj) {
  if (obj === null) {
    return null;
  } else if (typeof obj === 'object') {
    var result = {};
    for (var key in obj) {
      result[key] = this.clone(obj[key]);
    }
    return result;
  } else {
    return obj;
  }
};

exports.extend = function (original, source) {
  var result = this.clone(original);
  for (var key in source) {
    result[key] = this.clone(source[key]);
  }
  return result;
};

exports.isEditable = function (el) {
  return d.matches(el, "input,[contenteditable]") ||
         d.matches(el, "select,[contenteditable]") ||
         d.matches(el, "textarea,[contenteditable]") ||
         d.matches(el, "button,[contenteditable]");
};

exports.removePsClasses = function (element) {
  var clsList = cls.list(element);
  for (var i = 0; i < clsList.length; i++) {
    var className = clsList[i];
    if (className.indexOf('ps-') === 0) {
      cls.remove(element, className);
    }
  }
};

exports.outerWidth = function (element) {
  return this.toInt(d.css(element, 'width')) +
         this.toInt(d.css(element, 'paddingLeft')) +
         this.toInt(d.css(element, 'paddingRight')) +
         this.toInt(d.css(element, 'borderLeftWidth')) +
         this.toInt(d.css(element, 'borderRightWidth'));
};

exports.startScrolling = function (element, axis) {
  cls.add(element, 'ps-in-scrolling');
  if (typeof axis !== 'undefined') {
    cls.add(element, 'ps-' + axis);
  } else {
    cls.add(element, 'ps-x');
    cls.add(element, 'ps-y');
  }
};

exports.stopScrolling = function (element, axis) {
  cls.remove(element, 'ps-in-scrolling');
  if (typeof axis !== 'undefined') {
    cls.remove(element, 'ps-' + axis);
  } else {
    cls.remove(element, 'ps-x');
    cls.remove(element, 'ps-y');
  }
};

exports.env = {
  isWebKit: 'WebkitAppearance' in document.documentElement.style,
  supportsTouch: (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),
  supportsIePointer: window.navigator.msMaxTouchPoints !== null
};

},{"./class":2,"./dom":3}],7:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var destroy = require('./plugin/destroy')
  , initialize = require('./plugin/initialize')
  , update = require('./plugin/update');

module.exports = {
  initialize: initialize,
  update: update,
  destroy: destroy
};

},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":20}],8:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

module.exports = {
  wheelSpeed: 1,
  wheelPropagation: false,
  swipePropagation: true,
  minScrollbarLength: null,
  maxScrollbarLength: null,
  useBothWheelAxes: false,
  useKeyboard: true,
  suppressScrollX: false,
  suppressScrollY: false,
  scrollXMarginOffset: 0,
  scrollYMarginOffset: 0
};

},{}],9:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../lib/dom')
  , h = require('../lib/helper')
  , instances = require('./instances');

module.exports = function (element) {
  var i = instances.get(element);

  i.event.unbindAll();
  d.remove(i.scrollbarX);
  d.remove(i.scrollbarY);
  d.remove(i.scrollbarXRail);
  d.remove(i.scrollbarYRail);
  h.removePsClasses(element);

  instances.remove(element);
};

},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindClickRailHandler(element, i) {
  function pageOffset(el) {
    return el.getBoundingClientRect();
  }
  var stopPropagation = window.Event.prototype.stopPropagation.bind;

  i.event.bind(i.scrollbarY, 'click', stopPropagation);
  i.event.bind(i.scrollbarYRail, 'click', function (e) {
    var halfOfScrollbarLength = h.toInt(i.scrollbarYHeight / 2);
    var positionTop = e.pageY - pageOffset(i.scrollbarYRail).top - halfOfScrollbarLength;
    var maxPositionTop = i.containerHeight - i.scrollbarYHeight;
    var positionRatio = positionTop / maxPositionTop;

    if (positionRatio < 0) {
      positionRatio = 0;
    } else if (positionRatio > 1) {
      positionRatio = 1;
    }

    element.scrollTop = (i.contentHeight - i.containerHeight) * positionRatio;
    updateGeometry(element);
  });

  i.event.bind(i.scrollbarX, 'click', stopPropagation);
  i.event.bind(i.scrollbarXRail, 'click', function (e) {
    var halfOfScrollbarLength = h.toInt(i.scrollbarXWidth / 2);
    var positionLeft = e.pageX - pageOffset(i.scrollbarXRail).left - halfOfScrollbarLength;
    console.log(e.pageX, i.scrollbarXRail.offsetLeft);
    var maxPositionLeft = i.containerWidth - i.scrollbarXWidth;
    var positionRatio = positionLeft / maxPositionLeft;

    if (positionRatio < 0) {
      positionRatio = 0;
    } else if (positionRatio > 1) {
      positionRatio = 1;
    }

    element.scrollLeft = (i.contentWidth - i.containerWidth) * positionRatio;
    updateGeometry(element);
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindClickRailHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],11:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../../lib/dom')
  , h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindMouseScrollXHandler(element, i) {
  var currentLeft = null;
  var currentPageX = null;

  function updateScrollLeft(deltaX) {
    var newLeft = currentLeft + deltaX;
    var maxLeft = i.containerWidth - i.scrollbarXWidth;

    if (newLeft < 0) {
      i.scrollbarXLeft = 0;
    } else if (newLeft > maxLeft) {
      i.scrollbarXLeft = maxLeft;
    } else {
      i.scrollbarXLeft = newLeft;
    }

    var scrollLeft = h.toInt(i.scrollbarXLeft * (i.contentWidth - i.containerWidth) / (i.containerWidth - i.scrollbarXWidth));
    element.scrollLeft = scrollLeft;
  }

  var mouseMoveHandler = function (e) {
    updateScrollLeft(e.pageX - currentPageX);
    updateGeometry(element);
    e.stopPropagation();
    e.preventDefault();
  };

  var mouseUpHandler = function () {
    h.stopScrolling(element, 'x');
    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);
  };

  i.event.bind(i.scrollbarX, 'mousedown', function (e) {
    currentPageX = e.pageX;
    currentLeft = h.toInt(d.css(i.scrollbarX, 'left'));
    h.startScrolling(element, 'x');

    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);
    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);

    e.stopPropagation();
    e.preventDefault();
  });
}

function bindMouseScrollYHandler(element, i) {
  var currentTop = null;
  var currentPageY = null;

  function updateScrollTop(deltaY) {
    var newTop = currentTop + deltaY;
    var maxTop = i.containerHeight - i.scrollbarYHeight;

    if (newTop < 0) {
      i.scrollbarYTop = 0;
    } else if (newTop > maxTop) {
      i.scrollbarYTop = maxTop;
    } else {
      i.scrollbarYTop = newTop;
    }

    var scrollTop = h.toInt(i.scrollbarYTop * (i.contentHeight - i.containerHeight) / (i.containerHeight - i.scrollbarYHeight));
    element.scrollTop = scrollTop;
  }

  var mouseMoveHandler = function (e) {
    updateScrollTop(e.pageY - currentPageY);
    updateGeometry(element);
    e.stopPropagation();
    e.preventDefault();
  };

  var mouseUpHandler = function () {
    h.stopScrolling(element, 'y');
    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);
  };

  i.event.bind(i.scrollbarY, 'mousedown', function (e) {
    currentPageY = e.pageY;
    currentTop = h.toInt(d.css(i.scrollbarY, 'top'));
    h.startScrolling(element, 'y');

    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);
    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);

    e.stopPropagation();
    e.preventDefault();
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindMouseScrollXHandler(element, i);
  bindMouseScrollYHandler(element, i);
};

},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19}],12:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindKeyboardHandler(element, i) {
  var hovered = false;
  i.event.bind(element, 'mouseenter', function () {
    hovered = true;
  });
  i.event.bind(element, 'mouseleave', function () {
    hovered = false;
  });

  var shouldPrevent = false;
  function shouldPreventDefault(deltaX, deltaY) {
    var scrollTop = element.scrollTop;
    if (deltaX === 0) {
      if (!i.scrollbarYActive) {
        return false;
      }
      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {
        return !i.settings.wheelPropagation;
      }
    }

    var scrollLeft = element.scrollLeft;
    if (deltaY === 0) {
      if (!i.scrollbarXActive) {
        return false;
      }
      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {
        return !i.settings.wheelPropagation;
      }
    }
    return true;
  }

  i.event.bind(i.ownerDocument, 'keydown', function (e) {
    if (e.isDefaultPrevented && e.isDefaultPrevented()) {
      return;
    }

    if (!hovered) {
      return;
    }

    var activeElement = document.activeElement ? document.activeElement : i.ownerDocument.activeElement;
    if (activeElement) {
      // go deeper if element is a webcomponent
      while (activeElement.shadowRoot) {
        activeElement = activeElement.shadowRoot.activeElement;
      }
      if (h.isEditable(activeElement)) {
        return;
      }
    }

    var deltaX = 0;
    var deltaY = 0;

    switch (e.which) {
    case 37: // left
      deltaX = -30;
      break;
    case 38: // up
      deltaY = 30;
      break;
    case 39: // right
      deltaX = 30;
      break;
    case 40: // down
      deltaY = -30;
      break;
    case 33: // page up
      deltaY = 90;
      break;
    case 32: // space bar
    case 34: // page down
      deltaY = -90;
      break;
    case 35: // end
      if (e.ctrlKey) {
        deltaY = -i.contentHeight;
      } else {
        deltaY = -i.containerHeight;
      }
      break;
    case 36: // home
      if (e.ctrlKey) {
        deltaY = element.scrollTop;
      } else {
        deltaY = i.containerHeight;
      }
      break;
    default:
      return;
    }

    element.scrollTop = element.scrollTop - deltaY;
    element.scrollLeft = element.scrollLeft + deltaX;
    updateGeometry(element);

    shouldPrevent = shouldPreventDefault(deltaX, deltaY);
    if (shouldPrevent) {
      e.preventDefault();
    }
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindKeyboardHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],13:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindMouseWheelHandler(element, i) {
  var shouldPrevent = false;

  function shouldPreventDefault(deltaX, deltaY) {
    var scrollTop = element.scrollTop;
    if (deltaX === 0) {
      if (!i.scrollbarYActive) {
        return false;
      }
      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {
        return !i.settings.wheelPropagation;
      }
    }

    var scrollLeft = element.scrollLeft;
    if (deltaY === 0) {
      if (!i.scrollbarXActive) {
        return false;
      }
      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {
        return !i.settings.wheelPropagation;
      }
    }
    return true;
  }

  function getDeltaFromEvent(e) {
    var deltaX = e.deltaX;
    var deltaY = -1 * e.deltaY;

    if (typeof deltaX === "undefined" || typeof deltaY === "undefined") {
      // OS X Safari
      deltaX = -1 * e.wheelDeltaX / 6;
      deltaY = e.wheelDeltaY / 6;
    }

    if (e.deltaMode && e.deltaMode === 1) {
      // Firefox in deltaMode 1: Line scrolling
      deltaX *= 10;
      deltaY *= 10;
    }

    if (deltaX !== deltaX && deltaY !== deltaY/* NaN checks */) {
      // IE in some mouse drivers
      deltaX = 0;
      deltaY = e.wheelDelta;
    }

    return [deltaX, deltaY];
  }

  function shouldBeConsumedByTextarea(deltaX, deltaY) {
    var hoveredTextarea = element.querySelector('textarea:hover');
    if (hoveredTextarea) {
      var maxScrollTop = hoveredTextarea.scrollHeight - hoveredTextarea.clientHeight;
      if (maxScrollTop > 0) {
        if (!(hoveredTextarea.scrollTop === 0 && deltaY > 0) &&
            !(hoveredTextarea.scrollTop === maxScrollTop && deltaY < 0)) {
          return true;
        }
      }
      var maxScrollLeft = hoveredTextarea.scrollLeft - hoveredTextarea.clientWidth;
      if (maxScrollLeft > 0) {
        if (!(hoveredTextarea.scrollLeft === 0 && deltaX < 0) &&
            !(hoveredTextarea.scrollLeft === maxScrollLeft && deltaX > 0)) {
          return true;
        }
      }
    }
    return false;
  }

  function mousewheelHandler(e) {
    // FIXME: this is a quick fix for the select problem in FF and IE.
    // If there comes an effective way to deal with the problem,
    // this lines should be removed.
    if (!h.env.isWebKit && element.querySelector('select:focus')) {
      return;
    }

    var delta = getDeltaFromEvent(e);

    var deltaX = delta[0];
    var deltaY = delta[1];

    if (shouldBeConsumedByTextarea(deltaX, deltaY)) {
      return;
    }

    shouldPrevent = false;
    if (!i.settings.useBothWheelAxes) {
      // deltaX will only be used for horizontal scrolling and deltaY will
      // only be used for vertical scrolling - this is the default
      element.scrollTop = element.scrollTop - (deltaY * i.settings.wheelSpeed);
      element.scrollLeft = element.scrollLeft + (deltaX * i.settings.wheelSpeed);
    } else if (i.scrollbarYActive && !i.scrollbarXActive) {
      // only vertical scrollbar is active and useBothWheelAxes option is
      // active, so let's scroll vertical bar using both mouse wheel axes
      if (deltaY) {
        element.scrollTop = element.scrollTop - (deltaY * i.settings.wheelSpeed);
      } else {
        element.scrollTop = element.scrollTop + (deltaX * i.settings.wheelSpeed);
      }
      shouldPrevent = true;
    } else if (i.scrollbarXActive && !i.scrollbarYActive) {
      // useBothWheelAxes and only horizontal bar is active, so use both
      // wheel axes for horizontal bar
      if (deltaX) {
        element.scrollLeft = element.scrollLeft + (deltaX * i.settings.wheelSpeed);
      } else {
        element.scrollLeft = element.scrollLeft - (deltaY * i.settings.wheelSpeed);
      }
      shouldPrevent = true;
    }

    updateGeometry(element);

    shouldPrevent = (shouldPrevent || shouldPreventDefault(deltaX, deltaY));
    if (shouldPrevent) {
      e.stopPropagation();
      e.preventDefault();
    }
  }

  if (typeof window.onwheel !== "undefined") {
    i.event.bind(element, 'wheel', mousewheelHandler);
  } else if (typeof window.onmousewheel !== "undefined") {
    i.event.bind(element, 'mousewheel', mousewheelHandler);
  }
}

module.exports = function (element) {
  var i = instances.get(element);
  bindMouseWheelHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],14:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindNativeScrollHandler(element, i) {
  i.event.bind(element, 'scroll', function () {
    updateGeometry(element);
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindNativeScrollHandler(element, i);
};

},{"../instances":18,"../update-geometry":19}],15:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var h = require('../../lib/helper')
  , instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindSelectionHandler(element, i) {
  function getRangeNode() {
    var selection = window.getSelection ? window.getSelection() :
                    document.getSelection ? document.getSelection() : '';
    if (selection.toString().length === 0) {
      return null;
    } else {
      return selection.getRangeAt(0).commonAncestorContainer;
    }
  }

  var scrollingLoop = null;
  var scrollDiff = {top: 0, left: 0};
  function startScrolling() {
    if (!scrollingLoop) {
      scrollingLoop = setInterval(function () {
        if (!instances.get(element)) {
          clearInterval(scrollingLoop);
          return;
        }

        element.scrollTop = element.scrollTop + scrollDiff.top;
        element.scrollLeft = element.scrollLeft + scrollDiff.left;
        updateGeometry(element);
      }, 50); // every .1 sec
    }
  }
  function stopScrolling() {
    if (scrollingLoop) {
      clearInterval(scrollingLoop);
      scrollingLoop = null;
    }
    h.stopScrolling(element);
  }

  var isSelected = false;
  i.event.bind(i.ownerDocument, 'selectionchange', function () {
    if (element.contains(getRangeNode())) {
      isSelected = true;
    } else {
      isSelected = false;
      stopScrolling();
    }
  });
  i.event.bind(window, 'mouseup', function () {
    if (isSelected) {
      isSelected = false;
      stopScrolling();
    }
  });

  i.event.bind(window, 'mousemove', function (e) {
    if (isSelected) {
      var mousePosition = {x: e.pageX, y: e.pageY};
      var containerGeometry = {
        left: element.offsetLeft,
        right: element.offsetLeft + element.offsetWidth,
        top: element.offsetTop,
        bottom: element.offsetTop + element.offsetHeight
      };

      if (mousePosition.x < containerGeometry.left + 3) {
        scrollDiff.left = -5;
        h.startScrolling(element, 'x');
      } else if (mousePosition.x > containerGeometry.right - 3) {
        scrollDiff.left = 5;
        h.startScrolling(element, 'x');
      } else {
        scrollDiff.left = 0;
      }

      if (mousePosition.y < containerGeometry.top + 3) {
        if (containerGeometry.top + 3 - mousePosition.y < 5) {
          scrollDiff.top = -5;
        } else {
          scrollDiff.top = -20;
        }
        h.startScrolling(element, 'y');
      } else if (mousePosition.y > containerGeometry.bottom - 3) {
        if (mousePosition.y - containerGeometry.bottom + 3 < 5) {
          scrollDiff.top = 5;
        } else {
          scrollDiff.top = 20;
        }
        h.startScrolling(element, 'y');
      } else {
        scrollDiff.top = 0;
      }

      if (scrollDiff.top === 0 && scrollDiff.left === 0) {
        stopScrolling();
      } else {
        startScrolling();
      }
    }
  });
}

module.exports = function (element) {
  var i = instances.get(element);
  bindSelectionHandler(element, i);
};

},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],16:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var instances = require('../instances')
  , updateGeometry = require('../update-geometry');

function bindTouchHandler(element, i, supportsTouch, supportsIePointer) {
  function shouldPreventDefault(deltaX, deltaY) {
    var scrollTop = element.scrollTop;
    var scrollLeft = element.scrollLeft;
    var magnitudeX = Math.abs(deltaX);
    var magnitudeY = Math.abs(deltaY);

    if (magnitudeY > magnitudeX) {
      // user is perhaps trying to swipe up/down the page

      if (((deltaY < 0) && (scrollTop === i.contentHeight - i.containerHeight)) ||
          ((deltaY > 0) && (scrollTop === 0))) {
        return !i.settings.swipePropagation;
      }
    } else if (magnitudeX > magnitudeY) {
      // user is perhaps trying to swipe left/right across the page

      if (((deltaX < 0) && (scrollLeft === i.contentWidth - i.containerWidth)) ||
          ((deltaX > 0) && (scrollLeft === 0))) {
        return !i.settings.swipePropagation;
      }
    }

    return true;
  }

  function applyTouchMove(differenceX, differenceY) {
    element.scrollTop = element.scrollTop - differenceY;
    element.scrollLeft = element.scrollLeft - differenceX;

    updateGeometry(element);
  }

  var startOffset = {};
  var startTime = 0;
  var speed = {};
  var easingLoop = null;
  var inGlobalTouch = false;
  var inLocalTouch = false;

  function globalTouchStart() {
    inGlobalTouch = true;
  }
  function globalTouchEnd() {
    inGlobalTouch = false;
  }

  function getTouch(e) {
    if (e.targetTouches) {
      return e.targetTouches[0];
    } else {
      // Maybe IE pointer
      return e;
    }
  }
  function shouldHandle(e) {
    if (e.targetTouches && e.targetTouches.length === 1) {
      return true;
    }
    if (e.pointerType && e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {
      return true;
    }
    return false;
  }
  function touchStart(e) {
    if (shouldHandle(e)) {
      inLocalTouch = true;

      var touch = getTouch(e);

      startOffset.pageX = touch.pageX;
      startOffset.pageY = touch.pageY;

      startTime = (new Date()).getTime();

      if (easingLoop !== null) {
        clearInterval(easingLoop);
      }

      e.stopPropagation();
    }
  }
  function touchMove(e) {
    if (!inGlobalTouch && inLocalTouch && shouldHandle(e)) {
      var touch = getTouch(e);

      var currentOffset = {pageX: touch.pageX, pageY: touch.pageY};

      var differenceX = currentOffset.pageX - startOffset.pageX;
      var differenceY = currentOffset.pageY - startOffset.pageY;

      applyTouchMove(differenceX, differenceY);
      startOffset = currentOffset;

      var currentTime = (new Date()).getTime();

      var timeGap = currentTime - startTime;
      if (timeGap > 0) {
        speed.x = differenceX / timeGap;
        speed.y = differenceY / timeGap;
        startTime = currentTime;
      }

      if (shouldPreventDefault(differenceX, differenceY)) {
        e.stopPropagation();
        e.preventDefault();
      }
    }
  }
  function touchEnd() {
    if (!inGlobalTouch && inLocalTouch) {
      inLocalTouch = false;

      clearInterval(easingLoop);
      easingLoop = setInterval(function () {
        if (!instances.get(element)) {
          clearInterval(easingLoop);
          return;
        }

        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {
          clearInterval(easingLoop);
          return;
        }

        applyTouchMove(speed.x * 30, speed.y * 30);

        speed.x *= 0.8;
        speed.y *= 0.8;
      }, 10);
    }
  }

  if (supportsTouch) {
    i.event.bind(window, 'touchstart', globalTouchStart);
    i.event.bind(window, 'touchend', globalTouchEnd);
    i.event.bind(element, 'touchstart', touchStart);
    i.event.bind(element, 'touchmove', touchMove);
    i.event.bind(element, 'touchend', touchEnd);
  }

  if (supportsIePointer) {
    if (window.PointerEvent) {
      i.event.bind(window, 'pointerdown', globalTouchStart);
      i.event.bind(window, 'pointerup', globalTouchEnd);
      i.event.bind(element, 'pointerdown', touchStart);
      i.event.bind(element, 'pointermove', touchMove);
      i.event.bind(element, 'pointerup', touchEnd);
    } else if (window.MSPointerEvent) {
      i.event.bind(window, 'MSPointerDown', globalTouchStart);
      i.event.bind(window, 'MSPointerUp', globalTouchEnd);
      i.event.bind(element, 'MSPointerDown', touchStart);
      i.event.bind(element, 'MSPointerMove', touchMove);
      i.event.bind(element, 'MSPointerUp', touchEnd);
    }
  }
}

module.exports = function (element, supportsTouch, supportsIePointer) {
  var i = instances.get(element);
  bindTouchHandler(element, i, supportsTouch, supportsIePointer);
};

},{"../instances":18,"../update-geometry":19}],17:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var cls = require('../lib/class')
  , h = require('../lib/helper')
  , instances = require('./instances')
  , updateGeometry = require('./update-geometry');

// Handlers
var clickRailHandler = require('./handler/click-rail')
  , dragScrollbarHandler = require('./handler/drag-scrollbar')
  , keyboardHandler = require('./handler/keyboard')
  , mouseWheelHandler = require('./handler/mouse-wheel')
  , nativeScrollHandler = require('./handler/native-scroll')
  , selectionHandler = require('./handler/selection')
  , touchHandler = require('./handler/touch');

module.exports = function (element, userSettings) {
  userSettings = typeof userSettings === 'object' ? userSettings : {};

  cls.add(element, 'ps-container');

  // Create a plugin instance.
  var i = instances.add(element);

  i.settings = h.extend(i.settings, userSettings);

  clickRailHandler(element);
  dragScrollbarHandler(element);
  mouseWheelHandler(element);
  nativeScrollHandler(element);
  selectionHandler(element);

  if (h.env.supportsTouch || h.env.supportsIePointer) {
    touchHandler(element, h.env.supportsTouch, h.env.supportsIePointer);
  }
  if (i.settings.useKeyboard) {
    keyboardHandler(element);
  }

  updateGeometry(element);
};

},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../lib/dom')
  , defaultSettings = require('./default-setting')
  , EventManager = require('../lib/event-manager')
  , guid = require('../lib/guid')
  , h = require('../lib/helper');

var instances = {};

function Instance(element) {
  var i = this;

  i.settings = h.clone(defaultSettings);
  i.containerWidth = null;
  i.containerHeight = null;
  i.contentWidth = null;
  i.contentHeight = null;

  i.isRtl = d.css(element, 'direction') === "rtl";
  i.event = new EventManager();
  i.ownerDocument = element.ownerDocument || document;

  i.scrollbarXRail = d.appendTo(d.e('div', 'ps-scrollbar-x-rail'), element);
  i.scrollbarX = d.appendTo(d.e('div', 'ps-scrollbar-x'), i.scrollbarXRail);
  i.scrollbarXActive = null;
  i.scrollbarXWidth = null;
  i.scrollbarXLeft = null;
  i.scrollbarXBottom = h.toInt(d.css(i.scrollbarXRail, 'bottom'));
  i.isScrollbarXUsingBottom = i.scrollbarXBottom === i.scrollbarXBottom; // !isNaN
  i.scrollbarXTop = i.isScrollbarXUsingBottom ? null : h.toInt(d.css(i.scrollbarXRail, 'top'));
  i.railBorderXWidth = h.toInt(d.css(i.scrollbarXRail, 'borderLeftWidth')) + h.toInt(d.css(i.scrollbarXRail, 'borderRightWidth'));
  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));
  i.railXWidth = null;

  i.scrollbarYRail = d.appendTo(d.e('div', 'ps-scrollbar-y-rail'), element);
  i.scrollbarY = d.appendTo(d.e('div', 'ps-scrollbar-y'), i.scrollbarYRail);
  i.scrollbarYActive = null;
  i.scrollbarYHeight = null;
  i.scrollbarYTop = null;
  i.scrollbarYRight = h.toInt(d.css(i.scrollbarYRail, 'right'));
  i.isScrollbarYUsingRight = i.scrollbarYRight === i.scrollbarYRight; // !isNaN
  i.scrollbarYLeft = i.isScrollbarYUsingRight ? null : h.toInt(d.css(i.scrollbarYRail, 'left'));
  i.scrollbarYOuterWidth = i.isRtl ? h.outerWidth(i.scrollbarY) : null;
  i.railBorderYWidth = h.toInt(d.css(i.scrollbarYRail, 'borderTopWidth')) + h.toInt(d.css(i.scrollbarYRail, 'borderBottomWidth'));
  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));
  i.railYHeight = null;
}

function getId(element) {
  if (typeof element.dataset === 'undefined') {
    return element.getAttribute('data-ps-id');
  } else {
    return element.dataset.psId;
  }
}

function setId(element, id) {
  if (typeof element.dataset === 'undefined') {
    element.setAttribute('data-ps-id', id);
  } else {
    element.dataset.psId = id;
  }
}

function removeId(element) {
  if (typeof element.dataset === 'undefined') {
    element.removeAttribute('data-ps-id');
  } else {
    delete element.dataset.psId;
  }
}

exports.add = function (element) {
  var newId = guid();
  setId(element, newId);
  instances[newId] = new Instance(element);
  return instances[newId];
};

exports.remove = function (element) {
  delete instances[getId(element)];
  removeId(element);
};

exports.get = function (element) {
  return instances[getId(element)];
};

},{"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var cls = require('../lib/class')
  , d = require('../lib/dom')
  , h = require('../lib/helper')
  , instances = require('./instances');

function getThumbSize(i, thumbSize) {
  if (i.settings.minScrollbarLength) {
    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);
  }
  if (i.settings.maxScrollbarLength) {
    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);
  }
  return thumbSize;
}

function updateCss(element, i) {
  var xRailOffset = {width: i.railXWidth};
  if (i.isRtl) {
    xRailOffset.left = element.scrollLeft + i.containerWidth - i.contentWidth;
  } else {
    xRailOffset.left = element.scrollLeft;
  }
  if (i.isScrollbarXUsingBottom) {
    xRailOffset.bottom = i.scrollbarXBottom - element.scrollTop;
  } else {
    xRailOffset.top = i.scrollbarXTop + element.scrollTop;
  }
  d.css(i.scrollbarXRail, xRailOffset);

  var yRailOffset = {top: element.scrollTop, height: i.railYHeight};
  if (i.isScrollbarYUsingRight) {
    if (i.isRtl) {
      yRailOffset.right = i.contentWidth - element.scrollLeft - i.scrollbarYRight - i.scrollbarYOuterWidth;
    } else {
      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;
    }
  } else {
    if (i.isRtl) {
      yRailOffset.left = element.scrollLeft + i.containerWidth * 2 - i.contentWidth - i.scrollbarYLeft - i.scrollbarYOuterWidth;
    } else {
      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;
    }
  }
  d.css(i.scrollbarYRail, yRailOffset);

  d.css(i.scrollbarX, {left: i.scrollbarXLeft, width: i.scrollbarXWidth - i.railBorderXWidth});
  d.css(i.scrollbarY, {top: i.scrollbarYTop, height: i.scrollbarYHeight - i.railBorderYWidth});
}

module.exports = function (element) {
  var i = instances.get(element);

  i.containerWidth = element.clientWidth;
  i.containerHeight = element.clientHeight;
  i.contentWidth = element.scrollWidth;
  i.contentHeight = element.scrollHeight;

  if (!element.contains(i.scrollbarXRail)) {
    d.appendTo(i.scrollbarXRail, element);
  }
  if (!element.contains(i.scrollbarYRail)) {
    d.appendTo(i.scrollbarYRail, element);
  }

  if (!i.settings.suppressScrollX && i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth) {
    i.scrollbarXActive = true;
    i.railXWidth = i.containerWidth - i.railXMarginWidth;
    i.scrollbarXWidth = getThumbSize(i, h.toInt(i.railXWidth * i.containerWidth / i.contentWidth));
    i.scrollbarXLeft = h.toInt(element.scrollLeft * (i.railXWidth - i.scrollbarXWidth) / (i.contentWidth - i.containerWidth));
  } else {
    i.scrollbarXActive = false;
    i.scrollbarXWidth = 0;
    i.scrollbarXLeft = 0;
    element.scrollLeft = 0;
  }

  if (!i.settings.suppressScrollY && i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight) {
    i.scrollbarYActive = true;
    i.railYHeight = i.containerHeight - i.railYMarginHeight;
    i.scrollbarYHeight = getThumbSize(i, h.toInt(i.railYHeight * i.containerHeight / i.contentHeight));
    i.scrollbarYTop = h.toInt(element.scrollTop * (i.railYHeight - i.scrollbarYHeight) / (i.contentHeight - i.containerHeight));
  } else {
    i.scrollbarYActive = false;
    i.scrollbarYHeight = 0;
    i.scrollbarYTop = 0;
    element.scrollTop = 0;
  }

  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {
    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;
  }
  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {
    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;
  }

  updateCss(element, i);

  cls[i.scrollbarXActive ? 'add' : 'remove'](element, 'ps-active-x');
  cls[i.scrollbarYActive ? 'add' : 'remove'](element, 'ps-active-y');
};

},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18}],20:[function(require,module,exports){
/* Copyright (c) 2015 Hyunje Alex Jun and other contributors
 * Licensed under the MIT License
 */
'use strict';

var d = require('../lib/dom')
  , instances = require('./instances')
  , updateGeometry = require('./update-geometry');

module.exports = function (element) {
  var i = instances.get(element);

  // Hide scrollbars not to affect scrollWidth and scrollHeight
  d.css(i.scrollbarXRail, 'display', 'none');
  d.css(i.scrollbarYRail, 'display', 'none');

  updateGeometry(element);

  d.css(i.scrollbarXRail, 'display', 'block');
  d.css(i.scrollbarYRail, 'display', 'block');
};

},{"../lib/dom":3,"./instances":18,"./update-geometry":19}]},{},[1]);

function isTouchDevice() {
    var el = document.createElement('div');
    el.setAttribute('ontouchmove', 'return;');
    return typeof el.ontouchmove == "function";
}

// Photogalery
var sb_cp_foto_def = {
    url: '',
    is_init: false,
    disable: {},

    // Инициализация
    init: function () {

        // Проверяем были ли инициализация
        if (this.is_init) {
            return false;
        }

        this.is_init = true;
        this.anc = document.getElementById('top_gal_content');
        this.anc2 = $('.sb_cp_foto_def');
        this.photos = $('.sb_cp_foto_def_scrl_elem');
        this.preload = $('.gal_preloader');
        this.big_photo = $('.imagecache-medium-photos-photo')[0]; //huge?
        this.img_info = $('.sb_cp_foto_def_img_info');

        //msie 6 & 7 .brd width
        if( $.browser.msie && Math.round( $.browser.version ) < 8 ) {
            this.photos.each(function(index) {
                var bord = $(this).find('.sb_cp_foto_def_scrl_elem_brd');
                var imgLoad = new Image();
                var img = $(this).find('img')[0];
                imgLoad.onload = function(){
                    bord.css('width', img.offsetWidth-6+'px');
                };
                imgLoad.src = img.getAttribute('src');
            });
        }

        this.navigate = $('.sb_cp_foto_def_scrl_box')[0];
        sb_cp_foto_def.newOnChange();
        // this.navigate.onmousewheel!==null ? this.navigate.addEventListener('DOMMouseScroll', this.scroll, false) : this.navigate.onmousewheel=this.scroll;
        $('.sb_cp_foto_def_scrl .sb_cp_foto_def_scrl_prev_ar').bind('click', function(e){
            sb_cp_foto_def.scroll.call(sb_cp_foto_def.navigate, 1);
        });
        $('.sb_cp_foto_def_scrl .sb_cp_foto_def_scrl_next_ar').bind('click', function(e){
            sb_cp_foto_def.scroll.call(sb_cp_foto_def.navigate, -1);
        });
        this.photos.bind('click', function() {
            sb_cp_foto_def.newOnChange(this.href); //sb_cp_foto_def.ajax(url);
            // Удаляем похожие фото наверху (рядом со скроллом маленьких фото)
            $('.sb_cp_foto_def_scrl_box .sb_cp_foto_def_scrl_elem_sim').remove();
            return false;
        });
        //bind prev, next & big_img clicks
        $('.sb_cp_foto_def_foto .sb_cp_foto_def_scrl_prev, .sb_cp_foto_def_foto .sb_cp_foto_def_scrl_next, .imagecache-medium-photos-photo').bind('click', sb_cp_foto_def.prevNext);
        //touch events
        if( isTouchDevice() ) {
            var touchNav = $('.sb_cp_foto_def_scrl')[0],
                nav = this.navigate;

            touchNav.addEventListener('touchstart', function(e) {
                this.flg = true;
                startX = e.touches[0].pageX;
                offsetX = e.touches[0].pageX+nav.scrollLeft; //offset = scroll-startd
                startY = e.touches[0].pageY; //offset = scroll-startd
                e.preventDefault();
            }, false);
            touchNav.addEventListener('touchmove', function(e) {
                this.flg = false;
                endX = startX-e.touches[0].pageX;
                nav.scrollLeft = offsetX-e.touches[0].pageX;
                window.scrollBy(0, startY-e.touches[0].pageY); // прыгает
                sb_cp_foto_def.hideArrow();
                e.preventDefault();
            }, false);
            touchNav.addEventListener('touchend', function(e) {
                var cse = {'sb_cp_foto_def_scrl_prev': 1, 'sb_cp_foto_def_scrl_next': -1},
                    p = e.target.parentNode;
                if(this.flg){
                    if(p.className.indexOf('sb_cp_foto_def_scrl_elem') != -1){
                        sb_cp_foto_def.newOnChange(p.href);
                        $('.sb_cp_foto_def_scrl_box .sb_cp_foto_def_scrl_elem_sim').remove();
                    }
                    else if(cse[p.className]){
                        sb_cp_foto_def.scroll.call(nav, cse[p.className]);
                    }
                }
                e.preventDefault();
            }, false);
        }

        $(document).keydown(function(e) {
            if(e.ctrlKey){
                if(e.which == 37){
                    sb_cp_foto_def.prevNext(-1);
                    return false;
                }
                else if(e.which == 39){
                    sb_cp_foto_def.prevNext(1);
                    return false;
                }
            }

        });
        //запускаем функицию для проверки истории
        setInterval(function(){sb_cp_foto_def.newOnChange()}, 500);
    },
    getOffsets: function(){
        this.photosOffset = [];
        var photos = $('.sb_cp_foto_def_scrl_elem');
        for(var i=0;i<photos.length; i++){
            this.photosOffset[i] = photos[i].offsetLeft;
        }
    },
    scroll: function(e){
        if(!e) e = window.event;
        var direction = e.wheelDelta   ?   e.wheelDelta/120   :   e.detail/-3 || e;
        var sl = this.scrollLeft;
        if(e.preventDefault){
            e.preventDefault();
        }
        //IE7FIX scrollWidth
        var scrollWidth = this.scrollWidth;
        if($.browser.msie && Math.round($.browser.version) < 8){
            scrollWidth = this.lastChild.offsetLeft + this.lastChild.offsetWidth+1;
        }
        if(sl <= 0 && direction > 0 || sl+this.offsetWidth >= scrollWidth && direction < 0){return false}

        if(!sb_cp_foto_def.photosOffset){
            sb_cp_foto_def.getOffsets();
        }

        var scrollVars = sb_cp_foto_def.photosOffset;
        for(var i=0;i<scrollVars.length; i++){
            if(sl <= scrollVars[i] && sl < scrollVars[i+1]){
                break;
            }
        }

        var step = direction > 0   ?   i-3   :   i+3;
            step = step<0  ?  0  :  step;
        //this.scrollLeft = scrollVars[i-direction]



        //this.scrollLeft = scrollVars[step];
        if( jQuery(this).is(':animated') ) return;
        jQuery(this).stop().animate({scrollLeft:scrollVars[step]},
            {duration:300, queue:false, complete:function(){sb_cp_foto_def.hideArrow();}});


        //IE7FIX
        if($.browser.msie && $.browser.version < 8 && this.scrollLeft+this.offsetWidth >= scrollWidth && direction < 0)
            jQuery(this).stop().animate({scrollLeft:scrollWidth-sb_cp_foto_def.navigate.offsetWidth},
                {duration:300, queue:false, complete:function(){ sb_cp_foto_def.hideArrow();}});
        //this.scrollLeft = scrollWidth-sb_cp_foto_def.navigate.offsetWidth;


        return false;

    },

    centerActive: function(el){
        var padd = el.offsetLeft+(el.offsetWidth-this.navigate.offsetWidth)/2;
        //IE7FIX scrollWidth
        if($.browser.msie && Math.round($.browser.version) < 8){
            var scrollWidth = this.navigate.lastChild.offsetLeft + this.navigate.lastChild.offsetWidth+1;
            if(padd+this.navigate.offsetWidth >= scrollWidth){
                padd = scrollWidth-this.navigate.offsetWidth;
            }
        }
        $(this.navigate).stop().animate({scrollLeft: padd}, 400, function(){sb_cp_foto_def.hideArrow()});
    },

    hideArrow: function(){
        if(this.disable.small){
            this.disable.small.show();
            this.disable.small = null;
        }//after || IE7fix
        if(this.navigate.scrollLeft+this.navigate.offsetWidth == this.navigate.scrollWidth || this.navigate.scrollLeft+this.navigate.offsetWidth == this.navigate.lastChild.offsetLeft + this.navigate.lastChild.offsetWidth+1){
            this.disable.small = $('.sb_cp_foto_def_scrl .sb_cp_foto_def_scrl_next');
            this.disable.small.hide();
        }
        else if(this.navigate.scrollLeft == 0){
            this.disable.small = $('.sb_cp_foto_def_scrl .sb_cp_foto_def_scrl_prev');
            this.disable.small.hide();
        }
    },

    prevNext: function(increase){
        var i = parseInt(sb_cp_foto_def.parseNum(sb_cp_foto_def.url)), //[t?]cache i
            el = null;
        if(sb_cp_foto_def.disable.big&&increase == -1){
            return false;
        }
        if($('.sb_cp_foto_def_sim').length == 1&&increase == 1){
            sb_cp_foto_def.newOnChange(sb_cp_foto_def.photos[0].href);
            return false;
        }
        $(this).hasClass('sb_cp_foto_def_scrl_prev')||increase == -1? i-- : i++;
        if(el = sb_cp_foto_def.photos[i]){
            sb_cp_foto_def.newOnChange(el.href);
        }
        else{
            sb_cp_foto_def.add_foto_top();
            sb_cp_foto_def.add_sim_top();
        }
        return false;
    },

    newOnChange: function (url) {
        if (!url) {
            url = window.location.href;
        }

        if (url !== this.url) {
            var num = this.parseNum(url);
            //var topOffset = this.anc2.position().top + parseInt($("body").css("padding-top")) + 20;
            var topOffset = this.anc2.position().top + 20;

            if (!!this.url) {
                window.location.hash = 'top_gal_content&imgDelta=' + num;
            }

            if (~location.search.indexOf('huge') || ~url.indexOf('#')) {
                $(window).scrollTop(topOffset);
            }

            this.url = window.location.href;
            this.switch_pic(num);
        }
    },

    //new href & old href
    parseNum: function(url){
        var num = url.match(/imgDelta=\d+/g);
        return num ? num[num.length-1].split('=')[1] : 0;
    },

    switch_pic: function(i) {
        this.preload.show();
        var imgSrc = gallery_image_arr[i].src,
            imgLoad = new Image();//dummy

        $(imgLoad).load(function(){
            sb_cp_foto_def.big_photo.parentNode.replaceChild(this, sb_cp_foto_def.big_photo);
            sb_cp_foto_def.big_photo = this;
            sb_cp_foto_def.big_photo.className = 'imagecache-medium-photos-photo';
            sb_cp_foto_def.big_photo.onclick = sb_cp_foto_def.prevNext;
            if(window.location.search.indexOf('huge') == -1){
                var strip = $('.sb_cp_foto_def_scrl').height(),
                    newHeight = $(window).height()-strip;
                this.removeAttribute('height')
                if($(this).height() >= newHeight-6){
                    this.setAttribute('height', newHeight-32);
                    this.style.width = 'auto';
                }
                $('.sb_cp_foto_def_loop_link').attr('href', '?huge=1&imgDelta='+ i + location.hash);
            }
            else{
                $('.sb_cp_foto_def_loop_link').attr('href', '?imgDelta='+ i + location.hash);
            }

            sb_cp_foto_def.preload.hide();
            sb_cp_foto_def.img_info.hide();
            $(sb_cp_foto_def.img_info[i]).show();
            $('.sb_cp_foto_def_sim').remove();
            sb_cp_foto_def.centerActive(sb_cp_foto_def.photos[i]);//center active element
        });
        imgLoad.src = imgSrc;

        //cache


        //hide big arrows
        if(this.active){
            this.active.removeClass('sb_cp_foto_def_scrl_elem_slt');
        }
        this.active = $(this.photos[i]);
        this.active.addClass('sb_cp_foto_def_scrl_elem_slt');
        //hide arrows
        if(this.disable.big){
            this.disable.big.show();
            this.disable.big = null;
        }
        if(i == 0){
            this.disable.big = $('.sb_cp_foto_def_foto .sb_cp_foto_def_scrl_prev');
            this.disable.big.hide();
        }
        /*else if(i == this.photos.length-1){
         this.disable.big = $('.sb_cp_foto_def_foto .sb_cp_foto_def_scrl_next');
         this.disable.big.hide();
         }*/
    },

    // Добавляет похожие фото поверх большой фото
    add_foto_top: function() {
        //sb_cp_foto_def_sim
        this.photosOffset = null;
        if (!sb_c_similar_def && sb_c_similar_def.foto_top_ar && sb_c_similar_def.foto_top_ar.length > 0 && sb_c_similar_def.foto_ar && sb_c_similar_def.foto_ar.length > 0) {
            return false;
        }
        // Генерация фото
        var similar_str = '',
            similar_ar,
            i;

        for (i=0; i<sb_c_similar_def.foto_top_ar.length; i++) {
            similar_ar = sb_c_similar_def.foto_top_ar[i];

            // Если номер фото
            //if (typeof(similar_ar) === 'string' && similar_ar !== '' && typeof(sb_c_similar_def.foto_ar[i]) === 'object') {
            //similar_ar = sb_c_similar_def.foto_ar[i];
            //}


            if ( !(typeof(similar_ar) === 'object' && typeof(similar_ar['icon']) === 'string' && typeof(similar_ar['path']) === 'string' && similar_ar['icon'] !== '' && similar_ar['path'] !== '') ) {
                continue;
            }

            // Заменяем сущности
            similar_ar.icon = similar_ar.icon.replace(/&lt;/, "<");
            similar_ar.icon = similar_ar.icon.replace(/&gt;/, ">");
            similar_ar.icon = similar_ar.icon.replace(/&amp;/, '&');

            similar_str += '<a style="visibility:hidden" href="/' + similar_ar.path + '">' + similar_ar.icon + '</a>';
        }

        //var html = '<style type="text/css">#photoblock_wall { height:20px; overflow:hidden; } #photoblock_wall a { visibility:hidden; }	#photoblock_loader { width:100%; height:100%; position:relative; }</style>';
        var html = '<div class="sb_cp_foto_def_sim"><p class="sb_cp_foto_def_sim_loop"><a href="?'+(window.location.href.indexOf('huge=1') !== -1?'&huge=1':'')+'imgDelta=0#top_gal_content">Повторить<span></span></a></p> <div class="sb_cp_foto_def_sim_line"></div> <h2>Фото по теме</h2> <div class="sb_cp_foto_def_sim_list  clear-block"><div id="photoblock_loader"><img class="gal_preloader" src="https://s-cdn.sportbox.ru/sites/all/libraries/design/_spbver9_/img/ajax-loader.gif" alt ="" /></div>'+similar_str+'</div></div>';




        // Вешаем событие на кнопку повторить
        $('.sb_cp_foto_def_foto').append(html).find('.sb_cp_foto_def_sim_loop a').click(function() {
            // Удаляем похожие фото наверху (рядом со скроллом маленьких фото)
            $('.sb_cp_foto_def_scrl_box .sb_cp_foto_def_scrl_elem_sim').remove();
            var url = $(this).attr('href');
            sb_cp_foto_def.newOnChange(url);
            return false;
        });

        // Вызов плагина красивого вывода картинок
        (function(){
            var wall = jQuery('.sb_cp_foto_def_sim_list'),
                LENGTH = jQuery('img',wall).size(),
                i = 0;

            jQuery('img', wall).each(function(){
                var originalImg = this;
                var loadImg = new Image();
                var loader = jQuery('#photoblock_loader', wall);
                loadImg.onload = function(){
                    jQuery(originalImg).width(  $(originalImg).width()  );
                    jQuery(originalImg).height( $(originalImg).height() );
                    i++;

                    if(i >= LENGTH) {
                        wall.gpGallery('a', {
                            row_min_height:120,
                            row_max_height:180,
                            callback: function(){
                                // Удаляем похожие фото, которые не помещаются на большом фото в колбеке.
                                var box_j = $('.sb_cp_foto_def_sim');
                                var box_height = box_j.get(0).clientHeight;
                                var box_top = box_j.offset().top;

                                $('.sb_cp_foto_def_sim_list > a').each(function() {
                                    var sim_j = $(this);
                                    var sim_img_top = sim_j.offset().top + 117 - box_top + 20;

                                    if(sim_img_top > box_height) {
                                        sim_j.remove();
                                    } else {
                                        sim_j.css('visibility', 'visible');
                                    }
                                });
                                wall.css('height','auto');
                                jQuery('a',wall).css('visibility','visible');
                                loader.remove();
                            }
                        });
                    }

                }
                loadImg.src = this.src;
            });


        })();
    },


    // Добавляет похожие фото над большой фото (рядом со скроллом маленьких фото)

    add_sim_top: function() {

        if ( !(typeof(sb_c_similar_def) === 'object' && sb_c_similar_def !== null && typeof(sb_c_similar_def.elem_build) === 'function') ) {
            return false;
        }

        if ( !(typeof(sb_c_similar_def.foto_ar) === 'object' && sb_c_similar_def.foto_ar !== null && sb_c_similar_def.foto_ar.length > 0) ) {
            return false;
        }


        var foto_old, foto_new,
            i;

        for (i=0; i<sb_c_similar_def.foto_ar.length; i++) {
            // Генерим html фото
            foto_old = sb_c_similar_def.elem_build(sb_c_similar_def.foto_ar[i], 'foto');


            if ( !(typeof(foto_old) === 'string' && foto_old !== '') ) {
                continue;
            }


            foto_new = '<div style="*display: inline; zoom: 1;" class="sb_cp_foto_def_scrl_elem sb_cp_foto_def_scrl_elem_sim' + ((i===0) ? ' sb_cp_foto_def_scrl_elem_sim_f' : '') + '">' + $(foto_old).html() + '</div>';

            $('.sb_cp_foto_def_scrl_box').append(foto_new);


            // Добавляем многоточие
            if(typeof(sb_c_similar_def.hellip) === 'function') {
                sb_c_similar_def.hellip('.sb_cp_foto_def_scrl_elem_sim:last', sb_c_similar_def.foto_ar[i].title);
            }


            // Unbind click element scrollable
            $('.sb_cp_foto_def_scrl_box .sb_cp_foto_def_scrl_elem_sim a').unbind();
        }

        // Ставим по центру активную фотографию, т.к. добавилися ещё похожие фото
        this.centerActive(this.photos[this.photos.length-1]);
    }

};
// End photogalery

// Similar
var sb_c_similar_def = {

    object_class: '.sb_c_similar',
    //elem_width: 120,
    elem_width: 112,
    elem_width_no_mar: 100,
    elem_class: '.sb_c_similar_list_item',
    elem_title: 'h4 a',
    elem_show: 0,
    elem_index_cur: 0,
    arr_prev: '.sp_c_similar_prev',
    arr_next: '.sp_c_similar_next',
    video_class: '.sb_c_similar_video',
    // video_ar: [],
    foto_class: '.sb_c_similar_foto',
    foto_ar: [],
    foto_top_ar: [],
    vert_lines_max: 3,


    // Инициализация

    init: function() {

        // Проверяем, чтобы количество видео было равно количеству фото и больше 0
        if( !(typeof(sb_c_similar_def.video_ar) === 'object' && typeof(sb_c_similar_def.foto_ar) === 'object' && sb_c_similar_def.video_ar.length === sb_c_similar_def.foto_ar.length && sb_c_similar_def.video_ar.length !== 0) ){
            return false;
        }

        // Находим родителя
        var parent_j = $(sb_c_similar_def.object_class + ':parent');

        // Если не нашли блок и его родителя соответственно
        if (parent_j.length === 0) return false;

        // Вычисляем ширину
        var parent_width = parent_j.width();

        // Если ширина родителя меньше ширины одного элемента без правого отступа
        if (parent_width <= sb_c_similar_def.elem_width_no_mar)	return false;

        // Вычисляем количество элементов
        var elems_count = Math.floor(parent_width / sb_c_similar_def.elem_width);

        // Проверяем поместиться ли последний элемент без правого отступа
        var parent_width_new = elems_count * sb_c_similar_def.elem_width + sb_c_similar_def.elem_width_no_mar;

        if (parent_width_new <= parent_width) elems_count++;

        // Сохраняем количество показываемых элементов и позицию элемента
        sb_c_similar_def.elem_show = elems_count;
        sb_c_similar_def.elem_index_cur = elems_count;

        // Вешаем события на стрелки, если количество элементов больше, чем отображается
        if (sb_c_similar_def.video_ar.length > sb_c_similar_def.elem_show) {

            // Вешаем событие на стрелку влево
            $(sb_c_similar_def.arr_prev).bind('click', function() {
                sb_c_similar_def.left();
            });

            // Вешаем событие на стрелку вправо
            $(sb_c_similar_def.arr_next).bind('click', function() {
                sb_c_similar_def.right();
            });

        }


        var elem_html = '',
            elem_j;

        // Добавляем элементы
        for (i=0; i<sb_c_similar_def.elem_show; i++) {

            if (typeof(sb_c_similar_def.video_ar[i]) !== 'undefined') {

                // Генерим HTML элемента и добавляем его в конец
                elem_html = sb_c_similar_def.elem_build(sb_c_similar_def.video_ar[i], 'video');
                elem_j = $(elem_html).appendTo(sb_c_similar_def.video_class);

                // Добавляем многоточие если длинный текст
                sb_c_similar_def.hellip(elem_j);

            }

            if (typeof(sb_c_similar_def.foto_ar[i]) !== 'undefined') {
                // Генерим HTML элемента и добавляем его в конец
                elem_html = sb_c_similar_def.elem_build(sb_c_similar_def.foto_ar[i], 'foto');
                elem_j = $(elem_html).appendTo(sb_c_similar_def.foto_class);

                // Добавляем многоточие если длинный текст
                sb_c_similar_def.hellip(elem_j);

            }

        }


        // Убираем правый отступ у последних элементов видео и фото
        $(sb_c_similar_def.video_class + ' ' + sb_c_similar_def.elem_class + ':last,' + sb_c_similar_def.foto_class + ' ' + sb_c_similar_def.elem_class + ':last').attr('style', 'margin-right: 0 !important');

    },


    // Генерим HTML элемента
    /*
     item = {
     "nid": "246117",
     "title": "\u041d",
     "path": "Vidy_sporta",
     "icon": "&lt;img src=\"https:\/\/s-cdn.sportbox.ru\/sites\/default\/files\/imagecache\/icon_w100_h75\/4def1ad9908ac.jpg\" alt=\"\u041d" title=\"\u041d" width=\"100\" height=\"75\" \/&gt;",
     "duration": "5:07"
     };

     type (video | foto)
     */

    elem_build: function(item, type) {

        // Проходим по объекту элемента и заменяем сущности на символы
        for(var key in item){
            item[key] = item[key].replace(/&lt;/, "<");
            item[key] = item[key].replace(/&gt;/, ">");
            item[key] = item[key].replace(/&amp;/, '&');
        }


        var elem_html = '';


        // Генерим HTML видео элемента
        if( type === 'video' && typeof(item) === 'object' && typeof(item['path']) === 'string' && typeof(item['icon']) === 'string' && typeof(item['title']) === 'string' ){

            elem_html +=  '<div class="sb_c_similar_list_item">';
            elem_html += '<p class="sb_u_img_block">';
            elem_html += '<a href="/' + item['path'] + '">' + item['icon'] + '</a>';
            elem_html += '<span class="sb_u_img_block_icon"><span><span class="sb_u_icon_type sb_u_icon_type_v_w" title="Видео">Видео</span></span></span>';

            if ( typeof(item['duration']) === 'string' && item['duration'] !== '' ) {
                elem_html += '<span class="spb_video_info_label">' + item['duration'] + '</span>';
            }

            elem_html += '</p>';
            elem_html += '<div><h4><a href="/' + item['path'] + '">' + item['title'] + '</a></h4></div><div class="sb_c_block_media_clr"></div>';
            elem_html += '</div>';

        }


        // Генерим HTML фото элемента
        if (type === 'foto' && typeof(item) === 'object' && typeof(item['path']) === 'string' && typeof(item['icon']) === 'string' && typeof(item['title']) === 'string') {

            elem_html += '<div class="sb_c_similar_list_item">';
            elem_html += '<p class="sb_c_block_media_foto"><a href="/' + item['path'] + '">' + item['icon'] + '</a><span><span>&nbsp;</span></span></p>';
            elem_html += '<div><h4><a href="/' + item['path'] + '">' + item['title'] + '</a></h4></div><div class="sb_c_block_media_clr"></div>';
            elem_html += '</div>';

        }


        // Возвращаем сгенерированный HTML элемента
        return elem_html;

    },


    // Добавляет многоточие, если длинный текст (для набора)

    hellip: function(elem_j) {

        $(sb_c_similar_def.elem_title, elem_j).each(function() {
            sb_c_similar_def.hellip_one(this);
        });

    },


    // Добавляет многоточие, если длинный текст (для одного элемента)

    hellip_one: function(a_obj) {

        // Получаем текст заголовка и разбиваем на массив
        var a_j = $(a_obj).eq(0),
            a_text = a_j.html(),
            a_text_ar = a_text.split(' '); // Может вместо пробела указать пробельные символы


        // Если текст не разбили на массив
        if (a_text_ar.length === 1 && a_text_ar[0] === a_text) return false;


        // Создаем новую строчку со <span> , чтобы узнать какое слово и на какой строке
        var text_new = '<span>' + a_text_ar.join('</span><span> </span><span>') + '</span>';

        // Добавляем новую строчку
        a_j.html(text_new);


        // Узнаем порядковый номер <span> на максимальной строчке
        var spans_j = $('span', a_j),
            spans_count = spans_j.length,
            vert_lines = 1,
            spans_top = 0,
            span_last = 0,
            i;

        for(i=0; i<spans_count; i=i+2){
            // Вычисляем вертикальные координаты
            span_top = spans_j.eq(i).offset().top;

            // Задаем начальные вертикальные координаты
            if( i === 0 ) spans_top = span_top;

            // Добавляем +1 к счетчику вертикальных строк
            if( span_top > spans_top ){
                spans_top = span_top;
                vert_lines++;
            }

            // Прекращаем поиск, если вертикальных строк больше максимума
            if (vert_lines > sb_c_similar_def.vert_lines_max) {
                // Запоминаем номер последнего <span>
                span_last = i / 2;
                break;
            }
        }


        // Вернуть текст без <span>
        a_j.html(a_text);


        // Если вертикальных строк больше максимума
        if( span_last > 0 ){

            // Объединяем массив в строку и добавляем её
            var a_text_ar_new = a_text_ar.slice(0, span_last);
            text_new = a_text_ar_new.join(' ');
            text_new += '<span>&hellip;</span>';

            a_j.html(text_new);

            // Проверяем на какой строке многоточие
            spans_j = $('span', a_j);
            span_top = spans_j.eq(0).offset().top;

            if (span_top >= spans_top) {
                a_text_ar_new = a_text_ar.slice(0, span_last - 1);
                text_new = a_text_ar_new.join(' ');
                text_new += '&hellip;';
            }


            a_j.html(text_new);

        }

    },


    // Событие для стрелки влево

    left: function() {

        // Возвращает false , если слева нет больше элементов
        if( sb_c_similar_def.elem_index_cur <= sb_c_similar_def.elem_show ) return false;


        // Определяем номер элемента, который должен быть слева
        elem_index = sb_c_similar_def.elem_index_cur - sb_c_similar_def.elem_show - 1;
        sb_c_similar_def.elem_index_cur--;


        // Удаляем последние элементы
        $('.sb_c_similar_video .sb_c_similar_list_item:last').remove();
        $('.sb_c_similar_foto .sb_c_similar_list_item:last').remove();


        // Убираем отступ справа у последнего элемента
        $('.sb_c_similar_video .sb_c_similar_list_item:last').attr('style', 'margin-right: 0 !important');
        $('.sb_c_similar_foto .sb_c_similar_list_item:last').attr('style', 'margin-right: 0 !important');


        var elem_html = '',
            elem_j;

        // Добавляем первый элемент и ставим многоточие в заголовке, если длинный текст
        elem_html = sb_c_similar_def.elem_build(sb_c_similar_def.video_ar[elem_index], 'video');
        elem_j = $(elem_html).prependTo('.sb_c_similar_video');
        sb_c_similar_def.hellip(elem_j);

        elem_html = sb_c_similar_def.elem_build(sb_c_similar_def.foto_ar[elem_index], 'foto');
        elem_j = $(elem_html).prependTo('.sb_c_similar_foto');
        sb_c_similar_def.hellip(elem_j);

        // Активируем/Декативируем стрелки
        sb_c_similar_def.arrs_disables();

    },


    // Событие для стрелки вправо

    right: function() {

        // Возвращает false , если справа нет больше элементов
        // Проверять соответсвие количество элементов видео и фото
        var elem_all_count = sb_c_similar_def.video_ar.length - 1;
        if( sb_c_similar_def.elem_index_cur >= elem_all_count ) return false;

        // Определяем номер элемента, который должен быть справа
        elem_index = sb_c_similar_def.elem_index_cur + 1;
        sb_c_similar_def.elem_index_cur++;

        // Удаляем первые элементы
        $('.sb_c_similar_video .sb_c_similar_list_item:first').remove();
        $('.sb_c_similar_foto .sb_c_similar_list_item:first').remove();

        // Убираем отступ справа у последнего элемента
        $('.sb_c_similar_video .sb_c_similar_list_item:last').attr('style', 'margin-right: 12px !important');
        $('.sb_c_similar_foto .sb_c_similar_list_item:last').attr('style', 'margin-right: 12px !important');

        var elem_html = '',
            elem_j;

        // Добавляем последний элемент и ставим многоточие в заголовке, если длинный текст
        elem_html = sb_c_similar_def.elem_build(sb_c_similar_def.video_ar[elem_index], 'video');
        elem_j = $(elem_html).appendTo('.sb_c_similar_video');
        sb_c_similar_def.hellip(elem_j);

        elem_html = sb_c_similar_def.elem_build(sb_c_similar_def.foto_ar[elem_index], 'foto');
        elem_j = $(elem_html).appendTo('.sb_c_similar_foto');
        sb_c_similar_def.hellip(elem_j);

        // Активируем/Декативируем стрелки
        sb_c_similar_def.arrs_disables();

    },


    // Активируем/Декативируем стрелки

    arrs_disables: function() {

        if (sb_c_similar_def.elem_index_cur <= sb_c_similar_def.elem_show) {
            // Левая стрелка неактивна
            $(sb_c_similar_def.arr_prev).addClass('sp_c_similar_prev_disabled');
            $(sb_c_similar_def.arr_next).removeClass('sp_c_similar_next_disabled');
        }
        else if (sb_c_similar_def.elem_index_cur >= (sb_c_similar_def.video_ar.length - 1)) {
            // Правая стрелка неактивна
            $(sb_c_similar_def.arr_prev).removeClass('sp_c_similar_prev_disabled');
            $(sb_c_similar_def.arr_next).addClass('sp_c_similar_next_disabled');
        }
        else {
            // Обе стрелки активны
            $(sb_c_similar_def.arr_prev).removeClass('sp_c_similar_prev_disabled');
            $(sb_c_similar_def.arr_next).removeClass('sp_c_similar_next_disabled');
        }

    }

};
// End similar

$(document).ready(function() {
    if ($('.transfer_block_graph_wrap').length < 1) {
        return false;
    }

    function sortLines(lines) {
        lines.sort(function(a,b) {
            if (parseInt($(a).data('summ')) > parseInt($(b).data('summ'))) {
                return -1;
            } else if (parseInt($(a).data('summ')) < parseInt($(b).data('summ'))) {
                return 1;
            } else {
                return 0;
            }
        });
        return lines;
    }

    function construct_graphs(wrap, cls){
        var lines = sortLines( wrap.find(cls) ),
            etalon = parseInt($(lines[0]).data('summ'));

        for (i = 0; i < lines.length; i++) {
            if (i === 0) {
                $(lines[0]).find('.graph_left_part').width('100%');
                $(lines[0]).find('.graph_right_part').width(0);
            } else {
                var value = parseInt($(lines[i]).data('summ')),
                    itemWidth = Math.round((value / etalon) * 100);

                $(lines[i]).find('.graph_left_part').width(itemWidth + '%');
                $(lines[i]).find('.graph_right_part').width(parseInt(100 - itemWidth) + '%');
            }
        }
    }

    $('.transfer_block_graph_wrap').each(function() {
        construct_graphs($(this), '.transfer_graph_line');
        construct_graphs($(this), '.transfer_graph_line2');
    });
});
SPB.teaserImageLoader = function() {
    var win = $(window);
    var teasersImgs = $('.teazer-list li a img:not([src])');
    var type = 'big';
    var width = 210;
    var height = 120;

    if (win.width() < SPB.constants.desktop_min_width) {
        type = 'small';
        width = 109;
        height = 90;
    }

    $.each(teasersImgs, function() {
        var elem = $(this);
        var srcAttr = $(this).attr('src');

        if (typeof srcAttr === typeof undefined || srcAttr === false) {
            elem.addClass('lazy-teasers').attr('width', width).attr('height', height);
        }
    });
    $('.lazy-teasers').lazyload({
        'data_attribute': type,
        'threshold': 1000
    });
};
$(function() {
    SPB.teaserImageLoader();
});
/**
 * Добавляет кномпу подгрузки контента "Еще",
 * в нижнюю часть списка материалов
 * 'min-screen-width' - минимальная ширина окна, при котором срабатывает подгрузка по скроллу
 * 'scroll-down-event' - включена подгрузка по скроллу
 */

$.fn.moreRead = function(options) {
    var settings = $.extend({
        'min-screen-width': 0,
        'scroll-down-event': true,
        'link-more': $('<div class="row"><a class="more-btn" href="#"><span>Еще</span></a></div>'),
        'additional-data': {},
        callback: function() {}
    }, options);

    var container = this;
    var containerClass = this.attr('class');
    var scrollCounter = 0;
    var getNextPageUrl = function(pagination) {
        var next_page_el;

        if (!pagination.length) {
            return false;
        }

        next_page_el = pagination.find('.next-page');
        pagination.remove();

        if (!next_page_el.length) {
            return false;
        }

        return next_page_el.attr('href');
    };
    var scrollDownPage = function() {
        if ( ($(window).width() <= settings['min-screen-width']) || (!settings['scroll-down-event']) ) {
            return;
        }
        if ( ($(window).scrollTop() + $(window).height()) >= (container.innerHeight() + container.offset().top) ) {
            if (scrollCounter < 3) {
                settings['link-more'].click();
            }
        }
    };
    var next_page_url = getNextPageUrl(container.next('.pagination'));
    var isLoad = false;

    if (!container.length) {
        return;
    }

    settings['link-more'].on('click', function() {
        if (!next_page_url || isLoad) {
            return false;
        }

        scrollCounter++;
            settings['additional-data']['plain_content'] = 1;
        $.ajax({
            type: 'GET',
            url: next_page_url,
            data: settings['additional-data'],
            beforeSend: function() {
                isLoad = true;
                settings['link-more'].find('.more-btn').addClass('loading');
            },
            success: function(html) {
                var context = $('<div>' + html + '</div>');
                var pagination = context.find('ul.pagination');
                var content = context.find('.'+containerClass);

                if (!content.length) {
                    isLoad = false;
                    settings['link-more'].find('.more-btn').removeClass('loading');
                    return;
                }

                next_page_url = getNextPageUrl(pagination);

                container.append( content.html() );

                if (!next_page_url) {
                    settings['link-more'].remove();
                }
                isLoad = false;
                settings['link-more'].find('.more-btn').removeClass('loading');

                settings.callback.call(this);
                $(document).trigger('moreReadLoadSuccessEnd');
            }
        });

        return false;
    });

    $(window).on('scroll', scrollDownPage);

    if (next_page_url) {
        container.after(settings['link-more']);
    }
};

/* Разворачивалка длинных списков */
// Обрабатывает элемент-обёртку длинного списка
// И если необходима кнопка для разворачивания, - добавляет её и обозначает елемент обработанным(убирает класс)
spb_scripts.expandListProcess = function(idElement) {
    var $ = jQuery;

    var $expandListWrapper = $('#' + idElement);
    var expandListWrapperHeight = $expandListWrapper.height();
    var $expandListWrapperChildren = $expandListWrapper.children();
    var expandListContentHeight = 0;

    $expandListWrapperChildren.each(function () {
        expandListContentHeight += $(this).height();
    });

    if (expandListContentHeight > expandListWrapperHeight) {
        // класс hide скрывает блок. Поставили на время A/B-тестов
        if ($expandListWrapper.find('ul').hasClass('similar-content-block')) {
            $expandListWrapper.after('<div class="more-rows-expander hide"><div class="btn" onclick="spb_scripts.moreRowsExpanderClickHandler.call(this)">Развернуть</div></div>');
        } else if ($expandListWrapper.attr('id') === 'more_wrapper') {
            var wrapperHeight = spb_scripts.getHeightForExpandList(idElement);

            $expandListWrapper.css('max-height', wrapperHeight + 30);
            $expandListWrapper.after('<div class="more-rows-expander"><div class="btn" onclick="spb_scripts.moreRowsExpanderClickHandler.call(this)">Еще</div></div>');

            $(window).on('resize', function() {
                var moreBtn = $('#' + idElement).next('.more-rows-expander');

                if (moreBtn.length !== 0) {
                    $('#' + idElement).css('max-height', spb_scripts.getHeightForExpandList(idElement) + 30);
                }
            });
        } else {
            $expandListWrapper.after('<div class="more-rows-expander"><div class="btn" onclick="spb_scripts.moreRowsExpanderClickHandler.call(this)">Развернуть</div></div>');
        }
    }
};

// Реакция на кнопку 'развернуть'
spb_scripts.moreRowsExpanderClickHandler = function () {
    var $ = jQuery,
        $expanderElement = $(this).closest('.more-rows-expander'),
        $expandListWrapper = $expanderElement.prev(),
        expandListContentHeight = $expandListWrapper[0].scrollHeight; //scrollHeight - получает высоту вместе с margin

    // убрал анимацию чтобы не дергалась правая колонка
    $expanderElement.animate({height: 0, opacity: 0}, 0, function () {
        $(this).remove();
    });

    // убрал анимацию чтобы не дергалась правая колонка
    // Вначале анимируем высоту до полной высоты, после этого убираем
    $expandListWrapper.animate({maxHeight: expandListContentHeight}, 0, function () {
        $expandListWrapper.css({maxHeight: 'none'});
    });
};

// Расчитываем высоту контейнера экспандера
spb_scripts.getHeightForExpandList = function(idElement) {
    var expandListWrapper = $('#' + idElement);
    var similarItem = expandListWrapper.find('.similar-content li');
    var wrapperWidth = expandListWrapper.innerWidth();
    var wrapperHeight;
    var item1height = similarItem.eq(0).find('.title').outerHeight();
    var item2height = similarItem.eq(1).find('.title').outerHeight();
    var item3height = similarItem.eq(2).find('.title').outerHeight();
    var itemWidth = similarItem.width();
    var imgRatio = 1.78;
    var colsCounter = Math.floor(wrapperWidth / itemWidth);
    var imgHeight = itemWidth / imgRatio;

    item1height = item1height + imgHeight + 8;
    item2height = item2height + imgHeight + 8;
    item3height = item3height + imgHeight + 8;

    if (colsCounter === 3) {
        wrapperHeight = Math.max(item1height, item2height, item3height);
    } else if (colsCounter === 2) {
        wrapperHeight = Math.max(item1height, item2height);
    } else {
        wrapperHeight = similarItem.eq(0).outerHeight() + similarItem.eq(1).outerHeight() + 15;
    }

    return wrapperHeight;
};
/* Конец разворачивалки длинных списков */

var spb_scripts = spb_scripts || {};

/* определяем текущий брекпоинт (start) */
spb_scripts.getCurrentBreakpoint = function() {
    var breakpoint;

    if ( spb_scripts.helpers.matchMediaQueries('(min-width: 1200px)') ) {
      breakpoint = 'lg';
    } else

    if ( spb_scripts.helpers.matchMediaQueries('(min-width: 992px) and (max-width: 1199px)') ) {
      breakpoint = 'md';
    } else

    if ( spb_scripts.helpers.matchMediaQueries('(min-width: 561px) and (max-width: 992px)') ) {
      breakpoint = 'sm';
    } else

    if ( spb_scripts.helpers.matchMediaQueries('(max-width: 560px)') ) {
      breakpoint = 'xs';
    }

    return breakpoint;
};
/* определяем текущий брекпоинт (end) */

/* определяем текущий контейнер под баннер (start) */
spb_scripts.getBannerContainer = function(breakpoint){
    var container = $('.b-advertise_240x400-' + breakpoint);
    return container;
};
/* определяем текущий контейнер под баннер (end) */

/* Нижний баннер правой колонки по доходу до него фиксируеться вверху (start) */
spb_scripts.getFixedRightColumnBanner = function(){
	var banner = $('#adfox_spb2015_right_column_botton');
	var banner_box = banner.parent();
	var banner_wrapper = banner.find('> .banner');
    var footer_nav = $(".footer_nav");

    $(window).on('scroll', function(){
        var scrollTop = $(window).scrollTop();

        if( (banner_box.offset().top + banner_box.outerHeight() - banner.outerHeight()) < scrollTop ){
			banner.height(banner.find(' > .banner').outerHeight()).addClass('fixed');

            if (footer_nav.offset().top < banner.outerHeight() + scrollTop) {
                var new_top = -(banner.outerHeight() + scrollTop - footer_nav.offset().top);
                banner_wrapper.css('top', new_top);
            }
            else{
                banner_wrapper.css('top', '');
            }

		}else{
			banner.removeClass('fixed');
            banner.removeClass('fixed_bottom');
        }
	});
};
/* Нижний баннер правой колонки по доходу до него фиксируеться вверху (end) */
/* социальные кнопки (start) */
spb_scripts.socialBtns = function (ajaxReload) {
    var container = $('.b-social-btns');
    var url = encodeURIComponent(window.location.protocol + '//' + window.location.hostname + window.location.pathname);
    var title = $('meta[property="og:title"]').attr('content');
    var logo = $('meta[property="og:image"]').attr('content');

    if (!container) {
        return;
    }

    container.html('<ul>' +
    '<li class="b-social-btns__li">' +
    '<a class="social-btn social-btn_vk" target="_blank" href="http://vk.com/share.php?url=' + url + '&title=' + title + '&image=' + logo + '" title="ВКонтакте">R</a>' +
    '</li>' +
    '<li class="b-social-btns__li">' +
    '<a class="social-btn social-btn_ok" target="_blank" href="https://connect.ok.ru/offer?url=' + url + '&imageUrl=' + logo + '" title="Одноклассники">Y</a>' +
    '</li>' +
    '</ul>');

    container.on('click', '.social-btn_vk, .social-btn_fb, .social-btn_ok', function(event) {
        var url = $(this).attr('href');
        event.preventDefault();
        window.open(url, '', 'width=400,height=150');
        // Счётчик клика
        if (typeof yaCounter1598595 != "undefined") {
		    yaCounter1598595.reachGoal('spbSocialButton-' + spb_scripts.helpers.getUserViewDevice() + '-click');
        }
    });

    if ((typeof ajaxReload == "undefined") && (typeof yaCounter1598595 != "undefined")) {
        // Счётчик показа
        yaCounter1598595.reachGoal('spbSocialButton-' + spb_scripts.helpers.getUserViewDevice() + '-show');
    }
};
$(document).ready(function() {
    spb_scripts.socialBtns();
});
/* социальные кнопки (end) */



/* Исправляем соотношение колонок для небольших разрешений */
spb_scripts.fixColumns = function() {
    var bp = {
        'min': 500,
        'max': 630
    };
    var docWidth = $(window).width();

    if (docWidth < bp.max && docWidth > bp.min) {
        $('.col-sm-6-less-630').addClass('col-sm-6').removeClass('col-sm-7').removeClass('col-sm-5');
    } else {
        $('.col-sm-5-more-630').addClass('col-sm-5').removeClass('col-sm-6');
        $('.col-sm-7-more-630').addClass('col-sm-7').removeClass('col-sm-6');
    }
};

$(document).ready(function(){
    var timer = null;

    spb_scripts.fixColumns();

    $(window).resize(function() {
        clearTimeout(timer);
        timer = setTimeout(function() {
            spb_scripts.fixColumns();
        }, 100);
    });
});




$(function(){

	/*
		Глобальный класс навешивания
		стандортного bootstrap-datepicker
	*/

	var $elemDatepicker = $('.js-global-calendar');


    $elemDatepicker.datepicker({
        language: "ru",
        format: "yyyy-mm-dd",
        todayHighlight: true
    });


    var page_microts = $elemDatepicker.data("page-ts") * 1000;
    if (page_microts) {
        var page_date = new Date(page_microts);
        $elemDatepicker.datepicker('setDate', page_date);
    }

});

/* Stats tables 10.04 (start) */
function Blocks_Colums_Sorter() {
    $('#stats_container .stats-two-colls-wrap').each(function() {
        if ($(this).find('div.stats-column:last-child').text().length == 0) {
            if ($(this).find('div.stats-column:first-child .new_stats_table_v2_blocks_wrap').length > 1) {
                if ($(this).is('.noMove')) {
                    return;
                } else {
                    var newtable = $(this).find('div.stats-column:first-child .new-stats-div-blocks-wrap').clone();
                    var newtableHeader = $(this).find('div.new_stats_table_v2_blocks_header').clone();
                    newtable.empty();
                    var gt = Math.round($(this).find('.new_stats_table_v2_blocks_wrap').length / 2 - 1);
                    newtable.append($(this).find('.new_stats_table_v2_blocks_wrap:gt('+gt+')'));
                    $(this).find('div.stats-column:last-child').append(newtableHeader).append(newtable);
                }
            } else if ($(this).find('div.stats-column:first-child .stats_group').length > 0) {
                var count = Math.round($(this).find('div.stats-column:first-child .stats_group').length / 2)-1;
                var blocks = $(this).find('div.stats-column:first-child .stats_group:gt('+count+')');
                blocks.appendTo($(this).find('div.stats-column:last-child'));
            } else if ($(this).find('div.stats-column:first-child .stats_conference').length > 0) {
                var count = Math.round($(this).find('div.stats-column:first-child .stats_conference').length / 2)-1;
                var blocks = $(this).find('div.stats-column:first-child .stats_conference:gt('+count+')');
                blocks.appendTo($(this).find('div.stats-column:last-child'));
            } else if ($(this).find('div.new_stats_table.grey_zebra.teamsdisplay.table-shorter-group').length > 0) {
                var group = $(this).find('div.new_stats_table.grey_zebra.teamsdisplay.table-shorter-group table');
                var LeftLine = $('<div class="new_stats_table grey_zebra"/>');
                var RightLine = $('<div class="new_stats_table grey_zebra"/>');
                if (group.length > 1) {
                    var leftSide = group.splice(0, Math.ceil(group.length / 2));
                    $(leftSide).each(function() {
                        $(this).prev().appendTo(LeftLine);
                        $(this).appendTo(LeftLine);
                    });
                    $(group).each(function() {
                        $(this).prev().appendTo(RightLine);
                        $(this).appendTo(RightLine);
                    });
                } else {
                    return;
                }
                $(LeftLine).appendTo($(this).find('div.stats-column:first-child'));
                $(RightLine).appendTo($(this).find('div.stats-column:last-child'));
                $(this).find('div.new_stats_table.grey_zebra.teamsdisplay.table-shorter-group').remove();
                $(this).find('.stats-column').addClass('shorted');
                var shorterheight = ($(this).find('div.stats-column:first-child').height() < $(this).find('div.stats-column:last-child').height()) ? $(this).find('div.stats-column:first-child').height() - 15 : $(this).find('div.stats-column:last-child').height() - 15;
                shorterheight = (shorterheight > 500) ? 450 : shorterheight;
                var button = $('<div class="table-shorter-group-more-button2" align="center" style="clear:both" data-shorted="1"/>').text('Весь состав').click(function() {
                    var switcher = parseInt($(this).attr('data-shorted'));
                    switch(switcher) {
                        case 0:
                            $(this).attr('data-shorted','1').removeClass('reversed-button-bg').text('Весь состав').prev().css('height',shorterheight+'px');
                            break;
                        default:
                            $(this).attr('data-shorted','0').addClass('reversed-button-bg').text('Свернуть').prev().css('height','auto');
                            break;
                    }
                });
                $(this).css('height',shorterheight+'px').css('overflow','hidden').after(button);
            } else {
                return;
            }
        } else {
            return;
        }
    });
}
/* Stats tables 10.04 (end) */






/* разворачивалка описания для карточек команд и игроков (start) */
(function ($) {
    $.fn.readmore = function (settings) {
        var opts =  $.extend({}, $.fn.readmore.defaults, settings);

        this.each(function () {
            $(this).data('opts', opts);
            if ($(this).html().length > opts.substr_len) {
                abridge($(this));
                linkage($(this));
            }
        });

        function linkage(elem) {
            elem.append(elem.data('opts').more_link);
            elem.children('.more').on('click', function(event) {
                event.preventDefault();

                $(this).hide();
                $(this).siblings('span:not(.hidden-text)').hide().siblings('span.hidden-text').animate({'opacity': 'toggle'}, 1000);
            });
        }

        function abridge(elem) {
            var opts = elem.data('opts');
            var txt = elem.html();
            var len = opts.substr_len;
            var dots = '<span>' + opts.ellipses + '</span>';
            var charAtLen = txt.substr(len, 1);
            while (len < txt.length && !/\s/.test(charAtLen)) {
                len++;
                charAtLen = txt.substr(len, 1);
            }
            var shown = txt.substring(0, len) + dots;
            var hidden = '<span class="hidden-text" style="display: none;">' + txt.substring(len, txt.length) + '</span>';
            elem.html(shown + hidden);
        }

        return this;
    };

    $.fn.readmore.defaults = {
        substr_len: 300,
        ellipses: '&#8230; ',
        more_link: '<a class="more" href="#" style="cursor: pointer; text-decoration: none; border-bottom: #008bd7 dashed 1px;">Еще</a>'
    };

})(jQuery);
/* разворачивалка описания для карточек команд и игроков (end) */


var spb_scripts = spb_scripts || {};

spb_scripts.tables = {
    // делаем из tr ссылку
    make_tr_link: function() {
        var link = $('.make-tr-clickable-js');

        $.each(link, function(i) {
            var tr = $(link[i]).parents('tr').eq(0);

            tr.addClass('clickable');
            tr.find('td, tr').wrapInner(function() {
                if (!$(this).children().hasClass('make-tr-clickable-js')) {
                    return '<a href="' + $(link[i]).attr('href') + '"></a>';
                }
            });
        });
    },

    // Раскрытие условных обозначений под таблицами
    open_legend: function() {
        var legend = $('.legend-js');
        var legend_btn = legend.find('.b-legend__title');

        legend_btn.on('click', function() {
            $(this).next('.b-legend__wrap').toggleClass('hide');
        });
    },

    // разворачивалка строк календаря
    expand_rows: function(table) {
        var expand_btn = $('.next-rows-js, .prev-rows-js');

        table.find('.hidden-js').addClass('hidden');
        expand_btn.removeClass('hidden');

        expand_btn.on('click', function(event) {
            var elem = $(this);
            var type = elem.data('type');
            var table = elem.parents('table').eq(0);

            event.preventDefault();
            event.stopPropagation();

            elem.addClass('hidden');
            table.find('.' + type).removeClass('hidden');
        });
    }
};
$(document).ready(function() {
    $.tablesorter.defaults.widgets = ["zebra"];
    var regexp = /^([0-9]+) \\([0-9]+\\)$/;
    var regexp1 = /^([0-9]+)$/;
    var integerTextExtractor = function(node) {
        var text = $(node).text();
        var matches = text.match(regexp);
        if (matches) {
            text = matches[1];
        } else {
            matches = text.match(regexp1);
            if (matches) text = matches[1];
        }
        return text;
    };

    $('.b-table-tablesorter-js > table').tablesorter({
        sortList:[[0,0]],
        textExtraction: integerTextExtractor,
        //sortInitialOrder: "asc",
        headers: {
            0: {sorter: 0},
            1: {sorter: "integer"},
            2: {sorter: "integer"},
            3: {sorter: "integer"},
            4: {sorter: "integer"}
        },
        cssDesc : 'tablesorter-desc',
        cssAsc : 'tablesorter-asc'
    });

    spb_scripts.tables.make_tr_link();
    spb_scripts.tables.open_legend();
});

/* разворачивалка таблиц (start) */
(function ($) {
    $.fn.cutting_table = function (settings) {
        var opts = $.extend({}, $.fn.cutting_table.defaults, settings);

        this.each(function () {
            var table = $(this);

            table.data('opts', opts);
            if (!table.hasClass('cutting-table-js')) {
                hide_rows(table);
                more_link(table);
                table.addClass('cutting-table-js')
            }
        });

        function more_link(elem) {;
            var rows = elem.find('tr');

            if (rows.length <= opts.visible_rows) {
                return;
            }
            elem.after(elem.data('opts').more_link);
            elem.next('.more-btn-table-js').on('click', function(event) {
                event.preventDefault();

                $(this).hide();
                $(this).prev().find('.hidden').removeClass('hidden');
            });
        }

        function hide_rows(elem) {
            var opts = elem.data('opts');
            var rows = elem.find('tr');
            var len = opts.visible_rows;

            $.each(rows, function(index) {
                if (index > len) {
                    $(this).addClass('hidden');
                }
            });
        }

        return this;
    };

    $.fn.cutting_table.defaults = {
        visible_rows: 6,
        more_link: '<a class="more-btn more-btn-tournir-table more-btn-table-js" href="#"><span>Еще</span></a>'
    };

})(jQuery);
/* разворачивалка таблиц (end) */
if(typeof spb_scripts != "object"){
    var spb_scripts = {};
}
if(typeof spb_scripts.Components != "object"){
    spb_scripts.Components = {};
}

// Кнопка ещё у таблицы
spb_scripts.Components.moreButtonForTable = {

	options: {
		wrapper_table: 'js-moreButtonForTable',
		wrapper_ready: 'js-moreButtonForTable-ready',
		wrapper_hidden: 'js-moreButtonForTable-hidden',
	},

	init: function () {
		var self = spb_scripts.Components.moreButtonForTable;

		self.initTable();
	},

	initTable: function () {
		var self = spb_scripts.Components.moreButtonForTable;
	    var $wrapper_table = $('.' + self.options.wrapper_table);

	    if ($wrapper_table.length == 0) {
            return;
        }

		$.each($wrapper_table, function () {
	    	var $this = $(this);
	    	
		    if ($this.is('.' + self.options.wrapper_ready)) {
	            return;
	        }else{
		        $this.addClass(self.options.wrapper_ready);
	        }
	    	
	    	var show_row = $this.data('rows');
	    	
		    if ($this.find('[id*="comp_"]').find('table').length == 0) {
	            return;
	        }
	    	
			self.hiddenTableRow($this.find('[id*="comp_"]').find('table'), show_row);
		});
	},

    hiddenTableRow: function ($table, show_row) {
		var self = spb_scripts.Components.moreButtonForTable;
	    var height_fix = 1;

		var all_row = $table.find('tbody > tr').length;
		if (all_row <= show_row) {
			return;
		}

	    var last_visible_row = $table.css('position','relative').find('tbody > tr').eq(show_row - 1);
	    var table_height = last_visible_row.position().top + last_visible_row.outerHeight() + height_fix;

		$table.wrap('<div class="' + self.options.wrapper_hidden + '" style="overflow: hidden;height: ' + table_height + 'px;"/>');

        self.appendButton($table);
    },

    appendButton: function ($table) {
		var self = spb_scripts.Components.moreButtonForTable;		
		var $table_wrapper = $table.closest('[id*="comp_"]');
		var $table_wrapper_button = $('<div/>');
		var $table_more_button = $('<a href="#" class="global-more-button"><span>Еще</span></a>');

		$table_more_button.appendTo($table_wrapper).wrap($table_wrapper_button);

        $table_wrapper.find('.global-more-button').on('click', function (e) {
			e.preventDefault();
			$(this).hide().closest('[id^="comp_"]').find('.' + self.options.wrapper_hidden).attr('style','');
		});
	}

};

// Кнопка ещё у двух таблиц стоящих рядом
spb_scripts.Components.moreButtonForTwoTable = {

	options: {
		wrapper_table: 'js-moreButtonForTwoTable',
		wrapper_ready: 'js-moreButtonForTwoTable-ready',
		wrapper_hidden: 'js-moreButtonForTwoTable-hidden',
	},

	init: function () {
		var self = spb_scripts.Components.moreButtonForTwoTable;

		self.initTable();
	},

	initTable: function () {
		var self = spb_scripts.Components.moreButtonForTwoTable;
	    var $wrapper_table = $('.' + self.options.wrapper_table);

	    if ($wrapper_table.length == 0) {
            return;
        }

	    $.each($wrapper_table, function () {
	    	var $this = $(this);
	    	
		    if ($this.is('.' + self.options.wrapper_ready)) {
	            return;
	        }else{
		        $this.addClass(self.options.wrapper_ready);
	        }

	    	var show_row = $this.data('rows');
	    	var $left_col = $this.find('.col-lg-6.col-md-6').eq(0);
	    	var $right_col = $this.find('.col-lg-6.col-md-6').eq(1);
	    	
		    if ($this.find('[id*="comp_"]').find('table').length == 0) {
	            return;
	        }
	    	
			self.hiddenTableRow($left_col.find('[id*="comp_"]').find('table'), show_row);
			self.hiddenTableRow($right_col.find('[id*="comp_"]').find('table'), show_row);
	    });
	},

    hiddenTableRow: function ($table, show_row) {
		var self = spb_scripts.Components.moreButtonForTwoTable;
	    var height_fix = 1;

		var all_row = $table.find('tbody > tr').length;
		if (all_row <= show_row) {
			return;
		}

	    var last_visible_row = $table.css('position','relative').find('tbody > tr').eq(show_row - 1);
	    var table_height = last_visible_row.position().top + last_visible_row.outerHeight() + height_fix;

		$table.wrap('<div class="' + self.options.wrapper_hidden + '" style="overflow: hidden;height: ' + table_height + 'px;"/>');

        self.appendButton($table);
    },

    appendButton: function ($table) {
		var self = spb_scripts.Components.moreButtonForTwoTable;
		var $twin_table_wrapper = $table.closest('.' + self.options.wrapper_table);
		var $twin_table_wrapper_button = $('<div class="col-lg-12 col-md-12 hidden-xs hidden-sm grid-margin-bottom-20 grid-negative-margin-top-20"/>');
		var $twin_table_more_button = $('<a href="#" class="global-more-button"><span>Еще</span></a>');
		
		var $table_wrapper = $table.closest('[id*="comp_"]');
		var $table_wrapper_button = $('<div class="hidden-lg hidden-md"/>');
		var $table_more_button = $('<a href="#" class="global-more-button"><span>Еще</span></a>');

		$table_more_button.appendTo($table_wrapper).wrap($table_wrapper_button);
		
		$table_more_button.on('click', function (e) {
			e.preventDefault();
			$(this).hide().closest('[id^="comp_"]').find('.' + self.options.wrapper_hidden).attr('style','');
		});

		if ($twin_table_wrapper.find('> .col-lg-12.col-md-12').find('> .global-more-button').length != 0) {
			return;
		}

		$twin_table_more_button.appendTo($twin_table_wrapper).wrap($twin_table_wrapper_button);
		
		$twin_table_more_button.on('click', function (e) {
			e.preventDefault();
			$(this).parent('.col-lg-12.col-md-12').hide();
			$twin_table_wrapper.find('.global-more-button').hide().end()
							   .find('.' + self.options.wrapper_hidden).attr('style','');
		});
	}

};

// Глобальная подсветка команд и играков при наведении
spb_scripts.Components.globalGameTeamHoverBacklight = {

	options: {
		hover_class: 'global-game-team-hover'
	},

	init: function () {
		var self = spb_scripts.Components.globalGameTeamHoverBacklight;
        var game = $('#left-column').find('[data-team1], [data-team2]');
        var team = $('#left-column').find('[data-team]');

        game.on({
            'mouseenter': function() {
                var elem = $(this);
                var team1 = elem.data('team1');
                var team2 = elem.data('team2');

                $.each(team, function() {
                    var $this = $(this);

                    if ( ($this.data('team') === team1) || ($this.data('team') === team2) ) {
                        $this.addClass(self.options.hover_class);
                    }
                });
            },
            'mouseleave': function() {
                team.removeClass(self.options.hover_class);
            }
        });

        team.on({
            'mouseenter': function() {
                var elem = $(this);
                var team = elem.data('team');

                $.each(game, function() {
                    var $this = $(this);

                    if ( ($this.data('team1') === team) || ($this.data('team2') === team) ) {
                        $this.addClass(self.options.hover_class);
                    }
                });
            },
            'mouseleave': function() {
                game.removeClass(self.options.hover_class);
            }
        });
    }

};
$(spb_scripts.Components.globalGameTeamHoverBacklight.init);

// Переключатель "Всего/Дома/В гостях" для нескольких блоков
spb_scripts.Components.tabsStandingsFullBlocks = {
	options: {
		classes: 'show-t show-h show-g'
	},
    init: function(elem){
		var self = spb_scripts.Components.tabsStandingsFullBlocks;
		var $elem = $('#'+elem);

		self.binds($elem);
	},
	binds: function($elem){
		var self = spb_scripts.Components.tabsStandingsFullBlocks;
		var $tabs = $elem.find('.js-global-data-chooiser');
		var $table = $elem.find('.js-data-chooiser').next('table');
		
		$tabs.find('a').on('click', function(e){
			e.preventDefault();
			var $this = $(this);
			var class_name = $this.data('class');

			$tabs.find('a').removeClass('selected').filter($this).addClass('selected');
			$table.removeClass(self.options.classes).addClass(class_name);
		});
	}
};



// Подсказки по клику на заголовок таблицы
spb_scripts.Components.tableHeaderTooltips = {
    init: function () {

        $(".b-table table:not(.calendar-cutting-js) thead th").click(function () {


            var current_thead = $(this).closest("thead");

            if (current_thead.find('.title_tip').length) {
                current_thead.find('.title_tip').remove();
                return;
            }

            if (!$(this).closest(".b-table").find('.b-legend__wrap').length) {
                return;
            }
            var colspan = current_thead.find('th').length;
            var legend = $(this).closest(".b-table").find('.b-legend__wrap').html();

            current_thead.append("<tr><th class='title_tip' colspan='" + colspan + "' style='text-align: center'>" + legend + "</th></tr>");

        });
    }
};
$(spb_scripts.Components.tableHeaderTooltips.init);

spb_scripts.playerResize = function() {
    var videoFrame = $('.node-header__video iframe')[0];
    var videoContainerWidth = $('.node-header__video').width();
    var aspectRatio = 16 / 9;
    var barHeight = 24;
    var tryNewPlayerHeight = 30;
    var frameHeight = (videoContainerWidth / aspectRatio) + barHeight + tryNewPlayerHeight;

    if (videoFrame) {
        $(videoFrame).attr('width', videoContainerWidth).attr('height', frameHeight);
    }
};

spb_scripts.resizePlayerInNodeContent = function() {
    var iframeWidth = $('.node-content__body').width();
    var aspectRatio = 16 / 9;
    var barHeight = 24;
    var iframeHeight = (iframeWidth / aspectRatio) + barHeight;

    var playerIframes = $('iframe[name=spb_player_iframe]');

    $.each(playerIframes, function() {
        var playerIframe = $(this);

        playerIframe.height(iframeHeight);
        playerIframe.width(iframeWidth);
    });
};

/* переставляем тизеры в ноде (start) */
spb_scripts.readMoreBlockReplacer = function() {
    var obj = this;

    obj.replaceTeasers = function() {
        var teasers;
        var breakpoint = spb_scripts.getCurrentBreakpoint();
        var container = obj.getTeasersContainer(breakpoint);

        teasers = $('.read-more-block-container-js').detach();
        container.append(teasers);
    };

    obj.getTeasersContainer = function(breakpoint) {
        return $('.read-more-block-' + breakpoint);
    };

    obj.replaceTeasers();

    obj.old_breakpoint = spb_scripts.getCurrentBreakpoint();
    obj.container = obj.getTeasersContainer(obj.old_breakpoint);
    obj.timerTeasersReplace = null;

    $(window).resize(function() {
        clearTimeout(obj.timerTeasersReplace);

        obj.timerTeasersReplace = setTimeout(function() {
            var new_breakpoint = spb_scripts.getCurrentBreakpoint();

            if (new_breakpoint !== obj.old_breakpoint) {
                obj.replaceTeasers();

                obj.old_breakpoint = new_breakpoint;
            }

        }, 100);
    });
};
/* переставляем тизеры в ноде (end) */

$(function() {
    // загрузка фотографий по необходимости (при прокрутке)
    $('.lazy').lazyload({
        effect: 'fadeIn',
        threshold: 1000
    });

    // шара в социальные сети
    $('.node-content__social a').on('click', function(event) {
        var elem = $(this);

        event.preventDefault();
        window.open(elem.attr('href'), '', 'menubar=no, toolbar=no, resizable=no, scrollbars=no, width=640, height=400');
    });
});

// слайдер похожих видео
$(function() {
    if ($('.node-header__match').length !== 0 && $('.node-header__similar-videos').length !== 0) {
        var similarVideosBlock = $('.node-header__similar-videos .wrapper');
        var navBtn = $('.nav-btn');

        navBtn.on('click', function(event) {
            var elem = $(this);
            var type = elem.attr('id');

            event.preventDefault();

            if (type === 'next-btn-js') {
                similarVideosBlock.animate({scrollLeft: '+=158'}, 'fast');
            } else {
                similarVideosBlock.animate({scrollLeft: '-=158'}, 'fast');
            }
        });
    }
});

/* Вставляем инфографику в iFrame (start) */
$(document).ready(function () {
    var infograph = $('a[data-role-spb="infographic"]');
    var iframe = $('<iframe frameborder="0" scrolling="no"></iframe>');
    var imgRegExp = new RegExp(/(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/i);
    var player = $('a[data-role-spb="spb_player"]');
    var instagram = $('a[data-role-spb="spb_ig"]');
    var twitter = $('a[data-role-spb="spb_tw"]');
    var youtube = $('a[data-role-spb="spb_youtube_embed"]');
    var instagramBlock;
    var twitterBlock;
    var content;

    spb_scripts.playerResize();

    $.each(infograph, function() {
        var elem = $(this);
        var image = $('<img />');

        if (imgRegExp.test(elem.attr('href'))) {
            image.attr({
                'src': elem.attr('href'),
                'width': elem.data('iframe-width')
            }).addClass('node-infograph').addClass('node-infograph__image');
            content = '<a href="' + elem.attr('href') + '" target="_blank"></a>';
            content = $(content).append(image);
            elem.after(content);
            elem.remove();
        } else {
            if ( !(elem.data('iframe-width') > elem.parent().width())) {
                iframe.attr({
                    'src': elem.attr('href'),
                    'height': elem.data('iframe-height'),
                    'width': elem.data('iframe-width')
                }).addClass('node-infograph');
                content = iframe;
                elem.after(content);
                elem.remove();
            } else {
                if (!elem.parent('p')) {
                    elem.wrap('<p></p>');
                }
            }
        }

    });

    $.each(player, function() {
        var elem = $(this);
        var playerIframe = $('<iframe name="spb_player_iframe" scrolling="no" frameborder="0" allowfullscreen="1" width="450" height="254"></iframe>');

        playerIframe.attr({
            'src': elem.data('player-url')
        });

        elem.after(playerIframe);
        elem.remove();

        spb_scripts.resizePlayerInNodeContent();

        $(window).resize(function() {
            spb_scripts.resizePlayerInNodeContent();
        });

    });

    $.each(instagram, function () {
        var elem = $(this);
        instagramBlock = $(
            '<blockquote class="instagram-media" data-instgrm-captioned data-instgrm-version="7" style="background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 15px; max-width:600px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">' +
            '  <div style="padding:8px;">' +
            '    <div style="background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;">' +
            '      <div style="background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div>' +
            '    </div>' +
            '    <p style="margin:8px 0 0 0; padding:0 4px;">' +
            '      <a href="' + elem.attr('href') + '" style="color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;" target="_blank">&nbsp;</a>' +
            '    </p>' +
            '    <p style="color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;">&nbsp;</p>' +
            '  </div>' +
            '</blockquote>' +
            '<script async defer src="https://s-cdn.sportbox.ru/sites/all/libraries/design/_spbver2751_/js/instagram/embeds.js"></script>'
        );

        elem.after(instagramBlock);
        elem.remove();
    });

    $.each(twitter, function() {
        var elem = $(this);
        twitterBlock = $('<blockquote class="twitter-tweet" lang="ru">' +
        '<a href="' + elem.attr('href') + '"></a></blockquote>' +
        '<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>');

        elem.after(twitterBlock);
        elem.remove();
    });

    $.each(youtube, function() {
        var elem = $(this),
            embed_url = elem.data('embed-url'),
            wrapper = $('<div class="youtube_embed_wrapper">'),
            iframe = $('<iframe>');

        iframe.attr({
            src: embed_url,
            width: 560,
            height: 315,
            frameborder: 0,
            allowfullscreen: true
        });

        function resize() {
            var width, height;

            width = iframe.parent().width();
            height = Math.round(width * 0.5625); // 16:9

            iframe.attr({
                width: width,
                height: height
            });
        }

        wrapper.append(iframe);
        elem.after(wrapper);
        elem.remove();

        $(document).ready(resize);
        $(window).resize(resize);
    });
});
/* Вставляем инфографику в iFrame (end) */

/* Слайдер похожих видео в Материале (start) */
(function () {
    var video_similar = {
        primary_li_width: 0,
        wrapper_focused: false,
        wrapper: null,

        init: function () {
            video_similar.wrapper = $('.node-header__similar-videos .wrapper');
            video_similar.wrapper.perfectScrollbar({
                suppressScrollY: false,
                useBothWheelAxes: true
            });

            video_similar.primary_li_width = video_similar.wrapper.find('li').outerWidth();

            video_similar.resize_images();
            video_similar.scroll_similar();

            video_similar.wrapper.one('wheel click touchstart', function() {
                video_similar.wrapper_focused = true;
            });

            $(window).resize(function () {
                video_similar.resize_images();
                if (!video_similar.wrapper_focused) {
                    video_similar.scroll_similar();
                }
            });
        },

        resize_images: function () {
            var li_arr = $('.node-header__similar-videos .wrapper li');
            var visible_li_count = video_similar.wrapper.width() / video_similar.primary_li_width ;
            var visible_li_count_floor = Math.floor(visible_li_count);
            var free_space_percent = visible_li_count - visible_li_count_floor;

            if ($(window).width() >= SPB.constants.desktop_min_width) {
                li_arr.width(video_similar.primary_li_width);
                return;
            }

            if ((free_space_percent < 0.2 ) && (visible_li_count <= li_arr.length)) {
                li_arr.width(video_similar.primary_li_width * 1.2);
            } else if ((free_space_percent > 0.9) && (visible_li_count <= li_arr.length)) {
                li_arr.width(video_similar.primary_li_width * 1.1);
            } else {
                li_arr.width(video_similar.primary_li_width);
            }
        },

        scroll_similar: function () {
            var current_li = video_similar.wrapper.find('.current');
            var li_width = video_similar.wrapper.find('li').not(current_li).outerWidth();
            var li_left_offset = current_li.prevAll().length * li_width - video_similar.wrapper.width();
            var scroll_left = (video_similar.wrapper.width() / 2 ) + li_left_offset + (current_li.outerWidth() / 2 );

            video_similar.wrapper.scrollLeft(scroll_left);
        }
    };

    $(video_similar.init);
})();
/* Слайдер похожих видео в Материале (end) */

spb_scripts.floatNodePageBanner = function() {

	if(spb_scripts.helpers.getCurrentCssDisplayClass('lg') || spb_scripts.helpers.getCurrentCssDisplayClass('md')) {
		return
	};

	var $banner240x400 = $('.js-nodepage-content-banner240x400');
    if($banner240x400.length == 0){
        return;
    }
	var bottom_banner240x400 = $banner240x400.offset().top + $banner240x400.outerHeight();

	var $floatBlock = $('.js-nodepage-content-float-banner240x400:eq(0)');
	var top_floatBlock;

	if($floatBlock.length != 0){
		top_floatBlock = $floatBlock.prev().offset().top + $floatBlock.prev().outerHeight();
	}else{
		$floatBlock = $('.NodePage-content-block .content > *:eq(0)').not('.youtube_embed_wrapper, p');
		top_floatBlock = $('.NodePage-content-block .content').offset().top;
		if($floatBlock.length == 0){
			$floatBlock = $('.NodePage-content-block .content .b-gallery img:eq(0)');
			top_floatBlock = $('.NodePage-content-block .content .b-gallery').offset().top;
		}
	}

	if(bottom_banner240x400 > top_floatBlock){
		$floatBlock.addClass('nodepage-content-float-banner240x400');
	}else{
		$floatBlock.removeClass('nodepage-content-float-banner240x400');
	}
};
setTimeout(spb_scripts.floatNodePageBanner, 1000);
setTimeout(spb_scripts.floatNodePageBanner, 2000);
setTimeout(spb_scripts.floatNodePageBanner, 3000);


$(function() {
	var social = $('.NodePage-content-block').find('.b-social-btns');
	social.find('li a').each(function(){
		var $this = $(this);
		if($this.is('.social-btn_vk')){
			$this.html('<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px"><path class="ico" fill="#000000" d="M42.67,7.33C47.557,12.217,50,18.107,50,25c0,6.912-2.443,12.807-7.33,17.684S31.893,50,25,50c-6.912,0-12.807-2.439-17.684-7.316S0,31.912,0,25c0-6.893,2.439-12.783,7.316-17.67S18.088,0,25,0C31.893,0,37.783,2.443,42.67,7.33z M25.95,37.673c3.053,0,5.405-0.634,7.056-1.901c1.632-1.248,2.448-3.091,2.448-5.53c0-1.306-0.355-2.458-1.066-3.456c-0.71-0.998-1.786-1.661-3.226-1.987c1.19-0.499,2.055-1.2,2.592-2.103c0.557-0.922,0.835-1.978,0.835-3.168c0-2.266-0.864-3.975-2.592-5.127c-1.767-1.152-4.186-1.728-7.258-1.728h-8.583v25H25.95z M21.976,17.137h2.765c1.363,0,2.371,0.24,3.024,0.72c0.672,0.48,1.008,1.258,1.008,2.333c0,0.941-0.326,1.651-0.979,2.131c-0.614,0.48-1.594,0.73-2.938,0.749h-2.88V17.137z M26.267,26.901c1.19,0,2.055,0.278,2.592,0.835c0.538,0.538,0.806,1.363,0.806,2.477c0,1.018-0.307,1.767-0.922,2.247c-0.634,0.48-1.565,0.72-2.794,0.72h-3.975v-6.279H26.267z"/></svg>');
		}
		if($this.is('.social-btn_fb')){
			$this.html('<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px"><path class="ico" fill="#000000" d="M42.67,7.33C47.557,12.217,50,18.107,50,25c0,6.912-2.443,12.807-7.33,17.684S31.893,50,25,50c-6.912,0-12.807-2.439-17.684-7.316S0,31.912,0,25c0-6.893,2.439-12.783,7.316-17.67S18.088,0,25,0C31.893,0,37.783,2.443,42.67,7.33z M26.987,39.459V24.597h3.687l0.403-4.09h-4.09v-2.563c0-1.248,0.504-1.863,1.512-1.843s1.983,0.115,2.923,0.288l0.576-4.493c-2.669-0.499-5.16-0.418-7.474,0.245c-2.314,0.662-3.471,2.357-3.471,5.084v3.283h-2.736v4.09h2.736v14.862H26.987z"/></svg>');
		}
		if($this.is('.social-btn_gp')){
			$this.html('<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px"><path class="ico" fill="#000000" d="M42.67,7.33C47.557,12.217,50,18.107,50,25c0,6.912-2.443,12.807-7.33,17.684S31.893,50,25,50c-6.912,0-12.807-2.439-17.684-7.316S0,31.912,0,25c0-6.893,2.439-12.783,7.316-17.67S18.088,0,25,0C31.893,0,37.783,2.443,42.67,7.33z M27.909,13.652h0.749c0.384,0,0.768-0.106,1.152-0.317l1.843-1.094h-7.46c-2.227,0-4.181,0.403-5.861,1.21c-1.68,0.806-2.655,2.218-2.923,4.234c-0.288,1.805,0.163,3.379,1.354,4.724c1.248,1.459,2.967,2.131,5.156,2.016c-0.461,0.691-0.552,1.397-0.274,2.117c0.278,0.72,0.562,1.243,0.85,1.57c-1.363,0.096-2.549,0.274-3.557,0.533s-1.973,0.725-2.895,1.397c-0.845,0.614-1.522,1.517-2.031,2.707c-0.509,1.19-0.283,2.391,0.677,3.6c0.845,1.075,2.079,1.819,3.701,2.232c1.623,0.413,3.283,0.533,4.983,0.36c1.699-0.173,3.264-0.629,4.695-1.368c1.43-0.739,2.376-1.752,2.837-3.039c0.96-2.65,0.096-4.925-2.592-6.826c-0.307-0.211-0.773-0.542-1.397-0.994c-0.624-0.451-1.003-0.811-1.138-1.08c-0.403-0.749-0.202-1.459,0.605-2.131c0.538-0.461,1.104-0.883,1.699-1.267c0.595-0.384,1.094-0.922,1.498-1.613c0.73-1.21,0.816-2.525,0.259-3.946c-0.557-1.421-1.44-2.429-2.65-3.024H27.909z M23.329,29.724c0.23,0,0.49,0.106,0.778,0.317c0.173,0.134,0.47,0.365,0.893,0.691c0.422,0.326,0.72,0.557,0.893,0.691c0.73,0.691,1.051,1.526,0.965,2.506c-0.086,0.979-0.629,1.747-1.627,2.304c-1.152,0.653-2.659,0.778-4.522,0.374c-1.863-0.403-2.755-1.536-2.679-3.399c0.019-0.979,0.475-1.771,1.368-2.376c0.893-0.605,1.858-0.965,2.895-1.08C22.389,29.733,22.734,29.724,23.329,29.724z M25.101,16.46c0.835,1.834,1.051,3.336,0.648,4.507c-0.326,0.902-1.008,1.478-2.045,1.728c-1.613,0.422-2.818-0.264-3.615-2.059c-0.797-1.795-0.994-3.317-0.59-4.565c0.288-0.941,0.95-1.536,1.987-1.786C23.061,13.902,24.266,14.627,25.101,16.46z M34.735,25.288v3.658h1.671l-0.029-3.658h3.687v-1.642h-3.658v-3.6h-1.671v3.6h-3.6v1.642H34.735z"/></svg>');
		}
	});
});




$(window).resize(function() {
    clearTimeout(timer);
    var timer = setTimeout(function() {
        spb_scripts.playerResize();
        spb_scripts.floatNodePageBanner();
    }, 100);
});

var tv_page = {
    server_time: 0,
    client_time: 0,
    city_timezone: 0,

    current_channel: 'all',
    hide_out_time: true,
    today_date: undefined,
    selected_date: undefined,

    show_now: true,

    sportbox_channel_id: 36,

    onLoad: function(server_time, city_timezone, selected_date) {
        tv_page.server_time = server_time;
        tv_page.city_timezone = city_timezone;
        tv_page.client_time = (new Date()).getTime() / 1000;

        if (url('?date') != null) {
            tv_page.hide_out_time = false;
        }

        tv_page.today_date = $('.tv-today-link-js').data('date');
        tv_page.selected_date = selected_date;

        tv_page.setupTransmission();
        tv_page.setupSportboxEndedTranslation();

        $('.channel-js').each(function(){
            var channel_id = $(this).data('channelId');
            $(this).find('.tv-channel-logo-js').on('click', function(event){
                event.preventDefault();
                tv_page.changeChannel(channel_id);
            });
            $(this).find('.tv-channel-header-js').on('click', function(event){
                event.preventDefault();
                tv_page.changeChannel(channel_id);
            });
        });

        $('.tv-channel-select-item-js').each(function(){
            var channel_id = $(this).data('channelId');
            $(this).on('click', function(){tv_page.changeChannel(channel_id)});
        });

        $('.tv-now-link-js').on('click', function(event){
            event.preventDefault();
            tv_page.showNow();
        });

        $('.tv-today-link-js').on('click', function(event) {
            event.preventDefault();
            tv_page.showToday()
        });

        $('.tv-city-select-item-js').each(function(){
            var city_id = $(this).data('cityId');
            $(this).on('click', function(){tv_page.changeCity(city_id)});
        });

        $('.tv-day-link-js').each(function(){
            var date = $(this).data('date');
            $(this).on('click', function(event){
                event.preventDefault();
                tv_page.changeDate(date);
            });
        });

        $('.tv-current-day-js .tv-today-link-js').addClass('change_mode_link');

        // Сделано для Адфокса для того чтобы в баннере можно было поставь ссылку на конкретный канал
        // Т.к. адфокс не умеет ссылки с хэшами
        if (url('?channel') != null) {
            var channel_hash = '#channel='+url('?channel');
            if (url('?date') != null) {
                window.history.pushState('', '', '/tv?date='+url('?date')+channel_hash);
            } else {
                window.history.pushState('', '', '/tv'+channel_hash);
            }
        }

        if (url('#channel') != null) {
            tv_page.changeChannel(
                url('#channel')
            );
        }
    },

    showNow: function () {
        if (tv_page.today_date != tv_page.selected_date) {
            window.location.href = url('path');
            return;
        }

        tv_page.hide_out_time = true;
        $('.channel-js').each(function() {
            var channel_id = $(this).data('channelId');
            tv_page.restoreChannel(channel_id);
        });
        $('.tv-current-day-js .tv-now-link-js').removeClass('change_mode_link');
        $('.tv-current-day-js .tv-today-link-js').addClass('change_mode_link');

        this.show_now = true;
        tv_page.setupSportboxEndedTranslation();
    },

    showToday: function () {
        if (tv_page.today_date != tv_page.selected_date) {
            tv_page.changeDate(tv_page.today_date);
            return;
        }

        if (tv_page.current_channel == 'all') {
            $('.channel-js').each(function () {
                $(this).find('.tv-transmission-container-js').removeClass('hide');
            });
            $('.tv-current-day-js .tv-now-link-js').addClass('change_mode_link');
            $('.tv-current-day-js .tv-today-link-js').removeClass('change_mode_link');
        }

        this.show_now = false;
        tv_page.setupSportboxEndedTranslation();
    },

    showAllChannels: function () {
        $('.channel-js').removeClass('hide');
        window.location.hash='#channel=all';
    },

    changeChannel: function (channel_id) {
        if (tv_page.current_channel != 'all') {
            tv_page.restoreChannel(tv_page.current_channel);
        }

        if (channel_id == 'all') {
            this.showAllChannels();

            $('.channel-select-js').html('Все каналы<span class="caret"></span>');
            $('.tv-now-link-js').removeClass('hide');
            tv_page.current_channel = 'all';
            $('.tv-current-day-js .tv-now-link-js').addClass('change_mode_link');
            $('.tv-current-day-js .tv-today-link-js').removeClass('change_mode_link');

            if (tv_page.today_date == tv_page.selected_date) {
                if (this.show_now) {
                    this.showNow();
                } else {
                    this.showToday();
                }
            }

            return;
        }

        $('.channel-js').each(function() {
            var $this = $(this),
                current_channel_id = $this.data('channelId');

            if (current_channel_id != channel_id) {
                $this.addClass('hide');
                return;
            }

            $this.removeClass('hide');
            $this.find('.tv-transmission-container-js').removeClass('hide');
            $this.find('h3').addClass('hide');

            // делаем программу выбранного канала одноколоночной
            $this.parent()
                .removeClass('col-lg-4').addClass('col-lg-8')
                .removeClass('col-md-4').addClass('col-md-8');
            // col-sm-6 и col-xs-12 таким и остаётся

            $('.tv-third-clearfix-js')
                .removeClass('visible-lg').addClass('hidden-lg')
                .removeClass('visible-md').addClass('hidden-md');

            $('.tv-second-clearfix-js')
                .removeClass('visible-sm').addClass('hidden-sm');

            $('.channel-select-js').html($this.find('h3').text()+'<span class="caret"></span>');
        });

        $('.tv-now-link-js').addClass('hide');
        tv_page.current_channel = channel_id;
        window.location.hash='#channel='+channel_id;
    },

    setupTransmission: function() {
        if (tv_page.today_date != tv_page.selected_date) {
            return;
        }
        var near_transmission_count = 0;
        var previous_channel_id = 0;

        $('.tv-transmission-container-js').each(function(i) {
            var elem = $(this);
            var time_start = elem.data('timeStart');
            var time_finish = elem.data('timeFinish');
            var current_channel = elem.parent('.channel-js').data('channelId');

            if (previous_channel_id != current_channel) {
                near_transmission_count = 0;
            }

            if (tv_page.server_time > time_finish) {
                elem.addClass('out_time');
                if (tv_page.hide_out_time) {
                    elem.addClass('hide');
                }
            } else if ((tv_page.server_time > time_start) && (tv_page.server_time < time_finish)) {

                var percentage;
                var progress;
                elem.addClass('right_now');
                percentage = Math.round(100 * ((tv_page.server_time - time_start) / (time_finish - time_start)));
                progress = '<div class="tv_progress" style="width:' + percentage + '%">&nbsp;</div>';
                elem.find('.tv-transmission-js').parent().prepend(progress);

            } else if((near_transmission_count >= 4) && tv_page.hide_out_time) {
                elem.addClass('hide');
            } else {
                near_transmission_count++;
            }

            previous_channel_id = current_channel;
        });
    },

    restoreChannel: function(channel_id) {
        // Делаем программу (ранее выбранного) канала обратно 2х-3х колоночной
        var $current_channel = $('.channel-' + tv_page.current_channel + '-js').parent();
        $current_channel.removeClass('col-lg-12').addClass('col-lg-4');
        $current_channel.removeClass('col-md-12').addClass('col-md-4');
        // col-sm-6 и col-xs-12 таким и остаётся

        $('.tv-third-clearfix-js')
            .removeClass('hidden-lg').addClass('visible-lg')
            .removeClass('hidden-md').addClass('visible-md');

        $('.tv-second-clearfix-js')
            .removeClass('hidden-sm').addClass('visible-sm');

        $('.channel-'+channel_id+'-js h3').removeClass('hide');

        if (tv_page.today_date != tv_page.selected_date) {
            return;
        }

        var near_transmission_count = 0;
        $('.channel-'+channel_id+'-js .tv-transmission-container-js').each(function(i){
            var elem = $(this);
            var time_start = elem.data('timeStart');
            var time_finish = elem.data('timeFinish');

            if (tv_page.server_time > time_finish) {
                if (tv_page.hide_out_time) {
                    elem.addClass('hide');
                }
            } else if ((tv_page.server_time > time_start) && (tv_page.server_time < time_finish)) {
                // now
            } else if((near_transmission_count >= 4) && tv_page.hide_out_time) {
                elem.addClass('hide');
            } else {
                near_transmission_count++;
            }
        });
    },

    changeCity: function(city_id) {
        $.cookie('tv_city', city_id, {expires: 365, path: '/'});
        location.reload(true);
    },

    changeDate: function(date) {
        var channel_hash = '';
        if (tv_page.current_channel != 'all') {
            channel_hash = '#channel='+tv_page.current_channel;
        }
        window.location.href = '/tv?date='+date+channel_hash;
    },

    datepickerChangeDate: function() {
		$('.tv-calendar-container-js').on('changeDate', function(event) {
	        tv_page.changeDate(event.format());
	    });
    },

    setupSportboxEndedTranslation: function() {
        var total_transmission = $('.channel-'+tv_page.sportbox_channel_id+'-js>.tv-transmission-container-js').length,
            finished_transmissions = $('.channel-'+tv_page.sportbox_channel_id+'-js>.tv-transmission-container-js.out_time').length;

        var remain_tranmissions = total_transmission - finished_transmissions;

        if (tv_page.show_now && remain_tranmissions == 0) {
            $('.tv-sportbox-end-translation-js').removeClass('hide');
        } else {
            $('.tv-sportbox-end-translation-js').addClass('hide');
        }
    }
};

$(function(){
	tv_page.datepickerChangeDate();
    $('.tv_datepicker_button-js').on('click', function(event) {
        event.stopPropagation();
        $(this).prev('span').click();
    });
});
var count = 0;
var counter = null;

$(function() {
    var liveTournir = $('.translation.tournir_live');
    var liveCheckbox = $('#live-checkbox-js');

    if (liveTournir.length > 0) {
        liveTournir.on('click', function() {
            spb_scripts.reloadWindow();
        });

        count = 10;
        counter = setInterval(spb_scripts.LivePageReloadTimer, 1000);

        spb_scripts.reloadWindow();
    }
    spb_scripts.onlinesPageTitleCalendar();

    liveCheckbox.on('change', function() {
        var isChecked = $(this).prop('checked');
        var param = '';

        if (isChecked) {
            param = '?live=1';
        }

        window.location.href = '/stats' + param;
    });
});

spb_scripts.toggleShowInBlockOnline = function(game_id, link, is_to_sport) {
    is_to_sport = is_to_sport || false;

    var action = 'toggle_show_game_in_block_top_results';
    if (is_to_sport) {
        action = 'toggle_show_game_in_block_top_results_to_sport';
    }

    $.ajax({
        url: '/stats_online/' + action + '/' + game_id,
        success: function () {
            link = $(link);

            var is_set_show_in_block = link.hasClass('checked');

            var message = 'Не выводить в блоке онлайнов';
            if (is_set_show_in_block) {
                message = 'Выводить в блоке онлайнов';
            }
            if (is_to_sport) {
                message += ' на странице вида спорта';
            }

            if (is_set_show_in_block) {
                link.html('<span class="glyphicon glyphicon-unchecked"></span>').css('color', '').attr('title', message).removeClass('checked');
            } else {
                link.html('<span class="glyphicon glyphicon-check"></span>').css('color', 'red').attr('title', message).addClass('checked');
            }
        },
        error: function () {
            alert('Ошибка при изменение значения');
        }
    });
};

spb_scripts.onlinesPageTitleCalendar = function() {
    $('#onlines_page_title_calendar').on('changeDate', function(event){
        var s_date = event.date;
        var r_date = s_date;
        var r_date_month = '' + (r_date.getMonth() + 1);
        var r_date_date = '' + r_date.getDate();
        var date_param;

        if (typeof( s_date ) == 'string') {
            var split_date = s_date.split('-');
            r_date = new Date();
            r_date.setMonth(split_date[1], split_date[0]);
            r_date.setYear(split_date[2]);
        }

        if (r_date_month.match(/^\d$/) !== null) {
            r_date_month = '0' + r_date_month;
        }

        if (r_date_date.match(/^\d$/) !== null) {
            r_date_date = '0' + r_date_date;
        }

        date_param = r_date.getFullYear() + '-' + r_date_month + '-' + r_date_date;

        window.location.href = '/stats/' + date_param;
    });
};

/* обновляем онлайны по таймеру (start) */
spb_scripts.loadPageWithAjax = function(date, live, sport_id, parent_sport_id) {
    var data_send = {
        page_date: date
    };

    if (live == 1) {
        data_send.live = live;
    }

    if (sport_id) {
        data_send.sport_id = sport_id;
    }

    if (parent_sport_id) {
        data_send.parent_sport_id = parent_sport_id;
    }

    $.ajax({
        url: "/sportevents_online",
        cache: true,
        type: "GET",
        data: data_send
    }).done(function(data) {
        var tournnamentsArr = data;
        var tournnamentsArrLength = 0;
        var tournnamentElem;

        for (tournnamentElem in tournnamentsArr) {
            if (tournnamentsArr.hasOwnProperty(tournnamentElem)) {
                tournnamentsArrLength++;
            }
        }

            $.each(tournnamentsArr, function (i) {
                var tournamentHtml = $(tournnamentsArr[i]).html();

                $('#' + i).html(tournamentHtml);
            });
            Blocks_Colums_Sorter();

    });
};
/* обновляем онлайны по таймеру (end) */

spb_scripts.reloadWindow = function() {
    var live = 0;
    var date = $('#livereload_current_page_date').val();

    if ($('input[name=live]').prop('checked') === true) {
        live = 1;
    }
    count = 10;
    spb_scripts.loadPageWithAjax(date, live);
};

spb_scripts.LivePageReloadTimer = function() {
    count = count - 1;
    if (count <= 0) {
        clearInterval(counter);
        spb_scripts.reloadWindow();
        count = 10;
        counter = setInterval(spb_scripts.LivePageReloadTimer, 1000);
    } else {
        $('.translation.tournir_live').text(count);
    }
};
var count = 0;
var counter = null;

$(function() {
    var liveTournir = $('.translation.olympic_tournir_live');
    var liveCheckbox = $('#olympic-live-checkbox-js');

    if (liveTournir.length > 0) {
        liveTournir.on('click', function() {
            spb_scripts.reloadOlympicWindow();
        });

        count = 10;
        counter = setInterval(spb_scripts.OlympicLivePageReloadTimer, 1000);

        spb_scripts.reloadOlympicWindow();
    }
    spb_scripts.onlinesOlympicPageTitleCalendar();

    liveCheckbox.on('change', function() {
        var isChecked = $(this).prop('checked');
        var olympic_sport_id = $('#livereload_olympic_sport_id').val();
        var param = '';
        var olympic_url = $('#livereload_olympic_url').val();

        if (isChecked) {
            param = '?live=1';
        }

        window.location.href = olympic_url + param;
    });
});

spb_scripts.onlinesOlympicPageTitleCalendar = function() {
    $('#olympic_onlines_page_title_calendar').on('changeDate', function(event){
        var s_date = event.date;
        var r_date = s_date;
        var r_date_month = '' + (r_date.getMonth() + 1);
        var r_date_date = '' + r_date.getDate();
        var date_param;

        if (typeof( s_date ) == 'string') {
            var split_date = s_date.split('-');
            r_date = new Date();
            r_date.setMonth(split_date[1], split_date[0]);
            r_date.setYear(split_date[2]);
        }

        if (r_date_month.match(/^\d$/) !== null) {
            r_date_month = '0' + r_date_month;
        }

        if (r_date_date.match(/^\d$/) !== null) {
            r_date_date = '0' + r_date_date;
        }

        date_param = r_date.getFullYear() + '-' + r_date_month + '-' + r_date_date;

        var olympic_url = $('#livereload_olympic_url').val();

        window.location.href = olympic_url + '/' + date_param;
    });
};

/* обновляем онлайны по таймеру (start) */
spb_scripts.loadOlympicPageWithAjax = function(date, live, olympic_sport_id) {
    var data_send = {
        page_date: date
    };

    if (live == 1) {
        data_send.live = live;
    }

    if (olympic_sport_id) {
        data_send.olympic_sport_id = olympic_sport_id;
    }

    $.ajax({
        url: "/sportevents_online",
        cache: true,
        type: "GET",
        data: data_send
    }).done(function(data) {
        var tournnamentsArr = data;
        var tournnamentsArrLength = 0;
        var tournnamentElem;

        for (tournnamentElem in tournnamentsArr) {
            if (tournnamentsArr.hasOwnProperty(tournnamentElem)) {
                tournnamentsArrLength++;
            }
        }

            $.each(tournnamentsArr, function (i) {
                var tournamentHtml = $(tournnamentsArr[i]).html();

                $('#' + i).html(tournamentHtml);
            });
            Blocks_Colums_Sorter();

    });
};
/* обновляем онлайны по таймеру (end) */

spb_scripts.reloadOlympicWindow = function() {
    var live = 0;
    var date = $('#livereload_current_page_date').val();
    var olympic_sport_id = $('#livereload_olympic_sport_id').val();

    if ($('input[name=live]').prop('checked') === true) {
        live = 1;
    }
    count = 10;
    spb_scripts.loadOlympicPageWithAjax(date, live, olympic_sport_id);
};

spb_scripts.OlympicLivePageReloadTimer = function() {
    count = count - 1;
    if (count <= 0) {
        clearInterval(counter);
        spb_scripts.reloadOlympicWindow();
        count = 10;
        counter = setInterval(spb_scripts.OlympicLivePageReloadTimer, 1000);
    } else {
        $('.translation.olympic_tournir_live').text(count);
    }
};
function toggleShowInBlockOnline(game_id, link, is_to_sport) {
    is_to_sport = is_to_sport || false;

    var action = 'toggle_show_game_in_block_top_results';
    if (is_to_sport) {
        action = 'toggle_show_game_in_block_top_results_to_sport';
    }

    $.ajax({
        url: '/stats_online/' + action + '/' + game_id,
        success: function () {
            link = $(link);

            var is_set_show_in_block = link.hasClass('checked');
            
            var message = 'Не выводить в блоке онлайнов';
            if (is_set_show_in_block) {
                message = 'Выводить в блоке онлайнов';
            }
            if (is_to_sport) {
                message += ' на странице вида спорта';
            }

            if (is_set_show_in_block) {
                link.html('<span class="glyphicon glyphicon-unchecked"></span>').css('color', '').attr('title', message).removeClass('checked');
            } else {
                link.html('<span class="glyphicon glyphicon-check"></span>').css('color', 'red').attr('title', message).addClass('checked');
            }
        },
        error: function () {
            alert('Ошибка при изменение значения');
        }
    });
};
spb_scripts.topResultsCalendar = function() {
	$('#top-results-calendar-js').on('changeDate', function(event) {
        var s_date = event.date,
            r_date = s_date;

        if (typeof( s_date ) == 'string') {
            var split_date = s_date.split('-');
            r_date = new Date();
            r_date.setMonth(split_date[1],split_date[0]);
            r_date.setYear(split_date[2]);
        }

        var r_date_month = '' + (r_date.getMonth() + 1);

        if (r_date_month.match(/^\d$/) !== null) {
            r_date_month = '0' + r_date_month;
        }

        var r_date_date = '' + r_date.getDate();

        if (r_date_date.match(/^\d$/) !== null) {
            r_date_date = '0' + r_date_date;
        }

        var date_param = r_date.getFullYear() + '-' + r_date_month + '-' + r_date_date;

        window.location.href = '/stats/' + date_param;
    });
};


$(function(){
	spb_scripts.topResultsCalendar();
});
var rateAPlayerController = (function () {
    return {
        sendVote: function (formData) {
            $.ajax({
                cache: true,
                async: true,
                url: '/voting/points/rateaplayer',
                type: 'GET',
                data: formData,
                dataType: 'html',
                success: function () {
                    var page_node_id = 0;

                    if (Drupal.settings && Drupal.settings.spb_helper && Drupal.settings.spb_helper.current_page_nid) {
                        page_node_id = Drupal.settings.spb_helper.current_page_nid;
                    }

                    if (Drupal.settings && Drupal.settings.spb_current_page_node_id) {
                        page_node_id = Drupal.settings.spb_current_page_node_id;
                    }

                    if (page_node_id) {
                        $.ajax({
                            cache: true,
                            async: true,
                            url: '/rateaplayer/nodeplayers/' + page_node_id,
                            type: 'GET',
                            data: formData,
                            dataType: 'html',
                            success: function (data, textStatus) {
                                var entityId = url("?entity_id", [location.host, "?",  formData].join(''));
                                if (textStatus == 'success') {
                                    if (entityId) {
                                        $("#rateaplayerModel-" + entityId).replaceWith(data);
                                    } else {
                                        $("#newRateAPlayer").html(data);
                                    }
                                }
                            }
                        });
                    }

                    var date = new Date();
                    date.setHours(date.getHours() + 6);
                    $.cookie('participate_in_vote_as_anonymous', 1, {expires: date, path: '/'});
                }
            });
        }
    }
})();
if (typeof spb_scripts !== "object") {
    spb_scripts = {};
}

spb_scripts.matchcenter = {

    live: {
        settings: {
            timer: null
        },

        init: function(){
            var self = spb_scripts.matchcenter.live;
            if(!self.settings.live){
                return false;
            }

            self.$elems = {};
            self.$elems.$head = $('.liveHtml_head');
            self.$elems.$video_links = $('.liveHtml_video_links');
            self.$elems.$line_up = $('.liveHtml_timeline');
            self.$elems.$football_field = $('.liveHtml_football_field');
            self.$elems.$football_timeline = $('.liveHtml_football_timeline');
            self.$elems.$football_line_up = $('.liveHtml_football_line_up');
            self.$elems.$football_statistic_match = $('.liveHtml_football_statistic_match');
            self.$elems.$protocol = $('.liveHtml_protocol');
            self.$elems.$other_matches = $('.liveHtml_other_matches');

            self.intervalInit();
        },

        intervalInit: function(){
            var self = spb_scripts.matchcenter.live;
            self.settings.timer = setInterval(self.ajaxUpdate, self.settings.update_time*1000);
        },

        ajaxUpdate: function(){
            var self = spb_scripts.matchcenter.live;

            $.ajax({
                type: "GET",
                dataType: 'json',
                cache: true,
                url: self.settings.json_url,
                success: self.ajaxSuccess,
                error: self.ajaxFailure
            });
        },

        ajaxSuccess: function(data){
            var self = spb_scripts.matchcenter.live;

            if(typeof data.head_html !== 'undefined'){
                self.renderHead(data.head_html);
            }

            if(typeof data.video_links_html !== 'undefined'){
                self.renderVideoLinks(data.video_links_html);
            }

            if(typeof data.line_up_html !== 'undefined'){
                self.renderLineUp(data.line_up_html);
            }

            if(typeof data.football_field_html !== 'undefined'){
                self.renderFootballField(data.football_field_html);
            }

            if(typeof data.football_timeline_html !== 'undefined'){
                self.renderFootballTimeline(data.football_timeline_html);
            }

            if(typeof data.football_line_up_html !== 'undefined'){
                self.renderFootballLineUp(data.football_line_up_html);
            }

            if(typeof data.football_statistic_match_html !== 'undefined'){
                self.renderFootballStatisticMatch(data.football_statistic_match_html);
            }

            if(typeof data.protocol_html !== 'undefined'){
                self.renderProtocol(data.protocol_html);
            }

            if(typeof data.other_matches_html !== 'undefined'){
                self.renderOtherMatches(data.other_matches_html);
            }

            if(typeof data.live_commentary !== 'undefined'){
                self.insertLiveCommentary(data.live_commentary);
            }

            if(typeof data.last_game_events !== 'undefined'){
                self.lastGameEvents(data.last_game_events);
            }

            /*if(typeof data.game_bet_votes !== 'undefined'){
                self.gameBetVotes(data.game_bet_votes);
            }*/

            if(self.$elems.$football_field.length != 0){
                spb_scripts.matchcenter.mouseEventsBind.init();
            }

            if (!data.live) {
                clearInterval(self.settings.timer);
            }
        },

        ajaxFailure: function(data){
            var self = spb_scripts.matchcenter.live;
            clearInterval(self.settings.timer);
            self.init();
        },

        renderHead: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$head.html(data);

            // Запукс рендера социалок
            spb_scripts.socialBtns(true);
        },

        renderVideoLinks: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$video_links.html(data);
        },

        renderLineUp: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$line_up.html(data);
        },

        renderFootballField: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$football_field.html(data);

            // расстановка игроков на поле
            spb_scripts.isFirstPlayersSet = true;
            spb_scripts.setPlayersOnField();
            spb_scripts.isFirstPlayersSet = false;
        },

        renderFootballTimeline: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$football_timeline.html(data);
        },

        renderFootballLineUp: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$football_line_up.html(data);
        },

        renderFootballStatisticMatch: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$football_statistic_match.html(data);
        },

        renderProtocol: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$protocol.html(data);
        },

        renderOtherMatches: function(data){
            var self = spb_scripts.matchcenter.live;
            self.$elems.$other_matches.html(data);
        },

        insertLiveCommentary: function(data){
            var self = spb_scripts.matchcenter.live;
            var commentary = $('#sb_c_trans_text_text').find('ul');

            $.each(data, function(key, value){
                var id = 'labels-id-' + key;

                if (value.log != '') {
                    if (self.settings.commentary_list_id.indexOf(key) == -1 ){
                        self.settings.commentary_list_id.push(key);

                        if ($('#' + id).length) {
                            $('li#' + id).replaceWith(value.log);
                        }
                        else {
                            commentary.prepend(value.log);
                            $('#' + id).addClass('labeling_new');
                        }
                    } else {
                        if ($('#' + id).length) {
                            $('li#' + id).replaceWith(value.log);
                        }
                        else {
                            commentary.prepend(value.log);
                            $('#' + id).addClass('labeling_new');
                        }
                    }
                }

            });
        },

        lastGameEvents: function(data){
            var self = spb_scripts.matchcenter.live;

            function flashAnimate(elem){
                $(elem)
                    .fadeTo(400, 0.2)
                    .fadeTo(400, 1)
                    .fadeTo(400, 0.2)
                    .fadeTo(400, 1)
                    .fadeTo(400, 0.2)
                    .fadeTo(400, 1)
                    .fadeTo(400, 0.2)
                    .fadeTo(400, 1);
            };

            $.each(data, function(key, value){

                if( self.settings.event_list_id.indexOf(key) == -1 ){

                    self.settings.event_list_id.push(key);

                    var event_icon = $('[data-game-event="'+key+'"]');
                    flashAnimate(event_icon);

                    var event_player = $('#players_'+value.source_player_id+', .liveHtml_football_field a[data-href-pid="'+value.source_player_id+'"]');
                    flashAnimate(event_player);

                    if(value.target_player_id != null){
                        var event_target_player = $('#players_'+value.target_player_id+', .liveHtml_football_field a[data-href-pid="'+value.target_player_id+'"]');
                        flashAnimate(event_target_player);
                    }
                }

            });
        }

        /*gameBetVotes: function(data){
            var self = spb_scripts.matchcenter.live;

            poll.data.resDraw = data.vote_for_draw;
            poll.data.resTeam1 = data.vote_for_winning_team1;
            poll.data.resTeam2 = data.vote_for_winning_team2;
            poll.countValues(poll.data.resTeam2, poll.data.resTeam2, poll.data.resDraw);
            poll.renderBars();
        },*/
    },

    mouseEventsBind: {
        init: function(){
            var self = spb_scripts.matchcenter.mouseEventsBind;

            self.data = {};
            self.data.field_sel1 = '.match_field_block div.igrok a, .match_field_block .match_field_zamen div a, .match_field_block .match_field_zapas a';
            self.data.field_sel2 = '.match_field_block div.igrok span.stats_pict, .match_field_block .match_field_zamen div span.stats_pict';
            self.data.timeline = '#match_center_timeline span.event_left_command, #match_center_timeline span.event_right_command';
            self.data.sostav = '#players_clubs table td';

            // Fields binds
            $(self.data.field_sel1).unbind('mouseenter, mouseleave').bind('mouseenter', self.field_player_mouseenter).bind('mouseleave', self.field_player_mouseleave);
            $(self.data.field_sel2).unbind('mouseenter, mouseleave').bind('mouseenter', self.field_span_mouseenter).bind('mouseleave', self.field_span_mouseleave);

            // Timeline binds
            $(self.data.timeline).unbind('mouseenter, mouseleave').bind('mouseenter', self.update_timeline_event_mouseenter).bind('mouseleave', self.update_timeline_event_mouseleave)
                // baloon
                .on('show.bs.tooltip', function () {
					$(self.data.timeline).tooltip('hide');
				})
                .tooltip({
                    html: '<div class="match_center_tooltip"/>',
                    animation: false,
                    delay: { "show": 200, "hide": 1000 }
                });

            // Sostav binds
            $(self.data.sostav).unbind('mouseenter, mouseleave').bind('mouseenter', self.update_sostav_mouseenter).bind('mouseleave', self.update_sostav_mouseleave);
        },

        field_player_mouseenter: function(){
            var pid = 0, min = 0;

            if ($(this).attr('data-href-pid'))
                pid = $(this).attr('data-href-pid');
            else if ($(this).attr('data-pid'))
                pid = $(this).attr('data-pid');

            if (pid) {
                var sel = '#match_center_timeline span.stats_pict[attrfrom=' + pid + '], #match_center_timeline span.stats_pict[attrto=' + pid + ']';
                $(sel).addClass('event_lighted');
            }
        },

        field_player_mouseleave: function(){
            var pid = 0, min = 0;

            if ($(this).attr('data-href-pid'))
                pid = $(this).attr('data-href-pid');
            else if ($(this).attr('data-pid'))
                pid = $(this).attr('data-pid');

            if (pid) {
                var sel = '#match_center_timeline span.stats_pict[attrfrom=' + pid + '], #match_center_timeline span.stats_pict[attrto=' + pid + ']';
                $(sel).removeClass('event_lighted');
            }
        },

        field_span_mouseenter: function(){
            var pid = $(this).attr('data-pid');
            if (pid) {
                var min = $(this).attr('attr-min'),
                    subclass = $(this).attr('class').replace(/^stats_pict (stats\_pict\_[a-z\_]+).*/, '$1'),
                    sel = '#match_center_timeline span.stats_pict.' + subclass + '[attrfrom=' + pid + '][attr-min=' + min
                        + ']:first, #match_center_timeline span.stats_pict.' + subclass + '[attrto=' + pid
                        + '][attr-min=' + min + ']:first';

                if ($(this).hasClass('stats_pict_replace')) {
                    var topid = $(this).attr('attrto');
                    if (topid) {
                        var sel1 = '.match_field_block div.igrok[data-pid=' + topid + '] span.stats_pict_replace[attrto=' + pid
                            + '][attr-min=' + min + '], .match_field_block .match_field_zamen div[data-pid=' + topid + '] span.stats_pict_replace[attrto=' + pid
                            + '][attr-min=' + min + ']';
                        $(sel1).addClass('event_lighted');
                    }
                }

                $(sel).addClass('event_lighted');
            }
        },

        field_span_mouseleave: function(){
            var pid = $(this).attr('data-pid');
            if (pid) {
                var min = $(this).attr('attr-min'),
                    subclass = $(this).attr('class').replace(/^stats_pict (stats\_pict\_[a-z\_]+).*/, '$1'),
                    sel = '#match_center_timeline span.stats_pict.' + subclass + '[attrfrom=' + pid + '][attr-min=' + min
                        + ']:first, #match_center_timeline span.stats_pict.' + subclass + '[attrto=' + pid
                        + '][attr-min=' + min + ']:first';

                if ($(this).hasClass('stats_pict_replace')) {
                    var topid = $(this).attr('attrto');
                    if (topid) {
                        var sel1 = '.match_field_block div.igrok[data-pid=' + topid + '] span.stats_pict_replace[attrto=' + pid
                            + '][attr-min=' + min + '], .match_field_block .match_field_zamen div[data-pid=' + topid + '] span.stats_pict_replace[attrto=' + pid
                            + '][attr-min=' + min + ']';
                        $(sel1).removeClass('event_lighted');
                    }
                }

                $(sel).removeClass('event_lighted');
            }
        },


        update_timeline_event_mouseenter: function(){
            var from = $(this).attr('attrfrom'),
                to = $(this).attr('attrto'),
                field_sel = '',
                field_sel1 = '',
                minute = $(this).attr('attr-min'),
                classes = $(this).attr('class'),
                class1 = classes.replace(/.*(stats\_pict\_[a-z\_]+).*/, '$1');

            $('div.igrok div.relative_events div span.stats_pict, .match_field_zamen div span.events  span.stats_pict').removeClass('event_lighted');

            if (from) {
                field_sel = 'div.igrok[data-pid=' + from + '] div.relative_events div span.stats_pict.' + class1 + '[attr-min=' + minute + ']:first, .match_field_zamen div[data-pid=' + from
                + '] span.events span.stats_pict.' + class1 + '[attr-min=' + minute + ']:first';

                if ($(field_sel).length)
                    $(field_sel).addClass('event_lighted');

                field_sel1 = 'td#players_' + from;
            }

            if (field_sel1 != '') {
                $(field_sel1).attr('old-bg', $(field_sel1).css('background-color'));
                $(field_sel1).css('background-color', '#E4F18E');
            }

            if (to) {
                field_sel = 'div.igrok[data-pid=' + to + '] div.relative_events div span.stats_pict.' + class1 + '[attr-min=' + minute + ']:first, .match_field_zamen div[data-pid=' + to
                + '] span.events  span.stats_pict.' + class1 + '[attr-min=' + minute + ']:first';

                if ($(field_sel).length)
                    $(field_sel).addClass('event_lighted');

                field_sel1 = 'td#players_' + to;
            }

            if (field_sel1 != '') {
                $(field_sel1).attr('old-bg', $(field_sel1).css('background-color'));
                $(field_sel1).css('background-color', '#E4F18E');
            }
        },

        update_timeline_event_mouseleave: function(){
            var from = $(this).attr('attrfrom'),
                to = $(this).attr('attrto'),
                field_sel = '',
                field_sel1 = '';

            if (from) {
                field_sel = 'div.igrok div.relative_events div span.stats_pict, .match_field_zamen div span.events span.stats_pict';
                $(field_sel).removeClass('event_lighted');
                field_sel1 = 'td#players_' + from;
            }

            if (field_sel1 != '')
                $(field_sel1).stop().css('background-color', $(field_sel1).attr('old-bg'));

            if (to) {
                field_sel = 'div.igrok div.relative_events div span.stats_pict, .match_field_zamen div span.events  span.stats_pict';
                $(field_sel).removeClass('event_lighted');
                field_sel1 = 'td#players_' + to;
            }

            if (field_sel1 != '')
                $(field_sel1).stop().css('background-color', $(field_sel1).attr('old-bg'));
        },


        update_sostav_mouseenter: function(){
            if (this.id) {
                $(this).attr('old-bg', $(this).css('background-color'));
                $(this).css('background-color', '#E4F18E');
                var pid = this.id.replace('players_', '');
                var sel = 'span.stats_pict[attrfrom=' + pid + '], span.stats_pict[attrto=' + pid + '], div.igrok[data-pid="' + pid + '"] div.relative_events div span.stats_pict';
                $(sel).addClass('event_lighted');
            }
        },

        update_sostav_mouseleave: function(){
            if (this.id) {
                $(this).css('background-color', $(this).attr('old-bg'));
                var pid = this.id.replace('players_', '');
                var sel = 'span.stats_pict[attrfrom=' + pid + '], span.stats_pict[attrto=' + pid + '], div.igrok[data-pid="' + pid + '"] div.relative_events div span.stats_pict';
                $(sel).removeClass('event_lighted');
            }
        },
    }

};

/* расстановка игроков на поле в зависимости от ширины экрана */
spb_scripts.setPlayersOnField = function() {
    var fieldZona = $('.b-field__zona');
    var fieldZoneWidth = fieldZona.width();
    var fieldZonaRatio = 276 / 286;
    var igrok = $('.igrok');

    fieldZona.css('height', fieldZoneWidth * fieldZonaRatio);

    if (spb_scripts.isFirstPlayersSet) {
        $.each(igrok, function () {
            var elem = $(this);
            var xPos = elem.data('left') / (276 / 100) - 8;
            var yPos = elem.data('top') / (286 / 100) - 5;

            if (xPos < 0) {
                elem.css({
                    'left': 0 - xPos + '%',
                    'top': yPos + '%'
                });
            } else {
                elem.css({
                    'left': xPos + '%',
                    'top': yPos + '%'
                });
            }
        });
    }
    igrok.fadeTo(300 , 100);
};

/* позиционируем блоки в сетке */
spb_scripts.moveMoreReadOnMatchcenter = function() {
    var winWidth = $(window).width();
    var statsBlock = $('#stats-block');

    if ( (winWidth < SPB.constants.tablet_min_width) && !spb_scripts.moveMoreReadOnMatchcenteMovedToTop) {
        $('#more-content-js').before(statsBlock);
        spb_scripts.moveMoreReadOnMatchcenterMovedToTop = true;
    } else {
        $('#right-column').prepend(statsBlock);
        spb_scripts.moveMoreReadOnMatchcenteMovedToTop = false;
    }
};

/* разворачивалка других матчей */
spb_scripts.onlinesExpander = function() {
    var onlinesBlock = $('.b-onlines-expander-js');
    var onlinesItem = onlinesBlock.find('.b-onlines-box__item');

    if (onlinesItem.length > 9) {
        $.each(onlinesItem, function(index) {
            if (index > 8) {
                $(this).addClass('hidden');
            }
        });
        onlinesBlock.append('<a class="more-btn more-btn_type_dotted more-btn_no_margins more-btn-expand-matches-js" href="#"><span class="glyphicon glyphicon-option-horizontal"></span></a>');

        onlinesBlock.on('click', '.more-btn-expand-matches-js', function(event) {
            event.preventDefault();
            onlinesItem.removeClass('hidden');
            $(this).remove();
        });
    }
};

$(document).ready(function() {
    spb_scripts.matchcenter.live.init();
    spb_scripts.matchcenter.mouseEventsBind.init();

    $('.labeling_row:lt(8)').addClass('show');  // показываем первые 8 элементов

    /* расстановка игроков на поле в зависимости от ширины экрана (start) */
    spb_scripts.isFirstPlayersSet = true;
    spb_scripts.setPlayersOnField();
    spb_scripts.isFirstPlayersSet = false;
    /* расстановка игроков на поле в зависимости от ширины экрана (end) */

    /* позиционируем блоки в сетке (start) */
    spb_scripts.moveMoreReadOnMatchcenterMovedToTop = false;
    spb_scripts.moveMoreReadOnMatchcenter();
    /* позиционируем блоки в сетке (end) */

    /* выравниваеться на высоту соседнего блока (start) */
    (function() {
        if ( spb_scripts.helpers && spb_scripts.helpers.getCurrentCssDisplayClass('lg') ) {

            var $live_commentary_block = $('#live-commentary-js'),
                $parent_row = $live_commentary_block.closest('.row'),
                fix_height = $parent_row.outerHeight() - 30;

            if ( fix_height > $live_commentary_block.height() ) {
                $live_commentary_block.height(fix_height);
            }
        }
    })();
    /* выравниваеться на высоту соседнего блока (end) */

    /* показываем пачку текстовой трансляции при нажатии ЕЩЕ (start) */
    var live_commentary_more_js_flag = false;
    $('#live-commentary-more-js').on('touchstart click', function(event) {

        if (live_commentary_more_js_flag) {
            return false;
        }

        live_commentary_more_js_flag = true;

        var moreBtn = $(this);
        var block = $('#live-commentary-js');

        event.preventDefault();

        block.css('cssText', 'height: auto !important;');

        moreBtn.remove();

        setTimeout(function () {
            live_commentary_more_js_flag = false;
        }, 1000);


    });
    /* показываем пачку текстовой трансляции при нажатии ЕЩЕ (end) */

    $(window).resize(function() {
        spb_scripts.setPlayersOnField();
        spb_scripts.moveMoreReadOnMatchcenter();
    });


    $(document).on('click', '.b-videos-more', function (e) {
        e.preventDefault();
        $(this).closest("#spb_match_videos").addClass("show_all");
        $(this).closest("li").remove();
    });


    $(".b-onlines__item_more_link a").click(function(e){
        e.preventDefault();
        $(this).closest('.b-onlines').addClass('open');
    });

    /* разворачивалка других матчей (start) */
    spb_scripts.onlinesExpander();
    /* разворачивалка других матчей (end) */
});

if (typeof spb_scripts !== "object") {
    spb_scripts = {};
}

spb_scripts.generatePlayerPopup = function(players){
    var playerList = document.querySelectorAll('.igrok, .substitute-player');

    for (var i = 0; i < playerList.length; i++) {
        playerList[i].addEventListener('mouseenter', showPopup, this);
        playerList[i].addEventListener('mouseleave', removePopup);
    }

    function removePopup() {
        document.querySelectorAll('.player__popup')[0].remove();
    }

    function showPopup() {
        var statistics = getPlayerStatistics(this);
        var statisticRows = createStatisticRows(statistics);
        var playerLink = this.lastElementChild;
        var playerProfileSrc = playerLink.getAttribute('href');

        playerLink.style.pointerEvents = 'none';
        var popup = document.createElement('div');
        popup.className = 'player__popup';
        popup.innerHTML = '<table>' +
                '<tr>' +
                    '<th>' + this.innerText + '</th>' +
                    '<th class="player__param"><a href="' + playerProfileSrc + '">Профиль</a></th>' +
                '</tr>' +
                statisticRows +
            '</table>';
        this.append(popup);
        alignPopup(popup);
    }

    function getPlayerStatistics(player) {
        var playerId = player.getAttribute('data-pid');
        var playerArray = players.result.filter(function(obj) {
            return obj.player.id == playerId;
        });
        var statistics = playerArray[0].statistics;

        return statistics;
    }

    function createStatisticRows(statistics) {
        var popupStatictics = '';
        for (var j = 0; j < statistics.length; j++) {
            popupStatictics += '<tr><td>' + statistics[j].name + '</td><td class="player__param">' + statistics[j].value + '</td></tr>';
        };

        return popupStatictics;
    }

    function alignPopup(popup) {
        var popupBounds = popup.getBoundingClientRect();
        if (popupBounds.left < 0) {
            var absLeft = popup.offsetLeft;
            var left = popupBounds.left;
            var calculatedLeft = absLeft - left;
            popup.style.left = calculatedLeft +'px';
        } else if (popupBounds.right > window.screen.width) {
            var calculatedRight = window.screen.width - popupBounds.right;
            popup.style.left = 'auto';
            popup.style.right = calculatedRight + 'px';
        };
    }
}
/* TournamentsSelector (stats) */

$(document).ready(function()
{
    $('.tournaments-after-item').each(function() {
        if (document.location.pathname ==  $(this).find('a').attr('href')) {
            $(this).addClass('active');
            $(this).find('span').unwrap();
        }
    })

    if (document.location.pathname !=  $('.tournaments-main-link').find('a').attr('href')) {
        $('.tournaments-main-link').show();
    }
});

/* TournamentsSelector (end) */

function pingLiveGameScore(gameId, pingIntervalSeconds, callback) {
    var timer;

    if (!gameId || (typeof callback !== 'function')) {
        return;
    }

    function updateScore() {
        $.ajax({
            'url': '/stats/game_json/' + gameId,
            'dataType': 'json',
            cache: true,
            success: function (data) {
                if (!data || !data.score) {
                    return;
                }

                if (data.live) {
                    callback.call(this, data.score, true);
                } else {
                    callback.call(this, data.score, false);

                    $(window).off('focus', startPing);
                    $(window).off('blur', stopPing);
                    stopPing();
                }
            }
        });
    }

    function startPing() {
        clearTimeout(timer);
        timer = setInterval(updateScore, pingIntervalSeconds * 1000);
    }

    function stopPing() {
        clearTimeout(timer);
    }

    $(window).on('focus', startPing);
    $(window).on('blur', stopPing);

    startPing();
}

/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */

// first an inline dependency, jquery.colorhelpers.js, we inline it here
// for convenience

/* Plugin for jQuery for working with colors.
 * 
 * Version 1.1.
 * 
 * Inspiration from jQuery color animation plugin by John Resig.
 *
 * Released under the MIT license by Ole Laursen, October 2009.
 *
 * Examples:
 *
 *   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
 *   var c = $.color.extract($("#mydiv"), 'background-color');
 *   console.log(c.r, c.g, c.b, c.a);
 *   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
 *
 * Note that .scale() and .add() return the same modified object
 * instead of making a new one.
 *
 * V. 1.1: Fix error handling so e.g. parsing an empty string does
 * produce a color rather than just crashing.
 */
(function(B){B.color={};B.color.make=function(F,E,C,D){var G={};G.r=F||0;G.g=E||0;G.b=C||0;G.a=D!=null?D:1;G.add=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]+=I}return G.normalize()};G.scale=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]*=I}return G.normalize()};G.toString=function(){if(G.a>=1){return"rgb("+[G.r,G.g,G.b].join(",")+")"}else{return"rgba("+[G.r,G.g,G.b,G.a].join(",")+")"}};G.normalize=function(){function H(J,K,I){return K<J?J:(K>I?I:K)}G.r=H(0,parseInt(G.r),255);G.g=H(0,parseInt(G.g),255);G.b=H(0,parseInt(G.b),255);G.a=H(0,G.a,1);return G};G.clone=function(){return B.color.make(G.r,G.b,G.g,G.a)};return G.normalize()};B.color.extract=function(D,C){var E;do{E=D.css(C).toLowerCase();if(E!=""&&E!="transparent"){break}D=D.parent()}while(!B.nodeName(D.get(0),"body"));if(E=="rgba(0, 0, 0, 0)"){E="transparent"}return B.color.parse(E)};B.color.parse=function(F){var E,C=B.color.make;if(E=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10))}if(E=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10),parseFloat(E[4]))}if(E=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55)}if(E=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55,parseFloat(E[4]))}if(E=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(F)){return C(parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16))}if(E=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(F)){return C(parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16))}var D=B.trim(F).toLowerCase();if(D=="transparent"){return C(255,255,255,0)}else{E=A[D]||[0,0,0];return C(E[0],E[1],E[2])}};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);

// the actual Flot code
(function($) {
    function Plot(placeholder, data_, options_, plugins) {
        // data is on the form:
        //   [ series1, series2 ... ]
        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]
        // or { data: [ [x1, y1], [x2, y2], ... ], label: "some label", ... }

        var series = [],
            options = {
                // the color theme used for graphs
                colors: ["#edc240", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
                legend: {
                    show: true,
                    noColumns: 1, // number of colums in legend table
                    labelFormatter: null, // fn: string -> string
                    labelBoxBorderColor: "#ccc", // border color for the little label boxes
                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph
                    position: "ne", // position of default legend container within plot
                    margin: 5, // distance from grid edge to default legend container within plot
                    backgroundColor: null, // null means auto-detect
                    backgroundOpacity: 0.85 // set to 0 to avoid background
                },
                xaxis: {
                    show: null, // null = auto-detect, true = always, false = never
                    position: "bottom", // or "top"
                    mode: null, // null or "time"
                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, style: "italic", weight: "bold", family: "sans-serif", variant: "small-caps" }
                    color: null, // base color, labels, ticks
                    tickColor: null, // possibly different color of ticks, e.g. "rgba(0,0,0,0.15)"
                    transform: null, // null or f: number -> number to transform axis
                    inverseTransform: null, // if transform is set, this should be the inverse function
                    min: null, // min. value to show, null means set automatically
                    max: null, // max. value to show, null means set automatically
                    autoscaleMargin: null, // margin in % to add if auto-setting min/max
                    ticks: null, // either [1, 3] or [[1, "a"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks
                    tickFormatter: null, // fn: number -> string
                    labelWidth: null, // size of tick labels in pixels
                    labelHeight: null,
                    reserveSpace: null, // whether to reserve space even if axis isn't shown
                    tickLength: null, // size in pixels of ticks, or "full" for whole line
                    alignTicksWithAxis: null, // axis number or null for no sync

                    // mode specific options
                    tickDecimals: null, // no. of decimals, null means auto
                    tickSize: null, // number or [number, "unit"]
                    minTickSize: null, // number or [number, "unit"]
                    monthNames: null, // list of names of months
                    timeformat: null, // format string to use
                    twelveHourClock: false // 12 or 24 time in time mode
                },
                yaxis: {
                    autoscaleMargin: 0.02,
                    position: "left" // or "right"
                },
                xaxes: [],
                yaxes: [],
                series: {
                    points: {
                        show: false,
                        radius: 3,
                        lineWidth: 2, // in pixels
                        fill: true,
                        fillColor: "#ffffff",
                        symbol: "circle" // or callback
                    },
                    lines: {
                        // we don't put in show: false so we can see
                        // whether lines were actively disabled 
                        lineWidth: 2, // in pixels
                        fill: false,
                        fillColor: null,
                        steps: false
                    },
                    bars: {
                        show: false,
                        lineWidth: 2, // in pixels
                        barWidth: 1, // in units of the x axis
                        fill: true,
                        fillColor: null,
                        align: "left", // or "center" 
                        horizontal: false
                    },
                    shadowSize: 3
                },
                grid: {
                    show: true,
                    aboveData: false,
                    color: "#545454", // primary color used for outline and labels
                    backgroundColor: null, // null for transparent, else color
                    borderColor: null, // set if different from the grid color
                    tickColor: null, // color for the ticks, e.g. "rgba(0,0,0,0.15)"
                    labelMargin: 5, // in pixels
                    axisMargin: 8, // in pixels
                    borderWidth: 2, // in pixels
                    minBorderMargin: null, // in pixels, null means taken from points radius
                    markings: null, // array of ranges or fn: axes -> array of ranges
                    markingsColor: "#f4f4f4",
                    markingsLineWidth: 2,
                    // interactive stuff
                    clickable: false,
                    hoverable: false,
                    autoHighlight: true, // highlight in case mouse is near
                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item
                },
                interaction: {
                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow
                },
                hooks: {}
            },
            canvas = null,      // the canvas for the plot itself
            overlay = null,     // canvas for interactive stuff on top of plot
            eventHolder = null, // jQuery object that events should be bound to
            ctx = null, octx = null,
            xaxes = [], yaxes = [],
            plotOffset = { left: 0, right: 0, top: 0, bottom: 0},
            canvasWidth = 0, canvasHeight = 0,
            plotWidth = 0, plotHeight = 0,
            hooks = {
                processOptions: [],
                processRawData: [],
                processDatapoints: [],
                drawSeries: [],
                draw: [],
                bindEvents: [],
                drawOverlay: [],
                shutdown: []
            },
            plot = this;

        // public functions
        plot.setData = setData;
        plot.setupGrid = setupGrid;
        plot.draw = draw;
        plot.getPlaceholder = function() { return placeholder; };
        plot.getCanvas = function() { return canvas; };
        plot.getPlotOffset = function() { return plotOffset; };
        plot.width = function () { return plotWidth; };
        plot.height = function () { return plotHeight; };
        plot.offset = function () {
            var o = eventHolder.offset();
            o.left += plotOffset.left;
            o.top += plotOffset.top;
            return o;
        };
        plot.getData = function () { return series; };
        plot.getAxes = function () {
            var res = {}, i;
            $.each(xaxes.concat(yaxes), function (_, axis) {
                if (axis)
                    res[axis.direction + (axis.n != 1 ? axis.n : "") + "axis"] = axis;
            });
            return res;
        };
        plot.getXAxes = function () { return xaxes; };
        plot.getYAxes = function () { return yaxes; };
        plot.c2p = canvasToAxisCoords;
        plot.p2c = axisToCanvasCoords;
        plot.getOptions = function () { return options; };
        plot.highlight = highlight;
        plot.unhighlight = unhighlight;
        plot.triggerRedrawOverlay = triggerRedrawOverlay;
        plot.pointOffset = function(point) {
            return {
                left: parseInt(xaxes[axisNumber(point, "x") - 1].p2c(+point.x) + plotOffset.left),
                top: parseInt(yaxes[axisNumber(point, "y") - 1].p2c(+point.y) + plotOffset.top)
            };
        };
        plot.shutdown = shutdown;
        plot.resize = function () {
            getCanvasDimensions();
            resizeCanvas(canvas);
            resizeCanvas(overlay);
        };

        // public attributes
        plot.hooks = hooks;

        // initialize
        initPlugins(plot);
        parseOptions(options_);
        setupCanvases();
        setData(data_);
        setupGrid();
        draw();
        bindEvents();


        function executeHooks(hook, args) {
            args = [plot].concat(args);
            for (var i = 0; i < hook.length; ++i)
                hook[i].apply(this, args);
        }

        function initPlugins() {
            for (var i = 0; i < plugins.length; ++i) {
                var p = plugins[i];
                p.init(plot);
                if (p.options)
                    $.extend(true, options, p.options);
            }
        }

        function parseOptions(opts) {
            var i;

            $.extend(true, options, opts);

            if (options.xaxis.color == null)
                options.xaxis.color = options.grid.color;
            if (options.yaxis.color == null)
                options.yaxis.color = options.grid.color;

            if (options.xaxis.tickColor == null) // backwards-compatibility
                options.xaxis.tickColor = options.grid.tickColor;
            if (options.yaxis.tickColor == null) // backwards-compatibility
                options.yaxis.tickColor = options.grid.tickColor;

            if (options.grid.borderColor == null)
                options.grid.borderColor = options.grid.color;
            if (options.grid.tickColor == null)
                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();

            // fill in defaults in axes, copy at least always the
            // first as the rest of the code assumes it'll be there
            for (i = 0; i < Math.max(1, options.xaxes.length); ++i)
                options.xaxes[i] = $.extend(true, {}, options.xaxis, options.xaxes[i]);
            for (i = 0; i < Math.max(1, options.yaxes.length); ++i)
                options.yaxes[i] = $.extend(true, {}, options.yaxis, options.yaxes[i]);

            // backwards compatibility, to be removed in future
            if (options.xaxis.noTicks && options.xaxis.ticks == null)
                options.xaxis.ticks = options.xaxis.noTicks;
            if (options.yaxis.noTicks && options.yaxis.ticks == null)
                options.yaxis.ticks = options.yaxis.noTicks;
            if (options.x2axis) {
                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);
                options.xaxes[1].position = "top";
            }
            if (options.y2axis) {
                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);
                options.yaxes[1].position = "right";
            }
            if (options.grid.coloredAreas)
                options.grid.markings = options.grid.coloredAreas;
            if (options.grid.coloredAreasColor)
                options.grid.markingsColor = options.grid.coloredAreasColor;
            if (options.lines)
                $.extend(true, options.series.lines, options.lines);
            if (options.points)
                $.extend(true, options.series.points, options.points);
            if (options.bars)
                $.extend(true, options.series.bars, options.bars);
            if (options.shadowSize != null)
                options.series.shadowSize = options.shadowSize;

            // save options on axes for future reference
            for (i = 0; i < options.xaxes.length; ++i)
                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];
            for (i = 0; i < options.yaxes.length; ++i)
                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];

            // add hooks from options
            for (var n in hooks)
                if (options.hooks[n] && options.hooks[n].length)
                    hooks[n] = hooks[n].concat(options.hooks[n]);

            executeHooks(hooks.processOptions, [options]);
        }

        function setData(d) {
            series = parseData(d);
            fillInSeriesOptions();
            processData();
        }

        function parseData(d) {
            var res = [];
            for (var i = 0; i < d.length; ++i) {
                var s = $.extend(true, {}, options.series);

                if (d[i].data != null) {
                    s.data = d[i].data; // move the data instead of deep-copy
                    delete d[i].data;

                    $.extend(true, s, d[i]);

                    d[i].data = s.data;
                }
                else
                    s.data = d[i];
                res.push(s);
            }

            return res;
        }

        function axisNumber(obj, coord) {
            var a = obj[coord + "axis"];
            if (typeof a == "object") // if we got a real axis, extract number
                a = a.n;
            if (typeof a != "number")
                a = 1; // default to first axis
            return a;
        }

        function allAxes() {
            // return flat array without annoying null entries
            return $.grep(xaxes.concat(yaxes), function (a) { return a; });
        }

        function canvasToAxisCoords(pos) {
            // return an object with x/y corresponding to all used axes 
            var res = {}, i, axis;
            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used)
                    res["x" + axis.n] = axis.c2p(pos.left);
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used)
                    res["y" + axis.n] = axis.c2p(pos.top);
            }

            if (res.x1 !== undefined)
                res.x = res.x1;
            if (res.y1 !== undefined)
                res.y = res.y1;

            return res;
        }

        function axisToCanvasCoords(pos) {
            // get canvas coords from the first pair of x/y found in pos
            var res = {}, i, axis, key;

            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used) {
                    key = "x" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "x";

                    if (pos[key] != null) {
                        res.left = axis.p2c(pos[key]);
                        break;
                    }
                }
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used) {
                    key = "y" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "y";

                    if (pos[key] != null) {
                        res.top = axis.p2c(pos[key]);
                        break;
                    }
                }
            }

            return res;
        }

        function getOrCreateAxis(axes, number) {
            if (!axes[number - 1])
                axes[number - 1] = {
                    n: number, // save the number for future reference
                    direction: axes == xaxes ? "x" : "y",
                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)
                };

            return axes[number - 1];
        }

        function fillInSeriesOptions() {
            var i;

            // collect what we already got of colors
            var neededColors = series.length,
                usedColors = [],
                assignedColors = [];
            for (i = 0; i < series.length; ++i) {
                var sc = series[i].color;
                if (sc != null) {
                    --neededColors;
                    if (typeof sc == "number")
                        assignedColors.push(sc);
                    else
                        usedColors.push($.color.parse(series[i].color));
                }
            }

            // we might need to generate more colors if higher indices
            // are assigned
            for (i = 0; i < assignedColors.length; ++i) {
                neededColors = Math.max(neededColors, assignedColors[i] + 1);
            }

            // produce colors as needed
            var colors = [], variation = 0;
            i = 0;
            while (colors.length < neededColors) {
                var c;
                if (options.colors.length == i) // check degenerate case
                    c = $.color.make(100, 100, 100);
                else
                    c = $.color.parse(options.colors[i]);

                // vary color if needed
                var sign = variation % 2 == 1 ? -1 : 1;
                c.scale('rgb', 1 + sign * Math.ceil(variation / 2) * 0.2);

                // FIXME: if we're getting to close to something else,
                // we should probably skip this one
                colors.push(c);

                ++i;
                if (i >= options.colors.length) {
                    i = 0;
                    ++variation;
                }
            }

            // fill in the options
            var colori = 0, s;
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                // assign colors
                if (s.color == null) {
                    s.color = colors[colori].toString();
                    ++colori;
                }
                else if (typeof s.color == "number")
                    s.color = colors[s.color].toString();

                // turn on lines automatically in case nothing is set
                if (s.lines.show == null) {
                    var v, show = true;
                    for (v in s)
                        if (s[v] && s[v].show) {
                            show = false;
                            break;
                        }
                    if (show)
                        s.lines.show = true;
                }

                // setup axes
                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, "x"));
                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, "y"));
            }
        }

        function processData() {
            var topSentry = Number.POSITIVE_INFINITY,
                bottomSentry = Number.NEGATIVE_INFINITY,
                fakeInfinity = Number.MAX_VALUE,
                i, j, k, m, length,
                s, points, ps, x, y, axis, val, f, p;

            function updateAxis(axis, min, max) {
                if (min < axis.datamin && min != -fakeInfinity)
                    axis.datamin = min;
                if (max > axis.datamax && max != fakeInfinity)
                    axis.datamax = max;
            }

            $.each(allAxes(), function (_, axis) {
                // init axis
                axis.datamin = topSentry;
                axis.datamax = bottomSentry;
                axis.used = false;
            });

            for (i = 0; i < series.length; ++i) {
                s = series[i];
                s.datapoints = { points: [] };

                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);
            }

            // first pass: clean and copy data
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                var data = s.data, format = s.datapoints.format;

                if (!format) {
                    format = [];
                    // find out how to copy
                    format.push({ x: true, number: true, required: true });
                    format.push({ y: true, number: true, required: true });

                    if (s.bars.show || (s.lines.show && s.lines.fill)) {
                        format.push({ y: true, number: true, required: false, defaultValue: 0 });
                        if (s.bars.horizontal) {
                            delete format[format.length - 1].y;
                            format[format.length - 1].x = true;
                        }
                    }

                    s.datapoints.format = format;
                }

                if (s.datapoints.pointsize != null)
                    continue; // already filled in

                s.datapoints.pointsize = format.length;

                ps = s.datapoints.pointsize;
                points = s.datapoints.points;

                insertSteps = s.lines.show && s.lines.steps;
                s.xaxis.used = s.yaxis.used = true;

                for (j = k = 0; j < data.length; ++j, k += ps) {
                    p = data[j];

                    var nullify = p == null;
                    if (!nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = p[m];
                            f = format[m];

                            if (f) {
                                if (f.number && val != null) {
                                    val = +val; // convert to number
                                    if (isNaN(val))
                                        val = null;
                                    else if (val == Infinity)
                                        val = fakeInfinity;
                                    else if (val == -Infinity)
                                        val = -fakeInfinity;
                                }

                                if (val == null) {
                                    if (f.required)
                                        nullify = true;

                                    if (f.defaultValue != null)
                                        val = f.defaultValue;
                                }
                            }

                            points[k + m] = val;
                        }
                    }

                    if (nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = points[k + m];
                            if (val != null) {
                                f = format[m];
                                // extract min/max info
                                if (f.x)
                                    updateAxis(s.xaxis, val, val);
                                if (f.y)
                                    updateAxis(s.yaxis, val, val);
                            }
                            points[k + m] = null;
                        }
                    }
                    else {
                        // a little bit of line specific stuff that
                        // perhaps shouldn't be here, but lacking
                        // better means...
                        if (insertSteps && k > 0
                            && points[k - ps] != null
                            && points[k - ps] != points[k]
                            && points[k - ps + 1] != points[k + 1]) {
                            // copy the point to make room for a middle point
                            for (m = 0; m < ps; ++m)
                                points[k + ps + m] = points[k + m];

                            // middle point has same y
                            points[k + 1] = points[k - ps + 1];

                            // we've added a point, better reflect that
                            k += ps;
                        }
                    }
                }
            }

            // give the hooks a chance to run
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);
            }

            // second pass: find datamax/datamin for auto-scaling
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                points = s.datapoints.points,
                    ps = s.datapoints.pointsize;
                format = s.datapoints.format;

                var xmin = topSentry, ymin = topSentry,
                    xmax = bottomSentry, ymax = bottomSentry;

                for (j = 0; j < points.length; j += ps) {
                    if (points[j] == null)
                        continue;

                    for (m = 0; m < ps; ++m) {
                        val = points[j + m];
                        f = format[m];
                        if (!f || val == fakeInfinity || val == -fakeInfinity)
                            continue;

                        if (f.x) {
                            if (val < xmin)
                                xmin = val;
                            if (val > xmax)
                                xmax = val;
                        }
                        if (f.y) {
                            if (val < ymin)
                                ymin = val;
                            if (val > ymax)
                                ymax = val;
                        }
                    }
                }

                if (s.bars.show) {
                    // make sure we got room for the bar on the dancing floor
                    var delta = s.bars.align == "left" ? 0 : -s.bars.barWidth/2;
                    if (s.bars.horizontal) {
                        ymin += delta;
                        ymax += delta + s.bars.barWidth;
                    }
                    else {
                        xmin += delta;
                        xmax += delta + s.bars.barWidth;
                    }
                }

                updateAxis(s.xaxis, xmin, xmax);
                updateAxis(s.yaxis, ymin, ymax);
            }

            $.each(allAxes(), function (_, axis) {
                if (axis.datamin == topSentry)
                    axis.datamin = null;
                if (axis.datamax == bottomSentry)
                    axis.datamax = null;
            });
        }

        function makeCanvas(skipPositioning, cls) {
            var c = document.createElement('canvas');
            c.className = cls;
            c.width = canvasWidth;
            c.height = canvasHeight;

            if (!skipPositioning)
                $(c).css({ position: 'absolute', left: 0, top: 0 });

            $(c).appendTo(placeholder);

            if (!c.getContext) // excanvas hack
                c = window.G_vmlCanvasManager.initElement(c);

            // used for resetting in case we get replotted
            c.getContext("2d").save();

            return c;
        }

        function getCanvasDimensions() {
            canvasWidth = placeholder.width();
            canvasHeight = placeholder.height();

            if (canvasWidth <= 0 || canvasHeight <= 0)
                throw "Invalid dimensions for plot, width = " + canvasWidth + ", height = " + canvasHeight;
        }

        function resizeCanvas(c) {
            // resizing should reset the state (excanvas seems to be
            // buggy though)
            if (c.width != canvasWidth)
                c.width = canvasWidth;

            if (c.height != canvasHeight)
                c.height = canvasHeight;

            // so try to get back to the initial state (even if it's
            // gone now, this should be safe according to the spec)
            var cctx = c.getContext("2d");
            cctx.restore();

            // and save again
            cctx.save();
        }

        function setupCanvases() {
            var reused,
                existingCanvas = placeholder.children("canvas.flot-base"),
                existingOverlay = placeholder.children("canvas.flot-overlay");

            if (existingCanvas.length == 0 || existingOverlay == 0) {
                // init everything

                placeholder.html(""); // make sure placeholder is clear

                placeholder.css({ padding: 0 }); // padding messes up the positioning

                if (placeholder.css("position") == 'static')
                    placeholder.css("position", "relative"); // for positioning labels and overlay

                getCanvasDimensions();

                canvas = makeCanvas(true, "flot-base");
                overlay = makeCanvas(false, "flot-overlay"); // overlay canvas for interactive features

                reused = false;
            }
            else {
                // reuse existing elements

                canvas = existingCanvas.get(0);
                overlay = existingOverlay.get(0);

                reused = true;
            }

            ctx = canvas.getContext("2d");
            octx = overlay.getContext("2d");

            // define which element we're listening for events on
            eventHolder = $(overlay);

            if (reused) {
                // run shutdown in the old plot object
                placeholder.data("plot").shutdown();

                // reset reused canvases
                plot.resize();

                // make sure overlay pixels are cleared (canvas is cleared when we redraw)
                octx.clearRect(0, 0, canvasWidth, canvasHeight);

                // then whack any remaining obvious garbage left
                eventHolder.unbind();
                placeholder.children().not([canvas, overlay]).remove();
            }

            // save in case we get replotted
            placeholder.data("plot", plot);
        }

        function bindEvents() {
            // bind events
            if (options.grid.hoverable) {
                eventHolder.mousemove(onMouseMove);
                eventHolder.mouseleave(onMouseLeave);
            }

            if (options.grid.clickable)
                eventHolder.click(onClick);

            executeHooks(hooks.bindEvents, [eventHolder]);
        }

        function shutdown() {
            if (redrawTimeout)
                clearTimeout(redrawTimeout);

            eventHolder.unbind("mousemove", onMouseMove);
            eventHolder.unbind("mouseleave", onMouseLeave);
            eventHolder.unbind("click", onClick);

            executeHooks(hooks.shutdown, [eventHolder]);
        }

        function setTransformationHelpers(axis) {
            // set helper functions on the axis, assumes plot area
            // has been computed already

            function identity(x) { return x; }

            var s, m, t = axis.options.transform || identity,
                it = axis.options.inverseTransform;

            // precompute how much the axis is scaling a point
            // in canvas space
            if (axis.direction == "x") {
                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));
                m = Math.min(t(axis.max), t(axis.min));
            }
            else {
                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));
                s = -s;
                m = Math.max(t(axis.max), t(axis.min));
            }

            // data point to canvas coordinate
            if (t == identity) // slight optimization
                axis.p2c = function (p) { return (p - m) * s; };
            else
                axis.p2c = function (p) { return (t(p) - m) * s; };
            // canvas coordinate to data point
            if (!it)
                axis.c2p = function (c) { return m + c / s; };
            else
                axis.c2p = function (c) { return it(m + c / s); };
        }

        function measureTickLabels(axis) {
            var opts = axis.options, ticks = axis.ticks || [],
                axisw = opts.labelWidth || 0, axish = opts.labelHeight || 0,
                f = axis.font;

            ctx.save();
            ctx.font = f.style + " " + f.variant + " " + f.weight + " " + f.size + "px '" + f.family + "'";

            for (var i = 0; i < ticks.length; ++i) {
                var t = ticks[i];

                t.lines = [];
                t.width = t.height = 0;

                if (!t.label)
                    continue;

                // accept various kinds of newlines, including HTML ones
                // (you can actually split directly on regexps in Javascript,
                // but IE is unfortunately broken)
                var lines = t.label.replace(/<br ?\/?>|\r\n|\r/g, "\n").split("\n");
                for (var j = 0; j < lines.length; ++j) {
                    var line = { text: lines[j] },
                        m = ctx.measureText(line.text);

                    line.width = m.width;
                    // m.height might not be defined, not in the
                    // standard yet
                    line.height = m.height != null ? m.height : f.size;

                    // add a bit of margin since font rendering is
                    // not pixel perfect and cut off letters look
                    // bad, this also doubles as spacing between
                    // lines
                    line.height += Math.round(f.size * 0.15);

                    t.width = Math.max(line.width, t.width);
                    t.height += line.height;

                    t.lines.push(line);
                }

                if (opts.labelWidth == null)
                    axisw = Math.max(axisw, t.width);
                if (opts.labelHeight == null)
                    axish = Math.max(axish, t.height);
            }
            ctx.restore();

            axis.labelWidth = Math.ceil(axisw);
            axis.labelHeight = Math.ceil(axish);
        }

        function allocateAxisBoxFirstPhase(axis) {
            // find the bounding box of the axis by looking at label
            // widths/heights and ticks, make room by diminishing the
            // plotOffset; this first phase only looks at one
            // dimension per axis, the other dimension depends on the
            // other axes so will have to wait

            var lw = axis.labelWidth,
                lh = axis.labelHeight,
                pos = axis.options.position,
                tickLength = axis.options.tickLength,
                axisMargin = options.grid.axisMargin,
                padding = options.grid.labelMargin,
                all = axis.direction == "x" ? xaxes : yaxes,
                index;

            // determine axis margin
            var samePosition = $.grep(all, function (a) {
                return a && a.options.position == pos && a.reserveSpace;
            });
            if ($.inArray(axis, samePosition) == samePosition.length - 1)
                axisMargin = 0; // outermost

            // determine tick length - if we're innermost, we can use "full"
            if (tickLength == null) {
                var sameDirection = $.grep(all, function (a) {
                    return a && a.reserveSpace;
                });

                var innermost = $.inArray(axis, sameDirection) == 0;
                if (innermost)
                    tickLength = "full";
                else
                    tickLength = 5;
            }

            if (!isNaN(+tickLength))
                padding += +tickLength;

            // compute box
            if (axis.direction == "x") {
                lh += padding;

                if (pos == "bottom") {
                    plotOffset.bottom += lh + axisMargin;
                    axis.box = { top: canvasHeight - plotOffset.bottom, height: lh };
                }
                else {
                    axis.box = { top: plotOffset.top + axisMargin, height: lh };
                    plotOffset.top += lh + axisMargin;
                }
            }
            else {
                lw += padding;

                if (pos == "left") {
                    axis.box = { left: plotOffset.left + axisMargin, width: lw };
                    plotOffset.left += lw + axisMargin;
                }
                else {
                    plotOffset.right += lw + axisMargin;
                    axis.box = { left: canvasWidth - plotOffset.right, width: lw };
                }
            }

            // save for future reference
            axis.position = pos;
            axis.tickLength = tickLength;
            axis.box.padding = padding;
            axis.innermost = innermost;
        }

        function allocateAxisBoxSecondPhase(axis) {
            // now that all axis boxes have been placed in one
            // dimension, we can set the remaining dimension coordinates
            if (axis.direction == "x") {
                axis.box.left = plotOffset.left - axis.labelWidth / 2;
                axis.box.width = canvasWidth - plotOffset.left - plotOffset.right + axis.labelWidth;
            }
            else {
                axis.box.top = plotOffset.top - axis.labelHeight / 2;
                axis.box.height = canvasHeight - plotOffset.bottom - plotOffset.top + axis.labelHeight;
            }
        }

        function adjustLayoutForThingsStickingOut() {
            // possibly adjust plot offset to ensure everything stays
            // inside the canvas and isn't clipped off

            var minMargin = options.grid.minBorderMargin,
                margins = { x: 0, y: 0 }, i, axis;

            // check stuff from the plot (FIXME: this should just read
            // a value from the series, otherwise it's impossible to
            // customize)
            if (minMargin == null) {
                minMargin = 0;
                for (i = 0; i < series.length; ++i)
                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));
            }

            margins.x = margins.y = Math.ceil(minMargin);

            // check axis labels, note we don't check the actual
            // labels but instead use the overall width/height to not
            // jump as much around with replots
            $.each(allAxes(), function (_, axis) {
                var dir = axis.direction;
                if (axis.reserveSpace)
                    margins[dir] = Math.ceil(Math.max(margins[dir], (dir == "x" ? axis.labelWidth : axis.labelHeight) / 2));
            });

            plotOffset.left = Math.max(margins.x, plotOffset.left);
            plotOffset.right = Math.max(margins.x, plotOffset.right);
            plotOffset.top = Math.max(margins.y, plotOffset.top);
            plotOffset.bottom = Math.max(margins.y, plotOffset.bottom);
        }

        function setupGrid() {
            var i, axes = allAxes(), showGrid = options.grid.show;

            // init plot offset
            for (var a in plotOffset)
                plotOffset[a] = showGrid ? options.grid.borderWidth : 0;

            // init axes
            $.each(axes, function (_, axis) {
                axis.show = axis.options.show;
                if (axis.show == null)
                    axis.show = axis.used; // by default an axis is visible if it's got data

                axis.reserveSpace = axis.show || axis.options.reserveSpace;

                setRange(axis);
            });

            if (showGrid) {
                // determine from the placeholder the font size ~ height of font ~ 1 em
                var fontDefaults = {
                    style: placeholder.css("font-style"),
                    size: Math.round(0.8 * (+placeholder.css("font-size").replace("px", "") || 13)),
                    variant: placeholder.css("font-variant"),
                    weight: placeholder.css("font-weight"),
                    family: placeholder.css("font-family")
                };

                var allocatedAxes = $.grep(axes, function (axis) { return axis.reserveSpace; });

                $.each(allocatedAxes, function (_, axis) {
                    // make the ticks
                    setupTickGeneration(axis);
                    setTicks(axis);
                    snapRangeToTicks(axis, axis.ticks);

                    // find labelWidth/Height for axis
                    axis.font = $.extend({}, fontDefaults, axis.options.font);
                    measureTickLabels(axis);
                });

                // with all dimensions calculated, we can compute the
                // axis bounding boxes, start from the outside
                // (reverse order)
                for (i = allocatedAxes.length - 1; i >= 0; --i)
                    allocateAxisBoxFirstPhase(allocatedAxes[i]);

                // make sure we've got enough space for things that
                // might stick out
                adjustLayoutForThingsStickingOut();

                $.each(allocatedAxes, function (_, axis) {
                    allocateAxisBoxSecondPhase(axis);
                });
            }

            plotWidth = canvasWidth - plotOffset.left - plotOffset.right;
            plotHeight = canvasHeight - plotOffset.bottom - plotOffset.top;

            // now we got the proper plot dimensions, we can compute the scaling
            $.each(axes, function (_, axis) {
                setTransformationHelpers(axis);
            });

            insertLegend();
        }

        function setRange(axis) {
            var opts = axis.options,
                min = +(opts.min != null ? opts.min : axis.datamin),
                max = +(opts.max != null ? opts.max : axis.datamax),
                delta = max - min;

            if (delta == 0.0) {
                // degenerate case
                var widen = max == 0 ? 1 : 0.01;

                if (opts.min == null)
                    min -= widen;
                // always widen max if we couldn't widen min to ensure we
                // don't fall into min == max which doesn't work
                if (opts.max == null || opts.min != null)
                    max += widen;
            }
            else {
                // consider autoscaling
                var margin = opts.autoscaleMargin;
                if (margin != null) {
                    if (opts.min == null) {
                        min -= delta * margin;
                        // make sure we don't go below zero if all values
                        // are positive
                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)
                            min = 0;
                    }
                    if (opts.max == null) {
                        max += delta * margin;
                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)
                            max = 0;
                    }
                }
            }
            axis.min = min;
            axis.max = max;
        }

        function setupTickGeneration(axis) {
            var opts = axis.options;

            // estimate number of ticks
            var noTicks;
            if (typeof opts.ticks == "number" && opts.ticks > 0)
                noTicks = opts.ticks;
            else
            // heuristic based on the model a*sqrt(x) fitted to
            // some data points that seemed reasonable
                noTicks = 0.3 * Math.sqrt(axis.direction == "x" ? canvasWidth : canvasHeight);

            var delta = (axis.max - axis.min) / noTicks,
                size, generator, unit, formatter, i, magn, norm;

            if (opts.mode == "time") {
                // pretty handling of time

                // map of app. size of time units in milliseconds
                var timeUnitSize = {
                    "second": 1000,
                    "minute": 60 * 1000,
                    "hour": 60 * 60 * 1000,
                    "day": 24 * 60 * 60 * 1000,
                    "month": 30 * 24 * 60 * 60 * 1000,
                    "year": 365.2425 * 24 * 60 * 60 * 1000
                };


                // the allowed tick sizes, after 1 year we use
                // an integer algorithm
                var spec = [
                    [1, "second"], [2, "second"], [5, "second"], [10, "second"],
                    [30, "second"],
                    [1, "minute"], [2, "minute"], [5, "minute"], [10, "minute"],
                    [30, "minute"],
                    [1, "hour"], [2, "hour"], [4, "hour"],
                    [8, "hour"], [12, "hour"],
                    [1, "day"], [2, "day"], [3, "day"],
                    [0.25, "month"], [0.5, "month"], [1, "month"],
                    [2, "month"], [3, "month"], [6, "month"],
                    [1, "year"]
                ];

                var minSize = 0;
                if (opts.minTickSize != null) {
                    if (typeof opts.tickSize == "number")
                        minSize = opts.tickSize;
                    else
                        minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];
                }

                for (var i = 0; i < spec.length - 1; ++i)
                    if (delta < (spec[i][0] * timeUnitSize[spec[i][1]]
                        + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2
                        && spec[i][0] * timeUnitSize[spec[i][1]] >= minSize)
                        break;
                size = spec[i][0];
                unit = spec[i][1];

                // special-case the possibility of several years
                if (unit == "year") {
                    magn = Math.pow(10, Math.floor(Math.log(delta / timeUnitSize.year) / Math.LN10));
                    norm = (delta / timeUnitSize.year) / magn;
                    if (norm < 1.5)
                        size = 1;
                    else if (norm < 3)
                        size = 2;
                    else if (norm < 7.5)
                        size = 5;
                    else
                        size = 10;

                    size *= magn;
                }

                axis.tickSize = opts.tickSize || [size, unit];

                generator = function(axis) {
                    var ticks = [],
                        tickSize = axis.tickSize[0], unit = axis.tickSize[1],
                        d = new Date(axis.min);

                    var step = tickSize * timeUnitSize[unit];

                    if (unit == "second")
                        d.setUTCSeconds(floorInBase(d.getUTCSeconds(), tickSize));
                    if (unit == "minute")
                        d.setUTCMinutes(floorInBase(d.getUTCMinutes(), tickSize));
                    if (unit == "hour")
                        d.setUTCHours(floorInBase(d.getUTCHours(), tickSize));
                    if (unit == "month")
                        d.setUTCMonth(floorInBase(d.getUTCMonth(), tickSize));
                    if (unit == "year")
                        d.setUTCFullYear(floorInBase(d.getUTCFullYear(), tickSize));

                    // reset smaller components
                    d.setUTCMilliseconds(0);
                    if (step >= timeUnitSize.minute)
                        d.setUTCSeconds(0);
                    if (step >= timeUnitSize.hour)
                        d.setUTCMinutes(0);
                    if (step >= timeUnitSize.day)
                        d.setUTCHours(0);
                    if (step >= timeUnitSize.day * 4)
                        d.setUTCDate(1);
                    if (step >= timeUnitSize.year)
                        d.setUTCMonth(0);


                    var carry = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = d.getTime();
                        ticks.push(v);
                        if (unit == "month") {
                            if (tickSize < 1) {
                                // a bit complicated - we'll divide the month
                                // up but we need to take care of fractions
                                // so we don't end up in the middle of a day
                                d.setUTCDate(1);
                                var start = d.getTime();
                                d.setUTCMonth(d.getUTCMonth() + 1);
                                var end = d.getTime();
                                d.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);
                                carry = d.getUTCHours();
                                d.setUTCHours(0);
                            }
                            else
                                d.setUTCMonth(d.getUTCMonth() + tickSize);
                        }
                        else if (unit == "year") {
                            d.setUTCFullYear(d.getUTCFullYear() + tickSize);
                        }
                        else
                            d.setTime(v + step);
                    } while (v < axis.max && v != prev);

                    return ticks;
                };

                formatter = function (v, axis) {
                    var d = new Date(v);

                    // first check global format
                    if (opts.timeformat != null)
                        return $.plot.formatDate(d, opts.timeformat, opts.monthNames);

                    var t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];
                    var span = axis.max - axis.min;
                    var suffix = (opts.twelveHourClock) ? " %p" : "";

                    if (t < timeUnitSize.minute)
                        fmt = "%h:%M:%S" + suffix;
                    else if (t < timeUnitSize.day) {
                        if (span < 2 * timeUnitSize.day)
                            fmt = "%h:%M" + suffix;
                        else
                            fmt = "%b %d %h:%M" + suffix;
                    }
                    else if (t < timeUnitSize.month)
                        fmt = "%b %d";
                    else if (t < timeUnitSize.year) {
                        if (span < timeUnitSize.year)
                            fmt = "%b";
                        else
                            fmt = "%b %y";
                    }
                    else
                        fmt = "%y";

                    return $.plot.formatDate(d, fmt, opts.monthNames);
                };
            }
            else {
                // pretty rounding of base-10 numbers
                var maxDec = opts.tickDecimals;
                var dec = -Math.floor(Math.log(delta) / Math.LN10);
                if (maxDec != null && dec > maxDec)
                    dec = maxDec;

                magn = Math.pow(10, -dec);
                norm = delta / magn; // norm is between 1.0 and 10.0

                if (norm < 1.5)
                    size = 1;
                else if (norm < 3) {
                    size = 2;
                    // special case for 2.5, requires an extra decimal
                    if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {
                        size = 2.5;
                        ++dec;
                    }
                }
                else if (norm < 7.5)
                    size = 5;
                else
                    size = 10;

                size *= magn;

                if (opts.minTickSize != null && size < opts.minTickSize)
                    size = opts.minTickSize;

                axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);
                axis.tickSize = opts.tickSize || size;

                generator = function (axis) {
                    var ticks = [];

                    // spew out all possible ticks
                    var start = floorInBase(axis.min, axis.tickSize),
                        i = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = start + i * axis.tickSize;
                        ticks.push(v);
                        ++i;
                    } while (v < axis.max && v != prev);
                    return ticks;
                };

                formatter = function (v, axis) {
                    return v.toFixed(axis.tickDecimals);
                };
            }

            if (opts.alignTicksWithAxis != null) {
                var otherAxis = (axis.direction == "x" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];
                if (otherAxis && otherAxis.used && otherAxis != axis) {
                    // consider snapping min/max to outermost nice ticks
                    var niceTicks = generator(axis);
                    if (niceTicks.length > 0) {
                        if (opts.min == null)
                            axis.min = Math.min(axis.min, niceTicks[0]);
                        if (opts.max == null && niceTicks.length > 1)
                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);
                    }

                    generator = function (axis) {
                        // copy ticks, scaled to this axis
                        var ticks = [], v, i;
                        for (i = 0; i < otherAxis.ticks.length; ++i) {
                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);
                            v = axis.min + v * (axis.max - axis.min);
                            ticks.push(v);
                        }
                        return ticks;
                    };

                    // we might need an extra decimal since forced
                    // ticks don't necessarily fit naturally
                    if (!axis.mode && opts.tickDecimals == null) {
                        var extraDec = Math.max(0, -Math.floor(Math.log(delta) / Math.LN10) + 1),
                            ts = generator(axis);

                        // only proceed if the tick interval rounded
                        // with an extra decimal doesn't give us a
                        // zero at end
                        if (!(ts.length > 1 && /\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))
                            axis.tickDecimals = extraDec;
                    }
                }
            }

            axis.tickGenerator = generator;
            if ($.isFunction(opts.tickFormatter))
                axis.tickFormatter = function (v, axis) { return "" + opts.tickFormatter(v, axis); };
            else
                axis.tickFormatter = formatter;
        }

        function setTicks(axis) {
            var oticks = axis.options.ticks, ticks = [];
            if (oticks == null || (typeof oticks == "number" && oticks > 0))
                ticks = axis.tickGenerator(axis);
            else if (oticks) {
                if ($.isFunction(oticks))
                // generate the ticks
                    ticks = oticks(axis);
                else
                    ticks = oticks;
            }

            // clean up/labelify the supplied ticks, copy them over
            var i, v;
            axis.ticks = [];
            for (i = 0; i < ticks.length; ++i) {
                var label = null;
                var t = ticks[i];
                if (typeof t == "object") {
                    v = +t[0];
                    if (t.length > 1)
                        label = t[1];
                }
                else
                    v = +t;
                if (label == null)
                    label = axis.tickFormatter(v, axis);
                if (!isNaN(v))
                    axis.ticks.push({ v: v, label: label });
            }
        }

        function snapRangeToTicks(axis, ticks) {
            if (axis.options.autoscaleMargin && ticks.length > 0) {
                // snap to ticks
                if (axis.options.min == null)
                    axis.min = Math.min(axis.min, ticks[0].v);
                if (axis.options.max == null && ticks.length > 1)
                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            var grid = options.grid;

            // draw background, if any
            if (grid.show && grid.backgroundColor)
                drawBackground();

            if (grid.show && !grid.aboveData) {
                drawGrid();
                drawAxisLabels();
            }

            for (var i = 0; i < series.length; ++i) {
                executeHooks(hooks.drawSeries, [ctx, series[i]]);
                drawSeries(series[i]);
            }

            executeHooks(hooks.draw, [ctx]);

            if (grid.show && grid.aboveData) {
                drawGrid();
                drawAxisLabels();
            }
        }

        function extractRange(ranges, coord) {
            var axis, from, to, key, axes = allAxes();

            for (i = 0; i < axes.length; ++i) {
                axis = axes[i];
                if (axis.direction == coord) {
                    key = coord + axis.n + "axis";
                    if (!ranges[key] && axis.n == 1)
                        key = coord + "axis"; // support x1axis as xaxis
                    if (ranges[key]) {
                        from = ranges[key].from;
                        to = ranges[key].to;
                        break;
                    }
                }
            }

            // backwards-compat stuff - to be removed in future
            if (!ranges[key]) {
                axis = coord == "x" ? xaxes[0] : yaxes[0];
                from = ranges[coord + "1"];
                to = ranges[coord + "2"];
            }

            // auto-reverse as an added bonus
            if (from != null && to != null && from > to) {
                var tmp = from;
                from = to;
                to = tmp;
            }

            return { from: from, to: to, axis: axis };
        }

        function drawBackground() {
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, "rgba(255, 255, 255, 0)");
            ctx.fillRect(0, 0, plotWidth, plotHeight);
            ctx.restore();
        }

        function drawGrid() {
            var i;

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // draw markings
            var markings = options.grid.markings;
            if (markings) {
                if ($.isFunction(markings)) {
                    var axes = plot.getAxes();
                    // xmin etc. is backwards compatibility, to be
                    // removed in the future
                    axes.xmin = axes.xaxis.min;
                    axes.xmax = axes.xaxis.max;
                    axes.ymin = axes.yaxis.min;
                    axes.ymax = axes.yaxis.max;

                    markings = markings(axes);
                }

                for (i = 0; i < markings.length; ++i) {
                    var m = markings[i],
                        xrange = extractRange(m, "x"),
                        yrange = extractRange(m, "y");

                    // fill in missing
                    if (xrange.from == null)
                        xrange.from = xrange.axis.min;
                    if (xrange.to == null)
                        xrange.to = xrange.axis.max;
                    if (yrange.from == null)
                        yrange.from = yrange.axis.min;
                    if (yrange.to == null)
                        yrange.to = yrange.axis.max;

                    // clip
                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||
                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)
                        continue;

                    xrange.from = Math.max(xrange.from, xrange.axis.min);
                    xrange.to = Math.min(xrange.to, xrange.axis.max);
                    yrange.from = Math.max(yrange.from, yrange.axis.min);
                    yrange.to = Math.min(yrange.to, yrange.axis.max);

                    if (xrange.from == xrange.to && yrange.from == yrange.to)
                        continue;

                    // then draw
                    xrange.from = xrange.axis.p2c(xrange.from);
                    xrange.to = xrange.axis.p2c(xrange.to);
                    yrange.from = yrange.axis.p2c(yrange.from);
                    yrange.to = yrange.axis.p2c(yrange.to);

                    if (xrange.from == xrange.to || yrange.from == yrange.to) {
                        // draw line
                        ctx.beginPath();
                        ctx.strokeStyle = m.color || options.grid.markingsColor;
                        ctx.lineWidth = m.lineWidth || options.grid.markingsLineWidth;
                        ctx.moveTo(xrange.from, yrange.from);
                        ctx.lineTo(xrange.to, yrange.to);
                        ctx.stroke();
                    }
                    else {
                        // fill area
                        ctx.fillStyle = m.color || options.grid.markingsColor;
                        ctx.fillRect(xrange.from, yrange.to,
                            xrange.to - xrange.from,
                            yrange.from - yrange.to);
                    }
                }
            }

            // draw the ticks
            var axes = allAxes(), bw = options.grid.borderWidth;

            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box,
                    t = axis.tickLength, x, y, xoff, yoff;
                if (!axis.show || axis.ticks.length == 0)
                    continue;

                ctx.strokeStyle = axis.options.tickColor || $.color.parse(axis.options.color).scale('a', 0.22).toString();
                ctx.lineWidth = 1;

                // find the edges
                if (axis.direction == "x") {
                    x = 0;
                    if (t == "full")
                        y = (axis.position == "top" ? 0 : plotHeight);
                    else
                        y = box.top - plotOffset.top + (axis.position == "top" ? box.height : 0);
                }
                else {
                    y = 0;
                    if (t == "full")
                        x = (axis.position == "left" ? 0 : plotWidth);
                    else
                        x = box.left - plotOffset.left + (axis.position == "left" ? box.width : 0);
                }

                // draw tick bar
                if (!axis.innermost) {
                    ctx.beginPath();
                    xoff = yoff = 0;
                    if (axis.direction == "x")
                        xoff = plotWidth;
                    else
                        yoff = plotHeight;

                    if (ctx.lineWidth == 1) {
                        x = Math.floor(x) + 0.5;
                        y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                    ctx.stroke();
                }

                // draw ticks
                ctx.beginPath();
                for (i = 0; i < axis.ticks.length; ++i) {
                    var v = axis.ticks[i].v;

                    xoff = yoff = 0;

                    if (v < axis.min || v > axis.max
                        // skip those lying on the axes if we got a border
                        || (t == "full" && bw > 0
                        && (v == axis.min || v == axis.max)))
                        continue;

                    if (axis.direction == "x") {
                        x = axis.p2c(v);
                        yoff = t == "full" ? -plotHeight : t;

                        if (axis.position == "top")
                            yoff = -yoff;
                    }
                    else {
                        y = axis.p2c(v);
                        xoff = t == "full" ? -plotWidth : t;

                        if (axis.position == "left")
                            xoff = -xoff;
                    }

                    if (ctx.lineWidth == 1) {
                        if (axis.direction == "x")
                            x = Math.floor(x) + 0.5;
                        else
                            y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                }

                ctx.stroke();
            }


            // draw border
            if (bw) {
                ctx.lineWidth = bw;
                ctx.strokeStyle = options.grid.borderColor;
                ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);
            }

            ctx.restore();
        }

        function drawAxisLabels() {
            ctx.save();

            $.each(allAxes(), function (_, axis) {
                if (!axis.show || axis.ticks.length == 0)
                    return;

                var box = axis.box, f = axis.font;
                // placeholder.append('<div style="position:absolute;opacity:0.10;background-color:red;left:' + box.left + 'px;top:' + box.top + 'px;width:' + box.width +  'px;height:' + box.height + 'px"></div>') // debug

                ctx.fillStyle = axis.options.color;
                // Important: Don't use quotes around axis.font.family! Just around single 
                // font names like 'Times New Roman' that have a space or special character in it.
                ctx.font = f.style + " " + f.variant + " " + f.weight + " " + f.size + "px " + f.family;
                ctx.textAlign = "start";
                // middle align the labels - top would be more
                // natural, but browsers can differ a pixel or two in
                // where they consider the top to be, so instead we
                // middle align to minimize variation between browsers
                // and compensate when calculating the coordinates
                ctx.textBaseline = "middle";

                for (var i = 0; i < axis.ticks.length; ++i) {
                    var tick = axis.ticks[i];
                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)
                        continue;

                    var x, y, offset = 0, line;
                    for (var k = 0; k < tick.lines.length; ++k) {
                        line = tick.lines[k];

                        if (axis.direction == "x") {
                            x = plotOffset.left + axis.p2c(tick.v) - line.width/2;
                            if (axis.position == "bottom")
                                y = box.top + box.padding;
                            else
                                y = box.top + box.height - box.padding - tick.height;
                        }
                        else {
                            y = plotOffset.top + axis.p2c(tick.v) - tick.height/2;
                            if (axis.position == "left")
                                x = box.left + box.width - box.padding - line.width;
                            else
                                x = box.left + box.padding;
                        }

                        // account for middle aligning and line number
                        y += line.height/2 + offset;
                        offset += line.height;

                        if ($.browser.opera) {
                            // FIXME: UGLY BROWSER DETECTION
                            // round the coordinates since Opera
                            // otherwise switches to more ugly
                            // rendering (probably non-hinted) and
                            // offset the y coordinates since it seems
                            // to be off pretty consistently compared
                            // to the other browsers
                            x = Math.floor(x);
                            y = Math.ceil(y - 2);
                        }
                        ctx.fillText(line.text, x, y);
                    }
                }
            });

            ctx.restore();
        }

        function drawSeries(series) {
            if (series.lines.show)
                drawSeriesLines(series);
            if (series.bars.show)
                drawSeriesBars(series);
            if (series.points.show)
                drawSeriesPoints(series);
        }

        function drawSeriesLines(series) {
            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    prevx = null, prevy = null;

                ctx.beginPath();
                for (var i = ps; i < points.length; i += ps) {
                    var x1 = points[i - ps], y1 = points[i - ps + 1],
                        x2 = points[i], y2 = points[i + 1];

                    if (x1 == null || x2 == null)
                        continue;

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min) {
                        if (y2 < axisy.min)
                            continue;   // line segment is outside
                        // compute new intersection point
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min) {
                        if (y1 < axisy.min)
                            continue;
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max) {
                        if (y2 > axisy.max)
                            continue;
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max) {
                        if (y1 > axisy.max)
                            continue;
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (x1 != prevx || y1 != prevy)
                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);

                    prevx = x2;
                    prevy = y2;
                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);
                }
                ctx.stroke();
            }

            function plotLineArea(datapoints, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),
                    i = 0, top, areaOpen = false,
                    ypos = 1, segmentStart = 0, segmentEnd = 0;

                // we process each segment in two turns, first forward
                // direction to sketch out top, then once we hit the
                // end we go backwards to sketch the bottom
                while (true) {
                    if (ps > 0 && i > points.length + ps)
                        break;

                    i += ps; // ps is negative if going backwards

                    var x1 = points[i - ps],
                        y1 = points[i - ps + ypos],
                        x2 = points[i], y2 = points[i + ypos];

                    if (areaOpen) {
                        if (ps > 0 && x1 != null && x2 == null) {
                            // at turning point
                            segmentEnd = i;
                            ps = -ps;
                            ypos = 2;
                            continue;
                        }

                        if (ps < 0 && i == segmentStart + ps) {
                            // done with the reverse sweep
                            ctx.fill();
                            areaOpen = false;
                            ps = -ps;
                            ypos = 1;
                            i = segmentStart = segmentEnd + ps;
                            continue;
                        }
                    }

                    if (x1 == null || x2 == null)
                        continue;

                    // clip x values

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (!areaOpen) {
                        // open area
                        ctx.beginPath();
                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));
                        areaOpen = true;
                    }

                    // now first check the case where both is outside
                    if (y1 >= axisy.max && y2 >= axisy.max) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));
                        continue;
                    }
                    else if (y1 <= axisy.min && y2 <= axisy.min) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));
                        continue;
                    }

                    // else it's a bit more complicated, there might
                    // be a flat maxed out rectangle first, then a
                    // triangular cutout or reverse; to find these
                    // keep track of the current x values
                    var x1old = x1, x2old = x2;

                    // clip the y values, without shortcutting, we
                    // go through all cases in turn

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // if the x value was changed we got a rectangle
                    // to fill
                    if (x1 != x1old) {
                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));
                        // it goes to (x1, y1), but we fill that below
                    }

                    // fill triangular section, this sometimes result
                    // in redundant points if (x1, y1) hasn't changed
                    // from previous line to, but we just ignore that
                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));
                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));

                    // fill the other rectangle if it's there
                    if (x2 != x2old) {
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));
                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));
                    }
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);
            ctx.lineJoin = "round";

            var lw = series.lines.lineWidth,
                sw = series.shadowSize;
            // FIXME: consider another form of shadow when filling is turned on
            if (lw > 0 && sw > 0) {
                // draw shadow as a thick and thin line with transparency
                ctx.lineWidth = sw;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                // position shadow at angle from the mid of line
                var angle = Math.PI/18;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);
                ctx.lineWidth = sw/2;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);
            if (fillStyle) {
                ctx.fillStyle = fillStyle;
                plotLineArea(series.datapoints, series.xaxis, series.yaxis);
            }

            if (lw > 0)
                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function drawSeriesPoints(series) {
            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    var x = points[i], y = points[i + 1];
                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                        continue;

                    ctx.beginPath();
                    x = axisx.p2c(x);
                    y = axisy.p2c(y) + offset;
                    if (symbol == "circle")
                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);
                    else
                        symbol(ctx, x, y, radius, shadow);
                    ctx.closePath();

                    if (fillStyle) {
                        ctx.fillStyle = fillStyle;
                        ctx.fill();
                    }
                    ctx.stroke();
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            var lw = series.points.lineWidth,
                sw = series.shadowSize,
                radius = series.points.radius,
                symbol = series.points.symbol;
            if (lw > 0 && sw > 0) {
                // draw shadow in two steps
                var w = sw / 2;
                ctx.lineWidth = w;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                plotPoints(series.datapoints, radius, null, w + w/2, true,
                    series.xaxis, series.yaxis, symbol);

                ctx.strokeStyle = "rgba(0,0,0,0.2)";
                plotPoints(series.datapoints, radius, null, w/2, true,
                    series.xaxis, series.yaxis, symbol);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            plotPoints(series.datapoints, radius,
                getFillStyle(series.points, series.color), 0, false,
                series.xaxis, series.yaxis, symbol);
            ctx.restore();
        }

        function drawBar(x, y, b, barLeft, barRight, offset, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {
            var left, right, bottom, top,
                drawLeft, drawRight, drawTop, drawBottom,
                tmp;

            // in horizontal mode, we start the bar from the left
            // instead of from the bottom so it appears to be
            // horizontal rather than vertical
            if (horizontal) {
                drawBottom = drawRight = drawTop = true;
                drawLeft = false;
                left = b;
                right = x;
                top = y + barLeft;
                bottom = y + barRight;

                // account for negative bars
                if (right < left) {
                    tmp = right;
                    right = left;
                    left = tmp;
                    drawLeft = true;
                    drawRight = false;
                }
            }
            else {
                drawLeft = drawRight = drawTop = true;
                drawBottom = false;
                left = x + barLeft;
                right = x + barRight;
                bottom = b;
                top = y;

                // account for negative bars
                if (top < bottom) {
                    tmp = top;
                    top = bottom;
                    bottom = tmp;
                    drawBottom = true;
                    drawTop = false;
                }
            }

            // clip
            if (right < axisx.min || left > axisx.max ||
                top < axisy.min || bottom > axisy.max)
                return;

            if (left < axisx.min) {
                left = axisx.min;
                drawLeft = false;
            }

            if (right > axisx.max) {
                right = axisx.max;
                drawRight = false;
            }

            if (bottom < axisy.min) {
                bottom = axisy.min;
                drawBottom = false;
            }

            if (top > axisy.max) {
                top = axisy.max;
                drawTop = false;
            }

            left = axisx.p2c(left);
            bottom = axisy.p2c(bottom);
            right = axisx.p2c(right);
            top = axisy.p2c(top);

            // fill the bar
            if (fillStyleCallback) {
                c.beginPath();
                c.moveTo(left, bottom);
                c.lineTo(left, top);
                c.lineTo(right, top);
                c.lineTo(right, bottom);
                c.fillStyle = fillStyleCallback(bottom, top);
                c.fill();
            }

            // draw outline
            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {
                c.beginPath();

                // FIXME: inline moveTo is buggy with excanvas
                c.moveTo(left, bottom + offset);
                if (drawLeft)
                    c.lineTo(left, top + offset);
                else
                    c.moveTo(left, top + offset);
                if (drawTop)
                    c.lineTo(right, top + offset);
                else
                    c.moveTo(right, top + offset);
                if (drawRight)
                    c.lineTo(right, bottom + offset);
                else
                    c.moveTo(right, bottom + offset);
                if (drawBottom)
                    c.lineTo(left, bottom + offset);
                else
                    c.moveTo(left, bottom + offset);
                c.stroke();
            }
        }

        function drawSeriesBars(series) {
            function plotBars(datapoints, barLeft, barRight, offset, fillStyleCallback, axisx, axisy) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    if (points[i] == null)
                        continue;
                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, offset, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // FIXME: figure out a way to add shadows (for instance along the right edge)
            ctx.lineWidth = series.bars.lineWidth;
            ctx.strokeStyle = series.color;
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;
            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, 0, fillStyleCallback, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function getFillStyle(filloptions, seriesColor, bottom, top) {
            var fill = filloptions.fill;
            if (!fill)
                return null;

            if (filloptions.fillColor)
                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);

            var c = $.color.parse(seriesColor);
            c.a = typeof fill == "number" ? fill : 0.4;
            c.normalize();
            return c.toString();
        }

        function insertLegend() {
            placeholder.find(".legend").remove();

            if (!options.legend.show)
                return;

            var fragments = [], rowStarted = false,
                lf = options.legend.labelFormatter, s, label;
            for (var i = 0; i < series.length; ++i) {
                s = series[i];
                label = s.label;
                if (!label)
                    continue;

                if (i % options.legend.noColumns == 0) {
                    if (rowStarted)
                        fragments.push('</tr>');
                    fragments.push('<tr>');
                    rowStarted = true;
                }

                if (lf)
                    label = lf(label, s);

                fragments.push(
                    '<td class="legendColorBox"><div style="border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px"><div style="width:4px;height:0;border:5px solid ' + s.color + ';overflow:hidden"></div></div></td>' +
                        '<td class="legendLabel">' + label + '</td>');
            }
            if (rowStarted)
                fragments.push('</tr>');

            if (fragments.length == 0)
                return;

            var table = '<table style="font-size:smaller;color:' + options.grid.color + '">' + fragments.join("") + '</table>';
            if (options.legend.container != null)
                $(options.legend.container).html(table);
            else {
                var pos = "",
                    p = options.legend.position,
                    m = options.legend.margin;
                if (m[0] == null)
                    m = [m, m];
                if (p.charAt(0) == "n")
                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';
                else if (p.charAt(0) == "s")
                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';
                if (p.charAt(1) == "e")
                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';
                else if (p.charAt(1) == "w")
                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';
                var legend = $('<div class="legend">' + table.replace('style="', 'style="position:absolute;' + pos +';') + '</div>').appendTo(placeholder);
                if (options.legend.backgroundOpacity != 0.0) {
                    // put in the transparent background
                    // separately to avoid blended labels and
                    // label boxes
                    var c = options.legend.backgroundColor;
                    if (c == null) {
                        c = options.grid.backgroundColor;
                        if (c && typeof c == "string")
                            c = $.color.parse(c);
                        else
                            c = $.color.extract(legend, 'background-color');
                        c.a = 1;
                        c = c.toString();
                    }
                    var div = legend.children();
                    $('<div style="position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);
                }
            }
        }


        // interactive features

        var highlights = [],
            redrawTimeout = null;

        // returns the data item the mouse is over, or null if none is found
        function findNearbyItem(mouseX, mouseY, seriesFilter) {
            var maxDistance = options.grid.mouseActiveRadius,
                smallestDistance = maxDistance * maxDistance + 1,
                item = null, foundPoint = false, i, j;

            for (i = series.length - 1; i >= 0; --i) {
                if (!seriesFilter(series[i]))
                    continue;

                var s = series[i],
                    axisx = s.xaxis,
                    axisy = s.yaxis,
                    points = s.datapoints.points,
                    ps = s.datapoints.pointsize,
                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster
                    my = axisy.c2p(mouseY),
                    maxx = maxDistance / axisx.scale,
                    maxy = maxDistance / axisy.scale;

                // with inverse transforms, we can't use the maxx/maxy
                // optimization, sadly
                if (axisx.options.inverseTransform)
                    maxx = Number.MAX_VALUE;
                if (axisy.options.inverseTransform)
                    maxy = Number.MAX_VALUE;

                if (s.lines.show || s.points.show) {
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1];
                        if (x == null)
                            continue;

                        // For points and lines, the cursor must be within a
                        // certain distance to the data point
                        if (x - mx > maxx || x - mx < -maxx ||
                            y - my > maxy || y - my < -maxy)
                            continue;

                        // We have to calculate distances in pixels, not in
                        // data units, because the scales of the axes may be different
                        var dx = Math.abs(axisx.p2c(x) - mouseX),
                            dy = Math.abs(axisy.p2c(y) - mouseY),
                            dist = dx * dx + dy * dy; // we save the sqrt

                        // use <= to ensure last point takes precedence
                        // (last generally means on top of)
                        if (dist < smallestDistance) {
                            smallestDistance = dist;
                            item = [i, j / ps];
                        }
                    }
                }

                if (s.bars.show && !item) { // no other point can be nearby
                    var barLeft = s.bars.align == "left" ? 0 : -s.bars.barWidth/2,
                        barRight = barLeft + s.bars.barWidth;

                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1], b = points[j + 2];
                        if (x == null)
                            continue;

                        // for a bar graph, the cursor must be inside the bar
                        if (series[i].bars.horizontal ?
                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&
                                my >= y + barLeft && my <= y + barRight) :
                            (mx >= x + barLeft && mx <= x + barRight &&
                                my >= Math.min(b, y) && my <= Math.max(b, y)))
                            item = [i, j / ps];
                    }
                }
            }

            if (item) {
                i = item[0];
                j = item[1];
                ps = series[i].datapoints.pointsize;

                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),
                    dataIndex: j,
                    series: series[i],
                    seriesIndex: i };
            }

            return null;
        }

        function onMouseMove(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                    function (s) { return s["hoverable"] != false; });
        }

        function onMouseLeave(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                    function (s) { return false; });
        }

        function onClick(e) {
            triggerClickHoverEvent("plotclick", e,
                function (s) { return s["clickable"] != false; });
        }

        // trigger click or hover event (they send the same parameters
        // so we share their code)
        function triggerClickHoverEvent(eventname, event, seriesFilter) {
            var offset = eventHolder.offset(),
                canvasX = event.pageX - offset.left - plotOffset.left,
                canvasY = event.pageY - offset.top - plotOffset.top,
                pos = canvasToAxisCoords({ left: canvasX, top: canvasY });

            pos.pageX = event.pageX;
            pos.pageY = event.pageY;

            var item = findNearbyItem(canvasX, canvasY, seriesFilter);

            if (item) {
                // fill in mouse pos for any listeners out there
                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left);
                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top);
            }

            if (options.grid.autoHighlight) {
                // clear auto-highlights
                for (var i = 0; i < highlights.length; ++i) {
                    var h = highlights[i];
                    if (h.auto == eventname &&
                        !(item && h.series == item.series &&
                            h.point[0] == item.datapoint[0] &&
                            h.point[1] == item.datapoint[1]))
                        unhighlight(h.series, h.point);
                }

                if (item)
                    highlight(item.series, item.datapoint, eventname);
            }

            placeholder.trigger(eventname, [ pos, item ]);
        }

        function triggerRedrawOverlay() {
            var t = options.interaction.redrawOverlayInterval;
            if (t == -1) {      // skip event queue
                drawOverlay();
                return;
            }

            if (!redrawTimeout)
                redrawTimeout = setTimeout(drawOverlay, t);
        }

        function drawOverlay() {
            redrawTimeout = null;

            // draw highlights
            octx.save();
            octx.clearRect(0, 0, canvasWidth, canvasHeight);
            octx.translate(plotOffset.left, plotOffset.top);

            var i, hi;
            for (i = 0; i < highlights.length; ++i) {
                hi = highlights[i];

                if (hi.series.bars.show)
                    drawBarHighlight(hi.series, hi.point);
                else
                    drawPointHighlight(hi.series, hi.point);
            }
            octx.restore();

            executeHooks(hooks.drawOverlay, [octx]);
        }

        function highlight(s, point, auto) {
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number") {
                var ps = s.datapoints.pointsize;
                point = s.datapoints.points.slice(ps * point, ps * (point + 1));
            }

            var i = indexOfHighlight(s, point);
            if (i == -1) {
                highlights.push({ series: s, point: point, auto: auto });

                triggerRedrawOverlay();
            }
            else if (!auto)
                highlights[i].auto = false;
        }

        function unhighlight(s, point) {
            if (s == null && point == null) {
                highlights = [];
                triggerRedrawOverlay();
            }

            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number")
                point = s.data[point];

            var i = indexOfHighlight(s, point);
            if (i != -1) {
                highlights.splice(i, 1);

                triggerRedrawOverlay();
            }
        }

        function indexOfHighlight(s, p) {
            for (var i = 0; i < highlights.length; ++i) {
                var h = highlights[i];
                if (h.series == s && h.point[0] == p[0]
                    && h.point[1] == p[1])
                    return i;
            }
            return -1;
        }

        function drawPointHighlight(series, point) {
            var x = point[0], y = point[1],
                axisx = series.xaxis, axisy = series.yaxis;

            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                return;

            var pointRadius = series.points.radius + series.points.lineWidth / 2;
            octx.lineWidth = pointRadius;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var radius = 1.5 * pointRadius,
                x = axisx.p2c(x),
                y = axisy.p2c(y);

            octx.beginPath();
            if (series.points.symbol == "circle")
                octx.arc(x, y, radius, 0, 2 * Math.PI, false);
            else
                series.points.symbol(octx, x, y, radius, false);
            octx.closePath();
            octx.stroke();
        }

        function drawBarHighlight(series, point) {
            octx.lineWidth = series.bars.lineWidth;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var fillStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,
                0, function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);
        }

        function getColorOrGradient(spec, bottom, top, defaultColor) {
            if (typeof spec == "string")
                return spec;
            else {
                // assume this is a gradient spec; IE currently only
                // supports a simple vertical gradient properly, so that's
                // what we support too
                var gradient = ctx.createLinearGradient(0, top, 0, bottom);

                for (var i = 0, l = spec.colors.length; i < l; ++i) {
                    var c = spec.colors[i];
                    if (typeof c != "string") {
                        var co = $.color.parse(defaultColor);
                        if (c.brightness != null)
                            co = co.scale('rgb', c.brightness);
                        if (c.opacity != null)
                            co.a *= c.opacity;
                        c = co.toString();
                    }
                    gradient.addColorStop(i / (l - 1), c);
                }

                return gradient;
            }
        }
    }

    $.plot = function(placeholder, data, options) {
        //var t0 = new Date();
        var plot = new Plot($(placeholder), data, options, $.plot.plugins);
        //(window.console ? console.log : alert)("time used (msecs): " + ((new Date()).getTime() - t0.getTime()));
        return plot;
    };

    $.plot.version = "0.7";

    $.plot.plugins = [];

    // returns a string with the date d formatted according to fmt
    $.plot.formatDate = function(d, fmt, monthNames) {
        var leftPad = function(n) {
            n = "" + n;
            return n.length == 1 ? "0" + n : n;
        };

        var r = [];
        var escape = false, padNext = false;
        var hours = d.getUTCHours();
        var isAM = hours < 12;
        if (monthNames == null)
            monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

        if (fmt.search(/%p|%P/) != -1) {
            if (hours > 12) {
                hours = hours - 12;
            } else if (hours == 0) {
                hours = 12;
            }
        }
        for (var i = 0; i < fmt.length; ++i) {
            var c = fmt.charAt(i);

            if (escape) {
                switch (c) {
                    case 'h': c = "" + hours; break;
                    case 'H': c = leftPad(hours); break;
                    case 'M': c = leftPad(d.getUTCMinutes()); break;
                    case 'S': c = leftPad(d.getUTCSeconds()); break;
                    case 'd': c = "" + d.getUTCDate(); break;
                    case 'm': c = "" + (d.getUTCMonth() + 1); break;
                    case 'y': c = "" + d.getUTCFullYear(); break;
                    case 'b': c = "" + monthNames[d.getUTCMonth()]; break;
                    case 'p': c = (isAM) ? ("" + "am") : ("" + "pm"); break;
                    case 'P': c = (isAM) ? ("" + "AM") : ("" + "PM"); break;
                    case '0': c = ""; padNext = true; break;
                }
                if (c && padNext) {
                    c = leftPad(c);
                    padNext = false;
                }
                r.push(c);
                if (!padNext)
                    escape = false;
            }
            else {
                if (c == "%")
                    escape = true;
                else
                    r.push(c);
            }
        }
        return r.join("");
    };

    // round to nearby lower multiple of base
    function floorInBase(n, base) {
        return base * Math.floor(n / base);
    }

})(jQuery);
jQuery.fn.spb_graph = function(json){
	var mainWrap = this;
    window.spb_graph = {
		//инициализация
		init : function(){
			this.mainWrap = mainWrap;
			this.json = json;

			spb_graph.objs		= {};
			spb_graph.lider		= spb_graph.json.lider;
			spb_graph.current	= spb_graph.json.current;
			
			//если текущий == сравниваемому делаем сравниваемым первого из селекта
			if (spb_graph.lider == spb_graph.current)
				spb_graph.lider = spb_graph.lider = spb_graph.json.clubs[0][0];
			
			//ограничение минимального количества туров в сетке до 30
			spb_graph.length	= spb_graph.json.data[spb_graph.current].tour_moving.length > 30 ? spb_graph.json.data[spb_graph.current].tour_moving.length : 30;
			
			spb_graph.colsWidth	= parseInt(spb_graph.mainWrap.width()/spb_graph.length,10);
			spb_graph.buildData();
			//инициализация графиков
			spb_graph.update(spb_graph.lider);
			//инициализация сетки
			spb_graph.draw.grid.init();
			//строим выбиралку
			spb_graph.selects();
		},

		//работаем с данными
		buildData : function(){
			for (var indexes in spb_graph.json.data)
				for (var keys in spb_graph.json.data[indexes]){
					//для пропущенных голов проставляем отрицательные значения
					//чтоб опустить график ниже OX
					if (keys == 'mpt_tour')
						for (var item = 0; item < spb_graph.json.data[indexes][keys].length; item++)
							spb_graph.json.data[indexes][keys][item][1] = -spb_graph.json.data[indexes][keys][item][1];
					//дублируем данные для забитых, пропущенных, чтоб прорисовать в два графика
					if (keys == 'mzt_mpt_tour')
						spb_graph.json.data[indexes].mzt_mpt_tour2 = spb_graph.json.data[indexes].mzt_mpt_tour;
				}
		},

		//обновление графиков
		update : function(lider){
			spb_graph.lider = lider;
			//удаляем старые графики и таблицы сравнения со старыми данными
			spb_graph.mainWrap.find('div.graph, div#table').remove();
			
			//проверяем константу максимального количества точек со сравниваемым
			if (spb_graph.json.data[lider].tour_moving.length > spb_graph.length)
				spb_graph.length = spb_graph.json.data[lider].tour_moving.length;
			
			//перемещение мышки
			spb_graph.mainWrap.mousemove(function(e){
				var num = parseInt((e.clientX - spb_graph.mainWrap.offset().left) / spb_graph.colsWidth, 10);
				//избавляемся от лишних вызовов функций
				if (spb_graph.num != num /*&& !jQuery(e.target).parents('#table').length*/){
					spb_graph.action(num);
					spb_graph.num = num;
				}
			});
			
			//клик по графикам и табличке
			spb_graph.mainWrap.click(function(e){
				var gameID,
					//какой тур активен
					num = parseInt((e.clientX - spb_graph.mainWrap.offset().left) / spb_graph.colsWidth, 10);

				//клик по табличке, либо по текущей табличке
				if (!jQuery(e.target).parents('#table .lider').length)
					gameID = spb_graph.json.data[spb_graph.current].tour_label[num][5];
				//клик по табличке - лидеру
				else
					gameID = spb_graph.json.data[spb_graph.lider].tour_label[num][5];
				
				//собираем урлу
				window.location.href = window.location.href.replace(/club_(.*)$/,'game_' + gameID);
			});

			//собираем оси и параметры отображения графиков
			spb_graph.plots = spb_graph.draw.graphs();
			spb_graph.$plots = [];
			
			//инициализация длины канвы из рассчета количества элементов сетки * длину одного элемента сетки
			var style = '<style type="text/css">div#spb_graph, div#spb_graph div.graph, div#spb_select { width:' + spb_graph.colsWidth * spb_graph.length + 'px; }</style>';
			spb_graph.mainWrap.append(style);
			
			for (var graph = 0; graph < spb_graph.plots.length; graph++){
				//если график место в туре - переворачиваем его, чтоб внизу были большие значения, вверху - меньшие
				if (spb_graph.plots[graph].name == 'tour_moving')
					spb_graph.draw.revert(spb_graph.plots[graph].data);

				spb_graph.plots[graph].obj.addClass('graph');
				spb_graph.mainWrap.append(spb_graph.plots[graph].obj);
				//рисуем плагином из наших кастомных параметров и осей
				spb_graph.$plots.push(
					jQuery.plot(
						jQuery('.' + spb_graph.plots[graph].name),
						spb_graph.plots[graph].data,
						spb_graph.plots[graph].options
					)
				);

				//расставляем названия осей для всех графиков кроме дублирующего забито/пропущено
				if (spb_graph.plots[graph].name != 'mzt_mpt_tour2'){
					var labels = spb_graph.draw.labels.init(spb_graph.plots[graph].name, spb_graph.plots[graph].data);
					for (var i = 0; i < labels.length; i++)
						spb_graph.plots[graph].obj.append(labels[i]);
				}

				//инициализируем маркуры для графика место в туре
				if (spb_graph.plots[graph].name == 'tour_moving')
					spb_graph.draw.markers.init(spb_graph.$plots[graph]);
			}
			spb_graph.table.init();
		},
		
		//события
		action : function(num){
			if (num == undefined)
				num = spb_graph.length-1;
			spb_graph.num = num;
			//сетка
			spb_graph.draw.grid.show(num);
			//маркеры для места в туре
			spb_graph.draw.markers.show(num);
			//табличка для забитых/пропущенных в туре
			spb_graph.table.show(num);
		},

		//рисовалка
		draw : {
			//графиков
			graphs : function(){
				var Graph = function(dataName){

					this.obj	= jQuery('<div class="' + dataName[0] + '" />');
					this.name	= dataName[0];
					this.data	= [];

					/*общие параметры для каждого графика*/
					this.options = {
						xaxis		: {show: false, labelHeight:0, labelWidth:0, tickLength:0, tickSize:0},
						yaxis		: {show: false, labelHeight:0, labelWidth:0, tickLength:-5, autoscaleMargin:0.25},
						shadowSize	: 0,
						grid		: {borderWidth:0, hoverable:true, markingsLineWidth:0, minBorderMargin:0.5 /*для отображения нулевой оси по иксу, иначе обрезает до 1 px*/}
					}

					//ОХ
					var ox = {
							data	: [[0.65,0],[spb_graph.length + '.55',0]],
							lines	: {show:true, lineWidth:2},
							points	: {symbol:function(){return;}, show:false},
							color	: '#000'
					}

					//два графика для забитых/пропущенных
					//для одного берем минимум, для другого максимум, т.к. плагин не позволяет
					//красить одну линию в разные заливки
					if (dataName[0] == 'mzt_mpt_tour')
						this.options.yaxis.min = 0;
					if (dataName[0] == 'mzt_mpt_tour2')
						this.options.yaxis.max = 0;

					for (var i = 0; i < dataName.length; i++){

						//с кем сравниваем
						var lider = {
							data	: spb_graph.json.data[spb_graph.lider][dataName[i]],
							lines	: {show:true, lineWidth:2, fill:false},
							points	: {symbol:function(){return;}, show:false},
							name	: dataName[i],
							color	: '#999'
						};

						//текущий клуб
						var current = {
							data	: spb_graph.json.data[spb_graph.current][dataName[i]],
							lines	: {show:true, lineWidth:2, fill:true},
							points	: {symbol:function(){return;}, show:false},
							name	: dataName[i]
						};

						//линии и заливки зеленого цвета для конкретных графиков
						if (dataName[i] == 'mzt_tour' || dataName[i] == 'tour_moving' || dataName[i] == 'mzt_mpt_tour'){
							current.color				= 'rgb(40,143,0)';
							dataName[i] != 'tour_moving' ?
								current.lines.fillColor	= 'rgba(126,188,102,.8)' :
								current.lines.fill		= false;
						//красный цвет
						} else if (dataName[i] == 'mpt_tour' || dataName[i] == 'mzt_mpt_tour2'){
							current.color				= 'rgb(237,28,36)';
							current.lines.fillColor		= 'rgba(244,119,124,.8)';
						}
						//собираем параметры и точки
						this.data.push(current,lider);
					}
					//и склеиваем с ОХ
					this.data.push(ox);

					return this;
				}
				//что будем рисовать ([какие ключи брать из массива данных])
				return [
					new Graph(['tour_moving']),
					new Graph(['mzt_tour','mpt_tour']),
					new Graph(['mzt_mpt_tour']),
					new Graph(['mzt_mpt_tour2'])
				];
			},

			//возвращает максимальное или минимальное значение из массива точек [[n,m],...]
			maxminValue : function(data,type){
				var val = data[0].data[0][0];
				for (var count = 0; count < data.length; count++){
					if (data[count].name){
						var
							//определяем какой ключ брать, если массив изменен функцией revert для места в туре [[n,m,k],...]
							j = data[count].data[0].length > 2 ? 2 : 1,
							len = data[count].data.length;

						for (var i = 0; i < len; i++)
							//что нужно вернуть, минимум или максимум
							if (type == 'max' && data[count].data[i][j] > val || type == 'min' && data[count].data[i][j] < val)
								val = data[count].data[i][j];
					}
				}
				return val;
			},

			//переворачивает значения массива для графика места в туре (чтоб выводить первое место выше)
			revert : function(data){
				for (var keys = 0; keys < data.length; keys++)
					if (data[keys].name){
						if (data[keys].data[0].length > 2)
							for (var items = 0; items < data[keys].data.length; items++)
								data[keys].data[items].splice(1,1);
						
						for (var items = 0; items < data[keys].data.length; items++){
							data[keys].data[items].push(data[keys].data[items][1]);
							data[keys].data[items][1] = spb_graph.json.clubs.length - data[keys].data[items][1];
						}
					}
			},

			//сетка
			grid : {
				init : function(){
					var wrap = jQuery('<div id="grid" />');
					for (var i=0; i < spb_graph.length; i++){
						var item = jQuery('<div />');
						var tick = jQuery('<span class="tick" />');
						var count = i;
						var tourCount = jQuery('<span class="tour">' + ++count + '</span>');
						count = i + 1;

						//проставляем классы для первого, второго и четных элементов
						if (count == 1){
							item.addClass('first');
							tourCount.html('&nbsp;1&nbsp;тур');
						}
						if (count == 2)
							item.addClass('second');
						if (count % 5 != 0 && count != 1)
							item.addClass('hidden');
						if (count % 2 != 0)
							item.addClass('odd');

						wrap.append(item.append(tick, tourCount));
					}

					//отступ для сетки, высчитывается от высоты всех графиков, чтоб опустить цыфры под них
					var padding = function(){
						var height = 0;
						jQuery('div#spb_graph div.graph, div#spb_graph div#table').each(function(i,obj){
							height += parseInt(jQuery(obj).height(),10) +
								parseInt(jQuery(obj).css('margin-bottom'),10) +
								parseInt(jQuery(obj).css('margin-top'),10) +
								34 //padding from wrap for fix IE 8-;
						});
						return height + 'px';
					}
					var style = '<style type="text/css">div#grid div { padding-bottom:' + padding() + '; width:' + spb_graph.colsWidth + 'px; }\ndiv#spb_graph div.markerWrap div { width:' + spb_graph.colsWidth + 'px; }</style>';
					spb_graph.mainWrap.append(wrap).prepend(style);
					//складываем элементы сетки в объект, чтоб быстрей до них добраться
					spb_graph.objs.grid = spb_graph.mainWrap.find('#grid');
					spb_graph.action();
				},

				show : function(num){
					spb_graph.objs.grid.find('.active').removeClass('active').end().find('div:eq(' + num + ')').addClass('active');
				}
			},

			//маркеры со значением места для графика место в туре
			markers : {
				init : function(plot){
					//точки из графика
					var points = plot.getData();
					//canvas графика
					var placeholder = plot.getPlaceholder();

					for (var i = 0; i < points.length; i++){
						if(points[i].name){
							var wrap = jQuery('<div class="markerWrap" />');
							var count = 0;

							for (var j = 0; j < points[i].data.length; j++, count++){
								var marker = jQuery('<div>' + Math.abs(points[i].data[j][2]) + '</div>');
								marker.css({
									'background-color'  : points[i].color,
									'top'				: parseInt(points[i].yaxis.p2c(points[i].data[j][1]) - 6 , 10),
									'left'				: spb_graph.colsWidth * j - 1	//points[i].xaxis.p2c(points[i].data[j][0]) - Math.floor(spb_graph.colsWidth/2)
								});
								
								wrap.append(marker);
							}
							placeholder.prepend(wrap);
						}
					}					
					spb_graph.objs.markers = spb_graph.mainWrap.find('div.markerWrap');
					
					//разводим маркеры, если накладываются
					count = spb_graph.objs.markers;
					var markers = [];
					markers[1] = spb_graph.objs.markers.eq(0).find('div');
					markers[2] = spb_graph.objs.markers.eq(1).find('div');
					markers[2].each(function(i,obj){
						var marker1 = obj = jQuery(obj);
						var marker2 = jQuery(markers[1][i]);
						marker1.top = parseInt(marker1.css('top'),10);
						marker2.top = parseInt(marker2.css('top'),10);
						//зеленый выше серого - зеленый поднимаем выше, серый опускаем
						if (marker1.top < marker2.top && marker2.top - marker1.top < 11){
							marker1.css('top', marker1.top - 2);
							marker2.css('top', marker1.top + 9);
						}
						//серый выше зеленого - серый поднимаем выше, зеленый опускаем
						else if (marker2.top < marker1.top && marker1.top - marker2.top < 11){
							marker1.css('top', marker2.top + 9);
							marker2.css('top', marker2.top - 2);
						}
						
					});
				},

				show : function(num){					
					spb_graph.objs.markers.find('.active').removeClass('active');
					spb_graph.objs.markers.eq(0).find('div:eq(' + num + ')').add(spb_graph.objs.markers.eq(1).find('div:eq(' + num + ')')).addClass('active');
				}
			},

			//названия осей Y
			labels : {
				init : function(name,data){
					var names = {
						//names				top					bottom
						'tour_moving'	:	['1 место в туре',	spb_graph.json.clubs.length], //максимальное место = количество команд
						'mzt_tour'		:	['Забито',			'Пропущено'],
						'mzt_mpt_tour'	:	['Разница мячей',	'']
					};

					if (names[name] == undefined)
						return;

					var label = [];
					for (var i = 0; i < 2; i++){
						label[i] = '<div class="label_' + i + '">' + names[name][i] + '</div>';
					}

					return [label[0],label[1]];
				}
			}
		},

		//таблица забитых/пропущенных
		table : {
			init : function(){
				var wrap = jQuery('<div id="table" />');
				var text = '', type, current, wrapClass, name = [];
				var color = [];
				
				//если туры сравниваемого больше текущего - берем его
				var data = spb_graph.json.data[spb_graph.current].tour_label.length > spb_graph.json.data[spb_graph.lider].tour_label.length ?
					spb_graph.json.data[spb_graph.current].tour_label :
					spb_graph.json.data[spb_graph.lider].tour_label;
				
				for (var keys = 0; keys < data.length; keys++){
					text += '<div class="wrap">';
					for (var i = 0; i < 2; i++){

						//таблица для текущего клуба
						if (i == 0){
							current		= spb_graph.current;
							type		= spb_graph.json.data[current].tour_label;
							wrapClass	= 'current';
						//для сравниваемого
						} else {
							current		= spb_graph.lider;
							type		= spb_graph.json.data[current].tour_label;
							wrapClass	= 'lider';
						}
						color = ['',''];

						//режем имена клубов на 10 символов, чтоб влезали в таблицу по ширине
						if (type[keys]){
							if (spb_graph.json.data[type[keys][0]].name.length > 10)
								name[0] = spb_graph.json.data[type[keys][0]].name.slice(0,10) + '...';
							else
								name[0] = spb_graph.json.data[type[keys][0]].name;

							if (spb_graph.json.data[current].name.length > 10)
								name[1] = spb_graph.json.data[current].name.slice(0,10) + '...';
							else
								name[1] = spb_graph.json.data[current].name;
						}
						
						//если не в гостсях
						if (type[keys] && type[keys][3] != 1){
							if (type[keys][1] > type[keys][2])
								color = ['green','red'];
							else if (type[keys][1] < type[keys][2])
								color = ['red','green'];
							text += '<div class="' + wrapClass + '">';
								text +=	'<span class="' + color[0] + '" style="text-align:right;">' + name[0] + '</span>';
								text +=	'<span class="count">' + type[keys][1] + ':' + type[keys][2] + '</span>';
								text +=	'<span class="' + color[1] + '" style="text-align:left;">' + name[1] + '</span>';
							text += '</div>';
						//если в гостях
						} else if (type[keys]){
							if (type[keys][1] > type[keys][2])
								color = ['green','red'];
							else if (type[keys][1] < type[keys][2])
								color = ['red','green'];
							text += '<div class="' + wrapClass + '">';
								text +=	'<span class="' + color[0] + '" style="text-align:right;">' + name[1] + '</span>';
								text +=	'<span class="count">' + type[keys][1] + ':' + type[keys][2] + '</span>';
								text +=	'<span class="' + color[1] + '" style="text-align:left;">' + name[0] + '</span>';
							text += '</div>';
						} else {
							text += '<div class="' + wrapClass + '">';
								text +=	'<span style="text-align:right;">&mdash;</span>';
								text +=	'<span class="count">&nbsp;</span>';
								text +=	'<span style="text-align:left;">&mdash;</span>';
							text += '</div>';
						}
					}
					text += '</div>';
				}
				wrap.append(text).insertBefore(spb_graph.mainWrap.find('div.mzt_mpt_tour'));
				
				//рассчитываем координаты таблицы
				var rightLimit = spb_graph.mainWrap.width() - wrap.find('div.wrap:eq(0)').width() - 2;
				wrap.find('div.wrap').each(function(i,obj){
					obj = jQuery(obj);
					var left = spb_graph.colsWidth * i - parseInt(obj.width() / 2, 10) + 6; // 6 = padding for canvas
					if (left < 0)
						left = 0;
					else if (left > rightLimit)
						left = rightLimit;
					obj.css('left',left);
				});
				
				spb_graph.objs.tables = wrap;
			},
			
			show : function(num){
				spb_graph.objs.tables.find('div.wrap').hide().eq(num).show();
			}
		},

		//переключалка сравниваемых клубов
		selects : function(){
			var
				wrap = jQuery('<div id="spb_select" />'),
				selectWrap	= jQuery('<div class="selectWrap" />'),
				select		= jQuery('<select id="select" />'),
				label		= '<label for="select">Сравнение с:</label>',
				img			= '<span></span>';

			wrap.append('<div class="title">Движение по турам</div>');
			for (var keys = 0; keys < spb_graph.json.clubs.length; keys++)
				if (spb_graph.json.clubs[keys][0] != spb_graph.json.current)
				select.append('<option value="' + spb_graph.json.clubs[keys][0] + '"' + (spb_graph.lider == spb_graph.json.clubs[keys][0] ? 'selected="selected"' : '') + '>' + spb_graph.json.clubs[keys][1] + '</option>');

			select.change(function(){
				spb_graph.update(jQuery(this).val());
				spb_graph.action();
			});

			wrap.append(selectWrap.append(img,label,select)).insertBefore(spb_graph.mainWrap);
		}
    }
	//инициализация всего
    spb_graph.init();
}
/* NEW STATS GRAPHS */
$.fn.new_stats_graph = function(data){
    var obj = {
        placeholder: this,
        name: this.attr('data-name'),
        type: this.attr('data-type')
    };

    this.create = {
        pie : function(){
            var
                presetColors = {
                    'В' : '#4ea12e',
                    'Н' : '#666',
                    'П'	: '#ed1c24'
                },

                colors = [],

                labelFormatter = function(label, series){
                    return "<div style='font-size:11px; text-align:center; padding:2px; color:white;'>" + label + ' (' + series.data[0][1] + ')' + "</div>";
                },

                settings = {
                    series: {
                        pie: {
                            show: true,
                            radius: 1,
                            label: {
                                show: true,
                                radius: 1/2,
                                formatter: labelFormatter,
                                background: {opacity: 0}
                            }
                        }
                    },
                    legend: {show: false}
                };
            for (var i = 0; i < data.length; i++)
                colors.push(presetColors[data[i].label]);

            settings.colors = colors;

            $.plot(obj.placeholder, data, settings);
        },
        lines : function(){
            var settings = {
                series : {
                    lines : {
                        lineWidth : 2
                    },
                    shadowSize : 0
                },
                xaxis : {
                    tickSize : 1,
                    autoscaleMargin : 0,
                    max : (function(){
                        var max = 0;
                        for (var i = 0; i < data.length; i++){
                            if (data[i].data.length > max)
                                max = data[i].data.length;
                        }
                        return max;
                    })()
                },
                yaxis : {
                    tickSize : 1,
                    autoscaleMargin : 0,
                    tickFormatter : function(n){
                        if (n == 0) return '';
                        else return n;
                    }
                },
                grid : {
                    borderWidth : 1,
                    borderColor : {top : '#ccc', right : '#ccc', bottom : '#4ea12e', left : '#ccc'}
                },
                colors : [
                    '#fff',
                    '#ed1c24',
                    '#4ea12e'
                ]
            };

            data.unshift({data : [[0,0]]});

            $.plot(obj.placeholder, data, settings);
        },
        bars : function(){
            var
                arrs = arrsData(),
                max = maxInArr(),

                wrap = $('<div />').addClass('bars'),
                out = '',
                lengthData = arrs.length - 1,
                lengthCols = arrs[0].length - 1;

            for (var item = 0; item < arrs[0].length; item++)
                for (var col = 0; col < arrs.length; col++){
                    var
                        text = arrs[col][item],
                        height = Math.floor(text / max * 100),
                        last = col == lengthData && item == lengthCols ? ' last' : '';

                    height = height <= 0 ? 1 : height;
                    out += '<div class="bar_' + col + last + '" style="height:' + height + 'px;"><span>' + text + '</span></div>';
                }

            function arrsData(){
                var outArr = [];
                for (var i = 0; i < data.length; i++)
                    outArr.push(data[i].data);
                return outArr;
            }

            function maxInArr(){
                var max = 0;

                for (var arr = 0; arr < arrs.length; arr++)
                    for (var item = 0; item < arrs[arr].length; item++)
                        max = arrs[arr][item] > max ? arrs[arr][item] : max;

                return max;
            }

            obj.placeholder.append(wrap.html(out));
        }
    }
    if (obj.type)
        this.create[obj.type]();
    else
        console.log('Graph create error: el $(\'' + this.selector + '\') not found in the DOM');
};
/* /NEW STATS GRAPHS */

$(document).ready(function() {
    var moreRowTableTournament = $('.more-btn-tournir-table-js');
    var moreRowTable = $('.more-btn-table-js');

    moreRowTableTournament.on('click', function(event) {
        var elem = $(this);
        var tournamentTable = elem.parent();
        var tournamentTableRow = tournamentTable.find('.b-tournaments-table__row');
        event.preventDefault();

        tournamentTableRow.removeClass('b-tournaments-table__row_hidden');
        elem.remove();
    });


    moreRowTable.on('click', function(event) {
        var elem = $(this);
        var tournamentTable = elem.parent();
        var tournamentTableRow = tournamentTable.find('table tr');
        event.preventDefault();

        tournamentTableRow.removeClass('hidden');
        elem.remove();
    });
});


var spb_scripts = spb_scripts || {};

$(document).ready(function() {
    var dataChooiser = $('.data-chooiser-js');
    var dataChooiserItem = dataChooiser.find('a');

    dataChooiserItem.on('click', function(event) {
        var elem = $(this);
        var index = elem.parent().parent().find('>*').index(elem.parent());
        var dataTd = $('.choose-table-js').find('.choose-data-js');
        var choosenData = elem.attr('id').replace('data-', '');

        event.preventDefault();

        dataChooiser.find('a').removeClass('selected');
        dataChooiser.find('>*:eq('+index+') a').addClass('selected');

        $.each(dataTd, function() {
            var td = $(this);
            var html = td.data(choosenData);

            if (td.find('a').length !== 0) {
                td.find('a').html(html);
            } else {
                td.html(html);
            }
        });
    });


    var teamsTable = $('.tournaments-teams-js');
    var gamesTable = $('.tournaments-games-js');

    if ( (teamsTable.length !== 0) && (gamesTable.length !== 0) ) {
        var game = gamesTable.find('[data-team1], [data-team2]');
        var team = teamsTable.find('tr');

        game.on({
            'mouseover': function() {
                var elem = $(this);
                var team1 = elem.data('team1');
                var team2 = elem.data('team2');

                $.each(team, function() {
                    var row = $(this);

                    if ( (row.data('team') === team1) || (row.data('team') === team2) ) {
                        row.addClass('hover');
                    }
                });
            },
            'mouseout': function() {
                team.removeClass('hover');
            }
        });

        team.on({
            'mouseover': function() {
                var elem = $(this);
                var team = elem.data('team');

                $.each(game, function() {
                    var row = $(this);

                    if ( (row.data('team1') === team) || (row.data('team2') === team) ) {
                        row.addClass('hover');
                    }
                });
            },
            'mouseout': function() {
                game.removeClass('hover');
            }
        });
    }

    /* Обратный отсчет лайва (start) */
    var counter = $('.live-counter-js');

    if (counter.length > 0) {
        var count = 60;
        var liveCounterTimer = null;

        counter.on('click', function() {
            location.reload();
        });

        spb_scripts.livePageReloadTimer = function() {
            count = count - 1;
            if (count <= 0) {
                clearInterval(liveCounterTimer);
                location.reload();
            } else {
                counter.text(count);
            }
        };

        liveCounterTimer = setInterval(spb_scripts.livePageReloadTimer, 1000);
    }
    /* Обратный отсчет лайва (end) */


    /* Движение между турами (start) */
    var pairBlock = $('.pair-js');
    var prevNextTour = $('.prev-tour-js, .next-tour-js');
    var prevElem = undefined;
    var touchStartPos = 0;

    function checkExistsFinalAndThirdPlaceMatchForPrevTour(prevTour, team0id, team1id, team2id, team3id) {
        var prevPrevTour = prevTour.prev('.tour-js');
        if (prevPrevTour.length !== 0) {
            var prevTeam0 = prevTour.find('div[data-team="'+team0id+'"]').length;
            var prevTeam1 = prevTour.find('div[data-team="'+team1id+'"]').length;
            var prevTeam2 = prevTour.find('div[data-team="'+team2id+'"]').length;
            var prevTeam3 = prevTour.find('div[data-team="'+team3id+'"]').length;

            var prevPrevTeam0 = prevPrevTour.find('div[data-team="'+team0id+'"]').length;
            var prevPrevTeam1 = prevPrevTour.find('div[data-team="'+team1id+'"]').length;
            var prevPrevTeam2 = prevPrevTour.find('div[data-team="'+team2id+'"]').length;
            var prevPrevTeam3 = prevPrevTour.find('div[data-team="'+team3id+'"]').length;

            var count_prev_teams = (prevTeam0 + prevTeam1 + prevTeam2 + prevTeam3);
            var count_prev_prev_teams = (prevPrevTeam0 + prevPrevTeam1 + prevPrevTeam2 + prevPrevTeam3);

            if (count_prev_teams == 2 && count_prev_prev_teams == 2) {
                if (
                    (prevTeam0 != prevPrevTeam0) &&
                    (prevTeam1 != prevPrevTeam1) &&
                    (prevTeam2 != prevPrevTeam2) &&
                    (prevTeam3 != prevPrevTeam3)
                ) {
                    return true;
                }
            }
        }
        return false;
    }

    function checkExistsFinalAndThirdPlaceMatchForNextTour(nextTour, team0id, team1id, team2id, team3id) {
        if (team2id != 0) {
            return false;
        }
        if (team3id != 0) {
            return false;
        }

        var nextNextTour = nextTour.next('.tour-js');
        var nextTeam0 = nextTour.find('div[data-team="'+team0id+'"]').length;
        var nextTeam1 = nextTour.find('div[data-team="'+team1id+'"]').length;

        var nextNextTeam0 = nextNextTour.find('div[data-team="'+team0id+'"]').length;
        var nextNextTeam1 = nextNextTour.find('div[data-team="'+team1id+'"]').length;

        if (nextTeam0 == 0 && nextTeam1 == 0 && nextNextTeam0 == 1 && nextNextTeam1 == 1) {
            return true;
        }
        return false;
    }

    function mouseover(elem) {
        var team0id = elem.find('.b-tournament__pairborders').eq(0).data('team0');
        var team1id = elem.find('.b-tournament__pairborders').eq(0).data('team1');
        var team2id = elem.find('.b-tournament__pairborders').eq(0).data('team2');
        var team3id = elem.find('.b-tournament__pairborders').eq(0).data('team3');
        var tour = elem.closest('.tour-js');
        var nextTour = tour.next('.tour-js');
        var prevTour = tour.prev('.tour-js');

        // не показываем кнопку если нет следующего/предыдущего тура
        if (
            (prevTour.find('div[data-team="'+team0id+'"]').length !== 0) ||
            (prevTour.find('div[data-team="'+team1id+'"]').length !== 0) ||
            (prevTour.find('div[data-team="'+team2id+'"]').length !== 0) ||
            (prevTour.find('div[data-team="'+team3id+'"]').length !== 0)
        ){
            elem.find('.prev-tour-js').css('display', 'block');
        }

        if (nextTour.length !== 0) {
            elem.find('.next-tour-js').css('display', 'block');
        }

        $('.b-onlines-box__item').removeClass('b-onlines-box__item_type_hover');
        elem.find('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');

        nextTour.find('div[data-team="'+team0id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        nextTour.find('div[data-team="'+team1id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        nextTour.find('div[data-team="'+team2id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        nextTour.find('div[data-team="'+team3id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');

        if (checkExistsFinalAndThirdPlaceMatchForNextTour(nextTour, team0id, team1id, team2id, team3id)) {
            var nextNextTour = nextTour.next('.tour-js');
            nextNextTour.find('div[data-team="' + team0id + '"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
            nextNextTour.find('div[data-team="' + team1id + '"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
            nextNextTour.find('div[data-team="' + team2id + '"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
            nextNextTour.find('div[data-team="' + team3id + '"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        }
        prevTour.find('div[data-team="'+team0id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        prevTour.find('div[data-team="'+team1id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        prevTour.find('div[data-team="'+team2id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        prevTour.find('div[data-team="'+team3id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');

        // Для случаев когда есть Финал и Матч за 3 место
        if (checkExistsFinalAndThirdPlaceMatchForPrevTour(prevTour, team0id, team1id, team2id, team3id)) {
            var prevPrevTour = prevTour.prev('.tour-js');
            prevPrevTour.find('div[data-team="'+team0id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
            prevPrevTour.find('div[data-team="'+team1id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
            prevPrevTour.find('div[data-team="'+team2id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
            prevPrevTour.find('div[data-team="'+team3id+'"]').parents('.b-onlines-box__item').addClass('b-onlines-box__item_type_hover');
        }
    }

    function mouseout(elem) {
        elem.parent().find('.prev-tour-js').css('display', 'none');
        elem.parent().find('.next-tour-js').css('display', 'none');

        $('.b-onlines-box__item').removeClass('b-onlines-box__item_type_hover');
    }

    pairBlock.on({
        'mouseover': function() {
            var elem = $(this);
            mouseover(elem);
        },
        'mouseout': function() {
            var elem = $(this);
            mouseout(elem);
        },
        'touchstart': function() {
            touchStartPos = $(window).scrollTop();
        },
        'touchend': function(e) {
            var elem = $(this);

            var swipe_distance = touchStartPos - $(window).scrollTop();
            if (swipe_distance > 5 || swipe_distance < -5) {
                // Это свайп
                mouseout(elem)
                return false;
            }

            if (prevElem) {
                if (elem.data('taped') == 1) {
                    return true;
                }
                mouseout(prevElem);
                prevElem.data('taped', 0);
            }

            mouseover(elem);

            elem.data('taped', 1);
            prevElem = elem;
            e.preventDefault();
            return false;
        }
    });

    prevNextTour.on('click touchend', function() {
        var elem = $(this);
        var btnType = elem.attr('class').match('next') !== null ? 'next' : 'prev';
        var tour = elem.closest('.tour-js');
        var nextTour = tour.next('.tour-js');
        var prevTour = tour.prev('.tour-js');
        var team0id = elem.parent().find('.b-tournament__pairborders').eq(0).data('team0');
        var team1id = elem.parent().find('.b-tournament__pairborders').eq(0).data('team1');
        var team2id = elem.parent().find('.b-tournament__pairborders').eq(0).data('team2');
        var team3id = elem.parent().find('.b-tournament__pairborders').eq(0).data('team3');
        var nextPair;
        var prevPair;

        //$('.b-onlines-box__item').removeClass('b-onlines-box__item_type_checked').parents('.b-tournament__pairborders').removeClass('b-tournament__pairborders_type_blinked');
        $('.b-onlines-box__item').parents('.b-tournament__pairborders').removeClass('b-tournament__pairborders_type_blinked');

        if (nextTour.find('div[data-team="'+team0id+'"]').length !== 0) {
            nextPair = nextTour.find('div[data-team="'+team0id+'"]');
        } else if (nextTour.find('div[data-team="'+team1id+'"]').length !== 0) {
            nextPair = nextTour.find('div[data-team="'+team1id+'"]');
        } else if (nextTour.find('div[data-team="'+team2id+'"]').length !== 0) {
            nextPair = nextTour.find('div[data-team="'+team2id+'"]');
        } else if (nextTour.find('div[data-team="'+team3id+'"]').length !== 0) {
            nextPair = nextTour.find('div[data-team="'+team3id+'"]');
        }

        if (prevTour.find('div[data-team="'+team0id+'"]').length !== 0) {
            prevPair = prevTour.find('div[data-team="'+team0id+'"]');
        } else if (prevTour.find('div[data-team="'+team1id+'"]').length !== 0) {
            prevPair = prevTour.find('div[data-team="'+team1id+'"]');
        } else if (prevTour.find('div[data-team="'+team2id+'"]').length !== 0) {
            prevPair = prevTour.find('div[data-team="'+team2id+'"]');
        } else if (prevTour.find('div[data-team="'+team3id+'"]').length !== 0) {
            prevPair = prevTour.find('div[data-team="'+team3id+'"]');
        }

        var scroll_top = 0;
        if (btnType === 'next') {
            if (nextPair === undefined) {
                if (checkExistsFinalAndThirdPlaceMatchForNextTour(nextTour, team0id, team1id, team2id, team3id)) {
                    var nextNextTour = nextTour.next('.tour-js');
                    scroll_top = nextNextTour.find('div[data-team="' + team0id + '"]').eq(0).offset().top - 25;
                    nextNextTour.find('div[data-team="' + team0id + '"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                    nextNextTour.find('div[data-team="' + team1id + '"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                    nextNextTour.find('div[data-team="' + team2id + '"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                    nextNextTour.find('div[data-team="' + team3id + '"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                }
            } else if (nextPair.length !== 0) {
                scroll_top = nextPair.parents('.b-onlines-box__item').eq(0).offset().top - 25;
                nextTour.find('div[data-team="'+team0id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                nextTour.find('div[data-team="'+team1id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                nextTour.find('div[data-team="'+team2id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                nextTour.find('div[data-team="'+team3id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
            }
        } else {
            if (prevPair.length !== 0) {
                scroll_top = prevPair.parents('.b-onlines-box__item').eq(0).offset().top - 25;
                if (checkExistsFinalAndThirdPlaceMatchForPrevTour(prevTour, team0id, team1id, team2id, team3id)) {
                    var prevPrevTour = prevTour.prev('.tour-js');
                    scroll_top = prevPrevTour.find('.b-onlines-box__item').eq(0).offset().top - 25;

                    prevPrevTour.find('div[data-team="'+team0id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                    prevPrevTour.find('div[data-team="'+team1id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                    prevPrevTour.find('div[data-team="'+team2id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                    prevPrevTour.find('div[data-team="'+team3id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                }

                prevTour.find('div[data-team="'+team0id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                prevTour.find('div[data-team="'+team1id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                prevTour.find('div[data-team="'+team2id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
                prevTour.find('div[data-team="'+team3id+'"]').parents('.b-tournament__pairborders').eq(0).addClass('b-tournament__pairborders_type_blinked');
            }
        }
        /* Чтобы страница всегда скролилась
         var onScreen = prevPair.isOnScreen();
         if (!onScreen) {
         */
        $('html, body').animate({
            scrollTop: scroll_top
        }, 200);
        //} */

        /*
        nextTour.find('div[data-team="'+team0id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        nextTour.find('div[data-team="'+team1id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        nextTour.find('div[data-team="'+team2id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        nextTour.find('div[data-team="'+team3id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        prevTour.find('div[data-team="'+team0id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        prevTour.find('div[data-team="'+team1id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        prevTour.find('div[data-team="'+team2id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');
        prevTour.find('div[data-team="'+team3id+'"]').parents('.b-onlines-box__item').eq(0).addClass('b-onlines-box__item_type_checked');

        elem.parent().find('.b-onlines-box__item').addClass('b-onlines-box__item_type_checked');
        */
    });
    /* Движение между турами (end) */
});

$.fn.isOnScreen = function() {
    var win = $(window);
    var bounds = this.offset();
    var viewport = {
        top: win.scrollTop(),
        left: win.scrollLeft()
    };

    viewport.right = viewport.left + win.width();
    viewport.bottom = viewport.top + win.height();

    bounds.right = bounds.left + this.outerWidth();
    bounds.bottom = bounds.top + this.outerHeight();

    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));

};

spb_scripts.tournament = {

    live: {
        settings: {
            timer: null
        },

        init: function(){
            var self = spb_scripts.tournament.live;
            self.settings.lastHash = '';
            if(!self.settings.live){
                return false;
            }

            self.$elems = {};
            self.$elems.$results = $('#updateJsonTable');

            self.intervalInit();
        },

        intervalInit: function(){
            var self = spb_scripts.tournament.live;
            self.settings.timer = setInterval(self.ajaxUpdate, self.settings.update_time*1000);
        },

        ajaxUpdate: function(){
            var self = spb_scripts.tournament.live;

            $.ajax({
                type: "GET",
                dataType: 'json',
                cache: true,
                url: self.settings.json_url + '?tour=' + self.settings.tour + '&hash=' + self.settings.lastHash,
                success: self.ajaxSuccess,
                error: self.ajaxFailure
            });
        },

        ajaxSuccess: function(data){
            var self = spb_scripts.tournament.live;

            if(typeof data.content_html !== 'undefined'){
                self.renderResults(data.content_html);
            }

            if(data.hash) self.settings.lastHash = data.hash;

            if (!data.live) {
                clearInterval(self.settings.timer);
            }
        },

        ajaxFailure: function(data){
            var self = spb_scripts.tournament.live;
            clearInterval(self.settings.timer);
            self.init();
        },

        renderResults: function(data){;
            var self = spb_scripts.tournament.live;
            self.$elems.$results.html(data);

        },

    }
};


(function($) {

    // Maximum redraw attempts when fitting labels within the plot

    var REDRAW_ATTEMPTS = 10;

    // Factor by which to shrink the pie when fitting labels within the plot

    var REDRAW_SHRINK = 0.95;

    function init(plot) {

        var canvas = null,
            target = null,
            options = null,
            maxRadius = null,
            centerLeft = null,
            centerTop = null,
            processed = false,
            ctx = null;

        // interactive variables

        var highlights = [];

        // add hook to determine if pie plugin in enabled, and then perform necessary operations

        plot.hooks.processOptions.push(function(plot, options) {
            if (options.series.pie.show) {

                options.grid.show = false;

                // set labels.show

                if (options.series.pie.label.show == "auto") {
                    if (options.legend.show) {
                        options.series.pie.label.show = false;
                    } else {
                        options.series.pie.label.show = true;
                    }
                }

                // set radius

                if (options.series.pie.radius == "auto") {
                    if (options.series.pie.label.show) {
                        options.series.pie.radius = 3/4;
                    } else {
                        options.series.pie.radius = 1;
                    }
                }

                // ensure sane tilt

                if (options.series.pie.tilt > 1) {
                    options.series.pie.tilt = 1;
                } else if (options.series.pie.tilt < 0) {
                    options.series.pie.tilt = 0;
                }
            }
        });

        plot.hooks.bindEvents.push(function(plot, eventHolder) {
            var options = plot.getOptions();
            if (options.series.pie.show) {
                if (options.grid.hoverable) {
                    eventHolder.unbind("mousemove").mousemove(onMouseMove);
                }
                if (options.grid.clickable) {
                    eventHolder.unbind("click").click(onClick);
                }
            }
        });

        plot.hooks.processDatapoints.push(function(plot, series, data, datapoints) {
            var options = plot.getOptions();
            if (options.series.pie.show) {
                processDatapoints(plot, series, data, datapoints);
            }
        });

        plot.hooks.drawOverlay.push(function(plot, octx) {
            var options = plot.getOptions();
            if (options.series.pie.show) {
                drawOverlay(plot, octx);
            }
        });

        plot.hooks.draw.push(function(plot, newCtx) {
            var options = plot.getOptions();
            if (options.series.pie.show) {
                draw(plot, newCtx);
            }
        });

        function processDatapoints(plot, series, datapoints) {
            if (!processed)	{
                processed = true;
                canvas = plot.getCanvas();
                target = $(canvas).parent();
                options = plot.getOptions();
                plot.setData(combine(plot.getData()));
            }
        }

        function combine(data) {

            var total = 0,
                combined = 0,
                numCombined = 0,
                color = options.series.pie.combine.color,
                newdata = [];

            // Fix up the raw data from Flot, ensuring the data is numeric

            for (var i = 0; i < data.length; ++i) {

                var value = data[i].data;

                // If the data is an array, we'll assume that it's a standard
                // Flot x-y pair, and are concerned only with the second value.

                // Note how we use the original array, rather than creating a
                // new one; this is more efficient and preserves any extra data
                // that the user may have stored in higher indexes.

                if ($.isArray(value) && value.length == 1) {
                    value = value[0];
                }

                if ($.isArray(value)) {
                    // Equivalent to $.isNumeric() but compatible with jQuery < 1.7
                    if (!isNaN(parseFloat(value[1])) && isFinite(value[1])) {
                        value[1] = +value[1];
                    } else {
                        value[1] = 0;
                    }
                } else if (!isNaN(parseFloat(value)) && isFinite(value)) {
                    value = [1, +value];
                } else {
                    value = [1, 0];
                }

                data[i].data = [value];
            }

            // Sum up all the slices, so we can calculate percentages for each

            for (var i = 0; i < data.length; ++i) {
                total += data[i].data[0][1];
            }

            // Count the number of slices with percentages below the combine
            // threshold; if it turns out to be just one, we won't combine.

            for (var i = 0; i < data.length; ++i) {
                var value = data[i].data[0][1];
                if (value / total <= options.series.pie.combine.threshold) {
                    combined += value;
                    numCombined++;
                    if (!color) {
                        color = data[i].color;
                    }
                }
            }

            for (var i = 0; i < data.length; ++i) {
                var value = data[i].data[0][1];
                if (numCombined < 2 || value / total > options.series.pie.combine.threshold) {
                    newdata.push({
                        data: [[1, value]],
                        color: data[i].color,
                        label: data[i].label,
                        angle: value * Math.PI * 2 / total,
                        percent: value / (total / 100)
                    });
                }
            }

            if (numCombined > 1) {
                newdata.push({
                    data: [[1, combined]],
                    color: color,
                    label: options.series.pie.combine.label,
                    angle: combined * Math.PI * 2 / total,
                    percent: combined / (total / 100)
                });
            }

            return newdata;
        }

        function draw(plot, newCtx) {

            if (!target) {
                return; // if no series were passed
            }

            var canvasWidth = plot.getPlaceholder().width(),
                canvasHeight = plot.getPlaceholder().height(),
                legendWidth = target.children().filter(".legend").children().width() || 0;

            ctx = newCtx;

            // WARNING: HACK! REWRITE THIS CODE AS SOON AS POSSIBLE!

            // When combining smaller slices into an 'other' slice, we need to
            // add a new series.  Since Flot gives plugins no way to modify the
            // list of series, the pie plugin uses a hack where the first call
            // to processDatapoints results in a call to setData with the new
            // list of series, then subsequent processDatapoints do nothing.

            // The plugin-global 'processed' flag is used to control this hack;
            // it starts out false, and is set to true after the first call to
            // processDatapoints.

            // Unfortunately this turns future setData calls into no-ops; they
            // call processDatapoints, the flag is true, and nothing happens.

            // To fix this we'll set the flag back to false here in draw, when
            // all series have been processed, so the next sequence of calls to
            // processDatapoints once again starts out with a slice-combine.
            // This is really a hack; in 0.9 we need to give plugins a proper
            // way to modify series before any processing begins.

            processed = false;

            // calculate maximum radius and center point

            maxRadius =  Math.min(canvasWidth, canvasHeight / options.series.pie.tilt) / 2;
            centerTop = canvasHeight / 2 + options.series.pie.offset.top;
            centerLeft = canvasWidth / 2;

            if (options.series.pie.offset.left == "auto") {
                if (options.legend.position.match("w")) {
                    centerLeft += legendWidth / 2;
                } else {
                    centerLeft -= legendWidth / 2;
                }
                if (centerLeft < maxRadius) {
                    centerLeft = maxRadius;
                } else if (centerLeft > canvasWidth - maxRadius) {
                    centerLeft = canvasWidth - maxRadius;
                }
            } else {
                centerLeft += options.series.pie.offset.left;
            }

            var slices = plot.getData(),
                attempts = 0;

            // Keep shrinking the pie's radius until drawPie returns true,
            // indicating that all the labels fit, or we try too many times.

            do {
                if (attempts > 0) {
                    maxRadius *= REDRAW_SHRINK;
                }
                attempts += 1;
                clear();
                if (options.series.pie.tilt <= 0.8) {
                    drawShadow();
                }
            } while (!drawPie() && attempts < REDRAW_ATTEMPTS)

            if (attempts >= REDRAW_ATTEMPTS) {
                clear();
                target.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>");
            }

            if (plot.setSeries && plot.insertLegend) {
                plot.setSeries(slices);
                plot.insertLegend();
            }

            // we're actually done at this point, just defining internal functions at this point

            function clear() {
                ctx.clearRect(0, 0, canvasWidth, canvasHeight);
                target.children().filter(".pieLabel, .pieLabelBackground").remove();
            }

            function drawShadow() {

                var shadowLeft = options.series.pie.shadow.left;
                var shadowTop = options.series.pie.shadow.top;
                var edge = 10;
                var alpha = options.series.pie.shadow.alpha;
                var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

                if (radius >= canvasWidth / 2 - shadowLeft || radius * options.series.pie.tilt >= canvasHeight / 2 - shadowTop || radius <= edge) {
                    return;	// shadow would be outside canvas, so don't draw it
                }

                ctx.save();
                ctx.translate(shadowLeft,shadowTop);
                ctx.globalAlpha = alpha;
                ctx.fillStyle = "#000";

                // center and rotate to starting position

                ctx.translate(centerLeft,centerTop);
                ctx.scale(1, options.series.pie.tilt);

                //radius -= edge;

                for (var i = 1; i <= edge; i++) {
                    ctx.beginPath();
                    ctx.arc(0, 0, radius, 0, Math.PI * 2, false);
                    ctx.fill();
                    radius -= i;
                }

                ctx.restore();
            }

            function drawPie() {

                var startAngle = Math.PI * options.series.pie.startAngle;
                var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

                // center and rotate to starting position

                ctx.save();
                ctx.translate(centerLeft,centerTop);
                ctx.scale(1, options.series.pie.tilt);
                //ctx.rotate(startAngle); // start at top; -- This doesn't work properly in Opera

                // draw slices

                ctx.save();
                var currentAngle = startAngle;
                for (var i = 0; i < slices.length; ++i) {
                    slices[i].startAngle = currentAngle;
                    drawSlice(slices[i].angle, slices[i].color, true);
                }
                ctx.restore();

                // draw slice outlines

                if (options.series.pie.stroke.width > 0) {
                    ctx.save();
                    ctx.lineWidth = options.series.pie.stroke.width;
                    currentAngle = startAngle;
                    for (var i = 0; i < slices.length; ++i) {
                        drawSlice(slices[i].angle, options.series.pie.stroke.color, false);
                    }
                    ctx.restore();
                }

                // draw donut hole

                drawDonutHole(ctx);

                ctx.restore();

                // Draw the labels, returning true if they fit within the plot

                if (options.series.pie.label.show) {
                    return drawLabels();
                } else return true;

                function drawSlice(angle, color, fill) {

                    if (angle <= 0 || isNaN(angle)) {
                        return;
                    }

                    if (fill) {
                        ctx.fillStyle = color;
                    } else {
                        ctx.strokeStyle = color;
                        ctx.lineJoin = "round";
                    }

                    ctx.beginPath();
                    if (Math.abs(angle - Math.PI * 2) > 0.000000001) {
                        ctx.moveTo(0, 0); // Center of the pie
                    }

                    //ctx.arc(0, 0, radius, 0, angle, false); // This doesn't work properly in Opera
                    ctx.arc(0, 0, radius,currentAngle, currentAngle + angle / 2, false);
                    ctx.arc(0, 0, radius,currentAngle + angle / 2, currentAngle + angle, false);
                    ctx.closePath();
                    //ctx.rotate(angle); // This doesn't work properly in Opera
                    currentAngle += angle;

                    if (fill) {
                        ctx.fill();
                    } else {
                        ctx.stroke();
                    }
                }

                function drawLabels() {

                    var currentAngle = startAngle;
                    var radius = options.series.pie.label.radius > 1 ? options.series.pie.label.radius : maxRadius * options.series.pie.label.radius;

                    for (var i = 0; i < slices.length; ++i) {
                        if (slices[i].percent >= options.series.pie.label.threshold * 100) {
                            if (!drawLabel(slices[i], currentAngle, i)) {
                                return false;
                            }
                        }
                        currentAngle += slices[i].angle;
                    }

                    return true;

                    function drawLabel(slice, startAngle, index) {

                        if (slice.data[0][1] == 0) {
                            return true;
                        }

                        // format label text

                        var lf = options.legend.labelFormatter, text, plf = options.series.pie.label.formatter;

                        if (lf) {
                            text = lf(slice.label, slice);
                        } else {
                            text = slice.label;
                        }

                        if (plf) {
                            text = plf(text, slice);
                        }

                        var halfAngle = ((startAngle + slice.angle) + startAngle) / 2;
                        var x = centerLeft + Math.round(Math.cos(halfAngle) * radius);
                        var y = centerTop + Math.round(Math.sin(halfAngle) * radius) * options.series.pie.tilt;

                        var html = "<span class='pieLabel' id='pieLabel" + index + "' style='position:absolute;top:" + y + "px;left:" + x + "px;'>" + text + "</span>";
                        target.append(html);

                        var label = target.children("#pieLabel" + index);
                        var labelTop = (y - label.height() / 2);
                        var labelLeft = (x - label.width() / 2);

                        label.css("top", labelTop);
                        label.css("left", labelLeft);

                        // check to make sure that the label is not outside the canvas

                        if (0 - labelTop > 0 || 0 - labelLeft > 0 || canvasHeight - (labelTop + label.height()) < 0 || canvasWidth - (labelLeft + label.width()) < 0) {
                            return false;
                        }

                        if (options.series.pie.label.background.opacity != 0) {

                            // put in the transparent background separately to avoid blended labels and label boxes

                            var c = options.series.pie.label.background.color;

                            if (c == null) {
                                c = slice.color;
                            }

                            var pos = "top:" + labelTop + "px;left:" + labelLeft + "px;";
                            $("<div class='pieLabelBackground' style='position:absolute;width:" + label.width() + "px;height:" + label.height() + "px;" + pos + "background-color:" + c + ";'></div>")
                                .css("opacity", options.series.pie.label.background.opacity)
                                .insertBefore(label);
                        }

                        return true;
                    } // end individual label function
                } // end drawLabels function
            } // end drawPie function
        } // end draw function

        // Placed here because it needs to be accessed from multiple locations

        function drawDonutHole(layer) {
            if (options.series.pie.innerRadius > 0) {

                // subtract the center

                layer.save();
                var innerRadius = options.series.pie.innerRadius > 1 ? options.series.pie.innerRadius : maxRadius * options.series.pie.innerRadius;
                layer.globalCompositeOperation = "destination-out"; // this does not work with excanvas, but it will fall back to using the stroke color
                layer.beginPath();
                layer.fillStyle = options.series.pie.stroke.color;
                layer.arc(0, 0, innerRadius, 0, Math.PI * 2, false);
                layer.fill();
                layer.closePath();
                layer.restore();

                // add inner stroke

                layer.save();
                layer.beginPath();
                layer.strokeStyle = options.series.pie.stroke.color;
                layer.arc(0, 0, innerRadius, 0, Math.PI * 2, false);
                layer.stroke();
                layer.closePath();
                layer.restore();

                // TODO: add extra shadow inside hole (with a mask) if the pie is tilted.
            }
        }

        //-- Additional Interactive related functions --

        function isPointInPoly(poly, pt) {
            for(var c = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i)
                ((poly[i][1] <= pt[1] && pt[1] < poly[j][1]) || (poly[j][1] <= pt[1] && pt[1]< poly[i][1]))
                    && (pt[0] < (poly[j][0] - poly[i][0]) * (pt[1] - poly[i][1]) / (poly[j][1] - poly[i][1]) + poly[i][0])
                && (c = !c);
            return c;
        }

        function findNearbySlice(mouseX, mouseY) {

            var slices = plot.getData(),
                options = plot.getOptions(),
                radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius,
                x, y;

            for (var i = 0; i < slices.length; ++i) {

                var s = slices[i];

                if (s.pie.show) {

                    ctx.save();
                    ctx.beginPath();
                    ctx.moveTo(0, 0); // Center of the pie
                    //ctx.scale(1, options.series.pie.tilt);	// this actually seems to break everything when here.
                    ctx.arc(0, 0, radius, s.startAngle, s.startAngle + s.angle / 2, false);
                    ctx.arc(0, 0, radius, s.startAngle + s.angle / 2, s.startAngle + s.angle, false);
                    ctx.closePath();
                    x = mouseX - centerLeft;
                    y = mouseY - centerTop;

                    if (ctx.isPointInPath) {
                        if (ctx.isPointInPath(mouseX - centerLeft, mouseY - centerTop)) {
                            ctx.restore();
                            return {
                                datapoint: [s.percent, s.data],
                                dataIndex: 0,
                                series: s,
                                seriesIndex: i
                            };
                        }
                    } else {

                        // excanvas for IE doesn;t support isPointInPath, this is a workaround.

                        var p1X = radius * Math.cos(s.startAngle),
                            p1Y = radius * Math.sin(s.startAngle),
                            p2X = radius * Math.cos(s.startAngle + s.angle / 4),
                            p2Y = radius * Math.sin(s.startAngle + s.angle / 4),
                            p3X = radius * Math.cos(s.startAngle + s.angle / 2),
                            p3Y = radius * Math.sin(s.startAngle + s.angle / 2),
                            p4X = radius * Math.cos(s.startAngle + s.angle / 1.5),
                            p4Y = radius * Math.sin(s.startAngle + s.angle / 1.5),
                            p5X = radius * Math.cos(s.startAngle + s.angle),
                            p5Y = radius * Math.sin(s.startAngle + s.angle),
                            arrPoly = [[0, 0], [p1X, p1Y], [p2X, p2Y], [p3X, p3Y], [p4X, p4Y], [p5X, p5Y]],
                            arrPoint = [x, y];

                        // TODO: perhaps do some mathmatical trickery here with the Y-coordinate to compensate for pie tilt?

                        if (isPointInPoly(arrPoly, arrPoint)) {
                            ctx.restore();
                            return {
                                datapoint: [s.percent, s.data],
                                dataIndex: 0,
                                series: s,
                                seriesIndex: i
                            };
                        }
                    }

                    ctx.restore();
                }
            }

            return null;
        }

        function onMouseMove(e) {
            triggerClickHoverEvent("plothover", e);
        }

        function onClick(e) {
            triggerClickHoverEvent("plotclick", e);
        }

        // trigger click or hover event (they send the same parameters so we share their code)

        function triggerClickHoverEvent(eventname, e) {

            var offset = plot.offset();
            var canvasX = parseInt(e.pageX - offset.left);
            var canvasY =  parseInt(e.pageY - offset.top);
            var item = findNearbySlice(canvasX, canvasY);

            if (options.grid.autoHighlight) {

                // clear auto-highlights

                for (var i = 0; i < highlights.length; ++i) {
                    var h = highlights[i];
                    if (h.auto == eventname && !(item && h.series == item.series)) {
                        unhighlight(h.series);
                    }
                }
            }

            // highlight the slice

            if (item) {
                highlight(item.series, eventname);
            }

            // trigger any hover bind events

            var pos = { pageX: e.pageX, pageY: e.pageY };
            target.trigger(eventname, [pos, item]);
        }

        function highlight(s, auto) {
            //if (typeof s == "number") {
            //	s = series[s];
            //}

            var i = indexOfHighlight(s);

            if (i == -1) {
                highlights.push({ series: s, auto: auto });
                plot.triggerRedrawOverlay();
            } else if (!auto) {
                highlights[i].auto = false;
            }
        }

        function unhighlight(s) {
            if (s == null) {
                highlights = [];
                plot.triggerRedrawOverlay();
            }

            //if (typeof s == "number") {
            //	s = series[s];
            //}

            var i = indexOfHighlight(s);

            if (i != -1) {
                highlights.splice(i, 1);
                plot.triggerRedrawOverlay();
            }
        }

        function indexOfHighlight(s) {
            for (var i = 0; i < highlights.length; ++i) {
                var h = highlights[i];
                if (h.series == s)
                    return i;
            }
            return -1;
        }

        function drawOverlay(plot, octx) {

            var options = plot.getOptions();

            var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

            octx.save();
            octx.translate(centerLeft, centerTop);
            octx.scale(1, options.series.pie.tilt);

            for (var i = 0; i < highlights.length; ++i) {
                drawHighlight(highlights[i].series);
            }

            drawDonutHole(octx);

            octx.restore();

            function drawHighlight(series) {

                if (series.angle <= 0 || isNaN(series.angle)) {
                    return;
                }

                //octx.fillStyle = parseColor(options.series.pie.highlight.color).scale(null, null, null, options.series.pie.highlight.opacity).toString();
                octx.fillStyle = "rgba(255, 255, 255, " + options.series.pie.highlight.opacity + ")"; // this is temporary until we have access to parseColor
                octx.beginPath();
                if (Math.abs(series.angle - Math.PI * 2) > 0.000000001) {
                    octx.moveTo(0, 0); // Center of the pie
                }
                octx.arc(0, 0, radius, series.startAngle, series.startAngle + series.angle / 2, false);
                octx.arc(0, 0, radius, series.startAngle + series.angle / 2, series.startAngle + series.angle, false);
                octx.closePath();
                octx.fill();
            }
        }
    } // end init (plugin body)

    // define pie specific options and their default values

    var options = {
        series: {
            pie: {
                show: false,
                radius: "auto",	// actual radius of the visible pie (based on full calculated radius if <=1, or hard pixel value)
                innerRadius: 0, /* for donut */
                startAngle: 3/2,
                tilt: 1,
                shadow: {
                    left: 5,	// shadow left offset
                    top: 15,	// shadow top offset
                    alpha: 0.02	// shadow alpha
                },
                offset: {
                    top: 0,
                    left: "auto"
                },
                stroke: {
                    color: "#fff",
                    width: 1
                },
                label: {
                    show: "auto",
                    formatter: function(label, slice) {
                        return "<div style='font-size:x-small;text-align:center;padding:2px;color:" + slice.color + ";'>" + label + "<br/>" + Math.round(slice.percent) + "%</div>";
                    },	// formatter function
                    radius: 1,	// radius at which to place the labels (based on full calculated radius if <=1, or hard pixel value)
                    background: {
                        color: null,
                        opacity: 0
                    },
                    threshold: 0	// percentage at which to hide the label (i.e. the slice is too narrow)
                },
                combine: {
                    threshold: -1,	// percentage at which to combine little slices into one larger slice
                    color: null,	// color to give the new slice (auto-generated if null)
                    label: "Other"	// label to give the new slice
                },
                highlight: {
                    //color: "#fff",		// will add this functionality once parseColor is available
                    opacity: 0.5
                }
            }
        }
    };

    $.plot.plugins.push({
        init: init,
        options: options,
        name: "pie",
        version: "1.1"
    });

})(jQuery);

var spbc = spbc || {};

spbc.s4 = function () {
    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
};

spbc.uuid = function () {
    return spbc.s4() + spbc.s4() + spbc.s4() + spbc.s4() + spbc.s4() + spbc.s4() + spbc.s4() + spbc.s4();
};

spbc.getUuid = function () {
    var spbc_uuid = spbc.getCookie('spbc_uuid');
    if (!spbc_uuid || !spbc_uuid.match(/^[0-9a-f]{32}$/)) {
        spbc_uuid = spbc.uuid();

        var exp = new Date();
        exp = new Date(exp.getFullYear() + 50, exp.getMonth(), exp.getDate());

        document.cookie = 'spbc_uuid=' + spbc_uuid + '; expires=' + exp.toUTCString() + '; path=/';

        var url = 'https://matchtv.ru';
        if (typeof matchtvDomain !== 'undefined') {
            url = matchtvDomain;
        }
        url += '/set-cookie';

        jQuery.ajax({
            url: url,
            type: 'post',
            xhrFields: {
                withCredentials: true
            },
            data: {
                name: 'spbc_uuid',
                value: spbc_uuid,
                expire: Math.floor(exp.getTime() / 1000)
            }
        });
    }
    return spbc_uuid;
};

spbc.getCookie = function (cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
};

spbc.go = function () {
    spbc.getUuid();
};

$(document).ready(function() {
    if ($('.render-transfer-graphs-js').length < 1) {
        return false;
    }

    function sortLines(lines) {
        lines.sort(function(a,b) {
            if (parseInt($(a).data('summ')) > parseInt($(b).data('summ'))) {
                return -1;
            } else if (parseInt($(a).data('summ')) < parseInt($(b).data('summ'))) {
                return 1;
            } else {
                return 0;
            }
        });
        return lines;
    }

    function construct_graphs(wrap, classname){
        var lines = sortLines( wrap.find(classname) ),
            etalon = parseInt($(lines[0]).data('summ'));

        for (var i = 0; i < lines.length; i++) {
            if (i === 0) {
                $(lines[0]).find('.graph_left_part').width('100%');
                $(lines[0]).find('.graph_right_part').width(0);
            } else {
                var value = parseInt($(lines[i]).data('summ')),
                    itemWidth = Math.round((value / etalon) * 100);

                $(lines[i]).find('.graph_left_part').width(itemWidth + '%');
                $(lines[i]).find('.graph_right_part').width(parseInt(100 - itemWidth) + '%');
            }
        }
    }

    $('.render-transfer-graphs-js').each(function() {
        construct_graphs($(this), '.transfer_graph_line');
        construct_graphs($(this), '.transfer_graph_line2');
    });
});
var spb_scripts = spb_scripts || {};

/* helpers (start) */
spb_scripts.search = {

	conf: {
		types:[
            {type: 'search_all', title: 'Искать по всем материалам'},
            {type: 'rubric', title: 'Рубрики'},
            {type: 'turnir', title: 'Турниры'},
            {type: 'people', title: 'Люди'},
            {type: 'clubs', title: 'Клубы'}
        ],
        adapters: [{
            highlight: true,
            hint: false,
            minLength: 1
		}],
        searchId: '#smart_search'
	},

	init: function () {
		var self = spb_scripts.search;
		self.initAdapters();
		self.initSearch();
	},

	initAdapters: function () {
		var self = spb_scripts.search;

	    var spawnHounds = (function (types) {
	        var hounds = {};
	        var indexType = $.map(types, function (item) {
	            return item.type
	        });
	        $.each(indexType, function (i, type) {
	            hounds[type] = new Bloodhound({
	                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('title'),
	                queryTokenizer: Bloodhound.tokenizers.whitespace,
	                remote: {
						url: '/smart_search_proto/ajax/%QUERY',
						wildcard: '%QUERY',
	                    filter: function (list) {
	                        return $.map(list, function (row) {
	                            if (row.type === type) {
	                                return row;
	                            }
	                        })
	                    }
	                }
	            });
	        });
	
	        return hounds;
	    })(self.conf.types);

	    $.each(self.conf.types, function (i, type) {
	        spawnHounds[type.type].initialize();
	
	        self.conf.adapters.push({
	            name: 'type',
	            displayKey: 'title',
				source: spawnHounds[type.type].ttAdapter(),
				limit: 100,
				templates: {
	                header: function () {
	                    return '<div class="tt-border-top"></div>';
	                },
	                suggestion: self.templates
	            }
	        });
	    });
	},
	
	initSearch: function () {
		var self = spb_scripts.search;
		var searchInput = $(self.conf.searchId);
		var blur = $('#content > .blur');
		var updateBlurInterval;

		$("#sidebar").on('site_menu_opened', function(){
			searchInput.typeahead('close');
		});

		searchInput.typeahead.apply(searchInput, self.conf.adapters)
			.on('typeahead:selected', function (event, suggestion) {
				searchInput.trigger('search-clicked', true);
				location.href = suggestion.url;
			})
			.on('typeahead:render', function () {
				searchInput.parent().find('.tt-dataset:first .tt-suggestion').addClass('tt-cursor');
			})
			.on('typeahead:asyncreceive', function () {
				blur.show();
			})
			.on('typeahead:close', function () {
				clearInterval(updateBlurInterval);
				blur.hide();
			})
			.on('typeahead:open', function () {
				if (searchInput.val().length != 0) {
					blur.show();
				}

				updateBlurInterval = setInterval(function () {
					if (searchInput.val().length == 0) {
						blur.hide();
					}
				}, 200);
			});

		var twitterTypeahead = searchInput.closest('.twitter-typeahead');
		var searchMenu = twitterTypeahead.find('.tt-menu');

		twitterTypeahead
			.on('mouseover', '.tt-suggestion', function(event){
				twitterTypeahead.find('.tt-suggestion').removeClass('tt-cursor');
				$(this).addClass('tt-cursor');
			})
			.on('typeahead:cursorchange', function (ev, suggestion){
				$('.tt-tag').removeClass('tt-tag-hover');
				searchInput.val(searchInput.data("ttTypeahead").input.query);
			});

		searchMenu.css('max-height', window.innerHeight - 50 +'px');
		
	},
	
	templates: function (data) {
		var self = spb_scripts.search;

		if(data.global){
			return '<div><span class="tt-result">' + data.title + '</span></div>';
		}

		if(data.header){
			return '<div><span class="tt-title">' + data.title + '</span></div>';
		}

        if(data.img){
            return '<div><span class="tt-icon"><img src="' + data.img + '" alt=""></span><span class="tt-result">' + data.title + '</span></div>';
        }

        return '<div><span class="tt-icon"><i></i></span><span class="tt-result">' + data.title + '</span></div>';
	}

};
$(spb_scripts.search.init);
/*!
 * VERSION: 1.15.1
 * DATE: 2015-01-20
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},r=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},n=1e-10,a=i._internals,o=a.isSelector,h=a.isArray,l=r.prototype=i.to({},.1,{}),_=[];r.version="1.15.1",l.constructor=r,l.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.lagSmoothing=i.lagSmoothing,r.ticker=i.ticker,r.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var s,r=this.ratio,n=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in t)this.vars[s]=t[s];if(this._initted||n)if(e)this._initted=!1,n&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._time;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._time>0||n){this._initted=!1,this._init();for(var o,h=1/(1-r),l=this._firstPT;l;)o=l.s+l.c,l.c*=h,l.s=o-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,r,o,h,l,u,p,c,f=this._dirty?this.totalDuration():this._totalDuration,m=this._time,d=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,r="onComplete"),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>y||y===n)&&y!==t&&(i=!0,y>n&&(r="onReverseComplete")),this._rawPrevTime=c=!e||t||y===t?t:n)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==d||0===v&&y>0&&y!==n)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=c=!e||t||y===t?t:n)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,u=this._easeType,p=this._easePower,(1===u||3===u&&l>=.5)&&(l=1-l),3===u&&(l*=2),1===p?l*=l:2===p?l*=l*l:3===p?l*=l*l*l:4===p&&(l*=l*l*l*l),this.ratio=1===u?1-l:2===u?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),m===this._time&&!i&&g===this._cycle)return d!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=m,this._totalTime=d,this._rawPrevTime=y,this._cycle=g,a.lazyTweens.push(this),this._lazy=[t,e],void 0;this._time&&!s?this.ratio=this._ease.getRatio(this._time/v):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==m&&t>=0&&(this._active=!0),0===d&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||_))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==d||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_)),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||_)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||_),0===v&&this._rawPrevTime===n&&c!==n&&(this._rawPrevTime=0))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new r(t,e,s)},r.staggerTo=r.allTo=function(t,e,n,a,l,u,p){a=a||0;var c,f,m,d,g=n.delay||0,v=[],y=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),l.apply(p||this,u||_)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=s(t))),t=t||[],0>a&&(t=s(t),t.reverse(),a*=-1),c=t.length-1,m=0;c>=m;m++){f={};for(d in n)f[d]=n[d];f.delay=g,m===c&&l&&(f.onComplete=y),v[m]=new r(t[m],e,f),g+=a}return v},r.staggerFrom=r.allFrom=function(t,e,i,s,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,s,n,a,o)},r.staggerFromTo=r.allFromTo=function(t,e,i,s,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,s,n,a,o,h)},r.delayedCall=function(t,e,i,s,n){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:n,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var s=[],r=0,n=t._first;n;)n instanceof i?s[r++]=n:(e&&(s[r++]=n),s=s.concat(u(n,e)),r=s.length),n=n._next;return s},p=r.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};r.killAll=function(t,i,s,r){null==i&&(i=!0),null==s&&(s=!0);var n,a,o,h=p(0!=r),l=h.length,_=i&&s&&r;for(o=0;l>o;o++)a=h[o],(_||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var n,l,_,u,p,c=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=s(t)),h(t))for(u=t.length;--u>-1;)r.killChildTweensOf(t[u],e);else{n=[];for(_ in c)for(l=c[_].target.parentNode;l;)l===t&&(n=n.concat(c[_].tweens)),l=l.parentNode;for(p=n.length,u=0;p>u;u++)e&&n[u].totalTime(n[u].totalDuration()),n[u]._enabled(!1,!1)}}};var c=function(t,i,s,r){i=i!==!1,s=s!==!1,r=r!==!1;for(var n,a,o=p(r),h=i&&s&&r,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&a.paused(t)};return r.pauseAll=function(t,e,i){c(!0,t,e,i)},r.resumeAll=function(t,e,i){c(!1,t,e,i)},r.globalTimeScale=function(e){var s=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||n,s._startTime=r-(r-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,r=i.ticker.frame,s._startTime=r-(r-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,r=this.vars;for(s in r)i=r[s],h(i)&&-1!==i.join("").indexOf("{self}")&&(r[s]=this._swapSelfInParams(i));h(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,n=i._internals,a=s._internals={},o=n.isSelector,h=n.isArray,l=n.lazyTweens,_=n.lazyRender,u=[],p=_gsScope._gsDefine.globals,c=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=a.pauseCallback=function(t,e,i,s){var r=t._timeline,n=r._totalTime;!e&&this._forcingPlayhead||r._rawPrevTime===t._startTime||(r.pause(t._startTime),e&&e.apply(s||r,i||u),this._forcingPlayhead&&r.seek(n))},m=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},d=s.prototype=new e;return s.version="1.15.1",d.constructor=s,d.kill()._gc=d._forcingPlayhead=!1,d.to=function(t,e,s,r){var n=s.repeat&&p.TweenMax||i;return e?this.add(new n(t,e,s),r):this.set(t,s,r)},d.from=function(t,e,s,r){return this.add((s.repeat&&p.TweenMax||i).from(t,e,s),r)},d.fromTo=function(t,e,s,r,n){var a=r.repeat&&p.TweenMax||i;return e?this.add(a.fromTo(t,e,s,r),n):this.set(t,r,n)},d.staggerTo=function(t,e,r,n,a,h,l,_){var u,p=new s({onComplete:h,onCompleteParams:l,onCompleteScope:_,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],o(t)&&(t=m(t)),n=n||0,0>n&&(t=m(t),t.reverse(),n*=-1),u=0;t.length>u;u++)r.startAt&&(r.startAt=c(r.startAt)),p.to(t[u],e,c(r),u*n);return this.add(p,a)},d.staggerFrom=function(t,e,i,s,r,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,r,n,a,o)},d.staggerFromTo=function(t,e,i,s,r,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,r,n,a,o,h)},d.call=function(t,e,s,r){return this.add(i.delayedCall(0,t,e,s),r)},d.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,n,a=new s(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)n=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=n;return o.add(a,0),a},d.add=function(r,n,a,o){var l,_,u,p,c,f;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&h(r)){for(a=a||"normal",o=o||0,l=n,_=r.length,u=0;_>u;u++)h(p=r[u])&&(p=new s({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===a?l=p._startTime+p.totalDuration()/p._timeScale:"start"===a&&(p._startTime-=p.delay())),l+=o;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,n);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(c=this,f=c.rawTime()>r._startTime;c._timeline;)f&&c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._gc&&c._enabled(!0,!1),c=c._timeline;return this},d.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},d._remove=function(t,i){e.prototype._remove.call(this,t,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},d.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},d.insert=d.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},d.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},d.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},d.addPause=function(t,e,s,r){var n=i.delayedCall(0,f,["{self}",e,s,r],this);return n.data="isPause",this.add(n,t)},d.removeLabel=function(t){return delete this._labels[t],this},d.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},d._parseTimeOrLabel=function(e,i,s,r){var n;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&h(r)))for(n=r.length;--n>-1;)r[n]instanceof t&&r[n].timeline===this&&this.remove(r[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,s):this.duration()}return Number(e)+i},d.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},d.stop=function(){return this.paused(!0)},d.gotoAndPlay=function(t,e){return this.play(t,e)},d.gotoAndStop=function(t,e){return this.pause(t,e)},d.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,o,h,p=this._dirty?this.totalDuration():this._totalDuration,c=this._time,f=this._startTime,m=this._timeScale,d=this._paused;if(t>=p?(this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>r&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=p+1e-4):1e-7>t?(this._totalTime=this._time=0,(0!==c||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",n=this._reversed),0>t?(this._active=!1,this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(h=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==c&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&t>0&&(this._active=!0),0===c&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u)),this._time>=c)for(s=this._first;s&&(a=s._next,!this._paused||d);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||d);)(s._active||c>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;this._onUpdate&&(e||(l.length&&_(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u))),o&&(this._gc||(f===this._startTime||m!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(n&&(l.length&&_(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||u)))}},d._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},d.getChildren=function(t,e,s,r){r=r||-9999999999;for(var n=[],a=this._first,o=0;a;)r>a._startTime||(a instanceof i?e!==!1&&(n[o++]=a):(s!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,s)),o=n.length))),a=a._next;return n},d.getTweensOf=function(t,e){var s,r,n=this._gc,a=[],o=0;for(n&&this._enabled(!0,!0),s=i.getTweensOf(t),r=s.length;--r>-1;)(s[r].timeline===this||e&&this._contains(s[r]))&&(a[o++]=s[r]);return n&&this._enabled(!1,!0),a},d.recent=function(){return this._recent},d._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},d.shiftChildren=function(t,e,i){i=i||0;for(var s,r=this._first,n=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(s in n)n[s]>=i&&(n[s]+=t);return this._uncache(!0)},d._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,r=!1;--s>-1;)i[s]._kill(t,e)&&(r=!0);return r},d.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},d.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},d._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},d.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},d.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},d.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,r=this._last,n=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>n&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):n=r._startTime,0>r._startTime&&!r._paused&&(s-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),n=0),i=r._startTime+r._totalDuration/r._timeScale,i>s&&(s=i),r=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},d.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},d.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,n=[],a=e._internals,o=a.lazyTweens,h=a.lazyRender,l=new i(null,null,1,0),_=s.prototype=new t;return _.constructor=s,_.kill()._gc=!1,s.version="1.15.1",_.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},_.addCallback=function(t,i,s,r){return this.add(e.delayedCall(0,t,s,r),i)},_.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,r=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===r&&i[s]._enabled(!1,!1);return this},_.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},_.tweenTo=function(t,i){i=i||{};var s,r,a,o={ease:l,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),s=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,a=new e(this,s,o),o.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&s===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||a,i.onStartParams||n)},a},_.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},_.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,a,l,_,u,p,c=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,m=this._time,d=this._totalTime,g=this._startTime,v=this._timeScale,y=this._rawPrevTime,T=this._paused,w=this._cycle;if(t>=c?(this._locked||(this._totalTime=c,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,_="onComplete",0===this._duration&&(0===t||0>y||y===r)&&y!==t&&this._first&&(u=!0,y>r&&(_="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=f,t=f+1e-4)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===f&&y!==r&&(y>0||0>t&&y>=0)&&!this._locked)&&(_="onReverseComplete",a=this._reversed),0>t?(this._active=!1,y>=0&&this._first&&(u=!0),this._rawPrevTime=t):(this._rawPrevTime=f||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(u=!0))):(0===f&&0>y&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(p=f+this._repeatDelay,this._cycle=this._totalTime/p>>0,0!==this._cycle&&this._cycle===this._totalTime/p&&this._cycle--,this._time=this._totalTime-this._cycle*p,this._yoyo&&0!==(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,t=f+1e-4):0>this._time?this._time=t=0:t=this._time))),this._cycle!==w&&!this._locked){var x=this._yoyo&&0!==(1&w),b=x===(this._yoyo&&0!==(1&this._cycle)),P=this._totalTime,S=this._cycle,k=this._rawPrevTime,R=this._time;if(this._totalTime=w*f,w>this._cycle?x=!x:this._totalTime+=f,this._time=m,this._rawPrevTime=0===f?y-1e-4:y,this._cycle=w,this._locked=!0,m=x?0:f,this.render(m,e,0===f),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||n),b&&(m=x?f+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!T)return;this._time=R,this._totalTime=P,this._cycle=S,this._rawPrevTime=k}if(!(this._time!==m&&this._first||i||u))return d!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||n)),this._time>=m)for(s=this._first;s&&(l=s._next,!this._paused||T);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=l;else for(s=this._last;s&&(l=s._prev,!this._paused||T);)(s._active||m>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=l;this._onUpdate&&(e||(o.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n))),_&&(this._locked||this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(a&&(o.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[_]&&this.vars[_].apply(this.vars[_+"Scope"]||this,this.vars[_+"Params"]||n)))},_.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,r,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(s=0;h>s;s++)r=a[s],r.isActive()&&(n[o++]=r);return n},_.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},_.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},_.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},_.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},_.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},_.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},_.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},_.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},_.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},_.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},_.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var t=180/Math.PI,e=[],i=[],s=[],r={},n=_gsScope._gsDefine.globals,a=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},o=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,s){var r={a:t},n={},a={},o={c:s},h=(t+e)/2,l=(e+i)/2,_=(i+s)/2,u=(h+l)/2,p=(l+_)/2,c=(p-u)/8;return r.b=h+(t-h)/4,n.b=u+c,r.c=n.a=(r.b+n.b)/2,n.c=a.a=(u+p)/2,a.b=p-c,o.b=_+(s-_)/4,a.c=o.a=(a.b+o.b)/2,[r,n,a,o]},l=function(t,r,n,a,o){var l,_,u,p,c,f,m,d,g,v,y,T,w,x=t.length-1,b=0,P=t[0].a;for(l=0;x>l;l++)c=t[b],_=c.a,u=c.d,p=t[b+1].d,o?(y=e[l],T=i[l],w=.25*(T+y)*r/(a?.5:s[l]||.5),f=u-(u-_)*(a?.5*r:0!==y?w/y:0),m=u+(p-u)*(a?.5*r:0!==T?w/T:0),d=u-(f+((m-f)*(3*y/(y+T)+.5)/4||0))):(f=u-.5*(u-_)*r,m=u+.5*(p-u)*r,d=u-(f+m)/2),f+=d,m+=d,c.c=g=f,c.b=0!==l?P:P=c.a+.6*(c.c-c.a),c.da=u-_,c.ca=g-_,c.ba=P-_,n?(v=h(_,P,g,u),t.splice(b,1,v[0],v[1],v[2],v[3]),b+=4):b++,P=m;c=t[b],c.b=P,c.c=P+.4*(c.d-P),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=P-c.a,n&&(v=h(c.a,P,c.c,c.d),t.splice(b,1,v[0],v[1],v[2],v[3]))},_=function(t,s,r,n){var o,h,l,_,u,p,c=[];if(n)for(t=[n].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][s])&&"="===p.charAt(1)&&(t[h][s]=n[s]+Number(p.charAt(0)+p.substr(2)));if(o=t.length-2,0>o)return c[0]=new a(t[0][s],0,0,t[-1>o?0:1][s]),c;for(h=0;o>h;h++)l=t[h][s],_=t[h+1][s],c[h]=new a(l,0,0,_),r&&(u=t[h+2][s],e[h]=(e[h]||0)+(_-l)*(_-l),i[h]=(i[h]||0)+(u-_)*(u-_));return c[h]=new a(t[h][s],0,0,t[h+1][s]),c},u=function(t,n,a,h,u,p){var c,f,m,d,g,v,y,T,w={},x=[],b=p||t[0];u="string"==typeof u?","+u+",":o,null==n&&(n=1);for(f in t[0])x.push(f);if(t.length>1){for(T=t[t.length-1],y=!0,c=x.length;--c>-1;)if(f=x[c],Math.abs(b[f]-T[f])>.05){y=!1;break}y&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=s.length=0,c=x.length;--c>-1;)f=x[c],r[f]=-1!==u.indexOf(","+f+","),w[f]=_(t,f,r[f],p);for(c=e.length;--c>-1;)e[c]=Math.sqrt(e[c]),i[c]=Math.sqrt(i[c]);if(!h){for(c=x.length;--c>-1;)if(r[f])for(m=w[x[c]],v=m.length-1,d=0;v>d;d++)g=m[d+1].da/i[d]+m[d].da/e[d],s[d]=(s[d]||0)+g*g;for(c=s.length;--c>-1;)s[c]=Math.sqrt(s[c])}for(c=x.length,d=a?4:1;--c>-1;)f=x[c],m=w[f],l(m,n,a,h,r[f]),y&&(m.splice(0,d),m.splice(m.length-d,d));return w},p=function(t,e,i){e=e||"soft";var s,r,n,o,h,l,_,u,p,c,f,m={},d="cubic"===e?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||d+1>t.length)throw"invalid Bezier data";for(p in t[0])v.push(p);for(l=v.length;--l>-1;){for(p=v[l],m[p]=h=[],c=0,u=t.length,_=0;u>_;_++)s=null==i?t[_][p]:"string"==typeof(f=t[_][p])&&"="===f.charAt(1)?i[p]+Number(f.charAt(0)+f.substr(2)):Number(f),g&&_>1&&u-1>_&&(h[c++]=(s+h[c-2])/2),h[c++]=s;for(u=c-d+1,c=0,_=0;u>_;_+=d)s=h[_],r=h[_+1],n=h[_+2],o=2===d?0:h[_+3],h[c++]=f=3===d?new a(s,r,n,o):new a(s,(2*r+s)/3,(2*r+n)/3,n);h.length=c}return m},c=function(t,e,i){for(var s,r,n,a,o,h,l,_,u,p,c,f=1/i,m=t.length;--m>-1;)for(p=t[m],n=p.a,a=p.d-n,o=p.c-n,h=p.b-n,s=r=0,_=1;i>=_;_++)l=f*_,u=1-l,s=r-(r=(l*l*a+3*u*(l*o+u*h))*l),c=m*i+_-1,e[c]=(e[c]||0)+s*s},f=function(t,e){e=e>>0||6;var i,s,r,n,a=[],o=[],h=0,l=0,_=e-1,u=[],p=[];for(i in t)c(t[i],a,e);for(r=a.length,s=0;r>s;s++)h+=Math.sqrt(a[s]),n=s%e,p[n]=h,n===_&&(l+=h,n=s/e>>0,u[n]=p,o[n]=l,h=0,p=[]);return{length:l,lengths:o,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,r,n,a,o,h=e.values||[],l={},_=h[0],c=e.autoRotate||i.vars.orientToBezier;this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",c===!0?0:Number(c)||0]]:null;for(s in _)this._props.push(s);for(n=this._props.length;--n>-1;)s=this._props[n],this._overwriteProps.push(s),r=this._func[s]="function"==typeof t[s],l[s]=r?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),o||l[s]!==h[0][s]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):p(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),n=c.length;--n>-1;){for(a=0;3>a;a++)s=c[n][a],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=c[n][2],this._initialRotations[n]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,r,n,a,o,h,l,_,u,p=this._segCount,c=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(_=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&p-1>r){for(l=p-1;l>r&&e>=(this._l2=_[++r]););this._l1=_[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=_[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=_[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]
}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(l=u.length-1;l>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?p-1:p*e>>0,o=(e-i*(1/p))*p;for(s=1-o,r=this._props.length;--r>-1;)n=this._props[r],a=this._beziers[n][i],h=(o*o*a.da+3*s*(o*a.ca+s*a.ba))*o+a.a,this._round[n]&&(h=Math.round(h)),c[n]?f[n](h):f[n]=h;if(this._autoRotate){var d,g,v,y,T,w,x,b=this._autoRotate;for(r=b.length;--r>-1;)n=b[r][2],w=b[r][3]||0,x=b[r][4]===!0?1:t,a=this._beziers[b[r][0]],d=this._beziers[b[r][1]],a&&d&&(a=a[i],d=d[i],g=a.a+(a.b-a.a)*o,y=a.b+(a.c-a.b)*o,g+=(y-g)*o,y+=(a.c+(a.d-a.c)*o-y)*o,v=d.a+(d.b-d.a)*o,T=d.b+(d.c-d.b)*o,v+=(T-v)*o,T+=(d.c+(d.d-d.c)*o-T)*o,h=m?Math.atan2(T-v,y-g)*x+w:this._initialRotations[r],c[n]?f[n](h):f[n]=h)}}}),d=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=n.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new m;var l,_,u,p=e.values,c=p.length-1,f=[],d={};if(0>c)return o;for(l=0;c>=l;l++)u=i(t,p[l],a,o,h,c!==l),f[l]=u.end;for(_ in e)d[_]=e[_];return d.values=f,o=new r(t,"bezier",0,0,u.pt,2),o.data=u,o.plugin=h,o.setRatio=s,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(l=d.autoRotate===!0?0:Number(d.autoRotate),d.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),d.autoRotate&&(a._transform||a._enableTransforms(!1),u.autoRotate=a._target._gsTransform),h._onInitTween(u.proxy,d,a._tween),o}})}},d._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},d._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,r,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=_gsScope._gsDefine.globals,h={},l=a.prototype=new t("css");l.constructor=a,a.version="1.15.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",l="px",a.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var _,u,p,c,f,m,d=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,w=/opacity *= *([^)]*)/i,x=/opacity:([^;]*)/i,b=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,S=/([A-Z])/g,k=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,A=function(t,e){return e.toUpperCase()},C=/(?:Left|Right|Width)/i,O=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,z=Math.PI/180,I=180/Math.PI,F={},E=document,N=function(t){return E.createElementNS?E.createElementNS("http://www.w3.org/1999/xhtml",t):E.createElement(t)},L=N("div"),X=N("img"),U=a._internals={_specialProps:h},Y=navigator.userAgent,B=function(){var t=Y.indexOf("Android"),e=N("a");return p=-1!==Y.indexOf("Safari")&&-1===Y.indexOf("Chrome")&&(-1===t||Number(Y.substr(t+8,1))>3),f=p&&6>Number(Y.substr(Y.indexOf("Version/")+8,1)),c=-1!==Y.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),j=function(t){return w.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},q=function(t){window.console&&console.log(t)},V="",G="",W=function(t,e){e=e||L;var i,s,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===r[i[s]+t];);return s>=0?(G=3===s?"ms":i[s],V="-"+G.toLowerCase()+"-",G+t):null},Z=E.defaultView?E.defaultView.getComputedStyle:function(){},Q=a.getStyle=function(t,e,i,s,r){var n;return B||"opacity"!==e?(!s&&t.style[e]?n=t.style[e]:(i=i||Z(t))?n=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(S,"-$1").toLowerCase()):t.currentStyle&&(n=t.currentStyle[e]),null==r||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:r):j(t)},$=U.convertToPixels=function(t,i,s,r,n){if("px"===r||!r)return s;if("auto"===r||!s)return 0;var o,h,l,_=C.test(i),u=t,p=L.style,c=0>s;if(c&&(s=-s),"%"===r&&-1!==i.indexOf("border"))o=s/100*(_?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+Q(t,"position")+";line-height:0;","%"!==r&&u.appendChild)p[_?"borderLeftWidth":"borderTopWidth"]=s+r;else{if(u=t.parentNode||E.body,h=u._gsCache,l=e.ticker.frame,h&&_&&h.time===l)return h.width*s/100;p[_?"width":"height"]=s+r}u.appendChild(L),o=parseFloat(L[_?"offsetWidth":"offsetHeight"]),u.removeChild(L),_&&"%"===r&&a.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=100*(o/s)),0!==o||n||(o=$(t,i,s,r,!0))}return c?-o:o},H=U.calculateOffset=function(t,e,i){if("absolute"!==Q(t,"position",i))return 0;var s="left"===e?"Left":"Top",r=Q(t,"margin"+s,i);return t["offset"+s]-($(t,e,parseFloat(r),r.replace(T,""))||0)},K=function(t,e){var i,s,r={};if(e=e||Z(t,null))for(i in e)(-1===i.indexOf("Transform")||xe===i)&&(r[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===r[i]&&(r[i.replace(k,A)]=e[i]);return B||(r.opacity=j(t)),s=Me(t,e,!1),r.rotation=s.rotation,r.skewX=s.skewX,r.scaleX=s.scaleX,r.scaleY=s.scaleY,r.x=s.x,r.y=s.y,Se&&(r.z=s.z,r.rotationX=s.rotationX,r.rotationY=s.rotationY,r.scaleZ=s.scaleZ),r.filters&&delete r.filters,r},J=function(t,e,i,s,r){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(y,"")?n:0:H(t,a),void 0!==l[a]&&(o=new ce(l,a,l[a],o)));if(s)for(a in s)"className"!==a&&(h[a]=s[a]);return{difs:h,firstMPT:o}},te={width:["Left","Right"],height:["Top","Bottom"]},ee=["marginLeft","marginRight","marginTop","marginBottom"],ie=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=te[e],n=r.length;for(i=i||Z(t,null);--n>-1;)s-=parseFloat(Q(t,"padding"+r[n],i,!0))||0,s-=parseFloat(Q(t,"border"+r[n]+"Width",i,!0))||0;return s},se=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="center"===s?"50%":"0":"center"===r&&(r="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(s.replace(y,"")),e.oy=parseFloat(r.replace(y,""))),s+" "+r+(i.length>2?" "+i[2]:"")},re=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},ne=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},ae=function(t,e,i,s){var r,n,a,o,h,l=1e-6;return null==t?o=e:"number"==typeof t?o=t:(r=360,n=t.split("_"),h="="===t.charAt(1),a=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(-1===t.indexOf("rad")?1:I)-(h?0:e),n.length&&(s&&(s[i]=e+a),-1!==t.indexOf("short")&&(a%=r,a!==a%(r/2)&&(a=0>a?a+r:a-r)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*r)%r-(0|a/r)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(0|a/r)*r)),o=e+a),l>o&&o>-l&&(o=0),o},oe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},he=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},le=a.parseColor=function(t){var e,i,s,r,n,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),oe[t]?oe[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(d),r=Number(t[0])%360/360,n=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(n+1):a+n-a*n,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=he(r+1/3,e,i),t[1]=he(r,e,i),t[2]=he(r-1/3,e,i),t):(t=t.match(d)||oe.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):oe.black},_e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in oe)_e+="|"+l+"\\b";_e=RegExp(_e+")","gi");var ue=function(t,e,i,s){if(null==t)return function(t){return t};var r,n=e?(t.match(_e)||[""])[0]:"",a=t.split(n).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",_=a.length,u=_>0?a[0].replace(d,""):"";return _?r=e?function(t){var e,p,c,f;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(f=t.replace(M,"|").split("|"),c=0;f.length>c;c++)f[c]=r(f[c]);return f.join(",")}if(e=(t.match(_e)||[n])[0],p=t.split(e).join("").match(v)||[],c=p.length,_>c--)for(;_>++c;)p[c]=i?p[0|(c-1)/2]:a[c];return o+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,p;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(n=t.replace(M,"|").split("|"),p=0;n.length>p;p++)n[p]=r(n[p]);return n.join(",")}if(e=t.match(v)||[],p=e.length,_>p--)for(;_>++p;)e[p]=i?e[0|(p-1)/2]:a[p];return o+e.join(l)+h}:function(t){return t}},pe=function(t){return t=t.split(","),function(e,i,s,r,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,o,n,a)}},ce=(U._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,r,n=this.data,a=n.proxy,o=n.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=Math.round(e):h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)r+=i["xn"+s]+i["xs"+(s+1)];i.e=r}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,s,r){this.t=t,this.p=e,this.v=i,this.r=r,s&&(s._prev=this,this._next=s)}),fe=(U._parseToProxy=function(t,e,i,s,r,n){var a,o,h,l,_,u=s,p={},c={},f=i._transform,m=F;for(i._transform=null,F=e,s=_=i.parse(t,e,s,r),F=m,n&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(o=s.p,c[o]=s.s+s.c,p[o]=s.s,n||(l=new ce(s,"s",o,l,s.r),s.c=0),1===s.type))for(a=s.l;--a>0;)h="xn"+a,o=s.p+"_"+h,c[o]=s.data[h],p[o]=s[h],n||(l=new ce(s,h,o,l,s.rxp[h]));s=s._next}return{proxy:p,end:c,firstMPT:l,pt:_}},U.CSSPropTween=function(t,e,s,r,a,o,h,l,_,u,p){this.t=t,this.p=e,this.s=s,this.c=r,this.n=h||e,t instanceof fe||n.push(this.n),this.r=l,this.type=o||0,_&&(this.pr=_,i=!0),this.b=void 0===u?s:u,this.e=void 0===p?s+r:p,a&&(this._next=a,a._prev=this)}),me=a.parseComplex=function(t,e,i,s,r,n,a,o,h,l){i=i||n||"",a=new fe(t,e,0,0,a,l?2:1,null,!1,o,i,s),s+="";var u,p,c,f,m,v,y,T,w,x,b,S,k=i.split(", ").join(",").split(" "),R=s.split(", ").join(",").split(" "),A=k.length,C=_!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(k=k.join(" ").replace(M,", ").split(" "),R=R.join(" ").replace(M,", ").split(" "),A=k.length),A!==R.length&&(k=(n||"").split(" "),A=k.length),a.plugin=h,a.setRatio=l,u=0;A>u;u++)if(f=k[u],m=R[u],T=parseFloat(f),T||0===T)a.appendXtra("",T,re(m,T),m.replace(g,""),C&&-1!==m.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||oe[f]||P.test(f)))S=","===m.charAt(m.length-1)?"),":")",f=le(f),m=le(m),w=f.length+m.length>6,w&&!B&&0===m[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(R[u]).join("transparent")):(B||(w=!1),a.appendXtra(w?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],w?",":S,!0),w&&(f=4>f.length?1:f[3],a.appendXtra("",f,(4>m.length?1:m[3])-f,S,!1)));else if(v=f.match(d)){if(y=m.match(g),!y||y.length!==v.length)return a;for(c=0,p=0;v.length>p;p++)b=v[p],x=f.indexOf(b,c),a.appendXtra(f.substr(c,x-c),Number(b),re(y[p],b),"",C&&"px"===f.substr(x+b.length,2),0===p),c=x+b.length;a["xs"+a.l]+=f.substr(c)}else a["xs"+a.l]+=a.l?" "+f:f;if(-1!==s.indexOf("=")&&a.data){for(S=a.xs0+a.data.s,u=1;a.l>u;u++)S+=a["xs"+u]+a.data["xn"+u];a.e=S+a["xs"+u]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},de=9;for(l=fe.prototype,l.l=l.pr=0;--de>0;)l["xn"+de]=0,l["xs"+de]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,s,r,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new fe(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(s||""),a)};var ge=function(t,e){e=e||{},this.p=e.prefix?W(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ue(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},ve=U._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,r,n=t.split(","),a=e.defaultValue;for(i=i||[a],s=0;n.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||a,r=new ge(n[s],e)},ye=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";ve(t,{parser:function(t,i,s,r,n,a,l){var _=o.com.greensock.plugins[e];return _?(_._cssRegister(),h[s].parse(t,i,s,r,n,a,l)):(q("Error: "+e+" js file not loaded."),n)}})}};l=ge.prototype,l.parseComplex=function(t,e,i,s,r,n){var a,o,h,l,_,u,p=this.keyword;if(this.multi&&(M.test(i)||M.test(e)?(o=e.replace(M,"|").split("|"),h=i.replace(M,"|").split("|")):p&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,p&&(_=e.indexOf(p),u=i.indexOf(p),_!==u&&(i=-1===u?h:o,i[a]+=" "+p));e=o.join(", "),i=h.join(", ")}return me(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,r,n)},l.parse=function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format(Q(t,this.p,r,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){ve(t,{parser:function(t,s,r,n,a,o){var h=new fe(t,r,0,0,a,2,r,!1,i);return h.plugin=o,h.setRatio=e(t,s,n._tween,r),h},priority:i})};var Te,we="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),xe=W("transform"),be=V+"transform",Pe=W("transformOrigin"),Se=null!==W("perspective"),ke=U.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=a.defaultForce3D!==!1&&Se?a.defaultForce3D||"auto":!1},Re=window.SVGElement,Ae=function(t,e,i){var s,r=E.createElementNS("http://www.w3.org/2000/svg",t),n=/([a-z])([A-Z])/g;for(s in i)r.setAttributeNS(null,s.replace(n,"$1-$2").toLowerCase(),i[s]);return e.appendChild(r),r},Ce=document.documentElement,Oe=function(){var t,e,i,s=m||/Android/i.test(Y)&&!window.chrome;return E.createElementNS&&!s&&(t=Ae("svg",Ce),e=Ae("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[Pe]="50% 50%",e.style[xe]="scaleX(0.5)",s=i===e.getBoundingClientRect().width&&!(c&&Se),Ce.removeChild(t)),s}(),De=function(t,e,i){var s=t.getBBox();e=se(e).split(" "),i.xOrigin=(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*s.width:parseFloat(e[0]))+s.x,i.yOrigin=(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*s.height:parseFloat(e[1]))+s.y},Me=U.getTransform=function(t,e,i,s){if(t._gsTransform&&i&&!s)return t._gsTransform;var n,o,h,l,_,u,p,c,f,m,d=i?t._gsTransform||new ke:new ke,g=0>d.scaleX,v=2e-5,y=1e5,T=Se?parseFloat(Q(t,Pe,e,!1,"0 0 0").split(" ")[2])||d.zOrigin||0:0,w=parseFloat(a.defaultTransformPerspective)||0;if(xe?o=Q(t,be,e,!0):t.currentStyle&&(o=t.currentStyle.filter.match(O),o=o&&4===o.length?[o[0].substr(4),Number(o[2].substr(4)),Number(o[1].substr(4)),o[3].substr(4),d.x||0,d.y||0].join(","):""),n=!o||"none"===o||"matrix(1, 0, 0, 1, 0, 0)"===o,d.svg=!!(Re&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM)),d.svg&&(De(t,Q(t,Pe,r,!1,"50% 50%")+"",d),Te=a.useSVGTransformAttr||Oe,h=t.getAttribute("transform"),n&&h&&-1!==h.indexOf("matrix")&&(o=h,n=0)),!n){for(h=(o||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],l=h.length;--l>-1;)_=Number(h[l]),h[l]=(u=_-(_|=0))?(0|u*y+(0>u?-.5:.5))/y+_:_;if(16===h.length){var x,b,P,S,k,R=h[0],A=h[1],C=h[2],D=h[3],M=h[4],z=h[5],F=h[6],E=h[7],N=h[8],L=h[9],X=h[10],U=h[12],Y=h[13],B=h[14],j=h[11],q=Math.atan2(F,X);d.zOrigin&&(B=-d.zOrigin,U=N*B-h[12],Y=L*B-h[13],B=X*B+d.zOrigin-h[14]),d.rotationX=q*I,q&&(S=Math.cos(-q),k=Math.sin(-q),x=M*S+N*k,b=z*S+L*k,P=F*S+X*k,N=M*-k+N*S,L=z*-k+L*S,X=F*-k+X*S,j=E*-k+j*S,M=x,z=b,F=P),q=Math.atan2(N,X),d.rotationY=q*I,q&&(S=Math.cos(-q),k=Math.sin(-q),x=R*S-N*k,b=A*S-L*k,P=C*S-X*k,L=A*k+L*S,X=C*k+X*S,j=D*k+j*S,R=x,A=b,C=P),q=Math.atan2(A,R),d.rotation=q*I,q&&(S=Math.cos(-q),k=Math.sin(-q),R=R*S+M*k,b=A*S+z*k,z=A*-k+z*S,F=C*-k+F*S,A=b),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY+=180),d.scaleX=(0|Math.sqrt(R*R+A*A)*y+.5)/y,d.scaleY=(0|Math.sqrt(z*z+L*L)*y+.5)/y,d.scaleZ=(0|Math.sqrt(F*F+X*X)*y+.5)/y,d.skewX=0,d.perspective=j?1/(0>j?-j:j):0,d.x=U,d.y=Y,d.z=B}else if(!(Se&&!s&&h.length&&d.x===h[4]&&d.y===h[5]&&(d.rotationX||d.rotationY)||void 0!==d.x&&"none"===Q(t,"display",e))){var V=h.length>=6,G=V?h[0]:1,W=h[1]||0,Z=h[2]||0,$=V?h[3]:1;d.x=h[4]||0,d.y=h[5]||0,p=Math.sqrt(G*G+W*W),c=Math.sqrt($*$+Z*Z),f=G||W?Math.atan2(W,G)*I:d.rotation||0,m=Z||$?Math.atan2(Z,$)*I+f:d.skewX||0,Math.abs(m)>90&&270>Math.abs(m)&&(g?(p*=-1,m+=0>=f?180:-180,f+=0>=f?180:-180):(c*=-1,m+=0>=m?180:-180)),d.scaleX=p,d.scaleY=c,d.rotation=f,d.skewX=m,Se&&(d.rotationX=d.rotationY=d.z=0,d.perspective=w,d.scaleZ=1)}d.zOrigin=T;for(l in d)v>d[l]&&d[l]>-v&&(d[l]=0)}return i&&(t._gsTransform=d),d},ze=function(t){var e,i,s=this.data,r=-s.rotation*z,n=r+s.skewX*z,a=1e5,o=(0|Math.cos(r)*s.scaleX*a)/a,h=(0|Math.sin(r)*s.scaleX*a)/a,l=(0|Math.sin(n)*-s.scaleY*a)/a,_=(0|Math.cos(n)*s.scaleY*a)/a,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var c,f,d=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==p.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+_,x=s.x+d*s.xPercent/100,b=s.y+g*s.yPercent/100;if(null!=s.ox&&(c=(s.oxp?.01*d*s.ox:s.ox)-d/2,f=(s.oyp?.01*g*s.oy:s.oy)-g/2,x+=c-(c*o+f*h),b+=f-(c*l+f*_)),v?(c=d/2,f=g/2,y+=", Dx="+(c-(c*o+f*h)+x)+", Dy="+(f-(c*l+f*_)+b)+")"):y+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(D,y):y+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===_&&(v&&-1===y.indexOf("Dx=0, Dy=0")||w.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var P,S,k,R=8>m?1:-1;for(c=s.ieOffsetX||0,f=s.ieOffsetY||0,s.ieOffsetX=Math.round((d-((0>o?-o:o)*d+(0>h?-h:h)*g))/2+x),s.ieOffsetY=Math.round((g-((0>_?-_:_)*g+(0>l?-l:l)*d))/2+b),de=0;4>de;de++)S=ee[de],P=p[S],i=-1!==P.indexOf("px")?parseFloat(P):$(this.t,S,parseFloat(P),P.replace(T,""))||0,k=i!==s[S]?2>de?-s.ieOffsetX:-s.ieOffsetY:2>de?c-s.ieOffsetX:f-s.ieOffsetY,u[S]=(s[S]=Math.round(i-k*(0===de||2===de?1:R)))+"px"}}},Ie=U.set3DTransformRatio=function(t){var e,i,s,r,n,a,o,h,l,_,u,p,f,m,d,g,v,y,T,w,x,b=this.data,P=this.t.style,S=b.rotation*z,k=b.scaleX,R=b.scaleY,A=b.scaleZ,C=b.x,O=b.y,D=b.z,M=b.perspective;if(!(1!==t&&0!==t&&b.force3D||b.force3D===!0||b.rotationY||b.rotationX||1!==A||M||D))return Fe.call(this,t),void 0;if(c&&(m=1e-4,m>k&&k>-m&&(k=A=2e-5),m>R&&R>-m&&(R=A=2e-5),!M||b.z||b.rotationX||b.rotationY||(M=0)),S||b.skewX)d=e=Math.cos(S),g=r=Math.sin(S),b.skewX&&(S-=b.skewX*z,d=Math.cos(S),g=Math.sin(S),"simple"===b.skewType&&(v=Math.tan(b.skewX*z),v=Math.sqrt(1+v*v),d*=v,g*=v)),i=-g,n=d;else{if(!(b.rotationY||b.rotationX||1!==A||M||b.svg))return P[xe]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) translate3d(":"translate3d(")+C+"px,"+O+"px,"+D+"px)"+(1!==k||1!==R?" scale("+k+","+R+")":""),void 0;e=n=1,i=r=0}l=1,s=a=o=h=_=u=0,p=M?-1/M:0,f=b.zOrigin,m=1e-6,w=",",x="0",S=b.rotationY*z,S&&(d=Math.cos(S),g=Math.sin(S),o=-g,_=p*-g,s=e*g,a=r*g,l=d,p*=d,e*=d,r*=d),S=b.rotationX*z,S&&(d=Math.cos(S),g=Math.sin(S),v=i*d+s*g,y=n*d+a*g,h=l*g,u=p*g,s=i*-g+s*d,a=n*-g+a*d,l*=d,p*=d,i=v,n=y),1!==A&&(s*=A,a*=A,l*=A,p*=A),1!==R&&(i*=R,n*=R,h*=R,u*=R),1!==k&&(e*=k,r*=k,o*=k,_*=k),(f||b.svg)&&(f&&(C+=s*-f,O+=a*-f,D+=l*-f+f),b.svg&&(C+=b.xOrigin-(b.xOrigin*e+b.yOrigin*i),O+=b.yOrigin-(b.xOrigin*r+b.yOrigin*n)),m>C&&C>-m&&(C=x),m>O&&O>-m&&(O=x),m>D&&D>-m&&(D=0)),T=b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix3d(":"matrix3d(",T+=(m>e&&e>-m?x:e)+w+(m>r&&r>-m?x:r)+w+(m>o&&o>-m?x:o),T+=w+(m>_&&_>-m?x:_)+w+(m>i&&i>-m?x:i)+w+(m>n&&n>-m?x:n),b.rotationX||b.rotationY?(T+=w+(m>h&&h>-m?x:h)+w+(m>u&&u>-m?x:u)+w+(m>s&&s>-m?x:s),T+=w+(m>a&&a>-m?x:a)+w+(m>l&&l>-m?x:l)+w+(m>p&&p>-m?x:p)+w):T+=",0,0,0,0,1,0,",T+=C+w+O+w+D+w+(M?1+-D/M:1)+")",P[xe]=T},Fe=U.set2DTransformRatio=function(t){var e,i,s,r,n,a,o,h,l,_,u,p=this.data,c=this.t,f=c.style,m=p.x,d=p.y;return!(p.rotationX||p.rotationY||p.z||p.force3D===!0||"auto"===p.force3D&&1!==t&&0!==t)||p.svg&&Te||!Se?(r=p.scaleX,n=p.scaleY,p.rotation||p.skewX||p.svg?(e=p.rotation*z,i=e-p.skewX*z,s=1e5,a=Math.cos(e)*r,o=Math.sin(e)*r,h=Math.sin(i)*-n,l=Math.cos(i)*n,p.svg&&(m+=p.xOrigin-(p.xOrigin*a+p.yOrigin*h),d+=p.yOrigin-(p.xOrigin*o+p.yOrigin*l),u=1e-6,u>m&&m>-u&&(m=0),u>d&&d>-u&&(d=0)),_=(0|a*s)/s+","+(0|o*s)/s+","+(0|h*s)/s+","+(0|l*s)/s+","+m+","+d+")",p.svg&&Te?c.setAttribute("transform","matrix("+_):f[xe]=(p.xPercent||p.yPercent?"translate("+p.xPercent+"%,"+p.yPercent+"%) matrix(":"matrix(")+_):f[xe]=(p.xPercent||p.yPercent?"translate("+p.xPercent+"%,"+p.yPercent+"%) matrix(":"matrix(")+r+",0,0,"+n+","+m+","+d+")",void 0):(this.setRatio=Ie,Ie.call(this,t),void 0)};l=ke.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=0,l.scaleX=l.scaleY=l.scaleZ=1,ve("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,i,s,n,o,h){if(s._lastParsedTransform===h)return n;s._lastParsedTransform=h;var l,_,u,p,c,f,m,d=s._transform=Me(t,r,!0,h.parseTransform),g=t.style,v=1e-6,y=we.length,T=h,w={};if("string"==typeof T.transform&&xe)u=L.style,u[xe]=T.transform,u.display="block",u.position="absolute",E.body.appendChild(L),l=Me(L,null,!1),E.body.removeChild(L);else if("object"==typeof T){if(l={scaleX:ne(null!=T.scaleX?T.scaleX:T.scale,d.scaleX),scaleY:ne(null!=T.scaleY?T.scaleY:T.scale,d.scaleY),scaleZ:ne(T.scaleZ,d.scaleZ),x:ne(T.x,d.x),y:ne(T.y,d.y),z:ne(T.z,d.z),xPercent:ne(T.xPercent,d.xPercent),yPercent:ne(T.yPercent,d.yPercent),perspective:ne(T.transformPerspective,d.perspective)},m=T.directionalRotation,null!=m)if("object"==typeof m)for(u in m)T[u]=m[u];else T.rotation=m;"string"==typeof T.x&&-1!==T.x.indexOf("%")&&(l.x=0,l.xPercent=ne(T.x,d.xPercent)),"string"==typeof T.y&&-1!==T.y.indexOf("%")&&(l.y=0,l.yPercent=ne(T.y,d.yPercent)),l.rotation=ae("rotation"in T?T.rotation:"shortRotation"in T?T.shortRotation+"_short":"rotationZ"in T?T.rotationZ:d.rotation,d.rotation,"rotation",w),Se&&(l.rotationX=ae("rotationX"in T?T.rotationX:"shortRotationX"in T?T.shortRotationX+"_short":d.rotationX||0,d.rotationX,"rotationX",w),l.rotationY=ae("rotationY"in T?T.rotationY:"shortRotationY"in T?T.shortRotationY+"_short":d.rotationY||0,d.rotationY,"rotationY",w)),l.skewX=null==T.skewX?d.skewX:ae(T.skewX,d.skewX),l.skewY=null==T.skewY?d.skewY:ae(T.skewY,d.skewY),(_=l.skewY-d.skewY)&&(l.skewX+=_,l.rotation+=_)}for(Se&&null!=T.force3D&&(d.force3D=T.force3D,f=!0),d.skewType=T.skewType||d.skewType||a.defaultSkewType,c=d.force3D||d.z||d.rotationX||d.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,c||null==T.scale||(l.scaleZ=1);--y>-1;)i=we[y],p=l[i]-d[i],(p>v||-v>p||null!=T[i]||null!=F[i])&&(f=!0,n=new fe(d,i,d[i],p,n),i in w&&(n.e=w[i]),n.xs0=0,n.plugin=o,s._overwriteProps.push(n.n));return p=T.transformOrigin,p&&d.svg&&(De(t,se(p),l),n=new fe(d,"xOrigin",d.xOrigin,l.xOrigin-d.xOrigin,n,-1,"transformOrigin"),n.b=d.xOrigin,n.e=n.xs0=l.xOrigin,n=new fe(d,"yOrigin",d.yOrigin,l.yOrigin-d.yOrigin,n,-1,"transformOrigin"),n.b=d.yOrigin,n.e=n.xs0=l.yOrigin,p="0px 0px"),(p||Se&&c&&d.zOrigin)&&(xe?(f=!0,i=Pe,p=(p||Q(t,i,r,!1,"50% 50%"))+"",n=new fe(g,i,0,0,n,-1,"transformOrigin"),n.b=g[i],n.plugin=o,Se?(u=d.zOrigin,p=p.split(" "),d.zOrigin=(p.length>2&&(0===u||"0px"!==p[2])?parseFloat(p[2]):u)||0,n.xs0=n.e=p[0]+" "+(p[1]||"50%")+" 0px",n=new fe(d,"zOrigin",0,0,n,-1,n.n),n.b=u,n.xs0=n.e=d.zOrigin):n.xs0=n.e=p):se(p+"",d)),f&&(s._transformType=d.svg&&Te||!c&&3!==this._transformType?2:3),n},prefix:!0}),ve("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),ve("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,h,l,_,u,p,c,f,m,d,g,v,y,T,w,x,b=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],P=t.style;for(m=parseFloat(t.offsetWidth),d=parseFloat(t.offsetHeight),o=e.split(" "),h=0;b.length>h;h++)this.p.indexOf("border")&&(b[h]=W(b[h])),u=_=Q(t,b[h],r,!1,"0px"),-1!==u.indexOf(" ")&&(_=u.split(" "),u=_[0],_=_[1]),p=l=o[h],c=parseFloat(u),v=u.substr((c+"").length),y="="===p.charAt(1),y?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),g=p.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(p),g=p.substr((f+"").length)),""===g&&(g=s[i]||v),g!==v&&(T=$(t,"borderLeft",c,v),w=$(t,"borderTop",c,v),"%"===g?(u=100*(T/m)+"%",_=100*(w/d)+"%"):"em"===g?(x=$(t,"borderLeft",1,"em"),u=T/x+"em",_=w/x+"em"):(u=T+"px",_=w+"px"),y&&(p=parseFloat(u)+f+g,l=parseFloat(_)+f+g)),a=me(P,b[h],u+" "+_,p+" "+l,!1,"0px",a);return a},prefix:!0,formatter:ue("0px 0px 0px 0px",!1,!0)}),ve("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,n,a){var o,h,l,_,u,p,c="background-position",f=r||Z(t,null),d=this.format((f?m?f.getPropertyValue(c+"-x")+" "+f.getPropertyValue(c+"-y"):f.getPropertyValue(c):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==d.indexOf("%")!=(-1!==g.indexOf("%"))&&(p=Q(t,"backgroundImage").replace(R,""),p&&"none"!==p)){for(o=d.split(" "),h=g.split(" "),X.setAttribute("src",p),l=2;--l>-1;)d=o[l],_=-1!==d.indexOf("%"),_!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-X.width:t.offsetHeight-X.height,o[l]=_?parseFloat(d)/100*u+"px":100*(parseFloat(d)/u)+"%");d=o.join(" ")}return this.parseComplex(t.style,d,g,n,a)},formatter:se}),ve("backgroundSize",{defaultValue:"0 0",formatter:se}),ve("perspective",{defaultValue:"0px",prefix:!0}),ve("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),ve("transformStyle",{prefix:!0}),ve("backfaceVisibility",{prefix:!0}),ve("userSelect",{prefix:!0}),ve("margin",{parser:pe("marginTop,marginRight,marginBottom,marginLeft")}),ve("padding",{parser:pe("paddingTop,paddingRight,paddingBottom,paddingLeft")}),ve("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,n,a){var o,h,l;return 9>m?(h=t.currentStyle,l=8>m?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(Q(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),ve("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),ve("autoRound,strictUnits",{parser:function(t,e,i,s,r){return r}}),ve("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format(Q(t,"borderTopWidth",r,!1,"0px")+" "+Q(t,"borderTopStyle",r,!1,"solid")+" "+Q(t,"borderTopColor",r,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(_e)||["#000"])[0]}}),ve("borderWidth",{parser:pe("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),ve("float,cssFloat,styleFloat",{parser:function(t,e,i,s,r){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new fe(n,a,0,0,r,-1,i,!1,0,n[a],e)}});var Ee=function(t){var e,i=this.t,s=i.filter||Q(this.data,"filter")||"",r=0|this.s+this.c*t;100===r&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),e=!Q(this.data,"filter")):(i.filter=s.replace(b,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+r+")"),-1===s.indexOf("pacity")?0===r&&this.xn1||(i.filter=s+" alpha(opacity="+r+")"):i.filter=s.replace(w,"opacity="+r))};ve("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,n,a){var o=parseFloat(Q(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===Q(t,"visibility",r)&&0!==e&&(o=0),B?n=new fe(h,"opacity",o,e-o,n):(n=new fe(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Ee),l&&(n=new fe(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",s._overwriteProps.push(n.n),s._overwriteProps.push(i)),n}});var Ne=function(t,e){e&&(t.removeProperty?("ms"===e.substr(0,2)&&(e="M"+e.substr(1)),t.removeProperty(e.replace(S,"-$1").toLowerCase())):t.removeAttribute(e))},Le=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ne(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};ve("className",{parser:function(t,e,s,n,a,o,h){var l,_,u,p,c,f=t.getAttribute("class")||"",m=t.style.cssText;if(a=n._classNamePT=new fe(t,s,0,0,a,2),a.setRatio=Le,a.pr=-11,i=!0,a.b=f,_=K(t,r),u=t._gsClassPT){for(p={},c=u.data;c;)p[c.p]=1,c=c._next;u.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),n._tween._duration&&(t.setAttribute("class",a.e),l=J(t,_,K(t),h,p),t.setAttribute("class",f),a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)),a}});var Xe=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,s,r,n=this.t.style,a=h.transform.parse;if("all"===this.e)n.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),s=e.length;--s>-1;)i=e[s],h[i]&&(h[i].parse===a?r=!0:i="transformOrigin"===i?Pe:h[i].p),Ne(n,i);r&&(Ne(n,xe),this.t._gsTransform&&delete this.t._gsTransform)}};for(ve("clearProps",{parser:function(t,e,s,r,n){return n=new fe(t,s,0,0,n,2),n.setRatio=Xe,n.e=e,n.pr=-10,n.data=r._tween,i=!0,n}}),l="bezier,throwProps,physicsProps,physics2D".split(","),de=l.length;de--;)ye(l[de]);l=a.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,o){if(!t.nodeType)return!1;
this._target=t,this._tween=o,this._vars=e,_=e.autoRound,i=!1,s=e.suffixMap||a.suffixMap,r=Z(t,""),n=this._overwriteProps;var h,l,c,m,d,g,v,y,T,w=t.style;if(u&&""===w.zIndex&&(h=Q(t,"zIndex",r),("auto"===h||""===h)&&this._addLazySet(w,"zIndex",0)),"string"==typeof e&&(m=w.cssText,h=K(t,r),w.cssText=m+";"+e,h=J(t,h,K(t)).difs,!B&&x.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,w.cssText=m),this._firstPT=l=this.parse(t,e,null),this._transformType){for(T=3===this._transformType,xe?p&&(u=!0,""===w.zIndex&&(v=Q(t,"zIndex",r),("auto"===v||""===v)&&this._addLazySet(w,"zIndex",0)),f&&this._addLazySet(w,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(T?"visible":"hidden"))):w.zoom=1,c=l;c&&c._next;)c=c._next;y=new fe(t,"transform",0,0,null,2),this._linkCSSP(y,null,c),y.setRatio=T&&Se?Ie:xe?Fe:ze,y.data=this._transform||Me(t,r,!0),n.pop()}if(i){for(;l;){for(g=l._next,c=m;c&&c.pr>l.pr;)c=c._next;(l._prev=c?c._prev:d)?l._prev._next=l:m=l,(l._next=c)?c._prev=l:d=l,l=g}this._firstPT=m}return!0},l.parse=function(t,e,i,n){var a,o,l,u,p,c,f,m,d,g,v=t.style;for(a in e)c=e[a],o=h[a],o?i=o.parse(t,c,a,this,i,n,e):(p=Q(t,a,r)+"",d="string"==typeof c,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||d&&P.test(c)?(d||(c=le(c),c=(c.length>3?"rgba(":"rgb(")+c.join(",")+")"),i=me(v,a,p,c,!0,"transparent",i,0,n)):!d||-1===c.indexOf(" ")&&-1===c.indexOf(",")?(l=parseFloat(p),f=l||0===l?p.substr((l+"").length):"",(""===p||"auto"===p)&&("width"===a||"height"===a?(l=ie(t,a,r),f="px"):"left"===a||"top"===a?(l=H(t,a,r),f="px"):(l="opacity"!==a?0:1,f="")),g=d&&"="===c.charAt(1),g?(u=parseInt(c.charAt(0)+"1",10),c=c.substr(2),u*=parseFloat(c),m=c.replace(T,"")):(u=parseFloat(c),m=d?c.replace(T,""):""),""===m&&(m=a in s?s[a]:f),c=u||0===u?(g?u+l:u)+m:e[a],f!==m&&""!==m&&(u||0===u)&&l&&(l=$(t,a,l,f),"%"===m?(l/=$(t,a,100,"%")/100,e.strictUnits!==!0&&(p=l+"%")):"em"===m?l/=$(t,a,1,"em"):"px"!==m&&(u=$(t,a,u,m),m="px"),g&&(u||0===u)&&(c=u+l+m)),g&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==v[a]&&(c||"NaN"!=c+""&&null!=c)?(i=new fe(v,a,u||l||0,0,i,-1,a,!1,0,p,c),i.xs0="none"!==c||"display"!==a&&-1===a.indexOf("Style")?c:p):q("invalid "+a+" tween value: "+e[a]):(i=new fe(v,a,l,u-l,i,0,a,_!==!1&&("px"===m||"zIndex"===a),0,p,c),i.xs0=m)):i=me(v,a,p,c,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},l.setRatio=function(t){var e,i,s,r=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):n>e&&e>-n&&(e=0),r.type)if(1===r.type)if(s=r.l,2===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,s=1;r.l>s;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},l._enableTransforms=function(t){this._transform=this._transform||Me(this._target,r,!0),this._transformType=this._transform.svg&&Te||!t&&3!==this._transformType?2:3};var Ue=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var s=this._firstPT=new fe(t,e,0,0,this._firstPT,2);s.e=i,s.setRatio=Ue,s.data=this},l._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,s,r,n=e;if(e.autoAlpha||e.alpha){n={};for(s in e)n[s]=e[s];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Ye=function(t,e,i){var s,r,n,a;if(t.slice)for(r=t.length;--r>-1;)Ye(t[r],e,i);else for(s=t.childNodes,r=s.length;--r>-1;)n=s[r],a=n.type,n.style&&(e.push(K(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Ye(n,e,i)};return a.cascadeTo=function(t,i,s){var r,n,a,o=e.to(t,i,s),h=[o],l=[],_=[],u=[],p=e._internals.reservedProps;for(t=o._targets||o.target,Ye(t,l,u),o.render(i,!0),Ye(t,_),o.render(0,!0),o._enabled(!0),r=u.length;--r>-1;)if(n=J(u[r],l[r],_[r]),n.firstMPT){n=n.difs;for(a in s)p[a]&&(n[a]=s[a]);h.push(e.to(u[r],i,n))}return h},t.activate([a]),a},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,s=this._tween,r=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),n=r.length,a={},o=s._propLookup.roundProps;--n>-1;)a[r[n]]=1;for(n=r.length;--n>-1;)for(t=r[n],e=s._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:s._firstPT===e&&(s._firstPT=i),e._next=e._prev=null,s._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(t,e){var i,s,r;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={},this._start={},this._end={};for(i in e)this._start[i]=this._proxy[i]=s=t.getAttribute(i),r=this._addTween(this._proxy,i,parseFloat(s),e[i],i),this._end[i]=r?r.s+r.c:e[i],this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,s=i.length,r=1===t?this._end:t?this._proxy:this._start;--s>-1;)e=i[s],this._target.setAttribute(e,r[e]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,s,r,n,a,o,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),s=o[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=this.finals[i]="string"==typeof s&&"="===s.charAt(1)?r+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,a=n-r,o.length&&(s=o.join("_"),-1!==s.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=0>a?a+h:a-h)),-1!==s.indexOf("_cw")&&0>a?a=(a+9999999999*h)%h-(0|a/h)*h:-1!==s.indexOf("ccw")&&a>0&&(a=(a-9999999999*h)%h-(0|a/h)*h)),(a>l||-l>a)&&(this._addTween(t,i,r,r+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,r=_gsScope.GreenSockGlobals||_gsScope,n=r.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var s=h("easing."+e,function(){},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,s},_=t.register||function(){},u=function(t,e,i,s){var r=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return _(r,t),r},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},c=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,r.config=function(t){return new s(t)},s},f=u("Back",c("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),c("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),c("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),d=m.prototype=new t;return d.constructor=m,d.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),d.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),d=e.prototype=new t,d.constructor=e,d.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},d.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,s,r,n,a,o,h=e.taper||"none",l=[],_=0,u=0|(e.points||20),c=u,f=e.randomize!==!1,m=e.clamp===!0,d=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--c>-1;)i=f?Math.random():1/u*c,s=d?d.getRatio(i):i,"none"===h?r=g:"out"===h?(n=1-i,r=n*n*g):"in"===h?r=i*i*g:.5>i?(n=2*i,r=.5*n*n*g):(n=2*(1-i),r=.5*n*n*g),f?s+=Math.random()*r-.5*r:c%2?s+=.5*r:s-=.5*r,m&&(s>1?s=1:0>s&&(s=0)),l[_++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),o=new p(1,1,null),c=u;--c>-1;)a=l[c],o=new p(a.x,a.y,o);this._prev=new p(0,0,0!==o.t?o:o.next)},!0),d=i.prototype=new t,d.constructor=i,d.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},d.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var r=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||s,this._p3=this._p2/a*(Math.asin(1/this._p1)||0)},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t,e){return new r(t,e)},r},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*a/this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2))},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*a/this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),_(r.SlowMo,"SlowMo","ease,"),_(i,"RoughEase","ease,"),_(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var s,r,n,a,o,h=function(t){var e,s=t.split("."),r=i;for(e=0;s.length>e;e++)r[s[e]]=r=r[s[e]]||{};return r},l=h("com.greensock"),_=1e-10,u=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},p=function(){},c=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},m=function(s,r,n,a){this.sc=f[s]?f[s].sc:[],f[s]=this,this.gsClass=null,this.func=n;var o=[];this.check=function(l){for(var _,u,p,c,d=r.length,g=d;--d>-1;)(_=f[r[d]]||new m(r[d],[])).gsClass?(o[d]=_.gsClass,g--):l&&_.sc.push(this);if(0===g&&n)for(u=("com.greensock."+s).split("."),p=u.pop(),c=h(u.join("."))[p]=this.gsClass=n.apply(n,o),a&&(i[p]=c,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return c}):s===e&&"undefined"!=typeof module&&module.exports&&(module.exports=c)),d=0;this.sc.length>d;d++)this.sc[d].check()},this.check(!0)},d=t._gsDefine=function(t,e,i,s){return new m(t,e,i,s)},g=l._class=function(t,e,i){return e=e||function(){},d(t,[],function(){return e},i),e};d.globals=i;var v=[0,0,1,1],y=[],T=g("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?v.concat(e):v},!0),w=T.map={},x=T.register=function(t,e,i,s){for(var r,n,a,o,h=e.split(","),_=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--_>-1;)for(n=h[_],r=s?g("easing."+n,null,!0):l.easing[n]||{},a=u.length;--a>-1;)o=u[a],w[n+"."+o]=w[o+n]=r[o]=t.getRatio?t:t[o]||new t};for(n=T.prototype,n._calcEnd=!1,n.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=s.length;--r>-1;)n=s[r]+",Power"+r,x(new T(null,null,1,r),n,"easeOut",!0),x(new T(null,null,2,r),n,"easeIn"+(0===r?",easeNone":"")),x(new T(null,null,3,r),n,"easeInOut");w.linear=l.easing.Linear.easeIn,w.swing=l.easing.Quad.easeInOut;var b=g("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});n=b.prototype,n.addEventListener=function(t,e,i,s,r){r=r||0;var n,h,l=this._listeners[t],_=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)n=l[h],n.c===e&&n.s===i?l.splice(h,1):0===_&&r>n.pr&&(_=h+1);l.splice(_,0,{c:e,s:i,up:s,pr:r}),this!==a||o||a.wake()},n.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return s.splice(i,1),void 0},n.dispatchEvent=function(t){var e,i,s,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)s=r[e],s&&(s.up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i))};var P=t.requestAnimationFrame,S=t.cancelAnimationFrame,k=Date.now||function(){return(new Date).getTime()},R=k();for(s=["ms","moz","webkit","o"],r=s.length;--r>-1&&!P;)P=t[s[r]+"RequestAnimationFrame"],S=t[s[r]+"CancelAnimationFrame"]||t[s[r]+"CancelRequestAnimationFrame"];g("Ticker",function(t,e){var i,s,r,n,h,l=this,u=k(),c=e!==!1&&P,f=500,m=33,d="tick",g=function(t){var e,a,o=k()-R;o>f&&(u+=o-m),R+=o,l.time=(R-u)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=n?.004:n-e),a=!0),t!==!0&&(r=s(g)),a&&l.dispatchEvent(d)};b.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(t,e){f=t||1/_,m=Math.min(e,f,0)},l.sleep=function(){null!=r&&(c&&S?S(r):clearTimeout(r),s=p,r=null,l===a&&(o=!1))},l.wake=function(){null!==r?l.sleep():l.frame>10&&(R=k()-f+5),s=0===i?p:c&&P?P:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===a&&(o=!0),g(2)},l.fps=function(t){return arguments.length?(i=t,n=1/(i||60),h=this.time+n,l.wake(),void 0):i},l.useRAF=function(t){return arguments.length?(l.sleep(),c=t,l.fps(i),void 0):c},l.fps(t),setTimeout(function(){c&&(!r||5>l.frame)&&l.useRAF(!1)},1500)}),n=l.Ticker.prototype=new l.events.EventDispatcher,n.constructor=l.Ticker;var A=g("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,j){o||a.wake();var i=this.vars.useFrames?B:j;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=A.ticker=new l.Ticker,n=A.prototype,n._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var C=function(){o&&k()-R>2e3&&a.wake(),setTimeout(C,2e3)};C(),n.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},n.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},n.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},n.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},n.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},n.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},n.render=function(){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},n.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},n._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(){return this._enabled(!1,!1)},n.kill=function(t,e){return this._kill(t,e),this},n._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},n._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},n.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=c(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},n.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},n.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},n.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,r=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?s-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),I.length&&q())}return this},n.progress=n.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},n.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},n.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||_,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},n.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){o||t||a.wake();var e=this._timeline,i=e.rawTime(),s=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=s,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==s&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var O=g("core.SimpleTimeline",function(t){A.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});n=O.prototype=new A,n.constructor=O,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(t,e){var i,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(s=t._startTime;i&&i._startTime>s;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},n._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(t,e,i){var s,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)s=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=s},n.rawTime=function(){return o||a.wake(),this._totalTime};var D=g("TweenLite",function(e,i,s){if(A.call(this,i,s),this.render=D.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:D.selector(e)||e;var r,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?Y[D.defaultOverwrite]:"number"==typeof h?h>>0:Y[h],(o||e instanceof Array||e.push&&c(e))&&"number"!=typeof e[0])for(this._targets=a=u(e),this._propLookup=[],this._siblings=[],r=0;a.length>r;r++)n=a[r],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(u(n))):(this._siblings[r]=V(n,this,!1),1===h&&this._siblings[r].length>1&&W(n,this,null,1,this._siblings[r])):(n=a[r--]=D.selector(n),"string"==typeof n&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=V(e,this,!1),1===h&&this._siblings.length>1&&W(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-_,this.render(-this._delay))},!0),M=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},z=function(t,e){var i,s={};for(i in t)U[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!N[i]||N[i]&&N[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s};n=D.prototype=new A,n.constructor=D,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,D.version="1.15.1",D.defaultEase=n._ease=new T(null,null,1,1),D.defaultOverwrite="auto",D.ticker=a,D.autoSleep=!0,D.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},D.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(D.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var I=[],F={},E=D._internals={isArray:c,isSelector:M,lazyTweens:I},N=D._plugins={},L=E.tweenLookup={},X=0,U=E.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},Y={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},B=A._rootFramesTimeline=new O,j=A._rootTimeline=new O,q=E.lazyRender=function(){var t,e=I.length;for(F={};--e>-1;)t=I[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);I.length=0};j._startTime=a.time,B._startTime=a.frame,j._active=B._active=!0,setTimeout(q,1),A._updateRoot=D.render=function(){var t,e,i;if(I.length&&q(),j.render((a.time-j._startTime)*j._timeScale,!1,!1),B.render((a.frame-B._startTime)*B._timeScale,!1,!1),I.length&&q(),!(a.frame%120)){for(i in L){for(e=L[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete L[i]}if(i=j._first,(!i||i._paused)&&D.autoSleep&&!B._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",A._updateRoot);var V=function(t,e,i){var s,r,n=t._gsTweenID;if(L[n||(t._gsTweenID=n="t"+X++)]||(L[n]={target:t,tweens:[]}),e&&(s=L[n].tweens,s[r=s.length]=e,i))for(;--r>-1;)s[r]===e&&s.splice(r,1);return L[n].tweens},G=function(t,e,i,s){var r,n,a=t.vars.onOverwrite;return a&&(r=a(t,e,i,s)),a=D.onOverwrite,a&&(n=a(t,e,i,s)),r!==!1&&n!==!1},W=function(t,e,i,s,r){var n,a,o,h;if(1===s||s>=4){for(h=r.length,n=0;h>n;n++)if((o=r[n])!==e)o._gc||G(o,e)&&o._enabled(!1,!1)&&(a=!0);else if(5===s)break;return a}var l,u=e._startTime+_,p=[],c=0,f=0===e._duration;for(n=r.length;--n>-1;)(o=r[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||Z(e,0,f),0===Z(o,l,f)&&(p[c++]=o)):u>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>u&&((f||!o._initted)&&2e-10>=u-o._startTime||(p[c++]=o)));for(n=c;--n>-1;)if(o=p[n],2===s&&o._kill(i,t,e)&&(a=!0),2!==s||!o._firstPT&&o._initted){if(2!==s&&!G(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},Z=function(t,e,i){for(var s=t._timeline,r=s._timeScale,n=t._startTime;s._timeline;){if(n+=s._startTime,r*=s._timeScale,s._paused)return-100;s=s._timeline}return n/=r,n>e?n-e:i&&n===e||!t._initted&&2*_>n-e?_:(n+=t.totalDuration()/t._timeScale/r)>e+_?0:n-e-_};n._init=function(){var t,e,i,s,r,n=this.vars,a=this._overwrittenProps,o=this._duration,h=!!n.immediateRender,l=n.ease;if(n.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(s in n.startAt)r[s]=n.startAt[s];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&n.lazy!==!1,r.startAt=r.delay=null,this._startAt=D.to(this.target,0,r),h)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(n.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(s in n)U[s]&&"autoCSS"!==s||(i[s]=n[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&n.lazy!==!1,i.immediateRender=h,this._startAt=D.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof T?l:"function"==typeof l?new T(l,n.easeParams):w[l]||D.defaultEase:D.defaultEase,n.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,n.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&D._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),n.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=n.onUpdate,this._initted=!0},n._initProps=function(e,i,s,r){var n,a,o,h,l,_;if(null==e)return!1;F[e._gsTweenID]&&q(),this.vars.css||e.style&&e!==t&&e.nodeType&&N.css&&this.vars.autoCSS!==!1&&z(this.vars,e);for(n in this.vars){if(_=this.vars[n],U[n])_&&(_ instanceof Array||_.push&&c(_))&&-1!==_.join("").indexOf("{self}")&&(this.vars[n]=_=this._swapSelfInParams(_,this));else if(N[n]&&(h=new N[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof _&&"="===_.charAt(1)?parseInt(_.charAt(0)+"1",10)*Number(_.substr(2)):Number(_)-l.s||0;l&&l._next&&(l._next._prev=l)}return r&&this._kill(r,e)?this._initProps(e,i,s,r):this._overwrite>1&&this._firstPT&&s.length>1&&W(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(F[e._gsTweenID]=!0),o)},n.render=function(t,e,i){var s,r,n,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,r="onComplete"),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===_&&"isPause"!==this.data)&&l!==t&&(i=!0,l>_&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:_);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0&&l!==_)&&(r="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==_||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:_)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,p=this._easeType,c=this._easePower;(1===p||3===p&&u>=.5)&&(u=1-u),3===p&&(u*=2),1===c?u*=u:2===c?u*=u*u:3===c?u*=u*u*u:4===c&&(u*=u*u*u*u),this.ratio=1===p?1-u:2===p?u:.5>t/h?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,I.push(this),this._lazy=[t,e],void 0;this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||y))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||y)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||y),0===h&&this._rawPrevTime===_&&a!==_&&(this._rawPrevTime=0))
}},n._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:D.selector(e)||e;var s,r,n,a,o,h,l,_,u;if((c(e)||M(e))&&"number"!=typeof e[0])for(s=e.length;--s>-1;)this._kill(t,e[s])&&(h=!0);else{if(this._targets){for(s=this._targets.length;--s>-1;)if(e===this._targets[s]){o=this._propLookup[s]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[s]=t?this._overwrittenProps[s]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,_=t!==r&&"all"!==r&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(D.onOverwrite||this.vars.onOverwrite)){for(n in l)o[n]&&(u||(u=[]),u.push(n));if(!G(this,i,e,u))return!1}for(n in l)(a=o[n])&&(a.pg&&a.t._kill(l)&&(h=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[n]),_&&(r[n]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},n.invalidate=function(){return this._notifyPluginsOfEnabled&&D._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],A.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-_,this.render(-this._delay)),this},n._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=V(s[i],this,!0);else this._siblings=V(this.target,this,!0)}return A.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?D._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},D.to=function(t,e,i){return new D(t,e,i)},D.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new D(t,e,i)},D.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new D(t,e,s)},D.delayedCall=function(t,e,i,s,r){return new D(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},D.set=function(t,e){return new D(t,0,e)},D.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:D.selector(t)||t;var i,s,r,n;if((c(t)||M(t))&&"number"!=typeof t[0]){for(i=t.length,s=[];--i>-1;)s=s.concat(D.getTweensOf(t[i],e));for(i=s.length;--i>-1;)for(n=s[i],r=i;--r>-1;)n===s[r]&&s.splice(i,1)}else for(s=V(t).concat(),i=s.length;--i>-1;)(s[i]._gc||e&&!s[i].isActive())&&s.splice(i,1);return s},D.killTweensOf=D.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var s=D.getTweensOf(t,e),r=s.length;--r>-1;)s[r]._kill(i,t)};var Q=g("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Q.prototype},!0);if(n=Q.prototype,Q.version="1.10.1",Q.API=2,n._firstPT=null,n._addTween=function(t,e,i,s,r,n){var a,o;return null!=s&&(a="number"==typeof s||"="!==s.charAt(1)?Number(s)-i:parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:r||e,r:n},o._next&&(o._next._prev=o),o):void 0},n.setRatio=function(t){for(var e,i=this._firstPT,s=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):s>e&&e>-s&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},n._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},n._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},D._onPluginEvent=function(t,e){var i,s,r,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,s=r;s&&s.pr>o.pr;)s=s._next;(o._prev=s?s._prev:n)?o._prev._next=o:r=o,(o._next=s)?s._prev=o:n=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},Q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Q.API&&(N[(new t[e])._propName]=t[e]);return!0},d.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,r=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Q.call(this,i,s),this._overwriteProps=r||[]},t.global===!0),o=a.prototype=new Q(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,Q.activate([a]),a},s=t._gsQueue){for(r=0;s.length>r;r++)s[r]();for(n in f)f[n].func||t.console.log("GSAP encountered missing dependency: com.greensock."+n)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
/*! ScrollMagic v2.0.5 | (c) 2015 Jan Paepke (@janpaepke) | license & info: http://scrollmagic.io */

!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ScrollMagic=t()}(this,function(){"use strict";var e=function(){};e.version="2.0.5",window.addEventListener("mousewheel",function(){});var t="data-scrollmagic-pin-spacer";e.Controller=function(r){var o,s,a="ScrollMagic.Controller",l="FORWARD",c="REVERSE",u="PAUSED",f=n.defaults,d=this,h=i.extend({},f,r),g=[],p=!1,v=0,m=u,w=!0,y=0,S=!0,b=function(){for(var e in h)f.hasOwnProperty(e)||delete h[e];if(h.container=i.get.elements(h.container)[0],!h.container)throw a+" init failed.";w=h.container===window||h.container===document.body||!document.body.contains(h.container),w&&(h.container=window),y=z(),h.container.addEventListener("resize",T),h.container.addEventListener("scroll",T),h.refreshInterval=parseInt(h.refreshInterval)||f.refreshInterval,E()},E=function(){h.refreshInterval>0&&(s=window.setTimeout(A,h.refreshInterval))},x=function(){return h.vertical?i.get.scrollTop(h.container):i.get.scrollLeft(h.container)},z=function(){return h.vertical?i.get.height(h.container):i.get.width(h.container)},C=this._setScrollPos=function(e){h.vertical?w?window.scrollTo(i.get.scrollLeft(),e):h.container.scrollTop=e:w?window.scrollTo(e,i.get.scrollTop()):h.container.scrollLeft=e},F=function(){if(S&&p){var e=i.type.Array(p)?p:g.slice(0);p=!1;var t=v;v=d.scrollPos();var n=v-t;0!==n&&(m=n>0?l:c),m===c&&e.reverse(),e.forEach(function(e){e.update(!0)})}},L=function(){o=i.rAF(F)},T=function(e){"resize"==e.type&&(y=z(),m=u),p!==!0&&(p=!0,L())},A=function(){if(!w&&y!=z()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){e=document.createEvent("Event"),e.initEvent("resize",!1,!1)}h.container.dispatchEvent(e)}g.forEach(function(e){e.refresh()}),E()};this._options=h;var O=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(i.type.Array(t))t.forEach(function(e){d.addScene(e)});else if(t instanceof e.Scene)if(t.controller()!==d)t.addTo(d);else if(g.indexOf(t)<0){g.push(t),g=O(g),t.on("shift.controller_sort",function(){g=O(g)});for(var n in h.globalSceneOptions)t[n]&&t[n].call(t,h.globalSceneOptions[n])}return d},this.removeScene=function(e){if(i.type.Array(e))e.forEach(function(e){d.removeScene(e)});else{var t=g.indexOf(e);t>-1&&(e.off("shift.controller_sort"),g.splice(t,1),e.remove())}return d},this.updateScene=function(t,n){return i.type.Array(t)?t.forEach(function(e){d.updateScene(e,n)}):n?t.update(!0):p!==!0&&t instanceof e.Scene&&(p=p||[],-1==p.indexOf(t)&&p.push(t),p=O(p),L()),d},this.update=function(e){return T({type:"resize"}),e&&F(),d},this.scrollTo=function(n,r){if(i.type.Number(n))C.call(h.container,n,r);else if(n instanceof e.Scene)n.controller()===d&&d.scrollTo(n.scrollOffset(),r);else if(i.type.Function(n))C=n;else{var o=i.get.elements(n)[0];if(o){for(;o.parentNode.hasAttribute(t);)o=o.parentNode;var s=h.vertical?"top":"left",a=i.get.offset(h.container),l=i.get.offset(o);w||(a[s]-=d.scrollPos()),d.scrollTo(l[s]-a[s],r)}}return d},this.scrollPos=function(e){return arguments.length?(i.type.Function(e)&&(x=e),d):x.call(d)},this.info=function(e){var t={size:y,vertical:h.vertical,scrollPos:v,scrollDirection:m,container:h.container,isDocument:w};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(){return d},this.enabled=function(e){return arguments.length?(S!=e&&(S=!!e,d.updateScene(g,!0)),d):S},this.destroy=function(e){window.clearTimeout(s);for(var t=g.length;t--;)g[t].destroy(e);return h.container.removeEventListener("resize",T),h.container.removeEventListener("scroll",T),i.cAF(o),null},b(),d};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,t){n.defaults[e]=t},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(n){var o,s,a="BEFORE",l="DURING",c="AFTER",u=r.defaults,f=this,d=i.extend({},u,n),h=a,g=0,p={start:0,end:0},v=0,m=!0,w=function(){for(var e in d)u.hasOwnProperty(e)||delete d[e];for(var t in u)L(t);C()},y={};this.on=function(e,t){return i.type.Function(t)&&(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1];"*"!=r&&(y[r]||(y[r]=[]),y[r].push({namespace:i||"",callback:t}))})),f},this.off=function(e,t){return e?(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1]||"",o="*"===r?Object.keys(y):[r];o.forEach(function(e){for(var n=y[e]||[],r=n.length;r--;){var o=n[r];!o||i!==o.namespace&&"*"!==i||t&&t!=o.callback||n.splice(r,1)}n.length||delete y[e]})}),f):f},this.trigger=function(t,n){if(t){var r=t.trim().split("."),i=r[0],o=r[1],s=y[i];s&&s.forEach(function(t){o&&o!==t.namespace||t.callback.call(f,new e.Event(i,t.namespace,f,n))})}return f},f.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?E():"reverse"===e.what&&f.update())}).on("shift.internal",function(){S(),f.update()}),this.addTo=function(t){return t instanceof e.Controller&&s!=t&&(s&&s.removeScene(f),s=t,C(),b(!0),E(!0),S(),s.info("container").addEventListener("resize",x),t.addScene(f),f.trigger("add",{controller:s}),f.update()),f},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,f.update(!0)),f):m},this.remove=function(){if(s){s.info("container").removeEventListener("resize",x);var e=s;s=void 0,e.removeScene(f),f.trigger("remove")}return f},this.destroy=function(e){return f.trigger("destroy",{reset:e}),f.remove(),f.off("*.*"),null},this.update=function(e){if(s)if(e)if(s.enabled()&&m){var t,n=s.info("scrollPos");t=d.duration>0?(n-p.start)/(p.end-p.start):n>=p.start?1:0,f.trigger("update",{startPos:p.start,endPos:p.end,scrollPos:n}),f.progress(t)}else T&&h===l&&O(!0);else s.updateScene(f,!1);return f},this.refresh=function(){return b(),E(),f},this.progress=function(e){if(arguments.length){var t=!1,n=h,r=s?s.info("scrollDirection"):"PAUSED",i=d.reverse||e>=g;if(0===d.duration?(t=g!=e,g=1>e&&i?0:1,h=0===g?a:l):0>e&&h!==a&&i?(g=0,h=a,t=!0):e>=0&&1>e&&i?(g=e,h=l,t=!0):e>=1&&h!==c?(g=1,h=c,t=!0):h!==l||i||O(),t){var o={progress:g,state:h,scrollDirection:r},u=h!=n,p=function(e){f.trigger(e,o)};u&&n!==l&&(p("enter"),p(n===a?"start":"end")),p("progress"),u&&h!==l&&(p(h===a?"start":"end"),p("leave"))}return f}return g};var S=function(){p={start:v+d.offset},s&&d.triggerElement&&(p.start-=s.info("size")*d.triggerHook),p.end=p.start+d.duration},b=function(e){if(o){var t="duration";F(t,o.call(f))&&!e&&(f.trigger("change",{what:t,newval:d[t]}),f.trigger("shift",{reason:t}))}},E=function(e){var n=0,r=d.triggerElement;if(s&&r){for(var o=s.info(),a=i.get.offset(o.container),l=o.vertical?"top":"left";r.parentNode.hasAttribute(t);)r=r.parentNode;var c=i.get.offset(r);o.isDocument||(a[l]-=s.scrollPos()),n=c[l]-a[l]}var u=n!=v;v=n,u&&!e&&f.trigger("shift",{reason:"triggerElementPosition"})},x=function(){d.triggerHook>0&&f.trigger("shift",{reason:"containerResize"})},z=i.extend(r.validate,{duration:function(e){if(i.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return s?s.info("size")*t:0}}if(i.type.Function(e)){o=e;try{e=parseFloat(o())}catch(t){e=-1}}if(e=parseFloat(e),!i.type.Number(e)||0>e)throw o?(o=void 0,0):0;return e}}),C=function(e){e=arguments.length?[e]:Object.keys(z),e.forEach(function(e){var t;if(z[e])try{t=z[e](d[e])}catch(n){t=u[e]}finally{d[e]=t}})},F=function(e,t){var n=!1,r=d[e];return d[e]!=t&&(d[e]=t,C(e),n=r!=d[e]),n},L=function(e){f[e]||(f[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),F(e,t)&&(f.trigger("change",{what:e,newval:d[e]}),r.shifts.indexOf(e)>-1&&f.trigger("shift",{reason:e})),f):d[e]})};this.controller=function(){return s},this.state=function(){return h},this.scrollOffset=function(){return p.start},this.triggerPosition=function(){var e=d.offset;return s&&(e+=d.triggerElement?v:s.info("size")*f.triggerHook()),e};var T,A;f.on("shift.internal",function(e){var t="duration"===e.reason;(h===c&&t||h===l&&0===d.duration)&&O(),t&&_()}).on("progress.internal",function(){O()}).on("add.internal",function(){_()}).on("destroy.internal",function(e){f.removePin(e.reset)});var O=function(e){if(T&&s){var t=s.info(),n=A.spacer.firstChild;if(e||h!==l){var r={position:A.inFlow?"relative":"absolute",top:0,left:0},o=i.css(n,"position")!=r.position;A.pushFollowers?d.duration>0&&(h===c&&0===parseFloat(i.css(A.spacer,"padding-top"))?o=!0:h===a&&0===parseFloat(i.css(A.spacer,"padding-bottom"))&&(o=!0)):r[t.vertical?"top":"left"]=d.duration*g,i.css(n,r),o&&_()}else{"fixed"!=i.css(n,"position")&&(i.css(n,{position:"fixed"}),_());var u=i.get.offset(A.spacer,!0),f=d.reverse||0===d.duration?t.scrollPos-p.start:Math.round(g*d.duration*10)/10;u[t.vertical?"top":"left"]+=f,i.css(A.spacer.firstChild,{top:u.top,left:u.left})}}},_=function(){if(T&&s&&A.inFlow){var e=h===l,t=s.info("vertical"),n=A.spacer.firstChild,r=i.isMarginCollapseType(i.css(A.spacer,"display")),o={};A.relSize.width||A.relSize.autoFullWidth?e?i.css(T,{width:i.get.width(A.spacer)}):i.css(T,{width:"100%"}):(o["min-width"]=i.get.width(t?T:n,!0,!0),o.width=e?o["min-width"]:"auto"),A.relSize.height?e?i.css(T,{height:i.get.height(A.spacer)-(A.pushFollowers?d.duration:0)}):i.css(T,{height:"100%"}):(o["min-height"]=i.get.height(t?n:T,!0,!r),o.height=e?o["min-height"]:"auto"),A.pushFollowers&&(o["padding"+(t?"Top":"Left")]=d.duration*g,o["padding"+(t?"Bottom":"Right")]=d.duration*(1-g)),i.css(A.spacer,o)}},N=function(){s&&T&&h===l&&!s.info("isDocument")&&O()},P=function(){s&&T&&h===l&&((A.relSize.width||A.relSize.autoFullWidth)&&i.get.width(window)!=i.get.width(A.spacer.parentNode)||A.relSize.height&&i.get.height(window)!=i.get.height(A.spacer.parentNode))&&_()},D=function(e){s&&T&&h===l&&!s.info("isDocument")&&(e.preventDefault(),s._setScrollPos(s.info("scrollPos")-((e.wheelDelta||e[s.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,n){var r={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(n=i.extend({},r,n),e=i.get.elements(e)[0],!e)return f;if("fixed"===i.css(e,"position"))return f;if(T){if(T===e)return f;f.removePin()}T=e;var o=T.parentNode.style.display,s=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];T.parentNode.style.display="none";var a="absolute"!=i.css(T,"position"),l=i.css(T,s.concat(["display"])),c=i.css(T,["width","height"]);T.parentNode.style.display=o,!a&&n.pushFollowers&&(n.pushFollowers=!1);var u=T.parentNode.insertBefore(document.createElement("div"),T),d=i.extend(l,{position:a?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(a||i.extend(d,i.css(T,["width","height"])),i.css(u,d),u.setAttribute(t,""),i.addClass(u,n.spacerClass),A={spacer:u,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1),autoFullWidth:"auto"===c.width&&a&&i.isMarginCollapseType(l.display)},pushFollowers:n.pushFollowers,inFlow:a},!T.___origStyle){T.___origStyle={};var h=T.style,g=s.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);g.forEach(function(e){T.___origStyle[e]=h[e]||""})}return A.relSize.width&&i.css(u,{width:c.width}),A.relSize.height&&i.css(u,{height:c.height}),u.appendChild(T),i.css(T,{position:a?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(A.relSize.width||A.relSize.autoFullWidth)&&i.css(T,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",N),window.addEventListener("resize",N),window.addEventListener("resize",P),T.addEventListener("mousewheel",D),T.addEventListener("DOMMouseScroll",D),O(),f},this.removePin=function(e){if(T){if(h===l&&O(!0),e||!s){var n=A.spacer.firstChild;if(n.hasAttribute(t)){var r=A.spacer.style,o=["margin","marginLeft","marginRight","marginTop","marginBottom"];margins={},o.forEach(function(e){margins[e]=r[e]||""}),i.css(n,margins)}A.spacer.parentNode.insertBefore(n,A.spacer),A.spacer.parentNode.removeChild(A.spacer),T.parentNode.hasAttribute(t)||(i.css(T,T.___origStyle),delete T.___origStyle)}window.removeEventListener("scroll",N),window.removeEventListener("resize",N),window.removeEventListener("resize",P),T.removeEventListener("mousewheel",D),T.removeEventListener("DOMMouseScroll",D),T=void 0}return f};var R,k=[];return f.on("destroy.internal",function(e){f.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var n=i.get.elements(e);return 0!==n.length&&i.type.String(t)?(k.length>0&&f.removeClassToggle(),R=t,k=n,f.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?i.addClass:i.removeClass;k.forEach(function(e){t(e,R)})}),f):f},this.removeClassToggle=function(e){return e&&k.forEach(function(e){i.removeClass(e,R)}),f.off("start.internal_class end.internal_class"),R=void 0,k=[],f},w(),f};var r={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!i.type.Number(e))throw 0;return e},triggerElement:function(e){if(e=e||void 0){var t=i.get.elements(e)[0];if(!t)throw 0;e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(i.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw 0;e=t[e]}return e},reverse:function(e){return!!e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(e,t,n,i){e in r.defaults||(r.defaults[e]=t,r.validate[e]=n,i&&r.shifts.push(e))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,r){r=r||{};for(var i in r)this[i]=r[i];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var i=e._util=function(e){var t,n={},r=function(e){return parseFloat(e)||0},i=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},o=function(t,n,o,s){if(n=n===document?e:n,n===e)s=!1;else if(!f.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var a=(o?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(o&&s){var l=i(n);a+="Height"===t?r(l.marginTop)+r(l.marginBottom):r(l.marginLeft)+r(l.marginRight)}return a},s=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var a=0,l=["ms","moz","webkit","o"],c=e.requestAnimationFrame,u=e.cancelAnimationFrame;for(t=0;!c&&t<l.length;++t)c=e[l[t]+"RequestAnimationFrame"],u=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];c||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),i=e.setTimeout(function(){t(n+r)},r);return a=n+r,i}),u||(u=function(t){e.clearTimeout(t)}),n.rAF=c.bind(e),n.cAF=u.bind(e);var f=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};f.String=function(e){return"string"===f(e)},f.Function=function(e){return"function"===f(e)},f.Array=function(e){return Array.isArray(e)},f.Number=function(e){return!f.Array(e)&&e-parseFloat(e)+1>=0},f.DomElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var d=n.get={};return d.elements=function(t){var n=[];if(f.String(t))try{t=document.querySelectorAll(t)}catch(e){return n}if("nodelist"===f(t)||f.Array(t))for(var r=0,i=n.length=t.length;i>r;r++){var o=t[r];n[r]=f.DomElement(o)?o:d.elements(o)}else(f.DomElement(t)||t===document||t===e)&&(n=[t]);return n},d.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},d.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},d.width=function(e,t,n){return o("width",e,t,n)},d.height=function(e,t,n){return o("height",e,t,n)},d.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=d.scrollTop(),n.left+=d.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(f.String(t))return i(e)[s(t)];if(f.Array(t)){var n={},r=i(e);return t.forEach(function(e){n[e]=r[s(e)]}),n}for(var o in t){var a=t[o];a==parseFloat(a)&&(a+="px"),e.style[s(o)]=a}},n}(window||{});return e});
/*!
 * ScrollMagic v2.0.5 (2015-04-29)
 * The javascript library for magical scroll interactions.
 * (c) 2015 Jan Paepke (@janpaepke)
 * Project Website: http://scrollmagic.io
 * 
 * @version 2.0.5
 * @license Dual licensed under MIT license and GPL.
 * @author Jan Paepke - e-mail@janpaepke.de
 *
 * @file ScrollMagic GSAP Animation Plugin.
 *
 * requires: GSAP ~1.14
 * Powered by the Greensock Animation Platform (GSAP): http://www.greensock.com/js
 * Greensock License info at http://www.greensock.com/licensing/
 */
/**
 * This plugin is meant to be used in conjunction with the Greensock Animation Plattform.  
 * It offers an easy API to trigger Tweens or synchronize them to the scrollbar movement.
 *
 * Both the `lite` and the `max` versions of the GSAP library are supported.  
 * The most basic requirement is `TweenLite`.
 * 
 * To have access to this extension, please include `plugins/animation.gsap.js`.
 * @requires {@link http://greensock.com/gsap|GSAP ~1.14.x}
 * @mixin animation.GSAP
 */
(function (root, factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD. Register as an anonymous module.
		define(['ScrollMagic', 'TweenMax', 'TimelineMax'], factory);
	} else if (typeof exports === 'object') {
		// CommonJS
		// Loads whole gsap package onto global scope.
		require('gsap');
		factory(require('scrollmagic'), TweenMax, TimelineMax);
	} else {
		// Browser globals
		factory(root.ScrollMagic || (root.jQuery && root.jQuery.ScrollMagic), root.TweenMax || root.TweenLite, root.TimelineMax || root.TimelineLite);
	}
}(this, function (ScrollMagic, Tween, Timeline) {
	"use strict";
	var NAMESPACE = "animation.gsap";

	var
	console = window.console || {},
		err = Function.prototype.bind.call(console.error || console.log ||
		function () {}, console);
	if (!ScrollMagic) {
		err("(" + NAMESPACE + ") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs.");
	}
	if (!Tween) {
		err("(" + NAMESPACE + ") -> ERROR: TweenLite or TweenMax could not be found. Please make sure GSAP is loaded before ScrollMagic or use an asynchronous loader like requirejs.");
	}

/*
	 * ----------------------------------------------------------------
	 * Extensions for Scene
	 * ----------------------------------------------------------------
	 */
	/**
	 * Every instance of ScrollMagic.Scene now accepts an additional option.  
	 * See {@link ScrollMagic.Scene} for a complete list of the standard options.
	 * @memberof! animation.GSAP#
	 * @method new ScrollMagic.Scene(options)
	 * @example
	 * var scene = new ScrollMagic.Scene({tweenChanges: true});
	 *
	 * @param {object} [options] - Options for the Scene. The options can be updated at any time.
	 * @param {boolean} [options.tweenChanges=false] - Tweens Animation to the progress target instead of setting it.  
	 Does not affect animations where duration is `0`.
	 */
	/**
	 * **Get** or **Set** the tweenChanges option value.  
	 * This only affects scenes with a duration. If `tweenChanges` is `true`, the progress update when scrolling will not be immediate, but instead the animation will smoothly animate to the target state.  
	 * For a better understanding, try enabling and disabling this option in the [Scene Manipulation Example](../examples/basic/scene_manipulation.html).
	 * @memberof! animation.GSAP#
	 * @method Scene.tweenChanges
	 * 
	 * @example
	 * // get the current tweenChanges option
	 * var tweenChanges = scene.tweenChanges();
	 *
	 * // set new tweenChanges option
	 * scene.tweenChanges(true);
	 *
	 * @fires {@link Scene.change}, when used as setter
	 * @param {boolean} [newTweenChanges] - The new tweenChanges setting of the scene.
	 * @returns {boolean} `get` -  Current tweenChanges option value.
	 * @returns {Scene} `set` -  Parent object for chaining.
	 */
	// add option (TODO: DOC (private for dev))
	ScrollMagic.Scene.addOption("tweenChanges", // name
	false, // default


	function (val) { // validation callback
		return !!val;
	});
	// extend scene
	ScrollMagic.Scene.extend(function () {
		var Scene = this,
			_tween;

		var log = function () {
			if (Scene._log) { // not available, when main source minified
				Array.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ")", "->");
				Scene._log.apply(this, arguments);
			}
		};

		// set listeners
		Scene.on("progress.plugin_gsap", function () {
			updateTweenProgress();
		});
		Scene.on("destroy.plugin_gsap", function (e) {
			Scene.removeTween(e.reset);
		});

		/**
		 * Update the tween progress to current position.
		 * @private
		 */
		var updateTweenProgress = function () {
			if (_tween) {
				var
				progress = Scene.progress(),
					state = Scene.state();
				if (_tween.repeat && _tween.repeat() === -1) {
					// infinite loop, so not in relation to progress
					if (state === 'DURING' && _tween.paused()) {
						_tween.play();
					} else if (state !== 'DURING' && !_tween.paused()) {
						_tween.pause();
					}
				} else if (progress != _tween.progress()) { // do we even need to update the progress?
					// no infinite loop - so should we just play or go to a specific point in time?
					if (Scene.duration() === 0) {
						// play the animation
						if (progress > 0) { // play from 0 to 1
							_tween.play();
						} else { // play from 1 to 0
							_tween.reverse();
						}
					} else {
						// go to a specific point in time
						if (Scene.tweenChanges() && _tween.tweenTo) {
							// go smooth
							_tween.tweenTo(progress * _tween.duration());
						} else {
							// just hard set it
							_tween.progress(progress).pause();
						}
					}
				}
			}
		};

		/**
		 * Add a tween to the scene.  
		 * If you want to add multiple tweens, add them into a GSAP Timeline object and supply it instead (see example below).  
		 * 
		 * If the scene has a duration, the tween's duration will be projected to the scroll distance of the scene, meaning its progress will be synced to scrollbar movement.  
		 * For a scene with a duration of `0`, the tween will be triggered when scrolling forward past the scene's trigger position and reversed, when scrolling back.  
		 * To gain better understanding, check out the [Simple Tweening example](../examples/basic/simple_tweening.html).
		 *
		 * Instead of supplying a tween this method can also be used as a shorthand for `TweenMax.to()` (see example below).
		 * @memberof! animation.GSAP#
		 *
		 * @example
		 * // add a single tween directly
		 * scene.setTween(TweenMax.to("obj"), 1, {x: 100});
		 *
		 * // add a single tween via variable
		 * var tween = TweenMax.to("obj"), 1, {x: 100};
		 * scene.setTween(tween);
		 *
		 * // add multiple tweens, wrapped in a timeline.
		 * var timeline = new TimelineMax();
		 * var tween1 = TweenMax.from("obj1", 1, {x: 100});
		 * var tween2 = TweenMax.to("obj2", 1, {y: 100});
		 * timeline
		 *		.add(tween1)
		 *		.add(tween2);
		 * scene.addTween(timeline);
		 *
		 * // short hand to add a TweenMax.to() tween
		 * scene.setTween("obj3", 0.5, {y: 100});
		 *
		 * // short hand to add a TweenMax.to() tween for 1 second
		 * // this is useful, when the scene has a duration and the tween duration isn't important anyway
		 * scene.setTween("obj3", {y: 100});
		 *
		 * @param {(object|string)} TweenObject - A TweenMax, TweenLite, TimelineMax or TimelineLite object that should be animated in the scene. Can also be a Dom Element or Selector, when using direct tween definition (see examples).
		 * @param {(number|object)} duration - A duration for the tween, or tween parameters. If an object containing parameters are supplied, a default duration of 1 will be used.
		 * @param {object} params - The parameters for the tween
		 * @returns {Scene} Parent object for chaining.
		 */
		Scene.setTween = function (TweenObject, duration, params) {
			var newTween;
			if (arguments.length > 1) {
				if (arguments.length < 3) {
					params = duration;
					duration = 1;
				}
				TweenObject = Tween.to(TweenObject, duration, params);
			}
			try {
				// wrap Tween into a Timeline Object if available to include delay and repeats in the duration and standardize methods.
				if (Timeline) {
					newTween = new Timeline({
						smoothChildTiming: true
					}).add(TweenObject);
				} else {
					newTween = TweenObject;
				}
				newTween.pause();
			} catch (e) {
				log(1, "ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject");
				return Scene;
			}
			if (_tween) { // kill old tween?
				Scene.removeTween();
			}
			_tween = newTween;

			// some properties need to be transferred it to the wrapper, otherwise they would get lost.
			if (TweenObject.repeat && TweenObject.repeat() === -1) { // TweenMax or TimelineMax Object?
				_tween.repeat(-1);
				_tween.yoyo(TweenObject.yoyo());
			}
			// Some tween validations and debugging helpers
			if (Scene.tweenChanges() && !_tween.tweenTo) {
				log(2, "WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic.");
			}

			// check if there are position tweens defined for the trigger and warn about it :)
			if (_tween && Scene.controller() && Scene.triggerElement() && Scene.loglevel() >= 2) { // controller is needed to know scroll direction.
				var
				triggerTweens = Tween.getTweensOf(Scene.triggerElement()),
					vertical = Scene.controller().info("vertical");
				triggerTweens.forEach(function (value, index) {
					var
					tweenvars = value.vars.css || value.vars,
						condition = vertical ? (tweenvars.top !== undefined || tweenvars.bottom !== undefined) : (tweenvars.left !== undefined || tweenvars.right !== undefined);
					if (condition) {
						log(2, "WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!");
						return false;
					}
				});
			}

			// warn about tween overwrites, when an element is tweened multiple times
			if (parseFloat(TweenLite.version) >= 1.14) { // onOverwrite only present since GSAP v1.14.0
				var
				list = _tween.getChildren ? _tween.getChildren(true, true, false) : [_tween],
					// get all nested tween objects
					newCallback = function () {
						log(2, "WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another");
					};
				for (var i = 0, thisTween, oldCallback; i < list.length; i++) { /*jshint loopfunc: true */
					thisTween = list[i];
					if (oldCallback !== newCallback) { // if tweens is added more than once
						oldCallback = thisTween.vars.onOverwrite;
						thisTween.vars.onOverwrite = function () {
							if (oldCallback) {
								oldCallback.apply(this, arguments);
							}
							newCallback.apply(this, arguments);
						};
					}
				}
			}
			log(3, "added tween");

			updateTweenProgress();
			return Scene;
		};

		/**
		 * Remove the tween from the scene.  
		 * This will terminate the control of the Scene over the tween.
		 *
		 * Using the reset option you can decide if the tween should remain in the current state or be rewound to set the target elements back to the state they were in before the tween was added to the scene.
		 * @memberof! animation.GSAP#
		 *
		 * @example
		 * // remove the tween from the scene without resetting it
		 * scene.removeTween();
		 *
		 * // remove the tween from the scene and reset it to initial position
		 * scene.removeTween(true);
		 *
		 * @param {boolean} [reset=false] - If `true` the tween will be reset to its initial values.
		 * @returns {Scene} Parent object for chaining.
		 */
		Scene.removeTween = function (reset) {
			if (_tween) {
				if (reset) {
					_tween.progress(0).pause();
				}
				_tween.kill();
				_tween = undefined;
				log(3, "removed tween (reset: " + (reset ? "true" : "false") + ")");
			}
			return Scene;
		};

	});
}));
var runPortalAdvert = function () {

	var conf = {
		width: 0, // ширина контейнера
		height: 0, // высота контейнера
		heightHeader: 0, // высота шапки
		heightMenu: 0, // высота меню
		winWidth: 0, // ширина окна браузера
		bgPositionY: 0,
		scrollTop: 0
	};

	var elem = {};
	var tab_container = {};


	var init = function (tab_container_el) {

		tab_container = $(tab_container_el);

		elem.pageBody = $('body');
		elem.price_container_obj = $('.price__container');
		elem.windowHeight = $(window).height();
		elem.scrollHeader = $('.scroll__header-wrapper'); //  шапка
		elem.scrollBlock = $('.scroll__menu-wrapper'); //  фиксируемый блок
		elem.scrollContainer = $('.scroll__container'); // контейнер с ценами
		elem.parallaxContainer = tab_container.find('.scroll__content--left'); //  контейнер с паралаксом



		conf.heightHeader = elem.scrollHeader.height() + 62;
		conf.bgPositionY = elem.price_container_obj.offset().top + conf.heightHeader;
		conf.width = elem.scrollContainer.width();
		conf.height = elem.scrollContainer.height();
		conf.winWidth = elem.pageBody.width();
		conf.heightMenu = elem.scrollBlock.height();
		conf.scrollTop = $(window).scrollTop();

		var controller = new ScrollMagic.Controller({
			globalSceneOptions: {
				triggerHook: 'onLeave'
			}
		});

		var slides = tab_container[0].querySelectorAll('.parallaxParent');

		for (var i = 0; i < slides.length; i++) {

			new ScrollMagic.Scene({
				triggerElement: slides[i]
			})
				.setPin(slides[i])
				.setClassToggle("a[href='#prc" + (i + 1) + "']", "scroll__menu-link--active")
				.addTo(controller)
		}

		paralaxImagePos();
		setBgPosition();
		//fixedBlock();

		tab_container.find('.parallaxImage').css("background-position", $('.scroll__img-wrapper--left').offset().left + 'px ' + ($('.price__container').offset().top + $('.scroll__header-wrapper').height() + 62) + 'px');


		$(window).resize(function (e) {
			conf.winWidth = elem.pageBody.width();
			width = elem.scrollContainer.width();
			elem.scrollHeader.css({
				width: width + 'px'
			});

			paralaxImagePos();
			setBgPosition();
			//fixedBlock();
		});

		$(window).scroll(function (e) {
			conf.scrollTop = $(window).scrollTop();

			paralaxImagePos();
			setBgPosition();
			//fixedBlock();
		});

		$(document).on('click', '.scroll__menu-link', function (e) {
			e.preventDefault();
			var el = $(this).attr('href');
			$('html, body').stop().animate({
				scrollTop: $(el).offset().top - ((elem.windowHeight / 2) - (elem.parallaxContainer.height() / 2 ))
			}, 800);
			return false;
		});

	};

	var setBgPosition = function() {

		if (conf.winWidth > 768) {

			var scrollNodeOffset = $('.scroll__node').offset().top;

			if ((elem.parallaxContainer.offset().top - conf.scrollTop ) > ((elem.windowHeight / 2) - (elem.parallaxContainer.height() / 2 ))) {
				conf.bgPositionY = $('.price__container').offset().top + conf.heightHeader - conf.scrollTop;
			}
			else if ((scrollNodeOffset - conf.scrollTop) < ((elem.windowHeight / 2) + (elem.parallaxContainer.height() / 2 ))) {
				conf.bgPositionY = scrollNodeOffset - (conf.scrollTop + elem.parallaxContainer.height() - 40);
			}
		}
	};


	//считаем позицию ноутбука
	var paralaxImagePos = function() {

		var bgPosition = tab_container.find('.scroll__img-wrapper--left').offset().left + 'px ' + conf.bgPositionY + 'px';
		var elem = tab_container.find('.parallaxImage');

		for (var i = 0; i < elem.length; i++) {
			elem[i].style.backgroundPosition = bgPosition;
		}
	};


	////фиксируем шапки при скролле
	//var fixedBlock = function() {
	//	if (conf.winWidth > 768) {
	//		if (( conf.scrollTop >= (elem.parallaxContainer.offset().top - conf.heightMenu)) && (conf.scrollTop <= ($('.scroll__node').offset().top - conf.heightMenu))) {
	//			elem.scrollBlock.css({
	//				position: 'fixed',
	//				top: '0',
	//				width: conf.width + 'px'
	//			});
	//		}
	//		else {
	//			elem.scrollBlock.css({
	//				position: 'inherit',
	//				width: 'inherit'
	//			});
	//		}
	//	}
	//	else {
	//		elem.scrollBlock.css({
	//			position: 'inherit',
	//			width: 'inherit'
	//		});
	//	}
	//};


	return {
		init: init
	};

};


/*
 *  jQuery teaserBranding v1
 *
 *  pixel_view_url    -   url зеро пикселя
 *  pixel_click_url   -   url клик пикселя
 *
 *  Copyright (c) 2016 sportbox.ru
 *
 */

(function ($) {

    $.fn.teaserBranding = function (options) {

        var settings = $.extend({
            'pixel_view_url': '',
            'pixel_click_url': ''
        }, options);

        var appendZeroPixels = function (element) {
            if (settings.pixel_view_url == '') {
                return;
            }
            if ($(element).data('zeroPixelPrepended')) {
                return;
            }
            $(element).data('zeroPixelPrepended', true);
            var RndNum4NoCash = Math.round(Math.random() * 1000000000);
            var ar_Tail = 'unknown';
            if (document.referrer) ar_Tail = encodeURI(document.referrer);
            var url = settings.pixel_view_url;
            url += '&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail;
            $('body').append('<img src="' + url + '" border=0 width=0 height=0 style="position: absolute; left: -5000px">');
        };

        var appendClickPixels = function (element) {
            if (settings.pixel_click_url == '') {
                return;
            }
            $(element).unbind('click');
            $(element).click(function (e) {
                e.preventDefault();
                var link = $(element).attr('href');
                var RndNum4NoCash2 = Math.round(Math.random() * 1000000000);
                $('body').append('<img src="' + settings.pixel_click_url + '&rnd=' + RndNum4NoCash2 + '">');
                setTimeout(function () {
                    location.href = link;
                }, 700);
            });
        };

        return this.each(function () {
            var element = this;
            appendZeroPixels(element);
            appendClickPixels(element);
            $(document).on('moreReadLoadSuccessEnd', function () {
                appendZeroPixels(element);
                appendClickPixels(element);
            });
        });

    };
})(jQuery);
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(10),i=n.n(a),l=n(22),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.widgets||"object"===u(window.widgets)||window.widgets instanceof Array||(window.widgets={}),window.widgets.bannerWithCountdown=function(e,t){i.a.render(o.a.createElement(l.default,{banner:t,__source:{fileName:"/var/www/components/src/sportbox.js",lineNumber:9},__self:this}),document.getElementById(e))},window.sbExt=window.widgets},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";
/** @license React v16.3.2
 * react.development.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=n(3),r=n(4),o=n(5),a=n(6),i=n(7),l=n(8),u="function"==typeof Symbol&&Symbol.for,s=u?Symbol.for("react.element"):60103,c=u?Symbol.for("react.call"):60104,d=u?Symbol.for("react.return"):60105,f=u?Symbol.for("react.portal"):60106,p=u?Symbol.for("react.fragment"):60107,m=u?Symbol.for("react.strict_mode"):60108,h=u?Symbol.for("react.provider"):60109,v=u?Symbol.for("react.context"):60110,g=u?Symbol.for("react.async_mode"):60111,y=u?Symbol.for("react.forward_ref"):60112,b="function"==typeof Symbol&&Symbol.iterator,w="@@iterator";function k(e){if(null===e||void 0===e)return null;var t=b&&e[b]||e[w];return"function"==typeof t?t:null}var C=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,a="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.warn(a);try{throw new Error(a)}catch(e){}}).apply(void 0,[t].concat(r))}},x={};function _(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",o=r+"."+t;x[o]||(a(!1,"Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),x[o]=!0)}var T={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){_(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){_(e,"replaceState")},enqueueSetState:function(e,t,n,r){_(e,"setState")}};function S(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||T}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&r(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var E={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},P=function(e,t){Object.defineProperty(S.prototype,e,{get:function(){C(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var N in E)E.hasOwnProperty(N)&&P(N,E[N]);function R(){}function I(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||T}R.prototype=S.prototype;var O=I.prototype=new R;O.constructor=I,t(O,S.prototype),O.isPureReactComponent=!0;var D={current:null},U=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0},A=void 0,F=void 0;function j(e){if(U.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function W(e){if(U.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}var L=function(e,t,n,r,o,a,i){var l={$$typeof:s,type:e,key:t,ref:n,props:i,_owner:a,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l};function z(e,t,n){var r=void 0,o={},i=null,l=null,u=null,c=null;if(null!=t)for(r in j(t)&&(l=t.ref),W(t)&&(i=""+t.key),u=void 0===t.__self?null:t.__self,c=void 0===t.__source?null:t.__source,t)U.call(t,r)&&!M.hasOwnProperty(r)&&(o[r]=t[r]);var d=arguments.length-2;if(1===d)o.children=n;else if(d>1){for(var f=Array(d),p=0;p<d;p++)f[p]=arguments[p+2];Object.freeze&&Object.freeze(f),o.children=f}if(e&&e.defaultProps){var m=e.defaultProps;for(r in m)void 0===o[r]&&(o[r]=m[r])}if((i||l)&&(void 0===o.$$typeof||o.$$typeof!==s)){var h="function"==typeof e?e.displayName||e.name||"Unknown":e;i&&function(e,t){var n=function(){A||(A=!0,a(!1,"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(o,h),l&&function(e,t){var n=function(){F||(F=!0,a(!1,"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(o,h)}return L(e,i,l,u,c,D.current,o)}function H(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var B={getCurrentStack:null,getStackAddendum:function(){var e=B.getCurrentStack;return e?e():null}},V=".",q=":";var K=!1,$=/\/+/g;function Q(e){return(""+e).replace($,"$&/")}var Y=10,X=[];function G(e,t,n,r){if(X.length){var o=X.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function Z(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,X.length<Y&&X.push(e)}function J(e,t,n){return null==e?0:function e(t,n,o,i){var l=typeof t;"undefined"!==l&&"boolean"!==l||(t=null);var u=!1;if(null===t)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case s:case f:u=!0}}if(u)return o(i,t,""===n?V+ee(t,0):n),1;var c=void 0,d=0,p=""===n?V:n+q;if(Array.isArray(t))for(var m=0;m<t.length;m++)d+=e(c=t[m],p+ee(c,m),o,i);else{var h=k(t);if("function"==typeof h){h===t.entries&&(K||a(!1,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",B.getStackAddendum()),K=!0);for(var v=h.call(t),g=void 0,y=0;!(g=v.next()).done;)d+=e(c=g.value,p+ee(c,y++),o,i)}else if("object"===l){var b;b=" If you meant to render a collection of children, use an array instead."+B.getStackAddendum();var w=""+t;r(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===w?"object with keys {"+Object.keys(t).join(", ")+"}":w,b)}}return d}(e,"",t,n)}function ee(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function te(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function ne(e,t,n){var r,o,a=e.result,l=e.keyPrefix,u=e.func,s=e.context,c=u.call(s,t,e.count++);Array.isArray(c)?re(c,a,n,i.thatReturnsArgument):null!=c&&(H(c)&&(r=c,o=l+(!c.key||t&&t.key===c.key?"":Q(c.key)+"/")+n,c=L(r.type,o,r.ref,r._self,r._source,r._owner,r.props)),a.push(c))}function re(e,t,n,r,o){var a="";null!=n&&(a=Q(n)+"/");var i=G(t,a,r,o);J(e,ne,i),Z(i)}function oe(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case p:return"ReactFragment";case f:return"ReactPortal";case c:return"ReactCall";case d:return"ReactReturn"}if("object"==typeof t&&null!==t)switch(t.$$typeof){case y:var n=t.render.displayName||t.render.name||"";return""!==n?"ForwardRef("+n+")":"ForwardRef"}return null}var ae,ie=void 0,le=void 0,ue=function(){};function se(){if(D.current){var e=oe(D.current);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ie=null,le=!1,ae=function(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type===p?"React.Fragment":e.type.displayName||e.type.name||"Unknown"},ue=function(){var e="";if(ie){var t=ae(ie),n=ie._owner;e+=function(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}(t,ie._source,n&&oe(n))}return e+=B.getStackAddendum()||""};var ce={};function de(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=se();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!ce[n]){ce[n]=!0;var r="";e&&e._owner&&e._owner!==D.current&&(r=" It was passed a child from "+oe(e._owner)+"."),ie=e,a(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.%s',n,r,ue()),ie=null}}}function fe(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];H(r)&&de(r,t)}else if(H(e))e._store&&(e._store.validated=!0);else if(e){var o=k(e);if("function"==typeof o&&o!==e.entries)for(var a=o.call(e),i=void 0;!(i=a.next()).done;)H(i.value)&&de(i.value,t)}}function pe(e){var t=e.type;if("function"==typeof t){var n=t.displayName||t.name,r=t.propTypes;r?(ie=e,l(r,e.props,"prop",n,ue),ie=null):void 0===t.PropTypes||le||(le=!0,a(!1,"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",n||"Unknown")),"function"==typeof t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved||a(!1,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."))}}function me(e,t,n){var r=function(e){return"string"==typeof e||"function"==typeof e||e===p||e===g||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===v||e.$$typeof===y)}(e);if(!r){var o="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(o+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var i=function(e){if(null!==e&&void 0!==e&&void 0!==e.__source){var t=e.__source;return"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+"."}return""}(t);o+=i||se(),o+=ue()||"";var l=void 0;l=null===e?"null":Array.isArray(e)?"array":typeof e,a(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",l,o)}var u=z.apply(this,arguments);if(null==u)return u;if(r)for(var s=2;s<arguments.length;s++)fe(arguments[s],e);return e===p?function(e){ie=e;for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){a(!1,"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.%s",r,ue());break}}null!==e.ref&&a(!1,"Invalid attribute `ref` supplied to `React.Fragment`.%s",ue()),ie=null}(u):pe(u),u}var he={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return re(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;var r=G(null,null,t,n);J(e,te,r),Z(r)},count:function(e,t){return J(e,i.thatReturnsNull,null)},toArray:function(e){var t=[];return re(e,t,null,i.thatReturnsArgument),t},only:function(e){return H(e)||r(!1,"React.Children.only expected to receive a single React element child."),e}},createRef:function(){var e={current:null};return Object.seal(e),e},Component:S,PureComponent:I,createContext:function(e,t){void 0===t?t=null:null!==t&&"function"!=typeof t&&a(!1,"createContext: Expected the optional second argument to be a function. Instead received: %s",t);var n={$$typeof:v,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null};return n.Provider={$$typeof:h,_context:n},n.Consumer=n,n._currentRenderer=null,n},forwardRef:function(e){return"function"!=typeof e&&a(!1,"forwardRef requires a render function but was given %s.",null===e?"null":typeof e),{$$typeof:y,render:e}},Fragment:p,StrictMode:m,unstable_AsyncMode:g,createElement:me,cloneElement:function(e,n,o){for(var a=function(e,n,o){(null===e||void 0===e)&&r(!1,"React.cloneElement(...): The argument must be a React element, but you passed %s.",e);var a=void 0,i=t({},e.props),l=e.key,u=e.ref,s=e._self,c=e._source,d=e._owner;if(null!=n){j(n)&&(u=n.ref,d=D.current),W(n)&&(l=""+n.key);var f=void 0;for(a in e.type&&e.type.defaultProps&&(f=e.type.defaultProps),n)U.call(n,a)&&!M.hasOwnProperty(a)&&(void 0===n[a]&&void 0!==f?i[a]=f[a]:i[a]=n[a])}var p=arguments.length-2;if(1===p)i.children=o;else if(p>1){for(var m=Array(p),h=0;h<p;h++)m[h]=arguments[h+2];i.children=m}return L(e.type,l,u,s,c,d,i)}.apply(this,arguments),i=2;i<arguments.length;i++)fe(arguments[i],a.type);return pe(a),a},createFactory:function(e){var t=me.bind(null,e);return t.type=e,Object.defineProperty(t,"type",{enumerable:!1,get:function(){return C(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},isValidElement:H,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:D,assign:t}};t(he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,{ReactDebugCurrentFrame:B,ReactComponentTreeHook:{}});var ve=Object.freeze({default:he}),ge=ve&&he||ve,ye=ge.default?ge.default:ge;e.exports=ye})()},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,i,l=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var s in n=Object(arguments[u]))o.call(n,s)&&(l[s]=n[s]);if(r){i=r(n);for(var c=0;c<i.length;c++)a.call(n,i[c])&&(l[i[c]]=n[i[c]])}}return l}},function(e,t,n){"use strict";var r=function(e){};r=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")},e.exports=function(e,t,n,o,a,i,l,u){if(r(t),!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,a,i,l,u],d=0;(s=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";var r={};Object.freeze(r),e.exports=r},function(e,t,n){"use strict";var r=n(7);r=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,a="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}).apply(void 0,[t].concat(r))}},e.exports=r},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";var r=n(4),o=n(6),a=n(9),i={};e.exports=function(e,t,n,l,u){for(var s in e)if(e.hasOwnProperty(s)){var c;try{r("function"==typeof e[s],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",l||"React class",n,s,typeof e[s]),c=e[s](t,s,l,n,null,a)}catch(e){c=e}if(o(!c||c instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",n,s,typeof c),c instanceof Error&&!(c.message in i)){i[c.message]=!0;var d=u?u():"";o(!1,"Failed %s type: %s%s",n,c.message,null!=d?d:"")}}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(11)},function(e,t,n){"use strict";
/** @license React v16.3.2
 * react-dom.development.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=n(4),r=n(1),o=n(6),a=n(12),i=n(3),l=n(7),u=n(8),s=n(13),c=n(14),d=n(15),f=n(5),p=n(18),m=n(20);r||t(!1,"ReactDOM was loaded before React. Make sure you load the React package before loading ReactDOM.");var h=function(e,t,n,r,o,a,i,l,u){this._hasCaughtError=!1,this._caughtError=null;var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(e){this._caughtError=e,this._hasCaughtError=!0}};if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var v=document.createElement("react");h=function(e,n,r,o,a,i,l,u,s){"undefined"==typeof document&&t(!1,"The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var c=document.createEvent("Event"),d=!0,f=Array.prototype.slice.call(arguments,3);var p=void 0,m=!1,h=!1;function g(e){p=e.error,m=!0,null===p&&0===e.colno&&0===e.lineno&&(h=!0)}var y="react-"+(e||"invokeguardedcallback");window.addEventListener("error",g),v.addEventListener(y,function e(){v.removeEventListener(y,e,!1),n.apply(r,f),d=!1},!1),c.initEvent(y,!1,!1),v.dispatchEvent(c),d?(m?h&&(p=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://fb.me/react-crossorigin-error for more information.")):p=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this._hasCaughtError=!0,this._caughtError=p):(this._hasCaughtError=!1,this._caughtError=null),window.removeEventListener("error",g)}}var g=h,y={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,o,a,i,l,u){g.apply(y,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,a,i,l,u){if(y.invokeGuardedCallback.apply(this,arguments),y.hasCaughtError()){var s=y.clearCaughtError();y._hasRethrowError||(y._hasRethrowError=!0,y._rethrowError=s)}},rethrowCaughtError:function(){return b.apply(y,arguments)},hasCaughtError:function(){return y._hasCaughtError},clearCaughtError:function(){if(y._hasCaughtError){var e=y._caughtError;return y._caughtError=null,y._hasCaughtError=!1,e}t(!1,"clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}},b=function(){if(y._hasRethrowError){var e=y._rethrowError;throw y._rethrowError=null,y._hasRethrowError=!1,e}},w=null,k={};function C(){if(w)for(var e in k){var n=k[e],r=w.indexOf(e);if(r>-1||t(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!T[r]){n.extractEvents||t(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),T[r]=n;var o=n.eventTypes;for(var a in o)x(o[a],n,a)||t(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",a,e)}}}function x(e,n,r){S.hasOwnProperty(r)&&t(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r),S[r]=e;var o=e.phasedRegistrationNames;if(o){for(var a in o){if(o.hasOwnProperty(a))_(o[a],n,r)}return!0}return!!e.registrationName&&(_(e.registrationName,n,r),!0)}function _(e,n,r){E[e]&&t(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),E[e]=n,P[e]=n.eventTypes[r].dependencies;var o=e.toLowerCase();N[o]=e,"onDoubleClick"===e&&(N.ondblclick=e)}var T=[],S={},E={},P={},N={};function R(e){w&&t(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),w=Array.prototype.slice.call(e),C()}function I(e){var n=!1;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];k.hasOwnProperty(r)&&k[r]===o||(k[r]&&t(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",r),k[r]=o,n=!0)}n&&C()}var O=Object.freeze({plugins:T,eventNameDispatchConfigs:S,registrationNameModules:E,registrationNameDependencies:P,possibleRegistrationNames:N,injectEventPluginOrder:R,injectEventPluginsByName:I}),D=null,U=null,M=null,A=function(e){D=e.getFiberCurrentPropsFromNode,U=e.getInstanceFromNode,(M=e.getNodeFromInstance)&&U||o(!1,"EventPluginUtils.injection.injectComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode.")},F=void 0;function j(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=M(r),y.invokeGuardedCallbackAndCatchFirstError(o,n,void 0,e),e.currentTarget=null}function W(e,n){return null==n&&t(!1,"accumulateInto(...): Accumulated items must not be null or undefined."),null==e?n:Array.isArray(e)?Array.isArray(n)?(e.push.apply(e,n),e):(e.push(n),e):Array.isArray(n)?[e].concat(n):[e,n]}function L(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}F=function(e){var t=e._dispatchListeners,n=e._dispatchInstances,r=Array.isArray(t),a=r?t.length:t?1:0,i=Array.isArray(n),l=i?n.length:n?1:0;(i!==r||l!==a)&&o(!1,"EventPluginUtils: Invalid `event`.")};var z=null,H=function(e,t){e&&(!function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(F(e),Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)j(e,0,n[o],r[o]);else n&&j(e,0,n,r);e._dispatchListeners=null,e._dispatchInstances=null}(e),e.isPersistent()||e.constructor.release(e))},B=function(e){return H(e)},V=function(e){return H(e)};var q={injectEventPluginOrder:R,injectEventPluginsByName:I};function K(e,n){var r,o=e.stateNode;if(!o)return null;var a=D(o);return a?(r=a[n],function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||(r=t,"button"!==r&&"input"!==r&&"select"!==r&&"textarea"!==r));default:return!1}var r}(n,e.type,a)?null:(r&&"function"!=typeof r&&t(!1,"Expected `%s` listener to be a function, instead got a value of `%s` type.",n,typeof r),r)):null}function $(e,n){null!==e&&(z=W(z,e));var r=z;z=null,r&&(L(r,n?B:V),z&&t(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."),y.rethrowCaughtError())}function Q(e,t,n,r){$(function(e,t,n,r){for(var o=null,a=0;a<T.length;a++){var i=T[a];if(i){var l=i.extractEvents(e,t,n,r);l&&(o=W(o,l))}}return o}(e,t,n,r),!1)}var Y=Object.freeze({injection:q,getListener:K,runEventsInBatch:$,runExtractedEventsInBatch:Q}),X=0,G=1,Z=2,J=3,ee=4,te=5,ne=6,re=7,oe=8,ae=9,ie=10,le=11,ue=12,se=13,ce=14,de=Math.random().toString(36).slice(2),fe="__reactInternalInstance$"+de,pe="__reactEventHandlers$"+de;function me(e,t){t[fe]=e}function he(e){if(e[fe])return e[fe];for(;!e[fe];){if(!e.parentNode)return null;e=e.parentNode}var t=e[fe];return t.tag===te||t.tag===ne?t:null}function ve(e){var t=e[fe];return t&&(t.tag===te||t.tag===ne)?t:null}function ge(e){if(e.tag===te||e.tag===ne)return e.stateNode;t(!1,"getNodeFromInstance: Invalid argument.")}function ye(e){return e[pe]||null}function be(e,t){e[pe]=t}var we=Object.freeze({precacheFiberNode:me,getClosestInstanceFromNode:he,getInstanceFromNode:ve,getNodeFromInstance:ge,getFiberCurrentPropsFromNode:ye,updateFiberProps:be});function ke(e){do{e=e.return}while(e&&e.tag!==te);return e||null}function Ce(e,t,n){for(var r=[];e;)r.push(e),e=ke(e);var o=void 0;for(o=r.length;o-- >0;)t(r[o],"captured",n);for(o=0;o<r.length;o++)t(r[o],"bubbled",n)}function xe(e,t,n,r,o){for(var a=e&&t?function(e,t){for(var n=0,r=e;r;r=ke(r))n++;for(var o=0,a=t;a;a=ke(a))o++;for(;n-o>0;)e=ke(e),n--;for(;o-n>0;)t=ke(t),o--;for(var i=n;i--;){if(e===t||e===t.alternate)return e;e=ke(e),t=ke(t)}return null}(e,t):null,i=[];e&&e!==a;){var l=e.alternate;if(null!==l&&l===a)break;i.push(e),e=ke(e)}for(var u=[];t&&t!==a;){var s=t.alternate;if(null!==s&&s===a)break;u.push(t),t=ke(t)}for(var c=0;c<i.length;c++)n(i[c],"bubbled",r);for(var d=u.length;d-- >0;)n(u[d],"captured",o)}function _e(e,t,n){e||o(!1,"Dispatching inst must not be null");var r=function(e,t,n){return K(e,t.dispatchConfig.phasedRegistrationNames[n])}(e,n,t);r&&(n._dispatchListeners=W(n._dispatchListeners,r),n._dispatchInstances=W(n._dispatchInstances,e))}function Te(e){e&&e.dispatchConfig.phasedRegistrationNames&&Ce(e._targetInst,_e,e)}function Se(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;Ce(t?ke(t):null,_e,e)}}function Ee(e,t,n){if(e&&n&&n.dispatchConfig.registrationName){var r=K(e,n.dispatchConfig.registrationName);r&&(n._dispatchListeners=W(n._dispatchListeners,r),n._dispatchInstances=W(n._dispatchInstances,e))}}function Pe(e){e&&e.dispatchConfig.registrationName&&Ee(e._targetInst,0,e)}function Ne(e){L(e,Te)}function Re(e,t,n,r){xe(n,r,Ee,e,t)}var Ie=Object.freeze({accumulateTwoPhaseDispatches:Ne,accumulateTwoPhaseDispatchesSkipTarget:function(e){L(e,Se)},accumulateEnterLeaveDispatches:Re,accumulateDirectDispatches:function(e){L(e,Pe)}}),Oe=null;function De(){return!Oe&&a.canUseDOM&&(Oe="textContent"in document.documentElement?"textContent":"innerText"),Oe}var Ue={_root:null,_startText:null,_fallbackText:null};function Me(){if(Ue._fallbackText)return Ue._fallbackText;var e=void 0,t=Ue._startText,n=t.length,r=void 0,o=Ae(),a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[a-r];r++);var l=r>1?1-r:void 0;return Ue._fallbackText=o.slice(e,l),Ue._fallbackText}function Ae(){return"value"in Ue._root?Ue._root.value:Ue._root[De()]}var Fe=!1,je=10,We=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"],Le={type:null,target:null,currentTarget:l.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function ze(e,t,n,r){delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation,this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var a in o)if(o.hasOwnProperty(a)){delete this[a];var i=o[a];i?this[a]=i(n):"target"===a?this.target=r:this[a]=n[a]}var u=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=u?l.thatReturnsTrue:l.thatReturnsFalse,this.isPropagationStopped=l.thatReturnsFalse,this}function He(e,t){var n="function"==typeof t;return{configurable:!0,set:function(e){return r(n?"setting the method":"setting the property","This is effectively a no-op"),e},get:function(){return r(n?"accessing the method":"accessing the property",n?"This is a no-op function":"This is set to null"),t}};function r(t,n){o(!1,"This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",t,e,n)}}function Be(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function Ve(e){e instanceof this||t(!1,"Trying to release an event instance  into a pool of a different type."),e.destructor(),this.eventPool.length<je&&this.eventPool.push(e)}function qe(e){e.eventPool=[],e.getPooled=Be,e.release=Ve}i(ze.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=l.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=l.thatReturnsTrue)},persist:function(){this.isPersistent=l.thatReturnsTrue},isPersistent:l.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)Object.defineProperty(this,t,He(t,e[t]));for(var n=0;n<We.length;n++)this[We[n]]=null;Object.defineProperty(this,"nativeEvent",He("nativeEvent",null)),Object.defineProperty(this,"preventDefault",He("preventDefault",l)),Object.defineProperty(this,"stopPropagation",He("stopPropagation",l))}}),ze.Interface=Le,ze.extend=function(e){var t=this,n=function(){};n.prototype=t.prototype;var r=new n;function o(){return t.apply(this,arguments)}return i(r,o.prototype),o.prototype=r,o.prototype.constructor=o,o.Interface=i({},t.Interface,e),o.extend=t.extend,qe(o),o},"function"==typeof Proxy&&!Object.isSealed(new Proxy({},{}))&&(ze=new Proxy(ze,{construct:function(e,t){return this.apply(e,Object.create(e.prototype),t)},apply:function(e,t,n){return new Proxy(e.apply(t,n),{set:function(e,t,n){return"isPersistent"===t||e.constructor.Interface.hasOwnProperty(t)||-1!==We.indexOf(t)||(Fe||e.isPersistent()||o(!1,"This synthetic event is reused for performance reasons. If you're seeing this, you're adding a new property in the synthetic event object. The property is never released. See https://fb.me/react-event-pooling for more information."),Fe=!0),e[t]=n,!0}})}})),qe(ze);var Ke=ze,$e=Ke.extend({data:null}),Qe=Ke.extend({data:null}),Ye=[9,13,27,32],Xe=229,Ge=a.canUseDOM&&"CompositionEvent"in window,Ze=null;a.canUseDOM&&"documentMode"in document&&(Ze=document.documentMode);var Je=a.canUseDOM&&"TextEvent"in window&&!Ze,et=a.canUseDOM&&(!Ge||Ze&&Ze>8&&Ze<=11),tt=32,nt=String.fromCharCode(tt),rt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},ot=!1;function at(e,t){switch(e){case"topKeyUp":return-1!==Ye.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==Xe;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function it(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}var lt=!1;function ut(e,t,n,r){var o=void 0,a=void 0;if(Ge?o=function(e){switch(e){case"topCompositionStart":return rt.compositionStart;case"topCompositionEnd":return rt.compositionEnd;case"topCompositionUpdate":return rt.compositionUpdate}}(e):lt?at(e,n)&&(o=rt.compositionEnd):function(e,t){return"topKeyDown"===e&&t.keyCode===Xe}(e,n)&&(o=rt.compositionStart),!o)return null;et&&(lt||o!==rt.compositionStart?o===rt.compositionEnd&&lt&&(a=Me()):lt=function(e){return Ue._root=e,Ue._startText=Ae(),!0}(r));var i=$e.getPooled(o,t,n,r);if(a)i.data=a;else{var l=it(n);null!==l&&(i.data=l)}return Ne(i),i}function st(e,t){if(lt){if("topCompositionEnd"===e||!Ge&&at(e,t)){var n=Me();return Ue._root=null,Ue._startText=null,Ue._fallbackText=null,lt=!1,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":if(!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)){if(t.char&&t.char.length>1)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return et?null:t.data;default:return null}}function ct(e,t,n,r){var o=void 0;if(!(o=Je?function(e,t){switch(e){case"topCompositionEnd":return it(t);case"topKeyPress":return t.which!==tt?null:(ot=!0,nt);case"topTextInput":var n=t.data;return n===nt&&ot?null:n;default:return null}}(e,n):st(e,n)))return null;var a=Qe.getPooled(rt.beforeInput,t,n,r);return a.data=o,Ne(a),a}var dt={eventTypes:rt,extractEvents:function(e,t,n,r){var o=ut(e,t,n,r),a=ct(e,t,n,r);return null===o?a:null===a?o:[o,a]}},ft=null,pt=null,mt=null;function ht(e){var n=U(e);if(n){ft&&"function"==typeof ft.restoreControlledState||t(!1,"Fiber needs to be injected to handle a fiber target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var r=D(n.stateNode);ft.restoreControlledState(n.stateNode,n.type,r)}}var vt={injectFiberControlledHostComponent:function(e){ft=e}};function gt(e){pt?mt?mt.push(e):mt=[e]:pt=e}function yt(){return null!==pt||null!==mt}function bt(){if(pt){var e=pt,t=mt;if(pt=null,mt=null,ht(e),t)for(var n=0;n<t.length;n++)ht(t[n])}}var wt=Object.freeze({injection:vt,enqueueStateRestore:gt,needsStateRestore:yt,restoreStateIfNeeded:bt}),kt=function(e,t){return e(t)},Ct=function(e,t,n){return e(t,n)},xt=function(){},_t=!1;function Tt(e,t){if(_t)return e(t);_t=!0;try{return kt(e,t)}finally{_t=!1,yt()&&(xt(),bt())}}var St=function(e){kt=e.batchedUpdates,Ct=e.interactiveUpdates,xt=e.flushInteractiveUpdates},Et={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Et[e.type]:"textarea"===t}var Nt=1,Rt=3,It=8,Ot=9,Dt=11;function Ut(e){var t=e.target||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===Rt?t.parentNode:t}
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Mt(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var o=document.createElement("div");o.setAttribute(n,"return;"),r="function"==typeof o[n]}return r}function At(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ft(e){return e._valueTracker}function jt(e){Ft(e)||(e._valueTracker=function(e){var t=At(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){!function(e){e._valueTracker=null}(e),delete e[t]}}}(e))}function Wt(e){if(!e)return!1;var t=Ft(e);if(!t)return!0;var n=t.getValue(),r=function(e){var t="";return e?t=At(e)?e.checked?"true":"false":e.value:t}(e);return r!==n&&(t.setValue(r),!0)}var Lt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zt=Lt.ReactCurrentOwner,Ht=Lt.ReactDebugCurrentFrame,Bt=function(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")},Vt="function"==typeof Symbol&&Symbol.for,qt=Vt?Symbol.for("react.element"):60103,Kt=Vt?Symbol.for("react.call"):60104,$t=Vt?Symbol.for("react.return"):60105,Qt=Vt?Symbol.for("react.portal"):60106,Yt=Vt?Symbol.for("react.fragment"):60107,Xt=Vt?Symbol.for("react.strict_mode"):60108,Gt=Vt?Symbol.for("react.provider"):60109,Zt=Vt?Symbol.for("react.context"):60110,Jt=Vt?Symbol.for("react.async_mode"):60111,en=Vt?Symbol.for("react.forward_ref"):60112,tn="function"==typeof Symbol&&Symbol.iterator,nn="@@iterator";function rn(e){if(null===e||void 0===e)return null;var t=tn&&e[tn]||e[nn];return"function"==typeof t?t:null}function on(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case Yt:return"ReactFragment";case Qt:return"ReactPortal";case Kt:return"ReactCall";case $t:return"ReactReturn"}if("object"==typeof t&&null!==t)switch(t.$$typeof){case en:var n=t.render.displayName||t.render.name||"";return""!==n?"ForwardRef("+n+")":"ForwardRef"}return null}function an(e){switch(e.tag){case X:case G:case Z:case te:var t=e._debugOwner,n=e._debugSource,r=on(e),o=null;return t&&(o=on(t)),Bt(r,n,o);default:return""}}function ln(e){var t="",n=e;do{t+=an(n),n=n.return}while(n);return t}function un(){var e=sn.current;return null===e?null:ln(e)}var sn={current:null,phase:null,resetCurrentFiber:function(){Ht.getCurrentStack=null,sn.current=null,sn.phase=null},setCurrentFiber:function(e){Ht.getCurrentStack=un,sn.current=e,sn.phase=null},setCurrentPhase:function(e){sn.phase=e},getCurrentFiberOwnerName:function(){var e=sn.current;if(null===e)return null;var t=e._debugOwner;return null!==t&&void 0!==t?on(t):null},getCurrentFiberStackAddendum:un},cn=0,dn=2,fn=3,pn=4,mn=5,hn=6,vn=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",gn=vn+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",yn="data-reactroot",bn=new RegExp("^["+vn+"]["+gn+"]*$"),wn={},kn={};function Cn(e){return!!kn.hasOwnProperty(e)||!wn.hasOwnProperty(e)&&(bn.test(e)?(kn[e]=!0,!0):(wn[e]=!0,o(!1,"Invalid attribute name: `%s`",e),!1))}function xn(e,t,n){return null!==t?t.type===cn:!n&&(e.length>2&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))}function _n(e,t,n,r){if(null!==n&&n.type===cn)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var o=e.toLowerCase().slice(0,5);return"data-"!==o&&"aria-"!==o;default:return!1}}function Tn(e,t,n,r){if(null===t||void 0===t)return!0;if(_n(e,t,n,r))return!0;if(null!==n)switch(n.type){case fn:return!t;case pn:return!1===t;case mn:return isNaN(t);case hn:return isNaN(t)||t<1}return!1}function Sn(e){return Pn.hasOwnProperty(e)?Pn[e]:null}function En(e,t,n,r,o){this.acceptsBooleans=t===dn||t===fn||t===pn,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var Pn={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(function(e){Pn[e]=new En(e,cn,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0],n=e[1];Pn[t]=new En(t,1,!1,n,null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pn[e]=new En(e,dn,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){Pn[e]=new En(e,dn,!1,e,null)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){Pn[e]=new En(e,fn,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Pn[e]=new En(e,fn,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){Pn[e]=new En(e,pn,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){Pn[e]=new En(e,hn,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){Pn[e]=new En(e,mn,!1,e.toLowerCase(),null)});var Nn=/[\-\:]([a-z])/g,Rn=function(e){return e[1].toUpperCase()};function In(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];var o=r.attributeName,a=null;if(r.type===pn){if(e.hasAttribute(o)){var i=e.getAttribute(o);return""===i||(Tn(t,n,r,!1)?i:i===""+n?n:i)}}else if(e.hasAttribute(o)){if(Tn(t,n,r,!1))return e.getAttribute(o);if(r.type===fn)return n;a=e.getAttribute(o)}return Tn(t,n,r,!1)?null===a?n:a:a===""+n?n:a}function On(e,t,n){if(Cn(t)){if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return r===""+n?n:r}}function Dn(e,t,n,r){var o=Sn(t);if(!xn(t,o,r))if(Tn(t,n,o,r)&&(n=null),r||null===o){if(Cn(t)){var a=t;null===n?e.removeAttribute(a):e.setAttribute(a,""+n)}}else if(o.mustUseProperty){var i=o.propertyName;if(null===n){var l=o.type;e[i]=l!==fn&&""}else e[i]=n}else{var u=o.attributeName,s=o.attributeNamespace;if(null===n)e.removeAttribute(u);else{var c=o.type,d=void 0;d=c===fn||c===pn&&!0===n?"":""+n,s?e.setAttributeNS(s,u,d):e.setAttribute(u,d)}}}["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var t=e.replace(Nn,Rn);Pn[t]=new En(t,1,!1,e,null)}),["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var t=e.replace(Nn,Rn);Pn[t]=new En(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nn,Rn);Pn[t]=new En(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),Pn.tabIndex=new En("tabIndex",1,!1,"tabindex",null);var Un={checkPropTypes:null},Mn={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},An={value:function(e,t,n){return!e[t]||Mn[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}};Un.checkPropTypes=function(e,t,n){u(An,t,"prop",e,n)};var Fn=sn.getCurrentFiberOwnerName,jn=sn.getCurrentFiberStackAddendum,Wn=!1,Ln=!1,zn=!1,Hn=!1;function Bn(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function Vn(e,t){var n=e,r=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:n._wrapperState.initialChecked})}function qn(e,t){Un.checkPropTypes("input",t,jn),void 0===t.checked||void 0===t.defaultChecked||Ln||(o(!1,"%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",Fn()||"A component",t.type),Ln=!0),void 0===t.value||void 0===t.defaultValue||Wn||(o(!1,"%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",Fn()||"A component",t.type),Wn=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:Gn(null!=t.value?t.value:r),controlled:Bn(t)}}function Kn(e,t){var n=e,r=t.checked;null!=r&&Dn(n,"checked",r,!1)}function $n(e,t){var n=e,r=Bn(t);n._wrapperState.controlled||!r||Hn||(o(!1,"A component is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components%s",t.type,jn()),Hn=!0),!n._wrapperState.controlled||r||zn||(o(!1,"A component is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components%s",t.type,jn()),zn=!0),Kn(e,t);var a=Gn(t.value);null!=a&&("number"===t.type?(0===a&&""===n.value||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a)),t.hasOwnProperty("value")?Xn(n,t.type,a):t.hasOwnProperty("defaultValue")&&Xn(n,t.type,Gn(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function Qn(e,t){var n=e;(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===n.value&&(n.value=""+n._wrapperState.initialValue),n.defaultValue=""+n._wrapperState.initialValue);var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}function Yn(e,n){var r=e;$n(r,n),function(e,n){var r=n.name;if("radio"===n.type&&null!=r){for(var o=e;o.parentNode;)o=o.parentNode;for(var a=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var u=ye(l);u||t(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."),Wt(l),$n(l,u)}}}}(r,n)}function Xn(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Gn(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}var Zn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};function Jn(e,t,n){var r=Ke.getPooled(Zn.change,e,t,n);return r.type="change",gt(n),Ne(r),r}var er=null,tr=null;function nr(e){$(e,!1)}function rr(e){if(Wt(ge(e)))return e}function or(e,t){if("topChange"===e)return t}var ar=!1;function ir(){er&&(er.detachEvent("onpropertychange",lr),er=null,tr=null)}function lr(e){"value"===e.propertyName&&rr(tr)&&function(e){Tt(nr,Jn(tr,e,Ut(e)))}(e)}function ur(e,t,n){"topFocus"===e?(ir(),function(e,t){tr=t,(er=e).attachEvent("onpropertychange",lr)}(t,n)):"topBlur"===e&&ir()}function sr(e,t){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return rr(tr)}function cr(e,t){if("topClick"===e)return rr(t)}function dr(e,t){if("topInput"===e||"topChange"===e)return rr(t)}a.canUseDOM&&(ar=Mt("input")&&(!document.documentMode||document.documentMode>9));var fr={eventTypes:Zn,_isInputEventSupported:ar,extractEvents:function(e,t,n,r){var o,a,i=t?ge(t):window,l=void 0,u=void 0;if("select"===(a=(o=i).nodeName&&o.nodeName.toLowerCase())||"input"===a&&"file"===o.type?l=or:Pt(i)?ar?l=dr:(l=sr,u=ur):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(i)&&(l=cr),l){var s=l(e,t);if(s)return Jn(s,n,r)}u&&u(e,i,t),"topBlur"===e&&function(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;n&&n.controlled&&"number"===t.type&&Xn(t,"number",t.value)}}(t,i)}},pr=Ke.extend({view:null,detail:null}),mr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hr(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=mr[e];return!!n&&!!t[n]}function vr(e){return hr}var gr=pr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:vr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),yr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},br={eventTypes:yr,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=void 0;if(r.window===r)o=r;else{var a=r.ownerDocument;o=a?a.defaultView||a.parentWindow:window}var i=void 0,l=void 0;if("topMouseOut"===e){i=t;var u=n.relatedTarget||n.toElement;l=u?he(u):null}else i=null,l=t;if(i===l)return null;var s=null==i?o:ge(i),c=null==l?o:ge(l),d=gr.getPooled(yr.mouseLeave,i,n,r);d.type="mouseleave",d.target=s,d.relatedTarget=c;var f=gr.getPooled(yr.mouseEnter,l,n,r);return f.type="mouseenter",f.target=c,f.relatedTarget=s,Re(d,f,i,l),[d,f]}};function wr(e){return e._reactInternalFiber}var kr=0,Cr=1,xr=2,_r=4,Tr=6,Sr=8,Er=16,Pr=32,Nr=64,Rr=128,Ir=256,Or=2048,Dr=2559,Ur=512,Mr=1024,Ar=1,Fr=2,jr=3;function Wr(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&xr)!==kr)return Ar;for(;t.return;)if(((t=t.return).effectTag&xr)!==kr)return Ar}return t.tag===J?Fr:jr}function Lr(e){return Wr(e)===Fr}function zr(e){var t=zt.current;if(null!==t&&t.tag===Z){var n=t,r=n.stateNode;r._warnedAboutRefsInRender||o(!1,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",on(n)||"A component"),r._warnedAboutRefsInRender=!0}var a=wr(e);return!!a&&Wr(a)===Fr}function Hr(e){Wr(e)!==Fr&&t(!1,"Unable to find node on an unmounted component.")}function Br(e){var n=e.alternate;if(!n){var r=Wr(e);return r===jr&&t(!1,"Unable to find node on an unmounted component."),r===Ar?null:e}for(var o=e,a=n;;){var i=o.return,l=i?i.alternate:null;if(!i||!l)break;if(i.child===l.child){for(var u=i.child;u;){if(u===o)return Hr(i),e;if(u===a)return Hr(i),n;u=u.sibling}t(!1,"Unable to find node on an unmounted component.")}if(o.return!==a.return)o=i,a=l;else{for(var s=!1,c=i.child;c;){if(c===o){s=!0,o=i,a=l;break}if(c===a){s=!0,a=i,o=l;break}c=c.sibling}if(!s){for(c=l.child;c;){if(c===o){s=!0,o=l,a=i;break}if(c===a){s=!0,a=l,o=i;break}c=c.sibling}s||t(!1,"Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}o.alternate!==a&&t(!1,"Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}return o.tag!==J&&t(!1,"Unable to find node on an unmounted component."),o.stateNode.current===o?e:n}function Vr(e){var t=Br(e);if(!t)return null;for(var n=t;;){if(n.tag===te||n.tag===ne)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}var qr=Ke.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Kr=Ke.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$r=pr.extend({relatedTarget:null});function Qr(e){var t=void 0,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),t>=32||13===t?t:0}var Yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};var Gr=pr.extend({key:function(e){if(e.key){var t=Yr[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=Qr(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?Xr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:vr,charCode:function(e){return"keypress"===e.type?Qr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Zr=gr.extend({dataTransfer:null}),Jr=pr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:vr}),eo=Ke.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),to=gr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),no={},ro={};function oo(e,t){var n=e[0].toUpperCase()+e.slice(1),r="on"+n,o="top"+n,a={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[o],isInteractive:t};no[e]=a,ro[o]=a}["blur","cancel","click","close","contextMenu","copy","cut","doubleClick","dragEnd","dragStart","drop","focus","input","invalid","keyDown","keyPress","keyUp","mouseDown","mouseUp","paste","pause","play","rateChange","reset","seeked","submit","touchCancel","touchEnd","touchStart","volumeChange"].forEach(function(e){oo(e,!0)}),["abort","animationEnd","animationIteration","animationStart","canPlay","canPlayThrough","drag","dragEnter","dragExit","dragLeave","dragOver","durationChange","emptied","encrypted","ended","error","load","loadedData","loadedMetadata","loadStart","mouseMove","mouseOut","mouseOver","playing","progress","scroll","seeking","stalled","suspend","timeUpdate","toggle","touchMove","transitionEnd","waiting","wheel"].forEach(function(e){oo(e,!1)});var ao=["topAbort","topCancel","topCanPlay","topCanPlayThrough","topClose","topDurationChange","topEmptied","topEncrypted","topEnded","topError","topInput","topInvalid","topLoad","topLoadedData","topLoadedMetadata","topLoadStart","topPause","topPlay","topPlaying","topProgress","topRateChange","topReset","topSeeked","topSeeking","topStalled","topSubmit","topSuspend","topTimeUpdate","topToggle","topVolumeChange","topWaiting"],io={eventTypes:no,isInteractiveTopLevelEventType:function(e){var t=ro[e];return void 0!==t&&!0===t.isInteractive},extractEvents:function(e,t,n,r){var a=ro[e];if(!a)return null;var i=void 0;switch(e){case"topKeyPress":if(0===Qr(n))return null;case"topKeyDown":case"topKeyUp":i=Gr;break;case"topBlur":case"topFocus":i=$r;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":i=gr;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":i=Zr;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":i=Jr;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":i=qr;break;case"topTransitionEnd":i=eo;break;case"topScroll":i=pr;break;case"topWheel":i=to;break;case"topCopy":case"topCut":case"topPaste":i=Kr;break;default:-1===ao.indexOf(e)&&o(!1,"SimpleEventPlugin: Unhandled event type, `%s`. This warning is likely caused by a bug in React. Please file an issue.",e),i=Ke}var l=i.getPooled(a,t,n,r);return Ne(l),l}},lo=io.isInteractiveTopLevelEventType,uo=10,so=[];function co(e){for(;e.return;)e=e.return;return e.tag!==J?null:e.stateNode.containerInfo}function fo(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=co(n);if(!r)break;e.ancestors.push(n),n=he(r)}while(n);for(var o=0;o<e.ancestors.length;o++)t=e.ancestors[o],Q(e.topLevelType,t,e.nativeEvent,Ut(e.nativeEvent))}var po=!0;function mo(e){po=!!e}function ho(){return po}function vo(e,t,n){if(!n)return null;!function(e,t,n){e.addEventListener(t,n,!1)}(n,t,(lo(e)?yo:bo).bind(null,e))}function go(e,t,n){if(!n)return null;!function(e,t,n){e.addEventListener(t,n,!0)}(n,t,(lo(e)?yo:bo).bind(null,e))}function yo(e,t){Ct(bo,e,t)}function bo(e,t){if(po){var n=he(Ut(t));null===n||"number"!=typeof n.tag||Lr(n)||(n=null);var r,o=function(e,t,n){if(so.length){var r=so.pop();return r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,r}return{topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]}}(e,t,n);try{Tt(fo,o)}finally{(r=o).topLevelType=null,r.nativeEvent=null,r.targetInst=null,r.ancestors.length=0,so.length<uo&&so.push(r)}}}var wo=Object.freeze({get _enabled(){return po},setEnabled:mo,isEnabled:ho,trapBubbledEvent:vo,trapCapturedEvent:go,dispatchEvent:bo});function ko(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var Co={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},xo={},_o={};function To(e){if(xo[e])return xo[e];if(!Co[e])return e;var t=Co[e];for(var n in t)if(t.hasOwnProperty(n)&&n in _o)return xo[e]=t[n];return e}a.canUseDOM&&(_o=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);var So={topAnimationEnd:To("animationend"),topAnimationIteration:To("animationiteration"),topAnimationStart:To("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:To("transitionend"),topWheel:"wheel"},Eo={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Po={},No=0,Ro="_reactListenersID"+(""+Math.random()).slice(2);function Io(e){return Object.prototype.hasOwnProperty.call(e,Ro)||(e[Ro]=No++,Po[e[Ro]]={}),Po[e[Ro]]}function Oo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Do(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Uo(e,t){for(var n=Oo(e),r=0,o=0;n;){if(n.nodeType===Rt){if(o=r+n.textContent.length,r<=t&&o>=t)return{node:n,offset:t-r};r=o}n=Oo(Do(n))}}function Mo(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,a=t.focusOffset;try{n.nodeType,o.nodeType}catch(e){return null}return function(e,t,n,r,o){var a=0,i=-1,l=-1,u=0,s=0,c=e,d=null;e:for(;;){for(var f=null;c!==t||0!==n&&c.nodeType!==Rt||(i=a+n),c!==r||0!==o&&c.nodeType!==Rt||(l=a+o),c.nodeType===Rt&&(a+=c.nodeValue.length),null!==(f=c.firstChild);)d=c,c=f;for(;;){if(c===e)break e;if(d===t&&++u===n&&(i=a),d===r&&++s===o&&(l=a),null!==(f=c.nextSibling))break;d=(c=d).parentNode}c=f}if(-1===i||-1===l)return null;return{start:i,end:l}}(e,n,r,o,a)}function Ao(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function Fo(){var e=s();return{focusedElem:e,selectionRange:Ao(e)?function(e){var t=void 0;t="selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:Mo(e);return t||{start:0,end:0}}(e):null}}function jo(e){var t,n=s(),r=e.focusedElem,o=e.selectionRange;if(n!==r&&(t=r,d(document.documentElement,t))){Ao(r)&&function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n);"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[De()].length,o=Math.min(t.start,r),a=void 0===t.end?o:Math.min(t.end,r);if(!n.extend&&o>a){var i=a;a=o,o=i}var l=Uo(e,o),u=Uo(e,a);if(l&&u){if(1===n.rangeCount&&n.anchorNode===l.node&&n.anchorOffset===l.offset&&n.focusNode===u.node&&n.focusOffset===u.offset)return;var s=document.createRange();s.setStart(l.node,l.offset),n.removeAllRanges(),o>a?(n.addRange(s),n.extend(u.node,u.offset)):(s.setEnd(u.node,u.offset),n.addRange(s))}}}(e,t)}(r,o);for(var a=[],i=r;i=i.parentNode;)i.nodeType===Nt&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});r.focus();for(var l=0;l<a.length;l++){var u=a[l];u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}}var Wo=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,Lo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},zo=null,Ho=null,Bo=null,Vo=!1;function qo(e,t){if(Vo||null==zo||zo!==s())return null;var n=function(e){if("selectionStart"in e&&Ao(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}}(zo);if(!Bo||!c(Bo,n)){Bo=n;var r=Ke.getPooled(Lo.select,Ho,e,t);return r.type="select",r.target=zo,Ne(r),r}return null}var Ko={eventTypes:Lo,extractEvents:function(e,t,n,r){var o=r.window===r?r.document:r.nodeType===Ot?r:r.ownerDocument;if(!o||!function(e,t){for(var n=Io(t),r=P[e],o=0;o<r.length;o++){var a=r[o];if(!n.hasOwnProperty(a)||!n[a])return!1}return!0}("onSelect",o))return null;var a=t?ge(t):window;switch(e){case"topFocus":(Pt(a)||"true"===a.contentEditable)&&(zo=a,Ho=t,Bo=null);break;case"topBlur":zo=null,Ho=null,Bo=null;break;case"topMouseDown":Vo=!0;break;case"topContextMenu":case"topMouseUp":return Vo=!1,qo(n,r);case"topSelectionChange":if(Wo)break;case"topKeyDown":case"topKeyUp":return qo(n,r)}return null}};q.injectEventPluginOrder(["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"]),A(we),q.injectEventPluginsByName({SimpleEventPlugin:io,EnterLeaveEventPlugin:br,ChangeEventPlugin:fr,SelectEventPlugin:Ko,BeforeInputEventPlugin:dt});var $o=1073741823,Qo=0,Yo=1,Xo=$o,Go=10,Zo=2;function Jo(e){return(e/Go|0)+Zo}function ea(e){return(e-Zo)*Go}function ta(e,t,n){return(1+((e+t/Go)/(r=n/Go)|0))*r;var r}var na=0,ra=1,oa=2,aa=void 0;aa=!1;try{var ia=Object.preventExtensions({}),la=new Map([[ia,null]]),ua=new Set([ia]);la.set(0,0),ua.add(0)}catch(e){aa=!0}var sa=void 0;sa=1;var ca=function(e,t,n,r){return new function(e,t,n,r){this.tag=e,this.key=n,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.mode=r,this.effectTag=kr,this.nextEffect=null,this.firstEffect=null,this.lastEffect=null,this.expirationTime=Qo,this.alternate=null,this._debugID=sa++,this._debugSource=null,this._debugOwner=null,this._debugIsCurrentlyTiming=!1,aa||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}(e,t,n,r)};function da(e,t,n){var r=e.alternate;return null===r?((r=ca(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r._debugID=e._debugID,r._debugSource=e._debugSource,r._debugOwner=e._debugOwner,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=kr,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fa(e,t,n){var r;r=e._owner;var o,a=void 0,i=e.type,l=e.key,u=e.props,s=void 0;if("function"==typeof i)s=(o=i).prototype&&o.prototype.isReactComponent?Z:X;else if("string"==typeof i)s=te;else switch(i){case Yt:return ma(u.children,t,n,l);case Jt:s=le,t|=ra|oa;break;case Xt:s=le,t|=oa;break;case Kt:s=re;break;case $t:s=ae;break;default:if("object"==typeof i&&null!==i)switch(i.$$typeof){case Gt:s=se;break;case Zt:s=ue;break;case en:s=ce;break;default:if("number"==typeof i.tag)return(a=i).pendingProps=u,a.expirationTime=n,a;pa(i,r)}else pa(i,r)}return(a=ca(s,u,l,t)).type=i,a.expirationTime=n,a._debugSource=e._source,a._debugOwner=e._owner,a}function pa(e,n){var r="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(r+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var o=n?on(n):null;o&&(r+="\n\nCheck the render method of `"+o+"`."),t(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==e?e:typeof e,r)}function ma(e,t,n,r){var o=ca(ie,e,r,t);return o.expirationTime=n,o}function ha(e,t,n){var r=ca(ne,e,null,t);return r.expirationTime=n,r}function va(e,t,n){var r=null!==e.children?e.children:[],o=ca(ee,r,e.key,t);return o.expirationTime=n,o.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},o}function ga(e,t){return null===e&&(e=ca(X,null,null,na)),e.tag=t.tag,e.key=t.key,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.mode=t.mode,e.effectTag=t.effectTag,e.nextEffect=t.nextEffect,e.firstEffect=t.firstEffect,e.lastEffect=t.lastEffect,e.expirationTime=t.expirationTime,e.alternate=t.alternate,e._debugID=t._debugID,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugIsCurrentlyTiming=t._debugIsCurrentlyTiming,e}function ya(e,t,n){var r=function(e){return ca(J,null,null,e?ra|oa:na)}(t),o={current:r,containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:Qo,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:Qo,firstBatch:null,nextScheduledRoot:null};return r.stateNode=o,o}var ba=null,wa=null,ka=!1;function Ca(e){return function(t){try{return e(t)}catch(e){ka||(ka=!0,o(!1,"React DevTools encountered an error: %s",e))}}}function xa(e){"function"==typeof ba&&ba(e)}function _a(e){"function"==typeof wa&&wa(e)}var Ta=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,a="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.warn(a);try{throw new Error(a)}catch(e){}}).apply(void 0,[t].concat(r))}},Sa={discardPendingWarnings:function(){},flushPendingDeprecationWarnings:function(){},flushPendingUnsafeLifecycleWarnings:function(){},recordDeprecationWarnings:function(e,t){},recordUnsafeLifecycleWarnings:function(e,t){}},Ea={UNSAFE_componentWillMount:"componentDidMount",UNSAFE_componentWillReceiveProps:"static getDerivedStateFromProps",UNSAFE_componentWillUpdate:"componentDidUpdate"},Pa=[],Na=[],Ra=[],Ia=new Map,Oa=new Set,Da=new Set,Ua=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t.sort().join(", ")};Sa.discardPendingWarnings=function(){Pa=[],Na=[],Ra=[],Ia=new Map},Sa.flushPendingUnsafeLifecycleWarnings=function(){Ia.forEach(function(e,t){var n=[];if(Object.keys(e).forEach(function(t){var r=e[t];if(r.length>0){var o=new Set;r.forEach(function(e){o.add(on(e)||"Component"),Da.add(e.type)});var a=t.replace("UNSAFE_",""),i=Ea[t],l=Ua(o);n.push(a+": Please update the following components to use "+i+" instead: "+l)}}),n.length>0){var r=ln(t);o(!1,"Unsafe lifecycle methods were found within a strict-mode tree:%s\n\n%s\n\nLearn more about this warning here:\nhttps://fb.me/react-strict-mode-warnings",r,n.join("\n\n"))}}),Ia=new Map};Sa.flushPendingDeprecationWarnings=function(){if(Pa.length>0){var e=new Set;Pa.forEach(function(t){e.add(on(t)||"Component"),Oa.add(t.type)});var t=Ua(e);Ta(!1,"componentWillMount is deprecated and will be removed in the next major version. Use componentDidMount instead. As a temporary workaround, you can rename to UNSAFE_componentWillMount.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",t),Pa=[]}if(Na.length>0){var n=new Set;Na.forEach(function(e){n.add(on(e)||"Component"),Oa.add(e.type)});var r=Ua(n);Ta(!1,"componentWillReceiveProps is deprecated and will be removed in the next major version. Use static getDerivedStateFromProps instead.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",r),Na=[]}if(Ra.length>0){var o=new Set;Ra.forEach(function(e){o.add(on(e)||"Component"),Oa.add(e.type)});var a=Ua(o);Ta(!1,"componentWillUpdate is deprecated and will be removed in the next major version. Use componentDidUpdate instead. As a temporary workaround, you can rename to UNSAFE_componentWillUpdate.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",a),Ra=[]}},Sa.recordDeprecationWarnings=function(e,t){Oa.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&Pa.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&Na.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Ra.push(e))},Sa.recordUnsafeLifecycleWarnings=function(e,t){var n=function(e){for(var t=null;null!==e;)e.mode&oa&&(t=e),e=e.return;return t}(e);if(!Da.has(e.type)&&("function"!=typeof t.componentWillMount||!0!==t.componentWillMount.__suppressDeprecationWarning)){var r=void 0;Ia.has(n)?r=Ia.get(n):(r={UNSAFE_componentWillMount:[],UNSAFE_componentWillReceiveProps:[],UNSAFE_componentWillUpdate:[]},Ia.set(n,r));var o=[];"function"!=typeof t.componentWillMount&&"function"!=typeof t.UNSAFE_componentWillMount||o.push("UNSAFE_componentWillMount"),"function"!=typeof t.componentWillReceiveProps&&"function"!=typeof t.UNSAFE_componentWillReceiveProps||o.push("UNSAFE_componentWillReceiveProps"),"function"!=typeof t.componentWillUpdate&&"function"!=typeof t.UNSAFE_componentWillUpdate||o.push("UNSAFE_componentWillUpdate"),o.length>0&&o.forEach(function(t){r[t].push(e)})}};var Ma=!0,Aa=!0,Fa=!1,ja=!1,Wa=!1,La=!0,za=!0,Ha=!1,Ba="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,Va=null,qa=null,Ka=null,$a=!1,Qa=!1,Ya=!1,Xa=0,Ga=0,Za=!1,Ja=new Set,ei=function(e){return"⚛ "+e},ti=function(e){performance.mark(ei(e))},ni=function(e,t,n){var r=ei(t),o=function(e,t){return(t?"⛔ ":"⚛ ")+e+(t?" Warning: "+t:"")}(e,n);try{performance.measure(o,r)}catch(e){}performance.clearMarks(r),performance.clearMeasures(o)},ri=function(e,t){return e+" (#"+t+")"},oi=function(e,t,n){return null===n?e+" ["+(t?"update":"mount")+"]":e+"."+n},ai=function(e,t){var n=on(e)||"Unknown",r=e._debugID,o=null!==e.alternate,a=oi(n,o,t);if($a&&Ja.has(a))return!1;Ja.add(a);var i=ri(a,r);return ti(i),!0},ii=function(e,t){var n=on(e)||"Unknown",r=e._debugID,o=null!==e.alternate,a=oi(n,o,t);!function(e){performance.clearMarks(ei(e))}(ri(a,r))},li=function(e,t,n){var r=on(e)||"Unknown",o=e._debugID,a=null!==e.alternate,i=oi(r,a,t),l=ri(i,o);ni(i,l,n)},ui=function(e){switch(e.tag){case J:case te:case ne:case ee:case re:case ae:case ie:case se:case ue:case le:return!0;default:return!1}},si=function(){null!==qa&&null!==Ka&&ii(Ka,qa),Ka=null,qa=null,Ya=!1},ci=function(){for(var e=Va;e;)e._debugIsCurrentlyTiming&&li(e,null,null),e=e.return},di=function(e){null!==e.return&&di(e.return),e._debugIsCurrentlyTiming&&ai(e,null)},fi=function(){null!==Va&&di(Va)};function pi(){Ma&&Ga++}function mi(){Ma&&($a&&(Qa=!0),null!==qa&&"componentWillMount"!==qa&&"componentWillReceiveProps"!==qa&&(Ya=!0))}function hi(e){if(Ma){if(!Ba||ui(e))return;e._debugIsCurrentlyTiming=!1,ii(e,null)}}function vi(e){if(Ma){if(!Ba||ui(e))return;if(Va=e.return,!e._debugIsCurrentlyTiming)return;e._debugIsCurrentlyTiming=!1,li(e,null,null)}}function gi(e){if(Ma){if(!Ba||ui(e))return;if(Va=e.return,!e._debugIsCurrentlyTiming)return;e._debugIsCurrentlyTiming=!1;li(e,null,"An error was thrown inside this error boundary")}}function yi(e,t){if(Ma){if(!Ba)return;if(si(),!ai(e,t))return;Ka=e,qa=t}}function bi(){if(Ma){if(!Ba)return;if(null!==qa&&null!==Ka)li(Ka,qa,Ya?"Scheduled a cascading update":null);qa=null,Ka=null}}function wi(e,t){if(Ma){if(!Ba)return;var n=null;if(null!==e)if(e.tag===J)n="A top-level update interrupted the previous render";else n="An update to "+(on(e)||"Unknown")+" interrupted the previous render";else Xa>1&&(n="There were cascading updates");Xa=0;var r=t?"(React Tree Reconciliation: Completed Root)":"(React Tree Reconciliation: Yielded)";ci(),ni(r,"(React Tree Reconciliation)",n)}}function ki(){if(Ma){if(!Ba)return;$a=!0,Qa=!1,Ja.clear(),ti("(Committing Changes)")}}function Ci(){if(Ma){if(!Ba)return;var e=null;Qa?e="Lifecycle hook scheduled a cascading update":Xa>0&&(e="Caused by a cascading update in earlier commit"),Qa=!1,Xa++,$a=!1,Ja.clear(),ni("(Committing Changes)","(Committing Changes)",e)}}var xi=void 0;function _i(e){var t={baseState:e,expirationTime:Qo,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null,isProcessing:!1};return t}function Ti(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(e.expirationTime===Qo||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}xi=!1;var Si=void 0,Ei=void 0;function Pi(e){Si=Ei=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=_i(null));var r=void 0;null!==t?null===(r=t.updateQueue)&&(r=t.updateQueue=_i(null)):r=null,Si=n,Ei=r=r!==n?r:null}function Ni(e,t){Pi(e);var n=Si,r=Ei;if((n.isProcessing||null!==r&&r.isProcessing)&&!xi&&(o(!1,"An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),xi=!0),null!==r){if(null===n.last||null===r.last)return Ti(n,t),void Ti(r,t);Ti(n,t),r.last=t}else Ti(n,t)}function Ri(e,t,n,r){var o=e.partialState;return"function"==typeof o?o.call(t,n,r):o}function Ii(e,t,n,r,o,a){if(null!==e&&e.updateQueue===n){var l=n;n=t.updateQueue={baseState:l.baseState,expirationTime:l.expirationTime,first:l.first,last:l.last,isInitialized:l.isInitialized,capturedValues:l.capturedValues,callbackList:null,hasForceUpdate:!1}}n.isProcessing=!0,n.expirationTime=Qo;var u=void 0;n.isInitialized?u=n.baseState:(u=n.baseState=t.memoizedState,n.isInitialized=!0);for(var s=!0,c=n.first,d=!1;null!==c;){var f=c.expirationTime;if(f>a){var p=n.expirationTime;(p===Qo||p>f)&&(n.expirationTime=f),d||(d=!0,n.baseState=u),c=c.next}else{d||(n.first=c.next,null===n.first&&(n.last=null)),(Wa||La&&t.mode&oa)&&Ri(c,r,u,o);var m=void 0;if(c.isReplace?(u=Ri(c,r,u,o),s=!0):(m=Ri(c,r,u,o))&&(u=s?i({},u,m):i(u,m),s=!1),c.isForced&&(n.hasForceUpdate=!0),null!==c.callback){var h=n.callbackList;null===h&&(h=n.callbackList=[]),h.push(c)}if(null!==c.capturedValue){var v=n.capturedValues;null===v?n.capturedValues=[c.capturedValue]:v.push(c.capturedValue)}c=c.next}}return null!==n.callbackList?t.effectTag|=Pr:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),d||(d=!0,n.baseState=u),n.isProcessing=!1,u}function Oi(e,n){var r=e.callbackList;if(null!==r){e.callbackList=null;for(var o=0;o<r.length;o++){var a=r[o],i=a.callback;a.callback=null,"function"!=typeof i&&t(!1,"Invalid argument passed as callback. Expected a function. Instead received: %s",i),i.call(n)}}}var Di,Ui={},Mi=Array.isArray,Ai=void 0,Fi=void 0,ji=void 0,Wi=void 0,Li=void 0;Ai=new Set,Fi=new Set,ji=new Set,Wi=new Set,Li=new Set;var zi=new Set;function Hi(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r].value,a=e.getDerivedStateFromCatch.call(null,o);null!==a&&void 0!==a&&i(n,a)}return n}Di=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;zi.has(n)||(zi.add(n),o(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},Object.defineProperty(Ui,"_processChildContext",{enumerable:!1,value:function(){t(!1,"_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(Ui);var Bi=function(e,t,n,r,a){var l=e.cacheContext,u=e.getMaskedContext,s=e.getUnmaskedContext,d=e.isContextConsumer,p=e.hasContextChanged,m={isMounted:zr,enqueueSetState:function(e,r,o){var a=wr(e);Di(o=void 0===o?null:o,"setState");var i=n(a);Ni(a,{expirationTime:i,partialState:r,callback:o,isReplace:!1,isForced:!1,capturedValue:null,next:null}),t(a,i)},enqueueReplaceState:function(e,r,o){var a=wr(e);Di(o=void 0===o?null:o,"replaceState");var i=n(a);Ni(a,{expirationTime:i,partialState:r,callback:o,isReplace:!0,isForced:!1,capturedValue:null,next:null}),t(a,i)},enqueueForceUpdate:function(e,r){var o=wr(e);Di(r=void 0===r?null:r,"forceUpdate");var a=n(o);Ni(o,{expirationTime:a,partialState:null,callback:r,isReplace:!1,isForced:!0,capturedValue:null,next:null}),t(o,a)}};function h(e,t,n,r,a,i){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var l=e.stateNode,u=e.type;if("function"==typeof l.shouldComponentUpdate){yi(e,"shouldComponentUpdate");var s=l.shouldComponentUpdate(n,a,i);return bi(),void 0===s&&o(!1,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",on(e)||"Component"),s}return!u.prototype||!u.prototype.isPureReactComponent||(!c(t,n)||!c(r,a))}function v(e,t){t.props=e.memoizedProps,t.state=e.memoizedState}function g(e,t){var n;t.updater=m,e.stateNode=t,n=e,t._reactInternalFiber=n,t._reactInternalInstance=Ui}function y(e,t,n,r){var a=t.state;if(yi(e,"componentWillReceiveProps"),"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),bi(),t.state!==a){var i=on(e)||"Component";Ai.has(i)||(Ai.add(i),o(!1,"%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",i)),m.enqueueReplaceState(t,t.state,null)}}function b(e,t,n,r){var a=e.type;if("function"==typeof a.getDerivedStateFromProps){(Wa||La&&e.mode&oa)&&a.getDerivedStateFromProps.call(null,n,r);var i=a.getDerivedStateFromProps.call(null,n,r);if(void 0===i){var l=on(e)||"Component";Fi.has(l)||(Fi.add(l),o(!1,"%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",l))}return i}}return{adoptClassInstance:g,callGetDerivedStateFromProps:b,constructClassInstance:function(e,t){var n=e.type,r=s(e),a=d(e),c=a?u(e,r):f;(Wa||La&&e.mode&oa)&&new n(t,c);var p=new n(t,c),m=null!==p.state&&void 0!==p.state?p.state:null;if(g(e,p),"function"==typeof n.getDerivedStateFromProps&&null===m){var h=on(e)||"Component";ji.has(h)||(ji.add(h),o(!1,"%s: Did not properly initialize state during construction. Expected state to be an object, but it was %s.",h,null===p.state?"null":"undefined"))}if("function"==typeof n.getDerivedStateFromProps||"function"==typeof p.getSnapshotBeforeUpdate){var v=null,y=null,w=null;if("function"==typeof p.componentWillMount&&!0!==p.componentWillMount.__suppressDeprecationWarning?v="componentWillMount":"function"==typeof p.UNSAFE_componentWillMount&&(v="UNSAFE_componentWillMount"),"function"==typeof p.componentWillReceiveProps&&!0!==p.componentWillReceiveProps.__suppressDeprecationWarning?y="componentWillReceiveProps":"function"==typeof p.UNSAFE_componentWillReceiveProps&&(y="UNSAFE_componentWillReceiveProps"),"function"==typeof p.componentWillUpdate&&!0!==p.componentWillUpdate.__suppressDeprecationWarning?w="componentWillUpdate":"function"==typeof p.UNSAFE_componentWillUpdate&&(w="UNSAFE_componentWillUpdate"),null!==v||null!==y||null!==w){var k=on(e)||"Component",C="function"==typeof n.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Li.has(k)||(Li.add(k),o(!1,"Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",k,C,null!==v?"\n  "+v:"",null!==y?"\n  "+y:"",null!==w?"\n  "+w:""))}}e.memoizedState=m;var x=b(e,0,t,m);return null!==x&&void 0!==x&&(e.memoizedState=i({},e.memoizedState,x)),a&&l(e,r,c),p},mountClassInstance:function(e,t){var n=e.type,r=e.alternate;!function(e){var t=e.stateNode,n=e.type,r=on(e)||"Component";t.render||(n.prototype&&"function"==typeof n.prototype.render?o(!1,"%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",r):o(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",r)),!t.getInitialState||t.getInitialState.isReactClassApproved||t.state||o(!1,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",r),!t.getDefaultProps||t.getDefaultProps.isReactClassApproved||o(!1,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",r),!t.propTypes||o(!1,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",r),!t.contextTypes||o(!1,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",r),"function"!=typeof t.componentShouldUpdate||o(!1,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",r),n.prototype&&n.prototype.isPureReactComponent&&void 0!==t.shouldComponentUpdate&&o(!1,"%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",on(e)||"A pure component"),"function"!=typeof t.componentDidUnmount||o(!1,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",r),"function"!=typeof t.componentDidReceiveProps||o(!1,"%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",r),"function"!=typeof t.componentWillRecieveProps||o(!1,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",r),"function"!=typeof t.UNSAFE_componentWillRecieveProps||o(!1,"%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",r);var a=t.props!==e.pendingProps;void 0!==t.props&&a&&o(!1,"%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",r,r),!t.defaultProps||o(!1,"Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",r,r),"function"!=typeof t.getSnapshotBeforeUpdate||"function"==typeof t.componentDidUpdate||Wi.has(n)||(Wi.add(n),o(!1,"%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",on(e))),"function"!=typeof t.getDerivedStateFromProps||o(!1,"%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",r),"function"!=typeof t.getDerivedStateFromCatch||o(!1,"%s: getDerivedStateFromCatch() is defined as an instance method and will be ignored. Instead, declare it as a static method.",r),"function"!=typeof n.getSnapshotBeforeUpdate||o(!1,"%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",r);var i=t.state;i&&("object"!=typeof i||Mi(i))&&o(!1,"%s.state: must be set to an object or null",r),"function"==typeof t.getChildContext&&"object"!=typeof n.childContextTypes&&o(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",r)}(e);var a=e.stateNode,i=e.pendingProps,l=s(e);if(a.props=i,a.state=e.memoizedState,a.refs=f,a.context=u(e,l),e.mode&oa&&Sa.recordUnsafeLifecycleWarnings(e,a),Ha&&Sa.recordDeprecationWarnings(e,a),"function"!=typeof n.getDerivedStateFromProps&&"function"!=typeof a.getSnapshotBeforeUpdate&&("function"==typeof a.UNSAFE_componentWillMount||"function"==typeof a.componentWillMount)){!function(e,t){yi(e,"componentWillMount");var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),bi(),n!==t.state&&(o(!1,"%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",on(e)||"Component"),m.enqueueReplaceState(t,t.state,null))}(e,a);var c=e.updateQueue;null!==c&&(a.state=Ii(r,e,c,a,i,t))}"function"==typeof a.componentDidMount&&(e.effectTag|=_r)},resumeMountClassInstance:function(e,t){var n=e.type,o=e.stateNode;v(e,o);var l=e.memoizedProps,c=e.pendingProps,d=o.context,f=s(e),m=u(e,f),g="function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate;g||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||l===c&&d===m||y(e,o,c,m);var w=e.memoizedState,k=void 0,C=void 0;if(null!==e.updateQueue){k=Ii(null,e,e.updateQueue,o,c,t);var x=e.updateQueue;null!==x&&null!==x.capturedValues&&ja&&"function"==typeof n.getDerivedStateFromCatch&&(C=Hi(n,x.capturedValues))}else k=w;var _=void 0;if(l!==c&&(_=b(e,0,c,k)),null!==_&&void 0!==_){k=null===k||void 0===k?_:i({},k,_);var T=e.updateQueue;null!==T&&(T.baseState=i({},T.baseState,_))}if(null!==C&&void 0!==C){k=null===k||void 0===k?C:i({},k,C);var S=e.updateQueue;null!==S&&(S.baseState=i({},S.baseState,C))}if(!(l!==c||w!==k||p()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate))return"function"==typeof o.componentDidMount&&(e.effectTag|=_r),!1;var E=h(e,l,c,w,k,m);return E?(g||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(yi(e,"componentWillMount"),"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),bi()),"function"==typeof o.componentDidMount&&(e.effectTag|=_r)):("function"==typeof o.componentDidMount&&(e.effectTag|=_r),r(e,c),a(e,k)),o.props=c,o.state=k,o.context=m,E},updateClassInstance:function(e,t,n){var o=t.type,l=t.stateNode;v(t,l);var c=t.memoizedProps,d=t.pendingProps,f=l.context,m=s(t),g=u(t,m),w="function"==typeof o.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate;w||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||c===d&&f===g||y(t,l,d,g);var k=t.memoizedState,C=void 0,x=void 0;if(null!==t.updateQueue){C=Ii(e,t,t.updateQueue,l,d,n);var _=t.updateQueue;null!==_&&null!==_.capturedValues&&ja&&"function"==typeof o.getDerivedStateFromCatch&&(x=Hi(o,_.capturedValues))}else C=k;var T=void 0;if(c!==d&&(T=b(t,0,d,C)),null!==T&&void 0!==T){C=null===C||void 0===C?T:i({},C,T);var S=t.updateQueue;null!==S&&(S.baseState=i({},S.baseState,T))}if(null!==x&&void 0!==x){C=null===C||void 0===C?x:i({},C,x);var E=t.updateQueue;null!==E&&(E.baseState=i({},E.baseState,x))}if(!(c!==d||k!==C||p()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"==typeof l.componentDidUpdate&&(c===e.memoizedProps&&k===e.memoizedState||(t.effectTag|=_r)),"function"==typeof l.getSnapshotBeforeUpdate&&(c===e.memoizedProps&&k===e.memoizedState||(t.effectTag|=Or)),!1;var P=h(t,c,d,k,C,g);return P?(w||"function"!=typeof l.UNSAFE_componentWillUpdate&&"function"!=typeof l.componentWillUpdate||(yi(t,"componentWillUpdate"),"function"==typeof l.componentWillUpdate&&l.componentWillUpdate(d,C,g),"function"==typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(d,C,g),bi()),"function"==typeof l.componentDidUpdate&&(t.effectTag|=_r),"function"==typeof l.getSnapshotBeforeUpdate&&(t.effectTag|=Or)):("function"==typeof l.componentDidUpdate&&(c===e.memoizedProps&&k===e.memoizedState||(t.effectTag|=_r)),"function"==typeof l.getSnapshotBeforeUpdate&&(c===e.memoizedProps&&k===e.memoizedState||(t.effectTag|=Or)),r(t,d),a(t,C)),l.props=d,l.state=C,l.context=g,P}}},Vi=sn.getCurrentFiberStackAddendum,qi=void 0,Ki=void 0,$i=void 0,Qi=void 0,Yi=function(e){};qi=!1,Ki={},$i={},Qi={},Yi=function(e){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){"object"!=typeof e._store&&t(!1,"React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue."),e._store.validated=!0;var n='Each child in an array or iterator should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.'+(Vi()||"");$i[n]||($i[n]=!0,o(!1,'Each child in an array or iterator should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.%s',Vi()))}};var Xi=Array.isArray;function Gi(e,n,r){var a=r.ref;if(null!==a&&"function"!=typeof a&&"object"!=typeof a){if(e.mode&oa){var i=on(e)||"Component";Ki[i]||(o(!1,'A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using createRef() instead.\n%s\n\nLearn more about using refs safely here:\nhttps://fb.me/react-strict-mode-string-ref',a,ln(e)),Ki[i]=!0)}if(r._owner){var l=r._owner,u=void 0;if(l){var s=l;s.tag!==Z&&t(!1,"Stateless function components cannot have refs."),u=s.stateNode}u||t(!1,"Missing owner for string ref %s. This error is likely caused by a bug in React. Please file an issue.",a);var c=""+a;if(null!==n&&null!==n.ref&&n.ref._stringRef===c)return n.ref;var d=function(e){var t=u.refs===f?u.refs={}:u.refs;null===e?delete t[c]:t[c]=e};return d._stringRef=c,d}"string"!=typeof a&&t(!1,"Expected ref to be a function or a string."),r._owner||t(!1,"Element ref was specified as a string (%s) but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a functional component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://fb.me/react-refs-must-have-owner for more information.",a)}return a}function Zi(e,n){if("textarea"!==e.type){var r;r=" If you meant to render a collection of children, use an array instead."+(Vi()||""),t(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===Object.prototype.toString.call(n)?"object with keys {"+Object.keys(n).join(", ")+"}":n,r)}}function Ji(){var e="Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."+(Vi()||"");Qi[e]||(Qi[e]=!0,o(!1,"Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.%s",Vi()||""))}function el(e){function n(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=Sr}}function r(t,r){if(!e)return null;for(var o=r;null!==o;)n(t,o),o=o.sibling;return null}function a(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function i(e,t,n){var r=da(e,t,n);return r.index=0,r.sibling=null,r}function l(t,n,r){if(t.index=r,!e)return n;var o=t.alternate;if(null!==o){var a=o.index;return a<n?(t.effectTag=xr,n):a}return t.effectTag=xr,n}function u(t){return e&&null===t.alternate&&(t.effectTag=xr),t}function s(e,t,n,r){if(null===t||t.tag!==ne){var o=ha(n,e.mode,r);return o.return=e,o}var a=i(t,n,r);return a.return=e,a}function c(e,t,n,r){if(null!==t&&t.type===n.type){var o=i(t,n.props,r);return o.ref=Gi(e,t,n),o.return=e,o._debugSource=n._source,o._debugOwner=n._owner,o}var a=fa(n,e.mode,r);return a.ref=Gi(e,t,n),a.return=e,a}function d(e,t,n,r){if(null===t||t.tag!==ee||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var o=va(n,e.mode,r);return o.return=e,o}var a=i(t,n.children||[],r);return a.return=e,a}function f(e,t,n,r,o){if(null===t||t.tag!==ie){var a=ma(n,e.mode,r,o);return a.return=e,a}var l=i(t,n,r);return l.return=e,l}function p(e,t,n){if("string"==typeof t||"number"==typeof t){var r=ha(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case qt:var o=fa(t,e.mode,n);return o.ref=Gi(e,null,t),o.return=e,o;case Qt:var a=va(t,e.mode,n);return a.return=e,a}if(Xi(t)||rn(t)){var i=ma(t,e.mode,n,null);return i.return=e,i}Zi(e,t)}return"function"==typeof t&&Ji(),null}function m(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case qt:return n.key===o?n.type===Yt?f(e,t,n.props.children,r,o):c(e,t,n,r):null;case Qt:return n.key===o?d(e,t,n,r):null}if(Xi(n)||rn(n))return null!==o?null:f(e,t,n,r,null);Zi(e,n)}return"function"==typeof n&&Ji(),null}function h(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return s(t,e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case qt:var a=e.get(null===r.key?n:r.key)||null;return r.type===Yt?f(t,a,r.props.children,o,r.key):c(t,a,r,o);case Qt:return d(t,e.get(null===r.key?n:r.key)||null,r,o)}if(Xi(r)||rn(r))return f(t,e.get(n)||null,r,o,null);Zi(t,r)}return"function"==typeof r&&Ji(),null}function v(e,t){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case qt:case Qt:Yi(e);var n=e.key;if("string"!=typeof n)break;if(null===t){(t=new Set).add(n);break}if(!t.has(n)){t.add(n);break}o(!1,"Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.%s",n,Vi())}return t}return function(s,c,d,f){"object"==typeof d&&null!==d&&d.type===Yt&&null===d.key&&(d=d.props.children);var g="object"==typeof d&&null!==d;if(g)switch(d.$$typeof){case qt:return u(function(e,t,o,a){for(var l=o.key,u=t;null!==u;){if(u.key===l){if(u.tag===ie?o.type===Yt:u.type===o.type){r(e,u.sibling);var s=i(u,o.type===Yt?o.props.children:o.props,a);return s.ref=Gi(e,u,o),s.return=e,s._debugSource=o._source,s._debugOwner=o._owner,s}r(e,u);break}n(e,u),u=u.sibling}if(o.type===Yt){var c=ma(o.props.children,e.mode,a,o.key);return c.return=e,c}var d=fa(o,e.mode,a);return d.ref=Gi(e,t,o),d.return=e,d}(s,c,d,f));case Qt:return u(function(e,t,o,a){for(var l=o.key,u=t;null!==u;){if(u.key===l){if(u.tag===ee&&u.stateNode.containerInfo===o.containerInfo&&u.stateNode.implementation===o.implementation){r(e,u.sibling);var s=i(u,o.children||[],a);return s.return=e,s}r(e,u);break}n(e,u),u=u.sibling}var c=va(o,e.mode,a);return c.return=e,c}(s,c,d,f))}if("string"==typeof d||"number"==typeof d)return u(function(e,t,n,o){if(null!==t&&t.tag===ne){r(e,t.sibling);var a=i(t,n,o);return a.return=e,a}r(e,t);var l=ha(n,e.mode,o);return l.return=e,l}(s,c,""+d,f));if(Xi(d))return function(t,o,i,u){for(var s=null,c=0;c<i.length;c++)s=v(i[c],s);for(var d=null,f=null,g=o,y=0,b=0,w=null;null!==g&&b<i.length;b++){g.index>b?(w=g,g=null):w=g.sibling;var k=m(t,g,i[b],u);if(null===k){null===g&&(g=w);break}e&&g&&null===k.alternate&&n(t,g),y=l(k,y,b),null===f?d=k:f.sibling=k,f=k,g=w}if(b===i.length)return r(t,g),d;if(null===g){for(;b<i.length;b++){var C=p(t,i[b],u);C&&(y=l(C,y,b),null===f?d=C:f.sibling=C,f=C)}return d}for(var x=a(0,g);b<i.length;b++){var _=h(x,t,b,i[b],u);_&&(e&&null!==_.alternate&&x.delete(null===_.key?b:_.key),y=l(_,y,b),null===f?d=_:f.sibling=_,f=_)}return e&&x.forEach(function(e){return n(t,e)}),d}(s,c,d,f);if(rn(d))return function(i,u,s,c){var d=rn(s);"function"!=typeof d&&t(!1,"An object is not an iterable. This error is likely caused by a bug in React. Please file an issue."),"function"==typeof s.entries&&s.entries===d&&(qi||o(!1,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",Vi()),qi=!0);var f=d.call(s);if(f)for(var g=null,y=f.next();!y.done;y=f.next())g=v(y.value,g);var b=d.call(s);null==b&&t(!1,"An iterable object provided no iterator.");for(var w=null,k=null,C=u,x=0,_=0,T=null,S=b.next();null!==C&&!S.done;_++,S=b.next()){C.index>_?(T=C,C=null):T=C.sibling;var E=m(i,C,S.value,c);if(null===E){C||(C=T);break}e&&C&&null===E.alternate&&n(i,C),x=l(E,x,_),null===k?w=E:k.sibling=E,k=E,C=T}if(S.done)return r(i,C),w;if(null===C){for(;!S.done;_++,S=b.next()){var P=p(i,S.value,c);null!==P&&(x=l(P,x,_),null===k?w=P:k.sibling=P,k=P)}return w}for(var N=a(0,C);!S.done;_++,S=b.next()){var R=h(N,i,_,S.value,c);null!==R&&(e&&null!==R.alternate&&N.delete(null===R.key?_:R.key),x=l(R,x,_),null===k?w=R:k.sibling=R,k=R)}return e&&N.forEach(function(e){return n(i,e)}),w}(s,c,d,f);if(g&&Zi(s,d),"function"==typeof d&&Ji(),void 0===d)switch(s.tag){case Z:if(s.stateNode.render._isMockFunction)break;case G:var y=s.type;t(!1,"%s(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.",y.displayName||y.name||"Component")}return r(s,c)}}var tl=el(!0),nl=el(!1);var rl=void 0,ol=void 0,al=void 0;rl={},ol={},al={};var il=function(e,n,r,a,l,u,s){var c=e.shouldSetTextContent,d=e.shouldDeprioritizeSubtree,f=n.pushHostContext,p=n.pushHostContainer,m=a.pushProvider,h=r.getMaskedContext,v=r.getUnmaskedContext,g=r.hasContextChanged,y=r.pushContextProvider,b=r.pushTopLevelContextObject,w=r.invalidateContextProvider,k=l.enterHydrationState,C=l.resetHydrationState,x=l.tryToClaimNextHydratableInstance,_=Bi(r,u,s,j,W),T=_.adoptClassInstance,S=_.callGetDerivedStateFromProps,E=_.constructClassInstance,P=_.mountClassInstance,N=_.resumeMountClassInstance,R=_.updateClassInstance;function I(e,t,n){O(e,t,n,t.expirationTime)}function O(e,t,n,r){t.child=null===e?nl(t,null,n,r):tl(t,e.child,n,r)}function D(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=Rr)}function U(e,t,n,r,o,a){if(D(e,t),!n&&!o)return r&&w(t,!1),F(e,t);var i=t.type,l=t.stateNode;zt.current=t;var u=void 0;return!o||ja&&"function"==typeof i.getDerivedStateFromCatch?(sn.setCurrentPhase("render"),u=l.render(),(Wa||La&&t.mode&oa)&&l.render(),sn.setCurrentPhase(null)):u=null,t.effectTag|=Cr,o&&(O(e,t,null,a),t.child=null),O(e,t,u,a),W(t,l.state),j(t,l.props),r&&w(t,!0),t.child}function M(e){var t=e.stateNode;t.pendingContext?b(e,t.pendingContext,t.pendingContext!==t.context):t.context&&b(e,t.context,!1),p(e,t.containerInfo)}function A(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=void 0;switch(o.tag){case ue:var i=0|o.stateNode;if(o.type===t&&0!=(i&n)){for(var l=o;null!==l;){var u=l.alternate;if(l.expirationTime===Qo||l.expirationTime>r)l.expirationTime=r,null!==u&&(u.expirationTime===Qo||u.expirationTime>r)&&(u.expirationTime=r);else{if(null===u||!(u.expirationTime===Qo||u.expirationTime>r))break;u.expirationTime=r}l=l.return}a=null}else a=o.child;break;case se:a=o.type===e.type?null:o.child;break;default:a=o.child}if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}var s=a.sibling;if(null!==s){a=s;break}a=a.return}o=a}}function F(e,n){return hi(n),function(e,n){if(null!==e&&n.child!==e.child&&t(!1,"Resuming work not yet implemented."),null!==n.child){var r=n.child,o=da(r,r.pendingProps,r.expirationTime);for(n.child=o,o.return=n;null!==r.sibling;)r=r.sibling,(o=o.sibling=da(r,r.pendingProps,r.expirationTime)).return=n;o.sibling=null}}(e,n),n.child}function j(e,t){e.memoizedProps=t}function W(e,t){e.memoizedState=t}return{beginWork:function(e,n,r){if(n.expirationTime===Qo||n.expirationTime>r)return function(e,t){switch(hi(t),t.tag){case J:M(t);break;case Z:y(t);break;case ee:p(t,t.stateNode.containerInfo);break;case se:m(t)}return null}(0,n);switch(n.tag){case X:return function(e,n,r){null!==e&&t(!1,"An indeterminate component should never have mounted. This error is likely caused by a bug in React. Please file an issue.");var a,l=n.type,u=n.pendingProps,s=v(n),c=h(n,s);if(l.prototype&&"function"==typeof l.prototype.render){var d=on(n)||"Unknown";rl[d]||(o(!1,"The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",d,d),rl[d]=!0)}if(zt.current=n,a=l(u,c),n.effectTag|=Cr,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){var f=n.type;if(n.tag=Z,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,"function"==typeof f.getDerivedStateFromProps){var p=S(n,a,u,n.memoizedState);null!==p&&void 0!==p&&(n.memoizedState=i({},n.memoizedState,p))}var m=y(n);return T(n,a),P(n,r),U(e,n,!0,m,!1,r)}n.tag=G;var g=n.type;if(g&&g.childContextTypes&&o(!1,"%s(...): childContextTypes cannot be defined on a functional component.",g.displayName||g.name||"Component"),null!==n.ref){var b="",w=sn.getCurrentFiberOwnerName();w&&(b+="\n\nCheck the render method of `"+w+"`.");var k=w||n._debugID||"",C=n._debugSource;C&&(k=C.fileName+":"+C.lineNumber),al[k]||(al[k]=!0,o(!1,"Stateless function components cannot be given refs. Attempts to access this ref will fail.%s%s",b,sn.getCurrentFiberStackAddendum()))}if("function"==typeof l.getDerivedStateFromProps){var x=on(n)||"Unknown";ol[x]||(o(!1,"%s: Stateless functional components do not support getDerivedStateFromProps.",x),ol[x]=!0)}return I(e,n,a),j(n,u),n.child}(e,n,r);case G:return function(e,t){var n=t.type,r=t.pendingProps;if(g());else if(t.memoizedProps===r)return F(e,t);var o,a=v(t),i=h(t,a);return zt.current=t,sn.setCurrentPhase("render"),o=n(r,i),sn.setCurrentPhase(null),t.effectTag|=Cr,I(e,t,o),j(t,r),t.child}(e,n);case Z:return function(e,t,n){var r=y(t),o=void 0;null===e?null===t.stateNode?(E(t,t.pendingProps),P(t,n),o=!0):o=N(t,n):o=R(e,t,n);var a=!1,i=t.updateQueue;return null!==i&&null!==i.capturedValues&&(o=!0,a=!0),U(e,t,o,r,a,n)}(e,n,r);case J:return function(e,t,n){M(t);var r=t.updateQueue;if(null!==r){var o=t.memoizedState,a=Ii(e,t,r,null,null,n);W(t,a);var i=void 0;if(null!==(r=t.updateQueue)&&null!==r.capturedValues)i=null;else{if(o===a)return C(),F(e,t);i=a.element}var l=t.stateNode;return(null===e||null===e.child)&&l.hydrate&&k(t)?(t.effectTag|=xr,t.child=nl(t,null,i,n)):(C(),I(e,t,i)),W(t,a),t.child}return C(),F(e,t)}(e,n,r);case te:return function(e,t,n){f(t),null===e&&x(t);var r=t.type,o=t.memoizedProps,a=t.pendingProps,i=null!==e?e.memoizedProps:null;if(g());else if(o===a){var l=t.mode&ra&&d(r,a);if(l&&(t.expirationTime=Xo),!l||n!==Xo)return F(e,t)}var u=a.children;return c(r,a)?u=null:i&&c(r,i)&&(t.effectTag|=Er),D(e,t),n!==Xo&&t.mode&ra&&d(r,a)?(t.expirationTime=Xo,t.memoizedProps=a,null):(I(e,t,u),j(t,a),t.child)}(e,n,r);case ne:return function(e,t){return null===e&&x(t),j(t,t.pendingProps),null}(e,n);case oe:n.tag=re;case re:return function(e,t,n){var r=t.pendingProps;g()||t.memoizedProps===r&&(r=t.memoizedProps);var o=r.children;return t.stateNode=null===e?nl(t,t.stateNode,o,n):tl(t,e.stateNode,o,n),j(t,r),t.stateNode}(e,n,r);case ae:return null;case ee:return function(e,t,n){p(t,t.stateNode.containerInfo);var r=t.pendingProps;if(g());else if(t.memoizedProps===r)return F(e,t);return null===e?(t.child=tl(t,null,r,n),j(t,r)):(I(e,t,r),j(t,r)),t.child}(e,n,r);case ce:return function(e,t){var n=(0,t.type.render)(t.pendingProps,t.ref);return I(e,t,n),j(t,n),t.child}(e,n);case ie:return function(e,t){var n=t.pendingProps;if(g());else if(t.memoizedProps===n)return F(e,t);return I(e,t,n),j(t,n),t.child}(e,n);case le:return function(e,t){var n=t.pendingProps.children;if(g());else if(null===n||t.memoizedProps===n)return F(e,t);return I(e,t,n),j(t,n),t.child}(e,n);case se:return function(e,t,n){var r=t.type._context,a=t.pendingProps,i=t.memoizedProps;if(g());else if(i===a)return t.stateNode=0,m(t),F(e,t);var l=a.value;t.memoizedProps=a;var u=void 0;if(null===i)u=$o;else if(i.value===a.value){if(i.children===a.children)return t.stateNode=0,m(t),F(e,t);u=0}else{var s=i.value;if(s===l&&(0!==s||1/s==1/l)||s!=s&&l!=l){if(i.children===a.children)return t.stateNode=0,m(t),F(e,t);u=0}else if(((u="function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,l):$o)&$o)!==u&&o(!1,"calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",u),0==(u|=0)){if(i.children===a.children)return t.stateNode=0,m(t),F(e,t)}else A(t,r,u,n)}return t.stateNode=u,m(t),I(e,t,a.children),t.child}(e,n,r);case ue:return function(e,t,n){var r=t.type,a=t.pendingProps,i=t.memoizedProps,l=r._currentValue,u=r._changedBits;if(g());else if(0===u&&i===a)return F(e,t);t.memoizedProps=a;var s=a.unstable_observedBits;if(void 0!==s&&null!==s||(s=$o),t.stateNode=s,0!=(u&s))A(t,r,u,n);else if(i===a)return F(e,t);var c=a.children;return"function"!=typeof c&&o(!1,"A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),I(e,t,c(l)),t.child}(e,n,r);default:t(!1,"Unknown unit of work tag. This error is likely caused by a bug in React. Please file an issue.")}}}},ll=function(e,n,r,o,a){var i=e.createInstance,l=e.createTextInstance,u=e.appendInitialChild,s=e.finalizeInitialChildren,c=e.prepareUpdate,d=e.mutation,f=e.persistence,p=n.getRootHostContainer,m=n.popHostContext,h=n.getHostContext,v=n.popHostContainer,g=r.popContextProvider,y=r.popTopLevelContextObject,b=o.popProvider,w=a.prepareToHydrateHostInstance,k=a.prepareToHydrateHostTextInstance,C=a.popHydrationState;function x(e){e.effectTag|=_r}function _(e){e.effectTag|=Rr}function T(e,n,r){var o=n.memoizedProps;o||t(!1,"Should be resolved by now. This error is likely caused by a bug in React. Please file an issue."),n.tag=oe;var a=[];!function(e,n){var r=n.stateNode;for(r&&(r.return=n);null!==r;){if(r.tag===te||r.tag===ne||r.tag===ee)t(!1,"A call cannot have host component children.");else if(r.tag===ae)e.push(r.pendingProps.value);else if(null!==r.child){r.child.return=r,r=r.child;continue}for(;null===r.sibling;){if(null===r.return||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(a,n);var i=(0,o.handler)(o.props,a),l=null!==e?e.child:null;return n.child=tl(n,l,i,r),n.child}function S(e,t){for(var n=t.child;null!==n;){if(n.tag===te||n.tag===ne)u(e,n.stateNode);else if(n.tag===ee);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)return;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}var E=void 0,P=void 0,N=void 0;if(d)Aa?(E=function(e){},P=function(e,t,n,r,o,a,i,l){t.updateQueue=n,n&&x(t)},N=function(e,t,n,r){n!==r&&x(t)}):t(!1,"Mutating reconciler is disabled.");else if(f)if(Fa){var R=f.cloneInstance,I=f.createContainerChildSet,O=f.appendChildToContainerChildSet,D=f.finalizeContainerChildren;E=function(e){var t=e.stateNode;if(null===e.firstEffect);else{var n=t.containerInfo,r=I(n);!function(e,t){for(var n=t.child;null!==n;){if(n.tag===te||n.tag===ne)O(e,n.stateNode);else if(n.tag===ee);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)return;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(r,e),t.pendingChildren=r,x(e),D(n,r)}},P=function(e,t,n,r,o,a,i,l){var u=null===t.firstEffect,c=e.stateNode;if(u&&null===n)t.stateNode=c;else{var d=t.stateNode,f=R(c,n,r,o,a,t,u,d);s(f,r,a,i,l)&&x(t),t.stateNode=f,u?x(t):S(f,t)}},N=function(e,t,n,r){if(n!==r){var o=p(),a=h();t.stateNode=l(r,o,a,t),x(t)}}}else t(!1,"Persistent reconciler is disabled.");else t(!1,"Noop reconciler is disabled.");return{completeWork:function(e,n,r){var o=n.pendingProps;switch(n.tag){case G:return null;case Z:g(n);var a=n.stateNode,u=n.updateQueue;return null!==u&&null!==u.capturedValues&&(n.effectTag&=~Nr,"function"==typeof a.componentDidCatch?n.effectTag|=Ir:u.capturedValues=null),null;case J:v(n),y(n);var d=n.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),null!==e&&null!==e.child||(C(n),n.effectTag&=~xr),E(n);var f=n.updateQueue;return null!==f&&null!==f.capturedValues&&(n.effectTag|=Ir),null;case te:m(n);var R=p(),I=n.type;if(null!==e&&null!=n.stateNode){var O=e.memoizedProps,D=n.stateNode,U=h(),M=c(D,I,O,o,R,U);P(e,n,M,I,O,o,R,U),e.ref!==n.ref&&_(n)}else{if(!o)return null===n.stateNode&&t(!1,"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."),null;var A=h();if(C(n))w(n,R,A)&&x(n);else{var F=i(I,o,R,A,n);S(F,n),s(F,I,o,R,A)&&x(n),n.stateNode=F}null!==n.ref&&_(n)}return null;case ne:var j=o;if(e&&null!=n.stateNode){var W=e.memoizedProps;N(e,n,W,j)}else{if("string"!=typeof j)return null===n.stateNode&&t(!1,"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."),null;var L=p(),z=h();C(n)?k(n)&&x(n):n.stateNode=l(j,L,z,n)}return null;case re:return T(e,n,r);case oe:return n.tag=re,null;case ae:case ce:case ie:case le:return null;case ee:return v(n),E(n),null;case se:return b(n),null;case ue:return null;case X:t(!1,"An indeterminate component should have become determinate before completing. This error is likely caused by a bug in React. Please file an issue.");default:t(!1,"Unknown unit of work tag. This error is likely caused by a bug in React. Please file an issue.")}}}};function ul(e,t){return{value:e,source:t,stack:ln(t)}}var sl=y.invokeGuardedCallback,cl=y.hasCaughtError,dl=y.clearCaughtError,fl=null;function pl(e,t){var n=t.source,r=t.stack;null===r&&(r=ln(n));var o={componentName:null!==n?on(n):null,componentStack:null!==r?r:"",error:t.value,errorBoundary:null,errorBoundaryName:null,errorBoundaryFound:!1,willRetry:!1};null!==e&&e.tag===Z&&(o.errorBoundary=e.stateNode,o.errorBoundaryName=on(e),o.errorBoundaryFound=!0,o.willRetry=!0);try{!function(e){var t=e.error;if(!t||!t.suppressReactErrorLogging){var n=e.componentName,r=e.componentStack,o=e.errorBoundaryName,a=e.errorBoundaryFound,i=e.willRetry,l=(n?"The above error occurred in the <"+n+"> component:":"The above error occurred in one of your React components:")+r+"\n\n"+(a&&o?i?"React will try to recreate this component tree from scratch using the error boundary you provided, "+o+".":"This error was initially handled by the error boundary "+o+".\nRecreating the tree from scratch failed so React will unmount the tree.":"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://fb.me/react-error-boundaries to learn more about error boundaries.");console.error(l)}}(o)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}fl=new Set;var ml=function(e,n,r,a,i,l){var u=e.getPublicInstance,s=e.mutation,c=e.persistence,d=function(e,t){yi(e,"componentWillUnmount"),t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount(),bi()};function f(e){var t=e.ref;if(null!==t)if("function"==typeof t){if(sl(null,t,null,null),cl()){var r=dl();n(e,r)}}else t.current=null}function p(e,n){switch(n.tag){case Z:if(n.effectTag&Or&&null!==e){var r=e.memoizedProps,a=e.memoizedState;yi(n,"getSnapshotBeforeUpdate");var i=n.stateNode;i.props=n.memoizedProps,i.state=n.memoizedState;var l=i.getSnapshotBeforeUpdate(r,a),u=fl;void 0!==l||u.has(n.type)||(u.add(n.type),o(!1,"%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",on(n))),i.__reactInternalSnapshotBeforeUpdate=l,bi()}return;case J:case te:case ne:case ee:return;default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function m(e,n,r,o,a){switch(r.tag){case Z:var i=r.stateNode;if(r.effectTag&_r)if(null===n)yi(r,"componentDidMount"),i.props=r.memoizedProps,i.state=r.memoizedState,i.componentDidMount(),bi();else{var l=n.memoizedProps,s=n.memoizedState;yi(r,"componentDidUpdate"),i.props=r.memoizedProps,i.state=r.memoizedState,i.componentDidUpdate(l,s,i.__reactInternalSnapshotBeforeUpdate),bi()}var c=r.updateQueue;return void(null!==c&&Oi(c,i));case J:var d=r.updateQueue;if(null!==d){var f=null;if(null!==r.child)switch(r.child.tag){case te:f=u(r.child.stateNode);break;case Z:f=r.child.stateNode}Oi(d,f)}return;case te:var p=r.stateNode;if(null===n&&r.effectTag&_r){var m=r.type,h=r.memoizedProps;T(p,m,h,r)}return;case ne:case ee:return;default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function h(e,n){switch(e.tag){case Z:var r=e.type,o=e.stateNode,a=e.updateQueue;(null===a||null===a.capturedValues)&&t(!1,"An error logging effect should not have been scheduled if no errors were captured. This error is likely caused by a bug in React. Please file an issue.");var l=a.capturedValues;a.capturedValues=null,"function"!=typeof r.getDerivedStateFromCatch&&i(o),o.props=e.memoizedProps,o.state=e.memoizedState;for(var u=0;u<l.length;u++){var s=l[u],c=s.value,d=s.stack;pl(e,s),o.componentDidCatch(c,{componentStack:null!==d?d:""})}break;case J:var f=e.updateQueue;(null===f||null===f.capturedValues)&&t(!1,"An error logging effect should not have been scheduled if no errors were captured. This error is likely caused by a bug in React. Please file an issue.");var p=f.capturedValues;f.capturedValues=null;for(var m=0;m<p.length;m++){var h=p[m];pl(e,h),n(h.value)}break;default:t(!1,"This unit of work tag cannot capture errors.  This error is likely caused by a bug in React. Please file an issue.")}}function v(e){var t=e.ref;if(null!==t){var n=e.stateNode,r=void 0;switch(e.tag){case te:r=u(n);break;default:r=n}"function"==typeof t?t(r):(t.hasOwnProperty("current")||o(!1,"Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().%s",on(e),ln(e)),t.current=r)}}function g(e){var t=e.ref;null!==t&&("function"==typeof t?t(null):t.current=null)}function y(e){switch(_a(e),e.tag){case Z:f(e);var t=e.stateNode;return void("function"==typeof t.componentWillUnmount&&function(e,t){if(sl(null,d,null,e,t),cl()){var r=dl();n(e,r)}}(e,t));case te:return void f(e);case re:return void b(e.stateNode);case ee:return void(Aa&&s?A(e):Fa&&c&&k(e))}}function b(e){for(var t=e;;)if(y(t),null===t.child||s&&t.tag===ee){if(t===e)return;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function w(e){e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)}var k=void 0;if(!s){var C=void 0;if(c){var x=c.replaceContainerChildren,_=c.createContainerChildSet;k=function(e){var t=e.stateNode.containerInfo,n=_(t);x(t,n)},C=function(e){switch(e.tag){case Z:case te:case ne:return;case J:case ee:var n=e.stateNode,r=n.containerInfo,o=n.pendingChildren;return void x(r,o);default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}}else C=function(e){};if(Fa)return{commitResetTextContent:function(e){},commitPlacement:function(e){},commitDeletion:function(e){b(e),w(e)},commitWork:function(e,t){C(t)},commitLifeCycles:m,commitBeforeMutationLifeCycles:p,commitErrorLogging:h,commitAttachRef:v,commitDetachRef:g};t(!1,c?"Persistent reconciler is disabled.":"Noop reconciler is disabled.")}var T=s.commitMount,S=s.commitUpdate,E=s.resetTextContent,P=s.commitTextUpdate,N=s.appendChild,R=s.appendChildToContainer,I=s.insertBefore,O=s.insertInContainerBefore,D=s.removeChild,U=s.removeChildFromContainer;function M(e){return e.tag===te||e.tag===J||e.tag===ee}function A(e){for(var n=e,r=!1,o=void 0,a=void 0;;){if(!r){var i=n.return;e:for(;;){switch(null===i&&t(!1,"Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue."),i.tag){case te:o=i.stateNode,a=!1;break e;case J:case ee:o=i.stateNode.containerInfo,a=!0;break e}i=i.return}r=!0}if(n.tag===te||n.tag===ne)b(n),a?U(o,n.stateNode):D(o,n.stateNode);else if(n.tag===ee){if(o=n.stateNode.containerInfo,null!==n.child){n.child.return=n,n=n.child;continue}}else if(y(n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return;for(;null===n.sibling;){if(null===n.return||n.return===e)return;(n=n.return).tag===ee&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}if(Aa)return{commitBeforeMutationLifeCycles:p,commitResetTextContent:function(e){E(e.stateNode)},commitPlacement:function(e){var n=function(e){for(var n=e.return;null!==n;){if(M(n))return n;n=n.return}t(!1,"Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e),r=void 0,o=void 0;switch(n.tag){case te:r=n.stateNode,o=!1;break;case J:case ee:r=n.stateNode.containerInfo,o=!0;break;default:t(!1,"Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}n.effectTag&Er&&(E(r),n.effectTag&=~Er);for(var a=function(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||M(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==te&&t.tag!==ne;){if(t.effectTag&xr)continue e;if(null===t.child||t.tag===ee)continue e;t.child.return=t,t=t.child}if(!(t.effectTag&xr))return t.stateNode}}(e),i=e;;){if(i.tag===te||i.tag===ne)a?o?O(r,i.stateNode,a):I(r,i.stateNode,a):o?R(r,i.stateNode):N(r,i.stateNode);else if(i.tag===ee);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)return;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},commitDeletion:function(e){A(e),w(e)},commitWork:function(e,n){switch(n.tag){case Z:return;case te:var r=n.stateNode;if(null!=r){var o=n.memoizedProps,a=null!==e?e.memoizedProps:o,i=n.type,l=n.updateQueue;n.updateQueue=null,null!==l&&S(r,l,i,a,o,n)}return;case ne:null===n.stateNode&&t(!1,"This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var u=n.stateNode,s=n.memoizedProps,c=null!==e?e.memoizedProps:s;return void P(u,c,s);case J:return;default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}},commitLifeCycles:m,commitErrorLogging:h,commitAttachRef:v,commitDetachRef:g};t(!1,"Mutating reconciler is disabled.")},hl={},vl=function(e){var n=e.shouldSetTextContent,r=e.hydration;if(!r)return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){t(!1,"Expected prepareToHydrateHostInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.")},prepareToHydrateHostTextInstance:function(){t(!1,"Expected prepareToHydrateHostTextInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.")},popHydrationState:function(e){return!1}};var o=r.canHydrateInstance,a=r.canHydrateTextInstance,i=r.getNextHydratableSibling,l=r.getFirstHydratableChild,u=r.hydrateInstance,s=r.hydrateTextInstance,c=r.didNotMatchHydratedContainerTextInstance,d=r.didNotMatchHydratedTextInstance,f=r.didNotHydrateContainerInstance,p=r.didNotHydrateInstance,m=r.didNotFindHydratableContainerInstance,h=r.didNotFindHydratableContainerTextInstance,v=r.didNotFindHydratableInstance,g=r.didNotFindHydratableTextInstance,y=null,b=null,w=!1;function k(e,t){switch(e.tag){case J:f(e.stateNode.containerInfo,t);break;case te:p(e.type,e.memoizedProps,e.stateNode,t)}var n,r=((n=ca(te,null,null,na)).type="DELETED",n);r.stateNode=t,r.return=e,r.effectTag=Sr,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function C(e,t){switch(t.effectTag|=xr,e.tag){case J:var n=e.stateNode.containerInfo;switch(t.tag){case te:var r=t.type,o=t.pendingProps;m(n,r,o);break;case ne:var a=t.pendingProps;h(n,a)}break;case te:var i=e.type,l=e.memoizedProps,u=e.stateNode;switch(t.tag){case te:var s=t.type,c=t.pendingProps;v(i,l,u,s,c);break;case ne:var d=t.pendingProps;g(i,l,u,d)}break;default:return}}function x(e,t){switch(e.tag){case te:var n=e.type,r=e.pendingProps,i=o(t,n,r);return null!==i&&(e.stateNode=i,!0);case ne:var l=e.pendingProps,u=a(t,l);return null!==u&&(e.stateNode=u,!0);default:return!1}}function _(e){for(var t=e.return;null!==t&&t.tag!==te&&t.tag!==J;)t=t.return;y=t}return{enterHydrationState:function(e){var t=e.stateNode.containerInfo;return b=l(t),y=e,w=!0,!0},resetHydrationState:function(){y=null,b=null,w=!1},tryToClaimNextHydratableInstance:function(e){if(w){var t=b;if(!t)return C(y,e),w=!1,void(y=e);if(!x(e,t)){if(!(t=i(t))||!x(e,t))return C(y,e),w=!1,void(y=e);k(y,b)}y=e,b=l(t)}},prepareToHydrateHostInstance:function(e,t,n){var r=e.stateNode,o=u(r,e.type,e.memoizedProps,t,n,e);return e.updateQueue=o,null!==o},prepareToHydrateHostTextInstance:function(e){var t=e.stateNode,n=e.memoizedProps,r=s(t,n,e);if(r){var o=y;if(null!==o)switch(o.tag){case J:var a=o.stateNode.containerInfo;c(a,t,n);break;case te:var i=o.type,l=o.memoizedProps,u=o.stateNode;d(i,l,u,t,n)}}return r},popHydrationState:function(e){if(e!==y)return!1;if(!w)return _(e),w=!0,!1;var t=e.type;if(e.tag!==te||"head"!==t&&"body"!==t&&!n(t,e.memoizedProps))for(var r=b;r;)k(e,r),r=i(r);return _(e),b=y?i(e.stateNode):null,!0}}},gl={debugTool:null},yl=void 0;yl={};var bl=y.invokeGuardedCallback,wl=y.hasCaughtError,kl=y.clearCaughtError,Cl=void 0,xl=void 0,_l=void 0,Tl=void 0;Cl=!1,xl=!1;var Sl={};_l=function(e){var t=on(e)||"ReactClass";Sl[t]||(o(!1,"Can't call setState (or forceUpdate) on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.%s",ln(e)),Sl[t]=!0)},Tl=function(e){switch(sn.phase){case"getChildContext":if(xl)return;o(!1,"setState(...): Cannot call setState() inside getChildContext()"),xl=!0;break;case"render":if(Cl)return;o(!1,"Cannot update during an existing state transition (such as within `render` or another component's constructor). Render methods should be a pure function of props and state; constructor side-effects are an anti-pattern, but can be moved to `componentWillMount`."),Cl=!0}};var El=function(e){var n=function(){var e=[],t=void 0;t=[];var n=-1;return{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===n},pop:function(r,a){n<0?o(!1,"Unexpected pop."):(a!==t[n]&&o(!1,"Unexpected Fiber popped."),r.current=e[n],e[n]=null,t[n]=null,n--)},push:function(r,o,a){e[++n]=r.current,t[n]=a,r.current=o},checkThatStackIsEmpty:function(){-1!==n&&o(!1,"Expected an empty stack. Something was not reset properly.")},resetStackAfterFatalErrorInDev:function(){n=-1,e.length=0,t.length=0}}}(),r=function(e,n){var r=e.getChildHostContext,o=e.getRootHostContext,a=n.createCursor,i=n.push,l=n.pop,u=a(hl),s=a(hl),c=a(hl);function d(e){return e===hl&&t(!1,"Expected host context to exist. This error is likely caused by a bug in React. Please file an issue."),e}return{getHostContext:function(){return d(u.current)},getRootHostContainer:function(){return d(c.current)},popHostContainer:function(e){l(u,e),l(s,e),l(c,e)},popHostContext:function(e){s.current===e&&(l(u,e),l(s,e))},pushHostContainer:function(e,t){i(c,t,e),i(s,e,e),i(u,hl,e);var n=o(t);l(u,e),i(u,n,e)},pushHostContext:function(e){var t=d(c.current),n=d(u.current),o=r(n,e.type,t);n!==o&&(i(s,e,e),i(u,o,e))}}}(e,n),a=function(e){var n=e.createCursor,r=e.push,a=e.pop,l=n(f),s=n(!1),c=f;function d(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function p(e){return e.tag===Z&&null!=e.type.childContextTypes}function m(e,n){var r,a=e.stateNode,l=e.type.childContextTypes;if("function"!=typeof a.getChildContext){var s=on(e)||"Unknown";return yl[s]||(yl[s]=!0,o(!1,"%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",s,s)),n}for(var c in sn.setCurrentPhase("getChildContext"),yi(e,"getChildContext"),r=a.getChildContext(),bi(),sn.setCurrentPhase(null),r)c in l||t(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',on(e)||"Unknown",c);var d=on(e)||"Unknown";return u(l,r,"child context",d,sn.getCurrentFiberStackAddendum),i({},n,r)}return{getUnmaskedContext:function(e){return p(e)?c:l.current},cacheContext:d,getMaskedContext:function(e,t){var n=e.type.contextTypes;if(!n)return f;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={};for(var a in n)o[a]=t[a];var i=on(e)||"Unknown";return u(n,o,"context",i,sn.getCurrentFiberStackAddendum),r&&d(e,t,o),o},hasContextChanged:function(){return s.current},isContextConsumer:function(e){return e.tag===Z&&null!=e.type.contextTypes},isContextProvider:p,popContextProvider:function(e){p(e)&&(a(s,e),a(l,e))},popTopLevelContextObject:function(e){a(s,e),a(l,e)},pushTopLevelContextObject:function(e,n,o){null!=l.cursor&&t(!1,"Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue."),r(l,n,e),r(s,o,e)},processChildContext:m,pushContextProvider:function(e){if(!p(e))return!1;var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||f;return c=l.current,r(l,n,e),r(s,s.current,e),!0},invalidateContextProvider:function(e,n){var o=e.stateNode;if(o||t(!1,"Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue."),n){var i=m(e,c);o.__reactInternalMemoizedMergedChildContext=i,a(s,e),a(l,e),r(l,i,e),r(s,n,e)}else a(s,e),r(s,n,e)},findCurrentUnmaskedContext:function(e){Lr(e)&&e.tag===Z||t(!1,"Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");for(var n=e;n.tag!==J;){if(p(n))return n.stateNode.__reactInternalMemoizedMergedChildContext;var r=n.return;r||t(!1,"Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue."),n=r}return n.stateNode.context}}}(n),l=function(e){var t=e.createCursor,n=e.push,r=e.pop,a=t(null),i=t(null),l=t(0),u=void 0;return u={},{pushProvider:function(e){var t=e.type._context;n(l,t._changedBits,e),n(i,t._currentValue,e),n(a,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode,null!==t._currentRenderer&&t._currentRenderer!==u&&o(!1,"Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer=u},popProvider:function(e){var t=l.current,n=i.current;r(a,e),r(i,e),r(l,e);var o=e.type._context;o._currentValue=n,o._changedBits=t}}}(n),s=r.popHostContext,c=r.popHostContainer,d=a.popTopLevelContextObject,p=a.popContextProvider,m=l.popProvider,h=vl(e),v=il(e,r,a,l,h,ke,we).beginWork,g=ll(e,r,a,l,h).completeWork,y=function(e,t,n,r,o){var a=e.popHostContainer,i=e.popHostContext,l=t.popContextProvider,u=t.popTopLevelContextObject,s=n.popProvider;return{throwException:function(e,t,n){t.effectTag|=Ur,t.firstEffect=t.lastEffect=null;var r=ul(n,t),a=e;do{switch(a.tag){case J:var i=r;return Pi(a),a.updateQueue.capturedValues=[i],void(a.effectTag|=Mr);case Z:var l=a.type,u=a.stateNode;if((a.effectTag&Nr)===kr&&("function"==typeof l.getDerivedStateFromCatch&&ja||null!==u&&"function"==typeof u.componentDidCatch&&!o(u))){Pi(a);var s=a.updateQueue,c=s.capturedValues;return null===c?s.capturedValues=[r]:c.push(r),void(a.effectTag|=Mr)}}a=a.return}while(null!==a)},unwindWork:function(e){switch(e.tag){case Z:l(e);var t=e.effectTag;return t&Mr?(e.effectTag=t&~Mr|Nr,e):null;case J:a(e),u(e);var n=e.effectTag;return n&Mr?(e.effectTag=n&~Mr|Nr,e):null;case te:return i(e),null;case ee:return a(e),null;case se:return s(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case Z:l(e);break;case J:a(e),u(e);break;case te:i(e);break;case ee:a(e);break;case se:s(e)}}}}(r,a,l,0,ce),b=y.throwException,w=y.unwindWork,k=y.unwindInterruptedWork,C=ml(e,ye,0,0,function(e){null===Q?Q=new Set([e]):Q.add(e)}),x=C.commitBeforeMutationLifeCycles,_=C.commitResetTextContent,T=C.commitPlacement,S=C.commitDeletion,E=C.commitWork,P=C.commitLifeCycles,N=C.commitErrorLogging,R=C.commitAttachRef,I=C.commitDetachRef,O=e.now,D=e.scheduleDeferredCallback,U=e.cancelDeferredCallback,M=e.prepareForCommit,A=e.resetAfterCommit,F=O(),j=(Jo(0),F),W=0,L=Qo,z=!1,H=null,B=null,V=Qo,q=null,K=!1,$=!1,Q=null,Y=null,X=void 0,G=void 0,ne=void 0,re=void 0,oe=void 0;function ae(){if(null!==H)for(var e=H.return;null!==e;)k(e),e=e.return;Sa.discardPendingWarnings(),n.checkThatStackIsEmpty(),B=null,V=Qo,H=null,$=!1}function ie(){for(;null!==q;){sn.setCurrentFiber(q),pi();var e=q.effectTag;if(e&Er&&_(q),e&Rr){var t=q.alternate;null!==t&&I(t)}switch(e&(xr|_r|Sr)){case xr:T(q),q.effectTag&=~xr;break;case Tr:T(q),q.effectTag&=~xr;var n=q.alternate;E(n,q);break;case _r:var r=q.alternate;E(r,q);break;case Sr:S(q)}q=q.nextEffect}sn.resetCurrentFiber()}function le(){for(;null!==q;){if(q.effectTag&Or){pi();var e=q.alternate;x(e,q)}q=q.nextEffect}}function ue(e,t,n){for(Sa.flushPendingUnsafeLifecycleWarnings(),Ha&&Sa.flushPendingDeprecationWarnings();null!==q;){var r=q.effectTag;if(r&(_r|Pr)){pi();var o=q.alternate;P(e,o,q,t,n)}r&Ir&&N(q,Je),r&Rr&&(pi(),R(q));var a=q.nextEffect;q.nextEffect=null,q=a}}function ce(e){return null!==Q&&Q.has(e)}function de(e){z=!0,K=!0,ki();var n=e.stateNode;n.current===e&&t(!1,"Cannot commit the same tree as before. This is probably a bug related to the return field. This error is likely caused by a bug in React. Please file an issue.");var r=n.pendingCommitExpirationTime;r===Qo&&t(!1,"Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue."),n.pendingCommitExpirationTime=Qo;var o=Ce();zt.current=null;var a=void 0;for(e.effectTag>Cr?null!==e.lastEffect?(e.lastEffect.nextEffect=e,a=e.firstEffect):a=e:a=e.firstEffect,M(n.containerInfo),q=a,function(){if(Ma){if(!Ba)return;Ga=0,ti("(Committing Snapshot Effects)")}}();null!==q;){var i=!1,l=void 0;bl(null,le,null),wl()&&(i=!0,l=kl()),i&&(null===q&&t(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),ye(q,l),null!==q&&(q=q.nextEffect))}for(!function(){if(Ma){if(!Ba)return;var e=Ga;Ga=0,ni("(Committing Snapshot Effects: "+e+" Total)","(Committing Snapshot Effects)",null)}}(),q=a,function(){if(Ma){if(!Ba)return;Ga=0,ti("(Committing Host Effects)")}}();null!==q;){var u=!1,s=void 0;bl(null,ie,null),wl()&&(u=!0,s=kl()),u&&(null===q&&t(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),ye(q,s),null!==q&&(q=q.nextEffect))}for(!function(){if(Ma){if(!Ba)return;var e=Ga;Ga=0,ni("(Committing Host Effects: "+e+" Total)","(Committing Host Effects)",null)}}(),A(n.containerInfo),n.current=e,q=a,function(){if(Ma){if(!Ba)return;Ga=0,ti("(Calling Lifecycle Methods)")}}();null!==q;){var c=!1,d=void 0;bl(null,ue,null,n,o,r),wl()&&(c=!0,d=kl()),c&&(null===q&&t(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),ye(q,d),null!==q&&(q=q.nextEffect))}K=!1,z=!1,function(){if(Ma){if(!Ba)return;var e=Ga;Ga=0,ni("(Calling Lifecycle Methods: "+e+" Total)","(Calling Lifecycle Methods)",null)}}(),Ci(),xa(e.stateNode),gl.debugTool&&gl.debugTool.onCommitWork(e);var f=n.current.expirationTime;return f===Qo&&(Q=null),f}function fe(e,t){if(t===Xo||e.expirationTime!==Xo){for(var n=function(e){switch(e.tag){case J:case Z:var t=e.updateQueue;return null===t?Qo:t.expirationTime;default:return Qo}}(e),r=e.child;null!==r;)r.expirationTime!==Qo&&(n===Qo||n>r.expirationTime)&&(n=r.expirationTime),r=r.sibling;e.expirationTime=n}}function pe(e){for(;;){var t=e.alternate;sn.setCurrentFiber(e);var n=e.return,r=e.sibling;if((e.effectTag&Ur)===kr){var o=g(t,e,V);if(vi(e),fe(e,V),sn.resetCurrentFiber(),null!==o)return vi(e),gl.debugTool&&gl.debugTool.onCompleteWork(e),o;if(null!==n&&(n.effectTag&Ur)===kr)null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),e.effectTag>Cr&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e);if(gl.debugTool&&gl.debugTool.onCompleteWork(e),null!==r)return r;if(null!==n){e=n;continue}return $=!0,null}var a=w(e);if(e.effectTag&Nr?gi(e):vi(e),sn.resetCurrentFiber(),null!==a)return vi(e),gl.debugTool&&gl.debugTool.onCompleteWork(e),a.effectTag&=Dr,a;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=Ur),gl.debugTool&&gl.debugTool.onCompleteWork(e),null!==r)return r;if(null===n)return null;e=n}return null}function me(e){var t=e.alternate;!function(e){if(Ma){if(!Ba||ui(e))return;if(Va=e,!ai(e,null))return;e._debugIsCurrentlyTiming=!0}}(e),sn.setCurrentFiber(e),za&&(X=ga(X,e));var n=v(t,e,V);return sn.resetCurrentFiber(),ne&&oe(),gl.debugTool&&gl.debugTool.onBeginWork(e),null===n&&(n=pe(e)),zt.current=null,n}function he(e){if(e)for(;null!==H&&!Ze();)H=me(H);else for(;null!==H;)H=me(H)}function ve(e,r,o){z&&t(!1,"renderRoot was called recursively. This error is likely caused by a bug in React. Please file an issue."),z=!0,r===V&&e===B&&null!==H||(ae(),V=r,H=da((B=e).current,null,V),e.pendingCommitExpirationTime=Qo);var a=!1;for(!function(e){if(Ma){if(Va=e,!Ba)return;Xa=0,ti("(React Tree Reconciliation)"),fi()}}(H);;){try{he(o)}catch(e){if(null===H){a=!0,Je(e);break}if(za)G(H,e,o);var i=H,l=i.return;if(null===l){a=!0,Je(e);break}b(l,i,e),H=pe(i)}break}var u=!1;return z=!1,a?(wi(Y,u),Y=null,n.resetStackAfterFatalErrorInDev(),null):null!==H?(wi(Y,u),Y=null,null):$?(wi(Y,u=!0),Y=null,e.pendingCommitExpirationTime=r,e.current.alternate):(wi(Y,u),Y=null,void t(!1,"Expired work should have completed. This error is likely caused by a bug in React. Please file an issue."))}function ge(e,t,n,r){Ni(t,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:ul(n,e),next:null}),ke(t,r)}function ye(e,n){return function(e,n,r){z&&!K&&t(!1,"dispatch: Cannot dispatch during the render phase.");for(var o=e.return;null!==o;){switch(o.tag){case Z:var a=o.type,i=o.stateNode;if("function"==typeof a.getDerivedStateFromCatch||"function"==typeof i.componentDidCatch&&!ce(i))return void ge(e,o,n,r);break;case J:return void ge(e,o,n,r)}o=o.return}e.tag===J&&ge(e,e,n,r)}(e,n,Yo)}function be(e){return ta(e,5e3,250)}function we(e){var t=void 0;if(L!==Qo)t=L;else if(z)t=K?Yo:V;else{if(e.mode&ra)if(je)t=function(e){return ta(e,500,100)}(Ce());else t=be(Ce());else t=Yo}return je&&(Ie===Qo||t>Ie)&&(Ie=t),t}function ke(e,n){return function(e,n,r){if(mi(),!r&&e.tag===Z){var o=e.stateNode;Tl(o)}var a=e;for(;null!==a;){if((a.expirationTime===Qo||a.expirationTime>n)&&(a.expirationTime=n),null!==a.alternate&&(a.alternate.expirationTime===Qo||a.alternate.expirationTime>n)&&(a.alternate.expirationTime=n),null===a.return){if(a.tag!==J)return void(r||e.tag!==Z||_l(e));var i=a.stateNode;!z&&V!==Qo&&n<V&&(Y=e,ae()),z&&!K&&B===i||Ve(i,n),ze>Le&&t(!1,"Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.")}a=a.return}}(e,n,!1)}function Ce(){return j=O()-F,Jo(j)}function xe(e,t,n,r,o){var a=L;L=Yo;try{return e(t,n,r,o)}finally{L=a}}za&&(X=null,ne=!1,re=null,G=function(e,t,n){switch(ga(e,X),e.tag){case J:c(e),d(e);break;case te:s(e);break;case Z:p(e);break;case ee:c(e);break;case se:m(e)}ne=!0,re=t,bl(null,he,null,n),ne=!1,re=null,wl()?kl():H=e},oe=function(){throw re});var _e=null,Te=null,Se=Qo,Ee=-1,Pe=!1,Ne=null,Re=Qo,Ie=Qo,Oe=!1,De=!1,Ue=null,Me=null,Ae=!1,Fe=!1,je=!1,We=null,Le=1e3,ze=0,He=1;function Be(e){if(Se!==Qo){if(e>Se)return;U(Ee)}else Ma&&Ba&&!Za&&(Za=!0,ti("(Waiting for async callback...)"));var t=O()-F,n=ea(e);Se=e,Ee=D(Ke,{timeout:n-t})}function Ve(e,t){!function(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===Te?(_e=Te=e,e.nextScheduledRoot=e):(Te.nextScheduledRoot=e,(Te=e).nextScheduledRoot=_e);else{var n=e.remainingExpirationTime;(n===Qo||t<n)&&(e.remainingExpirationTime=t)}}(e,t),Pe||(Ae?Fe&&(Ne=e,Re=Yo,Xe(e,Yo,!1)):t===Yo?$e():Be(t))}function qe(){var e=Qo,n=null;if(null!==Te)for(var r=Te,o=_e;null!==o;){var a=o.remainingExpirationTime;if(a===Qo){if((null===r||null===Te)&&t(!1,"Should have a previous and last root. This error is likely caused by a bug in React. Please file an issue."),o===o.nextScheduledRoot){o.nextScheduledRoot=null,_e=Te=null;break}if(o===_e){var i=o.nextScheduledRoot;_e=i,Te.nextScheduledRoot=i,o.nextScheduledRoot=null}else{if(o===Te){(Te=r).nextScheduledRoot=_e,o.nextScheduledRoot=null;break}r.nextScheduledRoot=o.nextScheduledRoot,o.nextScheduledRoot=null}o=r.nextScheduledRoot}else{if((e===Qo||a<e)&&(e=a,n=o),o===Te)break;r=o,o=o.nextScheduledRoot}}null!==Ne&&Ne===n&&e===Yo?ze++:ze=0,Ne=n,Re=e}function Ke(e){Qe(Qo,!0,e)}function $e(){Qe(Yo,!1,null)}function Qe(e,t,n){(Me=n,qe(),Ma&&null!==Me)&&function(e,t){Ma&&Ba&&(Za=!1,ni("(Waiting for async callback... will force flush in "+t+" ms)","(Waiting for async callback...)",e?"React was blocked by main thread":null))}(Re<Ce(),ea(Re));if(t)for(;null!==Ne&&Re!==Qo&&(e===Qo||e>=Re)&&(!Oe||Ce()>=Re);)Xe(Ne,Re,!Oe),qe();else for(;null!==Ne&&Re!==Qo&&(e===Qo||e>=Re);)Xe(Ne,Re,!1),qe();null!==Me&&(Se=Qo,Ee=-1),Re!==Qo&&Be(Re),Me=null,Oe=!1,Ye()}function Ye(){if(ze=0,null!==We){var e=We;We=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){De||(De=!0,Ue=r)}}}if(De){var r=Ue;throw Ue=null,De=!1,r}}function Xe(e,n,r){if(Pe&&t(!1,"performWorkOnRoot was called recursively. This error is likely caused by a bug in React. Please file an issue."),Pe=!0,r){var o=e.finishedWork;null!==o?Ge(e,o,n):(e.finishedWork=null,null!==(o=ve(e,n,!0))&&(Ze()?e.finishedWork=o:Ge(e,o,n)))}else{var a=e.finishedWork;null!==a?Ge(e,a,n):(e.finishedWork=null,null!==(a=ve(e,n,!1))&&Ge(e,a,n))}Pe=!1}function Ge(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===We?We=[r]:We.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=Qo);e.finishedWork=null,e.remainingExpirationTime=de(t)}function Ze(){return null!==Me&&(!(Me.timeRemaining()>He)&&(Oe=!0,!0))}function Je(e){null===Ne&&t(!1,"Should be working on a root. This error is likely caused by a bug in React. Please file an issue."),Ne.remainingExpirationTime=Qo,De||(De=!0,Ue=e)}return{recalculateCurrentTime:Ce,computeExpirationForFiber:we,scheduleWork:ke,requestWork:Ve,flushRoot:function(e,n){Pe&&t(!1,"work.commit(): Cannot commit while already rendering. This likely means you attempted to commit from inside a lifecycle method."),Ne=e,Re=n,Xe(e,n,!1),$e(),Ye()},batchedUpdates:function(e,t){var n=Ae;Ae=!0;try{return e(t)}finally{(Ae=n)||Pe||$e()}},unbatchedUpdates:function(e,t){if(Ae&&!Fe){Fe=!0;try{return e(t)}finally{Fe=!1}}return e(t)},flushSync:function(e,n){Pe&&t(!1,"flushSync was called from inside a lifecycle method. It cannot be called when React is already rendering.");var r=Ae;Ae=!0;try{return xe(e,n)}finally{Ae=r,$e()}},flushControlled:function(e){var t=Ae;Ae=!0;try{xe(e)}finally{(Ae=t)||Pe||Qe(Yo,!1,null)}},deferredUpdates:function(e){var t=L,n=Ce();L=be(n);try{return e()}finally{L=t}},syncUpdates:xe,interactiveUpdates:function(e,t,n){if(je)return e(t,n);Ae||Pe||Ie===Qo||(Qe(Ie,!1,null),Ie=Qo);var r=je,o=Ae;je=!0,Ae=!0;try{return e(t,n)}finally{je=r,(Ae=o)||Pe||$e()}},flushInteractiveUpdates:function(){Pe||Ie===Qo||(Qe(Ie,!1,null),Ie=Qo)},computeUniqueAsyncExpiration:function(){var e=be(Ce());return e<=W&&(e=W+1),W=e},legacyContext:a}},Pl=void 0;Pl=!1;var Nl=function(e){var n=e.getPublicInstance,r=El(e),a=r.computeUniqueAsyncExpiration,l=r.recalculateCurrentTime,u=r.computeExpirationForFiber,s=r.scheduleWork,c=r.requestWork,d=r.flushRoot,p=r.batchedUpdates,m=r.unbatchedUpdates,h=r.flushSync,v=r.flushControlled,g=r.deferredUpdates,y=r.syncUpdates,b=r.interactiveUpdates,w=r.flushInteractiveUpdates,k=r.legacyContext,C=k.findCurrentUnmaskedContext,x=k.isContextProvider,_=k.processChildContext;function T(e,t,n,r,a,i){var l=t.current;gl.debugTool&&(null===l.alternate?gl.debugTool.onMountContainer(t):null===e?gl.debugTool.onUnmountContainer(t):gl.debugTool.onUpdateContainer(t));var u=function(e){if(!e)return f;var t=wr(e),n=C(t);return x(t)?_(t,n):n}(n);return null===t.context?t.context=u:t.pendingContext=u,function(e,t,n,r,a){return"render"!==sn.phase||null===sn.current||Pl||(Pl=!0,o(!1,"Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",on(sn.current)||"Unknown")),null!==(a=void 0===a?null:a)&&"function"!=typeof a&&o(!1,"render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",a),Ni(e,{expirationTime:r,partialState:{element:t},callback:a,isReplace:!1,isForced:!1,capturedValue:null,next:null}),s(e,r),r}(l,e,0,a,i)}return{createContainer:function(e,t,n){return ya(e,t,n)},updateContainer:function(e,t,n,r){var o=t.current;l();return T(e,t,n,0,u(o),r)},updateContainerAtExpirationTime:function(e,t,n,r,o){l();return T(e,t,n,0,r,o)},flushRoot:d,requestWork:c,computeUniqueAsyncExpiration:a,batchedUpdates:p,unbatchedUpdates:m,deferredUpdates:g,syncUpdates:y,interactiveUpdates:b,flushInteractiveUpdates:w,flushControlled:v,flushSync:h,getPublicRootInstance:function(e){var t=e.current;if(!t.child)return null;switch(t.child.tag){case te:return n(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:function(e){var n=wr(e);void 0===n&&("function"==typeof e.render?t(!1,"Unable to find node on an unmounted component."):t(!1,"Argument appears to not be a ReactComponent. Keys: %s",Object.keys(e)));var r=Vr(n);return null===r?null:r.stateNode},findHostInstanceWithNoPortals:function(e){var t=function(e){var t=Br(e);if(!t)return null;for(var n=t;;){if(n.tag===te||n.tag===ne)return n;if(n.child&&n.tag!==ee)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:t.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return o(!1,"The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://fb.me/react-devtools"),!0;try{var n=t.inject(e);ba=Ca(function(e){return t.onCommitFiberRoot(n,e)}),wa=Ca(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){o(!1,"React DevTools encountered an error: %s.",e)}return!0}(i({},e,{findHostInstanceByFiber:function(e){var t=Vr(e);return null===t?null:t.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}}},Rl=Object.freeze({default:Nl}),Il=Rl&&Nl||Rl,Ol=Il.default?Il.default:Il;a.canUseDOM&&"function"!=typeof requestAnimationFrame&&o(!1,"React depends on requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills");var Dl="object"==typeof performance&&"function"==typeof performance.now,Ul=void 0;Ul=Dl?function(){return performance.now()}:function(){return Date.now()};var Ml=void 0,Al=void 0;if(a.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Fl=null,jl=!1,Wl=-1,Ll=!1,zl=0,Hl=33,Bl=33,Vl=void 0;Vl=Dl?{didTimeout:!1,timeRemaining:function(){var e=zl-performance.now();return e>0?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=zl-Date.now();return e>0?e:0}};var ql="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===ql){jl=!1;var t=Ul();if(zl-t<=0){if(!(-1!==Wl&&Wl<=t))return void(Ll||(Ll=!0,requestAnimationFrame(Kl)));Vl.didTimeout=!0}else Vl.didTimeout=!1;Wl=-1;var n=Fl;Fl=null,null!==n&&n(Vl)}},!1);var Kl=function(e){Ll=!1;var t=e-zl+Bl;t<Bl&&Hl<Bl?(t<8&&(t=8),Bl=t<Hl?Hl:t):Hl=t,zl=e+Bl,jl||(jl=!0,window.postMessage(ql,"*"))};Ml=function(e,t){return Fl=e,null!=t&&"number"==typeof t.timeout&&(Wl=Ul()+t.timeout),Ll||(Ll=!0,requestAnimationFrame(Kl)),0},Al=function(){Fl=null,jl=!1,Wl=-1}}else Ml=window.requestIdleCallback,Al=window.cancelIdleCallback;else Ml=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},Al=function(e){clearTimeout(e)};var $l=!1;function Ql(e,t){null==t.selected||$l||(o(!1,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),$l=!0)}function Yl(e,t){var n=i({children:void 0},t),o=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(t+=e))}),t}(t.children);return o&&(n.children=o),n}var Xl=sn.getCurrentFiberOwnerName,Gl=sn.getCurrentFiberStackAddendum,Zl=void 0;function Jl(){var e=Xl();return e?"\n\nCheck the render method of `"+e+"`.":""}Zl=!1;var eu=["value","defaultValue"];function tu(e,t,n,r){var o=e.options;if(t){for(var a=n,i={},l=0;l<a.length;l++)i["$"+a[l]]=!0;for(var u=0;u<o.length;u++){var s=i.hasOwnProperty("$"+o[u].value);o[u].selected!==s&&(o[u].selected=s),s&&r&&(o[u].defaultSelected=!0)}}else{for(var c=""+n,d=null,f=0;f<o.length;f++){if(o[f].value===c)return o[f].selected=!0,void(r&&(o[f].defaultSelected=!0));null!==d||o[f].disabled||(d=o[f])}null!==d&&(d.selected=!0)}}function nu(e,t){return i({},t,{value:void 0})}function ru(e,t){var n=e;!function(e){Un.checkPropTypes("select",e,Gl);for(var t=0;t<eu.length;t++){var n=eu[t];if(null!=e[n]){var r=Array.isArray(e[n]);e.multiple&&!r?o(!1,"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,Jl()):!e.multiple&&r&&o(!1,"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,Jl())}}}(t);var r=t.value;n._wrapperState={initialValue:null!=r?r:t.defaultValue,wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||Zl||(o(!1,"Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"),Zl=!0)}var ou=sn.getCurrentFiberStackAddendum,au=!1;function iu(e,n){var r=e;return null!=n.dangerouslySetInnerHTML&&t(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),i({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lu(e,n){var r=e;Un.checkPropTypes("textarea",n,ou),void 0===n.value||void 0===n.defaultValue||au||(o(!1,"Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components"),au=!0);var a=n.value;if(null==a){var i=n.defaultValue,l=n.children;null!=l&&(o(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=i&&t(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(l)&&(l.length<=1||t(!1,"<textarea> can only have at most one child."),l=l[0]),i=""+l),null==i&&(i=""),a=i}r._wrapperState={initialValue:""+a}}function uu(e,t){var n=e,r=t.value;if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)}function su(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&(n.value=r)}var cu="http://www.w3.org/1999/xhtml",du="http://www.w3.org/1998/Math/MathML",fu="http://www.w3.org/2000/svg",pu={html:cu,mathml:du,svg:fu};function mu(e){switch(e){case"svg":return fu;case"math":return du;default:return cu}}function hu(e,t){return null==e||e===cu?mu(t):e===fu&&"foreignObject"===t?cu:e}var vu,gu=void 0,yu=(vu=function(e,t){if(e.namespaceURI!==pu.svg||"innerHTML"in e)e.innerHTML=t;else{(gu=gu||document.createElement("div")).innerHTML="<svg>"+t+"</svg>";for(var n=gu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return vu(e,t,n,r)})}:vu),bu=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===Rt)return void(n.nodeValue=t)}e.textContent=t},wu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var ku=["Webkit","ms","Moz","O"];function Cu(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||wu.hasOwnProperty(e)&&wu[e]?(""+t).trim():t+"px"}Object.keys(wu).forEach(function(e){ku.forEach(function(t){wu[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=wu[e]})});var xu=/^(?:webkit|moz|o)[A-Z]/,_u=/;\s*$/,Tu={},Su={},Eu=!1,Pu=!1,Nu=function(e,t,n){e.indexOf("-")>-1?function(e,t){Tu.hasOwnProperty(e)&&Tu[e]||(Tu[e]=!0,o(!1,"Unsupported style property %s. Did you mean %s?%s",e,m(e),t()))}(e,n):xu.test(e)?function(e,t){Tu.hasOwnProperty(e)&&Tu[e]||(Tu[e]=!0,o(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",e,e.charAt(0).toUpperCase()+e.slice(1),t()))}(e,n):_u.test(t)&&function(e,t,n){Su.hasOwnProperty(t)&&Su[t]||(Su[t]=!0,o(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.%s',e,t.replace(_u,""),n()))}(e,t,n),"number"==typeof t&&(isNaN(t)?function(e,t,n){Eu||(Eu=!0,o(!1,"`NaN` is an invalid value for the `%s` css style property.%s",e,n()))}(e,0,n):isFinite(t)||function(e,t,n){Pu||(Pu=!0,o(!1,"`Infinity` is an invalid value for the `%s` css style property.%s",e,n()))}(e,0,n))};function Ru(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(null!=o){var a=0===r.indexOf("--");t+=n+p(r)+":",t+=Cu(r,o,a),n=";"}}return t||null}function Iu(e,t,n){var r=e.style;for(var o in t)if(t.hasOwnProperty(o)){var a=0===o.indexOf("--");a||Nu(o,t[o],n);var i=Cu(o,t[o],a);"float"===o&&(o="cssFloat"),a?r.setProperty(o,i):r[o]=i}}var Ou=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Du="__html";function Uu(e,n,r){n&&(Ou[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML)&&t(!1,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",e,r()),null!=n.dangerouslySetInnerHTML&&(null!=n.children&&t(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),"object"==typeof n.dangerouslySetInnerHTML&&Du in n.dangerouslySetInnerHTML||t(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),!n.suppressContentEditableWarning&&n.contentEditable&&null!=n.children&&o(!1,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional.%s",r()),null!=n.style&&"object"!=typeof n.style&&t(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",r()))}function Mu(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",enctype:"encType",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Fu={"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},ju={},Wu=new RegExp("^(aria)-["+gn+"]*$"),Lu=new RegExp("^(aria)[A-Z]["+gn+"]*$"),zu=Object.prototype.hasOwnProperty;function Hu(){var e=Ht.getStackAddendum();return null!=e?e:""}function Bu(e,t){if(zu.call(ju,t)&&ju[t])return!0;if(Lu.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=Fu.hasOwnProperty(n)?n:null;if(null==r)return o(!1,"Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.%s",t,Hu()),ju[t]=!0,!0;if(t!==r)return o(!1,"Invalid ARIA attribute `%s`. Did you mean `%s`?%s",t,r,Hu()),ju[t]=!0,!0}if(Wu.test(t)){var a=t.toLowerCase(),i=Fu.hasOwnProperty(a)?a:null;if(null==i)return ju[t]=!0,!1;if(t!==i)return o(!1,"Unknown ARIA attribute `%s`. Did you mean `%s`?%s",t,i,Hu()),ju[t]=!0,!0}return!0}function Vu(e,t){Mu(e,t)||function(e,t){var n=[];for(var r in t)Bu(0,r)||n.push(r);var a=n.map(function(e){return"`"+e+"`"}).join(", ");1===n.length?o(!1,"Invalid aria prop %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",a,e,Hu()):n.length>1&&o(!1,"Invalid aria props %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",a,e,Hu())}(e,t)}var qu=!1;function Ku(){var e=Ht.getStackAddendum();return null!=e?e:""}function $u(){var e=Ht.getStackAddendum();return null!=e?e:""}var Qu,Yu={},Xu=Object.prototype.hasOwnProperty,Gu=/^on./,Zu=/^on[^A-Z]/,Ju=new RegExp("^(aria)-["+gn+"]*$"),es=new RegExp("^(aria)[A-Z]["+gn+"]*$");Qu=function(e,t,n,r){if(Xu.call(Yu,t)&&Yu[t])return!0;var a=t.toLowerCase();if("onfocusin"===a||"onfocusout"===a)return o(!1,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Yu[t]=!0,!0;if(r){if(E.hasOwnProperty(t))return!0;var i=N.hasOwnProperty(a)?N[a]:null;if(null!=i)return o(!1,"Invalid event handler property `%s`. Did you mean `%s`?%s",t,i,$u()),Yu[t]=!0,!0;if(Gu.test(t))return o(!1,"Unknown event handler property `%s`. It will be ignored.%s",t,$u()),Yu[t]=!0,!0}else if(Gu.test(t))return Zu.test(t)&&o(!1,"Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.%s",t,$u()),Yu[t]=!0,!0;if(Ju.test(t)||es.test(t))return!0;if("innerhtml"===a)return o(!1,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Yu[t]=!0,!0;if("aria"===a)return o(!1,"The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Yu[t]=!0,!0;if("is"===a&&null!==n&&void 0!==n&&"string"!=typeof n)return o(!1,"Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.%s",typeof n,$u()),Yu[t]=!0,!0;if("number"==typeof n&&isNaN(n))return o(!1,"Received NaN for the `%s` attribute. If this is expected, cast the value to a string.%s",t,$u()),Yu[t]=!0,!0;var l=Sn(t),u=null!==l&&l.type===cn;if(Au.hasOwnProperty(a)){var s=Au[a];if(s!==t)return o(!1,"Invalid DOM property `%s`. Did you mean `%s`?%s",t,s,$u()),Yu[t]=!0,!0}else if(!u&&t!==a)return o(!1,"React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.%s",t,a,$u()),Yu[t]=!0,!0;return"boolean"==typeof n&&_n(t,n,l,!1)?(n?o(!1,'Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.%s',n,t,t,n,t,$u()):o(!1,'Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.%s',n,t,t,n,t,t,t,$u()),Yu[t]=!0,!0):!!u||(!_n(t,n,l,!1)||(Yu[t]=!0,!1))};var ts=function(e,t,n){var r=[];for(var a in t){Qu(0,a,t[a],n)||r.push(a)}var i=r.map(function(e){return"`"+e+"`"}).join(", ");1===r.length?o(!1,"Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://fb.me/react-attribute-behavior%s",i,e,$u()):r.length>1&&o(!1,"Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://fb.me/react-attribute-behavior%s",i,e,$u())};var ns,rs=sn.getCurrentFiberOwnerName,os=sn.getCurrentFiberStackAddendum,as=!1,is=!1,ls="dangerouslySetInnerHTML",us="suppressContentEditableWarning",ss="suppressHydrationWarning",cs="autoFocus",ds="children",fs="style",ps="__html",ms=pu.html,hs=l.thatReturns(""),vs=void 0,gs=void 0,ys=void 0,bs=void 0,ws=void 0,ks=void 0,Cs=void 0,xs=void 0;hs=os,vs={time:!0,dialog:!0},ys=function(e,t){Vu(e,t),function(e,t){"input"!==e&&"textarea"!==e&&"select"!==e||null==t||null!==t.value||qu||(qu=!0,"select"===e&&t.multiple?o(!1,"`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.%s",e,Ku()):o(!1,"`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.%s",e,Ku()))}(e,t),function(e,t,n){Mu(e,t)||ts(e,t,n)}(e,t,!0)};var _s=/\r\n?/g,Ts=/\u0000|\uFFFD/g;function Ss(e,t){!function(e,t){for(var n=t,r=Io(n),o=P[e],a=0;a<o.length;a++){var i=o[a];r.hasOwnProperty(i)&&r[i]||("topScroll"===i?go("topScroll","scroll",n):"topFocus"===i||"topBlur"===i?(go("topFocus","focus",n),go("topBlur","blur",n),r.topBlur=!0,r.topFocus=!0):"topCancel"===i?(Mt("cancel",!0)&&go("topCancel","cancel",n),r.topCancel=!0):"topClose"===i?(Mt("close",!0)&&go("topClose","close",n),r.topClose=!0):So.hasOwnProperty(i)&&vo(i,So[i],n),r[i]=!0)}}(t,e.nodeType===Ot||e.nodeType===Dt?e:e.ownerDocument)}function Es(e){return e.nodeType===Ot?e:e.ownerDocument}function Ps(e){e.onclick=l}function Ns(e,t,n,r){var a=void 0,i=Es(n),l=void 0,u=r;if(u===ms&&(u=mu(e)),u===ms)if((a=Mu(e,t))||e===e.toLowerCase()||o(!1,"<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),"script"===e){var s=i.createElement("div");s.innerHTML="<script><\/script>";var c=s.firstChild;l=s.removeChild(c)}else l="string"==typeof t.is?i.createElement(e,{is:t.is}):i.createElement(e);else l=i.createElementNS(u,e);return u===ms&&(a||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(l)||Object.prototype.hasOwnProperty.call(vs,e)||(vs[e]=!0,o(!1,"The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),l}function Rs(e,t){return Es(t).createTextNode(e)}function Is(e,t,n,r){var a=Mu(t,n);ys(t,n),a&&!is&&e.shadyRoot&&(o(!1,"%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",rs()||"A component"),is=!0);var i=void 0;switch(t){case"iframe":case"object":vo("topLoad","load",e),i=n;break;case"video":case"audio":for(var l in Eo)Eo.hasOwnProperty(l)&&vo(l,Eo[l],e);i=n;break;case"source":vo("topError","error",e),i=n;break;case"img":case"image":case"link":vo("topError","error",e),vo("topLoad","load",e),i=n;break;case"form":vo("topReset","reset",e),vo("topSubmit","submit",e),i=n;break;case"details":vo("topToggle","toggle",e),i=n;break;case"input":qn(e,n),i=Vn(e,n),vo("topInvalid","invalid",e),Ss(r,"onChange");break;case"option":Ql(0,n),i=Yl(0,n);break;case"select":ru(e,n),i=nu(0,n),vo("topInvalid","invalid",e),Ss(r,"onChange");break;case"textarea":lu(e,n),i=iu(e,n),vo("topInvalid","invalid",e),Ss(r,"onChange");break;default:i=n}switch(Uu(t,i,hs),function(e,t,n,r,o){for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];if(a===fs)i&&Object.freeze(i),Iu(t,i,hs);else if(a===ls){var l=i?i[ps]:void 0;null!=l&&yu(t,l)}else a===ds?"string"==typeof i?("textarea"!==e||""!==i)&&bu(t,i):"number"==typeof i&&bu(t,""+i):a===us||a===ss||a===cs||(E.hasOwnProperty(a)?null!=i&&("function"!=typeof i&&Cs(a,i),Ss(n,a)):null!=i&&Dn(t,a,i,o))}}(t,e,r,i,a),t){case"input":jt(e),Qn(e,n);break;case"textarea":jt(e),su(e);break;case"option":!function(e,t){null!=t.value&&e.setAttribute("value",t.value)}(e,n);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?tu(n,!!t.multiple,r,!1):null!=t.defaultValue&&tu(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof i.onClick&&Ps(e)}}function Os(e,t,n,r,o){ys(t,r);var a=null,i=void 0,l=void 0;switch(t){case"input":i=Vn(e,n),l=Vn(e,r),a=[];break;case"option":i=Yl(0,n),l=Yl(0,r),a=[];break;case"select":i=nu(0,n),l=nu(0,r),a=[];break;case"textarea":i=iu(e,n),l=iu(e,r),a=[];break;default:l=r,"function"!=typeof(i=n).onClick&&"function"==typeof l.onClick&&Ps(e)}Uu(t,l,hs);var u=void 0,s=void 0,c=null;for(u in i)if(!l.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if(u===fs){var d=i[u];for(s in d)d.hasOwnProperty(s)&&(c||(c={}),c[s]="")}else u===ls||u===ds||u===us||u===ss||u===cs||(E.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in l){var f=l[u],p=null!=i?i[u]:void 0;if(l.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if(u===fs)if(f&&Object.freeze(f),p){for(s in p)!p.hasOwnProperty(s)||f&&f.hasOwnProperty(s)||(c||(c={}),c[s]="");for(s in f)f.hasOwnProperty(s)&&p[s]!==f[s]&&(c||(c={}),c[s]=f[s])}else c||(a||(a=[]),a.push(u,c)),c=f;else if(u===ls){var m=f?f[ps]:void 0,h=p?p[ps]:void 0;null!=m&&h!==m&&(a=a||[]).push(u,""+m)}else u===ds?p===f||"string"!=typeof f&&"number"!=typeof f||(a=a||[]).push(u,""+f):u===us||u===ss||(E.hasOwnProperty(u)?(null!=f&&("function"!=typeof f&&Cs(u,f),Ss(o,u)),a||p===f||(a=[])):(a=a||[]).push(u,f))}return c&&(a=a||[]).push(fs,c),a}function Ds(e,t,n,r,o){"input"===n&&"radio"===o.type&&null!=o.name&&Kn(e,o);Mu(n,r);switch(function(e,t,n,r){for(var o=0;o<t.length;o+=2){var a=t[o],i=t[o+1];a===fs?Iu(e,i,hs):a===ls?yu(e,i):a===ds?bu(e,i):Dn(e,a,i,r)}}(e,t,0,Mu(n,o)),n){case"input":$n(e,o);break;case"textarea":uu(e,o);break;case"select":!function(e,t){var n=e;n._wrapperState.initialValue=void 0;var r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var o=t.value;null!=o?tu(n,!!t.multiple,o,!1):r!==!!t.multiple&&(null!=t.defaultValue?tu(n,!!t.multiple,t.defaultValue,!0):tu(n,!!t.multiple,t.multiple?[]:"",!1))}(e,o)}}function Us(e,t,n,r,a){var i,l=void 0;switch(gs=!0===n[ss],i=Mu(t,n),ys(t,n),i&&!is&&e.shadyRoot&&(o(!1,"%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",rs()||"A component"),is=!0),t){case"iframe":case"object":vo("topLoad","load",e);break;case"video":case"audio":for(var u in Eo)Eo.hasOwnProperty(u)&&vo(u,Eo[u],e);break;case"source":vo("topError","error",e);break;case"img":case"image":case"link":vo("topError","error",e),vo("topLoad","load",e);break;case"form":vo("topReset","reset",e),vo("topSubmit","submit",e);break;case"details":vo("topToggle","toggle",e);break;case"input":qn(e,n),vo("topInvalid","invalid",e),Ss(a,"onChange");break;case"option":Ql(0,n);break;case"select":ru(e,n),vo("topInvalid","invalid",e),Ss(a,"onChange");break;case"textarea":lu(e,n),vo("topInvalid","invalid",e),Ss(a,"onChange")}Uu(t,n,hs),l=new Set;for(var s=e.attributes,c=0;c<s.length;c++){switch(s[c].name.toLowerCase()){case"data-reactroot":case"value":case"checked":case"selected":break;default:l.add(s[c].name)}}var d,f=null;for(var p in n)if(n.hasOwnProperty(p)){var m=n[p];if(p===ds)"string"==typeof m?e.textContent!==m&&(gs||bs(e.textContent,m),f=[ds,m]):"number"==typeof m&&e.textContent!==""+m&&(gs||bs(e.textContent,m),f=[ds,""+m]);else if(E.hasOwnProperty(p))null!=m&&("function"!=typeof m&&Cs(p,m),Ss(a,p));else if("boolean"==typeof i){var h=void 0,v=Sn(p);if(gs);else if(p===us||p===ss||"value"===p||"checked"===p||"selected"===p);else if(p===ls){var g=m&&m[ps]||"",y=e.innerHTML,b=xs(e,g);b!==y&&ws(p,y,b)}else if(p===fs){l.delete(p);var w=Ru(m);w!==(h=e.getAttribute("style"))&&ws(p,h,w)}else if(i)l.delete(p.toLowerCase()),m!==(h=On(e,p,m))&&ws(p,h,m);else if(!xn(p,v,i)&&!Tn(p,m,v,i)){var k=!1;if(null!==v)l.delete(v.attributeName),h=In(e,p,m,v);else{var C=r;if(C===ms&&(C=mu(t)),C===ms)l.delete(p.toLowerCase());else{var x=(void 0,d=p.toLowerCase(),Au.hasOwnProperty(d)&&Au[d]||null);null!==x&&x!==p&&(k=!0,l.delete(x)),l.delete(p)}h=On(e,p,m)}m===h||k||ws(p,h,m)}}}switch(l.size>0&&!gs&&ks(l),t){case"input":jt(e),Qn(e,n);break;case"textarea":jt(e),su(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&Ps(e)}return f}function Ms(e,t){return e.nodeValue!==t}function As(e,t){bs(e.nodeValue,t)}function Fs(e,t){as||(as=!0,o(!1,"Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase()))}function js(e,t){as||(as=!0,o(!1,'Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase()))}function Ws(e,t,n){as||(as=!0,o(!1,"Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase()))}function Ls(e,t){""!==t&&(as||(as=!0,o(!1,'Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase())))}ns=function(e){return("string"==typeof e?e:""+e).replace(_s,"\n").replace(Ts,"")},bs=function(e,t){if(!as){var n=ns(t),r=ns(e);r!==n&&(as=!0,o(!1,'Text content did not match. Server: "%s" Client: "%s"',r,n))}},ws=function(e,t,n){if(!as){var r=ns(n),a=ns(t);a!==r&&(as=!0,o(!1,"Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(a),JSON.stringify(r)))}},ks=function(e){if(!as){as=!0;var t=[];e.forEach(function(e){t.push(e)}),o(!1,"Extra attributes from the server: %s",t)}},Cs=function(e,t){!1===t?o(!1,"Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.%s",e,e,e,os()):o(!1,"Expected `%s` listener to be a function, instead got a value of `%s` type.%s",e,typeof t,os())},xs=function(e,t){var n=e.namespaceURI===ms?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var zs,Hs=Object.freeze({createElement:Ns,createTextNode:Rs,setInitialProperties:Is,diffProperties:Os,updateProperties:Ds,diffHydratedProperties:Us,diffHydratedText:Ms,warnForUnmatchedText:As,warnForDeletedHydratableElement:Fs,warnForDeletedHydratableText:js,warnForInsertedHydratedElement:Ws,warnForInsertedHydratedText:Ls,restoreControlledState:function(e,t,n){switch(t){case"input":return void Yn(e,n);case"textarea":return void function(e,t){uu(e,t)}(e,n);case"select":return void function(e,t){var n=e,r=t.value;null!=r&&tu(n,!!t.multiple,r,!1)}(e,n)}}}),Bs=sn.getCurrentFiberStackAddendum,Vs=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],qs=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Ks=qs.concat(["button"]),$s=["dd","dt","li","option","optgroup","p","rp","rt"],Qs={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},Ys={};(zs=function(e,t,n){var r=(n=n||Qs).current,a=r&&r.tag;null!=t&&(null!=e&&o(!1,"validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var i=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===$s.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,a)?null:r,l=i?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),u=i||l;if(u){var s=u.tag,c=Bs(),d=!!i+"|"+e+"|"+s+"|"+c;if(!Ys[d]){Ys[d]=!0;var f=e,p="";if("#text"===e?/\S/.test(t)?f="Text nodes":(f="Whitespace text nodes",p=" Make sure you don't have any extra whitespace between tags on each line of your source code."):f="<"+e+">",i){var m="";"table"===s&&"tr"===e&&(m+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),o(!1,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s%s",f,s,p,m,c)}else o(!1,"validateDOMNesting(...): %s cannot appear as a descendant of <%s>.%s",f,s,c)}}}).updatedAncestorInfo=function(e,t,n){var r=i({},e||Qs),o={tag:t,instance:n};return-1!==qs.indexOf(t)&&(r.aTagInScope=null,r.buttonTagInScope=null,r.nobrTagInScope=null),-1!==Ks.indexOf(t)&&(r.pTagInButtonScope=null),-1!==Vs.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(r.listItemTagAutoclosing=null,r.dlItemTagAutoclosing=null),r.current=o,"form"===t&&(r.formTag=o),"a"===t&&(r.aTagInScope=o),"button"===t&&(r.buttonTagInScope=o),"nobr"===t&&(r.nobrTagInScope=o),"p"===t&&(r.pTagInButtonScope=o),"li"===t&&(r.listItemTagAutoclosing=o),"dd"!==t&&"dt"!==t||(r.dlItemTagAutoclosing=o),r};var Xs,Gs=zs,Zs=Ns,Js=Rs,ec=Is,tc=Os,nc=Ds,rc=Us,oc=Ms,ac=As,ic=Fs,lc=js,uc=Ws,sc=Ls,cc=Gs.updatedAncestorInfo,dc=me,fc=be,pc=void 0,mc=!1;"function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||o(!1,"React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),pc=function(e){if(e._reactRootContainer&&e.nodeType!==It){var t=xc.findHostInstanceWithNoPortals(e._reactRootContainer._internalRoot.current);t&&t.parentNode!==e&&o(!1,"render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=kc(e);!(!r||!ve(r))&&!n&&o(!1,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),e.nodeType===Nt&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&o(!1,"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")},Xs=function(e,t){null!==e&&"function"!=typeof e&&o(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e)},vt.injectFiberControlledHostComponent(Hs);var hc=null,vc=null;function gc(e){var t=xc.computeUniqueAsyncExpiration();this._expirationTime=t,this._root=e,this._next=null,this._callbacks=null,this._didComplete=!1,this._hasChildren=!1,this._children=null,this._defer=!0}function yc(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function bc(e,t,n){var r=xc.createContainer(e,t,n);this._internalRoot=r}function wc(e){return!(!e||e.nodeType!==Nt&&e.nodeType!==Ot&&e.nodeType!==Dt&&(e.nodeType!==It||" react-mount-point-unstable "!==e.nodeValue))}function kc(e){return e?e.nodeType===Ot?e.documentElement:e.firstChild:null}function Cc(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}gc.prototype.render=function(e){this._defer||t(!1,"batch.render: Cannot render a batch that already committed."),this._hasChildren=!0,this._children=e;var n=this._root._internalRoot,r=this._expirationTime,o=new yc;return xc.updateContainerAtExpirationTime(e,n,null,r,o._onCommit),o},gc.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},gc.prototype.commit=function(){var e=this._root._internalRoot,n=e.firstBatch;if(this._defer&&null!==n||t(!1,"batch.commit: Cannot commit a batch multiple times."),!this._hasChildren)return this._next=null,void(this._defer=!1);var r=this._expirationTime;if(n!==this){this._hasChildren&&(r=this._expirationTime=n._expirationTime,this.render(this._children));for(var o=null,a=n;a!==this;)o=a,a=a._next;null===o&&t(!1,"batch.commit: Cannot commit a batch multiple times."),o._next=a._next,this._next=n,n=e.firstBatch=this}this._defer=!1,xc.flushRoot(e,r);var i=this._next;this._next=null,null!==(n=e.firstBatch=i)&&n._hasChildren&&n.render(n._children)},gc.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){(0,e[t])()}}},yc.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},yc.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var n=0;n<e.length;n++){var r=e[n];"function"!=typeof r&&t(!1,"Invalid argument passed as callback. Expected a function. Instead received: %s",r),r()}}},bc.prototype.render=function(e,t){var n=this._internalRoot,r=new yc;return Xs(t=void 0===t?null:t,"render"),null!==t&&r.then(t),xc.updateContainer(e,n,null,r._onCommit),r},bc.prototype.unmount=function(e){var t=this._internalRoot,n=new yc;return Xs(e=void 0===e?null:e,"render"),null!==e&&n.then(e),xc.updateContainer(null,t,null,n._onCommit),n},bc.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,o=new yc;return Xs(n=void 0===n?null:n,"render"),null!==n&&o.then(n),xc.updateContainer(t,r,e,o._onCommit),o},bc.prototype.createBatch=function(){var e=new gc(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(var o=null,a=r;null!==a&&a._expirationTime<=t;)o=a,a=a._next;e._next=a,null!==o&&(o._next=e)}return e};var xc=Ol({getRootHostContext:function(e){var t=void 0,n=void 0,r=e.nodeType;switch(r){case Ot:case Dt:t=r===Ot?"#document":"#fragment";var o=e.documentElement;n=o?o.namespaceURI:hu(null,"");break;default:var a=r===It?e.parentNode:e;n=hu(a.namespaceURI||null,t=a.tagName)}var i=t.toLowerCase();return{namespace:n,ancestorInfo:cc(null,i,null)}},getChildHostContext:function(e,t){var n=e;return{namespace:hu(n.namespace,t),ancestorInfo:cc(n.ancestorInfo,t,null)}},getPublicInstance:function(e){return e},prepareForCommit:function(){hc=ho(),vc=Fo(),mo(!1)},resetAfterCommit:function(){jo(vc),vc=null,mo(hc),hc=null},createInstance:function(e,t,n,r,o){var a,i=r;if(Gs(e,null,i.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var l=""+t.children,u=cc(i.ancestorInfo,e,null);Gs(null,l,u)}a=i.namespace;var s=Zs(e,t,n,a);return dc(o,s),fc(s,t),s},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){return ec(e,t,n,r),Cc(t,n)},prepareUpdate:function(e,t,n,r,o,a){var i=a;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var l=""+r.children,u=cc(i.ancestorInfo,t,null);Gs(null,l,u)}return tc(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){Gs(null,e,n.ancestorInfo);var o=Js(e,t);return dc(r,o),o},now:Ul,mutation:{commitMount:function(e,t,n,r){Cc(t,n)&&e.focus()},commitUpdate:function(e,t,n,r,o,a){fc(e,o),nc(e,t,n,r,o)},resetTextContent:function(e){bu(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){e.nodeType===It?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){e.nodeType===It?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){e.nodeType===It?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t,n){return e.nodeType!==Nt||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||e.nodeType!==Rt?null:e},getNextHydratableSibling:function(e){for(var t=e.nextSibling;t&&t.nodeType!==Nt&&t.nodeType!==Rt;)t=t.nextSibling;return t},getFirstHydratableChild:function(e){for(var t=e.firstChild;t&&t.nodeType!==Nt&&t.nodeType!==Rt;)t=t.nextSibling;return t},hydrateInstance:function(e,t,n,r,o,a){dc(a,e),fc(e,n);var i;return i=o.namespace,rc(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return dc(n,e),oc(e,t)},didNotMatchHydratedContainerTextInstance:function(e,t,n){ac(t,n)},didNotMatchHydratedTextInstance:function(e,t,n,r,o){!0!==t.suppressHydrationWarning&&ac(r,o)},didNotHydrateContainerInstance:function(e,t){1===t.nodeType?ic(e,t):lc(e,t)},didNotHydrateInstance:function(e,t,n,r){!0!==t.suppressHydrationWarning&&(1===r.nodeType?ic(n,r):lc(n,r))},didNotFindHydratableContainerInstance:function(e,t,n){uc(e,t,n)},didNotFindHydratableContainerTextInstance:function(e,t){sc(e,t)},didNotFindHydratableInstance:function(e,t,n,r,o){!0!==t.suppressHydrationWarning&&uc(n,r,o)},didNotFindHydratableTextInstance:function(e,t,n,r){!0!==t.suppressHydrationWarning&&sc(n,r)}},scheduleDeferredCallback:Ml,cancelDeferredCallback:Al});St(xc);var _c=!1;function Tc(e,t){var n=t||function(e){var t=kc(e);return!(!t||t.nodeType!==Nt||!t.hasAttribute(yn))}(e);if(!n)for(var r=!1,a=void 0;a=e.lastChild;)!r&&a.nodeType===Nt&&a.hasAttribute(yn)&&(r=!0,o(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.")),e.removeChild(a);!n||t||_c||(_c=!0,Ta(!1,"render(): Calling ReactDOM.render() to hydrate server-rendered markup will stop working in React v17. Replace the ReactDOM.render() call with ReactDOM.hydrate() if you want React to attach to the server HTML."));return new bc(e,!1,n)}function Sc(e,n,r,o,a){wc(r)||t(!1,"Target container is not a DOM element."),pc(r);var i=r._reactRootContainer;if(i){if("function"==typeof a){var l=a;a=function(){var e=xc.getPublicRootInstance(i._internalRoot);l.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,n,a):i.render(n,a)}else{if(i=r._reactRootContainer=Tc(r,o),"function"==typeof a){var u=a;a=function(){var e=xc.getPublicRootInstance(i._internalRoot);u.call(e)}}xc.unbatchedUpdates(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,n,a):i.render(n,a)})}return xc.getPublicRootInstance(i._internalRoot)}function Ec(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return wc(n)||t(!1,"Target container is not a DOM element."),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Qt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)}var Pc={createPortal:Ec,findDOMNode:function(e){var t=zt.current;null!==t&&null!==t.stateNode&&(t.stateNode._warnedAboutRefsInRender||o(!1,"%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",on(t)||"A component"),t.stateNode._warnedAboutRefsInRender=!0);return null==e?null:e.nodeType===Nt?e:xc.findHostInstance(e)},hydrate:function(e,t,n){return Sc(null,e,t,!0,n)},render:function(e,t,n){return Sc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,n,r,o){return(null==e||void 0===e._reactInternalFiber)&&t(!1,"parentComponent must be a valid React Component"),Sc(e,n,r,!1,o)},unmountComponentAtNode:function(e){if(wc(e)||t(!1,"unmountComponentAtNode(...): Target container is not a DOM element."),e._reactRootContainer){var n=kc(e);return n&&!ve(n)&&o(!1,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),xc.unbatchedUpdates(function(){Sc(null,null,e,!1,function(){e._reactRootContainer=null})}),!0}var r=kc(e),a=!(!r||!ve(r)),i=1===e.nodeType&&wc(e.parentNode)&&!!e.parentNode._reactRootContainer;return a&&o(!1,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},unstable_createPortal:function(){return mc||(mc=!0,Ta(!1,'The ReactDOM.unstable_createPortal() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactDOM.createPortal() instead. It has the exact same API, but without the "unstable_" prefix.')),Ec.apply(void 0,arguments)},unstable_batchedUpdates:xc.batchedUpdates,unstable_deferredUpdates:xc.deferredUpdates,flushSync:xc.flushSync,unstable_flushControlled:xc.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Y,EventPluginRegistry:O,EventPropagators:Ie,ReactControlledComponent:wt,ReactDOMComponentTree:we,ReactDOMEventListener:wo},unstable_createRoot:function(e,t){return new bc(e,!0,null!=t&&!0===t.hydrate)}};if(!xc.injectIntoDevTools({findFiberByHostInstance:he,bundleType:1,version:"16.3.2",rendererPackageName:"react-dom"})&&a.canUseDOM&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var Nc=window.location.protocol;/^(https?|file):$/.test(Nc)&&console.info("%cDownload the React DevTools for a better development experience: https://fb.me/react-devtools"+("file:"===Nc?"\nYou might need to use a local HTTP server (instead of file://): https://fb.me/react-devtools-faq":""),"font-weight:bold")}var Rc=Object.freeze({default:Pc}),Ic=Rc&&Pc||Rc,Oc=Ic.default?Ic.default:Ic;e.exports=Oc})()},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=o},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var i=0;i<n.length;i++)if(!r.call(t,n[i])||!o(e[n[i]],t[n[i]]))return!1;return!0}},function(){},function(){},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=n(19),o=/^ms-/;e.exports=function(e){return r(e).replace(o,"-ms-")}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";var r=n(21),o=/^-ms-/;e.exports=function(e){return r(e.replace(o,"ms-"))}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(23),i=n.n(a),l=n(24),u=n.n(l),s=(n(25),n(26)),c=n(35),d="/var/www/components/src/components/bannerWithCountdown/index.js",f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mountCountdown=function(){n.setState({renderCountdown:!0,isCountdownCompleted:!1})},n.unmountCountdown=function(){n.setState({renderCountdown:!1,isCountdownCompleted:!0})},n.state={isChanged:!1,title:null,subtitle:null,startTime:null,html:null,background:null,backgroundMobile:null,url:null,renderCountdown:!1,renderOnComplection:!1,isCountdownCompleted:!1},Object.assign(n.state,n.getStateFrom(n.props.banner)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),p(t,[{key:"getStateFrom",value:function(e){if(void 0===e||"object"!==(void 0===e?"undefined":f(e))||e instanceof Array)return{};var t={},n={title:e.title,subtitle:e.subtitle,startTime:e.startTime,html:e.html,background:e.background,backgroundMobile:e.backgroundMobile,url:e.url};for(var r in n)void 0!==n[r]&&(t[r]=n[r]);return t}},{key:"changeStateOnCompletion",value:function(){var e={};Object.assign(e,this.getStateFrom(this.props.banner.onCompletion),{isChanged:!0}),this.setState(e)}}]),p(t,[{key:"componentWillMount",value:function(){var e=this.props.banner.onCompletion;void 0===e||"object"!==(void 0===e?"undefined":f(e))||e instanceof Array||this.setState({renderOnComplection:!0});var t=this.props.banner.time;t&&s.default.canBeStarted(t)&&this.mountCountdown()}},{key:"render",value:function(){var e=""+i.a.prefix+u.a.blockName,t=this.props.banner,n=t.logoOnBackground||t.logo||t.teams?" "+e+"_full":"",r=this.state.background?{backgroundImage:'url("'+this.state.background+'")'}:{};return o.a.createElement("div",{className:""+e+n,style:r,__source:{fileName:d,lineNumber:114},__self:this},this.state.backgroundMobile&&o.a.createElement("div",{className:e+"__background-mobile",style:{backgroundImage:'url("'+this.state.backgroundMobile+'")'},__source:{fileName:d,lineNumber:117},__self:this}),this.props.banner.logoOnBackground?o.a.createElement("div",{className:e+"__left",__source:{fileName:d,lineNumber:121},__self:this}):(t.logo||t.teams)&&o.a.createElement("div",{className:e+"__left",__source:{fileName:d,lineNumber:124},__self:this},t.teams?o.a.createElement("div",{className:e+"__teams-group",__source:{fileName:d,lineNumber:127},__self:this},o.a.createElement(c.default,{team:t.teams.home,__source:{fileName:d,lineNumber:128},__self:this}),o.a.createElement("div",{className:e+"__team-separator",__source:{fileName:d,lineNumber:129},__self:this}),o.a.createElement(c.default,{team:t.teams.guest,__source:{fileName:d,lineNumber:130},__self:this})):o.a.createElement("div",{className:e+"__logo",style:{backgroundImage:'url("'+t.logo+'")'},__source:{fileName:d,lineNumber:133},__self:this})),o.a.createElement("div",{className:e+"__right",__source:{fileName:d,lineNumber:139},__self:this},!this.state.isChanged&&o.a.createElement("div",{__source:{fileName:d,lineNumber:142},__self:this},this.state.title&&o.a.createElement("div",{className:e+"__title",dangerouslySetInnerHTML:{__html:this.state.title},__source:{fileName:d,lineNumber:144},__self:this}),this.state.subtitle&&o.a.createElement("div",{className:e+"__subtitle",dangerouslySetInnerHTML:{__html:this.state.subtitle},__source:{fileName:d,lineNumber:148},__self:this}),this.state.renderCountdown&&o.a.createElement("div",{className:e+"__countdown",__source:{fileName:d,lineNumber:152},__self:this},o.a.createElement(s.default,{onCompleted:this.unmountCountdown,timeCompletion:t.time,__source:{fileName:d,lineNumber:153},__self:this}))),this.state.isChanged&&o.a.createElement("div",{className:e+"__after-complection",__source:{fileName:d,lineNumber:160},__self:this},this.state.title&&o.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.title},__source:{fileName:d,lineNumber:162},__self:this}),this.state.title&&o.a.createElement("br",{__source:{fileName:d,lineNumber:165},__self:this}),this.state.subtitle&&o.a.createElement("b",{dangerouslySetInnerHTML:{__html:this.state.subtitle},__source:{fileName:d,lineNumber:168},__self:this}),this.state.startTime&&o.a.createElement("br",{__source:{fileName:d,lineNumber:171},__self:this}),this.state.startTime&&this.state.startTime)),this.state.url&&o.a.createElement("a",{href:this.state.url,className:e+"__link",__source:{fileName:d,lineNumber:182},__self:this}," "))}},{key:"componentDidMount",value:function(){!this.state.renderOnComplection||this.state.renderCountdown||this.state.isChanged||this.changeStateOnCompletion()}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){this.state.isCountdownCompleted&&!this.state.isChanged&&this.changeStateOnCompletion()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidCatch",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}();t.default=m},function(e,t){e.exports={prefix:"ext-"}},function(e,t){e.exports={blockName:"banner-with-countdown"}},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(23),i=n.n(a),l=n(27),u=n.n(l),s=(n(28),n(29)),c="/var/www/components/src/components/countdown/index.js",d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timeCompletion=n.props.timeCompletion,n.state={intervalId:null,timeCache:null,timeInterval:n.getTimeDiff(n.timeCompletion)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),d(t,[{key:"getTimeDiff",value:function(e){var n=t.getTimestampUTC(e)-Date.now();return!(n<1e3)&&{diff:n,seconds:Math.floor(n/1e3%60),minutes:Math.floor(n/1e3/60%60),hours:Math.floor(n/36e5%24),days:Math.floor(n/864e5%365),years:Math.floor(n/31536e6%100),century:Math.floor(n/31536e8)}}},{key:"formatTime",value:function(e,t){var n="",r=String(e).length;if(r<t)for(var o=0,a=t-r;o<a;o++)n+="0";return""+n+e}},{key:"getTime",value:function(e){return void 0===this.state.timeInterval[e]?0:this.state.timeInterval[e]?this.state.timeInterval[e]:0}},{key:"removeInterval",value:function(){this.state.intervalId&&clearInterval(this.state.intervalId)}}],[{key:"canBeStarted",value:function(e){return!!(e&&e instanceof Array)&&!(t.getTimestampUTC(e)-Date.now()<1e3)}},{key:"getTimestampUTC",value:function(e){var t=[];Object.assign(t,e),t[1]>0&&(t[1]-=1);var n=Date.UTC.apply(Date,t)-108e5;return Date.parse(new Date(n))}}]),d(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=""+i.a.prefix+u.a.blockName,t=this.state.timeInterval.diff/1e3,n=this.getTime("century"),r=this.getTime("years"),a=this.getTime("days"),l=this.getTime("hours"),d=this.getTime("minutes"),f=this.getTime("seconds");return o.a.createElement("div",{className:""+e,__source:{fileName:c,lineNumber:129},__self:this},t>31536e5&&o.a.createElement(s.default,{time:n.toString(),label:"Веков",__source:{fileName:c,lineNumber:134},__self:this}),t>31536e3&&o.a.createElement(s.default,{time:t>31536e5?this.formatTime(r,2):r.toString(),label:"Лет",__source:{fileName:c,lineNumber:138},__self:this}),t>86400&&o.a.createElement(s.default,{time:t>31536e3?this.formatTime(a,3):a.toString(),label:"Дней",__source:{fileName:c,lineNumber:148},__self:this}),t>3600&&o.a.createElement(s.default,{time:t>86400?this.formatTime(l,2):l.toString(),label:"Часов",__source:{fileName:c,lineNumber:154},__self:this}),t>60&&o.a.createElement(s.default,{time:t>3600?this.formatTime(d,2):d.toString(),label:"Минут",__source:{fileName:c,lineNumber:160},__self:this}),o.a.createElement(s.default,{time:t>60?this.formatTime(f,2):f.toString(),label:"Секунд",__source:{fileName:c,lineNumber:165},__self:this}))}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.state.timeInterval?e.setState({timeCache:e.state.timeInterval,timeInterval:e.getTimeDiff(e.timeCompletion)}):(e.props.onCompleted(),e.removeInterval())},1e3);this.setState({intervalId:t})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidCatch",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeInterval()}}]),t}();t.default=f},function(e,t){e.exports={blockName:"countdown"}},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(23),i=n.n(a),l=n(30),u=n.n(l),s=(n(31),n(32)),c="/var/www/components/src/components/countdownCellGroup/index.js",d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={label:n.props.label,time:n.props.time},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),d(t,[{key:"render",value:function(){var e=this,t=""+i.a.prefix+u.a.blockName;return o.a.createElement("div",{className:""+t,__source:{fileName:c,lineNumber:22},__self:this},o.a.createElement("div",{className:t+"__number",__source:{fileName:c,lineNumber:23},__self:this},Array.from(this.state.time).map(function(t,n){return o.a.createElement(s.default,{key:n,num:t,__source:{fileName:c,lineNumber:25},__self:e})})),o.a.createElement("div",{className:t+"__label",__source:{fileName:c,lineNumber:28},__self:this},this.state.label))}},{key:"componentWillReceiveProps",value:function(e){this.setState({label:e.label,time:e.time})}}]),t}();t.default=f},function(e,t){e.exports={blockName:"countdown-cell-group"}},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(23),i=n.n(a),l=n(33),u=n.n(l),s=(n(34),"/var/www/components/src/components/countdownCell/index.js"),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={num:n.props.num},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),c(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=""+i.a.prefix+u.a.blockName,t=e+"__half",n=t+"_top",r=t+"_bottom",a=t+"_from",l=t+"_to",c=this.state.num;return o.a.createElement("div",{className:""+e,__source:{fileName:s,lineNumber:35},__self:this},o.a.createElement("span",{className:t+" "+n,__source:{fileName:s,lineNumber:36},__self:this}),o.a.createElement("span",{className:t+" "+r,__source:{fileName:s,lineNumber:37},__self:this}),o.a.createElement("span",{className:a+" "+n,__source:{fileName:s,lineNumber:38},__self:this},o.a.createElement("span",{__source:{fileName:s,lineNumber:38},__self:this},c),""),o.a.createElement("span",{className:a+" "+r,__source:{fileName:s,lineNumber:39},__self:this},o.a.createElement("span",{__source:{fileName:s,lineNumber:39},__self:this},c),""),o.a.createElement("span",{className:l+" "+n,__source:{fileName:s,lineNumber:40},__self:this},o.a.createElement("span",{__source:{fileName:s,lineNumber:40},__self:this},c),""),o.a.createElement("span",{className:l+" "+r,__source:{fileName:s,lineNumber:41},__self:this},o.a.createElement("span",{__source:{fileName:s,lineNumber:41},__self:this},c),""))}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({num:e.num})}}]),t}();t.default=d},function(e,t){e.exports={blockName:"countdown-cell"}},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(23),i=n.n(a),l=n(36),u=n.n(l),s=(n(37),"/var/www/components/src/components/bannerTeam/index.js"),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),c(t,[{key:"render",value:function(){var e=this.props.team,t=""+i.a.prefix+u.a.blockName,n=e.logo;return o.a.createElement("div",{className:""+t,__source:{fileName:s,lineNumber:12},__self:this},e.logo&&o.a.createElement("div",{className:t+"__logo",style:{backgroundImage:'url("'+n+'")'},__source:{fileName:s,lineNumber:15},__self:this}),e.title&&o.a.createElement("div",{className:t+"__title",__source:{fileName:s,lineNumber:19},__self:this},e.title),e.url&&o.a.createElement("a",{href:e.url,title:e.title,className:t+"__link",__source:{fileName:s,lineNumber:23},__self:this}," "))}}]),t}();t.default=d},function(e,t){e.exports={blockName:"banner-team"}},function(e,t){}]);
if (typeof spb_scripts != "object") {
    var spb_scripts = {};
}
if (typeof spb_scripts.Components != "object") {
    spb_scripts.Components = {}
}
if (typeof spb_scripts.Components.LoginPopup != "object") {
    spb_scripts.Components.LoginPopup = {};
}

spb_scripts.Components.LoginPopup = {
    $container: null,
    $popup_auth: $('#popup_auth'),
    $popup_wrap: $('#popup_wrap'),
    $destinationField: null,
    $emailField: null,
    $passwordField: null,
    $closeButton: null,

    $socialButtons: null,

    isVisible: false,

    show: function() {
        this.$popup_wrap.removeClass('hide');
        this.$emailField.focus();
        this.isVisible = true;
    },
    hide: function(){
        this.$popup_wrap.addClass('hide');
        this.isVisible = false;
    },
    toggle: function(event) {
        event = event || window.event;
        event.stopImmediatePropagation();
        if(this.isVisible) {
            this.hide();
        } else {
            this.show();
        }
    },
    init: function() {
        var self = this;

        this.$container = $('#header-login-ums');
        this.$popup_auth = $('#popup_auth', this.$container);
        this.$popup_wrap = $('#popup_wrap', this.$container);
        this.$closeButton = $('#close_iframe_login_popup', this.$container);

        this.$destinationField = $('input[name="destination"]', this.$popup_wrap);
        this.$emailField = $('input[name="mail"]', this.$popup_wrap);
        this.$passwordField = $('input[name="password"]', this.$popup_wrap);

        this.$socialButtons = $('#social_auth li');

        // подставляем в форму адрес текущей страницы
        this.$destinationField.val(window.location.href);

        this.$socialButtons.on('click touchstart', function(){
            var providerName = $(this).attr('data-provider-name');
            var url = '/ums_auth_gate?Provider=' + providerName +
                '&destination=' + $("#popup_wrap_inner input[name=destination]").val();
            social_auth_window_obj = window.open(url, 'Авторизация', "width=656, height=480");
        });

        this.$closeButton.on('click touchstart', function(event){
            event.preventDefault();
            event.stopImmediatePropagation();
            self.hide();
        });

        // закрываем попап авторизации
        $(window).on({
            'click': function(event) {
                var target = $(event.target);

                if (self.isVisible
                    && target.attr('id') !== 'popup_auth'
                    && !target.parents('#popup_auth').length
                    // Dont know what is "#sbCNewsMainPhotoBig". Just copied it from old code:
                    && !target.parents('#sbCNewsMainPhotoBig').length
                )
                {
                    self.hide();
                }
            },
            'keydown': function(event) {
                var target = $(event.target); if (self.isVisible && event.keyCode === 27) {
                    self.hide();
                }
            }
        });

        window.addEventListener( "message", function (event) {
            var data = event.data;
            if ( data && data instanceof Array && data.indexOf('auth.show') == 0 ) {
                self.show();
            }
        }, false );
    }
};

function receiveMessage(event) {
    if (event.data.Spb_AdFox_Branding) {
        /**
         * @namespace event.data.Spb_AdFox_Branding
         *
         * TOP:
         *
         * @namespace event.data.Spb_AdFox_Branding.background_image
         * @namespace event.data.Spb_AdFox_Branding.background_image_fixed
         * @namespace event.data.Spb_AdFox_Branding.background_color
         * @namespace event.data.Spb_AdFox_Branding.margin_top
         *
         * @namespace event.data.Spb_AdFox_Branding.href
         * @namespace event.data.Spb_AdFox_Branding.hide_link
         *
         * @namespace event.data.Spb_AdFox_Branding.top_banner_iframe_src
         * @namespace event.data.Spb_AdFox_Branding.top_banner_iframe_width
         * @namespace event.data.Spb_AdFox_Branding.top_banner_height_100perc
         *
         *
         * BOTTOM:
         *
         * @namespace event.data.Spb_AdFox_Branding.bottom_image
         *
         * @namespace event.data.Spb_AdFox_Branding.bottom_href
         * @namespace event.data.Spb_AdFox_Branding.bottom_hide_link
         *
         * @namespace event.data.Spb_AdFox_Branding.bottom_banner_iframe_src
         * @namespace event.data.Spb_AdFox_Branding.bottom_banner_iframe_height
         *
         *
         *
         *  @namespace event.data.MatchTV_AdFox_Branding.additional_pixel
         */

        /**
         * TOP banner:
         */
        if (event.data.Spb_AdFox_Branding.background_image || event.data.Spb_AdFox_Branding.top_banner_iframe_src) {

            // Удаляем старую ссылку:
            var $oldILink = $('.AdFoxBranding__top-link');
            if ($oldILink.length) {
                $oldILink.remove();
            }

            // Удаляем старый айфрейм:
            var $oldIframe = $('.AdFoxBranding__top-iframe');
            if ($oldIframe.length) {
                $oldIframe.remove();
            }

            var $body = $("body");

            var topBanner = {
                $link: $("<a href='#' class='AdFoxBranding__top-link' target='_blank'></a>"),
                $iframe: null,

                bgColor: event.data.Spb_AdFox_Branding.background_color || "",
                bgImage: event.data.Spb_AdFox_Branding.background_image,
                fixed: event.data.Spb_AdFox_Branding.background_image_fixed,
                bgHeight: event.data.Spb_AdFox_Branding.margin_top,

                iframeHeight: event.data.Spb_AdFox_Branding.margin_top,
                iframeFullHeight: event.data.Spb_AdFox_Branding.top_banner_height_100perc,
                iframeFullWidth: event.data.Spb_AdFox_Branding.top_banner_iframe_width_100perc,
                iframeSrc: event.data.Spb_AdFox_Branding.top_banner_iframe_src,

                href: event.data.Spb_AdFox_Branding.href || "",
                hideLink: event.data.Spb_AdFox_Branding.hide_link
            };

            $body.css({
                "background-color": topBanner.bgColor,
                "background-image": "none",
                "margin-top": topBanner.bgHeight
            });

            /**
             * Реклама картинкой
             */
            if (topBanner.bgImage) {
                $body.css("background-image", "url(" + topBanner.bgImage + ")");
                $body.addClass('AdFoxBranding');
            }

            if (topBanner.fixed) {
                $body.css('background-attachment', 'fixed');
            }

            /**
             * Добавляем ссылку на рекламу
             */
            if (!topBanner.hideLink) {
                topBanner.$link.attr("href", topBanner.href);
                $body.prepend(topBanner.$link);
            }

            /**
             * Реклама в iframe
             */
            if (topBanner.iframeSrc) {

                if (topBanner.iframeFullHeight == 1) {
                    topBanner.iframeHeight = "100%";
                }

                var iframe_class = "AdFoxBranding__top-iframe";

                if (topBanner.iframeFullWidth == 1) {
                    iframe_class += " AdFoxBranding__top-iframe-full_width";
                }

                topBanner.$iframe = $("<iframe class='" + iframe_class + "' height='" + topBanner.iframeHeight + "' src='" + topBanner.iframeSrc + "' noscroll scrolling='no'></iframe>");


                $body.prepend(topBanner.$iframe);

                if (topBanner.iframeFullHeight == 1) {
                    topBanner.$iframe.css('position', 'fixed');
                }

                topBanner.$iframe.on("load", function () {
                    $(window).trigger("brandingShowed");
                });
            }
        }

        /**
         * BOTTOM banner:
         */
        if (event.data.Spb_AdFox_Branding.bottom_image || event.data.Spb_AdFox_Branding.bottom_banner_iframe_src) {

            // Удаляем старую строку:
            var $oldIRow = $('.AdFoxBranding__bottom-row');
            if ($oldIRow.length) {
                $oldIRow.remove();
            }

            var $content = $('#content');

            var bottomBanner = {
                $link: $("<a href='#' class='AdFoxBranding__bottom-link' target='_blank'></a>"),
                $iframe: null,
                $image: null,
                $row: $("<div class='row AdFoxBranding__bottom-row'></div>"),

                imageSrc: event.data.Spb_AdFox_Branding.bottom_image,

                iframeHeight: event.data.Spb_AdFox_Branding.bottom_banner_iframe_height,
                iframeSrc: event.data.Spb_AdFox_Branding.bottom_banner_iframe_src,

                href: event.data.Spb_AdFox_Branding.bottom_href || "",
                hideLink: event.data.Spb_AdFox_Branding.bottom_hide_link
            };

            /**
             * Реклама картинкой
             */
            if (bottomBanner.imageSrc) {
                bottomBanner.$image = $('<img src="' + bottomBanner.imageSrc + '" class="AdFoxBranding__bottom-img">');

                /**
                 * Добавляем ссылку на рекламу
                 */
                if (!bottomBanner.hideLink) {
                    bottomBanner.$link.attr("href", bottomBanner.href);
                    bottomBanner.$link.prepend(bottomBanner.$image);
                    bottomBanner.$row.prepend(bottomBanner.$link);

                } else {
                    bottomBanner.$row.prepend(bottomBanner.$image);
                }

                $content.prepend(bottomBanner.$row);
            }

            /**
             * Реклама в iframe
             */
            if (bottomBanner.iframeSrc) {

                bottomBanner.$iframe = $("<iframe class='AdFoxBranding__bottom-iframe' height='" + bottomBanner.iframeHeight + "' src='" + bottomBanner.iframeSrc + "' noscroll scrolling='no'></iframe>");

                bottomBanner.$row.prepend(bottomBanner.$iframe);

                $content.prepend(bottomBanner.$row);

                bottomBanner.$iframe.on("load", function () {
                    $(window).trigger("brandingShowed");
                });
            }
        }

        /**
         * No frame:
         */
        if (!event.data.Spb_AdFox_Branding.top_banner_iframe_src && !event.data.Spb_AdFox_Branding.bottom_banner_iframe_src) {
            $(window).trigger("brandingShowed");
        }

        if (event.data.Spb_AdFox_Branding.additional_pixel) {
            var element = document.createElement("img");
            element.src = event.data.Spb_AdFox_Branding.additional_pixel;
            element.style = "position: absolute; width: 0; height: 0; left: -9999; top: -9999;";
            document.getElementsByTagName('body')[0].appendChild(element);
        }
    }
}

addEventListener("message", receiveMessage, false);
//var onlines_block_class= '.js-_COMPONENT_CLASS';



//var onlines_block_class= '.js-_COMPONENT_CLASS';

var tour_games_block_js = {
    bind_list_expander: function (element_id) {
        var $this = $('#' + element_id);
        var onlines_block_item_arr = $this.find('.list > *');
        var max_item_view = 9;
        var $more_view_button_tpl = $('<a class="global-more-button" href="#"><span>Еще</span></a>');

        if (onlines_block_item_arr.length > max_item_view) {
            $.each(onlines_block_item_arr, function (index) {
                if (index + 1 > max_item_view) {
                    $(this).addClass('hidden');
                }
            });

            $more_view_button_tpl
                .on('click', function (e) {
                    e.preventDefault();
                    onlines_block_item_arr.removeClass('hidden');
                    $(this).remove();
                })
                .appendTo($this);
        }
    }
};


//var onlines_block_class= '.js-_COMPONENT_CLASS';

//var onlines_block_class= '.js-_COMPONENT_CLASS';




//var onlines_block_class= '.js-_COMPONENT_CLASS';

var spb2015_search = {};

spb2015_search.initSearchForm = function (element_id) {
    var searchForm = $('#' + element_id);
    var searchText = searchForm.find('input[name=keys]');

    // Sample
    var sampleElement = $('.search-sample');
    var sampleTextArr = ['Аршавин', 'футбол', 'теннис', 'волейбол', 'турнирная таблица'];
    sampleElement.html('Например, <em>' + sampleTextArr[Math.floor(Math.random() * sampleTextArr.length)] + '</em>');
    sampleElement.click(function () {
        searchText.focus();
    });
    searchText.focus(function () {
        sampleElement.hide();
    }).blur(function () {
        if (searchText.val() != '') {
            return;
        }
        sampleElement.show();
    });
    if (searchText.val() != '') {
        sampleElement.hide();
    }
    searchForm.append(sampleElement);

    // Календарь
    var calendarLink = $('.search-calendar-link');
    var datepickerOptions = {
        language: "ru",
        format: 'yyyy-mm-dd',
        endDate: new Date(),
        autoclose: true
    };
    calendarLink.datepicker(datepickerOptions);
    calendarLink.click(function () {
        return false;
    });
    calendarLink.on('changeDate', function () {
        var formattedDate = calendarLink.datepicker('getFormattedDate');

        var since = $('<input type="hidden" name="since">');
        since.val(formattedDate);
        searchForm.append(since);

        var upto = $('<input type="hidden" name="upto">');
        upto.val(formattedDate);
        searchForm.append(upto);

        searchForm.submit();
    });

    // Расширенный поиск
    var advancedSearchLink = $('.search-advanced-link');
    advancedSearchLink.click(function () {
        var searchTextValue = searchText.val();
        if (searchTextValue != '') {
            var url = advancedSearchLink.attr('href').split("?")[0];
            advancedSearchLink.attr('href', url + '?keys=' + encodeURIComponent(searchTextValue));

            setTimeout(function () {
                advancedSearchLink.attr('href', url);
            }, 100);
        }
    });
};

spb2015_search.initAdvancedSearchForm = function (element_id) {
    var searchForm = $('#' + element_id);

    var advancedSearch = $('.advanced-search', searchForm);
    if (!advancedSearch.length) {
        return;
    }

    // Тип материала
    var contentTypes = $('.content-types', advancedSearch);
    var contentTypesSelectAll = contentTypes.find('.content-types-select-all');
    var contentTypesCheckboxes = contentTypes.find('.content-types-select');
    contentTypesSelectAll.change(function () {
        var checked = $(this).prop('checked');
        contentTypesCheckboxes.prop('checked', checked);
    });

    contentTypesCheckboxes.change(function () {
        var checked = $(this).prop('checked');
        if (!checked) {
            contentTypesSelectAll.prop('checked', false);
        } else {
            var allIsChecked = contentTypesCheckboxes.filter(':not(:checked)').length == 0;
            contentTypesSelectAll.prop('checked', allIsChecked);
        }
    });

    // Рубрики
    var rubrics = $('.search-rubrics', advancedSearch);
    var rubricsSelectAll = rubrics.find('.search-rubrics-select-all');
    var rubricsCheckboxes = rubrics.find('.search-rubrics-select');

    rubricsSelectAll.change(function () {
        var checked = $(this).prop('checked');
        rubricsCheckboxes.prop('checked', checked);
    });

    rubricsCheckboxes.change(function () {
        var checked = $(this).prop('checked');
        if (!checked) {
            rubricsSelectAll.prop('checked', false);
        } else {
            var allIsChecked = rubricsCheckboxes.filter(':not(:checked)').length == 0;
            rubricsSelectAll.prop('checked', allIsChecked);
        }
    });

    function zeroPad(n, width) {
        n = n.toString();
        if (n.length >= width) {
            return n;
        } else {
            return new Array(width - n.length + 1).join('0') + n;
        }
    }

    function(){}