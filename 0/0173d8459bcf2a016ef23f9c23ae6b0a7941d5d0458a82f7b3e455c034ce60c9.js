var base64={};function Cludo(e){if(window.CludoSearchInstances=window.CludoSearchInstances||[],window.CludoSearchInstances.push(this),this.customerId=e.customerId,this.engineId=void 0!==e.engineId?e.engineId:e.siteId,this.searchUrl=e.searchUrl,this.defaultApiUrl=this.customerId>=1e7?"https://api-us1.cludo.com/api/v3":"https://api.cludo.com/api/v3",this.searchApiUrl=void 0!==e.searchApiUrl?e.searchApiUrl:this.defaultApiUrl,this.searchApiUrlPublic=void 0!==e.searchApiUrlPublic?e.searchApiUrlPublic:this.defaultApiUrl,this.statisticsApiUrl=void 0!==e.statisticsApiUrl?e.statisticsApiUrl:"https://stat.cludo.com",this.logPageVisits=void 0===e.logPageVisits||e.logPageVisits,this.searchSiteKey=void 0!==e.searchSiteKey?e.searchSiteKey:"SearchKey",this.intranetSearch=void 0!==e.intranetSearch&&e.intranetSearch,this.customerTemplate=void 0!==e.customerTemplate?e.customerTemplate:"SearchContent",this.disableAutocomplete=void 0!==e.disableAutocomplete&&e.disableAutocomplete,this.richAutocomplete=void 0!==e.richAutocomplete&&e.richAutocomplete,this.autocompleteForceUseTemplate=void 0!==e.autocompleteForceUseTemplate&&e.autocompleteForceUseTemplate,this.autocompleteMinimumQueryLength=void 0!==e.autocompleteMinimumQueryLength?e.autocompleteMinimumQueryLength:1,this.facets=void 0!==e.facets?e.facets:{Category:[]},this.applyMultiLevelFacets=void 0===e.applyMultiLevelFacets||e.applyMultiLevelFacets,this.initFacets=void 0!==e.initFacets?e.initFacets:null,this.filters=void 0!==e.filters?e.filters:{},this.sortOrder=void 0!==e.sortOrder?e.sortOrder:{},this.rangeFacets=void 0!==e.rangeFacets?e.rangeFacets:{},this.searchInputs=void 0!==e.searchInputs?e.searchInputs:["cludo-search-form"],this.pierceShadowDom=void 0!==e.pierceShadowDom&&e.pierceShadowDom,this.perPage=void 0!==e.perPage?e.perPage:null,this.enableRelatedSearches=void 0!==e.enableRelatedSearches&&e.enableRelatedSearches,this.bannerIsInSearchTemplate=void 0===e.bannerIsInSearchTemplate||e.bannerIsInSearchTemplate,this.xhrRequestHeader=void 0!==e.xhrRequestHeader?e.xhrRequestHeader:"application/json",this.searchResultsWrapper=void 0!==e.searchResultsWrapper?e.searchResultsWrapper:"cludo-search-results",this.translateProvider.language=void 0!==e.language?e.language:void 0!==this.filters.Language?this.filters.Language[0]:"da",this.initSearchBoxText=void 0!==e.initSearchBoxText?e.initSearchBoxText:"",this.loading=void 0!==e.loading?e.loading:'<img src="https://customer.cludo.com/img/loading.gif" class="loading" tabindex="-1" alt="loading search results" />',this.changeWindowLocation=void 0===e.changeWindowLocation||e.changeWindowLocation,this.hideResultsCount=void 0!==e.hideResultsCount&&e.hideResultsCount,this.hideSearchFilters=void 0!==e.hideSearchFilters&&e.hideSearchFilters,this.hideSearchDidYouMean=void 0!==e.hideSearchDidYouMean&&e.hideSearchDidYouMean,this.hideSearchFiltersIfNoResult=void 0===e.hideSearchFiltersIfNoResult||e.hideSearchFiltersIfNoResult,this.customNoResultsMessage=void 0!==e.customNoResultsMessage?e.customNoResultsMessage:null,this.resetFiltersBeforeSearch=void 0!==e.resetFiltersBeforeSearch&&e.resetFiltersBeforeSearch,this.updateInputOnBlur=void 0===e.updateInputOnBlur||e.updateInputOnBlur,this.enableVoiceSearch=void 0!==e.enableVoiceSearch&&e.enableVoiceSearch,this.disableVoiceSearchActiveAnimation=void 0!==e.disableVoiceSearchActiveAnimation&&e.disableVoiceSearchActiveAnimation,this.voiceGrammar=void 0!==e.voiceGrammar?e.voiceGrammar:"",this.useFixedQueryInResultsCount=void 0===e.useFixedQueryInResultsCount||e.useFixedQueryInResultsCount,this.allowSearchWithoutSearchword=void 0!==e.allowSearchWithoutSearchword&&e.allowSearchWithoutSearchword,this.jumpToTopOnFacetClick=void 0===e.jumpToTopOnFacetClick||e.jumpToTopOnFacetClick,this.endlessScroll=void 0!==e.endlessScroll?e.endlessScroll:null,this.endlessScrollElements={scrolledElement:null,documentElement:null,backToTop:null,loadMore:null},this.enableExtendedTracking=void 0===e.enableExtendedTracking||e.enableExtendedTracking,this.customCallbackAfterSearch=void 0!==e.customCallbackAfterSearch?e.customCallbackAfterSearch:null,this.customCallbackBeforeSearch=void 0!==e.customCallbackBeforeSearch?e.customCallbackBeforeSearch:null,this.customCallbackBeforeRedirect=void 0!==e.customCallbackBeforeRedirect?e.customCallbackBeforeRedirect:null,this.customCallbackAfterAutocomplete=void 0!==e.customCallbackAfterAutocomplete?e.customCallbackAfterAutocomplete:null,this.canUserBeTracked=void 0!==e.canUserBeTracked?e.canUserBeTracked:null,this.isTrackedSession=-1,this.type=void 0!==e.type?e.type:"standard",this.template=void 0!==e.template?e.template:"StandardInline",this.translateSearchTemplates=void 0!==e.translateSearchTemplates&&e.translateSearchTemplates,this.ovarlayResultsWrapperOpenClass=void 0!==e.ovarlayResultsWrapperOpenClass?e.ovarlayResultsWrapperOpenClass:"",this.useStandardSearchTemplate=void 0===e.useStandardSearchTemplate||e.useStandardSearchTemplate,this.searchBoxPosition=void 0!==e.theme&&void 0!==e.theme.searchBoxPosition?e.theme.searchBoxPosition:{align:"right",x:20,y:20},this.themeColor=void 0!==e.theme&&void 0!==e.theme.themeColor?e.theme.themeColor:"",this.elementFocusColor=void 0!==e.theme&&void 0!==e.theme.elementFocusColor?e.theme.elementFocusColor:"",this.themeBannerColor=void 0!==e.theme&&void 0!==e.theme.themeBannerColor?e.theme.themeBannerColor:"",this.borderRadius=void 0!==e.theme&&void 0!==e.theme.borderRadius?e.theme.borderRadius:0,this.borderRadiusInput=void 0!==e.theme&&void 0!==e.theme.borderRadiusInput?e.theme.borderRadiusInput:0,this.showSearchPage=void 0===e.showSearchPage||e.showSearchPage,this.paramsPrefix=void 0!==e.paramsPrefix?e.paramsPrefix:"cludo",this.focusOnResultsAfterSearch=void 0!==e.focusOnResultsAfterSearch&&e.focusOnResultsAfterSearch,this.isSearchAfterRedirect=!1,this.linkFragment="",this.debug=!1,this.showInstantSuggestions=void 0!==e.showInstantSuggestions&&e.showInstantSuggestions,this.suggestedSearchesHeader=void 0!==e.suggestedSearchesHeader?e.suggestedSearchesHeader:null,this.recentSearchesHeader=void 0!==e.recentSearchesHeader?e.recentSearchesHeader:null,this.recentSearchLimit=5,this.recentSearches=this.getRecentSearchesFromStorage(),null==this.recentSearches&&(this.recentSearches=[]),this.googleAnalyticsTrackingId=void 0!==e.googleAnalyticsTrackingId?e.googleAnalyticsTrackingId:null,this.eventHandler={on:window.attachEvent?"on":"",attach:window.attachEvent?"attachEvent":"addEventListener",detach:window.attachEvent?"detachEvent":"removeEventListener"},this.authorizationKey="",this.websiteSettings=[],this.sessionIdKey="cludoSessionId",this.sessionIdStartKey="cludoSessionIdStart",this.sessionExpiration=18e5,this.inputTypeVoiceKey="voice",this.inputTypeStandardKey="standard",this.cookieConsentStorageKey="cludoCachedCookieConsent",this.lastQuery=null,this.querySessionId=null,this.params={ResponseType:"JsonHtml",Template:this.customerTemplate,facets:{},filters:this.filters,page:1,query:"",text:"",traits:[],sort:this.sortOrder,rangeFacets:this.rangeFacets,perPage:this.perPage,enableRelatedSearches:this.enableRelatedSearches,applyMultiLevelFacets:this.applyMultiLevelFacets},this.searchQueryLength=0,this.autocompleteParamDefaultValue="off",this.searchInputsLength=0,this.searchComponentsDictionary={},this.searchComponentsKeys=[],this.activeAutocompleteFilters,this.elemSearchResults={results:null,pagination:null,filters:null,relatedSearches:null,didYouMean:null,resultCount:null,banner:null},this.elemAutocomplete={lists:[],listsItems:[]},this.didYouMean="",this.totalDocuments=0,this.fixedQuery=null,this.responseTime=null,this.autocompleteResponseData=null,this.selectedIndex=-1,this.isSearchResultPage=!1,this.timeoutId=null,this.hideAutocomplete=!1,this.pendingAcTitle=null,this.pendingAcIndex=null,this.lastAcQuery=null,this.quicklink={},this.isOverlaySearch=!1,this.overlaySearchFormWrapperId="cludo-search-form-content",this.openedOverlayOnInit=!1,this.elemOverlaySearch={closeButton:null,overlay:null,overlayInner:null,overlayHeader:null,overlayBody:null,overlayFooter:null,searchWrapper:null,searchBox:null,searchBoxLabel:null,searchBoxInput:null,searchBoxButton:null,searchBoxContent:null,searchBoxContentLabel:null,searchBoxContentInput:null,searchBoxContentButton:null,poweredBy:null,poweredByMobile:null},this.isLazyLoading=!1,this.doSearchWithDelayTimer=null,this.referalHostName=location.hostname,this.deviceType=null,this.inputType=null,this.cachedStorageContainerReference=null,this.usingOnChange=!1,this.browserIsIE=window.navigator.userAgent.indexOf("MSIE")>0,this.browserIsEdge14=void 0!==window.navigator.appVersion&&window.navigator.appVersion.indexOf("Edge/14")>0,this.userIsUsingTabulator=!1,this.resultItemCurrentlyFocusedElement=null,this.focusedElementBeforeOverlayOpen=null,this.resetFocusTimerPoweredBy=null,this.resetFocusTimerCloseButton=null,this.enabledFeatures=[],this.autoCompleteControllerAction="Autocomplete",this.publicSettingsRetrieved=!1,this.pageInitFromBackForward=!1,window.performance&&window.performance.getEntriesByType)for(var t=window.performance.getEntriesByType("navigation"),r=0;r<t.length;r++){if("back_forward"===t[r].type){this.pageInitFromBackForward=!0;break}}}base64.PADCHAR="=",base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(t){var e=new Error("DOM Exception 5");return e.code=e.number=5,e.name=e.description="INVALID_CHARACTER_ERR",e.toString=function(){return"Error: "+e.name+": "+e.message},e}},base64.getbyte64=function(e,t){var r=base64.ALPHA.indexOf(e.charAt(t));if(-1===r)throw base64.makeDOMException();return r},base64.decode=function(e){e=""+e;var t,r,a,s=base64.getbyte64,l=e.length;if(0===l)return e;if(l%4!=0)throw base64.makeDOMException();t=0,e.charAt(l-1)===base64.PADCHAR&&(t=1,e.charAt(l-2)===base64.PADCHAR&&(t=2),l-=4);var i=[];for(r=0;r<l;r+=4)a=s(e,r)<<18|s(e,r+1)<<12|s(e,r+2)<<6|s(e,r+3),i.push(String.fromCharCode(a>>16,a>>8&255,255&a));switch(t){case 1:a=s(e,r)<<18|s(e,r+1)<<12|s(e,r+2)<<6,i.push(String.fromCharCode(a>>16,a>>8&255));break;case 2:a=s(e,r)<<18|s(e,r+1)<<12,i.push(String.fromCharCode(a>>16))}return i.join("")},base64.getbyte=function(e,t){var r=e.charCodeAt(t);if(r>255)throw base64.makeDOMException();return r},base64.encode=function(e){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var t,r,a=base64.PADCHAR,s=base64.ALPHA,l=base64.getbyte,i=[],o=(e=""+e).length-e.length%3;if(0===e.length)return e;for(t=0;t<o;t+=3)r=l(e,t)<<16|l(e,t+1)<<8|l(e,t+2),i.push(s.charAt(r>>18)),i.push(s.charAt(r>>12&63)),i.push(s.charAt(r>>6&63)),i.push(s.charAt(63&r));switch(e.length-o){case 1:r=l(e,t)<<16,i.push(s.charAt(r>>18)+s.charAt(r>>12&63)+a+a);break;case 2:r=l(e,t)<<16|l(e,t+1)<<8,i.push(s.charAt(r>>18)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+a)}return i.join("")},Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=r.length;return function(s){if("object"!=typeof s&&("function"!=typeof s||null===s))throw new TypeError("Object.keys called on non-object");var l,i,o=[];for(l in s)e.call(s,l)&&o.push(l);if(t)for(i=0;i<a;i++)e.call(s,r[i])&&o.push(r[i]);return o}}()),function(){var e,t,r,a;!window.addEventListener&&(e=Window.prototype,t=HTMLDocument.prototype,r=Element.prototype,a=[],e.addEventListener=t.addEventListener=r.addEventListener=function(e,t){var r=this;a.unshift([r,e,t,function(e){e.currentTarget=r,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||r,t.call(r,e)}]),this.attachEvent("on"+e,a[0][3])},e.removeEventListener=t.removeEventListener=r.removeEventListener=function(e,t){for(var r,s=0;r=a[s];++s)if(r[0]==this&&r[1]==e&&r[2]==t)return this.detachEvent("on"+e,a.splice(s,1)[0][3])},e.dispatchEvent=t.dispatchEvent=r.dispatchEvent=function(e){return this.fireEvent("on"+e.type,e)})}(),Cludo.prototype={constructor:Cludo,init:function(){this.initTrackedSession(),this.isOverlaySearch=this.isSearchWithOverlay(),this.isOverlaySearch&&"customOverlay"!==this.type?(this.endlessScroll={stopAfterPage:3,resultsPerPage:10,bottomOffset:50},this.endlessScrollElements={scrolledElement:null,documentElement:null,backToTop:null,loadMore:null},this.useStandardSearchTemplate&&(this.params.overlay="Standard"+this.translateProvider.language),"standardOverlayWithDynamicSearchBox"===this.type&&this.overlaySetTopSearchBox(),""===this.themeColor&&0===this.borderRadius||this.overlaySetColorTheme()):"inline"===this.type&&("facets"===this.template||"noFacets"===this.template||"nofacets"===this.template?(this.params.overlay=this.template+this.translateProvider.language,"noFacets"!==this.template&&"nofacets"!==this.template||(this.hideSearchFilters=!0)):(this.translateSearchTemplates=!0,this.params.overlay=this.template+"I18N")),this.initSearchFormElements(),this.deviceType=this.getDeviceType(),this.setIsSearchResultPage(),(!this.isOverlaySearch&&this.isSearchResultPage||this.isOverlaySearch&&"customOverlay"==this.type)&&this.setResultElements(),this.setLoadingElements(),this.setFacets(),this.setInitParams(),null==this.elemSearchResults.results||this.isOverlaySearch||this.getWebsiteSettings(),this.isSearchResultPage&&this.endlessScroll&&(this.isOverlaySearch||(this.endlessScrollElements.scrolledElement=window,this.endlessScrollElements.documentElement=document.documentElement),this.isOverlaySearch&&"customOverlay"==this.type&&(this.endlessScrollElements.scrolledElement=this.endlessScrollElements.documentElement=this.getResultWrapperContainer()),this.perPage?this.endlessScroll.resultsPerPage=this.perPage:this.endlessScroll.resultsPerPage&&(this.params.perPage=this.perPage=this.endlessScroll.resultsPerPage),this.endlessScrollAddScrollEvent(),this.endlessScrollSetElements(this.getResultWrapperContainer())),this.processSearchOnLoadOrStateChange(),(this.isSearchResultPage||this.isOverlaySearch)&&this.browserSupportsHistoryApi()&&window.addEventListener("popstate",function(e){e.state&&e.state.searchParams?this.paramObjectsAreDifferent(e.state.searchParams,this.params)&&(this.params=e.state.searchParams,this.processSearchOnLoadOrStateChange()):e.state&&e.state.processed||this.updateCludoHistoryState(e.state,this.params)}.bind(this))},updateCludoHistoryState:function(e,t){var r=e||{};r.processed=!0,t&&(r.searchParams=t),history.replaceState(r,"")},browserSupportsHistoryApi:function(){return!!window.history},paramObjectsAreDifferent:function(e,t){var r=["facets","filters","query","sort","rangeFacets"];this.endlessScroll||r.push("page");for(var a=0;a<r.length;a++){var s=r[a];if(e[s]||t[s]){if(!e[s]||!t[s])return!0;if(stateValue1=JSON.stringify(e[s]),stateValue2=JSON.stringify(t[s]),stateValue1!=stateValue2)return!0}}return!1},initSearchFormElements:function(){if(this.searchInputs&&0!=this.searchInputs.length){for(var e=0;e<this.searchInputs.length;e++){var t=this.searchInputs[e];this.registerSearchFormElement(t,this.pierceShadowDom)}0==this.searchInputsLength&&console.log("CludoJs Warning: No search inputs were found during initialization");var r=this.helpers.querySelector(".search-filters");null!==r&&r.setAttribute("role","presentation")}else console.log("CludoJs Error: Missing search input configuration during initialization")},registerSearchFormElement:function(e,t,r){r||(r=document);var a=this.helpers.getElementById(e,t,r),s=!1;if(a)s=this.addSearchFormComponentFromWrapper(e,a,t)||s;else for(var l=this.helpers.querySelectorAll(e,t,r),i=0;i<l.length;i++){var o=l[i],n=e+":"+i;s=this.addSearchFormComponentFromWrapper(n,o,t)||s}return s},buildSearchComponentsObjectFromWrapper:function(e,t){if(!e)return null;var r={wrapper:e,searchBoxInput:void 0,searchBoxButton:void 0,searchBoxClearButton:void 0,searchBoxFacets:void 0,voiceSearchButton:void 0},a=this.helpers.querySelectorAll("input[type=text]",t,e)[0]||this.helpers.querySelectorAll("input[type=search]",t,e)[0];a&&(r.searchBoxInput=a,a.getAttribute("autocomplete")||a.setAttribute("autocomplete",this.autocompleteParamDefaultValue));r.searchBoxButton=this.helpers.querySelectorAll('button[type="submit"]',this.pierceShadowDom,e)[0]||this.helpers.querySelectorAll("button",this.pierceShadowDom,e)[0]||this.helpers.querySelectorAll("input[type=submit]",this.pierceShadowDom,e)[0]||this.helpers.querySelectorAll("input[type=image]",this.pierceShadowDom,e)[0],r.searchBoxClearButton=this.helpers.querySelectorAll(".cludo-search-query-clear",this.pierceShadowDom,e)[0];var s=this.helpers.querySelectorAll("input[type=hidden]",this.pierceShadowDom,e);if(s.length>0){r.searchBoxFacets={};for(var l=0;l<s.length;l++){var i=s[l],o=i.getAttribute("data-facet-name"),n=i.getAttribute("data-facet");r.searchBoxFacets[o]||(r.searchBoxFacets[o]=[]),r.searchBoxFacets[o].push(n)}}if(this.enableVoiceSearch&&"webkitSpeechRecognition"in window){if(this.helpers.addButtonElement(e,"cludo-voice-icon",null,'<svg version="1.1" xmlns="http://www.w3.org/2000/svg"                     x="0" y="0"                     viewBox="0 0 93.44 134.88"                 ><g>                     <path stroke-width="0"                         d="M 50.04 100.45 V 124.56 C 50.04 126.39 48.55 127.88 46.72 127.88 C 44.89 127.88 43.4 126.39 43.4 124.56 V 100.45 C 33.24 99.64 24.08 95.15 17.26 88.33 C 9.69 80.77 5 70.34 5 58.87 C 5 57.04 6.49 55.55 8.32 55.55 S 11.64 57.04 11.64 58.87 C 11.64 68.51 15.59 77.28 21.95 83.64 C 28.31 90 37.08 93.95 46.72 93.95 H 46.72 C 56.36 93.95 65.13 90 71.49 83.64 C 77.85 77.28 81.8 68.51 81.8 58.87 C 81.8 57.04 83.29 55.55 85.12 55.55 S 88.44 57.04 88.44 58.87 C 88.44 70.35 83.75 80.78 76.19 88.34 C 69.36 95.16 60.2 99.64 50.04 100.45 L 50.04 100.45 Z M 46.94 5 C 53.32 5 59.12 7.61 63.32 11.81 C 67.52 16.01 70.13 21.81 70.13 28.19 V 58.19 C 70.13 64.57 67.52 70.37 63.32 74.57 C 59.12 78.77 53.32 81.38 46.94 81.38 S 34.76 78.77 30.56 74.57 C 26.36 70.37 23.75 64.57 23.75 58.19 V 28.19 C 23.75 21.81 26.36 16.01 30.56 11.81 C 34.76 7.61 40.56 5 46.94 5 L 46.94 5 Z M 58.62 16.51 C 55.62 13.51 51.48 11.65 46.94 11.65 C 42.39 11.65 38.26 13.51 35.26 16.51 C 32.26 19.51 30.4 23.65 30.4 28.19 V 58.19 C 30.4 62.74 32.26 66.87 35.26 69.87 C 38.26 72.87 42.4 74.73 46.94 74.73 C 51.49 74.73 55.62 72.87 58.62 69.87 C 61.62 66.87 63.48 62.73 63.48 58.19 V 28.19 C 63.49 23.64 61.62 19.51 58.62 16.51 L 58.62 16.51 Z"                     />                 </g></svg>',null,this.translateProvider.translate("voice_search_title")),!this.disableVoiceSearchActiveAnimation){this.helpers.addCssStyles("                    .cludo-voice-active svg {                         animation: voice-active-pulse 1s ease-in 0s infinite;                     }                     @keyframes voice-active-pulse {                         0% {                             opacity: 1;                         }                         50% {                             opacity: 0;                         }                         100% {                            opacity: 1;                         }                     }")}r.voiceSearchButton=this.helpers.querySelectorAll(".cludo-voice-icon",t,e)[0]}return r},addSearchFormComponentFromWrapper:function(e,t,r){if(this.hasSearchComponentForKey(e))return console.log("CludoJs Warning: CludoJs tried to register a search input more than once {"+e+"}"),!1;var a=this.buildSearchComponentsObjectFromWrapper(t,r);return!!a&&(this.addSearchComponentsObject(e,a),null!==a.wrapper&&(this.searchBoxWrapperEvents(a.wrapper),this.isOverlaySearch&&this.helpers.addClass(a.wrapper,"cludo-search_autocomplete")),null!=a.searchBoxInput&&this.searchBoxInputEvents(a.searchBoxInput),null!=a.searchBoxButton&&this.searchBoxEvents(a.searchBoxButton),null!=a.searchBoxClearButton&&this.searchBoxClearEvents(a.searchBoxClearButton),null!=a.voiceSearchButton&&this.searchBoxVoiceEvents(a.voiceSearchButton),!0)},addSearchComponentsObject:function(e,t){this.searchComponentsKeys.push(e),this.searchComponentsDictionary[e]=t,this.searchInputsLength=this.searchComponentsKeys.length},removeSearchComponentsObject:function(e){var t=this.searchComponentsKeys.indexOf(e);-1!=t&&this.searchComponentsKeys.splice(t,1),delete this.searchComponentsDictionary[e],this.searchInputsLength=this.searchComponentsKeys.length},hasSearchComponentForKey:function(e){return!!this.searchComponentsDictionary[e]},getSearchComponentsObject:function(e){return this.searchComponentsDictionary[e]?this.searchComponentsDictionary[e]:(console.log("CludoJs Warning: CludoJs tried to retrieve a missing search components object"),this.getSearchComponentsShellObject())},getSearchComponentsObjectFromSearchInputElement:function(e){for(var t=0;t<this.searchComponentsKeys.length;t++){var r=this.searchComponentsKeys[t],a=this.getSearchComponentsObject(r);if(a.searchBoxInput==e)return a}return console.log("CludoJs Warning: CludoJs could not resolve search component from input element"),this.getSearchComponentsShellObject()},getSearchComponentsObjectFromSearchBoxButton:function(e){for(var t=0;t<this.searchComponentsKeys.length;t++){var r=this.searchComponentsKeys[t];if(this.getSearchComponentsObject(r).searchBoxButton==e)return this.getSearchComponentsObject(r)}return console.log("CludoJs Warning: CludoJs could not resolve search component from search box button"),this.getSearchComponentsShellObject()},getSearchComponentsObjectFromSearchBoxClearButton:function(e){for(var t=0;t<this.searchComponentsKeys.length;t++){var r=this.searchComponentsKeys[t];if(this.getSearchComponentsObject(r).searchBoxClearButton==e)return this.getSearchComponentsObject(r)}return console.log("CludoJs Warning: CludoJs could not resolve search component from search clear button"),this.getSearchComponentsShellObject()},getSearchComponentsObjectFromSearchVoiceButton:function(e){for(var t=0;t<this.searchComponentsKeys.length;t++){var r=this.searchComponentsKeys[t];if(this.getSearchComponentsObject(r).voiceSearchButton==e)return this.getSearchComponentsObject(r)}},getSearchComponentsObjectFromAutocompleteElement:function(e){for(var t=e.parentElement,r=[],a=0;a<t.children.length;a++)r.push(t.children[a]);for(a=0;a<this.searchComponentsKeys.length;a++){var s=this.searchComponentsKeys[a],l=this.getSearchComponentsObject(s);if(-1!=r.indexOf(l.searchBoxInput))return l}return console.log("CludoJs Warning: CludoJs could not resolve search component from search clear button"),this.getSearchComponentsShellObject()},getSearchComponentsShellObject:function(){return{wrapper:void 0,searchBoxInput:void 0,searchBoxButton:void 0,searchBoxClearButton:void 0,searchBoxFacets:void 0,voiceSearchButton:void 0}},initTrackedSession:function(){try{var e=this.getStorageContainer().getItem(this.cookieConsentStorageKey);if(null==e)return void(this.isTrackedSession=-1);-1!==e.indexOf("false")?this.isTrackedSession=0:this.isTrackedSession=1}catch(e){this.isTrackedSession=-1}},updateIsTrackedSession:function(){if(this.canUserBeTracked)try{var e=-1,t=this.canUserBeTracked();if(!0===t?e=1:!1===t&&(e=0),e===this.isTrackedSession)return;this.isTrackedSession=e,1===this.isTrackedSession?this.enableTrackingForUser():0===this.isTrackedSession&&this.disableTrackingForUser()}catch(e){}},logPageVisit:function(){if(this.logPageVisits)try{var e={url:location.href,eid:this.engineId,cid:this.customerId},t=this.helpers.objectToQueryString(e),r=document.createElement("img");r.src=this.statisticsApiUrl+"/__ctm.gif?"+t,r.style.display="none",document.body.appendChild(r)}catch(e){}},setAutocompleteFilters:function(e){var t={};for(var r in this.filters)t[r]=this.filters[r];for(var r in e)t[r]=e[r];this.activeAutocompleteFilters=t},setResultElements:function(){this.resultsWrapper=this.getResultWrapperContainer(),null!=this.resultsWrapper&&(null!==this.resultsWrapper.querySelector(".search-result-count")||this.hideResultsCount||this.helpers.addElement(this.resultsWrapper,"search-result-count"),null!==this.resultsWrapper.querySelector(".search-did-you-mean")||this.hideSearchDidYouMean||this.helpers.addElement(this.resultsWrapper,"search-did-you-mean","","complementary"),null===this.resultsWrapper.querySelector(".search-results")&&this.helpers.addElement(this.resultsWrapper,"search-results"),null!==this.resultsWrapper.querySelector(".search-filters")||this.hideSearchFilters||this.helpers.addElement(this.resultsWrapper,"search-filters"),null===this.resultsWrapper.querySelector(".search-related")&&this.enableRelatedSearches&&this.helpers.addElement(this.resultsWrapper,"search-related"),this.elemSearchResults=this.getSearchResultsElements(),this.addAccessibilityAttributesToSearchResultsElements(this.elemSearchResults))},addAccessibilityAttributesToSearchResultsElements:function(e){null==e.resultCount||e.resultCount.hasAttribute("role")||e.resultCount.setAttribute("role","status")},setLoadingElements:function(){this.isOverlaySearch&&"customOverlay"!==this.type?this.loading='<div id="cludo-loading"><div id="loading_1" class="loading">Loading</div><div id="loading_2" class="loading">Loading</div></div>':this.loading='<div id="cludo-loading">'+this.loading+"</div>"},getResultWrapperContainer:function(){var e=document.getElementById(this.searchResultsWrapper);return e||document.querySelector(this.searchResultsWrapper)},getSearchResultsElements:function(){var e=this.getResultWrapperContainer();return{results:e.querySelector(".search-results"),resultCount:this.hideResultsCount?null:e.querySelector(".search-result-count"),didYouMean:this.hideSearchDidYouMean?null:e.querySelector(".search-did-you-mean"),filters:this.hideSearchFilters?null:e.querySelectorAll(".search-filters"),banner:this.bannerIsInSearchTemplate?null:e.querySelector(".search-banner"),relatedSearches:this.enableRelatedSearches?e.querySelectorAll(".search-related"):null}},setIsSearchResultPage:function(){if(10000068!=this.customerId){var e=this.helpers.getWindowLocation();if(""==this.searchUrl||"/"==this.searchUrl)this.isSearchResultPage=!0;else if(e.indexOf(this.searchUrl)>-1){var t=this.getEverythingAfterSearchUrlButBeforeQueryParameters();if(-1!=t.indexOf("/"))return void(this.isSearchResultPage=!1);if(!t||0==t.indexOf("index"))return void(this.isSearchResultPage=!0);this.isSearchResultPage=!1}}else this.helpers.getWindowLocation().indexOf(this.searchUrl)>-1?this.isSearchResultPage=!0:this.isSearchResultPage=!1},getEverythingAfterSearchUrlButBeforeQueryParameters:function(){var e=this.helpers.getWindowLocation(),t=e.substring(e.indexOf(this.searchUrl)+this.searchUrl.length);return 0==t.indexOf("/")&&(t=t.substr(1)),t=(t=t.split("?")[0]).split("#")[0]},getWebsiteSettings:function(e){var t=this.searchApiUrl+"/"+this.customerId+"/"+this.engineId+"/websites/publicsettings";this.httpRequest("GET",t,"settingsTemplate",e)},getAuthorizationKey:function(){var e=this.customerId+":"+this.engineId+":"+this.searchSiteKey;return base64.encode(e)},toggleSettingsForEnabledFeatures:function(){this.enableVoiceSearch&&-1===this.enabledFeatures.indexOf("voice search")&&this.disableVoiceSearch(),this.showInstantSuggestions&&-1===this.enabledFeatures.indexOf("instant suggestions")&&this.disablePresuggestions()},disablePresuggestions:function(){this.showInstantSuggestions=!1},disableVoiceSearch:function(){this.enableVoiceSearch=!1;for(var e=0;e<this.searchComponentsKeys.length;e++){var t=this.searchComponentsKeys[e],r=this.searchComponentsDictionary[t].voiceSearchButton;r.parentNode.removeChild(r),this.searchComponentsDictionary[t].voiceSearchButton=null}},setFacets:function(){if(void 0!==this.facets.length||this.helpers.isEmpty(this.facets)){for(var e=!0,t=0,r=this.facets.length;t<r;t++)""!=this.helpers.getURLParam(this.getQueryParameterVariableName(this.facets[t]))&&(e=!1);for(t=0,r=this.facets.length;t<r;t++){var a=[];null!==this.initFacets&&e&&(a=void 0!==this.initFacets[this.facets[t]]?this.initFacets[this.facets[t]]:[]),this.params.facets[this.facets[t]]=a}this.facets=this.params.facets}else{if(null!==this.initFacets)for(var s in this.facets)void 0!==this.initFacets[s]?this.facets[s]=this.initFacets[s]:this.facets[s]=[];this.params.facets=this.facets}},setInitParams:function(){if(this.intranetSearch||(this.authorizationKey=this.getAuthorizationKey()),this.params.query=this.getQueryFromUrl(),this.pendingAcTitle=this._getReferralAcTitle(),this.pendingAcIndex=this._getReferralAcIndex(),this.showSearchPage="false"!==this.helpers.getURLParam(this.getQueryParameterVariableName("showsearchpage"))&&this.showSearchPage,this.searchQueryLength=this.params.query.replace(/\s/g,"").length,(!this.queryIsNullOrEmpty()||this.allowSearchWithoutSearchword)&&(this.isSearchResultPage||this.isOverlaySearch)&&(this.params.page=""!=this.helpers.getURLParam(this.getQueryParameterVariableName("page"))?parseInt(this.helpers.getURLParam(this.getQueryParameterVariableName("page"))):1,this.inputType=""!=this.helpers.getURLParam(this.getQueryParameterVariableName("inputtype"))?this.helpers.getURLParam(this.getQueryParameterVariableName("inputtype")):this.inputTypeStandardKey,this.showSearchPage)){for(var e in this.params.facets){if(""!=(l=this.helpers.getURLParam(this.getQueryParameterVariableName(e),!0))){for(var t=[],r=l.split(","),a=0;a<r.length;a++)t.push(this.helpers.stripHtmlTags(decodeURIComponent(r[a])));this.params.facets[e]=t}}for(var s in this.params.filters){var l;if(""!=(l=this.helpers.getURLParam(this.getQueryParameterVariableName(s)))){var i=l.split(",");this.params.filters[s]=i}}var o=this.helpers.getURLParam(this.getQueryParameterVariableName("sort"),!0);if(""!=o)for(var n=o.split(","),c=0;c<n.length;c++){var u=decodeURIComponent(n[c]).split("=");this.params.sort[u[0]]=u[1]}this.isOverlaySearch&&""!==this.params.query&&(this.openedOverlayOnInit=!0,this.overlayOpenModalWithSearch()),this.isSearchAfterRedirect=!0}},setElementValue:function(e,t){null!=e&&"*"!=t&&(e.value=t)},setFacetsBeforeSearch:function(e){this.params.page=1;if(void 0===e||this.helpers.isEmpty(e))if(null!==this.initFacets){for(var t in this.facets)void 0!==this.initFacets[t]?this.facets[t]=this.initFacets[t]:this.facets[t]=[];this.params.facets=this.facets}else for(var t in this.facets)this.facets[t]=[];else for(var t in e)this.facets[t]=[],this.facets[t]=e[t]},processSearchOnLoadOrStateChange:function(){if((!this.queryIsNullOrEmpty()||this.allowSearchWithoutSearchword)&&(this.isSearchResultPage||this.isOverlaySearch)&&this.showSearchPage){for(var e=0,t=this.searchInputsLength;e<t;e++){var r=this.getSearchComponentsObject(this.searchComponentsKeys[e]);this.setElementValue(r.searchBoxInput,this.params.query),null!=r.searchBoxClearButton&&""!==this.params.query&&this.helpers.removeClass(r.searchBoxClearButton,"cludo-hidden")}this.isSearchAfterRedirect=!0,this.facets=this.params.facets,this.browserSupportsHistoryApi()&&this.updateCludoHistoryState(history.state,this.isSearchAfterRedirect?this.params:null),this.isOverlaySearch&&!this.isSearchResultPage&&this.overlayOpenModalWithSearch(),this.endlessScroll?this.doSearchWithDelay(1,this.params.page,!0):this.doSearch(!0)}},addEvent:function(e,t,r){this.callback=function(e){return function(t){e[r](t)}}(this),e[this.eventHandler.attach](this.eventHandler.on+t,this.callback,!0)},addEventAndRemove:function(e,t,r){this.callback=function(a){return function(s){e[a.eventHandler.detach](a.eventHandler.on+t,a.callback,!0),a[r](s)}}(this),e[this.eventHandler.attach](this.eventHandler.on+t,this.callback,!0)},searchBoxInputEvents:function(e){this.addEvent(e,"focus","searchBoxInputFocusEvent"),this.addEvent(e,"blur","searchBoxInputBlurEvent"),this.addEvent(e,"keyup","searchBoxInputKeyupEvent"),this.addEvent(e,"input","searchBoxInputEvent"),this.addEvent(e,"keydown","searchBoxInputKeydownEvent")},searchBoxEvents:function(e){this.addEvent(e,"click","searchBoxClickEvent")},searchBoxClearEvents:function(e){this.addEvent(e,"click","searchBoxClearClickEvent")},searchBoxVoiceEvents:function(e){this.addEvent(e,"click","searchVoiceButtonClickEvent")},searchBoxWrapperEvents:function(e){this.addEvent(e,"blur","searchBoxWrapperBlurEvent")},searchBoxWrapperBlurEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=t.querySelectorAll("input[type=text]")[0]||t.querySelectorAll("input[type=search]");r&&this.updateInputOnBlur&&(r.value=""===this.params.query||"*"===this.params.query?this.initSearchBoxText:this.params.query),this.disableAutocomplete||this.autocompleteRestore(),e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchBoxInputFocusEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=this.getSearchComponentsObjectFromSearchInputElement(t),a=0;null!=r.searchBoxFacets?this.setAutocompleteFilters(r.searchBoxFacets):this.activeAutocompleteFilters=null,this.disableAutocomplete||this.autocompleteRestore(),0===this.websiteSettings.length?this.getWebsiteSettings(t):this.showInstantSuggestions&&""==t.value&&this.setInstantSuggestions(t),t.value=t.value===this.initSearchBoxText?"":this.params.query,void 0!==t.selectionStart&&(a=0===t.selectionStart?t.value.length:t.selectionStart),void 0!==t.setSelectionRange&&t.setSelectionRange(a,a),e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchBoxInputBlurEvent:function(e){((e=e||window.event).currentTarget||e.srcElement).value=""===this.params.query||"*"===this.params.query?this.initSearchBoxText:this.params.query,e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchBoxInputEvent:function(e){e&&(this.usingOnChange=!0,this.handleSearchBoxInputChangeEvent(e))},searchBoxInputKeyupEvent:function(e){!1===this.usingOnChange&&this.handleSearchBoxInputChangeEvent(e)},handleSearchBoxInputChangeEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=this.getSearchComponentsObjectFromSearchInputElement(t),a=this.helpers.getKey(e);this.params.query=this.helpers.stripHtmlTags(t.value),this.disableAutocomplete||a==this.helpers.ENTER||a==this.helpers.DOWN||a==this.helpers.UP||a==this.helpers.ESC||a==this.helpers.TAB?a===this.helpers.ESC&&(this.isOverlaySearch&&this.elemOverlaySearch.overlay?this.overlayCloseModalWithSearch():this.disableAutocomplete||this.autocompleteRestore()):this.autocomplete(t),void 0!==r.searchBoxClearButton&&(""!==this.params.query?this.helpers.removeClass(r.searchBoxClearButton,"cludo-hidden"):this.helpers.addClass(r.searchBoxClearButton,"cludo-hidden")),e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchBoxInputKeydownEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=this.helpers.getKey(e);this.hideAutocomplete=!1,r!==this.helpers.ENTER&&r!==this.helpers.DOWN&&r!==this.helpers.UP||this.autocompleteKeyDownEvent(r,t,e),e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchBoxClickEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=this.getSearchComponentsObjectFromSearchBoxButton(t);if(this.disableAutocomplete||this.autocompleteRestore(),this._handleQuickLinks())return e&&e.preventDefault?e.preventDefault():e.returnValue=!1,void(e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0);this.setFacetsBeforeSearch(r.searchBoxFacets),this.isOverlaySearch&&this.overlayOpenModalWithSearch(),this.resetFiltersBeforeSearch&&(this.params.filters={}),this.setInputTypeAndSearch(this.inputTypeStandardKey),e&&e.preventDefault?e.preventDefault():e.returnValue=!1,e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchBoxClearClickEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement;if(this.getSearchComponentsObjectFromSearchBoxClearButton(t).searchBoxInput.value="",this.params.query="",this.elemSearchResults.banner&&(this.elemSearchResults.banner.innerHTML=""),this.elemSearchResults.didYouMean&&(this.elemSearchResults.didYouMean.innerHTML=""),this.elemSearchResults.filters)for(var r=0;r<this.elemSearchResults.filters.length;r++)this.elemSearchResults.filters[r].innerHTML="";if(this.elemSearchResults.relatedSearches)for(r=0;r<this.elemSearchResults.relatedSearches.length;r++)this.elemSearchResults.relatedSearches[r].innerHTML="";this.elemSearchResults.resultCount&&(this.elemSearchResults.resultCount.innerHTML=""),this.elemSearchResults.results&&(this.elemSearchResults.results.innerHTML=""),this.endlessScrollElements.loadMore&&this.helpers.addClass(this.endlessScrollElements.loadMore,"cludo-hidden"),this.endlessScrollElements.backToTop&&(this.helpers.removeClass(this.endlessScrollElements.backToTop,"cludo-opacity1"),this.helpers.addClass(this.endlessScrollElements.backToTop,"cludo-opacity0")),this.helpers.addClass(t,"cludo-hidden"),e&&e.preventDefault?e.preventDefault():e.returnValue=!1,e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchVoiceButtonClickEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=this.getSearchComponentsObjectFromSearchVoiceButton(t).searchBoxInput,a=r.placeholder,s=this.helpers.isBrowserSafari();if(this.params.query="",this.setElementValue(r,""),"webkitSpeechRecognition"in window&&this.enableVoiceSearch){var l=new webkitSpeechRecognition;if(l.continuous=s,l.interimResults=!0,l.lang=this.translateProvider.language,this.voiceGrammar&&l.grammars){var i=this.helpers.buildRecognitionGrammar(this.voiceGrammar);l.grammars=i}l.start(),final_transcript="",function(e){var i;endSpeechAndSearch=function(i){i&&(s&&(i=e.helpers.removeDuplicateTranscript(i)),i=e.helpers.stripSpecialChars(i),e.params.query=i,r.placeholder=a,e.setFacetsBeforeSearch(r.searchBoxFacets),e.resetFiltersBeforeSearch&&(e.params.filters={}),e.isOverlaySearch&&e.overlayOpenModalWithSearch(),e.setElementValue(r,i),e.setInputTypeAndSearch(e.inputTypeVoiceKey)),l.stop(),t.classList.remove("cludo-voice-active")},l.onstart=function(e){i=setTimeout(endSpeechAndSearch,5e3,null),t.classList.contains("cludo-voice-active")||t.classList.add("cludo-voice-active")},l.onresult=function(e){for(var t="",a=e.resultIndex;a<e.results.length;++a)e.results[a].isFinal?(final_transcript=e.results[a][0].transcript,endSpeechAndSearch(final_transcript)):(t+=e.results[a][0].transcript,r.placeholder=t,i&&clearTimeout(i),i=setTimeout(endSpeechAndSearch,2e3,t))},l.onspeechend=function(e){t.classList.remove("cludo-voice-active"),i&&clearTimeout(i)},l.onerror=function(e){t.classList.remove("cludo-voice-active"),i&&clearTimeout(i),"aborted"!==e.error&&console.log("CludoJS Error: Voice recognition failed: ",e)}}(this)}},searchResultsEvents:function(){this.registerClickTrackingEvents(),this.didYouMeanEvents(),this.searchFacetsEvents(),this.paginationEvents(),this.removeFocusOnMouseClick(),this.registerRelatedSearchesClickEvents(),this.facetAttributeEvents(this.elemSearchResults.results)},registerRelatedSearchesClickEvents:function(){if(this.elemSearchResults.relatedSearches&&this.elemSearchResults.relatedSearches.length>0&&this.elemSearchResults.relatedSearches[0].querySelectorAll){for(var e=this,t=[],r=0;r<this.elemSearchResults.relatedSearches.length;r++){var a=this.elemSearchResults.relatedSearches[r].querySelectorAll("a");Array.prototype.push.apply(t,a)}for(r=0;r<t.length;r++){t[r].addEventListener("click",(function(t){t.preventDefault();var r=t.target.attributes["data-relatedsearch"];if(r){var a=r.value;e.params.query=a,e.elemOverlaySearch&&e.elemOverlaySearch.searchBoxContentInput&&(e.elemOverlaySearch.searchBoxContentInput.value=a),e.setInputTypeAndSearch(e.inputTypeStandardKey),e.trackRelatedSearchClickEventHandler(a)}return!1}))}}},registerClickTrackingEvents:function(){if(this.elemSearchResults.results.querySelectorAll){var e,t,r,a,s,l=Array.prototype.slice.call(this.elemSearchResults.results.querySelectorAll("a")),i=Array.prototype.slice.call(document.querySelectorAll("[data-cludo-banner-location=outside] a")),o=this;l=Array.prototype.concat.call(l,i);for(var n=0;n<l.length;n++)t=(e=l[n]).href,e.getAttribute("data-page")||t&&t.length>0&&(o.helpers.closest(e,"[data-cludo-result=banner]")&&(a=null!==e.getAttribute("title")?e.getAttribute("title"):""!==e.innerText?e.innerText:o.helpers.closest(e,"[data-cludo-result=banner]").getAttribute("data-cludo-title"),s=o.helpers.closest(e,"[data-cludo-result=banner]").getAttribute("data-cludo-id"),e.setAttribute("data-cludo-result","banner"),e.setAttribute("data-cludo-index",1),e.setAttribute("data-cludo-object-id",s),e.setAttribute("data-cludo-title",a),-1!==decodeURIComponent(t).indexOf("#?"+o.paramsPrefix)&&e.addEventListener("click",(function(e){e.preventDefault(),o.linkToSearchClickEvent(this)}))),r=o.helpers.getURLParam(o.getQueryParameterVariableName("page")),e.setAttribute("data-cludo-page",r),e.addEventListener("click",this),o.addEvent(e,"keyup","searchResultKeyUpEvent"))}},handleEvent:function(e){switch(e.type){case"click":this.searchResultTrackClickEventHandler(e,e.currentTarget,this)}},searchResultTrackClickEventHandler:function(e,t,r){var a=!1;return e.preventDefault(),(e.ctrlKey||e.metaKey)&&(a=!0),r.trackClickEventHandler(t,a),!1},searchResultClickEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement,r=e.metaKey&&this.helpers.isMac()||e.ctrlKey&&!this.helpers.isMac()?"_blank":t.target;t.setAttribute("target",r),"_blank"===r&&t.setAttribute("rel","noopener"),this.trackClickEventHandler(t),e&&e.preventDefault?e.preventDefault():e.returnValue=!1,e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},searchResultKeyUpEvent:function(e){var t=(e=e||window.event).currentTarget||e.srcElement;this.helpers.getKey(e)===this.helpers.TAB&&(this.resultItemCurrentlyFocusedElement=t,this.userIsUsingTabulator=!0),e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!1},searchFacetsEvents:function(){if(null!==this.elemSearchResults.filters)for(var e=0,t=this.elemSearchResults.filters.length;e<t;e++){var r=this.elemSearchResults.filters[e];r.setAttribute("aria-label","search-filters");for(var a=r.querySelectorAll("LI"),s=0,l=a.length;s<l;s++){var i=a[s],o=i.querySelector("a"),n=this.translateProvider.translate("template_all_results");o&&(n=o.getAttribute("data-facet")),i.setAttribute("aria-label",n),function(e){a[s].onclick=function(t){if("A"==((t=t||window.event).target||t.srcElement).nodeName){t&&t.stopPropagation?t.stopPropagation():event.cancelBubble=!0,t&&t.preventDefault?t.preventDefault():t.returnValue=!1;var r=this.querySelector("a");if(null!=r){var a=null!==r.getAttribute("data-facet-name")?r.getAttribute("data-facet-name"):"Category",s=r.getAttribute("data-facet"),l=null!==r.getAttribute("data-multifacet")&&r.getAttribute("data-multifacet");e.facet(a,s,l)}}}}(this)}}},facetAttributeEvents:function(e){if(e)for(var t=e.querySelectorAll("a[data-facet-name]"),r=0;r<t.length;r++){var a=t[r];!function(e){a.onclick=function(t){t.preventDefault(),t.stopPropagation();var r=null!==this.getAttribute("data-facet-name")?this.getAttribute("data-facet-name"):"Category",a=this.getAttribute("data-facet"),s=null!==this.getAttribute("data-multifacet")&&this.getAttribute("data-multifacet");e.facet(r,a,s)}}(this)}},linkToSearchClickEvent:function(e){var t=e.getAttribute("href"),r="_blank"===e.getAttribute("target");t&&!r&&(window.location=t,window.location.reload())},didYouMeanEvents:function(){null!==this.elemSearchResults.didYouMean&&function(e){e.elemSearchResults.didYouMean.onclick=function(t){(t=t||window.event)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t&&t.preventDefault?t.preventDefault():t.returnValue=!1,e.setDidYouMean()}}(this)},paginationEvents:function(){if(this.totalDocuments>0)for(var e=this.elemSearchResults.results.querySelectorAll(".search_page_list"),t=0,r=e.length;t<r;t++)for(var a=e[t].querySelectorAll("LI"),s=0,l=a.length;s<l;s++)!function(e){a[s].onclick=function(t){if((t=t||window.event)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t&&t.preventDefault?t.preventDefault():t.returnValue=!1,null!=this.querySelector("a")){var r=this.querySelector("a").getAttribute("data-page");e.page(r,!0)}}}(this)},removeFocusOnMouseClick:function(e){if(document.querySelectorAll){var t=this.getResultWrapperContainer();if(!t)return;var r=t.querySelectorAll("a,button");for(var a in r)r[a].onmousedown=function(){this.blur(),this.hideFocus=!0,this.style.outline="none"},r[a].onmouseup=function(){this.blur(),this.hideFocus=!1,this.style.outline=null}}},autocomplete:function(e){var t=this,r=0;this.searchQueryLength=t.params.query.replace(/\s/g,"").length,!this.searchQueryLength||this.searchQueryLength<this.autocompleteMinimumQueryLength?this.autocompleteRestore():this.searchQueryLength<=2?(this.timeoutId=null,this.autocompleteDoRequest(e)):this.searchQueryLength&&(r=this.searchQueryLength>5?300:Math.floor(300*this.searchQueryLength/8,1e3),null!==this.autocompleteResponseData&&(this.autocompleteResponseData.query=this.params.query,this.autocompleteTemplate(this.autocompleteResponseData,e,!0)),clearTimeout(t.timeoutId),this.timeoutId=setTimeout((function(){t.timeoutId=null,t.searchQueryLength&&(t.params.query=t.helpers.removeUnsafeCharacters(t.params.query),t.autocompleteDoRequest(e))}),r))},autocompleteDoRequest:function(e){var t=this,r=t.params.filters,a="";""!==t.params.query&&(this.lastAcQuery=t.params.query,t.richAutocomplete?(this.activeAutocompleteFilters&&(t.params.filters=this.activeAutocompleteFilters),a=t.searchApiUrl+"/"+t.customerId+"/"+t.engineId+"/"+t.autoCompleteControllerAction,t.params.text=t.params.query,t.httpRequest("POST",a,"autocompleteTemplate",e),t.params.filters=r):(a=t.searchApiUrl+"/"+t.customerId+"/"+t.engineId+"/"+t.autoCompleteControllerAction,a+="?text="+encodeURIComponent(t.params.query),t.helpers.isEmpty(t.params.filters)||(void 0!==t.params.filters.DomainName&&(a+="&filters[DomainName]="+encodeURIComponent(t.params.filters.DomainName)),void 0!==t.params.filters.Language&&(a+="&languages="+encodeURIComponent(t.params.filters.Language))),!0===t.params.enablesa&&(a+="&enablesa=true"),t.httpRequest("GET",a,"autocompleteTemplate",e)))},autocompleteRestore:function(){!0!==this.debug&&(this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.helpers.removeElement("autocomplete_hint"),this.helpers.removeElement("search_autocomplete"),this.helpers.removeAttributesWithSelector("aria-describedby","autocomplete_hint"),this.selectedIndex=-1)},facet:function(e,t,r){if(null===t||"null"===t)this.params.facets[e]=[];else{if(!this.applyMultiLevelFacets)for(var a in this.facets)this.facets.hasOwnProperty(a)&&!r&&(this.params.facets[a]=[]);if(r){var s=this.params.facets[e].indexOf(t);s>-1?this.params.facets[e].splice(s,1):this.params.facets[e].push(t)}else this.params.facets[e][0]=t}this.endlessScroll&&this.jumpToTopOnFacetClick&&this.endlessScrollBackToTopClickEvent(),this.resetFiltersBeforeSearch&&(this.params.filters={}),this.page(1,this.jumpToTopOnFacetClick)},clearFacet:function(e,t){var r=this.facets[e].indexOf(t);r>-1&&this.facets[e].splice(r,1),this.jumpToTopOnFacetClick&&window.scrollTo(0,0),this.search()},clearAllFacets:function(){for(var e in this.facets)this.facets[e]=[]},clearAllFacetsAndSearch:function(){this.clearAllFacets(),this.jumpToTopOnFacetClick&&window.scrollTo(0,0),this.search()},filter:function(e,t){this.params.filters[e]=t,this.endlessScroll&&this.jumpToTopOnFacetClick&&this.endlessScrollBackToTopClickEvent(),this.page(1,this.jumpToTopOnFacetClick)},clearAllFilters:function(){this.params.filters={},this.jumpToTopOnFacetClick&&window.scrollTo(0,0),this.search()},clearAllFacetsAndFilters:function(){for(var e in this.facets)this.facets[e]=[];this.clearAllFilters()},setSortOrder:function(e,t){this.params.sort[e]=t,this.page(1,!1)},clearSortOrder:function(){}