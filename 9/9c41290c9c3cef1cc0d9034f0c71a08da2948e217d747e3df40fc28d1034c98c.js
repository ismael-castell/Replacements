!function(){function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r||e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}return e}()({1:[function(e,t,r){t.exports={TOKEN:"Zjfthbrrsichc9XQLsugBC7XiWJ6Ckn3R0tbZOCiC3MOcHPbYj55mEfZSTPKsuzU"}},{}],2:[function(e,t,r){var n,o=e("./log"),i={};t.exports={activate:function(){n=setTimeout(function(){var e="embed script did not finish in 30s Zjfthbrrsichc9XQLsugBC7XiWJ6Ckn3R0tbZOCiC3MOcHPbYj55mEfZSTPKsuzU ";e+=window.location.href,o.warn(e,i)},3e4)},clear:function(){clearTimeout(n)},setDebugData:function(e,t){i[e]=t}}},{"./log":8}],3:[function(e,t,r){!function(){function t(){var e=["rcrsv-env-override","rcrsv-env-ui-override-timeout","rcrsv-ui-options-override","rcrsv-ui-override"];e.forEach(function(e){I.remove(e)})}function r(e){V=!0;var t=!1;"api"==T?(window.RcrsvAPI||window.CwmnAPI?(m.debug("API loaded"),window.RcrsvAPI||(window.RcrsvAPI=window.CwmnAPI)):t=!0,z.forEach(function(e){e(t)})):m.debug("Embed loaded"),"error"==e.type?m.error("failed to load ui script",e.target.src,Y):t&&m.error("RcrsvAPI script loaded but RcrsvAPI is not available",Y)}function n(e,t){t=u(t),V=!1;var r="/verify";m.debug("Requesting embed."),w.setDebugData("checkpoint",5);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){w.setDebugData("checkpoint",7);var e=JSON.parse(n.responseText);if(e.error)"inactive_token"===e.error?m.debug("inactive_token"):m.error(e.error,Y),w.clear();else{R=e.env,T=e.ui;var t="";try{t=JSON.parse(decodeURIComponent(L))}catch(r){m.error("Invalid embed url",L)}if("retriever"===T){if(window===window.top)return m.warn("Attempting to embed retriever outside of an iframe. Disabling Script"),void w.clear()}else if(window!=window.top&&"yes"!=U)return m.warn("Inside iframe - not loading embed"),void w.clear();var o=K?e.multiTabMode:"none";if(window.RcrsvConfig={audioStart:e.audioStart,audioVideoMode:e.audioVideoMode,authToken:e.authToken,authorizedDomains:e.authorizedDomains,domain:e.domain,embedId:e.embedId,embedUrl:t,enableAmazonConnectDemo:e.enableAmazonConnectDemo,env:e.env,ipAddress:e.ipAddress,multiTabMode:o,scriptURL:e.scriptURL,storageIframeAvailable:K,thirdPartyCookiesBlocked:X,ui:e.ui,uiOptions:H,videoMode:e.videoMode,visitorId:N,widgetOptions:e.widgetOptions},e.enableKeyboardShortcuts){var i=e.keyboardShortcutsConfig;if("object"!=typeof i)throw m.error("invalid keyboardShortcutsConfig",i),new Error("invalid keyboardShortcutsConfig value");f(i)}w.setDebugData("checkpoint",8),a(e.scriptURL,e.env,e.ui),w.clear()}}else m.error("Error getting embed. http code",n.status,Y),w.clear()},e?(D=e,H=t,r="/verifyAndChangeUi"):o();var i=M+r+"?env="+encodeURIComponent(C)+"&ui="+encodeURIComponent(D)+"&token="+encodeURIComponent(k)+"&domain="+$;n.open("GET",i,!0),n.send(null),w.setDebugData("checkpoint",6)}function o(){var e=I.get("rcrsv-ui-override"),r=I.get("rcrsv-env-override"),n=I.get("rcrsv-env-ui-override-timeout"),o=I.get("rcrsv-ui-options-override"),a=(new Date).getTime(),u=!1;x.rcrsvUI||x.rcrsvEnv?(x.rcrsvUI&&(D=x.rcrsvUI),x.rcrsvEnv&&(C=x.rcrsvEnv),H=null,I.set("rcrsv-ui-override",D),I.set("rcrsv-env-override",C),I.remove("rcrsv-ui-options-override"),u=!0):a&&a<n||i()?(e&&(D=e,o&&(H=o)),r&&(C=r)):t(),u&&s()}function i(){var e=["init","incompatible browser","no session","unauthorized"];return"object"==typeof RcrsvAPI&&e.indexOf(RcrsvAPI.getCurrentState())===-1}function a(e,t,n){if(m.debug("Embedding "+n+" from "+t),B=n,q=t,"none"!=n){var o=document.createElement("script"),i=document.head||document.querySelector("head");o.onload=r,o.onerror=r,o.defer=!0,o.src=e,i.appendChild(o)}}function s(){I.set("rcrsv-env-ui-override-timeout",(new Date).getTime()+18e5)}function u(e){return e=e||{},e=A(e,{destroyOnSessionEnd:!1,preserveCurrentUi:!1})}function c(e,t){if(t=u(t),m.debug("handleChangeUi",e,t),e===B)return m.debug("ui=currentUi, taking no action"),j.resolve();if(i())return m.warn("cannot change widgets in state",RcrsvAPI.getCurrentState(),"state must be 'no session'"),j.reject(new Error("cannot change widget while in session"));var r=["agent-comprehensive","record","retriever"];if(r.indexOf(B)!==-1)return m.warn("cannot switch UI",B),j.reject(new Error("cannot switch incompatible UI"));if(I.set("rcrsv-ui-override",e),I.set("rcrsv-ui-options-override",t),s(),"none"!==B&&!t.preserveCurrentUi){var o=RcrsvWidgets[B];o&&(m.debug("destroy existing widget",B),o.destroy())}if(RcrsvWidgets[e])return m.debug("switching to loaded widget",e),B=e,H=t,j.resolve();n(e,t);var a=["realtime-join-code-bottom-bar","replay-ticket","zen-hydra"];return a.indexOf(e)!==-1?new j(function(t){var r=setInterval(function(){RcrsvWidgets[e]&&(clearInterval(r),clearTimeout(n),t())},500),n=setTimeout(function(){m.warn("widget-page component has not loaded after 15s")},15e3)}).then(function(){return new j(function(t){m.debug("widget",e,"loaded"),RcrsvWidgets[e].once("ready",t)})}):j.resolve()}function f(e){if(!G){if("undefined"==typeof E)return void m.error("[rcrsv] Mousetrap not found, keyboard shortcuts disabled");G=!0,m.debug("enable keyboard shortcuts",e,typeof e);for(var t in e)if("string"==typeof t)if("pre_hydra_pro_keyboard_shortcuts"===t)m.debug("detected pre_hydra_pro_keyboard_shortcuts"),I.set("pre_hydra_pro_keyboard_shortcuts",!0);else{var r=e[t];m.debug("bind shortcuts to ui",r,t),E.bind(r,y.bind(null,t))}}}function l(){return I.get("rcrsv-ui-override-by-keyboard")}function p(){var e=setInterval(function(){"undefined"!=typeof RcrsvAPI&&(m.debug("[rcrsv] RcrsvAPI located, adding listener"),clearInterval(e),RcrsvAPI.on("end session",function(){m.debug("ui will close on next page load"),I.remove("rcrsv-ui-override"),I.remove("rcrsv-ui-override-by-keyboard")}))},500)}function y(e){m.debug("keyboard shortcut requesting ui",e),c(e,{destroyOnSessionEnd:!0,source:"keyboard"}).then(function(){I.set("rcrsv-ui-override-by-keyboard",!0)})["catch"](function(e){m.error(e)})}function h(){var e=[/action=cobrowsing/,/action=verify-profile/],t=window.location.href,r=!1;return e.forEach(function(e){t.match(e)&&(r=!0)}),r}function d(e){return I=new O(e),new j(function(e,t){I.load().then(e)["catch"](function(r){m.debug(r),m.debug("fallback to main tab storage"),X=!0,w.setDebugData("checkpoint",205),g().then(e)["catch"](t)})})}function g(e){return K=!1,I=new P(e),I.load()}function v(){var e={sitekey:k,url:window.location.href,visitorId:N};return e}function b(){m.debug("init"),w.setDebugData("checkpoint",2);var e,t=k+"_embed";h()?(m.debug("immediately falling back to same tab storage"),e=g(t)):e=d(t),e.then(function(){K?m.debug("loaded datastore from iframe"):m.debug("loaded datastore from main tab"),w.setDebugData("checkpoint",3);var e=!!I.get("rcrsv-herve-enabled");_.herveInit({store:I}),_.herveSetEnabled(e),m.debug("init herve"),w.setDebugData("checkpoint",4),n(),l()&&I.get("pre_hydra_pro_keyboard_shortcuts")&&(m.debug("pre hydra pro, listenForSessionEnd"),p())})["catch"](function(e){m.error(e,Y),w.clear()})}var m=e("./log");m.setLevel(m.levels.WARN);var w=e("./deadmanSwitch");w.activate(),w.setDebugData("checkpoint",0);var S=e("./constants"),A=e("defaults"),_=e("./herve"),E=e("./inc/mousetrap-noconflict"),x=e("query-string").parse(location.search),j=e("lie"),O=e("./storage-iframe-interface"),P=e("./storage-maintab");if(window.RcrsvEmbed)return m.error("Another Recursive embed is already loaded - exiting."),void w.clear();var R,T,I,k=S.TOKEN,C="",D="",M="https://embed.rcrsv.io",U="no",L="%7B%22protocol%22%3A%22https%3A%22%2C%22slashes%22%3Atrue%2C%22auth%22%3Anull%2C%22host%22%3A%22embed.rcrsv.io%22%2C%22port%22%3Anull%2C%22hostname%22%3A%22embed.rcrsv.io%22%2C%22hash%22%3Anull%2C%22search%22%3A%22%3FshowOnlyWhenInSession%3Dtrue%22%2C%22query%22%3A%7B%22showOnlyWhenInSession%22%3A%22true%22%7D%2C%22pathname%22%3A%22%2FZjfthbrrsichc9XQLsugBC7XiWJ6Ckn3R0tbZOCiC3MOcHPbYj55mEfZSTPKsuzU%22%2C%22path%22%3A%22%2FZjfthbrrsichc9XQLsugBC7XiWJ6Ckn3R0tbZOCiC3MOcHPbYj55mEfZSTPKsuzU%3FshowOnlyWhenInSession%3Dtrue%22%2C%22href%22%3A%22https%3A%2F%2Fembed.rcrsv.io%2FZjfthbrrsichc9XQLsugBC7XiWJ6Ckn3R0tbZOCiC3MOcHPbYj55mEfZSTPKsuzU%3FshowOnlyWhenInSession%3Dtrue%22%7D",F="production",N=Math.random(),B="",q="",H=null,W=["production","ci"].indexOf(F)===-1||!!x.rcrsvDebug,Y=v(),$=window.location.hostname,G=!1,V=!1,z=[],K=!0,X=!1;W&&m.setLevel(m.levels.TRACE),window.RcrsvEmbed={changeUi:function(e,t){return c(e,t)},changeProduct:function(e,t){var r={realtime:"realtime-join-code-bottom-bar",relate:"realtime-join-code-bottom-bar",request:"replay-ticket"};if("string"==typeof r[e])return c(r[e],t);throw new Error("no_such_ui")},hydra:{requestEmbedFromHydra:function(e){return c(e)}},isLoaded:function(){return V},onload:function(e){z.push(e)},resetUi:function(){t(),n()},_herve:{setEnabled:function(e){return _.herveSetEnabled(e)},pageHasRendered:function(){return _.hervePageHasRendered()},getRender:function(){return _.herveGetRenderFromQueue()}}},window.RcrsvWidgets={},window.RcrsvTiming={embedStartTime:Date.now()},b()}()},{"./constants":1,"./deadmanSwitch":2,"./herve":4,"./inc/mousetrap-noconflict":7,"./log":8,"./storage-iframe-interface":9,"./storage-maintab":10,defaults:23,lie:93,"query-string":106}],4:[function(e,t,r){var n,o=e("./log"),i=!1,a=!1,s=3,u=!1;t.exports={herveInit:function(e){n=e.store,window.addEventListener("beforeunload",t.exports.herveLeavingPage)},getHerveQueue:function(){var e=n.get("rcrsv-herve-queue");return e?e:[]},setHerveQueue:function(e){n.set("rcrsv-herve-queue",e)},herveLeavingPage:function(){var e=t.exports.getHerveQueue();if(a&&!i&&!u){o.debug("[Rcrsv Herve] Leaving page - Saving render data"),u=!0;var r=document.documentElement.outerHTML,n=(new Date).getTime();for(r?e.push({dom:r,timestamp:n,pageXOffset:document.defaultView.pageXOffset,pageYOffset:document.defaultView.pageYOffset}):o.debug("[Rcrsv Herve] No HTML - not saving");e.length>s;)e.shift();t.exports.setHerveQueue(e),o.debug("[Herve] Render data saved successfully.")}},herveGetRenderFromQueue:function(){var e=t.exports.getHerveQueue(),r=e.shift();if(t.exports.setHerveQueue(e),r){var n=r.dom,o=document.createElement("html");o.innerHTML=n,r.clonedDom=o}return r},herveSetEnabled:function(e){a=!!e,n.set("rcrsv-herve-enabled",a),a||t.exports.setHerveQueue([])},hervePageHasRendered:function(){i=!0}}},{"./log":8}],5:[function(e,t,r){var n={};!function(e,t){e.prefix=t(e)}(n,function(e){"use strict";var t,r,n={template:"[%t] %l:",levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||"root"},timestampFormatter:function(e){return e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},o={},i={reg:function(e){if(!e||!e.getLogger)throw new TypeError("Argument is not a root logger");t=e},apply:function(e,r){if(!e||!e.setLevel)throw new TypeError("Argument is not a logger");var i=e.methodFactory,a=e.name||"",s=o[a]||o[""]||n;return o[a]||(e.methodFactory=function(e,t,r){var n=i(e,t,r),s=o[r]||o[""],u=-1!==s.template.indexOf("%t"),c=-1!==s.template.indexOf("%l"),f=-1!==s.template.indexOf("%n");return function(){for(var t="",i=arguments.length,l=Array(i),p=0;p<i;p++)l[p]=arguments[p];if(a||!o[r]){var y=s.timestampFormatter(new Date),h=s.levelFormatter(e),d=s.nameFormatter(r);s.format?t+=s.format(h,d,y):(t+=s.template,u&&(t=t.replace(/%t/,y)),c&&(t=t.replace(/%l/,h)),f&&(t=t.replace(/%n/,d))),l.length&&"string"==typeof l[0]?l[0]=t+" "+l[0]:l.unshift(t)}n.apply(void 0,l)}}),(r=r||{}).template&&(r.format=void 0),o[a]=function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(t in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],t)&&(e[t]=arguments[r][t]);return e}({},s,r),e.setLevel(e.getLevel()),t||e.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),e}};return e&&(r=e.prefix,i.noConflict=function(){return e.prefix===i&&(e.prefix=r),i}),i});var o=n.prefix;t.exports=o},{}],6:[function(e,t,r){var n={};!function(){}