/*! For license information please see cm-app.min.js.LICENSE.txt */
(()=>{var t,e,r={45137:t=>{t.exports={prefix:"bx-cm",selectorTabbable:"\n    a[href], area[href], input:not([disabled]):not([tabindex='-1']),\n    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),\n    textarea:not([disabled]):not([tabindex='-1']),\n    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]\n  ",selectorFocusable:"\n    a[href], area[href], input:not([disabled]),\n    button:not([disabled]),select:not([disabled]),\n    textarea:not([disabled]),\n    iframe, object, embed, *[tabindex], *[contenteditable=true]\n  "}},77681:(t,e,r)=>{"use strict";r.d(e,{Nd:()=>g,OJ:()=>h,Q7:()=>_,X0:()=>v,pi:()=>d,ss:()=>y,uf:()=>b});var n=r(85066),a=r.n(n),o=r(39982),i=r.n(o),s=r(82234),c=r(18012),l=r(1862),u=r(3479),p=r(93188),f=r(24256),m=r(1768),d=function(t){return{type:s.Z.ADAPTER.ADD,payload:t}};function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.configs,r=t.externalConfigs,n=void 0===r?[]:r;return function(t,r){if((0,f.hN)())return[];var o=r(),s=(0,u.X)(o);if(!e){var m=(0,u.cx)(o);e=(0,c.k2)({chatRoutings:m,reroutingInfo:s})}var _=(0,p.Kk)(p.I.EXTERNAL_CONFIG_KEY),h=[];_&&n.push(_),i()(n,(function(t){t&&!e.some((function(e){return e.queueType===t.queueType}))&&(e.push(t),h.push(t))}));var b=[];return e.forEach((function(t){var e=(0,l.tV)(r()),n=t.adapter||(0,c.bO)(t.service);if(n){var o=new n(t);if(e.some((function(t){return t.id===o.id})))o.close();else{var i=a()(h,(function(e){return t.queueType===e.queueType}));i&&i!==t&&o.changeConfig(i),o.init(),b.push(o)}}})),d.length&&t(d(b)),b}}function h(){return function(t,e){t(function(t){return function(e){t.length>0&&(t.forEach((function(t){return t.close()})),e({type:s.Z.ADAPTER.CLOSE,payload:t}))}}((0,l.tV)(e()).filter((function(t){return t.shouldClose()}))))}}function b(){return function(t,e){(0,l.tV)(e()).forEach((function(t){try{t.prepareChat()}catch(t){m.fF.error("Error preparing chat",t)}}))}}function g(t){return function(e){e({type:s.Z.CHAT.UPDATE_ADAPTER_STATE,payload:t})}}function y(t,e){return{type:s.Z.CHAT.UPDATE_ADAPTER_AGENT_STATUS,payload:{agentStatus:t,adapterId:e}}}function v(t,e){return{type:s.Z.ADAPTER.UPDATE,payload:{adapterId:t,info:e}}}},56629:(t,e,r)=>{"use strict";r.d(e,{$n:()=>st,Ad:()=>q,Ey:()=>pt,LV:()=>mt,Sh:()=>_t,V2:()=>et,VN:()=>$,__:()=>V,_c:()=>rt,ae:()=>ut,cv:()=>it,d:()=>K,id:()=>ot,qz:()=>dt,v1:()=>ft,x8:()=>nt});var n=r(54390),a=r(17253),o=r(55185),i=r(2588),s=r.n(i),c=r(19712),l=r.n(c),u=r(65689),p=r.n(u),f=r(54299),m=r.n(f),d=r(80185),_=r.n(d),h=r(69113),b=r.n(h),g=r(10052),y=r.n(g),v=r(20643),x=r.n(v),w=r(85066),k=r.n(w),E=r(98934),C=r.n(E),T=r(51351),I=r.n(T),S=r(84264),A=r.n(S),N=r(1768),O=r(1821),P=r(82234),D=r(62857),L=r(54329),R=r(57003),M=r(19187),X=r(3479),Z=r(31554),U=r(30800),H=r(59499),B=r(51733),F=r(45461),z=["customData"],j="PASS_DOWN_ERROR",Y=new Map,G=["contactInformationBundleKey","contactModuleTranslationKey"],W=["focusArea","regionCode","languageCode","variation"];function V(t){return G.forEach((function(e){t&&t[e]&&(t[e]=I()(t[e],W))})),{type:P.Z.CM_API.UPDATE_CONFIG,payload:t}}function K(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,n){return t||(t=(0,X.tI)(n())),(0,N.hV)(M.pu.CONFIRMATION_NUMBER)&&(e=!0),r(tt({actionType:P.Z.CM_API.INITIAL_LOOKUP,body:t,skipRules:e})).then((function(t){if(t!==j){var e;r((0,L.r2)(t.clientInfo));try{t.contactInformationBundles[0].schedulingInformation.map((function(n){e=(0,N.kN)(n),r((0,D.db)(e)),r((0,D.aW)({isDefault:!0,config:n,schedulerType:e})),((0,N.hV)(M.pu.CONFIRMATION_NUMBER)||(0,N.hV)(M.pu.SCHEDULER_FORM))&&r(Q(t,e))}))}catch(t){N.fF.log("CM-API no default scheduler")}r({type:P.Z.CM_API.INITIAL_LOOKUP,payload:{config:t}})}else{console.log("@cm-app: Invalid bundle.");var a=n();(0,N.xb)((0,X.h0)(a))&&!(0,B.yu)(a)&&(r((0,Z.nH)()),r((0,L.Vn)(!0)),(0,U.l6)(a)&&r((0,L.By)()))}})).catch((function(t){return N.fF.error("CM-API initial lookup error ",t)})).then((function(){return r(J())}))}}function q(t){return function(e,r){return t||(t=(0,H.oD)(r())),e(tt({body:(0,o.Z)({},t,{contactModuleTranslationKey:void 0,internationalDialingForLocale:t.schedulerTextTranslationsKey,schedulingClassificationsKey:C()(t.contactInformationBundleKey,"purpose")})})).then((function(t){var r;if(t!=j)try{e({type:P.Z.CM_API.INITIAL_LOOKUP,payload:{config:t}}),t.schedulingInformation.map((function(n){r=(0,N.kN)(n),e((0,D.db)(r)),e((0,D.aW)({isDefault:!0,config:n,schedulerType:r})),e(Q(t))}))}catch(t){N.fF.log("CM-API no default scheduler",t)}})).catch((function(t){return N.fF.error("No Scheduler Info found ",t)})).then((function(){return e(J())}))}}function J(){return function(t,e){var r=e(),n=N.HT?(0,H.oD)(r):(0,X.Mx)(r),a=(0,H.W8)(r);((0,N.xb)(a)||(0,H.Bh)(r)&&(0,N.xb)((0,H.nb)(r)))&&(N.HT||n&&(0,U.ke)(r)||(0,N.hV)(M.pu.CONFIRMATION_NUMBER)||(0,N.hV)(M.pu.SCHEDULER_FORM))&&(n&&!(0,N.xb)(n)?t(nt(n)):(N.HT||(0,N.hV)(M.pu.SCHEDULER_FORM))&&t((function(t,e){var r=(0,X.Ot)(e());return t(nt(r)).then((function(){var e=(0,N.kN)(r);t((0,D.aW)({config:r,schedulerType:e})),t((0,D.db)(e)),t(dt({data:{code:"SCH09"},reason:"no scheduler found",schedType:e}))}))})))}}function Q(t,e){return function(r){try{t.schedulerTextTranslations.map((function(n){var a=n.key,i=n.textFragments;"(default)"!==a.purpose&&(i=(0,o.Z)({},k()(t.schedulerTextTranslations,(function(t){return"(default)"===t.key.purpose&&t.key.variation===a.variation&&t.key.regionCode===a.regionCode&&t.key.languageCode===a.languageCode})).textFragments,i));var s=t.schedulingClassifications?t.schedulingClassifications:[],c=t.internationalDialing.internationalDialingCodes.filter((function(t){return t.regionCode===a.regionCode}))[0];r({type:P.Z.SCHEDULER.INFO_FETCHED,payload:{config:{key:a,text:i,cognitiveClassificationText:s,dialingCodes:t.internationalDialing,form:{dialingCode:c?"+"+c.internationalDialingCode:void 0}},schedulerType:e||(0,N.kN)(a)}})}))}catch(t){N.fF.warn("ACTIONS.SCHEDULER.INFO_FETCHED: got unexpected error",t)}}}function $(){return function(t){var e=F.dV.cm,r=e.paths.clientInfo,n={hosts:e.hosts,path:r,body:{}};return(0,N.el)(n).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t((0,L.r2)(e.clientInfo)),e.clientInfo}))}}function tt(t){var e=t.body,r=t.actionType,a=t.rules,i=t.skipRules,s=void 0!==i&&i;return function(t,i){var c=JSON.stringify(e),l=Y.get(c);if(l)return l;var u=F.dV.cm,p=u.paths.lookup;x()(e,"clientInfo.ipAddressRegistryCountryCode")||x()(e,"clientInfo.ipAddress")||(p=u.paths.lookupReqIpRouted),a&&(p="".concat(u.paths.lookupWithRules).concat(a)),s&&(p=u.paths.lookupSkipRules),N.HT&&(p=u.paths.lookupSchedLanding),y()(e,"contactInformationBundleKey.purpose");var f={type:"GET",hosts:u.hosts,path:[p,b()(p,"?")?"&":"?","body=",encodeURIComponent(JSON.stringify(e)),_()(e,"clientInfo.ipAddressRegistryCountryCode")||s||!_()(e,"contactInformationBundleKey")&&!_()(e,"schedulingInformationKey")?"":"&cacheStatus=bypass"].join(""),ajaxOpts:{contentType:"text/plain"}};r&&t({type:"".concat(r,"-PENDING"),payload:(0,o.Z)({body:e},f)});var d=(0,N.el)(f).then((0,n.Z)(A().mark((function e(){var r,n,a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},n=r.schedulingInformation||[],(a=r.contactInformationBundles)&&Array.isArray(a)&&a.forEach((function(t){t.schedulingInformation&&(n=n.concat(t.schedulingInformation))})),e.abrupt("return",Promise.all(n.filter((function(t){return!!t})).map((function(e){(N.KC||(0,H.Su)(i()))&&t(et(e)).then((function(t){m()(e,t)})).catch((function(t){N.fF.warn("Error populating availability for info:",e,t)}))}))).then((function(){return r})));case 5:case"end":return e.stop()}}),e)})))).catch((function(t){N.fF.log("CM-API-V3 lookup error:",t);var r=x()(t,"failures[0].status");if(r&&5===Math.floor(r/100))return(0,N.el)({hosts:F.Hv.cmApi.v2,path:p,body:e});throw t})).catch((function(e){return N.fF.log("CM-API lookup error :",e),r&&t({type:"".concat(r,"-ERROR"),payload:e}),j})).finally((function(){Y.delete(c)}));return Y.set(c,d),d}}var et=function(t){return function(){var e=(0,n.Z)(A().mark((function e(r){var n,a,i,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I()(t,["regionCode","languageCode","focusArea","purpose","clientTimezone"]),a=F.dV.cm,i=a.paths.schedAvailability,s={type:"GET",hosts:a.hosts,path:i+(0,N.Ie)(n),ajaxOpts:{contentType:"text/plain"}},c=(0,N.kN)(n),r({type:"".concat(P.Z.SCHEDULER.AVAILABILITY_FETCH,"-PENDING"),payload:{schedulerType:c}}),e.prev=6,e.next=9,(0,N.el)(s);case 9:return l=e.sent,r({type:P.Z.SCHEDULER.AVAILABILITY_FETCH,payload:(0,o.Z)({schedulerType:c},l)}),delete l.availableSlotDetails,e.abrupt("return",l);case 15:throw e.prev=15,e.t0=e.catch(6),N.fF.warn("Error fetching sched availability: ",e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}()};function rt(t){var e=t.focusArea,r=t.regionCode,n=t.languageCode;return function(t,a){var i=a(),s=(0,X.tI)(i),c=s.contactInformationBundleKey||{},l=(0,N.xb)((0,X.Xj)(i))?s:{};if(l.contactInformationBundleKey={focusArea:e||c.focusArea,languageCode:n||c.languageCode||"en",regionCode:r||c.regionCode||"US"},e!==c.focusArea){var u=s.regionsAndLanguagesForLocale||{languageCode:"local",regionCode:"local"};l.regionsAndLanguagesForLocale=(0,o.Z)({},u,{focusArea:e})}t(V(l)),t(K(l,!0))}}function nt(t){return function(e,r){if(t||(t=(0,H.oD)(r()),!(0,N.xb)(t))){var n={languageCode:t.languageCode,regionCode:t.regionCode,variation:t.focusArea||t.variation},a={schedulerTextTranslationsKey:n,internationalDialingForLocale:n};if("Yes"===t.cognitiveRouting){var o={languageCode:t.languageCode,regionCode:t.regionCode,focusArea:t.focusArea||t.variation};a.schedulingClassificationsKey=o}return e(tt({actionType:P.Z.SCHEDULER.INFO_FETCHED,body:a,skipRules:!0})).then((function(t){t!=j&&e(Q(t))}))}}}function at(t){return function(e){var r=t.resource;t.focusArea=t.focusArea||t.variation;var n=(0,N.kN)(t);delete t.resource;var a={schedulingInformationKey:t};return e(tt({actionType:P.Z.SCHEDULER.UPDATE_CONFIG,body:a,skipRules:!0,schedulerType:n})).then((function(t){if(t==j)throw new Error("fetchSchedulerConfig error");if(r)try{t.schedulingInformation[0].resource=r}catch(t){N.fF.warn("Couldn't update scheduler resource")}e((0,D.aW)({config:t.schedulingInformation[0],schedulerType:n}))}))}}function ot(t){return function(e,r){var n=(0,o.Z)({},(0,X.Pg)(r()),t),a=(0,N.kN)(n);return e((0,D.db)(a)),e((0,D.j5)(!0)),Promise.all([e(nt(n)),e(at(n))]).catch((function(t){N.fF.warn("fetchSpecificScheduler error :",t),(0,X.Mx)(r())?(e((0,D.db)()),e((0,D.j5)(!0))):e((0,D.j5)(!1))}))}}function it(t){return function(e,r){var n=r(),a=(0,H.z$)(n),i={type:"POST",timeout:45e3,contentType:"application/json; charset=utf-8",url:"".concat(F.Hv.bot.main,"/v2/feedback"),data:(0,o.Z)({},a,{isValid:t})};return e({type:P.Z.SCHEDULER.COGNITIVE_FEEDBACK}),(0,N._G)(i).catch((function(t){N.fF.warn("cognitive feedback api error: ",t)})).then((function(t){return t}))}}function st(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UMX Scheduler";return function(r,n){t||(t=(0,H.MT)(n()));var a={context:{product:e},input:{text:t}};return r(ct({hosts:F.Hv.bot.main,path:"/v2/message",actionType:P.Z.SCHEDULER.COGNITIVE_CLASSIFICATION,data:a}))}}function ct(t){return function(e,r){var n={type:"POST",timeout:45e3,contentType:"application/json; charset=utf-8",url:t.hosts+t.path,data:JSON.stringify(t.data)};return t.data&&"string"!=typeof t.data&&(t.data=JSON.stringify(t.data)),t.actionType&&e({type:"".concat(t.actionType,"-PENDING"),payload:{config:n}}),(0,N._G)(n).catch((function(r){e({type:"".concat(t.actionType,"-ERROR")}),N.fF.warn("cognitive messaging api error: ",r)})).then((function(n){if(n){var a=r(),o=(0,H.nb)(a),i=n.context.label,s=o.filter((function(t){return t.classification==i}));if(!n.error&&i&&"Anything Else-"!==i&&0!=s.length)return t.onSuccess&&t.onSuccess(n),t.actionType&&e({type:"".concat(t.actionType),payload:{data:n}}),n;e({type:"".concat(t.actionType),payload:{data:null}})}}))}}function lt(t){return function(e){var r={type:t.method,hosts:F.dV.scheduler.hosts,path:F.dV.scheduler.apiParams+t.path,body:t.params,timeout:2e4,series:Boolean(t.series),auth:!0};return t.actionType&&e({type:"".concat(t.actionType,"-PENDING"),payload:{config:r,schedulerType:t.schedulerType}}),(0,N.el)(r).catch((function(r){t.actionType&&e({type:"".concat(t.actionType,"-ERROR"),payload:r}),e(dt({data:{code:"SCH02"},schedulerType:t.schedulerType})),N.fF.warn("callSchedApi error: ",r)})).then((function(r){if(r)if((0,N.hV)(M.pu.ERROR_CODE))e(dt({data:{code:(0,N.Wz)(M.pu.ERROR_CODE)},schedulerType:t.schedulerType}));else{if(!r.error)return t.onSuccess&&t.onSuccess(r),t.actionType&&e({type:"".concat(t.actionType),payload:{data:r,schedulerType:t.schedulerType}}),r;e(dt({data:r,schedulerType:t.schedulerType}))}}))}}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.customData,r=(0,a.Z)(t,z);return function(t,n){var a=n();if(!(0,H.Yu)(a))return t((0,D.c7)({id:"showInvalid",value:!1})),t((0,D.c7)({id:"showInvalid",value:!0})),Promise.reject("Scheduler cannot yet submit");var i=(0,H.oD)(a),c=(0,H.$S)(a),u=c.confirmationNumber,f=(0,H.Lb)(a);if(!f)return Promise.reject("No slot selected");var m=(0,H.XG)(a)||p()(f.availableAgentsArr),d=(0,H.K5)(a),_={params:(0,o.Z)({numberOfAttendees:"1",cognitiveFilterIntent:(0,H.EU)(a)||null,clientTimezone:d,expertId:m,selectedExpert:m,startDateTime:(0,N.vd)(f.slotStartMillis,d),endDateTime:(0,N.vd)(f.slotEndMillis,d),clientFirstName:(0,H.b)(a),clientLastName:(0,H.wy)(a),clientQuestion:(0,H.MT)(a),clientCompany:(0,H.tI)(a),clientPhone:(0,H.gT)(a),clientEmail:(0,H.g6)(a),stateOrProvince:(0,H.Tb)(a),focusArea:i.focusArea,languageCode:i.languageCode,regionCode:i.regionCode,purpose:i.purpose,url:c.url||window.location.href,clientDialingCountryCode:(0,H.Ng)(a),productName:c.productName||(0,O.em)(),topic:(0,H.gi)(a)||null,phoneConsent:(0,H.vX)(a),emailConsent:(0,H.m4)(a),consentCountry:(0,H.es)(a),ibmId:(0,O.l9)()||null,bluemixAnonId:(0,O.qy)()||null,uniquePageId:(0,O.Ah)()||null,customData:JSON.stringify(e)},(0,N.YA)(),r),method:u?"PUT":"POST",path:"/appointments/".concat(u||""),series:!0};return _.params=l()(_.params,s()),t({type:"".concat(P.Z.SCHEDULER.BOOK_APPOINTMENT,"-PENDING"),payload:_}),t(lt(_)).then((function(e){e&&!e.error&&(t({type:P.Z.SCHEDULER.BOOK_APPOINTMENT,payload:e}),t(pt(e.confirmationNumber)),t({type:P.Z.SCHEDULER.SAVE_COMPLETE}))}))}}function pt(t){return function(e,r){var a={method:"GET",path:"/appointments/lookup/".concat(t),actionType:P.Z.SCHEDULER.APPOINTMENT_FETCH};e(lt(a)).then(function(){var t=(0,n.Z)(A().mark((function t(n){var a,o,i,s;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,N.xb)((0,H.oD)(r()))){t.next=4;break}return a=n.focusArea,o=n.regionCode,i=n.languageCode,s=n.purpose,t.next=4,e(ot({focusArea:a,regionCode:o,languageCode:i,purpose:s}));case 4:e(n?(0,D.lH)(R.fh.DETAILS):(0,D.hM)());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}function ft(t){return function(e){var r={method:"DELETE",path:"/appointments/".concat(t),actionType:P.Z.SCHEDULER.CANCEL_APPOINTMENT,series:!0};return e(lt(r)).then((function(t){if(!t||"SUCCESS"!=t.result)throw t;e((0,D.lH)(R.fh.CANCELLATION_SURVEY))})).catch((function(t){N.fF.log("apiActions cancelAppointment: error",t)}))}}function mt(){return function(t,e){var r=e(),n=(0,H.UI)(r);if(!n)return N.fF.log("submitCancellationSurvey: no reason specified."),t((0,D.lH)(R.fh.CONFIRMATION_CANCEL));var a={confirmationNumber:(0,H.Fu)(r),reason:n,comment:(0,H.LM)(r)},o={method:"POST",path:"/appointments/cancel/survey/",actionType:P.Z.SCHEDULER.SUBMIT_CANCEL_SURVEY,series:!0,params:a};return t(lt(o)).then((function(e){e&&"SUCCESS"===e.result||N.fF.log("apiActions submitCancellationSurvey: XHR unwanted data: "+JSON.stringify(self.data)),t((0,D.lH)(R.fh.CONFIRMATION_CANCEL))}))}}function dt(t){return{type:P.Z.SCHEDULER.ERROR,payload:t}}function _t(){return function(t){t({type:P.Z.SDK.LP,payload:void 0})}}},9634:(t,e,r)=>{"use strict";r.d(e,{B2:()=>z,D4:()=>it,Dj:()=>st,Ec:()=>at,F$:()=>H,Kd:()=>F,Nl:()=>V,Q9:()=>Y,RC:()=>M,RZ:()=>j,T:()=>I,Tn:()=>et,U9:()=>nt,Um:()=>S,V$:()=>Z,WF:()=>pt,WQ:()=>J,XG:()=>N,XT:()=>G,ZW:()=>q,_1:()=>$,_P:()=>ot,bG:()=>U,eL:()=>B,h$:()=>K,ig:()=>W,m8:()=>tt,p7:()=>Q,q$:()=>rt,qe:()=>ct,rr:()=>lt,xC:()=>ut,xm:()=>R});var n=r(55185),a=r(54390),o=r(85066),i=r.n(o),s=r(20643),c=r.n(s),l=r(84264),u=r.n(l),p=r(8563),f=r.n(p),m=r(82234),d=r(1862),_=r(51733),h=r(45455),b=r(1768),g=r(83318),y=r(57003),v=r(77681),x=r(74929),w=r(72302),k=r.n(w),E=r(31554),C=r(22733);function T(t){return{type:m.Z.CHAT.UPDATE_CONVERSATION_STATE,payload:t}}function I(t){return function(e,r){if(!c()(t,"conversationId")&&!c()(t,"adapter.conversationId"))throw console.warn("chatActions.updateConversationState: missing conversationId",t),new Error("chatActions.updateConversationState: missing conversationId");var n=(0,d.cc)(t.conversationId,r());if(t.state===h.dl.ENDED||t.state===h.dl.ERROR){var a=r(),o=(0,d.uP)(n.adapterId,a).id,i=(0,_.ZH)(a)[o];if(i){e(D({adapterIdTransferredTo:o,ifAdd:!1}));var s=(0,d.uP)(i,a);if(s)return e(N({adapter:s,adapterId:s.id,conversationId:n.id,ifTransferBack:!0})).then((function(){e(T(t)),t.state===h.dl.ERROR&&(e(Q({adapter:s})),e(nt(!1)))}))}else a.getIn(["pane","isPaneHidden"])||e(S(!0))}else t.state===h.dl.CLOSED&&e(q());e(T(t))}}function S(t){return function(e){e({type:m.Z.PANE.SET_DISPLAY_CHAT_IN_PANE_OVERRIDE,payload:t})}}function A(t){return{type:m.Z.CHAT.TRANSFER_CONVERSATION,payload:t}}function N(t){return function(){var e=(0,a.Z)(u().mark((function e(r,n){var a,o,s,c,l,p,f,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.configs,o=t.noSwitchBackToChatBot,(s=t.adapter)||((l=i()(a,(function(t){return t.queueType===y._E.ASYNC})))?(p=(0,d.Fv)(n()),s=p&&p.length&&p[0]||void 0,c=l):(f=i()(a,(function(t){return t.queueType===y._E.SYNC})),m=(0,d.JE)(n()),s=m&&m.length&&m[0]||void 0,c=f)),e.next=5,O({dispatch:r,adapter:s,config:c,data:t,noSwitchBackToChatBot:o});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function O(t){return P.apply(this,arguments)}function P(){return(P=(0,a.Z)(u().mark((function t(e){var r,a,o,i,s,c,l,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.dispatch,a=e.adapter,o=e.config,i=e.data,s=e.noSwitchBackToChatBot,a||o){t.next=3;break}throw new Error("transferChatHelper: no adapter/config specified");case 3:t.prev=3,!a&&o&&(a=r((0,v.Q7)({configs:[o]}))[0]),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(3),b.fF.warn("transferChatHelper error",t.t0),t.t0;case 11:if(c=i.conversationId,l=i.adapterIdTransferredFrom,p=i.chatSkill,!a){t.next=16;break}return t.abrupt("return",a.handleTransfer({chatOpts:{chatSkill:p,conversationId:c},config:o}).then((function(){l&&r(D({adapterIdTransferredFrom:s?void 0:l,adapterIdTransferredTo:a.id,ifAdd:!0})),a.queueType!==y._E.SYNC&&a.queueType!==y._E.BOT||r(A((0,n.Z)({},i,{adapter:a,adapterId:a.id})))})));case 16:throw new Error("transferChat: no adapter to transfer to");case 17:case"end":return t.stop()}}),t,null,[[3,7]])})))).apply(this,arguments)}function D(t){var e=t.adapterIdTransferredFrom,r=t.adapterIdTransferredTo,n=t.ifAdd;return{type:m.Z.CHAT.UPDATE_TRANSFER_MAP,payload:{adapterIdTransferredFrom:e,adapterIdTransferredTo:r,ifAdd:n}}}function L(t){return{type:m.Z.CHAT.START_CHAT_ERROR,payload:{error:t}}}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,r){b.fF.log("chatActions.startChat: ",t);var a=t.adapter;a||(a=t.adapterId?(0,d.uP)(t.adapterId,r()):(0,d.d3)(r()));try{if(!a)throw new Error("No chat adapter available.");if(!a.canStartChat({throws:!0}))throw new Error("Unable to start chat: canStartChat returned false");e(L(null)),t.startChatButtonType&&e(M(t.startChatButtonType)),t.startChatButtonIndex&&e(X(t.startChatButtonIndex));var o=t.conversationId||e(Z({adapterId:a.id}));a.startChat((0,n.Z)({},t.opts||{},{chatSkill:c()(a,"routedSkillStatus.skillName")||t.skill,conversationId:o}))}catch(t){b.fF.warn("chatActions.startChat fail: cannot start chat",t),e(L(t)),e((0,E.HM)())}}}function M(t){return{type:m.Z.CHAT.UPDATE_START_CHAT_BUTTON_TYPE,payload:{startChatButtonType:t}}}function X(t){return{type:m.Z.CHAT.UPDATE_START_CHAT_BUTTON_INDEX,payload:{startChatButtonIndex:t}}}function Z(t){var e=t.adapterId;return function(t){var r=(0,b.k$)();return t({type:m.Z.CHAT.ADD_CONVERSATION,payload:{adapterId:e,conversationId:r}}),r}}function U(t){return function(e,r){var n=r();if(t.adapterId=t.adapterId||(0,d.aA)(n),t.adapter=t.adapter||(0,d.uP)(t.adapterId,n),!t.conversationId){var a=(0,d.tI)(n)||{},o=a.id;o&&a.state!==h.dl.CLOSED||(console.warn("Cannot send message to current conversation; requesting new one",{conversation:a,data:t}),o=e(Z({adapterId:t.adapterId}))),t.conversationId=o}if(!t.message&&!t.text)throw new Error("chatActions.sendMessage: no message to send");var i=(0,_.dY)(r());t.message||(t.message=new g.v0({text:t.text,type:"visitor",timestamp:new Date,id:t.adapter.getSentMessageId(t.text),isPending:!i&&t.adapter.getPendingStatus()})),e(H(t)),t.adapter.sendMessage(t.message),e(nt(!1))}}function H(t){return function(e,r){if(!t.conversationId)throw console.warn("chatActions.renderMessage: missing conversationId",t),new Error("chatActions.renderMessage: missing conversationId");var n=r(),a=n.getIn(["pane","isPaneHidden"]),o=(0,d.d3)(n);t.message&&!t.messages&&(t.messages=[t.message]);var i=(0,_.qR)(n),s=t.messages.filter((function(t){return!t.isHistory})).length;a&&o&&o.state&&s>0&&!t.preventUnreadCount&&e(F(i+1,t.conversationId)),e({type:m.Z.CHAT.RENDER_MESSAGE,payload:t})}}function B(t){var e=t.messageId,r=t.conversationId,n=t.updates;return function(t,a){return r||(r=(0,d.aR)(a())),t({type:m.Z.CHAT.UPDATE_MESSAGE_BY_ID,payload:{conversationId:r,messageId:e,updates:n}})}}function F(t,e){return function(r,n){void 0===t&&(t=((0,_.Kw)(n())||0)+1),r({type:m.Z.CHAT.UPDATE_UNREAD_MESSAGE_COUNT,payload:{count:t,conversationId:e||(0,d.aR)(n())}})}}function z(t){return function(e,r){e(F(((0,_.Kw)(r())||0)+1,t))}}function j(){return function(t,e){t(I({conversationId:(0,d.aR)(e()),state:h.dl.CLOSED}))}}function Y(){return function(t,e){b.fF.log("removeAdapterConversationId"),(0,d.d3)(e()).conversationId=null}}function G(t){return function(e,r){var n=(0,d.d3)(r());n&&n.setVisitorTyping&&n.setVisitorTyping(t)}}function W(t,e){return function(r,n){e||(e=(0,d.aR)(n())),r({type:m.Z.CHAT.AGENT_TYPING,payload:{conversationId:e,isAgentTyping:t}})}}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,r){var n=r();if(t.conversationId||(t.conversationId=(0,d.aR)(n),t.conversationId)){var a=(0,d.cc)(t.conversationId,n),o=t.adapterId||a.adapterId;e(W(!1,t.conversationId)),(0,d.uP)(o,n).endChat({conversationId:t.conversationId})}}}function K(t){return function(e){e({type:m.Z.CHAT.RENDER_EXIT_SURVEY,payload:t})}}function q(){return function(t,e){var r=(0,d.Hm)(e());r&&r.onCancel&&r.onCancel(),t(J())}}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.IfTryRestartBotChat,r=void 0===e||e;return function(t,e){t({type:m.Z.CHAT.REMOVE_EXIT_SURVEY,payload:(0,d.aR)(e())}),r&&t(Q())}}function Q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.adapter;return function(t,r){var n=e||(0,d.d3)(r());n&&"bot"===n.queueType&&n.skill===y.jh.Cloud_Console_Contact&&(n.setState(h.dl.CHATTING),n.renderInitialMsg(),t(nt(!1)))}}function $(){return function(t,e){var r="";(0,d._U)(e()).forEach((function(t){if("visitor"===t.type&&t.adapterQueueType!==y._E.BOT||"agent"===t.type||"system"===t.type){t.timestamp&&(r+="[".concat(t.timestamp.toString(),"]\n"));var n=f()("<div>".concat(t.text,"</div>")).text();switch(t.type){case"visitor":r+="You: ".concat(n);break;case"agent":if(!t.by&&t.participantId)try{t.by=(0,d.p2)(e())[t.participantId].name}catch(e){t.by="Agent"}r+="".concat(t.by,": ").concat(n);break;case"system":r+=n}r+="\n\n"}}));var n=new Blob([r],{type:"text/plain;charset=utf-8"}),a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download="Transcript.txt",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}function tt(t){var e=t.convId,r=t.messageId,n=t.adapterId;return function(t,a){n||(n=(0,d.aA)(a())),(0,d.uP)(n,a()).setMessageViewed({convId:e,messageId:r})}}function et(t){return{type:m.Z.CHAT.SALESFORCE_AVAILABILITY,payload:t}}function rt(t){return{type:m.Z.CHAT.SET_DOM_SELECTOR_TO_SCROLL_TO,payload:t}}function nt(t){return{type:m.Z.CHAT.UPDATE_IF_SHOW_DOWNLOAD_TRANSCRIPT_BUTTON,payload:t}}function at(t,e){return{type:m.Z.CHAT.SET_ASYNC_PROPERTY,payload:{key:t,value:e}}}function ot(t){return at("identity",t)}function it(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.refresh,r=void 0!==e&&e,n=t.withIdentities,o=void 0===n||n,i=t.startSession,s=void 0!==i&&i;return function(){var t=(0,a.Z)(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.u)({refresh:r,withIdentities:o,startSession:s});case 2:return n=t.sent,e(ot(n)),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function st(t){return(0,C.Q1)(C.b7.REQUIRED)&&k().set(y.y$.ASYNC_UNREAD_VIEWED,t,{secure:!0}),{type:m.Z.CHAT.SET_COOKIE_VALUE,payload:t}}function ct(t){return{type:m.Z.CHAT.SET_BOT_API_STATUS,payload:t}}function lt(t,e){return function(r,n){return e||(e=(0,d.aR)(n())),r({type:m.Z.CHAT.SET_NOTICE,payload:{conversationId:e,notice:t}})}}function ut(t,e){return{type:m.Z.CHAT.SURVEY_RESPONSE,payload:{questionId:t,answerId:e}}}function pt(t){return{type:m.Z.CHAT.SET_BUSINESS_LOCATION_CHANGE,payload:t}}},69449:(t,e,r)=>{"use strict";r.d(e,{Dg:()=>c,Tv:()=>s,em:()=>o,fO:()=>i,mR:()=>a});var n=r(82234);function a(t){return{type:n.Z.DATA.UPDATE_EXTERNAL_BUNDLES,payload:t}}function o(){return{type:n.Z.DATA.CLEAR_EXTERNAL_BUNDLES}}function i(t){var e=t.experimentId,r=t.variation,a=t.isOverride,o=void 0!==a&&a;return{type:n.Z.DATA.SET_VARIATION,payload:{experimentId:e,variation:r,isOverride:o}}}function s(t){return{type:n.Z.DATA.SET_FILTER,payload:t}}function c(){return{type:n.Z.DATA.CLEAR_FILTER}}},54329:(t,e,r)=>{"use strict";r.d(e,{By:()=>h,Ep:()=>m,Qe:()=>d,Vn:()=>p,a9:()=>u,aF:()=>_,f6:()=>l,p1:()=>g,r2:()=>f,zm:()=>b});var n=r(7120),a=r.n(n),o=r(82234),i=r(3479),s=r(26046),c=r(45077);function l(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e){e({type:o.Z.GENERAL.UPDATE_OVERLAY_NOTIFICATION,payload:t})}}function u(t){return function(e){e({type:o.Z.GENERAL.CLIENT_INFO.IS_USER_ACTIVE,payload:t})}}function p(t){return{type:o.Z.GENERAL.HIDE_PILL,payload:t}}function f(t){return function(e){e({type:o.Z.GENERAL.CLIENT_INFO.UPDATE,payload:t})}}function m(t){return{type:o.Z.GENERAL.IS_MOBILE,payload:t}}function d(t){return{type:o.Z.GENERAL.IS_TIMER_PREPARING,payload:t}}function _(t){return{type:o.Z.GENERAL.COLOR_PALETTE,payload:t}}function h(){return function(t,e){var r=(0,i.HX)(e());r&&r.url?window.location.href=r.url:window.location.href=s.backupEmailForm}}function b(t){return function(e,r){var n=(0,c.EG)(r());a()(n,t)||e({type:o.Z.GENERAL.PILL_CONTAINER_CSS,payload:t})}}function g(t,e){return{type:o.Z.GENERAL.SET_GENERAL,payload:{key:t,value:e}}}},14020:(t,e,r)=>{"use strict";r.d(e,{tQ:()=>a});var n=r(82234);function a(t){return{type:n.Z.NOTIFICATION.REMOVE_RENDERED_ID,payload:t}}},31554:(t,e,r)=>{"use strict";r.d(e,{Er:()=>C,HM:()=>y,Vr:()=>b,W8:()=>x,Y6:()=>k,ZO:()=>T,eu:()=>I,js:()=>v,nH:()=>g,vm:()=>w,zd:()=>E});var n=r(82234),a=r(9634),o=r(1862),i=r(1768),s=r(59499),c=r(56629),l=r(30800),u=r(3479),p=r(51733),f=r(24256),m=r(45077),d=r(77681),_=r(49552),h=r(14020);function b(t){return{type:n.Z.PANE.SET_CHANNEL_TYPE,payload:{type:t}}}function g(){return function(t){t({type:n.Z.PANE.HIDE})}}function y(){return function(t,e){var r=e(),s=(0,o.aR)(r),c=(0,p.TO)(r);if((0,u.lP)(r))return(0,i.v_)();if(c&&t((0,a.Dj)(c)),function(){try{window.siteFeedbackClose()}catch(t){}}(),(0,f.hN)()){var b=(0,m.DT)("wacInstance",r);if(b)return b.openWindow()}t({type:n.Z.PANE.DISPLAY_PROACTIVE,payload:!1});var g=(0,_.ay)(r);g&&g.forEach((function(e){return t((0,h.tQ)(e))})),t((0,d.uf)()),t(T()),s&&t((0,a.Kd)(0,s)),(0,l.l6)(e())||t({type:n.Z.PANE.HAS_DISPLAYED,payload:!0}),t({type:n.Z.PANE.SHOW})}}function v(){return function(t){t({type:n.Z.PANE.TOGGLE_MENU})}}function x(t){return function(e){e({type:n.Z.PANE.END_CHAT_OVERLAY,payload:t})}}function w(t){return function(e){e({type:n.Z.PANE.DISPLAY_PROACTIVE,payload:t})}}function k(t){return function(e){e({type:n.Z.PANE.DISPLAY_LOCALE_DROPDOWN,payload:t})}}function E(){return function(t,e){(0,l.dJ)(e())||t({type:n.Z.PANE.LOAD})}}function C(t){return{type:n.Z.PANE.SHOW_LOADING_SCREEN,payload:t}}function T(){return function(t,e){var r=e();((0,i.xb)((0,s.W8)(r))||(0,s.Bh)(r)&&(0,i.xb)((0,s.nb)(r)))&&!(0,s.yf)(r)&&t((0,c.x8)())}}function I(t){return{type:n.Z.PANE.SET_MENU_STATE,payload:{type:t}}}},1509:(t,e,r)=>{"use strict";r.d(e,{ED:()=>y,Ef:()=>k,bA:()=>v,qO:()=>w,xd:()=>x});var n=r(8270),a=r(65689),o=r.n(a),i=r(69113),s=r.n(i),c=r(82234),l=r(1768),u=r(19187),p=r(30851),f=r(57003),m=r(3479),d=r(30800),_=r(51733),h=r(45455),b=r(35478),g=r(22733);function y(){return function(t){var e;try{var n=(0,l.Wz)(u.Cg.IBM_AUDIENCE)||window._dl.fn.lotame.getAudienceList();e=n?n.split(",").map((function(t){return parseInt(t,10)})):[]}catch(t){l.fF.warn("prepareAudienceData error populating audience list:",t)}if(e&&e.length)return r.e(191).then(r.bind(r,2191)).then((function(r){var n=r.industryAudiences.filter((function(t){return s()(e,t.audienceId)}));if(l.fF.log("prepareAudienceData: filtered audiences",{filteredIndustryAudiences:n}),n.length>0){var a=o()(n),i=a.headingText,u=a.audienceId;t({type:c.Z.POPUP.UPDATE_TEXT,payload:{headerText:i}}),t({type:c.Z.POPUP.UPDATE_INDUSTRYID,payload:{industryId:u}})}}));l.fF.log("prepareAudienceData: no audiences to use")}}function v(t){return function(e,r){var a,o=r(),i=(0,_.b6)(o),s=(0,m.Mx)(o),u=(0,d.l6)(o);t?(0,l.Nh)()||i!==h.GC.AVAILABLE&&!Boolean(s)||u?(0,g.Q1)(g.b7.FUNCTIONAL)&&(0,l.Uj)(p.Y5,JSON.stringify((a={},(0,n.Z)(a,f.Rf.TYPE,(0,b.XB)(o)),(0,n.Z)(a,f.Rf.STATE,h.oM.BLOCKED),a))):e({type:c.Z.PANE.DISPLAY_PROACTIVE,payload:!0}):e({type:c.Z.PANE.DISPLAY_PROACTIVE,payload:!1})}}var x=function(t){return{type:c.Z.GENERAL.PROACTIVE_TYPE,payload:t}};function w(t){return function(e){e({type:c.Z.GENERAL.WELCOME_MESSAGE,payload:t}),e(k(!0))}}function k(t){return function(e,r){var n;(0,b._K)(r())||e((n=!0,{type:c.Z.GENERAL.WELCOME_MESSAGE_HAS_SHOWN,payload:n})),e({type:c.Z.GENERAL.DISPLAY_WELCOME_MESSAGE,payload:t})}}},62857:(t,e,r)=>{"use strict";r.d(e,{Fx:()=>y,L$:()=>d,LN:()=>m,PM:()=>h,QA:()=>v,_3:()=>f,aW:()=>p,aX:()=>b,c7:()=>_,db:()=>l,hM:()=>g,j5:()=>c,jL:()=>x,lH:()=>u});var n=r(79655),a=r(82234),o=r(59499),i=r(1768),s=r(31554);function c(t){return function(e,r){if(!1===t)e({type:a.Z.SCHEDULER.DISPLAY,payload:!1});else if(t){var n=(0,o.wD)(r());0!==n.length?window.open(n,"_blank"):(e((0,s.ZO)()),e({type:a.Z.SCHEDULER.DISPLAY,payload:t}),(0,o.Ye)(r())||e({type:a.Z.SCHEDULER.HAS_DISPLAYED,payload:!0}))}}}function l(t){return function(e,r){e({type:a.Z.SCHEDULER.UPDATE_SCHEDULER_TYPE,payload:t||(0,o.RU)(r())})}}function u(t){return function(e){e({type:a.Z.SCHEDULER.DISPLAY_SCREEN,payload:t})}}function p(t){return function(e){!t.schedulerType&&t.config&&(t.schedulerType=(0,i.kN)(t.config)),!t.focusArea&&t.variation&&(t.focusArea=t.variation);var r=t.config;e({type:a.Z.SCHEDULER.UPDATE_CONFIG,payload:t});try{var o=Intl.DateTimeFormat().resolvedOptions().timeZone||r.appointmentTimeZonePreferred||r.preferredTimeZoneID;o&&"NONE"!==o||(o=r.appointmentTimeZones.split(",")[0].trim()),e(_({id:"timezone",value:o}))}catch(t){i.fF.log("Couldn't set default timezone. ",t)}try{var s=r.stateOrProvinceNames;if(s){var c=s.split(/, ?/);e(_({id:"subregion",value:(0,n.Z)(c,1)[0]}))}}catch(t){i.fF.log("Couldn't set default subregion. ",t)}}}function f(t){var e=t.schedulerType,r=t.textFrags;return{type:a.Z.SCHEDULER.UPDATE_INFO,payload:{schedulerTextTranslations:{textFragments:r},schedulerType:e}}}function m(t){return function(e){e({type:a.Z.SCHEDULER.UPDATE_PREFERRED_DIALING_CODE,payload:t})}}function d(){return function(t){t({type:a.Z.SCHEDULER.ERROR_CLEAR})}}function _(t){return{type:a.Z.SCHEDULER.SET_INPUT_FORM_VALUE,payload:t}}function h(t){return function(e){e({type:a.Z.SCHEDULER.REMOVE_INPUT_VALUE,payload:t})}}function b(t){return{type:a.Z.SCHEDULER.PRIVACY_VIEWED,payload:t}}function g(t){return function(e,r){return e({type:a.Z.SCHEDULER.CLEAR_APPOINTMENT_DETAILS,payload:{schedulerType:t||(0,o.yq)(r())}})}}function y(){return{type:a.Z.SCHEDULER.RESET_FORM}}function v(t){return{type:a.Z.SCHEDULER.MODIFY_APPOINTMENT,payload:t}}function x(){return{type:a.Z.SCHEDULER.CANCEL_MODIFY_APPOINTMENT}}},30002:(t,e,r)=>{"use strict";r.d(e,{ZP:()=>ot,j:()=>pt,oP:()=>st,pz:()=>tt,qX:()=>nt,zv:()=>ct});var n=r(54390),a=r(55185),o=r(17253),i=r(8270),s=r(4913),c=r(64296),l=r(76464),u=r(81928),p=r(88503),f=r(93311),m=r(79931),d=r.n(m),_=r(20643),h=r.n(_),b=r(85066),g=r.n(b),y=r(93800),v=r.n(y),x=r(84264),w=r.n(x),k=r(8563),E=r.n(k),C=r(553),T=r(1768),I=r(1821),S=r(19187),A=r(45455),N=r(9634),O=r(69449),P=r(30800),D=r(45077),L=r(1862),R=r(51733),M=r(62857),X=r(56629),Z=r(57003),U=r(4386),H=r(3479),B=r(43025),F=r(18012),z=r(54329),j=r(1509),Y=r(44539),G=r(11801),W=r(45461),V=r(83318),K=r(22733),q=r(76625),J=["text","output"],Q=["product","canSwitchProduct","countries"];function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.Z)(t);if(e){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var tt,et=q.i,rt={type:"POST",timeout:15e3,contentType:"application/json; charset=utf-8",json:!0};tt=(0,T.hV)(S.Q7.CM_BOT_LOCAL)?W.Hv.bot.local:(0,T.hV)(S.Q7.CM_BOT_DEV1)?W.Hv.bot.dev1:(0,T.hV)(S.Q7.CM_BOT_DEV2)?W.Hv.bot.dev2:(0,T.hV)(S.Q7.CM_BOT_DEV3)?W.Hv.bot.dev3:(0,T.hV)(S.Q7.CM_BOT_STAGING)?W.Hv.bot.staging:W.Hv.bot.main;var nt=v()({message:"/v2/message",history:"/v2/message/history",feedback:"/v2/validate",update:"/v2/update",status:"/v2/status"},(function(t){return"".concat(tt).concat(t)})),at=T.fF.isDebug||(0,T.r8)()||(0,T.Ce)(),ot=function(t){(0,u.Z)(f,t);var e,r,p=$(f);function f(t){var e;(0,s.Z)(this,f),(e=p.call(this,t)).classname="BotAdapter",e.switch=t.switch,e.countries=t.countries,e.phoneNumbers=t.phoneNumbers,e.responseManagerDebug=(0,T.hV)(S.Q7.CM_BOT_MANAGER_DEBUG);var r=(0,B.bh)().getState();return e.context=ct(r,{product:e.skill,canSwitchProduct:e.switch}),e.id="bot_".concat(e.classname).concat(e.skill),e.handleBotButtonClick=e.handleBotButtonClick.bind((0,l.Z)(e)),e.handleNormalLinkClick=e.handleNormalLinkClick.bind((0,l.Z)(e)),e.subscribeAnalytics(),e}return(0,c.Z)(f,[{key:"subscribeAnalytics",value:function(){var t=this;this.eventMap=(0,i.Z)({},Y.Z.CHAT_CONNECTED,(function(e){var r=e.state;return(0,T.gw)().then((function(){var e=(0,L.d3)(r);e&&e.queueType===Z._E.SYNC&&e.rtSessionId&&(t.context.realtimeID=e.rtSessionId,t.xhr.update({context:{realtimeID:t.context.realtimeID},_id:(0,D.vm)(r)}))}))})),G.c.addTracker(this)}},{key:"track",value:function(t){var e=t.eventName,r=t.state;this.eventMap[e]&&this.eventMap[e]({state:r})}},{key:"setVisitorTyping",value:function(){}},{key:"checkValidityViaCountry",value:function(){var t=this;(0,T.bG)(["country","iui","signedin"]).then((function(e){var r=e.country,n=e.iui,a=e.signedin;try{var o=((0,T.Wz)("bot-region-override")||r||"").toLowerCase();if(t.countries&&t.countries.indexOf(o)<0)t.updateState({state:A.GC.UNAVAILABLE});else{t.phoneNumber=g()(t.phoneNumbers,(function(t){return t.countryCode.toLowerCase()===o})),t.updateInformation({phoneNumber:t.phoneNumber}),t.context.countryCode=o,t.context.iui=n,t.context.signedin=a,t.skill===Z.jh.Cloud_Console_Contact&&t.updateInformation({hideChatInput:!0});var i=[];if(window.bluemixAnalytics)try{i.push(window.bluemixAnalytics.getUserProfile().then((function(e){return t.context.bluemixProfile=e})))}catch(t){}Promise.all(i).then((function(){t.updateState({state:A.GC.AVAILABLE}),(0,B.Is)({botOpenPane:{select:P.ke,onChange:function(e,r,n){var a=(0,L.d3)(n),o=(0,D.W7)(n);!e||a!==t||t.state!==A.GC.AVAILABLE||o&&t.phoneNumber||t.dispatch((0,N.xm)(t))}},botResize:{select:D.W7,onChange:function(e,r,n){var a=(0,L.d3)(n),o=(0,P.ke)(n);!e&&r&&a===t&&t.state===A.GC.AVAILABLE&&o&&t.dispatch((0,N.xm)(t))}}})}))}}catch(e){T.fF.warn("Error setting availability of bot",e),t.updateState({state:A.GC.UNAVAILABLE})}})).then((function(){t.setReady(),t.setRoutedSkill(t.skill)}))}},{key:"restDataFromWatson",value:function(t){var e=this.transformResponse(t);if(e.length>0){var r=e[0].id;r&&!t.ifThisIsSavedResponse&&this.dispatch((0,N.q$)("#".concat(r))),this.renderMessages(e)}}},{key:"transformResponse",value:function(t){var e,r=t.text,n=t.output,i=(n=void 0===n?{}:n).values,s=(0,o.Z)(t,J),c=s._id,l=s.source,u=s.timestamp,p=s.context,f=void 0===p?{}:p,m=s.schedulerParams,d=s.isHistory,_=s.isGreeting,h={source:l||"bot",timestamp:u||new Date,by:this.skill,isHistory:Boolean(d),isGreeting:_,schedulerParams:m,confirm_product_prompt:f.confirm_product_prompt,clickHandler:this.handleBotButtonClick,botManagerLabel:f.label,metadata:{_id:c},displayFeedback:void 0===f.displayFeedback||f.displayFeedback};return h.botManagerLabel&&(this.responseManagerDebug&&T.fF.log("Bot Manager Label: ",h.botManagerLabel),window.BOT_MANAGER&&window.BOT_MANAGER.scrollToResponse&&window.BOT_MANAGER.scrollToResponse(h.botManagerLabel)),r?(e="".concat(c,"-text"),[(0,a.Z)({},h,{id:e,text:r})]):i?i.map((function(t,e){var r=t.items,n="".concat(c||Date.now(),"-").concat(e,"-main");return(0,a.Z)({},h,{id:n,lines:r})})):[]}},{key:"handleNormalLinkClick",value:function(t){var e=t.linkUrl;if(e){var r=(0,F.Bf)(e),n=r.url,a=r.type;window.open(n,a)}}},{key:"handleBotButtonClick",value:function(t){var e=this,r=t.e,n=t.lineObj,o=t.metadata,i=E()(r.target);if(!i.hasClass("message-line")){if(r.preventDefault(),i.hasClass(U.uS.thumbsupClass)||i.hasClass(U.uS.thumbsdownClass)){i.closest(".bot-feedback").addClass(U.uS.feedbackClickedClass);var s=i.hasClass(U.uS.thumbsupClass);return this.xhr.feedback((0,a.Z)({},this.lastResponse,{valid:s})),void(s||this.sendMessage({},{type:Z.Bs.choice,choiceType:Z.kG.ENTITY_CHOICE,dialogNode:"Unhappy customer-"}))}try{var c=n.type,l=n.text,u=n.value,p=(u=void 0===u?{}:u).chatInformation,f=n.focusArea,m=n.href,d=m?void 0:r.target.href||void 0,_=o._id;switch(c){case Z.Bs.chat:(0,T.gw)().then((function(){return e.transferToAgent({_id:_,focusArea:f,chatInformation:p})})),this.dispatch((0,N.WQ)({IfTryRestartBotChat:!1}));break;case Z.Bs.scheduler:this.dispatch((0,M.db)(this.schedulerType)),this.dispatch((0,M.j5)(!0));break;case Z.Bs.choice:this.renderMsg({text:l,type:"visitor",timestamp:new Date}),this.sendMessage({text:l},n),this.dispatch((0,N.WQ)({IfTryRestartBotChat:!1}));break;case Z.Bs.link:case Z.Bs.checkout:case Z.Bs.email:case Z.Bs.phone:case Z.Bs.support:case Z.Bs.trial:default:this.handleNormalLinkClick({linkUrl:m||d})}pt({line:n,inlineHref:d,_id:_})}catch(t){T.fF.error("handleBotButtonClick: ",t)}}}},{key:"buildXHRStore",value:function(){var t=this;return{history:function(){return it({url:nt.history,data:{conversation_id:t.context.conversation_id}})},post:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.dispatchAgentTyping(!0);var n=(0,B.bh)().getState();t.context.isChatAvailable=(0,R.ch)(n),t.context.chatSkills=(0,R.c4)(n);var o=(0,R.db)(n);return o.length>0&&(t.context.engagementId=o[0]),it({url:nt.message,data:{context:t.context,input:(0,a.Z)({text:e},r)}}).catch((function(e){var r=h()(e,"xhr.responseJSON");return r&&r.output?(T.fF.warn("BotAdapter.xhr.post error: ",e),r):(T.fF.error("BotAdapter.xhr.post error: ",e),t.updateState({state:A.GC.UNAVAILABLE}),Promise.reject(e))})).then((function(e){if(e&&e.context)try{e.context.schedulerParams&&t.updateSchedFeed(e.context);var r=e.context.conversation_id;(0,K.Q1)(K.b7.REQUIRED)&&r&&localStorage.setItem("Chat_Router.conversation_id",r),t.updateInformation({conversationId:r}),t.context=e.context,!e._id||t.context.socialId||t.watchSocialIdStarted||(t.watchSocialIdStarted=!0,t.watchSocialId(e._id,500))}catch(t){T.fF.warn("Bot message error: ",t)}return t.lastResponse=e,t.dispatchAgentTyping(!1),e})).catch((function(t){T.fF.error("BotAdapter.xhr.post error: ",t)}))},feedback:function(t){if(!at)return it({url:nt.feedback,data:(0,a.Z)({valid:!0},t)})},update:ut,checkIsIbmer:function(){return it({type:"GET",url:W.Hv.bluezone.check,dataType:"jsonp",timeout:3e3}).then((function(){t.context.isIBMer=!0})).catch((function(){t.context.isIBMer=!1}))}}}},{key:"watchSocialId",value:function(t,e){var r=this;setTimeout((function(){var n=(0,I.qy)();n?(r.context.socialId=n,r.xhr.update({context:{socialId:n},_id:t})):r.watchSocialId(t,2*e)}),e)}},{key:"init",value:function(){var t=localStorage.getItem("Chat_Router.conversation_id");this.context.conversation_id=t&&"undefined"!=t?t:void 0,this.xhr=this.buildXHRStore(),this.checkValidityViaCountry()}},{key:"prepareChat",value:function(){var t=this;return this.statusFetch||(lt()?this.statusFetch=Promise.resolve():this.statusFetch=st({product:this.skill}).then((function(t){if(!t)throw Error("Bot is not ready, has status ".concat(status))})).catch((function(e){T.fF.error("Bot API status for ".concat(t.skill," was not available"),e),t.updateState({state:A.GC.UNAVAILABLE})}))),this.statusFetch}},{key:"renderGreetingMsg",value:function(t){var e=this;t.isGreeting=!0,this.initialResponse=d()(t);var r=t.output.values,n=d()(t);n.output.values=r.slice(0,1),this.restDataFromWatson(n),r.length>1&&(this.dispatchAgentTyping(!0),setTimeout((function(){e.dispatchAgentTyping(!1),e.restDataFromWatson(t)}),1e3))}},{key:"renderReceivedMsg",value:function(t){var e=this,r=t.data,n=t.isGreeting,a=void 0!==n&&n;if("chat"===r.context.action){var o=r.context.noSwitchBackToChatBot;this.transferToAgent({_id:r._id,focusArea:r.context.focusArea,noSwitchBackToChatBot:o}).then((function(){o&&e.updateState({state:A.dl.UNAVAILABLE})}))}else"scheduler"===r.context.action?(this.restDataFromWatson(r),this.dispatch((0,M.j5)(!0))):a?this.renderGreetingMsg(r):this.restDataFromWatson(r);delete this.context.action}},{key:"getTextFrag",value:function(t){return(0,H.Xj)((0,B.bh)().getState())[t]}},{key:"startChat",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.state===A.dl.CHATTING)return!1;var r=e.conversationId||this.createConversation();return this.conversationId=r,e.element&&e.element.attr("data-ibm-contact")&&(this.context.action=e.element.attr("data-ibm-contact")),this.context.isIBMer||this.xhr.checkIsIbmer(),this.updateState({state:A.dl.CHATTING}),this.updateParticipant(),"bot"!==(0,T.Wz)(S.Cg.CONTACT_MODULE)&&this.xhr.post("",e).then((function(e){var n=h()(e,"context.conversationId");t.mapVendorConvId(n,r),t.renderReceivedMsg({data:e,isGreeting:!0})})),this.loadHistory(),this.dispatch((0,N.U9)(!1)),!0}},{key:"renderInitialMsg",value:function(){this.initialResponse&&this.renderGreetingMsg((0,a.Z)({},this.initialResponse,{ifThisIsSavedResponse:!0}))}},{key:"updateParticipant",value:function(){this.addParticipants([new V.Qc({name:this.getTextFrag("bot_virtualAgent")||"Virtual Agent",role:this.getTextFrag("bot_role")||"Built with Watson Assistant",nameUrl:"https://www.ibm.com/cloud/watson-assistant/",roleUrl:"https://www.ibm.com/cloud/watson-assistant/",agentPictureUrl:null,isActive:!0,id:this.id})])}},{key:"handleTransfer",value:function(){return this.startChat()||this.updateParticipant(),this.renderMsg({text:this.getTextFrag("bot_connected"),source:"system",timestamp:Date.now()}),Promise.resolve()}},{key:"loadHistory",value:function(){var t=this;return this.xhr.history().then((function(e){if(e.length>0){var r=e.reduce((function(e,r){var n=r.timestamp,a=r._id,o=h()(r,"data.input.text");o&&(e=e.concat(t.transformResponse({_id:a,timestamp:n,source:"visitor",text:o,isHistory:!0})));var i=h()(r,"data.output.values");return i&&(e=e.concat(t.transformResponse({_id:a,output:{values:i},source:"bot",timestamp:new Date(n+1),isHistory:!0}))),e}),[]);t.renderMessages(r)}})).catch((function(t){T.fF.error("BotAdapter.loadHistory: Error ",t)}))}},{key:"updateState",value:function(t){var e=t.state;this.state!=e&&this.setState(e)}},{key:"sendMessage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.xhr.post(e.text,r).then((function(e){t.renderReceivedMsg({data:e})}))}},{key:"dispatchUpdateClientInfo",value:function(t){var e=t._id;this.dispatch((0,z.r2)({transferInfo:{topic:"Bot Transfer",leadId:this.context.conversation_id},messageIdForTransfer:e}))}},{key:"transferToAgent",value:(r=(0,n.Z)(w().mark((function t(e){var r,n,o,i,s,c,l,u;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e._id,n=e.focusArea,o=e.chatInformation,i=e.noSwitchBackToChatBot,this.dispatchUpdateClientInfo({_id:r}),n&&o?s={chatInformation:[o],focusArea:n}:n&&this.context.extraBundles&&this.context.extraBundles[n]&&((s=this.context.extraBundles[n]).focusArea=n,delete this.context.extraBundles),s&&this.dispatch((0,O.mR)({focusArea:n,bundle:s})),s=s||(0,H.Wq)(n,(0,B.bh)().getState());try{c={},l=(0,L.cA)((0,B.bh)().getState()),s&&s.chatInformation?c.configs=(0,F.k2)({chatRoutings:s.chatInformation.map((function(t){return t.ifExternalConfig=!0,t.focusArea=s.focusArea,t})),reroutingInfo:(0,H.X)((0,B.bh)().getState()),allowOverwrite:!1}):l&&l.length?c.adapter=l[0]:(u=h()(s,"emailInformation[0].url")||(0,H.D6)((0,B.bh)().getState()))?window.open(u,"_blank"):(0,T.v_)(),this.dispatch((0,N.XG)((0,a.Z)({adapterIdTransferredFrom:this.id,conversationId:this.conversationId,noSwitchBackToChatBot:i},c)))}catch(t){}case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"updateSchedFeed",value:function(t){var e=t.schedulerParams.schedulingInformation[0];t.schedulerParams&&(!this.context.schedulerParams||this.context.schedulerParams&&this.context.schedulerParams.schedulingInformation&&(this.context.schedulerParams.schedulingInformation[0].focusArea!=e.focusArea||this.context.schedulerParams.schedulingInformation[0].languageCode!=e.languageCode||this.context.schedulerParams.schedulingInformation[0].regionCode!=e.regionCode))&&(this.schedulerType=(0,T.kN)(e),this.dispatch((0,M.aW)({config:t.schedulerParams.schedulingInformation[0],schedulerType:this.schedulerType})),this.dispatch((0,X.x8)(e)))}},{key:"showBotMessage",value:(e=(0,n.Z)(w().mark((function t(){var e,r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,it({url:nt.message,data:{context:(0,a.Z)({},this.context,{pillwelcome:!0}),input:{text:""}}});case 3:if(!(e=t.sent).context.error){t.next=6;break}throw new Error("Error fetching pillwelcome message");case 6:(r=h()(e,"output.values[0]"))&&this.dispatch((0,j.qO)({lines:r.items})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),T.fF.log("Error fetching bot message",t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(){return e.apply(this,arguments)})}]),f}(C.Z),it=function(t){return t.data&&"string"!=typeof t.data&&(t.data=JSON.stringify(t.data)),(0,T._G)((0,a.Z)({},rt,t)).catch((function(e,r,n){return Promise.reject({opts:t,xhr:e,status:r,err:n,message:"\fnBot XHR has failed at endpoint ".concat(t.url,"\nstatusCode: ").concat(r,"\nerr: ").concat(n,".")})}))},st=function(t){var e=t.product,r=t.language,n=void 0===r?"en":r;return it({url:nt.status,timeout:5e3,data:{context:{product:e,language:n}}}).then((function(t){var e=t.status;return e&&-1!==["Available","Training"].indexOf(e)})).catch((function(){return!1}))};function ct(t,e){var r=e.product,n=e.canSwitchProduct,i=e.countries,s=void 0===i?"**":i,c=(0,o.Z)(e,Q);return(0,a.Z)({isIBMer:(0,T.g)(),product:r,switch:n,locale:(0,H.eA)(t),pageLocale:(0,H.$F)(t),conversate:at,socialId:(0,I.qy)(),auId:(0,I.qy)(),pageUrl:window.location.href,chatSkills:(0,R.c4)(t),eligibleCountries:s,version:et,responseManager:lt(),referrerUrl:document.referrer,userAgentInfo:(0,T.K1)(),marketingParameters:(0,I.cL)()},c)}function lt(){return(0,T.zm)("umx-portal")||(0,T.hV)(S.Q7.CM_BOT_MANAGER_DEBUG)}var ut=function(t){return!at&&it({url:nt.update,data:t})};function pt(t){var e,r=t.line,n=t.inlineHref,o=t._id,i=(e=(0,a.Z)({},r,{inlineHref:n})).href?e.href:e.inlineHref?"inLineLink-".concat(e.inlineHref):e.type===Z.Bs.choice?"".concat(Z.Bs.choice,"-").concat(e.choiceType,"-").concat(e.dialogNode||e.text):e.type!==Z.Bs.text&&e.type!==Z.Bs.readmore?e.type:void 0;i&&ut({linkUrl:i,originalData:(0,a.Z)({},r,{inlineHref:n}),_id:o})}},553:(t,e,r)=>{"use strict";r.d(e,{Z:()=>N});var n=r(17253),a=r(55185),o=r(4913),i=r(64296),s=r(39982),c=r.n(s),l=r(69113),u=r.n(l),p=r(20643),f=r.n(p),m=r(7120),d=r.n(m),_=r(85820),h=r.n(_),b=r(45455),g=r(77681),y=r(9634),v=r(1768),x=r(83318),w=r(82234),k=r(43025),E=r(1862),C=r(31554),T=r(57418),I=r(85188),S=r(3479),A=["messageId","conversationId"],N=function(){function t(e){(0,o.Z)(this,t),this.dispatch=(0,k.bh)().dispatch,this.originalConfig=e,this.id=JSON.stringify(e),this.sentMessages=[],this.conversationMapping={},this.construct(e)}return(0,i.Z)(t,[{key:"construct",value:function(t){this.config=t,this.queueType=t.queueType,this.service=t.service.toLowerCase(),this.skill=t.skill,this.ifExternalConfig=t.ifExternalConfig,this.focusArea=t.focusArea}},{key:"init",value:function(){this.setReady()}},{key:"prepareChat",value:function(){}},{key:"canStartChat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.throws,r=void 0!==e&&e,n=(0,E.nn)(this.id,(0,k.bh)().getState());return(0,E.lv)(n&&n.toJS(),{throws:r})}},{key:"startChat",value:function(){}},{key:"sendMessage",value:function(){return this.state!==b.dl.CHATTING}},{key:"shouldClose",value:function(){return this.state!==b.dl.CHATTING&&this.state!==b.dl.WAITING}},{key:"handleTransfer",value:function(){}},{key:"close",value:function(){}},{key:"getPendingStatus",value:function(){return!1}},{key:"changeConfig",value:function(){}},{key:"restoreConfig",value:function(){d()(this.config,this.originalConfig)||this.originalConfig&&this.changeConfig(this.originalConfig)}},{key:"renderMsg",value:function(t){var e=t.time||t.timestamp||new Date;return e.constructor!==Date&&(e=new Date(e)),(0,k.bh)().dispatch((0,y.F$)({conversationId:t.conversationId||this.conversationId,adapterId:this.id,adapter:this,noDateHeaderOverride:t.noDateHeaderOverride,preventUnreadCount:t.isUnread,message:new x.v0((0,a.Z)({},t,{adapterQueueType:this.queueType,timestamp:e,type:t.type||t.source}))}))}},{key:"renderMessages",value:function(t){return(0,k.bh)().dispatch((0,y.F$)({conversationId:this.conversationId,adapterId:this.id,adapter:this,preventUnreadCount:t.every((function(t){return t.isUnread})),messages:t.map((function(t){return new x.v0((0,a.Z)({},t,{timestamp:new Date(t.time||t.timestamp||Date.now()),type:t.type||t.source}))}))}))}},{key:"getTextFrag",value:function(t){return(0,S.sU)((0,k.bh)().getState())(f()(this.config,"purpose"),t)}},{key:"getSentMessageId",value:function(t){var e,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r?(e=this.sentMessages.length,this.sentMessages.push(t)):e=this.sentMessages.lastIndexOf(t),"".concat(this.id,"-sent-").concat(e)}},{key:"updateMessageById",value:function(t){var e=t.messageId,r=t.conversationId,a=void 0===r?this.conversationId:r,o=(0,n.Z)(t,A);return(0,k.bh)().dispatch((0,y.eL)({messageId:e,conversationId:a,updates:o}))}},{key:"setMessageViewed",value:function(){}},{key:"dispatchAgentStatus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.id;(0,k.bh)().dispatch((0,g.ss)(t,e))}},{key:"dispatchAgentTyping",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.conversationId;(0,k.bh)().dispatch((0,y.ig)(t,e))}},{key:"dispatchAdapterState",value:function(t){(0,k.bh)().dispatch((0,g.Nd)({adapter:this,state:t}))}},{key:"dispatchConversationState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.conversationId;(0,k.bh)().dispatch((0,y.T)({adapter:this,conversationId:e||(0,E.aR)((0,k.bh)().getState()),state:t}))}},{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.conversationId;v.fF.log("Chat Adapter set state",{state:t,conversationId:e,adapterId:this.id}),(0,k.bh)().dispatch({type:w.Z.CHAT.UPDATE_ADAPTER_STATE,payload:{adapter:this,state:t}}),u()(b.LQ,t)?this.dispatchAdapterState(t):u()(b.ck,t)?this.dispatchConversationState(t,e):v.fF.error("".concat(this.id," set unknown chat state"),t),this.state=t}},{key:"isReady",get:function(){return this.getInformation("isReady")}},{key:"setReady",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.updateInformation({config:this.config}),t!==this.isReady&&(this.updateInformation({isReady:t}),T.Z.trigger(I.J.INITIALIZED,this.config))}},{key:"routedSkill",get:function(){return this.getInformation("routedSkill")}},{key:"setRoutedSkill",value:function(t){t!==this.routedSkill&&this.updateInformation({routedSkill:t})}},{key:"setOriginalSkill",value:function(t){t!==this.originalSkill&&this.updateInformation({originalSkill:t})}},{key:"createConversation",value:function(t){var e=this.dispatch((0,y.V$)({adapterId:this.id}));return t&&this.mapVendorConvId(t,e),e}},{key:"mapVendorConvId",value:function(t,e){return this.conversationMapping[t]=e,e}},{key:"getConversationId",value:function(t){return this.conversationMapping[t]||null}},{key:"getVendorConversationId",value:function(t){var e=null;return c()(this.conversationMapping,(function(r,n){if(r===t)return e=n,!1})),e}},{key:"updateInformation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.id;(0,k.bh)().dispatch((0,g.X0)(e,t))}},{key:"getInformation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.id,r=(0,E.nn)(e,(0,k.bh)().getState())||h().Map();return t?r.get(t):r}},{key:"addParticipants",value:function(t){var e=this.getInformation().get("participants")||h().Map();t.forEach((function(t){var r=e.get(t.id);e=e.set(t.id,r?r.mergeDeep(t):new x.Qc(t))})),this.updateInformation({participants:e})}},{key:"removeParticipants",value:function(t){var e=this.getInformation().get("participants")||h().Map();t.forEach((function(t){e=e.setIn([t,"isActive"],!1)})),this.updateInformation({participants:e})}},{key:"setNotice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.conversationId;(0,k.bh)().dispatch((0,y.rr)(t,e))}},{key:"setShowLoadingScreen",value:function(t){this.dispatch((0,C.Er)(t))}}]),t}()},75222:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(31311),a=r(4913),o=r(64296),i=r(1768),s=r(19187),c=r(43025),l=r(9634),u=function(){function t(e){(0,a.Z)(this,t),this.service=e.service,this.skill=e.skill,"salesforce"==this.service?(this.id="5724000000000Gm",this.org="00D300000000F5E",this.domain="la2c1",this.version="29.0"):"salesforcetrusteer"===this.service&&((0,i.hV)(s.W6.SANDBOX_CHAT)?(this.id="5720E0000008OJ8",this.org="00D0E0000000QMI",this.domain="la1-c1cs-par",this.version="40.0"):(this.id="572w00000004Fb4",this.org="00D200000001rE0",this.domain="la1-c2-lon",this.version="39.0")),this.init()}return(0,o.Z)(t,[{key:"init",value:function(){if(!document.getElementById("cm-salesforce-js")){var t=this,e=document.querySelector("head"),r=document.createElement("script");r.async=!0,r.src="https://c.la2c1.salesforceliveagent.com/content/g/js/".concat(t.version,"/deployment.js"),r.id="cm-salesforce-js",r.onload=function(){i.fF.log("Salesforce Live Agent SDK loaded."),t.load()},e.appendChild(r)}}},{key:"load",value:function(){var t=this;try{"object"!==(0,n.Z)(window.liveagent)||"function"!=typeof window.liveagent.findOrCreate?setTimeout(this.load,100):("salesforce"==this.service?(window.liveagent.addCustomDetail("Case Origin","Chat"),window.liveagent.findOrCreate("Case").map("Origin","Case Origin",!1,!1,!0).showOnCreate(),window.liveagent.findOrCreate("Case").saveToTranscript("Case")):"salesforceTrusteer"==this.service&&(window.liveagent.setChatWindowHeight(782),window.liveagent.setChatWindowWidth(524)),window._laq||(window._laq=[]),window._laq.push((function(){window.liveagent.addButtonEventHandler(t.skill,(function(t){t===window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE?(0,c.bh)().dispatch((0,l.Tn)(!0)):t===window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE&&(0,c.bh)().dispatch((0,l.Tn)(!1))})),window.liveagent.showWhenOnline(t.skill,document.createElement("div"))})),window.liveagent.init("https://d.la2c1.salesforceliveagent.com/chat",t.id,t.org))}catch(t){i.fF.error("cm-app: salesforce chat load error",t)}}},{key:"startChat",value:function(){try{window.liveagent.startChat(this.skill)}catch(t){console.log("@cm-app: Failure starting salesforce chat",t)}}}]),t}()},47044:(t,e,r)=>{"use strict";r.d(e,{Z:()=>q});var n=r(79655),a=r(55185),o=r(31311),i=r(54390),s=r(4913),c=r(64296),l=r(76464),u=r(10327),p=r(81928),f=r(88503),m=r(93311),d=r(84849),_=r.n(d),h=r(20643),b=r.n(h),g=r(84264),y=r.n(g),v=r(8563),x=r.n(v),w=r(12917),k=r.n(w),E=r(553),C=r(1768),T=r(45455),I=r(19187),S=r(9634),A=r(45077),N=r(51733),O=r(43025),P=r(3479),D=r(57003),L=r(93188),R=r(56629),M=r(31554),X=r(30800),Z=r(2053),U=r(83318),H=r(76625),B=r(1821),F=r(22733);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,m.Z)(t);if(e){var a=(0,m.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.Z)(this,r)}}var j=H.i,Y="__delim__",G={retries:4,interval:5e3},W="cm-lp-account-number",V={liveperson:"IBM",softlayer:"SOFTLAYER"},K=Date.now(),q=function(t){(0,p.Z)(f,t);var e,r=z(f);function f(t){var e;return(0,s.Z)(this,f),(e=r.call(this,t)).className="LiveEngageAdapter",e.construct(t),e.id="".concat(e.service).concat(e.account).concat(e.skill).replace(/\W/g,""),e.lpChatInstances={},e.engagementAttributes=[],e.engagementPollingConfig=x().extend({},G),e.lineNumber=0,e.shouldRenderSavedMessages=!0,e.sentMessages=[],e.hasInitted=!1,e.storeExternalConfig=e.storeExternalConfig.bind((0,l.Z)(e)),e.removeExternalConfig=e.removeExternalConfig.bind((0,l.Z)(e)),e}return(0,c.Z)(f,[{key:"construct",value:function(t){(0,u.Z)((0,m.Z)(f.prototype),"construct",this).call(this,t);var e=(0,C.Wz)(I.W6.CHAT_ACCOUNT);e?this.account=e:sessionStorage.getItem(W)?this.account=sessionStorage.getItem(W):(0,C.hV)(I.W6.SANDBOX_CHAT)?this.account=Z.fz.SANDBOX[V[this.service]].ID:this.account=Z.fz.PROD[V[this.service]].ID,this.account||C.fF.error("No account mapping for sync chat service",this.service);var r=(0,C.Wz)(I.W6.CHAT_SKILL);r&&(this.skill=r),this.QUEUED_MESSAGE_KEY="".concat(this.id,"-msgQueue"),this.LP_VID_KEY="lp-sync-".concat(this.account,"-vid"),this.LP_SID_KEY="lp-sync-".concat(this.account,"-sid"),this.engagementData={appType:"EXTERNAL"};var n=(0,C.Jt)(this.LP_VID_KEY);"undefined"===n?(n=void 0,(0,C.XJ)(this.LP_VID_KEY)):n&&(this.vid=n),this.sid=(0,C.Jt)(this.LP_SID_KEY),localStorage.removeItem(this.LP_VID_KEY)}},{key:"changeConfig",value:function(t){var e=this;if(t)return this.construct(t),this.init().then((function(){return e.getEngagement(!0)}))}},{key:"waitForSdkLoaded",value:function(){return new Promise((function(t,e){(0,O.SS)(P.RS,(function(e){return e&&t()}),(function(t){return t}))}))}},{key:"buildObserveStore",value:function(){var t=this;(0,O.SS)(A.Bb,(function(e){return e&&t.addAttributes({type:"lead",lead:e})}))}},{key:"init",value:function(){var t=this;return this.initPromise||(clearTimeout(this.engagementTimer),this.chatConfig={appKey:"721c180b09eb463d9f3191c41762bb68",lpNumber:this.account,onLoad:[function(t){return C.fF.log("LiveEngageAdapter onLoad",t)}],onInit:[function(e){C.fF.log("LiveEngageAdapter onInit",e),t.hasInitted=!0,t.shouldStartChat&&(t.startChat(),t.setShowLoadingScreen(!1))}],onInfo:[this.handleInfo.bind(this),function(t){C.fF.log("LiveEngageAdapter onInfo",t)}],onLine:[this.receiveLine.bind(this),function(t){C.fF.log("LiveEngageAdapter onLine",t)}],onState:[this.updateState.bind(this),function(t){C.fF.log("LiveEngageAdapter onState",t)}],onStart:[this.updateState.bind(this),function(t){C.fF.log("LiveEngageAdapter onStart",t)}],onStop:function(t){C.fF.log("LiveEngageAdapter onStop",t)},onVisitorDisposed:[function(t){return C.fF.log("LiveEngageAdapter onVisitorDisposed",t)}],onAddLine:function(t){C.fF.log("LiveEngageAdapter onAddLine",t)},onAgentTyping:function(t){C.fF.log("LiveEngageAdapter onAgentTyping",t),this.dispatchAgentTyping(t.agentTyping)},onRequestChat:function(t){C.fF.log("LiveEngageAdapter onRequestChat",t),t.error&&C.fF.log("onRequestChat error:",t.error),t.info&&this.handleInfo(t)},onEngagement:[function(e){C.fF.log("LiveEngageAdapter onEngagement",e),t.state!==T.dl.CHATTING&&t.state!==T.dl.WAITING&&t.updateState(e)},this.pollEngagement.bind(this),this.onEngagement.bind(this)]},this.buildObserveStore(),this.initPromise=this.waitForSdkLoaded().then((function(){return(0,C.bG)(["ip"])})).then((function(e){if(!e.ip){var r=(0,A.nQ)((0,O.bh)().getState());return r&&r.ipAddress?{ip:r.ipAddress}:t.dispatch((0,R.VN)()).then((function(t){return{ip:t.ipAddress}}))}return e})).then((function(e){return t.engagementData.appDetails=t.engagementData.appDetails||{},t.engagementData.appDetails.ipAddress=e.ip,t.userProfile()})).then((function(){if((0,X.ke)((0,O.bh)().getState())||sessionStorage.getItem(W))return t.prepareChat()})).then((function(){return t.getEngagement()})).then((function(){delete t.initPromise})),setTimeout((function(){return t.setReady()}),1)),this.initPromise}},{key:"prepareChat",value:(e=(0,i.Z)(y().mark((function t(){var e,r,n,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.account,r=this.chatConfig,!this.lpChatInstances[e]){t.next=5;break}this.chat=this.lpChatInstances[e],t.next=11;break;case 5:return t.next=7,this.waitForSdkLoaded();case 7:n=window.lpTag.taglets.ChatOverRestAPI,a=new n(r),this.lpChatInstances[e]=a,this.chat=a;case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getEngagement",value:function(t){var e=this;return new Promise((function(r,n){var a=e.state;if(a!==T.dl.CHATTING&&a!==T.dl.WAITING||!t){e.getConsumerSections();var i=e.state!==T.GC.AVAILABLE&&e.state!==T.GC.UNAVAILABLE||t?x().extend({},e.engagementData,{engagementAttributes:e.engagementAttributes}):e.engagementData;e.lastEngagementCall=(new Date).getTime(),C.fF.log("engagement",i);var s=(0,C.Ie)({v:"1.0",sid:e.sid}),c=Z.Hb.getURI(e.account,"msdkgw");x().ajax({type:"POST",url:"https://".concat(c,"/api/account/").concat(e.account,"/app/engagement/visitors/").concat(e.vid||"").concat(s),timeout:5e3,data:JSON.stringify(i),dataType:"json",contentType:"application/json"}).always((function(t,n){var a=t;"error"===n&&"object"===(0,o.Z)(t.responseJSON)&&(a=t.responseJSON).internalCode&&20!==a.internalCode&&(delete e.vid,delete e.sid,(0,C.XJ)(e.LP_VID_KEY),(0,C.XJ)(e.LP_SID_KEY)),e.chatConfig.onEngagement.forEach((function(t){return t(a)})),r()}))}else r()}))}},{key:"onEngagement",value:function(t){var e=this;switch(e.sid=t.sessionId||t.ssid,e.vid=t.visitorId||t.svid,(0,C.XJ)(e.LP_VID_KEY,e.vid),(0,C.XJ)(e.LP_SID_KEY,e.sid),t.status){case"Available":e.engagementData.engagementDetails=t.engagementDetails,e.engagementData.engagementDetails.contextId=t.engagementDetails.contextId||t.scid,e.engagementId=e.engagementData.engagementDetails.engagementId=t.engagementDetails.engagementId||t.eid,e.engagementData.engagementDetails.campaignId=t.engagementDetails.campaignId||t.cid,e.engagementData.engagementDetails.language=t.engagementDetails.language||t.lang,e.engagementData.pageId=t.pageId,this.setRoutedSkill(t.engagementDetails.skillName);break;case"NotAvailable":this.setRoutedSkill(null)}}},{key:"handleInfo",value:function(t){if(!t.error){if(this.agentId&&this.agentId!==t.agentId&&this.removeParticipants([this.agentId]),this.agentId=t.agentId,t.agentId){var e=new U.Qc({name:t.agentName,agentPictureUrl:t.agentPictureUrl,isActive:!0,id:t.agentId,role:t.agentName&&t.agentName.indexOf("SalesRouting")>=0?null:void 0});this.addParticipants([e])}t.rtSessionId&&(this.rtSessionId=t.rtSessionId,this.getConversationId(t.rtSessionId)||(this.conversationIdToUse?(this.conversationId=this.conversationIdToUse,delete this.conversationIdToUse,this.mapVendorConvId(this.rtSessionId,this.conversationId)):this.conversationId=this.createConversation(this.rtSessionId)))}}},{key:"canStartChat",value:function(){return this.state===T.GC.AVAILABLE}},{key:"startChat",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dispatch((0,M.HM)());var r=Promise.resolve(),n=(0,N.pY)((0,O.bh)().getState()),a=D.gW[n];e.chatSkill&&(this.skill=e.chatSkill,r=this.getEngagement()),e.conversationId&&(this.conversationIdToUse=e.conversationId),r.then((function(){t.userProfile({customerInfo:{imei:{chatStartUrl:encodeURI(window.location.href),chatStartUPageviewId:(0,B.Ah)()},role:a}},!0),t.cancelExitSurvey(),t.hasInitted?(t.requestChat(e),delete t.shouldStartChat,t.shouldRenderSavedMessages=!1):(t.setShowLoadingScreen(!0),t.shouldStartChat=e)})).then(this.storeExternalConfig).catch((function(t){C.fF.error("start chat error",t)}))}},{key:"handleTransfer",value:function(t){var e=this,r=t.chatOpts,n=t.config;return(n?this.changeConfig(n):this.init()).then((function(){e.updateState(T.dl.CHATTING),e.startChat(r)}))}},{key:"close",value:function(){try{this.chat&&this.chat.disposeVisitor(),delete this.chat,this.isClosed=!0}catch(t){C.fF.warn("Could not close ".concat(this.id,": "),t)}}},{key:"requestChat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;this.engagementData.engagementDetails=this.engagementData.engagementDetails||{};var r={LETagVisitorId:this.vid,LETagSessionId:this.sid,LETagContextId:this.engagementData.engagementDetails.contextId,skill:t.chatSkill||this.routedSkill,invitation:this.invitation,engagementId:this.engagementData.engagementDetails.engagementId,campaignId:this.engagementData.engagementDetails.campaignId,language:this.engagementData.engagementDetails.language,referrer:document.referrer||document.location.href,error:function(){e.hasRetriedRequestChat?e.handleError():(C.fF.warn("error requesting chat. Retrying..."),e.hasRetriedRequestChat=!0,setTimeout((function(){e.requestChat(t)}),500))}};C.fF.log("requesting chat",r),this.chat.requestChat(r)}},{key:"handleError",value:function(){C.fF.error("liveEngageAdapter error handler");var t=(0,P.Wq)(this.focusArea,this.getStore().getState()),e=b()(t,"emailInformation[0].url");e&&window.open(e,"_blank"),this.endChat({endWithError:!0})}},{key:"receiveLine",value:function(t){var e=this,r=this;t.lines.forEach((function(t){var n=Number(t["@id"]),o=n>e.lineNumber,i=-1;e.sentMessages.some((function(e,r){if(e.text===t.text)return i=r,!0})),t.by&&"SalesRouting"===t.by||("system"===t.source&&t.text.indexOf("<br")?t.text.split(/<br ?\/?>/).forEach((function(e,n){if(e){var a=new Date(t.time).getTime()+n;r.renderMsg(x().extend({},t,{text:e,time:a,id:"".concat(t["@id"],".").concat(n),isHistory:a<K}))}})):"visitor"===t.source&&i>-1?(e.updateMessageById({messageId:e.sentMessages[i].id,timestamp:new Date(t.time),isPending:!1}),e.sentMessages.splice(i,1)):r.renderMsg((0,a.Z)({},t,{text:k()(t.text),id:t["@id"],isHistory:new Date(t.time).getTime()<K})),o&&(e.lineNumber=n))}))}},{key:"sendMessage",value:function(t){var e=this,r=t.text;this.chat&&0!==r.length&&(this.sentMessages.push(t),this.state!==T.dl.CHATTING?this.queueMessage(r):(this.chat.addLine({text:r,error:function(){C.fF.error("error sending message. Retrying..."),setTimeout((function(){return e.chat.addLine({text:r})}),500)}}),this.lineNumber+=1))}},{key:"getPendingStatus",value:function(){return!0}},{key:"setVisitorTyping",value:function(t){this.chat&&this.state===T.dl.CHATTING&&this.chat.setVisitorTyping({typing:t})}},{key:"updateState",value:function(t){var e=t.state||t.status;if("initialised"!==e&&"resume"!==e){var r=this.state;if(void 0!==t.internalCode&&C.fF.warn("Got live engage error code ",t.internalCode),"string"==typeof e){var n=e.toUpperCase(),a=T.GC[n]||T.dl[n];if(a)e=a;else{if("notfound"===e.toLowerCase())return;C.fF.warn("unknown chat state",e),e=r===T.dl.CHATTING?T.dl.ENDED:T.GC.UNAVAILABLE}if(e===r)return;switch(sessionStorage.removeItem(W),e){case T.GC.AVAILABLE:case T.GC.UNAVAILABLE:if(e===T.dl.WAITING||e===T.dl.CHATTING)return;break;case T.dl.ENDED:this.chat.disposeVisitor(),this.isSurveyShown||this.getExitSurvey(),this.dispatch((0,S.U9)(!0)),setTimeout(this.getEngagement.bind(this),0);break;case T.dl.CHATTING:this.sendSavedMessages(),(0,F.Q1)(F.b7.REQUIRED)&&sessionStorage.setItem(W,this.account);break;case T.dl.WAITING:this.cancelExitSurvey(),this.isSurveyShown=!1,this.dispatch((0,S.U9)(!1)),this.shouldRenderSavedMessages&&(this.loadQueuedMessages(),this.shouldRenderSavedMessages=!1),(0,F.Q1)(F.b7.REQUIRED)&&sessionStorage.setItem(W,this.account)}this.setState(e)}}}},{key:"pollEngagement",value:function(t){var e=this;if((0,A.aA)((0,O.bh)().getState())){var r=t.state||t.status,n=12e4;switch("string"==typeof r&&(r=T.GC[r.toUpperCase()]),r){case T.GC.AVAILABLE:case T.GC.UNAVAILABLE:this.engagementPollingConfig=x().extend({},G);break;default:this.engagementPollingConfig.retries>0?this.engagementPollingConfig.retries-=1:this.engagementPollingConfig.interval*=2,n=this.engagementPollingConfig.interval}clearTimeout(this.engagementTimer),this.engagementTimer=setTimeout((function(){e.engagementTimer=void 0,!e.isClosed&&e.getEngagement()}),n)}}},{key:"endChat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.endWithError;this.chat&&this.state!==T.dl.ENDED&&(this.chat.endChat({disposeVisitor:!0}),this.updateState({state:e?T.dl.ERROR:T.dl.ENDED}),sessionStorage.removeItem(this.QUEUED_MESSAGE_KEY),this.removeExternalConfig(),this.restoreConfig(),this.renderMsg({type:"chatEnd",text:this.getTextFrag("chat_hasEnded"),timestamp:new Date,conversationId:this.conversationId,isPending:this.chat.getState()===T.dl.WAITING}))}},{key:"getConsumerSections",value:function(){var t=[];switch(this.service){case"liveengage":case"liveperson":t.push(this.skill,"v18");break;case"bluemix":case"softlayer":switch(t.push(this.skill),this.skill){case"Sales-Bluemix-WWW-China-Traditional":case"ChineseTrad":t.push("web-sales","ChineseTrad","bl");break;case"Sales-Bluemix-WWW-China-Simplified":case"ChineseSimp":t.push("web-sales","ChineseSimp","bl");break;case"Sales-Bluemix-WWW-Portuguese-Brazil":case"PortBrazil":t.push("web-sales","PortBrazil","bl");break;case"Sales-Bluemix-WWW-Japanese":case"Japanese":t.push("web-sales","Japanese","bl");break;case"Korean":t.push("web-sales","Korean","bl");break;case"Sales-Bluemix-WWW-Italian":case"Italian":t.push("web-sales","Italian","bl");break;case"Sales-Bluemix-WWW-French":case"French":t.push("web-sales","French","bl");break;case"Sales-Bluemix-WWW-German":case"German":t.push("web-sales","German","bl");break;case"Sales-Bluemix-WWW-Spanish":case"Spanish":t.push("web-sales","Spanish","bl");break;case"Sales-Bluemix-WWW-Arabic":case"Arabic":t.push("web-sales","Arabic","bl");break;case"Sales-Portal-English":case"SL-Portal Sales-English":t.push("portal-sales","English","sl");break;case"Support-JA":t.push("portal-support","japanese","sl");break;case"Support-Portal-ACS-Korean":t.push("portal-support","korean","sl");break;case"ACS-AI-Cognitive":case"ACS-App-Dev":case"ACS-Compute":case"ACS-DB-Mgmt":case"ACS-Fabric":case"ACS-Network":case"ACS-Security":case"ACS-Storage":case"ACS-Virt":case"ACS-PaaS-Core":case"Billing-Support-Portal":case"PowerVS-Support":case"ACS-Satellite":case"ACS-VPC":case"Account-Management":t.push("portal-support","english");break;default:t.push("web-sales","English","bl")}}this.engagementData.consumerSections=_()(t);var e=(0,a.Z)({},(0,C.K1)(),{appVersion:j});x().extend(!0,this.engagementData.appDetails,e)}},{key:"userProfile",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Z.Hb.getLpAttributes(e).then((function(e){var r=(0,n.Z)(e,2),a=r[0],o=r[1];return t.addAttributes(a,!1),t.addAttributes(o,!1),(0,C.bG)(["signedin","iui"])})).then((function(e){var r={type:"ctmrinfo",info:{loginStatus:e.signedin?1:0,customerId:e.iui}};return t.addAttributes(r,!1)})).then((function(){r&&t.getEngagement(!0)})).catch((function(t){C.fF.log("LiveEngageAdapter.userProfile: Error: ".concat(t))}))}},{key:"addAttributes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!1;this.engagementAttributes.forEach((function(e){r||t.type!==e.type||(r=!0,e=x().extend(!0,e,t))})),r||this.engagementAttributes.push(t),this.state&&e&&this.getEngagement(!0)}},{key:"getExitSurvey",value:function(){var t=this,e=this,r={success:function(t){C.fF.log("got survey",t);var r={conversationId:e.conversationId,exitSurvey:(0,a.Z)({},t,{onSubmit:e.submitExitSurvey.bind(e),onCancel:e.cancelExitSurvey.bind(e)})};e.isSurveyShown=!0,e.dispatch((0,S.h$)(r))},error:function(e){t.dispatch((0,S.p7)()),C.fF.error("errer fetching survey",e)}};C.fF.log("requesting survey"),e.chat.getExitSurvey({success:r.success,error:r.error,context:e.chat})}},{key:"submitExitSurvey",value:function(t){this.chat.submitExitSurvey({survey:{survey:t},success:function(){C.fF.log("successfully submitted survey")},error:function(t){C.fF.error("error submitting chat exit survey",t)},context:this.chat}),this.isSurveyShown=!1}},{key:"cancelExitSurvey",value:function(){try{this.chat.cancelSurvey()}catch(t){C.fF.error("error canceling survey",t)}this.isSurveyShown=!1}},{key:"queueMessage",value:function(t){var e=sessionStorage.getItem(this.QUEUED_MESSAGE_KEY)||"";this.queuedMessages="".concat(e).concat(e.length?Y:"").concat(t),(0,F.Q1)(F.b7.REQUIRED)&&sessionStorage.setItem(this.QUEUED_MESSAGE_KEY,this.queuedMessages)}},{key:"loadQueuedMessages",value:function(){var t=this,e=sessionStorage.getItem(this.QUEUED_MESSAGE_KEY)||this.queuedMessages;e&&e.split(Y).forEach((function(e){t.renderMsg({text:e,source:"visitor"})}))}},{key:"sendSavedMessages",value:function(){var t=this;C.fF.log("sendSavedMessages",this.savedMessages);var e=sessionStorage.getItem(this.QUEUED_MESSAGE_KEY);e&&(sessionStorage.removeItem(this.QUEUED_MESSAGE_KEY),e.split(Y).forEach((function(e){t.chat.addLine({text:e,error:function(){setTimeout((function(){t.chat.addLine({text:e})}),500)}}),t.lineNumber+=1})))}},{key:"storeExternalConfig",value:function(){(0,F.Q1)(F.b7.REQUIRED)&&this.ifExternalConfig&&(0,L.gY)(L.I.EXTERNAL_CONFIG_KEY,this.config)}},{key:"removeExternalConfig",value:function(){this.ifExternalConfig&&(0,L.gk)(L.I.EXTERNAL_CONFIG_KEY)}}]),f}(E.Z)},28130:(t,e,r)=>{"use strict";r.d(e,{Z:()=>at});var n=r(54390),a=r(55185),o=r(4913),i=r(64296),s=r(76464),c=r(10327),l=r(81928),u=r(88503),p=r(93311),f=r(29045),m=r.n(f),d=r(50569),_=r.n(d),h=r(69113),b=r.n(h),g=r(4427),y=r.n(g),v=r(29154),x=r.n(v),w=r(63225),k=r.n(w),E=r(85066),C=r.n(E),T=r(19157),I=r.n(T),S=r(88685),A=r.n(S),N=r(20643),O=r.n(N),P=r(84264),D=r.n(P),L=r(553),R=r(2053),M=r(1768),X=r(19187),Z=r(45455),U=r(31554),H=r(9634),B=r(43025),F=r(1862),z=r(30800),j=r(83318),Y=r(51733),G=r(87750),W=r(4386),V=r(57003),K=r(45077),q=r(11801),J=r(44539),Q=r(45857),$=r(1821);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,p.Z)(t);if(e){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var et="Failed to connect with JWT; retrying...",rt={lemessaging:"IBM",softlayermessaging:"SOFTLAYER",liveperson2:"IBM2"},nt=null,at=function(t){(0,l.Z)(N,t);var e,r,u,f,d,h,g,v,w,E,T,S=tt(N);function N(t){var e;return(0,o.Z)(this,N),(e=S.call(this,t)).className="LiveEngageAsyncAdapter",e.updateAccount(t),(0,M.hV)(X.PF.SKILL)&&(e.skill=(0,M.Wz)(X.PF.SKILL)),e.uuid=(0,M.k$)(),e.id=e.className,e.participants={},e.activeParticipants={},e.messagesToSend=[],e.dialogTracker={},e.isDebug=(0,M.hV)(X.PF.ASYNC_DEBUG),e.debug=M.fF.isDebug&&(0,M.hV)(X.PF.ASYNC_DEBUG),e.startTime=Date.now(),M.fF.log("LiveEngageAsyncAdapter: constructed",(0,a.Z)({},(0,s.Z)(e))),e}return(0,i.Z)(N,[{key:"consumerId",get:function(){return(0,Y.be)((0,B.bh)().getState(),this.account)}},{key:"jwt",get:function(){return(0,Y.g1)((0,B.bh)().getState(),this.account)}},{key:"myId",get:function(){return this.jwt&&JSON.parse(atob(this.jwt.split(".")[1])).sub}},{key:"construct",value:function(t){(0,c.Z)((0,p.Z)(N.prototype),"construct",this).call(this,t),this.updateAccount(t),this.initOnAsyncIdentityUpdate()}},{key:"updateAccount",value:function(t){var e=(0,M.Wz)(X.PF.ACCOUNT_NO);e?this.account=e:t.account?this.account=t.account:(0,M.hV)(X.W6.SANDBOX_CHAT)?this.account=R.fz.SANDBOX[rt[this.service]].ID:(0,M.hV)(X.W6.ALPHA_CHAT)?this.account=R.fz.ALPHA[rt[this.service]].ID:this.account=R.fz.PROD[rt[this.service]].ID,this.account||M.fF.error("No account mapping for",this.service)}},{key:"init",value:(T=(0,n.Z)(D().mark((function t(){var e=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initting||(this.initting=this.doInit.apply(this,e)),t.abrupt("return",this.initting);case 2:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"doInit",value:(E=(0,n.Z)(D().mark((function t(){var e,r,n,a,o,i=this,s=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},r=e.isRetry,n=void 0!==r&&r,this.chat&&this.chat.close(),t.next=4,this.getAvailability().then((function(){return i.updateState({state:Z.GC.AVAILABLE})})).catch((function(t){M.fF.warn("".concat(i.className,": Error setting initial availability"),t)}));case 4:return t.next=6,this.waitForAsyncIdentity();case 6:if(a=(0,B.bh)().getState(),o=(0,Y.DU)(a,this.account),t.prev=8,this.updateInformation({isLoggedIn:o}),this.consumerInfo&&this.updateState({state:Z.GC.AVAILABLE}),(0,Y.C1)(a,this.account)){t.next=14;break}return t.next=14,this.connect({isRetry:n});case 14:if(this.watchStore(),!(0,M.hV)(X.PF.MESSAGING_REDIRECT)&&!(0,M.hV)(X.PF.CHAT_CONT_ACCOUNT)){t.next=25;break}if(!o&&this.getInformation().get("agentStatus")===V.LF.UNAVAILABLE||this.dialogId){t.next=24;break}return t.prev=17,t.next=20,this.startChat();case 20:t.next=24;break;case 22:t.prev=22,t.t0=t.catch(17);case 24:this.dispatch((0,U.HM)());case 25:t.next=31;break;case 27:t.prev=27,t.t1=t.catch(8),M.fF.warn("".concat(this.className,": init error"),t.t1),this.updateState({state:Z.GC.UNAVAILABLE});case 31:this.setReady(),delete this.initting;case 33:case"end":return t.stop()}}),t,this,[[8,27],[17,22]])}))),function(){return E.apply(this,arguments)})},{key:"changeConfig",value:function(t){return t&&this.construct(t),this.init()}},{key:"handleTransfer",value:(w=(0,n.Z)(D().mark((function t(e){var r,n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.config,n=e.conversationId,!r){t.next=6;break}return t.next=4,this.changeConfig(r);case 4:t.next=8;break;case 6:return t.next=8,this.init();case 8:return t.abrupt("return",this.startChat({conversationId:n}));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)})},{key:"connect",value:(v=(0,n.Z)(D().mark((function t(){var e,r,o,i,s,c,l=this,u=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u.length>0&&void 0!==u[0]?u[0]:{},r=e.autoCloseSocket,o=void 0===r||r,i=e.isRetry,s=void 0!==i&&i,M.fF.log("LiveEngageAsyncAdapter: attempting to connect",(0,a.Z)({},this)),!this.connecting){t.next=4;break}return t.abrupt("return",this.connecting);case 4:return c=function(){var t=(0,n.Z)(D().mark((function t(){var e;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==O()(l.chat,"ws.readyState")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,R.Hb.getPath(l.account);case 4:return e=t.sent,t.abrupt("return",R.cj.connect(e,l.debug).then((function(t){return l.chat=t,l.chat.registerRequests(),l.chat.registerNotificationHandlers(l.buildConfigStore()),l.log("LiveEngageAsyncAdapter: initializing connection",l.chat),l.chat.init(l.jwt,l.consumerInfo)})).catch(function(){var t=(0,n.Z)(D().mark((function t(e){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=7;break}return t.next=3,l.dispatch((0,H.D4)({refresh:!0}));case 3:throw l.init({isRetry:!0}),new Error(et);case 7:throw new Error("Error initializing connection: "+e.toString());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){return l.chat.getOpenConversations()})).then((function(){if(M.fF.log("LiveEngageAsyncAdapter: connected successfully",(0,a.Z)({},l)),l.state&&l.state!==Z.GC.UNAVAILABLE||!l.consumerInfo||l.updateState({state:Z.GC.AVAILABLE}),o&&l.state!==Z.dl.CHATTING&&l.state!==Z.dl.WAITING)try{l.chat.close()}catch(t){l.log("Error closing websocket",t)}})).catch((function(t){if(t!==et)throw t;M.fF.warn("".concat(l.className,": error initializing connection. Retrying..."),t)})).then((function(){delete l.connecting})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),this.connecting=c(),t.abrupt("return",this.connecting);case 7:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getAvailability",value:(g=(0,n.Z)(D().mark((function t(){var e,r,n,a,o,i=this;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,M.k$)(),n=!1,a=(0,G.PF)({consumerId:this.consumerId,account:this.account,skill:this.skill,uuid:e}).then((function(t){return n=!0,t})).catch((function(t){return 403===t.status?(M.fF.warn("Broadway returned 403, likely bot user-agent",t),n=!0,null):(M.fF.warn("Error making broadway create monitor",t),(0,M.gw)(3e4))})),o=(0,M.gw)(5e3).then((function(){if(!n){var t=!!i.consumerId;return R.Hb.createMonitorLivePerson({consumerId:t?i.consumerId:(0,M.k$)(),account:i.account,skill:i.skill,uuid:e}).then((function(e){return t||(delete e.visitorId,delete e.sessionId),e}))}})),t.next=7,Promise.race([a,o]);case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0={};case 10:r=t.t0,this.handleMonitorInfo(r);case 12:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"handleMonitorInfo",value:(h=(0,n.Z)(D().mark((function t(e){var r,n,a,o,i,s,c,l,u,p=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:this.consumerId,n=e.engagementDetails,a=void 0===n?[]:n,o=e.skillStatus,i=void 0===o?{}:o,s=e.internalCode,!(a.length>0)){t.next=21;break}return(c={consumerId:r,monitorInfo:e}).sessionId=e.sessionId,c.visitorId=e.visitorId,c.pageId=e.pageId,l=e.engagementDetails[0],c.campaignId=l.campaignId,c.engagementId=l.engagementId,c.contextId=l.contextId,this.consumerInfo=c,t.next=14,(0,G.TV)(i.skillId,this.account);case 14:u=t.sent,i.status=u,this.handleSkillStatus(i),this.handleAgentStatus(i),this.pollActiveSkill(i),t.next=25;break;case 21:if(18!==s){t.next=24;break}t.next=25;break;case 24:throw new Error("Monitoring API did not return engagement details.");case 25:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"pollActiveSkill",value:function(t){var e=this;clearInterval(nt),nt=setInterval((0,n.Z)(D().mark((function r(){var n;return D().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,G.TV)(t.skillId,e.account);case 2:n=r.sent,t.status=n,e.handleSkillStatus(t),e.handleAgentStatus(t);case 6:case"end":return r.stop()}}),r)}))),3e5)}},{key:"handleSkillStatus",value:function(t){var e=O()(this.config,"chatRouting.chatRoutingCode"),r=O()(this.config,"chatRouting.originalRoutingCode");this.setRoutedSkill(e),this.setOriginalSkill(r),this.routedSkillStatus=(0,a.Z)({},t,{status:(0,G.Ec)(t)}),this.skill=e,this.skillLanguage=t.language}},{key:"handleAgentStatus",value:function(t){var e=(0,M.Wz)("cm-async-agent-availability");null==e&&(e=(0,G.Ec)(t)),this.dispatchAgentStatus(e)}},{key:"waitForAsyncIdentity",value:function(){var t=this;return new Promise((function(e,r){(0,B.SS)((0,Y.c0)(t.account),(function(t){return t&&e()}),(function(t){return!!t}))}))}},{key:"initOnAsyncIdentityUpdate",value:function(){var t=this;this.unsubcribeWatchIdentity&&this.unsubcribeWatchIdentity(),this.unsubcribeWatchIdentity=(0,B.SS)((0,Y.c0)(this.account),(function(e,r){return e!==r&&t.init()}))}},{key:"prepareChat",value:(d=(0,n.Z)(D().mark((function t(){var e=this;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.preparingChat||(this.preparingChat=this.waitForAsyncIdentity().then((function(){return e.getAvailability().catch((function(t){M.fF.warn("LiveEngageAsyncAdapter: Error getting availability",t),e.state===Z.GC.AVAILABLE&&e.updateState({state:Z.GC.UNAVAILABLE})}))}))),t.abrupt("return",this.preparingChat);case 2:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"startBroadwaySession",value:(f=(0,n.Z)(D().mark((function t(){var e,r;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(0,B.bh)().getState(),r=(0,Y.w)(e,this.account),!(Date.now()<r)){t.next=6;break}(0,G.yj)(),t.next=8;break;case 6:return t.next=8,this.dispatch((0,H.D4)({startSession:!0}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"startChat",value:(u=(0,n.Z)(D().mark((function t(e){var r,n,a,o,i,s;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.conversationId,this.state===Z.dl.CHATTING||this.state===Z.dl.WAITING){t.next=30;break}return t.next=4,this.prepareChat();case 4:return t.next=6,this.startBroadwaySession();case 6:return t.next=8,this.connect({autoCloseSocket:!1});case 8:return this.setShowLoadingScreen(!1),t.next=11,this.chat.requestConversation(this.consumerInfo,this.skillLanguage);case 11:if(!(n=t.sent).body.conversationId){t.next=26;break}for(a=n.body.conversationId,this.trackDialog(a),this.dialogId=a,this.initializeConversation(a,r),o=(0,Y.pY)((0,B.bh)().getState()),i=V.gW[o],this.reportAttributes({customerInfo:{imei:{chatStartUrl:window.location.href,chatStartUPageviewId:(0,$.Ah)()},role:i}},!0),this.chat.subscribeToConversation({convId:a});this.messagesToSend.length;)(s=this.messagesToSend.shift().toJS()).conversationId=this.getConversationId(a),this.sendMessage(s);this.dispatch((0,U.HM)()),this.updateState({state:Z.dl.CHATTING,convId:r}),t.next=30;break;case 26:if(A()(n.body,R.tl.ERRORS.SOCKET_OPEN_ONGOING_CONV)){t.next=30;break}throw this.updateState({state:Z.GC.UNAVAILABLE}),M.fF.error("There is no conversationId",n),new Error("LiveEngageAsyncAdapter startChat error -- no conversation Id");case 30:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"close",value:function(){var t="".concat(this.id," ").concat(this.uuid," closed");M.fF.log(t),this.isWatchingStore&&this.unsubscribeWatchStore(),this.unsubcribeWatchIdentity&&this.unsubcribeWatchIdentity(),this.chat&&this.chat.close(),this.initting=this.connecting=Promise.reject(t).catch((function(){}))}},{key:"trackDialog",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.dialogTracker[e]||(this.dialogTracker[e]={renderedMessages:[],unreadMessages:[],conversationId:t,sentMessages:[],sentAutomatedMessage:r})}},{key:"initializeConversation",value:function(t,e){return e?this.mapVendorConvId(t,e):e=this.createConversation(t),this.reportAttributes(),e}},{key:"buildConfigStore",value:function(){var t=this,e={handlerRouting:function(t){(e.handlerStore[t.type]||I())(t)},handlerStore:{}},r=e.handlerStore;return r[R.tl.NOTIFICATIONS.CONVERSATION_CHANGE]=function(e){e.body.changes.filter((function(e){return"CLOSE"!==O()(e,"result.conversationDetails.state")||C()(O()(e,"result.conversationDetails.dialogs")||[],(function(e){return"CLOSE"!==e.state||e.dialogId===t.dialogId}))})).forEach((function(e){var r=e.type,n=e.result.convId,a=e.result.conversationDetails,o=a.dialogs,i=C()(o,(function(t){return"MAIN"===t.dialogType})),s=C()(o,(function(t){return"POST_SURVEY"===t.dialogType&&"OPEN"===t.state})),c=!!C()(o,(function(t){return"OPEN"===t.state}));if(i&&t.handleDialog({type:r,dialog:i,conversationDetails:a,lpConvId:n,hasOpenDialog:c}),!s&&!c||s&&!t.surveyInfo){var l=s?s.creationTs:Date.now();t.renderMsg({type:"chatEnd",text:t.getTextFrag("chat_hasEnded"),timestamp:l-1,conversationId:t.getConversationId(n)}),t.renderMsg({source:"downloadTranscript",timestamp:l,conversationId:t.getConversationId(n)})}s&&(t.surveyInfo||q.c.fire({eventName:J.Z.SURVEY_DISPLAYED,payload:{type:Q.r.ASYNC}}),t.surveyInfo={dialog:s,dialogId:s.dialogId,conversationDetails:a,convId:n},t.updateInformation({hideChatInput:!0}),t.setNotice(null),t.handleDialog({type:r,dialog:s,conversationDetails:a,lpConvId:n,hasOpenDialog:c,isSurvey:!0})),c||t.closeConversation(n)}))},r[R.tl.NOTIFICATIONS.MESSAGING_EVENT]=function(e){var n=[];if(e.body.changes.forEach((function(t){var e=t.event.type,a=r[e],o=a&&a(t);e===R.tl.NOTIFICATIONS.MESSAGING_EVENTS.CONTENT&&o&&n.push(t)})),n.filter((function(e){return e.originatorId!==t.myId})).forEach((function(e){var r=e.dialogId,n=t.dialogTracker[r].conversationId,a=it(k()(O()(t,["messageStatus","ACCEPT",n,e.dialogId]))),o=it(k()(O()(t,["messageStatus","READ",n,e.dialogId])));if(e.sequence>a&&t.chat.readOrAcceptMessageReciepts({dialogId:r,conversationId:n,sequences:[e.sequence],receiptType:"ACCEPT"}),e.sequence>o)if((0,z.R3)((0,B.bh)().getState()))t.chat.readOrAcceptMessageReciepts({dialogId:r,conversationId:n,sequences:[e.sequence],receiptType:"READ"});else{var i=t.dialogTracker[r];i&&(i.unreadMessages.push(e.sequence),e.serverTimestamp<t.startTime&&(0,B.bh)().dispatch((0,H.B2)(t.getConversationId(i.conversationId))))}})),(x()(e.body.changes)||{}).serverTimestamp<t.startTime&&!t.getInformation().get("isLoggedIn")&&t.getInformation().get("agentStatus")===V.LF.UNAVAILABLE&&!O()(t.dialogTracker,[t.dialogId,"hasSentOfflineMessage"])){y()(t.dialogTracker,[t.dialogId,"hasSentOfflineMessage"],!0);var a=(0,B.bh)().getState(),o=(0,Y.n8)(a),i=(0,Y.m2)(a),s=(0,Y.K6)(a),c=t.getConversationId(O()(t.dialogTracker,[t.dialogId,"conversationId"])),l=t.getTextFrag("msg_signIn");t.setNotice(t.getTextFrag("msg_agentNoLongerAvail")),t.sendSystemMessage({text:(0,M.h_)(l,{signInLink:o,signInTarget:s,signInClassName:W.W6.loginLinkClass,createAccountLink:i,createAccountTarget:s,createAccountClassName:W.W6.registerLinkClass}),conversationId:c,isHistory:!0}),t.renderMsg({source:"downloadTranscript",conversationId:c,isHistory:!0})}},r[R.tl.NOTIFICATIONS.MESSAGING_EVENTS.CONTENT]=function(e){var r=e.originatorId,n=r!==t.myId,a=e.dialogId,o=t.dialogTracker[a],i=o.conversationId,s=e.event.message;return"CONTROLLER"===O()(e,"originatorMetadata.role")?(t.log("Got system message",s),!1):(n&&t.addAgent({id:r},i),b()(o.renderedMessages,e.sequence)?void 0:(o.renderedMessages.push(e.sequence),t.handleMessage(e),!0))},r[R.tl.NOTIFICATIONS.MESSAGING_EVENTS.CHAT_STATE]=function(e){t.log("ChatStateEvent evt: ",e);var r=e.conversationId;if(e.originatorId!==t.myId)switch(e.event.chatState){case"COMPOSING":t.dispatchAgentTyping(!0,t.getConversationId(r)),_()((function(){t.dispatchAgentTyping(!1,t.getConversationId(r))}),1e3);break;case"ACTIVE":case"PAUSE":t.dispatchAgentTyping(!1,t.getConversationId(r));break;default:M.fF.warn("LiveEngageAsyncAdapter.notificationConfig.store.CHAT_STATE: unexpected chat state ".concat(e.event.chatState))}},r[R.tl.NOTIFICATIONS.MESSAGING_EVENTS.ACCEPT_STATUS]=function(e){var r=e.conversationId,n=e.convId,a=e.dialogId,o=e.event,i=e.metadata,s=e.originatorId;switch(r=r||n||a,o.status){case"ENRICH":case"ACTION":t.surveyInfo&&o.sequenceList.forEach((function(e){t.updateSurveyOption({messageId:ot({sequence:e,dialogId:t.surveyInfo.dialogId,conversationId:r}),metadata:{selectedId:(C()(i,(function(t){return t.id}))||{}).id}})}));break;case"ACCEPT":case"READ":e.event.sequenceList.forEach((function(e){if(s===t.myId&&y()(t,["messageStatus",o.status,r,a,e],!0),"READ"===o.status){var n=t.getConversationId(r),i=(0,Y.jn)(n,(0,B.bh)().getState());m()(i,(function(t){return!t.isViewed&&O()(t,"metadata.sequence")<=e})).forEach((function(e){t.updateMessageById({conversationId:t.getConversationId(r),messageId:e.id,isViewed:!0})}))}}))}},e}},{key:"setVisitorTyping",value:function(t){this.chat&&this.chat.setTyping({dialogId:this.dialogId,isTyping:t})}},{key:"sendAgentJoinLeft",value:function(t){var e=t.participantId,r=t.isJoined,n=t.conversationId,a=t.timestamp;a<this.startTime||this.renderMsg({type:r?"agentJoin":"agentLeft",participantId:e,conversationId:n,timestamp:a})}},{key:"handleParticipants",value:function(t){var e=this,r=t.participants,n=t.convId,a=t.timestamp,o=void 0===a?Date.now():a,i=t.isSurvey,s=void 0!==i&&i,c=t.isConversationOpen,l=(r=r.filter((function(t){return!b()(["CONSUMER","READER","CONTROLLER"],t.role)}))).map((function(t){return t.id})),u=(0,F.OV)((0,B.bh)().getState());return r.forEach((function(t){e.addAgent(t,e.getVendorConversationId(n),c&&!s),!u.some((function(e){return e.id===t.id}))&&c&&!s&&e.sendAgentJoinLeft({participantId:t.id,isJoined:!0,conversationId:n,timestamp:o}),s&&(e.surveyInfo.agentId=t.id)})),u.forEach((function(t){var r=t.id;s||r===e.myId||b()(l,r)||(e.setAgentActive(r,!1),e.sendAgentJoinLeft({participantId:r,isJoined:!1,conversationId:n,timestamp:o}))})),r}},{key:"handleDialog",value:function(t){var e=t.type,r=t.dialog,n=t.conversationDetails,a=t.lpConvId,o=t.hasOpenDialog,i=t.isSurvey,s=void 0!==i&&i,c=r.state,l=r.dialogId,u=n.metaDataLastUpdateTs;if("UPSERT"===e&&o||"OPEN"===c){this.dialogTracker[l]||(this.trackDialog(a,l,s),s?this.mapVendorConvId(l,this.getConversationId(a)):this.initializeConversation(a,this.getConversationId(a)),this.chat.subscribeToConversation({dialogId:l,convId:a})),"OPEN"===c&&(this.dialogId=l);var p=this.getConversationId(a);if(this.skillId=O()(this.routedSkillStatus,"skillId")||n.skillId,!s&&this.sendAutomatedMessage(),this.handleParticipants({participants:r.participantsDetails,timestamp:u,convId:p,isSurvey:s,isConversationOpen:"OPEN"===c}).length>0)this.updateState({state:Z.dl.CHATTING,convId:p}),this.getInformation().get("agentStatus")===V.LF.UNKNOWN&&this.setNotice(null);else if(this.updateState({state:Z.dl.WAITING,convId:p}),this.getInformation().get("agentStatus")===V.LF.UNKNOWN){var f=this.getTextFrag("msg_leaveMsgUnknownAvail");f?this.setNotice(f):console.warn("LiveEngageAsyncAdapter: no msg_leaveMsgUnknownAvail text frag")}}else s&&(q.c.fire({eventName:J.Z.SURVEY_COMPLETE,payload:{type:Q.r.ASYNC}}),delete this.surveyInfo,this.updateInformation({hideChatInput:null}))}},{key:"handleMessage",value:function(t){var e=this,r=t.originatorId,n=r!==this.myId,o=t.dialogId,i=this.dialogTracker[o],s=i.conversationId,c=this.getConversationId(s),l=t.sequence,u=t.event.message,p=t.serverTimestamp,f={id:ot({conversationId:s,dialogId:o,sequence:t.sequence}),text:u,timestamp:p,participantId:r,conversationId:c},m=C()(i.sentMessages,(function(t){var e=t.response;return O()(e,"sequence")===l})),d=o===O()(this.surveyInfo,"dialogId");if(n||!m&&!d)r===O()(this,"surveyInfo.agentId")?(this.surveyInfo.lastSurveySequence=l,t.event.quickReplies?(this.updateInformation({hideChatInput:!0}),this.renderMsg((0,a.Z)({},f,{type:"survey",lines:O()(t,"event.quickReplies.replies",[]).map((function(r){return(0,a.Z)({},O()(r,"click.metadata[0]"),{type:r.type,text:r.title,onClick:function(){e.chat.readOrAcceptMessageReciepts({dialogId:o,conversationId:s,sequences:[t.sequence],receiptType:"ACTION"},r.click.metadata),r.click.actions.forEach((function(r){if("publishText"===r.type)e.surveyInfo.lastSurveySequence===t.sequence&&e.chat.sendMessage(r.text,o,s)})),e.dispatch((0,H.xC)(f.id,r.title))},value:r})})),metadata:{sequence:l}}))):(this.renderMsg((0,a.Z)({},f,{type:"survey",metadata:{sequence:l}})),this.updateInformation({hideChatInput:!1}))):this.renderMsg((0,a.Z)({},f,{type:n?"agent":"visitor",metadata:{sequence:l}}));else{if(d)return;var _=m&&m.message||u;this.updateMessageById({messageId:this.getSentMessageId(_,!1),text:u,timestamp:new Date(f.timestamp),metadata:{sequence:l},isPending:!1})}}},{key:"addAgent",value:function(t,e,r){var a=this,o=t.id,i=["fetchParticipants",this.account,o],s=O()(this,i);if(s)return s.then((function(){var t=a.getInformation().getIn(["participants",o,"isActive"],!1);if(o!==a.myId&&void 0!==r&&r!==t)return a.setAgentActive(o,r),r}));this.addParticipants([new j.Qc({isActive:r,id:o})]);var c=R.Hb.agentProfile(this.account,o);return y()(this,i,c),c.then(function(){var t=(0,n.Z)(D().mark((function t(n){var i,s,c,l;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.nickname,s=n.pictureUrl,a.log("addAgent accdnResp for ".concat(o),n),c=null,t.prev=3,t.next=6,(0,G.IM)(e,a.account);case 6:l=t.sent,c=l[o].isAvailable,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a.log("error fetching agents availability",t.t0);case 13:return a.addParticipants([new j.Qc({name:i,agentPictureUrl:s,isActive:r,isAvailable:c,id:o})]),t.abrupt("return",r);case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"setAgentActive",value:function(t,e){this.addParticipants([{id:t,isActive:e}])}},{key:"endChat",value:function(t){var e=t.conversationId,r=void 0===e?this.conversationId:e,n=this.getVendorConversationId(r);return this.surveyInfo?this.closeConversation(this.surveyInfo.convId):this.chat.closeDialog(n)}},{key:"closeConversation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getConversationId(t);this.chat.closeConversation(t),this.updateState({state:Z.dl.ENDED,convId:e}),this.restoreConfig(),this.surveyInfo&&(delete this.surveyInfo,this.updateInformation({hideChatInput:null})),delete this.dialogId,this.dispatchAgentTyping(!1),this.updateState({state:Z.GC.AVAILABLE}),this.log("conversation was closed.\n")}},{key:"sendSystemMessage",value:function(t){t.source="system",t.id=[this.id,"system",Date.now()].join("-"),this.renderMsg(t)}},{key:"renderMsg",value:function(t){t.timestamp&&(t.isHistory=t.timestamp<this.startTime),(0,c.Z)((0,p.Z)(N.prototype),"renderMsg",this).call(this,t)}},{key:"sendMessage",value:(r=(0,n.Z)(D().mark((function t(e){var r,n,a,o,i,s=this;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.dialogTracker[this.dialogId]){t.next=3;break}return t.abrupt("return",this.messagesToSend.push(e));case 3:if(n=r.conversationId,a=e.text,o={message:a},r.sentMessages.push(o),!this.isDebug||"__CLOSE_CONVERSATION__"!==a){t.next=9;break}return t.abrupt("return",this.endChat(this.getConversationId(n)));case 9:return t.next=11,this.chat.sendMessage(a,this.dialogId,n).then((function(t){var e=t.body;400===t.code&&(s.sendSystemMessage({text:s.getTextFrag("chat_hasEnded"),conversationId:s.getConversationId(n)}),s.updateState({state:Z.dl.ENDED,convId:s.conversationId})),o.response=e}));case 11:i=(0,F.DC)((0,B.bh)().getState()),!r.sentAutomatedMessage&&0===i.filter((function(t){var e=t.type,r=t.isHistory;return"visitor"===e&&r})).length&&this.skillId&&this.sendAutomatedMessage();case 13:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getPendingStatus",value:function(){return!0}},{key:"sendAutomatedMessage",value:(e=(0,n.Z)(D().mark((function t(){var e;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.dialogTracker[this.dialogId])&&!e.sentAutomatedMessage&&this.getInformation().get("isLoggedIn")){t.next=3;break}return t.abrupt("return");case 3:e.sentAutomatedMessage=!0,this.getInformation().get("agentStatus")===V.LF.UNAVAILABLE&&this.setNotice(this.getTextFrag("msg_responseOfflineAllHours"));case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"updateSurveyOption",value:function(t){var e=t.messageId,r=t.metadata;(0,B.bh)().dispatch((0,H.eL)({messageId:e,updates:{metadata:r}}))}},{key:"watchStore",value:function(){var t=this;if(!this.isWatchingStore){this.isWatchingStore=!0;var e=(0,B.SS)(z.R3,(function(e){if(e&&t.dialogId){var r=t.dialogTracker[t.dialogId],n=r.unreadMessages,a=r.conversationId;n.length&&t.chat.readOrAcceptMessageReciepts({dialogId:t.dialogId,conversationId:a,sequences:n,receiptType:"READ"})}})),r=(0,B.SS)(K.aA,(function(e,r){if(e&&void 0!==r){var n=O()(t.chat,"ws.readyState");(void 0===n||n>1)&&t.connect()}}));this.unsubscribeWatchStore=function(){t.isWatchingStore=!1,e(),r()}}}},{key:"setMessageViewed",value:function(t){var e=t.convId,r=t.messageId,n=this.getVendorConversationId(e),a=(0,Y.S$)({convId:e,messageId:r},(0,B.bh)().getState()).metadata.sequence;a&&this.chat.readOrAcceptMessageReciepts({dialogId:this.dialogId,conversationId:n,sequences:[a],receiptType:"READ"})}},{key:"updateState",value:function(t){var e=t.state,r=t.convId;this.isDebug&&M.fF.log("LiveEngageAsyncAdapter state: ",{state:e,convId:r}),this.state&&this.state===e||(this.state=e,(0,c.Z)((0,p.Z)(N.prototype),"setState",this).call(this,this.state,r))}},{key:"reportAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.personalInfo,r=t.customerInfo,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.hasReported&&!n||(this.hasReported=!0,this.consumerInfo&&this.consumerInfo.monitorInfo&&this.consumerInfo.monitorInfo.visitorId&&(0,G.so)({consumerId:this.consumerInfo.consumerId,account:this.account,monitorInfo:this.consumerInfo.monitorInfo,skill:this.skill,personalInfo:e,customerInfo:r}))}},{key:"log",value:function(){this.debug&&M.fF.log.apply(this,arguments)}}]),N}(L.Z),ot=function(t){var e=t.sequence,r=t.dialogId;return[t.conversationId,r,e].join("__")},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,e){return parseInt(e,10)>t?e:t}),-1)}},11801:(t,e,r)=>{"use strict";r.d(e,{c:()=>mt,i:()=>_t});var n,a,o=r(39982),i=r.n(o),s=r(8563),c=r.n(s),l=r(4386),u=r(44539),p=r(9197),f=r(98315),m=r(91103),d=[{eventName:u.Z.CM_PILL_CLICK,selector:".".concat(p.Z.pill)},{eventName:u.Z.CM_CLOSE_MIN_CLICK,selector:".".concat(l.oj.minimizeBtnClass,", .").concat(l.oj.closeBtnClass)},{eventName:u.Z.CM_HOME_CLICK,selector:".".concat(l.oj.homeBtnClass,", #").concat(l.oj.homeBtnClass)},{eventName:u.Z.CM_TOGGLE_MENU_CLICK,selector:".".concat(l.oj.menuToggleBtnClass,", #").concat(l.oj.menuToggleBtnClass)},{eventName:u.Z.CM_LOCALE_OPEN,selector:"#".concat(l.GI.changeLocationId)},{eventName:u.Z.CM_MENU_ACCORDIAN_CLICK,selector:".".concat(l.GI.accordianHeadingClass)},{eventName:u.Z.CHAT_AUTH_CLICK,selector:".".concat(l.W6.loginLinkClass,", .").concat(l.W6.registerLinkClass)},{eventName:u.Z.RETURN_TO_CHAT_CLICK,selector:".".concat(l.GI.returnToChatBtnClass)},{eventName:u.Z.CM_PRIVACY_CLICK,selector:".".concat(l.uS.privacyClass," a")},{eventName:u.Z.CHAT_CHANNEL_EXPAND,selector:"[value='".concat(l.W6.chatMenuId,"']"),domEvent:"change"},{eventName:u.Z.ROUTER_CARD_CLICK,selector:".".concat(l.oj.routerCardClass)},{eventName:u.Z.SOMETHING_ELSE_CLICK,selector:".".concat(l.oj.somethingElseClass)},{eventName:u.Z.CM_TEXT_INPUT_CLICK,selector:"#".concat(l.uS.textInputId)},{eventName:u.Z.EMAIL_CHANNEL_EXPAND,selector:"[value='".concat(l.Do.emailMenuId,"']"),domEvent:"change"},{eventName:u.Z.CM_EMAIL_CLICK,selector:".".concat(l.uz.emailLinkClass)},{eventName:u.Z.CALL_CHANNEL_EXPAND,selector:"[value*='".concat(l.RE.callMenuId,"']"),domEvent:"change"},{eventName:u.Z.CALL_CHANNEL_EXPAND,selector:".".concat(l.uz.cmCallLinkClass)},{eventName:u.Z.SCHED_CHANNEL_EXPAND,selector:"[value='".concat(l.pu.schedulerMenuId,"']"),domEvent:"change"},{eventName:u.Z.CM_SCHEDULER_CLICK,selector:".".concat(l.uz.schedulerLinkClass)},{eventName:u.Z.CM_SUPPORT_CLICKED,selector:".".concat(l.uz.supportLinkClass)},{eventName:u.Z.CUSTOM_LINK_CLICKED,selector:".".concat(l.uz.customLinkClass)},{eventName:u.Z.SCH_TOPIC_SELECT,selector:"#".concat(l.pu.topicDropdownId),domEvent:"change"},{eventName:u.Z.SCH_SUGGESTLINK_CLICKED,selector:".".concat(l.pu.suggestedLinkClass)},{eventName:u.Z.CM_PHONE_CLICK,selector:".".concat(l.uS.botMessageClass," [data-ibm-contact*=bot-phone],[ibm-bot-link-type*=phone]")},{eventName:u.Z.BOT_LINK_CLICKED,selector:".".concat(l.uS.botMessageClass," [data-ibm-contact*=bot],[ibm-bot-link-type]")},{eventName:u.Z.NURTURE_CLOSED,selector:".".concat(l.t6.closeBtnClass," img")},{eventName:u.Z.NURTURE_LINK,selector:".".concat(l.t6.btnClass)},{eventName:u.Z.PROACTIVE_LINK_CLICK,selector:".".concat(f.Z.popup," a, .").concat(m.Z.popup," a")},{eventName:u.Z.PROACTIVE_POPUP_CLICK,selector:".".concat(f.Z.popup,", .").concat(m.Z.popup)},{eventName:u.Z.PROACTIVE_CHAT_CLICK,selector:"#".concat(l.yH.startChatButtonId)},{eventName:u.Z.PROACTIVE_SCHED_CLICK,selector:"#".concat(l.yH.schedButtonId)},{eventName:u.Z.WELCOME_MESSAGE_CLICK,selector:".".concat(m.Z.popup)},{eventName:u.Z.CM_PHONE_CLICK,selector:".".concat(l.oj.phoneNumberClass)}],_=r(43025),h=r(1768),b=r(79655),g=r(55185),y=r(17253),v=r(4913),x=r(64296),w=r(8270),k=r(20643),E=r.n(k),C=r(77379),T=r.n(C),I=r(82641),S=r.n(I),A=r(3479),N=r(1862),O=r(59499),P=r(51733),D=r(30800),L=r(45455),R=r(57003),M=r(19187),X=r(49552),Z=r(1821),U=r(70004),H=r(45857),B=r(35478),F=["eventName","payload","$element","state"],z={primaryCategory:"LVADVISOR",type:"element"},j=(n={},(0,w.Z)(n,L.S9.CHAT,"CHAT"),(0,w.Z)(n,L.S9.SCHEDULER,"SCHEDULER"),(0,w.Z)(n,L.S9.CALL,"PHONE"),(0,w.Z)(n,L.S9.EMAIL,"EMAIL"),(0,w.Z)(n,L.S9.SUPPORT_CHAT,"SUPPORT"),(0,w.Z)(n,L.S9.CUSTOM,"CUSTOM"),n),Y=(a={},(0,w.Z)(a,R.le.SALES,"SALES"),(0,w.Z)(a,R.le.SUPPORT,"SUPPORT"),(0,w.Z)(a,R.le.SOMETHING_ELSE,"SOMETHING ELSE"),a);function G(t){window.ibmStats&&window.ibmStats.event(t),(0,U.G)(t)}var W=function(){function t(){(0,v.Z)(this,t),this.categories={chat:"CM",sched:h.HT?(0,h.hV)(M.pu.CONFIRMATION_NUMBER)?"EDIT PAGE":"LANDING PAGE":(0,h.al)("/edit.html")?"EDIT PAGE":"CM"},this.eventMap=this.getEventMapping()}return(0,x.Z)(t,[{key:"track",value:function(t){var e=t.eventName,r=t.payload,n=t.$element,a=t.state,o=(0,y.Z)(t,F);if(this.eventMap[e]){var i=this.eventMap[e]((0,g.Z)({},o,{payload:r,$element:n,state:a})),s=function(t){return t&&Promise.resolve(t).then((function(t){S()(t)||((0,h.hV)(M.Cg.CM_ANALYTICS)&&h.fF.log("COREMETRICS FIRED: ".concat(t.eventName),t),G(t))}))};Array.isArray(i)?i.forEach(s):i&&s(i)}}},{key:"fire",value:function(t){return G(t)}},{key:"getEventMapping",value:function(){var t,e=this;return t={},(0,w.Z)(t,u.Z.INITIALIZED,(function(t){var e=t.payload,r=[];return r.push((0,h.gw)().then((function(){var t=(0,_.bh)().getState();return K(T()({eventName:"CMAAS-INITIALIZED",eventCategoryGroup:"CMAAS-STATE",attribute2:(0,Z.oQ)()?"CUSTOM":S()(e)?"NO-CMAAS":"CMAAS",attribute3:c()("[data-ibm-contact=contact-link]").length>0?"CTA":"NO-CTA",attribute4:S()(e)?"NO-CM":"CM"},tt(t)),t)}))),r})),(0,w.Z)(t,u.Z.CM_PILL_CLICK,(function(t){var r=t.state;return e.categories.chat="CM",[K(T()({eventName:"CM-EXPANDED",attribute3:"CM",attribute5:et(r)},tt(r)),r)]})),(0,w.Z)(t,u.Z.CTA_CLICK,(function(t){var r=t.state,n=t.$element;switch(n.attr("data-ibm-contact")){case"email-link":return e.eventMap[u.Z.CM_EMAIL_CLICK]({state:r,clickType:"CTA",$element:n});case"phone-link":return e.eventMap[u.Z.CM_PHONE_CLICK]({state:r,clickType:"CTA",$element:n});case"chat-link":return void(e.categories.chat="CTA");case"contact-link":return K(T()({eventName:"CM-EXPANDED",attribute3:"CTA",attribute5:et(r)},tt(r)),r);case"scheduler-contact-link":case"scheduler-link":return void(e.categories.sched="CTA")}})),(0,w.Z)(t,u.Z.CM_CLOSE_MIN_CLICK,(function(t){var e=t.state;return K(T()({eventName:"CM-MINIMIZE",attribute5:et(e)},tt(e)),e)})),(0,w.Z)(t,u.Z.CM_HOME_CLICK,(function(t){var e=t.state;return K(T()({eventName:"CM-HOME",attribute5:et(e)},tt(e)),e)})),(0,w.Z)(t,u.Z.CM_TOGGLE_MENU_CLICK,(function(t){var e=t.state;return K(T()({eventName:"CM-MENU",attribute5:et(e)},tt(e)),e)})),(0,w.Z)(t,u.Z.CM_LOCALE_OPEN,(function(t){var e=t.state;return K({eventName:"CM-CTRYSELECT",eventCallBackCode:(0,A.I4)(e)},e)})),(0,w.Z)(t,u.Z.ROUTER_CARD_CLICK,(function(t){var e=t.state,r=Y[(0,D._g)(e)],n=(0,D.U6)(e);return K({eventName:"CM-ROUTESELECT",attribute3:"".concat(r,"-").concat(n?"DROPDOWN":"MAIN")},e)})),(0,w.Z)(t,u.Z.CM_MENU_ACCORDIAN_CLICK,(function(t){var e=t.state;if(!t.$element.is(".".concat(l.oj.phoneNumberClass)))return K({eventName:"CM-CHANNELSELECT",attribute3:j[(0,D.Jv)(e)]},e)})),(0,w.Z)(t,u.Z.CM_PRIVACY_CLICK,(function(t){var e=t.state;return K({eventName:"CM-PRIVACY",attribute10:t.$element.attr("href")},e)})),(0,w.Z)(t,u.Z.CUSTOM_LINK_CLICKED,(function(t){var e=t.state,r=t.$element,n=(0,N.d3)(e),a=r.attr("href")||r.parents("a").attr("href");return K({eventName:"OTHER-CHANNEL",executionPath:n?n.skill:null,attribute6:a},e)})),(0,w.Z)(t,u.Z.CHAT_AVAILABILITY,(function(){return(0,h.gw)().then((function(){var t=(0,_.bh)().getState(),e=(0,N._v)(t);return rt({eventName:"CHAT-AVAILABILITY",attribute4:navigator.userAgent,attribute5:et(t),attribute6:S()(e)?"NOBOT":"BOT-"+e[0].skill},t)}))})),(0,w.Z)(t,u.Z.CM_TEXT_INPUT_CLICK,(function(t){var e=t.state;switch((0,N.d3)(e).queueType){case R._E.SYNC:case R._E.ASYNC:return rt({eventName:"CHAT-TEXTBOX"},e);case R._E.BOT:return at({eventName:"BOT-TEXTBOX"},e)}})),(0,w.Z)(t,u.Z.CHAT_TRANSFER,(function(t){var r=t.payload;try{r.to.queueType===R._E.SYNC&&r.from.queueType===R._E.BOT&&(e.categories.chat="BOT")}catch(t){}})),(0,w.Z)(t,u.Z.CHAT_CONNECTING,(function(t){var r=t.eventCategoryGroup,n=t.skill;return(0,h.gw)().then((function(){var t=(0,_.bh)().getState();return rt({eventName:"CHAT",type:"conversion",eventAction:1,eventCategoryGroup:r||e.categories.chat,attribute2:n},t)}))})),(0,w.Z)(t,u.Z.CHAT_CONNECTED,(function(t){var r=t.eventCategoryGroup,n=t.skill;return(0,h.gw)().then((function(){var t=(0,_.bh)().getState(),a=(0,N._v)(t);return rt({eventName:"CHAT-CONNECTED",executionPath:S()(a)?(0,A.v8)(t):"BOT-"+a[0].skill,eventCategoryGroup:r||e.categories.chat,attribute2:n},t)}))})),(0,w.Z)(t,u.Z.CHAT_INTERACTIVE,(function(t){var r=t.eventCategoryGroup;return rt({eventName:"CHAT",type:"conversion",eventAction:2,eventCategoryGroup:void 0===r?e.categories.chat:r},(0,_.bh)().getState())})),(0,w.Z)(t,u.Z.CHAT_AUTH_CLICK,(function(t){var e=t.state,r=t.$element;return rt({eventName:"CHAT-AUTHENTICATE",attribute3:r.closest(l.uS.chatWindowClass).length?"CHAT":"MENU",attribute7:r.hasClass(l.W6.registerLinkClass)?"NEW ACCT":"SIGN IN"},e)})),(0,w.Z)(t,u.Z.RETURN_TO_CHAT_CLICK,(function(t){return rt({eventName:"CHAT-RETURN"},t.state)})),(0,w.Z)(t,u.Z.SURVEY_DISPLAYED,(function(t){var e=t.state;if(t.payload.type===H.r.ASYNC)return rt({eventName:"CHAT-MEDALLIADISPLAYED"},e)})),(0,w.Z)(t,u.Z.SURVEY_COMPLETE,(function(t){var e=t.state;if(t.payload.type===H.r.ASYNC)return rt({eventName:"CHAT-MEDALLIACOMPLETED"},e)})),(0,w.Z)(t,u.Z.BOT_LINK_SENT,(function(t){var e=t.state,r=t.payload,n=[];return r&&r.forEach((function(t){var r=t.type,a=t.href;a&&n.push(at({eventName:"BOT-LINKSENT",attribute1:a,attribute3:ot[r]||ot.other},e))})),n})),(0,w.Z)(t,u.Z.BOT_LINK_CLICKED,(function(t){var r=t.state,n=t.$element,a=n.attr("data-ibm-contact")||n.closest("[data-ibm-contact]").attr("data-ibm-contact")||n.attr("ibm-bot-link-type")||n.closest("[ibm-bot-link-type]").attr("ibm-bot-link-type");switch(a){case ot["bot-email"]:case ot.email:case"bot-email":case"email":return e.eventMap[u.Z.CM_EMAIL_CLICK]({state:r,clickType:"BOT"});case ot["bot-phone"]:case ot.phone:case"phone":return e.eventMap[u.Z.CM_PHONE_CLICK]({state:r,clickType:"BOT"});case"bot-scheduler":case"scheduler":e.categories.sched="BOT"}return(0,h.gw)().then((function(){return at({eventName:"BOT-LINKCLICKED",attribute1:n.attr("href")||n.closest("[ibm-bot-link-href]").attr("ibm-bot-link-href"),attribute3:ot[a]||ot.other},r)}))})),(0,w.Z)(t,u.Z.CM_EMAIL_CLICK,(function(t){var e=t.state,r=t.clickType;return V({eventName:"EMAIL",eventCategoryGroup:void 0===r?"CM":r,executionPath:(0,A.HX)(e).url})})),(0,w.Z)(t,u.Z.CM_PHONE_CLICK,(function(t){var e=t.state,r=t.clickType,n=void 0===r?"CM":r,a=t.$element,o=(0,A.RL)(e).phone.phoneNumber;return"bot-phone"===a.attr("data-ibm-contact")&&(n="BOT"),V({eventName:"PHONE",eventCategoryGroup:n,executionPath:o})})),(0,w.Z)(t,u.Z.SCH_START,(function(){return(0,h.gw)().then(h.gw).then((function(){var t=(0,_.bh)().getState();return nt({eventName:"SCHDLR",type:"conversion",eventAction:1,eventCategoryGroup:e.categories.sched},t)}))})),(0,w.Z)(t,u.Z.SCH_TOPIC_SELECT,(function(){return(0,h.gw)().then((function(){return nt({eventName:"SCHDLR-TOPIC"},(0,_.bh)().getState())}))})),(0,w.Z)(t,u.Z.SCH_QUESTION_KEY,(function(){return(0,h.gw)().then((function(){return nt({eventName:"SCHDLR-QUESTION"},(0,_.bh)().getState())}))})),(0,w.Z)(t,u.Z.SCH_TIME_KEY,(function(){return(0,h.gw)().then((function(){return nt({eventName:"SCHDLR-TIME"},(0,_.bh)().getState())}))})),(0,w.Z)(t,u.Z.SCH_SUGGESTLINK_CLICKED,(function(t){var e=t.$element;return(0,h.gw)().then((function(){var t=(0,_.bh)().getState(),r=e.attr("href");return nt({eventName:"SCHDLR-SUGGESTLINK",attribute2:(0,O.EU)(t),eventCallBackCode:r},t)}))})),(0,w.Z)(t,u.Z.SCH_CONTACT_INFO_KEY,(function(t){var e=t.state;return this.hasFiredSchContactField=!0,nt({eventName:"SCHDLR-CONTACTINFO"},e)})),(0,w.Z)(t,u.Z.SCH_BOOKED,(function(){return(0,h.gw)().then((function(){var t=(0,_.bh)().getState();return nt({eventName:"SCHDLR",type:"conversion",eventAction:2,eventCategoryGroup:e.categories.sched,attribute2:(0,O.EU)(t)},t)}))})),(0,w.Z)(t,u.Z.SCH_EDIT_CLICK,(function(){return(0,h.gw)().then((function(){return nt({eventName:"SCHDLR-MODIFY"},(0,_.bh)().getState())}))})),(0,w.Z)(t,u.Z.SCH_CANCEL_CLICK,(function(){return(0,h.gw)().then((function(){return nt({eventName:"SCHDLR-CANCEL"},(0,_.bh)().getState())}))})),(0,w.Z)(t,u.Z.SCH_ERROR,(function(){return(0,h.gw)().then((function(){var t=(0,_.bh)().getState();return nt({eventName:"SCHDLR-ERROR",attribute2:(0,O.zg)(t)},t)}))})),(0,w.Z)(t,u.Z.NURTURE_DISPLAYED,(function(t){var e=t.state,r=t.payload,n=void 0===r?{}:r;return $({mappedEvent:{eventName:"NURTURE-DISPLAYED"},state:e,notification:(0,X.TH)(e)[n.id]})})),(0,w.Z)(t,u.Z.NURTURE_TIMEOUT,(function(t){var e=t.state,r=t.payload,n=void 0===r?{}:r;return $({mappedEvent:{eventName:"NURTURE-TIMEOUT"},state:e,notification:(0,X.TH)(e)[n.id]})})),(0,w.Z)(t,u.Z.NURTURE_CLOSED,(function(t){var e=t.state,r=t.payload,n=void 0===r?{}:r,a=t.$element,o=n&&n.id||a.attr(l.oj.notificationId)||a.closest("[".concat(l.oj.notificationId,"]")).attr(l.oj.notificationId);return $({mappedEvent:{eventName:"NURTURE-CLOSED"},state:e,notification:(0,X.TH)(e)[o]})})),(0,w.Z)(t,u.Z.NURTURE_LINK,(function(t){var r=t.state,n=t.$element,a=n.attr(l.oj.notificationId)||n.closest("[".concat(l.oj.notificationId,"]")).attr(l.oj.notificationId),o=(0,X.TH)(r)[a];if(o){if(o.type!==R.GT.CHAT)return $({mappedEvent:{eventName:"NURTURE-LINK",attribute6:n.attr("href")},state:r,notification:o});e.categories.chat="NURTURE"}})),(0,w.Z)(t,u.Z.NURTURE_BLOCKED,(function(t){var e=t.state,r=t.payload;return $({mappedEvent:{eventName:"NURTURE-BLOCKED"},state:e,notification:(0,X.TH)(e)[r.id]})})),(0,w.Z)(t,u.Z.PROACTIVE_DISPLAYED,(function(t){var r=t.payload,n=t.state;return(0,h.gw)().then((function(){if(r)return e.eventMap[u.Z.NURTURE_DISPLAYED]({state:n});switch(parseInt((0,h.ej)(R.i7),10)){case L.oM.CLOSED:return e.eventMap[u.Z.NURTURE_CLOSED]({state:n});case L.oM.TIMEOUT:return e.eventMap[u.Z.NURTURE_TIMEOUT]({state:n});case L.oM.BLOCKED:return e.eventMap[u.Z.NURTURE_BLOCKED]({state:n})}}))})),(0,w.Z)(t,u.Z.PROACTIVE_POPUP_CLICK,(function(){e.categories.chat="NURTURE",e.categories.sched="NURTURE"})),(0,w.Z)(t,u.Z.PROACTIVE_CHAT_CLICK,(function(){e.categories.chat="NURTURE"})),(0,w.Z)(t,u.Z.PROACTIVE_SCHED_CLICK,(function(){e.categories.sched="NURTURE"})),t}}]),t}();function V(t){return T()({},z,t)}function K(t,e){return T()({eventCategoryGroup:"CM-STATE",executionPath:(0,A.v8)(e),eventCallBackCode:(0,A.eA)(e),attribute1:(0,A.E)(e).focusArea},z,t)}function q(t){if(!t||!t.type)return"TIMER";var e=t.type.toUpperCase();switch(e){case"POST":case"NOTE":return e;case"CHAT":return"NOTE";default:return"NURTURE"}}function J(t,e){var r;r=e&&e.type?e.type.toUpperCase():"TIMER";var n=et(t);switch(r){case"CHAT":case"TIMER":return n;default:return"NOCHAT"}}function Q(t,e){return"TIMER"===(e&&e.type?e.type.toUpperCase():"TIMER")?S()((0,O.oD)(t))?"NOSCHDLR":"SCHDLR":"NOSCHDLR"}function $(t){var e=t.mappedEvent,r=t.state,n=t.notification,a=void 0===n?{}:n,o=E()(a,"originalMsgObj.extras.ibm_campaign_id",a.id),i=E()(a,"originalMsgObj.extras.ibm_app_id"),s=(0,B.$Z)(r),c=s?R.dU.LOTAME:(a.nurtureType||R.dU.TIMER).toUpperCase();return T()({primaryCategory:"LVADVISOR",eventCategoryGroup:"NURTURE-STATE",type:"element",executionPath:(0,A.v8)(r),eventCallBackCode:o,attribute1:i,attribute2:(0,N.qO)(r),attribute3:q(a),attribute5:J(r,a),attribute7:Q(r,a),attribute8:c,attribute9:s},e)}function tt(t){var e=(0,N._v)(t);return{attribute6:S()(e)?"NOBOT":"BOT-"+e[0].skill,attribute7:S()((0,O.oD)(t))?"NOSCHDLR":"SCHDLR",attribute8:S()((0,A.HX)(t))?"NOEMAIL":"EMAIL",attribute9:S()((0,A.Nt)(t))?"NOPHONE":"PHONE"}}function et(t){return(0,P.S5)(t)?(0,P.ch)(t)?"AGENT":"NOAGENT":(0,P.dX)(t)?"NOCHAT":"UNROUTED"}function rt(t,e){var r,n,a=(0,N.d3)(e);switch(a&&a.queueType){case R._E.SYNC:n=a.rtSessionId,r=(0,N.K3)(e);break;case R._E.ASYNC:n=a.conversationId,r=E()(a,"consumerInfo.engagementId");break;case R._E.BOT:r=E()(a,"context.conversation_id")}var o=(0,N.yz)(e);return T()({eventCategoryGroup:"CHAT-STATE",executionPath:(0,A.v8)(e),eventCallBackCode:r,attribute1:n,attribute2:a&&a.queueType===R._E.BOT?o?"SMS:BOT-"+a.skill:"BOT-"+a.skill:(0,N.qO)(e)||a&&a.skill},z,t)}function nt(t,e){return T()({eventCategoryGroup:"SCHDLR-STATE",executionPath:(0,O.oD)(e).routingCode,eventCallBackCode:(0,O.$h)(e),attribute1:(0,O.gi)(e)},z,t)}function at(t,e){var r=(0,N._v)(e)||[],n=(0,b.Z)(r,1)[0],a=void 0===n?{}:n;return T()({eventCategoryGroup:"BOT-STATE",executionPath:"BOT-"+a.skill,eventCallBackCode:E()(a,"context.conversation_id")},z,t)}var ot={"chat-link-bot":"CHAT",chat:"CHAT","bot-email":"EMAIL",email:"EMAIL","bot-phone":"PHONE",phone:"PHONE","bot-scheduler":"SCHDLR",scheduler:"SCHDLR","bot-support":"SUPPORT",support:"SUPPORT","bot-trial":"TRIAL",trial:"TRIAL","bot-checkout":"CHECKOUT",checkout:"CHECKOUT",choice:"CHOICE",other:"OTHERLINK"};const it=new W;var st,ct=r(82234);const lt=(st={},(0,w.Z)(st,ct.Z.SCHEDULER.BOOK_APPOINTMENT,u.Z.SCH_BOOKED),(0,w.Z)(st,"".concat(ct.Z.CM_API.INITIAL_LOOKUP,"-ERROR"),u.Z.CM_API_ERROR),st);var ut=[it],pt=[],ft=[],mt={init:function(t){var e,r=c()(t);i()(d,(function(t){r.on(t.domEvent||"click",t.selector,(function(e){var r=c()(e.target),n=(0,_.bh)().getState();setTimeout((function(){mt.fire({$element:r,eventName:t.eventName,prevState:n})}),0)}))})),c()(document.body).on("click","[data-ibm-contact]",dt),i()((e=mt.fire,[function(){this.select=A.h0,this.onChange=function(t,r,n){(0,A.GY)(n)&&t&&!(0,h.xb)(t)&&e({eventName:u.Z.INITIALIZED,payload:t})}},function(){this.select=P.Sf,this.onChange=function(t){void 0!==t&&e({eventName:u.Z.CHAT_AVAILABILITY,payload:t})}},function(){var t=this;this.hasFiredInteractiveIds=[],this.hasFiredBotInteractiveIds=[],this.select=N.tI,this.onChange=function(r,n,a){if(r){var o=r.messages.filter((function(t){return"visitor"===t.type&&!t.isHistory})).length>0,i=r.messages.filter((function(t){return"bot"===t.type&&!t.isHistory})).length>0,s=(0,N.Q0)(a);if(s&&(-1===t.hasFiredInteractiveIds.indexOf(r.adapterId)&&r.adapterId&&s.state===L.dl.CHATTING&&r.messages.filter((function(t){return"visitor"===t.type&&!t.isHistory})).length>0&&(t.hasFiredInteractiveIds.push(s.adapter.id),e({eventName:u.Z.CHAT_INTERACTIVE,payload:s.adapter})),-1===t.hasFiredBotInteractiveIds.indexOf(r.adapterId)&&s.state===L.dl.CHATTING&&s.adapter.queueType===R._E.BOT&&i&&o&&(t.hasFiredBotInteractiveIds.push(s.adapter.id),e({eventName:u.Z.BOT_INTERACTIVE})),s.adapter.queueType===R._E.BOT&&r.messages.length>0)){var c=r.messages[r.messages.length-1].lines||[];(c=c.filter((function(t){return t.type!==R.Bs.text}))).length>0&&e({eventName:u.Z.BOT_LINK_SENT,payload:c})}}}},function(){this.select=P.ZH,this.onChange=function(t,r,n){i()(t,(function(t,a){if(!r[a]){var o=(0,N.uP)(t,n),i=(0,N.uP)(a,n);o&&i&&e({eventName:u.Z.CHAT_TRANSFER,payload:{to:i,from:o}})}}))}},function(){this.select=O.vW,this.onChange=function(t){t&&e({eventName:u.Z.SCH_START})}},function(){this.select=O.zg,this.onChange=function(t){t&&e({eventName:u.Z.SCH_ERROR})}},function(){this.select=O.Yu,this.onChange=function(t){t&&e({eventName:u.Z.SCH_CAN_SUBMIT})}},function(){this.select=O.gK,this.onChange=function(t){t&&e({eventName:u.Z.SCH_SUBMITTING})}},function(){this.select=O.MT,this.onChange=function(t,r){t&&!r&&e({eventName:u.Z.SCH_QUESTION_KEY})}},function(){this.select=O.Lb,this.onChange=function(t){t&&e({eventName:u.Z.SCH_TIME_KEY})}},function(){this.select=O.p5,this.onChange=function(t){t&&e({eventName:u.Z.SCH_CONTACT_INFO_KEY})}},function(){this.select=P.b6,this.onChange=function(t,r,n){var a=(0,P.pY)(n),o=(0,N._v)(n);switch(t){case L.dl.CHATTING:e({eventName:u.Z.CHAT_CONNECTED}),(0,h.xb)(o)||e({eventName:u.Z.CHAT_CONNECTING});break;case L.dl.WAITING:e({eventName:u.Z.CHAT_CONNECTING}),e({eventName:u.Z.CHAT_WINDOW_OPEN,payload:{startChatButtonType:a}});break;case L.dl.ENDED:e({eventName:u.Z.CHAT_CLOSED,payload:{startChatButtonType:a}})}}},function(){this.select=N.jZ,this.onChange=function(t,r,n){t&&r&&t[0]!=r[0]&&e({eventName:u.Z.CHAT_AGENT_JOINED,payload:{startChatButtonType:(0,P.pY)(n),participantId:t[0]}})}},function(){this.select=B.cq,this.onChange=function(t,r){void 0!==r&&e({eventName:u.Z.PROACTIVE_DISPLAYED,payload:t})}},function(){this.select=X.Fe,this.onChange=function(t,r){t&&t.length&&t.length>r.length&&e({eventName:u.Z.NURTURE_BLOCKED,payload:{id:t[t.length-1]}})}},function(){this.select=X.ay,this.onChange=function(t,r){t&&t.length&&t.length>r.length&&e({eventName:u.Z.NURTURE_DISPLAYED,payload:{id:t[t.length-1]}})}}]),(function(t){var e=new t;e.unsubscribe=(0,_.SS)(e.select,(function(){try{e.onChange.apply(e,arguments)}catch(t){h.fF.error("analytics.observers error: ",{observer:e,err:t})}})),pt.push(e.unsubscribe)}))},addTracker:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ut.push(t),e&&ft.forEach((function(e){return ht(t,e)}))},fire:function(t){try{t.state||(t.state=(0,_.bh)().getState()),(0,h.hV)(M.Cg.CM_ANALYTICS)&&h.fF.log("ANALYTICS.FIRE: ",t),ft.push(t),ut.forEach((function(e){ht(e,t)}))}catch(e){h.fF.error("Error tracking event",{event:t,error:e})}},destroy:function(){c()(document.body).off("click",dt),pt.forEach((function(t){return t()})),pt=[]}};function dt(t){var e=(0,_.bh)().getState();setTimeout((function(){mt.fire({$element:c()(t.target).closest("[data-ibm-contact]"),eventName:u.Z.CTA_CLICK,prevState:e})}),0)}function _t(t){var e=t.getState;return function(t){return function(r){var n=lt[r.type],a=e();if(t(r),n){var o=e();mt.fire({eventName:n,state:o,prevState:a})}}}}function ht(t,e){try{t.track(e)}catch(r){h.fF.error("Couldn't fire analytic: ",{tracker:t,e,err:r})}}},45857:(t,e,r)=>{"use strict";r.d(e,{r:()=>n});var n={ASYNC:"ASYNC"}},44539:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});const n={INITIALIZED:"INITIALIZED",CM_PILL_CLICK:"CM_PILL_CLICK",CM_CLOSE_MIN_CLICK:"CM_CLOSE_MIN_CLICK",CM_HOME_CLICK:"CM_HOME_CLICKED",CM_TOGGLE_MENU_CLICK:"CM_TOGGLE_CLICKED",CM_LOCALE_OPEN:"CM_LOCALE_OPEN",CM_MENU_ACCORDIAN_CLICK:"CM_MENU_ACCORDIAN_CLICK",CM_PRIVACY_CLICK:"CM_PRIVACY_CLICK",CM_TEXT_INPUT_CLICK:"CM_TEXT_INPUT_CLICK",ROUTER_CARD_CLICK:"ROUTER_CARD_CLICK",SOMETHING_ELSE_CLICK:"SOMETHING_ELSE_CLICK",SCHED_CHANNEL_EXPAND:"SCHED_CHANNEL_EXPAND",CM_SCHEDULER_CLICK:"CM_SCHEDULER_CLICK",EMAIL_CHANNEL_EXPAND:"EMAIL_CHANNEL_EXPAND",CM_EMAIL_CLICK:"CM_EMAIL_CLICK",CALL_CHANNEL_EXPAND:"CALL_CHANNEL_EXPAND",CM_PHONE_CLICK:"CM_PHONE_CLICK",CM_SUPPORT_CLICKED:"CM_SUPPORT_CLICKED",CHAT_CHANNEL_EXPAND:"CHAT_CHANNEL_EXPAND",CUSTOM_LINK_CLICKED:"CUSTOM_LINK_CLICKED",CMBUTTONS_SALESVERBIAGE:"CMBUTTONS_SALESVERBIAGE",PHONE_CLICKED:"PHONE_CLICKED",SUPP_CHAT_AVAILABILITY:"SUPP_CHAT_AVAILABILITY",CHAT_AVAILABILITY:"CHAT_AVAILABILITY",CHAT_CONNECTING:"CHAT_CONNECTING",CHAT_CONNECTED:"CHAT_CONNECTED",CHAT_INTERACTIVE:"CHAT_INTERACTIVE",BOT_INTERACTIVE:"BOT_INTERACTIVE",CHAT_AUTH_CLICK:"CHAT_AUTH_CLICK",CHAT_TRANSFER:"CHAT_TRANSFER",RETURN_TO_CHAT_CLICK:"RETURN_TO_CHAT_CLICK",BOT_LINK_SENT:"BOT_LINK_SENT",BOT_LINK_CLICKED:"BOT_LINK_CLICKED",CHAT_WINDOW_OPEN:"CHAT_WINDOW_OPEN",CHAT_AGENT_JOINED:"CHAT_AGENT_JOINED",CHAT_CLOSED:"CHAT_CLOSED",SURVEY_DISPLAYED:"SURVEY_DISPLAYED",SURVEY_COMPLETE:"SURVEY_COMPLETE",SCH_START:"SCH_START",SCH_TOPIC_SELECT:"SCH_TOPIC_SELECT",SCH_SUGGESTLINK_CLICKED:"SCH_SUGGESTLINK_CLICKED",SCH_TIMEZONE_SELECT:"SCH_TIMEZONE_SELECT",SCH_QUESTION_KEY:"SCH_QUESTION_KEY",SCH_TIME_KEY:"SCH_TIME_KEY",SCH_CONTACT_INFO_KEY:"SCH_CONTACT_INFO_KEY",SCH_CONTACT_FIELD_KEY:"SCH_CONTACT_FIELD_KEY",SCH_SUBMIT_CLICKED:"SCH_SUBMIT_CLICK",SCH_SUBMITTING:"SCH_SUBMITTING",SCH_APPT_SLOT_SELECT:"SCH_APPT_SLOT_SELECT",SCH_EDIT_CLICK:"SCH_EDIT_CLICK",SCH_CANCEL_CLICK:"SCH_CANCEL_CLICK",SCH_CAN_SUBMIT:"SCH_CAN_SUBMIT",SCH_BOOKED:"SCH.BOOKED",SCH_ERROR:"SCH_ERROR",CTA_CLICK:"CTA_CLICK",PROACTIVE_DISPLAYED:"PROACTIVE_DISPLAYED",PROACTIVE_LINK_CLICK:"PROACTIVE_LINK_CLICK",PROACTIVE_CHAT_CLICK:"PROACTIVE_CHAT_CLICK",PROACTIVE_SCHED_CLICK:"PROACTIVE_SCHED_CLICK",PROACTIVE_POPUP_CLICK:"PROACTIVE_POPUP_CLICK",NURTURE_DISPLAYED:"NURTURE-DISPLAYED",NURTURE_TIMEOUT:"NURTURE-TIMEOUT",NURTURE_CLOSED:"NURTURE-CLOSED",NURTURE_LINK:"NURTURE-LINK",NURTURE_BLOCKED:"NURTURE-BLOCKED",WELCOME_MESSAGE_CLICK:"WELCOME_MESSAGE_CLICK",CM_API_ERROR:"CM_API_ERROR"}},70004:(t,e,r)=>{"use strict";r.d(e,{G:()=>T,s:()=>P});var n,a=r(8270),o=r(55185),i=r(31311),s=r(54390),c=r(54299),l=r.n(c),u=r(39982),p=r.n(u),f=r(85066),m=r.n(f),d=r(20643),_=r.n(d),h=r(84264),b=r.n(h),g=r(1768),y=r(1821),v=r(19187),x=r(76625),w=r(65545),k=x.i,E=(0,w.Z)("@cm-app.analytics",(0,g.hV)(v.Cg.CM_ANALYTICS)),C=function(){return(0,g.r8)()||(0,g.zm)("localhost:3000")||(0,g.hV)(v.Cg.CM_SEGMENT)||(0,g.hV)(v.Cg.CM_ANALYTICS)},T=function(){var t=(0,s.Z)(b().mark((function t(e){var r,a,s,c;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n||(n=new Promise((function(t){if(C())return t();var e=setInterval((function(){var r=_()(window,"analytics.ready");r&&(clearInterval(e),r(t))}),2e3)}))),n;case 2:if(t.prev=2,!(r=S())){t.next=14;break}return(a=m()(N,(function(t){return t.matcher(e,"eventName")}))||m()(N,(function(t){return t.matcher(e,"eventCategoryGroup")})))||E.log("SEGMENT: NO MAPPER FOUND",e),s=O[e.eventName],"object"===(0,i.Z)(s)&&(s=s[e.eventAction]),c=(0,o.Z)({},A(e),a.map(e)),p()(c,(function(t,e){null===t&&delete c[e]})),t.abrupt("return",I((0,o.Z)({},r,{event:s,properties:c})).catch((function(t){E.warn("SEGMENT: did not track (api error)",t,e)})));case 14:E.warn("SEGMENT: did not track (no ids)",e);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),E.warn("Segment.trackCoremetric error: ",t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),I=function(t){var e=C()?"FM9tFq3Osf8AOjykXG8Rf2seNwmeDa3O":"lzCmQxgm7zM7wYL8tK50XSl2F1zfiVsY";return E.log("SEGMENT: FIRED",t),(0,g._G)({url:"https://api.segment.io/v1/track",method:"POST",headers:{Authorization:"Basic ".concat(btoa("".concat(e,":")))},contentType:"application/json",data:JSON.stringify(l()(t,{context:{library:{name:"cm-app",version:k},source:{name:"cm-app"}}})),json:!0})},S=function(){var t;try{t=C()?{userId:"dev-id",anonymousId:"anonymous-id"}:{userId:window.analytics.user().id(),anonymousId:window.analytics.user().anonymousId()}}catch(t){}return t&&(t.userId||t.anonymousId)?t:null},A=function(t){return{cmEventCategoryGroup:t.eventCategoryGroup,productTitle:(0,y.Xx)(),url:window.location.href}},N=[{matcher:function(t,e){return"eventCategoryGroup"===e&&"CMAAS-STATE"===t[e]},map:function(t){return{cmPageSkill:t.executionPath,cmLocale:t.eventCallBackCode,cmFocusArea:t.attribute1,cmCmaasPresent:t.attribute2,cmCtaPresent:t.attribute3,cmPresent:t.attribute4,cmSupportPresent:t.attribute5,cmBotPresent:t.attribute6,cmSchedulerPresent:t.attribute7,cmEmailPresent:t.attribute8,cmPhonePresent:t.attribute9,cmDestinationUrl:t.attribute10}}},{matcher:function(t,e){return"eventCategoryGroup"===e&&"CM-STATE"===t[e]},map:function(t){return{cmPageSkill:t.executionPath,cmLocale:t.eventCallBackCode,cmFocusArea:t.attribute1,cmLinkType:t.attribute3,cmSupportChatAvailability:t.attribute4,cmSalesChatAvailability:t.attribute5,cmBotPresent:t.attribute6,cmSchedulerPresent:t.attribute7,cmEmailPresent:t.attribute8,cmPhonePresent:t.attribute9,cmDestinationUrl:t.attribute10}}},{matcher:function(t,e){return"eventCategoryGroup"===e&&"NURTURE-STATE"===t[e]},map:function(t){return{cmPageSkill:t.executionPath,cmNurtureId:t.eventCallBackCode,cmNurtureAppId:t.attribute1,cmAgentSkill:t.attribute2,cmNurtureType:t.attribute3,cmSupportChatAvailability:t.attribute4,cmSalesChatAvailability:t.attribute5,cmDestinationUrl:t.attribute6,cmSchedulerPresent:t.attribute7,cmTrigger:t.attribute8,cmIndustryId:t.attribute9}}},{matcher:function(t,e){return"eventCategoryGroup"===e?"CHAT-STATE"===t[e]:-1!==["CHAT","CHAT-CONNECTED"].indexOf(t[e])},map:function(t){return{cmPageSkill:t.executionPath,cmEngagementId:t.eventCallBackCode,cmRealtimeId:t.attribute1,cmAgentSkill:t.attribute2,cmAuthenticationChannel:t.attribute3,cmChatAvailability:t.attribute5,cmBotPresent:t.attribute6,cmLinkType:t.attribute7}}},{matcher:function(t,e){return"eventCategoryGroup"===e&&"BOT-STATE"===t[e]},map:function(t){return{cmBotName:t.executionPath,cmConversationId:t.eventCallBackCode,cmDestinationUrl:t.attribute1,cmLinkType:t.attribute3}}},{matcher:function(t,e){return"eventCategoryGroup"===e?"SCHDLR-STATE"===t[e]:"SCHDLR"===t[e]},map:function(t){var e;return e={cmFormName:t.executionPath},(0,a.Z)(e,"SCHDLR-SUGGESTLINK"===t.eventName?"cmDestinationUrl":"cmApptID",t.eventCallBackCode),(0,a.Z)(e,"cmSchedulerTopic",t.attribute1),(0,a.Z)(e,"SCHDLR-ERROR"===t.eventName?"cmErrorCode":"cmQuestionClassName",t.attribute2),e}},{matcher:function(t,e){return"eventName"===e&&"EMAIL"===t[e]},map:function(t){return{cmMailSource:t.executionPath}}},{matcher:function(t,e){return"eventName"===e&&"PHONE"===t[e]},map:function(t){return{cmPhoneNumber:t.executionPath}}},{matcher:function(t,e){return"eventName"===e&&"SUPPORT"===t[e]},map:function(t){return{cmChatSkill:t.executionPath,cmDestinationUrl:t.attribute6}}},{matcher:function(t,e){return"eventName"===e&&"OTHER-CHANNEL"===t[e]},map:function(t){return{cmChatSkill:t.executionPath,cmDestinationUrl:t.attribute6}}}],O={"CMAAS-INITIALIZED":"CMaaS Initialized","CM-EXPANDED":"CMaaS Expanded","CM-MINIMIZE":"CMaaS Minimized","CM-HOME":"CMaaS Home Selected","CM-MENU":"CMaaS Menu Opened","CM-CTRYSELECT":"CMaaS Country Selected","CM-ROUTESELECT":"CMaaS Route Selected","CM-CHANNELSELECT":"CMaaS Channel Selected","CM-PRIVACY":"CMaaS Privacy Statement Clicked","NURTURE-DISPLAYED":"CMaaS Nurture Displayed","NURTURE-TIMEOUT":"CMaaS Nurture Timed Out","NURTURE-CLOSED":"CMaaS Nurture Closed","NURTURE-LINK":"CMaaS Nurture Link Clicked","NUTURE-BLOCKED":"CMaaS Nurture Blocked","CHAT-AVAILABILITY":"CMaaS Chat Agent Available","SUPPORTCHAT-AVAILBILITY":"CMaaS Support Chat Agent Available","CHAT-TEXTBOX":"CMaaS Chat Textbox Clicked","CHAT-CONNECTED":"CMaaS Chat Connected","CHAT-AUTHENTICATE":"CMaaS Chat Sign-in","CHAT-MEDALLIADISPLAYED":"CMaaS Medallia Survey Displayed","CHAT-MEDALLIACOMPLETED":"CMaaS Medallia Survey Completed","CHAT-RETURN":"CMaaS Chat Continued",CHAT:{1:"CMaaS Chat Opened",2:"CMaaS Chat Interactive"},"BOT-TEXTBOX":"CMaaS Bot Textbox Clicked","BOT-LINKSENT":"CMaaS Bot Link Sent","BOT-LINKCLICKED":"CMaaS Bot Link Clicked",SCHDLR:{1:"CMaaS Scheduler Opened",2:"CMaaS Scheduler Appt Confirmed"},"SCHDLR-TOPIC":"CMaaS Scheduler Topic Selected","SCHDLR-QUESTION":"CMaaS Scheduler Question Answered","SCHDLR-SUGGESTLINK":"CMaaS Scheduler Suggested Link Clicked","SCHDLR-CONTINUE":"CMaaS Scheduler Continued","SCHDLR-TIME":"CMaaS Scheduler Time Selected","SCHDLR-CONTACTINFO":"CMaaS Scheduler ContactInfo Entered","SCHDLR-MODIFY":"CMaaS Scheduler Appt Modified","SCHDLR-CANCEL":"CMaaS Scheduler Appt Canceled","SCHDLR-ERROR":"CMaaS Scheduler Error",EMAIL:"CMaaS Email Clicked",PHONE:"CMaaS Phone Clicked",SUPPORT:"CMaaS Support Clicked","OTHER-CHANNEL":"CMaaS Other Channel Clicked"},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.timeout,r=void 0===e?500:e;return Promise.race([new Promise((function(t,e){if(!window.analytics)return e("window.analytics not on page");window.analytics.ready((function(){t(window.analytics.user().traits())}))})),(0,g.GR)({time:r})])}},53543:(t,e,r)=>{"use strict";r.d(e,{Z:()=>ne});var n=r(4913),a=r(64296),o=r(81928),i=r(88503),s=r(93311),c=r(63123),l=r(17253),u=r(8270),p=r(55185),f=r(79655),m=r(20643),d=r.n(m),_=r(19157),h=r.n(_),b=r(35466),g=r(55091),y=r(92703),v=r.n(y),x=r(12917),w=r.n(x),k=r(57003),E=(r(46116),r(3074)),C=r.n(E),T=r(8563),I=r.n(T);const S="Read more";var A=r(4386);function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.Z)(t);if(e){var a=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var O=function(t){(0,o.Z)(r,t);var e=N(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){for(var t=this,e=this.props.review,r=[],n=0;n<5;n++)n<=e.rating-1?r.push(b.createElement("div",{className:v()(A.uS.reviewRatingStarClass,"ibm-star-full-link")})):r.push(b.createElement("div",{className:v()(A.uS.reviewRatingStarClass,"ibm-star-none-link")}));return b.createElement("div",{className:A.uS.reviewWrapperClass},b.createElement("div",{className:A.uS.reviewTitleClass},e.title),b.createElement("div",{className:A.uS.reviewRatingWrapperClass},b.createElement("div",{className:A.uS.reviewRatingTextClass},e.rating.toFixed(1)),b.createElement("div",{className:A.uS.reviewRatingStarWrapperClass},r)),b.createElement("div",{ref:function(e){return t._reviewBodyWholeDom=e},className:v()(A.uS.reviewBodyClass,A.l2.cmHidden)},e.body),b.createElement("div",{ref:function(e){return t._reviewBodyFoldDom=e},className:v()(A.uS.reviewBodyClass,A.l2.cmHidden)},e.body.slice(0,177)+"..."),b.createElement("div",{className:A.uS.reviewUsernameClass},e.userName),b.createElement("button",{ref:function(e){return t._readMoreReviewBtnDom=e},role:"button",tabIndex:"0",className:v()(A.uS.readMoreReviewBtnClass,A.l2.cmHidden),onClick:this.unfoldReview.bind(this)},S))}},{key:"unfoldReview",value:function(){I()(this._reviewBodyWholeDom).removeClass(A.l2.cmHidden),I()(this._reviewBodyFoldDom).addClass(A.l2.cmHidden),I()(this._readMoreReviewBtnDom).remove()}},{key:"componentDidMount",value:function(){var t=I()(this._reviewBodyWholeDom);t.height()>=100||this.props.review.body.length>180?(I()(this._reviewBodyFoldDom).removeClass(A.l2.cmHidden),I()(this._readMoreReviewBtnDom).removeClass(A.l2.cmHidden)):t.removeClass(A.l2.cmHidden)}}]),r}(b.Component);O.propTypes={review:C().object.isRequired};const P=O;var D=r(18012),L=r(12913),R=function(t){t.preventDefault()};function M(t){if(t){var e,r=t.offsetHeight,n=t.offsetWidth;if(0==r||0==n)return;for(;t.offsetHeight===r&&e!==t.offsetWidth&&t.offsetWidth>-1;)e=t.offsetWidth,I()(t).css("width",t.offsetWidth-1);t.offsetWidth<=1?I()(t).css("width",n):I()(t).css("width",t.offsetWidth+1),t.offsetHeight!==r&&(I()(t).css("width",n+1),t.offsetHeight!==r&&M(t))}}function X(t){switch(t.type){case k.Bs.link:case k.Bs.checkout:case k.Bs.email:case k.Bs.phone:case k.Bs.support:case k.Bs.trial:return t.href;case k.Bs.choice:return t.dialogNode;case k.Bs.chat:case k.Bs.scheduler:return t.type;default:return t.text}}function Z(t){var e=t.clickHandler,r=t.line,n=t.classNamesArray,a=void 0===n?[]:n,o=t.showIcon,i=t.icon,s=t.className,c=t.autoAdjustSize,l=void 0===c||c,p=t.buttonDisabled,f=void 0!==p&&p,m=(0,D.Bf)(r.href).type,d="boolean"==typeof o?o:"_blank"===m;return b.createElement("div",{role:"button",tabIndex:"0",onClick:f?R:e,"data-ibm-contact":r.type,"ibm-bot-link-type":r.type,"ibm-bot-link-href":X(r),className:v()(s,A.p.botBtnNewClass,a,(0,u.Z)({},A.p.botBtnNewWithIconClass,d),{disabled:f}),ref:l&&M},b.createElement("a",{className:A.p.botBtnNewTextClass,href:r.href,target:m},r.text),r.description&&b.createElement("span",{className:A.p.botBtnNewAdditionTextClass},r.description),d&&(i||b.createElement(L.RK,{className:A.p.botBtnLaunchIconClass})))}Z.propTypes={clickHandler:C().func,line:C().object,classNames:C().string,showIcon:C().bool,icon:C().element,buttonDisabled:C().bool};const U=Z;var H=r(74477),B=r(93379),F=r.n(B),z=r(17965),j={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};F()(z.Z,j);const Y=z.Z.locals||{};function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.Z)(t);if(e){var a=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var W=function(t){(0,o.Z)(r,t);var e=G(r);function r(t){var a;return(0,n.Z)(this,r),(a=e.call(this,t)).state={displayLinks:!1},a}return(0,a.Z)(r,[{key:"render",value:function(){var t=this,e=this.props,r=e.text,n=e.links,a=void 0===n?[]:n,o=e.id,i=e.clickHandler,s=e.onOpen,c=void 0===s?h():s,l=e.onClose,u=void 0===l?h():l,p=e.messageObj,f=e.ifBotChatButtonDisabled,m=this.state.displayLinks;return b.createElement("div",{className:Y.container},b.createElement(U,{line:{text:r},clickHandler:function(){m?u&&u():c&&c(),t.setState({displayLinks:!m})},showIcon:!0,icon:m?b.createElement(H.MR9,{className:Y.chevonIcon}):b.createElement(H.cRw,{className:Y.chevonIcon}),buttonDisabled:f}),m&&a.map((function(t,e){return b.createElement(U,{className:v()(Y.link,{"cm-hidden":!m}),line:t,key:"group-".concat(o,"-").concat(e),clickHandler:function(e){i({e,lineObj:t,metadata:p.metadata})},buttonDisabled:f})})))}}]),r}(b.Component);W.propTypes={};const V=W;var K=r(56317),q={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};F()(K.Z,q);K.Z.locals;var J=["className","children","onClick"];const Q=b.forwardRef((function(t,e){var r=t.className,n=t.children,a=t.onClick,o=(0,l.Z)(t,J);return b.createElement("div",(0,c.Z)({className:v()(r,"cm-tile",{"cm-tile--clickable":a}),role:"button",tabIndex:a?0:-1,onClick:a},o,{ref:e}),n)}));var $="up",tt="down";function et(t){var e=t.className,r=t.line,n=r.href,a=r.text,o=(0,D.Bf)(n),i=o.type,s=o.url,c=(0,b.useState)(),l=(0,f.Z)(c,2),u=l[0],p=l[1],m=(0,b.useCallback)((function(t){t.stopPropagation(),t.preventDefault(),p($)}),[]),d=(0,b.useCallback)((function(t){t.stopPropagation(),t.preventDefault(),p(tt)}),[]);return b.createElement(Q,{className:v()("cm-bot-tile",e),onClick:function(){return window.open(s,i)}},b.createElement("div",{className:"cm-bot-tile--content"},b.createElement("div",{className:"cm-bot-tile--text-content"},b.createElement("p",null,a)),b.createElement("div",{className:"cm-bot-tile--addl-content"},b.createElement("button",{className:"cm-bot-tile--learn-more"},"Learn more"),b.createElement(L.eH,null))),b.createElement("div",{className:"cm-bot-tile--feedback-buttons"},b.createElement("span",{className:"cm-bot-tile--feedback-label"},"Helpful?"),b.createElement(L.Ts,{className:u===$?"selected":void 0,onClick:m}),b.createElement(L.nR,{className:u===tt?"selected":void 0,onClick:d})))}et.propTypes={className:C().string,line:C().object};const rt=et;var nt=r(44123),at={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};F()(nt.Z,at);nt.Z.locals;var ot=r(1768);function it(t){var e=t.className,r=t.children,n=t.collapseHeight,a=void 0===n?147:n,o=(0,b.useState)(!1),i=(0,f.Z)(o,2),s=i[0],c=i[1],l=(0,b.useState)("unset"),u=(0,f.Z)(l,2),p=u[0],m=u[1],d=(0,b.useState)(!1),_=(0,f.Z)(d,2),h=_[0],g=_[1],y=(0,b.useRef)(),x=(0,b.useRef)(),w=(0,b.useRef)(),k=(0,b.useCallback)((function(){return c(!s)}),[s]);(0,b.useEffect)((function(){if(y.current&&x.current&&w.current){var t=function(t){return parseInt((0,ot.fL)("padding-".concat(t),y.current),10)};m(t("top")+x.current.scrollHeight+t("bottom")),g(parseInt((0,ot.fL)("height",w.current),10)>a)}}),[r,a]);var E=s?{maxHeight:p}:{maxHeight:a},C=s?"See less":"See more",T=s?L.h9:L.IH;return b.createElement(Q,{className:v()("cm-readmore-tile",e)},b.createElement("div",{className:"cm-readmore-tile--content-container",ref:y},b.createElement("div",{className:v()("cm-readmore-tile--content"),style:E,ref:x},b.createElement("div",{ref:w},r))),h&&b.createElement("div",{className:"cm-readmore-tile--label-section"},b.createElement("div",{className:"cm-readmore-tile--action-container",role:"button",tabIndex:"0",onClick:k},b.createElement("span",{className:"cm-bot-tile--learn-more"},C),b.createElement(T,null))))}it.propTypes={className:C().string};const st=it;var ct=r(37328),lt={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};F()(ct.Z,lt);ct.Z.locals;var ut=["className","maxHeight","children"],pt={maxHeight:C().number.isRequired},ft=b.forwardRef((function(t,e){var r=t.className,n=t.maxHeight,a=t.children,o=(0,l.Z)(t,ut),i=(0,b.useRef)(null),s=(0,b.useState)("unset"),u=(0,f.Z)(s,2),p=u[0],m=u[1],d=(0,b.useState)(!1),_=(0,f.Z)(d,2),h=_[0],g=_[1],y=(0,b.useState)(0),x=(0,f.Z)(y,2),w=x[0],k=x[1],E=(0,b.useRef)("unset"),C=!!i.current&&i.current.scrollHeight>n,T=(0,b.useRef)(null),I=i.current&&i.current.clientHeight*i.current.clientHeight/p||0,S=(0,b.useCallback)((function(){return i.current&&T.current?"translateY(".concat(i.current.scrollTop*i.current.clientHeight/i.current.scrollHeight,"px)"):"unset"}),[]),A=(0,b.useCallback)((function(){var t=i.current.scrollHeight;t!==E.current&&(E.current=t,m(t))}),[]),N=(0,b.useCallback)((function(){T.current&&(T.current.style.transform=S())}),[S]),O=function(){g(!1)},P=function(t){if(h){t.preventDefault();var e=i.current.scrollTop+(t.clientY-w)*i.current.scrollHeight/i.current.clientHeight;k(t.clientY),e<0?i.current.scrollTop=0:e>i.current.scrollHeight-i.current.clientHeight?i.current.scrollTop=i.current.scrollHeight-i.current.clientHeight:i.current.scrollTop=e}};(0,b.useEffect)((function(){if(i.current){var t=new MutationObserver(A);return t.observe(i.current,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),window.addEventListener("resize",A),i.current.addEventListener("scroll",N),window.addEventListener("mouseup",O),window.addEventListener("mousemove",P),A(),function(){t.disconnect(),window.removeEventListener("resize",A),window.removeEventListener("mouseup",O),window.removeEventListener("mousemove",P)}}}));var D=S();return b.createElement("div",(0,c.Z)({className:v()("cm-scrollable",r),style:{maxHeight:n},ref:e},o),b.createElement("div",{className:"cm-scrollable--content",ref:i},a),C&&b.createElement("div",{className:"cm-scrollable--bar"},b.createElement("div",{className:"cm-scrollable--bar-thumb",style:{height:I,transform:D},ref:T,onMouseDown:function(t){t.preventDefault(),g(!0),k(t.clientY)}})))}));ft.propTypes=pt;const mt=ft;var dt=r(76913),_t={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};F()(dt.Z,_t);const ht=dt.Z.locals||{};var bt,gt,yt=r(20412),vt=["children"],xt=b.forwardRef((function(t,e){var r=t.children,n=(0,yt._)(t,vt);return b.createElement(yt.I,(0,yt.a)({width:16,height:16,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:e},n),bt||(bt=b.createElement("path",{d:"M13,13H3V3h5V2H3C2.4,2,2,2.4,2,3v10c0,0.6,0.4,1,1,1h10c0.6,0,1-0.4,1-1V8h-1V13z"})),gt||(gt=b.createElement("path",{d:"M13 3L13 1 12 1 12 3 10 3 10 4 12 4 12 6 13 6 13 4 15 4 15 3z"})),r)})),wt=r(7204),kt=["clickHandler","buttonDisabled","message","classes","line","urlOpenType","url","text","icon","descriptionText","isIbm","img","focusArea","chatInformation"],Et=function(t){t.preventDefault()},Ct=function(t){var e=t.className,r=t.children;return b.createElement("div",{className:v()(e,ht.botResource)},b.createElement("div",{className:v()(e,ht.container)},r))},Tt=function(t){var e=t.className,r=t.children,n=t.title;return b.createElement("div",{className:v()(e,ht.cardGroup)},n&&b.createElement("div",{className:v()(ht.card,ht.title)},b.createElement("p",null,n)),r)},It=function(t){var e=t.clickHandler,r=t.buttonDisabled,n=void 0!==r&&r,a=t.message,o=t.classes,i=void 0===o?{}:o,s=t.line,p=t.urlOpenType,f=t.url,m=t.text,d=t.icon,_=t.descriptionText,h=t.isIbm,g=t.img,y=t.focusArea,x=t.chatInformation,w=(0,l.Z)(t,kt),k=n?Et:function(t){t.preventDefault(),e({e:t,lineObj:s,metadata:a.metadata,focusArea:y,chatInformation:x})},E=g&&b.createElement("img",{className:ht.img,src:"https://www.ibm.com/common/digitaladvisor/img/chat-agent-400.png"}),C=!h&&b.createElement(xt,{className:ht.externalLinkIcon}),T=(0,b.useMemo)((function(){return(0,ot.jv)(_)}),[_]);return b.createElement(wt.Z,(0,c.Z)({className:ht.card,classes:{circle:ht.cardCircle,content:ht.cardContent},href:f,target:p,disabled:n,onClick:k,icon:d||E||C},w),b.createElement("div",{className:v()(ht.heading,(0,u.Z)({},ht.noDescription,!_))},b.createElement("p",null,m)),_&&b.createElement("div",{className:v()(ht.description,i.description)},b.createElement("p",{className:v()(ht.descriptionText,i.descriptionText,(0,u.Z)({},ht.descriptionUrl,T))},_)))},St=r(45132),At=r(96289),Nt={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};F()(At.Z,Nt);const Ot=At.Z.locals||{};var Pt,Dt,Lt,Rt,Mt=r(3479),Xt=r(51733),Zt=["children"],Ut=["children"],Ht=b.forwardRef((function(t,e){var r=t.children,n=(0,yt._)(t,Zt);return b.createElement(yt.I,(0,yt.a)({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:e},n),Pt||(Pt=b.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"})),Dt||(Dt=b.createElement("path",{d:"M11.5 11A2.5 2.5 0 1014 13.5 2.5 2.5 0 0011.5 11zM20.5 11A2.5 2.5 0 1023 13.5 2.5 2.5 0 0020.5 11zM16 19a8 8 0 00-6.85 3.89l1.71 1a6 6 0 0110.28 0l1.71-1A8 8 0 0016 19z"})),r)})),Bt=b.forwardRef((function(t,e){var r=t.children,n=(0,yt._)(t,Ut);return b.createElement(yt.I,(0,yt.a)({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:e},n),Lt||(Lt=b.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"})),Rt||(Rt=b.createElement("path",{d:"M11.5 11A2.5 2.5 0 1014 13.5 2.48 2.48 0 0011.5 11zM20.5 11A2.5 2.5 0 1023 13.5 2.48 2.48 0 0020.5 11zM16 24a8 8 0 006.85-3.89l-1.71-1a6 6 0 01-10.28 0l-1.71 1A8 8 0 0016 24z"})),r)})),Ft=["classes","urlOpenType"],zt=["classes","urlOpenType"],jt=["classes","urlOpenType"],Yt=["opts","bundle","chatInformation"];function Gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.Z)(t);if(e){var a=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var Wt=function(t){var e=t.label,r=t.onClick,n=void 0===r?h():r,a=(0,b.useState)(0),o=(0,f.Z)(a,2),i=o[0],s=o[1],c=function(t){return function(e){s(t),n(e)}};return b.createElement("div",{className:v()(Ot.feedback)},b.createElement("label",null,e),b.createElement("button",{className:"cm-icon-wrapper",onClick:c(1)},b.createElement(Bt,{className:v()(Ot.feedbackIcon,A.uS.thumbsupClass,(0,u.Z)({},Ot.feedbackActive,i>0))})),b.createElement("button",{className:"cm-icon-wrapper",onClick:c(-1)},b.createElement(Ht,{className:v()(Ot.feedbackIcon,A.uS.thumbsdownClass,(0,u.Z)({},Ot.feedbackActive,i<0))})))},Vt=function(t){var e=t.plainTextAndNonCards,r=void 0===e?[]:e,n=t.id,a=t.message,o=t.setShowLine,i=t.clickHandler,s=t.ifBotChatButtonDisabled,u=t.showLine,p=t.text;return r.length>0&&b.createElement("div",null,r.map((function(t,e){var r=ee(t,p),f=r.classes,m=r.urlOpenType,d=(0,l.Z)(r,Ft),_={line:t,showLine:u,id:n,i:e,message:a,setShowLine:o,clickHandler:i,autoAdjustSize:!0,ifBotChatButtonDisabled:s};return b.createElement(Jt,(0,c.Z)({opts:_,line:t,key:e,classes:f,urlOpenType:m},d))})))},Kt=function(t){var e=t.id,r=t.message,n=t.groupableAndSingleCards,a=void 0===n?[]:n,o=t.ifBotChatButtonDisabled,i=t.clickHandler,s=t.text,u=t.hasChoice,p=t.hasDisambiguation,f=t.bundle,m=void 0===f?{}:f,_=t.chatInformation,h=p?s.bot_disambiguationLabel:!!u&&s.bot_faqLabel;return a.length>0&&b.createElement(Ct,null,b.createElement(Tt,{title:h},a.map((function(t,n){var a=ee(t,s),u=a.classes,p=a.urlOpenType,f=(0,l.Z)(a,zt);return b.createElement(It,(0,c.Z)({message:r,key:e+n,line:t,buttonDisabled:o,clickHandler:i,"ibm-bot-link-href":re(t),classes:u,urlOpenType:p,target:p,"data-ibm-contact":t.type,"ibm-bot-link-type":t.type,focusArea:d()(m,"key.focusArea"),chatInformation:_},f))}))))},qt=function(t){var e=t.lines,r=t.message,n=t.id,a=t.text,o=t.clickHandler,i=t.bundle,s=void 0===i?{}:i,u=t.chatInformation,p=e.filter((function(t){return t.scrollable}));return p.length>0&&b.createElement(Ct,null,b.createElement(mt,{className:"scrollable-link-wrapper",maxHeight:.345*window.innerHeight},p.map((function(t,e){var i=ee(t,a),p=i.classes,f=i.urlOpenType,m=(0,l.Z)(i,jt);return b.createElement(It,(0,c.Z)({key:n+e,line:t,message:r,clickHandler:o,"ibm-bot-link-href":re(t),classes:p,urlOpenType:f,target:f,"data-ibm-contact":t.type,"ibm-bot-link-type":t.type,focusArea:d()(s,"key.focusArea"),chatInformation:u},m))}))))},Jt=function(t){var e=t.opts,r=void 0===e?{}:e,n=t.bundle,a=void 0===n?{}:n,o=t.chatInformation,i=(0,l.Z)(t,Yt),s=r.line,u=void 0===s?{}:s,p=r.showLine,f=r.id,m=r.i,_=r.message,h=r.setShowLine,g=r.clickHandler,y=r.ifBotChatButtonDisabled,v=u.type,x=u.text;if(v!==k.Bs.text&&null!==p&&p!==u)return null;switch(v){case k.Bs.text:return b.createElement(Qt,{key:f+m,text:x,clickHandler:function(t){return g({e:t,lineObj:u,metadata:_.metadata})}});case k.Bs.review:return b.createElement(te,{key:f+m,reviews:u.reviews});case k.Bs.group:return b.createElement(V,{key:f+m,text:u.text,links:u.groupItems,id:f,messageObj:_,onOpen:function(){return h(u)},onClose:function(){return h(null)},clickHandler:g,buttonDisabled:y});case k.Bs.readmore:return b.createElement(st,{key:f+m,className:"cm-bot-readmore-tile"},b.createElement(Qt,{key:"".concat(f,"-i-tile-text"),text:x,clickHandler:function(t){return g({e:t,lineObj:u,metadata:_.metadata})}}));case k.Bs.tile:return b.createElement(rt,{key:f+m,line:u});default:return b.createElement(It,(0,c.Z)({key:f+m,disabled:y,message:_,clickHandler:g,line:u,focusArea:d()(a,"key.focusArea"),chatInformation:o},i))}},Qt=function(t){var e=t.text,r=t.clickHandler,n=t.className;return b.createElement("div",{className:"message-line",role:"grid",tabIndex:"0"},b.createElement("p",{className:v()(n,Ot.text),onClick:r,dangerouslySetInnerHTML:{__html:w()(e,k.iH)}}))},$t={type:k.Bs.loadMoreReviews,text:"Load more reviews"},te=function(t){(0,o.Z)(r,t);var e=Gt(r);function r(t){var a;return(0,n.Z)(this,r),(a=e.call(this,t)).state={reviewsToRender:1,displayShowMoreButton:!0},a}return(0,a.Z)(r,[{key:"render",value:function(){var t=this,e=this.props.reviews,r=this.state,n=r.reviewsToRender,a=r.displayShowMoreButton;return b.createElement("div",{className:Ot.reviews},e.map((function(t,e){return e<n&&b.createElement(P,{key:"botreview"+e,review:t})})),a&&n<e.length&&b.createElement(U,{line:$t,clickHandler:function(){return t.setState({reviewsToRender:e.length,displayShowMoreButton:!1})}}))}}]),r}(b.Component);function ee(t,e){var r=(0,D.Bf)(t.href).type,n=(0,ot.fr)(t.href),a=(0,f.Z)(n,2),o=a[0],i=a[1],s={},c={type:t.type,url:t.href,text:t.text,descriptionText:o||t.description,isIbm:i};switch(t.type){case k.Bs.link:break;case k.Bs.email:c.icon=b.createElement(L.LQ,{className:v()(Ot.icon),href:c.url,target:r}),c.descriptionText=null;break;case k.Bs.choice:c.isIbm=!0;break;case k.Bs.support:case k.Bs.trial:break;case k.Bs.chat:s.description=Ot.online,c.img=!0,c.descriptionText=e.Carbon_msg_agentOnline,c.isIbm=!0;break;case k.Bs.phone:c.icon=b.createElement(L.qW,{className:v()(Ot.icon),href:c.url,target:r}),c.descriptionText=t.priorityCode?"".concat(t.phoneNumber,"\n").concat(e.bot_phonePriorityCodeLabel,": ").concat(t.priorityCode):t.phoneNumber,c.text=e.bot_phoneLabel,c.isIbm=!0;break;case k.Bs.scheduler:c.icon=b.createElement(L.Qu,{className:v()(Ot.icon),href:c.url,target:r})}return(0,p.Z)({classes:s,urlOpenType:r},c)}function re(t){switch(t.type){case k.Bs.link:case k.Bs.checkout:case k.Bs.email:case k.Bs.phone:case k.Bs.support:case k.Bs.trial:return t.href;case k.Bs.choice:return t.dialogNode;case k.Bs.chat:case k.Bs.scheduler:return t.type;default:return t.text}}const ne=(0,g.$j)((function(t){return{text:(0,Mt.Xj)(t),ifBotChatButtonDisabled:(0,Xt.WJ)(t),bundle:(0,Mt.h0)(t),chatInformation:(0,Mt.IA)(t)}}),(function(){return{}}))((function(t){var e=t.message,r=t.text,n=t.ifBotChatButtonDisabled,a=void 0!==n&&n,o=(0,b.useState)(null),i=(0,f.Z)(o,2),s=i[0],c=i[1],l=e.id,u=e.lines,m=void 0===u?[]:u,d=e.clickHandler,_=void 0===d?h():d,g=e.showFeedback,y=m.some((function(t){return t.type===k.Bs.choice&&t.choiceType!==k.kG.DISAMBIGUATION&&t.choiceType!==k.kG.PRODUCT})),x=m.some((function(t){return t.choiceType===k.kG.DISAMBIGUATION||t.choiceType===k.kG.PRODUCT})),w=m.filter((function(t){return t.type!==k.Bs.text&&t.type!==k.Bs.review&&t.type!==k.Bs.group&&t.type!==k.Bs.readmore&&t.type!==k.Bs.tile&&!t.scrollable})),E=m.filter((function(t){return!w.includes(t)&&!t.scrollable}));return b.createElement(St.v,{id:l},b.createElement("div",{className:Ot.watsonRay}),b.createElement("div",{className:v()(Ot.message,A.uS.botMessage)},b.createElement(Vt,{plainTextAndNonCards:E,id:l,text:r,message:e,setShowLine:c,clickHandler:_,buttonDisabled:a,showLine:s}),b.createElement(Kt,{message:e,id:l,groupableAndSingleCards:w,hasChoice:y,hasDisambiguation:x,buttonDisabled:a,clickHandler:_,text:r}),m.some((function(t){return t.scrollable}))&&b.createElement(qt,{lines:m,message:e,id:l,text:r,clickHandler:_})),g&&b.createElement(Wt,{label:r.bot_feedback,onClick:function(t){return e.clickHandler&&e.clickHandler((0,p.Z)({},e,{e:t,lineObj:e.lines}))}}))}))},45132:(t,e,r)=>{"use strict";r.d(e,{v:()=>_,E:()=>h});var n=r(8270),a=r(63123),o=r(17253),i=r(35466),s=(r(46116),r(92703)),c=r.n(s),l=r(93379),u=r.n(l),p=r(59526),f={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};u()(p.Z,f);const m=p.Z.locals||{};var d=["className","children"],_=function(t){var e=t.className,r=t.children,n=(0,o.Z)(t,d);return i.createElement("li",(0,a.Z)({className:c()(m.message,e)},n),r)},h=function(t){var e,r=t.message;return i.createElement(_,{className:c()(m.timestampMessage,(e={},(0,n.Z)(e,m.userTimestamp,r.isUserTimestamp),(0,n.Z)(e,m.newClusterPadding,r.isNewCluster),e))},i.createElement("span",{className:m.timestamp},r.text))}},94793:(t,e,r)=>{"use strict";r.d(e,{a:()=>d,g:()=>I});var n=r(63123),a=r(8270),o=r(17253),i=r(3074),s=r.n(i),c=r(35466),l=r(92703),u=r.n(l),p=r(5901),f=["aria-label","children","className","noTrailingSlash"],m=c.forwardRef((function(t,e){var r,i=t["aria-label"],s=t.children,l=t.className,m=t.noTrailingSlash,d=(0,o.Z)(t,f),_=(0,p.A)(),h=u()((r={},(0,a.Z)(r,"".concat(_,"--breadcrumb"),!0),(0,a.Z)(r,"".concat(_,"--breadcrumb--no-trailing-slash"),m),r));return c.createElement("nav",(0,n.Z)({className:l,"aria-label":i||"Breadcrumb",ref:e},d),c.createElement("ol",{className:h},s))}));m.displayName="Breadcrumb",m.propTypes={"aria-label":s().string,children:s().node,className:s().string,noTrailingSlash:s().bool};const d=m;var _,h,b,g=r(45137),y=r.n(g),v=r(97963),x=r(20412),w=["children"],k=c.forwardRef((function(t,e){var r=t.children,n=(0,x._)(t,w);return c.createElement(x.I,(0,x.a)({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:e},n),_||(_=c.createElement("circle",{cx:"8",cy:"16",r:"2"})),h||(h=c.createElement("circle",{cx:"16",cy:"16",r:"2"})),b||(b=c.createElement("circle",{cx:"24",cy:"16",r:"2"})),r)})),E=["aria-current","children","className","href","isCurrentPage"],C=y().prefix,T=c.forwardRef((function(t,e){var r,i=t["aria-current"],s=t.children,l=t.className,p=t.href,f=t.isCurrentPage,m=(0,o.Z)(t,E),d=u()((r={},(0,a.Z)(r,"".concat(C,"--breadcrumb-item"),!0),(0,a.Z)(r,"".concat(C,"--breadcrumb-item--current"),f&&"page"!==i),(0,a.Z)(r,l,!!l),r));if(s.type&&void 0!==s.type.displayName&&s.type.displayName.includes("OverflowMenu")){var _=c.createElement(k,{className:"".concat(C,"--overflow-menu__icon")});return c.createElement("li",(0,n.Z)({className:d},m),c.cloneElement(s,{menuOptionsClass:"".concat(C,"--breadcrumb-menu-options"),menuOffset:{top:10,left:59},renderIcon:function(){return _}}))}return"string"==typeof s?c.createElement("li",(0,n.Z)({className:d,ref:e},m),p?c.createElement(v.Z,{href:p,"aria-current":i},s):c.createElement("span",{className:"".concat(C,"--link")},s)):c.createElement("li",(0,n.Z)({className:d,ref:e},m),c.cloneElement(s,{"aria-current":i,className:u()("".concat(C,"--link"),s.props.className)}))}));T.displayName="BreadcrumbItem",T.propTypes={"aria-current":s().oneOfType([s().string,s().bool]),children:s().node,className:s().string,href:s().string,isCurrentPage:s().bool};const I=T;var S=r(93379),A=r.n(S),N=r(26033),O={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};A()(N.Z,O);N.Z.locals},46844:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(3051),a=r(93379),o=r.n(a),i=r(61691),s={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};o()(i.Z,s);i.Z.locals;const c=n.Z},14475:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(97963);r(54214);const a=n.Z},73112:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(28745),a=r(93379),o=r.n(a),i=r(85355),s={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};o()(i.Z,s);i.Z.locals;const c=n.Z},7204:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var n=r(63123),a=r(55185),o=r(8270),i=r(17253),s=r(20643),c=r.n(s),l=r(33626),u=r.n(l),p=r(35466),f=(r(46116),r(92703)),m=r.n(f),d=r(93379),_=r.n(d),h=r(36076),b={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};_()(h.Z,b);const g=h.Z.locals||{};var y=["className","classes","icon","circle","children","secondary","href","target","onClick","clickable"];const v=p.forwardRef((function(t,e){var r,s=t.className,l=t.classes,f=void 0===l?{}:l,d=t.icon,_=t.circle,h=void 0===_?Boolean(d):_,b=t.children,v=t.secondary,x=t.href,w=t.target,k=void 0===w?x?"_blank":void 0:w,E=t.onClick,C=t.clickable,T=void 0===C?x||E:C,I=(0,i.Z)(t,y);"string"==typeof b&&(b=p.createElement("p",null,b));var S=T?x?"a":"button":"div";d&&("function"==typeof d||d.render)&&(d=p.createElement(d));var A=(0,p.useCallback)((function(t){u()(E)&&(E(t),t.currentTarget.blur())}),[E]);return p.createElement(S,(0,n.Z)({className:m()(s,g.card,(r={},(0,o.Z)(r,g.secondary,v),(0,o.Z)(r,g.clickable,E||x||T),r)),onClick:A,href:x,target:k},I,{ref:e}),d&&p.createElement("div",{className:m()(f.circle,g.circle,(0,o.Z)({},g.circleEnabled,h))},d&&p.cloneElement(d,(0,a.Z)({className:m()(c()(d,"props.className"),g.icon,f.icon)},I))),b&&p.createElement("div",{className:m()(f.content,g.content)},b))}))},67764:(t,e,r)=>{"use strict";r.d(e,{Z:()=>x});var n=r(63123),a=r(55185),o=r(17253),i=r(19157),s=r.n(i),c=r(35466),l=r(55091),u=r(92703),p=r.n(u),f=r(12913),m=r(93379),d=r.n(m),_=r(78649),h={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};d()(_.Z,h);const b=_.Z.locals||{};var g=r(45077),y=["className","onClose","onClick","children","contentProps","pillContainerCss"],v=["className"];const x=(0,l.$j)((function(t){return{pillContainerCss:(0,g.EG)(t)}}),(function(){return{}}))((function(t){var e=t.className,r=t.onClose,i=void 0===r?s():r,l=t.onClick,u=t.children,m=t.contentProps,d=void 0===m?{}:m,_=t.pillContainerCss,h=(0,o.Z)(t,y),g=_&&_.right&&_.bottom?{right:_.right,bottom:_.bottom+44+32}:_&&_.display?_:null;l&&(d=(0,a.Z)({},d,{onClick:l,role:"button",tabIndex:0}));var x=d,w=x.className,k=(0,o.Z)(x,v);return c.createElement("div",(0,n.Z)({className:p()(b.popup,e),style:g},h),c.createElement("div",{className:b.close,onClick:i,role:"button",tabIndex:"0"},c.createElement(f.Tw,{"aria-label":"Close"})),c.createElement("div",(0,n.Z)({className:p()(b.content,w)},k),u))}))},30851:(t,e,r)=>{"use strict";r.d(e,{Y5:()=>W,ZP:()=>K});var n=r(8270),a=r(4913),o=r(64296),i=r(81928),s=r(88503),c=r(93311),l=r(69792),u=r.n(l),p=r(35466),f=(r(46116),r(8563)),m=r.n(f),d=r(1768),_=r(45455),h=r(57003),b=r(54329),g=r(1509),y=r(45077),v=r(55091),x=r(31554),w=r(77681),k=r(1862),E=r(9634),C=r(30800),T=r(19187),I=r(51733),S=r(76464),A=r(3074),N=r.n(A),O=r(12917),P=r.n(O),D=r(98315),L=r(3479),R=r(62857),M=r(35478),X=r(67764),Z=r(22733);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var H=h.y$.PROACTIVE_POPUP_KEY,B=function(t){(0,i.Z)(r,t);var e=U(r);function r(t){var n;return(0,a.Z)(this,r),(n=e.call(this,t)).onClose=n.onClose.bind((0,S.Z)(n)),n}return(0,o.Z)(r,[{key:"render",value:function(){var t=this.props,e=t.activePurpose,r=void 0===e?"(default)":e,n=t.textFrag,a=t.canStartChat,o=t.schedulerConfig,i=t.isProactivePopupDisplay,s=t.customPopupText,c=t.handlePopupClick,l=n(r,"popup_chatDetail"),u=n((0,d.xb)(o)?"(default)":o.purpose,"popup_schedulerDetail"),f=P()(a?l:u,["a"]);return i&&parseInt(this.getProactiveCookie()[h.Rf.STATE],10)>_.oM.OPENED&&this.setProactiveCookie(_.oM.OPENED),s.headerText?i&&p.createElement(X.Z,{className:D.Z.popup,contentProps:{className:D.Z.content},onClose:this.onClose,onClick:c},p.createElement("h2",null,s.headerText),p.createElement("p",null,f)):i&&p.createElement(X.Z,{className:D.Z.popup,contentProps:{className:D.Z.content},onClose:this.onClose,onClick:c},p.createElement("p",null,f))}},{key:"componentDidUpdate",value:function(t){var e=this;this.props.isProactivePopupDisplay&&!t.isProactivePopupDisplay&&(this.timer=setTimeout((function(){e.setProactiveCookie(_.oM.TIMEOUT),e.props.hidePopup()}),12e4)),this.props.isProactivePopupDisplay||this.timer&&clearTimeout(this.timer)}},{key:"onClose",value:function(){this.setProactiveCookie(_.oM.CLOSED),this.props.hidePopup()}},{key:"getProactiveCookie",value:function(){return JSON.parse((0,d.ej)(H,"{}"))}},{key:"setProactiveCookie",value:function(t){var e;(0,Z.Q1)(Z.b7.FUNCTIONAL)&&(0,d.Uj)(H,JSON.stringify((e={},(0,n.Z)(e,h.Rf.TYPE,h.C5.PROACTIVE_INVITE),(0,n.Z)(e,h.Rf.STATE,t),e)))}}]),r}(p.Component);B.propTypes={canStartChat:N().bool,handleDisplayScheduler:N().func,handleStartChatClick:N().func,hidePopup:N().func,isPaneHidden:N().bool,isProactivePopupDisplay:N().bool,schedulerConfig:N().object,showPopup:N().func,text:N().object,customPopupText:N().object};const F=(0,v.$j)((function(t){return{text:(0,L.Xj)(t),canStartChat:(0,k.at)(t),isProactivePopupDisplay:(0,M.hq)(t),customPopupText:(0,M.Eg)(t),isPaneHidden:(0,C.UM)(t),schedulerConfig:(0,L.Mx)(t),timerStatus:(0,y.Wo)(t),isPreparing:(0,y.WS)(t),isBot:(0,k.WX)(t),activePurpose:(0,k.ab)(t),textFrag:(0,L.sU)(t)}}),(function(t){return{showPopup:function(){return t((0,x.vm)(!0))},hidePopup:function(){return t((0,x.vm)(!1))},proactivePopupDisplayed:function(){return t((0,g.bA)(!0))},handleStartChatClick:function(){return t((0,E.xm)({startChatButtonType:h.t$.POPUP_LINK}))},handlePopupClick:function(){t((0,x.vm)(!1)),t((0,E.RC)(h.t$.POPUP_LINK)),t((0,x.HM)())},handleDisplayScheduler:function(){t((0,x.vm)(!1)),t((0,R.db)()),t((0,R.j5)(!0))}}}))(B);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var j=m()(document),Y=(0,d.Wz)(T.t6.CM_PROACTIVE_TIME)||55,G=(0,d.Wz)(T.t6.CM_PROACTIVE_SHOW),W=h.y$.PROACTIVE_POPUP_KEY,V=function(t){(0,i.Z)(r,t);var e=z(r);function r(){return(0,a.Z)(this,r),e.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return p.createElement(F,null)}},{key:"componentDidMount",value:function(){this.setup()}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"componentDidUpdate",value:function(t){t.isPaneHidden&&!this.props.isPaneHidden&&this.cleanup(),t.activeAdapter!==this.props.activeAdapter&&(this.cleanup(),this.setup())}},{key:"setup",value:function(){this.initTimer=setInterval(this.timerConfiguration.bind(this),1e3)}},{key:"cleanup",value:function(){this.isScrollablePage&&j.off(".triggerScroll"),this.ScrollTimer&&clearTimeout(this.ScrollTimer),this.initTimer&&clearInterval(this.initTimer)}},{key:"showBotMessage",value:function(){this.props.activeAdapter.showBotMessage(),this.props.unreadMessageCount(1,this.props.getActiveConversationId)}},{key:"timerConfiguration",value:function(){var t=this.props.isBotWelcomeMessage;if((0,d.ej)(W))if(this.getProactiveCookie()[h.Rf.TYPE]===h.C5.PROACTIVE_INVITE&&t)this.setProactiveCookie(h.C5.BOT_WELCOME_MSG,Date.now());else{this.getProactiveCookie()[h.Rf.TYPE]===h.C5.BOT_WELCOME_MSG&&parseInt(this.getProactiveCookie()[h.Rf.STATE],10)<0&&clearInterval(this.initTimer);var e=parseInt(this.getProactiveCookie()[h.Rf.STATE],10),r=e+1e3*Y-Date.now();if(t&&this.props.setProactiveType(h.C5.BOT_WELCOME_MSG),e<=0&&!G){var n=this.getProactiveCookie()[h.Rf.TYPE];return this.setProactiveCookie(n,_.oM.OPENED),void clearInterval(this.initTimer)}r<1e4&&!this.props.isPreparing&&this.props.prepareDisplayPopup(),r<=0&&(t&&this.props.activeAdapter&&this.props.activeAdapter.queueType===h._E.BOT?this.showBotMessage():this.props.proactivePopupDisplayed(),clearInterval(this.initTimer))}else{var a=t?h.C5.BOT_WELCOME_MSG:h.C5.PROACTIVE_INVITE;this.setProactiveCookie(a,Date.now())}}},{key:"scrollerConfiguration",value:function(){var t=this;this.props.isBotWelcomeMessage&&this.props.setProactiveType(h.C5.BOT_WELCOME_MSG);var e=window.innerHeight,r=document.body.clientHeight;if(this.isScrollablePage=r-e>400,(0,d.ej)(W)){if(this.getProactiveCookie()[h.Rf.TYPE]===h.C5.PROACTIVE_INVITE)this.setProactiveCookie(h.C5.BOT_WELCOME_MSG,Date.now());else if(this.getProactiveCookie()[h.Rf.TYPE]===h.C5.BOT_WELCOME_MSG&&parseInt(this.getProactiveCookie()[h.Rf.STATE],10)<0)return}else this.setProactiveCookie(h.C5.BOT_WELCOME_MSG,Date.now());this.isScrollablePage?j.on("scroll.triggerScroll",u()((function(){j.scrollTop()>=400&&t.props.activeAdapter.queueType===h._E.BOT&&(t.showBotMessage(),j.off(".triggerScroll"))}),250)):this.ScrollTimer=setTimeout((function(){t.props.activeAdapter.queueType===h._E.BOT&&t.showBotMessage()}),3e3)}},{key:"getProactiveCookie",value:function(){return JSON.parse((0,d.ej)(W,"{}"))}},{key:"setProactiveCookie",value:function(t,e){var r;(0,Z.Q1)(Z.b7.FUNCTIONAL)&&(0,d.Uj)(W,JSON.stringify((r={},(0,n.Z)(r,h.Rf.TYPE,t),(0,n.Z)(r,h.Rf.STATE,e),r)))}}]),r}(p.Component);const K=(0,v.$j)((function(t){return{isPreparing:(0,y.WS)(t),activeAdapter:(0,k.d3)(t),activeConversationId:(0,k.aR)(t),isPaneHidden:(0,C.UM)(t),isBotWelcomeMessage:!!(0,I.vO)(t)}}),(function(t){return{setProactiveType:function(e){return t((0,g.xd)(e))},prepareDisplayPopup:function(){t((0,b.Qe)(!0)),t((0,x.zd)()),t((0,w.uf)()),t((0,x.ZO)()),t((0,g.ED)())},proactivePopupDisplayed:function(){return t((0,g.bA)(!0))},unreadMessageCount:function(e,r){return t((0,E.Kd)(e,r))}}}))(V)},82234:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});const n={GENERAL:{SHUT_DOWN:"CM_APP.SHUT_DOWN",UPDATE_OVERLAY_NOTIFICATION:"GENERAL.UPDATE_OVERLAY_NOTIFICATION",CLIENT_INFO:{UPDATE:"GENERAL.CLIENT_INFO.UPDATE",IS_USER_ACTIVE:"GENERAL.CLIENT_INFO.IS_USER_ACTIVE"},HIDE_PILL:"GENERAL.HIDE_PILL",IS_MOBILE:"GENERAL.IS_MOBILE",COLOR_PALETTE:"GENERAL.COLOR_PALETTE",IS_TIMER_COUNTING:"GENERAL.IS_TIMER_COUNTING",IS_TIMER_PREPARING:"GENERAL.IS_TIMER_PREPARING",WELCOME_MESSAGE:"GENERAL.WELCOME_MESSAGE",DISPLAY_WELCOME_MESSAGE:"GENERAL.DISPLAY_WELCOME_MESSAGE",WELCOME_MESSAGE_HAS_SHOWN:"GENERAL.WELCOME_MESSAGE_HAS_SHOWN",PILL_CONTAINER_CSS:"GENERAL.PILL_CONTAINER_CSS",PROACTIVE_TYPE:"GENERAL.PROACTIVE_TYPE",SET_GENERAL:"GENERAL.SET_GENERAL"},PANE:{SHOW:"PANE.SHOW",HIDE:"PANE.HIDE",HAS_DISPLAYED:"PANE.HAS_DISPLAYED",HIDE_BODY:"PANE.HIDE.BODY",SHOW_BODY:"PANE.SHOW.BODY",END_CHAT_OVERLAY:"PANE.END_CHAT_OVERLAY",TOGGLE_MENU:"PANE.TOGGLE_MENU",SELECT_MENU_OPTION:"PANE.SELECT_MENU_OPTION",DISPLAY_PROACTIVE:"PANE.DISPLAY_PROACTIVE_POPUP",SET_DISPLAY_CHAT_IN_PANE_OVERRIDE:"PANE.SET_DISPLAY_CHAT_IN_PANE_OVERRIDE",DISPLAY_LOCALE_DROPDOWN:"PANE.DISPLAY_LOCALE_DROPDOWN",SHOW_LOADING_SCREEN:"PANE.SHOW_LOADING_SCREEN",LOAD:"PANE.LOAD",SET_CHANNEL_TYPE:"PANE.SET_CHANNEL_TYPE",SET_MENU_STATE:"PANE.SET_MENU_STATE"},POPUP:{UPDATE_TEXT:"POPUP.UPDATE_TEXT",UPDATE_INDUSTRYID:"POPUP.UPDATE_INDUSTRYID"},CHAT:{START_CHAT:"CHAT.START_CHAT",START_CHAT_ERROR:"CHAT.START_CHAT_ERROR",UPDATE_ACTIVE_ADAPTER_ID:"CHAT.UPDATE_ACTIVE_ADAPTER_ID",UPDATE_CONVERSATION_STATE:"CHAT.UPDATE.CONVERSATION.STATE",TRANSFER_CONVERSATION:"CHAT.TRANSFER_CONVERSATION",UPDATE_ADAPTER_STATE:"CHAT.UPDATE.ADAPTER.STATE",UPDATE_ADAPTER_AGENT_STATUS:"CHAT.UPDATE.ADAPTER.AGENT_STATUS",ADD_PARTICIPANT:"CHAT.ADD.PARTICIPANT",REMOVE_PARTICIPANT:"CHAT.REMOVE.PARTICIPANT",UPDATE_PARTICIPANT:"CHAT.UPDATE.PARTICIPANT",ADD_CONVERSATION:"CHAT.ADD.CONVERSATION",RENAME_CONVERSATION:"CHAT.RENAME.CONVERSATION",SET_OVERWRITTEN_CONVERSATION_ID:"CHAT.SET_OVERWRITTEN_CONVERSATION_ID",RENDER_MESSAGE:"CHAT.RENDER.MESSAGE",ADD_MESSAGE:"CHAT.ADD.MESSAGE",CLEAR_MESSAGES:"CHAT.CLEAR_MESSAGES",AGENT_TYPING:"CHAT.AGENT.TYPING",VISITOR_TYPING:"CHAT.VISITOR.TYPING",SET_PRIMARY_ADAPTER:"CHAT.SET.PRIMARY.ADAPTER",SEND_MSG:"CHAT.SEND.MSG",END_CHAT:"CHAT.END.CHAT",GET_EXIT_SURVEY:"CHAT.GET.EXIT.SURVEY",RENDER_EXIT_SURVEY:"CHAT.RENDER.EXIT.SURVEY",SUBMIT_EXIT_SURVEY:"CHAT.SUBMIT.EXIT.SURVEY",CANCEL_EXIT_SURVEY:"CHAT.SUBMIT.CANCEL.SURVEY",REMOVE_EXIT_SURVEY:"CHAT.SUBMIT.REMOVE.SURVEY",SURVEY_RESPONSE:"CHAT.SURVEY.RESPONSE",DOWNLOAD_TRANSCRIPT:"CHAT.DOWNLOAD.TRANSCRIPT",UPDATE_TRANSFER_MAP:"CHAT.UPDATE_TRANSFER_MAP",UPDATE_UNREAD_MESSAGE_COUNT:"CHAT.UPDATE_UNREAD_MESSAGE_COUNT",SALESFORCE_AVAILABILITY:"CHAT.SALESFORCE_AVAILABILITY",UPDATE_START_CHAT_BUTTON_TYPE:"CHAT.UPDATE_START_CHAT_BUTTON_TYPE",UPDATE_START_CHAT_BUTTON_INDEX:"CHAT.UPDATE_START_CHAT_BUTTON_INDEX",SET_DOM_SELECTOR_TO_SCROLL_TO:"CHAT.SET_DOM_SELECTOR_TO_SCROLL_TO",UPDATE_SENT_MESSAGE:"CHAT.UPDATE_SENT_MESSAGE",UPDATE_MESSAGE_BY_ID:"CHAT.UPDATE_MESSAGE_BY_ID",UPDATE_IF_SHOW_DOWNLOAD_TRANSCRIPT_BUTTON:"CHAT.UPDATE_IF_SHOW_DOWNLOAD_TRANSCRIPT_BUTTON",SET_ASYNC_PROPERTY:"CHAT.SET_ASYNC_PROPERTY",SET_COOKIE_VALUE:"CHAT.SET_COOKIE_VALUE",SET_BOT_API_STATUS:"CHAT.BOT_API_STATUS",SET_NOTICE:"CHAT.SET_NOTICE",SET_BUSINESS_LOCATION_CHANGE:"CHAT.SET_BUSINESS_LOCATION_CHANGE"},ADAPTER:{ADD:"ADAPTER.ADD",ADD_SUPPORT:"ADAPTER.ADD_SUPPORT",UPDATE:"ADAPTER.UPDATE",CLOSE:"ADAPTER.CLOSE"},CM_API:{UPDATE_CONFIG:"CM_API.UPDATE_CONFIG",INITIAL_LOOKUP:"CM_API.INITIAL_LOOKUP",CLIENT_INFO_LOOKUP:"CM_API.CLIENT_INFO_LOOKUP",FETCHED:"CM_API.FETCHED",FAILED:"CM_API.FAILED",KEYS_FETCHED:"CM_API.KEYS_FETCHED",LOOKUP_BY_FOCUS_AREA_FETCHED:"CM_API.LOOKUP_BY_FOCUS_AREA_FETCHED"},DATA:{UPDATE_EXTERNAL_BUNDLES:"DATA.UPDATE_EXTERNAL_BUNDLES",CLEAR_EXTERNAL_BUNDLES:"DATA.CLEAR_EXTERNAL_BUNDLES",FETCH_TRANSLATIONS:"DATA.FETCH_TRANSLATIONS",SET_VARIATION:"DATA.SET_VARIATION",SET_FILTER:"DATA.SET_FILTER",CLEAR_FILTER:"DATA.CLEAR_FILTER"},SCHEDULER:{DISPLAY:"SCHEDULER.DISPLAY",HAS_DISPLAYED:"SCHEDULER.HAS_DISPLAYED",INFO_FETCHED:"SCHEDULER.INFO_FETCHED",AVAILABILITY_FETCH:"SCHEDULER.AVAILABILITY_FETCH",BOOK_APPOINTMENT:"SCHEDULER.BOOK_APPOINTMENT",APPOINTMENT_FETCH:"SCHEDULER.APPOINTMENT_FETCH",CANCEL_APPOINTMENT:"SCHEDULER.CANCEL_APPOINTMENT",SUBMIT_CANCEL_SURVEY:"SCHEDULER.SUBMIT_CANCEL_SURVEY",DISPLAY_SCREEN:"SCHEDULER.DISPLAY_SCREEN",ERROR:"SCHEDULER.ERROR",ERROR_CLEAR:"SCHEDULER.ERROR_CLEAR",UPDATE_SCHEDULER_TYPE:"SCHEDULER.UPDATE_SCHEDULER_TYPE",UPDATE_CONFIG:"SCHEDULER.UPDATE_CONFIG",UPDATE_INFO:"SCHEDULER.UPDATE_INFO",NOTICE_CHOICE_LOADED:"NOTICE_CHOICE_LOADED",DISPLAY_DIALING_CODES_DROPDOWN:"SCHEDULER.DISPLAY_DIALING_CODES_DROPDOWN",UPDATE_PREFERRED_DIALING_CODE:"SCHEDULER.UPDATE_PREFERRED_DIALING_CODE",PRIVACY_VIEWED:"SCHEDULER.PRIVACY_VIEWED",DISPLAY_PANE:"SCHEDULER.DISPLAY_PANE",SET_INPUT_FORM_VALUE:"SCHEDULER.SET_INPUT_FORM_VALUE",REMOVE_INPUT_VALUE:"SCHEDULER.REMOVE_INPUT_VALUE",COGNITIVE_CLASSIFICATION:"SCHEDULER.COGNITIVE_CLASSIFICATION",COGNITIVE_FEEDBACK:"SCHEDULER.COGNITIVE_FEEDBACK",CLEAR_APPOINTMENT_DETAILS:"SCHEDULER.CLEAR_APPOINTMENT_DETAILS",RESET_FORM:"SCHEDULER.RESET_FORM",MODIFY_APPOINTMENT:"SCHEDULER.MODIFY_APPOINTMENT",CANCEL_MODIFY_APPOINTMENT:"CANCEL_MODIFY_APPOINTMENT",SAVE_COMPLETE:"SCHEDULER.SAVE_COMPLETE"},SDK:{LP:"SDK.LP"},CONTROLLER:{INIT:"CONTROLLER.INIT"},NOTIFICATION:{ADD:"NOTIFICATION.ADD",ADD_RENDERED_ID:"NOTIFICATION.ADD_RENDERED_ID",REMOVE_RENDERED_ID:"NOTIFICATION.REMOVE_RENDERED_ID",ADD_BLOCKED_ID:"NOTIFICATION.ADD_BLOCKED_ID"}}},74929:(t,e,r)=>{"use strict";r.d(e,{g:()=>Z,u:()=>N});var n=r(79655),a=r(55185),o=r(54390),i=r(69113),s=r.n(i),c=r(7976),l=r.n(c),u=r(40331),p=r.n(u),f=r(85066),m=r.n(f),d=r(19157),_=r.n(d),h=r(24302),b=r.n(h),g=r(51351),y=r.n(g),v=r(84264),x=r.n(v),w=r(1768),k=r(1821),E=r(45461),C=r(87750),T=r(19187),I=r(22733),S="cm-profile",A={xhrFields:{withCredentials:!0},timeout:15e3,contentType:"application/json"};function N(t){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)(x().mark((function t(e){var r,o,i,s,c,l,u,f,d,h,g,v,E,I,S,A,O,D,L,X;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.refresh,o=void 0!==r&&r,i=e.withIdentities,s=void 0===i||i,c=e.sessionStart,l=void 0!==c&&c,u=e.isRetry,f=void 0!==u&&u,d=M(),t.next=4,(0,w.bG)(["signedin","iui"]);case 4:if(h=t.sent,g=h.signedin,v=h.iui,E=(0,w.hV)(T.PF.REFRESH_JWT)||o,I={iui:v,refreshToken:E,tokenIdentities:E?[]:d.filter((function(t){return t.token})).map((function(t){return y()(t,["consumerId","service"])})),withIdentities:s,sessionStart:l},!(0,w.xb)(d)&&(!g&&!(0,k.IU)()||b()(d,(function(t){return t.token&&t.loggedInStatus})))){t.next=18;break}return t.next=12,Promise.all([(0,C.PV)().catch(_()),P().catch(_())]);case 12:S=t.sent,A=(0,n.Z)(S,2),O=A[0],D=A[1],I.cmaasSigned=O&&O.jwt,I.bluemixSigned=D;case 18:return(L=(0,k.hk)())&&(I=(0,a.Z)({},I,L)),t.next=22,(0,C.Gg)(I);case 22:if((X=t.sent).filter((function(t){return!0===t.token})).forEach((function(t){var e=m()(d,(function(e){return e.consumerId===t.consumerId&&e.service===t.service&&e.token}));e?t.token=e.token:(w.fF.warn("No token found for identity",(0,a.Z)({},t)),delete t.token)})),X.some((function(t){return"string"==typeof t.token&&t.token}))||f){t.next=26;break}return t.abrupt("return",N({refresh:!0,isRetry:!0}));case 26:return R(X),t.abrupt("return",p()(X,(function(t){return t.service})));case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w._G)((0,a.Z)({},A,{type:"GET",url:E.Hv.bluemixProfileJwt})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return[S,(0,w.hV)(T.W6.SANDBOX_CHAT)&&"sandbox",(0,k.PF)()&&(0,k.Wv)()].filter((function(t){return!!t})).join("-")}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t){return(0,a.Z)({},t,{expiresAt:t.maxAge?t.expiresAt||Date.now()+1e3*t.maxAge:void 0})}));(0,I.Q1)(I.b7.REQUIRED)&&sessionStorage.setItem(L(),JSON.stringify(e))}function M(){try{return JSON.parse(sessionStorage.getItem(L())).filter((function(t){return!t.expiresAt||t.expiresAt>Date.now()}))}catch(t){}return[]}var X=l()(E.j$.hosts,(function(t){var e,r,a=t.split(/\/\//);if(1===a.length){e="https:",r=(0,n.Z)(a,1)[0]}else{var o=(0,n.Z)(a,2);e=o[0],r=o[1]}var i=r.split(/\//),s=(0,n.Z)(i,1)[0];return"".concat(e,"//").concat(s)}));function Z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_(),e=function(e){if(s()(X,e.origin)){var r=JSON.parse(e.data);w.fF.log("Broadway sent event data",e,r),"CMaaS.loginComplete"===r.type&&t(r)}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},87750:(t,e,r)=>{"use strict";r.d(e,{Ec:()=>K,FF:()=>W,Gg:()=>L,IM:()=>Y,PF:()=>Z,PV:()=>N,TV:()=>F,ne:()=>P,so:()=>H,yj:()=>M});var n=r(79655),a=r(55185),o=r(54390),i=r(39982),s=r.n(i),c=r(85066),l=r.n(c),u=r(51351),p=r.n(u),f=r(19157),m=r.n(f),d=r(84264),_=r.n(d),h=r(8563),b=r.n(h),g=r(1821),y=r(1768),v=r(2053),x=r(45461),w=r(19187),k=r(43025),E=r(9634),C=r(57003),T=r(70004),I=r(68705),S=r(76625).i,A={xhrFields:{withCredentials:!0},timeout:2e4,contentType:"text/plain",json:!0};function N(){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y._G)({url:x.$N,type:"GET"}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(_().mark((function t(){var e;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,g.IU)()){t.next=5;break}return t.next=3,(0,T.s)().catch(m());case 3:return e=t.sent,t.abrupt("return",Boolean(e&&(e.emailAddress||e.email)));case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return R.apply(this,arguments)}function R(){return(R=(0,o.Z)(_().mark((function t(e){var r,o,i,s,c,l,u,p,f,m,d,h,C,T,I,N,O,D,L,R,M,X,Z,U,H,B,F,z,j,Y,G,W,V,K;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.iui,o=e.bluemixSigned,i=e.cmaasSigned,s=e.skill,c=e.firstName,l=e.lastName,u=e.services,p=void 0===u?(0,y.hV)(w.W6.SANDBOX_CHAT)?[v.fz.SANDBOX.IBM.ID]:[v.fz.PROD.IBM.ID,v.fz.PROD.SOFTLAYER.ID]:u,f=e.inApp,m=void 0===f?(0,g.PF)():f,d=e.refreshToken,h=void 0!==d&&d,C=e.clientInfo,T=void 0===C?{}:C,I=e.customerInfo,N=void 0===I?{}:I,O=e.personalInfo,D=void 0===O?{}:O,L=e.monitor,R=void 0!==L&&L,M=e.tokenIdentities,X=e.withIdentities,Z=void 0===X||X,U=e.sessionStart,H=void 0!==U&&U,t.next=3,P();case 3:return B=t.sent,F={iui:r,firstName:c,lastName:l,bluemixSigned:o,cmaasSigned:i,product:(0,g.Wv)(),skill:s,inApp:m,services:p,clientProperties:(0,a.Z)({},(0,y.K1)(),{appVersion:S},T,{ipAddress:(0,y.Wz)(w.Cg.IP_ADDRESS)||void 0}),entryPoints:v.Hb.getEntryPoints(s),tokenIdentities:M,debug:y.fF.isDebug||void 0},t.next=7,v.Hb.getLpAttributes();case 7:return z=t.sent,j=(0,n.Z)(z,2),Y=j[0],G=j[1],W=(0,y.Ie)({monitor:R,refreshToken:h,createAnonymousIdentity:Z,inAppIdentity:B,sessionStart:H}),V=function(){return new Promise((function(t,e){b().ajax((0,a.Z)({},A,{type:"POST",url:"".concat(x.Lx.session).concat(W),data:JSON.stringify((0,a.Z)({},F,{customerInfo:(0,a.Z)({},Y.info,N),personalInfo:(0,a.Z)({},G.personal,D)}))})).done((function(e,r,n){var a=n.getResponseHeader("X-Originating-Referrer");(0,k.bh)().dispatch((0,E.Ec)("canBroadwayRedirect",a===window.location.href)),t(e)})).fail((function(t){return e(t)}))}))},t.next=15,V();case 15:if(K=t.sent){t.next=18;break}return t.abrupt("return",Promise.reject("No session info from broadway"));case 18:return y.fF.log("Got session info from broadway",K),t.abrupt("return",K);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return X.apply(this,arguments)}function X(){return(X=(0,o.Z)(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y._G)((0,a.Z)({},A,{method:"GET",url:x.Lx.startSession})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t){return U.apply(this,arguments)}function U(){return U=(0,o.Z)(_().mark((function t(e){var r,o,i,s,c,l,u,f,m,d,h,b,g,k,E,C=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=C.length>1&&void 0!==C[1]?C[1]:0)>3)){t.next=3;break}return t.abrupt("return",Promise.reject("Error creating monitor, ran out of attempts."));case 3:return o=e.consumerId,i=e.account,s=e.skill,t.next=6,v.Hb.getLpAttributes();case 6:return c=t.sent,l=(0,n.Z)(c,2),u=l[0],f=void 0===u?{}:u,m=l[1],d=void 0===m?{}:m,h=(0,y.Wz)(w.Cg.IP_ADDRESS),b={customerInfo:f.info,personalInfo:d.personal,consumerId:o,clientProperties:(0,a.Z)({},(0,y.K1)(),{appVersion:S,ipAddress:h||void 0}),service:i,entryPoints:v.Hb.getEntryPoints(s)},k=x.Lx.createMonitor,h&&(k+=(0,y.Ie)({"umx-ip-override":h})),E=Date.now(),t.prev=17,t.next=20,(0,y._G)((0,a.Z)({},A,{url:k,method:"POST",data:JSON.stringify(b),contentType:"application/json"}));case 20:if("string"==typeof(g=t.sent)&&(g=JSON.parse(g)),g.skillStatus&&q(g.skillStatus),20!==g.internalCode){t.next=27;break}return t.next=26,(0,y.gw)(1e3*Math.pow(2,r+1));case 26:return t.abrupt("return",Z(e,r+1));case 27:I.c("Broadway engagement call success",{attempt:r,duration:Date.now()-E}),t.next=34;break;case 30:throw t.prev=30,t.t0=t.catch(17),I.c("Broadway engagement call failure",(0,a.Z)({attempt:r,duration:Date.now()-E,body:JSON.stringify(b)},p()(t.t0,["status","responseText","statusText","textStatus","errorThrown"]))),t.t0;case 34:return t.abrupt("return",g);case 35:case"end":return t.stop()}}),t,null,[[17,30]])}))),U.apply(this,arguments)}function H(t){return B.apply(this,arguments)}function B(){return B=(0,o.Z)(_().mark((function t(e){var r,n,o,i,s,c,l,u,p,f=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.consumerId,n=e.account,o=e.monitorInfo,i=e.skill,s=e.personalInfo,c=e.customerInfo,!((f.length>1&&void 0!==f[1]?f[1]:0)>3)){t.next=4;break}return t.abrupt("return",Promise.reject("Error updating monitor, ran out of attempts."));case 4:return t.next=6,v.Hb.getLpAttributes({personalInfo:s,customerInfo:c});case 6:return l=t.sent,u={consumerId:r,clientProperties:(0,a.Z)({},(0,y.K1)(),{appVersion:S}),entryPoints:v.Hb.getEntryPoints(i),engagementAttributes:l,monitorInfo:o,service:n},t.next=10,(0,y._G)((0,a.Z)({},A,{url:x.Lx.updateMonitor,method:"POST",data:JSON.stringify(u),contentType:"application/json"}));case 10:return"string"==typeof(p=t.sent)&&(p=JSON.parse(p)),t.abrupt("return",p);case 13:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function F(t,e){return z.apply(this,arguments)}function z(){return(z=(0,o.Z)(_().mark((function t(e,r){var n,a,o;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={service:r,skillIds:[e]},t.prev=1,t.next=4,(0,y._G)({url:x.Lx.asyncSkills,method:"POST",data:JSON.stringify(n),contentType:"application/json"});case 4:return a=t.sent,q(o=l()(a,(function(t){var n=t.skillId,a=t.account;return n===e&&a===r}))),t.abrupt("return",K(o));case 10:t.prev=10,t.t0=t.catch(1),y.fF.log("Error fetching async availability",t.t0);case 13:return t.abrupt("return",K());case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}var j=["2543314430","2543315930","2543317130","2878736330","2543318130","2521247930"];function Y(t,e){return G.apply(this,arguments)}function G(){return(G=(0,o.Z)(_().mark((function t(e,r){var n,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,y.Ie)({service:r,conversationId:e}),t.next=3,(0,y._G)({url:"".concat(x.Lx.asyncAgent).concat(n),method:"GET",contentType:"application/json"});case 3:return a=t.sent,s()(a,(function(t){j.includes(t.agentId)&&(t.isAvailable=!1)})),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t){return V.apply(this,arguments)}function V(){return(V=(0,o.Z)(_().mark((function t(e){var r,n,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.engagementDetails,n=e.service,t.next=3,(0,y._G)({url:"".concat(x.Lx.engagementStatus),method:"POST",data:JSON.stringify({service:n,engagementDetails:r}),contentType:"application/json"});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(t.status){case 1:case!0:case C.LF.AVAILABLE:return C.LF.AVAILABLE;case 0:case!1:case C.LF.UNAVAILABLE:return C.LF.UNAVAILABLE;default:return C.LF.UNKNOWN}}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.skillName||"";return e.includes("slack")&&(t.status=!1),t}},18012:(t,e,r)=>{"use strict";r.d(e,{bO:()=>v,vO:()=>g,Bf:()=>x,k2:()=>y});var n=r(55185),a=r(96138),o=r.n(a),i=r(20643),s=r.n(i),c=r(39982),l=r.n(c),u=r(1768),p=r(19187),f=r(57003);const m=JSON.parse('{"Analytics":{"matchEntireUrls":["https://www.ibm.com/analytics/products","https://www.ibm.com/analytics/products/","https://www.ibm.com/analytics","https://www.ibm.com/analytics/","https://www.ibm.com/us-en/products/category/technology/analytics","https://www.ibm.com/us-en/products/category/technology/analytics/","https://www.ibm.com/analytics/solutions","https://www.ibm.com/analytics/solutions/","https://www.ibm.com/analytics/support","https://www.ibm.com/analytics/support/","https://www.ibm.com/analytics/us/en/services/learning.html","https://www.ibm.com/analytics/us/en/services/learning.html/","https://www.ibm.com/analytics/ca/en","https://www.ibm.com/analytics/ca/en/"],"urls":["-en/products/category/technology/analytics"]},"Aspera":{"matchEntireUrls":["https://www.ibm.com/cloud/aspera"],"urls":["https://www.ibm.com/cloud/aspera/details","https://www.ibm.com/cloud/aspera/pricing","https://www.ibm.com/cloud/aspera/resource-library","-en/cloud/aspera","-en/products/aspera","https://www.ibm.com/products/aspera","https://www.ibm.com/demos/collection/IBM-Aspera"]},"API Connect":{"urls":["https://www.ibm.com/cloud/api-connect","-en/cloud/api-connect","https://www.ibm.com/demos/collection/IBM-API-Connect"]},"App Connect":{"matchEntireUrls":["https://www.ibm.com/cloud/app-connect"],"urls":["https://www.ibm.com/cloud/app-connect","https://www.ibm.com/demos/collection/IBM-App-Connect","-en/cloud/app-connect"]},"Blockchain":{"urls":["ibm.com/blockchain","-en/blockchain","https://www.ibm.com/demos/collection/IBM-Blockchain-Platform-on-IBM-Cloud","ibm.com/ar-es/blockchain","ar-es/blockchain"],"blacklistUrls":["blockchain/solutions/food-trust","https://www.ibm.com/blockchain/platform","https://www.ibm.com/blockchain/garage","https://www.ibm.com/cloud/blockchain-platform","-en/cloud/blockchain-platform","https://www.ibm.com/cloud/blockchain-platform/pricing","https://www.ibm.com/cloud/blockchain-platform/developer","ar-es/blockchain/solutions/food-trust","https://www.ibm.com/ar-es/blockchain/platform","https://www.ibm.com/ar-es/blockchain/garage","https://www.ibm.com/ar-es/cloud/blockchain-platform","ar-es/cloud/blockchain-platform","https://www.ibm.com/ar-es/cloud/blockchain-platform/pricing","https://www.ibm.com/ar-es/cloud/blockchain-platform/developer"]},"Blockchain Food Trust":{"countries":["us","ca"],"urls":["blockchain/solutions/food-trust","https://www.ibm.com/us-en/marketplace/food-trust"]},"Cloud Console":{"focusAreas":["Support - Cloud Assistant"]},"Cloud Console Contact":{"focusAreas":["Support - Cloud Platform - Overall"]},"Cognos Analytics":{"urls":["https://www.ibm.com/products/cognos-analytics","-en/products/cognos-analytics","https://www.ibm.com/demos/collection/IBM-Cognos-Analytics"]},"Db2":{"countries":["us","ca"],"urls":["https://www.ibm.com/products/db2-event-store","https://www.ibm.com/demos/collection/IBM-Db2-Event-Store"]},"DB2 Warehouse":{"countries":["us","ca"],"urls":["https://www.ibm.com/cloud/db2-warehouse-on-cloud","https://www.ibm.com/demos/collection/Db2-on-Cloud","https://www.ibm.com/demos/collection/IBM-Db2-Warehouse","https://www.ibm.com/demos/collection/IBM-Db2-Warehouse-on-Cloud"]},"GTS":{"countries":["us","ca"],"urls":[]},"Home Page":{"matchEntireUrls":["https://www.ibm.com/us-en","https://www.ibm.com/us-en/","https://wwwstage.ibm.com/us-en/","https://wwwstage.ibm.com/us-en","https://ushp-tool-nextjs.mybluemix.net/","https://ushp-tool-nextjs.mybluemix.net","https://www.ibm.com/watson-health","https://www.ibm.com/watson-health/about/micromedex","https://www.ibm.com/watson-health/learn/artificial-intelligence-healthcare","https://www.ibm.com/watson-health/learn/artificial-intelligence-medicine","https://www.ibm.com/watson-health/learn/healthcare-analytics","https://www.ibm.com/watson-health/learn/healthcare-data-analytics","https://www.ibm.com/watson-health/learn/healthcare-performance-measurements","https://www.ibm.com/watson-health/learn/healthcare-technology","https://www.ibm.com/watson-health/learn/healthcare-technology/","https://www.ibm.com/watson-health/learn/healthcare-transformation","https://www.ibm.com/watson-health/learn/interoperability-in-healthcare","https://www.ibm.com/watson-health/learn/price-transparency-healthcare","https://www.ibm.com/watson-health/learn/price-transparency-healthcare/","https://www.ibm.com/watson-health/learn/pulse-health-polls","https://www.ibm.com/watson-health/learn/quality-measures-healthcare","https://www.ibm.com/watson-health/services/integrated-facility-design","https://www.ibm.com/watson-health/solutions/diagnostic-imaging","https://www.ibm.com/watson-health/solutions/enterprise-imaging","https://www.ibm.com/watson-health/solutions/government-healthcare","https://www.ibm.com/watson-health/solutions/health-economics-outcomes-research","https://www.ibm.com/watson-health/solutions/health-human-services-analytics","https://www.ibm.com/watson-health/solutions/healthcare-provider","https://www.ibm.com/watson-health/solutions/life-sciences-technology","https://www.ibm.com/watson-health/solutions/payer","https://www.ibm.com/watson-health/solutions/performance-improvement-healthcare","https://www.ibm.com/watson/health/resources/fortune-webinars/"]},"ILOG CPLEX":{"urls":["ibm.com/products/ilog-cplex-optimization-studio","-en/products/ilog-cplex-optimization-studio","-en/marketplace/ibm-ilog-cplex","-en/products/ibm-ilog-cplex","https://www.ibm.com/demos/collection/IBM-ILOG-CPLEX-Optimization-Studio","https://www.ibm.com/ar-es/products/ilog-cplex-optimization-studio","ar-es/marketplace/ibm-ilog-cplex","ar-es/products/ibm-ilog-cplex"],"blacklistUrls":["ibm.com/products/ilog-cplex-optimization-studio/support","-en/products/ilog-cplex-optimization-studio/support","-en/marketplace/ibm-ilog-cplex/support","-en/products/ibm-ilog-cplex/support","ibm.com/ar-es/products/ilog-cplex-optimization-studio/support","ar-es/products/ilog-cplex-optimization-studio/support","ar-es/marketplace/ibm-ilog-cplex/support","ar-es/products/ibm-ilog-cplex/support"]},"IBM Cloud Private for Data":{"urls":["https://www.ibm.com/analytics/cloud-pak-for-data","https://www.ibm.com/products/cloud-pak-for-data","https://www.ibm.com/demos/collection/Cloud-Pak-for-Data","https://www.ibm.com/demos/collection/IBM-Cloud-Pak-for-Data","-en/products/cloud-pak-for-data"]},"Maximo":{"countries":["us","ca"],"urls":["https://www.ibm.com/products/maximo"]},"MQ":{"countries":["us","ca","uk","gb","ie","au","nz"],"urls":["https://www.ibm.com/products/mq","https://www.ibm.com/cloud/mq","-en/products/mq","https://www.ibm.com/demos/collection/IBM-MQ","https://www.ibm.com/demos/collection/MQ-on-IBM-Cloud"]},"IBM Order Management":{"countries":["us","ca"],"urls":["https://www.ibm.com/products/order-management","https://www.ibm.com/demos/collection/IBM-Sterling-Order-Management"]},"Planning Analytics":{"urls":[],"formerUrls":["https://www.ibm.com/products/planning-analytics","https://www.ibm.com/demos/collection/IBM-Planning-Analytics","-en/products/planning-analytics"]},"Red Hat":{"countries":["us","ca"],"urls":[]},"SPSS Modeler (XaaS)":{"urls":["ibm.com/products/spss-modeler","-en/marketplace/spss-modeler","-en/products/spss-modeler","https://www.ibm.com/demos/collection/IBM-SPSS-Modeler"]},"SPSS Stats (On Prem)":{"urls":["ibm.com/products/spss-statistics","-en/marketplace/spss-statistics","-en/products/spss-statistics","-de/products/spss-statistics","marketplace/analytics/rugby-campaign","https://www.ibm.com/de-de/products/spss-statistics","https://www.ibm.com/kr-ko/analytics/spss-trials","https://www.ibm.com/kr-ko/analytics/spss-statistics-software","https://www.ibm.com/kr-ko/products/spss-statistics","https://www.ibm.com/demos/collection/IBM-SPSS-Statistics","https://www.ibm.com/demos/collection/IBM-SPSS-Statistics-GradPack-%26-Faculty-Packs","https://www.ibm.com/analytics/spss-statistics-software","https://www.ibm.com/analytics/spss-trials","https://www.ibm.com/analytics/academic-statistical-analysis","ibm.com/ar-es/products/spss-statistics","ar-es/marketplace/spss-statistics","ar-es/products/spss-statistics","https://www.ibm.com/ar-es/analytics/spss-statistics-software","https://www.ibm.com/ar-es/analytics/spss-trials","https://www.ibm.com/ar-es/analytics/academic-statistical-analysis","https://www.ibm.com/analytics/academic-statistical-software","https://www.ibm.com/cl-es/products/spss-statistics","https://www.ibm.com/pe-es/products/spss-statistics","https://www.ibm.com/co-es/products/spss-statistics"]},"Storewize":{"countries":["us","ca"],"urls":["https://www.ibm.com/it-infrastructure/storage/storwize"]},"Think Support":{"focusAreas":["Support - THINK - Overall"]},"Watson Assistant API":{"urls":["https://www.ibm.com/cloud/watson-assistant","https://www.ibm.com/watson/how-to-build-a-chatbot","-en/ai-assistant","https://www.ibm.com/demos/collection/Watson-Assistant","https://www.ibm.com/watson/how-to-build-a-chatbot","ar-es/ai-assistant"]},"Watson Discovery":{"urls":["https://www.ibm.com/cloud/watson-discovery","https://www.ibm.com/watson/services/discovery","-en/cloud/watson-discovery","https://www.ibm.com/demos/collection/Watson-Discovery"]},"Watson Machine Learning":{"urls":["https://www.ibm.com/cloud/machine-learning","https://www.ibm.com/demos/collection/Watson-Machine-Learning","-en/cloud/machine-learning"]},"Watson NLU":{"urls":["https://www.ibm.com/cloud/watson-natural-language-understanding","https://www.ibm.com/watson/voice-of-the-customer","https://www.ibm.com/watson/services/natural-language-understanding","-en/cloud/watson-natural-language-understanding"]},"Watson Knowledge Catalog":{"countries":["us","ca"],"urls":["https://www.ibm.com/cloud/watson-knowledge-catalog","https://www.ibm.com/demos/collection/IBM-Watson-Knowledge-Catalog","-en/cloud/watson-knowledge-catalog"]},"Watson Knowledge Studio":{"urls":["https://www.ibm.com/cloud/watson-knowledge-studio","https://www.ibm.com/watson/services/knowledge-studio","https://www.ibm.com/demos/collection/IBM-Watson-Knowledge-Studio","-en/cloud/watson-knowledge-studio"]},"Watson OpenScale":{"urls":["https://www.ibm.com/watson/explainable-ai","https://www.ibm.com/cloud/watson-openscale","-en/cloud/watson-openscale"]},"Watson Studio":{"urls":["https://www.ibm.com/cloud/watson-studio","https://www.ibm.com/products/watson-studio-desktop","-en/cloud/watson-studio","https://www.ibm.com/demos/collection/IBM-Watson-Studio","https://www.ibm.com/demos/collection/IBM-Watson-Studio-AutoAI","https://www.ibm.com/demos/collection/IBM-Watson-Studio-Desktop","https://www.ibm.com/demos/collection/IBM-Watson-Studio-Modeler-Flows","https://www.ibm.com/demos/collection/IBM-Watson-Studio-Streams-Flows"]}}');var d=r(3479),_=r(43025);function h(t){var e,r=t&&t.split(/\?|#/g)[0];return l()(m,(function(n,a){return n.urls&&n.urls.forEach((function(r){-1!==t.indexOf(r)&&(e={skill:a,opts:n})})),n.matchEntireUrls&&n.matchEntireUrls.forEach((function(t){r===t&&(e={skill:a,opts:n})})),n.blacklistUrls&&n.blacklistUrls.forEach((function(r){-1!==t.indexOf(r)&&(e=void 0)})),!e})),e}function b(t,e){var r;return l()(m,(function(n,a){return n.focusAreas&&n.focusAreas.forEach((function(e){t===e&&(r={skill:a,opts:n})})),n.blacklistUrls&&n.blacklistUrls.forEach((function(t){-1!==e.indexOf(t)&&(r=void 0)})),!r})),r}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.Pg)((0,_.bh)().getState()).focusArea,r=(0,u.Wz)(p.Q7.CM_BOT_PRODUCT);if(r){var a=m[r]||{};return(0,n.Z)({},a,{chatService:"bot",chatRoutingCode:r,countries:null})}var o=h(t)||b(e,t);if(o)return(0,n.Z)({},o.opts,{chatService:"bot",chatRoutingCode:o.skill})}function y(t){var e=t.chatRoutings,r=void 0===e?[]:e,n=t.reroutingInfo,a=t.allowOverwrite;if(void 0===a||a){var o=g();if(o&&r.push(o),(0,u.hV)(p.PF.ASYNC)){(r=r||[]).push({chatService:"LEMessaging",chatRoutingCode:"Async_Test"})}}return r.map((function(t){var e=t.chatService.toLowerCase();if(e===f.US.liveperson.value){var r=n&&n[t.chatService]&&n[t.chatService][t.chatRoutingCode];r&&(e=r.chatService,t.chatRoutingCode=r.chatRoutingCode)}var a=function(t){return s()(f.US,[t,"queueType"])}(e);switch(a){case f._E.SYNC:return{chatRouting:t,service:e,skill:t.chatRoutingCode,purpose:t.purpose,queueType:a,ifExternalConfig:t.ifExternalConfig,focusArea:t.focusArea};case f._E.ASYNC:return{chatRouting:t,service:e,skill:t.chatRoutingCode,ifExternalConfig:t.ifExternalConfig,queueType:a};case f._E.BOT:return{chatRouting:t,service:"bot",skill:t.chatRoutingCode,countries:t.countries,phoneNumbers:t.phoneNumbers,switch:t.switch,queueType:a};default:u.fF.warn("cm-app: unsupported chat service",t.chatService)}})).filter((function(t){return Boolean(t)})).map((function(t){return t.adapter=v(t.service),t}))}function v(t){switch(t){case"liveperson":case"softlayer":return r(47044).Z;case"liveperson2":case"softlayermessaging":case"lemessaging":return r(28130).Z;case"salesforce":case"salesforcetrusteer":return r(75222).Z;case"bot":return r(30002).ZP;case"partnerworld":case"partnerworldopenfire":return r(23469).Z}}function x(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var r=new URL(t);return e&&h(t)?(r.searchParams.append(p.Cg.CONTACT_MODULE,"bot"),{url:r,type:"_self"}):(0,u.al)(r.hostname+r.pathname)||o()(t,"#")||o()(t,"tel")?{url:t,type:"_self"}:{url:t,type:"_blank"}}catch(e){return{url:t,type:"_self"}}}},22733:(t,e,r)=>{"use strict";r.d(e,{Q1:()=>_,_Z:()=>d,b7:()=>f});var n=r(79655),a=r(66748),o=r.n(a),i=r(20643),s=r.n(i),c=r(40104),l=r.n(c),u=r(1768),p={IMPLIED:"implied",EXPRESSED:"expressed",NOT_PROVIDED:"n/a"},f={REQUIRED:0,FUNCTIONAL:1,PERSONALIZATION:2,NOT_PROVIDED:-1},m=l()((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"==typeof t&&t.includes(":")){var e=Number(t.replace(/:.*/,""));if(!isNaN(e))return e}return-1})),d=function(){var t=((0,u.ej)("userContext")||"").split("|"),e=(0,n.Z)(t,9),r=e[0],a=e[1],i=e[2],c=e[3],l=e[4],f=e[5],d=e[6],_=e[7],h=e[8];d=Boolean(isNaN(d)?s()(window,"digitalData.user.privacy.isExpressedConsentRequired"):Number(d)),_=_||s()(window,"digitalData.user.privacy.noticeChoice")||"";var b=m(_);return h=h||s()(window,"digitalData.user.privacy.noticeBehavior")||"",o()(p).includes(h)||(h=p.NOT_PROVIDED),{upid:r,isIbmer:(0,u.Zg)(a),isRedHatter:(0,u.Zg)(i),isAuthenticated:(0,u.Zg)(c),countryCode:l,stateOrProvinceCode:f,isExpressedConsentRequired:d,noticeBehavior:h,noticeChoice:_,consentLevel:b}},_=function(t){var e=d(),r=e.consentLevel;return e.isExpressedConsentRequired?t<=r:r===f.NOT_PROVIDED||t<=r}},1821:(t,e,r)=>{"use strict";r.d(e,{A1:()=>O,Ah:()=>v,H9:()=>E,IR:()=>N,IU:()=>S,MW:()=>w,PF:()=>I,Wv:()=>b,Xx:()=>x,cL:()=>D,em:()=>h,hk:()=>L,l9:()=>y,nb:()=>P,oQ:()=>C,qy:()=>g,wu:()=>T});var n=r(31311),a=r(88685),o=r.n(a),i=r(14078),s=r.n(i),c=r(51351),l=r.n(c),u=r(96138),p=r.n(u),f=r(20643),m=r.n(f),d=r(1768),_=r(57003);function h(){try{return window.digitalData.product[0].productInfo.productName}catch(t){}}function b(){try{return window.digitalData.product[0].productInfo.productId}catch(t){}}function g(){try{return window.digitalData.user.profile.auid}catch(t){}}function y(){try{return window.digitalData.user.profile.ng.iui}catch(t){}}function v(){try{return window.digitalData.page.session.uPageViewID}catch(t){}}function x(){try{return m()(window.digitalData,"product[0].productInfo.productTitle")||m()(window.digitalData,"page.pageInfo.productTitle")||m()(window.digitalData,"page.pageInfo.analytics.productTitle")||m()(window.digitalData,"pageInfo.productTitle")}catch(t){}}function w(){try{return window.digitalData.page.pageInfo.ibm.messaging.settings.colorPalette}catch(t){}}var k=["myibm.ibm.com","wwwpoc.ibm.com","localhost.myibm.ibm.com:9090"];function E(){try{return!1===window.digitalData.page.pageInfo.ibm.messaging.isSalesPage&&(-1!==k.indexOf(window.location.host)||(0,d.hV)("debug-custom-cm"))}catch(t){}return!1}function C(){try{if(E())return"object"===(0,n.Z)(window.digitalData.page.pageInfo.ibm.messaging.nonSalesConfig)}catch(t){}return!1}function T(){try{if(C())return window.digitalData.page.pageInfo.ibm.messaging.nonSalesConfig}catch(t){}return{}}function I(){return m()(window.digitalData,"page.pageInfo.ibm.messaging.settings.inApp",!1)}function S(){return m()(window.digitalData,"page.pageInfo.ibm.messaging.settings.inAppMessaging",!1)}var A=[{hosts:["localhost","cloud.ibm.com","dev.console.test.cloud.ibm.com","test.cloud.ibm.com","dev.console.cloud.ibm.com","ondeck.console.cloud.ibm.com","ondeck.console.test.cloud.ibm.com"],paths:["/unifiedsupport"]},{hosts:["localhost","www.ibm.com","ibm-systems-staging.us-east.mybluemix.net","staging.ibm-virtual-event-609278-0679f4ca14d374c98a3b3940dcfdec41-0000.us-south.containers.appdomain.cloud"],paths:["/events/activations/unlock-your-potential/","/events/activations/harmonic-state/","/events/activations/Backbone-Brains/","/events/activations/sound-security/"]},{hosts:["localhost","www.ibm.com","cms.cis.ibm.net"],paths:["/cloud/watson-assistant"]}];function N(){return m()(window.digitalData,"page.pageInfo.ibm.messaging.settings.hidePill")&&A.some((function(t){var e=t.hosts,r=t.paths;return e.some((function(t){return window.location.hostname===t}))&&r.some((function(t){return p()(window.location.pathname,t)}))}))}function O(){return m()(window.digitalData,"page.pageInfo.ibm.messaging.settings.welcomeMessage")}function P(){var t=m()(window.digitalData,"page.pageInfo.ibm.messaging.settings.pillBounds")||{},e=t.right,r=t.bottom;return{left:e&&-1*e,top:r&&-1*r,right:e&&0,bottom:r&&0}}function D(){var t=m()(window,"digitalData.page.attributes",{});return l()(t,_.Lz),_.Lz.forEach((function(e){if(!t[e]){var r=(0,d.Wz)(e);r&&(t[e]=r)}})),(0,d.PQ)(t,{p1:"marketing_type",p2:"placement_id",p3:"creative_id",p4:"keyword_id",p5:"match_type"},{deleteOriginal:!1}),t}function L(){return s()(m()(window.digitalData,"page.pageInfo.ibm.messaging.settings.identity"),(function(t,e){return o()(e,"Signed")}))}},52633:(t,e,r)=>{"use strict";r.d(e,{FP:()=>l,_5:()=>f,fw:()=>m,z2:()=>p});var n=r(8270),a=r(42695),o=r.n(a),i=r(1768),s=r(43025),c=r(31554),l={CONTACT_CLICK:"CONTACT_CLICK",CLOSE_WINDOW:"CLOSE_WINDOW"},u=(0,n.Z)({},l.CLOSE_WINDOW,[function(){return(0,s.bh)().dispatch((0,c.nH)())}]),p=function(t,e){u[t]||(u[t]=[]),u[t].push(e),i.fF.log("eventHandler.register",t,e)},f=function(t,e){o()(u[t],e),i.fF.log("eventHandler.deregister",t,e)},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.cancelable,n=void 0!==r&&r,a=e.detail,o=void 0===a?{}:a;if(Array.isArray(u[t])){var s=new i.c$(t,{cancelable:n,detail:o,bubbles:!1});return u[t].forEach((function(t){try{t(s)}catch(t){console.error(t)}})),i.fF.log("eventHandler.fired",t,s),!s.defaultPrevented}return!0}},83318:(t,e,r)=>{"use strict";r.d(e,{Qc:()=>i,ri:()=>a,v0:()=>o});var n=r(85820),a=new n.Record({id:"",adapterId:"",isAgentTyping:!1,state:"",messages:(0,n.List)(),participants:(0,n.Map)(),unreadMsgCount:0,exitSurvey:(0,n.Map)(),notice:null}),o=new n.Record({type:"",adapterQueueType:"",text:"",lines:void 0,timestamp:void 0,datestamp:void 0,by:"",agentPictureUrl:"",participantId:void 0,clickHandler:void 0,id:"",isHistory:!1,isGreeting:!1,review:void 0,isViewed:void 0,isPending:!1,isPrivacy:!1,displayFeedback:!0,metadata:{_id:void 0,sequence:void 0}}),i=(new n.Record({id:"",nurtureType:"",type:void 0,isChat:!1,headingText:"",bodyText:"",greetingText:void 0,agentImageSrc:void 0,imageSrc:void 0,buttons:[],isAutoFadeOut:!1,fadeOutTime:void 0,clickAction:void 0,url:void 0,openURLinNewTab:!0,callbackMap:{},extraData:{},extraClassNames:[],originalMsgObj:{},ifCloseOnAccept:!1,renderOptOutLink:!1,languageCode:void 0,regionCode:void 0}),new n.Record({id:"",name:"",role:"",agentPictureUrl:null,nameUrl:null,roleUrl:null,isActive:!0,isAvailable:null}))},92423:(t,e,r)=>{"use strict";r.d(e,{Og:()=>s,X5:()=>i});var n=r(8563),a=r.n(n),o=r(1768);function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"swing";return new Promise((function(s,c){try{t instanceof a()&&e instanceof a()?t.delay(n).animate({scrollTop:e.offset().top-t.offset().top+t.scrollTop()},r,i,s):(o.fF.log("scrollTo error: invalid $scrollingContainer",t),s("invalid $scrollingcontainer"))}catch(t){o.fF.warn("scrollTo error: ",t),s(t)}}))}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"swing";try{t instanceof a()?t.delay(r).animate({scrollTop:t[0].scrollHeight},e,n):o.fF.log("scrollToBottom error: invalid $scrollingContainer",t)}catch(t){o.fF.warn("scrollToBottom error: ",t)}}},68705:(t,e,r)=>{"use strict";r.d(e,{c:()=>f});var n=r(55185),a=r(54390),o=r(84264),i=r.n(o),s=r(1768),c=r(43025),l=r(45077),u=r(1821),p="51479a8f-2f8e-4e8b-b29f-43560e7eac2d";function f(t){return m.apply(this,arguments)}function m(){return m=(0,a.Z)(i().mark((function t(e){var r,a,o=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},a=(0,l.nQ)((0,c.bh)().getState())||{},t.abrupt("return",(0,s._G)({url:"https://webhook.logentries.com/noformat/logs/".concat(p),method:"POST",contentType:"application/json",data:JSON.stringify((0,n.Z)({message:e,userAgent:navigator.userAgent,upid:(0,u.qy)()},r,{at:Date.now(),pageUrl:window.location.href,countryCode:a.ipAddressRegistryCountryCode,ipAddress:a.userIpAddress}))}));case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}},65545:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=["log","warn","error"],a={log:"green",warn:"gold",error:"red"},o={};function i(t){return o[t]||(t||"").split("").reduce((function(t,e){return t+e.charCodeAt(0)}),0)%360}function s(t,e){var r={shouldLog:e};return n.forEach((function(n){r[n]=function(t,e){var r=e.prefix,n=e.shouldLog,o=console.log;return function(){if(n)try{var e="",s="";try{var c=((new Error).stack||"").split("\n")[2];e=c.replace(/\(.*\)/,"").trim().replace(/^at /,""),s=c.match(/\(.*\)/)[0].replace(/\(/,"").replace(/\)/,"")}catch(t){}var l=Array.prototype.slice.call(arguments);l.unshift("@ ".concat(e,":\n")),l.unshift("%c".concat(s,"\n%c").concat(r?r+" ":"","%c[").concat(t.toUpperCase(),"]"),"font-size: 8px","font-weight:bold;color:hsl(".concat(i(r),", 100%, 50%)"),"padding:1px;border-radius:2px;background-color:".concat(a[t],";color:white;font-weight:bold")),o.apply(this,l)}catch(t){try{o.apply(this,arguments)}catch(t){}}}}(n,{prefix:t,shouldLog:e})})),r}},57003:(t,e,r)=>{"use strict";r.d(e,{Bs:()=>y,C5:()=>c,GT:()=>d,J1:()=>m,LF:()=>i,Lz:()=>T,P1:()=>k,Rf:()=>l,UE:()=>N,US:()=>o,_E:()=>a,dU:()=>f,fh:()=>u,gW:()=>h,h7:()=>p,i7:()=>w,iH:()=>I,jc:()=>C,jh:()=>E,kG:()=>v,le:()=>S,oK:()=>A,q2:()=>x,t$:()=>_,y$:()=>s});var n=r(8270),a={BOT:"bot",SYNC:"sync",ASYNC:"async"},o={bot:{value:"bot",queueType:a.BOT},liveperson:{value:"liveperson",queueType:a.SYNC},softlayer:{value:"softlayer",queueType:a.SYNC},liveperson2:{value:"liveperson2",queueType:a.ASYNC},softlayermessaging:{value:"softlayermessaging",queueType:a.ASYNC},lemessaging:{value:"lemessaging",queueType:a.ASYNC}},i={UNKNOWN:"unknown",AVAILABLE:"available",UNAVAILABLE:"unavailable"},s={AJS_ANONYMOUS_ID:"ajs_anonymous_id",PROACTIVE_POPUP_KEY:"cm-proactive-state",PILL_KEY:"cm-pill-events",ASYNC_UNREAD_VIEWED:"cm-async-areUnreadsSeen"},c={PROACTIVE_INVITE:"proactiveInvite",BOT_WELCOME_MSG:"botWelcomeMsg"},l={TYPE:"type",STATE:"state"},u={FORM:"FORM",DETAILS:"DETAILS",CANCELLATION_SURVEY:"CANCELLATION_SURVEY",CONFIRMATION_CANCEL:"CONFIRMATION_CANCEL",ERROR:"ERROR"},p={NO_CONTACT_MODULE:"No Contact Module",NO_CHAT:"NOCHAT"},f={BRAZE:"braze",INTERACT:"interact",TIMER:"timer",LOTAME:"LOTAME"},m={CLOSE:"CLOSE",CHAT:"CHAT",URL:"URL"},d=(0,n.Z)({CHAT:"Chat",NOTE:"Note",MESSAGE:"Message",POST:"Post"},f.INTERACT,{NOTE:"".concat([f.INTERACT],".Note")}),_={POPUP_LINK:"POPUP_LINK",PANE_LINK:"PANE_LINK",BOT_LINK:"BOT_LINK",CTA_LINK:"CTA_LINK",HEADER_CTA:"HEADER_CTA",QUERY_PARAM:"QUERY_PARAM",NOTIFICATION_BRAZE_LINK:"NOTIFICATION_BRAZE_LINK",NOTIFICATION_INTERACT_LINK:"NOTIFICATION_INTERACT_LINK"},h={PANE_LINK:"Button CM",BOT_LINK:"Bot Transfer",CTA_LINK:"Button CTA",HEADER_CTA:"Header CTA",POPUP_LINK:"Popup Timer",QUERY_PARAM:"Query Parameter",NOTIFICATION_BRAZE_LINK:"Popup Braze",NOTIFICATION_INTERACT_LINK:"Popup Interact"};function b(t){return"https://www.ibm.com/common/digitaladvisor/img/220x220_agentprofile".concat(t,".jpg")}var g=[[1,3,2].map((function(t){return b(t)})),[7,5,4].map((function(t){return b(t)}))],y=(Math.floor(Math.random()*g.length),{text:"text",link:"link",chat:"chat",checkout:"checkout",email:"email",phone:"phone",scheduler:"scheduler",support:"support",trial:"trial",choice:"choice",review:"review",group:"group",tile:"tile",readmore:"readmore"}),v={PRODUCT:"product",DISAMBIGUATION:"disambiguation",ENTITY_CHOICE:"entityChoice",ENTITY_GENERAL:"entityGeneral"},x={TIMER:"TIMER",BOT:"BOT"},w=s.PROACTIVE_POPUP_KEY,k={CM_APP_READY:"cm-app-ready",CM_APP_SDK_READY:"cm-app-sdk-ready",PILL_RENDERED:"cm-app-button-ready"},E={Cloud_Console_Contact:"Cloud Console Contact"},C=["RedHatMPSales"],T=["cm_mmc_vendor","cm_mmc_category","cm_mmc_placement","cm_mmc_item","cm_mmca1","cm_mmca2","cm_mmca3","cm_mmca4","cm_mmca5","cm_mmca6","cm_mmca7","cm_mmca8","cm_mmca9","cm_mmca10","cm_mmca11","utm_medium","utm_source","utm_campaign","utm_content","utm_term","utm_id","p1","p2","p3","p4","p5"],I=["p","strong","ul","li","a","code","ol","pre","img","name","dl","dt","dd","table","thead","tr","th","tbody","td","br","em","caption","h4","hr","col","span","var","figure","figcaption","blockquote","b","i","tt"],S={SUPPORT:"Support",SALES:"Sales",SOMETHING_ELSE:"Something else"},A={BOT:"bot",VISITOR:"visitor"},N={Support:null,Sales:null,"(default)":null,Testing:null}},19187:(t,e,r)=>{"use strict";r.d(e,{Cg:()=>n,PF:()=>s,Q7:()=>o,SZ:()=>p,W6:()=>i,aV:()=>u,fA:()=>c,pu:()=>l,t6:()=>a});var n={DEV_MODE:"dev-mode",CM_INTERACT:"cm-interact",CM_INTERACT_FORCE_POST_EVENT:"cm-interact-force-post-event",CM_BRAZE:"cm-braze",CM_API_ENDPOINT:"cm-api-endpoint",CM_DEBUG:"cm-debug",NO_REDUX_LOGGER:"no-redux-logger",CM_SKIP_RULES:"cmskiprules",CM_BLUEID:"cm-blueid",CM_ANALYTICS:"cm-analytics",CM_SEGMENT:"cm-segment",NO_CM_APP:"no-cm-app",CM_IUI:"cm-iui",CM_EMAIL:"cm-email",CM_START_CHAT:"cm-start-chat",CM_COUNTRY:"cm-country-override",CONTACT_MODULE:"contactmodule",TEXT_FRAGMENTS:"cm-text-fragments",IP_ADDRESS:"cm-ip-address",IBM_HOST:"cm-ibm-dot-com",IBM_AUDIENCE:"cm-ibm-audience"},a={INTERACT_DEV:"cm-interact-dev",INTERACT_TEST:"cm-interact-test",CM_PROACTIVE_TIME:"cm-proactive-time",CM_PROACTIVE_SHOW:"cm-proactive-show"},o={CM_BOT_LOCAL:"cm-bot-local",CM_BOT_DEV1:"cm-bot-dev1",CM_BOT_DEV2:"cm-bot-dev2",CM_BOT_DEV3:"cm-bot-dev3",CM_BOT_STAGING:"cm-bot-staging",CM_BOT_PRODUCT:"cm-bot-product",CM_BOT_MANAGER_DEBUG:"cm-bot-response-manager-debug",WAC_TARGET:"cm-wac-target"},i={SANDBOX_CHAT:"sandbox-chat",ALPHA_CHAT:"cm-alpha-chat",CHAT_ACCOUNT:"cm-chat-account",CHAT_SKILL:"cm-chat-skill"},s={ASYNC_DEBUG:"async-debug",MESSAGING_REDIRECT:"messagingRedirect",ASYNC:"cm-async-adapter",SKILL:"cm-async-skill",ACCOUNT_NO:"cm-async-account",REFRESH_JWT:"cm-refresh-jwt",SECTIONS:"cm-section",CHAT_CONT_ACCOUNT:"chat-continue-account",BROADWAY_ENDPOINT:"broadway-endpoint"},c={MBOXES:"cm-target"},l={SCHEDULER_FORM:"schedulerform",CONFIRMATION_NUMBER:"confirmationNumber",SCHEDULER_LANDING:"isSchedulerLanding",ERROR_CODE:"cm-scheduler-error-code",SCHEDULER_PURPOSE:"purpose",SKIP_AVAILABILITY_CHECK:"cm-skip-availability-check"},u={CM_DEBUG_WINDOW:"cm-debug-window"},p={LOGGER:"cm-app-sdk-logger"}},79291:(t,e,r)=>{"use strict";r.d(e,{CU:()=>a,Qq:()=>n});var n=/^\S+@\S+$/i,a=/\S+@\S+/i},4386:(t,e,r)=>{"use strict";r.d(e,{DI:()=>f,Do:()=>_,GI:()=>o,RE:()=>d,SI:()=>m,W6:()=>h,aV:()=>l,l2:()=>n,oj:()=>a,p:()=>b,pu:()=>s,t6:()=>u,uS:()=>c,uz:()=>i,yH:()=>p});var n={cmAppId:"cm-app",cmAppContainerId:"cm-app-container",cmId:"contact-module",cmContainer:"cm-container",cmLinkClass:"cm-link",cmButtonClass:"cm-button",cmButtonSecondaryClass:"cm-button-secondary",cmHidden:"cm-hidden"},a={paneClass:"cm-pane",paneWrapperClass:"cm-pane-wrapper",homeBtnClass:"cm-pane-home-btn",menuToggleBtnClass:"cm-pane-toggle-btn",paneHeaderClass:"cm-pane-header",messageBarClass:"cm-pane-message-bar",headerTextWrapperClass:"cm-pane-header-text-wrapper",headerTopClass:"cm-pane-header-top",headerBottomClass:"cm-pane-header-bottom",headerButtonClass:"cm-pane-header-button",toggleButtonId:"cm-pane-toggle-button-id",minimizeBtnClass:"cm-pane-minimize-btn",defaultAgentImage:"cm-agent-default-image",paneAgentImage:"cm-agent-image",closeBtnClass:"cm-pane-close-btn",minimizeBtnWrapperClass:"cm-pane-header-btn-wrapper-minimize",closeBtnWrapperClass:"cm-pane-header-btn-wrapper-close",avatarWrapperClass:"cm-avatar-wrapper",avatarClass:"cm-avatar",notificationClass:"cm-notification-bubble",notificationId:"cm-notification-id",headerTitleClass:"cm-pane-header-title",paneOverlayClass:"cm-pane-overlay",spinnerClass:"cm-spinner",endChatContainerClass:"cm-end-chat-container",endChatBtnYesClass:"cm-end-chat-yes-btn",endChatBtnNoClass:"cm-end-chat-no-btn",cmNoScrollClass:"cm-no-scroll",geoWrapperClass:"cm-geo-wrapper",paneBodyClass:"cm-pane-body",pointerCursorClass:"cm-pointer-cursor",backArrowClass:"cm-pane-back-arrow",routerCardClass:"cm-router-card",phoneNumberClass:"cm-phone-number",somethingElseClass:"cm-something-else"},o={menuWrapperClass:"cm-menu-wrapper",menuClass:"cm-menu",chatWrapperClass:"cm-chat-wrapper",menuBlockClass:"cm-menu-block",returnToChatBtnClass:"cm-return-to-chat-btn",containerDetailClass:"cm-container-details",accordianClass:"cm-menu-accordian",accordianSelectorName:"cm-menu-accordian-selector",accordianGroupClass:"cm-menu-accordian-group",accordianHeadingClass:"cm-menu-accordian-heading",accordianContentClass:"cm-menu-accordian-content",phoneInformationClass:"cm-menu-phone-information",geoWrapperClass:"cm-geo-wrapper",changeLocationId:"change-location",customMenuContainerId:"cm-custom-channel-",customMenuLinkClass:"cm-custom-link",customContainerClass:"cm-custom-container",customIconClass:"cm-custom-icon"},i={emailLinkClass:"cm-email-link",schedulerLinkClass:"cm-scheduler-link",cmCallLinkClass:"cm-call-link",supportLinkClass:"cm-support-chat-link",customLinkClass:"cm-custom-link"},s={schedulerMenuId:"cm-scheduler-channel",moduleClass:"scheduler-module",cognitive:"scheduler-cognitive",bodyClass:"scheduler-body",headingTextClass:"scheduler-heading-txt",questionInputId:"scheduler-question",suggestedLinkClass:"scheduler-suggested-link",firstNameInputId:"scheduler-first-name",lastNameInputId:"scheduler-last-name",phoneNumberInputId:"scheduler-phone-number",companyInputId:"scheduler-company",dateSelectId:"scheduler-date-select",timeSelectId:"scheduler-time-select",timezoneSelectId:"scheduler-timezone-select",confirmationScreenId:"scheduler-dom-confirmation",cancellationConfirmationScreen:"cancellationConfirmationScreen-module_container",menuId:"cm-scheduler-channel",linkClass:"cm-scheduler-link",topicDropdownId:"topic-dropdown",schedulerLinkClass:"cm-scheduler-link",thumbsupClass:"thumbs-up",thumbsdownClass:"thumbs-down",schedulerIconClass:"cm-scheduler-icon",emailInputId:"scheduler-email-input",privacyId:"scheduler-privacy",privacyCountryId:"scheduler-privacy-country",formId:"scheduler-form"},c={messageClass:"cm-chat-message",surveyMessageClass:"from-survey-message",systemMessageClass:"from-system-message",cmPrivacyMessageClass:"from-cmprivacy-message",fromDownloadTranscriptClass:"from-download-transcript",chatWindowClass:"cm-pane-chat-window",chatWindowWrapperClass:"cm-pane-chat-window-wrapper",textInputId:"cm-textInput",sendBtnClass:"send-btn",chatBoxBottomClass:"cm-pane-bottom",chatBoxWrapperClass:"chat-box-wrapper",userMessageClass:"from-user-message",agentMessageClass:"from-agent",botMessageClass:"from-bot",surveyThankyouMessageClass:"from-thankyou-message",buttonMessageClass:"from-button-message",submitBtnClass:"submit-btn",cancelBtnClass:"cancel-btn",downloadTranscriptBtnClass:"download-transcript-btn",surveyTitleClass:"survey-title",surveyRadioListClass:"survey-radio-list",questionTitleClass:"question-title",msgOriginIdAttr:"participantId",msgOriginNameClass:"name-time-line-name",msgOriginAvatarUrlClass:"cm-avatar",privacyClass:"privacy-statement",agentTypingClass:"agent-typing",surveyTextAreaClass:"survey-testarea",sessionMessagesClass:"session-messages",historyMessagesClass:"history-messages",dateHeaderClass:"date-header",feedbackBtnClass:"feedback-btn",thumbsupClass:"thumbs-up",thumbsdownClass:"thumbs-down",feedbackClickedClass:"interacted",dummyTextareaClass:"dummyTextarea",messageInnerClass:"message-inner",messageInnerBotClass:"message-inner-bot",agentJoinedClass:"agent-joined-message",productsToTryClass:"cm-chat-window-product-to-try",reviewWrapperClass:"cm-chat-review-wrapper",reviewTitleClass:"cm-chat-review-title",reviewRatingWrapperClass:"cm-chat-review-rating-wrapper",reviewRatingTextClass:"cm-chat-review-rating-text",reviewRatingStarWrapperClass:"cm-chat-review-rating-star-wrapper",reviewRatingStarClass:"cm-chat-review-rating-star",reviewBodyClass:"cm-chat-review-body",reviewUsernameClass:"cm-chat-review-username",readMoreReviewBtnClass:"cm-chat-read-more-review-btn",loadMoreReviewBtnClass:"cm-chat-load-more-review-btn",botMessage:"cm-chat-bot-message",visitorMessage:"cm-chat-visitor-message"},l={debugId:"cm-debug",popupClass:"cm-popup",closeButtonClass:"cm-popup-close",actionButtonsClass:"cm-popup-actions",startChatButtonId:"cm-popup-start-chat",supportChatButtonId:"cm-popup-support-chat",schedButtonId:"cm-popup-sched",headingClass:"cm-popup-heading",contentClass:"cm-popup-content"},u={notificationClass:"cm-notification",notificationClickableClass:"cm-notification-clickable",notificationPostClass:"cm-notification-post",notificationInteractNoteClass:"cm-notification-interact-note",notificationSvgClass:"cm-notification-link-svg",closeBtnClass:"cm-notification-close-btn",closeBtnIconClass:"cm-notification-close-btn-icon",decorationLineClass:"cm-notification-decoration-line",notificationWrapperClass:"cm-notification-wrapper",headerClass:"cm-notification-header",bodyClass:"cm-notification-body-wrapper",btnContainerClass:"cm-notification-link-btn-container",btnClass:"cm-notification-link-btn",agentImgClass:"cm-notification-agent-img",topImgClass:"cm-notification-top-img",watsonRayClass:"cm-notification-watson-ray",textInputId:"cm-text-input",sendBtnClass:"cm-send-chat-btn",minifiedClass:"minified",afterBodyWrapperClass:"cm-notification-after-body-wrapper",optOutClass:"cm-notification-opt-out"},p={proactivePopupClass:"cm-proactive-popup",popupClass:"cm-popup",closeButtonClass:"cm-popup-close",actionButtonsClass:"cm-popup-actions",startChatButtonId:"cm-popup-start-chat",supportChatButtonId:"cm-popup-support-chat",schedButtonId:"cm-popup-sched",headingClass:"cm-popup-heading",contentClass:"cm-popup-content"},f={botWelcomeMessageClass:"cm-bot-welcome-msg",closeButtonClass:"cm-popup-close",closeButtonId:"cm-bot-welcome-msg-close",botWelcomeMsgWrapperClass:"cm-bot-welcome-msg-wrapper",botWelcomeMsgWrapperId:"cm-bot-welcome-msg-wrapper"},m={containerId:"custom-select-wrapper",localeInputClass:"locale-dd-input",spanInputValueClass:"input-value",contentDropdownClass:"content-dropdown",changeLocationId:"change-location",localeLabel:"locale-label",ajaxOverlayClass:"cm-pane-if-end-chat",trueSelect:"true-select",selected:"selected",searchSelect:"search-select",localeClassFilter:"locale",slideDown:"slide-down",optionsContainerClass:"cm-dropdown-options-wrapper",selectClass:"cm-dropdown-select"},d={callMenuId:"cm-call-channel",callLinkClass:"cm-call-link",priorityCodeClass:"cm-priority-code",phoneInfoClass:"cm-phone-information",phoneContainer:"cm-phone-container",phoneIconClass:"cm-phone-icon"},_={emailMenuId:"cm-email-channel",emailLinkClass:"cm-email-link",emailIconClass:"cm-email-icon"},h={chatMenuId:"cm-chat-channel",loginLinkClass:"cm-chat-login-link",registerLinkClass:"cm-chat-register-link"},b={botBtnClass:"cm-chat-window-btn",botBtnNewClass:"cm-chat-window-btn-new",botBtnNewTextClass:"cm-chat-window-btn-text",botBtnNewAdditionTextClass:"cm-chat-window-btn-additional-text",botBtnNewSelfClass:"cm-chat-window-btn-self",botBtnNewWithIconClass:"cm-chat-window-btn-with-icon",botBtnLaunchIconClass:"cm-chat-window-launch-icon"}},45455:(t,e,r)=>{"use strict";r.d(e,{GC:()=>o,Hj:()=>l,LQ:()=>i,S9:()=>u,ck:()=>c,dl:()=>s,oM:()=>p});var n=r(66748),a=r.n(n),o={AVAILABLE:"available",NOTAVAILABLE:"unavailable",UNAVAILABLE:"unavailable"},i=a()(o),s={WAITING:"waiting",CHATTING:"chatting",ERROR:"error",FATAL_ERROR:"fatal_error",ENDED:"ended",CLOSED:"closed"},c=a()(s),l={MENU:"MENU",CHAT:"CHAT",TOGGLE:"TOGGLE",BUSINESS_LOCATION:"BUSINESS_LOCATION"},u={CHAT:"CHAT",SCHEDULER:"SCHEDULER",CALL:"CALL",EMAIL:"EMAIL",SUPPORT_CHAT:"SUPPORT_CHAT",CUSTOM:"CUSTOM"},p={OPENED:-1,CLOSED:-2,TIMEOUT:-3,BLOCKED:-4}},93188:(t,e,r)=>{"use strict";r.d(e,{I:()=>a,Kk:()=>i,gY:()=>o,gk:()=>s});var n=r(1768),a={EXTERNAL_CONFIG_KEY:"EXTERNAL_CONFIG_KEY"};function o(t,e){n.fF.log("[storageUtils:storeToSessionStorage]",t,e);try{sessionStorage.setItem(t,JSON.stringify(e))}catch(t){n.fF.warn("[storageUtils:storeToSessionStorage] error",t)}}function i(t){try{var e=JSON.parse(sessionStorage.getItem(t));return n.fF.log("[storageUtils:getFromSessionStorage]",e),e}catch(t){n.fF.warn("[storageUtils:getFromSessionStorage] error",t)}}function s(t){n.fF.log("[storageUtils:removeFromSessionStorage]",t),sessionStorage.removeItem(t)}},43025:(t,e,r)=>{"use strict";r.d(e,{bh:()=>A,SS:()=>P,Is:()=>D,kr:()=>N});var n=r(46270),a=r.n(n),o=r(57560),i=r(31371),s=r(59067),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function l(t){return null!==t&&"object"===(void 0===t?"undefined":c(t))&&(t&&"function"==typeof t.then)}var u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=["PENDING","FULFILLED","REJECTED"];var m=r(85820),d=r.n(m),_=r(1768),h=r(19187),b=r(82234),g=r(11801);var y=r(57003),v=_.HT||(0,_.hV)(h.pu.SCHEDULER_FORM)||(0,_.hV)(h.pu.CONFIRMATION_NUMBER),x=(0,_.hV)(h.Cg.CONTACT_MODULE),w="true"===(0,_.ej)(y.y$.ASYNC_UNREAD_VIEWED,!1)||!1,k=function(){return d().fromJS({general:{isOverlayDisplayed_notification:!1,clientInfo:{isUserActive:!0},isLoggedIn:!1,isMobile:window.innerWidth<=768},data:{cm_api:{config:{},bundle:{},text:{},isFetched:!1},lp_sdk:{isFetched:!1},externalBundles:{}},pane:{isPaneHidden:!x,hasDisplayed:x,isPillHiddenOverride:!1,shouldLoadPane:!1,isEndChatOverlayDisplayed:!1,displayChatInPaneOverride:!1,isToggleMenuDisplayed:!1,isProactivePopupDisplay:!1,isLocaleDropdownDisplayed:!1,isLoading:!1},chat:{conversations:{},transferStatus:void 0,transferMap:{},startChatButtonType:x?y.t$.QUERY_PARAM:void 0,startChatButtonIndex:void 0,adapters:{},domSelectorToScrollTo:void 0,ifShowDownloadTranscriptButton:!1,chatCookie:w},popup:{headerText:null,industryId:null},scheduler:{isDisplayed:v,hasDisplayed:v,schedulerType:void 0,info:{},noticeAvailable:!1,isSaveComplete:!1,isModifying:!1,isModifyCancelled:!1},notification:{allNotifications:{},renderedNotificationIds:[],blockedNotificationIds:[]},uuid:(0,_.k$)()})},E=[i.Z,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.promiseTypeSuffixes||f,r=t.promiseTypeDelimiter||"_";return function(t){var n=t.dispatch;return function(t){return function(a){var o=void 0,i=void 0;if(!a.payload)return t(a);var s=a.payload;if(l(s))o=s;else if(l(s.promise))o=s.promise,i=s.data;else{if("function"!=typeof s&&"function"!=typeof s.promise)return t(a);if(o=s.promise?s.promise():s(),i=s.promise?s.data:void 0,!l(o))return t(p({},a,{payload:o}))}var c=a.type,f=a.meta,m=u(e,3),d=m[0],_=m[1],h=m[2],b=function(t,e){return p({type:[c,e?h:_].join(r)},null==t?{}:{payload:t},void 0!==f?{meta:f}:{},e?{error:!0}:{})};return t(p({type:[c,d].join(r)},void 0!==i?{payload:i}:{},void 0!==f?{meta:f}:{})),o.then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=b(t,!1);return n(e),{value:t,action:e}}),(function(t){var e=b(t,!0);throw n(e),t}))}}}}(),g.i,function(){return function(t){return function(e){try{e.type,b.Z.GENERAL.SHUT_DOWN}catch(t){_.fF.error("Error shutting down:",t)}t(e)}}}],C=o.qC;if(_.fF.isDebug&&!(0,_.hV)(h.Cg.NO_REDUX_LOGGER)){var T=(0,s.hu)({collapsed:!0,stateTransformer:function(t){return d().Iterable.isIterable(t)?t.toJS():t}});E.push(T),C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.qC}var I,S=o.md.apply(void 0,E);function A(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&(I=(0,o.MT)(r(52126).Z,k(),C(S)),_.fF.log("Created new store",I)),I}function N(){_.fF.log("Removing store"),A().replaceReducer((function(){return d().Map()})),O.forEach((function(t){return t()})),A().dispatch({type:b.Z.GENERAL.SHUT_DOWN})}var O=[];function P(t,e,r){if("function"!=typeof t||"function"!=typeof e)throw new Error("Error adding store observer - select or onChange is not a function.");var n,a=d().Map();function o(){if(A()){var o=A().getState(),s=t(o);if(s!==n){var c=n,l=a;n=s,a=o,r&&r(n,c)&&i(),e(n,c,o,l,i)}}}var i=A().subscribe(o);return O.push(i),o(),i}function D(t){a()(t,(function(t,e){_.fF.log("Registering ".concat(e," to observe store")),(void 0===t.condition||t.condition)&&(t.unsubscribe=P(t.select,t.onChange,t.shouldUnsubscribe))}))}},12913:(t,e,r)=>{"use strict";r.d(e,{Qu:()=>k,Tw:()=>f,LQ:()=>w,RK:()=>g,qW:()=>x,nR:()=>d,Ts:()=>m,IH:()=>v,eH:()=>b,dM:()=>h,h9:()=>y,EE:()=>_});var n=r(63123),a=r(35466),o=r(92703),i=r.n(o),s=r(93379),c=r.n(s),l=r(30200),u={injectType:"singletonStyleTag",attributes:{class:"cm-app-css"},insert:"head",singleton:!0};c()(l.Z,u);const p=l.Z.locals||{};function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.createElement("svg",(0,n.Z)({},t,{focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}),a.createElement("path",{d:"M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"}))}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 32 32"},t,{"aria-labelledby":"cm-thumbsup-title"}),a.createElement("title",{id:"cm-thumbsup-title"},"Helpful"),a.createElement("path",{d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12z"}),a.createElement("path",{d:"M11.5 11a2.5 2.5 0 1 0 2.5 2.5 2.48 2.48 0 0 0-2.5-2.5zm9 0a2.5 2.5 0 1 0 2.5 2.5 2.48 2.48 0 0 0-2.5-2.5zM16 24a8 8 0 0 0 6.85-3.89l-1.71-1a6 6 0 0 1-10.28 0l-1.71 1A8 8 0 0 0 16 24z"}))}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 32 32"},t,{"aria-labelledby":"cm-thumbsdown-btn"}),a.createElement("title",{id:"cm-thumbsdown-title"},"Unhelpful"),a.createElement("path",{d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12z"}),a.createElement("path",{d:"M11.5 11a2.5 2.5 0 1 0 2.5 2.5 2.5 2.5 0 0 0-2.5-2.5zm9 0a2.5 2.5 0 1 0 2.5 2.5 2.5 2.5 0 0 0-2.5-2.5zM16 19a8 8 0 0 0-6.85 3.89l1.71 1a6 6 0 0 1 10.28 0l1.71-1A8 8 0 0 0 16 19z"}))}function _(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 24",role:"img","aria-labelledby":"cm-typing-title"},a.createElement("title",{id:"cm-typing-title"},"Typing..."),a.createElement("g",{className:"Layer_2",dataname:"Layer 2"},a.createElement("g",{className:"Layer_1-2",dataname:"Layer 1"},a.createElement("circle",{cx:"4",cy:"12",r:"4"}),a.createElement("circle",{cx:"16",cy:"12",r:"4"}),a.createElement("circle",{cx:"28",cy:"12",r:"4"}))))}function h(t){return a.createElement("svg",(0,n.Z)({},t,{viewBox:"0 0 18 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",role:"img","aria-labelledby":"cm-pill-icon-title"}),a.createElement("title",{id:"cm-pill-icon-title"},"Contact Us"),a.createElement("g",{className:"open-links-support",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-1.000000, -2.000000)"},a.createElement("g",{className:"umx-chat-20px"},a.createElement("g",{className:"cm-Icon",transform:"translate(1.250000, 2.500000)",fill:"#000000",fillRule:"nonzero"},a.createElement("path",{d:"M9.8375,16.25 L8.75,15.625 L11.25,11.25 L15,11.25 C15.6903559,11.25 16.25,10.6903559 16.25,10 L16.25,2.5 C16.25,1.80964406 15.6903559,1.25 15,1.25 L2.5,1.25 C1.80964406,1.25 1.25,1.80964406 1.25,2.5 L1.25,10 C1.25,10.6903559 1.80964406,11.25 2.5,11.25 L8.125,11.25 L8.125,12.5 L2.5,12.5 C1.11928813,12.5 2.77555756e-16,11.3807119 0,10 L0,2.5 C-1.38777878e-16,1.11928813 1.11928813,0 2.5,0 L15,0 C16.3807119,0 17.5,1.11928813 17.5,2.5 L17.5,10 C17.5,11.3807119 16.3807119,12.5 15,12.5 L11.975,12.5 L9.8375,16.25 Z",id:"Shape"}),a.createElement("rect",{x:"3.75",y:"3.75",width:"10",height:"1.25"}),a.createElement("rect",{x:"3.75",y:"7.5",width:"6.25",height:"1.25"})),a.createElement("g",{className:"cm-Transparent_Rectangle"},a.createElement("rect",{x:"0",y:"0",width:"20",height:"20"})))))}function b(t){return a.createElement("svg",(0,n.Z)({focusable:"false",preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{willChange:"transform"}},t,{"aria-labelledby":"umx-forward-icon-title"}),a.createElement("title",{id:"umx-forward-icon-title"},"Forward"),a.createElement("path",{d:"M9.3 3.7l3.8 3.8H1v1h12.1l-3.8 3.8.7.7 5-5-5-5z"}))}function g(t){return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},t,{className:i()(p.icon,t.className)}),a.createElement("path",{d:"M26 26H6V6h9V4H6a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-9h-2zm0-20V2h-2v4h-4v2h4v4h2V8h4V6h-4z"}))}function y(t){return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t,{"aria-labelledby":"cm-minus-title"}),a.createElement("title",{id:"cm-minus-title"},"Less"),a.createElement("path",{d:"M4 7.5h8v1H4z"}))}function v(t){return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t),a.createElement("path",{d:"M8.5 7.5V3h-1v4.5H3v1h4.5V13h1V8.5H13v-1z"}))}function x(t){return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},t,{className:i()(p.icon,t.className)}),a.createElement("path",{d:"M26 29h-.17C6.18 27.87 3.39 11.29 3 6.23A3 3 0 015.76 3h5.51a2 2 0 011.86 1.26L14.65 8a2 2 0 01-.44 2.16l-2.13 2.15a9.37 9.37 0 007.58 7.6l2.17-2.15a2 2 0 012.17-.41l3.77 1.51A2 2 0 0129 20.72V26a3 3 0 01-3 3zM6 5a1 1 0 00-1 1v.08C5.46 12 8.41 26 25.94 27a1 1 0 001.06-.94v-5.34l-3.77-1.51-2.87 2.85-.48-.06c-8.7-1.09-9.88-9.79-9.88-9.88l-.06-.48 2.84-2.87L11.28 5z"}))}function w(t){return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},t,{className:i()(p.icon,t.className)}),a.createElement("path",{d:"M28 6H4a2 2 0 00-2 2v16a2 2 0 002 2h24a2 2 0 002-2V8a2 2 0 00-2-2zm-2.2 2L16 14.78 6.2 8zM4 24V8.91l11.43 7.91a1 1 0 001.14 0L28 8.91V24z"}))}function k(t){return a.createElement("svg",(0,n.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},t,{className:i()(p.icon,t.className)}),a.createElement("path",{d:"M26 4.03h-4v-2h-2v2h-8v-2h-2v2H6a2 2 0 00-2 2v20a2 2 0 002 2h20a2 2 0 002-2v-20a2 2 0 00-2-2zm0 22H6v-14h20zm0-16H6v-4h4v2h2v-2h8v2h2v-2h4z"}))}},37750:(t,e,r)=>{"use strict";r.d(e,{GT:()=>a,I3:()=>n,Jw:()=>o,j8:()=>i,kh:()=>s,tS:()=>c});var n={CONTACT_MODULE:"umx-contact-module",TARGET_TEST:"homepage",UMX_TEST:"umx_testing",UMX_TEST2:"umx_testing2",TEST_ACTIVITY:"umx-test-activity",TRACK:"umx-track",SCHEDULER_CONTAINER:"umx-scheduler-container"},a={CLICK:"click",DISPLAY:"display"},o={ACTIVITY_MBOX:"activityMbox",VIEW:"view",CLICK:"click"},i={TEST:"umx-test-track",ENTRY_POINT_CLICK:"umx-entry-point-click",CHAT_INTERACTIVE:"umx-chats-total-interactive",SCHED_OPENED:"umx-scheduler",SCHED_QUESTION:"umx-scheduler-question",SCHED_TIME:"umx-scheduler-time",SCHED_CONTACT_INFO:"umx-scheduler-contact-info",SCHED_APPT_CONFIRMED:"umx-scheduler-appt-confirmed",CM_EMAIL_CLICK:"umx-email-click",CM_OTHER_CHANNEL_CLICK:"umx-other-channel-click",SALES_TOPIC_CLICK:"umx-sales-topic-click",SUPPORT_TOPIC_CLICK:"umx-support-topic-click"},s={HOST:"tgt.maep.ibm.com",CLIENT:"ibm",TOKEN:"33786398-82af-6de5-0dcd-e4f72e4fcea3",COOKIE_NAME:"umx-at"},c={MODAL:"MODAL",SIDERAIL:"SIDERAIL"}},54904:(t,e,r)=>{"use strict";r.d(e,{s:()=>j});var n,a=r(55185),o=r(8270),i=r(54390),s=r(79655),c=r(4913),l=r(64296),u=r(69113),p=r.n(u),f=r(7271),m=r.n(f),d=r(7976),_=r.n(d),h=r(66190),b=r.n(h),g=r(85066),y=r.n(g),v=r(39982),x=r.n(v),w=r(20643),k=r.n(w),E=r(40104),C=r.n(E),T=r(62154),I=r.n(T),S=r(66748),A=r.n(S),N=r(84264),O=r.n(N),P=r(1768),D=r(37750),L=r(19187),R=r(44539),M=r(57003);const X=(n={},(0,o.Z)(n,R.Z.CM_PILL_CLICK,(function(){return[[D.I3.TARGET_TEST,D.j8.TEST,D.Jw.CLICK],[D.I3.TEST_ACTIVITY,D.j8.ENTRY_POINT_CLICK,D.Jw.CLICK]]})),(0,o.Z)(n,R.Z.CHAT_INTERACTIVE,(function(){return[[D.I3.TEST_ACTIVITY,D.j8.CHAT_INTERACTIVE,D.Jw.VIEW]]})),(0,o.Z)(n,R.Z.CM_EMAIL_CLICK,(function(){return[[D.I3.TEST_ACTIVITY,D.j8.CM_EMAIL_CLICK,D.Jw.CLICK]]})),(0,o.Z)(n,R.Z.CUSTOM_LINK_CLICKED,(function(){return[[D.I3.TEST_ACTIVITY,D.j8.CM_OTHER_CHANNEL_CLICK,D.Jw.CLICK]]})),(0,o.Z)(n,R.Z.ROUTER_CARD_CLICK,(function(t){var e=[];switch(t.$element.attr("purpose-group")){case M.le.SALES:e.push([D.I3.TEST_ACTIVITY,D.j8.SALES_TOPIC_CLICK,D.Jw.CLICK]);break;case M.le.SUPPORT:e.push([D.I3.TEST_ACTIVITY,D.j8.SUPPORT_TOPIC_CLICK,D.Jw.CLICK])}return e})),(0,o.Z)(n,R.Z.SCH_START,(function(){return[[D.I3.SCHEDULER_CONTAINER,D.j8.SCHED_OPENED,D.Jw.VIEW]]})),(0,o.Z)(n,R.Z.SCH_QUESTION_KEY,(function(){return[[D.I3.SCHEDULER_CONTAINER,D.j8.SCHED_QUESTION,D.Jw.VIEW]]})),(0,o.Z)(n,R.Z.SCH_TIME_KEY,(function(){return[[D.I3.SCHEDULER_CONTAINER,D.j8.SCHED_TIME,D.Jw.VIEW]]})),(0,o.Z)(n,R.Z.SCH_CONTACT_INFO_KEY,(function(){return[[D.I3.SCHEDULER_CONTAINER,D.j8.SCHED_CONTACT_INFO,D.Jw.VIEW]]})),(0,o.Z)(n,R.Z.SCH_BOOKED,(function(){return[[D.I3.TEST_ACTIVITY,D.j8.SCHED_APPT_CONFIRMED,D.Jw.VIEW],[D.I3.SCHEDULER_CONTAINER,D.j8.SCHED_APPT_CONFIRMED,D.Jw.VIEW]]})),n);var Z=r(11801),U=r(65545),H=r(22733),B=(0,U.Z)("@cm-app.target",P.fF.isDebug&&(0,P.hV)(L.Cg.CM_ANALYTICS)),F=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.host,a=void 0===n?D.kh.HOST:n,o=r.client,i=void 0===o?D.kh.CLIENT:o,l=r.cookieName,u=void 0===l?D.kh.COOKIE_NAME:l,p=r.token,f=void 0===p?D.kh.TOKEN:p;(0,c.Z)(this,t),this.host=a,this.client=i,this.cookieName=u,this.token=f,this.baseUrl="https://".concat(a,"/rest/v1");var m=(0,P.Wz)(L.fA.MBOXES);this.overrides={},m&&m.split(",").forEach((function(t){var r=t.split(":"),n=(0,s.Z)(r,2),a=n[0],o=n[1];e.overrides[a]=o})),this.mboxTrackers={},A()(D.I3).forEach((function(t,r){e.mboxTrackers[t]={cmAppName:t,index:r+1}})),Z.c.addTracker(this)}var e,r,n,u,f;return(0,l.Z)(t,[{key:"initSession",value:function(){var t=(0,P.Jt)(this.cookieName,!0)||{};this.setSession(I()(t,{sessionId:(0,P.k$)(),tntId:(0,P.k$)()}))}},{key:"setSession",value:function(t){var e=t.tntId,r=void 0===e?this.tntId:e,n=t.sessionId,a=void 0===n?this.sessionId:n;(0,P.XJ)(this.cookieName,{sessionId:a,tntId:r}),this.sessionId=a,this.tntId=r}},{key:"buildAddress",value:function(){return this._addressBuilder||(this._addressBuilder=C()((function(t,e){return{url:(0,P.bw)(t,{cleanProtocol:!1}),referringUrl:(0,P.bw)(e,{cleanProtocol:!1})}}))),this._addressBuilder(window.location.href,document.referrer)}},{key:"buildContext",value:function(){return{channel:"web",window:{width:window.innerWidth,height:window.innerHeight},address:this.buildAddress(),userAgent:navigator.userAgent}}},{key:"buildParameters",value:function(){return{isIBMer:String(Boolean((0,H._Z)().isIbmer||(0,P.g)()))}}},{key:"buildQaMode",value:function(){var t=(0,P.Wz)("at_preview_token");if(t){var e={token:t,listedActivitiesOnly:(0,P.Wz)("at_preview_listed_activities_only")},r=(0,P.Wz)("at_preview_index");if(r){var n=r.split("_").map((function(t){return Number(t)||null})),a=(0,s.Z)(n,2),o=a[0],i=a[1];e.previewIndexes=[{activityIndex:o,experienceIndex:i}]}return e}}},{key:"prefetch",value:(f=(0,i.Z)(O().mark((function t(){var e,r,n=this;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.delivery({prefetch:{mboxes:A()(D.I3).map((function(t){return{name:t,index:n.mboxTrackers[t].index,parameters:n.buildParameters()}})),views:A()(D.I3).map((function(t){return{name:t}}))}});case 2:return e=t.sent,(r=k()(e,"id.tntId"))&&r!==this.tntId&&this.setSession({tntId:r}),x()(k()(e,"prefetch.mboxes",[]),(function(t){var e=y()(n.mboxTrackers,(function(e){return e.index===t.index}));e.responseData=t,e.name=t.name,e.state=t.state,e.clickToken=(y()(t.metrics,(function(t){return"click"===t.type}))||{}).eventToken;var r=b()(t.options)||{};e.displayToken=r.eventToken,e.variation=k()(r,"content.variation")})),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"trackImpression",value:(u=(0,i.Z)(O().mark((function t(e){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&this.mboxTrackers[e]&&this.mboxTrackers[e].variation)){t.next=2;break}return t.abrupt("return",this.notify({mbox:e,event:{mbox:e,type:D.GT.DISPLAY}}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"trackGoal",value:(n=(0,i.Z)(O().mark((function t(e){var r,n,a,i,s;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.mbox,a=e.type,i=e.metric,a===D.Jw.VIEW||a===D.Jw.CLICK){t.next=5;break}throw s="target.trackGoal: got invalid type ".concat(a),B.error(s),new Error(s);case 5:return t.abrupt("return",this.notify({mbox:n,event:{mbox:D.I3.TRACK,type:D.GT.DISPLAY,parameters:(r={},(0,o.Z)(r,D.Jw.ACTIVITY_MBOX,n),(0,o.Z)(r,a,i),r)}}));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"track",value:function(t){var e=this,r=X[t.eventName];r&&(r(t)||[]).forEach((function(t){var r=(0,s.Z)(t,3),n=r[0],a=r[1],o=r[2];e.overrides[n]?B.log("Target would have fired",{mbox:n,metric:a,type:o}):e.mboxTrackers[n].variation&&(B.log("Tracking goal",{mbox:n,type:o,metric:a}),e.trackGoal({mbox:n,type:o,metric:a}))}))}},{key:"notify",value:(r=(0,i.Z)(O().mark((function t(e){var r,n,a,o,i,c,l,u=this;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Array.isArray(e)||(e=[e]),r=_()(e,(function(t){var e,r=t.mbox,n=t.event,a=n.type,o=n.mbox,i=n.parameters,s=y()(u.mboxTrackers,(function(t){return t.name===r})),c=y()(u.mboxTrackers,(function(t){return t.name===o})),l=(0,P.k$)();switch(a){case D.GT.CLICK:e=s.clickToken;break;case D.GT.DISPLAY:e=s.displayToken}var p=e&&[e];if(i){var f={},m=new Set(Object.values(D.Jw));x()(i,(function(t,e){m.has(e)||(f[e]=t,delete i[e])})),P.fF.isDebug&&!(0,P.xb)(f)&&B.warn("Some parameters were not whitelisted and were removed:",f)}return{address:u.buildAddress(),impressionId:(0,P.k$)(),id:l,type:a,timestamp:Date.now(),tokens:p,parameters:i,mbox:{name:c.name,state:c.state}}})),t.next=4,this.delivery({notifications:r});case 4:return n=t.sent,P.fF.isDebug&&(a=_()(n.notifications,"id"),o=m()(r,(function(t){var e=t.id;return p()(a,e)})),i=(0,s.Z)(o,2),c=i[0],l=i[1],c.forEach((function(t){return B.log("Target notification success: ".concat(t.mbox.name,", ").concat(t.type),t)})),l.forEach((function(t){return B.warn("Target notification failure: ".concat(t.mbox.name,", ").concat(t.type),t)}))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"delivery",value:(e=(0,i.Z)(O().mark((function t(){var e,r,n=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},this.tntId||this.initSession(),r=(0,P.Ie)({client:this.client,sessionId:this.sessionId}),t.abrupt("return",(0,P._G)({url:"".concat(this.baseUrl,"/delivery").concat(r),data:JSON.stringify((0,a.Z)({id:{tntId:this.tntId},property:{token:this.token},context:this.buildContext(),qaMode:this.buildQaMode()},e)),method:"POST",timeout:15e3,headers:{"content-type":"application/json"},json:!0}).then((function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t})));case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),z=null,j=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return z&&!e||(z=new F(t)),z}},45461:(t,e,r)=>{"use strict";r.d(e,{$N:()=>_,Hv:()=>h,Lx:()=>d,Ut:()=>b,dV:()=>g,j$:()=>m});var n,a,o,i,s=r(93800),c=r.n(s),l=r(1768),u=r(19187),p="prune=contactInformationBundles.chatRoutingCode&prune=contactInformationBundles.chatRoutings&prune=contactInformationBundles.chatService&prune=contactInformationBundles.contactFormURL&prune=contactInformationBundles.phoneNumber&prune=contactInformationBundles.phoneNumberFormatted&prune=contactInformationBundles.priorityCode&prune=contactInformationBundles.schedulerInformation&prune=contactInformationBundles.bundleSpec&prune=contactInformationBundles.deprecated&origin=".concat(encodeURI(window.location.host)),f={NORMAL:"/contact-info/lookup?".concat(p),NORMAL_CLIENT_INFO:"/client-info/lookup?".concat(p),NORMAL_SCHED_LANDING:"/contact-info/lookup?".concat("prune=contactInformationBundles.chatRoutingCode&prune=contactInformationBundles.chatRoutings&prune=contactInformationBundles.chatService&prune=contactInformationBundles.contactFormURL&prune=contactInformationBundles.phoneNumber&prune=contactInformationBundles.phoneNumberFormatted&prune=contactInformationBundles.priorityCode&prune=contactInformationBundles.schedulerInformation&prune=contactInformationBundles.bundleSpec&prune=contactInformationBundles.deprecated&prune=contactInformationBundles.chatInformation&prune=contactInformationBundles.phoneInformation&prune=contactInformationBundles.priorityInformation&prune=contactInformationBundles.schedulingInformation"),WITH_RULES:"/contact-info/lookup-with-rules?rule=add%20preferred%20time%20zone%20to%20response&prune=schedulingInformation.emails&prune=schedulingInformation.management&prune=schedulerInformation.emails&prune=schedulerInformation.management&".concat(p),SKIP_RULES:"/contact-info/lookup-skip-rules?".concat(p),CLIENT_INFO:"/client-info/lookup-skip-rules?".concat(p),SCHED_AVAILABILITY:"/scheduler/availability"},m={hosts:{local:"http://localhost:3030",dev:"https://broadway-dev.us-east.mybluemix.net",dev1:"https://dev2.contact-module.ibm.com/broadway/dev1",dev2:"https://dev2.contact-module.ibm.com/broadway/dev2",dev3:"https://dev2.contact-module.ibm.com/broadway/dev3",staging:"https://dev2.contact-module.ibm.com/broadway/staging",staging_myibm:"https://myibm.ibm.com/messaging/staging",prod:"https://messaging.contact-module.ibm.com",prod_myibm:"https://myibm.ibm.com/messaging"},paths:{login:"/login/login.html",createMonitor:"/api/v2/liveperson/monitor/create",updateMonitor:"/api/v2/liveperson/monitor/update",session:"/api/v2/liveperson/async/session",startSession:"/api/v2/liveperson/async/session/start",cmaasSigned:"/api/v2/token/external/check",asyncAgent:"/api/v2/liveperson/async/agent/availability",asyncSkills:"/api/v2/liveperson/async/skill/status",skillLookup:"/api/v2/liveperson/async/skill/lookup",engagementStatus:"/api/v2/liveperson/async/engagement/status",asyncAgentstatus:"/api/v2/liveperson/async/agent/status"}},d=(a=m.hosts,o=m.paths,(i=(0,l.Wz)(u.PF.BROADWAY_ENDPOINT))&&((n=a[i])||l.fF.error("buildBroadwayUrls could not find urls for ".concat(i))),n=n||a.prod,c()(o,(function(t){return"".concat(n).concat(t)}))),_="".concat((0,l.hV)(u.W6.BROADWAY_STAGING)||(0,l.hV)(u.W6.BROADWAY_DEV)?m.hosts.staging_myibm:m.hosts.prod_myibm).concat(m.paths.cmaasSigned),h={bot:{main:"https://chat-bot.contact-module.ibm.com/api",staging:"https://dev.contact-module.ibm.com/cognitive-messaging/staging/api",dev1:"https://dev.contact-module.ibm.com/cognitive-messaging/dev1/api",dev2:"https://dev.contact-module.ibm.com/cognitive-messaging/dev2/api",dev3:"https://dev.contact-module.ibm.com/cognitive-messaging/dev3/api",local:"http://localhost:5555/api"},bluezone:{check:"https://ibmdev.webmaster.ibm.com/api/status"},cmApi:{v2:["https://www.ibm.com/marketplace/api/contact/v2/prod","https://api.marketplace.ibm.com/contact/api/v2/prod"],prod:["https://cm-api.contact-module.ibm.com/api/v3"],dev:["https://cm-api-dev.us-east.mybluemix.net/api/v3"],staging:["https://cm-api-staging.contact-module.ibm.com/api/v3"],local:["http://localhost:3010/api/v3"]},scheduler:["https://www.ibm.com/marketplace/api/scheduler","https://liveadvisor-scheduler.mybluemix.net/scheduler/api","https://liveadvisor-scheduler.eu-gb.mybluemix.net/scheduler/api","https://liveadvisor-scheduler.au-syd.mybluemix.net/scheduler/api"],interact:{prod:"https://mapvip.podc.sl.edst.ibm.com/ServiceLayerRESTWS",dev:"https://ddydaldinwb01.sl.bluecloud.ibm.com/ServiceLayerRESTWS",test:"https://tdydaltinwb01.sl.bluecloud.ibm.com/ServiceLayerRESTWS"},bluemixProfileJwt:"https://cloud.ibm.com/analytics/profile?signed=true"},b={LPCHAT_LINK:"https://lpcdn.lpsnmedia.net/api/chat/public/lpChat.min.js"},g={cm:{hosts:(0,l.Wz)("cm-api-endpoint")?h.cmApi[(0,l.Wz)("cm-api-endpoint")]:h.cmApi.prod,paths:{lookup:(0,l.hV)(u.Cg.CM_SKIP_RULES)?f.SKIP_RULES:f.NORMAL,lookupReqIpRouted:f.NORMAL_CLIENT_INFO,lookupChatInfo:f.NORMAL_CHAT_INFO,lookupWithRules:f.WITH_RULES,lookupSkipRules:f.SKIP_RULES,lookupSchedLanding:(0,l.hV)(u.Cg.CM_SKIP_RULES)||(0,l.hV)(u.pu.CONFIRMATION_NUMBER)?f.SKIP_RULES:f.NORMAL_SCHED_LANDING,clientInfo:f.CLIENT_INFO,schedAvailability:f.SCHED_AVAILABILITY}},scheduler:{hosts:h.scheduler,apiParams:"/v2"}}},1768:(t,e,r)=>{"use strict";r.d(e,{c$:()=>ie,_G:()=>kt,el:()=>At,Ie:()=>Ut,bw:()=>Jt,lW:()=>ve,fF:()=>Gt,gw:()=>Et,zW:()=>Kt,pB:()=>fe,LI:()=>se,p6:()=>de,vd:()=>_e,kN:()=>Wt,Jt:()=>yt,ej:()=>gt,nH:()=>Bt,Rl:()=>Ot,b5:()=>we,Wz:()=>Zt,YA:()=>ge,fL:()=>ce,cZ:()=>re,K1:()=>te,bG:()=>It,zm:()=>mt,Ce:()=>ae,aQ:()=>jt,r8:()=>pt,xb:()=>bt,Nh:()=>Dt,g:()=>ht,mG:()=>oe,HT:()=>Lt,jv:()=>ee,pI:()=>qt,v_:()=>ne,j6:()=>Nt,h_:()=>pe,hV:()=>_t,iO:()=>xe,PQ:()=>he,TN:()=>le,k3:()=>St,XJ:()=>vt,mm:()=>zt,Uj:()=>xt,KC:()=>Rt,zv:()=>ut,Zg:()=>Tt,GR:()=>wt,fr:()=>ue,al:()=>ft,k$:()=>be});var n=r(17253),a=r(58226),o=r(79655),i=r(55185),s=r(31311),c=r(30886),l=r.n(c),u=r(78345),p=r.n(u),f=r(4427),m=r.n(f),d=r(79931),_=r.n(d),h=r(7976),b=r.n(h),g=r(87036),y=r.n(g),v=r(73497),x=r.n(v),w=r(40104),k=r.n(w),E=r(93800),C=r.n(E),T=r(46270),I=r.n(T),S=r(19157),A=r.n(S),N=r(39982),O=r.n(N),P=r(54299),D=r.n(P),L=r(20643),R=r.n(L),M=r(57727),X=r.n(M),Z=r(72302),U=r.n(Z);function H(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{used:[]},o=Math.round(new Date/(1e3*n)),i=Math.floor(Math.random()*e);if(a.used||(a.used=[]),a.li!=o)a.used=[i];else{for(var s=0;-1!=a.used.indexOf(i)&&e>s;)i=Math.floor(Math.random()*e),s++;a.used.push(i)}a.li=o;var c=t+i+(""+o),l=r(95145).hash(c);return l}var B=["CA","US","AI","AG","AW","BS","BB,","BM","BQ","KY","CW","DM","GD","GY","JM","MS","KN","LC","VC","SX","SR","TT","TC","VG","AS","GU","MH","FM","MP","PW","PR","UM","VI"].concat(["BN","KH","ID","LA","MY","MM","PH","SG","TH","TL","VN"]).concat(["AQ","AU","CX","CC","CK","FJ","HM","KI","NR","NZ","NU","NF","PG","WS","SB","TK","TO","TV"]).concat(["BD","BT","IN","MV","NP","LK"]).concat(["KR"]).concat(["JP"]).concat(["MX"]).concat(["BR"]).concat(["CN"]),F=r(8563),z=r.n(F),j=r(26046),Y=r(63191),G=r(9372);function W(t,e,r){var n=function(t,e,r){if(r&&!r.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(r?[r.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}(t,r.timeZone,r.locale);return n.formatToParts?function(t,e){var r=t.formatToParts(e);return r[r.length-1].value}(n,e):function(t,e){var r=t.format(e).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(r);return n?n[0].substr(1):""}(n,e)}var V=r(42702),K=6e4;function q(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}function J(t,e){var r=e||"",n=t>0?"-":"+",a=Math.abs(t);return n+q(Math.floor(a/60),2)+r+q(a%60,2)}function Q(t,e){return t%60==0?(t>0?"-":"+")+q(Math.abs(t)/60,2):J(t,e)}const $={X:function(t,e,r,n){var a=n._originalDate||t,o=n.timeZone?(0,V.Z)(n.timeZone,a)/K:a.getTimezoneOffset();if(0===o)return"Z";switch(e){case"X":return Q(o);case"XXXX":case"XX":return J(o);default:return J(o,":")}},x:function(t,e,r,n){var a=n._originalDate||t,o=n.timeZone?(0,V.Z)(n.timeZone,a)/K:a.getTimezoneOffset();switch(e){case"x":return Q(o);case"xxxx":case"xx":return J(o);default:return J(o,":")}},O:function(t,e,r,n){var a=n._originalDate||t,o=n.timeZone?(0,V.Z)(n.timeZone,a)/K:a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+function(t,e){var r=t>0?"-":"+",n=Math.abs(t),a=Math.floor(n/60),o=n%60;if(0===o)return r+String(a);var i=e||"";return r+String(a)+i+q(o,2)}(o,":");default:return"GMT"+J(o,":")}},z:function(t,e,r,n){var a=n._originalDate||t;switch(e){case"z":case"zz":case"zzz":return W("short",a,n);default:return W("long",a,n)}}};var tt=r(63239),et=/([xXOz]+)|''|'(''|[^'])+('|$)/g;var rt=r(19187);const nt=JSON.parse('{"annual_sales":79920000000,"audience_segment":"software & technology","audience":"enterprise business","b2b":true,"b2c":true,"city":"poughkeepsie","company_name":"ibm corporation","country_name":"united states","country":"us","demandbase_sid":50918973,"employee_count":400000,"employee_range":"enterprise","forbes_2000":false,"fortune_1000":false,"industry":"software & technology","information_level":"detailed","isp":false,"latitude":41.6563,"longitude":-73.9308,"marketing_alias":"ibm","phone":"845-433-1234","primary_naics":"334111","primary_sic":"3571","region_name":"new york","registry_company_name":"advanced workstations division, ibm corporation","registry_country_code":"us","registry_country_code3":"usa","registry_country":"united states","registry_latitude":40.71110153198242,"registry_longitude":-73.9468994140625,"registry_state":"ny","revenue_range":"over $5b","signedin":false,"state":"ny","street_address":"2455 south rd","sub_industry":"computer & mobile devices","traffic":"very high","web_site":"ibm.com","zip":"12601"}');var at=r(65545),ot=["bubbles","cancelable","detail"],it=0x6ffad60473b3,st=100,ct=1,lt={},ut=Date.now();function pt(){return _t(rt.Cg.DEV_MODE)||{env:{REACT_APP_BUILD_TYPE:"normal"}}&&{REACT_APP_BUILD_TYPE:"normal"}&&!1}function ft(t){return-1!==window.location.href.indexOf(t)}function mt(t){return-1!==window.location.host.indexOf(t)}var dt=new Map;function _t(t){var e=dt.get(document.location.href);return e||(e=new URL(document.location),dt.set(document.location,e)),null!==e.searchParams.get(t)}function ht(){return null!==String(document.cookie).match(/(^| )(w3ibmProfile|w3_sauid|PD-W3-SSO-[^=]*|OSCw3Session|IBM_W3SSO_ACCESS)=/)}function bt(t){return null==t||(0===t.length||!(t.length>0)&&("object"==(0,s.Z)(t)&&Object.getOwnPropertyNames(t).length<=0))}function gt(t,e){for(var r=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return e}function yt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e?U().getJSON:U().get,n=r(t);return"undefined"===n&&(n=void 0),void 0!==n&&vt(t,n),n}function vt(t,e){return null==e&&U().remove(t),It(["country"]).then((function(r){var n=r.country&&r.country.toUpperCase(),a=parseInt(gt("notice_preferences"),10),o=a&&a>0||n&&-1!==B.indexOf(n)?364:23/24;U().set(t,e,{expires:o,secure:!0})}))}function xt(t,e){U().set(t,e,{secure:!0})}function wt(t){var e=t.time,r=void 0===e?0:e,n=t.ifResolve,a=void 0!==n&&n,o=t.payload,i=void 0===o?{}:o;return new Promise((function(t,e){setTimeout((function(){a?t(i):e(i)}),r)}))}function kt(t){return new Promise((function(e,r){z().ajax(t).done(e).fail((function(t,e,n){t.textStatus=e,t.errorThrown=n,r(t)}))}))}function Et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,n){setTimeout((function(){r(e)}),t)}))}function Ct(t,e){return X()(t,e,(function(t,e){return null!=e?e:t}))}function Tt(t){if("string"==typeof t){var e=Number(t);if(!isNaN(e))return e}return t}function It(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];function e(){var e=!0;return t.forEach((function(t){void 0!==lt[t]&&null!==lt[t]||(e=!1)})),e}function n(t){/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/.test(t.ip)||delete t.ip,Ct(lt,t)}function a(){return e()?Promise.resolve(lt):Promise.reject()}function o(){var t={},r={},a={},o={},c={};try{!(r=window._dl.ddo.user.userInfo).country&&r.registry_country_code&&(r.country=r.registry_country_code)}catch(t){}try{a=(0,i.Z)({},R()(window.digitalData,"user.userInfo"),R()(window.digitalData,"unifiedSupport"))}catch(t){}try{"object"===(0,s.Z)(window.digitalData.page.pageInfo.ibm.messaging.profile)&&D()(a,window.digitalData.page.pageInfo.ibm.messaging.profile)}catch(t){}var l={12909:"ip",12256:"country",13137:"iui"};["tealium_va_ibm_main","tealium_va"].forEach((function(t){var e=localStorage[t];if(e)try{e=JSON.parse(e),O()(l,(function(t,r){r in e.properties&&null!=e.properties[r]&&"n/a"!=e.properties[r]&&(o[t]=e.properties[r])}))}catch(t){}}));try{(c=window.analytics.user().traits()||{}).iui=c.uniqueSecurityName||window.analytics.user().id().replace(/.*-/g,"")}catch(t){}try{var u=window.zend;t={accountType:u.supportTierText,accountId:u.bluemixAccountLinked&&u.bluemixAccountGuid?u.bluemixAccountGuid:u.accountId,firstName:u.userFirstName,lastName:u.userLastName,email:u.email,company:u.companyName,userId:u.userId,ticketId:R()(u,"params.id")}}catch(t){}return n(D()(o,a,r,c,t)),e()?Promise.resolve(lt):Promise.reject()}function c(){return new Promise((function(t,e){if(!window.IBMCore)return e();function r(){t(window.IBMCore.common.util.user.getInfo())}window.IBMCore.common.util.user.subscribe("userIBMDataReady","CM_APP",r).runAsap(r)}))}function l(){return Ft([c(),Pt(),r(70004).s(),wt({time:500,ifResolve:!0,payload:null})]).catch(A()).then((function(t){return t&&(I()(t,(function(e,r){"n/a"===e&&delete t[r]})),n(t),e())?lt:Promise.reject()}))}return a().catch(o).catch(l).catch(o).catch((function(){return lt})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pt()&&(t=nt),_t(rt.Cg.CM_BLUEID)&&(t.signedin=Zt(rt.Cg.CM_BLUEID)),_t(rt.Cg.CM_COUNTRY)&&(t.country=Zt(rt.Cg.CM_COUNTRY)),_t(rt.Cg.CM_IUI)&&(t.iui=Zt(rt.Cg.CM_IUI)),_t(rt.Cg.CM_EMAIL)&&(t.email=Zt(rt.Cg.CM_EMAIL)),_t(rt.Cg.IP_ADDRESS)&&(t.ip=Zt(rt.Cg.IP_ADDRESS)),t})).then((function(t){return C()(t,(function(t){return ye(t)})),t}))}function St(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"swing";return new Promise((function(a,o){try{t instanceof z()?t.delay(r).animate({scrollTop:0},e,n,a):o(["scrollToTop error: invalid $scrollingContainer",t])}catch(t){o(["scrollToTop error: ",t])}}))}function At(t){t.series&&Gt.log("XHR is exempt from cascading api retry.");var e=t.hosts,r=void 0,n=[],a={cascade:{fail:function(t,r,a,o){if(n.push(o),n.length==e.length)return t({reason:"Failed fetching data from all endpoints",failures:n})},done:function(t,e,n){if(!r)return r=t,Gt.log("Fetched data from ".concat(e),t),n(r)},doAfterJQAjaxCall:function(t,e){setTimeout((function(){t(++e)}),1500)}},series:{fail:function(t,r,a,o){if(n.push(o),n.length==e.length)return t({reason:"Failed fetching data from all endpoints",failures:n});r(++a)},done:function(t,e,r){return Gt.log("Fetched data from ".concat(e),t),r(t)}},noFallback:{fail:function(t,e,r,n){return t({reason:"Failed fetching data",failures:[n]})},done:function(t,e,r){return r(t)}}},o=t.series?a.series:a.cascade;return t.hosts&&t.path?new Promise((function(n,a){!function s(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(r||c>=e.length)){0!=c&&e.push(e.shift());var l=e[0]+t.path,u=t.body||{};t.type=t.type||"POST",z().ajax((0,i.Z)({type:t.type,url:l,beforeSend:function(e){t.auth&&e.setRequestHeader("Authorization",H(it,st,ct))},data:"POST"==t.type||"PUT"==t.type?JSON.stringify(u):void 0,dataType:"json",contentType:"application/json; charset=utf-8",timeout:t.timeout||3e4},t.ajaxOpts||{})).done((function(t){o.done(t,l,n)})).fail((function(t,e,r){Gt.warn("Error fetching data from ".concat(l,": ").concat(r," - ").concat(t.responseText),u),o.fail(a,s,c,t)})),o.doAfterJQAjaxCall&&o.doAfterJQAjaxCall(s,c)}}();var s=6e4*t.hosts.length;setTimeout((function(){if(!r)return r={},a("ajaxWithFallback: function stopped due to timeout after "+s+" seconds")}),s)})):Promise.reject("ajaxWithFallback: cannot make ajax call without host/path",t)}function Nt(t){var e=t.match(/mailto:/gi)?"_self":"_blank";window.open(t,e)}function Ot(){return"www.ibm.com"===window.location.host||Boolean(Zt(rt.Cg.IBM_HOST))}function Pt(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return window.bluemixAnalytics?window.bluemixAnalytics.getUserProfile().catch((function(t){Gt.log("Error fetching user profile from bluemixanalytics",t)})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signedin=e.authenticated,"string"==typeof e.iamId&&(e.iui=t?e.iamId.replace(/.*-/,""):e.iamId),e.email=e.emailAddress,e.accountId=e.accountGuid,e.accountType=e.accountPlan,e})):Promise.reject()}function Dt(){var t=document.querySelector("#ibm-overlay-backdrop")&&document.querySelector("#ibm-overlay-backdrop").classList.contains("overlay-div")&&null!==document.getElementById("umx-chat-window")||z()("#cm-scheduler").is(":visible")||z()(["#_hj_poll_container div[class*=_widget_open]","div[id*=ibm-overlaywidget].active"].join()).length||document.querySelector("#ibm-overlay-backdrop")&&window.getComputedStyle(document.querySelector("#ibm-overlay-backdrop")).getPropertyValue("display")&&"none"!==window.getComputedStyle(document.querySelector("#ibm-overlay-backdrop")).getPropertyValue("display");if(!t&&window.IBMCore)try{var e=window.IBMCore.common.widget.overlay.currentShowingOverlay();!e||"ibm-overlaywidget-signupModalUrx"!==e.id&&-1===e.id.indexOf("ConfirmRegister")||(t=!0)}catch(t){}return Boolean(t)}var Lt=_t(rt.pu.SCHEDULER_LANDING)||window.schedulerConfig&&window.schedulerConfig.isLandingPage,Rt=!_t(rt.pu.CONFIRMATION_NUMBER)||!Lt,Mt={true:!0,false:!1},Xt=k()((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,e=t.split("?"),r=(0,o.Z)(e,2),n=r[1],a=void 0===n?"":n,i=a.split("#"),s=(0,o.Z)(i,1),c=(a=s[0]).split("&").map((function(t){var e=t.split("="),r=(0,o.Z)(e,2),n=r[0],a=r[1],i=void 0===a?"":a;return n=decodeURIComponent(n),(i=decodeURIComponent(i))in Mt&&(i=Mt[i]),[n,i]}));return x()(c)}));function Zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,r=Xt(e);return t in r?r[t]:null}function Ut(t){var e=[];O()(t,(function(t,r){void 0!==t&&e.push("".concat(r,"=").concat(encodeURIComponent(t)))}));var r=e.join("&");return r.length>0&&(r="?".concat(r)),r}function Ht(){var t,e;try{var r=window.digitalData.page.pageInfo;if(t=r.ibm.cc,e=r.ibm.lc,!t||!e){var n=r.language&&r.language.split("-")||["en","US"],a=(0,o.Z)(n,2);e=a[0],t=a[1]}}catch(t){}if(!t||!e){var i=(window.navigator.language||window.navigator.userLanguage).split("-"),s=(0,o.Z)(i,2);e=s[0],t=s[1]}return{region:t,language:e}}function Bt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/&amp;/g,"&")},r={},n=Zt("focusArea"),o=Zt("languageCode"),s=Zt("regionCode");if(n&&o&&s){var c={focusArea:n,languageCode:o,regionCode:s},l={variation:n,languageCode:o,regionCode:s},u={focusArea:n,languageCode:"local",regionCode:"local",variation:n};Lt?(r.schedulingInformationKey=r.contactInformationBundleKey=c,r.schedulerTextTranslationsKey=r.contactModuleTranslationKey=l,r.schedulingInformationKey.purpose=Zt(rt.pu.SCHEDULER_PURPOSE)||"(default)"):(r.contactInformationBundleKey=c,r.contactModuleTranslationKey=l,r.regionsAndLanguagesForLocale=u)}else if(t||window.digitalData&&(window.digitalData.page.pageInfo.contactModuleConfiguration||window.digitalData.page.pageInfo.ibm.contactModuleConfiguration||window.digitalData.page.pageInfo.ibm.messaging)){var p=window.digitalData.page.pageInfo,f={},m=[R()(p,"contactModuleConfiguration",{}),R()(p,"ibm.contactModuleConfiguration",{}),R()(p,"ibm.messaging",{})];m.forEach((function(t){["routing","contactInformationBundleKey","translation","contactModuleTranslationKey"].forEach((function(e){O()(t[e],(function(r,n){r||delete t[e][n]}))}))})),f.routing=D().apply(void 0,[{}].concat((0,a.Z)(y()(b()(m,(function(t){return[t.routing,t.contactInformationBundleKey]})))))),f.translation=D().apply(void 0,[{}].concat((0,a.Z)(y()(b()(m,(function(t){return[t.translation,t.contactModuleTranslationKey]})))))),f.routing.focusArea=e(Zt("focusArea")||f.routing.focusArea),f.translation.variation||(f.translation.variation=f.routing.focusArea);var d=Ht(),h=d.region,g=d.language;["routing","translation"].forEach((function(t){f[t]||(f[t]={}),f[t].languageCode=f[t].languageCode||g,f[t].regionCode=(f[t].regionCode||h||"").toUpperCase()}));var v,x=f.routing.focusArea;x&&(v={focusArea:x,regionCode:"local",languageCode:"local"}),delete f.translation.focusArea,r={clientInfo:{timeZoneOffsetJS:(new Date).getTimezoneOffset()},contactInformationBundleKey:f.routing.focusArea&&f.routing||void 0,contactModuleTranslationKey:f.translation,regionsAndLanguagesForLocale:v}}return(_t(rt.pu.CONFIRMATION_NUMBER)||_t(rt.pu.SCHEDULER_FORM))&&(r.schedulerTextTranslationsKey=r.internationalDialingForLocale=_()(r.contactModuleTranslationKey),r.schedulingClassificationsKey=_()(r.contactInformationBundleKey)),bt(r)?null:(0,i.Z)({},r)}catch(t){return console.log("@cm-app: error parsing digitalData:"+t.message),null}}function Ft(t){return Promise.all(t.map((function(t){return t.then((function(t){return Promise.reject(t)}),(function(t){return Promise.resolve(t)}))}))).then((function(t){return Promise.reject(t)}),(function(t){return Promise.resolve(t)}))}function zt(t){var e=document.querySelector("html");t?e.classList.remove("cm-no-scroll"):e.classList.add("cm-no-scroll")}function jt(t){return new Promise((function(e,r){var n=document.createElement("script");n.src=t,n.addEventListener("load",(function(){Gt.log(t+" loaded successfully."),e()}),!1),n.addEventListener("error",(function(){Gt.warn(t+" loaded failed."),r(n)}),!1),document.body.appendChild(n)}))}Object.freeze({});var Yt=window.location.search.includes(rt.Cg.CM_DEBUG),Gt=(0,i.Z)({isDebug:Yt},(0,at.Z)(null,Yt));function Wt(t){var e=t.languageCode,r=t.regionCode,n=t.variation,a=t.focusArea,o=t.purpose,i=void 0===o?"(default)":o,s=t.resource;return["sched",e,r,n||a,i,void 0===s?"any":s].join("--")}var Vt=["footer",".bx--footer","[class*=FormPage__footer___]","[class*=ConnectionFooter__ConnectionFooter___]"].join(", ");function Kt(t){var e=t.dom,r=t.events,n=t.extraBottomOffset,a=t.ifCMComponent,o=t.originalBottomOverride,i=document.querySelector(Vt),s=window.getComputedStyle(e).getPropertyValue("bottom"),c="number"==typeof o?o:parseInt(s,10),l=function(){var t=Math.min(170,i.outerHeight()),r="fixed"===window.getComputedStyle(i).getPropertyValue("position"),o=document.documentElement.scrollHeight-(window.pageYOffset||document.documentElement.scrollTop||0)-(document.documentElement.clientHeight||window.innerHeight);r?a?e.style.bottom=t+n+"px":e.style.cssText="bottom: ".concat(t+n,"px !important"):o<t-c?a?e.style.bottom=t-o+n+"px":e.style.cssText="bottom: ".concat(t-o+n,"px !important"):a?e.style.bottom="":e.style.cssText=""};return l(),document.querySelectorAll(Vt).length>0&&window.addEventListener(r,l),l}function qt(t){var e,r=function(){clearTimeout(e),e=setTimeout((function(){var e=document.documentElement.clientWidth||document.body.clientWidth;t(e<=768)}),300)};return r(),window.addEventListener("resize",r),r}function Jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.cleanProtocol,n=void 0===r||r,a=e.cleanQueryString,o=void 0===a||a,i=t;return n&&(i=i.replace(/(.*\/\/)/g,"")),o&&(i=i.replace(/(\?.*)/g,"")),i}var Qt=navigator.userAgent,$t=null;function te(){if(null!==$t)return $t;if($t={},/Windows/i.test(Qt)){$t.os="WINDOWS";var t=/Windows (.+?)(?:;|\))/i.exec(Qt),e=(0,o.Z)(t,2);$t.osVersion=e[1]}else if(/Macintosh|Mac|OSX/i.test(Qt)){$t.os="MAC_OSX";var r=/(?:Macintosh; Intel Mac OS X |Macintosh; |Macintosh |Mac OS X |Mac |OS X |OSX )(.+?)(?:;|\)| )/i.exec(Qt),n=(0,o.Z)(r,2);$t.osVersion=n[1]}else if(/IOS/i.test(Qt)){$t.os="IOS";try{var a=(Qt.match(/CPU (\w+)? OS [^ ]+/)||[""])[0].split(" ").pop();a&&($t.osVersion=a)}catch(t){}}else if(/ANDROID/i.test(Qt)){$t.os="ANDROID";try{var i=(Qt.match(/Android (\d+(?:\.\d+){1,2})/)||[""]).pop();i&&($t.osVersion=i)}catch(t){}}else/Linux/i.test(Qt)&&($t.os="LINUX");return/iPad|(?!.*Mobile).*Android.*/.test(Qt)?$t.deviceFamily="TABLET":/iPhone|Android.*Mobile/.test(Qt)?$t.deviceFamily="MOBILE":$t.deviceFamily="DESKTOP",$t}function ee(t){return/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi.test(t)}function re(t){return t.match(/(^|\s *)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi)}function ne(){window.open(j.backupEmailForm,"_blank")}function ae(){return(mt("localhost")||mt("umx-portal"))&&ft("/response-manager")}function oe(){return-1!==window.navigator.userAgent.indexOf("MSIE ")||-1!==window.navigator.userAgent.indexOf("Trident/")}var ie="function"==typeof window.CustomEvent?window.CustomEvent:function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r};function se(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.bubbles,a=void 0===r||r,o=e.cancelable,s=void 0!==o&&o,c=e.detail,l=void 0===c?{}:c,u=(0,n.Z)(e,ot);try{l=(0,i.Z)({},l,u);var p=new ie(t,{bubbles:a,cancelable:s,detail:l}),f=!document.dispatchEvent(p);return window.CM_APP.props.events.push(p),f}catch(e){Gt.error("Error firing custom event ".concat(t),l,e)}}function ce(t,e){var r=getComputedStyle(e);if("string"==typeof t)return r.getPropertyValue(t);if(Array.isArray(t))return t.map((function(t){return r.getPropertyValue(t)}));throw new Error("Expected 'properties' to be a String or an Array, got ".concat((0,s.Z)(t)))}function le(t){return t.replace(/(\s[\b'])/g," ‘").replace(/(['\b]\s)/g,"’ ").replace(/(\S)(')(\S)/gm,"$1’$3").replace(/(\s")/g," “").replace(/^"/gm,"“").replace(/(")(\s)(\S)/gm,"”$2$3").replace(/(")(\S)(\s)/gm,"”$2$3").replace(/"$/gm,"”")}function ue(t){var e=t?t.replace(/^(http(s)?:)?(\/\/)|(www(-01)?\.)/g,"").replace(/\?.*/g,"").replace(/\#.*/g,""):null,r=e&&(e.split("/")[0].includes("ibm.com")||e.split("/")[0].includes("bluemix.net")||e.split("/")[0].includes("cloud.ibm.com"));return[e,r]}function pe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t;return O()(e,(function(t,e){var n="[".concat(e,"]");r=r.split(n).join(String(t))})),r}function fe(t){for(var e=t;e;){if(e.scrollHeight!==e.clientHeight)return e;e=e.parentElement}return null}var me={};function de(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{year:!0,date:!0,time:!0},n=r.year,a=r.month,o=r.day,i=r.date,s=r.time,c=r.hour,l=r.minute,u=r.timezone;bt(e)&&(e={languageCode:"en",regionCode:"US"});var p=2===e.regionCode.length?"".concat(e.languageCode,"-").concat(e.regionCode):e.languageCode,f=t?new Date(t):new Date,d=[p,n,a,o,i,s,c,l,u].map(String);return window.Intl&&window.Intl.DateTimeFormat?(R()(me,d)||m()(me,d,new Intl.DateTimeFormat([p,"en-US"],{year:n?"string"==typeof n?n:"numeric":void 0,month:i||a?a||"long":void 0,day:i||o?o||"numeric":void 0,hour:s||c?c||"numeric":void 0,minute:s||l?l||"numeric":void 0,timeZone:u})),R()(me,d).format(f)):f.toLocaleString([p,"en-US"],{year:n&&"numeric",month:i&&"long",day:i&&"numeric",hour:s&&"numeric",minute:s&&"numeric"})}function _e(t,e){return function(t,e,r){var n=String(e),a=r||{},o=n.match(et);if(o){var i=(0,tt.Z)(t,a);n=o.reduce((function(t,e){return"'"===e[0]?t:t.replace(e,"'"+$[e[0]](i,e,null,a)+"'")}),n)}return(0,G.Z)(t,n,a)}((0,Y.Z)(t,e),"yyyy-MM-dd'T'HH:mm:ss.SSSXXXXX",{timeZone:e})}function he(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.deleteOriginal,a=void 0===n||n;return O()(e,(function(e,r){t[e]=t[r],a&&delete t[r]})),t}function be(){try{return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}catch(t){}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}function ge(){var t=R()(window,"digitalData.page.attributes")||{};try{t=D()(t,window.dl.fn.getCampInfo()||{})}catch(t){Gt.log("Scheduler marketing data not found",t)}return{vcpi:t.cm_mmc||null,vendor:t.cm_mmc_vendor||null,category:t.cm_mmc_category||null,placement:t.cm_mmc_placement||null,item:t.cm_mmc_item||null,tacticCodeOverride:t.cm_mmca1||null,callingOfferCode:t.cm_mmca2||null,mailingCode:t.cm_mmca3||null,sizmekPlacementId:t.cm_mmca4||null,sizmekAdId:t.cm_mmca5||null,sizmekUserId:t.cm_mmca6||null,sizmekCreativeId:t.cm_mmca10||null,physicalLocationClick:t.cm_mmca7||null,targetId:t.cm_mmca8||null,keywordId:t.cm_mmca9||null,matchtype:t.cm_mmca11||null,utmMedium:t.utm_medium||null,utmSource:t.utm_source||null,utmCampaign:t.utm_campaign||null,utmContent:t.utm_content||null,utmTerm:t.utm_term||null,utmId:t.utm_id||null,p1MarketingType:t.p1||null,p2AdPlacementId:t.p2||null,p3AdCreativeId:t.p3||null,p4KeywordId:t.p4||null,p5KeywordMatchType:t.p5||null}}function ye(t){try{return decodeURIComponent(escape(t))}catch(t){}return t}function ve(t){var e=(null!=t?t:"").split("-"),r=p()(e[0]),n=l()(e[1]);return"".concat(n,"—").concat(r)}function xe(t){var e=new URL(location.href);e.searchParams.delete(t),history.replaceState(null,null,e)}function we(){return Math.max.apply(Math,(0,a.Z)(Array.from(document.querySelectorAll("body *"),(function(t){return parseFloat(window.getComputedStyle(t).zIndex)})).filter((function(t){return!Number.isNaN(t)}))).concat([0]))}},24256:(t,e,r)=>{"use strict";r.d(e,{Td:()=>c,bR:()=>i,hN:()=>s});var n=r(40104),a=r.n(n),o=r(30002),i="Watson Assistant API",s=a()((function(){arguments.length>0&&void 0!==arguments[0]||window.location.href;return!1})),c=function(){return(0,o.oP)({product:i})}},2053:(t,e,r)=>{"use strict";r.d(e,{fz:()=>Q,tl:()=>tt,cj:()=>rt,rj:()=>nt,Hb:()=>et});var n=r(55185),a=r(79655),o=r(54390),i=r(4913),s=r(64296),c=r(54381),l=r.n(c),u=r(29045),p=r.n(u),f=r(46270),m=r.n(f),d=r(98934),_=r.n(d),h=r(90214),b=r.n(h),g=r(20643),y=r.n(g),v=r(14078),x=r.n(v),w=r(54299),k=r.n(w),E=r(51351),C=r.n(E),T=r(96138),I=r.n(T),S=r(66748),A=r.n(S),N=r(84264),O=r.n(N),P=r(8563),D=r.n(P),L=r(1768),R=r(19187),M=r(43025),X=r(45077),Z=r(56629),U=r(57003);const H=JSON.parse('[{"service":"msdkgw","account":"42327359","baseURI":"va.v.liveperson.net"},{"service":"msdkgw","account":"16520780","baseURI":"va.v.liveperson.net"},{"service":"msdkgw","account":"54546166","baseURI":"va.v.liveperson.net"},{"service":"msdkgw","account":"35621679","baseURI":"va.v.liveperson.net"},{"service":"msdkgw","account":"13880476","baseURI":"va-a.v.liveperson.net"},{"service":"msdkgw","account":"8633827","baseURI":"va.v.liveperson.net"},{"service":"msdkgw","account":"77042665","baseURI":"va.v.liveperson.net"}]');var B=r(3479),F=r(1862),z=r(77681),j=r(1821),Y=r(51733),G=r(87750),W=r(68705),V=r(65545),K=r(22733),q=r(76625).i,J={},Q={PROD:{IBM:{ID:"42327359",APP_ID:"45161ace-f91d-4900-80ed-14340250add9"},IBM2:{ID:"8633827",APP_ID:"ea0d1630-0958-4277-a071-cc339fd29d9c"},SOFTLAYER:{ID:"16520780",APP_ID:"8b7b2cb4-4344-4b3a-a620-1bf2458fcb54"}},SANDBOX:{IBM:{ID:"77042665",APP_ID:"8bd0f625-e4d8-4fbf-8116-a53af875495a"},SOFTLAYER:{ID:"35621679",APP_ID:"b427474f-c15b-4092-9c20-d186cd28ace1"}},ALPHA:{IBM:{ID:"13880476",APP_ID:"d3ff3669-f7b9-48db-945a-98679f75c2fa"}}},$=A()(Q).reduce((function(t,e){return t.concat(A()(e))}),[]),tt={NOTIFICATIONS:{CONVERSATION_CHANGE:"cqm.ExConversationChangeNotification",MESSAGING_EVENT:"ms.MessagingEventNotification",MESSAGING_EVENTS:{CONTENT:"ContentEvent",CHAT_STATE:"ChatStateEvent",ACCEPT_STATUS:"AcceptStatusEvent"}},REQUESTS:{PREV_CONVOS:"cqm.SubscribeExConversations",PUBLISH_EVENT:"ms.PublishEvent",REQUEST_CONVO:"cm.ConsumerRequestConversation",SUBSCRIBE_MESSAGING_EVENTS:"ms.SubscribeMessagingEvents",INIT_CONNECTION:"InitConnection",UPDATE_CONVERSATION_FIELD:"cm.UpdateConversationField",MESSAGING_EVENT_NOTIFICATION:"ms.MessagingEventNotification",GET_CLOCK:"GetClock"},TYPES:{CONTENT:"ContentEvent",AUTH:".ams.headers.ConsumerAuthentication",CLIENT_PROPERTIES:".ams.headers.ClientProperties",MESSAGING:"MessagingEvent"},SERVICE_NAME:"asyncMessagingEnt",ERRORS:{SOCKET_OPEN_ONGOING_CONV:"already has open conversation. Can't open another one."}},et=function(){function t(){(0,i.Z)(this,t)}var e,r;return(0,s.Z)(t,null,[{key:"getDomain",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=I()(t,"le")?"hc1n.dev.lprnd.net":"adminlogin.liveperson.net";return J[e]?Promise.resolve(J[e]):new Promise((function(o,i){return D().ajax({url:"https://".concat(a,"/csdr/account/").concat(t,"/service/").concat(e,"/baseURI.lpCsds?version=1.0"),jsonp:"cb",jsonpCallback:"domainCallback",cache:!0,dataType:"jsonp",success:function(t){J[e]=t.ResultSet.lpData[0].lpServer,o(t.ResultSet.lpData[0].lpServer)},error:function(s,c){n<2?o(r.getDomain(t,e,n+1)):(i(c),L.fF.log("getDomain e",t+" "+e+" "+a,s))}})}))}},{key:"getAppId",value:function(t){try{return $.filter((function(e){return e.ID===t}))[0].APP_ID}catch(t){return null}}},{key:"getURI",value:function(t,e){return H.filter((function(r){return r.account===t&&r.service===e}))[0].baseURI}},{key:"getPath",value:function(t){return this.getDomain(t,tt.SERVICE_NAME).then((function(e){return"wss://".concat(e,"/ws_api/account/").concat(t,"/messaging/consumer?v=3")}))}},{key:"agentProfile",value:function(t,e){var r=function r(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(o,i){a>2&&i("Error getting agent profile."),D().getJSON("https://".concat(n,"/api/account/").concat(t,"/configuration/le-users/users/").concat(e,"?cb=?")).done((function(t){return t.error?i(t.error):o(t)})).fail((function(){o(r(n,a+1))}))}))};return this.getDomain(t,"acCdnDomain").then((function(t){return r(t)}))}},{key:"createMonitorLivePerson",value:(r=(0,o.Z)(O().mark((function t(e){var r,o,i,s,c,l,u,p,f,m,d,_,h,b,g,y,v,x,w,k,E,T,I,S=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=S.length>1&&void 0!==S[1]?S[1]:0)>3)){t.next=3;break}return t.abrupt("return",Promise.reject("Error creating monitor, ran out of attempts."));case 3:if(o=e.consumerId,i=e.account,s=e.skill,c=e.uuid,l=this.getAppId(i)){t.next=7;break}return t.abrupt("return",Promise.reject("Couldn't find app id for "+i));case 7:return t.next=9,this.getLpAttributes();case 9:u=t.sent,p=(0,a.Z)(u,2),f=p[0],m=void 0===f?{}:f,d=p[1],_=void 0===d?{}:d,h=(0,L.K1)(),(b=(0,L.Wz)(R.Cg.IP_ADDRESS))&&(h.ipAddress=b),g={customerInfo:m.info,personalInfo:_.personal,consumerId:o,clientProperties:(0,n.Z)({},h,{appVersion:window.CM_APP.version}),service:i,entryPoints:this.getEntryPoints(s)},y={};try{(v=sessionStorage.getItem("cm-lp-monitor"))&&(y=JSON.parse(v))}catch(t){y={}}return x=(0,L.Ie)({v:"1.0",vid:y.visitorId,sid:y.sessionId,obh:!!b,ibmUuid:c,ibmUpid:(0,j.qy)()}),w=this.getURI(i,"msdkgw"),k="https://".concat(w,"/api/account/").concat(i,"/app/").concat(l,"/engagement").concat(x),T=Date.now(),t.prev=25,t.next=28,(0,L._G)({url:k,method:"POST",data:JSON.stringify(g),contentType:"application/json",timeout:8e3});case 28:E=t.sent,W.c("LP engagement call success",{attempt:r,duration:Date.now()-T,uuid:c,url:k}),t.next=36;break;case 32:return t.prev=32,t.t0=t.catch(25),W.c("LP engagement call failure",(0,n.Z)({attempt:r,duration:Date.now()-T,uuid:c,url:k},C()(t.t0,["status","responseText","statusText","textStatus","errorThrown"]))),t.abrupt("return",this.createMonitorLivePerson(e,r+1));case 36:if("string"==typeof E&&(E=JSON.parse(E)),20!==E.internalCode){t.next=41;break}return t.next=40,(0,L.gw)(1e3*Math.pow(2,r+1));case 40:return t.abrupt("return",this.createMonitor(e,r+1));case 41:if(!E.engagementDetails){t.next=46;break}return I={service:i,engagementDetails:E.engagementDetails},t.next=45,(0,G.FF)(I);case 45:E.skillStatus=t.sent;case 46:if(E.sessionId&&(0,K.Q1)(K.b7.REQUIRED))try{sessionStorage.setItem("cm-lp-monitor",JSON.stringify(E))}catch(t){}return t.abrupt("return",E);case 48:case"end":return t.stop()}}),t,this,[[25,32]])}))),function(t){return r.apply(this,arguments)})},{key:"getEntryPoints",value:function(t){var e=[(0,L.bw)(window.location.href,{cleanProtocol:!1})];t&&e.push("sec://".concat(t));var r=(0,L.Wz)(R.PF.SECTIONS);return r&&e.push("sec://".concat(r)),e.map(encodeURI)}},{key:"getLpAttributes",value:(e=(0,o.Z)(O().mark((function t(){var e,r,a,o,i,s,c,l,u,p,f,m,d,h,g,v,w,E,C,T,I,S,A,N,P,D,R,Z,H,z=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=z.length>0&&void 0!==z[0]?z[0]:{},r=e.personalInfo,a=void 0===r?{}:r,o=e.customerInfo,i=void 0===o?{}:o,t.next=3,(0,L.bG)(["iui","iamId","firstName","lastName","company","email","emailAdress","userId","accountId","accountName","accountGuid","accountType","accountPlan","ticketId","supportEntitlement"]);case 3:return s=t.sent,c=s.iui,l=s.iamId,u=s.firstName,p=s.lastName,f=s.company,m=s.email,d=s.emailAddress,h=s.userId,g=s.accountId,v=s.accountName,w=s.accountGuid,E=s.accountType,C=s.accountPlan,T=s.ticketId,I=s.supportEntitlement,S=(0,j.cL)(),A=S.cm_mmca1,N=(0,M.bh)().getState(),P=U.gW[(0,Y.pY)(N)],t.next=25,(0,G.ne)();case 25:return D=t.sent,R=(0,Y.Qc)(N),Z=k()({imei:JSON.stringify(x()((0,n.Z)({version:q,uPageViewID:(0,j.Ah)(),pageURL:encodeURI(window.location.href),referrerURL:encodeURI(window.document.referrer),userAgent:navigator.userAgent,chatStartType:P,vcpi:S,iui:c,iamId:l,botChatSkill:(0,F.yX)(N),botConversationId:(0,F.qX)(N),accountType:E||C,accountId:g||w,accountName:v,userId:h,company:f,ticketId:T,supportEntitlement:I,timeZoneOffsetJS:(0,X._j)(N),cmTranslationKey:(0,B.Ot)(N),analyticsName:y()(window,"digitalData.page.pageInfo.analytics.name"),lead:[(0,X.Bb)(N)],isBotTransfer:b()((0,Y.ZH)(N))>0,productTitle:(0,j.Xx)(),isInAppMessaging:D,businessLocationChange:R&&R.join(" >> "),companyInfo:y()(window.digitalData,"user.company.tp")},i.imei),(function(t){return Boolean(t)}))),accountName:A,socialId:(0,j.qy)(),storeNumber:encodeURI(window.location.href),storeZipCode:navigator.userAgent},_()(i,"imei")),H=k()({firstname:u,lastname:p,language:navigator.language||navigator.userLanguage,contacts:m||d?[{email:m||d}]:[]},a),t.abrupt("return",[{type:"ctmrinfo",info:Z},{type:"personal",personal:H},{type:"lead",lead:(0,X.Bb)(N)}]);case 30:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}(),rt=function(){function t(e,r){(0,i.Z)(this,t),this.reqs={},this.notificationCallbacks={},this.subscribed=new Map,this.url=e,this.logger=(0,V.Z)("LPWs",r),this.retryAttempts=0}return(0,s.Z)(t,[{key:"_connect",value:function(){var t=this;return new Promise((function(e,r){if(t.ws)try{t.ws.close(),t.logger.log("Closed existing websocket")}catch(e){t.logger.log("Could not close LPWs",e)}t.logger.log("LiveEngageAsyncAdapter: connecting websocket...");var n=new WebSocket(t.url);t.ws=n,t.logger.log("LPWs WebSocket created",n),n.onopen=function(){return t.logger.log("LiveEngageAsyncAdapter: websocket connected."),e(t)},n.onmessage=function(e){return t.onmessage(e)},n.onclose=function(e){return t.logger.log("LPWs WebSocket close",e),t.ws=null,t.onInitFailure&&t.onInitFailure(e),t.reconnect(),r(e)},n.onerror=function(e){t.logger.log("LPWs WebSocket error: ",e),t.ws&&t.ws.close()}}))}},{key:"isOpen",value:function(){return this.ws&&this.ws.readyState===this.ws.OPEN}},{key:"close",value:function(){this.logger.warn("LPWs closing websocket"),clearInterval(this.keepAliveInterval),this.ws&&this.ws.close(1e3)}},{key:"toggleKeepAlive",value:function(t){this.isKeepAliveDisabled=!t,this.logger.log("LPWs keep alive: ".concat(t))}},{key:"reconnect",value:function(){var t=this;if(this.reconnecting)return this.reconnecting;var e=0;return this.reconnecting=new Promise((function r(n,a){return t.isKeepAliveDisabled?(t.logger.log("LPWs reconnect cancelled. Keep alive is disabled"),n()):t._connect().catch((function(a){t.logger.warn("LPUtils error reconnecting",a),setTimeout((function(){e++,n(new Promise(r))}),100*Math.pow(2,e))})).then((function(){return t.init()})).then((function(){return t.getOpenConversations(t.lastMessageTime)})).then((function(){t.subscribed.forEach((function(e){return t.subscribeToConversation(e)})),delete t.reconnecting,n()}))})),this.reconnecting}},{key:"keepAlive",value:function(){var t=this,e=this;e.timer=0,this.keepAliveInterval=setInterval((function(){!t.isKeepAliveDisabled&&(e.timer>=30||null==e.ws)&&(0,X.aA)((0,M.bh)().getState())&&(0,Y.Dc)((0,M.bh)().getState())&&(e.timer=0,e.getClock()),e.timer+=1}),1e3)}},{key:"withSubscriptionID",value:function(t){return function(e){return e.body.subscriptionId===t}}},{key:"request",value:function(t,e,r,n){var a=this;return new Promise((function(o,i){var s={kind:"req",type:t,body:e||{},id:Math.floor(1e9*Math.random()),headers:r,metadata:n};a.reqs[s.id]=function(t,e,r){return o({type:t,code:e,body:r})};var c=JSON.stringify(s);a.logger.log("LPWs sending: ".concat(c,"\n\n"));var l=function(){a.ws&&a.ws.send(c),a.retryAttempts=0};try{a.isOpen()?l():a.reconnect().then(l)}catch(n){return a.logger.warn("LPUtils error sending message; retrying...",n),a.reconnect().then((function(){a.request(t,e,r)}))}}))}},{key:"onNotification",value:function(t,e){this.subs.push({filter:t,cb:e})}},{key:"toFuncName",value:function(t){var e=t.substr(1+t.lastIndexOf("."));return e.charAt(0).toLowerCase()+e.slice(1)}},{key:"registerRequests",value:function(){var t=this;m()(tt.REQUESTS,(function(e){return t[t.toFuncName(e)]=function(r,n){return t.request(e,r,n)}}))}},{key:"onmessage",value:function(t){var e=JSON.parse(t.data);if(this.logger.log("onmessage(msg) obj",e),this.lastMessageTime=Date.now(),"resp"==e.kind){var r=e.reqId;delete e.reqId,delete e.kind;try{this.reqs[r].call(this,e.type,e.code,e.body)}catch(t){}delete this.reqs[r]}else if("notification"==e.kind){if(this.notificationCallbacks[e.type])try{this.notificationCallbacks[e.type](e),delete this.notificationCallbacks[e.type]}catch(t){}this.handleNotification(e)}}},{key:"waitForNotification",value:function(t){var e=this;return new Promise((function(r){e.notificationCallbacks[t]=r}))}},{key:"publishTo",value:function(t,e,r){var n,a=this;return(n=this.logger).log.apply(n,["publishTo "].concat(Array.prototype.slice.call(arguments))),this.publishEvent({dialogId:t||e,conversationId:e,event:{type:"ContentEvent",contentType:"text/plain",message:r}}).then((function(t){return a.logger.log("user message published."),t}))}},{key:"init",value:function(t){var e=this;return t&&(this.jwt=t),new Promise((function(t,r){return e.onInitFailure=r,e.initConnection({},[{type:tt.TYPES.AUTH,jwt:e.jwt},{type:".ams.headers.ClientProperties",features:["AUTO_MESSAGES","RICH_CONTENT","QUICK_REPLIES","MULTI_DIALOG"]}]).then((function(r){delete e.onInitFailure,!e.reconnecting&&e.keepAlive(),t(r)}))}))}},{key:"sendMessage",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,n=arguments.length>2?arguments[2]:void 0;return n?this.publishTo(r,n,t):this.consumerRequestConversation().then((function(r){return e.publishTo(r.body.conversationId,r.body.conversationId,t)}))}},{key:"subscribeToConversation",value:function(t){var e=t.convId,r=t.sequenceNumber,n=void 0===r?0:r,a=t.dialogId,o=void 0===a?e:a;return this.subscribed.set(e+o,{convId:e,dialogId:o}),this.subscribeMessagingEvents({fromSeq:n,dialogId:o,conversationId:e})}},{key:"getOpenConversations",value:function(t){var e=this;return this.subscribeExConversations({convState:["OPEN","CLOSE"],minLastUpdatedTime:t}).then((function(t){return e.logger.log("getOpenConversations resp",t),e.waitForNotification(tt.NOTIFICATIONS.CONVERSATION_CHANGE)}))}},{key:"requestConversation",value:function(t,e){var r;return t&&(r={conversationContext:{type:"SharkContext",visitorId:t.visitorId,sessionId:t.sessionId,interactionContextId:t.contextId,lang:e},campaignInfo:{campaignId:t.campaignId,engagementId:t.engagementId}}),this.consumerRequestConversation(r)}},{key:"registerNotificationHandlers",value:function(t){this.handleNotification=t.handlerRouting}},{key:"readOrAcceptMessageReciepts",value:function(t,e){var r=t.dialogId,n=t.conversationId,a=void 0===n?r:n,o=t.sequences,i=t.receiptType;this.request(tt.REQUESTS.PUBLISH_EVENT,{dialogId:r,conversationId:a,event:{type:"AcceptStatusEvent",status:i,sequenceList:o}},void 0,e)}},{key:"setTyping",value:function(t){var e=t.dialogId,r=t.isTyping;this.request(tt.REQUESTS.PUBLISH_EVENT,{dialogId:e,event:{type:"ChatStateEvent",chatState:r?"COMPOSING":"ACTIVE"}})}},{key:"closeDialog",value:function(t){return this.request("cm.UpdateConversationField",{conversationId:t,conversationField:[{field:"DialogChange",type:"UPDATE",dialog:{dialogId:t,state:"CLOSE",closedCause:"Closed by consumer"}}]})}},{key:"closeConversation",value:function(t){return this.request("cm.UpdateConversationField",{conversationId:t,conversationField:[{field:"ConversationStateField",conversationState:"CLOSE"}]},"req")}}],[{key:"connect",value:function(e,r){return new t(e,r)._connect()}}]),t}();function nt(t){return at.apply(this,arguments)}function at(){return(at=(0,o.Z)(O().mark((function t(e){var r,n,a,o,i;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.account,n=e.skill,r){t.next=3;break}return t.abrupt("return");case 3:if(!(0,L.xb)((0,B.Xj)((0,M.bh)().getState()))){t.next=6;break}return t.next=6,(0,M.bh)().dispatch((0,Z.d)((0,L.nH)(!0)));case 6:a=p()(Q,(function(t){return y()(t,"IBM.ID")===r.toString()||y()(t,"SOFTLAYER.ID")===r.toString()})),o=l()(a[0],(function(t){return t.ID===r.toString()})),i=[{service:"IBM"===o?"lemessaging":"softlayermessaging",skill:n,account:r,queueType:U._E.ASYNC}],(0,M.bh)().dispatch((0,z.Q7)({externalConfigs:i}));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},23469:(t,e,r)=>{"use strict";r.d(e,{Z:()=>b});var n=r(4913),a=r(64296),o=r(81928),i=r(88503),s=r(93311),c=r(8563),l=r.n(c),u=r(1768),p=r(553),f=r(45455);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.Z)(t);if(e){var a=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var d,_,h=Promise.resolve(),b=function(t){(0,o.Z)(r,t);var e=m(r);function r(t){var a;(0,n.Z)(this,r),(a=e.call(this,t)).purpose="PWChat";var o=0;return d=setInterval((function(){l()("a[class*=ibm-chat-link]").not("[class*=pw-chat-link-processed]").each((function(){l()(this).addClass("pw-chat-link-processed"),this.onclick=null,l()(this).click((function(t){t.preventDefault(),y()}))})),o>=45&&clearInterval(d),o++}),2e3),a.setState(f.GC.UNAVAILABLE),a}return(0,a.Z)(r,[{key:"startChat",value:function(){y()}}]),r}(p.Z),g=!1,y=function(){void 0===window.everestChat?h.then((function(){g||(g=!0,(0,u.aQ)("//www-356.ibm.com/partnerworld/wps/servlet/chat/jivelive_pw.jsp").then((function(){_=setInterval(v,1e3)})))})):v()},v=function(){void 0!==window.everestChat&&(clearInterval(_),clearInterval(d),window.everestChat())}},95145:(t,e)=>{"use strict";var r,n={hash:function(t){t=t.utf8Encode();for(var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a=(t+=String.fromCharCode(128)).length/4+2,o=Math.ceil(a/16),i=new Array(o),s=0;s<o;s++){i[s]=new Array(16);for(var c=0;c<16;c++)i[s][c]=t.charCodeAt(64*s+4*c)<<24|t.charCodeAt(64*s+4*c+1)<<16|t.charCodeAt(64*s+4*c+2)<<8|t.charCodeAt(64*s+4*c+3)}i[o-1][14]=8*(t.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(t.length-1)&4294967295;var l,u,p,f,m,d,_,h,b=new Array(64);for(s=0;s<o;s++){for(var g=0;g<16;g++)b[g]=i[s][g];for(g=16;g<64;g++)b[g]=n.sigma1(b[g-2])+b[g-7]+n.sigma0(b[g-15])+b[g-16]&4294967295;l=r[0],u=r[1],p=r[2],f=r[3],m=r[4],d=r[5],_=r[6],h=r[7];for(g=0;g<64;g++){var y=h+n.Sigma1(m)+n.Ch(m,d,_)+e[g]+b[g],v=n.Sigma0(l)+n.Maj(l,u,p);h=_,_=d,d=m,m=f+y&4294967295,f=p,p=u,u=l,l=y+v&4294967295}r[0]=r[0]+l&4294967295,r[1]=r[1]+u&4294967295,r[2]=r[2]+p&4294967295,r[3]=r[3]+f&4294967295,r[4]=r[4]+m&4294967295,r[5]=r[5]+d&4294967295,r[6]=r[6]+_&4294967295,r[7]=r[7]+h&4294967295}return n.toHexStr(r[0])+n.toHexStr(r[1])+n.toHexStr(r[2])+n.toHexStr(r[3])+n.toHexStr(r[4])+n.toHexStr(r[5])+n.toHexStr(r[6])+n.toHexStr(r[7])},ROTR:function(t,e){return e>>>t|e<<32-t},Sigma0:function(t){return n.ROTR(2,t)^n.ROTR(13,t)^n.ROTR(22,t)},Sigma1:function(t){return n.ROTR(6,t)^n.ROTR(11,t)^n.ROTR(25,t)},sigma0:function(t){return n.ROTR(7,t)^n.ROTR(18,t)^t>>>3},sigma1:function(t){return n.ROTR(17,t)^n.ROTR(19,t)^t>>>10},Ch:function(t,e,r){return t&e^~t&r},Maj:function(t,e,r){return t&e^t&r^e&r},toHexStr:function(t){for(var e="",r=7;r>=0;r--)e+=(t>>>4*r&15).toString(16);return e}};void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(t){return this}}),t.exports&&(t.exports=n),void 0===(r=function(){return n}.apply(e,[]))||(t.exports=r)},52126:(t,e,r)=>{"use strict";r.d(e,{Z:()=>q});var n=r(86061);function a(t,e){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0;return n.type in e?e[n.type](r,n):r}}var o,i=r(85820),s=r.n(i),c=r(8270),l=r(31311),u=r(20643),p=r.n(u),f=r(54299),m=r.n(f),d=r(4427),_=r.n(d),h=r(46270),b=r.n(h),g=r(82234);function y(t,e){var r={};return e.map((function(t){var e=t.key,n=t.textFragments,a=e.purpose||"(default)",o=[e.languageCode,e.regionCode,a];_()(r,o,m()(n,p()(r,o)))})),t.mergeDeepIn(["cm_api","text"],s().fromJS(r))}const v=a(s().Map(),(o={},(0,c.Z)(o,g.Z.CM_API.INITIAL_LOOKUP,(function(t,e){var r=e.payload.config;r.contactModuleTranslations&&(t=y(t,r.contactModuleTranslations));var n={bundle:r.contactInformationBundles&&r.contactInformationBundles[0],regionsAndLanguages:r.regionsAndLanguages&&r.regionsAndLanguages.regionsAndLanguages,reroutingInfo:r.reroutingInformation||{},isFetched:!0,isFetching:!1,hasFailed:!1};return b()(n,(function(e,r){null!=e&&(t=t.setIn(["cm_api",r],"object"===(0,l.Z)(e)?s().fromJS(e):e))})),t})),(0,c.Z)(o,"".concat(g.Z.CM_API.INITIAL_LOOKUP,"-PENDING"),(function(t){return t.setIn(["cm_api","isFetching"],!0)})),(0,c.Z)(o,"".concat(g.Z.CM_API.INITIAL_LOOKUP,"-ERROR"),(function(t){return t.getIn(["cm_api","isFetched"])||(t=t.setIn(["cm_api","hasFailed"],!0)),t.setIn(["cm_api","isFetching"],!1)})),(0,c.Z)(o,g.Z.SDK.LP,(function(t){return t.setIn(["lp_sdk","isFetched"],!0)})),(0,c.Z)(o,g.Z.CM_API.UPDATE_CONFIG,(function(t,e){var r=["cm_api","config"],n=t.getIn(r),a=e.payload;return t.setIn(r,n.merge(a))})),(0,c.Z)(o,g.Z.CM_API.KEYS_FETCHED,(function(t,e){return t.setIn(["cm_api","keys"],s().fromJS(e.payload))})),(0,c.Z)(o,g.Z.CM_API.LOOKUP_BY_FOCUS_AREA_FETCHED,(function(t,e){try{var r=e.payload.contactInformationBundles.map((function(t){return"".concat(t.key.languageCode,"-").concat(t.key.regionCode)}));return t.setIn(["cm_api","validLocalesForFocusArea"],r)}catch(t){}})),(0,c.Z)(o,g.Z.DATA.UPDATE_EXTERNAL_BUNDLES,(function(t,e){var r=e.payload,n=r.focusArea,a=r.bundle;return t.setIn(["externalBundles",n],a)})),(0,c.Z)(o,g.Z.DATA.CLEAR_EXTERNAL_BUNDLES,(function(t){return t.set("externalBundles",s().Map())})),(0,c.Z)(o,g.Z.DATA.FETCH_TRANSLATIONS,(function(t,e){return y(t,e.payload.contactModuleTranslations)})),(0,c.Z)(o,g.Z.DATA.SET_VARIATION,(function(t,e){var r=e.payload,n=r.experimentId,a=r.variation,o=r.isOverride;return t.setIn(["experiments",n],s().fromJS({variation:a,isOverride:o}))})),(0,c.Z)(o,g.Z.DATA.SET_FILTER,(function(t,e){var r=e.payload;return t.set("filterText",r)})),(0,c.Z)(o,g.Z.DATA.CLEAR_FILTER,(function(t){return t.set("filterText",void 0)})),o));var x,w=r(1768),k=r(83318),E=r(45455);function C(t,e){var r=e.payload,n=r.adapterId,a=r.conversationId,o=new k.ri({id:a,adapterId:n,state:E.dl.WAITING});return t.setIn(["conversations",a],o)}const T=a(s().Map(),(x={},(0,c.Z)(x,g.Z.CHAT.UPDATE_ADAPTER_STATE,(function(t,e){var r=e.payload;return t.getIn(["adapters",r.adapter.id])?(r.adapter.state=r.state,t.setIn(["adapters",r.adapter.id,"state"],r.state)):t})),(0,c.Z)(x,g.Z.CHAT.UPDATE_ADAPTER_AGENT_STATUS,(function(t,e){var r=e.payload,n=r.adapterId,a=r.agentStatus;return t.getIn(["adapters",n])?t.setIn(["adapters",n,"agentStatus"],a):t})),(0,c.Z)(x,g.Z.CHAT.UPDATE_CONVERSATION_STATE,(function(t,e){var r=e.payload;return r.conversationId?t.setIn(["conversations",r.conversationId,"state"],r.state):t})),(0,c.Z)(x,g.Z.CHAT.TRANSFER_CONVERSATION,(function(t,e){var r=e.payload,n=r.adapterId,a=r.conversationId,o=["conversations",r.conversationId,"messages"],i=t.getIn(o).map((function(t){return t.set("isHistory",!0)}));return r.conversationId?t.setIn(o,i).setIn(["conversations",a,"adapterId"],n):t})),(0,c.Z)(x,g.Z.CHAT.START_CHAT_ERROR,(function(t,e){var r=e.payload.error;return t.set("startChatError",r)})),(0,c.Z)(x,g.Z.CHAT.ADD_CONVERSATION,C),(0,c.Z)(x,g.Z.CHAT.RENAME_CONVERSATION,(function(t,e){var r=e.payload,n=r.adapter,a=r.conversationId,o=t.get("conversations",s().Map()).size,i="".concat(o-1,"_").concat(n.id),c=t.getIn(["conversations",i]);return c?(c=c.set("id",a),t.setIn(["conversations",a],c).deleteIn(["conversations",i])):C(t,{payload:{adapter:n,conversationId:a}})})),(0,c.Z)(x,g.Z.CHAT.AGENT_TYPING,(function(t,e){var r=e.payload,n=["conversations",r.conversationId];return t.getIn(n)?t.setIn(n.concat("isAgentTyping"),r.isAgentTyping):t})),(0,c.Z)(x,g.Z.CHAT.RENDER_MESSAGE,(function(t,e){var r=e.payload,n=["conversations",r.conversationId,"messages"],a=t.getIn(n),o=r.messages,i=a.filter((function(t){return!t.get("id")||!o.some((function(e){return e.get("id")===t.get("id")}))})).concat(s().List(o)).sort((function(t,e){return t.get("isPending")&&!e.get("isPending")?1:!t.get("isPending")&&e.get("isPending")?-1:t.get("timestamp").getTime()-e.get("timestamp").getTime()})),c=i.lastIndexOf((function(t){return t.get("isHistory")}));return c&&(i=i.map((function(t,e){return e<c&&!t.get("isHistory")&&(t=t.set("isHistory",!0)),t}))),t.setIn(n,i)})),(0,c.Z)(x,g.Z.CHAT.RENDER_EXIT_SURVEY,(function(t,e){var r=e.payload,n=r.conversationId,a=r.exitSurvey,o=["conversations",n,"exitSurvey"];return t.setIn(o,a)})),(0,c.Z)(x,g.Z.CHAT.REMOVE_EXIT_SURVEY,(function(t,e){var r=e.payload;return r?t.setIn(["conversations",r,"exitSurvey"],{}):t})),(0,c.Z)(x,g.Z.CHAT.SURVEY_RESPONSE,(function(t,e){var r=e.payload;return t.setIn(["surveyResponse",r.questionId],r.answerId)})),(0,c.Z)(x,g.Z.CHAT.UPDATE_UNREAD_MESSAGE_COUNT,(function(t,e){var r=e.payload,n=["conversations",r.conversationId,"unreadMsgCount"];return t.setIn(n,r.count)})),(0,c.Z)(x,g.Z.CHAT.SALESFORCE_AVAILABILITY,(function(t,e){return t.setIn(["support","isAvailable"],e.payload)})),(0,c.Z)(x,g.Z.CHAT.UPDATE_START_CHAT_BUTTON_TYPE,(function(t,e){return t.set("startChatButtonType",e.payload.startChatButtonType)})),(0,c.Z)(x,g.Z.CHAT.UPDATE_START_CHAT_BUTTON_INDEX,(function(t,e){return t.set("startChatButtonIndex",e.payload.startChatButtonIndex)})),(0,c.Z)(x,g.Z.CHAT.UPDATE_MESSAGE_BY_ID,(function(t,e){var r=e.payload,n=r.conversationId,a=r.messageId,o=r.updates,i=void 0===o?{}:o,s=["conversations",n,"messages"],c=t.getIn(s),l=c.findIndex((function(t){return t.get("id")===a})),u=c.get(l);if(u){var p=c.set(l,u.mergeDeep(i));return t.setIn(s,p)}})),(0,c.Z)(x,g.Z.CHAT.CLEAR_MESSAGES,(function(t,e){var r=e.payload.conversationId;return t.setIn(["conversations",r,"messages"],s().List())})),(0,c.Z)(x,g.Z.CHAT.UPDATE_TRANSFER_MAP,(function(t,e){var r=e.payload,n=r.adapterIdTransferredFrom,a=r.adapterIdTransferredTo;return r.ifAdd?t.setIn(["transferMap",a],n):t.deleteIn(["transferMap",a])})),(0,c.Z)(x,g.Z.ADAPTER.ADD,(function(t,e){return e.payload.forEach((function(e){var r=["adapters",e.id,"adapter"];t=t.setIn(r,e)})),t})),(0,c.Z)(x,g.Z.ADAPTER.CLOSE,(function(t,e){return e.payload.forEach((function(e){t=t.removeIn(["adapters",e.id])})),t})),(0,c.Z)(x,g.Z.ADAPTER.ADD_SUPPORT,(function(t,e){var r=e.payload;return t.setIn(["support","adapter"],r)})),(0,c.Z)(x,g.Z.ADAPTER.UPDATE,(function(t,e){var r=e.payload,n=r.adapterId,a=r.info,o=["adapters",n];return t.getIn(o)?t.setIn(o,t.getIn(o,s().Map()).mergeDeep(a)):t})),(0,c.Z)(x,g.Z.CHAT.SET_DOM_SELECTOR_TO_SCROLL_TO,(function(t,e){return t.set("domSelectorToScrollTo",e.payload)})),(0,c.Z)(x,g.Z.CHAT.UPDATE_IF_SHOW_DOWNLOAD_TRANSCRIPT_BUTTON,(function(t,e){return t.set("ifShowDownloadTranscriptButton",e.payload)})),(0,c.Z)(x,g.Z.CHAT.SET_ASYNC_PROPERTY,(function(t,e){var r=e.payload,n=r.key,a=r.value;return t.setIn(["async",n],s().fromJS(a))})),(0,c.Z)(x,g.Z.CHAT.SET_COOKIE_VALUE,(function(t,e){return t.setIn(["chatCookie"],e.payload)})),(0,c.Z)(x,g.Z.CHAT.SET_BOT_API_STATUS,(function(t,e){var r=e.payload;return t.set("botApiStatus",r)})),(0,c.Z)(x,g.Z.CHAT.SET_NOTICE,(function(t,e){var r=e.payload,n=r.conversationId,a=r.notice;return t.setIn(["conversations",n,"notice"],a)})),(0,c.Z)(x,g.Z.CHAT.SET_BUSINESS_LOCATION_CHANGE,(function(t,e){var r=e.payload;return t.setIn(["businessLocationChange"],r)})),x));var I;const S=a(s().Map(),(I={},(0,c.Z)(I,g.Z.PANE.SHOW,(function(t){return t.set("isPaneHidden",!1).set("isPillHiddenOverride",!1)})),(0,c.Z)(I,g.Z.PANE.HIDE,(function(t){return t.set("isPaneHidden",!0)})),(0,c.Z)(I,g.Z.PANE.HAS_DISPLAYED,(function(t,e){return t.set("hasDisplayed",Boolean(e.payload))})),(0,c.Z)(I,g.Z.PANE.LOAD,(function(t){return t.set("shouldLoadPane",!0)})),(0,c.Z)(I,g.Z.GENERAL.HIDE_PILL,(function(t,e){return t.set("isPillHiddenOverride",e.payload)})),(0,c.Z)(I,g.Z.PANE.TOGGLE_MENU,(function(t){return t.set("isToggleMenuDisplayed",!t.get("isToggleMenuDisplayed"))})),(0,c.Z)(I,g.Z.PANE.END_CHAT_OVERLAY,(function(t,e){return t.set("isEndChatOverlayDisplayed",e.payload)})),(0,c.Z)(I,g.Z.PANE.SELECT_MENU_OPTION,(function(t,e){return t.set("userSelectedMenuOption",e.payload)})),(0,c.Z)(I,g.Z.PANE.DISPLAY_PROACTIVE,(function(t,e){return t.set("isProactivePopupDisplay",e.payload)})),(0,c.Z)(I,g.Z.PANE.SHOW_LOADING_SCREEN,(function(t,e){var r=e.payload;return t.set("isLoading",r)})),(0,c.Z)(I,g.Z.PANE.SET_DISPLAY_CHAT_IN_PANE_OVERRIDE,(function(t,e){return t.set("displayChatInPaneOverride",e.payload)})),(0,c.Z)(I,g.Z.PANE.DISPLAY_LOCALE_DROPDOWN,(function(t,e){return t.set("isLocaleDropdownDisplayed",e.payload)})),(0,c.Z)(I,g.Z.PANE.SET_CHANNEL_TYPE,(function(t,e){var r=e.payload.type;return t.set("channelType",r||null)})),(0,c.Z)(I,g.Z.PANE.SET_MENU_STATE,(function(t,e){var r=e.payload.type;return t.set("menuState",r||null)})),I));var A,N=r(55185);const O=a(s().Map(),(A={},(0,c.Z)(A,g.Z.GENERAL.UPDATE_OVERLAY_NOTIFICATION,(function(t,e){return t.set("isOverlayDisplayed_notification",e.payload)})),(0,c.Z)(A,g.Z.GENERAL.CLIENT_INFO.UPDATE,(function(t,e){var r=e.payload;return r?t.set("clientInfo",t.get("clientInfo").mergeDeep(s().fromJS(r))):t})),(0,c.Z)(A,g.Z.GENERAL.CLIENT_INFO.IS_USER_ACTIVE,(function(t,e){return t.setIn(["clientInfo","isUserActive"],e.payload)})),(0,c.Z)(A,g.Z.GENERAL.IS_MOBILE,(function(t,e){var r=e.payload;return t.set("isMobile",r)})),(0,c.Z)(A,g.Z.GENERAL.COLOR_PALETTE,(function(t,e){var r=e.payload;return t.set("colorPalette",(0,N.Z)({},r,{isJsObject:!0}))})),(0,c.Z)(A,g.Z.GENERAL.IS_TIMER_PREPARING,(function(t,e){var r=e.payload;return t.set("isTimerPreparing",r)})),(0,c.Z)(A,g.Z.GENERAL.PROACTIVE_TYPE,(function(t,e){var r=e.payload;return t.set("proactiveType",r)})),(0,c.Z)(A,g.Z.GENERAL.WELCOME_MESSAGE,(function(t,e){return t.set("welcomeMessage",e.payload)})),(0,c.Z)(A,g.Z.GENERAL.DISPLAY_WELCOME_MESSAGE,(function(t,e){return t.set("welcomeMessageDisplayed",e.payload)})),(0,c.Z)(A,g.Z.GENERAL.WELCOME_MESSAGE_HAS_SHOWN,(function(t,e){return t.set("welcomeMessageHasShown",e.payload)})),(0,c.Z)(A,g.Z.GENERAL.PILL_CONTAINER_CSS,(function(t,e){var r=e.payload;return t.set("pillContainerCss",r)})),(0,c.Z)(A,g.Z.GENERAL.SET_GENERAL,(function(t,e){var r=e.payload,n=r.key,a=r.value;return t.set(n,a)})),A));var P,D=r(96138),L=r.n(D),R=r(82641),M=r.n(R),X=r(57003),Z=function(t){return t.get("schedulerType")};function U(t){return(0,N.Z)({},t,{timezones:t.appointmentTimeZones||t.timezones})}function H(t,e,r){return t.withMutations((function(t){var n=r.key||{},a=n.variation,o=n.focusArea,i=n.regionCode,c=n.languageCode,l=n.purpose;if(r.text&&(t.setIn(["text",c,i,a||o,l],s().fromJS(r.text)),delete r.text),r.dialingCodes){var u=r.dialingCodes,p=u.internationalDialingCodes,f=u.locale,m=f.languageCode,d=f.regionCode;t.setIn(["dialingCodes",m,d],s().fromJS(p)),delete r.dialingCodes}if(!t.getIn(["info",e,"initialized"])){var _={displayedScreen:X.fh.FORM,initialized:!0};t.setIn(["info",e],s().fromJS(_))}r.cognitiveClassificationText&&t.setIn(["cognitiveClassificationText",c,i,a||o,l],s().fromJS(r.cognitiveClassificationText)),t.setIn(["info",e],t.getIn(["info",e]).mergeDeep(s().fromJS(r)))}))}function B(t,e){var r=e.payload,n=r.config,a=r.schedulerType;try{return H(t,a,(0,N.Z)({},n,{isInfoFetching:!1,isInfoFetched:!0}))}catch(e){return w.fF.warn("schedulerReducers.infoFetched: got unexpected error",e),t}}var F=/\+\d+ /,z=/[^-+ 0-9]/g;function j(t,e){var r=e.schedulerType,n=void 0===r?Z(t):r,a=e.data,o=void 0===a?t.getIn(["info",n,"appointmentDetails"],s().Map()).toJS():a;if(M()(o))return t.setIn(["info",n,"form"],s().Map());var i=o.clientDialingCountryCode,c=o.clientPhone;i||(i="+1",c.match(F)&&(i=F.exec(c)[0].trim(),c=c.replace(F,""))),c=c.replace(z,"");var l=1e3*o.startDateTimeUnix;return H(t,n,{appointmentDetails:o,confirmationNumber:o.confirmationNumber,form:{question:o.clientQuestion,date:l,time:l,timezone:o.clientTimezone,topic:o.topic,firstName:o.clientFirstName,lastName:o.clientLastName,email:o.clientEmail,company:o.clientCompany,subregion:o.stateOrProvince,selectedAgent:o.expertId,dialingCode:i,phoneNumber:c}})}const Y=a(s().Map(),(P={},(0,c.Z)(P,g.Z.SCHEDULER.UPDATE_CONFIG,(function(t,e){var r=e.payload,n=r.config,a=r.schedulerType,o=r.isDefault,i=void 0!==o&&o;try{return H(t,a,{config:U(n),isDefault:i})}catch(e){return w.fF.warn("schedulerReducers.configFetched: got unexpected error",[e,r]),t}})),(0,c.Z)(P,g.Z.SCHEDULER.INFO_FETCHED,B),(0,c.Z)(P,"".concat(g.Z.SCHEDULER.INFO_FETCHED,"-PENDING"),(function(t,e){var r=e.payload.body.schedulerTextTranslationsKey;return r?H(t,(0,w.kN)(r),{isInfoFetching:!0}):t})),(0,c.Z)(P,g.Z.SCHEDULER.UPDATE_INFO,B),(0,c.Z)(P,g.Z.SCHEDULER.DISPLAY,(function(t,e){return t.set("isDisplayed",Boolean(e.payload)).set("isModifying",!1).set("isModifyCancelled",!1).set("isSaveComplete",!1)})),(0,c.Z)(P,g.Z.SCHEDULER.HAS_DISPLAYED,(function(t,e){return t.set("hasDisplayed",Boolean(e.payload))})),(0,c.Z)(P,g.Z.SCHEDULER.AVAILABILITY_FETCH,(function(t,e){var r=e.payload,n=r.schedulerType,a=r.availableSlotsDetail;return a&&(a=a.filter((function(t){return"program expert"===t.role}))),t.setIn(["info",n,"availabilities"],s().fromJS(a)).setIn(["info",n,"isAvailabilityFetched"],!0).deleteIn(["info",n,"isAvailabilityPending"])})),(0,c.Z)(P,"".concat(g.Z.SCHEDULER.AVAILABILITY_FETCH,"-PENDING"),(function(t,e){var r=e.payload.schedulerType;return t.setIn(["info",r,"isAvailabilityPending"],!0)})),(0,c.Z)(P,g.Z.SCHEDULER.BOOK_APPOINTMENT,(function(t,e){return H(t,Z(t),{isSubmitting:!1,confirmationNumber:e.payload.confirmationNumber})})),(0,c.Z)(P,"".concat(g.Z.SCHEDULER.BOOK_APPOINTMENT,"-PENDING"),(function(t){return t.setIn(["info",Z(t),"isSubmitting"],!0)})),(0,c.Z)(P,g.Z.SCHEDULER.APPOINTMENT_FETCH,(function(t,e){var r=e.payload.data,n=(0,w.kN)((0,N.Z)({},r,{resource:void 0}));return j(t,{schedulerType:n,data:r}).set("schedulerType",n).setIn(["info",n,"displayedScreen"],"DETAILS").delete("isFetchingAppointment")})),(0,c.Z)(P,"".concat(g.Z.SCHEDULER.APPOINTMENT_FETCH,"-PENDING"),(function(t){return t.set("isFetchingAppointment",!0)})),(0,c.Z)(P,g.Z.SCHEDULER.CANCEL_APPOINTMENT,(function(t){var e=Z(t),r=t.getIn(["info",e,"appointmentDetails","confirmationNumber"]);return t.deleteIn(["info",e,"appointmentDetails"]).setIn(["info",e,"cancelledConfirmationNumber"],r)})),(0,c.Z)(P,g.Z.SCHEDULER.SUBMIT_CANCEL_SURVEY,(function(t){var e=Z(t);return t.deleteIn(["info",e,"confirmationNumber"])})),(0,c.Z)(P,g.Z.SCHEDULER.DISPLAY_SCREEN,(function(t,e){return t.setIn(["info",Z(t),"displayedScreen"],e.payload)})),(0,c.Z)(P,g.Z.SCHEDULER.ERROR,(function(t,e){var r=e.payload,n=r.data,a=r.schedulerType,o="SCH02";return"object"===(0,l.Z)(n)?o=n.code:"string"==typeof n&&L()(n,"SCH")?o=n:w.fF.warn("schedulerReducers.errorOccurred: got unexpected error",r),t.setIn(["info",a||Z(t),"errorCode"],o).setIn(["info",a||Z(t),"isSubmitting"],!1)})),(0,c.Z)(P,g.Z.SCHEDULER.ERROR_CLEAR,(function(t){var e=Z(t);return t.deleteIn(["info",e,"errorCode"])})),(0,c.Z)(P,g.Z.SCHEDULER.UPDATE_SCHEDULER_TYPE,(function(t,e){return t.set("schedulerType",e.payload)})),(0,c.Z)(P,g.Z.SCHEDULER.UPDATE_PREFERRED_DIALING_CODE,(function(t,e){var r=Z(t);return t.setIn(["info",r,"form","dialingCode"],e.payload)})),(0,c.Z)(P,g.Z.SCHEDULER.PRIVACY_VIEWED,(function(t,e){var r=e.payload;return t.setIn(["info",Z(t),"form","privacyViewed"],r)})),(0,c.Z)(P,g.Z.SCHEDULER.NOTICE_CHOICE_LOADED,(function(t,e){return t.set("noticeAvailable",e.payload)})),(0,c.Z)(P,g.Z.SCHEDULER.DISPLAY_PANE,(function(t,e){return t.setIn(["info",Z(t),"displayedAccordian"],e.payload)})),(0,c.Z)(P,g.Z.SCHEDULER.SET_INPUT_FORM_VALUE,(function(t,e){var r=e.payload,n=r.id,a=r.value;return t.setIn(["info",Z(t),"form",n],a)})),(0,c.Z)(P,g.Z.SCHEDULER.REMOVE_INPUT_VALUE,(function(t,e){return t.deleteIn(["info",Z(t),"form",e.payload.id])})),(0,c.Z)(P,g.Z.SCHEDULER.COGNITIVE_CLASSIFICATION,(function(t,e){var r=e.payload.data;try{var n=Z(t);return t.setIn(["info",n,"cognitiveClassification"],s().fromJS(r)).deleteIn(["info",n,"isCognitiveClassificationFetching"]).deleteIn(["info",Z(t),"cognitiveFeedbackReceived"])}catch(e){return w.fF.warn("schedulerReducers.configFetched: got unexpected error",[e,r]),t}})),(0,c.Z)(P,"".concat(g.Z.SCHEDULER.COGNITIVE_CLASSIFICATION,"-PENDING"),(function(t){return t.setIn(["info",Z(t),"isCognitiveClassificationFetching"],!0)})),(0,c.Z)(P,"".concat(g.Z.SCHEDULER.COGNITIVE_CLASSIFICATION,"-ERROR"),(function(t){var e=Z(t);return t.deleteIn(["info",e,"isCognitiveClassificationFetching"])})),(0,c.Z)(P,g.Z.SCHEDULER.COGNITIVE_FEEDBACK,(function(t){return t.setIn(["info",Z(t),"cognitiveFeedbackReceived"],!0)})),(0,c.Z)(P,g.Z.SCHEDULER.CLEAR_APPOINTMENT_DETAILS,(function(t,e){var r=e.payload.schedulerType;return t.deleteIn(["info",r,"confirmationNumber"]).setIn(["info",r,"appointmentDetails"],s().Map())})),(0,c.Z)(P,g.Z.SCHEDULER.RESET_FORM,j),(0,c.Z)(P,g.Z.SCHEDULER.MODIFY_APPOINTMENT,(function(t,e){var r=e.payload;return t.set("isModifying",r).set("isModifyCancelled",!1).set("isSaveComplete",!1)})),(0,c.Z)(P,g.Z.SCHEDULER.CANCEL_MODIFY_APPOINTMENT,(function(t){return t.set("isModifyCancelled",!0)})),(0,c.Z)(P,g.Z.SCHEDULER.SAVE_COMPLETE,(function(t){return t.set("isSaveComplete",!0).set("isModifying",!1)})),P));var G;const W=a(s().Map(),(G={},(0,c.Z)(G,g.Z.NOTIFICATION.ADD,(function(t,e){return t.setIn(["allNotifications",e.payload.id],e.payload)})),(0,c.Z)(G,g.Z.NOTIFICATION.ADD_RENDERED_ID,(function(t,e){var r=e.payload;return t.set("renderedNotificationIds",s().fromJS([r]))})),(0,c.Z)(G,g.Z.NOTIFICATION.REMOVE_RENDERED_ID,(function(t,e){var r=e.payload,n=["renderedNotificationIds"];return t.setIn(n,t.getIn(n).filter((function(t){return t!==r})))})),(0,c.Z)(G,g.Z.NOTIFICATION.ADD_BLOCKED_ID,(function(t,e){var r=e.payload,n=["blockedNotificationIds"];return t.setIn(n,t.getIn(n).push(r))})),G));var V;const K=a(s().Map(),(V={},(0,c.Z)(V,g.Z.POPUP.UPDATE_TEXT,(function(t,e){return t.set("headerText",e.payload.headerText)})),(0,c.Z)(V,g.Z.POPUP.UPDATE_INDUSTRYID,(function(t,e){return t.set("industryId",e.payload.industryId)})),V)),q=(0,n.U)({data:v,chat:T,pane:S,general:O,scheduler:Y,popup:K,notification:W,uuid:a(s().Map(),{})})},85188:(t,e,r)=>{"use strict";r.d(e,{J:()=>a,N:()=>n});var n={READY:"ready",ERROR:"error"},a={INITIALIZED:"chat:initialized",ROUTED:"chat:routed",AGENT_STATUS:"chat:agent:status",VISITOR_STATUS:"chat:visitor:status",ERROR:"chat:error",AGENT_TYPING:"chat:agent:typing",VISITOR_TYPING:"chat:visitor:typing",CONVERSATION_STATUS:"chat:conversation:status",CONVERSATION_START:"chat:conversation:start",CONVERSATION_END:"chat:conversation:end",CONVERSATION_PARTICIPANTS:"chat:conversation:participants",CONVERSATION_MESSAGE:"chat:conversation:message",CONVERSATION_SEND_MESSAGE:"chat:conversation:sendMessage",CONVERSATION_MESSAGE_VIEWED:"chat:conversation:message:viewed"}},71066:(t,e,r)=>{"use strict";r.d(e,{Z:()=>S});var n,a=r(43025),o=r(1768),i=r(8270),s=r(58226),c=r(55185),l=r(82641),u=r.n(l),p=r(93800),f=r.n(p),m=r(51351),d=r.n(m),_=r(7976),h=r.n(_),b=r(20643),g=r.n(b),y=r(82234),v=r(85188),x=r(57418),w=r(3479),k=r(51733),E=["focusArea","regionCode","languageCode","purpose"],C={privacyStatement:"Carbon_cm_privacy"},T=["type","text","by","participantId","id","timestamp","isPrivacy","isViewed"];const I=(n={},(0,i.Z)(n,y.Z.CM_API.INITIAL_LOOKUP,(function(t,e){var r,n,a,o=(0,w.sU)(e),i=g()(t,"config.contactInformationBundles[0]",{}),l=g()(i,"key");i.phoneInformation&&(r=h()(i.phoneInformation,(function(t){return(0,c.Z)({heading:o(t.purpose,"cm_phone"),description:o(t.purpose,"phone_detail")},d()(t,["phoneNumber","phoneNumberFormatted"].concat((0,s.Z)(E))))}))),i.emailInformation&&(n=h()(i.emailInformation,(function(t){return(0,c.Z)({heading:o(t.purpose,"cm_contactForm"),description:o(t.purpose,"contactForm_detail"),linkText:o(t.purpose,"contactForm_link")},d()(t,["url"].concat((0,s.Z)(E))))})));var u=g()(t,"config.contactModuleTranslations");if(u)try{var p=u.find((function(t){return"(default)"===t.key.purpose})).textFragments;a=f()(C,(function(t){return p[t]}))}catch(t){x.Z.logger.warn("Error populating SDK text frags",t)}x.Z.trigger(v.N.READY,{key:l,phone:r,links:n,textFragments:a})})),(0,i.Z)(n,"".concat(y.Z.CM_API.INITIAL_LOOKUP,"-ERROR"),(function(t){x.Z.trigger(v.N.ERROR,t)})),(0,i.Z)(n,y.Z.CHAT.RENDER_MESSAGE,(function(t){var e=t.conversationId;t.messages.filter((function(t){return"agentJoin"!==t.type&&"agentLeft"!==t.type})).forEach((function(t){x.Z.trigger(v.J.CONVERSATION_MESSAGE,(0,c.Z)({conversationId:e},d()(t.toJS(),T)))}))})),(0,i.Z)(n,y.Z.CHAT.AGENT_TYPING,(function(t){var e=t.conversationId,r=t.isAgentTyping;x.Z.trigger(v.J.AGENT_TYPING,{conversationId:e,isAgentTyping:r})})),(0,i.Z)(n,y.Z.CHAT.UPDATE_MESSAGE_BY_ID,(function(t,e){var r=t.conversationId,n=t.messageId,a=t.updates;if(a=d()(a,T),!u()(a)){var o=(0,k.S$)({convId:r,messageId:n},e);o&&x.Z.trigger(v.J.CONVERSATION_MESSAGE,(0,c.Z)({conversationId:r},d()(o,T),a))}})),n);function S(t){var e=t.getState;return function(t){return function(r){var n=I[r.type],i=e();if(t(r),n){var s=(0,a.bh)().getState();try{n(r.payload,s,i)}catch(t){o.fF.error("CM_APP SDK error",t)}}}}}},57418:(t,e,r)=>{"use strict";r.d(e,{Z:()=>X});var n,a=r(58226),o=r(54299),i=r.n(o),s=r(4427),c=r.n(s),l=r(20643),u=r.n(l),p=r(39982),f=r.n(p),m=r(42695),d=r.n(m),_=r(65545),h=r(19187),b=r(43025),g=r(1768),y=r(8270),v=r(9634),x=r(85188);const w=(n={},(0,y.Z)(n,x.J.CONVERSATION_START,(function(){return{conversationId:(0,b.bh)().dispatch((0,v.xm)())}})),(0,y.Z)(n,x.J.CONVERSATION_END,(function(){(0,b.bh)().dispatch((0,v.Nl)())})),(0,y.Z)(n,x.J.CONVERSATION_SEND_MESSAGE,(function(t){(0,b.bh)().dispatch((0,v.bG)({text:t}))})),(0,y.Z)(n,x.J.VISITOR_TYPING,(function(t){(0,b.bh)().dispatch((0,v.XT)(t))})),(0,y.Z)(n,x.J.CONVERSATION_MESSAGE_VIEWED,(function(t){var e=t.conversationId,r=t.messageId;(0,b.bh)().dispatch((0,v.m8)({convId:e,messageId:r}))})),n);var k=r(14078),E=r.n(k),C=r(7976),T=r.n(C),I=r(7120),S=r.n(I),A=r(1862),N=r(51733);const O=[function(){this.select=A.Nd,this.onChange=function(t,e,r){void 0===t&&void 0===e||X.trigger(x.J.ROUTED,{skill:t,config:(0,A.ZQ)(r)})}},function(){this.select=A.l8,this.onChange=function(t){"boolean"==typeof t&&X.trigger(x.J.AGENT_STATUS,{status:t})}},function(){this.select=N.fB,this.onChange=function(t){"boolean"==typeof t&&X.trigger(x.J.VISITOR_STATUS,{isLoggedIn:t})}},function(){this.select=N.jk,this.onChange=function(t){t&&X.trigger(x.J.ERROR,{message:t.message,error:t})}},function(){this.select=A.be,this.onChange=function(t,e,r){(t||e)&&X.trigger(x.J.CONVERSATION_STATUS,{status:t,conversationId:(0,A.aR)(r)})}},function(){this.select=A.p2,this.onChange=function(t,e){(t.length>0||e)&&!S()(t,e)&&X.trigger(x.J.CONVERSATION_PARTICIPANTS,{participants:T()(t,(function(t){return E()(t,(function(t){return null!==t&&""!==t}))}))})}}];var P={},D=[],L=[],R=(0,_.Z)("sdk",(0,g.hV)(h.SZ.LOGGER)),M=function(){L.forEach((function(t){return t()}))};const X={trigger:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var a=w[t];return a?Promise.resolve(w[t].apply(w,r)):(R.log.apply(R,["SDK triggered",t].concat(r)),D.push({eventName:t,data:r}),Array.isArray(P[t])&&(R.log.apply(R,["eventHandler.fire",t].concat(r)),P[t].forEach((function(t){try{t.apply(void 0,r)}catch(t){console.error(t)}}))),!0)},register:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];P[t]||(P[t]=[]),P[t].push(e),r&&D.filter((function(e){return e.eventName===t})).forEach((function(t){e.apply(void 0,(0,a.Z)(t.data)),R.log("eventHandler.replayed",t.eventName,t.data)})),R.log("eventHandler.register",t,e)},deregister:function(t,e){d()(P[t],e),R.log("eventHandler.deregister",t,e)},init:function(){M(),f()(O,(function(t){var e=new t;e.unsubscribe=(0,b.SS)(e.select,(function(){try{R.log.apply(R,["eventHandler.storeObserver"].concat(Array.prototype.slice.call(arguments),[e.onChange])),e.onChange.apply(e,arguments)}catch(t){R.error("analytics.observers error: ",{observer:e,err:t})}})),L.push(e.unsubscribe)}))},configure:function(t){var e=u()(window,"digitalData.page.pageInfo.ibm.messaging");return c()(window,"digitalData.page.pageInfo.ibm.messaging",i()(e,t)),window.CM_APP.init()},destroy:M,logger:R}},1862:(t,e,r)=>{"use strict";r.d(e,{lv:()=>J,d3:()=>it,ZQ:()=>pt,aA:()=>gt,l8:()=>ft,Q0:()=>at,ab:()=>st,WX:()=>ct,Nd:()=>ut,f8:()=>lt,tI:()=>tt,aR:()=>rt,be:()=>et,OV:()=>At,uP:()=>H,e3:()=>F,nn:()=>U,tV:()=>z,qO:()=>dt,p2:()=>It,Fv:()=>G,_v:()=>V,yX:()=>_t,qX:()=>ht,at:()=>ot,cc:()=>vt,uv:()=>B,K3:()=>mt,Hm:()=>Dt,fb:()=>Tt,cA:()=>W,M:()=>Pt,yz:()=>bt,XZ:()=>Nt,vY:()=>K,_U:()=>Et,DC:()=>xt,jE:()=>Ct,jZ:()=>Ot,ZJ:()=>j,JE:()=>Y});var n=r(55185),a=r(8270),o=r(85066),i=r.n(o),s=r(91734),c=r.n(s),l=r(29045),u=r.n(l),p=r(98052),f=r.n(p),m=r(69113),d=r.n(m),_=r(29154),h=r.n(_),b=r(20643),g=r.n(b),y=r(39982),v=r.n(y),x=r(51351),w=r.n(x),k=r(66748),E=r.n(k),C=r(14078),T=r.n(C),I=r(44885),S=r(85820),A=r(83318),N=r(45455),O=r(57003),P=r(3479),D=r(45077),L=r(54265),R=r(38755);function M(t){(0,R.Z)(1,arguments);var e=(0,L.Z)(t);return e.setSeconds(0,0),e}var X,Z=r(1768),U=function(t,e){return e.getIn(["chat","adapters",t])},H=function(t,e){return e.getIn(["chat","adapters",t,"adapter"])},B=(0,I.P1)((function(t){return t.getIn(["chat","conversations"],(0,S.Map)())}),(function(t){return t.toJS()})),F=(0,I.P1)((function(t){return t.getIn(["chat","adapters"],(0,S.Map)())}),(function(t){return T()(t.toJS(),(function(t){return t.adapter}))})),z=(0,I.P1)(F,(function(t){return E()(t).map((function(t){return t.adapter})).filter(Boolean)})),j=(0,I.P1)(F,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E()(t).filter((function(t){return t.isReady}))})),Y=(0,I.P1)(z,(function(t){return t.filter((function(t){return t.queueType===O._E.SYNC}))})),G=(0,I.P1)(z,(function(t){return t.filter((function(t){return t.queueType===O._E.ASYNC}))})),W=(0,I.P1)(G,Y,(function(t,e){return t.concat(e)})),V=(0,I.P1)(z,(function(t){return t.filter((function(t){return t.queueType===O._E.BOT}))})),K=(0,I.P1)(j,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.adapter})).filter((function(t){return t.queueType===O._E.SYNC||t.queueType===O._E.ASYNC}))})),q=((0,I.P1)(z,(function(t){return t.filter((function(t){return t.queueType===O._E.OTHER}))})),X={},(0,a.Z)(X,O._E.ASYNC,[{validator:function(t){return t.state===N.GC.AVAILABLE},reason:function(t){return"Expected adapter to be AVAILABLE, but was ".concat(t.state)}},{validator:function(t){return t.isLoggedIn||t.agentStatus!==O.LF.UNAVAILABLE},reason:function(t){return"Agents must be available or the user must be authenticated: ".concat(JSON.stringify(w()(t,["isLoggedIn","agentStatus"])))}}]),(0,a.Z)(X,"DEFAULT",[{validator:function(t){return t.state===N.GC.AVAILABLE},reason:function(t){return"Expected adapter to be AVAILABLE, but was ".concat(t.state)}}]),X),J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.throws,n=void 0!==r&&r;if(!t||!t.adapter)return!1;var a=[],o=q[t.adapter.queueType]||q.DEFAULT;if(o.forEach((function(e){e.validator(t)||a.push(e.reason(t))})),0===a.length)return!0;if(n)throw new Error("Unable to start chat: ".concat(a.join("; ")));return!1},Q=[function(t){return t.adapter.queueType===O._E.ASYNC&&(t.state===N.dl.WAITING||t.state===N.dl.CHATTING)},function(t){return t.adapter.queueType===O._E.BOT},function(t){return t.adapter.queueType===O._E.ASYNC&&t.isLoggedIn},function(t){return t.adapter.queueType===O._E.SYNC},function(t){return t.adapter.queueType===O._E.ASYNC}];var $=[N.dl.CHATTING,N.dl.WAITING,N.dl.ENDED],tt=(0,I.P1)(B,F,(function(t,e){var r,n=E()(t),a=[],o=[N.dl.WAITING,N.dl.CHATTING];return(a=n.filter((function(t){return g()(e[t.adapterId],["adapter","queueType"])===O._E.ASYNC&&o.includes(t.state)&&!t.adapterId.includes("BotAdapter")}))).length?(r=a.find((function(t){var r=g()(e[t.adapterId],["adapter"]).conversationMapping,n=void 0===r?{}:r;return Object.keys(n).some((function(e){return n[e]===t.id}))})))||(r=h()(a.filter((function(t){return t.messages.length>0})))||h()(a)):v()($,(function(t){if((a=n.filter((function(e){return e.state===t}))).length>0)return r=h()(a),!1})),r})),et=(0,I.P1)(tt,(function(t){return t&&t.state})),rt=(0,I.P1)(tt,(function(t){return t&&t.id})),nt=[N.GC.AVAILABLE,N.GC.STAND_BY],at=(0,I.P1)(F,tt,(function(t,e){if(e)return t[e.adapterId];var r=E()(t),n=null;return v()(nt,(function(t){var e=function(t,e){var r=t.filter((function(t){return t.state===e}));if(r.length>0){var n=null;return v()(Q,(function(t){var e=r.filter(t);if(e.length>0)return n=e[0],!1})),n}}(r,t);if(e&&e.adapter)return n=e,!1})),n})),ot=(0,I.P1)(at,(function(t){return J(t)})),it=(0,I.P1)(at,(function(t){return t&&t.adapter})),st=(0,I.P1)(it,(function(t){return g()(t,"config.purpose")})),ct=((0,I.P1)(it,(function(t){return t&&t.routedSkill})),(0,I.P1)(it,(function(t){return t&&t.routedSkillStatus})),(0,I.P1)(it,(function(t){return t&&t.queueType}))),lt=(0,I.P1)(at,(function(t){return t&&t.state})),ut=(0,I.P1)(at,(function(t){return g()(t,"routedSkill")})),pt=(0,I.P1)(at,(function(t){return g()(t,"adapter.config")})),ft=(0,I.P1)(at,(function(t){if(t){var e=t.agentStatus,r=t.state;switch(e){case O.LF.AVAILABLE:case!0:return!0;case O.LF.UNAVAILABLE:case!1:return!1;case void 0:return void 0===r?null:r!==N.GC.UNAVAILABLE;default:return null}}})),mt=(0,I.P1)(Y,(function(t){try{return t.map((function(t){return t.engagementData.engagementDetails&&t.engagementData.engagementDetails.engagementId}))[0]}catch(t){return null}})),dt=((0,I.P1)(Y,(function(t){try{return t[0].routedSkill}catch(t){return null}})),(0,I.P1)(it,K,(function(t,e){try{var r=t&&d()([O._E.SYNC,O._E.ASYNC],t.queueType)&&t||e[0];if(r)return r.routedSkill||r.skill||r.skillId}catch(t){return}}))),_t=(0,I.P1)(V,(function(t){try{return t[0].skill}catch(t){return null}})),ht=(0,I.P1)(V,(function(t){try{return t[0].conversationId}catch(t){return null}})),bt=(0,I.P1)(V,D.W7,(function(t,e){try{return t[0].phoneNumber&&e}catch(t){return!1}})),gt=(0,I.P1)(it,(function(t){return t&&t.id})),yt=((0,I.P1)(it,(function(t){return t?t.skill:null})),Object.freeze((0,A.ri)().toJS()));function vt(t,e){return B(e)[t]||yt}var xt=(0,I.P1)(tt,(function(t){return t&&t.messages||[]})),wt=function(t){return"visitor"===t.type||t.isUserTimestamp},kt=new Set(["system","timestamp","survey","downloadTranscript","chatEnd"]),Et=(0,I.P1)(xt,P.Ot,(function(t,e){try{var r={year:"numeric",day:"numeric",month:"numeric",time:!0};t=t.reduce((function(t,a){var o=f()(t,(function(t){return!kt.has(t)}));return kt.has(a.type)||!(!o||"visitor"===a.type&&"visitor"!==o.type||"visitor"===o.type&&"visitor"!==a.type)&&function(t,e){(0,R.Z)(2,arguments);var r=M(t),n=M(e);return r.getTime()===n.getTime()}(o.timestamp,a.timestamp)||t.push((0,n.Z)({},a,{type:"timestamp",isUserTimestamp:"visitor"===a.type,text:(0,Z.p6)(a.timestamp,e,r)})),t.push(a),t}),[]),t=t.map((function(t,e,r){if(t.key="".concat(t.id,"-").concat(t.timestamp,"-").concat(t.text),e>0){var n=r[e-1];(wt(n)&&!wt(t)||!wt(n)&&wt(t))&&(t.isNewCluster=!0)}return t}))}catch(t){}var a=h()(u()(t,(function(t){return"bot"===t.type&&!t.isGreeting&&!t.isHistory})));return a&&(a.showFeedback=!0),t||[]})),Ct=(0,I.P1)(Et,(function(t){return t.filter((function(t){return!t.isHistory}))})),Tt=(0,I.P1)(Et,(function(t){return t.filter((function(t){return t.isHistory}))})),It=(0,I.P1)(F,(function(t){return c()(t,(function(t,e){return v()(e.participants||{},(function(e){return t[e.id]=e})),t}),{})})),St=(0,I.P1)(at,(function(t){return t&&t.participants})),At=(0,I.P1)(St,(function(t){return t?u()(t,(function(t){return t&&t.isActive})):[]})),Nt=(0,I.P1)(At,xt,(function(t,e){var r=f()(e,(function(t){return"agent"===t.type||"agentJoin"===t.type}));if(r&&r.participantId)return i()(t,(function(t){return t.id===r.participantId}))})),Ot=((0,I.P1)(At,(function(t){return t.map((function(t){return t&&t.name}))})),(0,I.P1)(At,(function(t){return t.map((function(t){return t&&t.id}))}))),Pt=((0,I.P1)(At,(function(t){return t.map((function(t){return t&&t.agentPictureUrl}))})),(0,I.P1)(tt,(function(t){return t&&t.isAgentTyping}))),Dt=(0,I.P1)(tt,(function(t){return t&&t.exitSurvey}))},51733:(t,e,r)=>{"use strict";r.d(e,{BC:()=>lt,C1:()=>J,DU:()=>K,Dc:()=>dt,Gd:()=>U,K6:()=>ft,Kw:()=>it,LP:()=>rt,Ol:()=>mt,Qc:()=>wt,S$:()=>ht,S5:()=>P,Sf:()=>R,TO:()=>ot,WJ:()=>F,XQ:()=>B,ZH:()=>I,b6:()=>S,be:()=>V,c0:()=>$,c4:()=>H,ch:()=>D,dX:()=>L,dY:()=>yt,db:()=>M,fB:()=>ct,g1:()=>q,ht:()=>A,jk:()=>C,jl:()=>vt,jn:()=>bt,m2:()=>pt,n8:()=>ut,pI:()=>et,pY:()=>E,qR:()=>st,vO:()=>_t,vh:()=>X,w:()=>Q,yk:()=>gt,yu:()=>Z,zI:()=>T,zp:()=>xt});var n=r(24302),a=r.n(n),o=r(20643),i=r.n(o),s=r(85066),c=r.n(s),l=r(29045),u=r.n(l),p=r(69113),f=r.n(p),m=r(82641),d=r.n(m),_=r(85820),h=r.n(_),b=r(44885),g=r(45455),y=r(1862),v=r(57003),x=r(1768),w=r(45461),k=r(3479),E=function(t){return t.getIn(["chat","startChatButtonType"])},C=function(t){return t.getIn(["chat","startChatError"])},T=function(t){return t.getIn(["chat","ifShowDownloadTranscriptButton"])},I=function(t){return t.getIn(["chat","transferMap"],h().Map()).toJS()},S=y.f8,A=(0,b.P1)(S,(function(t){return t===g.GC.AVAILABLE})),N=(0,b.P1)(y.ZJ,(function(t){return!d()(t.filter((function(t){return t.adapter.queueType===v._E.SYNC&&f()([g.GC.AVAILABLE,g.dl.WAITING,g.dl.CHATTING],t.state)})))})),O=(0,b.P1)(y.ZJ,(function(t){return!d()(u()(t,(function(t){return t.adapter.queueType===v._E.ASYNC&&f()([g.GC.AVAILABLE,g.dl.WAITING,g.dl.CHATTING],t.state)&&t.agentStatus!==v.LF.UNAVAILABLE})))})),P=(0,b.P1)(y.vY,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.some((function(t){return t.queueType===v._E.SYNC||t.routedSkill}))})),D=(0,b.P1)(N,O,(function(t,e){return t||e})),L=(0,b.P1)(y.vY,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.every((function(t){return t.skill===v.h7.NO_CHAT}))||0===t.length})),R=(0,b.P1)(D,P,y.ZJ,(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=r.filter((function(t){return f()([v._E.SYNC,v._E.ASYNC],t.adapter.queueType)}));if(0!==n.length)return[e,t,n.length].join("--")})),M=((0,b.P1)(y._v,(function(t){return c()(t,(function(t){return t.state===g.GC.AVAILABLE||t.state===g.dl.WAITING||t.state===g.dl.CHATTING}))})),(0,b.P1)(y.JE,(function(t){return t.map((function(t){return t.engagementId}))}))),X=(0,b.P1)(S,(function(t){return t===g.GC.STAND_BY})),Z=(0,b.P1)(S,(function(t){return t==g.dl.CHATTING||t==g.dl.WAITING})),U=(0,b.P1)(S,y.Hm,(function(){}