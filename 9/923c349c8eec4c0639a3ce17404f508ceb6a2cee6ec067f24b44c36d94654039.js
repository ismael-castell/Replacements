/*! For license information please see www-global.js.LICENSE.txt */
(()=>{var t,e={6866:(t,e)=>{"use strict";function n(t,e){if("string"!=typeof t||!e)return t;const n=t.indexOf("?")>-1,i=[];for(let t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return t+=(n?"&":"?")+i.join("&")}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithErrors=function(t,e){e&&(t=n(t,e.data));try{return fetch(t,e).then((t=>{if(t.status>=200&&t.status<300)return t;throw t}))}catch(t){}return i=t,new Promise(((t,e)=>{const n=new XMLHttpRequest;n.addEventListener("load",(()=>t({json(){try{return Promise.resolve(JSON.parse(n.responseText))}catch(t){return Promise.reject(t)}},text:()=>Promise.resolve(n.responseText)}))),n.addEventListener("error",(()=>e(n))),n.open("GET",i),n.send()}));var i},e.fetchJsonpWithErrors=function(t,{data:e,timeout:i}={timeout:5e3}){return new Promise(((i,o)=>{const r="jsonpCallback"+ +new Date;window[r]=function(t){i({ok:!0,status:200,json:()=>Promise.resolve(t)}),function(t){delete window[t]}(r),function(t){const e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}(r)},e||(e={}),e.callback=r,t=n(t,e);const a=document.createElement("script");a.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(a)}))}},3162:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(6866))},2871:(t,e,n)=>{"use strict";n(3009)},4440:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sampleConfig=void 0;const i=n(4164);e.sampleConfig={elements:i.sampleElements}},6456:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3009:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0;const i=n(9821);e.version="v1",(0,i.__exportStar)(n(4440),e),(0,i.__exportStar)(n(6456),e),(0,i.__exportStar)(n(4164),e),(0,i.__exportStar)(n(5213),e)},4164:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sampleElements=void 0,e.sampleElements=[{type:"bg"},{type:"sun"},{type:"moon"},{type:"clouds"},{type:"fog"},{type:"mist_bg"},{type:"darken"},{type:"lightning"},{type:"snow"},{type:"frost"},{type:"window"}]},5213:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2461:function(t){t.exports=function(){var t={610:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(59),e)},59:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTemperatureColor=void 0;var n={celsius:[[-80,[220,0,220]],[-39,[220,30,230]],[-29,[220,55,255]],[-24,[220,95,255]],[-19,[255,100,255]],[-14,[255,153,255]],[-9,[118,179,255]],[-4,[51,204,255]],[1,[30,200,80]],[5,[0,255,0]],[10,[220,255,0]],[15,[255,245,0]],[20,[253,200,2]],[25,[253,141,2]],[30,[252,79,1]],[35,[255,30,100]],[45,[255,0,150]]],fahrenheit:[[-112,[220,0,220]],[-39,[220,30,230]],[-19,[220,55,255]],[-9,[220,95,255]],[0,[255,100,255]],[10,[255,153,255]],[20,[118,179,255]],[30,[51,204,255]],[33,[30,200,80]],[40,[0,255,0]],[50,[220,255,0]],[60,[255,245,0]],[70,[253,200,2]],[80,[253,141,2]],[90,[252,79,1]],[100,[255,30,100]],[110,[255,0,150]]]};e.getTemperatureColor=function(t,e){for(var i=n[e?"fahrenheit":"celsius"],o=i.length-1;o>=0;o--)if(t>=i[o][0])return i[o][1];return[255,255,255]}},803:function(t,e,n){(e=n(645)(!1)).push([t.id,"@import url(https://radar.wo-cloud.com/fonts/roboto/WORoboto-swap-500.css);"]),e.push([t.id,".bold {\n  font-family: 'WORoboto';\n  font-weight: 500;\n}\n\n.snippet-text-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  user-select: none;\n}\n\n.city-point {\n  fill: #fff;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.city-name,\n.city-temperature {\n  alignment-baseline: central;\n}\n\n.city-name,\n.city-temperature,\n.city-wind-speed,\n.city-wind-unit {\n  text-anchor: middle;\n  white-space: pre;\n  paint-order: stroke;\n  stroke-width: 2px;\n  stroke-linejoin: round;\n}\n\n.city-temperature,\n.city-wind-speed,\n.city-wind-unit {\n  font-size: 13px;\n  letter-spacing: -0.5px;\n  stroke: #000;\n  fill: #fff;\n  font-family: 'WORoboto';\n  font-weight: 500;\n}\n.city-wind-speed,\n.city-wind-unit {\n  stroke: rgb(25, 25, 25);\n  fill: rgb(190, 190, 190);\n}\n.city-wind-unit {\n  font-size: 8px;\n  /* dominant-baseline: mathematical; */\n}\n",""]),t.exports=e},645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,i,o,r=t[1]||"",a=t[3];if(!a)return r;if(e&&"function"==typeof btoa){var s=(n=a,i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(o," */")),l=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[r].concat(l).concat([s]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},668:function(t,e,n){"use strict";n.r(e);var i=n(379),o=n.n(i),r=n(795),a=n.n(r),s=n(569),l=n.n(s),c=n(565),u=n.n(c),h=n(216),d=n.n(h),p=n(589),f=n.n(p),m=n(803),g=n.n(m),v={};for(var y in m)"default"!==y&&(v[y]=function(t){return m[t]}.bind(0,y));n.d(e,v);var _={};_.styleTagTransform=f(),_.setAttributes=u(),_.insert=l().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=d(),o()(g(),_),e.default=g()&&g().locals?g().locals:void 0},379:function(t){"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},a=[],s=0;s<t.length;s++){var l=t[s],c=i.base?l[0]+i.base:l[0],u=r[c]||0,h="".concat(c," ").concat(u);r[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(e[d].references++,e[d].updater(p)):e.push({identifier:h,updater:o(p,i),references:1}),a.push(h)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=n(r[a]);e[s].references--}for(var l=i(t,o),c=0;c<r.length;c++){var u=n(r[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}r=l}}},569:function(t){"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},565:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:function(t){"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i=n.css,o=n.media,r=n.sourceMap;o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},404:function(t){t.exports="data:image/svg+xml,%3csvg id='Ebene_1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3e%3cstyle%3e.st0%7bfill:%23FFFFFF;%7d%3c/style%3e%3cg id='_x39__av_full_screen_4_'%3e%3cpath class='st0' d='M30.12 9.88l-1.07 6.95-1.83-1.84-3.74 3.75-2.2-2.2 3.74-3.74-1.85-1.85zM9.88 30.12l1.07-6.95 1.83 1.84 3.75-3.75 2.19 2.2-3.74 3.74 1.85 1.85zM9.88 9.87l6.95 1.08-1.84 1.83 3.75 3.75-2.2 2.19-3.74-3.74-1.85 1.85zM30.12 30.13l-6.95-1.08 1.84-1.83-3.75-3.75 2.2-2.19 3.74 3.75 1.85-1.86z'/%3e%3c/g%3e%3c/svg%3e"},798:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeBodyMetadata=void 0,e.mergeBodyMetadata=function(t){for(var e={temperature:{},windvalues:{}},n=0,i=t;n<i.length;n++){var o=i[n];if(o.temperature)for(var r in o.temperature)o.temperature.hasOwnProperty(r)&&(e.temperature[r]=o.temperature[r]);if(o.windvalues)for(var r in o.windvalues)o.windvalues.hasOwnProperty(r)&&(e.windvalues[r]=o.windvalues[r])}return e}},606:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.distanceBetween=void 0,e.distanceBetween=function(t,e,n,i){var o=t*Math.PI/180,r=n*Math.PI/180,a=(n-t)*Math.PI/180,s=(i-e)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(o)*Math.cos(r)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3}},121:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundsAspectRatio=e.boundsToString=void 0,o(n(331),e),o(n(802),e);var r=n(406);Object.defineProperty(e,"boundsToString",{enumerable:!0,get:function(){return r.boundsToString}}),Object.defineProperty(e,"getBoundsAspectRatio",{enumerable:!0,get:function(){return r.getBoundsAspectRatio}}),o(n(747),e)},950:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MaximizeButton=void 0;var i=n(259),o=function(){function t(t){var e=n(404),o=new Image;o.src=e;var r="34px";i.applyStyle(o,{position:"absolute",right:"8px",bottom:"8px",width:r,height:r,background:"#10658e",borderRadius:"2px",cursor:"pointer",zIndex:"1"}),t.appendChild(o)}return t.init=function(e){return new t(e)},t}();e.MaximizeButton=o},194:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlacemarkPin=void 0;var i=n(259),o=function(){function t(t){this.el=document.createElement("div");var e=n(257).Z;i.applyStyle(this.el,{position:"absolute",zIndex:"1",width:"32px",height:"39px",left:"50%",top:"50%",marginLeft:"-7px",marginTop:"-34px",background:"url("+e+") center/contain no-repeat"}),t.appendChild(this.el)}return t.init=function(e){return new t(e)},t.prototype.updatePosition=function(t,e){i.applyStyle(this.el,{left:t+"px",top:e+"px"})},t}();e.PlacemarkPin=o},12:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetCities=void 0;var a=n(259),s=n(610),l=n(406),c=n(861);"undefined"!=typeof window&&window.document&&window.document.createElement&&Promise.resolve().then((function(){return r(n(668))}));var u=function(){function t(t,e,n){this.container=e,this.layer=n,this.contained=!0,this.visibilityDirty=!0,this.visible=!0,this.coloredTemperature=!0,this.coloredTemperature="WetterRadar"===n;var i=this.createCityPoint(t),o=this.name=this.createCityName(t);o.innerHTML=t.name,this.all=[i,o],t.temperatureCenter&&(this.temp=c.createSvgNode("text","city-temperature",{x:t.temperatureCenter.x,y:t.temperatureCenter.y}),this.temp.innerHTML=" ",this.all.push(this.temp)),t.windCenter&&(this.windSpeed=c.createSvgNode("tspan","city-wind-speed"),this.windUnit=c.createSvgNode("tspan","city-wind-unit"),this.wind=c.createSvgNode("text",void 0,{x:t.windCenter.x,y:t.windCenter.y}),this.wind.appendChild(this.windSpeed),this.wind.appendChild(this.windUnit),this.all.push(this.wind),this.wind.setAttribute("dy","2"));for(var r=0,a=this.all;r<a.length;r++){var s=a[r];this.container.appendChild(s)}}return t.prototype.createCityPoint=function(t){return c.createSvgNode("rect","city-point",{x:t.center.x-2,y:t.center.y-2,width:4,height:4})},t.prototype.createCityName=function(t){return c.createSvgNode("text","city-name",{x:t.nameCenter.x,y:t.nameCenter.y,"font-size":t.fontSize})},t.prototype.updateTemp=function(t,e){if(this.temp&&(this.temp.innerHTML=""+t,this.coloredTemperature)){var n=s.getTemperatureColor(t,e),i=n[0],o=n[1],r=n[2];a.applyStyle(this.temp,{fill:"rgb("+i+","+o+","+r+")"})}},t.prototype.updateWindSpeed=function(t,e,n){this.windSpeed&&this.windUnit?(this.windSpeed.textContent=""+e,this.windUnit.textContent=" "+n):console.warn("unable to find windspeed fields for city",t)},t.prototype.remove=function(){for(var t=0,e=this.all;t<e.length;t++){var n=e[t];this.container.removeChild(n)}},t.prototype.toggleVisibility=function(t,e){var n=!0,i=[];if(this.name&&i.push(l.domRectToRectangle(this.name.getBoundingClientRect())),"WetterRadar"!==this.layer&&"Temperature"!==this.layer||!this.temp||i.push(l.domRectToRectangle(this.temp.getBoundingClientRect())),"Gust"===this.layer&&this.wind&&i.push(l.domRectToRectangle(this.wind.getBoundingClientRect())),i.length)for(var o=0,r=i;o<r.length;o++){var s=r[o];if(!n)break;if(l.getRectangleOverlap(s,t)<.99){n=!1;break}if(e.length)for(var c=0,u=e;c<u.length;c++){var h=u[c];if(l.getRectangleOverlap(s,h)>0){n=!1;break}}}if(this.visible!==n){this.visible=n;for(var d=0,p=this.all;d<p.length;d++){var f=p[d];a.applyStyle(f,{visibility:n?"":"hidden"})}}},t}(),h=function(){function t(e,n){var i,o=this;this.config=e,this.customClass="egq"+t.id++,this.cities=new Map,this.cityIdMap=new Map,this.lastSize={x:0,y:0},this.nonSafeAreas=[],this.svg=c.createSvgNode("svg"),this.svg.classList.add("snippet-text-overlay"),this.svg.classList.add(this.customClass),n.appendChild(this.svg),null===(i=e.nonSafeAreas)||void 0===i||i.forEach((function(t){"string"==typeof t?document.querySelectorAll(t).forEach((function(t){return o.nonSafeAreas.push(t)})):o.nonSafeAreas.push(t)}))}return t.prototype.updateCustomCss=function(t){var e,n,i;null===(e=this.customCss)||void 0===e||e.remove();var o=null!==(n=t.fontStyle.color)&&void 0!==n?n:"#000",r=null!==(i=t.fontStyle.outline)&&void 0!==i?i:"unset",s="fill:"+o+";";r?(s+="stroke:"+r+";letter-spacing:0.1px;",this.svg.classList.add("bold")):this.svg.classList.remove("bold"),this.customCss=a.injectCSS("."+this.customClass+" .city-name{"+s+"}")},t.prototype.update=function(t,e){var n,i=this;this.updateCustomCss(t),this.svg.setAttribute("width",String(t.size.x)),this.svg.setAttribute("height",String(t.size.y)),this.lastSize.x===t.size.x&&this.lastSize.y===t.size.y||this.cities.forEach((function(t){return t.visibilityDirty=!0})),this.lastSize=t.size;var o=null!==(n=t.cities)&&void 0!==n?n:[];this.cities.forEach((function(t){return t.contained=!1}));for(var r=0,a=o;r<a.length;r++){var s=a[r],l=this.getCityKey(s),c=this.cities.get(l);if(c)c.contained=!0;else if(s.nameCenter){var h=new u(s,this.svg,this.config.layer);this.cities.set(l,h),this.cityIdMap.set(s.id,h)}}this.cities.forEach((function(t,e){t.contained||(t.remove(),i.cities.delete(e))})),this.updateTemperatures(e),this.updateWindSpeeds(e),this.updateVisibility()},t.prototype.updateTemperatures=function(t){var e="fahrenheit"===this.config.temperatureUnit;for(var n in t.temperature)if(t.temperature.hasOwnProperty(n)){var i=this.cityIdMap.get(n);if(i){var o=t.temperature[n];o=e?Math.round(9*o/5+32):Math.round(o),i.updateTemp(o,e)}}},t.prototype.updateWindSpeeds=function(t){var e,n,i=null!==(e=this.config.windUnit)&&void 0!==e?e:"kmh",o=null!==(n=this.config.windUnitTranslation)&&void 0!==n?n:"km/h";for(var r in t.windvalues)if(t.windvalues.hasOwnProperty(r)){var a=this.cityIdMap.get(r);if(a){var s=t.windvalues[r][i];a.updateWindSpeed(r,s,o)}}},t.prototype.updateVisibility=function(){var t=l.domRectToRectangle(this.svg.getBoundingClientRect()),e=this.nonSafeAreas.map((function(t){return l.domRectToRectangle(t.getBoundingClientRect())}));this.cities.forEach((function(n){n.visibilityDirty&&(n.visibilityDirty=!1,n.toggleVisibility(t,e))}))},t.prototype.getCityKey=function(t){return t.name+"_"+t.center.x+"_"+t.center.y},t.id=0,t}();e.SnippetCities=h},802:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},532:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetController=void 0;var a=n(798),s=n(12),l=n(254),c=n(259),u=function(){function t(t,e,n){this._data=t,this.config=e,this.parent=n,this.previousUpdateFinished=Promise.resolve()}return Object.defineProperty(t.prototype,"timeStep",{get:function(){return this._data.timeSteps[this._data.defaultTimeStep]},enumerable:!1,configurable:!0}),t.prototype.init=function(){return o(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.canvas=document.createElement("canvas"),c.applyStyle(this.canvas,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}),this.ctx=this.canvas.getContext("2d"),this.parent.appendChild(this.canvas),"Gust"===this.config.layer&&(this.windAnimation=new l.SnippetWindAnimation(this.parent)),this.cities=new s.SnippetCities(this.config,this.parent),[4,this.update(this._data)];case 1:return t.sent(),[2,this]}}))}))},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.update=function(t){return this._data=t,this.canvas.width===t.size.x&&this.canvas.height===t.size.y||(this.canvas.width=t.size.x,this.canvas.height=t.size.y),this.updateContent()},t.prototype.updateContent=function(){var t,e,n,s,l;return o(this,void 0,void 0,(function(){var o,c,u,h,d,p,f,m,g=this;return r(this,(function(r){switch(r.label){case 0:return o=this._data,[4,Promise.all(this.timeStep.tiles.map((function(t,e){return g.loadImageForTile(t).then((function(t){return i(i({},o.tiles[e]),{imgData:t})}))})))];case 1:return c=r.sent(),[4,this.previousUpdateFinished];case 2:for(r.sent(),null===(t=this.windAnimation)||void 0===t||t.clearTiles(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),u=0,h=c;u<h.length;u++)(d=h[u]).imgData&&(p=null!==(e=d.size)&&void 0!==e?e:512,f=d.imgData.img,this.ctx.drawImage(f,d.x,d.y,p,p),d.imgData.metadata.wind&&(null===(n=this.windAnimation)||void 0===n||n.updateTile(d.imgData.metadata.wind,d.x,d.y,p,p)));return this.previousUpdateFinished=null!==(l=null===(s=this.windAnimation)||void 0===s?void 0:s.finishTiles())&&void 0!==l?l:Promise.resolve(),m=a.mergeBodyMetadata(c.filter((function(t){return!!t.imgData})).map((function(t){return t.imgData.metadata}))),this.cities.update(this._data,m),[2]}}))}))},t.prototype.loadImageForTile=function(t){var e=this;return fetch(t.url).then((function(t){return t.arrayBuffer().then((function(e){return{res:t,buffer:e}}))})).then((function(t){var n=t.res,i=t.buffer;return new Promise((function(t){var a=new Image,s=e.extractMetadataFromBody(i,n.headers),l=s.imageLength,c=s.meta;a.onload=function(){return o(e,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return"decode"in a?[4,a.decode()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t({img:a,metadata:c}),[2]}}))}))},a.onerror=function(){return t(null)};var u=new DataView(i,0,l),h=new Blob([u],{type:n.headers.get("Content-Type")});a.src=URL.createObjectURL(h)}))}))},t.prototype.extractMetadataFromBody=function(t,e){var n={},i=t.byteLength;try{var o=e.get("X-Custom-Body");if(o)for(var r=o.split(","),a=new TextDecoder,s=r.length-1;s>=0;s--){var l=r[s].split(":"),c=parseInt(l[1]),u=l.length>1?l[2]:"json",h=i-c,d=new DataView(t,h,i-h);i=h;var p=void 0;"json"===u?p=JSON.parse(a.decode(d)):"png"===u?p=this.parseImage(d,"image/png"):console.log("unknown datatype",u),n[l[0]]=p}}catch(t){console.error(t)}return{meta:n,imageLength:i}},t.prototype.parseImage=function(t,e){var n=new Blob([t],{type:e}),i=URL.createObjectURL(n),o=new Image;return o.onerror=function(t){return console.error("error while loading",t)},o.src=i,o},t}();e.SnippetController=u},254:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetWindAnimation=void 0;var n=function(){function t(t){var e=this;this.windflowOffset=85,this.particleSize=2,this.maxLifespan=60,this.particleLength=30,this.speed=.12,this.gridSpacing=18,this.decreasePerDot=Math.round(255/this.particleLength),this.targetFps=30,this.msPerFrame=1e3/this.targetFps,this.particles=[],this.margin=0,this.offsetX=this.margin,this.offsetY=this.margin,this.previousTimeStamp=0,this.readyToDraw=!1,this.render=function(t){var n=performance.now();if(e.readyToDraw){e.renderCtx.clearRect(0,0,e.canvasRender.width,e.canvasRender.height);for(var i=255,o=e.particleLength;o>0;o--){var r=e.particleLength-o;e.renderCtx.beginPath();var a="rgba(255, 255, 255, "+Math.min(1,i/255)+")";e.renderCtx.strokeStyle=a;for(var s=0,l=e.particles;s<l.length;s++){var c=(y=l[s]).idx-r;if(!(c<=0||c>=e.maxLifespan)){var u=y.path[c-1],h=u[0],d=u[1],p=y.path[c],f=p[0],m=p[1];e.renderCtx.moveTo(h,d),e.renderCtx.lineTo(f,m)}}e.renderCtx.stroke(),i-=e.decreasePerDot}for(var g=0,v=e.particles;g<v.length;g++){var y;(y=v[g]).idx-e.maxLifespan>e.maxLifespan?y.idx=0:y.idx++}}e.previousTimeStamp=t;var _=performance.now()-n,w=Math.max(0,e.msPerFrame-_);setTimeout((function(){requestAnimationFrame(e.render)}),w)},this.calculatePathes=function(){for(var t=0,n=e.particles;t<n.length;t++)for(var i=n[t],o=i.origin,r=o[0],a=o[1],s=0;s<e.maxLifespan;s++){var l=e.windInputCtx.getImageData(r,a,1,1).data,c=l[0],u=l[1],h=(l[2],l[3],(e.windflowOffset-c)*e.speed),d=-(e.windflowOffset-u)*e.speed;r>=e.offsetX&&r<e.offsetX+e.viewportWidth&&a>=e.offsetY&&a<=e.offsetY+e.viewportHeight||(h=0,d=0),r-=h,a-=d,i.path.push([r,a,1])}},this.viewportWidth=t.clientWidth-2*this.margin,this.viewportHeight=t.clientHeight-2*this.margin,this.canvasWindInput=document.createElement("canvas"),this.canvasWindInput.width=t.clientWidth,this.canvasWindInput.height=t.clientHeight,this.windInputCtx=this.canvasWindInput.getContext("2d"),this.canvasRender=document.createElement("canvas"),this.canvasRender.width=this.canvasWindInput.width,this.canvasRender.height=this.canvasWindInput.height,this.renderCtx=this.canvasRender.getContext("2d"),this.canvasRender.style.position="absolute",this.canvasRender.style.top="0",this.canvasRender.style.left="0",this.canvasRender.style.right="0",this.canvasRender.style.bottom="0",this.canvasRender.style.zIndex="100%",this.renderCtx.lineWidth=this.particleSize,this.renderCtx.globalAlpha=.7,t.appendChild(this.canvasRender),requestAnimationFrame(this.render)}return t.prototype.updateTile=function(t,e,n,i,o){this.windInputCtx.drawImage(t,e,n,i,o)},t.prototype.clearTiles=function(){this.windInputCtx.clearRect(0,0,this.canvasWindInput.width,this.canvasWindInput.height)},t.prototype.finishTiles=function(){var t=this,e=performance.now();return this.readyToDraw=!1,new Promise((function(n){t.createParticles();var i=performance.now();console.log("created particles in:",i-e,"ms"),t.calculatePathes(),console.log("calculated pathes in:",performance.now()-i,"ms"),t.readyToDraw=!0,n()}))},t.prototype.createParticles=function(){this.particles.length=0;for(var t=0;t<=this.viewportWidth;t+=this.gridSpacing)for(var e=0;e<=this.viewportHeight;e+=this.gridSpacing){var n=Math.round(Math.random()*(2*this.maxLifespan)),i=Math.random()*this.gridSpacing/3,o=Math.random()*this.gridSpacing/3;0!==t&&t!==this.viewportWidth||(i=0),0!==e&&e!==this.viewportHeight||(o=0),t>=this.offsetX&&t<=this.offsetX+this.viewportWidth&&e>=this.offsetY&&e<=this.offsetY+this.viewportHeight&&this.particles.push({idx:-n,origin:[t+i,e+o],path:[],opacity:1})}},t}();e.SnippetWindAnimation=n},331:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Snippet=void 0;var a=n(950),s=n(194),l=n(532),c=n(259),u=n(406),h=n(747),d=function(){function t(t,e){this.parent=t,this.config=e,this.urlParams=new Map,this.active=!0}return t.init=function(e,n){return!e&&n.apiErrorCallback&&n.apiErrorCallback("No HTML element passed in"),new t(e,n).init()},t.prototype.init=function(){return o(this,void 0,void 0,(function(){var t=this;return r(this,(function(e){switch(e.label){case 0:try{"static"===getComputedStyle(this.parent).position&&c.applyStyle(this.parent,{position:"relative"})}catch(t){c.applyStyle(this.parent,{position:"relative"})}return window.addEventListener("resize",this.debounce((function(){return t.resize()}),300)),[4,this.initConfig()];case 1:return e.sent(),this._update=this._update.bind(this),[2,this]}}))}))},t.prototype.debounce=function(t,e){var n;return function(i){n&&clearTimeout(n),n=setTimeout((function(){return t()}),e,i)}},Object.defineProperty(t.prototype,"data",{get:function(){var t;return null===(t=this.ctrl)||void 0===t?void 0:t.data},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(){return this.config},t.prototype.initConfig=function(){return o(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return(t=this.config).lazyLoading&&"undefined"!=typeof IntersectionObserver&&this.initLazyLoading(),"latitude"in t&&"longitude"in t&&t.showPlacemarkPin&&(this.placemarkPin=s.PlacemarkPin.init(this.parent)),t.showMaximizeButton&&a.MaximizeButton.init(this.parent),[4,this.updateConfig(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.updateConfig=function(t){return o(this,void 0,void 0,(function(){var e,n;return r(this,(function(o){switch(o.label){case 0:switch(this.config=i(i({},this.config),t),e="",this.config.environment){case"dev":e="-dev";break;case"stage":e="-stage"}if(this.url="https://tiles"+e+".wo-cloud.com/snippet-tiles",this.urlParams.set("layergroup",this.config.layer),this.urlParams.set("highres","true"),!1===this.config.highRes&&(console.error("not using highres"),this.urlParams.delete("highres")),this.urlParams.delete("format"),h.webpSupported()&&this.urlParams.set("format","webp"),this.urlParams.delete("latitude"),this.urlParams.delete("longitude"),this.urlParams.delete("zoom"),this.urlParams.delete("bounds"),this.aspectRatio=void 0,"latitude"in this.config&&"longitude"in this.config){if((n=this.config).latitude>70||n.latitude<-70||n.longitude>180||n.longitude<-180)throw new Error("Invalid configuration (latitude or longitude is out of range)");this.urlParams.set("latitude",String(n.latitude)),this.urlParams.set("longitude",String(n.longitude)),n.zoom&&this.urlParams.set("zoom",String(n.zoom)),n.aspectRatio&&(this.aspectRatio=n.aspectRatio)}else n=this.config,this.urlParams.set("bounds",u.boundsToString(n.bounds)),n.adjustToAspectRatio&&(this.aspectRatio=u.getBoundsAspectRatio(n.bounds,n.maxAspectRatio,n.minAspectRatio));return this.urlParams.delete("warningtype"),this.config.warningType&&this.urlParams.set("warningtype",this.config.warningType),this.urlParams.delete("temperatureunit"),this.config.temperatureUnit&&this.urlParams.set("temperatureunit",this.config.temperatureUnit),this.urlParams.delete("highlight"),this.config.highlight&&this.urlParams.set("highlight",this.config.highlight),this.urlParams.delete("alltimesteps"),this.config.timeStep&&(this.urlParams.set("alltimesteps","true"),this.timeStep=this.config.timeStep),this.urlParams.delete("adjustviewport"),this.config.adjustViewport&&this.urlParams.set("adjustviewport","true"),this.setLayer(this.config.layer),[4,this.resize()];case 1:return o.sent(),[2]}}))}))},t.prototype.setLayer=function(t){this.urlParams.set("layergroup",t)},t.prototype.resize=function(){var t=this.parent.offsetWidth,e=this.parent.offsetHeight;return this.urlParams.set("width",String(t)),this.aspectRatio&&(e=Math.ceil(this.aspectRatio*t)),this.parent.style.height=e+"px",this.urlParams.set("height",String(e)),this.update()},t.prototype.update=function(){return o(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._update()];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),this.config.apiErrorCallback&&this.config.apiErrorCallback(t),[3,3];case 3:return[2]}}))}))},t.prototype.getUrl=function(){var t=[];return this.urlParams.forEach((function(e,n){return t.push([n,e])})),t.sort((function(t,e){var n=t[0],i=e[0];return n.localeCompare(i)})),this.url+"?"+t.map((function(t){return t[0]+"="+t[1]})).join("&")},t.prototype._update=function(){return o(this,void 0,void 0,(function(){var t,e,n,i,o,a,s,c=this;return r(this,(function(r){switch(r.label){case 0:return"0"!==this.urlParams.get("width")&&"0"!==this.urlParams.get("height")&&this.active?(t=this.getUrl(),[4,fetch(t)]):[2];case 1:if(200!==(e=r.sent()).status)throw e;return[4,e.json()];case 2:return n=r.sent(),"true"===this.urlParams.get("alltimesteps")&&this.timeStep&&(i=this.convertProdDate(this.timeStep),n.defaultTimeStep=n.timeSteps.findIndex((function(t){return c.convertUtcDate(t.time)===i})),-1===n.defaultTimeStep&&(o=this.urlParams.get("layergroup"),a=this.urlParams.get("warningtype"),console.error("Date not found ("+this.timeStep+" - "+i+")! - Falling back - "+o+" "+a),n.defaultTimeStep=0)),this.placemarkPin&&this.placemarkPin.updatePosition(n.requestedCenter.x,n.requestedCenter.y),this.ctrl?[4,this.ctrl.update(n)]:[3,4];case 3:return r.sent(),[3,6];case 4:return s=this,[4,new l.SnippetController(n,this.config,this.parent).init()];case 5:s.ctrl=r.sent(),r.label=6;case 6:return[2]}}))}))},t.prototype.convertUtcDate=function(t){return t.substring(0,4)+"-"+t.substring(5,7)+"-"+t.substring(8,10)},t.prototype.convertProdDate=function(t){return t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)},t.prototype.initLazyLoading=function(){var t=this;this.active=!1;var e=new IntersectionObserver((function(n){for(var i=0,o=n;i<o.length;i++){var r=o[i];r.target===t.parent&&r.isIntersecting&&(t.active=!0,t.update(),e.disconnect())}}),{threshold:.1,rootMargin:"100px"});e.observe(this.parent)},t}();e.Snippet=d},259:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectCSS=e.applyStyle=void 0,e.applyStyle=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])};var n=new Map;e.injectCSS=function(t,e){void 0===e&&(e=document.head);var i=n.get(t);if(i)return e.appendChild(i.el),i;var o=document.createElement("style");o.innerHTML=t,t&&e.appendChild(o);var r={el:o,remove:function(){n.delete(t),e.removeChild(o)}};return n.set(t,r),r}},861:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSvgNode=void 0,e.createSvgNode=function(t,e,n){var i=document.createElementNS("http://www.w3.org/2000/svg",t);if(e&&i.classList.add(e),n)for(var o in n)n.hasOwnProperty(o)&&i.setAttribute(o,n[o]);return i}},406:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundsAspectRatio=e.domRectToRectangle=e.getRectangleOverlap=e.boundsToString=void 0;var i=n(606);e.boundsToString=function(t){return[t.north,t.west,t.south,t.east].join(",")},e.getRectangleOverlap=function(t,e){if(e[0]>=t[1]||e[1]<=t[0]||e[2]>=t[3]||e[3]<=t[2])return 0;var n=(t[1]-t[0])*(t[3]-t[2]),i=[Math.max(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.min(t[3],e[3])];return(i[1]-i[0])*(i[3]-i[2])/n},e.domRectToRectangle=function(t){return[t.x,t.x+t.width,t.y,t.y+t.height]},e.getBoundsAspectRatio=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=.5);var o=i.distanceBetween(t.north,t.west,t.south,t.west),r=i.distanceBetween(t.north,t.west,t.north,t.east);return Math.min(e,Math.max(n,o/r))}},747:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.webpSupported=void 0,e.webpSupported=function(){return void 0===n&&(n=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}()),n}},257:function(t,e){"use strict";e.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA7CAYAAAA9xQlEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC3NJREFUeNrUWl1sHFcVPndmdnbXa8drJ3GI0xCaNk1Fq0AoSilBtAq8RCj0peKBB4QUVUKVQEi0VUlECRQlQIkQKlUQj4iCqIrUFipVEJKWhz6UpKkiFccRFXVsx3bs9c9m/+b3cs6dM+ubm7V3ndgpHelo1jN3Z77v/J+7Fqdg8cigCBQXJQKw8fN9KF/G6/vx0gBeGwwApj2AiRrAaTy/jtfO4L2GhNU76P0XUJ5qs05KCU7LGwB7swCPdQN8PUfERMIsRgkkdNcl3F6V8PkywGGUV5DU87ji7/AhHI4BnKzw6DqAY70A67ssXEDoiUCMVhHKMpCVi+JG8uE5CfvqAD/GW7+45QQEAyexAZ7sA/jpeoScz1tg96H+e1BsZFL3wVpogFUJFCEpFCeQ5Gi+7BESnkUS6/E537+lBIIEOMkjqPWjfQLB52ywB3vA2joAYmM/msUBWb4KYmIGxKUSwIIHoUhihkyYQysV0LdQC08hif/ip9/eDChSalenBLwkaAbRbY73CrBziMjqdcHasgGsT+4AceddiDAPcmIcZB5DqxGAVSsh8wjNJxR5C9/oZpIAQRLHMMDfxMvDN0ogRPl9h2stK9H+twoAH1fg0SVEdxY13wdi+50An9sH4qGvgth1H4jBzQB93SCyNlisKSsVJpET0I/P+45Mbq/oIDfG5AELKG93SgD9eAAt8HBWEBuxSCuDDpIvgOjfBLD5doyFIj49m8QDap4TU1NS27tCWfQArtpurmknlD6voPxwBaQtH2AXKn4naT7m3AoeRsbVKj5tAuTQWcz0J0GO/Adgbh6DGZ0ujJqBH7OkdcDG5yCQrfj3bqkliE4E0zacRhldSRCjpnYLyohW4nsxppe47IGYxGAdHgZRrYLMuiBLJZCXxkDOlEF6MaZToVKqSQCNowIb3WgP3n9JdOg6BP48yusrzUIy0ZYCr4RcqRqAGEUCYQhiakbRlNU6yKkFiK9UIYxjCBBp+p2IQQgti6A+tsmkmkftwPegXEQ5TCV9pQRQewV6Q8Ap0U+BYM63MeOIyQUVodKPIK6HEIUx+Ag+4O8ETAIMAigFju9lCdAidE54+gbAp4WsSiA8CkxV1ZL8QW5hI2CrEUJ6OcQFVI09flmDCcQpaMFV25IgY6jxrSWPPMoIyg9Q5m+0kOEbxlIt+gyCApmKVMZazDYxkwp4nccSNH0/UYCQzeAe4e6jpdtQoRpDeRKlfDOVGF9yDiUIqWezkqdTgAbc6TUJsIQaCZ/BUEETGLWCUiyhVkEO50ALbh08aX6CNV++2VYCwZ1HUMOxlPdK11HFNMY0GcQWFgmpnJheK9mZo2bgCk5jAosfeg0GOqXisBFhawRTePcdU/sW5/oSg59apW50Cl3hZS+W93ZRsGYsJIBnDFbOq8oGdErTJTVyFud8Am672DuR9tFqlWpIsfGyNFoJIlNBweoCR1YJfLOdRmAnahF8syeUt3UV8BKW5ShCNwhiZQ0ZSUXE4hi1yWUIOJJ10GoWEqDr9XIDKn48j1b6Fcd989iC8juU36zRPHAZh5TH5+rBC7nujJ1bl0d/tjGTSCQQosQqsEkorC2HxAEni+BpHV73Fmowe9WHagyH8HlDuttkeFB4by0HGtTWnxYC2O7Mekc3o1YLA3mwMm7S+yTzG0jKSoJ83VIEVWz4AdSvzMPUTA1K9fjn+JwTQhtRPdb6ybWeyPilx2Yb0Ww0WTn2sRj6+m7rA7cbG7pcFv0cGznHTnJ9jEWt4UGAM8L85VmYHJ+vlqrRM/j9n6UzLVXXV1Cea5GJVvMQL7YeKB7ErvKxvmLua8X+PBQHesEt9kAGJULg/nwFrk7Nwex0BUql2muYNX8tuY3Jc1vwFsqf13gaUy7digCXA+qT9qA29+X6st/IF9wdEfqDjQ1/veq97816L+Kff0Oyb+P6Wqjld5opZ2/BOEkErKVuooeHCOity8Wun7z6xXuOH9q2C+yX/grP7NwDr37pM8+O9Xcfwvtv4LoaPQTnaJjkrZAVgDdHAkuTViPD8rsS6aGmorwL45/YAMN3DEA2nwuLxSJs2rRJicxMhGf33QOVCxOw9f1JyOPAT5Z8FWWuM8Ba03qN4Vt1HbH2WZfFXQnTfd757HaY2bgOZgbWgVvD2SCTET09GAM4peVyOQxkW0QY2O/uvRum7xqEN147A2e8cCnA0ELLrTQOhpbNmSnWOvcmKefkIw9c98ZaIas+5DD/xwhaui4U3AK4eCYCcUjDcwB5P4TRQg7OCKude/Do3QRrG39bLSySFn69gwm09lyRcBrd+euDWCYtpaQiRd0pni0c2VQKVa2ESDrKQh5Oo/ah4bcCboJ1NLG1c7pGtLBAqnWfwadNcNOVnFZJWmrPoc8xAdfWUV9kI6kPPrgC09PlVhrXQWe4NDja2SSwnAulBBoGscQCUsq2qYokjpN2IoqwN8JphRq5ubkKVCp109dT0BnOB1kG7sLiXpjuUqKF++huFPFa4M+B9j2V69sO3ClwkiDAMRMnrjqOm7OzFSPzNrWc5bKQMwiYvi9aZCZ9jEhHkHRs10nzQBMvO/UpzdMSAp6SyKD2F7B5GxoaBSNIXQZe4KErJeAYLtMK9FLpUyyRQmVSB9q4kLqPLuP7viJDRByc48S1wWNp2k8JFJiAawC3ljO2IaG2d5AOgZG+UeDEbVwoiRbJloiVBeJrGzTdh1MCXZoLZZYIUjC1aQRuCIv7B7RBUOfPvr4V1WEQwzUxkAa2kTptI7uYbmNq2ixWZr4PGLQunlYLOAu1iQG6T+J5HoQ43CgCKiPFy5ne1LBl+LbUQOjgzU2PVOteK/CJC7UJATULy0UXIgLq7+u/FxnFJk2brYIzNCqrvtnRMM6+tn9m7mR2FsQ0WhJwsoCqB7E0p5RY89ma5j563k+DsqFpNTDABy0kNPogY1+ojQnofiKaBfhai4ITGloLOI2m98glrjJJnUCoWTDSQIdGSm2xudtJEAMBTwiQFSIE392dhZ13b4HhC+OyRXDqLUWs+fUCE6jytdDQsK5p2W5rkmOgjQWU/4OqAxTIZAHyDKrECF4vZI5WC1xOoQ4D8Rl8mQnUtZweG8ENKxmjHdnGhei+ZPdJM5GUGRj696hZxLJcvNahFHnL32G3qDD4suY+oRmQN7g32sYCyoFk4jpUxIgMshoZmQEt9+cYcC9KP58dBllj4BUtLUbttt1X2QLQLGKKSBiKjGOhW0WOAX4ja99h7dZ457xiaF5qPc5NEmjzjCSEFzMQHQ3Pt7gJzPEWUJHB97P/xwx8XtsSTbOOXM2tog4tsOhCJI16hARoi1eB72PwAxwHKfhZzXX030JWdZ+r44EmdSHSfK3mZ/CUan4Tyma2huRsM6OlTD3jrP7W4komspSA5wVZzW02c/YB1viUBr5mgF/1XUaHXGPZn/3xfsZ1lQWoFtA5DMIsB+0gLP6YV+G9rTkmUDGCdm02d//4wj+W3oVCL3/6yHfhwvB5qWchrMouu05XuhNDW/T848u8Bj6CNT6cDRsGll3w/HN/gIOPfsU+f26qGcQ96/L5XM7KNRqxz8FaYs3PaX4frJXbGFtAEpYSIvjEE49Dabbcq/pltSNBAS2LjiPqAwP5Mf6l9AqTKDP4cLXT5ZIE2twvHj/+y65/vvkvyu9QrVZVHIyPlawwtGf27/8CaXuarbDArhR20oTdKgKFAwf2D86VvA0UDxMTE2prcWqqnHvowb35++9/IHCcZr5v3GrwKk7bbKsMBkH900eOfG/b0PDZXRk3O+g16lM77vjUe4cP/2j01Km/nDt48NujCwtRx+3vav8+4LRZU3LdrpGjR0+Ely5dvFit+Lu7Cpl3t23bSQ3c+MaNWy7D4r9KfCiHaFfI/t8PCz7ix0eewP8EGAAP0Rvfa7omIgAAAABJRU5ErkJggg=="}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(121)}()},4700:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var r=[],a=i.document,s=Object.getPrototypeOf,l=r.slice,c=r.concat,u=r.push,h=r.indexOf,d={},p=d.toString,f=d.hasOwnProperty,m=f.toString,g=m.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},w={type:!0,src:!0,noModule:!0};function b(t,e,n){var i,o=(e=e||a).createElement("script");if(o.text=t,n)for(i in w)n[i]&&(o[i]=n[i]);e.head.appendChild(o).parentNode.removeChild(o)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[p.call(t)]||"object":typeof t}var T="3.3.1",S=function(t,e){return new S.fn.init(t,e)},C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function M(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}S.fn=S.prototype={jquery:T,constructor:S,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},S.extend=S.fn.extend=function(){var t,e,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(i=t[e])&&(c&&i&&(S.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&S.isPlainObject(n)?n:{},a[e]=S.extend(c,r,i)):void 0!==i&&(a[e]=i));return a},S.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==p.call(t))&&(!(e=s(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&m.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){b(t)},each:function(t,e){var n,i=0;if(M(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(C,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(M(Object(t))?S.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:h.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,a=!n;o<r;o++)!e(t[o],o)!==a&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,a=[];if(M(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&a.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&a.push(o);return c.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=r[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var P=function(t){var e,n,i,o,r,a,s,l,c,u,h,d,p,f,m,g,v,y,_,w="sizzle"+1*new Date,b=t.document,x=0,T=0,S=at(),C=at(),M=at(),P=function(t,e){return t===e&&(h=!0),0},k={}.hasOwnProperty,O=[],D=O.pop,L=O.push,A=O.push,E=O.slice,I=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\[[\\x20\\t\\r\\n\\f]*("+N+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+z+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",W=new RegExp(z+"+","g"),F=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Z=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),H=new RegExp(B),Y=new RegExp("^"+N+"$"),q={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){d()},ot=yt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{A.apply(O=E.call(b.childNodes),b.childNodes),O[b.childNodes.length].nodeType}catch(t){A={apply:O.length?function(t,e){L.apply(t,E.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function rt(t,e,i,o){var r,s,c,u,h,f,v,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return i;if(!o&&((e?e.ownerDocument||e:b)!==p&&d(e),e=e||p,m)){if(11!==x&&(h=K.exec(t)))if(r=h[1]){if(9===x){if(!(c=e.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(y&&(c=y.getElementById(r))&&_(e,c)&&c.id===r)return i.push(c),i}else{if(h[2])return A.apply(i,e.getElementsByTagName(t)),i;if((r=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return A.apply(i,e.getElementsByClassName(r)),i}if(n.qsa&&!M[t+" "]&&(!g||!g.test(t))){if(1!==x)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(et,nt):e.setAttribute("id",u=w),s=(f=a(t)).length;s--;)f[s]="#"+u+" "+vt(f[s]);v=f.join(","),y=$.test(t)&&mt(e.parentNode)||e}if(v)try{return A.apply(i,y.querySelectorAll(v)),i}catch(t){}finally{u===w&&e.removeAttribute("id")}}}return l(t.replace(F,"$1"),e,i,o)}function at(){var t=[];return function e(n,o){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function st(t){return t[w]=!0,t}function lt(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=e}function ut(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ft(t){return st((function(e){return e=+e,st((function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=rt.support={},r=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=rt.setDocument=function(t){var e,o,a=t?t.ownerDocument||t:b;return a!==p&&9===a.nodeType&&a.documentElement?(f=(p=a).documentElement,m=!r(p),b!==p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",it,!1):o.attachEvent&&o.attachEvent("onunload",it)),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=lt((function(t){return f.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(J,tt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(J,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=Q.test(p.querySelectorAll))&&(lt((function(t){f.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+R+")"),t.querySelectorAll("[id~="+w+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",B)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Q.test(f.compareDocumentPosition),_=e||Q.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===p||t.ownerDocument===b&&_(b,t)?-1:e===p||e.ownerDocument===b&&_(b,e)?1:u?I(u,t)-I(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],s=[e];if(!o||!r)return t===p?-1:e===p?1:o?-1:r?1:u?I(u,t)-I(u,e):0;if(o===r)return ut(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ut(a[i],s[i]):a[i]===b?-1:s[i]===b?1:0},p):p},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&d(t),e=e.replace(V,"='$1']"),n.matchesSelector&&m&&!M[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return rt(e,p,null,[t]).length>0},rt.contains=function(t,e){return(t.ownerDocument||t)!==p&&d(t),_(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==p&&d(t);var o=i.attrHandle[e.toLowerCase()],r=o&&k.call(i.attrHandle,e.toLowerCase())?o(t,e,!m):void 0;return void 0!==r?r:n.attributes||!m?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},rt.escape=function(t){return(t+"").replace(et,nt)},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,i=[],o=0,r=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[r++];)e===t[r]&&(o=i.push(r));for(;o--;)t.splice(i[o],1)}return u=null,t},o=rt.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},i=rt.selectors={cacheLength:50,createPseudo:st,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(J,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(J,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&H.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(J,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+z+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var o=rt.attr(i,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o.replace(W," ")+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,p,f,m=r!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(g){if(r){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(_=(p=(c=(u=(h=(d=g)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===e){u[t]=[x,p,_];break}}else if(y&&(_=p=(c=(u=(h=(d=e)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&c[1]),!1===_)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&((u=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,_]),d!==e)););return(_-=o)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var n,o=i.pseudos[t]||i.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return o[w]?o(e):o.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,n){for(var i,r=o(t,e),a=r.length;a--;)t[i=I(t,r[a])]=!(n[i]=r[a])})):function(t){return o(t,0,n)}):o}},pseudos:{not:st((function(t){var e=[],n=[],i=s(t.replace(F,"$1"));return i[w]?st((function(t,e,n,o){for(var r,a=i(t,null,o,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))})):function(t,o,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}})),has:st((function(t){return function(e){return rt(t,e).length>0}})),contains:st((function(t){return t=t.replace(J,tt),function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}})),lang:st((function(t){return Y.test(t||"")||rt.error("unsupported lang: "+t),t=t.replace(J,tt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft((function(){return[0]})),last:ft((function(t,e){return[e-1]})),eq:ft((function(t,e,n){return[n<0?n+e:n]})),even:ft((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ft((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ft((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:ft((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function gt(){}function vt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function yt(t,e,n){var i=e.dir,o=e.next,r=o||i,a=n&&"parentNode"===r,s=T++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,o);return!1}:function(e,n,l){var c,u,h,d=[x,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(u=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[r])&&c[0]===x&&c[1]===s)return d[2]=c[2];if(u[r]=d,d[2]=t(e,n,l))return!0}return!1}}function _t(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function wt(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(r=t[s])&&(n&&!n(r,i,o)||(a.push(r),c&&e.push(s)));return a}function bt(t,e,n,i,o,r){return i&&!i[w]&&(i=bt(i)),o&&!o[w]&&(o=bt(o,r)),st((function(r,a,s,l){var c,u,h,d=[],p=[],f=a.length,m=r||function(t,e,n){for(var i=0,o=e.length;i<o;i++)rt(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),g=!t||!r&&e?m:wt(m,d,t,s,l),v=n?o||(r?t:f||i)?[]:a:g;if(n&&n(g,v,s,l),i)for(c=wt(v,p),i(c,[],s,l),u=c.length;u--;)(h=c[u])&&(v[p[u]]=!(g[p[u]]=h));if(r){if(o||t){if(o){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(g[u]=h);o(null,v=[],c,l)}for(u=v.length;u--;)(h=v[u])&&(c=o?I(r,h):d[u])>-1&&(r[c]=!(a[c]=h))}}else v=wt(v===a?v.splice(f,v.length):v),o?o(null,a,v,l):A.apply(a,v)}))}function xt(t){for(var e,n,o,r=t.length,a=i.relative[t[0].type],s=a||i.relative[" "],l=a?1:0,u=yt((function(t){return t===e}),s,!0),h=yt((function(t){return I(e,t)>-1}),s,!0),d=[function(t,n,i){var o=!a&&(i||n!==c)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,o}];l<r;l++)if(n=i.relative[t[l].type])d=[yt(_t(d),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[w]){for(o=++l;o<r&&!i.relative[t[o].type];o++);return bt(l>1&&_t(d),l>1&&vt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(F,"$1"),n,l<o&&xt(t.slice(l,o)),o<r&&xt(t=t.slice(o)),o<r&&vt(t))}d.push(n)}return _t(d)}return gt.prototype=i.filters=i.pseudos,i.setFilters=new gt,a=rt.tokenize=function(t,e){var n,o,r,a,s,l,c,u=C[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=i.preFilter;s;){for(a in n&&!(o=U.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),n=!1,(o=Z.exec(s))&&(n=o.shift(),r.push({value:n,type:o[0].replace(F," ")}),s=s.slice(n.length)),i.filter)!(o=q[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),r.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return e?s.length:s?rt.error(t):C(t,l).slice(0)},s=rt.compile=function(t,e){var n,o=[],r=[],s=M[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=xt(e[n]))[w]?o.push(s):r.push(s);s=M(t,function(t,e){var n=e.length>0,o=t.length>0,r=function(r,a,s,l,u){var h,f,g,v=0,y="0",_=r&&[],w=[],b=c,T=r||o&&i.find.TAG("*",u),S=x+=null==b?1:Math.random()||.1,C=T.length;for(u&&(c=a===p||a||u);y!==C&&null!=(h=T[y]);y++){if(o&&h){for(f=0,a||h.ownerDocument===p||(d(h),s=!m);g=t[f++];)if(g(h,a||p,s)){l.push(h);break}u&&(x=S)}n&&((h=!g&&h)&&v--,r&&_.push(h))}if(v+=y,n&&y!==v){for(f=0;g=e[f++];)g(_,w,a,s);if(r){if(v>0)for(;y--;)_[y]||w[y]||(w[y]=D.call(l));w=wt(w)}A.apply(l,w),u&&!r&&w.length>0&&v+e.length>1&&rt.uniqueSort(l)}return u&&(x=S,c=b),_};return n?st(r):r}(r,o)),s.selector=t}return s},l=rt.select=function(t,e,n,o){var r,l,c,u,h,d="function"==typeof t&&t,p=!o&&a(t=d.selector||t);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&m&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(J,tt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=q.needsContext.test(t)?0:l.length;r--&&(c=l[r],!i.relative[u=c.type]);)if((h=i.find[u])&&(o=h(c.matches[0].replace(J,tt),$.test(l[0].type)&&mt(e.parentNode)||e))){if(l.splice(r,1),!(t=o.length&&vt(l)))return A.apply(n,o),n;break}}return(d||s(t,p))(o,e,!m,n,!e||$.test(t)&&mt(e.parentNode)||e),n},n.sortStable=w.split("").sort(P).join("")===w,n.detectDuplicates=!!h,d(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ct("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ct("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ct(R,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),rt}(i);S.find=P,S.expr=P.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=P.uniqueSort,S.text=P.getText,S.isXMLDoc=P.isXML,S.contains=P.contains,S.escapeSelector=P.escape;var k=function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&S(t).is(n))break;i.push(t)}return i},O=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},D=S.expr.match.needsContext;function L(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function E(t,e,n){return y(e)?S.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?S.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?S.grep(t,(function(t){return h.call(e,t)>-1!==n})):S.filter(e,t,n)}S.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?S.find.matchesSelector(i,t)?[i]:[]:S.find.matches(t,S.grep(e,(function(t){return 1===t.nodeType})))},S.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(S(t).filter((function(){for(e=0;e<i;e++)if(S.contains(o[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)S.find(t,o[e],n);return i>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(E(this,t||[],!1))},not:function(t){return this.pushStack(E(this,t||[],!0))},is:function(t){return!!E(this,"string"==typeof t&&D.test(t)?S(t):t||[],!1).length}});var I,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||I,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:R.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),A.test(i[1])&&S.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=a.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,I=S(a);var z=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function j(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,o=this.length,r=[],a="string"!=typeof t&&S(t);if(!D.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?S.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?h.call(S(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return j(t,"nextSibling")},prev:function(t){return j(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return O((t.parentNode||{}).firstChild,t)},children:function(t){return O(t.firstChild)},contents:function(t){return L(t,"iframe")?t.contentDocument:(L(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},(function(t,e){S.fn[t]=function(n,i){var o=S.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=S.filter(i,o)),this.length>1&&(N[t]||S.uniqueSort(o),z.test(t)&&o.reverse()),this.pushStack(o)}}));var B=/[^\x20\t\r\n\f]+/g;function W(t){return t}function F(t){throw t}function U(t,e,n,i){var o;try{t&&y(o=t.promise)?o.call(t).done(e).fail(n):t&&y(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(B)||[],(function(t,n){e[n]=!0})),e}(t):S.extend({},t);var e,n,i,o,r=[],a=[],s=-1,l=function(){for(o=o||t.once,i=e=!0;a.length;s=-1)for(n=a.shift();++s<r.length;)!1===r[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=r.length,n=!1);t.memory||(n=!1),e=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!e&&(s=r.length-1,a.push(n)),function e(n){S.each(n,(function(n,i){y(i)?t.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==x(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return S.each(arguments,(function(t,e){for(var n;(n=S.inArray(e,r,n))>-1;)r.splice(n,1),n<=s&&s--})),this},has:function(t){return t?S.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=a=[],n||e||(r=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return S.Deferred((function(n){S.each(e,(function(e,i){var o=y(t[i[4]])&&t[i[4]];r[i[1]]((function(){var t=o&&o.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,o){var r=0;function a(t,e,n,o){return function(){var s=this,l=arguments,c=function(){var i,c;if(!(t<r)){if((i=n.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(c)?o?c.call(i,a(r,e,W,o),a(r,e,F,o)):(r++,c.call(i,a(r,e,W,o),a(r,e,F,o),a(r,e,W,e.notifyWith))):(n!==W&&(s=void 0,l=[i]),(o||e.resolveWith)(s,l))}},u=o?c:function(){try{c()}catch(i){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(i,u.stackTrace),t+1>=r&&(n!==F&&(s=void 0,l=[i]),e.rejectWith(s,l))}};t?u():(S.Deferred.getStackHook&&(u.stackTrace=S.Deferred.getStackHook()),i.setTimeout(u))}}return S.Deferred((function(i){e[0][3].add(a(0,i,y(o)?o:W,i.notifyWith)),e[1][3].add(a(0,i,y(t)?t:W)),e[2][3].add(a(0,i,y(n)?n:F))})).promise()},promise:function(t){return null!=t?S.extend(t,o):o}},r={};return S.each(e,(function(t,i){var a=i[2],s=i[5];o[i[1]]=a.add,s&&a.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=a.fireWith})),o.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=l.call(arguments),r=S.Deferred(),a=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?l.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(U(t,r.done(a(n)).resolve,r.reject,!e),"pending"===r.state()||y(o[n]&&o[n].then)))return r.then();for(;n--;)U(o[n],a(n),r.reject);return r.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&Z.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){i.setTimeout((function(){throw t}))};var V=S.Deferred();function H(){a.removeEventListener("DOMContentLoaded",H),i.removeEventListener("load",H),S.ready()}S.fn.ready=function(t){return V.then(t).catch((function(t){S.readyException(t)})),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||V.resolveWith(a,[S]))}}),S.ready.then=V.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?i.setTimeout(S.ready):(a.addEventListener("DOMContentLoaded",H),i.addEventListener("load",H));var Y=function(t,e,n,i,o,r,a){var s=0,l=t.length,c=null==n;if("object"===x(n))for(s in o=!0,n)Y(t,e,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,y(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(S(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:c?e.call(t):l?e(t[0],n):r},q=/^-ms-/,G=/-([a-z])/g;function X(t,e){return e.toUpperCase()}function Q(t){return t.replace(q,"ms-").replace(G,X)}var K=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function $(){this.expando=S.expando+$.uid++}$.uid=1,$.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[Q(e)]=n;else for(i in e)o[Q(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Q(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Q):(e=Q(e))in i?[e]:e.match(B)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||S.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var J=new $,tt=new $,et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,nt=/[A-Z]/g;function it(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(nt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:et.test(t)?JSON.parse(t):t)}(n)}catch(t){}tt.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return tt.hasData(t)||J.hasData(t)},data:function(t,e,n){return tt.access(t,e,n)},removeData:function(t,e){tt.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=tt.get(r),1===r.nodeType&&!J.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=Q(i.slice(5)),it(r,i,o[i]));J.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each((function(){tt.set(this,t)})):Y(this,(function(e){var n;if(r&&void 0===e)return void 0!==(n=tt.get(r,t))||void 0!==(n=it(r,t))?n:void 0;this.each((function(){tt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){tt.remove(this,t)}))}}),S.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=S.queue(t,e),i=n.length,o=n.shift(),r=S._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,(function(){S.dequeue(t,e)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:S.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each((function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){S.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=S.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=J.get(r[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+ot+")([a-z%]*)$","i"),at=["Top","Right","Bottom","Left"],st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&S.contains(t.ownerDocument,t)&&"none"===S.css(t,"display")},lt=function(t,e,n,i){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];for(r in o=n.apply(t,i||[]),e)t.style[r]=a[r];return o};function ct(t,e,n,i){var o,r,a=20,s=i?function(){return i.cur()}:function(){return S.css(t,e,"")},l=s(),c=n&&n[3]||(S.cssNumber[e]?"":"px"),u=(S.cssNumber[e]||"px"!==c&&+l)&&rt.exec(S.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)S.style(t,e,u+c),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),u/=r;u*=2,S.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}var ut={};function ht(t){var e,n=t.ownerDocument,i=t.nodeName,o=ut[i];return o||(e=n.body.appendChild(n.createElement(i)),o=S.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),ut[i]=o,o)}function dt(t,e){for(var n,i,o=[],r=0,a=t.length;r<a;r++)(i=t[r]).style&&(n=i.style.display,e?("none"===n&&(o[r]=J.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&st(i)&&(o[r]=ht(i))):"none"!==n&&(o[r]="none",J.set(i,"display",n)));for(r=0;r<a;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}S.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){st(this)?S(this).show():S(this).hide()}))}});var pt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,mt=/^$|^module$|\/(?:java|ecma)script/i,gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&L(t,e)?S.merge([t],n):n}function yt(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td;var _t,wt,bt=/<|&#?\w+;/;function xt(t,e,n,i,o){for(var r,a,s,l,c,u,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((r=t[p])||0===r)if("object"===x(r))S.merge(d,r.nodeType?[r]:r);else if(bt.test(r)){for(a=a||h.appendChild(e.createElement("div")),s=(ft.exec(r)||["",""])[1].toLowerCase(),l=gt[s]||gt._default,a.innerHTML=l[1]+S.htmlPrefilter(r)+l[2],u=l[0];u--;)a=a.lastChild;S.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(e.createTextNode(r));for(h.textContent="",p=0;r=d[p++];)if(i&&S.inArray(r,i)>-1)o&&o.push(r);else if(c=S.contains(r.ownerDocument,r),a=vt(h.appendChild(r),"script"),c&&yt(a),n)for(u=0;r=a[u++];)mt.test(r.type||"")&&n.push(r);return h}_t=a.createDocumentFragment().appendChild(a.createElement("div")),(wt=a.createElement("input")).setAttribute("type","radio"),wt.setAttribute("checked","checked"),wt.setAttribute("name","t"),_t.appendChild(wt),v.checkClone=_t.cloneNode(!0).cloneNode(!0).lastChild.checked,_t.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!_t.cloneNode(!0).lastChild.defaultValue;var Tt=a.documentElement,St=/^key/,Ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Mt=/^([^.]*)(?:\.(.+)|)/;function Pt(){return!0}function kt(){return!1}function Ot(){try{return a.activeElement}catch(t){}}function Dt(t,e,n,i,o,r){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)Dt(t,s,n,i,e[s],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=kt;else if(!o)return t;return 1===r&&(a=o,o=function(t){return S().off(t),a.apply(this,arguments)},o.guid=a.guid||(a.guid=S.guid++)),t.each((function(){S.event.add(this,e,o,i,n)}))}S.event={global:{},add:function(t,e,n,i,o){var r,a,s,l,c,u,h,d,p,f,m,g=J.get(t);if(g)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&S.find.matchesSelector(Tt,o),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(B)||[""]).length;c--;)p=m=(s=Mt.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(h=S.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=S.event.special[p]||{},u=S.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,a)||t.addEventListener&&t.addEventListener(p,a)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),S.event.global[p]=!0)},remove:function(t,e,n,i,o){var r,a,s,l,c,u,h,d,p,f,m,g=J.hasData(t)&&J.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(B)||[""]).length;c--;)if(p=m=(s=Mt.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=S.event.special[p]||{},d=l[p=(i?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=d.length;r--;)u=d[r],!o&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||S.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)S.event.remove(t,p+e[c],n,i,!0);S.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,a,s=S.event.fix(t),l=new Array(arguments.length),c=(J.get(this,"events")||{})[s.type]||[],u=S.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=S.event.handlers.call(this,s,c),e=0;(o=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(i=((S.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,o,r,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],a={},n=0;n<l;n++)void 0===a[o=(i=e[n]).selector+" "]&&(a[o]=i.needsContext?S(o,this).index(c)>-1:S.find(o,this,null,[c]).length),a[o]&&r.push(i);r.length&&s.push({elem:c,handlers:r})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ot()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ot()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&L(this,"input"))return this.click(),!1},_default:function(t){return L(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Pt:kt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:kt,isPropagationStopped:kt,isImmediatePropagationStopped:kt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Pt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Pt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Pt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&St.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Ct.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||S.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),S.fn.extend({on:function(t,e,n,i){return Dt(this,t,e,n,i)},one:function(t,e,n,i){return Dt(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,S(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=kt),this.each((function(){S.event.remove(this,t,n,e)}))}});var Lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,At=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return L(t,"table")&&L(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function zt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var n,i,o,r,a,s,l,c;if(1===e.nodeType){if(J.hasData(t)&&(r=J.access(t),a=J.set(e,r),c=r.events))for(o in delete a.handle,a.events={},c)for(n=0,i=c[o].length;n<i;n++)S.event.add(e,o,c[o][n]);tt.hasData(t)&&(s=tt.access(t),l=S.extend({},s),tt.set(e,l))}}function Bt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&pt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Wt(t,e,n,i){e=c.apply([],e);var o,r,a,s,l,u,h=0,d=t.length,p=d-1,f=e[0],m=y(f);if(m||d>1&&"string"==typeof f&&!v.checkClone&&Et.test(f))return t.each((function(o){var r=t.eq(o);m&&(e[0]=f.call(this,o,r.html())),Wt(r,e,n,i)}));if(d&&(r=(o=xt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(s=(a=S.map(vt(o,"script"),zt)).length;h<d;h++)l=o,h!==p&&(l=S.clone(l,!0,!0),s&&S.merge(a,vt(l,"script"))),n.call(t[h],l,h);if(s)for(u=a[a.length-1].ownerDocument,S.map(a,Nt),h=0;h<s;h++)l=a[h],mt.test(l.type||"")&&!J.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&S._evalUrl(l.src):b(l.textContent.replace(It,""),u,l))}return t}function Ft(t,e,n){for(var i,o=e?S.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||S.cleanData(vt(i)),i.parentNode&&(n&&S.contains(i.ownerDocument,i)&&yt(vt(i,"script")),i.parentNode.removeChild(i));return t}S.extend({htmlPrefilter:function(t){return t.replace(Lt,"<$1></$2>")},clone:function(t,e,n){var i,o,r,a,s=t.cloneNode(!0),l=S.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(a=vt(s),i=0,o=(r=vt(t)).length;i<o;i++)Bt(r[i],a[i]);if(e)if(n)for(r=r||vt(t),a=a||vt(s),i=0,o=r.length;i<o;i++)jt(r[i],a[i]);else jt(t,s);return(a=vt(s,"script")).length>0&&yt(a,!l&&vt(t,"script")),s},cleanData:function(t){for(var e,n,i,o=S.event.special,r=0;void 0!==(n=t[r]);r++)if(K(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)o[i]?S.event.remove(n,i):S.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[tt.expando]&&(n[tt.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Ft(this,t,!0)},remove:function(t){return Ft(this,t)},text:function(t){return Y(this,(function(t){return void 0===t?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Wt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)}))},prepend:function(){return Wt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return S.clone(this,t,e)}))},html:function(t){return Y(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!gt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Wt(this,arguments,(function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(vt(this)),n&&n.replaceChild(e,this))}),t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){S.fn[t]=function(t){for(var n,i=[],o=S(t),r=o.length-1,a=0;a<=r;a++)n=a===r?this:this.clone(!0),S(o[a])[e](n),u.apply(i,n.get());return this.pushStack(i)}}));var Ut=new RegExp("^("+ot+")(?!px)[a-z%]+$","i"),Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Vt=new RegExp(at.join("|"),"i");function Ht(t,e,n){var i,o,r,a,s=t.style;return(n=n||Zt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||S.contains(t.ownerDocument,t)||(a=S.style(t,e)),!v.pixelBoxStyles()&&Ut.test(a)&&Vt.test(e)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function Yt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Tt.appendChild(c).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",s=36===e(t.right),o=36===e(t.width),u.style.position="absolute",r=36===u.offsetWidth||"absolute",Tt.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var n,o,r,s,l,c=a.createElement("div"),u=a.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r}}))}();var qt=/^(none|table(?!-c[ea]).+)/,Gt=/^--/,Xt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","Moz","ms"],$t=a.createElement("div").style;function Jt(t){var e=S.cssProps[t];return e||(e=S.cssProps[t]=function(t){if(t in $t)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Kt.length;n--;)if((t=Kt[n]+e)in $t)return t}(t)||t),e}function te(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,o,r){var a="width"===e?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=S.css(t,n+at[a],!0,o)),i?("content"===n&&(l-=S.css(t,"padding"+at[a],!0,o)),"margin"!==n&&(l-=S.css(t,"border"+at[a]+"Width",!0,o))):(l+=S.css(t,"padding"+at[a],!0,o),"padding"!==n?l+=S.css(t,"border"+at[a]+"Width",!0,o):s+=S.css(t,"border"+at[a]+"Width",!0,o));return!i&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-s-.5))),l}function ne(t,e,n){var i=Zt(t),o=Ht(t,e,i),r="border-box"===S.css(t,"boxSizing",!1,i),a=r;if(Ut.test(o)){if(!n)return o;o="auto"}return a=a&&(v.boxSizingReliable()||o===t.style[e]),("auto"===o||!parseFloat(o)&&"inline"===S.css(t,"display",!1,i))&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(o=parseFloat(o)||0)+ee(t,e,n||(r?"border":"content"),a,i,o)+"px"}function ie(t,e,n,i,o){return new ie.prototype.init(t,e,n,i,o)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ht(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=Q(e),l=Gt.test(e),c=t.style;if(l||(e=Jt(s)),a=S.cssHooks[e]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:c[e];"string"===(r=typeof n)&&(o=rt.exec(n))&&o[1]&&(n=ct(t,e,o),r="number"),null!=n&&n==n&&("number"===r&&(n+=o&&o[3]||(S.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var o,r,a,s=Q(e);return Gt.test(e)||(e=Jt(s)),(a=S.cssHooks[e]||S.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=Ht(t,e,i)),"normal"===o&&e in Qt&&(o=Qt[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),S.each(["height","width"],(function(t,e){S.cssHooks[e]={get:function(t,n,i){if(n)return!qt.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):lt(t,Xt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var o,r=Zt(t),a="border-box"===S.css(t,"boxSizing",!1,r),s=i&&ee(t,e,i,a,r);return a&&v.scrollboxSize()===r.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-ee(t,e,"border",!1,r)-.5)),s&&(o=rt.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),te(0,n,s)}}})),S.cssHooks.marginLeft=Yt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ht(t,"marginLeft"))||t.getBoundingClientRect().left-lt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(t,e){S.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+at[i]+e]=r[i]||r[i-2]||r[0];return o}},"margin"!==t&&(S.cssHooks[t+e].set=te)})),S.fn.extend({css:function(t,e){return Y(this,(function(t,e,n){var i,o,r={},a=0;if(Array.isArray(e)){for(i=Zt(t),o=e.length;a<o;a++)r[e[a]]=S.css(t,e[a],!1,i);return r}return void 0!==n?S.style(t,e,n):S.css(t,e)}),t,e,arguments.length>1)}}),S.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(S.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[S.cssProps[t.prop]]&&!S.cssHooks[t.prop]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=ie.prototype.init,S.fx.step={};var oe,re,ae=/^(?:toggle|show|hide)$/,se=/queueHooks$/;function le(){re&&(!1===a.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(le):i.setTimeout(le,S.fx.interval),S.fx.tick())}function ce(){return i.setTimeout((function(){oe=void 0})),oe=Date.now()}function ue(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=at[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function he(t,e,n){for(var i,o=(de.tweeners[e]||[]).concat(de.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,e,t))return i}function de(t,e,n){var i,o,r=0,a=de.prefilters.length,s=S.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var e=oe||ce(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),r=0,a=c.tweens.length;r<a;r++)c.tweens[r].run(i);return s.notifyWith(t,[c,i,n]),i<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:oe||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var i=S.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(!function(t,e){var n,i,o,r,a;for(n in t)if(o=e[i=Q(n)],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(a=S.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}(u,c.opts.specialEasing);r<a;r++)if(i=de.prefilters[r].call(c,t,u,c.opts))return y(i.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return S.map(u,he,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(de,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ct(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(B);for(var n,i=0,o=t.length;i<o;i++)n=t[i],de.tweeners[n]=de.tweeners[n]||[],de.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,o,r,a,s,l,c,u,h="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&st(t),g=J.get(t,"fxshow");for(i in n.queue||(null==(a=S._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,S.queue(t,"fx").length||a.empty.fire()}))}))),e)if(o=e[i],ae.test(o)){if(delete e[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||S.style(t,i)}if((l=!S.isEmptyObject(e))||!S.isEmptyObject(p))for(i in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=J.get(t,"display")),"none"===(u=S.css(t,"display"))&&(c?u=c:(dt([t],!0),c=t.style.display||c,u=S.css(t,"display"),dt([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===S.css(t,"float")&&(l||(d.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=J.access(t,"fxshow",{display:c}),r&&(g.hidden=!m),m&&dt([t],!0),d.done((function(){for(i in m||dt([t]),J.remove(t,"fxshow"),p)S.style(t,i,p[i])}))),l=he(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),S.speed=function(t,e,n){var i=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(t,e,n,i){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=S.isEmptyObject(t),r=S.speed(e,n,i),a=function(){var e=de(this,S.extend({},t),r);(o||J.get(this,"finish"))&&e.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,o=null!=t&&t+"queueHooks",r=S.timers,a=J.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&se.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||S.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=S.timers,a=i?i.length:0;for(n.finish=!0,S.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(t,e){var n=S.fn[e];S.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,i,o)}})),S.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){S.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(oe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),oe=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){re||(re=!0,le())},S.fx.stop=function(){re=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var o=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(o)}}))},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var pe,fe=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return Y(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){S.removeAttr(this,t)}))}}),S.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?S.prop(t,e,n):(1===r&&S.isXMLDoc(t)||(o=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:null==(i=S.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&L(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(B);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=fe[e]||S.find.attr;fe[e]=function(t,e,i){var o,r,a=e.toLowerCase();return i||(r=fe[a],fe[a]=o,o=null!=n(t,e,i)?a:null,fe[a]=r),o}}));var me=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function ve(t){return(t.match(B)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(B)||[]}S.fn.extend({prop:function(t,e){return Y(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[S.propFix[t]||t]}))}}),S.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&S.isXMLDoc(t)||(e=S.propFix[e]||e,o=S.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,i,o,r,a,s,l=0;if(y(t))return this.each((function(e){S(this).addClass(t.call(this,e,ye(this)))}));if((e=_e(t)).length)for(;n=this[l++];)if(o=ye(n),i=1===n.nodeType&&" "+ve(o)+" "){for(a=0;r=e[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(s=ve(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,o,r,a,s,l=0;if(y(t))return this.each((function(e){S(this).removeClass(t.call(this,e,ye(this)))}));if(!arguments.length)return this.attr("class","");if((e=_e(t)).length)for(;n=this[l++];)if(o=ye(n),i=1===n.nodeType&&" "+ve(o)+" "){for(a=0;r=e[a++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(s=ve(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){S(this).toggleClass(t.call(this,n,ye(this),e),e)})):this.each((function(){var e,o,r,a;if(i)for(o=0,r=S(this),a=_e(t);e=a[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||((e=ye(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ve(ye(n))+" ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g;S.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=y(t),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?t.call(this,n,S(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,(function(t){return null==t?"":t+""}))),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))}))):o?(e=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(we,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:ve(S.text(t))}},select:{get:function(t){var e,n,i,o=t.options,r=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?r+1:o.length;for(i=r<0?l:a?r:0;i<l;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!L(n.parentNode,"optgroup"))){if(e=S(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=S.makeArray(e),a=o.length;a--;)((i=o[a]).selected=S.inArray(S.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},v.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in i;var be=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,n,o){var r,s,l,c,u,h,d,p,m=[n||a],g=f.call(t,"type")?t.type:t,v=f.call(t,"namespace")?t.namespace.split("."):[];if(s=p=l=n=n||a,3!==n.nodeType&&8!==n.nodeType&&!be.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[S.expando]?t:new S.Event(g,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),d=S.event.special[g]||{},o||!d.trigger||!1!==d.trigger.apply(n,e))){if(!o&&!d.noBubble&&!_(n)){for(c=d.delegateType||g,be.test(c+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),l=s;l===(n.ownerDocument||a)&&m.push(l.defaultView||l.parentWindow||i)}for(r=0;(s=m[r++])&&!t.isPropagationStopped();)p=s,t.type=r>1?c:d.bindType||g,(h=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&h.apply(s,e),(h=u&&s[u])&&h.apply&&K(s)&&(t.result=h.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),e)||!K(n)||u&&y(n[g])&&!_(n)&&((l=n[u])&&(n[u]=null),S.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,xe),n[g](),t.isPropagationStopped()&&p.removeEventListener(g,xe),S.event.triggered=void 0,l&&(n[u]=l)),t.result}},simulate:function(t,e,n){var i=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(i,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each((function(){S.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),v.focusin||S.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){S.event.simulate(e,t.target,S.event.fix(t))};S.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=J.access(i,e);o||i.addEventListener(t,n,!0),J.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=J.access(i,e)-1;o?J.access(i,e,o):(i.removeEventListener(t,n,!0),J.remove(i,e))}}}));var Te=i.location,Se=Date.now(),Ce=/\?/;S.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),e};var Me=/\[\]$/,Pe=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,i){var o;if(Array.isArray(e))S.each(e,(function(e,o){n||Me.test(t)?i(t,o):De(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,n,i)}));else if(n||"object"!==x(e))i(t,e);else for(o in e)De(t+"["+o+"]",e[o],n,i)}S.param=function(t,e){var n,i=[],o=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,(function(){o(this.name,this.value)}));else for(n in t)De(n,t[n],e,o);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&Oe.test(this.nodeName)&&!ke.test(t)&&(this.checked||!pt.test(t))})).map((function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}})):{name:e.name,value:n.replace(Pe,"\r\n")}})).get()}});var Le=/%20/g,Ae=/#.*$/,Ee=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,ze=/^\/\//,Ne={},je={},Be="*/".concat("*"),We=a.createElement("a");function Fe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(B)||[];if(y(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ue(t,e,n,i){var o={},r=t===je;function a(s){var l;return o[s]=!0,S.each(t[s]||[],(function(t,s){var c=s(e,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)})),l}return a(e.dataTypes[0])||!o["*"]&&a("*")}function Ze(t,e){var n,i,o=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&S.extend(!0,t,i),t}We.href=Te.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ze(Ze(t,S.ajaxSettings),e):Ze(S.ajaxSettings,t)},ajaxPrefilter:Fe(Ne),ajaxTransport:Fe(je),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,r,s,l,c,u,h,d,p,f=S.ajaxSetup({},e),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?S(m):S.event,v=S.Deferred(),y=S.Callbacks("once memory"),_=f.statusCode||{},w={},b={},x="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=Ie.exec(r);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(t,e){return null==u&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==u&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)T.always(t[T.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),C(0,e),this}};if(v.promise(T),f.url=((t||f.url||Te.href)+"").replace(ze,Te.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(B)||[""],null==f.crossDomain){c=a.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=We.protocol+"//"+We.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Ue(Ne,f,e,T),u)return T;for(d in(h=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Re.test(f.type),o=f.url.replace(Ae,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Le,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(Ce.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Ee,"$1"),p=(Ce.test(o)?"&":"?")+"_="+Se+++p),f.url=o+p),f.ifModified&&(S.lastModified[o]&&T.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&T.setRequestHeader("If-None-Match",S.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Be+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(m,T,f)||u))return T.abort();if(x="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=Ue(je,f,e,T)){if(T.readyState=1,h&&g.trigger("ajaxSend",[T,f]),u)return T;f.async&&f.timeout>0&&(l=i.setTimeout((function(){T.abort("timeout")}),f.timeout));try{u=!1,n.send(w,C)}catch(t){if(u)throw t;C(-1,t)}}else C(-1,"No Transport");function C(t,e,a,s){var c,d,p,w,b,x=e;u||(u=!0,l&&i.clearTimeout(l),n=void 0,r=s||"",T.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(w=function(t,e,n){for(var i,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),n[r]}(f,T,a)),w=function(t,e,n,i){var o,r,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if((s=o.split(" "))[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(f,w,T,c),c?(f.ifModified&&((b=T.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=b),(b=T.getResponseHeader("etag"))&&(S.etag[o]=b)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=w.state,d=w.data,c=!(p=w.error))):(p=x,!t&&x||(x="error",t<0&&(t=0))),T.status=t,T.statusText=(e||x)+"",c?v.resolveWith(m,[d,x,T]):v.rejectWith(m,[T,x,p]),T.statusCode(_),_=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[T,f,c?d:p]),y.fireWith(m,[T,x]),h&&(g.trigger("ajaxComplete",[T,f]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],(function(t,e){S[e]=function(t,n,i,o){return y(n)&&(o=o||i,i=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:o,data:n,success:i},S.isPlainObject(t)&&t))}})),S._evalUrl=function(t){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){S(this).wrapInner(t.call(this,e))})):this.each((function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){S(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Ve={0:200,1223:204},He=S.ajaxSettings.xhr();v.cors=!!He&&"withCredentials"in He,v.ajax=He=!!He,S.ajaxTransport((function(t){var e,n;if(v.cors||He&&!t.crossDomain)return{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Ve[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),S.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),S.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain)return{send:function(i,o){e=S("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ye,qe=[],Ge=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=qe.pop()||S.expando+"_"+Se++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",(function(t,e,n){var o,r,a,s=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ge,"$1"+o):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||S.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=i[o],i[o]=function(){a=arguments},n.always((function(){void 0===r?S(i).removeProp(o):i[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,qe.push(o)),a&&y(r)&&r(a[0]),a=r=void 0})),"script"})),v.createHTMLDocument=((Ye=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ye.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(i)):e=a),r=!n&&[],(o=A.exec(t))?[e.createElement(o[1])]:(o=xt([t],e,r),r&&r.length&&S(r).remove(),S.merge([],o.childNodes)));var i,o,r},S.fn.load=function(t,e,n){var i,o,r,a=this,s=t.indexOf(" ");return s>-1&&(i=ve(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&S.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done((function(t){r=arguments,a.html(i?S("<div>").append(S.parseHTML(t)).find(i):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,r||[t.responseText,e,t])}))}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){S.fn[e]=function(t){return this.on(e,t)}})),S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(t,e,n){var i,o,r,a,s,l,c=S.css(t,"position"),u=S(t),h={};"static"===c&&(t.style.position="relative"),s=u.offset(),r=S.css(t,"top"),l=S.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(a=(i=u.position()).top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),y(e)&&(e=e.call(t,n,S.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+o),"using"in e?e.using.call(t,h):u.css(h)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===S.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((o=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),o.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-S.css(i,"marginTop",!0),left:e.left-o.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||Tt}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;S.fn[t]=function(i){return Y(this,(function(t,i,o){var r;if(_(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o}),t,i,arguments.length)}})),S.each(["top","left"],(function(t,e){S.cssHooks[e]=Yt(v.pixelPosition,(function(t,n){if(n)return n=Ht(t,e),Ut.test(n)?S(t).position()[e]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){S.fn[i]=function(o,r){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===r?"margin":"border");return Y(this,(function(e,n,o){var r;return _(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?S.css(e,n,s):S.style(e,n,o,s)}),e,a?o:void 0,a)}}))})),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),S.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),S.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=l.call(arguments,2),o=function(){return t.apply(e||this,i.concat(l.call(arguments)))},o.guid=t.guid=t.guid||S.guid++,o},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=L,S.isFunction=y,S.isWindow=_,S.camelCase=Q,S.type=x,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(n=function(){return S}.apply(e,[]))||(t.exports=n);var Xe=i.jQuery,Qe=i.$;return S.noConflict=function(t){return i.$===S&&(i.$=Qe),t&&i.jQuery===S&&(i.jQuery=Xe),S},o||(i.jQuery=i.$=S),S}))},4291:(t,e,n)=>{var i,o;!function(r){if(void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o),!0,t.exports=r(),!!0){var a=window.Cookies,s=window.Cookies=r();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}return function e(n){function i(e,o,r){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(r=t({path:"/"},i.defaults,r)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}r.expires=r.expires?r.expires.toUTCString():"";try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(t){}o=n.write?n.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var c in r)r[c]&&(l+="; "+c,!0!==r[c]&&(l+="="+r[c]));return document.cookie=e+"="+o+l}e||(a={});for(var u=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var p=u[d].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var m=p[0].replace(h,decodeURIComponent);if(f=n.read?n.read(f,m):n(f,m)||f.replace(h,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(t){}if(e===m){a=f;break}e||(a[m]=f)}catch(t){}}return a}}return i.set=i,i.get=function(t){return i.call(i,t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,n){i(e,"",t(n,{expires:-1}))},i.withConverter=e,i}((function(){}))}))},1584:function(t,e){!function(t){"use strict";var e="1.8.0";function n(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function a(t){return"_leaflet_id"in t||(t._leaflet_id=++r),t._leaflet_id}function s(t,e,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)},r}function l(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o}function c(){return!1}function u(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var T=window.requestAnimationFrame||w("RequestAnimationFrame")||x,S=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,n){if(!n||T!==x)return T.call(window,o(t,e));t.call(e)}function M(t){t&&S.call(window,t)}var P={__proto__:null,extend:n,create:i,bind:o,get lastId(){return r},stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:T,cancelFn:S,requestAnimFrame:C,cancelAnimFrame:M};function k(){}function O(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}k.extend=function(t){var e=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,r=i(o);for(var a in r.constructor=e,e.prototype=r,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&n(e,t.statics),t.includes&&(O(t.includes),n.apply(null,[r].concat(t.includes))),n(r,t),delete r.statics,delete r.includes,r.options&&(r.options=o.options?i(o.options):{},n(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},k.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},k.mergeOptions=function(t){return n(this.prototype.options,t),this},k.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var D={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,r=(t=d(t)).length;o<r;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=d(t);for(var o=1===arguments.length,r=0,a=t.length;r<a;r++)o?this._off(t[r]):this._off(t[r],e,n)}else delete this._events;return this},_on:function(t,e,n){if("function"==typeof e){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(o)}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t]))if(1!==arguments.length)if(n===this&&(n=void 0),"function"==typeof e){for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return this._firingCount&&(a.fn=c,this._events[t]=i=i.slice()),void i.splice(o,1)}console.warn("listener not found")}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(o=0,r=i.length;o<r;o++)i[o].fn=c;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){"string"!=typeof t&&console.warn('"string" type argument expected');var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var r=o((function(){this.off(t,e,n).off(t,r,n)}),this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var A=k.extend(D);function E(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var I=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof E?t:v(t)?new E(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new E(t.x,t.y):new E(t,e,n)}function z(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function N(t,e){return!t||t instanceof z?t:new z(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function B(t,e){return t instanceof j?t:new j(t,e)}function W(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof W?t:v(t)&&"object"!=typeof t[0]?3===t.length?new W(t[0],t[1],t[2]):2===t.length?new W(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new W(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new W(t,e,n)}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new E(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new E(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},z.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new E((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new E(this.min.x,this.max.y)},getTopRight:function(){return new E(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof E?R(t):N(t))instanceof z?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},overlaps:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,a=o.y>e.y&&i.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof W)e=t,n=t;else{if(!(t instanceof j))return t?this.extend(F(t)||B(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new W(e.lat,e.lng),this._northEast=new W(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new j(new W(e.lat-i,e.lng-o),new W(n.lat+i,n.lng+o))},getCenter:function(){return new W((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new W(this.getNorth(),this.getWest())},getSouthEast:function(){return new W(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof W||"lat"in t?F(t):B(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=B(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},overlaps:function(t){t=B(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,a=o.lng>e.lng&&i.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=B(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},W.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,F(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return B([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new W(this.lat,this.lng,this.alt)}};var U,Z={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new z(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new W(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast();return new j(new W(r.lat-i,r.lng-o),new W(a.lat-i,a.lng-o))}},V=n({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=r*r+Math.cos(i)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H=6378137,Y={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new E(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new W((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=H*Math.PI,new z([-U,-U],[U,U]))};function q(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function G(t,e,n,i){return new q(t,e,n,i)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new E((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X=n({},V,{code:"EPSG:3857",projection:Y,transformation:function(){var t=.5/(Math.PI*Y.R);return G(t,.5,-t,.5)}()}),Q=n({},X,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var n,i,o,r,a,s,l="";for(n=0,o=t.length;n<o;n++){for(i=0,r=(a=t[n]).length;i<r;i++)l+=(i?"L":"M")+(s=a[i]).x+" "+s.y;l+=e?zt.svg?"z":"x":""}return l||"M0 0"}var J,tt=document.documentElement.style,et="ActiveXObject"in window,nt=et&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),ot=Rt("webkit"),rt=Rt("android"),at=Rt("android 2")||Rt("android 3"),st=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=rt&&Rt("Google")&&st<537&&!("AudioNode"in window),ct=!!window.opera,ut=!it&&Rt("chrome"),ht=Rt("gecko")&&!ot&&!ct&&!et,dt=!ut&&Rt("safari"),pt=Rt("phantom"),ft="OTransition"in tt,mt=0===navigator.platform.indexOf("Win"),gt=et&&"transition"in tt,vt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,yt="MozPerspective"in tt,_t=!window.L_DISABLE_3D&&(gt||vt||yt)&&!ft&&!pt,wt="undefined"!=typeof orientation||Rt("mobile"),bt=wt&&ot,xt=wt&&vt,Tt=!window.PointerEvent&&window.MSPointerEvent,St=!(!window.PointerEvent&&!Tt),Ct="ontouchstart"in window||!!window.TouchEvent,Mt=!window.L_NO_TOUCH&&(Ct||St),Pt=wt&&ct,kt=wt&&ht,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),Lt=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!K("svg").createSVGRect),Et=!!At&&((J=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(J.firstChild&&J.firstChild.namespaceURI)),It=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Rt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var zt={ie:et,ielt9:nt,edge:it,webkit:ot,android:rt,android23:at,androidStock:lt,opera:ct,chrome:ut,gecko:ht,safari:dt,phantom:pt,opera12:ft,win:mt,ie3d:gt,webkit3d:vt,gecko3d:yt,any3d:_t,mobile:wt,mobileWebkit:bt,mobileWebkit3d:xt,msPointer:Tt,pointer:St,touch:Mt,touchNative:Ct,mobileOpera:Pt,mobileGecko:kt,retina:Ot,passiveEvents:Dt,canvas:Lt,svg:At,vml:It,inlineSvg:Et},Nt=zt.msPointer?"MSPointerDown":"pointerdown",jt=zt.msPointer?"MSPointerMove":"pointermove",Bt=zt.msPointer?"MSPointerUp":"pointerup",Wt=zt.msPointer?"MSPointerCancel":"pointercancel",Ft={touchstart:Nt,touchmove:jt,touchend:Bt,touchcancel:Wt},Ut={touchstart:$t,touchmove:Kt,touchend:Kt,touchcancel:Kt},Zt={},Vt=!1;function Ht(t,e,n){return"touchstart"===e&&Qt(),Ut[e]?(n=Ut[e].bind(this,n),t.addEventListener(Ft[e],n,!1),n):(console.warn("wrong event specified:",e),L.Util.falseFn)}function Yt(t,e,n){Ft[e]?t.removeEventListener(Ft[e],n,!1):console.warn("wrong event specified:",e)}function qt(t){Zt[t.pointerId]=t}function Gt(t){Zt[t.pointerId]&&(Zt[t.pointerId]=t)}function Xt(t){delete Zt[t.pointerId]}function Qt(){Vt||(document.addEventListener(Nt,qt,!0),document.addEventListener(jt,Gt,!0),document.addEventListener(Bt,Xt,!0),document.addEventListener(Wt,Xt,!0),Vt=!0)}function Kt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Zt)e.touches.push(Zt[n]);e.changedTouches=[e],t(e)}}function $t(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&qe(e),Kt(t,e)}function Jt(t){var e,n,i={};for(n in t)e=t[n],i[n]=e&&e.bind?e.bind(t):e;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var te=200;function ee(t,e){t.addEventListener("dblclick",e);var n,i=0;function o(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var o=Date.now();o-i<=te?2==++n&&e(Jt(t)):n=1,i=o}}else n=t.detail}return t.addEventListener("click",o),{dblclick:e,simDblclick:o}}function ne(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ie,oe,re,ae,se,le=Ce(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ce=Ce(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ue="webkitTransition"===ce||"OTransition"===ce?ce+"End":"transitionend";function he(t){return"string"==typeof t?document.getElementById(t):t}function de(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function pe(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function fe(t){var e=t.parentNode;e&&e.removeChild(t)}function me(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ge(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ve(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ye(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=xe(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function _e(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!ye(t,e)){var r=xe(t);be(t,(r?r+" ":"")+e)}}function we(t,e){void 0!==t.classList?t.classList.remove(e):be(t,h((" "+xe(t)+" ").replace(" "+e+" "," ")))}function be(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function xe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Te(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Se(t,e)}function Se(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function Ce(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Me(t,e,n){var i=e||new E(0,0);t.style[le]=(zt.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Pe(t,e){t._leaflet_pos=e,zt.any3d?Me(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ke(t){return t._leaflet_pos||new E(0,0)}if("onselectstart"in document)ie=function(){Ne(window,"selectstart",qe)},oe=function(){Be(window,"selectstart",qe)};else{var Oe=Ce(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ie=function(){if(Oe){var t=document.documentElement.style;re=t[Oe],t[Oe]="none"}},oe=function(){Oe&&(document.documentElement.style[Oe]=re,re=void 0)}}function De(){Ne(window,"dragstart",qe)}function Le(){Be(window,"dragstart",qe)}function Ae(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ee(),ae=t,se=t.style.outline,t.style.outline="none",Ne(window,"keydown",Ee))}function Ee(){ae&&(ae.style.outline=se,ae=void 0,se=void 0,Be(window,"keydown",Ee))}function Ie(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Re(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ze={__proto__:null,TRANSFORM:le,TRANSITION:ce,TRANSITION_END:ue,get:he,getStyle:de,create:pe,remove:fe,empty:me,toFront:ge,toBack:ve,hasClass:ye,addClass:_e,removeClass:we,setClass:be,getClass:xe,setOpacity:Te,testProp:Ce,setTransform:Me,setPosition:Pe,getPosition:ke,get disableTextSelection(){return ie},get enableTextSelection(){return oe},disableImageDrag:De,enableImageDrag:Le,preventOutline:Ae,restoreOutline:Ee,getSizedParentNode:Ie,getScale:Re};function Ne(t,e,n,i){if(e&&"object"==typeof e)for(var o in e)Ue(t,o,e[o],n);else for(var r=0,a=(e=d(e)).length;r<a;r++)Ue(t,e[r],n,i);return this}var je="_leaflet_events";function Be(t,e,n,i){if(1===arguments.length)We(t),delete t[je];else if(e&&"object"==typeof e)for(var o in e)Ze(t,o,e[o],n);else if(e=d(e),2===arguments.length)We(t,(function(t){return-1!==y(e,t)}));else for(var r=0,a=e.length;r<a;r++)Ze(t,e[r],n,i);return this}function We(t,e){for(var n in t[je]){var i=n.split(/\d/)[0];e&&!e(i)||Ze(t,i,null,null,n)}}var Fe={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ue(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):"");if(t[je]&&t[je][o])return this;var r=function(e){return n.call(i||t,e||window.event)},s=r;!zt.touchNative&&zt.pointer&&0===e.indexOf("touch")?r=Ht(t,e,r):zt.touch&&"dblclick"===e?r=ee(t,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Fe[e]||e,r,!!zt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,$e(t,e)&&s(e)},t.addEventListener(Fe[e],r,!1)):t.addEventListener(e,s,!1):t.attachEvent("on"+e,r),t[je]=t[je]||{},t[je][o]=r}function Ze(t,e,n,i,o){o=o||e+a(n)+(i?"_"+a(i):"");var r=t[je]&&t[je][o];if(!r)return this;!zt.touchNative&&zt.pointer&&0===e.indexOf("touch")?Yt(t,e,r):zt.touch&&"dblclick"===e?ne(t,r):"removeEventListener"in t?t.removeEventListener(Fe[e]||e,r,!1):t.detachEvent("on"+e,r),t[je][o]=null}function Ve(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function He(t){return Ue(t,"wheel",Ve),this}function Ye(t){return Ne(t,"mousedown touchstart dblclick contextmenu",Ve),t._leaflet_disable_click=!0,this}function qe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ge(t){return qe(t),Ve(t),this}function Xe(t,e){if(!e)return new E(t.clientX,t.clientY);var n=Re(e),i=n.boundingClientRect;return new E((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Qe=zt.win&&zt.chrome?2*window.devicePixelRatio:zt.gecko?window.devicePixelRatio:1;function Ke(t){return zt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Qe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function $e(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Je={__proto__:null,on:Ne,off:Be,stopPropagation:Ve,disableScrollPropagation:He,disableClickPropagation:Ye,preventDefault:qe,stop:Ge,getMousePosition:Xe,getWheelDelta:Ke,isExternalTarget:$e,addListener:Ne,removeListener:Be},tn=A.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ke(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Pe(this._el,n),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),en=A.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ce&&zt.any3d&&!zt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,ue,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(zt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(zt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof E?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),a=this.containerPointToLatLng(o.add(r));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():B(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),i=R(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=B(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=R(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){_e(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!zt.any3d)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),o=this.project(t),r=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(r.x,r.y),l=s*this.getZoomScale(a,e),c=o.distanceTo(i)||1,u=1.42,h=u*u;function d(t){var e=(l*l-s*s+(t?-1:1)*h*h*c*c)/(2*(t?l:s)*h*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/f(t)}var g=d(0);function v(t){return s*(f(g)/f(g+u*t))}function y(t){return s*(f(g)*m(g+u*t)-p(g))/h}function _(t){return 1-Math.pow(1-t,1.5)}var w=Date.now(),b=(d(1)-g)/u,x=n.duration?1e3*n.duration:1e3*b*.8;function T(){var n=(Date.now()-w)/x,r=_(n)*b;n<=1?(this._flyToFrame=C(T,this),this._move(this.unproject(i.add(o.subtract(i).multiplyBy(y(r)/c)),a),this.getScaleZoom(s/v(r),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),T.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=B(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,B(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=R(e.paddingBottomRight||e.padding||[0,0]),o=this.project(this.getCenter()),r=this.project(t),a=this.getPixelBounds(),s=N([a.min.add(n),a.max.subtract(i)]),l=s.getSize();if(!s.contains(r)){this._enforcingBounds=!0;var c=r.subtract(s.getCenter()),u=s.extend(r).getSize().subtract(l);o.x+=c.x<0?-u.x:u.x,o.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(o),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=e.divideBy(2).round(),a=i.divideBy(2).round(),s=r.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),i=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new W(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var o=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(o,i.maxZoom):o)}var r={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(r[a]=t.coords[a]);this.fire("locationfound",r)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)fe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=pe("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=B(t),n=R(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),c=N(this.project(s,i),this.project(a,i)).getSize(),u=zt.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),u&&(i=Math.round(i/(u/100))*(u/100),i=e?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new E(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new z(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(B(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return Xe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=he(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ne(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&zt.any3d,_e(t,"leaflet-container"+(zt.touch?" leaflet-touch":"")+(zt.retina?" leaflet-retina":"")+(zt.ielt9?" leaflet-oldie":"")+(zt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=de(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pe(this._mapPane,new E(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(t.markerPane,"leaflet-zoom-hide"),_e(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Pe(this._mapPane,new E(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Pe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Be:Ne;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),zt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=C((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,s=!1;r;){if((n=this._targets[a(r)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(o&&!$e(r,t))break;if(i.push(n),o)break}if(r===this._container)break;r=r.parentNode}return i.length||s||o||!this.listens(e,!0)||(i=[this]),i},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&Ae(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}var r=this._findEventTargets(t,e);if(i){for(var a=[],s=0;s<i.length;s++)i[s].listens(e,!0)&&a.push(i[s]);r=a.concat(r)}if(r.length){"contextmenu"===e&&qe(t);var l=r[0],c={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(s=0;s<r.length;s++)if(r[s].fire(e,c,!0),c.originalEvent._stopped||!1===r[s].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ke(this._mapPane)||new E(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return N([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new z(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new z(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=N(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max);return new E(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=zt.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){we(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=le,n=this._proxy.style[e];Me(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Me(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(C((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&we(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function nn(t,e){return new en(t,e)}var on=k.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return _e(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),rn=function(t){return new on(t)};en.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=pe("div",e+"control-container",this._container);function i(i,o){var r=e+i+" "+e+o;t[i+o]=pe("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)fe(this._controlCorners[t]);fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return on.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):we(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return we(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=pe("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ye(e),He(e);var i=this._section=pe("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Ne(e,{mouseenter:function(){Ne(i,"click",qe),this.expand(),setTimeout((function(){Be(i,"click",qe)}))},mouseleave:this.collapse},this));var o=this._layersLink=pe("a",t+"-toggle",e);o.href="#",o.title="Layers",o.setAttribute("role","button"),Ne(o,"click",qe),Ne(o,"focus",this.expand,this),n||this.expand(),this._baseLayersList=pe("div",t+"-base",i),this._separator=pe("div",t+"-separator",i),this._overlaysList=pe("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(o((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;me(this._baseLayersList),me(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ne(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("span");return n.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],o=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),sn=function(t,e,n){return new an(t,e,n)},ln=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=pe("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=pe("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Ye(r),Ne(r,"click",Ge),Ne(r,"click",o,this),Ne(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";we(this._zoomInButton,e),we(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(_e(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(_e(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});en.mergeOptions({zoomControl:!0}),en.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new ln,this.addControl(this.zoomControl))}));var cn=function(t){return new ln(t)},un=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=pe("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=pe("div",e,n)),t.imperial&&(this._iScale=pe("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(t){return new un(t)},dn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(zt.inlineSvg?dn+" ":"")+"Leaflet</a>"},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=pe("div","leaflet-control-attribution"),Ye(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});en.mergeOptions({attributionControl:!0}),en.addInitHook((function(){this.options.attributionControl&&(new pn).addTo(this)}));var fn=function(t){return new pn(t)};on.Layers=an,on.Zoom=ln,on.Scale=un,on.Attribution=pn,rn.layers=sn,rn.zoom=cn,rn.scale=hn,rn.attribution=fn;var mn=k.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mn.addTo=function(t,e){return t.addHandler(e,this),this};var gn,vn={Events:D},yn=zt.touch?"touchstart mousedown":"mousedown",_n=A.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ne(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Be(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ye(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(_n._dragging=this,this._preventOutline&&Ae(this._element),De(),ie(),this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ie(this._element);this._startPoint=new E(e.clientX,e.clientY),this._startPos=ke(this._element),this._parentScale=Re(n);var i="mousedown"===t.type;Ne(document,i?"mousemove":"touchmove",this._onMove,this),Ne(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new E(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,qe(t),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Pe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){we(document.body,"leaflet-dragging"),this._lastTarget&&(we(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Be(document,"mousemove touchmove",this._onMove,this),Be(document,"mouseup touchend touchcancel",this._onUp,this),Le(),oe(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,_n._dragging=!1}});function wn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Tn(t=Cn(t,n),n)}function bn(t,e,n){return Math.sqrt(Dn(t,e,n,!0))}function xn(t,e,n){return Dn(t,e,n)}function Tn(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Sn(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r}function Sn(t,e,n,i,o){var r,a,s,l=0;for(a=i+1;a<=o-1;a++)(s=Dn(t[a],t[i],t[o],!0))>l&&(r=a,l=s);l>n&&(e[r]=1,Sn(t,e,n,i,r),Sn(t,e,n,r,o))}function Cn(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)On(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n}function Mn(t,e,n,i,o){var r,a,s,l=i?gn:kn(t,n),c=kn(e,n);for(gn=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=kn(a=Pn(t,e,r=l||c,n,o),n),r===l?(t=a,l=s):(e=a,c=s)}}function Pn(t,e,n,i,o){var r,a,s=e.x-t.x,l=e.y-t.y,c=i.min,u=i.max;return 8&n?(r=t.x+s*(u.y-t.y)/l,a=u.y):4&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):2&n?(r=u.x,a=t.y+l*(u.x-t.x)/s):1&n&&(r=c.x,a=t.y+l*(c.x-t.x)/s),new E(r,a,o)}function kn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function On(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function Dn(t,e,n,i){var o,r=e.x,a=e.y,s=n.x-r,l=n.y-a,c=s*s+l*l;return c>0&&((o=((t.x-r)*s+(t.y-a)*l)/c)>1?(r=n.x,a=n.y):o>0&&(r+=s*o,a+=l*o)),s=t.x-r,l=t.y-a,i?s*s+l*l:new E(r,a)}function Ln(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function An(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(t)}var En={__proto__:null,simplify:wn,pointToSegmentDistance:bn,closestPointOnSegment:xn,clipSegment:Mn,_getEdgeIntersection:Pn,_getBitCode:kn,_sqClosestPointOnSegment:Dn,isFlat:Ln,_flat:An};function In(t,e,n){var i,o,r,a,s,l,c,u,h,d=[1,4,2,8];for(o=0,c=t.length;o<c;o++)t[o]._code=kn(t[o],e);for(a=0;a<4;a++){for(u=d[a],i=[],o=0,r=(c=t.length)-1;o<c;r=o++)s=t[o],l=t[r],s._code&u?l._code&u||((h=Pn(l,s,u,e,n))._code=kn(h,e),i.push(h)):(l._code&u&&((h=Pn(l,s,u,e,n))._code=kn(h,e),i.push(h)),i.push(s));t=i}return t}var Rn={__proto__:null,clipPolygon:In},zn={project:function(t){return new E(t.lng,t.lat)},unproject:function(t){return new W(t.y,t.x)},bounds:new z([-180,-90],[180,90])},Nn={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=r*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),r/2);return i=-n*Math.log(Math.max(s,1e-10)),new E(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new W(s*n,t.x*n/i)}},jn={__proto__:null,LonLat:zn,Mercator:Nn,SphericalMercator:Y},Bn=n({},V,{code:"EPSG:3395",projection:Nn,transformation:function(){var t=.5/(Math.PI*Nn.R);return G(t,.5,-t,.5)}()}),Wn=n({},V,{code:"EPSG:4326",projection:zn,transformation:G(1/180,1,-1/180,.5)}),Fn=n({},Z,{projection:zn,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});Z.Earth=V,Z.EPSG3395=Bn,Z.EPSG3857=X,Z.EPSG900913=Q,Z.EPSG4326=Wn,Z.Simple=Fn;var Un=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});en.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zn=Un.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Vn=function(t,e){return new Zn(t,e)},Hn=Zn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Zn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Zn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Yn=function(t,e){return new Hn(t,e)},qn=k.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=R(i),r=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return zt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Gn(t){return new qn(t)}var Xn=qn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Xn.imagePath&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+qn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var i=e.exec(t);return i&&i[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=pe("div","leaflet-default-icon-path",document.body),e=de(t,"background-image")||de(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-"leaflet.css".length-1):""}}),Qn=mn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new _n(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&we(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=ke(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=N(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(r)){var c=R((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Pe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ke(e._icon),o=e._map.layerPointToLatLng(i);n&&Pe(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Kn=Un.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),_e(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(n,"focus",this._panOnFocus,this);var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(_e(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(this._icon,"focus",this._panOnFocus,this),fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Pe(this._icon,t),this._shadow&&Pe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Te(this._icon,t),this._shadow&&Te(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?R(e.iconSize):R(0,0),i=e.iconAnchor?R(e.iconAnchor):R(0,0);t.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $n(t,e){return new Kn(t,e)}var Jn=Un.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ti=Jn.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Jn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new z(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ei(t,e){return new ti(t,e)}var ni=ti.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),p(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Jn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===V.distance){var o=Math.PI/180,r=this._mRadius/V.R/o,a=n.project([e+r,t]),s=n.project([e-r,t]),l=a.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(c*o))/(Math.cos(e*o)*Math.cos(c*o)))/o;(isNaN(u)||0===u)&&(u=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,t-u]).x,this._radiusY=l.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function ii(t,e,n){return new ni(t,e,n)}var oi=Jn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=Dn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var h=r(t,e=l[c-1],n=l[c],!0);h<i&&(i=h,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if(o=s[t],r=s[t+1],(i+=n=o.distanceTo(r))>e)return a=(i-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Ln(t),i=0,o=t.length;i<o;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new E(t,t);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof W,a=t.length;if(r){for(o=[],i=0;i<a;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,r,a,s,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(n=0,r=(s=this._rings[e]).length;n<r-1;n++)(a=Mn(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===s[n+1]&&n!==r-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=wn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(i=0,o=(a=(s=this._parts[n]).length)-1;i<a;o=i++)if((e||0!==i)&&bn(t,s[o],s[i])<=l)return!0;return!1}});function ri(t,e){return new oi(t,e)}oi._flat=An;var ai=oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(r=a=s=0,t=0,e=u-1;t<u;e=t++)n=c[t],i=c[e],o=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*o,s+=(n.y+i.y)*o,r+=3*o;return l=0===r?c[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=oi.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof W&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){oi.prototype._setLatLngs.call(this,t),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new E(e,e);if(t=new z(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,r=this._rings.length;o<r;o++)(i=In(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,r,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(l=(e=this._parts[o]).length)-1;r<l;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||oi.prototype._containsPoint.call(this,t,!0)}});function si(t,e){return new ai(t,e)}var li=Hn.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=v(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=ci(t,r);return a?(a.feature=gi(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function ci(t,e){var n,i,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||hi;if(!s&&!a)return null;switch(a.type){case"Point":return ui(c,t,n=u(s),e);case"MultiPoint":for(o=0,r=s.length;o<r;o++)n=u(s[o]),l.push(ui(c,t,n,e));return new Hn(l);case"LineString":case"MultiLineString":return i=di(s,"LineString"===a.type?0:1,u),new oi(i,e);case"Polygon":case"MultiPolygon":return i=di(s,"Polygon"===a.type?1:2,u),new ai(i,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var h=ci({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Hn(l);default:throw new Error("Invalid GeoJSON object.")}}function ui(t,e,n,i){return t?t(e,n):new Kn(n,i&&i.markersInheritOptions&&i)}function hi(t){return new W(t[1],t[0],t[2])}function di(t,e,n){for(var i,o=[],r=0,a=t.length;r<a;r++)i=e?di(t[r],e-1,n):(n||hi)(t[r]),o.push(i);return o}function pi(t,e){return void 0!==(t=F(t)).alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function fi(t,e,n,i){for(var o=[],r=0,a=t.length;r<a;r++)o.push(e?fi(t[r],e-1,n,i):pi(t[r],i));return!e&&n&&o.push(o[0]),o}function mi(t,e){return t.feature?n({},t.feature,{geometry:e}):gi(e)}function gi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var vi={toGeoJSON:function(t){return mi(this,{type:"Point",coordinates:pi(this.getLatLng(),t)})}};function yi(t,e){return new li(t,e)}Kn.include(vi),ni.include(vi),ti.include(vi),oi.include({toGeoJSON:function(t){var e=!Ln(this._latlngs);return mi(this,{type:(e?"Multi":"")+"LineString",coordinates:fi(this._latlngs,e?1:0,!1,t)})}}),ai.include({toGeoJSON:function(t){var e=!Ln(this._latlngs),n=e&&!Ln(this._latlngs[0]),i=fi(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),mi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Zn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),mi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var r=gi(o);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}})),n?mi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var _i=yi,wi=Un.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=B(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ge(this._image),this},bringToBack:function(){return this._map&&ve(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=B(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:pe("img");_e(e,"leaflet-image-layer"),this._zoomAnimated&&_e(e,"leaflet-zoom-animated"),this.options.className&&_e(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Me(this._image,n,e)},_reset:function(){var t=this._image,e=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Pe(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Te(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),bi=function(t,e,n){return new wi(t,e,n)},xi=wi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:pe("video");if(_e(e,"leaflet-image-layer"),this._zoomAnimated&&_e(e,"leaflet-zoom-animated"),this.options.className&&_e(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=o(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var s=pe("source");s.src=this._url[a],e.appendChild(s)}}}});function Ti(t,e,n){return new xi(t,e,n)}var Si=wi.extend({_initImage:function(){var t=this._image=this._url;_e(t,"leaflet-image-layer"),this._zoomAnimated&&_e(t,"leaflet-zoom-animated"),this.options.className&&_e(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function Ci(t,e,n){return new Si(t,e,n)}var Mi=Un.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,e){p(this,t),this._source=e},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Te(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Te(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Te(this._container,0),this._removeTimeout=setTimeout(o(fe,void 0,this._container),200)):fe(this._container),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ge(this._container),this},bringToBack:function(){return this._map&&ve(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Hn){e=null;var n=this._source._layers;for(var i in n)if(n[i]._map){e=n[i];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?Pe(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});en.include({_initOverlay:function(t,e,n,i){var o=e;return o instanceof t||(o=new t(i).setContent(e)),n&&o.setLatLng(n),o}}),Un.include({_initOverlay:function(t,e,n,i){var o=n;return o instanceof t?(p(o,i),o._source=this):(o=e&&!i?e:new t(i,this)).setContent(n),o}});var Pi=Mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Mi.prototype.openOn.call(this,t)},onAdd:function(t){Mi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Jn||this._source.on("preclick",Ve))},onRemove:function(t){Mi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Jn||this._source.off("preclick",Ve))},getEvents:function(){var t=Mi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=pe("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pe("div",t+"-content-wrapper",e);if(this._contentNode=pe("div",t+"-content",n),Ye(e),He(this._contentNode),Ne(e,"contextmenu",Ve),this._tipContainer=pe("div",t+"-tip-container",e),this._tip=pe("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=pe("a",t+"-close-button",e);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(i,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",_e(t,r)):we(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Pe(this._container,e.add(n))},_adjustPan:function(t){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,n=parseInt(de(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+n,o=this._containerWidth,r=new E(this._containerLeft,-i-this._containerBottom);r._add(ke(this._container));var a=e.layerPointToContainerPoint(r),s=R(this.options.autoPanPadding),l=R(this.options.autoPanPaddingTopLeft||s),c=R(this.options.autoPanPaddingBottomRight||s),u=e.getSize(),h=0,d=0;a.x+o+c.x>u.x&&(h=a.x+o-u.x+c.x),a.x-h-l.x<0&&(h=a.x-l.x),a.y+i+c.y>u.y&&(d=a.y+i-u.y+c.y),a.y-d-l.y<0&&(d=a.y-l.y),(h||d)&&e.fire("autopanstart").panBy([h,d],{animate:t&&"moveend"===t.type})}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ki=function(t,e){return new Pi(t,e)};en.mergeOptions({closePopupOnClick:!0}),en.include({openPopup:function(t,e,n){return this._initOverlay(Pi,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Un.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Pi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Ge(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof Jn?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Oi=Mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Mi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Mi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Mi.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pe("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,o=this._container,r=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(t),s=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,u=R(this.options.offset),h=this._getAnchor();"top"===s?(e=l/2,n=c):"bottom"===s?(e=l/2,n=0):"center"===s?(e=l/2,n=c/2):"right"===s?(e=0,n=c/2):"left"===s?(e=l,n=c/2):a.x<r.x?(s="right",e=0,n=c/2):(s="left",e=l+2*(u.x+h.x),n=c/2),t=t.subtract(R(e,n,!0)).add(u).add(h),we(o,"leaflet-tooltip-right"),we(o,"leaflet-tooltip-left"),we(o,"leaflet-tooltip-top"),we(o,"leaflet-tooltip-bottom"),_e(o,"leaflet-tooltip-"+s),Pe(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Te(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Di=function(t,e){return new Oi(t,e)};en.include({openTooltip:function(t,e,n){return this._initOverlay(Oi,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Un.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Oi,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Li=qn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(me(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=R(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ai(t){return new Li(t)}qn.Default=Xn;var Ei=Un.extend({options:{tileSize:256,opacity:1,updateWhenIdle:zt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),fe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ge(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ve(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof E?t:new E(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!zt.ielt9){Te(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);Te(o.el,r),r<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(M(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(fe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)fe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new E(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(o,r,a,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new E(o,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();zt.any3d?Me(t.el,o,i):Pe(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new z(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new z(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new E(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=o.min.y;h<=o.max.y;h++)for(var d=o.min.x;d<=o.max.x;d++){var p=new E(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:a.push(p)}}if(a.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return B(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n);return[e.unproject(i,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new j(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new E(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(fe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){_e(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,zt.ielt9&&this.options.opacity<1&&Te(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&C(o(this._tileReady,this,t,null,r)),Pe(r,n),this._tiles[i]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(Te(n.el,0),M(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(_e(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),zt.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new E(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new z(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ii(t){return new Ei(t)}var Ri=Ei.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&zt.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ne(n,"load",o(this._tileOnLoad,this,e,n)),Ne(n,"error",o(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:zt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){zt.ielt9?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,!e.complete)){e.src=_;var n=this._tiles[t].coords;fe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",_),Ei.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return Ei.prototype._tileReady.call(this,t,e,n)}});function zi(t,e){return new Ri(t,e)}var Ni=Ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);var r=(e=p(this,e)).detectRetina&&zt.retina?2:1,a=this.getTileSize();i.width=a.x*r,i.height=a.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=N(n.project(e[0]),n.project(e[1])),o=i.min,r=i.max,a=(this._wmsVersion>=1.3&&this._crs===Wn?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),s=Ri.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function ji(t,e){return new Ni(t,e)}Ri.WMS=Ni,zi.wms=ji;var Bi=Un.extend({options:{padding:.1},initialize:function(t){p(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),r=i.multiplyBy(-n).add(o).subtract(this._map._getNewPixelOrigin(t,e));zt.any3d?Me(this._container,r,n):Pe(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new z(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wi=Bi.extend({options:{tolerance:0},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ne(t,"mousemove",this._onMouseMove,this),Ne(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,fe(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=zt.retina?2:1;Pe(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",zt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,o=a[n].length;i<o;i++)r=a[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(we(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(_e(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(o((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Fi(t){return zt.canvas?new Wi(t):null}var Ui=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zi={_initContainer:function(){this._container=pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ui("shape");_e(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ui("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;fe(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=Ui("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=Ui("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ge(t._container)},_bringToBack:function(t){ve(t._container)}},Vi=zt.vml?Ui:K,Hi=Bi.extend({_initContainer:function(){this._container=Vi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fe(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Pe(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Vi("path");t.options.className&&_e(e,t.options.className),t.options.interactive&&_e(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){fe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ge(t._path)},_bringToBack:function(t){ve(t._path)}});function Yi(t){return zt.svg||zt.vml?new Hi(t):null}zt.vml&&Hi.include(Zi),en.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Fi(t)||Yi(t)}});var qi=ai.extend({initialize:function(t,e){ai.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=B(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Gi(t,e){return new qi(t,e)}Hi.create=Vi,Hi.pointsToPath=$,li.geometryToLayer=ci,li.coordsToLatLng=hi,li.coordsToLatLngs=di,li.latLngToCoords=pi,li.latLngsToCoords=fi,li.getFeature=mi,li.asFeature=gi,en.mergeOptions({boxZoom:!0});var Xi=mn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),ie(),De(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ne(document,{contextmenu:Ge,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=pe("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new z(this._point,this._startPoint),n=e.getSize();Pe(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(fe(this._box),we(this._container,"leaflet-crosshair")),oe(),Le(),Be(document,{contextmenu:Ge,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});en.addInitHook("addHandler","boxZoom",Xi),en.mergeOptions({doubleClickZoom:!0});var Qi=mn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});en.addInitHook("addHandler","doubleClickZoom",Qi),en.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ki=mn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new _n(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){we(this._map._container,"leaflet-grab"),we(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=B(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,a=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),h=c/(n.inertiaDeceleration*a),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),C((function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});en.addInitHook("addHandler","dragging",Ki),en.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $i=mn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ne(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Ge(t)}}});en.addInitHook("addHandler","keyboard",$i),en.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ji=mn.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ke(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),i),Ge(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});en.addInitHook("addHandler","scrollWheelZoom",Ji);var to=600;en.mergeOptions({tapHold:zt.touchNative&&zt.safari&&zt.mobile,tapTolerance:15});var eo=mn.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new E(e.clientX,e.clientY),this._holdTimeout=setTimeout(o((function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",qe),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),to),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Be(document,"touchend",qe),Be(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new E(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});en.addInitHook("addHandler","tapHold",eo),en.mergeOptions({touchZoom:zt.touch,bounceAtZoomLimits:!0});var no=mn.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){we(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),qe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var s=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=C(s,this,!0),qe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,M(this._animRequest),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});en.addInitHook("addHandler","touchZoom",no),en.BoxZoom=Xi,en.DoubleClickZoom=Qi,en.Drag=Ki,en.Keyboard=$i,en.ScrollWheelZoom=Ji,en.TapHold=eo,en.TouchZoom=no,t.Bounds=z,t.Browser=zt,t.CRS=Z,t.Canvas=Wi,t.Circle=ni,t.CircleMarker=ti,t.Class=k,t.Control=on,t.DivIcon=Li,t.DivOverlay=Mi,t.DomEvent=Je,t.DomUtil=ze,t.Draggable=_n,t.Evented=A,t.FeatureGroup=Hn,t.GeoJSON=li,t.GridLayer=Ei,t.Handler=mn,t.Icon=qn,t.ImageOverlay=wi,t.LatLng=W,t.LatLngBounds=j,t.Layer=Un,t.LayerGroup=Zn,t.LineUtil=En,t.Map=en,t.Marker=Kn,t.Mixin=vn,t.Path=Jn,t.Point=E,t.PolyUtil=Rn,t.Polygon=ai,t.Polyline=oi,t.Popup=Pi,t.PosAnimation=tn,t.Projection=jn,t.Rectangle=qi,t.Renderer=Bi,t.SVG=Hi,t.SVGOverlay=Si,t.TileLayer=Ri,t.Tooltip=Oi,t.Transformation=q,t.Util=P,t.VideoOverlay=xi,t.bind=o,t.bounds=N,t.canvas=Fi,t.circle=ii,t.circleMarker=ei,t.control=rn,t.divIcon=Ai,t.extend=n,t.featureGroup=Yn,t.geoJSON=yi,t.geoJson=_i,t.gridLayer=Ii,t.icon=Gn,t.imageOverlay=bi,t.latLng=F,t.latLngBounds=B,t.layerGroup=Vn,t.map=nn,t.marker=$n,t.point=R,t.polygon=si,t.polyline=ri,t.popup=ki,t.rectangle=Gi,t.setOptions=p,t.stamp=a,t.svg=Yi,t.svgOverlay=Ci,t.tileLayer=zi,t.tooltip=Di,t.transformation=G,t.version=e,t.videoOverlay=Ti;var io=window.L;t.noConflict=function(){return window.L=io,this},window.L=t}(e)},2571:(t,e,n)=>{(t.exports=n(3176)).tz.load(n(1128))},3176:function(t,e,n){var i,o,r;!function(a,s){"use strict";t.exports?t.exports=s(n(7398)):(o=[n(7398)],void 0===(r="function"==typeof(i=s)?i.apply(e,o):i)||(t.exports=r))}(0,(function(t){"use strict";void 0===t.version&&t.default&&(t=t.default);var e,n={},i={},o={},r={},a={};t&&"string"==typeof t.version||O("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var s=t.version.split("."),l=+s[0],c=+s[1];function u(t){return t>96?t-87:t>64?t-29:t-48}function h(t){var e=0,n=t.split("."),i=n[0],o=n[1]||"",r=1,a=0,s=1;for(45===t.charCodeAt(0)&&(e=1,s=-1);e<i.length;e++)a=60*a+u(i.charCodeAt(e));for(e=0;e<o.length;e++)r/=60,a+=u(o.charCodeAt(e))*r;return a*s}function d(t){for(var e=0;e<t.length;e++)t[e]=h(t[e])}function p(t,e){var n,i=[];for(n=0;n<e.length;n++)i[n]=t[e[n]];return i}function f(t){var e=t.split("|"),n=e[2].split(" "),i=e[3].split(""),o=e[4].split(" ");return d(n),d(i),d(o),function(t,e){for(var n=0;n<e;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}(o,i.length),{name:e[0],abbrs:p(e[1].split(" "),i),offsets:p(n,i),untils:o,population:0|e[5]}}function m(t){t&&this._set(f(t))}function g(t,e){this.name=t,this.zones=e}function v(t){var e=t.toTimeString(),n=e.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=e.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+t,this.abbr=n,this.offset=t.getTimezoneOffset()}function y(t){this.zone=t,this.offsetScore=0,this.abbrScore=0}function _(t,e){for(var n,i;i=6e4*((e.at-t.at)/12e4|0);)(n=new v(new Date(t.at+i))).offset===t.offset?t=n:e=n;return t}function w(t,e){return t.offsetScore!==e.offsetScore?t.offsetScore-e.offsetScore:t.abbrScore!==e.abbrScore?t.abbrScore-e.abbrScore:t.zone.population!==e.zone.population?e.zone.population-t.zone.population:e.zone.name.localeCompare(t.zone.name)}function b(t,e){var n,i;for(d(e),n=0;n<e.length;n++)i=e[n],a[i]=a[i]||{},a[i][t]=!0}function x(t){var e,n,i,o=t.length,s={},l=[];for(e=0;e<o;e++)for(n in i=a[t[e].offset]||{})i.hasOwnProperty(n)&&(s[n]=!0);for(e in s)s.hasOwnProperty(e)&&l.push(r[e]);return l}function T(){try{var t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t&&t.length>3){var e=r[S(t)];if(e)return e;O("Moment Timezone found "+t+" from the Intl api, but did not have that data loaded.")}}catch(t){}var n,i,o,a=function(){var t,e,n,i=(new Date).getFullYear()-2,o=new v(new Date(i,0,1)),r=[o];for(n=1;n<48;n++)(e=new v(new Date(i,n,1))).offset!==o.offset&&(t=_(o,e),r.push(t),r.push(new v(new Date(t.at+6e4)))),o=e;for(n=0;n<4;n++)r.push(new v(new Date(i+n,0,1))),r.push(new v(new Date(i+n,6,1)));return r}(),s=a.length,l=x(a),c=[];for(i=0;i<l.length;i++){for(n=new y(M(l[i]),s),o=0;o<s;o++)n.scoreOffsetAt(a[o]);c.push(n)}return c.sort(w),c.length>0?c[0].zone.name:void 0}function S(t){return(t||"").toLowerCase().replace(/\//g,"_")}function C(t){var e,i,o,a;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)a=S(i=(o=t[e].split("|"))[0]),n[a]=t[e],r[a]=i,b(a,o[2].split(" "))}function M(t,e){t=S(t);var o,a=n[t];return a instanceof m?a:"string"==typeof a?(a=new m(a),n[t]=a,a):i[t]&&e!==M&&(o=M(i[t],M))?((a=n[t]=new m)._set(o),a.name=r[t],a):null}function P(t){var e,n,o,a;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)o=S((n=t[e].split("|"))[0]),a=S(n[1]),i[o]=a,r[o]=n[0],i[a]=o,r[a]=n[1]}function k(t){var e="X"===t._f||"x"===t._f;return!(!t._a||void 0!==t._tzm||e)}function O(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}function D(e){var n=Array.prototype.slice.call(arguments,0,-1),i=arguments[arguments.length-1],o=M(i),r=t.utc.apply(null,n);return o&&!t.isMoment(e)&&k(r)&&r.add(o.parse(r),"minutes"),r.tz(i),r}(l<2||2===l&&c<6)&&O("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),m.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},_index:function(t){var e,n=+t,i=this.untils;for(e=0;e<i.length;e++)if(n<i[e])return e},countries:function(){var t=this.name;return Object.keys(o).filter((function(e){return-1!==o[e].zones.indexOf(t)}))},parse:function(t){var e,n,i,o,r=+t,a=this.offsets,s=this.untils,l=s.length-1;for(o=0;o<l;o++)if(e=a[o],n=a[o+1],i=a[o?o-1:o],e<n&&D.moveAmbiguousForward?e=n:e>i&&D.moveInvalidForward&&(e=i),r<s[o]-6e4*e)return a[o];return a[l]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return O("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(t)]},utcOffset:function(t){return this.offsets[this._index(t)]}},y.prototype.scoreOffsetAt=function(t){this.offsetScore+=Math.abs(this.zone.utcOffset(t.at)-t.offset),this.zone.abbr(t.at).replace(/[^A-Z]/g,"")!==t.abbr&&this.abbrScore++},D.version="0.5.34",D.dataVersion="",D._zones=n,D._links=i,D._names=r,D._countries=o,D.add=C,D.link=P,D.load=function(t){C(t.zones),P(t.links),function(t){var e,n,i,r;if(t&&t.length)for(e=0;e<t.length;e++)n=(r=t[e].split("|"))[0].toUpperCase(),i=r[1].split(" "),o[n]=new g(n,i)}(t.countries),D.dataVersion=t.version},D.zone=M,D.zoneExists=function t(e){return t.didShowError||(t.didShowError=!0,O("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!M(e)},D.guess=function(t){return e&&!t||(e=T()),e},D.names=function(){var t,e=[];for(t in r)r.hasOwnProperty(t)&&(n[t]||n[i[t]])&&r[t]&&e.push(r[t]);return e.sort()},D.Zone=m,D.unpack=f,D.unpackBase60=h,D.needsOffset=k,D.moveInvalidForward=!0,D.moveAmbiguousForward=!1,D.countries=function(){return Object.keys(o)},D.zonesForCountry=function(t,e){if(!(t=function(t){return t=t.toUpperCase(),o[t]||null}(t)))return null;var n=t.zones.sort();return e?n.map((function(t){return{name:t,offset:M(t).utcOffset(new Date)}})):n};var L,A=t.fn;function E(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function I(t){return function(){return this._z=null,t.apply(this,arguments)}}t.tz=D,t.defaultZone=null,t.updateOffset=function(e,n){var i,o=t.defaultZone;if(void 0===e._z&&(o&&k(e)&&!e._isUTC&&(e._d=t.utc(e._a)._d,e.utc().add(o.parse(e),"minutes")),e._z=o),e._z)if(i=e._z.utcOffset(e),Math.abs(i)<16&&(i/=60),void 0!==e.utcOffset){var r=e._z;e.utcOffset(-i,n),e._z=r}else e.zone(i,n)},A.tz=function(e,n){if(e){if("string"!=typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=M(e),this._z?t.updateOffset(this,n):O("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},A.zoneName=E(A.zoneName),A.zoneAbbr=E(A.zoneAbbr),A.utc=I(A.utc),A.local=I(A.local),A.utcOffset=(L=A.utcOffset,function(){return arguments.length>0&&(this._z=null),L.apply(this,arguments)}),t.tz.setDefault=function(e){return(l<2||2===l&&c<9)&&O("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+t.version+"."),t.defaultZone=e?M(e):null,t};var R=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(R)?(R.push("_z"),R.push("_a")):R&&(R._z=null),t}))},7398:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var e,n;function i(){return e.apply(null,arguments)}function o(t){e=t}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(s(t,e))return!1;return!0}function c(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function h(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,e){var n,i=[],o=t.length;for(n=0;n<o;++n)i.push(e(t[n],n));return i}function p(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,i){return Gn(t,e,n,i,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(t){return null==t._pf&&(t._pf=m()),t._pf}function v(t){if(null==t._isValid){var e=g(t),i=n.call(e.parsedDateParts,(function(t){return null!=t})),o=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(o=o&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function y(t){var e=f(NaN);return null!=t?p(g(e),t):g(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),i=n.length>>>0;for(e=0;e<i;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var _=i.momentProperties=[],w=!1;function b(t,e){var n,i,o,r=_.length;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=g(e)),c(e._locale)||(t._locale=e._locale),r>0)for(n=0;n<r;n++)c(o=e[i=_[n]])||(t[i]=o);return t}function x(t){b(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,i.updateOffset(this),w=!1)}function T(t){return t instanceof x||null!=t&&null!=t._isAMomentObject}function S(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function C(t,e){var n=!0;return p((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){var o,r,a,l=[],c=arguments.length;for(r=0;r<c;r++){if(o="","object"==typeof arguments[r]){for(a in o+="\n["+r+"] ",arguments[0])s(arguments[0],a)&&(o+=a+": "+arguments[0][a]+", ");o=o.slice(0,-2)}else o=arguments[r];l.push(o)}S(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var M,P={};function k(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),P[t]||(S(e),P[t]=!0)}function O(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t){var e,n;for(n in t)s(t,n)&&(O(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function L(t,e){var n,i=p({},t);for(n in e)s(e,n)&&(a(t[n])&&a(e[n])?(i[n]={},p(i[n],t[n]),p(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)s(t,n)&&!s(e,n)&&a(t[n])&&(i[n]=p({},i[n]));return i}function A(t){null!=t&&this.set(t)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,M=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)s(t,e)&&n.push(e);return n};var E={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function I(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return O(i)?i.call(e,n):i}function R(t,e,n){var i=""+Math.abs(t),o=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},B={};function W(t,e,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),t&&(B[t]=o),e&&(B[e[0]]=function(){return R(o.apply(this,arguments),e[1],e[2])}),n&&(B[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function F(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function U(t){var e,n,i=t.match(z);for(e=0,n=i.length;e<n;e++)B[i[e]]?i[e]=B[i[e]]:i[e]=F(i[e]);return function(e){var o,r="";for(o=0;o<n;o++)r+=O(i[o])?i[o].call(e,t):i[o];return r}}function Z(t,e){return t.isValid()?(e=V(e,t.localeData()),j[e]=j[e]||U(e),j[e](t)):t.localeData().invalidDate()}function V(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(N.lastIndex=0;n>=0&&N.test(t);)t=t.replace(N,i),N.lastIndex=0,n-=1;return t}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Y(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(z).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var q="Invalid date";function G(){return this._invalidDate}var X="%d",Q=/\d{1,2}/;function K(t){return this._ordinal.replace("%d",t)}var $={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J(t,e,n,i){var o=this._relativeTime[n];return O(o)?o(t,e,n,i):o.replace(/%d/i,t)}function tt(t,e){var n=this._relativeTime[t>0?"future":"past"];return O(n)?n(e):n.replace(/%s/i,e)}var et={};function nt(t,e){var n=t.toLowerCase();et[n]=et[n+"s"]=et[e]=t}function it(t){return"string"==typeof t?et[t]||et[t.toLowerCase()]:void 0}function ot(t){var e,n,i={};for(n in t)s(t,n)&&(e=it(n))&&(i[e]=t[n]);return i}var rt={};function at(t,e){rt[t]=e}function st(t){var e,n=[];for(e in t)s(t,e)&&n.push({unit:e,priority:rt[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}function lt(t){return t%4==0&&t%100!=0||t%400==0}function ct(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ut(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=ct(e)),n}function ht(t,e){return function(n){return null!=n?(pt(this,t,n),i.updateOffset(this,e),this):dt(this,t)}}function dt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function pt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&lt(t.year())&&1===t.month()&&29===t.date()?(n=ut(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Jt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function ft(t){return O(this[t=it(t)])?this[t]():this}function mt(t,e){if("object"==typeof t){var n,i=st(t=ot(t)),o=i.length;for(n=0;n<o;n++)this[i[n].unit](t[i[n].unit])}else if(O(this[t=it(t)]))return this[t](e);return this}var gt,vt=/\d/,yt=/\d\d/,_t=/\d{3}/,wt=/\d{4}/,bt=/[+-]?\d{6}/,xt=/\d\d?/,Tt=/\d\d\d\d?/,St=/\d\d\d\d\d\d?/,Ct=/\d{1,3}/,Mt=/\d{1,4}/,Pt=/[+-]?\d{1,6}/,kt=/\d+/,Ot=/[+-]?\d+/,Dt=/Z|[+-]\d\d:?\d\d/gi,Lt=/Z|[+-]\d\d(?::?\d\d)?/gi,At=/[+-]?\d+(\.\d{1,3})?/,Et=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function It(t,e,n){gt[t]=O(e)?e:function(t,i){return t&&n?n:e}}function Rt(t,e){return s(gt,t)?gt[t](e._strict,e._locale):new RegExp(zt(t))}function zt(t){return Nt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,o){return e||n||i||o})))}function Nt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}gt={};var jt={};function Bt(t,e){var n,i,o=e;for("string"==typeof t&&(t=[t]),u(e)&&(o=function(t,n){n[e]=ut(t)}),i=t.length,n=0;n<i;n++)jt[t[n]]=o}function Wt(t,e){Bt(t,(function(t,n,i,o){i._w=i._w||{},e(t,i._w,i,o)}))}function Ft(t,e,n){null!=e&&s(jt,t)&&jt[t](e,n._a,n,t)}var Ut,Zt=0,Vt=1,Ht=2,Yt=3,qt=4,Gt=5,Xt=6,Qt=7,Kt=8;function $t(t,e){return(t%e+e)%e}function Jt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=$t(e,12);return t+=(e-n)/12,1===n?lt(t)?29:28:31-n%7%2}Ut=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},W("M",["MM",2],"Mo",(function(){return this.month()+1})),W("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),W("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),nt("month","M"),at("month",8),It("M",xt),It("MM",xt,yt),It("MMM",(function(t,e){return e.monthsShortRegex(t)})),It("MMMM",(function(t,e){return e.monthsRegex(t)})),Bt(["M","MM"],(function(t,e){e[Vt]=ut(t)-1})),Bt(["MMM","MMMM"],(function(t,e,n,i){var o=n._locale.monthsParse(t,i,n._strict);null!=o?e[Vt]=o:g(n).invalidMonth=t}));var te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ie=Et,oe=Et;function re(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ne).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone}function ae(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ne.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function se(t,e,n){var i,o,r,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(o=Ut.call(this._shortMonthsParse,a))?o:null:-1!==(o=Ut.call(this._longMonthsParse,a))?o:null:"MMM"===e?-1!==(o=Ut.call(this._shortMonthsParse,a))||-1!==(o=Ut.call(this._longMonthsParse,a))?o:null:-1!==(o=Ut.call(this._longMonthsParse,a))||-1!==(o=Ut.call(this._shortMonthsParse,a))?o:null}function le(t,e,n){var i,o,r;if(this._monthsParseExact)return se.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=f([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function ce(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=ut(e);else if(!u(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Jt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ue(t){return null!=t?(ce(this,t),i.updateOffset(this,!0),this):dt(this,"Month")}function he(){return Jt(this.year(),this.month())}function de(t){return this._monthsParseExact?(s(this,"_monthsRegex")||fe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=ie),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function pe(t){return this._monthsParseExact?(s(this,"_monthsRegex")||fe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=oe),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function fe(){function t(t,e){return e.length-t.length}var e,n,i=[],o=[],r=[];for(e=0;e<12;e++)n=f([2e3,e]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(t),o.sort(t),r.sort(t),e=0;e<12;e++)i[e]=Nt(i[e]),o[e]=Nt(o[e]);for(e=0;e<24;e++)r[e]=Nt(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function me(t){return lt(t)?366:365}W("Y",0,0,(function(){var t=this.year();return t<=9999?R(t,4):"+"+t})),W(0,["YY",2],0,(function(){return this.year()%100})),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),nt("year","y"),at("year",1),It("Y",Ot),It("YY",xt,yt),It("YYYY",Mt,wt),It("YYYYY",Pt,bt),It("YYYYYY",Pt,bt),Bt(["YYYYY","YYYYYY"],Zt),Bt("YYYY",(function(t,e){e[Zt]=2===t.length?i.parseTwoDigitYear(t):ut(t)})),Bt("YY",(function(t,e){e[Zt]=i.parseTwoDigitYear(t)})),Bt("Y",(function(t,e){e[Zt]=parseInt(t,10)})),i.parseTwoDigitYear=function(t){return ut(t)+(ut(t)>68?1900:2e3)};var ge=ht("FullYear",!0);function ve(){return lt(this.year())}function ye(t,e,n,i,o,r,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,i,o,r,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,o,r,a),s}function _e(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function we(t,e,n){var i=7+e-n;return-(7+_e(t,0,i).getUTCDay()-e)%7+i-1}function be(t,e,n,i,o){var r,a,s=1+7*(e-1)+(7+n-i)%7+we(t,i,o);return s<=0?a=me(r=t-1)+s:s>me(t)?(r=t+1,a=s-me(t)):(r=t,a=s),{year:r,dayOfYear:a}}function xe(t,e,n){var i,o,r=we(t.year(),e,n),a=Math.floor((t.dayOfYear()-r-1)/7)+1;return a<1?i=a+Te(o=t.year()-1,e,n):a>Te(t.year(),e,n)?(i=a-Te(t.year(),e,n),o=t.year()+1):(o=t.year(),i=a),{week:i,year:o}}function Te(t,e,n){var i=we(t,e,n),o=we(t+1,e,n);return(me(t)-i+o)/7}function Se(t){return xe(t,this._week.dow,this._week.doy).week}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),nt("week","w"),nt("isoWeek","W"),at("week",5),at("isoWeek",5),It("w",xt),It("ww",xt,yt),It("W",xt),It("WW",xt,yt),Wt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=ut(t)}));var Ce={dow:0,doy:6};function Me(){return this._week.dow}function Pe(){return this._week.doy}function ke(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Oe(t){var e=xe(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function De(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Le(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ae(t,e){return t.slice(e,7).concat(t.slice(0,e))}W("d",0,"do","day"),W("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),W("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),W("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),nt("day","d"),nt("weekday","e"),nt("isoWeekday","E"),at("day",11),at("weekday",11),at("isoWeekday",11),It("d",xt),It("e",xt),It("E",xt),It("dd",(function(t,e){return e.weekdaysMinRegex(t)})),It("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),It("dddd",(function(t,e){return e.weekdaysRegex(t)})),Wt(["dd","ddd","dddd"],(function(t,e,n,i){var o=n._locale.weekdaysParse(t,i,n._strict);null!=o?e.d=o:g(n).invalidWeekday=t})),Wt(["d","e","E"],(function(t,e,n,i){e[i]=ut(t)}));var Ee="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ie="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Re="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ze=Et,Ne=Et,je=Et;function Be(t,e){var n=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Ae(n,this._week.dow):t?n[t.day()]:n}function We(t){return!0===t?Ae(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Fe(t){return!0===t?Ae(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ue(t,e,n){var i,o,r,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(o=Ut.call(this._weekdaysParse,a))?o:null:"ddd"===e?-1!==(o=Ut.call(this._shortWeekdaysParse,a))?o:null:-1!==(o=Ut.call(this._minWeekdaysParse,a))?o:null:"dddd"===e?-1!==(o=Ut.call(this._weekdaysParse,a))||-1!==(o=Ut.call(this._shortWeekdaysParse,a))||-1!==(o=Ut.call(this._minWeekdaysParse,a))?o:null:"ddd"===e?-1!==(o=Ut.call(this._shortWeekdaysParse,a))||-1!==(o=Ut.call(this._weekdaysParse,a))||-1!==(o=Ut.call(this._minWeekdaysParse,a))?o:null:-1!==(o=Ut.call(this._minWeekdaysParse,a))||-1!==(o=Ut.call(this._weekdaysParse,a))||-1!==(o=Ut.call(this._shortWeekdaysParse,a))?o:null}function Ze(t,e,n){var i,o,r;if(this._weekdaysParseExact)return Ue.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=f([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function Ve(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=De(t,this.localeData()),this.add(t-e,"d")):e}function He(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ye(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Le(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function qe(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Qe.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=ze),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ge(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Qe.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ne),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xe(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Qe.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=je),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qe(){function t(t,e){return e.length-t.length}var e,n,i,o,r,a=[],s=[],l=[],c=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),i=Nt(this.weekdaysMin(n,"")),o=Nt(this.weekdaysShort(n,"")),r=Nt(this.weekdays(n,"")),a.push(i),s.push(o),l.push(r),c.push(i),c.push(o),c.push(r);a.sort(t),s.sort(t),l.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ke(){return this.hours()%12||12}function $e(){return this.hours()||24}function Je(t,e){W(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function tn(t,e){return e._meridiemParse}function en(t){return"p"===(t+"").toLowerCase().charAt(0)}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Ke),W("k",["kk",2],0,$e),W("hmm",0,0,(function(){return""+Ke.apply(this)+R(this.minutes(),2)})),W("hmmss",0,0,(function(){return""+Ke.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),W("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),W("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),Je("a",!0),Je("A",!1),nt("hour","h"),at("hour",13),It("a",tn),It("A",tn),It("H",xt),It("h",xt),It("k",xt),It("HH",xt,yt),It("hh",xt,yt),It("kk",xt,yt),It("hmm",Tt),It("hmmss",St),It("Hmm",Tt),It("Hmmss",St),Bt(["H","HH"],Yt),Bt(["k","kk"],(function(t,e,n){var i=ut(t);e[Yt]=24===i?0:i})),Bt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),Bt(["h","hh"],(function(t,e,n){e[Yt]=ut(t),g(n).bigHour=!0})),Bt("hmm",(function(t,e,n){var i=t.length-2;e[Yt]=ut(t.substr(0,i)),e[qt]=ut(t.substr(i)),g(n).bigHour=!0})),Bt("hmmss",(function(t,e,n){var i=t.length-4,o=t.length-2;e[Yt]=ut(t.substr(0,i)),e[qt]=ut(t.substr(i,2)),e[Gt]=ut(t.substr(o)),g(n).bigHour=!0})),Bt("Hmm",(function(t,e,n){var i=t.length-2;e[Yt]=ut(t.substr(0,i)),e[qt]=ut(t.substr(i))})),Bt("Hmmss",(function(t,e,n){var i=t.length-4,o=t.length-2;e[Yt]=ut(t.substr(0,i)),e[qt]=ut(t.substr(i,2)),e[Gt]=ut(t.substr(o))}));var nn=/[ap]\.?m?\.?/i,on=ht("Hours",!0);function rn(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var an,sn={calendar:E,longDateFormat:H,invalidDate:q,ordinal:X,dayOfMonthOrdinalParse:Q,relativeTime:$,months:te,monthsShort:ee,week:Ce,weekdays:Ee,weekdaysMin:Re,weekdaysShort:Ie,meridiemParse:nn},ln={},cn={};function un(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function hn(t){return t?t.toLowerCase().replace("_","-"):t}function dn(t){for(var e,n,i,o,r=0;r<t.length;){for(e=(o=hn(t[r]).split("-")).length,n=(n=hn(t[r+1]))?n.split("-"):null;e>0;){if(i=fn(o.slice(0,e).join("-")))return i;if(n&&n.length>=e&&un(o,n)>=e-1)break;e--}r++}return an}function pn(t){return null!=t.match("^[^/\\\\]*$")}function fn(e){var n=null;if(void 0===ln[e]&&t&&t.exports&&pn(e))try{n=an._abbr,Object(function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}()),mn(n)}catch(t){ln[e]=null}return ln[e]}function mn(t,e){var n;return t&&((n=c(e)?yn(t):gn(t,e))?an=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),an._abbr}function gn(t,e){if(null!==e){var n,i=sn;if(e.abbr=t,null!=ln[t])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ln[t]._config;else if(null!=e.parentLocale)if(null!=ln[e.parentLocale])i=ln[e.parentLocale]._config;else{if(null==(n=fn(e.parentLocale)))return cn[e.parentLocale]||(cn[e.parentLocale]=[]),cn[e.parentLocale].push({name:t,config:e}),null;i=n._config}return ln[t]=new A(L(i,e)),cn[t]&&cn[t].forEach((function(t){gn(t.name,t.config)})),mn(t),ln[t]}return delete ln[t],null}function vn(t,e){if(null!=e){var n,i,o=sn;null!=ln[t]&&null!=ln[t].parentLocale?ln[t].set(L(ln[t]._config,e)):(null!=(i=fn(t))&&(o=i._config),e=L(o,e),null==i&&(e.abbr=t),(n=new A(e)).parentLocale=ln[t],ln[t]=n),mn(t)}else null!=ln[t]&&(null!=ln[t].parentLocale?(ln[t]=ln[t].parentLocale,t===mn()&&mn(t)):null!=ln[t]&&delete ln[t]);return ln[t]}function yn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return an;if(!r(t)){if(e=fn(t))return e;t=[t]}return dn(t)}function _n(){return M(ln)}function wn(t){var e,n=t._a;return n&&-2===g(t).overflow&&(e=n[Vt]<0||n[Vt]>11?Vt:n[Ht]<1||n[Ht]>Jt(n[Zt],n[Vt])?Ht:n[Yt]<0||n[Yt]>24||24===n[Yt]&&(0!==n[qt]||0!==n[Gt]||0!==n[Xt])?Yt:n[qt]<0||n[qt]>59?qt:n[Gt]<0||n[Gt]>59?Gt:n[Xt]<0||n[Xt]>999?Xt:-1,g(t)._overflowDayOfYear&&(e<Zt||e>Ht)&&(e=Ht),g(t)._overflowWeeks&&-1===e&&(e=Qt),g(t)._overflowWeekday&&-1===e&&(e=Kt),g(t).overflow=e),t}var bn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Mn=/^\/?Date\((-?\d+)/i,Pn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function On(t){var e,n,i,o,r,a,s=t._i,l=bn.exec(s)||xn.exec(s),c=Sn.length,u=Cn.length;if(l){for(g(t).iso=!0,e=0,n=c;e<n;e++)if(Sn[e][1].exec(l[1])){o=Sn[e][0],i=!1!==Sn[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,n=u;e<n;e++)if(Cn[e][1].exec(l[3])){r=(l[2]||" ")+Cn[e][0];break}if(null==r)return void(t._isValid=!1)}if(!i&&null!=r)return void(t._isValid=!1);if(l[4]){if(!Tn.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=o+(r||"")+(a||""),Fn(t)}else t._isValid=!1}function Dn(t,e,n,i,o,r){var a=[Ln(t),ee.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(o,10)];return r&&a.push(parseInt(r,10)),a}function Ln(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function An(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function En(t,e,n){return!t||Ie.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function In(t,e,n){if(t)return kn[t];if(e)return 0;var i=parseInt(n,10),o=i%100;return(i-o)/100*60+o}function Rn(t){var e,n=Pn.exec(An(t._i));if(n){if(e=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!En(n[1],e,t))return;t._a=e,t._tzm=In(n[8],n[9],n[10]),t._d=_e.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),g(t).rfc2822=!0}else t._isValid=!1}function zn(t){var e=Mn.exec(t._i);null===e?(On(t),!1===t._isValid&&(delete t._isValid,Rn(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Nn(t,e,n){return null!=t?t:null!=e?e:n}function jn(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Bn(t){var e,n,i,o,r,a=[];if(!t._d){for(i=jn(t),t._w&&null==t._a[Ht]&&null==t._a[Vt]&&Wn(t),null!=t._dayOfYear&&(r=Nn(t._a[Zt],i[Zt]),(t._dayOfYear>me(r)||0===t._dayOfYear)&&(g(t)._overflowDayOfYear=!0),n=_e(r,0,t._dayOfYear),t._a[Vt]=n.getUTCMonth(),t._a[Ht]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Yt]&&0===t._a[qt]&&0===t._a[Gt]&&0===t._a[Xt]&&(t._nextDay=!0,t._a[Yt]=0),t._d=(t._useUTC?_e:ye).apply(null,a),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Yt]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(g(t).weekdayMismatch=!0)}}function Wn(t){var e,n,i,o,r,a,s,l,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(r=1,a=4,n=Nn(e.GG,t._a[Zt],xe(Xn(),1,4).year),i=Nn(e.W,1),((o=Nn(e.E,1))<1||o>7)&&(l=!0)):(r=t._locale._week.dow,a=t._locale._week.doy,c=xe(Xn(),r,a),n=Nn(e.gg,t._a[Zt],c.year),i=Nn(e.w,c.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(l=!0)):o=r),i<1||i>Te(n,r,a)?g(t)._overflowWeeks=!0:null!=l?g(t)._overflowWeekday=!0:(s=be(n,i,o,r,a),t._a[Zt]=s.year,t._dayOfYear=s.dayOfYear)}function Fn(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],g(t).empty=!0;var e,n,o,r,a,s,l,c=""+t._i,u=c.length,h=0;for(l=(o=V(t._f,t._locale).match(z)||[]).length,e=0;e<l;e++)r=o[e],(n=(c.match(Rt(r,t))||[])[0])&&((a=c.substr(0,c.indexOf(n))).length>0&&g(t).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),h+=n.length),B[r]?(n?g(t).empty=!1:g(t).unusedTokens.push(r),Ft(r,n,t)):t._strict&&!n&&g(t).unusedTokens.push(r);g(t).charsLeftOver=u-h,c.length>0&&g(t).unusedInput.push(c),t._a[Yt]<=12&&!0===g(t).bigHour&&t._a[Yt]>0&&(g(t).bigHour=void 0),g(t).parsedDateParts=t._a.slice(0),g(t).meridiem=t._meridiem,t._a[Yt]=Un(t._locale,t._a[Yt],t._meridiem),null!==(s=g(t).era)&&(t._a[Zt]=t._locale.erasConvertYear(s,t._a[Zt])),Bn(t),wn(t)}else Rn(t);else On(t)}function Un(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}function Zn(t){var e,n,i,o,r,a,s=!1,l=t._f.length;if(0===l)return g(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<l;o++)r=0,a=!1,e=b({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],Fn(e),v(e)&&(a=!0),r+=g(e).charsLeftOver,r+=10*g(e).unusedTokens.length,g(e).score=r,s?r<i&&(i=r,n=e):(null==i||r<i||a)&&(i=r,n=e,a&&(s=!0));p(t,n||e)}function Vn(t){if(!t._d){var e=ot(t._i),n=void 0===e.day?e.date:e.day;t._a=d([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Bn(t)}}function Hn(t){var e=new x(wn(Yn(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Yn(t){var e=t._i,n=t._f;return t._locale=t._locale||yn(t._l),null===e||void 0===n&&""===e?y({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),T(e)?new x(wn(e)):(h(e)?t._d=e:r(n)?Zn(t):n?Fn(t):qn(t),v(t)||(t._d=null),t))}function qn(t){var e=t._i;c(e)?t._d=new Date(i.now()):h(e)?t._d=new Date(e.valueOf()):"string"==typeof e?zn(t):r(e)?(t._a=d(e.slice(0),(function(t){return parseInt(t,10)})),Bn(t)):a(e)?Vn(t):u(e)?t._d=new Date(e):i.createFromInputFallback(t)}function Gn(t,e,n,i,o){var s={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(a(t)&&l(t)||r(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=t,s._f=e,s._strict=i,Hn(s)}function Xn(t,e,n,i){return Gn(t,e,n,i,!1)}i.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Qn=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Xn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:y()})),Kn=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Xn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:y()}));function $n(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Xn();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function Jn(){return $n("isBefore",[].slice.call(arguments,0))}function ti(){return $n("isAfter",[].slice.call(arguments,0))}var ei=function(){return Date.now?Date.now():+new Date},ni=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ii(t){var e,n,i=!1,o=ni.length;for(e in t)if(s(t,e)&&(-1===Ut.call(ni,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<o;++n)if(t[ni[n]]){if(i)return!1;parseFloat(t[ni[n]])!==ut(t[ni[n]])&&(i=!0)}return!0}function oi(){return this._isValid}function ri(){return ki(NaN)}function ai(t){var e=ot(t),n=e.year||0,i=e.quarter||0,o=e.month||0,r=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=ii(e),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*r,this._months=+o+3*i+12*n,this._data={},this._locale=yn(),this._bubble()}function si(t){return t instanceof ai}function li(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ci(t,e,n){var i,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(i=0;i<o;i++)(n&&t[i]!==e[i]||!n&&ut(t[i])!==ut(e[i]))&&a++;return a+r}function ui(t,e){W(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+R(~~(t/60),2)+e+R(~~t%60,2)}))}ui("Z",":"),ui("ZZ",""),It("Z",Lt),It("ZZ",Lt),Bt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=di(Lt,t)}));var hi=/([\+\-]|\d\d)/gi;function di(t,e){var n,i,o=(e||"").match(t);return null===o?null:0===(i=60*(n=((o[o.length-1]||[])+"").match(hi)||["-",0,0])[1]+ut(n[2]))?0:"+"===n[0]?i:-i}function pi(t,e){var n,o;return e._isUTC?(n=e.clone(),o=(T(t)||h(t)?t.valueOf():Xn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),i.updateOffset(n,!1),n):Xn(t).local()}function fi(t){return-Math.round(t._d.getTimezoneOffset())}function mi(t,e,n){var o,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=di(Lt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(o=fi(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==t&&(!e||this._changeInProgress?Ei(this,ki(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:fi(this)}function gi(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function vi(t){return this.utcOffset(0,t)}function yi(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(fi(this),"m")),this}function _i(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=di(Dt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function wi(t){return!!this.isValid()&&(t=t?Xn(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function bi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xi(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return b(e,this),(e=Yn(e))._a?(t=e._isUTC?f(e._a):Xn(e._a),this._isDSTShifted=this.isValid()&&ci(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ti(){return!!this.isValid()&&!this._isUTC}function Si(){return!!this.isValid()&&this._isUTC}function Ci(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Mi=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Pi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ki(t,e){var n,i,o,r=t,a=null;return si(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:u(t)||!isNaN(+t)?(r={},e?r[e]=+t:r.milliseconds=+t):(a=Mi.exec(t))?(n="-"===a[1]?-1:1,r={y:0,d:ut(a[Ht])*n,h:ut(a[Yt])*n,m:ut(a[qt])*n,s:ut(a[Gt])*n,ms:ut(li(1e3*a[Xt]))*n}):(a=Pi.exec(t))?(n="-"===a[1]?-1:1,r={y:Oi(a[2],n),M:Oi(a[3],n),w:Oi(a[4],n),d:Oi(a[5],n),h:Oi(a[6],n),m:Oi(a[7],n),s:Oi(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=Li(Xn(r.from),Xn(r.to)),(r={}).ms=o.milliseconds,r.M=o.months),i=new ai(r),si(t)&&s(t,"_locale")&&(i._locale=t._locale),si(t)&&s(t,"_isValid")&&(i._isValid=t._isValid),i}function Oi(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Di(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Li(t,e){var n;return t.isValid()&&e.isValid()?(e=pi(e,t),t.isBefore(e)?n=Di(t,e):((n=Di(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ai(t,e){return function(n,i){var o;return null===i||isNaN(+i)||(k(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),Ei(this,ki(n,i),t),this}}function Ei(t,e,n,o){var r=e._milliseconds,a=li(e._days),s=li(e._months);t.isValid()&&(o=null==o||o,s&&ce(t,dt(t,"Month")+s*n),a&&pt(t,"Date",dt(t,"Date")+a*n),r&&t._d.setTime(t._d.valueOf()+r*n),o&&i.updateOffset(t,a||s))}ki.fn=ai.prototype,ki.invalid=ri;var Ii=Ai(1,"add"),Ri=Ai(-1,"subtract");function zi(t){return"string"==typeof t||t instanceof String}function Ni(t){return T(t)||h(t)||zi(t)||u(t)||Bi(t)||ji(t)||null==t}function ji(t){var e,n,i=a(t)&&!l(t),o=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=r.length;for(e=0;e<c;e+=1)n=r[e],o=o||s(t,n);return i&&o}function Bi(t){var e=r(t),n=!1;return e&&(n=0===t.filter((function(e){return!u(e)&&zi(t)})).length),e&&n}function Wi(t){var e,n,i=a(t)&&!l(t),o=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<r.length;e+=1)n=r[e],o=o||s(t,n);return i&&o}function Fi(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ui(t,e){1===arguments.length&&(arguments[0]?Ni(arguments[0])?(t=arguments[0],e=void 0):Wi(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Xn(),o=pi(n,this).startOf("day"),r=i.calendarFormat(this,o)||"sameElse",a=e&&(O(e[r])?e[r].call(this,n):e[r]);return this.format(a||this.localeData().calendar(r,this,Xn(n)))}function Zi(){return new x(this)}function Vi(t,e){var n=T(t)?t:Xn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Hi(t,e){var n=T(t)?t:Xn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Yi(t,e,n,i){var o=T(t)?t:Xn(t),r=T(e)?e:Xn(e);return!!(this.isValid()&&o.isValid()&&r.isValid())&&("("===(i=i||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===i[1]?this.isBefore(r,n):!this.isAfter(r,n))}function qi(t,e){var n,i=T(t)?t:Xn(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Gi(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Xi(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Qi(t,e,n){var i,o,r;if(!this.isValid())return NaN;if(!(i=pi(t,this)).isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),e=it(e)){case"year":r=Ki(this,i)/12;break;case"month":r=Ki(this,i);break;case"quarter":r=Ki(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-o)/864e5;break;case"week":r=(this-i-o)/6048e5;break;default:r=this-i}return n?r:ct(r)}function Ki(t,e){if(t.date()<e.date())return-Ki(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function $i(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ji(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Z(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Z(n,"Z")):Z(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function to(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,i,o="moment",r="";return this.isLocal()||(o=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),t="["+o+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=r+'[")]',this.format(t+e+n+i)}function eo(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=Z(this,t);return this.localeData().postformat(e)}function no(t,e){return this.isValid()&&(T(t)&&t.isValid()||Xn(t).isValid())?ki({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function io(t){return this.from(Xn(),t)}function oo(t,e){return this.isValid()&&(T(t)&&t.isValid()||Xn(t).isValid())?ki({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ro(t){return this.to(Xn(),t)}function ao(t){var e;return void 0===t?this._locale._abbr:(null!=(e=yn(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var so=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function lo(){return this._locale}var co=1e3,uo=60*co,ho=60*uo,po=3506328*ho;function fo(t,e){return(t%e+e)%e}function mo(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-po:new Date(t,e,n).valueOf()}function go(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-po:Date.UTC(t,e,n)}function vo(t){var e,n;if(void 0===(t=it(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?go:mo,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=fo(e+(this._isUTC?0:this.utcOffset()*uo),ho);break;case"minute":e=this._d.valueOf(),e-=fo(e,uo);break;case"second":e=this._d.valueOf(),e-=fo(e,co)}return this._d.setTime(e),i.updateOffset(this,!0),this}function yo(t){var e,n;if(void 0===(t=it(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?go:mo,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ho-fo(e+(this._isUTC?0:this.utcOffset()*uo),ho)-1;break;case"minute":e=this._d.valueOf(),e+=uo-fo(e,uo)-1;break;case"second":e=this._d.valueOf(),e+=co-fo(e,co)-1}return this._d.setTime(e),i.updateOffset(this,!0),this}function _o(){return this._d.valueOf()-6e4*(this._offset||0)}function wo(){return Math.floor(this.valueOf()/1e3)}function bo(){return new Date(this.valueOf())}function xo(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function To(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function So(){return this.isValid()?this.toISOString():null}function Co(){return v(this)}function Mo(){return p({},g(this))}function Po(){return g(this).overflow}function ko(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Oo(t,e){var n,o,r,a=this._eras||yn("en")._eras;for(n=0,o=a.length;n<o;++n)switch("string"==typeof a[n].since&&(r=i(a[n].since).startOf("day"),a[n].since=r.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":r=i(a[n].until).startOf("day").valueOf(),a[n].until=r.valueOf()}return a}function Do(t,e,n){var i,o,r,a,s,l=this.eras();for(t=t.toUpperCase(),i=0,o=l.length;i<o;++i)if(r=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return l[i];break;case"NNNN":if(r===t)return l[i];break;case"NNNNN":if(s===t)return l[i]}else if([r,a,s].indexOf(t)>=0)return l[i]}function Lo(t,e){var n=t.since<=t.until?1:-1;return void 0===e?i(t.since).year():i(t.since).year()+(e-t.offset)*n}function Ao(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].name;if(i[t].until<=n&&n<=i[t].since)return i[t].name}return""}function Eo(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].narrow;if(i[t].until<=n&&n<=i[t].since)return i[t].narrow}return""}function Io(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].abbr;if(i[t].until<=n&&n<=i[t].since)return i[t].abbr}return""}function Ro(){var t,e,n,o,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,o=this.clone().startOf("day").valueOf(),r[t].since<=o&&o<=r[t].until||r[t].until<=o&&o<=r[t].since)return(this.year()-i(r[t].since).year())*n+r[t].offset;return this.year()}function zo(t){return s(this,"_erasNameRegex")||Zo.call(this),t?this._erasNameRegex:this._erasRegex}function No(t){return s(this,"_erasAbbrRegex")||Zo.call(this),t?this._erasAbbrRegex:this._erasRegex}function jo(t){return s(this,"_erasNarrowRegex")||Zo.call(this),t?this._erasNarrowRegex:this._erasRegex}function Bo(t,e){return e.erasAbbrRegex(t)}function Wo(t,e){return e.erasNameRegex(t)}function Fo(t,e){return e.erasNarrowRegex(t)}function Uo(t,e){return e._eraYearOrdinalRegex||kt}function Zo(){var t,e,n=[],i=[],o=[],r=[],a=this.eras();for(t=0,e=a.length;t<e;++t)i.push(Nt(a[t].name)),n.push(Nt(a[t].abbr)),o.push(Nt(a[t].narrow)),r.push(Nt(a[t].name)),r.push(Nt(a[t].abbr)),r.push(Nt(a[t].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function Vo(t,e){W(0,[t,t.length],0,e)}function Ho(t){return Ko.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Yo(t){return Ko.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function qo(){return Te(this.year(),1,4)}function Go(){return Te(this.isoWeekYear(),1,4)}function Xo(){var t=this.localeData()._week;return Te(this.year(),t.dow,t.doy)}function Qo(){var t=this.localeData()._week;return Te(this.weekYear(),t.dow,t.doy)}function Ko(t,e,n,i,o){var r;return null==t?xe(this,i,o).year:(e>(r=Te(t,i,o))&&(e=r),$o.call(this,t,e,n,i,o))}function $o(t,e,n,i,o){var r=be(t,e,n,i,o),a=_e(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Jo(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}W("N",0,0,"eraAbbr"),W("NN",0,0,"eraAbbr"),W("NNN",0,0,"eraAbbr"),W("NNNN",0,0,"eraName"),W("NNNNN",0,0,"eraNarrow"),W("y",["y",1],"yo","eraYear"),W("y",["yy",2],0,"eraYear"),W("y",["yyy",3],0,"eraYear"),W("y",["yyyy",4],0,"eraYear"),It("N",Bo),It("NN",Bo),It("NNN",Bo),It("NNNN",Wo),It("NNNNN",Fo),Bt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){var o=n._locale.erasParse(t,i,n._strict);o?g(n).era=o:g(n).invalidEra=t})),It("y",kt),It("yy",kt),It("yyy",kt),It("yyyy",kt),It("yo",Uo),Bt(["y","yy","yyy","yyyy"],Zt),Bt(["yo"],(function(t,e,n,i){var o;n._locale._eraYearOrdinalRegex&&(o=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Zt]=n._locale.eraYearOrdinalParse(t,o):e[Zt]=parseInt(t,10)})),W(0,["gg",2],0,(function(){return this.weekYear()%100})),W(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vo("gggg","weekYear"),Vo("ggggg","weekYear"),Vo("GGGG","isoWeekYear"),Vo("GGGGG","isoWeekYear"),nt("weekYear","gg"),nt("isoWeekYear","GG"),at("weekYear",1),at("isoWeekYear",1),It("G",Ot),It("g",Ot),It("GG",xt,yt),It("gg",xt,yt),It("GGGG",Mt,wt),It("gggg",Mt,wt),It("GGGGG",Pt,bt),It("ggggg",Pt,bt),Wt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=ut(t)})),Wt(["gg","GG"],(function(t,e,n,o){e[o]=i.parseTwoDigitYear(t)})),W("Q",0,"Qo","quarter"),nt("quarter","Q"),at("quarter",7),It("Q",vt),Bt("Q",(function(t,e){e[Vt]=3*(ut(t)-1)})),W("D",["DD",2],"Do","date"),nt("date","D"),at("date",9),It("D",xt),It("DD",xt,yt),It("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Bt(["D","DD"],Ht),Bt("Do",(function(t,e){e[Ht]=ut(t.match(xt)[0])}));var tr=ht("Date",!0);function er(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}W("DDD",["DDDD",3],"DDDo","dayOfYear"),nt("dayOfYear","DDD"),at("dayOfYear",4),It("DDD",Ct),It("DDDD",_t),Bt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=ut(t)})),W("m",["mm",2],0,"minute"),nt("minute","m"),at("minute",14),It("m",xt),It("mm",xt,yt),Bt(["m","mm"],qt);var nr=ht("Minutes",!1);W("s",["ss",2],0,"second"),nt("second","s"),at("second",15),It("s",xt),It("ss",xt,yt),Bt(["s","ss"],Gt);var ir,or,rr=ht("Seconds",!1);for(W("S",0,0,(function(){return~~(this.millisecond()/100)})),W(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),W(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),W(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),W(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),W(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),W(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),nt("millisecond","ms"),at("millisecond",16),It("S",Ct,vt),It("SS",Ct,yt),It("SSS",Ct,_t),ir="SSSS";ir.length<=9;ir+="S")It(ir,kt);function ar(t,e){e[Xt]=ut(1e3*("0."+t))}for(ir="S";ir.length<=9;ir+="S")Bt(ir,ar);function sr(){return this._isUTC?"UTC":""}function lr(){return this._isUTC?"Coordinated Universal Time":""}or=ht("Milliseconds",!1),W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var cr=x.prototype;function ur(t){return Xn(1e3*t)}function hr(){return Xn.apply(null,arguments).parseZone()}function dr(t){return t}cr.add=Ii,cr.calendar=Ui,cr.clone=Zi,cr.diff=Qi,cr.endOf=yo,cr.format=eo,cr.from=no,cr.fromNow=io,cr.to=oo,cr.toNow=ro,cr.get=ft,cr.invalidAt=Po,cr.isAfter=Vi,cr.isBefore=Hi,cr.isBetween=Yi,cr.isSame=qi,cr.isSameOrAfter=Gi,cr.isSameOrBefore=Xi,cr.isValid=Co,cr.lang=so,cr.locale=ao,cr.localeData=lo,cr.max=Kn,cr.min=Qn,cr.parsingFlags=Mo,cr.set=mt,cr.startOf=vo,cr.subtract=Ri,cr.toArray=xo,cr.toObject=To,cr.toDate=bo,cr.toISOString=Ji,cr.inspect=to,"undefined"!=typeof Symbol&&null!=Symbol.for&&(cr[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),cr.toJSON=So,cr.toString=$i,cr.unix=wo,cr.valueOf=_o,cr.creationData=ko,cr.eraName=Ao,cr.eraNarrow=Eo,cr.eraAbbr=Io,cr.eraYear=Ro,cr.year=ge,cr.isLeapYear=ve,cr.weekYear=Ho,cr.isoWeekYear=Yo,cr.quarter=cr.quarters=Jo,cr.month=ue,cr.daysInMonth=he,cr.week=cr.weeks=ke,cr.isoWeek=cr.isoWeeks=Oe,cr.weeksInYear=Xo,cr.weeksInWeekYear=Qo,cr.isoWeeksInYear=qo,cr.isoWeeksInISOWeekYear=Go,cr.date=tr,cr.day=cr.days=Ve,cr.weekday=He,cr.isoWeekday=Ye,cr.dayOfYear=er,cr.hour=cr.hours=on,cr.minute=cr.minutes=nr,cr.second=cr.seconds=rr,cr.millisecond=cr.milliseconds=or,cr.utcOffset=mi,cr.utc=vi,cr.local=yi,cr.parseZone=_i,cr.hasAlignedHourOffset=wi,cr.isDST=bi,cr.isLocal=Ti,cr.isUtcOffset=Si,cr.isUtc=Ci,cr.isUTC=Ci,cr.zoneAbbr=sr,cr.zoneName=lr,cr.dates=C("dates accessor is deprecated. Use date instead.",tr),cr.months=C("months accessor is deprecated. Use month instead",ue),cr.years=C("years accessor is deprecated. Use year instead",ge),cr.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gi),cr.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xi);var pr=A.prototype;function fr(t,e,n,i){var o=yn(),r=f().set(i,e);return o[n](r,t)}function mr(t,e,n){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return fr(t,e,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=fr(t,i,n,"month");return o}function gr(t,e,n,i){"boolean"==typeof t?(u(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,u(e)&&(n=e,e=void 0),e=e||"");var o,r=yn(),a=t?r._week.dow:0,s=[];if(null!=n)return fr(e,(n+a)%7,i,"day");for(o=0;o<7;o++)s[o]=fr(e,(o+a)%7,i,"day");return s}function vr(t,e){return mr(t,e,"months")}function yr(t,e){return mr(t,e,"monthsShort")}function _r(t,e,n){return gr(t,e,n,"weekdays")}function wr(t,e,n){return gr(t,e,n,"weekdaysShort")}function br(t,e,n){return gr(t,e,n,"weekdaysMin")}pr.calendar=I,pr.longDateFormat=Y,pr.invalidDate=G,pr.ordinal=K,pr.preparse=dr,pr.postformat=dr,pr.relativeTime=J,pr.pastFuture=tt,pr.set=D,pr.eras=Oo,pr.erasParse=Do,pr.erasConvertYear=Lo,pr.erasAbbrRegex=No,pr.erasNameRegex=zo,pr.erasNarrowRegex=jo,pr.months=re,pr.monthsShort=ae,pr.monthsParse=le,pr.monthsRegex=pe,pr.monthsShortRegex=de,pr.week=Se,pr.firstDayOfYear=Pe,pr.firstDayOfWeek=Me,pr.weekdays=Be,pr.weekdaysMin=Fe,pr.weekdaysShort=We,pr.weekdaysParse=Ze,pr.weekdaysRegex=qe,pr.weekdaysShortRegex=Ge,pr.weekdaysMinRegex=Xe,pr.isPM=en,pr.meridiem=rn,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===ut(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=C("moment.lang is deprecated. Use moment.locale instead.",mn),i.langData=C("moment.langData is deprecated. Use moment.localeData instead.",yn);var xr=Math.abs;function Tr(){var t=this._data;return this._milliseconds=xr(this._milliseconds),this._days=xr(this._days),this._months=xr(this._months),t.milliseconds=xr(t.milliseconds),t.seconds=xr(t.seconds),t.minutes=xr(t.minutes),t.hours=xr(t.hours),t.months=xr(t.months),t.years=xr(t.years),this}function Sr(t,e,n,i){var o=ki(e,n);return t._milliseconds+=i*o._milliseconds,t._days+=i*o._days,t._months+=i*o._months,t._bubble()}function Cr(t,e){return Sr(this,t,e,1)}function Mr(t,e){return Sr(this,t,e,-1)}function Pr(t){return t<0?Math.floor(t):Math.ceil(t)}function kr(){var t,e,n,i,o,r=this._milliseconds,a=this._days,s=this._months,l=this._data;return r>=0&&a>=0&&s>=0||r<=0&&a<=0&&s<=0||(r+=864e5*Pr(Dr(s)+a),a=0,s=0),l.milliseconds=r%1e3,t=ct(r/1e3),l.seconds=t%60,e=ct(t/60),l.minutes=e%60,n=ct(e/60),l.hours=n%24,a+=ct(n/24),s+=o=ct(Or(a)),a-=Pr(Dr(o)),i=ct(s/12),s%=12,l.days=a,l.months=s,l.years=i,this}function Or(t){return 4800*t/146097}function Dr(t){return 146097*t/4800}function Lr(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=it(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+Or(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Dr(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Ar(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ut(this._months/12):NaN}function Er(t){return function(){return this.as(t)}}var Ir=Er("ms"),Rr=Er("s"),zr=Er("m"),Nr=Er("h"),jr=Er("d"),Br=Er("w"),Wr=Er("M"),Fr=Er("Q"),Ur=Er("y");function Zr(){return ki(this)}function Vr(t){return t=it(t),this.isValid()?this[t+"s"]():NaN}function Hr(t){return function(){return this.isValid()?this._data[t]:NaN}}var Yr=Hr("milliseconds"),qr=Hr("seconds"),Gr=Hr("minutes"),Xr=Hr("hours"),Qr=Hr("days"),Kr=Hr("months"),$r=Hr("years");function Jr(){return ct(this.days()/7)}var ta=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function na(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function ia(t,e,n,i){var o=ki(t).abs(),r=ta(o.as("s")),a=ta(o.as("m")),s=ta(o.as("h")),l=ta(o.as("d")),c=ta(o.as("M")),u=ta(o.as("w")),h=ta(o.as("y")),d=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=e,d[3]=+t>0,d[4]=i,na.apply(null,d)}function oa(t){return void 0===t?ta:"function"==typeof t&&(ta=t,!0)}function ra(t,e){return void 0!==ea[t]&&(void 0===e?ea[t]:(ea[t]=e,"s"===t&&(ea.ss=e-1),!0))}function aa(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,i,o=!1,r=ea;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(o=t),"object"==typeof e&&(r=Object.assign({},ea,e),null!=e.s&&null==e.ss&&(r.ss=e.s-1)),i=ia(this,!o,r,n=this.localeData()),o&&(i=n.pastFuture(+this,i)),n.postformat(i)}var sa=Math.abs;function la(t){return(t>0)-(t<0)||+t}function ca(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,o,r,a,s,l=sa(this._milliseconds)/1e3,c=sa(this._days),u=sa(this._months),h=this.asSeconds();return h?(t=ct(l/60),e=ct(t/60),l%=60,t%=60,n=ct(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",o=h<0?"-":"",r=la(this._months)!==la(h)?"-":"",a=la(this._days)!==la(h)?"-":"",s=la(this._milliseconds)!==la(h)?"-":"",o+"P"+(n?r+n+"Y":"")+(u?r+u+"M":"")+(c?a+c+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+i+"S":"")):"P0D"}var ua=ai.prototype;return ua.isValid=oi,ua.abs=Tr,ua.add=Cr,ua.subtract=Mr,ua.as=Lr,ua.asMilliseconds=Ir,ua.asSeconds=Rr,ua.asMinutes=zr,ua.asHours=Nr,ua.asDays=jr,ua.asWeeks=Br,ua.asMonths=Wr,ua.asQuarters=Fr,ua.asYears=Ur,ua.valueOf=Ar,ua._bubble=kr,ua.clone=Zr,ua.get=Vr,ua.milliseconds=Yr,ua.seconds=qr,ua.minutes=Gr,ua.hours=Xr,ua.days=Qr,ua.weeks=Jr,ua.months=Kr,ua.years=$r,ua.humanize=aa,ua.toISOString=ca,ua.toString=ca,ua.toJSON=ca,ua.locale=ao,ua.localeData=lo,ua.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ca),ua.lang=so,W("X",0,0,"unix"),W("x",0,0,"valueOf"),It("x",Ot),It("X",At),Bt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),Bt("x",(function(t,e,n){n._d=new Date(ut(t))})),i.version="2.29.3",o(Xn),i.fn=cr,i.min=Jn,i.max=ti,i.now=ei,i.utc=f,i.unix=ur,i.months=vr,i.isDate=h,i.locale=mn,i.invalid=y,i.duration=ki,i.isMoment=T,i.weekdays=_r,i.parseZone=hr,i.localeData=yn,i.isDuration=si,i.monthsShort=yr,i.weekdaysMin=br,i.defineLocale=gn,i.updateLocale=vn,i.locales=_n,i.weekdaysShort=wr,i.normalizeUnits=it,i.relativeTimeRounding=oa,i.relativeTimeThreshold=ra,i.calendarFormat=Fi,i.prototype=cr,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},5888:()=>{!function(){"use strict";var t={};function e(e,n){var i;t[e]=!0,void 0!==n&&(i=n,window.console&&window.console.error&&window.console.error(i))}var n=function t(e){var n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var i=0;i<this.attribs.length;i++){var o=new t.VertexAttrib(n);this.attribs[i]=o}this.maxAttrib=0};(n.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=t.FLOAT,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var i=function(e){var n=this;this.gl=e,function(e){var n=e.getError;e.getError=function(){do{(i=n.apply(e))!=e.NO_ERROR&&(t[i]=!0)}while(i!=e.NO_ERROR);for(var i in t)if(t[i])return delete t[i],parseInt(i);return e.NO_ERROR}}(e);var i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(t){return t==n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject==n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(t){var e=n.currentVertexArrayObject;e.maxAttrib=Math.max(e.maxAttrib,t);var o=e.attribs[t];return o.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(t){var e=n.currentVertexArrayObject;e.maxAttrib=Math.max(e.maxAttrib,t);var o=e.attribs[t];return o.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(t,o){switch(t){case e.ARRAY_BUFFER:n.currentArrayBuffer=o;break;case e.ELEMENT_ARRAY_BUFFER:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(t,o){var r=n.currentVertexArrayObject,a=r.attribs[t];switch(o){case e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return a.buffer;case e.VERTEX_ATTRIB_ARRAY_ENABLED:return a.enabled;case e.VERTEX_ATTRIB_ARRAY_SIZE:return a.size;case e.VERTEX_ATTRIB_ARRAY_STRIDE:return a.stride;case e.VERTEX_ATTRIB_ARRAY_TYPE:return a.type;case e.VERTEX_ATTRIB_ARRAY_NORMALIZED:return a.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(t,e,o,r,a,s){var l=n.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);var c=l.attribs[t];return c.buffer=n.currentArrayBuffer,c.size=e,c.type=o,c.normalized=r,c.stride=a,c.offset=s,c.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",window.console&&window.console.log&&window.console.log(t),n.reset_()}),!0),this.reset_()};i.prototype.VERTEX_ARRAY_BINDING_OES=34229,i.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.defaultVertexArrayObject=new n(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},i.prototype.createVertexArrayOES=function(){var t=new n(this);return this.vertexArrayObjects.push(t),t},i.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject==t&&this.bindVertexArrayOES(null)},i.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof n&&t.hasBeenBound&&t.ext==this)},i.prototype.bindVertexArrayOES=function(t){var n=this.gl;if(!t||t.isAlive){var i=this.original,o=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var r=this.currentVertexArrayObject;if(o!=r){o&&r.elementArrayBuffer==o.elementArrayBuffer||i.bindBuffer.call(n,n.ELEMENT_ARRAY_BUFFER,r.elementArrayBuffer);for(var a=this.currentArrayBuffer,s=Math.max(o?o.maxAttrib:0,r.maxAttrib),l=0;l<=s;l++){var c=r.attribs[l],u=o?o.attribs[l]:null;if(o&&c.enabled==u.enabled||(c.enabled?i.enableVertexAttribArray.call(n,l):i.disableVertexAttribArray.call(n,l)),c.enabled){var h=!1;o&&c.buffer==u.buffer||(a!=c.buffer&&(i.bindBuffer.call(n,n.ARRAY_BUFFER,c.buffer),a=c.buffer),h=!0),(h||c.cached!=u.cached)&&i.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!=a&&i.bindBuffer.call(n,n.ARRAY_BUFFER,this.currentArrayBuffer)}}else e(n.INVALID_OPERATION,"bindVertexArrayOES: attempt to bind deleted arrayObject")},"undefined"!=typeof WebGLRenderingContext&&function(){var t=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getSupportedExtensions=function(){var e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};var e=WebGLRenderingContext.prototype.getExtension;WebGLRenderingContext.prototype.getExtension=function(t){return e.call(this,t)||("OES_vertex_array_object"!==t?null:(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new i(this)),this.__OESVertexArrayObject))}}()}()},9821:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__assign:()=>r,__asyncDelegator:()=>y,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>g,__awaiter:()=>u,__decorate:()=>s,__exportStar:()=>d,__extends:()=>o,__generator:()=>h,__importDefault:()=>x,__importStar:()=>b,__makeTemplateObject:()=>w,__metadata:()=>c,__param:()=>l,__read:()=>f,__rest:()=>a,__spread:()=>m,__values:()=>p});var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&(n[i[o]]=t[i[o]])}return n}function s(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,i){e(n,i,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}l((i=i.apply(t,e||[])).next())}))}function h(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),r=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){o[t]&&(i[t]=function(e){return new Promise((function(n,i){r.push([t,e,n,i])>1||s(t,e)}))})}function s(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(l,c):u(r[0][2],n)}catch(t){u(r[0][3],t)}var n}function l(t){s("next",t)}function c(t){s("throw",t)}function u(t,e){t(e),r.shift(),r.length&&s(r[0][0],r[0][1])}}function y(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,o){t[i]&&(e[i]=function(e){return(n=!n)?{value:g(t[i](e)),done:"return"===i}:o?o(e):e})}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},8319:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.listeners=[]}return t.prototype.attach=function(t,e){this.listeners.push({listener:t,bindTarget:e})},t.prototype.detach=function(t,e){for(var n=this.listeners,i=0;i<n.length;i++)n[i].listener!==t||void 0!==e&&n[i].bindTarget!==e||(n.splice(i,1),i--)},t.prototype.once=function(t,e){var n=this,i=function(o){t.call(e||null,[o]),n.detach(i,e)};this.attach(i,e)},t.prototype.post=function(t){this.notifyListeners(t)},t.prototype.notifyListener=function(t,e){t.listener.apply(t.bindTarget||null,e)},t}();e.AbstractEvent=n},6188:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyListeners=function(t){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){for(var n=[t],i=0,o=e.listeners;i<o.length;i++){var r=o[i];e.notifyListener(r,n)}}),0)},e}(n(8319).AbstractEvent);e.AsyncEvent=r},4066:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyListeners=function(t){for(var e=[t],n=0,i=this.listeners;n<i.length;n++){var o=i[n];this.notifyListener(o,e)}},e}(n(8319).AbstractEvent);e.SyncEvent=r},2018:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.post=function(){t.prototype.post.call(this,void 0)},e}(n(6188).AsyncEvent);e.VoidAsyncEvent=r},7879:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.post=function(){t.prototype.post.call(this,void 0)},e}(n(4066).SyncEvent);e.VoidSyncEvent=r},7994:(t,e,n)=>{"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(6188)),i(n(4066)),i(n(2018)),i(n(7879))},6531:()=>{!function(){this.Sortables=new Class({Implements:[Events,Options],options:{opacity:1,clone:!1,revert:!1,handle:!1,dragOptions:{},unDraggableTags:["button","input","a","textarea","select","option"]},initialize:function(t,e){this.setOptions(e),this.elements=[],this.lists=[],this.idle=!0,this.addLists($$(document.id(t)||t)),this.options.clone||(this.options.revert=!1),this.options.revert&&(this.effect=new Fx.Morph(null,Object.merge({duration:250,link:"cancel"},this.options.revert)))},attach:function(){return this.addLists(this.lists),this},detach:function(){return this.lists=this.removeLists(this.lists),this},addItems:function(){return Array.flatten(arguments).each((function(t){this.elements.push(t);var e=t.retrieve("sortables:start",function(e){this.start.call(this,e,t)}.bind(this));(this.options.handle&&t.getElement(this.options.handle)||t).addEvent("mousedown",e)}),this),this},addLists:function(){return Array.flatten(arguments).each((function(t){this.lists.include(t),this.addItems(t.getChildren())}),this),this},removeItems:function(){return $$(Array.flatten(arguments).map((function(t){this.elements.erase(t);var e=t.retrieve("sortables:start");return(this.options.handle&&t.getElement(this.options.handle)||t).removeEvent("mousedown",e),t}),this))},removeLists:function(){return $$(Array.flatten(arguments).map((function(t){return this.lists.erase(t),this.removeItems(t.getChildren()),t}),this))},getDroppableCoordinates:function(t){var e=t.getOffsetParent(),n=t.getPosition(e),i=window.getScroll(),o=e.getScroll();return n.x+=o.x,n.y+=o.y,"fixed"==e.getStyle("position")&&(n.x-=i.x,n.y-=i.y),n},getClone:function(t,e){if(!this.options.clone)return new Element(e.tagName).inject(document.body);if("function"==typeOf(this.options.clone))return this.options.clone.call(this,t,e,this.list);var n=e.clone(!0).setStyles({margin:0,position:"absolute",visibility:"hidden",width:e.getStyle("width")}).addEvent("mousedown",(function(t){e.fireEvent("mousedown",t)}));return n.get("html").test("radio")&&n.getElements("input[type=radio]").each((function(t,n){t.set("name","clone_"+n),t.get("checked")&&e.getElements("input[type=radio]")[n].set("checked",!0)})),n.inject(this.list).setPosition(this.getDroppableCoordinates(this.element))},getDroppables:function(){var t=this.list.getChildren().erase(this.clone).erase(this.element);return this.options.constrain||t.append(this.lists).erase(this.list),t},insert:function(t,e){var n="inside";this.lists.contains(e)?(this.list=e,this.drag.droppables=this.getDroppables()):n=this.element.getAllPrevious().contains(e)?"before":"after",this.element.inject(e,n),this.fireEvent("sort",[this.element,this.clone])},start:function(t,e){!this.idle||t.rightClick||!this.options.handle&&this.options.unDraggableTags.contains(t.target.get("tag"))||(this.idle=!1,this.element=e,this.opacity=e.getStyle("opacity"),this.list=e.getParent(),this.clone=this.getClone(t,e),this.drag=new Drag.Move(this.clone,Object.merge({droppables:this.getDroppables(),container:this.options.container?this.options.container:$("body")},this.options.dragOptions)).addEvents({onSnap:function(){t.stop(),this.clone.setStyle("visibility","visible"),this.element.setStyle("opacity",this.options.opacity||0),this.fireEvent("start",[this.element,this.clone])}.bind(this),onEnter:this.insert.bind(this),onCancel:this.end.bind(this),onComplete:this.end.bind(this)}),this.clone.inject(this.element,"before"),this.drag.start(t))},end:function(){this.drag.detach(),this.element.setStyle("opacity",this.opacity);var t=this;if(this.effect){var e=this.element.getStyles("width","height"),n=this.clone,i=n.computePosition(this.getDroppableCoordinates(n)),o=function(){this.removeEvent("cancel",o),n.destroy(),t.reset()};this.effect.element=n,this.effect.start({top:i.top,left:i.left,width:e.width,height:e.height,opacity:.25}).addEvent("cancel",o).chain(o)}else this.clone.destroy(),t.reset()},reset:function(){this.idle=!0,this.fireEvent("complete",this.element)},serialize:function(){var t=Array.link(arguments,{modifier:Type.isFunction,index:function(t){return null!=t}}),e=this.lists.map((function(e){return e.getChildren().map(t.modifier||function(t){return t.get("id")},this)}),this),n=t.index;return 1==this.lists.length&&(n=0),(n||0===n)&&n>=0&&n<this.lists.length?e[n]:e}})}()},9483:(t,e,n)=>{"use strict";n(3522),n(6531),n(3938);WO||(WO={}),WO.faveditor={},WO.faveditor.editableFavs={},WO.faveditor.maxNumberOfFavs=20,WO.faveditor.requestedMemberDB=!1,WO.faveditor.startsWith=function(t,e){return t.slice(0,e.length)==e};const i=new Class({Implements:Options,options:{fav:{}},initialize:function(t){this.setOptions(t),this.options.favoriteLi=['<a href="[[SEOURL]]" title="Wetter [[NAME]]" >','<span class="fav-name" id="faveditor-[[FAVID]]-name">[[NAME]]</span></a>','<a class="mover" href="[[SEOURL]]"><div class="mover"></div></a>','<a href="[[SEOURL]]" title="Wetter [[NAME]]"><div class="weatherblock"><img src="https://st',WO.system,'.wetteronline.de/dr/0.0.0/city/prozess/graphiken/symbole/standard/farbe/svg/default/[[SYMBOL]].png" alt="[[TEXT]]" title="Wetter [[NAME]] aktuell [[TEXT]] [[TT]] &deg;C" width="50px" height="35px" class="fav-symbol"/>','<div title="Wetter [[NAME]] aktuell [[TEXT]] [[TT]] &deg;C" class="fav-tmax">[[TT]] &deg;C</div></div></a>','<div class="editblock">','<div title="Favorit l&ouml;schen" class="delete"></div>',"</div>",'<div class="clearfix"></div>'].join(""),this.identifier=Base64.encode([this.options.fav.gid,this.options.fav.lat,this.options.fav.lon].join(";")),this.id=["faveditor-",this.identifier].join(""),this.liEle=new Element("li",{id:this.id,html:this.generateHtml()}),this.eventifyButtons(),this.inputForm=this.liEle.getChildren("form")[0],this.inputText=this.liEle.getChildren("form input")[0],this.nameEle=this.liEle.getChildren("a span.fav-name")[0],this.options.parentEle.grab(this.liEle),WO.faveditor.editableFavs[this.id]=this},generateHtml:function(){let t=this.options.favoriteLi;const e=this.favTpl2SeoUrl();WO.faveditor.startsWith(e,"/wetter")&&e.indexOf("%")<0&&e.indexOf(";")<0&&e.indexOf("|")<0&&(this.options.fav.seourl=e),t=this.assignSeoUrl(t,e),t=this.assignGeoStuff(t,this.options.fav);const n=WO.FavLoc.forecasts[this.identifier];return t=this.assignWeathertuff(t,n),t},favTpl2SeoUrl:function(){if(this.options.fav.seourl&&this.options.fav.seourl.length>0)return this.options.fav.seourl;const t=this.getOptionalGeoPath(),e="/?"+"pcid=pc_city_weather&gid=[[gid]][[optionalgeopath]]".replace("[[gid]]",this.options.fav.gid).replace("[[optionalgeopath]]",t);return WO.convertURL(e)},assignGeoStuff:function(t,e){return t.replace(/\[\[GEOID\]\]/g,e.gid).replace(/\[\[GEONAME\]\]/g,decodeURIComponent(e.name)).replace(/\[\[NAME\]\]/g,decodeURIComponent(e.nickname)).replace(/\[\[FAVID\]\]/g,Base64.encode([e.gid,e.lat,e.lon].join(";")))},assignWeathertuff:function(t,e){return e?t.replace(/\[\[TT_CLASS\]\]/g,e.ttclass).replace(/\[\[TT\]\]/g,e.tt).replace(/\[\[SYMBOL\]\]/g,e.symbol).replace(/\[\[TEXT\]\]/g,e.text):t.replace(/\[\[TT_CLASS\]\]/g,"").replace(/\[\[TT\]\]/g,"").replace(/\[\[SYMBOL\]\]/g,"").replace(/\[\[TEXT\]\]/g,"")},assignSeoUrl:function(t,e){return t.replace(/\[\[SEOURL\]\]/g,e)},getOptionalGeoPath:function(){let t="";return(this.options.fav.nogid&&0!=this.options.fav.nogid||this.options.fav.subgid&&0!=this.options.fav.subgid)&&(""!=this.options.fav.sublocationname&&(t+="&sublocationname="+decodeURIComponent(this.options.fav.sublocationname)),""==this.options.fav.name||1!=this.options.fav.nogid&&"true"!=this.options.fav.nogid||(t+="&locationname="+decodeURIComponent(this.options.fav.name)),t+="&lat="+decodeURIComponent(this.options.fav.lat),t+="&lon="+decodeURIComponent(this.options.fav.lon)),""!=this.options.fav.statename&&""!=this.options.fav.stateid&&(t+="&statename="+decodeURIComponent(this.options.fav.statename),t+="&stateid="+decodeURIComponent(this.options.fav.stateid)),t},eventifyButtons:function(){const t=this.liEle.getChildren("div.editblock div.delete");t.length>0&&t[0].addEvent("click",function(){WO.FavLoc.deleteFavorite(Base64.encode([this.options.fav.gid,this.options.fav.lat,this.options.fav.lon].join(";"))),this.liEle.dispose(),WO.faveditor.setSortables(),WO.faveditor.submitChanges()}.bind(this))}});WO.faveditor.startUpFavs=function(){WO.faveditor.generateFavs()},WO.faveditor.generateFavs=function(){if(!WO.localStorageUseable)return;let t=0;const e=$("faveditorlist");if(e.empty(),WO.FavLoc&&WO.FavLoc.favorites){for(let n=0;n<WO.FavLoc.favorites.length&&t<=WO.faveditor.maxNumberOfFavs;++n){new i({fav:WO.FavLoc.favorites[n],parentEle:e});t++}WO.faveditor.setSortables()}},WO.faveditor.setSortables=function(){let t=$("faveditorlist");if(!t)return;0!=t.getChildren("li").length&&(WO.faveditor.mySortables=new Sortables("faveditorlist",{opacity:.1,clone:!0,container:$("faveditorlist"),handle:"",revert:!1,onComplete:function(){0==WO.faveditor.compareSortableList()&&WO.faveditor.submitChanges()},onStart:function(){WO.faveditor.dissolveNoSearchResult()},onSort:function(){}}),WO.faveditor.initialList=WO.faveditor.mySortables.serialize())},WO.faveditor.compareSortableList=function(){const t=WO.faveditor.mySortables.serialize();if(t.erase(null),t.length!=WO.faveditor.initialList.length)return!1;for(let e=0;e<t.length;++e)if(null!=t[e]&&t[e]!=WO.faveditor.initialList[e])return!1;return!0},WO.faveditor.processSearch=function(){if(WO.faveditor.favoritesearchstring.get("value").length>1&&"clearfavorites"==WO.faveditor.favoritesearchstring.get("value"))return WO.user.loggedin&&(WO.storeItrackToAccount("",1),localStorage.removeItem("favorites")),void localStorage.removeItem("favorites");WO.faveditor.mySortables&&WO.faveditor.mySortables.serialize().length>=WO.faveditor.maxNumberOfFavs&&WO.faveditor.showNoSearchResult("Sie haben die maximale Anzahl an "+WO.faveditor.maxNumberOfFavs.toString()+" Orten erreicht."),WO.faveditor.favoritesearchstring.get("value").length>1&&(WO.faveditor.requestGeoData(WO.faveditor.favoritesearchstring.get("value")),WO.faveditor.favoritesearchstring.set("value",""),WO.faveditor.favoritesearchstring.blur(),WO.faveditor.favoritesearchstring.set("value",WO.faveditor.favoritesearchstringInitVal),$("favoriteautosuggestions").addClass("ashidden"))},WO.faveditor.showNoSearchResult=function(t){WO.faveditor.spinner.hide();$("resultinfo").set("text",t);new Fx.Morph("resultinfo",{duration:"250",transition:Fx.Transitions.Sine.easeOut}).start({opacity:1})},WO.faveditor.dissolveNoSearchResult=function(){$("resultinfo");new Fx.Morph("resultinfo",{duration:"1000",transition:Fx.Transitions.Sine.easeOut,onComplete:function(){}}).start({opacity:0})},WO.faveditor.highlightFav=function(t){const e=$(t);if(e){const n=e.getStyle("background-color");e.setStyle("background-color","#ffbb00");new Fx.Morph(t,{duration:"1000",transition:Fx.Transitions.Sine.easeOut,onStart:function(){},onComplete:function(){e.setStyle("background-color",n)}}).start({"background-color":"#10658E"})}},WO.faveditor.analyzeSearchResult=function(t){let e,n=!1;if(WO.faveditor.favoritesearchstring.set("value",WO.faveditor.favoritesearchstringInitVal),WO.faveditor.favoritesearchstring.blur(),$("favoriteautosuggestions").addClass("ashidden"),t){if("no"==t[0].match)return WO.faveditor.showNoSearchResult("Ihre Suche blieb leider erfolglos. Versuchen Sie es erneut."),!1;if(5!=t[0].geoID.length)return WO.faveditor.showNoSearchResult("Bitte geben Sie einen Ort oder eine Postleitzahl ein."),!1;{WO.localStorageUseable||WO.faveditor.showNoSearchResult("Zum Speichern der Favoriten mÃ¼ssen Sie Cookies akzeptieren.");const i=t[0];let o=[];WO.faveditor.mySortables&&(o=WO.faveditor.mySortables.serialize());for(let t=0;t<o.length;++t)["faveditor-",Base64.encode([i.geoID,i.latitude,i.longitude].join(";"))].join("")==o[t]&&(e=["faveditor-",Base64.encode([i.geoID,i.latitude,i.longitude].join(";"))].join(""),n=!0);if("FavLoc"in WO&&WO.FavLoc.favorites.each((function(t){i.geoID==t.gid&&i.locationName==t.name&&(e=["faveditor-",Base64.encode([t.gid,t.lat,t.lon].join(";"))].join(""),n=!0)})),1==n)return WO.faveditor.highlightFav(e),WO.faveditor.spinner.hide(),!1;const r=i.locationName,a=i.geoName!=i.locationName,s=null!=i.subLocationName&&i.geoName==i.locationName,l=new WO.FavLoc.favorite({gid:i.geoID,name:r,nickname:i.shortName,lat:i.latitude.toString(),lon:i.longitude.toString(),stateid:null!=i.subStateID?i.subStateID:i.stateID,statename:null!=i.subStateName?i.subStateName:i.stateName,position:(WO.FavLoc.favorites.length+1).toString(),sublocationname:null!=i.subLocationName?i.subLocationName:"",nogid:a.toString(),subgid:s.toString(),seourl:""});WO.faveditor.requestNewFavForecastData(l)}}},WO.faveditor.requestNewFavForecastData=function(t){new Request.JSON({url:"/?pid=p_city_local",onError:function(t,e){log(t,e),WO.faveditor.showNoSearchResult("Es ist ein Fehler aufgetreten. Versuchen sie es spÃ¤ter erneut.")},onFailue:function(t,e){WO.faveditor.showNoSearchResult("Es ist ein Fehler aufgetreten. Versuchen sie es spÃ¤ter erneut.")},onSuccess:function(e){WO.FavLoc.forecasts||(WO.FavLoc.forecasts=[]),WO.FavLoc.forecasts[Base64.encode([t.gid,t.lat,t.lon].join(";"))]=e[Base64.encode([t.gid,t.lat,t.lon].join(";"))],WO.FavLoc.favids.push(Base64.encode([t.gid,t.lat,t.lon].join(";"))),WO.FavLoc.favorites.push(t);new i({fav:t,parentEle:$("faveditorlist")});WO.updateIVWCounter(),WO.faveditor.spinner.hide(),WO.faveditor.setSortables(),WO.faveditor.submitChanges()}}).get({userfavs:Base64.encode([t.gid,"","",t.lat,t.lon].join(";")),favweather:!0,ireq:!0})},WO.faveditor.requestGeoData=function(t){if(t==WO.faveditor.favoritesearchstringInitVal)return;WO.faveditor.spinner.show();let e={name:t};t.search(/([0-9]+(\.[0-9]+)?),([0-9]+(\.[0-9]+)?)/)>-1&&(e={lat:RegExp.$1,lon:RegExp.$3});new Request.JSON({url:"/?pid=p_favorites&search=true",data:e,onComplete:function(t){WO.faveditor.analyzeSearchResult(t)}}).send()},WO.faveditor.submitChanges=function(){const t=WO.faveditor.mySortables.serialize();for(let e=0;e<WO.FavLoc.favorites.length;++e){const n=Base64.encode([WO.FavLoc.favorites[e].gid,WO.FavLoc.favorites[e].lat,WO.FavLoc.favorites[e].lon].join(";"));for(let i=0;i<t.length;++i)if(t[i]==["faveditor-",n].join("")){for(WO.FavLoc.favorites[e].position=i.toString();WO.FavLoc.favorites[e].position.length<2;)WO.FavLoc.favorites[e].position=["0",WO.FavLoc.favorites[e].position].join("");WO.faveditor.editableFavs[t[i]]&&(WO.FavLoc.favorites[e].seourl=WO.faveditor.editableFavs[t[i]].options.fav.seourl)}}if(WO.FavLoc.favorites.sortBy("position"),WO.localStorageUseable){WO.FavLoc.saveFavorites();try{WO.setFavsEdittedTimeStamp()}catch(t){log(t)}}WO.FavLoc.getForecastData(),WO.faveditor.setSortables(),"m"!=WO.application&&WO.initContentNaviFavsProcess()},WO.faveditor.dissolveChangesButton=function(){new Fx.Morph("sumbitfavchanges",{duration:"long",transition:Fx.Transitions.Sine.easeOut}).start({opacity:0})},WO.faveditor.init=function(){WO.faveditor.spinner=new WO.AjaxLoader("spinner",{color:"#ffbb00",size:30}),WO.autoSuggestInit("favoritesearchstring","favoritesearchform","favoriteautosuggestions",(function(){WO.faveditor.processSearch()})),WO.faveditor.favoritesearchstring=$("favoritesearchstring"),WO.faveditor.favoritesearchstringInitVal=WO.faveditor.favoritesearchstring.get("value"),$("resultinfo")&&$("resultinfo").addEvent("click",(function(){WO.faveditor.dissolveNoSearchResult()})),$("favoritesearchstring").addEvents({focus:function(){WO.faveditor.favoritesearchstring.set("value",""),WO.faveditor.dissolveNoSearchResult()},blur:function(){WO.faveditor.favoritesearchstring.set("value",WO.faveditor.favoritesearchstringInitVal)},keydown:function(t){27==t.code&&(WO.faveditor.favoritesearchstring.set("value",WO.faveditor.favoritesearchstringInitVal),WO.faveditor.favoritesearchstring.blur(),$("favoriteautosuggestions").addClass("ashidden"))}});let t=$$("#favoriteeditor .teaserblock");t.length&&(1==WO.localStorageUseable&&localStorage.getItem("hasSubscribed")&&"true"===localStorage.getItem("hasSubscribed")&&(t=t.filter((function(t){return"newsletterteaser"!=t.get("id")}))),t[Math.floor(Math.random()*t.length)].addEvent("click",(function(){location.href=this.getElement("a").get("href")})).show())},window.addEvent("favready",WO.faveditor.startUpFavs),window.addEvent("woready",WO.faveditor.init),WO.initialized=WO.initialized||{},WO.initialized.p_favorites=!0},8010:(t,e,n)=>{"use strict";n.d(e,{F:()=>Gt});var i=n(7994),o=function(){function t(){this.tools={},this.onActiveTool=new i.SyncEvent}return t.prototype.get=function(t){return this.tools[t]},t.prototype.destroy=function(t){if(t in this.tools){var e=this.tools[t];this.activeTool===e&&(this.activeTool=null),e.destroy(),delete this.tools[t]}},t.prototype.add=function(t,e){this.destroy(t),this.tools[t]=e},t.prototype.setActiveTool=function(t){if("string"==typeof t&&(t=this.get(t)),this.activeTool&&t!==this.activeTool&&this.activeTool.isActive())this.activeTool.toggle(!1);else if(this.activeTool&&t===this.activeTool&&t.isActive())return t.toggle(!1),this.activeTool=null,void this.onActiveTool.post(null);this.activeTool=t,t.toggle(!0),this.onActiveTool.post(t)},t}(),r=function(){function t(t,e,n){this.mapController=t,this.layerModes=e,this._activeLayerMode=n}return t.prototype.setActiveLayerMode=function(t){t!==this._activeLayerMode&&(this._previousLayerMode=this._activeLayerMode,this._activeLayerMode=t,this.mapController.events.LayerChanged.post(this._activeLayerMode))},t.prototype.getLayerGroup=function(t){return this._activeLayerMode.getLayerGroup(this.mapController,this.getSuperLayers.bind(this),this.onSuperLayerClick.bind(this))},t.prototype.getSuperLayers=function(){for(var t=[],e=0,n=this.layerModes;e<n.length;e++){var i=n[e],o=i.getSuperLayer();i.id===this._activeLayerMode.id&&(o.active=!0),t.push(o)}return t},t.prototype.onSuperLayerClick=function(t){for(var e=t.id,n=0,i=this.layerModes;n<i.length;n++){var o=i[n];if(o.id===e){this.setActiveLayerMode(o);break}}return null},Object.defineProperty(t.prototype,"activeLayerMode",{get:function(){return this._activeLayerMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousLayerMode",{get:function(){return this._previousLayerMode},enumerable:!1,configurable:!0}),t.prototype.replace=function(t,e){for(var n=0;n<this.layerModes.length;n++)this.layerModes[n]===t&&(this.layerModes[n]=e);this._activeLayerMode===t&&(this._activeLayerMode=e)},t}(),a=function(){this.LayerChanged=new i.SyncEvent,this.WillOpenGid=new i.VoidSyncEvent,this.FullscreenChanged=new i.SyncEvent,this.LoopSpeed=new i.SyncEvent,this.ToggleLoop=new i.SyncEvent,this.ToggleHomemark=new i.VoidSyncEvent,this.ChangeHomemark=new i.SyncEvent,this.HomemarkChanged=new i.SyncEvent,this.SearchFinished=new i.SyncEvent,this.PlayModeChanged=new i.SyncEvent,this.ReloadForTimeRange=new i.SyncEvent,this.UserActivity=new i.VoidAsyncEvent,this.LiveMode=new i.AsyncEvent,this.LayerToggleOpened=new i.AsyncEvent,this.ToggleAnimation=new i.VoidAsyncEvent,this.ToggleMobileSearch=new i.SyncEvent},s=n(2402),l=function(){function t(t){this.stringMap=t}return t.prototype.translate=function(t,e){if(void 0===e&&(e=this.stringMap),!(0,s.HD)(t)||!t)return"";var n=t.split(".");if(n.length>1){var i=n.shift();if(i in e&&"object"==typeof e&&!(0,s.kJ)(e))return this.translate(n.join("."),e[i])}return e&&t in e?e[t]:t},t.prototype.put=function(t,e,n){void 0===n&&(n=this.stringMap);var i=t.split(".");if(i.length>1){var o=i.shift();return o in n==!1&&(n[o]={}),void this.put(i.join("."),e,n[o])}n[t]=e},t}(),c=n(1584),u=c.Control.prototype.addTo,h=c.Control.prototype.remove;c.Control.include({addTo:function(t){return t._controls.push(this),u.apply(this,arguments)},remove:function(){return this._map&&this._map._controls.splice(this._map._controls.indexOf(this),1),h.apply(this,arguments)}}),c.Map.include({eachControl:function(t,e){for(var n=this._controls.slice(),i=0;i<n.length;i++)t.call(e,n[i]);return this}});var d,p=(d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},d(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});c.Map.mergeOptions({doubleClickZoom:!1,doubleRightClickZoom:!0});var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastTap=0,e._delta=0,e._taps=0,e._zoomDeltaSum=0,e}return p(e,t),e.prototype.addHooks=function(){var t=this;this._map.dragging&&(this._map.on("contextmenu",this._void,this),c.DomEvent.on(this._map._container,"touchstart",(function(){t.touch=!0})),this._map.on("mouseup",this._onDoubleRightClick,this))},e.prototype.removeHooks=function(){this._map.dragging&&(this._map.off("contextmenu",this._void,this),this._map.off("touchstart",this._onDoubleTap,this),this._map.off("mouseup",this._onDoubleRightClick,this),this._map.off("touchend",this._onTouchEnd,this),this._map.off("touchmove",this._onTouchDrag,this))},e.prototype._onTouchEnd=function(t){if(2===this._taps){if(this._zoomDeltaSum>.1)this._map.options.zoomAnimation?this._map._animateZoom(this._map.getCenter(),this._map._limitZoom(this._map.getZoom()),!0,this._map.options.zoomSnap):this._map._resetView(this._map.getCenter(),this._map._limitZoom(this._map.getZoom()));else{var e=this._map.options.zoomDelta;this._zoomTo(this._latlng,this._map.getZoom()+e)}this._taps=0}this._map.dragging.enable(),this._zoomDeltaSum=0},e.prototype._onTouchDrag=function(t){var e=this._map;if(2===this._taps&&t.touches){e.dragging.disable(),this.dragging=!0;var n=e.mouseEventToContainerPoint(t.touches[0]),i=this._lastMousePos.y-n.y;this._delta=.01*i,this._lastMousePos=n,this._zoomDeltaSum+=Math.abs(this._delta),e._move(this._map.getCenter(),e.getZoom()+this._delta,{pinch:!0,round:!1})}},e.prototype._void=function(){},e.prototype._onDoubleRightClick=function(t){var e=t.originalEvent;if(e.target===this._map._container)if(2===e.detail){var n=this._map,i=n.getZoom(),o=n.options.zoomDelta,r=3===e.which?i-o:i+o;this._zoomTo(t.latlng,r,3===e.which)}else if(this.touch&&1===e.detail){var a=(new Date).getTime();if(a-this._lastTap<300){var s=this._map;r=s.getZoom()+s.options.zoomDelta;this._zoomTo(t.latlng,r)}else this._lastTap=a}},e.prototype._onDoubleTap=function(t){if(!(t.touches.length>1)){var e=(new Date).getTime(),n=this._map.mouseEventToContainerPoint(t.touches[0]);e-this._lastTap<300&&(!this._lastMousePos||this._lastMousePos.distanceTo(n)<10)&&this._taps<2?this._taps++:this._taps=1,this._latlng=this._map.mouseEventToLatLng(t.touches[0]),this._lastMousePos=n,this._lastTap=e}},e.prototype._zoomTo=function(t,e,n){void 0===n&&(n=!1);var i=this._map;e!==i.getZoom()&&this._map.controller.events.UserActivity.post(),n?i.setZoomAround(t,e,{animate:!0}):i.setView(t,e,{animate:!0})},e}(c.Handler);c.Map.addInitHook("addHandler","doubleRightClickZoom",f);var m=n(8989);function g(t){var e=t["data-cache"];return e||(e={},1!==t.nodeType&&9!==t.nodeType&&+t.nodeType||(t.nodeType?t["data-cache"]=e:Object.defineProperty(t,"data-cache",{value:e,configurable:!0}))),e}function v(t,e,n){if("object"!=typeof e)"string"==typeof n?t.dataset[e]=n:g(t)[e]=n;else for(var i in e)v(t,i,e[i])}function y(t,e){return e in t.dataset?t.dataset[e]:g(t)[e]}function _(t){var e=document.createElement("div");return e.innerHTML=t,e.children}function w(t){return _(t)[0]}function b(t,e,n){if("object"!=typeof e)"number"==typeof n&&(n+="px"),t.style[e]=n;else for(var i in e)b(t,i,e[i])}function x(t,e,n){void 0===n&&(n=!t.classList.contains(e)),n?t.classList.add(e):t.classList.remove(e)}function T(t){var e=t.getBoundingClientRect();return{left:e.left,top:e.top+(document.body.scrollTop||document.documentElement.scrollTop||0)}}var S="transform";function C(t,e){if("string"==typeof e)return v(t,"woTransform",!1),this.css(S,e);if(!e||e.reset||!Object.keys(e).length)return v(t,"woTransform",null),this.css(S,"");var n=y(t,"woTransform")||{},i=(0,m.l)({},n,e),o=(0,s.S8)(i.scaleX,i.scale),r=(0,s.S8)(i.scaleY,i.scale),a=i.rotate,l="",c=i.x,u=i.y;if((0,s.$K)(c)||(0,s.$K)(u)){if(c=(0,s.$K)(c)?c:0,u=(0,s.$K)(u)?u:0,e.rounded){var h=window.devicePixelRatio||1;(0,s.hj)(c)&&(c=Math.round(c*h)/h),(0,s.hj)(u)&&(u=Math.round(u*h)/h)}var d=(0,s.hj)(c)?c+"px":c,p=(0,s.hj)(u)?u+"px":u;!1!==e.hardwareAcceleration?l+=" translate3d("+d+","+p+",0)":l+=" translate("+d+","+p+")"}((0,s.$K)(o)||(0,s.$K)(r))&&(!1!==e.hardwareAcceleration?l+=" scale3d("+(0,s.S8)(o,1)+","+(0,s.S8)(r,1)+",1)":l+=" scale("+(0,s.S8)(o,1)+","+(0,s.S8)(r,1)+")"),(0,s.$K)(a)&&(l+=" rotate("+a+")"),v(t,"woTransform",i),t.style[S]=l}function M(t,e){t.innerText=e,t.textContent=e}var P=n(295),k=n(3472),O=n(2883);c.Map.include({isFullscreen:function(){return this._isFullscreen||!1},getFullscreenElement:function(){return this.getContainer()},toggleFullscreen:function(t){var e=this.getContainer();this.getFullscreenElement(),document;this.controller.events.UserActivity.post();this.isFullscreen()?(this._disablePseudoFullscreen(e),this._pseudoFullscreen=!1):(this._enablePseudoFullscreen(e),this._pseudoFullscreen=!0)},_enablePseudoFullscreen:function(t){c.DomUtil.addClass(document.body,"leaflet-pseudo-fullscreen"),c.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),c.DomUtil.addClass(t,"leaflet-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange"),this.invalidateSize()},_disablePseudoFullscreen:function(t){c.DomUtil.removeClass(document.body,"leaflet-pseudo-fullscreen"),c.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),c.DomUtil.removeClass(t,"leaflet-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._tt||(this._tt=document.getElementById("WzTtDiV")),this._isFullscreen=t;var e=this.getContainer();t?(c.DomUtil.addClass(e,P.Z.on),c.DomUtil.addClass(e,"leaflet-fullscreen-on"),c.DomUtil.addClass(e,"leaflet-fullscreen"),this._tt&&this._container.appendChild(this._tt)):(c.DomUtil.removeClass(e,P.Z.on),c.DomUtil.removeClass(e,"leaflet-fullscreen-on"),c.DomUtil.removeClass(e,"leaflet-fullscreen"),this._tt&&document.body.appendChild(this._tt)),this.controller.events.FullscreenChanged.post(t),this.invalidateSize()},_onFullscreenChange:function(){var t=document,e=t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement;e!==this.getFullscreenElement()||this._isFullscreen?e!==this.getFullscreenElement()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))},contains:function(t){return!this.options.maxBounds||(0,c.latLngBounds)(this.options.maxBounds).contains((0,c.latLng)(t))}}),c.Map.addInitHook((function(){var t,e=this;if("onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t){var n=c.Util.bind(this._onFullscreenChange,this);this.whenReady((function(){c.DomEvent.on(document,t,n)})),this.on("unload",(function(){c.DomEvent.off(document,t,n)}))}var i=(0,k.d)();if(this.controller.mapMode.isInteractive()&&"true"===i.wrf&&(setTimeout((function(){return e.toggleFullscreen({pseudoFullscreen:!0})})),!this.controller.mapMode.features[O.Q.NoFullscreenBugfix])){var o=0,r=function(){e._size&&(e._size.x=e._size.x+1),e.invalidateSize({animate:!1}),++o<5&&setTimeout(r,1e3)};setTimeout(r,1e3)}})),c.Map.addInitHook((function(){this.on("dragend",(function(t){t.distance>5&&this.controller.events.UserActivity.post()}))}));var D=new c.Point(0,0);c.Draggable.include({_updatePosition:function(){var t=this._lastEvent,e=t.touches&&1===t.touches.length?t.touches[0]:t,n=this._newPos;if(e.clientX<0||e.clientX>window.innerWidth){var i=c.DomUtil.getPosition(this._element);if(n.subtract(i).distanceTo(D)>30)return}var o={originalEvent:t};this.fire("predrag",o),c.DomUtil.setPosition(this._element,n),this.fire("drag",o)}});var L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.prototype.addHooks=function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},e.prototype.removeHooks=function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},e.prototype._onWheelScroll=function(t){var e=c.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=window.setTimeout(c.Util.bind(this._performZoom,this),i),c.DomEvent.stop(t)},e.prototype._performZoom=function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*t.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,a=e+(this._delta>0?r:-r),s=t._limitZoom(a)-e;this._delta=0,this._startTime=null,s&&(t.controller.events.UserActivity.post(),t.setZoomAround(this._lastMousePos,e+s))},e}(c.Handler);function E(t){return t.changedTouches[0].identifier}c.Map.addInitHook("addHandler","woScrollWheelZoom",A);var I={};c.Map.TouchZoom.include({_onTouchMove:function(t){var e=function(t){if(!t)return[];for(var e=[],n=0,i=t;n<i.length;n++){var o=i[n];o.identifier in I==0&&e.push(o)}return e}(t.touches);if(e&&2===e.length&&this._zooming){var n=this._map,i=n.mouseEventToContainerPoint(e[0]),o=n.mouseEventToContainerPoint(e[1]),r=i.distanceTo(o)/this._startDist;if(this._zoom=n.getScaleZoom(r,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&r<1||this._zoom>n.getMaxZoom()&&r>1)&&(this._zoom=n._limitZoom(this._zoom)),"center"===n.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else if(n.zoomFocus)this._center=n.zoomFocus;else{var a=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===a.x&&0===a.y)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(n._moveStart(!0),this._moved=!0),n._move(this._center,this._zoom,{pinch:!0,round:!1}),c.DomEvent.preventDefault(t)}}});var R,z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._controls=[],e}return z(e,t),e.prototype.initialize=function(e,n){var i=this;this._mapController=n.mapController,t.prototype.initialize.call(this,e,n),this.on("move",(function(){c.DomUtil.setPosition(i._mapPane,i._getMapPanePos().round())}))},Object.defineProperty(e.prototype,"controller",{get:function(){return this._mapController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.controller.language},enumerable:!1,configurable:!0}),e}(c.Map);function j(t){try{return decodeURIComponent(Array.prototype.map.call(atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(e){return atob(t)}}!function(t){t[t.WetterRadarRegenRadar=0]="WetterRadarRegenRadar",t[t.ProfiRadar=1]="ProfiRadar",t[t.Sail=2]="Sail"}(R||(R={}));var B=n(2571);var W="Europe/Berlin";function F(t,e,n){if(e.isSame(n))return t.translate("current");var i=U(e,n);return 0===i?t.translate("today"):-1===i?t.translate("yesterday"):-2===i?t.translate("beforeYesterday"):1===i?t.translate("tomorrow"):2===i?t.translate("afterTomorrow"):n.format("DD.MM.")}function U(t,e){var n=B([t.year(),t.month(),t.date()]);return B([e.year(),e.month(),e.date()]).diff(n,"days")}function Z(t){return t?V(t).tz(W):null}function V(t){if(parseInt(t,10)){var e=parseInt(t.substr(0,4)),n=parseInt(t.substr(4,2))-1,i=parseInt(t.substr(6,2)),o=12===t.length?0:1,r=parseInt(t.substr(8+o,2)),a=parseInt(t.substr(10+o,2));return B.utc([e,n,i,r,a])}}function H(t,e,n,i,o){var r=t.layerManager.activeLayerMode.getLayerState(t,n,e);return i&&r.dynamicLayer.events.invalidated.once((function(){return setTimeout((function(){return i.destroy()}),600)})),r}var Y=n(3858),q=function(){function t(t){this.options=t,WO.Dom&&WO.Dom.createLoadingSpinner&&(this.spinner=WO.Dom.createLoadingSpinner(t),this.spinner.length?this.el=this.spinner[0]:this.spinner.loadingSpinner&&this.spinner.loadingSpinner.length?this.el=this.spinner.loadingSpinner[0]:this.el=this.spinner)}return t.prototype.stopAnimation=function(){this.spinner&&this.spinner.stopAnimation&&this.spinner.stopAnimation()},t.prototype.startAnimation=function(){this.spinner&&this.spinner.startAnimation&&this.spinner.startAnimation()},t}();var G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return G(e,t),e.prototype.initialize=function(n){t.prototype.initialize.call(this,c.Util.extend(e.options,n))},e.prototype.onAdd=function(t){var n=this.el=c.DomUtil.create("div",Y.Z.control,t._container),i=c.DomUtil.create("div");i.style.display="none";var o,r=(void 0===(o={autoplay:!1})&&(o={}),new q(o));return r.el&&n.appendChild(r.el),r.stopAnimation(),this.indicator=r,this.progress=c.DomUtil.create("span",Y.Z.progress,n),M(this.progress,"Karten werden geladen"),this.progress.style.display="none",this.progressBar=c.DomUtil.create("span",Y.Z.progressBar,this.progress),e.instance=this,i},e.prototype.onRemove=function(t){t._container.removeChild(this.el)},e.prototype.toggle=function(t,e,n){var i=this;void 0===e&&(e=!1),void 0===n&&(n=0),clearTimeout(this.timeout),n>0?this.timeout=window.setTimeout((function(){return i.toggle(t,e)}),n):t?(this.indicator.startAnimation(),c.DomUtil.addClass(this.el,Y.Z.active),e?c.DomUtil.addClass(this.el,Y.Z.noTouch):c.DomUtil.removeClass(this.el,Y.Z.noTouch)):(this.indicator.stopAnimation(),c.DomUtil.removeClass(this.el,Y.Z.active),c.DomUtil.removeClass(this.el,Y.Z.noTouch))},e.prototype.setProgress=function(t){(0,s.$K)(t)?(this.progress.style.display="",b(this.progressBar,"width",t+"%")):this.progress.style.display="none"},e.options={pane:"overlayPane"},e}(c.Control),Q=n(7868),K=n(7737),$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),J=function(){function t(t){this._fullExpandMinWidth=0,this.options=t,t&&(this.mapEvents=t.events,this._language=t.language)}return t.prototype.createEl=function(t){var e=this;this.map=t;var n=this._el=w('\n<a class="'.concat(Q.Z.wrapper," leaflet-layer-btn ").concat(K.Z.permanentControl,'">\n<div class="').concat(Q.Z.btn,' ripple"></div>\n<div class="').concat(Q.Z.overflowContainer,'">\n <div class="').concat(Q.Z.overlay,'">\n  <div class="').concat(Q.Z.buttons,'">\n   <div class="').concat(Q.Z.btn," ").concat(Q.Z.left,' ripple"></div><div class="').concat(Q.Z.superLayers,'"></div>\n  </div>\n  <div class="').concat(Q.Z.inner,'">\n </div>\n</div>\n</div>\n</a>'));this._overflowContainer=n.querySelector("."+Q.Z.overflowContainer),this._inner=n.querySelector("."+Q.Z.inner),this._overlay=n.querySelector("."+Q.Z.overlay),c.DomEvent.disableClickPropagation(n),c.DomEvent.disableScrollPropagation(n),this.options&&this.options.layers&&this.update(this.options);for(var i=function(t){c.DomEvent.stopPropagation(t),e.toggle()},o=n.querySelectorAll("."+Q.Z.btn),r=0;r<o.length;r++)c.DomEvent.on(o[r],"click",i);return this.mapEvents&&(this.mapEvents.SearchFinished.attach(this.onSearchFinished.bind(this)),this.mapEvents.HomemarkChanged.attach(this.onHomemarkChanged.bind(this))),window.addEventListener("resize",this.onResize.bind(this)),n},Object.defineProperty(t.prototype,"language",{get:function(){return this._language||this.map.language},enumerable:!1,configurable:!0}),t.prototype.update=function(t){this.options=t;var e=this._el,n=this._inner,i=e.querySelector("."+Q.Z.superLayers),o=this.language,r=this._homemarkBtn&&"none"!==this._homemarkBtn.style.display,a=function(t){return t&&(t.innerText||t.textContent)||""}(this._homemarkBtn);(x(e,Q.Z.radio,!0===t.radioButtons),t.includeHomemark?t.layers.unshift({id:"homemark"}):(this._homemarkBtn=null,this._homemarkLayer=null),n.innerHTML="",i.innerHTML="",this.options.headline)&&M(c.DomUtil.create("div",Q.Z.headline,n),this.options.headline);var s,l=this.useTwoColumns(),u=n;l&&(u=c.DomUtil.create("div",Q.Z.col+" "+Q.Z.left,n),s=c.DomUtil.create("div",Q.Z.col+" "+Q.Z.right,n));for(var h=0,d=0,p=t.layers;d<p.length;d++){var f="homemark"===(w=p[d]).id,m=u;l&&h%2==1&&(m=s),M(_=c.DomUtil.create("button","layer-btn-"+w.id+(!1!==w.active?" "+Q.Z.active:""),m),f?a:o.translate("layers."+(w.textId||w.id))),x(_,Q.Z.unavailable,!0===w.unavailable),v(_,{layer:w,layerParent:t.layerParent,layerToggle:this,callback:t.onLayerClick,mapEvents:this.mapEvents}),c.DomEvent.on(_,"click",this.onLayerClick,_),f&&(this._homemarkBtn=_,this._homemarkLayer=w,this.toggleHomemarkButton(r)),h++}for(var g=0,y=t.superLayers;g<y.length;g++){var _,w=y[g];v(_=c.DomUtil.create("a",Q.Z.superLayerBtn+" wo-tt ripple super-layer-btn-"+w.id+(w.active?" "+Q.Z.active:""),i),{superLayer:w,layerToggle:this,callback:t.onSuperLayerClick,woTT:o.translate("layers."+(w.textId||w.id))}),c.DomEvent.on(_,"click",this.onSuperLayerClick,_)}this.onResize(),this.updateSize()},t.prototype.toggleHomemarkButton=function(t){var e=this._homemarkBtn;e&&(t?e.parentNode||this._inner.insertBefore(e,this._inner.firstChild):e.parentNode&&e.parentNode.removeChild(e))},t.prototype.onResize=function(){var t=this.options;if(t&&t.fullExpand){var e=this._el,n=T(e),i=e.offsetWidth,o=t.fullExpand.marginLeft,r=n.left+i-o;this._fullExpandMinWidth=r,b(this._inner,"minWidth",r)}else b(this._inner,"minWidth",""),this._fullExpandMinWidth=0},t.prototype.useTwoColumns=function(){return!0===this.options.twoColumns},t.prototype.updateSize=function(){if(c.DomUtil.hasClass(this._el,Q.Z.opened)){var t=this._overlay.getBoundingClientRect();b(this._overflowContainer,{width:t.width,height:t.height})}else b(this._overflowContainer,{width:"",height:""})},t.prototype.onSearchFinished=function(t){if(this._homemarkBtn){if(!t)return this._homemarkLayer.visible=!1,void this.toggleHomemarkButton(!1);var e=t.sublocation?t.sublocation+" ("+t.name+")":t.name;this._homemarkLayer.visible=!0,this.toggleHomemarkButton(!0),M(this._homemarkBtn,e),this.updateSize()}},t.prototype.onHomemarkChanged=function(t){this._homemarkBtn&&(x(this._homemarkBtn,Q.Z.active,t),this._homemarkLayer.active=t,this.updateSize())},t.prototype.onLayerClick=function(){var t=y(this,"callback"),e=y(this,"layer"),n=y(this,"layerParent"),i=y(this,"layerToggle"),o=y(this,"mapEvents");if("homemark"===e.id)return o.ToggleHomemark.post(),void i.toggle(!1);if(t){var r=t(e);if(null!==r)return x(this,Q.Z.active,"active"===r),void i.toggle(!1)}if(i.toggle(!1),n){if((0,s.kJ)(e.id))for(var a=0,l=e.id;a<l.length;a++){var c=l[a];n.toggleLayer(c)}else n.toggleLayer(e.id);x(this,Q.Z.active)}},t.prototype.onSuperLayerClick=function(){var t=y(this,"superLayer"),e=y(this,"layerToggle"),n=y(this,"callback");n&&!1===n(t)||e.toggle(!1)},t.prototype.activateSuperLayer=function(t){for(var e=0,n=this.options.superLayers;e<n.length;e++){var i=n[e];if(i.id===t){this.options.onSuperLayerClick&&this.options.onSuperLayerClick(i);break}}},t.prototype.toggle=function(t){void 0===t&&(t=!c.DomUtil.hasClass(this._el,Q.Z.opened)),x(this._el,Q.Z.opened,t),this.updateSize(),this.mapEvents&&this.mapEvents.LayerToggleOpened.post(t),"undefined"!=typeof window&&"UnTip"in window&&window.UnTip()},t}(),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.basis=new J(e)},e.prototype.onAdd=function(t){return this.basis.createEl(t)},e.prototype.update=function(t){this.basis.update(t)},e}(c.Control);function et(t,e){return e.events=t,new tt(e)}var nt=n(88),it=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e.prototype.onAdd=function(t){var e=this,n=this.el=c.DomUtil.create("div",nt.Z.container,t._container),i=c.DomUtil.create("div",nt.Z.inner,n);this.text=c.DomUtil.create("span",void 0,i);var o=c.DomUtil.create("div",nt.Z.x);i.appendChild(o),c.DomEvent.on(o,"click",(function(){return e.hide()}));var r=c.DomUtil.create("div");return r.style.display="none",r},e.prototype.onRemove=function(t){c.DomUtil.remove(this.el)},e.prototype.show=function(t){c.DomUtil.addClass(this.el,nt.Z.active),this.text.innerHTML=t},e.prototype.hide=function(){c.DomUtil.removeClass(this.el,nt.Z.active)},e}(c.Control);var rt,at=n(507),st=n(5938),lt=n(6733),ct=function(){function t(e){this.storageKey=e,this.settings={},this.active=t.testForAvailability(),this.loadFromStorage(),this._save=this.saveToStorage.bind(this)}return t.createSettings=function(e){if(void 0===e&&(e="wr_settings"),e in this.cache)return this.cache[e];var n=new t(e);return this.cache[e]=n,n},t.testForAvailability=function(){try{var t="__test__";return localStorage.setItem(t,"1"),localStorage.removeItem(t),!0}catch(t){}return!1},t.prototype.loadFromStorage=function(){if(this.active)try{var t=localStorage.getItem(this.storageKey);t&&(this.settings=JSON.parse(t))}catch(t){}},t.prototype.set=function(t,e){return this.settings[t]=e,this.save(),this},t.prototype.has=function(t){return t in this.settings},t.prototype.get=function(t,e){var n=this.settings[t];return void 0!==n?n:e},t.prototype.remove=function(t){return delete this.settings[t],this.save(),this},t.prototype.save=function(){this.active&&(clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout(this._save.bind(this),50))},t.prototype.saveToStorage=function(){localStorage.setItem(this.storageKey,JSON.stringify(this.settings))},t.cache={},t}(),ut=ct.createSettings();function ht(t){return t?ct.createSettings(t):ut}function dt(t){return"periodCurrent"===t||t in rt}!function(t){t[t.periodCurrentLowRes=0]="periodCurrentLowRes",t[t.periodCurrentHighRes=1]="periodCurrentHighRes",t[t.periodCurrentFlowmo=2]="periodCurrentFlowmo"}(rt||(rt={}));var pt,ft=rt.periodCurrentLowRes,mt=function(){function t(e){this.mapController=e;var n,i=ht(),o=ft;if(i.has(t.settingsKey)){var r=i.get(t.settingsKey);void 0!==r&&(o=n=r)}var a=(0,k.d)();if("wrp"in a){var s=a.wrp;s in rt&&(o=rt[s]),o===rt.periodCurrentFlowmo&&(o=n||ft)}t.onChange(o),this.periodCurrentResolution=new st.y({initialValue:o,filter:function(t,e){return t!==e}}),this.periodCurrentResolution.addListener(t.onChange)}return t.prototype.setFlowmoController=function(t){var e=this;this.flowmoController=t;var n=this.periodCurrentResolution.get();t.onChange.attach((function(t){n=e.periodCurrentResolution.get()!==rt.periodCurrentFlowmo?e.periodCurrentResolution.get():n,t?e.periodCurrentResolution.set(rt.periodCurrentFlowmo):e.periodCurrentResolution.set(n)}))},t.onChange=function(e){e!==rt.periodCurrentFlowmo&&ht().set(t.settingsKey,e)},t.prototype.transformPeriodKey=function(t,e){if(void 0===e&&(e=!1),this.mapController.mapMode.isEmbedded())return t;var n=this.mapController.layerManager.activeLayerMode;return n.isWebGl()&&"periodCurrent"===t||e&&t.indexOf("periodCurrent")>-1?this.flowmoController&&this.flowmoController.isActive()?rt[rt.periodCurrentFlowmo]:n.isWebGl()?t:rt[this.periodCurrentResolution.get()]:t},t.settingsKey="currentResolution",t}();function gt(t){return pt||(pt=new mt(t)),pt}var vt,yt,_t=n(4484);!function(t){t[t.DropUpButton=0]="DropUpButton",t[t.DropUpPermanent=1]="DropUpPermanent",t[t.AlwaysShow=2]="AlwaysShow",t[t.MobileButtonPermanent=3]="MobileButtonPermanent",t[t.MobileButton=4]="MobileButton"}(vt||(vt={})),function(t){t[t.Nothing=0]="Nothing",t[t.Small=1]="Small",t[t.Locked=2]="Locked"}(yt||(yt={}));var wt=new st.v,bt=function(){function t(t,e,n,o,r){this.key=t,this.mapController=e,this.parent=n,this.role=o,this.decoration=r,this.OnActive=new i.SyncEvent,this.active=!1,this.buildButton()}return t.create=function(e,n,i,o){for(var r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];return new t(e,n,i,o,r)},t.prototype.buildButton=function(){var t=this.el=this.textEl=c.DomUtil.create("div",this.role===vt.MobileButton||this.role===vt.MobileButtonPermanent?lt.Z.mobileControl:at.Z.control);this.role===vt.AlwaysShow?c.DomUtil.addClass(t,this.hasDecoration(yt.Small)?at.Z.periodSmall:at.Z.period):this.role===vt.MobileButton?(c.DomUtil.addClass(t,"ripple"),v(t,"rippleColor","#fff")):this.role===vt.DropUpButton?(c.DomUtil.addClass(t,at.Z.period),c.DomUtil.addClass(t,at.Z.dropUpBtn),this.hasDecoration(yt.Locked)&&c.DomUtil.addClass(t,at.Z.dropUpBtnDisable)):this.role!==vt.DropUpPermanent&&this.role!==vt.MobileButtonPermanent||(this.textEl=c.DomUtil.create("div",lt.Z.textEl,t),c.DomUtil.removeClass(t,at.Z.control),lt.Z.mobileControlPermanent&&c.DomUtil.addClass(t,lt.Z.mobileControlPermanent),this.periodCurrentButton=new xt(t,this.parent._timeModel,this.parent._map)),this.updateText(),c.DomEvent.on(t,"click",this.onPeriodClick,this)},t.prototype.hasDecoration=function(t){return this.decoration.indexOf(t)>-1},t.prototype.updateText=function(){M(this.textEl,this.mapController.language.translate("timePeriods."+this.key))},t.prototype.onPeriodClick=function(){var t=this.parent,e=t._timeModel,n=e._timeRange.get().id,i=this.key;!1!==wt.set(i)&&(i&&i!==n?(e.setTimeRange(i),this.mapController.events.UserActivity.post()):i===n&&t.isLooping()&&t.playPause())},t.prototype.equalsKey=function(t){return!(this.role!==vt.MobileButton&&this.role!==vt.AlwaysShow||!dt(t)||!dt(this.key))||this.key===t},t.prototype.toggleActive=function(t){void 0===t&&(t=!this.active);var e=this.active;this.active=t,this.role===vt.MobileButton?x(this.el,lt.Z.active,t):x(this.el,at.Z.active,t),e!==t&&this.OnActive.post(t)},t.prototype.remove=function(){c.DomUtil.remove(this.el),this.periodCurrentButton&&this.periodCurrentButton.remove()},t.prototype.setPeriod=function(t){this.key=t,this.updateText()},t}(),xt=function(){function t(t,e,n){this.parentElement=t,this.timeModel=e,this.map=n,this.initPeriodButtons(),gt(n.controller).periodCurrentResolution.addListener(this.onResolutionChange.bind(this)),this.onResolutionChange(),this.onPeriodControllerHide=this.onPeriodControllerHide.bind(this),Tt.events.hide.addListener(this.onPeriodControllerHide),this.onTimeRange=this.onTimeRange.bind(this),e._timeRange.addListener(this.onTimeRange),this.onTimeRange(),n.on("zoomend",this.onZoom,this),this.onZoom()}return t.prototype.onZoom=function(){var t=this.map.getZoom(),e=(0,_t.CY)().timeRangeConfig[rt[rt.periodCurrentHighRes]].timeResolution[Math.floor(t)],n=(0,_t.CY)().timeRangeConfig[rt[rt.periodCurrentLowRes]].timeResolution[Math.floor(t)];M(this.highRes,"".concat(e," min")),M(this.lowRes,"".concat(n," min"))},t.prototype.initPeriodButtons=function(){var t=this,e=this.el=w('<div class="'.concat(lt.Z.wrapper," ").concat(K.Z.fadeOutControl,'">\n<div class="').concat(lt.Z.choice,' ripple" id="wr-period-highres">5 min</div>\n<div class="').concat(lt.Z.choice,' ripple" id="wr-period-lowres">15 min</div>\n</div>')),n=this.highRes=e.querySelector("#wr-period-highres"),i=this.lowRes=e.querySelector("#wr-period-lowres");c.DomEvent.on(n,"click",(function(e){c.DomEvent.stopPropagation(e),gt(Gt.get(t.map)).periodCurrentResolution.set(rt.periodCurrentHighRes)})),c.DomEvent.on(i,"click",(function(e){c.DomEvent.stopPropagation(e),gt(Gt.get(t.map)).periodCurrentResolution.set(rt.periodCurrentLowRes)})),this.parentElement.appendChild(e)},t.isCurrentPeriod=function(t){return t in rt&&"periodCurrentFlowmo"!==t},t.prototype.onTimeRange=function(){var t=this.timeModel.getActivePeriod();x(this.el,lt.Z.hidden,!dt(t))},t.prototype.onResolutionChange=function(t){void 0===t&&(t=gt(Gt.get(this.map)).periodCurrentResolution.get());var e=t===rt.periodCurrentHighRes;x(this.highRes,lt.Z.active,e),x(this.lowRes,lt.Z.active,!e)},t.prototype.remove=function(){c.DomUtil.remove(this.el),Tt.events.hide.removeListener(this.onPeriodControllerHide),this.map.off("zoomend",this.onZoom,this),this.timeModel._timeRange.removeListener(this.onTimeRange)},t.prototype.onPeriodControllerHide=function(){x(this.el,lt.Z.active,!1)},t}(),Tt=function(){function t(e,n){this.mapController=e,this.parent=n,n._timeModel._timeRange.addListener(this.onTimeRange.bind(this)),this.update(),t.events.hideView.addListener(this.hideDropUp.bind(this))}return t.prototype.update=function(){this.parent.options.embeddedMode?this.createEmbeddedPeriodButtons():this.createPeriodButtons()},t.prototype.createMobilePeriodButtons=function(){var t=this.parent,e=t.inner;if(this.periodButtons)for(var n=0,i=this.periodButtons;n<i.length;n++){(p=i[n]).remove()}this.periodBtn&&c.DomUtil.remove(this.periodBtn);var o=t.options.periodMobile,r=o[0],a=t._timeModel.getActivePeriod().replace(/(High|Low)Res/g,"");a&&o.indexOf(a)>-1&&(r=a),this.periodButtons=[];var s=this.periodBtn=c.DomUtil.create("div",at.Z.period);e.insertBefore(s,e.firstChild),this.dropUpBtnText=bt.create(r,this.mapController,t,vt.MobileButtonPermanent),s.appendChild(this.dropUpBtnText.el);var l=c.DomUtil.create("div",at.Z.dropUpWrapper,s),u=c.DomUtil.create("div",at.Z.dropUpInner,l),h=c.DomUtil.create("div",at.Z.dropUpBackdrop,t._map._container);c.DomEvent.disableScrollPropagation(h),c.DomEvent.disableClickPropagation(h);for(var d=0;d<o.length;d++){var p=bt.create(o[d],this.mapController,t,vt.MobileButton);u.insertBefore(p.el,u.firstChild),this.periodButtons.push(p)}var f=!1;c.DomEvent.on(s,"click",(function(){b(l,"height",(f=!f)?u.getBoundingClientRect().height:0),x(this,at.Z.opened,f),x(h,at.Z.active,f)}),s),c.DomEvent.on(h,"click",(function(t){c.DomEvent.stopPropagation(t),s.click()}))},t.prototype.createPeriodButtons=function(){var t=this,e=this.parent,n=e.inner,i=e.options.periodDropUp,o=e.options.periodShowAlways;if(this.periodButtons)for(var r=0,a=this.periodButtons;r<a.length;r++){(l=a[r]).remove()}this.periodButtons=[];for(var s=o.length-1;s>=0;s--){var l=bt.create(o[s],this.mapController,e,vt.AlwaysShow,s>=2?yt.Small:yt.Nothing);n.insertBefore(l.el,n.firstChild),this.periodButtons.push(l)}if(this.dropUpBtn&&c.DomUtil.remove(this.dropUpBtn),i.length){var u=this.dropUpBtn=c.DomUtil.create("div",[at.Z.control,at.Z.period,at.Z.dropUp].join(" "));n.insertBefore(this.dropUpBtn,n.firstChild),this.dropUpBtnText=bt.create(i[0],this.mapController,e,vt.DropUpPermanent),u.insertBefore(this.dropUpBtnText.el,u.firstChild);var h,d=this.dropUpInner=c.DomUtil.create("div",at.Z.dropUpInner,this.dropUpBtn);for(s=0;s<i.length;s++){var p=bt.create(i[s],this.mapController,e,vt.DropUpButton);d.insertBefore(p.el,d.firstChild)}c.DomEvent.on(this.dropUpBtn,"mouseenter",(function(){clearTimeout(h),t.showDropUp()})),c.DomEvent.on(this.dropUpBtn,"mouseleave",(function(){h=setTimeout((function(){return t.hideDropUp()}),800)}))}this.onTimeRange()},t.prototype.showDropUp=function(){var e=this.dropUpInner;e&&b(e,"height",e.scrollHeight),c.DomUtil.addClass(this.parent.inner,"opened"),t.events.show.set(this)},t.prototype.hideDropUp=function(){this.dropUpInner&&b(this.dropUpInner,"height",""),c.DomUtil.removeClass(this.parent.inner,"opened"),t.events.hide.set(this)},t.prototype.createEmbeddedPeriodButtons=function(){var t=this.parent,e=t.inner,n=t.options.periodEmbedded;if(this.periodButtons)for(var i=0,o=this.periodButtons;i<o.length;i++){(a=o[i]).remove()}this.periodButtons=[];for(var r=n.length-1;r>=0;r--){var a=bt.create(n[r],this.mapController,t,vt.AlwaysShow);e.insertBefore(a.el,e.firstChild),this.periodButtons.push(a)}this.onTimeRange()},t.prototype.onTimeRange=function(){var t=this.parent,e=t._timeModel.getActivePeriod();!t.options.embeddedMode&&this.dropUpBtnText&&(this.dropUpBtnText.toggleActive(!1),this.dropUpBtn&&c.DomUtil.removeClass(this.dropUpBtn,at.Z.active));for(var n=!1,i=0,o=this.periodButtons;i<o.length;i++){var r=o[i];r.equalsKey(e)?(r.toggleActive(!0),n=!0):r.toggleActive(!1)}!t.options.embeddedMode&&this.dropUpBtnText&&(n?this.dropUpBtnText.setPeriod(t.options.periodDropUp[0]):(this.dropUpBtnText.toggleActive(!0),this.dropUpBtnText.setPeriod(e),this.dropUpBtn&&c.DomUtil.addClass(this.dropUpBtn,at.Z.active))),-1===e.toLowerCase().indexOf("current")&&this.hideDropUp()},t.events={show:new st.v,hide:new st.v,hideView:new st.v},t}(),St=n(194),Ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Mt(t){return at.Z[t]||""}var Pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pauseMode="pause",e.updateSliderSize=function(){var t=e._timeModel._timeRange.get(),n=e._timeModel.getTimeSteps();if(n.length<=1)return e.sliderWrapper.style.display="none",e.prevBtn&&(e.prevBtn.style.display="none"),void(e.nextBtn&&(e.nextBtn.style.display="none"));e.sliderWrapper.style.display="",e.prevBtn&&(e.prevBtn.style.display=""),e.nextBtn&&(e.nextBtn.style.display="");var i=V(t.liveid),o=V(n[0].id),r=V(n[n.length-1].id);if(i<o)b(e.bgAnal,"width",0),b(e.bgProg,"width","100.01%");else if(i>r)b(e.bgProg,"width",0),b(e.bgAnal,"width","100.01%");else{for(var a=void 0,l=0;l<n.length;l++)if(n[l].id===t.liveid){a=l;break}if((0,s.$K)(a)){var c=100*(1-a/(n.length-1));100===c&&(c=100.01),b(e.bgProg,"width",c+"%"),b(e.bgAnal,"width","")}}e.onTime()},e}return Ct(e,t),e.prototype.initialize=function(n){if(!n.timeModel)throw new Error("No time model given");t.prototype.initialize.call(this,(0,m.l)({},e.options,n)),this._timeModel=n.timeModel,this._looping=new st.y({initialValue:!1,filter:st.y.simpleFilter}),e.instance=this},e.prototype.onAdd=function(t){var e=this;this._map=t;var n=this.el=c.DomUtil.create("div",at.Z.wrapper+" "+K.Z.fadeOutControl),i=this.inner=c.DomUtil.create("div",at.Z.el);if(!0===this.options.permanent&&c.DomUtil.addClass(n,K.Z.permanentControl),this.options.embeddedMode&&(c.DomUtil.addClass(n,K.Z.permanentControl),c.DomUtil.addClass(i,K.Z.fadeOutControl)),this.options.embeddedMode?i.innerHTML='\n<div class="'.concat(at.Z.control," ").concat(at.Z.sliderWrapper,'">\n  <div class="').concat(at.Z.sliderBackground,'">\n    <div class="').concat(at.Z.sliderPrognosis,'"></div>\n    <div class="').concat(at.Z.sliderAnalysis,'"></div>\n    <div class="').concat(at.Z.sliderKnob,'"></div>\n  </div>\n</div>\n<div class="').concat(at.Z.control," ").concat(at.Z.play,'"></div>'):i.innerHTML='\n<div class="'.concat(at.Z.control," ").concat(at.Z.sliderWrapper,'">\n  <div class="').concat(at.Z.sliderBackground,'">\n    <div class="').concat(at.Z.sliderPrognosis,'"></div>\n    <div class="').concat(at.Z.sliderAnalysis,'"></div>\n    <div class="').concat(at.Z.sliderKnob,'"></div>\n  </div>\n</div>\n<div class="').concat(at.Z.control," ").concat(at.Z.prev,'"></div>\n<div class="').concat(at.Z.control," ").concat(at.Z.next,'"></div>\n<div class="').concat(at.Z.control," ").concat(at.Z.latest,'"></div>\n<div class="').concat(at.Z.control," ").concat(at.Z.play," ripple ").concat(Mt("noFullscreenBorder"),'"></div>'),n.appendChild(i),!this.options.withLatestBtn){var o=i.querySelector("."+at.Z.next);o&&(c.DomUtil.setClass(o,at.Z.control+" "+at.Z.prev),o.innerHTML="");var r=i.querySelector("."+at.Z.latest);r&&c.DomUtil.setClass(r,at.Z.control+" "+at.Z.next)}if(this.options.compactMode&&c.DomUtil.addClass(n,at.Z.compact),this.createInfoButton(i),this.createSliderTooltip(i),this.options.fullscreenBtn&&t.toggleFullscreen){var a=this.fullscreenBtn=c.DomUtil.create("div",[at.Z.control,at.Z.fullscreen,"wo-tt"].join(" "),i);c.DomEvent.on(a,"click",(function(){return t.toggleFullscreen()}));var s=Gt.get(t).language;v(a,"woTT",s.translate("enableFullscreen")),this._map.controller.events.FullscreenChanged.attach((function(t){v(a,"woTT",s.translate(t?"disableFullscreen":"enableFullscreen"))}))}c.DomEvent.disableScrollPropagation(n),c.DomEvent.disableClickPropagation(n),function(t){t.addEventListener("touchstart",(function(t){var e=E(t);I[e]=!0;var n=function(t){E(t)===e&&(delete I[e],document.removeEventListener("touchend",n),document.removeEventListener("touchcancel",n))};document.addEventListener("touchend",n),document.addEventListener("touchcancel",n)}))}(n);var l=this.prevBtn=i.querySelector("."+at.Z.prev);l&&c.DomEvent.on(l,"click",this.prev,this);var u=this.nextBtn=i.querySelector("."+at.Z.next);u&&c.DomEvent.on(u,"click",this.next,this);var h=this.latestBtn=i.querySelector("."+at.Z.latest);h&&c.DomEvent.on(h,"click",this.reset,this),this.playBtn=i.querySelector("."+at.Z.play),c.DomEvent.on(this.playBtn,"click",(function(){return e.playPause()}),this),this._map.controller.events.ToggleAnimation.attach((function(){return e.playPause()})),this._map.controller.events.ToggleLoop.attach((function(t){return e._looping.set(t)})),this.sliderWrapper=i.querySelector("."+at.Z.sliderWrapper),this.timeControlPeriod=new Tt(this.options.mapController,this),c.DomEvent.on(this.sliderWrapper,"touchstart touchmove",this._onSlider,this),c.DomEvent.on(this.sliderWrapper,"touchend",this._onTouchEnd,this),this.knob=i.querySelector("."+at.Z.sliderKnob),this.bgAnal=i.querySelector("."+at.Z.sliderAnalysis),this.bgProg=i.querySelector("."+at.Z.sliderPrognosis),this._timeModel.timeSteps.addListener(this.onTimeSteps.bind(this)),this._timeModel._shownTimeIndex.addListener(this.onTime.bind(this)),this._timeModel._shownTimeIndexOffset.addListener(this.onTime.bind(this)),this._timeModel._timeRange.addListener(this.onTimeRange.bind(this)),setTimeout((function(){e.onTimeSteps(),e.onTime()})),this.onTimeRange(),this._looping.addListener(this.onLoop.bind(this));var d=Date.now();return t.controller.events.UserActivity.attach((function(){d=Date.now()})),t.controller.events.LiveMode.attach((function(){!e.isLooping()&&d+9e5<Date.now()&&e._timeModel.setTimeIndex(e._timeModel.getDefaultTimeIndex())})),c.DomUtil.addClass(t._container,"with-time-control"),this.options.startWithLoop&&setTimeout((function(){return e.playPause(!0)}),this.options.loopDelay),n},e.prototype.updatePeriodButtons=function(){this.timeControlPeriod.update(),this.onTime()},e.prototype.createInfoButton=function(t){if(this.options.infoButtonContent){c.DomUtil.addClass(t,at.Z.withInfoButton);var e=this.infoBtn=c.DomUtil.create("div",at.Z.info+" wo-info-box-btn");this.options.embeddedMode?(this.el.appendChild(e),c.DomUtil.addClass(e,at.Z.embedded),c.DomUtil.addClass(e,K.Z.fadeOutControl)):t.appendChild(e);var n=c.DomUtil.create("div",at.Z.infoContainer+" wo-info-box-container",e);n.appendChild(this.options.infoButtonContent),n.appendChild(c.DomUtil.create("div",at.Z.x)),this.options.infoButtonFloating&&(c.DomUtil.addClass(t,at.Z.infoBtnFloating),c.DomUtil.addClass(e,at.Z.floating)),this.options.embeddedMode?(c.DomEvent.on(e,"mouseenter",(function(){c.DomUtil.addClass(e,at.Z.opened),c.DomUtil.addClass(e,"opened")})),c.DomEvent.on(e,"mouseleave",(function(){c.DomUtil.removeClass(e,at.Z.opened),c.DomUtil.removeClass(e,"opened")}))):c.DomEvent.on(e,"click",(function(){x(e,at.Z.opened),x(e,"opened")}))}},e.prototype.closeInfoButton=function(){var t=this.inner.querySelector("."+at.Z.info);t&&(c.DomUtil.removeClass(t,at.Z.opened),c.DomUtil.removeClass(t,"opened"))},e.prototype.replaceInfoButton=function(t){if(t){var e=this.infoBtn.querySelector("."+at.Z.infoContainer);e&&(e.innerHTML="",e.appendChild(t),this.options.embeddedMode&&"RegenRadar"===Gt.get(this._map).layerManager.activeLayerMode.id?c.DomUtil.addClass(e,"embedded-RR"):c.DomUtil.removeClass(e,"embedded-RR"),this.options.infoButtonContent=t,e.appendChild(c.DomUtil.create("div",at.Z.x)))}},e.prototype.createSliderTooltip=function(t){var e=t.querySelector("."+at.Z.sliderWrapper);this.tt=c.DomUtil.create("div",at.Z.tooltip,e),c.DomEvent.on(e,{mouseenter:this.handleTTEnter,mouseleave:this.handleTTLeave,mousemove:this.handleTTMove,mousedown:this.handleSliderMouseDown,click:this.handleSliderClick},this)},e.prototype.handleTTEnter=function(){this.tt&&(this.tt.style.display="block")},e.prototype.handleTTLeave=function(){this.tt&&(this.tt.style.display="none")},e.prototype.handleTTMove=function(t){if(this.tt&&this.sliderOffset){var e=t.pageX-this.sliderOffset.left,n=t.pageY-this.sliderOffset.top,i=Z(this.sliderXYToTime(t.pageX)),o="",r=this._timeModel._timeRange.get();if(this._timeModel.getTimeRangeConfig().displayRelativeDayString){var a=Z(r.liveid);o=F(this._map.controller.language,a,i)+", "}else o=i.format("DD. MMM")+" ";M(this.tt,o+i.format("HH:mm")+" "+Gt.get(this._map).language.translate("clock")),c.DomUtil.setTransform(this.tt,(0,c.point)(e,n,!0))}},e.prototype.emptyCache=function(){this.hasCachedAll={}},e.prototype.handleSliderMouseDown=function(t){if(this.mouseDownX=t.pageX,this.mouseDownY=t.pageY,this.mouseDownTime=+new Date,this.options.cacheAllOnDrag&&(0,St.DM)(St.T4.NonAggressiveCaching)){var e=this.hasCachedAll||(this.hasCachedAll={}),n=this._timeModel._timeRange.get().id;if(!(n in e)&&this.options.cacheAllOnDrag.indexOf(n)>-1){var i=this.options.loadingControl;i&&i.toggle(!0),this._timeModel.cacheAll((function(t){if(i){var e=t.percent;e>=100?(i.setProgress(),i.toggle(!1)):i.setProgress(e)}})),e[n]=!0}}},e.prototype.handleSliderClick=function(t){if(!(Math.abs(t.pageX-this.mouseDownX)+Math.abs(t.pageY-this.mouseDownY)>5||Date.now()-this.mouseDownTime>800)){var e=this.sliderXYToIndex(t.pageX);this.setSliderTime(e,!0),this._map.controller.events.UserActivity.post()}},e.prototype.sliderXYToIndex=function(t){var e=t-this.sliderOffset.left,n=Math.max(0,Math.min(1,e/this.sliderWidth));return Math.round(n*(this._timeModel.getTimeSteps().length-1))},e.prototype.sliderXYToTime=function(t){return this._timeModel.getTime(this.sliderXYToIndex(t))},e.prototype.onPeriodClick=function(t){var e=t.target,n=this._timeModel._timeRange.get().id,i=y(e,"period");i&&i!==n?(this._timeModel.setTimeRange(i),this._map.controller.events.UserActivity.post()):i===n&&(this._looping.set(!1),this._timeModel.setTimeIndex(this._timeModel.getDefaultTimeIndex()),this._map.controller.events.UserActivity.post())},e.prototype._onSlider=function(t){void 0===this.lastSlideId&&(this.lastSlideId=E(t)),this.mobileTT&&c.DomUtil.addClass(this.mobileTT,at.Z.active),this._looping.set(!1),clearTimeout(this.sliderTimeout);var e=function(t,e){if("clientX"in t)return{x:t.clientX,y:t.clientY};var n=t.touches,i=0;if(void 0!==e)for(var o=0;o<n.length;o++)if(n[o].identifier===e){i=o;break}return{x:n[i].clientX,y:n[i].clientY}}(t,this.lastSlideId).x,n=Date.now();if(!(void 0!==this.lastSlideX&&n-this.lastSlideTime>175&&Math.abs(e-this.lastSlideX)<3)){this.lastSlideX=e,this.lastSlideTime=n;var i=this.sliderWrapper.getBoundingClientRect(),o=i.width-40,r=e-i.left-20,a=Math.min(1,Math.max(0,r/o)),s=Math.round((this._timeModel.getTimeSteps().length-1)*a);this.setSliderTime(s),this.onTime(s,!0);var l=Z(this._timeModel.getTime(s));this.mobileTTText&&(this.mobileTTText.innerText=l.format("HH:mm")),this.mobileTT&&x(this.mobileTT,at.Z.forecast,l>this.liveTime);var u,h=this._timeModel._timeRange.get();if(this._timeModel.getTimeRangeConfig().displayRelativeDayString){var d=Z(h.liveid);u=F(this._map.controller.language,d,l)}else u=l.format("DD. MMM");this.mobileTTSubtitle&&(this.mobileTTSubtitle.innerText=u)}},e.prototype._onTouchEnd=function(t){E(t)===this.lastSlideId&&(delete this.lastSlideX,delete this.lastSlideId,this.mobileTT&&c.DomUtil.removeClass(this.mobileTT,at.Z.active))},e.prototype.setSliderTime=function(t,e){var n=this;this._timeModel.hasLoaded(t)||e?this._timeModel.setTimeIndex(t):this.sliderTimeout=window.setTimeout((function(){return n._timeModel.setTimeIndex(t)}),350)},e.prototype.onTimeRange=function(t,e){if(void 0===t&&(t=this._timeModel._timeRange.get()),void 0===e&&(e={}),this._pauseMode=this._timeModel.getTimeRangeConfig(t.id).pauseMode||"stop",e.oldTimeRange&&e.oldTimeRange.id===t.id||e.periodCurrentSwitch||(this._looping.set(!1),c.DomUtil.removeClass(this.playBtn,at.Z.pause),c.DomUtil.removeClass(this.playBtn,at.Z.stop)),this.latestBtn){var n=t.id,i=!1===(n.indexOf("Current")>-1||n.indexOf("Prognose")>-1||n.indexOf("Tomorrow")>-1||n.indexOf("periodDay")>-1);o=this.latestBtn,r=i,o.style.display=r?"":"none",x(this.inner,at.Z.withLatest,i)}var o,r;this.liveTime=V(t.liveid)},e.prototype.onTimeSteps=function(){setTimeout(this.updateSliderSize)},e.prototype.onTime=function(t,e){var n=this._timeModel.getTime();if(!n)return null;var i=Z(n),o=this._timeModel.getShownTimeIndex(),r=this._timeModel.nextIndex(!0),a=Z(this._timeModel.getTime(r)),s=this._timeModel.getShownTimeIndexOffset(),l=a.diff(i,"minute");l<0&&(l=0),!0===e&&(l=0,o=t);var c=this.knob.parentNode,u=this.sliderWidth=c.offsetWidth;this.sliderOffset=T(c),b(this.knob,"left",u*(o+(l>0?s/l:0))/(this._timeModel.getTimeSteps().length-1)),this._looping.get()&&this.nextLoop()},e.prototype.onLoop=function(t,e){var n=this;t?c.DomUtil.addClass(this.playBtn,"pause"===this._pauseMode?at.Z.pause:at.Z.stop):(c.DomUtil.removeClass(this.playBtn,at.Z.pause),c.DomUtil.removeClass(this.playBtn,at.Z.stop)),clearTimeout(this.timeout),t?this.timeout=window.setTimeout((function(){var t=n._timeModel.getTimeRangeConfig();"startAnimationAt"in t?n.next(t.startAnimationAt):n.next("animation")}),0):t||"stop"!==this._pauseMode||e||this._timeModel.stop(),this._map.controller.events.PlayModeChanged.post(t)},e.prototype.doLoop=function(){this.next("animation")},e.prototype.nextLoop=function(){var t;t=this._timeModel.hasNext(!0)?this._timeModel.hasNext()&&this._timeModel.getTime()===this._timeModel._timeRange.get().liveid?this.options.liveIdDelay:this.options.loopDelay:this.options.endOfLoopDelay,clearTimeout(this.timeout),this.timeout=window.setTimeout(this.doLoop.bind(this),t)},e.prototype.next=function(t){var e=this;void 0===t&&(t=null),t&&!(0,s.HD)(t)&&(this._looping.set(!1,!0),this._map.controller.events.UserActivity.post()),"number"==typeof t?(this._timeModel.getTimeIndex()===t&&this.nextLoop(),this._timeModel.setTimeIndex(t)):this._timeModel.next("animation"===t),"animation"!==t&&"number"!=typeof t||(0,St.DM)(St.T4.NonAggressiveCaching)||this._timeModel.cacheNext(!0,1).then((function(){return e._timeModel.cacheNext(!0,2)}))},e.prototype.prev=function(t){t&&(this._looping.set(!1,!0),this._map.controller.events.UserActivity.post()),this._timeModel.prev()},e.prototype.reset=function(t){this._looping.set(!1,!0),this._timeModel._currentTimeIndex.set(this._timeModel.getTimeSteps().length-1)},e.prototype.playPause=function(t){this._looping.set(!this._looping.get()),t||this._map.controller.events.UserActivity.post()},e.prototype.isLooping=function(){return this._looping.get()},e.prototype.setLocate=function(t){var e=c.DomUtil.create("div",[at.Z.control,at.Z.locate,Mt("noFullscreenBorder"),t.className||"","ripple"].join(" "));return this.inner.insertBefore(e,this.fullscreenBtn),c.DomEvent.on(e,"click",t.click),e},e.options={loopDelay:850,endOfLoopDelay:2500,liveIdDelay:2e3},e}(c.Control),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype.playPause=function(){this.onLoop(!this.options.controller.getPause(),!1),this._map.controller.events.UserActivity.post()},e.prototype.onLoop=function(t,e){this.options.controller.setPause(t),t?(c.DomUtil.removeClass(this.playBtn,at.Z.pause),c.DomUtil.removeClass(this.playBtn,at.Z.stop),this._timeModel._shownTimeIndexOffset.set(0)):c.DomUtil.addClass(this.playBtn,"pause"===this._pauseMode?at.Z.pause:at.Z.stop),t&&"stop"===this._pauseMode&&!e&&this._timeModel.stop(),this._map.controller.events.PlayModeChanged.post(!t)},e.prototype.next=function(t){void 0===t&&(t=null),t&&!(0,s.HD)(t)&&(this.onLoop(!0,!0),this._map.controller.events.UserActivity.post()),this.options.controller.setTimeStep(this._timeModel.nextIndex()),this._timeModel._shownTimeIndexOffset.set(0)},e.prototype.prev=function(t){t&&(this.onLoop(!0,!0),this._map.controller.events.UserActivity.post()),this.options.controller.setTimeStep(this._timeModel.prevIndex()),this._timeModel._shownTimeIndexOffset.set(0)},e.prototype.setSliderTime=function(t){this.options.controller.setTimeStep(t),this._timeModel._shownTimeIndexOffset.set(0)},e.prototype.nextLoop=function(){},e.prototype.isLooping=function(){return!this.options.controller.getPause()},e}(Pt);var Ot=n(3199),Dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dt(e,t),e.prototype.initialize=function(n){t.prototype.initialize.call(this,(0,m.l)({},e.options,n))},e.prototype.onAdd=function(t){var e=c.DomUtil.create("a",Ot.Z.logo+" "+K.Z.permanentControl);return e.href="/",e},e.options={position:"topleft"},e}(c.Control);var At=n(4823),Et=function(){function t(e,n){if(this.timeLabel=e,this.map=n,this.lastElementPosition=new c.Point(0,0),this.el=e.el,c.DomEvent.on(this.el,{mousedown:this.onMouseDown,mouseup:this.onMouseUp},this),c.DomEvent.on(document.body,{mousemove:this.onMouseMove,mouseup:this.onMouseUp},this),ht().has(t.settingsKey)){var i=ht().get(t.settingsKey);i&&this.loadSettings(i)}}return t.getVectorLength=function(t){return t.x*t.x+t.y+t.y},t.prototype.loadSettings=function(t){var e=t.x,n=t.y;this.onMouseDown();var i=new c.Point(e,n),o=this.adjustPosition(i);C(this.el,{x:o.x,y:o.y}),this.lastElementPosition=i},t.prototype.onMouseDown=function(t){t&&(this.dragging=!0,this.lastPosition=new c.Point(t.pageX,t.pageY)),this.elWidth=this.el.offsetWidth,this.elHeight=this.el.offsetHeight,this.mapWidth=this.map._container.offsetWidth,this.mapHeight=this.map._container.offsetHeight,this.draggedDistance=0},t.prototype.onMouseMove=function(e){if(this.dragging){var n=new c.Point(e.pageX,e.pageY),i=n.subtract(this.lastPosition),o=this.lastElementPosition.add(i);ht().set(t.settingsKey,o);var r=this.adjustPosition(o);c.DomUtil.removeClass(this.el,"wo-tt"),C(this.el,{x:r.x,y:r.y}),this.draggedDistance+=t.getVectorLength(i),this.lastElementPosition=o,this.lastPosition=n}},t.prototype.adjustPosition=function(e){return(e=e.clone()).x=Math.max(0,e.x),e.x=Math.min(this.mapWidth-t.rightMargin-this.elWidth,e.x),e.y=Math.max(0,e.y),e.y=Math.min(this.mapHeight-t.bottomMargin-this.elHeight,e.y),e},t.prototype.onMouseUp=function(t){this.dragging&&(this.draggedDistance>3&&(this.timeLabel._preventClick=+new Date),c.DomUtil.addClass(this.el,"wo-tt"),this.lastElementPosition=this.adjustPosition(this.lastElementPosition),this.dragging=!1)},t.rightMargin=40,t.bottomMargin=30,t.settingsKey="timeLabelDrag",t}(),It=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._preventClick=0,e}return It(e,t),e.prototype.initialize=function(e){if(!e.timeModel)throw new Error("No time model given");t.prototype.initialize.call(this,e),this._timeModel=e.timeModel,this.mapController=e.mapController},e.prototype.onAdd=function(t){var e=this;this.map=t;var n=this.el=c.DomUtil.create("div",At.Z.label+" "+K.Z.permanentControl+" wo-tt ripple");return n.innerHTML='<span></span><span class="'.concat(At.Z.subtitle,'"></span><div class="').concat(At.Z.sliderBackground,'"><div class="').concat(At.Z.sliderAnalysis,'"></div><div class="').concat(At.Z.sliderPrognosis,'"></div><div class="').concat(At.Z.sliderKnob,'"></div></div>'),new Et(this,t),c.DomEvent.on(n,"click",(function(t){+new Date-e._preventClick>50&&e.mapController.events.ToggleAnimation.post()})),this.updateTooltipText(!1),c.DomEvent.disableClickPropagation(n),c.DomEvent.disableScrollPropagation(n),this._label=this.el.querySelector("span"),this._subtitle=this.el.querySelector("."+At.Z.subtitle),c.DomUtil.addClass(this._subtitle,At.Z.hide),this._sliderBg=this.el.querySelector("."+At.Z.sliderBackground),this._sliderKnob=this.el.querySelector("."+At.Z.sliderKnob),this._bgAnal=this.el.querySelector("."+At.Z.sliderAnalysis),this._bgProg=this.el.querySelector("."+At.Z.sliderPrognosis),setTimeout((function(){e._onTimeSteps=e.onTimeSteps.bind(e),e._onTime=e.onTime.bind(e),e._timeModel.timeSteps.addListener(e._onTimeSteps),e._timeModel._shownTimeIndex.addListener(e._onTime),e._timeModel._shownTimeIndexOffset.addListener(e._onTime),e._onTimeSteps(),e._onTime()})),n},e.prototype.onRemove=function(){this._timeModel._timeRange.removeListener(this._onTimeSteps),this._timeModel._shownTimeIndex.removeListener(this._onTime)},e.prototype.updateTooltipText=function(t){var e=Z(this._timeModel.getTime()),n=function(t,e){var n=e.zoneName();if("CEST"===n)return"MESZ";if("CET"===n)return"MEZ";var i=e.utcOffset()/60,o=i.toString().split("."),r=o[0];o.length>1&&("75"===o[1]?r+="&frac34;":"5"===o[1]&&(r+="&frac12;"));var a=e.tz().split("/")[1].replace("_"," ");return t.translate("localTime")+" "+a+" (UTC"+(i>0?"+":"")+r+")"}(this.map.language,e);v(this.el,"woTT",this.mapController.language.translate(t?"FilmStop":"FilmPlay")+" "+n)},e.prototype.onTimeSteps=function(){var t=this._timeModel._timeRange.get(),e=this._timeModel.getTimeRangeConfig(),n=Z(this._timeModel.getTime());if(e.timeLabel&&e.timeLabel.displaySlider)c.DomUtil.addClass(this._subtitle,At.Z.hide),c.DomUtil.removeClass(this._sliderBg,At.Z.hide),this.updateSliders(this._timeModel.timeSteps.get(),t);else{var i="";if(e.timeLabel&&e.timeLabel.displayRelativeDayString){var o=Z(t.liveid);i=F(this.map.language,o,n)}else i=e.timeLabel&&e.timeLabel.displayDayOfTheWeekString?n.format("dd. DD.MM."):n.format("DD. MMMM");M(this._subtitle,i),c.DomUtil.addClass(this._sliderBg,At.Z.hide),c.DomUtil.removeClass(this._subtitle,At.Z.hide)}this._liveTime=V(t.liveid),this._onTime()},e.prototype.updateSliders=function(t,e){var n=V(e.liveid),i=V(t[0].id),o=V(t[t.length-1].id);if(n<i)b(this._bgAnal,"width",0),b(this._bgProg,"width","100.01%");else if(n>o)b(this._bgProg,"width",0),b(this._bgAnal,"width","100.01%");else{for(var r=void 0,a=0;a<t.length;a++)if(t[a].id===e.liveid){r=a;break}if((0,s.$K)(r)){var l=r/(t.length-1),c=100*l,u=100*(1-l);100===c&&(c=100.01),100===u&&(u=100.01),b(this._bgProg,"width",u+"%"),b(this._bgAnal,"width",c+"%")}}},e.prototype.onTime=function(){var t=this._timeModel.getTime(),e=this._timeModel._timeRange.get(),n=this._timeModel.getTimeRangeConfig(),i=V(t),o=Z(t),r=this._timeModel.getShownTimeIndex(),a=this._timeModel.nextIndex(!0),s=Z(this._timeModel.getTime(a)),l=this._timeModel.getShownTimeIndexOffset(),c=s.diff(o,"minute");c<0&&(c=0),o.add(l,"minute");var u=o.format("LT");if(M(this._label,u),x(this._label,At.Z.smaller,u.length>=8),x(this._label,At.Z.forecast,i>this._liveTime),b(this._sliderKnob,"left",this._sliderBg.offsetWidth*(r+(c>0?l/c:0))/(this._timeModel.getTimeSteps().length-1)),n.timeLabel&&!n.timeLabel.displaySlider){var h="";if(n.timeLabel.displayRelativeDayString){var d=Z(e.liveid);h=F(this.map.language,d,o)}else h=n.timeLabel.displayDayOfTheWeekString?o.format("dd. DD.MM."):o.format("DD. MMM");this._subtitle.style.display="",M(this._subtitle,h)}},e}(c.Control);var zt=n(7123),Nt=n(7567);function jt(t,e){void 0===e&&(e={minDelay:150,maxDelay:1400,steps:6});var n=3;if(location.search){var i=(0,k.d)();"loopspeed"in i&&!isNaN(i.loopSpeed)&&(n=parseInt(i.loopSpeed))}for(var o=w('<h5 class="'.concat(Nt.Z.title,'">').concat(t.language.translate("loopSpeed"),"</h5>")),r=w('<div class="'.concat(Nt.Z.control,'">\n    <a class="').concat(Nt.Z.minus,' leaflet-control-zoom-out"></a>\n    <div class="').concat(Nt.Z.display,'"></div>\n    <a class="').concat(Nt.Z.plus,' leaflet-control-zoom-in"></a>\n</div>')),a=r.querySelector("."+Nt.Z.display),s=n,l=[],u=0;u<e.steps;u++){var h=c.DomUtil.create("span",Nt.Z.step,a);l.push(h)}function d(){var n;!function(){for(var t=0;t<l.length;t++)x(l[t],Nt.Z.active,t<=s)}(),(n=Pt.instance)&&(n.options.loopDelay=e.minDelay+(e.maxDelay-e.minDelay)*(1-s/(e.steps-1)),t.events.LoopSpeed.post(s))}d(),c.DomEvent.on(r.querySelector("."+Nt.Z.minus),"click",(function(t){c.DomEvent.stopPropagation(t),s=Math.max(0,s-1),d()})),c.DomEvent.on(r.querySelector("."+Nt.Z.plus),"click",(function(t){c.DomEvent.stopPropagation(t),s=Math.min(s+1,e.steps-1),d()}));var p=c.DomUtil.create("div");return p.appendChild(o),p.appendChild(r),p}var Bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._active=!1,e.loopDelayWrapper=c.DomUtil.create("div","section"),e}Bt(e,t),e.prototype.initialize=function(n){t.prototype.initialize.call(this,(0,m.l)({},e.options,n))},e.prototype.onAdd=function(t){this._map=t;var e=c.DomUtil.create("div",zt.Z.btn);c.DomEvent.on(e,"click",this.show,this);var n=c.DomUtil.create("div",zt.Z.wrapper,t._container.parentElement);this.options.wrapperClassName&&c.DomUtil.addClass(n,this.options.wrapperClassName),c.DomEvent.disableClickPropagation(n),c.DomEvent.disableScrollPropagation(n),this._wrapper=n;var i=c.DomUtil.create("div",zt.Z.x,n);c.DomEvent.on(i,"click",this.hide,this);var o=c.DomUtil.create("div",zt.Z.content,n);return this.options.contentClassName&&c.DomUtil.addClass(o[0],this.options.contentClassName),o.appendChild(this._content),this.loopDelayWrapper.appendChild(jt(t.controller)),e},e.prototype.onRemove=function(t){this._wrapper.remove()},e.prototype.setContent=function(t){return this._content=t,t.appendChild(this.loopDelayWrapper),this},e.prototype.show=function(){c.DomUtil.addClass(this._wrapper,zt.Z.active),this._active=!0},e.prototype.hide=function(){c.DomUtil.removeClass(this._wrapper,zt.Z.active),this._active=!1},e.prototype.replaceInfoButton=function(t){var e=this._wrapper.querySelector("."+zt.Z.content);e.innerHTML="",e.appendChild(t),this._content=t,t.appendChild(this.loopDelayWrapper)},e.options={position:"bottomright"}}(c.Control);function Wt(t,e,n,i,o,r,a,s,l,c,u){void 0===c&&(c=!1);var h=e.mapControls,d=t.timeModel,p=n.map;if(l&&!c&&!u)return l.timeControl.options=(0,m.l)(l.timeControl.options,{periodShowAlways:d.periodShowAlways,periodDropUp:d.periodDropUp,periodMobile:d.periodMobile}),l.timeControl.updatePeriodButtons(),h.infoButtonContent&&l.timeControl.replaceInfoButton(h.infoButtonContent(p,l.loadingControl)),l;var f,g,v,y=(new X).addTo(p),_=new ot(f).addTo(p);if(t.layerToggle){var w=t.layerToggle;g=w.getConfig?et(n.events,w.getConfig(a.dynamicLayer)).addTo(p):et(n.events,{layerParent:a.dynamicLayer,includeHomemark:!0,layers:w.layers,superLayers:w.superLayers,onSuperLayerClick:w.onSuperLayerClick,onLayerClick:w.onLayerClick}).addTo(p)}var b=a.getTimeControlController();if(b?(console.log("flowmo"),v=function(t){return new kt(t)}({position:"bottomleft",timeModel:r,periodShowAlways:d.periodShowAlways,periodDropUp:d.periodDropUp,periodMobile:d.periodMobile,periodEmbedded:[],infoButtonContent:h.infoButtonContent&&h.infoButtonContent(p,y),fullscreenBtn:!0,startWithLoop:s.loop,withLatestBtn:!0,controller:b,mapController:n}).addTo(p)):h.noTimeControl||(v=function(t){return new Pt(t)}({position:"bottomleft",compactMode:o.isCompact(),embeddedMode:o.isEmbedded(),timeModel:r,periodShowAlways:d.periodShowAlways,periodDropUp:d.periodDropUp,periodMobile:d.periodMobile,periodEmbedded:d.periodEmbedded,infoButtonContent:h.infoButtonContent&&h.infoButtonContent(p,y),infoButtonFloating:o.features[O.Q.TimeControlFloatingInfoButton],fullscreenBtn:o.features[O.Q.FullScreenModeEnabled],permanent:!o.features[O.Q.TimeControlHideOnInactivity],startWithLoop:s.loop,loadingControl:y,cacheAllOnDrag:o.features[O.Q.TimeControlCacheAllTimeStepsOnDrag]&&d.cacheAllOnDrag,withLatestBtn:o.features[O.Q.TimeControlShowLatestButton],mapController:n}).addTo(p)),(new Lt).addTo(p),!h.noTimeControl){var x=function(t){return new Rt(t)}({mapController:n,position:"topleft",timeModel:r}).addTo(p);n.events.PlayModeChanged.attach((function(t){x.updateTooltipText(t)}))}var T={loadingControl:y,dialogContainer:_,layerToggle:g,timeControl:v,mobileInfoButton:undefined};return h.customControls&&(T.customControls=h.customControls(n,T)),T}function Ft(t,e){var n=Gt.get(t).mapMode;!0===n.features[O.Q.StaticMap]&&function(t){for(var e=0,n=["boxZoom","doubleClickZoom","dragging","keyboard","scrollWheelZoom","tap","touchZoom","woScrollWheelZoom","doubleRightClickZoom"];e<n.length;e++){var i=n[e];t[i]&&(t[i].disable(),delete t[i])}}(t),n.isInteractive()||(n.isCompact()?function(t,e){c.DomUtil.addClass(t._container,"compact-map")}(t):n.isEmbedded()&&function(t,e){c.DomUtil.addClass(t._container,"embedded-map")}(t)),c.DomUtil.addClass(document.body,"map-"+n.toClassName())}var Ut=n(9530),Zt=function(){function t(t,e,n){this.cache=t,this.map=e,this.timeModel=n,this.updateSize=this.updateSize.bind(this),e.on("resize",this.updateSize),e.on("layeradd",this.updateSize),e.on("layerremove",this.updateSize),n&&n._timeRange.addListener(this.updateSize),this.updateSize()}return t.watchFor=function(e,n,i){return new t(e,n,i)},t.prototype.updateSize=function(){var e=this.map,n=e.getSize(),i=(n.x/512+2)*(n.y/512+2),o=t.getLayerCount(e),r=Math.max(1,this.timeModel?Math.max(3,this.timeModel.getTimeSteps().filter((function(t){return t.animationTime})).length):3),a=t.cacheSizeFactor,s=Math.ceil(i*r*a*o);this.cache.setLimit(s)},t.getLayerCount=function(t){for(var e=0,n=0,i=t._layers;n<i.length;n++){var o=i[n];t._layers[o]instanceof Ut.f&&e++}return Math.max(1,e)},t.cacheSizeFactor=2,t}(),Vt=n(1263),Ht=n(3936);var Yt=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},qt=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},Gt=function(){function t(t){this.config=t,this._events=new a,this._mapMode=t.mapMode,this._toolManager=new o,this._layerManager=new r(this,t.layerModes.modes,t.layerModes.active),this._language=t.language||new l({})}return t.get=function(t){return t._mapController},t.set=function(t,e){t._mapController=e},Object.defineProperty(t.prototype,"mapMode",{get:function(){return this._mapMode},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(t){var e=this.config.modeConfigurations[t];if(!e)throw new Error("No config found for config type ".concat(R[t]));return e},t.prototype.getMetadata=function(t){var e=this.config.modeMetadata[t];if(!e)throw new Error("No metadata found for config type ".concat(R[t]));return e},Object.defineProperty(t.prototype,"toolManager",{get:function(){return this._toolManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeModel",{get:function(){return this._timeModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),t.prototype.init=function(t){return Yt(this,void 0,void 0,(function(){var e,n,i,o,r,a,s,c,u=this;return qt(this,(function(h){switch(h.label){case 0:return e=t.meta,o=this.mapMode,r=this.layerManager.getLayerGroup(e),i=function(t){var e=t.mapOptions,n=Math.max(10,e.maxZoom)||10,i=n,o=n;return{minZoom:e.minZoom||2,maxZoom:n,maxNativeZoom:i,additionalZoom:e.additionalZoom||0,maxLoggedInZoom:o}}(r),function(t,e,n){if(void 0===n&&(n={}),e.homemark=!1,n.geo){var i=n.geo;i.lat&&i.lon?(e.lat=i.lat,e.lon=i.lon):i.iid&&i.iid.lat&&i.iid.lon?(e.lat=i.iid.lat,e.lon=i.iid.lon):(e.lat=50.972,e.lon=9.998),e.Hlocation=i.gid&&5===i.gid.length?{lat:i.lat,lon:i.lon,gid:i.gid,name:i.sublocationname||i.locationname}:{lat:0,lon:0,gid:"",name:""},e.Hlocation.gid&&(e.homemark=!0)}if(location.search){var o=(0,k.d)();if("wry"in o&&"wrn"in o&&"wrg"in o){var r=o.wry.split(",");isNaN(r[0])||isNaN(r[1])||(e.Hlocation={lat:parseFloat(r[0]),lon:parseFloat(r[1]),gid:o.wrg,name:j(o.wrn)})}"wrh"in o&&(e.homemark="true"===o.wrh),"wro"in o&&(e.loop="true"===o.wro),!1!==t.mapMode.isInteractive()&&("wrx"in o&&(r=o.wrx.split(","),isNaN(r[0])||isNaN(r[1])||(e.lat=parseFloat(r[0]),e.lon=parseFloat(r[1]))),"wrm"in o&&(isNaN(o.wrm)||(e.zoomLevel=parseFloat(o.wrm),1===e.zoomLevel&&o.wrextent&&(e.zoomLevel=7))))}}(this,e,t.parseUrl),t.relativeTimeStrings&&(d=new l(t.relativeTimeStrings),d),[4,this.initMap(r,i,t.map)];case 1:return n=h.sent(),[4,this.initTimeModel(r,t.timeModel)];case 2:return h.sent(),a=H(this,n,this._timeModel),s=Wt(r,t,this,0,o,this._timeModel,a,e),Ft(n),Zt.watchFor(Vt.U_.cache,n,this._timeModel),Zt.watchFor(Vt.mW.cache,n,this._timeModel),Zt.watchFor(Vt.WX.cache,n,this._timeModel),n.setView([e.lat,e.lon],e.zoomLevel),c=function(){return Yt(u,void 0,void 0,(function(){var l,c;return qt(this,(function(u){switch(u.label){case 0:return l=this.layerManager.activeLayerMode,(c=a.uniqueKey!==l.layerStateUniqueKey)?(function(t,e,n,i){t.off(),t.eachLayer((function(e){t.removeLayer(e)})),t.eachControl((function(e){t.removeControl(e)})),e.destroy(),i.destroy()}(n,this._timeModel,s.timeControl,a),this.initMap(r,i,t.map),[4,this.initTimeModel(r,t.timeModel)]):[3,2];case 1:u.sent(),u.label=2;case 2:return a=H(this,n,this._timeModel,a),s=Wt(r,t,this,0,o,this._timeModel,a,e,s,c,l.isWebGl()),[2]}}))}))},[2,{map:n,layers:a,mapControls:s,timeModel:this._timeModel,updateLayers:c,updateLayerToggle:function(){s.layerToggle.update(r.layerToggle.getConfig(a.dynamicLayer))}}]}var d}))}))},t.prototype.initMap=function(t,e,n){return void 0===n&&(n={}),Yt(this,void 0,void 0,(function(){var i,o,r,a,l,u;return qt(this,(function(h){switch(h.label){case 0:return(i=this._map)||(o=(0,m.l)({},Ht.z,{mapController:this}),"floating"===this.mapMode.features[O.Q.MapZoomMode]&&(o.zoomSnap=0),i=this._map=window.map=new N(n.mapId||"map",o),c.DomUtil.addClass(i._container,this.mapMode.toClassName()),(r=function(){var t=window.devicePixelRatio||1,e=Math.floor(t)!==t;x(i._container,"fractured-dpr",e)})(),window.addEventListener("resize",r),a=function(){return x(i._container,"fractured-zoom",!(0,s.U)(i.getZoom()))},i.on("zoomend",a),a()),l=e.maxZoom+e.additionalZoom,[4,(0,St.sN)(St.T4.DisableZl10)];case 1:return h.sent()&&(l=Math.min(l,9)),i.setMaxZoom(l),i.setMinZoom(e.minZoom),i.options.maxLoggedInZoom=e.maxLoggedInZoom,i.maxLoggedInZoom=e.maxLoggedInZoom,(u=t.mapOptions).maxBounds?i.setMaxBounds(u.maxBounds):i.setMaxBounds(null),[2,i]}}))}))},t.prototype.initTimeModel=function(t,e){return Yt(this,void 0,void 0,(function(){var n,i;return qt(this,(function(o){switch(o.label){case 0:return n=t.timeModel,i={mapController:this,activeTimePeriod:n.activeTimeRange,defaultPeriod:n.defaultPeriod,periods:n.periods,embeddedMode:n.embeddedMode},this._timeModel?[4,this._timeModel.update(i)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,(this._timeModel=new e(this._map,i)).afterInit.promise];case 3:o.sent(),o.label=4;case 4:return[2,this._timeModel]}}))}))},t}()},3936:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var i={scrollWheelZoom:!1,attributionControl:!1,woScrollWheelZoom:!0,bounceAtZoomLimits:!1,inertiaDeceleration:3400,easeLinearity:.3,worldCopyJump:!1,zoomControl:!1,maxBoundsViscosity:1}},4484:(t,e,n)=>{"use strict";n.d(e,{CY:()=>r,xe:()=>o});var i;n(1584);function o(t){i=t,t||console.error("not existing config set",t)}function r(){return i}},346:(t,e,n)=>{"use strict";n.d(e,{o:()=>A});var i,o,r=function(){function t(t,e,n){this.id=t,this.configType=e,this.getParaId=n}return t.prototype.getSuperLayer=function(){return{id:this.id}},Object.defineProperty(t.prototype,"getParameter",{get:function(){return this.getParaId},enumerable:!1,configurable:!0}),t.prototype.canUseWebGl=function(){return!1},t.prototype.isWebGl=function(){return!1},t}(),a=n(4700),s=n(1584),l=n(4484),c=n(5656),u=n(2402),h=n(1592),d=n(8989),p=n(8010),f=n(7994),m=n(1263),g=n(2477),v=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(t){function e(e){var n=t.call(this,"",e)||this;return n._woTimeBasedTileLayer=!0,n._i=0,n._layers=[],n._layerMap={},n.boundInvalidate=n.invalidate.bind(n,void 0),n.events={invalidated:new f.VoidSyncEvent},n.canvasContentCache=new g.z6((0,m.np)(50)),n._url="",n._layerMap={},n}return v(e,t),e.prototype.initialize=function(n,i){var o=this;t.prototype.initialize.call(this,"",(0,d.l)({},e.getDefaultOptions(),i)),this._timeModel=i.timeModel,this._timeModel&&(this._timeModel.cacheables.push(this),this._timeModel._currentTimeIndex.addListener(this._onTime.bind(this)),setTimeout((function(){return o._onTime(o._timeModel._currentTimeIndex.get())}))),this._errorImage=new Image,this._errorImage.src=this.options.errorTileUrl},e.getDefaultOptions=function(){var t=(0,l.CY)();return{minZoom:t&&t.minZoom,maxNativeZoom:t&&t.maxZoom,tileSize:512,className:"wo-tile-layer",updateWhenIdle:!1}},e.prototype.setErrorTile=function(t){this._errorImage.src=t||""},e.prototype._getTiledPixelBounds=function(e){var n=t.prototype._getTiledPixelBounds.call(this,e);if(p.F.get(this._map).mapMode.isInteractive()){var i=200;n.extend(new s.Point(n.min.x-i,n.min.y-i)),n.extend(new s.Point(n.max.x+i,n.max.y+i))}return n},e.prototype.isCompositeMode=function(){if(this._layers&&this._layers.length){for(var t=0,e=this._layers;t<e.length;t++){if(e[t].id===h.J)return!0}return!1}},e.prototype.convertToComposite=function(){if(!this.isCompositeMode()){for(var t=0,e=this._layers;t<e.length;t++){var n=e[t];n.visible=!0,n.baseAlpha=1}this.setLayers(this._layers,this._layerOrder,!0)}},e.prototype.setLayers=function(t,e,i,o){if(void 0===o&&(o=!1),t.length){if(!1===this.options.compositeEnabled&&(i=!1),void 0===i&&(o&&(i=this.isCompositeMode()),void 0===i&&(i=!0)),i&&!this.options.webgl){var r=n(9189).z.buildCompositeLayer(t,e);t=r.layers,e=r.order}for(var a={},s=0,l=this._layers;s<l.length;s++){a[(h=l[s]).id]=h}this._url=t[0]._url,this._layers=t,this._layerMap={},this._layerOrder=e,this.canvasContentCache=new g.z6((0,m.np)(50));for(var c=0,u=t;c<u.length;c++){var h=u[c];this._layerMap[h.id]=h,h.init(this._map,this),h.id in a&&(h.visible=a[h.id].visible),h.isPartOfComposite=i}this._map&&this.invalidate()}},e.prototype.onAdd=function(e){for(var n=0,i=this._layers;n<i.length;n++){i[n].init(e,this)}return t.prototype.onAdd.call(this,e)},e.prototype.createTile=function(t,n){var i=document.createElement("canvas");return i.width=i.height=this.options.tileSize,i.complete=!0,i.setAttribute("role","presentation"),i.setAttribute("data-x",t.x),i.setAttribute("data-y",t.y),i.setAttribute("data-z",t.z),s.DomUtil.addClass(i,c.Z.canvas),clearTimeout(this._invalidateTimeout),cancelAnimationFrame(this._invalidateAf),this._invalidateTimeout=window.setTimeout(this.boundInvalidate,e.INVALIDATE_TIMEOUT_DELAY),setTimeout((function(){return n(null,i)})),i},e.prototype._removeTile=function(t,e){void 0===e&&(e=!1);var n=this._tiles[t];n&&(n.retain||n.coords.z!==this._map.getZoom()||(e=!0),e&&(s.Browser.androidStock||n.el.setAttribute("src",s.Util.emptyImageUrl),setTimeout((function(){s.DomUtil.remove(n.el)}),850),delete this._tiles[t],this.canvasContentCache.remove(t),this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)})))},e.prototype.pruneAfterLoad=function(){if(this._map){var t=this._map.getZoom();for(var e in this._tiles){var n=this._tiles[e];n.coords.z<=4&&t===n.coords.z||(!n.retain||Math.abs(n.coords.z-t)>=1)&&this._removeTile(e,!0)}}},e._timeToKey=function(t){return t.join("$")},e.prototype.tilePromises=function(t,e){void 0===e&&(e=this._timeModel.getTimeStep(this._timeModel._currentTimeIndex.get()));for(var n=[],i=0,o=this._layers;i<o.length;i++){var r=o[i];n.push(this.tilePromise(t,e,r))}return Promise.all(n)},e.prototype.tilePromise=function(t,e,n){return n.buildPromise(t,this._tiles[t].coords,e)},e.prototype.toggleLayer=function(t,e){if(h.J in this._layerMap&&this._layerMap[h.J].deconstruct(),t in this._layerMap){var n=this._layerMap[t];if((0,u.$K)(e)||(e=!n.visible),e){var i=!0;for(var o in this._layerMap)if(o!==t&&!this._layerMap[o].visible){i=!1;break}if(i)return this.convertToComposite(),!0}return e?(this._fadeLayer(n,1),!0):(this._fadeLayer(n,0),!1)}},e.prototype._fadeLayer=function(t,n){var i=this;a({alpha:1-n}).animate({alpha:n},{easing:"linear",duration:e.fadeTime,step:function(e,n){t.visible=!0,t.baseAlpha=n.now,i.invalidate(void 0,!0)},complete:function(){t.visible=n>0,i.invalidate(void 0,!0)}})},e.prototype.getLayer=function(t){return this._layerMap[t]},e.prototype.hasLayer=function(t){return t in this._layerMap},e.prototype.isLayerActive=function(t){return this._layerMap[t].visible},e.prototype._onTime=function(t){clearTimeout(this._invalidateTimeout),cancelAnimationFrame(this._invalidateAf),this._invalidateAf=requestAnimationFrame(this.boundInvalidate)},e.prototype.buildAllPromises=function(t){void 0===t&&(t=this._timeModel._currentTimeIndex.get());var e=this._timeModel.getTimeStep(t),n=[];for(var i in this._tiles)n.push(this.tilePromises(i,e));return Promise.all(n)},e.prototype.timeStepToHash=function(t,e){void 0===e&&(e=!1);var n="";if(e)for(var i in this._tiles)n+=i;if(t){for(var o in t.layers){var r=t.layers[o];for(var a in r){n+=r[a].hash}}n+=t.id}return n},e.prototype.invalidate=function(t,e){var n=this;if(void 0===t&&(t=this._timeModel&&this._timeModel._currentTimeIndex.get()),this.destroyed)return Promise.resolve([]);this.options.loadingControl&&this.options.loadingControl.toggle(!0,!0,500);var i=++this._i;return this.buildAllPromises(t).then((function(o){return n.pruneAfterLoad(),e?(n._timeModel._shownTimeIndex.get()!==t&&n._timeModel._shownTimeIndex.set(t),n._layersToCanvas(o,!0)):i===n._i&&(cancelAnimationFrame(n._af),n._af=requestAnimationFrame((function(){n._timeModel._shownTimeIndex.get()!==t&&n._timeModel._shownTimeIndex.set(t),n._layersToCanvas(o,!1)}))),n.options.loadingControl&&n.options.loadingControl.toggle(!1),m.U_.afterInvalidate(),o}))},e.prototype.getAlpha=function(t,e,n){if(e)return n&&(0,u.$K)(n.alpha)?n.baseAlpha:1;var i=1;return n&&(0,u.$K)(n.alpha)&&(i=n.alpha*n.baseAlpha),(0,u.$K)(this.options.alpha)?(0,u.hj)(this.options.alpha)?i*this.options.alpha:i*this.options.alpha(t):i},e.prototype._layersToCanvas=function(t,e){if(t.length&&t[0].length){for(var n=0;n<t.length;n++){var i=t[n][0].key;if(i in this._tiles){var o=this._tiles[i].el;if(o&&o.getContext){var r=this.timeStepToHash(this._timeModel.getTimeStep()),a=this.canvasContentCache.get(i);if(e||!a||a!==r){this.canvasContentCache.set(i,r);var l=s.DomUtil.hasClass(o,c.Z.loaded),u=o.getContext("2d");if(u.globalAlpha=1,this._layerOrder)for(var h=0,d=this._layerOrder;h<d.length;h++)for(var p=d[h],f=0;f<this._layers.length;f++)this._layers[f].drawToCanvas(p,o,u,t[n][f]),!l&&t[n][f].loaded&&(s.DomUtil.addClass(o,c.Z.loaded),l=!0);else for(f=0;f<this._layers.length;f++)this._layers[f].drawToCanvas(null,o,u,t[n][f]),!l&&t[n][f].loaded&&(s.DomUtil.addClass(o,c.Z.loaded),l=!0)}}}}this.events.invalidated.post()}},e.prototype.cache=function(t){return this.destroyed?Promise.resolve():this.buildAllPromises(t)},e.prototype.hasLoaded=function(t){void 0===t&&(t=this._timeModel._currentTimeIndex.get());var e=this._timeModel.getTimeStep(t);for(var n in this._tiles)for(var i=this._tiles[n],o=0,r=this._layers;o<r.length;o++){if(!r[o].hasLoaded(n,i.coords,e))return!1}return!0},e.prototype.destroy=function(){this.destroyed=!0,this.remove()},e.INVALIDATE_TIMEOUT_DELAY=50,e.fadeTime=400,e}(s.TileLayer),_=n(7985),w=n(1403),b=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){t[t.TopLeft=0]="TopLeft",t[t.TopRight=1]="TopRight",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(o||(o={}));var x=function(){function t(t,e,n,i,o){this.map=e,this.bounds=n,this.position=o,this.hidden=!1;var r=this.overlay=new s.ImageOverlay(i,n,{pane:"tilePane",zIndex:0});t.addLayer(r),s.DomUtil.addClass(r.getElement(),_.Z.overlay),e.on("move",this.onMapMove,this),this.onMapMove()}return t.prototype.onMapMove=function(){this.visible=this.bounds.intersects(this.map.getBounds()),this.updateVisibility()},t.prototype.remove=function(){this.overlay.remove(),this.map.off("move",this.onMapMove,this)},t.prototype.setUrl=function(t){t!==this.url&&(this.overlay.setUrl(t),this.url=t)},t.prototype.show=function(){var t=this;this.showAnimationFrame=s.Util.requestAnimFrame((function(){t.hidden=!1,t.updateVisibility()}))},t.prototype.hide=function(){s.Util.cancelAnimFrame(this.showAnimationFrame),this.hidden=!0,this.updateVisibility()},t.prototype.updateVisibility=function(){var t=this.visible&&!this.hidden;this.overlay.getElement().style.display=t?"":"none"},t}(),T=function(t){function e(e){var n=t.call(this,[])||this;return n.layers={},n.backmapURLs=(0,l.CY)()[e?"backmapWR":"backmapRR"],n}return b(e,t),e.prototype.onAdd=function(e){return t.prototype.onAdd.call(this,e),this.map=e,this.update(),this},e.prototype.onRemove=function(e){return t.prototype.onRemove.call(this,e),this},e.prototype.update=function(){var t=this.map.getBounds(),n=e.boundsToBackmaps(t);for(var i in this.layers)this.layers[i].active=!1;for(var o=0,r=n;o<r.length;o++){var a=r[o];if((i=a.key)in this.layers==!1){var s=new x(this,this.map,e.definitionToBounds(a),this.definitionToUrl(a.position),a.position);s.active=!0,this.layers[i]=s}else this.layers[i].active=!0}for(var i in this.layers){var l=this.layers[i];!1===l.active&&(l.remove(),delete this.layers[i])}this.updateZoom()},e.prototype.updateZoom=function(){for(var t in this.layers){var e=this.layers[t],n=this.definitionToUrl(e.position);e.setUrl(n)}},e.prototype.zoomEnd=function(){this.updateZoom()},e.prototype.getEvents=function(){return{move:s.Util.throttle(this.update,200,this),zoomend:this.zoomEnd}},e.prototype.definitionToUrl=function(t){var e=this.map.getZoom()>=7?".jpeg":".png";return"https://tiles".concat((0,w.B)(),".wo-cloud.com/data?path=")+this.backmapURLs[t].replace(".png",e)},e.definitionToBounds=function(t){var n=e.latBound,i=360*t.x;switch(t.position){case o.TopLeft:return new s.LatLngBounds([[n,-180+i],[0,i]]);case o.TopRight:return new s.LatLngBounds([[n,i],[0,180+i]]);case o.BottomLeft:return new s.LatLngBounds([[0,-180+i],[-n,i]]);case o.BottomRight:return new s.LatLngBounds([[0,i],[-n,180+i]])}return null},e.boundsToBackmaps=function(t){for(var n=[],i=t.getWest(),o=t.getEast(),r=e.lngToX(i),a=e.lngToX(o),s=r;s<=a;s++)this.addToDefinition(n,s);return n},e.addToDefinition=function(t,e){t.push({x:e,position:o.TopLeft,key:e+"tl"}),t.push({x:e,position:o.TopRight,key:e+"tr"}),t.push({x:e,position:o.BottomLeft,key:e+"bl"}),t.push({x:e,position:o.BottomRight,key:e+"br"})},e.lngToX=function(t){for(var e=0;t>180;)e++,t-=360;for(;t<-180;)e--,t+=360;return e},e.latBound=85.051129,e}(s.LayerGroup);var S,C=n(3936),M=function(){function t(t,e,n,i){this.init(t,e,n,i)}return t.prototype.init=function(t,e,n,i){t.mapMode.hasBackmap()&&(this._backmap=function(t,e){var n=new T(e);return n.addTo(t),n}(n,i.backmap.wr));var o=this._dynamicLayer=new y({errorTileUrl:i.errorTileUrl,timeModel:e,alpha:1,maxNativeZoom:C.z.maxZoom,areaConfig:(0,l.CY)().subAreas});o.addTo(n),setTimeout((function(){o.setLayers(i.layers.layers,i.layers.order)}))},t.prototype.update=function(t,e){this._dynamicLayer.setLayers(t,e,void 0,!0)},t.prototype.destroy=function(){this._backmap&&this._backmap.remove(),this._dynamicLayer.destroy()},Object.defineProperty(t.prototype,"dynamicLayer",{get:function(){return this._dynamicLayer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniqueKey",{get:function(){return t.uniqueKey},enumerable:!1,configurable:!0}),t.prototype.getTimeControlController=function(){return null},t.uniqueKey="layerState",t}(),P=n(9530);function k(t,e){void 0===e&&(e={});var n,i=O(t,e);return"https://tiles".concat((0,w.B)(),".wo-cloud.com/data?path=")+(0,l.CY)().staticLayer.path+(n=i.path,S?S(n):n)+"ZL{z}/{size}/{x}_{y}.{ext}"}function O(t,e){return void 0===e&&(e={}),e.wr?t?(0,l.CY)().staticLayer.wrGeooverlay:(0,l.CY)().staticLayer.wrTopography:t?(0,l.CY)().staticLayer.rrGeooverlay:(0,l.CY)().staticLayer.rrTopography}function D(t,e){void 0===e&&(e={});var n=O(t,e),i=k(t,e),o=function(t,e){return void 0===e&&(e={}),e.wr?t?"wrGeooverlay":"wrTopography":t?"rrGeooverlay":"rrTopography"}(t,e);return new P.f(o,i,{maxNativeZoom:(0,u.hj)(e.maxNativeZoom)?e.maxNativeZoom:(0,l.CY)().maxZoom,maxNativeZoomAreas:{global:10},urlFn:function(t,e){var i=t.z-(0,l.CY)().minZoom;i>=n.type.length?e.ext=n.type[n.type.length-1]:e.ext=n.type[i]},layerType:t?void 0:"topo"})}var L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),A=function(t){function e(e){var n=t.call(this,"static",null,e?"wr":"rr")||this;return n.wr=e,n}return L(e,t),e.prototype.getLayerGroup=function(t,e,n){return{name:this.id,mapOptions:{minZoom:2,maxZoom:10},timeModel:{activeTimeRange:"",cacheAllOnDrag:[],defaultPeriod:"",embeddedMode:!1,periodDropUp:[],periodEmbedded:[],periodMobile:[],periods:[],periodShowAlways:[]}}},e.prototype.getLayerState=function(t,e,n){var i=new M(t,e,n,{backmap:{wr:this.wr,global:!0},layers:{layers:[D(!1,{wr:this.wr,maxNativeZoom:10}),D(!0,{wr:this.wr,maxNativeZoom:10})]}});return i.dynamicLayer.options.maxNativeZoom=10,i},Object.defineProperty(e.prototype,"layerStateUniqueKey",{get:function(){return this.id},enumerable:!1,configurable:!0}),e.prototype.updateLayerState=function(t,e){},e.prototype.sharesMetadata=function(t){return t instanceof e},e}(r)},2271:(t,e,n)=>{"use strict";n.d(e,{T:()=>s});var i,o=n(9530),r=n(1584),a=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(n){return t.call(this,e.id,"",n)||this}return a(e,t),e.prototype.buildPromise=function(t,e,n,i){return void 0===i&&(i=!0),Promise.resolve({key:t,coords:e,url:"",transformation:this.getLayerTransformation(t,e,null),runtimeData:{area:this.getArea(e)},timeid:null,loaded:!1})},e.prototype.getUrl=function(t,e,n,i,o){return""},e.prototype._drawToCanvas=function(t,n,i,o){if(o&&(!t||t===e.id)){var a=this._map;if(a&&a.options.maxBounds){var s=a.options.maxBounds,l=o.coords.z,c=this._tilesize,u=new r.Bounds(a.project(s.getNorthEast(),l),a.project(s.getSouthWest(),l)),h=new r.Bounds(new r.Point(o.coords.x*c,o.coords.y*c),new r.Point((o.coords.x+1)*c,(o.coords.y+1)*c));i.fillStyle="#000",e.drawTop(i,c,h,u),e.drawBottom(i,c,h,u),e.drawLeft(i,c,h,u),e.drawRight(i,c,h,u)}}},e.drawTop=function(t,e,n,i){var o=i.min.y-n.min.y;o<=0||t.fillRect(0,0,e,Math.min(e,o))},e.drawBottom=function(t,e,n,i){var o=n.max.y-i.max.y;o<=0||(o=Math.min(e,o),t.fillRect(0,e-o,e,o))},e.drawLeft=function(t,e,n,i){var o=i.min.x-n.min.x;o<=0||t.fillRect(0,0,Math.min(e,o),e)},e.drawRight=function(t,e,n,i){var o=n.max.x-i.max.x;o<=0||(o=Math.min(e,o),t.fillRect(e-o,0,o,e))},e.prototype.canBePartOfComposite=function(){return!1},e.id="blackbars",e}(o.f)},9189:(t,e,n)=>{"use strict";n.d(e,{z:()=>m});var i,o=n(9530),r=n(1592),a=n(3472),s=n(1403),l=new RegExp(/(&|\?)(dsrc|path)=([\w\/\.]+)/),c=new RegExp(/&k=([\d\w]+)/);function u(t){var e=l;return e.lastIndex=0,e.exec(t)}function h(t){var e=c;return e.lastIndex=0,e.exec(t)}function d(t){var e=t.scaling,n=";",i=u(t.path);if(!i||i.length<=3)return null;var o=e.scale+n+e.type+n+e.x+n+e.y,r=t.type+"|"+o+"|"+i[3];if(t.secondaryPath){var a=u(t.secondaryPath);a&&a.length>=4&&(r+=n+a[3])}return r}var p,f=(p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},p(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(n,i,o){var r=t.call(this,e.id,"",o)||this;return r.children=n,r.order=i,e.urlPrefix||(e.urlPrefix="https://tiles".concat((0,s.B)(),".wo-cloud.com/composite?tiles=")),r}return f(e,t),e.buildCompositeLayer=function(t,n,i){var o={layers:[],order:[]},r=[],a=new e(r,n,i);o.layers.push(a),o.order.push(e.id);for(var s=0,l=0,c=t;l<c.length;l++){var u=c[l];!1!==u.canBePartOfComposite()?(u.maxNativeZoom&&(s=Math.max(s,u.maxNativeZoom)),u.isPartOfComposite=!0,r.push(u)):(o.layers.push(u),o.order.push(u.id))}return a.maxNativeZoom=s,o},e.prototype.init=function(e,n){t.prototype.init.call(this,e,n);for(var i=0,o=this.children;i<o.length;i++){o[i].init(e,n)}},e.prototype.getTimeForPromisekey=function(e,n,i){for(var o=t.prototype.getTimeForPromisekey.call(this,e,n,i),r=0,a=this.children;r<a.length;r++){var s=a[r];o+=s.getTimeForPromisekey(e,n,s._timeStepToTime(n,s.getArea(e)))}return o},e.prototype.getUrl=function(t,e,n,r,l,c){this.order||(this.order=this.children.map((function(t){return t.id})));for(var u=[],p="",f=0,m=this.order;f<m.length;f++)for(var g=m[f],v=0,y=this.children;v<y.length;v++){var _=y[v];if(_ instanceof o.f!=!1&&!_.sprite){var w=_.getCompositeEntry(t,e,c,g);if(w&&!(w.path.indexOf("///")>-1)){var b=h(w.path),x=d(w);x&&(u.push(x),b&&b.length>1&&(p+=b[1]))}}}return function(t,e,n,o,r,l){i||(i="https://tiles".concat((0,s.B)(),".wo-cloud.com/composite?tiles="));var c=(i+encodeURIComponent(btoa(e.filter((function(t){return null!==t})).join("$")))+"&k="+(0,a.v)(n)+"&lg="+(l||t.layerManager.activeLayerMode.getParameter)).replace("{s}","");return o&&(c+="&time="+o.id),r&&(c+="&format="+r),function(t){var e=t.split("?"),n=e[1].split("&").map((function(t){var e=t.split("=");if(e.length>2){var n=e.splice(1,e.length-1);return[e[0],n.join("=")]}return e}));return n.sort((function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:0})),e[0]+"?"+n.map((function(t){return t.join("=")})).join("&")}(c=c.replace(/mtf(-dev|-stage)?\.wetteronline\.de\//,"tiles$1.wo-cloud.com/composite").replace("?pid=p_wx_data&","?").replace("&pid=p_wx_data",""))}(this._map.controller,u,p,c)},e.prototype.deconstruct=function(){this._parent.setLayers(this.children,this.order,!1)},e.prototype.canBePartOfComposite=function(){return!1},e.id=r.J,e}(o.f)},1592:(t,e,n)=>{"use strict";n.d(e,{J:()=>i});var i="composite"},9530:(t,e,n)=>{"use strict";n.d(e,{f:()=>y});var i=n(1584);var o=n(2402);var r=function(){function t(t){this.entries=[],this.parse(t)}return t.prototype.parse=function(t){for(var e=!0,n="",i=0;i<t.length;i++){var o=t.charAt(i);"{"===o?(e=!1,!0,n.length&&this.entries.push({type:"s",val:n}),n=""):"}"===o?(e=!0,!1,n.length&&this.entries.push({type:"tpl",val:n}),n=""):n+=o}n.length&&e&&this.entries.push({type:"s",val:n})},t.prototype.generate=function(t){for(var e="",n=0,i=this.entries;n<i.length;n++){var o=i[n];if("s"===o.type)e+=o.val;else{var r=o.val;r in t&&(e+=t[r])}}return e},t}(),a=n(4484),s=function(){function t(t,e,n,i,o,r){this.map=t,this.key=e,this.bounds=n,this.minZoom=i,this.maxZoom=o,this.path=r,this.edgeTileCache={},this.edgeDetectionCache={},this.zoomBounds={},window.area=this}return t.prototype.getBounds=function(t){return this.zoomBounds[t]||this.bounds},t.prototype.isEdgeTile=function(t,e,n){var i="".concat(t.x,"$").concat(t.y,"$").concat(t.z,"$").concat(e).concat(n),o=this.edgeDetectionCache[i];if(void 0!==o)return o;for(var r=t.z,a=t.x,s=t.y;r>n;)r--,a>>=1,s>>=1;var l=this.getEdgeTiles(r,e);if(!l)return this.edgeDetectionCache[i]=!1,!1;var c=l.min,u=l.max,h=!1;return(a===c.x&&s>=c.y&&s<=u.y||a===u.x&&s>=c.y&&s<=u.y||s===c.y&&a>=c.x&&a<=u.x||s===u.y&&a>=c.x&&a<=u.x)&&(h=!0),this.edgeDetectionCache[i]=h,h},t.prototype.getEdgeTiles=function(t,e){var n=t+"$"+e,o=this.edgeTileCache[n];if(void 0!==o)return o;if(!this.bounds)return this.edgeTileCache[n]=null,null;var r=this.map,a=r.project(this.bounds.getNorthWest(),t)._divideBy(e).ceil(),s=r.project(this.bounds.getSouthEast(),t)._subtract(new i.Point(e/2,0))._divideBy(e).floor(),l=new i.Bounds(a,s);return this.edgeTileCache[n]=l,l},t}(),l=n(2477),c=n(1263),u=function(){function t(t,e){for(var n in this.map=t,this.areas=[],this.areaMap={},this.cache=new l.z6((0,c.np)(100)),e){var o=e[n],r=new s(t,n,(0,i.latLngBounds)([[o.bounds[0][0],o.bounds[0][1]],[o.bounds[1][0],o.bounds[1][1]]]),o.minZoom,o.maxZoom,o.path);if(o.zoomBounds)for(var a in o.zoomBounds){var u=a.replace("ZL",""),h=o.zoomBounds[a];r.zoomBounds[u]=(0,i.latLngBounds)([[h[0][0],h[0][1]],[h[1][0],h[1][1]]])}this.areas.push(r),this.areaMap[n]=r}}return t.getGlobalArea=function(t){return this.globalArea||(this.globalArea=new s(t,"global",null,0,99,(0,a.CY)().dynamicGlobalPath)),this.globalArea},t.prototype.getDefaultArea=function(e){return e===t.getGlobalArea(this.map).key?t.getGlobalArea(this.map):this.areaMap[e]},t.prototype.getArea=function(t,e){var n=t.lat+";"+t.lng+";"+e,i=this.cache.get(n);if(i)return i;var o=this._getArea(t,e);return this.cache.set(n,o),o},t.prototype.getAreaByKey=function(t){return this.areaMap[t]},t.prototype._getArea=function(e,n){for(var i=0,o=this.areas;i<o.length;i++){var r=o[i];if(n>=r.minZoom&&(!r.maxZoom||n<=r.maxZoom)&&r.getBounds(n).contains(e))return r}return t.getGlobalArea(this.map)},t}(),h=n(8989),d=n(1700),p=function(){function t(t){this._key=t,this.neighbours=[],this._maxNativeZoom=1/0,this._minNativeZoom=0}return t.build=function(e,n,i,o){var r=new t(e);return r._coords=n,r._timeLayer=i,r._cache=o,r},t.prototype.setSprite=function(t){return this._sprite=t,this},t.prototype.setIncludeNeighbours=function(t){return void 0===t&&(t=!0),this._includeNeighbours=t,this},t.prototype.setArea=function(t){return this.area=t,this},t.prototype.setMaxNativeZoom=function(t){return this._maxNativeZoom=t,this},t.prototype.setMinNativeZoom=function(t){return this._minNativeZoom=t,this},t.prototype.init=function(){if(this._done)return this;if(this._cache){this._includeNeighbours&&(this._key+="$n"),this._timeLayer&&(this._key+=this._timeLayer.hash);var t=this._cache.get(this._key);if(t)return t}for(var e=this._sprite,n=e?e.x:0,i=e?e.y:0,o=this._coords,r=o.z,a=o.x,s=o.y,l=1,c=this._maxNativeZoom,u=!1;c&&r>c;)l/=2,a>>=1,s>>=1,r--,u=!0;var h=(o.x-a/l)*l,d=(o.y-s/l)*l,p=n+h,f=i+d,m=Math.pow(2,r-1);for(this.realWorldX=a;a<0;)a+=m;for(;a>=m;)a-=m;return this.scale=1,this.offsetX=p,this.offsetY=f,this.rawOffsetX=h,this.rawOffsetY=d,this.spriteX=n,this.spriteY=i,this.size=l,this.subTiles=1,this.x=a,this.y=s,this.z=r,this.maxNativeZoomBorder=u,this._done=!0,this._cache&&this._cache.set(this._key,this),this},t}();function f(t){return(0,o.HD)(t)?{year:t.substring(0,4),month:t.substring(4,6),day:t.substring(6,8),hour:t.substring(9,11),minute:t.substring(11,13),version:""}:null===t?null:{year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],version:t[5]}}var m={year:"",month:"",day:"",hour:"",minute:"",version:""};function g(t){return t.x+":"+t.y+":"+t.z}var v=new l.z6((0,c.np)(2e3,1e3)),y=function(){function t(t,e,n){void 0===n&&(n={});var a=this;this.baseAlpha=1,this.visible=!0,this.promiseCache=new l.z6(1e3),this._promiseKeys={},this.isPartOfComposite=!1,this._layerTransformationCache=v,this._areaCache=new l.z6(1e3),this.transformationsCacheable=!0,this.layerTransformationCacheSuffix="",this.id=this.orderId=this.layerId=t,n.layerId&&(this.layerId=n.layerId),n.orderId&&(this.orderId=n.orderId),this._url=e,this._urlTemplate=new r(e),this.maxNativeZoom=n.maxNativeZoom,this.minNativeZoom=n.minNativeZoom,this.showErrorImage=n.showErrorImage,this.alpha=(0,o.S8)(n.alpha,1),this.sprite=n.sprite,n.bounds&&(this.bounds=(0,i.latLngBounds)(n.bounds)),this.urlFn=n.urlFn,this.pixelated=n.pixelated,this.fixedScaling=n.fixedScaling,this._suffix=n.suffix,this._webgl=n.webgl,this._defaultArea=n.defaultArea,this._areaUrl=n.areaUrl,this.layerType=n.layerType,this.maxNativeZoomAreas=n.maxNativeZoomAreas,this.marginTileSize=n.marginTileSize,this.noAreaFallback=n.noAreaFallback,n.layerTransformationCacheSuffix&&(this.layerTransformationCacheSuffix=n.layerTransformationCacheSuffix),c.U_.cache.on("removed",(function(t){var e=a._promiseKeys[t.key];e&&a.promiseCache.remove(e),delete a._promiseKeys[t.key]}))}return t.prototype.init=function(t,e){t===this._map&&e===this._parent||(this._map=t,this._parent=e,this._tilesize=e.options.tileSize,this._areaChecker=new u(t,e.options.areaConfig))},t.prototype.getArea=function(t){var e=g(t),n=this._areaCache.get(e);if(n)return n;var i=this._getArea(e,t);return this._areaCache.set(e,i),i},t.prototype._getArea=function(t,e){if(this._defaultArea)return this._areaChecker.getDefaultArea(this._defaultArea);var n=this._map,o=this._tilesize,r=(0,i.point)(o,o),a=(0,i.point)(e.x,e.y).scaleBy(r)._add(r._divideBy(2)),s=n.wrapLatLng(n.unproject(a,e.z));return this._areaChecker.getArea(s,e.z)},t.prototype.getLayerTransformation=function(t,e,n,i,o){return void 0===i&&(i=!0),void 0===o&&(o=this.getArea(e)),p.build(t+this.layerTransformationCacheSuffix,e,n,this.transformationsCacheable&&this._layerTransformationCache).setArea(o).setSprite(this.sprite).setMaxNativeZoom(this.extractMaxNativeZoom(n,o)).setMinNativeZoom(this.minNativeZoom).init()},t.prototype.extractMaxNativeZoom=function(t,e){return t&&t.mnz?t.mnz:e&&this.maxNativeZoomAreas&&e.key in this.maxNativeZoomAreas?this.maxNativeZoomAreas[e.key]:this.maxNativeZoom},t.prototype.adjustFoundArea=function(t,e){return e?t.key in e.layers&&this.layerId in e.layers[t.key]?t:this.noAreaFallback?null:u.getGlobalArea(this._map):t},t.prototype.getUrl=function(t,e,n,i,o,r,a,s,l){return void 0===a&&(a=this.extractMaxNativeZoom(o,n)),this.getRawUrl(e,n,i,o,r,a,s,l)},t.prototype.getRawUrl=function(t,e,n,i,o,r,a,s){void 0===r&&(r=this.extractMaxNativeZoom(i,e));var l=this._parent,c=t.z||l._tileZoom;c=Math.max(l.options.minZoom,Math.min(c,l.options.maxNativeZoom));var u={x:2*t.x,y:2*t.y,z:c,zoom:c,s:"",size:this.marginTileSize&&c>=r?this.marginTileSize:l.options.tileSize,suffix:a||this._suffix||"",cors:""};u.layer=s||(i?i.path:""),this._areaUrl?u.areaPath=this._areaUrl:i&&i.ptypPath?u.areaPath=i.ptypPath:u.areaPath=e?e.path:"",l.options.urlFn&&l.options.urlFn(t,u),this.urlFn&&this.urlFn(t,u);var d=this._urlTemplate.generate((0,h.l)({},m,u,n));return i&&i.hash&&(d+="&k="+i.hash),d},t.prototype.transformationToCompositeScaling=function(t){var e=1/t.size;return{scale:e,type:"",x:e*t.offsetX,y:e*t.offsetY}},t.prototype.getCompositeEntry=function(t,e,n,i,o){if(void 0===o&&(o=this.getArea(e)),!1===this.handlesOrder(i))return null;if(!(o=this.adjustFoundArea(o,n)))return null;var r=this._timeStepToTime(n,o),a=this.getLayerTransformation(t,e,r,this.fixedScaling,o),s=null!==r?r.timePath:null;return{type:this.getCompositeLayerType(),scaling:this.transformationToCompositeScaling(a),path:this.getRawUrl(a,o,f(s),r,n)}},t.prototype._timeStepToTime=function(t,e){if(t&&t.layers){var n=e.key;if(n in t.layers){var i=t.layers[n];if(this.layerId in i)return i[this.layerId]}var o=u.getGlobalArea(this._map);if(o.key in t.layers){i=t.layers[o.key];if(this.layerId in i)return i[this.layerId]}}return null},t.prototype.getTimeForPromisekey=function(t,e,n){return!n&&e?e.id:null!==n?n.timePath.join("$"):""},t.prototype.buildPromise=function(t,e,n,i){void 0===i&&(i=!0);var o=this.getArea(e);o=this.adjustFoundArea(o,n);var r=this._timeStepToTime(n,o),a=this.getLayerTransformation(t,e,r,this.fixedScaling,o),s=null!==r?r.timePath:null,l=this.getUrl(t,a,o,f(s),r,n),c=t+";"+this.getTimeForPromisekey(e,n,r)+";"+this.id+";"+(i?1:0);this._promiseKeys[l]=c;var u=this.promiseCache.get(c);if(u)return u;var h=this._buildPromise(t,c,e,n,r,l);if(this.fixedScaling&&i&&a.neighbours.length){for(var d=[],p=0,m=a.neighbours;p<m.length;p++){var v=m[p].transformation,y={x:v.x,y:v.y,z:v.z};d.push(this.buildPromise(g(y),y,n,!1))}var _=Promise.all(d).then((function(){return h}));return this.promiseCache.set(c,_),_}return this.promiseCache.set(c,h),h},t.prototype._buildPromise=function(e,n,i,o,r,a){var s=this,l=this.getArea(i),u=this.getLayerTransformation(e,i,r,this.fixedScaling,l),h=null!==r?r.timePath:null,p=null!==r?r.hash:null,m={key:e,coords:i,url:a,transformation:u,timePath:h,hash:p,runtimeData:{},timeid:h?h.join("-"):"",loaded:!1,timeLayer:r};if(r&&r.ZL&&u.z in r.ZL){for(var g=!1,v=r.ZL[u.z],y=2*u.x+"_"+2*u.y,_=0,w=v;_<w.length;_++){if(y===w[_]){g=!0;break}}if(!g)return c.U_.setNotExisting(a),m.loaded=!0,Promise.resolve(m)}if(u.neighbours){var b=f(h);m.neighbourStrings=u.neighbours.map((function(t){var n=t.transformation;return s.getUrl(e,n,l,b,r,o)}))}return new Promise((function(e){var i=!1,o=!1,r=setTimeout((function(){o||(i=!0,m.data=d.r.Timeout,e(m))}),t.loadTimeout);s._webgl?c.mW.get(a).then((function(t){o=!0,m.data=t,m.loaded=!0,i?(s.promiseCache.set(n,Promise.resolve(m)),s._parent.invalidate()):e(m)})).catch((function(t){o=!0,m.data=d.r.MissingOrError,i||e(m),c.mW.retry(a,(function(t){m.data=t,m.loaded=!0,s.promiseCache.set(n,Promise.resolve(m)),s._parent.invalidate()}),t)})):c.U_.get(a).then((function(t){o=!0,m.img=t,m.loaded=!0,clearTimeout(r),i?(s.promiseCache.set(n,Promise.resolve(m)),s._parent.invalidate(void 0,!0)):e(m)})).catch((function(t){o=!0,m.img=null,clearTimeout(r),i||e(m),c.U_.retry(a,(function(t){m.img=t,m.loaded=!0,s.promiseCache.set(n,Promise.resolve(m)),s._parent.invalidate(void 0,!0)}),t)}))}))},t.prototype.hasLoaded=function(t,e,n){var i=this.getArea(e),o=this._timeStepToTime(n,i),r=this.getLayerTransformation(t,e,o,void 0,i),a=null!==o?o.timePath:null,s=this.getUrl(t,r,i,f(a),o,n);return!s||c.U_.hasLoaded(s)},t._setImageSmoothing=function(t,e){t.mozImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.imageSmoothingEnabled=e,t.imageSmoothingQuality="high"},t.prototype.drawToCanvas=function(t,e,n,i){this.visible&&i&&this._drawToCanvas(t,e,n,i)},t.prototype.handlesOrder=function(t){return!t||t===this.orderId},t.prototype._drawToCanvas=function(e,n,o,r){if(!1!==this.handlesOrder(e)){var a=this._parent,s=c.U_.getCached(r.url),l=null===s;if(s||l){var u,h,d;t._setImageSmoothing(o,!this.pixelated),o.globalAlpha=a.getAlpha((u=r.key,h=u.split(":"),(d=new i.Point(+h[0],+h[1])).z=+h[2],d),l,this);var p=r.transformation,f=p.scale*n.width;if(l)this.showErrorImage&&o.drawImage(this._parent._errorImage,0,0,n.width,n.height,0,0,f,f);else{var m=0;s.height%this.marginTileSize==0&&(m=(this.marginTileSize-this._tilesize)/2),o.drawImage(s,p.offsetX*n.width+(1+2*p.spriteX)*m,p.offsetY*n.height+(1+2*p.spriteY)*m,p.size*n.width,p.size*n.height,0,0,f,f)}}}},t.prototype.getCompositeLayerType=function(){return this.layerType?this.layerType:"i"},t.prototype.getPixel=function(e,n,i){var o=this._map;if(!o)return null;if(!this.pixelCache){var r=document.createElement("canvas"),a=r.getContext("2d");r.width=r.height=this._tilesize,t._setImageSmoothing(a,!1),this.pixelCache={canvas:r,ctx:a,key:""}}var s=Math.ceil(o.getZoom()),l=o.project(e,s).floor().divideBy(this._tilesize),c=l.floor(),u={x:c.x,y:c.y,z:s},h=g(u),d=this.getArea(u),p=this._timeStepToTime(n,d),m=this.getLayerTransformation(h,u,p,void 0,d),v=p?p.timePath:null,y=h+"$"+(v?v.join(";"):n.id),_=this.getUrl(h,m,d,f(v),p,n);if(!this.hasLoaded(h,u,n))return null;var w=this.pixelCache;y!==w.key&&(w.ctx.clearRect(0,0,this._tilesize,this._tilesize),this.drawToCanvas(null,w.canvas,w.ctx,{key:h,coords:u,url:_,transformation:m,runtimeData:{},timeid:"",loaded:!0}),w.key=y);var b=w.ctx.getImageData((l.x-c.x)*this._tilesize,(l.y-c.y)*this._tilesize,1,1).data;return[b[0],b[1],b[2],b[3]]},t.prototype.canBePartOfComposite=function(){return!0},t.loadTimeout=6e3,t}()},2106:(t,e,n)=>{"use strict";n.d(e,{l:()=>r});var i=n(5938),o=function(){function t(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.then=function(t,e){return this.promise.then(t,e)},t}(),r=function(){function t(t,e){this.options=e,this._currentTimeIndex=new i.v,this._liveUpdates=new i.y,this._shownTimeIndex=new i.v,this._shownTimeIndexOffset=new i.v,this._timeRange=new i.y,this.afterInit=new o,this.cacheables=[],this.afterInit.resolve()}return t.prototype.cacheAll=function(t){},t.prototype.cacheNext=function(t,e){},t.prototype.destroy=function(){},t.prototype.getActivePeriod=function(){return""},t.prototype.getDefaultTimeIndex=function(){return 0},t.prototype.getDefaultTimeStep=function(){},t.prototype.getShownTimeIndex=function(){return 0},t.prototype.getShownTimeIndexOffset=function(){return 0},t.prototype.getTime=function(t){return""},t.prototype.getTimeIndex=function(){return 0},t.prototype.getTimeRangeConfig=function(t){},t.prototype.getTimeStep=function(t){},t.prototype.getTimeSteps=function(){return[]},t.prototype.hasLoaded=function(t){return!1},t.prototype.hasNext=function(t){return!1},t.prototype.next=function(t){},t.prototype.nextIndex=function(t,e){return 0},t.prototype.prev=function(){},t.prototype.prevIndex=function(){return 0},t.prototype.setShownTimeIndexOffset=function(t){},t.prototype.setTimeIndex=function(t){},t.prototype.setTimeRange=function(t){},t.prototype.stop=function(){},t.prototype.update=function(t){},t}()},2883:(t,e,n)=>{"use strict";var i;n.d(e,{Q:()=>i}),function(t){t[t.AddressBarUpdater=0]="AddressBarUpdater",t[t.StaticMap=1]="StaticMap",t[t.MapZoomMode=2]="MapZoomMode",t[t.WithSearchButton=3]="WithSearchButton",t[t.ShowSearchResultsInMap=4]="ShowSearchResultsInMap",t[t.FullScreenModeEnabled=5]="FullScreenModeEnabled",t[t.TimeControlHideOnInactivity=6]="TimeControlHideOnInactivity",t[t.TimeControlShowLatestButton=7]="TimeControlShowLatestButton",t[t.TimeControlCacheAllTimeStepsOnDrag=8]="TimeControlCacheAllTimeStepsOnDrag",t[t.TimeControlFloatingInfoButton=9]="TimeControlFloatingInfoButton",t[t.NoFullscreenBugfix=10]="NoFullscreenBugfix",t[t.NewPageOnPeriodChange=11]="NewPageOnPeriodChange",t[t.LiveMode=12]="LiveMode"}(i||(i={}))},5430:(t,e,n)=>{"use strict";n.d(e,{WV:()=>s});var i,o=n(2883),r=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){function t(){this.data={},this.features={}}return t.fromString=function(t){var e;switch(t){case"embedded":return(e=new c).features[o.Q.StaticMap]=!0,e.features[o.Q.TimeControlHideOnInactivity]=!0,e;case"compact":return(e=new l).features[o.Q.StaticMap]=!0,e.features[o.Q.WithSearchButton]=!0,e.features[o.Q.TimeControlShowLatestButton]=!0,e.features[o.Q.TimeControlCacheAllTimeStepsOnDrag]=!0,e.features[o.Q.TimeControlFloatingInfoButton]=!0,e}return(e=new s).features[o.Q.WithSearchButton]=!0,e.features[o.Q.FullScreenModeEnabled]=!0,e.features[o.Q.TimeControlHideOnInactivity]=!0,e.features[o.Q.TimeControlShowLatestButton]=!0,e.features[o.Q.ShowSearchResultsInMap]=!0,e},t.prototype.toClassName=function(){return this.toString()+"-mode"},t.prototype.isEmbedded=function(){return!1},t.prototype.isCompact=function(){return!1},t.prototype.isInteractive=function(){return!1},t.prototype.hasBackmap=function(){return!0},t}(),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){return"interactive"},e.prototype.isInteractive=function(){return!0},e}(a),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){return"compact"},e.prototype.isCompact=function(){return!0},e}(a),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){return"embedded"},e.prototype.isEmbedded=function(){return!0},e.prototype.hasBackmap=function(){return!1},e}(a)},5938:(t,e,n)=>{"use strict";n.d(e,{v:()=>l,y:()=>s});var i,o=n(2402),r=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){function t(t){void 0===t&&(t={}),this.options=t,this.listeners=[],this.lastValue=t.initialValue}return t.simpleFilter=function(t,e){return t!==e},t.prototype.set=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t=(0,o.$K)(t)?t:this.lastValue,!this.options.filter||this.options.filter(t,this.lastValue)){this.lastValue=t;var i=Array.prototype.slice.call(arguments);return this.notifyListeners(i)}},t.prototype.addListener=function(e,n){void 0===n&&(n={}),n.dontRemove&&t.dontRemoveKey in e==!1&&(e[t.dontRemoveKey]=!0);for(var i=this.listeners,o=!1,r=0;r<i.length;r++)if(i[r]===e){o=!0;break}o||(i.push(e),(this.options.notifyImmediately||n.notifyImmediately)&&void 0!==this.lastValue&&e(this.lastValue))},t.prototype.removeListener=function(t){for(var e=this.listeners,n=0;n<e.length;n++)e[n]===t&&(e.splice(n,1),n--)},t.prototype.get=function(){return this.lastValue},t.prototype.clearListeners=function(){for(var t=this.listeners,e=0;e<t.length;e++)s.dontRemoveKey in t[e]||(t.splice(e,1),e--)},t.dontRemoveKey="__DONT_REMOVE__",t}(),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyListeners=function(t){var e=this;return clearTimeout(this.timeout),new Promise((function(n){e.timeout=window.setTimeout((function(){for(var i=!0,o=e.listeners,r=0;r<o.length;r++){!1===o[r].apply(null,t)&&(i=!1)}n(i)}))}))},e}(a),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyListeners=function(t){for(var e=!0,n=this.listeners,i=0;i<n.length;i++){!1===n[i].apply(null,t)&&(e=!1)}return e},e}(a)},194:(t,e,n)=>{"use strict";n.d(e,{DM:()=>c,T4:()=>i,sN:()=>l});var i,o,r,a=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},s=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};function l(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,r];case 1:return e.sent(),[2,c(t)]}}))}))}function c(t){if(o)switch(t){case i.DisableZl10:return o.disable_zl_10;case i.SlowLiveMode:return o.slow_live_mode;case i.NoRetry:return o.no_retry;case i.OnlyGetRouteMetadata:return o.only_get_route_metadata;case i.NonAggressiveCaching:return o.non_aggressive_caching}return!1}!function(t){t[t.DisableZl10=0]="DisableZl10",t[t.SlowLiveMode=1]="SlowLiveMode",t[t.NoRetry=2]="NoRetry",t[t.OnlyGetRouteMetadata=3]="OnlyGetRouteMetadata",t[t.NonAggressiveCaching=4]="NonAggressiveCaching"}(i||(i={})),r=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("https://wetterradar-config.wo-cloud.com/config.json")];case 1:return[4,t.sent().json()];case 2:return o=t.sent(),[3,4];case 3:return t.sent(),o=null,[3,4];case 4:return[2]}}))}))}()},7008:(t,e,n)=>{"use strict";n.d(e,{C:()=>a});var i=n(9239),o=n(1164),r=n(194);var a=function(){function t(t,e){var n=this;this.retryOnError=!1,this.cache=new i.z6(t,e),this.promiseCache=new i.z6(t),this.cache.on("removed",(function(t){n.promiseCache.remove(t.key)}))}return t.prototype.afterInvalidate=function(){var t=this;clearTimeout(this.invalidateTimeout),this.invalidateTimeout=window.setTimeout((function(){t.cache.clearOverflow()}),300)},t.prototype.get=function(t,e){void 0===e&&(e=!1);var n=t;e&&(n+="&_=".concat(Math.round(1e4*Math.random())));var i=this.promiseCache.get(n);if(i)return i;var o=this.buildPromise(t,n);return this.promiseCache.set(n,o),o},t.prototype.getCached=function(t){return this.cache.get(t)},t.prototype.setNotExisting=function(t){this.cache.set(t,null),this.promiseCache.set(t,Promise.resolve(null))},t.prototype.hasLoaded=function(t){return!!this.cache.get(t)},t.prototype.retry=function(e,n,i){var a=this;if(-1===e.indexOf("////")){var s=0,l=function(){a.get(e,!0).then((function(t){a.promiseCache.set(e,Promise.resolve(t)),n(t)})).catch(c)};c(i)}function c(e){var n=e&&e.status?e.status:-1;(0,r.DM)(r.T4.NoRetry)&&s>=1||403===n||("onLine"in navigator&&!navigator.onLine?o.Q.addListener(l):(503===n||-1===n)&&s<=2?(console.log("Retrying after ".concat(n)),s++,setTimeout(l,300)):(s++,setTimeout(l,1===s?t.shortRetryTime:(s-1)*t.retryTime)))}},t.retryTime=5e3,t.shortRetryTime=.3*t.retryTime,t}()},1263:(t,e,n)=>{"use strict";n.d(e,{U_:()=>s,WX:()=>c,mW:()=>l,np:()=>r});var i=n(2477),o=n(9239);function r(t,e){if(void 0===e&&(e=5),"deviceMemory"in navigator){var n=navigator.deviceMemory;if("number"==typeof n){var i=n/4;return Math.max(5,e,Math.floor(t/Math.pow(2,1-i)))}}return t}var a=r(150),s=new i.ym(a,o.w.Large),l=new i._I(a,o.w.Large),c=new i.YV(void 0,o.w.Medium)},4238:(t,e,n)=>{"use strict";n.d(e,{K:()=>a});var i,o=n(2654),r=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.build=function(t){var e=t.split(";"),n=parseInt(e[0],10),i=parseInt(e[1],10),o=document.createElement("canvas");return o.width=n,o.height=i,o},e}(o.U))},1700:(t,e,n)=>{"use strict";n.d(e,{r:()=>u,_:()=>d});var i=n(7008),o=n(4238),r=n(1584),a="performance"in window;function s(){return a?performance.now():+new Date}var l,c=(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},l(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});var u,h=new(function(){function t(){this.jobs=[],this._doJob=this.doJob.bind(this)}return t.prototype.addJob=function(t){this.jobs.push(t),1===this.jobs.length&&this.nextJob()},t.prototype.nextJob=function(){requestAnimationFrame(this._doJob)},t.prototype.doJob=function(){for(var e=this.jobs,n=s(),i=0;e.length&&i<t.MAX_JOB_EXEC_TIME;){e.shift()(),i=s()-n}e.length&&this.nextJob()},t.MAX_JOB_EXEC_TIME=12,t}()),d=function(t){function e(e,n){return t.call(this,e,n)||this}return c(e,t),e.prototype.buildPromise=function(t,e){var n=this;return new Promise((function(i,a){var s=new Image;s.onload=function(e){if("error"!==e.type&&s.naturalWidth>10){var a=o.K.get(s.naturalWidth+";"+s.naturalHeight);h.addJob((function(){var e=a.getContext("2d");e.clearRect(0,0,a.width,a.height),e.drawImage(s,0,0,a.width,a.height);var o=function(t){for(var e=new Uint8Array(t.length/4),n=0,i=0;i<t.length;i+=4)e[n]=t[i],n++;return e}(e.getImageData(0,0,a.width,a.height).data);n.cache.set(t,o),i(o),delete s.onload,s.src=r.Util.emptyImageUrl}))}else n.cache.set(t,u.MissingOrError),i(null)},s.onerror=function(e){n.cache.set(t,u.MissingOrError),a(e)},s.src=e}))},e}(i.C);!function(t){t[t.Timeout=0]="Timeout",t[t.MissingOrError=1]="MissingOrError"}(u||(u={})),window.ImageDataState=u},9239:(t,e,n)=>{"use strict";n.d(e,{w:()=>i,z6:()=>s});var i,o=n(7994),r=function(t,e,n){this.key=t,this.value=e,this.lastUsed=n};!function(t){t[t.Small=1]="Small",t[t.Medium=3]="Medium",t[t.Large=10]="Large"}(i||(i={}));var a=3e5,s=function(){function t(e,n,o){void 0===n&&(n=i.Small),void 0===o&&(o=a);var r=this;this._contentSize=n,this.maxAge=o,this.size=0,this.keymap={},this.listeners={},t.events.newCache.post(this),e=-1===e?Number.MAX_VALUE:Math.max(10,e),this._limit=e||Number.MAX_VALUE,setInterval((function(){return r.clearOldEntries()}),75e3),this._clearOverflow=this._clearOverflow.bind(this)}return t.now=function(){return+new Date},t.prototype.on=function(t,e){(this.listeners[t]||(this.listeners[t]=[])).push(e)},t.prototype.notify=function(t,e){if(t in this.listeners)for(var n=0,i=this.listeners[t];n<i.length;n++){(0,i[n])(e)}},t.prototype.markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,e.lastUsed=t.now(),this.newest&&(this.newest.newer=e),this.newest=e)},t.prototype.set=function(e,n){var i=this.keymap[e];if(i)return i.value=n,void this.markEntryAsUsed(i);this.keymap[e]=i=new r(e,n,t.now()),this.newest?(this.newest.newer=i,i.older=this.newest):this.oldest=i,this.newest=i,this.size++,this.clearOverflow()},t.prototype.shift=function(){var t=this.oldest;return t&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),t.newer=t.older=void 0,delete this.keymap[t.key],this.size--,this.clear(t),this.notify("removed",t)),t},Object.defineProperty(t.prototype,"_canShift",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.clearOverflow=function(){clearTimeout(this.clearOverflowTimer),this.clearOverflowTimer=window.setTimeout(this._clearOverflow,5e3)},t.prototype._clearOverflow=function(){if(this.size>this._limit)for(;this.size>this._limit&&this._canShift;)this.shift()},t.prototype.setLimit=function(t){t=-1===t?Number.MAX_VALUE:Math.max(10,t),this._limit=t,this.clearOverflow()},Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},enumerable:!1,configurable:!0}),t.prototype.clearOldEntries=function(){for(var e=t.now()-this.maxAge;this.size>t.maxAgeKeep;){var n=this.oldest;if(!(n&&n.lastUsed<e))break;this.shift()}},t.prototype.get=function(t,e){void 0===e&&(e=!1);var n=this.keymap[t];if(void 0!==n)return this.markEntryAsUsed(n),e?n:n.value},t.prototype.find=function(t){return this.keymap[t]},t.prototype.remove=function(t){var e=this.keymap[t];if(e)return delete this.keymap[t],e.newer&&e.older?(e.older.newer=e.newer,e.newer.older=e.older):e.newer?(e.newer.older=void 0,this.oldest=e.newer):e.older?(e.older.newer=void 0,this.newest=e.older):this.oldest=this.newest=void 0,this.clear(e),this.size--,this.notify("removed",e),e.value},t.prototype.clear=function(t){this.clearFunction&&this.clearFunction(t)},t.prototype.setClearFunction=function(t){this.clearFunction=t},t.events={newCache:new o.SyncEvent},t.maxAgeKeep=100,t}()},1164:(t,e,n)=>{"use strict";n.d(e,{Q:()=>i});var i=new(function(){function t(){this.onceListeners=[],window.addEventListener("online",this.onOnline.bind(this))}return t.prototype.addListener=function(t){return"onLine"in navigator&&navigator.onLine?(t(),!1):(this.onceListeners.push(t),!0)},t.prototype.onOnline=function(){for(var t=0,e=this.onceListeners;t<e.length;t++){(0,e[t])()}this.onceListeners.length=0},t}())},2654:(t,e,n)=>{"use strict";n.d(e,{U:()=>o});var i=n(9239),o=function(){function t(t){this.cache=new i.z6(t)}return t.prototype.get=function(t){var e=this.cache.get(t);if(e)return e;var n=this.build(t);return this.cache.set(t,n),n},t}()},2477:(t,e,n)=>{"use strict";n.d(e,{ym:()=>u,_I:()=>h._,YV:()=>m,z6:()=>g.z6});var i=n(7008);n(4238);function o(t,e){if("string"!=typeof t||!e)return t;var n=t.indexOf("?")>-1,i=[];for(var o in e)i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t+=(n?"&":"?")+i.join("&")}function r(t,e){return e&&(t=o(t,e.data)),fetch(t,e).then((function(t){if(t.status>=200&&t.status<300)return t;throw t}))}var a,s=n(1584),l=n(2402),c=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.cache.setClearFunction((function(t){if(t.value){var e=t.value;e.onload=l.ZT,e.onerror=l.ZT;var n=e.src;e.src=s.Util.emptyImageUrl,e.test=123;try{URL.revokeObjectURL(n)}catch(t){}delete t.value}})),i}return c(e,t),e.prototype.buildPromise=function(t,e){var n=this;return void 0===e&&(e=t),new Promise((function(i,o){if(-1===t.indexOf("////")){var a=0;window.urls&&window.urls.push(t);var c=function(){r(e,{cache:"default",method:"GET",mode:"cors"}).then((function(t){return t.blob()})).then((function(e){var r=new Image;r.onload=function(){r.naturalWidth<10?n.cache.set(t,null):n.cache.set(t,r),i(r),r.onload=l.ZT,r.onerror=l.ZT},r.onerror=function(t){if(r.onload=l.ZT,r.onerror=l.ZT,r.src=s.Util.emptyImageUrl,n.retryOnError&&a<3)return a++,void c();o(t)},r.src=URL.createObjectURL(e)})).catch((function(e){console.log(e),n.cache.set(t,null),o(e)}))};c()}else o()}))},e}(i.C),h=n(1700),d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},f=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.buildPromise=function(t,e){return void 0===e&&(e=t),p(this,void 0,void 0,(function(){var n,i,o;return f(this,(function(a){switch(a.label){case 0:if(t.indexOf("////")>-1)throw new Error("Invalid url");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r(e,{cache:"default",method:"GET",mode:"cors"})];case 2:return n=a.sent(),[3,4];case 3:throw i=a.sent(),this.cache.set(t,null),i;case 4:return a.trys.push([4,6,,7]),[4,n.json()];case 5:return o=a.sent(),this.cache.set(t,o),[2,o];case 6:return a.sent(),this.cache.set(t,null),[2,null];case 7:return[2]}}))}))},e}(i.C),g=n(9239),v=(n(1164),n(2654)),y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.build=function(t){var e=parseInt(t,10),n=document.createElement("canvas");return n.width=e,n.height=e,n},e}(v.U))},8989:(t,e,n)=>{"use strict";n.d(e,{l:()=>s});var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},a=function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e,n=i.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&i.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;for(e in t);return void 0===e||i.call(t,e)};function s(){for(var t,e,n,i,o,l,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<p;++d)if(null!=(t=arguments[d]))for(e in t)n=h[e],h!==(i=t[e])&&(f&&i&&(a(i)||(o=r(i)))?(o?(o=!1,l=n&&r(n)?n:[]):l=n&&a(n)?n:{},h[e]=s(f,l,i)):void 0!==i&&(h[e]=i));return h}},3472:(t,e,n)=>{"use strict";n.d(e,{d:()=>r,v:()=>a});var i=n(2402),o=function(t){var e=t.replace(/\+/g," ");try{e=decodeURIComponent(e)}catch(t){try{e=unescape(e)}catch(t){}}return e};function r(t,e,n){void 0===t&&(t=location.search?location.search.replace("?",""):""),void 0===e&&(e=!0),void 0===n&&(n=!0);var r=t.split(/[&;]/),a={};if(!r.length)return a;for(var s=0;s<r.length;s++){var l=r[s],c=l.indexOf("=")+1,u=c?l.substr(c):"",h=c?l.substr(0,c-1).match(/([^\]\[]+|(\B)(?=\]))/g):[l],d=a;if(h){n&&(u=o(u));for(var p=0;p<h.length;p++){var f=h[p];e&&(f=o(f));var m=d[f];p<h.length-1?d=d[f]=m||{}:(0,i.kJ)(m)?m.push(u):d[f]=u}}}return a}function a(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}},1403:(t,e,n)=>{"use strict";n.d(e,{B:()=>o});var i="";function o(){return i}},2402:(t,e,n)=>{"use strict";function i(t){return void 0!==t}function o(t){return"number"==typeof t}function r(t){return"string"==typeof t}function a(t){return Array.isArray(t)}function s(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function l(t,e){return i(t)?t:e}function c(){}var u;n.d(e,{$K:()=>i,HD:()=>r,S8:()=>l,U:()=>s,ZT:()=>c,hj:()=>o,kJ:()=>a}),function(t){t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t[t.TopRight=4]="TopRight",t[t.BottomRight=5]="BottomRight",t[t.BottomLeft=6]="BottomLeft",t[t.TopLeft=7]="TopLeft"}(u||(u={}))},2692:(t,e,n)=>{"use strict";n.d(e,{r:()=>v});var i,o=n(9679),r=n(1607),a=n(9857),s=n(4241),l=n(5527),c=n(3191),u=n(4700),h=n(8193),d=n(4021),p=n(833),f=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},g=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},v=function(t){function e(e){var n=t.call(this,e)||this;return n.events={index:new l.y,next:new l.y,prev:new l.y},n.meta=(0,s.s)(r.V.pid.cur),n.init(),n}return f(e,t),e.focusMapStepper=function(){u("mapstepper").focus()},Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{basepath:"/?pid="+r.V.pid.cur+"&sid="+r.V.sid.cur+"&table=true&ireq=true",hasParaid:!1}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.printmodus=(0,a.W)().print||!1;var t=this.meta;t&&t.label.length>0&&(this.tablenumber=t.label.length,this.gid=WO.geo.gid,WO.date.fcdatstr?(this.day=WO.date.fcdatstr.substr(6,2),this.month=WO.date.fcdatstr.substr(4,2),this.year=WO.date.fcdatstr.substr(0,4)):WO.date.day&&WO.date.month&&WO.date.year&&(this.day=WO.date.day,this.month=WO.date.month,this.year=WO.date.year),this.determineCurrentTable(),this.setParameter(),this.markDate(),this.markParameter(),this.eventifyDateTable(),this.events.index.set(this.currentTable))},e.prototype.determineCurrentTable=function(){var t=this.currentTable,e=this.meta;this.currentTable=-1;for(var n=0;n<this.tablenumber;n++)e.year[n]===this.year&&e.month[n]===this.month&&e.day[n]===this.day&&(this.currentTable=n);-1===this.currentTable&&t>0&&(this.currentTable=0,this.setParameter())},e.prototype.setParameter=function(){var t=this.meta;this.year=t.year[this.currentTable],this.month=t.month[this.currentTable],this.day=t.day[this.currentTable],this.currentTimestamp=this.year+this.month+this.day,this.options.hasParaid&&(this.metparaid=r.V.metparaid||r.V.paraid);var e=this.currentTimestamp;p.d.set("fcdatstr",e)},e.prototype.eventifyDateTable=function(){var t=this;c.n5.instance.loggedin&&u("#static td").on("click",(function(e){e.preventDefault();var n=u(e.target).closest("tr").attr("id");n&&(t.year=n.substr(1,4),t.month=n.substr(5,2),t.day=n.substr(7,2),t.determineCurrentTable(),t.setParameter(),t.showTable(),t.events.index.set(t.currentTable)),(0,h.q)()}))},e.prototype.eventifyBackButtons=function(){var t=this,n=u("#static tr");u(".back").off().on({click:function(e){if(c.n5.instance.loggedin)e.preventDefault(),e.stopPropagation(),t.prevTable(),(0,h.q)();else{var i=n.index(".activedate");i--<0&&(i=n.length-1),window.location.assign(n.eq(i).find("td a").eq(0).attr("href"))}},dblclick:function(t){t.preventDefault(),t.stopPropagation(),e.focusMapStepper()}})},e.prototype.eventifyForeButtons=function(){var t=this,n=u("#static tr");u(".fore").off().on({click:function(e){if(c.n5.instance.loggedin)e.preventDefault(),e.stopPropagation(),t.nextTable(),(0,h.q)();else{var i=n.index(".activedate");i++>n.length&&(i=0),window.location.assign(n.eq(i).find("td a").eq(0).attr("href"))}},dblclick:function(t){t.preventDefault(),t.stopPropagation(),e.focusMapStepper()}})},e.prototype.markDate=function(){var t=u(".fore"),e=u(".back");u("tr.activedate").removeClass("activedate"),u("#d"+this.currentTimestamp).addClass("activedate"),t.removeClass("unclickable"),e.removeClass("unclickable"),this.eventifyForeButtons(),this.eventifyBackButtons(),this.currentTable+1===this.tablenumber?t.addClass("unclickable").off():(0===this.currentTable||1===this.currentTable&&"night"===this.daytime)&&e.addClass("unclickable").off()},e.prototype.markParameter=function(){u("li.activeitem").removeClass("activeitem"),u("#p"+this.metparaid).addClass("activeitem")},e.prototype.nextTable=function(){this.currentTable<=this.tablenumber&&(this.currentTable++,this.showTable(),this.events.index.set(this.currentTable),this.events.next.set(this.currentTable))},e.prototype.prevTable=function(){this.currentTable>0&&(this.currentTable--,this.showTable(),this.events.index.set(this.currentTable),this.events.prev.set(this.currentTable))},e.prototype.setHeadline=function(){u("date_headline").html((0,d.Z)("forecast")+this.meta.label[this.currentTable])},e.prototype.showTable=function(){return m(this,void 0,void 0,(function(){var t,e,n;return g(this,(function(i){switch(i.label){case 0:this.setParameter(),t=this.options.basepath+"&fcdatstr="+this.currentTimestamp+"&iid="+r.V.iid.cur+"&gid="+this.gid,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:return[4,i.sent().text()];case 3:return e=i.sent(),n=u("#table-wrapper").empty(),u(e).appendTo(n),this.setHeadline(),this.markDate(),[3,5];case 4:return i.sent(),[3,5];case 5:return[2]}}))}))},e}(o.d)},9770:(t,e,n)=>{"use strict";var i,o,r=n(4700),a=n(9679),s=n(1607),l=n(9158),c=n(9857),u=n(5527),h=n(2220),d=n(4021),p=n(3191),f=n(3162),m=n(3931),g=n(833),v=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},_=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};function w(t,e){var n=e.offset();return{x:t.pageX-n.left,y:t.pageY-n.top}}r((function(){if("p_aktuell_local"===s.V.pid.cur)o="StationDetail"===s.V.sid.cur?new x({imageelement:r("#overviewmap"),mpid:"overviewmap"}):"ColorMap"===s.V.sid.cur?new x({imageelement:r("#imagearea"),link2target:{available:!0,targetPCID:"pc_aktuell_local",targetPID:"p_aktuell_local",targetSID:"StationDetail"}}):new x({imageelement:r("#imagearea")});else if("p_city_colormap"===s.V.pid.cur||"p_city_luft"===s.V.pid.cur||"p_aktuell_userweather"===s.V.pid.cur)switch(o=new x({imageelement:r("#colormap"),link2target:{available:!1,targetPCID:"pc_city_local",targetPID:"p_city_local",targetSID:"MediumTerm"}}),s.V.sid.cur){case"RelativeSunshineDuration24h":case"Cloud24h":case"UVIndex":o.options.link2target.targetPrefpar="sun";break;case"PrecipitationAmount24h":case"ProbabilityOfPrecipitation":case"ProbabilityOfSnowfall":o.options.link2target.targetPrefpar="precipitation";break;case"WindGust":o.options.link2target.targetPrefpar="wind";break;default:o.options.link2target.targetPrefpar="weather"}else if("p_city_luft"===s.V.pid.cur)o=new x({imageelement:r("#colormap")});else if("p_rueckblick_colormap"===s.V.pid.cur)"pc_rueckblick_data"===s.V.pcid.cur?o=new x({link2target:{available:!0,targetPCID:"pc_rueckblick_data",targetSID:"StationHistory",targetPID:"p_rueckblick_diagram"}}):"pc_rueckblick_climate"===s.V.pcid.cur&&(o=new x({link2target:{available:!0,targetPCID:"pc_rueckblick_climate",targetPID:"p_rueckblick_climatediagram"}}));else if("p_radar_map"===s.V.pid.cur||"p_blitze_map"===s.V.pid.cur||"p_sat_image"===s.V.pid.cur||"p_radar_forecast"===s.V.pid.cur)o=new x({link2maps:!1,homemark:{hideonclick:!1,clickthrough:!1}});else if("p_modell_mapsprog"===s.V.pid.cur)o=new x({mpid:"p_modell_maps"});else if("p_modell_expert"===s.V.pid.cur||"p_modell_sail"===s.V.pid.cur){if("Satellite"===s.V.sid.cur)return;o=new x({link2maps:!1,imageelement:r("#imagearea"),homemark:{onclick:!0}})}else o="p_aktuell_webcam"===s.V.pid.cur&&"Table"===s.V.sid.cur?new x({mpid:"overviewmap_p_aktuell_webcam"}):new x({})}));var b=new u.y,x=function(t){function e(e){var n=t.call(this,e)||this;return n.imagemapareas=r(),n.homemarkerelement=r(),n.homemarkerlabel=r(),n.homemarkimage=r(),n.homemark=r(),n.init(),n}return v(e,t),e.isPointInPolygon=function(t,e){for(var n=-1,i=t.length-1,o=0;o<i;o++)n*=r(e,t[o],t[o+1]);return-1!==(n*=r(e,t[i],t[0]));function r(t,e,n){if(t[1]===e[1]&&e[1]===n[1])return e[0]<=t[0]&&t[0]<=n[0]||n[0]<=t[0]&&t[0]<=e[0]?0:1;if(e[1]>n[1]){var i=e;e=n,n=i}if(t[1]===e[1]&&t[0]===e[0])return 0;if(t[1]<=e[1]||t[1]>n[1])return 1;var o=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]);return o>0?-1:o<0?1:0}},Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{mpid:s.V.pid.cur,msid:s.V.sid.cur,imageelement:r("#imagearea"),markgid:!0,link2maps:!1,link2target:{available:!1,targetPCID:"pc_city_weather"},homemark:{path:["https://st",(0,l.NL)(),".wetteronline.de/dr/",(0,l.BC)(),"/img/crosshairs/pin.png"].join(""),padding:0,width:32,height:39,offset:{x:8,y:34},hideonclick:!1,foresteponclick:!1,areatolerance:15,clickthrough:!0},modulebasepath:"/?pid=p_geo_reference",maxlat:62,minlat:33.5,maxlon:35,minlon:-11}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.imagemapareas=r("#imagemap area"),this.getActiveName(),this.options.markgid&&this.setAndDisplayID(),this.options.link2maps&&this.options.link2target.available&&alert("configuration error!"),this.options.link2maps?this.link2Maps():this.options.link2target.available&&this.link2Target()},e.prototype.initHomemarkToggler=function(){var t=this;this.homemarkerelement=r("#homemarker"),location.search.indexOf("homemark")>-1&&void 0!==(0,c.W)().homemark&&""!==(0,c.W)().homemark&&g.d.set("homemark",""+WO.geo.homemark),this.homemarkerlabel=r("#homemarkerlabel"),this.homemarkimage=r("#homemark"),this.homemarkimage&&(this.homemarkerelement.add(this.homemarkerlabel).add("#toolbar_wrapper").css("visibility","visible"),void 0!==g.d.get("homemark")&&null!=g.d.get("homemark")?"false"===g.d.get("homemark").toString()?(this.homemarkimage.css("visibility","hidden"),WO.geo.homemark="false",this.homemarkerelement&&this.homemarkerelement.prop("checked",!1)):(WO.geo.homemark="true",this.homemarkimage.add(this.homemarkerelement).add(this.homemarkerlabel).css("visibility","visible"),this.homemarkerelement&&this.homemarkerelement.prop("checked",!0)):(this.homemarkimage.css("visibility","hidden"),WO.geo.homemark="false",this.homemarkerelement&&this.homemarkerelement.prop("checked",!1)),g.d.set("homemark",WO.geo.homemark),this.homemarkerelement&&(this.homemarkerelement.off().on("click",(function(){t.homemarkerelement=r("#homemark"),t.homemarkerelement.length&&("visible"===t.homemarkerelement.css("visibility")?t.hideHomemarkElement():t.showHomemarkElement())})),b.set()))},e.prototype.showHomemarkElement=function(){this.homemarkerelement.css("visibility","visible"),this.homemarkerelement.length&&this.homemarkerelement.prop("checked",!0),g.d.set("homemark","true"),WO.geo.homemark="true"},e.prototype.hideHomemarkElement=function(){this.homemarkerelement.css("visibility","hidden"),this.homemarkerelement.length&&this.homemarkerelement.prop("checked",!1),g.d.set("homemark","false"),WO.geo.homemark="false"},e.prototype.setAndDisplayID=function(){"StationDetail"===s.V.sid.cur||"p_aktuell_webcam"===s.V.pid.cur&&"Table"===s.V.sid.cur?this.kid=WO.geo.gid:"p_schnee_ski"===s.V.pid.cur&&(0,c.W)().tablenavigation&&0===s.V.iid.cur.indexOf("DL_")?this.kid="DL":"p_modell_sail"===s.V.pid.cur?this.kid=s.V.iid.cur.split("_")[0]:"p_city_warnings"===s.V.pid.cur&&""!==WO.geo.stateid&&3===WO.geo.stateid.length?this.kid=WO.geo.stateid:"p_modell_expert"===s.V.pid.cur&&(0,c.W)().parameter&&4===(0,c.W)().parameter.length&&"nh"===(0,c.W)().parameter.substring(0,2)?this.kid="nh":this.kid=s.V.iid.cur,this.markGeoID()},e.prototype.getActiveName=function(){this.activename=WO.geo.locationname},e.prototype.markGeoID=function(){return y(this,void 0,void 0,(function(){var t,n,i,o=this;return _(this,(function(a){switch(a.label){case 0:return t={},this.options.imageelement?((5===WO.geo.gid.length||WO.geo.nogid)&&WO.geo.lat&&WO.geo.lon?(t={id:WO.geo.gid,lat:WO.geo.lat,lon:WO.geo.lon},h.Dd&&(sessionStorage.lastLocation=[WO.geo.gid,WO.geo.locationname,"",WO.geo.lat,WO.geo.lon,WO.geo.statename,WO.geo.stateid,WO.geo.nogid?1:0].join(";"))):WO.localStorageUseable&&sessionStorage.lastLocation&&8===(n=sessionStorage.lastLocation.split(";")).length&&(t={id:n[0],lat:n[3],lon:n[4]},r("#homemarkerlabel").html(n[1])),t.id&&t.lat&&t.lon?(this.lat=t.lat,this.lon=t.lon,[4,this.getPixelFromCoordinates()]):[3,2]):[3,3];case 1:a.sent(),this.i>=this.options.homemark.width/2&&this.j>=-this.options.homemark.height/2?(this.homemark=r("#homemark"),this.homemark.length?this.wasThere=!0:(this.homemark=r('<img id="homemark" src="'.concat(this.options.homemark.path,'" alt="').concat(this.activename,'" />')),this.homemark.off().on({click:function(t){t&&(t.preventDefault(),t.stopPropagation());var n=w(t.originalEvent,o.options.imageelement);o.i=n.x,o.j=n.y;var i=function(t){if(!1!==o.options.homemark.clickthrough){var e=r(t);if(e.attr("href")&&""!==e.attr("href")){o.homemarkhref=e.attr("href");try{e.trigger("mouseenter",t)}catch(t){}}}};o.imagemapareas.each((function(t,n){var a,s=r(n),l=[],c=s.attr("coords").split(",").map((function(t){return parseInt(t,10)}));if("rect"===s.attr("shape")&&o.i>Math.floor(c[0])&&o.i<Math.floor(c[2])&&o.j>Math.floor(c[1])&&o.j<Math.floor(c[3]))i.bind(o,n)();else if("poly"===s.attr("shape")){for(a=0;a<c.length;a+=2)l.push([c[a],c[a+1]]);e.isPointInPolygon(l,[o.i,o.j])&&i.bind(o,n)()}}));var a=r("#forestep");a.length&&o.options.homemark.foresteponclick&&a.trigger("click");var s=r("#homemarker");s.length&&o.options.homemark.hideonclick&&s.trigger("click"),void 0!==o.homemarkhref&&!1===o.options.link2target.available?o.homemarkhref.indexOf("wetteronline.de")>-1?location.href=o.homemarkhref:window.open(o.homemarkhref):o.options.link2maps?o.openMapsPopup():o.options.link2target.available&&o.options.imageelement.trigger("click",t)},mousemove:function(t){var n=w(t.originalEvent,o.options.imageelement);o.i=n.x,o.j=n.y;var i=function(t){if(!1!==o.options.homemark.clickthrough){var e=r(t);o.homemark.css("cursor","pointer"),t.onmouseover?t.onmouseover(null):r("#instance_hover").length&&e.trigger("mouseenter",t);try{e.trigger("mouseenter",t)}catch(t){}}};o.options.link2maps||o.options.link2target.available||o.options.homemark.foresteponclick||o.homemark.css("cursor","auto"),o.imagemapareas.each((function(t,n){var a,s=r(n),l=s.attr("coords").split(","),c=[];if("rect"===s.attr("shape")&&o.i>=parseInt(l[0],10)&&o.i<=parseInt(l[2],10)&&o.j>=parseInt(l[1],10)&&o.j<=parseInt(l[3],10))i.bind(o,n)();else if("poly"===s.attr("shape")){for(a=0;a<l.length;a+=2)c.push([l[a],l[a+1]]);e.isPointInPolygon(c,[o.i,o.j])&&i.bind(o,n)()}}))},mouseout:function(){r("#instance_hover").css("visibility","hidden"),UnTip()}}),this.homemark.appendTo(this.options.imageelement),this.wasThere=!1),this.leftpx=Math.floor(this.i)-this.options.homemark.offset.x+parseInt(this.options.imageelement.css("paddingLeft"),10),this.toppx=Math.floor(this.j)-this.options.homemark.offset.y+parseInt(this.options.imageelement.css("paddingTop"),10),(i=this.options.imageelement.find("img").filter((function(t,e){var n=r(e);return n.hasClass("preloaded")||n.outerWidth()>500}))).length>0&&i.eq(0).outerWidth()&&i.eq(0).outerHeight()&&(this.leftpx=this.leftpx*parseInt(i.eq(0).css("width"),10)/i.eq(0).outerWidth(),this.toppx=this.toppx*parseInt(i.eq(0).css("height"),10)/i.eq(0).outerHeight()),this.wasThere?this.homemark.animate({top:this.toppx+"px",left:this.leftpx+"px"}):this.homemark.css({top:this.toppx+"px",left:this.leftpx+"px"}),this.homemark.css({"z-index":"5",position:"absolute",padding:this.options.homemark.padding+"px",visibility:"visible"}),this.initHomemarkToggler()):(this.homemark.css("visibility","hidden"),this.homemarkerelement.css("visibility","hidden"),this.homemarkerlabel.css("visibility","hidden")),a.label=2;case 2:return[3,4];case 3:this.homemark.css("visibility","hidden"),this.homemarkerelement.css("visibility","hidden"),this.homemarkerlabel.css("visibility","hidden"),a.label=4;case 4:return[2]}}))}))},e.prototype.link2Target=function(){var t=this;this.options.imageelement.css("cursor","pointer").off().on({click:function(e){e?(e.preventDefault(),e.stopPropagation()):e={client:{x:1,y:1}};var n=w(e.originalEvent,t.options.imageelement);t.i=n.x,t.j=n.y,t.getCoordinatesFromPixel(),t.requestTargetFromCoordinates()},mouseenter:function(){TTf3f7fb((0,d.Z)("openNearestPOI"))},mouseleave:UnTip})},e.prototype.requestTargetFromCoordinates=function(){return y(this,void 0,void 0,(function(){var t,e,n,i,o;return _(this,(function(r){switch(r.label){case 0:return void 0!==navigator.onLine&&!1===navigator.onLine?((0,m.g_)((0,d.Z)("offlinemode")),[2,!1]):(this.options.imageelement.css("cursor","progress"),[4,(0,f.fetchWithErrors)("/search?ireq=true&pid=p_search",{data:{searchstring:this.lat+","+this.lon,searchpcid:this.options.link2target.targetPCID,output:"json"}})]);case 1:return[4,r.sent().json()];case 2:if(t=r.sent(),this.options.imageelement.css("cursor","pointer"),t[0].gid&&5===t[0].gid.length){for(o in e=t[0],n=["/?pcid=",this.options.link2target.targetPCID,"&gid=",e.gid],i=void 0,o=void 0,e.lat&&e.lon&&n.push("&lat=",e.lat,"&lon=",e.lon),this.options.link2target)2===(i=o.split("target")).length&&n.push("&",i[1].toLowerCase(),"=",this.options.link2target[o]);location.href=n.join("")}else TTf3f7fb((0,d.Z)("noNearestPOIFound")),UnTip.delay(1e3);return[2]}}))}))},e.prototype.link2Maps=function(){var t=this;r("#mapNavi").length||r("#imagemap").length&&0!==this.imagemapareas.filter((function(t,e){return"poly"===r(e).attr("shape").toLowerCase()})).length||WO.geo.lat<=this.options.maxlat&&WO.geo.lat>=this.options.minlat&&WO.geo.lon<=this.options.maxlon&&WO.geo.lon>=this.options.minlon&&this.options.imageelement.css("cursor","pointer").off().on({click:function(e){e.preventDefault();var n=w(e.originalEvent,t.options.imageelement);t.i=n.x,t.j=n.y,t.openMapsPopup()},mouseenter:function(){TTf3f7fb((0,d.Z)("openWeatherMaps"))},mouseover:function(){TTf3f7fb((0,d.Z)("openWeatherMaps"))},mouseleave:UnTip})},e.prototype.openMapsPopup=function(){var t="/wetterradar",e=["wrm="+(p.n5.instance.level===p.b3.PaidContent?1:3)];this.options.minlat<=WO.geo.lat&&WO.geo.lat<=this.options.maxlat&&this.options.minlon<=WO.geo.lon&&WO.geo.lon<=this.options.maxlon&&(this.getCoordinatesFromPixel(),this.options.minlat<=this.lat&&this.lat<=this.options.maxlat&&this.options.minlon<=this.lon&&this.lon<=this.options.maxlon?(e.push("wrx="+this.lat+","+this.lon),e.push("wry="+this.lat+","+this.lon)):(e.push("wrx="+this.lat+","+this.lon),e.push("wry="+WO.geo.lat+","+WO.geo.lon)),t+="?"+e.join("&"),window.location.href=t)},e.prototype.getPixelFromCoordinates=function(){return y(this,void 0,void 0,(function(){var t;return _(this,(function(e){switch(e.label){case 0:if("object"==typeof this.lat)for(t in this.lat){this.lat=this.lat[t];break}if("object"==typeof this.lon)for(t in this.lon){this.lon=this.lon[t];break}return this.requestParameters={mpid:this.options.mpid,msid:this.options.msid,kid:this.kid,lat:this.lat,lon:this.lon},[4,this.sendRequest()];case 1:return e.sent(),this.requestedValues&&(this.i=parseInt(this.requestedValues.x,10),this.j=parseInt(this.requestedValues.y,10)),[2]}}))}))},e.prototype.getCoordinatesFromPixel=function(){return y(this,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:return this.requestParameters={mpid:this.options.mpid,msid:this.options.msid,kid:this.kid,i:this.i,j:this.j},[4,this.sendRequest()];case 1:return t.sent(),this.requestedValues&&(this.lat=parseFloat(this.requestedValues.lat),this.lon=parseFloat(this.requestedValues.lon)),[2]}}))}))},e.prototype.sendRequest=function(){return y(this,void 0,void 0,(function(){var t,e;return _(this,(function(n){switch(n.label){case 0:return void 0!==navigator.onLine&&!1===navigator.onLine?((0,m.g_)((0,d.Z)("offlinemode")),[2,!1]):[4,(0,f.fetchWithErrors)(this.options.modulebasepath,{data:this.requestParameters})];case 1:return t=n.sent(),e=this,[4,t.json()];case 2:return e.requestedValues=n.sent(),[2]}}))}))},e}(a.d)},9679:(t,e,n)=>{"use strict";function i(t,e,n){return"object"!=typeof n||Array.isArray(n)?t[e]=n:"object"==typeof t[e]?o(t[e],n):t[e]=n,t}function o(t,e,n){if("string"==typeof e)return i(t,e,n);for(var o=1,r=arguments.length;o<r;o++){var a=arguments[o];for(var s in a)a.hasOwnProperty(s)&&i(t,s,a[s])}return t}n.d(e,{d:()=>r});var r=function(){function t(t){this.setOptions(t)}return t.prototype.setOptions=function(t){this.options=o({},this.defaultOptions,t)},t}()},8224:(t,e,n)=>{"use strict";n.d(e,{I:()=>u});var i=n(1607),o=n(9857),r=n(1241),a=n(3191),s=n(9158),l=function(){return l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},l.apply(this,arguments)};function c(t){return typeof t}function u(t,e){var n=t?(0,o.S)():(0,o.W)();if(delete n.day,delete n.month,delete n.year,delete n.time,"p_wx_viewport"===i.V.pid.cur)return location.href;var u=location.protocol+"//"+location.host,h=u+"/";if("p_home"!==i.V.pid.cur){for(var d in i.V)"iid"===d&&i.V[d].cur===WO.geo.gid||"part"===d&&"all"===i.V[d]||"firsttime"===d||"defaultparameter"===d||c(i.V[d])&&(n[d]="string"===c(i.V[d])||"boolean"===c(i.V[d])?i.V[d]:"string"===c(i.V[d].cur)||"boolean"===c(i.V[d].cur)?i.V[d].cur:"","number"===c(i.V[d])&&(n[d]=i.V[d].toString()));if(!i.V.animation&&(!t&&a.n5.instance.action||"pc_wotexte_special"===i.V.pcid.cur||"pc_rueckblick_data"===i.V.pcid.cur||"pc_wotexte_multimedia"===i.V.pcid.cur&&i.V.token))for(var d in WO.date)d.indexOf("latest")>-1||(n[d]=WO.date[d]||"");for(var d in WO.geo)["alt","path","nogid","locationname_long","identifier"].indexOf(d)>-1||("gid"===d||WO.geo.nogid||"homemark"===d)&&!1!==WO.geo[d]&&"false"!==WO.geo[d]&&(n[d]=WO.geo[d].toString()||"");n.print=s.mA,h+="?"}for(var d in e&&(n=l(l({},n),e)),n)""!==n[d]&&(h+="&"+d+"="+n[d]);return u+(0,r.Nt)(h.replace(/\/\?&/,"/?"),r.ew.TechToSeo)}},7555:(t,e,n)=>{"use strict";n.d(e,{E:()=>D});var i=n(4700),o=n(2220),r=n(1241),a=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},s=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};function l(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(i){switch(i.label){case 0:return 5!==t.gid.length?[3,5]:(e={gid:t.gid,name:t.locationname||t.name,nickname:t.locationname||t.name,lat:t.lat,lon:t.lon,statename:t.statename||"",stateid:t.stateid||"",nogid:t.nogid?1:0,ts:+new Date,sublocationname:t.sublocationname||t.subLocationName||"",subgid:t.subgid?1:0},t.url?(e.seourl=t.url,[3,4]):[3,1]);case 1:return t.seourl?(e.seourl=t.seourl,[3,4]):[3,2];case 2:return n=e,[4,c(e)];case 3:n.seourl=i.sent(),i.label=4;case 4:return""!==e.sublocationname&&(e.nickname=e.sublocationname),[2,e];case 5:return[2,null]}}))}))}function c(t){var e=function(t){var e,n="",i="pcid=pc_city_weather&gid=[[gid]][[optionalgeopath]]";if(!t)return null;(t.nogid&&0!==t.nogid||t.subgid&&0!==t.subgid)&&(t.sublocationname&&""!=t.sublocationname&&(n+="&sublocationname="+decodeURIComponent(t.sublocationname)),""==t.name||1!=t.nogid&&"true"!=t.nogid||(n+="&locationname="+decodeURIComponent(t.name)),n+="&lat="+decodeURIComponent(t.lat),n+="&lon="+decodeURIComponent(t.lon));""!=t.statename&&""!=t.stateid&&(n+="&statename="+decodeURIComponent(t.statename),n+="&stateid="+decodeURIComponent(t.stateid));return e=n,"/?"+i.replace("[[gid]]",t.gid).replace("[[optionalgeopath]]",e)}(t);if(e)return(0,r.Xj)(e,r.ew.TechToSeo,1e4).then((function(t){return t.indexOf("%")>-1||t.indexOf(";")>-1||t.indexOf("|")>-1?"":t}))}var u,h=n(7768),d=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},p=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},f=null;function m(t,e,n){return new Promise((function(o,r){var a,s,l,c;a=t+";;;"+e+";"+n,s=r,l=function(e){o(function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(0,h.Kn)(t[n])&&(e[atob(n).split(";")[0]]=t[n]);for(var i=0,o=g;i<o.length;i++)(0,o[i])(e);return e}(e)[t])},c=+new Date,i.ajax({url:"/?pid=p_city_local",dataType:"json",data:{userfavs:btoa(a),ireq:!0,favweather:!0},error:s,success:function(t){!function(t){d(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,f||(f=new Promise((function(t){var e=+new Date;!function n(){"ga"in window?ga((function(){u=ga.getByName("mobileWoUA"),t()})):+new Date-e<1e4&&setTimeout(n,200)}()})))];case 1:return e.sent(),u&&(0,h.$K)(t.eventValue)&&Math.round(t.eventValue)!==t.eventValue?(console.warn("options.value needs to be int, was ".concat(t.eventValue)),[2]):[2]}}))}))}({eventCategory:"Request",eventAction:"too_long",eventLabel:"p_city_local-userfavs",eventValue:+new Date-c}),l(t)}})}))}var g=[];var v=n(4978),y=n(5527),_=n(4021),w=n(3162),b=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},x=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},T=function(){function t(){var e=this;if(this.permissionGranted=new y.y({initialValue:t.PermissionUnknown}),this.permanentLocationListeners=[],this.notifyPermanentLocationListeners=function(){},this.initPermanentLocation(),t.PERMANENT_LOCATION_POSSIBLE){var n=function(n){t.forbidden=n.state===t.PermissionDenied,t.allowed=!t.forbidden,e.permissionGranted.set(n.state)};navigator.permissions.query({name:"geolocation"}).then((function(t){n(t),t.onchange=function(){n(this)}}))}}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.geolocationErrorToString=function(t){var e;switch(t.code){case 1:e=(0,_.Z)("GEOLOCATION_PERMISSION_DENIED");break;case 2:e=(0,_.Z)("GEOLOCATION_POSITION_UNAVAILABLE");break;case 3:e=(0,_.Z)("GEOLOCATION_TIMEOUT");break;default:e=(0,_.Z)("GEOLOCATION_UNKNOWN_ERROR")}return e},t.searchForCoords=function(t){return b(this,void 0,void 0,(function(){var e,n,i;return x(this,(function(o){switch(o.label){case 0:return e=t.coords,n=Math.round(100*e.latitude)/100+","+Math.round(100*e.longitude)/100,[4,(0,w.fetchWithErrors)("/search?ireq=true&pid=p_search&output=json&sublocation=false&searchstring=".concat(n))];case 1:return[4,o.sent().json()];case 2:return(i=o.sent())&&i.length>=2?[2,i[0]]:[2,null]}}))}))},t.prototype.getCurrentPosition=function(e,n){navigator.geolocation.getCurrentPosition(e,(function(e){(0,v.c)("Locate error: "+e.code),(0,h.mf)(n)&&n(t.geolocationErrorToString(e),e)}),{enableHighAccuracy:!0})},t.prototype.getPermanentLocation=function(e,n){var o=this;if(!t.PERMANENT_LOCATION_POSSIBLE)return!1;var r=function(r){r.state===t.PermissionGranted&&(o.getCurrentPosition(e,n),i(document).one("click",(function(){t.allowed&&o.getCurrentPosition(e,n)})))};return navigator.permissions.query({name:"geolocation"}).then((function(t){r(t),t.onchange=function(){r(this)}})),!0},t.prototype.addPermanentLocationListener=function(t,e){this.permanentLocationListeners.push([t||null,e||null]),setTimeout(this.notifyPermanentLocationListeners)},t.prototype.initPermanentLocation=function(){var e=this,n=function(n,i){n||i||(n=r);for(var o=0,a=e.permanentLocationListeners;o<a.length;o++){var s=a[o],l=s[0],c=s[1];n&&l&&l(n),i&&c&&c(t.geolocationErrorToString(i),i)}};this.notifyPermanentLocationListeners=n;var r,a=t.storageKey,s=!1;try{var c=JSON.parse(localStorage.getItem(a)),u=(new Date).getTime();c.time+2e5>u&&c.forecast&&c.fav&&(s=!0,r=c,n(c),(0,v.c)("from cache"))}catch(t){}s||this.getPermanentLocation((function(e){return b(this,void 0,void 0,(function(){var s,c,u;return x(this,(function(h){switch(h.label){case 0:return[4,t.searchForCoords(e)];case 1:return s=h.sent(),c=s,[4,m(s.gid,s.lat,s.lon)];case 2:return c.forecast=h.sent(),u=s,[4,l(s)];case 3:return u.fav=h.sent(),o.Dd&&localStorage.setItem(a,JSON.stringify(i.extend({},s,{time:(new Date).getTime()}))),r=s,n(s),[2]}}))}))}),(function(t,e){n(null,e)}))},t.PERMANENT_LOCATION_POSSIBLE=!!navigator.permissions&&!!navigator.permissions.query,t.PermissionGranted="granted",t.PermissionDenied="denied",t.PermissionUnknown="default",t.allowed=!0,t.storageKey="myLocation",t.forbidden=!1,t}(),S=T.getInstance(),C=n(7960),M=n(9158),P=n(1565),k=n(4291),O=function(){function t(t,e,n,o,r){void 0===r&&(r={}),this.searchFunction=o,this.options=r,this.autoSuggestUrl="autosuggest?ireq=true&pid=a_autosuggest&s=",this.autoSuggestMapsUrl="autosuggest?ireq=true&pid=a_autosuggest&area=maps&s=",this.autoSuggestMapsExtUrl="autosuggest?ireq=true&pid=a_autosuggest&area=mapsext&s=",this.autoSuggestRadarGlobalUrl="autosuggest?ireq=true&pid=a_autosuggest&area=radarglobal&s=",this.autoSuggestDLUrl="autosuggest?ireq=true&pid=a_autosuggest&area=DL&s=",this.elPrefix="asresult-",this.resultClass="asresultlink",this.dottedResultClass="."+this.resultClass,this.activeClass="asactive",this.dottedActiveClass="."+this.activeClass,this.hiddenClass="ashidden",this.zipsCookieId="WOaszip",this.citiesCookieId="WOasrem",this.maxZips=5,this.maxCities=5,this.model=[],this.chosen=-1,this.zips=[],this.cities=[],this.favlist=[],this.userHasForbidden=!1,this.storage=new C.V("autosuggest",C.e.LocalStorage,void 0,{encodeComponents:!0,valueSeparator:"$"}),this.search=i("#"+t),this.searchform=i("#"+e),this.results=i("#"+n),this.init()}return t.entryFromName=function(t){return{n:t}},t.entriesIdentical=function(t,e){return t.n.toLowerCase()===e.n.toLowerCase()},t.prototype.init=function(){var t=this.options;t&&("area"in t&&("maps"===t.area?this.autoSuggestUrl=this.autoSuggestMapsUrl:"mapsext"===t.area?this.autoSuggestUrl=this.autoSuggestMapsExtUrl:"radarglobal"===t.area?this.autoSuggestUrl=this.autoSuggestRadarGlobalUrl:"DL"===t.area&&(this.autoSuggestUrl=this.autoSuggestDLUrl)),"favlist"in t&&(this.favlist=t.favlist),"nLocations"in t&&(this.nLocations=t.nLocations)),WO.showLocation=this.showLocation.bind(this);S.permissionGranted.addListener((function(t){t===T.PermissionDenied})),this.loadStorageFromCookie();var e=this.storage.get(this.zipsCookieId),n=this.storage.get(this.citiesCookieId);e&&(this.zips=e.split("|",this.maxZips)||[]),n&&(this.cities=n.split("|",this.maxCities)||[]),this.results&&this.results.length&&this.search&&this.search.length&&this.searchform&&this.searchform.length&&(this.search.on({keyup:this.keyupHandler.bind(this),blur:this.blurHandler.bind(this),focus:this.focusHandler.bind(this)}),this.searchform.on("submit",this.submitHandler.bind(this)),i("."+this.hiddenClass).empty())},t.prototype.loadStorageFromCookie=function(){var t=k.get("WOasrem");t&&this.storage.set(this.citiesCookieId,t);var e=k.get("WOaszip");e&&this.storage.set(this.zipsCookieId,e),k.remove("WOasrem"),k.remove("WOaszip")},t.prototype.clearSelection=function(){i(this.dottedActiveClass).removeClass(this.activeClass)},t.prototype.hideResults=function(){this.results.addClass(this.hiddenClass)},t.prototype.blurHandler=function(t){this.chosen=-1,""===this.search.val()&&this.search.val((0,_.Z)("searchStringDefault")[this.defaultstringindex])},t.prototype.focusHandler=function(){var t=this;((0,_.Z)("searchStringDefault").indexOf(this.search.val())>-1||this.search.val()===(0,_.Z)("showLocation")+(0,_.Z)("tryToFind"))&&(this.defaultstringindex=(0,_.Z)("searchStringDefault").indexOf(this.search.val()),this.search.val("").removeClass("busy")),this.defaultstringindex=Math.max(this.defaultstringindex,0),this.getSuggestions(),M.XW&&P.gn?i("#autosuggestions").on("swipe",(function(){t.hideResults(),t.search.blur()})):i("html").on("click",(function(e){!1===t.search.is(e.target)&&t.hideResults()}))},t.prototype.clickHandler=function(t){var e,n=i(t.target).attr("id"),o=+n.replace(this.elPrefix,"");return t.stopPropagation(),t.preventDefault(),this.hideResults(),"delete_menu"===n?this.deleteCookies():(this.search.addClass("focus"),(e=this.model[o].n)===(0,_.Z)("showLocation")?this.showLocation():(this.search.val(e),this.commitSearch())),!1},t.prototype.submitHandler=function(t){var e;t&&t.preventDefault(),e=-1===this.chosen?this.search.val():this.model[this.chosen].n,this.hideResults(),this.search.val(e),this.commitSearch()},t.prototype.keyupHandler=function(t){var e=t.code;if(27===e?this.hideResults():38===e?-1===this.chosen?this.chosen=this.model.length-1:this.chosen=Math.max(this.chosen-1,0):40===e?-1===this.chosen?this.chosen=0:this.chosen=Math.min(this.chosen+1,this.model.length-1):37===e||39===e||13===e||this.getSuggestions(),-1!==this.chosen){var n=i(this.elPrefix+this.chosen.toString());this.clearSelection(),n&&n.addClass(this.activeClass)}},t.prototype.getSuggestions=function(){var t=this.search.val();(0,_.OO)(t)||""===t||(0,_.gp)(t)?this.jsonHandler([]):(this.old=-1!==this.chosen?this.model[this.chosen]:void 0,this.previousRequest&&this.previousRequest.abort(),this.previousRequest=i.ajax({url:window.location.protocol+"//"+window.location.host+"/"+this.queryString(t),method:"get",dataType:"json",success:this.jsonHandler.bind(this)}))},t.prototype.queryString=function(t){return this.autoSuggestUrl+encodeURIComponent(t)},t.prototype.jsonHandler=function(e,n){var o=this,r="",a=this.search.val().toLowerCase(),s=""===a,l=[];s?e=this.joinEntries(this.zips.map(t.entryFromName),this.cities.map(t.entryFromName)):(0,_.OO)(a)?e=(l=this.zips.filter((function(t){return 0===t.indexOf(a)}))).map(t.entryFromName):(l=this.cities.filter((function(t){return 0===t.toLowerCase().indexOf(a)})),e=this.joinEntries(l.map(t.entryFromName),e)),i(this.dottedResultClass).empty(),this.chosen=-1,this.nLocations&&(e=e.length>this.nLocations?e.slice(0,this.nLocations):e),0!==this.favlist.length&&(e=this.joinEntries(e,this.favlist.map(t.entryFromName))),this.model=e,"geolocation"in navigator&&!this.isGeolocatorForbidden()&&(0!==this.favlist.length?this.model.unshift({n:(0,_.Z)("showLocation")}):this.model.push({n:(0,_.Z)("showLocation")})),e.length?(this.results.removeClass(this.hiddenClass),e.forEach((function(t,e){r+=o.generateElement(t,e)})),s&&(r+='<div class="asresultlink" id="delete_menu">'.concat((0,_.Z)("deleteSearchHistory"),"</div>"))):this.results.addClass(this.hiddenClass),this.results.html(r),i(this.dottedResultClass).on("click",this.clickHandler.bind(this))},t.prototype.joinEntries=function(e,n){for(var i,o=[],r=0,a=e;r<a.length;r++){var s=a[r];i=!1;for(var l=0,c=n;l<c.length;l++){var u=c[l];if(t.entriesIdentical(s,u)){i=!0,o.push(u);break}}i||o.push(s)}for(var h=function(n){e.some((function(e){return t.entriesIdentical(e,n)}))||o.push(n)},d=0,p=n;d<p.length;d++){h(u=p[d])}return o},t.prototype.generateElement=function(e,n){var i=this.old&&t.entriesIdentical(e,this.old);return i&&(this.chosen=n),'<div class="'.concat(this.resultClass).concat(i?" "+this.activeClass:"",'" id="').concat(this.elPrefix).concat(n,'">').concat(e.n,"</div>")},t.prototype.commitSearch=function(t){var e=this.search.val(),n=e.toLowerCase();if(e===(0,_.Z)("showLocation"))this.showLocation();else{if((0,_.Z)("searchStringDefault").forEach((function(t){n=n.replace(t.toLowerCase(),""),e=e.replace(t,"")})),(0,_.OO)(e)){this.zips=this.zips.filter((function(t){return t!==e})),this.zips.unshift(e),this.zips=this.zips.slice(0,this.maxZips);var i=this.zips.join("|");this.storage.set(this.zipsCookieId,i)}else if(""!==e&&!t&&-1===(0,_.Z)("searchStringDefault").indexOf(e)&&!(0,_.gp)(e)){for(var o=0,r=this.model.length;o<r;o++)this.model[o].n.toLowerCase()===n&&(e=this.model[o].n);if(this.cities=this.cities.filter((function(t){return t.toLowerCase()!==n})),e!==(0,_.Z)("showLocation")){e=e.replace(/(<([^>]+)>)/g,""),this.cities.unshift(e),this.cities=this.cities.slice(0,this.maxCities);var a=this.cities.join("|");this.storage.set(this.citiesCookieId,a)}}"entenhausen"===n?location.href="/?pcid=pc_city_weather&gid=72594&lat=40.7358&lon=-124.1969&locationname=Entenhausen":"scp"===n?location.href="/wetter/muenster?lat=51.929792&lon=7.62453":this.searchFunction()}},t.prototype.deleteCookies=function(){this.zips.length=0,this.cities.length=0,this.storage.remove()},t.prototype.showLocation=function(){var t=this,e=this.search;e.removeClass("focus");var n=e.css("color");e.val((0,_.Z)("showLocation")+(0,_.Z)("tryToFind")).addClass("busy"),S.getCurrentPosition((function(i){e.css("color",e.css("background-color")),e.val(i.coords.latitude+","+i.coords.longitude),t.searchFunction(),e.removeClass("busy"),e.val((0,_.Z)("searchStringDefault")[0]),e.css("color",n)}),(function(t,i){e.css("color",n),alert((0,_.Z)("locationError")[i.code]),e.removeClass("busy"),e.val((0,_.Z)("searchStringDefault")[0])}))},t.prototype.isGeolocatorForbidden=function(){if(this.userHasForbidden)return!0;var t=navigator.userAgent,e=/Chrome\/(\d+)/.exec(t);return!("https:"===location.protocol)&&e&&e.length>1&&parseInt(e[1],10)>=50},t}();function D(t,e,n,i,o){return new O(t,e,n,i,o)}},6112:(t,e,n)=>{"use strict";n.d(e,{k:()=>p});var i,o=n(4700),r=n(4021),a=n(1607),s=n(5728),l=n(9158),c=n(1565),u=n(7555),h=n(3931);n(8116);function d(){var t=o("#overlay");t.length&&t.css({visibility:"visible",display:"block",backgroundColor:"rgba(16,101,142,.25)"}),o("#video, #legenddiv").css("visibility","hidden"),o("#searchstring").addClass("focus")}function p(t,e,n){void 0===e&&(e=o("#searchstring"));var f,m,g=e.parent("form"),v={},y=e.val().trim(),_=o("#infodiv");try{if(t&&(t.preventDefault(),t.stopPropagation()),y===(0,r.Z)("showLocation")+(0,r.Z)("tryToFind"))return;(0,r.Z)("searchStringDefault").forEach((function(t){y=y.replace(t,"")}));var w=g.find("input.searchpcid");n=w.length?w.val():n||o("#searchpcid").val();var b=g.find("input.searchsid");b.length&&(m=b.val());var x=g.find("input.searchpid");if(x.length&&(f=x.val()),g.find("input.additional").each((function(t,e){var n=o(e);v[n.attr("name")]=n.val()})),(0,r.Z)("searchStringDefault").indexOf(y)<0&&!(0,r.gp)(y)&&y.length>0){["pc_aktuell_local","pc_city_local","pc_pegel_data","pc_aktuell_webcam"].indexOf(a.V.pcid.cur)&&WO.unsetCookieValues(["sid"]),i&&i.abort();var T={};T.searchstring=y,T.searchpcid=n,f&&""!==f&&(T.searchpid=f),m&&""!==m&&(T.searchsid=m);var S=(0,s.U)(v);""!==S&&(T.additional=btoa(S).replace(/\n/g,"")),i=o.ajax({url:"/search?ireq=true&pid=p_search",method:"GET",dataType:"html",data:T,success:function(t){e.addClass("focus"),_.empty().attr("class","overlay search"),_.append(t),-1===t.indexOf("searchinprogress")&&(_.addClass("search").show(),(0,h.BM)(),d(),(0,u.E)("newsearchstring","newsearchform","newautosuggestions",(function(){p(null,o("#newsearchstring"))})),(0,h.u5)(),l.XW&&c.gn&&e.blur())},error:function(){_.show(),d(),_.append((0,r.Z)("loadFail"))}})}}catch(t){g.submit()}}},3931:(t,e,n)=>{"use strict";n.d(e,{BM:()=>s,g_:()=>u,u5:()=>l});var i=n(4700),o=n(4021),r=n(1607),a=(n(8116),i("#infodiv"));function s(){a.length&&(a.outerHeight()>window.innerHeight&&a.css("position","absolute"),window.scrollTo(0,0))}function l(){var t=i("#closebutton, a.close");i("#searchinprogress").length||(0===t.length&&(t=i("<div />",{id:"closebutton"}),i("#infodiv").append(t)),t.off().on("click",c))}function c(){i(".overlay").hide().children().hide(),a.length&&(a.hasClass("search")&&i("input[name=searchstring]").each((function(t,e){var n=i(e);n.removeClass("focus"),(0,o.Z)("searchStringDefault").indexOf(n.attr("value"))<0&&n.attr("value","")})),a.attr("class","overlay").empty().attr("style","")),i("#video, #legenddiv").css("visibility","visible"),delete r.V.geoinfo,delete r.V.windcalculator}a.woDrag({dragX:!0,dragY:!0,preventDefault:!1,stopPropagation:!0,dragThreshold:1});function u(t){var e=t||(0,o.Z)("unexpectedError");a.html("<h3></h3>".concat(e,'<div id="closebutton"></div>')).addClass("unexpectedError").show(),l()}window.err=u},5823:(t,e,n)=>{"use strict";var i,o=n(4700),r=n(4241),a=n(8193),s=n(2220),l=n(2622),c=n(4021),u=0;function h(){i.addClass(l.Z.fadeOut)}o((function(){var t=new d,e=o("#premium_webcam_loop-toggler");i=o("#premium_webcam_playtoggler").addClass(l.Z.playToggler),o("#premium_webcam_play"),i.length&&(t.metadata.loop.length>1&&i&&i.removeClass("hide"),o("#premium_webcam_img_wrapper").on("click",(function(){t.metadata.loop.length>1&&(t.animationRunning?e.removeClass("pause"):e.addClass("pause"),t.toggleAnimation()),UnTip(),(0,a.q)()})).on("mouseenter",(function(){var e,n;e=t.metadata.loop.length,n=t.animationRunning,e>1&&(n?TTdefault((0,c.Z)("p_aktuell_premiumwebcam","stopAnimation")):TTdefault((0,c.Z)("p_aktuell_premiumwebcam","startAnimation"))),clearInterval(u),i.removeClass(l.Z.fadeOut)})).on("mouseout",(function(){clearInterval(u),u=setTimeout(h,500),UnTip()})),u=setTimeout(h,1e3),s.Dd&&sessionStorage&&(sessionStorage.pwcPlayButtonTeaserShown="true"))}));var d=function(){function t(){this.animationRunning=!1,this.isInitRunning=!0,this.stopLoading=!1,this.anispeed=12,this.staticIsHidden=!1,this.premiumWebcamStatic=o("#premium_webcam_static"),this.webcamPlay=o("#premium_webcam_play"),this.webcamStop=o("#premium_webcam_stop"),this.premiumWebcamWrapper=o("#premium_webcam_img_wrapper");var t=(0,r.s)("p_aktuell_premiumwebcam");t&&(this.metadata=t,this.metadata.loop.length<=0||(this.latestIndex=this.metadata.loop.length-1,this.isInitRunning=!1))}return t.prototype.toggleAnimation=function(t){t&&t.stopPropagation(),this.animationRunning?this.stopAnimation():this.startAnimation()},t.prototype.determinePreloadedImages=function(){this.preloadedImages=this.premiumWebcamWrapper.children(".preloadedwebcam")},t.prototype.allocateAnimationElements=function(){this.animationelements={timestamp:[],imageid:[],imagesrc:[],state:[],time:[]},this.images2load=[],this.images2loadIds=[];for(var t=0;t<this.metadata.loop.length;t++)this.animationelements.timestamp[t]=this.metadata.loop[t].path,this.metadata.loop[t].time&&(this.animationelements.time[t]=this.metadata.loop[t].time),this.animationelements.imageid[t]=this.getImageId(t),this.animationelements.imagesrc[t]=this.getImageSrc(t),o("#"+this.animationelements.imageid[t]).length?this.animationelements.state[t]=4:(this.animationelements.state[t]=0,this.images2load.push(this.animationelements.imagesrc[t]),this.images2loadIds.push(t))},t.prototype.animationStep=function(){this.animationelements.index<this.animationelements.state.length&&this.animationelements.index>=0?(4===this.animationelements.state[this.animationelements.index]?this.showOneImage(this.animationelements.index):2===this.animationelements.state[this.animationelements.index]?this.animationelements.index++:this.stopLoading?this.animationelements.index=-Math.round(this.anispeed/30):this.animationelements.index--,this.animationelements.index++):this.animationelements.index<0?this.animationelements.index++:this.animationelements.index===this.animationelements.state.length&&(this.animationelements.index=-Math.round(this.animationspeed/600))},t.prototype.checkIfAnimationComplete=function(){this.animationelements.state.every((function(t,e){return t>2}))?(clearInterval(this.checker),this.stopLoading||(this.stopLoading=!0,this.previousindex=0,this.previouslength=1)):this.stopLoading=!1},t.prototype.getImageId=function(t){return"pwc_"+this.metadata.loop[t].path.replace(/\//g,"")},t.prototype.getImageSrc=function(t){return this.metadata.imgpath.replace(/\[\[TIMESTAMP]]/,this.metadata.loop[t].path)},t.prototype.loadOneImage=function(t){var e=this;if(this.stopLoading)this.animationelements.state[this.images2loadIds[t]]=2;else if(t<this.images2load.length){this.animationelements.state[this.images2loadIds[t]]=1;var n=o('<img src="'.concat(this.images2load[t],'" class="preloadedwebcam" id="').concat(this.animationelements.imageid[this.images2loadIds[t]],'" />'));n.css("visibility","hidden").on("load",(function(){e.animationelements.state[e.images2loadIds[t]]=4,e.loadOneImage(t+1)})).on("error",(function(){e.animationelements.state[e.images2loadIds[t]]=2,e.loadOneImage(t+1)})),this.premiumWebcamWrapper&&n.prependTo(this.premiumWebcamWrapper)}this.determinePreloadedImages()},t.prototype.showAnimation=function(){var t=this;this.animationelements.index=this.animationelements.index||0,this.animationspeed=Math.round(15e3/this.anispeed),this.animationstepper=setInterval((function(){return t.animationStep()}),this.animationspeed)},t.prototype.showOneImage=function(t){var e=this;this.preloadedImages.filter((function(n,i){return i.id!==e.animationelements.imageid[t]})),o(this.animationelements.imageid[t]);this.tweenImages(t)},t.prototype.tweenImages=function(t){var e=this;o("#"+this.animationelements.imageid[t]).css("opacity","0.0").css("visibility","visible").css("zIndex","40").animate({opacity:1},{easing:"linear",duration:500,complete:function(){for(var n=0,i=t;i<e.animationelements.imageid.length;++i)t!==i&&(o("#"+e.animationelements.imageid[i]).css("zIndex",10+n),n++);for(i=0;i<t;++i)t!==i&&(o("#"+e.animationelements.imageid[i]).css("zIndex",10+n),n++);o("#"+e.animationelements.imageid[t]).css("zIndex","39"),!1===e.staticIsHidden&&(e.premiumWebcamStatic.css("visibility","hidden"),e.staticIsHidden=!0)}})},t.prototype.startAnimation=function(){var t=this;this.animationRunning=!0,this.webcamPlay.addClass("hide"),this.webcamStop.removeClass("hide"),this.animationelements?this.animationelements.index=0:this.allocateAnimationElements(),this.animationelements.state.indexOf(0)>-1&&(this.checker=setInterval((function(){return t.checkIfAnimationComplete()}),250),this.loadOneImage(0)),this.showAnimation()},t.prototype.stopAnimation=function(){this.animationRunning=!1,this.webcamPlay.removeClass("hide"),this.webcamStop.addClass("hide"),this.stopLoading=!0,clearInterval(this.animationstepper),this.showOneImage(this.latestIndex)},t}()},658:(t,e,n)=>{"use strict";var i=n(4700),o=n(346),r=n(2883),a=n(5430),s=n(1607),l=n(1584),c=n(8632),u=Math.floor(9.5),h=Math.floor(8),d=(0,l.divIcon)({iconSize:[19,16],iconAnchor:[u,h],className:c.Z.marker});function p(){window.open(this.webcamUrl,"_blank")}n(616);var f=n(8010),m=n(4484),g=n(2106),v=n(9158),y=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},_=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};function w(t){var e=i(this).data("marker");e&&i(e._icon).toggleClass(c.Z.hover,"mouseenter"===t.type)}i((function(){return y(void 0,void 0,void 0,(function(){var t,e,n,c,u,h,y,b;return _(this,(function(_){switch(_.label){case 0:return WO.autoSuggestInit("furthersearchstring","furthersearchform","furtherautosuggestions",(function(t){WO.search(t,document.getElementById("furthersearchstring"),"pc_aktuell_webcam")})),"Table"!==s.V.sid.cur?[2]:(t=m.xe,[4,fetch("https://tiles".concat((0,v.NL)(),".wo-cloud.com/metadata?type=geo"))]);case 1:return[4,_.sent().json()];case 2:return t.apply(void 0,[_.sent()]),e={lat:WO.geo.lat,lon:WO.geo.lon,zoomLevel:10},n=new o.o(!1),(c=new a.WV).features[r.Q.AddressBarUpdater]=null,c.features[r.Q.StaticMap]=!0,u=new f.F({mapMode:c,modeConfigurations:{},modeMetadata:{},layerModes:{active:n,modes:[n]}}),u.layerManager,[4,u.init({mapControls:{noTimeControl:!0},meta:e,map:{mapId:"webcam_mapcontent"},timeModel:g.l})];case 3:return h=_.sent().map,y=i("#webcamtable").children(),b=[],y.each((function(){var t=i(this),e=t.find("meta"),n=parseFloat(e.filter("[itemprop=latitude]").attr("content")),o=parseFloat(e.filter("[itemprop=longitude]").attr("content"));if(!isNaN(n)&&!isNaN(o)){var r,a,s=e.filter("[itemprop=url]").attr("content"),c=e.filter("[itemprop=description]").attr("content"),u=(r={lat:n,lon:o,url:s,name:c},a=(0,l.marker)([r.lat,r.lon],{icon:d,title:r.name,riseOnHover:!0}),a.webcamUrl=r.url,a.on("click",p,a),a).addTo(h);t.data("marker",u).on("mouseenter",w).on("mouseleave",w),b.push([n,o])}})),h.fitBounds(b,{animate:!1}),[2]}}))}))}))},8299:(t,e,n)=>{"use strict";n.d(e,{E:()=>T});var i,o=n(4700),r=n(9857),a=n(4241),s=function(){function t(){this.bar=o("#progress"),this.image=o("#imagearea")}return t.prototype.step=function(t,e){if(this.show(),this.bar&&this.image){this.image.css({visibility:"visible","z-index":"102"});var n=this.width*((t+1)/e);n>this.width&&(n=this.width),this.image.css("width",n)}},t.prototype.show=function(){this.bar.length&&this.image.length&&(this.width=parseInt(this.bar.css("width"),10)-2*parseInt(this.image.css("left"),10),this.bar.css({visibility:"visible","z-index":"100"}))},t.prototype.hide=function(){this.bar.css({visibility:"hidden","z-index":"0"}),this.image.css({visibility:"hidden","z-index":"0"})},t}(),l=n(9679),c=n(3191),u=n(1607),h=n(8193),d=n(5527),p=(n(8116),n(6220),i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e,n,i){var o=t.call(this,i)||this;return o.el=e,o.knob=n,o.value=new d.y({filter:d.y.simpleFilter}),o.value.set(i.initialStep),o.init(e,n),o}return p(e,t),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{initialStep:0,steps:10,range:[0,100]}},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){var n=this;this.value.addListener(this.onValue.bind(this)),this.onResize(),o(window).on("resize",(function(){return n.onResize()})),e.woDrag({dragX:function(t,e){var i=Math.min(n.elWidth,Math.max(0,e)),o=i/n.elWidth,r=Math.round(o*n.steps)/n.steps;i+=(r-o)*n.elWidth;var a=n.relativeToAbsoluteValue(r);return n.value.set(a,!0),t-(e-i)},preventDefault:!0,stopPropagation:!0,dragThreshold:1}),t.on("mousedown click",(function(e){var i=t.offset(),o=e.pageX-i.left,r=Math.max(0,Math.min(1,o/n.elWidth));n.value.set(n.relativeToAbsoluteValue(r))}))},e.prototype.relativeToAbsoluteValue=function(t){return this.min+t*(this.max-this.min)},e.prototype.onResize=function(){this.elWidth=this.el.outerWidth(),this.updateUI()},e.prototype.updateUI=function(){var t=this.min,e=this.max,n=(this.value.get()-t)/(e-t);this.knob.woTransform({x:this.elWidth*n})},e.prototype.onValue=function(t,e){e||this.updateUI()},Object.defineProperty(e.prototype,"min",{get:function(){return this.options.range[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.options.range[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"steps",{get:function(){return this.options.steps},enumerable:!1,configurable:!0}),e}(l.d),m=n(7121),g=n(5728),v=n(8981),y=n(9158),_=n(7555),w=n(6112),b=n(833),x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();c.n5.instance.comfort=!0,c.n5.instance.comfort=!0;var T=function(t){function e(e){var n=t.call(this,e)||this;return n.meta=(0,a.s)(u.V.pid.cur),n.btnBack=o(".back"),n.btnFore=o(".fore"),n.btnToday=o(".today"),n.dateOverlay=o("#dateoverlay"),n.daytime="daily",n.daytimeformElements=o("#daytimeform input"),n.language="de",n.init(),n}return x(e,t),e.hideAllImages=function(){o(".preloaded").css("visibility","hidden")},Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{id:"colormap",imagemap:!1,georefer:!1,clickmap:!0,preload:!0,searchformWaitClose:3,basepath:"/?pid=p_image&ireq=true&src=city/vermarktung/wom/graphiken/farbkarten/"}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t,e=this,n=o("#pseudo_switch_tab"),i=o("#animation");if(o("#"+this.options.id).length){if(n.length){var a=o("#switch_tab").clone().children();n.append(a),a.css("display","block")}else"ColorMap"===u.V.sid.cur&&o("#"+u.V.varid).addClass("active");if(this.stopAnimation(),this.daytimeformElements.length>0){this.eventifyDaytimeForm(),t=this.daytimeformElements.filter((function(t,e){return o(e).prop("checked")})).length>1;var s=[];this.daytimeformElements.filter((function(t,e){return!1===o(e).prop("disabled")})).each((function(t,e){s.push(o(e).attr("value"))})),(0,r.W)().daytime&&s.indexOf((0,r.W)().daytime)>-1?this.daytime=(0,r.W)().daytime:t&&(this.daytime=this.daytimeformElements.filter((function(t,e){return o(e).prop("checked")})).eq(0).attr("value")),this.daytimeformElements.filter((function(t,n){return o(n).attr("value")===e.daytime})).prop("checked",!0)}u.V.daytime=this.daytime,this.options.imagemap&&o(".preloaded").attr("usemap","#imagemap"),void 0!==this.meta.path&&(this.options.basepath=this.meta.path),this.getMapNumber(),"ColorMap"!==u.V.sid.cur?this.parameter=u.V.sid.cur:void 0!==u.V.varid&&(this.parameter=u.V.varid),this.meta.switches&&(this.parameter=this.meta.switches[u.V.sid.cur][this.daytime]),"O3"===this.parameter&&(this.parameter="Ozone"),this.instance=u.V.iid.cur,this.eventifyDateList(),this.initSpeedSlider(),this.eventifyButtons(),this.setStartDate(),this.setDateOverlay(),this.eventifySearchform(),this.setSymbologyOverlay(),this.paraAnchors=o("#pseudo_switch_tab li a, #para_choice li a"),(0,r.W)().animation&&(u.V.animation=!("true"!==(0,r.W)().animation||!i)),i&&(u.V.animation?i.prop("checked",!0):i.prop("checked",u.V.animation)),u.V.animation?this.startAnimation():this.prepareMap(!0),this.options.clickmap&&o("#colormap").on("click",(function(){e.stepFore(),c.n5.instance.action=!0,(0,h.q)()})).css("cursor","pointer")}},e.prototype.getMapNumber=function(){this.mapnumber=1;var t=this.mapnumber;if(this.meta.daytime)for(;t<this.meta.daytime.length;t++)this.meta.daytime[t][this.daytime]>0&&this.mapnumber++;else this.mapnumber=this.meta.label.length},e.prototype.eventifyButtons=function(){var t,e=this,n=o("#static li");this.btnBack.on("click",(function(i){var r=o(i.target);r.hasClass("unclickable")||(c.n5.instance.comfort?(i.preventDefault(),clearTimeout(r.data("stepper")),r.data("stepper",setTimeout((function(){return e.stepBack()}),200)),c.n5.instance.action=!0,(0,h.q)()):(t=n.index(".activedate"),t--<0&&(t=n.length-1),window.location.assign(n.eq(t).find("td a").eq(0).attr("href"))))})),this.btnFore.on("click",(function(i){var r=o(i.target);r.hasClass("unclickable")||(c.n5.instance.comfort?(i.preventDefault(),clearTimeout(r.data("stepper")),r.data("stepper",setTimeout((function(){return e.stepFore()}),200)),c.n5.instance.action=!0,(0,h.q)()):(t=n.index(".activedate"),t++>n.length&&(t=0),window.location.assign(n.eq(t).find("td a").eq(0).attr("href"))))})),this.btnToday.on("click",(function(){n.filter(":visible").eq(0).trigger("click")}));var i=o("#animation");i.length&&i.off().on("click",(function(){i.prop("checked")?e.startAnimation():e.stopAnimation(),(0,h.q)()}))},e.prototype.eventifyDateList=function(){var t=this;c.n5.instance.comfort&&this.meta.label.forEach((function(e,n){if(e){var i=o("#d"+n);i&&(i.off().on({click:function(e){e&&e.preventDefault(),t.stopAnimation(),o("#animation").prop("checked",!1),t.currentMapIndex=n,t.prepareMap(!0),(0,h.q)(),c.n5.instance.action=!0},mouseenter:function(t){TTdefault(o(t.target).find("a").eq(0).text())},mouseleave:UnTip}),t.meta.daytime&&(1===t.meta.daytime[n][t.daytime]?i.show():i.hide()))}}))},e.prototype.eventifyDaytimeForm=function(){var t=this;this.daytimeformElements.each((function(e,n){var i=o(n),r=o(n).val(),a=0;t.meta.daytime.forEach((function(t){a+=t[r]})),0===a?i.parent("label").addClass("unclickable").prop("disabled",!0):i.parent("label").removeClass("unclickable").prop("disabled",!1)})),this.daytimeformElements.on("click",(function(e){var n=o(e.target).val();t.daytime=n,u.V.daytime=t.daytime,t.parameter=t.meta.switches[u.V.sid.cur][n],t.getMapNumber(),t.eventifyDateList(),t.stopAnimation(),o("#animation").prop("checked",!1),t.prepareMap(!0),(0,h.q)(),c.n5.instance.action=!0}))},e.prototype.eventifySearchform=function(){var t=o("#inmapfurthersearchstring"),e=o("#inmapfurthersearchform"),n=1e3*this.options.searchformWaitClose,i=function(){var e;function i(){clearTimeout(e)}return function(o){o?(i(),t.removeClass("hidden")):(i(),e=setTimeout((function(){t.addClass("hidden")}),n))}}();e.on({mouseover:function(){i(!0)},mouseout:function(){i(!1)},click:function(t){e.is(t.target.form)&&(t.stopPropagation(),t.preventDefault())}}),(0,_.E)("inmapfurthersearchstring","inmapfurthersearchform","inmapfurtherautosuggestions",(function(){(0,w.k)(null,t,"pc_city_colormap")}))},e.prototype.initSpeedSlider=function(){var t=this,e=o("#animationspeed");e.length&&new f(e,e.find(".knob"),{initialStep:4,range:[1,10],steps:40}).value.addListener((function(e){t.animationspeed=Math.floor(e),o("#animation").prop("checked")?t.startAnimation():t.stopAnimation()}))},e.prototype.markActiveDate=function(){if(this.currentMapIndex>=0){o("#date_headline").html(this.meta.label[this.currentMapIndex]),o("#static .activedate").removeClass("activedate"),o("#d"+this.currentMapIndex).addClass("activedate"),this.btnBack.add(this.btnFore).removeClass("unclickable"),this.currentMapIndex+1===this.mapnumber?this.btnFore.addClass("unclickable"):0===this.currentMapIndex&&this.btnBack.addClass("unclickable"),this.paraAnchors.each((function(t,e){var n=o(e),i=n.attr("href").split("?")[0],r=n.attr("href").split("?")[1]||"",a=""!==r?(0,m.d)(r):{};a.fcdatstr=WO.date.fcdatstr,n.attr("href",[i,"?",(0,g.U)(a)].join(""))}));var t=o("#static_wrapper");t.length&&(e=o("#static"),n=e.find(".activedate").eq(0),i=-999,n.offset().top+Math.floor(n.outerHeight()/2)>=t.offset().top+e.outerHeight()?i=t.offset().top-n.offset().top:n.offset().top+Math.floor(n.outerHeight()/2)<t.offset().top&&(i=parseInt(e.css("top"),10)-(n.offset().top-t.offset().top)),-999!==i&&e.css({position:"absolute",top:i}))}var e,n,i},e.prototype.preloadAllMaps=function(){if(WO.checkOnValidCookie()){var t=this.currentMapIndex,n=[],i=void 0;for(i=0;i<this.mapnumber;i++)o("#Map_"+this.daytime+i).length||(this.currentMapIndex=i,this.setDate(),this.setCurrentPath(),n.push(this.path));n.length>0&&(0,v.H1)(n,{onProgress:function(t,n,i){e.progressBar.step(t,i)}}).then((function(){e.progressBar.hide(),n.forEach((function(t,e){o('<img alt="" src="'.concat(t,'" class="preloaded" id="fc').concat(e,'" />')).appendTo("#colormap")}))})),this.currentMapIndex=t}else WO.checkMemberAuth()},e.prototype.preloadNextMap=function(){var t=this.currentMapIndex;this.currentMapIndex===this.mapnumber-1?this.currentMapIndex=0:this.currentMapIndex++,this.prepareMap(!1),this.currentMapIndex=t},e.prototype.prepareMap=function(t){var n=this;if(this.meta.daytime&&this.currentMapIndex>=0&&this.meta.daytime[this.currentMapIndex][this.daytime]<1)for(var i=0;i<this.meta.daytime.length-1;i++)if(this.meta.daytime[i][this.daytime]>0){this.currentMapIndex=i;break}if(!(this.currentMapIndex<0)){this.setDate(),t&&(WO.date.fcdatstr=this.date,b.d.set("fcdatstr",this.date));var r=o("#Map_"+this.daytime+this.currentMapIndex);r.length?t&&(e.hideAllImages(),this.markActiveDate(),this.setDateOverlay(),r.css("visibility","visible"),this.options.preload&&this.preloadNextMap()):(this.setCurrentPath(),(0,v.QO)(this.path,{id:"Map_"+this.daytime+this.currentMapIndex,alt:""}).then((function(i){var r=o(i).css("width",520).css("height",571).addClass("preloaded").appendTo("#colormap");t&&(e.hideAllImages(),n.markActiveDate(),n.setDateOverlay(),r.css("visibility","visible"),n.options.preload&&n.preloadNextMap(),e.progressBar.hide()),n.options.imagemap&&r.attr("usemap","#imagemap")})).catch(WO.checkMemberAuth))}},e.prototype.setCurrentPath=function(){var t="/",e="_";this.path=[this.options.basepath,this.year,t,this.month,t,this.day,t,this.daytime,t,this.parameter,t,this.instance,t,this.parameter,e,this.year,this.month,this.day,e,this.instance,e,this.language,".gif"].join("")},e.prototype.setDate=function(){this.year=this.meta.year[this.currentMapIndex],this.month=this.meta.month[this.currentMapIndex],this.day=this.meta.day[this.currentMapIndex],this.date=this.year+this.month+this.day},e.prototype.setDateOverlay=function(){var t=this.meta.label[this.currentMapIndex],e=o("#inmapfurthersearchform");this.dateOverlay.html(function(t){var e=t.split(",");if(e.length<2)return t;return[["<span class='daylabel'>",e[0].substr(0,2),"</span>"].join(""),["<span class='datelabel'>",e[1],"</span>"].join("")].join("")}(t)),this.dateOverlay.addClass("loaded"),e.addClass("loaded")},e.prototype.getSymbologyBySid=function(t){return[this.meta.imageBasePath,"symbology/",(0,y.tq)()?"mobil":"www","/",t,".",this.meta.imageFiletype].join("")},e.prototype.setSymbologyOverlay=function(){var t=new Image,e=o("#symbologyoverlay"),n=this.getSymbologyBySid(u.V.sid.cur);if(n){var i=o("<div />");i.addClass("symbology-el"),t.onload=function(){i.css("height",38).css("width",281).css("background-image","url("+t.src+")"),e.append(i),e.addClass("loaded")},t.src=n}},e.prototype.setStartDate=function(){void 0!==WO.date.fcdatstr&&""!==WO.date.fcdatstr?(this.year=WO.date.fcdatstr.substr(0,4),this.month=WO.date.fcdatstr.substr(4,2),this.day=WO.date.fcdatstr.substr(6,2)):void 0!==(0,r.W)().fcdatstr&&8===(0,r.W)().fcdatstr.length?(this.year=(0,r.W)().fcdatstr.substr(0,4),this.month=(0,r.W)().fcdatstr.substr(4,2),this.day=(0,r.W)().fcdatstr.substr(6,2)):b.d.get("fcdatstr")&&8===b.d.get("fcdatstr").length&&(this.year=b.d.get("fcdatstr").substr(0,4),this.month=b.d.get("fcdatstr").substr(4,2),this.day=b.d.get("fcdatstr").substr(6,2)),this.year&&this.month&&this.day?(this.date="",this.meta.year.indexOf(this.year)>=0&&(this.date+=this.meta.year[this.meta.year.indexOf(this.year)],this.meta.month.indexOf(this.month)>=0&&(this.date+=this.meta.month[this.meta.month.indexOf(this.month)],this.meta.day.indexOf(this.day)>=0&&(this.date+=this.meta.day[this.meta.day.indexOf(this.day)]))),8===this.date.length?this.currentMapIndex=this.meta.day.indexOf(this.day):this.currentMapIndex=0):(this.currentMapIndex=0,this.day=this.meta.day[this.currentMapIndex],this.month=this.meta.month[this.currentMapIndex],this.year=this.meta.year[this.currentMapIndex]),this.setDate(),WO.date.fcdatstr=this.date,b.d.removeKey("fcdatstr"),this.year===this.meta.year[0]&&this.month===this.meta.month[0]&&this.day===this.meta.day[0]||(c.n5.instance.action=!0)},e.prototype.startAnimation=function(){var t=this;this.stopAnimation(),this.preloadAllMaps();this.animation=setInterval((function(){return t.stepFore()}),3e3/this.animationspeed),u.V.animation=!0},e.prototype.stepFore=function(){var t=this;this.currentMapIndex===this.mapnumber-1?(this.currentMapIndex=0,u.V.animation&&(this.stopAnimation(),this.currentMapIndex=-1,setTimeout((function(){o("#animation").prop("checked",!0),t.startAnimation()}),2e3))):this.currentMapIndex++,this.currentMapIndex>=0&&this.prepareMap(!0)},e.prototype.stepBack=function(){this.currentMapIndex<0?this.currentMapIndex=this.mapnumber-2:this.currentMapIndex--,this.prepareMap(!0)},e.prototype.stopAnimation=function(){clearInterval(this.animation),u.V.animation=!1},e.progressBar=new s,e}(l.d)},2880:(t,e,n)=>{"use strict";var i=n(4700),o=(n(7129),n(1607)),r=n(8299),a=(n(9770),n(7555)),s=n(6112);i((function(){new r.E({imagemap:!1}),i("#contnav"+o.V.iid.cur).addClass("active"),(0,a.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,s.k)(null,i("#furthersearchstring"),"pc_city_colormap")}))}))},1402:(t,e,n)=>{"use strict";n(4700),n(8299),n(9158),n(1607)},8149:(t,e,n)=>{"use strict";var i=n(4700),o=(n(9267),n(1607)),r=n(4021),a=n(4241),s=n(2692),l=n(7555),c=n(6112);function u(){if(i("#pollenkarte img").fadeOut(300,(function(){i("#pollenkarte img").attr("src",i(".date.active").data("src")).fadeIn(300,(function(){}))})),"StationDetail"===o.V.sid.cur&&i("#pollenreport_catchline").text((0,a.s)("p_city_pollen").report[jQuery(".date.active").index()]),i(".station_detail").length>0){var t=jQuery(".date.active").index();jQuery(".polle_burden").each((function(e,n){var i=jQuery(n);i.removeClass("noburden weakburden moderateburden strongburden"),i.addClass(i.data("day"+t))}))}}function h(){var t=document.createEvent("Event");t.initEvent("woadreload",!0,!0),window.dispatchEvent(t)}i(".select_region").change((function(){window.location=i(this).find("option:selected").data("href")})),i(".slider_rechts, #slider_rechts").click((function(){if(jQuery(".date.active").index()<jQuery(".date").length-1){var t=jQuery(".date.active").index()+1;jQuery(".date").removeClass("active"),jQuery(".date").eq(t).addClass("active"),u()}h()})),i(".slider_links, #slider_links").click((function(){if(jQuery(".date.active").index()>0){var t=jQuery(".date.active").index()-1;jQuery(".date").removeClass("active"),jQuery(".date").eq(t).addClass("active"),u()}h()})),i(".date").click((function(){i(".date").removeClass("active"),i(this).addClass("active"),u(),h()})),i((function(){switch(o.V.sid.cur){case"Map":i("#region-navigation .activeregion").removeClass("activeregion"),i("#pollen-"+o.V.iid.cur).addClass("activeregion"),(0,l.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,c.k)(null,i("#furthersearchstring"),"pc_city_pollen")})),WO.unsetCookieValues(["sid"]);break;case"StationDetail":!function(){i("#pollentable li").on({mouseenter:function(t){try{TTdefault((0,r.Z)("gotoPollenMap")+i(t.target).find(".type").text())}catch(t){}},mouseleave:UnTip});var t=new s.r({});(0,l.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,c.k)(null,i("#furthersearchstring"),"pc_city_pollen")})),WO.loadInstancenavigation(),t.events.index.addListener((function(t){var e=(0,a.s)("p_city_pollen");if(e&&e.report){var n=e.report[t];""!==n&&" "!==n||(n="&nbsp"),i("#pollenreport-catchline").html(n)}e&&e.label&&i("#date_headline").find(".date").html(e.label[t])}))}()}}))},7066:(t,e,n)=>{"use strict";var i=n(4700),o=(n(59),n(1607)),r=n(4021),a=n(4241),s=n(2692),l=n(7555),c=n(6112);var u,h=n(9679),d=n(9857),p=n(3191),f=n(8193),m=n(8981),g=n(833),v=(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},u(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});p.n5.instance.comfort=!0;var y=function(t){function e(e){var n=t.call(this,e)||this;return n.meta=(0,a.s)(o.V.pid.cur),n.imagemap=!0,n.printmodus=(0,d.W)().print||!1,n.init(),n}return v(e,t),e.focusMapStepper=function(){i("mapstepper").focus()},Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{basepath:"/?pid="+o.V.pid.cur+"&sid="+o.V.sid.cur+"&img=true",hasParaid:!1}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this.meta;t&&t.label.length>0&&(this.mapnumber=t.label.length,this.gid=WO.geo.gid,WO.date.fcdatstr?(this.day=WO.date.fcdatstr.substr(6,2),this.month=WO.date.fcdatstr.substr(4,2),this.year=WO.date.fcdatstr.substr(0,4)):WO.date.day&&WO.date.month&&WO.date.year&&(this.day=WO.date.day,this.month=WO.date.month,this.year=WO.date.year),this.determineCurrentMap(),this.setParameter(),this.markDate(),this.markParameter(),this.eventifyDateTable(),this.imagemap&&!this.printmodus&&i("#imagecontainer").attr("usemap","#imagemap"),"p_city_uv"===o.V.pid.cur&&i("#uvi-legend").on({mouseenter:function(){TTstatic("uvi-legend")},mouseout:UnTip}))},e.prototype.determineCurrentMap=function(){var t=this.meta,e=this.currentMap;this.currentMap=-1;for(var n=0;n<this.mapnumber;n++)t.year[n]===this.year&&t.month[n]===this.month&&t.day[n]===this.day&&(this.currentMap=n);-1===this.currentMap&&e>0&&(this.currentMap=0,this.setParameter())},e.prototype.setParameter=function(){var t=this.meta;this.year=t.year[this.currentMap],this.month=t.month[this.currentMap],this.day=t.day[this.currentMap],this.currentTimestamp=this.year+this.month+this.day,this.options.hasParaid&&(this.metparaid=o.V.metparaid||o.V.paraid),WO.date.fcdatstr=this.currentTimestamp,g.d.set("fcdatstr",WO.date.fcdatstr)},e.prototype.eventifyDateTable=function(){var t=this;p.n5.instance.comfort&&i("#static td").on("click",(function(e){e.preventDefault();var n=i(e.target).closest("tr").attr("id");n&&(t.year=n.substr(1,4),t.month=n.substr(5,2),t.day=n.substr(7,2),t.determineCurrentMap(),t.setParameter(),t.showMap()),(0,f.q)(),p.n5.instance.action=!0}))},e.prototype.eventifyBackButtons=function(){var t=this,n=i("#static tr");i(".back").off().on({click:function(e){if(p.n5.instance.comfort)e.preventDefault(),e.stopPropagation(),t.prevMap(),(0,f.q)(),p.n5.instance.action=!0;else{var i=n.index(".activedate");i--<0&&(i=n.length-1),window.location.assign(n.eq(i).find("td a").eq(0).attr("href"))}},dblclick:function(t){t.preventDefault(),t.stopPropagation(),e.focusMapStepper()}})},e.prototype.eventifyForeButtons=function(){var t,n=this,o=i("#static tr");i(".fore").off().on({click:function(e){p.n5.instance.comfort?(e.preventDefault(),e.stopPropagation(),n.nextMap(),(0,f.q)(),p.n5.instance.action=!0):(t=o.index(".activedate"),t++>o.length&&(t=0),window.location.assign(o.eq(t).find("td a").eq(0).attr("href")))},dblclick:function(t){t.preventDefault(),t.stopPropagation(),e.focusMapStepper()}})},e.prototype.markDate=function(){i("tr.activedate").removeClass("activedate"),i("#d"+this.currentTimestamp).addClass("activedate"),i(".fore, .back").removeClass("unclickable"),this.eventifyForeButtons(),this.eventifyBackButtons(),this.currentMap+1===this.mapnumber?i(".fore").addClass("unclickable").off():(0===this.currentMap||1===this.currentMap&&"night"===this.daytime)&&i(".back").addClass("unclickable").off()},e.prototype.markParameter=function(){i("li.activeitem").removeClass("activeitem"),i("#p"+this.metparaid).addClass("activeitem")},e.prototype.nextMap=function(){this.currentMap<=this.mapnumber&&(this.currentMap++,this.showMap())},e.prototype.prevMap=function(){this.currentMap>0&&(this.currentMap--,this.showMap())},e.prototype.setHeadline=function(){i("date_headline").html(this.meta.label[this.currentMap])},e.prototype.showMap=function(){var t=this;this.setParameter();var e=i("#imagecontainer img"),n=i("#m"+this.currentTimestamp);if(n.length)e.css({visibility:"hidden",zIndex:0}),n.css({visibility:"visible",zIndex:3}),this.setHeadline(),this.markDate();else{var a=this.options.basepath+"&fcdatstr="+this.currentTimestamp+"&iid="+o.V.iid.cur+"&gid="+this.gid+"&metparaid="+this.metparaid,s="m"+this.currentTimestamp;(0,m.QO)(a,{id:s,alt:(0,r.Z)("forecast")+this.meta.label[this.currentMap]}).then((function(n){var o=i(n);o.appendTo("#imagecontainer").css({visibility:"visible",zIndex:3}),e.css({visibility:"hidden",zIndex:0}),t.setHeadline(),t.markDate(),t.imagemap&&o.attr("usemap","#imagemap")})).catch(WO.checkMemberAuth)}},e}(h.d);i((function(){switch(o.V.sid.cur){case"Map":new y({hasParaid:!0}),i("#region-navigation .activeregion").removeClass("activeregion"),i("#pollen-"+o.V.iid.cur).addClass("activeregion"),(0,l.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,c.k)(null,i("#furthersearchstring"),"pc_city_pollen")})),WO.unsetCookieValues(["sid"]);break;case"StationDetail":!function(){i("#pollentable li").on({mouseenter:function(t){try{TTdefault((0,r.Z)("gotoPollenMap")+i(t.target).find(".type").text())}catch(t){}},mouseleave:UnTip});var t=new s.r({});(0,l.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,c.k)(null,i("#furthersearchstring"),"pc_city_pollen")})),WO.loadInstancenavigation(),t.events.index.addListener((function(t){var e=(0,a.s)("p_city_pollen");if(e&&e.report){var n=e.report[t];""!==n&&" "!==n||(n="&nbsp"),i("#pollenreport-catchline").html(n)}e&&e.label&&i("#date_headline").find(".date").html(e.label[t])}))}()}}))},3796:(t,e,n)=>{"use strict";var i=n(4700),o=(n(3777),n(4978)),r=(n(9770),n(2220)),a=n(4241),s=n(7121),l=n(5728),c=n(7555),u=n(6112),h=function(){function t(){var t=this;if(this.meta=(0,a.s)("p_city_warnings"),this.furthersearchform=i("#furthersearchform"),this.furthersearchstring=i("#furthersearchstring"),this.furtherautosuggestions=i("#furtherautosuggestions"),this.isFocus=!1,this.severeWeatherDayTag=i("#severeWeatherDayTag"),this.initAutoSuggest(),this.updateContentNavigation(),!1===this.severeWeatherDayTag.hasClass("heute")&&this.severeWeatherDayTag&&r.Dd){var e=!0;if(sessionStorage.getItem("severeWeatherDayTag")){var n=new Date(sessionStorage.getItem("severeWeatherDayTag")),s=new Date;(0,o.c)((s.getTime()-WO.starttime.getTime())/1e3),(0,o.c)((s.getTime()-n.getTime())/1e3),s.getTime()-n.getTime()<s.getTime()-WO.starttime.getTime()+5e3&&((0,o.c)(" no popup"),e=!1)}!0===e&&(this.severeWeatherDayTag.addClass("popUp"),setTimeout((function(){return t.severeWeatherDayTag.removeClass("hidden")}),0),setTimeout((function(){return t.severeWeatherDayTag.removeClass("popUp")}),700),setTimeout((function(){return t.severeWeatherDayTag.addClass("hidden")}),1e3))}this.shrinkTextToFit()}return t.prototype.initAutoSuggest=function(){var t=this;this.furthersearchform.on({mouseenter:function(){clearTimeout(t.inactivityTimeout),t.furthersearchstring.removeClass("hidden")},mouseleave:function(){clearTimeout(t.inactivityTimeout),!1===t.isFocus&&(t.inactivityTimeout=setTimeout((function(){t.furthersearchstring.addClass("hidden"),t.furtherautosuggestions.addClass("ashidden")}),2e3))}}),this.furthersearchstring.on("focus",(function(){clearTimeout(t.inactivityTimeout),t.isFocus=!0})).on("blur",(function(){t.isFocus=!1,clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout((function(){t.furthersearchstring.addClass("hidden"),t.furtherautosuggestions.addClass("ashidden")}),2e3)}))},t.prototype.updateContentNavigation=function(){var t=this;i("#content-navigation-wrapper li.contentnavi_severeweather > a").each((function(e,n){var r=i(n);try{var a=r.attr("href").split("?"),c={};a.length>1&&(c=(0,s.d)(a[1])),c.fcdatstr=t.meta.fcdatstr,c.type=t.meta.type,r.attr("href",a[0]+"?"+(0,l.U)(c))}catch(t){(0,o.c)(t)}}))},t.prototype.shrinkTextToFit=function(){for(var t=i(".warnText"),e=t.find("p"),n=e.height(),o=parseInt(t.css("max-height"),10),r=parseInt(t.css("font-size"),10);n>o;)t.css("font-size","".concat(r-1,"px")),n=e.height(),r=parseInt(t.css("font-size"),10);t.css("opacity",1)},t}();i((function(){(0,o.c)("init city warnings"),(0,c.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,u.k)(null,i("#furthersearchstring"),"pc_city_warnings")}));new h})),window.addEventListener("pagehide",(function(){if(r.Dd){var t=new Date;sessionStorage.setItem("severeWeatherDayTag",t.toUTCString())}}))},2733:(t,e,n)=>{"use strict";var i=n(4700),o=(n(911),n(1607)),r=n(7555),a=n(6112);n(9770);i((function(){i("#water-"+o.V.iid.cur).addClass("activeregion"),(0,r.E)("furthersearchstring","furthersearchform","furtherautosuggestions",(function(){(0,a.k)(null,i("#furthersearchstring"),"pc_aktuell_watertemperature")}))}))},3608:(t,e,n)=>{"use strict";n.d(e,{M:()=>o});var i=WO.metadata.p_city_weather,o=i&&i.nowcastBarMetadata},1348:(t,e,n)=>{"use strict";var i,o=n(4700),r=(n(7875),n(4021)),a=n(4978),s=n(1607),l=n(9158),c=n(4241),u=n(5757),h=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.makeElement=function(){var t=document.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",this.getUrl()),this.options.media&&t.setAttribute("media",this.options.media),t},e}(u.x);var p,f=n(5728),m=n(7121),g=n(8224),v=n(8193),y=(n(8116),n(6220)),_=n(9857),w=n(2220),b=n(833),x=function(){return x=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},x.apply(this,arguments)};!function(t){t[t.ShortTerm=0]="ShortTerm",t[t.LongTerm=1]="LongTerm"}(p||(p={}));var T=function(){function t(e,n){this.metadata=e,this.sid=n,this.end=n===p.LongTerm?-602:-683,this.initParameterChoice(),this.initWindTooltips(),t.initLabelTooltips()}return t.initLabelTooltips=function(){if(!l.mA)o("#label [data-ttstatic]").on({mouseenter:function(t){var e=o(t.target).closest("[data-ttstatic]");TTstatic(e.data("ttstatic"))},mouseleave:UnTip})},Object.defineProperty(t.prototype,"parentId",{get:function(){return this.sid===p.LongTerm?"#longtermforecast":"#shorttermforecast"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idPrefix",{get:function(){return this.sid===p.LongTerm?"#longterm-":"#shortterm-"},enumerable:!1,configurable:!0}),t.prototype.initWindTooltips=function(){var t=this;l.mA||o("#ff div.tooltipwrapper div").each((function(e,n){o(n).on({touchstart:t.showWindTooltip.bind(t,e),mouseenter:t.showWindTooltip.bind(t,e),mouseleave:UnTip})}))},t.prototype.showWindTooltip=function(t){if("ttwind"in this.metadata&&void 0!==this.metadata.ttwind[t]){var e=this.metadata.ttwind[t].split("|");TTwind(e[0],e[1],e[2],e[3],e[4],e[5])}},t.prototype.extractPrefparKeyFromElementId=function(t){return t.replace(/box|(short|long)term\-/g,"")},t.prototype.initParameterChoice=function(){var t,e=this,n=0,i=[];this.allCheckbox=o("".concat(this.parentId," ").concat(this.idPrefix,"allcheckbox")),this.paraInputs=o("".concat(this.parentId," #parachoice input")),this.prefpars=x({},this.getDefaultPrefpar());var r=(0,_.S)();if(r.paras&&r.paras.length===Object.keys(this.prefpars).length&&(r.prefpars=r.paras),w.Dd&&localStorage.getItem("prefpars_"+s.V.sid.cur)&&localStorage.getItem("prefpars_"+s.V.sid.cur).length===Object.keys(this.prefpars).length)for(var a in t=localStorage.getItem("prefpars_"+s.V.sid.cur).split(""),this.prefpars)this.prefpars[a]="1"===t[n],n++;if(n=0,r.prefpars&&r.prefpars.length===Object.keys(this.prefpars).length)for(var a in t=r.prefpars.split(""),this.prefpars)this.prefpars[a]="1"===t[n],n++;this.paraInputs.each((function(t,n){var r=o(n),a=e.extractPrefparKeyFromElementId(r.attr("id"));if(a in e.prefpars){var s=!!e.prefpars[a]&&"0"!==e.prefpars[a];e.toggleForecastParameter(a,s,!1,null),r.prop("checked",s),i.push(r),r.on({change:function(t,n){void 0===n&&(n={});var i="toggleall"in n?"toggleall":"change";e.toggleForecastParameter(a,o(t.target).prop("checked"),!0,i)}})}})),this.allCheckbox.on("change",(function(t){i.forEach((function(e){e.prop("checked",o(t.target).prop("checked")),e.trigger("change",{toggleall:!0})}))})),this.checkAllCheckBox()},t.prototype.toggleForecastParameter=function(t,e,n,i){var r=this,a=o(this.parentId+" #"+t),l=o(this.parentId+" #"+t+"label"),c=a.add(l);if(a){n?e?c.slideDown(500):c.slideUp(500):c.toggle(e),this.prefpars[t]=e;var u=this.prefpars;s.V.prefpars=Object.keys(this.prefpars).map((function(t){return r.prefpars[t]?1:0})).join(""),localStorage.setItem("prefpars_"+s.V.sid.cur,s.V.prefpars),b.d.removeKey("prefpars_"+s.V.sid.cur);var h=this;o("".concat(this.parentId," #parachoice input")).each((function(){var t=o(this),e=t.parent("label");u[h.extractPrefparKeyFromElementId(t.attr("id"))]?e.addClass("bold"):e.removeClass("bold")})),"change"===i&&(this.checkAllCheckBox(),(0,v.q)())}},t.prototype.checkAllCheckBox=function(){var t=0===this.allCheckbox.parent().siblings().find("input").filter((function(t,e){return!o(e).prop("checked")})).length;this.allCheckbox.prop("checked",t)},t}(),S=n(7659),C=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),M=function(t){function e(e){var n=t.call(this,e,p.LongTerm)||this;return n.pseudoSwitchTab=o("#pseudo_switch_tab"),n.dragEl=o("#dragarea"),n.adplaces=n.dragEl.find(".adplace"),n.stepperFore=o("div.p_city_local_wrapper .foreward"),n.stepperBack=o("div.p_city_local_wrapper .backward"),n.bypassSwitchButtonUpdate=!1,n.currentX=0,n.initPrecipitationTooltips(),n.initDrag(),n.shiftDragArea(),n}return C(e,t),e.prototype.getDragStartPosition=function(){return this.end},e.prototype.getDefaultPrefpar=function(){return e.defaultPrefpar},e.prototype.initPrecipitationTooltips=function(){var t=this;l.mA||o("#rr div.tooltipwrapper div").each((function(e,n){o(n).on({touchstart:t.showPrecipitationTooltip.bind(t,e),mouseenter:t.showPrecipitationTooltip.bind(t,e),mouseleave:UnTip})}))},e.prototype.showPrecipitationTooltip=function(t){if("ttprecipitation"in this.metadata&&void 0!==this.metadata.ttprecipitation[t]){var e=this.metadata.ttprecipitation[t].split("|"),n=e[1].split(":");TTrrLongterm(e[0],n)}},e.prototype.onClickLongtermSwitch=function(t){var e=t?0:this.getDragStartPosition();this.bypassSwitchButtonUpdate=!0,this.animation=new S.f(this.dragEl,{x:e,duration:2e3}),Math.abs(e-this.currentX)>10&&(0,v.q)()},e.prototype.initDrag=function(){var t=this;l.mA||this.dragEl.length&&(this.dragEl.woDrag({dragX:function(e,n){return t.bypassSwitchButtonUpdate=!1,e-(n-Math.max(t.end,Math.min(0,n)))},preventDefault:!0,stopPropagation:!0,dragThreshold:0}).on(y.B,(function(){return t.watchDragAreaPosition()})),o(this.stepperFore).add(this.stepperBack).on("click",(function(e){var n,i=o(e.target).attr("class");i||(i=o(e.target).parent("div").attr("class")),t.sid===p.LongTerm&&(n=i.indexOf("back")>-1?0:t.end,n=Math.min(0,n),n=Math.max(t.end,n)),t.bypassSwitchButtonUpdate=!1,t.animation=new S.f(t.dragEl,{x:n,duration:2e3}),Math.abs(t.currentX-n)>10&&(0,v.q)()})))},e.prototype.hide=function(){this.animation&&this.animation.cancel(),o("#forecast_LongTerm").hide()},e.prototype.show=function(){o("#forecast_LongTerm").show(),this.shiftDragArea()},e.prototype.shiftDragArea=function(){if(!l.mA)if((0,_.S)().start){var t=this.getDragStartPosition();t&&this.dragEl.woTransform({x:t}),this.watchDragAreaPosition()}else this.dragEl.woTransform({x:0}),this.watchDragAreaPosition()},e.prototype.watchDragAreaPosition=function(){var t,e=this,n=this.dragEl.woTransformData().x||0;this.currentX="string"==typeof n?parseFloat(n):n,this.bypassSwitchButtonUpdate||(this.pseudoSwitchTab.find(".activeswitch").removeClass("activeswitch"),this.sid===p.LongTerm&&this.currentX-this.end<10||this.sid===p.ShortTerm&&this.currentX-this.getDragStartPosition()<10?(t=o("."+s.V.sid.cur+"_secondhalf").parent("li"),this.toggleStart8Param(!0)):(t=o("."+s.V.sid.cur+"_firsthalf").parent("li"),this.toggleStart8Param(!1)),t&&t.addClass("activeswitch")),this.adplaces.each((function(t,n){var i=o(n);i.data("adplace-positioned")||"static"!==i.css("position")||i.css("position","relative"),i.data("adplace-positioned",!0),i.css("left",-1*e.currentX)})),this.currentX<=this.end+1||!0===this.stepperFore.hasClass("reardirection")?(this.stepperFore.removeClass("foreward").addClass("backward"),this.currentX>this.getDragStartPosition()&&this.stepperFore.removeClass("reardirection")):this.stepperFore.addClass("foreward").removeClass("backward").removeClass("reardirection")},e.prototype.toggleStart8Param=function(t){var e=(0,_.S)(),n=!0===t?{condition:function(){return 8!==e.start},action:function(){return e.start=8}}:{condition:function(){return null!=e.start},action:function(){return delete e.start}},i=n.action;(0,n.condition)()&&(i(),history.replaceState({},"",location.pathname+(Object.keys(e).length>0?"?"+o.param(e):"")))},e.defaultPrefpar={wwday:!0,wwnight:!1,sunshine:!0,tt:!0,rr:!0,ff:!0},e}(T),P=n(1565),k=n(3162),O=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),D=function(t){function e(e){var n=t.call(this,e,p.ShortTerm)||this;return n.dimensionsInitialized=!1,n.initDimensions(),n.drawShortTermNight(),n}return O(e,t),e.prototype.getDragStartPosition=function(){return this.initDimensions(),this.shortTerminFirstDayEndPixel},e.prototype.getDefaultPrefpar=function(){return e.defaultPrefpars},e.prototype.initDimensions=function(){this.dimensionsInitialized||(this.shortTerminFirstDayEndPixel=-1*parseInt(o("#dragarea tr.days td").eq(1).css("width"),10)-36,this.dimensionsInitialized=!0)},e.prototype.drawShortTermNight=function(){var t,e,n,i,a,s,c,u=this,h=l.mA?"#888":"#ddd",d=l.mA?"#000":"#888",p=35,f=[],m=[],g=[],v=[],y=[],_="arial, sans-serif",w="10px",b="normal";this.metadata.sunclass=["#e6e6e6","#f6eebb","#ffeb00"],(t=new jsGraphics("dayline")).setPrintable(l.mA&&!P.w1);for(var x=0;x<=15;x++)this.metadata.rsd[x]<0?t.setColor("#fff"):t.setColor(this.metadata.sunclass[this.metadata.rsd[x]]),t.fillRect(36+75*x,0,75,9),t.setColor(h),t.drawLine(36+75*x,0,36+75*x,9);t.drawLine(1236,0,1236,9),t.drawLine(36,9,1236,9),t.setFont(_,w,b);for(var T=1;T<2*this.metadata.nighttime[0]+1;T+=2)t.setColor("#fff"),t.setStroke(1),t.fillRect(p+this.metadata.nighttime[T],0,this.metadata.nighttime[T+1]-this.metadata.nighttime[T],10),t.setColor(h),t.setStroke(1),this.metadata.nighttime[T]>0&&t.drawLine(p+this.metadata.nighttime[T],0,p+this.metadata.nighttime[T],9),this.metadata.nighttime[T+1]<1200&&t.drawLine(p+this.metadata.nighttime[T+1],0,p+this.metadata.nighttime[T+1],9),t.setColor(d),this.metadata.nighttime[T+1]-this.metadata.nighttime[T]>=44?(n=-15,i=-15):(n=-44,i=0),(a=this.metadata.nighttime[T+2]-this.metadata.nighttime[T+1])<50&&a>=0&&(i=-26,this.metadata.nighttime[T+2]=this.metadata.nighttime[T+2]+34),this.metadata.nighttime[T]>0&&((s=p+this.metadata.nighttime[T]+n)<0&&(s=0),t.drawString((0,r.Z)("sunset")+this.metadata.suntimes[T],s,14)),this.metadata.nighttime[T+1]<1200&&(c=p+this.metadata.nighttime[T+1]+i,0===s&&c<45&&(c+=5),t.drawString((0,r.Z)("sunrise")+this.metadata.suntimes[T+1],c,14));t.paint();var S=o(".timeline .days").find("td").not(":first").not(":last");S.each((function(t){var e=S.eq(t).css("width"),n=parseInt(e,10)/75;m.push(n)})),m.forEach((function(t,e){for(var n=1;n<=t;n++)f.push(S.eq(e).html().split(",")[0]+", ")}));var C=o(".timeline .hours").find("td");if(C.length>0){C.eq(0).html();var M=o("#dayline").children("div").children("div"),k=o();M.each((function(t,n){e=o(n).css("backgroundColor"),u.metadata.sunclass.indexOf(e)>-1&&(k=k.add(n))})),this.metadata.rsd.forEach((function(t,e){if(t>-999){g.push(t),v.push(f[e]+" "+C[e]+" - "+C[e+1]);var n=u.metadata.asd[e];y.push(n)}})),k.each((function(t,e){function n(){var e=(0,r.Z)("hour");"1"!==y[t]&&(e+="n"),TTmediumasd(v[t],g[t],y[t]+e)}o(e).addClass("clickme").on({touchstart:n,mouseover:n,mouseout:UnTip})}))}},e.defaultPrefpars={ww:!0,tt:!0,rh:!1,rr:!1,ts:!1,ff:!0,pp:!1},e}(T),L=n(2684),A=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},E=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},I="#shortterm-overlay";function R(){return A(this,void 0,void 0,(function(){var t,e,n;return E(this,(function(i){switch(i.label){case 0:return WO.shadeContent(),[4,(0,k.fetchWithErrors)((0,f.U)({sid:"ShortTerm",pid:"p_city_local",ireq:!0,lat:WO.geo.lat,lon:WO.geo.lon,gid:WO.geo.gid,iid:WO.geo.gid,locationname:WO.geo.locationname,sublocationname:WO.geo.sublocationname||""},!0)).then((function(t){return t.text()})).then((function(t){return t.replace(/{{\s*ADPLACE_CSI\s*}}|\(EXEC\:.*\)/gi,"")}))];case 1:t=i.sent(),(e=l.mA?o("<div></div>").attr({id:"forecast_ShortTerm"}).addClass(["p_city_local_wrapper","print-view"]).insertAfter("#pseudo_switch_tab"):o("#infodiv")).html(t).addClass("shortterm").show(),e.prepend('<h3 class="header">'.concat(o("#nowcast-card-headline").text(),"</h3>")),WO.absolutizeInfoDiv(),n=function(){return location.hash=""},WO.eventifyCloseButton.delay(10,null,n),o("#overlay.overlay").click(n),l.mA||e.find("h3").append(o('<div class="'.concat(L.Z.printButton,'">( Druckansicht )</div>')).click(z));try{WO.tooltipizeElements(),window.mootoolsTooltips()}catch(t){}return new D((0,c.s)("p_city_weather")),l.mA||(r=e,a=o("#totalcontainer"),r.css({left:(a.outerWidth()-r.outerWidth())/2,top:Math.max(10,(window.innerHeight-r.outerHeight())/2)}),setTimeout((function(){return window.scrollTo(0,0)}))),location.hash=I,[2]}var r,a}))}))}function z(){window.open((0,g.I)(void 0,{print:!0,sid:"ShortTerm"}))}var N,j=location.hash===I||location.search.indexOf("sid=ShortTerm")>=0&&l.mA,B=j?new Promise((function(t){N=t})):Promise.resolve();j&&o((function(){setTimeout((function(){return A(void 0,void 0,void 0,(function(){return E(this,(function(t){switch(t.label){case 0:return[4,R()];case 1:return t.sent(),N(),[2]}}))}))}))}));var W=function(){function t(){this.tableWrapper=o("#forecasttable"),this.selectedItemHighlight=o("#pseudo_switch_tab .prefpar_submenu .selected-item-highlight"),this.init()}return t.prototype.init=function(){var t=this,e=o("#daterow th");if(this.prefparLinkListElements=o("#pseudo_switch_tab .prefpar_submenu li a"),this.tableWrapper.length){this.displayMediumTermTable(),o("#mediumtermforecast").find("td, th").filter(":first-child, :nth-child(2)").css("cursor","pointer").on("click",(function(t){t.stopPropagation(),R()})),o("#precipitation_teaser td, #sun_teaser td").on({touchend:function(e){e.stopPropagation(),s.V.prefpar=o(e.target).parent("tr").attr("id").split("_")[0],(0,v.q)(),t.displayMediumTermTable()},touchstart:function(t){t.stopPropagation()}});var n=function(e){var n=o(e.target);s.V.prefpar!==n.attr("class")&&(s.V.prefpar=n.attr("class"),(0,v.q)(),"pushState"in history&&history.pushState(null,document.title.split("- ")[0]+n.text(),(0,g.I)()),t.displayMediumTermTable(),t.updateSelectedItemHighlight(n.parent("li")))};this.prefparLinkListElements.on({click:function(e){o(e.target).data("touchend-fired")||n.bind(t,e)();e.preventDefault()},touchend:function(e){o(e.target).data("touchend-fired",!0),n.bind(t,e)()}});try{window.addEventListener("popstate",(function(){var e=(0,_.S)();s.V.prefpar="prefpar"in e?e.prefpar:"weather",t.displayMediumTermTable()}))}catch(t){(0,a.c)(t)}if(localforecast&&localforecast.day.forEach((function(t,e){t.sunrise.forEach((function(n,i){var o=t.sunset[i]?t.sunset[i]:360,r=new jsGraphics("sunwheel"+e);r&&+n<=360&&o<=360&&(r.setPrintable(l.mA&&!P.w1),l.mA?r.setColor("#666"):r.setColor("#aaa"),r.fillArc(13,13,58,58,n,o),r.paint())}))})),!l.mA){var i=function(t,e){t>=0&&TTrr(e.eq(t).find("span.date_of_day").html(),localforecast.day[t].ptp,localforecast.day[t].pch,localforecast.day[t].rrs24)};o(".prec_overlay").each((function(t,n){o(this).on({mouseenter:function(){i(n,e)},touchstart:function(){i(n,e)},mouseleave:UnTip})}));var r=this;o("#weather td.windy div.clickdiv-wrapper").each((function(){var t=o(this),e=o("<div />",{class:"windy-clickdiv"});e.on("touchstart",(function(){s.V.prefpar="wind",(0,v.q)(),r.displayMediumTermTable()})),t.append(e)}))}}},t.prototype.hide=function(){o("#forecast_MediumTerm").hide(),o("#pc").removeClass("MediumTerm")},t.prototype.show=function(){o("#forecast_MediumTerm").show(),o("#pc").addClass("MediumTerm")},t.prototype.displayMediumTermTable=function(){var t;if(this.tableWrapper.children().css("display","none"),(t=this.tableWrapper.find("#"+s.V.prefpar)).length){t.css("display","div"===t.prop("nodeName").toLowerCase()?"block":"table"),o("#daterow").css("display","precipitation"===s.V.prefpar?"none":"table");var e=this;this.prefparLinkListElements.each((function(){var t=o(this);t.hasClass(s.V.prefpar)?e.updateSelectedItemHighlight(t.parent("li").addClass("active")):t.parent("li").removeClass("active")})),o("a.windcalculator").css("display","wind"===s.V.prefpar&&!1===l.mA?"block":"none")}},t.prototype.updateSelectedItemHighlight=function(t){this.selectedItemHighlight.css("transform","translateX(".concat(t.position().left,"px)"))},t}(),F=n(5527),U=n(4441),Z=(n(5667),function(){var t=this;this.id="string",this.element=o("#pollen-teaser").addClass("www positioned"),this.events={onAdd:new F.y},this.events.onAdd.addListener((function(){return setTimeout((function(){return t.element.addClass("animated")}),1e3)}))});o((function(){return U.o.instance.add(Z)}));n(9206);var V=function(){var t=this;this.id="string",this.element=o("#ski-teaser").addClass("www positioned"),this.events={onAdd:new F.y},this.events.onAdd.addListener((function(){return setTimeout((function(){return t.element.addClass("animated")}),1e3)}))};o((function(){return U.o.instance.add(V)}));var H=n(5481),Y=function(){function t(){var t=this;this.id="watertemperature",this.events={onAdd:new F.y},this.el=o("#watertemp-teaser"),this.positionsItself=!1,this.el.attr("data-tt","Wassertemperatur ").addClass(H.Z.show),this.events.onAdd.addListener((function(){return setTimeout((function(){return t.el.addClass(H.Z.animate)}),1e3)}))}return Object.defineProperty(t.prototype,"element",{get:function(){return this.el},enumerable:!1,configurable:!0}),t}();o((function(){return U.o.instance.add(Y)})),n(9794);n(7988);var q=n(3608),G=function(){console.log(WO.metadata);var t=WO.metadata.p_city_weather;if(!t)return[];var e=t.hourlyForecastElements;if(q.M&&q.M.hourly)for(var n,i=function(t,i){var o=e.filter((function(e){return q.M.hourly.currentTimeHour+t===e.hour+("morgen"===e.daySynonym?24:0)}))[0];if(!o)return n=i,"continue";++i,o.temperature=q.M.hourly.temp[t],o.hourlyPrecipitationAmount=q.M.hourly.aop[t],o.hourlyPrecipitationDuration=q.M.hourly.dop[t],o.precipitationProbability=q.M.hourly.pop[t],o.umbrellaState=q.M.hourly.pop[t]<50?"closed":"opened",o.symbol=q.M.hourly.symbol[t],o.symbolText=q.M.hourly.text[t],n=i},o=0,r=0;r<Math.min(q.M.hourly.temp.length,3)&&o<q.M.hourly.temp.length;++o)i(o,r),r=n;return e}();var X,Q;n(3251);function K(){var t,e="[data-tt-args][data-tt-fn=lp]",n=o('<div class="lp-tt lp-tt-top">\n <div class="lp-tt-content">\n  <div id="lp-tt-time"></div>\n  <div id="lp-tt-descr"></div>\n  <div class="para" id="lp-tt-air-pressure"></div>\n  <div class="para" id="lp-tt-humidity"></div>\n  <div class="para" id="lp-tt-temp"></div>\n  <div class="para" id="lp-tt-wind"></div>\n  <div class="para" id="lp-tt-gust"></div>\n  <div class="para" id="lp-tt-prec"></div>\n  <div class="para" id="lp-tt-smog">Smog</div>\n </div>\n</div>').prependTo(document.body),i=n.find("#lp-tt-time"),r=n.find("#lp-tt-descr"),a=n.find("#lp-tt-prec"),s=n.find("#lp-tt-wind"),l=n.find("#lp-tt-gust"),c=n.find("#lp-tt-temp").hide(),u=n.find("#lp-tt-smog").hide(),h=n.find("#lp-tt-air-pressure").hide(),d=n.find("#lp-tt-humidity").hide(),p=n.find(".lp-tt-content"),f=!1;function m(t,e,n){null!=e?t.text(n(e)).show():t.hide()}function g(){n.woTransform(t.pos);var e=(document.documentElement.scrollTop||document.body.scrollTop||0)+window.innerHeight-(t.pos.y+p.outerHeight()+20);n.toggleClass("lp-tt-bottom",e>0)}o(e).each((function(){var t=o(this),e=t.data("ttArgs");if(!t.hasClass("day-part")){var n=e[X.Temperature],i=e[X.ApparentTemperature];Math.abs(n-i)>5&&(f=!0)}})).find("img[title]").each((function(){this.setAttribute("title","")}));var v=!1;function y(){n.css("opacity",0),t=void 0}o(document).mousedown((function(){return v=!0,!0})),o(document).mouseup((function(){return v=!1,!0})),o(e).mouseenter((function(e){var p=o(this),y=p.data("ttArgs");y&&Array.isArray(y)&&!v&&(e.preventDefault(),t={$element:p,data:y,pos:{x:e.pageX,y:e.pageY}},function(){if(t){var e=t.$element.hasClass("day-part");i.text(t.data[X.Time]),r.html(t.data[X.SymbolDescription]),s.html(t.data[X.WindSpeedDescription]+" aus "+t.data[X.WindDirection]+" ("+parseInt(t.data[X.WindSpeedKmh],10)+" km/h | "+t.data[X.WindSpeedBft]+" Bft)").attr("class","para dir-"+t.data[X.WindDirectionShort]),f&&c.text("gefÃ¼hlte Temperatur "+t.data[X.ApparentTemperature]+"Â°").show(),t.data[X.WindyClass]?l.text("BÃ¶en bis "+t.data[X.GustsKmh]+" km/h ("+t.data[X.GustsBft]+" Bft)").show():l.hide(),t.data[X.Smog]?u.show():u.hide();var n=t.data[X.PrecipitationProbability],o=t.data[X.Symbol].test(/.{2}s(n|g)/);if(n>=50){var p=parseInt(t.data[X.PrecipitationDuration],10),g=void 0;if(g=e?p<60?"< 1 h":Math.round(p/60)+" h":p<10?"10 min":p+" min",o){var v="0"===String(t.data[X.NewSnow])?"< 1":t.data[X.NewSnow];a.text("HÃ¶he "+v+" cm, Dauer "+g).show()}else{var y="0"===t.data[X.PrecipitationAmount]?"0-0,5":t.data[X.PrecipitationAmount];a.text("Menge "+y+" mm, Dauer "+g).show()}}else t.data[X.IsHourlyWeather]?a.hide():a.text("Niederschlagswahrscheinlichkeit "+t.data[X.PrecipitationProbability]+"%").removeClass("snow").show();a.toggleClass("snow",o),m(h,t.data[X.AirPressure],(function(t){return"Luftdruck: ".concat(t," hPa")})),m(d,t.data[X.Humidity],(function(t){return"rel. Feuchte: ".concat(t," %")}))}}(),g(),n.css("opacity",1))})),o(document).mousemove((function(e){t&&(t.pos={x:e.pageX,y:e.pageY},g())})),o(e).mouseleave(y),o(e).mousedown(y)}!function(t){t[t.Time=0]="Time",t[t.Symbol=1]="Symbol",t[t.SymbolDescription=2]="SymbolDescription",t[t.PrecipitationProbability=4]="PrecipitationProbability",t[t.GustsBft=6]="GustsBft",t[t.GustsKmh=7]="GustsKmh",t[t.ThunderstormProbability=8]="ThunderstormProbability",t[t.WindyClass=9]="WindyClass",t[t.PrecipitationAmount=10]="PrecipitationAmount",t[t.NewSnow=11]="NewSnow",t[t.PrecipitationDuration=12]="PrecipitationDuration",t[t.WindSpeedDescription=13]="WindSpeedDescription",t[t.WindDirection=14]="WindDirection",t[t.WindSpeedKmh=15]="WindSpeedKmh",t[t.WindSpeedBft=16]="WindSpeedBft",t[t.Temperature=17]="Temperature",t[t.ApparentTemperature=18]="ApparentTemperature",t[t.SnowProbability=19]="SnowProbability",t[t.WindDirectionShort=20]="WindDirectionShort",t[t.InfoIndex=21]="InfoIndex",t[t.Smog=22]="Smog",t[t.AirPressure=23]="AirPressure",t[t.Humidity=24]="Humidity",t[t.IsHourlyWeather=25]="IsHourlyWeather"}(X||(X={})),function(t){t[t.Still=0]="Still",t[t.Constant=1]="Constant",t[t.Slowdown=2]="Slowdown",t[t.FromTo=3]="FromTo"}(Q||(Q={}));var J,tt=function(){function t(t,e,n){this.min=t,this.max=e,this.onChange=n}return t.prototype.get=function(t){return this._fn(t)},t.prototype.set=function(t){var e,n=this;this.onChange(),this._fn=function(i){return void 0===e&&(e=i),n.limit(t(i-e))}},t.prototype.limit=function(t){return Math.max(this.min,Math.min(this.max,t))},t}(),et=function(){function t(t,e){var n=this;this.slope=0,this.isStill=!0,this.posFn=new tt(t,e,(function(){n.onChangeFn&&n.onChangeFn()}))}return t.prototype.calcCurrentPos=function(t){return this.isStill=!1,this.posFn.get(t)},t.prototype.still=function(t){var e=this;this.posFn.set((function(){return e.isStill=!0,e.slope=0,t}))},t.prototype.linear=function(t,e){this.slope=e,this.posFn.set((function(n){return t+n*e}))},t.prototype.decay=function(t,e){var n=this;void 0===e&&(e=this.slope);var i=-.006,o=e/i,r=i,a=t-e/i;this.posFn.set((function(t){var e=o*Math.exp(r*t)+a;return n.slope=o*r*Math.exp(r*t),Math.abs(n.slope)<.001?(n.still(e),e):e}))},t.prototype.fromTo=function(t,e,n){var i=this,o=(2*t+this.slope*n-2*e)/(n*n*n),r=(-this.slope-3*o*n*n)/(2*n),a=this.slope,s=t;this.posFn.set((function(t){return t>n?(i.still(e),e):(i.slope=3*o*t*t+2*r*t+a,o*t*t*t+r*t*t+a*t+s)}))},t}(),nt=o(".forecast-container"),it=o("#hourly-container"),ot=o(".faded-background-container"),rt=o(".splitter-line"),at=o("#sunrise-sunset-today"),st=o(".today-tomorrow-container > .today"),lt=o(".today-tomorrow-container > .tomorrow"),ct=o(".report-text.today"),ut=o(".report-text.tomorrow");var ht,dt={both:o(".scroll-button"),left:o(".scroll-button.left"),right:o(".scroll-button.right")},pt=o(window);function ft(){!function(){function t(){return o("<div></div>")}for(var e=0,n=G;e<n.length;e++){var i=n[e],r={"data-tt-fn":"lp","data-tt-args":JSON.stringify(["".concat(i.daySynonym,", ").concat(i.hour,":00"),i.symbol,i.symbolText,"",i.precipitationProbability,"",i.windGusts,i.windGustsKmh,i.thunderstormProbability,i.windy,i.hourlyPrecipitationAmount,i.freshSnowDepth,i.hourlyPrecipitationDuration,i.windSpeedText,i.windDirection,i.windSpeedKmh,i.windSpeedBft,i.temperature,i.apparentTemperature,i.snowProbability,i.windDirectionShortSector,i.weatherInfoIndex,i.smog,i.airPressure,i.humidity,!0])},a=t().addClass(["hourly-element",i.dayTime,i.daySynonym,i.windy,"white"]).attr({"data-hour":i.hour,"aria-label":"Die Vorhersage f&uuml;r ".concat(i.daySynonym," ").concat(i.hour," Uhr: ").concat(i.symbolText,", ").concat(i.temperature,"&deg;")}).append(t().addClass("tooltip-trigger").attr(r),t().addClass(["time","time-".concat(i.hour)]).text("".concat(i.hour," Uhr")),t().addClass("temperature").text("".concat(i.temperature,"Â°")),t().addClass("symbol").append(o("<img>").attr({src:"https://st".concat(i.tierAppendix,".wetteronline.de/dr/").concat(i.docrootVersion,"/city/prozess/graphiken/symbole/standard/farbe/svg/centered/").concat(i.symbol,".svg"),alt:i.symbolText,width:47,height:33})),t().addClass("precipitation-probability").append(t().addClass(["umbrella",i.umbrellaState]),t().addClass("value").text("".concat(i.precipitationProbability," %")))).appendTo(it);J=J?J.add(a):a}}(),K(),function(){st.click((function(){return T("today")})),lt.click((function(){return T("tomorrow")}));var t=!1,e=!1,n=!0;function i(){dt.left.toggleClass("visible",t&&e),dt.right.toggleClass("visible",t&&n)}nt.hover((function(e){t="mouseenter"===e.type,i()}));var r=it.find(".hourly-element").eq(4).position().left,a=it.find(".hourly-element.morgen").first().position().left,s=0,l=0,c=it.width()-ot.width(),u=!1;function h(){var t=1-Math.max(r-s,0)/r;ot.css("backgroundColor","rgba(16, 101, 142, ".concat(t,")")),rt.css("margin","0 ".concat(9*(1-t),"px")).css("opacity",1-t),e=s>l,n=s<c,i(),S(a-s>0?"today":"tomorrow")}h();var d=!1,p=new et(l,c);function f(t){d=!0,s=p.calcCurrentPos(t),it.css("transform","translateX(".concat(-s,"px)")),h(),p.isStill?d=!1:requestAnimationFrame(f)}p.onChangeFn=function(){u=!1};var m=!1;function g(){m&&(m=!1,p.decay(s))}dt.both.mousedown((function(t){m=!0,p.linear(s,t.target.isEqualNode(dt.left[0])?-.5:.5),d||requestAnimationFrame(f)})),dt.both.mouseup(g),dt.both.mouseleave(g);var v,y=!1,_=[];it.on("mousedown touchstart",(function(t){t.preventDefault(),_=[{pos:t.pageX||t.touches.item(0).pageX,time:performance.now()}],y=!0}));var w,b=0;function x(){y&&(v&&(clearTimeout(v),v=void 0),p.decay(s,b),y=!1)}function T(t){var e=o(".hourly-element".concat("today"===t?".heute":".morgen")).eq("today"===t?0:6),n=s,i=e.position().left,r=Math.abs(i-n),a=2e3+2*Math.max(r-800,0);p.fromTo(n,i,a),S(t),u=!0,d||requestAnimationFrame(f)}function S(t){if(!u&&w!==t){w=t;var e="today"===t?lt:st,n="today"===t?ct:ut,i="today"===t?ut:ct;("today"===t?st:lt).addClass("selected"),e.removeClass("selected"),n.addClass("visible"),i.removeClass("visible"),at.toggleClass("hidden","tomorrow"===t)}}pt.on("mousemove touchmove",(function(t){if(y){v&&(clearTimeout(v),v=void 0);var e=100;for(_.push({time:performance.now(),pos:t.pageX||t.touches.item(0).pageX});_.length>2&&_.last().time-_[0].time>e;)_.shift();var n=(_[0].pos-_.last().pos)/(_.length-1),i=(_.last().time-_[0].time)/(_.length-1);p.still(s+n),b=n/i,d||requestAnimationFrame(f),v=setTimeout((function(){b=0}),100)}})),pt.on("mouseup touchend",x),o(".adplace, .kskdDiv, .kskdCls").mouseenter(x),o("#weatherreport-catchline").on("click",(function(){return R()}))}()}var mt="nowcast-gradient",gt="nowcast-mask",vt=(ht=function(t){for(var e=[],n=[],i=50,o=0;o<7;o++){var r=o-3,a=60*(Math.sign(r)*Math.pow(Math.abs(r/3),1.1))/360*2*Math.PI,s=Math.cos(a)*(i-t),l=Math.sin(a)*(i-t),c=i+s,u=i+l-5,h=i+Math.sqrt(Math.pow(i,2)-Math.pow(l,2));e.push([c,u]),n.push([h,u])}return{NowcastMiddleRingPoints:e,NowcastOuterRingPoints:n}}(5600/336/2)).NowcastMiddleRingPoints,yt=ht.NowcastOuterRingPoints;function _t(){return'<svg viewBox="0 0 200 100" class="nowcast-mask-svg">\n                <defs>\n                    <linearGradient id="'.concat(mt,'">\n                        <stop offset="10%" stop-color="#00537f" stop-opacity="1"></stop>\n                        <stop offset="53%" stop-color="#00537f" stop-opacity="0"></stop>\n                    </linearGradient>\n                    <mask id="').concat(gt,'">\n                        <rect x="0" y="0" width="200" height="100" style="fill: rgb(255, 255, 255);"></rect>\n                        <circle cx="50" cy="50" r="50" style="fill: rgb(0, 0, 0);"></circle>\n                    </mask>\n                </defs>\n                ').concat(vt.map((function(t,e){return function(t,e){function n(t){return"url(".concat(location.href,"#").concat(t,")")}return'<rect x="'.concat(t[0],'" y="').concat(t[1],'" width="100" height="').concat(10,'" class="highlighter index-').concat(e,'" style="mask:').concat(n(gt),";fill:").concat(n(mt),'"></rect>')}(t,e)})).join(""),"\n            </svg>")}var wt=n(9821);let bt="prod";n(2871);function xt(){return`https://sky-scene.web-apps-${bt}.wo-cloud.com/`}function Tt(){return xt()+"api/"}function St(t){return Tt()+`v1/${t}`}const Ct={fetchConfig:()=>(0,wt.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield fetch(St("config"));if(!t.ok)throw t;return t.json()})),fetchSymbolMapping:t=>(0,wt.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield fetch(St("mapping?symbol="+t));if(!e.ok)throw e;return e.json()}))};function Mt(){return Ct}function Pt(t){return Tt()+`assets/${t}`}const kt={makeChild:()=>kt,debug:(...t)=>{console.log(...t)},info:(...t)=>{console.log(...t)},warn:(...t)=>{console.warn(...t)},error:(...t)=>{console.error(...t)}},Ot={width:375,height:160},Dt={width:380,height:750},Lt=[Ot,Dt];class At{constructor(t,e,n,i=1){this.r=t,this.g=e,this.b=n,this.a=i}static mix(t,e,n){const i=1-n;return new At(n*e.r+i*t.r,n*e.g+i*t.g,n*e.b+i*t.b,n*e.a+i*t.a)}toFloat(){return[this.r/255,this.g/255,this.b/255]}toVec3(){return`vec3(${this.r/255},${this.g/255},${this.b/255})`}toVec4(){return`vec4(${this.r/255},${this.g/255},${this.b/255},${this.a})`}}class Et{constructor(t,e){this.a=t,this.b=e}static mix(t,e,n){let i,o;return e instanceof Et?(i=e.a,o=e.b):i=o=e,new Et(At.mix(t.a,i,n),At.mix(t.b,o,n))}}const It=new Et(new At(36,131,193),new At(37,132,193)),Rt=new Et(new At(9,26,55),new At(16,58,87)),zt=(new Et(new At(0,0,0),new At(0,0,0)),new Et(new At(136,136,136),new At(160,160,160)),new Et(new At(35,35,35),new At(82,82,82)),new At(255,255,255,1),new At(254,255,187,.97),.5),Nt=.0035,jt=zt;function Bt(t,e){if(t>10)return 0;if(t>jt){return(t-10)/-9.5}if(e)return 1;if((t=Math.min(jt,t+3))>-3.5){return 1-(t-jt)/-4}return 0}function Wt(t){if(t>3)return 0;if(t>zt){return(1-.7)*((t-3)/-2.5)}if(t>-6){return 1-.7+.7*((t-zt)/-6.5)}return 1}const Ft=[[0,1],[1e3,.8],[1e4,.4],[5e4,.3],[1e5,.15]],Ut=[[200,1],[1e3,.15],[2500,0]];function Zt(t,e){let n=0,i=1;for(let o=e.length-1;o>=0;o--)if(t>=e[o][0]){n=o,i=o+1;break}if(i>=e.length)return e[e.length-1][1];const o=e[n],r=e[i],a=(t-o[0])/(r[0]-o[0]);return(s=Yt(o[1],r[1],a))>1?1:s<0?0:s;var s}function Vt(t){return Zt(t,Ft)}function Ht(t){return Zt(t,Ut)}function Yt(t,e,n){return t+n*(e-t)}function qt(t,e){if(t.length<10)return t;const n=Math.ceil(.25*t.length),i=Math.floor(t.length-n),o=Gt(t.slice(i),e),r=Gt(t.slice(0,i),e);for(let t=0;t<n;t++){const e=Math.floor(i*(t+1)/n);r.push(r[e]),r[e]=o[t]}return r}function Gt(t,e){for(let n=t.length-1;n>0;n--){const i=Math.floor(e.get()*(n+1)),o=t[n];t[n]=t[i],t[i]=o}return t}function Xt(t,e,n){return(0,wt.__awaiter)(this,void 0,void 0,(function*(){const i=yield Kt(t);return n.addToTextureManager(e,i)}))}function Qt(t,e,n){return(0,wt.__awaiter)(this,void 0,void 0,(function*(){const i=yield Kt(t);return n.textureManager.add(e,i)}))}function Kt(t){return new Promise(((e,n)=>{const i=new Image;i.onload=()=>(0,wt.__awaiter)(this,void 0,void 0,(function*(){"decode"in i&&(yield i.decode()),e(i)})),i.onerror=()=>n(),i.crossOrigin="Anonymous",i.src=t}))}class $t{static log(t){var e;(null===(e=this.win)||void 0===e?void 0:e.webGLLogger)?this.win.webGLLogger.log(t):console.log(t)}static warn(t){var e;(null===(e=this.win)||void 0===e?void 0:e.webGLLogger)?this.win.webGLLogger.warn(t):console.warn(t)}static error(t){var e;(null===(e=this.win)||void 0===e?void 0:e.webGLLogger)?this.win.webGLLogger.error(t):console.error(t)}}$t.win="undefined"!=typeof window?window:void 0;class Jt{constructor(t,e){this.camera=t,this.gl=e,this.TAG="[WebGL - Scene.ts]",this.currentFrameBuffer="default"}init(){const t=this.gl;t.clearColor(0,0,0,0),t.clearDepth(1e3),t.enable(t.DEPTH_TEST),t.depthFunc(t.ALWAYS),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.lineWidth(2),this.setBackgroundColor(1,0,0,1)}initFramebuffer(){const t=this.gl,e=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,t.createFramebuffer()),t.bindFramebuffer(t.FRAMEBUFFER,null),e}useBlendingMode(t){const e=this.gl;"normal"===t?e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA):"add"===t&&e.blendFunc(e.ONE,e.ONE)}resizeFramebufferTexture(t,e,n){const i=this.gl;i.bindTexture(i.TEXTURE_2D,t),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,n,0,i.RGBA,i.UNSIGNED_BYTE,null)}useFramebuffer(t,e){this.currentFrameBuffer!==e&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.currentFrameBuffer=e)}useDefaultFramebuffer(){"default"!==this.currentFrameBuffer&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.currentFrameBuffer="default")}bindMeshManager(t){this.meshes=t}setBackgroundColor(t,e,n,i){this.gl.clearColor(t,e,n,i),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.clearColor(0,0,0,0)}clear(){const t=this.gl;t.clear(t.COLOR_BUFFER_BIT)}drawOffscreenTexture(t,e){const n=this.gl,i=this.meshes.prg;if(this.meshes.renderReady){i.makeCurrent();try{this.bindCommonUniforms(i);for(const o of this.meshes.geometries)if(0!=o.visible&&!o.deleted){const r=i.uniformLocations.get("uTextureSize");r&&t.size&&n.uniform2fv(r,t.size);const a=i.uniformLocations.get("uTMatrix");if(a&&n.uniformMatrix4fv(a,!1,o.getTransformationMatrix()),e){const t=e.getAllUniforms();t.size>0&&this.bindUniforms(t,i)}if(o.properties){const t=o.properties.getAllUniforms();t.size>0&&this.bindUniforms(t,i)}n.bindVertexArray(o.vao),t.activate(0);const s=i.uniformLocations.get("uSampler0");n.uniform1i(s,0),this.bindTextureSamplers(this.meshes.textureManager.textures,i,1);let l=this.meshes.textureManager.textures.length+1;(null==e?void 0:e.textures.size)>0&&e.textures.forEach((t=>{const e=i.uniformLocations.get(t.samplerName);e&&(t.activate(l),n.uniform1i(e,l),l++)})),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o.ibo),n.drawElements(n.TRIANGLES,o.indices.length,n.UNSIGNED_SHORT,0),n.bindVertexArray(null)}}catch(t){$t.error("[scene.ts] triangles "+t.message)}}}drawTriangles(t){const e=this.gl,n=this.meshes.prg;if(this.meshes.renderReady){n.makeCurrent();try{if(this.bindCommonUniforms(n),t){const e=t.getAllUniforms();e.size>0&&this.bindUniforms(e,n)}const i=this.meshes.textureManager.textures;this.bindTextureSamplers(i,n,0);const o=n.uniformLocations.get("uTMatrix");for(const t of this.meshes.geometries)if(t.visible&&!t.deleted){if(o&&e.uniformMatrix4fv(o,!1,t.getTransformationMatrix()),t.properties){const e=t.properties.getAllUniforms();e.size>0&&this.bindUniforms(e,n)}e.bindVertexArray(t.vao),this.bindTextureSamplers(t.textureManager.textures,n,i.length),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.ibo),e.drawElements(e.TRIANGLES,t.indices.length,e.UNSIGNED_SHORT,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindVertexArray(null)}}catch(t){$t.error("[scene.ts] triangles "+t.message)}}}drawTrianglesInstanced(t){const e=this.gl,n=this.meshes.prg;if(this.meshes.renderReady){n.makeCurrent();try{if(this.bindCommonUniforms(n),t){const e=t.getAllUniforms();e.size>0&&this.bindUniforms(e,n)}if(this.meshes.dataManager.baseMesh.properties){const t=this.meshes.dataManager.baseMesh.properties.getAllUniforms();t.size>0&&this.bindUniforms(t,n)}const i=this.meshes.dataManager;i.update(),e.bindVertexArray(i.VAO),this.linkAttributes(i,n),this.bindTextureSamplers(this.meshes.textureManager.textures,n,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.getIndexBufferObject()),e.drawElementsInstanced(e.TRIANGLES,i.getIndexCount(),e.UNSIGNED_SHORT,0,i.instanceCount),e.bindVertexArray(null)}catch(t){$t.error("[scene.ts] triangles "+t.message)}}}drawPoints(t){const e=this.gl,n=this.meshes.prg;if(this.meshes.renderReady){n.makeCurrent();try{if(this.bindCommonUniforms(n),t){const e=t.getAllUniforms();e.size>0&&this.bindUniforms(e,n)}const i=n.uniformLocations.get("uTMatrix");for(const t of this.meshes.geometries){if(i&&e.uniformMatrix4fv(i,!1,t.getTransformationMatrix()),t.properties){const e=t.properties.getAllUniforms();e.size>0&&this.bindUniforms(e,n)}e.bindVertexArray(t.vao),e.drawArrays(e.POINTS,0,t.vertices.length/3),e.bindVertexArray(null)}}catch(t){$t.error("[scene.ts] points"+t)}}}drawPointsInstanced(t){const e=this.gl,n=this.meshes.prg,i=this.meshes.textureManager.textures;if(this.meshes.renderReady){n.makeCurrent();if(n.usesTextures&&0==this.meshes.textureManager.textures.length)return;try{this.bindCommonUniforms(n);const o=n.uniformLocations.get("uHalfScreenSize");o&&e.uniform2fv(o,[e.canvas.width/2,e.canvas.height/2]);const r=n.uniformLocations.get("uZoomLevel");if(r&&this.camera.zoomLevel&&this.gl.uniform1f(r,this.camera.zoomLevel),this.meshes.dataManager.baseMesh.properties){const t=this.meshes.dataManager.baseMesh.properties.getAllUniforms();t.size>0&&this.bindUniforms(t,n)}let a=0;if(t){const i=t.getAllUniforms();i.size>0&&this.bindUniforms(i,n),t.textures.size>0&&t.textures.forEach((t=>{t.activate(a),e.uniform1i(n.uniformLocations.get(t.samplerName),a),a++}))}this.bindTextureSamplers(i,n,a);const s=this.meshes.dataManager;s.update(),e.bindVertexArray(s.VAO),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s.baseMesh.ibo),this.linkAttributes(s,n),e.drawArraysInstanced(e.POINTS,0,1,s.instanceCount),e.bindVertexArray(null)}catch(t){$t.error("[scene.ts] points"+t)}}}drawLines(t){const e=this.gl,n=this.meshes.prg;if(this.meshes.renderReady){n.makeCurrent();try{if(this.bindCommonUniforms(n),t){const e=t.getAllUniforms();e.size>0&&this.bindUniforms(e,n)}const i=n.uniformLocations.get("uTMatrix");for(const t of this.meshes.geometries){i&&e.uniformMatrix4fv(i,!1,t.getTransformationMatrix());const o=t.properties.getAllUniforms();o.size>0&&this.bindUniforms(o,n),e.bindVertexArray(t.vao),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.libo),e.drawElements(e.LINES,t.lineIndices.length,e.UNSIGNED_SHORT,0),e.bindVertexArray(null)}}catch(t){$t.error("[scene.ts] lines"+t.description)}}}drawLinesInstanced(t){const e=this.gl,n=this.meshes.prg;if(this.meshes.renderReady){n.makeCurrent();try{this.bindCommonUniforms(n);const i=null==t?void 0:t.getAllUniforms();if(i.size>0&&this.bindUniforms(i,n),this.meshes.dataManager.baseMesh.properties){const t=this.meshes.dataManager.baseMesh.properties.getAllUniforms();t.size>0&&this.bindUniforms(t,n)}const o=this.meshes.dataManager;o.update(),e.bindVertexArray(o.VAO),this.linkAttributes(o,n),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.getLineIndexBufferObject()),e.drawElementsInstanced(e.LINES,o.getLineIndexCount(),e.UNSIGNED_SHORT,0,o.instanceCount),e.bindVertexArray(null)}catch(t){$t.error("[scene.ts] lines "+t.description)}}}bindCommonUniforms(t){const e=this.gl,n=t.uniformLocations.get("uMVMatrix");n&&e.uniformMatrix4fv(n,!1,this.camera.getModelView());const i=t.uniformLocations.get("uPMatrix");i&&e.uniformMatrix4fv(i,!1,this.camera.getProjectionMatrix());const o=t.uniformLocations.get("uScale");o&&this.camera.mapScale&&e.uniform1f(o,this.camera.mapScale)}bindUniforms(t,e){t.forEach((t=>{const n=e.uniformLocations.get(t.name);n&&(this.gl[t.data.type](n,t.data.value),t.tainted=!1)}))}bindTextureSamplers(t,e,n){const i=this.gl;t.forEach(((t,o)=>{const r=o+n,a=e.uniformLocations.get("uSampler"+r);if(a){t.activate(r),i.uniform1i(a,r),o++;const n=e.uniformLocations.get("uMarkerSize"+r);n&&t.spriteDimensions&&i.uniform2fv(n,t.spriteDimensions)}}))}linkAttributes(t,e){for(const[n,i]of t.dataCache){const t=e.attributeLocations.get("a"+n);void 0!==t&&-1!==t&&this.useAttributes(i.webGLBuffer,t,i.datalength,!0)}}useAttributes(t,e,n,i){const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),o.enableVertexAttribArray(e),o.vertexAttribPointer(e,n,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),i&&o.vertexAttribDivisor(e,1)}disableAttributes(t,e){for(const[t,n]of e.attributeLocations)-1!==n&&this.gl.disableVertexAttribArray(n)}}class te{static getHighestAvailableWebGLVersion(){if("undefined"==typeof window)return null;const t=document.createElement("canvas");return t.getContext("webgl2")?"webgl2":t.getContext("webgl")?"webgl":null}static getWebGLContext(t,e=this.version,n){let i=null;return"webgl2"===e?i=t.getContext("webgl2",{antialias:!0}):"webgl"===e&&(i=t.getContext("webgl",{antialias:!0}),i.HALF_FLOAT_OES=36193),n.forEach((t=>{this.getAndApplyExtension(i,t)})),i}static highestAvailableWebGLVersion(){return this.version}static getAndApplyExtension(t,e){const n=t.getExtension(e);if(!n)return null;const i=e.split("_")[0],o="_"+i;for(const e in n){const r=n[e],a="function"==typeof r,s=a?i:o;let l=e;e.endsWith(s)&&(l=e.substring(0,e.length-s.length)),void 0!==t[l]?a||t[l]===r||$t.warn(`[getAndApplyExtension] conflict: ${l} ${t[l]} ${r} ${e}`):t[l]=a?function(t){return function(){return t.apply(n,arguments)}}(r):r}return n}static getExtensionAvailability(t,e){return!!t.getExtension(e)}static isWebGLSupported(){return null!==this.version}static isWebGL2(){return"webgl2"===this.version}static getVersion(){return this.version}}te.version=te.getHighestAvailableWebGLVersion();let ee="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function ne(){let t=new ee(16);return ee!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ie(t,e,n){let i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15],_=n[0],w=n[1],b=n[2],x=n[3];return t[0]=_*i+w*s+b*h+x*m,t[1]=_*o+w*l+b*d+x*g,t[2]=_*r+w*c+b*p+x*v,t[3]=_*a+w*u+b*f+x*y,_=n[4],w=n[5],b=n[6],x=n[7],t[4]=_*i+w*s+b*h+x*m,t[5]=_*o+w*l+b*d+x*g,t[6]=_*r+w*c+b*p+x*v,t[7]=_*a+w*u+b*f+x*y,_=n[8],w=n[9],b=n[10],x=n[11],t[8]=_*i+w*s+b*h+x*m,t[9]=_*o+w*l+b*d+x*g,t[10]=_*r+w*c+b*p+x*v,t[11]=_*a+w*u+b*f+x*y,_=n[12],w=n[13],b=n[14],x=n[15],t[12]=_*i+w*s+b*h+x*m,t[13]=_*o+w*l+b*d+x*g,t[14]=_*r+w*c+b*p+x*v,t[15]=_*a+w*u+b*f+x*y,t}function oe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function re(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ae(){let t=new ee(3);return ee!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function se(t,e,n){let i=new ee(3);return i[0]=t,i[1]=e,i[2]=n,i}function le(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){let t=ae()}();class ce extends class{constructor(t,e){this.home=ae(),this.position=ae(),this.mapScale=1,this.mV=ne(),this.nM=ne(),this.pM=ne(),this.width=t,this.height=e}get zoomLevel(){return this._zoomLevel}set zoomLevel(t){this._zoomLevel=t}calculateModelView(){var t=oe(ne(),this.home);this.mV=ie(ne(),ne(),t)}calculateNormalMatrix(){this.nM=ne(),this.nM=function(t,e){let n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=n*s-i*a,_=n*l-o*a,w=n*c-r*a,b=i*l-o*s,x=i*c-r*s,T=o*c-r*l,S=u*m-h*f,C=u*g-d*f,M=u*v-p*f,P=h*g-d*m,k=h*v-p*m,O=d*v-p*g,D=y*O-_*k+w*P+b*M-x*C+T*S;return D?(D=1/D,t[0]=(s*O-l*k+c*P)*D,t[1]=(o*k-i*O-r*P)*D,t[2]=(m*T-g*x+v*b)*D,t[3]=(d*x-h*T-p*b)*D,t[4]=(l*M-a*O-c*C)*D,t[5]=(n*O-o*M+r*C)*D,t[6]=(g*w-f*T-v*_)*D,t[7]=(u*T-d*w+p*_)*D,t[8]=(a*k-s*M+c*S)*D,t[9]=(i*M-n*k-r*S)*D,t[10]=(f*x-m*w+v*y)*D,t[11]=(h*w-u*x-p*y)*D,t[12]=(s*C-a*P-l*S)*D,t[13]=(n*P-i*C+o*S)*D,t[14]=(m*_-f*b-g*y)*D,t[15]=(u*b-h*_+d*y)*D,t):null}(this.nM,this.mV),this.nM=function(t,e){if(t===e){let n=e[1],i=e[2],o=e[3],r=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}(this.nM,this.nM)}setHome(t){this.home=this.position=t}getModelView(){return this.mV}getNormalMatrix(){return this.nM}getProjectionMatrix(){return this.pM}setProjectionMatrix(t){this.pM=t}go2Position(t,e,n){this.position=se(t,e,n);var i=oe(ne(),this.position);this.mV=ie(ne(),ne(),i)}translate(t,e){this.position=le(ae(),this.position,se(t,e,0));var n=oe(ne(),this.position);this.mV=ie(ne(),ne(),n)}scale(t){var e=re(ne(),se(t,t,1));this.mV=ie(ne(),this.mV,e)}zoom(t){this.go2Position(this.position[0],this.position[1],t)}}{constructor(t,e,n,i){super(t,e),this.mapScale=1,this.near=.1,this.far=1e4,this.fovy=n,this.homeZoom=this.fullSizeZoom=e/2/Math.tan(n/2*Math.PI/180),this.setHome(se(i[0],i[1],-this.fullSizeZoom)),this.init()}init(){this.calculateModelView(),this.calculateProjection(),this.calculateNormalMatrix()}calculateProjection(){this.setProjectionMatrix(function(t,e,n,i,o){let r,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(r=1/(i-o),t[10]=(o+i)*r,t[14]=2*o*i*r):(t[10]=-1,t[14]=-2*i),t}(ne(),this.fovy*Math.PI/180,this.width/this.height,this.near,this.far))}reSize(t,e){this.width=t,this.height=e,this.homeZoom=this.fullSizeZoom=e/2/Math.tan(this.fovy/2*Math.PI/180),this.setHome(se(this.position[0],this.position[1],-this.homeZoom)),this.init()}}n(5888);class ue{constructor(){this.uniforms=new Map,this.textures=new Map}getUniform(t){return this.uniforms.get(t)}getAllUniforms(){return this.uniforms}addUniformNumber(t,e,n){this.addUniform(t,{value:e,type:n})}addUniformNumberArray(t,e,n){this.addUniform(t,{value:e,type:n})}addUniformFloat32Array(t,e,n){this.addUniform(t,{value:e,type:n})}addUniformInt32Array(t,e,n){this.addUniform(t,{value:e,type:n})}addUniform(t,e){this.uniforms.set(t,{name:t,data:e,tainted:!0})}setUniformNumber(t,e){this.setUniform(t,e)}setUniformNumberArray(t,e){this.setUniform(t,e)}setUniformFloat32Array(t,e){this.setUniform(t,e)}setUniformInt32Array(t,e){this.setUniform(t,e)}setUniform(t,e){const n=this.uniforms.get(t);n&&(n.data.value=e,n.tainted=!0)}}class he{constructor(t,e,n,i,o){this.gl=t,this.name=e,this.samplerName=n,this.size=i,this.spriteDimensions=o,this.isWebGl2=!(this.gl instanceof WebGLRenderingContext)}getTexture(){return this.tex}getImageData(){return this.imageData}activate(t){const e=this.gl;e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.tex)}attachToFrameBuffer(t){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.tex,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}}class de extends he{init(t="LINEAR",e){const n=this.gl;if(this.imageData=e,this.size||(this.size=[this.imageData.width,this.imageData.height]),this.tex=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.tex),this.isWebGl2){const[t,e]=this.size;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,this.imageData)}else n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.imageData);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n[t]),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null)}resize(t,e){}swapImage(t){const e=this.gl;this.imageData=t,this.size=[t.width,t.height],e.bindTexture(e.TEXTURE_2D,this.tex),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}setWrappingMode(t){const e=this.gl;e.bindTexture(e.TEXTURE_2D,this.tex),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e[t]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e[t])}}class pe{constructor(t){this.gl=t,this.textures=[]}add(t,e,n,i){const o=new de(this.gl,t,void 0,n,i);return o.init("LINEAR",e),this.textures.find((e=>e.name===t))&&$t.error(`texture with key ${t} does already exist!`),this.textures.push(o),o}removeAll(){this.textures.forEach((t=>this.gl.deleteTexture(t.getTexture()))),this.textures=[]}remove(t){const e=this.textures.findIndex((e=>e.name===t));e>-1?(this.gl.deleteTexture(this.textures[e].getTexture()),this.textures.splice(e,1)):$t.error(`couldn't remove texture with name: ${t}`)}getTexture(t){const e=this.textures.find((e=>e.name===t));return e||($t.warn("no texture with name: "+t),null)}changeTexture(t,e){try{const n=this.textures.filter((e=>e.name===t));1!==n.length&&($t.error(`Unexpected length of textures for key! Expected: 1, Was: ${n.length}`),$t.log(this.textures)),n[0].swapImage(e)}catch(e){$t.warn(`no texture with name: ${t} - ${e}`)}}activateTexture(t,e){return this.getTexture(t).activate(e),this}}class fe{constructor(t,e="",n=!0){this.gl=t,this.name=e,this.visible=!0,this.vao=null,this.bufferObjects=new Map,this.ibo=null,this.libo=null,this.properties=new ue,this.tM=ne(),this.deleted=!1,this.textureManager=new pe(t),this.tM=ne(),!0===n&&(this.vao=t.createVertexArray())}destroy(){const t=this.gl;t.deleteVertexArray(this.vao),t.deleteBuffer(this.ibo),t.deleteBuffer(this.libo),this.deleted=!0}bindBufferData(t,e,n){const i=this.gl;i.bindVertexArray(this.vao);const o=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,o),i.bufferData(i.ARRAY_BUFFER,t,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindVertexArray(null),this.bufferObjects.set(n,{datalength:e,webGLBuffer:o})}bindIndices(t){const e=this.gl;e.bindVertexArray(this.vao),this.ibo=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ibo),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindVertexArray(null)}bindLineIndices(t){const e=this.gl;this.libo=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.libo),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}linkAttributes(t){for(const[e,n]of this.bufferObjects){const i=t.attributeLocations.get("a"+e);if(void 0!==i&&-1!==i){const t=this.gl;t.bindVertexArray(this.vao),t.bindBuffer(t.ARRAY_BUFFER,n.webGLBuffer),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,n.datalength,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}}}setTransformationMatrix(t){this.tM=t}getTransformationMatrix(){return this.tM}setPosition(t,e,n){const i=this.position=se(t,e,n),o=oe(ne(),i);this.setTransformationMatrix(o);const r=re(ne(),this.geometryScale);this.setTransformationMatrix(ie(ne(),this.getTransformationMatrix(),r))}translate(t,e,n){const i=se(t,e,n),o=oe(ne(),i);this.setTransformationMatrix(ie(ne(),o,this.getTransformationMatrix())),this.position=le(ae(),this.position,i)}scale(t,e,n){this.geometryScale=se(this.geometryScale[0]*t,this.geometryScale[1]*e,this.geometryScale[2]*n);const i=re(ne(),se(t,e,n));this.setTransformationMatrix(ie(ne(),this.getTransformationMatrix(),i))}setScale(t,e,n){const i=oe(ne(),this.position);this.setTransformationMatrix(i);const o=this.geometryScale=se(t,e,n),r=re(ne(),o);this.setTransformationMatrix(ie(ne(),this.getTransformationMatrix(),r))}}class me extends fe{constructor(t,e,n=""){super(t,n),this.init(e),this.properties.addUniformNumberArray("uColor",[1,0,1,1],"uniform4fv"),this.properties.addUniformNumber("uPointSize",1,"uniform1f")}init(t){this.vertices=t;let e=[];for(var n=0;n<t.length/3;n++)e.push(n);this.indices=new Int32Array(e)}bindData(){this.bindBufferData(this.vertices,3,"VertexPosition"),this.bindIndices(this.indices)}}class ge extends fe{constructor(t,e,n,i,o="",r){super(t,o),this.texturePointer=r,this.geometryScale=se(1,1,1),this.width=e,this.height=n,this.init(),this.position=se(i[0],i[1],i[2]),this.translate(i[0],i[1],i[2]),this.properties.addUniformNumber("uFade",1,"uniform1f"),this.properties.addUniformNumberArray("uColor",[1,0,1,1],"uniform4fv")}init(){let t=this.width/2;const e=this.height/2;this.vertices=new Float32Array([-t,-e,0,-t,e,0,t,e,0,t,-e,0]),this.indices=new Int32Array([0,1,2,0,2,3]),this.indexCount=this.indices.length,this.uvs=new Float32Array([0,1,0,0,1,0,1,1]),this.lineIndices=new Int32Array([0,1,1,2,2,3,3,0]),this.lineIndexCount=this.lineIndices.length}setUVs(t){this.uvs=new Float32Array(t),this.bindBufferData(this.uvs,2,"VertexTextureCoords")}bindData(){this.bindBufferData(this.vertices,3,"VertexPosition"),this.bindBufferData(this.uvs,2,"VertexTextureCoords"),this.bindIndices(this.indices),this.bindLineIndices(this.lineIndices)}setOpacity(t){this.properties.setUniformNumber("uFade",t)}setColor(t,e,n,i=1){this.properties.setUniformNumberArray("uColor",[t,e,n,i])}}class ve{constructor(t,e="",n){this.gl=t,this.name=e,this.geometryScale=[1,1,1],this.attributes=new Map,n&&(this.attributes.set("VertexTranslate",n),this.position=n)}setOpacity(t){if(this.opacity=t,this.attributes.set("Opacity",[t]),this.manager){this.manager.dataManager.setInstanceData(this,[t],"Opacity")}}translate(t){const[e,n,i=0]=t;if(this.position=[this.position[0]+e,this.position[1]+n,this.position[2]+i],this.attributes.set("VertexTranslate",this.position),this.manager){this.manager.dataManager.setInstanceData(this,this.position,"VertexTranslate")}}setPosition(t){const[e,n,i=0]=t;if(this.position=[e,n,i],this.attributes.set("VertexTranslate",this.position),this.manager){this.manager.dataManager.setInstanceData(this,this.position,"VertexTranslate")}}scale(t){const[e,n,i=1]=t;if(this.geometryScale=[this.geometryScale[0]*e,this.geometryScale[1]*n,this.geometryScale[2]*i],this.attributes.set("VertexScale",this.geometryScale),this.manager){this.manager.dataManager.setInstanceData(this,this.geometryScale,"VertexScale")}}setScale(t){const[e,n,i=1]=t;if(this.geometryScale=[e,n,i],this.attributes.set("VertexScale",this.geometryScale),this.manager){this.manager.dataManager.setInstanceData(this,this.geometryScale,"VertexScale")}}}class ye extends ve{constructor(t,{position:e,name:n,speed:i,rotation:o,size:r,opacity:a}){super(t,n,e),this.attributes.set("Opacity",[a]),this.attributes.set("Speed",i),this.attributes.set("Rotation",o),this.attributes.set("Size",[r])}newBaseMesh(){return new me(this.gl,new Float32Array([0,0,0]))}}class _e{constructor(t,e){this.name=t,this.dataLength=e,this.cachedList=void 0,this.data=new Map}get update(){return void 0===this.cachedList}set(t,e){if(e.length!==this.dataLength)throw Error(`invalid arr length - expected: ${this.dataLength} but was: ${e.length}`);this.data.set(t,e),this.clearCache()}remove(t){this.data.delete(t),this.clearCache()}clearCache(){this.cachedList=void 0}get(){if(!this.cachedList){this.cachedList=new Float32Array(this.data.size*this.dataLength);const t=[...this.data.values()],e=[].concat(...t);this.cachedList.set(e,0)}return this.cachedList}}class we{constructor(t,e){this.VAO=null,this.instanceCount=0,this.dataCache=new Map,this.gl=e}addInstance(t){return this.instanceCount++,t.attributes.forEach(((e,n)=>{let i=this.dataCache.get(n);if(!i){const t=this.gl.createBuffer();i={datalength:e.length,webGLBuffer:t,float32ArrCache:new _e(n,e.length)},this.dataCache.set(n,i)}i.float32ArrCache.set(t,e)})),this}addBaseMesh(t,e){t.bindData(),t.linkAttributes(e),this.VAO=t.vao,this.baseMesh=t}removeInstance(t){let e=!1;return t.attributes.forEach(((n,i)=>{const o=this.dataCache.get(i);o?(o.float32ArrCache.remove(t),e=!0):$t.error(`failed to remove instance ${t.name}`)})),e&&this.instanceCount--,this}setInstanceData(t,e,n){const i=this.dataCache.get(n);return null==i||i.float32ArrCache.set(t,e),this}update(){for(const t of this.dataCache.values())t.float32ArrCache.update&&this.linkDataToBuffer(t.webGLBuffer,t.float32ArrCache.get());return this}clearData(){var t;null===(t=this.baseMesh)||void 0===t||t.destroy();for(const t of this.dataCache.values())this.gl.deleteBuffer(t.webGLBuffer);return this.dataCache=new Map,this}linkDataToBuffer(t,e){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this}getIndexCount(){var t;return null===(t=this.baseMesh)||void 0===t?void 0:t.indices.length}getIndexBufferObject(){var t;return null===(t=this.baseMesh)||void 0===t?void 0:t.ibo}getLineIndexCount(){var t;return null===(t=this.baseMesh)||void 0===t?void 0:t.lineIndices.length}getLineIndexBufferObject(){var t;return null===(t=this.baseMesh)||void 0===t?void 0:t.libo}}class be{constructor(t,e,n,i){this.name=e,this.prg=n,this.textured=i,this.instanceReady=!1,this.textureReady=!1,this.renderReady=!1,this.dataManager=new we(e,t),this.textureManager=new pe(t),this.textureReady=!this.textured}add(t){for(let e=0;e<t.length;e++){const n=t[e];this.instanceReady||(this.dataManager.addBaseMesh(n.newBaseMesh(),this.prg),this.instanceReady=!0,this.syncReadyState()),this.dataManager.addInstance(n),n.manager=this}return this}addToTextureManager(t,e,n,i){const o=this.textureManager.add(t,e,n,i);return this.textureReady=!0,this.syncReadyState(),o}syncReadyState(){this.renderReady=this.textureReady&&this.instanceReady}remove(t){for(const e of t)this.dataManager.removeInstance(e);return this}removeAll(){return this.dataManager.clearData(),this.renderReady=!1,this}removeAllTextures(){return this.textureManager.removeAll(),this.renderReady=!1,this}isEmpty(){return this.dataManager.instanceCount<=0}setProgram(t){this.prg!=t&&(this.prg=t),this.dataManager.baseMesh&&this.dataManager.baseMesh.linkAttributes(t)}}const xe={map_fs:"\n\nuniform sampler2D uSampler0;\nuniform float uFade;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    vec4 map = texture(uSampler0, vTextureCoord);\n    vec4 color = vec4(map.rgb*uFade, uFade);\n    FragColor = color;\n}\n",marker_fs:"\n\nuniform sampler2D uSampler0;\nuniform float uFade;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n\n    vec4 marker = texture(uSampler0, vTextureCoord);\n    // vec4 marker = texture(uSampler0, vTextureCoord+vec2(0.5/360., 0.5/560.));\n    vec4 color = mix(vec4(0.), marker, marker.a);\n    color = color*uFade;\n    FragColor = color;\n}\n",marker_wohome_fs:"\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nconst vec2 center = vec2(.5);\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    float d = distance(vTextureCoord, center);\n    float m0 = smoothstep(0.503,0.6, 1.0- d);\n    vec4 shadow = vec4(0.08)*m0;\n\n    float m1 = smoothstep(0.7, 0.8, 1.-d);\n    vec4 outerCircle = vec4(1.)*m1;\n\n    float m2 = smoothstep(0.79, 0.85, 1.-d);\n    vec4 innerCircle = vec4(1.,0.,0.,1.0)*m2;\n\n    vec4 color = mix(shadow, mix(outerCircle, innerCircle, innerCircle.a), outerCircle.a);\n    FragColor = color;\n}\n",instanced_map_fs:"\nprecision highp sampler2DArray;\n\nuniform sampler2DArray uSampler0;\nuniform float uFade;\n\nin vec2 vTextureCoord;\nflat out int vTextureSlice;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    vec4 map=texture(uSampler0, vec3(vTextureCoord, vTextureSlice));\n    vec4 color = vec4(map.rgb*uFade, uFade);\n    FragColor = map;\n}\n",uniform_color_fs:"\nuniform vec4 uColor;\n\nout vec4 FragColor;\n\nvoid main(void){\n    FragColor=uColor;\n}\n",uniform_color_text_fs:"\nin vec4 vColor;\nout vec4 FragColor;\n\nvoid main(void){\n    FragColor=vColor;\n}\n",text_fs:"\n#extension GL_OES_standard_derivatives : enable\n\nuniform sampler2D uSampler0;\nuniform float uFade;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nconst float minThreshold = 0.0312;\nconst float maxThreshold = 0.125;\nconst int samples = 9;\n\nmat2 transposeMat2(mat2 m){\n    return mat2(m[0][0], m[1][0], m[0][1], m[1][1]);\n}\n\nvec4 AA(){\n\n    float startSample=-4.0;\n\n    vec2 boundingBox = fwidth(vTextureCoord);\n    vec2 offset = boundingBox/9.0;\n    vec2 texPosition = offset*startSample;\n\n    //jacobian and inverse jacobian\n    mat2 J = transposeMat2(mat2(dFdx(vTextureCoord), dFdy(vTextureCoord)));\n    mat2 invJ = mat2(J[1][1], -J[0][1], -J[1][0], J[0][0]/(J[0][0]*J[1][1]-J[1][0]*J[0][1]));\n\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    float n = 0.0;\n\n    for(int i = 0; i<samples; i++){\n        texPosition.x += offset.x;\n        texPosition.y += offset.y;\n\n        for(int j = 0; j<samples; j++){\n            texPosition.y += offset.y;\n            vec2 test = abs(invJ*texPosition);\n\n            if(test.x<0.5 && test.y<0.5){\n                n++;\n                color+=texture(uSampler0, vTextureCoord+texPosition);\n            } \n        }\n    }\n    color = color/n;\n    return color;\n}\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    vec4 color = AA()*uFade;\n    // vec4 color=texture(uSampler, vTextureCoord);\n    FragColor = color;\n}\n",signed_distance_field_text_fs:"\n\nuniform sampler2D uSampler0;\nuniform float uFade;\n\nin float vOpacity;\nin vec2 vGlyphCoords;\n\nconst float edgeMin = .55;\nconst float edgeMax = .78;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n\n    float glyphMask = texture(uSampler0, vGlyphCoords).r;\n\n    float f= smoothstep(edgeMax, edgeMin, glyphMask);\n    vec4 color = mix(vec4(1.), vec4(0., 0., 0., 1.0), f);\n\n    float blend = smoothstep(0.65, 0.4, glyphMask);\n    color = mix(color, vec4(0.0, 0.0, 0.0, 0.0), blend*vOpacity);\n\n    FragColor = color;\n}\n",selection_Box_fs:"\n\nuniform vec4 uColor;\nout vec4 FragColor;\n\nconst vec3 color = vec3(1., 1., 1.);\nconst float alpha = 0.6;\n\nvoid main(void){\n\n    FragColor = vec4(color*alpha, alpha);\n}\n",rain_fs:"\n\nuniform sampler2D uSampler0;\nuniform float uFade;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    vec4 map = texture(uSampler0, vTextureCoord);\n    vec4 color = vec4(map.rgb*uFade, uFade);\n    FragColor = color;\n}\n",city_location_fs:"\nprecision highp float;\n\nuniform float uPointSize;\nuniform vec2 uScreenSize;\n\nin float vOpacity;\nin vec2 vPosition;\n\nout vec4 FragColor;\n\nvoid main(void){\n    //gl_PointCoord returns wrong values on some gpus so we derive them from the fragCoords\n    vec2 pointCenter = (vPosition+1.)*0.5; // [-1, 1] --\x3e  in range[0, 1]\n    // [0, uScreenSize] --\x3e  in range [pointCenter-(pointSize/screenSize)/2, pointCenter+(pointSize/screenSize)/2]\n    vec2 fragmentPosition = gl_FragCoord.xy/uScreenSize; \n    //find the difference between the fragments screen position and the points screen position and scale it by\n    //the range of the fragmentPosition to [-0.5, 0.5] and finally shift to [0, 1]\n    vec2 pointCoord = (fragmentPosition-pointCenter)*(uScreenSize/uPointSize)+0.5; \n\n    float left = smoothstep(0., 0.3, pointCoord.s);\n    float right = smoothstep(1., 0.7, pointCoord.s);\n    float bottom = smoothstep(0., 0.3, pointCoord.t);\n    float top = smoothstep(1., 0.7, pointCoord.t);\n    \n    FragColor=vec4(vec3(left*bottom*right*top)*vOpacity, vOpacity);\n}\n",rgb_signed_distance_field_text_fs:"\n\nuniform sampler2D uSampler0;\nuniform float uFade;\n\nin float vOpacity;\nin vec2 vTextureCoords;\nin vec2 vTextureOffset;\nin vec2 vGlyphSize;\n\nconst float innerEdgeMin = 0.3;\nconst float innerEdgeMax = 0.9;\nconst float outerEdgeMin = 0.6;\nconst float outerEdgeMax = 0.2;\n\nout vec4 FragColor;\n\nfloat median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n}\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    vec2 st = (vGlyphSize*vec2(1./512.0))*vTextureCoords+(vTextureOffset*vec2(1./512.0));\n    vec4 tex = texture(uSampler0, st);\n    float glyphMask = median(tex.r, tex.g, tex.b);\n\n    float f= smoothstep(innerEdgeMax, innerEdgeMin, glyphMask);\n    vec4 color = mix(vec4(1.0), vec4(.1,.1,.1, 1.0), f);\n\n    float blend = smoothstep(outerEdgeMin, outerEdgeMax, glyphMask+0.25);\n    color = mix(color, vec4(0.0), blend);\n    color*=vOpacity;\n\n    FragColor = color;\n}\n",point_sdf_text_fs:"\nuniform sampler2D uSampler0;\nuniform vec2 uEdge;\nuniform float uPointSize;\nuniform vec2 uScreenSize;\n\nin vec2 vScale;\nin mat2 vUvTransform;\nin mat2 vTextureTransform;\nin vec3 vColor;\nin vec2 vPosition;\n\nout vec4 FragColor;\n\n\n//leer haupt leer @ paul irgendwann 2018\nvoid main(void){\n    //gl_PointCoord returns wrong values on some gpus so we derive them from the fragCoords\n    vec2 pointCenter = (vPosition+1.)*0.5; // [-1, 1] --\x3e  in range[0, 1]\n    // [0, uScreenSize] --\x3e  in range [pointCenter-(pointSize/screenSize)/2, pointCenter+(pointSize/screenSize)/2]\n    vec2 fragmentPosition = gl_FragCoord.xy/uScreenSize; \n    //find the difference between the fragments screen position and the points screen position and scale it by\n    //the range of the fragmentPosition to [-0.5, 0.5] and finally shift to [0, 1]\n    vec2 pointCoord = (fragmentPosition-pointCenter)*(uScreenSize/uPointSize)+0.5; \n    pointCoord.y = 1.-pointCoord.y;\n\n    //da unsere buchstaben keine dreicke sonder punkte sind kÃ¶nnen wir gl_pointcoord als texturcoordinaten nehmen\n    vec2 uv = pointCoord;\n     \n    //transformiere die texturcoordinaten fÃ¼r kleinere fontsize\n    vec2 uvT= (pointCoord-vUvTransform[1])*vUvTransform[0];\n    vec2 st = vTextureTransform[0]*uvT+vTextureTransform[1];\n    \n    float glyphMask = texture(uSampler0, st).r;\n\n    //fÃ¤rbe die punkte innen weiÃ und alles auÃer den punkte schwarz. dabei wird der buchstabe etwas kleiner gerendert, \n    //damit im nÃ¤chsten schritt die outline entstehen kann\n    float f= smoothstep(uEdge.x, uEdge.y, glyphMask*1.92);\n    vec4 color = mix(vec4(0.), vec4(vColor,1.0), f);\n\n    //berechnet die grenzen der buchstaben innerhalb der quadratischen grenzen\n    //values for right, left, top, bottom borders of glyph in point\n    vec4 bounds = step(vec4(uv.s, 0.5-vScale.s, uv.t, 0.5-vScale.t), vec4(0.5+vScale.s, uv.s, 0.5+vScale.t, uv.t));\n\n    //schneidet alles ausserhalb der grenzen weg\n    FragColor = color*bounds.r*bounds.g*bounds.b*bounds.a;\n}\n",sun_fs:"\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nconst vec2 center = vec2(.5);\nconst float PI = 3.1415926538;\n\nfloat ray(float a){\n    mat2 rot = mat2(cos(a), -sin(a), sin(a), cos(a));\n    vec2 st = (vTextureCoord*2.-1.)*rot;\n    return smoothstep(0.98, 1., cos(st.s*PI));\n}\n\nfloat rayEdge(float a){\n    mat2 rot = mat2(cos(a), -sin(a), sin(a), cos(a));\n    vec2 st = (vTextureCoord*2.-1.)*rot;\n    return smoothstep(0.85, 0.99, cos(st.s*PI));\n}\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    float d = distance(vTextureCoord, center);\n    float rayEdgeOut = smoothstep(.52, .56, 1.-d);\n    float rayEdgeIn = smoothstep(0.27, 0.31, d);\n\n    float rayShadowOut = smoothstep(.5, .56, 1.-d);\n    float rayShadowIn = smoothstep(0.25, 0.31, d);\n    float sun = smoothstep(0.76, .82, 1.-d);\n    float sunShadow = smoothstep(0.75, .78, 1.-d);\n\n    float stripes = ray(PI)+ray(PI/2.)+ray(PI/3.)+ray(PI/6.)+ray(PI/-3.)+ray(PI/-6.);\n    float stripeShadows = rayEdge(PI)+rayEdge(PI/2.)+rayEdge(PI/3.)+rayEdge(PI/6.)+rayEdge(PI/-3.)+rayEdge(PI/-6.);\n    float shadow = stripeShadows*rayShadowIn*rayShadowOut+sunShadow;\n    float rays= stripes*rayEdgeIn*rayEdgeOut;\n    FragColor = ((rays+sun)*vec4(1., 0.8, 0., 1.0)) +shadow*vec4(0.2, 0.2, 0.2, 0.7);\n}\n",moon_fs:"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nconst vec2 center = vec2(.41, .5);\nconst vec2 center2 = vec2(.1, .42);\nconst float PI = 3.1415926538;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    float d = distance(vTextureCoord, center);\n    float d2 = distance(vTextureCoord, center2);\n\n    float circle = smoothstep(0.58, 0.65, 1.-d);\n    float circle2 = smoothstep(0.6, .53, 1.-d2);\n    float moon =circle*circle2;\n\n    float circleSH = smoothstep(0.55, 0.6, 1.-d);\n    float circleSH2 = smoothstep(0.65, .58, 1.-d2);\n    float shadow =circleSH*circleSH2;\n\n    FragColor = moon*vec4(1., 0.87, 0., 1.0)+shadow*vec4(0.2, 0.2, 0.2, 0.7);\n}\n",snow_fs:"\n\nuniform sampler2D uSampler0;\n\nout vec4 FragColor;\n\nconst vec2 center = vec2(.5);\nconst float PI = 3.1415926538;\n\nfloat ray(float a){\n    mat2 rot = mat2(cos(a), -sin(a), sin(a), cos(a));\n    vec2 st = (gl_PointCoord*2.-1.)*rot;\n    return smoothstep(0.97, 1., cos(st.s*PI));\n}\n\nfloat rayShadow(float a){\n    mat2 rot = mat2(cos(a), -sin(a), sin(a), cos(a));\n    vec2 st = (gl_PointCoord*2.-1.)*rot;\n    return smoothstep(0.8, 1., cos(st.s*PI));\n}\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    float d = distance(gl_PointCoord, center);\n    float rayEdge= smoothstep(.8, .86, 1.-d);\n    float rayShadowEdge = smoothstep(.76, .8, 1.-d);\n\n    float stripes = ray(PI/2.)+ray(PI/6.)+ ray(PI/-6.);\n    float stripeShadows = rayShadow(PI/2.)+rayShadow(PI/5.)+rayShadow(PI/-5.);\n    float rays= stripes*rayEdge;\n    float shadows= stripeShadows*rayShadowEdge;\n    //star = sin(6t)+2;\n    FragColor = vec4(1.)*rays+vec4(.3, .3, .3, 0.7)*shadows;\n}\n",texture_to_screen_fs:"\n\nuniform sampler2D uSampler0;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    FragColor = texture(uSampler0, vTextureCoord);\n}\n",wind_fs:"\nin float vOpacity;\nout vec4 FragColor;\n\nvoid main(void){\n    FragColor=vec4(1., vOpacity, 1., 1.);\n}\n",particle_trace_fs:"\n\nuniform sampler2D uSampler0;\nuniform float uDissolvingFactor;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    // vec4 tex = texture(uSampler0, vTextureCoord)-0.006;\n    vec4 tex = texture(uSampler0, vTextureCoord)-uDissolvingFactor;\n    FragColor = tex;\n\n}\n",wind_update_fs:"\nin vec4 vParticleData;\n\nout vec4 FragColor;\n\nvoid main(void){\n    FragColor=vParticleData;\n}\n",particle_to_screen_fs:"\n\nuniform sampler2D uSampler0;\n//in this case either 1 or 0\nuniform float uFade;\nuniform vec2 uTextureSize;\n\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nconst int KERNEL_SIZE = 1;\n\n//n is kernelsize\nvec2 smoothTexel(){\n    vec2 step = 1./uTextureSize;\n\n    vec4 sum = vec4(0.);\n    for(int i = -KERNEL_SIZE; i<=KERNEL_SIZE; i++){\n        float fi=float(i);\n        for(int j=-KERNEL_SIZE; j<=KERNEL_SIZE; j++){\n            vec4 tex = texture(uSampler0, vTextureCoord+vec2(step.s*fi, step.t*float(j)));\n            sum+= tex;\n        }\n    }\n    float x = float(KERNEL_SIZE*2+1);\n    return sum.rg/pow(x, 2.);\n}\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    //texture channels: r--\x3ecolor, g--\x3eopacity\n    vec4 tex = texture(uSampler0, vTextureCoord);\n    vec2 smoothTex = smoothTexel();\n    vec4 color = vec4(vec3(smoothTex.r),smoothTex.g);\n   \n    FragColor = color*tex.g*uFade;\n}\n",wind_debug_fs:"\nin vec2 vTextureCoord;\nuniform sampler2D uSampler0;\n\nout vec4 FragColor;\n\nvoid main(void){\n    \n    FragColor=texture(uSampler0, vTextureCoord);\n}\n",lightning_fs:"\n\nuniform float uZoomLevel;\n\nin vec3 vColor;\nin float vCoronaOpacity;\nin float vDotOpacity;\nin float vCoronaSize;\n//boundaries for rendering of lighning dot , .r--\x3einside max, g.--\x3einside min,\n//.b --\x3eshadow max, a--\x3eshadow min\nin vec4 vDotSize;\n\nout vec4 FragColor;\n\nconst vec2 center = vec2(.5);\nconst float PI = 3.1415926538;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n   float d = distance(gl_PointCoord, center);\n\n   //animated corona effect\n   float inside = smoothstep(vCoronaSize - .2, vCoronaSize - .1, d);\n   float outside = smoothstep(vCoronaSize, vCoronaSize - .1, d);\n   vec4 corona = vec4(1.) * inside * outside * vCoronaOpacity;\n\n   //animated dots\n   float edge= smoothstep(vDotSize.r, vDotSize.g, d);\n   vec4 innerDot = vec4(vColor, 1.)*edge;\n   float shadow = smoothstep(vDotSize.b, vDotSize.a, d);\n   vec4 dot = mix(vec4(.2, .2, .2, .9)*shadow, innerDot, innerDot.a)*vDotOpacity;\n   \n   vec4 color = dot;\n   if(uZoomLevel<7.){\n      color = mix(corona, dot, dot.a);\n   }\n\n   FragColor = color;\n   \n}\n",webcam_marker_fs:"\nuniform sampler2D uSampler0;\nuniform sampler2D uSampler1;\n\nin vec2 vTextureCoord;\nin float vSamplerId;\n\nout vec4 FragColor;\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n    vec4 marker = vec4(0.);\n    if(vSamplerId==0.){\n        marker = texture(uSampler0, vTextureCoord);\n    }\n    else{\n        marker = texture(uSampler1, vTextureCoord);\n    }\n    vec4 color = mix(vec4(0.), marker, marker.a);\n    FragColor = color;\n}\n",webcam_picking_fs:"\nin vec3 vColor;\nin vec2 vTextureCoord;\n\nuniform sampler2D uSampler0;\nout vec4 FragColor;\n\nvoid main(void){\n    float mask = step(0.9, texture(uSampler0, vTextureCoord).a);\n    FragColor=vec4(vColor, 1.)*mask;\n}\n",animated_webcam_marker_fs:"\n\nuniform sampler2D uSampler0;\nuniform sampler2D uSampler1;\n\nin vec2 vTextureCoord;\nin float vOpacity;\nin float vSize;\nin float vSamplerId;\n\nout vec4 FragColor;\n\nconst vec2 center = vec2(.5);\n\n\n//leer haupt leer @paul 22.8.2018\nvoid main(void){\n\n    vec4 marker = vec4(0.);\n    if(vSamplerId==0.){\n        marker = texture(uSampler0, vTextureCoord*2.-0.5);\n    }\n    else{\n        marker = texture(uSampler1, vTextureCoord*2.-0.5);\n    }\n\n    vec4 color = mix(vec4(0.), marker, marker.a);\n\n    float d = distance(vTextureCoord*vec2(1., 2.)-vec2(0.,0.85), center);\n    float inside = smoothstep(vSize - .07, vSize - .03, d);\n    float outside = smoothstep(vSize, vSize - .04, d);\n    vec4 ring = vec4(1.) * inside * outside * vOpacity;\n\n    FragColor = mix(ring, color, color.a);\n}\n"},Te={map_vs:"\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n\n   vTextureCoord = aVertexTextureCoords;\n   gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",marker_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n    vTextureCoord = aVertexTextureCoords;\n    gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",marker_wohome_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n    vTextureCoord = aVertexTextureCoords;\n    gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",uniform_color_vs:"\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\n\nvoid main(void) {\n   gl_PointSize = 10.0;\n   gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",uniform_color_text_vs:"\n\nin vec3 aVertexPosition;\nin vec2 aTextOrigin;\nin vec2 aTextOffset;\nin vec3 aPickingColor;\nin vec2 aGlyphPosition;\nin float aGeometryZoom;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uScale;\nuniform float uZoomLevel;\nuniform float uPointSize;\n\nout vec4 vColor;\n\n\nvoid main(void) {\n   //Alle buchstaben werden durch punkte (quadrate) im ursprung mit grÃ¶Ãe 'uPointSize' representiert\n   gl_PointSize=uPointSize;\n\n   vColor = vec4(aPickingColor, 1.);\n\n   float levelScale = pow(2., aGeometryZoom - uZoomLevel);\n   \n   // bewege die buchstaben an die richte position, uScale gleicht die scalierung beim zoomen aus\n   gl_Position = uPMatrix * uMVMatrix * vec4(vec3(aGlyphPosition, 0.)*(1./uScale)+vec3(aTextOrigin+(aTextOffset*levelScale), 0.)+aVertexPosition, 1.0);\n}\n",signed_distance_field_text_vs:"\n\nin vec3 aVertexPosition;\nin vec2 aVertexTextureCoords;\nin vec3 aVertexTranslate;\nin vec3 aGlyphPosition;\nin vec3 aVertexScale;\nin vec2 aTextureOffset;\nin vec2 aGlyphSize;\nin float aOpacity;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uScale;\n\nout float vOpacity;\nout vec2 vGlyphCoords;\n\nconst vec2 texDim = vec2(1./512., 1./1024.);\n\nvoid main(void) {\n    vOpacity = aOpacity;\n    vGlyphCoords = texDim * (aGlyphSize*aVertexTextureCoords+aTextureOffset);\n    vec3 s=vec3(1.0/uScale, 1.0/uScale, 1.0);\n\n    gl_Position = uPMatrix * uMVMatrix * vec4((s*aVertexScale*aVertexPosition)+s*aGlyphPosition+aVertexTranslate, 1.0);\n}\n",selection_Box_vs:"\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\n\nvoid main(void) {\n   gl_PointSize = 10.0;\n   gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",rain_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n\n   vTextureCoord = aVertexTextureCoords;\n   gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",city_location_vs:"\nin vec3 aVertexPosition;\nin vec3 aVertexTranslate;\nin float aOpacity;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uPointSize;\n\nout float vOpacity;\nout vec2 vPosition;\n\nvoid main(void) {\n   gl_PointSize = uPointSize;\n   vOpacity=aOpacity;\n   vec4 position = uPMatrix * uMVMatrix * vec4(aVertexPosition+aVertexTranslate, 1.0);\n   vPosition = position.xy/position.w;\n   gl_Position = position;\n}\n",rgb_signed_distance_field_text_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\nin vec3 aVertexTranslate;\nin vec2 aGlyphPosition;\nin vec3 aVertexScale;\nin vec2 aTextureOffset;\nin vec2 aGlyphSize;\nin float aOpacity;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uScale;\n\nout float vOpacity;\nout vec2 vTextureCoords;\nout vec2 vTextureOffset;\nout vec2 vGlyphSize;\n\n\nvoid main(void) {\n    vTextureCoords = aVertexTextureCoords;\n    vOpacity = aOpacity;\n    vTextureOffset = aTextureOffset;\n    vGlyphSize = aGlyphSize;\n    vec3 s=vec3(1.0/uScale, 1.0/uScale, 1.0);\n\n    gl_Position = uPMatrix * uMVMatrix * vec4((s*aVertexScale*aVertexPosition)+s*vec3(aGlyphPosition, 0.0)+aVertexTranslate, 1.0);\n}\n",point_sdf_text_vs:"\n\nin vec3 aVertexPosition;\nin vec2 aTextOrigin;\nin vec2 aTextOffset;\nin vec2 aVertexScale;\nin vec3 aColor;\nin vec2 aGlyphPosition;\nin vec2 aTextureOffset;\nin vec2 aGlyphSize;\nin float aGeometryZoom;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform vec4 uOutline;\nuniform float uScale;\nuniform float uZoomLevel;\nuniform float uPointSize;\n\nout vec2 vScale;\nout vec3 vColor;\nout mat2 vUvTransform;\nout mat2 vTextureTransform;\nout vec2 vPosition;\n\n\nvoid main(void) {\n   //Alle buchstaben werden durch punkte (quadrate) im ursprung mit grÃ¶Ãe 'uPointSize' representiert\n   gl_PointSize=uPointSize;\n\n   vColor = uOutline.x==1.0? uOutline.yzw : aColor;\n\n   //da die punkte mit einer festen grÃ¶Ãe initialisiert werden mÃ¼ssen, berechnen wir hier den scalierungsfaktoren\n   //fÃ¼r die 16px und 13px fontsize. sc--\x3e scale fÃ¼r die glyphsize, t--\x3e scale fÃ¼r den texture offset\n   vScale = (aVertexScale/uPointSize)*0.5;\n   vec2 sc = uPointSize/aVertexScale;\n   vec2 t = (uPointSize-aVertexScale)/(uPointSize*2.0);\n\n   vUvTransform = mat2(sc.x, sc.y, \n                        t.x, t.y);\n\n   vTextureTransform = mat2(aGlyphSize, \n                       aTextureOffset);\n\n   float levelScale = pow(2., aGeometryZoom - uZoomLevel);\n   \n   // bewege die buchstaben an die richte position, uScale gleicht die scalierung beim zoomen aus\n   vec4 position = uPMatrix * uMVMatrix * vec4(vec3(aGlyphPosition, 0.)*(1./uScale)+vec3(aTextOrigin+(aTextOffset*levelScale), 0.)+aVertexPosition, 1.0);\n   vPosition = position.xy/position.w;\n   gl_Position = position;\n}\n",sun_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n    vTextureCoord = aVertexTextureCoords;\n    gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",moon_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n    vTextureCoord = aVertexTextureCoords;\n    gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}\n",snow_vs:"\nin vec3 aVertexPosition;\nin vec3 aVertexTranslate;\nin float aOpacity;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uPointSize;\nuniform float uTime;\n\nout float vOpacity;\n\n\nvoid main(void) {\n   gl_PointSize = uPointSize*(uTime/100.);\n//    float a = uTime/100.;\n//    mat3 rot = mat3(cos(a), -sin(a), 0., sin(a), cos(a), 0., 0., 0., 1.)\n   vOpacity=aOpacity;\n   gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition+aVertexTranslate, 1.0);\n}\n",texture_to_screen_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n\n   vTextureCoord = aVertexTextureCoords;\n   gl_Position = vec4(aVertexPosition, 1.0);\n}\n",wind_vs:"\n\nin vec3 aVertexPosition;\nin vec3 aVertexTranslate;\nin float aLifeTime;\n\n//in range [2,10]\nuniform float uZoomLevel;\nuniform vec2 uTextureSize;\nuniform vec2 uHalfScreenSize;\n//updated particle data;\nuniform sampler2D uSamplerPingPong;\n\nout float vOpacity;\n\nfloat random (vec2 st) {\n   return fract(sin(dot(st.xy, vec2(12.9898,78.233)))*43758.5453123);\n}\n\nvoid main(void) {\n   gl_PointSize = 2.;\n\n   //calculate particle position for screen space\n   vec2 s = (aVertexPosition+aVertexTranslate).xy/uHalfScreenSize; \n   //calculate particle position for texture space\n   vec2 texCoords = (s+1.)/2.;\n\n   //load particles current position (.rg), lifetime(.b) and velocity(.a)\n   vec4 particleUpdate = texture(uSamplerPingPong, texCoords);\n   vec2 translation = particleUpdate.rg*uTextureSize/uHalfScreenSize;\n   \n   float visibility=aLifeTime+particleUpdate.b >= 0.5 ? 1. : 0.;\n   \n   //map zoomlevel to range [0,1]\n   float zL= (uZoomLevel-2.)/8.;\n   \n   float opacity = mix(0.4, 0.8, zL);\n   vOpacity = max(particleUpdate.a, 0.5)*opacity*visibility;\n\n   //zoom level dependent number of particles to be omited from rendering\n   float thrshld = mix(0., 0.7, zL);\n   //velocity dependent particle omitting\n   float thrshld2 = mix(0., 0.2, particleUpdate.a);\n\n   if(random(s)<thrshld+thrshld2){\n      vOpacity = 0.;\n   }\n   gl_Position = vec4(s+translation, 0., 1.);\n}\n",particle_trace_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n\n   vTextureCoord = aVertexTextureCoords;\n   gl_Position = vec4(aVertexPosition, 1.0);\n}\n",wind_update_vs:"\n\nin vec3 aVertexPosition;\nin vec3 aVertexTranslate;\nin float aLifeTime;\n\nuniform float uSpeed;\nuniform float uTextureScale;\nuniform vec2 uHalfScreenSize;\nuniform vec2 uTextureSize;\nuniform vec2 uTextureOffset;\n\n//last vertex position\nuniform sampler2D uSamplerPingPong;\n//wind directions displacement\nuniform sampler2D uDisplacementSampler;\n\nout float vLifeTime;\nout vec4 vParticleData;\n\nconst float WIND0 = 85./255.;\nconst float MAXSPEED= 19./255.;\n\n\n\nvoid main(void) {\n   gl_PointSize = 1.;\n\n   //calculate particle position for screen space\n   vec2 position = (aVertexPosition+aVertexTranslate).xy;\n   vec2 s = position/uHalfScreenSize; \n   //and use as uv coords to access particle data sampler to get last timesteps particle data\n   vec2 particleCoords = (s+1.)/2.;\n   vec4 lastParticleData = texture(uSamplerPingPong, particleCoords);\n   vec2 lastTranslation = lastParticleData.xy;\n\n   //calculate position of particles for displacement uv space\n   vec2 t = position/(uTextureSize*0.5); \n   vec2 texCoords = ((t+1.)/2.);\n\n   //texture offset and scale because texture doesnt allign with screen and \n   //to scale the texture to simulate zooming over ZL5\n   float inverseTextureScale = 1./uTextureScale;\n   vec2 displacementCoords = texCoords+(uTextureOffset*inverseTextureScale/uTextureSize)+lastTranslation;\n\n   float uvTrans = -(0.5-(0.5*inverseTextureScale));\n   vec2 st=(displacementCoords+uvTrans)*uTextureScale;\n   st.t = 1.0-st.t;\n\n   //get displacement value from windflow tex\n   vec2 displacement = texture(uDisplacementSampler, st).xy;\n   // vec2 displacement = vec2( 90./255., 85./255.); \n   //windflow displacements are in range -85->85 mapped to color values 0-170\n   vec2 d = ((displacement-WIND0))*uSpeed;\n\n\n   //velocity is in range [0,1]\n   float velocity = min(length(displacement-WIND0)/MAXSPEED, 1.);\n   ///lifetime increase --\x3e slower particles have longer lifetime\n   float lti = mix(0.0009, 0.003, velocity);\n\n   //pack next position (.rg), lifetime(.b) and velocity(.a)\n   //lifetime will be counted from 0 to 1 and resets position for >=1\n   vParticleData = aLifeTime + lastParticleData.b+lti >= 1. ? vec4(0.) : vec4((lastTranslation+d),lastParticleData.b+lti, velocity);\n\n   gl_Position = vec4(s, 0., 1.0);\n}\n",particle_to_screen_vs:"\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uPMatrix;\nuniform mat4 uMVMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n\n   vTextureCoord = aVertexTextureCoords;\n   gl_Position = uPMatrix*uMVMatrix*uTMatrix*vec4(aVertexPosition, 1.0);\n}\n",wind_debug_vs:"\n\nin vec3 aVertexPosition;\n\nuniform mat4 uPMatrix;\nuniform mat4 uMVMatrix;\nuniform mat4 uTMatrix;\nuniform vec2 uHalfScreenSize;\nuniform vec2 uTextureSize;\nuniform vec2 uTextureOffset;\nuniform float uTextureScale;\n\nout vec2 vTextureCoord;\n\n\nvoid main(void) {\n   vec2 s = aVertexPosition.xy/uHalfScreenSize; \n   vec2 t = aVertexPosition.xy/(uTextureSize*0.5); \n   vec2 texCoords = ((t+1.)/2.);\n   float inverseTextureScale = 1./uTextureScale;\n   vec2 uv = texCoords+(uTextureOffset*inverseTextureScale/uTextureSize);\n   float uvTrans = -(0.5-(0.5*inverseTextureScale));\n   vec2 st=(uv+uvTrans)*uTextureScale;\n   st.t = 1.0-st.t;\n   vTextureCoord=st;\n\n   gl_Position = vec4(s, 0., 1.0);\n}\n",lightning_vs:"\nin vec3 aVertexPosition;\nin vec3 aVertexTranslate;\nin vec3 aColor;\nin float aSize;\nin float aTimeOffset;\nin vec3 aDotConfig;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uTime;\nuniform float uZoomLevel;\n\nout vec3 vColor;\nout float vCoronaOpacity;\nout float vDotOpacity;\nout float vCoronaSize;\nout vec4 vDotSize;\n\nconst float PI = 3.1415926538;\n\n//returns random value based on 2D seed in range [0, 1]\nfloat random(vec2 st) {\n   return fract(sin(dot(st.xy, vec2(12.9898,78.233)))*43758.5453123);\n} \n\n//returns positive parts of sine with negative gradient\nfloat opacityFade(float cosT, float sinT){\n   return cosT>0.&&sinT>0.?cosT:0.;\n}\n\n//returns positive parts of sine with negative gradient\nfloat dotFade(float cosT, float sinT){\n   return cosT>0.5&&sinT>0.?cosT:0.5;\n}\n\nfloat dotAnimation(float cosT, float sinT){\n   float dotSize =0.15;\n   return (cosT>0.&&sinT>0.?cosT:0.)*dotSize;\n}\n\nfloat coronaAnimation(float cosT, float sinT){\n   return 0.15+(cosT>0.&&sinT>0.?sinT:0.)*0.35;\n}\n\nvoid main(void) {\n   gl_PointSize = aSize*1.5;\n\n   float individualTime = aTimeOffset*uTime-(random(aVertexTranslate.xy)*8.);\n\n   float cosTime = cos(individualTime);\n   float sinTime = sin(individualTime);\n\n   vDotOpacity = 1.;\n\n   float s = 0.15;\n   float a = 0.7;\n   if(uZoomLevel>=7.0){\n     // vDotOpacity = dotFade(cosTime, sinTime);\n      vDotOpacity = 1.;\n      s = dotAnimation(cosTime, sinTime);\n      //s=0.15;\n      a=0.4;\n   }\n   //bounds for the lightning dot r-> dot max, g-> dot min, b->shadow max, a->shadow min\n   vDotSize = vec4(s, s-aDotConfig.r, s+aDotConfig.g, s-aDotConfig.b);\n\n   vCoronaOpacity = opacityFade(cosTime, sinTime)*a;\n   vCoronaSize = coronaAnimation(cosTime, sinTime);\n   \n   vColor = aColor;\n   gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition+aVertexTranslate, 1.0);\n}\n",webcam_marker_vs:"\nin vec3 aVertexPosition;\nin vec3 aVertexScale;\nin vec2 aVertexTextureCoords;\nin vec3 aVertexTranslate;\n//can't use layout qualifier in glsl 100 so we set [pickingColor.r, pickingColor.g, pickingColor.b, samplerId]\nin vec4 aWebcamInfo;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uScale;\n\nout vec2 vTextureCoord;\nout float vSamplerId;\n\nvoid main(void) {\n    vTextureCoord = aVertexTextureCoords;\n    vSamplerId = aWebcamInfo.a;\n    vec3 s=vec3(1.0/uScale, 1.0/uScale, 1.0);\n    gl_Position = uPMatrix * uMVMatrix * vec4((s*aVertexScale*aVertexPosition)+aVertexTranslate + vec3(0.,aVertexScale.y / 2.*s.x,0.), 1.0);\n}\n",webcam_picking_vs:"\nin vec3 aVertexPosition;\nin vec3 aVertexScale;\nin vec2 aVertexTextureCoords;\nin vec3 aVertexTranslate;\nin vec4 aWebcamInfo; \n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uScale;\nuniform float uWebcamScale; // values can either be 1 or 0.5\nuniform float uPickingScale;\n\nout vec3 vColor;\nout vec2 vTextureCoord;\n\nvoid main(void) {\n   // can't use layout qualifier in glsl100 so we set [pickingColor.r, pickingColor.g, pickingColor.b, samplerId]\n   vColor=aWebcamInfo.rgb;\n   vTextureCoord=aVertexTextureCoords;\n   vec3 s=vec3(1.0/uScale, 1.0/uScale, 1.0);\n   gl_Position = uPMatrix * uMVMatrix * vec4((s*aVertexScale*uPickingScale*uWebcamScale*aVertexPosition)+aVertexTranslate + vec3(0.,aVertexScale.y/((1./uWebcamScale)*2.)*s.x,0.), 1.0);\n}\n",animated_webcam_marker_vs:"\n\nin vec3 aVertexPosition;\nin vec3 aVertexScale;\nin vec2 aVertexTextureCoords;\nin vec3 aVertexTranslate;\n//can't use layout qualifier in glsl 100 so we set [pickingColor.r, pickingColor.g, pickingColor.b, samplerId]\nin vec4 aWebcamInfo;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\nuniform float uScale;\nuniform float uTime;\n\nout vec2 vTextureCoord;\nout float vOpacity;\nout float vSize;\nout float vSamplerId;\n\n//const float PI = 3.1415926538;\n//\n//// returns random value based on 2D seed in range [0, 1]\n//float random (vec2 st) {\n//   return fract(sin(dot(st.xy, vec2(12.9898,78.233)))*43758.5453123);\n//} \n//\n// returns positive parts of sine with negative gradient\n//float opacityFade(float cosT, float sinT){\n//  return cosT>0.&&sinT>0.?cosT:0.;\n//}\n//\n//float animation(float cosT, float sinT){\n//    return (cosT>0.&&sinT>0.?sinT:0.)*0.35;\n//}\n//float jumpAnimation(float x){\n//    return cos(x)<0.&&sin(x)>0.?abs(sin(7.*x))*sin(x):0.;\n//}\n\nvoid main(void) {\n    vTextureCoord = aVertexTextureCoords;\n\n    float t = uTime * 0.5;\n    vOpacity = 1.-fract(t);\n\n    // 0.35 is an abritary number used to scale the animation size \n    vSize = fract(t) * 0.35; \n\n    vSamplerId = aWebcamInfo.a;\n    vec3 s = vec3(1.0/uScale, 1.0/uScale, 1.0);\n    gl_Position = uPMatrix * uMVMatrix * vec4(s*aVertexScale*aVertexPosition+aVertexTranslate + vec3(0.,aVertexScale.y / 4.*s.x,0.), 1.0);\n    \n\n\n\n    // float t = uTime;\n    // float cosTime = cos(t);\n    // float sinTime = sin(t);\n    //// vOpacity = opacityFade(cosTime, sinTime);\n    //vOpacity = 1.-fract(t);\n    //// vSize = animation(cosTime, sinTime);\n    //vSize = fract(t)*0.35;\n\n    //vSamplerId = aWebcamInfo.a;\n    //vec3 s = vec3(1.0/uScale, 1.0/uScale, 1.0);\n    //gl_Position = uPMatrix * uMVMatrix * vec4(s*aVertexScale*aVertexPosition+aVertexTranslate + vec3(0.,aVertexScale.y / 4.*s.x,0.), 1.0);\n    //// gl_Position = uPMatrix * uMVMatrix * vec4(s*aVertexScale*aVertexPosition+vec3(0., 0.7*jumpAnimation(t), 0.)+aVertexTranslate + vec3(0.,aVertexScale.y / 2.*s.x,0.), 1.0);\n}\n"};class Se{constructor(t,e,n,i,o){this.gl=t,this.name=e,this.webglVersion=n,this.vsSource=i||Te[e+"_vs"],this.fsSource=o||xe[e+"_fs"],this.loadShaders()}loadShaders(){var t=this.gl;const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this.floatPrecision=e&&0!=e.precision?"highp":"mediump",this.processedVS=this.preprocess(this.vsSource,"vs");const n=this.findUniforms(this.vsSource),i=this.findUniforms(this.fsSource);this.uniforms=n.concat(i),this.attributes=this.findAttributes(this.vsSource);var o=this.vs=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(o,this.processedVS),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw Error(`[${this.name}] vertex shader error: ${t.getShaderInfoLog(o)}`);this.processedFS=this.preprocess(this.fsSource,"fs");var r=this.fs=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,this.processedFS),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error(`[${this.name}] fragment shader error: ${t.getShaderInfoLog(r)}`)}preprocess(t,e){let n=t;if("webgl"===this.webglVersion){if(n=n.replace(/texture\(/g,"texture2D("),"vs"==e)n=n.replace(/\bin\s+/g,"attribute "),n=n.replace(/\bout\s+/g,"varying ");else if("fs"==e){const t=n.match(/\bout\s+\w+\s+\w+\W/g)[0].replace(/out\s+\w+\s*/,"").replace(/;/,"");n=n.replace(/\bin\s+/g,"varying "),n=n.replace(/\bout\s+\w+\s+\w+\W/g,""),n=n.replace(/texture\(/g,"texture2D("),n=n.replace(new RegExp(t,"g"),"gl_FragColor")}n="precision "+this.floatPrecision+" float;".concat(n),n="#version 100\n".concat(n)}else n="precision "+this.floatPrecision+" float;".concat(n),n="#version 300 es\n".concat(n);return this.hasSampler=null!=n.match(/\bsampler2D/g),n}findUniforms(t){const e=t.match(/uniform\s+\w+\s+\w+\s*/g);let n=[];return e&&(n=e.map((t=>t.replace(/uniform\s+\w+\s*/,"").replace(/;/,"")))),n}findAttributes(t){const e=t.match(/in\s+\w+\s+\w+\s*/g);let n=[];return e&&(n=e.map((t=>t.replace(/\bin\s+\w+\s*/,"").replace(/;/,"")))),n}getVertexShader(){return this.vs}getFragmentShader(){return this.fs}}class Ce{constructor(t,e,n,i,o){this.gl=t,this.name=e,this.attributeLocations=new Map,this.uniformLocations=new Map,this.shader=new Se(t,e,n,i,o),this.prg=t.createProgram(),this.attachShaders(),this.makeCurrent(),this.setUniformLocations(this.shader.uniforms),this.setAttributeLocations(this.shader.attributes),this.usesTextures=this.shader.hasSampler}deleteProgram(){this.gl.deleteProgram(this.prg)}getUniformPointer(t){const e=this.uniformLocations.get(t);return e||($t.log("can not find "+t+" for program: "+this.name),null)}attachShaders(){const t=this.gl,e=this.prg;t.attachShader(e,this.shader.getVertexShader()),t.attachShader(e,this.shader.getFragmentShader()),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)||$t.warn("gl program not linked")}setUniformLocations(t){t.forEach((t=>this.uniformLocations.set(t,this.gl.getUniformLocation(this.prg,t))))}setAttributeLocations(t){t.forEach((t=>this.attributeLocations.set(t,this.gl.getAttribLocation(this.prg,t))))}getProgram(){return this.prg}makeCurrent(){return this.gl.useProgram(this.prg),this}}const Me=4294967295;class Pe{constructor(){this.m_w=123456789,this.m_z=987654321}get(){this.m_z=36969*(65535&this.m_z)+(this.m_z>>16)&Me,this.m_w=18e3*(65535&this.m_w)+(this.m_w>>16)&Me;let t=(this.m_z<<16)+(65535&this.m_w)>>>0;return t/=4294967296,t}fromTo(t,e){return Yt(t,e,this.get())}element(t){return t[Math.round(this.get()*(t.length-1))]}}class ke{constructor(t){this.configs={};for(const[e,n]of t)this.configs[this.key(e)]=n}get(t,e){if("object"==typeof t)return this.configs[this.key(t)];if("number"==typeof t&&"number"==typeof e){const o=(n=t,i=e,Lt.find((t=>t.width===n&&t.height===i)));if(o)return this.configs[this.key(o)]}var n,i}key(t){return`${t.width}x${t.height}`}}const Oe=new ke([[Ot,{n:1300,sizeFactor:1,largeAmount:.99}],[Dt,{n:7e3,sizeFactor:1.5,largeAmount:.97,sizeAdd:.2}]]);function De(t){const e=[];for(let n=0;n<t;n++)e.push(void 0);return e}class Le{constructor(t,e,n,i,o,r,a){this.scene=t,this.camera=e,this.gl=n,this.config=o,this.windCtrl=r,this.isRain=a,this.requiredFps=0,this.windStrength=this.isRain?150:200,this.gravity=this.isRain?600:150,this.gravityFactor=1,this.active=!1,this.gravityTime=0,this.particles=[],this.random=new Pe,this.renderOptions=new ue,this.name=this.isRain?"rain":"snow",this.program=new Ce(n,"precipitation",i,"\nprecision highp float;\n\nin vec3 aVertexPosition;\nin vec3 aVertexScale;\nin vec4 aVertexTranslate;\nin vec3 aSpeed;\nin vec3 aGlyphPosition;\nin vec3 aRotation;\nin float aSize;\nin float aOpacity;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform vec2 uTime2;\nuniform vec2 uSize;\nuniform float uDensity;\nuniform vec2 uSpeed;\nuniform float uWind;\nuniform vec2 uZSpan;\n\nout float vOpacity;\nout float vRotation;\n\nfloat random (vec2 st) {\n   return fract(sin(dot(st.xy, vec2(12.9898,78.233)))*43758.5453123);\n}\n\nvoid main(void) {\n   vec3 translate = aVertexTranslate.xyz;\n\n   vOpacity = aOpacity;\n\n   vec2 time = uTime2 / 1000.0;\n   float rotationTime = time.y / 5.0;\n   float adjustedZ = (translate.z - uZSpan.x) / -uZSpan.y;\n   vec2 size = uSize * (1.0 + 0.6 * adjustedZ);\n\n   vRotation = aRotation.x + rotationTime * aRotation.y - sign(uWind) * acos(dot(normalize(vec2(uWind*uSpeed.x, uSpeed.y)), vec2(0.0, 1.0)));\n\n   translate.x = mod(translate.x + time.x * aSpeed.x * uSpeed.x, size.x) - 0.5 * size.x;\n   translate.y = mod(translate.y - time.y * aSpeed.y * uSpeed.y, size.y) - 0.5 * size.y;\n\n   translate.x += sin(rotationTime * aSpeed.z) * aRotation.z;\n   translate.z += cos(rotationTime * aSpeed.z) * aRotation.z;\n\n   if(random(aVertexTranslate.xy) < uDensity){\n      vOpacity = 0.;\n      translate.x += 2.0 * uSize.x;\n   }\n\n   gl_Position = uPMatrix * uMVMatrix * vec4((aVertexPosition*aVertexScale)+aGlyphPosition+translate, aVertexTranslate.w);\n   gl_PointSize = ( aSize / gl_Position.w ) * 10000.0;\n}\n","\nin float vOpacity;\nin float vRotation;\nout vec4 FragColor;\nuniform sampler2D uSampler0;\nuniform float uYScale;\nuniform float uOpacity;\n\nvoid main(void){\n    mat2 scale = mat2(uYScale, 0.0, 0.0, 1.0);\n    mat2 rotate = mat2(cos(vRotation), -sin(vRotation), sin(vRotation), cos(vRotation));\n\n    vec4 color = texture(uSampler0, scale*rotate*(gl_PointCoord-0.5)+0.5);\n    FragColor = vOpacity * uOpacity * vec4(color.a * color.rgb, color.a);\n    // FragColor = vec4(color.rgb, vOpacity * color.a);\n\n}\n");const s=this.program.getUniformPointer("uYScale"),l=this.program.getUniformPointer("uOpacity"),c=this.program.getUniformPointer("uSpeed");c&&this.gl.uniform2fv(c,[this.windStrength,this.gravity]),this.isRain?(this.gl.uniform1f(s,13.4),this.gl.uniform1f(l,.6)):(this.gl.uniform1f(s,1),this.gl.uniform1f(l,1)),this.manager=new be(n,this.name,this.program,!0),Xt(this.isRain?Pt("rain.png"):Pt("snowflake.png"),this.name,this.manager),this.renderOptions.addUniformNumberArray("uTime2",[this.windCtrl.windTime,this.gravityTime],"uniform2fv"),this.renderOptions.addUniformNumber("uWind",this.windCtrl.wind,"uniform1f")}resize(t,e){this.program.makeCurrent();const n=this.isRain?200:100;this.gl.uniform2fv(this.program.getUniformPointer("uSize"),[t+n,e+n]),this.manager.remove(this.particles),this.particles=this.calculateParticlesOnRandomizedGrid(t,e),this.manager.add(this.particles)}update(t){const e=this.isRain?t.rain:t.snow;this.active=e>0,this.requiredFps=this.active?1:0;const n=this.isRain?Math.pow(1-e,.3):1-e;this.isRain||(this.gravityFactor=1,t.temperature<-3?this.gravityFactor=.65:t.temperature<=0&&(this.gravityFactor=.78)),this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uDensity"),n)}render(t){this.active&&(this.gravityTime+=this.gravityFactor*t,this.scene.bindMeshManager(this.manager),this.program.makeCurrent(),this.renderOptions.setUniformNumberArray("uTime2",[this.windCtrl.windTime,this.gravityTime]),this.renderOptions.setUniformNumber("uWind",this.windCtrl.wind),this.scene.drawPointsInstanced(this.renderOptions))}destroy(){}calculateParticlesOnRandomizedGrid(t,e){var n;const i=this.isRain,o=!!this.config.noRender,r=this.random,a=i?75:80,s=Oe.get(t,e);let l=null!==(n=null==s?void 0:s.n)&&void 0!==n?n:0,c=1;0===l&&(l=Math.max(500,Math.min(4e4,t*e/a)),c=Math.sqrt(Math.max(0,Math.min(1,(1e4-l)/1e4))),l+=2e3*c,l*=.1);const u=1-.7*c,h=Math.max(250,-this.camera.home[2]-10)-225*c;let d;return d=i?650-600*c:1e3-950*c,this.program.makeCurrent(),this.gl.uniform2fv(this.program.getUniformPointer("uZSpan"),[h,d]),De(l).map((()=>{var n,a,l;let c,p,f=1;if(i)c=h-r.get()*d,p=2*u*(r.get()+.2);else if(o){const t=null!==(n=null==s?void 0:s.sizeFactor)&&void 0!==n?n:1,e=null!==(a=null==s?void 0:s.sizeAdd)&&void 0!==a?a:0;let i=.2+.5*Math.pow(r.get(),6);r.get()>(null!==(l=null==s?void 0:s.largeAmount)&&void 0!==l?l:.99)&&(i=r.fromTo(.9,1)),c=h,p=u*(i+e)*t,f=r.fromTo(.1+.05*i,.25+.2*i)}else{c=h-(1-Math.pow(r.get(),3))*d;const t=(c-h)/-d;p=r.get()*u*(1+.3*t),f=.05+.35*r.get()*(1-.5*t)}return new ye(this.gl,{name:this.name,position:[-t+r.get()*t*2,-e+r.get()*e*2,c],speed:[1+r.get(),1+r.get(),10*r.get()],rotation:i?[0,0,0]:[2*Math.random()*Math.PI,20*Math.random(),25*Math.random()],size:p,opacity:f})}))}}class Ae{constructor(t,e,n,i){this.name=e,this.prg=n,this.textured=i,this.geometries=[],this.renderReady=!1,this.meshReady=!1,this.textureReady=!1,this.textureManager=new pe(t),this.textureReady=!this.textured}add(t){return t.forEach((t=>{t.bindData(),t.linkAttributes(this.prg),this.geometries.push(t)})),this.meshReady=!0,this.syncReadyState(),this}addToTextureManager(t,e,n,i){const o=this.textureManager.add(t,e,n,i);return this.textureReady=!0,this.syncReadyState(),o}syncReadyState(){this.renderReady=this.textureReady&&this.meshReady}remove(t){return t.forEach((t=>{t.destroy();const e=this.geometries.findIndex((e=>e.name==t.name));-1!==e?this.geometries.splice(e,1):$t.warn("no mesh with name: "+t.name)})),this}removeAll(){return this.geometries=[],this.renderReady=!1,this}removeAllTextures(){return this.textureManager.removeAll(),this.renderReady=!1,this}setProgram(t){this.prg!==t&&(this.prg=t,this.geometries.forEach((e=>e.linkAttributes(t))))}getMeshByName(t){try{return this.geometries.find((e=>e.name==t))}catch(e){$t.error(`no mesh with name: ${t} - ${e}`)}}}const Ee=`\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform float uMist;\nuniform float uNight;\nuniform float uDawn;\n\nconst vec4 dayColor = vec4(1.0);\nconst vec4 nightColor = vec4(0.25, 0.25, 0.25, 1.0);\nconst vec3 dawnColor = ${new At(184,13,5).toVec3()};\n\nvoid main(void) {\n    vec4 color = mix(dayColor, nightColor, uNight);\n    color = mix(color, vec4(dawnColor, 1.0), 0.5 * uDawn);\n    color *= clamp(vTextureCoord.g + 0.05 - 0.35 * (1.0 - uMist), 0.0, 1.0);\n\n    FragColor = (1.0 - 0.4 * uNight) * color;\n}`,Ie=`\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform float uNight;\n\nconst vec3 dayTopColor = ${It.a.toVec3()};\nconst vec3 dayBottomColor = ${It.b.toVec3()};\nconst vec3 nightTopColor = ${Rt.a.toVec3()};\nconst vec3 nightBottomColor = ${Rt.b.toVec3()};\n\nvoid main(void) {\n    vec3 topColor = mix(dayTopColor, nightTopColor, uNight);\n    vec3 bottomColor = mix(dayBottomColor, nightBottomColor, uNight);\n    vec3 color = mix(topColor, bottomColor, vTextureCoord.y);\n\n    FragColor = vec4(color, 1.0);\n}`,Re="\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n   vTextureCoord = aVertexTextureCoords;\n   gl_Position = uPMatrix * uMVMatrix * uTMatrix * vec4(aVertexPosition, 1.0);\n}";class ze{constructor(t,e,n){this.scene=t,this.gl=e,this.requiredFps=0,this.skyProgram=new Ce(e,"sky",n,Re,Ie),this.dawnProgram=new Ce(e,"dawn",n,Re,"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform float uDawn;\n\nconst vec4 dawnColor = vec4(1.0, 1.0, 0.0, 1.0);\n\nvoid main(void) {\n    float amount = vTextureCoord.y;\n    vec4 color = mix(vec4(1.0), dawnColor, amount);\n    color *= uDawn * amount;\n    FragColor = color;\n}"),this.starsProgram=new Ce(e,"stars",n,Re,"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\nuniform float uOpacity;\n\nvoid main(void) {\n    // FragColor = vec4(vTextureCoord, 0.0, 1.0);\n\n    vec2 coords = vTextureCoord / 0.7;\n    if (coords.y > 1.0) {\n        return;\n    }\n    vec4 color = texture(uSampler0, coords);\n    color.rgb *= color.a;\n    FragColor = uOpacity * color;\n}"),this.mistProgram=new Ce(e,"mist",n,Re,Ee),this.manager=new Ae(e,"background",this.skyProgram,!1),this.quad=new ge(e,1,1,[0,0,0],"sky"),this.manager.add([this.quad])}prepare(){return Qt(Pt("stars.svg.png"),"stars",this.quad).then((t=>{t.activate(0),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}))}resize(t,e){this.quad.setScale(t,e,1)}update(t){const e=Vt(t.sightDistance),n=Wt(t.sunAngle),i=Bt(t.sunAngle),o=.7*(1-e)+.3;this.skyProgram.makeCurrent(),this.gl.uniform1f(this.skyProgram.getUniformPointer("uNight"),n),this.dawnProgram.makeCurrent(),this.gl.uniform1f(this.dawnProgram.getUniformPointer("uDawn"),i),this.starsProgram.makeCurrent(),this.gl.uniform1f(this.starsProgram.getUniformPointer("uOpacity"),n*o),this.mistProgram.makeCurrent(),this.gl.uniform1f(this.mistProgram.getUniformPointer("uNight"),n),this.gl.uniform1f(this.mistProgram.getUniformPointer("uDawn"),i),this.gl.uniform1f(this.mistProgram.getUniformPointer("uMist"),e)}render(){this.scene.bindMeshManager(this.manager),this.manager.setProgram(this.skyProgram),this.scene.drawTriangles(),this.manager.setProgram(this.dawnProgram),this.scene.drawTriangles(),this.manager.setProgram(this.starsProgram),this.scene.drawTriangles(),this.manager.setProgram(this.mistProgram),this.scene.drawTriangles()}destroy(){}}const Ne=new At(206,206,206),je=new At(194,194,194),Be=`\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform float uFog;\nuniform float uNight;\n\nconst vec4 fogDayTop      = ${Ne.toVec4()};\nconst vec4 fogDayBottom   = ${je.toVec4()};\nconst vec4 fogNightTop    = vec4(35.0 / 255.0,  35.0 / 255.0,  35.0 / 255.0,  1.0);\nconst vec4 fogNightBottom = vec4(82.0 / 255.0,  82.0 / 255.0,  82.0 / 255.0,  1.0);\n\nvoid main(void) {\n    vec4 fogTop = mix(fogDayTop, fogNightTop, uNight);\n    vec4 fogBottom = mix(fogDayBottom, fogNightBottom, uNight);\n    vec4 fogColor = mix(fogTop, fogBottom, vTextureCoord.g);\n    FragColor = fogColor * uFog;\n}`;class We{constructor(t,e,n){this.scene=t,this.gl=e,this.requiredFps=0,this.program=new Ce(e,"fog",n,Re,Be),this.manager=new Ae(e,"fog",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"fog"),this.manager.add([this.quad])}resize(t,e){this.quad.setScale(t,e,1)}update(t){const e=Wt(t.sunAngle);this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uNight"),e),this.gl.uniform1f(this.program.getUniformPointer("uFog"),Ht(t.sightDistance))}render(){this.scene.bindMeshManager(this.manager),this.manager.setProgram(this.program),this.scene.drawTriangles()}destroy(){}}const Fe={width:1536,height:1252,sprites:[{x:0,y:0,width:512,height:512,type:"light"},{x:512,y:0,width:512,height:512,type:"light"},{x:0,y:512,width:512,height:512,type:"light"},{x:512,y:512,width:512,height:512,type:"trans"},{x:1024,y:0,width:512,height:512,type:"trans"},{x:0,y:1024,width:554,height:228,type:"dark"},{x:554,y:1024,width:516,height:209,type:"dark"}]},Ue={dark:{minSize:120,maxSize:1800,threshold:1,sprites:Fe.sprites.filter((t=>"dark"===t.type))},light:{minSize:70,maxSize:800,threshold:.5,sprites:Fe.sprites.filter((t=>"light"===t.type))},trans:{minSize:40,maxSize:400,threshold:.2,sprites:Fe.sprites.filter((t=>"trans"===t.type))}};class Ze{constructor(t,e,n){this.scene=t,this.gl=e,this.prepared=!1,this.wind=0,this.windTime=0,this.clouds=[],this.cloudBackgroundImg=Pt("cloud_bg.png"),this.spritesheetImage=Pt("clouds2.png"),this.renderOptions=new ue,this.requiredFps=0,this.backgroundProgram=new Ce(e,"clouds_bg",n,Re,"\nin vec2 vTextureCoord;\nout vec4 FragColor;\nuniform sampler2D uSampler0;\nuniform float uNight;\nuniform float uDarken;\n\nvoid main(void) {\n    vec4 currentColor = texture(uSampler0, vec2(0.5, vTextureCoord.y));\n\n    currentColor.rgb /= currentColor.a;\n\n    currentColor.a = uDarken;\n    currentColor.rgb *= 1.0 - 0.74 * uNight;\n\n    currentColor.rgb *= currentColor.a;\n\n    FragColor = currentColor;\n}"),this.backgroundManager=new Ae(e,"clouds_bg",this.backgroundProgram,!1),this.backgroundQuad=new ge(e,1,1,[0,0,0],"clouds_bg"),this.backgroundManager.add([this.backgroundQuad]),Qt(this.cloudBackgroundImg,"stars",this.backgroundQuad),this.cloudProgram=new Ce(e,"cloud",n,"precision highp float;\n\nin vec2 aVertexTextureCoords;\nin vec3 aVertexPosition;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uTMatrix;\nuniform float uTime;\nuniform float uSpeed;\nuniform vec2 uSize;\n\nout vec2 vTextureCoord;\n\nvoid main(void) {\n   vTextureCoord = aVertexTextureCoords;\n\n   vec4 position = uTMatrix * vec4(aVertexPosition, 1.0);\n\n   float width = uTMatrix[0][0];\n   float adjustedScreenWidth = uSize.x + width;\n   float adjustmentForCenter = (aVertexTextureCoords.x - 0.5) * width;\n   position.x += uTime * uSpeed - adjustmentForCenter;\n   position.x = mod(position.x, adjustedScreenWidth) - 0.5 * adjustedScreenWidth;\n   position.x += adjustmentForCenter;\n\n   gl_Position = uPMatrix * uMVMatrix * position;\n}","\nin vec2 vTextureCoord;\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\nuniform vec4 uColor;\nuniform float uFade;\nuniform float uContrastIncrease;\nuniform vec4 uTexTransform;\n\nvoid main(void) {\n    vec4 texColor = texture(uSampler0, uTexTransform.xy + uTexTransform.zw * vTextureCoord);\n    vec4 currentColor = vec4(texColor.rrr, texColor.a);\n\n    float contrast1 = 1.0 - 0.55 * uContrastIncrease;\n    float brightness = 1.0 - 0.67 * uContrastIncrease;\n    float contrast2 = 1.0 + 0.25 * uContrastIncrease;\n\n    currentColor.rgb = ((currentColor.rgb - 0.5) * max(contrast1, 0.0)) + 0.5;\n    currentColor.rgb *= brightness;\n    currentColor.rgb = ((currentColor.rgb - 0.5) * max(contrast2, 0.0)) + 0.5;\n\n    currentColor.rgb *= currentColor.a;\n\n    FragColor = uFade * currentColor;\n\n    // if (vTextureCoord.x <= 0.005 || vTextureCoord.x >= 0.995 || vTextureCoord.y <= 0.005 || vTextureCoord.y >= 0.995) {\n      // FragColor = vec4(0.,0.,0.,1.0);\n    // }\n}"),this.cloudManager=new Ae(e,"clouds",this.cloudProgram,!0),this.renderOptions.addUniformNumber("uTime",this.windTime,"uniform1f")}prepare(){return(0,wt.__awaiter)(this,void 0,void 0,(function*(){yield Xt(this.spritesheetImage,"clouds",this.cloudManager),this.prepared=!0}))}resize(t,e){var n;null===(n=this.backgroundQuad)||void 0===n||n.setScale(t,e,1),this.createClouds(t,e),this.cloudProgram.makeCurrent(),this.gl.uniform2fv(this.cloudProgram.getUniformPointer("uSize"),[t,e]),this.model&&this.update(this.model)}createClouds(t,e){if(!this.prepared)return;this.cloudManager.remove(this.clouds);const n=(i=t,Math.round(1.75*(45+60*(i-400)/800)));var i;const o=[],r=[t,e],a=new Pe,s=Ue.trans.threshold,l=Ue.light.threshold,c=Math.ceil(n*s),u=Math.floor(n*(l-s)),h=n-(c+u);for(const t of["trans","light","dark"]){let e=h;"light"===t?e=u:"trans"===t&&(e=c);const n=[];for(let i=0;i<e;i++){const o=Ve.create(this.gl,a,i/(e-1),r,t);n.push(o)}o.push(...qt(n,a))}const d=[...o].sort(((t,e)=>e.zIndex-t.zIndex));this.cloudManager.add(d),this.clouds=o}update(t){this.model=t;const e=function(t){const e=8,n=-5;if(t>e)return 0;if(t<n)return 1;return 1-(t-n)/(e-n)}(t.sunAngle);this.backgroundProgram.makeCurrent(),this.gl.uniform1f(this.backgroundProgram.getUniformPointer("uDarken"),Math.max(0,Math.min(1,(t.cloudy-.65+.05)/.35))),this.gl.uniform1f(this.backgroundProgram.getUniformPointer("uNight"),e),this.wind=t.wind;const n=t.cloudy;for(let t=0;t<this.clouds.length;t++){const e=Math.ceil(Math.max(0,Math.min(1,1.1*n-t/(this.clouds.length-1))));this.clouds[t].setOpacity(e)}this.cloudProgram.makeCurrent();const i=.85*e;this.gl.uniform1f(this.cloudProgram.getUniformPointer("uContrastIncrease"),i),this.requiredFps=t.cloudy>0&&t.wind>0?1:0}render(t,e){const n=this.model;if(n&&0!==n.cloudy){for(const i of this.clouds)i.tick(t,e,n);this.windTime+=t*(.007*this.wind),this.renderOptions.setUniformNumber("uTime",this.windTime),this.backgroundManager&&(this.scene.bindMeshManager(this.backgroundManager),this.scene.drawTriangles()),this.scene.bindMeshManager(this.cloudManager),this.scene.drawTriangles(this.renderOptions)}}destroy(){}}class Ve extends ge{constructor(t,e,n,i,o="",r,a,s,l,c){super(t,e,n,i,o),this.w=e,this.h=n,this.zIndex=a,this.periodOffset=s,this.periodFactor=l,this.textureTransform=c,this.targetOpacity=0,this.currentOpacity=0,this.opacityFactor=0,this.properties.addUniformNumber("uSpeed",r,"uniform1f"),this.properties.addUniformNumberArray("uTexTransform",c,"uniform4fv")}static create(t,e,n,i,o){const[r,a]=i,s="trans"===o?Math.pow(n,.5):(l=n,1-(.009*Math.pow(Math.E,36*.128*l+.005)+.062));var l;const c=1-s,u=Ue[o],h=function(t,e){const n=t.element(Ue[e].sprites);return{ratio:n.width/n.height,texTransform:[n.x/Fe.width,n.y/Fe.height,n.width/Fe.width,n.height/Fe.height]}}(e,o),d=u.minSize+c*(u.maxSize-u.minSize),p=(1.1-.2*s+e.fromTo(-.1,.1))*d/h.ratio,f=e.fromTo(1,100)*r,m=a/2-Yt(0+.125*p,a/.935,s),g=m+p/2,v=Math.min(1,g/(1.5*a)),y=Math.round(50*(1-v)),_=new Ve(t,1,1,[f,m,0],"cloud",Math.max(.05,3*c),y,e.fromTo(0,2),e.fromTo(.9,1.1),h.texTransform);return _.scale(d,p,1),_}setOpacity(t){this.targetOpacity=t}tick(t,e,n){0===t&&(this.currentOpacity=this.targetOpacity),this.currentOpacity!==this.targetOpacity&&(this.targetOpacity>this.currentOpacity?(this.currentOpacity+=t*Nt,this.currentOpacity>this.targetOpacity&&(this.currentOpacity=this.targetOpacity)):(this.currentOpacity-=t*Nt,this.currentOpacity<this.targetOpacity&&(this.currentOpacity=this.targetOpacity))),this.opacityFactor=this.getOpacityFactor(e,n.cloudy),this.properties.setUniformNumber("uFade",this.currentOpacity*this.opacityFactor)}getOpacityFactor(t,e){if(e<.5)return 1;const n=1-Math.min(1,(e-.5)/.4),i=1e4,o=4e3;let r=(this.periodFactor*t+69e3*this.periodOffset)%69e3,a=1;return r<i?a=1-r/i:(r-=i,r<o?a=0:(r-=o,r<i&&(a=r/i))),n+(1-n)*a}}const He=new ke([[Ot,{sizeFactor:.7}]]);class Ye{constructor(t,e,n,i={}){this.scene=t,this.gl=e,this.config=i,this.size=0,this.sunAngle=0,this.sunDirection=0,this.screenSize=[0,0],this.requiredFps=0,this.baseSize=i.stylized?500:70,this.program=new Ce(e,"sun",n,Re,i.stylized?"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\n\nvoid main(void) {\n    vec4 color = texture(uSampler0, vTextureCoord);\n    FragColor = vec4(color.r);\n}":"\nin vec2 vTextureCoord;\nout vec4 FragColor;\n\nuniform float uDawn;\n\nconst vec3 dayColor = vec3(1.0);\nconst vec3 dawnColor = vec3(254.0 / 255.0, 255.0 / 255.0, 187.0 / 255.0);\n\nfloat circle(vec2 _st, float _radius){\n    vec2 dist = _st-vec2(0.5);\n\treturn 1.-smoothstep(_radius-(_radius*0.07),\n                         _radius+(_radius*0.07),\n                         dot(dist,dist)*4.0);\n}\n\nvoid main(void) {\n  float alpha = circle(vTextureCoord, 0.7);\n  vec3 color = mix(dayColor, dawnColor, uDawn);\n  color *= alpha;\n  FragColor = vec4(color, alpha);\n}"),this.manager=new Ae(e,"sun",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"sun"),this.quad.setScale(this.size,this.size,1),this.manager.add([this.quad]),i.stylized&&Qt(Pt("sun_mask.jpg"),"sun",this.quad)}resize(t,e){var n,i;this.screenSize=[t,e],this.size=this.baseSize*(null!==(i=null===(n=He.get(t,e))||void 0===n?void 0:n.sizeFactor)&&void 0!==i?i:1),this.quad.setScale(this.size,this.size,1),this.updatePosition()}update(t){this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uDawn"),Bt(t.sunAngle,!0)),this.sunAngle=t.sunAngle,this.sunDirection=t.sunDirection,this.updatePosition()}updatePosition(){let t=this.sunDirection*this.screenSize[0]-this.screenSize[0]/2,e=this.getY(this.sunAngle,this.screenSize[1]);this.config.updatePosition&&([t,e]=this.config.updatePosition([t,e],this.screenSize,this.sunAngle)),e-=this.screenSize[1]/2,this.quad.setPosition(t,e,0)}render(){this.scene.bindMeshManager(this.manager),this.scene.drawTriangles()}getY(t,e){const n=3.3/90;let i=t/50;const o=.01;return i=i>o?n+.84*(i-o):n*(2*(i- -.01)/.02-1),i=Math.min(.84,i),i*e}destroy(){}}class qe{constructor(t,e,n,i={}){this.scene=t,this.gl=e,this.config=i,this.size=62,this.moonPhase=0,this.lastImage="",this.requiredFps=0,this.program=new Ce(e,"moon",n,Re,"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\nuniform float uOpacity;\n\nvoid main(void) {\n    vec4 color = texture(uSampler0, vTextureCoord);\n    color.rgb *= color.a;\n    FragColor = uOpacity * color;\n}"),this.quad=new ge(e,1,1,[0,0,0],"moon"),this.quad.setScale(this.size,this.size,1),this.manager=new Ae(e,"moon",this.program,!1),this.manager.add([this.quad])}prepare(t){return this.update(t,!0),this.loadImage()}resize(t,e){let[n,i]=[.85*t-t/2,.84*e];this.config.updatePosition&&([n,i]=this.config.updatePosition([n,i],[t,e])),i-=e/2,this.quad.setPosition(n,i,0)}loadImage(){const t=Pt(`moon/moonage_${`${this.moonPhase}`.padStart(2,"0")}.png`);if(t===this.lastImage)return Promise.resolve();this.lastImage=t;const e=this.tex;return e?Kt(t).then((t=>(e.swapImage(t),e))):Qt(t,"moon",this.quad).then((t=>(this.tex=t,t)))}update(t,e){const n=.55*(1-Vt(t.sightDistance))+.45;this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uOpacity"),this.getOpacity(t.sunAngle)*n),this.moonPhase=t.moonPhase,e||this.loadImage()}render(){this.scene.bindMeshManager(this.manager),this.scene.drawTriangles()}getOpacity(t){let e=1;if(t>5)e=0;else if(t>-7){const n=(t-5)/-12;e=Math.pow(n,2)}return e}destroy(){}}class Ge{constructor(t,e,n){this.scene=t,this.gl=e,this.active=!1,this.intensity=0,this.nextTime=Number.NEGATIVE_INFINITY,this.random=new Pe,this.duration=0,this.consecutiveCounter=0,this.requiredFps=0,this.program=new Ce(e,"lightning",n,Re,"\nin vec2 vTextureCoord;\nout vec4 FragColor;\n\nuniform float uOpacity;\nuniform vec2 uPosition;\n\nvoid main(void) {\n    float d = distance(vTextureCoord, uPosition);\n    float f = smoothstep(1., 0., pow(d, 1.9));\n    FragColor = f * uOpacity * vec4(1.0);\n}"),this.manager=new Ae(e,"lightning",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"lightning"),this.manager.add([this.quad])}resize(t,e){const n=Math.max(t,e);this.quad.setScale(n,n,1)}update(t){this.intensity=t.lightning;const e=t.lightning>=.5;e?(this.updateNextTime(!0),this.updateDuration()):this.nextTime=Number.NEGATIVE_INFINITY,this.active=e,this.requiredFps=e?1:0}render(t){let e=0;this.nextTime-=t,this.nextTime>0&&this.nextTime<=this.duration&&(e=Math.abs((2*this.nextTime-this.duration)/this.duration)),this.active&&this.nextTime<0&&(this.updateNextTime(),this.updateDuration()),0!==e&&(this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uOpacity"),e),this.scene.bindMeshManager(this.manager),this.scene.drawTriangles())}updateDuration(){this.duration=this.random.fromTo(60,100)}updateNextTime(t){const e=this.intensity>.75;if(t)this.nextTime=e?1e3:1500;else{const t=e?.35:.15;if(this.consecutiveCounter<3&&this.random.get()<t)this.nextTime=this.random.fromTo(100,300);else{this.consecutiveCounter=0;const t=e?1500:3e3,n=e?4e3:8e3;this.nextTime=this.random.fromTo(t,n)}}this.program.makeCurrent(),this.gl.uniform2fv(this.program.getUniformPointer("uPosition"),this.getRandomPosition())}getRandomPosition(){return this.random.get()>.5?[this.random.get(),0]:[Math.round(this.random.get()),this.random.fromTo(0,.8)]}destroy(){}}class Xe{constructor(){this.wind=0,this.windTime=0,this.windTarget=0,this.windValue=0,this.lastWindChange=0,this.requiredFps=0}resize(){}update(t){this.windValue=t.wind,this.windTarget=this.getWindStrength(),0===this.windTime&&(this.wind=this.windValue)}render(t,e){const n=.01+.005*this.windValue;this.wind+=(this.windTarget-this.wind)*n,this.windTime+=this.wind*t,Math.random()>.995&&e-this.lastWindChange>800&&(this.windTarget=this.getWindStrength(!0),this.lastWindChange=e)}getWindStrength(t){let e=this.wind>=0?1:-1,n=.15+.3*this.windValue;return t&&(n+=.15*(2*Math.random()-1),Math.random()>.7&&(e*=-1)),e*n}destroy(){}}class Qe{constructor(t,e,n,i){this.scene=t,this.gl=e,this.config=i,this.active=!1,this.requiredFps=0,this.program=new Ce(e,"darken",n,Re,"\nin vec2 vTextureCoord;\nout vec4 FragColor;\nuniform vec4 uOffsets;\nuniform float uDarkenTop;\nuniform float uDarkenBottom;\nuniform float uDarken;\n\nconst vec4 color = vec4(0., 0.226, 0.349, 1.);\nconst vec4 black = vec4(0., 0., 0., 1.);\n\nvoid main(void) {\n  vec2 uv = vTextureCoord;\n  float maskTop= (1.-smoothstep(uOffsets.x, uOffsets.y, uv.y))*uDarkenTop;\n  uv.y = 1.-uv.y;\n  float maskBottom= (1.-smoothstep(uOffsets.z, uOffsets.w, uv.y))*uDarkenBottom;\n  float mask =min(maskBottom+maskTop,max(uDarkenTop, uDarkenBottom));\n\n  vec4 c = color*mask;\n  FragColor = mix(c, black, uDarken);\n}"),this.manager=new Ae(e,"background",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"sky"),this.manager.add([this.quad])}resize(t,e){var n,i,o,r;this.quad.setScale(t,e,1);let a=null!==(i=null===(n=this.config.darken)||void 0===n?void 0:n.topOffset)&&void 0!==i?i:0;a<0&&(a=e+a);let s=null!==(r=null===(o=this.config.darken)||void 0===o?void 0:o.bottomOffset)&&void 0!==r?r:0;if(s<0&&(s=e+s),a+s>e){const t=(a+s)/e;a=a/t-20,s=s/t-20}const l=a/e,c=(e-s)/e,u=(e-a)/e,h=s/e;this.program.makeCurrent(),this.gl.uniform4fv(this.program.getUniformPointer("uOffsets"),[l,c,h,u])}update(t){this.program.makeCurrent();let e=t.darken;this.config.noRender&&t.sunAngle>=0&&(e+=.1),this.gl.uniform1f(this.program.getUniformPointer("uDarkenTop"),t.darkenTop),this.gl.uniform1f(this.program.getUniformPointer("uDarkenBottom"),t.darkenBottom),this.gl.uniform1f(this.program.getUniformPointer("uDarken"),e),this.active=t.darkenTop>0||t.darkenBottom>0||e>0}render(){this.active&&(this.scene.bindMeshManager(this.manager),this.manager.setProgram(this.program),this.scene.drawTriangles())}destroy(){}}class Ke{constructor(t,e,n){this.scene=t,this.gl=e,this.active=!1,this.lastImageUrl="",this.width=0,this.height=0,this.requiredFps=0,this.program=new Ce(e,"mist_background",n,Re,"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\nuniform float uNight;\nuniform float uFog;\n\nconst float day = 0.4;\nconst float night = 0.05;\n\nvoid main(void) {\n    vec4 tex = texture(uSampler0, vTextureCoord);\n    vec4 col = mix(vec4(day, day, day, 1.0), vec4(night, night, night, 1.0), uNight);\n    // float alpha = pow(tex.a, 1.0 - uNight * 0.4);\n    float alpha = tex.a * (1.0 - uFog * 0.6);\n    FragColor = col * alpha;\n}"),this.manager=new Ae(e,"mist_background",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"mist_background"),this.manager.add([this.quad])}prepare(t,e,n){return this.update(t),this.active?(this.resize(e,n,!0),this.updateImage()):Promise.resolve()}updateImage(){let t=Pt("fog/trees_380x750.png");if(375===this.width&&160===this.height&&(t=Pt("fog/trees_375x160.png")),t===this.lastImageUrl)return Promise.resolve();this.lastImageUrl=t;const e=this.tex;return(e?Kt(t).then((t=>(e.swapImage(t),e))):Qt(t,"mist_background",this.quad).then((t=>(this.tex=t,t)))).then((t=>{const e=t.size;if(!e)return;const n=e[1]/e[0];let i=this.width,o=i*n;o<this.height&&(o=this.height,i/=n),this.quad.setScale(i,o,1),this.quad.setPosition(0,0,0)}))}resize(t,e,n){this.width=t,this.height=e,n||this.updateImage()}update(t){const e=Wt(t.sunAngle);this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uNight"),e),this.gl.uniform1f(this.program.getUniformPointer("uFog"),Ht(t.sightDistance)),this.active=t.sightDistance<=1e3&&t.symbol.startsWith("n")}render(){this.active&&(this.scene.bindMeshManager(this.manager),this.scene.drawTriangles())}destroy(){}}class $e extends he{init(t="NEAREST"){const e=this.gl;this.size||(this.size=[e.canvas.width,e.canvas.height]),this.imageData=null;const[n,i]=this.size;this.tex=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.tex),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,this.imageData),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[t]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[t]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null)}resize(t,e){const n=this.gl;n.bindTexture(n.TEXTURE_2D,this.tex),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,this.imageData),this.size=[t,e]}}class Je extends Error{constructor(t){super("Couldn't get canvas context"),this.canvas=t}}function tn(t){return Object.assign({x:0,y:0,r:0,spreadX:0,spreadY:0,momentum:0,momentumX:0,lastSpawn:0,nextSpawn:0,parent:null,isNew:!0,killed:!1,shrink:0},t)}const en={minR:10,maxR:40,maxDrops:900,rainChance:.3,rainLimit:3,dropletsRate:50,dropletsSize:[2,4],dropletsCleaningRadiusMultiplier:.43,raining:!0,globalTimeScale:1,trailRate:1,autoShrink:!0,spawnArea:[-.1,.95],trailScaleRange:[.2,.5],collisionRadius:.65,collisionRadiusIncrease:.01,dropFallMultiplier:1,collisionBoostMultiplier:.05,collisionBoost:1},nn={minRefraction:256,maxRefraction:512,brightness:1.1,alphaMultiply:20,alphaSubtract:5,shine:.35,lightRainReductionFactor:.25,maxDropletsRate:6,maxRainChance:.5,maxRainLimit:5,maxDropLetsSize:[3,6],maxRainSize:[10,20]},on=new ke([[Ot,{maxRainLimit:50,maxRainSize:[1.25,3.5]}],[Dt,{maxRainLimit:50,maxRainSize:[2,5.5]}]]),rn=64;function an(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n}function sn(t,e,n,i=(t=>t)){null==e?(e=0,n=1):null!=e&&null==n&&(n=e,e=0);const o=n-e;return e+i(t.get())*o}function ln(t,e){return sn(t)<=e}class cn{constructor({width:t,height:e,scale:n,dropColor:i,dropAlpha:o,options:r}){if(this.dropsGfx=[],this.drops=[],this.dropletsPixelDensity=1,this.textureCleaningIterations=0,this.kickstarted=!1,this.random=new Pe,this.width=t,this.height=e,this.scale=n,this.canvas=an(t,e),this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Je(this.canvas);if(this.droplets=an(t,e),this.dropletsCtx=this.droplets.getContext("2d"),!this.dropletsCtx)throw new Je(this.droplets);this.clearDropletsGfx=an(128,128),this.dropColor=i,this.dropAlpha=o,this.options=Object.assign(Object.assign({},en),r),this.initRendering()}kickstart({drops:t,droplets:e}){if(!this.kickstarted){if(this.kickstarted=!0,t>0){const e=this.updateRain(20*t);for(const t of e)this.drawDrop(this.ctx,t)}e>0&&this.updateDroplets(500*e)}}initRendering(){const t=an(rn,rn),e=t.getContext("2d");if(!e)throw new Je(t);this.dropsGfx=De(255).map(((n,i)=>{const o=an(rn,rn),r=o.getContext("2d");if(!r)throw new Je(o);return e.clearRect(0,0,rn,rn),e.globalCompositeOperation="source-over",e.drawImage(this.dropColor,0,0,rn,rn),e.globalCompositeOperation="screen",e.fillStyle="rgba(0,0,"+i+",1)",e.fillRect(0,0,rn,rn),r.globalCompositeOperation="source-over",r.drawImage(this.dropAlpha,0,0,rn,rn),r.globalCompositeOperation="source-in",r.drawImage(t,0,0,rn,rn),o}));const n=this.clearDropletsGfx.getContext("2d");if(!n)throw new Je(this.clearDropletsGfx);n.fillStyle="#000",n.beginPath(),n.arc(64,64,64,0,2*Math.PI),n.fill()}updateModel(t){this.options=Object.assign(Object.assign({},this.options),t)}update(t){this.clearCanvas();let e=t/(1/60*1e3);e>1.1&&(e=1.1),this.updateDroplets(e),this.updateDrops(e)}updateDrops(t){let e=[];const n=this.updateRain(t);e=e.concat(n),this.drops.sort(((t,e)=>{const n=t.y*(this.width/this.scale)+t.x,i=e.y*(this.width/this.scale)+e.x;return n>i?1:n==i?0:-1})),this.drops.forEach(((n,i)=>{if(!n.killed){const o=this.options;if(ln(this.random,(n.r-o.minR*o.dropFallMultiplier)*(.1/this.deltaR)*t)&&(n.momentum+=sn(this.random,n.r/o.maxR*4)),o.autoShrink&&n.r<=o.minR&&ln(this.random,.05*t)&&(n.shrink+=.01),n.r-=n.shrink*t,n.r<=0&&(n.killed=!0),o.raining&&(n.lastSpawn+=n.momentum*t*o.trailRate,n.lastSpawn>n.nextSpawn)){const i=this.createDrop({x:n.x+.1*sn(this.random,-n.r,n.r),y:n.y-.01*n.r,r:n.r*sn(this.random,...o.trailScaleRange),spreadY:.1*n.momentum,parent:n});null!=i&&(e.push(i),n.r*=Math.pow(.97,t),n.lastSpawn=0,n.nextSpawn=sn(this.random,o.minR,o.maxR)-2*n.momentum*o.trailRate+(o.maxR-n.r))}n.spreadX*=Math.pow(.4,t),n.spreadY*=Math.pow(.7,t);const r=n.momentum>0;r&&!n.killed&&(n.y+=n.momentum*o.globalTimeScale,n.x+=n.momentumX*o.globalTimeScale,n.y>this.height/this.scale+n.r&&(n.killed=!0));const a=(r||n.isNew)&&!n.killed;n.isNew=!1,a&&this.drops.slice(i+1,i+70).forEach((e=>{if(n!=e&&n.r>e.r&&n.parent!=e&&e.parent!=n&&!e.killed){const i=e.x-n.x,r=e.y-n.y;if(Math.sqrt(i*i+r*r)<(n.r+e.r)*(o.collisionRadius+n.momentum*o.collisionRadiusIncrease*t)){const t=Math.PI,r=n.r,a=e.r,s=t*(r*r),l=t*(a*a);let c=Math.sqrt((s+.8*l)/t);c>o.maxR&&(c=o.maxR),n.r=c,n.momentumX+=.1*i,n.spreadX=0,n.spreadY=0,e.killed=!0,n.momentum=Math.max(e.momentum,Math.min(40,n.momentum+c*o.collisionBoostMultiplier+o.collisionBoost))}}})),n.momentum-=.1*Math.max(1,.5*o.minR-n.momentum)*t,n.momentum<0&&(n.momentum=0),n.momentumX*=Math.pow(.7,t),n.killed||(e.push(n),r&&o.dropletsRate>0&&this.clearDroplets(n.x,n.y,n.r*o.dropletsCleaningRadiusMultiplier),this.drawDrop(this.ctx,n))}}),this),this.drops=e}drawDrop(t,e){if(this.dropsGfx.length>0){const n=e.x,i=e.y,o=e.r,r=e.spreadX,a=e.spreadY,s=1,l=1.5;let c=Math.max(0,Math.min(1,(o-this.options.minR)/this.deltaR*.9));c*=1/(.5*(e.spreadX+e.spreadY)+1),t.globalAlpha=1,t.globalCompositeOperation="source-over",c=Math.floor(c*(this.dropsGfx.length-1)),t.drawImage(this.dropsGfx[c],(n-o*s*(r+1))*this.scale,(i-o*l*(a+1))*this.scale,2*o*s*(r+1)*this.scale,2*o*l*(a+1)*this.scale)}}updateDroplets(t){if(this.textureCleaningIterations>0&&(this.textureCleaningIterations-=1*t,this.dropletsCtx.globalCompositeOperation="destination-out",this.dropletsCtx.fillStyle="rgba(0,0,0,"+.05*t+")",this.dropletsCtx.fillRect(0,0,this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity)),this.options.raining){!function(t,e){for(let n=0;n<t;n++)e(n)}(this.options.dropletsRate*t*this.areaMultiplier,(()=>{this.drawDroplet(sn(this.random,this.width/this.scale),sn(this.random,this.height/this.scale),sn(this.random,...this.options.dropletsSize,(t=>t*t)))}))}this.ctx.drawImage(this.droplets,0,0,this.width,this.height)}drawDroplet(t,e,n){this.drawDrop(this.dropletsCtx,tn({x:t*this.dropletsPixelDensity,y:e*this.dropletsPixelDensity,r:n*this.dropletsPixelDensity}))}updateRain(t){const e=[];if(this.options.raining){const n=this.options.rainLimit*t*this.areaMultiplier;let i=0;for(;ln(this.random,this.options.rainChance*t*this.areaMultiplier)&&i<n;){i++;const t=sn(this.random,this.options.minR,this.options.maxR,(t=>Math.pow(t,3))),n=this.createDrop({x:sn(this.random,this.width/this.scale),y:sn(this.random,this.height/this.scale*this.options.spawnArea[0],this.height/this.scale*this.options.spawnArea[1]),r:t,momentum:1+.1*(t-this.options.minR)+sn(this.random,2),spreadX:1.5,spreadY:1.5});null!=n&&e.push(n)}}return e}createDrop(t){return this.drops.length>=this.options.maxDrops*this.areaMultiplier?null:tn(t)}clearDroplets(t,e,n=30){const i=this.dropletsCtx;i.globalCompositeOperation="destination-out",i.drawImage(this.clearDropletsGfx,(t-n)*this.dropletsPixelDensity*this.scale,(e-n)*this.dropletsPixelDensity*this.scale,2*n*this.dropletsPixelDensity*this.scale,2*n*this.dropletsPixelDensity*this.scale*1.5)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}clearDrops(){this.drops.forEach((t=>{setTimeout((()=>{t.shrink=.1+sn(this.random,.5)}),sn(this.random,1200))})),this.clearTexture()}clearTexture(){this.textureCleaningIterations=50}get deltaR(){return this.options.maxR-this.options.minR}get area(){return this.width*this.height/this.scale}get areaMultiplier(){return Math.sqrt(this.area/786432)}}class un{constructor(t,e,n,i){this.scene=t,this.gl=e,this.config=i,this.active=!1,this.renderThis=!0,this.requiredFps=0,this.renderOptions=new ue,this.program=new Ce(e,"window_effect",n,Re,'precision mediump float;\n\n// textures\nuniform sampler2D uSampler0; // background\nuniform sampler2D uDropSampler; // rain drops\nuniform sampler2D uSampler2; // shine\n\nin vec2 vTextureCoord;\nuniform float uMinRefraction;\nuniform float uRefractionDelta;\nuniform float uBrightness;\nuniform float uAlphaMultiply;\nuniform float uAlphaSubtract;\nuniform float uBlur;\nuniform float uRenderShine;\nuniform vec2 uTextureSize;\n\nout vec4 FragColor;\n\n// alpha-blends two colors\nvec4 blend(vec4 bg,vec4 fg){\n  vec3 bgm=bg.rgb*bg.a;\n  vec3 fgm=fg.rgb*fg.a;\n  float ia=1.0-fg.a;\n  float a=(fg.a + bg.a * ia);\n  vec3 rgb;\n  if(a!=0.0){\n    rgb=(fgm + bgm * ia) / a;\n  }else{\n    rgb=vec3(0.0,0.0,0.0);\n  }\n  return vec4(rgb,a);\n}\n\nconst float c_blurSize = 1.0/1000.0;\nvec4 getBg(vec2 texCoord) {\n  if (uBlur == 0.) {\n    return texture(uSampler0, texCoord);\n  }\n  float blurSize = uBlur * c_blurSize;\n  vec4 texColor = vec4(0.0);\n  texColor += texture(uSampler0, texCoord - 4.0*blurSize) * 0.05;\n  texColor += texture(uSampler0, texCoord - 3.0*blurSize) * 0.09;\n  texColor += texture(uSampler0, texCoord - 2.0*blurSize) * 0.12;\n  texColor += texture(uSampler0, texCoord - blurSize) * 0.15;\n  texColor += texture(uSampler0, texCoord) * 0.16;\n  texColor += texture(uSampler0, texCoord + blurSize) * 0.15;\n  texColor += texture(uSampler0, texCoord + 2.0*blurSize) * 0.12;\n  texColor += texture(uSampler0, texCoord + 3.0*blurSize) * 0.09;\n  texColor += texture(uSampler0, texCoord + 4.0*blurSize) * 0.05;\n  return texColor;\n}\n\nvoid main() {\n  vec2 uv = vec2(vTextureCoord.x, 1.0 - vTextureCoord.y);\n  vec4 background=getBg(uv);\n\n  //drops.b => thickness\n  //for what ever reasons r denotes y direction and g  x direction, so swizzle dat shit\n  vec4 drops = texture(uDropSampler, vTextureCoord);\n\n  float a=clamp(drops.a*uAlphaMultiply-uAlphaSubtract, 0.0,1.0);\n\n  vec2 refraction = (drops.gr-0.5)*2.0;\n  vec2 refractionPos = uv + vec2(1.0,-1.0)*(1./uTextureSize*refraction*(uMinRefraction+(drops.b*uRefractionDelta)));\n\n  vec4 displacedBackground=texture(uSampler0,refractionPos);\n\n  if(uRenderShine>0.){\n    float d=drops.b; // "thickness"\n    float maxShine=490.0;\n    float minShine=maxShine*0.18;\n    vec2 shinePos=vec2(0.5) + ((1.0/512.0)*refraction)* -(minShine+((maxShine-minShine)*d));\n    vec4 shine=texture(uSampler2,shinePos);\n    shine.a *= uRenderShine;\n    displacedBackground=blend(displacedBackground,shine);\n  }\n\n  vec4 fg=vec4(displacedBackground.rgb*uBrightness,a);\n\n  FragColor = blend(background, fg);\n}\n'),this.manager=new Ae(e,"window_effect",this.program,!0),this.quad=new ge(e,1,1,[0,0,0]),this.manager.add([this.quad]),this.offScreenFB=this.scene.initFramebuffer(),this.offScreenFBTexture=new $e(this.gl,"tex","uSampler0",[1,1]),this.offScreenFBTexture.init("LINEAR"),this.offScreenFBTexture.attachToFrameBuffer(this.offScreenFB),this.renderOptions.addUniformNumber("uTime",0,"uniform1f"),this.renderOptions.addUniformNumberArray("uTextureSize",[this.gl.canvas.width,this.gl.canvas.height],"uniform2fv"),this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uMinRefraction"),nn.minRefraction),this.gl.uniform1f(this.program.getUniformPointer("uRefractionDelta"),nn.maxRefraction-nn.minRefraction),this.gl.uniform1f(this.program.getUniformPointer("uBrightness"),nn.brightness),this.gl.uniform1f(this.program.getUniformPointer("uAlphaMultiply"),nn.alphaMultiply),this.gl.uniform1f(this.program.getUniformPointer("uAlphaSubtract"),nn.alphaSubtract),this.gl.uniform1f(this.program.getUniformPointer("uRenderShine"),nn.shine)}prepare(){return Promise.all([Kt(Pt("drops/drop-color.png")).then((t=>this.dropColor=t)),Kt(Pt("drops/drop-alpha.png")).then((t=>this.dropAlpha=t)),Xt(Pt("drops/drop-shine2.png"),"dropNormals",this.manager)])}resize(t,e){this.quad.setScale(t,e,1),this.scene.resizeFramebufferTexture(this.offScreenFBTexture.getTexture(),t,e),this.program.makeCurrent(),this.dropColor&&this.dropAlpha?(this.drops=new cn({width:t,height:e,scale:1,dropColor:this.dropColor,dropAlpha:this.dropAlpha,options:{}}),this.dropTex=new de(this.gl,"drop_tex","uDropSampler",[t,e]),this.dropTex.init("LINEAR",this.drops.canvas),this.renderOptions.textures.set("drop",this.dropTex),this.staticConfig=on.get(t,e),this.model&&this.update(this.model)):console.error("didn't load images")}update(t){var e,n,i;this.model=t;let o=t.rain;const r=!!this.config.noRender;r&&t.snow>0&&(o=0);const a=Wt(t.sunAngle);this.active=o>0&&0===t.freezing,this.renderThis=0==t.freezing,clearTimeout(this.setRequiredFpsTimeout),this.active?this.requiredFps=1:this.setRequiredFpsTimeout=setTimeout((()=>this.requiredFps=0),3e3);const s=Object.assign(Object.assign({},nn),this.staticConfig),l=r?1:Yt(nn.lightRainReductionFactor,1,o);null===(e=this.drops)||void 0===e||e.updateModel({raining:o>0,rainChance:l*s.maxRainChance,rainLimit:l*s.maxRainLimit,dropletsSize:s.maxDropLetsSize,dropletsRate:l*s.maxDropletsRate,minR:l*s.maxRainSize[0],maxR:l*s.maxRainSize[1]}),this.program.makeCurrent(),this.gl.uniform1f(this.program.getUniformPointer("uBlur"),0),this.gl.uniform1f(this.program.getUniformPointer("uBrightness"),1.05+.2*a),this.gl.uniform1f(this.program.getUniformPointer("uRenderShine"),.1),o>0?null===(n=this.drops)||void 0===n||n.kickstart({droplets:r?0:.25,drops:r?1:.5}):null===(i=this.drops)||void 0===i||i.clearDrops()}preRender(){this.renderThis&&this.scene.useFramebuffer(this.offScreenFB,"offscreen")}render(t,e){this.drops&&this.dropTex&&this.renderThis&&(this.scene.useDefaultFramebuffer(),this.config.noRender||this.drops.update(t),this.dropTex.activate(0),this.dropTex.swapImage(this.drops.canvas),this.scene.bindMeshManager(this.manager),this.manager.setProgram(this.program),this.renderOptions.setUniformNumber("uTime",e),this.scene.drawOffscreenTexture(this.offScreenFBTexture,this.renderOptions))}destroy(){}}class hn{constructor(t,e){this.shouldNotRender=!1,this.destroy=()=>{};const n=e.makeChild("[elementvisibility]");if("function"==typeof IntersectionObserver){const e=new IntersectionObserver((t=>{t.length&&(this.shouldNotRender=t[0].intersectionRatio<=0,n.debug(`will ${this.shouldNotRender?"stop":"resume"} rendering`))}),{rootMargin:"10px",threshold:0});e.observe(t),this.destroy=()=>e.disconnect()}else n.debug("IntersectionObserver not supported")}}class dn{constructor(t){this.shouldNotRender=document.hidden;const e=t.makeChild("[visibilitychange]"),n=()=>{this.shouldNotRender=document.hidden,e.debug(`will ${this.shouldNotRender?"stop":"resume"} rendering`)};document.addEventListener("visibilitychange",n,{passive:!0}),this.destroy=()=>document.removeEventListener("visibilitychange",n)}}class pn{constructor(t,e,n){this.scene=t,this.gl=e,this.frostNormalsImg=Pt("freeze_drops.jpg"),this.active=!1,this.renderOptions=new ue,this.requiredFps=0,this.frostProgram=new Ce(e,"frost",n,Re,"\nin vec2 vTextureCoord;\n\nuniform vec2 uTextureSize;\nuniform sampler2D uSampler0;  //background texture\nuniform sampler2D uSampler1;  //frost normals\nuniform float uAmount;\n\nout vec4 FragColor;\n\nvoid main()\n{\n  vec2 uvN = vTextureCoord;\n  uvN*=uTextureSize/vec2(500.);\n  vec2 normals = texture(uSampler1, uvN).st;\n  vec4 fg = texture(uSampler0, vTextureCoord+normals-0.5);\n  vec4 bg = texture(uSampler0, vTextureCoord);\n  float d = distance(vTextureCoord,vec2(0.5));\n  float mask = mix(max(0.0, uAmount - 0.5) * 2.0, min(1.0, 2.0 * uAmount), d);\n  FragColor = mix(bg, fg, mask);\n}"),this.preprocessingProgram=new Ce(e,"preprocess",n,Re,"\nin vec2 vTextureCoord;\n\nuniform sampler2D uSampler0;  //background texture\nuniform float uAmount;\n\nout vec4 FragColor;\n\nconst vec3 color = vec3(0., 0.226, 0.349);\n\nvoid main()\n{\n  vec4 tex = texture(uSampler0, vTextureCoord);\n  float d = distance(vTextureCoord,vec2(0.5));\n  float mask = uAmount * smoothstep(0.6, 0.8, d);\n  FragColor = vec4(mix(tex.rgb, color, mask),1.);\n}"),this.manager=new Ae(e,"frostWindowEffect",this.frostProgram,!0),this.quad=new ge(e,1,1,[0,0,0],"frostWindowEffect"),this.quad.setUVs([0,0,0,1,1,1,1,0]),this.manager.add([this.quad]),this.offScreenFB=this.scene.initFramebuffer(),this.offScreenFBTexture=new $e(this.gl,"tex","uSampler0",[1,1]),this.offScreenFBTexture.init("LINEAR"),this.offScreenFBTexture.attachToFrameBuffer(this.offScreenFB),this.preprocessFB=this.scene.initFramebuffer(),this.preprocessFBTexture=new $e(this.gl,"pretex","uSampler0",[1,1]),this.preprocessFBTexture.init("LINEAR"),this.preprocessFBTexture.attachToFrameBuffer(this.preprocessFB),Xt(this.frostNormalsImg,"frostNormals",this.manager).then((t=>{t.setWrappingMode("REPEAT")}))}resize(t,e){this.quad.setScale(t,e,1),this.offScreenFBTexture.resize(t,e),this.preprocessFBTexture.resize(t,e)}update(t){this.active=t.freezing>0&&0==t.rain,this.frostProgram.makeCurrent(),this.gl.uniform1f(this.frostProgram.getUniformPointer("uAmount"),t.freezing),this.preprocessingProgram.makeCurrent(),this.gl.uniform1f(this.preprocessingProgram.getUniformPointer("uAmount"),t.freezing)}preRender(){this.active&&this.scene.useFramebuffer(this.offScreenFB,"offscreen")}render(){this.active&&(this.scene.useFramebuffer(this.preprocessFB,"preprocess"),this.scene.bindMeshManager(this.manager),this.manager.setProgram(this.preprocessingProgram),this.scene.drawOffscreenTexture(this.offScreenFBTexture,this.renderOptions),this.scene.useDefaultFramebuffer(),this.manager.setProgram(this.frostProgram),this.scene.drawOffscreenTexture(this.preprocessFBTexture,this.renderOptions))}destroy(){}}class fn{constructor(t,e,n){this.scene=t,this.active=!1,this.images=new ke([[Ot,Pt("lightning/lightning_01-375x160.png")],[Dt,Pt("lightning/lightning_01-380x750.png")]]),this.requiredFps=0,this.program=new Ce(e,"lightning_static",n,Re,"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\n\nvoid main(void) {\n    float val = texture(uSampler0, vTextureCoord).r;\n    FragColor = vec4(val, val, val, val);\n}"),this.manager=new Ae(e,"lightning",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"lightning"),this.manager.add([this.quad])}prepare(t,e,n){if(this.update(t),!this.active)return Promise.resolve();const i=this.images.get(e,n);return i?Qt(i,"lightning",this.quad):Promise.reject()}resize(t,e){this.quad.setScale(t,e,1),this.quad.setPosition(0,0,0)}update(t){this.active=t.lightning>0}render(){this.active&&(this.scene.bindMeshManager(this.manager),this.scene.drawTriangles())}destroy(){}}class mn{constructor(t,e,n,i){this.scene=t,this.gl=e,this.config=i,this.requiredFps=0,this.program=new Ce(e,"image",n,Re,"\nin vec2 vTextureCoord;\n\nout vec4 FragColor;\n\nuniform sampler2D uSampler0;\n\nvoid main(void) {\n    FragColor = texture(uSampler0, vTextureCoord);\n}"),this.manager=new Ae(e,"image",this.program,!1),this.quad=new ge(e,1,1,[0,0,0],"image"),this.manager.add([this.quad])}prepare(){return Qt(this.config.url,"img",this.quad)}update(){}resize(t,e){const n=Math.max(t,e);this.quad.setScale(n,n,1),this.quad.setPosition((t-n)/2,(e-n)/2,0)}render(){this.scene.bindMeshManager(this.manager),this.scene.drawTriangles()}destroy(){}}class gn{constructor(t,e,n){var i;this.container=t,this.config=n,this.active=!1,this.timeFactor=1,this.previousSize=[-1,-1],this.elements=[],this.paused=!1,this.logger=null!==(i=this.config.logger)&&void 0!==i?i:kt,this.renderingRequirements=[],this.dirty=!0,this.destroyed=!1,this.destroyables=[],this.autoRender=!this.config.noRender,this._render=this.render.bind(this),this._lastTime=0,this.fpsLimit=31,this.af=0;const o=this.canvas=function(t,e,n){const i=document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i}("canvas",void 0,t);o.style.display="none",o.style.position="absolute",o.style.left=o.style.top="0",n.noRender||setTimeout((()=>{this.destroyed||this.renderingRequirements.push(this.addDestroyable(new hn(o,this.logger)),this.addDestroyable(new dn(this.logger)))}),2e3);const r=te.highestAvailableWebGLVersion();if(!r)throw new Error("Couldn't get webgl version");this.webGLVersion=r,this.gl=te.getWebGLContext(o,r,["OES_vertex_array_object","ANGLE_instanced_arrays"]);try{const t=o.height,n=o.width;this.camera=new ce(n,t,60,new Float32Array([0,0])),this.scene=new Jt(this.camera,this.gl),this.scene.init(),this.initPromise=this.init(e)}catch(t){throw this.destroy(),t}}init(t){return(0,wt.__awaiter)(this,void 0,void 0,(function*(){const{width:e,height:n}=this.size,i=yield Mt().fetchConfig();let o,r=this.makeElements(i.elements);r=yield Promise.all(r.map((i=>{var o,r;return(null!==(r=null===(o=i.prepare)||void 0===o?void 0:o.call(i,t.get(),e,n))&&void 0!==r?r:Promise.resolve()).then((()=>i)).catch((t=>{if(!i.nonEssential&&!this.config.dontFailOnError)throw t;return this.logger.error("Couldn't prepare layer:",i,t),null}))}))).then((t=>t.filter((t=>!!t)))),this.elements.push(...r),this.resize();window.addEventListener("resize",(()=>{clearTimeout(o),o=setTimeout((()=>this.resize()),250)})),t.addListener((t=>{this.timeFactor=t.timeFactor;for(const e of this.elements)e.update(t);this.dirty=!0})),this._render()}))}renderFrame(){this.autoRender||this.render()}render(){var t;if(this.destroyed)return;cancelAnimationFrame(this.af),this.autoRender&&(this.af=requestAnimationFrame(this._render));let e=performance.now();if(this.active){let t=this.paused;for(const e of this.renderingRequirements)e.shouldNotRender&&(t=!0);if(t)return void(this._lastTime=e)}let n=0===this._lastTime?0:e-this._lastTime,i=this.fpsLimit;if(this.dirty||(i*=this.elements.map((t=>t.requiredFps)).reduce(((t,e)=>Math.max(t,e)),0)),!i||this._lastTime>0&&n<1e3/i)0===i&&(this._lastTime=e);else{this._lastTime=e,n*=this.timeFactor,e*=this.timeFactor;for(const e of this.elements)null===(t=e.preRender)||void 0===t||t.call(e);for(const t of this.elements)t.render(n,e);this.active||(this.active=!0,this.canvas.style.display=""),this.dirty=!1}}destroy(){var t;if(this.destroyed)return;this.destroyed=!0;for(const t of this.renderingRequirements)t.destroy();for(const e of this.elements)null===(t=e.destroy)||void 0===t||t.call(e);const e=this.canvas.parentElement;e&&e.removeChild(this.canvas)}resize(){const{width:t,height:e}=this.size;if(0===t||0===e)throw new Error("Canvas size is 0!");if(t!==this.previousSize[0]||e!==this.previousSize[1]){this.previousSize=[t,e],this.gl.viewport(0,0,t,e),this.camera.reSize(t,e),this.canvas.width=t,this.canvas.height=e;for(const n of this.elements)n.resize(t,e);this.logger.info(`Resized to ${t}x${e}`),this.dirty=!0}}get size(){return{width:this.container.clientWidth,height:this.container.clientHeight}}