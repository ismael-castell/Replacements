SystemJS.config({baseURL:".",paths:{"github:":"src/js/vendor/github/","npm:":"src/js/vendor/npm/","tgs/":"src/js/modules/"},bundles:{"src/js/bundles/editor-v1.js":["tgs/components/editor/wysibb.js","github:jangarcia/nodejs-html-truncate@master/lib/truncate.js","github:jangarcia/nodejs-html-truncate@master.json","npm:linkifyjs@2.1.4/html.js","npm:linkifyjs@2.1.4.json","npm:linkifyjs@2.1.4/lib/linkify-html.js","npm:linkifyjs@2.1.4/lib/linkify.js","npm:linkifyjs@2.1.4/lib/linkify/core/parser.js","npm:linkifyjs@2.1.4/lib/linkify/core/tokens/multi.js","npm:linkifyjs@2.1.4/lib/linkify/core/tokens/text.js","npm:linkifyjs@2.1.4/lib/linkify/utils/class.js","npm:linkifyjs@2.1.4/lib/linkify/core/tokens/create-token-class.js","npm:linkifyjs@2.1.4/lib/linkify/core/state.js","npm:linkifyjs@2.1.4/lib/linkify/core/scanner.js","npm:linkifyjs@2.1.4/lib/linkify/utils/options.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer/tokenize.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer/html5-named-char-refs.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer/entity-parser.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer/tokenizer.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer/evented-tokenizer.js","npm:linkifyjs@2.1.4/lib/simple-html-tokenizer/utils.js","tgs/components/editor/lang/de.js"],"src/js/bundles/channelizer.js":["tgs/channelizer.js"],"src/js/bundles/common.js":["tgs/controllers/wbWidget.js","tgs/framework/controller.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12.json","npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","tgs/controllers/voting.js","tgs/controllers/userprofile/userProfileForm.js","tgs/services/utils.js","tgs/components/message.js","tgs/framework/service.js","tgs/app.js","tgs/components/deprecated/form.js","npm:sha1@1.1.1/sha1.js","npm:sha1@1.1.1.json","npm:jspm-nodelibs-buffer@0.2.0/global.js","npm:jspm-nodelibs-buffer@0.2.0.json","npm:buffer@4.9.1/index.js","npm:buffer@4.9.1.json","npm:jspm-nodelibs-process@0.2.0/process.js","npm:jspm-nodelibs-process@0.2.0.json","npm:isarray@1.0.0/index.js","npm:isarray@1.0.0.json","npm:ieee754@1.1.8/index.js","npm:ieee754@1.1.8.json","npm:base64-js@1.2.0/index.js","npm:base64-js@1.2.0.json","npm:charenc@0.0.1/charenc.js","npm:charenc@0.0.1.json","npm:crypt@0.0.1/crypt.js","npm:crypt@0.0.1.json","npm:md5@2.1.0/md5.js","npm:md5@2.1.0.json","npm:is-buffer@1.1.3/index.js","npm:is-buffer@1.1.3.json","tgs/services/skiplinks.js","tgs/services/mobileDetector.js","tgs/services/layer.js","tgs/services/authentication.js","tgs/templates/userMenuTemplate.hbs","github:components/handlebars.js@4.0.5/handlebars.runtime.js","github:components/handlebars.js@4.0.5.json","github:ineentho/plugin-hbs@1.2.2.json","tgs/services/ads.js","tgs/services/analytics.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","npm:jquery@2.2.4/dist/jquery.js","npm:jquery@2.2.4.json","tgs/framework/app.js","tgs/framework/services/utils.js","tgs/framework/services/logger.js","npm:unfetch@3.1.1/polyfill.js","npm:unfetch@3.1.1.json","npm:unfetch@3.1.1/dist/unfetch.js","npm:element-closest@2.0.2/element-closest.js","npm:element-closest@2.0.2.json","npm:core-js@2.4.1/es6/set.js","npm:core-js@2.4.1.json","npm:core-js@2.4.1/modules/_core.js","npm:core-js@2.4.1/modules/es6.set.js","npm:core-js@2.4.1/modules/_collection.js","npm:core-js@2.4.1/modules/_inherit-if-required.js","npm:core-js@2.4.1/modules/_set-proto.js","npm:core-js@2.4.1/modules/_object-gopd.js","npm:core-js@2.4.1/modules/_descriptors.js","npm:core-js@2.4.1/modules/_fails.js","npm:core-js@2.4.1/modules/_ie8-dom-define.js","npm:core-js@2.4.1/modules/_dom-create.js","npm:core-js@2.4.1/modules/_global.js","npm:core-js@2.4.1/modules/_is-object.js","npm:core-js@2.4.1/modules/_has.js","npm:core-js@2.4.1/modules/_to-primitive.js","npm:core-js@2.4.1/modules/_to-iobject.js","npm:core-js@2.4.1/modules/_defined.js","npm:core-js@2.4.1/modules/_iobject.js","npm:core-js@2.4.1/modules/_cof.js","npm:core-js@2.4.1/modules/_property-desc.js","npm:core-js@2.4.1/modules/_object-pie.js","npm:core-js@2.4.1/modules/_ctx.js","npm:core-js@2.4.1/modules/_a-function.js","npm:core-js@2.4.1/modules/_an-object.js","npm:core-js@2.4.1/modules/_set-to-string-tag.js","npm:core-js@2.4.1/modules/_wks.js","npm:core-js@2.4.1/modules/_uid.js","npm:core-js@2.4.1/modules/_shared.js","npm:core-js@2.4.1/modules/_object-dp.js","npm:core-js@2.4.1/modules/_iter-detect.js","npm:core-js@2.4.1/modules/_an-instance.js","npm:core-js@2.4.1/modules/_for-of.js","npm:core-js@2.4.1/modules/core.get-iterator-method.js","npm:core-js@2.4.1/modules/_iterators.js","npm:core-js@2.4.1/modules/_classof.js","npm:core-js@2.4.1/modules/_to-length.js","npm:core-js@2.4.1/modules/_to-integer.js","npm:core-js@2.4.1/modules/_is-array-iter.js","npm:core-js@2.4.1/modules/_iter-call.js","npm:core-js@2.4.1/modules/_meta.js","npm:core-js@2.4.1/modules/_redefine-all.js","npm:core-js@2.4.1/modules/_redefine.js","npm:core-js@2.4.1/modules/_hide.js","npm:core-js@2.4.1/modules/_export.js","npm:core-js@2.4.1/modules/_collection-strong.js","npm:core-js@2.4.1/modules/_set-species.js","npm:core-js@2.4.1/modules/_iter-step.js","npm:core-js@2.4.1/modules/_iter-define.js","npm:core-js@2.4.1/modules/_object-gpo.js","npm:core-js@2.4.1/modules/_shared-key.js","npm:core-js@2.4.1/modules/_to-object.js","npm:core-js@2.4.1/modules/_iter-create.js","npm:core-js@2.4.1/modules/_object-create.js","npm:core-js@2.4.1/modules/_html.js","npm:core-js@2.4.1/modules/_enum-bug-keys.js","npm:core-js@2.4.1/modules/_object-dps.js","npm:core-js@2.4.1/modules/_object-keys.js","npm:core-js@2.4.1/modules/_object-keys-internal.js","npm:core-js@2.4.1/modules/_array-includes.js","npm:core-js@2.4.1/modules/_to-index.js","npm:core-js@2.4.1/modules/_library.js","npm:core-js@2.4.1/modules/web.dom.iterable.js","npm:core-js@2.4.1/modules/es6.array.iterator.js","npm:core-js@2.4.1/modules/_add-to-unscopables.js","npm:core-js@2.4.1/modules/es6.string.iterator.js","npm:core-js@2.4.1/modules/_string-at.js","npm:core-js@2.4.1/modules/es6.object.to-string.js","npm:core-js@2.4.1/es6/map.js","npm:core-js@2.4.1/modules/es6.map.js","npm:core-js@2.4.1/es6/number.js","npm:core-js@2.4.1/modules/es6.number.parse-int.js","npm:core-js@2.4.1/modules/_parse-int.js","npm:core-js@2.4.1/modules/_string-ws.js","npm:core-js@2.4.1/modules/_string-trim.js","npm:core-js@2.4.1/modules/es6.number.parse-float.js","npm:core-js@2.4.1/modules/_parse-float.js","npm:core-js@2.4.1/modules/es6.number.min-safe-integer.js","npm:core-js@2.4.1/modules/es6.number.max-safe-integer.js","npm:core-js@2.4.1/modules/es6.number.is-safe-integer.js","npm:core-js@2.4.1/modules/_is-integer.js","npm:core-js@2.4.1/modules/es6.number.is-nan.js","npm:core-js@2.4.1/modules/es6.number.is-integer.js","npm:core-js@2.4.1/modules/es6.number.is-finite.js","npm:core-js@2.4.1/modules/es6.number.epsilon.js","npm:core-js@2.4.1/modules/es6.number.to-precision.js","npm:core-js@2.4.1/modules/_a-number-value.js","npm:core-js@2.4.1/modules/es6.number.to-fixed.js","npm:core-js@2.4.1/modules/_string-repeat.js","npm:core-js@2.4.1/modules/es6.number.constructor.js","npm:core-js@2.4.1/modules/_object-gopn.js","npm:core-js@2.4.1/fn/array/sort.js","npm:core-js@2.4.1/modules/es6.array.sort.js","npm:core-js@2.4.1/modules/_strict-method.js","npm:core-js@2.4.1/fn/array/join.js","npm:core-js@2.4.1/modules/es6.array.join.js","npm:core-js@2.4.1/fn/array/slice.js","npm:core-js@2.4.1/modules/es6.array.slice.js","npm:core-js@2.4.1/fn/array/entries.js","npm:core-js@2.4.1/fn/array/keys.js","npm:core-js@2.4.1/fn/array/values.js","npm:core-js@2.4.1/fn/array/find-index.js","npm:core-js@2.4.1/modules/es6.array.find-index.js","npm:core-js@2.4.1/modules/_array-methods.js","npm:core-js@2.4.1/modules/_array-species-create.js","npm:core-js@2.4.1/modules/_array-species-constructor.js","npm:core-js@2.4.1/modules/_is-array.js","npm:core-js@2.4.1/fn/array/find.js","npm:core-js@2.4.1/modules/es6.array.find.js","npm:core-js@2.4.1/fn/array/fill.js","npm:core-js@2.4.1/modules/es6.array.fill.js","npm:core-js@2.4.1/modules/_array-fill.js","npm:core-js@2.4.1/fn/array/copy-within.js","npm:core-js@2.4.1/modules/es6.array.copy-within.js","npm:core-js@2.4.1/modules/_array-copy-within.js","npm:core-js@2.4.1/fn/array/includes.js","npm:core-js@2.4.1/modules/es7.array.includes.js","npm:core-js@2.4.1/fn/array/iterator.js","npm:core-js@2.4.1/fn/array/of.js","npm:core-js@2.4.1/modules/es6.array.of.js","npm:core-js@2.4.1/modules/_create-property.js","npm:core-js@2.4.1/fn/array/from.js","npm:core-js@2.4.1/modules/es6.array.from.js","npm:core-js@2.4.1/fn/function/name.js","npm:core-js@2.4.1/modules/es6.function.name.js","npm:core-js@2.4.1/fn/object/assign.js","npm:core-js@2.4.1/modules/es6.object.assign.js","npm:core-js@2.4.1/modules/_object-assign.js","npm:core-js@2.4.1/modules/_object-gops.js","npm:ima.js-babel6-polyfill@0.1.1/index.js","npm:ima.js-babel6-polyfill@0.1.1.json","npm:systemjs-plugin-babel@0.0.12/babel-helpers/get.js","tgs/controllers/forms/form.js","tgs/services/validator.js","tgs/components/tooltip.js","tgs/controllers/userprofile/uploadForm.js","tgs/controllers/userprofile/moreOfferingsForm.js","tgs/controllers/userprofile/commentPaging.js","tgs/components/paging.js","tgs/templates/paging.hbs","tgs/controllers/userprofile/commentNotificationForm.js","tgs/controllers/userprofile/changePasswordForm.js","tgs/controllers/twitterTimeline.js","tgs/controllers/twitterSearch.js","tgs/controllers/tweet.js","tgs/controllers/trackEvent.js","tgs/controllers/topic/slidingBox.js","tgs/controllers/toggle.js","tgs/controllers/toTop.js","tgs/controllers/teaserlists/turnCalendar.js","tgs/controllers/teaserlists/sameHeight.js","tgs/controllers/teaserlists/qiezTeaser.js","tgs/controllers/teaserlists/mainSearch.js","tgs/controllers/teaserlists/getComments.js","tgs/controllers/sidebar/tabSwap.js","tgs/controllers/sidebar/slidingTeaser.js","npm:detectizr@2.2.0/dist/detectizr.js","npm:detectizr@2.2.0.json","npm:browsernizr@2.1.0/lib/Modernizr.js","npm:browsernizr@2.1.0.json","npm:browsernizr@2.1.0/lib/ModernizrProto.js","npm:browsernizr@2.1.0/lib/tests.js","tgs/controllers/sidebar/removeBorder.js","tgs/controllers/sidebar/onPageMenu.js","tgs/controllers/sideBarVideoWidget.js","tgs/components/videoSidebarWidget.js","tgs/controllers/resizeSupplements.js","npm:detect-resize@0.1.5/lib/index.js","npm:detect-resize@0.1.5.json","tgs/controllers/reloadCaptcha.js","tgs/controllers/redirectUserToProfile.js","tgs/controllers/openVideoLightbox.js","tgs/services/lightview.js","tgs/controllers/openLayer.js","tgs/controllers/openImageLightbox.js","tgs/controllers/openGalleryLightbox.js","tgs/controllers/newsletterSlider.js","tgs/controllers/mediacenter/showImageControls.js","tgs/controllers/mediacenter/gallery.js","tgs/controllers/loginRedirect.js","tgs/controllers/loadInto.js","tgs/controllers/loadDynamically.js","tgs/controllers/initSocials.js","tgs/controllers/imageCompareSlider.js","tgs/controllers/header/ticker.js","tgs/controllers/header/stickyHeader.js","tgs/controllers/header/offCanvasMenu.js","tgs/controllers/header/newsticker.js","tgs/services/animate.js","tgs/controllers/header/navigation.js","tgs/controllers/header/flyoutMenu.js","tgs/services/menuAim.js","tgs/services/newsCounter.js","tgs/controllers/forms/standardForm.js","tgs/controllers/forms/resetPasswordForm.js","tgs/controllers/forms/registrationForm.js","tgs/controllers/forms/lostPasswordForm.js","tgs/controllers/forms/logoutForm.js","tgs/controllers/forms/loginForm.js","tgs/controllers/forms/activateUserForm.js","tgs/controllers/footer/footerReveal.js","tgs/controllers/embedSocials.js","tgs/controllers/ecommerceTracking.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/toConsumableArray.js","tgs/controllers/districts/districtMap.js","tgs/templates/districtMapTooltip.hbs","tgs/controllers/detail/inlineSubmit.js","tgs/controllers/detail/enableButton.js","tgs/controllers/countryTalks.js","tgs/controllers/centerBoxVideoWidget.js","tgs/components/videoCenterWidget.js","tgs/controllers/articleGallery.js","npm:jquery-touchswipe@1.6.15/jquery.touchSwipe.min.js","npm:jquery-touchswipe@1.6.15.json","tgs/controllers/article/scrollToAndShowComments.js","tgs/controllers/article/fitText.js","tgs/controllers/article/comments.js","tgs/templates/editor.hbs","tgs/components/commentPreview.js","tgs/components/editor/commentEditor.js","tgs/templates/editorRegistrationSuccess.hbs","tgs/templates/editorRegistration.hbs","tgs/templates/editorLoginSuccess.hbs","tgs/templates/editorLoginNew.hbs","tgs/templates/editorLogin.hbs","npm:systemjs-plugin-babel@0.0.12/babel-helpers/slicedToArray.js","tgs/controllers/article/actionBar.js"],"src/js/bundles/editor-v2.js":["tgs/components/editor/quill.js","tgs/components/editor/formats/blockquote.js","npm:quill@1.1.10/blots/container.js","npm:quill@1.1.10.json","npm:quill@1.1.10/blots/block.js","npm:quill@1.1.10/blots/text.js","npm:parchment@1.0.8/dist/parchment.js","npm:parchment@1.0.8.json","npm:quill@1.1.10/blots/inline.js","npm:quill@1.1.10/blots/embed.js","npm:quill@1.1.10/blots/break.js","npm:quill-delta@3.4.3/lib/delta.js","npm:quill-delta@3.4.3.json","npm:quill-delta@3.4.3/lib/op.js","npm:extend@3.0.0/index.js","npm:extend@3.0.0.json","npm:deep-equal@1.0.1/index.js","npm:deep-equal@1.0.1.json","npm:deep-equal@1.0.1/lib/is_arguments.js","npm:deep-equal@1.0.1/lib/keys.js","npm:fast-diff@1.1.1/diff.js","npm:fast-diff@1.1.1.json","npm:quill@1.1.10/formats/link.js","npm:quill@1.1.10/formats/italic.js","npm:quill@1.1.10/formats/bold.js","npm:quill@1.1.10/modules/toolbar.js","npm:quill@1.1.10/core/module.js","npm:quill@1.1.10/core/logger.js","npm:quill@1.1.10/core/quill.js","npm:quill@1.1.10/core/theme.js","npm:quill@1.1.10/core/selection.js","npm:quill@1.1.10/core/emitter.js","npm:eventemitter3@2.0.2/index.js","npm:eventemitter3@2.0.2.json","npm:clone@2.1.0/clone.js","npm:clone@2.1.0.json","npm:quill@1.1.10/core/editor.js","npm:quill@1.1.10/blots/cursor.js","npm:quill@1.1.10/formats/code.js","npm:quill@1.1.10/core/polyfill.js","tgs/components/editor/quillCore.js","npm:quill@1.1.10/modules/keyboard.js","npm:quill@1.1.10/modules/history.js","npm:quill@1.1.10/modules/clipboard.js","npm:quill@1.1.10/formats/size.js","npm:quill@1.1.10/formats/font.js","npm:quill@1.1.10/formats/direction.js","npm:quill@1.1.10/formats/color.js","npm:quill@1.1.10/formats/background.js","npm:quill@1.1.10/formats/align.js","npm:quill@1.1.10/blots/scroll.js","tgs/components/editor/delta2bbcode/index.js","tgs/components/editor/delta2bbcode/operations/blockize.js","tgs/components/editor/delta2bbcode/operations/tokenize.js","tgs/components/editor/delta2bbcode/nodeTypes/quote.js","tgs/components/editor/delta2bbcode/nodeTypes/block.js","tgs/components/editor/delta2bbcode/nodeTypes/treeNode.js","tgs/components/editor/delta2bbcode/nodeTypes/span.js","tgs/components/editor/delta2bbcode/nodeTypes/root.js","tgs/components/editor/delta2bbcode/nodeTypes/text.js","tgs/components/editor/delta2bbcode/nodeTypes/paragraph.js","tgs/components/editor/delta2bbcode/nodeTypes/link.js","tgs/components/editor/delta2bbcode/nodeTypes/italic.js","tgs/components/editor/delta2bbcode/nodeTypes/bold.js","tgs/components/editor/delta2bbcode/operations/registry.js"]}}),SystemJS.config({warnings:!0,meta:{"*.css":{loader:"css"},twitter:{scriptLoad:!0,format:"global",exports:"twttr"}},map:{twitter:"https://platform.twitter.com/widgets.js"},nodeConfig:{paths:{"tgs/":"src/js/modules/"}},devConfig:{map:{"plugin-babel":"npm:systemjs-plugin-babel@0.0.12"}},transpiler:"plugin-babel",packages:{tgs:{format:"esm",main:"app.js",meta:{"*.js":{loader:"plugin-babel"},"./services/lightview.js":{format:"global",exports:"Lightview",loader:!1}}},"tgs/templates":{defaultExtension:"hbs",format:"cjs",meta:{"*.hbs":{deps:["handlebars/handlebars.runtime.js"],loader:"plugin-hbs"}}},"tgs/controllers":{map:{"./homepage":"./header/homepage","./newsticker":"./header/newsticker","./ticker":"./header/ticker","./stickyHeader":"./header/stickyHeader","./actionBar":"./article/actionBar","./fitText":"./article/fitText","./scrollToAndShowComments":"./article/scrollToAndShowComments","./updateTeaserlist":"@empty","./toolTip":"@empty","./todaysArticle":"@empty","./getComments":"./teaserlists/getComments","./mainSearch":"./teaserlists/mainSearch","./qiezTeaser":"./teaserlists/qiezTeaser","./sameHeight":"./teaserlists/sameHeight","./turnCalendar":"./teaserlists/turnCalendar","./slidingBox":"./topic/slidingBox","./slidingTeaser":"./sidebar/slidingTeaser","./tabSwap":"./sidebar/tabSwap","./removeBorder":"./sidebar/removeBorder","./enableButton":"./detail/enableButton","./inlineSubmit":"./detail/inlineSubmit","./gallery":"./mediacenter/gallery","./showImageControls":"./mediacenter/showImageControls","./getVideoDetail":"@empty","./checkAds":"@empty","./getAds":"@empty"}}}}),SystemJS.config({packageConfigPaths:["npm:@*/*.json","npm:*.json","github:*/*.json"],map:{assert:"npm:jspm-nodelibs-assert@0.2.0",bigtext:"npm:bigtext@0.1.8",browsernizr:"npm:browsernizr@2.1.0",child_process:"npm:jspm-nodelibs-child_process@0.2.0",constants:"npm:jspm-nodelibs-constants@0.2.0","core-js":"npm:core-js@2.4.1",crypto:"npm:jspm-nodelibs-crypto@0.2.0",css:"github:systemjs/plugin-css@0.1.32",buffer:"npm:jspm-nodelibs-buffer@0.2.0","detect-resize":"npm:detect-resize@0.1.5",detectizr:"npm:detectizr@2.2.0",domain:"npm:jspm-nodelibs-domain@0.2.0","element-closest":"npm:element-closest@2.0.2",events:"npm:jspm-nodelibs-events@0.2.0",fs:"npm:jspm-nodelibs-fs@0.2.0",handlebars:"github:components/handlebars.js@4.0.5","html-truncate":"github:jangarcia/nodejs-html-truncate@master",http:"npm:jspm-nodelibs-http@0.2.0",https:"npm:jspm-nodelibs-https@0.2.0","ima.js-babel6-polyfill":"npm:ima.js-babel6-polyfill@0.1.1","jquery-touchswipe":"npm:jquery-touchswipe@1.6.15",linkifyjs:"npm:linkifyjs@2.1.4",md5:"npm:md5@2.1.0",modernizr:"github:Modernizr/Modernizr@3.3.1",os:"npm:jspm-nodelibs-os@0.2.0",parchment:"npm:parchment@1.0.8",path:"npm:jspm-nodelibs-path@0.2.0",jquery:"npm:jquery@2.2.4","plugin-hbs":"github:ineentho/plugin-hbs@1.2.2",process:"npm:jspm-nodelibs-process@0.2.0",quill:"npm:quill@1.1.10","quill-delta":"npm:quill-delta@3.4.3",react:"npm:react@15.4.2","react-dom":"npm:react-dom@15.4.2",sha1:"npm:sha1@1.1.1",stream:"npm:jspm-nodelibs-stream@0.2.0",string_decoder:"npm:jspm-nodelibs-string_decoder@0.2.0","stripe/mobile-viewport-control":"github:stripe/mobile-viewport-control@0.3.0",svg:"github:npbenjohnson/plugin-svg@0.1.0",text:"github:systemjs/plugin-text@0.0.9",unfetch:"npm:unfetch@3.1.1",url:"npm:jspm-nodelibs-url@0.2.0",util:"npm:jspm-nodelibs-util@0.2.0",vm:"npm:jspm-nodelibs-vm@0.2.0",zlib:"npm:jspm-nodelibs-zlib@0.2.0"},packages:{"github:ineentho/plugin-hbs@1.2.2":{map:{handlebars:"github:components/handlebars.js@4.0.5"}},"npm:sha1@1.1.1":{map:{charenc:"npm:charenc@0.0.1",crypt:"npm:crypt@0.0.1"}},"npm:md5@2.1.0":{map:{charenc:"npm:charenc@0.0.1",crypt:"npm:crypt@0.0.1","is-buffer":"npm:is-buffer@1.1.3"}},"npm:detect-resize@0.1.5":{map:{chai:"npm:chai@3.5.0"}},"npm:chai@3.5.0":{map:{"assertion-error":"npm:assertion-error@1.0.2","type-detect":"npm:type-detect@1.0.0","deep-eql":"npm:deep-eql@0.1.3"}},"npm:deep-eql@0.1.3":{map:{"type-detect":"npm:type-detect@0.1.1"}},"npm:buffer@4.9.1":{map:{"base64-js":"npm:base64-js@1.2.0",isarray:"npm:isarray@1.0.0",ieee754:"npm:ieee754@1.1.8"}},"npm:crypto-browserify@3.11.0":{map:{pbkdf2:"npm:pbkdf2@3.0.9","create-ecdh":"npm:create-ecdh@4.0.0","create-hmac":"npm:create-hmac@1.1.4","diffie-hellman":"npm:diffie-hellman@5.0.2","browserify-cipher":"npm:browserify-cipher@1.0.0","browserify-sign":"npm:browserify-sign@4.0.0","public-encrypt":"npm:public-encrypt@4.0.0","create-hash":"npm:create-hash@1.1.2",inherits:"npm:inherits@2.0.3",randombytes:"npm:randombytes@2.0.3"}},"npm:pbkdf2@3.0.9":{map:{"create-hmac":"npm:create-hmac@1.1.4"}},"npm:diffie-hellman@5.0.2":{map:{randombytes:"npm:randombytes@2.0.3","miller-rabin":"npm:miller-rabin@4.0.0","bn.js":"npm:bn.js@4.11.6"}},"npm:create-hmac@1.1.4":{map:{"create-hash":"npm:create-hash@1.1.2",inherits:"npm:inherits@2.0.3"}},"npm:public-encrypt@4.0.0":{map:{"create-hash":"npm:create-hash@1.1.2",randombytes:"npm:randombytes@2.0.3","browserify-rsa":"npm:browserify-rsa@4.0.1","parse-asn1":"npm:parse-asn1@5.0.0","bn.js":"npm:bn.js@4.11.6"}},"npm:browserify-sign@4.0.0":{map:{"create-hash":"npm:create-hash@1.1.2","create-hmac":"npm:create-hmac@1.1.4",inherits:"npm:inherits@2.0.3","browserify-rsa":"npm:browserify-rsa@4.0.1","parse-asn1":"npm:parse-asn1@5.0.0",elliptic:"npm:elliptic@6.3.3","bn.js":"npm:bn.js@4.11.6"}},"npm:create-hash@1.1.2":{map:{inherits:"npm:inherits@2.0.3","cipher-base":"npm:cipher-base@1.0.3",ripemd160:"npm:ripemd160@1.0.1","sha.js":"npm:sha.js@2.4.8"}},"npm:browserify-cipher@1.0.0":{map:{"browserify-des":"npm:browserify-des@1.0.0",evp_bytestokey:"npm:evp_bytestokey@1.0.0","browserify-aes":"npm:browserify-aes@1.0.6"}},"npm:create-ecdh@4.0.0":{map:{elliptic:"npm:elliptic@6.3.3","bn.js":"npm:bn.js@4.11.6"}},"npm:browserify-des@1.0.0":{map:{"cipher-base":"npm:cipher-base@1.0.3",inherits:"npm:inherits@2.0.3","des.js":"npm:des.js@1.0.0"}},"npm:browserify-rsa@4.0.1":{map:{"bn.js":"npm:bn.js@4.11.6",randombytes:"npm:randombytes@2.0.3"}},"npm:parse-asn1@5.0.0":{map:{"browserify-aes":"npm:browserify-aes@1.0.6","create-hash":"npm:create-hash@1.1.2",evp_bytestokey:"npm:evp_bytestokey@1.0.0",pbkdf2:"npm:pbkdf2@3.0.9","asn1.js":"npm:asn1.js@4.9.1"}},"npm:evp_bytestokey@1.0.0":{map:{"create-hash":"npm:create-hash@1.1.2"}},"npm:cipher-base@1.0.3":{map:{inherits:"npm:inherits@2.0.3"}},"npm:browserify-aes@1.0.6":{map:{"cipher-base":"npm:cipher-base@1.0.3","create-hash":"npm:create-hash@1.1.2",evp_bytestokey:"npm:evp_bytestokey@1.0.0",inherits:"npm:inherits@2.0.3","buffer-xor":"npm:buffer-xor@1.0.3"}},"npm:miller-rabin@4.0.0":{map:{"bn.js":"npm:bn.js@4.11.6",brorand:"npm:brorand@1.0.7"}},"npm:sha.js@2.4.8":{map:{inherits:"npm:inherits@2.0.3"}},"npm:des.js@1.0.0":{map:{inherits:"npm:inherits@2.0.3","minimalistic-assert":"npm:minimalistic-assert@1.0.0"}},"npm:asn1.js@4.9.1":{map:{"bn.js":"npm:bn.js@4.11.6",inherits:"npm:inherits@2.0.3","minimalistic-assert":"npm:minimalistic-assert@1.0.0"}},"npm:hash.js@1.0.3":{map:{inherits:"npm:inherits@2.0.3"}},"npm:stream-browserify@2.0.1":{map:{inherits:"npm:inherits@2.0.3","readable-stream":"npm:readable-stream@2.2.2"}},"npm:readable-stream@2.2.2":{map:{isarray:"npm:isarray@1.0.0",inherits:"npm:inherits@2.0.3","buffer-shims":"npm:buffer-shims@1.0.0","core-util-is":"npm:core-util-is@1.0.2","util-deprecate":"npm:util-deprecate@1.0.2",string_decoder:"npm:string_decoder@0.10.31","process-nextick-args":"npm:process-nextick-args@1.0.7"}},"npm:react@15.4.2":{map:{"object-assign":"npm:object-assign@4.1.0","loose-envify":"npm:loose-envify@1.3.0",fbjs:"npm:fbjs@0.8.8"}},"npm:react-dom@15.4.2":{map:{"object-assign":"npm:object-assign@4.1.0","loose-envify":"npm:loose-envify@1.3.0",fbjs:"npm:fbjs@0.8.8"}},"npm:fbjs@0.8.8":{map:{"loose-envify":"npm:loose-envify@1.3.0","object-assign":"npm:object-assign@4.1.0",setimmediate:"npm:setimmediate@1.0.5","ua-parser-js":"npm:ua-parser-js@0.7.12","isomorphic-fetch":"npm:isomorphic-fetch@2.2.1",promise:"npm:promise@7.1.1","core-js":"npm:core-js@1.2.7"}},"npm:loose-envify@1.3.0":{map:{"js-tokens":"npm:js-tokens@2.0.0"}},"npm:isomorphic-fetch@2.2.1":{map:{"node-fetch":"npm:node-fetch@1.6.3","whatwg-fetch":"npm:whatwg-fetch@2.0.1"}},"npm:promise@7.1.1":{map:{asap:"npm:asap@2.0.5"}},"npm:node-fetch@1.6.3":{map:{"is-stream":"npm:is-stream@1.1.0",encoding:"npm:encoding@0.1.12"}},"npm:encoding@0.1.12":{map:{"iconv-lite":"npm:iconv-lite@0.4.15"}},"npm:stream-http@2.6.0":{map:{inherits:"npm:inherits@2.0.3","readable-stream":"npm:readable-stream@2.2.2","builtin-status-codes":"npm:builtin-status-codes@3.0.0","to-arraybuffer":"npm:to-arraybuffer@1.0.1",xtend:"npm:xtend@4.0.1"}},"npm:url@0.11.0":{map:{querystring:"npm:querystring@0.2.0",punycode:"npm:punycode@1.3.2"}},"npm:browserify-zlib@0.1.4":{map:{"readable-stream":"npm:readable-stream@2.2.2",pako:"npm:pako@0.2.9"}},"npm:jspm-nodelibs-os@0.2.0":{map:{"os-browserify":"npm:os-browserify@0.2.1"}},"npm:jspm-nodelibs-crypto@0.2.0":{map:{"crypto-browserify":"npm:crypto-browserify@3.11.0"}},"npm:jspm-nodelibs-http@0.2.0":{map:{"http-browserify":"npm:stream-http@2.6.0"}},"npm:jspm-nodelibs-url@0.2.0":{map:{"url-browserify":"npm:url@0.11.0"}},"npm:jspm-nodelibs-stream@0.2.0":{map:{"stream-browserify":"npm:stream-browserify@2.0.1"}},"npm:jspm-nodelibs-buffer@0.2.0":{map:{"buffer-browserify":"npm:buffer@4.9.1"}},"npm:jspm-nodelibs-string_decoder@0.2.0":{map:{"string_decoder-browserify":"npm:string_decoder@0.10.31"}},"npm:jspm-nodelibs-domain@0.2.0":{map:{"domain-browserify":"npm:domain-browser@1.1.7"}},"npm:jspm-nodelibs-zlib@0.2.0":{map:{"zlib-browserify":"npm:browserify-zlib@0.1.4"}},"npm:quill@1.1.10":{defaultExtension:"js",format:"esm",map:{"deep-equal":"npm:deep-equal@1.0.1",extend:"npm:extend@3.0.0",eventemitter3:"npm:eventemitter3@2.0.2","quill-delta":"npm:quill-delta@3.4.3",parchment:"npm:parchment@1.0.8",clone:"npm:clone@2.1.0"},meta:{"dist/*":{format:"cjs"},"ui/icons.js":{format:"cjs"},"*.svg":{loader:"text"}}},"npm:quill-delta@3.4.3":{map:{"deep-equal":"npm:deep-equal@1.0.1",extend:"npm:extend@3.0.0","fast-diff":"npm:fast-diff@1.1.1"}},"npm:elliptic@6.3.3":{map:{"bn.js":"npm:bn.js@4.11.6",inherits:"npm:inherits@2.0.3","hash.js":"npm:hash.js@1.0.3",brorand:"npm:brorand@1.0.7"}}}}),System.register("tgs/controllers/article/actionBar.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller","detectizr"],function(e,t){"use strict";var n,s,i,r,o,a,l;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default}],execute:function(){l=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){"tablet"!=a.device.type&&"mobile"!=a.device.type&&this.setup()}},{key:"setup",value:function(){this.container=this.node,this.param="print=true",this.article=$("body").find(".ts-article"),this.stickyElement=this.container.find(".ts-actionbar"),this.bigimage=this.container.offsetParent(".ts-article").find(".ts-article-header .ts-article-element.ts-lead .ts-media"),this.stickyContainerPosition=this.bigimage.length?this.bigimage.offset().top:0,this.containerHeight=this.container.outerHeight(),this.topOffset=this.stickyElement.offset().top,0<this.stickyContainerPosition&&(this.topOffset=this.stickyContainerPosition-this.topOffset),this.stickyTopOffset=100,this.stickyHeaderHeight=40;var e=this;0<this.stickyContainerPosition&&this.container.css({top:this.topOffset}),this.checkSticky(),$(window).bind("scroll touchmove",function(){e.checkSticky()}),this.checkParam(),this.initControls(),this.node.addClass("ts-is-visible")}},{key:"initControls",value:function(){var t=this;this.node.find(".ts-print").off("click").on("click",function(e){e.preventDefault(),t.analytics.fireSingleEvent("print"),t.article.length&&t.isMultipage()?window.open($(e.currentTarget).attr("href")):window.print()})}},{key:"checkParam",value:function(){window.location.search&&-1!==window.location.search.indexOf(this.param)&&window.print()}},{key:"isMultipage",value:function(){return this.article.data("multipage")}},{key:"checkSticky",value:function(){var e=$(window).scrollTop();this.containerHeight=this.container.outerHeight(),this.stickyElementHeight=this.stickyElement.outerHeight(),this.lowerThreshold=this.topOffset-this.stickyTopOffset+this.stickyHeaderHeight,0<this.stickyContainerPosition&&(this.lowerThreshold+=this.stickyElementHeight),this.upperThreshold=this.container.offset().top+this.containerHeight-this.stickyElementHeight-this.stickyTopOffset,e>this.lowerThreshold?e>this.upperThreshold?(this.stickyElement.addClass("ts-sticky-bottom"),this.stickyElement.removeClass("ts-sticky")):(this.stickyElement.removeClass("ts-sticky-bottom"),this.stickyElement.addClass("ts-sticky")):this.stickyElement.removeClass("ts-sticky")}}]),t}(),e("default",l)}}}),System.register("npm:systemjs-plugin-babel@0.0.12/babel-helpers/slicedToArray.js",[],function(e,t){"use strict";return{setters:[],execute:function(){e("default",function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(s=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")})}}}),System.registerDynamic("tgs/templates/editorLogin.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){return'<div class="ts-login ts-auth">\n\n\n</div>'},useData:!0}),n.exports}),System.registerDynamic("tgs/templates/editorLoginNew.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){return'<p>Bitte melden Sie sich zunächst an oder registrieren Sie sich, damit Sie die Kommentarfunktion nutzen können.</p>\n<div class="ts-login-links">\n    <a href="/login" class="ts-login-btn" data-command="loginRedirect">Login</a>\n    <a href="/registrierung" class="ts-register-btn">Registrieren</a>\n</div>'},useData:!0}),n.exports}),System.registerDynamic("tgs/templates/editorLoginSuccess.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){var r;return'<div class="ts-message ts-message-'+e.escapeExpression("function"==typeof(r=null!=(r=n.state||(null!=t?t.state:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"state",hash:{},data:i}):r)+'">\n    <p>'+e.escapeExpression("function"==typeof(r=null!=(r=n.messageText||(null!=t?t.messageText:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"messageText",hash:{},data:i}):r)+"</p>\n</div>\n"},useData:!0}),n.exports}),System.registerDynamic("tgs/templates/editorRegistration.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){return'<div class="ts-registration ts-auth">\n\n    <h5 class="ts-title">Benutzerkonto anlegen</h5>\n\n    <p>\n        Wir garantieren Ihnen, dass alle persönlichen Daten nur beim Verlag intern\n        verwendet, und nicht ohne Ihre Zustimmung an Dritte weitergegeben werden.\n        Nach erfolgreicher Anmeldung erhalten Sie eine E-Mail mit einem\n        Bestätigungslink bzw. Code um Ihr Benutzerkonto auf Tagesspiegel.de zu\n        bestätigen.\n    </p>\n\n    <div class="ts-register-form">\n\n\n    </div>\n\n</div>'},useData:!0}),n.exports}),System.registerDynamic("tgs/templates/editorRegistrationSuccess.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){var r;return'<h5 class="ts-title">Registrierung abschließen</h5>\n\n<p>\n    <strong>Bitte bestätigen Sie Ihre E-Mail-Adresse.</strong>\n\n</p>\n\n<p>\n    An Ihre E-Mail-Adresse wurde eine Mail verschickt, die einen Link zur Bestätigung und Freischaltung Ihre Benutzerkontos enthält.\n    Bitte kontrollieren Sie ggf. auch Ihren Spam-Ordner.<br/>\n    Wenn Sie die Freischaltung nicht innerhalb von sieben Tagen durchführen, wird Ihr Benutzerkonto automatisch aus unserem System entfernt.\n</p>\n\n<div class="ts-message ts-message-'+e.escapeExpression("function"==typeof(r=null!=(r=n.state||(null!=t?t.state:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"state",hash:{},data:i}):r)+'">\n    <p>'+e.escapeExpression("function"==typeof(r=null!=(r=n.messageText||(null!=t?t.messageText:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"messageText",hash:{},data:i}):r)+"</p>\n</div>\n"},useData:!0}),n.exports}),System.register("tgs/components/editor/commentEditor.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/service","tgs/templates/editorLogin","tgs/templates/editorLoginNew","tgs/templates/editorLoginSuccess","tgs/templates/editorRegistration","tgs/templates/editorRegistrationSuccess"],function(e,t){"use strict";var i,n,s,r,o,a,l,u,c,f,p,d;return{setters:[function(e){i=e.default},function(e){n=e.default},function(e){s=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default},function(e){l=e.default},function(e){u=e.default},function(e){c=e.default},function(e){f=e.default},function(e){p=e.default}],execute:function(){d=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),s(t,[{key:"init",value:function(){var c=this;this.hideMessagesOnSuccessTimeout=5e3,this.charLimit=2e3,this.$=this.options.node,this.successCallback=this.options.successCallback,this.editor=this.$,this.form=this.$.find("form.ts-comments-input-area"),this.submitBtn=this.form.find(".ts-comments-submit"),this.responseArea=$('<div class="ts-comments-response"></div>'),this.$toolbar=this.$.find(".ts-comments-editor-options"),this.form.after(this.responseArea),this.app.authentication.isLogged()||(this.editor.html(u()).addClass("ts-login-prompt"),this.app.bindControllers("#tsMainCommentEditor")),this.options.useNewEditor?this.$.one("click",function(){Promise.all([SystemJS.import("tgs/components/editor/quill"),SystemJS.import("tgs/components/editor/delta2bbcode/index.js")]).then(function(e){var t=i(e,2),n=t[0].default,s=t[1].transform;c.deltaToBBCode=s;var l=c.form.find(".ts-editor-container");c.$toolbar.find("button").each(function(e,t){var n=$(t),s=n.attr("class").substr(7);"quote"==s&&(s="blockquote"),n.addClass("ql-"+s)}),c.editor=new n(l.get(0),{placeholder:"Hier Kommentar eingeben",bounds:".ts-comments-section",strict:!1,formats:["bold","italic","link","blockquote"],modules:{toolbar:{container:c.$toolbar.get(0),handlers:{link:function(e){if(e){var t=prompt("Bitte Link-URL eingeben!");t&&(t=t.replace(/^(?!http(s)?:\/\/|mailto:)/,"http://"),this.quill.format("link",t))}else this.quill.format("link",!1)}}}}}),c.editor.focus(),c.editor.on("text-change",function(e,t,n){var s,i,r,o=c.charLimit+1,a=c.editor.getLength();o<a&&(s=a-o,i=c.getTextLengthForDelta(e),r=(e.ops[0].retain||0)+(i-s),c.editor.deleteText(r,s,"silent"),setTimeout(function(){return c.editor.setSelection(r,0,"user")},0)),a=c.editor.getLength(),l.attr("data-count",a)})}).catch(function(e){c.logger.warn("failed to load quill module")})}):SystemJS.import("tgs/components/editor/wysibb").then(function(e){var t=e.default;c.editor=new t({$txtArea:c.form.find(".ts-comments-input"),settings:{lang:"de",buttons:"bold,italic,link,quote",showHotkeys:!1,hotkeys:!1,traceTextarea:!1,minheight:20,maxLength:c.charLimit,showCounter:!0,placeholder:"Hier Kommentar eingeben"}})}).catch(function(e){c.logger.warn("failed to load wysibb module")}),this.submitting=!1,this.initControls()}},{key:"initControls",value:function(){var t=this;this.submitBtn.on("click",function(e){e.preventDefault(),t.app.authentication.isLogged()?t.sendComment():(t.submitBtn.hide(),t.responseArea.html(l({routes:t.app.routes})),t.app.authentication.initFormWithCallback("commentLogin",t.responseArea.find(".ts-login"),t.sendComment.bind(t)))}),this.responseArea.on("click",".ts-register-link",function(e){e.preventDefault(),t.responseArea.html(f({routes:t.app.routes})),t.app.authentication.initFormWithCallback("commentRegister",t.responseArea.find(".ts-registration>.ts-register-form"),t.sendComment.bind(t))}),this.responseArea.on("click",".ts-login-link",function(e){e.preventDefault(),t.responseArea.html(l({routes:t.app.routes})),t.app.authentication.initFormWithCallback("commentLogin",t.responseArea.find(".ts-login"),t.sendComment.bind(t))}),$(document).on("loginSucceeded",function(e){t.responseArea.find(".ts-auth").remove(),t.submitBtn.show()})}},{key:"removeMessages",value:function(){this.responseArea.empty(),this.submitBtn.show()}},{key:"sendComment",value:function(){var n=this;if(this.isEmpty()){var e=$('<div class="ts-message ts-message-error"><p>Bitte geben Sie einen Kommentar-Text ein.</p></div>');return this.responseArea.html(e),!1}if(!this.submitting){this.submitBtn.prop("disabled",!0),this.submitting=!0;var t=this.getCommentableId(),s=this.getBBCode();$.ajax({url:this.form.attr("action"),data:{commentableId:t,textField:s},dataType:"json",type:"post",success:function(e){"function"==typeof n.successCallback&&n.successCallback(),n.renderResponse(e),n.analytics.fireEvent("Artikel","Kommentar erfolgreich abgesendet")},complete:function(e,t){n.submitBtn.prop("disabled",!1),n.submitting=!1}})}}},{key:"renderResponse",value:function(e){if(e&&e.validation){var t=$(".ts-comments-section"),n="Es ist ein Fehler aufgetreten.",s=1==e.validation.status?"success":"error";1==e.validation.status&&(n="Ihr Kommentar wurde erfolgreich an uns übermittelt und wird nach redaktioneller Prüfung veröffentlicht."),e.validation.message&&(n=e.validation.message),t.find(".ts-registration").length?this.responseArea.html(p({state:s,messageText:n})):this.responseArea.html(c({state:s,messageText:n}))}this.submitBtn.show(),this.empty()}},{key:"getCommentableId",value:function(){var e=this.$.closest(".ts-comment");return e.length?e.attr("id").replace("comment-",""):this.app.contentId}},{key:"getBBCode",value:function(){return this.options.useNewEditor?this.deltaToBBCode(this.editor.getContents()):this.editor.getBBCode()}},{key:"isEmpty",value:function(){return this.options.useNewEditor?this.editor.getLength()<=1:this.editor.$body.text().length<=0}},{key:"getContents",value:function(){return this.options.useNewEditor?this.editor.getContents():this.editor.$body.html()}},{key:"setContents",value:function(e){this.options.useNewEditor?this.editor.setContents(e):this.editor.$body.html(e)}},{key:"empty",value:function(){this.options.useNewEditor?this.editor.setText(""):(this.editor.$body.html(""),this.editor.updateUI())}},{key:"focus",value:function(){this.options.useNewEditor?this.editor.focus():(this.editor.$body.focus(),this.editor.updateUI())}},{key:"getTextLengthForDelta",value:function(e){return e.reduce(function(e,t){return t.hasOwnProperty("insert")?e+(t.insert.length||1):t.hasOwnProperty("delete")?e-t.delete:e},0)}}]),t}(),e("default",d)}}}),System.register("tgs/components/commentPreview.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/service","tgs/components/message"],function(e,t){"use strict";var n,s,i,r,o,a,l;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default}],execute:function(){l=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){this.$commentsSection=this.options.commentSection,this.initControls()}},{key:"initControls",value:function(){var r=this;this.$commentsSection.on("click",".ts-comment-preview-button-accept",function(e){e.preventDefault();var t=$(e.currentTarget),n=(t.closest("header"),t.closest(".ts-comment"));r.logger.log("load comment accept",t.data("param")),r.loadAsynch(t.data("param"),null,function(e){1==e.status&&(n.addClass("ts-is-accepted"),n.removeClass("ts-is-rejected"))})}),this.$commentsSection.on("click",".ts-comment-preview-button-reject",function(e){e.preventDefault();var t=$(e.currentTarget),n=(t.closest("header"),t.closest(".ts-comment"));r.logger.log("load comment reject",t.data("param")),r.loadAsynch(t.data("param"),null,function(e){1==e.status&&(n.addClass("ts-is-rejected"),n.removeClass("ts-is-accepted"))})}),this.$commentsSection.on("click",".ts-comment-preview-button-edit",function(e){e.preventDefault();var t=$(e.currentTarget);r.showCommentTextarea(t.closest(".ts-comment"))}),this.$commentsSection.on("click",".ts-comments-preview-editor-hide-button",function(e){e.preventDefault();var t=$(e.currentTarget);r.hideCommentTextarea(t.closest(".ts-comment"))}),this.$commentsSection.on("click",".ts-comments-preview-editor-save-button",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".ts-comment").find(".ts-comment-body"),s=t.closest(".ts-form"),i=r.getFormData(s);r.loadAsynch(s.attr("action"),i,function(e){if(1==e.status){s.find(".ts-message").remove();var t=new a({text:"Die Änderungen wurden gespeichert.",state:"success",fadeOut:!0});s.append(t.render()),n.html(e.html)}})})}},{key:"getFormData",value:function(e){var t=e.serializeArray(),n={};return t.map(function(e,t){return n[e.name]=e.value}),n}},{key:"showCommentTextarea",value:function(e){e.find(".ts-comment-body").hide(),e.find(".ts-comment-preview-button-edit").hide(),e.find(".ts-comment-preview-editor").show()}},{key:"hideCommentTextarea",value:function(e){e.find(".ts-comment-body").show(),e.find(".ts-comment-preview-button-edit").show(),e.find(".ts-comment-preview-editor").hide()}},{key:"handleModerationResponse",value:function(e,t){if(1==e.status){t.find(".ts-message").remove();var n=new a({text:e.html,state:"success",fadeOut:!0});t.append(n.render())}}},{key:"loadAsynch",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];$.ajax({url:e,data:t,dataType:"json",type:"post",success:n})}}]),t}(),e("default",l)}}}),System.registerDynamic("tgs/templates/editor.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){return'<div class="ts-editor-container ql-container" data-count=0>\n\n    <div class="ql-editor ql-blank" contenteditable="true" data-placeholder="Hier Kommentar eingeben"></div>\n\n</div>'},useData:!0}),n.exports}),System.register("tgs/controllers/article/comments.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller","jquery","handlebars/handlebars.runtime","tgs/components/tooltip","tgs/components/paging","tgs/components/editor/commentEditor","tgs/components/commentPreview","tgs/templates/editor","detect-resize"],function(e,t){"use strict";var r,n,s,i,o,a,l,c,u,f,p,d,h,m,g,b;return{setters:[function(e){r=e.default},function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){o=e.default},function(e){a=e.default},function(e){l=e.default},function(e){c=e.default},function(e){u=e.default},function(e){f=e.default},function(e){p=e.default},function(e){d=e.default},function(e){h=e.default},function(e){m=e.addResizeListener,g=e.removeResizeListener}],execute:function(){b=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),s(t,[{key:"init",value:function(){var t=this;c.registerHelper("eq",function(e,t){var n=arguments[arguments.length-1];return e===t?n.fn(this):n.inverse(this)}),this.useNewEditor=this.app.urlParams.hasOwnProperty("neweditor")&&1==this.app.urlParams.neweditor;var e=this.node.data("editor");e?(e=e.replace("nocache","cache"),l.ajax({url:e,dataType:"json",type:"get",success:function(e){t.node.find(".ts-comments-last-activity").before(e.html),t.initMainEditor()}})):this.initMainEditor();var n=this.node.data("commentId");this.$commentPage=this.node.find(".ts-comments-page"),this.$commentList=this.node.find(".ts-comments-list");var s=l('<nav class="ts-paging">').insertBefore(this.$commentList);s=s.add(s.clone().insertAfter(this.$commentList)),this.paging=new f({nodes:s,changePageHandler:this.showPageByNumber.bind(this)}),this.lastActivityCount=1,this.$sectionTitle=this.node.find(">.ts-section-title"),this.$lastActivity=this.node.find(".ts-comments-last-activity"),this.$sortSelect=this.node.find(".ts-comments-sort>select"),this.$toggleBtn=this.node.find(".ts-comments-toggle"),this.$expandAllBtn=this.node.find(".ts-comments-expand-all"),this.selectedView=this.app.isStudioView||n?"singlePageChronological":"singlePageChronologicalLatestAtFirst",this.expanded=!1,this.expandedCommentAnswers=!1,this.$toggleBtn.click(function(){return t.toggleComments()}),this.buttonTexts={toggleAllBtn:{closed:"alle Antworten anzeigen",opened:"alle Antworten ausblenden"},toggleRepliesBtn:{closed:"Antworten anzeigen",opened:"Antworten ausblenden"}},this.isPreviewMode()&&(this.commentsPreview=new d({commentSection:this.node})),this.initNavigation(),this.initComments(),this.app.isStudioView||this.initLastActivity(),this.initCommentsTooltips(),n&&(this.expandComments(n),this.analytics.fireEvent("Artikel","Direktverweis auf Kommentar")),"#kommentare"===window.location.hash&&this.scrollToCommentSection()}},{key:"isPreviewMode",value:function(){return!!this.app.authentication.user.isPreview}},{key:"toggleComments",value:function(){this.expanded?this.collapseComments():this.expandComments()}},{key:"collapseComments",value:function(){this.expanded=!1,this.node.removeClass("ts-is-expanded"),this.$toggleBtn.text("Alle Kommentare anzeigen"),this.analytics.fireEvent("Artikel","Kommentare einklappen")}},{key:"expandComments",value:function(e){var t=this,n={pageNumber:1,view:this.selectedView};e&&(n={commentId:e}),this.analytics.fireEvent("Artikel","Kommentare ausklappen"),this.showPageWithParams(n,function(){t.expanded=!0,t.node.addClass("ts-is-expanded"),t.$toggleBtn.text("Kommentare ausblenden"),e&&t.scrollToSelectedComment(e)})}},{key:"scrollToCommentSection",value:function(){var t=l(".ts-comments-section"),n=void 0,e=function e(){clearTimeout(n),n=setTimeout(function(){return g(document.body,e)},5e3),l(document).scrollTop(t.offset().top-300)};n=setTimeout(function(){g(document.body,e)},5e3),m(document.body,e)}},{key:"scrollToSelectedComment",value:function(e){var t,n=this,s=this.$commentList.find("#comment-"+e).addClass("ts-is-selected");s.length&&(t=function(){return l(document).scrollTop(s.offset().top-150)},setTimeout(t,10),n.app.isStudioView||(m(document.body,t),setTimeout(function(){return g(document.body,t)},2e3)))}},{key:"initMainEditor",value:function(){var e=this.node.find("#tsMainCommentEditor");this.useNewEditor&&e.find(".ts-comments-input").replaceWith(h()),this.$editorTemplate=e.clone(),e.length&&(this.mainEditor=new p({node:e,useNewEditor:this.useNewEditor}))}},{key:"initLastActivity",value:function(){var r=this,o=this.$lastActivity.find(".ts-activity-list");this.loadPageWithParams({pageNumber:1,lastactivity:!0,limit:this.lastActivityCount,view:"singlePageChronological"},function(e){var t=e.html,n=e.data,s=n.totalPages,i=n.totalComments;o.html(t),r.setTotalComments(i),r.paging.setTotalPages(s)}),this.$lastActivity.on("click",".ts-comment-body",function(e){var t=l(e.target).closest(".ts-comment").attr("id").replace("comment-","");return r.expandComments(t),r.analytics.fireEvent("Artikel","Klick auf Kommentar in Letzte Aktivität"),e.preventDefault(),!1})}},{key:"initCommentsTooltips",value:function(){var s=this;this.$commentList.on("click",".ts-comment-reference .ts-link",function(e){e.preventDefault();var t=l(e.currentTarget),n=l("body").find(".ts-tooltip");n.length?(t.removeClass("ts-active"),n.remove()):(t.addClass("ts-active"),s.loadReferenceComment(t))})}},{key:"loadReferenceComment",value:function(s){var e=s.data("url");l.ajax({url:e,dataType:"json",type:"get",success:function(e){var t=new u({element:s,message:e.html}),n=s.parent();t.setCentered({left:s.offset().left+s.width()/2,top:n.offset().top-12}),t.show()}}),this.analytics.fireEvent("Artikel","Bezugskommentar anzeigen")}},{key:"showPageByNumber",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments[1];this.showPageWithParams({pageNumber:e,view:this.selectedView},t)}},{key:"showPageWithParams",value:function(e){var t=this,n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.loadPageWithParams(e,function(e){t.renderPage(e),n&&n()})}},{key:"loadPageWithParams",value:function(e,t){var n=this.app.contentId,s=this.isPreviewMode(),i=this.app.authentication.isLogged()||this.isPreviewMode()?this.app.routes.api.showcomments:this.app.routes.api.showcomments_cached;l.ajax({url:i,data:r({teasableId:n,preview:s},e),dataType:"json",type:"get",cache:!this.app.authentication.isLogged(),success:function(e){t(e)}})}},{key:"renderPage",value:function(e){var t=e.html,n=e.data,s=n.pageNumber,i=n.totalPages,r=n.totalComments,o=n.view;this.setTotalComments(r),0<r||this.isPreviewMode()?(this.paging.setTotalPages(i),this.paging.setPageNumber(s),this.paging.render(),this.setSortOrder(o),"singlePageChronological"==o?this.$expandAllBtn.hide():this.$expandAllBtn.show(),this.$commentList.html(t),this.replyEditor=void 0,l(document).scrollTop()>this.$commentPage.offset().top&&l(document).scrollTop(this.$commentPage.offset().top-50),this.expandedCommentAnswers&&this.toggleCommentAnswers(!0)):this.paging.remove();var a="undefined"!=typeof jsPageContext&&jsPageContext.ivwKeyword?"_"+jsPageContext.ivwKeyword:"";this.analytics.firePageview(a+"_Comments")}},{key:"setTotalComments",value:function(e){this.$sectionTitle.html(e+" Kommentar"+(1==e?"":"e")+" &ndash; Diskutieren Sie mit!"),l(".ts-actionbar .ts-comments-count").text(e),0!=e||this.isPreviewMode()||this.hideComments()}},{key:"setSortOrder",value:function(e){this.$sortSelect.val(e)}},{key:"hideComments",value:function(){this.$toggleBtn.hide(),this.$lastActivity.hide(),this.node.find(".ts-comments-page").hide()}},{key:"changeButtonText",value:function(e,t){var n=e.text().split(" ")[0];e.text(n+" "+t)}},{key:"toggleCommentAnswers",value:function(){var n=this;!(arguments.length<=0||void 0===arguments[0])&&arguments[0]?(this.expandedCommentAnswers=!0,this.$expandAllBtn.addClass("ts-expanded"),this.$expandAllBtn.text(this.buttonTexts.toggleAllBtn.opened),l(".ts-comments-btn-replies").addClass("ts-is-expanded"),this.$commentList.find(".ts-comment-replies").stop().slideDown(),this.$commentList.find(".ts-comments-btn-replies").each(function(e,t){n.changeButtonText(l(t),n.buttonTexts.toggleRepliesBtn.opened)})):(this.expandedCommentAnswers=!1,this.$expandAllBtn.removeClass("ts-expanded"),this.$expandAllBtn.text(this.buttonTexts.toggleAllBtn.closed),l(".ts-comments-btn-replies").removeClass("ts-is-expanded"),this.$commentList.find(".ts-comment-replies").stop().slideUp(),this.$commentList.find(".ts-comments-btn-replies").each(function(e,t){n.changeButtonText(l(t),n.buttonTexts.toggleRepliesBtn.closed)}))}},{key:"initNavigation",value:function(){var t=this;this.$expandAllBtn.on("click",function(e){e.preventDefault(),t.$expandAllBtn.hasClass("ts-expanded")?t.toggleCommentAnswers(!1):(t.toggleCommentAnswers(!0),t.analytics.fireEvent("Artikel","Alle Antwort-Kommentare anzeigen"))}),this.$sortSelect.on("change",function(e){t.selectedView=l(e.currentTarget).find(":selected").val(),t.showPageWithParams({pageNumber:1,view:t.selectedView}),t.analytics.fireEvent("Artikel","Kommentar-Sortierung ändern",t.selectedView)})}},{key:"initComments",value:function(){var a=this;this.replies=new Map,this.$commentList.on("click",".ts-comments-btn-replies",function(e){var t=l(e.target),n=t.closest(".ts-comment-thread").find(".ts-comment-replies");t.hasClass("ts-is-expanded")?(t.removeClass("ts-is-expanded"),n.stop().slideUp(),a.changeButtonText(t,a.buttonTexts.toggleRepliesBtn.closed)):(t.addClass("ts-is-expanded"),n.stop().slideDown(),a.changeButtonText(t,a.buttonTexts.toggleRepliesBtn.opened),a.analytics.fireEvent("Artikel","Kommentar-Antworten anzeigen"))}),this.$commentList.on("click",".ts-comment-btn-answer",function(e){var t=l(e.target),n=t.closest(".ts-comment"),s=n.attr("id");if(t.hasClass("ts-comment-btn-answer-cancel"))a.hideEditor();else{if(!a.replyEditor){var i=a.$editorTemplate.clone();i.addClass("ts-is-collapsed").attr("id","tsReplyEditor").find(".ts-comments-submit").text("Antworten").end(),t.after(i),a.replyEditor=new p({node:i,useNewEditor:a.useNewEditor}),a.app.bindControllers(i)}if(!n.find(a.replyEditor.$).length){var r=a.$commentList.find(".ts-comment");r.index(a.lastRepliedComment)<r.index(n)&&l(document).scrollTop(l(document).scrollTop()-a.replyEditor.$.outerHeight(!0)),a.hideEditor(!0);var o=a.replies.get(s)||"";a.replyEditor.setContents(o),a.replyEditor.removeMessages(),t.after(a.replyEditor.$),a.replyEditor.focus()}t.addClass("ts-comment-btn-answer-cancel").text("abbrechen"),setTimeout(function(){return a.replyEditor.$.removeClass("ts-is-collapsed ts-is-collapsed-instantly",0)}),a.lastRepliedComment=n,a.analytics.fireEvent("Artikel","Kommentar beantworten")}})}},{key:"hideEditor",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this.lastRepliedComment.attr("id");this.replyEditor.$.prevAll(".ts-comment-btn-answer-cancel").removeClass("ts-comment-btn-answer-cancel").text("antworten"),this.replyEditor.$.addClass(e?"ts-is-collapsed-instantly":"ts-is-collapsed"),this.replies.set(t,this.replyEditor.getContents())}}]),t}(),e("default",b)}}}),System.register("tgs/controllers/article/fitText.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){this.selector=this.node.data("selector"),this.resizeFont(this.node)}},{key:"resizeFont",value:function(e){var s=e.width();e.find(this.selector).each(function(e){var t=$(this).width(),n=50*(s/t);n=Math.min(120,n),$(this).css("font-size",n+"px")})}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/article/scrollToAndShowComments.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){var t=this;this.node.on("click",function(){var e=$(".ts-comments-section");return t.app.getControllerInstance("article.comments",e).expandComments(),$("html, body").stop().animate({scrollTop:e.offset().top-50},250,"swing"),!1})}}]),t}(),e("default",a)}}}),System.registerDynamic("npm:jquery-touchswipe@1.6.15.json",[],!1,function(){return{main:"jquery.touchSwipe.min.js",format:"cjs",meta:{"*.json":{format:"json"},"docs/js/jquery-1.7.2.min.js":{format:"amd"}}}}),System.registerDynamic("npm:jquery-touchswipe@1.6.15/jquery.touchSwipe.min.js",["jquery"],!0,function(e,t,n){var s;this||self;return s=function(ae){var le="left",ce="right",ue="up",fe="down",pe="in",de="out",he="none",me="auto",ge="swipe",be="pinch",ye="tap",ve="doubletap",je="longtap",we="horizontal",xe="vertical",ke="all",_e=10,Ce="start",He="move",Se="end",Te="cancel",Ie="ontouchstart"in window,$e=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!Ie,Pe=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!Ie,Ae="TouchSwipe";function s(e,m){m=ae.extend({},m);var t=Ie||Pe||!m.fallbackToMouseEvents,n=t?Pe?$e?"MSPointerDown":"pointerdown":"touchstart":"mousedown",s=t?Pe?$e?"MSPointerMove":"pointermove":"touchmove":"mousemove",i=t?Pe?$e?"MSPointerUp":"pointerup":"touchend":"mouseup",r=t?Pe?"mouseleave":null:"mouseleave",o=Pe?$e?"MSPointerCancel":"pointercancel":"touchcancel",g=0,b=null,y=null,v=0,j=0,w=0,x=1,k=0,_=0,C=null,a=ae(e),H="start",S=0,T={},l=0,I=0,c=0,u=0,f=0,p=null,$=null;try{a.bind(n,d),a.bind(o,A)}catch(e){ae.error("events not supported "+n+","+o+" on jQuery.swipe")}function d(e){if(!0!==a.data(Ae+"_intouch")&&!(0<ae(e.target).closest(m.excludedElements,a).length)){var t,n,s=e.originalEvent?e.originalEvent:e,i=s.touches,r=i?i[0]:s;return H=Ce,i?S=i.length:!1!==m.preventDefaultEvents&&e.preventDefault(),_=y=b=null,x=1,k=w=j=v=g=0,(n={})[le]=ne(le),n[ce]=ne(ce),n[ue]=ne(ue),n[fe]=ne(fe),C=n,X(),Z(0,r),!i||S===m.fingers||m.fingers===ke||z()?(l=oe(),2==S&&(Z(1,i[1]),j=w=ie(T[0].start,T[1].start)),(m.swipeStatus||m.pinchStatus)&&(t=L(s,H))):t=!1,!1===t?(L(s,H=Te),t):(m.hold&&($=setTimeout(ae.proxy(function(){a.trigger("hold",[s.target]),m.hold&&(t=m.hold.call(a,s,s.target))},this),m.longTapThreshold)),G(!0),null)}}function h(e){var t=e.originalEvent?e.originalEvent:e;if(H!==Se&&H!==Te&&!Q()){var n,s,i,r,o,a,l,c,u,f=t.touches,p=ee(f?f[0]:t);if(I=oe(),f&&(S=f.length),m.hold&&clearTimeout($),H=He,2==S&&(0==j?(Z(1,f[1]),j=w=ie(T[0].start,T[1].start)):(ee(f[1]),w=ie(T[0].end,T[1].end),T[0].end,T[1].end,_=x<1?de:pe),x=(w/j*1).toFixed(2),k=Math.abs(j-w)),S===m.fingers||m.fingers===ke||!f||z()){if(b=re(p.start,p.end),function(e,t){if(!1===m.preventDefaultEvents)return;if(m.allowPageScroll===he)e.preventDefault();else{var n=m.allowPageScroll===me;switch(t){case le:(m.swipeLeft&&n||!n&&m.allowPageScroll!=we)&&e.preventDefault();break;case ce:(m.swipeRight&&n||!n&&m.allowPageScroll!=we)&&e.preventDefault();break;case ue:(m.swipeUp&&n||!n&&m.allowPageScroll!=xe)&&e.preventDefault();break;case fe:(m.swipeDown&&n||!n&&m.allowPageScroll!=xe)&&e.preventDefault()}}}(e,y=re(p.last,p.end)),c=p.start,u=p.end,g=Math.round(Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2))),v=se(),a=b,l=g,l=Math.max(l,te(a)),C[a].distance=l,n=L(t,H),!m.triggerOnTouchEnd||m.triggerOnTouchLeave){var d=!0;if(m.triggerOnTouchLeave){var h={left:(o=(r=ae(r=this)).offset()).left,right:o.left+r.outerWidth(),top:o.top,bottom:o.top+r.outerHeight()};s=p.end,i=h,d=s.x>i.left&&s.x<i.right&&s.y>i.top&&s.y<i.bottom}!m.triggerOnTouchEnd&&d?H=M(He):m.triggerOnTouchLeave&&!d&&(H=M(Se)),H!=Te&&H!=Se||L(t,H)}}else L(t,H=Te);!1===n&&L(t,H=Te)}}function P(e){var t,n=e.originalEvent?e.originalEvent:e,s=n.touches;if(s){if(s.length&&!Q())return t=n,c=oe(),u=t.touches.length+1,!0;if(s.length&&Q())return!0}return Q()&&(S=u),I=oe(),v=se(),R()||!N()?L(n,H=Te):m.triggerOnTouchEnd||0==m.triggerOnTouchEnd&&H===He?(!1!==m.preventDefaultEvents&&e.preventDefault(),L(n,H=Se)):!m.triggerOnTouchEnd&&W()?D(n,H=Se,ye):H===He&&L(n,H=Te),G(!1),null}function A(){w=j=l=I=S=0,x=1,X(),G(!1)}function E(e){var t=e.originalEvent?e.originalEvent:e;m.triggerOnTouchLeave&&L(t,H=M(Se))}function O(){a.unbind(n,d),a.unbind(o,A),a.unbind(s,h),a.unbind(i,P),r&&a.unbind(r,E),G(!1)}function M(e){var t=e,n=B(),s=N(),i=R();return!n||i?t=Te:!s||e!=He||m.triggerOnTouchEnd&&!m.triggerOnTouchLeave?!s&&e==Se&&m.triggerOnTouchLeave&&(t=Te):t=Se,t}function L(e,t){var n,s=e.touches;return(q()&&J()||J())&&(n=D(e,t,ge)),(F()&&z()||z())&&!1!==n&&(n=D(e,t,be)),Y()&&V()&&!1!==n?n=D(e,t,ve):v>m.longTapThreshold&&g<_e&&m.longTap&&!1!==n?n=D(e,t,je):1!==S&&Ie||!(isNaN(g)||g<m.threshold)||!W()||!1===n||(n=D(e,t,ye)),t===Te&&(J()&&(n=D(e,t,ge)),z()&&(n=D(e,t,be)),A()),t===Se&&(s&&s.length||A()),n}function D(e,t,n){var s;if(n==ge){if(a.trigger("swipeStatus",[t,b||null,g||0,v||0,S,T,y]),m.swipeStatus&&!1===(s=m.swipeStatus.call(a,e,t,b||null,g||0,v||0,S,T,y)))return!1;if(t==Se&&q()){if(clearTimeout(p),clearTimeout($),a.trigger("swipe",[b,g,v,S,T,y]),m.swipe&&!1===(s=m.swipe.call(a,e,b,g,v,S,T,y)))return!1;switch(b){case le:a.trigger("swipeLeft",[b,g,v,S,T,y]),m.swipeLeft&&(s=m.swipeLeft.call(a,e,b,g,v,S,T,y));break;case ce:a.trigger("swipeRight",[b,g,v,S,T,y]),m.swipeRight&&(s=m.swipeRight.call(a,e,b,g,v,S,T,y));break;case ue:a.trigger("swipeUp",[b,g,v,S,T,y]),m.swipeUp&&(s=m.swipeUp.call(a,e,b,g,v,S,T,y));break;case fe:a.trigger("swipeDown",[b,g,v,S,T,y]),m.swipeDown&&(s=m.swipeDown.call(a,e,b,g,v,S,T,y))}}}if(n==be){if(a.trigger("pinchStatus",[t,_||null,k||0,v||0,S,x,T]),m.pinchStatus&&!1===(s=m.pinchStatus.call(a,e,t,_||null,k||0,v||0,S,x,T)))return!1;if(t==Se&&F())switch(_){case pe:a.trigger("pinchIn",[_||null,k||0,v||0,S,x,T]),m.pinchIn&&(s=m.pinchIn.call(a,e,_||null,k||0,v||0,S,x,T));break;case de:a.trigger("pinchOut",[_||null,k||0,v||0,S,x,T]),m.pinchOut&&(s=m.pinchOut.call(a,e,_||null,k||0,v||0,S,x,T))}}return n==ye?t!==Te&&t!==Se||(clearTimeout(p),clearTimeout($),V()&&!Y()?(f=oe(),p=setTimeout(ae.proxy(function(){f=null,a.trigger("tap",[e.target]),m.tap&&(s=m.tap.call(a,e,e.target))},this),m.doubleTapThreshold)):(f=null,a.trigger("tap",[e.target]),m.tap&&(s=m.tap.call(a,e,e.target)))):n==ve?t!==Te&&t!==Se||(clearTimeout(p),clearTimeout($),f=null,a.trigger("doubletap",[e.target]),m.doubleTap&&(s=m.doubleTap.call(a,e,e.target))):n==je&&(t!==Te&&t!==Se||(clearTimeout(p),f=null,a.trigger("longtap",[e.target]),m.longTap&&(s=m.longTap.call(a,e,e.target)))),s}function N(){var e=!0;return null!==m.threshold&&(e=g>=m.threshold),e}function R(){var e=!1;return null!==m.cancelThreshold&&null!==b&&(e=te(b)-g>=m.cancelThreshold),e}function B(){return!m.maxTimeThreshold||!(v>=m.maxTimeThreshold)}function F(){var e=U(),t=K(),n=null===m.pinchThreshold||k>=m.pinchThreshold;return e&&t&&n}function z(){return!!(m.pinchStatus||m.pinchIn||m.pinchOut)}function q(){var e=B(),t=N(),n=U(),s=K();return!R()&&s&&n&&t&&e}function J(){return!!(m.swipe||m.swipeStatus||m.swipeLeft||m.swipeRight||m.swipeUp||m.swipeDown)}function U(){return S===m.fingers||m.fingers===ke||!Ie}function K(){return 0!==T[0].end.x}function W(){return!!m.tap}function V(){return!!m.doubleTap}function Y(){if(null==f)return!1;var e=oe();return V()&&e-f<=m.doubleTapThreshold}function X(){u=c=0}function Q(){var e=!1;c&&(oe()-c<=m.fingerReleaseThreshold&&(e=!0));return e}function G(e){a&&(!0===e?(a.bind(s,h),a.bind(i,P),r&&a.bind(r,E)):(a.unbind(s,h,!1),a.unbind(i,P,!1),r&&a.unbind(r,E,!1)),a.data(Ae+"_intouch",!0===e))}function Z(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,T[e]=n}function ee(e){var t=void 0!==e.identifier?e.identifier:0,n=T[t]||null;return null===n&&(n=Z(t,e)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function te(e){if(C[e])return C[e].distance}function ne(e){return{direction:e,distance:0}}function se(){return I-l}function ie(e,t){var n=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+s*s))}function re(e,t){var n,s,i,r,o,a,l=(s=t,i=(n=e).x-s.x,r=s.y-n.y,o=Math.atan2(r,i),(a=Math.round(180*o/Math.PI))<0&&(a=360-Math.abs(a)),a);return l<=45&&0<=l?le:l<=360&&315<=l?le:135<=l&&l<=225?ce:45<l&&l<135?fe:ue}function oe(){return(new Date).getTime()}this.enable=function(){return a.bind(n,d),a.bind(o,A),a},this.disable=function(){return O(),a},this.destroy=function(){O(),a.data(Ae,null),a=null},this.option=function(e,t){if("object"==typeof e)m=ae.extend(m,e);else if(void 0!==m[e]){if(void 0===t)return m[e];m[e]=t}else{if(!e)return m;ae.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}ae.fn.swipe=function(e){var t=ae(this),n=t.data(Ae);if(n&&"string"==typeof e){if(n[e])return n[e].apply(this,Array.prototype.slice.call(arguments,1));ae.error("Method "+e+" does not exist on jQuery.swipe")}else if(n&&"object"==typeof e)n.option.apply(this,arguments);else if(!(n||"object"!=typeof e&&e))return function(n){!n||void 0!==n.allowPageScroll||void 0===n.swipe&&void 0===n.swipeStatus||(n.allowPageScroll=he);void 0!==n.click&&void 0===n.tap&&(n.tap=n.click);n||(n={});return n=ae.extend({},ae.fn.swipe.defaults,n),this.each(function(){var e=ae(this),t=e.data(Ae);t||(t=new s(this,n),e.data(Ae,t))})}.apply(this,arguments);return t},ae.fn.swipe.version="1.6.15",ae.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0},ae.fn.swipe.phases={PHASE_START:Ce,PHASE_MOVE:He,PHASE_END:Se,PHASE_CANCEL:Te},ae.fn.swipe.directions={LEFT:le,RIGHT:ce,UP:ue,DOWN:fe,IN:pe,OUT:de},ae.fn.swipe.pageScroll={NONE:he,HORIZONTAL:we,VERTICAL:xe,AUTO:me},ae.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ke}},void 0!==n&&n.exports?s(e("jquery")):s(jQuery),n.exports}),System.register("tgs/controllers/articleGallery.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller","jquery-touchswipe"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){var e=this.node,t=this.param;if(this.width=0,this.minWidth=756,this.minHeight=180,this.controls={left:e.find(".ts-media-control.ts-left"),right:e.find(".ts-media-control.ts-right"),prev:e.find(".ts-prev"),next:e.find(".ts-next")},this.defaults={transition:"swing",transitionSpeed:150,visibleItems:5,skipItems:1,padding:9,activeClass:"ts-active",lightboxClasses:".ts-element-title > a, a.ts-link, .ts-media, .ts-media-more, .ts-show-all-btn, .ts-stage-show-all-btn",moreButton:e.find(".ts-caption .ts-media-more"),showAdAfterClicks:10,resetAutomatic:!1,showOverview:!0,allowResize:!0,sushibarItemsCount:10,skip:0,limit:30},this.isLastPic=!1,this.loader=e.find(".ts-loader"),this.loadedItems=0,this.measured=!1,this.currentImage=e.find("figure .ts-media-img-large img"),this.ul=e.find(".ts-gallery-nav ul"),this.AdSlots={embedded:["medrect-gallery"],lightbox:["leaderboard-gallery","special-unit-gallery","sky-gallery"]},this.$lightboxContent=e.find(".ts-lightbox-content"),this.lock=!1,this.current=0,this.currentNavItem=0,this.clickCount=0,this.overview=!1,this.param=this.getJSON(t),this.current=this.param.current?this.param.current:0,!this.current&&window.currentGalleryItem&&(this.current=window.currentGalleryItem,this.currentNavItem=window.currentGalleryItem),this.logger.log("-- init gallery --",this.param),this.opts=$.extend(this.defaults,this.param),this.prepareGalleryStage(),this.length=this.ul.find("li").length,this.param.hasOwnProperty("baseUrl")&&this.loadAsynch(),this.measureIt(),this.initControls(),this.initAds(),this.isLightbox())if(this.setImageNumber(),this.logger.log("prepare lightbox image gallery"),this.fillMissingMarkup(),this.initSize(),this.resizeLightbox(this.currentImage[0]),this.setVisibleItems(),this.move(),this.isSingleImage()&&!this.hasCaption()&&this.hideCaption(),this.setImageCaptionSize(),this.isSingleImage())e.find(".ts-headline").text("Foto"),this.replaceImageCaption(),this.checkAd();else{var n=this.opts.baseUrl;if(n){var s=n.substring(n.lastIndexOf("?galleryId=")+1).split(/[^0-9a-z_]/i),i=s?s[1]:"",r=e.find(".ts-headline").text()+" - "+i;this.analytics.firePageview("Fotostrecken",r),this.analytics.fireEvent("Fotostrecken","Fotostrecke öffnen",r,this.current),this.analytics.flashiOnFireGallery(r,$(this.currentImage).attr("src"))}}else this.show(!0),this.checkCaptionMoreButton(),this.move()}},{key:"getJSON",value:function(e){if("object"!=typeof e){var t=(e=e.replace(/""/g,'"')).split('",');if(!(1<t.length))return e;var n={};for(var s in t){var i=t[s].split('":');i[0]=i[0].replace(/"/g,""),i[0]=i[0].trim(),i[1]&&(i[1]=i[1].replace('"',"")),"caption"==i[0]?(i[1]=i[1].replace(/"/g,'"'),n[i[0]]=i[1]):null!=i[0]&&null!=i[1]&&(i[0]=i[0].replace(/{|}|'/g,""),i[1]=i[1].replace(/{|}|'/g,""),n[i[0]]=i[1])}if(n)return n}return e}},{key:"initAds",value:function(){var n,s=this;try{this.isLightbox()?(n=$('<div class="ts-gallery-ad-container"><div class="ts-gallery-click-bg"></div></div>'),s.AdSlots.lightbox.forEach(function(e){var t=$('<div id="urban-'+e+"\"><script type='text/javascript'>urban.cmd.push( function() { urban.display(\""+e+'"); }); <\/script></div>');n.append(t)}),$("#ts-layer").prepend(n)):this.AdSlots.embedded.forEach(function(e){var t=$('<div class="ts-zr12qtz" id="urban-'+e+"\"><script type='text/javascript'>urban.cmd.push( function() { urban.display(\""+e+'"); }); <\/script></div>');s.node.find(".ts-media-img-large").append(t)})}catch(e){}}},{key:"checkAd",value:function(){if(0<this.opts.showAdAfterClicks&&!this.isLightbox()&&(this.clickCount&&this.clickCount%this.opts.showAdAfterClicks==0?(this.logger.log("show ad after clicks",this.clickCount),this.displayAd(1)):this.displayAd(0)),this.isLightbox())try{$(".ts-gallery-click-bg").off("click"),urban.refresh(this.AdSlots.lightbox)}catch(e){}}},{key:"displayAd",value:function(e){var t=this.node.find("#urban-medrect-gallery");if(e){this.currentImage.addClass("ts-hidden");try{urban.refresh(this.AdSlots.embedded),t.removeClass("ts-hidden")}catch(e){}}else this.currentImage.removeClass("ts-hidden"),t.addClass("ts-hidden")}},{key:"setVisibleItems",value:function(){var e=this.node.find(".ts-lightbox-footer").width()-40-40;this.ul.children().length;if(e){var t=Math.floor(e/121);this.opts.visibleItems=t,this.node.find(".ts-gallery-stage").css("width",121*t)}}},{key:"prepareGalleryStage",value:function(){if(this.ul.children().length>=this.opts.sushibarItemsCount){var e=$('<li class="ts-stage-show-all-btn">Alle Bilder anzeigen</li>');this.ul.append(e)}}},{key:"setImageNumber",value:function(){if(this.ul.children().length){var e=this.ul.children().length;e>=this.opts.sushibarItemsCount&&(e-=1),this.isLightbox()&&this.allPics&&(e=this.allPics),this.node.find(".ts-gallery-info").text("1 von "+e)}}},{key:"initLightboxDimensions",value:function(){this.node.outerWidth(),this.node.outerHeight(),$(window).width(),this.width}},{key:"initControls",value:function(){var s=this,o=this;this.controls.left.off("click").on("click",function(e){return o.moveLeft($(this)),o.analytics.firePageview("Fotostrecken",o.title),o.analytics.fireEvent("Fotostrecken","click vorheriges Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src")),!1}),this.controls.right.off("click").on("click",function(e){return o.moveRight($(this)),o.analytics.firePageview("Fotostrecken",o.title),o.analytics.fireEvent("Fotostrecken","click nächstes Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src")),!1}),this.node.find(".ts-teaser-item").off("click").on("click",function(e){s.logger.log("trying to load teaser gallery");var t=$(e.target),n=$(".ts-mc-detail");return t.find("a").off("click").on("click",function(e){e.preventDefault()}),n.find(".ts-caption").addClass("ts-hidden"),n.find(".ts-loading").removeClass("ts-hidden"),o.param=t.data("param"),"object"!=typeof o.param&&(o.param=o.param.replace(/'/g,'"'),o.param=JSON.parse(o.param)),o.param.lightbox=!0,o.lastpicActive=!1,o.loaded=0,s.logger.log(o.param),o.opts.baseUrl=o.param.baseUrl,o.isLastPic=!0,o.loadAsynch(),!1}),this.node.find(this.opts.lightboxClasses).off("click").on("click",function(e){e.preventDefault(),s.logger.log("trying to open ts layer");var t=s.node.find("ul li."+o.opts.activeClass).index();return $(e.currentTarget).hasClass("ts-stage-show-all-btn")&&(t=10,window.currentGalleryItem=10),window.currentGalleryItem=0<=t?t:0,s.app.layer.load(o.param+"&current="+t),!1}),this.node.find(".ts-current-large-img").swipe({swipe:function(e,t,n,s,i,r){switch(t){case"left":o.moveRight(),o.analytics.firePageview("Fotostrecken",o.title),o.analytics.fireEvent("Fotostrecken","Swipe vorheriges Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src"));break;case"right":o.moveLeft(),o.analytics.firePageview("Fotostrecken",o.title),o.analytics.fireEvent("Fotostrecken","Swipe nächstes Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src"))}}}),this.controls.prev.off("click").on("click",function(e){return $(this).hasClass("ts-disabled")||(o.analytics.fireEvent("Fotostrecken","Fotostrecke Sushibar vorheriges Bild ",this.title,this.current),o.prev(),o.clickCount++),!1}),this.controls.next.off("click").on("click",function(e){return $(this).hasClass("ts-disabled")||(o.analytics.fireEvent("Fotostrecken","Fotostrecke Sushibar nächstes Bild ",this.title,this.current),o.next(),o.clickCount++),!1}),this.ul.find("li").off("click").on("click",function(e){var t=$(e.delegateTarget);return e.preventDefault(),t.hasClass("ts-sushibar-more")||(t.hasClass("ts-stage-show-all-btn")&&(s.app.layer.load(o.param+"&current="+(o.length-1)),s.analytics.firePageview("Fotostrecken",o.title),s.analytics.fireEvent("Fotostrecken","click Alle Bilder anzeigen",o.title,o.current),s.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src"))),t.hasClass("ts-overview")?(o.move(o.length),o.lastpic(),s.analytics.firePageview("Fotostrecken",o.title),s.analytics.fireEvent("Fotostrecken","click Übersicht Sushibar",o.title,o.current),s.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src"))):(s.analytics.firePageview("Fotostrecken",o.title),s.analytics.fireEvent("Fotostrecken","click Sushibar Bild",o.title,o.current),s.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src")),o.setActiveItem(t),o.checkSushibarOffset(),o.$lightboxContent.find(".ts-media-wrapper").show(),o.$lightboxContent.find(".ts-overview-container").hide()),o.clickCount++),!1}),this.isLightbox()&&$("body").off("keyup").on("keyup",this.node,function(e){switch(e.preventDefault(),e.keyCode){case 37:o.moveLeft(),o.analytics.fireEvent("Fotostrecken","Pfeiltaste vorheriges Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src"));break;case 39:o.moveRight(),o.analytics.fireEvent("Fotostrecken","Pfeiltaste nächstes Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src"))}}),this.node.find(".ts-current-large-img").off("click").on("click",function(e){o.isLightbox()&&!o.isSingleImage()&&(o.moveRight(),o.analytics.firePageview("Fotostrecken",o.title),o.analytics.fireEvent("Fotostrecken","click großes Bild",o.title,o.current),o.analytics.flashiOnFireGallery(o.title,$(o.currentImage).attr("src")))}),$(window).resize(function(e){o.isLightbox()&&(o.initLightboxDimensions(),o.resizeLightbox(o.currentImage[0]),o.setVisibleItems(),o.resizeCaption(o.node.find(".ts-current-large-img")),o.initCaptionControls(),o.isSingleImage()&&o.resizeCaption(o.node.find(".ts-media-img-large img")),o.analytics.fireEvent("Fotostrecken","Window Resize",o.title,o.current))})}},{key:"initCaptionControls",value:function(){var s=this.node.find(".ts-caption");s.css("max-height",""),this.node.find(".ts-figure-text .ts-arrow").off("click").on("click",function(e){if(e.preventDefault(),s.hasClass("ts-caption-open"))s.removeClass("ts-caption-open"),s.css("max-height","");else{var t=s.find(".ts-description").outerHeight(!0),n=s.find(".ts-credit").outerHeight(!0);t||(t=s.find("p").outerHeight(!0)),s.addClass("ts-caption-open"),s.css("max-height",t+n+16)}})}},{key:"moveLeft",value:function(e){this.controls.left.hasClass("ts-disabled")||(this.prev(),this.current--,this.setActiveItem(this.ul.find("li:eq("+this.current+")")),this.$lightboxContent.find(".ts-overview-container").hide(),this.clickCount++)}},{key:"moveRight",value:function(e){this.controls.right.hasClass("ts-disabled")||(this.next(),this.current++,this.setActiveItem(this.ul.find("li:eq("+this.current+")")),this.clickCount++)}},{key:"show",value:function(e){this.node.show();var t=this.opts.baseUrl;if(t){var n=t.substring(t.lastIndexOf("?galleryId=")+1).split(/[^0-9a-z_]/i),s=n?n[1]:"",i=encodeURI(this.node.find(".ts-headline").text())+" - "+s;this.title=i,this.logger.log(n),this.logger.log("Fotostecken ID: "+s),e&&1==e&&i&&(this.analytics.firePageview("Fotostrecken",i),this.analytics.flashiOnFireGallery(i,$(this.currentImage).attr("src")))}}},{key:"fillMissingMarkup",value:function(){this.node.find(".ts-table").length||this.currentImage.wrap('<div class="ts-table"></div>').wrap('<div class="ts-table-cell"></div>'),this.node.find(".ts-figure-text").append($('<div class="ts-arrow" />'))}},{key:"measureIt",value:function(){this.scrollwidth=this.ul.find("li:first").outerWidth()+this.opts.padding,this.measured=40<this.ul.find("li:last").width(),this.checkControls()}},{key:"checkSushibarOffset",value:function(){if(this.isLightbox()){if("undefined"==this.opts.skip&&(this.opts.skip=Math.floor(this.current/this.opts.limit)*this.opts.limit),this.logger.log("checking offset of the sushibar to load more items"),this.logger.log(this.current,this.length,this.opts.skip,this.opts.limit),this.current>=this.length-this.opts.visibleItems)return this.logger.log("current: there are no more items in this gallery -> appending overview button -> break"),this.addOverviewButton(),this.lock=!1;if(this.currentNavItem>=this.length-this.opts.visibleItems)return this.logger.log("currentNavItem: there are no more items in this gallery -> appending overview button -> break"),this.addOverviewButton(),this.lock=!1;this.current>=this.opts.skip+this.opts.limit-this.opts.visibleItems?(this.logger.log("reaching end of the sushibar -> load more items"),this.loadSushibarItems()):this.currentNavItem>=this.opts.skip+this.opts.limit-this.opts.visibleItems?(this.logger.log("reaching end of the sushibar -> load more items"),this.loadSushibarItems()):this.lock=!1}}},{key:"loadSushibarItems",value:function(){var t=this,e=this.param.baseUrl,n={skip:this.opts.skip+this.opts.limit,limit:this.opts.limit};e=this.addViewportSizesToUrl(e),t.opts.skip+=t.opts.limit,this.analytics.fireEvent("Fotostrecken","Lade 30 weitere Bilder",this.title,this.current),$.ajax({url:e,data:n,dataType:"json",success:function(e){t.updateSushibar(e.html),t.initControls(),t.lock=!1}})}},{key:"updateSushibar",value:function(e){this.ul.append(e),this.checkControls()}},{key:"addOverviewButton",value:function(){0==this.node.find(".ts-gallery-stage ul .ts-overview").length&&(this.node.find(".ts-gallery-stage ul").append('<li class="ts-overview"><p>Übersicht</p></li>'),this.lock=!1,this.length+=1,this.next(),this.initControls(),this.checkControls())}},{key:"resetCaption",value:function(){this.node.find(".ts-caption").removeClass("ts-caption-open").css("max-height","0")}},{key:"resizeCaption",value:function(e){if(this.isLightbox()&&(""==this.node.find(".ts-description").text()&&""==this.node.find(".ts-credit").text()?this.node.find(".ts-caption").hide():this.node.find(".ts-caption").show()),this.isSingleImage()&&!this.hasCaption()&&this.hideCaption(),e.length){var t=e.width(),n=e.position().left,s=Math.max(t,560);s&&0<=n&&(s<=560&&(n=this.node.find(".ts-table").width()/2-280),this.node.find(".ts-caption").css({width:s,left:n}));var i=this.node.find(".ts-figure-text").outerHeight(!0),r=this.node.find(".ts-figure-text > p").height();r||(r=this.node.find(".ts-figure-text > .ts-description").height()),i<r?(this.node.find(".ts-figure-text .ts-arrow").removeClass("ts-hidden"),this.initCaptionControls()):this.node.find(".ts-figure-text .ts-arrow").addClass("ts-hidden")}}},{key:"setImageCaptionSize",value:function(){var e=this,t=this,n=this.node.find(".ts-caption");if(this.logger.log(n),this.isLightbox()){var s=this.node.find(".ts-media-img-large img");s.off("load").on("load",function(){e.logger.log("image loaded"),n.detach().appendTo(s.parent()),n.css("display","block"),t.resizeImage(),t.resizeCaption(s)}),t.resizeImage(),t.resizeCaption(s)}}},{key:"hasCaption",value:function(){var e=this.node.find(".ts-caption").text().replace(/ /g,"");return this.logger.log("caption text",e,e.length),!(e.length<=5)}},{key:"hideCaption",value:function(){this.node.find(".ts-caption").hide()}},{key:"replaceImageCaption",value:function(){var e=this.node.find(".ts-media-wrapper .ts-table-cell");if(e.length&&0==e.find(".ts-caption").length){var t=this.node.find(".ts-caption").detach();e.append(t)}}},{key:"setCurrentImagePosition",value:function(e){if(this.ul.children().length){if(this.node.find(".ts-gallery-info").length){if(this.isLightbox()){(t=this.node.find(".ts-gallery-info").detach()).prependTo(this.node.find(".ts-lightbox-footer")),t.text("0 von "+this.allPics)}}else{var t=$('<small class="ts-gallery-info" />');this.node.find(".ts-lightbox-footer").prepend(t)}var n=this.node.find(".ts-gallery-info").text().split(" ");n[0]=this.current+1,this.node.find(".ts-gallery-info").text(n.join(" "))}}},{key:"setActiveItem",value:function(e){if(this.ul.find("li").removeClass(this.opts.activeClass),e.addClass(this.opts.activeClass),e.hasClass("ts-overview"))return this.lastpic(),void this.node.find(".ts-socials").show();this.node.find(".ts-socials").hide(),this.current=e.index(),this.current>=this.ul.children().length&&(this.current=this.ul.children().length),this.current<0&&(this.current=0),this.currentNavItem=this.current,this.setImage(e);""==this.title&&this.title;this.isLightbox()||this.isSingleImage()||this.updateImageDate(e),this.move(),this.checkAd(),this.checkMoreButton(e),this.resetCaption(),this.setImageDescription(e),this.checkControls(),this.resizeCaption(this.node.find(".ts-current-large-img")),this.initCaptionControls()}},{key:"setImage",value:function(e){var t=this;if(0!=e.length){var n=this,s=e.find("a").attr("href"),i=e.find("div").data("param");s||(this.logger.log("image Param",i),(!i||"object"!=typeof i&&null!=i)&&(i=this.getJSON(i)),s=i.imgUrl),s&&function(){n.loader.show();var e=t.node.find("figure .ts-media-img-large img");e.attr("src",s).off("load").on("load",function(){n.loader.hide(),t.logger.log("large img loaded"),n.isLightbox()&&(n.resizeLightbox(e,!0),n.resizeImage(),n.setImageCaptionSize(),n.resizeCaption(t.node.find("figure .ts-media-img-large img")),n.updateImageDate(i)),n.$lightboxContent.find(".ts-media-wrapper").show()}),n.resizeImage(),n.resizeCaption(t.node.find("figure .ts-media-img-large img"))}()}}},{key:"updateImageDate",value:function(e){e.imgDate&&this.node.find(".ts-date").text(e.imgDate)}},{key:"setImageDescription",value:function(e){var t=e.find("a").data("caption"),n=e.find("a").data("credit");if(this.logger.log("setImageDescription with caption:",t),this.isLightbox()){var s=e.find(".ts-media-wrapper").data("param");this.logger.log("overview param",s);var i=s.caption;n=s.credit;this.node.find(".ts-figure-text > .ts-description").html(i),this.node.find(".ts-figure-text").css("height","auto").removeClass("ts-caption-open")}else this.node.find(".ts-figure-text").html(t),t&&t.length<1?this.node.find(".ts-figure-text").hide():this.node.find(".ts-figure-text").show(),this.checkCaptionMoreButton();var r=this.node.find(".ts-credit");0<r.length?this.node.find(".ts-credit").html(n):((r=$('<small class="ts-credit" itemprop="copyrightHolder" />')).html(n),this.node.find(".ts-gallery-info").after(r)),this.setCurrentImagePosition()}},{key:"checkCaptionMoreButton",value:function(){this.node.find(".ts-figure-text:contains('...')").length?$(this.opts.moreButton).show():$(this.opts.moreButton).hide()}},{key:"initSize",value:function(){this.logger.log("set lightbox size");$(window).width();this.node.css({width:this.width,height:"auto","margin-left":0,top:200}),this.node.show()}},{key:"resizeLightbox",value:function(e,t){if(this.isLightbox()&&this.opts.allowResize){var n=$(window).width(),s=$(window).height(),i=e.naturalWidth,r=e.naturalHeight,o=n-400-40,a=o>this.minWidth?o:this.minWidth,l=s-120-20,c=(Math.min(i,a),l-90-40),u=i*Math.min(r,l)/r;Math.max(u,this.width),this.minWidth;this.node.css({width:a,height:"auto",top:160}),this.lightboxResized=!0;var f=c>this.minHeight?c:this.minHeight;this.node.find(".ts-table").css("height",f),this.node.find(".ts-current-large-img").css("max-height",c>this.minHeight?c:this.minHeight),this.node.find(".ts-media-img-large img").css("max-height",c>this.minHeight?c:this.minHeight);var p=this.node.offset().left,d=this.node.width();$("#urban-sky-gallery").css("left",p+d+30)}}},{key:"resizeImage",value:function(){if(this.isLightbox()){var e=this.node.find(".ts-current-large-img"),t=this.node.find(".ts-media-img-large"),n=t.width(),s=t.height();if(0==e.length&&(e=t.find("img")),e.length){var i=e[0].naturalWidth,r=e[0].naturalHeight,o=n/i,a=s/r;r<s-400&&i<n-400?e.css({width:"auto",height:"auto"}):o<=a?e.css({width:"100%",height:"auto"}):e.css({width:"auto",height:s})}}}},{key:"move",value:function(e){if(this.ul.children().length>this.opts.visibleItems){e||(e=this.current);var t=this.getSushibarCenter(e);this.ul.css({left:-t+"px"})}this.checkControls()}},{key:"animateTo",value:function(e,t,n){var s=this,i=t||s.opts.transitionSpeed;this.ul.children().length>=this.opts.visibleItems&&this.ul.stop().animate({left:-e+"px"},i,s.opts.transition,function(){s.lock=!1,s.checkControls(),null==n&&s.analytics.firePageview("Gallery")})}},{key:"getSushibarCenter",value:function(e){this.scrollwidth=this.ul.find("li:first").outerWidth()+this.opts.padding;var t=this.node.find(".ts-gallery-stage").width(),n=e*this.scrollwidth-t/2+this.scrollwidth/2,s=this.ul.children().length*this.scrollwidth-t;return n<=0?n=0:s<=n&&(n=s),this.checkSushibarControls(n,s),n}},{key:"prev",value:function(){this.measured||this.measureIt(),this.ul.position().left<=-10&&(this.isLightbox(),this.move(this.currentNavItem*this.scrollwidth)),this.currentNavItem-=this.opts.visibleItems,this.move(this.currentNavItem)}},{key:"next",value:function(){this.isLightbox()&&this.isLocked()||(this.lock=!0,this.measured||this.measureIt(),this.currentNavItem>this.length-this.opts.visibleItems||this.isLightbox()&&(this.currentNavItem,this.length,this.opts.visibleItems),this.isLightbox(),this.move(this.currentNavItem*this.scrollwidth),this.currentNavItem+=this.opts.visibleItems,this.move(this.currentNavItem),this.checkSushibarOffset())}},{key:"isLocked",value:function(){return this.lock}},{key:"checkControls",value:function(){this.logger.log("current",this.current,this.currentNavItem,"length",this.length,this.opts.visibleItems,this.length-this.opts.visibleItems),this.current<=0?this.controls.left.addClass("ts-disabled"):this.controls.left.removeClass("ts-disabled"),this.current>=this.length?this.controls.right.addClass("ts-disabled"):this.controls.right.removeClass("ts-disabled"),this.isLightbox()&&(this.node.find(".ts-gallery-stage ul li.ts-overview").length,this.current>=this.length-1?this.controls.right.addClass("ts-disabled"):this.controls.right.removeClass("ts-disabled"),this.currentNavItem>=this.length-this.opts.visibleItems?this.controls.next.addClass("ts-disabled"):this.controls.next.removeClass("ts-disabled"))}},{key:"checkSushibarControls",value:function(e,t){e<=0?this.controls.prev.addClass("ts-disabled"):this.controls.prev.removeClass("ts-disabled"),t<=e?this.controls.next.addClass("ts-disabled"):this.controls.next.removeClass("ts-disabled")}},{key:"reset",value:function(){this.logger.log("reset gallery!"),this.lock=!0,this.current=0,this.move()}},{key:"isLightbox",value:function(){return!(!this.param||!this.param.lightbox)}},{key:"isSingleImage",value:function(){return!this.ul.children().length}},{key:"checkMoreButton",value:function(e){var t=this.node.find(".ts-show-all-btn");10<=e.index()+1&&10<this.ul.children().length-1?t.show():t.hide()}},{key:"displayTeaserOverview",value:function(){this.logger.log("show teaser overlay");var e=this.ul.find("."+this.opts.activeClass),t=this.ul.find(".ts-overview");e.removeClass(this.opts.activeClass),t.addClass(this.opts.activeClass),this.node.find(".ts-teaserlist a").off("click").attr("data-command","").attr("data-param",""),this.logger.log(this.$lightboxContent.find(".ts-media-wrapper")),this.logger.log(this.$lightboxContent.find(".ts-overview-container")),this.$lightboxContent.find(".ts-media-wrapper").hide(),this.$lightboxContent.find(".ts-overview-container").show(),this.lastpicActive=!0,this.lastPicLock=!1}},{key:"lastpic",value:function(){var i=this;if(!this.lastPicLock)if(this.lastPicLock=!0,this.logger.log("last pic"),i.overview)i.displayTeaserOverview(),i.initControls();else{if(this.logger.log("Before getJSON"),this.logger.log(this.param),!this.param.lastPic)return void this.logger.log("no overview page was given");$.getJSON(this.param.lastPic,function(e){var t=e.html,n=$(t);n.find("script").remove();var s=n.wrap("<div>").parent().html();i.$lightboxContent.append(s),i.$lightboxContent.find(".ts-teaser-list").data("target",e.galleryLink),i.overview=!0,i.opts.limit=30,i.length=e.allPics,i.displayTeaserOverview(),i.initControls()})}}},{key:"loadAsynch",value:function(){var s=this,i=this;this.logger.log("trying to load gallery data ..",this.opts.baseUrl),i.loader.show();var e={skip:i.opts.offset*i.loadedItems||0,limit:i.opts.limit||30};this.opts.baseUrl=this.addViewportSizesToUrl(this.opts.baseUrl),$.getJSON(this.opts.baseUrl,e,function(e){if(s.logger.log("response received: ",e),""!=e.html){if(i.length=e.allPics,i.allPics=e.allPics,i.ul.empty().append(e.html),i.move(0),i.length<=i.ul.find("li").length&&i.opts.showOverview&&(i.addOverviewButton(),i.length++),i.isLastPic&&(i.current=0,i.isLastPic=0),i.loadedItems=e.allPics,s.logger.log("title",e.galleryTitle),i.setActiveItem(i.ul.find("li:eq("+i.current+")")),i.initLightboxDimensions(),i.loader.hide(),i.resizeLightbox(i.currentImage),i.show(),i.setImageCaptionSize(),i.setCurrentImagePosition(),i.initControls(),s.node.find(".ts-headline").text(e.galleryTitle),i.lock=!1,i.measureIt(),"init"==status){i.move(0),i.loaded++,i.measureIt(),i.ul.find("li:first").addClass(i.active);var t=i.ul.find("li:first .ts-media-wrapper"),n=JSON.parse($(t).attr("data-param"));$("<img />").attr({src:n.imgUrl,class:"ts-img-gallery"});i.lock=!1}i.currentNavItem=i.current,i.isLastPicLoaded()?(i.current=0,i.currentNavItem=0,i.param.lightbox=!0,i.move(0),i.setActiveItem(i.ul.find("li:eq("+i.current+")")),i.setImageNumber()):i.currentNavItem>i.opts.visibleItems&&i.move(i.current*i.scrollwidth),i.checkControls(),i.$lightboxContent.find(".ts-overview-container").remove(),i.$lightboxContent.find(".ts-media-wrapper").show(),i.overview=!1,i.initControls()}}).fail(function(){this.logger.log("an error occured while loading the gallery data")})}},{key:"isLastPicLoaded",value:function(){return this.isLastPic}},{key:"addViewportSizesToUrl",value:function(e){this.logger.log("set viewport size to find matching image size");var t=$(window).width(),n=$(window).height();if(t=Math.round(t-400),n=Math.round(n-160),t=this.roundDecimal(t,250),n=this.roundDecimal(n,250),"undefined"!=window.devicePixelRatio){var s=window.devicePixelRatio;1<=s&&(t*=s,n*=s)}return t=Math.round(t),n=Math.round(n),"undefined"!=e&&-1!=e.indexOf("?")?e+"&width="+t+"&height="+n:e+"?width="+t+"&height="+n}},{key:"roundDecimal",value:function(e,t){var n=e/t;return(n=Math.round(n))*t}}]),t}(),e("default",a)}}}),System.register("tgs/components/videoCenterWidget.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/service"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){this.id=null,this.counter=0,this.playlistCount=0,this.defaults={token:"zoNA3kh3SVBIof3QlyeWgfIEg-Y-U3RN8bzVnZvTNQuz75unybn0bQ..",url:"http://video.tagesspiegel.de",width:635,playerIds:[],playlistIds:[],max:16,cols:4,tabs:[],thumbnailWidth:222,resort:""},this.options=Object.assign(this.defaults,this.options||{})}},{key:"createWidget",value:function(o){var a=this,e=o.find(".hcf-video-tabs"),l=o.find(".hcf-video-paging-wrapper").find(".hcf-video-paging-list"),c=o.find(".hcf-video-list-inner");e.on("click","a",function(e){e.preventDefault();var t=$(e.target),n=t.parent().index();t.closest("ul").find("li").removeClass("hcf-active"),t.parent().addClass("hcf-active"),o.find(".hcf-video-list").removeClass("hcf-active"),o.find(".hcf-video-paging-list").removeClass("hcf-active"),o.find(".hcf-video-list-inner > ul").eq(n).addClass("hcf-active"),o.find(".hcf-video-paging-wrapper > ul").eq(n).addClass("hcf-active"),o.find(".hcf-video-paging-wrapper ul.hcf-active li").removeClass("hcf-active"),o.find(".hcf-video-paging-wrapper ul.hcf-active li:first").addClass("hcf-active"),o.find(".hcf-video-paging-left").addClass("hcf-hidden"),o.find(".hcf-video-paging-right").removeClass("hcf-hidden"),c.css("left",0),a.analytics.firePageview("centerwidget")}),l.on("click","a",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".hcf-video-paging-list"),s=n.find(".hcf-page-link").index(e.target),i=(parseInt(c.css("left")),-3*a.options.thumbnailWidth*s),r=n.children().length;return 0<s?o.find(".hcf-video-paging-left").removeClass("hcf-hidden"):o.find(".hcf-video-paging-left").addClass("hcf-hidden"),r-1<=s?o.find(".hcf-video-paging-right").addClass("hcf-hidden"):o.find(".hcf-video-paging-right").removeClass("hcf-hidden"),c.animate({left:i+"px"},300),l.find(".hcf-active").removeClass("hcf-active"),t.parent().addClass("hcf-active"),a.analytics.firePageview("centerwidget"),!1}),o.find(".hcf-video-paging-left").click(function(e){var t=parseInt(c.css("left")),n=Math.abs(t/a.options.thumbnailWidth),s=o.find(".hcf-video-paging-wrapper ul.hcf-active").find("li"),i=$(e.target);return o.find(".hcf-video-paging-right").removeClass("hcf-hidden"),0<=t+a.options.thumbnailWidth&&!i.hasClass("hcf-hidden")&&i.addClass("hcf-hidden"),c.animate({left:a.options.thumbnailWidth+parseInt(c.css("left"))+"px"},100),s.removeClass("hcf-active"),o.find(".hcf-video-paging-wrapper ul.hcf-active li:nth-child("+Math.ceil(n/3)+")").addClass("hcf-active"),a.analytics.firePageview("centerwidget"),!1}),o.find(".hcf-video-paging-right").click(function(e){var t=parseInt(c.css("left")),n=Math.abs(t/a.options.thumbnailWidth)+2,s=o.find(".hcf-video-paging-wrapper ul.hcf-active").find("li"),i=$(e.target),r=o.find(".hcf-video-list.hcf-active").children();return o.find(".hcf-video-paging-left").removeClass("hcf-hidden"),s.removeClass("hcf-active"),t<=-a.options.thumbnailWidth*(r.length-4)?(i.addClass("hcf-hidden"),o.find(".hcf-video-paging-wrapper ul.hcf-active li:last").addClass("hcf-active")):o.find(".hcf-video-paging-wrapper ul.hcf-active li:nth-child("+Math.ceil(n/3)+")").addClass("hcf-active"),c.animate({left:-(a.options.thumbnailWidth-t)+"px"},100),a.analytics.firePageview("centerwidget"),!1})}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/centerBoxVideoWidget.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller","tgs/components/videoCenterWidget"],function(e,t){"use strict";var n,s,i,r,o,a,l;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default}],execute:function(){l=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){(new a).createWidget(this.node)}}]),t}(),e("default",l)}}}),System.register("tgs/controllers/countryTalks.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){window.addEventListener("message",function(e){var t=document.getElementById("mycountrytalks-embed"),n=0;"https://app.mycountrytalks.org"===e.origin&&("wasResized"in t.dataset&&(n=(document.documentElement.scrollTop||document.body.scrollTop)+t.getBoundingClientRect().top-50,window.scrollTo(0,n)),t.style.height=e.data+"px",t.setAttribute("data-was-resized","true"))},!1)}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/detail/enableButton.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){this.node.find("input").click(function(){$(".hcf-submit input").removeAttr("disabled")})}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/detail/inlineSubmit.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){var n=this.node.find("form");n.bind("submit",function(){var t=this;this.node.addClass("hcf-loading");var e=n.serializeArray();return $.post(n.attr("action"),e,function(e){t.node.html(e),t.node.removeClass("hcf-loading")}),!1})}}]),t}(),e("default",a)}}}),System.registerDynamic("tgs/templates/districtMapTooltip.hbs",["handlebars/handlebars.runtime","handlebars/handlebars.runtime.js"],!0,function(e,t,n){this||self;return n.exports=e("handlebars/handlebars.runtime").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){var r;return'<div class="ts-district-tooltip">\n\n    <h5 class="ts-district-name">'+e.escapeExpression("function"==typeof(r=null!=(r=n.name||(null!=t?t.name:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"name",hash:{},data:i}):r)+"</h5>\n\n    <dl>\n\n        <dt>Durchschnittsalter</dt>\n        <dd>"+e.escapeExpression("function"==typeof(r=null!=(r=n.avgAge||(null!=t?t.avgAge:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"avgAge",hash:{},data:i}):r)+"</dd>\n\n        <dt>Öffentliche Grünflächen</dt>\n        <dd>"+e.escapeExpression("function"==typeof(r=null!=(r=n.greenAreas||(null!=t?t.greenAreas:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"greenAreas",hash:{},data:i}):r)+" ha</dd>\n\n        <dt>Gesamtfläche</dt>\n        <dd>"+e.escapeExpression("function"==typeof(r=null!=(r=n.totalArea||(null!=t?t.totalArea:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"totalArea",hash:{},data:i}):r)+" ha</dd>\n\n        <dt>Einwohnerzahl</dt>\n        <dd>"+e.escapeExpression("function"==typeof(r=null!=(r=n.population||(null!=t?t.population:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"population",hash:{},data:i}):r)+"</dd>\n\n        <dt>Einwohnerdichte</dt>\n        <dd>"+e.escapeExpression("function"==typeof(r=null!=(r=n.populationDensity||(null!=t?t.populationDensity:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"populationDensity",hash:{},data:i}):r)+" pro ha</dd>\n\n        <dt>Hunde</dt>\n        <dd>"+e.escapeExpression("function"==typeof(r=null!=(r=n.dogs||(null!=t?t.dogs:t))?r:n.helperMissing)?r.call(null!=t?t:{},{name:"dogs",hash:{},data:i}):r)+"</dd>\n\n    </dl>\n\n</div>"},useData:!0}),n.exports}),System.register("tgs/controllers/districts/districtMap.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller","tgs/templates/districtMapTooltip"],function(e,t){"use strict";var s,n,i,r,o,a,l,c;return{setters:[function(e){s=e.default},function(e){n=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default},function(e){l=e.default}],execute:function(){c=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),i(t,[{key:"init",value:function(){var s=this;this.node.find(".ts-district-map>a").each(function(e,t){var n=$(t);n.on("mouseenter",function(e){var t=$(e.currentTarget).find("path").attr("id"),n=$(e.currentTarget).find("path").attr("name");s.showTooltip(t,n)}),n.on("mouseleave",function(e){return s.hideTooltip()})})}},{key:"showTooltip",value:function(e,t){var n=this.getDataForDistrict(e);this.$tooltip=$(l(s({name:t},n))).appendTo("body"),document.addEventListener("mousemove",this.refreshTooltipPosition.bind(this),!1)}},{key:"hideTooltip",value:function(){this.$tooltip.remove(),document.removeEventListener("mousemove",this.refreshTooltipPosition.bind(this))}},{key:"refreshTooltipPosition",value:function(e){this.$tooltip[0].style.left=e.pageX+10+"px",this.$tooltip[0].style.top=e.pageY+10+"px"}},{key:"getDataForDistrict",value:function(e){var t={mitte:[39,803,3947,363236,90,5979],"friedrichshain-kreuzberg":[37.7,311,2041,278393,132,4340],pankow:[40.7,1425,10307,389976,37,10267],"charlottenburg-wilmersdorf":[45.6,1041,6472,330468,48,7877],spandau:[44,1090,9187,234630,25,9056],"steglitz-zehlendorf":[46.3,1052,10256,299765,28,10083],"tempelhof-schoeneberg":[44,721,5303,341161,63,9061],neukoelln:[41.2,985,4493,328062,71,8486],"treptow-koepenick":[45.3,1100,16842,253333,15,8248],"marzahn-hellersdorf":[43.5,1286,6178,259373,41,10599],lichtenberg:[43,798,5212,275142,52,8227],reinickendorf:[45,1071,8931,256617,28,10374]}[e];return{avgAge:t[0].toLocaleString(),greenAreas:t[1].toLocaleString(),totalArea:t[2].toLocaleString(),population:t[3].toLocaleString(),populationDensity:t[4].toLocaleString(),dogs:t[5].toLocaleString()}}}]),t}(),e("default",c)}}}),System.register("npm:systemjs-plugin-babel@0.0.12/babel-helpers/toConsumableArray.js",[],function(e,t){"use strict";return{setters:[],execute:function(){e("default",function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)})}}}),System.register("tgs/controllers/ecommerceTracking.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller","tgs/services/utils"],function(e,t){"use strict";var m,n,s,i,r,o,g,a;return{setters:[function(e){m=e.default},function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){g=e.getCookieData}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){var h=this;this.node.on("click","a",function(e){var t=g("sso_user_data"),n=JSON.parse(decodeURIComponent(t));if(!(!(!n||!n.status)&&"activated"===n.status)){e.stopPropagation();var s=new URL(e.currentTarget.href),i=void 0,r=void 0;switch(s.hostname){case"plus.tagesspiegel.de":var o=s.pathname.match(/\/([^\/]*)\//);r=o?o[1].charAt(0).toUpperCase()+o[1].slice(1):"Homepage",i=s.pathname.match(/(\d+)\.html/)[1];break;case"interaktiv.tagesspiegel.de":r="Interaktiv",i=s.pathname;break;case"checkpoint.tagesspiegel.de":r="Checkpoint",i=s.pathname.match(/([^\/]+)\/?$/)[1]}var a=h.node.get(0).querySelector("h2").innerText,l=document.querySelector(".hcf-first.hcf-lead:not(.hcf-teaser)"),c=document.querySelectorAll(".hcf-main-col li.hcf-teaser"),u=[].concat(m(c));l&&u.unshift(l);var f=u.indexOf(h.node.get(0)),p={event:"clickProduct",ecommerce:{click:{actionField:{list:""+window.location.pathname},products:[{id:i,name:a,category:r,position:f+1}]}}},d={id:i,name:a,category:r,list:""+window.location.pathname};document.cookie="eec.product="+encodeURIComponent(JSON.stringify(d))+"; max-age=2592000; domain=tagesspiegel.de; path=/",h.analytics.sendTagManagerData(p)}})}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/embedSocials.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){this._conf={services:{facebook:{title:"Facebook",type:"facebook",cta:"Teilen",shareUrl:"http://www.facebook.com/sharer.php?u={{url}}"},twitter:{title:"Twitter",type:"twitter",cta:"Twittern",shareUrl:"https://twitter.com/share?url={{url}}&text={{text}}"},gplus:{title:"Google+",type:"gplus",cta:"Teilen",shareUrl:"https://plus.google.com/share?url={{url}}"}},slots:{top:["facebook","twitter","gplus"],bottom:["facebook","twitter","gplus"]}},this.sharedUrl=this.getSharedUrl(),this.sharingTitle=this.getSharingTitle();var e=this.socials("top"),t=this.socials("bottom"),n=null;if(""==this.param||void 0===this.param){var s=this.node.find(".hcf-teaser+.hcf-smart-box.hcf-inline-left");s.length?(n=s,e.addClass("pull-left")):n=0<this.node.find(".hcf-teaser").length?this.node.find(".hcf-teaser"):0<this.node.find(".hcf-smart-box.hcf-top").length?this.node.find(".hcf-smart-box.hcf-top"):this.node.find("h1"),n.after(e),this.node.parent().find(".hcf-newsletter-service").after(t)}else this.node.find(this.param).after(t);this.getSocialCounts(this.sharedUrl)}},{key:"getSharingTitle",value:function(){var e=$('meta[property="og:title"]').attr("content");return e=void 0!==e&&0<$.trim(e).length?$.trim(e):"",(void 0!==$(".hcf-frame-mc .hcf-headline").text()?$(".hcf-frame-mc .hcf-headline").text():"")||e}},{key:"getSharedUrl",value:function(){var e=void 0!==$(".hcf-mc-detail-faux .hcf-lastpics .hcf-teaser-list").data("target")?$(".hcf-mc-detail-faux .hcf-lastpics .hcf-teaser-list").data("target"):"",t=$('link[rel="canonical"]').attr("href"),n=document.location.href;return void 0!==e&&0<e.length?encodeURI(e):t&&0<t.length?encodeURI(t):encodeURI(n)}},{key:"getShareUrl",value:function(e){return e.shareUrl.replace("{{url}}",encodeURI(this.sharedUrl)).replace("{{text}}",encodeURI(this.sharingTitle))}},{key:"socials",value:function(e){for(var t=this,n=$('<div class="'+("top"==e?"hcf-socials-widgets hcf-socials-top":"hcf-socials-widgets hcf-socials-bottom")+'"/>'),s=$('<ul class="hcf-socials-container"/>').appendTo(n),i=this._conf.slots[e],r=0;r<i.length;r++){var o=this._conf.services[i[r]],a=$("<li class='hcf-social'></li>").addClass("hcf-"+o.type);$("<a href='"+this.getShareUrl(o)+"' data-url='"+t.sharedUrl+"'><span class='cta'>"+o.cta+"</span></a>").click(function(){return window.open($(this).attr("href"),"Teilen","width=490,height=390,left=300,top=250"),t.getSocialCounts(t.sharedUrl,!0),!1}).prependTo(a),a.appendTo(s)}return n}},{key:"getSocialCounts",value:function(e,t){var n=t?this.node.data("nocache"):this.node.data("cache"),s=$(".hcf-socials-container");n&&$.ajax({url:n,dataType:"json",success:function(e){$.each(e,function(e,t){if(0<t){var n=e.replace("Count","").replace("googlePlus","gplus");s.find(".hcf-"+n+" .cta").removeClass("cta").addClass("count").text(t)}})}})}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/footer/footerReveal.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/controller"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){var n=this;this.$revealBtn=this.node.find(".ts-footer-toggle"),this.$revealContent=this.node.find(".ts-additional-content"),this.$revealBtn.on("click",function(e){e.preventDefault();var t=n.$revealContent.get(0).scrollHeight;n.$revealBtn.hasClass("ts-expanded")?(n.$revealBtn.removeClass("ts-expanded"),n.$revealContent.css("max-height","")):(n.$revealBtn.addClass("ts-expanded"),n.$revealContent.css("max-height",t))})}}]),t}(),e("default",a)}}}),System.register("tgs/controllers/forms/activateUserForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/get.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form","tgs/services/utils"],function(e,t){"use strict";var n,s,i,r,o,a,l;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default},function(e){e.addParam}],execute:function(){l=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),s(t,[{key:"init",value:function(){r(Object.getPrototypeOf(t.prototype),"init",this).call(this),this.redirectParams={accountActivation:!0},this.fieldMap.set("Freischaltcode","activationKey")}}]),t}(),e("default",l)}}}),System.register("tgs/controllers/forms/loginForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/get.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form","tgs/services/utils"],function(e,t){"use strict";var n,s,i,r,o,a,l,c;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default},function(e){l=e.setCookie}],execute:function(){c=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),s(t,[{key:"init",value:function(){r(Object.getPrototypeOf(t.prototype),"init",this).call(this,{isSecure:!0}),this.isInsideHeader=this.form.closest(".ts-header").length,this.isInsideLayer=this.form.closest(".ts-layer").length,this.isInsideEditor=this.form.closest(".ts-comments-editor").length,this.redirect=!this.isInsideHeader&&!this.isInsideLayer&&!this.isInsideEditor,this.validator.useTooltips=this.isInsideHeader}},{key:"renderResponse",value:function(e){var t=this.isInsideHeader?"Sticky-Header":this.isInsideLayer?"Layer":this.isInsideEditor?"Kommentar-Editor":"Login-Seite";if(e.validation)if(!0===e.validation.status){this.app.layer.hide(),this.app.authentication.checkUserState(),e.cookies&&e.cookies.forEach(function(e){l(e)}),this.analytics.fireEvent("Nutzer","Erfolgreicher Login",t);var n=this.app.urlParams.hasOwnProperty("url")?this.app.urlParams.url+location.hash:window.location.origin+e.redirectUrl;window.location.href=decodeURIComponent(n)}else this.analytics.fireEvent("Nutzer","Fehlgeschlagener Login",t);else e&&e.html&&(this.node.parent().html(e.html),this.app.bindControllers())}}]),t}(),e("default",c)}}}),System.register("tgs/controllers/forms/logoutForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/get.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form","tgs/services/utils"],function(e,t){"use strict";var n,s,i,r,o,a,l;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default},function(e){e.setCookie}],execute:function(){l=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),s(t,[{key:"init",value:function(){r(Object.getPrototypeOf(t.prototype),"init",this).call(this,{validate:!1})}},{key:"renderResponse",value:function(e){this.analytics.fireEvent("Nutzer","Logout"),1==e.status&&(document.cookie="JSESSIONID=;expires=Thu, 01-Jan-70 00:00:01 GMT",window.location.pathname="")}}]),t}(),e("default",l)}}}),System.register("tgs/controllers/forms/lostPasswordForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/get.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form","tgs/components/message"],function(e,t){"use strict";var n,s,i,r,o,a,l;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){a=e.default},function(e){e.default}],execute:function(){l=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,a),s(t,[{key:"init",value:function(){r(Object.getPrototypeOf(t.prototype),"init",this).call(this),this.successMessage="Eine Bestätigungs-E-Mail wurde an Ihre E-Mail-Adresse verschickt. Bitte prüfen Sie Ihr E-Mail-Postfach, um Ihr Passwort neu einzugeben."}},{key:"renderResponse",value:function(e){if(e.validation&&!0===e.validation.status&&this.resetForm(),e&&e.callback)try{this[e.callback](e)}catch(e){this.logger.log("callback function does not exist")}}},{key:"resetForm",value:function(){this.form[0].reset()}},{key:"loggedIn",value:function(e){this.form.hide(),e.html&&this.form.before(e.html)}}]),t}(),e("default",l)}}}),System.register("tgs/controllers/forms/registrationForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form"],function(e,t){"use strict";var n,s,i,r,o;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default}],execute:function(){o=function(e){function t(){return n(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,r),t}(),e("default",o)}}}),System.register("tgs/controllers/forms/resetPasswordForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form"],function(e,t){"use strict";var n,s,i,r,o;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default}],execute:function(){o=function(e){function t(){return n(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,r),t}(),e("default",o)}}}),System.register("tgs/controllers/forms/standardForm.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/controllers/forms/form"],function(e,t){"use strict";var n,s,i,r,o;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default}],execute:function(){o=function(e){function t(){return n(this,t),s(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,r),t}(),e("default",o)}}}),System.register("tgs/services/newsCounter.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/inherits.js","tgs/framework/service"],function(e,t){"use strict";var n,s,i,r,o,a;return{setters:[function(e){n=e.default},function(e){s=e.default},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default}],execute:function(){a=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,o),s(t,[{key:"init",value:function(){var u=this,s=this.options.node;if(!(localStorage&&localStorage.setItem&&JSON&&JSON.parse))return!1;var t,i,n,a="/contentexport/feed/ajax/hp",r=s.find(".ts-link").add(".ts-header .ts-sticky-active"),o=document.title,f={},l=function(n,e){var s=JSON.parse(localStorage.getItem("ts-seenItemsHp")),t=JSON.parse(localStorage.getItem("ts-lastVisit")),i=s&&s.items?$.map(s.items,function(e){return e.id}):null,r=function(e){return $.grep(e,function(e,t){var n=i.indexOf(e.id);return(-1==n||s.items[n].time<e.time)&&Date.now()-e.time<72e5})};if(s)if(u.logger.log("refreshing counter... seenIdsHp:",s,i),36e5<Date.now()-t)u.logger.log("last visit happend more then 1 hour ago, removing counter data..."),localStorage.removeItem("ts-seenItemsHp"),n(!1);else if(e){var o=r(e.items);u.logger.log("filtering loaded hp items, this are the new ones:",o),n(o)}else $.getJSON(a,function(e){h(e);var t=r(e.items);u.logger.log("loaded current hp items, this are the new ones:",t),n(t)});else u.logger.log("no counter data found"),n(!1)},c=function(){l(function(e){if(e&&e.length){var t=e.length;9<(n=t)&&(n="9+"),s.hasClass("ts-with-counter")||(r.addClass("ts-with-counter").attr("href","/?ref=homepage-counter"),i?i.show():i=$('<span class="ts-counter" title="Neue und aktualisierte Beiträge auf der Homepage"/>').appendTo(r)),i.text(n),document.title="("+n+") "+o}else u.logger.log("removing counter, as there are no unread items"),r.removeClass("ts-with-counter").attr("href","/"),i&&i.hide(),document.title=o;var n})},p=function(e){var t,n,s=Math.round((Date.now()-e)/1e3/60);if(59<s)n=t=Math.round(s/60),n+=1<t?" Stunden":" Stunde";else{if(0==s)return"gerade eben";if(s<0)return"";n=s,n+=1<s?" Minuten":" Minute"}return"vor "+n},d=function(e){u.logger.log("initialising/resetting timer..."),e.time=Date.now(),t=e,localStorage.setItem("ts-seenItemsHp",JSON.stringify(e)),localStorage.setItem("ts-lastVisit",e.time),setInterval(c,12e4)},h=function(e){var l=$(".ts-notice-area");if(l.length){var t=$.grep(e.items,function(e,t){return e.markers&&-1<e.markers.indexOf("Eilmeldung")&&e.id!=location.pathname.match(/\/(\d*?).html/)[1]}),c=[];$.each(t,function(e,t){if(c.push(t.id),!f.hasOwnProperty(t.id)){var n=$('<div class="ts-notice"></div>').appendTo(l),s=$('<section class="ts-breaking-news" id="ts-breaking-news-'+t.id+'"></section>').appendTo(n),i=$('<a href="/'+t.id+'.html" class="ts-link"><strong class="ts-breaking-news-label">Eilmeldung:</strong></a>').appendTo(s),r=$('<div class="ts-ticker-container"></div>').appendTo(i),o=$('<span class="ts-breaking-news-teaser"><span class="ts-overline">'+t.sub+'</span><span class="ts-headline">'+t.title+"</span></span>").appendTo(r);t.$el=s,f[t.id]=t;var a=s.width()-i.innerWidth();u.logger.log("visibleWidth: "+a),o.append(o.html())}}),$.each(f,function(e,t){-1==c.indexOf(t.id)&&(t.$el.remove(),delete f[e])})}};if(s.hasClass("ts-active"))$.getJSON(a,function(t){h(t),l(function(e){(function(e){u.logger.log("setting time indicator for new teaser items:",e);var t=function(e){n&&n.find(".ts-new-items>li").each(function(e,t){var n=$(t).find("time"),s=new Date(n.attr("datetime")),i=p(s.getTime());n.text(i)}),$.each(e,function(e,t){Math.round((Date.now()-t.time)/1e3/60);var n=p(t.time),s=$(".hcf-main-col").find(".hcf-teaser, .hcf-lead").find("a:first[href*='/"+t.id+".html'] .hcf-overline");u.logger.log("setting time indicator for teaser item:",t,s),s.find("time").length||s.prepend("<time/>"),s.find("time").show().text(n)})};e?t(e):l(t)})(e),setInterval(function(){}