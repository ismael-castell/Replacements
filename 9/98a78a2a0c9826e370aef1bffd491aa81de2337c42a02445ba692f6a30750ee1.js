if(typeof require==="function"){var jQuery=require("../tests/vendor/jquery-1.11.2.min")}(function($){$.QueryString=function(a){if(a=="")return{};var b={};for(var i=0;i<a.length;++i){var p=a[i].split("=");if(p.length==1){b[p[0]]="";continue}else if(p.length!=2)continue;try{b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "))}catch(err){b[p[0]]=p[1].replace(/\+/g," ")}}return b}(window.location.search.substr(1).split("&"))})(jQuery);
!function(e,n,t){function r(e,n){return typeof e===n}function o(){var e,n,t,o,s,i,a;for(var l in S)if(S.hasOwnProperty(l)){if(e=[],n=S[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=r(n.fn,"function")?n.fn():n.fn,s=0;s<e.length;s++)i=e[s],a=i.split("."),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),C.push((o?"":"no-")+a.join("-"))}}function s(e){var n=w.className,t=Modernizr._config.classPrefix||"";if(T&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(r,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),T?w.className.baseVal=n:w.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):T?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function a(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function l(){var e=n.body;return e||(e=i(T?"svg":"body"),e.fake=!0),e}function u(e,t,r,o){var s,a,u,f,d="modernizr",c=i("div"),p=l();if(parseInt(r,10))for(;r--;)u=i("div"),u.id=o?o[r]:d+(r+1),c.appendChild(u);return s=i("style"),s.type="text/css",s.id="s"+d,(p.fake?p:c).appendChild(s),p.appendChild(c),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=w.style.overflow,w.style.overflow="hidden",w.appendChild(p)),a=t(c,e),p.fake?(p.parentNode.removeChild(p),w.style.overflow=f,w.offsetHeight):c.parentNode.removeChild(c),!!a}function f(e,n){return!!~(""+e).indexOf(n)}function d(e,n){return function(){return e.apply(n,arguments)}}function c(e,n,t){var o;for(var s in e)if(e[s]in n)return t===!1?e[s]:(o=n[e[s]],r(o,"function")?d(o,t||n):o);return!1}function p(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function m(n,t,r){var o;if("getComputedStyle"in e){o=getComputedStyle.call(e,n,t);var s=e.console;if(null!==o)r&&(o=o.getPropertyValue(r));else if(s){var i=s.error?"error":"log";s[i].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else o=!t&&n.currentStyle&&n.currentStyle[r];return o}function v(n,r){var o=n.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(p(n[o]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];o--;)s.push("("+p(n[o])+":"+r+")");return s=s.join(" or "),u("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==m(e,null,"position")})}return t}function g(e,n,o,s){function l(){d&&(delete L.style,delete L.modElem)}if(s=r(s,"undefined")?!1:s,!r(o,"undefined")){var u=v(e,o);if(!r(u,"undefined"))return u}for(var d,c,p,m,g,h=["modernizr","tspan","samp"];!L.style&&h.length;)d=!0,L.modElem=i(h.shift()),L.style=L.modElem.style;for(p=e.length,c=0;p>c;c++)if(m=e[c],g=L.style[m],f(m,"-")&&(m=a(m)),L.style[m]!==t){if(s||r(o,"undefined"))return l(),"pfx"==n?m:!0;try{L.style[m]=o}catch(y){}if(L.style[m]!=g)return l(),"pfx"==n?m:!0}return l(),!1}function h(e,n,t,o,s){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+N.join(i+" ")+i).split(" ");return r(n,"string")||r(n,"undefined")?g(a,n,o,s):(a=(e+" "+k.join(i+" ")+i).split(" "),c(a,n,t))}function y(e,n,r){return h(e,t,t,n,r)}var C=[],S=[],x={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){S.push({name:e,fn:n,options:t})},addAsyncTest:function(e){S.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=x,Modernizr=new Modernizr;var _=x._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];x._prefixes=_;var w=n.documentElement,T="svg"===w.nodeName.toLowerCase(),b="CSS"in e&&"supports"in e.CSS,z="supportsCSS"in e;Modernizr.addTest("supports",b||z),Modernizr.addTest("placeholder","placeholder"in i("input")&&"placeholder"in i("textarea"));var P=x.testStyles=u;Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var r=["@media (",_.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");P(r,function(e){t=9===e.offsetTop})}return t});var E="Moz O ms Webkit",N=x._config.usePrefixes?E.split(" "):[];x._cssomPrefixes=N;var j=function(n){var r,o=_.length,s=e.CSSRule;if("undefined"==typeof s)return t;if(!n)return!1;if(n=n.replace(/^@/,""),r=n.replace(/-/g,"_").toUpperCase()+"_RULE",r in s)return"@"+n;for(var i=0;o>i;i++){var a=_[i],l=a.toUpperCase()+"_"+r;if(l in s)return"@-"+a.toLowerCase()+"-"+n}return!1};x.atRule=j;var k=x._config.usePrefixes?E.toLowerCase().split(" "):[];x._domPrefixes=k;var A={elem:i("modernizr")};Modernizr._q.push(function(){delete A.elem});var L={style:A.elem.style};Modernizr._q.unshift(function(){delete L.style}),x.testAllProps=h,x.testAllProps=y,Modernizr.addTest("cssanimations",y("animationName","a",!0)),Modernizr.addTest("cssgridlegacy",y("grid-columns","10px",!0)),Modernizr.addTest("cssgrid",y("grid-template-rows","none",!0)),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&y("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){return!!y("perspective","1px",!0)}),Modernizr.addTest("csstransitions",y("transition","all",!0));var O=x.prefixed=function(e,n,t){return 0===e.indexOf("@")?j(e):(-1!=e.indexOf("-")&&(e=a(e)),n?h(e,n,t):h(e,"pfx"))};Modernizr.addTest("backgroundblendmode",O("backgroundBlendMode","text")),o(),s(C),delete x.addTest,delete x.addAsyncTest;for(var R=0;R<Modernizr._q.length;R++)Modernizr._q[R]();e.Modernizr=Modernizr}(window,document);
(function($,namespace){function animations(){function LoadingScreen(options){var defaults={message:translations.pleaseWait,timedClose:false,classLoader:"loader-desktop"},settings=$.extend(defaults,options),loadingId="loading-screen";function addLoadingHTML(){if($("#"+loadingId).length){removeLoadingHTML()}$("body").append(""+'<div id="'+loadingId+'" class="'+settings.classLoader+'">'+"<span>"+settings.message+"</span>"+"</div>")}function removeLoadingHTML(){if($("#"+loadingId)){$("#"+loadingId).remove()}}function showLoadingScreen(callback){addLoadingHTML();callback&&callback();if(settings.timedClose){setTimeout(hideLoadingScreen,settings.timedClose)}}function hideLoadingScreen(callback){removeLoadingHTML();callback&&callback()}return{show:showLoadingScreen,hide:hideLoadingScreen}}function LoadingElement(){var classLoading="loader";function showLoader(element){$(element).addClass(classLoading)}function hideLoader(element){$(element).removeClass(classLoading)}return{start:showLoader,stop:hideLoader}}function ViewMore(){var $btn=$(".view-more__btn");var classLoading="view-more__btn--loading";function addAnimation(context){if(context){$(context).find($btn).addClass(classLoading)}else{$btn.addClass(classLoading)}}function removeAnimation(context){if(context){$(context).find($btn).removeClass(classLoading)}else{$btn.removeClass(classLoading)}}return{start:addAnimation,stop:removeAnimation}}return{loadingScreen:new LoadingScreen,LoadingScreenExtend:LoadingScreen,loadingElement:new LoadingElement,viewMore:new ViewMore}}namespace.ExtendAnimations=animations})(window.jQuery,window.axs||{});
var axs=window.axs||{};axs.Articles=function(){var newArticleLoader;var deactivateUrlChange=false;var triggerAnalytics=false;var recommendedEventIds={};var focusedArticleId;var stickyEleClass="axs--sticky-element";var customEvents={newArticleLoaded:"axs_newArticleLoaded"};var addRecommendedEventId=function(route,eventId){if(!(route in recommendedEventIds)){recommendedEventIds[route]=[]}if(recommendedEventIds[route].indexOf(eventId)==-1){recommendedEventIds[route].push(eventId)}};var getRecommendedEventIds=function(route){if(route in recommendedEventIds){return recommendedEventIds[route]}else{return false}};var getSrcSetFromImages=function(images,mediaTypeIds){if(!images){return false}if(mediaTypeIds==undefined){mediaTypeIds=["1","2","17"]}var srcset=[];var default_image_regex="/images/defaults/";for(var i=0;i<mediaTypeIds.length;i++){key=mediaTypeIds[i];if(key in images){image=images[key];if(!image.file_name.match(default_image_regex)){srcset.push(image.file_name+" "+image.width+"w")}}}return srcset.join(", ")};var initRelatedEvents=function(){var template='{{#each events}}         <li class="teaser teaser--event">             <a class="teaser__thumb" href="{{ ticketing.eventUrl }}" style="background-image: url(\'{{ relatedMedia.2.file_name }}\')"><img src="{{ relatedMedia.2.file_name }}" alt=""/></a>             <div class="teaser__body">                <h4 class="teaser__title">                    <a href="{{ ticketing.eventUrl }}">{{ title.eventTitleText }}</a>                </h4>                <div class="venue-name"><a href="{{ venue.url }}">{{ venue.title }}</a></div>                 <div>{{ venue.city }},                     {{#if venue.state}}                         {{venue.state}}                     {{else}}                         {{venue.country}}                     {{/if}}                 </div>                 <div>                {{#if multipleDates }}                    <div class="related-event-starting">Starting</div>                {{/if}}                    <div>{{#equal ./eventDateTime "TBD" }}&nbsp;{{else}}{{{formatDate ./eventDateTime "MMM" }}}{{/equal}} {{{formatDate ./eventDateTime "DD"}}} {{#equal ./eventDateTime "TBD" }}&nbsp;{{else}}{{{formatDate ./eventDateTime "ddd"}}}{{/equal}}</div>                </div>            </div>        </li>         {{/each}}';axs.Global.getRelatedEvents($("#related-events .teasers"),template,{rows:6,siteId:siteId,excludedEventIds:[],performerId:performerIds.length>0?performerIds[0]:null,eventId:eventIds.length>0?eventIds[0]:null,dateFormat:dateTimeFormatRelatedEventsMoreDates,dateFormatShort:dateFormatShortRelatedEventsMoreDates,tbdText:translations.tbd})};var displayRelatedEvents=function(){var dateFormat=dateTimeFormatArticleRelatedEventFull;var $promotedEventContainer=$("#in-line-related-event-container");var $promotedEvent=$("#in-line-related-event");if(eventIds[0]){$.ajax({type:"GET",async:true,url:Routing.generate("api_proxy_get_event")+"?siteId="+siteId+"&eventId="+eventIds[0],dataType:"json",timeout:3e4,success:function(data){if(data&&data.events&&data.events.length>0){var $eventData=data.events[0];var relatedEventData={};relatedEventData.articleRelatedEventUrl=$eventData.ticketing.eventUrl;relatedEventData.articleRelatedEventImage=$eventData.relatedMedia[2].file_name;relatedEventData.imgSrcSet=getSrcSetFromImages($eventData.relatedMedia);relatedEventData.articleRelatedEventTitle=$eventData.title.eventTitleText;relatedEventData.articleRelatedEventVenueName=$eventData.venue.title;relatedEventData.articleRelatedEventVenueUrl=$eventData.venue.url;relatedEventData.articleRelatedEventVenueLocation=$eventData.venue.city;if($eventData.venue.country==="United States")relatedEventData.articleRelatedEventVenueLocation+=", "+$eventData.venue.state;else relatedEventData.articleRelatedEventVenueLocation+=", "+$eventData.venue.country;if(moment($eventData.eventDateTime).isValid()){moment.lang(locale.substring(0,2));var eventDate=moment($eventData.eventDateTime).format(dateFormat);relatedEventData.articleRelatedEventMonth=moment($eventData.eventDateTime).format("MMM");relatedEventData.articleRelatedEventDate=moment($eventData.eventDateTime).format("D");relatedEventData.articleRelatedEventDay=moment($eventData.eventDateTime).format("ddd");var regexMatches=eventDate.match(/(mon|t(ue|ues|hu|hur)|wed|fri|s(at|un))\b/i);if(regexMatches)eventDate=eventDate.replace(regexMatches[0],regexMatches[0].toUpperCase());relatedEventData.articleRelatedEventDateFull=eventDate}else if($eventData.eventDateTime==="TBD"){relatedEventData.eventDateTbd=translations.tbd}if($eventData.additionalDates.length>0){relatedEventData.multipleDates=true}var $inlineRelatedEventDiv=$("#articleRelatedEvent").html();var $resultTemplate=Handlebars.compile($inlineRelatedEventDiv);var $html=$resultTemplate(relatedEventData);$promotedEvent.append($html);$promotedEventContainer.show()}else{$promotedEventContainer.remove()}}})}else{$promotedEventContainer.remove()}};var initRelatedArticles=function(id){$.getJSON(Routing.generate("api_proxy_articles_related",{articleId:id}),function(data){var $container=$("#related-articles");$container.addClass("loader");if(data&&data.length>0){$(data).each(function(i){baseUrl=Routing.generate("default_index_base");baseUrl=baseUrl.slice(0,baseUrl.length-1);this.url=baseUrl+this.url;if(this.defaultImage){var imgAlt=this.title;if(this.defaultImage.caption)imgAlt=this.defaultImage.caption;var altNoHTML=$("<div />").html(decodeURIComponent(imgAlt)).text();this.defaultImage.imgAlt=altNoHTML.slice(0,140)}this.className=axs.Core.getTeaserTypeClass(this)});var source=$("#related-articles-template").html();var template=Handlebars.compile(source);var html=template(data);var $itemContainer=$("#related-articles-body");$itemContainer.html(html);$container.removeClass("loader")}else{$container.hide()}})};var articleEmailShare=function(article){var sendEmailBtn=$("#email-article-btn");var sendAnotherEmailBtn=$(".send-another-email");var emailFormValues={txtSendTo:$("#txtSendTo"),txtMsg:$("#txtMsg"),txtFromName:$("#txtFromName"),shareEventCustomMsg:$("#share_event_custom_msg"),txtPersonalMessage:$("#txtPersonalMessage"),shareEmailFromError:$("#myaxs-share-event-email_from_error"),shareEmailSendToError:$("#myaxs-share-event-email_send_to_error")};sendEmailBtn.off("click");sendAnotherEmailBtn.off("click");var resetEmailForm=function(){function checkLength(str){if(str!==undefined&&str.val().length>0){str.val("");str[0].onblur()}}checkLength(emailFormValues.txtSendTo);checkLength(emailFormValues.txtMsg);checkLength(emailFormValues.txtFromName);emailFormValues.shareEventCustomMsg.html("");emailFormValues.txtPersonalMessage.html("");emailFormValues.shareEmailFromError.text("");emailFormValues.shareEmailSendToError.text("")};resetEmailForm();sendAnotherEmailBtn.on("click",function(e){resetEmailForm();$("#sharemod").data("axsModal").show()});sendEmailBtn.on("click",function(e){var personalMessage=emailFormValues.txtMsg.val();if(personalMessage==emailFormValues.txtMsg.html())personalMessage=null;var email={senderName:emailFormValues.txtFromName.val(),sendTo:emailFormValues.txtSendTo.val(),personalMsg:personalMessage,locale:locale};var data={email:email,article:article};if($("#hdn_csrf_token")[0]){data.csrf_token=$("#hdn_csrf_token").val()}e.preventDefault();var thisModal=$(this).closest(".modal");axs.animations.loadingElement.start(thisModal);var msg=$("#txtMsg").val();if(msg=="Add a personal message")msg="";var emailReg=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var error=false;emailFormValues.shareEmailFromError.text("");emailFormValues.shareEmailSendToError.text("");var fromName=$("#txtFromName").val();var sendTo=emailFormValues.txtSendTo.val();if($.trim(fromName)==""||fromName.toLowerCase()=="first name"){emailFormValues.shareEmailFromError.text(eventTranslations.emailDialog.validationMessages.name);error=true}if($.trim(sendTo)==""||sendTo.toLowerCase()=="email address"){emailFormValues.shareEmailSendToError.text(eventTranslations.emailDialog.validationMessages.email.required);error=true}else if(!emailReg.test(sendTo)){emailFormValues.shareEmailSendToError.text(eventTranslations.emailDialog.validationMessages.email.invalid);error=true}if(!error){$.ajax({type:"POST",async:false,url:Routing.generate("api_proxy_share_article_email"),data:JSON.stringify(data),dataType:"json",contentType:"application/json",success:function(data){axs.animations.loadingElement.stop(thisModal);$("#sharemod-confirm").data("axsModal").show();if(logData){logData["emailContent"]=data;axs.utilities.logData("share_article_email",logData)}},error:function(req,status,error){axs.animations.loadingElement.stop(thisModal);emailFormValues.shareEmailFromError.text("There was an error processing your request. Please try again later.")}})}else{axs.animations.loadingElement.stop(thisModal)}})};var removeSpecialChars=function(str){return str.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")};var getFriendlyURL=function(title,articleId){var url=removeSpecialChars(title).toLowerCase();if(url.charAt(url.length-1)!="-"){url+="-"}url+=articleId;return url};var changeTitleAndURL=function(title,articleId){var canChangeData=true;if(typeof title==="undefined"||title==null||title==""){canChangeData=false}if(typeof articleId==="undefined"||articleId==null||articleId==""){canChangeData=false}if(canChangeData){if(typeof isIE==="undefined"||isIE==null){isIE=false}if(typeof ltie9==="undefined"||ltie9==null){ltie9=false}if(isIE&&ltie9){window.parent.document.title=title}else{document.title=title}try{if(isIE&&ltie9){var url=window.top.location.href.replace(window.top.location.hash,"")+"#"+getFriendlyURL(title,articleId);window.top.location.href=url}else{var newUrl=$("div[data-article-id='"+articleId+"']").attr("data-article-url");if(window.location.href!==newUrl){window.history.pushState(null,"",newUrl)}}}catch(error){}if(arguments[2]){triggerAnalytics=false;triggerAnalyticsEvents()}}};var getLoaderHTML=function(){var html="";html+="<div class='preload-container'>";html+="<div class='preload-image'></div>";html+="</div>";return html};var appendLoaderHTML=function(){$("div#page-relative-block div.layout-wrapper").last().append(getLoaderHTML())};var removeLoaderHTML=function(){$("div.preload-container").remove()};var initSlideShowForArticle=function(articleId){if(typeof articleId!=="undefined"&&articleId!=null&&articleId!=""){var breakAt=960,captionLength=$(window).width()<=breakAt?10:50,displayThumbnails=true,$camera_wrap=$("div[data-article-id='"+articleId+"'] #camera_wrap"),context=$camera_wrap,$camera_caption=$("div[data-article-id='"+articleId+"'] .camera_caption"),camera,slide;if($camera_wrap.length>0){if(location.hash){slide=location.hash.match(new RegExp("slide"+"=([^&]*)"))[1]}if($.isFunction($camera_wrap.camera)){camera=$camera_wrap.camera({height:"500px",loader:"none",time:5e3,transPeriod:1,pagination:false,thumbnails:displayThumbnails,barPosition:"top",playPause:true,pauseOnClick:true,navigationHover:false,mobileNavHover:false,fx:"scrollHorz",portrait:true,autoAdvance:false,startAtSlide:slide,onStartTransition:function(){$(".expanded_caption").removeClass("is-active")},onEndTransition:function(){var currentSlide=$camera_wrap.find(".camera_target .cameraSlide.cameracurrent").index();$camera_wrap.find(".cameracurrent #current-slide").html(currentSlide+1);window.location.hash="slide="+(currentSlide+1)}})}var $thumbnails=$(".camera_thumbs li");$thumbnails.each(function(){$(this).find("img").wrap('<div class="thumb-wrapper"></div>')});$thumbnails.click(function(obj){var $this=$(this)});$(".camera_target_content, .camera_thumbs_cont").mouseup(function(){$(".camera_src").addClass("paused");$(".camera_stop").hide();$(".camera_play").show();$("#camera_wrap_2").cameraPause()});$camera_wrap.find(".full-caption").each(function(){var $element=$(this),caption=$element.text(),resizedCaption=caption.substring(0,captionLength);$element.closest(".camera_caption").find(".truncated-caption").html(resizedCaption)});$camera_caption.find(".read-more").click(function(){var $caption=$(this).parents(".camera_caption");$caption.addClass("is-active")});$camera_caption.find(".read-less").click(function(){var $caption=$(this).parents(".camera_caption");$caption.removeClass("is-active")});$(".camera_social_sharing").on("click","a",function(e){e.preventDefault();var type="";if($(this).hasClass("btn-share-fb")){type="facebook"}else if($(this).hasClass("btn-share-twitter")){type="twitter"}if(logData&&type){axs.Global.utilities.logData("share_article_"+type,logData)}})}}};var initVideoArticle=function(articleId){if(typeof articleId!=="undefined"&&articleId!=null&&articleId!=""){$("div[data-article-id='"+articleId+"'] #videoImage").parent().on("click",function(){$(this).hide();var $videoFrame=$("div[data-article-id='"+articleId+"'] #videoFrame_"+articleId);$videoFrame.show();var embedCode=window["video_embed_"+articleId];switch($(embedCode).data("provider")){case"5min":$videoFrame.addClass("video-provider-5min");$("#companion-ad-container").addClass("is-active");$.getScript("http://pshared.5min.com/Scripts/PlayerSeed.js",function(data,textStatus,jqxhr){var containerWidth=$("div[data-article-id='"+articleId+"'] #videoFrame_"+articleId).width(),player=new PlayerSeed("videoFrame_"+articleId);player.autoStart=true;player.cbCustomID="companion-ad-container";player.cbLocation="Custom";player.height=containerWidth/1.7778;player.isAP=1;player.isFL=1;player.onPrerollEnded="hide5MinAdContainer";player.relatedMode=false;player.shuffle=0;player.sid=1304;player.width=containerWidth;player[$(embedCode).data("param-name")]=$(embedCode).data("id");player.Load()});break;case"grabnetworks":$("#companion-ad-container").addClass("is-active");var grabDiv=document.createElement("div");grabDiv.id="grabDiv"+$(embedCode).data("id");$("div[data-article-id='"+articleId+"'] #videoFrame_"+articleId).append(grabDiv);var script=document.createElement("script");script.src=$(embedCode).data("url");script.type="text/javascript";document.body.appendChild(script);break;default:if(embedCode.match(/src\ *=/)&&!embedCode.match(/src *=\ *.*autoplay/)){embedCode=embedCode.replace(/src=\"([^\"]*?)\"/,'src="$1&autoplay=1"')}$videoFrame.html(embedCode);$videoFrame.addClass("video-provider-youtube");break}})}};var getRelatedEventsForArticle=function(articleId,performerIds,eventIds,dateTimeFormatRelatedEventsMoreDates,dateFormatShortRelatedEventsMoreDates){var template='{{#each events}}         <li class="teaser">             <div class="teaser__thumb-block">                <a class="thumb" href="{{ ticketing.eventUrl }}" style="background-image: url(\'{{ relatedMedia.2.file_name }}\')"><img src="{{ relatedMedia.2.file_name }}" alt=""/></a>                 <div class="teaser__body">                    <h4 class="teaser__title">                        <a href="{{ ticketing.eventUrl }}">{{ title.eventTitleText }}</a>                    </h4>                    <div class="venue-name"><a href="{{ venue.url }}">{{ venue.title }}</a></div>                     <div>{{ venue.city }},                         {{#if venue.state}}                             {{venue.state}}                         {{else}}                             {{venue.country}}                         {{/if}}                     </div>                     <div>                    {{#if multipleDates }}                        <div class="related-event-starting">Starting</div>                    {{/if}}                        <div>{{#equal ./eventDateTime "TBD" }}&nbsp;{{else}}{{{formatDate ./eventDateTime "MMM" }}}{{/equal}} {{{formatDate ./eventDateTime "DD"}}} {{#equal ./eventDateTime "TBD" }}&nbsp;{{else}}{{{formatDate ./eventDateTime "ddd"}}}{{/equal}}</div>                    </div>                </div>            </div>        </li>         {{/each}}';var container=$("div.another-article[data-article-id='"+articleId+"'] #related-events");axs.Global.getRelatedEvents(container,template,{rows:6,siteId:siteId,excludedEventIds:[],performerId:performerIds.length>0?performerIds[0]:null,eventId:eventIds.length>0?eventIds[0]:null,dateFormat:dateTimeFormatRelatedEventsMoreDates,dateFormatShort:dateFormatShortRelatedEventsMoreDates,tbdText:translations.tbd})};var articleIsOnNewsLevel=function(articleURL){var isOnNewsLevel=false;if(typeof articleURL!=="undefined"&&articleURL!=null&&articleURL!=""){var urlParts=articleURL.split("/");if(urlParts.indexOf("news")>-1){isOnNewsLevel=true}}return isOnNewsLevel};var _inf_scr_pag_ind=0;var _loadingNextArticle=false;var getNextRelatedArticle=function(articleId){if(_loadingNextArticle){return}appendLoaderHTML();_inf_scr_pag_ind++;var serviceURL=Routing.generate("articles_get_iterated_articles",{articleId:articleId,pageNum:_inf_scr_pag_ind});_loadingNextArticle=true;$.getJSON(serviceURL,function(data){if(data){var relatedArticleId=data.relatedArticleId;var isNewsworthy=data.isNewsworthy;var templateHTML=data.templateHTML;removeLoaderHTML();$("div#page-relative-block div.layout-wrapper").last().after(templateHTML);if(typeof relatedArticleId!=="undefined"&&relatedArticleId!=null&&relatedArticleId!=""){try{if($("div[data-article-id='"+relatedArticleId+"'] #camera_wrap").length>0){initSlideShowForArticle(relatedArticleId)}if($("div[data-article-id='"+relatedArticleId+"'] #article-video-container").length>0){initVideoArticle(relatedArticleId)}$("div.another-article[data-article-id='"+relatedArticleId+"']").fadeIn();var selector_facebook="div[data-article-id='"+relatedArticleId+"'] .share-facebook";$(selector_facebook).on("click",function(e){e.preventDefault();var data=$(this).data("social");var type=$(this).data("type");axs.Facebook.shareDialog(data["url"]);if(typeof logData!="undefined"){axs.Global.utilities.logData("share_"+type+"_facebook",logData)}});var selector_twitter="div[data-article-id='"+relatedArticleId+"'] .share-twitter";$(selector_twitter).on("click",function(e){e.preventDefault();var data=$(this).data("social");var type=$(this).data("type");window.open(data.url,"twitter","toolbar=no,location=no,directories=no,width=415,height=480,top=100");if(typeof logData!="undefined"){axs.Global.utilities.logData("share_"+type+"_twitter",logData)}});shareEmailModalInit(relatedArticleId);if(typeof isNewsworthy!=="undefined"&&isNewsworthy!=null){if(isNewsworthy=="1"){$("div[data-article-id='"+relatedArticleId+"']").attr("data-article-news","1")}else if(isNewsworthy=="0"){$("div[data-article-id='"+relatedArticleId+"']").attr("data-article-news","0")}}_loadingNextArticle=false;$("."+stickyEleClass).trigger(customEvents.newArticleLoaded,[{newArticleId:relatedArticleId}])}catch(exception){console.log(exception);removeLoaderHTML()}}else{$("div.no-more-articles").fadeIn()}}}).error(function(){console.log("error");removeLoaderHTML()})};function getLastArticle(){return $("#page-relative-block .article--full").last()}function LoaderElement(options){var defaults={loadingText:false,extraClasses:false,type:"stretch"};var settings=$.extend(defaults,options),$loader=$(createHTML());function addLoader(context){$(context).append($loader)}function removeLoader(){$loader.remove()}function createHTML(){var html;if(Modernizr&&Modernizr.cssanimations){html='<div class="loader-element loader-element--'+settings.type+' _extraclassesplaceholder_" _loadingtextplaceholder_>'+'<div class="loader-element__item"></div>'+'<div class="loader-element__item"></div>'+'<div class="loader-element__item"></div>'+'<div class="loader-element__item"></div>'+'<div class="loader-element__item"></div>'+"</div>";html=settings.loadingText?html.replace("_loadingtextplaceholder_","loading-text="+settings.loadingText):html.replace(" _loadingtextplaceholder_","");html=settings.extraClasses?html.replace("_extraclassesplaceholder_",settings.extraClasses):html.replace(" _extraclassesplaceholder_","")}else{html='<div class="loader"/>'}return html}return{add:addLoader,remove:removeLoader}}function shareEmailModalInit(articleId){var selector_email="div[data-article-id='"+articleId+"'] .share-mail";var modalContainer=$("#sharemod").css("position","fixed");$(selector_email).on("click",function(){var article=$("[data-article-id="+articleId+"]");var contributorName=article.find("[itemprop='author']").html();var dateCreated=article.find("[itemprop='dateCreated']").html();var articleTitle=article.find(".page-title").html();var imgUrl=article.find("[itemprop='image']").attr("src")||article.find("#videoImage").attr("src");var articleObj={title:articleTitle,author:contributorName,authorTitle:"",url:article.attr("data-article-url"),image:imgUrl};return function(e){e.preventDefault();articleEmailShare(articleObj);modalContainer.find(".modal .heading").html(articleTitle);modalContainer.find(".modal .contributor-name").html(contributorName);modalContainer.find(".modal .date").html(dateCreated);var imgContainer=modalContainer.find(".modal #share_event_img_div");if(imgUrl){imgContainer.css("background-image","url("+imgUrl+")");imgContainer.show()}else{imgContainer.hide()}$("#sharemod").data("axsModal").show()}}())}function triggerAnalyticsEvents(){(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date;a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-48306850-1","axs.com");ga("send","pageview");var NREUM=NREUM||undefined;if(NREUM&&NREUM.inlineHit){NREUM.inlineHit()}}function setOmnitureData(article){var data={articleID:article["articleID"],contentArticleTitle:article["title"],contentAuthor:article["author"],publishDate:article["publishedDate"],tagsList:$.unique(article["tags"]).join("|"),examinerTitle:"AXS Contributor",externalContributorID:article["externalContributorID"],examinerArticleType:article["type"]};axs.OmnitureData.setArticleDetails(data)}return{_stickyEleInit:function(options){if(!options.element)return false;var $stickyEle=$(options.element);var topMargin=options.margin||140;var $footer=$("#global-footer");var adState=0;if(options.newArticleLoaded){$stickyEle.on(customEvents.newArticleLoaded,function(event,data){options.newArticleLoaded(event,data)})}$(window).scroll(function(){if(!$stickyEle.hasClass("refreshing")){if($(window).innerWidth()>=960&&$(window).scrollTop()>$stickyEle.parent().offset().top+$stickyEle.height()&&$(window).scrollTop()+$stickyEle.height()+topMargin<$footer.offset().top){if(adState==0){adState=1;$stickyEle.css("position","fixed");$stickyEle.css("top",topMargin+"px");$stickyEle.css("z-index",99999)}}else{if(adState==1){adState=0;$stickyEle.removeAttr("style")}}}});$stickyEle.addClass(stickyEleClass)},_stickyNavInit:function(){var $stickyNav=$("#sticky-info-nav");$(window).scroll(function(){var $featuredEventContainer=$("#in-line-related-event-container");var offsetTop=$featuredEventContainer.offset().top;if($(window).scrollTop()>offsetTop+$featuredEventContainer.height()){$stickyNav.removeClass("is-hidden")}else{$stickyNav.addClass("is-hidden")}})},initialize:function(article,use_infinite_scroll){if(use_infinite_scroll===undefined){use_infinite_scroll=true}focusedArticleId=article["articleID"];setOmnitureData(article);newArticleLoader=new LoaderElement({extraClasses:"new-article-loader"});var lastScrollPosition=0;var previousArticle={};if(use_infinite_scroll){$(window).scroll(function(){var numberOfVisibleElements=0;var Articles=$("div.layout-wrapper[data-article-id]");Articles.each(function(){var currentObjIsVisible=$(this).visible(true);if(currentObjIsVisible){numberOfVisibleElements++}});if(numberOfVisibleElements===1){Articles.each(function(){var currentObjIsVisible=$(this).visible(true);if(currentObjIsVisible){var articleTitle=$(this).find("h1#article_title").text();var currentArticleId=$(this).attr("data-article-id");if(focusedArticleId!=currentArticleId){var $newArticleDetails=$("#"+currentArticleId+"_article_details");if($newArticleDetails.length>0){setOmnitureData(JSON.parse($newArticleDetails.html()))}focusedArticleId=currentArticleId}changeTitleAndURL(articleTitle,currentArticleId)}})}else{Articles.each(function(){function setPreviousArticle(){var articleTitle=elem.find("h1#article_title").text();var currentArticleId=elem.attr("data-article-id");previousArticle={title:articleTitle,id:currentArticleId}}var currentObjIsVisible=$(this).visible(true);if(currentObjIsVisible){var elem=$(this);var offset=elem.offset();var currentScrollPosition=$(window).scrollTop();var posY=offset.top-currentScrollPosition;posY=posY>=0?posY:Math.abs(posY);if(!deactivateUrlChange){if(posY<$(window).height()/2){setPreviousArticle();prevArticleId=previousArticle.id;if(focusedArticleId!=prevArticleId){$newArticleDetails=$("#"+prevArticleId+"_article_details");if($newArticleDetails.length>0){setOmnitureData(JSON.parse($newArticleDetails.html()))}focusedArticleId=prevArticleId}changeTitleAndURL(previousArticle.title,prevArticleId,triggerAnalytics)}else if(currentScrollPosition<lastScrollPosition){prevArticleId=previousArticle.id;changeTitleAndURL(previousArticle.title,prevArticleId);if(focusedArticleId!=prevArticleId){$newArticleDetails=$("#"+prevArticleId+"_article_details");if($newArticleDetails.length>0){setOmnitureData(JSON.parse($newArticleDetails.html()))}focusedArticleId=prevArticleId}setPreviousArticle()}}setTimeout(function(){deactivateUrlChange=false},300);lastScrollPosition=$(window).scrollTop()}})}if(!_loadingNextArticle){var st=$(window).scrollTop();var wh=$(window).height();var dh=$(document).height();var par1=st+wh;var par2=dh;var delta=Math.round((par2-par1)/2);var deltaExpected=Math.round(wh/2);if(delta<=deltaExpected){var articleId=$("#article-id").html();triggerAnalytics=true;getNextRelatedArticle(articleId)}}})}addEventListener("popstate",function(event){deactivateUrlChange=true},false);var articleId=$("#article-id").html();if(articleIsOnNewsLevel(window.location.pathname)){$("div[data-article-id='"+articleId+"']").attr("data-article-news","1")}else{$("div[data-article-id='"+articleId+"']").attr("data-article-news","0")}displayRelatedEvents();shareEmailModalInit(articleId);articleEmailShare(article);$("div[data-article-id='"+articleId+"'] #videoImage").parent().on("click",function(){$(this).hide();var $videoFrame=$("div[data-article-id='"+articleId+"'] #videoFrame_"+articleId);$videoFrame.show();var embedCode=window["video_embed_"+articleId];switch($(embedCode).data("provider")){case"5min":$videoFrame.addClass("video-provider-5min");$("#companion-ad-container").addClass("is-active");$.getScript("http://pshared.5min.com/Scripts/PlayerSeed.js",function(data,textStatus,jqxhr){var containerWidth=$("div[data-article-id='"+articleId+"'] #videoFrame_"+articleId).width(),player=new PlayerSeed("videoFrame_"+articleId);player.autoStart=true;player.cbCustomID="companion-ad-container";player.cbLocation="Custom";player.height=containerWidth/1.7778;player.isAP=1;player.isFL=1;player.onPrerollEnded="hide5MinAdContainer";player.relatedMode=false;player.shuffle=0;player.sid=1304;player.width=containerWidth;player[$(embedCode).data("param-name")]=$(embedCode).data("id");player.Load()});break;case"grabnetworks":$("#companion-ad-container").addClass("is-active");var grabDiv=document.createElement("div");grabDiv.id="grabDiv"+$(embedCode).data("id");document.getElementById("videoFrame_"+articleId).appendChild(grabDiv);var script=document.createElement("script");script.src=$(embedCode).data("url");script.type="text/javascript";document.body.appendChild(script);break;default:if(embedCode.match(/src\ *=/)&&!embedCode.match(/src *=\ *.*autoplay/)){embedCode=embedCode.replace(/src=\"([^\"]*?)\"/,'src="$1&autoplay=1"')}$videoFrame.html(embedCode);$videoFrame.addClass("video-provider-youtube");break}});var breakAt=960,captionLength=$(window).width()<=breakAt?10:50,displayThumbnails=true,$camera_wrap=$("#camera_wrap"),context=$camera_wrap,$camera_caption=$(".camera_caption"),camera,slide;if($camera_wrap.length>0){if(location.hash){slide=location.hash.match(new RegExp("slide"+"=([^&]*)"))[1]}camera=$camera_wrap.camera({height:"500px",loader:"none",time:5e3,transPeriod:1,pagination:false,thumbnails:displayThumbnails,barPosition:"top",playPause:true,pauseOnClick:true,navigationHover:false,mobileNavHover:false,fx:"scrollHorz",portrait:true,autoAdvance:false,startAtSlide:slide,onStartTransition:function(){$(".expanded_caption").removeClass("is-active")},onEndTransition:function(){var currentSlide=$(".camera_target .cameraSlide.cameracurrent").index();$(".cameracurrent #current-slide").html(currentSlide+1);window.location.hash="slide="+(currentSlide+1)}});var $thumbnails=$(".camera_thumbs li");$thumbnails.each(function(){$(this).find("img").wrap('<div class="thumb-wrapper"></div>')});$thumbnails.click(function(obj){var $this=$(this)});$(".camera_target_content, .camera_thumbs_cont").mouseup(function(){$(".camera_src").addClass("paused");$(".camera_stop").hide();$(".camera_play").show();$("#camera_wrap_2").cameraPause()});$camera_wrap.find(".full-caption").each(function(){var $element=$(this),caption=$element.text(),resizedCaption=caption.substring(0,captionLength);$element.closest(".camera_caption").find(".truncated-caption").html(resizedCaption)});$camera_caption.find(".read-more").click(function(){var $caption=$(this).parents(".camera_caption");$caption.addClass("is-active")});$camera_caption.find(".read-less").click(function(){var $caption=$(this).parents(".camera_caption");$caption.removeClass("is-active")});$(".camera_social_sharing").on("click","a",function(e){e.preventDefault();var type="";if($(this).hasClass("btn-share-fb")){type="facebook"}else if($(this).hasClass("btn-share-twitter")){type="twitter"}if(logData&&type){axs.Global.utilities.logData("share_article_"+type,logData)}})}var $promotedEvent=$("#in-line-related-event-container");var movePromotedEvent=function(isTabletView){var $copy=$("#article-copy");var $paragraph=$copy.find("p:eq(2)").length?$copy.find("p:eq(2)"):$copy.children().last();var $sidebar=$(".layout-column--secondary");if(isTabletView){$promotedEvent.insertAfter($paragraph)}else{$promotedEvent.prependTo($sidebar)}};var rearrangeShareEmailContent=function(isMobileView){var $media=$("#email-article-media");var $modalContent=$media.closest(".modal__body");if(isMobileView){$media.appendTo($modalContent)}else{$media.prependTo($modalContent)}};$("a","#article-copy").setLinkTarget();var breakpointCommands={"mobile-view":function(){movePromotedEvent(true);rearrangeShareEmailContent(true)},"tablet-view":function(){movePromotedEvent(true);rearrangeShareEmailContent(false)},"desktop-view":function(){movePromotedEvent(false)}};axs.pubsub.subscribe("articlespage","media.breakpoint",function(e,data){var command=breakpointCommands[data.breakpoint];command&&command()});axs.Core.publishMediaBreakpoint()},getNextRelatedArticle:function(articleId){getNextRelatedArticle(articleId)},getRelatedEventsForArticle:function(articleId,performerIds,eventIds,dateTimeFormatRelatedEventsMoreDates,dateFormatShortRelatedEventsMoreDates){getRelatedEventsForArticle(articleId,performerIds,eventIds,dateTimeFormatRelatedEventsMoreDates,dateFormatShortRelatedEventsMoreDates)},getSrcSetFromImages:getSrcSetFromImages,addRecommendedEventId:addRecommendedEventId,getRecommendedEventIds:getRecommendedEventIds}}();if(typeof hide5MinAdContainer=="undefined"){var hide5MinAdContainer=function(){document.getElementById("companion-ad-container").style.display="none"}}if(!window.video_embed){$("#companion-ad-container").remove()}
var axs=window.axs||{};axs.auth=function(){function detectLoginSignupPopup(){var query=window.location.search.substring(1);if(query.indexOf("signin")>-1||query.indexOf("signup")>-1){$(".myaxs-login-trigger").trigger("click")}}function initialize(){}return{initialize:initialize,detectLoginSignupPopup:detectLoginSignupPopup}}();
(function($,window,document,undefined){$.fn.axsCarousel=function(options){return this.each(function(){if(!$(this).data("axsCarousel")){$(this).data("axsCarousel",new AXSCarousel(this,options))}})};function AXSCarousel(element,options){var $carousel=$(element);if(!$carousel.length||!$carousel.children().length){return false}var defaults={showNav:true,generateHTML:true,updateItemsParent:false,forceItemNum:false,forceItemNumMap:false,moveBy:1,mobile:550,imageDriven:false,mouseDrag:false,touchDrag:true,autoplay:true,autoplaySpeed:8e3,autoplayTimeout:2e3,autoplayHoverPause:true,loop:true,viewportClass:"axs-carousel__viewport",stageClass:"axs-carousel__stage",navClass:"axs-carousel__nav",prevBtnClass:"axs-carousel__prev-btn",nextBtnClass:"axs-carousel__next-btn",itemsClass:"axs-carousel__item",activeClass:"axs-carousel__item--active",nextToActiveClass:"axs-carousel__item--next-active",prevToActiveClass:"axs-carousel__item--prev-active",loadedClass:"axs-carousel--loaded",pauseAnimationClass:"axs-carousel--pause-animation",mobileViewClass:"axs-carousel--mobile-view",touchClass:"axs-carousel--touch"};var settings=$.extend({},defaults,options);var $window=$(window),$document=$(document),$html=$("html"),dragEvents="",carouselReadyQueue={added:[],removed:[]},carouselReady,stage={offset:0,margin:0},drag={start:{},distance:{},target:false},forceItemNum={timeout:false,width:false,num:false},autoplay={timeout:false,paused:false,initialized:false},items={$original:false,$current:false,$active:false,$nextActive:false,$nextToActive:false,$prevToActive:false},$stage,$viewport,$nav,$nextBtn,$prevBtn,mobileViewActive;function isTouchSupport(){return"ontouchstart"in window&&!window.navigator.msPointerEnabled}function isTouchSupportIE(){return window.navigator.msPointerEnabled}function getEventObject(event){return event.originalEvent||event||window.event}function getTouches(event){if(event.touches!==undefined){return{x:event.touches[0].pageX,y:event.touches[0].pageY}}if(event.touches===undefined){if(event.pageX!==undefined){return{x:event.pageX,y:event.pageY}}if(event.pageX===undefined){return{x:event.clientX,y:event.clientY}}}}function onDragStart(event){$carousel.trigger("carousel.drag.start");var ev=getEventObject(event);drag.target=ev.target;drag.start.x=getTouches(ev).x;drag.start.y=getTouches(ev).y;$carousel.addClass(settings.pauseAnimationClass);pauseAutoplay();updateCurrentItems();$document.on(dragEvents,$.proxy(function(ev){touchEventRouter(ev)},this))}function onDragMove(event){var ev=getEventObject(event),tempMove=stage.offset+drag.distance.x;drag.distance.x=getTouches(ev).x-drag.start.x;updateStagePosition(tempMove)}function onDragEnd(){var dragThreshold=20;if(drag.target&&$(drag.target).length&&Math.abs(drag.distance.x)>5){suppressClick(drag.target)}if(drag.distance.x<-dragThreshold){moveNext()}else if(drag.distance.x>dragThreshold){movePrev()}else if(Math.abs(drag.distance.x)>0){updateStagePosition(stage.offset)}resetDragProps();$carousel.removeClass(settings.pauseAnimationClass);$document.off(dragEvents);$carousel.trigger("carousel.drag.end")}function resetDragProps(){drag.start.x=0;drag.distance.x=0;drag.target=false}function touchEventRouter(event){var type=event.type;if(type==="mousedown"||type==="touchstart"||type==="pointerdown"){onDragStart(event)}else if(type==="mousemove"||type==="touchmove"||type==="pointermove"){onDragMove(event)}else if(type==="mouseup"||type==="touchend"||type==="pointerup"){onDragEnd()}else if(type==="touchcancel"){onDragEnd()}}function initEvents(){if($nextBtn){$nextBtn.on("click.next",function(e){e.preventDefault();moveNext()})}if($prevBtn){$prevBtn.on("click.prev",function(e){e.preventDefault();movePrev()})}$window.on("resize",function(){if(settings.forceItemNum){clearTimeout(forceItemNum.timeout);forceItemNum.timeout=setTimeout(function(){forceItemNumRouter()},200)}});if(settings.mouseDrag&&!isTouchSupport()){$stage.on("mousedown",$.proxy(function(event){touchEventRouter(event)},this));$stage.on("dragstart",function(){return false});$stage.get(0).onselectstart=function(){return false}}if(settings.touchDrag&&isTouchSupport()){dragEvents="mousemove.carousel mouseup.carousel touchmove.carousel touchend.carousel";$carousel.addClass(settings.touchClass);$stage.on("touchstart",$.proxy(function(event){touchEventRouter(event)},this))}if(settings.touchDrag&&isTouchSupportIE()){dragEvents="pointermove.carousel pointerup.carousel";$carousel.addClass(settings.touchClass);$stage.css({"touch-action":"none"}).on("pointerdown",$.proxy(function(event){touchEventRouter(event)},this))}}function loadImage(images,callback){var $images=$(images);var imagesProcessed=0;var imagesLen=$images.length;function isAllImages(){if(imagesProcessed===imagesLen){callback&&callback()}}function processImage(){imagesProcessed+=1;isAllImages()}$images.each(function(){var $img=$(this);var src=$img.attr("src")+"?"+(new Date).getTime();var $imgClone=$img.clone();$imgClone.attr("src",src);$img.replaceWith($imgClone);$img.on("load",function(){processImage()}).on("error",function(){$(this).remove();processImage()}).each(function(){if(this.complete)$(this).load()})})}function suppressClick(target){$(target).on("click.preventTouchClick",function(e){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}$(this).off("click.preventTouchClick")})}function preInitialize(){if(document.readyState==="complete"){loadImage($carousel.find("img"),initialize)}else{$window.on("load",function(){loadImage($carousel.find("img"),initialize)})}}function initialize(){if(settings.generateHTML){generateHTML()}if(settings.showNav){generateNav()}setElements();setItemData();if(settings.forceItemNum){forceItemNumRouter()}if(settings.imageDriven){setImageDrivenWidth()}if(settings.loop){addToReadyQueue("loop");initLoop()}if(settings.mobile&&!settings.forceItemNum){if($window.width()<=settings.mobile){addToReadyQueue("mobile");updateToMobileView()}$window.on("resize",$.debounce(200,function(){var width=$window.width();if(width<=settings.mobile){updateToMobileView()}else if(mobileViewActive&&width>settings.mobile){escapeMobileView()}}))}if(settings.autoplay){setTimeout(function(){autoplay.initialized=true;startAutoplay()},settings.autoplayTimeout);if(settings.autoplayHoverPause){$nav.add($stage).on("mouseenter",function(){pauseAutoplay()}).on("mouseleave",function(){resumeAutoplay()})}}initEvents();readyCheck()}function setElements(){items.$original=$carousel.find("."+settings.itemsClass);items.$current=items.$original;$stage=$carousel.find("."+settings.stageClass);$viewport=$carousel.find("."+settings.viewportClass)}function setItemData(){var itemPositionCount=1;items.$current.each(function(){$(this).data("item-position",itemPositionCount);itemPositionCount+=1});items.$current.first().addClass(settings.activeClass).next().addClass(settings.nextToActiveClass);items.$current.prev().addClass(settings.prevToActiveClass)}function generateNav(){$carousel.append('<div class="'+settings.navClass+'">'+'<span class="'+settings.prevBtnClass+'"><svg class="svg-icon--left"><use xlink:href="#svg-icon-left"></use></svg> </span> <span class="'+settings.nextBtnClass+'"> <svg class="svg-icon--right"><use xlink:href="#svg-icon-right"></use></svg> </span>'+"</div>");$nav=$carousel.find("."+settings.navClass);$nextBtn=$nav.find("."+settings.nextBtnClass);$prevBtn=$nav.find("."+settings.prevBtnClass)}function initLoop(){var shortList=items.$original.length<6;var numToAppend=Math.ceil(items.$original.length/2);var numToPrepend=items.$original.length-numToAppend;var $clonesToPrepend=shortList?items.$original.clone():items.$original.last().prevAll(":lt("+(numToPrepend-1)+")").andSelf().clone();var $clonesToAppend=shortList?items.$original.clone():items.$original.first().nextAll(":lt("+(numToAppend-1)+")").andSelf().clone();$clonesToAppend.add($clonesToPrepend).addClass("cloned").removeClass(settings.activeClass).removeClass(settings.nextToActiveClass).removeClass(settings.prevToActiveClass);$stage.prepend($clonesToPrepend).append($clonesToAppend);var offset=getCollectionWidth($clonesToPrepend);moveStage(offset,false,function(){removeFromReadyQueue("loop")});updateCurrentItems();updateStageWidth()}function addToReadyQueue(process){}function removeFromReadyQueue(process){}function readyCheck(){if(carouselReadyQueue.added.length===carouselReadyQueue.removed.length){carouselReady=true;$carousel.addClass(settings.loadedClass).data("is-loaded",true).trigger("carousel.ready")}}function generateHTML(){var $itemsParent=settings.updateItemsParent?$carousel.find(settings.updateItemsParent):$carousel;var $itemsToWrap=$itemsParent.children();$itemsToWrap.removeClass(settings.itemsClass);$itemsParent.wrapInner('<ul class="'+settings.stageClass+'"/>');$carousel.wrapInner('<div class="'+settings.viewportClass+'"/>');$itemsToWrap.wrap('<li class="'+settings.itemsClass+'"/>')}function setImageDrivenWidth(removeStyles){items.$current.each(function(){var $this=$(this);var $img=$($this.find("img")[0]);var imgWidth=$img.width();if($img.length&&imgWidth>0&&($img.context.naturalWidth!==undefined&&$img.context.naturalWidth>0)){if(!removeStyles){$this.css({"max-width":++imgWidth})}else{$this.css({"max-width":""})}}else{$this.addClass(settings.itemsClass+"--no-image");$this.css({"max-width":"450px"})}})}function forceItemNumRouter(){if(typeof settings.forceItemNum==="number"&&!settings.forceItemNumMap){resizeItem(settings.forceItemNum)}else if(settings.forceItemNumMap&&typeof settings.forceItemNumMap==="object"){forceItemNumMap()}}function forceItemNumMap(){var useDefault=true;var width=$window.width();for(var breakpointWidth in settings.forceItemNumMap){if(settings.forceItemNumMap.hasOwnProperty(breakpointWidth)){var val=settings.forceItemNumMap[breakpointWidth];if(width<breakpointWidth){resizeItem(val);settings.moveBy=val;useDefault=false;return}}}if(useDefault){settings.moveBy=settings.forceItemNum;resizeItem(settings.forceItemNum)}}function resizeItem(itemNum){var newItemWidth=$viewport.width()/itemNum;if(forceItemNum.width!==newItemWidth){forceItemNum.width=newItemWidth;resetPosition()}}function updateCurrentItems(){items.$current=$carousel.find("."+settings.itemsClass);items.$active=items.$current.filter("."+settings.activeClass);items.$nextToActive=items.$current.filter("."+settings.nextToActiveClass);items.$prevToActive=items.$current.filter("."+settings.prevToActiveClass)}function updateStageWidth(){$stage.width(getCollectionWidth(items.$current)*2)}function updateToMobileView(){$carousel.trigger("carousel.update-to-mobile.start");mobileViewActive=true;$carousel.addClass(settings.mobileViewClass);settings.imageDriven&&setImageDrivenWidth(true);forceItemNum.width=$viewport.width();resetPosition();removeFromReadyQueue("mobile");$carousel.trigger("carousel.update-to-mobile.complete")}function escapeMobileView(){mobileViewActive=false;$carousel.removeClass(settings.mobileViewClass);forceItemNum.width=false;settings.imageDriven&&setImageDrivenWidth();resetPosition()}function resetPosition(){pauseAutoplay();updateCurrentItems();$carousel.addClass(settings.pauseAnimationClass);var newItemWidth=forceItemNum.width?forceItemNum.width:"";stage.offset=0;stage.margin=0;items.$current.css({width:newItemWidth});var offset=getCollectionWidth(items.$active.prevAll());updateStageWidth();moveStage(offset,false,resumeAutoplay);$carousel.removeClass(settings.pauseAnimationClass)}function updateStageMargin(margin){$stage.css({"margin-left":parseFloat(margin)+"px"})}function getItemWidth(item){return $(item).outerWidth(true)}function getCollectionWidth(collection){var collectionWidth=0;$(collection).each(function(){collectionWidth+=getItemWidth(this)});return collectionWidth}function startAutoplay(){if(autoplay.initialized&&!autoplay.paused){$carousel.trigger("carousel.autoplay.start");autoplay.timeout=setTimeout(function(){moveNext();startAutoplay()},settings.autoplaySpeed)}}function pauseAutoplay(){if(!autoplay.paused){clearTimeout(autoplay.timeout);autoplay.paused=true;$carousel.trigger("carousel.autoplay.pause")}}function resumeAutoplay(){if(autoplay.paused){autoplay.paused=false;startAutoplay()}}function moveStage(distance,backward,callback){$carousel.trigger("carousel.move-stage.start");var distNumber=parseFloat(distance);var offset=!backward?-1*distNumber:distNumber;var newPosition=stage.offset+offset;stage.offset=newPosition;updateStagePosition(newPosition,callback);settings.loop&&updateStageMargin(stage.margin)}function updateStagePosition(distance,callback){if($html.hasClass("csstransforms3d")){$stage.css({transform:"translate3d("+distance+"px, 0px, 0px)"})}else{$stage.css({left:distance+"px"})}$stage.on("transitionend",function(){$carousel.trigger("carousel.move-stage.complete");callback&&callback();$stage.off("transitionend")})}function getItemsToMove(backwards){var $itemsToMove=backwards?items.$nextActive.nextUntil(items.$active).andSelf():items.$active.nextUntil(items.$nextActive).andSelf();return $itemsToMove}function setNextActive(backwards){if(!backwards){var $nextSiblings=items.$active.nextAll().andSelf();if($nextSiblings.length>settings.moveBy){items.$nextActive=$nextSiblings.filter(":eq("+settings.moveBy+")")}else if(!items.$active.is(":last-child")){items.$nextActive=items.$active.next()}else{items.$nextActive=false}}else{var $prevSiblings=items.$active.prevAll().andSelf();if($prevSiblings.length>settings.moveBy){items.$nextActive=items.$current.filter(":eq("+(items.$active.index()-settings.moveBy)+")")}else if(!items.$active.is(":first-child")){items.$nextActive=items.$active.prev()}else{items.$nextActive=false}}}function move(backwards){updateCurrentItems();setNextActive(backwards);if(items.$nextActive){removeItemClasses();setItemClasses(backwards);var $itemsToMove=getItemsToMove(backwards);var offset=getCollectionWidth($itemsToMove);if(settings.loop){if(backwards){var $toRelocate=items.$current.last().prevAll(":lt("+(settings.moveBy-1)+")").andSelf();stage.margin-=parseFloat(getCollectionWidth($toRelocate));$toRelocate.prependTo($stage)}else{var $toRelocate=items.$current.first().nextAll().andSelf().filter(":lt("+settings.moveBy+")");stage.margin+=parseFloat(getCollectionWidth($toRelocate));$toRelocate.appendTo($stage)}}moveStage(offset,backwards)}}function moveNext(){move(false)}function movePrev(){move(true)}function setItemClasses(){items.$nextActive.addClass(settings.activeClass).next().addClass(settings.nextToActiveClass);items.$nextActive.prev().addClass(settings.prevToActiveClass)}function removeItemClasses(){items.$active.removeClass(settings.activeClass);items.$nextToActive.removeClass(settings.nextToActiveClass);items.$prevToActive.removeClass(settings.prevToActiveClass)}function getInQueue(){return carouselReadyQueue}preInitialize();return{move:moveStage,next:moveNext,prev:movePrev,pauseAutoplay:pauseAutoplay,resumeAutoplay:resumeAutoplay,queue:getInQueue,reset:resetPosition}}})(window.jQuery,window,document);
var axs=window.axs||{};axs.Core=function(){var $html=$("html"),$body=$("body");var cookieConsentInit=function(){var country=$.cookie(geoTypes.Geo_Static)?$.cookie(geoTypes.Geo_Static).split(":")[0]:"";var isCookiePolicyEnabledCountry=false;if($.inArray(country,$.parseJSON(cookiePolicyDisabledCountries))===-1){$("#cookieFooter").show();isCookiePolicyEnabledCountry=true}};var nl2br=function(str,is_xhtml){var breakTag=is_xhtml||typeof is_xhtml==="undefined"?"<br "+"/>":"<br>";return(str+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+breakTag+"$2")};function setupShareViaEmail(){$(".btn-share--email").on("click",function(e){e.preventDefault();$("#sharemod").data("axsModal").show()});$("#txtMsg").keyup(function(){var txtMsgVal=$("#txtMsg").val();if(txtMsgVal==="Add a personal message:"||txtMsgVal===""){$("#share_event_predefined_msg").show();$("#share_event_custom_msg").hide()}else{var txtMsgValWithBr=nl2br(txtMsgVal);$("#share_event_predefined_msg").hide();$("#share_event_custom_msg").html(txtMsgValWithBr).show()}});$("#txtFromName").keyup(function(){var firstName=$("#txtFromName").val();var orig=$("#txtFromName").attr("orig");if(firstName===""||firstName==="First name"){firstName=orig}$("#txtShareEventName").text(firstName)});$("#sharemod .send_button").on("click",function(e){e.preventDefault();var thisModal=$(this).closest(".modal");axs.animations.loadingElement.start(thisModal);var fromName=$("#txtFromName").val();var sendTo=$("#txtSendTo").val();var eventImg=$("#share_event_img_div").html();var eventInfo=$("#share_event_info").html();var defaultMsg=$("#share_event_predefined_msg").html();var msg=$("#txtMsg").val();var sendEmailToSelf=$("#chkSendEmailToSelf").prop("checked");var headline=$("#sTxtHeadline").html();var supportingActs=$("#sTxtSupportingActs").html();var venueName=$("#sTxtVenueName").html();var eventDate=$("#sTxtEventDate").html();var eventEDPUrl=$("#sTxtEDPUrl").html();var eventImageUrl=$("#sImgEventImage").attr("src");var tourTitle=$("#sTxtTourTitle").html();var country=$.cookie(geoTypes.Geo_Static)?$.cookie(geoTypes.Geo_Static).split(":")[0]:"";var ticketUrl=$("#hid_ticketLink").val();if(msg===""||msg==="Add a personal message:"){msg=fromName+" "+eventTranslations.share.sharePredefinedMessage}var emailReg=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var error=false;$("#myaxs-share-event-email_from_error").text("");$("#myaxs-share-event-email_send_to_error").text("");if($.trim(fromName)===""||fromName.toLowerCase()==="first name"){$("#myaxs-share-event-email_from_error").text(eventTranslations.emailDialog.validationMessages.name);error=true}if($.trim(sendTo)===""||sendTo.toLowerCase()==="email address"){$("#myaxs-share-event-email_send_to_error").text(eventTranslations.emailDialog.validationMessages.email.required);error=true}else if(!emailReg.test(sendTo)){$("#myaxs-share-event-email_send_to_error").text(eventTranslations.emailDialog.validationMessages.email.invalid);error=true}if(!error){var dataStr=JSON.stringify({fromName:fromName,sendTo:sendTo,msg:encodeURIComponent(msg),sendEmailToSelf:sendEmailToSelf,eventImg:eventImg,eventInfo:encodeURIComponent(eventInfo),defaultMsg:encodeURIComponent(defaultMsg),headline:encodeURIComponent(headline),supportingActs:encodeURIComponent(supportingActs),venueName:encodeURIComponent(venueName),eventDate:eventDate,eventEDPUrl:encodeURIComponent(eventEDPUrl),eventImageUrl:eventImageUrl,tourTitle:tourTitle,country:country,ticketUrl:encodeURIComponent(ticketUrl)});$.ajax({type:"POST",async:false,url:Routing.generate("api_proxy_share_event_email")+"?locale="+locale,data:dataStr,dataType:"json",success:function(data){$("#sharemod").data("axsModal").hide();axs.animations.loadingElement.stop(thisModal);$("#share-methods-confirm").appendTo($("#share-methods-confirm").parent()).show().delay(1e4).fadeOut(1e3);var logData={};logData.event=eventData;logData.user=userData;$.post(Routing.generate("api_global_logger_post")+"?application=AXS&actionType=share_event_email",JSON.stringify(logData))},error:function(req,status,error){axs.animations.loadingElement.stop(thisModal);$("#myaxs-share-event-email_from_error").text("There was an error processing your request. Please try again later.")}})}else{axs.animations.loadingElement.stop(thisModal)}})}function setupModals(){$("#myaxs_container_login").axsModal({triggers:".myaxs-login-trigger"});$("#sharemod").axsModal();$("#sharemod-confirm").axsModal();$("#axs-newsletter-dialog").axsModal();$("#global-search").axsModal({oldModal:false,triggers:".global-search-trigger",onShow:function(){$("#global-search__form-input").focus()}});$("#location-search").axsModal({oldModal:false,triggers:".location-search-trigger",onShow:function(){$("#location-search__form-input").focus()}});$("#music-genre").axsModal({oldModal:false,triggers:".music-genre-trigger"});$("#sports-genre").axsModal({oldModal:false,triggers:".sports-genre-trigger"});$("#art-genre").axsModal({oldModal:false,triggers:".art-genre-trigger"});$("#headlines-genre").axsModal({oldModal:false,triggers:".headlines-genre-trigger"});$("#amexmod").axsModal({triggers:".btn-amex-points"})}function setupGenericModals(){$("[data-modal-id]").each(function(){var modal=String($(this).data("modalId")).replace("#","");var autoModal=$("#"+modal).axsModal({triggers:this})})}function setupTrendingTopicsTicker(){var section="#trending-topics";if($(section).length){var topicsTicker=new axs.Ticker({container:section,content:".trending-topics-banner__container--layout"});axs.pubsub.subscribe("trendingTopics","navstatus",function(e,nav){if(nav.attach){topicsTicker.reset()}else{topicsTicker.start()}});if(axs.Analytics){var pageKey=axs.Core.pageKey?axs.Core.pageKey:"pageKeyUndefined";$(section).find("a").on("click",function(){axs.Analytics.trackTrendingTopicsClick(pageKey,$(this).text().toLowerCase())})}}}function setupLanguageSelector(element){$(element).on("click.locationSelection",function(e){e.preventDefault();var _locale=$(this).data("locale");window.location.href=window.location.href=axs.utilities.getLocalizedURL(_locale)})}function getTeaserType(articleModel){var className="";if(articleModel.video!==null){className="teaser--video"}else if(articleModel.slideshow&&articleModel.slideshow.length){className="teaser--slideshow"}return className}var myaxsAuthPanel="myaxs-auth-include",currentMyaxsAuthPanel="myaxs-auth-include-current";function setupOmniture(element){$(element).each(function(){$(this).on("click.omniture",function(){var omnitureAction=$(this).attr("omAction");switch(omnitureAction){case"create_account":if(axs.Analytics){axs.Analytics.trackSignUpAnalytics()}break;case"sign_in":break;case"my_axs":break;case"log_out":break}})})}function setupAXSNewsletter(element){$(element).on("click",function(e){e.preventDefault();if($("#axs-newsletter-dialog > #user").attr("class")==="y"){axs.Global.setUserSubscription("axs",true,function(retval){if(retval){$("#axs-newsletter-dialog #not-logged-in").hide();$("#axs-newsletter-dialog #signed-up").show()}},true)}axs.Core.initAxsNewsletterPopup()})}function resolveBrowserFallbacks(){function getBrowserData(){var userAgent=navigator.userAgent.toLowerCase(),isChrome=userAgent.indexOf("chrome")>-1,isFirefox=userAgent.indexOf("firefox")>-1,isSafari=userAgent.indexOf("safari")>-1,isAdroid=userAgent.indexOf("android")>-1,isOpera=userAgent.indexOf("presto")>-1,isOldIE=userAgent.indexOf("msie")>-1;if(isChrome&&isSafari){isSafari=false}if(isChrome){$html.addClass("browser--chrome")}if(isFirefox){$html.addClass("browser--firefox")}if(isSafari){$html.addClass("browser--safari")}if(isOpera){$html.addClass("browser--opera")}if(isAdroid){$html.addClass("is-android")}if(isOldIE){$html.addClass("browser--unsupported")}}function initBrowserDetectionBanner(){if($html.hasClass("browser--unsupported")&&$.cookie("browser_detection")!=true){var updateBrowserBanner=$("#update-your-browser");updateBrowserBanner.show();updateBrowserBanner.find(".close-btn").click(function(){$.cookie("browser_detection",1,24);updateBrowserBanner.remove()})}}$("html").removeClass("no-js").addClass("js");getBrowserData();initBrowserDetectionBanner()}function initAxsEmailSignupForm(dnau){$("form#axs-email-signup-form").validate();$("form#axs-email-signup-form").on("submit",function(e){e.preventDefault();$("#axs-email-signup-form-error").text("");var fname=$("input#axs-email-signup-fname").val();if(!fname||fname==="Enter your first name"||fname==="First Name"){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.firstName.validationMessages.required);return false}var lname=$("input#axs-email-signup-lname").val();if(!lname||lname==="Enter your last name"||lname==="Last Name"){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.name.lastName.validationMessages.required);return false}var zip=$("input#axs-email-signup-zip").val();if(!zip||zip==="Enter your Zip/Postal code"){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.email.validationMessages.required);return false}var email=$("input#axs-email-signup-email").val();var email2=$("input#axs-email-signup-email2").val();if(email!==email2){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.confirmEmail.validationMessages.mismatch);return false}var country=$.cookie(geoTypes.Geo_Static)?$.cookie(geoTypes.Geo_Static).split(":")[0]:"";$.ajax({type:"POST",async:true,url:Routing.generate("axs_email_update_fulfillment_api"),data:JSON.stringify({email:email,first_name:fname,last_name:lname,zip:zip,country:country}),dataType:"json",success:function(data){if(data.error){if(data.error_description){$("#axs-email-signup-form-error").text("Error: "+data.error_description)}}else{$("#axs-newsletter-dialog #not-logged-in").hide();$("#axs-newsletter-dialog #signed-up").show()}},error:function(req,status,error){if(error)$("#axs-email-signup-form-error").text("Error: "+error);else $("#axs-email-signup-form-error").text("Error during account creation.  Try one more time, then contact customer service.")}});$("#axs-newsletter-dialog #not-logged-in").hide();$("#axs-newsletter-dialog #signed-up").show();return true})}return{initialize:function(){$.get(window.globalAssets.icon_defs,function(e){var svgSpriteElement=e.childNodes[0];svgSpriteElement.style.height=0;svgSpriteElement.style.width=0;svgSpriteElement.style.float="left";$body.append(svgSpriteElement)});resolveBrowserFallbacks();axs.utilities=new axs.ExtendUtilities;axs.animations=new axs.ExtendAnimations;axs.takeover=new axs.ExtendTakeover;axs.Core.takeover=axs.takeover;axs.flyout=new axs.ExtendFlyout;axs.UIFramework=new axs.ExtendUIFramework;axs.Core.share();axs.Global.partnerLogos();axs.Location.locationInitialize();axs.Core.displayLocaleContent();axs.Twitter.initialize();axs.Search.initialize();setupGenericModals();setupModals();setupTrendingTopicsTicker();setupLanguageSelector("#language-selector .local_link, #locale-banner .local_link");setupOmniture(".omniture-my-axs");setupAXSNewsletter(".nav_mail > a");initAxsEmailSignupForm();if(!Modernizr.placeholder){axs.Global.searchValue("#q");axs.Global.searchValue("#location_input",translations.location.searchDefaultText)}axs.Global.searchEventHandling("#q");setupShareViaEmail();$(".share-url-box").on("click",function(e){e.preventDefault();$(this).select()})},displayLocaleContent:function(){var $countryInput=$("#country");var countryCodes={US:"US",UK:"UK",GB:"GB",sweden:"SE",canada:"CA"};if($countryInput.length){var country=countryCodes.US;if($countryInput.val()!==""){country=$countryInput.val()}switch(country){case countryCodes.UK:case countryCodes.GB:case countryCodes.sweden:$("#registrationConsentUS").hide();$("#registrationConsentUK").show();break;case countryCodes.canada:$(".canada-only").show();$(".no-canada").hide();break}}},publishMediaBreakpoint:function(){axs.pubsub.publish("media.breakpoint",{breakpoint:axs.UIFramework.getBreakpoint()})},share:function(){$(".share-twitter").on("click",function(e){e.preventDefault();var data=$(this).data("social");var type=$(this).data("type");window.open(data.url,"twitter","toolbar=no,location=no,directories=no,width=415,height=480,top=100");if(typeof logData!="undefined"){axs.utilities.logData("share_"+type+"_twitter",logData)}});$(".share-facebook").on("click",function(e){e.preventDefault();var data=$(this).data("social");var type=$(this).data("type");axs.Facebook.shareDialog(data["url"]);if(typeof logData!="undefined"){axs.utilities.logData("share_"+type+"_facebook",logData)}});$(".email-send-btn").on("click",function(e){e.preventDefault();var personalMessage=$("#txtMsg").val();if(personalMessage===$("#txtMsg").html()){personalMessage=null}var data={senderName:$("#txtFromName").val(),sendTo:$("#txtSendTo").val(),personalMsg:personalMessage,locale:locale};if(typeof emailData==="undefined"){emailData={}}if($("#hdn_csrf_token")[0]){data.csrf_token=$("#hdn_csrf_token").val()}$.extend(true,data,emailData);var thisModal=$(this).closest(".modal");axs.animations.loadingElement.start(thisModal);var msg=$("#txtMsg").val();if(msg=="Add a personal message")msg="";var emailReg=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var error=false;$("#myaxs-share-event-email_from_error").text("");$("#myaxs-share-event-email_send_to_error").text("");var fromName=$("#txtFromName").val();var sendTo=$("#txtSendTo").val();if($.trim(fromName)==""||fromName.toLowerCase()=="first name"){$("#myaxs-share-event-email_from_error").text(eventTranslations.emailDialog.validationMessages.name);error=true}if($.trim(sendTo)==""||sendTo.toLowerCase()=="email address"){$("#myaxs-share-event-email_send_to_error").text(eventTranslations.emailDialog.validationMessages.email.required);error=true}else if(!emailReg.test(sendTo)){$("#myaxs-share-event-email_send_to_error").text(eventTranslations.emailDialog.validationMessages.email.invalid);error=true}if(!error){$.ajax({type:"POST",async:false,url:Routing.generate("api_proxy_email_send")+"?triggeredEmailExternalKey=AXS_Share_Content_Email&toEmail=&emailType=Share Content",data:JSON.stringify(data),dataType:"json",contentType:"application/json",success:function(data){axs.animations.loadingElement.stop(thisModal);$("#sharemod-confirm").data("axsModal").show();if(typeof logData!="undefined"){logData["emailContent"]=data;axs.utilities.logData("share_article_email",logData)}},error:function(req,status,error){axs.animations.loadingElement.stop(thisModal);$("#myaxs-share-event-email_from_error").text("There was an error processing your request. Please try again later.")}})}else{axs.animations.loadingElement.stop(thisModal)}})},closeAllPopups:function(){$(".ui-autocomplete:visible").hide()},initAxsEmailSignupForm:function(dnau){$("form#axs-email-signup-form").validate();$("form#axs-email-signup-form").on("submit",function(e){e.preventDefault();$("#axs-email-signup-form-error").text("");var fname=$("input#axs-email-signup-fname").val();if(!fname||fname==="Enter your first name"||fname==="First Name"){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.firstName.validationMessages.required);return false}var lname=$("input#axs-email-signup-lname").val();if(!lname||lname==="Enter your last name"||lname==="Last Name"){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.name.lastName.validationMessages.required);return false}var zip=$("input#axs-email-signup-zip").val();if(!zip||zip==="Enter your Zip/Postal code"){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.email.validationMessages.required);return false}var email=$("input#axs-email-signup-email").val();var email2=$("input#axs-email-signup-email2").val();if(email!==email2){$("#axs-email-signup-form-error").text(translations.newsletterForm.formFields.confirmEmail.validationMessages.mismatch);return false}var country=$.cookie(geoTypes.Geo_Static)?$.cookie(geoTypes.Geo_Static).split(":")[0]:"";$.ajax({type:"POST",async:true,url:Routing.generate("axs_email_update_fulfillment_api"),data:JSON.stringify({email:email,first_name:fname,last_name:lname,zip:zip,country:country}),dataType:"json",success:function(data){if(data.error){if(data.error_description){$("#axs-email-signup-form-error").text("Error: "+data.error_description)}}else{$("#axs-newsletter-dialog #not-logged-in").hide();$("#axs-newsletter-dialog #signed-up").show()}},error:function(req,status,error){if(error)$("#axs-email-signup-form-error").text("Error: "+error);else $("#axs-email-signup-form-error").text("Error during account creation.  Try one more time, then contact customer service.")}});$("#axs-newsletter-dialog #not-logged-in").hide();$("#axs-newsletter-dialog #signed-up").show();return true})},initAxsNewsletterPopup:function(){$("#axs-newsletter-dialog").data("axsModal").show()},getTeaserTypeClass:getTeaserType,locationRedirect:function($url){window.location=$url},follow:function(userId,categoryId,objectId,followButton){if(userId===0||userId===""){var callBackWhenLoginSuccess=$.Deferred();callBackWhenLoginSuccess.then(function(c_userID){axs.Core.follow(c_userID,categoryId,objectId,followButton)});$(followButton).data("donotshowalert",true);return false}else{if(typeof followButton!=="undefined")$(followButton).closest(".follower").hide().prev(".following").show();var comingFromRemindMe=$(followButton).data("callFromRemindMe");if(comingFromRemindMe!==null&&comingFromRemindMe){$(followButton).data("callFromRemindMe",false);var donotshowalert=$(followButton).data("donotshowalert");if(donotshowalert==null||!donotshowalert){$(followButton).data("donotshowalert",false);alert(eventTranslations.follow.followingAlertMessage)}}$.ajax({type:"POST",async:true,url:Routing.generate("alert_add")+"/"+userId+"/"+categoryId+"/"+objectId,dataType:"json",success:function(data){if(data==="success"){}else{alert("Failed due to "+data)}}});return true}},unfollow:function(userId,categoryId,objectId,unfollowButton){if(userId==0){}else{if(typeof unfollowButton!=="undefined"){$(unfollowButton).closest(".following").hide().next(".follower").show()}$.ajax({type:"POST",async:true,url:Routing.generate("alert_remove")+"/"+userId+"/"+categoryId+"/"+objectId,dataType:"json",success:function(data){if(data==="success"){}else{alert("Failed due to "+data)}}})}},showLoader:function($class_name){var $element=$class_name instanceof jQuery?$class_name:$($class_name);$element.addClass("loader")},hideLoader:function($class_name){var $element=$class_name instanceof jQuery?$class_name:$($class_name);$element.removeClass("loader")},getTeaserTypeClass:getTeaserType,ViewMoreAnimation:function(){function ViewMore(){var $btn=$(".view-more__btn");var classLoading="view-more__btn--loading";function addLoading(context){if(context){$(context).find($btn).addClass(classLoading)}else{$btn.addClass(classLoading)}}function removeLoading(context){if(context){$(context).find($btn).removeClass(classLoading)}else{$btn.removeClass(classLoading)}}return{add:addLoading,remove:removeLoading}}return new ViewMore}()}}();axs.Core.Ads={Common:{getAdParams:function(url){if(url.indexOf("app_qadev.php")!=-1)url=url.replace("/axs/app_qadev.php","");else if(url.indexOf("qa.")!=-1)url=url.replace(url.match(/\/\w+-axs/)[0],"");if(url.indexOf("?")!=-1){url=url.substr(0,url.indexOf("?"),-1)}if(url.substr(url.length-1)==="/"){url=url.substr(0,url.length-1)}return""}}};axs.Core.LoadingScreen=function(){function LoadingScreen(options){var defaults={message:translations.pleaseWait,timedClose:false,classLoader:"loader-desktop"};var settings=$.extend(defaults,options);var loadingId="loading-screen";function addLoadingHTML(){if(!$("#"+loadingId).length){$("body").append(""+'<div id="'+loadingId+'" class="'+settings.classLoader+'">'+"<span>"+settings.message+"</span>"+"</div>")}}function removeLoadingHTML(){if($("#"+loadingId)){$("#"+loadingId).remove()}}function showLoadingScreen(callback){addLoadingHTML();callback&&callback();if(settings.timedClose){setTimeout(hideLoadingScreen,settings.timedClose)}}function hideLoadingScreen(callback){removeLoadingHTML();callback&&callback()}return{show:showLoadingScreen,hide:hideLoadingScreen}}return LoadingScreen}();axs.Core.loadingScreen=new axs.Core.LoadingScreen;axs.Core.cleanDomainName=function(domain,stripSubdomain){domain=domain.replace(/^https?:/,"");domain=domain.replace(/^\/\//,"");domain=domain.replace(/^www/,"");domain=domain.replace(/^dotcom-web/,"");domain=domain.replace(/^-proxy/,"");if(stripSubdomain){domain=domain.replace(/^./,"");var domainSplit=domain.split(".");if(domainSplit.length>2){domainSplit.shift(0);domain=domainSplit.join(".")}domain="."+domain}return domain};axs.Core.zenDesk=function(){$("#zendesk-widget-overlay").click(function(){$(this).hide();var script=document.createElement("script");script.text='/*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src=\'javascript:var d=document.open();d.domain="\'+n+\'";void(0);\',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write(\'<body onload="document._l();">\'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","axs.zendesk.com");/*]]>*/';document.body.appendChild(script)})}();
window.axs=window.axs||{};axs.Logout=function(){"use strict";function eraseCookie(name){var expires="; expires = Thu, 01 Jan 1970 00:00:00 GMT";document.cookie=name+"="+expires+"; path=/";document.cookie=name+"="+expires+"; path=/; domain="+window.axs.Core.cleanDomainName(window.location.hostname,false);if(/.*\..*\..*/.test(window.location.hostname)){document.cookie=name+"="+expires+"; path=/; domain="+window.axs.Core.cleanDomainName(window.location.hostname,true)}}function cookieSmasher(){var cookies=document.cookie.split(";"),i;for(i=0;i<cookies.length;i++){var cookieName=cookies[i].split("=")[0];if(/.*axsid_user.*/.test(cookieName)){eraseCookie(cookieName)}}}cookieSmasher();window.location=Routing.generate("_security_logout",{_locale:locale})};
window.axs=window.axs||{};axs.Facebook=function(){"use strict";var scope_permissions={scope:"email, user_likes, user_location, user_events"};var scope_permissions_extended={scope:"email, user_likes, user_location, user_events, rsvp_event"};var facebookModal;function initFacebookEmailModal(){facebookModal=$("#facebook-email-modal").axsModal();var $facebookEmailSendButton=$("#facebook-email-send");$facebookEmailSendButton.off();$facebookEmailSendButton.click(function(){axs.Facebook.retryPermissions("email")})}var is_uiwebview=$.QueryString["axsSDKMobile"];function WebViewInit(){var is_authPage=window.location.pathname.match(/^\/auth\/client$/);var is_accountPage=window.location.pathname.match(/^\/auth\/client\/account$/);if(is_uiwebview==="true"){if(is_accountPage){FB.getLoginStatus(function(response){if(response.status==="connected"){if(!isFacebookEnabled&&$.cookie().fbDisconnectWasClicked!=="true"){axs.Core.loadingScreen.show(axs.Facebook.connectFacebookToCurrentUser(function(response){if(!response.success){axs.users.messageBox({alertType:"message-box--error has-topMargin",message:response.errorMessage,prependTo:"#fb-connect-error",isTemporary:true});axs.Core.loadingScreen.hide();FB.logout(function(response){})}else{window.location.reload()}}))}}$.cookie("fbDisconnectWasClicked","")})}else if(is_authPage){FB.getLoginStatus(function(response){if(response.status==="connected"){var promise=axs.Facebook.hasPermission("email");promise.done(function(){axs.Core.loadingScreen.show(axs.Facebook.loginCheck(false,null,response))});promise.fail(function(){facebookModal.showPermanent()})}else if(response.status==="not_authorized"){}else{}},true)}}}return{initialize:function(){initFacebookEmailModal();WebViewInit()},loginCheck:function(isAutoLogin,callback,fbResponse){var f=function(al){if(!al){al=false}var origin="axs";if(location.pathname.match(/\/(auth)/i)){origin="auth"}var url="";var accessToken=fbResponse.authResponse.accessToken;var userID=fbResponse.authResponse.userID;try{url=Routing.generate("facebook_login",{accessToken:accessToken,userID:userID},true)}catch(e){console.log(e);url=$("#facebook_login_route").val()+"?accessToken="+accessToken+"&userID="+userID}var data={};if($.QueryString["axsClientId"]!=null){url+="&axsClientId="+$.QueryString["axsClientId"];if($.QueryString["clientId"]!=null&&$.QueryString["callbackUrl"]!=null){url+="&clientId="+$.QueryString["clientId"]+"&callbackUrl="+$.QueryString["callbackUrl"]}}console.log(url);var postCall=$.ajax({url:url+"&al="+al,type:"post",data:data,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:true},dataType:"json"});postCall.done(function(json){if(json!=null&&json.redirect){window.location=json.redirect;return}if(json.success){if(origin!="auth"){$(".dialog").find("a:first").click();if(isAutoLogin==true){if(axs.Analytics){axs.Analytics.trackAutoSignInCompleteAnalytics(json.id)}}else{if(axs.Analytics){axs.Analytics.trackFBSignInCompleteAnalytics(json.id)}}window.location.reload()}else{if($.QueryString["clientId"]==null&&$.QueryString["axsClientId"]==null){window.location.reload()}}}else{console.log("desc: "+json.error_description+" | line: "+json.error_line+" | trace: "+json.error_trace)}});postCall.fail(function(jqXHR,textStatus){console.log(textStatus);console.log(jqXHR.status);console.log(jqXHR.responseText);axs.Core.loadingScreen.hide()})};setTimeout(f,500,isAutoLogin)},login:function(callback){var scope_permission=scope_permissions;if($.QueryString["axsClientId"]!=null&&$.QueryString["axsClientId"]==2){scope_permission=scope_permissions_extended}FB.getLoginStatus(function(fbResponseObject){if(fbResponseObject.status==="connected"){var promise=axs.Facebook.hasPermission("email");promise.done(function(){console.log("loginCheck executed");axs.Facebook.loginCheck(false,callback,fbResponseObject)});promise.fail(function(){if(is_uiwebview){facebookModal.showPermanent()}else{axs.Facebook.retryPermissions("email",facebookModal.showPermanent)}})}else{facebookLogin()}});function facebookLogin(){FB.login(function(response){if(response.authResponse){var promise=axs.Facebook.hasPermission("email");promise.done(function(){console.log("it has email rights");axs.Facebook.loginCheck(false,callback,response)});promise.fail(function(){console.log("email permits denied");facebookModal.showPermanent()})}},scope_permission)}},hasPermission:function(permission){var promise=$.Deferred();FB.api("/me/permissions",function(response){console.log(response);for(var p in response["data"]){if(response["data"][p].permission===permission){if(response["data"][p].status==="granted"){console.log("permissions granted");promise.resolve()}else{console.log("permissions denied");promise.reject()}}}});return promise},retryPermissions:function(permissions,callback,callbackFail){FB.login(function(response){axs.Facebook.hasPermission(permissions).then(function(){console.log("retry successful");console.log(response);axs.Facebook.loginCheck(false,callback,response)},function(){if(typeof callbackFail==="function"){callbackFail()}})},{scope:permissions,auth_type:"rerequest"})},connectFacebookToCurrentUser:function(callback){FB.getLoginStatus(function(response){var $axs_client_id=$("#axs_client_id");var $access_token=$("#access_token");function connectUser(callback,fbResponse){var axsClientParams="";if($axs_client_id[0]&&$access_token[0]){axsClientParams+="&axsClientId="+$axs_client_id.val();axsClientParams+="&access_token="+$access_token.val()}var facebookUserConnectProxyURL="";var accessToken=fbResponse.authResponse.accessToken;var userID=fbResponse.authResponse.userID;try{facebookUserConnectProxyURL=Routing.generate("api_proxy_facebook_user_connect",{accessToken:accessToken,userID:userID});facebookUserConnectProxyURL=facebookUserConnectProxyURL.replace(/^(?:\/\/|[^\/]+)*\//,"/")}catch(e){console.log(e);facebookUserConnectProxyURL=$("#api_proxy_facebook_user_connect_url").val()+"?accessToken="+accessToken+"&userID="+userID}facebookUserConnectProxyURL+=axsClientParams;$.ajax({type:"POST",async:true,url:facebookUserConnectProxyURL,complete:function(response){var json=JSON.parse(response.responseText);if(callback){callback({success:json.success,errorMessage:json.error_description})}}})}if(response.status==="connected"){connectUser(callback,response)}else{var scope_permission=scope_permissions;if($axs_client_id[0]){if($axs_client_id[0].value==2){scope_permission=scope_permissions_extended}}FB.login(function(response){if(response.authResponse){connectUser(callback,response)}else{axs.Core.loadingScreen.hide()}},scope_permission)}})},logout:function(){try{!!FB}catch(e){axs.Logout()}if(FB.getLoginStatus&&FB.getAuthResponse()){FB.getLoginStatus(function(response){if(response.authResponse&&(response.status==="connected"||response.status==="not_authorized")){setTimeout(function(){FB.logout(function(response){axs.Facebook.logout();axs.Logout()})},500)}else{axs.Logout()}},true)}else{axs.Logout()}},disconnect:function(callback,userAction){if(is_uiwebview&&userAction){$.cookie("fbDisconnectWasClicked","true")}if(typeof callback!=="function"){callback=function(){}}FB.api("/me/permissions","DELETE",callback)},shareDialog:function(url){url=url||$('meta[property="og:url"]').attr("content")||window.location.href;var obj={method:"share_open_graph",action_type:"og.likes",action_properties:JSON.stringify({object:url}),display:"popup"};function callback(){}FB.ui(obj,callback)},feedDialog:function(link,name,caption,description,properties,actions,pic){var obj={method:"feed",link:link,name:name,caption:caption,description:description,properties:properties,actions:actions,picture:pic,display:"popup"};function callback(response){}FB.ui(obj,callback)},getFBLoginStatus:function(){if(typeof FB==="object"&&FB.getLoginStatus){FB.getLoginStatus(function(response){return response})}},displayFacePile:function(){var $facepile=$(".facepile");var fbResponseObject=axs.Facebook.getFBLoginStatus();if(fbResponseObject&&(fbResponseObject.status==="connected"||fbResponseObject.status==="not_authorized")){if($facepile[0]){$facepile.show()}}else{if($facepile[0]){$facepile.remove()}}}}}();
(function($,namespace){var timer;function follow(userId,categoryId,objectId,followButton,firstFollow){if(timer){clearTimeout(timer)}if(userId===0||userId===""){var callBackWhenLoginSuccess=$.Deferred();callBackWhenLoginSuccess.then(function(c_userID){axs.follow.add(c_userID,categoryId,objectId,followButton)});$(followButton).data("donotshowalert",true);return false}else{if(typeof followButton!=="undefined"){if(typeof firstFollow!=="undefined"&&firstFollow==true)$(followButton).closest(".follower").first().addClass("hidden").hide().prev(".following").first().removeClass("hidden").show();else $(followButton).closest(".follower").addClass("hidden").hide().prev(".following").removeClass("hidden").show()}var comingFromRemindMe=$(followButton).data("callFromRemindMe");if(comingFromRemindMe!==null&&comingFromRemindMe){$(followButton).data("callFromRemindMe",false);var donotshowalert=$(followButton).data("donotshowalert");if(donotshowalert==null||!donotshowalert){$(followButton).data("donotshowalert",false);alert(eventTranslations.follow.followingAlertMessage)}}$.ajax({type:"POST",async:true,url:Routing.generate("alert_add")+"/"+userId+"/"+categoryId+"/"+objectId,dataType:"json",success:function(data){if(data==="success"){}else{alert("Failed due to "+data)}}});return true}}function unfollow(userId,categoryId,objectId,unfollowButton,createTimer){if(userId==0){}else{if(typeof unfollowButton!=="undefined"){$(unfollowButton).closest(".following").addClass("hidden").hide().next(".follower").removeClass("hidden").show()}if(createTimer==true){timer=setTimeout(function(){$(unfollowButton).closest(".followingObjectContainer").remove()},5e3)}$.ajax({type:"POST",async:true,url:Routing.generate("alert_remove")+"/"+userId+"/"+categoryId+"/"+objectId,dataType:"json",success:function(data){if(data==="success"){}else{alert("Failed due to "+data)}}})}}function toggleFollow(categoryId,objectId,followButton,callback,omnitureData){var userFollowId=objectId+"_"+categoryId;var isFollowed=!!followButton.getAttribute("data-is-followed");addFollow({id:userFollowId,title:followButton.getAttribute("data-follow-title"),imgsrc:followButton.getAttribute("data-follow-img-src")},function(){if(isFollowed){followButton.removeAttribute("data-is-followed");followButton.parentElement.classList.remove("is-followed");followButton.classList.remove("is-followed");$(followButton).find(".follow-btn-text").text("Follow");if(followButton.className.indexOf("sprite-share-following")!==-1){followButton.className="sprite-share-follow"}$(followButton).find("use").attr("xlink:href","#svg-icon-plus")}else{followButton.setAttribute("data-is-followed","true");followButton.parentElement.classList.add("is-followed");followButton.classList.add("is-followed");$(followButton).find(".follow-btn-text").text("Following");$(followButton).find("use").attr("xlink:href","#svg-icon-checkmark2");if(followButton.className.indexOf("sprite-share-follow")!==-1){followButton.className="sprite-share-following"}}callback&&callback()},!isFollowed,omnitureData)}namespace.follow={add:follow,remove:unfollow,toggleFollow:toggleFollow}})(window.jQuery,window.axs||{});
(function($,namespace){function flyout(){var $trigger=$(".flyout__trigger:not(.flyout__trigger--with-hover)"),menuContainer=".flyout__menu-container",classIsOpen="flyout__menu-container--open";$trigger.each(function(){var $e=$(this),$menu=$e.find(menuContainer);var toggleFlyout=function(){$menu.add($e).toggleClass(classIsOpen)};$e.on("click.toggleFlyout",function(e){if(!$menu.hasClass(classIsOpen)){toggleFlyout();axs.utilities.outsideClick.bind($e.add($menu).add(".ui-autocomplete"),toggleFlyout)}})})}namespace.ExtendFlyout=flyout})(window.jQuery,window.axs||{});
var axs=window.axs||{};axs.Global=function(){var changes;var defaultDiacriticsRemovalMap=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];return{setupGlobalEventHandlers:function(){$("#locale-banner .close-btn, #locale-banner .close-dialog-lnk").on("click",function(){$.cookie("locale_banner_closed",true,{path:"/"});$("#locale-banner").hide()})},setFrameworkTranslations:function(){switch(locale){case"sv-SE":$.extend($.validator.messages,{required:"Detta f&auml;lt &auml;r obligatoriskt.",maxlength:$.validator.format("Du f&aring;r ange h&ouml;gst {0} tecken."),minlength:$.validator.format("Du m&aring;ste ange minst {0} tecken."),rangelength:$.validator.format("Ange minst {0} och max {1} tecken."),email:"Ange en korrekt e-postadress.",url:"Ange en korrekt URL.",date:"Ange ett korrekt datum.",dateISO:"Ange ett korrekt datum (&Aring;&Aring;&Aring;&Aring;-MM-DD).",number:"Ange ett korrekt nummer.",digits:"Ange endast siffror.",equalTo:"Ange samma v&auml;rde igen.",range:$.validator.format("Ange ett v&auml;rde mellan {0} och {1}."),max:$.validator.format("Ange ett v&auml;rde som &auml;r mindre eller lika med {0}."),min:$.validator.format("Ange ett v&auml;rde som &auml;r st&ouml;rre eller lika med {0}."),creditcard:"Ange ett korrekt kreditkortsnummer."});break}},clearSearch:function(){$.cookie("axs_search",null,{path:"/",domain:window.axs.Core.cleanDomainName(window.location.hostname),secure:false});$("input.q").autocomplete("close")},closeSearch:function(){$("input.q").autocomplete("close")},removeDiacritics:function(str){if(!changes){changes=defaultDiacriticsRemovalMap}for(var i=0;i<changes.length;i++){str=str.replace(changes[i].letters,changes[i].base)}return str},hideHref:function(url){$('a[href$="'+url+'"]').hide()},setLocation:function(e,input){var $input=$(input);if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false){if(axs.Analytics)axs.Analytics.trackLocationChangeAnalytics($input.val())}e.preventDefault();var url=Routing.generate("autocomplete_locations")+"?term="+$input.val();$.ajax({type:"POST",async:false,url:url,dataType:"json",success:function(data){if(data.length>0){window.location=Routing.generate("location_set_geo")+"?city="+data[0].label+"&id="+data[0].id+"&referrer="+window.location.href}else $(".location_search_error").css("display","block");if(typeof isMobile!="undefined"&&isMobile){$.mobile.hidePageLoadingMsg()}},error:function(req,status,error){if(error){$(".location_search_error").css("display","block");if(typeof isMobile!="undefined"&&isMobile){$.mobile.hidePageLoadingMsg()}}}})},initLocationAutoComplete:function(input){var $input=$(input);locationACCount=0;var locAC=$input.autocomplete({predSearchID:"location-auto-complete",minLength:1,dataType:"json",source:Routing.generate("autocomplete_locations"),open:function(event,ui){locationACCount=0;suggestionFound=true},close:function(event,ui){suggestionFound=false},select:function(event,ui){if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false){if(axs.Analytics){axs.Analytics.trackLocationChangeAnalytics(ui.item.label)}window.location=Routing.generate("location_set_geo")+"?city="+ui.item.label+"&id="+ui.item.id+"&referrer="+window.location.href}}});locAC.data("ui-autocomplete")._renderItem=function(ul,item){var url=Routing.generate("location_set_geo")+"?city="+item.label+"&id="+item.id+"&referrer="+window.location.href;ul.addClass("loc-autocomplete").attr("id","location-autocomplete");if(item.label=="Stockholm, AB, Sweden"){item.label="Stockholm, Sweden"}if(locationACCount==0){$("#loc_city").val(item.label);$("#loc_id").val(item.id);locationACCount++}item.value=item.label;if(typeof isMobile!="undefined"&&isMobile){return $("<li class='ui-btn ui-btn-icon-right ui-li '></li>").data("ui-autocomplete-item",item).append("<a>"+item.label+"</a>").appendTo(ul)}else{var $list=$('<li class="loc-row"></li>').data("ui-autocomplete-item",item).append('<a href="'+url+'">'+item.label+"</a>").appendTo(ul);return $list}};if(typeof isMobile!="undefined"&&isMobile){locAC.data("ui-autocomplete")._resizeMenu=function(){var ul=this.menu.element;ul.outerWidth(this.element.outerWidth())}}},addLocationLookup:function($elements){$elements.each(function(){var lastXhr;var locAC=$(this).autocomplete({minLength:1,dataType:"json",source:function(request,response){if(lastXhr)lastXhr.abort();lastXhr=$.getJSON(Routing.generate("autocomplete_locations"),request,function(data,status,xhr){if(xhr===lastXhr){response(data)}})}}).data("ui-autocomplete")._renderItem=function(ul,item){ul.addClass("loc-autocomplete");if(item.label=="Stockholm, AB, Sweden"){item.label="Stockholm, Sweden"}item.value=item.label;if(typeof isMobile!="undefined"&&isMobile){return $("<li class='ui-btn ui-btn-icon-right ui-li '></li>").data("ui-autocomplete-item",item).append("<a>"+item.label+"</a>").appendTo(ul)}else{var $list=$('<li class="loc-row"></li>').data("ui-autocomplete-item",item).append('<a href="javascript:void(0);">'+item.label+"</a>").appendTo(ul);return $list}};if($(this).data("source")){$(this).data("ui-autocomplete").selectedItem=$(this).data("source")}$(this).blur(function(){if(lastXhr)lastXhr.abort()})})},removeUserFBLink:function(callback){error=null;var data={};if(typeof $.QueryString["axsClientId"]!=="undefined"&&typeof $.QueryString["access_token"]!=="undefined"){data.axsClientId=$.QueryString["axsClientId"];data.access_token=$.QueryString["access_token"]}var facebookDisconnectProxyURL=$("#api_proxy_facebook_connect_disable_url").val();if(!facebookDisconnectProxyURL){facebookDisconnectProxyURL=Routing.generate("api_proxy_facebook_connect_disable")}$.ajax({type:"POST",async:true,url:facebookDisconnectProxyURL,data:JSON.stringify(data),dataType:"json",success:function(data){if(data.error){if(data.error_description)callback(data.error_description);else callback(data.error)}else if(data){callback(data,error)}else{callback("System error.  Please try again later.")}},error:function(req,status,error){if(error)callback(error);else callback("System error.  Please try again later.")}})},removeUserSocialLink:function(socialType,callback){error=null;var data={};if(typeof $.QueryString["axsClientId"]!=="undefined"&&typeof $.QueryString["access_token"]!=="undefined"){data.axsClientId=$.QueryString["axsClientId"];data.access_token=$.QueryString["access_token"]}var socialDisconnectProxyURL=Routing.generate("api_proxy_social_connect_disable")+"/"+socialType;$.ajax({type:"POST",async:true,url:socialDisconnectProxyURL,data:JSON.stringify(data),dataType:"json",success:function(data){if(data.error){if(data.error_description)callback(data.error_description);else callback(data.error)}else if(data){callback(data,error)}else{callback("System error.  Please try again later.")}},error:function(req,status,error){if(error)callback(error);else callback("System error.  Please try again later.")}})},addUserSocialLink:function(socialType,callback){error=null;var data={};if(typeof $.QueryString["axsClientId"]!=="undefined"&&typeof $.QueryString["access_token"]!=="undefined"){data.axsClientId=$.QueryString["axsClientId"];data.access_token=$.QueryString["access_token"]}var socialDisconnectProxyURL=Routing.generate("api_proxy_social_connect")+"/"+socialType;$.ajax({type:"POST",async:true,url:socialDisconnectProxyURL,data:JSON.stringify(data),dataType:"json",success:function(data){if(data.error){if(data.error_description)callback(data.error_description);else callback(data.error)}else if(data){callback(data,error)}else{callback("System error.  Please try again later.")}},error:function(req,status,error){if(error)callback(error);else callback("System error.  Please try again later.")}})},updateUserPassword:function(e){e.preventDefault();var userPassCurrent=$("input#axs_pass_current").val();var userPassNew=$("input#axs_pass_new").val();if(userPassCurrent==""||userPassCurrent=="Enter current password"){$("div#myaxs-change-pass-form-error").text("Please enter current password.");return false}if(userPassNew==""||userPassNew=="Enter new password"){$("div#myaxs-change-pass-form-error").text("Please enter new password.");return false}if(userPassNew.length<6){$("div#myaxs-change-pass-form-error").text("New password must have at least 6 characters.");return false}var userPassNew2=$("input#axs_pass_new2").val();if(userPassNew2==""||userPassNew2=="Re-enter new password"){$("div#myaxs-change-pass-form-error").text("Please enter password again to confirm.");return false}if(userPassNew!=userPassNew2){$("div#myaxs-change-pass-form-error").text("New passwords did not match.")}else{var retval=axs.Global.setUserPass(userPassCurrent,userPassNew);if(retval.error)$("div#myaxs-change-pass-form-error").text("Please enter the correct current password.");else if(retval.user&&retval.user.email){axs.Global.toggleHidePasswordEditForm();axs.Global.resetPasswordEditForm();if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false){alert("Your new password has been saved.")}else{$("#passwordSaved").show();$("passwordSaved").fadeOut(5e3)}return true}}return false},setUserSubscription:function(name,state,callback,notAsync){var alertName=null,stateVal=null,content={};if(name=="venue")alertName="venue_alert_active";if(name=="event")alertName="event_performer_alert_active";if(name=="axs")alertName="axs_newsletter_alert_active";if(name=="offers")alertName="special_offers_alert_active";if(state==true)stateVal="true";else stateVal="false";content[alertName]=stateVal;var error=null;$.ajax({type:"POST",async:notAsync?false:true,url:Routing.generate("api_proxy_user_subscription")+"?csrf_token="+$("#hdn_csrf_token").val(),data:JSON.stringify(content),dataType:"json",success:function(data){if(data.error){if(data.error_description)error=data.error_description;else error=data.error}else if(data){var isSubscribed=data[alertName];callback({isSubscribed:isSubscribed})}else{error="System error.   Please try again later."}},error:function(req,status,error){if(error)error=error;else error="System error.  Please try again later."}})},cancelProfileUpdate:function(e){e.preventDefault();var userEmail=$("input#users-change-email-field").val();$("#profile-info-first-name").val($("#profile-info-first-name").attr("old"));$("#profile-info-last-name").val($("#profile-info-last-name").attr("old"));$("#profile-info-email").val($("#profile-info-email").attr("old"));$("#profile-info-zip").val($("#profile-info-zip").attr("old"))},toggleHidePasswordEditForm:function(){$("div#users-password-section-heading").text("Password:");$("div#users-password").removeClass("password_active").show();$("div#users-password-forgot-password-link").hide();$("div#users-password-update-control").hide();$("div#users-password-edit-control").show();$("div#myaxs-change-pass-form-error").text("")},resetPasswordEditForm:function(){$("#users-password-update-control input[type=password]").val("");$("#axs_pass_current").parent().removeClass("hidden");$("#users-password-section-heading").val("Password");$("#message1").text("Password set");$("#message2").text("to edit");$("#isFacebookAcnt").val(0)},setUserPass:function(currPass,newPass,uevt,locale){var user=null,error=null,errorCode=null;var data={currpass:currPass,password:newPass};if(uevt){data.uevt=uevt}if(locale){data.locale=locale}if($("#axs_client_id")[0]){data.axs_client_id=$("#axs_client_id").val()}if($("#access_token")[0]){data.access_token=$("#access_token").val()}if($("#hdn_csrf_token")[0]){data.csrf_token=$("#hdn_csrf_token").val()}var resetPasswordAPIURL=$("#reset_password_api_url").val();if(!resetPasswordAPIURL){resetPasswordAPIURL=Routing.generate("api_proxy_user_password")}$.ajax({type:"POST",async:false,url:resetPasswordAPIURL,data:JSON.stringify(data),dataType:"json",success:function(data){if(data.error){if(data.error_description)error=data.error_description;else error=data.error}else if(data.password){user=data}else{error="System error.   Please try again later."}},error:function(req,status,error2){if(req.responseJSON&&req.responseJSON.message){error=req.responseJSON.message;errorCode=req.status}else if(error2){error=error2}else{error="System error. Please try again later."}}});var retval={user:user,error:error,errorCode:errorCode};return retval},setUserPassToken:function(newPass,confirmPass,userId,axsClientId,token){var response=null,error=false;var data={password:newPass,confirm:confirmPass,userId:userId,token:token,axsClientId:axsClientId};if($("#hdn_csrf_token")[0]){data.csrf_token=$("#hdn_csrf_token").val()}if(newPass==confirmPass){$.ajax({type:"POST",async:false,url:Routing.generate("api_proxy_user_password_token"),data:JSON.stringify(data),dataType:"json",success:function(data){response=data},error:function(req,status,error){response=JSON.parse(req.responseText);error=true}})}else error=true;return{response:response,error:error}},getEventStatusTags:function(eventStatusId,eventRefundStatusId,displayRefundStatusTag){var refundStatusId=eventRefundStatusId?eventRefundStatusId:null;var res={eventStatusLabel:null,eventStatusClassNames:"btn-event-status h-margin-bottom-sm "};if(displayRefundStatusTag){switch(refundStatusId){case 4:res.eventStatusLabel=translations.cta.tags.refundProblem;res.eventStatusClassNames+="btn-event-status-cancelled";break;case 2:case 7:res.eventStatusLabel=translations.cta.tags.refundPending;res.eventStatusClassNames+="btn-event-status-rescheduled";break;case 3:res.eventStatusLabel=translations.cta.tags.refunded;res.eventStatusClassNames+="btn-event-status-postponed";break;case 5:case 6:case 8:res.eventStatusLabel=translations.cta.tags.donated;res.eventStatusClassNames+="btn-event-status-rescheduled";break}}else{var eventStatusId=eventStatusId?eventStatusId:null;switch(eventStatusId){case 2:res.eventStatusLabel=translations.cta.tags.cancelled;res.eventStatusClassNames+="btn-event-status-cancelled";break;case 5:case 37:res.eventStatusLabel=translations.cta.tags.postponed;res.eventStatusClassNames+="btn-event-status-postponed";break;case 6:res.eventStatusLabel=translations.cta.tags.rescheduled;res.eventStatusClassNames+="btn-event-status-rescheduled";break;case 11:res.eventStatusLabel=translations.cta.tags.venueChange;res.eventStatusClassNames+="btn-event-status-postponed";break;case 36:res.eventStatusLabel=translations.cta.tags.suspended;res.eventStatusClassNames+="btn-event-status-suspended";break;case 38:res.eventStatusLabel=translations.cta.tags.rescheduledNewDateAndVenue;res.eventStatusClassNames+="btn-event-status-postponed";break}}return res},updateUserProfile:function(e,callback){e.preventDefault();var $frm=$("#myaxs-profile-info-form")[0];var fname=$.trim($frm.first_name.value);var lname=$.trim($frm.last_name.value);var email=$.trim($frm.email_address.value);var $location=$("#user-zip-code");var zip=$location.val();var cityId=null;var currentPassword="";if($frm.current_password!=undefined)currentPassword=$.trim($frm.current_password.value);var newPassword="";if($frm.password_new!=undefined)newPassword=$.trim($frm.password_new.value);var info={first_name:fname,last_name:lname,email:email,location:{}};if(zip){info["location"]["postal_code"]=zip}if(cityId){info["location"]["cityId"]=cityId}if($("#axs_client_id")[0]){info.axs_client_id=$("#axs_client_id").val()}if($("#access_token")[0]){info.access_token=$("#access_token").val()}if($("#hdn_csrf_token")[0]){info.csrf_token=$("#hdn_csrf_token").val()}if($("#enableAllCommunications").length){info.enableAllCommunications=$("#enableAllCommunications").prop("checked")}var retval=axs.Global.setUserProfileInfo(info);var user=retval.user;var serviceReturnVal=false;if(user!==null){$("#myaxs-profile-info-form input").each(function(){$(this).attr("old",this.value)});axs.pubsub.publish("update.userinfo",user);$("#myaxs-email").html("Hi "+user.first_name);$("#users-email-name").text(user.first_name+" "+user.last_name);$("#users-email-email").text(user.email);$("#users-email-location").text(user.location.postal_code);if($("#enableAllCommunications").length){if(user.communications&&user.communications.length>0){var commsActive=true;for(var x in user.communications){if(user.communications[x].isActive==false){commsActive=false}}$("#enableAllCommunications").prop("checked",commsActive)}else{$("#enableAllCommunications").prop("checked",false)}}serviceReturnVal=true}if(user==null&&retval.error!=""){if(callback)callback.call(this,retval.error);return false}if(newPassword!=null&&newPassword!=""){retval=axs.Global.setUserPass(currentPassword,newPassword);if(retval.error){$("#myaxs-change-pass-form-error").text(myAxsTranslations.pages.accountInformation.formFields.password.currentPassword.validationMessages.invalid);$("#myaxs-change-pass-form-error").show();serviceReturnVal=false}else if(retval.user&&retval.user.email){$("#myaxs-change-pass-form-error").hide();axs.Global.toggleHidePasswordEditForm();axs.Global.resetPasswordEditForm();$("#passwordSaved").show();$("passwordSaved").fadeOut(5e3);serviceReturnVal=serviceReturnVal&&true}}if(callback)callback.call(this,serviceReturnVal,user);return serviceReturnVal},getLocationAutoCompleteData:function(location){var locationData=axs.Global.getLocationData(location);var data=null;if(locationData!=null&&locationData.length>0){locationData=locationData[0];var label=locationData.name;if(locationData.countryCode=="US"){label+=", "+locationData.state}else{label+=", "+locationData.country}data={id:locationData.id,label:label,type:"city",value:locationData.name}}return data},updateUserPhoneNumber:function(e){e.preventDefault();var $frm=$("#form-myaxs-communications-sms-alerts")[0];var phone=$.trim($frm.user_phone.value);var info={phone:phone};if($("#hdn_csrf_token")[0]){info.csrf_token=$("#hdn_csrf_token").val()}var retval=axs.Global.setUserProfileInfo(info);var user=retval.user;if(user!==null){return true}return false},toggleHideEmailEditForm:function(email){if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false){$("div#users-email-update-control").hide();$("div#users-email").show()}},setUserProfileInfo:function(info,callback,async){var user=null,error=null,async=async||false;if($("#hdn_csrf_token")[0]){info.csrf_token=$("#hdn_csrf_token").val()}$apiURL=$("form#myaxs-profile-info-form").attr("action");if(!$apiURL){$apiURL=Routing.generate("api_proxy_user_update")}$.ajax({type:"POST",async:async,url:$apiURL,data:JSON.stringify(info),dataType:"json",success:function(data){if(data.error){if(data.error_description){error=data.error_description;if(data.error_description.indexOf("User is not in session")!=-1){window.location.href=axs.utilities.generateURL("default_index",{_locale:locale})}}else{error=data.error}}else{user=data;callback&&callback(data)}},error:function(req,status,error){if(req&&req.responseJSON&&req.responseJSON.message){error=req.responseJSON.message}if(error){error=error}else{error="System error.  Please try again later."}callback(null,error)}});var retval={user:user,error:error};return retval},getUser:function(){var user=null,error=null;$.ajax({type:"POST",async:false,url:Routing.generate("api_proxy_user")+"?csrf_token="+$("#hdn_csrf_token").val(),dataType:"json",success:function(data){if(data.error){if(data.error_description)error=data.error_description;else error=data.error}else if(data.email){user=data}else{error="System error.  Please try again later."}},error:function(req,status,error){if(error)error=error;else error="System error.  Please try again later."}});return user},getMoreDatesForArtistAtCurrentVenueAction:function($container,source,params){$container.addClass("loader");var geoData=$.cookie(geoTypes.Geo_Dynamic).split(":");var dateFormat=params["dateFormat"];var dateFormatShort=params["dateFormatShort"];var tbdText=params["tbdText"];params["locale"]=locale;$.ajax({type:"GET",async:true,url:Routing.generate("api_get_more_dates_for_artist_at_current_venue")+"?csrf_token="+$("#hdn_csrf_token").val(),dataType:"json",data:params,success:function(data){if(data&&data.events.length>0){var moreDatesEvents=[];$(data.events).each(function(i){this.omnitureModuleString="AX:E:WL:"+(i+1)+":1:ET:"+this.eventId;this.multipleDates=false;if(this.additionalDates.length>0){this.multipleDates=true}if(moment(this.eventDateTime).isValid()){moment.lang(locale.substring(0,2));this.eventDate=moment(this.eventDateTime).format(dateFormat);if(this.multipleDates||this.dateOnly){this.eventDate=moment(this.eventDateTime).format(dateFormatShort)}var regexMatches=this.eventDate.match(/(mon|t(ue|ues|hu|hur)|wed|fri|s(at|un))\b/i);if(regexMatches)this.eventDate=this.eventDate.replace(regexMatches[0],regexMatches[0].toUpperCase())}if(this.eventDateTime=="TBD"){this.eventDate=tbdText}moreDatesEvents.push({eventId:this.eventId,location:this.omnitureModuleString,eventUrl:this.ticketing?this.ticketing.eventUrl:null})});axs.OmnitureData.setMoreDateEvents(moreDatesEvents);if(!source){source='                                {{#each events}}                                     <div class="event-stack no-thumb">                                         <div class="event-stack-copy">                                             <a class="headliner events_link" href="{{ticketing.eventUrl}}" omId="{{omnitureModuleString}}">{{{title.eventTitleText}}}</a>                                             <a class="venue-name" href="{{ venue.url }}">{{ venue.title }}</a>                                              <p class="venue-location">{{ venue.city }},                                              {{#if venue.state}}                                                 {{venue.state}}                                               {{else}}                                                 {{venue.country}}                                               {{/if}}                                             </p>                                             <p class="showtime">                                                {{#if multipleDates }}                                                         '+translations.starting+":                                                {{/if}}                                                 {{{eventDate}}}                                             </p>                                         </div>                                     </div>                                 {{/each}}                                        "}var template=Handlebars.compile(source);var html=template(data);var itemContainer=$container.find(".content-module-content");if(!itemContainer[0])itemContainer=$container;itemContainer.hide().html(html);if(data.url){var str="<a href="+data.url+' id="js-more-event-date-display-control" class="link" t>'+translations.viewAll+"</a>";itemContainer.append(str)}itemContainer.fadeIn(500);$container.removeClass("loader")}else{$container.hide()}},error:function(){$container.removeClass("loader");$container.hide()}})},getRelatedEvents:function($container,source,params){if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false)$container.addClass("loader");var geoData=$.cookie(geoTypes.Geo_Dynamic);if(geoData){geoData=geoData.split(":")}var countryCode=geoData!=null?geoData[0]:"US";var latitude=geoData!=null?geoData[5]:"0";var longitude=geoData!=null?geoData[6]:"0";var performerId=params["performerId"]?params["performerId"]:"";var excludedEventIds=params["excludedEventIds"]?params["excludedEventIds"]:"";var siteId=params["siteId"];var callback=params["callback"];var eventId=params["eventId"]?params["eventId"]:"";var dateFormat=params["dateFormat"];var dateFormatShort=params["dateFormatShort"];var tbdText=params["tbdText"];var rows=params["rows"]?params["rows"]:5;var radius="100,400,1000";if(performerId||eventId){$.ajax({type:"GET",async:true,url:Routing.generate("api_proxy_get_events_related")+"?siteId="+siteId+"&performerId="+performerId+"&lat="+latitude+"&long="+longitude+"&rows="+rows+"&radius="+radius+"&locale="+locale+"&excludedEventIds="+excludedEventIds+"&eventId="+eventId+"&csrf_token="+$("#hdn_csrf_token").val(),dataType:"json",success:function(data){if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false)$container.removeClass("loader");if(data&&data.events&&data.events.length>0){var relatedEvents=[];$(data.events).each(function(i){this.omnitureModuleString="AX:E:EL:"+(i+1)+":1:ET:"+this.eventId;this.multipleDates=false;if(this.additionalDates.length>0){this.multipleDates=true}if(moment(this.eventDateTime).isValid()){moment.lang(locale.substring(0,2));this.eventDate=moment(this.eventDateTime).format(dateFormat);if(this.multipleDates||this.dateOnly){this.eventDate=moment(this.eventDateTime).format(dateFormatShort)}var regexMatches=this.eventDate.match(/(mon|t(ue|ues|hu|hur)|wed|fri|s(at|un))\b/i);if(regexMatches)this.eventDate=this.eventDate.replace(regexMatches[0],regexMatches[0].toUpperCase());
}if(this.eventDateTime=="TBD"){this.eventDate=tbdText}var imagematch=/^(https?):\/\//;var relatedMediaImageUrl=this.relatedMedia["2"].file_name;if(relatedMediaImageUrl){this.relatedMedia["2"].file_name=relatedMediaImageUrl.replace(imagematch,"//")}relatedEvents.push({eventId:this.eventId,location:this.omnitureModuleString,eventUrl:this.ticketing?this.ticketing.eventUrl:null})});axs.OmnitureData.setRelatedEvents(relatedEvents);if(!source)source='{{#each events}}                                             <div class="event-stack cf">                                                 <a omId="{{omnitureModuleString}}" class="event-stack-img events_link" href="{{ticketing.eventUrl}}"><img src="{{ relatedMedia.2.file_name }}" class="grid_image_134" alt="" /></a>                                                 <div class="event-stack-copy">                                                     <div class="emphasize mt3"><a omId="{{omnitureModuleString}}" class="events_link" href="{{ticketing.eventUrl}}">{{{title.eventTitleText}}}</a></div>                                                     <div><span class="nb">                                                    {{#if title.supporting}}                                                         {{{title.supporting}}}                                                     {{/if}}                                                     </span></div>                                                     <div class="emphasize mt10"><a href="{{ venue.url }}">{{ venue.title }}</a></div>                                                      <div>{{ venue.city }},                                                      {{#if venue.state}}                                                         {{venue.state}}                                                       {{else}}                                                         {{venue.country}}                                                       {{/if}}                                                     </div>                                                     {{#if multipleDates }}                                                         '+translations.starting+":                                                    {{/if}}                                                     {{{eventDate}}}                                                 </div>                                             </div>                                         {{/each}}";var template=Handlebars.compile(source);var html=template(data);var $itemContainer=$container.find(".content-module-content");if(!$itemContainer[0])$itemContainer=$container;$itemContainer.html(html);if(callback)callback.call()}else $container.hide()},error:function(){if(typeof isMobile==="undefined"||typeof isMobile!="undefined"&&isMobile==false)$container.removeClass("loader")}})}else{$container.hide()}},searchValue:function(element,defaultValue){var $element=$(element);$element.each(function(){var $element=$(this);var $form=$element.closest("form");var defaultValueString=defaultValue==null?translations.header.searchDefaultText:defaultValue;var focusStateClass="global-search-focus";$element.attr("placeholder",defaultValueString);if($element.val()===""){$element.val(defaultValueString)}$element.focus(function(){$("body").addClass(focusStateClass);if($element.val()===defaultValueString){$element.val("")}});$element.blur(function(){$("body").removeClass(focusStateClass);if($element.val()===""){$element.val(defaultValueString)}});$form.submit(function(e){$("body").removeClass(focusStateClass);if($element.val()===""||$element.val()===defaultValueString){e.preventDefault()}})})},searchEventHandling:function(element){$(element).each(function(){var $element=$(this);var $form=$element.closest("form");var toggleFocusClass=function(){};$element.on("focus",function(){$element.cssTransitionEnd(toggleFocusClass)});$form.submit(function(e){if($element.val()===""){e.preventDefault()}})})},ctaButtonChangeTimer:function($currentDateTime,$onSaleDateTime,$waitingRoomDuration){var timeout=0;if($onSaleDateTime){var nowUTC=moment.utc($currentDateTime,"YYYY-MM-DD HH:mm:ss");var onsaleDateTimeUTC=moment.utc($onSaleDateTime,"YYYY-MM-DD HH:mm:ss");var waitingRoomDateTimeUTC=moment(onsaleDateTimeUTC).subtract("minute",$waitingRoomDuration);if(nowUTC.isBefore(waitingRoomDateTimeUTC))timeout=waitingRoomDateTimeUTC.diff(nowUTC);else if(nowUTC.isBefore(onsaleDateTimeUTC))timeout=onsaleDateTimeUTC.diff(nowUTC)}var refresh=function(){timeout=0;window.location.reload(true)};if(timeout>0&&timeout<moment.utc().add("days",1).diff(moment.utc($currentDateTime,"YYYY-MM-DD HH:mm:ss"))){window.setTimeout(refresh,timeout+1e3)}},autoSetSMSNotifications:function(isActive){axs.Global.setUserCommunications(new Array,function(response){$.each(response,function(index,value){if(value.communicationTypeId==1&&value.optinTypeId!=1){value.isActive=isActive}});axs.Global.setUserCommunications(response)})},autoSetSMSNotificationsOn:function(){axs.Global.autoSetSMSNotifications("true")},autoSetSMSNotificationsOff:function(){axs.Global.autoSetSMSNotifications("false")},saveCommunicationsCheckBoxes:function(hideAlert,callback){var communicationsData=[];var callback=callback||axs.Global.refreshCommunicationsPreferences;$(".communications-container").each(function(){var data=$(this).data("communicationsdata");$("input[type=checkbox]",this).each(function(){communicationTypeId=0;if($(this).hasClass("sms")){communicationTypeId=1}else if($(this).hasClass("email")){communicationTypeId=2}else if($(this).hasClass("push")){communicationTypeId=3}var c={axsUserCommunicationId:data.communicationTypes[communicationTypeId].axsUserCommunicationId,optinTypeId:data.optinTypeId,communicationTypeId:communicationTypeId,deviceId:null,isActive:$(this).is(":checked")};communicationsData.push(c)})});axs.Global.setUserCommunications(communicationsData,callback,hideAlert)},refreshCommunicationsPreferences:function(response,hideAlert){if(hideAlert==null||hideAlert=="undefined"||hideAlert==true){if(typeof isMobile!=="undefined"){var message=myAxsTranslations.pages.accountInformation.updateMessage;message=message.replace("%type%",myAxsTranslations.pages.myCommunications.notificationPreference);axs.Core.UI.Alert.show(message)}else axs.users.messageBox()}var communicationIds=new Array;$.each(response,function(index,value){if(typeof communicationIds[value.optinTypeId]==="undefined")communicationIds[value.optinTypeId]=new Array;if(typeof communicationIds[value.optinTypeId][value.communicationTypeId]==="undefined")communicationIds[value.optinTypeId][value.communicationTypeId]=new Array;communicationIds[value.optinTypeId][value.communicationTypeId]["axs-user-comm-id"]=value.axsUserCommunicationId;communicationIds[value.optinTypeId][value.communicationTypeId]["is-active"]=value.isActive});$(".communications-container").each(function(index,container){var communicationData=JSON.parse(container.attributes["data-communicationsdata"].value);$.each(communicationData.communicationTypes,function(communicationTypeId,communication){var axsUserCommId=0;var isActive=false;if(typeof communicationIds[communicationData.optinTypeId][communicationTypeId]!=="undefined"){axsUserCommId=communicationIds[communicationData.optinTypeId][communicationTypeId]["axs-user-comm-id"];isActive=communicationIds[communicationData.optinTypeId][communicationTypeId]["is-active"]}communication.axsUserCommunicationId=axsUserCommId;communication.isActive=isActive});$(this).attr("data-communicationsdata",JSON.stringify(communicationData));$(this).data("communicationsdata",communicationData)})},setUserCommunications:function(communicationsData,callback,hideAlert){var user=null,error=null;$.ajax({type:"POST",url:Routing.generate("api_proxy_user_communications",{csrf_token:$("#hdn_csrf_token").val()}),data:JSON.stringify(communicationsData),dataType:"json",success:function(data){if(data.error){if(data.error_description)error=data.error_description;else error=data.error}else{user=data;if(callback){callback.call(undefined,data,hideAlert)}}},error:function(req,status,error){if(error)error=error;else error="System error.  Please try again later."}});var retval={user:user,error:error};return retval},communicationsToggleButtonState:function(){axs.Global.communicationsAddPreviousValues();$("#edit-mobile-number").on("cancel",function(){axs.Global.resetCommunicationsForm()});$(".add-sms-alerts").addClass("is-inactive");$("#form-myaxs-communications-sms-alerts .add-sms-alerts").off("click.updateNumber");$(".btn-save_communication-info").removeClass("is-inactive");axs.Global.addCommunicationsInfoClickEvent();var userPhone=$("#user-phone");var userPhoneValue=userPhone.val();userPhone.add("#sms_terms_checkbox").on("blur keyup change",function(){if(userPhone.val()!=userPhoneValue){$(".btn-save_communication-info").addClass("is-inactive");$(".btn-save_communication-info").off("click");$("#terms-conditions-container").removeClass("hidden");axs.Global.addSMSAlertsClickEvent()}else{$(".btn-save_communication-info").removeClass("is-inactive");axs.Global.addCommunicationsInfoClickEvent();if(userPhoneValue){$("#terms-conditions-container").addClass("hidden")}$("#form-myaxs-communications-sms-alerts .add-sms-alerts").off("click.updateNumber")}})},addCommunicationsInfoClickEvent:function(){var $saveButton=$(".btn-save_communication-info");$saveButton.off("click");$saveButton.on("click",function(){axs.Global.saveCommunicationsCheckBoxes(true)})},addSMSAlertsClickEvent:function(){var $smsForm=$("#form-myaxs-communications-sms-alerts");var isTermsAccepted=$("#sms_terms_checkbox").is(":checked");var $button=$("#form-myaxs-communications-sms-alerts .add-sms-alerts");$button.off("click.updateNumber").removeClass("is-inactive");if($smsForm.length&&isTermsAccepted&&$smsForm.valid()){$button.on("click.updateNumber",function(e){e.preventDefault();var $phoneNumber=$("#user-phone");var alertMessage="Your Mobile Number has been added. Click the Mobile Help link for more information";function updateNumber(successCallback){if(axs.Global.updateUserPhoneNumber(e)){axs.Global.communicationsAddPreviousValues();$(".sms").each(function(){var optinTypeId=$(this).attr("id").substring($(this).attr("id").lastIndexOf("-")+1);if($($phoneNumber).val().length>0&&optinTypeId!=1){$(this).removeAttr("disabled")}else{$(this).attr("disabled","disabled").removeAttr("checked")}});if($phoneNumber.val()){if($(".add-sms-alerts").text()=="Add SMS Alerts"){if(typeof isMobile!=="undefined"){axs.Global.autoSetSMSNotificationsOn()}else{axs.Global.enableSMSAlerts();axs.Global.saveCommunicationsCheckBoxes(false)}}$(".add-sms-alerts").text("Update Number");$("#user-phone").rules("remove","required");$("#terms-conditions-container").addClass("hidden")}else{$(".add-sms-alerts").text("Add SMS Alerts");$("#user-phone").rules("add",{required:true});if(typeof isMobile!=="undefined"){axs.Global.autoSetSMSNotificationsOff()}else{axs.Global.saveCommunicationsCheckBoxes(false)}}$("#sms_terms_checkbox").attr("checked",false);axs.Global.communicationsToggleButtonState();successCallback&&successCallback()}}function mobileUpdateNumberSuccessCallback(){axs.Global.resetCommunicationsForm();axs.Core.loadingScreen.hide();axs.Core.UI.Alert.show(alertMessage,null,2e3)}function responsiveUpdateNumberSuccessCallback(){axs.users.messageBox();axs.Core.loadingScreen.hide()}if(typeof isMobile!=="undefined"){axs.Core.loadingScreen.show(function(){updateNumber(mobileUpdateNumberSuccessCallback)})}else{axs.Core.loadingScreen.show(function(){updateNumber(responsiveUpdateNumberSuccessCallback)})}})}else{$button.addClass("is-inactive")}},enableSMSAlerts:function(){$(".sms").each(function(){if($(this).attr("disabled")==undefined){$(this).attr("checked",true)}})},enableCommunicationsValidation:function(){$("#form-myaxs-communications-sms-alerts").validate({rules:{user_phone:{phoneUS:true},sms_terms:{required:true,minlength:1,maxlength:1}},messages:{user_phone:{required:"Enter your mobile number."},sms_terms:{required:"Please agree to the Terms & Conditions",minlength:"Please agree to the Terms & Conditions",maxlength:"Please agree to the Terms & Conditions"}},errorElement:"div",errorPlacement:function(error,element){if($(element).hasClass(this.errorClass)){error.insertBefore($(element).parent()).addClass("error-message")}},success:function(element){$(element).parent().prev("."+this.errorClass).remove()}});var userPhone=$("#user-phone");if(userPhone[0]&&!userPhone.val()){userPhone.rules("add",{required:true})}},communicationsAddPreviousValues:function(){$("#user-phone").attr("previous",$("#user-phone").val())},resetCommunicationsForm:function(){$("#user-phone").val($("#user-phone").attr("previous"));$("#sms_terms_checkbox").attr("checked",false);$("#terms-conditions-container").addClass("hidden");$("#form-myaxs-communications-sms-alerts").validate().resetForm();if($("#user-phone").val()){$("#help-txt-message").show();$("#update-mobile-number-description").show();$("#mobile-number-title").show();$("#btn-edit-mobile-number-label").show();$("#btn-edit-mobile-number-label").html("<p class='ui-li-desc'><b>Mobile Number: </b><br/>"+$("#user-phone").val()+"</p>");$("#add-mobile-number-description").hide();$("#mobile-number-title-example").hide();$("#btn-add-mobile-number-label").hide()}else{$("#help-txt-message").hide();$("#update-mobile-number-description").hide();$("#mobile-number-title").hide();$("#btn-edit-mobile-number-label").hide();$("#add-mobile-number-description").show();$("#mobile-number-title-example").show();$("#btn-add-mobile-number-label").show()}axs.Global.communicationsToggleButtonState()},submitResetPasswordRequest:function(){var transitionToConfirmation=function(){$("#myaxs_container_pwlost").hide();$("#myaxs_container_pwsent").show()};$("form#myaxs-reset-pwd-request-form").validate({rules:{reset_pwd_email:{required:true,email:true}},messages:{reset_pwd_email:{required:myAxsTranslations.pages.forgotPassword.request.emptyEmailError,email:myAxsTranslations.pages.accountInformation.formFields.email.validationMessages.required}},errorClass:"is-error",errorPlacement:function(error,element){var originalLabel=$(element).closest("form").find("label[for="+element[0].id+"]");if(originalLabel.length){originalLabel.hide();error.insertBefore(originalLabel)}},success:function(error){if(error.siblings("label").length){error.siblings("label").show();error.remove()}}});$("form#myaxs-reset-pwd-request-form").on("submit",function(e){e.preventDefault();$("div#myaxs-reset-pwd-request-form-error").html("");var data={};data.email=$("input#reset_pwd_email").val();if(typeof $("#axsClientId")[0]!=="undefined"&&$("#axsClientId").val()!==""){data.axsClientId=$("#axsClientId").val();data.clientId=$("#clientId").val();data.callback=$("#callbackUrl").val();data.skin=$("#skin").val()}$apiURL=$("form#myaxs-reset-pwd-request-form").attr("action");if(!$apiURL){$apiURL=Routing.generate("api_proxy_send_forgot_email_link",{_locale:locale},true)}axs.Core.loadingScreen.show(function(){$.ajax({type:"POST",async:true,url:$apiURL,dataType:"json",data:JSON.stringify(data),success:function(data){if(data.success){axs.Core.loadingScreen.hide()}else if(data.error&&data.invalid_email){axs.Core.loadingScreen.hide();$("#reset-pwd-invalid-email-error").show()}else{axs.Core.loadingScreen.hide();$("#myaxs-reset-pwd-request-form-error").text(translations.error.systemError)}},error:function(req,status,error){axs.Core.loadingScreen.hide();$("#myaxs-reset-pwd-request-form-error").text(translations.error.systemError)}})})})},submitResetPassword:function(userId,axsClientId,token){var transitionToConfirmation=function(){$("#myaxs-reset-pwd-form").hide();$("#myaxs_container_reset_pwd_confirm").show()};jQuery.validator.addMethod("minVariety",function(value,element){return this.optional(element)||/[a-zA-Z]/g.test(value)&&/[\d]/g.test(value)},"Please use at least one character and one number");$("form#myaxs-reset-pwd-form").validate({rules:{reset_new_pwd:{required:true,minlength:8,minVariety:true},reset_confirm_pwd:{equalTo:"#reset_new_pwd"}},messages:{reset_new_pwd:{required:myAxsTranslations.pages.accountInformation.formFields.password.newPassword.validationMessages.required,minlength:$.validator.format(myAxsTranslations.pages.resetPassword.request.minLengthError),minVariety:myAxsTranslations.pages.resetPassword.request.minVarietyError},reset_confirm_pwd:{equalTo:myAxsTranslations.pages.accountInformation.formFields.password.confirmPassword.validationMessages.passwordMismatch}},errorClass:"is-error",errorPlacement:function(error,element){var originalLabel=$(element).parent().find("label");if(originalLabel.length){originalLabel.hide();error.insertBefore(originalLabel)}},success:function(error){if(error.siblings("label").length){error.siblings("label").show();error.remove()}}});$("form#myaxs-reset-pwd-form").on("submit",function(e){e.preventDefault();if($("#myaxs-reset-pwd-form").valid()){axs.Core.loadingScreen.show(function(){var userPassCurrent=$("#reset_new_pwd").val();var userPassNew=$("#reset_confirm_pwd").val();var status=axs.Global.setUserPassToken(userPassNew,userPassCurrent,userId,axsClientId,token);axs.Core.loadingScreen.hide();if(status.response){if(status.response.success){transitionToConfirmation()}else if(status.response.error&&status.response.invalid_email){$("#reset-pwd-invalid-email-error").show()}else if(status.response.error&&status.response.invalid_token){$("#myaxs-reset-pwd-form-error").text(myAxsTranslations.pages.resetPassword.request.invalidToken)}else if(status.response.error&&status.response.invalid_password_confirmation){$("#myaxs-reset-pwd-form-error").text(myAxsTranslations.pages.resetPassword.request.invalidPasswordConfirmation)}else if(status.response.message){$("#myaxs-reset-pwd-form-error").text(status.response.message)}else{$("#myaxs-reset-pwd-form-error").text(translations.error.systemError)}}else{$("#myaxs-reset-pwd-form-error").text(translations.error.systemError)}})}})},mapLocale:function(locale){var mappedLocale=localeMapping[locale];if(mappedLocale==null){mappedLocale=locale}return mappedLocale},getLocationData:function($term){var cityData=null;$.ajax({url:Routing.generate("api_proxy_get_location_full")+"?term="+$term+"&csrf_token="+$("#hdn_csrf_token").val(),type:"get",dataType:"json",async:false,success:function(data){if(data&&!jQuery.isEmptyObject(data)){cityData=data}}});return cityData},partnerLogos:function(){var $partnerLogosContainer=$("#footer-partner-logos");var partnerLogos={amex:"#footer-partner-logos__amex",monster:"#footer-partner-logos__monster",renaissance:"#footer-partner-logos__renaissance-hotels",budweiser:"#footer-partner-logos__budweiser",verizon:"#footer-partner-logos__verizon"};function removeAllLogos(){$partnerLogosContainer.remove()}function keepOnlyLogos(logosToKeep){var allLogos=[];for(var logo in partnerLogos){allLogos.push(partnerLogos[logo])}var $allLogos=$(allLogos.join(","));var $logosToKeep=$(logosToKeep.join(","));$allLogos.not($logosToKeep).remove()}if($.cookie("axs_geo_static_v1")){switch($.cookie("axs_geo_static_v1").split(":")[0]){case"GB":case"SE":keepOnlyLogos([partnerLogos.amex,partnerLogos.renaissance]);break}}if(axs.utilities.getQueryVal("skin")){switch(axs.utilities.getQueryVal("skin")){case"ogden":case"mountainwinery":removeAllLogos();break;case"o2priority":$(partnerLogos.amex).remove();break;case"livenationse":$(partnerLogos.amex).remove();break;case"sprintcenter":$(partnerLogos.verizon).remove();break}}}}}();(function($){$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(this.name.indexOf("-")!=-1){var split=this.name.split("-");var p={};p[split[1]]=this.value;o[split[0]]=p}else o[this.name]=this.value||""});return o};$.fn.values=function(data){var els=$(this).find(":input").get();if(typeof data!="object"){data={};$.each(els,function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))){data[this.name]=$(this).val()}});return data}else{$.each(els,function(){if(this.name&&data[this.name]){if(this.type=="checkbox"||this.type=="radio"){$(this).attr("checked",data[this.name]==$(this).val())}else{$(this).val(data[this.name])}}});return $(this)}};String.prototype.reverse=function(){var s="";var i=this.length;while(i>0){s+=this.substring(i-1,i);i--}return s}})(jQuery);
var axs=window.axs||{};(function keycombo($,namespace){function KeyCombo(options){var defaults={logKeys:false,combos:[]};var settings=$.extend({},defaults,options);var $document=$(document),eventNamespace,keysPressed=[],combos=settings.combos;function addPressedKey(e){var keycode=e.keyCode;if(keysPressed.indexOf(keycode)===-1){keysPressed.push(keycode)}matchKeysPressed();if(settings.logKeys){console.log("=======================");console.log("key pressed: "+keycode);console.log("current keys: "+keysPressed)}}function removePressedKey(e){var keycode=e.keyCode,keypressIndex=keysPressed.indexOf(keycode);if(keypressIndex>-1){keysPressed.splice(keypressIndex,1)}}function matchKeysPressed(){if(combos.length){for(var i in combos){var thisCombo=combos[i];var thisKeys=thisCombo[0];var thisCallback=thisCombo[1];var doCallback=true;if(thisKeys!=undefined&&thisKeys.length){for(var i in thisKeys){var key=thisKeys[i];if(keysPressed.indexOf(key)===-1){doCallback=false;break}}}if(doCallback){if(typeof thisCallback!=="function"){thisCallback=function(){}}thisCallback()}}}}function initialize(){eventNamespace=".keycombo_"+Math.ceil(Math.random()*100);$document.on("keydown"+eventNamespace,function(e){addPressedKey(e)}).on("keyup"+eventNamespace,function(e){removePressedKey(e)})}function getCombos(){return combos}function addCondition(keys,callback){combos.push([keys,callback])}function unbindKeypress(){$document.off("keydown"+eventNamespace).off("keyup"+eventNamespace)}initialize();return{combos:getCombos,add:addCondition,unbind:unbindKeypress}}namespace.KeyCombo=KeyCombo})(window.jQuery,axs);
var axs=window.axs||{};axs.Location=function(){var $form=$("#location-form"),$input=$("#location_input"),$submitTrigger=$form.find("button");function locationInit(){if($input.length>0){axs.Global.initLocationAutoComplete($input)}}function locationSubmitHandling(){$submitTrigger.click(function(){$form.submit()});$form.on("submit",function(e){if($input.val()===""){e.preventDefault();return false}axs.Global.setLocation(e,$input)})}function locationSearch(){var $form=$("#location-search-form");var $inputField=$("#location-search__form-input");var noResultMessage=$("#location-search__no-result");$form.on("submit",function(e){if($inputField.val()===""){e.preventDefault();return false}axs.Global.setLocation(e,$inputField)});var options={adjustWidth:false,getValue:"label",requestDelay:300,hideOnNoFocus:false,preventDefaultOnEnter:false,url:function(uriTerm){return Routing.generate("autocomplete_locations")+"?term="+uriTerm},list:{maxNumberOfElements:100,match:{enabled:true},onShowListEvent:function(){noResultMessage.hide()},onLoadEvent:function(){if($inputField.val().length>0){noResultMessage.show()}}},template:{type:"custom",method:function(value,item){var itemLink=Routing.generate("location_set_geo")+"?city="+item.label+"&id="+item.id+"&referrer="+window.location.href;itemLink=window.encodeURI(itemLink);if(item.label=="Stockholm, AB, Sweden"){item.label="Stockholm, Sweden"}return"<a class='location-result__row' href="+itemLink+" >"+"<div class='display-table-cell'>"+"<div class='search-result__label'>"+item.label+"</div>"+"</div>"+"<div class='display-table-cell align-right'><svg class='svg-icon--location--lg'><use xlink:href='#svg-icon-location'></use></svg></div>"+"</a>"}}};$inputField.easyAutocomplete(options)}return{locationInitialize:function(){locationInit();locationSubmitHandling();locationSearch()}}}();
(function($,window,document,namespace){var modalData="axsModal";var ListOfModals=[];$.fn.axsModal=function(options){this.each(function(){if(!$(this).data(modalData)){$(this).data(modalData,new Modal(this,options))}});var modal=$(this).data(modalData);if(modal){ListOfModals.push(modal)}return modal};function Modal(modal,options){var defaults={triggers:null,hideBtns:".js-close-modal",onShow:null,onClose:null,oldModal:true,showNonClosableModal:false};var settings=$.extend({},defaults,options);var $document=$(document),$body=$("body"),$newModalWrapper=$("#page-modal-wrapper"),$navItems=$(".nav-item"),modalStatus="modal-open",classModalContainer=".modal-container",classModal=".modal",classNewModal="new-modal",classNewModalInnerContainer=".new-modal__inner-container",escapeEvent="keyup.escapeModal";var $modal,$hideBtns,$triggers;function scopeElements(){$modal=$(modal);if(settings.triggers){$triggers=$(settings.triggers)}if(settings.hideBtns){$hideBtns=$modal.find(settings.hideBtns)}}function getModal(){return $modal}function bindEvents(){if(settings.showNonClosableModal){$hideBtns.addClass("is-hidden")}else{$hideBtns.on("click.hideModal",function(){cancelModal()})}if($triggers){$triggers.on("click.showModal",function(){triggerModal()})}}function bindCancelEvents(){$document.on(escapeEvent,function(event){if(event.keyCode===27){cancelModal()}});if(settings.oldModal){axs.utilities.outsideClick.bind($modal.find(classModal),cancelModal)}else{axs.utilities.outsideClick.bind($modal.find(classNewModalInnerContainer),cancelModal)}}function unbindCancelEvents(){$document.off(escapeEvent);axs.utilities.outsideClick.unbind()}function showModal(callback){if($(classModalContainer).is(":visible")){hideOtherModals()}$body.addClass(modalStatus);if(settings.oldModal===true){$body.removeClass(classNewModal);$modal.show()}else{$body.addClass(classNewModal);if($body.hasClass("drawer-open")){$modal.prependTo($body).show()}else{$modal.prependTo($newModalWrapper).show()}}if(!settings.showNonClosableModal){bindCancelEvents()}callback&&callback()}function hideModal(callback,ev){$navItems.removeClass("is-active");if(!!ev===false||ev.target&&$(ev.target).closest("#global-nav").length===0){$body.removeClass(modalStatus+" "+classNewModal);$modal.hide()}unbindCancelEvents();callback&&callback()}function triggerModal(){showModal(settings.onShow)}function cancelModal(ev){hideModal(settings.onClose,ev)}function hideOtherModals(){unbindCancelEvents();$(classModalContainer).filter(":visible").hide()}function updateModal(options){settings=$.extend(settings,options)}function showPermanentModal(callback){showModal(callback);unbindCancelEvents()}scopeElements();bindEvents();return{show:showModal,hide:hideModal,update:updateModal,showPermanent:showPermanentModal,element:getModal()}}namespace.modalManager=function(){function ModalManager(){var modals={};function listModals(){return ListOfModals}function getModal(name){return modals[name]}function registerModal(name,modal){if(!modals[name]){modals[name]=modal}}function hideAllModals(){$.each(listModals(),function(){$(this)[0].hide()})}return{list:listModals,get:getModal,register:registerModal,hideAll:hideAllModals}}return new ModalManager}()})(window.jQuery,window,document,window.axs||{});
(function($){var o=$({});$.subscribe=function(){o.on.apply(o,arguments)};$.unsubscribe=function(){o.off.apply(o,arguments)};$.publish=function(){o.trigger.apply(o,arguments)}})(window.jQuery);(function($,namespace){function PubSubManager(){var subscribers={},published={};function subscribe(subscriber,event,callback){if(!subscribers[subscriber]){$.subscribe(event,callback);subscribers[subscriber]={};subscribers[subscriber]["event"]=event;subscribers[subscriber]["callback"]=callback}}function unsubscribe(subscriber){if(subscribers[subscriber]){$.unsubscribe(subscribers[subscriber]["event"]);delete subscribers[subscriber]}}function publish(event,dataObj){$.publish(event,dataObj);published[event]=dataObj}function getSubscriptions(subscriber){if(subscriber){return subscribers[subscriber]}else{return subscribers}}function getPublished(content){if(content){return published[content]}else{return published}}return{subscribe:subscribe,unsubscribe:unsubscribe,publish:publish,getSubscriptions:getSubscriptions,getPublished:getPublished}}namespace.pubsub=new PubSubManager})(window.jQuery,window.axs||{});
var axs=window.axs||{};axs.Search=function(){var REQUEST_DELAY=300;var $html=$("html");var $body=$("body");var $LocationTrigger=$(".search-bar__location-trigger");var $LocationInput=$(".search-bar__location-input");var $searchInput=$(".search-bar__input");var $homepageSearchInput=$("#homepageSearchInput");var $navbarSearchInput=$("#navbarSearchInput");var $homepageLocationInput=$("#homepageLocationInput");var $navbarLocationInput=$("#navbarLocationInput");var locationResultsContainerClass=".search-bar__location-results-container";var locationSearchIsOpen=false;var searchIsOpen=false;var clickEvent=Modernizr.touchevents?"touchstart":"mousedown";function rowClick(){$(".results-table [data-href]").each(function(){$(this).off("click.rowclick");$(this).on("click.rowclick",function(e){e.preventDefault();window.location=$(this).data("href")})});$("#global-search-form, #nav-search-bar, #homepage-search-bar").on("click","a",function(e){adobe.target.trackEvent({mbox:"globalSearchClick"})})}function getHistory(){var cookie_data=$.cookie("axs_search");var data=[];if(cookie_data){$.each(cookie_data.split(/\:/),function(i,val){data.push({label:val,type:"history",link:axs.utilities.generateURL("search_index",{_locale:locale,q:$.trim(val)})})})}return data}function clearHistory(){$.removeCookie("axs_search",{path:"/",domain:window.axs.Core.cleanDomainName(window.location.hostname)})}function getEventStatusIndicator(statusId){var className=null;var ctaLabel=null;switch(statusId){case 2:className="cancelled";ctaLabel=translations.cta.tags.cancelled;break;case 5:case 37:className="postponed";ctaLabel=translations.cta.tags.postponed;break;case 6:className="rescheduled";ctaLabel=translations.cta.tags.rescheduled;break;case 36:className="suspended";ctaLabel=translations.cta.tags.suspended;break;case 38:className="rescheduled";ctaLabel=translations.cta.tags.rescheduledNewDateAndVenue;break;case 11:className="rescheduled";ctaLabel=translations.cta.tags.venueChange;break}if(!className){return""}className="btn-event-status btn-event-status-"+className;return"<span class='"+className+"' style='margin-left:10px;display:inline;'>"+ctaLabel+"</span>"}function init(){function getSearchResultLength(){return $("#eac-container-global-search__form-input ul li").length}var historyResult=getHistory();var $inputField=$("#global-search__form-input");var $noResultMessage=$("#global-search__no-result");var $noHistoryMessage=$("#global-search__no-search");var $searchHistoryContainer=$("#global-search__history-container");var $searchResultContainer=$("#global-search__result-container");var searchPayload="";var options={listLocation:function(payload){searchPayload=payload;return payload.results},getValue:"label",requestDelay:REQUEST_DELAY,adjustWidth:false,hideOnNoFocus:false,preventDefaultOnEnter:false,localDataLengthMatch:2,showDefaultListOnFocus:true,data:{results:historyResult},url:function(uriTerm){return generateSearchUrl(uriTerm)},list:{maxNumberOfElements:100,hideOnEmptyPhrase:false,match:{enabled:false},onShowListEvent:function(){if(getSearchResultLength()!==0){$noHistoryMessage.hide();$noResultMessage.hide()}if(searchPayload.event_count>5&&$("#viewAllEventsBtn").length===0){var searchUrl=axs.utilities.generateURL("search_index",{q:$inputField.val()});$('[data-result-type="search-result--event"]').last().closest("li").append(""+"<div id='viewAllEventsBtn' class='center-text h-border-bottom'> "+"<a class='link-standalone' style='padding:20px' href="+searchUrl+"> "+translations.viewAll+"</a>"+"</div>"+"")}},onLoadEvent:function(){if($inputField.val().length===0&&getSearchResultLength()===0){$noResultMessage.hide();$noHistoryMessage.show()}else if($inputField.val().length>2&&getSearchResultLength()===0){$noHistoryMessage.hide();$noResultMessage.show()}else if($inputField.val().length<=2&&getSearchResultLength()===0){$noHistoryMessage.hide();$noResultMessage.hide()}},suppressMouseOverBehaviour:true},template:{type:"custom",method:function(value,item){if(item.type==="history"){$searchHistoryContainer.show();$searchResultContainer.hide()}else{$searchHistoryContainer.hide();$searchResultContainer.show()}var dataType="search-result--"+(item.category||"history");var itemCategory=item.category||"";var itemLabel="";if(item.label){itemLabel=item.type=="history"?axs.utilities.escapeHtml(item.label):item.label}var itemVenue=item.venue||"";var itemDateTime=item.datetime||"";var eventStatusIndicator="";if(itemCategory==="event"){eventStatusIndicator=getEventStatusIndicator(item["ticketing_status_id"])}return"<a class='search-result__row' data-result-type="+dataType+" href="+item.link+" >"+"<div class='display-table-cell'>"+"<div class='search-result__category search-result__date'>"+itemDateTime+eventStatusIndicator+"</div>"+"<div class='search-result__label'>"+itemLabel+"</div>"+"<div class='search-result__description'>"+itemVenue+"</div>"+"</div>"+"<div class='display-table-cell align-right'><svg class='svg-icon--right'><use xlink:href='#svg-icon-right'></use></svg></div>"+"</a>"}}};$inputField.easyAutocomplete(options);var $showClearHistory=$(".show-clear-history-options-js-trigger");var $clearHistoryWrapper=$(".clear-history-wrapper");var $clearHistory=$(".clear-history-js-trigger");var $cancelClearHistory=$(".cancel-clear-history-js-trigger");$showClearHistory.click(function(){$(this).hide();$clearHistoryWrapper.addClass("clear-history-wrapper-expanded")});$clearHistory.click(function(){$searchHistoryContainer.hide();$searchResultContainer.show();clearHistory();init();$inputField.focus()});$cancelClearHistory.click(function(){$showClearHistory.show();$clearHistoryWrapper.removeClass("clear-history-wrapper-expanded")})}function newSearchInit(){var source=$("#search-results-template").html();var template=Handlebars.compile(source);var timeout;$searchInput.on(clickEvent,function(e){e.preventDefault();var $this=$(this);if($this.is($homepageSearchInput)){if(axs.UIFramework.getBreakpoint()==="mobile-view"){axs.UIFramework.attachNav();$body.addClass("display-nav-search-bar");$navbarSearchInput.trigger(clickEvent);return}else{$this.focus();closeSearchBar()}}else{$this.focus();if(axs.UIFramework.getBreakpoint()!=="mobile-view"){closeSearchBar()}}$html.addClass("overflow-hidden-mobile");$body.addClass("search-bar-animation").addClass("search-bar-is-open");if($this.val().length<3){displaySearchHistory($this)}searchIsOpen=true;$(this).parent().find(".search-bar__results").removeClass("is-hidden")});axs.utilities.outsideClick.bind($searchInput.parent(),function(e){if(!locationSearchIsOpen){$html.removeClass("overflow-hidden-mobile");$body.removeClass("search-bar-animation");$(window).scroll()}$body.removeClass("search-bar-is-open");searchIsOpen=false;$searchInput.parent().find(".search-bar__results").addClass("is-hidden")},"mousedown.outsideSearchBar",false);$(".js-close-search-bar-results").on(clickEvent,function(e){e.preventDefault();if(locationSearchIsOpen){locationSearchIsOpen=false;$body.removeClass("location-search-is-open");$navbarSearchInput.trigger(clickEvent);$LocationInput.closest(locationResultsContainerClass).addClass("is-hidden");return}else{closeSearchBar()}});$searchInput.on("change paste keyup",function(){clearTimeout(timeout);var $this=$(this);var q=$this.val();if(q.length>2){timeout=setTimeout(function(){var url=generateSearchUrl(q);$.get(url).done(function(res){if(res.results){res.results.forEach(function(item){item.eventStatusIndicator=getEventStatusIndicator(item.ticketing_status_id);item.label=axs.utilities.unescapeHtml(item.label)});res.resultsByCategory=splitSearchResultsByCategory(res.results);res.moreEventsLink=axs.utilities.generateURL("search_index",{q:q});var html=template(res);$this.parent().find(".search-bar__results").removeClass("is-hidden").empty().append(html)}})},REQUEST_DELAY)}else{displaySearchHistory($this)}})}function splitSearchResultsByCategory(arr){var splitByCategory=function(arr,category){return arr.filter(function(el){return el.category===category})};return{events:splitByCategory(arr,"event"),performers:splitByCategory(arr,"performer"),venues:splitByCategory(arr,"venue"),articles:splitByCategory(arr,"article")}}function newLocationSearchInit(){var source=$("#search-location-template").html();var template=Handlebars.compile(source);var timeout;$LocationTrigger.on(clickEvent,function(e){e.preventDefault();var $targetEl=$(e.target).closest(".search-bar__results-item");if($targetEl.length){window.location.href=$targetEl.attr("href")}if(axs.UIFramework.getBreakpoint()!=="mobile-view"){closeSearchBar()}$html.addClass("overflow-hidden-mobile");$body.addClass("search-bar-animation").addClass("location-search-is-open");locationSearchIsOpen=true;var $parentSearchBar=$(this).closest(".search-bar");$parentSearchBar.find(locationResultsContainerClass).removeClass("is-hidden");setTimeout(function(){$parentSearchBar.find($LocationInput).focus()})});axs.utilities.outsideClick.bind($LocationTrigger,function(e){if(!searchIsOpen){$html.removeClass("overflow-hidden-mobile");$body.removeClass("search-bar-animation");$(window).scroll()}$body.removeClass("location-search-is-open");locationSearchIsOpen=false;$LocationInput.closest(locationResultsContainerClass).addClass("is-hidden")},"mousedown.outsideLocationSearchBar",false);$LocationInput.on("change paste keyup",function(){clearTimeout(timeout);var $this=$(this);timeout=setTimeout(function(){var q=$this.val();var url=Routing.generate("autocomplete_locations")+"?term="+q;$.get(window.encodeURI(url)).done(function(res){if(res){res.forEach(function(item){item.link=createGeoLocationUrl(item.label,item.id)});var html=template(res);$this.closest(locationResultsContainerClass).find(".search-bar__location-results").removeClass("is-hidden").empty().append(html)}})},REQUEST_DELAY)})}function createGeoLocationUrl(city,id){var itemLink=Routing.generate("location_set_geo")+"?city="+city+"&id="+id+"&referrer="+window.location.href;return window.encodeURI(itemLink)}function removeSearchHistory(el){clearHistory();$(el).closest(".search-bar").find($searchInput).trigger(clickEvent)}var displaySearchHistory=function(){var source=$("#search-history-template").html();return function($el){var historyResult=getHistory();if(historyResult){var template=Handlebars.compile(source);var html=template(historyResult);$el.parent().find(".search-bar__results").removeClass("is-hidden").empty().append(html)}}}();function generateSearchUrl(uriTerm,rows){rows=rows||100;var search_params="?term="+encodeURIComponent(uriTerm)+"&rows="+rows;if($.cookie(geoTypes.Geo_Dynamic)){var geo_data=$.cookie(geoTypes.Geo_Dynamic).split(":");search_params+="&country="+(geo_data[0]?geo_data[0]:"");search_params+=geo_data[5]?"&latitude="+geo_data[5]:"";search_params+=geo_data[6]?"&longitude="+geo_data[6]:""}else{search_params+="&country=''"}return axs.utilities.generateURL("search_autocomplete_index",{_locale:locale})+search_params}function homepageSearchBannerInit(){var $homepageSearchBar=$("#homepage-search-bar");$(window).scroll(function(){if($homepageSearchBar.visible()){if(!searchIsOpen&&!locationSearchIsOpen){$body.removeClass("display-nav-search-bar")}}else{$body.addClass("display-nav-search-bar")}})}function closeSearchBar(){$html.removeClass("overflow-hidden-mobile");$body.removeClass("search-bar-animation").removeClass("location-search-is-open").removeClass("search-bar-is-open");locationSearchIsOpen=false;searchIsOpen=false;$LocationInput.closest(locationResultsContainerClass).addClass("is-hidden");$searchInput.parent().find(".search-bar__results").addClass("is-hidden");$(window).scroll()}return{initialize:function(){rowClick();init();newSearchInit();newLocationSearchInit()},removeSearchHistory:removeSearchHistory,homepageSearchBannerInit:homepageSearchBannerInit}}();
(function($,namespace){var $body=$("body");function TakeoverSkin(){var cssProdPath=skinPath+"/takeover/",cssLocalPath="https://localhost/axs/bundles/aegaxs/takeovers/",cssExtention=".theme.css",cssId="takeover-css-link",$clickable=$("body, #page-relative-block, .ad-top-leaderboard"),$topAds=$(".ad-top-leaderboard, #ad-leaderboard"),delay=500,clickEvent="click.takeover",takeoverIsActive=false,takeoverTestIsActive=false,disableOnLocalMachine=true,disableTakeovers=false,testSettings,tName,tUrl,cssHref,$css,takeoverTimeout;function setVariables(){tName=takeover_name;tUrl=takeover_url;cssHref=cssProdPath+tName+"/"+tName+cssExtention;setCssLink(cssHref)}function setCssLink(href){$css=$('<link id="'+cssId+'" rel="stylesheet" type="text/css" media="screen" href="'+href+'">')}function setTakeover(){if(isActive()){$body.prepend($css);$clickable.on(clickEvent,function(e){if(e.target===this){window.open(tUrl)}});axs.pubsub.publish("takeoverSkin",{active:true});var carousels=$("*").filter(function(){return $(this).data("axs-carousel")!==undefined});if(carousels.length){carousels.each(function(){if($(this).data("is-loaded")){$(this).data("axs-carousel").reset()}})}takeoverIsActive=true}}function setTakeoverTimeout(callback){takeoverTimeout=setTimeout(callback,delay)}function resizeTimeoutCallback(){if(takeoverTestIsActive){setTestVariables();setTakeover()}else{attemptTakeover(setTakeover)}}function removeTakeover(){if(takeoverIsActive){resetVariables();removeTakeoverElements()}}function disableAllTakeovers(){disableTakeovers=true}function resetVariables(){takeover_name=undefined;takeover_url=undefined;tName=false;tUrl=false}function evaluateWindow(){return $(window).width()>750}function isActive(){return tName&&tUrl&&!takeoverIsActive&&!disableTakeovers}function setTestVariables(options){var defaults={takeover_name:"monsteradidas",takeover_url:"http://www.google.com",local:true,cssHref:false};testSettings=testSettings&&!options?testSettings:$.extend(defaults,options);tName=testSettings.takeover_name;tUrl=testSettings.takeover_url;if(testSettings.cssHref){cssHref=testSettings.cssHref}else{cssHref=testSettings.local?cssLocalPath+tName+"/"+tName+cssExtention:cssProdPath+tName+"/"+tName+cssExtention}setCssLink(cssHref)}function removeTakeoverElements(){$topAds.children().remove();$("#"+cssId).remove();$clickable.off(clickEvent);takeoverIsActive=false;axs.pubsub.publish("takeoverSkin",{active:false})}function initTestTakeover(options){takeoverTestIsActive=true;disableOnLocalMachine=false;disableTakeovers=false;removeTakeover();setTestVariables(options);initialize()}function attemptTakeover(callback){var attemptCount=0;clearTimeout(timeoutCallback);var timeoutCallback=function(){if(attemptCount<5){if(checkForVariables()){setVariables();callback&&callback()}else{attemptCount++;setTakeoverTimeout(timeoutCallback)}}};setTakeoverTimeout(timeoutCallback)}function checkForVariables(){return typeof takeover_name!=="undefined"||typeof takeover_url!=="undefined"}function bindEvents(){$(window).on("resize.takeover",function(){clearTimeout(takeoverTimeout);if(evaluateWindow()){setTakeoverTimeout(resizeTimeoutCallback)}else{removeTakeover()}})}function initialize(){if(disableOnLocalMachine&&window.location.href.indexOf("localhost")>-1){disableAllTakeovers()}if(takeoverTestIsActive){setTakeover()}else{attemptTakeover(setTakeover)}bindEvents()}initialize();return{remove:removeTakeover,test:initTestTakeover,block:disableAllTakeovers}}namespace.ExtendTakeover=TakeoverSkin})(window.jQuery,window.axs||{});
(function($,namespace){function ticker(options){var defaults={container:".ticker",content:".ticker-content",dur:6e3,autoStart:true};var settings=$.extend({},defaults,options);var $container=settings.container instanceof jQuery?settings.container:$(settings.container),$content=settings.content instanceof jQuery?$container.find(settings.content):$(settings.content,$container),offsetIncrement=$content.parent().height(),contentHeight=$content.outerHeight(),offset=0,eventName="tickerHover",tickerActive=false,tickerInterval=null;function offsetContent(){offset+=offsetIncrement;offset=offset>=contentHeight?0:offset;if(Modernizr.csstransitions){$content.css("top",-1*offset)}else{$content.animate({top:-1*offset},1e3)}}function updateContentHeight(){contentHeight=$content.outerHeight()}function shouldTickerStart(){if(contentHeight>offsetIncrement&&!tickerActive){return true}}function shouldTickerReset(){if(contentHeight<=offsetIncrement&&tickerActive){return true}}function init(){if(settings.autoStart){public_startTicker()}$(window).on("resize",function(){updateContentHeight();public_startTicker();if(shouldTickerReset()){public_resetTicker()}})}function public_startTicker(){if(shouldTickerStart()){tickerInterval=setInterval(offsetContent,settings.dur);tickerActive=true;public_bindEvents()}}function public_pauseTicker(){clearInterval(tickerInterval);tickerActive=false}function public_resetTicker(){public_pauseTicker();$content.css("top",0);public_unbindEvents()}function public_bindEvents(){$container.on("mouseenter."+eventName,function(){public_pauseTicker()});$container.on("mouseleave."+eventName,function(){public_unbindEvents();public_startTicker()})}function public_unbindEvents(){$container.off("mouseenter."+eventName).off("mouseleave."+eventName)}init();return{start:public_startTicker,pause:public_pauseTicker,reset:public_resetTicker,bind:public_bindEvents,unbind:public_unbindEvents}}namespace.Ticker=ticker})(window.jQuery,window.axs||{});
var axs=window.axs||{};axs.Twitter=function(){return{initialize:function(){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs)}}(document,"script","twitter-wjs")}}}();
(function($,namespace){var $html=$("html");var $body=$("body");function UIFramework(){var $nav=$("#global-nav"),$searchTrigger=$(".mobile-search-trigger"),$searchContainer=$("#global-search-container"),navOffsetTop=$nav.length&&$nav.offset().top,classNavIsAttached="nav-is-attached",desktopSize=1185,navIsAttachedStatus=false,$navPlaceholder;var s_pageDrawer="#global-menu-drawer",s_globalMenu="#global-menu",s_globalMenuCategories="#global-menu-categories",s_navGlobalMenu="#nav-global-menu-container",s_drawerTrigger="#global-menu-trigger",s_closeDrawerTrigger=".global-menu-close-trigger",s_globalSubMenu=".global-menu__submenu",s_globalSubMenuBack=".global-menu__submenu--back",s_navDesktopItem=".nav-item",s_subMenuWithChildren='li:has("'+s_globalSubMenu+'") > a',event_clickSubMenu="click.submenu",currentBreakpoint=getCurrentBreakpoint(),$pageDrawer=$(s_pageDrawer),$globalMenu=$(s_globalMenu),$globalMenuCategories=$(s_globalMenuCategories),$navGlobalMenu=$(s_navGlobalMenu),$drawerTrigger=$(s_drawerTrigger),$closeDrawerTrigger=$(s_closeDrawerTrigger),$navDesktopItem=$(s_navDesktopItem),classDrawerOpen="drawer-open",classBlockTrans="drawer-block-transition",classOpen="is-open",classNavLinkSelected="has-submenu-open",s_openSubmenu=s_globalSubMenu+"."+classOpen,browseMenuIsOpen,mobileSearchIsOpen;function updateNavStartingPosition(){navOffsetTop=$navPlaceholder&&$navPlaceholder.is(":visible")?$navPlaceholder.offset().top:$nav.offset().top}function evaluateAttachNav(){return $(window).scrollTop()>navOffsetTop}function attachNav(){$body.addClass(classNavIsAttached);if(!$navPlaceholder){$navPlaceholder=$('<div id="global-nav-placeholder"/>').insertAfter($nav)}var h=$nav.outerHeight();$navPlaceholder.height(h).show();navIsAttachedStatus=true}function detachNav(){$body.removeClass(classNavIsAttached);$navPlaceholder.hide();navIsAttachedStatus=false}function sharedOpenMenu($container){browseMenuIsOpen=true;if(!$container.find(s_globalMenu).length){$globalMenu.prependTo($container)}}function sharedCloseMenu(){browseMenuIsOpen=false}function openDrawerSubMenu($subMenu,$navLink){closeDrawerSubMenu();$navLink.addClass(classNavLinkSelected);$subMenu.addClass(classOpen);$subMenu.find(s_globalSubMenuBack).on(event_clickSubMenu,function(){closeDrawerSubMenu();$(this).off(event_clickSubMenu)})}function closeDrawerSubMenu(){var $allSubMenuCategories=$globalMenuCategories.find("li");$allSubMenuCategories.each(function(){$(this).find(s_globalSubMenu).removeClass(classOpen);$(this).find("."+classNavLinkSelected).removeClass(classNavLinkSelected)})}function openDrawer(){sharedOpenMenu($pageDrawer);$body.addClass(classDrawerOpen);axs.modalManager.hideAll();axs.utilities.outsideClick.bind($("#global-menu-drawer, .modal-container "),function(){closeDrawer()},"mousedown.outsideMobileMenu");$globalMenu.find(s_subMenuWithChildren).on(event_clickSubMenu,function(e){e.preventDefault();var $subMenu=$(this).parent().find(s_globalSubMenu);openDrawerSubMenu($subMenu,$(this))});$nav.cssTransitionEnd(function(){$body.addClass(classBlockTrans)})}function closeDrawer(){sharedCloseMenu();$body.removeClass(classDrawerOpen).removeClass(classBlockTrans);$globalMenu.find(s_subMenuWithChildren).off(event_clickSubMenu);closeDrawerSubMenu($globalMenu.find(s_openSubmenu))}function drawerInit(){$drawerTrigger.on("click",function(e){if(browseMenuIsOpen){closeDrawer()}else{openDrawer()}});axs.pubsub.subscribe("globalUsernameDisplay","update.userinfo",function(e,user){$(".user-name").text(user.first_name)})}function openMobileSearch(){var nh=$nav.outerHeight(),np=parseFloat($nav.css("padding-top"));$searchContainer.addClass(classOpen).css("top",nh-np);axs.utilities.outsideClick.bind($searchContainer.add($searchTrigger),closeMobileSearch);mobileSearchIsOpen=true}function closeMobileSearch(){$searchContainer.removeClass(classOpen).css("top","");axs.utilities.outsideClick.unbind();mobileSearchIsOpen=false}function layoutInit(){$globalMenu.find(s_subMenuWithChildren).addClass("has-submenu");$searchTrigger.on("click",function(){if(!$searchContainer.hasClass(classOpen)){openMobileSearch()}});drawerInit();$closeDrawerTrigger.click(closeDrawer);axs.pubsub.subscribe("navLocation","media.breakpoint",function(e,data){if(data.breakpoint==="desktop-view"){mobileSearchIsOpen&&closeMobileSearch();browseMenuIsOpen&&closeDrawer()}});var adjustDropdown=function(dropdown,input,navIsAttached){var $dropdown=dropdown instanceof jQuery?dropdown:$(dropdown);var $input=input instanceof jQuery?input:$(input);if($dropdown.is(":visible")){var offset=$input.offset().top+$input.outerHeight(true);offset=navIsAttached?offset-$(window).scrollTop():offset;$dropdown.css("top",offset)}};axs.pubsub.subscribe("mobileAutoComplete","navstatus",function(e,nav){if(nav.attach){attachNav();adjustDropdown("#search-autocomplete-menu","#q",nav.attach);adjustDropdown("#location-autocomplete","#location_input",nav.attach)}else{detachNav();adjustDropdown("#search-autocomplete-menu","#q",nav.attach);adjustDropdown("#location-autocomplete","#location_input",nav.attach)}});axs.pubsub.publish("media.breakpoint",{breakpoint:currentBreakpoint});publishNavState();$navDesktopItem.click(function(){$(this).addClass("is-active")})}function getCurrentBreakpoint(){return $html.css("font-family").replace(/'|"/g,"")}function evaluateBreakpoint(){var breakpointResult=$(window).width();if(desktopSize<breakpointResult){breakpointResult=getCurrentBreakpoint();axs.pubsub.publish("media.breakpoint",{breakpoint:breakpointResult})}}function publishNavState(){if(evaluateAttachNav()&&!navIsAttachedStatus){axs.pubsub.publish("navstatus",{attach:true})}else if(!evaluateAttachNav()&&navIsAttachedStatus){axs.pubsub.publish("navstatus",{attach:false})}}$(window).scroll(function(){publishNavState()});$(window).resize(function(){evaluateBreakpoint();updateNavStartingPosition()});layoutInit();return{updateNavStartingPosition:updateNavStartingPosition,getBreakpoint:getCurrentBreakpoint,attachNav:attachNav,detachNav:detachNav}}namespace.ExtendUIFramework=UIFramework})(window.jQuery,window.axs||{});
axs.users=function(){function modalInit(){axs.modalManager.register("disconnectFacebook",$("#fb-disconnect-modal").axsModal());axs.modalManager.register("mobileHelp",$("#mobile-help-modal").axsModal())}return{initialize:function(){modalInit();if(typeof $("div#axs-newsletter-dialog > div#user").attr("class")!="undefined"&&$("div#axs-newsletter-dialog > div#user").attr("class")!="y"){axs.Core.initAuthPopups(true);$("a.myaxs-login.popup").trigger("click");return}$("#lnk-mobile-help").on("click",function(){axs.modalManager.get("mobileHelp").show()});var user=axs.Global.getUser();if(user){if(user.venue_alert_active)$("input#users-venue-alert").prop("checked",true);if(user.event_performer_alert_active)$("input#users-event-performer-alert").prop("checked",true)}else{axs.Core.initAuthPopups(true);$("a.myaxs-login.popup").trigger("click")}$("input#users-venue-alert").on("click",function(){var isChecked=$(this).is(":checked");axs.Global.setUserSubscription("venue",isChecked,function(retval){if(retval)$("input#users-venue-alert").prop("checked",retval.isSubscribed)})});$("input#users-event-performer-alert").on("click",function(){var isChecked=$(this).is(":checked");axs.Global.setUserSubscription("event",isChecked,function(retval){if(retval)$("input#users-event-performer-alert").prop("checked",retval.isSubscribed)})});$("input#users-axs-newsletter-alert").on("click",function(){var isChecked=$(this).is(":checked");axs.Global.setUserSubscription("axs",isChecked,function(retval){if(retval)$("input#users-axs-newsletter-alert").prop("checked",retval.isSubscribed)})});$("input#users-special-offers-alert").on("click",function(){var isChecked=$(this).is(":checked");axs.Global.setUserSubscription("offers",isChecked,function(retval){if(retval)$("input#users-special-offers-alert").prop("checked",retval.isSubscribed)})});$(".btn-save_communication-info").on("click",function(){axs.Global.saveCommunicationsCheckBoxes(true)});axs.Global.enableCommunicationsValidation();axs.users.connectUserToFacebook();axs.users.disconnectUserFromFacebook();axs.users.setPasswordOnFacebookDisconnect();axs.users.saveAccountChanges();$("#communications-email-checkbox-4").attr("checked","checked").attr("disabled","disabled")},setPasswordOnFacebookDisconnect:function(){jQuery.validator.addMethod("minVariety",function(value,element){return this.optional(element)||/[a-zA-Z]/g.test(value)&&/[\d]/g.test(value)},"Please use at least one character and one number");$("#create-user-password-form").validate({rules:{password_new:{required:true,minlength:7,minVariety:true},password_new_again:{equalTo:"#txt-password-new"}},messages:{password_new:{required:$.validator.format(myAxsTranslations.pages.accountInformation.facebookConnectModule.disconnectDialog.formFields.password.validationMessages.required),minlength:$.validator.format(myAxsTranslations.pages.accountInformation.facebookConnectModule.disconnectDialog.formFields.password.validationMessages.minLength),minVariety:myAxsTranslations.pages.accountInformation.facebookConnectModule.disconnectDialog.formFields.password.validationMessages.minVariety},password_confirm:{equalTo:$.validator.format(myAxsTranslations.pages.accountInformation.facebookConnectModule.disconnectDialog.formFields.newPassword.validationMessages.passwordMismatch)}},onfocusout:false,errorElement:"span",errorPlacement:function(error,element){error.insertBefore($(element).parent()).wrap("<div/>")},submitHandler:function(form){form.submit()}});$("#create-user-password-btn").on("click",function(){if($("#create-user-password-form").validate()){var userPassCurrent=$("#txt-password_current").val();var userPassNew=$("#txt-password-new").val();$("#fb-disconnect-modal").addClass("loader");var retval=axs.Global.setUserPass(userPassCurrent,userPassNew);if(!retval.error){axs.Facebook.disconnect(function(){axs.Global.removeUserFBLink(function(){$("#fb-disconnect-modal").removeClass("loader");var newsletterModal=axs.modalManager.get("newsletter");if(newsletterModal!==undefined){newsletterModal.hide()}window.location.reload()})})}}})},saveAccountChanges:function(){jQuery.validator.addMethod("noSpecialCharacters",function(value,element){return this.optional(element)||/^[^<>?{}\/\\\[\]]+$/i.test(value)},"No special characters please");jQuery.validator.addMethod("minVariety",function(value,element){return this.optional(element)||/[a-zA-Z]/g.test(value)&&/[\d]/g.test(value)},"Please use at least one character and one number");$("#myaxs-profile-info-form").validate({rules:{first_name:{required:true,maxlength:100,noSpecialCharacters:true},last_name:{required:true,maxlength:200,noSpecialCharacters:true},email_address:{required:true,email:true,maxlength:200},zip_code:{required:false,minlength:5,maxlength:15,noSpecialCharacters:true},password_new:{required:function(){var $currentPassword=$("#txt-current-password");return $currentPassword.is(":visible")&&$currentPassword.val().length>0},minlength:7,minVariety:true},password_new_again:{equalTo:"#txt-password"}},messages:{first_name:{required:myAxsTranslations.pages.accountInformation.formFields.name.firstName.validationMessages.required,noSpecialCharacters:myAxsTranslations.pages.accountInformation.formFields.general.validationMessages.specialCharacters},last_name:{required:myAxsTranslations.pages.accountInformation.formFields.name.lastName.validationMessages.required,noSpecialCharacters:myAxsTranslations.pages.accountInformation.formFields.general.validationMessages.specialCharacters},email_address:myAxsTranslations.pages.accountInformation.formFields.email.validationMessages.required,zip_code:{required:myAxsTranslations.pages.accountInformation.formFields.postalCode.validationMessages.required,noSpecialCharacters:myAxsTranslations.pages.accountInformation.formFields.general.validationMessages.specialCharacters},current_password:myAxsTranslations.pages.accountInformation.formFields.password.currentPassword.validationMessages.required,password_new:{required:myAxsTranslations.pages.accountInformation.formFields.password.newPassword.validationMessages.required,minlength:$.validator.format(myAxsTranslations.pages.accountInformation.formFields.password.newPassword.validationMessages.minLength),minVariety:myAxsTranslations.pages.accountInformation.formFields.password.newPassword.validationMessages.minVariety},password_new_again:{equalTo:$.validator.format(myAxsTranslations.pages.accountInformation.formFields.password.confirmPassword.validationMessages.passwordMismatch)}},errorElement:"div",errorPlacement:function(error,element){if($(element).hasClass(this.errorClass)){error.insertBefore($(element).parent()).addClass("error-message")}},success:function(element){$(element).parent().prev("."+this.errorClass).remove()},submitHandler:function(form){return false}});$("#myaxs-profile-info-form .save-account-info").on("click",function(e){var self=this;if($("#myaxs-profile-info-form").valid()){$(self).addClass("is-loading");axs.Core.loadingScreen.show(function(){var $locationField=$("#user-zip-code");axs.Global.updateUserProfile(e,function(retVal,user){if(retVal&&typeof retVal!="string"){isNative=user?user.isNative:false;axs.Core.loadingScreen.hide();axs.users.messageBox({prependTo:"#myaxs-profile-info-form .account-section:first"});if($("#txt-password").val().length>0&&$("#txt-password").val().length>0)window.location.reload();$("#myaxs-form-error").hide();$(":password").val("");if(isNative){$("#txt-current-password").val("");$("#txt-current-password").parent().removeClass("hidden");$("#password-helper-text").html("<b class='header'>Password is set</b>Your current AXS.com password is set. To change your password, simply fill out the form and click 'Save Changes.'")}}else if(retVal!=null&&typeof retVal!="boolean"){$("#myaxs-form-error").text(retVal);$("#myaxs-form-error").show();axs.Core.loadingScreen.hide();$(self).removeClass("is-loading")}axs.Core.loadingScreen.hide();$(self).removeClass("is-loading")})});axs.Core.loadingScreen.hide();$(self).removeClass("is-loading")}})},connectUserToFacebook:function(){$("#lnk-facebook-connect").on("click",function(){axs.Core.loadingScreen.show(axs.Facebook.connectFacebookToCurrentUser(function(response){if(!response.success){axs.users.messageBox({alertType:"message-box--error has-topMargin",message:response.errorMessage,prependTo:"#fb-connect-error",isTemporary:true});axs.Core.loadingScreen.hide();FB.logout(function(response){})}else{window.location.reload()}}))})},disconnectUserFromFacebook:function(){$("#fbDisconnect").on("click",function(){if(!isNative){axs.modalManager.get("disconnectFacebook").show()}else{axs.Core.loadingScreen.show(function(){axs.Facebook.disconnect(function(){axs.Global.removeUserFBLink(function(){window.location.reload()})},true)})}})},refreshAlertsTab:function(){axs.users.getUserAlerts(function(alerts,error){$("div#tabs-1").empty();var eventIds=alerts[1];$.each(eventIds,function(i,v){var content='<ul class="alertItem" style="float: left">'+'<li class="w200">'+"<div><strong>headliner</strong></div>"+"<div><strong>tour</strong></div>"+"<div><strong>With:</strong> support</div>"+"</li>"+'<li class="w120 pl5">'+"<div><strong>venue</strong></div>"+"<div>city</div>"+"</li>"+'<li class="w120 pl5">'+"<div>Day</div>"+"<div>time</div>"+"</li>"+'<li class="w90 pl5">Follow event</li>'+'<li class="w90 pl10">Button</li>'+"</ul>";$("div#tabs-1").append(content)})})},setUserEmail:function(newEmail){var user=null,error=null;$.ajax({type:"POST",async:false,url:Routing.generate("api_proxy_user_email"),data:JSON.stringify({email:newEmail}),dataType:"json",success:function(data){if(data.error){if(data.error_description)error=data.error_description;else error=data.error}else{user=data}},error:function(req,status,error){if(error)error=error;else error="System error.  Please try again later."}});var retval={user:user,error:error};return retval},getUserAlerts:function(callback){var alerts=null,error=null;$.ajax({type:"POST",async:true,url:Routing.generate("api_proxy_user_alerts"),dataType:"json",success:function(data){if(data.error){if(data.error_description)callback(alerts,data.error_description);else callback(alerts,data.error)}else if(data){callback(data,error)}else{callback(alerts,"System error.  Please try again later.")}},error:function(req,status,error){if(error)callback(alerts,error);else callback(alerts,"System error.  Please try again later.")}})},unfollow:function(userId,categoryId,objectId,followButton){axs.Core.unfollow(userId,categoryId,objectId,followButton);$("#alert_"+categoryId+"_"+objectId).remove()},displayUserUpcomingEvents:function(dateFormatsArray){$.ajax({type:"GET",async:true,url:Routing.generate("api_proxy_user_events_upcoming")+"?locale="+locale,dataType:"json",timeout:3e4,success:function(data){formats=$.parseJSON(dateFormatsArray);if(typeof data!=="undefined"&&data.length>0){if(data[0].productCode){var $eventPartialName="myPurchasedEvent";var $eventPartialTemplateName="myPurchasedEvent-partial"}else{var $eventPartialName="myFollowedEvent";var $eventPartialTemplateName="myFollowedEvent-partial"}if(data[0].additionalDates!=undefined&&data[0].additionalDates.length>0){data[0].multipleDates=true}}else{var $eventPartialName="noUpcomingEvents";var $eventPartialTemplateName="noUpcomingEvents-partial"}var $upcomingEventsDiv=$("#account-upcoming-events-template").html();var sourcePartial=$("#"+$eventPartialTemplateName).html();Handlebars.partials[$eventPartialTemplateName]=Handlebars.compile(sourcePartial);sourcePartial=$("#frontGateOrder-partial").html();Handlebars.partials["frontGateOrder-partial"]=Handlebars.compile(sourcePartial);sourcePartial=$("#myPurchasedFrontGateEvent-partial").html();Handlebars.partials["myPurchasedFrontGateEvent-partial"]=Handlebars.compile(sourcePartial);var $resultTemplate=Handlebars.compile($upcomingEventsDiv);Handlebars.registerPartial($eventPartialName,$("#"+$eventPartialTemplateName).html());Handlebars.registerPartial("frontGateOrder-partial",$("#frontGateOrder-partial").html());Handlebars.registerPartial("myPurchasedFrontGateEvent-partial",$("#myPurchasedFrontGateEvent-partial").html());var $html=$resultTemplate(data);var $cont=$("#myaxs-main-cont");$cont.prepend($html)},error:function(){}})},displayOrderHistory:function(dateFormatsArray){axs.Core.loadingScreen.show();$.ajax({type:"GET",async:true,url:Routing.generate("api_proxy_user_my_events")+"?locale="+locale,dataType:"json",timeout:6e4,success:function(data){axs.Core.loadingScreen.hide();var mobileAppBannerMessage=myAxsTranslations.pages.myEvents.mobileBannerMessage;mobileAppBannerMessage=mobileAppBannerMessage.replace("%mobileAppLink%","http://www.axs.com/features/axsmobileapp");mobileAppBannerMessage=mobileAppBannerMessage.replace("%supportLink%","https://support.axs.com/home");data.mobileAppBannerMessage=mobileAppBannerMessage;formats=$.parseJSON(dateFormatsArray);var sourcePartial=$("#myPurchasedEvent-partial").html();Handlebars.partials["myPurchasedEvent-partial"]=Handlebars.compile(sourcePartial);sourcePartial=$("#mySharedTicketStatus-partial").html();Handlebars.partials["mySharedTicketStatus-partial"]=Handlebars.compile(sourcePartial);sourcePartial=$("#frontGateOrder-partial").html();Handlebars.partials["frontGateOrder-partial"]=Handlebars.compile(sourcePartial);sourcePartial=$("#myPurchasedFrontGateEvent-partial").html();Handlebars.partials["myPurchasedFrontGateEvent-partial"]=Handlebars.compile(sourcePartial);sourcePartial=$("#noUpcomingEvents-partial").html();Handlebars.partials["noUpcomingEvents-partial"]=Handlebars.compile(sourcePartial);var $resultTemplate=Handlebars.compile($("#my-events-template").html());Handlebars.registerPartial("myPurchasedEvent-partial",$("#myPurchasedEvent-partial").html());Handlebars.registerPartial("mySharedTicketStatus-partial",$("#mySharedTicketStatus-partial").html());Handlebars.registerPartial("frontGateOrder-partial",$("#frontGateOrder-partial").html());Handlebars.registerPartial("myPurchasedFrontGateEvent-partial",$("#myPurchasedFrontGateEvent-partial").html());Handlebars.registerPartial("noUpcomingEvents-partial",$("#noUpcomingEvents-partial").html());var $html=$resultTemplate(data);$("#js-order-history-container").append($html)},error:function(xHr,textStatus,errorThrown){$("#content_order_history_unavailable").show();axs.Core.loadingScreen.hide()}})},messageBox:function(options){var defaults={alertType:"message-box--success",message:translations.changesSaved,prependTo:".main-content-panel",elementType:"div",isTemporary:true,duration:8e3,animationSpeed:500,scrollToTop:true,callback:function(){return false}};var d=$.extend(defaults,options||{});var $alert=$("<"+d.elementType+' class="'+d.alertType+'">'+d.message+"</"+d.elementType+">").prependTo($(d.prependTo));if($alert.hasClass("is-success")){if(d.scrollToTop)$("html,body").animate({scrollTop:0},250)}if(d.isTemporary)$alert.hide().fadeIn(d.animationSpeed).delay(d.duration).fadeOut(d.animationSpeed,function(){$alert.remove();d.callback()});else{d.callback()}}}}();
jQuery.fn.extend({setLinkTarget:function(target){var target=target?target:"_blank";this.attr("target",target)},cssTransitionEnd:function(callback,unbind){var removeTransition=!unbind?true:false;this.on("transitionend",function(){callback&&callback();if(removeTransition){$(this).unbind("transitionend")}})}});(function($,namespace){function utilities(){function getQueryValule(variable){var query=window.location.search.substring(1);var vars=query.split("&");for(var i=0,len=vars.length;i<len;i++){var pair=vars[i].split("=");if(pair[0]==variable){return pair[1]}}return false}function outsideClick(){function OutsideClick(){var eventNamespace="";function bindClick(exclusions,callback,customEventNamespace,unbindEventAfterCallback){var $exclusions=$(exclusions);var unbindEvent=true;if(typeof unbindEventAfterCallback==="boolean"){unbindEvent=unbindEventAfterCallback}eventNamespace=customEventNamespace||"mousedown.outside";$(document).on(eventNamespace,function(e){if($(e.target).closest($exclusions).length===0&&!$(e.target).is($exclusions)){e.stopPropagation();callback&&callback(e);if(unbindEvent){unbindClick()}}})}function unbindClick(){$(document).off(eventNamespace)}return{bind:bindClick,unbind:unbindClick}}return new OutsideClick}function isSecure(){return window.location.protocol==="https:"}function translate(string,args){$(args).each(function(){string=string.replace(this.key,this.value)});return string}function generateURL(route,params){if(params&&params._locale&&params._locale=="en-US"){delete params["_locale"];if(jQuery.isEmptyObject(params))params=null}if(params){if(!params._locale)return Routing.generate(route+"_base",params);else{params._locale=axs.Global.mapLocale(params._locale);return Routing.generate(route,params)}}else return Routing.generate(route+"_base")}function getLocalizedURL(_locale){var url="";if(Object.keys(localizedURLs).length>0){url=decodeURIComponent(localizedURLs[_locale]);var match=url.match(/.*[?&](referer|referrer)=([^&]+)(&|$)/);if(match){var referer=match[2];localizedReferer=referer.replace(Routing.getBaseUrl(),"");var refererMatch=localizedReferer.match(/\/([\w]{2}|[\w]{2}-[\w]{2})(\/|\b)/);if(refererMatch){var alias=axs.Global.mapLocale(_locale);localizedReferer=localizedReferer.replace("/"+refererMatch[1],alias?"/"+alias:"");url=url.replace(referer,Routing.getBaseUrl()+localizedReferer)}else{var alias=axs.Global.mapLocale(_locale);url=url.replace(referer,Routing.getBaseUrl()+(alias?"/"+alias:"")+localizedReferer)}}}else{var url=window.location.href;url=url.replace("http://","");url=url.replace(Routing.generate("default_index_base"),"/");var path=url.substr(url.indexOf("/")+1,url.length);var hasLocale=path.substr(0,path.indexOf("/")).length==2;if(hasLocale)path=path.substr(path.indexOf("/")+1,path.length);var alias=axs.Global.mapLocale(_locale);url=Routing.generate("default_index_base")+(alias!=""?alias+"/":"")+path}var domain=window.axs.Core.cleanDomainName(window.location.hostname,/.*\..*\..*/.test(window.location.hostname));$.cookie("preferred_locale",_locale,{path:"/",domain:domain});if($.removeCookie!=null){$.removeCookie("initial_redirect",{path:"/"})}else{$.cookie("initial_redirect",null,{path:"/"})}return url}function logData(actionType,data){if(data&&userData){data["user"]=userData}$.post(Routing.generate("api_global_logger_post")+"?application=AXS&actionType="+actionType,JSON.stringify(data))}function escapeHtml(unsafe){return unsafe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function unescapeHtml(safe){return safe.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}return{getQueryVal:getQueryValule,outsideClick:outsideClick(),isSecure:isSecure,translate:translate,generateURL:generateURL,getLocalizedURL:getLocalizedURL,logData:logData,escapeHtml:escapeHtml,unescapeHtml:unescapeHtml}}namespace.ExtendUtilities=utilities})(window.jQuery,window.axs||{});
var axs=window.axs||{};axs.AXSID=function(){var params={};function startAXSId(axsIdParams){var loginHandler=function(err,status,user){if(user){if(user.email){axsIdParams.callback(null,user)}}};window.AXSIDReady=function(){params={axsClientID:axsIdParams.axsClientId,clientID:axsIdParams.clientId+"_"+axsIdParams.axsIdRandomId,clientSecret:axsIdParams.axsIdSecret,containerID:"axsid_login",locale:axsIdParams.axsIdLocale,country:axsIdParams.country,axsSDKMobile:axsIdParams.axsSDKMobile,clientDisplayName:axsIdParams.axsIdClientName,privacyPolicyLink:axsIdParams.axsIdPrivacyPolicy,termsAndConditionsLink:axsIdParams.axsIdTerms,contactSupportLink:axsIdParams.axsIdContactSupport,facebookAppID:axsIdParams.axsIdFacebookAppId,skin:axsIdParams.axsIdSkin,timeout:20,loginHandler:loginHandler,triggerFlashMigrationFlow:axsIdParams.triggerFlashMigrationFlow,autoCreateFlashAccount:axsIdParams.autoCreateFlashAccount,load:axsIdParams.load,detectLocale:axsIdParams.detectLocale,mpsRegion:axsIdParams.mpsRegion,loadSubOptions:axsIdParams.loadSubOptions,enableMarketingAgreement:axsIdParams.enableMarketingAgreement,invertMarketingAgreement:true,stalePasswordChecking:axsIdParams.stalePasswordChecking,deviceVerificationChecking:axsIdParams.deviceVerificationChecking,otpVerificationChecking:axsIdParams.otpVerificationChecking,emailVerificationChecking:axsIdParams.emailVerificationChecking};var axsid=new AXSID(params);axsid.show();if(axsIdParams.onInitCallback){axsIdParams.onInitCallback()}}}function hideAxsIdForm(){AXSID.hide(params)}function generateRedirectUrl(url,accessToken,refreshToken){var separator=url.indexOf("?")===-1?"?":"&";return url+separator+"access_token="+accessToken+"&refresh_token="+refreshToken}return{startAXSId:startAXSId,hideAxsIdForm:hideAxsIdForm,generateRedirectUrl:generateRedirectUrl}}();
(function(e){e.fn.visible=function(t,n,r){var i=e(this).eq(0),s=i.get(0),o=e(window),u=o.scrollTop(),a=u+o.height(),f=o.scrollLeft(),l=f+o.width(),c=i.offset().top,h=c+i.height(),p=i.offset().left,d=p+i.width(),v=t===true?h:c,m=t===true?c:h,g=t===true?d:p,y=t===true?p:d,b=n===true?s.offsetWidth*s.offsetHeight:true,r=r?r:"both";if(r==="both")return!!b&&m<=a&&v>=u&&y<=l&&g>=f;else if(r==="vertical")return!!b&&m<=a&&v>=u;else if(r==="horizontal")return!!b&&y<=l&&g>=f}})(jQuery);
(function(window,undefined){"$:nomunge";var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=="boolean"){debounce_mode=callback;callback=no_trailing;no_trailing=undefined}function wrapper(){var that=this,elapsed=+new Date-last_exec,args=arguments;function exec(){last_exec=+new Date;callback.apply(that,args)}function clear(){timeout_id=undefined}if(debounce_mode&&!timeout_id){exec()}timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec()}else if(no_trailing!==true){timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay)}}if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++}return wrapper};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false):jq_throttle(delay,callback,at_begin!==false)}})(this);
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var validator=$.data(this[0],"validator");if(validator){return validator}this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target}if($(event.target).hasClass("cancel")){validator.cancelSubmit=true}if($(event.target).attr("formnovalidate")!==undefined){validator.cancelSubmit=true}});this.submit(function(event){if(validator.settings.debug){event.preventDefault()}function handle(){var hidden;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)}validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove()}return false}return true}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle()}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false}return handle()}else{validator.focusInvalid();return false}})}return validator},valid:function(){var valid,validator;if($(this[0]).is("form")){valid=this.validate().form()}else{valid=true;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid})}return valid},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value)});return result},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages)}break;case"remove":if(!argument){delete staticRules[element.name];return existingRules}filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];if(method==="required"){$(element).removeAttr("aria-required")}});return filtered}}data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);$(element).attr("aria-required","true")}if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param})}return data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init()};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args)}}if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1)}if(params.constructor!==Array){params=[params]}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})});return source};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass)}this.hideThese(this.errorsFor(element))}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element)}},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)===""){return}else if(element.name in this.submitted||element===this.lastElement){this.element(element)}},onclick:function(element){if(element.name in this.submitted){this.element(element)}else if(element.parentNode.name in this.submitted){this.element(element.parentNode)}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass)}else{$(element).addClass(errorClass).removeClass(validClass)}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass)}else{$(element).removeClass(errorClass).addClass(validClass)}}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=this.groups={},rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/)}$.each(value,function(index,name){groups[name]=key})});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!this.is(settings.ignore)){settings[eventType].call(validator,this[0],event)}}$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",delegate).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++){this.check(elements[i])}return this.valid()},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),result=true;this.lastElement=checkElement;if(checkElement===undefined){delete this.invalid[cleanElement.name]}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);result=this.check(checkElement)!==false;if(result){delete this.invalid[checkElement.name]}else{this.invalid[checkElement.name]=true}}$(element).attr("aria-invalid",!result);if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]})}this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0,i;for(i in obj){count++}return count},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false}rulesCache[this.name]=true;return true})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element)},elementValue:function(element){var val,$element=$(element),type=element.type;if(type==="radio"||type==="checkbox"){return $("input[name='"+element.name+"']:checked").val()}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?false:$element.val()}val=$element.val();if(typeof val==="string"){return val.replace(/\r/g,"")}return val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=false,val=this.elementValue(element),result,method,rule;for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=true;continue}dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}if(!result){this.formatAndAdd(element,rule);return false}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e)}throw e}}if(dependencyMismatch){return}if(this.objectLength(rules)){this.successList.push(element)}return true},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i]}}return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element)}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)}this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))}return toToggle},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(error.element,error.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i])}}if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var place,group,errorID,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message)}else{error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(this.labelContainer.length){this.labelContainer.append(place)}else if(this.settings.errorPlacement){this.settings.errorPlacement(place,$(element))}else{place.insertAfter(element)}if(error.is("label")){error.attr("for",elementID)}else if(error.parents("label[for='"+elementID+"']").length===0){errorID=error.attr("id");if(!describedBy){describedBy=errorID}else if(!describedBy.match(new RegExp("\b"+errorID+"\b"))){describedBy+=" "+errorID}$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group){$("[name='"+name+"']",this.currentForm).attr("aria-describedby",error.attr("id"))}})}}}if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success)}else{this.settings.success(error,element)}}this.toShow=this.toShow.add(error)},errorsFor:function(element){var name=this.idOrName(element),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+describer.replace(/\s+/g,", #")}return this.errors().filter(selector)},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0]}return element},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length}}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true},dependTypes:{boolean:function(param){return param},string:function(param,element){return!!$(param,element.form).length},function:function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules}else{$.extend(this.classRuleSettings,className)}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this])}})}return rules},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=true}value=!!value}else{value=$element.attr(method)}if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value)}if(value||value===0){rules[method]=value}else if(type===method&&type!=="range"){rules[method]=true}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength}return rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());if(value!==undefined){rules[method]=value}}return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}}return rules},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break}if(keepRule){rules[prop]=val.param!==undefined?val.param:true}else{delete rules[prop]}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this])}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])]}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])]}}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength}}return rules},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true});data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name))}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch"}if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}if(this.checkable(element)){return this.getLength(value,element)>0}return $.trim(value).length>0},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(value)){return false}var nCheck=0,nDigit=0,bEven=false,n,cDigit;value=value.replace(/\D/g,"");if(value.length<13||value.length>19){return false}for(n=value.length-1;n>=0;n--){cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9}}nCheck+=nDigit;bEven=!bEven}return nCheck%10===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()})}return value===target.val()},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch"}var previous=this.previousValue(element),validator,data;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={}}previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid}previous.old=value;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===true||response==="true",errors,message,submitted;validator.settings.messages[element.name].remote=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors()}else{errors={};message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=true;validator.showErrors(errors)}previous.valid=valid;validator.stopRequest(element,valid)}},param));return"pending"}}});$.format=function deprecated(){throw"$.format has been deprecated. Please use $.validator.format instead."};var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}pendingRequests[port]=xhr}})}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port]}return ajax.apply(this,arguments)}}$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments)}})}})});
!function(a){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate.min"],a):a(jQuery)}(function(a){!function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-]*/g,"")}a.validator.addMethod("maxWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<=d},a.validator.format("Please enter {0} words or less.")),a.validator.addMethod("minWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},a.validator.format("Please enter at least {0} words.")),a.validator.addMethod("rangeWords",function(a,c,d){var e=b(a),f=/\b\w+\b/g;return this.optional(c)||e.match(f).length>=d[0]&&e.match(f).length<=d[1]},a.validator.format("Please enter between {0} and {1} words."))}(),a.validator.addMethod("accept",function(b,c,d){var e,f,g="string"==typeof d?d.replace(/\s/g,"").replace(/,/g,"|"):"image/*",h=this.optional(c);if(h)return h;if("file"===a(c).attr("type")&&(g=g.replace(/\*/g,".*"),c.files&&c.files.length))for(e=0;e<c.files.length;e++)if(f=c.files[e],!f.type.match(new RegExp(".?("+g+")$","i")))return!1;return!0},a.validator.format("Please enter a value with a valid mimetype.")),a.validator.addMethod("alphanumeric",function(a,b){return this.optional(b)||/^\w+$/i.test(a)},"Letters, numbers, and underscores only please"),a.validator.addMethod("bankaccountNL",function(a,b){if(this.optional(b))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(a))return!1;var c,d,e,f=a.replace(/ /g,""),g=0,h=f.length;for(c=0;h>c;c++)d=h-c,e=f.substring(c,c+1),g+=d*e;return g%11===0},"Please specify a valid bank account number"),a.validator.addMethod("bankorgiroaccountNL",function(b,c){return this.optional(c)||a.validator.methods.bankaccountNL.call(this,b,c)||a.validator.methods.giroaccountNL.call(this,b,c)},"Please specify a valid bank or giro account number"),a.validator.addMethod("bic",function(a,b){return this.optional(b)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(a)},"Please specify a valid BIC code"),a.validator.addMethod("cifES",function(a){"use strict";var b,c,d,e,f,g,h=[];if(a=a.toUpperCase(),!a.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(d=0;9>d;d++)h[d]=parseInt(a.charAt(d),10);for(c=h[2]+h[4]+h[6],e=1;8>e;e+=2)f=(2*h[e]).toString(),g=f.charAt(1),c+=parseInt(f.charAt(0),10)+(""===g?0:parseInt(g,10));return/^[ABCDEFGHJNPQRSUVW]{1}/.test(a)?(c+="",b=10-parseInt(c.charAt(c.length-1),10),a+=b,h[8].toString()===String.fromCharCode(64+b)||h[8].toString()===a.charAt(a.length-1)):!1},"Please specify a valid CIF number."),a.validator.addMethod("creditcardtypes",function(a,b,c){if(/[^0-9\-]+/.test(a))return!1;a=a.replace(/\D/g,"");var d=0;return c.mastercard&&(d|=1),c.visa&&(d|=2),c.amex&&(d|=4),c.dinersclub&&(d|=8),c.enroute&&(d|=16),c.discover&&(d|=32),c.jcb&&(d|=64),c.unknown&&(d|=128),c.all&&(d=255),1&d&&/^(5[12345])/.test(a)?16===a.length:2&d&&/^(4)/.test(a)?16===a.length:4&d&&/^(3[47])/.test(a)?15===a.length:8&d&&/^(3(0[012345]|[68]))/.test(a)?14===a.length:16&d&&/^(2(014|149))/.test(a)?15===a.length:32&d&&/^(6011)/.test(a)?16===a.length:64&d&&/^(3)/.test(a)?16===a.length:64&d&&/^(2131|1800)/.test(a)?15===a.length:128&d?!0:!1},"Please enter a valid credit card number."),a.validator.addMethod("currency",function(a,b,c){var d,e="string"==typeof c,f=e?c:c[0],g=e?!0:c[1];return f=f.replace(/,/g,""),f=g?f+"]":f+"]?",d="^["+f+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",d=new RegExp(d),this.optional(b)||d.test(a)},"Please specify a valid currency"),a.validator.addMethod("dateFA",function(a,b){return this.optional(b)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(a)},"Please enter a correct date"),a.validator.addMethod("dateITA",function(a,b){var c,d,e,f,g,h=!1,i=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return i.test(a)?(c=a.split("/"),d=parseInt(c[0],10),e=parseInt(c[1],10),f=parseInt(c[2],10),g=new Date(f,e-1,d,12,0,0,0),h=g.getUTCFullYear()===f&&g.getUTCMonth()===e-1&&g.getUTCDate()===d?!0:!1):h=!1,this.optional(b)||h},"Please enter a correct date"),a.validator.addMethod("dateNL",function(a,b){return this.optional(b)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(a)},"Please enter a correct date"),a.validator.addMethod("extension",function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},a.validator.format("Please enter a value with a valid extension.")),a.validator.addMethod("giroaccountNL",function(a,b){return this.optional(b)||/^[0-9]{1,7}$/.test(a)},"Please specify a valid giro account number"),a.validator.addMethod("iban",function(a,b){if(this.optional(b))return!0;var c,d,e,f,g,h,i,j,k,l=a.replace(/ /g,"").toUpperCase(),m="",n=!0,o="",p="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(l))return!1;if(c=l.substring(0,2),h={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},g=h[c],"undefined"!=typeof g&&(i=new RegExp("^[A-Z]{2}\\d{2}"+g+"$",""),!i.test(l)))return!1;for(d=l.substring(4,l.length)+l.substring(0,4),j=0;j<d.length;j++)e=d.charAt(j),"0"!==e&&(n=!1),n||(m+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e));for(k=0;k<m.length;k++)f=m.charAt(k),p=""+o+f,o=p%97;return 1===o},"Please specify a valid IBAN"),a.validator.addMethod("integer",function(a,b){return this.optional(b)||/^-?\d+$/.test(a)},"A positive or negative non-decimal number please"),a.validator.addMethod("ipv4",function(a,b){return this.optional(b)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(a)},"Please enter a valid IP v4 address."),a.validator.addMethod("ipv6",function(a,b){return this.optional(b)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(a)},"Please enter a valid IP v6 address."),a.validator.addMethod("lettersonly",function(a,b){return this.optional(b)||/^[a-z]+$/i.test(a)},"Letters only please"),a.validator.addMethod("letterswithbasicpunc",function(a,b){return this.optional(b)||/^[a-z\-.,()'"\s]+$/i.test(a)},"Letters or punctuation only please"),a.validator.addMethod("mobileNL",function(a,b){return this.optional(b)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(a)},"Please specify a valid mobile number"),a.validator.addMethod("mobileUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),a.validator.addMethod("nieES",function(a){"use strict";return a=a.toUpperCase(),a.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[T]{1}/.test(a)?a[8]===/^[T]{1}[A-Z0-9]{8}$/.test(a):/^[XYZ]{1}/.test(a)?a[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23):!1:!1},"Please specify a valid NIE number."),a.validator.addMethod("nifES",function(a){"use strict";return a=a.toUpperCase(),a.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[0-9]{8}[A-Z]{1}$/.test(a)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.substring(8,0)%23)===a.charAt(8):/^[KLM]{1}/.test(a)?a[8]===String.fromCharCode(64):!1:!1},"Please specify a valid NIF number."),a.validator.addMethod("nowhitespace",function(a,b){return this.optional(b)||/^\S+$/i.test(a)},"No white space please"),a.validator.addMethod("pattern",function(a,b,c){return this.optional(b)?!0:("string"==typeof c&&(c=new RegExp(c)),c.test(a))},"Invalid format."),a.validator.addMethod("phoneNL",function(a,b){return this.optional(b)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(a)},"Please specify a valid phone number."),a.validator.addMethod("phoneUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),a.validator.addMethod("phoneUS",function(a,b){return a=a.replace(/\s+/g,""),this.optional(b)||a.length>9&&a.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),a.validator.addMethod("phonesUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),a.validator.addMethod("postalCodeCA",function(a,b){return this.optional(b)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeIT",function(a,b){return this.optional(b)||/^\d{5}$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeNL",function(a,b){return this.optional(b)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postcodeUK",function(a,b){return this.optional(b)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(a)},"Please specify a valid UK postcode"),a.validator.addMethod("require_from_group",function(b,c,d){var e=a(d[1],c.form),f=e.eq(0),g=f.data("valid_req_grp")?f.data("valid_req_grp"):a.extend({},this),h=e.filter(function(){return g.elementValue(this)}).length>=d[0];return f.data("valid_req_grp",g),a(c).data("being_validated")||(e.data("being_validated",!0),e.each(function(){g.element(this)}),e.data("being_validated",!1)),h},a.validator.format("Please fill at least {0} of these fields.")),a.validator.addMethod("skip_or_fill_minimum",function(b,c,d){var e=a(d[1],c.form),f=e.eq(0),g=f.data("valid_skip")?f.data("valid_skip"):a.extend({},this),h=e.filter(function(){return g.elementValue(this)}).length,i=0===h||h>=d[0];return f.data("valid_skip",g),a(c).data("being_validated")||(e.data("being_validated",!0),e.each(function(){g.element(this)}),e.data("being_validated",!1)),i},a.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",function(a,b,c){var d,e="undefined"==typeof c,f=e||"undefined"==typeof c.caseSensitive?!1:c.caseSensitive,g=e||"undefined"==typeof c.includeTerritories?!1:c.includeTerritories,h=e||"undefined"==typeof c.includeMilitary?!1:c.includeMilitary;return d=g||h?g&&h?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":g?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",d=f?new RegExp(d):new RegExp(d,"i"),this.optional(b)||d.test(a)},"Please specify a valid state"),a.validator.addMethod("strippedminlength",function(b,c,d){return a(b).text().length>=d},a.validator.format("Please enter at least {0} characters")),a.validator.addMethod("time",function(a,b){return this.optional(b)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(a)},"Please enter a valid time, between 00:00 and 23:59"),a.validator.addMethod("time12h",function(a,b){return this.optional(b)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(a)},"Please enter a valid time in 12-hour am/pm format"),a.validator.addMethod("url2",function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},a.validator.messages.url),a.validator.addMethod("vinUS",function(a){if(17!==a.length)return!1;var b,c,d,e,f,g,h=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],i=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],j=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],k=0;for(b=0;17>b;b++){if(e=j[b],d=a.slice(b,b+1),8===b&&(g=d),isNaN(d)){for(c=0;c<h.length;c++)if(d.toUpperCase()===h[c]){d=i[c],d*=e,isNaN(g)&&8===c&&(g=h[c]);break}}else d*=e;k+=d}return f=k%11,10===f&&(f="X"),f===g?!0:!1},"The specified vehicle identification number (VIN) is invalid."),a.validator.addMethod("zipcodeUS",function(a,b){return this.optional(b)||/^\d{5}(-\d{4})?$/.test(a)},"The specified US ZIP Code is invalid"),a.validator.addMethod("ziprange",function(a,b){return this.optional(b)||/^90[2-5]\d\{2\}-\d{4}$/.test(a)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx")});
var EasyAutocomplete=function(scope){scope.Configuration=function Configuration(options){var defaults={data:"list-required",url:"list-required",dataType:"json",listLocation:function(data){return data},xmlElementName:"",getValue:function(element){return element},autocompleteOff:true,placeholder:false,ajaxCallback:function(){},matchResponseProperty:false,list:{sort:{enabled:false,method:function(a,b){a=defaults.getValue(a);b=defaults.getValue(b);if(a<b){return-1}if(a>b){return 1}return 0}},maxNumberOfElements:6,hideOnEmptyPhrase:true,match:{enabled:false,caseSensitive:false,method:function(a,b){a=defaults.getValue(a);b=defaults.getValue(b);if(a===b){return true}return false}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){},suppressMouseOverBehaviour:false},highlightPhrase:true,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:true,ajaxSettings:{},preparePostData:function(data,inputPhrase){return data},loggerEnabled:true,template:"",categoriesAssigned:false,categories:[{maxNumberOfElements:4}],hideOnNoFocus:true,preventDefaultOnEnter:true,localDataLengthMatch:false,showDefaultListOnFocus:false};this.get=function(propertyName){return defaults[propertyName]};this.equals=function(name,value){if(isAssigned(name)){if(defaults[name]===value){return true}}return false};this.checkDataUrlProperties=function(){if(defaults.url==="list-required"&&defaults.data==="list-required"){return false}return true};this.checkRequiredProperties=function(){for(var propertyName in defaults){if(defaults[propertyName]==="required"){logger.error("Option "+propertyName+" must be defined");return false}}return true};this.printPropertiesThatDoesntExist=function(consol,optionsToCheck){printPropertiesThatDoesntExist(consol,optionsToCheck)};prepareDefaults();mergeOptions();if(defaults.loggerEnabled===true){printPropertiesThatDoesntExist(console,options)}addAjaxSettings();processAfterMerge();function prepareDefaults(){if(options.dataType==="xml"){if(!options.getValue){options.getValue=function(element){return $(element).text()}}if(!options.list){options.list={}}if(!options.list.sort){options.list.sort={}}options.list.sort.method=function(a,b){a=options.getValue(a);b=options.getValue(b);if(a<b){return-1}if(a>b){return 1}return 0};if(!options.list.match){options.list.match={}}options.list.match.method=function(a,b){a=options.getValue(a);b=options.getValue(b);if(a===b){return true}return false}}if(options.categories!==undefined&&options.categories instanceof Array){var categories=[];for(var i=0,length=options.categories.length;i<length;i+=1){var category=options.categories[i];for(var property in defaults.categories[0]){if(category[property]===undefined){category[property]=defaults.categories[0][property]}}categories.push(category)}options.categories=categories}}function mergeOptions(){defaults=mergeObjects(defaults,options);function mergeObjects(source,target){var mergedObject=source||{};for(var propertyName in source){if(target[propertyName]!==undefined&&target[propertyName]!==null){if(typeof target[propertyName]!=="object"||target[propertyName]instanceof Array){mergedObject[propertyName]=target[propertyName]}else{mergeObjects(source[propertyName],target[propertyName])}}}if(target.data!==undefined&&target.data!==null&&typeof target.data==="object"){mergedObject.data=target.data}return mergedObject}}function processAfterMerge(){if(defaults.url!=="list-required"&&typeof defaults.url!=="function"){var defaultUrl=defaults.url;defaults.url=function(){return defaultUrl}}if(defaults.ajaxSettings.url!==undefined&&typeof defaults.ajaxSettings.url!=="function"){var defaultUrl=defaults.ajaxSettings.url;defaults.ajaxSettings.url=function(){return defaultUrl}}if(typeof defaults.listLocation==="string"){var defaultlistLocation=defaults.listLocation;if(defaults.dataType.toUpperCase()==="XML"){defaults.listLocation=function(data){return $(data).find(defaultlistLocation)}}else{defaults.listLocation=function(data){return data[defaultlistLocation]}}}if(typeof defaults.getValue==="string"){var defaultsGetValue=defaults.getValue;defaults.getValue=function(element){return element[defaultsGetValue]}}if(options.categories!==undefined){defaults.categoriesAssigned=true}}function addAjaxSettings(){if(options.ajaxSettings!==undefined&&typeof options.ajaxSettings==="object"){defaults.ajaxSettings=options.ajaxSettings}else{defaults.ajaxSettings={}}}function isAssigned(name){if(defaults[name]!==undefined&&defaults[name]!==null){return true}else{return false}}function printPropertiesThatDoesntExist(consol,optionsToCheck){checkPropertiesIfExist(defaults,optionsToCheck);function checkPropertiesIfExist(source,target){for(var property in target){if(source[property]===undefined){consol.log("Property '"+property+"' does not exist in EasyAutocomplete options API.")}if(typeof source[property]==="object"&&!externalObject(property)){checkPropertiesIfExist(source[property],target[property])}}}function externalObject(property){var notTestedObjects=["ajaxSettings","template"];Array.prototype.contains=function(obj){var i=this.length;while(i--){if(this[i]===obj){return true}}return false};return notTestedObjects.contains(property)}}};return scope}(EasyAutocomplete||{});var EasyAutocomplete=function(scope){scope.Logger=function Logger(){this.error=function(message){console.log("ERROR: "+message)};this.warning=function(message){console.log("WARNING: "+message)}};return scope}(EasyAutocomplete||{});var EasyAutocomplete=function(scope){scope.Constans=function Constans(){var constants={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(propertyName){return constants[propertyName]}};return scope}(EasyAutocomplete||{});var EasyAutocomplete=function(scope){scope.ListBuilderService=function ListBuilderService(configuration,proccessResponseData){this.init=function(data){var listBuilder=[],builder={};builder.data=configuration.get("listLocation")(data);builder.getValue=configuration.get("getValue");builder.maxListSize=configuration.get("list").maxNumberOfElements;listBuilder.push(builder);return listBuilder};this.updateCategories=function(listBuilder,data){if(configuration.get("categoriesAssigned")){listBuilder=[];for(var i=0;i<configuration.get("categories").length;i+=1){var builder=convertToListBuilder(configuration.get("categories")[i],data);listBuilder.push(builder)}}return listBuilder};this.convertXml=function(listBuilder){if(configuration.get("dataType").toUpperCase()==="XML"){for(var i=0;i<listBuilder.length;i+=1){listBuilder[i].data=convertXmlToList(listBuilder[i])}}return listBuilder};this.processData=function(listBuilder,inputPhrase){for(var i=0,length=listBuilder.length;i<length;i+=1){listBuilder[i].data=proccessResponseData(configuration,listBuilder[i],inputPhrase)}return listBuilder};this.checkIfDataExists=function(listBuilders){for(var i=0,length=listBuilders.length;i<length;i+=1){if(listBuilders[i].data!==undefined&&listBuilders[i].data instanceof Array){if(listBuilders[i].data.length>0){return true}}}return false};function convertToListBuilder(category,data){var builder={};if(configuration.get("dataType").toUpperCase()==="XML"){builder=convertXmlToListBuilder()}else{builder=convertDataToListBuilder()}if(category.header!==undefined){builder.header=category.header}if(category.maxNumberOfElements!==undefined){builder.maxNumberOfElements=category.maxNumberOfElements}if(configuration.get("list").maxNumberOfElements!==undefined){builder.maxListSize=configuration.get("list").maxNumberOfElements}if(category.getValue!==undefined){if(typeof category.getValue==="string"){var defaultsGetValue=category.getValue;builder.getValue=function(element){return element[defaultsGetValue]}}else if(typeof category.getValue==="function"){builder.getValue=category.getValue}}else{builder.getValue=configuration.get("getValue")}return builder;function convertXmlToListBuilder(){var builder={},listLocation;if(category.xmlElementName!==undefined){builder.xmlElementName=category.xmlElementName}if(category.listLocation!==undefined){listLocation=category.listLocation}else if(configuration.get("listLocation")!==undefined){listLocation=configuration.get("listLocation")}if(listLocation!==undefined){if(typeof listLocation==="string"){builder.data=$(data).find(listLocation)}else if(typeof listLocation==="function"){builder.data=listLocation(data)}}else{builder.data=data}return builder}function convertDataToListBuilder(){var builder={};if(category.listLocation!==undefined){if(typeof category.listLocation==="string"){builder.data=data[category.listLocation]}else if(typeof category.listLocation==="function"){builder.data=category.listLocation(data)}}else{builder.data=data}return builder}}function convertXmlToList(builder){var simpleList=[];if(builder.xmlElementName===undefined){builder.xmlElementName=configuration.get("xmlElementName")}$(builder.data).find(builder.xmlElementName).each(function(){simpleList.push(this)});return simpleList}};return scope}(EasyAutocomplete||{});var EasyAutocomplete=function(scope){scope.proccess=function proccessData(config,listBuilder,phrase){var list=listBuilder.data,inputPhrase=phrase;list=findMatch(list,inputPhrase);list=reduceElementsInList(list);list=sort(list);return list;function findMatch(list,phrase){var preparedList=[],value="";if(config.get("list").match.enabled){for(var i=0,length=list.length;i<length;i+=1){value=config.get("getValue")(list[i]);if(!config.get("list").match.caseSensitive){if(typeof value==="string"){value=value.toLowerCase()}phrase=phrase.toLowerCase()}if(value.search(phrase)>-1){preparedList.push(list[i])}}}else{preparedList=list}return preparedList}function reduceElementsInList(list){if(listBuilder.maxNumberOfElements!==undefined&&list.length>listBuilder.maxNumberOfElements){list=list.slice(0,listBuilder.maxNumberOfElements)}return list}function sort(list){if(config.get("list").sort.enabled){list.sort(config.get("list").sort.method)}return list}};return scope}(EasyAutocomplete||{});var EasyAutocomplete=function(scope){scope.Template=function Template(options){var genericTemplates={basic:{type:"basic",method:function(element){return element},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(element){return element+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(element){return element},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(element){return element},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(element){return element},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},convertTemplateToMethod=function(template){var _fields=template.fields,buildMethod;if(template.type==="description"){buildMethod=genericTemplates.description.method;if(typeof _fields.description==="string"){buildMethod=function(elementValue,element){return elementValue+" - <span>"+element[_fields.description]+"</span>"}}else if(typeof _fields.description==="function"){buildMethod=function(elementValue,element){return elementValue+" - <span>"+_fields.description(element)+"</span>"}}return buildMethod}if(template.type==="iconRight"){if(typeof _fields.iconSrc==="string"){buildMethod=function(elementValue,element){return elementValue+"<img class='eac-icon' src='"+element[_fields.iconSrc]+"' />"}}else if(typeof _fields.iconSrc==="function"){buildMethod=function(elementValue,element){return elementValue+"<img class='eac-icon' src='"+_fields.iconSrc(element)+"' />"}}return buildMethod}if(template.type==="iconLeft"){if(typeof _fields.iconSrc==="string"){buildMethod=function(elementValue,element){return"<img class='eac-icon' src='"+element[_fields.iconSrc]+"' />"+elementValue}}else if(typeof _fields.iconSrc==="function"){buildMethod=function(elementValue,element){return"<img class='eac-icon' src='"+_fields.iconSrc(element)+"' />"+elementValue}}return buildMethod}if(template.type==="links"){if(typeof _fields.link==="string"){buildMethod=function(elementValue,element){return"<a href='"+element[_fields.link]+"' >"+elementValue+"</a>"}}else if(typeof _fields.link==="function"){buildMethod=function(elementValue,element){return"<a href='"+_fields.link(element)+"' >"+elementValue+"</a>"}}return buildMethod}if(template.type==="custom"){return template.method}return genericTemplates.basic.method},prepareBuildMethod=function(options){if(!options||!options.type){return genericTemplates.basic.method}if(options.type&&genericTemplates[options.type]){return convertTemplateToMethod(options)}else{return genericTemplates.basic.method}},templateClass=function(options){var emptyStringFunction=function(){return""};if(!options||!options.type){return emptyStringFunction}if(options.type&&genericTemplates[options.type]){return function(){var _cssClass=genericTemplates[options.type].cssClass;return function(){return _cssClass}}()}else{return emptyStringFunction}};this.getTemplateClass=templateClass(options);this.build=prepareBuildMethod(options)};return scope}(EasyAutocomplete||{});var EasyAutocomplete=function(scope){scope.main=function Core($input,options){var module={name:"EasyAutocomplete",shortcut:"eac"};var consts=new scope.Constans,config=new scope.Configuration(options),logger=new scope.Logger,template=new scope.Template(options.template),listBuilderService=new scope.ListBuilderService(config,scope.proccess),checkParam=config.equals,$field=$input,$container="",elementsList=[],selectedElement=-1,requestDelayTimeoutId;scope.consts=consts;this.getConstants=function(){return consts};this.getConfiguration=function(){return config};this.getContainer=function(){return $container};this.getSelectedItemIndex=function(){return selectedElement};this.getItemData=function(index){if(elementsList.length<index||elementsList[index]===undefined){return-1}else{return elementsList[index]}};this.getSelectedItemData=function(){return this.getItemData(selectedElement)};this.build=function(){prepareField()};this.init=function(){init()};function init(){if($field.length===0){logger.error("Input field doesn't exist.");return}if(!config.checkDataUrlProperties()){logger.error("One of options variables 'data' or 'url' must be defined.");return}if(!config.checkRequiredProperties()){logger.error("Will not work without mentioned properties.");return}prepareField();bindEvents()}function prepareField(){if($field.parent().hasClass(consts.getValue("WRAPPER_CSS_CLASS"))){removeContainer();removeWrapper()}createWrapper();createContainer();$container=$("#"+getContainerId());if(config.get("placeholder")){$field.attr("placeholder",config.get("placeholder"))}function createWrapper(){var $wrapper=$("<div>"),classes=consts.getValue("WRAPPER_CSS_CLASS");if(config.get("theme")&&config.get("theme")!==""){classes+=" eac-"+config.get("theme")}if(config.get("cssClasses")&&config.get("cssClasses")!==""){classes+=" "+config.get("cssClasses")}if(template.getTemplateClass()!==""){classes+=" "+template.getTemplateClass()}$wrapper.addClass(classes);$field.wrap($wrapper);if(config.get("adjustWidth")===true){adjustWrapperWidth()}}function adjustWrapperWidth(){var fieldWidth=$field.outerWidth();$field.parent().css("width",fieldWidth)}function removeWrapper(){$field.unwrap()}function createContainer(){var $elements_container=$("<div>").addClass(consts.getValue("CONTAINER_CLASS"));$elements_container.attr("id",getContainerId()).prepend($("<ul>"));(function(){$elements_container.on("show.eac",function(){switch(config.get("list").showAnimation.type){case"slide":var animationTime=config.get("list").showAnimation.time,callback=config.get("list").showAnimation.callback;$elements_container.find("ul").slideDown(animationTime,callback);break;case"fade":var animationTime=config.get("list").showAnimation.time,callback=config.get("list").showAnimation.callback;$elements_container.find("ul").fadeIn(animationTime),callback;break;default:$elements_container.find("ul").show();break}config.get("list").onShowListEvent()}).on("hide.eac",function(){switch(config.get("list").hideAnimation.type){case"slide":var animationTime=config.get("list").hideAnimation.time,callback=config.get("list").hideAnimation.callback;$elements_container.find("ul").slideUp(animationTime,callback);break;case"fade":var animationTime=config.get("list").hideAnimation.time,callback=config.get("list").hideAnimation.callback;$elements_container.find("ul").fadeOut(animationTime,callback);break;default:$elements_container.find("ul").hide();break}config.get("list").onHideListEvent()}).on("selectElement.eac",function(){$elements_container.find("ul li").removeClass("selected");$elements_container.find("ul li").eq(selectedElement).addClass("selected");config.get("list").onSelectItemEvent()}).on("loadElements.eac",function(event,listBuilders,phrase){var $item="",$listContainer=$elements_container.find("ul");$listContainer.empty().detach();elementsList=[];var counter=0;for(var builderIndex=0,listBuildersLength=listBuilders.length;builderIndex<listBuildersLength;builderIndex+=1){var listData=listBuilders[builderIndex].data;if(listData.length===0){continue}if(listBuilders[builderIndex].header!==undefined&&listBuilders[builderIndex].header.length>0){$listContainer.append("<div class='eac-category' >"+listBuilders[builderIndex].header+"</div>")}for(var i=0,listDataLength=listData.length;i<listDataLength&&counter<listBuilders[builderIndex].maxListSize;i+=1){$item=$("<li><div class='eac-item'></div></li>");(function(){var j=i,itemCounter=counter,elementsValue=listBuilders[builderIndex].getValue(listData[j]);$item.find(" > div").on("click",function(){$field.val(elementsValue).trigger("change");selectedElement=itemCounter;selectElement(itemCounter);config.get("list").onClickEvent();config.get("list").onChooseEvent()}).mouseover(function(){if(config.get("list").suppressMouseOverBehaviour!==true){selectedElement=itemCounter;selectElement(itemCounter)}config.get("list").onMouseOverEvent()}).mouseout(function(){config.get("list").onMouseOutEvent()}).html(template.build(highlight(elementsValue,phrase),listData[j]))})();$listContainer.append($item);elementsList.push(listData[i]);counter+=1}}$elements_container.append($listContainer);config.get("list").onLoadEvent()})})();$field.after($elements_container)}function removeContainer(){$field.next("."+consts.getValue("CONTAINER_CLASS")).remove()}function highlight(string,phrase){if(config.get("highlightPhrase")&&phrase!==""){return highlightPhrase(string,phrase)}else{return string}}function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function highlightPhrase(string,phrase){var escapedPhrase=escapeRegExp(phrase);return(string+"").replace(new RegExp("("+escapedPhrase+")","gi"),"<b>$1</b>")}}function getContainerId(){var elementId=$field.attr("id");elementId=consts.getValue("CONTAINER_ID")+elementId;return elementId}function bindEvents(){bindAllEvents();function bindAllEvents(){if(checkParam("autocompleteOff",true)){removeAutocomplete()}bindKeyup();bindKeydown();bindKeypress();bindFocus();if(checkParam("hideOnNoFocus",true)){bindBlur()}}function loadData(inputPhrase){if(inputPhrase.length<config.get("minCharNumber")){return}var configData=config.get("data");var localDataLength=config.get("localDataLengthMatch");if(configData!=="list-required"){if(localDataLength===false||!isNaN(localDataLength)&&localDataLength>=inputPhrase.length){var data=config.get("data");var listBuilders=listBuilderService.init(data);listBuilders=listBuilderService.updateCategories(listBuilders,data);listBuilders=listBuilderService.processData(listBuilders,inputPhrase);loadElements(listBuilders,inputPhrase);if($field.parent().find("li").length>0){showContainer()}else{hideContainer()}}}var settings=createAjaxSettings();if(settings.url===undefined||settings.url===""){settings.url=config.get("url")}if(settings.dataType===undefined||settings.dataType===""){settings.dataType=config.get("dataType")}if(settings.url!==undefined&&settings.url!=="list-required"){if(localDataLength===false||!isNaN(localDataLength)&&localDataLength<inputPhrase.length){settings.url=settings.url(inputPhrase);settings.data=config.get("preparePostData")(settings.data,inputPhrase);$.ajax(settings).done(function(data){var listBuilders=listBuilderService.init(data);listBuilders=listBuilderService.updateCategories(listBuilders,data);listBuilders=listBuilderService.convertXml(listBuilders);if(checkInputPhraseMatchResponse(inputPhrase,data)){listBuilders=listBuilderService.processData(listBuilders,inputPhrase);loadElements(listBuilders,inputPhrase)}if(listBuilderService.checkIfDataExists(listBuilders)&&$field.parent().find("li").length>0){showContainer()}else{hideContainer()}config.get("ajaxCallback")()}).fail(function(){logger.warning("Fail to load response data")}).always(function(){})}}function createAjaxSettings(){var settings={},ajaxSettings=config.get("ajaxSettings")||{};for(var set in ajaxSettings){settings[set]=ajaxSettings[set]}return settings}function checkInputPhraseMatchResponse(inputPhrase,data){if(config.get("matchResponseProperty")!==false){if(typeof config.get("matchResponseProperty")==="string"){return data[config.get("matchResponseProperty")]===inputPhrase}if(typeof config.get("matchResponseProperty")==="function"){return config.get("matchResponseProperty")(data)===inputPhrase}return true}else{return true}}}function bindKeyup(){$field.off("keyup").keyup(function(event){switch(event.keyCode){case 27:hideContainer();loseFieldFocus();break;case 38:event.preventDefault();if(elementsList.length>0&&selectedElement>0){selectedElement-=1;$field.val(config.get("getValue")(elementsList[selectedElement]));selectElement(selectedElement)}break;case 40:event.preventDefault();if(elementsList.length>0&&selectedElement<elementsList.length-1){selectedElement+=1;$field.val(config.get("getValue")(elementsList[selectedElement]));selectElement(selectedElement)}break;default:if(event.keyCode>40||event.keyCode===8){var inputPhrase=$field.val();if(!(config.get("list").hideOnEmptyPhrase===true&&event.keyCode===8&&inputPhrase==="")){if(config.get("requestDelay")>0){if(requestDelayTimeoutId!==undefined){clearTimeout(requestDelayTimeoutId)}requestDelayTimeoutId=setTimeout(function(){loadData(inputPhrase)},config.get("requestDelay"))}else{loadData(inputPhrase)}}else{hideContainer()}}break}})}function bindKeydown(){$field.on("keydown",function(evt){evt=evt||window.event;var keyCode=evt.keyCode;if(keyCode===38){suppressKeypress=true;return false}}).keydown(function(event){if(event.keyCode===13&&selectedElement>-1){$field.val(config.get("getValue")(elementsList[selectedElement]));config.get("list").onKeyEnterEvent();config.get("list").onChooseEvent();selectedElement=-1;hideContainer();if(config.get("preventDefaultOnEnter")===true){event.preventDefault()}}})}function bindKeypress(){$field.off("keypress")}function bindFocus(){$field.focus(function(){var fieldValue=$field.val();if(config.get("showDefaultListOnFocus")||fieldValue!==""&&elementsList.length>0){if(fieldValue===""){loadData("")}selectedElement=-1;showContainer()}})}function bindBlur(){$field.blur(function(){setTimeout(function(){selectedElement=-1;hideContainer()},250)})}function removeAutocomplete(){$field.attr("autocomplete","off")}}function showContainer(){$container.trigger("show.eac")}function hideContainer(){$container.trigger("hide.eac")}function selectElement(index){$container.trigger("selectElement.eac",index)}function loadElements(list,phrase){$container.trigger("loadElements.eac",[list,phrase])}function loseFieldFocus(){$field.trigger("blur")}};scope.easyAutocompleteHandles=[];scope.inputHasId=function(input){if($(input).attr("id")!==undefined&&$(input).attr("id").length>0){return true}else{return false}};scope.assignRandomId=function(input){var fieldId="";do{fieldId="eac-"+Math.floor(Math.random()*1e4)}while($("#"+fieldId).length!==0);elementId=scope.consts.getValue("CONTAINER_ID")+fieldId;$(input).attr("id",fieldId)};return scope}(EasyAutocomplete||{});$.fn.easyAutocomplete=function(options){return this.each(function(){var $this=$(this),eacHandle=new EasyAutocomplete.main($this,options);if(!EasyAutocomplete.inputHasId($this)){EasyAutocomplete.assignRandomId($this)}eacHandle.init();EasyAutocomplete.easyAutocompleteHandles[$this.attr("id")]=eacHandle})};$.fn.getSelectedItemIndex=function(){var inputId=$(this).attr("id");if(inputId!==undefined){return EasyAutocomplete.easyAutocompleteHandles[inputId].getSelectedItemIndex()}return-1};$.fn.getItemData=function(index){var inputId=$(this).attr("id");if(inputId!==undefined&&index>-1){return EasyAutocomplete.easyAutocompleteHandles[inputId].getItemData(index)}return-1};$.fn.getSelectedItemData=function(){var inputId=$(this).attr("id");if(inputId!==undefined){return EasyAutocomplete.easyAutocompleteHandles[inputId].getSelectedItemData()}return-1};
var Handlebars={};(function(Handlebars,undefined){Handlebars.VERSION="1.0.0";Handlebars.COMPILER_REVISION=4;Handlebars.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};Handlebars.helpers={};Handlebars.partials={};var toString=Object.prototype.toString,functionType="[object Function]",objectType="[object Object]";Handlebars.registerHelper=function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Handlebars.Exception("Arg not supported with multiple helpers")}Handlebars.Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}};Handlebars.registerPartial=function(name,str){if(toString.call(name)===objectType){Handlebars.Utils.extend(this.partials,name)}else{this.partials[name]=str}};Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Error("Missing helper: '"+arg+"'")}});Handlebars.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(type==="[object Array]"){if(context.length>0){return Handlebars.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}});Handlebars.K=function(){};Handlebars.createFrame=Object.create||function(object){Handlebars.K.prototype=object;var obj=new Handlebars.K;Handlebars.K.prototype=null;return obj};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(level,obj){if(Handlebars.logger.level<=level){var method=Handlebars.logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};Handlebars.log=function(level,obj){Handlebars.logger.log(level,obj)};Handlebars.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(options.data){data=Handlebars.createFrame(options.data)}if(context&&typeof context==="object"){if(context instanceof Array){for(var j=context.length;i<j;i++){if(data){data.index=i}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});Handlebars.registerHelper("if",function(conditional,options){var type=toString.call(conditional);if(type===functionType){conditional=conditional.call(this)}if(!conditional||Handlebars.Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});Handlebars.registerHelper("unless",function(conditional,options){return Handlebars.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn})});Handlebars.registerHelper("with",function(context,options){var type=toString.call(context);if(type===functionType){context=context.call(this)}if(!Handlebars.Utils.isEmpty(context))return options.fn(context)});Handlebars.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;Handlebars.log(level,context)});var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=new yy.ProgramNode([],$$[$0]);break;case 3:this.$=new yy.ProgramNode($$[$0-2],$$[$0]);break;case 4:this.$=new yy.ProgramNode($$[$0-1],[]);break;case 5:this.$=new yy.ProgramNode($$[$0]);break;case 6:this.$=new yy.ProgramNode([],[]);break;case 7:this.$=new yy.ProgramNode([]);break;case 8:this.$=[$$[$0]];break;case 9:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 10:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0]);break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0]);break;case 12:this.$=$$[$0];break;case 13:this.$=$$[$0];break;case 14:this.$=new yy.ContentNode($$[$0]);break;case 15:this.$=new yy.CommentNode($$[$0]);break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 18:this.$=$$[$0-1];break;case 19:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],$$[$0-2][2]==="&");break;case 20:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],true);break;case 21:this.$=new yy.PartialNode($$[$0-1]);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1]);break;case 23:break;case 24:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]];break;case 25:this.$=[[$$[$0-1]].concat($$[$0]),null];break;case 26:this.$=[[$$[$0-1]],$$[$0]];break;case 27:this.$=[[$$[$0]],null];break;case 28:this.$=[[$$[$0]],null];break;case 29:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 30:this.$=[$$[$0]];break;case 31:this.$=$$[$0];break;case 32:this.$=new yy.StringNode($$[$0]);break;case 33:this.$=new yy.IntegerNode($$[$0]);break;case 34:this.$=new yy.BooleanNode($$[$0]);break;case 35:this.$=$$[$0];break;case 36:this.$=new yy.HashNode($$[$0]);break;case 37:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 38:this.$=[$$[$0]];break;case 39:this.$=[$$[$0-2],$$[$0]];break;case 40:this.$=[$$[$0-2],new yy.StringNode($$[$0])];break;case 41:this.$=[$$[$0-2],new yy.IntegerNode($$[$0])];break;case 42:this.$=[$$[$0-2],new yy.BooleanNode($$[$0])];break;case 43:this.$=[$$[$0-2],$$[$0]];break;case 44:this.$=new yy.PartialNameNode($$[$0]);break;case 45:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0]));break;case 46:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0]));break;case 47:this.$=new yy.DataNode($$[$0]);break;case 48:this.$=new yy.IdNode($$[$0]);break;case 49:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 50:this.$=[{part:$$[$0]}];break}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}return this},more:function(){this._more=true;return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:yy_.yytext="\\";return 14;break;case 1:if(yy_.yytext.slice(-1)!=="\\")this.begin("mu");if(yy_.yytext.slice(-1)==="\\")yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1),this.begin("emu");if(yy_.yytext)return 14;break;case 2:return 14;break;case 3:if(yy_.yytext.slice(-1)!=="\\")this.popState();if(yy_.yytext.slice(-1)==="\\")yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1);return 14;break;case 4:yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-4);this.popState();return 15;break;case 5:return 25;break;case 6:return 16;break;case 7:return 20;break;case 8:return 19;break;case 9:return 19;break;case 10:return 23;break;case 11:return 22;break;case 12:this.popState();this.begin("com");break;case 13:yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5);this.popState();return 15;break;case 14:return 22;break;case 15:return 37;break;case 16:return 36;break;case 17:return 36;break;case 18:return 40;break;case 19:break;case 20:this.popState();return 24;break;case 21:this.popState();return 18;break;case 22:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"');return 31;break;case 23:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\'/g,"'");return 31;break;case 24:return 38;break;case 25:return 33;break;case 26:return 33;break;case 27:return 32;break;case 28:return 36;break;case 29:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2);return 36;break;case 30:return"INVALID";break;case 31:return 5;break}};lexer.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:false},emu:{rules:[3],inclusive:false},com:{rules:[4],inclusive:false},INITIAL:{rules:[0,1,2,31],inclusive:true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();Handlebars.Parser=handlebars;Handlebars.parse=function(input){if(input.constructor===Handlebars.AST.ProgramNode){return input}Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(input)};Handlebars.AST={};Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program";this.statements=statements;if(inverse){this.inverse=new Handlebars.AST.ProgramNode(inverse)}};Handlebars.AST.MustacheNode=function(rawParams,hash,unescaped){this.type="mustache";this.escaped=!unescaped;this.hash=hash;var id=this.id=rawParams[0];var params=this.params=rawParams.slice(1);var eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)};Handlebars.AST.PartialNode=function(partialName,context){this.type="partial";this.partialName=partialName;this.context=context};Handlebars.AST.BlockNode=function(mustache,program,inverse,close){var verifyMatch=function(open,close){if(open.original!==close.original){throw new Handlebars.Exception(open.original+" doesn't match "+close.original)}};verifyMatch(mustache.id,close);this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;if(this.inverse&&!this.program){this.isInverse=true}};Handlebars.AST.ContentNode=function(string){this.type="content";this.string=string};Handlebars.AST.HashNode=function(pairs){this.type="hash";this.pairs=pairs};Handlebars.AST.IdNode=function(parts){this.type="ID";var original="",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||part==="."||part==="this"){if(dig.length>0){throw new Handlebars.Exception("Invalid path: "+original)}else if(part===".."){depth++}else{this.isScoped=true}}else{dig.push(part)}}this.original=original;this.parts=dig;this.string=dig.join(".");this.depth=depth;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string};Handlebars.AST.PartialNameNode=function(name){this.type="PARTIAL_NAME";this.name=name.original};Handlebars.AST.DataNode=function(id){this.type="DATA";this.id=id};Handlebars.AST.StringNode=function(string){this.type="STRING";this.original=this.string=this.stringModeValue=string};Handlebars.AST.IntegerNode=function(integer){this.type="INTEGER";this.original=this.integer=integer;this.stringModeValue=Number(integer)};Handlebars.AST.BooleanNode=function(bool){this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true"};Handlebars.AST.CommentNode=function(comment){this.type="comment";this.comment=comment};var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}};Handlebars.Exception.prototype=new Error;Handlebars.SafeString=function(string){this.string=string};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;var escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={extend:function(obj,value){for(var key in value){if(value.hasOwnProperty(key)){obj[key]=value[key]}}},escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString()}else if(string==null||string===false){return""}string=string.toString();if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)},isEmpty:function(value){if(!value&&value!==0){return true}else if(toString.call(value)==="[object Array]"&&value.length===0){return true}else{return false}}};var Compiler=Handlebars.Compiler=function(){};var JavaScriptCompiler=Handlebars.JavaScriptCompiler=function(){};Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,out=[],params,param;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode.opcode==="DECLARE"){out.push("DECLARE "+opcode.name+"="+opcode.value)}else{params=[];for(var j=0;j<opcode.args.length;j++){param=opcode.args[j];if(typeof param==="string"){param='"'+param.replace("\n","\\n")+'"'}params.push(param)}out.push(opcode.opcode+" "+params.join(" "))}}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false}for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length){return false}for(var j=0;j<opcode.args.length;j++){if(opcode.args[j]!==otherOpcode.args[j]){return false}}}len=this.children.length;if(other.children.length!==len){return false}for(i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false}}return true},guid:0,compile:function(program,options){this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,if:true,unless:true,with:true,log:true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name]}}return this.program(program)},accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++){statement=statements[i];this[statement.type](statement)}this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue}else{this.addDepth(depth-1)}}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program){program=this.compileProgram(program)}if(inverse){inverse=this.compileProgram(inverse)}var type=this.classifyMustache(mustache);if(type==="helper"){this.helperMustache(mustache,program,inverse)}else if(type==="simple"){this.simpleMustache(mustache);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousMustache(mustache,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];if(this.options.stringParams){if(val.depth){this.addDepth(val.depth)}this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",val.stringModeValue,val.type)}else{this.accept(val)}this.opcode("assignToHash",pair[0])}this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=true;if(partial.context){this.ID(partial.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",partialName.name);this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){var options=this.options;var type=this.classifyMustache(mustache);if(type==="simple"){this.simpleMustache(mustache)}else if(type==="helper"){this.helperMustache(mustache)}else{this.ambiguousMustache(mustache)}if(mustache.escaped&&!options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousMustache:function(mustache,program,inverse){var id=mustache.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("invokeAmbiguous",name,isBlock)},simpleMustache:function(mustache){var id=mustache.id;if(id.type==="DATA"){this.DATA(id)}else if(id.parts.length){this.ID(id)}else{this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperMustache:function(mustache,program,inverse){var params=this.setupFullMustacheParams(mustache,program,inverse),name=mustache.id.parts[0];if(this.options.knownHelpers[name]){this.opcode("invokeKnownHelper",params.length,name)}else if(this.options.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+name)}else{this.opcode("invokeHelper",params.length,name)}},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);var name=id.parts[0];if(!name){this.opcode("pushContext")}else{this.opcode("lookupOnContext",id.parts[0])}for(var i=1,l=id.parts.length;i<l;i++){this.opcode("lookup",id.parts[i])}},DATA:function(data){this.options.data=true;if(data.id.isScoped||data.id.depth){throw new Handlebars.Exception("Scoped data references are not supported: "+data.original)}this.opcode("lookupData");var parts=data.id.parts;for(var i=0,l=parts.length;i<l;i++){this.opcode("lookup",parts[i])}},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){if(isNaN(depth)){throw new Error("EWOT")}if(depth===0){return}if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},classifyMustache:function(mustache){var isHelper=mustache.isHelper;var isEligible=mustache.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=mustache.id.parts[0];if(options.knownHelpers[name]){isHelper=true}else if(options.knownHelpersOnly){isEligible=false}}if(isHelper){return"helper"}else if(isEligible){return"ambiguous"}else{return"simple"}},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth)}this.opcode("getContext",param.depth||0);this.opcode("pushStringParam",param.stringModeValue,param.type)}else{this[param.type](param)}}},setupMustacheParams:function(mustache){var params=mustache.params;this.pushParams(params);if(mustache.hash){this.hash(mustache.hash)}else{this.opcode("emptyHash")}return params},setupFullMustacheParams:function(mustache,program,inverse){var params=mustache.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(mustache.hash){this.hash(mustache.hash)}else{this.opcode("emptyHash")}return params}};var Literal=function(value){this.value=value};JavaScriptCompiler.prototype={nameLookup:function(parent,name){
if(/^[0-9]+$/.test(name)){return parent+"["+name+"]"}else if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){return parent+"."+name}else{return parent+"['"+name+"']"}},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";"}else{return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(l=opcodes.length;this.i<l;this.i++){opcode=opcodes[this.i];if(opcode.opcode==="DECLARE"){this[opcode.name]=opcode.value}else{this[opcode.opcode].apply(this,opcode.args)}}return this.createFunctionContext(asObject)},nextOpcode:function(){var opcodes=this.environment.opcodes;return opcodes[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace;var copies="helpers = this.merge(helpers, "+namespace+".helpers);";if(this.environment.usePartial){copies=copies+" partials = this.merge(partials, "+namespace+".partials);"}if(this.options.data){copies=copies+" data = data || {};"}out.push(copies)}else{out.push("")}if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer())}else{out.push("")}this.lastContext=0;this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ")}if(!this.isChild){for(var alias in this.context.aliases){if(this.context.aliases.hasOwnProperty(alias)){this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.source.push("return buffer;")}var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i])}var source=this.mergeSource();if(!this.isChild){var revision=Handlebars.COMPILER_REVISION,versions=Handlebars.REVISION_CHANGES[revision];source="this.compilerInfo = ["+revision+",'"+versions+"'];\n"+source}if(asObject){params.push(source);return Function.apply(this,params)}else{var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";Handlebars.log(Handlebars.logger.DEBUG,functionSource+"\n\n");return functionSource}},mergeSource:function(){var source="",buffer;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer){if(buffer){buffer=buffer+"\n    + "+line.content}else{buffer=line.content}}else{if(buffer){source+="buffer += "+buffer+";\n  ";buffer=undefined}source+=line+"\n  "}}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);this.replaceStack(function(current){params.splice(1,0,current);return"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current);params[params.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)))},append:function(){this.flushInline();var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth}},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(id){this.push("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext);this.pushString(type);if(typeof string==="string"){this.pushString(string)}else{this.pushStackLiteral(string)}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.register("hashTypes","{}");this.register("hashContexts","{}")}},pushHash:function(){}