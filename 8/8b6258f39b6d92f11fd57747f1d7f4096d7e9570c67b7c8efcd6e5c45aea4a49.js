/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t,n={7757:(e,t,n)=>{e.exports=n(3076)},9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),a=n(6026),i=n(5327),s=n(4109),o=n(7985),u=n(5061),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(4657);e.exports=function(e){return new Promise((function(t,d){var c=e.data,h=e.headers;r.isFormData(c)&&delete h["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||o(e.url)||(f=new window.XDomainRequest,p="onload",m=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var _=e.auth.username||"",g=e.auth.password||"";h.Authorization="Basic "+l(_+":"+g)}if(f.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[p]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:e,request:f};a(t,d,r),f=null}},f.onerror=function(){d(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){d(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=n(4372),v=(e.withCredentials||o(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in f&&r.forEach(h,(function(e,t){void 0===c&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),d(e),f=null)})),void 0===c&&(c=null),f.send(c)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),a=n(1849),i=n(321),s=n(5655);function o(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var u=o(s);u.Axios=i,u.create=function(e){return o(r.merge(s,e))},u.Cancel=n(5263),u.CancelToken=n(4972),u.isCancel=n(6502),u.all=function(e){return Promise.all(e)},u.spread=n(8713),e.exports=u,e.exports.default=u},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(5655),a=n(4867),i=n(782),s=n(3572);function o(e){this.defaults=e,this.interceptors={request:new i,response:new i}}o.prototype.request=function(e){"string"==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),(e=a.merge(r,this.defaults,{method:"get"},e)).method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},a.forEach(["delete","get","head","options"],(function(e){o.prototype[e]=function(t,n){return this.request(a.merge(n||{},{method:e,url:t}))}})),a.forEach(["post","put","patch"],(function(e){o.prototype[e]=function(t,n,r){return this.request(a.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=o},782:(e,t,n)=>{"use strict";var r=n(4867);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,a,i){var s=new Error(e);return r(s,t,n,a,i)}},3572:(e,t,n)=>{"use strict";var r=n(4867),a=n(8527),i=n(6502),s=n(5655),o=n(1793),u=n(7303);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.baseURL&&!o(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return l(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(l(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},5655:(e,t,n)=>{"use strict";var r=n(4155),a=n(4867),i=n(6016),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r)&&(u=n(5448)),u),transformRequest:[function(e,t){return i(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),a.forEach(["post","put","patch"],(function(e){l.headers[e]=a.merge(s)})),e.exports=l},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},4657:e=>{"use strict";function t(){this.message="String contains an invalid character"}t.prototype=new Error,t.prototype.code=5,t.prototype.name="InvalidCharacterError",e.exports=function(e){for(var n,r,a=String(e),i="",s=0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.charAt(0|s)||(o="=",s%1);i+=o.charAt(63&n>>8-s%1*8)){if((r=a.charCodeAt(s+=3/4))>255)throw new t;n=n<<8|r}return i}},5327:(e,t,n)=>{"use strict";var r=n(4867);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)&&(t+="[]"),r.isArray(e)||(e=[e]),r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))})))})),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&a.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4867:(e,t,n)=>{"use strict";var r=n(1849),a=n(8778),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function o(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:a,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,a=arguments.length;r<a;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},8778:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},6431:()=>{Vue.filter("date",(function(e){return moment.utc(e).local().format("MMMM Do, YYYY")})),Vue.filter("datetime",(function(e){return moment.utc(e).local().format("MMMM Do, YYYY h:mm A")})),Vue.filter("relative",(function(e){return moment.utc(e).local().locale("en-short").fromNow()})),Vue.filter("capitalize",(function(e){return e||0===e?e.toString().charAt(0).toUpperCase()+e.slice(1):""})),Vue.filter("currency",(function(e){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";var t=Math.abs(e).toFixed(2),n=t.slice(0,-3),r=n.length%3,a=r>0?n.slice(0,r)+(n.length>3?",":""):"",i=t.slice(-3);return(e<0?"-":"")+window.Spark.currencySymbol+a+n.slice(r).replace(/(\d{3})(?=\d)/g,"$1,")+i}))},4342:(e,t,n)=>{Spark.forms={register:{},updateContactInformation:{},updateTeamMember:{}},n(9751),n(2181),$.extend(Spark,n(3809))},2181:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}window.SparkFormErrors=function(){this.errors={},this.hasErrors=function(){return!_.isEmpty(this.errors)},this.has=function(e){return _.indexOf(_.keys(this.errors),e)>-1},this.all=function(){return this.errors},this.flatten=function(){return _.flatten(_.toArray(this.errors))},this.get=function(e){if(this.has(e))return this.errors[e][0]},this.set=function(t){"object"===e(t)?this.errors=t:this.errors={form:["Something went wrong. Please try again or contact customer support."]}},this.forget=function(e){void 0===e?this.errors={}:Vue.delete(this.errors,e)}}},9751:()=>{window.SparkForm=function(e){var t=this;$.extend(this,e),this.errors=new SparkFormErrors,this.busy=!1,this.successful=!1,this.startProcessing=function(){t.errors.forget(),t.busy=!0,t.successful=!1},this.finishProcessing=function(){t.busy=!1,t.successful=!0},this.resetStatus=function(){t.errors.forget(),t.busy=!1,t.successful=!1},this.setErrors=function(e){t.busy=!1,t.errors.set(e)}}},3809:e=>{e.exports={post:function(e,t){return Spark.sendForm("post",e,t)},put:function(e,t){return Spark.sendForm("put",e,t)},patch:function(e,t){return Spark.sendForm("patch",e,t)},delete:function(e,t){return Spark.sendForm("delete",e,t)},sendForm:function(e,t,n){return new Promise((function(r,a){n.startProcessing(),axios[e](t,JSON.parse(JSON.stringify(n))).then((function(e){n.finishProcessing(),r(e.data)})).catch((function(e){n.setErrors(e.response.data.errors),a(e.response.data)}))}))}}},2617:(e,t,n)=>{e.exports={mixins:[n(5694)],data:function(){return{loadingCurrentDiscount:!1,currentDiscount:null,discountingUser:null,form:new SparkForm({type:"amount",value:null,duration:"once",months:null})}},created:function(){var e=this;Bus.$on("addDiscount",(function(t){e.form=new SparkForm({type:"amount",value:null,duration:"once",months:null}),e.setUser(t),$("#modal-add-discount").modal("show")}))},methods:{setUser:function(e){this.discountingUser=e,this.getCurrentDiscountForUser(e)},applyDiscount:function(){Spark.post("/spark/kiosk/users/discount/"+this.discountingUser.id,this.form).then((function(){$("#modal-add-discount").modal("hide")}))}}}},5434:e=>{e.exports={data:function(){return{announcements:[],updatingAnnouncement:null,deletingAnnouncement:null,createForm:new SparkForm({body:"",action_text:"",action_url:""}),updateForm:new SparkForm({body:"",action_text:"",action_url:""}),deleteForm:new SparkForm({})}},created:function(){var e=this;Bus.$on("sparkHashChanged",(function(t,n){"announcements"==t&&0===e.announcements.length&&e.getAnnouncements()}))},methods:{getAnnouncements:function(){var e=this;axios.get("/spark/kiosk/announcements").then((function(t){e.announcements=t.data}))},create:function(){var e=this;Spark.post("/spark/kiosk/announcements",this.createForm).then((function(){e.createForm=new SparkForm({body:"",action_text:"",action_url:""}),e.getAnnouncements()}))},editAnnouncement:function(e){this.updatingAnnouncement=e,this.updateForm.icon=e.icon,this.updateForm.body=e.body,this.updateForm.action_text=e.action_text,this.updateForm.action_url=e.action_url,$("#modal-update-announcement").modal("show")},update:function(){var e=this;Spark.put("/spark/kiosk/announcements/"+this.updatingAnnouncement.id,this.updateForm).then((function(){e.getAnnouncements(),$("#modal-update-announcement").modal("hide")}))},approveAnnouncementDelete:function(e){this.deletingAnnouncement=e,$("#modal-delete-announcement").modal("show")},deleteAnnouncement:function(){var e=this;Spark.delete("/spark/kiosk/announcements/"+this.deletingAnnouncement.id,this.deleteForm).then((function(){e.getAnnouncements(),$("#modal-delete-announcement").modal("hide")}))}}}},4309:(e,t,n)=>{e.exports={props:["user"],mixins:[n(8256)],mounted:function(){this.usePushStateForTabs(".spark-settings-tabs")},created:function(){Bus.$on("sparkHashChanged",(function(e,t){return"users"==e&&setTimeout((function(){$("#kiosk-users-search").focus()}),150),!0}))}}},6352:e=>{e.exports={props:["user"],data:function(){return{monthlyRecurringRevenue:0,yearlyRecurringRevenue:0,totalVolume:0,genericTrialUsers:0,indicators:[],lastMonthsIndicators:null,lastYearsIndicators:null,plans:[]}},created:function(){var e=this;Bus.$on("sparkHashChanged",(function(t,n){"metrics"==t&&0===e.yearlyRecurringRevenue&&(e.getRevenue(),e.getPlans(),e.getTrialUsers(),e.getPerformanceIndicators())}))},methods:{getRevenue:function(){var e=this;axios.get("/spark/kiosk/performance-indicators/revenue").then((function(t){e.yearlyRecurringRevenue=t.data.yearlyRecurringRevenue,e.monthlyRecurringRevenue=t.data.monthlyRecurringRevenue,e.totalVolume=t.data.totalVolume}))},getPlans:function(){var e=this;axios.get("/spark/kiosk/performance-indicators/plans").then((function(t){e.plans=t.data}))},getTrialUsers:function(){var e=this;axios.get("/spark/kiosk/performance-indicators/trialing").then((function(t){e.genericTrialUsers=parseInt(t.data)}))},getPerformanceIndicators:function(){var e=this;axios.get("/spark/kiosk/performance-indicators").then((function(t){e.indicators=t.data.indicators,e.lastMonthsIndicators=t.data.last_month,e.lastYearsIndicators=t.data.last_year,Vue.nextTick((function(){e.drawCharts()}))}))},drawCharts:function(){this.drawMonthlyRecurringRevenueChart(),this.drawYearlyRecurringRevenueChart(),this.drawDailyVolumeChart(),this.drawNewUsersChart()},drawMonthlyRecurringRevenueChart:function(){return this.drawCurrencyChart("monthlyRecurringRevenueChart",30,(function(e){return e.monthly_recurring_revenue}))},drawYearlyRecurringRevenueChart:function(){return this.drawCurrencyChart("yearlyRecurringRevenueChart",30,(function(e){return e.yearly_recurring_revenue}))},drawDailyVolumeChart:function(){return this.drawCurrencyChart("dailyVolumeChart",14,(function(e){return e.daily_volume}))},drawNewUsersChart:function(){return this.drawChart("newUsersChart",14,(function(e){return e.new_users}))},drawCurrencyChart:function(e,t,n){return this.drawChart(e,t,n,(function(e){return Vue.filter("currency")(e.value)}))},drawChart:function(e,t,n,r){var a=JSON.parse(JSON.stringify(this.baseChartDataSet));a.data=_.map(_.last(this.indicators,t),n);var i={labels:_.last(this.availableChartDates,t),datasets:[a]},s={responsive:!0};4===arguments.length&&(s.scaleLabel=r);new Chart(document.getElementById(e).getContext("2d"),{type:"line",data:i,options:s})},percentChange:function(e,t){var n=Math.round((e-t)/t*100);return n>0?"+"+n.toFixed(0):n.toFixed(0)}},computed:{monthlyChangeInMonthlyRecurringRevenue:function(){return!(!this.lastMonthsIndicators||!this.indicators)&&this.percentChange(_.last(this.indicators).monthly_recurring_revenue,this.lastMonthsIndicators.monthly_recurring_revenue)},yearlyChangeInMonthlyRecurringRevenue:function(){return!(!this.lastYearsIndicators||!this.indicators)&&this.percentChange(_.last(this.indicators).monthly_recurring_revenue,this.lastYearsIndicators.monthly_recurring_revenue)},monthlyChangeInYearlyRecurringRevenue:function(){return!(!this.lastMonthsIndicators||!this.indicators)&&this.percentChange(_.last(this.indicators).yearly_recurring_revenue,this.lastMonthsIndicators.yearly_recurring_revenue)},yearlyChangeInYearlyRecurringRevenue:function(){return!(!this.lastYearsIndicators||!this.indicators)&&this.percentChange(_.last(this.indicators).yearly_recurring_revenue,this.lastYearsIndicators.yearly_recurring_revenue)},totalTrialUsers:function(){return this.genericTrialUsers+_.reduce(this.plans,(function(e,t){return e+t.trialing}),0)},availableChartDates:function(){return _.map(this.indicators,(function(e){return moment(e.created_at).format("M/D")}))},baseChartDataSet:function(){return{label:"Dataset",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)"}}}}},2027:e=>{e.exports={props:["user","plans"],data:function(){return{loading:!1,profile:null,revenue:0}},created:function(){var e=this;this.$parent.$on("showUserProfile",(function(t){e.getUserProfile(t)}))},mounted:function(){var e=this;Mousetrap.bind("esc",(function(t){return e.showSearch()}))},methods:{getUserProfile:function(e){var t=this;this.loading=!0,axios.get("/spark/kiosk/users/"+e+"/profile").then((function(e){t.profile=e.data.user,t.revenue=e.data.revenue,t.loading=!1}))},impersonate:function(e){window.location="/spark/kiosk/users/impersonate/"+e.id},addDiscount:function(e){Bus.$emit("addDiscount",e)},activePlan:function(e){if(this.activeSubscription(e)){var t=this.activeSubscription(e);return _.find(this.plans,(function(e){return e.id==t.provider_plan}))}},activeSubscription:function(e){var t=this.subscription(e);if(!(!t||t.ends_at&&moment.utc().isAfter(moment.utc(t.ends_at))))return t},subscription:function(e){if(e){var t=_.find(e.subscriptions,(function(e){return"default"==e.name}));return void 0!==t?t:void 0}},customerUrlOnBillingProvider:function(e){if(e)return this.spark.usesStripe?"https://dashboard.stripe.com/customers/"+e.stripe_id:"https://"+("production"==Spark.env?"":"sandbox.")+"braintreegateway.com/merchants/"+Spark.braintreeMerchantId+"/customers/"+e.braintree_id},showSearch:function(){this.$parent.$emit("showSearch"),this.profile=null}}}},3891:e=>{e.exports={props:["user"],data:function(){return{plans:[],searchForm:new SparkForm({query:""}),searching:!1,noSearchResults:!1,searchResults:[],showingUserProfile:!1}},created:function(){var e=this;this.getPlans(),this.$on("showSearch",(function(){e.navigateToSearch()})),Bus.$on("sparkHashChanged",(function(t,n){return"users"!=t||(n&&n.length>0?e.loadProfile({id:n[0]}):e.showSearch()),!0}))},methods:{getPlans:function(){var e=this;axios.get("/spark/plans").then((function(t){e.plans=t.data}))},search:function(){var e=this;this.searching=!0,this.noSearchResults=!1,axios.post("/spark/kiosk/users/search",this.searchForm).then((function(t){e.searchResults=t.data,e.noSearchResults=0===e.searchResults.length,e.searching=!1}))},navigateToSearch:function(){history.pushState(null,null,"#/users"),this.showSearch()},showSearch:function(){this.showingUserProfile=!1,Vue.nextTick((function(){$("#kiosk-users-search").focus()}))},showUserProfile:function(e){history.pushState(null,null,"#/users/"+e.id),this.loadProfile(e)},loadProfile:function(e){this.$emit("showUserProfile",e.id),this.showingUserProfile=!0}}}},9574:e=>{e.exports={computed:{billable:function(){return this.billableType?"user"==this.billableType?this.user:this.team:this.user},billingUser:function(){return this.billableType&&"user"==this.billableType},spark:function(){return window.Spark}}}},8479:e=>{window.braintreeCheckout=[],e.exports={methods:{braintree:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){braintree.setup(Spark.braintreeToken,"dropin",{container:e,paypal:{singleUse:!1,locale:"en_us",enableShippingAddress:!1},dataCollector:{paypal:!0},onReady:function(t){window.braintreeCheckout[e]=t},onPaymentMethodReceived:t})})),resetBraintree:function(e,t){var n=this;window.braintreeCheckout[e].teardown((function(){window.braintreeCheckout[e]=null,n.braintree(e,t)}))}}}},5694:e=>{e.exports={methods:{getCurrentDiscountForBillable:function(e,t){return"user"===e?this.getCurrentDiscountForUser(t):this.getCurrentDiscountForTeam(t)},getCurrentDiscountForUser:function(e){var t=this;this.currentDiscount=null,this.loadingCurrentDiscount=!0,axios.get("/coupon/user/".concat(e.id)).then((function(e){200==e.status&&(t.currentDiscount=e.data),t.loadingCurrentDiscount=!1}))},getCurrentDiscountForTeam:function(e){var t=this;this.currentDiscount=null,this.loadingCurrentDiscount=!0,axios.get("/coupon/".concat(Spark.teamString,"/").concat(e.id)).then((function(e){200==e.status&&(t.currentDiscount=e.data),t.loadingCurrentDiscount=!1}))},formattedDiscount:function(e){if(e)return e.percent_off?"".concat(e.percent_off,"%"):Vue.filter("currency")(this.calculateAmountOff(e.amount_off))},calculateAmountOff:function(e){return e/100},formattedDiscountDuration:function(e){if(e)switch(e.duration){case"forever":return"all future invoices";case"once":return"a single invoice";case"repeating":return"all invoices during the next ".concat(e.duration_in_months," months")}}}}},8088:e=>{e.exports={data:function(){return{selectedPlan:null,detailingPlan:null,showingMonthlyPlans:!0,showingYearlyPlans:!1}},methods:{showMonthlyPlans:function(){this.showingMonthlyPlans=!0,this.showingYearlyPlans=!1},showYearlyPlans:function(){this.showingMonthlyPlans=!1,this.showingYearlyPlans=!0},showPlanDetails:function(e){this.detailingPlan=e,$("#modal-plan-details").modal("show")}},computed:{activeInterval:function(){return this.showingMonthlyPlans?"monthly":"yearly"},plansForActiveInterval:function(){var e=this;return _.filter(this.plans,(function(t){return t.active&&(0==t.price||t.interval==e.activeInterval)}))},paidPlans:function(){return _.filter(this.plans,(function(e){return e.active&&e.price>0}))},paidPlansForActiveInterval:function(){return _.filter(this.plansForActiveInterval,(function(e){return e.active&&e.price>0}))},hasMonthlyAndYearlyPlans:function(){return this.monthlyPlans.length>0&&this.yearlyPlans.length>0},hasMonthlyAndYearlyPaidPlans:function(){return _.where(this.paidPlans,{interval:"monthly"}).length>0&&_.where(this.paidPlans,{interval:"yearly"}).length>0},onlyHasYearlyPlans:function(){return 0==this.monthlyPlans.length&&this.yearlyPlans.length>0},onlyHasYearlyPaidPlans:function(){return 0==_.where(this.paidPlans,{interval:"monthly"}).length&&_.where(this.paidPlans,{interval:"yearly"}).length>0},monthlyPlans:function(){return _.filter(this.plans,(function(e){return e.active&&"monthly"==e.interval}))},yearlyPlans:function(){return _.filter(this.plans,(function(e){return e.active&&"yearly"==e.interval}))}}}},5814:e=>{e.exports={data:function(){return{selectingPlan:null,planForm:new SparkForm({})}},methods:{updateSubscription:function(e){var t=this;this.selectingPlan=e,this.planForm.errors.forget(),axios.put(this.urlForPlanUpdate,{plan:e.id}).then((function(){Bus.$emit("updateUser"),Bus.$emit("updateTeam")})).catch((function(e){422==e.response.status?t.planForm.errors.set(e.response.data.errors):t.planForm.errors.set({plan:["We were unable to update your subscription. Please contact customer support."]})})).finally((function(){t.selectingPlan=null}))},isActivePlan:function(e){return this.activeSubscription&&this.activeSubscription.provider_plan==e.id}},computed:{activePlan:function(){var e=this;if(this.activeSubscription)return _.find(this.plans,(function(t){return t.id==e.activeSubscription.provider_plan}))},activePlanIsMonthly:function(){return this.activePlan&&"monthly"==this.activePlan.interval},activeSubscription:function(){if(this.billable){var e=_.find(this.billable.subscriptions,(function(e){return"default"==e.name}));return void 0!==e?e:void 0}},subscriptionIsActive:function(){return this.activeSubscription&&!this.activeSubscription.ends_at},onGenericTrial:function(){return this.billable.trial_ends_at&&moment.utc(this.billable.trial_ends_at).isAfter(moment.utc())},subscriptionIsOnTrial:function(){return!!this.onGenericTrial||this.activeSubscription&&this.activeSubscription.trial_ends_at&&moment.utc().isBefore(moment.utc(this.activeSubscription.trial_ends_at))},trialEndsAt:function(){if(this.subscriptionIsOnTrial)return this.onGenericTrial?moment.utc(this.billable.trial_ends_at).local().format("MMMM Do, YYYY"):moment.utc(this.activeSubscription.trial_ends_at).local().format("MMMM Do, YYYY")},subscriptionIsOnGracePeriod:function(){return this.activeSubscription&&this.activeSubscription.ends_at&&moment.utc().isBefore(moment.utc(this.activeSubscription.ends_at))},needsSubscription:function(){return!this.activeSubscription||this.activeSubscription.ends_at&&moment.utc().isAfter(moment.utc(this.activeSubscription.ends_at))},urlForPlanUpdate:function(){return this.billingUser?"/settings/subscription":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/subscription")}}}},8256:e=>{e.exports={pushStateSelector:null,methods:{usePushStateForTabs:function(e){var t=this;this.pushStateSelector=e,this.registerTabClickHandler(),window.addEventListener("popstate",(function(e){t.activateTabForCurrentHash()})),window.location.hash?this.activateTabForCurrentHash():this.activateFirstTab()},registerTabClickHandler:function(){var e=this;$("".concat(this.pushStateSelector,' a[data-toggle="tab"]')).on("click",(function(t){e.removeActiveClassFromTabs(),history.pushState(null,null,"#/"+$(this).attr("href").substring(1)),e.broadcastTabChange($(this).attr("href").substring(1))}))},activateTabForCurrentHash:function(){var e=window.location.hash.substring(2),t=e.split("/");e=t.shift(),this.removeActiveClassFromTabs();var n=$("".concat(this.pushStateSelector,' a[href="#').concat(e,'"][data-toggle="tab"]'));n.length>0?(n.tab("show"),this.broadcastTabChange(e,t)):this.activateFirstTab()},activateFirstTab:function(){var e=$("".concat(this.pushStateSelector,' a[data-toggle="tab"]')).first();e.tab("show"),this.broadcastTabChange(e.attr("href").substring(1))},removeActiveClassFromTabs:function(){$("".concat(this.pushStateSelector," li")).removeClass("active")},broadcastTabChange:function(e,t){Bus.$emit("sparkHashChanged",e,t)}}}},2297:e=>{e.exports={methods:{collectsVat:function(e){return!!Spark.collectsEuropeanVat&&_.contains(["BE","BG","CZ","DK","DE","EE","IE","GR","ES","FR","HR","IT","CY","LV","LT","LU","HU","MT","NL","AT","PL","PT","RO","SI","SK","FI","SE","GB"],e)},refreshTaxRate:function(e){var t=this;axios.post("/tax-rate",JSON.parse(JSON.stringify(e))).then((function(e){t.taxRate=e.data.rate}))},taxAmount:function(e){return e.price*(this.taxRate/100)},priceWithTax:function(e){return e.price+this.taxAmount(e)}}}},2980:e=>{e.exports={props:["user","teams","currentTeam","hasUnreadNotifications","hasUnreadAnnouncements"],methods:{showNotifications:function(){Bus.$emit("showNotifications")},showSupportForm:function(){Bus.$emit("showSupportForm")}}}},8548:e=>{e.exports={props:["notifications","hasUnreadAnnouncements","loadingNotifications"],data:function(){return{showingNotifications:!0,showingAnnouncements:!1}},methods:{showNotifications:function(){this.showingNotifications=!0,this.showingAnnouncements=!1},showAnnouncements:function(){this.showingNotifications=!1,this.showingAnnouncements=!0,this.updateLastReadAnnouncementsTimestamp()},updateLastReadAnnouncementsTimestamp:function(){axios.put("/user/last-read-announcements-at").then((function(){Bus.$emit("updateUser")}))}},computed:{activeNotifications:function(){return this.notifications?this.showingNotifications?this.notifications.notifications:this.notifications.announcements:[]},hasNotifications:function(){return this.notifications&&this.notifications.notifications.length>0},hasAnnouncements:function(){return this.notifications&&this.notifications.announcements.length>0}}}},8139:e=>{e.exports={data:function(){return{tokens:[],availableAbilities:[]}},mounted:function(){this.getTokens(),this.getAvailableAbilities()},created:function(){var e=this;this.$on("updateTokens",(function(){e.getTokens()}))},methods:{getTokens:function(){var e=this;axios.get("/settings/api/tokens").then((function(t){return e.tokens=t.data}))},getAvailableAbilities:function(){var e=this;axios.get("/settings/api/token/abilities").then((function(t){return e.availableAbilities=t.data}))}}}},3042:e=>{e.exports={props:["availableAbilities"],data:function(){return{showingToken:null,allAbilitiesAssigned:!1,form:new SparkForm({name:"",abilities:[]})}},computed:{copyCommandSupported:function(){return document.queryCommandSupported("copy")}},watch:{availableAbilities:function(){this.availableAbilities.length>0&&this.assignDefaultAbilities()}},methods:{assignDefaultAbilities:function(){var e=_.filter(this.availableAbilities,(function(e){return e.default}));this.form.abilities=_.pluck(e,"value")},assignAllAbilities:function(){this.allAbilitiesAssigned=!0,this.form.abilities=_.pluck(this.availableAbilities,"value")},removeAllAbilities:function(){this.allAbilitiesAssigned=!1,this.form.abilities=[]},toggleAbility:function(e){this.abilityIsAssigned(e)?this.form.abilities=_.reject(this.form.abilities,(function(t){return t==e})):this.form.abilities.push(e)},abilityIsAssigned:function(e){return _.contains(this.form.abilities,e)},create:function(){var e=this;Spark.post("/settings/api/token",this.form).then((function(t){e.showToken(t.token),e.resetForm(),e.$parent.$emit("updateTokens")}))},showToken:function(e){this.showingToken=e,$("#modal-show-token").modal("show")},selectToken:function(){$("#api-token").select(),this.copyCommandSupported&&document.execCommand("copy")},resetForm:function(){this.form.name="",this.assignDefaultAbilities(),this.allAbilitiesAssigned=!1}}}},593:e=>{e.exports={props:["tokens","availableAbilities"],data:function(){return{updatingToken:null,deletingToken:null,updateTokenForm:new SparkForm({name:"",abilities:[]}),deleteTokenForm:new SparkForm({})}},methods:{editToken:function(e){this.updatingToken=e,this.initializeUpdateFormWith(e),$("#modal-update-token").modal("show")},initializeUpdateFormWith:function(e){this.updateTokenForm.name=e.name,this.updateTokenForm.abilities=e.metadata.abilities},updateToken:function(){var e=this;Spark.put("/settings/api/token/".concat(this.updatingToken.id),this.updateTokenForm).then((function(t){e.$parent.$emit("updateTokens"),$("#modal-update-token").modal("hide")}))},toggleAbility:function(e){this.abilityIsAssigned(e)?this.updateTokenForm.abilities=_.reject(this.updateTokenForm.abilities,(function(t){return t==e})):this.updateTokenForm.abilities.push(e)},abilityIsAssigned:function(e){return _.contains(this.updateTokenForm.abilities,e)},approveTokenDelete:function(e){this.deletingToken=e,$("#modal-delete-token").modal("show")},deleteToken:function(){var e=this;Spark.delete("/settings/api/token/".concat(this.deletingToken.id),this.deleteTokenForm).then((function(){e.$parent.$emit("updateTokens"),$("#modal-delete-token").modal("hide")}))}}}},9215:e=>{e.exports={props:["user","team","billableType"],data:function(){return{invoices:[]}},mounted:function(){this.getInvoices()},methods:{getInvoices:function(){var e=this;axios.get(this.urlForInvoices).then((function(t){e.invoices=_.filter(t.data,(function(e){return"$0.00"!=e.total}))}))}},computed:{urlForInvoices:function(){return this.billingUser?"/settings/invoices":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/invoices")}}}},3215:e=>{e.exports={props:["user","team","invoices","billableType"],methods:{downloadUrlFor:function(e){return this.billingUser?"/settings/invoice/".concat(e.id):"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/invoice/").concat(e.id)}}}},5350:e=>{e.exports={props:["user","team","billableType"],data:function(){return{form:new SparkForm({information:""})}},mounted:function(){this.form.information=this.billable.extra_billing_information},methods:{update:function(){Spark.put(this.urlForUpdate,this.form)}},computed:{urlForUpdate:function(){return this.billingUser?"/settings/extra-billing-information":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/extra-billing-information")}}}},7991:(e,t,n)=>{e.exports={props:["user","team","billableType"],mixins:[n(5694)],data:function(){return{currentDiscount:null,loadingCurrentDiscount:!1}},created:function(){var e=this;this.$on("updateDiscount",(function(){return e.getCurrentDiscountForBillable(e.billableType,e.billable),!0}))},mounted:function(){this.getCurrentDiscountForBillable(this.billableType,this.billable)}}},2143:e=>{e.exports={props:["user","team","billableType"],data:function(){return{form:new SparkForm({coupon:""})}},methods:{redeem:function(){var e=this;Spark.post(this.urlForRedemption,this.form).then((function(){e.form.coupon="",e.$parent.$emit("updateDiscount")}))}},computed:{urlForRedemption:function(){return this.billingUser?"/settings/payment-method/coupon":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/payment-method/coupon")}}}},2994:e=>{e.exports={props:["user","team","billableType"],data:function(){return{form:new SparkForm({vat_id:""})}},mounted:function(){this.form.vat_id=this.billable.vat_id},methods:{update:function(){Spark.put(this.urlForUpdate,this.form)}},computed:{urlForUpdate:function(){return this.billingUser?"/settings/payment-method/vat-id":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/payment-method/vat-id")}}}},418:e=>{e.exports={props:["user"]}},1010:e=>{e.exports={props:["user"],data:function(){return{form:new SparkForm({})}},methods:{update:function(e){if(e.preventDefault(),this.$refs.photo.files.length){var t=this;this.form.startProcessing(),axios.post("/settings/photo",this.gatherFormData()).then((function(){Bus.$emit("updateUser"),t.form.finishProcessing()}),(function(e){t.form.setErrors(e.response.data.errors)}))}},gatherFormData:function(){var e=new FormData;return e.append("photo",this.$refs.photo.files[0]),e}},computed:{previewStyle:function(){return"background-image: url(".concat(this.user.photo_url,")")}}}},2630:e=>{e.exports={props:["user"],data:function(){return{twoFactorResetCode:null}},created:function(){var e=this;this.$on("receivedTwoFactorResetCode",(function(t){e.twoFactorResetCode=t,$("#modal-show-two-factor-reset-code").modal("show")}))}}},3356:e=>{e.exports={data:function(){return{form:new SparkForm({current_password:"",password:"",password_confirmation:""})}},methods:{update:function(){Spark.put("/settings/password",this.form)}}}},3993:(e,t,n)=>{e.exports={props:["user","teams"],mixins:[n(8256)],data:function(){return{billableType:"user",team:null}},mounted:function(){this.usePushStateForTabs(".spark-settings-tabs")}}},3610:(e,t,n)=>{e.exports={props:["user","team","billableType"],mixins:[n(8088),n(5814)],data:function(){return{plans:[]}},mounted:function(){var e=this;this.getPlans(),this.$on("showPlanDetails",(function(t){e.showPlanDetails(t)}))},methods:{getPlans:function(){var e=this;axios.get("/spark/plans").then((function(t){e.plans=e.billingUser?_.where(t.data,{type:"user"}):_.where(t.data,{type:"team"})}))}}}},3539:e=>{e.exports={props:["user","team","billableType"],data:function(){return{form:new SparkForm({})}},methods:{confirmCancellation:function(){$("#modal-confirm-cancellation").modal("show")},cancel:function(){Spark.delete(this.urlForCancellation,this.form).then((function(){Bus.$emit("updateUser"),Bus.$emit("updateTeam"),$("#modal-confirm-cancellation").modal("hide")}))}},computed:{urlForCancellation:function(){return this.billingUser?"/settings/subscription":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/subscription")}}}},7203:(e,t,n)=>{e.exports={props:["user","team","plans","billableType"],mixins:[n(8088),n(5814)],mounted:function(){this.onlyHasYearlyPlans&&this.showYearlyPlans()},methods:{showPlanDetails:function(e){this.$parent.$emit("showPlanDetails",e)},priceWithTax:function(e){return e.price+e.price*(this.billable.tax_rate/100)}}}},4294:(e,t,n)=>{e.exports={props:["user","team","plans","billableType"],mixins:[n(8479),n(8088),n(5814)],data:function(){return{form:new SparkForm({braintree_type:"",braintree_token:"",plan:"",coupon:null})}},mounted:function(){var e=this;this.onlyHasYearlyPaidPlans&&this.showYearlyPlans(),this.braintree("braintree-subscribe-container",(function(t){e.form.braintree_type=t.type,e.form.braintree_token=t.nonce,e.subscribe()}))},methods:{selectPlan:function(e){this.selectedPlan=e,this.form.plan=this.selectedPlan.id},subscribe:function(){Spark.post(this.urlForNewSubscription,this.form).then((function(e){Bus.$emit("updateUser"),Bus.$emit("updateTeam")}))},showPlanDetails:function(e){this.$parent.$emit("showPlanDetails",e)}},computed:{urlForNewSubscription:function(){return this.billingUser?"/settings/subscription":"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/subscription")}}}},4943:(e,t,n)=>{e.exports={props:["user","team","plans","billableType"],mixins:[n(8088),n(5814)],data:function(){return{confirmingPlan:null}},mounted:function(){var e=this;this.selectActivePlanInterval(),this.$watch("activePlan",(function(t){e.selectActivePlanInterval()})),this.onlyHasYearlyPlans&&this.showYearlyPlans()},methods:{confirmPlanUpdate:function(e){this.confirmingPlan=e,$("#modal-confirm-plan-update").modal("show")},approvePlanUpdate:function(){$("#modal-confirm-plan-update").modal("hide"),this.updateSubscription(this.confirmingPlan)},selectActivePlanInterval:function(){this.activePlanIsMonthly||0==this.yearlyPlans.length?this.showMonthlyPlans():this.showYearlyPlans()},showPlanDetails:function(e){this.$parent.$emit("showPlanDetails",e)},priceWithTax:function(e){return e.price+e.price*(this.billable.tax_rate/100)}}}},7054:e=>{e.exports={props:["user","teams"]}},6245:e=>{e.exports={data:function(){return{plans:[],form:new SparkForm({name:"",slug:""})}},computed:{activeSubscription:function(){if(this.$parent.billable){var e=_.find(this.$parent.billable.subscriptions,(function(e){return"default"==e.name}));return void 0!==e?e:void 0}},activePlan:function(){var e=this;if(this.activeSubscription)return _.find(this.plans,(function(t){return t.id==e.activeSubscription.provider_plan}))},hasTeamLimit:function(){return!!this.activePlan&&!!this.activePlan.attributes.teams},remainingTeams:function(){var e=_.filter(this.$parent.teams,{owner_id:this.$parent.billable.id});return this.activePlan?this.activePlan.attributes.teams-e.length:0},canCreateMoreTeams:function(){return!this.hasTeamLimit||this.remainingTeams>0}},created:function(){this.getPlans()},events:{activatedTab:function(e){return e===Spark.pluralTeamString&&Vue.nextTick((function(){$("#create-team-name").focus()})),!0}},watch:{"form.name":function(e,t){""!=this.form.slug&&this.form.slug!=t.toLowerCase().replace(/[\s\W-]+/g,"-")||(this.form.slug=e.toLowerCase().replace(/[\s\W-]+/g,"-"))}},methods:{create:function(){var e=this;Spark.post("/settings/"+Spark.pluralTeamString,this.form).then((function(){e.form.name="",e.form.slug="",Bus.$emit("updateUser"),Bus.$emit("updateTeams")}))},getPlans:function(){var e=this;axios.get("/spark/plans").then((function(t){e.plans=t.data}))}}}},562:e=>{e.exports={props:["user","teams"],data:function(){return{leavingTeam:null,deletingTeam:null,leaveTeamForm:new SparkForm({}),deleteTeamForm:new SparkForm({})}},mounted:function(){$('[data-toggle="tooltip"]').tooltip()},methods:{approveLeavingTeam:function(e){this.leavingTeam=e,$("#modal-leave-team").modal("show")},leaveTeam:function(){Spark.delete(this.urlForLeaving,this.leaveTeamForm).then((function(){Bus.$emit("updateUser"),Bus.$emit("updateTeams"),$("#modal-leave-team").modal("hide")}))},approveTeamDelete:function(e){this.deletingTeam=e,$("#modal-delete-team").modal("show")},deleteTeam:function(){Spark.delete("/settings/".concat(Spark.pluralTeamString,"/").concat(this.deletingTeam.id),this.deleteTeamForm).then((function(){Bus.$emit("updateUser"),Bus.$emit("updateTeams"),$("#modal-delete-team").modal("hide")}))}},computed:{urlForLeaving:function(){return"/settings/".concat(Spark.pluralTeamString,"/").concat(this.leavingTeam.id,"/members/").concat(this.user.id)}}}},9349:e=>{e.exports={props:["team","invitations"],methods:{cancel:function(e){var t=this;axios.delete("/settings/invitations/".concat(e.id)).then((function(){t.$parent.$emit("updateInvitations")}))}}}},1986:e=>{e.exports={data:function(){return{invitations:[]}},created:function(){this.getPendingInvitations()},methods:{getPendingInvitations:function(){var e=this;axios.get("/settings/invitations/pending").then((function(t){e.invitations=t.data}))},accept:function(e){var t=this;axios.post("/settings/invitations/".concat(e.id,"/accept")).then((function(){Bus.$emit("updateTeams"),t.getPendingInvitations()})),this.removeInvitation(e)},reject:function(e){var t=this;axios.post("/settings/invitations/".concat(e.id,"/reject")).then((function(){t.getPendingInvitations()})),this.removeInvitation(e)},removeInvitation:function(e){this.invitations=_.reject(this.invitations,(function(t){return t.id===e.id}))}}}},5500:e=>{e.exports={props:["user","team","billableType"],data:function(){return{plans:[],form:new SparkForm({email:""})}},computed:{activeSubscription:function(){if(this.billable){var e=_.find(this.billable.subscriptions,(function(e){return"default"==e.name}));return void 0!==e?e:void 0}},activePlan:function(){var e=this;if(this.activeSubscription)return _.find(this.plans,(function(t){return t.id==e.activeSubscription.provider_plan}))},hasTeamMembersLimit:function(){return!!this.activePlan&&!!this.activePlan.attributes.teamMembers},remainingTeamMembers:function(){return this.activePlan?this.activePlan.attributes.teamMembers-this.$parent.team.users.length:0},canInviteMoreTeamMembers:function(){return!this.hasTeamMembersLimit||this.remainingTeamMembers>0}},created:function(){this.getPlans()},methods:{send:function(){var e=this;Spark.post("/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/invitations"),this.form).then((function(){e.form.email="",e.$parent.$emit("updateInvitations")}))},getPlans:function(){var e=this;axios.get("/spark/plans").then((function(t){e.plans=t.data}))}}}},5411:e=>{e.exports={props:["user","team"],data:function(){return{roles:[],updatingTeamMember:null,deletingTeamMember:null,updateTeamMemberForm:$.extend(!0,new SparkForm({role:""}),Spark.forms.updateTeamMember),deleteTeamMemberForm:new SparkForm({})}},created:function(){this.getRoles()},methods:{getRoles:function(){var e=this;axios.get("/settings/".concat(Spark.pluralTeamString,"/roles")).then((function(t){e.roles=t.data}))},editTeamMember:function(e){this.updatingTeamMember=e,this.updateTeamMemberForm.role=e.pivot.role,$("#modal-update-team-member").modal("show")},update:function(){Spark.put(this.urlForUpdating,this.updateTeamMemberForm).then((function(){Bus.$emit("updateTeam"),$("#modal-update-team-member").modal("hide")}))},approveTeamMemberDelete:function(e){this.deletingTeamMember=e,$("#modal-delete-member").modal("show")},deleteMember:function(){Spark.delete(this.urlForDeleting,this.deleteTeamMemberForm).then((function(){Bus.$emit("updateTeam"),$("#modal-delete-member").modal("hide")}))},canEditTeamMember:function(e){return this.user.id===this.team.owner_id&&this.user.id!==e.id},canDeleteTeamMember:function(e){return this.user.id===this.team.owner_id&&this.user.id!==e.id},teamMemberRole:function(e){if(0==this.roles.length)return"";if("owner"==e.pivot.role)return"Owner";var t=_.find(this.roles,(function(t){return t.value==e.pivot.role}));return void 0!==t?t.text:void 0}},computed:{urlForUpdating:function(){return"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/members/").concat(this.updatingTeamMember.id)},urlForDeleting:function(){return"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/members/").concat(this.deletingTeamMember.id)}}}},4772:e=>{e.exports={props:["user","team","billableType"],data:function(){return{invitations:[]}},created:function(){var e=this;this.getInvitations(),this.$on("updateInvitations",(function(){e.getInvitations()}))},methods:{getInvitations:function(){var e=this;axios.get("/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/invitations")).then((function(t){e.invitations=t.data}))}}}},1065:e=>{e.exports={props:["user","team"]}},8007:(e,t,n)=>{e.exports={props:["user","teamId"],mixins:[n(8256)],data:function(){return{billableType:"team",team:null}},created:function(){var e=this;this.getTeam(),Bus.$on("updateTeam",(function(){e.getTeam()}))},mounted:function(){this.usePushStateForTabs(".spark-settings-tabs")},methods:{getTeam:function(){var e=this;axios.get("/".concat(Spark.pluralTeamString,"/").concat(this.teamId)).then((function(t){e.team=t.data}))}}}},3767:e=>{e.exports={props:["user","team"],data:function(){return{form:new SparkForm({name:""})}},mounted:function(){this.form.name=this.team.name},methods:{update:function(){Spark.put("/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/name"),this.form).then((function(){Bus.$emit("updateTeam"),Bus.$emit("updateTeams")}))}}}},2656:e=>{e.exports={props:["user","team"],data:function(){return{form:new SparkForm({})}},methods:{update:function(e){if(e.preventDefault(),this.$refs.photo.files.length){var t=this;this.form.startProcessing(),axios.post(this.urlForUpdate,this.gatherFormData()).then((function(){Bus.$emit("updateTeam"),Bus.$emit("updateTeams"),t.form.finishProcessing()}),(function(e){t.form.setErrors(e.response.data.errors)}))}},gatherFormData:function(){var e=new FormData;return e.append("photo",this.$refs.photo.files[0]),e}},computed:{urlForUpdate:function(){return"/settings/".concat(Spark.pluralTeamString,"/").concat(this.team.id,"/photo")},previewStyle:function(){return"background-image: url(".concat(this.team.photo_url,")")}}}},2163:(e,t,n)=>{window.URI=n(4998),window.axios=n(9669),window._=n(3919),window.moment=n(381),window.Promise=n(8259),window.Cookies=n(6808),window.moment.defineLocale("en-short",{parentLocale:"en",relativeTime:{future:"in %s",past:"%s",s:"1s",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1 month ago",MM:"%d months ago",y:"1y",yy:"%dy"}}),window.moment.locale("en"),void 0!==window.$&&void 0!==window.jQuery||(window.$=window.jQuery=n(9755)),n(7915),$("#spark-app").length>0&&n(2641),window.axios.defaults.headers.common={"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Spark.csrfToken},window.axios.interceptors.response.use((function(e){return e}),(function(e){switch(e.response.status){case 401:window.axios.get("/logout"),$("#modal-session-expired").modal("show");break;case 402:window.location="/settings#/subscription"}return Promise.reject(e)}))},9885:e=>{e.exports={el:"#spark-app",lastRefreshedApiTokenAt:null,data:{user:Spark.state.user,teams:Spark.state.teams,currentTeam:Spark.state.currentTeam,loadingNotifications:!1,notifications:null,supportForm:new SparkForm({from:"",subject:"",message:""})},created:function(){var e=this;Spark.userId&&this.loadDataForAuthenticatedUser(),Spark.userId&&Spark.usesApi&&this.refreshApiTokenEveryFewMinutes(),Bus.$on("updateUser",(function(){e.getUser()})),Bus.$on("updateUserData",(function(){e.loadDataForAuthenticatedUser()})),Bus.$on("updateTeams",(function(){e.getTeams()})),Bus.$on("showNotifications",(function(){$("#modal-notifications").modal("show"),e.markNotificationsAsRead()})),Bus.$on("showSupportForm",(function(){e.user&&(e.supportForm.from=e.user.email),$("#modal-support").modal("show"),setTimeout((function(){$("#support-subject").focus()}),500)}))},mounted:function(){this.whenReady()},methods:{whenReady:function(){},loadDataForAuthenticatedUser:function(){this.getNotifications()},refreshApiTokenEveryFewMinutes:function(){var e=this;this.lastRefreshedApiTokenAt=moment(),setInterval((function(){e.refreshApiToken()}),24e4),setInterval((function(){moment().diff(e.lastRefreshedApiTokenAt,"minutes")>=5&&e.refreshApiToken()}),5e3)},refreshApiToken:function(){this.lastRefreshedApiTokenAt=moment(),axios.put("/spark/token")},getUser:function(){var e=this;axios.get("/user/current").then((function(t){e.user=t.data}))},getTeams:function(){var e=this;axios.get("/"+Spark.pluralTeamString).then((function(t){e.teams=t.data}))},getCurrentTeam:function(){var e=this;axios.get("/".concat(Spark.pluralTeamString,"/current")).then((function(t){e.currentTeam=t.data})).catch((function(e){}))},getNotifications:function(){var e=this;this.loadingNotifications=!0,axios.get("/notifications/recent").then((function(t){e.notifications=t.data,e.loadingNotifications=!1}))},markNotificationsAsRead:function(){this.hasUnreadNotifications&&(axios.put("/notifications/read",{notifications:_.pluck(this.notifications.notifications,"id")}),_.each(this.notifications.notifications,(function(e){e.read=1})))},sendSupportRequest:function(){var e=this;Spark.post("/support/email",this.supportForm).then((function(){$("#modal-support").modal("hide"),e.showSupportRequestSuccessMessage(),e.supportForm.subject="",e.supportForm.message=""}))},showSupportRequestSuccessMessage:function(){swal({title:"Got It!",text:"We have received your message and will respond soon!",type:"success",showConfirmButton:!1,timer:2e3})}},computed:{hasUnreadAnnouncements:function(){var e=this;return!!(this.notifications&&this.user&&this.notifications.announcements)&&(!(!this.notifications.announcements.length||this.user.last_read_announcements_at)||_.filter(this.notifications.announcements,(function(t){return moment.utc(e.user.last_read_announcements_at).isBefore(moment.utc(t.created_at))})).length>0)},hasUnreadNotifications:function(){return!!this.notifications&&_.filter(this.notifications.notifications,(function(e){return!e.read})).length>0}}}},2641:(e,t,n)=>{void 0===window.Vue&&(window.Vue=n(2100),window.Bus=new Vue),Vue.mixin(n(9574)),n(6431),n(4342)},313:(e,t,n)=>{n(2163),n(2641),n(9703),n(7429),n(1204),n(9802),n(9566);var r=n(5095);if(!document.body.classList.contains("no-vue"))new Vue({router:r,el:"#app",mixins:[n(9885)]});n(4168),n(7627)},9703:(e,t,n)=>{NProgress=n(4865),NProgress.configure({easing:"ease",speed:250,parent:"#app"}),axios.interceptors.request.use((function(e){return NProgress.start(),e}),(function(e){return NProgress.done(),Promise.reject(e)})),axios.interceptors.response.use((function(e){return NProgress.done(),e}),(function(e){return NProgress.done(),Promise.reject(e)})),Vue.use(n(3509))},7155:(e,t,n)=>{Vue.component("analytics-dashbaord",(function(e){n.e(100).then(function(){var t=[n(6100)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-countries",(function(e){n.e(772).then(function(){var t=[n(4170)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-days",(function(e){n.e(877).then(function(){var t=[n(2877)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-pages",(function(e){n.e(118).then(function(){var t=[n(6118)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-documents",(function(e){n.e(825).then(function(){var t=[n(7825)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-counters",(function(e){n.e(39).then(function(){var t=[n(9039)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-referrers",(function(e){n.e(955).then(function(){var t=[n(3955)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("analytics-outbound",(function(e){n.e(984).then(function(){var t=[n(1984)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},657:()=>{Vue.component("delete-account",{props:["username"],data:function(){return{form:new SparkForm({username:this.username,username_confirmation:"",current_password:""})}},methods:{submit:function(){Spark.post("/delete",this.form).then((function(e){window.location=e.redirect}))}}})},4627:()=>{Vue.component("register-social",{props:["suggestUsername"],data:function(){return{form:new SparkForm({username:this.suggestUsername,terms:!1})}},methods:{register:function(){Spark.post("/login/social/register",this.form).then((function(e){window.location=e.redirect}))}}})},2050:(e,t,n)=>{"use strict";n.r(t);var r=n(8387),a=n.n(r);Vue.component("register",{components:{VueRecaptcha:a()},data:function(){return{form:new SparkForm({username:"",email:"",password:"",password_confirmation:"",terms:!1})}},methods:{register:function(){this.$refs.recaptcha.execute()},onVerify:function(e){var t=this;this.form["g-recaptcha-response"]=e,Spark.post("/register",this.form).then((function(e){window.location=e.redirect})).catch((function(e){t.$refs.recaptcha.reset()}))}}})},5817:()=>{Vue.component("update-mail",{props:["email"],data:function(){return{form:new SparkForm({email:this.email,current_password:""})}},methods:{update:function(){var e=this;Spark.put("/settings/mail",this.form).then((function(e){})).finally((function(){e.form.current_password=""}))}}})},7429:(e,t,n)=>{n(6189),Vue.component("errors",n(4709).Z),n(2050),n(4627),n(657),n(5817),n(5988),n(9135),n(428),n(7155),Vue.component("data-table",n(6638).Z),Vue.component("admin-list-documents",(function(e){n.e(922).then(function(){var t=[n(1922)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("admin-list-banned",(function(e){n.e(974).then(function(){var t=[n(974)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("admin-list-users",(function(e){n.e(256).then(function(){var t=[n(3256)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("captcha",(function(e){n.e(648).then(function(){var t=[n(2648)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("subscription-required",(function(e){n.e(715).then(function(){var t=[n(4715)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("settings-customize-appearance",(function(e){n.e(541).then(function(){var t=[n(9541)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("settings-default",(function(e){n.e(978).then(function(){var t=[n(8978)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("settings-domain",(function(e){n.e(690).then(function(){var t=[n(690)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("confirm-payment",(function(e){n.e(346).then(function(){var t=[n(9346)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},428:(e,t,n)=>{Vue.component("upload",(function(e){n.e(276).then(function(){var t=[n(1276)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-view",(function(e){n.e(932).then(function(){var t=[n(3932)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-delete",(function(e){n.e(465).then(function(){var t=[n(7465)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-edit",(function(e){n.e(753).then(function(){var t=[n(9753)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-replace",(function(e){n.e(647).then(function(){var t=[n(6647)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-embed",(function(e){n.e(53).then(function(){var t=[n(8053)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-table",(function(e){n.e(989).then(function(){var t=[n(5989)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-request-email",(function(e){n.e(477).then(function(){var t=[n(4477)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-enter-password",(function(e){n.e(683).then(function(){var t=[n(9683)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-admin",(function(e){n.e(750).then(function(){var t=[n(6750)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-admin-html",(function(e){n.e(928).then(function(){var t=[n(9928)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-report",(function(e){n.e(78).then(function(){var t=[n(8078)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("document-selector",(function(e){n.e(844).then(function(){var t=[n(1844)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},9135:()=>{Vue.component("pagination",{props:{data:{type:Object,default:function(){return{current_page:1,last_page:1,per_page:50,to:1,total:0}}},limit:{type:Number,default:5}},template:'\n\t<ul class="pagination" v-if="data.total > data.per_page">\n\t\t<li :class="{ disabled: data.current_page <= 1 }">\n\t\t\t<a href="#" aria-label="Previous" @click.prevent="prevPage()"><span aria-hidden="true"><i class="fa fa-chevron-left"></i></span></a>\n\t\t</li>\n\t\t<li v-for="n in getPages()" :class="{ \'active\': n == data.current_page }"><a href="#" @click.prevent="selectPage(n)">{{ n }}</a></li>\n\t\t<li :class="{ disabled: data.current_page >= data.last_page }">\n\t\t\t<a href="#" aria-label="Next" @click.prevent="nextPage()"><span aria-hidden="true"><i class="fa fa-chevron-right"></i></span></a>\n\t\t</li>\n\t</ul>',methods:{nextPage:function(){this.data.current_page>=this.data.last_page||this.selectPage(++this.data.current_page)},prevPage:function(){this.data.current_page<=1||this.selectPage(--this.data.current_page)},selectPage:function(e){this.$emit("pagination-change-page",e)},getPages:function(){if(-1===this.limit)return 0;if(0===this.limit)return this.data.last_page;var e,t=this.data.current_page-this.limit,n=this.data.current_page+this.limit+1,r=[];for(t=t<1?1:t,n=n>=this.data.last_page?this.data.last_page+1:n,e=t;e<n;e++)r.push(e);return r}}})},5988:(e,t,n)=>{Vue.component("passport-clients",(function(e){n.e(542).then(function(){var t=[n(6542)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("passport-authorized-clients",(function(e){n.e(535).then(function(){var t=[n(9535)];e.apply(null,t)}.bind(this)).catch(n.oe)})),Vue.component("passport-personal-access-tokens",(function(e){n.e(331).then(function(){var t=[n(1331)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},9802:()=>{Vue.filter("trans",(function(){var e;return(e=Lang).get.apply(e,arguments)})),Vue.filter("number",(function(e){return e.toLocaleString()})),Vue.filter("dateRelative",(function(e){return moment(e).fromNow()})),Vue.filter("uppercase",(function(e){return e.toString().toUpperCase()}))},9566:(e,t,n)=>{n(3907),n(3231),$.extend(app,n(6571))},3231:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}window.AppFormErrors=function(){this.data={},this.hasErrors=function(){return this.hasFieldErrors()||this.hasMessage()},this.hasFieldErrors=function(){return!_.isEmpty(this.data)&&!_.isEmpty(this.data.errors)},this.hasMessage=function(){return!_.isEmpty(this.data)&&!_.isEmpty(this.data.message)},this.getMessage=function(){return this.hasMessage()?this.data.message:"Something went wrong. Please try again or contact customer support."},this.has=function(e){return _.indexOf(_.keys(this.data.errors),e)>-1},this.all=function(){return this.data.errors},this.flatten=function(){}