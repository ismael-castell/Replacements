!function(e){function t(t){for(var i,r,l=t[0],c=t[1],o=t[2],h=0,d=[];h<l.length;h++)r=l[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(u&&u(t);d.length;)d.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={0:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/scripts/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var u=c;s.push([352,1]),n()}({146:function(e){e.exports=JSON.parse('{"poet\'s region":5,"holidays":2,"school/period":4}')},352:function(e,t,n){e.exports=n(680)},656:function(e,t,n){var i={"./af":199,"./af.js":199,"./ar":200,"./ar-dz":201,"./ar-dz.js":201,"./ar-kw":202,"./ar-kw.js":202,"./ar-ly":203,"./ar-ly.js":203,"./ar-ma":204,"./ar-ma.js":204,"./ar-sa":205,"./ar-sa.js":205,"./ar-tn":206,"./ar-tn.js":206,"./ar.js":200,"./az":207,"./az.js":207,"./be":208,"./be.js":208,"./bg":209,"./bg.js":209,"./bm":210,"./bm.js":210,"./bn":211,"./bn-bd":212,"./bn-bd.js":212,"./bn.js":211,"./bo":213,"./bo.js":213,"./br":214,"./br.js":214,"./bs":215,"./bs.js":215,"./ca":216,"./ca.js":216,"./cs":217,"./cs.js":217,"./cv":218,"./cv.js":218,"./cy":219,"./cy.js":219,"./da":220,"./da.js":220,"./de":221,"./de-at":222,"./de-at.js":222,"./de-ch":223,"./de-ch.js":223,"./de.js":221,"./dv":224,"./dv.js":224,"./el":225,"./el.js":225,"./en-au":226,"./en-au.js":226,"./en-ca":227,"./en-ca.js":227,"./en-gb":228,"./en-gb.js":228,"./en-ie":229,"./en-ie.js":229,"./en-il":230,"./en-il.js":230,"./en-in":231,"./en-in.js":231,"./en-nz":232,"./en-nz.js":232,"./en-sg":233,"./en-sg.js":233,"./eo":234,"./eo.js":234,"./es":235,"./es-do":236,"./es-do.js":236,"./es-mx":237,"./es-mx.js":237,"./es-us":238,"./es-us.js":238,"./es.js":235,"./et":239,"./et.js":239,"./eu":240,"./eu.js":240,"./fa":241,"./fa.js":241,"./fi":242,"./fi.js":242,"./fil":243,"./fil.js":243,"./fo":244,"./fo.js":244,"./fr":245,"./fr-ca":246,"./fr-ca.js":246,"./fr-ch":247,"./fr-ch.js":247,"./fr.js":245,"./fy":248,"./fy.js":248,"./ga":249,"./ga.js":249,"./gd":250,"./gd.js":250,"./gl":251,"./gl.js":251,"./gom-deva":252,"./gom-deva.js":252,"./gom-latn":253,"./gom-latn.js":253,"./gu":254,"./gu.js":254,"./he":255,"./he.js":255,"./hi":256,"./hi.js":256,"./hr":257,"./hr.js":257,"./hu":258,"./hu.js":258,"./hy-am":259,"./hy-am.js":259,"./id":260,"./id.js":260,"./is":261,"./is.js":261,"./it":262,"./it-ch":263,"./it-ch.js":263,"./it.js":262,"./ja":264,"./ja.js":264,"./jv":265,"./jv.js":265,"./ka":266,"./ka.js":266,"./kk":267,"./kk.js":267,"./km":268,"./km.js":268,"./kn":269,"./kn.js":269,"./ko":270,"./ko.js":270,"./ku":271,"./ku.js":271,"./ky":272,"./ky.js":272,"./lb":273,"./lb.js":273,"./lo":274,"./lo.js":274,"./lt":275,"./lt.js":275,"./lv":276,"./lv.js":276,"./me":277,"./me.js":277,"./mi":278,"./mi.js":278,"./mk":279,"./mk.js":279,"./ml":280,"./ml.js":280,"./mn":281,"./mn.js":281,"./mr":282,"./mr.js":282,"./ms":283,"./ms-my":284,"./ms-my.js":284,"./ms.js":283,"./mt":285,"./mt.js":285,"./my":286,"./my.js":286,"./nb":287,"./nb.js":287,"./ne":288,"./ne.js":288,"./nl":289,"./nl-be":290,"./nl-be.js":290,"./nl.js":289,"./nn":291,"./nn.js":291,"./oc-lnc":292,"./oc-lnc.js":292,"./pa-in":293,"./pa-in.js":293,"./pl":294,"./pl.js":294,"./pt":295,"./pt-br":296,"./pt-br.js":296,"./pt.js":295,"./ro":297,"./ro.js":297,"./ru":298,"./ru.js":298,"./sd":299,"./sd.js":299,"./se":300,"./se.js":300,"./si":301,"./si.js":301,"./sk":302,"./sk.js":302,"./sl":303,"./sl.js":303,"./sq":304,"./sq.js":304,"./sr":305,"./sr-cyrl":306,"./sr-cyrl.js":306,"./sr.js":305,"./ss":307,"./ss.js":307,"./sv":308,"./sv.js":308,"./sw":309,"./sw.js":309,"./ta":310,"./ta.js":310,"./te":311,"./te.js":311,"./tet":312,"./tet.js":312,"./tg":313,"./tg.js":313,"./th":314,"./th.js":314,"./tk":315,"./tk.js":315,"./tl-ph":316,"./tl-ph.js":316,"./tlh":317,"./tlh.js":317,"./tr":318,"./tr.js":318,"./tzl":319,"./tzl.js":319,"./tzm":320,"./tzm-latn":321,"./tzm-latn.js":321,"./tzm.js":320,"./ug-cn":322,"./ug-cn.js":322,"./uk":323,"./uk.js":323,"./ur":324,"./ur.js":324,"./uz":325,"./uz-latn":326,"./uz-latn.js":326,"./uz.js":325,"./vi":327,"./vi.js":327,"./x-pseudo":328,"./x-pseudo.js":328,"./yo":329,"./yo.js":329,"./zh-cn":330,"./zh-cn.js":330,"./zh-hk":331,"./zh-hk.js":331,"./zh-mo":332,"./zh-mo.js":332,"./zh-tw":333,"./zh-tw.js":333};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id=656},657:function(e,t,n){var i,a=n(334);i=a.currentEnv?a.currentEnv:a.currentEnv=new a.Environment([],{dev:!1,autoescape:!0,throwOnUndefined:!1,trimBlocks:!1,lstripBlocks:!1});var s=a.webpackDependencies||(a.webpackDependencies={}),r=n(336);(a.nunjucksPrecompiled=a.nunjucksPrecompiled||{})["src/scripts/templates/agendaTemplate.nunjucks"]={root:function(e,t,n,i,a){var s="";try{if(s+="\n",e.getFilter("length").call(t,i.contextOrFrameLookup(t,n,"eventsThisMonth"))>0){s+='\n    <ol class="c-vList c-vList_bordered">\n        ',n=n.push();var r=i.contextOrFrameLookup(t,n,"days");if(r)for(var l=(r=i.fromIterator(r)).length,c=0;c<r.length;c++){var o=r[c];n.set("day",o),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",l-c),n.set("loop.revindex0",l-c-1),n.set("loop.first",0===c),n.set("loop.last",c===l-1),n.set("loop.length",l),s+="\n            ",n=n.push();var u=i.memberLookup(o,"events");if(u)for(var h=(u=i.fromIterator(u)).length,d=0;d<u.length;d++){var f=u[d];n.set("item",f),n.set("loop.index",d+1),n.set("loop.index0",d),n.set("loop.revindex",h-d),n.set("loop.revindex0",h-d-1),n.set("loop.first",0===d),n.set("loop.last",d===h-1),n.set("loop.length",h),s+='\n                <li>\n                    <div class="c-feature c-feature_withMedia c-feature_withMedia_md c-mix-feature_shrinkwrap">\n                        ',i.memberLookup(f,"eventType")&&(s+='\n                            <div class="c-feature-preamble">\n                                <span class="c-txt c-txt_catMeta">',s+=i.suppressValue(i.memberLookup(f,"eventType"),e.opts.autoescape),s+="</span>\n                            </div>\n                        "),s+='\n                        <div class="c-feature-sub">\n                            <ul class="o-vList">\n                                ',n=n.push();var v=i.memberLookup(f,"prettyDateTimes");if(v)for(var p=(v=i.fromIterator(v)).length,b=0;b<v.length;b++){var y=v[b];n.set("item",y),n.set("loop.index",b+1),n.set("loop.index0",b),n.set("loop.revindex",p-b),n.set("loop.revindex0",p-b-1),n.set("loop.first",0===b),n.set("loop.last",b===p-1),n.set("loop.length",p),s+='\n                                    <li>\n                                        <span class="c-txt c-txt_dateMeta">',s+=i.suppressValue(e.getFilter("safe").call(t,y),e.opts.autoescape),s+="</span>\n                                    </li>\n                                "}n=n.pop(),s+='\n                            </ul>\n                        </div>\n                        <div class="c-feature-hd">\n                            <h2 class="c-hdgSans c-hdgSans_2">\n                                <a href="',s+=i.suppressValue(i.memberLookup(f,"link"),e.opts.autoescape),s+='">',s+=i.suppressValue(e.getFilter("safe").call(t,i.memberLookup(f,"title")),e.opts.autoescape),s+="</a>\n                            </h2>\n                        </div>\n                        ",i.memberLookup(f,"snippet")&&(s+='\n                            <div class="c-feature-bd">\n                                ',s+=i.suppressValue(e.getFilter("safe").call(t,i.memberLookup(f,"snippet")),e.opts.autoescape),s+="\n                            </div>\n                        "),s+="\n                        ",i.memberLookup(f,"imageHtml")&&(s+='\n                            <div class="c-feature-auxMedia">\n                                ',s+=i.suppressValue(e.getFilter("safe").call(t,i.memberLookup(f,"imageHtml")),e.opts.autoescape),s+="\n                            </div>\n                        "),s+="\n                    </div>\n                </li>\n            "}n=n.pop(),s+="\n        "}n=n.pop(),s+="\n    </ol>\n"}else s+='\n    <div class="o-vr o-vr_4x">\n        <span class="u-loadingConditional js-loadingConditional">There are no results to display.  <a href="/events">View all events.</a></span>\n    </div>\n';a(null,s+='\n\n<a href="/events/browse" class="c-txt c-txt_minimalCta">View all past events</a>')}catch(e){a(i.handleError(e,0,0))}}},e.exports=r(a,i,a.nunjucksPrecompiled["src/scripts/templates/agendaTemplate.nunjucks"],s)},665:function(e,t,n){var i,a=n(334);i=a.currentEnv?a.currentEnv:a.currentEnv=new a.Environment([],void 0);var s=a.webpackDependencies||(a.webpackDependencies={}),r=n(336);(a.nunjucksPrecompiled=a.nunjucksPrecompiled||{})["src/scripts/templates/calendarTemplate.nunjucks"]={root:function(e,t,n,i,a){var s=0,r=0,l="";try{l+='<table class="c-calendar">\n    <caption class="c-calendar-caption">\n        <button class="c-calendar-pagerControl c-calendar-pagerControl_prev clndr-previous-button">\n            <span class="u-isVisuallyHidden">Previous</span>\n        </button>\n        ',l+=i.suppressValue(i.contextOrFrameLookup(t,n,"month"),e.opts.autoescape),l+=" ",l+=i.suppressValue(i.contextOrFrameLookup(t,n,"year"),e.opts.autoescape),l+='\n        <button class="c-calendar-pagerControl c-calendar-pagerControl_next clndr-next-button">\n            <span class="u-isVisuallyHidden">Next</span>\n        </button>\n    </caption>\n    <thead>\n        <tr>\n            ',n=n.push();var c=i.contextOrFrameLookup(t,n,"daysOfTheWeek");if(c)for(var o=(c=i.fromIterator(c)).length,u=0;u<c.length;u++){var h=c[u];n.set("day",h),n.set("loop.index",u+1),n.set("loop.index0",u),n.set("loop.revindex",o-u),n.set("loop.revindex0",o-u-1),n.set("loop.first",0===u),n.set("loop.last",u===o-1),n.set("loop.length",o),l+="\n                <th>\n                    ",l+=i.suppressValue(h,e.opts.autoescape),l+="\n                </th>\n            "}n=n.pop(),l+="\n        </tr>\n    </thead>\n    <tbody>\n        ",n=n.push();var d=i.contextOrFrameLookup(t,n,"days");if(d)for(var f=(d=i.fromIterator(d)).length,v=0;v<d.length;v++){var p,b=d[v];if(n.set("item",b),n.set("loop.index",v+1),n.set("loop.index0",v),n.set("loop.revindex",f-v),n.set("loop.revindex0",f-v-1),n.set("loop.first",0===v),n.set("loop.last",v===f-1),n.set("loop.length",f),l+="\n            ",p=i.memberLookup(i.contextOrFrameLookup(t,n,"loop"),"index0"),n.set("outerLoop",p,!0),n.topLevel&&t.setVariable("outerLoop",p),n.topLevel&&t.addExport("outerLoop",p),l+="\n            ",i.memberLookup(i.contextOrFrameLookup(t,n,"loop"),"index0")<i.contextOrFrameLookup(t,n,"numberOfRows")){l+="\n                <tr>\n                    ",n=n.push();var y=(s=24,r=37,i.callWrap(i.contextOrFrameLookup(t,n,"range"),"range",t,[0,7]));if(y)for(var m=(y=i.fromIterator(y)).length,g=0;g<y.length;g++){var k,C,T=y[g];if(n.set("i",T),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",m-g),n.set("loop.revindex0",m-g-1),n.set("loop.first",0===g),n.set("loop.last",g===m-1),n.set("loop.length",m),l+="\n                        ",k=i.memberLookup(i.contextOrFrameLookup(t,n,"loop"),"index0")+7*i.contextOrFrameLookup(t,n,"outerLoop"),n.set("dayIndex",k,!0),n.topLevel&&t.setVariable("dayIndex",k),n.topLevel&&t.addExport("dayIndex",k),l+="\n                        ",C=i.memberLookup(i.contextOrFrameLookup(t,n,"days"),i.contextOrFrameLookup(t,n,"dayIndex")),n.set("dayObject",C,!0),n.topLevel&&t.setVariable("dayObject",C),n.topLevel&&t.addExport("dayObject",C),l+='\n                        <td class="',l+=i.suppressValue(i.memberLookup(i.memberLookup(i.contextOrFrameLookup(t,n,"days"),i.contextOrFrameLookup(t,n,"dayIndex")),"classes"),e.opts.autoescape),l+='">\n                            <div class="c-day">\n                                <div class="c-day-index">\n                                    ',l+=i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t,n,"dayObject"),"day"),e.opts.autoescape),l+="\n                                </div>\n                                ",i.memberLookup(i.contextOrFrameLookup(t,n,"dayObject"),"events")){l+='\n                                    <ol class="c-day-list">\n                                        ',n=n.push();var O=i.memberLookup(i.contextOrFrameLookup(t,n,"dayObject"),"events");if(O)for(var j=(O=i.fromIterator(O)).length,S=0;S<O.length;S++){var E=O[S];n.set("event",E),n.set("loop.index",S+1),n.set("loop.index0",S),n.set("loop.revindex",j-S),n.set("loop.revindex0",j-S-1),n.set("loop.first",0===S),n.set("loop.last",S===j-1),n.set("loop.length",j),l+='\n                                            <li>\n                                                <div class="c-event">\n                                                    ',i.memberLookup(E,"prettyTime")&&(l+='\n                                                        <div class="c-event-time">\n                                                            ',l+=i.suppressValue(i.memberLookup(E,"prettyTime"),e.opts.autoescape),l+="\n                                                        </div>\n                                                    "),l+='\n                                                    <div class="c-event-title">\n                                                        <a href="',l+=i.suppressValue(i.memberLookup(E,"link"),e.opts.autoescape),l+='">',l+=i.suppressValue(e.getFilter("safe").call(t,i.memberLookup(E,"title")),e.opts.autoescape),l+="</a>\n                                                    </div>\n                                                </div>\n                                            </li>\n                                        "}n=n.pop(),l+="\n                                    </ol>\n                                "}l+="\n                            </div>\n                        </td>\n                    "}n=n.pop(),l+="\n                </tr>\n            "}l+="\n        "}n=n.pop(),a(null,l+="\n    </tbody>\n</table>\n")}catch(e){a(i.handleError(e,s,r))}}},e.exports=r(a,i,a.nunjucksPrecompiled["src/scripts/templates/calendarTemplate.nunjucks"],s)},680:function(e,t,n){"use strict";n.r(t);n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(95),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(397),n(398),n(399),n(400),n(401),n(403),n(404),n(406),n(407),n(408),n(409),n(410),n(132),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(183),n(485),n(486),n(184),n(487),n(488),n(489),n(490),n(185),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(141),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(594),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(627),n(628),n(629),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(642),n(643),n(645),n(195),n(646);var i=n(0),a=(n(647),n(7)),s=n.n(a),r=n(8),l=n.n(r),c=n(6),o=n.n(c),u=n(12),h=n.n(u),d=n(11),f=n.n(d),v=n(5),p=n.n(v),b=n(2),y=n.n(b),m=n(4),g=n.n(m),k=n(26),C=n.n(k),T=n(346),O=n.n(T),j=function(){function e(){s()(this,e),y()(this,"PREFIX","#"),this.history=[window.location.hash]}return l()(e,[{key:"get",value:function(){return window.location.hash.substr(this.PREFIX.length)}},{key:"set",value:function(e){""===window.location.hash&&""===e||(window.location.hash=this.PREFIX+e,this.history.push(window.location.hash))}},{key:"getHashObject",value:function(){return O()(this.get(),!0)}},{key:"objectToString",value:function(e){return g.a.param(e)}},{key:"setHashObject",value:function(e){this.set(this.objectToString(e))}},{key:"getPathArray",value:function(){return this.get().split("/")}},{key:"setPathArray",value:function(e){this.set(e.join("/"))}},{key:"back",value:function(){window.history.back()}},{key:"getBackUrl",value:function(){return this.history.length>=2?this.history[this.history.length-2]:"#"}}]),e}(),S=function(){function e(t){s()(this,e),this.endpoint=t}return l()(e,[{key:"getByQuery",value:function(e){return fetch("".concat(this.endpoint,"?").concat(g.a.param(e))).then((function(e){return e.json()}))}}]),e}(),E=function(){function e(){s()(this,e),y()(this,"OPTIONS",{CLASS_LOCK_MOBILE:"u-isScrollingDisabledBelowSmall"})}return l()(e,[{key:"lockScrollingMobile",value:function(){document.documentElement.classList.add(this.OPTIONS.CLASS_LOCK_MOBILE)}},{key:"unlockScrollingMobile",value:function(){document.documentElement.classList.remove(this.OPTIONS.CLASS_LOCK_MOBILE)}},{key:"scrollToTop",value:function(){document.documentElement.scrollTop=0,document.body.scrollTop=0}}]),e}(),w=function(e){var t="All"===e.filterValue;return Object(i.c)("li",null,Object(i.c)("a",{href:"#",onClick:function(t){t.preventDefault(),"All"===e.filterValue||"#"===e.filterValue?e.onCategoryClearClick(e.queryKey):e.onActionClick(y()({},e.queryKey,e.filterValue))},className:C()("c-txt c-txt_filterAction",{"c-txt_filterAction_emphatic":t,isActive:e.isActive})},e.filterValue))},A=function(e){var t="letter",n=["All","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].map((function(n){var a=!1;return a=e.currentQuery.letter?e.currentQuery.letter===n:"All"===n,Object(i.c)(w,{filterValue:n,isActive:a,onActionClick:e.onActionClick,onCategoryClearClick:e.onCategoryClearClick,queryKey:t})}));return Object(i.c)("ol",{className:C()("o-hList o-hList_custom",{"u-isHidden":!e.alphaState})},n)},P=new(function(){function e(){s()(this,e)}return l()(e,[{key:"formatResultsCount",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]),e}()),_=function(e){var t=e.currentPage,n=e.itemsPerPage,a=e.totalReturned,s=e.totalResults,r=e.assetType,l=t>1?n*(t-1)+1:1,c=s?P.formatResultsCount(s):0,o=P.formatResultsCount(l),u="";u=a>=n?s-(s-n*t):a;var h=P.formatResultsCount(u),d=r===ke.ASSET_TYPE.POEM?"Poems":"Poets";return Object(i.c)("span",{className:"c-txt c-txt_starkMeta"},"Showing ",o," to ",h," of ",c," ",d)},L=n(67),x=n.n(L),D=function(e){var t=e.html;return Object(i.c)("span",{dangerouslySetInnerHTML:{__html:t}})},R=function(e){var t=e.html;return Object(i.c)("div",{dangerouslySetInnerHTML:{__html:t}})};function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var I=function(e){h()(n,e);var t=N(n);function n(){var e;s()(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),y()(o()(e),"state",{shouldShowAll:!1}),y()(o()(e),"onExpandClick",(function(){e.setState({shouldShowAll:!0})})),e}return l()(n,[{key:"render",value:function(){var e=this.props.tags,t=e.length-8,n=e.length>8;return Object(i.c)("div",null,Object(i.c)("span",{className:this.state.shouldShowAll?null:"u-obscuredAfter8"},e.map((function(e){return Object(i.c)("span",null,e.iconSlug?Object(i.c)("a",{href:e.link,className:" c-btn c-btn_tag c-btn_tag_auxiliary c-btn_tag_auxiliary_textless"},Object(i.c)("svg",{className:"icon icon_".concat(e.iconSlug," icon_solo"),role:"presentation"},Object(i.c)("use",{xlinkHref:"#icon_".concat(e.iconSlug)})),Object(i.c)("span",{className:"u-isVisuallyHidden"},e.title)):Object(i.c)("a",{href:e.link,className:"c-btn c-btn_tag c-btn_tag_auxiliary"},e.title))}))),!this.state.shouldShowAll&&n?Object(i.c)("button",{onClick:this.onExpandClick,className:"c-btn c-btn_cylon c-btn_cylon_shrinkwrapped"},"+ ",t," more"):null)}}]),n}(i.a),$=function(e){var t=e.asset,n=0!==e.query.preview,a=[].concat(x()(t.tags),x()(t.categories)),s=a.length>0;return Object(i.c)("li",null,Object(i.c)("div",{className:"c-feature c-mix-feature_shrinkwrap"},Object(i.c)("div",{className:"c-feature-hd"},Object(i.c)("h2",{className:"c-hdgSans c-hdgSans_2"},Object(i.c)("a",{href:t.link},Object(i.c)(D,{html:t.title})))),Object(i.c)("div",{className:"c-feature-sub"},Object(i.c)("span",{className:"c-txt c-txt_attribution"},Object(i.c)(D,{html:t.author}))),n?Object(i.c)("div",{className:"c-feature-bd c-feature-bd_moderate"},Object(i.c)(R,{html:t.snippet})):null,Object(i.c)("div",null,s?Object(i.c)(I,{tags:a}):null)))},H=function(e){var t=e.asset;return Object(i.c)("div",{className:"c-vList c-vList_close"},Object(i.c)("ul",{className:"c-vList c-vList_close"},t.poems.map((function(e){return Object(i.c)("li",null,Object(i.c)("a",{href:e.link},Object(i.c)(D,{html:e.title})))}))),t.poemsLink?Object(i.c)("div",null,Object(i.c)("a",{className:"c-txt c-txt_minimalCta",href:t.poemsLink},"See all poems by ",Object(i.c)(D,{html:t.title}))):null)},M=function(e){var t=e.asset,n=0!==e.query.preview,a=t.poems&&t.poems.length>0;return Object(i.c)("li",null,Object(i.c)("div",{className:"c-feature c-mix-feature_shrinkwrap"},Object(i.c)("div",{className:"c-feature-hd"},Object(i.c)("h2",{className:"c-hdgSans c-hdgSans_2"},Object(i.c)("a",{href:t.link},Object(i.c)(D,{html:t.title})))),t.lifeSpan?Object(i.c)("div",{className:"c-feature-sub"},Object(i.c)("span",{className:"c-txt c-txt_attribution"},t.lifeSpan)):null,n&&a?Object(i.c)("div",{className:"c-feature-bd"},Object(i.c)(H,{asset:t})):null))},F=function(e){var t=e.assets,n=e.currentQuery,a=e.assetType,s=e.isInteractive,r=a===ke.ASSET_TYPE.POEM?$:M,l=t.map((function(e){return Object(i.c)(r,{asset:e,query:n,key:e.id})}));return Object(i.c)("div",{className:C()("c-assetViewport",{isInteractive:s})},Object(i.c)("ol",{className:"c-vList c-vList_bordered c-vList_bordered_thorough"},l))},V=function(e){var t=e.onClick;return Object(i.c)("div",{className:"c-filterPanel-dismissal"},Object(i.c)("button",{onClick:t,className:"c-btn c-btn_cylon"},Object(i.c)("svg",{className:"icon icon_times icon_filterCompanion",role:"img","aria-labelledby":"removeSubPanel-desc"},Object(i.c)("title",{id:"removeSubPanel-title"},"Close"),Object(i.c)("desc",{id:"removeSubPanel-desc"},"Dismisses filter panel."),Object(i.c)("use",{xlinkHref:"#icon_times"}))))},B=function(e){return Object(i.c)("li",null,Object(i.c)("a",{href:"#",className:C()("c-txt c-txt_minimalCta",{isActive:e.isActive}),onClick:function(t){t.preventDefault(),t.stopPropagation(),e.onActionClick(y()({},e.topicKey,e.value))}},e.title))},q=function(e){var t=e.children,n=e.onClick;return Object(i.c)("button",{className:"c-btn c-btn_cylon c-btn_cylon_shrinkwrapped",onClick:n},t)},U=function(e){var t=e.onClick,n=e.children,a=e.icon,s=void 0===a?{}:a;return Object(i.c)(q,{onClick:t},"trash"===s.type?Object(i.c)("svg",{className:"icon icon_trash icon_sm mix-icon_brand",role:"img","aria-labelledby":"trashFilter-title"},Object(i.c)("title",{id:"trashFilter-title"},s.title),Object(i.c)("desc",{id:"trashFilter-desc"},s.desc),Object(i.c)("use",{xlinkHref:"#icon_trash"})):null,Object(i.c)("span",{className:"c-txt c-txt_minimalCta c-txt_minimalCta_action"},n))},G=function(e){var t=e.children,n=e.onClick,a=e.type,s=void 0===a?"default":a;return Object(i.c)(q,{onClick:n},Object(i.c)("span",{className:"\n            c-txt\n            c-txt_minimalCta\n            c-txt_minimalCta_action\n            ".concat("minor"===s?"c-txt_minimalCta_action_minor":"","\n            ").concat("major"===s?"c-txt_minimalCta_action_major":"","\n        ")},t))},K=function(e){var t=e.onPanelDismissalClick,n=e.title,a=e.hasActiveSub,s=e.onCategoryClearClick,r=e.onSubCategoryClearClick,l=e.subcategoryKey,c=e.subcategoryId,o=e.subvalues,u=e.query,h=e.onActionClick;return Object(i.c)("div",{className:"c-filterOverlay c-filterOverlay_truncated",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(i.c)("div",{className:"c-filterPanel-mobileControls"},Object(i.c)("div",{className:"c-filterPanel-mobileControls-hd"},Object(i.c)("div",{className:"c-hdgSerif c-hdgSerif_1"},"Refine ",n))),Object(i.c)(V,{onClick:t}),Object(i.c)("div",{className:"c-filterOverlay-bd"},Object(i.c)("div",{className:"o-vr o-vr_2x u-showAboveSmall"},Object(i.c)("span",{className:"c-txt c-txt_filterLabel"},"Refine ",n)),a?Object(i.c)("div",{className:"c-filterPill-dismissal"},Object(i.c)(U,{onClick:function(e){e.preventDefault(),r(y()({},l,c))},icon:{type:"trash",title:"Remove Sub Filter",desc:"Removes refinement."}},"Remove Filter")):null,Object(i.c)("ul",{className:"c-vList c-vList_close"},o.map((function(e){return Object(i.c)(B,{isActive:u[l]===e.id,query:u,onActionClick:h,value:e.id,title:e.name,topicKey:l})})))),Object(i.c)("div",{className:"c-filterOverlay-ft"},Object(i.c)(G,{onClick:t,type:"minor"},"Cancel"),Object(i.c)(U,{onClick:function(){s(l)}},"Clear Filters")))},W=function(e){var t=e.onPanelDismissalClick,n=e.onSubCategoryClearClick,a=e.onCategoryClearClick,s=e.onExpandablePillClick,r=e.onActionClick,l=e.title,c=e.isActive,o=e.hasActiveSub,u=e.subLabel,h=e.query,d=e.subcategoryKey,f=e.subcategoryId,v=e.subvalues,p=e.isSubPanelOpen;return c?v?Object(i.c)("div",null,Object(i.c)("span",{onClick:function(e){e.preventDefault(),e.stopPropagation(),s()},role:"button",className:"c-filterPill"},l,Object(i.c)("span",{className:"c-txt c-txt_filterCompanion"},u),Object(i.c)("svg",{className:"icon icon_caretDown icon_filterCompanion",role:"presentation"},Object(i.c)("use",{xlinkHref:"#icon_caretDown"}))),p?Object(i.c)(K,{onPanelDismissalClick:t,title:l,hasActiveSub:o,onCategoryClearClick:a,onSubCategoryClearClick:n,subcategoryKey:d,subcategoryId:f,subvalues:v,query:h,onActionClick:r}):null):Object(i.c)("span",{onClick:function(e){e.preventDefault(),e.stopPropagation(),a(d)},role:"button",className:"c-filterPill"},l,Object(i.c)("svg",{className:"icon icon_times mix-icon_brand icon_filterCompanion",role:"img","aria-labelledby":"title-59  desc-59"},Object(i.c)("title",{id:"title-59"},"Close"),Object(i.c)("desc",{id:"desc-59"},"Dismisses filter panel."),Object(i.c)("use",{xlinkHref:"#icon_times"}))):null},z=function(e){var t=[],n=e.subcategories.map((function(n){return(n.children||[]).map((function(a){var s=!1,r=!1,l=null,c=[];return a.children&&(c=a.children.map((function(e){return e.id})),g.a.each(a.children,(function(t,i){i.id===e.query[n.key]&&(l=": ".concat(i.name))}))),(e.query[n.key]===a.id||g.a.inArray(e.query[n.key],c)>-1)&&(s=!0),g.a.inArray(e.query[n.key],c)>-1&&(r=!0),s&&t.push(a.name+(l||"")),Object(i.c)(W,{onPanelDismissalClick:e.onPanelDismissalClick,onSubCategoryClearClick:e.onSubCategoryClearClick,onCategoryClearClick:e.onCategoryClearClick,onExpandablePillClick:e.onExpandablePillClick,onActionClick:e.onActionClick,title:a.name,isActive:s,hasActiveSub:r,subLabel:l,query:e.query,subcategoryKey:n.key,subcategoryId:a.id,subvalues:a.children,isSubPanelOpen:e.isSubPanelOpen})}))}));return Object(i.c)("li",{role:"presentation"},Object(i.c)("a",{href:"#",onClick:function(t){t.preventDefault(),e.onPanelTriggerClick(e.title)},className:C()("c-btn c-btn_cylon",{isActive:e.isActive}),role:"tab","aria-controls":e.safeTitle,"aria-selected":e.isActive},Object(i.c)("span",{className:"c-txt c-txt_abstract c-txt_abstract_full"},e.title),t.length>0?Object(i.c)("div",null,Object(i.c)("div",{className:"u-showAboveSmall"},n),Object(i.c)("div",{className:"u-hideAboveSmall"},t.map((function(e){return Object(i.c)("span",{className:"c-txt c-txt_abstract"},e)})))):null))},Q=n(146),Y=function(){function e(){s()(this,e)}return l()(e,null,[{key:"countColumnsForTopic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toLowerCase();return Q[t]?Q[t]:1}}]),e}(),X=function(e){var t=e.query,n=e.parent,a=e.title,s=e.onActionClick,r=e.assetType,l=n.children||[],c="school-period"===n.key&&r===ke.ASSET_TYPE.POEM,o={sm:l.length>=6?2:1,md:Y.countColumnsForTopic(a)};return Object(i.c)("li",{className:"c-filterOverlay-bd-layout-col c-filterOverlay-bd-layout-col_".concat(o.md,"up@md")},!0===c?"":Object(i.c)("div",{className:"o-vr o-vr_1x"},Object(i.c)("span",{className:"c-txt c-txt_filterLabel"},a)),Object(i.c)("div",{className:"\n                o-columns\n                o-columns_spacious\n                o-columns_".concat(o.sm,"up@sm\n                o-columns_").concat(o.md,"up@md\n            ")},Object(i.c)("ul",{className:C()("o-compressedList",{"o-compressedList_labeled":c})},l.map((function(e){return Object(i.c)(B,{isActive:t[n.key]===e.id,query:t,onActionClick:s,value:e.id,title:e.name,topicKey:n.key})})))))},J=function(e){var t="";g.a.each(e.subs,(function(n,i){Object.hasOwnProperty.call(e.query,i.key)&&(t=i.key)}));return Object(i.c)(U,{onClick:function(){e.onCategoryClearClick(t)}},"Clear Filters")},Z=function(e){var t=e.assetType,n=e.query,a=e.subs,s=e.onActionClick,r=e.isActive,l=e.onPanelDismissalClick,c=e.onCategoryClearClick,o=e.onMobileFilterPanelBack,u=e.safeTitle;return Object(i.c)("div",{id:u,"aria-hidden":!r},r?Object(i.c)("div",{className:"c-filterOverlay"},Object(i.c)("div",{className:"c-filterPanel-mobileControls"},Object(i.c)("div",{className:"c-filterPanel-mobileControls-hd"},Object(i.c)("div",{className:"c-hdgSerif c-hdgSerif_1"},t===ke.ASSET_TYPE.POEM?"Explore Poems":"Explore Poets")),Object(i.c)("div",{className:"c-filterPanel-mobileControls-bd"},Object(i.c)(G,{onClick:o,type:"minor"},"← Back"))),Object(i.c)(V,{onClick:l}),Object(i.c)("div",{className:"c-filterOverlay-bd"},Object(i.c)("ul",{className:"c-filterOverlay-bd-layout"},a.map((function(e){return Object(i.c)(X,{query:n,onActionClick:s,title:e.name,parent:e,assetType:t})})))),Object(i.c)("div",{className:"c-filterOverlay-ft"},Object(i.c)(G,{onClick:l,type:"minor"},"Cancel"),function(e,t){return e.some((function(e){return Object.hasOwnProperty.call(t,e.key)}))}(a,n)?Object(i.c)(J,{onCategoryClearClick:c,query:n,subs:a}):null)):null)},ee=function(e){var t=e.filters.map((function(t){var n=t.name.replace(/\s+/g,"-").toLowerCase();return Object(i.c)(z,{isActive:e.activePanelName===t.name,isSubPanelOpen:e.isSubPanelOpen,onPanelDismissalClick:e.onPanelDismissalClick,onExpandablePillClick:e.onExpandablePillClick,onActionClick:e.onActionClick,onTriggerClick:e.onPanelTriggerClick,onSubCategoryClearClick:e.onSubCategoryClearClick,onCategoryClearClick:e.onCategoryClearClick,onPanelTriggerClick:e.onPanelTriggerClick,query:e.query,title:t.name,subcategories:t.categories,safeTitle:n})})),n=e.filters.map((function(t){var n=t.name.replace(/\s+/g,"-").toLowerCase(),a=t.categories.length;return Object(i.c)(Z,{assetType:e.assetType,onPanelDismissalClick:e.onPanelDismissalClick,onMobileFilterPanelBack:e.onMobileFilterPanelBack,onActionClick:e.onActionClick,onCategoryClearClick:e.onCategoryClearClick,query:e.query,blockCount:a,subs:t.categories,safeTitle:n,isActive:e.activePanelName===t.name})}));return Object(i.c)("div",{className:"c-filterPanel-actions"},Object(i.c)("ul",{role:"tablist",className:"c-filterPanel-list c-filterPanel-list_4up"},t),n)},te=function(e){return Object(i.c)("div",{className:C()("c-filterPanel",{"isActive@mobile":e.isMobileFilterPanelActive})},Object(i.c)("div",{className:"c-filterPanel-mobileControls"},Object(i.c)("div",{className:"c-filterPanel-mobileControls-hd"},Object(i.c)("div",{className:"c-hdgSerif c-hdgSerif_1"},e.assetType===ke.ASSET_TYPE.POEM?"Explore Poems":"Explore Poets")),Object(i.c)("div",{className:"c-filterPanel-mobileControls-bd"},Object(i.c)(G,{onClick:e.onMobileFilterPanelBack,type:"minor"},"← Back"))),Object(i.c)("div",{className:"u-hideAboveSmall"},Object(i.c)(V,{onClick:e.onPanelDismissalClick})),Object(i.c)("div",{className:"c-filterPanel-hd"},Object(i.c)("span",{className:"c-txt c-txt_meta"},"Browse by:")),Object(i.c)(ee,{assetType:e.assetType,filters:e.filters,query:e.query,onExpandablePillClick:e.onExpandablePillClick,onActionClick:e.onActionClick,onSubCategoryClearClick:e.onSubCategoryClearClick,onCategoryClearClick:e.onCategoryClearClick,onPanelTriggerClick:e.onPanelTriggerClick,onPanelDismissalClick:e.onPanelDismissalClick,onMobileFilterPanelBack:e.onMobileFilterPanelBack,activePanelName:e.activePanelName,isSubPanelOpen:e.isSubPanelOpen}))},ne=function(e){var t=e.assetType,n=e.query,a=e.filters,s=e.isMobileHeaderOpen,r=e.onMobileHeaderToggle,l=e.onMobileFilterPanelToggle,c=e.onPanelDismissalClick,o=e.onSubCategoryClearClick,u=e.onCategoryClearClick,h=e.onActionClick,d=e.onExpandablePillClick,f=e.isSubPanelOpen,v=0,p=a.map((function(e){return e.categories.map((function(e){return(e.children||[]).map((function(a){var s=!1,r=!1,l=null,p=[];return a.children&&(p=a.children.map((function(e){return e.id})),a.children.forEach((function(t){t.id===n[e.key]&&(l=": ".concat(t.name))}))),(n[e.key]===a.id||g.a.inArray(n[e.key],p)>-1)&&(s=!0,v+=1),g.a.inArray(n[e.key],p)>-1&&(r=!0),Object(i.c)(W,{assetType:t,onPanelDismissalClick:c,onSubCategoryClearClick:o,onCategoryClearClick:u,onExpandablePillClick:d,onActionClick:h,title:a.name,isActive:s,hasActiveSub:r,subLabel:l,query:n,subcategoryKey:e.key,subcategoryId:a.id,subvalues:a.children,isSubPanelOpen:f})}))}))})),b=v>0;return Object(i.c)("div",{className:"c-filterHeaderMobile"},Object(i.c)("div",{className:"c-filterHeaderMobile-hd"},Object(i.c)(G,{onClick:l,type:"major"},t===ke.ASSET_TYPE.POEM?"Filter poems":"Filter poets"),b?Object(i.c)("p",{className:"c-txt c-txt_starkMeta"},v," Applied"):null),b?Object(i.c)("div",null,Object(i.c)("div",{className:C()("c-filterHeaderMobile-bd",{isActive:s})},p),Object(i.c)("div",{className:"c-filterHeaderMobile-controls"},Object(i.c)("button",{onClick:r},Object(i.c)("span",{className:"c-txt c-txt_minimalCta"},s?"Hide":"Show")))):null)},ie=function(e){var t=e.assetType,n=e.filters,a=e.currentQuery,s=e.onActionClick,r=e.onCategoryClearClick,l=e.onSubCategoryClearClick,c=e.onPanelTriggerClick,o=e.onPanelDismissalClick,u=e.activePanelName,h=e.isSubPanelOpen,d=e.onExpandablePillClick,f=e.isMobileHeaderOpen,v=e.isMobileFilterPanelActive,p=e.onMobileHeaderToggle,b=e.onMobileFilterPanelToggle,y=e.onMobileFilterPanelBack;return Object(i.c)("div",null,Object(i.c)(ne,{assetType:t,filters:n,query:a,isMobileHeaderOpen:f,isMobileFilterPanelActive:v,onMobileHeaderToggle:p,onMobileFilterPanelToggle:b,onExpandablePillClick:d,onActionClick:s,onSubCategoryClearClick:l,onCategoryClearClick:r,onPanelTriggerClick:c,onPanelDismissalClick:o,activePanelName:u,isSubPanelOpen:h}),Object(i.c)(te,{assetType:t,filters:n,query:a,isMobileFilterPanelActive:v,onExpandablePillClick:d,onActionClick:s,onSubCategoryClearClick:l,onCategoryClearClick:r,onPanelTriggerClick:c,onPanelDismissalClick:o,activePanelName:u,isSubPanelOpen:h,onMobileFilterPanelToggle:b,onMobileFilterPanelBack:y}))},ae=function(e){return Object(i.c)("ul",{className:"c-socialBlocks"},Object(i.c)("li",null,Object(i.c)("a",{onClick:function(t){t.preventDefault(),e.onListViewToggleClick({preview:1})},href:"#",className:C()({isActive:1===e.currentQuery.preview||void 0===e.currentQuery.preview})},Object(i.c)("svg",{className:"icon icon_list mix-icon_socialBlock icon_hype",role:"img","aria-labelledby":"title-16"},Object(i.c)("title",{id:"title-16"},"Card View"),Object(i.c)("desc",{id:"desc-16"},"Show card view of results"),Object(i.c)("use",{xlinkHref:"#icon_list"})))),Object(i.c)("li",null,Object(i.c)("a",{onClick:function(t){t.preventDefault(),e.onListViewToggleClick({preview:0})},href:"#",className:C()({isActive:0===e.currentQuery.preview})},Object(i.c)("svg",{className:"icon icon_bars mix-icon_socialBlock icon_hype",role:"img","aria-labelledby":"title-34"},Object(i.c)("title",{id:"title-34"},"List View"),Object(i.c)("desc",{id:"desc-34"},"Show list view of "),Object(i.c)("use",{xlinkHref:"#icon_bars"})))))},se=function(e){var t=e.currentQuery[e.queryKey]===e.queryValue;return Object(i.c)("li",null,Object(i.c)("button",{onClick:function(n){n.preventDefault(),t?e.onCategoryClearClick(e.queryKey):e.onFilterClick(y()({},e.queryKey,e.queryValue))},className:C()("c-btn c-btn_tag c-btn_tag_withIcon",{isActive:t})},Object(i.c)("svg",{className:"icon ".concat(e.iconClass," icon_tagCompanion"),role:"presentation"},Object(i.c)("use",{xlinkHref:"#".concat(e.iconClass)})),Object(i.c)(D,{html:e.displayName})))},re=function(e){var t=[{iconClass:"icon_poetryMagazine",displayName:"<i>Poetry</i> Magazine",queryKey:"filter_poetry_first",queryValue:1},{iconClass:"icon_learningResources",displayName:"Learning Resources",queryKey:"filter_poetry_learning",queryValue:1},{iconClass:"icon_children",displayName:"Suitable for Children",queryKey:"filter_poetry_children",queryValue:1},{iconClass:"icon_teens",displayName:"Suitable for Teens",queryKey:"filter_poetry_teens",queryValue:1},{iconClass:"icon_tagAudio",displayName:"Related Audio",queryKey:"filter_poetry_audio",queryValue:1},{iconClass:"icon_tagVideo",displayName:"Related Video",queryKey:"filter_poetry_video",queryValue:1}].map((function(t){return Object(i.c)(se,{onFilterClick:e.onFilterClick,onCategoryClearClick:e.onCategoryClearClick,iconClass:t.iconClass,displayName:t.displayName,queryKey:t.queryKey,queryValue:t.queryValue,currentQuery:e.currentQuery})}));return Object(i.c)("div",{className:"c-feature"},Object(i.c)("div",{className:"c-feature-sub c-feature-sub_weighted c-feature-sub_weighted_distant"},Object(i.c)("span",{className:"c-txt c-txt_meta c-txt_meta_actionLabel"},"Quick Tags")),Object(i.c)("div",{className:"c-feature-bd"},Object(i.c)("ul",{className:"c-vList c-vList_close"},t)))},le=function(e){var t="sort_by",n=e.assetType===ke.ASSET_TYPE.POEM?[{name:"Recently Added",value:"recently_added"},{name:"Title",value:"title"},{name:"First Lines",value:"first_lines"},{name:"Publication Date",value:"publication_date"}]:[{name:"Recently Added",value:"recently_added"},{name:"Last Name",value:"last_name"}];return Object(i.c)("div",{className:"c-feature c-mix-feature_shrinkwrap"},Object(i.c)("div",{className:"c-feature-sub c-feature-sub_weighted c-feature-sub_weighted_distant"},Object(i.c)("label",{htmlFor:"sortSelect",className:"c-txt c-txt_meta c-txt_meta_actionLabel"},"Sort By")),Object(i.c)("div",{className:"c-feature-bd"},Object(i.c)("select",{onChange:function(n){n.preventDefault(),""!==n.target.value&&e.onOptionChange(y()({},t,n.target.value))},className:"c-field c-field_select",name:"sortSelect",id:"sortSelect",value:e.currentQuery.sort_by},n.map((function(e){return Object(i.c)("option",{value:e.value},e.name)})))))},ce=0,oe=function(e){var t=e.name,n=e.title,a=e.description,s=e.extraClasses,r=void 0===s?[]:s;return ce+=1,Object(i.c)("svg",{role:n?"img":"presentation","aria-labelledby":!!n&&"jsx-title-".concat(ce),className:"icon icon_".concat(t," ").concat(r.join(" "))},n?Object(i.c)("title",{id:"jsx-title-".concat(ce)},n):null,a?Object(i.c)("desc",{id:"jsx-desc-".concat(ce)},a):null,Object(i.c)("use",{xlinkHref:"#icon_".concat(t)}))},ue=function(e){for(var t=e.getPaginatedUrl,n=e.onPaginatorClick,a=e.currentPage,s=e.totalPages,r=a>1,l=a<s,c=a+2,o=a-2,u=function(e){return e<=c&&e>=o},h=[],d=1;d<=s;d+=1)h.push({number:d,shouldRender:u(d)});var f=function(e,t){e.preventDefault(),""!==e.target.value&&n(t)};return Object(i.c)("div",{className:"c-pagination"},Object(i.c)("ol",{className:"c-pagination-list"},r?Object(i.c)("li",null,Object(i.c)("a",{className:"c-pagination-control",href:t(a-1),onClick:function(e){return f(e,a-1)}},Object(i.c)(oe,{name:"angleLeft",title:"Previous slide",extraClasses:["icon_sm","mix-icon_inherit"]}))):null,Object(i.c)("li",{className:"u-showAboveSmall"},Object(i.c)("ol",{className:"c-pagination-list"},h.filter((function(e){return e.shouldRender})).map((function(e){return Object(i.c)("li",null,Object(i.c)("a",{className:"\n                                        c-pagination-control\n                                        ".concat(e.number===a?"isActive":"","\n                                    "),href:t(e.number),onClick:function(t){return f(t,e.number)}},e.number))})))),l?Object(i.c)("li",null,Object(i.c)("a",{className:"c-pagination-control",href:t(a+1),onClick:function(e){return f(e,a+1)}},Object(i.c)(oe,{name:"angleRight",extraClasses:["icon_sm","mix-icon_inherit"]}))):null),Object(i.c)("div",{className:"c-pagination-select"},Object(i.c)("label",{className:"c-txt c-txt_meta c-txt_meta_actionLabel",htmlFor:"filter-pagination-select"},"Jump to:"),Object(i.c)("select",{id:"filter-pagination-select",className:"c-field c-field_select",value:a,onChange:function(e){return f(e,e.target.value)}},">",h.map((function(e){return Object(i.c)("option",{value:e.number},e.number)})))))},he=function(e){var t=e.messageContent,n=e.backLink,a=e.backLinkContent,s=e.onBackClick;return Object(i.c)("div",{className:"c-tier c-mix-tier_offsetAsymmetrical c-mix-tier_offsetAsymmetrical_proximate"},Object(i.c)("div",{className:"o-vr o-vr_4x"},Object(i.c)("h2",{className:"c-hdgSans c-hdgSans_6"},t),Object(i.c)("div",null,Object(i.c)("a",{className:"c-txt c-txt_minimalCta",href:n,onClick:function(e){e.preventDefault(),s()}},a))))},de=function e(t){var n=t.overlay,a=void 0===n||n,s=t.variant,r=void 0===s?e.VARIANT.STANDARD:s;return Object(i.c)("div",{className:a?"c-loadingContext isActive":""},Object(i.c)("div",{className:a?"c-loadingContext-loader c-loadingContext-loader_vh":""},Object(i.c)("div",{className:"\n                c-loader\n                ".concat(r===e.VARIANT.INVERTED?"c-loader_inverted":"","\n            ")},Object(i.c)("span",null),Object(i.c)("span",null),Object(i.c)("span",null),Object(i.c)("span",null))))};de.VARIANT={STANDARD:Symbol("STANDARD"),INVERTED:Symbol("INVERTED")};var fe=de;function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var ye=new E,me=new j,ge=function(e){h()(n,e);var t=be(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"FILTER_NAME_LOOKUP",null),y()(o()(i),"OPTIONS",{FIRST_PAGE:1,ITEMS_PER_PAGE:20,SORT_BY:"recently_added"}),i.state=pe({isFirstLoad:!0,itemsPerPage:i.OPTIONS.ITEMS_PER_PAGE,assets:[],filters:[],query:{page:i.OPTIONS.FIRST_PAGE,sort_by:i.OPTIONS.SORT_BY}},n.DEFAULT_UI_STATE),i.scrollHelper=new E,i.hashHelper=new j,i.apiClient=new S(e.endpoint),i.assetType=e.assetType,i.onDocumentClick=i.onDocumentClick.bind(o()(i)),i.onHashChange=i.onHashChange.bind(o()(i)),i}return l()(n,[{key:"componentDidMount",value:function(){var e=me.getHashObject(),t=pe(pe({},this.state.query),e);this.updateQuery(t,!0),this.onHashChange(),this.addDOMEventListeners()}},{key:"addDOMEventListeners",value:function(){var e=this;document.addEventListener("click",this.onDocumentClick),setTimeout((function(){window.addEventListener("hashchange",e.onHashChange)}),0)}},{key:"updateQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.state.isInteractive||t){var n=pe(pe({},this.state.query),{},{page:this.OPTIONS.FIRST_PAGE},e),i=me.objectToString(n);me.set(i)}}},{key:"createLookupTable",value:function(e){n.DEFAULT_UI_STATE.lookupCreated&&n.FILTER_NAME_LOOKUP;var t={};return g.a.each(e,(function(e,n){t[n.slug]={};var i=n.slug;g.a.each(n.categories,(function(e,n){g.a.each(n.children,(function(e,n){t[i][n.id]=n.name,n.children&&g.a.each(n.children,(function(e,n){t[i][n.id]=n.name}))}))}))})),n.DEFAULT_UI_STATE.lookupCreated=!0,t}},{key:"sendFilterEvents",value:function(e){if(window.ga){var t=window.ga,i=n.FILTER_NAME_LOOKUP,a=[],s=[];g.a.each(e,(function(e,t){Object.hasOwnProperty.call(i,e)?s.push(i[e][t]):s.push(t),a.push(e)}));var r=a.join(", "),l=s.join(", "),c=this.assetType===n.ASSET_TYPE.POEM?"Poem":"Poet";t("send",{hitType:"event",eventCategory:"".concat(c," Filter"),eventAction:"".concat(r),eventLabel:l})}}},{key:"onHashChange",value:function(){ye.scrollToTop();var e=me.getHashObject();this.loadData(e)}},{key:"loadData",value:function(e){var t=this;this.setState(pe(pe({},n.DEFAULT_UI_STATE),{},{query:e})),this.apiClient.getByQuery(e).then((function(i){var a=i.TotalResults,s=i.Filters,r=i.Entries;t.setState({totalResults:a,filters:s,assets:r,isInteractive:!0}),t.refocus(),n.FILTER_NAME_LOOKUP=t.createLookupTable(t.state.filters),t.sendFilterEvents(e)})).catch((function(){t.setState({isError:!0})}))}},{key:"refocus",value:function(){document.body.focus()}},{key:"onPaginatorClick",value:function(e){this.updateQuery({page:e})}},{key:"getPaginatedUrl",value:function(e){var t=pe(pe({},this.state.query),{},{page:e}),n=me.objectToString(t);return"#".concat(n)}},{key:"getTotalPages",value:function(){return Math.ceil(this.state.totalResults/this.state.itemsPerPage)}},{key:"onDocumentClick",value:function(){}},{key:"onPanelTriggerClick",value:function(e){this.state.isInteractive&&(this.setState({isSubPanelOpen:!1}),this.state.activePanelName===e?this.setState({activePanelName:null}):this.setState({activePanelName:e}))}},{key:"onExpandablePillClick",value:function(){this.state.isInteractive&&this.setState({isSubPanelOpen:!this.state.isSubPanelOpen,activePanelName:null})}},{key:"onCategoryClearClick",value:function(e){if(this.state.isInteractive){var t=this.state.query;delete t[e],this.updateQuery(t)}}},{key:"onSubCategoryClearClick",value:function(e){this.state.isInteractive&&this.updateQuery(e)}},{key:"onPanelDismissalClick",value:function(){this.state.isInteractive&&this.dismissPanel()}},{key:"dismissPanel",value:function(){this.setState({activePanelName:null,isSubPanelOpen:!1,isMobileFilterPanelActive:!1})}},{key:"onListViewToggleClick",value:function(e){this.state.isInteractive&&this.updateQuery(e)}},{key:"onMobileHeaderToggle",value:function(){this.state.isInteractive&&this.setState({isMobileHeaderOpen:!this.state.isMobileHeaderOpen})}},{key:"onMobileFilterPanelToggle",value:function(){this.state.isInteractive&&this.setState({isMobileFilterPanelActive:!this.state.isMobileFilterPanelActive})}},{key:"onMobileFilterPanelBack",value:function(){this.state.isInteractive&&(null===this.state.activePanelName?this.dismissPanel():this.setState({activePanelName:null}))}},{key:"render",value:function(e){if(this.state.isMobileFilterPanelActive||this.state.isSubPanelOpen?ye.lockScrollingMobile():ye.unlockScrollingMobile(),this.state.isError)return Object(i.c)(he,{messageContent:"An error occurred.",backLinkContent:"Back to previous.",onBackClick:me.back,backLink:me.getBackUrl()});var t="recently_added"!==this.state.query.sort_by;return Object(i.c)("div",null,this.state.isInteractive?null:Object(i.c)(fe,null),Object(i.c)("div",{className:"c-tier c-tier_mixOffsetDistant"},Object(i.c)("div",{className:"o-vr o-vr_4x"},Object(i.c)(ie,{assetType:this.assetType,onExpandablePillClick:this.onExpandablePillClick.bind(this),onActionClick:this.updateQuery.bind(this),onSubCategoryClearClick:this.onSubCategoryClearClick.bind(this),onCategoryClearClick:this.onCategoryClearClick.bind(this),onPanelTriggerClick:this.onPanelTriggerClick.bind(this),onPanelDismissalClick:this.onPanelDismissalClick.bind(this),filters:this.state.filters,currentQuery:this.state.query,activePanelName:this.state.activePanelName,isSubPanelOpen:this.state.isSubPanelOpen,onMobileHeaderToggle:this.onMobileHeaderToggle.bind(this),onMobileFilterPanelToggle:this.onMobileFilterPanelToggle.bind(this),onMobileFilterPanelBack:this.onMobileFilterPanelBack.bind(this),isMobileHeaderOpen:this.state.isMobileHeaderOpen,isMobileFilterPanelActive:this.state.isMobileFilterPanelActive})),Object(i.c)("div",{className:"o-vr o-vr_4x"},0===this.state.totalResults?Object(i.c)(he,{messageContent:"No results found for the current filters.",backLinkContent:"Back to previous selection.",onBackClick:me.back,backLink:me.getBackUrl()}):Object(i.c)("div",{className:"o-grid"},Object(i.c)("div",{className:"o-grid-col o-grid-col_9of12"},Object(i.c)("div",{className:"o-vr"},Object(i.c)(_,{itemsPerPage:this.state.itemsPerPage,currentPage:this.state.query.page,totalReturned:this.state.assets.length,totalResults:this.state.totalResults,assetType:this.assetType})),Object(i.c)("div",{className:"o-vr o-vr_5x"},Object(i.c)("div",{className:"o-actionGroup"},Object(i.c)("div",null,Object(i.c)("span",{className:C()("c-txt c-txt_meta",{"u-isHidden":!t})},"Refine By:")),Object(i.c)(A,{alphaState:t,currentQuery:this.state.query,onCategoryClearClick:this.onCategoryClearClick.bind(this),onActionClick:this.updateQuery.bind(this)}),Object(i.c)("div",null,Object(i.c)(ae,{currentQuery:this.state.query,onListViewToggleClick:this.onListViewToggleClick.bind(this)})))),Object(i.c)(F,{currentQuery:this.state.query,assets:this.state.assets,isInteractive:this.state.isInteractive,assetType:this.assetType}),Object(i.c)(ue,{getPaginatedUrl:this.getPaginatedUrl.bind(this),onPaginatorClick:this.onPaginatorClick.bind(this),currentPage:this.state.query.page,totalPages:this.getTotalPages()})),Object(i.c)("div",{className:"o-grid-col o-grid-col_3of12"},Object(i.c)("div",{className:"o-vr o-vr_4x"},Object(i.c)(le,{currentQuery:this.state.query,onOptionChange:this.updateQuery.bind(this),assetType:this.assetType})),this.assetType===n.ASSET_TYPE.POEM?Object(i.c)("div",{className:"o-vr o-vr_1x"},Object(i.c)(re,{onFilterClick:this.updateQuery.bind(this),onCategoryClearClick:this.onCategoryClearClick.bind(this),currentQuery:this.state.query})):null,e.sidebarHtml?Object(i.c)(R,{html:e.sidebarHtml}):null)))))}}]),n}(i.a);y()(ge,"ASSET_TYPE",{POEM:Symbol("POEM"),POET:Symbol("POET")}),y()(ge,"DEFAULT_UI_STATE",{isInteractive:!1,activePanelName:null,isSubPanelOpen:!1,isMobileHeaderOpen:!1,isMobileFilterPanelActive:!1,isError:null,lookupCreated:!1});var ke=ge,Ce=function(){function e(t){s()(this,e),Object.assign(this,e.defaults,t)}return l()(e,null,[{key:"fromData",value:function(t){return new e(t)}}]),e}();y()(Ce,"defaults",{});var Te=n(347),Oe=n.n(Te),je=function(e){var t=e.onNextClick,n=e.onPrevClick,a=e.nextHash,s=e.prevHash;return Object(i.c)("ul",null,Object(i.c)("li",null,Object(i.c)("a",{href:s,className:"c-slide-control c-slide-control_prev",onClick:function(e){e.preventDefault(),n()},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),n())}},Object(i.c)(oe,{name:"angleLeft",title:"Previous",description:"Go to the previous slide.",extraClasses:["icon_slideControl","mix-icon_inherit"]}))),Object(i.c)("li",null,Object(i.c)("a",{href:a,className:"c-slide-control c-slide-control_next",onClick:function(e){e.preventDefault(),t()},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),t())}},Object(i.c)(oe,{name:"angleRight",title:"Next",description:"Go to the next slide.",extraClasses:["icon_slideControl","mix-icon_inherit"]}))))},Se=n(73),Ee=n.n(Se),we={};we.GLOBAL=window.GLOBAL||{},we.eventEmitter=new Ee.a,we.STATUS={CONNECTED:"connected"},we.SDK_URL="//connect.facebook.net/en_US/sdk.js",we._sdkLoadedPromise=null,we.get=function(){if(null!==we._sdkLoadedPromise)return we._sdkLoadedPromise;var e=g.a.Deferred(),t=document.getElementById("fb-root");return null===t&&((t=document.createElement("div")).id="fb-root",document.body.appendChild(t)),g.a.getScript(we.SDK_URL,(function(){window.FB.init({appId:we.GLOBAL.API_KEY.FB,cookie:!0,xfbml:!0,version:"v2.8"}),e.resolve(window.FB)})),we._sdkLoadedPromise=e.promise(),we._sdkLoadedPromise};var Ae=we,Pe=function(){function e(){var t=this;s()(this,e),y()(this,"TWITTER",{DOMAIN:"http://www.twitter.com/intent/tweet"}),y()(this,"WINDOW_DEFAULTS",{HEIGHT:500,WIDTH:800}),this.isFBloaded=!1,Ae.get().done((function(){return t.isFBloaded=!0}))}return l()(e,[{key:"sharePrint",value:function(){window.print()}},{key:"shareFacebook",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t={method:"share",href:e};this.isFBloaded&&window.FB.ui(t,(function(e){}))}},{key:"shareTwitter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t="".concat(this.TWITTER.DOMAIN,"?").concat(g.a.param({url:e}));this.openPopup(t,"Twitter")}},{key:"openPopup",value:function(e,t){var n=window.screen.availWidth/2-this.WINDOW_DEFAULTS.WIDTH/2,i=window.screen.availHeight/2-this.WINDOW_DEFAULTS.HEIGHT/2;window.open(e,t,"toolbar=no,\n            location=no,\n            directories=no,\n            status=no,\n            menubar=no,\n            scrollbars=no,\n            resizable=no,\n            copyhistory=no,\n            height=".concat(this.WINDOW_DEFAULTS.HEIGHT,",\n            width=").concat(this.WINDOW_DEFAULTS.WIDTH,",\n            left=").concat(n,",\n            top=").concat(i))}}]),e}();function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var Le=function(e){h()(n,e);var t=_e(n);function n(e){var i;return s()(this,n),(i=t.call(this,e)).shareHelper=new Pe,i.bindHandlers(),i}return l()(n,[{key:"bindHandlers",value:function(){this.onTwitterClick=this.onTwitterClick.bind(this),this.onFacebookClick=this.onFacebookClick.bind(this),this.onPrintClick=this.onPrintClick.bind(this)}},{key:"onTwitterClick",value:function(){this.shareHelper.shareTwitter(this.props.shareUrl)}},{key:"onFacebookClick",value:function(){this.shareHelper.shareFacebook(this.props.shareUrl)}},{key:"onPrintClick",value:function(){this.shareHelper.sharePrint(this.props.shareUrl)}},{key:"render",value:function(e){var t=e.extraClasses,n=void 0===t?"":t,a=e.shareUrl;return Object(i.c)("div",{className:"c-slide-social ".concat(n)},Object(i.c)("ul",{className:"c-socialBlocks c-socialBlocks_inverse"},Object(i.c)("li",null,Object(i.c)("a",{href:"#",onClick:this.onTwitterClick},Object(i.c)(oe,{name:"twitter",title:"Twitter",description:"Share on Twitter.",extraClasses:["icon_sm","mix-icon_socialBlock"]}))),Object(i.c)("li",null,Object(i.c)("a",{href:"#",onClick:this.onFacebookClick},Object(i.c)(oe,{name:"facebook",title:"Facebook",description:"Share on Facebook.",extraClasses:["icon_sm","mix-icon_socialBlock"]}))),Object(i.c)("li",null,Object(i.c)("a",{href:"#",onClick:this.onPrintClick},Object(i.c)(oe,{name:"print",title:"Print",description:"Print this page.",extraClasses:["icon_sm","mix-icon_socialBlock"]}))),Object(i.c)("li",null,Object(i.c)("a",{href:"mailto:?body=".concat(a),onClick:this.onEmailClick},Object(i.c)(oe,{name:"envelope",title:"Email",description:"Email this page.",extraClasses:["icon_sm","mix-icon_socialBlock"]})))))}}]),n}(i.a);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var De=function(e){h()(n,e);var t=xe(n);function n(e){var i;return s()(this,n),(i=t.call(this,e)).state={isImageLoading:!0,isCaptionExpanded:!1,isAspectRatioPortrait:!1},i.imageElement=null,i.touchElement=null,i.hammer=null,i.bindHandlers(),i}return l()(n,[{key:"bindHandlers",value:function(){this.onCaptionClick=this.onCaptionClick.bind(this),this.onCaptionKeyDown=this.onCaptionKeyDown.bind(this),this.onImageLoad=this.onImageLoad.bind(this),this.onSwipeLeft=this.onSwipeLeft.bind(this),this.onSwipeRight=this.onSwipeRight.bind(this),this.onPan=this.onPan.bind(this),this.touchRef=this.touchRef.bind(this),this.imageRef=this.imageRef.bind(this)}},{key:"componentDidMount",value:function(){this.addTouchEventListeners()}},{key:"componentWillUnmount",value:function(){this.removeTouchEventListeners()}},{key:"componentWillReceiveProps",value:function(){this.state={isImageLoading:!0,isCaptionExpanded:!1,isAspectRatioPortrait:!1}}},{key:"onImageLoad",value:function(e){this.state.isImageLoading&&this.setState({isImageLoading:!1,isAspectRatioPortrait:e.target.width<e.target.height})}},{key:"onCaptionClick",value:function(e){e.preventDefault(),this.toggleCaption()}},{key:"onCaptionKeyDown",value:function(e){switch(e.key){case" ":break;case"Enter":e.preventDefault(),this.toggleCaption()}}},{key:"toggleCaption",value:function(){this.setState({isCaptionExpanded:!this.state.isCaptionExpanded})}},{key:"addTouchEventListeners",value:function(){this.hammer=new Oe.a(this.touchElement),this.hammer.on("swipeleft",this.onSwipeLeft),this.hammer.on("swiperight",this.onSwipeRight),this.hammer.on("pan",this.onPan)}},{key:"removeTouchEventListeners",value:function(){this.hammer.off("swipeleft"),this.hammer.off("swiperight"),this.hammer.off("pan"),this.hammer=null}},{key:"onSwipeLeft",value:function(){this.props.onNextClick()}},{key:"onSwipeRight",value:function(){this.props.onPrevClick()}},{key:"onPan",value:function(e){if(e.isFinal)this.clearPan();else{var t=this.getPanDelta(e);this.drawPan(t)}}},{key:"getPanDelta",value:function(e){return e.deltaX}},{key:"drawPan",value:function(e){var t=this;requestAnimationFrame((function(){t.imageElement.style.transform="translate3d(".concat(e,"px, 0, 0)")}))}},{key:"clearPan",value:function(){var e=this;requestAnimationFrame((function(){x()(e.touchElement.querySelectorAll("[style]")).forEach((function(e){return e.style.transform=""}))}))}},{key:"touchRef",value:function(e){this.touchElement=e}},{key:"imageRef",value:function(e){e&&(this.imageElement=e.querySelector("div"))}},{key:"render",value:function(e){var t=e.slides,n=e.activeSlide,a=e.activeIndex,s=e.onNextClick,r=e.onPrevClick,l=e.nextHash,c=e.prevHash,o=e.shareUrl;return this.clearPan(),Object(i.c)("div",{className:"\n                    c-slide-content\n                    ".concat(this.state.isAspectRatioPortrait?"c-slide-content_aspectRatioPortrait":"","\n                "),ref:this.touchRef},Object(i.c)("div",{className:"c-slide-content-media"},this.state.isImageLoading?Object(i.c)("div",{className:"c-slide-content-media-loader"},Object(i.c)(fe,{overlay:!1,variant:fe.VARIANT.INVERTED})):null,Object(i.c)("div",{className:"c-slide-content-media-image",ref:this.imageRef},Object(i.c)("div",{className:"c-slide-content-media-image-shell"},Object(i.c)("img",{onLoad:this.onImageLoad,src:n.imgSrc,alt:""}))),Object(i.c)("div",{className:"u-showAboveSmall"},Object(i.c)(Le,{shareUrl:o}),Object(i.c)(je,{onNextClick:s,onPrevClick:r,nextHash:l,prevHash:c}))),Object(i.c)("div",{className:"c-slide-content-meta"},Object(i.c)("div",{className:"c-txt c-txt_slideWayfinding"},a+1," of ",t.length),Object(i.c)("div",{className:"c-txt c-txt_slideAttribution",dangerouslySetInnerHTML:{__html:n.attribution}})),Object(i.c)("div",{className:"c-slide-content-caption"},Object(i.c)("div",{className:"u-hideAboveSmall"},Object(i.c)("div",{className:"c-txt c-txt_slideCaption c-mix-txt_inverted",dangerouslySetInnerHTML:{__html:n.caption}})),Object(i.c)("div",{className:"u-showAboveSmall"},this.state.isCaptionExpanded||!n.captionExcerpt?Object(i.c)("div",null,Object(i.c)("div",{className:"c-txt c-txt_slideCaption c-mix-txt_inverted",dangerouslySetInnerHTML:{__html:n.caption}}),n.captionExcerpt?Object(i.c)("div",null,Object(i.c)("a",{className:"c-txt c-txt_minimalCta c-mix-txt_inverted",href:"#",onKeyDown:this.onCaptionKeyDown,onClick:this.onCaptionClick},"See Less")):""):Object(i.c)("div",null,Object(i.c)("div",{className:"c-txt c-txt_slideCaption c-mix-txt_inverted",dangerouslySetInnerHTML:{__html:n.captionExcerpt}}),Object(i.c)("div",null,Object(i.c)("a",{role:"button",className:"c-txt c-txt_minimalCta c-mix-txt_inverted",href:"#",onKeyDown:this.onCaptionKeyDown,onClick:this.onCaptionClick},"See More"))))),Object(i.c)(Le,{extraClasses:"u-hideAboveSmall"}))}}]),n}(i.a),Re=function(e){var t=e.slides,n=e.activeSlide,a=e.activeIndex,s=e.onNextClick,r=e.onPrevClick,l=e.nextHash,c=e.prevHash,o=e.shareUrl;return Object(i.c)("div",{className:"c-slide"},Object(i.c)(De,{slides:t,activeIndex:a,activeSlide:n,onNextClick:s,onPrevClick:r,nextHash:l,prevHash:c,shareUrl:o}))},Ne=function(e){var t=e.onDismissClick;return Object(i.c)("a",{href:"#",className:"c-slideOverlay-dismiss",onClick:function(e){e.preventDefault(),t()},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),t())}},Object(i.c)(oe,{name:"times",title:"Dismiss",description:"Close the slideshow.",extraClasses:["icon_slideDismiss","mix-icon_inherit"]}))},Ie=function(e){var t=e.isActive,n=e.slides,a=e.activeSlide,s=e.activeIndex,r=e.onDismissClick,l=e.onNextClick,c=e.onPrevClick,o=e.nextHash,u=e.prevHash,h=e.shareUrl;return t?Object(i.c)("div",{className:"c-slideOverlay"},Object(i.c)(Ne,{onDismissClick:r}),Object(i.c)(Re,{slides:n,activeSlide:a,activeIndex:s,onNextClick:l,onPrevClick:c,nextHash:o,prevHash:u,shareUrl:h})):null};function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var Fe=function(e){h()(n,e);var t=Me(n);function n(e){var i;s()(this,n),i=t.call(this,e);var a=e.data,r=a.slideshow,l=a.slides;return i.options=He(He({},n.defaults),e.options),i.element=null,i.state={slideshow:r,slides:l.map(Ce.fromData),isActive:!1,activeIndex:0},i.bindHandlers(),i}return l()(n,[{key:"bindHandlers",value:function(){this.onDismissClick=this.onDismissClick.bind(this),this.onNextClick=this.onNextClick.bind(this),this.onPrevClick=this.onPrevClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onHashChange=this.onHashChange.bind(this)}},{key:"componentDidMount",value:function(){this.addDOMEventListeners(),this.handlePotentialActivation()}},{key:"componentDidUpdate",value:function(){this.updateHash()}},{key:"addDOMEventListeners",value:function(){window.addEventListener("hashchange",this.onHashChange)}},{key:"onKeyDown",value:function(e){if(this.state.isActive)switch("string"==typeof e.key?e.key:e.keyCode){case"Escape":case 27:this.onDismissClick();break;case"ArrowRight":case 39:this.onNextClick();break;case"ArrowLeft":case 37:this.onPrevClick()}}},{key:"onHashChange",value:function(){this.handlePotentialActivation()}},{key:"onDismissClick",value:function(){this.deactivate()}},{key:"handlePotentialActivation",value:function(){window.location.hash.startsWith(this.getHash())&&!this.state.isActive&&this.activate()}},{key:"activate",value:function(){this.setState({isActive:!0,activeIndex:this.getNavigationHashSlide()}),this.toggleScrollLock(!0)}},{key:"toggleScrollLock",value:function(e){e?(document.documentElement.classList.add(this.options.lockClass),document.body.classList.add(this.options.lockClass)):(document.documentElement.classList.remove(this.options.lockClass),document.body.classList.remove(this.options.lockClass))}},{key:"deactivate",value:function(){this.setState({isActive:!1,activeIndex:0}),this.toggleScrollLock(!1)}},{key:"onNextClick",value:function(){this.setState({activeIndex:this.getNextIndex()})}},{key:"onPrevClick",value:function(){this.setState({activeIndex:this.getPrevIndex()})}},{key:"getNextIndex",value:function(){return this.state.activeIndex===this.state.slides.length-1?0:this.state.activeIndex+1}},{key:"getPrevIndex",value:function(){return 0===this.state.activeIndex?this.state.slides.length-1:this.state.activeIndex-1}},{key:"getActiveSlide",value:function(){return this.state.slides[this.state.activeIndex]}},{key:"updateHash",value:function(){var e=window.location.pathname;if(this.state.isActive){var t=e+this.getHash(this.state.activeIndex);window.history.replaceState({},"",t)}else window.history.replaceState({},"",e)}},{key:"getHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?"".concat(this.options.hashPrefix).concat(this.state.slideshow.id):this.options.hashPrefix+this.state.slideshow.id+this.options.hashDelimiter+e}},{key:"getNavigationHashSlide",value:function(){var e=window.location.hash.split(this.options.hashDelimiter)[1];return void 0!==e?Number(e):0}},{key:"render",value:function(){var e=this;return Object(i.c)("div",{tabIndex:"-1",style:"outline: none;",onKeyDown:this.onKeyDown,ref:function(t){return e.element=t}},Object(i.c)(Ie,{isActive:this.state.isActive,slides:this.state.slides,activeSlide:this.getActiveSlide(),activeIndex:this.state.activeIndex,hash:this.getHash(this.state.activeIndex),nextHash:this.getHash(this.getNextIndex()),prevHash:this.getHash(this.getPrevIndex()),onDismissClick:this.onDismissClick,onNextClick:this.onNextClick,onPrevClick:this.onPrevClick,shareUrl:this.state.slideshow.shareUrl}))}}]),n}(i.a);y()(Fe,"defaults",{hashPrefix:"#slideshow-",hashDelimiter:"/",lockClass:"u-isScrollingDisabledBySlideshow"});n(653);var Ve=n(20),Be=n.n(Ve),qe=(n(198),function(){function e(t,n){s()(this,e),y()(this,"$empty",g()()),this.eventEmitter=new Ee.a,this.$element=t,this.isEnabled=!1,this.isInteractive=!1,this.options=g.a.extend(!0,{},this.constructor.defaults,n)}return l()(e,[{key:"init",value:function(){return this.setupHandlers().createChildren().layout().enable(),this}},{key:"setupHandlers",value:function(){return this}},{key:"createChildren",value:function(){return this}},{key:"removeChildren",value:function(){return this}},{key:"layout",value:function(){return this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"destroy",value:function(){return this.disable().removeChildren(),this}}]),e}());function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(qe,"defaults",{});var Ge=n(657),Ke=function(e){h()(n,e);var t=Ue(n);function n(e){var i;return s()(this,n),i=t.call(this,e),n.EVENT={NEXT_MONTH:"next-month",PREV_MONTH:"prev-month"},i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this}},{key:"createChildren",value:function(){Be()(p()(n.prototype),"createChildren",this).call(this);var e=this;return this.$AgendaViewport=this.$element,this.$agenda=this.$AgendaViewport.clndr({clickEvents:{nextMonth:function(){e.onNextMonthHandler()},previousMonth:function(){e.onPreviousMonthHandler()}},constraints:{startDate:Date.now()},daysOfTheWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],events:[],render:function(e){return Ge(e)},extras:{isInitial:!0},showAdjacentMonths:!1}),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,g()(".js-loadingConditional").hide()),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"render",value:function(e){this.$agenda.setEvents(e)}},{key:"advance",value:function(){this.$agenda.forward()}},{key:"rewind",value:function(){this.$agenda.back()}},{key:"onNextMonthHandler",value:function(){this.eventEmitter.emit(n.EVENT.NEXT_MONTH)}},{key:"onPreviousMonthHandler",value:function(){this.eventEmitter.emit(n.EVENT.PREV_MONTH)}}]),n}(qe);function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var ze=function(e){h()(n,e);var t=We(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"WINDOW_DEFAULTS",{HEIGHT:65,WIDTH:600}),y()(o()(i),"DATA_ATTRIBUTES",{URL:"popupview-url",TITLE:"popupview-title"}),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.onTriggerClicked=this.onTriggerClicked.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$trigger=this.$element,this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$trigger.on("click",this.onTriggerClicked)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onTriggerClicked",value:function(e){e.preventDefault();var t=g()(e.currentTarget).data(this.DATA_ATTRIBUTES.URL),n=g()(e.currentTarget).data(this.DATA_ATTRIBUTES.TITLE);this.openPopup(t,n)}},{key:"openPopup",value:function(e,t){var n=window.screen.availWidth/2-this.WINDOW_DEFAULTS.WIDTH/2,i=window.screen.availHeight/2-this.WINDOW_DEFAULTS.HEIGHT/2;window.open(e,t,"toolbar=no,\n            location=no,\n            directories=no,\n            status=no,\n            menubar=no,\n            scrollbars=no,\n            resizable=no,\n            copyhistory=no,\n            height=".concat(this.WINDOW_DEFAULTS.HEIGHT,",\n            width=").concat(this.WINDOW_DEFAULTS.WIDTH,",\n            left=").concat(n,",\n            top=").concat(i))}}]),n}(qe);function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var Ye=function(e){h()(n,e);var t=Qe(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"REFERRER",document.referrer),y()(o()(i),"CLASSES",{LINKTARGET:"js-backLink",VISIBILITY:"u-isHidden"}),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.handleTargetClick=this.handleTargetClick.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$linkTarget=this.$element.find(".".concat(this.CLASSES.LINKTARGET)),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$linkTarget.attr("href",this.REFERRER),this.$linkTarget.on("click",this.handleTargetClick),this.toggleLink()),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this.$linkTarget.off("click",this.handleTargetClick),this):this}},{key:"handleTargetClick",value:function(e){e.preventDefault(),window.history.back(-1)}},{key:"toggleLink",value:function(){this.$linkTarget.get(0).hostname.trim().toLowerCase()===window.location.hostname&&this.$linkTarget.removeClass(this.CLASSES.VISIBILITY)}}]),n}(qe),Xe=n(113),Je=n.n(Xe),Ze=n(45),et=n.n(Ze),tt=n(68),nt=n.n(tt),it={url:window.GLOBAL.ENDPOINTS.CONTENT.BASE,handleContentType:function(e){var t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():Promise.reject(new Error("Successful response, but incorrect content type."))},handleError:function(e){return e.ok?e:Promise.reject(e.statusText)},get:function(e){return window.fetch(this.url+e,{method:"GET",headers:new Headers({Accept:"application/json"})}).then(this.handleError).then(this.handleContentType).catch((function(e){throw new Error(e)}))}},at={normalizeData:function(e){var t=e.entries;return{totalItems:e.totalItems,totalPages:e.totalPages,reviews:t}},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return it.get("/book-reviews".concat(e)).then(this.normalizeData)}},st=n(664),rt=function(){function e(){s()(this,e),y()(this,"PREFIX","#"),y()(this,"objectToString",(function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")})),y()(this,"back",(function(){window.history.back()})),this.history=[window.location.hash]}return l()(e,[{key:"get",value:function(){return window.location.hash.substr(this.PREFIX.length)}},{key:"set",value:function(e){""===window.location.hash&&""===e||(window.location.hash=this.PREFIX+e,this.history.push(window.location.hash))}},{key:"getHashObject",value:function(){return st(this.get(),!0)}},{key:"setHashObject",value:function(e){this.set(this.objectToString(e))}},{key:"getPathArray",value:function(){return this.get().split("/")}},{key:"setPathArray",value:function(e){this.set(e.join("/"))}},{key:"getBackUrl",value:function(){return this.history.length>=2?this.history[this.history.length-2]:"#"}}]),e}(),lt=function(e){return"\n    ".concat(function(e){return e.map((function(e){return'\n        <li>\n          <div class="o-card o-card_stretch">\n            <a class="o-card-media o-card-media_bookAspect" href="'.concat(e.entryUrl,'">\n              ').concat(e.bookImage,'\n            </a>\n            <div class="o-card-bd o-card-bd_constrained">\n              <div class="c-feature">\n                <div class="c-feature-preamble">\n                  <span class="c-txt_attribution c-txt_attribution_muted">').concat(e.releaseDate,'</span>\n                </div>\n                <div class="c-feature-hd">\n                  <h2 class="c-hdgSans c-hdgSans_2">\n                    <a href="').concat(e.entryUrl,'">\n                      <span>').concat(e.bookTitle,"</span>\n                      ").concat(e.isAwardWinner?"".concat('\n    <span class="c-hdgSans_2-icon">\n    <svg width="14" height="21" viewBox="0 0 14 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <g clip-path="url(#clipAward)">\n        <path d="M0 0V20.6712C0 20.9178 0.23796 21.0822 0.436261 20.9589L6.38527 17.6301C6.78187 17.3836 7.29745 17.3836 7.69405 17.6301L13.3654 20.8356C13.6431 21 14 20.7945 14 20.4247V0H0ZM11.3428 8.26027L9.47875 10.1507C9.39943 10.2329 9.39943 10.3151 9.39943 10.3973L9.83569 13.0685C9.87535 13.3151 9.63739 13.4795 9.43909 13.3562L7.13881 12.0822C7.05949 12.0411 6.98017 12.0411 6.86119 12.0822L4.56091 13.3562C4.36261 13.4795 4.12465 13.274 4.16431 13.0685L4.60057 10.3973C4.60057 10.3151 4.60057 10.1918 4.52125 10.1507L2.65722 8.26027C2.49858 8.09589 2.5779 7.80822 2.81586 7.76712L5.39377 7.39726C5.47309 7.39726 5.55241 7.31507 5.59207 7.23288L6.74221 4.80822C6.86119 4.60274 7.13881 4.60274 7.25779 4.80822L8.40793 7.23288C8.44759 7.31507 8.52691 7.39726 8.60623 7.39726L11.1841 7.76712C11.4221 7.80822 11.5014 8.09589 11.3428 8.26027Z" fill="#E81C23"></path>\n      </g>\n      <defs>\n        <clipPath id="clipAward">\n        <rect width="14" height="21" fill="white"></rect>\n        </clipPath>\n      </defs>\n    </svg>\n  </span>\n  '):"","\n                    </a>\n                  </h2>\n                </div>\n                ").concat(e.bookAttribution?'\n                  <div class="c-feature-sub '.concat(e.translators?"c-feature-sub_flat":"",'">\n                    <span class="c-txt c-txt_attribution">').concat(e.bookAttribution,"</span>\n                  </div>\n                "):"","\n                ").concat(e.translators?'\n                  <div class="c-feature-sub">\n                    <span class="c-txt c-txt_attribution">'.concat(e.translators,"</span>\n                  </div>\n                "):"","\n                ").concat(e.bookCategories?'\n                  <div class="o-vr o-vr_8x">\n                    '.concat(function(e){return e.map((function(e){return'\n      <button\n        class="js-category-trigger c-pill c-txt c-txt_attribution c-txt_attribution_static js-filter-trigger"\n        data-category-id="'.concat(e.id,'"\n        data-category-name="').concat(e.name,'"\n      >\n        <span class="u-isVisuallyHidden">Filter by Category: </span>').concat(e.name,"\n      </button>\n    ")})).join("")}(e.bookCategories),"\n                  </div>\n                "):"","\n              </div>\n            </div>\n          </div>\n        </li>\n      ")})).join("")}(e),"\n  ")};function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=new rt,ht=function(){function e(t,n){var i=this;s()(this,e),y()(this,"fetchResults",function(){var e=nt()(et.a.mark((function e(t){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",at.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y()(this,"handleLoadMoreClick",nt()(et.a.mark((function e(){var t,n,a,s,r;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isLoading){e.next=2;break}return e.abrupt("return");case 2:return i.isLoading=!0,i.loadTrigger.style.opacity=".5",i.loadTrigger.setAttribute("disabled",""),i.currentPage+=1,t=ut.getHashObject(),n=ot(ot({},{page:i.currentPage}),t),a=ut.objectToString(n),e.next=11,i.fetchResults("?".concat(a));case 11:s=e.sent,r=s.reviews,i.isLoading=!1,i.loadTrigger.style.opacity="1",i.loadTrigger.removeAttribute("disabled"),i.loadTrigger.classList.remove("disabled"),i.resultsContainer.insertAdjacentHTML("beforeend",lt(r)),i.currentPage===i.totalPages&&(i.loadTrigger.style.opacity="0",i.loadTrigger.setAttribute("disabled",""),i.loadTrigger.classList.add("disabled"));case 19:case"end":return e.stop()}}),e)})))),y()(this,"handleCategoryClick",(function(e){if(e.target.dataset.categoryId){e.preventDefault(),e.stopPropagation(),i.activeCategory=e.target.dataset.categoryName;var t=ut.objectToString({category:e.target.dataset.categoryId});ut.set(t)}})),y()(this,"handleCategoryDismissal",(function(){ut.set("")})),y()(this,"handleHashChange",nt()(et.a.mark((function e(){var t,n,a,s,r,l,c,o,u;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=ut.getHashObject()).category&&(n=i.element.querySelector('[data-category-id="'.concat(t.category,'"]')),i.activeCategory=n.dataset.categoryName),a=ot(ot({},i.baseQuery),t),s=ut.objectToString(a),i.currentPage=1,i.loadTrigger.style.opacity="0",i.loadTrigger.setAttribute("disabled",""),i.resultsContainer.style.opacity=".2",i.resultsMetaContainer.style.display="none",e.next=11,i.fetchResults("?".concat(s));case 11:r=e.sent,l=r.totalItems,c=r.totalPages,o=r.reviews,u=l>1?"Results":"Result",i.totalPages=c,t.category&&(i.appliedFilterText.innerText=i.activeCategory,i.filterResultsCount.innerText="".concat(l," ").concat(u," "),i.resultsMetaContainer.style.display="block"),i.resultsContainer.innerHTML=lt(o),document.documentElement.scrollIntoView(),i.resultsContainer.style.opacity="1",l>i.options.reviewLimit&&(i.loadTrigger.style.opacity="1",i.loadTrigger.removeAttribute("disabled"));case 22:case"end":return e.stop()}}),e)}))));var a=Je()(t,1);this.element=a[0],this.options=ot(ot({},e.defaults),n),this.currentPage=1,this.totalPages=parseInt(this.element.dataset.totalPages,10),this.isLoading=!1,this.activeCategory=void 0,this.baseQuery={page:1},this.init()}return l()(e,[{key:"init",value:function(){return this.createChildRefs().enable(),this}},{key:"createChildRefs",value:function(){return this.categoryTriggers=this.element.querySelectorAll(this.options.categoryTrigger),this.appliedFilterText=this.element.querySelector(this.options.appliedFilterText),this.filterResultsCount=this.element.querySelector(this.options.filterResultsCount),this.resultsMetaContainer=this.element.querySelector(this.options.resultsMetaContainer),this.categoryDismissal=this.element.querySelector(this.options.dismissal),this.loadTrigger=this.element.querySelector(this.options.loadTrigger),this.resultsContainer=this.element.querySelector(this.options.resultsContainer),this}},{key:"enable",value:function(){var e=ut.getHashObject();if(e.category){var t=ut.objectToString(e);ut.set(t),this.handleHashChange()}return window.addEventListener("hashchange",this.handleHashChange),this.resultsContainer.addEventListener("click",this.handleCategoryClick),this.loadTrigger.addEventListener("click",this.handleLoadMoreClick),this.categoryDismissal.addEventListener("click",this.handleCategoryDismissal),this}}]),e}();function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(ht,"defaults",{appliedFilterText:".js-applied-cat-text",filterResultsCount:".js-applied-cat-count",dismissal:".js-filter-dismissal",loadTrigger:".js-review-loader-trigger",resultsContainer:".js-results-container",resultsMetaContainer:".js-filter-result-meta",reviewLimit:12});var ft=n(665),vt=function(e){h()(n,e);var t=dt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),n.EVENT={NEXT_MONTH:"next-month",PREV_MONTH:"prev-month"},i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this}},{key:"createChildren",value:function(){var e=this;return Be()(p()(n.prototype),"createChildren",this).call(this),this.$calendarViewport=this.$element,this.$calendar=this.$calendarViewport.clndr({clickEvents:{nextMonth:function(){e.onNextMonthHandler()},previousMonth:function(){e.onPreviousMonthHandler()}},constraints:{startDate:Date.now()},daysOfTheWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],events:[],render:function(e){return ft(e)},multiDayEvents:{startDate:"startDate",endDate:"endDate",singleDay:"date"},showAdjacentMonths:!1}),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"render",value:function(e){this.$calendar.setEvents(e)}},{key:"advance",value:function(){this.$calendar.forward()}},{key:"rewind",value:function(){this.$calendar.back()}},{key:"onNextMonthHandler",value:function(){this.eventEmitter.emit(n.EVENT.NEXT_MONTH)}},{key:"onPreviousMonthHandler",value:function(){this.eventEmitter.emit(n.EVENT.PREV_MONTH)}}]),n}(qe),pt={BASE_TEMPO:250,EASING_PRIMARY:"easeOutCubic",EASING_SECONDARY:"easeInCubic",EASING_TERTIARY:"easeInOutCubic"},bt=pt;function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}window.jQuery=window.$=g.a,n(337),delete window.jQuery,delete window.$;var mt=function(e){h()(n,e);var t=yt(n);function n(e,i){var a;return s()(this,n),a=t.call(this,e,i),y()(o()(a),"events",{OPENED:"opened",CLOSED:"closed"}),y()(o()(a),"mqSmall","668px"),y()(o()(a),"isCollapsed",(function(){return this.$element.hasClass(this.options.collapsedClass)})),a.init(),a}return l()(n,[{key:"setupHandlers",value:function(){return this.handleTriggerClick=this.handleTriggerClick.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$trigger=this.$element.find('[data-collapsible-role="trigger"]').not(this.$element.find('[data-collapsible-role="panel"] [data-collapsible-role="trigger"]')),this.$panel=this.$element.find('[data-collapsible-role="panel"]').not(this.$element.find('[data-collapsible-role="panel"] [data-collapsible-role="panel"]')),this}},{key:"removeChildren",value:function(){return Be()(p()(n.prototype),"removeChildren",this).call(this),this}},{key:"enable",value:function(){if(this.isEnabled)return this;this.isEnabled=!0;var e=this.isCollapsed(),t={overflow:"visible",height:"auto",display:"block"},n=window.matchMedia(this.mqSmall).matches;return(e||this.options.isMobileCollapsed&&!n)&&(t.overflow="hidden",t.height=0),n||this.options.isMobileCollapsed&&this.close(),this.$panel.css(t),this.$trigger.on("click",this.handleTriggerClick),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"handleTriggerClick",value:function(e){e.preventDefault(),this.toggle()}},{key:"toggle",value:function(){var e=this,t=this.isCollapsed(),n={height:0},i={duration:this.options.duration,easing:this.options.easing};t&&(n.height=this.$panel.get(0).scrollHeight,i.complete=function(){e.$panel.height("auto"),e.$panel.css("overflow","visible")}),this.$trigger.attr("aria-expanded",t),this.$panel.attr("aria-hidden",!t),this.$element.toggleClass(this.options.collapsedClass),this.$panel.css("overflow","hidden"),this.$panel.velocity("stop").velocity(n,i),this.eventEmitter.emit(t?this.events.OPENED:this.events.CLOSED,this)}}]),n}(qe);function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(mt,"defaults",{duration:bt.BASE_TEMPO,easing:bt.EASING_PRIMARY,collapsedClass:"isCollapsed",isMobileCollapsed:!1});var kt=function(e){h()(n,e);var t=gt(n);function n(e,i){var a;return s()(this,n),(a=t.call(this,e,i)).$disclosureTrigger=e.find('[data-disclosure-role="trigger"]'),a.$disclosurePanel=e.find('[data-disclosure-role="panel"]'),a.disclosureThreshold=a.$disclosurePanel.data("disclosureThreshold"),a.toggleClass="o-mix-sectionList_obscuredAfter".concat(a.disclosureThreshold),a.originalText=a.$disclosureTrigger.find("span").text(),a.closeText=a.$disclosureTrigger.data("disclosureClosetext"),a.activeClass="isOpen",a.handleTriggerClick=a.handleTriggerClick.bind(o()(a)),a.init(),a}return l()(n,[{key:"enable",value:function(){return this.options.toggleClassOverride&&(this.toggleClass="".concat(this.options.toggleClassOverride,"_obscuredAfter").concat(this.disclosureThreshold)),this.$disclosureTrigger.on("click",this.handleTriggerClick),this}},{key:"handleTriggerClick",value:function(e){e.preventDefault(),this.toggle()}},{key:"toggle",value:function(){this.$element.toggleClass(this.activeClass),this.$disclosurePanel.toggleClass(this.toggleClass),this.updateText()}},{key:"updateText",value:function(){this.$disclosureTrigger.find("span").text()===this.closeText?this.$disclosureTrigger.find("span").text(this.originalText):this.$disclosureTrigger.find("span").text(this.closeText)}}]),n}(qe);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(kt,"defaults",{toggleClassOverride:null});var jt=function(e){h()(n,e);var t=Ot(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"DATA_ATTRIBUTE",{TRIGGER:"event-trigger",CONFIG:"event-config"}),i.$triggers=e.find("[data-".concat(i.DATA_ATTRIBUTE.TRIGGER,"]")),window.ga?(i.init(),i):f()(i)}return l()(n,[{key:"setupHandlers",value:function(){return this.handleTriggerClick=this.handleTriggerClick.bind(this),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$triggers.on("click",this.handleTriggerClick)),this}},{key:"handleTriggerClick",value:function(e){var t=g()(e.currentTarget).data("event-config"),n=Tt(Tt({},this.options.GAConfig),t);this.emitEvent(n)}},{key:"emitEvent",value:function(e){window.ga("send","event",e)}}]),n}(qe);function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(jt,"defaults",{GAConfig:{transport:"beacon"}});var Et=function(e){h()(n,e);var t=St(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"latestKnownScrollY",0),y()(o()(i),"ticking",!1),y()(o()(i),"logoPadOffset",0),y()(o()(i),"DEFAULTS",{CLASSES:{IS_SCROLLED:"isScrolled"}}),i.$window=g()(window),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.onWindowScrolledHandler=this.onWindowScrolled.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this}},{key:"removeChildren",value:function(){return Be()(p()(n.prototype),"removeChildren",this).call(this),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$window.on("scroll",this.onWindowScrolledHandler)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onWindowScrolled",value:function(){this.latestKnownScrollY=this.$window.scrollTop(),this._requestTick()}},{key:"updateElements",value:function(){this.ticking=!1;var e=this.latestKnownScrollY;this._decorateMasthead(e)}},{key:"_requestTick",value:function(){this.ticking||requestAnimationFrame(this.updateElements.bind(this)),this.ticking=!0}},{key:"_decorateMasthead",value:function(e){e>1?this.$element.addClass(this.DEFAULTS.CLASSES.IS_SCROLLED):this.$element.removeClass(this.DEFAULTS.CLASSES.IS_SCROLLED)}}]),n}(qe);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var At=function(e){h()(n,e);var t=wt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"REFERRER",document.referrer),y()(o()(i),"CLASSES",{CONTROL_TARGET:"js-jumpSelect"}),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.handleTargetChange=this.handleTargetChange.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$controlTarget=this.$element.find(".".concat(this.CLASSES.CONTROL_TARGET)),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$controlTarget.on("change",this.handleTargetChange)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this.$controlTarget.off("click",this.handleTargetChange),this):this}},{key:"handleTargetChange",value:function(e){e.preventDefault(),window.location.href=g()(e.currentTarget).val()}}]),n}(qe);function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var _t=function(e){h()(n,e);var t=Pt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"latestKnownScrollY",0),y()(o()(i),"ticking",!1),y()(o()(i),"logoPadOffset",0),y()(o()(i),"DEFAULTS",{CLASSES:{IS_SCROLLED:"isScrolled"}}),i.$window=g()(window),i.$navContainer=i.$element.find(".js-scrollNav"),i.$logoMark=i.$element.find(".js-convertibleMark > svg"),i.$markOrigin=i.$element.find(".js-convertibleMark"),i.$markDestination=i.$element.find(".js-markTarget"),i.$mastheadMark=i.$element.find(".js-markTarget > svg"),i.originTopOffset=i.$markOrigin.offset().top,i.destTopPosition=i.$markDestination.position().top,i.triggerPosition=i.originTopOffset-i.destTopPosition,i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){var e,t,n,i;return this.onWindowResizeHandler=(e=this.onWindowResized.bind(this),t=100,function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var l=this,c=function(){i=null,n||e.apply(l,s)},o=n&&!i;clearTimeout(i),i=setTimeout(c,t),o&&e.apply(l,s)}),this.onWindowScrolledHandler=this.onWindowScrolled.bind(this),this.mql=this.$window.get(0).matchMedia("(max-width: 1170px)"),this.mql.matches&&(this.logoPadOffset=15),this.mql.addListener(this.handleBreakpoint.bind(this)),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this}},{key:"removeChildren",value:function(){return Be()(p()(n.prototype),"removeChildren",this).call(this),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$window.on("scroll",this.onWindowScrolledHandler),this.$window.on("resize",this.onWindowResizeHandler)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onWindowScrolled",value:function(){this.latestKnownScrollY=this.$window.scrollTop(),this._requestTick()}},{key:"onWindowResized",value:function(){var e=this.$markOrigin.offset().top;this.triggerPosition=e-this.destTopPosition}},{key:"updateElements",value:function(){this.ticking=!1;var e=this.latestKnownScrollY;this._relocateMark(e),this._convertMasthead(e)}},{key:"handleBreakpoint",value:function(e){e.matches?this.logoPadOffset=15:this.logoPadOffset=0}},{key:"_requestTick",value:function(){this.ticking||requestAnimationFrame(this.updateElements.bind(this)),this.ticking=!0}},{key:"_relocateMark",value:function(e){var t=this.$element.find(".js-markTarget > svg"),n=this.$markOrigin.position().left+this.logoPadOffset,i=this.$markOrigin.outerWidth();e>=this.triggerPosition?(this.$markDestination.css({left:n,width:i}),g()(this.$logoMark).appendTo(this.$markDestination)):t.appendTo(this.$markOrigin)}},{key:"_convertMasthead",value:function(e){e>=this.triggerPosition?this.$element.addClass(this.DEFAULTS.CLASSES.IS_SCROLLED):this.$element.removeClass(this.DEFAULTS.CLASSES.IS_SCROLLED)}}]),n}(qe);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}window.jQuery=window.$=g.a,n(666),delete window.jQuery,delete window.$;var xt=function(e){h()(n,e);var t=Lt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"DATA_ATTRIBUTE",{TITLE:"player-title"}),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.onPlayerEvent=this.onPlayerEvent.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$player=this.$element,this.playerInstance=this.$player.mediaelementplayer({}),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.playerInstance.on("play",this.onPlayerEvent),this.playerInstance.on("pause",this.onPlayerEvent),this.playerInstance.on("ended",this.onPlayerEvent)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onPlayerEvent",value:function(e){var t=this.$element.data(this.DATA_ATTRIBUTE.TITLE),n=this.$player.prop("nodeName").toLowerCase(),i=n.charAt(0).toUpperCase()+n.slice(1);this.sendGAEvents(e.originalEvent.type,t,i)}},{key:"sendGAEvents",value:function(e,t,n){window.ga&&(0,window.ga)("send","event",{eventCategory:n,eventAction:e,eventLabel:t})}}]),n}(qe);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var Rt=function(e){h()(n,e);var t=Dt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"defaults",{CLASSES:{SCROLL_DISABLED:"u-isScrollingDisabled",NAV_OPEN:"isActive",TRIGGER_ACTIVE:"isIlluminated"}}),y()(o()(i),"drawerIsOpen",!1),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.onTriggerClickHandler=this.onTriggerClick.bind(this),this.onSearchFocusHandler=this.onSearchFocus.bind(this),this.onPanelLinkClick=this.onPanelLinkClick.bind(this),this.onSearchBlurHandler=this.onSearchBlur.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$window=g()(window),this.$html=g()("html"),this.$navTrigger=this.$element.find(".js-mobileNavTrigger"),this.$mobileNavViewport=this.$element.find(".js-mobileNavViewport"),this.$panelLink=this.$mobileNavViewport.find(".c-navPanel-item"),this.$mobileSearch=this.$element.find(".js-inertSearch"),this.$searchTrigger=this.$element.find(".js-focusCompanion"),this}},{key:"removeChildren",value:function(){return Be()(p()(n.prototype),"removeChildren",this).call(this),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$navTrigger.on("click",this.onTriggerClickHandler),this.$panelLink.on("click",this.onPanelLinkClick),this.$mobileSearch.on("focus",this.onSearchFocusHandler),this.$mobileSearch.on("blur",this.onSearchBlurHandler)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onSearchFocus",value:function(){this.$searchTrigger.addClass(this.defaults.CLASSES.TRIGGER_ACTIVE)}},{key:"onSearchBlur",value:function(){this.$searchTrigger.removeClass(this.defaults.CLASSES.TRIGGER_ACTIVE)}},{key:"onPanelLinkClick",value:function(e){window.location.pathname===g()(e.target).get(0).pathname&&this.dismissNav(g()("#mobileNav"))}},{key:"onTriggerClick",value:function(e){var t=g()(e.currentTarget).attr("aria-controls"),n=this.$element.find("#".concat(t));this.dismissNav(this.$mobileNavViewport.not("#".concat(t))),n.hasClass(this.defaults.CLASSES.NAV_OPEN)?this.dismissNav(n):this.openNav(n)}},{key:"openNav",value:function(e){var t=e.attr("id"),n=this.$element.find("[aria-controls=".concat(t,"]"));this.drawerIsOpen=!0,e.addClass(this.defaults.CLASSES.NAV_OPEN),this.$html.addClass(this.defaults.CLASSES.SCROLL_DISABLED),n.attr("aria-expanded",!0),e.attr("aria-hidden",!1)}},{key:"dismissNav",value:function(e){var t=e.attr("id"),n=this.$element.find("[aria-controls=".concat(t,"]"));this.drawerIsOpen=!1,e.removeClass(this.defaults.CLASSES.NAV_OPEN),this.$html.removeClass(this.defaults.CLASSES.SCROLL_DISABLED),n.attr("aria-expanded",!1),e.attr("aria-hidden",!0)}}]),n}(qe);function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var It=function(e){h()(n,e);var t=Nt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"CLASSES",{ACTIVE:"isActive",TRIGGER:"js-poemHighlightTrigger",TEXT:"annotation"}),y()(o()(i),"isActive",!0),i.$highlightTrigger=i.$element.find(".".concat(i.CLASSES.TRIGGER)),i.$highlightIconText=i.$element.find(".".concat(i.CLASSES.TRIGGER," > svg > desc")),i.$annotationText=i.$element.find(".".concat(i.CLASSES.TEXT)),i.handleHighlightAction=i.handleHighlightAction.bind(o()(i)),i.init(),i}return l()(n,[{key:"enable",value:function(){this._crossReferenceItems(),this.$element.toggleClass(this.CLASSES.ACTIVE,this.isActive),this._handleDescriptionState(this.isActive),this._handleItemFocus(this.isActive),this.$highlightTrigger.on("click",this.handleHighlightAction)}},{key:"handleHighlightAction",value:function(e){e.preventDefault(),this._toggle()}},{key:"_toggle",value:function(){this.isActive?this._hideHighlights():this._showHighlights()}},{key:"_hideHighlights",value:function(){this.isActive&&(this.isActive=!1,this._handleDescriptionState(this.isActive),this.$element.toggleClass(this.CLASSES.ACTIVE,this.isActive),this._handleItemFocus(this.isActive))}},{key:"_showHighlights",value:function(){this.isActive||(this.isActive=!0,this._handleDescriptionState(this.isActive),this.$element.toggleClass(this.CLASSES.ACTIVE,this.isActive),this._handleItemFocus(this.isActive))}},{key:"_handleItemFocus",value:function(e){e?this.$annotationText.attr("tabindex",0):this.$annotationText.attr("tabindex",-1)}},{key:"_handleDescriptionState",value:function(e){e?this.$highlightIconText.text("Disable annotations"):this.$highlightIconText.text("Enable annotations")}},{key:"_crossReferenceItems",value:function(){g()(this.$annotationText).each((function(e,t){var n=g()(t).next("span").attr("id");g()(t).attr("aria-describedby",n)}))}}]),n}(qe);function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var Ht=function(e){h()(n,e);var t=$t(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"defaults",{panelActiveClass:"isActive",navListClass:"js-primaryNavView"}),y()(o()(i),"keyMap",{48:0,49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9,59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"}),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.onTopLinkFocusedHandler=this.onTopLinkFocused.bind(this),this.onTopLinkKeydownHandler=this.onTopLinkKeydown.bind(this),this.onPanelLinkClick=this.onPanelLinkClick.bind(this),this.onPanelLinkKeydownHandler=this.onPanelLinkKeydown.bind(this),this.onLastKeydownHandler=this.onLastKeydown.bind(this),this.onDocumentClickHandler=this.onDocumentClick.bind(this),this.onTopLinksClickHandler=this.onTopLinksClick.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$menuItems=this.$element.find("li > a"),this.$topLinks=this.$element.find("> li > a"),this.$menuPanels=this.$topLinks.next("ul"),this.$panelLinks=this.$element.find("> li > a + ul a"),this.$lastLink=this.$element.find("a").last(),this}},{key:"removeChildren",value:function(){return Be()(p()(n.prototype),"removeChildren",this).call(this),this.$topLinks=null,this.$menuPanels=null,this.$panelLinks=null,this.$lastLink=null,this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$element.attr("role","menubar"),this.$menuItems.attr("role","menuitem"),this.$menuItems.closest("li").attr("role","none"),this.$menuPanels.attr({"aria-hidden":!0,role:"menu"}).find("a").attr("tabindex",-1),this.$topLinks.each((function(e,t){g()(t).attr("tabindex",0),g()(t).next("ul").length&&g()(t).attr("aria-haspopup","true").attr("aria-expanded","false")})),this.$topLinks.on("focus",this.onTopLinkFocusedHandler),this.$topLinks.on("click",this.onTopLinksClickHandler),this.$topLinks.on("keydown",this.onTopLinkKeydownHandler),this.$panelLinks.on("click",this.onPanelLinkClick),this.$panelLinks.on("keydown",this.onPanelLinkKeydownHandler),this.$lastLink.on("keydown",this.onLastKeydownHandler),g()(document).on("click touchstart",this.onDocumentClickHandler)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onTopLinkFocused",value:function(e){var t=g()(e.currentTarget);this.$topLinks.filter('[aria-haspopup="true"]').attr("aria-expanded","false"),t.closest("ul").find(".".concat(this.defaults.panelActiveClass)).attr("aria-hidden","true").removeClass(this.defaults.panelActiveClass).find("a").attr("tabindex",-1),t.attr("aria-haspopup")&&t.attr("aria-expanded","true"),t.next("ul").attr("aria-hidden","false").addClass(this.defaults.panelActiveClass).find("a").attr("tabindex",0)}},{key:"onTopLinkKeydown",value:function(e){var t=g()(e.currentTarget);switch(e.keyCode){case 37:this._cycleTopLinksLeft(e,t);break;case 38:this._enterPanelUp(e,t);break;case 39:this._cycleTopLinksRight(e,t);break;case 40:this._enterPanelDown(e,t);break;case 27:this._closePanels(e,t);break;default:this._focusByAlphaNum(e,t)}}},{key:"onPanelLinkClick",value:function(){this._dismissPanel()}},{key:"onPanelLinkKeydown",value:function(e){var t=g()(e.currentTarget);switch(e.keyCode){case 38:this._cyclePanelLinksUp(e,t);break;case 40:this._cyclePanelLinksDown(e,t);break;case 27:case 37:this._exitPanelLeft(e,t);break;case 32:this._executePanelLink(e,t);break;default:this._focusPanelLinkbyAlphaNum(e,t)}}},{key:"onLastKeydown",value:function(e){9===e.keyCode&&g()(this.$element).find(".".concat(this.defaults.panelActiveClass)).attr("aria-hidden","true").removeClass(this.defaults.panelActiveClass).find("a").attr("tabindex",-1)}},{key:"onDocumentClick",value:function(e){g()(e.target).parents(".".concat(this.defaults.navListClass)).length||this._dismissPanel()}},{key:"onTopLinksClick",value:function(e){g()(e.currentTarget).attr("aria-haspopup")&&(e.preventDefault(),g()(e.currentTarget).focus())}},{key:"_dismissPanel",value:function(){g()(this.$element).find(".".concat(this.defaults.panelActiveClass)).prev("a").attr("aria-expanded","false"),g()(this.$element).find(".".concat(this.defaults.panelActiveClass)).attr("aria-hidden","true").removeClass(this.defaults.panelActiveClass).find("a").attr("tabindex",-1)}},{key:"_executePanelLink",value:function(e,t){e.preventDefault(),window.location=t.attr("href")}},{key:"_focusPanelLinkbyAlphaNum",value:function(e,t){var n=this,i=!1;t.parent("li").nextAll("li").find("a").each((function(t,a){var s=g()(a);return s.text().substring(0,1).toLowerCase()!==n.keyMap[e.keyCode]||(s.focus(),i=!0,!1)})),i||t.parent("li").prevAll("li").find("a").each((function(t,i){var a=g()(i);return a.text().substring(0,1).toLowerCase()!==n.keyMap[e.keyCode]||(a.focus(),!1)}))}},{key:"_cyclePanelLinksUp",value:function(e,t){e.preventDefault(),0===t.parent("li").prev("li").length?t.parents("ul").parents("li").find("a").first().focus():t.parent("li").prev("li").find("a").first().focus()}},{key:"_cyclePanelLinksDown",value:function(e,t){e.preventDefault(),0===t.parent("li").next("li").length?t.parents("ul").parents("li").find("a").first().focus():t.parent("li").next("li").find("a").first().focus()}},{key:"_exitPanelLeft",value:function(e,t){e.preventDefault(),t.parents("ul").first().prev("a").focus().parents("ul").first().find(".".concat(this.defaults.panelActiveClass)).attr("aria-hidden","true").removeClass(this.defaults.panelActiveClass).find("a").attr("tabindex",-1)}},{key:"_cycleTopLinksLeft",value:function(e,t){e.preventDefault(),0===t.parent("li").prev("li").length?t.parents("ul").find("> li").last().find("a").first().focus():t.parent("li").prev("li").find("a").first().focus()}},{key:"_enterPanelUp",value:function(e,t){e.preventDefault(),t.parent("li").find("ul").length>0&&t.parent("li").find("ul").attr("aria-hidden","false").addClass(this.defaults.panelActiveClass).find("a").attr("tabindex",0).last().focus()}},{key:"_cycleTopLinksRight",value:function(e,t){e.preventDefault(),0===t.parent("li").next("li").length?t.parents("ul").find("> li").first().find("a").first().focus():t.parent("li").next("li").find("a").first().focus()}},{key:"_enterPanelDown",value:function(e,t){e.preventDefault(),t.parent("li").find("ul").length>0&&t.parent("li").find("ul").attr("aria-hidden","false").addClass(this.defaults.panelActiveClass).find("a").attr("tabindex",0).first().focus()}},{key:"_closePanels",value:function(e,t){e.preventDefault(),t.blur(),g()(".".concat(this.defaults.panelActiveClass)).attr("aria-hidden","true").removeClass(this.defaults.panelActiveClass).find("a").attr("tabindex",-1)}},{key:"_focusByAlphaNum",value:function(e,t){var n=this;t.parent("li").find("ul[aria-hidden=false] a").each((function(t,i){var a=g()(i);return a.text().substring(0,1).toLowerCase()!==n.keyMap[e.keyCode]||(a.focus(),!1)}))}}]),n}(qe);function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var Ft=function(e){h()(n,e);var t=Mt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"FACEBOOK",{TRIGGER:"js-shareFB"}),y()(o()(i),"PRINT",{TRIGGER:"js-sharePrint"}),y()(o()(i),"TWITTER",{TRIGGER:"js-shareTwitter"}),i.shareHelper=new Pe,i.$facebook=i.$element.find(".".concat(i.FACEBOOK.TRIGGER)),i.$print=i.$element.find(".".concat(i.PRINT.TRIGGER)),i.$twitter=i.$element.find(".".concat(i.TWITTER.TRIGGER)),i.handleFacebookClick=i.handleFacebookClick.bind(o()(i)),i.handlePrintClick=i.handlePrintClick.bind(o()(i)),i.handleTwitterClick=i.handleTwitterClick.bind(o()(i)),i.init(),i}return l()(n,[{key:"enable",value:function(){this.$facebook.on("click",this.handleFacebookClick),this.$print.on("click",this.handlePrintClick),this.$twitter.on("click",this.handleTwitterClick)}},{key:"handleFacebookClick",value:function(e){e.preventDefault(),this.shareHelper.shareFacebook()}},{key:"handlePrintClick",value:function(e){e.preventDefault(),this.shareHelper.sharePrint()}},{key:"handleTwitterClick",value:function(e){e.preventDefault(),this.shareHelper.shareTwitter()}}]),n}(qe);function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}window.jQuery=window.$=g.a,n(337),delete window.jQuery,delete window.$;var Bt=function(e){h()(n,e);var t=Vt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"mqSmall","668px"),y()(o()(i),"isPanelDisclosed",!1),y()(o()(i),"isSidecarDisclosed",!1),y()(o()(i),"isAboveSmall",window.matchMedia("(min-width: ".concat(i.mqSmall,")")).matches),i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.onTriggerClickHandler=this.onTriggerClick.bind(this),this.onMMHandler=this.onMMHandler.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$html=g()("html"),this.$expansionTrigger=this.$element.find('[data-view-role="sidecarTrigger"]'),this.$actuator=this.$element.find('[data-view-role="actuator"]'),this}},{key:"removeChildren",value:function(){return Be()(p()(n.prototype),"removeChildren",this).call(this),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$html.css("overflow-x","hidden"),this.mql=window.matchMedia("(min-width: ".concat(this.mqSmall,")")),this.mql.addListener(this.onMMHandler),this.$expansionTrigger.on("click",this.onTriggerClickHandler)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this):this}},{key:"onTriggerClick",value:function(e){e.preventDefault(),this.emitDrawerEvent(),this.isAboveSmall?(this.$actuator.toggleClass(n.defaults.panelActiveClass),this.isSidecarDisclosed=!this.isSidecarDisclosed):this.isPanelDisclosed?(this.$html.removeClass("u-isScrollingDisabled"),this.$actuator.velocity("fadeOut",{duration:150},{complete:this.isPanelDisclosed=!1})):(this.$html.addClass("u-isScrollingDisabled"),this.$actuator.velocity("fadeIn",{duration:150},{complete:this.isPanelDisclosed=!0}))}},{key:"emitDrawerEvent",value:function(){if(window.ga){var e=window.ga;this.isSidecarDisclosed||this.isPanelDisclosed||e("send","event",{eventCategory:"Poem Drawer Action",eventAction:"click",eventLabel:"Drawer Opened",transport:"beacon"})}}},{key:"onMMHandler",value:function(e){e.matches?(this.isAboveSmall=!0,this.$actuator.removeAttr("style"),this.$html.removeClass("u-isScrollingDisabled")):this.isAboveSmall=!1}}]),n}(qe);function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(Bt,"defaults",{panelActiveClass:"isActive"});var Ut=function(e){h()(n,e);var t=qt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"CLASSES",{ACTIVE:"isActive",TRIGGER:"js-simpleToggle-trigger",PANEL:"js-simpleToggle-panel"}),i.isOpen=!1,i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.handleTriggerClick=this.handleTriggerClick.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleLastItemBlur=this.handleLastItemBlur.bind(this),this}},{key:"createChildren",value:function(){return Be()(p()(n.prototype),"createChildren",this).call(this),this.$body=g()("body"),this.$linkTrigger=this.$element.find(".".concat(this.CLASSES.TRIGGER)),this.$linkPanel=this.$element.find(".".concat(this.CLASSES.PANEL)),this.$lastItem=this.$linkPanel.find("> li:last-child > a"),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.$linkTrigger.on("click",this.handleTriggerClick),this.$body.on("click touchstart",this.handleDocumentClick),this.$lastItem.on("blur",this.handleLastItemBlur)),this}},{key:"disable",value:function(){return this.isEnabled?(this.isEnabled=!1,this.$linkTrigger.off("click",this.handleTriggerClick),this):this}},{key:"handleTriggerClick",value:function(e){e.preventDefault(),this.toggle()}},{key:"handleDocumentClick",value:function(e){g()(e.target).parents(".c-utilityNav-revelator").length||(this.$linkTrigger.removeClass(this.CLASSES.ACTIVE),this.$linkPanel.attr("aria-hidden","true"),this.isOpen=!1)}},{key:"handleLastItemBlur",value:function(){this.toggle()}},{key:"toggle",value:function(){this.isOpen?(this.$linkTrigger.removeClass(this.CLASSES.ACTIVE),this.$linkPanel.attr("aria-hidden","true"),this.isOpen=!1):(this.$linkTrigger.addClass(this.CLASSES.ACTIVE),this.$linkPanel.attr("aria-hidden","false"),this.isOpen=!0)}}]),n}(qe);function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.options=Kt(Kt({},e.defaults),t)}return l()(e,[{key:"scrollIntoView",value:function(e){var t=this;setTimeout((function(){var n=e.offset().top;window.scrollTo(0,n+t.options.getOffset())}),0)}}]),e}();function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}y()(Wt,"defaults",{getOffset:function(){return window.matchMedia("(min-width: 768px)").matches?-180:-72}});var Qt=function(e){h()(n,e);var t=zt(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"mqMedium","769px"),y()(o()(i),"isAboveMedium",window.matchMedia("(min-width: ".concat(i.mqMedium,")")).matches),y()(o()(i),"DATA_ATTRIBUTE",{TRIGGER:"tab-trigger",CONTENT:"tab-content"}),y()(o()(i),"CLASSES",{SELECTOR:"js-tabSelector"}),y()(o()(i),"EVENT",{CHANGE:"change"}),i.$triggers=e.find("[data-".concat(i.DATA_ATTRIBUTE.TRIGGER,"]")).not(e.find('[data-view="TabView"] [data-'.concat(i.DATA_ATTRIBUTE.TRIGGER,"]"))),i.$contents=e.find("[data-".concat(i.DATA_ATTRIBUTE.CONTENT,"]")).not(e.find('[data-view="TabView"] [data-'.concat(i.DATA_ATTRIBUTE.CONTENT,"]"))),i.$tabSelector=e.find(".".concat(i.CLASSES.SELECTOR)).not(e.find('[data-view="TabView"] .'.concat(i.CLASSES.SELECTOR))),i.currentVal=null,i.scrollHelper=new Wt,i.init(),i}return l()(n,[{key:"setupHandlers",value:function(){return this.handleTriggerClick=this.handleTriggerClick.bind(this),this.handleSelectorChange=this.handleSelectorChange.bind(this),this.onMMHandler=this.onMMHandler.bind(this),this.handleHashChange=this.handleHashChange.bind(this),this}},{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.mql=window.matchMedia("(min-width: ".concat(this.mqMedium,")")),this.$triggers.on("click",this.handleTriggerClick),this.mql.addListener(this.onMMHandler),this.isAboveMedium||this.$tabSelector.on("change",this.handleSelectorChange),this.options.initialTab?this.setActiveTab(this.options.initialTab):this.setActiveTab(this.$triggers.eq(0).data(this.DATA_ATTRIBUTE.TRIGGER)),window.addEventListener("load",this.handleHashChange),window.addEventListener("hashchange",this.handleHashChange)),this}},{key:"handleTriggerClick",value:function(e){e.preventDefault();var t=g()(e.currentTarget).data(this.DATA_ATTRIBUTE.TRIGGER);g()(e.currentTarget).hasClass(this.options.activeClass)||(this.setActiveTab(t),this.setActiveOption(t))}},{key:"handleSelectorChange",value:function(e){e.preventDefault();var t=e.currentTarget.value;this.setActiveTab(t)}},{key:"handleHashChange",value:function(e){var t=window.location.hash,n=this.$contents.filter(t).data(this.DATA_ATTRIBUTE.CONTENT);n&&(e.preventDefault(),this.setActiveTab(n),this.setActiveOption(n),this.scrollHelper.scrollIntoView(this.$element))}},{key:"onMMHandler",value:function(e){e.matches?this.$tabSelector.off("change",this.handleSelectorChange):this.$tabSelector.on("change",this.handleSelectorChange)}},{key:"setActiveTab",value:function(e){var t=this.currentVal!==e;this.currentVal=e,this.toggleVisibility(),t&&this.eventEmitter.emit(this.EVENT.CHANGE,this)}},{key:"setActiveOption",value:function(e){this.$tabSelector.val(e)}},{key:"toggleVisibility",value:function(){this.displayActiveTrigger(),this.displayActiveContent()}},{key:"displayActiveTrigger",value:function(){var e=this;return this.$triggers.removeClass(this.options.activeClass),this.$triggers.attr("aria-selected",!1),this.$activeTrigger=this.$triggers.filter((function(){return g()(this).data(e.DATA_ATTRIBUTE.TRIGGER)===e.currentVal})).addClass(this.options.activeClass).attr("aria-selected",!0),this}},{key:"displayActiveContent",value:function(){var e=this;return this.$contents.removeClass(this.options.activeClass),this.$contents.attr("aria-hidden",!0),this.$activeContent=this.$contents.filter((function(){return g()(this).data(e.DATA_ATTRIBUTE.CONTENT)===e.currentVal})).addClass(this.options.activeClass).attr("aria-hidden",!1),this}}]),n}(qe);y()(Qt,"defaults",{activeClass:"isActive",initialTab:null});n(668);var Yt=function(){function e(){s()(this,e),this.isEnabled=!1,this.images=null,this.isEnabled||this.init()}return l()(e,[{key:"init",value:function(){return this._setupHandlers()._createChildren()._setupObservers()._enable()}},{key:"_createChildren",value:function(){return this.images=x()(document.querySelectorAll(e.DEFAULTS.CLASS_TARGET)),this.observer=new IntersectionObserver(this._onIntersect,e.DEFAULTS.CONFIG),this}},{key:"_enable",value:function(){return this.isEnabled||(this.isEnabled=!0),this}},{key:"_loadMedia",value:function(e){var t=e.dataset.src;e.setAttribute("src",t)}},{key:"_onIntersect",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting&&(t.observer.unobserve(e.target),t._loadMedia(e.target))}))}},{key:"_setupHandlers",value:function(){return this._onIntersect=this._onIntersect.bind(this),this}},{key:"_setupObservers",value:function(){var e=this;return this.images.forEach((function(t){e.observer.observe(t)})),this}}]),e}();function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Yt,"DEFAULTS",{CLASS_TARGET:".js-lazyLoadedImage",CONFIG:{rootMargin:"100px 0px",threshold:0}});var Zt=g()(window),en=function(){function e(t,n){s()(this,e),t&&!t.length||(this.options=Jt(Jt({},e.DEFAULTS),n),this.isEnabled=!1,this.$element=t,this.$scrollSpySections=this.$element.find(e.SECTION_SELECTOR),this.$currentScrollSpySection=g()(),this.init())}return l()(e,[{key:"init",value:function(){return this.setupHandlers().enable()}},{key:"setupHandlers",value:function(){return this._onScrollHandler=this._onScroll.bind(this),this}},{key:"enable",value:function(){!0!==this.isEnabled&&(this.isEnabled=!0,Zt.on("scroll",this._onScrollHandler))}},{key:"scrollSpySectionHasChanged",value:function(e){return e&&e.get(0)!==this.$currentScrollSpySection.get(0)}},{key:"getCurrentScrollSpySection",value:function(){var e,t,n,i=this.$scrollSpySections.length,a=Zt.scrollTop()+1+this.options.offsetTop;if(a+Zt.height()===g()(document).height())e=this.$scrollSpySections.eq(i-1);else for(var s=0;s<i;s+=1)if(t=a>=this.$scrollSpySections.eq(s).offset().top,n=this.$scrollSpySections.eq(s).offset().top+this.$scrollSpySections.eq(s).height(),t&&a<=n){e=this.$scrollSpySections.eq(s);break}return e}},{key:"_onScroll",value:function(){var e=this.getCurrentScrollSpySection();this.scrollSpySectionHasChanged(e)&&(this.$currentScrollSpySection=e,this.$element.trigger("scrollSpySectionHasChanged",e))}}]),e}();function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(en,"DEFAULTS",{offsetTop:0}),y()(en,"SECTION_SELECTOR",".js-scrollSpy-section");var an=g()(window),sn=function(){function e(t,n){s()(this,e),this.options=nn(nn({},e.DEFAULTS),n),this.$element=t,this.init()}return l()(e,[{key:"init",value:function(){return this._createChildren()._setupHandlers().enable()}},{key:"_createChildren",value:function(){return this.$reference=g()(this.$element.data("reference")),this}},{key:"_setupHandlers",value:function(){return this._onScrollHandler=this._onScroll.bind(this),this}},{key:"enable",value:function(){an.on("scroll",this._onScrollHandler)}},{key:"toggle",value:function(e){this.$element.toggleClass("isSticky",e)}},{key:"_onScroll",value:function(){var e=an.scrollTop()>=this.$reference.offset().top-this.options.offsetTop;this.toggle(e)}}]),e}();y()(sn,"DEFAULTS",{offsetTop:0});var rn=g()(window),ln=function(){function e(t){s()(this,e),this.$element=t,this.$loading=g()(".js-timeline-loading"),this.$nav=null,this.$navItems=null,this.$activeNavItem=null,this.$select=null,this.scrollSpy=null,this.init()}return l()(e,[{key:"init",value:function(){return this._setupHandlers()._createChildren().enable()}},{key:"_setupHandlers",value:function(){return this._onScrollSpySectionHasChanged=this._onScrollSpySectionHasChanged.bind(this),this._onSelectChange=this._onSelectChange.bind(this),this._onNavItemClick=this._onNavItemClick.bind(this),this}},{key:"_createChildren",value:function(){return this.$nav=this.$element.find(".js-timeline-nav"),this.$timelineSection=this.$element.find(".js-scrollSpy-section"),this.$navItems=this.$element.find(".js-timeline-nav-item"),this.$select=this.$nav.find(".js-timeline-nav-select"),this.scrollSpy=new en(this.$element.find(".js-timeline-scrollSpy"),{offsetTop:288}),new sn(this.$nav,{offsetTop:161}),new Yt,this}},{key:"toggleActiveNavItemByYear",value:function(e){this.$activeNavItem&&this.$activeNavItem.removeClass("isActive"),this.$activeNavItem=this.$navItems.filter('[href="#'.concat(e,'"]')),this.$activeNavItem.addClass("isActive"),this.$select.val(String(e))}},{key:"enable",value:function(){if(this.$navItems.on("click",this._onNavItemClick),this.$element.on("scrollSpySectionHasChanged",this._onScrollSpySectionHasChanged),this.$select.on("change",this._onSelectChange),!this.$activeNavItem){var e=this.$navItems.not(".c-skippy").first().attr("href").substr(1);this.toggleActiveNavItemByYear(e)}}},{key:"_onScrollSpySectionHasChanged",value:function(e,t){var n=g()(t).attr("id");this.toggleActiveNavItemByYear(n)}},{key:"_onSelectChange",value:function(e){var t=e.target.value;this.toggleActiveNavItemByYear(t),this._scrollTo(t)}},{key:"_onNavItemClick",value:function(e){e.preventDefault();var t=g()(e.currentTarget).attr("href").substr(1);this.toggleActiveNavItemByYear(t),this._scrollTo(t)}},{key:"_scrollTo",value:function(t){this.$timelineSection.removeClass(e.DEFAULTS.offsetClass);var n=g()("#".concat(t));n.focus();var i=n.offset().top-288;rn.scrollTop(i)}}]),e}();y()(ln,"DEFAULTS",{offsetClass:"c-timeline-section_offset"});var cn=n(349),on=n.n(cn),un=n(114),hn=n(688),dn=n(690),fn=n(348),vn=n.n(fn);function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var bn=function(e){h()(n,e);var t=pn(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"renderAutocomplete",(function(e,t){var n=e.indices,a=e.refine;t&&i.$input.on("input",vn()((function(e){a(e.currentTarget.value)}),i.options.delay)),i.$input.val().length>1?i.open():i.close();var s=n.map(i.renderIndexListItem).join("");i.$resultsContainer.html(s)})),i.$resultsContainer=e.find('[data-autocomplete-role="resultsContainer"]'),i.$input=e.find('[data-autocomplete-role="input"]'),i.$activeResult=g()(),i.handleResultClick=i._handleResultClick.bind(o()(i)),i.handleKeyDown=i._handleKeyDown.bind(o()(i)),i.handleBlur=i._handleBlur.bind(o()(i)),i.search=Object(un.a)({indexName:window.GLOBAL.SEARCH.ALGOLIA_INDEX,searchClient:on()(window.GLOBAL.SEARCH.ALGOLIA_APPLICATION_ID,window.GLOBAL.SEARCH.ALGOLIA_SEARCH)}),i.init(),i}return l()(n,[{key:"layout",value:function(){var e=Object(hn.a)(this.renderAutocomplete);return this.search.addWidgets([Object(dn.a)({hitsPerPage:10,filters:"(type:App\\Entity\\Author OR type:App\\Entity\\Poem) AND consumerIds:1"}),e({escapeHTML:!1})]),this}},{key:"enable",value:function(){return this.$input.attr("autocomplete","off"),this.$resultsContainer.on("click",this.handleResultClick),this.$input.on("keydown",this.handleKeyDown),this.search.start(),this}},{key:"_handleBlur",value:function(e){for(var t=e.target;(t=t.parentElement)!==document.body;)if(t===this.element)return;this.close()}},{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case 13:0!==this.$activeResult.length&&(e.preventDefault(),this._selectActiveResult(this.$activeResult));break;case 27:case 9:this.close();break;case 38:case 40:var t=this.$element.find('[data-autocomplete-role="resultsContainer"] [data-autocomplete-role="result"]'),n=t.index(this.$activeResult),i=n;38===e.keyCode?-1!==n&&(i-=1):i=(i+1)%t.length,this._activateResult(t.get(i))}}},{key:"close",value:function(){this.$resultsContainer.removeClass(this.options.globalActiveClass),document.body.addEventListener("mouseup",this.handleBlur)}},{key:"open",value:function(){this.$resultsContainer.addClass(this.options.globalActiveClass),document.body.addEventListener("mouseup",this.handleBlur)}},{key:"_activateResult",value:function(e){this.$activeResult.removeClass(this.options.globalActiveClass),this.$activeResult=g()(e).addClass(this.options.globalActiveClass)}},{key:"_selectActiveResult",value:function(){var e=this.$activeResult.data("autocompleteValue");this.$input.val(e),this.close(),this.$element.find("form").submit()}},{key:"_handleResultClick",value:function(e){var t=e.target.closest("li");t&&(this._activateResult(t),this._selectActiveResult())}},{key:"renderIndexListItem",value:function(e){var t=e.hits;return"\n      <ul>\n        ".concat(t.map((function(e){var t=e.name?e.name:e.title;return t=t.replace(/(<([^>]+)>)|"/gi,""),'\n              <li\n                class="c-navPanel-item c-navPanel-item_pointed"\n                data-autocomplete-role="result"\n                data-autocomplete-value="'.concat(t,'"\n              >\n                ').concat(un.a.highlight({attribute:"name",hit:e}),"\n                ").concat(un.a.highlight({attribute:"title",hit:e}),"\n              </li>\n            ")})).join(""),"\n      </ul>\n    ")}}]),n}(qe);y()(bn,"defaults",{globalActiveClass:"isActive",delay:"400"});var yn=n(350),mn=n.n(yn);function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var kn=function(e){h()(n,e);var t=gn(n);function n(e,i){var a;return s()(this,n),(a=t.call(this,e,i)).$conditionalToggle=a.$element.find(".js-validateConditional"),a.$conditionalField=a.$element.find("[data-conditionally-required]"),a.handleFormValidation=a.handleFormValidation.bind(o()(a)),a.handleFieldSuccess=a.handleFieldSuccess.bind(o()(a)),a.handleFieldError=a.handleFieldError.bind(o()(a)),a.handleConditionChange=a.handleConditionChange.bind(o()(a)),a.init(),a}return l()(n,[{key:"enable",value:function(){var e=new mn.a.Factory(this.$element,this.options.parsleyConfig);return this.$conditionalToggle.on("change",this.handleConditionChange),e.on("field:validated",this.handleFormValidation),e.on("field:error",this.handleFieldError),e.on("field:success",this.handleFieldSuccess),this}},{key:"handleFormValidation",value:function(){var e=0===this.$element.find(".isInvalid").length;this.$element.find(".js-errorSummary").toggleClass("isActive",!e)}},{key:"handleFieldError",value:function(e){e.$element.attr({"aria-invalid":"true","aria-describedby":this.options.formIdPrefix+e.__id__})}},{key:"handleFieldSuccess",value:function(e){return e.$element.attr("aria-invalid","false"),e.$element.removeAttr("aria-describedby"),this}},{key:"handleConditionChange",value:function(e){g()(e.currentTarget).get(0).checked?this.$conditionalField.prop("required",!0):this.$conditionalField.prop("required",!1)}}]),n}(qe);y()(kn,"defaults",{formIdPrefix:"parsley-id-",parsleyConfig:{errorClass:"isInvalid",errorsWrapper:'<ul role="alert" class="c-validationList"></ul>',successClass:"isValid"}});var Cn={normalizeData:function(e){var t=e.entries;return{totalItems:e.totalItems,totalPages:e.totalPages,entries:t}},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return it.get("/book-picks".concat(e)).then(this.normalizeData)}};function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jn=new rt,Sn=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(this,e),y()(this,"fetchResults",function(){var e=nt()(et.a.mark((function e(t){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cn.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y()(this,"handleLoadMoreClick",nt()(et.a.mark((function e(){var t,i,a,s,r,l;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isLoading){e.next=2;break}return e.abrupt("return");case 2:return n.setLoading(!0),t=jn.getHashObject(),n.currentPage+=1,i=On(On({},{page:n.currentPage}),t),a=jn.objectToString(i),e.next=9,n.fetchResults("?".concat(a));case 9:s=e.sent,r=s.entries,l=s.totalPages,r.forEach((function(e){n.resultsContainer.innerHTML+=e.html})),n.currentPage===l&&(n.setLoading(!0),n.loadTrigger.style.opacity="0");case 14:case"end":return e.stop()}}),e)}))));var a=Je()(t,1);this.element=a[0],this.options=On(On({},e.defaults),i),this.currentPage=1,this.init()}return l()(e,[{key:"init",value:function(){return this.createChildRefs().enable(),this}},{key:"createChildRefs",value:function(){var e=this.options,t=e.loadTrigger,n=e.resultsContainer;return this.loadTrigger=this.element.querySelector(t),this.resultsContainer=this.element.querySelector(n),this}},{key:"enable",value:function(){return this.loadTrigger.addEventListener("click",this.handleLoadMoreClick),this}},{key:"setLoading",value:function(e){this.isLoading=e,this.loadTrigger.style.opacity=e?"0.5":"1",e?(this.loadTrigger.setAttribute("disabled","disabled"),this.loadTrigger.classList.add("disabled")):(this.loadTrigger.removeAttribute("disabled"),this.loadTrigger.classList.remove("disabled"))}}]),e}();y()(Sn,"defaults",{loadTrigger:".js-bookPick-loader-trigger",resultsContainer:".js-results-container",reviewLimit:12});var En={AgendaView:Ke,AudioPopupView:ze,BackLinkView:Ye,BookReviews:ht,CalendarView:vt,CollapsibleView:mt,DisclosureView:kt,GAEventView:jt,InnerMastheadView:Et,JumpMenuView:At,MastheadAnimationView:_t,MediaView:xt,MobileNavView:Rt,PoemView:It,PrimaryNavView:Ht,SearchAutocomplete:bn,ShareView:Ft,SidecarView:Bt,SimpleToggleView:Ut,TabView:Qt,TimelineView:ln,ValidationView:kn,BookPicks:Sn},wn=function(){function e(t){s()(this,e),this.$element=t}return l()(e,[{key:"init",value:function(){this.enable()}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"destroy",value:function(){var e;for(e in this.disable(),this)Object.hasOwnProperty.call(this,e)&&delete this[e]}}]),e}(),An={};An.GLOBAL=window.GLOBAL||{},An.getEvents=function(e){return g.a.ajax({type:"get",url:An.GLOBAL.ENDPOINTS.EVENTS,data:e})};var Pn=An;function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}var xn={EventsDispatcher:function(e){h()(n,e);var t=_n(n);function n(e){var i;return s()(this,n),i=t.call(this,e),y()(o()(i),"mqMedium","768px"),y()(o()(i),"isBelowMedium",window.matchMedia("(max-width: ".concat(i.mqMedium,")")).matches),y()(o()(i),"forcedTabValue","agenda"),y()(o()(i),"DATA_ATTRIBUTE",{VALUE:"refinement",OPTION_KEY:"refinement-key"}),y()(o()(i),"CLASSES",{ACTIVE:"isActive",LOADING_CONTEXT:"js-loadingContext",LOADING_CONDITIONAL:"js-loadingConditional"}),y()(o()(i),"QUERY",{}),i.$calendar=i.$element.find("#js-calendarViewport"),i.$agenda=i.$element.find("#js-agendaViewport"),i.$tabComponent=i.$element,i.$filterLinkTrigger=i.$element.find('[data-refinement-role="trigger"]'),i.$filterSelector=i.$element.find("#js-filterSelector"),i.$loadingContext=i.$element.find(".".concat(i.CLASSES.LOADING_CONTEXT)),i.$loadingConditional=i.$element.find(".".concat(i.CLASSES.LOADING_CONDITIONAL)),i.calendarView=new vt(i.$calendar),i.agendaView=new Ke(i.$agenda),i.tabView=new Qt(i.$tabComponent),i.GAEventView=new jt(i.$tabComponent),i.handleCalendarAdvance=i.handleCalendarAdvance.bind(o()(i)),i.handleCalendarRewind=i.handleCalendarRewind.bind(o()(i)),i.handleAgendaAdvance=i.handleAgendaAdvance.bind(o()(i)),i.handleAgendaRewind=i.handleAgendaRewind.bind(o()(i)),i.handleFilterClick=i.handleFilterClick.bind(o()(i)),i.handleOptionChange=i.handleOptionChange.bind(o()(i)),i.onMMHandler=i.onMMHandler.bind(o()(i)),i.xhr=null,i.init(),i}return l()(n,[{key:"enable",value:function(){return this.isEnabled||(this.isEnabled=!0,this.mql=window.matchMedia("(max-width: ".concat(this.mqMedium,")")),this.mql.addListener(this.onMMHandler),this.calendarView.eventEmitter.on(vt.EVENT.NEXT_MONTH,this.handleCalendarAdvance),this.calendarView.eventEmitter.on(vt.EVENT.PREV_MONTH,this.handleCalendarRewind),this.agendaView.eventEmitter.on(Ke.EVENT.NEXT_MONTH,this.handleAgendaAdvance),this.agendaView.eventEmitter.on(Ke.EVENT.PREV_MONTH,this.handleAgendaRewind),this.$filterLinkTrigger.on("click",this.handleFilterClick),this.isBelowMedium&&this.$filterSelector.on("change",this.handleOptionChange),this.getInitialEvents()),this}},{key:"render",value:function(e){return this.$loadingContext.removeClass(this.CLASSES.ACTIVE),this.xhr=null,this.calendarView.render(e.Calendar),this.agendaView.render(e.Agenda),this.$loadingConditional.show(),this}},{key:"getInitialEvents",value:function(){var e=this;return null!==this.xhr&&this.xhr.abort(),this.$loadingContext.addClass(this.CLASSES.ACTIVE),this.xhr=Pn.getEvents().done((function(t){e.render(t)})),this}},{key:"updateEvents",value:function(e){var t=this;this.$loadingContext.addClass(this.CLASSES.ACTIVE),this.xhr=Pn.getEvents(e).done((function(e){t.render(e)}))}},{key:"setActiveOption",value:function(e){this.$filterSelector.val(e)}},{key:"onMMHandler",value:function(e){e.matches?(this.$filterSelector.on("change",this.handleOptionChange),this.tabView.setActiveTab(this.forcedTabValue)):this.$filterSelector.off("change",this.handleOptionChange)}},{key:"handleCalendarAdvance",value:function(){this.agendaView.advance()}},{key:"handleCalendarRewind",value:function(){this.agendaView.rewind()}},{key:"handleAgendaAdvance",value:function(){this.calendarView.advance()}},{key:"handleAgendaRewind",value:function(){this.calendarView.rewind()}},{key:"handleFilterClick",value:function(e){e.preventDefault();var t=g()(e.currentTarget).data(this.DATA_ATTRIBUTE.VALUE);this.updateEvents(t),this.$filterLinkTrigger.removeClass(this.CLASSES.ACTIVE),g()(e.currentTarget).addClass(this.CLASSES.ACTIVE),this.setActiveOption(t.type)}},{key:"handleOptionChange",value:function(e){var t=this;e.preventDefault();var n=g()(e.currentTarget).data(this.DATA_ATTRIBUTE.OPTION_KEY),i=y()({},n,e.currentTarget.value);this.updateEvents(i),this.$filterLinkTrigger.removeClass(this.CLASSES.ACTIVE),this.$filterLinkTrigger.each((function(n,i){g()(i).data("refinement").type===e.currentTarget.value&&g()(i).addClass(t.CLASSES.ACTIVE)}))}}]),n}(wn),MastheadDispatcher:function(){}