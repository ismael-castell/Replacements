define("dojo/mccommon",[],(function(){return function(t){function e(e){for(var n,a,o=e[0],s=e[1],r=0,d=[];r<o.length;r++)a=o[r],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(l&&l(e);d.length;)d.shift()()}var n={},i={0:0,3:0};function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=o);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.src=function(t){return a.p+"30cdb5770c214a6d25c5-"+({}[t]||t)+".js"}(t);var l=new Error;s=function(e){r.onerror=r.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,n[1](l)}i[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(e)},a.m=t,a.c=n,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/release/1.1.1bd7f880c7449c96dbd46e044ed3c59cc8a6cd464/js-legacy/js/",a.oe=function(t){throw console.error(t),t};var o=window.webpackJsonp_name_=window.webpackJsonp_name_||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var r=0;r<o.length;r++)e(o[r]);var l=s;return a(a.s=1085)}([function(t,e){t.exports=window.require("dojo/_base/declare")},function(t,e){t.exports=window.require("dojo/_base/lang")},function(t,e){t.exports=window.require("dojo/on")},function(t,e){t.exports=window.require("dojo/dom-class")},function(t,e){t.exports=window.require("dojo/dom-construct")},function(t,e){t.exports=window.require("dojo/_base/array")},function(t,e){t.exports=window.require("dojo/query")},function(t,e){t.exports=window.require("dojo/dom-attr")},function(t,e,n){var i,a;i=[n(21),n(4),n(5),n(115),n(51)],void 0===(a=function(t,e,n,i,a){return{toUrl:function(e,n){return void 0!==e&&null!=e||(e=""),e&&"/"==e[0]&&(e=e.substr(1)),n&&(e+=e.indexOf("?")<0?"?":"&",e+=a.objectToQuery(n)),t.rootUrl+e},inUrl:function(t){return window.location.href.indexOf(t)>-1},removeProxy:function(t){if(t.indexOf("_ssl/proxy.php")>0){var e=t.indexOf("_ssl/proxy.php/https/")>=0?"https":"http",n=("_ssl/proxy.php/"+e+"/").length;t=e+"://"+t.substring(t.indexOf("_ssl/proxy.php/")+n)}return t},addProxy:function(n){var i=e.create("a",{href:n}),a=i.protocol.replace(":","");if("https"==a)return n;if("prod"==t.avestaEnvironment&&i.hostname==t.galleryDomain||i.hostname==t.cdnImagesDomain)return n.replace(/^http:/i,"https:");var o=a+"/"+i.hostname;return"/"!=i.pathname[0]&&(o+="/"),o+=i.pathname,i.search&&(o+="?"+encodeURIComponent(i.search)),t.proxyBaseUrl+"/"+o},getHashParams:function(){var t=i(),e={};if(t){var a=t.split(";");a&&a.length&&n.forEach(a,(function(t){var n=t.split(":");n[0]&&(e[n[0]]=n[1])}))}return e},setHashParams:function(t){var e=[];for(var n in t)e.push(n+":"+t[n]);i(e.join(";"),!0)}}}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/dom-style")},function(t,e){t.exports=window.require("dojo/dom")},function(t,e,n){var i,a;i=[n(337),n(0),n(4),n(1),n(2),n(33),n(59),n(82)],void 0===(a=function(t,e,n,i,a,o,s,r){var l=e("dijit._TemplatedMixin",r,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(t){var e=this.declaredClass,n=this;return s.substitute(t,this,(function(t,a){if("!"==a.charAt(0)&&(t=i.getObject(a.substr(1),!1,n)),void 0===t)throw new Error(e+" template:"+a);return null==t?"":"!"==a.charAt(0)?t:this._escapeValue(""+t)}),this)},_escapeValue:function(t){return t.replace(/["'<>&]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}[t]}))},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=t(this.templatePath,{sanitize:!0}));var e,a=l.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(i.isString(a)){if(1!=(e=n.toDom(this._stringRepl(a),this.ownerDocument)).nodeType)throw new Error("Invalid template: "+a)}else e=a.cloneNode(!0);this.domNode=e}this.inherited(arguments),this._rendered||this._fillContent(this.srcNodeRef),this._rendered=!0},_fillContent:function(t){var e=this.containerNode;if(t&&e)for(;t.hasChildNodes();)e.appendChild(t.firstChild)}});return l._templateCache={},l.getCachedTemplate=function(t,e,i){var a=l._templateCache,o=t,r=a[o];if(r){try{if(!r.ownerDocument||r.ownerDocument==(i||document))return r}catch(t){}n.destroy(r)}if(t=s.trim(t),e||t.match(/\$\{([^\}]+)\}/g))return a[o]=t;var d=n.toDom(t,i);if(1!=d.nodeType)throw new Error("Invalid template: "+t);return a[o]=d},o("ie")&&a(window,"unload",(function(){var t=l._templateCache;for(var e in t){var i=t[e];"object"==typeof i&&n.destroy(i),delete t[e]}})),l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(5),n(35),n(75),n(61),n(0),n(10),n(7),n(3),n(4),n(27),n(9),n(34),n(23),n(1),n(2),n(43),n(47),n(19),n(32),n(286),n(336),n(14)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k){p.add("dijit-legacy-requires",!m.isAsync),p("dijit-legacy-requires")&&v(0,(function(){Promise.resolve().then((function(){n(142)})).catch(n.oe)}));var S={};function x(t){var e={};for(var n in t)e[n.toLowerCase()]=!0;return e}function I(t){return function(e){l[e?"set":"remove"](this.domNode,t,e),this._set(t,e)}}return s("dijit._WidgetBase",[b,_],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:I("lang"),dir:"",_setDirAttr:I("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(t){this._set("ownerDocument",t)},attributeMap:{},_blankGif:a.blankGif||t.toUrl("dojo/resources/blank.gif"),_introspect:function(){var t=this.constructor;if(!t._setterAttrs){var e=t.prototype,n=t._setterAttrs=[],i=t._onMap={};for(var a in e.attributeMap)n.push(a);for(a in e)/^on/.test(a)&&(i[a.substring(2).toLowerCase()]=a),/^_set[A-Z](.*)Attr$/.test(a)&&(a=a.charAt(4).toLowerCase()+a.substr(5,a.length-9),e.attributeMap&&a in e.attributeMap||n.push(a))}},postscript:function(t,e){this.create(t,e)},create:function(t,e){var n;if(this._introspect(),this.srcNodeRef=r.byId(e),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),t&&(this.params=t,g.mixin(this,t)),this.postMixInProperties(),this.id||(this.id=k.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=w.body(this.ownerDocument),k.add(this),this.buildRendering(),this.domNode){this._applyAttributes();var i=this.srcNodeRef;i&&i.parentNode&&this.domNode!==i&&(i.parentNode.replaceChild(this.domNode,i),n=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),n&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var t={};for(var n in this.params||{})t[n]=this._get(n);for(n in e.forEach(this.constructor._setterAttrs,(function(e){if(!(e in t)){var n=this._get(e);n&&this.set(e,n)}}),this),t)this.set(n,t[n])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var t=this.baseClass.split(" ");this.isLeftToRight()||(t=t.concat(e.map(t,(function(t){return t+"Rtl"})))),d.add(this.domNode,t)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,e.forEach(this.getChildren(),(function(t){t._started||t._destroyed||!g.isFunction(t.startup)||(t.startup(),t._started=!0)})))},destroyRecursive:function(t){this._beingDestroyed=!0,this.destroyDescendants(t),this.destroy(t)},destroy:function(t){function n(e){e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t)}this._beingDestroyed=!0,this.uninitialize(),e.forEach(this._connects,g.hitch(this,"disconnect")),e.forEach(this._supportingWidgets,n),this.domNode&&e.forEach(k.findWidgets(this.domNode,this.containerNode),n),this.destroyRendering(t),k.remove(this.id),this._destroyed=!0},destroyRendering:function(t){this.bgIframe&&(this.bgIframe.destroy(t),delete this.bgIframe),this.domNode&&(t?l.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(t||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(t){e.forEach(this.getChildren(),(function(e){e.destroyRecursive&&e.destroyRecursive(t)}))},uninitialize:function(){return!1},_setStyleAttr:function(t){var e=this.domNode;g.isObject(t)?h.set(e,t):e.style.cssText?e.style.cssText+="; "+t:e.style.cssText=t,this._set("style",t)},_attrToDom:function(t,n,i){i=arguments.length>=3?i:this.attributeMap[t],e.forEach(g.isArray(i)?i:[i],(function(e){var i=this[e.node||e||"domNode"];switch(e.type||"attribute"){case"attribute":g.isFunction(n)&&(n=g.hitch(this,n));var a=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(t)?t.toLowerCase():t;i.tagName?l.set(i,a,n):i.set(a,n);break;case"innerText":i.innerHTML="",i.appendChild(this.ownerDocument.createTextNode(n));break;case"innerHTML":i.innerHTML=n;break;case"class":d.replace(i,n,this[t])}}),this)},get:function(t){var e=this._getAttrNames(t);return this[e.g]?this[e.g]():this._get(t)},set:function(t,e){if("object"==typeof t){for(var n in t)this.set(n,t[n]);return this}var i=this._getAttrNames(t),a=this[i.s];if(g.isFunction(a))var o=a.apply(this,Array.prototype.slice.call(arguments,1));else{var s=this.focusNode&&!g.isFunction(this.focusNode)?"focusNode":"domNode",r=this[s]&&this[s].tagName,l=r&&(S[r]||(S[r]=x(this[s]))),d=t in this.attributeMap?this.attributeMap[t]:i.s in this?this[i.s]:l&&i.l in l&&"function"!=typeof e||/^aria-|^data-|^role$/.test(t)?s:null;null!=d&&this._attrToDom(t,e,d),this._set(t,e)}return o||this},_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;if(e[t])return e[t];var n=t.replace(/^[a-z]|-[a-zA-Z]/g,(function(t){return t.charAt(t.length-1).toUpperCase()}));return e[t]={n:t+"Node",s:"_set"+n+"Attr",g:"_get"+n+"Attr",l:n.toLowerCase()}},_set:function(t,e){var n,i,a=this[t];this[t]=e,!this._created||((n=a)===(i=e)||n!=n&&i!=i)||(this._watchCallbacks&&this._watchCallbacks(t,a,e),this.emit("attrmodified-"+t,{detail:{prevValue:a,newValue:e}}))},_get:function(t){return this[t]},emit:function(t,e,n){void 0===(e=e||{}).bubbles&&(e.bubbles=!0),void 0===e.cancelable&&(e.cancelable=!0),e.detail||(e.detail={}),e.detail.widget=this;var i,a=this["on"+t];return a&&(i=a.apply(this,n||[e])),this._started&&!this._beingDestroyed&&f.emit(this.domNode,t.toLowerCase(),e),i},on:function(t,e){var n=this._onMap(t);return n?i.after(this,n,e,!0):this.own(f(this.domNode,t,e))[0]},_onMap:function(t){var e=this.constructor,n=e._onMap;if(!n)for(var i in n=e._onMap={},e.prototype)/^on/.test(i)&&(n[i.replace(/^on/,"").toLowerCase()]=i);return n["string"==typeof t&&t.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?k.findWidgets(this.containerNode):[]},getParent:function(){return k.getEnclosingWidget(this.domNode.parentNode)},connect:function(t,e,n){return this.own(o.connect(t,e,this,n))[0]},disconnect:function(t){t.remove()},subscribe:function(t,e){return this.own(y.subscribe(t,g.hitch(this,e)))[0]},unsubscribe:function(t){t.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():u.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=h.get(this.domNode,"display")},placeAt:function(t,e){var n=!t.tagName&&k.byId(t);if(!n||!n.addChild||e&&"number"!=typeof e){var i=n&&"domNode"in n?n.containerNode&&!/after|before|replace/.test(e||"")?n.containerNode:n.domNode:r.byId(t,this.ownerDocument);c.place(this.domNode,i,e),!this._started&&(this.getParent()||{})._started&&this.startup()}else n.addChild(this,e);return this},defer:function(t,e){var n=setTimeout(g.hitch(this,(function(){n&&(n=null,this._destroyed||g.hitch(this,t)())})),e||0);return{remove:function(){return n&&(clearTimeout(n),n=null),null}}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(47),n(14),n(35),n(6),n(7),n(43),n(81),n(48),n(44),n(1169)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t([i],{$el:{},$widget:{},$group:{},onInit:function(){},onReady:function(){},parse:function(t){s("[data-mc-el],[data-mc-group]",t).forEach(e.hitch(this,"_registerEl"))},run:function(){o.after(a,"add",e.hitch(this,"_registerWidget"),!0),o.before(a,"remove",e.hitch(this,"_unregisterWidget"),!0),e.hitch(this,"onInit")(),l(200,e.hitch(this,(function(){this.parse(window.document)}))),l(e.hitch(this,"onReady"))},_registerEl:function(t){var e=r.get(t,"data-mc-el"),n=r.get(t,"data-mc-group");e?this.$el[e]=t:""==e&&console.warn("[Skipped] element tagged with data-mc-el, but no value."),n?(this.$group[n]=this.$group[n]||s.NodeList(),this.$group[n].push(t)):""==n&&console.warn("[Skipped] element tagged with data-mc-group, but no value.")},_registerWidget:function(t){t["data-mc-el"]&&(this.$widget[t["data-mc-el"]]=t)},_unregisterWidget:function(t){var e=a.byId(t),n=e&&e["data-mc-el"];this.$widget[n]&&delete this.$widget[n]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(32),n(42)],void 0===(a=function(t,e,n){var i={},a={},o={length:0,add:function(t){if(a[t.id])throw new Error("Tried to register widget with id=="+t.id+" but that id is already registered");a[t.id]=t,this.length++},remove:function(t){a[t]&&(delete a[t],this.length--)},byId:function(t){return"string"==typeof t?a[t]:t},byNode:function(t){return a[t.getAttribute("widgetId")]},toArray:function(){var t=[];for(var e in a)t.push(a[e]);return t},getUniqueId:function(t){var e;do{e=t+"_"+(t in i?++i[t]:i[t]=0)}while(a[e]);return"dijit"==n._scopeName?e:n._scopeName+"_"+e},findWidgets:function(t,e){var n=[];return function t(i){for(var o=i.firstChild;o;o=o.nextSibling)if(1==o.nodeType){var s=o.getAttribute("widgetId");if(s){var r=a[s];r&&n.push(r)}else o!==e&&t(o)}}(t),n},_destroyAll:function(){n._curFocus=null,n._prevFocus=null,n._activeStack=[],t.forEach(o.findWidgets(e.body()),(function(t){t._destroyed||(t.destroyRecursive?t.destroyRecursive():t.destroy&&t.destroy())}))},getEnclosingWidget:function(t){for(;t;){var e=1==t.nodeType&&t.getAttribute("widgetId");if(e)return a[e];t=t.parentNode}return null},_hash:a};return n.registry=o,o}.apply(e,i))||(t.exports=a)},function(t,e,n){var a,o;a=[n(1),n(23),n(6),n(10),n(2),n(32),n(244),n(4),n(3),n(9),n(7),n(18),n(19),n(30),n(22),n(55),n(144),n(86),n(5),n(60),n(14),n(27),n(36),n(8),n(38),n(147),n(17),n(26),n(52),n(302),n(198),n(56),n(16),n(441),n(44),n(40)],void 0===(o=function(t,e,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E,P,D,N,L,M,B){var R={selectAll:function(t){var e="string"==typeof t?document.getElementById(t):t;e.focus(),e.select()},updateMergeBox:function(t,n){for(var i=e.coords(n,!0),a=document.body,o=t.parentNode;o!=a&&(!u.get(o,"position")||"static"==u.get(o,"position"));)o=o.parentNode;e.isIE||(t.style.bottom=e.coords(o).h-i.t+"px")},wipeToggle:function(t,e){Promise.resolve().then((function(){var i=[n(55)];(function(n){(t.checked?n.wipeIn({node:o.byId(e),duration:500}):n.wipeOut({node:o.byId(e),duration:500})).play()}).apply(null,i)})).catch(n.oe)},toggleAccordion:function(t,i){Promise.resolve().then((function(){var s=[n(55)];(function(n){i=void 0!==i?i:500;var s=a(".accordion-switch").map((function(e){return e.id==t?n.wipeIn({node:e,duration:i}):n.wipeOut({node:e,duration:i})}));if(o.byId("merges-list")){var r=o.byId("merges-list"),l=a(".merge-cheatsheet label")[0];w.forEach(s,(function(t){e.connect(t,"onEnd",(function(){R.updateMergeBox(r,l)}))}))}o.byId("accordion-active")&&(o.byId("accordion-active").value=t),n.combine(s).play()}).apply(null,s)})).catch(n.oe)},disclosureElement:function(t,e,n,i,a){var s=o.byId(t),r=new RegExp("show ","gi"),l=new RegExp("hide ","gi");"none"==s.style.display?(s.style.display="block","button"!==a&&(c.remove(e,"disclosure-closed"),c.add(e,"disclosure-open")),n&&(e.innerHTML=e.innerHTML.replace(r,"hide ")),"function"==typeof i&&i("open")):(s.style.display="none","button"!==a&&(c.remove(e,"disclosure-open"),c.add(e,"disclosure-closed")),n&&(e.innerHTML=e.innerHTML.replace(l,"show ")),"function"==typeof i&&i("close"))},showHelpVideo:function(t){n.e(3).then((function(){var i=[n(500),n(32)];(function(n,i){var a=dijit.byId("help-video-modal-"+t);if(!a){var o=document.createElement("div");o.id="help-video-modal-"+t;var s=document.createElement("div");s.id="help-video-embed-"+t,s.style.height="427px",s.style.width="640px",o.appendChild(s);var r=document.createElement("p");r.style.margin="0 0 0 0",r.style.textAlign="left",r.innerHTML='<a href="http://mailchimp.com/support/online-training/" target="_blank" style="text-align:center;">Watch other helpful training videos.</a>',o.appendChild(r),i.body().appendChild(o),a=new n({title:"Mailchimp Help Videos",id:"help-video-modal-"+t},o),pHtml='<iframe width="640" height="427" src="https://fast.wistia.com/embed/medias/'+t+'?controlsVisibleOnLoad=true&autoPlay=true" frameborder="0"></iframe>',document.getElementById("help-video-embed-"+t).innerHTML=pHtml}a.show(),e.isMozilla&&-1!=navigator.userAgent.toLowerCase().indexOf("mac")&&(a._underlay.domNode.style.display="none")}).apply(null,i)})).catch(n.oe)},loadHelpVideo:function(t){try{"undefined"==typeof brightcove?isLoaded=!1:isLoaded=!0}catch(t){isLoaded=!1}if(!isLoaded){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");return n.type="text/javascript",n.src="http://admin.brightcove.com/js/BrightcoveExperiences.js",e.appendChild(n),void setTimeout((function(){loadHelpVideo(t)}),500)}var i={id:"myExperience",bgcolor:"#FFFFFF",width:650,height:550,playerId:730557335001};i["@videoPlayer"]=t,i["@playlistTabs"]="1375780129,1375772162,1375780130,1485827977",i["@playlistTabs.featured"]=null;var a="\n\n\x3c!-- Start Brightcove Player --\x3e";a+='\n<object id="myExperience" class="BrightcoveExperience">',a+='\n<param name="bgcolor" value="'+i.bgcolor+'" />',a+='\n<param name="width" value="'+i.width+'" />',a+='\n<param name="height" value="'+i.height+'" />',a+='\n<param name="playerID" value="'+i.playerId+'" />',null!=i["@videoPlayer"]?a+='\n<param name="@videoPlayer" value="'+i["@videoPlayer"]+'" />':null!=i["@playlistTabs"]&&(a+='\n<param name="@playlistTabs" value="'+i["@playlistTabs"]+'" />',null!=i["@playlistTabs.featured"]&&(a+='\n<param name="@playlistTabs.featured" value="'+i["@playlistTabs.featured"]+'" />'),null!=i["@videoList.featured"]&&(a+='\n<param name="@videoList.featured" value="'+i["@videoList.featured"]+'" />')),a+='\n<param name="isVid" value="true" />',a+='\n<param name="isUI" value="true" />',a+="\n</object>",a+="\n\x3c!-- End Brightcove Player --\x3e\n\n",document.getElementById("help-video-embed-"+t).innerHTML=a;for(var o=0;;){try{if(null!=brightcove)break}catch(t){}if(++o>1e4)break}brightcove.createExperiences("0","myExperience")},onVisibility:function(t,e){var n=!1,i=window.innerHeight;s(window,"resize",(function(){i=window.innerHeight})),k.position(t).y<=i?n||(n=!0,"function"==typeof e&&e()):s(o.byId("wrap"),"scroll",(function(){k.position(t).y<=i&&(n||(n=!0,"function"==typeof e&&e()))}))},onViewForPeriod:function(t,e,n){this.onVisibility(t,(function(){var i=0,a=setInterval((function(){var o=k.position(t);o.y<=window.innerHeight&&o.y+o.h>=0&&(i+=500),i>=n&&(e(),clearInterval(a))}),500)}))},onScrollDepth:function(t,e){s(o.byId("wrap"),"scroll",_((function(e){if(e&&e.target){var n=e.target.scrollTop,i=e.target.scrollHeight-e.target.clientHeight;t(n/i)}}),e||1e3))},addressCountrySelect:function(t,e){var n=a(t).parents("fieldset")[0],i=a("[data-mc-address=state-us]",n).shift(),o=a("[data-mc-address=state-intl]",n)[0],r=a("[data-mc-address=zip]",n)[0],l=function(t,e){e?h.remove(t,"disabled"):h.set(t,"disabled",!0),a(t).parents(".field-wrapper").toggleClass("hide",!e)},d=function(t,e){a(t).parents(".field-wrapper").forEach((function(t){a("label",t).toggleClass("required",e)}))},c=function(e,n){var a=String(164)===String(t.value);i&&(l(i,a&&"N"!==e),d(i,"Y"===e)),l(o,!(i&&a||"N"===e)),d(o,"Y"===e),l(r,"N"!==n),d(r,"Y"===n)},u=function(){var e=t.value;p.get(x.toUrl("/account/country-details"),{query:{id:e},handleAs:"json"}).then((function(t){c(t.state_required||"Y",t.zip_required||"Y")}),(function(t){console.log("Failed to retrieve country details: "+t),c("Y","Y")}))};s(t,"change",u),e&&this.billingVat(t),u()},billingVat:function(t){var e=o.byId("vat-message-eu"),n=o.byId("vat-message-au"),i=o.byId("vat-id-label"),a=o.byId("abn-label"),r=function(){p(x.toUrl("/account/country-is-taxed"),{handleAs:"text",query:{id:t.value}}).then((function(o){c.toggle(e,"hide","N"===o),c.toggle(i,"hide","8"===t.value),n&&(c.toggle(e,"hide","N"===o||"8"===t.value),c.toggle(n,"hide","N"===o||"8"!==t.value),c.toggle(a,"hide","N"===o||"8"!==t.value))}))};s(t,"change",(function(t){r()})),r()},countrySelectField:function(t,e){var n=o.byId(t);this.addressCountrySelect(n),e&&this.billingVat(t)},zipToStateFieldSpecific:function(t,n,i,a){var s=o.byId(t),r=o.byId(i);e.connect(s,"onkeyup",(function(){var t=s.value;t&&t.length>=5&&e.xhrGet({url:a+"?zip="+s.value,handleAs:"text",load:function(t){t&&(r.value=t)}})}))},zipToCityFieldSpecific:function(t,n,i,a){var s=o.byId(t),r=o.byId(n),l=o.byId(i);e.connect(s,"onkeyup",(function(){if(l&&"164"===l.value){var t=s.value;t&&t.length>=5&&e.xhrGet({url:a+"?zip="+s.value,handleAs:"text",load:function(t){t&&(r.value=t)}})}}))},zipToStateField:function(t,n,i){var a=o.byId(t);o.byId(n);e.connect(a,"onkeyup",(function(t){var n=a.value;n&&n.length>=5&&e.xhrGet({url:i+"?zip="+a.value,handleAs:"text",load:function(t){t&&(o.byId("us-state").value=t)}})}))},zipToCityField:function(t,n,i,a){var s=o.byId(t),r=o.byId(n),l=o.byId(i);e.connect(s,"onkeyup",(function(t){if(l&&164==l.value){var n=s.value;n&&n.length>=5&&e.xhrGet({url:a+"?zip="+s.value,handleAs:"text",load:function(t){t&&(r.value=t)}})}}))},validationError:function(t,e){R.clearValidation(t);var n=document.createElement("span");c.add(n,"invalid-error"),n.appendChild(document.createTextNode(e)),t.parentNode.insertBefore(n,t.nextSibling)},clearValidation:function(t){var n=t.nextSibling;e.hasClass(n,"invalid-error")&&n.parentNode.removeChild(n)},removeValidationErrors:function(t){a(t).removeClass("invalid"),a(t).siblings(".invalid-error").remove()},addValidationError:function(t,e){R.removeValidationErrors(t),a(t).addClass("invalid"),d.place("<span class='invalid-error'>"+e+"</span>",t,"after")},hasValidationErrors:function(t){var e=a(t).siblings(".invalid-error");return e&&e.length>0},showHideElemByClass:function(t,e){var n=a("."+t);n&&0!==n.length&&(e?c.remove(n[0],"hide"):c.add(n[0],"hide"))},isElemHidden:function(t){var n=a("."+t);return!(n&&0!==n.length&&!e.hasClass(n[0],"hide"))},attachClearValidationOnUpdate:function(t,e){t&&s(t,"keyup, paste",_((function(){R.removeValidationErrors(t)}),e||200))},log:function(t){try{console.log(t)}catch(t){}},addOption:function(t,e,n){var i=new Option(e,n);t.options[t.length]=i},deleteOption:function(t,e){t.length>0&&(t.options[e]=null)},moveOptions:function(t,e){var n,i=[],a=[],o=0;for(n=t.length-1;n>=0;n--)t.options[n].selected&&(i[o]=t.options[n].text,a[o]=t.options[n].value,R.deleteOption(t,n),o++);for(n=o-1;n>=0;n--)R.addOption(e,i[n],a[n])},moveAllOptions:function(t,e){var n,i=[],a=[],o=0;for(n=t.length-1;n>=0;n--)i[o]=t.options[n].text,a[o]=t.options[n].value,R.deleteOption(t,n),o++;for(n=o-1;n>=0;n--)R.addOption(e,i[n],a[n])},copyAllOptions:function(t,e){R.removeAllOptions(e);for(var n=0;n<t.length;n++)R.addOption(e,t.options[n].text,t.options[n].value)},removeAllOptions:function(t){for(var e=t.length-1;e>=0;e--)R.deleteOption(t,e)},checkAll:function(t){a('input[type="checkbox"]',o.byId(t)).forEach((function(t){h.set(t,"checked","checked")}))},uncheckAll:function(t){a('input[type="checkbox"]',o.byId(t)).forEach((function(t){h.remove(t,"checked")}))},toggle:function(){w.forEach(arguments,(function(t){a(t).forEach((function(t){"none"==u.get(t,"display")?u.set(t,"display",""):u.set(t,"display","none")}))}))},checkPopupWin:function(t){return!t||t.closed||void 0===t.closed?dijit.byId("popup-win-blocked").show():t.focus(),!1},getCookie:function(t){var e=document.cookie.split(";"),n="",a="",o=!1;for(i=0;i<e.length;i++){if((n=e[i].split("="))[0].replace(/^\s+|\s+$/g,"")==t)return o=!0,n.length>1&&(a=unescape(n[1].replace(/^\s+|\s+$/g,""))),a;n=null,""}if(!o)return null},setCookie:function(t,e,n){t&&e&&n&&(document.cookie=t+"="+e+";expires="+n.toGMTString()+";path=/")},getSymbolLength:function(t){return E.getSymbolLength(t)},checkInputLength:function(t,e,n,i){var a=E.getSymbolLength(t.value),s=n-a,r=o.byId(e);r.innerHTML=i?a:s,s<10?h.set(r.parentNode,"class","textcolor--error small-meta char-count float-right"):s<25?h.set(r.parentNode,"class","warning-text small-meta char-count float-right"):h.set(r.parentNode,"class","success-text small-meta char-count float-right")},setCleanFileName:function(t){var e=I.encode(t.value.replace("C:\\fakepath\\",""));t.parentNode.parentNode.children[1].innerHTML=e},formatFileSize:function(t){return D.toFileSize(t)},numberFormat:function(t,e,n,i){return D.toFormat(t,e,n,i)},showTemplateActions:function(t,e){var n=e;w.forEach(n,(function(e,n){n===t?c.toggle(e.firstElementChild,"card-clicked"):c.remove(e.firstElementChild,"card-clicked")}))},selectTemplate:function(t,e,n){var i=e;w.forEach(i,(function(e,i){i===t?c.toggle(e,"card-selected"):c.remove(e,"card-selected"),c.contains(e,"card-selected")?n[i].innerHTML="Selected":n[i].innerHTML="Select"}))},show:function(t,e){"none"===u.get(t,"display")&&(S(a("#"+t),"stop"),S(a("#"+t),"fadeIn",{duration:e?+e:225}))},hide:function(t,e){"none"!=u.get(t,"display")&&(S(a("#"+t),"stop"),S(a("#"+t),"fadeOut",{duration:e?+e:225}))},hideByClass:function(t){var e=a("."+t)[0];e&&c.add(e,"hide")},toggleEl:function(t,e,n,i){var o,s=t;o="none"===u.get(e,"display")?"slideDown":"slideUp",S(a("#"+e),"stop"),S(a("#"+e),o,{duration:225,complete:function(){n&&"slideUp"==o&&(s.innerHTML=n),i&&"slideDown"==o&&(s.innerHTML=i)}})},showHide:function(t){"none"===u.get(t,"display")?u.set(t,"display","block"):"block"===u.get(t,"display")&&u.set(t,"display","none")},moveFlashBlock:function(t){d.place("av-flash-block",t,"first")},toast:function(t,e){e||(e="message"),m.publish("show-toast",{message:t,type:e})},resetForm:function(t){t.reset(),a(".invalid",t).forEach((function(t){c.remove(t,"invalid")})),w.forEach(C.findWidgets(t),(function(t){t.reset()}))},showFormErrors:function(t,e){for(var n in t=a(t)[0],a(".invalid-error",t).remove(),a(".invalid",t).removeClass("invalid"),e)if(e.hasOwnProperty(n)){var i=a("[data-mc-name="+n+"]",t)[0]?a("[data-mc-name="+n+"]",t)[0]:a("[name="+n+"]",t)[0];i&&R.addError(i,e[n])}},addError:function(t,e){R.removeErrors(t),a(t).addClass("invalid"),d.place("<span class='invalid-error'>"+e+"</span>",t,"after")},removeErrors:function(t){a(t).removeClass("invalid"),a(t).siblings(".invalid-error").remove(),a(t).siblings(".field-help").remove()},removeAllErrors:function(e){var n=a(".invalid",e);n.length&&n.forEach(t.hitch(this,"removeErrors"))},getTabletNaviHeight:function(){var t=a(".tablet-nav")[0];return t?k.position(t).h:0},getAppScrollContainer:function(){var t=e.body();return h.get(t,"id","popup")&&(t=r.body()),t},updateQueryStringParameter:function(t,e,n){var i=new RegExp("([?|&])"+e+"=.*?(&|$)","i"),a=-1!==t.indexOf("?")?"&":"?";return t.match(i)?t.replace(i,"$1"+e+"="+n+"$2"):t+a+e+"="+n},getDocScroll:function(){var t=k.docScroll().y;return window.innerWidth<=1024&&(t+=R.getTabletNaviHeight()),t},toggleButtonLoadingState:function(t,e,n){e||(e="Please wait..."),n||(n="button-loading"),setTimeout((function(){t instanceof Array?t.forEach((function(t){i(t,e)})):i(t,e)}),0);var i=function(t,i){if(t)if(c.contains(t,"dijitButtonContents")&&(t=a(t).parents(".dijitButton")[0]),c.contains(t,n))setTimeout((function(){switch(c.remove(t,n),c.remove(t,"loading"),t.tagName){case"BUTTON":case"A":o=h.get(t,"data-original-text"),t.innerHTML=o;break;case"INPUT":o=h.get(t,"data-original-text"),h.set(t,"value",o);break;case"SPAN":o=h.get(t,"data-original-text");var e=a(".dijitButtonText",t)[0];e&&(e.innerHTML=o),c.remove(t,"disabled")}}),1e3);else{var o;switch(c.add(t,n),t.tagName){case"BUTTON":case"A":o=t.innerHTML,t.innerHTML=e;break;case"INPUT":o=h.get(t,"value"),h.set(t,"value",e);break;case"SPAN":var s;c.add(t,"disabled"),(s=a(".dijitButtonText",t)[0])&&(o=s.innerHTML,s.innerHTML=e)}h.set(t,"data-original-text",o)}else console.error("No button found to toggle loading state in.")}},docHeight:function(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))},globalPublish:function(t,n){var i=document.location.protocol+"//"+document.location.host;window.self!==window.top&&window.top.mojo&&window.top.mojo.utils?window.top.location.href.slice(0,i.length)===i&&window.top.mojo.utils.globalPublish(t,n):(e.publish(t,n),a("iframe").forEach((function(e){if(e.src.slice(0,i.length)===i){var a=e.contentWindow;a&&a.dojo&&a.dojo.publish(t,n)}})))},isVisible:function(t){return 0!=t.offsetHeight},logEvent:function(t,e){j.pythia.logEvent(t,e)},parseEmoji:function(t){M.parse(t,{callback:function(t){return R.emojiImgPath(t)}})},emojiImgHtml:function(t){var e=R.emojiImgPath(t);return'<img class="emoji" draggable="false" alt="'+M.convert.fromCodePoint(t)+'" src="'+e+'">'},emojiImgPath:function(t){return"/images/emoji/72/"+t+".png"},scrollTo:function(t,e,n){var i=t.scrollTop,a=parseInt(i,10)>0?k.position(e).y+i:k.position(e).y;a=n?a-n:a,T.select(t).transition().duration(1e3).ease("cubic-in-out").tween("scroll",(function(){var t=T.interpolateNumber(i,a);return function(e){this.scrollTop=t(e)}}))},clickOnEnter:function(t,e){(t.charCode||t.keyCode)===g.ENTER&&e.click()},checkIfBlocked:function(t){p("/images/ads/placeholder.svg").then((function(){t(!1)}),(function(){t(!0)}))},compileTemplate:function(e,n){return d.toDom(t.replace(t.trim(e.innerHTML||e),(function(t,e){return I.encode(String(n[e]))})))},getDayWithOrdinal:function(t){return D.toOrdinal(t)},getThousandsString:function(t){return D.toThousandsString(t)},getShortString:function(t){return D.toShortString(t)},trackEvent:function(t){t.eventCategory&&t.eventAction&&window.ga("send","event",t)},triggeredPageEvents:[],addAnalyticsEvents:function(){var e={nullValue:"not set",categoryAttribute:"data-event-category",actionAttribute:"data-event-action",labelAttribute:"data-event-label"};function n(n){var i=h.get(this,e[n]),a=h.get(this,"href"),o=this.textContext&&t.trim(this.textContent);return i||(""===i?e.nullValue:o&&"actionAttribute"===n?"Clicked / "+o:a&&"labelAttribute"===n?a.split("?")[0]:null)}s(window.document,["a[data-event-category]:click","button[data-event-category]:click"],(function(t){var e=n.bind(this),i={eventCategory:e("categoryAttribute"),eventAction:e("actionAttribute"),eventLabel:e("labelAttribute")};R.trackEvent(i)}));var i=['[data-event-action="page load"]'],o=function(t){var e=n.bind(t),i=e("categoryAttribute"),a=e("actionAttribute"),o=e("labelAttribute"),s=i+"|"+a+"|"+o;this.triggeredPageEvents.includes(s)||(j.googleAnalytics.trackEvent(i,a,o,{nonInteraction:1}),this.triggeredPageEvents.push(s))}.bind(this);window.addEventListener("load",(function(){i.forEach((function(t){a(t).forEach(o)}))}))},closestAncestor:function(t,e){for(;null!==t&&1===t.nodeType;){if(e(t))return t;t=t.parentElement}return null},addIframeSafeAnalytics:function(){document.addEventListener("click",(function(t){try{var e,n=R.closestAncestor(t.target,(function(t){return"A"===t.tagName||"BUTTON"===t.tagName}));if(null===n||void 0===n.dataset.trackCategory)return;for(var i in n.dataset){if(i.startsWith("trackDimension-"))void 0===e&&(e={}),e["dimension"+i.replace("trackDimension-","")]=n.dataset[i]}window.ga("send","event",n.dataset.trackCategory,n.dataset.trackAction||"click",n.dataset.trackLabel,e)}catch(t){}}),!0)},pushToDataLayer:function(t){window.dataLayer.push(t)},popupWindowCenter:function(t,e,n,i){n||(n=.75*document.documentElement.clientWidth),i||(i=.75*document.documentElement.clientHeight);var a=void 0!==window.screenLeft?window.screenLeft:window.screenX,o=void 0!==window.screenTop?window.screenTop:window.screenY,s=document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerWidth?window.innerWidth:s,l=document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,d=r/2-n/2+a,c=(window.innerHeight?window.innerHeight:l)/2-i/2+o,u=window.open(t,e,"scrollbars=yes, width="+n+", height="+i+", top="+c+", left="+d);return window.focus&&u.focus(),u},ensureContentRendered:function(t){var e=new f;return!t||t.complete?e.resolve():t.addEventListener("load",(function(){e.resolve()})),e},comparators:{LTE:function(t,e){return t<=e},EQ:function(t,e){return t===e},GTE:function(t,e){return t>=e},LT:function(t,e){return t<e},GT:function(t,e){return t>e}},SINGLE_QUOTE_HTML_ENTITY_MAPPING:[["'","#039"]],encodeHTMLEntities:function(t,e){void 0===e&&(e=!0);var n=e?this.SINGLE_QUOTE_HTML_ENTITY_MAPPING:[];return I.encode(t,n)},decodeHTMLEntities:function(t,e){void 0===e&&(e=!0);var n=e?this.SINGLE_QUOTE_HTML_ENTITY_MAPPING:[];return I.decode(t,n)}};return R.addAnalyticsEvents(),R.addIframeSafeAnalytics(),R}.apply(e,a))||(t.exports=o)},function(t,e,n){var i;void 0===(i=function(){return{CHANNELS_REGISTERED_DOMAINS_DNS_MANAGEMENT:"channels.registered_domains_dns_management",CHANNELS_MARKETING_CALENDAR_SURVEY:"channels.marketing_calendar_survey",CHANNELS_TWITTER_AUTO_POSTING:"channels.twitter_auto_posting",QUICKBOOKS_INTEGRATION_REMOVE_BETA_LABELING:"quickbooks_integration.remove_beta_labeling",QUICKBOOKS_INTEGRATION_ACCELERATE_LINKS_IN_PROFILE:"quickbooks_integration.accelerate_links_in_profile",NEAPOLITAN_ONCHANGE_STYLE_INPUT:"neapolitan_onchange_style_input",NEAPOLITAN_RENDER_REFACTOR:"neapolitan_render_refactor",LANDING_PAGES_BETA_BRANDED_BUNDLE:"landing_pages.beta_branded_bundle",ND_CIRCUIT_BREAKER_DISCONNECT:"nd.circuit_breaker.disconnect",INTEGRATION_DIRECTORY_LINKS:"integrations_directory_links",SPANISH_SUPPORT_EMAIL:"spanish_support_email",SPANISH_SUPPORT_CHAT:"spanish_support_chat",SPANISH_SUPPORT:"spanish_support",LANDING_PAGES_TEMPLATE_PREVIEW_BLOCKS:"landing_pages.template_preview_blocks",EMAIL_SECTION_WIDTH_TOGGLE:"email.section_width_toggle",REVENUE_PAYWALL_UNDER_MAINTENANCE:"revenue.paywall_under_maintenance",AM_ORGANIZE_SELECTED_CONTACTS_COUNT:"am.organize.selected_contacts_count",AM_ORGANIZE_CAMPAIGN_FOLDERS_PER_AUDIENCE:"am.organize.campaign_folders_per_audience",AM_PREBUILT_SEGMENTS_EXPERIMENT:"am.prebuilt_segments_experiment",RECS_DOMAIN_EMAIL_RECIPIENTS:"recs.domain.email.recipients",AM_MULTIPLE_HOSTED_FORMS:"am.multiple_hosted_forms",CUSTOMER_JOURNEY_CAMPAIGNS_PAGE:"customer_journey_campaigns_page",CUSTOMER_JOURNEYS_NUNI_EDITOR:"customer_journeys_nuni_editor",CUSTOMER_JOURNEYS_ONE_CLICK_WELCOME_NUNI:"customer_journeys_one_click_welcome_nuni",CUSTOMER_JOURNEY_NATURAL_LANGUAGE_UPDATES:"customer_journey_natural_language_updates",CUSTOMER_JOURNEY_INCREASE_STEP_LIMITS:"customer_journey_increase_step_limits",PREBUILT_JOURNEYS_USE_GCP_BACKEND:"prebuilt_journeys_use_gcp_backend",PREBUILT_JOURNEYS_EDIT_PBJ:"prebuilt_journeys_edit_pbj",MULTICHANNEL_CAMPAIGNS:"multichannel_campaigns",RECESS_MULTILEVEL_CAMPAIGNS:"recess.multilevel_campaigns",REVENUE_NEW_PAYGO_IMPLEMENTATION:"revenue.new_paygo_implementation",SOLVVY_V4:"solvvy_v4",SOLVVY:"solvvy",SOCIAL_ADS_CJB_PAINTED_DOOR:"social_ads.cjb_painted_door",GACT_IMPROVED_ONBOARDING_NAV:"gact.improved_onboarding_nav",WEBSITES_SUNSET_PAYMENT_BLOCK:"websites.sunset_payment_block",PAGE_SIZE_WRITE_REDUCTION:"page_size_write_reduction",MONETIZATION_WINBACK_PROMO_WE_GOT_YOU_BOO:"revenue.winback_promo_we_got_you_boo",M10N_TX_FOR_FREE_ACCOUNTS:"m10n.tx_for_free_accounts",SMU_SIGNUP_BUTTON_ALWAYS_CLICKABLE:"smu.signup_button_always_clickable",UX_IMPROVE_ACCOUNT_ACTIVATION_WORKFLOW:"ux_improve_account_activation_workflow",SEGMENTATION_UI_REDESIGN:"segmentation.ui_redesign",REVENUE_INTERNATIONAL_PRICING_PHASE_1:"revenue.international_pricing_phase_1",REVENUE_HPF_PREFERENCE_FOR_ADYEN:"revenue.hpf_preference_for_adyen",FACEBOOK_GRAPH_API_UPGRADE:"facebook_graph_api_upgrade",FACEBOOK_MARKETING_API_UPGRADE:"facebook_marketing_api_upgrade",INTEGRATIONS_FUND_PARTNER:"integrations_fund_partner",CONTACT_BILLING_MODAL_DESTROY_DESCENDANTS:"contact_billing_modal_destroy_descendants",CONTENT_ENGINE_POSTCARDS:"content_engine.postcards",CONTENT_ENGINE_HAS_DESIGNS:"content_engine.has_designs",CONTENT_ENGINE_ANIMATION_ENABLED:"content_engine.animation_enabled",CONTENT_ENGINE_CA_EMAIL_PAYWALL:"content_engine.ca_email_paywall",CONTENT_ENGINE_EXPORT_NUNI_JSON:"content_engine.export_nuni_json",CONTENT_ENGINE_TRENDING_MODIFIERS:"content_engine.trending_modifiers",CONTENT_ENGINE_CA_DESIGN_BLOCK_VISION:"content_engine.ca_design_block_vision",CONTENT_ENGINE_POST_CAMPAIGN_ADD_ONS:"content_engine.post_campaign_add_ons",CONTENT_ENGINE_BRAND_KIT_BUSINESS_PROFILE:"content_engine.brand_kit_business_profile",CONTENT_ENGINE_CTA_COLOR_SYNC:"content_engine.cta_color_sync",CONTENT_ENGINE_CA4E_FORCE_STARTER:"content_engine.ca4e_force_starter",CONTENT_ENGINE_ZOOM_AND_POSITION:"content_engine.zoom_and_positioning",CONTENT_ENGINE_CA_DYNAMIC_HEADER:"content_engine.ca_dynamic_header",CONTENT_ENGINE_FAILED_SCRAPE_TO_MANUAL:"content_engine.failed_scrape_to_manual",CONTENT_ENGINE_BRAND_KIT_REVIEW:"content_engine.brand_kit_review",CONTENT_ENGINE_BACKGROUND_REMOVER:"content_engine.background_remover",CONTENT_ENGINE_BGR_CREATE_MENU:"content_engine.bgr_create_menu",CONTENT_ENGINE_BYPASS_HUMMINGBIRD:"content_engine.bypass_hummingbird",CONTENT_ENGINE_HEADING_TEXT_GEN:"content_engine.heading_text_gen",CONTENT_OPTIMIZATION_REPORT_SURVEY:"content_optimization.report_survey",CONTENT_OPTIMIZATION_REC_FEEDBACK:"content_optimization.rec_feedback",PX_CA_HOMEPAGE_BANNER:"px_ca_homepage_banner",RECS_DOMAIN_VERIFICATION_ALERTS:"recs.domain_verification_alerts",RECS_TIMEWARP_TIMES_SEEN:"recs.timewarp_times_seen",KB_INTERNATIONALIZATION:"kb_internationalization",E2E_NEWSLETTER_OPT_IN_SIGNUP:"e2e_newsletter_opt_in_signup",EEE_PREVIEW_REFACTOR:"eee.preview_refactor",ADSC_LEAN_MATCHMAKING_OPT_IN_UI:"adsc.lean_matchmaking_opt_in_ui",EDITING_PLATFORM_LANDING_PAGE_ALPHA:"editing_platform.landing_page_alpha",REPORTING_PREVIEW_TEXT:"reporting.preview_text",MONETIZATION_PAUSE_PROMO_RESURFACING_EXPERIMENT:"monetization.pause_promo_resurfacing_experiment",FORCE_CHATS_OFFLINE:"force_chats_offline",SHOW_HELPBOT_IN_WOOCOMMERCE:"show_helpbot_in_woocommerce",FINOPS_3DS:"finops.3ds",RECS_MODULE_ERROR_BOUNDARY:"recs_module_error_boundary",RECS_DOMAINS_CHECKLIST_DNS_CHECKER:"recs.domains_checklist_dns_checker",RECS_CIM_IS_EDITABLE_INTERACTIVE:"recs.cim_is_editable_interactive",RECS_TIMEWARP:"recs.timewarp",RECS_WELCOME_PBJ_RECOMMENDATION:"recs.welcome_pbj_recommendation",RECS_WELCOME_PBJ_QA_TESTING:"recs.welcome_pbj_qa_testing",RECS_PRIORITY_PBJ_QE_TESTING:"recs.priority_pbj_qe_testing",RECS_RECOMMENDATION_PRIORITIZATION:"recs.recommendation_prioritization",RECS_QA_ERROR_TESTING:"recs.qa_error_testing",RECS_ABANDON_CART_PBJ_RECOMMENDATION:"recs.abandon_cart_pbj_recommendation",RECS_CREATE_REPEAT_CUSTOMERS_RECOMMENDATION:"recs.create_repeat_customers_recommendation",RECS_RE_ENGAGE_LOST_CUSTOMERS_RECOMMENDATION:"recs.re_engage_lost_customers_recommendation",RECS_GENERIC_PBJ_RECOMMENDATION:"recs.generic_pbj_recommendation",RECS_CONTENT_OPTIMIZER_RECOMMENDATION:"recs.content_optimizer_recommendation",RECS_CONTENT_OPTIMIZER_REC_LANG_DETECT:"recs.content_optimizer_rec_lang_detect",RECS_CAMPAIGN_SUCCESS_PLACEMENT_FIX:"recs.campaign_success_placement_fix",RECS_CIM_QA_TESTING:"recs.cim_qa_testing",RECS_RECOMMENDATIONS_ENGINE:"recs.recommendations_engine",CED_MOBILE_SUPPORT_TAGGING:"ced.mobile_support_tagging",FINOPS_3DS_TOKENIZATION:"finops.3ds_tokenization",CED_ADA_SANDBOX:"ced.ada_sandbox",MNW_MOBILE_LOYALTY_PROGRAM:"mnw.mobile_loyalty_program",GROWTH_IN_APP_DISCOVERY:"growth.in_app_discovery",EEE_OUTLOOK_BUTTON:"eee.outlook_button",CED_HELP_MENU_FOCUS_STATE:"ced.help_menu_focus_state",CBD_CONTENT_STUDIO_PAGE_HEADERS:"cbd.content_studio_page_headers",CED_V1_IN_APP_OVERLAY:"ced.v1_in_app_overlay",EEE_LAYOUT_REFINEMENTS:"eee.layout_refinements",REPORTING_COMBINE_CLICKS:"reporting_combine_clicks",CEC_CONSISTENT_SUPPORT_EXP:"cec.consistent_support_exp",CED_V2_IN_APP_OVERLAY:"ced.v2_in_app_overlay",CEC_SLASH_SUPPORT_LOCALE_DROPDOWN_FIX:"cec.slash_support_locale_dropdown_fix",PIPE_REMOVE_LOOKALIKE:"pipe.remove_lookalike",MPT_MOBILE_ADA_FLAG:"mpt.mobile_ada_flag",SCP_PX_CUSTOMIZABLE_SECTION:"scp.px.customizable_section",CEC_IMPROVE_SUPPORT_ACCESS:"cec.improve_support_access"}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(79),n(5),n(1),n(46),n(8),n(26),n(153),n(6),n(48),n(21)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){var c=["owner","admin","manager","author","viewer"],u=window.User={__csrfToken:null,role:null,policy:null,type:null,settings:{pageSize:25,fileManagerShowGrid:!1},avatarUrl:null,pro:!1,userId:null,loginId:null,userLevel:null,isAnyEcomm:null,hasPaid:!1,currencySymbol:"$",currencyCode:"USD",currencyLocale:"en-US",countryCode:null,timezoneId:null,timezoneLabel:null,timezoneOffset:null,mustTrackLinks:!1,isGoalAvailable:!1,isGoalEnabled:!1,canSend:!1,freeLimit:0,isPayAsYouGo:!1,brandLogoUrl:null,isND:!1,websiteLogoUrl:null,canSeePaywall:!0,hasLegacyPaidPlan:!1,saveSetting:function(e,n){this.userId&&t.post({url:a.toUrl("/app-homepage/save-user-setting"),content:{key:e,value:n}})},saveSessionSetting:function(e,n){t.post({url:a.toUrl("/app-homepage/save-session-setting"),content:{key:e,value:n}})},hasRole:function(t){return e.indexOf(c,t)>=e.indexOf(c,u.role)},updateCSRF:function(t){var e=u.__csrfToken;r("[name=__csrf_token][value="+e+"]").val(t),u.__csrfToken=t},getCsrfToken:function(){if(this.__csrfToken)return this.__csrfToken;throw new Error("Error retrieving __csrfToken")},getUserLogins:function(){return this._userLogins?i(this._userLogins):t.get({url:a.toUrl("/account/apis/get-user-logins"),handleAs:"json"}).then(function(t){return this._userLogins=t,this._userLogins}.bind(this),s.throwError)},flagIsOn:function(t){return d.flagIsOn(t)},getBootstrappedInstance:function(){return this.isBootstrapped?this:window.top.User},formatCurrency:function(t,e){return e=e||this.currencyCode,t.toLocaleString(this.currencyLocale,{style:"currency",currency:e})},refresh:function(){return t.get({url:a.toUrl("/account/users/get-info"),handleAs:"json"}).then((function(t){return window.User=n.mixin(window.User,t),window.User}))}};return u}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/request/xhr")},function(t,e){t.exports=window.require("dojo/topic")},function(t,e,n){var i,a;i=[n(5),n(35),n(0),n(1),n(37)],void 0===(a=function(t,e,n,i,a){return n("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var t=this.domNode;if(this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),a.parse(t,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(i.hitch(this,(function(t){this._startupWidgets=t;for(var e=0;e<t.length;e++)this._processTemplateNode(t[e],(function(t,e){return t[e]}),(function(t,e,n){return e in t?t.connect(t,e,n):t.on(e,n,!0)}));this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}))),!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(t,e,n){return!(!e(t,"dojoType")&&!e(t,"data-dojo-type"))||this.inherited(arguments)},startup:function(){t.forEach(this._startupWidgets,(function(t){t&&!t._started&&t.startup&&t.startup()})),this._startupWidgets=null,this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t,e=document.getElementById("js-legacy-flag-data");if(e)try{t=JSON.parse(e.textContent),e.textContent=""}catch(t){console.error(t)}return{rootUrl:"/",proxyBaseUrl:null,listManageDomain:null,pusherKey:null,cdnImagesDomain:null,galleryDomain:null,avestaEnvironment:null,imageEditorUrl:null,imageEditorKey:null,solvvyUrl:null,enabledFlags:t,bridgeBundles:null,googleOAuth2:{},flagIsOn:function(t){if(!e)throw new Error("No flag node found on this page");if(!this.enabledFlags)throw new Error("No flag context found in this frame.");if(!Array.isArray(this.enabledFlags))throw new TypeError("this.enabledFlags is expected to be an array");if("string"!=typeof t)throw new TypeError("flagName is expected to be a string");return-1!==this.enabledFlags.indexOf(t)}}}.apply(e,[]))||(t.exports=i)},function(t,e){t.exports=window.require("dojo/Deferred")},function(t,e){t.exports=window.require("dojo/_base/kernel")},function(t,e,n){var i,a;i=[n(0),n(1),n(28),n(6),n(37),n(12),n(82),n(189)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([o,s],{state:{},searchContainerNode:!0,parseContent:!0,constructor:function(t){if(this.requiredProps){var e=this.requiredProps.filter((function(e){return void 0===t[e]}));if(e.length>0)throw"🤓 The following properties are missing from "+this.widgetName+": "+e.join(", ")}if(!this.templateString)throw new Error("No templateString provided to Renderable Widget");this.watch("state",this._update.bind(this))},setState:function(t){this.set("state",e.mixin({},this.state,t))},willUpdate:function(){},_update:function(t,e,n){this.shouldUpdate(e,n)&&(this.willUpdate(e,n),this.render())},shouldUpdate:function(t,e){return JSON.stringify(t)!==JSON.stringify(e)},buildRendering:function(){this.inherited(arguments),this.template=r(this.templateString),this.render()},preserveFocus:function(t){var e="blur"===t.type&&t.relatedTarget?t.relatedTarget:t.target;this._focusOnNextRender=e&&e.id,this._focusonNextRenderCaretPositionStart=e.selectionStart,this._focusonNextRenderCaretPositionEnd=e.selectionEnd},onRestoreFocus:function(){},_restoreFocus:function(){if(this._focusOnNextRender){var t=document.getElementById(this._focusOnNextRender);t&&(this._setCursorPositon(t,this._focusonNextRenderCaretPositionStart,this._focusonNextRenderCaretPositionEnd),t.focus(),this._focusOnNextRender=null,this.__focusonNextRenderCaretPositionStart=null,this.__focusonNextRenderCaretPositionEnd=null)}},_setCursorPositon:function(t,e,n){if(t.setSelectionRange)return t.setSelectionRange(e,n),!0;if(t.createTextRange){var i=t.createTextRange();return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i.select(),!0}return!1},render:function(){this._detachTemplateNodes(this.domNode),n.set(this.domNode,this.template(this.state)),this._attachTemplateNodes(this.domNode),this.parseContent&&a.parse({rootNode:this.domNode,propsThis:this}),this.onRestoreFocus(),this._restoreFocus()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(35),n(75),n(61),n(0),n(34),n(23),n(1),n(6),n(43),n(14),n(12),n(515),n(76),n(335),n(209),n(40)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u,h,p,m){function g(){}function f(t){return function(e,n,a,o){return e&&"string"==typeof n&&e[n]==g?e.on(n.substring(2).toLowerCase(),r.hitch(a,o)):t.apply(i,arguments)}}t.around(i,"connect",f),s.connect&&t.around(s,"connect",f);var v=a("dijit._Widget",[u,h,p],{onClick:g,onDblClick:g,onKeyDown:g,onKeyPress:g,onKeyUp:g,onMouseDown:g,onMouseMove:g,onMouseOut:g,onMouseOver:g,onMouseLeave:g,onMouseEnter:g,onMouseUp:g,constructor:function(t){for(var e in this._toConnect={},t)this[e]===g&&(this._toConnect[e.replace(/^on/,"").toLowerCase()]=t[e],delete t[e])},postCreate:function(){for(var t in this.inherited(arguments),this._toConnect)this.on(t,this._toConnect[t]);delete this._toConnect},on:function(t,e){return this[this._onMap(t)]===g?i.connect(this.domNode,t.toLowerCase(),this,e):this.inherited(arguments)},_setFocusedAttr:function(t){this._focused=t,this._set("focused",t)},setAttribute:function(t,e){s.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(t,e)},attr:function(t,e){var n=arguments.length;return n>=2||"object"==typeof t?this.set.apply(this,arguments):this.get(t)},getDescendants:function(){return s.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?l("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return o("dijit-legacy-requires")&&d(0,(function(){Promise.resolve().then((function(){n(334)})).catch(n.oe)})),v}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(31),n(8),n(116),n(21)],void 0===(a=function(t,e,n,i){var a={googleAnalytics:{trackEvent:function(t,e,n,i){window.ga("send","event",t,e,n,i)}},pythia:{logEvent:function(t,e){if("string"!=typeof t)throw new Error("You must provide an event name");void 0===e&&(e={}),e.event_name=t,a.logData(e,"pythia")}},marketing:{logData:function(t){a.logData(t,"marketing")}},info:function(i,a,o){if("string"!=typeof i)throw new Error("channelName must be provided");if("string"!=typeof a)throw new Error("message must be provided");o=o||{},t.post(e.toUrl("track/log"),{data:{channelName:i,message:a,data:JSON.stringify(o)}}).then(n,(function(){}))},logData:function(e,n){if(void 0===e&&(e={}),"string"!=typeof n)throw new Error("You must provide a log type");var i={data:JSON.stringify(e),type:n};t.post(rootUrl+"track",{data:i})},stdPath:function(t){return t=(t=t.replace(/\/$/,"")).replace(/-post$/,"")},marta:{trackEvent:function(n){var a=null;try{a=sessionStorage.getItem("sessionID"),a=JSON.parse(a)}catch(t){}t.get(e.toUrl("/marta/track"),{handleAs:"json",query:{eventId:n,browserSessionId:a}}).then((function(t){t.isMartaIdValid||i.avestaEnvironment&&"dev"===i.avestaEnvironment&&console.error('"'+n+'"is an invalid MARTA ID. You must provide a valid one to the logger.marta.trackEvent() function that matches up with a valid ID in the MARTA manifest. This MANIFEST array can be found in /MC/Analytics/Monetization/MartaEvent.php.')}))}}};return a}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/dom-geometry")},function(t,e,n){var i,a;i=[n(23),n(1),n(5),n(0),n(10),n(4),n(37)],void 0===(a=function(t,e,n,i,a,o,s){var r=0,l={_secureForInnerHtml:function(t){return t.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/gi,"")},_emptyNode:o.empty,_setNodeContent:function(t,n){if(o.empty(t),n)if("string"==typeof n&&(n=o.toDom(n,t.ownerDocument)),!n.nodeType&&e.isArrayLike(n))for(var i=n.length,a=0;a<n.length;a=i==n.length?a+1:0)o.place(n[a],t,"last");else o.place(n,t,"last");return t},_ContentSetter:i("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:t._scopeName,startup:!0,constructor:function(t,n){e.mixin(this,t||{}),n=this.node=a.byId(this.node||n),this.id||(this.id=["Setter",n?n.id||n.tagName:"",r++].join("_"))},set:function(t,e){void 0!==t&&(this.content=t),e&&this._mixin(e),this.onBegin(),this.setContent();var n=this.onEnd();return n&&n.then?n:this.node},setContent:function(){var t=this.node;if(!t)throw new Error(this.declaredClass+": setContent given no node");try{t=l._setNodeContent(t,this.content)}catch(n){var e=this.onContentError(n);try{t.innerHTML=e}catch(t){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+t.message,t)}}this.node=t},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred),this.parseResults&&this.parseResults.length&&(n.forEach(this.parseResults,(function(t){t.destroy&&t.destroy()})),delete this.parseResults),o.empty(this.node)},onBegin:function(){var t=this.content;if(e.isString(t)&&(this.cleanContent&&(t=l._secureForInnerHtml(t)),this.extractContent)){var n=t.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);n&&(t=n[1])}return this.empty(),this.content=t,this.node},onEnd:function(){return this.parseContent&&this._parse(),this.node},tearDown:function(){delete this.parseResults,delete this.parseDeferred,delete this.node,delete this.content},onContentError:function(t){return"Error occurred setting content: "+t},onExecError:function(t){return"Error occurred executing scripts: "+t},_mixin:function(t){var e,n={};for(e in t)e in n||(this[e]=t[e])},_parse:function(){var t=this.node;try{var e={};n.forEach(["dir","lang","textDir"],(function(t){this[t]&&(e[t]=this[t])}),this);var i=this;this.parseDeferred=s.parse({rootNode:t,noStart:!this.startup,inherited:e,scope:this.parserScope}).then((function(t){return i.parseResults=t}),(function(t){i._onError("Content",t,"Error parsing in _ContentSetter#"+this.id)}))}catch(t){this._onError("Content",t,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(t,e,n){var i=this["on"+t+"Error"].call(this,e);n?console.error(n,e):i&&l._setNodeContent(this.node,i,!0)}}),set:function(t,n,i){return null==n&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),n=""),i?new l._ContentSetter(e.mixin(i,{content:n,node:t})).set():l._setNodeContent(t,n,!0)}};return e.setObject("dojo.html",l),l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(5),n(35),n(0),n(22),n(10),n(3),n(27),n(9),n(54),n(83),n(30),n(1),n(2),n(43),n(33),n(49),n(279),n(1082),n(62),n(142),n(25),n(11),n(178),n(425),n(426),n(698),n(101),n(207),n(1083),n(84),n(499)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E){var P=new o;P.resolve(!0);var D=a("dijit._DialogBase",[k,x,I,S],{templateString:E,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:_.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(t){this._set("draggable",t)},maxRatio:.9,closable:!0,_setClosableAttr:function(t){this.closeButtonNode.style.display=t?"":"none",this._set("closable",t)},postMixInProperties:function(){var t=u.getLocalization("dijit","common");p.mixin(this,t),this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"}),this.ownerDocumentBody.appendChild(this.domNode),this.inherited(arguments),i.after(this,"onExecute",p.hitch(this,"hide"),!0),i.after(this,"onCancel",p.hitch(this,"hide"),!0),this._modalconnects=[]},onLoad:function(){this.resize(),this._position(),this.autofocus&&L.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem)),this.inherited(arguments)},focus:function(){this._getFocusItems(),w.focus(this._firstFocusItem)},_endDrag:function(){var t=l.position(this.domNode),e=v.getBox(this.ownerDocument);t.y=Math.min(Math.max(t.y,0),e.h-t.h),t.x=Math.min(Math.max(t.x,0),e.w-t.w),this._relativePosition=t,this._position()},_setup:function(){var t=this.domNode;this.titleBar&&this.draggable?(this._moveable=new(6==f("ie")?y:b)(t,{handle:this.titleBar}),i.after(this._moveable,"onMoveStop",p.hitch(this,"_endDrag"),!0)):r.add(t,"dijitDialogFixed"),this.underlayAttrs={dialogId:this.id,class:e.map(this.class.split(/\s/),(function(t){return t+"_underlay"})).join(" "),_onKeyDown:p.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!r.contains(this.ownerDocumentBody,"dojoMove")){var t=this.domNode,e=v.getBox(this.ownerDocument),n=this._relativePosition,i=n?null:l.position(t),a=Math.floor(e.l+(n?n.x:(e.w-i.w)/2)),o=Math.floor(e.t+(n?n.y:(e.h-i.h)/2));d.set(t,{left:a+"px",top:o+"px"})}},_onKey:function(t){if(t.keyCode==h.TAB){this._getFocusItems();var e=t.target;this._firstFocusItem==this._lastFocusItem?(t.stopPropagation(),t.preventDefault()):e==this._firstFocusItem&&t.shiftKey?(w.focus(this._lastFocusItem),t.stopPropagation(),t.preventDefault()):e!=this._lastFocusItem||t.shiftKey||(w.focus(this._firstFocusItem),t.stopPropagation(),t.preventDefault())}else this.closable&&t.keyCode==h.ESCAPE&&(this.onCancel(),t.stopPropagation(),t.preventDefault())},show:function(){if(this.open)return P.promise;this._started||this.startup(),this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0),this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),L.hide(this));var t,e=v.get(this.ownerDocument);this._modalconnects.push(m(e,"scroll",p.hitch(this,"resize",null))),this._modalconnects.push(m(this.domNode,"keydown",p.hitch(this,"_onKey"))),d.set(this.domNode,{opacity:0,display:""}),this._set("open",!0),this._onShow(),this.resize(),this._position(),this._fadeInDeferred=new o(p.hitch(this,(function(){t.stop(),delete this._fadeInDeferred})));var n=this._fadeInDeferred.promise;return t=c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:p.hitch(this,(function(){L.show(this,this.underlayAttrs)})),onEnd:p.hitch(this,(function(){this.autofocus&&L.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem)),this._fadeInDeferred.resolve(!0),delete this._fadeInDeferred}))}).play(),r.add(document.body,"overflow-hidden"),n},hide:function(){if(!this._alreadyInitialized||!this.open)return P.promise;var t;this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred=new o(p.hitch(this,(function(){t.stop(),delete this._fadeOutDeferred}))),this._fadeOutDeferred.then(p.hitch(this,"onHide"));var e,n=this._fadeOutDeferred.promise;for(t=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:p.hitch(this,(function(){this.domNode.style.display="none",L.hide(this),this._fadeOutDeferred.resolve(!0),delete this._fadeOutDeferred}))}).play(),this._scrollConnected&&(this._scrollConnected=!1);e=this._modalconnects.pop();)e.remove();return this._relativePosition&&delete this._relativePosition,this._set("open",!1),r.remove(document.body,"overflow-hidden"),n},resize:function(t){if("none"!=this.domNode.style.display){if(this._checkIfSingleChild(),!t){this._shrunk&&(this._singleChild&&void 0!==this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),e.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],(function(t){t&&d.set(t,{position:"static",width:"auto",height:"auto"})})),this.domNode.style.position="absolute");var n=v.getBox(this.ownerDocument);n.w*=this.maxRatio,n.h*=this.maxRatio;var i=l.position(this.domNode);i.w>=n.w||i.h>=n.h?(t={w:Math.min(i.w,n.w),h:Math.min(i.h,n.h)},this._shrunk=!0):this._shrunk=!1}if(t){l.setMarginBox(this.domNode,t);var a=[];this.titleBar&&a.push({domNode:this.titleBar,region:"top"}),this.actionBarNode&&a.push({domNode:this.actionBarNode,region:"bottom"});var o={domNode:this.containerNode,region:"center"};a.push(o);var s=j.marginBox2contentBox(this.domNode,t);if(j.layoutChildren(this.domNode,s,a),this._singleChild){var r=j.marginBox2contentBox(this.containerNode,o);this._singleChild.resize({w:r.w,h:r.h})}else this.containerNode.style.overflow="auto",this._layoutChildren()}else this._layoutChildren();f("touch")||t||this._position()}},_layoutChildren:function(){e.forEach(this.getChildren(),(function(t){t.resize&&t.resize()}))},destroy:function(){var t;for(this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred&&this._fadeOutDeferred.cancel(),this._moveable&&this._moveable.destroy();t=this._modalconnects.pop();)t.remove();L.hide(this),this.inherited(arguments)}});var N=a("dijit.Dialog",[A,D],{});N._DialogBase=D;var L=N._DialogLevelManager={_beginZIndex:950,show:function(t,e){M[M.length-1].focus=w.curNode;var n=M[M.length-1].dialog?M[M.length-1].zIndex+2:N._DialogLevelManager._beginZIndex;d.set(t.domNode,"zIndex",n),T.show(e,n-1),M.push({dialog:t,underlayAttrs:e,zIndex:n})},hide:function(t){if(M[M.length-1].dialog==t){M.pop();var n=M[M.length-1];if(1==M.length?T.hide():T.show(n.underlayAttrs,n.zIndex-1),t.refocus){var i=n.focus;if(!n.dialog||i&&s.isDescendant(i,n.dialog.domNode)||(n.dialog._getFocusItems(),i=n.dialog._firstFocusItem),i)try{i.focus()}catch(t){}}}else{var a=e.indexOf(e.map(M,(function(t){return t.dialog})),t);-1!=a&&M.splice(a,1)}},isTop:function(t){return M[M.length-1].dialog==t}},M=N._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];return w.watch("curNode",(function(t,e,n){var i=M[M.length-1].dialog;if(n&&i&&!i._fadeOutDeferred&&n.ownerDocument==i.ownerDocument){do{if(n==i.domNode||r.contains(n,"dijitPopup"))return}while(n=n.parentNode);i.focus()}})),f("dijit-legacy-requires")&&g(0,(function(){Promise.resolve().then((function(){n(143)})).catch(n.oe)})),N}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/keys")},function(t,e,n){var i,a;i=[n(18)],void 0===(a=function(t){return t}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/window")},function(t,e){t.exports=window.require("dojo/sniff")},function(t,e){t.exports=window.require("dojo/has")},function(t,e){t.exports=window.require("dojo/aspect")},function(t,e,n){var i,a,o;/*! VelocityJS.org (1.0.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */!function(t){if(!t.jQuery){var e=function(t,n){return new e.fn.init(t,n)};e.isWindow=function(t){return null!=t&&t==t.window},e.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[o.call(t)]||"object":typeof t},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isPlainObject=function(t){var n;if(!t||"object"!==e.type(t)||t.nodeType||e.isWindow(t))return!1;try{if(t.constructor&&!a.call(t,"constructor")&&!a.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(n in t);return void 0===n||a.call(t,n)},e.each=function(t,e,n){var i=0,a=t.length,o=l(t);if(n){if(o)for(;i<a&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(o)for(;i<a&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},e.data=function(t,i,a){if(void 0===a){var o=(s=t[e.expando])&&n[s];if(void 0===i)return o;if(o&&i in o)return o[i]}else if(void 0!==i){var s=t[e.expando]||(t[e.expando]=++e.uuid);return n[s]=n[s]||{},n[s][i]=a,a}},e.removeData=function(t,i){var a=t[e.expando],o=a&&n[a];o&&e.each(i,(function(t,e){delete o[e]}))},e.extend=function(){var t,n,i,a,o,s,r=arguments[0]||{},l=1,d=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[l]||{},l++),"object"!=typeof r&&"function"!==e.type(r)&&(r={}),l===d&&(r=this,l--);l<d;l++)if(null!=(o=arguments[l]))for(a in o)t=r[a],r!==(i=o[a])&&(c&&i&&(e.isPlainObject(i)||(n=e.isArray(i)))?(n?(n=!1,s=t&&e.isArray(t)?t:[]):s=t&&e.isPlainObject(t)?t:{},r[a]=e.extend(c,s,i)):void 0!==i&&(r[a]=i));return r},e.queue=function(t,n,i){if(t){n=(n||"fx")+"queue";var a,o,s,r=e.data(t,n);return i?(!r||e.isArray(i)?r=e.data(t,n,(s=o||[],null!=(a=i)&&(l(Object(a))?function(t,e){for(var n=+e.length,i=0,a=t.length;i<n;)t[a++]=e[i++];if(n!=n)for(;void 0!==e[i];)t[a++]=e[i++];t.length=a}(s,"string"==typeof a?[a]:a):[].push.call(s,a)),s)):r.push(i),r):r||[]}},e.dequeue=function(t,n){e.each(t.nodeType?[t]:t,(function(t,i){n=n||"fx";var a=e.queue(i,n),o=a.shift();"inprogress"===o&&(o=a.shift()),o&&("fx"===n&&a.unshift("inprogress"),o.call(i,(function(){e.dequeue(i,n)})))}))},e.fn=e.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var n=this[0],t=t.apply(n),i=this.offset(),a=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:e(t).offset();return i.top-=parseFloat(n.style.marginTop)||0,i.left-=parseFloat(n.style.marginLeft)||0,t.style&&(a.top+=parseFloat(t.style.borderTopWidth)||0,a.left+=parseFloat(t.style.borderLeftWidth)||0),{top:i.top-a.top,left:i.left-a.left}}};var n={};e.expando="velocity"+(new Date).getTime(),e.uuid=0;for(var i={},a=i.hasOwnProperty,o=i.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),r=0;r<s.length;r++)i["[object "+s[r]+"]"]=s[r].toLowerCase();e.fn.init.prototype=e.fn,t.Velocity={Utilities:e}}function l(t){var n=t.length,i=e.type(t);return"function"!==i&&!e.isWindow(t)&&(!(1!==t.nodeType||!n)||("array"===i||0===n||"number"==typeof n&&n>0&&n-1 in t))}}(window),o=function(){return function(t,e,n,i){var a,o=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",e.getElementsByTagName("span").length)return e=null,t}}(),s=(a=0,e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){var e,n=(new Date).getTime();return e=Math.max(0,16-(n-a)),a=n+e,setTimeout((function(){t(n+e)}),e)});function r(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var a=t[e];a&&i.push(a)}return i}function l(t){return c.isWrapped(t)?t=[].slice.call(t):c.isNode(t)&&(t=[t]),t}var d,c={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&void 0!==t.length&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||e.Zepto&&e.Zepto.zepto.isZ(t))},isSVG:function(t){return e.SVGElement&&t instanceof e.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},u=!1;if(t.fn&&t.fn.jquery?(d=t,u=!0):d=e.Velocity.Utilities,o<=8&&!u)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(o<=7)){var h={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:e.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:d,Redirects:{},Easings:{},Promise:e.Promise,defaults:{queue:"",duration:400,easing:"swing",begin:void 0,complete:void 0,progress:void 0,display:void 0,visibility:void 0,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){d.data(t,"velocity",{isSVG:c.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};void 0!==e.pageYOffset?(h.State.scrollAnchor=e,h.State.scrollPropertyLeft="pageXOffset",h.State.scrollPropertyTop="pageYOffset"):(h.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,h.State.scrollPropertyLeft="scrollLeft",h.State.scrollPropertyTop="scrollTop");var p=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,i){var a={x:e.x+i.dx*n,v:e.v+i.dv*n,tension:e.tension,friction:e.friction};return{dx:a.v,dv:t(a)}}function n(n,i){var a={dx:n.v,dv:t(n)},o=e(n,.5*i,a),s=e(n,.5*i,o),r=e(n,i,s),l=1/6*(a.dx+2*(o.dx+s.dx)+r.dx),d=1/6*(a.dv+2*(o.dv+s.dv)+r.dv);return n.x=n.x+l*i,n.v=n.v+d*i,n}return function t(e,i,a){var o,s,r,l={x:-1,v:0,tension:null,friction:null},d=[0],c=0;for(e=parseFloat(e)||500,i=parseFloat(i)||20,a=a||null,l.tension=e,l.friction=i,s=(o=null!==a)?(c=t(e,i))/a*.016:.016;r=n(r||l,s),d.push(1+r.x),c+=16,Math.abs(r.x)>1e-4&&Math.abs(r.v)>1e-4;);return o?function(t){return d[t*(d.length-1)|0]}:c}}();h.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},d.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],(function(t,e){h.Easings[e[0]]=y.apply(null,e[1])}));var m=h.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<m.Lists.colors.length;t++){var e="color"===m.Lists.colors[t]?"0 0 0 1":"255 255 255 1";m.Hooks.templates[m.Lists.colors[t]]=["Red Green Blue Alpha",e]}var n,i,a;if(o)for(n in m.Hooks.templates){a=(i=m.Hooks.templates[n])[0].split(" ");var s=i[1].match(m.RegEx.valueSplit);"Color"===a[0]&&(a.push(a.shift()),s.push(s.shift()),m.Hooks.templates[n]=[a.join(" "),s.join(" ")])}for(n in m.Hooks.templates)for(var t in a=(i=m.Hooks.templates[n])[0].split(" ")){var r=n+a[t],l=t;m.Hooks.registered[r]=[n,l]}},getRoot:function(t){var e=m.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return m.RegEx.valueUnwrap.test(e)&&(e=e.match(m.RegEx.valueUnwrap)[1]),m.Values.isCSSNullValue(e)&&(e=m.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=m.Hooks.registered[t];if(n){var i=n[0],a=n[1];return(e=m.Hooks.cleanRootPropertyValue(i,e)).toString().match(m.RegEx.valueSplit)[a]}return e},injectValue:function(t,e,n){var i=m.Hooks.registered[t];if(i){var a,o=i[0],s=i[1];return(a=(n=m.Hooks.cleanRootPropertyValue(o,n)).toString().match(m.RegEx.valueSplit))[s]=e,a.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var i;return i=m.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(i=n.toString().match(m.RegEx.valueUnwrap))?i[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var a=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=a?a[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(o<=8)switch(t){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){o<=9||h.State.isGingerbread||(m.Lists.transformsBase=m.Lists.transformsBase.concat(m.Lists.transforms3D));for(var t=0;t<m.Lists.transformsBase.length;t++)!function(){var e=m.Lists.transformsBase[t];m.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return"transform";case"extract":return void 0===v(n)||void 0===v(n).transformCache[e]?/^scale/i.test(e)?1:0:v(n).transformCache[e].replace(/[()]/g,"");case"inject":var a=!1;switch(e.substr(0,e.length-1)){case"translate":a=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":h.State.isAndroid&&void 0===v(n).transformCache[e]&&i<1&&(i=1),a=!/(\d)$/i.test(i);break;case"skew":case"rotate":a=!/(deg|\d)$/i.test(i)}return a||(v(n).transformCache[e]="("+i+")"),v(n).transformCache[e]}}}();for(t=0;t<m.Lists.colors.length;t++)!function(){var e=m.Lists.colors[t];m.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return e;case"extract":var a;if(m.RegEx.wrappedValueAlreadyExtracted.test(i))a=i;else{var s,r={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?s=void 0!==r[i]?r[i]:r.black:m.RegEx.isHex.test(i)?s="rgb("+m.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(s=r.black),a=(s||i).toString().match(m.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return o<=8||3!==a.split(" ").length||(a+=" 1"),a;case"inject":return o<=8?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(o<=8?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(o||h.State.isAndroid&&!h.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(h.State.prefixMatches[t])return[h.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,i=e.length;n<i;n++){var a;if(a=0===n?t:e[n]+t.replace(/^\w/,(function(t){return t.toUpperCase()})),c.isString(h.State.prefixElement.style[a]))return h.State.prefixMatches[t]=a,[a,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e;return t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i){return e+e+n+n+i+i})),(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,n,i,a){function s(t,n){var i=0;if(o<=8)i=d.css(t,n);else{var r,l=!1;function c(){l&&m.setPropertyValue(t,"display","none")}if(/^(width|height)$/.test(n)&&0===m.getPropertyValue(t,"display")&&(l=!0,m.setPropertyValue(t,"display",m.Values.getDisplayType(t))),!a){if("height"===n&&"border-box"!==m.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var u=t.offsetHeight-(parseFloat(m.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(m.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(m.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(m.getPropertyValue(t,"paddingBottom"))||0);return c(),u}if("width"===n&&"border-box"!==m.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var p=t.offsetWidth-(parseFloat(m.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(m.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(m.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(m.getPropertyValue(t,"paddingRight"))||0);return c(),p}}r=void 0===v(t)?e.getComputedStyle(t,null):v(t).computedStyle?v(t).computedStyle:v(t).computedStyle=e.getComputedStyle(t,null),(o||h.State.isFirefox)&&"borderColor"===n&&(n="borderTopColor"),""!==(i=9===o&&"filter"===n?r.getPropertyValue(n):r[n])&&null!==i||(i=t.style[n]),c()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(n)){var g=s(t,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(i=d(t).position()[n]+"px")}return i}var r;if(m.Hooks.registered[n]){var l=n,c=m.Hooks.getRoot(l);void 0===i&&(i=m.getPropertyValue(t,m.Names.prefixCheck(c)[0])),m.Normalizations.registered[c]&&(i=m.Normalizations.registered[c]("extract",t,i)),r=m.Hooks.extractValue(l,i)}else if(m.Normalizations.registered[n]){var u,p;"transform"!==(u=m.Normalizations.registered[n]("name",t))&&(p=s(t,m.Names.prefixCheck(u)[0]),m.Values.isCSSNullValue(p)&&m.Hooks.templates[n]&&(p=m.Hooks.templates[n][1])),r=m.Normalizations.registered[n]("extract",t,p)}return/^[\d-]/.test(r)||(r=v(t)&&v(t).isSVG&&m.Names.SVGAttribute(n)?/^(height|width)$/i.test(n)?t.getBBox()[n]:t.getAttribute(n):s(t,m.Names.prefixCheck(n)[0])),m.Values.isCSSNullValue(r)&&(r=0),h.debug>=2&&console.log("Get "+n+": "+r),r},setPropertyValue:function(t,n,i,a,s){var r=n;if("scroll"===n)s.container?s.container["scroll"+s.direction]=i:"Left"===s.direction?e.scrollTo(i,s.alternateValue):e.scrollTo(s.alternateValue,i);else if(m.Normalizations.registered[n]&&"transform"===m.Normalizations.registered[n]("name",t))m.Normalizations.registered[n]("inject",t,i),r="transform",i=v(t).transformCache[n];else{if(m.Hooks.registered[n]){var l=n,d=m.Hooks.getRoot(n);a=a||m.getPropertyValue(t,d),i=m.Hooks.injectValue(l,i,a),n=d}if(m.Normalizations.registered[n]&&(i=m.Normalizations.registered[n]("inject",t,i),n=m.Normalizations.registered[n]("name",t)),r=m.Names.prefixCheck(n)[0],o<=8)try{t.style[r]=i}catch(t){h.debug&&console.log("Browser does not support ["+i+"] for ["+r+"]")}else v(t)&&v(t).isSVG&&m.Names.SVGAttribute(n)?t.setAttribute(n,i):t.style[r]=i;h.debug>=2&&console.log("Set "+n+" ("+r+"): "+i)}return[r,i]},flushTransformCache:function(t){var e="";if((o||h.State.isAndroid&&!h.State.isChrome)&&v(t).isSVG){function n(e){return parseFloat(m.getPropertyValue(t,e))}var i={translate:[n("translateX"),n("translateY")],skewX:[n("skewX")],skewY:[n("skewY")],scale:1!==n("scale")?[n("scale"),n("scale")]:[n("scaleX"),n("scaleY")],rotate:[n("rotateZ"),0,0]};d.each(v(t).transformCache,(function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),i[t]&&(e+=t+"("+i[t].join(" ")+") ",delete i[t])}))}else{var a,s;d.each(v(t).transformCache,(function(n){if(a=v(t).transformCache[n],"transformPerspective"===n)return s=a,!0;9===o&&"rotateZ"===n&&(n="rotate"),e+=n+a+" "})),s&&(e="perspective"+s+" "+e)}m.setPropertyValue(t,"transform",e)}};m.Hooks.register(),m.Normalizations.register(),h.hook=function(t,e,n){var i=void 0;return t=l(t),d.each(t,(function(t,a){if(void 0===v(a)&&h.init(a),void 0===n)void 0===i&&(i=h.CSS.getPropertyValue(a,e));else{var o=h.CSS.setPropertyValue(a,e,n);"transform"===o[0]&&h.CSS.flushTransformCache(a),i=o}})),i};var g=function(){function t(){return i?I.promise||null:a}var i,a,o,s,u,p,f=arguments[0]&&(d.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||c.isString(arguments[0].properties));if(c.isWrapped(this)?(i=!1,o=0,s=this,a=this):(i=!0,o=1,s=f?arguments[0].elements:arguments[0]),s=l(s)){f?(u=arguments[0].properties,p=arguments[0].options):(u=arguments[o],p=arguments[o+1]);var b=s.length,y=0;if("stop"!==u&&!d.isPlainObject(p)){var k=o+1;p={};for(var S=k;S<arguments.length;S++)c.isArray(arguments[S])||!/^(fast|normal|slow)$/i.test(arguments[S])&&!/^\d/.test(arguments[S])?c.isString(arguments[S])||c.isArray(arguments[S])?p.easing=arguments[S]:c.isFunction(arguments[S])&&(p.complete=arguments[S]):p.duration=arguments[S]}var x,I={promise:null,resolver:null,rejecter:null};switch(i&&h.Promise&&(I.promise=new h.Promise((function(t,e){I.resolver=t,I.rejecter=e}))),u){case"scroll":x="scroll";break;case"reverse":x="reverse";break;case"stop":d.each(s,(function(t,e){v(e)&&v(e).delayTimer&&(clearTimeout(v(e).delayTimer.setTimeout),v(e).delayTimer.next&&v(e).delayTimer.next(),delete v(e).delayTimer)}));var T=[];return d.each(h.State.calls,(function(t,e){e&&d.each(e[1],(function(n,i){var a=c.isString(p)?p:"";if(void 0!==p&&e[2].queue!==a)return!0;d.each(s,(function(e,n){n===i&&(void 0!==p&&(d.each(d.queue(n,a),(function(t,e){c.isFunction(e)&&e(null,!0)})),d.queue(n,a,[])),v(n)&&""===a&&d.each(v(n).tweensContainer,(function(t,e){e.endValue=e.currentValue})),T.push(t))}))}))})),d.each(T,(function(t,e){C(e,!0)})),I.promise&&I.resolver(s),t();default:if(!d.isPlainObject(u)||c.isEmptyObject(u)){if(c.isString(u)&&h.Redirects[u]){var A=(P=d.extend({},p)).duration,j=P.delay||0;return!0===P.backwards&&(s=d.extend(!0,[],s).reverse()),d.each(s,(function(t,e){parseFloat(P.stagger)?P.delay=j+parseFloat(P.stagger)*t:c.isFunction(P.stagger)&&(P.delay=j+P.stagger.call(e,t,b)),P.drag&&(P.duration=parseFloat(A)||(/^(callout|transition)/.test(u)?1e3:400),P.duration=Math.max(P.duration*(P.backwards?1-t/b:(t+1)/b),.75*P.duration,200)),h.Redirects[u].call(e,e,P||{},t,b,s,I.promise?I:void 0)})),t()}var E="Velocity: First argument ("+u+") was not a property map, a known action, or a registered redirect. Aborting.";return I.promise?I.rejecter(new Error(E)):console.log(E),t()}x="start"}var P,D,N={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},L=[];if(d.each(s,(function(t,e){c.isNode(e)&&R.call(e)})),(P=d.extend({},h.defaults,p)).loop=parseInt(P.loop),D=2*P.loop-1,P.loop)for(var M=0;M<D;M++){var B={delay:P.delay,progress:P.progress};M===D-1&&(B.display=P.display,B.visibility=P.visibility,B.complete=P.complete),g(s,"reverse",B)}return t()}function R(){var t,i=this,a=d.extend({},h.defaults,p),o={};switch(void 0===v(i)&&h.init(i),parseFloat(a.delay)&&!1!==a.queue&&d.queue(i,a.queue,(function(t){h.velocityQueueEntryFlag=!0,v(i).delayTimer={setTimeout:setTimeout(t,parseFloat(a.delay)),next:t}})),a.duration.toString().toLowerCase()){case"fast":a.duration=200;break;case"normal":a.duration=400;break;case"slow":a.duration=600;break;default:a.duration=parseFloat(a.duration)||1}function l(l){if(a.begin&&0===y)try{a.begin.call(s,s)}catch(t){setTimeout((function(){throw t}),1)}if("scroll"===x){var g,f,C,k=/^x$/i.test(a.axis)?"Left":"Top",S=parseFloat(a.offset)||0;a.container?c.isWrapped(a.container)||c.isNode(a.container)?(a.container=a.container[0]||a.container,C=(g=a.container["scroll"+k])+d(i).position()[k.toLowerCase()]+S):a.container=null:(g=h.State.scrollAnchor[h.State["scrollProperty"+k]],f=h.State.scrollAnchor[h.State["scrollProperty"+("Left"===k?"Top":"Left")]],C=d(i).offset()[k.toLowerCase()]+S),o={scroll:{rootPropertyValue:!1,startValue:g,currentValue:g,endValue:C,unitType:"",easing:a.easing,scrollData:{container:a.container,direction:k,alternateValue:f}},element:i},h.debug&&console.log("tweensContainer (scroll): ",o.scroll,i)}else if("reverse"===x){if(!v(i).tweensContainer)return void d.dequeue(i,a.queue);"none"===v(i).opts.display&&(v(i).opts.display="auto"),"hidden"===v(i).opts.visibility&&(v(i).opts.visibility="visible"),v(i).opts.loop=!1,v(i).opts.begin=null,v(i).opts.complete=null,p.easing||delete a.easing,p.duration||delete a.duration,a=d.extend({},v(i).opts,a);var T=d.extend(!0,{},v(i).tweensContainer);for(var A in T)if("element"!==A){var j=T[A].startValue;T[A].startValue=T[A].currentValue=T[A].endValue,T[A].endValue=j,c.isEmptyObject(p)||(T[A].easing=a.easing),h.debug&&console.log("reverse tweensContainer ("+A+"): "+JSON.stringify(T[A]),i)}o=T}else if("start"===x){function E(t,e){var n=void 0,o=void 0,s=void 0;return c.isArray(t)?(n=t[0],!c.isArray(t[1])&&/^[\d-]/.test(t[1])||c.isFunction(t[1])||m.RegEx.isHex.test(t[1])?s=t[1]:(c.isString(t[1])&&!m.RegEx.isHex.test(t[1])||c.isArray(t[1]))&&(o=e?t[1]:w(t[1],a.duration),void 0!==t[2]&&(s=t[2]))):n=t,e||(o=o||a.easing),c.isFunction(n)&&(n=n.call(i,y,b)),c.isFunction(s)&&(s=s.call(i,y,b)),[n||0,o,s]}for(var P in v(i).tweensContainer&&!0===v(i).isAnimating&&(T=v(i).tweensContainer),d.each(u,(function(t,e){if(RegExp("^"+m.Lists.colors.join("$|^")+"$").test(t)){var n=E(e,!0),i=n[0],a=n[1],o=n[2];if(m.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],r=m.Values.hexToRgb(i),l=o?m.Values.hexToRgb(o):void 0,d=0;d<s.length;d++){var c=[r[d]];a&&c.push(a),void 0!==l&&c.push(l[d]),u[t+s[d]]=c}delete u[t]}}})),u){var D=E(u[P]),M=D[0],B=D[1],R=D[2];P=m.Names.camelCase(P);var F=m.Hooks.getRoot(P),O=!1;if(v(i).isSVG||!1!==m.Names.prefixCheck(F)[1]||void 0!==m.Normalizations.registered[F]){(void 0!==a.display&&null!==a.display&&"none"!==a.display||void 0!==a.visibility&&"hidden"!==a.visibility)&&/opacity|filter/.test(P)&&!R&&0!==M&&(R=0),a._cacheValues&&T&&T[P]?(void 0===R&&(R=T[P].endValue+T[P].unitType),O=v(i).rootPropertyValueCache[F]):m.Hooks.registered[P]?void 0===R?(O=m.getPropertyValue(i,F),R=m.getPropertyValue(i,P,O)):O=m.Hooks.templates[F][1]:void 0===R&&(R=m.getPropertyValue(i,P));var U,$,H,V=!1;if(R=(U=W(P,R))[0],H=U[1],M=(U=W(P,M))[0].replace(/^([+-\/*])=/,(function(t,e){return V=e,""})),$=U[1],R=parseFloat(R)||0,M=parseFloat(M)||0,"%"===$&&(/^(fontSize|lineHeight)$/.test(P)?(M/=100,$="em"):/^scale/.test(P)?(M/=100,$=""):/(Red|Green|Blue)$/i.test(P)&&(M=M/100*255,$="")),/[\/*]/.test(V))$=H;else if(H!==$&&0!==R)if(0===M)$=H;else{t=t||q();var z=/margin|padding|left|right|width|text|word|letter/i.test(P)||/X$/.test(P)||"x"===P?"x":"y";switch(H){case"%":R*="x"===z?t.percentToPxWidth:t.percentToPxHeight;break;case"px":break;default:R*=t[H+"ToPx"]}switch($){case"%":R*=1/("x"===z?t.percentToPxWidth:t.percentToPxHeight);break;case"px":break;default:R*=1/t[$+"ToPx"]}}switch(V){case"+":M=R+M;break;case"-":M=R-M;break;case"*":M*=R;break;case"/":M=R/M}o[P]={rootPropertyValue:O,startValue:R,currentValue:R,endValue:M,unitType:$,easing:B},h.debug&&console.log("tweensContainer ("+P+"): "+JSON.stringify(o[P]),i)}else h.debug&&console.log("Skipping ["+F+"] due to a lack of browser support.");function W(t,e){var n,i;return i=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,(function(t){return n=t,""})),n||(n=m.Values.getUnitType(t)),[i,n]}function q(){var t={myParent:i.parentNode||n.body,position:m.getPropertyValue(i,"position"),fontSize:m.getPropertyValue(i,"fontSize")},a=t.position===N.lastPosition&&t.myParent===N.lastParent,o=t.fontSize===N.lastFontSize;N.lastParent=t.myParent,N.lastPosition=t.position,N.lastFontSize=t.fontSize;var s={};if(o&&a)s.emToPx=N.lastEmToPx,s.percentToPxWidth=N.lastPercentToPxWidth,s.percentToPxHeight=N.lastPercentToPxHeight;else{var r=v(i).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");h.init(r),t.myParent.appendChild(r),d.each(["overflow","overflowX","overflowY"],(function(t,e){h.CSS.setPropertyValue(r,e,"hidden")})),h.CSS.setPropertyValue(r,"position",t.position),h.CSS.setPropertyValue(r,"fontSize",t.fontSize),h.CSS.setPropertyValue(r,"boxSizing","content-box"),d.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],(function(t,e){h.CSS.setPropertyValue(r,e,"100%")})),h.CSS.setPropertyValue(r,"paddingLeft","100em"),s.percentToPxWidth=N.lastPercentToPxWidth=(parseFloat(m.getPropertyValue(r,"width",null,!0))||1)/100,s.percentToPxHeight=N.lastPercentToPxHeight=(parseFloat(m.getPropertyValue(r,"height",null,!0))||1)/100,s.emToPx=N.lastEmToPx=(parseFloat(m.getPropertyValue(r,"paddingLeft"))||1)/100,t.myParent.removeChild(r)}return null===N.remToPx&&(N.remToPx=parseFloat(m.getPropertyValue(n.body,"fontSize"))||16),null===N.vwToPx&&(N.vwToPx=parseFloat(e.innerWidth)/100,N.vhToPx=parseFloat(e.innerHeight)/100),s.remToPx=N.remToPx,s.vwToPx=N.vwToPx,s.vhToPx=N.vhToPx,h.debug>=1&&console.log("Unit ratios: "+JSON.stringify(s),i),s}}o.element=i}o.element&&(m.Values.addClass(i,"velocity-animating"),L.push(o),""===a.queue&&(v(i).tweensContainer=o,v(i).opts=a),v(i).isAnimating=!0,y===b-1?(h.State.calls.length>1e4&&(h.State.calls=r(h.State.calls)),h.State.calls.push([L,s,a,null,I.resolver]),!1===h.State.isTicking&&(h.State.isTicking=!0,_())):y++)}!1!==h.mock&&(!0===h.mock?a.duration=a.delay=1:(a.duration*=parseFloat(h.mock)||1,a.delay*=parseFloat(h.mock)||1)),a.easing=w(a.easing,a.duration),a.begin&&!c.isFunction(a.begin)&&(a.begin=null),a.progress&&!c.isFunction(a.progress)&&(a.progress=null),a.complete&&!c.isFunction(a.complete)&&(a.complete=null),void 0!==a.display&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),"auto"===a.display&&(a.display=h.CSS.Values.getDisplayType(i))),void 0!==a.visibility&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&h.State.isMobile&&!h.State.isGingerbread,!1===a.queue?a.delay?setTimeout(l,a.delay):l():d.queue(i,a.queue,(function(t,e){if(!0===e)return I.promise&&I.resolver(s),!0;h.velocityQueueEntryFlag=!0,l()})),""!==a.queue&&"fx"!==a.queue||"inprogress"===d.queue(i)[0]||d.dequeue(i)}};(h=d.extend(g,h)).animate=g;var f=e.requestAnimationFrame||s;return h.State.isMobile||void 0===n.hidden||n.addEventListener("visibilitychange",(function(){n.hidden?(f=function(t){return setTimeout((function(){t(!0)}),16)},_()):f=e.requestAnimationFrame||s})),t.Velocity=h,t!==e&&(t.fn.velocity=g,t.fn.velocity.defaults=h.defaults),d.each(["Down","Up"],(function(t,e){h.Redirects["slide"+e]=function(t,n,i,a,o,s){var r=d.extend({},n),l=r.begin,c=r.complete,u={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},p={};void 0===r.display&&(r.display="Down"===e?"inline"===h.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),r.begin=function(){for(var n in l&&l.call(o,o),u){p[n]=t.style[n];var i=h.CSS.getPropertyValue(t,n);u[n]="Down"===e?[i,0]:[0,i]}p.overflow=t.style.overflow,t.style.overflow="hidden"},r.complete=function(){for(var e in p)t.style[e]=p[e];c&&c.call(o,o),s&&s.resolver(o)},h(t,u,r)}})),d.each(["In","Out"],(function(t,e){h.Redirects["fade"+e]=function(t,n,i,a,o,s){var r=d.extend({},n),l={opacity:"In"===e?1:0},c=r.complete;r.complete=i!==a-1?r.begin=null:function(){c&&c.call(o,o),s&&s.resolver(o)},void 0===r.display&&(r.display="In"===e?"auto":"none"),h(this,l,r)}})),h}function v(t){var e=d.data(t,"velocity");return null===e?void 0:e}function b(t){return function(e){return Math.round(e*t)*(1/t)}}function y(t,n,i,a){var o=4,s=.001,r=1e-7,l=10,d=11,c=1/(d-1),u="Float32Array"in e;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),i=Math.min(i,1),t=Math.max(t,0),i=Math.max(i,0);var p=u?new Float32Array(d):new Array(d);function m(t,e){return 1-3*e+3*t}function g(t,e){return 3*e-6*t}function f(t){return 3*t}function v(t,e,n){return((m(e,n)*t+g(e,n))*t+f(e))*t}function b(t,e,n){return 3*m(e,n)*t*t+2*g(e,n)*t+f(e)}function y(e,n){for(var a=0;a<o;++a){var s=b(n,t,i);if(0===s)return n;n-=(v(n,t,i)-e)/s}return n}function w(){for(var e=0;e<d;++e)p[e]=v(e*c,t,i)}function _(e,n,a){var o,s,d=0;do{(o=v(s=n+(a-n)/2,t,i)-e)>0?a=s:n=s}while(Math.abs(o)>r&&++d<l);return s}function C(e){for(var n=0,a=1,o=d-1;a!=o&&p[a]<=e;++a)n+=c;--a;var r=n+(e-p[a])/(p[a+1]-p[a])*c,l=b(r,t,i);return l>=s?y(e,r):0==l?r:_(e,n,n+c)}var k=!1;function S(){k=!0,t==n&&i==a||w()}var x=function(e){return k||S(),t===n&&i===a?e:0===e?0:1===e?1:v(C(e),n,a)};x.getControlPoints=function(){return[{x:t,y:n},{x:i,y:a}]};var I="generateBezier("+[t,n,i,a]+")";return x.toString=function(){return I},x}function w(t,e){var n=t;return c.isString(t)?h.Easings[t]||(n=!1):n=c.isArray(t)&&1===t.length?b.apply(null,t):c.isArray(t)&&2===t.length?p.apply(null,t.concat([e])):!(!c.isArray(t)||4!==t.length)&&y.apply(null,t),!1===n&&(n=h.Easings[h.defaults.easing]?h.defaults.easing:"swing"),n}function _(t){if(t)for(var e=(new Date).getTime(),n=0,i=h.State.calls.length;n<i;n++)if(h.State.calls[n]){var a=h.State.calls[n],o=a[0],s=a[2],r=a[3],l=!!r;r||(r=h.State.calls[n][3]=e-16);for(var u=Math.min((e-r)/s.duration,1),p=0,g=o.length;p<g;p++){var b=o[p],y=b.element;if(v(y)){var w=!1;for(var k in void 0!==s.display&&null!==s.display&&"none"!==s.display&&("flex"===s.display&&d.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],(function(t,e){m.setPropertyValue(y,"display",e)})),m.setPropertyValue(y,"display",s.display)),void 0!==s.visibility&&"hidden"!==s.visibility&&m.setPropertyValue(y,"visibility",s.visibility),b)if("element"!==k){var S,x=b[k],I=c.isString(x.easing)?h.Easings[x.easing]:x.easing;if(1===u)S=x.endValue;else if(S=x.startValue+(x.endValue-x.startValue)*I(u),!l&&S===x.currentValue)continue;if(x.currentValue=S,m.Hooks.registered[k]){var T=m.Hooks.getRoot(k),A=v(y).rootPropertyValueCache[T];A&&(x.rootPropertyValue=A)}var j=m.setPropertyValue(y,k,x.currentValue+(0===parseFloat(S)?"":x.unitType),x.rootPropertyValue,x.scrollData);m.Hooks.registered[k]&&(m.Normalizations.registered[T]?v(y).rootPropertyValueCache[T]=m.Normalizations.registered[T]("extract",null,j[1]):v(y).rootPropertyValueCache[T]=j[1]),"transform"===j[0]&&(w=!0)}s.mobileHA&&void 0===v(y).transformCache.translate3d&&(v(y).transformCache.translate3d="(0px, 0px, 0px)",w=!0),w&&m.flushTransformCache(y)}}void 0!==s.display&&"none"!==s.display&&(h.State.calls[n][2].display=!1),void 0!==s.visibility&&"hidden"!==s.visibility&&(h.State.calls[n][2].visibility=!1),s.progress&&s.progress.call(a[1],a[1],u,Math.max(0,r+s.duration-e),r),1===u&&C(n)}h.State.isTicking&&f(_)}function C(t,e){if(!h.State.calls[t])return!1;for(var n=h.State.calls[t][0],i=h.State.calls[t][1],a=h.State.calls[t][2],o=h.State.calls[t][4],s=!1,r=0,l=n.length;r<l;r++){var c=n[r].element;if(e||a.loop||("none"===a.display&&m.setPropertyValue(c,"display",a.display),"hidden"===a.visibility&&m.setPropertyValue(c,"visibility",a.visibility)),!0!==a.loop&&(void 0===d.queue(c)[1]||!/\.velocityQueueEntryFlag/i.test(d.queue(c)[1]))&&v(c)){v(c).isAnimating=!1,v(c).rootPropertyValueCache={};var u=!1;d.each(m.Lists.transforms3D,(function(t,e){var n=/^scale/.test(e)?1:0,i=v(c).transformCache[e];void 0!==v(c).transformCache[e]&&new RegExp("^\\("+n+"[^.]").test(i)&&(u=!0,delete v(c).transformCache[e])})),a.mobileHA&&(u=!0,delete v(c).transformCache.translate3d),u&&m.flushTransformCache(c),m.Values.removeClass(c,"velocity-animating")}if(!e&&a.complete&&!a.loop&&r===l-1)try{a.complete.call(i,i)}catch(t){setTimeout((function(){throw t}),1)}o&&!0!==a.loop&&o(i),!0!==a.loop||e||(d.each(v(c).tweensContainer,(function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360)})),h(c,"reverse",{loop:!0,delay:a.delay})),!1!==a.queue&&d.dequeue(c,a.queue)}h.State.calls[t]=!1;for(var p=0,g=h.State.calls.length;p<g;p++)if(!1!==h.State.calls[p]){s=!0;break}!1===s&&(h.State.isTicking=!1,delete h.State.calls,h.State.calls=[])}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)},"object"==typeof t.exports?t.exports=o():void 0===(a="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=a)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(40),__webpack_require__(23),__webpack_require__(1),__webpack_require__(5),__webpack_require__(75),__webpack_require__(10),__webpack_require__(32),__webpack_require__(280),__webpack_require__(35),__webpack_require__(58),__webpack_require__(208),__webpack_require__(22),__webpack_require__(34),__webpack_require__(6),__webpack_require__(2),__webpack_require__(43)],__WEBPACK_AMD_DEFINE_RESULT__=function(dojoRequire,dojo,dlang,darray,config,dom,dwindow,_Url,aspect,all,dates,Deferred,has,query,don,ready){function myEval(text){return eval("("+text+")")}new Date("X");var extendCnt=0;function getNameMap(t){var e=t._nameCaseMap,n=t.prototype;if(!e||e._extendCnt<extendCnt){for(var i in e=t._nameCaseMap={},n)"_"!==i.charAt(0)&&(e[i.toLowerCase()]=i);e._extendCnt=extendCnt}return e}aspect.after(dlang,"extend",(function(){extendCnt++}),!0);var _ctorMap={};function getCtor(t,e){var n=t.join();if(!_ctorMap[n]){for(var i=[],a=0,o=t.length;a<o;a++){var s=t[a];i[i.length]=_ctorMap[s]=_ctorMap[s]||dlang.getObject(s)||~s.indexOf("/")&&(e?e(s):dojoRequire(s))}var r=i.shift();_ctorMap[n]=i.length?r.createSubclass?r.createSubclass(i):r.extend.apply(r,i):r}return _ctorMap[n]}var parser={_clearCache:function(){extendCnt++,_ctorMap={}},_functionFromScript:function(t,e){var n="",i="",a=t.getAttribute(e+"args")||t.getAttribute("args"),o=t.getAttribute("with"),s=(a||"").split(/\s*,\s*/);return o&&o.length&&darray.forEach(o.split(/\s*,\s*/),(function(t){n+="with("+t+"){",i+="}"})),new Function(s,n+t.innerHTML+i)},instantiate:function(t,e,n){e=e||{};var i=((n=n||{}).scope||dojo._scopeName)+"Type",a="data-"+(n.scope||dojo._scopeName)+"-",o=a+"type",s=a+"mixins",r=[];return darray.forEach(t,(function(t){var n=i in e?e[i]:t.getAttribute(o)||t.getAttribute(i);if(n){var a=t.getAttribute(s),l=a?[n].concat(a.split(/\s*,\s*/)):[n];r.push({node:t,types:l})}})),this._instantiate(r,e,n)},_instantiate:function(t,e,n,i){var a=darray.map(t,(function(t){var i=t.ctor||getCtor(t.types,n.contextRequire);if(!i)throw new Error("Unable to resolve constructor for: '"+t.types.join()+"'");return this.construct(i,t.node,e,n,t.scripts,t.inherited)}),this);function o(t){return e._started||n.noStart||darray.forEach(t,(function(t){"function"!=typeof t.startup||t._started||t.startup()})),t}return i?all(a).then(o):o(a)},construct:function(t,e,n,i,a,o){var s,r=t&&t.prototype,l={};if((i=i||{}).defaults&&dlang.mixin(l,i.defaults),o&&dlang.mixin(l,o),has("dom-attributes-explicit"))s=e.attributes;else if(has("dom-attributes-specified-flag"))s=darray.filter(e.attributes,(function(t){return t.specified}));else{var d=(/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");s=darray.map(d.split(/\s+/),(function(t){var n=t.toLowerCase();return{name:t,value:"LI"==e.nodeName&&"value"==t||"enctype"==n?e.getAttribute(n):e.getAttributeNode(n).value}}))}var c=i.scope||dojo._scopeName,u="data-"+c+"-",h={};"dojo"!==c&&(h[u+"props"]="data-dojo-props",h[u+"type"]="data-dojo-type",h[u+"mixins"]="data-dojo-mixins",h[c+"type"]="dojoType",h[u+"id"]="data-dojo-id");for(var p,m,g,f=0,v=[];p=s[f++];){var b=p.name,y=b.toLowerCase(),w=p.value;switch(h[y]||y){case"data-dojo-type":case"dojotype":case"data-dojo-mixins":break;case"data-dojo-props":g=w;break;case"data-dojo-id":case"jsid":m=w;break;case"data-dojo-attach-point":case"dojoattachpoint":l.dojoAttachPoint=w;break;case"data-dojo-attach-event":case"dojoattachevent":l.dojoAttachEvent=w;break;case"class":l.class=e.className;break;case"style":l.style=e.style&&e.style.cssText;break;default:if(!(b in r))b=getNameMap(t)[y]||b;if(b in r)switch(typeof r[b]){case"string":l[b]=w;break;case"number":l[b]=w.length?Number(w):NaN;break;case"boolean":l[b]="false"!=w.toLowerCase();break;case"function":""===w||-1!=w.search(/[^\w\.]+/i)?l[b]=new Function(w):l[b]=dlang.getObject(w,!1)||new Function(w),v.push(b);break;default:var _=r[b];l[b]=_&&"length"in _?w?w.split(/\s*,\s*/):[]:_ instanceof Date?""==w?new Date(""):"now"==w?new Date:dates.fromISOString(w):_ instanceof _Url?dojo.baseUrl+w:myEval(w)}else l[b]=w}}for(var C=0;C<v.length;C++){var k=v[C].toLowerCase();e.removeAttribute(k),e[k]=null}if(g)try{g=myEval.call(i.propsThis,"{"+g+"}"),dlang.mixin(l,g)}catch(t){throw new Error(t.toString()+" in data-dojo-props='"+g+"'")}dlang.mixin(l,n),a||(a=t&&(t._noScript||r._noScript)?[]:query("> script[type^='dojo/']",e));var S=[],x=[],I=[],T=[];if(a)for(f=0;f<a.length;f++){var A=a[f];e.removeChild(A);var j=A.getAttribute(u+"event")||A.getAttribute("event"),E=A.getAttribute(u+"prop"),P=A.getAttribute(u+"method"),D=A.getAttribute(u+"advice"),N=A.getAttribute("type"),L=this._functionFromScript(A,u);j?"dojo/connect"==N?S.push({method:j,func:L}):"dojo/on"==N?T.push({event:j,func:L}):l[j]=L:"dojo/aspect"==N?S.push({method:P,advice:D,func:L}):"dojo/watch"==N?I.push({prop:E,func:L}):x.push(L)}var M=t.markupFactory||r.markupFactory,B=M?M(l,e,t):new t(l,e);function R(t){for(m&&dlang.setObject(m,t),f=0;f<S.length;f++)aspect[S[f].advice||"after"](t,S[f].method,dlang.hitch(t,S[f].func),!0);for(f=0;f<x.length;f++)x[f].call(t);for(f=0;f<I.length;f++)t.watch(I[f].prop,I[f].func);for(f=0;f<T.length;f++)don(t,T[f].event,T[f].func);return t}return B.then?B.then(R):R(B)},scan:function(t,e){var n=[],i=[],a={},o=(e.scope||dojo._scopeName)+"Type",s="data-"+(e.scope||dojo._scopeName)+"-",r=s+"type",l=s+"textdir",d=s+"mixins",c=t.firstChild,u=e.inherited;if(!u){function h(t,e){return t.getAttribute&&t.getAttribute(e)||t.parentNode&&h(t.parentNode,e)}for(var p in u={dir:h(t,"dir"),lang:h(t,"lang"),textDir:h(t,l)})u[p]||delete u[p]}var m,g,f={inherited:u};function v(t){if(!t.inherited){t.inherited={};var e=t.node,n=v(t.parent),i={dir:e.getAttribute("dir")||n.dir,lang:e.getAttribute("lang")||n.lang,textDir:e.getAttribute(l)||n.textDir};for(var a in i)i[a]&&(t.inherited[a]=i[a])}return t.inherited}for(;;)if(c)if(1==c.nodeType)if(m&&"script"==c.nodeName.toLowerCase())(b=c.getAttribute("type"))&&/^dojo\/\w/i.test(b)&&m.push(c),c=c.nextSibling;else if(g)c=c.nextSibling;else{var b=c.getAttribute(r)||c.getAttribute(o),y=c.firstChild;if(b||y&&(3!=y.nodeType||y.nextSibling)){var w,_=null;if(b){var C=c.getAttribute(d),k=C?[b].concat(C.split(/\s*,\s*/)):[b];try{_=getCtor(k,e.contextRequire)}catch(t){}_||darray.forEach(k,(function(t){~t.indexOf("/")&&!a[t]&&(a[t]=!0,i[i.length]=t)}));var S=_&&!_.prototype._noScript?[]:null;(w={types:k,ctor:_,parent:f,node:c,scripts:S}).inherited=v(w),n.push(w)}else w={node:c,scripts:m,parent:f};m=S,g=c.stopParser||_&&_.prototype.stopParser&&!e.template,f=w,c=y}else c=c.nextSibling}else c=c.nextSibling;else{if(!f||!f.node)break;c=f.node.nextSibling,g=!1,m=(f=f.parent).scripts}var x=new Deferred;i.length?(has("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+i.join(", ")),(e.contextRequire||dojoRequire)(i,(function(){x.resolve(darray.filter(n,(function(t){if(!t.ctor)try{t.ctor=getCtor(t.types,e.contextRequire)}catch(t){}for(var n=t.parent;n&&!n.types;)n=n.parent;var i=t.ctor&&t.ctor.prototype;return t.instantiateChildren=!(i&&i.stopParser&&!e.template),t.instantiate=!n||n.instantiate&&n.instantiateChildren,t.instantiate})))}))):x.resolve(n);return x.promise},_require:function(t,e){var n=myEval("{"+t.innerHTML+"}"),i=[],a=[],o=new Deferred,s=e&&e.contextRequire||dojoRequire;for(var r in n)i.push(r),a.push(n[r]);return s(a,(function(){for(var t=0;t<i.length;t++)dlang.setObject(i[t],arguments[t]);o.resolve(arguments)})),o.promise},_scanAmd:function(t,e){var n=new Deferred,i=n.promise;n.resolve(!0);var a=this;return query("script[type='dojo/require']",t).forEach((function(t){i=i.then((function(){return a._require(t,e)})),t.parentNode.removeChild(t)})),i},parse:function(t,e){t&&"string"!=typeof t&&!("nodeType"in t)&&(t=(e=t).rootNode);var n=t?dom.byId(t):dwindow.body(),i=(e=e||{}).template?{template:!0}:{},a=[],o=this,s=this._scanAmd(n,e).then((function(){return o.scan(n,e)})).then((function(t){return o._instantiate(t,i,e,!0)})).then((function(t){return a=a.concat(t)})).otherwise((function(t){throw console.error("dojo/parser::parse() error",t),t}));return dlang.mixin(a,s),a}};return dojo.parser=parser,config.parseOnLoad&&ready(100,parser,"parse"),parser}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,n){var i,a;i=[n(1)],void 0===(a=function(t){var e=t.getObject("dojox.html.entities",!0),n=function(t,e){var n,i;if(e._encCache&&e._encCache.regexp&&e._encCache.mapper&&e.length==e._encCache.length)n=e._encCache.mapper,i=e._encCache.regexp;else{var a;for(n={},i=["["],a=0;a<e.length;a++)n[e[a][0]]="&"+e[a][1]+";",i.push(e[a][0]);i.push("]"),i=new RegExp(i.join(""),"g"),e._encCache={mapper:n,regexp:i,length:e.length}}return t=t.replace(i,(function(t){return n[t]}))},i=function(t,e){var n,i;if(e._decCache&&e._decCache.regexp&&e._decCache.mapper&&e.length==e._decCache.length)n=e._decCache.mapper,i=e._decCache.regexp;else{var a;for(n={},i=["("],a=0;a<e.length;a++){var o="&"+e[a][1]+";";a&&i.push("|"),n[o]=e[a][0],i.push(o)}i.push(")"),i=new RegExp(i.join(""),"g"),e._decCache={mapper:n,regexp:i,length:e.length}}return t=t.replace(i,(function(t){return n[t]}))};return e.html=[["&","amp"],['"',"quot"],["<","lt"],[">","gt"],[" ","nbsp"]],e.latin=[["¡","iexcl"],["¢","cent"],["£","pound"],["€","euro"],["¤","curren"],["¥","yen"],["¦","brvbar"],["§","sect"],["¨","uml"],["©","copy"],["ª","ordf"],["«","laquo"],["¬","not"],["­","shy"],["®","reg"],["¯","macr"],["°","deg"],["±","plusmn"],["²","sup2"],["³","sup3"],["´","acute"],["µ","micro"],["¶","para"],["·","middot"],["¸","cedil"],["¹","sup1"],["º","ordm"],["»","raquo"],["¼","frac14"],["½","frac12"],["¾","frac34"],["¿","iquest"],["À","Agrave"],["Á","Aacute"],["Â","Acirc"],["Ã","Atilde"],["Ä","Auml"],["Å","Aring"],["Æ","AElig"],["Ç","Ccedil"],["È","Egrave"],["É","Eacute"],["Ê","Ecirc"],["Ë","Euml"],["Ì","Igrave"],["Í","Iacute"],["Î","Icirc"],["Ï","Iuml"],["Ð","ETH"],["Ñ","Ntilde"],["Ò","Ograve"],["Ó","Oacute"],["Ô","Ocirc"],["Õ","Otilde"],["Ö","Ouml"],["×","times"],["Ø","Oslash"],["Ù","Ugrave"],["Ú","Uacute"],["Û","Ucirc"],["Ü","Uuml"],["Ý","Yacute"],["Þ","THORN"],["ß","szlig"],["à","agrave"],["á","aacute"],["â","acirc"],["ã","atilde"],["ä","auml"],["å","aring"],["æ","aelig"],["ç","ccedil"],["è","egrave"],["é","eacute"],["ê","ecirc"],["ë","euml"],["ì","igrave"],["í","iacute"],["î","icirc"],["ï","iuml"],["ð","eth"],["ñ","ntilde"],["ò","ograve"],["ó","oacute"],["ô","ocirc"],["õ","otilde"],["ö","ouml"],["÷","divide"],["ø","oslash"],["ù","ugrave"],["ú","uacute"],["û","ucirc"],["ü","uuml"],["ý","yacute"],["þ","thorn"],["ÿ","yuml"],["ƒ","fnof"],["Α","Alpha"],["Β","Beta"],["Γ","Gamma"],["Δ","Delta"],["Ε","Epsilon"],["Ζ","Zeta"],["Η","Eta"],["Θ","Theta"],["Ι","Iota"],["Κ","Kappa"],["Λ","Lambda"],["Μ","Mu"],["Ν","Nu"],["Ξ","Xi"],["Ο","Omicron"],["Π","Pi"],["Ρ","Rho"],["Σ","Sigma"],["Τ","Tau"],["Υ","Upsilon"],["Φ","Phi"],["Χ","Chi"],["Ψ","Psi"],["Ω","Omega"],["α","alpha"],["β","beta"],["γ","gamma"],["δ","delta"],["ε","epsilon"],["ζ","zeta"],["η","eta"],["θ","theta"],["ι","iota"],["κ","kappa"],["λ","lambda"],["μ","mu"],["ν","nu"],["ξ","xi"],["ο","omicron"],["π","pi"],["ρ","rho"],["ς","sigmaf"],["σ","sigma"],["τ","tau"],["υ","upsilon"],["φ","phi"],["χ","chi"],["ψ","psi"],["ω","omega"],["ϑ","thetasym"],["ϒ","upsih"],["ϖ","piv"],["•","bull"],["…","hellip"],["′","prime"],["″","Prime"],["‾","oline"],["⁄","frasl"],["℘","weierp"],["ℑ","image"],["ℜ","real"],["™","trade"],["ℵ","alefsym"],["←","larr"],["↑","uarr"],["→","rarr"],["↓","darr"],["↔","harr"],["↵","crarr"],["⇐","lArr"],["⇑","uArr"],["⇒","rArr"],["⇓","dArr"],["⇔","hArr"],["∀","forall"],["∂","part"],["∃","exist"],["∅","empty"],["∇","nabla"],["∈","isin"],["∉","notin"],["∋","ni"],["∏","prod"],["∑","sum"],["−","minus"],["∗","lowast"],["√","radic"],["∝","prop"],["∞","infin"],["∠","ang"],["∧","and"],["∨","or"],["∩","cap"],["∪","cup"],["∫","int"],["∴","there4"],["∼","sim"],["≅","cong"],["≈","asymp"],["≠","ne"],["≡","equiv"],["≤","le"],["≥","ge"],["⊂","sub"],["⊃","sup"],["⊄","nsub"],["⊆","sube"],["⊇","supe"],["⊕","oplus"],["⊗","otimes"],["⊥","perp"],["⋅","sdot"],["⌈","lceil"],["⌉","rceil"],["⌊","lfloor"],["⌋","rfloor"],["〈","lang"],["〉","rang"],["◊","loz"],["♠","spades"],["♣","clubs"],["♥","hearts"],["♦","diams"],["Œ","OElig"],["œ","oelig"],["Š","Scaron"],["š","scaron"],["Ÿ","Yuml"],["ˆ","circ"],["˜","tilde"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["–","ndash"],["—","mdash"],["‘","lsquo"],["’","rsquo"],["‚","sbquo"],["“","ldquo"],["”","rdquo"],["„","bdquo"],["†","dagger"],["‡","Dagger"],["‰","permil"],["‹","lsaquo"],["›","rsaquo"]],e.encode=function(t,i){return t&&(i?t=n(t,i):(t=n(t,e.html),t=n(t,e.latin))),t},e.decode=function(t,n){return t&&(n?t=i(t,n):(t=i(t,e.html),t=i(t,e.latin))),t},e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(12),n(11),n(20),n(5),n(0),n(1),n(23)],void 0===(a=function(t,e,n,i,a,o,s){return o.extend(t,{waiRole:"",waiState:""}),a("dijit._Templated",[e,n],{widgetsInTemplate:!1,constructor:function(){s.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(t,e){var n=this.inherited(arguments),a=e(t,"waiRole");a&&t.setAttribute("role",a);var o=e(t,"waiState");return o&&i.forEach(o.split(/\s*,\s*/),(function(e){if(-1!=e.indexOf("-")){var n=e.split("-");t.setAttribute("aria-"+n[0],n[1])}})),n}})}.apply(e,i))||(t.exports=a)},function(t,e){var n=window.require.bind(null);n.toUrl=window.require.toUrl,n.toAbsMid=window.require.toAbsMid,n.isXdUrl=window.require.isXdUrl,n.syncLoadNls=function(){},t.exports=n},function(t,e,n){var i,a;i=[n(5),n(0),n(7),n(3),n(27),n(83),n(30),n(1),n(2),n(33),n(432),n(179),n(211),n(113),n(212),n(164),n(340),n(14),n(528),n(290)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b){var y=e("dijit.form._SelectMenu",h,{autoFocus:!0,buildRendering:function(){this.inherited(arguments),this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments),this.own(l(this.domNode,"selectstart",(function(t){t.preventDefault(),t.stopPropagation()})))},focus:function(){var e=!1,n=this.parentWidget.value;r.isArray(n)&&(n=n[n.length-1]),n&&t.forEach(this.parentWidget._getChildren(),(function(t){t.option&&n===t.option.value&&(e=!0,this.focusChild(t,!1))}),this),e||this.inherited(arguments),window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.setScreenState({state:"select",backAction:r.hitch(this,this._triggerExternalClose)})},_triggerExternalClose:function(){this.parentWidget.closeDropDown()},onClose:function(){window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.removeStateQueue({state:"select"}),this.inherited(arguments)}}),w=e("dijit.form.Select",[c,u,f],{baseClass:"dijitSelect dijitValidationTextBox",templateString:b,_buttonInputDisabled:d("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){if(this.inherited(arguments),this.options.length&&!this.value&&this.srcNodeRef){var t=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[t>=0?t:0].value)}this.dropDown=new y({id:this.id+"_menu",parentWidget:this}),i.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(t){if(t.value||t.label){var e=r.hitch(this,"_setValueAttr",t),n=new p({option:t,label:("text"===this.labelType?(t.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):t.label)||this.emptyLabel,onClick:e,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:t.disabled||!1});return n.focusNode.setAttribute("role","option"),n}return new m({ownerDocument:this.ownerDocument})},_addOptionItem:function(t){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(t))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(t){}},focusChild:function(t){t&&this.set("value",t.option)},_getFirst:function(){var t=this._getChildren();return t.length?t[0]:null},_getLast:function(){var t=this._getChildren();return t.length?t[t.length-1]:null},childSelector:function(t){return(t=v.byNode(t))&&t.getParent()==this.dropDown},onKeyboardSearch:function(t,e,n,i){t&&this.focusChild(t)},_loadChildren:function(e){if(!0===e)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{t.forEach(this._getChildren(),(function(t){t.destroyRecursive()}));var n=new p({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(n)}else this._updateSelection();this._isLoaded=!1,this._childrenLoaded=!0,this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments),this._refreshState()},_setValueAttr:function(t){this.inherited(arguments),n.set(this.valueNode,"value",this.get("value")),this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(t){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(t){this._set("required",t),this.focusNode.setAttribute("aria-required",t),this._refreshState()},_setOptionsAttr:function(t){this._isLoaded=!1,this._set("options",t)},_setDisplay:function(t){var e=("text"===this.labelType?(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):t)||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+e+"</span>"},validate:function(t){var e=this.disabled||this.isValid(t);this._set("state",e?"":this._hasBeenBlurred?"Error":"Incomplete"),this.focusNode.setAttribute("aria-invalid",e?"false":"true");var n=e?"":this._missingMsg;return n&&this.focused&&this._hasBeenBlurred?g.show(n,this.domNode,this.tooltipPosition,!this.isLeftToRight()):g.hide(this.domNode),this._set("message",n),e},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments),g.hide(this.domNode),this._refreshState()},postMixInProperties:function(){this.inherited(arguments),this._missingMsg=o.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments),this.own(l(this.domNode,"selectstart",(function(t){t.preventDefault(),t.stopPropagation()}))),this.domNode.setAttribute("aria-expanded","false");var t=this._keyNavCodes;delete t[s.LEFT_ARROW],delete t[s.RIGHT_ARROW]},_setStyleAttr:function(t){this.inherited(arguments),i.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(t){this._loadChildren(!0),this._isLoaded=!0,t()},destroy:function(t){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(t),delete this.dropDown),g.hide(this.domNode),this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){g.hide(this.domNode),this.inherited(arguments),this.validate(!1)}});function _(t){return function(e){this._isLoaded?this.inherited(t,arguments):this.loadDropDown(r.hitch(this,t,e))}}return w._Menu=y,w.prototype._onContainerKeydown=_("_onContainerKeydown"),w.prototype._onContainerKeypress=_("_onContainerKeypress"),w}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23)],void 0===(a=function(t){return t.dijit}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/ready")},function(t,e,n){var i,a;i=[n(6),n(1),n(5)],void 0===(a=function(t,e,n){var i=t.NodeList;return e.extend(i,{_buildArrayFromCallback:function(t){for(var e=[],n=0;n<this.length;n++){var i=t.call(this[n],this[n],e);i&&(e=e.concat(i))}return e},_getUniqueAsNodeList:function(t){for(var e,i=[],a=0;e=t[a];a++)1==e.nodeType&&-1==n.indexOf(i,e)&&i.push(e);return this._wrap(i,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(e,n){var i=this._getUniqueAsNodeList(e);return(i=n?t._filterResult(i,n):i)._stash(this)},_getRelatedUniqueNodes:function(t,e){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(e),t)},children:function(t){return this._getRelatedUniqueNodes(t,(function(t,n){return e._toArray(t.childNodes)}))},closest:function(e,n){return this._getRelatedUniqueNodes(null,(function(i,a){do{if(t._filterResult([i],e,n).length)return i}while(i!=n&&(i=i.parentNode)&&1==i.nodeType);return null}))},parent:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){return t.parentNode}))},parents:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){for(var n=[];t.parentNode;)t=t.parentNode,n.push(t);return n}))},siblings:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){for(var n=[],i=t.parentNode&&t.parentNode.childNodes,a=0;a<i.length;a++)i[a]!=t&&n.push(i[a]);return n}))},next:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){for(var n=t.nextSibling;n&&1!=n.nodeType;)n=n.nextSibling;return n}))},nextAll:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){for(var n=[],i=t;i=i.nextSibling;)1==i.nodeType&&n.push(i);return n}))},prev:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){for(var n=t.previousSibling;n&&1!=n.nodeType;)n=n.previousSibling;return n}))},prevAll:function(t){return this._getRelatedUniqueNodes(t,(function(t,e){for(var n=[],i=t;i=i.previousSibling;)1==i.nodeType&&n.push(i);return n}))},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter((function(t,e){return e%2!=0}))},odd:function(){return this.filter((function(t,e){return e%2==0}))}}),i}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/dom-form")},function(t,e){t.exports=window.require("dojo/when")},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(46)],void 0===(a=function(t,e,n,i){return t("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;return e[t]?e[t]:e[t]={s:"_"+t+"Setter",g:"_"+t+"Getter"}},postscript:function(t){t&&this.set(t)},_get:function(t,e){return"function"==typeof this[e.g]?this[e.g]():this[t]},get:function(t){return this._get(t,this._getAttrNames(t))},set:function(t,e){if("object"==typeof t){for(var n in t)t.hasOwnProperty(n)&&"_watchCallbacks"!=n&&this.set(n,t[n]);return this}var a,o=this._getAttrNames(t),s=this._get(t,o),r=this[o.s];if("function"==typeof r?a=r.apply(this,Array.prototype.slice.call(arguments,1)):this[t]=e,this._watchCallbacks){var l=this;i(a,(function(){l._watchCallbacks(t,s,e)}))}return this},_changeAttrValue:function(t,e){var n=this.get(t);return this[t]=e,this._watchCallbacks&&this._watchCallbacks(t,n,e),this},watch:function(t,e){var i=this._watchCallbacks;if(!i){var a=this;i=this._watchCallbacks=function(t,e,n,o){var s=function(i){if(i)for(var o=0,s=(i=i.slice()).length;o<s;o++)i[o].call(a,t,e,n)};s(i["_"+t]),o||s(i["*"])}}e||"function"!=typeof t?t="_"+t:(e=t,t="*");var o=i[t];"object"!=typeof o&&(o=i[t]=[]),o.push(e);var s={};return s.unwatch=s.remove=function(){var t=n.indexOf(o,e);t>-1&&o.splice(t,1)},s}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(6),n(1),n(5),n(4),n(7),n(81)],void 0===(a=function(t,e,n,i,a){var o=t.NodeList;function s(t){for(;t.childNodes[0]&&1==t.childNodes[0].nodeType;)t=t.childNodes[0];return t}function r(t,e){return"string"==typeof t?11==(t=i.toDom(t,e&&e.ownerDocument)).nodeType&&(t=t.childNodes[0]):1==t.nodeType&&t.parentNode&&(t=t.cloneNode(!1)),t}return e.extend(o,{_placeMultiple:function(e,n){for(var a="string"==typeof e||e.nodeType?t(e):e,o=[],s=0;s<a.length;s++)for(var r,l=a[s],d=this.length,c=d-1;r=this[c];c--)s>0&&(r=this._cloneNode(r),o.unshift(r)),c==d-1?i.place(r,l,n):l.parentNode.insertBefore(r,l),l=r;return o.length&&(o.unshift(0),o.unshift(this.length-1),Array.prototype.splice.apply(this,o)),this},innerHTML:function(t){return arguments.length?this.addContent(t,"only"):this[0].innerHTML},text:function(t){if(arguments.length){for(var e,n=0;e=this[n];n++)1==e.nodeType&&a.set(e,"textContent",t);return this}var i="";for(n=0;e=this[n];n++)i+=a.get(e,"textContent");return i},val:function(t){if(arguments.length){for(var i,a=e.isArray(t),o=0;i=this[o];o++){var s=i.nodeName.toUpperCase(),r=i.type,l=a?t[o]:t;if("SELECT"==s)for(var d=i.options,c=0;c<d.length;c++){var u=d[c];i.multiple?u.selected=-1!=n.indexOf(t,u.value):u.selected=u.value==l}else"checkbox"==r||"radio"==r?i.checked=i.value==l:i.value=l}return this}if((i=this[0])&&1==i.nodeType){if(t=i.value||"","SELECT"==i.nodeName.toUpperCase()&&i.multiple){for(t=[],d=i.options,c=0;c<d.length;c++)(u=d[c]).selected&&t.push(u.value);t.length||(t=null)}return t}},append:function(t){return this.addContent(t,"last")},appendTo:function(t){return this._placeMultiple(t,"last")},prepend:function(t){return this.addContent(t,"first")},prependTo:function(t){return this._placeMultiple(t,"first")},after:function(t){return this.addContent(t,"after")},insertAfter:function(t){return this._placeMultiple(t,"after")},before:function(t){return this.addContent(t,"before")},insertBefore:function(t){return this._placeMultiple(t,"before")},remove:o.prototype.orphan,wrap:function(t){if(this[0]){t=r(t,this[0]);for(var e,n=0;e=this[n];n++){var i=this._cloneNode(t);e.parentNode&&e.parentNode.replaceChild(i,e),s(i).appendChild(e)}}return this},wrapAll:function(t){if(this[0]){t=r(t,this[0]),this[0].parentNode.replaceChild(t,this[0]);for(var e,n=s(t),i=0;e=this[i];i++)n.appendChild(e)}return this},wrapInner:function(t){if(this[0]){t=r(t,this[0]);for(var n=0;n<this.length;n++){var i=this._cloneNode(t);this._wrap(e._toArray(this[n].childNodes),null,this._NodeListCtor).wrapAll(i)}}return this},replaceWith:function(t){t=this._normalize(t,this[0]);for(var e,n=0;e=this[n];n++)this._place(t,e,"before",n>0),e.parentNode.removeChild(e);return this},replaceAll:function(e){for(var n,i=t(e),a=this._normalize(this,this[0]),o=0;n=i[o];o++)this._place(a,n,"before",o>0),n.parentNode.removeChild(n);return this},clone:function(){for(var t=[],e=0;e<this.length;e++)t.push(this._cloneNode(this[e]));return this._wrap(t,this,this._NodeListCtor)}}),o.prototype.html||(o.prototype.html=o.prototype.innerHTML),o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(33),n(32),n(10),n(27),n(9),n(4)],void 0===(a=function(t,e,n,i,a,o,s){e.add("rtl-adjust-position-for-verticalScrollBar",(function(t,e){var i=n.body(e),o=s.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},i,"last"),r=s.create("div",{style:{overflow:"hidden",direction:"ltr"}},o,"last"),l=0!=a.position(r).x;return o.removeChild(r),i.removeChild(o),l})),e.add("position-fixed-support",(function(t,e){var i=n.body(e),o=s.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},i,"last"),r=s.create("span",{style:{position:"fixed",left:"0",top:"0"}},o,"last"),l=a.position(r).x!=a.position(o).x;return o.removeChild(r),i.removeChild(o),l}));var r={getBox:function(t){var i,o,s="BackCompat"==(t=t||n.doc).compatMode?n.body(t):t.documentElement,l=a.docScroll(t);if(e("touch")){var d=r.get(t);i=d.innerWidth||s.clientWidth,o=d.innerHeight||s.clientHeight}else i=s.clientWidth,o=s.clientHeight;return{l:l.x,t:l.y,w:i,h:o}},get:function(t){if(e("ie")&&r!==document.parentWindow){t.parentWindow.execScript("document._parentWindow = window;","Javascript");var n=t._parentWindow;return t._parentWindow=null,n}return t.parentWindow||t.defaultView},scrollIntoView:function(t,s){try{var r=(t=i.byId(t)).ownerDocument||n.doc,l=n.body(r),d=r.documentElement||l.parentNode,c=e("ie"),u=e("webkit");if(t==l||t==d)return;if(!(e("mozilla")||c||u||e("opera")||e("trident"))&&"scrollIntoView"in t)return void t.scrollIntoView(!1);var h="BackCompat"==r.compatMode,p=Math.min(l.clientWidth||d.clientWidth,d.clientWidth||l.clientWidth),m=Math.min(l.clientHeight||d.clientHeight,d.clientHeight||l.clientHeight),g=u||h?l:d,f=s||a.position(t),v=t.parentNode,b=function(t){return!(c<=6||7==c&&h)&&(e("position-fixed-support")&&"fixed"==o.get(t,"position").toLowerCase())},y=this,w=function(t,e,n){"BODY"==t.tagName||"HTML"==t.tagName?y.get(t.ownerDocument).scrollBy(e,n):(e&&(t.scrollLeft+=e),n&&(t.scrollTop+=n))};if(b(t))return;for(;v;){v==l&&(v=g);var _=a.position(v),C=b(v),k="rtl"==o.getComputedStyle(v).direction.toLowerCase();if(v==g)_.w=p,_.h=m,g==d&&(c||e("trident"))&&k&&(_.x+=g.offsetWidth-_.w),(_.x<0||!c||c>=9||e("trident"))&&(_.x=0),(_.y<0||!c||c>=9||e("trident"))&&(_.y=0);else{var S=a.getPadBorderExtents(v);_.w-=S.w,_.h-=S.h,_.x+=S.l,_.y+=S.t;var x=v.clientWidth,I=_.w-x;x>0&&I>0&&(k&&e("rtl-adjust-position-for-verticalScrollBar")&&(_.x+=I),_.w=x),x=v.clientHeight,I=_.h-x,x>0&&I>0&&(_.h=x)}C&&(_.y<0&&(_.h+=_.y,_.y=0),_.x<0&&(_.w+=_.x,_.x=0),_.y+_.h>m&&(_.h=m-_.y),_.x+_.w>p&&(_.w=p-_.x));var T,A,j=f.x-_.x,E=f.y-_.y,P=j+f.w-_.w,D=E+f.h-_.h;P*j>0&&(v.scrollLeft||v==g||v.scrollWidth>v.offsetHeight)&&(T=Math[j<0?"max":"min"](j,P),k&&(8==c&&!h||c>=9||e("trident"))&&(T=-T),A=v.scrollLeft,w(v,T,0),T=v.scrollLeft-A,f.x-=T),D*E>0&&(v.scrollTop||v==g||v.scrollHeight>v.offsetHeight)&&(T=Math.ceil(Math[E<0?"max":"min"](E,D)),A=v.scrollTop,w(v,0,T),T=v.scrollTop-A,f.y-=T),v=v!=g&&!C&&v.parentElement}}catch(e){console.error("scrollIntoView: "+e),t.scrollIntoView(!1)}}};return t.setObject("dojo.window",r),r}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return Array.isArray}.apply(e,[]))||(t.exports=i)},function(t,e){t.exports=window.require("dojo/io-query")},function(t,e,n){var i;void 0===(i=function(){var t={capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},toPlural:function(t,e){return 1===parseInt(e,10)?t:t+"s"},isValidEmailAddress:function(t){return/^[A-Z0-9._-]+@[A-Z0-9.-]+\.[A-Z0-9.-]+$/i.test(t)},isUrl:function(t){var e,n=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?|\[|\])*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?|)*)?$/i.test(t);try{new URL(t),e=!0}catch(t){e=!1}return n||e},getUrlHostname:function(t){var e=document.createElement("a");return e.href=t,e.hostname},getUrlPath:function(t){var e=document.createElement("a");return e.href=t,e.pathname},isMergeField:function(t){return/^\*\|\w+(?:\:[^\|]*)?\|\*$/.test(t)},toMergeToken:function(e){return t.isMergeField(e)?e.slice(2,-2):""},getSymbolLength:function(t){return t?t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length:0},emojiRegex:/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,stripEmojis:function(t){return t.replace(this.emojiRegex,"")},getEmojiCount:function(t){return((t||"").match(this.emojiRegex)||[]).length},getPunctuationCount:function(t){return((t||"").match(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g)||[]).length},getWordCount:function(t){return t.split(" ").length},truncate:function(t,e,n){return t&&t.length>e?n?t.substring(0,e)+"...":t.substring(0,e):t},listify:function(t){return 1===t.length?t[0]:2===t.length?t[0]+" and "+t[1]:t.map((function(e,n){var i=n===t.length-1,a=n===t.length-2;return i?e:a?e+", and ":e+", "})).join("")}};return t}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(23),n(35),n(10),n(3),n(1),n(2),n(34),n(66),n(85),n(32)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){var c,u,h,p,m,g,f,v,b,y,w=s("ios")<5,_=s("pointer-events")||s("MSPointer"),C=function(){var t={};for(var e in{down:1,move:1,up:1,cancel:1,over:1,out:1})t[e]=s("MSPointer")?"MSPointer"+e.charAt(0).toUpperCase()+e.slice(1):"pointer"+e;return t}(),k=s("touch-events"),S=!1;function x(t,e,n){return _&&n?function(t,e){return o(t,n,e)}:k?function(n,i){var a=o(n,e,(function(t){i.call(this,t),b=(new Date).getTime()})),s=o(n,t,(function(t){(!b||(new Date).getTime()>b+1e3)&&i.call(this,t)}));return{remove:function(){a.remove(),s.remove()}}}:function(e,n){return o(e,t,n)}}function I(t,e,a){if(!r.isRight(t)){var s=function(t){do{if(void 0!==t.dojoClick)return t}while(t=t.parentNode)}(t.target);if((u=!t.target.disabled&&s&&s.dojoClick)&&(h=(S="useTarget"==u)?s:t.target,S&&t.preventDefault(),p=t.changedTouches?t.changedTouches[0].pageX-d.global.pageXOffset:t.clientX,m=t.changedTouches?t.changedTouches[0].pageY-d.global.pageYOffset:t.clientY,g=("object"==typeof u?u.x:"number"==typeof u?u:0)||4,f=("object"==typeof u?u.y:"number"==typeof u?u:0)||4,!c)){function l(t){u=S?n.isDescendant(d.doc.elementFromPoint(t.changedTouches?t.changedTouches[0].pageX-d.global.pageXOffset:t.clientX,t.changedTouches?t.changedTouches[0].pageY-d.global.pageYOffset:t.clientY),h):u&&(t.changedTouches?t.changedTouches[0].target:t.target)==h&&Math.abs((t.changedTouches?t.changedTouches[0].pageX-d.global.pageXOffset:t.clientX)-p)<=g&&Math.abs((t.changedTouches?t.changedTouches[0].pageY-d.global.pageYOffset:t.clientY)-m)<=f}function b(t){d.doc.addEventListener(t,(function(e){var n=e.target;if(u&&!e._dojo_click&&(new Date).getTime()<=v+1e3&&("INPUT"!=n.tagName||!i.contains(n,"dijitOffScreen"))&&(e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),"click"==t&&("INPUT"!=n.tagName||"radio"==n.type&&(i.contains(n,"dijitCheckBoxInput")||i.contains(n,"mblRadioButton"))||"checkbox"==n.type&&(i.contains(n,"dijitCheckBoxInput")||i.contains(n,"mblCheckBox")))&&"TEXTAREA"!=n.tagName&&"AUDIO"!=n.tagName&&"VIDEO"!=n.tagName)){var a=null;try{if("A"==n.tagName){for(var o=n;(o=o.parentElement)&&!o.classList.contains("dijitMenu")&&!o.classList.contains("dijitButtonNode"););a=o}}catch(t){}a||e.preventDefault()}}),!0)}c=!0,d.doc.addEventListener(e,(function(t){r.isRight(t)||(l(t),S&&t.preventDefault())}),!0),d.doc.addEventListener(a,(function(t){if(!r.isRight(t)&&(l(t),u)){v=(new Date).getTime();var e=S?h:t.target;"LABEL"===e.tagName&&(e=n.byId(e.getAttribute("for"))||e);var i=t.changedTouches?t.changedTouches[0]:t;function a(e){var n=document.createEvent("MouseEvents");return n._dojo_click=!0,n.initMouseEvent(e,!0,!0,t.view,t.detail,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),n}var s=a("mousedown"),d=a("mouseup"),c=a("click");setTimeout((function(){o.emit(e,"mousedown",s),o.emit(e,"mouseup",d),o.emit(e,"click",c),v=(new Date).getTime()}),0)}}),!0),b("click"),b("mousedown"),b("mouseup")}}}s("touch")&&l(_?function(){d.doc.addEventListener(C.down,(function(t){I(t,C.move,C.up)}),!0)}:function(){function t(t){var e=a.delegate(t,{bubbles:!0});return s("ios")>=6&&(e.touches=t.touches,e.altKey=t.altKey,e.changedTouches=t.changedTouches,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.targetTouches=t.targetTouches),e}y=d.body(),d.doc.addEventListener("touchstart",(function(t){b=(new Date).getTime();var e=y;y=t.target,o.emit(e,"dojotouchout",{relatedTarget:y,bubbles:!0}),o.emit(y,"dojotouchover",{relatedTarget:e,bubbles:!0}),I(t,"touchmove","touchend")}),!0),o(d.doc,"touchmove",(function(e){b=(new Date).getTime();var n=d.doc.elementFromPoint(e.pageX-(w?0:d.global.pageXOffset),e.pageY-(w?0:d.global.pageYOffset));n&&(y!==n&&(o.emit(y,"dojotouchout",{relatedTarget:n,bubbles:!0}),o.emit(n,"dojotouchover",{relatedTarget:y,bubbles:!0}),y=n),o.emit(n,"dojotouchmove",t(e))||e.preventDefault())})),o(d.doc,"touchend",(function(e){b=(new Date).getTime();var n=d.doc.elementFromPoint(e.pageX-(w?0:d.global.pageXOffset),e.pageY-(w?0:d.global.pageYOffset))||d.body();o.emit(n,"dojotouchend",t(e))}))});var T={press:x("mousedown","touchstart",C.down),move:x("mousemove","dojotouchmove",C.move),release:x("mouseup","dojotouchend",C.up),cancel:x(r.leave,"touchcancel",_?C.cancel:null),over:x("mouseover","dojotouchover",C.over),out:x("mouseout","dojotouchout",C.out),enter:r._eventHandler(x("mouseover","dojotouchover",C.over)),leave:r._eventHandler(x("mouseout","dojotouchout",C.out))};return t.touch=T,T}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/fx")},function(t,e,n){var i,a;i=[n(1),n(71),n(23),n(5),n(35),n(54),n(10),n(9),n(27),n(43),n(40)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u){i.isAsync||c(0,(function(){Promise.resolve().then((function(){n(144)})).catch(n.oe)}));var h=i.fx={},p={_fire:function(t,e){return this[t]&&this[t].apply(this,e||[]),this}},m=function(t){this._index=-1,this._animations=t||[],this._current=this._onAnimateCtx=this._onEndCtx=null,this.duration=0,a.forEach(this._animations,(function(t){this.duration+=t.duration,t.delay&&(this.duration+=t.delay)}),this)};m.prototype=new e,t.extend(m,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove(),this._onEndCtx.remove(),this._onAnimateCtx=this._onEndCtx=null,this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=o.after(this._current,"onAnimate",t.hitch(this,"_onAnimate"),!0),this._onEndCtx=o.after(this._current,"onEnd",t.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(e,n){if(this._current||(this._current=this._animations[this._index=0]),!n&&"playing"==this._current.status())return this;var i=o.after(this._current,"beforeBegin",t.hitch(this,(function(){this._fire("beforeBegin")})),!0),a=o.after(this._current,"onBegin",t.hitch(this,(function(t){this._fire("onBegin",arguments)})),!0),s=o.after(this._current,"onPlay",t.hitch(this,(function(t){this._fire("onPlay",arguments),i.remove(),a.remove(),s.remove()})));return this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onAnimateCtx=o.after(this._current,"onAnimate",t.hitch(this,"_onAnimate"),!0),this._onEndCtx&&this._onEndCtx.remove(),this._onEndCtx=o.after(this._current,"onEnd",t.hitch(this,"_onEnd"),!0),this._current.play.apply(this._current,arguments),this},pause:function(){if(this._current){var e=o.after(this._current,"onPause",t.hitch(this,(function(t){this._fire("onPause",arguments),e.remove()})),!0);this._current.pause()}return this},gotoPercent:function(t,e){this.pause();var n=this.duration*t;return this._current=null,a.some(this._animations,(function(t,e){return n<=t.duration?(this._current=t,this._index=e,!0):(n-=t.duration,!1)}),this),this._current&&this._current.gotoPercent(n/this._current.duration),e&&this.play(),this},stop:function(e){if(this._current){if(e){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var n=o.after(this._current,"onStop",t.hitch(this,(function(t){this._fire("onStop",arguments),n.remove()})),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop(),this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onEndCtx&&this._onEndCtx.remove()}}),t.extend(m,p),h.chain=function(t){return new m(t)};var g=function(e){this._animations=e||[],this._connects=[],this._finished=0,this.duration=0,a.forEach(e,(function(e){var n=e.duration;e.delay&&(n+=e.delay),this.duration<n&&(this.duration=n),this._connects.push(o.after(e,"onEnd",t.hitch(this,"_onEnd"),!0))}),this),this._pseudoAnimation=new s.Animation({curve:[0,1],duration:this.duration});var n=this;a.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],(function(t){n._connects.push(o.after(n._pseudoAnimation,t,(function(){n._fire(t,arguments)}),!0))}))};return t.extend(g,{_doAction:function(t,e){return a.forEach(this._animations,(function(n){n[t].apply(n,e)})),this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(t,e){var n=this._pseudoAnimation;n[t].apply(n,e)},play:function(t,e){return this._finished=0,this._doAction("play",arguments),this._call("play",arguments),this},pause:function(){return this._doAction("pause",arguments),this._call("pause",arguments),this},gotoPercent:function(t,e){var n=this.duration*t;return a.forEach(this._animations,(function(t){t.gotoPercent(t.duration<n?1:n/t.duration,e)})),this._call("gotoPercent",arguments),this},stop:function(t){return this._doAction("stop",arguments),this._call("stop",arguments),this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop(),a.forEach(this._connects,(function(t){t.remove()}))}}),t.extend(g,p),h.combine=function(t){return new g(t)},h.wipeIn=function(e){var n,i=e.node=r.byId(e.node),a=i.style,d=s.animateProperty(t.mixin({properties:{height:{start:function(){if(n=a.overflow,a.overflow="hidden","hidden"==a.visibility||"none"==a.display)return a.height="1px",a.display="",a.visibility="",1;var t=l.get(i,"height");return Math.max(t,1)},end:function(){return i.scrollHeight}}}},e)),c=function(){a.height="auto",a.overflow=n};return o.after(d,"onStop",c,!0),o.after(d,"onEnd",c,!0),d},h.wipeOut=function(e){var n,i=(e.node=r.byId(e.node)).style,a=s.animateProperty(t.mixin({properties:{height:{end:1}}},e));o.after(a,"beforeBegin",(function(){n=i.overflow,i.overflow="hidden",i.display=""}),!0);var l=function(){i.overflow=n,i.height="auto",i.display="none"};return o.after(a,"onStop",l,!0),o.after(a,"onEnd",l,!0),a},h.slideTo=function(e){var n,i=e.node=r.byId(e.node),a=null,c=null,u=(n=i,function(){var t=l.getComputedStyle(n),e=t.position;if(a="absolute"==e?n.offsetTop:parseInt(t.top)||0,c="absolute"==e?n.offsetLeft:parseInt(t.left)||0,"absolute"!=e&&"relative"!=e){var i=d.position(n,!0);a=i.y,c=i.x,n.style.position="absolute",n.style.top=a+"px",n.style.left=c+"px"}});u();var h=s.animateProperty(t.mixin({properties:{top:e.top||0,left:e.left||0}},e));return o.after(h,"beforeBegin",u,!0),h},h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(86),n(17),n(16),n(26),n(52),n(198)],void 0===(a=function(t,e,n,i,a,o,s){var r="";try{r=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}var l={FORMAT_TYPES_FN:{DATE_TIME:"getDateString",DATE:"getDateOnlyString",TIME:"getTimeString"},TZ_FORMAT_TYPES_FN:{DATE_TIME:"getDateStringWithTzOffset"},DATE_STRING_FORMAT_NAMES:{MONTH_DAY_YEAR:"month day, year",MONTH_DAY_YEAR_TIME:"month day, year time",DAYNAME_MONTH_DAY_YEAR:"dayname, month ordinal-day, year",DAYNAME_MONTH_DAY_YEAR_TIME:"dayname, month ordinal-day, year at time",TIME:"time"},getCurrentTimestamp:function(){return Math.round(Date.now()/1e3)},getTimePassed:function(t){var e=(new Date-t)/1e3,n=0,i=0,a=0;return e>=60&&(n=Math.floor(e/60),e%=60,n>=60&&(i=Math.floor(n/60),n%=60,i>=24&&(a=Math.floor(i/24),i%=24))),{seconds:e,minutes:n,hours:i,days:a}},toRelativeString:function(t){var n=l.getTimePassed(t),i=e.format(t,{formatLength:"medium",timePattern:"h:mm a"}),a="";return n.days>0&&(a+=n.days+" "+o.toPlural("day",n.days)+" "),n.hours>0&&(a+=n.hours+" "+o.toPlural("hour",n.hours)+" "),n.minutes>0&&(a+=n.minutes+" "+o.toPlural("minute",n.minutes)+" "),(a=a.trim())?n.days>=7?i:a+" ago":"less than a minute ago"},getTimezoneName:function(t,e){if(!l.isValidTimeZone(t))return"";var n=Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"long"}),i=e||new Date;n=n.formatToParts(i);var a="";switch(n.forEach((function(t){"timeZoneName"===t.type&&(a=t.value)})),a){case"Pacific Standard Time":case"Pacific Daylight Time":a="PT";break;case"Mountain Standard Time":case"Mountain Daylight Time":a="MT";break;case"Central Standard Time":case"Central Daylight Time":a="CT";break;case"Eastern Standard Time":case"Eastern Daylight Time":a="ET"}return a},isValidTimeZone:function(t){try{return Intl.DateTimeFormat(void 0,{timeZone:t}),!0}catch(e){return a.info("timezone-incorrect-date-display","User timezone.id is not valid for Intl.DateTimeFormat (dojo)",{timezoneId:t}),!1}},getTimezoneOffsetDate:function(t,e){if(null!==n.timezoneOffset&&!isNaN(n.timezoneOffset)){var i=new Date;t=e?new Date(t.getTime()+6e4*i.getTimezoneOffset()*-1-36e5*n.timezoneOffset):new Date(t.getTime()-6e4*i.getTimezoneOffset()*-1+36e5*n.timezoneOffset)}return t},getTimezoneOffsetDateWithTzOffset:function(t,e){if(e||0===e){t=new Date(t.getTime()-6e4*t.getTimezoneOffset()*-1+36e5*e)}return t},getDateString:function(t){t=l.getTimezoneOffsetDate(t);var n=new Date;return e.format(t,{selector:"date",datePattern:"EEE"})+", "+e.format(t,{selector:"date",datePattern:"MMMM"})+" "+s.toOrdinal(t.getDate())+(n.getFullYear()!==t.getFullYear()?", "+t.getFullYear():"")+" "+e.format(t,{selector:"date",datePattern:"h:mm a"})},getDateStringWithTzOffset:function(t,n){t=l.getTimezoneOffsetDateWithTzOffset(t,n);var i=new Date;return e.format(t,{selector:"date",datePattern:"EEE"})+", "+e.format(t,{selector:"date",datePattern:"MMMM"})+" "+s.toOrdinal(t.getDate())+(i.getFullYear()!==t.getFullYear()?", "+t.getFullYear():"")+" "+e.format(t,{selector:"date",datePattern:"h:mm a"})},getTimeString:function(t,i){if(!(i&&l.isValidTimeZone(n.timezoneId))){var a=r?" "+l.getTimezoneName(r,t):"";return e.format(t,{selector:"date",datePattern:"h:mm a"})+a}try{var o;o=Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",timeZone:n.timezoneId});var s=l.getTimezoneName(n.timezoneId,t);return(o=o.format(t)).replace("AM","am"),o.replace("PM","pm"),o.replace(":00",""),i?o+" "+s:o}catch(t){}},getDateOnlyString:function(t,i){if(i&&l.isValidTimeZone(n.timezoneId))try{return Intl.DateTimeFormat("en-US",{month:"long",day:"2-digit",weekday:"long",timeZone:n.timezoneId}).format(t)}finally{}i&&(t=l.getTimezoneOffsetDate(t));var a=new Date;return e.format(t,{selector:"date",datePattern:"MMMM"})+" "+s.toOrdinal(t.getDate())+(a.getFullYear()!==t.getFullYear()?", "+t.getFullYear():"")},formatDateTime:function(n,i,a){var o={selector:"date"};a&&(o.locale=a);var r="",l=new Date,d=t.clone(o);d.datePattern="EEE";var c=t.clone(o);c.datePattern="MMMM";var u=t.clone(o);switch(u.datePattern="h:mm a",i){case this.DATE_STRING_FORMAT_NAMES.MONTH_DAY_YEAR:r=e.format(n,c)+" "+s.toOrdinal(n.getDate())+(l.getFullYear()!==n.getFullYear()?", "+n.getFullYear():"");break;case this.DATE_STRING_FORMAT_NAMES.MONTH_DAY_YEAR_TIME:r=e.format(n,c)+" "+s.toOrdinal(n.getDate())+(l.getFullYear()!==n.getFullYear()?", "+n.getFullYear():"")+" "+e.format(n,u);break;case this.DATE_STRING_FORMAT_NAMES.DAYNAME_MONTH_DAY_YEAR_TIME:r=e.format(n,d)+", "+e.format(n,c)+" "+s.toOrdinal(n.getDate())+(l.getFullYear()!==n.getFullYear()?", "+n.getFullYear():"")+" "+e.format(n,u);break;case this.DATE_STRING_FORMAT_NAMES.TIME:r=e.format(n,u);break;default:r=e.format(n,c)+" "+s.toOrdinal(n.getDate())+(l.getFullYear()!==n.getFullYear()?", "+n.getFullYear():"")+" at "+e.format(n,u)}return r},dateTransform:function(e){if("string"==typeof e)return new Date(e);if(e instanceof Object){var n=e.date_str?new Date(e.date_str):null;if(!n)return null;var i=l.getTimezoneOffsetDateWithTzOffset(n,e.tz_float);return t.mixin(e,{utcStr:e.date_str,jsDate:i})}throw"Value is not a String or Object"}};return l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(164),n(36),n(4),n(3),n(28),n(10),n(45),n(18),n(8),n(19),n(6),n(115),n(14),n(2),n(43)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){var f={sendFormViaAjax:function(t){var e=this,n=s.byId(t),i=r.toQuery(n);return l(n.action+"?"+i,{handleAs:"json"}).then((function(t){var n=t.msg,i=t.status;n&&e.setFlash(n,i),t.refresh_notes&&p.byId("notes-list").render()}),(function(t){e.setFlash("We couldn't process your request. Try again.","error")}))},setFlash:function(t,e){s.byId("av-flash-block")||o.set(s.byId("flash-block-container"),'<div id="av-flash-block" class="c-flashBlock full-width"></div>'),s.byId("av-flash-"+e)||(i.place('<ul class="av-flash padding--lv3 v-flashBlock--'+e+'" id="av-flash-'+e+'"></ul>',"av-flash-block"),"error"===e&&i.place('<span class="cross float-right padding--lv3 !padding-top-bottom--lv0 freddicon cursor-pointer" onclick="_mca.closeFlashBlocks(this.parentNode); return false;"></span>',"av-flash-"+e,"first")),i.place("<li>"+t+"</li>","av-flash-"+e),"error"!==e&&this.closeFlashBlocks(s.byId("av-flash-"+e),4500)},closeFlashBlocks:function(t,e){e||(e=0),n(t,"fadeOut",{duration:1e3,delay:e}).then((function(){i.destroy(t)}))},refreshOnError:function(t){if(t.id){var e=t.domNode.innerHTML;if(e.includes("Warning: ")&&e.includes("failed to open stream: No such file or directory"))p.byId(t.id).refresh()}}};return{run:t(null,{constructor:function(){var t=this;g((function(){t._initMcadminSearch(),t._initToolsListToolTip(),t._initFlashMessages(),c.subscribe("mojo/analytics/List/_bbs_display/render",(function(){t._updateUnreadBBSCount(!1)})),t._updateUnreadBBSCount(!0)}))},_initMcadminSearch:function(){var t=s.byId("search-dialog"),e=s.byId("mcadmin-search-input"),n=u(".mcadmin-wrapper"),i=u("[name=search-type]"),o=s.byId("open-search");m(o,"click",(function(){a.add(t,"search-dialog-active"),setTimeout((function(){e.focus()}),100)})),m(e,"focusin",(function(){a.add(t,"search-dialog-active")})),m(n,"click",(function(){a.remove(t,"search-dialog-active")})),m(i,"click",(function(){e.focus()}))},_initToolsListToolTip:function(){new e({connectId:"mcadmin-tool-list",selector:"li",getContent:function(t){return t.getAttribute("tooltipText")}})},_initFlashMessages:function(){var t=s.byId("av-flash-info"),e=s.byId("av-flash-success"),n=s.byId("content");s.byId("the-account")?i.place("av-flash-block","account-buttons","first"):n&&n.length>0&&i.place("av-flash-block","content","first"),t?f.closeFlashBlocks(t,4500):e&&f.closeFlashBlocks(e,4500)},_updateUnreadBBSCount:function(t){var e=this;l(d.toUrl("/peaches2/bbs/get-unread-items"),{handleAs:"json"}).then((function(n){"success"===n.status?(0===n.count?e._showReadIcon():e._showUnreadIcon(),o.set(s.byId("bbs-unread-items-count"),String(n.count))):f.setFlash(n.msg,"error"),t&&e._startUnreadBBSCountTimer()}),(function(n){403===n.response.status?window.location=d.toUrl("/peaches2/login"):(f.setFlash(n,"error"),t&&e._startUnreadBBSCountTimer())}))},_showUnreadIcon:function(){a.remove(s.byId("bbs-unread-items-count"),"hide"),a.add(s.byId("gray-bulletin-icon"),"hide"),a.remove(s.byId("blue-bulletin-icon"),"hide")},_showReadIcon:function(){a.add(s.byId("bbs-unread-items-count"),"hide"),a.remove(s.byId("gray-bulletin-icon"),"hide"),a.add(s.byId("blue-bulletin-icon"),"hide")},_startUnreadBBSCountTimer:function(){var t=this;setTimeout((function(){t._updateUnreadBBSCount(!0)}),3e5)}}),utils:f}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(22),n(46)],void 0===(a=function(t,e,n){"use strict";var i=t.some;return function(t){var a,o,s;t instanceof Array?o=t:t&&"object"==typeof t&&(a=t);var r=[];if(a){for(var l in o=[],a)Object.hasOwnProperty.call(a,l)&&(r.push(l),o.push(a[l]));s={}}else o&&(s=[]);if(!o||!o.length)return(new e).resolve(s);var d=new e;d.promise.always((function(){s=r=null}));var c=o.length;return i(o,(function(t,e){return a||r.push(e),n(t,(function(t){d.isFulfilled()||(s[r[e]]=t,0==--c&&d.resolve(s))}),d.reject),d.isFulfilled()})),d.promise}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(1)],void 0===(a=function(t,e){var n=/[&<>'"\/]/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},a={};return e.setObject("dojo.string",a),a.escape=function(t){return t?t.replace(n,(function(t){return i[t]})):""},a.rep=function(t,e){if(e<=0||!t)return"";for(var n=[];1&e&&n.push(t),e>>=1;)t+=t;return n.join("")},a.pad=function(t,e,n,i){n||(n="0");var o=String(t),s=a.rep(n,Math.ceil((e-o.length)/n.length));return i?o+s:s+o},a.substitute=function(n,i,a,o){return o=o||t.global,a=a?e.hitch(o,a):function(t){return t},n.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,(function(t,n,s){var r=e.getObject(n,!1,i);return s&&(r=e.getObject(s,!1,o).call(o,r,n)),a(r,n).toString()}))},a.trim=String.prototype.trim?e.trim:function(t){for(var e=(t=t.replace(/^\s+/,"")).length-1;e>=0;e--)if(/\S/.test(t.charAt(e))){t=t.substring(0,e+1);break}return t},a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){var n;return function(){n&&clearTimeout(n);var i=this,a=arguments;n=setTimeout((function(){t.apply(i,a)}),e)}}}.apply(e,[]))||(t.exports=i)},function(t,e){t.exports=window.require("dojo/_base/connect")},function(t,e,n){var i,a;i=[n(35),n(0),n(10),n(7),n(3),n(4),n(71),n(1),n(2),n(85),n(33),n(47),n(32),n(49),n(162),n(14),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){var v,b,y=new(e([u,s],{curNode:null,activeStack:[],constructor:function(){var e=r.hitch(this,(function(t){n.isDescendant(this.curNode,t)&&this.set("curNode",null),n.isDescendant(this.prevNode,t)&&this.set("prevNode",null)}));t.before(o,"empty",e),t.before(o,"destroy",e)},registerIframe:function(t){return this.registerWin(t.contentWindow,t)},registerWin:function(t,e){var n=this,i=t.document&&t.document.body;if(i){var a=c("pointer-events")?"pointerdown":c("MSPointer")?"MSPointerDown":c("touch-events")?"mousedown, touchstart":"mousedown",o=l(t.document,a,(function(t){t&&t.target&&null==t.target.parentNode||n._onTouchNode(e||t.target,"mouse")})),s=l(i,"focusin",(function(t){if(t.target.tagName){var i=t.target.tagName.toLowerCase();"#document"!=i&&"body"!=i&&(m.isFocusable(t.target)?n._onFocusNode(e||t.target):n._onTouchNode(e||t.target))}})),r=l(i,"focusout",(function(t){n._onBlurNode(e||t.target)}));return{remove:function(){o.remove(),s.remove(),r.remove(),o=s=r=null,i=null}}}},_onBlurNode:function(t){var e=(new Date).getTime();e<v+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(r.hitch(this,(function(){this.set("prevNode",this.curNode),this.set("curNode",null)})),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),e<b+100||(this._clearActiveWidgetsTimer=setTimeout(r.hitch(this,(function(){delete this._clearActiveWidgetsTimer,this._setStack([])})),0)))},_onTouchNode:function(t,e){b=(new Date).getTime(),this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),a.contains(t,"dijitPopup")&&(t=t.firstChild);var n=[];try{for(;t;){var o=i.get(t,"dijitPopupParent");if(o)t=g.byId(o).domNode;else if(t.tagName&&"body"==t.tagName.toLowerCase()){if(t===h.body())break;t=p.get(t.ownerDocument).frameElement}else{var s=t.getAttribute&&t.getAttribute("widgetId"),r=s&&g.byId(s);!r||"mouse"==e&&r.get("disabled")||n.unshift(s),t=t.parentNode}}}catch(t){}this._setStack(n,e)},_onFocusNode:function(t){t&&9!=t.nodeType&&(v=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(t),t!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",t)))},_setStack:function(t,e){var n=this.activeStack,i=n.length-1,a=t.length-1;if(t[a]!=n[i]){var o,s;for(this.set("activeStack",t),s=i;s>=0&&n[s]!=t[s];s--)(o=g.byId(n[s]))&&(o._hasBeenBlurred=!0,o.set("focused",!1),o._focusManager==this&&o._onBlur(e),this.emit("widget-blur",o,e));for(s++;s<=a;s++)(o=g.byId(t[s]))&&(o.set("focused",!0),o._focusManager==this&&o._onFocus(e),this.emit("widget-focus",o,e))}},focus:function(t){if(t)try{t.focus()}catch(t){}}}));for(var w in d((function(){var t=y.registerWin(p.get(document));c("ie")&&l(window,"unload",(function(){t&&(t.remove(),t=null)}))})),f.focus=function(t){y.focus(t)},y)/^_/.test(w)||(f.focus[w]="function"==typeof y[w]?r.hitch(y,w):y[w]);return y.watch((function(t,e,n){f.focus[t]=n})),y}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/event")},function(t,e,n){var i,a;i=[n(215)],void 0===(a=function(t){var e="object"==typeof self&&self&&self.Object===Object&&self;return t||e||Function("return this")()}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(166),n(6),n(0),n(1),n(4),n(3),n(2),n(18),n(21),n(16),n(26),n(8),n(25),n(41),n(341),n(29),n(2025),n(2026),n(2027),n(2028),n(2029),n(2030),n(460),n(105)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k){var S=n([p,k],{_fillContent:function(){this.inherited(arguments),o.add(this.dropDown.domNode,"dijitSelectWithOptionGroup")},_getMenuItemForOption:function(t){return t.optGroup?new C({label:t.optGroupLabel,message:t.message}):this.inherited(arguments)}});return n([h],{isAudienceSet:!1,fieldGroups:[],fieldGroupsLookup:[],confirmationText:"",fieldsSelect:null,conditionSelect:null,inputTextBox:null,hasUnsavedChanges:null,listeners:[],feedbackTimeout:null,hasOpenedDynamicContentWithoutSaving:!1,dynamicContentFieldType:null,constructor:function(){this.isAudienceSet=window.app&&0!==window.app.campaignListId,this.fieldGroups=window.app&&window.app.dynamicContentFields,this.FIELD_CONDITIONS=[{label:"is",value:"IF",selected:!0},{label:"is not",value:"IFNOT",selected:!1}],this.dynamicContentEnabledSettings='<span><svg class="dynamicContentSettingsButtonIcon" fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><circle fill="#00C14E" r="6" transform="matrix(1 0 0 -1 6 6)"/></svg>Dynamic Content On</span>',this.dynamicContentDisabledSettings="<span>Set Dynamic Content</span>"},startupDynamicContentSettings:function(){if(this._verifyDynamicContent()){var t=this,n=n=window.app.hasDynamicContentFeature?this.isAudienceSet?f:v:b;if(this.hasOpenedDynamicContentWithoutSaving=!0,a.place(w,this.editorContainerWidget.headerNode),a.place(n,this.dynamicContentSettingsContainer,"only"),this.dynamicContentSettingsBackButton=e(".dynamicContentSettingsBackButton",this.dynamicContentSettingsContainer),this.dynamicContentSettingsResetButton=e(".dynamicContentSettingsResetButton",this.dynamicContentSettingsContainer),this.dynamicContentSettingsSaveButton=e(".dynamicContentSettingsSaveButton",this.dynamicContentSettingsContainer),this.dynamicContentSettingsConfirmButton=e(".dynamicContentSettingsConfirmButton",this.dynamicContentSettingsContainer),this.dynamicContentSettingsEditButton=e(".dynamicContentSettingsEditButton",this.dynamicContentSettingsContainer),this.dynamicContentConfirmationText=e(".dynamicContentConfirmationText",this.dynamicContentSettingsContainer),this.dynamicContentAboutLink=e(".dynamicContentAboutLink",this.dynamicContentSettingsContainer),this.feedbackContainer=e(".feedback-container",this.editorContainerWidget.headerNode)[0],this.feedbackDismissButton=e(".feedbackDismissButton",this.editorContainerWidget.headerNode),this.listeners.backButton=s(this.dynamicContentSettingsBackButton,"click",(function(){t.onBack()})),this.listeners.dismissFeedback=s(this.feedbackDismissButton,"click",i.hitch(this,this._hideFeedback)),window.app.hasDynamicContentFeature)if(this.isAudienceSet)this.dynamicContentFieldsSelect=e(".dynamicContentFieldsSelect",this.dynamicContentSettingsContainer),this._createFieldsSelect(),this.dynamicContentConditionSelect=e(".dynamicContentConditionSelect",this.dynamicContentSettingsContainer),this._createConditionSelect(),this.dynamicContentInput=e(".dynamicContentInput",this.dynamicContentSettingsContainer),this._getInputType(),this._validateFields(),this.listeners.resetButton=s(this.dynamicContentSettingsResetButton,"click",(function(){t.onReset()})),this.listeners.saveButton=s(this.dynamicContentSettingsSaveButton,"click",(function(){t.onDone()})),this.listeners.confirmButton=s(this.dynamicContentSettingsConfirmButton,"click",(function(){t.onConfirm()})),this.listeners.editButton=s(this.dynamicContentSettingsEditButton,"click",(function(){t.onEdit()})),this.listeners.aboutLink=s(this.dynamicContentAboutLink,"click",(function(){t._handleAboutLinkClick()}));else{this.dynamicContentAudienceButtonContainer=e(".dynamicContentAudienceButtonContainer",this.dynamicContentSettingsContainer);this.dynamicContentAudienceSelect=e(".dynamicContentAudienceSelect",this.dynamicContentSettingsContainer),this._createAudienceSelect(),a.place('<button type="button" class="button p0 margin-right--lv0 dynamicContentAudienceButton" disabled>Save &amp; Continue</button>',this.dynamicContentAudienceButtonContainer[0]),this.dynamicContentAudienceButton=e(".dynamicContentAudienceButton",this.dynamicContentSettingsContainer),this.listeners.audienceButton=s(this.dynamicContentAudienceButton,"click",(function(){t.onSaveAll(event)}))}else{this.dynamicContentUpsellButtonContainer=e(".dynamicContentUpsellButtonContainer",this.dynamicContentSettingsContainer);a.place('<button type="button" class="button p1 margin-right--lv0 dynamicContentUpsellButton">Upgrade Now</button>',this.dynamicContentUpsellButtonContainer[0]),this.dynamicContentUpsellButton=e(".dynamicContentUpsellButton",this.dynamicContentSettingsContainer),this.listeners.upsellButton=s(this.dynamicContentUpsellButton,"click",(function(){t.onUpgrade()})),this.listeners.aboutLink=s(this.dynamicContentAboutLink,"click",(function(){t._handleAboutLinkClick()}))}}},_showDynamicContentSettingsEditor:function(){t.addClass(this.dynamicContentSettingsContainer,"showSettings"),c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings")},_hideDynamicContentSettingsEditor:function(){this.hasUnsavedChanges?this._showUnsavedWarningModal():(t.removeClass(this.dynamicContentSettingsContainer,"showSettings"),t.removeClass(this.dynamicContentSettingsContainer,"showConfirmation"))},_showDynamicContentSettingsConfirmation:function(){t.addClass(this.dynamicContentSettingsContainer,"showConfirmation")},_hideDynamicContentSettingsConfirmation:function(){t.removeClass(this.dynamicContentSettingsContainer,"showConfirmation")},_showFeedback:function(t,n){var a=e(".freddicon",this.feedbackContainer)[0];o.add(this.feedbackContainer,t?"success":"error"),e("p",this.feedbackContainer)[0].innerText=n,o.add(a,t?"tick-circle":"not-allowed"),o.remove(this.feedbackContainer,"hide"),this.feedbackTimeout=setTimeout(i.hitch(this,this._hideFeedback),3e3)},_hideFeedback:function(){o.add(this.feedbackContainer,"hide")},_createFieldsSelect:function(){var t=[{value:" ",label:"Choose an option&hellip;",selected:!0}];for(var e in this.fieldGroups){var n=this.fieldGroups[e];for(var a in t.push({value:"",label:"",message:"",selected:!1,optGroup:!0,optGroupLabel:e}),n){var r=n[a];this.fieldGroupsLookup[a]=e,t.push({value:"Groups"===e?a:r,label:a,selected:this.block.dynamicContentRules&&this.block.dynamicContentRules.field===r})}}this.fieldsSelect=new S({class:"select-small margin-bottom--lv3",name:"dynamic-content-choose-an-option",id:"dynamic-content-choose-an-option",maxHeight:"-1",required:"true",options:t}),this.block.dynamicContentRules&&this.block.dynamicContentRules.field&&this.fieldsSelect.set("value",this.block.dynamicContentRules.field),this.listeners.fieldsSelect=s(this.fieldsSelect,"change",i.hitch(this,(function(){this._updateFieldsSelect()}))),o.add(this.fieldsSelect.dropDown.domNode,"dijitSelectWithOptionGroup"),this.fieldsSelect.startup(),this.fieldsSelect.placeAt(this.dynamicContentFieldsSelect[0])},_createConditionSelect:function(){this.conditionSelect=new p({class:"select-small margin-bottom--lv3 dynamicContentSettingsConditionSelect",name:"dynamic-content-condition",id:"dynamic-content-condition",maxHeight:"-1",required:"true",options:this.FIELD_CONDITIONS}),this.block.dynamicContentRules&&this.block.dynamicContentRules.condition&&this.conditionSelect.set("value",this.block.dynamicContentRules.condition),this.listeners.conditionSelect=s(this.conditionSelect,"change",i.hitch(this,(function(){this._updateConditionSelect()}))),this.conditionSelect.startup(),this.conditionSelect.placeAt(this.dynamicContentConditionSelect[0])},_createInput:function(){this.inputTextBox=new m({class:"margin-left--lv1 margin-bottom--lv3",type:"text",id:"dynamic-content-input",name:"dynamic-content-input",value:this.block.dynamicContentRules&&this.block.dynamicContentRules.input||"",required:"true",maxlength:"100",placeholder:"Enter a value...",regExp:"^[^*|:]*$"}),this.listeners.inputTextBox=s(this.inputTextBox,"keyup",i.hitch(this,(function(){this._updateInput()}))),this.inputTextBox.placeAt(this.dynamicContentInput[0])},_createGroupSelect:function(){var t=this.fieldGroups.Groups[this.fieldsSelect.get("value")],e=[{value:" ",label:"Choose a group name&hellip;",selected:!0}];for(var n in t){var a=t[n];e.push({value:a,label:a,selected:!1})}this.groupSelect=new p({class:"select-small margin-left--lv1 margin-bottom--lv3 dynamicContentSettingsConditionSelect",name:"dynamic-content-input",id:"dynamic-content-input",maxHeight:"-1",required:"true",options:e}),this.block.dynamicContentRules&&this.block.dynamicContentRules.input&&this.groupSelect.set("value",this.block.dynamicContentRules.input),s(this.groupSelect,"change",i.hitch(this,(function(){this._updateGroupSelect()}))),this.groupSelect.startup(),this.groupSelect.placeAt(this.dynamicContentInput[0])},_createAudienceSelect:function(){var t=window.app.audiences,e=[{value:" ",label:"Choose an audience&hellip;",selected:!0}];for(var n in window.app.audiences){var a=t[n];e.push({value:a,label:n,selected:!1})}this.audienceSelect=new p({class:"select-small dynamicContentSettingsAudienceSelect margin-bottom--lv1",name:"dynamic-content-audience",id:"dynamic-content-audience",maxHeight:"-1",required:"true",options:e}),this.listeners.audienceSelect=s(this.audienceSelect,"change",i.hitch(this,(function(){this._updateAudienceSelect()}))),this.audienceSelect.startup(),this.audienceSelect.placeAt(this.dynamicContentAudienceSelect[0])},_getInputType:function(){this.block.dynamicContentRules&&"Groups"===this.block.dynamicContentRules.dynamicContentFieldType?this._createGroupSelect():this._createInput()},_updateFieldsSelect:function(){this._updateInputFieldType(),this._updateConfirmationText(),this._validateFields()},_updateConditionSelect:function(){this._updateConfirmationText(),this._validateFields()},_updateInput:function(){this._updateConfirmationText(),this._validateFields()},_updateGroupSelect:function(){this._updateConfirmationText(),this._validateFields()},_updateInputFieldType:function(){var t=this.fieldGroupsLookup[this.fieldsSelect.attr("displayedValue")];this.dynamicContentFieldType!==t&&(this.inputTextBox&&"Groups"===t?(this.inputTextBox.set("value",""),this.inputTextBox.destroy(),this.inputTextBox=null,this._createGroupSelect()):this.groupSelect&&(this.groupSelect.set("value"," "),this.groupSelect.destroy(),this.groupSelect=null,this._createInput())),this.dynamicContentFieldType=t},_updateAudienceSelect:function(){" "===this.audienceSelect.get("value")?this.dynamicContentAudienceButton[0].disabled=!0:this.dynamicContentAudienceButton[0].disabled=!1},_updateConfirmationText:function(){var t="Groups"===this.dynamicContentFieldType?this.groupSelect.get("value"):this.inputTextBox.get("value").trim(),e="<span>Contacts whose <strong>"+this.fieldsSelect.attr("displayedValue")+"</strong> data "+{IF:"matches",IFNOT:"does not match"}[this.conditionSelect.get("value")]+" <strong>"+t+"</strong></span>";a.place(e,this.dynamicContentConfirmationText[0],"only")},_updateSettingsButtonState:function(){this.block.hasDynamicContent?a.place(this.dynamicContentEnabledSettings,this.dynamicContentSettingsButton[0],"only"):a.place(this.dynamicContentDisabledSettings,this.dynamicContentSettingsButton[0],"only")},_validateFields:function(){var t="Groups"===this.dynamicContentFieldType?this.groupSelect.get("value").trim():this.inputTextBox.get("value").trim(),e=!1;"Groups"!==this.dynamicContentFieldType&&(e="Error"===this.inputTextBox.get("state"));var n=" "===this.fieldsSelect.get("value")||""===this.conditionSelect.get("value")||""===t;"Groups"!==this.dynamicContentFieldType&&(e="Error"===this.inputTextBox.get("state")),this.block.hasDynamicContent?this.hasUnsavedChanges=this.fieldsSelect.get("value")!==this.block.dynamicContentRules.field||this.conditionSelect.get("value")!==this.block.dynamicContentRules.condition||t!==this.block.dynamicContentRules.input:this.hasUnsavedChanges=" "!==this.fieldsSelect.get("value")||"IF"!==this.conditionSelect.get("value")||""!==t,n&&(this.block.set("hasDynamicContent",!1),this.block.set("dynamicContentFieldType",""),this.block.set("dynamicContentRules",{})),e?this.dynamicContentSettingsConfirmButton[0].disabled=!0:!n&&this.hasUnsavedChanges?this.dynamicContentSettingsConfirmButton[0].disabled=!1:this.dynamicContentSettingsConfirmButton[0].disabled=!0},_setDefaults:function(){this.fieldsSelect.set("value"," "),this.conditionSelect.set("value","IF"),"Groups"===this.dynamicContentFieldType?this.groupSelect.set("value"," "):this.inputTextBox.set("value","")},_restoreFields:function(){this.fieldsSelect.set("value",this.block.dynamicContentRules.field),this.conditionSelect.set("value",this.block.dynamicContentRules.condition),"Groups"===this.dynamicContentFieldType?this.groupSelect.set("value",this.block.dynamicContentRules.input):this.inputTextBox.set("value",this.block.dynamicContentRules.input)},_saveFields:function(){var t="Groups"===this.dynamicContentFieldType?this.groupSelect.value:this.inputTextBox.value.trim();this.block.set("dynamicContentRules",{field:this.fieldsSelect.value,condition:this.conditionSelect.value,input:t})},_handleAboutLinkClick:function(){c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:read_about_dynamic_content")},_showUnsavedWarningModal:function(){var t=new g({title:"Are you sure?",content:_,onHide:function(){t.destroyRecursive()}});t.domNode.querySelector("[data-dojo-attach-point='continueButton']").addEventListener("click",function(){t.hide(),setTimeout(function(){this.block.hasDynamicContent?this._restoreFields():this._setDefaults(),this.hasUnsavedChanges=!1,this._hideDynamicContentSettingsEditor()}.bind(this),400)}.bind(this)),t.domNode.querySelector("[data-dojo-attach-point='cancelButton']").addEventListener("click",(function(){t.hide()})),t.show()},_formatStringForTracking:function(t){return t.replace(/ /g,"_").toLowerCase()},_setCampaignAudience:function(t){return r.post(u.toUrl("campaigns/api/patch",{campaign_id:window.app.campaignId}),{data:{patch:JSON.stringify({list_id:t})},handleAs:"json"})},_verifyDynamicContent:function(){return this.editorContainerWidget&&this.dynamicContentSettingsContainer},postCreate:function(){var n=this._verifyDynamicContent();n?(this.editorContainerWidget.headerNode&&this.block._campaignRenderingType&&"page"!==this.block._campaignRenderingType&&(a.place(y,this.editorContainerWidget.headerNode),this.dynamicContentSettingsButtonContainer=e(".dynamicContentSettingsButtonContainer",this.editorContainerWidget.headerNode)[0],t.removeClass(this.dynamicContentSettingsButtonContainer,"hide"),t.addClass(this.editorContainerWidget.headerNode,"dynamicContentEnabled"),this.dynamicContentSettingsButton=e(".dynamicContentSettingsButton",this.dynamicContentSettingsButtonContainer),this.listeners.headerButton=s(this.dynamicContentSettingsButton,"click",i.hitch(this,this._showDynamicContentSettingsEditor)),this._updateSettingsButtonState()),this.inherited(arguments)):this.inherited(arguments)},onClose:function(){this.isDynamicContentEnabled?(this.dynamicContentSettingsContainer&&(this.fieldsSelect&&this.conditionSelect&&(this.inputTextBox||this.groupSelect)&&(this.fieldsSelect.destroy(),this.conditionSelect.destroy(),"Groups"===this.dynamicContentFieldType?this.groupSelect.destroy():this.inputTextBox.destroy()),!this.isAudienceSet&&this.audienceSelect&&this.audienceSelect.destroy(),t.empty(this.dynamicContentSettingsContainer)),t.forEach(this.listeners,(function(t){t.remove()})),this.feedbackTimeout&&clearTimeout(this.feedbackTimeout),!this.hasOpenedDynamicContentWithoutSaving||this.block.hasOpenedDynamicContentWithoutSaving||this.block.hasDynamicContent||(this.block.set("hasOpenedDynamicContentWithoutSaving",!0),this.save(!0)),this.inherited(arguments)):this.inherited(arguments)},onShow:function(){this.startupDynamicContentSettings(),this.inherited(arguments)},onSave:function(){this.hasOpenedDynamicContentWithoutSaving=!1,this.block.set("hasOpenedDynamicContentWithoutSaving",!1),this.block.set("hasDynamicContent",!0),this.block.set("dynamicContentFieldType",this.dynamicContentFieldType),this.hasUnsavedChanges=!1,this._saveFields(),this.save(!0).then(i.hitch(this,(function(){this._showFeedback(!0,"Yay! Your condition has been saved.")})),i.hitch(this,(function(){this._showFeedback(!1,"Something went wrong. Try again.")}))),this._updateSettingsButtonState(),c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:save")},onDone:function(){this.onSave(),this._hideDynamicContentSettingsEditor()},onBack:function(){this._hideDynamicContentSettingsEditor()},onReset:function(){this.block.set("hasDynamicContent",!1),this._setDefaults(),this._saveFields(),this.save(),this._updateSettingsButtonState(),c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:reset")},onConfirm:function(){var t=this._formatStringForTracking(this.fieldsSelect.attr("displayedValue")),e=this._formatStringForTracking(this.conditionSelect.attr("displayedValue"));this._showDynamicContentSettingsConfirmation(),c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:confirm:"+t+":"+e)},onEdit:function(){this._hideDynamicContentSettingsConfirmation(),c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:edit")},onSaveAll:function(t){t.preventDefault(),c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:choose_an_audience"),window.top.app.saveAllForDynamicContent().then(i.hitch(this,(function(){this._setCampaignAudience(this.audienceSelect.get("value")).then(i.hitch(this,(function(){window.location.reload()})))})))},onUpgrade:function(){c.googleAnalytics.trackEvent("draft_edit","click","dynamic_content_settings:upgrade_now"),window.top.app.saveAllForDynamicContent().then((function(){window.location="/account/paywall?redirect=/campaigns/wizard/neapolitan?id="+window.app.campaignId}))}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/mouse")},function(t,e,n){var i,a;i=[n(0),n(25),n(1),n(5),n(2),n(118),n(9),n(41),n(14),n(19)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t([e],{constructor:function(){this._watches=[]},postMixInProperties:function(){if(!this.target)throw new Error("attribute target was not specified");this.inherited(arguments)},postCreate:function(){if(s.set(this.domNode,"display","none"),"string"==typeof this.target)if(l.byId(this.target))this.target=l.byId(this.target),this._display();else var t=d.subscribe("mojo/analytics/"+this.target+"/ready",n.hitch(this,(function(){this.target=l.byId(this.target),this._display(),t.remove()})));else this._display()},_display:function(){this.init(),this._watches.push(this.target.watch("total",n.hitch(this,"toggleDisplay"))),this.toggleDisplay()},toggleDisplay:function(){var t=this.canDisplay();s.set(this.domNode,"display",t?"":"none"),t?this.onShow():this.onHide()},init:function(){this.inherited(arguments)},canDisplay:function(){return this.target.total>0},onShow:function(){},onHide:function(){},uninitialize:function(){i.forEach(this._watches,"item.unwatch();"),this._watches=[]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(35),n(3),n(4),n(9),n(43),n(2),n(6),n(19),n(62),n(180),n(41),n(146),n(67),n(39),n(1198)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){return e([g,f],{templateString:v,widgetsInTemplate:!0,init:function(){var e=this;this.dropdown.dropDown=this.filtersMenu,this.filterInputs=[],this.filterKeys=[],t.forEach(this.filters,(function(t){var n,i=e.target.getFilter(t.key)||"";switch(t.type){case"select":var a=[{value:"",label:"All"}];Object.keys(t.options).forEach((function(e){a.push({value:e,label:t.options[e]})})),n=new p({class:"select-small !margin--lv0 full-width",options:a,value:i});break;case"text":n=new m({value:i});break;case"checkbox":n=new h({value:!0}),i&&n.set("checked",!0);break;default:throw Error("Unrecognized type "+t.type)}e.filterKeys.push(t.key),e.filterInputs.push({filter:t,input:n}),e._watches.push(e.target.watchFilter(t.key,(function(e,i,a){if(null===a)switch(t.type){case"checkbox":n.set("checked",!1,!1);break;default:n.set("value","",!1)}})));var s=o.place('<li><label for="'+n.id+'">'+t.label+"</label></li>",e.filterList);"checkbox"===t.type?o.place(n.domNode,d("label",s)[0],"first"):o.place(n.domNode,s)})),this.connect(this.resetLink,"click",n.hitch(this,(function(t){t.preventDefault(),t.stopPropagation(),this.clearFilters()}))),this.connect(this.okBtn,"click",(function(n){n.preventDefault(),n.stopPropagation(),t.forEach(this.filterInputs,(function(t){var n=t.input,i=t.filter,a=n.get("value");a||0===a?e.target.setFilter(i.key,a):e.target.clearFilter(i.key)})),this.closeMenu()})),e.own(c.subscribe(this.target.getTopic(),(function(){e.dropdown._opened&&(e.dropdown.openDropDown(),u.focus(e.filtersMenu.domNode))}))),r(n.hitch(this,(function(){if(l(this.closeFilterMenu,"click, touchend",n.hitch(this,"closeMenu")),window.innerWidth<=640){var t=72*(e.filters.length+1),i=window.innerHeight-128;e.filterList.style.maxHeight=t>i?parseInt(i-66,10)+"px":"inherit"}})))},clearFilters:function(){t.forEach(this.filters,n.hitch(this,(function(t){this.target.clearFilter(t.key)})))},canDisplay:function(){return this.inherited(arguments)||t.some(this.filterKeys,n.hitch(this,(function(t){return this.target.hasFilter(t)})))},closeMenu:function(){this.dropdown.closeDropDown()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(67),n(39),n(5),n(9),n(3),n(35),n(38),n(1199)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([i,a],{templateString:c,postMixInProperties:function(){this.keyMap={},this.filterKeys=[],o.forEach(this.filters,e.hitch(this,(function(t){this.keyMap[t.key]=e.clone(t),this.filterKeys.push(t.key)})))},init:function(){var t=this;this.own(n(this.resetFilter,"click",(function(e){e.stopPropagation(),e.preventDefault(),o.forEach(t.filters,(function(e){t.target.clearFilter(e.key)}))})),l.after(this.target,"onFilterChange",(function(){s.set(t.domNode,"display",t.canDisplay()?"":"none"),t.canDisplay()&&t._displayMessage()}))),t._displayMessage()},_displayMessage:function(){var t=[],e="";for(var n in this.keyMap)if(this.target.hasFilter(n)){var i=this.keyMap[n];switch(i.type){case"select":var a=d.encode(i.options[this.target.getFilter(n)]);t.push(i.label+": "+a);break;case"text":var s=d.encode(this.target.getFilter(n));t.push(i.label+": "+s);break;case"checkbox":this.target.getFilter(n)&&t.push(d.encode(i.label));break;case"search":e='<strong>Searching for</strong> "'+d.encode(this.target.getFilter(n))+'"';break;default:throw Error("Unrecognized type "+i.type)}}var r="";o.forEach(t,(function(t){r&&(r+=", "),r+=t}));var l="";e&&(l+=e),r&&(l&&(l+=", "),l+="<strong>Filtered By:</strong> <span>"+r+"</span>"),this.message.innerHTML=l},canDisplay:function(){return o.some(this.filterKeys,e.hitch(this,(function(t){return this.target.hasFilter(t)})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){t.exports=function(t,e,n,i){if(t.Velocity&&t.Velocity.Utilities){var a,o,s,r=t.Velocity,l=r.Utilities,d=r.version;if(o=d,s=[],(a={major:1,minor:1,patch:0})&&o&&(l.each([a,o],(function(t,e){var n=[];l.each(e,(function(t,e){for(;e.toString().length<5;)e="0"+e;n.push(e)})),s.push(n.join(""))})),parseFloat(s[0])>parseFloat(s[1]))){var c="Velocity UI Pack: You need to update Velocity (jquery.velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(c),new Error(c)}for(var u in r.RegisterEffect=r.RegisterUI=function(t,e){function n(t,e,n,i){var a,o=0;l.each(t.nodeType?[t]:t,(function(t,e){i&&(n+=t*i),a=e.parentNode,l.each(["height","paddingTop","paddingBottom","marginTop","marginBottom"],(function(t,n){o+=parseFloat(r.CSS.getPropertyValue(e,n))}))})),r.animate(a,{height:("In"===e?"+":"-")+"="+o},{queue:!1,easing:"ease-in-out",duration:n*("In"===e?.6:1)})}return r.Redirects[t]=function(i,a,o,s,d,c){var u=o===s-1;"function"==typeof e.defaultDuration?e.defaultDuration=e.defaultDuration.call(d,d):e.defaultDuration=parseFloat(e.defaultDuration);for(var h=0;h<e.calls.length;h++){var p=e.calls[h],m=p[0],g=a.duration||e.defaultDuration||1e3,f=p[1],v=p[2]||{},b={};if(b.duration=g*(f||1),b.queue=a.queue||"",b.easing=v.easing||"ease",b.delay=parseFloat(v.delay)||0,b._cacheValues=v._cacheValues||!0,0===h){if(b.delay+=parseFloat(a.delay)||0,0===o&&(b.begin=function(){a.begin&&a.begin.call(d,d);var e=t.match(/(In|Out)$/);e&&"In"===e[0]&&void 0!==m.opacity&&l.each(d.nodeType?[d]:d,(function(t,e){r.CSS.setPropertyValue(e,"opacity",0)})),a.animateParentHeight&&e&&n(d,e[0],g+b.delay,a.stagger)}),null!==a.display)if(void 0!==a.display&&"none"!==a.display)b.display=a.display;else if(/In$/.test(t)){var y=r.CSS.Values.getDisplayType(i);b.display="inline"===y?"inline-block":y}a.visibility&&"hidden"!==a.visibility&&(b.visibility=a.visibility)}if(h===e.calls.length-1){function w(){void 0!==a.display&&"none"!==a.display||!/Out$/.test(t)||l.each(d.nodeType?[d]:d,(function(t,e){r.CSS.setPropertyValue(e,"display","none")})),a.complete&&a.complete.call(d,d),c&&c.resolver(d||i)}b.complete=function(){if(e.reset){for(var t in e.reset){var n=e.reset[t];void 0!==r.CSS.Hooks.registered[t]||"string"!=typeof n&&"number"!=typeof n||(e.reset[t]=[e.reset[t],e.reset[t]])}var a={duration:0,queue:!1};u&&(a.complete=w),r.animate(i,e.reset,a)}else u&&w()},"hidden"===a.visibility&&(b.visibility=a.visibility)}r.animate(i,m,b)}},r},r.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}},r.RegisterEffect.packagedEffects)r.RegisterEffect(u,r.RegisterEffect.packagedEffects[u]);r.RunSequence=function(t){var e=l.extend(!0,[],t);e.length>1&&(l.each(e.reverse(),(function(t,n){var i=e[t+1];if(i){var a=n.o||n.options,o=i.o||i.options,s=a&&!1===a.sequenceQueue?"begin":"complete",d=o&&o[s],c={};c[s]=function(){var t=i.e||i.elements,e=t.nodeType?[t]:t;d&&d.call(e,e),r(n)},i.o?i.o=l.extend({},o,c):i.options=l.extend({},o,c)}})),e.reverse()),r(e[0])}}else e.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting.")}(window.jQuery||window.Zepto||window,window,document)},function(t,e){t.exports=window.require("dojo/Evented")},function(t,e,n){var i,a;i=[n(0),n(136),n(22),n(21),n(8)],void 0===(a=function(t,e,n,i,a){var o,s;return{load:function(){if(!o||s&&s.connection&&"disconnected"==s.connection.state){function t(){window.Pusher.channel_auth_endpoint=a.toUrl("/pusher/auth"),s=new window.Pusher(i.pusherKey),o.resolve(s)}o=new n,window.Pusher?t():e.get("https://js.pusher.com/2.2/pusher.min.js").then(t,(function(){o.reject({error:"timeout"})}))}return o.promise},disconnect:function(){s&&s.disconnect()},getSocketId:function(){var t;return s&&s.connection&&(t=s.connection.socket_id),t}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(176)],void 0===(a=function(t){return t}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(176)],void 0===(a=function(t,e){return e.Context=t.extend((function(t){this._this={},e._Context.call(this,t)}),e._Context.prototype,{getKeys:function(){var t=[];for(var e in this)this.hasOwnProperty(e)&&"_this"!=e&&t.push(e);return t},extend:function(e){return t.delegate(this,e)},filter:function(t){var n,i,a=new e.Context,o=[];if(t instanceof e.Context)o=t.getKeys();else if("object"==typeof t)for(var s in t)o.push(s);else for(n=0;i=arguments[n];n++)"string"==typeof i&&o.push(i);for(n=0;s=o[n];n++)a[s]=this[s];return a},setThis:function(t){this._this=t},getThis:function(){return this._this},hasKey:function(t){if(this._getter&&void 0!==this._getter(t))return!0;return void 0!==this[t]}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/config")},function(t,e,n){var i,a;i=[n(62),n(12),n(0),n(1)],void 0===(a=function(t,e,n,i){return i.extend(e,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),n("dijit._FocusMixin",null,{_focusManager:t})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(514),n(101),n(57),n(8),n(2),n(148),n(14)],void 0===(a=function(t,e,n,i,a,o,s,r){return t(null,{container:null,viewModule:{},createContentPanes:function(t,e,i){var o=this;t?(this._createTabContainer(t),e.pageTabs?(e.pageTabs.forEach((function(t){a.getHashParams().t&&(t.active=!1);var s=new n({title:t.title,href:t.href,selected:t.active,id:t.stub+"-section",preload:t.preload});o[o._camelCaseStub(t.stub)+"Section"]=s,o._addOndownloadEnd(t,s,i,e),o.container.addChild(s)})),a.getHashParams().t&&o.container.selectChild(o[o._camelCaseStub(a.getHashParams().t)]),this.container&&(this.container.startup(),this._watchHashParam())):console.error("An array of objects should be passed and should include a title, stub, and href for each object in the array")):console.error("The createContentPanes utility requires a string or node reference to be passed for the html element that the tab will be added to tabContainer")},_camelCaseStub:function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},_watchHashParam:function(){var t=this;o(window,"hashchange",(function(e){var n=a.getHashParams().t;if(n){if(!n.endsWith("-section"))return!1;t.container.selectChild(t[t._camelCaseStub(n)])}})),this.container.watch("selectedChildWidget",(function(t,e,n){if(n.id.endsWith("-hidden"))return!1;a.setHashParams({t:n.id})}))},_createTabContainer:function(t){this.container=new e({doLayout:!1},t)},addNewPane:function(t,e,i,o,s){var l=this,d=l[l._camelCaseStub(t.stub)+"Section"];if(d)d.set("title",t.title),d.set("href",t.href),l.container.selectChild(d);else{s||this.container||this._createTabContainer(o);var c=new n({title:t.title,href:t.href,closable:t.closable,onClose:function(){return l[l._camelCaseStub(t.stub)+"Section"]=null,!0},id:t.stub+"-section"});t.onDownloadEnd&&c.set("onDownloadEnd",t.onDownloadEnd),l[l._camelCaseStub(t.stub)+"Section"]=c,s&&(c.placeAt(s).startup(),r.byId(s).selectChild(c)),!s&&this.container&&this.container.addChild(c),d=c}e&&(this.container.selectChild(d),a.setHashParams({t:t.stub+"-section",id:i}))},_addOndownloadEnd:function(t,e,n,i){var a=this;Object.keys(n).forEach((function(o,r){var l=s(n[o]),d=null;o===a._camelCaseStub(t.stub)&&(l?(d=new n[o]({elId:t.id,pageJs:i}),a.viewModule[a._camelCaseStub(t.stub)]=d):a.viewModule[a._camelCaseStub(t.stub)]=n[o],e.set("onDownloadEnd",(function(){l?(d.parse(t.id),d.onReady()):(n[o].onReady(),a.viewModule[a._camelCaseStub(t.stub)]=n[o])})))}))}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/xhr")},function(t,e,n){var i,a;i=[n(1),n(83),n(427),n(59),n(160)],void 0===(a=function(t,e,n,i,a){var o={};if(t.setObject("dojo.number",o),o.format=function(n,i){i=t.mixin({},i||{});var a=e.normalizeLocale(i.locale),s=e.getLocalization("dojo.cldr","number",a);i.customs=s;var r=i.pattern||s[(i.type||"decimal")+"Format"];return isNaN(n)||Math.abs(n)==1/0?null:o._applyPattern(n,r,i)},o._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,o._applyPattern=function(t,e,n){var i=(n=n||{}).customs.group,a=n.customs.decimal,s=e.split(";"),r=s[0];if(-1!=(e=s[t<0?1:0]||"-"+r).indexOf("%"))t*=100;else if(-1!=e.indexOf("‰"))t*=1e3;else if(-1!=e.indexOf("¤"))i=n.customs.currencyGroup||i,a=n.customs.currencyDecimal||a,e=e.replace(/\u00a4{1,3}/,(function(t){var e=["symbol","currency","displayName"][t.length-1];return n[e]||n.currency||""}));else if(-1!=e.indexOf("E"))throw new Error("exponential notation not supported");var l=o._numberPatternRE,d=r.match(l);if(!d)throw new Error("unable to find a number expression in pattern: "+e);return!1===n.fractional&&(n.places=0),e.replace(l,o._formatAbsolute(t,d[0],{decimal:a,group:i,places:n.places,round:n.round}))},o.round=function(t,e,n){var i=10/(n||10);return(i*+t).toFixed(e)/i},0==.9.toFixed()){var s=o.round;o.round=function(t,e,n){var i=Math.pow(10,-e||0),a=Math.abs(t);return(!t||a>=i||(a/=i)<.5||a>=.95)&&(i=0),s(t,e,n)+(t>0?i:-i)}}return o._formatAbsolute=function(t,e,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);var a=e.split("."),s="string"==typeof n.places&&n.places.indexOf(","),r=n.places;s?r=n.places.substring(s+1):r>=0||(r=(a[1]||[]).length),n.round<0||(t=o.round(t,r,n.round));var l=String(Math.abs(t)).split("."),d=l[1]||"";if(a[1]||n.places){s&&(n.places=n.places.substring(0,s));var c=void 0!==n.places?n.places:a[1]&&a[1].lastIndexOf("0")+1;c>d.length&&(l[1]=i.pad(d,c,"0",!0)),r<d.length&&(l[1]=d.substr(0,r))}else l[1]&&l.pop();var u=a[0].replace(",","");-1!=(c=u.indexOf("0"))&&((c=u.length-c)>l[0].length&&(l[0]=i.pad(l[0],c)),-1==u.indexOf("#")&&(l[0]=l[0].substr(l[0].length-c)));var h,p,m=a[0].lastIndexOf(",");if(-1!=m){h=a[0].length-m-1;var g=a[0].substr(0,m);-1!=(m=g.lastIndexOf(","))&&(p=g.length-m-1)}for(var f=[],v=l[0];v;){var b=v.length-h;f.push(b>0?v.substr(b):v),v=b>0?v.slice(0,b):"",p&&(h=p,delete p)}return l[0]=f.reverse().join(n.group||","),l.join(n.decimal||".")},o.regexp=function(t){return o._parseInfo(t).regexp},o._parseInfo=function(t){t=t||{};var n=e.normalizeLocale(t.locale),i=e.getLocalization("dojo.cldr","number",n),s=t.pattern||i[(t.type||"decimal")+"Format"],r=i.group,l=i.decimal,d=1;if(-1!=s.indexOf("%"))d/=100;else if(-1!=s.indexOf("‰"))d/=1e3;else{var c=-1!=s.indexOf("¤");c&&(r=i.currencyGroup||r,l=i.currencyDecimal||l)}var u=s.split(";");1==u.length&&u.push("-"+u[0]);var h=a.buildGroupRE(u,(function(e){return(e="(?:"+a.escapeString(e,".")+")").replace(o._numberPatternRE,(function(e){var n={signed:!1,separator:t.strict?r:[r,""],fractional:t.fractional,decimal:l,exponent:!1},i=e.split("."),a=t.places;1==i.length&&1!=d&&(i[1]="###"),1==i.length||0===a?n.fractional=!1:(void 0===a&&(a=t.pattern?i[1].lastIndexOf("0")+1:1/0),a&&null==t.fractional&&(n.fractional=!0),!t.places&&a<i[1].length&&(a+=","+i[1].length),n.places=a);var s=i[0].split(",");return s.length>1&&(n.groupSize=s.pop().length,s.length>1&&(n.groupSize2=s.pop().length)),"("+o._realNumberRegexp(n)+")"}))}),!0);return c&&(h=h.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,(function(e,n,i,o){var s=["symbol","currency","displayName"][i.length-1],r=a.escapeString(t[s]||t.currency||"");return n=n?"[\\s\\xa0]":"",o=o?"[\\s\\xa0]":"",t.strict?n+r+o:(n&&(n+="*"),o&&(o+="*"),"(?:"+n+r+o+")?")}))),{regexp:h.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:l,factor:d}},o.parse=function(t,e){var n=o._parseInfo(e),i=new RegExp("^"+n.regexp+"$").exec(t);if(!i)return NaN;var a=i[1];if(!i[1]){if(!i[2])return NaN;a=i[2],n.factor*=-1}return(a=a.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."))*n.factor},o._realNumberRegexp=function(t){"places"in(t=t||{})||(t.places=1/0),"string"!=typeof t.decimal&&(t.decimal="."),"fractional"in t&&!/^0/.test(t.places)||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);var e=o._integerRegexp(t),n=a.buildGroupRE(t.fractional,(function(e){var n="";return e&&0!==t.places&&(n="\\"+t.decimal,t.places==1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+t.places+"}"),n}),!0),i=e+n;return n&&(i="(?:(?:"+i+")|(?:"+n+"))"),i+a.buildGroupRE(t.exponent,(function(e){return e?"([eE]"+o._integerRegexp({signed:t.eSigned})+")":""}))},o._integerRegexp=function(t){return"signed"in(t=t||{})||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="",a.buildGroupRE(t.signed,(function(t){return t?"[-+]":""}),!0)+a.buildGroupRE(t.separator,(function(e){if(!e)return"(?:\\d+)";" "==(e=a.escapeString(e))?e="\\s":" "==e&&(e="\\s\\xa0");var n=t.groupSize,i=t.groupSize2;if(i){var o="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+e+"]\\d{"+i+"})*["+e+"]\\d{"+n+"})";return n-i>0?"(?:"+o+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":o}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+e+"]\\d{"+n+"})*)"}),!0)},o}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/NodeList-dom")},function(t,e,n){var i,a;i=[n(40),n(5),n(61),n(0),n(1),n(66),n(2),n(53),n(12)],void 0===(a=function(t,e,i,a,o,s,r,l,d){var c,u=o.delegate(l,{mouseenter:s.enter,mouseleave:s.leave,keypress:i._keypress}),h=a("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){this.inherited(arguments),this._attachTemplateNodes(this.domNode),this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(t){for(var e=t;;)if(1==e.nodeType&&(this._processTemplateNode(e,(function(t,e){return t.getAttribute(e)}),this._attach)||this.searchContainerNode)&&e.firstChild)e=e.firstChild;else{if(e==t)return;for(;!e.nextSibling;)if((e=e.parentNode)==t)return;e=e.nextSibling}},_processTemplateNode:function(t,e,n){var i=!0,a=this.attachScope||this,s=e(t,"dojoAttachPoint")||e(t,"data-dojo-attach-point");if(s)for(var r,l=s.split(/\s*,\s*/);r=l.shift();)o.isArray(a[r])?a[r].push(t):a[r]=t,i="containerNode"!=r,this._attachPoints.push(r);var d=e(t,"dojoAttachEvent")||e(t,"data-dojo-attach-event");if(d)for(var c,u=d.split(/\s*,\s*/),h=o.trim;c=u.shift();)if(c){var p=null;if(-1!=c.indexOf(":")){var m=c.split(":");c=h(m[0]),p=h(m[1])}else c=h(c);p||(p=c),this._attachEvents.push(n(t,c,o.hitch(a,p)))}return i},_attach:function(t,e,i){return e="dijitclick"==(e=e.replace(/^on/,"").toLowerCase())?c||(c=n(84)):u[e]||e,r(t,e,i)},_detachTemplateNodes:function(){var t=this.attachScope||this;e.forEach(this._attachPoints,(function(e){delete t[e]})),this._attachPoints=[],e.forEach(this._attachEvents,(function(t){t.remove()})),this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes(),this.inherited(arguments)}});return o.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""}),h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(40),n(34),n(5),n(75),n(1),n(79),n(194),t],void 0===(a=function(t,e,n,i,a,o,s,r,l){n.add("dojo-preload-i18n-Api",1);var d=t.i18n={},c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,u={},h=function(e,n,i){return i=i?i.toLowerCase():t.locale,e=e.replace(/\./g,"/"),n=n.replace(/\./g,"/"),/root/i.test(i)?e+"/nls/"+n:e+"/nls/"+i+"/"+n},p=t.getL10nName=function(t,e,n){return l.i+"!"+h(t,e,n)},m=function(e,s,l){if(n("dojo-preload-i18n-Api")){var d=e.split("*"),h="preload"==d[1];if(h&&(u[e]||(u[e]=1,w(d[2],r.parse(d[3]),1,s)),l(1)),h||_(e,s,l))return}var p=c.exec(e),m=p[1]+"/",g=p[5]||p[4],f=m+g,v=p[5]&&p[4],b=v||t.locale||"",y=f+"/"+b,k=v?[b]:function(t){var e=a.extraLocale||[];return(e=o.isArray(e)?e:[e]).push(t),e}(b),S=k.length,x=function(){--S||l(o.delegate(u[y]))};i.forEach(k,(function(t){var e=f+"/"+t;n("dojo-preload-i18n-Api")&&C(e),u[e]?x():function(t,e,n,i,a,s){t([e],(function(r){var l=o.clone(r.root||r.ROOT),d=function(t,e,n,i){for(var a=[n+i],o=e.split("-"),s="",r=0;r<o.length;r++)s+=(s?"-":"")+o[r],t&&!t[s]||(a.push(n+s+"/"+i),a.specificity=s);return a}(!r._v1x&&r,a,n,i);t(d,(function(){for(var t=1;t<d.length;t++)l=o.mixin(o.clone(l),arguments[t]);var n=e+"/"+a;u[n]=l,l.$locale=d.specificity,s()}))}))}(s,f,m,g,t,x)}))};if(n("dojo-unit-tests"))var g=d.unitTests=[];n("dojo-preload-i18n-Api");var f=d.normalizeLocale=function(e){var n=e?e.toLowerCase():t.locale;return"root"==n?"ROOT":n},v=function(t,n){return n.isXdUrl(e.toUrl(t+".js"))},b=0,y=[],w=d._preloadLocalizations=function(n,a,s,r){function l(t,e){for(var n=t.split("-");n.length;){if(e(n.join("-")))return;n.pop()}e("ROOT")}function d(){b++}function c(){for(--b;!b&&y.length;)m.apply(null,y.shift())}function h(t,e,n,i){return i.toAbsMid(t+e+"/"+n)}function p(t){l(t=f(t),(function(p){if(i.indexOf(a,p)>=0){var m=n.replace(/\./g,"/")+"_"+p;return d(),function(t,e){v(t,r)||s?r([t],e):x([t],e,r)}(m,(function(n){for(var i in n){var a,s,m=n[i],g=i.match(/(.+)\/([^\/]+)$/);if(g){var f;if(a=g[2],s=g[1]+"/",m._localized=m._localized||{},"ROOT"===p){var v=f=m._localized;delete m._localized,v.root=m,u[e.toAbsMid(i)]=v}else f=m._localized,u[h(s,a,p,e)]=m;if(p!==t){function b(n,i,a,s){var p=[],m=[];l(t,(function(t){s[t]&&(p.push(e.toAbsMid(n+t+"/"+i)),m.push(h(n,i,t,e)))})),p.length?(d(),r(p,(function(){for(var s=0;s<p.length;s++)a=o.mixin(o.clone(a),arguments[s]),u[m[s]]=a;u[h(n,i,t,e)]=o.clone(a),c()}))):u[h(n,i,t,e)]=a}b(s,a,m,f)}}}c()})),!0}return!1}))}r=r||e,p(),i.forEach(t.config.extraLocale,p)},_=function(t,e,n){return b&&y.push([t,e,n]),b},C=function(){},k={},S=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),x=function(t,e,n){var a=[];i.forEach(t,(function(t){var e=n.toUrl(t+".js");function i(n){var i=S(n,C,t,k);i===k?a.push(u[e]=k.result):(i instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+e,i),i={}),a.push(u[e]=/nls\/[^\/]+\/[^\/]+$/.test(e)?i:{root:i,_v1x:1}))}if(u[e])a.push(u[e]);else{var o=n.syncLoadNls(t);if(o)a.push(o);else if(s)s.get({url:e,sync:!0,load:i,error:function(){a.push(u[e]={})}});else try{n.getText(e,!0,i)}catch(t){a.push(u[e]={})}}})),e&&e.apply(null,a)};return C=function(e){for(var n,i=e.split("/"),a=t.global[i[0]],o=1;a&&o<i.length-1;a=a[i[o++]]);return a&&((n=a[i[o]])||(n=a[i[o].replace(/-/g,"_")]),n&&(u[e]=n)),n},d.getLocalization=function(t,n,i){var a,o=h(t,n,i);return m(o,v(o,e)?e:function(t,n){x(t,n,e)},(function(t){a=t})),a},n("dojo-unit-tests")&&g.push((function(t){t.register("tests.i18n.unit",(function(t){var e;e=S("{prop:1}",C,"nonsense",k),t.is({prop:1},e),t.is(void 0,e[1]),e=S("({prop:1})",C,"nonsense",k),t.is({prop:1},e),t.is(void 0,e[1]),e=S("{'prop-x':1}",C,"nonsense",k),t.is({"prop-x":1},e),t.is(void 0,e[1]),e=S("({'prop-x':1})",C,"nonsense",k),t.is({"prop-x":1},e),t.is(void 0,e[1]),e=S("define({'prop-x':1})",C,"nonsense",k),t.is(k,e),t.is({"prop-x":1},k.result),e=S("define('some/module', {'prop-x':1})",C,"nonsense",k),t.is(k,e),t.is({"prop-x":1},k.result),e=S("this is total nonsense and should throw an error",C,"nonsense",k),t.is(e instanceof Error,!0)}))})),o.mixin(d,{dynamic:!0,normalize:function(t,e){return/^\./.test(t)?e(t):t},load:m,cache:u,getL10nName:p})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(30),n(66),n(2),n(53)],void 0===(a=function(t,e,n,i){function a(e){if((e.keyCode===t.ENTER||e.keyCode===t.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName))for(var n=e.target;n;n=n.parentNode)if(n.dojoClick)return!0}var o;n(document,"keydown",(function(t){a(t)?(o=t.target,t.preventDefault()):o=null})),n(document,"keyup",(function(t){a(t)&&t.target==o&&(o=null,n.emit(t.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,altKey:t.altKey,_origType:t.type}))}));var s=function(t,e){return t.dojoClick=!0,n(t,"click",e)};return s.click=s,s.press=function(a,o){var s=n(a,i.press,(function(t){("mousedown"!=t.type||e.isLeft(t))&&o(t)})),r=n(a,"keydown",(function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||o(e)}));return{remove:function(){s.remove(),r.remove()}}},s.release=function(a,o){var s=n(a,i.release,(function(t){("mouseup"!=t.type||e.isLeft(t))&&o(t)})),r=n(a,"keyup",(function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||o(e)}));return{remove:function(){s.remove(),r.remove()}}},s.move=i.move,s}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/domReady")},function(t,e,n){var i,a;i=[n(1),n(5),n(181),n(439),n(83),n(160),n(59),n(540),t],void 0===(a=function(t,e,n,i,a,o,s,r,l){var d={};function c(t,e,n,a){return a.replace(/([a-z])\1*/gi,(function(o){var r,l,c=o.charAt(0),u=o.length,h=["abbr","wide","narrow"];switch(c){case"G":r=e[u<4?"eraAbbr":"eraNames"][t.getFullYear()<0?0:1];break;case"y":switch(r=t.getFullYear(),u){case 1:break;case 2:if(!n.fullYear){r=(r=String(r)).substr(r.length-2);break}default:l=!0}break;case"Q":case"q":r=Math.ceil((t.getMonth()+1)/3),l=!0;break;case"M":case"L":var p=t.getMonth();if(u<3)r=p+1,l=!0;else{var m=["months","L"==c?"standAlone":"format",h[u-3]].join("-");r=e[m][p]}break;case"w":r=d._getWeekOfYear(t,0),l=!0;break;case"d":r=t.getDate(),l=!0;break;case"D":r=d._getDayOfYear(t),l=!0;break;case"e":case"c":var g=t.getDay();if(u<2){r=(g-i.getFirstDayOfWeek(n.locale)+8)%7;break}case"E":if(g=t.getDay(),u<3)r=g+1,l=!0;else{var f=["days","c"==c?"standAlone":"format",h[u-3]].join("-");r=e[f][g]}break;case"a":var v=t.getHours()<12?"am":"pm";r=n[v]||e["dayPeriods-format-wide-"+v];break;case"h":case"H":case"K":case"k":var b=t.getHours();switch(c){case"h":r=b%12||12;break;case"H":r=b;break;case"K":r=b%12;break;case"k":r=b||24}l=!0;break;case"m":r=t.getMinutes(),l=!0;break;case"s":r=t.getSeconds(),l=!0;break;case"S":r=Math.round(t.getMilliseconds()*Math.pow(10,u-3)),l=!0;break;case"v":case"z":if(r=d._getZone(t,!0,n))break;u=4;case"Z":var y=d._getZone(t,!1,n),w=[y<=0?"+":"-",s.pad(Math.floor(Math.abs(y)/60),2),s.pad(Math.abs(y)%60,2)];4==u&&(w.splice(0,0,"GMT"),w.splice(3,0,":")),r=w.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+a)}return l&&(r=s.pad(r,u)),r}))}function u(t,n,i,a){var o=function(t){return t};n=n||o,i=i||o,a=a||o;var s=t.match(/(''|[^'])+/g),r="'"==t.charAt(0);return e.forEach(s,(function(t,e){t?(s[e]=(r?i:n)(t.replace(/''/g,"'")),r=!r):s[e]=""})),a(s.join(""))}function h(t,e,n,i){return i=o.escapeString(i),n.strict||(i=i.replace(" a"," ?a")),i.replace(/([a-z])\1*/gi,(function(i){var a,o=i.charAt(0),s=i.length,r="",l="";switch(n.strict?(s>1&&(r="0{"+(s-1)+"}"),s>2&&(l="0{"+(s-2)+"}")):(r="0?",l="0{0,2}"),o){case"y":a="\\d{2,4}";break;case"M":case"L":a=s>2?"\\S+?":"1[0-2]|"+r+"[1-9]";break;case"D":a="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+r+"[1-9][0-9]|"+l+"[1-9]";break;case"d":a="3[01]|[12]\\d|"+r+"[1-9]";break;case"w":a="[1-4][0-9]|5[0-3]|"+r+"[1-9]";break;case"E":case"e":case"c":a=".+?";break;case"h":a="1[0-2]|"+r+"[1-9]";break;case"k":a="1[01]|"+r+"\\d";break;case"H":a="1\\d|2[0-3]|"+r+"\\d";break;case"K":a="1\\d|2[0-4]|"+r+"[1-9]";break;case"m":case"s":a="[0-5]\\d";break;case"S":a="\\d{"+s+"}";break;case"a":var d=n.am||e["dayPeriods-format-wide-am"],c=n.pm||e["dayPeriods-format-wide-pm"];a=d+"|"+c,n.strict||(d!=d.toLowerCase()&&(a+="|"+d.toLowerCase()),c!=c.toLowerCase()&&(a+="|"+c.toLowerCase()),-1!=a.indexOf(".")&&(a+="|"+a.replace(/\./g,""))),a=a.replace(/\./g,"\\.");break;default:a=".*"}return t&&t.push(i),"("+a+")"})).replace(/[\xa0 ]/g,"[\\s\\xa0]")}t.setObject("dojo/date/locale".replace(/\//g,"."),d),d._getZone=function(t,e,i){return e?n.getTimezoneName(t):t.getTimezoneOffset()},d.format=function(e,n){n=n||{};var i,o=a.normalizeLocale(n.locale),s=n.formatLength||"short",r=d._getGregorianBundle(o),l=[],h=t.hitch(this,c,e,r,n);return"year"==n.selector?u(r["dateFormatItem-yyyy"]||"yyyy",h):("date"!=n.selector&&(i=n.timePattern||r["timeFormat-"+s])&&l.push(u(i,h)),"time"!=n.selector&&(i=n.datePattern||r["dateFormat-"+s])&&l.push(u(i,h)),1==l.length?l[0]:r["dateTimeFormat-"+s].replace(/\'/g,"").replace(/\{(\d+)\}/g,(function(t,e){return l[e]})))},d.regexp=function(t){return d._parseInfo(t).regexp},d._parseInfo=function(e){e=e||{};var n=a.normalizeLocale(e.locale),i=d._getGregorianBundle(n),o=e.formatLength||"short",s=e.datePattern||i["dateFormat-"+o],r=e.timePattern||i["timeFormat-"+o],l=[];return{regexp:u("date"==e.selector?s:"time"==e.selector?r:i["dateTimeFormat-"+o].replace(/\{(\d+)\}/g,(function(t,e){return[r,s][e]})),t.hitch(this,h,l,i,e)),tokens:l,bundle:i}},d.parse=function(t,i){var a=/[\u200E\u200F\u202A\u202E]/g,o=d._parseInfo(i),s=o.tokens,r=o.bundle,l=new RegExp("^"+o.regexp.replace(a,"")+"$",o.strict?"":"i").exec(t&&t.replace(a,""));if(!l)return null;var c=["abbr","wide","narrow"],u=[1970,0,1,0,0,0,0],h="",p=e.every(l,(function(t,n){if(!n)return!0;var a=s[n-1],o=a.length,l=a.charAt(0);switch(l){case"y":if(2!=o&&i.strict)u[0]=t;else if(t<100){t=Number(t);var d=""+(new Date).getFullYear(),p=100*d.substring(0,2),m=Math.min(Number(d.substring(2,4))+20,99);u[0]=t<m?p+t:p-100+t}else{if(i.strict)return!1;u[0]=t}break;case"M":case"L":if(o>2){var g=r["months-"+("L"==l?"standAlone":"format")+"-"+c[o-3]].concat();if(i.strict||(t=t.replace(".","").toLowerCase(),g=e.map(g,(function(t){return t.replace(".","").toLowerCase()}))),-1==(t=e.indexOf(g,t)))return!1}else t--;u[1]=t;break;case"E":case"e":case"c":var f=r["days-"+("c"==l?"standAlone":"format")+"-"+c[o-3]].concat();if(i.strict||(t=t.toLowerCase(),f=e.map(f,(function(t){return t.toLowerCase()}))),-1==(t=e.indexOf(f,t)))return!1;break;case"D":u[1]=0;case"d":u[2]=t;break;case"a":var v=i.am||r["dayPeriods-format-wide-am"],b=i.pm||r["dayPeriods-format-wide-pm"];if(!i.strict){var y=/\./g;t=t.replace(y,"").toLowerCase(),v=v.replace(y,"").toLowerCase(),b=b.replace(y,"").toLowerCase()}if(i.strict&&t!=v&&t!=b)return!1;h=t==b?"p":t==v?"a":"";break;case"K":24==t&&(t=0);case"h":case"H":case"k":if(t>23)return!1;u[3]=t;break;case"m":u[4]=t;break;case"s":u[5]=t;break;case"S":u[6]=t}return!0})),m=+u[3];"p"===h&&m<12?u[3]=m+12:"a"===h&&12==m&&(u[3]=0);var g=new Date(u[0],u[1],u[2],u[3],u[4],u[5],u[6]);i.strict&&g.setFullYear(u[0]);var f=s.join(""),v=-1!=f.indexOf("d"),b=-1!=f.indexOf("M");return!p||b&&g.getMonth()>u[1]||v&&g.getDate()>u[2]?null:((b&&g.getMonth()<u[1]||v&&g.getDate()<u[2])&&(g=n.add(g,"hour",1)),g)};var p=[];return d.addCustomFormats=function(t,e){p.push({pkg:t,name:e})},d._getGregorianBundle=function(n){var i={};return e.forEach(p,(function(e){var o=a.getLocalization(e.pkg,e.name,n);i=t.mixin(i,o)}),this),i},d.addCustomFormats("dojo/date/locale".replace(/\/date\/locale$/,".cldr"),"gregorian"),d.getNames=function(t,e,n,i){var a,o=d._getGregorianBundle(i),s=[t,n,e];"standAlone"==n&&(1==(a=o[s.join("-")])[0]&&(a=void 0));return s[1]="format",(a||o[s.join("-")]).concat()},d.isWeekend=function(t,e){var n=i.getWeekend(e),a=(t||new Date).getDay();return n.end<n.start&&(n.end+=7,a<n.start&&(a+=7)),a>=n.start&&a<=n.end},d._getDayOfYear=function(t){return n.difference(new Date(t.getFullYear(),0,1,t.getHours()),t)+1},d._getWeekOfYear=function(t,e){1==arguments.length&&(e=0);var n=new Date(t.getFullYear(),0,1).getDay(),i=(n-e+7)%7,a=Math.floor((d._getDayOfYear(t)+i-1)/7);return n==e&&a++,a},d}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(342),n(348)],void 0===(a=function(t,e){return function(n,i){var a=e(n,i);return t(a)?a:void 0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(247),n(295),n(108)],void 0===(a=function(t,e,n){return function(i){return n(i)?t(i):e(i)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return null!=t&&"object"==typeof t}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(355),n(388),n(116),n(50),n(393)],void 0===(a=function(t,e,n,i,a){return function(o){return"function"==typeof o?o:null==o?n:"object"==typeof o?i(o)?e(o[0],o[1]):t(o):a(o)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(6),n(4),n(3),n(7),n(2),n(92),n(26),n(100),n(73),n(74),n(277),n(494),n(1057),n(1058),n(81),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t("mojo.neapolitan.renderers._Renderer",[],{outerPadding:9,innerPadding:9,outputTplStr:"",getMarkup:function(t){var e=this.getContent(t);if(t.hasDynamicContent&&t.dynamicContentRules){var n;n="Groups"===t.dynamicContentFieldType?this._buildGroupsPrefix(t):this._buildAudienceFieldsPrefix(t);var o=this._buildConditionalSuffix(t),s=a.create("div");a.place(n,s),a.place(e,s),a.place(o,s),e=s}var r=e.outerHTML,l=a.create("div");a.place(e,l);var c=i(l).html();return a.destroy(),r!==c&&d.info("check-feature-use","Found inconsistency between innerHTML with created parent and outerHTML",{campaign_id:window.app.campaignId}),c},getContent:function(t){this.template||(this.template=new dojox.dtl.Template(this.outputTplStr));var n=this.getOutputModel(e.clone(t));n=e.mixin({outerPadding:this.outerPadding,innerPadding:this.innerPadding},n);var i=a.toDom(e.trim(this.template.render(new h(n))));return window.top.Previewer&&l(t.styles,{selector:".webContent__content .button:hover"})&&t.styles.splice(4,1),this._inlineStyles(i,t.styles)},getOutputModel:function(t){return t},_inlineStyles:function(t,e){return e&&e.forEach((function(e){for(var n in e.props)if(e.props.hasOwnProperty(n)){var a=e.props[n].value;if(a&&""!==a){var o=e.props[n].selector||e.selector;"mcBlockContainer"===o?i(t).style(c.dashToCamel(n),a):i(o,t).style(c.dashToCamel(n),a)}}})),t},_buildConditionalSuffix:function(t){var e=a.create("span");return e="Groups"===t.dynamicContentFieldType?"*|END:INTERESTED|*":"*|END:IF|*",a.create("span",{style:{display:"none"},innerHTML:e})},_buildAudienceFieldsPrefix:function(t){var e="*|"+t.dynamicContentRules.condition+":"+t.dynamicContentRules.field+"="+t.dynamicContentRules.input+"|*";return a.create("span",{style:{display:"none"},innerHTML:e})},_buildGroupsPrefix:function(t){var e="*|INTERESTED:"+t.dynamicContentRules.field+":"+t.dynamicContentRules.input+"|*";return"IFNOT"===t.dynamicContentRules.condition&&(e+="*|ELSE:|*"),a.create("span",{style:{display:"none"},innerHTML:e})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1145),n(1146)],void 0===(a=function(t,e){return t(e)}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1),n(5),n(9),n(2),n(4),n(21),n(16),n(150),n(2018),n(118),n(81)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([e,n,c],{type:null,widgetsInTemplate:!0,hasDynamicContent:!1,isDynamicContentEnabled:!1,CAMPAIGN_RENDERING_TYPES:{PAGE:"page"},isPageTemplate:!1,constructor:function(t){this._watches=[],this._syncs=[]},postMixInProperties:function(){this.inherited(arguments),this.storeMap={},this.isDynamicContentEnabled=null,this.isDynamicContentEnabled=this.block._campaignRenderingType!==this.CAMPAIGN_RENDERING_TYPES.PAGE,this.hasDynamicContent=this.block.hasDynamicContent},postCreate:function(){if(this.isPageTemplate=this.block._campaignRenderingType===this.CAMPAIGN_RENDERING_TYPES.PAGE,this.styleEditorContainer){var t=this.getStyleEditor();if(!t)return;t.startup(),r.place(t.domNode,this.styleEditorContainer,"only"),this.watch("styles",i.hitch(this,(function(){t.updateInputs(this.block.styles)})))}},uninitialize:function(){a.forEach(this._watches,(function(t){t.unwatch()})),a.forEach(this._syncs,(function(t){t.remove()})),this._watches=[],this._syncs=[],this.inherited(arguments)},watch:function(t,e){var n=t?this.block.watch(t,e):this.block.watch(e);this._watches.push(n)},sync:function(t,e,n){var i=h(this.block,t,e,n);this._syncs.push(i)},getStyleEditor:function(){if(!this.styleEditor||this.styleEditor._destroyed){var t=i.clone(this.block.styles);this.styleEditor=new u({styles:t,type:this.block._name,kbLink:this.block._kbLink}),this.connect(this.styleEditor,"onChange",(function(t){this.updateStyles(t),this.applyAll&&this._updateAllBlockStyles()})),this.connect(this.styleEditor,"onCancel",(function(t){this.updateStyles(t),this._done(),this.applyAll&&this._revertAllBlockStyles(),this.applyAll=!1})),this.connect(this.styleEditor,"onRevert",(function(t){this.updateStyles(t),this.applyAll&&this._updateAllBlockStyles()})),this.connect(this.styleEditor,"onApplyToAll",(function(t){this.applyAll=t,this.applyAll?this._updateAllBlockStyles():this._revertAllBlockStyles()}))}return this.styleEditor},_setupPreservedContent:function(){if(this.switchContentBtn){var t=this;window.app.hasPreservedContent()&&(o.set(this.switchContentBtn,"display",""),s(this.switchContentBtn,"click",(function(e){e.stopPropagation(),e.preventDefault(),window.app.openPreservedContentDialog().then((function(e){t.block._endpoint.getPreservedContent(e.name,e.type).then((function(e){t.editor.setData(e),t.onCKChange()}))}))})))}},_updateAllBlockStyles:function(){this._blocksByType||(this._blocksByType=window.app.byType(this.type)),a.forEach(this._blocksByType,i.hitch(this,(function(t){t!==this.block&&t.applyStyles(this.block.styles)})))},_revertAllBlockStyles:function(){this._blocksByType&&a.forEach(this._blocksByType,i.hitch(this,(function(t){t!==this.block&&t.revertStyles()})))},_saveAllBlockStyles:function(){this._blocksByType&&window.app.updateAll(this._blocksByType,{notify:!0})},updateStyles:function(t){null==this.currentStyles&&(this.currentStyles=i.clone(this.block.styles)),this.block.set("styles",t)},revertStyles:function(){this.currentStyles&&(this.block.set("styles",this.currentStyles),this.currentStyles=null)},saveAndHide:function(){this.publishDone(),this.editorContainerWidget&&window.ga("send","event","draft_edit","click",this.editorContainerWidget.header+":"+this.editorContainerWidget.selectedSection+":Save & Close")},cancelAndHide:function(){this._skipSave=!0,this.publishDone()},_done:function(){this.styleEditor&&!this.styleEditor._destroyed&&(this.applyAll&&(this.applyAll=!1,this._saveAllBlockStyles()),this.styleEditor.done(),this.styleEditor.destroy())},save:function(t){return this.block.save(t)},onDataUpdate:function(t){},onClose:function(){this._done(),this._skipSave||this.save().then(i.hitch(this,"destroy"))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(107),n(344),n(345)],void 0===(a=function(t,e,n){var i=t?t.toStringTag:void 0;return function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?e(t):n(t)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(4),n(12),n(11),n(1186)],void 0===(a=function(t,e,n,i,a,o){return t([i,a],{templateString:o,type:"info",title:"",message:"",containerClass:"",postCreate:function(){e.add(this.domNode,this.type),e.add(this.domNode,this.containerClass),e.add(this.icon,{success:"tick-circle",warning:"warn-circle",error:"not-allowed",info:"info-circle"}[this.type]),(this.title||this.message)&&(this.containerNode.innerHTML="",this.title&&this.containerNode.appendChild(n.toDom("<h4>"+this.title+"</h4>")),this.message&&this.containerNode.appendChild(n.toDom("<p>"+this.message+"</p>")))},flash:function(t){var e={node:this.id,duration:1500},n={node:this.id,properties:{height:0,paddingTop:0,paddingBottom:0}};setTimeout(function(){dojo.fx.combine([dojo.fadeOut(e),dojo.animateProperty(n)]).play()}.bind(this),t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(145),n(435)],void 0===(a=function(t,e,n){return t("dojo.store.Memory",null,{constructor:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:n,get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var n=this.data,i=this.index,a=this.idProperty,o=t[a]=e&&"id"in e?e.id:a in t?t[a]:Math.random();if(o in i){if(e&&!1===e.overwrite)throw new Error("Object already exists");n[i[o]]=t}else i[o]=n.push(t)-1;return o},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,n=this.data;if(t in e)return n.splice(e[t],1),this.setData(n),!0},query:function(t,n){return e(this.queryEngine(t,n)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,n=t.length;e<n;e++)this.index[t[e][this.idProperty]]=e}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(35),n(22),n(47),n(118),n(15),n(2017),n(1056),n(2120),n(100),n(692)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return e([o],{id:null,type:null,variant:null,_containerId:null,_name:"Block",_kbLink:null,_label:null,_campaignType:null,_visible:!0,_ecommOnly:!1,_editingTypes:["campaign","page","template"],_requiresPlatform:null,_paidOnly:!1,_isSelected:!1,_default:!1,_imageUploaderType:"image",_renderMergeTags:!1,_campaignRenderingType:null,_blockEditorControls:["sort","edit","clone","delete"],hasDynamicContent:!1,hasOpenedDynamicContentWithoutSaving:!1,dynamicContentRules:null,constructor:function(){this._endpoint=new d(window.parent.neapolitan_content_block_root,window.parent.tpl_id,window.parent.variant)},postscript:function(e,i){i&&u.extend(!0,this,i),this.styles&&t.forEach(this.styles,(function(e){if(n.isArray(e.props)){var i={};t.forEach(e.props,(function(t){i[t]={value:""}})),e.props=i}})),e&&u.extend(!0,this,e)},data:function(){var e={};for(var i in this)i in o.prototype||0===i.indexOf("_")||-1!==t.indexOf(["id","type","editedBy","editedById"],i)||n.isFunction(this[i])||(e[i]=this[i]);return e},save:function(t){if(this._previousStyles=null,this.id)return this._endpoint.update(this._containerId,this.id,{html:this.getMarkup(),data:this.data()},t);var e=this._endpoint.create(this._containerId,this.getMarkup(Preview.getContainer(this._containerId).containerWidth),this._index,this.type,this.data(),this._default);return e.then(n.hitch(this,(function(t){this.id=t.id}))),e},remove:function(t){if(this._editor&&this._editor.cancelAndHide(),t){this.get("_isSelected")&&r.globalPublish("native/mobile/block/action/done");var e=new a;return e.resolve(),e}return this._endpoint.remove(this._containerId,this.id)},reorder:function(t,e){var i;i=e?this.getMarkup(Preview.getContainer(e).containerWidth):this.getMarkup();var a=this._endpoint.update(this._containerId,this.id,{html:i,data:this.data(),index:t,new_container:e}),o=this;return a.then(n.hitch(this,(function(){e&&o.set("_containerId",e),this.set("_index",t)}))),a},applyStyles:function(t){this._previousStyles||(this._previousStyles=this.styles),this.set("styles",t)},revertStyles:function(){this.set("styles",this._previousStyles),this._previousStyles=null},getRendererModel:function(t){return t||(t=Preview.getContainer(this._containerId).containerWidth),n.mixin({containerWidth:t},this.data())},getContent:function(t){return c.getContent(this.type,this.getRendererModel(t),this._campaignRenderingType)},getMarkup:function(t){return c.getMarkup(this.type,this.getRendererModel(t),this._campaignRenderingType)},getContainerWidth:function(){return Preview.getContainer(this._containerId).containerWidth},openEditor:function(){h.stop(),(!this._editor||this._editor&&!this._editorOpen)&&(this._editor=l.create(this.type,this),this.set("_editorOpen",!0),this._editor.show(),i.after(this._editor,"destroy",n.hitch(this,(function(){this.set("_editorOpen",!1)}))))},updateData:function(t){this.set(t),this._editor&&this._editorOpen&&this._editor.onDataUpdate(t)},onLinkUpdate:function(t,e,n){var i=new a;return i.reject("Oops! Looks like we unable to change this link. Contact support if the problem persist."),i},canLinkUpdate:function(){return!0},_setupMergeListeners:function(t){},_teardownMergeListeners:function(t){},applyBrandStyles:function(t){var e=t[this.type];e&&(this.styles=this.styles.map((function(t){return Object.keys(e).forEach((function(n){t.props.hasOwnProperty(n)?t.props[n].value=e[n]:t.selector===n&&Object.keys(e[n]).forEach((function(i){t.props.hasOwnProperty(i)&&(t.props[i].value=e[n][i])}))})),t})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(19),n(3),n(9),n(144),n(15),n(175)],void 0===(a=function(t,e,n,i,a,o,s,r){return t(null,{mobileSaveHandler:null,toggleCKEditModeHandler:null,domElementHiddenOnFocus:[],togglerElements:[],postCreate:function(){this.inherited(arguments),this._setupTogglerObjectsForCKFocus(),r.toggleViewportZooming(!0),window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.setScreenState({state:"blockEditor",backAction:e.hitch(this,this.saveAndHide)})},destroy:function(){this.inherited(arguments),r.toggleViewportZooming(!1)},_setupTogglerObjectsForCKFocus:function(){this.togglerElements=this.domElementHiddenOnFocus.map(e.hitch(this,(function(t){return new o({node:this[t]})})))},_setupNativeMobileHandlers:function(){this.mobileSaveHandler=n.subscribe("current/block/editor/save/for/mobile",e.hitch(this,this.saveAndHide)),this.toggleCKEditModeHandler=n.subscribe("current/block/editor/toggle/ckeditor/mode",e.hitch(this,this._toggleCKEditMode))},_teardownNativeMobileHandlers:function(){this.mobileSaveHandler.remove(),this.toggleCKEditModeHandler.remove(),window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.removeStateQueue();var t=window.top.app&&window.top.app.nativeUtils&&window.top.app.nativeUtils.getNativeVersion();t&&t.then((function(t){t&&t.hasOwnProperty("versionNumber")&&r.campaignBlockSelected()}))},_toggleDomElementsOnFocus:function(t){var n=this;this.togglerElements.forEach(e.hitch(this,(function(e){t?(this.domElementHiddenOnFocus.forEach((function(t){a.set(n[t],"display","")})),e.show()):(e.hide(),this.domElementHiddenOnFocus.forEach((function(t){a.set(n[t],"display","none")})))})))},_toggleCKEditMode:function(t){this.ckeditorContainer&&(t.isEditMode?this._toggleDomElementsOnFocus(!1):this._toggleDomElementsOnFocus(!0))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(1),n(32),n(79),n(10),n(7),n(3),n(4),n(27),n(9),n(22),n(30),n(2),n(6),n(43),n(31),n(560),n(53),n(49),n(706),n(14),n(448),n(561),n(1171),n(16),n(8),n(17),n(15),n(149),n(732)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j){var E={},P=[],D=!1,N=null;m((function(){!0===(!document.referrer.includes("wizard/template")&&document.location.pathname.includes("neapolitan"))&&window.app&&window.app.rootUrl&&(window.app.isAccountOldAndActivated||g.post(x.toUrl(window.app.rootUrl+"/check-placeholder-content"),{data:{id:window.app.campaignId},handleAs:"json"}).then((function(t){var e=new C(t.presend_checks);e.hasCheckWithCode(_.CODE_DEFAULT_TEXT_CONTENT)&&new j({type:"onLoad",presendChecks:e.getCheckWithCode(_.CODE_DEFAULT_TEXT_CONTENT),trackingLocation:"draft_editor"})}),(function(t){}))),N=p("[data-type=wizardNext]")[0]}));var L=function(){D||a.byId("wizard-form").submit()},M={onNextSubmit:function(t){P.push(t)},goToNextStep:function(e){o.set(e,"value","please wait..."),setTimeout((function(){e.disabled=!0}),0);try{t.forEach(P,(function(t){t()}))}catch(t){}L()},skipDomainVerification:function(){a.byId("skip-domain-verification").value=1,L()},disableForm:function(){D=!0,N&&o.set(N,"disabled","disabled")},enableForm:function(){D=!1,N&&o.remove(N,"disabled")},togglePreview:function(){this.newPreviewer||(this.newPreviewer=new A({previewId:this.currentCampaignId,previewType:this.campaignType,titleText:this.campaignTitle,showMergeInfo:this.showMergeInfo,splitsOnSubject:this.splitsOnSubject})),!0===this.newPreviewer.displayActive?this.newPreviewer.hide():this.newPreviewer.show()},toggleInboxPreview:function(){this.togglePreview(),this.newPreviewer&&this.newPreviewer.changeView("inbox")},resetSendTestDialog:function(){a.byId("send-test-success").style.display="none",a.byId("send-test-error").style.display="none",a.byId("send-test-samedomain").style.display="none",a.byId("send-test-form").style.display=""},resetAutomationSendTestDialog:function(){var t=p(".test-child-campaigns")[0],e=w.byId("test-specific-email"),n=w.byId("test-all"),i=a.byId("automation-test-email"),o=a.byId("automation-test-message");e.checked&&(t.style.display="none",e.attr("checked",!1),n.attr("checked",!0)),i.value="",o.value="";var r=p("[for='automation-test-message']")[0];s.contains(r,"disclosure-open")&&mojo.utils.disclosureElement("automation-top-bar",r,!1),a.byId("automation-send-test-success").style.display="none",a.byId("automation-send-test-samedomain").style.display="none",a.byId("automation-send-test-form").style.display=""},showSendTestDialog:function(){M.resetSendTestDialog(),w.byId("send-test-modal").show(),a.byId("test-email").focus()},showAutomationSendTestDialog:function(){M.resetAutomationSendTestDialog(),w.byId("automation-send-test-modal").show(),a.byId("automation-test-email").focus()},showPushToMobileDialog:function(){dijit.byId("push-mobile-dialog").show()},showAutomationStartModal:function(t){w.byId("automation-start-modal").toURL=t,w.byId("automation-start-modal").show()},sendTest:function(e,n,o,r){var l=new c;return d(),setTimeout((function(){x.toUrl("campaigns/wizard/send-test-text");var r=x.toUrl("campaigns/wizard/send-test"),c=x.toUrl("templates/send-test"),u=r;e&&(u+="?group="+e),"template"===n&&(u=c);var h=a.byId("test-email");h.nextSibling&&s.contains(h.nextSibling,"invalid-error")&&h.parentNode.removeChild(h.nextSibling);var m=a.byId("send-test-samedomain");if(m){m.style.display="none";for(var g=h.value.split(","),f=0;f<g.length;++f){var v=g[f],b=(v=v.replace(/\s+/g,"")).split("@");if(window.campaign_from_domain&&b[1]&&b[1]===window.campaign_from_domain){m.style.display="";break}}}for(var _=p("input:checked","sendtest-users"),C=[],k=0;k<_.length;k++)C.push(_[k].value);for(var S=p("input:checked","sendtest-notifications"),I=[],T=0;T<S.length;T++)I.push(S[T].value);var A=a.byId("test-message"),j="",E="N";A&&(j=A.value,E="Y");var P=document.createElement("div");P.className="test-sending progress section",P.innerHTML="<h4>sending test</h4>";var D=document.createElement("div");P.appendChild(D);var N=a.byId("send-test-form");N&&(N.style.display="none",N.parentNode.insertBefore(P,N));var L=new y({indeterminate:!0},D),M={};M.id=o,M["test-email"]=h.value,C&&(M["login-ids"]=C.join()),j&&(M["test-message"]=j),E&&(M["include-message"]=E),I&&(M["notification-ids"]=I.join());var B=w.byId("test-all");if(B){var R=B.checked;R&&(M["test-all"]=R)}var F=w.byId("test-specific-email");if(F){var O=F.checked;if(O){M["test-specific-email"]=O;var U=[];t.forEach(p("[name^=campaign_]"),(function(t){t.checked&&U.push(t.name.split("_")[1])})),M["test-selected"]=U.join()}}var $=w.byId("test-subjectSelect");$&&(M.subject_variate=$.value);var H=w.byId("test-fromNameSelect");H&&(M.from_variate=H.value),i.post({url:u,content:M,handleAs:"json",sync:!0,load:function(t){if(L.destroyRecursive(),P.parentNode&&P.parentNode.removeChild(P),t.error){var e=t.error_msg;if(w.byId("test-all")||w.byId("test-specific-email")){var n=a.byId("send-test-error");n&&(n.style.display="");var i=a.byId("send-test-error-message");i&&(i.innerHTML=e)}else{var o=a.byId("send-test-form");o&&(o.style.display="");var r=h.parentNode;if(r){var c=document.createElement("span");s.add(c,"invalid-error"),s.add(h,"invalid"),c.innerHTML=e,r.insertBefore(c,h.nextSibling)}s.remove(a.byId("test-limit-warning"),"hide")}l.reject(e)}else{var u=a.byId("send-test-success");u&&(u.style.display="");var m=p(".finish-tests")[0];m&&m.focus(),l.resolve()}d()}})}),200),l.promise;function d(){r?T.toggleButtonLoadingState(r):T.toggleButtonLoadingState(dojo.query(".send-test-button"))}},handleSendTestKeyPress:function(t){t.keyCode==u.ENTER&&p(".send-test-button")[0].click()},optimizeSendTime:function(t,e,n){if(E[t]=E[t]||{},E[t][e]&&!n)return E[t][e];var i=new c;return E[t][e]=i,M._optimizeSendTimeCall(t,e,i),i},_optimizeSendTimeCall:function(t,e,n){var a={url:x.toUrl("campaigns/wizard/optimize-send-time"),handleAs:"json",content:{id:t,schedule_date:e}};k(i.post(a),{onError:function(t){n.reject(t)},onFailed:function(t){n.reject(t)},onComplete:function(t){t.cached?n.resolve(t):i.post(a).then((function(t){n.resolve(t)}))}})},moveFinalAction:function(t){var e=p(".final-action-container")[0];r.place(t,e,"only")},repositionFlashBlock:function(){var t=a.byId("av-flash-block"),e=p(".flash-block-container")[0];r.place(t,e,"only")},getPlainText:function(t){var e=new c,n=a.byId("edit-plaintext-dialog-"+t),o=p("textarea",n)[0];return i.get({url:x.toUrl("campaigns/get-text",{id:t}),handleAs:"json"}).then((function(t){switch(t.status){case"error":e.reject();break;default:o.value=t.content,o.focus(),e.resolve()}})),e},showPlainTextDialog:function(t){var e=dijit.byId("edit-plaintext-dialog-"+t);this.getPlainText(t).then((function(){e.show()}))},hidePlainTextDialog:function(t){dijit.byId("edit-plaintext-dialog-"+t).hide()},savePlainTextFromModal:function(t,e){T.toggleButtonLoadingState(t);var n=a.byId("edit-plaintext-dialog-"+e),i=p(".plain-text-checklist-item[data-campaign-id="+e+"]")[0],r=p("textarea",n)[0];if(r.value){var l=r.value;mojo.app.wizard.syncCampaignPlainText(l,!1,e).then((function(n){switch(n.status){case"error":T.toggleButtonLoadingState(t);break;default:T.toggleButtonLoadingState(t),a=p(".media-image .freddicon",i)[0],(l=o.get(a,"data-icon-style"))||(l="fill-large"),s.remove(a,"warn-"+l),s.add(a,"tick-"+l),d.set(p("[data-message-type=success]",i)[0],"display","none"),d.set(p("[data-message-type=warning]",i)[0],"display","none"),d.set(p("[data-message-type=edited]",i)[0],"display",""),dijit.byId("edit-plaintext-dialog-"+e).hide(),mojo.app.wizard.cachedTextContent=r.value}var a,l}))}else confirm("A plain-text version of your email is required. Why don't you generate it from the HTML version?"),T.toggleButtonLoadingState(t)},regenPlainText:function(t,e){var n=a.byId("edit-plaintext-dialog-"+e),s=p("textarea",n)[0];T.toggleButtonLoadingState(t),i.post({url:x.toUrl("campaigns/regen-text",{id:e}),handleAs:"json"}).then((function(e){switch(e.status){case"error":T.toggleButtonLoadingState(t);break;default:o.set(s,"value",e.content),T.toggleButtonLoadingState(t)}}))},syncCampaignPlainText:function(t,e,n){var a=new c;return i.post({url:x.toUrl("campaigns/text-update",{id:n}),handleAs:"json",sync:e,content:{text:t}}).then((function(t){switch(t){case"error":a.reject(t);break;default:a.resolve(t)}})),a},syncCampaignHtml:function(t,e,n){var a=new c;return i.post({url:x.toUrl("campaigns/wizard/html-update"),handleAs:"text",sync:n,content:{html:t,id:mojo.app.wizard.currentCampaignId,inline_css:e}}).then((function(t){switch(t){case"error":a.reject(t);break;default:a.resolve(t)}})),a},syncCampaignUrl:function(t,e,n){var a=new c;return i.post({url:x.toUrl("campaigns/wizard/url-update"),content:{url:t,id:mojo.app.wizard.currentCampaignId,"auto-footer":e},sync:n,handleAs:"text"}).then((function(t){switch(t){case"error":a.reject(t);break;default:a.resolve(t)}})),a},syncTemplateHtml:function(t,e,n){var a=new c;return i.post({url:x.toUrl("templates/design/save"),handleAs:"text",sync:n,content:{tid:t,html:e,type:"overwrite"}}).then((function(t){var e=JSON.parse(t);void 0!==e.error?a.reject(e.error.message):a.resolve(e.result)})),a},pushPreviewToMobile:function(){i.post({url:x.toUrl("campaigns/wizard/send-to-mobile",{id:mojo.app.wizard.currentCampaignId}),handleAs:"json"}).then((function(t){"success"===t.result?T.toast("Sent!","message"):T.toast("Unable to send to your mobile device. Please try again shortly","error")})),dijit.byId("push-mobile-dialog")&&dijit.byId("push-mobile-dialog").hide()},refreshIframes:function(){var t=o.get(p(".preview-frame")[0],"src");p(".preview-frame",this.domNode).attr("src",""),p(".preview-frame",this.domNode).attr("src",t)},changeWizardPane:function(t){var e=p("#"+t+"-link",this.domTabNode)[0];this._toggleEditorPane(this.domTabNode,e)},_toggleEditorPane:function(t,e){var n=e;"BUTTON"!==n.nodeName&&(n=p(e).closest("button")[0]),p("button",t).removeClass("v-buttonGroupBordered--active"),p(n).addClass("v-buttonGroupBordered--active");var i=n.id.replace("link","pane");w.byId("toolcol-panes").selectChild(i)},instantiateEditorTabs:function(t){this.domTabNode=t,t&&p("button",t).on("click",(function(e){e.stopPropagation(),e.preventDefault();var n=e.target;"BUTTON"!=n.nodeName&&(n=p(e.target).closest("button")[0]),p("button",t).removeClass("v-buttonGroupBordered--active"),p(n).addClass("v-buttonGroupBordered--active");var i=n.id.replace("link","pane");w.byId("toolcol-panes").selectChild(i),T.globalPublish("neapolitan/tabs/"+i);return-1!==["/landing-pages/design","/campaigns/wizard/neapolitan","/templates/edit"].indexOf(window.location.pathname)&&window.ga("send","event","draft_edit","click",n.childNodes[0].nodeValue),!1})),this.enableSideBarToggle()},enableSideBarToggle:function(){var t=p(".drawer-tab")[0];t&&h(t,v.press,(function(t){t.stopPropagation(),t.preventDefault(),s.toggle(n.body(),"open-drawer")}))},instantiateMobilePreviewMenu:function(){var t=p(".mobile-top-nav")[0];t&&(h(t,"click",(function(){s.toggle(this,"active")})),p(".exitnav > ul > li > ul > li > ul a",this.domNode).forEach((function(e){h(e,"click",(function(){s.remove(t,"active")}))})))},setPaneSplitsPx:function(t,e){var n=p(".split-left")[0],i=p(n).siblings(".split-right")[0];if(t||e){if(!n||!i)throw new Error("an .rcol and .lcol container could not be found to set a split with.");t>=400&&e>=315&&(p(n).style("right",e+"px"),p(i).style("width",e+"px"),w.byId("toolcol-panes")&&w.byId("toolcol-panes").resize())}else p(n).style("right",""),p(i).style("width","")},setPaneSplitsPercentage:function(t){var e=b.getBox().w;rightSplitPx=e*(t/100),leftSplitPx=e-rightSplitPx,this.setPaneSplitsPx(leftSplitPx,rightSplitPx)},saveSplitTimer:{},saveSplit:function(t,e){clearTimeout(this.saveSplitTimer),this.saveSplitTimer=setTimeout((function(){I.saveSetting(t,e)}),400)},instantiateDragSplit:function(i,o){h(i,"dblclick",e.hitch(this,(function(t){t.preventDefault(),clearTimeout(this.saveSplitTimer),this.setPaneSplitsPx(),this.saveSplit(o,null,!1)}))),h(i,v.press,e.hitch(this,(function(i){i.stopPropagation(),i.preventDefault(),p("html").addClass("cursor-col-resize");var r={},l=[],d=e.hitch(this,(function(t){t.stopPropagation(),t.preventDefault();var e=Math.floor(t.clientX),n=r.current_window_width-e,i=e/r.current_window_width;e>=400&&n>=315&&(r.current_editor_split=e,this.setPaneSplitsPx(e,n),this.rightSplitCache=100*(1-i))})),c=e.hitch(this,(function(e){clearTimeout(this.saveSplitTimer),o&&this.saveSplit(o,this.rightSplitCache);var n=p("html")[0];s.remove(n,"cursor-col-resize"),r.resize_active&&(delete r.resize_active,dojo.disconnect(r.mousemove_object),dojo.disconnect(r.mouseup_object),t.forEach(l,(function(t){dojo.disconnect(t)})),l=[],a.byId("preview-template")&&this.resizePreview())}));r.resize_active=!0,r.current_window_width=b.getBox().w,r.mousemove_object=dojo.connect(n.body(),v.move,d),r.mouseup_object=dojo.connect(n.body(),v.release,c),p("#preview-template, .preview-frame").forEach((function(t){l.push(dojo.connect(t.contentWindow.document,v.move,d)),l.push(dojo.connect(t.contentWindow.document,v.release,c))}))})))},resizePreview:function(){var t=a.byId("preview-template");if("preview-template-design"!=o.get(t,"class")){var e;if(a.byId("template-previewtheme-campaign"))e=d.get("template-previewtheme-campaign","height")+75+"px";else if(a.byId("template-previewtheme-template"))e=d.get("template-previewtheme-template","height")+75+"px";else{var n=t.contentWindow.document;l.position(n.body).h;e=T.docHeight(n)+"px"}t.style.height=e,p(".iframe-dnd-overlay").style("height",e)}},hideIframeLoadingMessage:function(t){p(t).siblings(".iframe-loading-message").style("display","none"),s.remove(p(t).parent(".iframe-wrapper")[0],"loading"),this.resizePreview()},showIframeLoadingMessage:function(t){p(t).siblings(".iframe-loading-message").style("display","block"),s.add(p(t).parent(".iframe-wrapper")[0],"loading")}};return M}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(6),n(9),n(4),n(5),n(1),n(54),n(243),n(440),n(27),n(15)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){var c={extend:function(){var t,e,n,i,o,s,r=arguments[0]||{},l=1,d=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[1]||{},l=2),"object"==typeof r||a.isFunction(r)||(r={}),d===l&&(r=this,--l);l<d;l++)if(null!=(t=arguments[l]))for(e in t)if(t.hasOwnProperty(e)){if(n=r[e],r===(i=t[e]))continue;u&&i&&((o=a.isArray(i))||a.isObject(i))?(o?(o=!1,s=n&&a.isArray(n)?n:[]):s=n&&a.isObject(n)?n:{},r[e]=c.extend(u,s,i)):void 0!==i&&(r[e]=i)}return r},dashToCamel:function(t){return t.replace(/(\-[a-z])/g,(function(t){return t.toUpperCase().replace("-","")}))},cloneWithStyles:function(n){var i=a.clone(n),o=function(n,i){for(var a=e.get(n),s={},r=0;r<a.length;r++){var l=a[r];s[c.dashToCamel(l)]=a.getPropertyValue(l)}e.set(i,s);var d=t(i).children();t(n).children().forEach((function(t,e){var n=d[e];o(t,n)}))};return o(n,i),i},smoothScroll:function(t){t.target=l.position(t.node);var e=t.target.x,n=t.target.y,i=new o.Animation(a.mixin({beforeBegin:function(){this.curve&&delete this.curve;var a={x:t.win.scrollLeft,y:t.win.scrollTop};i.curve=new r([a.x,a.y],[e-50,n-50])},onAnimate:function(e){t.win.scrollLeft=e[0],t.win.scrollTop=e[1]}},t));return i},createStyles:function(e){var a=e.createElement("style");t("head",e).append(a);var o=[];return{add:function(n){if(o.push(n),a.styleSheet){var s="";i.forEach(o,(function(t){s+=t})),a.styleSheet.cssText=s}else t(a).append(n);d.globalPublish("mojo/style-block/updated",[e])},remove:function(){a.styleSheet?a.styleSheet.cssText="":n.destroy(a),d.globalPublish("mojo/style-block/updated",[e])}}},inlineStyles:function(e,n){return n&&n.forEach((function(n){for(var i in n.props)if(n.props.hasOwnProperty(i)){var a=n.props[i].value;if(a&&""!==a){var o=n.props[i].selector||n.selector;"mcBlockContainer"===o?t(e).style(c.dashToCamel(i),a):t(o,e).style(c.dashToCamel(i),a)}}})),e},resetStyles:function(e,n){return n&&n.forEach((function(n){for(var i in n.props)if(n.props.hasOwnProperty(i)){var a=n.props[i].selector||n.selector;"mcBlockContainer"===a?t(e).style(c.dashToCamel(i),null):t(a,e).style(c.dashToCamel(i),null)}})),e},encodeSafeUrl:function(t){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[<>"']/g,(function(t){return e[t]}))}};return c}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(1),n(25),n(163),n(523),n(59),n(28),n(524),n(5),n(0),n(125),n(10),n(7),n(4),n(79),n(83),n(46)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){return d("dijit.layout.ContentPane",[n,i,a],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:t._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading lastUnit size1of1'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(t,e,n){var i=new n(t,e);return!i.href&&i._contentSetter&&i._contentSetter.parseDeferred&&!i._contentSetter.parseDeferred.isFulfilled()?i._contentSetter.parseDeferred.then((function(){return i})):i},create:function(t,n){if((!t||!t.template)&&n&&!("href"in t)&&!("content"in t)){for(var i=(n=u.byId(n)).ownerDocument.createDocumentFragment();n.firstChild;)i.appendChild(n.firstChild);t=e.delegate(t,{content:i})}this.inherited(arguments,[t,n])},postMixInProperties:function(){this.inherited(arguments);var t=g.getLocalization("dijit","loading",this.lang);this.loadingMessage=o.substitute(this.loadingMessage,t),this.errorMessage=o.substitute(this.errorMessage,t)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&l.forEach(this._contentSetter.parseResults,(function(t){t._started||t._destroyed||!e.isFunction(t.startup)||(t.startup(),t._started=!0)}),this)},_startChildren:function(){l.forEach(this.getChildren(),(function(t){t._started||t._destroyed||!e.isFunction(t.startup)||(t.startup(),t._started=!0)})),this._contentSetter&&l.forEach(this._contentSetter.parseResults,(function(t){t._started||t._destroyed||!e.isFunction(t.startup)||(t.startup(),t._started=!0)}),this)},setHref:function(e){return t.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",e)},_setHrefAttr:function(t){return this.cancel(),this.onLoadDeferred=new c(e.hitch(this,"cancel")),this.onLoadDeferred.then(e.hitch(this,"onLoad")),this._set("href",t),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(e){t.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",e)},_setContentAttr:function(t){return this._set("href",""),this.cancel(),this.onLoadDeferred=new c(e.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(e.hitch(this,"onLoad")),this._setContent(t||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(t){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){if(this.inherited(arguments),this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new c(e.hitch(this,"cancel")),this.onLoadDeferred.then(e.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var t=this,n={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};e.isObject(this.ioArgs)&&e.mixin(n,this.ioArgs);var i,a=this._xhrDfd=(this.ioMethod||m.get)(n);a.then((function(e){i=e;try{return t._isDownloaded=!0,t._setContent(e,!1)}catch(e){t._onError("Content",e)}}),(function(e){return a.canceled||t._onError("Download",e),delete t._xhrDfd,e})).then((function(){return t.onDownloadEnd(),delete t._xhrDfd,i})),delete this._hrefChanged},_onLoadHandler:function(t){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(t)}catch(t){console.error("Error "+this.widgetId+" running custom onLoad code: "+t.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(t){console.error("Error "+this.widgetId+" running custom onUnload code: "+t.message)}},destroyDescendants:function(t){this.isLoaded&&this._onUnloadHandler();var e=this._contentSetter;l.forEach(this.getChildren(),(function(e){e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t),e._destroyed=!0})),e&&(l.forEach(e.parseResults,(function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t),e._destroyed=!0)})),delete e.parseResults),t||p.empty(this.containerNode),delete this._singleChild},_setContent:function(t,n){this.destroyDescendants();var i=this._contentSetter;i&&i instanceof s._ContentSetter||(i=this._contentSetter=new s._ContentSetter({node:this.containerNode,_onError:e.hitch(this,this._onError),onContentError:e.hitch(this,(function(t){var e=this.onContentError(t);try{this.containerNode.innerHTML=e}catch(t){console.error("Fatal "+this.id+" could not change content due to "+t.message,t)}}))}));var a=e.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!t.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),o=i.set(e.isObject(t)&&t.domNode?t.domNode:t,a),r=this;return f(o&&o.then?o:i.parseDeferred,(function(){delete r._contentSetterParams,n||(r._started&&(r._startChildren(),r._scheduleLayout()),r._onLoadHandler(t))}))},_onError:function(t,e,n){this.onLoadDeferred.reject(e);var i=this["on"+t+"Error"].call(this,e);n?console.error(n,e):i&&this._setContent(i,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var i,a;i=[n(132)],void 0===(a=function(t){return function(e){if("string"==typeof e||t(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(10),n(7),n(6),n(1),n(45),n(9),n(51),n(18),n(4),n(3),n(38),n(29),n(14),n(22),n(15),n(8),n(72),n(1241),n(21),n(16),n(457),n(48),n(311)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){var _=function(t){n(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()}))},C=function(t,e){var n=h.byId("campaigns-list");window._mc.has_archived_campaigns=t,n.setFilter("bucket",e),n.render()};return{confirmDeletion:function(t,i,o){i||(i="campaign");var s=new u({title:"Are you sure?",onHide:function(){s.destroyRecursive()},onDownloadEnd:function(){_(s),n("form",s.domNode).on("submit",(function(n){n.stopPropagation(),n.preventDefault();var l=a.toObject(this),d=0;for(var c in l)l.hasOwnProperty(c)&&0==c.indexOf("id[")&&d++;r.post(e.get(this,"action"),{data:a.toObject(this)}).then((function(){s.hide(),r.get(g.toUrl("campaigns/get-has-archived-campaigns"),{handleAs:"json"}).then((function(t){!0!==t.content&&C(!1,"recent")})),o?o():t.render(),m.toast(d+" "+i+(1!=d?"s":"")+" successfully deleted")}),(function(){s.hide(),m.toast("There was a problem deleting your "+i+(1!=d?"s":"")+". Please try again.")}))}))}});s.setHref(g.toUrl("campaigns/confirm-delete",{"id[]":t.getSelection()})),s.show()},deleteFolder:function(t,e,n){return n>0?this._showDeleteFolderConfirmation(t,e):r.post(g.toUrl("/campaigns/folders/delete"),{data:{id:t},handleAs:"json"}).then((function(t){return m.toast("Folder successfully deleted"),t}))},_showDeleteFolderConfirmation:function(t,i){var o=new p,s=new u({title:"Delete Folder",onHide:function(){s.destroyRecursive()},onDownloadEnd:function(){_(s),n("form",s.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault(),r.post(e.get(this,"action"),{data:a.toObject(this),handleAs:"json"}).then((function(t){o.resolve(t),s.hide(),m.toast("Folder successfully deleted")}))}))}});return s.setHref(i+(-1==i.indexOf("?")?"?":"&")+"id="+t),s.show(),o},addFolder:function(t,e){return r.post(e,{handleAs:"json",data:{name:t}})},renameFolder:function(t,e,n){return r.post(n,{data:{id:t,name:e}})},unpauseAutoresponder:function(t,e){if(e>0){var a=new u({title:"Resume Automation",content:i.replace(v,{count:e}),onHide:function(){a.destroyRecursive()}});_(a),n("#unpause-send").on("click",i.hitch(this,(function(){this._unpause(t,!1)}))),n("#unpause-no-send").on("click",i.hitch(this,(function(){this._unpause(t,!0)}))),a.show()}else document.location.href=g.toUrl("campaigns/reactivate",{return:1,id:t})},_unpause:function(t,e){var n=e?1:0;document.location.href=g.toUrl("campaigns/reactivate",{id:t,return:1,ignore_queue:n})},foldersArchive:function(){var t=g.toUrl("campaigns/folders/archive");setTimeout((function(){var e=window.open(t,"_blank","toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=600,height=500");m.checkPopupWin(e)}),0)},handleCommentUpdates:function(t){var e=this;f.load().then((function(i){i.subscribe(t).bind("change",(function(t){var i=n(".new-comments-notification[data-campaign-id="+t.campaign_id+"]");i&&e.getUnreadFeedbackCount(t.campaign_id).then((function(t){t.num>0&&i.style("display",""),i.attr("title","You have "+t.num+" new comment"+(t.num>1?"s":"")),i.children(".new-comment-count").html(t.num)}))}))}))},getUnreadFeedbackCount:function(t){return r.get(g.toUrl("campaigns/feedback/unread-feedbacks"),{handleAs:"json",query:{id:t}})},showPauseModal:function(n,i,a){var o="scheduled the campaign, <strong>"+i+"</strong> to be sent";"rss"===a&&(o="started the RSS campaign, <strong>"+i+"</strong>"),t.byId("pause-action").innerHTML=o,e.set(t.byId("pause-link"),"href",g.toUrl("campaigns/wizard/pause",{"id[]":n})),h.byId("pause-dialog").show()},showRenameModal:function(n,i){var a=[["'","#039"]].concat(c.html,c.latin),o=c.decode(i,a),s=t.byId("rename-field");s.value=o,e.set(s,"data-cid",n),e.set(s,"data-oldname",o),h.byId("rename").show()},getDefaultTrackingTag:function(t,e,n){var i="";if("rss"===t)i="RSS_EMAIL_CAMPAIGN";else{(i=e||n?e||!n?e.replace(/\W+/g,"_"):n.replace(/\W+/g,"_"):"EMAIL_CAMPAIGN_").length>40&&(i=i.substr(0,40));var a=new Date;i+=a.getMonth()+1+"_"+a.getDate()+"_"+a.getFullYear()+"_"+a.getHours()+"_"+a.getMinutes()}return i},reRenderCampaigns:function(t,e){return C(t,e)},launchPostUpgradeModal:function(t){this.postUpgradeModal=new u({class:"feature-dialog",content:new w({body:{copy:"Now that you've upgraded, you can resume sending and subscribers in the queue for this series will receive emails."},ctaText:"Resume This Series",onCtaButtonPress:function(){this.postUpgradeModal.content.toggleCtaLoadingState(),this.unpauseAutoresponder(t)}.bind(this),onDismissBtnPress:function(){this.postUpgradeModal.destroyRecursive()}.bind(this)})});var e=this.postUpgradeModal.content.imageNode;m.ensureContentRendered(e).then(function(){this.postUpgradeModal.show()}.bind(this))}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(4),n(3),n(48)],void 0===(a=function(t,e,n,i){return t(null,{skipContainer:!1,label:"Unknown",subLabel:!1,subLabelClasses:"c-paneLabel--small fwn padding--lv0",postCreate:function(){if(this.inherited(arguments),!this.skipContainer){var t="style-"+this.label.toLowerCase().replace(" ",""),a="<div class='style-field selfclear "+t+"'></div>";e(this.domNode).wrap(a),this.inputContainerNode=this.domNode.parentNode;var o="<label>"+this.label+"</label>";this.labelNode=n.place(o,this.inputContainerNode,"first"),this.subLabel&&i.add(this.labelNode,this.subLabelClasses)}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(35),n(0),n(10),n(7),n(4),n(27),n(9),n(34),n(30),n(1),n(2),n(242),n(161),n(193),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){function f(){this._popupWrapper&&(o.destroy(this._popupWrapper),delete this._popupWrapper)}var v=n(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var t=this._firstAroundPosition,e=s.position(this._firstAroundNode,!0),n=e.x-t.x,i=e.y-t.y;if(n||i){this._firstAroundPosition=e;for(var a=0;a<this._stack.length;a++){var o=this._stack[a].wrapper.style;o.top=parseFloat(o.top)+i+"px","auto"==o.right?o.left=parseFloat(o.left)+n+"px":o.right=parseFloat(o.right)-n+"px"}}this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),n||i?10:50)}},_createWrapper:function(t){var n=t._popupWrapper,i=t.domNode;if(!n){(n=o.create("div",{class:"dijitPopup",style:{display:"none"},role:"region","aria-label":t["aria-label"]||t.label||t.name||t.id},t.ownerDocumentBody)).appendChild(i);var a=i.style;a.display="",a.visibility="",a.position="",a.top="0px",t._popupWrapper=n,e.after(t,"destroy",f,!0),"ontouchend"in document&&u(n,"touchend",(function(t){/^(input|button|textarea|a)$/i.test(t.target.tagName)||t.preventDefault()}))}return n},moveOffScreen:function(t){var e=this._createWrapper(t),n=s.isBodyLtr(t.ownerDocument),i={visibility:"hidden",top:"-9999px",display:""};return i[n?"left":"right"]="-9999px",i[n?"right":"left"]="auto",r.set(e,i),e},hide:function(t){var e=this._createWrapper(t);r.set(e,{display:"none",height:"auto",overflow:"hidden",border:""});var n=t.domNode;"_originalStyle"in n&&(n.style.cssText=n._originalStyle)},getTopPopup:function(){for(var t=this._stack,e=t.length-1;e>0&&t[e].parent===t[e-1].widget;e--);return t[e]},open:function(t){for(var e=this._stack,n=t.popup,o=n.domNode,g=t.orient||["below","below-alt","above","above-alt"],f=t.parent?t.parent.isLeftToRight():s.isBodyLtr(n.ownerDocument),v=t.around,b=t.around&&t.around.id?t.around.id+"_dropdown":"popup_"+this._idGen++;e.length&&(!t.parent||!i.isDescendant(t.parent.domNode,e[e.length-1].widget.domNode));)this.close(e[e.length-1].widget);var y=this.moveOffScreen(n);n.startup&&!n._started&&n.startup();var w,_=s.position(o);if("maxHeight"in t&&-1!=t.maxHeight)w=t.maxHeight||1/0;else{var C=m.getEffectiveBox(this.ownerDocument),k=v?s.position(v,!1):{y:t.y-(t.padding||0),h:2*(t.padding||0)};w=Math.floor(Math.max(k.y,C.h-(k.y+k.h)))}if(_.h>w){var S=r.getComputedStyle(o),x=S.borderLeftWidth+" "+S.borderLeftStyle+" "+S.borderLeftColor;r.set(y,{overflowY:"scroll",height:w+"px",border:x}),o._originalStyle=o.style.cssText,o.style.border="none"}a.set(y,{id:b,style:{zIndex:this._beginZIndex+e.length},class:"dijitPopup "+(n.baseClass||n.class||"").split(" ")[0]+"Popup",dijitPopupParent:t.parent?t.parent.id:""}),0==e.length&&v&&(this._firstAroundNode=v,this._firstAroundPosition=s.position(v,!0),this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),50)),l("config-bgIframe")&&!n.bgIframe&&(n.bgIframe=new p(y));var I=n.orient?c.hitch(n,"orient"):null,T=v?h.around(y,v,g,f,I):h.at(y,t,"R"==g?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],t.padding,I);y.style.visibility="visible",o.style.visibility="visible";var A=[];return A.push(u(y,"keydown",c.hitch(this,(function(e){if(e.keyCode==d.ESCAPE&&t.onCancel)e.stopPropagation(),e.preventDefault(),t.onCancel();else if(e.keyCode==d.TAB){e.stopPropagation(),e.preventDefault();var n=this.getTopPopup();n&&n.onCancel&&n.onCancel()}})))),n.onCancel&&t.onCancel&&A.push(n.on("cancel",t.onCancel)),A.push(n.on(n.onExecute?"execute":"change",c.hitch(this,(function(){var t=this.getTopPopup();t&&t.onExecute&&t.onExecute()})))),e.push({widget:n,wrapper:y,parent:t.parent,onExecute:t.onExecute,onCancel:t.onCancel,onClose:t.onClose,handlers:A}),n.onOpen&&n.onOpen(T),T},close:function(e){for(var n=this._stack;e&&t.some(n,(function(t){return t.widget==e}))||!e&&n.length;){var i,a=n.pop(),o=a.widget,s=a.onClose;for(o.bgIframe&&(o.bgIframe.destroy(),delete o.bgIframe),o.onClose&&o.onClose();i=a.handlers.pop();)i.remove();o&&o.domNode&&this.hide(o),s&&s()}0==n.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return g.popup=new v}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(64)],void 0===(a=function(t){return t.Symbol}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(148),n(169)],void 0===(a=function(t,e){return function(n){return null!=n&&e(n.length)&&!t(n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){for(var n=-1,i=null==t?0:t.length,a=Array(i);++n<i;)a[n]=e(t[n],n,t);return a}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return{white:"#FFF",dark:"#373737",yellow:"#FED156",red6:"#f95c32",green1:"#bff5e8",green3:"#73e8cc",green4:"#4de2bf",green6:"#00d6a3",green7:"#00c193",blue6:"#00b3ea",yellow3:"#ffe395",yellow5:"#ffd45b",yellow6:"#ffcc3e",pink3:"#ffb4cd",pink6:"#ff76a4",violet3:"#b593e5",violet4:"#a175de",violet6:"#793ad0",orange5:"#ffb126",orange6:"#ffa300",brandColors:{cavendish:{label:"Cavendish",rgb:"rgb(255,224,27)",hex:"#FFE01B",less:"@cavendish",cmyk:"cmyk(2%,8%,96%,0%)"},kale:{label:"Kale",rgb:"rgb(0,124,137)",hex:"#007C89",less:"@kale",cmyk:"cmyk(87%,36%,41%,7%)",invert:!0},peppercorn:{label:"Peppercorn",rgb:"rgb(36,28,21)",hex:"#241C15",less:"@peppercorn",cmyk:"cmyk(71%,68%,66%,83%)",invert:!0},peppercorn65:{label:"Peppercorn-65",rgb:"rgba(36,28,21,0.65)",hex:"N/A",less:"@peppercorn-fade--65",cmyk:"N/A",invert:!0},peppercorn30:{label:"Peppercorn-30",rgb:"rgba(36,28,21,0.3)",hex:"N/A",less:"@peppercorn-fade--30",cmyk:"N/A"},peppercorn15:{label:"Peppercorn-15",rgb:"rgba(36,28,21,0.15)",hex:"N/A",less:"@peppercorn-fade--15",cmyk:"N/A"},parsnip:{label:"Parsnip",rgb:"rgb(239,238,234)",hex:"#EFEEEA",less:"@parsnip",cmyk:"cmyk(5%,4%,6%,0%)"},pumpkin:{label:"Pumpkin",rgb:"rgb(242,95,37)",hex:"#F25F25",less:"@pumpkin",cmyk:"cmyk(0%,78%,97%,0%)"},yam:{label:"Yam",rgb:"rgb(251,207,189)",hex:"#FBCFBD",less:"@yam",cmyk:"cmyk(0%,17%,24%,2%)"},apricot:{label:"Apricot",rgb:"rgb(231,183,95)",hex:"#E7B75F",less:"@apricot",cmyk:"cmyk(9%,28%,74%,0%)"},plum:{label:"Plum",rgb:"rgb(105,35,64)",hex:"#692340",less:"@plum",cmyk:"cmyk(45%,92%,51%,39%)",invert:!0},dragonfruit:{label:"Dragonfruit",rgb:"rgb(255,62,191)",hex:"#FF3EBF",less:"@dragonfruit",cmyk:"cmyk(5%,85%,0%,0%)"},apple:{label:"Apple",rgb:"rgb(0,193,78)",hex:"#00C14E",less:"@apple",cmyk:"cmyk(75%,0%,95%,0%)"},portobello:{label:"Portobello",rgb:"rgb(183,169,161)",hex:"#B7A9A1",less:"@portobello",cmyk:"cmyk(29%,31%,33%,0%)"},cornflower:{label:"Cornflower",rgb:"rgb(197,219,242)",hex:"#C5DBF2",less:"@cornflower",cmyk:"cmyk(21%,7%,0%,0%)"},cucumber:{label:"Cucumber",rgb:"rgb(216,234,204)",hex:"#D8EACC",less:"@cucumber",cmyk:"cmyk(16%,0%,24%,0%)"},squash:{label:"Squash",rgb:"rgb(251,238,202)",hex:"#FBEECA",less:"@squash",cmyk:"cmyk(1%,4%,23%,0%)"},radish:{label:"Radish",rgb:"rgb(249,224,250)",hex:"#F9E0FA",less:"@radish",cmyk:"cmyk(2%,13%,0%,0%)"},coconut:{label:"Coconut",rgb:"rgb(255,255,255)",hex:"#FFFFFF",less:"@coconut",cmyk:"cmyk(0%,0%,0%,0%)"},coconut50:{label:"Coconut-50",rgb:"rgba(255,255,255,0.5)",hex:"N/A",less:"@coconut-fade--50",cmyk:"N/A"},coconut20:{label:"Coconut-20",rgb:"rgba(255,255,255,0.2)",hex:"N/A",less:"@coconut-fade--20",cmyk:"N/A"},coconut10:{label:"Coconut-10",rgb:"rgba(255,255,255,0.1)",hex:"N/A",less:"@coconut-fade--10",cmyk:"N/A"},jasmine:{label:"Jasmine",rgb:"rgb(246,246,244)",hex:"#F6F6F4",less:"@jasmine",cmyk:"cmyk(2%,1%,2%,0%)"},oyster:{label:"Oyster",rgb:"rgb(64,59,59)",hex:"#403B3B",less:"@oyster",cmyk:"cmyk(65%,63%,61%,51%)",invert:!0},tuna:{label:"Tuna",rgb:"rgb(140,140,140)",hex:"#8C8C8C",less:"@tuna",cmyk:"cmyk(47%,39%,40%,3%)"},basmati:{label:"Basmati",rgb:"rgb(219,217,210)",hex:"#DBD9D2",less:"@basmati",cmyk:"cmyk(13%,10%,15%,0%)"}},dataViz:{combo1:{color1:"#f97f50",color2:"#4f135e",color3:"#99c7ef",color4:"#fad173",color5:"#a3296e",color6:"#4bc4C2"},combo2:{color1:"#fad173",color2:"#99c7ef",color3:"#de4d14",color4:"#83249f",color5:"#fa8cf8"},combo3:{color1:"#fad173",color2:"#f97f50",color3:"#83249f",color4:"#99c7ef",color5:"#f73bb9"},combo4:{color1:"#83249f",color2:"#f97f50",color3:"#fad173",color4:"#99e0d7",color5:"#4277ce"},combo5:{color1:"#4bc4c2",color2:"#fad173",color3:"#f97f50",color4:"#83249f",color5:"#fa8cf8"},combo6:{color1:"#d99536",color2:"#99c7ef",color3:"#a3296e",color4:"#de4d14",color5:"#005733"},flyover:{flagFill:"rgba(36,28,21,0.90)",poleFill:"#241c15"}}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(166),n(6),n(5),n(0),n(63),n(9),n(3),n(7),n(27),n(2),n(19),n(52),n(21),n(16),n(39),n(25),n(20),n(4),n(2031),n(55),n(699),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b){return i("mojo.neapolitan.widgets.EditorContainer",[g,m,f],{baseClass:"mojoEditorContainer",templateString:b,defaultSection:null,sections:null,selectedSection:null,hasDynamicContent:!1,isDynamicContentEnabled:null,postCreate:function(){this.sections=e(".mojoEditorSection",this.containerNode),this._setupSections(),this._buildSectionNav(),this._showDefaultSection()},disableSection:function(t){this._getSectionLink(t).addClass("disabled")},enableSection:function(t){this._getSectionLink(t).removeClass("disabled")},_getSectionLink:function(t){return e('li button[data-section="'+t+'"]',this.sectionList)},toggleSection:function(t){this._toggleSectionNav(t),e(".mojoEditorSection",this.containerNode).style("display","none").removeClass("active").filter("."+t+"EditorSection").addClass("active").style("display","block")},_toggleSectionNav:function(t){e("li button",this.sectionList).removeClass("v-buttonGroupBordered--active"),this._getSectionLink(t).addClass("v-buttonGroupBordered--active"),this.selectedSection=t},_showDefaultSection:function(){this.toggleSection(this.defaultSection),e(this.sectionList).children().length<=1&&o.set(this.sectionList,"display","none")},_buildSectionNav:function(){var t=this;this.sections&&this.sections.length&&(this.sections.forEach(function(t){var e=r.get(t,"data-mojo-section"),n=u.capitalize(e),i="";(this.defaultSection===e||r.get(t,"data-mojo-selected"))&&(i=" v-buttonGroupBordered--active");var a="<span class='freddicon padding-right--lv1 display--none@xlphone c-buttonGroupItemIcon "+e+"'></span>";v.place("<li class='c-buttonGroupItem v-buttonGroupItemFlex'><button type='button' class='c-buttonGroupButton v-buttonGroupBordered v-buttonGroupButtonFlex"+i+"' data-section='"+e+"'>"+a+n+"</button></li>",this.sectionList)}.bind(this)),d(this.sectionList,"li button:click",(function(e){if(a.stop(e),!s.contains(this,"disabled")){var n=r.get(this,"data-section");t.toggleSection(n),window.ga("send","event","draft_edit","click",n)}})))},_setupSections:function(){this.sections&&this.sections.length&&this.sections.forEach(function(t){var e=r.get(t,"data-mojo-section");this.defaultSection&&!r.get(t,"data-mojo-selected")||(this.defaultSection=e),s.add(t,e+"EditorSection"),r.get(t,"data-mojo-ck-scroll")&&this._handleCKToolbarScroll(t)}.bind(this))},_handleCKToolbarScroll:function(t){var n=null;d(t,"scroll",(function(){if(!n){var i=e(".cke_toolbox",t)[0];if(i){var a=l.position(i);n=a.y+a.h}}if(n){var o=l.position(t).y+t.scrollTop-1>n&&t.scrollTop>1;s.toggle(t,"contentEditorScrolled",o)}}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(23),n(1),n(3),n(27),n(66),n(43),n(19),n(119),n(501),n(239),n(40)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u,h,p){i.isAsync||l(0,(function(){Promise.resolve().then((function(){n(333),n(284)})).catch(n.oe)}));var m=e("dojo.dnd.Source",u,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(t,e){a.mixin(this,a.mixin({},e));var n=this.accept;if(n.length){this.accept={};for(var i=0;i<n.length;++i)this.accept[n[i]]=1}this.isDragging=!1,this.mouseDown=!1,this.targetAnchor=null,this.targetBox=null,this.before=!0,this._lastX=0,this._lastY=0,this.sourceState="",this.isSource&&o.add(this.node,"dojoDndSource"),this.targetState="",this.accept&&o.add(this.node,"dojoDndTarget"),this.horizontal&&o.add(this.node,"dojoDndHorizontal"),this.topics=[d.subscribe("/dnd/source/over",a.hitch(this,"onDndSourceOver")),d.subscribe("/dnd/start",a.hitch(this,"onDndStart")),d.subscribe("/dnd/drop",a.hitch(this,"onDndDrop")),d.subscribe("/dnd/cancel",a.hitch(this,"onDndCancel"))]},checkAcceptance:function(t,e){if(this==t)return!this.copyOnly||this.selfAccept;for(var n=0;n<e.length;++n){for(var i=t.getItem(e[n].id).type,a=!1,o=0;o<i.length;++o)if(i[o]in this.accept){a=!0;break}if(!a)return!1}return!0},copyState:function(t,e){return!!t||(arguments.length<2&&(e=this==h.manager().target),e?!!this.copyOnly&&this.selfCopy:this.copyOnly)},destroy:function(){m.superclass.destroy.call(this),t.forEach(this.topics,(function(t){t.remove()})),this.targetAnchor=null},onMouseMove:function(t){if(!this.isDragging||"Disabled"!=this.targetState){m.superclass.onMouseMove.call(this,t);var e=h.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(t.pageX-this._lastX)>this.delay||Math.abs(t.pageY-this._lastY)>this.delay)){var n=this.getSelectedNodes();n.length&&e.startDrag(this,n,this.copyState(c.getCopyKeyState(t),!0))}if(this.isDragging){var i=!1;this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=s.position(this.current,!0)),i=this.horizontal?t.pageX-this.targetBox.x<this.targetBox.w/2==s.isBodyLtr(this.current.ownerDocument):t.pageY-this.targetBox.y<this.targetBox.h/2),this.current==this.targetAnchor&&i==this.before||(this._markTargetAnchor(i),e.canDrop(!this.current||e.source!=this||!(this.current.id in this.selection)))}}},onMouseDown:function(t){this.mouseDown||!this._legalMouseDown(t)||this.skipForm&&c.isFormElement(t)||(this.mouseDown=!0,this._lastX=t.pageX,this._lastY=t.pageY,m.superclass.onMouseDown.call(this,t))},onMouseUp:function(t){this.mouseDown&&(this.mouseDown=!1,m.superclass.onMouseUp.call(this,t))},onDndSourceOver:function(t){if(this!==t)this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor();else if(this.isDragging){var e=h.manager();e.canDrop(!("Disabled"==this.targetState||this.current&&e.source==this&&this.current.id in this.selection))}},onDndStart:function(t,e,n){this.autoSync&&this.sync(),this.isSource&&this._changeState("Source",this==t?n?"Copied":"Moved":"");var i=this.accept&&this.checkAcceptance(t,e);this._changeState("Target",i?"":"Disabled"),this==t&&h.manager().overSource(this),this.isDragging=!0},onDndDrop:function(t,e,n,i){this==i&&this.onDrop(t,e,n),this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null),this.before=!0,this.isDragging=!1,this.mouseDown=!1,this._changeState("Source",""),this._changeState("Target","")},onDrop:function(t,e,n){this!=t?this.onDropExternal(t,e,n):this.onDropInternal(e,n)},onDropExternal:function(t,e,n){var i=this._normalizedCreator;this.creator?this._normalizedCreator=function(e,n){return i.call(this,t.getItem(e.id).data,n)}:this._normalizedCreator=n?function(e){var n=t.getItem(e.id),i=e.cloneNode(!0);return i.id=c.getUniqueId(),{node:i,data:n.data,type:n.type}}:function(e){var n=t.getItem(e.id);return t.delItem(e.id),{node:e,data:n.data,type:n.type}},this.selectNone(),n||this.creator||t.selectNone(),this.insertNodes(!0,e,this.before,this.current),!n&&this.creator&&t.deleteSelectedNodes(),this._normalizedCreator=i},onDropInternal:function(t,e){var n=this._normalizedCreator;if(!this.current||!(this.current.id in this.selection)){if(e)this.creator?this._normalizedCreator=function(t,e){return n.call(this,this.getItem(t.id).data,e)}:this._normalizedCreator=function(t){var e=this.getItem(t.id),n=t.cloneNode(!0);return n.id=c.getUniqueId(),{node:n,data:e.data,type:e.type}};else{if(!this.current)return;this._normalizedCreator=function(t){var e=this.getItem(t.id);return{node:t,data:e.data,type:e.type}}}this._removeSelection(),this.insertNodes(!0,t,this.before,this.current),this._normalizedCreator=n}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){m.superclass.onOverEvent.call(this),h.manager().overSource(this),this.isDragging&&"Disabled"!=this.targetState&&this.onDraggingOver()},onOutEvent:function(){m.superclass.onOutEvent.call(this),h.manager().outSource(this),this.isDragging&&"Disabled"!=this.targetState&&this.onDraggingOut()},_markTargetAnchor:function(t){this.current==this.targetAnchor&&this.before==t||(this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=t,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After"))},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=null,this.targetBox=null,this.before=!0)},_markDndStatus:function(t){this._changeState("Source",t?"Copied":"Moved")},_legalMouseDown:function(t){if("touchstart"!=t.type&&!r.isLeft(t))return!1;if(!this.withHandles)return!0;for(var e=t.target;e&&e!==this.node;e=e.parentNode){if(o.contains(e,"dojoDndHandle"))return!0;if(o.contains(e,"dojoDndItem")||o.contains(e,"dojoDndIgnore"))break}return!1}});return m}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(10),n(7),n(3),n(23),n(33),n(1),n(25),n(11),n(287),n(178),n(522)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return t("dijit.MenuItem",[r,l,d,c],{templateString:u,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(t){this._set("label",t);var e,n="",i=t.search(/{\S}/);if(i>=0){n=t.charAt(i+1);var a=t.substr(0,i),o=t.substr(i+3);e=a+n+o,t=a+'<span class="dijitMenuItemShortcutKey">'+n+"</span>"+o}else e=t;this.domNode.setAttribute("aria-label",e+" "+this.accelKey),this.containerNode.innerHTML=t,this._set("shortcutKey",n)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(t){t&&!("label"in this.params)&&this._set("label",t.innerHTML)},buildRendering:function(){this.inherited(arguments);var t=this.id+"_text";n.set(this.containerNode,"id",t),this.accelKeyNode&&n.set(this.accelKeyNode,"id",this.id+"_accel"),e.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==o("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(t){}},_setSelected:function(t){i.toggle(this.domNode,"dijitMenuItemSelected",t)},setLabel:function(t){a.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",t)},setDisabled:function(t){a.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",t)},_setDisabledAttr:function(t){this.focusNode.setAttribute("aria-disabled",t?"true":"false"),this._set("disabled",t)},_setAccelKeyAttr:function(t){this.accelKeyNode&&(this.accelKeyNode.style.display=t?"":"none",this.accelKeyNode.innerHTML=t,n.set(this.containerNode,"colSpan",t?"1":"2")),this._set("accelKey",t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(6),n(14),n(106),n(126),n(163),n(179),n(529),n(84)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t("dijit.form.DropDownButton",[o,s,r],{baseClass:"dijitDropDownButton",templateString:l,_fillContent:function(){if(this.srcNodeRef){var t=n("*",this.srcNodeRef);this.inherited(arguments,[t[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var t=n("[widgetId]",this.dropDownContainer)[0];t&&(this.dropDown=i.byNode(t)),delete this.dropDownContainer}this.dropDown&&a.hide(this.dropDown),this.inherited(arguments)}},isLoaded:function(){var t=this.dropDown;return!!t&&(!t.href||t.isLoaded)},loadDropDown:function(t){var n=this.dropDown,i=n.on("load",e.hitch(this,(function(){i.remove(),t()})));n.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(40),n(75),n(35),n(1),n(19),n(85),n(33)],void 0===(a=function(t,e,n,i,a,o,s,r){t.hash=function(t,e){return arguments.length?("#"==t.charAt(0)&&(t=t.substring(1)),e?f(t):location.href="#"+t,t):p()};var l,d,c,u=n.hashPollFrequency||100;function h(t,e){var n=t.indexOf(e);return n>=0?t.substring(n+1):""}function p(){return h(location.href,"#")}function m(){o.publish("/dojo/hashchange",p())}function g(){p()!==l&&(l=p(),m())}function f(t){if(d){if(d.isTransitioning())return void setTimeout(a.hitch(null,f,t),u);var e=d.iframe.location.href,n=e.indexOf("?");d.iframe.location.replace(e.substring(0,n)+"?"+t)}else location.replace("#"+t),!c&&g()}function v(){var i=document.createElement("iframe"),o=n.dojoBlankHtmlUrl||e.toUrl("./resources/blank.html");n.useXDomain&&!n.dojoBlankHtmlUrl&&console.warn("dojo/hash: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),i.id="dojo-hash-iframe",i.src=o+"?"+p(),i.style.display="none",document.body.appendChild(i),this.iframe=t.global["dojo-hash-iframe"];var s,r,d,c,g,f=this.iframe.location;function v(){l=p(),s=g?l:h(f.href,"?"),r=!1,d=null}this.isTransitioning=function(){return r},this.pollLocation=function(){if(!g)try{var t=h(f.href,"?");document.title!=c&&(c=this.iframe.document.title=document.title)}catch(t){g=!0,console.error("dojo/hash: Error adding history entry. Server unreachable.")}var e=p();if(r&&l===e){if(!g&&t!==d)return void setTimeout(a.hitch(this,this.pollLocation),0);v(),m()}else if(l!==e||!g&&s!==t){if(l!==e)return l=e,r=!0,d=e,i.src=o+"?"+d,g=!1,void setTimeout(a.hitch(this,this.pollLocation),0);g||(location.href="#"+f.search.substring(1),v(),m())}else;setTimeout(a.hitch(this,this.pollLocation),u)},v(),setTimeout(a.hitch(this,this.pollLocation),u)}return s((function(){"onhashchange"in t.global&&(!r("ie")||r("ie")>=8&&"BackCompat"!=document.compatMode)?c=i.after(t.global,"onhashchange",m,!0):document.addEventListener?(l=p(),setInterval(g,u)):document.attachEvent&&(d=new v)})),t.hash}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return t}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(116),n(442),n(443)],void 0===(a=function(t,e,n){return function(i,a){return n(e(i,a,t),i+"")}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(75),n(5),n(34)],void 0===(a=function(t,e,n,i){var a,o=t.getObject("dojox.mvc",!0);i.add("mvc-bindings-log-api",(e.mvc||{}).debugBindings);var s=i("mvc-bindings-log-api")?function(t,e,n,i){return[[n.canConvertToLoggable||!n.declaredClass?n:n.declaredClass,i].join(":"),[t.canConvertToLoggable||!t.declaredClass?t:t.declaredClass,e].join(":")]}:"";function r(e,a,o,r,l,d,c,u,h,p){if(!(o(h,u)||"*"==l&&n.indexOf(r.get("properties")||[c],c)<0||"*"==l&&c in(p||{}))){var m="*"==l?c:l;if(i("mvc-bindings-log-api"))var g=s(r,m,d,c);try{h=e?e(h,a):h}catch(t){return void(i("mvc-bindings-log-api")&&console.log("Copy from"+g.join(" to ")+" was not done as an error is thrown in the converter."))}i("mvc-bindings-log-api")&&console.log(g.reverse().join(" is being copied from: ")+" (Value: "+h+" from "+u+")"),t.isFunction(r.set)?r.set(m,h):r[m]=h}}var l={from:1,to:2,both:3};return a=function(e,l,d,c,u){var h,p,m,g=(u||{}).converter;g&&(h={source:e,target:d},p=g.format&&t.hitch(h,g.format),m=g.parse&&t.hitch(h,g.parse));var f,v=[],b=[],y=t.mixin({},e.constraints,d.constraints),w=(u||{}).bindDirection||o.both,_=(u||{}).equals||a.equals;if(i("mvc-bindings-log-api"))var C=s(e,l,d,c);if("*"==c){if("*"!=l)throw new Error("Unmatched wildcard is specified between source and target.");if(!(f=d.get("properties")))for(var k in f=[],d)d.hasOwnProperty(k)&&"_watchCallbacks"!=k&&f.push(k);b=d.get("excludes")}else f=[l];w&o.from&&(t.isFunction(e.set)&&t.isFunction(e.watch)?v.push(e.watch.apply(e,("*"!=l?[l]:[]).concat([function(t,n,i){r(p,y,_,d,c,e,t,n,i,b)}]))):i("mvc-bindings-log-api")&&console.log(C.reverse().join(" is not a stateful property. Its change is not reflected to ")+"."),n.forEach(f,(function(n){if("*"!=c||!(n in(b||{}))){var i=t.isFunction(e.get)?e.get(n):e[n];r(p,y,_,d,"*"==c?n:c,e,n,void 0,i)}}))),w&o.to&&(w&o.from||n.forEach(f,(function(n){if("*"!=c||!(n in(b||{}))){var i=t.isFunction(d.get)?d.get(c):d[c];r(m,y,_,e,n,d,"*"==c?n:c,void 0,i)}})),t.isFunction(d.set)&&t.isFunction(d.watch)?v.push(d.watch.apply(d,("*"!=c?[c]:[]).concat([function(t,n,i){r(m,y,_,e,l,d,t,n,i,b)}]))):i("mvc-bindings-log-api")&&console.log(C.join(" is not a stateful property. Its change is not reflected to ")+".")),i("mvc-bindings-log-api")&&console.log(C.join(" is bound to: "));var S={};return S.unwatch=S.remove=function(){for(var t=null;t=v.pop();)t.unwatch();i("mvc-bindings-log-api")&&console.log(C.join(" is unbound from: "))},S},t.mixin(o,l),t.setObject("dojox.mvc.sync",t.mixin(a,{equals:function(e,n){return e===n||"number"==typeof e&&isNaN(e)&&"number"==typeof n&&isNaN(n)||t.isFunction((e||{}).getTime)&&t.isFunction((n||{}).getTime)&&e.getTime()==n.getTime()||(t.isFunction((e||{}).equals)?e.equals(n):!!t.isFunction((n||{}).equals)&&n.equals(e))}},l))}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(33),n(23),n(1),n(10)],void 0===(a=function(t,e,n,i){var a=n.getObject("dojo.dnd",!0);return a.getCopyKeyState=function(e){return e[t("mac")?"metaKey":"ctrlKey"]},a._uniqueId=0,a.getUniqueId=function(){var t;do{t=e._scopeName+"Unique"+ ++a._uniqueId}while(i.byId(t));return t},a._empty={},a.isFormElement=function(t){var e=t.target;return 3==e.nodeType&&(e=e.parentNode)," a button textarea input select option ".indexOf(" "+e.tagName.toLowerCase()+" ")>=0},a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){return t===e||t!=t&&e!=e}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(253)],void 0===(a=function(t){return function(e){return null==e?"":t(e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){t.exports=function(){"use strict";var t=/gecko\/\d/i.test(navigator.userAgent),e=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i=e||n,a=i&&(e?document.documentMode||6:n[1]),o=/WebKit\//.test(navigator.userAgent),s=o&&/Qt\/\d+\.\d+/.test(navigator.userAgent),r=/Chrome\//.test(navigator.userAgent),l=/Opera\//.test(navigator.userAgent),d=/Apple Computer/.test(navigator.vendor),c=/KHTML\//.test(navigator.userAgent),u=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),m=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),g=p||/Mac/.test(navigator.platform),f=/win/i.test(navigator.platform),v=l&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);v&&(v=Number(v[1])),v&&v>=15&&(l=!1,o=!0);var b=g&&(s||l&&(null==v||v<12.11)),y=t||i&&a>=9,w=!1,_=!1;function C(t,e){if(!(this instanceof C))return new C(t,e);this.options=e=e||{},Qa(Mn,e,!1),M(e);var n=e.value;"string"==typeof n&&(n=new Xi(n,e.mode)),this.doc=n;var s,r=this.display=new k(t,n);r.wrapper.CodeMirror=this,P(this),j(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),e.autofocus&&!m&&Ue(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Ha},i&&a<11&&setTimeout(Za(Oe,this,!0),20),function(t){var e=t.display;function n(){t.state.focused&&setTimeout(Za(Ue,t),0)}function s(e){Na(t,e)||Sa(e)}function r(n){if(t.somethingSelected())Re=t.getSelections(),e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=Re.join("\n"),Ya(e.input));else{for(var i=[],a=[],o=0;o<t.doc.sel.ranges.length;o++){var s=t.doc.sel.ranges[o].head.line,r={anchor:dt(s,0),head:dt(s+1,0)};a.push(r),i.push(t.getRange(r.anchor,r.head))}"cut"==n.type?t.setSelections(a,null,Oa):(e.prevInput="",e.input.value=i.join("\n"),Ya(e.input)),Re=i}"cut"==n.type&&(t.state.cutIncoming=!0)}Ta(e.scroller,"mousedown",Ce(t,qe)),Ta(e.scroller,"dblclick",i&&a<11?Ce(t,(function(e){if(!Na(t,e)){var n=We(t,e);if(n&&!Ye(t,e)&&!ze(t.display,e)){_a(e);var i=Ln(t,n);Ct(t.doc,i.anchor,i.head)}}})):function(e){Na(t,e)||_a(e)}),Ta(e.lineSpace,"selectstart",(function(t){ze(e,t)||_a(t)})),y||Ta(e.scroller,"contextmenu",(function(e){pn(t,e)})),Ta(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Xe(t,e.scroller.scrollTop),Qe(t,e.scroller.scrollLeft,!0),ja(t,"scroll",t))})),Ta(e.scrollbarV,"scroll",(function(){e.scroller.clientHeight&&Xe(t,e.scrollbarV.scrollTop)})),Ta(e.scrollbarH,"scroll",(function(){e.scroller.clientHeight&&Qe(t,e.scrollbarH.scrollLeft)})),Ta(e.scroller,"mousewheel",(function(e){nn(t,e)})),Ta(e.scroller,"DOMMouseScroll",(function(e){nn(t,e)})),Ta(e.scrollbarH,"mousedown",n),Ta(e.scrollbarV,"mousedown",n),Ta(e.wrapper,"scroll",(function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),Ta(e.input,"keyup",(function(e){dn.call(t,e)})),Ta(e.input,"input",(function(){i&&a>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),Le(t)})),Ta(e.input,"keydown",Ce(t,ln)),Ta(e.input,"keypress",Ce(t,cn)),Ta(e.input,"focus",Za(un,t)),Ta(e.input,"blur",Za(hn,t)),t.options.dragDrop&&(Ta(e.scroller,"dragstart",(function(e){!function(t,e){if(i&&(!t.state.draggingText||+new Date-Ke<100))Sa(e);else if(!Na(t,e)&&!ze(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!d)){var n=ro("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",l&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),l&&n.parentNode.removeChild(n)}}(t,e)})),Ta(e.scroller,"dragenter",s),Ta(e.scroller,"dragover",s),Ta(e.scroller,"drop",Ce(t,Je))),Ta(e.scroller,"paste",(function(n){ze(e,n)||(t.state.pasteIncoming=!0,Ue(t),Le(t))})),Ta(e.input,"paste",(function(){if(o&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var n=e.input.selectionStart,i=e.input.selectionEnd;e.input.value+="$",e.input.selectionEnd=i,e.input.selectionStart=n,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,Le(t)})),Ta(e.input,"cut",r),Ta(e.input,"copy",r),c&&Ta(e.sizer,"mouseup",(function(){uo()==e.input&&e.input.blur(),Ue(t)}))}(this),wo||(Ta(window,"resize",(function(){null==s&&(s=setTimeout((function(){s=null,vo=null,fo(Ve)}),100))})),Ta(window,"blur",(function(){fo(hn)})),wo=!0);var u=this;_e(this,(function(){for(var t in u.curOp.forceUpdate=!0,ea(u,n),e.autofocus&&!m||uo()==r.input?setTimeout(Za(un,u),20):hn(u),Bn)Bn.hasOwnProperty(t)&&Bn[t](u,e[t],Fn);$(u);for(var i=0;i<Hn.length;++i)Hn[i](u)}))}function k(t,e){var n=this,s=n.input=ro("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");o?s.style.width="1000px":s.setAttribute("wrap","off"),p&&(s.style.border="1px solid black"),s.setAttribute("autocorrect","off"),s.setAttribute("autocapitalize","off"),s.setAttribute("spellcheck","false"),n.inputDiv=ro("div",[s],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ro("div",[ro("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ro("div",[ro("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ro("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ro("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ro("div",null,"CodeMirror-code"),n.selectionDiv=ro("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=ro("div",null,"CodeMirror-cursors"),n.measure=ro("div",null,"CodeMirror-measure"),n.lineMeasure=ro("div",null,"CodeMirror-measure"),n.lineSpace=ro("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=ro("div",[ro("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ro("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ro("div",null,null,"position: absolute; height: "+Ra+"px; width: 1px;"),n.gutters=ro("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ro("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ro("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),i&&a<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),p&&(s.style.width="0px"),o||(n.scroller.draggable=!0),c&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),i&&a<8&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),n.viewFrom=n.viewTo=e.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Ha,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function S(t){t.doc.mode=C.getMode(t.options,t.doc.modeOption),x(t)}function x(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.frontier=t.doc.first,Ot(t,100),t.state.modeGen++,t.curOp&&Te(t)}function I(t){var e=ce(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ue(t.display)-3);return function(a){if(ki(t.doc,a))return 0;var o=0;if(a.widgets)for(var s=0;s<a.widgets.length;s++)a.widgets[s].height&&(o+=a.widgets[s].height);return n?o+(Math.ceil(a.text.length/i)||1)*e:o+e}}function T(t){var e=t.doc,n=I(t);e.iter((function(t){var e=n(t);e!=t.height&&oa(t,e)}))}function A(t){var e=Gn[t.options.keyMap].style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function j(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Zt(t)}function E(t){P(t),Te(t),setTimeout((function(){U(t)}),20)}function P(t){var e=t.display.gutters,n=t.options.gutters;lo(e);for(var i=0;i<n.length;++i){var a=n[i],o=e.appendChild(ro("div",null,"CodeMirror-gutter "+a));"CodeMirror-linenumbers"==a&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none",D(t)}function D(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function N(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=vi(i);)i=(a=e.find(0,!0)).from.line,n+=a.from.ch-a.to.ch;for(i=t;e=bi(i);){var a=e.find(0,!0);n-=i.text.length-a.from.ch,n+=(i=a.to.line).text.length-a.to.ch}return n}function L(t){var e=t.display,n=t.doc;e.maxLine=na(n,n.first),e.maxLineLength=N(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=N(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}function M(t){var e=Ka(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function B(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<Ra-3}function R(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:B(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+Vt(t.display))}}function F(t,e){e||(e=R(t));var n=t.display,i=function(t){if(null!=vo)return vo;var e=ro("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return co(t,e),e.offsetWidth&&(vo=e.offsetHeight-e.clientHeight),vo||0}(n.measure),a=e.docHeight+Ra,o=e.scrollWidth>e.clientWidth;o&&e.scrollWidth<=e.clientWidth+1&&i>0&&!e.hScrollbarTakesSpace&&(o=!1);var s=a>e.clientHeight;if(s?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=o?i+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,a-e.clientHeight+(e.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),o?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=s?i+"px":"0",n.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),o&&s?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=i+"px"):n.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===i){var r=g&&!u?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=r;var l=function(e){xa(e)!=n.scrollbarV&&xa(e)!=n.scrollbarH&&Ce(t,qe)(e)};Ta(n.scrollbarV,"mousedown",l),Ta(n.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function O(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-Ht(t));var a=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=ra(e,i),s=ra(e,a);if(n&&n.ensure){var r=n.ensure.from.line,l=n.ensure.to.line;if(r<o)return{from:r,to:ra(e,la(na(e,r))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=s)return{from:ra(e,la(na(e,l))-t.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(s,o+1)}}function U(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=V(e)-e.scroller.scrollLeft+t.doc.scrollLeft,a=e.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&n[s].gutter&&(n[s].gutter.style.left=o);var r=n[s].alignable;if(r)for(var l=0;l<r.length;l++)r[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+a+"px")}}function $(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=H(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var a=i.measure.appendChild(ro("div",[ro("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=a.firstChild.offsetWidth,s=a.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",D(t),!0}return!1}function H(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function V(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function z(t,e,n){var i=t.display;this.viewport=e,this.visible=O(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.oldViewFrom=i.viewFrom,this.oldViewTo=i.viewTo,this.oldScrollerWidth=i.scroller.clientWidth,this.force=n,this.dims=X(t)}function W(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return je(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&0==De(t))return!1;$(t)&&(je(t),e.dims=X(t));var a=i.first+i.size,s=Math.max(e.visible.from-t.options.viewportMargin,i.first),r=Math.min(a,e.visible.to+t.options.viewportMargin);n.viewFrom<s&&s-n.viewFrom<20&&(s=Math.max(i.first,n.viewFrom)),n.viewTo>r&&n.viewTo-r<20&&(r=Math.min(a,n.viewTo)),_&&(s=_i(t.doc,s),r=Ci(t.doc,r));var l=s!=n.viewFrom||r!=n.viewTo||n.lastSizeC!=e.wrapperHeight;!function(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=Ie(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=Ie(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(Ee(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(Ie(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Ee(t,n)))),i.viewTo=n}(t,s,r),n.viewOffset=la(na(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var d=De(t);if(!l&&0==d&&!e.force&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=uo();return d>4&&(n.lineDiv.style.display="none"),function(t,e,n){var i=t.display,a=t.options.lineNumbers,s=i.lineDiv,r=s.firstChild;function l(e){var n=e.nextSibling;return o&&g&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var d=i.view,c=i.viewFrom,u=0;u<d.length;u++){var h=d[u];if(h.hidden);else if(h.node){for(;r!=h.node;)r=l(r);var p=a&&null!=e&&e<=c&&h.lineNumber;h.changes&&(Ka(h.changes,"gutter")>-1&&(p=!1),Q(t,h,c,n)),p&&(lo(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(H(t.options,c)))),r=h.node.nextSibling}else{var m=ot(t,h,c,n);s.insertBefore(m,r)}c+=h.size}for(;r;)r=l(r)}(t,n.updateLineNumbers,e.dims),d>4&&(n.lineDiv.style.display=""),c&&uo()!=c&&c.offsetHeight&&c.focus(),lo(n.cursorDiv),lo(n.selectionDiv),l&&(n.lastSizeC=e.wrapperHeight,Ot(t,400)),n.updateLineNumbers=null,!0}function q(t,e){e.force;for(var n=e.viewport,i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldScrollerWidth!=t.display.scroller.clientWidth);else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Vt(t.display)-Ra-t.display.scroller.clientHeight,n.top)}),e.visible=O(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!W(t,e))break;K(t);var a=R(t);Mt(t),Y(t,a),F(t,a)}Pa(t,"update",t),t.display.viewFrom==e.oldViewFrom&&t.display.viewTo==e.oldViewTo||Pa(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)}function G(t,e){var n=new z(t,e);if(W(t,n)){K(t),q(t,n);var i=R(t);Mt(t),Y(t,i),F(t,i)}}function Y(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-Ra)+"px"}function K(t){for(var e=t.display,n=e.lineDiv.offsetTop,o=0;o<e.view.length;o++){var s,r=e.view[o];if(!r.hidden){if(i&&a<8){var l=r.node.offsetTop+r.node.offsetHeight;s=l-n,n=l}else{var d=r.node.getBoundingClientRect();s=d.bottom-d.top}var c=r.line.height-s;if(s<2&&(s=ce(e)),(c>.001||c<-.001)&&(oa(r.line,s),J(r.line),r.rest))for(var u=0;u<r.rest.length;u++)J(r.rest[u])}}}function J(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function X(t){for(var e=t.display,n={},i={},a=e.gutters.firstChild,o=0;a;a=a.nextSibling,++o)n[t.options.gutters[o]]=a.offsetLeft,i[t.options.gutters[o]]=a.offsetWidth;return{fixedPos:V(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function Q(t,e,n,i){for(var a=0;a<e.changes.length;a++){var o=e.changes[a];"text"==o?et(t,e):"gutter"==o?it(t,e,n,i):"class"==o?nt(e):"widget"==o&&at(e,i)}e.changes=null}function Z(t){return t.node==t.text&&(t.node=ro("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),i&&a<8&&(t.node.style.zIndex=2)),t.node}function tt(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ui(t,e)}function et(t,e){var n=e.text.className,i=tt(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,nt(e)):n&&(e.text.className=n)}function nt(t){!function(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var n=Z(t);t.background=n.insertBefore(ro("div",null,e),n.firstChild)}}(t),t.line.wrapClass?Z(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function it(t,e,n,i){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var a=e.line.gutterMarkers;if(t.options.lineNumbers||a){var o=Z(e),s=e.gutter=o.insertBefore(ro("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),e.text);if(!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(ro("div",H(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),a)for(var r=0;r<t.options.gutters.length;++r){var l=t.options.gutters[r],d=a.hasOwnProperty(l)&&a[l];d&&s.appendChild(ro("div",[d],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function at(t,e){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}st(t,e)}function ot(t,e,n,i){var a=tt(t,e);return e.text=e.node=a.pre,a.bgClass&&(e.bgClass=a.bgClass),a.textClass&&(e.textClass=a.textClass),nt(e),it(t,e,n,i),st(e,i),e.node}function st(t,e){if(rt(t.line,t,e,!0),t.rest)for(var n=0;n<t.rest.length;n++)rt(t.rest[n],t,e,!1)}function rt(t,e,n,i){if(t.widgets)for(var a=Z(e),o=0,s=t.widgets;o<s.length;++o){var r=s[o],l=ro("div",[r.node],"CodeMirror-linewidget");r.handleMouseEvents||(l.ignoreEvents=!0),lt(r,l,e,n),i&&r.above?a.insertBefore(l,e.gutter||e.text):a.appendChild(l),Pa(r,"redraw")}}function lt(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var a=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(a-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=a+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}var dt=C.Pos=function(t,e){if(!(this instanceof dt))return new dt(t,e);this.line=t,this.ch=e},ct=C.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};function ut(t){return dt(t.line,t.ch)}function ht(t,e){return ct(t,e)<0?e:t}function pt(t,e){return ct(t,e)<0?t:e}function mt(t,e){this.ranges=t,this.primIndex=e}function gt(t,e){this.anchor=t,this.head=e}function ft(t,e){var n=t[e];t.sort((function(t,e){return ct(t.from(),e.from())})),e=Ka(t,n);for(var i=1;i<t.length;i++){var a=t[i],o=t[i-1];if(ct(o.to(),a.from())>=0){var s=pt(o.from(),a.from()),r=ht(o.to(),a.to()),l=o.empty()?a.from()==a.head:o.from()==o.head;i<=e&&--e,t.splice(--i,2,new gt(l?r:s,l?s:r))}}return new mt(t,e)}function vt(t,e){return new mt([new gt(t,e||t)],0)}function bt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function yt(t,e){if(e.line<t.first)return dt(t.first,0);var n=t.first+t.size-1;return e.line>n?dt(n,na(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?dt(t.line,e):n<0?dt(t.line,0):t}(e,na(t,e.line).text.length)}function wt(t,e){return e>=t.first&&e<t.first+t.size}function _t(t,e,n,i){if(t.cm&&t.cm.display.shift||t.extend){var a=e.anchor;if(i){var o=ct(n,a)<0;o!=ct(i,a)<0?(a=n,n=i):o!=ct(n,i)<0&&(n=i)}return new gt(a,n)}return new gt(i||n,n)}function Ct(t,e,n,i){Tt(t,new mt([_t(t,t.sel.primary(),e,n)],0),i)}function kt(t,e,n){for(var i=[],a=0;a<t.sel.ranges.length;a++)i[a]=_t(t,t.sel.ranges[a],e[a],null);Tt(t,ft(i,t.sel.primIndex),n)}function St(t,e,n,i){var a=t.sel.ranges.slice(0);a[e]=n,Tt(t,ft(a,t.sel.primIndex),i)}function xt(t,e,n,i){Tt(t,vt(e,n),i)}function It(t,e,n){var i=t.history.done,a=Ga(i);a&&a.ranges?(i[i.length-1]=e,At(t,e,n)):Tt(t,e,n)}function Tt(t,e,n){At(t,e,n),function(t,e,n,i){var a=t.history,o=i&&i.origin;n==a.lastSelOp||o&&a.lastSelOrigin==o&&(a.lastModTime==a.lastSelTime&&a.lastOrigin==o||function(t,e,n,i){var a=e.charAt(0);return"*"==a||"+"==a&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,Ga(a.done),e))?a.done[a.done.length-1]=e:ma(e,a.done),a.lastSelTime=+new Date,a.lastSelOrigin=o,a.lastSelOp=n,i&&!1!==i.clearRedo&&ha(a.undone)}(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function At(t,e,n){(Ma(t,"beforeSelectionChange")||t.cm&&Ma(t.cm,"beforeSelectionChange"))&&(e=function(t,e){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new gt(yt(t,e[n].anchor),yt(t,e[n].head))}};return ja(t,"beforeSelectionChange",t,n),t.cm&&ja(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?ft(n.ranges,n.ranges.length-1):e}(t,e));var i=n&&n.bias||(ct(e.primary().head,t.sel.primary().head)<0?-1:1);jt(t,Pt(t,e,i,!0)),n&&!1===n.scroll||!t.cm||Tn(t.cm)}function jt(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,La(t.cm)),Pa(t,"cursorActivity",t))}function Et(t){jt(t,Pt(t,t.sel,null,!1))}function Pt(t,e,n,i){for(var a,o=0;o<e.ranges.length;o++){var s=e.ranges[o],r=Dt(t,s.anchor,n,i),l=Dt(t,s.head,n,i);(a||r!=s.anchor||l!=s.head)&&(a||(a=e.ranges.slice(0,o)),a[o]=new gt(r,l))}return a?ft(a,e.primIndex):e}function Dt(t,e,n,i){var a=!1,o=e,s=n||1;t.cantEdit=!1;t:for(;;){var r=na(t,o.line);if(r.markedSpans)for(var l=0;l<r.markedSpans.length;++l){var d=r.markedSpans[l],c=d.marker;if((null==d.from||(c.inclusiveLeft?d.from<=o.ch:d.from<o.ch))&&(null==d.to||(c.inclusiveRight?d.to>=o.ch:d.to>o.ch))){if(i&&(ja(c,"beforeCursorEnter"),c.explicitlyCleared)){if(r.markedSpans){--l;continue}break}if(!c.atomic)continue;var u=c.find(s<0?-1:1);if(0==ct(u,o)&&(u.ch+=s,u.ch<0?u=u.line>t.first?yt(t,dt(u.line-1)):null:u.ch>r.text.length&&(u=u.line<t.first+t.size-1?dt(u.line+1,0):null),!u)){if(a)return i?(t.cantEdit=!0,dt(t.first,0)):Dt(t,e,n,!0);a=!0,u=e,s=-s}o=u;continue t}}return o}}function Nt(t){for(var e=t.display,n=t.doc,i={},a=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++){var r=n.sel.ranges[s],l=r.empty();(l||t.options.showCursorWhenSelecting)&&Bt(t,r,a),l||Rt(t,r,o)}if(t.options.moveInputWithCursor){var d=oe(t,n.sel.primary().head,"div"),c=e.wrapper.getBoundingClientRect(),u=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,d.top+u.top-c.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,d.left+u.left-c.left))}return i}function Lt(t,e){co(t.display.cursorDiv,e.cursors),co(t.display.selectionDiv,e.selection),null!=e.teTop&&(t.display.inputDiv.style.top=e.teTop+"px",t.display.inputDiv.style.left=e.teLeft+"px")}function Mt(t){Lt(t,Nt(t))}function Bt(t,e,n){var i=oe(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),a=n.appendChild(ro("div"," ","CodeMirror-cursor"));if(a.style.left=i.left+"px",a.style.top=i.top+"px",a.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var o=n.appendChild(ro("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Rt(t,e,n){var i=t.display,a=t.doc,o=document.createDocumentFragment(),s=zt(t.display),r=s.left,l=i.lineSpace.offsetWidth-s.right;function d(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),o.appendChild(ro("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?l-t:n)+"px; height: "+(i-e)+"px"))}function c(e,n,i){var o,s,c=na(a,e),u=c.text.length;function h(n,i){return ae(t,dt(e,n),"div",c,i)}return function(t,e,n,i){if(!t)return i(e,n,"ltr");for(var a=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr"),a=!0)}a||i(e,n,"ltr")}(da(c),n||0,null==i?u:i,(function(t,e,a){var c,p,m,g=h(t,"left");if(t==e)c=g,p=m=g.left;else{if(c=h(e-1,"right"),"rtl"==a){var f=g;g=c,c=f}p=g.left,m=c.right}null==n&&0==t&&(p=r),c.top-g.top>3&&(d(p,g.top,null,g.bottom),p=r,g.bottom<c.top&&d(p,g.bottom,null,c.top)),null==i&&e==u&&(m=l),(!o||g.top<o.top||g.top==o.top&&g.left<o.left)&&(o=g),(!s||c.bottom>s.bottom||c.bottom==s.bottom&&c.right>s.right)&&(s=c),p<r+1&&(p=r),d(p,c.top,m-p,c.bottom)})),{start:o,end:s}}var u=e.from(),h=e.to();if(u.line==h.line)c(u.line,u.ch,h.ch);else{var p=na(a,u.line),m=na(a,h.line),g=wi(p)==wi(m),f=c(u.line,u.ch,g?p.text.length+1:null).end,v=c(h.line,g?0:null,h.ch).start;g&&(f.top<v.top-2?(d(f.right,f.top,null,f.bottom),d(r,v.top,v.left,v.bottom)):d(f.right,f.top,v.left-f.right,f.bottom)),f.bottom<v.top&&d(r,f.bottom,null,v.top)}n.appendChild(o)}function Ft(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Ot(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,Za(Ut,t))}function Ut(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=zn(e.mode,$t(t,e.frontier)),a=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(e.frontier>=t.display.viewFrom){var s=o.styles,r=Li(t,o,i,!0);o.styles=r.styles;var l=o.styleClasses,d=r.classes;d?o.styleClasses=d:l&&(o.styleClasses=null);for(var c=!s||s.length!=o.styles.length||l!=d&&(!l||!d||l.bgClass!=d.bgClass||l.textClass!=d.textClass),u=0;!c&&u<s.length;++u)c=s[u]!=o.styles[u];c&&a.push(e.frontier),o.stateAfter=zn(e.mode,i)}else Bi(t,o.text,i),o.stateAfter=e.frontier%5==0?zn(e.mode,i):null;if(++e.frontier,+new Date>n)return Ot(t,t.options.workDelay),!0})),a.length&&_e(t,(function(){for(var e=0;e<a.length;e++)Ae(t,a[e],"text")}))}}function $t(t,e,n){var i=t.doc,a=t.display;if(!i.mode.startState)return!0;var o=function(t,e,n){for(var i,a,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),r=e;r>s;--r){if(r<=o.first)return o.first;var l=na(o,r-1);if(l.stateAfter&&(!n||r<=o.frontier))return r;var d=Va(l.text,null,t.options.tabSize);(null==a||i>d)&&(a=r-1,i=d)}return a}(t,e,n),s=o>i.first&&na(i,o-1).stateAfter;return s=s?zn(i.mode,s):Wn(i.mode),i.iter(o,e,(function(n){Bi(t,n.text,s);var r=o==e-1||o%5==0||o>=a.viewFrom&&o<a.viewTo;n.stateAfter=r?zn(i.mode,s):null,++o})),n&&(i.frontier=o),s}function Ht(t){return t.lineSpace.offsetTop}function Vt(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function zt(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=co(t.measure,ro("pre","x")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function Wt(t,e,n,i){return Yt(t,Gt(t,e),n,i)}function qt(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[Ee(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Gt(t,e){var n=sa(e),i=qt(t,n);i&&!i.text?i=null:i&&i.changes&&Q(t,i,n,X(t)),i||(i=function(t,e){var n=sa(e=wi(e)),i=t.display.externalMeasured=new xe(t.doc,e,n);i.lineN=n;var a=i.built=Ui(t,i);return i.text=a.pre,co(t.display.lineMeasure,a.pre),i}(t,e));var a=function(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(i=0;i<t.rest.length;i++)if(sa(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}(i,e,n);return{line:e,view:i,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function Yt(t,e,n,o,s){e.before&&(n=-1);var r,l=n+(o||"");return e.cache.hasOwnProperty(l)?r=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var i=t.options.lineWrapping,a=i&&t.display.scroller.clientWidth;if(!e.measure.heights||i&&e.measure.width!=a){var o=e.measure.heights=[];if(i){e.measure.width=a;for(var s=e.text.firstChild.getClientRects(),r=0;r<s.length-1;r++){var l=s[r],d=s[r+1];Math.abs(l.bottom-d.bottom)>2&&o.push((l.bottom+d.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(r=function(t,e,n,o){for(var s,r,l,d,c,u=e.map,h=0;h<u.length;h+=3){var p=u[h],m=u[h+1];if(n<p?(r=0,l=1,d="left"):n<m?l=1+(r=n-p):(h==u.length-3||n==m&&u[h+3]>n)&&(r=(l=m-p)-1,n>=m&&(d="right")),null!=r){if(s=u[h+2],p==m&&o==(s.insertLeft?"left":"right")&&(d=o),"left"==o&&0==r)for(;h&&u[h-2]==u[h-3]&&u[h-1].insertLeft;)s=u[2+(h-=3)],d="left";if("right"==o&&r==m-p)for(;h<u.length-3&&u[h+3]==u[h+4]&&!u[h+5].insertLeft;)s=u[(h+=3)+2],d="right";break}}if(3==s.nodeType)for(;;){for(;r&&so(e.line.text.charAt(p+r));)--r;for(;p+l<m&&so(e.line.text.charAt(p+l));)++l;if(i&&a<9&&0==r&&l==m-p)c=s.parentNode.getBoundingClientRect();else if(i&&t.options.lineWrapping){var g=ao(s,r,l).getClientRects();c=g.length?g["right"==o?g.length-1:0]:Jt}else c=ao(s,r,l).getBoundingClientRect()||Jt;if(c.left||c.right||0==r)break;l=r,r-=1,d="right"}else r>0&&(d=o="right"),c=t.options.lineWrapping&&(g=s.getClientRects()).length>1?g["right"==o?g.length-1:0]:s.getBoundingClientRect();if(i&&a<9&&!r&&(!c||!c.left&&!c.right)){var f=s.parentNode.getClientRects()[0];c=f?{left:f.left,right:f.left+ue(t.display),top:f.top,bottom:f.bottom}:Jt}i&&a<11&&(c=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=jo)return jo;var e=co(t,ro("span","x")),n=e.getBoundingClientRect(),i=ao(e,0,1).getBoundingClientRect();return jo=Math.abs(n.left-i.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}(t.display.measure,c));var v=c.top-e.rect.top,b=c.bottom-e.rect.top,y=(v+b)/2,w=e.view.measure.heights;for(h=0;h<w.length-1&&!(y<w[h]);h++);var _=h?w[h-1]:0,C=w[h],k={left:("right"==d?c.right:c.left)-e.rect.left,right:("left"==d?c.left:c.right)-e.rect.left,top:_,bottom:C};return c.left||c.right||(k.bogus=!0),t.options.singleCursorHeightPerLine||(k.rtop=v,k.rbottom=b),k}(t,e,n,o)).bogus||(e.cache[l]=r)),{left:r.left,right:r.right,top:s?r.rtop:r.top,bottom:s?r.rbottom:r.bottom}}mt.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(0!=ct(n.anchor,i.anchor)||0!=ct(n.head,i.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new gt(ut(this.ranges[e].anchor),ut(this.ranges[e].head));return new mt(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ct(e,i.from())>=0&&ct(t,i.to())<=0)return n}return-1}},gt.prototype={from:function(){return pt(this.anchor,this.head)},to:function(){return ht(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Kt,Jt={left:0,right:0,top:0,bottom:0};function Xt(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Qt(t){t.display.externalMeasure=null,lo(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Xt(t.display.view[e])}function Zt(t){Qt(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function te(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ee(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ne(t,e,n,i){if(e.widgets)for(var a=0;a<e.widgets.length;++a)if(e.widgets[a].above){var o=Ti(e.widgets[a]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=la(e);if("local"==i?s+=Ht(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var r=t.display.lineSpace.getBoundingClientRect();s+=r.top+("window"==i?0:ee());var l=r.left+("window"==i?0:te());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function ie(t,e,n){if("div"==n)return e;var i=e.left,a=e.top;if("page"==n)i-=te(),a-=ee();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,a+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:a-s.top}}function ae(t,e,n,i,a){return i||(i=na(t.doc,e.line)),ne(t,i,Wt(t,i,e.ch,a),n)}function oe(t,e,n,i,a,o){function s(e,s){var r=Yt(t,a,e,s?"right":"left",o);return s?r.left=r.right:r.right=r.left,ne(t,i,r,n)}function r(t,e){var n=l[e],i=n.level%2;return t==Po(n)&&e&&n.level<l[e-1].level?(t=Do(n=l[--e])-(n.level%2?0:1),i=!0):t==Do(n)&&e<l.length-1&&n.level<l[e+1].level&&(t=Po(n=l[++e])-n.level%2,i=!1),i&&t==n.to&&t>n.from?s(t-1):s(t,i)}i=i||na(t.doc,e.line),a||(a=Gt(t,i));var l=da(i),d=e.ch;if(!l)return s(d);var c=r(d,Fo(l,d));return null!=xo&&(c.other=r(d,xo)),c}function se(t,e){var n=0;e=yt(t.doc,e),t.options.lineWrapping||(n=ue(t.display)*e.ch);var i=na(t.doc,e.line),a=la(i)+Ht(t.display);return{left:n,right:n,top:a,bottom:a+i.height}}function re(t,e,n,i){var a=dt(t,e);return a.xRel=i,n&&(a.outside=!0),a}function le(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return re(i.first,0,!0,-1);var a=ra(i,n),o=i.first+i.size-1;if(a>o)return re(i.first+i.size-1,na(i,o).text.length,!0,1);e<0&&(e=0);for(var s=na(i,a);;){var r=de(t,s,a,e,n),l=bi(s),d=l&&l.find(0,!0);if(!l||!(r.ch>d.from.ch||r.ch==d.from.ch&&r.xRel>0))return r;a=sa(s=d.to.line)}}function de(t,e,n,i,a){var o=a-la(e),s=!1,r=2*t.display.wrapper.clientWidth,l=Gt(t,e);function d(i){var a=oe(t,dt(n,i),"line",e,l);return s=!0,o>a.bottom?a.left-r:o<a.top?a.left+r:(s=!1,a.left)}var c=da(e),u=e.text.length,h=No(e),p=Lo(e),m=d(h),g=s,f=d(p),v=s;if(i>f)return re(n,p,v,1);for(;;){if(c?p==h||p==Uo(e,h,1):p-h<=1){for(var b=i<m||i-m<=f-i?h:p,y=i-(b==h?m:f);so(e.text.charAt(b));)++b;return re(n,b,b==h?g:v,y<-1?-1:y>1?1:0)}var w=Math.ceil(u/2),_=h+w;if(c){_=h;for(var C=0;C<w;++C)_=Uo(e,_,1)}var k=d(_);k>i?(p=_,f=k,(v=s)&&(f+=1e3),u=w):(h=_,m=k,g=s,u-=w)}}function ce(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Kt){Kt=ro("pre");for(var e=0;e<49;++e)Kt.appendChild(document.createTextNode("x")),Kt.appendChild(ro("br"));Kt.appendChild(document.createTextNode("x"))}co(t.measure,Kt);var n=Kt.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),lo(t.measure),n||1}function ue(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=ro("span","xxxxxxxxxx"),n=ro("pre",[e]);co(t.measure,n);var i=e.getBoundingClientRect(),a=(i.right-i.left)/10;return a>2&&(t.cachedCharWidth=a),a||10}var he=null,pe=0;function me(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++pe},he?he.ops.push(t.curOp):t.curOp.ownsGroup=he={ops:[t.curOp],delayedCallbacks:[]}}function ge(t){var e=t.curOp.ownsGroup;if(e)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n]();for(var i=0;i<t.ops.length;i++){var a=t.ops[i];if(a.cursorActivityHandlers)for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;)a.cursorActivityHandlers[a.cursorActivityCalled++](a.cm)}}while(n<e.length)}(e)}finally{he=null;for(var n=0;n<e.ops.length;n++)e.ops[n].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)fe(e[n]);for(n=0;n<e.length;n++)ve(e[n]);for(n=0;n<e.length;n++)be(e[n]);for(n=0;n<e.length;n++)ye(e[n]);for(n=0;n<e.length;n++)we(e[n])}(e)}}function fe(t){var e=t.cm,n=e.display;t.updateMaxLine&&L(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new z(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ve(t){t.updatedDisplay=t.mustUpdate&&W(t.cm,t.update)}function be(t){var e=t.cm,n=e.display;t.updatedDisplay&&K(e),t.barMeasure=R(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Wt(e,n.maxLine,n.maxLine.text.length).left+3,t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo+Ra-n.scroller.clientWidth)),(t.updatedDisplay||t.selectionChanged)&&(t.newSelectionNodes=Nt(e))}function ye(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Qe(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.newSelectionNodes&&Lt(e,t.newSelectionNodes),t.updatedDisplay&&Y(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&F(e,t.barMeasure),t.selectionChanged&&Ft(e),e.state.focused&&t.updateInput&&Oe(e,t.typing)}function we(t){var e=t.cm,n=e.display,i=e.doc;if(null!=t.adjustWidthTo&&Math.abs(t.barMeasure.scrollWidth-e.display.scroller.scrollWidth)>1&&F(e),t.updatedDisplay&&q(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&n.scroller.scrollTop!=t.scrollTop){var a=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,t.scrollTop));n.scroller.scrollTop=n.scrollbarV.scrollTop=i.scrollTop=a}if(null!=t.scrollLeft&&n.scroller.scrollLeft!=t.scrollLeft){var s=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,t.scrollLeft));n.scroller.scrollLeft=n.scrollbarH.scrollLeft=i.scrollLeft=s,U(e)}if(t.scrollToPos){var r=function(t,e,n,i){for(null==i&&(i=0);;){var a=!1,o=oe(t,e),s=n&&n!=e?oe(t,n):o,r=xn(t,Math.min(o.left,s.left),Math.min(o.top,s.top)-i,Math.max(o.left,s.left),Math.max(o.bottom,s.bottom)+i),l=t.doc.scrollTop,d=t.doc.scrollLeft;if(null!=r.scrollTop&&(Xe(t,r.scrollTop),Math.abs(t.doc.scrollTop-l)>1&&(a=!0)),null!=r.scrollLeft&&(Qe(t,r.scrollLeft),Math.abs(t.doc.scrollLeft-d)>1&&(a=!0)),!a)return o}}(e,yt(i,t.scrollToPos.from),yt(i,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&function(t,e){var n=t.display,i=n.sizer.getBoundingClientRect(),a=null;if(e.top+i.top<0?a=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(a=!1),null!=a&&!h){var o=ro("div","​",null,"position: absolute; top: "+(e.top-n.viewOffset-Ht(t.display))+"px; height: "+(e.bottom-e.top+Ra)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(a),t.display.lineSpace.removeChild(o)}}(e,r)}var l=t.maybeHiddenMarkers,d=t.maybeUnhiddenMarkers;if(l)for(var c=0;c<l.length;++c)l[c].lines.length||ja(l[c],"hide");if(d)for(c=0;c<d.length;++c)d[c].lines.length&&ja(d[c],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.updatedDisplay&&o&&(e.options.lineWrapping&&function(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}(e,t.barMeasure),t.barMeasure.scrollWidth>t.barMeasure.clientWidth&&t.barMeasure.scrollWidth<t.barMeasure.clientWidth+1&&!B(e)&&F(e)),t.changeObjs&&ja(e,"changes",e,t.changeObjs)}function _e(t,e){if(t.curOp)return e();me(t);try{return e()}finally{ge(t)}}function Ce(t,e){return function(){if(t.curOp)return e.apply(t,arguments);me(t);try{return e.apply(t,arguments)}finally{ge(t)}}}function ke(t){return function(){if(this.curOp)return t.apply(this,arguments);me(this);try{return t.apply(this,arguments)}finally{ge(this)}}}function Se(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);me(e);try{return t.apply(this,arguments)}finally{ge(e)}}}function xe(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=bi(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?sa(Ga(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ki(t,e)}function Ie(t,e,n){for(var i,a=[],o=e;o<n;o=i){var s=new xe(t.doc,na(t.doc,o),o);i=o+s.size,a.push(s)}return a}function Te(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var a=t.display;if(i&&n<a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>e)&&(a.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=a.viewTo)_&&_i(t.doc,e)<a.viewTo&&je(t);else if(n<=a.viewFrom)_&&Ci(t.doc,n+i)>a.viewFrom?je(t):(a.viewFrom+=i,a.viewTo+=i);else if(e<=a.viewFrom&&n>=a.viewTo)je(t);else if(e<=a.viewFrom)(o=Pe(t,n,n+i,1))?(a.view=a.view.slice(o.index),a.viewFrom=o.lineN,a.viewTo+=i):je(t);else if(n>=a.viewTo){var o;(o=Pe(t,e,e,-1))?(a.view=a.view.slice(0,o.index),a.viewTo=o.lineN):je(t)}else{var s=Pe(t,e,e,-1),r=Pe(t,n,n+i,1);s&&r?(a.view=a.view.slice(0,s.index).concat(Ie(t,s.lineN,r.lineN)).concat(a.view.slice(r.index)),a.viewTo+=i):je(t)}var l=a.externalMeasured;l&&(n<l.lineN?l.lineN+=i:e<l.lineN+l.size&&(a.externalMeasured=null))}function Ae(t,e,n){t.curOp.viewChanged=!0;var i=t.display,a=t.display.externalMeasured;if(a&&e>=a.lineN&&e<a.lineN+a.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[Ee(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==Ka(s,n)&&s.push(n)}}}function je(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Ee(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function Pe(t,e,n,i){var a,o=Ee(t,e),s=t.display.view;if(!_||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var r=0,l=t.display.viewFrom;r<o;r++)l+=s[r].size;if(l!=e){if(i>0){if(o==s.length-1)return null;a=l+s[o].size-e,o++}else a=l-e;e+=a,n+=a}for(;_i(t.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function De(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var a=e[i];a.hidden||a.node&&!a.changes||++n}return n}function Ne(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,(function(){Fe(t),t.state.focused&&Ne(t)}))}function Le(t){var e=!1;t.display.pollingFast=!0,t.display.poll.set(20,(function n(){Fe(t)||e?(t.display.pollingFast=!1,Ne(t)):(e=!0,t.display.poll.set(60,n))}))}var Me,Be,Re=null;function Fe(t){var e=t.display.input,n=t.display.prevInput,o=t.doc;if(!t.state.focused||To(e)&&!n||He(t)||t.options.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var s=e.value;if(s==n&&!t.somethingSelected())return!1;if(i&&a>=9&&t.display.inputHasSelection===s||g&&/[\uf700-\uf7ff]/.test(s))return Oe(t),!1;var r=!t.curOp;r&&me(t),t.display.shift=!1,8203!=s.charCodeAt(0)||o.sel!=t.display.selForContextMenu||n||(n="​");for(var l=0,d=Math.min(n.length,s.length);l<d&&n.charCodeAt(l)==s.charCodeAt(l);)++l;var c=s.slice(l),u=Io(c),h=null;t.state.pasteIncoming&&o.sel.ranges.length>1&&(Re&&Re.join("\n")==c?h=o.sel.ranges.length%Re.length==0&&Ja(Re,Io):u.length==o.sel.ranges.length&&(h=Ja(u,(function(t){return[t]}))));for(var p=o.sel.ranges.length-1;p>=0;p--){var m=o.sel.ranges[p],f=m.from(),v=m.to();l<n.length?f=dt(f.line,f.ch-(n.length-l)):t.state.overwrite&&m.empty()&&!t.state.pasteIncoming&&(v=dt(v.line,Math.min(na(o,v.line).text.length,v.ch+Ga(u).length)));var b=t.curOp.updateInput,y={from:f,to:v,text:h?h[p%h.length]:u,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(yn(t.doc,y),Pa(t,"inputRead",t,y),c&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&m.head.ch<100&&(!p||o.sel.ranges[p-1].head.line!=m.head.line)){var w=t.getModeAt(m.head);if(w.electricChars){for(var _=0;_<w.electricChars.length;_++)if(c.indexOf(w.electricChars.charAt(_))>-1){jn(t,m.head.line,"smart");break}}else if(w.electricInput){var C=mn(y);w.electricInput.test(na(o,C.line).text.slice(0,C.ch))&&jn(t,m.head.line,"smart")}}}return Tn(t),t.curOp.updateInput=b,t.curOp.typing=!0,s.length>1e3||s.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=s,r&&ge(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function Oe(t,e){var n,o,s=t.doc;if(t.somethingSelected()){t.display.prevInput="";var r=s.sel.primary(),l=(n=Ao&&(r.to().line-r.from().line>100||(o=t.getSelection()).length>1e3))?"-":o||t.getSelection();t.display.input.value=l,t.state.focused&&Ya(t.display.input),i&&a>=9&&(t.display.inputHasSelection=l)}else e||(t.display.prevInput=t.display.input.value="",i&&a>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=n}function Ue(t){"nocursor"==t.options.readOnly||m&&uo()==t.display.input||t.display.input.focus()}function $e(t){t.state.focused||(Ue(t),un(t))}function He(t){return t.options.readOnly||t.doc.cantEdit}function Ve(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize()}function ze(t,e){for(var n=xa(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function We(t,e,n,i){var a=t.display;if(!n){var o=xa(e);if(o==a.scrollbarH||o==a.scrollbarV||o==a.scrollbarFiller||o==a.gutterFiller)return null}var s,r,l=a.lineSpace.getBoundingClientRect();try{s=e.clientX-l.left,r=e.clientY-l.top}catch(e){return null}var d,c=le(t,s,r);if(i&&1==c.xRel&&(d=na(t.doc,c.line).text).length==c.ch){var u=Va(d,d.length,t.options.tabSize)-d.length;c=dt(c.line,Math.max(0,Math.round((s-zt(t.display).left)/ue(t.display))-u))}return c}function qe(t){if(!Na(this,t)){var e=this,n=e.display;if(n.shift=t.shiftKey,ze(n,t))o||(n.scroller.draggable=!1,setTimeout((function(){n.scroller.draggable=!0}),100));else if(!Ye(e,t)){var s=We(e,t);switch(window.focus(),Ia(t)){case 1:s?function(t,e,n){setTimeout(Za($e,t),0);var s,r=+new Date;Be&&Be.time>r-400&&0==ct(Be.pos,n)?s="triple":Me&&Me.time>r-400&&0==ct(Me.pos,n)?(s="double",Be={time:r,pos:n}):(s="single",Me={time:r,pos:n});var l=t.doc.sel,d=g?e.metaKey:e.ctrlKey;t.options.dragDrop&&_o&&!He(t)&&"single"==s&&l.contains(n)>-1&&l.somethingSelected()?function(t,e,n,s){var r=t.display,l=Ce(t,(function(d){o&&(r.scroller.draggable=!1),t.state.draggingText=!1,Aa(document,"mouseup",l),Aa(r.scroller,"drop",l),Math.abs(e.clientX-d.clientX)+Math.abs(e.clientY-d.clientY)<10&&(_a(d),s||Ct(t.doc,n),Ue(t),i&&9==a&&setTimeout((function(){document.body.focus(),Ue(t)}),20))}));o&&(r.scroller.draggable=!0),t.state.draggingText=l,r.scroller.dragDrop&&r.scroller.dragDrop(),Ta(document,"mouseup",l),Ta(r.scroller,"drop",l)}(t,e,n,d):function(t,e,n,i,a){var o=t.display,s=t.doc;_a(e);var r,l,d=s.sel;if(a&&!e.shiftKey?(l=s.sel.contains(n),r=l>-1?s.sel.ranges[l]:new gt(n,n)):r=s.sel.primary(),e.altKey)i="rect",a||(r=new gt(n,n)),n=We(t,e,!0,!0),l=-1;else if("double"==i){var c=Ln(t,n);r=t.display.shift||s.extend?_t(s,r,c.anchor,c.head):c}else if("triple"==i){var u=new gt(dt(n.line,0),yt(s,dt(n.line+1,0)));r=t.display.shift||s.extend?_t(s,r,u.anchor,u.head):u}else r=_t(s,r,n);a?l>-1?St(s,l,r,Ua):(l=s.sel.ranges.length,Tt(s,ft(s.sel.ranges.concat([r]),l),{scroll:!1,origin:"*mouse"})):(l=0,Tt(s,new mt([r],0),Ua),d=s.sel);var h=n,p=o.wrapper.getBoundingClientRect(),m=0;function g(e){var a=++m,c=We(t,e,!0,"rect"==i);if(c)if(0!=ct(c,h)){$e(t),function(e){if(0!=ct(h,e))if(h=e,"rect"==i){for(var a=[],o=t.options.tabSize,c=Va(na(s,n.line).text,n.ch,o),u=Va(na(s,e.line).text,e.ch,o),p=Math.min(c,u),m=Math.max(c,u),g=Math.min(n.line,e.line),f=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=f;g++){var v=na(s,g).text,b=za(v,p,o);p==m?a.push(new gt(dt(g,b),dt(g,b))):v.length>b&&a.push(new gt(dt(g,b),dt(g,za(v,m,o))))}a.length||a.push(new gt(n,n)),Tt(s,ft(d.ranges.slice(0,l).concat(a),l),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var y=r,w=y.anchor,_=e;if("single"!=i){if("double"==i)var C=Ln(t,e);else C=new gt(dt(e.line,0),yt(s,dt(e.line+1,0)));ct(C.anchor,w)>0?(_=C.head,w=pt(y.from(),C.anchor)):(_=C.anchor,w=ht(y.to(),C.head))}(a=d.ranges.slice(0))[l]=new gt(yt(s,w),_),Tt(s,ft(a,l),Ua)}}(c);var u=O(o,s);(c.line>=u.to||c.line<u.from)&&setTimeout(Ce(t,(function(){m==a&&g(e)})),150)}else{var f=e.clientY<p.top?-20:e.clientY>p.bottom?20:0;f&&setTimeout(Ce(t,(function(){m==a&&(o.scroller.scrollTop+=f,g(e))})),50)}}function f(e){m=1/0,_a(e),Ue(t),Aa(document,"mousemove",v),Aa(document,"mouseup",b),s.history.lastSelOrigin=null}var v=Ce(t,(function(t){Ia(t)?g(t):f(t)})),b=Ce(t,f);Ta(document,"mousemove",v),Ta(document,"mouseup",b)}(t,e,n,s,d)}(e,t,s):xa(t)==n.scroller&&_a(t);break;case 2:o&&(e.state.lastMiddleDown=+new Date),s&&Ct(e.doc,s),setTimeout(Za(Ue,e),20),_a(t);break;case 3:y&&pn(e,t)}}}}function Ge(t,e,n,i,a){try{var o=e.clientX,s=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&_a(e);var r=t.display,l=r.lineDiv.getBoundingClientRect();if(s>l.bottom||!Ma(t,n))return ka(e);s-=l.top-r.viewOffset;for(var d=0;d<t.options.gutters.length;++d){var c=r.gutters.childNodes[d];if(c&&c.getBoundingClientRect().right>=o)return a(t,n,t,ra(t.doc,s),t.options.gutters[d],e),ka(e)}}function Ye(t,e){return Ge(t,e,"gutterClick",!0,Pa)}var Ke=0;function Je(t){var e=this;if(!Na(e,t)&&!ze(e.display,t)){_a(t),i&&(Ke=+new Date);var n=We(e,t,!0),a=t.dataTransfer.files;if(n&&!He(e))if(a&&a.length&&window.FileReader&&window.File)for(var o=a.length,s=Array(o),r=0,l=function(t,i){var a=new FileReader;a.onload=Ce(e,(function(){if(s[i]=a.result,++r==o){var t={from:n=yt(e.doc,n),to:n,text:Io(s.join("\n")),origin:"paste"};yn(e.doc,t),It(e.doc,vt(n,mn(t)))}})),a.readAsText(t)},d=0;d<o;++d)l(a[d],d);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(Za(Ue,e),20);try{if(s=t.dataTransfer.getData("Text")){if(e.state.draggingText&&!(g?t.metaKey:t.ctrlKey))var c=e.listSelections();if(At(e.doc,vt(n,n)),c)for(d=0;d<c.length;++d)Sn(e.doc,"",c[d].anchor,c[d].head,"drag");e.replaceSelection(s,"around","paste"),Ue(e)}}catch(t){}}}}function Xe(e,n){Math.abs(e.doc.scrollTop-n)<2||(e.doc.scrollTop=n,t||G(e,{top:n}),e.display.scroller.scrollTop!=n&&(e.display.scroller.scrollTop=n),e.display.scrollbarV.scrollTop!=n&&(e.display.scrollbarV.scrollTop=n),t&&G(e),Ot(e,100))}function Qe(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,U(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}var Ze,tn=0,en=null;function nn(e,n){var i=n.wheelDeltaX,a=n.wheelDeltaY;null==i&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(i=n.detail),null==a&&n.detail&&n.axis==n.VERTICAL_AXIS?a=n.detail:null==a&&(a=n.wheelDelta);var s=e.display,r=s.scroller;if(i&&r.scrollWidth>r.clientWidth||a&&r.scrollHeight>r.clientHeight){if(a&&g&&o)t:for(var d=n.target,c=s.view;d!=r;d=d.parentNode)for(var u=0;u<c.length;u++)if(c[u].node==d){e.display.currentWheelTarget=d;break t}if(i&&!t&&!l&&null!=en)return a&&Xe(e,Math.max(0,Math.min(r.scrollTop+a*en,r.scrollHeight-r.clientHeight))),Qe(e,Math.max(0,Math.min(r.scrollLeft+i*en,r.scrollWidth-r.clientWidth))),_a(n),void(s.wheelStartX=null);if(a&&null!=en){var h=a*en,p=e.doc.scrollTop,m=p+s.wrapper.clientHeight;h<0?p=Math.max(0,p+h-50):m=Math.min(e.doc.height,m+h+50),G(e,{top:p,bottom:m})}tn<20&&(null==s.wheelStartX?(s.wheelStartX=r.scrollLeft,s.wheelStartY=r.scrollTop,s.wheelDX=i,s.wheelDY=a,setTimeout((function(){if(null!=s.wheelStartX){var t=r.scrollLeft-s.wheelStartX,e=r.scrollTop-s.wheelStartY,n=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(en=(en*tn+n)/(tn+1),++tn)}}),200)):(s.wheelDX+=i,s.wheelDY+=a))}}function an(t,e,n){if("string"==typeof e&&!(e=qn[e]))return!1;t.display.pollingFast&&Fe(t)&&(t.display.pollingFast=!1);var i=t.display.shift,a=!1;try{He(t)&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),a=e(t)!=Fa}finally{t.display.shift=i,t.state.suppressEdits=!1}return a}function on(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function sn(t,e){var n=Yn(t.options.keyMap),i=n.auto;clearTimeout(Ze),i&&!Jn(e)&&(Ze=setTimeout((function(){Yn(t.options.keyMap)==n&&(t.options.keyMap=i.call?i.call(null,t):i,A(t))}),50));var a=Xn(e,!0),o=!1;if(!a)return!1;var s=on(t);return(o=e.shiftKey?Kn("Shift-"+a,s,(function(e){return an(t,e,!0)}))||Kn(a,s,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return an(t,e)})):Kn(a,s,(function(e){return an(t,e)})))&&(_a(e),Ft(t),Pa(t,"keyHandled",t,a,e)),o}i?en=-.53:t?en=15:r?en=-.7:d&&(en=-1/3);var rn=null;function ln(t){var e=this;if($e(e),!Na(e,t)){i&&a<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var o=sn(e,t);l&&(rn=o?n:null,o||88!=n||Ao||!(g?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(po(e,"CodeMirror-crosshair"),Aa(document,"keyup",n),Aa(document,"mouseover",n))}mo(e,"CodeMirror-crosshair"),Ta(document,"keyup",n),Ta(document,"mouseover",n)}(e)}}function dn(t){16==t.keyCode&&(this.doc.sel.shift=!1),Na(this,t)}function cn(t){var e=this;if(!(Na(e,t)||t.ctrlKey&&!t.altKey||g&&t.metaKey)){var n=t.keyCode,o=t.charCode;if(l&&n==rn)return rn=null,void _a(t);(l&&(!t.which||t.which<10)||c)&&sn(e,t)||function(t,e,n){var i=Kn("'"+n+"'",on(t),(function(e){return an(t,e,!0)}));return i&&(_a(e),Ft(t),Pa(t,"keyHandled",t,"'"+n+"'",e)),i}(e,t,String.fromCharCode(null==o?n:o))||(i&&a>=9&&(e.display.inputHasSelection=null),Le(e))}}function un(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(ja(t,"focus",t),t.state.focused=!0,mo(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(Oe(t),o&&setTimeout(Za(Oe,t,!0),0))),Ne(t),Ft(t))}function hn(t){t.state.focused&&(ja(t,"blur",t),t.state.focused=!1,po(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150)}function pn(t,e){if(!Na(t,e,"contextmenu")){var n=t.display;if(!ze(n,e)&&!function(t,e){return!!Ma(t,"gutterContextMenu")&&Ge(t,e,"gutterContextMenu",!1,ja)}(t,e)){var s=We(t,e),r=n.scroller.scrollTop;if(s&&!l){t.options.resetSelectionOnContextMenu&&-1==t.doc.sel.contains(s)&&Ce(t,Tt)(t.doc,vt(s),Oa);var d=n.input.style.cssText;if(n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(i?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",o)var c=window.scrollY;if(Ue(t),o&&window.scrollTo(null,c),Oe(t),t.somethingSelected()||(n.input.value=n.prevInput=" "),n.selForContextMenu=t.doc.sel,clearTimeout(n.detectingSelectAll),i&&a>=9&&h(),y){Sa(e);var u=function(){Aa(window,"mouseup",u),setTimeout(p,20)};Ta(window,"mouseup",u)}else setTimeout(p,50)}}}function h(){if(null!=n.input.selectionStart){var e=t.somethingSelected(),i=n.input.value="​"+(e?n.input.value:"");n.prevInput=e?"":"​",n.input.selectionStart=1,n.input.selectionEnd=i.length,n.selForContextMenu=t.doc.sel}}function p(){if(n.inputDiv.style.position="relative",n.input.style.cssText=d,i&&a<9&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=r),Ne(t),null!=n.input.selectionStart){(!i||i&&a<9)&&h();var e=0,o=function(){n.selForContextMenu==t.doc.sel&&0==n.input.selectionStart?Ce(t,qn.selectAll)(t):e++<10?n.detectingSelectAll=setTimeout(o,500):Oe(t)};n.detectingSelectAll=setTimeout(o,200)}}}var mn=C.changeEnd=function(t){return t.text?dt(t.from.line+t.text.length-1,Ga(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};function gn(t,e){if(ct(t,e.from)<0)return t;if(ct(t,e.to)<=0)return mn(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=mn(e).ch-e.to.ch),dt(n,i)}function fn(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var a=t.sel.ranges[i];n.push(new gt(gn(a.anchor,e),gn(a.head,e)))}return ft(n,t.sel.primIndex)}function vn(t,e,n){return t.line==e.line?dt(n.line,t.ch-e.ch+n.ch):dt(n.line+(t.line-e.line),t.ch)}function bn(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(e,n,i,a){e&&(this.from=yt(t,e)),n&&(this.to=yt(t,n)),i&&(this.text=i),void 0!==a&&(this.origin=a)}),ja(t,"beforeChange",t,i),t.cm&&ja(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function yn(t,e,n){if(t.cm){if(!t.cm.curOp)return Ce(t.cm,yn)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(Ma(t,"beforeChange")||t.cm&&Ma(t.cm,"beforeChange"))||(e=bn(t,e,!0))){var i=w&&!n&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=Ka(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var a=[{from:e,to:n}],o=0;o<i.length;++o)for(var s=i[o],r=s.find(0),l=0;l<a.length;++l){var d=a[l];if(!(ct(d.to,r.from)<0||ct(d.from,r.to)>0)){var c=[l,1],u=ct(d.from,r.from),h=ct(d.to,r.to);(u<0||!s.inclusiveLeft&&!u)&&c.push({from:d.from,to:r.from}),(h>0||!s.inclusiveRight&&!h)&&c.push({from:r.to,to:d.to}),a.splice.apply(a,c),l+=c.length-1}}return a}(t,e.from,e.to);if(i)for(var a=i.length-1;a>=0;--a)wn(t,{from:i[a].from,to:i[a].to,text:a?[""]:e.text});else wn(t,e)}}function wn(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ct(e.from,e.to)){var n=fn(t,e);pa(t,e,n,t.cm?t.cm.curOp.id:NaN),kn(t,e,n,li(t,e));var i=[];ta(t,(function(t,n){n||-1!=Ka(i,t.history)||(wa(t.history,e),i.push(t.history)),kn(t,e,null,li(t,e))}))}}function _n(t,e,n){if(!t.cm||!t.cm.state.suppressEdits){for(var i,a=t.history,o=t.sel,s="undo"==e?a.done:a.undone,r="undo"==e?a.undone:a.done,l=0;l<s.length&&(i=s[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=s.length){for(a.lastOrigin=a.lastSelOrigin=null;(i=s.pop()).ranges;){if(ma(i,r),n&&!i.equals(t.sel))return void Tt(t,i,{clearRedo:!1});o=i}var d=[];ma(o,r),r.push({changes:d,generation:a.generation}),a.generation=i.generation||++a.maxGeneration;var c=Ma(t,"beforeChange")||t.cm&&Ma(t.cm,"beforeChange");for(l=i.changes.length-1;l>=0;--l){var u=i.changes[l];if(u.origin=e,c&&!bn(t,u,!1))return void(s.length=0);d.push(ua(t,u));var h=l?fn(t,u):Ga(s);kn(t,u,h,ci(t,u)),!l&&t.cm&&t.cm.scrollIntoView({from:u.from,to:mn(u)});var p=[];ta(t,(function(t,e){e||-1!=Ka(p,t.history)||(wa(t.history,u),p.push(t.history)),kn(t,u,null,ci(t,u))}))}}}}function Cn(t,e){if(0!=e&&(t.first+=e,t.sel=new mt(Ja(t.sel.ranges,(function(t){return new gt(dt(t.anchor.line+e,t.anchor.ch),dt(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){Te(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)Ae(t.cm,i,"gutter")}}function kn(t,e,n,i){if(t.cm&&!t.cm.curOp)return Ce(t.cm,kn)(t,e,n,i);if(e.to.line<t.first)Cn(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var a=e.text.length-1-(t.first-e.from.line);Cn(t,a),e={from:dt(t.first,0),to:dt(e.to.line+a,e.to.ch),text:[Ga(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:dt(o,na(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=ia(t,e.from,e.to),n||(n=fn(t,e)),t.cm?function(t,e,n){var i=t.doc,a=t.display,o=e.from,s=e.to,r=!1,l=o.line;t.options.lineWrapping||(l=sa(wi(na(i,o.line))),i.iter(l,s.line+1,(function(t){if(t==a.maxLine)return r=!0,!0}))),i.sel.contains(e.from,e.to)>-1&&La(t),Gi(i,e,n,I(t)),t.options.lineWrapping||(i.iter(l,o.line+e.text.length,(function(t){var e=N(t);e>a.maxLineLength&&(a.maxLine=t,a.maxLineLength=e,a.maxLineChanged=!0,r=!1)})),r&&(t.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),Ot(t,400);var d=e.text.length-(s.line-o.line)-1;o.line!=s.line||1!=e.text.length||qi(t.doc,e)?Te(t,o.line,s.line+1,d):Ae(t,o.line,"text");var c=Ma(t,"changes"),u=Ma(t,"change");if(u||c){var h={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};u&&Pa(t,"change",t,h),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(h)}t.display.selForContextMenu=null}(t.cm,e,i):Gi(t,e,i),At(t,n,Oa)}}function Sn(t,e,n,i,a){if(i||(i=n),ct(i,n)<0){var o=i;i=n,n=o}"string"==typeof e&&(e=Io(e)),yn(t,{from:n,to:i,text:e,origin:a})}function xn(t,e,n,i,a){var o=t.display,s=ce(t.display);n<0&&(n=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-Ra,d={};a-n>l&&(a=n+l);var c=t.doc.height+Vt(o),u=n<s,h=a>c-s;if(n<r)d.scrollTop=u?0:n;else if(a>r+l){var p=Math.min(n,(h?c:a)-l);p!=r&&(d.scrollTop=p)}var m=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,g=o.scroller.clientWidth-Ra-o.gutters.offsetWidth,f=i-e>g;return f&&(i=n+l),e<10?d.scrollLeft=0:e<m?d.scrollLeft=Math.max(0,e-(f?0:10)):i>g+m-3&&(d.scrollLeft=i+(f?0:10)-g),d}function In(t,e,n){null==e&&null==n||An(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=n&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function Tn(t){An(t);var e=t.getCursor(),n=e,i=e;t.options.lineWrapping||(n=e.ch?dt(e.line,e.ch-1):e,i=dt(e.line,e.ch+1)),t.curOp.scrollToPos={from:n,to:i,margin:t.options.cursorScrollMargin,isCursor:!0}}function An(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=se(t,e.from),i=se(t,e.to),a=xn(t,Math.min(n.left,i.left),Math.min(n.top,i.top)-e.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+e.margin);t.scrollTo(a.scrollLeft,a.scrollTop)}}function jn(t,e,n,i){var a,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?a=$t(t,e):n="prev");var s=t.options.tabSize,r=na(o,e),l=Va(r.text,null,s);r.stateAfter&&(r.stateAfter=null);var d,c=r.text.match(/^\s*/)[0];if(i||/\S/.test(r.text)){if("smart"==n&&((d=o.mode.indent(a,r.text.slice(c.length),r.text))==Fa||d>150)){if(!i)return;n="prev"}}else d=0,n="not";"prev"==n?d=e>o.first?Va(na(o,e-1).text,null,s):0:"add"==n?d=l+t.options.indentUnit:"subtract"==n?d=l-t.options.indentUnit:"number"==typeof n&&(d=l+n),d=Math.max(0,d);var u="",h=0;if(t.options.indentWithTabs)for(var p=Math.floor(d/s);p;--p)h+=s,u+="\t";if(h<d&&(u+=qa(d-h)),u!=c)Sn(o,u,dt(e,0),dt(e,c.length),"+input");else for(p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==e&&m.head.ch<c.length){St(o,p,new gt(h=dt(e,c.length),h));break}}r.stateAfter=null}function En(t,e,n,i){var a=e,o=e;return"number"==typeof e?o=na(t,bt(t,e)):a=sa(e),null==a?null:(i(o,a)&&t.cm&&Ae(t.cm,a,n),o)}function Pn(t,e){for(var n=t.doc.sel.ranges,i=[],a=0;a<n.length;a++){for(var o=e(n[a]);i.length&&ct(o.from,Ga(i).to)<=0;){var s=i.pop();if(ct(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}_e(t,(function(){for(var e=i.length-1;e>=0;e--)Sn(t.doc,"",i[e].from,i[e].to,"+delete");Tn(t)}))}function Dn(t,e,n,i,a){var o=e.line,s=e.ch,r=n,l=na(t,o),d=!0;function c(e){var i,r=(a?Uo:$o)(l,s,n,!0);if(null==r){if(e||!((i=o+n)<t.first||i>=t.first+t.size?d=!1:(o=i,l=na(t,i))))return d=!1;s=a?(n<0?Lo:No)(l):n<0?l.text.length:0}else s=r;return!0}if("char"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var u=null,h="group"==i,p=t.cm&&t.cm.getHelper(e,"wordChars"),m=!0;!(n<0)||c(!m);m=!1){var g=l.text.charAt(s)||"\n",f=no(g,p)?"w":h&&"\n"==g?"n":!h||/\s/.test(g)?null:"p";if(!h||m||f||(f="s"),u&&u!=f){n<0&&(n=1,c());break}if(f&&(u=f),n>0&&!c(!m))break}var v=Dt(t,dt(o,s),r,!0);return d||(v.hitSide=!0),v}function Nn(t,e,n,i){var a,o=t.doc,s=e.left;if("page"==i){var r=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);a=e.top+n*(r-(n<0?1.5:.5)*ce(t.display))}else"line"==i&&(a=n>0?e.bottom+3:e.top-3);for(;;){var l=le(t,s,a);if(!l.outside)break;if(n<0?a<=0:a>=o.height){l.hitSide=!0;break}a+=5*n}return l}function Ln(t,e){var n=na(t.doc,e.line).text,i=e.ch,a=e.ch;if(n){var o=t.getHelper(e,"wordChars");(e.xRel<0||a==n.length)&&i?--i:++a;for(var s=n.charAt(i),r=no(s,o)?function(t){return no(t,o)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!no(t)};i>0&&r(n.charAt(i-1));)--i;for(;a<n.length&&r(n.charAt(a));)++a}return new gt(dt(e.line,i),dt(e.line,a))}C.prototype={constructor:C,focus:function(){window.focus(),Ue(this),Le(this)},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,Bn.hasOwnProperty(t)&&Ce(this,Bn[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:ke((function(t,e){var n=t.token?t:C.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:e&&e.opaque}),this.state.modeGen++,Te(this)})),removeOverlay:ke((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void Te(this)}})),indentLine:ke((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),wt(this.doc,t)&&jn(this,t,e,n)})),indentSelection:ke((function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var a=e[i];if(a.empty())a.head.line>n&&(jn(this,a.head.line,t,!0),n=a.head.line,i==this.doc.sel.primIndex&&Tn(this));else{var o=a.from(),s=a.to(),r=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=r;l<n;++l)jn(this,l,t);var d=this.doc.sel.ranges;0==o.ch&&e.length==d.length&&d[i].from().ch>0&&St(this.doc,i,new gt(o,d[i].to()),Oa)}}})),getTokenAt:function(t,e){for(var n=this.doc,i=$t(this,(t=yt(n,t)).line,e),a=this.doc.mode,o=na(n,t.line),s=new Qn(o.text,this.options.tabSize);s.pos<t.ch&&!s.eol();){s.start=s.pos;var r=Di(a,s,i)}return{start:s.start,end:s.pos,string:s.current(),type:r||null,state:i}},getTokenTypeAt:function(t){t=yt(this.doc,t);var e,n=Mi(this,na(this.doc,t.line)),i=0,a=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=i+a>>1;if((s?n[2*s-1]:0)>=o)a=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}i=s+1}}var r=e?e.indexOf("cm-overlay "):-1;return r<0?e:0==r?null:e.slice(0,r-1)},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?C.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!Vn.hasOwnProperty(e))return Vn;var i=Vn[e],a=this.getModeAt(t);if("string"==typeof a[e])i[a[e]]&&n.push(i[a[e]]);else if(a[e])for(var o=0;o<a[e].length;o++){var s=i[a[e][o]];s&&n.push(s)}else a.helperType&&i[a.helperType]?n.push(i[a.helperType]):i[a.name]&&n.push(i[a.name]);for(o=0;o<i._global.length;o++){var r=i._global[o];r.pred(a,this)&&-1==Ka(n,r.val)&&n.push(r.val)}return n},getStateAfter:function(t,e){var n=this.doc;return $t(this,(t=bt(n,null==t?n.first+n.size-1:t))+1,e)},cursorCoords:function(t,e){var n=this.doc.sel.primary();return oe(this,null==t?n.head:"object"==typeof t?yt(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return ae(this,yt(this.doc,t),e||"page")},coordsChar:function(t,e){return le(this,(t=ie(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=ie(this,{top:t,left:0},e||"page").top,ra(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>i&&(t=i,n=!0);var a=na(this.doc,t);return ne(this,a,{top:0,left:0},e||"page").top+(n?this.doc.height-la(a):0)},defaultTextHeight:function(){return ce(this.display)},defaultCharWidth:function(){return ue(this.display)},setGutterMarker:ke((function(t,e,n){return En(this.doc,t,"gutter",(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&io(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:ke((function(t){var e=this,n=e.doc,i=n.first;n.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,Ae(e,i,"gutter"),io(n.gutterMarkers)&&(n.gutterMarkers=null)),++i}))})),addLineWidget:ke((function(t,e,n){return function(t,e,n,i){var a=new xi(t,n,i);return a.noHScroll&&(t.display.alignWidgets=!0),En(t.doc,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==a.insertAt?n.push(a):n.splice(Math.min(n.length-1,Math.max(0,a.insertAt)),0,a),a.line=e,!ki(t.doc,e)){var i=la(e)<t.doc.scrollTop;oa(e,e.height+Ti(a)),i&&In(t,null,a.height),t.curOp.forceUpdate=!0}return!0})),a}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!wt(this.doc,t))return null;var e=t;if(!(t=na(this.doc,t)))return null}else if(null==(e=sa(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,a){var o,s,r,l,d,c,u=this.display,h=(t=oe(this,yt(this.doc,t))).bottom,p=t.left;if(e.style.position="absolute",u.sizer.appendChild(e),"over"==i)h=t.top;else if("above"==i||"near"==i){var m=Math.max(u.wrapper.clientHeight,this.doc.height),g=Math.max(u.sizer.clientWidth,u.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>m)&&t.top>e.offsetHeight?h=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=m&&(h=t.bottom),p+e.offsetWidth>g&&(p=g-e.offsetWidth)}e.style.top=h+"px",e.style.left=e.style.right="","right"==a?(p=u.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==a?p=0:"middle"==a&&(p=(u.sizer.clientWidth-e.offsetWidth)/2),e.style.left=p+"px"),n&&(o=this,s=p,r=h,l=p+e.offsetWidth,d=h+e.offsetHeight,null!=(c=xn(o,s,r,l,d)).scrollTop&&Xe(o,c.scrollTop),null!=c.scrollLeft&&Qe(o,c.scrollLeft))},triggerOnKeyDown:ke(ln),triggerOnKeyPress:ke(cn),triggerOnKeyUp:dn,execCommand:function(t){if(qn.hasOwnProperty(t))return qn[t](this)},findPosH:function(t,e,n,i){var a=1;e<0&&(a=-1,e=-e);for(var o=0,s=yt(this.doc,t);o<e&&!(s=Dn(this.doc,s,a,n,i)).hitSide;++o);return s},moveH:ke((function(t,e){var n=this;n.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Dn(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()}),$a)})),deleteH:ke((function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Pn(this,(function(n){var a=Dn(i,n.head,t,e,!1);return t<0?{from:a,to:n.head}:{from:n.head,to:a}}))})),findPosV:function(t,e,n,i){var a=1,o=i;e<0&&(a=-1,e=-e);for(var s=0,r=yt(this.doc,t);s<e;++s){var l=oe(this,r,"div");if(null==o?o=l.left:l.left=o,(r=Nn(this,l,a,n)).hitSide)break}return r},moveV:ke((function(t,e){var n=this,i=this.doc,a=[],o=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return t<0?s.from():s.to();var r=oe(n,s.head,"div");null!=s.goalColumn&&(r.left=s.goalColumn),a.push(r.left);var l=Nn(n,r,t,e);return"page"==e&&s==i.sel.primary()&&In(n,null,ae(n,l,"div").top-r.top),l}),$a),a.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=a[s]})),toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?mo(this.display.cursorDiv,"CodeMirror-overwrite"):po(this.display.cursorDiv,"CodeMirror-overwrite"),ja(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return uo()==this.display.input},scrollTo:ke((function(t,e){null==t&&null==e||An(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)})),getScrollInfo:function(){var t=this.display.scroller,e=Ra;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:ke((function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:dt(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)An(this),this.curOp.scrollToPos=t;else{var n=xn(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}})),setSize:ke((function(t,e){var n=this;function i(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(n.display.wrapper.style.width=i(t)),null!=e&&(n.display.wrapper.style.height=i(e)),n.options.lineWrapping&&Qt(this);var a=n.display.viewFrom;n.doc.iter(a,n.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Ae(n,a,"widget");break}++a})),n.curOp.forceUpdate=!0,ja(n,"refresh",this)})),operation:function(t){return _e(this,t)},refresh:ke((function(){var t=this.display.cachedTextHeight;Te(this),this.curOp.forceUpdate=!0,Zt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),D(this),(null==t||Math.abs(t-ce(this.display))>.5)&&T(this),ja(this,"refresh",this)})),swapDoc:ke((function(t){var e=this.doc;return e.cm=null,ea(this,t),Zt(this),Oe(this),this.scrollTo(t.scrollLeft,t.scrollTop),Pa(this,"swapDoc",this,e),e})),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ba(C);var Mn=C.defaults={},Bn=C.optionHandlers={};function Rn(t,e,n,i){C.defaults[t]=e,n&&(Bn[t]=i?function(t,e,i){i!=Fn&&n(t,e,i)}:n)}var Fn=C.Init={toString:function(){return"CodeMirror.Init"}};Rn("value","",(function(t,e){t.setValue(e)}),!0),Rn("mode",null,(function(t,e){t.doc.modeOption=e,S(t)}),!0),Rn("indentUnit",2,S,!0),Rn("indentWithTabs",!1),Rn("smartIndent",!0),Rn("tabSize",4,(function(t){x(t),Zt(t),Te(t)}),!0),Rn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,(function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()}),!0),Rn("specialCharPlaceholder",(function(t){var e=ro("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}),(function(t){t.refresh()}),!0),Rn("electricChars",!0),Rn("rtlMoveVisually",!f),Rn("wholeLineUpdateBefore",!0),Rn("theme","default",(function(t){j(t),E(t)}),!0),Rn("keyMap","default",A),Rn("extraKeys",null),Rn("lineWrapping",!1,(function(t){t.options.lineWrapping?(mo(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(po(t.display.wrapper,"CodeMirror-wrap"),L(t)),T(t),Te(t),Zt(t),setTimeout((function(){F(t)}),100)}),!0),Rn("gutters",[],(function(t){M(t.options),E(t)}),!0),Rn("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?V(t.display)+"px":"0",t.refresh()}),!0),Rn("coverGutterNextToScrollbar",!1,F,!0),Rn("lineNumbers",!1,(function(t){M(t.options),E(t)}),!0),Rn("firstLineNumber",1,E,!0),Rn("lineNumberFormatter",(function(t){return t}),E,!0),Rn("showCursorWhenSelecting",!1,Mt,!0),Rn("resetSelectionOnContextMenu",!0),Rn("readOnly",!1,(function(t,e){"nocursor"==e?(hn(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Oe(t))})),Rn("disableInput",!1,(function(t,e){e||Oe(t)}),!0),Rn("dragDrop",!0),Rn("cursorBlinkRate",530),Rn("cursorScrollMargin",0),Rn("cursorHeight",1,Mt,!0),Rn("singleCursorHeightPerLine",!0,Mt,!0),Rn("workTime",100),Rn("workDelay",100),Rn("flattenSpans",!0,x,!0),Rn("addModeClass",!1,x,!0),Rn("pollInterval",100),Rn("undoDepth",200,(function(t,e){t.doc.history.undoDepth=e})),Rn("historyEventDelay",1250),Rn("viewportMargin",10,(function(t){t.refresh()}),!0),Rn("maxHighlightLength",1e4,x,!0),Rn("moveInputWithCursor",!0,(function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)})),Rn("tabindex",null,(function(t,e){t.display.input.tabIndex=e||""})),Rn("autofocus",null);var On=C.modes={},Un=C.mimeModes={};C.defineMode=function(t,e){if(C.defaults.mode||"null"==t||(C.defaults.mode=t),arguments.length>2){e.dependencies=[];for(var n=2;n<arguments.length;++n)e.dependencies.push(arguments[n])}On[t]=e},C.defineMIME=function(t,e){Un[t]=e},C.resolveMode=function(t){if("string"==typeof t&&Un.hasOwnProperty(t))t=Un[t];else if(t&&"string"==typeof t.name&&Un.hasOwnProperty(t.name)){var e=Un[t.name];"string"==typeof e&&(e={name:e}),(t=Xa(e,t)).name=e.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return C.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},C.getMode=function(t,e){e=C.resolveMode(e);var n=On[e.name];if(!n)return C.getMode(t,"text/plain");var i=n(t,e);if($n.hasOwnProperty(e.name)){var a=$n[e.name];for(var o in a)a.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=a[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var o in e.modeProps)i[o]=e.modeProps[o];return i},C.defineMode("null",(function(){return{token:function(t){t.skipToEnd()}}})),C.defineMIME("text/plain","null");var $n=C.modeExtensions={};C.extendMode=function(t,e){Qa(e,$n.hasOwnProperty(t)?$n[t]:$n[t]={})},C.defineExtension=function(t,e){C.prototype[t]=e},C.defineDocExtension=function(t,e){Xi.prototype[t]=e},C.defineOption=Rn;var Hn=[];C.defineInitHook=function(t){Hn.push(t)};var Vn=C.helpers={};C.registerHelper=function(t,e,n){Vn.hasOwnProperty(t)||(Vn[t]=C[t]={_global:[]}),Vn[t][e]=n},C.registerGlobalHelper=function(t,e,n,i){C.registerHelper(t,e,i),Vn[t]._global.push({pred:n,val:i})};var zn=C.copyState=function(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var a=e[i];a instanceof Array&&(a=a.concat([])),n[i]=a}return n},Wn=C.startState=function(t,e,n){return!t.startState||t.startState(e,n)};C.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var qn=C.commands={selectAll:function(t){t.setSelection(dt(t.firstLine(),0),dt(t.lastLine()),Oa)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Oa)},killLine:function(t){Pn(t,(function(e){if(e.empty()){var n=na(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:dt(e.head.line+1,0)}:{from:e.head,to:dt(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){Pn(t,(function(e){return{from:dt(e.from().line,0),to:yt(t.doc,dt(e.to().line+1,0))}}))},delLineLeft:function(t){Pn(t,(function(t){return{from:dt(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){Pn(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){Pn(t,(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}}))},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(dt(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(dt(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy((function(e){return Mo(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy((function(e){return Bo(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy((function(e){return function(t,e){for(var n,i=na(t.doc,e);n=bi(i);)i=n.find(1,!0).line,e=null;var a=da(i),o=a?a[0].level%2?No(i):Lo(i):i.text.length;return dt(null==e?sa(i):e,o)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy((function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),$a)},goLineLeft:function(t){t.extendSelectionsBy((function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),$a)},goLineLeftSmart:function(t){t.extendSelectionsBy((function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?Bo(t,e.head):i}),$a)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,a=0;a<n.length;a++){var o=n[a].from(),s=Va(t.getLine(o.line),o.ch,i);e.push(new Array(i-s%i+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){_e(t,(function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++){var a=e[i].head,o=na(t.doc,a.line).text;if(o)if(a.ch==o.length&&(a=new dt(a.line,a.ch-1)),a.ch>0)a=new dt(a.line,a.ch+1),t.replaceRange(o.charAt(a.ch-1)+o.charAt(a.ch-2),dt(a.line,a.ch-2),a,"+transpose");else if(a.line>t.doc.first){var s=na(t.doc,a.line-1).text;s&&t.replaceRange(o.charAt(0)+"\n"+s.charAt(s.length-1),dt(a.line-1,s.length-1),dt(a.line,1),"+transpose")}n.push(new gt(a,a))}t.setSelections(n)}))},newlineAndIndent:function(t){_e(t,(function(){for(var e=t.listSelections().length,n=0;n<e;n++){var i=t.listSelections()[n];t.replaceRange("\n",i.anchor,i.head,"+input"),t.indentLine(i.from().line+1,null,!0),Tn(t)}}))},toggleOverwrite:function(t){t.toggleOverwrite()}},Gn=C.keyMap={};function Yn(t){return"string"==typeof t?Gn[t]:t}Gn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Gn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Gn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Gn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Gn.default=g?Gn.macDefault:Gn.pcDefault;var Kn=C.lookupKey=function(t,e,n){function i(e){var a=(e=Yn(e))[t];if(!1===a)return"stop";if(null!=a&&n(a))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return i(o);for(var s=0;s<o.length;++s){var r=i(o[s]);if(r)return r}return!1}for(var a=0;a<e.length;++a){var o=i(e[a]);if(o)return"stop"!=o}},Jn=C.isModifierKey=function(t){var e=Eo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Xn=C.keyName=function(t,e){if(l&&34==t.keyCode&&t.char)return!1;var n=Eo[t.keyCode];return null!=n&&!t.altGraphKey&&(t.altKey&&(n="Alt-"+n),(b?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(b?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)};C.fromTextArea=function(t,e){if(e||(e={}),e.value=t.value,!e.tabindex&&t.tabindex&&(e.tabindex=t.tabindex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=uo();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function i(){t.value=r.getValue()}if(t.form&&(Ta(t.form,"submit",i),!e.leaveSubmitMethodAlone)){var a=t.form,o=a.submit;try{var s=a.submit=function(){i(),a.submit=o,a.submit(),a.submit=s}}catch(t){}}t.style.display="none";var r=C((function(e){t.parentNode.insertBefore(e,t.nextSibling)}),e);return r.save=i,r.getTextArea=function(){return t},r.toTextArea=function(){i(),t.parentNode.removeChild(r.getWrapperElement()),t.style.display="",t.form&&(Aa(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=o))},r};var Qn=C.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Qn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else n=e&&(t.test?t.test(e):t(e));if(n)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Va(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Va(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Va(this.string,null,this.tabSize)-(this.lineStart?Va(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var a=function(t){return n?t.toLowerCase():t};if(a(this.string.substr(this.pos,t.length))==a(t))return!1!==e&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var Zn=C.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};Ba(Zn),Zn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&me(t),Ma(this,"clear")){var n=this.find();n&&Pa(this,"clear",n.from,n.to)}for(var i=null,a=null,o=0;o<this.lines.length;++o){var s=this.lines[o],r=si(s.markedSpans,this);t&&!this.collapsed?Ae(t,sa(s),"text"):t&&(null!=r.to&&(a=sa(s)),null!=r.from&&(i=sa(s))),s.markedSpans=ri(s.markedSpans,r),null==r.from&&this.collapsed&&!ki(this.doc,s)&&t&&oa(s,ce(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(o=0;o<this.lines.length;++o){var l=wi(this.lines[o]),d=N(l);d>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=d,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Te(t,i,a+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Et(t.doc)),t&&Pa(t,"markerCleared",t,this),e&&ge(t),this.parent&&this.parent.clear()}},Zn.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var a=0;a<this.lines.length;++a){var o=this.lines[a],s=si(o.markedSpans,this);if(null!=s.from&&(n=dt(e?o:sa(o),s.from),-1==t))return n;if(null!=s.to&&(i=dt(e?o:sa(o),s.to),1==t))return i}return n&&{from:n,to:i}},Zn.prototype.changed=function(){var t=this.find(-1,!0),e=this,n=this.doc.cm;t&&n&&_e(n,(function(){var i=t.line,a=sa(t.line),o=qt(n,a);if(o&&(Xt(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!ki(e.doc,i)&&null!=e.height){var s=e.height;e.height=null;var r=Ti(e)-s;r&&oa(i,i.height+r)}}))},Zn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Ka(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Zn.prototype.detachLine=function(t){if(this.lines.splice(Ka(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var ti=0;function ei(t,e,n,i,a){if(i&&i.shared)return function(t,e,n,i,a){(i=Qa(i)).shared=!1;var o=[ei(t,e,n,i,a)],s=o[0],r=i.widgetNode;return ta(t,(function(t){r&&(i.widgetNode=r.cloneNode(!0)),o.push(ei(t,yt(t,e),yt(t,n),i,a));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=Ga(o)})),new ni(o,s)}(t,e,n,i,a);if(t.cm&&!t.cm.curOp)return Ce(t.cm,ei)(t,e,n,i,a);var o=new Zn(t,a),s=ct(e,n);if(i&&Qa(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ro("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(yi(t,e.line,e,n,o)||e.line!=n.line&&yi(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");_=!0}o.addToHistory&&pa(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var r,l=e.line,d=t.cm;if(t.iter(l,n.line+1,(function(t){d&&o.collapsed&&!d.options.lineWrapping&&wi(t)==d.display.maxLine&&(r=!0),o.collapsed&&l!=e.line&&oa(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new oi(o,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){ki(t,e)&&oa(e,0)})),o.clearOnEnter&&Ta(o,"beforeCursorEnter",(function(){o.clear()})),o.readOnly&&(w=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++ti,o.atomic=!0),d){if(r&&(d.curOp.updateMaxLine=!0),o.collapsed)Te(d,e.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var c=e.line;c<=n.line;c++)Ae(d,c,"text");o.atomic&&Et(d.doc),Pa(d,"markerAdded",d,o)}return o}var ni=C.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function ii(t){return t.findMarks(dt(t.first,0),t.clipPos(dt(t.lastLine())),(function(t){return t.parent}))}function ai(t){for(var e=0;e<t.length;e++){var n=t[e],i=[n.primary.doc];ta(n.primary.doc,(function(t){i.push(t)}));for(var a=0;a<n.markers.length;a++){var o=n.markers[a];-1==Ka(i,o.doc)&&(o.parent=null,n.markers.splice(a--,1))}}}function oi(t,e,n){this.marker=t,this.from=e,this.to=n}function si(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function ri(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function li(t,e){var n=wt(t,e.from.line)&&na(t,e.from.line).markedSpans,i=wt(t,e.to.line)&&na(t,e.to.line).markedSpans;if(!n&&!i)return null;var a=e.from.ch,o=e.to.ch,s=0==ct(e.from,e.to),r=function(t,e,n){if(t)for(var i,a=0;a<t.length;++a){var o=t[a],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var r=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new oi(s,o.from,r?null:o.to))}}return i}(n,a,s),l=function(t,e,n){if(t)for(var i,a=0;a<t.length;++a){var o=t[a],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var r=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new oi(s,r?null:o.from-e,null==o.to?null:o.to-e))}}return i}(i,o,s),d=1==e.text.length,c=Ga(e.text).length+(d?a:0);if(r)for(var u=0;u<r.length;++u)null==(h=r[u]).to&&((p=si(l,h.marker))?d&&(h.to=null==p.to?null:p.to+c):h.to=a);if(l)for(u=0;u<l.length;++u){var h,p;null!=(h=l[u]).to&&(h.to+=c),null==h.from?(p=si(r,h.marker))||(h.from=c,d&&(r||(r=[])).push(h)):(h.from+=c,d&&(r||(r=[])).push(h))}r&&(r=di(r)),l&&l!=r&&(l=di(l));var m=[r];if(!d){var g,f=e.text.length-2;if(f>0&&r)for(u=0;u<r.length;++u)null==r[u].to&&(g||(g=[])).push(new oi(r[u].marker,null,null));for(u=0;u<f;++u)m.push(g);m.push(l)}return m}function di(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function ci(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,a=[];i<e.text.length;++i)a.push(fa(n[i]));return a}(t,e),i=li(t,e);if(!n)return i;if(!i)return n;for(var a=0;a<n.length;++a){var o=n[a],s=i[a];if(o&&s)t:for(var r=0;r<s.length;++r){for(var l=s[r],d=0;d<o.length;++d)if(o[d].marker==l.marker)continue t;o.push(l)}else s&&(n[a]=s)}return n}function ui(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function hi(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function pi(t){return t.inclusiveLeft?-1:0}function mi(t){return t.inclusiveRight?1:0}function gi(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),a=e.find(),o=ct(i.from,a.from)||pi(t)-pi(e);if(o)return-o;var s=ct(i.to,a.to)||mi(t)-mi(e);return s||e.id-t.id}function fi(t,e){var n,i=_&&t.markedSpans;if(i)for(var a,o=0;o<i.length;++o)(a=i[o]).marker.collapsed&&null==(e?a.from:a.to)&&(!n||gi(n,a.marker)<0)&&(n=a.marker);return n}function vi(t){return fi(t,!0)}function bi(t){return fi(t,!1)}function yi(t,e,n,i,a){var o=na(t,e),s=_&&o.markedSpans;if(s)for(var r=0;r<s.length;++r){var l=s[r];if(l.marker.collapsed){var d=l.marker.find(0),c=ct(d.from,n)||pi(l.marker)-pi(a),u=ct(d.to,i)||mi(l.marker)-mi(a);if(!(c>=0&&u<=0||c<=0&&u>=0)&&(c<=0&&(ct(d.to,n)>0||l.marker.inclusiveRight&&a.inclusiveLeft)||c>=0&&(ct(d.from,i)<0||l.marker.inclusiveLeft&&a.inclusiveRight)))return!0}}}function wi(t){for(var e;e=vi(t);)t=e.find(-1,!0).line;return t}function _i(t,e){var n=na(t,e),i=wi(n);return n==i?e:sa(i)}function Ci(t,e){if(e>t.lastLine())return e;var n,i=na(t,e);if(!ki(t,i))return e;for(;n=bi(i);)i=n.find(1,!0).line;return sa(i)+1}function ki(t,e){var n=_&&e.markedSpans;if(n)for(var i,a=0;a<n.length;++a)if((i=n[a]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Si(t,e,i))return!0}}function Si(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return Si(t,i.line,si(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var a,o=0;o<e.markedSpans.length;++o)if((a=e.markedSpans[o]).marker.collapsed&&!a.marker.widgetNode&&a.from==n.to&&(null==a.to||a.to!=n.from)&&(a.marker.inclusiveLeft||n.marker.inclusiveRight)&&Si(t,e,a))return!0}Ba(ni),ni.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();Pa(this,"clear")}},ni.prototype.find=function(t,e){return this.primary.find(t,e)};var xi=C.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};function Ii(t,e,n){la(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&In(t,null,n)}function Ti(t){if(null!=t.height)return t.height;if(!function(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),co(t.cm.display.measure,ro("div",[t.node],null,e))}return t.height=t.node.offsetHeight}Ba(xi),xi.prototype.clear=function(){var t=this.cm,e=this.line.widgets,n=this.line,i=sa(n);if(null!=i&&e){for(var a=0;a<e.length;++a)e[a]==this&&e.splice(a--,1);e.length||(n.widgets=null);var o=Ti(this);_e(t,(function(){Ii(t,n,-o),Ae(t,i,"widget"),oa(n,Math.max(0,n.height-o))}))}},xi.prototype.changed=function(){var t=this.height,e=this.cm,n=this.line;this.height=null;var i=Ti(this)-t;i&&_e(e,(function(){e.curOp.forceUpdate=!0,Ii(e,n,i),oa(n,n.height+i)}))};var Ai=C.Line=function(t,e,n){this.text=t,hi(this,e),this.height=n?n(this):1};function ji(t){t.parent=null,ui(t)}function Ei(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function Pi(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=C.innerMode(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Di(t,e,n){for(var i=0;i<10;i++){var a=t.token(e,n);if(e.pos>e.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}function Ni(t,e,n,i,a,o,s){var r=n.flattenSpans;null==r&&(r=t.options.flattenSpans);var l,d=0,c=null,u=new Qn(e,t.options.tabSize);for(""==e&&Ei(Pi(n,i),o);!u.eol();){if(u.pos>t.options.maxHighlightLength?(r=!1,s&&Bi(t,e,i,u.pos),u.pos=e.length,l=null):l=Ei(Di(n,u,i),o),t.options.addModeClass){var h=C.innerMode(n,i).mode.name;h&&(l="m-"+(l?h+" "+l:h))}r&&c==l||(d<u.start&&a(u.start,c),d=u.start,c=l),u.start=u.pos}for(;d<u.pos;){var p=Math.min(u.pos,d+5e4);a(p,c),d=p}}function Li(t,e,n,i){var a=[t.state.modeGen],o={};Ni(t,e.text,t.doc.mode,n,(function(t,e){a.push(t,e)}),o,i);for(var s=0;s<t.state.overlays.length;++s){var r=t.state.overlays[s],l=1,d=0;Ni(t,e.text,r.mode,!0,(function(t,e){for(var n=l;d<t;){var i=a[l];i>t&&a.splice(l,1,t,a[l+1],i),l+=2,d=Math.min(t,i)}if(e)if(r.opaque)a.splice(n,l-n,t,"cm-overlay "+e),l=n+2;else for(;n<l;n+=2){var o=a[n+1];a[n+1]=(o?o+" ":"")+"cm-overlay "+e}}),o)}return{styles:a,classes:o.bgClass||o.textClass?o:null}}function Mi(t,e){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=Li(t,e,e.stateAfter=$t(t,sa(e)));e.styles=n.styles,n.classes?e.styleClasses=n.classes:e.styleClasses&&(e.styleClasses=null)}return e.styles}function Bi(t,e,n,i){var a=t.doc.mode,o=new Qn(e,t.options.tabSize);for(o.start=o.pos=i||0,""==e&&Pi(a,n);!o.eol()&&o.pos<=t.options.maxHighlightLength;)Di(a,o,n),o.start=o.pos}Ba(Ai),Ai.prototype.lineNo=function(){return sa(this)};var Ri={},Fi={};function Oi(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Fi:Ri;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ui(t,e){var n=ro("span",null,null,o?"padding-right: .1px":null),a={pre:ro("pre",[n]),content:n,col:0,pos:0,cm:t};e.measure={};for(var s=0;s<=(e.rest?e.rest.length:0);s++){var r,l=s?e.rest[s-1]:e.line;a.pos=0,a.addToken=$i,(i||o)&&t.getOption("lineWrapping")&&(a.addToken=Hi(a.addToken)),ko(t.display.measure)&&(r=da(l))&&(a.addToken=Vi(a.addToken,r)),a.map=[],Wi(l,a,Mi(t,l)),l.styleClasses&&(l.styleClasses.bgClass&&(a.bgClass=go(l.styleClasses.bgClass,a.bgClass||"")),l.styleClasses.textClass&&(a.textClass=go(l.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(Co(t.display.measure))),0==s?(e.measure.map=a.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(a.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return ja(t,"renderLine",t,e.line,a.pre),a.pre.className&&(a.textClass=go(a.pre.className,a.textClass||"")),a}function $i(t,e,n,o,s,r){if(e){var l=t.cm.options.specialChars,d=!1;if(l.test(e)){f=document.createDocumentFragment();for(var c=0;;){l.lastIndex=c;var u=l.exec(e),h=u?u.index-c:e.length-c;if(h){var p=document.createTextNode(e.slice(c,c+h));i&&a<9?f.appendChild(ro("span",[p])):f.appendChild(p),t.map.push(t.pos,t.pos+h,p),t.col+=h,t.pos+=h}if(!u)break;if(c+=h+1,"\t"==u[0]){var m=t.cm.options.tabSize,g=m-t.col%m;p=f.appendChild(ro("span",qa(g),"cm-tab")),t.col+=g}else p=t.cm.options.specialCharPlaceholder(u[0]),i&&a<9?f.appendChild(ro("span",[p])):f.appendChild(p),t.col+=1;t.map.push(t.pos,t.pos+1,p),t.pos++}}else{t.col+=e.length;var f=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,f),i&&a<9&&(d=!0),t.pos+=e.length}if(n||o||s||d){var v=n||"";o&&(v+=o),s&&(v+=s);var b=ro("span",[f],v);return r&&(b.title=r),t.content.appendChild(b)}t.content.appendChild(f)}}function Hi(t){function e(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":" ";return e+=" "}return function(n,i,a,o,s,r){t(n,i.replace(/ {3,}/g,e),a,o,s,r)}}function Vi(t,e){return function(n,i,a,o,s,r){a=a?a+" cm-force-border":"cm-force-border";for(var l=n.pos,d=l+i.length;;){for(var c=0;c<e.length;c++){var u=e[c];if(u.to>l&&u.from<=l)break}if(u.to>=d)return t(n,i,a,o,s,r);t(n,i.slice(0,u.to-l),a,o,null,r),o=null,i=i.slice(u.to-l),l=u.to}}}function zi(t,e,n,i){var a=!i&&n.widgetNode;a&&(t.map.push(t.pos,t.pos+e,a),t.content.appendChild(a)),t.pos+=e}function Wi(t,e,n){var i=t.markedSpans,a=t.text,o=0;if(i)for(var s,r,l,d,c,u,h=a.length,p=0,m=(k=1,""),g=0;;){if(g==p){r=l=d=c="",u=null,g=1/0;for(var f=[],v=0;v<i.length;++v){var b=i[v],y=b.marker;b.from<=p&&(null==b.to||b.to>p)?(null!=b.to&&g>b.to&&(g=b.to,l=""),y.className&&(r+=" "+y.className),y.startStyle&&b.from==p&&(d+=" "+y.startStyle),y.endStyle&&b.to==g&&(l+=" "+y.endStyle),y.title&&!c&&(c=y.title),y.collapsed&&(!u||gi(u.marker,y)<0)&&(u=b)):b.from>p&&g>b.from&&(g=b.from),"bookmark"==y.type&&b.from==p&&y.widgetNode&&f.push(y)}if(u&&(u.from||0)==p&&(zi(e,(null==u.to?h+1:u.to)-p,u.marker,null==u.from),null==u.to))return;if(!u&&f.length)for(v=0;v<f.length;++v)zi(e,0,f[v])}if(p>=h)break;for(var w=Math.min(h,g);;){if(m){var _=p+m.length;if(!u){var C=_>w?m.slice(0,w-p):m;e.addToken(e,C,s?s+r:r,d,p+C.length==g?l:"",c)}if(_>=w){m=m.slice(w-p),p=w;break}p=_,d=""}m=a.slice(o,o=n[k++]),s=Oi(n[k++],e.cm.options)}}else for(var k=1;k<n.length;k+=2)e.addToken(e,a.slice(o,o=n[k]),Oi(n[k+1],e.cm.options))}function qi(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Ga(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Gi(t,e,n,i){function a(t){return n?n[t]:null}function o(t,n,a){!function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),ui(t),hi(t,n);var a=i?i(t):1;a!=t.height&&oa(t,a)}(t,n,a,i),Pa(t,"change",t,e)}var s=e.from,r=e.to,l=e.text,d=na(t,s.line),c=na(t,r.line),u=Ga(l),h=a(l.length-1),p=r.line-s.line;if(qi(t,e)){for(var m=0,g=[];m<l.length-1;++m)g.push(new Ai(l[m],a(m),i));o(c,c.text,h),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(d==c)if(1==l.length)o(d,d.text.slice(0,s.ch)+u+d.text.slice(r.ch),h);else{for(g=[],m=1;m<l.length-1;++m)g.push(new Ai(l[m],a(m),i));g.push(new Ai(u+d.text.slice(r.ch),h,i)),o(d,d.text.slice(0,s.ch)+l[0],a(0)),t.insert(s.line+1,g)}else if(1==l.length)o(d,d.text.slice(0,s.ch)+l[0]+c.text.slice(r.ch),a(0)),t.remove(s.line+1,p);else{for(o(d,d.text.slice(0,s.ch)+l[0],a(0)),o(c,u+c.text.slice(r.ch),h),m=1,g=[];m<l.length-1;++m)g.push(new Ai(l[m],a(m),i));p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,g)}Pa(t,"change",t,e)}function Yi(t){this.lines=t,this.parent=null;for(var e=0,n=0;e<t.length;++e)t[e].parent=this,n+=t[e].height;this.height=n}function Ki(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var a=t[i];e+=a.chunkSize(),n+=a.height,a.parent=this}this.size=e,this.height=n,this.parent=null}Yi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var a=this.lines[n];this.height-=a.height,ji(a),Pa(a,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},Ki.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],a=i.chunkSize();if(t<a){var o=Math.min(e,a-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,a==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=a}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Yi))){var r=[];this.collapse(r),this.children=[new Yi(r)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var a=this.children[i],o=a.chunkSize();if(t<=o){if(a.insertInner(t,e,n),a.lines&&a.lines.length>50){for(;a.lines.length>50;){var s=new Yi(a.lines.splice(a.lines.length-25,25));a.height-=s.height,this.children.splice(i+1,0,s),s.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new Ki(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=Ka(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new Ki(t.children);i.parent=t,t.children=[i,e],t=i}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var a=this.children[i],o=a.chunkSize();if(t<o){var s=Math.min(e,o-t);if(a.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var Ji=0,Xi=C.Doc=function(t,e,n){if(!(this instanceof Xi))return new Xi(t,e,n);null==n&&(n=0),Ki.call(this,[new Yi([new Ai("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=dt(n,0);this.sel=vt(i),this.history=new ca(null),this.id=++Ji,this.modeOption=e,"string"==typeof t&&(t=Io(t)),Gi(this,{from:i,to:i,text:t}),Tt(this,vt(i),Oa)};Xi.prototype=Xa(Ki.prototype,{constructor:Xi,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=aa(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:Se((function(t){var e=dt(this.first,0),n=this.first+this.size-1;yn(this,{from:e,to:dt(n,na(this,n).text.length),text:Io(t),origin:"setValue"},!0),Tt(this,vt(e))})),replaceRange:function(t,e,n,i){Sn(this,t,e=yt(this,e),n=n?yt(this,n):e,i)},getRange:function(t,e,n){var i=ia(this,yt(this,t),yt(this,e));return!1===n?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(wt(this,t))return na(this,t)},getLineNumber:function(t){return sa(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=na(this,t)),wi(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return yt(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Se((function(t,e,n){xt(this,yt(this,"number"==typeof t?dt(t,e||0):t),null,n)})),setSelection:Se((function(t,e,n){xt(this,yt(this,t),yt(this,e||t),n)})),extendSelection:Se((function(t,e,n){Ct(this,yt(this,t),e&&yt(this,e),n)})),extendSelections:Se((function(t,e){kt(this,function(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=yt(t,e[i]);return n}(this,t))})),extendSelectionsBy:Se((function(t,e){kt(this,Ja(this.sel.ranges,t),e)})),setSelections:Se((function(t,e,n){if(t.length){for(var i=0,a=[];i<t.length;i++)a[i]=new gt(yt(this,t[i].anchor),yt(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Tt(this,ft(a,e),n)}})),addSelection:Se((function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new gt(yt(this,t),yt(this,e||t))),Tt(this,ft(i,i.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var a=ia(this,n[i].from(),n[i].to());e=e?e.concat(a):a}return!1===t?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var a=ia(this,n[i].from(),n[i].to());!1!==t&&(a=a.join(t||"\n")),e[i]=a}return e},replaceSelection:function(t,e,n){for(var i=[],a=0;a<this.sel.ranges.length;a++)i[a]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:Se((function(t,e,n){for(var i=[],a=this.sel,o=0;o<a.ranges.length;o++){var s=a.ranges[o];i[o]={from:s.from(),to:s.to(),text:Io(t[o]),origin:n}}var r=e&&"end"!=e&&function(t,e,n){for(var i=[],a=dt(t.first,0),o=a,s=0;s<e.length;s++){var r=e[s],l=vn(r.from,a,o),d=vn(mn(r),a,o);if(a=r.to,o=d,"around"==n){var c=t.sel.ranges[s],u=ct(c.head,c.anchor)<0;i[s]=new gt(u?d:l,u?l:d)}else i[s]=new gt(l,l)}return new mt(i,t.sel.primIndex)}(this,i,e);for(o=i.length-1;o>=0;o--)yn(this,i[o]);r?It(this,r):this.cm&&Tn(this.cm)})),undo:Se((function(){_n(this,"undo")})),redo:Se((function(){_n(this,"redo")})),undoSelection:Se((function(){_n(this,"undo",!0)})),redoSelection:Se((function(){_n(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new ca(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:va(this.history.done),undone:va(this.history.undone)}},setHistory:function(t){var e=this.history=new ca(this.history.maxGeneration);e.done=va(t.done.slice(0),null,!0),e.undone=va(t.undone.slice(0),null,!0)},addLineClass:Se((function(t,e,n){return En(this,t,"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[i]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0}))})),removeLineClass:Se((function(t,e,n){return En(this,t,"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",a=t[i];if(!a)return!1;if(null==n)t[i]=null;else{var o=a.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var s=o.index+o[0].length;t[i]=a.slice(0,o.index)+(o.index&&s!=a.length?" ":"")+a.slice(s)||null}return!0}))})),markText:function(t,e,n){return ei(this,yt(this,t),yt(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return ei(this,t=yt(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=na(this,(t=yt(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var a=n[i];(null==a.from||a.from<=t.ch)&&(null==a.to||a.to>=t.ch)&&e.push(a.marker.parent||a.marker)}return e},findMarks:function(t,e,n){t=yt(this,t),e=yt(this,e);var i=[],a=t.line;return this.iter(t.line,e.line+1,(function(o){var s=o.markedSpans;if(s)for(var r=0;r<s.length;r++){var l=s[r];a==t.line&&t.ch>l.to||null==l.from&&a!=t.line||a==e.line&&l.from>e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++a})),i},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)})),t},posFromIndex:function(t){var e,n=this.first;return this.iter((function(i){var a=i.text.length+1;if(a>t)return e=t,!0;t-=a,++n})),yt(this,dt(n,e))},indexFromPos:function(t){var e=(t=yt(this,t)).ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,(function(t){e+=t.text.length+1})),e)},copy:function(t){var e=new Xi(aa(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Xi(aa(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n],a=i.find(),o=t.clipPos(a.from),s=t.clipPos(a.to);if(ct(o,s)){var r=ei(t,o,s,i.primary,i.primary.type);i.markers.push(r),r.parent=i}}}(i,ii(this)),i},unlinkDoc:function(t){if(t instanceof C&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),ai(ii(this));break}if(t.history==this.history){var n=[t.id];ta(t,(function(t){n.push(t.id)}),!0),t.history=new ca(null),t.history.done=va(this.history.done,n),t.history.undone=va(this.history.undone,n)}},iterLinkedDocs:function(t){ta(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Xi.prototype.eachLine=Xi.prototype.iter;var Qi="iter insert remove copy getEditor".split(" ");for(var Zi in Xi.prototype)Xi.prototype.hasOwnProperty(Zi)&&Ka(Qi,Zi)<0&&(C.prototype[Zi]=function(t){return function(){return t.apply(this.doc,arguments)}}(Xi.prototype[Zi]));function ta(t,e,n){!function t(i,a,o){if(i.linked)for(var s=0;s<i.linked.length;++s){var r=i.linked[s];if(r.doc!=a){var l=o&&r.sharedHist;n&&!l||(e(r.doc,l),t(r.doc,i,l))}}}(t,null,!0)}function ea(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,T(t),S(t),t.options.lineWrapping||L(t),t.options.mode=e.modeOption,Te(t)}function na(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var a=n.children[i],o=a.chunkSize();if(e<o){n=a;break}e-=o}return n.lines[e]}function ia(t,e,n){var i=[],a=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;a==n.line&&(o=o.slice(0,n.ch)),a==e.line&&(o=o.slice(e.ch)),i.push(o),++a})),i}function aa(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function oa(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function sa(t){if(null==t.parent)return null;for(var e=t.parent,n=Ka(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var a=0;i.children[a]!=e;++a)n+=i.children[a].chunkSize();return n+e.first}function ra(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var a=t.children[i],o=a.height;if(e<o){t=a;continue t}e-=o,n+=a.chunkSize()}return n}while(!t.lines);for(i=0;i<t.lines.length;++i){var s=t.lines[i].height;if(e<s)break;e-=s}return n+i}function la(t){for(var e=0,n=(t=wi(t)).parent,i=0;i<n.lines.length;++i){var a=n.lines[i];if(a==t)break;e+=a.height}for(var o=n.parent;o;o=(n=o).parent)for(i=0;i<o.children.length;++i){var s=o.children[i];if(s==n)break;e+=s.height}return e}function da(t){var e=t.order;return null==e&&(e=t.order=Ho(t.text)),e}function ca(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function ua(t,e){var n={from:ut(e.from),to:mn(e),text:ia(t,e.from,e.to)};return ga(t,n,e.from.line,e.to.line+1),ta(t,(function(t){ga(t,n,e.from.line,e.to.line+1)}),!0),n}function ha(t){for(;t.length&&Ga(t).ranges;)t.pop()}function pa(t,e,n,i){var a=t.history;a.undone.length=0;var o,s=+new Date;if((a.lastOp==i||a.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&a.lastModTime>s-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(ha(t.done),Ga(t.done)):t.done.length&&!Ga(t.done).ranges?Ga(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Ga(t.done)):void 0}(a,a.lastOp==i))){var r=Ga(o.changes);0==ct(e.from,e.to)&&0==ct(e.from,r.to)?r.to=mn(e):o.changes.push(ua(t,e))}else{var l=Ga(a.done);for(l&&l.ranges||ma(t.sel,a.done),o={changes:[ua(t,e)],generation:a.generation},a.done.push(o);a.done.length>a.undoDepth;)a.done.shift(),a.done[0].ranges||a.done.shift()}a.done.push(n),a.generation=++a.maxGeneration,a.lastModTime=a.lastSelTime=s,a.lastOp=a.lastSelOp=i,a.lastOrigin=a.lastSelOrigin=e.origin,r||ja(t,"historyAdded")}function ma(t,e){var n=Ga(e);n&&n.ranges&&n.equals(t)||e.push(t)}function ga(t,e,n,i){var a=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((a||(a=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function fa(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function va(t,e,n){for(var i=0,a=[];i<t.length;++i){var o=t[i];if(o.ranges)a.push(n?mt.prototype.deepCopy.call(o):o);else{var s=o.changes,r=[];a.push({changes:r});for(var l=0;l<s.length;++l){var d,c=s[l];if(r.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(d=u.match(/^spans_(\d+)$/))&&Ka(e,Number(d[1]))>-1&&(Ga(r)[u]=c[u],delete c[u])}}}return a}function ba(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function ya(t,e,n,i){for(var a=0;a<t.length;++a){var o=t[a],s=!0;if(o.ranges){o.copied||((o=t[a]=o.deepCopy()).copied=!0);for(var r=0;r<o.ranges.length;r++)ba(o.ranges[r].anchor,e,n,i),ba(o.ranges[r].head,e,n,i)}else{for(r=0;r<o.changes.length;++r){var l=o.changes[r];if(n<l.from.line)l.from=dt(l.from.line+i,l.from.ch),l.to=dt(l.to.line+i,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,a+1),a=0)}}}function wa(t,e){var n=e.from.line,i=e.to.line,a=e.text.length-(i-n)-1;ya(t.done,n,i,a),ya(t.undone,n,i,a)}Ba(Xi);var _a=C.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},Ca=C.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0};function ka(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}var Sa=C.e_stop=function(t){_a(t),Ca(t)};function xa(t){return t.target||t.srcElement}function Ia(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),g&&t.ctrlKey&&1==e&&(e=3),e}var Ta=C.on=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});(i[e]||(i[e]=[])).push(n)}},Aa=C.off=function(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var a=0;a<i.length;++a)if(i[a]==n){i.splice(a,1);break}}},ja=C.signal=function(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),a=0;a<n.length;++a)n[a].apply(null,i)},Ea=null;function Pa(t,e){var n=t._handlers&&t._handlers[e];if(n){var i,a=Array.prototype.slice.call(arguments,2);he?i=he.delayedCallbacks:Ea?i=Ea:(i=Ea=[],setTimeout(Da,0));for(var o=0;o<n.length;++o)i.push(s(n[o]))}function s(t){return function(){t.apply(null,a)}}}function Da(){var t=Ea;Ea=null;for(var e=0;e<t.length;++e)t[e]()}function Na(t,e,n){return ja(t,n||e.type,t,e),ka(e)||e.codemirrorIgnore}function La(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==Ka(n,e[i])&&n.push(e[i])}function Ma(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function Ba(t){t.prototype.on=function(t,e){Ta(this,t,e)},t.prototype.off=function(t,e){Aa(this,t,e)}}var Ra=30,Fa=C.Pass={toString:function(){return"CodeMirror.Pass"}},Oa={scroll:!1},Ua={origin:"*mouse"},$a={origin:"+move"};function Ha(){this.id=null}Ha.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var Va=C.countColumn=function(t,e,n,i,a){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,s=a||0;;){var r=t.indexOf("\t",o);if(r<0||r>=e)return s+(e-o);s+=r-o,s+=n-s%n,o=r+1}};function za(t,e,n){for(var i=0,a=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var s=o-i;if(o==t.length||a+s>=e)return i+Math.min(s,e-a);if(a+=o-i,i=o+1,(a+=n-a%n)>=e)return i}}var Wa=[""];function qa(t){for(;Wa.length<=t;)Wa.push(Ga(Wa)+" ");return Wa[t]}function Ga(t){return t[t.length-1]}var Ya=function(t){t.select()};function Ka(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function Ja(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function Xa(t,e){var n;if(Object.create)n=Object.create(t);else{var i=function(){};i.prototype=t,n=new i}return e&&Qa(e,n),n}function Qa(t,e,n){for(var i in e||(e={}),t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function Za(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}p?Ya=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:i&&(Ya=function(t){try{t.select()}catch(t){}}),[].indexOf&&(Ka=function(t,e){return t.indexOf(e)}),[].map&&(Ja=function(t,e){return t.map(e)});var to=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,eo=C.isWordChar=function(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||to.test(t))};function no(t,e){return e?!!(e.source.indexOf("\\w")>-1&&eo(t))||e.test(t):eo(t)}function io(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var ao,oo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function so(t){return t.charCodeAt(0)>=768&&oo.test(t)}function ro(t,e,n,i){var a=document.createElement(t);if(n&&(a.className=n),i&&(a.style.cssText=i),"string"==typeof e)a.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)a.appendChild(e[o]);return a}function lo(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function co(t,e){return lo(t).appendChild(e)}function uo(){return document.activeElement}function ho(t){return new RegExp("\\b"+t+"\\b\\s*")}function po(t,e){var n=ho(e);n.test(t.className)&&(t.className=t.className.replace(n,""))}function mo(t,e){ho(e).test(t.className)||(t.className+=" "+e)}function go(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!ho(n[i]).test(e)&&(e+=" "+n[i]);return e}function fo(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&t(i)}}ao=document.createRange?function(t,e,n){var i=document.createRange();return i.setEnd(t,n),i.setStart(t,e),i}:function(t,e,n){var i=document.body.createTextRange();return i.moveToElementText(t.parentNode),i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i},i&&a<11&&(uo=function(){try{return document.activeElement}catch(t){return document.body}});var vo,bo,yo,wo=!1,_o=function(){if(i&&a<9)return!1;var t=ro("div");return"draggable"in t||"dragDrop"in t}();function Co(t){if(null==bo){var e=ro("span","​");co(t,ro("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(bo=e.offsetWidth<=1&&e.offsetHeight>2&&!(i&&a<8))}return bo?ro("span","​"):ro("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ko(t){if(null!=yo)return yo;var e=co(t,document.createTextNode("AخA")),n=ao(e,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var i=ao(e,1,2).getBoundingClientRect();return yo=i.right-n.right<3}var So,xo,Io=C.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var a=t.indexOf("\n",e);-1==a&&(a=t.length);var o=t.slice(e,"\r"==t.charAt(a-1)?a-1:a),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=a+1)}return n}:function(t){return t.split(/\r\n?|\n/)},To=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ao="oncopy"in(So=ro("div"))||(So.setAttribute("oncopy","return;"),"function"==typeof So.oncopy),jo=null,Eo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function Po(t){return t.level%2?t.to:t.from}function Do(t){return t.level%2?t.from:t.to}function No(t){var e=da(t);return e?Po(e[0]):0}function Lo(t){var e=da(t);return e?Do(Ga(e)):t.text.length}function Mo(t,e){var n=na(t.doc,e),i=wi(n);i!=n&&(e=sa(i));var a=da(i),o=a?a[0].level%2?Lo(i):No(i):0;return dt(e,o)}function Bo(t,e){var n=Mo(t,e.line),i=na(t.doc,n.line),a=da(i);if(!a||0==a[0].level){var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return dt(n.line,s?0:o)}return n}function Ro(t,e,n){var i=t[0].level;return e==i||n!=i&&e<n}function Fo(t,e){xo=null;for(var n,i=0;i<t.length;++i){var a=t[i];if(a.from<e&&a.to>e)return i;if(a.from==e||a.to==e){if(null!=n)return Ro(t,a.level,t[n].level)?(a.from!=a.to&&(xo=n),i):(a.from!=a.to&&(xo=i),n);n=i}}return n}function Oo(t,e,n,i){if(!i)return e+n;do{e+=n}while(e>0&&so(t.text.charAt(e)));return e}function Uo(t,e,n,i){var a=da(t);if(!a)return $o(t,e,n,i);for(var o=Fo(a,e),s=a[o],r=Oo(t,e,s.level%2?-n:n,i);;){if(r>s.from&&r<s.to)return r;if(r==s.from||r==s.to)return Fo(a,r)==o?r:n>0==(s=a[o+=n]).level%2?s.to:s.from;if(!(s=a[o+=n]))return null;r=n>0==s.level%2?Oo(t,s.to,-1,i):Oo(t,s.from,1,i)}}function $o(t,e,n,i){var a=e+n;if(i)for(;a>0&&so(t.text.charAt(a));)a+=n;return a<0||a>t.text.length?null:a}C.keyNames=Eo,function(){for(var t=0;t<10;t++)Eo[t+48]=Eo[t+96]=String(t);for(t=65;t<=90;t++)Eo[t]=String.fromCharCode(t);for(t=1;t<=12;t++)Eo[t+111]=Eo[t+63235]="F"+t}();var Ho=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,a=/[1n]/;function o(t,e,n){this.level=t,this.from=e,this.to=n}return function(s){if(!t.test(s))return!1;for(var r,l=s.length,d=[],c=0;c<l;++c)d.push(f=(r=s.charCodeAt(c))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1773?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L");c=0;for(var u="L";c<l;++c)"m"==(f=d[c])?d[c]=u:u=f;c=0;for(var h="L";c<l;++c)"1"==(f=d[c])&&"r"==h?d[c]="n":n.test(f)&&(h=f,"r"==f&&(d[c]="R"));for(c=1,u=d[0];c<l-1;++c)"+"==(f=d[c])&&"1"==u&&"1"==d[c+1]?d[c]="1":","!=f||u!=d[c+1]||"1"!=u&&"n"!=u||(d[c]=u),u=f;for(c=0;c<l;++c)if(","==(f=d[c]))d[c]="N";else if("%"==f){for(var p=c+1;p<l&&"%"==d[p];++p);for(var m=c&&"!"==d[c-1]||p<l&&"1"==d[p]?"1":"N",g=c;g<p;++g)d[g]=m;c=p-1}for(c=0,h="L";c<l;++c){var f=d[c];"L"==h&&"1"==f?d[c]="L":n.test(f)&&(h=f)}for(c=0;c<l;++c)if(e.test(d[c])){for(p=c+1;p<l&&e.test(d[p]);++p);var v="L"==(c?d[c-1]:"L"),b="L"==(p<l?d[p]:"L");for(m=v||b?"L":"R",g=c;g<p;++g)d[g]=m;c=p-1}var y,w=[];for(c=0;c<l;)if(i.test(d[c])){var _=c;for(++c;c<l&&i.test(d[c]);++c);w.push(new o(0,_,c))}else{var C=c,k=w.length;for(++c;c<l&&"L"!=d[c];++c);for(g=C;g<c;)if(a.test(d[g])){C<g&&w.splice(k,0,new o(1,C,g));var S=g;for(++g;g<c&&a.test(d[g]);++g);w.splice(k,0,new o(2,S,g)),C=g}else++g;C<c&&w.splice(k,0,new o(1,C,c))}return 1==w[0].level&&(y=s.match(/^\s+/))&&(w[0].from=y[0].length,w.unshift(new o(0,0,y[0].length))),1==Ga(w).level&&(y=s.match(/\s+$/))&&(Ga(w).to-=y[0].length,w.push(new o(0,l-y[0].length,l))),w[0].level!=Ga(w).level&&w.push(new o(w[0].level,l,l)),w}}();return C.version="4.5.0",C}()},function(t,e,n){var i,a;i=[n(0),n(19),n(21),n(16),n(302),n(595),n(24),n(1318),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t([s],{templateString:r,img:{path:"/images/brand_assets/illos/art-other-first-purchase.png",alt:"Illustration of caped woman leaping over mountain"},body:{title:"Upgrade your account to unlock new features",copy:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},cta:{innerText:"Upgrade Now",className:"p0"},isDismissable:!1,dismissConfig:{onDismissPressCallback:null,innerText:"Dismiss"},disableRefreshForEditorUpgrade:!1,topicName:null,onCtaPressCallback:null,variantClass:null,gaTrackingCategory:null,gaTrackingAction:null,gaTrackingLabelProps:null,onComplete:void 0,postMixInProperties:function(){this._validateProps()},postCreate:function(){this.button=new o({buttonText:this.cta.innerText,disableRefreshForEditorUpgrade:this.disableRefreshForEditorUpgrade,gaTracking:{action:this.gaTrackingAction,category:this.gaTrackingCategory,label:this.gaTrackingLabelProps},fixedGATrackingCallback:this.fixedGATrackingCallback,redirect:this.redirect,featureName:this.featureName,featureContext:this.featureContext,onComplete:this.onComplete}),this.button.placeAt(this.upgradeButtonContainer),this.button.startup()},toggleCtaLoadingState:function(){this._isButtonDisabled()?(this.node_button.classList.remove("button-loading"),this.node_button.removeAttribute("disabled")):(this.node_button.classList.add("button-loading"),this.node_button.setAttribute("disabled","disabled"))},_onButtonPress:function(){this.toggleCtaLoadingState(),this.gaTrackingCategory&&this.gaTrackingAction&&this.gaTrackingLabelProps&&window.ga("send","event",this.gaTrackingCategory,this.gaTrackingAction,JSON.stringify(this.gaTrackingLabelProps)),this.onCtaPressCallback&&"function"==typeof this.onCtaPressCallback&&this.onCtaPressCallback(),this.topicName&&e.publish(this.topicName,{pressed:!0})},_onDismissPress:function(t){t.preventDefault(),this._animateAndHide()},_animateAndHide:function(){l(this.domNode,"fadeOut",{easing:"easeInOut",duration:200,complete:function(){this.dismissConfig.onDismissPressCallback&&this.dismissConfig.onDismissPressCallback()}.bind(this)})},_isButtonDisabled:function(){return this.node_button.classList.contains("button-loading")&&"disabled"===this.node_button.getAttribute("disabled")},_validateProps:function(){this._validateImgProps(),this._validateBodyProps(),this._validateCtaProps(),this._validateCallback(),this._validateDismiss()},_validateImgProps:function(){if(!this.img)throw new Error("this.img is invalid. UpgradeActionBlock requires an img Object.");if("path"in this.img==!1)throw new Error("this.img is invalid. The UpgradeActionBlock img Object requires a path key to be set.");if("alt"in this.img==!1)throw new Error("this.img is invalid. The UpgradeActionBlock img Object requires an alt key to be set.");if("string"!=typeof this.img.path)throw new Error("this.img.path is invalid. UpgradeActionBlock was expecting a String.");if("string"!=typeof this.img.alt)throw new Error("this.img.alt is invalid. UpgradeActionBlock was expecting a String.");if(this.img.path.length<1)throw new Error("this.img.path is invalid. UpgradeActionBlock was expecting a relative or fully qualified URL");if(this.img.alt.length<1)throw new Error("this.img.alt is invalid. UpgradeActionBlock was expecting a descriptive alt text for the image.")},_validateBodyProps:function(){if(!this.body)throw new Error("this.body is invalid. UpgradeActionBlock requires a body with the type of a string.");if("title"in this.body==!1)throw new Error("this.body is invalid. The UpgradeActionBlock body Object requires a title key to be set.");if("copy"in this.body==!1)throw new Error("this.body is invalid. The UpgradeActionBlock body Object requires an copy key to be set.");if("string"!=typeof this.body.title)throw new Error("this.body.title is invalid. UpgradeActionBlock was expecting a String.");if("string"!=typeof this.body.copy)throw new Error("this.body.copy is invalid. UpgradeActionBlock was expecting a String.");this.body.copy.length>270&&n.avestaEnvironment&&"dev"===n.avestaEnvironment&&console.warn("Warning: UpgradeActionBlock this.body.copy exceeds recommended string length of 270 characters")},_validateCtaProps:function(){var t=["","p0","p1"];if(!this.cta)throw new Error("this.cta is invalid. UpgradeActionBlock requires an cta Object.");if("innerText"in this.cta==!1)throw new Error("this.cta is invalid. The UpgradeActionBlock cta Object requires a innerText key to be set.");if("className"in this.cta==!1)throw new Error("this.cta is invalid. The UpgradeActionBlock cta Object requires an className key to be set.");if("string"!=typeof this.cta.innerText)throw new Error("this.cta.innerText is invalid. UpgradeActionBlock was expecting a String.");if("string"!=typeof this.cta.className)throw new Error("this.cta.className is invalid. UpgradeActionBlock was expecting a String.");if(this.cta.innerText.length<1)throw new Error("this.cta.innerText is invalid. UpgradeActionBlock was expecting descriptive text");if(-1===t.indexOf(this.cta.className)){var e=a.toEnglishEnumeration(t.map((function(t){return""===t?"An empty string":t})));throw new Error("this.cta.className is invalid. UpgradeActionBlock was expecting one of the following: "+e+".")}},_validateCallback:function(){if(!this.topicName&&!this.onCtaPressCallback)throw new Error("No callback interface is configured. UpgradeActionBlock expects either a topic OR callback");if(this.topicName&&this.onCtaPressCallback)throw new Error("Duplicate callback interfaces are configured. UpgradeActionBlock expects either a topic OR callback");if(this.topicName&&("string"!=typeof this.topicName||this.topicName.length<1))throw new Error("this.topicName is invalid. UpgradeActionBlock was expecting a valid String.")},_validateDismiss:function(){if("boolean"!=typeof this.isDismissable)throw new Error("this.isDismissable is invalid. UpgradeActionBlock was expecting a Boolean.")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(22),n(18),n(8),n(17)],void 0===(a=function(t,e,n,i,a){return t([],{userHasFeature:function(t){return!!a.policy&&Object.keys(a.policy).indexOf(t)>-1},getPolicyViolations:function(t,o,s){var r=new e;if(this.userHasFeature(t)){if("*"!==a.policy[t]){var l=i.toUrl("/account/authz"),d={feature:t,action:o,context:s?JSON.stringify(s):"[]"};return n.post(l,{data:d,handleAs:"json"}).then((function(t){return t.permitted?{}:t.violations}))}r.resolve({})}else r.resolve({no_access:{message:"User does not have access to feature "+t}});return r.promise},userMay:function(t,e,n){return this.getPolicyViolations(t,e,n).then((function(t){return 0===Object.keys(t).length}))}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/Deferred")},function(t,e,n){var i,a;i=[n(40),n(0),n(3),n(34),n(23),n(1),n(43),n(210),n(517),n(518),n(84)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c){return a("dijit-legacy-requires")&&r(0,(function(){Promise.resolve().then((function(){n(114),n(165),n(288)})).catch(n.oe)})),e("dijit.form.Button",[l,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(t){this.valueNode&&this.valueNode.setAttribute("name",t)},_fillContent:function(t){if(t&&(!this.params||!("label"in this.params))){var e=s.trim(t.innerHTML);e&&(this.label=e)}},_setShowLabelAttr:function(t){this.containerNode&&i.toggle(this.containerNode,"dijitDisplayNone",!t),this._set("showLabel",t)},setLabel:function(t){o.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",t)},_setLabelAttr:function(t){this.inherited(arguments),this.showLabel||"title"in this.params||(this.titleNode.title=s.trim(this.containerNode.innerText||this.containerNode.textContent||""))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(357),n(358),n(359),n(360),n(361)],void 0===(a=function(t,e,n,i,a){function o(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(120)],void 0===(a=function(t){return function(e,n){for(var i=e.length;i--;)if(t(e[i][0],n))return i;return-1}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(87)],void 0===(a=function(t){return t(Object,"create")}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(375)],void 0===(a=function(t){return function(e,n){var i=e.__data__;return t(n)?i["string"==typeof n?"string":"hash"]:i.map}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(50),n(174),n(389),n(121)],void 0===(a=function(t,e,n,i){return function(a,o){return t(a)?a:e(a,o)?[a]:n(i(a))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(94),n(89)],void 0===(a=function(t,e){return function(n){return"symbol"==typeof n||e(n)&&"[object Symbol]"==t(n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(247),n(546),n(108)],void 0===(a=function(t,e,n){return function(i){return n(i)?t(i,!0):e(i)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(4),n(9),n(2),n(7),n(6),n(12),n(11),n(199)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([l,d],{templateString:'<ul class="flex"></ul>',options:[],itemTpl:'<li class="c-buttonGroupItem"><button type="button" data-mc-value="{value}" title="{title}" class="c-buttonGroupButton v-buttonGroupBordered" href="#">{label}</button></li>',activeClass:"v-buttonGroupBordered--active",showCaTooltip:!1,value:"",postCreate:function(){var t=this;this._addOptions(),this.own(o(this.domNode,"button:click",(function(e){e.stopPropagation(),e.preventDefault();var n=s.get(this,"data-mc-value");if(t.showCaTooltip&&"content-engine"===n||null===n){var i=r(".adTooltip")[0];a.set(i,"visibility","hidden"),c.setAdTooltipCompletion()}t.set("value",n)}))),this.watch("value",n.hitch(this,"_toggleActive"))},_toggleActive:function(){r("button[data-mc-value]",this.domNode).removeClass(this.activeClass);var t=this.value;t&&r("button[data-mc-value='+value+']",this.domNode).addClass(this.activeClass),this.onChange(t)},_addOptions:function(){e.forEach(this.options,n.hitch(this,(function(t){var e=n.mixin({value:"",title:"",label:""},t);if(!e.title&&e.label&&(e.title=e.label),this.showCaTooltip&&"Creative Assistant"===e.title){i.place(n.replace('<li class="c-buttonGroupItem" style="position: relative;"><button class="c-buttonGroupButton v-buttonGroupList v-buttonGroupList--animColor full-width text-align--left normal-meta height-inherit border-radius--lv1 padding--lv2" data-mc-value="{value}" title="{title}"><div class="c-media"><div class="c-mediaImage v-imageThumb--animGrayscale"><img src="/images/files/source-icon-{value}.svg" alt="{label} icon" class="v-contentSourceBtnImg"></div><div class="c-mediaBody--centered small-meta">{label}</div></div></button><div class="adTooltip hide"><div class="adTooltipWrapper"><button role="button" class="button-small adTooltipClose"><span class="freddicon cross closeIcon"></span></button><span class="adTooltipText">By using the power of AI, we\'ll automatically generate beautiful multichannel designs using your logo, colors, and fonts.</span></div></div></li>',e),this.domNode)}else i.place(n.replace(this.itemTpl,e),this.domNode)})))},setSelected:function(t){this.set("value",t),this._toggleActive()},onChange:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(2),n(5),n(43),n(6),n(30),n(62)],void 0===(a=function(t,e,n,i,a,o){var s={},r={},l=function(t){return t.target&&-1!=e.indexOf(["INPUT","TEXTAREA","SELECT"],t.target.tagName.toUpperCase())},d=function(t){return void 0!==t.sender};n((function(){t(window.document,"keyup",u),t(window.document,"keypress",h),i("iframe").forEach((function(e){c(e),t(e,"load",(function(){c(this)}))}))}));var c=function(e){var n=document.location.protocol+"//"+document.location.host;e.src.slice(0,n.length)==n&&(t(e.contentWindow.document,"keyup",(function(t){u(t)})),t(e.contentWindow.document,"keypress",(function(t){h(t)})))},u=function(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey)){var n=t.data?t.data.keyCode:t.keyCode;for(var i in a)if(a.hasOwnProperty(i)&&a[i]===n){l(t)||r[n]&&r[n].length&&(e.forEach(r[n],(function(e){e(t)})),o.curNode&&o.curNode.blur());break}}},h=function(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey)){var n=t.data?t.data.charCode:t.charCode;l(t)||d(t)||s[n]&&s[n].length&&(e.forEach(s[n],(function(e){e(t)})),t.preventDefault(),t.stopPropagation())}},p={onKey:function(t,n){var i=t.charCodeAt(0);return s[i]||(s[i]=[]),s[i].push(n),{remove:function(){var t=e.indexOf(s[i],n);t>=0&&s[i].splice(t,1)}}},onSpecialKey:function(t,n){var i=a[t];return r[i]||(r[i]=[]),r[i].push(n),{remove:function(){var t=e.indexOf(r[i],n);t>=0&&r[i].splice(t,1)}}},onEsc:function(t){return p.onSpecialKey("ESCAPE",t)},onEnter:function(e,n){return t(e,"keyup",(function(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey)){var e=t.data?t.data.keyCode:t.keyCode;l(t)&&!d(t)&&e===a.ENTER&&n(t)}}))}};return p}.apply(e,i))||(t.exports=a)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[module,__webpack_require__(282),__webpack_require__(240),__webpack_require__(23),__webpack_require__(5),__webpack_require__(1),__webpack_require__(2),__webpack_require__(10),__webpack_require__(4),__webpack_require__(34),__webpack_require__(32)],__WEBPACK_AMD_DEFINE_RESULT__=function(module,watch,util,kernel,array,lang,on,dom,domConstruct,has,win){has.add("script-readystatechange",(function(t,e){return void 0!==e.createElement("script").onreadystatechange&&(void 0===t.opera||"[object Opera]"!==t.opera.toString())}));var mid="dojo_request_script",counter=0,loadEvent=has("script-readystatechange")?"readystatechange":"load",readyRegExp=/complete|loaded/,callbacks=kernel.global[mid+"_callbacks"]={},deadScripts=[];function attach(t,e,n){var i=n||win.doc,a=i.createElement("script");return a.type="text/javascript",a.src=e,a.id=t,a.async=!0,a.charset="utf-8",i.getElementsByTagName("head")[0].appendChild(a)}function remove(t,e,n){domConstruct.destroy(dom.byId(t,e)),callbacks[t]&&(n?callbacks[t]=function(){delete callbacks[t]}:delete callbacks[t])}function _addDeadScript(t){var e=t.response.options,n=e.ioArgs?e.ioArgs.frameDoc:e.frameDoc;deadScripts.push({id:t.id,frameDoc:n}),e.ioArgs&&(e.ioArgs.frameDoc=null),e.frameDoc=null}function canceler(t,e){t.canDelete&&script._remove(t.id,e.options.frameDoc,!0)}function isValid(t){return deadScripts&&deadScripts.length&&(array.forEach(deadScripts,(function(t){script._remove(t.id,t.frameDoc),t.frameDoc=null})),deadScripts=[]),!t.options.jsonp||!t.data}function isReadyScript(t){return!!this.scriptLoaded}function isReadyCheckString(response){var checkString=response.options.checkString;return checkString&&eval("typeof("+checkString+') !== "undefined"')}function handleResponse(t,e){this.canDelete&&_addDeadScript(this),e?this.reject(e):this.resolve(t)}function script(t,e,n){var i=util.parseArgs(t,util.deepCopy({},e));t=i.url,e=i.options;var a=util.deferred(i,canceler,isValid,e.jsonp?null:e.checkString?isReadyCheckString:isReadyScript,handleResponse);(lang.mixin(a,{id:mid+counter++,canDelete:!1}),e.jsonp)&&(new RegExp("[?&]"+e.jsonp+"=").test(t)||(t+=(~t.indexOf("?")?"&":"?")+e.jsonp+"="+(e.frameDoc?"parent.":"")+mid+"_callbacks."+a.id),a.canDelete=!0,callbacks[a.id]=function(t){i.data=t,a.handleResponse(i)});if(util.notify&&util.notify.emit("send",i,a.promise.cancel),!e.canAttach||e.canAttach(a)){var o=script._attach(a.id,t,e.frameDoc);if(!e.jsonp&&!e.checkString)var s=on(o,loadEvent,(function(t){("load"===t.type||readyRegExp.test(o.readyState))&&(s.remove(),a.scriptLoaded=t)}))}return watch(a),n?a:a.promise}return script.get=script,script._attach=attach,script._remove=remove,script._callbacksProperty=mid+"_callbacks",script}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e){t.exports=window.require("dojo/_base/Color")},function(t,e,n){var i,a;i=[n(204)],void 0===(a=function(t){return t}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(10),n(4),n(28),n(32)],void 0===(a=function(t,e,n,i){return{copy:function(t){var n=e.toDom("<input>");n.value=t,e.place(n,i.body()),n.select();var a=document.execCommand("copy");if(e.destroy(n),!1===a)throw new Error("Failed to copy text (verify caller was in the context of an event handler)")}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(3),n(24),n(15),n(1489)],void 0===(a=function(t,e,n,i,a,o,s){return t([a],{saveLabel:"Save",cancelLabel:"Cancel",errorLabel:"Resolve",showToastMessage:!1,successToastText:"Your changes have been ",successToastVerb:"saved",templateString:s,state:{isSaving:!1},save:function(t){if(t.preventDefault(),void 0===this.onBeforeSave||this.onBeforeSave()){this.setState({errors:{},isSaving:!0});var e=this.getData();this.onSave(e).then(this._handleSuccessfulSave.bind(this),this._handleErrorSave.bind(this))}},_handleSuccessfulSave:function(){this._destroyed||this.setState({isSaving:!1}),this.showToastMessage&&o.toast(this.successToastText+this.successToastVerb+".","success")},_handleErrorSave:function(t){this._destroyed||(this.onSaveError&&this.onSaveError(t),this.setState({isSaving:!1}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){return t(null,{configs:null,inputConfig:null,segmentInputType:null,getDisplayHTML:function(){throw new Error("Segmentation inputs must provide display text")},getValue:function(){throw new Error("Segmentation inputs must have a value")},getValueOp:function(){return null},getExtra:function(){return null},isCompatible:function(t){return JSON.stringify(this.inputConfig)===JSON.stringify(t)},setValue:function(t){},setValueOp:function(t){},setExtra:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(75),n(1),n(14),n(42)],void 0===(a=function(t,e,n,i,a){var o={};return t.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],(function(t){o[t]=i[t]})),n.mixin(o,{defaultDuration:e.defaultDuration||200}),n.mixin(a,o),a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(34),n(30),n(1),n(2),n(62),n(101),n(426),n(425),n(11),n(541),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t("dijit.TooltipDialog",[r,c,d,l],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:u,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments),this.own(o(this.domNode,"keydown",a.hitch(this,"_onKey")))},orient:function(t,n,i){var a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[n+"-"+i];e.replace(this.domNode,a,this._currentOrientClass||""),this._currentOrientClass=a},focus:function(){this._getFocusItems(),s.focus(this._firstFocusItem)},onOpen:function(t){this.orient(this.domNode,t.aroundCorner,t.corner);var e=t.aroundNodePos;"M"==t.corner.charAt(0)&&"M"==t.aroundCorner.charAt(0)?(this.connectorNode.style.top=e.y+(e.h-this.connectorNode.offsetHeight>>1)-t.y+"px",this.connectorNode.style.left=""):"M"==t.corner.charAt(1)&&"M"==t.aroundCorner.charAt(1)&&(this.connectorNode.style.left=e.x+(e.w-this.connectorNode.offsetWidth>>1)-t.x+"px"),this._onShow()},onClose:function(){this.onHide()},_onKey:function(t){if(t.keyCode==i.ESCAPE)this.defer("onCancel"),t.stopPropagation(),t.preventDefault();else if(t.keyCode==i.TAB){var e=t.target;this._getFocusItems(),this._firstFocusItem==this._lastFocusItem?(t.stopPropagation(),t.preventDefault()):e==this._firstFocusItem&&t.shiftKey?(s.focus(this._lastFocusItem),t.stopPropagation(),t.preventDefault()):e!=this._lastFocusItem||t.shiftKey?t.stopPropagation():(s.focus(this._firstFocusItem),t.stopPropagation(),t.preventDefault())}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(0),n(54),n(35)],void 0===(a=function(t,e,n,i){return e("dojo.fx.Toggler",null,{node:null,showFunc:n.fadeIn,hideFunc:n.fadeOut,showDuration:200,hideDuration:200,constructor:function(e){var n=this;t.mixin(n,e),n.node=e.node,n._showArgs=t.mixin({},e),n._showArgs.node=n.node,n._showArgs.duration=n.showDuration,n.showAnim=n.showFunc(n._showArgs),n._hideArgs=t.mixin({},e),n._hideArgs.node=n.node,n._hideArgs.duration=n.hideDuration,n.hideAnim=n.hideFunc(n._hideArgs),i.after(n.showAnim,"beforeBegin",t.hitch(n.hideAnim,"stop",!0),!0),i.after(n.hideAnim,"beforeBegin",t.hitch(n.showAnim,"stop",!0),!0)},show:function(t){return this.showAnim.play(t||0)},hide:function(t){return this.hideAnim.play(t||0)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(1),n(46)],void 0===(a=function(t,e,n){var i=function(a){if(!a)return a;var o=!!a.then;function s(e){a[e]=function(){var s=arguments,r=n(a,(function(n){return Array.prototype.unshift.call(s,n),i(t[e].apply(t,s))}));if("forEach"!==e||o)return r}}return o&&(a=e.delegate(a)),s("forEach"),s("filter"),s("map"),null==a.total&&(a.total=n(a,(function(t){return t.length}))),a};return e.setObject("dojo.store.util.QueryResults",i),i}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(4),n(9),n(23),n(1),n(2),n(33),n(195),n(292),n(531),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u=t("dijit.form.TextBox",[r,l],{templateString:d,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:s("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var t=this.type.toLowerCase();(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==t||"file"==t)&&this.templateString==this.constructor.prototype.templateString)&&(this.templateString=this._singleNodeTemplate),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),s("ie")<9&&this.defer((function(){try{var t=n.getComputedStyle(this.domNode);if(t){var e=t.fontFamily;if(e){var i=this.domNode.getElementsByTagName("INPUT");if(i)for(var a=0;a<i.length;a++)i[a].style.fontFamily=e}}}catch(t){}}))},_setPlaceHolderAttr:function(t){this._set("placeHolder",t),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=e.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(o(this._phspan,"mousedown",(function(t){t.preventDefault()})),o(this._phspan,"touchend, pointerup, MSPointerUp",a.hitch(this,(function(){this.focus()}))))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(t)),this._updatePlaceHolder()},_onInput:function(t){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(t,e,n){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return i.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(t){i.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",t)},_onBlur:function(t){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),s("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(t){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});return s("ie")<9&&(u.prototype._isTextSelected=function(){var t=this.ownerDocument.selection.createRange();return t.parentElement()==this.textbox&&t.text.length>0},c._setSelectionRange=l._setSelectionRange=function(t,e,n){if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveStart("character",-99999),i.moveStart("character",e),i.moveEnd("character",n-e),i.select()}}),u}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;!function(){var o={version:"3.5.6"},s=[].slice,r=function(t){return s.call(t)},l=this.document;function d(t){return t&&(t.ownerDocument||t.document||t).documentElement}function c(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(l)try{r(l.documentElement.childNodes)[0].nodeType}catch(t){r=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var u=this.Element.prototype,h=u.setAttribute,p=u.setAttributeNS,m=this.CSSStyleDeclaration.prototype,g=m.setProperty;u.setAttribute=function(t,e){h.call(this,t,e+"")},u.setAttributeNS=function(t,e,n){p.call(this,t,e,n+"")},m.setProperty=function(t,e,n){g.call(this,t,e+"",n)}}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return null===t?NaN:+t}function b(t){return!isNaN(t)}function y(t){return{left:function(e,n,i,a){for(arguments.length<3&&(i=0),arguments.length<4&&(a=e.length);i<a;){var o=i+a>>>1;t(e[o],n)<0?i=o+1:a=o}return i},right:function(e,n,i,a){for(arguments.length<3&&(i=0),arguments.length<4&&(a=e.length);i<a;){var o=i+a>>>1;t(e[o],n)>0?a=o:i=o+1}return i}}}o.ascending=f,o.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},o.min=function(t,e){var n,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=i;break}for(;++a<o;)null!=(i=t[a])&&n>i&&(n=i)}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&n>i&&(n=i)}return n},o.max=function(t,e){var n,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=i;break}for(;++a<o;)null!=(i=t[a])&&i>n&&(n=i)}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&i>n&&(n=i)}return n},o.extent=function(t,e){var n,i,a,o=-1,s=t.length;if(1===arguments.length){for(;++o<s;)if(null!=(i=t[o])&&i>=i){n=a=i;break}for(;++o<s;)null!=(i=t[o])&&(n>i&&(n=i),a<i&&(a=i))}else{for(;++o<s;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=a=i;break}for(;++o<s;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),a<i&&(a=i))}return[n,a]},o.sum=function(t,e){var n,i=0,a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)b(n=+t[o])&&(i+=n);else for(;++o<a;)b(n=+e.call(t,t[o],o))&&(i+=n);return i},o.mean=function(t,e){var n,i=0,a=t.length,o=-1,s=a;if(1===arguments.length)for(;++o<a;)b(n=v(t[o]))?i+=n:--s;else for(;++o<a;)b(n=v(e.call(t,t[o],o)))?i+=n:--s;if(s)return i/s},o.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),a=+t[i-1],o=n-i;return o?a+o*(t[i]-a):a},o.median=function(t,e){var n,i=[],a=t.length,s=-1;if(1===arguments.length)for(;++s<a;)b(n=v(t[s]))&&i.push(n);else for(;++s<a;)b(n=v(e.call(t,t[s],s)))&&i.push(n);if(i.length)return o.quantile(i.sort(f),.5)},o.variance=function(t,e){var n,i,a=t.length,o=0,s=0,r=-1,l=0;if(1===arguments.length)for(;++r<a;)b(n=v(t[r]))&&(s+=(i=n-o)*(n-(o+=i/++l)));else for(;++r<a;)b(n=v(e.call(t,t[r],r)))&&(s+=(i=n-o)*(n-(o+=i/++l)));if(l>1)return s/(l-1)},o.deviation=function(){var t=o.variance.apply(this,arguments);return t?Math.sqrt(t):t};var w=y(f);function _(t){return t.length}o.bisectLeft=w.left,o.bisect=o.bisectRight=w.right,o.bisector=function(t){return y(1===t.length?function(e,n){return f(t(e),n)}:t)},o.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var i,a,o=n-e;o;)a=Math.random()*o--|0,i=t[o+e],t[o+e]=t[a+e],t[a+e]=i;return t},o.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},o.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);e<n;)a[e]=[i,i=t[++e]];return a},o.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=o.min(arguments,_),n=new Array(e);++t<e;)for(var i,a=-1,s=n[t]=new Array(i);++a<i;)s[a]=arguments[a][t];return n},o.transpose=function(t){return o.zip.apply(o,t)},o.keys=function(t){var e=[];for(var n in t)e.push(n);return e},o.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},o.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},o.merge=function(t){for(var e,n,i,a=t.length,o=-1,s=0;++o<a;)s+=t[o].length;for(n=new Array(s);--a>=0;)for(e=(i=t[a]).length;--e>=0;)n[--s]=i[e];return n};var C=Math.abs;function k(t){for(var e=1;t*e%1;)e*=10;return e}function S(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function x(){this._=Object.create(null)}o.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,a=[],o=k(C(n)),s=-1;if(t*=o,e*=o,(n*=o)<0)for(;(i=t+n*++s)>e;)a.push(i/o);else for(;(i=t+n*++s)<e;)a.push(i/o);return a},o.map=function(t,e){var n=new x;if(t instanceof x)t.forEach((function(t,e){n.set(t,e)}));else if(Array.isArray(t)){var i,a=-1,o=t.length;if(1===arguments.length)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e.call(t,i=t[a],a),i)}else for(var s in t)n.set(s,t[s]);return n};function I(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function T(t){return"\0"===(t+="")[0]?t.slice(1):t}function A(t){return I(t)in this._}function j(t){return(t=I(t))in this._&&delete this._[t]}function E(){var t=[];for(var e in this._)t.push(T(e));return t}function P(){var t=0;for(var e in this._)++t;return t}function D(){for(var t in this._)return!1;return!0}function N(){this._=Object.create(null)}function L(t){return t}function M(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function B(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=R.length;n<i;++n){var a=R[n]+e;if(a in t)return a}}S(x,{has:A,get:function(t){return this._[I(t)]},set:function(t,e){return this._[I(t)]=e},remove:j,keys:E,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:T(e),value:this._[e]});return t},size:P,empty:D,forEach:function(t){for(var e in this._)t.call(this,T(e),this._[e])}}),o.nest=function(){var t,e,n={},i=[],a=[];function s(a,o,r){if(r>=i.length)return e?e.call(n,o):t?o.sort(t):o;for(var l,d,c,u,h=-1,p=o.length,m=i[r++],g=new x;++h<p;)(u=g.get(l=m(d=o[h])))?u.push(d):g.set(l,[d]);return a?(d=a(),c=function(t,e){d.set(t,s(a,e,r))}):(d={},c=function(t,e){d[t]=s(a,e,r)}),g.forEach(c),d}return n.map=function(t,e){return s(e,t,0)},n.entries=function(t){return function t(e,n){if(n>=i.length)return e;var o=[],s=a[n++];return e.forEach((function(e,i){o.push({key:e,values:t(i,n)})})),s?o.sort((function(t,e){return s(t.key,e.key)})):o}(s(o.map,t,0),0)},n.key=function(t){return i.push(t),n},n.sortKeys=function(t){return a[i.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},o.set=function(t){var e=new N;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},S(N,{has:A,add:function(t){return this._[I(t+="")]=!0,t},remove:j,values:E,size:P,empty:D,forEach:function(t){for(var e in this._)t.call(this,T(e))}}),o.behavior={},o.rebind=function(t,e){for(var n,i=1,a=arguments.length;++i<a;)t[n=arguments[i]]=M(t,e,e[n]);return t};var R=["webkit","ms","moz","Moz","o","O"];function F(){}function O(){}function U(t){var e=[],n=new x;function i(){for(var n,i=e,a=-1,o=i.length;++a<o;)(n=i[a].on)&&n.apply(this,arguments);return t}return i.on=function(i,a){var o,s=n.get(i);return arguments.length<2?s&&s.on:(s&&(s.on=null,e=e.slice(0,o=e.indexOf(s)).concat(e.slice(o+1)),n.remove(i)),a&&e.push(n.set(i,{on:a})),t)},i}function $(){o.event.preventDefault()}function H(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function V(t){for(var e=new O,n=0,i=arguments.length;++n<i;)e[arguments[n]]=U(e);return e.of=function(n,i){return function(a){try{var s=a.sourceEvent=o.event;a.target=t,o.event=a,e[a.type].apply(n,i)}finally{o.event=s}}},e}o.dispatch=function(){for(var t=new O,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=U(t);return t},O.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},o.event=null,o.requote=function(t){return t.replace(z,"\\$&")};var z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,W={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function q(t){return W(t,J),t}var G=function(t,e){return e.querySelector(t)},Y=function(t,e){return e.querySelectorAll(t)},K=function(t,e){var n=t.matches||t[B(t,"matchesSelector")];return(K=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(G=function(t,e){return Sizzle(t,e)[0]||null},Y=Sizzle,K=Sizzle.matchesSelector),o.selection=function(){return o.select(l.documentElement)};var J=o.selection.prototype=[];function X(t){return"function"==typeof t?t:function(){return G(t,this)}}function Q(t){return"function"==typeof t?t:function(){return Y(t,this)}}J.select=function(t){var e,n,i,a,o=[];t=X(t);for(var s=-1,r=this.length;++s<r;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,d=i.length;++l<d;)(a=i[l])?(e.push(n=t.call(a,a.__data__,l,s)),n&&"__data__"in a&&(n.__data__=a.__data__)):e.push(null)}return q(o)},J.selectAll=function(t){var e,n,i=[];t=Q(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,d=s.length;++l<d;)(n=s[l])&&(i.push(e=r(t.call(n,n.__data__,l,a))),e.parentNode=n);return q(i)};var Z={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tt(t,e){return t=o.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function et(t){return t.trim().replace(/\s+/g," ")}function nt(t){return new RegExp("(?:^|\\s+)"+o.requote(t)+"(?:\\s+|$)","g")}function it(t){return(t+"").trim().split(/^|\s+/)}function at(t,e){var n=(t=it(t).map(ot)).length;return"function"==typeof e?function(){for(var i=-1,a=e.apply(this,arguments);++i<n;)t[i](this,a)}:function(){for(var i=-1;++i<n;)t[i](this,e)}}function ot(t){var e=nt(t);return function(n,i){if(a=n.classList)return i?a.add(t):a.remove(t);var a=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(a)||n.setAttribute("class",et(a+" "+t))):n.setAttribute("class",et(a.replace(e," ")))}}function st(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}:function(){this.style.setProperty(t,e,n)}}function rt(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function lt(t){return"function"==typeof t?t:(t=o.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}}function dt(){var t=this.parentNode;t&&t.removeChild(this)}function ct(t){return{__data__:t}}function ut(t){return function(){return K(this,t)}}function ht(t){return arguments.length||(t=f),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function pt(t,e){for(var n=0,i=t.length;n<i;n++)for(var a,o=t[n],s=0,r=o.length;s<r;s++)(a=o[s])&&e(a,s,n);return t}function mt(t){return W(t,gt),t}o.ns={prefix:Z,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Z.hasOwnProperty(n)?{space:Z[n],local:t}:t}},J.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=o.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(tt(e,t[e]));return this}return this.each(tt(t,e))},J.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=it(t)).length,a=-1;if(e=n.classList){for(;++a<i;)if(!e.contains(t[a]))return!1}else for(e=n.getAttribute("class");++a<i;)if(!nt(t[a]).test(e))return!1;return!0}for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},J.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(st(n,t[n],e));return this}if(i<2){var a=this.node();return c(a).getComputedStyle(a,null).getPropertyValue(t)}n=""}return this.each(st(t,e,n))},J.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},J.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},J.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},J.append=function(t){return t=lt(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},J.insert=function(t,e){return t=lt(t),e=X(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},J.remove=function(){return this.each(dt)},J.data=function(t,e){var n,i,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++a<o;)(i=n[a])&&(t[a]=i.__data__);return t}function s(t,n){var i,a,o,s=t.length,c=n.length,u=Math.min(s,c),h=new Array(c),p=new Array(c),m=new Array(s);if(e){var g,f=new x,v=new Array(s);for(i=-1;++i<s;)f.has(g=e.call(a=t[i],a.__data__,i))?m[i]=a:f.set(g,a),v[i]=g;for(i=-1;++i<c;)(a=f.get(g=e.call(n,o=n[i],i)))?!0!==a&&(h[i]=a,a.__data__=o):p[i]=ct(o),f.set(g,!0);for(i=-1;++i<s;)!0!==f.get(v[i])&&(m[i]=t[i])}else{for(i=-1;++i<u;)a=t[i],o=n[i],a?(a.__data__=o,h[i]=a):p[i]=ct(o);for(;i<c;++i)p[i]=ct(n[i]);for(;i<s;++i)m[i]=t[i]}p.update=h,p.parentNode=h.parentNode=m.parentNode=t.parentNode,r.push(p),l.push(h),d.push(m)}var r=mt([]),l=q([]),d=q([]);if("function"==typeof t)for(;++a<o;)s(n=this[a],t.call(n,n.parentNode.__data__,a));else for(;++a<o;)s(n=this[a],t);return l.enter=function(){return r},l.exit=function(){return d},l},J.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},J.filter=function(t){var e,n,i,a=[];"function"!=typeof t&&(t=ut(t));for(var o=0,s=this.length;o<s;o++){a.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var r=0,l=n.length;r<l;r++)(i=n[r])&&t.call(i,i.__data__,r,o)&&e.push(i)}return q(a)},J.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],a=i.length-1,o=i[a];--a>=0;)(n=i[a])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},J.sort=function(t){t=ht.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},J.each=function(t){return pt(this,(function(e,n,i){t.call(e,e.__data__,n,i)}))},J.call=function(t){var e=r(arguments);return t.apply(e[0]=this,e),this},J.empty=function(){return!this.node()},J.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,a=n.length;i<a;i++){var o=n[i];if(o)return o}return null},J.size=function(){var t=0;return pt(this,(function(){++t})),t};var gt=[];function ft(t){var e,n;return function(i,a,o){var s,r=t[o].update,l=r.length;for(o!=n&&(n=o,e=0),a>=e&&(e=a+1);!(s=r[e])&&++e<l;);return s}}function vt(t,e,n){var i="__on"+t,a=t.indexOf("."),s=yt;a>0&&(t=t.slice(0,a));var l=bt.get(t);function d(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}return l&&(t=l,s=wt),a?e?function(){var a=s(e,r(arguments));d.call(this),this.addEventListener(t,this[i]=a,a.$=n),a._=e}:d:e?F:function(){var e,n=new RegExp("^__on([^.]+)"+o.requote(t)+"$");for(var i in this)if(e=i.match(n)){var a=this[i];this.removeEventListener(e[1],a,a.$),delete this[i]}}}o.selection.enter=mt,o.selection.enter.prototype=gt,gt.append=J.append,gt.empty=J.empty,gt.node=J.node,gt.call=J.call,gt.size=J.size,gt.select=function(t){for(var e,n,i,a,o,s=[],r=-1,l=this.length;++r<l;){i=(a=this[r]).update,s.push(e=[]),e.parentNode=a.parentNode;for(var d=-1,c=a.length;++d<c;)(o=a[d])?(e.push(i[d]=n=t.call(a.parentNode,o.__data__,d,r)),n.__data__=o.__data__):e.push(null)}return q(s)},gt.insert=function(t,e){return arguments.length<2&&(e=ft(this)),J.insert.call(this,t,e)},o.select=function(t){var e;return"string"==typeof t?(e=[G(t,l)]).parentNode=l.documentElement:(e=[t]).parentNode=d(t),q([e])},o.selectAll=function(t){var e;return"string"==typeof t?(e=r(Y(t,l))).parentNode=l.documentElement:(e=t).parentNode=null,q([e])},J.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(vt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(vt(t,e,n))};var bt=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function yt(t,e){return function(n){var i=o.event;o.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{o.event=i}}}function wt(t,e){var n=yt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}l&&bt.forEach((function(t){"on"+t in l&&bt.remove(t)}));var _t,Ct=0;function kt(t){var e=".dragsuppress-"+ ++Ct,n="click"+e,i=o.select(c(t)).on("touchmove"+e,$).on("dragstart"+e,$).on("selectstart"+e,$);if(null==_t&&(_t=!("onselectstart"in t)&&B(t.style,"userSelect")),_t){var a=d(t).style,s=a[_t];a[_t]="none"}return function(t){if(i.on(e,null),_t&&(a[_t]=s),t){var o=function(){i.on(n,null)};i.on(n,(function(){$(),o()}),!0),setTimeout(o,0)}}}o.mouse=function(t){return xt(t,H())};var St=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(St<0){var a=c(t);if(a.scrollX||a.scrollY){var s=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();St=!(s.f||s.e),n.remove()}}return St?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function It(){return o.event.changedTouches[0].identifier}o.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=H().changedTouches),e)for(var i,a=0,o=e.length;a<o;++a)if((i=e[a]).identifier===n)return xt(t,i)},o.behavior.drag=function(){var t=V(a,"drag","dragstart","dragend"),e=null,n=s(F,o.mouse,c,"mousemove","mouseup"),i=s(It,o.touch,L,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function s(n,i,a,s,r){return function(){var l,d=this,c=o.event.target,u=d.parentNode,h=t.of(d,arguments),p=0,m=n(),g=".drag"+(null==m?"":"-"+m),f=o.select(a(c)).on(s+g,y).on(r+g,w),v=kt(c),b=i(u,m);function y(){var t,e,n=i(u,m);n&&(t=n[0]-b[0],e=n[1]-b[1],p|=t|e,b=n,h({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}function w(){i(u,m)&&(f.on(s+g,null).on(r+g,null),v(p&&o.event.target===c),h({type:"dragend"}))}l=e?[(l=e.apply(d,arguments)).x-b[0],l.y-b[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(e=t,a):e},o.rebind(a,t,"on")},o.touches=function(t,e){return arguments.length<2&&(e=H().touches),e?r(e).map((function(e){var n=xt(t,e);return n.identifier=e.identifier,n})):[]};var Tt=1e-6,At=Math.PI,jt=2*At,Et=jt-Tt,Pt=At/2,Dt=At/180,Nt=180/At;function Lt(t){return t>0?1:t<0?-1:0}function Mt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Bt(t){return t>1?0:t<-1?At:Math.acos(t)}function Rt(t){return t>1?Pt:t<-1?-Pt:Math.asin(t)}function Ft(t){return((t=Math.exp(t))+1/t)/2}function Ot(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2;o.interpolateZoom=function(t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],r=e[2],l=o-n,d=s-i,c=l*l+d*d,u=Math.sqrt(c),h=(r*r-a*a+4*c)/(2*a*2*u),p=(r*r-a*a-4*c)/(2*r*2*u),m=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(p*p+1)-p)-m,f=(g||Math.log(r/a))/Ut;function v(t){var e,o=t*f;if(g){var s=Ft(m),r=a/(2*u)*(s*(e=Ut*o+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[n+r*l,i+r*d,a*s/Ft(Ut*o+m)]}return[n+t*l,i+t*d,a*Math.exp(Ut*o)]}return v.duration=1e3*f,v},o.behavior.zoom=function(){var t,e,n,i,a,s,r,d,u,h={x:0,y:0,k:1},p=[960,500],m=Vt,g=250,f=0,v="mousedown.zoom",b="mousemove.zoom",y="mouseup.zoom",w="touchstart.zoom",_=V(C,"zoomstart","zoom","zoomend");function C(t){t.on(v,P).on(Ht+".zoom",N).on("dblclick.zoom",L).on(w,D)}function k(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function S(t){h.k=Math.max(m[0],Math.min(m[1],t))}function x(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function I(t,n,i,a){t.__chart__={x:h.x,y:h.y,k:h.k},S(Math.pow(2,a)),x(e=n,i),t=o.select(t),g>0&&(t=t.transition().duration(g)),t.call(C.event)}function T(){r&&r.domain(s.range().map((function(t){return(t-h.x)/h.k})).map(s.invert)),u&&u.domain(d.range().map((function(t){return(t-h.y)/h.k})).map(d.invert))}function A(t){f++||t({type:"zoomstart"})}function j(t){T(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function E(t){--f||(t({type:"zoomend"}),e=null)}function P(){var t=this,e=o.event.target,n=_.of(t,arguments),i=0,a=o.select(c(t)).on(b,l).on(y,d),s=k(o.mouse(t)),r=kt(t);function l(){i=1,x(o.mouse(t),s),j(n)}function d(){a.on(b,null).on(y,null),r(i&&o.event.target===e),E(n)}fr.call(t),A(n)}function D(){var t,e=this,n=_.of(e,arguments),i={},s=0,r=".zoom-"+o.event.changedTouches[0].identifier,l="touchmove"+r,d="touchend"+r,c=[],u=o.select(e),p=kt(e);function m(){var n=o.touches(e);return t=h.k,n.forEach((function(t){t.identifier in i&&(i[t.identifier]=k(t))})),n}function g(){var t=o.event.target;o.select(t).on(l,f).on(d,b),c.push(t);for(var n=o.event.changedTouches,r=0,u=n.length;r<u;++r)i[n[r].identifier]=null;var p=m(),g=Date.now();if(1===p.length){if(g-a<500){var v=p[0];I(e,v,i[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),$()}a=g}else if(p.length>1){v=p[0];var y=p[1],w=v[0]-y[0],_=v[1]-y[1];s=w*w+_*_}}function f(){var r,l,d,c,u=o.touches(e);fr.call(e);for(var h=0,p=u.length;h<p;++h,c=null)if(d=u[h],c=i[d.identifier]){if(l)break;r=d,l=c}if(c){var m=(m=d[0]-r[0])*m+(m=d[1]-r[1])*m,g=s&&Math.sqrt(m/s);r=[(r[0]+d[0])/2,(r[1]+d[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],S(g*t)}a=null,x(r,l),j(n)}function b(){if(o.event.touches.length){for(var t=o.event.changedTouches,e=0,a=t.length;e<a;++e)delete i[t[e].identifier];for(var s in i)return void m()}o.selectAll(c).on(r,null),u.on(v,P).on(w,D),p(),E(n)}g(),A(n),u.on(v,null).on(w,g)}function N(){var a=_.of(this,arguments);i?clearTimeout(i):(fr.call(this),t=k(e=n||o.mouse(this)),A(a)),i=setTimeout((function(){i=null,E(a)}),50),$(),S(Math.pow(2,.002*$t())*h.k),x(e,t),j(a)}function L(){var t=o.mouse(this),e=Math.log(h.k)/Math.LN2;I(this,t,k(t),o.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Ht||(Ht="onwheel"in l?($t=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?($t=function(){return o.event.wheelDelta},"mousewheel"):($t=function(){return-o.event.detail},"MozMousePixelScroll")),C.event=function(t){t.each((function(){var t=_.of(this,arguments),n=h;yr?o.select(this).transition().each("start.zoom",(function(){h=this.__chart__||{x:0,y:0,k:1},A(t)})).tween("zoom:zoom",(function(){var i=p[0],a=p[1],s=e?e[0]:i/2,r=e?e[1]:a/2,l=o.interpolateZoom([(s-h.x)/h.k,(r-h.y)/h.k,i/h.k],[(s-n.x)/n.k,(r-n.y)/n.k,i/n.k]);return function(e){var n=l(e),a=i/n[2];this.__chart__=h={x:s-n[0]*a,y:r-n[1]*a,k:a},j(t)}})).each("interrupt.zoom",(function(){E(t)})).each("end.zoom",(function(){E(t)})):(this.__chart__=h,A(t),j(t),E(t))}))},C.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},T(),C):[h.x,h.y]},C.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:+t},T(),C):h.k},C.scaleExtent=function(t){return arguments.length?(m=null==t?Vt:[+t[0],+t[1]],C):m},C.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],C):n},C.size=function(t){return arguments.length?(p=t&&[+t[0],+t[1]],C):p},C.duration=function(t){return arguments.length?(g=+t,C):g},C.x=function(t){return arguments.length?(r=t,s=t.copy(),h={x:0,y:0,k:1},C):r},C.y=function(t){return arguments.length?(u=t,d=t.copy(),h={x:0,y:0,k:1},C):u},o.rebind(C,_,"on")};var $t,Ht,Vt=[0,1/0];function zt(){}function Wt(t,e,n){return this instanceof Wt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Wt?new Wt(t.h,t.s,t.l):ce(""+t,ue,Wt):new Wt(t,e,n)}o.color=zt,zt.prototype.toString=function(){return this.rgb()+""},o.hsl=Wt;var qt=Wt.prototype=new zt;function Gt(t,e,n){var i,a;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(a-i)*t/60:t<180?a:t<240?i+(a-i)*(240-t)/60:i}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,i=2*(n=n<0?0:n>1?1:n)-(a=n<=.5?n*(1+e):n+e-n*e),new oe(o(t+120),o(t),o(t-120))}function Yt(t,e,n){return this instanceof Yt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Yt?new Yt(t.h,t.c,t.l):ee(t instanceof Xt?t.l:(t=he((t=o.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Yt(t,e,n)}qt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,this.l/t)},qt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,t*this.l)},qt.rgb=function(){return Gt(this.h,this.s,this.l)},o.hcl=Yt;var Kt=Yt.prototype=new zt;function Jt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Xt(n,Math.cos(t*=Dt)*e,Math.sin(t)*e)}function Xt(t,e,n){return this instanceof Xt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Xt?new Xt(t.l,t.a,t.b):t instanceof Yt?Jt(t.h,t.c,t.l):he((t=oe(t)).r,t.g,t.b):new Xt(t,e,n)}Kt.brighter=function(t){return new Yt(this.h,this.c,Math.min(100,this.l+Qt*(arguments.length?t:1)))},Kt.darker=function(t){return new Yt(this.h,this.c,Math.max(0,this.l-Qt*(arguments.length?t:1)))},Kt.rgb=function(){return Jt(this.h,this.c,this.l).rgb()},o.lab=Xt;var Qt=18,Zt=Xt.prototype=new zt;function te(t,e,n){var i=(t+16)/116,a=i+e/500,o=i-n/200;return new oe(ae(3.2404542*(a=.95047*ne(a))-1.5371385*(i=1*ne(i))-.4985314*(o=1.08883*ne(o))),ae(-.969266*a+1.8760108*i+.041556*o),ae(.0556434*a-.2040259*i+1.0572252*o))}function ee(t,e,n){return t>0?new Yt(Math.atan2(n,e)*Nt,Math.sqrt(e*e+n*n),t):new Yt(NaN,NaN,t)}function ne(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ie(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ae(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function oe(t,e,n){return this instanceof oe?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof oe?new oe(t.r,t.g,t.b):ce(""+t,oe,Gt):new oe(t,e,n)}function se(t){return new oe(t>>16,t>>8&255,255&t)}function re(t){return se(t)+""}Zt.brighter=function(t){return new Xt(Math.min(100,this.l+Qt*(arguments.length?t:1)),this.a,this.b)},Zt.darker=function(t){return new Xt(Math.max(0,this.l-Qt*(arguments.length?t:1)),this.a,this.b)},Zt.rgb=function(){return te(this.l,this.a,this.b)},o.rgb=oe;var le=oe.prototype=new zt;function de(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,n){t=t.toLowerCase();var i,a,o,s=0,r=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t))switch(a=i[2].split(","),i[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(me(a[0]),me(a[1]),me(a[2]))}return(o=ge.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&o)>>4,s|=s>>4,r=240&o,r|=r>>4,l=15&o,l|=l<<4):7===t.length&&(s=(16711680&o)>>16,r=(65280&o)>>8,l=255&o)),e(s,r,l))}function ue(t,e,n){var i,a,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),r=s-o,l=(s+o)/2;return r?(a=l<.5?r/(s+o):r/(2-s-o),i=t==s?(e-n)/r+(e<n?6:0):e==s?(n-t)/r+2:(t-e)/r+4,i*=60):(i=NaN,a=l>0&&l<1?0:i),new Wt(i,a,l)}function he(t,e,n){var i=ie((.4124564*(t=pe(t))+.3575761*(e=pe(e))+.1804375*(n=pe(n)))/.95047),a=ie((.2126729*t+.7151522*e+.072175*n)/1);return Xt(116*a-16,500*(i-a),200*(a-ie((.0193339*t+.119192*e+.9503041*n)/1.08883)))}function pe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function me(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}le.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,a=30;return e||n||i?(e&&e<a&&(e=a),n&&n<a&&(n=a),i&&i<a&&(i=a),new oe(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new oe(a,a,a)},le.darker=function(t){return new oe((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},le.hsl=function(){return ue(this.r,this.g,this.b)},le.toString=function(){return"#"+de(this.r)+de(this.g)+de(this.b)};var ge=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function fe(t){return"function"==typeof t?t:function(){return t}}function ve(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),be(e,n,t,i)}}function be(t,e,n,i){var a={},s=o.dispatch("beforesend","progress","load","error"),l={},d=new XMLHttpRequest,c=null;function u(){var t,e=d.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(d)||e>=200&&e<300||304===e){try{t=n.call(a,d)}catch(t){return void s.error.call(a,t)}s.load.call(a,t)}else s.error.call(a,d)}return this.XDomainRequest&&!("withCredentials"in d)&&/^(http(s)?:)?\/\//.test(t)&&(d=new XDomainRequest),"onload"in d?d.onload=d.onerror=u:d.onreadystatechange=function(){d.readyState>3&&u()},d.onprogress=function(t){var e=o.event;o.event=t;try{s.progress.call(a,d)}finally{o.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return n=t,a},["get","post"].forEach((function(t){a[t]=function(){return a.send.apply(a,[t].concat(r(arguments)))}})),a.send=function(n,i,o){if(2===arguments.length&&"function"==typeof i&&(o=i,i=null),d.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),d.setRequestHeader)for(var r in l)d.setRequestHeader(r,l[r]);return null!=e&&d.overrideMimeType&&d.overrideMimeType(e),null!=c&&(d.responseType=c),null!=o&&a.on("error",o).on("load",(function(t){o(null,t)})),s.beforesend.call(a,d),d.send(null==i?null:i),a},a.abort=function(){return d.abort(),a},o.rebind(a,s,"on"),null==i?a:a.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(i))}ge.forEach((function(t,e){ge.set(t,se(e))})),o.functor=fe,o.xhr=ve(L),o.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);function a(t,n,i){arguments.length<3&&(i=n,n=null);var a=be(t,e,null==n?o:s(n),i);return a.row=function(t){return arguments.length?a.response(null==(n=t)?o:s(t)):n},a}function o(t){return a.parse(t.responseText)}function s(t){return function(e){return a.parse(e.responseText,t)}}function r(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,e){var n;return a.parseRows(t,(function(t,i){if(n)return n(t,i-1);var a=new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}");n=e?function(t,n){return e(a(t),n)}:a}))},a.parseRows=function(t,e){var n,a,o={},s={},r=[],l=t.length,d=0,c=0;function u(){if(d>=l)return s;if(a)return a=!1,o;var e=d;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return d=n+2,13===(r=t.charCodeAt(n+1))?(a=!0,10===t.charCodeAt(n+2)&&++d):10===r&&(a=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;d<l;){var r,c=1;if(10===(r=t.charCodeAt(d++)))a=!0;else if(13===r)a=!0,10===t.charCodeAt(d)&&(++d,++c);else if(r!==i)continue;return t.slice(e,d-c)}return t.slice(e)}for(;(n=u())!==s;){for(var h=[];n!==o&&n!==s;)h.push(n),n=u();e&&null==(h=e(h,c++))||r.push(h)}return r},a.format=function(e){if(Array.isArray(e[0]))return a.formatRows(e);var n=new N,i=[];return e.forEach((function(t){for(var e in t)n.has(e)||i.push(n.add(e))})),[i.map(l).join(t)].concat(e.map((function(e){return i.map((function(t){return l(e[t])})).join(t)}))).join("\n")},a.formatRows=function(t){return t.map(r).join("\n")},a},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var ye,we,_e,Ce,ke,Se=this[B(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function xe(){var t=Ie(),e=Te()-t;e>24?(isFinite(e)&&(clearTimeout(Ce),Ce=setTimeout(xe,e)),_e=0):(_e=1,Se(xe))}function Ie(){var t=Date.now();for(ke=ye;ke;)t>=ke.t&&(ke.f=ke.c(t-ke.t)),ke=ke.n;return t}function Te(){for(var t,e=ye,n=1/0;e;)e.f?e=t?t.n=e.n:ye=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return we=t,n}function Ae(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}o.timer=function(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var a=n+e,o={c:t,t:a,f:!1,n:null};we?we.n=o:ye=o,we=o,_e||(Ce=clearTimeout(Ce),_e=1,Se(xe))},o.timer.flush=function(){Ie(),Te()},o.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var je=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map((function(t,e){var n=Math.pow(10,3*C(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}));function Ee(t){var e=t.decimal,n=t.thousands,i=t.grouping,a=t.currency,s=i&&n?function(t,e){for(var a=t.length,o=[],s=0,r=i[0],l=0;a>0&&r>0&&(l+r+1>e&&(r=Math.max(1,e-l)),o.push(t.substring(a-=r,a+r)),!((l+=r+1)>e));)r=i[s=(s+1)%i.length];return o.reverse().join(n)}:L;return function(t){var n=Pe.exec(t),i=n[1]||" ",r=n[2]||">",l=n[3]||"-",d=n[4]||"",c=n[5],u=+n[6],h=n[7],p=n[8],m=n[9],g=1,f="",v="",b=!1,y=!0;switch(p&&(p=+p.substring(1)),(c||"0"===i&&"="===r)&&(c=i="0",r="="),m){case"n":h=!0,m="g";break;case"%":g=100,v="%",m="f";break;case"p":g=100,v="%",m="r";break;case"b":case"o":case"x":case"X":"#"===d&&(f="0"+m.toLowerCase());case"c":y=!1;case"d":b=!0,p=0;break;case"s":g=-1,m="r"}"$"===d&&(f=a[0],v=a[1]),"r"!=m||p||(m="g"),null!=p&&("g"==m?p=Math.max(1,Math.min(21,p)):"e"!=m&&"f"!=m||(p=Math.max(0,Math.min(20,p)))),m=De.get(m)||Ne;var w=c&&h;return function(t){var n=v;if(b&&t%1)return"";var a=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(g<0){var d=o.formatPrefix(t,p);t=d.scale(t),n=d.symbol+v}else t*=g;var _,C,k=(t=m(t,p)).lastIndexOf(".");if(k<0){var S=y?t.lastIndexOf("e"):-1;S<0?(_=t,C=""):(_=t.substring(0,S),C=t.substring(S))}else _=t.substring(0,k),C=e+t.substring(k+1);!c&&h&&(_=s(_,1/0));var x=f.length+_.length+C.length+(w?0:a.length),I=x<u?new Array(x=u-x+1).join(i):"";return w&&(_=s(I+_,I.length?u-C.length:1/0)),a+=f,t=_+C,("<"===r?a+t+I:">"===r?I+a+t:"^"===r?I.substring(0,x>>=1)+a+t+I.substring(x):a+(w?t:I+t))+n}}}o.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=o.round(t,Ae(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),je[8+n/3]};var Pe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,De=o.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=o.round(t,Ae(t,e))).toFixed(Math.max(0,Math.min(20,Ae(t*(1+1e-15),e))))}});function Ne(t){return t+""}var Le=o.time={},Me=Date;function Be(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Re.setUTCDate.apply(this._,arguments)},setDay:function(){Re.setUTCDay.apply(this._,arguments)},setFullYear:function(){Re.setUTCFullYear.apply(this._,arguments)},setHours:function(){Re.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Re.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Re.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Re.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Re.setUTCSeconds.apply(this._,arguments)},setTime:function(){Re.setTime.apply(this._,arguments)}};var Re=Date.prototype;function Fe(t,e,n){function i(e){var n=t(e),i=o(n,1);return e-n<i-e?n:i}function a(n){return e(n=t(new Me(n-1)),1),n}function o(t,n){return e(t=new Me(+t),n),t}function s(t,i,o){var s=a(t),r=[];if(o>1)for(;s<i;)n(s)%o||r.push(new Date(+s)),e(s,1);else for(;s<i;)r.push(new Date(+s)),e(s,1);return r}t.floor=t,t.round=i,t.ceil=a,t.offset=o,t.range=s;var r=t.utc=Oe(t);return r.floor=r,r.round=Oe(i),r.ceil=Oe(a),r.offset=Oe(o),r.range=function(t,e,n){try{Me=Be;var i=new Be;return i._=t,s(i,e,n)}finally{Me=Date}},t}function Oe(t){return function(e,n){try{Me=Be;var i=new Be;return i._=e,t(i,n)._}finally{Me=Date}}}function Ue(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,s=t.days,r=t.shortDays,l=t.months,d=t.shortMonths;function c(t){var e=t.length;function n(n){for(var i,a,o,s=[],r=-1,l=0;++r<e;)37===t.charCodeAt(r)&&(s.push(t.slice(l,r)),null!=(a=$e[i=t.charAt(++r)])&&(i=t.charAt(++r)),(o=_[i])&&(i=o(n,null==a?"e"===i?" ":"0":a)),s.push(i),l=r+1);return s.push(t.slice(l,r)),s.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&Me!==Be,a=new(i?Be:Me);return"j"in n?a.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?a._:a},n.toString=function(){return t},n}function u(t,e,n,i){for(var a,o,s,r=0,l=e.length,d=n.length;r<l;){if(i>=d)return-1;if(37===(a=e.charCodeAt(r++))){if(s=e.charAt(r++),!(o=C[s in $e?e.charAt(r++):s])||(i=o(t,n,i))<0)return-1}else if(a!=n.charCodeAt(i++))return-1}return i}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Me=Be);return n._=t,e(n)}finally{Me=Date}}return n.parse=function(t){try{Me=Be;var n=e.parse(t);return n&&n._}finally{Me=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=dn;var h=o.map(),p=We(s),m=qe(s),g=We(r),f=qe(r),v=We(l),b=qe(l),y=We(d),w=qe(d);a.forEach((function(t,e){h.set(t.toLowerCase(),e)}));var _={a:function(t){return r[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return d[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(e),d:function(t,e){return ze(t.getDate(),e,2)},e:function(t,e){return ze(t.getDate(),e,2)},H:function(t,e){return ze(t.getHours(),e,2)},I:function(t,e){return ze(t.getHours()%12||12,e,2)},j:function(t,e){return ze(1+Le.dayOfYear(t),e,3)},L:function(t,e){return ze(t.getMilliseconds(),e,3)},m:function(t,e){return ze(t.getMonth()+1,e,2)},M:function(t,e){return ze(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return ze(t.getSeconds(),e,2)},U:function(t,e){return ze(Le.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return ze(Le.mondayOfYear(t),e,2)},x:c(n),X:c(i),y:function(t,e){return ze(t.getFullYear()%100,e,2)},Y:function(t,e){return ze(t.getFullYear()%1e4,e,4)},Z:rn,"%":function(){return"%"}},C={a:function(t,e,n){g.lastIndex=0;var i=g.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){p.lastIndex=0;var i=p.exec(e.slice(n));return i?(t.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=w.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){v.lastIndex=0;var i=v.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return u(t,_.c.toString(),e,n)},d:tn,e:tn,H:nn,I:nn,j:en,L:sn,m:Ze,M:an,p:function(t,e,n){var i=h.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:on,U:Ye,w:Ge,W:Ke,x:function(t,e,n){return u(t,_.x.toString(),e,n)},X:function(t,e,n){return u(t,_.X.toString(),e,n)},y:Xe,Y:Je,Z:Qe,"%":ln};return c}Le.year=Fe((function(t){return(t=Le.day(t)).setMonth(0,1),t}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t){return t.getFullYear()})),Le.years=Le.year.range,Le.years.utc=Le.year.utc.range,Le.day=Fe((function(t){var e=new Me(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t){return t.getDate()-1})),Le.days=Le.day.range,Le.days.utc=Le.day.utc.range,Le.dayOfYear=function(t){var e=Le.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(t,e){e=7-e;var n=Le[t]=Fe((function(t){return(t=Le.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t}),(function(t,e){t.setDate(t.getDate()+7*Math.floor(e))}),(function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)-(n!==e)}));Le[t+"s"]=n.range,Le[t+"s"].utc=n.utc.range,Le[t+"OfYear"]=function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)}})),Le.week=Le.sunday,Le.weeks=Le.sunday.range,Le.weeks.utc=Le.sunday.utc.range,Le.weekOfYear=Le.sundayOfYear;var $e={"-":"",_:" ",0:"0"},He=/^\s*\d+/,Ve=/^%/;function ze(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",o=a.length;return i+(o<n?new Array(n-o+1).join(e)+a:a)}function We(t){return new RegExp("^(?:"+t.map(o.requote).join("|")+")","i")}function qe(t){for(var e=new x,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ge(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ye(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ke(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Je(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Xe(t,e,n){He.lastIndex=0;var i,a=He.exec(e.slice(n,n+2));return a?(t.y=(i=+a[0])+(i>68?1900:2e3),n+a[0].length):-1}function Qe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ze(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function tn(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function en(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function nn(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function an(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function on(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function sn(t,e,n){He.lastIndex=0;var i=He.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function rn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=C(e)/60|0,a=C(e)%60;return n+ze(i,"0",2)+ze(a,"0",2)}function ln(t,e,n){Ve.lastIndex=0;var i=Ve.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function dn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}o.locale=function(t){return{numberFormat:Ee(t),timeFormat:Ue(t)}};var cn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function un(){}o.format=cn.numberFormat,o.geo={},un.prototype={s:0,t:0,add:function(t){pn(t,this.t,hn),pn(hn.s,this.s,this),this.s?this.t+=hn.t:this.s=hn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hn=new un;function pn(t,e,n){var i=n.s=t+e,a=i-t,o=i-a;n.t=t-o+(e-a)}function mn(t,e){t&&fn.hasOwnProperty(t.type)&&fn[t.type](t,e)}o.geo.stream=function(t,e){t&&gn.hasOwnProperty(t.type)?gn[t.type](t,e):mn(t,e)};var gn={Feature:function(t,e){mn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)mn(n[i].geometry,e)}},fn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){vn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)vn(n[i],e,0)},Polygon:function(t,e){bn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)bn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)mn(n[i],e)}};function vn(t,e,n){var i,a=-1,o=t.length-n;for(e.lineStart();++a<o;)i=t[a],e.point(i[0],i[1],i[2]);e.lineEnd()}function bn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)vn(t[n],e,1);e.polygonEnd()}o.geo.area=function(t){return yn=0,o.geo.stream(t,Dn),yn};var yn,wn,_n,Cn,kn,Sn,xn,In,Tn,An,jn,En,Pn=new un,Dn={sphere:function(){yn+=4*At},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Pn.reset(),Dn.lineStart=Nn},polygonEnd:function(){var t=2*Pn;yn+=t<0?4*At+t:t,Dn.lineStart=Dn.lineEnd=Dn.point=F}};function Nn(){var t,e,n,i,a;function o(t,e){e=e*Dt/2+At/4;var o=(t*=Dt)-n,s=o>=0?1:-1,r=s*o,l=Math.cos(e),d=Math.sin(e),c=a*d,u=i*l+c*Math.cos(r),h=c*s*Math.sin(r);Pn.add(Math.atan2(h,u)),n=t,i=l,a=d}Dn.point=function(s,r){Dn.point=o,n=(t=s)*Dt,i=Math.cos(r=(e=r)*Dt/2+At/4),a=Math.sin(r)},Dn.lineEnd=function(){o(t,e)}}function Ln(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Mn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Rn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Fn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function On(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Un(t){return[Math.atan2(t[1],t[0]),Rt(t[2])]}function $n(t,e){return C(t[0]-e[0])<Tt&&C(t[1]-e[1])<Tt}o.geo.bounds=function(){var t,e,n,i,a,s,r,l,d,c,u,h={point:p,lineStart:g,lineEnd:f,polygonStart:function(){h.point=v,h.lineStart=b,h.lineEnd=y,d=0,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),h.point=p,h.lineStart=g,h.lineEnd=f,Pn<0?(t=-(n=180),e=-(i=90)):d>Tt?i=90:d<-Tt&&(e=-90),u[0]=t,u[1]=n}};function p(a,o){c.push(u=[t=a,n=a]),o<e&&(e=o),o>i&&(i=o)}function m(o,s){var r=Ln([o*Dt,s*Dt]);if(l){var d=Bn(l,r),c=Bn([d[1],-d[0],0],d);On(c),c=Un(c);var u=o-a,h=u>0?1:-1,m=c[0]*Nt*h,g=C(u)>180;if(g^(h*a<m&&m<h*o))(f=c[1]*Nt)>i&&(i=f);else if(g^(h*a<(m=(m+360)%360-180)&&m<h*o)){var f;(f=-c[1]*Nt)<e&&(e=f)}else s<e&&(e=s),s>i&&(i=s);g?o<a?w(t,o)>w(t,n)&&(n=o):w(o,n)>w(t,n)&&(t=o):n>=t?(o<t&&(t=o),o>n&&(n=o)):o>a?w(t,o)>w(t,n)&&(n=o):w(o,n)>w(t,n)&&(t=o)}else p(o,s);l=r,a=o}function g(){h.point=m}function f(){u[0]=t,u[1]=n,h.point=p,l=null}function v(t,e){if(l){var n=t-a;d+=C(n)>180?n+(n>0?360:-360):n}else s=t,r=e;Dn.point(t,e),m(t,e)}function b(){Dn.lineStart()}function y(){v(s,r),Dn.lineEnd(),C(d)>Tt&&(t=-(n=180)),u[0]=t,u[1]=n,l=null}function w(t,e){return(e-=t)<0?e+360:e}function _(t,e){return t[0]-e[0]}function k(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(a){if(i=n=-(t=e=1/0),c=[],o.geo.stream(a,h),d=c.length){c.sort(_);for(var s=1,r=[g=c[0]];s<d;++s)k((p=c[s])[0],g)||k(p[1],g)?(w(g[0],p[1])>w(g[0],g[1])&&(g[1]=p[1]),w(p[0],g[1])>w(g[0],g[1])&&(g[0]=p[0])):r.push(g=p);for(var l,d,p,m=-1/0,g=(s=0,r[d=r.length-1]);s<=d;g=p,++s)p=r[s],(l=w(g[1],p[0]))>m&&(m=l,t=p[0],n=g[1])}return c=u=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,i]]}}(),o.geo.centroid=function(t){wn=_n=Cn=kn=Sn=xn=In=Tn=An=jn=En=0,o.geo.stream(t,Hn);var e=An,n=jn,i=En,a=e*e+n*n+i*i;return a<1e-12&&(e=xn,n=In,i=Tn,_n<Tt&&(e=Cn,n=kn,i=Sn),(a=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[Math.atan2(n,e)*Nt,Rt(i/Math.sqrt(a))*Nt]};var Hn={sphere:F,point:Vn,lineStart:Wn,lineEnd:qn,polygonStart:function(){Hn.lineStart=Gn},polygonEnd:function(){Hn.lineStart=Wn}};function Vn(t,e){t*=Dt;var n=Math.cos(e*=Dt);zn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function zn(t,e,n){++wn,Cn+=(t-Cn)/wn,kn+=(e-kn)/wn,Sn+=(n-Sn)/wn}function Wn(){var t,e,n;function i(i,a){i*=Dt;var o=Math.cos(a*=Dt),s=o*Math.cos(i),r=o*Math.sin(i),l=Math.sin(a),d=Math.atan2(Math.sqrt((d=e*l-n*r)*d+(d=n*s-t*l)*d+(d=t*r-e*s)*d),t*s+e*r+n*l);_n+=d,xn+=d*(t+(t=s)),In+=d*(e+(e=r)),Tn+=d*(n+(n=l)),zn(t,e,n)}Hn.point=function(a,o){a*=Dt;var s=Math.cos(o*=Dt);t=s*Math.cos(a),e=s*Math.sin(a),n=Math.sin(o),Hn.point=i,zn(t,e,n)}}function qn(){Hn.point=Vn}function Gn(){var t,e,n,i,a;function o(t,e){t*=Dt;var o=Math.cos(e*=Dt),s=o*Math.cos(t),r=o*Math.sin(t),l=Math.sin(e),d=i*l-a*r,c=a*s-n*l,u=n*r-i*s,h=Math.sqrt(d*d+c*c+u*u),p=n*s+i*r+a*l,m=h&&-Bt(p)/h,g=Math.atan2(h,p);An+=m*d,jn+=m*c,En+=m*u,_n+=g,xn+=g*(n+(n=s)),In+=g*(i+(i=r)),Tn+=g*(a+(a=l)),zn(n,i,a)}Hn.point=function(s,r){t=s,e=r,Hn.point=o,s*=Dt;var l=Math.cos(r*=Dt);n=l*Math.cos(s),i=l*Math.sin(s),a=Math.sin(r),zn(n,i,a)},Hn.lineEnd=function(){o(t,e),Hn.lineEnd=qn,Hn.point=Vn}}function Yn(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Kn(){return!0}function Jn(t,e,n,i,a){var o=[],s=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if($n(n,i)){a.lineStart();for(var r=0;r<e;++r)a.point((n=t[r])[0],n[1]);a.lineEnd()}else{var l=new Qn(n,t,null,!0),d=new Qn(n,null,l,!1);l.o=d,o.push(l),s.push(d),l=new Qn(i,t,null,!1),d=new Qn(i,null,l,!0),l.o=d,o.push(l),s.push(d)}}})),s.sort(e),Xn(o),Xn(s),o.length){for(var r=0,l=n,d=s.length;r<d;++r)s[r].e=l=!l;for(var c,u,h=o[0];;){for(var p=h,m=!0;p.v;)if((p=p.n)===h)return;c=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(r=0,d=c.length;r<d;++r)a.point((u=c[r])[0],u[1]);else i(p.x,p.n.x,1,a);p=p.n}else{if(m)for(r=(c=p.p.z).length-1;r>=0;--r)a.point((u=c[r])[0],u[1]);else i(p.x,p.p.x,-1,a);p=p.p}c=(p=p.o).z,m=!m}while(!p.v);a.lineEnd()}}}function Xn(t){if(e=t.length){for(var e,n,i=0,a=t[0];++i<e;)a.n=n=t[i],n.p=a,a=n;a.n=n=t[0],n.p=a}}function Qn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Zn(t,e,n,i){return function(a,s){var r,l=e(s),d=a.invert(i[0],i[1]),c={point:u,lineStart:p,lineEnd:m,polygonStart:function(){c.point=w,c.lineStart=_,c.lineEnd=C,r=[],g=[]},polygonEnd:function(){c.point=u,c.lineStart=p,c.lineEnd=m,r=o.merge(r);var t=function(t,e){var n=t[0],i=t[1],a=[Math.sin(n),-Math.cos(n),0],o=0,s=0;Pn.reset();for(var r=0,l=e.length;r<l;++r){var d=e[r],c=d.length;if(c)for(var u=d[0],h=u[0],p=u[1]/2+At/4,m=Math.sin(p),g=Math.cos(p),f=1;;){f===c&&(f=0);var v=(t=d[f])[0],b=t[1]/2+At/4,y=Math.sin(b),w=Math.cos(b),_=v-h,C=_>=0?1:-1,k=C*_,S=k>At,x=m*y;if(Pn.add(Math.atan2(x*C*Math.sin(k),g*w+x*Math.cos(k))),o+=S?_+C*jt:_,S^h>=n^v>=n){var I=Bn(Ln(u),Ln(t));On(I);var T=Bn(a,I);On(T);var A=(S^_>=0?-1:1)*Rt(T[2]);(i>A||i===A&&(I[0]||I[1]))&&(s+=S^_>=0?1:-1)}if(!f++)break;h=v,m=y,g=w,u=t}}return(o<-Tt||o<Tt&&Pn<0)^1&s}(d,g);r.length?(y||(s.polygonStart(),y=!0),Jn(r,ni,t,n,s)):t&&(y||(s.polygonStart(),y=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),y&&(s.polygonEnd(),y=!1),r=g=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function u(e,n){var i=a(e,n);t(e=i[0],n=i[1])&&s.point(e,n)}function h(t,e){var n=a(t,e);l.point(n[0],n[1])}function p(){c.point=h,l.lineStart()}function m(){c.point=u,l.lineEnd()}var g,f,v=ei(),b=e(v),y=!1;function w(t,e){f.push([t,e]);var n=a(t,e);b.point(n[0],n[1])}function _(){b.lineStart(),f=[]}function C(){w(f[0][0],f[0][1]),b.lineEnd();var t,e=b.clean(),n=v.buffer(),i=n.length;if(f.pop(),g.push(f),f=null,i)if(1&e){var a,o=-1;if((i=(t=n[0]).length-1)>0){for(y||(s.polygonStart(),y=!0),s.lineStart();++o<i;)s.point((a=t[o])[0],a[1]);s.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),r.push(n.filter(ti))}return c}}function ti(t){return t.length>1}function ei(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:F,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ni(t,e){return((t=t.x)[0]<0?t[1]-Pt-Tt:Pt-t[1])-((e=e.x)[0]<0?e[1]-Pt-Tt:Pt-e[1])}var ii=Zn(Kn,(function(t){var e,n=NaN,i=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var r=o>0?At:-At,l=C(o-n);C(l-At)<Tt?(t.point(n,i=(i+s)/2>0?Pt:-Pt),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(r,i),t.point(o,i),e=0):a!==r&&l>=At&&(C(n-a)<Tt&&(n-=a*Tt),C(o-r)<Tt&&(o-=r*Tt),i=function(t,e,n,i){var a,o,s=Math.sin(t-n);return C(s)>Tt?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(a=Math.cos(e))*Math.sin(t))/(a*o*s)):(e+i)/2}(n,i,o,s),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(r,i),e=0),t.point(n=o,i=s),a=r},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var a;if(null==t)a=n*Pt,i.point(-At,a),i.point(0,a),i.point(At,a),i.point(At,0),i.point(At,-a),i.point(0,-a),i.point(-At,-a),i.point(-At,0),i.point(-At,a);else if(C(t[0]-e[0])>Tt){var o=t[0]<e[0]?At:-At;a=n*o/2,i.point(-o,a),i.point(0,a),i.point(o,a)}else i.point(e[0],e[1])}),[-At,-At/2]);function ai(t){var e=Math.cos(t),n=e>0,i=C(e)>Tt;return Zn(a,(function(t){var e,r,l,d,c;return{lineStart:function(){d=l=!1,c=1},point:function(u,h){var p,m=[u,h],g=a(u,h),f=n?g?0:s(u,h):g?s(u+(u<0?At:-At),h):0;if(!e&&(d=l=g)&&t.lineStart(),g!==l&&(p=o(e,m),($n(e,p)||$n(m,p))&&(m[0]+=Tt,m[1]+=Tt,g=a(m[0],m[1]))),g!==l)c=0,g?(t.lineStart(),p=o(m,e),t.point(p[0],p[1])):(p=o(e,m),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&n^g){var v;f&r||!(v=o(m,e,!0))||(c=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&$n(e,m)||t.point(m[0],m[1]),e=m,l=g,r=f},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(d&&l)<<1}}}),Ui(t,6*Dt),n?[0,-t]:[-At,t-At]);function a(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,i){var a=[1,0,0],o=Bn(Ln(t),Ln(n)),s=Mn(o,o),r=o[0],l=s-r*r;if(!l)return!i&&t;var d=e*s/l,c=-e*r/l,u=Bn(a,o),h=Fn(a,d);Rn(h,Fn(o,c));var p=u,m=Mn(h,p),g=Mn(p,p),f=m*m-g*(Mn(h,h)-1);if(!(f<0)){var v=Math.sqrt(f),b=Fn(p,(-m-v)/g);if(Rn(b,h),b=Un(b),!i)return b;var y,w=t[0],_=n[0],k=t[1],S=n[1];_<w&&(y=w,w=_,_=y);var x=_-w,I=C(x-At)<Tt;if(!I&&S<k&&(y=k,k=S,S=y),I||x<Tt?I?k+S>0^b[1]<(C(b[0]-w)<Tt?k:S):k<=b[1]&&b[1]<=S:x>At^(w<=b[0]&&b[0]<=_)){var T=Fn(p,(-m+v)/g);return Rn(T,h),[b,Un(T)]}}}function s(e,i){var a=n?t:At-t,o=0;return e<-a?o|=1:e>a&&(o|=2),i<-a?o|=4:i>a&&(o|=8),o}}function oi(t,e,n,i){return function(a){var o,s=a.a,r=a.b,l=s.x,d=s.y,c=0,u=1,h=r.x-l,p=r.y-d;if(o=t-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>c&&(c=o)}if(o=n-l,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<u&&(u=o)}if(o=e-d,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<u&&(u=o)}else if(p>0){if(o>u)return;o>c&&(c=o)}if(o=i-d,p||!(o<0)){if(o/=p,p<0){if(o>u)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<u&&(u=o)}return c>0&&(a.a={x:l+c*h,y:d+c*p}),u<1&&(a.b={x:l+u*h,y:d+u*p}),a}}}}}}function si(t,e,n,i){return function(l){var d,c,u,h,p,m,g,f,v,b,y,w=l,_=ei(),C=oi(t,e,n,i),k={point:I,lineStart:function(){k.point=T,c&&c.push(u=[]);b=!0,v=!1,g=f=NaN},lineEnd:function(){d&&(T(h,p),m&&v&&_.rejoin(),d.push(_.buffer()));k.point=I,v&&l.lineEnd()},polygonStart:function(){l=_,d=[],c=[],y=!0},polygonEnd:function(){l=w,d=o.merge(d);var e=function(t){for(var e=0,n=c.length,i=t[1],a=0;a<n;++a)for(var o,s=1,r=c[a],l=r.length,d=r[0];s<l;++s)o=r[s],d[1]<=i?o[1]>i&&Mt(d,o,t)>0&&++e:o[1]<=i&&Mt(d,o,t)<0&&--e,d=o;return 0!==e}([t,i]),n=y&&e,a=d.length;(n||a)&&(l.polygonStart(),n&&(l.lineStart(),S(null,null,1,l),l.lineEnd()),a&&Jn(d,s,e,S,l),l.polygonEnd()),d=c=u=null}};function S(o,s,l,d){var c=0,u=0;if(null==o||(c=a(o,l))!==(u=a(s,l))||r(o,s)<0^l>0)do{d.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+l+4)%4)!==u);else d.point(s[0],s[1])}function x(a,o){return t<=a&&a<=n&&e<=o&&o<=i}function I(t,e){x(t,e)&&l.point(t,e)}function T(t,e){var n=x(t=Math.max(-1e9,Math.min(1e9,t)),e=Math.max(-1e9,Math.min(1e9,e)));if(c&&u.push([t,e]),b)h=t,p=e,m=n,b=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&v)l.point(t,e);else{var i={a:{x:g,y:f},b:{x:t,y:e}};C(i)?(v||(l.lineStart(),l.point(i.a.x,i.a.y)),l.point(i.b.x,i.b.y),n||l.lineEnd(),y=!1):n&&(l.lineStart(),l.point(t,e),y=!1)}g=t,f=e,v=n}return k};function a(i,a){return C(i[0]-t)<Tt?a>0?0:3:C(i[0]-n)<Tt?a>0?2:1:C(i[1]-e)<Tt?a>0?1:0:a>0?3:2}function s(t,e){return r(t.x,e.x)}function r(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ri(t){var e=0,n=At/3,i=Di(t),a=i(e,n);return a.parallels=function(t){return arguments.length?i(e=t[0]*At/180,n=t[1]*At/180):[e/At*180,n/At*180]},a}function li(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,a=1+n*(2*i-n),o=Math.sqrt(a)/i;function s(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}return s.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,Rt((a-(t*t+n*n)*i*i)/(2*i))]},s}o.geo.clipExtent=function(){var t,e,n,i,a,o,s={stream:function(t){return a&&(a.valid=!1),(a=o(t)).valid=!0,a},extent:function(r){return arguments.length?(o=si(t=+r[0][0],e=+r[0][1],n=+r[1][0],i=+r[1][1]),a&&(a.valid=!1,a=null),s):[[t,e],[n,i]]}};return s.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return ri(li)}).raw=li,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var t,e,n,i,a=o.geo.albers(),s=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function d(a){var o=a[0],s=a[1];return t=null,e(o,s),t||(n(o,s),t)||i(o,s),t}return d.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&i>=-.425&&i<-.214?s:o>=.166&&o<.234&&i>=-.214&&i<-.115?r:a).invert(t)},d.stream=function(t){var e=a.stream(t),n=s.stream(t),i=r.stream(t);return{point:function(t,a){e.point(t,a),n.point(t,a),i.point(t,a)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},d.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),r.precision(t),d):a.precision()},d.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),r.scale(t),d.translate(a.translate())):a.scale()},d.translate=function(t){if(!arguments.length)return a.translate();var o=a.scale(),c=+t[0],u=+t[1];return e=a.translate(t).clipExtent([[c-.455*o,u-.238*o],[c+.455*o,u+.238*o]]).stream(l).point,n=s.translate([c-.307*o,u+.201*o]).clipExtent([[c-.425*o+Tt,u+.12*o+Tt],[c-.214*o-Tt,u+.234*o-Tt]]).stream(l).point,i=r.translate([c-.205*o,u+.212*o]).clipExtent([[c-.214*o+Tt,u+.166*o+Tt],[c-.115*o-Tt,u+.234*o-Tt]]).stream(l).point,d},d.scale(1070)};var di,ci,ui,hi,pi,mi,gi={point:F,lineStart:F,lineEnd:F,polygonStart:function(){ci=0,gi.lineStart=fi},polygonEnd:function(){gi.lineStart=gi.lineEnd=gi.point=F,di+=C(ci/2)}};function fi(){var t,e,n,i;function a(t,e){ci+=i*t-n*e,n=t,i=e}gi.point=function(o,s){gi.point=a,t=n=o,e=i=s},gi.lineEnd=function(){a(t,e)}}var vi={point:function(t,e){t<ui&&(ui=t);t>pi&&(pi=t);e<hi&&(hi=e);e>mi&&(mi=e)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function bi(){var t=yi(4.5),e=[],n={point:i,lineStart:function(){n.point=a},lineEnd:s,polygonStart:function(){n.lineEnd=r},polygonEnd:function(){n.lineEnd=s,n.point=i},pointRadius:function(e){return t=yi(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function i(n,i){e.push("M",n,",",i,t)}function a(t,i){e.push("M",t,",",i),n.point=o}function o(t,n){e.push("L",t,",",n)}function s(){n.point=i}function r(){e.push("Z")}return n}function yi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var wi,_i={point:Ci,lineStart:ki,lineEnd:Si,polygonStart:function(){_i.lineStart=xi},polygonEnd:function(){_i.point=Ci,_i.lineStart=ki,_i.lineEnd=Si}};function Ci(t,e){Cn+=t,kn+=e,++Sn}function ki(){var t,e;function n(n,i){var a=n-t,o=i-e,s=Math.sqrt(a*a+o*o);xn+=s*(t+n)/2,In+=s*(e+i)/2,Tn+=s,Ci(t=n,e=i)}_i.point=function(i,a){_i.point=n,Ci(t=i,e=a)}}function Si(){_i.point=Ci}function xi(){var t,e,n,i;function a(t,e){var a=t-n,o=e-i,s=Math.sqrt(a*a+o*o);xn+=s*(n+t)/2,In+=s*(i+e)/2,Tn+=s,An+=(s=i*t-n*e)*(n+t),jn+=s*(i+e),En+=3*s,Ci(n=t,i=e)}_i.point=function(o,s){_i.point=a,Ci(t=n=o,e=i=s)},_i.lineEnd=function(){a(t,e)}}function Ii(t){var e=4.5,n={point:i,lineStart:function(){n.point=a},lineEnd:s,polygonStart:function(){n.lineEnd=r},polygonEnd:function(){n.lineEnd=s,n.point=i},pointRadius:function(t){return e=t,n},result:F};function i(n,i){t.moveTo(n+e,i),t.arc(n,i,e,0,jt)}function a(e,i){t.moveTo(e,i),n.point=o}function o(e,n){t.lineTo(e,n)}function s(){n.point=i}function r(){t.closePath()}return n}function Ti(t){var e=.5,n=Math.cos(30*Dt),i=16;function a(t){return(i?s:o)(t)}function o(e){return Ei(e,(function(n,i){n=t(n,i),e.point(n[0],n[1])}))}function s(e){var n,a,o,s,l,d,c,u,h,p,m,g,f={point:v,lineStart:b,lineEnd:w,polygonStart:function(){e.polygonStart(),f.lineStart=_},polygonEnd:function(){e.polygonEnd(),f.lineStart=b}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function b(){u=NaN,f.point=y,e.lineStart()}function y(n,a){var o=Ln([n,a]),s=t(n,a);r(u,h,c,p,m,g,u=s[0],h=s[1],c=n,p=o[0],m=o[1],g=o[2],i,e),e.point(u,h)}function w(){f.point=v,e.lineEnd()}function _(){b(),f.point=C,f.lineEnd=k}function C(t,e){y(n=t,e),a=u,o=h,s=p,l=m,d=g,f.point=y}function k(){r(u,h,c,p,m,g,a,o,n,s,l,d,i,e),f.lineEnd=w,w()}return f}function r(i,a,o,s,l,d,c,u,h,p,m,g,f,v){var b=c-i,y=u-a,w=b*b+y*y;if(w>4*e&&f--){var _=s+p,k=l+m,S=d+g,x=Math.sqrt(_*_+k*k+S*S),I=Math.asin(S/=x),T=C(C(S)-1)<Tt||C(o-h)<Tt?(o+h)/2:Math.atan2(k,_),A=t(T,I),j=A[0],E=A[1],P=j-i,D=E-a,N=y*P-b*D;(N*N/w>e||C((b*P+y*D)/w-.5)>.3||s*p+l*m+d*g<n)&&(r(i,a,o,s,l,d,j,E,T,_/=x,k/=x,S,f,v),v.point(j,E),r(j,E,T,_,k,S,c,u,h,p,m,g,f,v))}}return a.precision=function(t){return arguments.length?(i=(e=t*t)>0&&16,a):Math.sqrt(e)},a}function Ai(t){var e=Ti((function(e,n){return t([e*Nt,n*Nt])}));return function(t){return Ni(e(t))}}function ji(t){this.stream=t}function Ei(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Pi(t){return Di((function(){return t}))()}function Di(t){var e,n,i,a,s,r,l=Ti((function(t,n){return[(t=e(t,n))[0]*d+a,s-t[1]*d]})),d=150,c=480,u=250,h=0,p=0,m=0,g=0,f=0,v=ii,b=L,y=null,w=null;function _(t){return[(t=i(t[0]*Dt,t[1]*Dt))[0]*d+a,s-t[1]*d]}function C(t){return(t=i.invert((t[0]-a)/d,(s-t[1])/d))&&[t[0]*Nt,t[1]*Nt]}function k(){i=Yn(n=Bi(m,g,f),e);var t=e(h,p);return a=c-t[0]*d,s=u+t[1]*d,S()}function S(){return r&&(r.valid=!1,r=null),_}return _.stream=function(t){return r&&(r.valid=!1),(r=Ni(v(n,l(b(t))))).valid=!0,r},_.clipAngle=function(t){return arguments.length?(v=null==t?(y=t,ii):ai((y=+t)*Dt),S()):y},_.clipExtent=function(t){return arguments.length?(w=t,b=t?si(t[0][0],t[0][1],t[1][0],t[1][1]):L,S()):w},_.scale=function(t){return arguments.length?(d=+t,k()):d},_.translate=function(t){return arguments.length?(c=+t[0],u=+t[1],k()):[c,u]},_.center=function(t){return arguments.length?(h=t[0]%360*Dt,p=t[1]%360*Dt,k()):[h*Nt,p*Nt]},_.rotate=function(t){return arguments.length?(m=t[0]%360*Dt,g=t[1]%360*Dt,f=t.length>2?t[2]%360*Dt:0,k()):[m*Nt,g*Nt,f*Nt]},o.rebind(_,l,"precision"),function(){return e=t.apply(this,arguments),_.invert=e.invert&&C,k()}}function Ni(t){return Ei(t,(function(e,n){t.point(e*Dt,n*Dt)}))}function Li(t,e){return[t,e]}function Mi(t,e){return[t>At?t-jt:t<-At?t+jt:t,e]}function Bi(t,e,n){return t?e||n?Yn(Fi(t),Oi(e,n)):Fi(t):e||n?Oi(e,n):Mi}function Ri(t){return function(e,n){return[(e+=t)>At?e-jt:e<-At?e+jt:e,n]}}function Fi(t){var e=Ri(t);return e.invert=Ri(-t),e}function Oi(t,e){var n=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);function s(t,e){var s=Math.cos(e),r=Math.cos(t)*s,l=Math.sin(t)*s,d=Math.sin(e),c=d*n+r*i;return[Math.atan2(l*a-c*o,r*n-d*i),Rt(c*a+l*o)]}return s.invert=function(t,e){var s=Math.cos(e),r=Math.cos(t)*s,l=Math.sin(t)*s,d=Math.sin(e),c=d*a-l*o;return[Math.atan2(l*a+d*o,r*n+c*i),Rt(c*n-r*i)]},s}function Ui(t,e){var n=Math.cos(t),i=Math.sin(t);return function(a,o,s,r){var l=s*e;null!=a?(a=$i(n,a),o=$i(n,o),(s>0?a<o:a>o)&&(a+=s*jt)):(a=t+s*jt,o=t-.5*l);for(var d,c=a;s>0?c>o:c<o;c-=l)r.point((d=Un([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],d[1])}}function $i(t,e){var n=Ln(e);n[0]-=t,On(n);var i=Bt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Tt)%(2*Math.PI)}function Hi(t,e,n){var i=o.range(t,e-Tt,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function Vi(t,e,n){var i=o.range(t,e-Tt,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function zi(t){return t.source}function Wi(t){return t.target}o.geo.path=function(){var t,e,n,i,a,s=4.5;function r(t){return t&&("function"==typeof s&&i.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=n(i)),o.geo.stream(t,a)),i.result()}function l(){return a=null,r}return r.area=function(t){return di=0,o.geo.stream(t,n(gi)),di},r.centroid=function(t){return Cn=kn=Sn=xn=In=Tn=An=jn=En=0,o.geo.stream(t,n(_i)),En?[An/En,jn/En]:Tn?[xn/Tn,In/Tn]:Sn?[Cn/Sn,kn/Sn]:[NaN,NaN]},r.bounds=function(t){return pi=mi=-(ui=hi=1/0),o.geo.stream(t,n(vi)),[[ui,hi],[pi,mi]]},r.projection=function(e){return arguments.length?(n=(t=e)?e.stream||Ai(e):L,l()):t},r.context=function(t){return arguments.length?(i=null==(e=t)?new bi:new Ii(t),"function"!=typeof s&&i.pointRadius(s),l()):e},r.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(i.pointRadius(+t),+t),r):s},r.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(t){return{stream:function(e){var n=new ji(e);for(var i in t)n[i]=t[i];return n}}},ji.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=Pi,o.geo.projectionMutator=Di,(o.geo.equirectangular=function(){return Pi(Li)}).raw=Li.invert=Li,o.geo.rotation=function(t){function e(e){return(e=t(e[0]*Dt,e[1]*Dt))[0]*=Nt,e[1]*=Nt,e}return t=Bi(t[0]%360*Dt,t[1]*Dt,t.length>2?t[2]*Dt:0),e.invert=function(e){return(e=t.invert(e[0]*Dt,e[1]*Dt))[0]*=Nt,e[1]*=Nt,e},e},Mi.invert=Li,o.geo.circle=function(){var t,e,n=[0,0],i=6;function a(){var t="function"==typeof n?n.apply(this,arguments):n,i=Bi(-t[0]*Dt,-t[1]*Dt,0).invert,a=[];return e(null,null,1,{point:function(t,e){a.push(t=i(t,e)),t[0]*=Nt,t[1]*=Nt}}),{type:"Polygon",coordinates:[a]}}return a.origin=function(t){return arguments.length?(n=t,a):n},a.angle=function(n){return arguments.length?(e=Ui((t=+n)*Dt,i*Dt),a):t},a.precision=function(n){return arguments.length?(e=Ui(t*Dt,(i=+n)*Dt),a):i},a.angle(90)},o.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Dt,a=t[1]*Dt,o=e[1]*Dt,s=Math.sin(i),r=Math.cos(i),l=Math.sin(a),d=Math.cos(a),c=Math.sin(o),u=Math.cos(o);return Math.atan2(Math.sqrt((n=u*s)*n+(n=d*c-l*u*r)*n),l*c+d*u*r)},o.geo.graticule=function(){var t,e,n,i,a,s,r,l,d,c,u,h,p=10,m=p,g=90,f=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return o.range(Math.ceil(i/g)*g,n,g).map(u).concat(o.range(Math.ceil(l/f)*f,r,f).map(h)).concat(o.range(Math.ceil(e/p)*p,t,p).filter((function(t){return C(t%g)>Tt})).map(d)).concat(o.range(Math.ceil(s/m)*m,a,m).filter((function(t){return C(t%f)>Tt})).map(c))}return b.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},b.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(h(r).slice(1),u(n).reverse().slice(1),h(l).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],r=+t[1][1],i>n&&(t=i,i=n,n=t),l>r&&(t=l,l=r,r=t),b.precision(v)):[[i,l],[n,r]]},b.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],s=+n[0][1],a=+n[1][1],e>t&&(n=e,e=t,t=n),s>a&&(n=s,s=a,a=n),b.precision(v)):[[e,s],[t,a]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(g=+t[0],f=+t[1],b):[g,f]},b.minorStep=function(t){return arguments.length?(p=+t[0],m=+t[1],b):[p,m]},b.precision=function(o){return arguments.length?(v=+o,d=Hi(s,a,90),c=Vi(e,t,v),u=Hi(l,r,90),h=Vi(i,n,v),b):v},b.majorExtent([[-180,-90+Tt],[180,90-Tt]]).minorExtent([[-180,-80-Tt],[180,80+Tt]])},o.geo.greatArc=function(){var t,e,n=zi,i=Wi;function a(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||i.apply(this,arguments)]}}return a.distance=function(){return o.geo.distance(t||n.apply(this,arguments),e||i.apply(this,arguments))},a.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,a):n},a.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,a):i},a.precision=function(){return arguments.length?a:0},a},o.geo.interpolate=function(t,e){return n=t[0]*Dt,i=t[1]*Dt,a=e[0]*Dt,o=e[1]*Dt,s=Math.cos(i),r=Math.sin(i),l=Math.cos(o),d=Math.sin(o),c=s*Math.cos(n),u=s*Math.sin(n),h=l*Math.cos(a),p=l*Math.sin(a),m=2*Math.asin(Math.sqrt(Ot(o-i)+s*l*Ot(a-n))),g=1/Math.sin(m),(f=m?function(t){var e=Math.sin(t*=m)*g,n=Math.sin(m-t)*g,i=n*c+e*h,a=n*u+e*p,o=n*r+e*d;return[Math.atan2(a,i)*Nt,Math.atan2(o,Math.sqrt(i*i+a*a))*Nt]}:function(){return[n*Nt,i*Nt]}).distance=m,f;var n,i,a,o,s,r,l,d,c,u,h,p,m,g,f},o.geo.length=function(t){return wi=0,o.geo.stream(t,qi),wi};var qi={sphere:F,point:F,lineStart:function(){var t,e,n;function i(i,a){var o=Math.sin(a*=Dt),s=Math.cos(a),r=C((i*=Dt)-t),l=Math.cos(r);wi+=Math.atan2(Math.sqrt((r=s*Math.sin(r))*r+(r=n*o-e*s*l)*r),e*o+n*s*l),t=i,e=o,n=s}qi.point=function(a,o){t=a*Dt,e=Math.sin(o*=Dt),n=Math.cos(o),qi.point=i},qi.lineEnd=function(){qi.point=qi.lineEnd=F}},lineEnd:F,polygonStart:F,polygonEnd:F};function Gi(t,e){function n(e,n){var i=Math.cos(e),a=Math.cos(n),o=t(i*a);return[o*a*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),a=e(i),o=Math.sin(a),s=Math.cos(a);return[Math.atan2(t*o,i*s),Math.asin(i&&n*o/i)]},n}var Yi=Gi((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(o.geo.azimuthalEqualArea=function(){return Pi(Yi)}).raw=Yi;var Ki=Gi((function(t){var e=Math.acos(t);return e&&e/Math.sin(e)}),L);function Ji(t,e){var n=Math.cos(t),i=function(t){return Math.tan(At/4+t/2)},a=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),o=n*Math.pow(i(t),a)/a;if(!a)return Zi;function s(t,e){o>0?e<-Pt+Tt&&(e=-Pt+Tt):e>Pt-Tt&&(e=Pt-Tt);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}return s.invert=function(t,e){var n=o-e,i=Lt(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Pt]},s}function Xi(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),a=n/i+t;if(C(i)<Tt)return Li;function o(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-Lt(i)*Math.sqrt(t*t+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return Pi(Ki)}).raw=Ki,(o.geo.conicConformal=function(){return ri(Ji)}).raw=Ji,(o.geo.conicEquidistant=function(){return ri(Xi)}).raw=Xi;var Qi=Gi((function(t){return 1/t}),Math.atan);function Zi(t,e){return[t,Math.log(Math.tan(At/4+e/2))]}function ta(t){var e,n=Pi(t),i=n.scale,a=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=a.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var r=At*i(),l=a();o([[l[0]-r,l[1]-r],[l[0]+r,l[1]+r]])}}else e&&(s=null);return s},n.clipExtent(null)}(o.geo.gnomonic=function(){return Pi(Qi)}).raw=Qi,Zi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Pt]},(o.geo.mercator=function(){return ta(Zi)}).raw=Zi;var ea=Gi((function(){return 1}),Math.asin);(o.geo.orthographic=function(){return Pi(ea)}).raw=ea;var na=Gi((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));function ia(t,e){return[Math.log(Math.tan(At/4+e/2)),-t]}function aa(t){return t[0]}function oa(t){return t[1]}function sa(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;a++){for(;i>1&&Mt(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}function ra(t,e){return t[0]-e[0]||t[1]-e[1]}(o.geo.stereographic=function(){return Pi(na)}).raw=na,ia.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Pt]},(o.geo.transverseMercator=function(){var t=ta(ia),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ia,o.geom={},o.geom.hull=function(t){var e=aa,n=oa;if(arguments.length)return i(t);function i(t){if(t.length<3)return[];var i,a=fe(e),o=fe(n),s=t.length,r=[],l=[];for(i=0;i<s;i++)r.push([+a.call(this,t[i],i),+o.call(this,t[i],i),i]);for(r.sort(ra),i=0;i<s;i++)l.push([r[i][0],-r[i][1]]);var d=sa(r),c=sa(l),u=c[0]===d[0],h=c[c.length-1]===d[d.length-1],p=[];for(i=d.length-1;i>=0;--i)p.push(t[r[d[i]][2]]);for(i=+u;i<c.length-h;++i)p.push(t[r[c[i]][2]]);return p}return i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i},o.geom.polygon=function(t){return W(t,la),t};var la=o.geom.polygon.prototype=[];function da(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ca(t,e,n,i){var a=t[0],o=n[0],s=e[0]-a,r=i[0]-o,l=t[1],d=n[1],c=e[1]-l,u=i[1]-d,h=(r*(l-d)-u*(a-o))/(u*s-r*c);return[a+h*s,l+h*c]}function ua(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}la.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],a=0;++e<n;)t=i,i=this[e],a+=t[1]*i[0]-t[0]*i[1];return.5*a},la.centroid=function(t){var e,n,i=-1,a=this.length,o=0,s=0,r=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++i<a;)e=r,r=this[i],n=e[0]*r[1]-r[0]*e[1],o+=(e[0]+r[0])*n,s+=(e[1]+r[1])*n;return[o*t,s*t]},la.clip=function(t){for(var e,n,i,a,o,s,r=ua(t),l=-1,d=this.length-ua(this),c=this[d-1];++l<d;){for(e=t.slice(),t.length=0,a=this[l],o=e[(i=e.length-r)-1],n=-1;++n<i;)da(s=e[n],c,a)?(da(o,c,a)||t.push(ca(o,s,c,a)),t.push(s)):da(o,c,a)&&t.push(ca(o,s,c,a)),o=s;r&&t.push(t[0]),c=a}return t};var ha,pa,ma,ga,fa,va=[],ba=[];function ya(){Fa(this),this.edge=this.site=this.circle=null}function wa(t){var e=va.pop()||new ya;return e.site=t,e}function _a(t){Ea(t),ma.remove(t),va.push(t),Fa(t)}function Ca(t){var e=t.circle,n=e.x,i=e.cy,a={x:n,y:i},o=t.P,s=t.N,r=[t];_a(t);for(var l=o;l.circle&&C(n-l.circle.x)<Tt&&C(i-l.circle.cy)<Tt;)o=l.P,r.unshift(l),_a(l),l=o;r.unshift(l),Ea(l);for(var d=s;d.circle&&C(n-d.circle.x)<Tt&&C(i-d.circle.cy)<Tt;)s=d.N,r.push(d),_a(d),d=s;r.push(d),Ea(d);var c,u=r.length;for(c=1;c<u;++c)d=r[c],l=r[c-1],Ma(d.edge,l.site,d.site,a);l=r[0],(d=r[u-1]).edge=Na(l.site,d.site,null,a),ja(l),ja(d)}function ka(t){for(var e,n,i,a,o=t.x,s=t.y,r=ma._;r;)if((i=Sa(r,s)-o)>Tt)r=r.L;else{if(!((a=o-xa(r,s))>Tt)){i>-Tt?(e=r.P,n=r):a>-Tt?(e=r,n=r.N):e=n=r;break}if(!r.R){e=r;break}r=r.R}var l=wa(t);if(ma.insert(e,l),e||n){if(e===n)return Ea(e),n=wa(e.site),ma.insert(l,n),l.edge=n.edge=Na(e.site,l.site),ja(e),void ja(n);if(n){Ea(e),Ea(n);var d=e.site,c=d.x,u=d.y,h=t.x-c,p=t.y-u,m=n.site,g=m.x-c,f=m.y-u,v=2*(h*f-p*g),b=h*h+p*p,y=g*g+f*f,w={x:(f*b-p*y)/v+c,y:(h*y-g*b)/v+u};Ma(n.edge,d,m,w),l.edge=Na(d,t,null,w),n.edge=Na(t,m,null,w),ja(e),ja(n)}else l.edge=Na(e.site,l.site)}}function Sa(t,e){var n=t.site,i=n.x,a=n.y,o=a-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var r=(n=s.site).x,l=n.y,d=l-e;if(!d)return r;var c=r-i,u=1/o-1/d,h=c/d;return u?(-h+Math.sqrt(h*h-2*u*(c*c/(-2*d)-l+d/2+a-o/2)))/u+i:(i+r)/2}function xa(t,e){var n=t.N;if(n)return Sa(n,e);var i=t.site;return i.y===e?i.x:1/0}function Ia(t){this.site=t,this.edges=[]}function Ta(t,e){return e.angle-t.angle}function Aa(){Fa(this),this.x=this.y=this.arc=this.site=this.cy=null}function ja(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,a=t.site,o=n.site;if(i!==o){var s=a.x,r=a.y,l=i.x-s,d=i.y-r,c=o.x-s,u=2*(l*(f=o.y-r)-d*c);if(!(u>=-1e-12)){var h=l*l+d*d,p=c*c+f*f,m=(f*h-d*p)/u,g=(l*p-c*h)/u,f=g+r,v=ba.pop()||new Aa;v.arc=t,v.site=a,v.x=m+s,v.y=f+Math.sqrt(m*m+g*g),v.cy=f,t.circle=v;for(var b=null,y=fa._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}fa.insert(b,v),b||(ga=v)}}}}function Ea(t){var e=t.circle;e&&(e.P||(ga=e.N),fa.remove(e),ba.push(e),Fa(e),t.circle=null)}function Pa(t,e){var n=t.b;if(n)return!0;var i,a,o=t.a,s=e[0][0],r=e[1][0],l=e[0][1],d=e[1][1],c=t.l,u=t.r,h=c.x,p=c.y,m=u.x,g=u.y,f=(h+m)/2,v=(p+g)/2;if(g===p){if(f<s||f>=r)return;if(h>m){if(o){if(o.y>=d)return}else o={x:f,y:l};n={x:f,y:d}}else{if(o){if(o.y<l)return}else o={x:f,y:d};n={x:f,y:l}}}else if(a=v-(i=(h-m)/(g-p))*f,i<-1||i>1)if(h>m){if(o){if(o.y>=d)return}else o={x:(l-a)/i,y:l};n={x:(d-a)/i,y:d}}else{if(o){if(o.y<l)return}else o={x:(d-a)/i,y:d};n={x:(l-a)/i,y:l}}else if(p<g){if(o){if(o.x>=r)return}else o={x:s,y:i*s+a};n={x:r,y:i*r+a}}else{if(o){if(o.x<s)return}else o={x:r,y:i*r+a};n={x:s,y:i*s+a}}return t.a=o,t.b=n,!0}function Da(t,e){this.l=t,this.r=e,this.a=this.b=null}function Na(t,e,n,i){var a=new Da(t,e);return ha.push(a),n&&Ma(a,t,e,n),i&&Ma(a,e,t,i),pa[t.i].edges.push(new Ba(a,t,e)),pa[e.i].edges.push(new Ba(a,e,t)),a}function La(t,e,n){var i=new Da(t,null);return i.a=e,i.b=n,ha.push(i),i}function Ma(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Ba(t,e,n){var i=t.a,a=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(a.x-i.x,i.y-a.y):Math.atan2(i.x-a.x,a.y-i.y)}function Ra(){this._=null}function Fa(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Oa(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ua(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function $a(t){for(;t.L;)t=t.L;return t}function Ha(t,e){var n,i,a,o=t.sort(Va).pop();for(ha=[],pa=new Array(t.length),ma=new Ra,fa=new Ra;;)if(a=ga,o&&(!a||o.y<a.y||o.y===a.y&&o.x<a.x))o.x===n&&o.y===i||(pa[o.i]=new Ia(o),ka(o),n=o.x,i=o.y),o=t.pop();else{if(!a)break;Ca(a.arc)}e&&(function(t){for(var e,n=ha,i=oi(t[0][0],t[0][1],t[1][0],t[1][1]),a=n.length;a--;)(!Pa(e=n[a],t)||!i(e)||C(e.a.x-e.b.x)<Tt&&C(e.a.y-e.b.y)<Tt)&&(e.a=e.b=null,n.splice(a,1))}(e),function(t){for(var e,n,i,a,o,s,r,l,d,c,u=t[0][0],h=t[1][0],p=t[0][1],m=t[1][1],g=pa,f=g.length;f--;)if((o=g[f])&&o.prepare())for(l=(r=o.edges).length,s=0;s<l;)i=(c=r[s].end()).x,a=c.y,e=(d=r[++s%l].start()).x,n=d.y,(C(i-e)>Tt||C(a-n)>Tt)&&(r.splice(s,0,new Ba(La(o.site,c,C(i-u)<Tt&&m-a>Tt?{x:u,y:C(e-u)<Tt?n:m}:C(a-m)<Tt&&h-i>Tt?{x:C(n-m)<Tt?e:h,y:m}:C(i-h)<Tt&&a-p>Tt?{x:h,y:C(e-h)<Tt?n:p}:C(a-p)<Tt&&i-u>Tt?{x:C(n-p)<Tt?e:u,y:p}:null),o.site,null)),++l)}(e));var s={cells:pa,edges:ha};return ma=fa=ha=pa=null,s}function Va(t,e){return e.y-t.y||e.x-t.x}Ia.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ta),e.length},Ba.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ra.prototype={insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=$a(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(a=i.R)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(Oa(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ua(this,i)):(a=i.L)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(Ua(this,n),n=(t=n).U),n.C=!1,i.C=!0,Oa(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,a=t.U,o=t.L,s=t.R;if(n=o?s?$a(s):o:s,a?a.L===t?a.L=n:a.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(a=n.U,n.U=t.U,t=n.R,a.L=t,n.R=s,s.U=n):(n.U=a,a=n,t=n.R)):(i=t.C,t=n),t&&(t.U=a),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,Oa(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ua(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,Oa(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,Ua(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Oa(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,Ua(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},o.geom.voronoi=function(t){var e=aa,n=oa,i=e,a=n,o=za;if(t)return s(t);function s(t){var e=new Array(t.length),n=o[0][0],i=o[0][1],a=o[1][0],s=o[1][1];return Ha(r(t),o).cells.forEach((function(o,r){var l=o.edges,d=o.site;(e[r]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):d.x>=n&&d.x<=a&&d.y>=i&&d.y<=s?[[n,s],[a,s],[a,i],[n,i]]:[]).point=t[r]})),e}function r(t){return t.map((function(t,e){return{x:Math.round(i(t,e)/Tt)*Tt,y:Math.round(a(t,e)/Tt)*Tt,i:e}}))}return s.links=function(t){return Ha(r(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},s.triangles=function(t){var e=[];return Ha(r(t)).cells.forEach((function(n,i){for(var a,o,s,r,l=n.site,d=n.edges.sort(Ta),c=-1,u=d.length,h=d[u-1].edge,p=h.l===l?h.r:h.l;++c<u;)h,a=p,p=(h=d[c].edge).l===l?h.r:h.l,i<a.i&&i<p.i&&(s=a,r=p,((o=l).x-r.x)*(s.y-o.y)-(o.x-s.x)*(r.y-o.y)<0)&&e.push([t[i],t[a.i],t[p.i]])})),e},s.x=function(t){return arguments.length?(i=fe(e=t),s):e},s.y=function(t){return arguments.length?(a=fe(n=t),s):n},s.clipExtent=function(t){return arguments.length?(o=null==t?za:t,s):o===za?null:o},s.size=function(t){return arguments.length?s.clipExtent(t&&[[0,0],t]):o===za?null:o&&o[1]},s};var za=[[-1e6,-1e6],[1e6,1e6]];function Wa(t){return t.x}function qa(t){return t.y}function Ga(t,e,n,i,a,o){if(!t(e,n,i,a,o)){var s=.5*(n+a),r=.5*(i+o),l=e.nodes;l[0]&&Ga(t,l[0],n,i,s,r),l[1]&&Ga(t,l[1],s,i,a,r),l[2]&&Ga(t,l[2],n,r,s,o),l[3]&&Ga(t,l[3],s,r,a,o)}}function Ya(t,e,n,i,a,o,s){var r,l=1/0;return function t(d,c,u,h,p){if(!(c>o||u>s||h<i||p<a)){if(m=d.point){var m,g=e-d.x,f=n-d.y,v=g*g+f*f;if(v<l){var b=Math.sqrt(l=v);i=e-b,a=n-b,o=e+b,s=n+b,r=m}}for(var y=d.nodes,w=.5*(c+h),_=.5*(u+p),C=(n>=_)<<1|e>=w,k=C+4;C<k;++C)if(d=y[3&C])switch(3&C){case 0:t(d,c,u,w,_);break;case 1:t(d,w,u,h,_);break;case 2:t(d,c,_,w,p);break;case 3:t(d,w,_,h,p)}}}(t,i,a,o,s),r}function Ka(t,e){t=o.rgb(t),e=o.rgb(e);var n=t.r,i=t.g,a=t.b,s=e.r-n,r=e.g-i,l=e.b-a;return function(t){return"#"+de(Math.round(n+s*t))+de(Math.round(i+r*t))+de(Math.round(a+l*t))}}function Ja(t,e){var n,i={},a={};for(n in t)n in e?i[n]=eo(t[n],e[n]):a[n]=t[n];for(n in e)n in t||(a[n]=e[n]);return function(t){for(n in i)a[n]=i[n](t);return a}}function Xa(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qa(t,e){var n,i,a,o=Za.lastIndex=to.lastIndex=0,s=-1,r=[],l=[];for(t+="",e+="";(n=Za.exec(t))&&(i=to.exec(e));)(a=i.index)>o&&(a=e.slice(o,a),r[s]?r[s]+=a:r[++s]=a),(n=n[0])===(i=i[0])?r[s]?r[s]+=i:r[++s]=i:(r[++s]=null,l.push({i:s,x:Xa(n,i)})),o=to.lastIndex;return o<e.length&&(a=e.slice(o),r[s]?r[s]+=a:r[++s]=a),r.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;i<e;++i)r[(n=l[i]).i]=n.x(t);return r.join("")})}o.geom.delaunay=function(t){return o.geom.voronoi().triangles(t)},o.geom.quadtree=function(t,e,n,i,a){var o,s=aa,r=oa;if(o=arguments.length)return s=Wa,r=qa,3===o&&(a=n,i=e,n=e=0),l(t);function l(t){var l,d,c,u,h,p,m,g,f,v=fe(s),b=fe(r);if(null!=e)p=e,m=n,g=i,f=a;else if(g=f=-(p=m=1/0),d=[],c=[],h=t.length,o)for(u=0;u<h;++u)(l=t[u]).x<p&&(p=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>f&&(f=l.y),d.push(l.x),c.push(l.y);else for(u=0;u<h;++u){var y=+v(l=t[u],u),w=+b(l,u);y<p&&(p=y),w<m&&(m=w),y>g&&(g=y),w>f&&(f=w),d.push(y),c.push(w)}var _=g-p,k=f-m;function S(t,e,n,i,a,o,s,r){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,d=t.y;if(null!=l)if(C(l-n)+C(d-i)<.01)x(t,e,n,i,a,o,s,r);else{var c=t.point;t.x=t.y=t.point=null,x(t,c,l,d,a,o,s,r),x(t,e,n,i,a,o,s,r)}else t.x=n,t.y=i,t.point=e}else x(t,e,n,i,a,o,s,r)}function x(t,e,n,i,a,o,s,r){var l=.5*(a+s),d=.5*(o+r),c=n>=l,u=i>=d,h=u<<1|c;t.leaf=!1,c?a=l:s=l,u?o=d:r=d,S(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,a,o,s,r)}_>k?f=m+_:g=p+k;var I={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){S(I,t,+v(t,++u),+b(t,u),p,m,g,f)},visit:function(t){Ga(t,I,p,m,g,f)},find:function(t){return Ya(I,t[0],t[1],p,m,g,f)}};if(u=-1,null==e){for(;++u<h;)S(I,t[u],d[u],c[u],p,m,g,f);--u}else t.forEach(I.add);return d=c=t=l=null,I}return l.x=function(t){return arguments.length?(s=t,l):s},l.y=function(t){return arguments.length?(r=t,l):r},l.extent=function(t){return arguments.length?(null==t?e=n=i=a=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],a=+t[1][1]),l):null==e?null:[[e,n],[i,a]]},l.size=function(t){return arguments.length?(null==t?e=n=i=a=null:(e=n=0,i=+t[0],a=+t[1]),l):null==e?null:[i-e,a-n]},l},o.interpolateRgb=Ka,o.interpolateObject=Ja,o.interpolateNumber=Xa,o.interpolateString=Qa;var Za=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,to=new RegExp(Za.source,"g");function eo(t,e){for(var n,i=o.interpolators.length;--i>=0&&!(n=o.interpolators[i](t,e)););return n}function no(t,e){var n,i=[],a=[],o=t.length,s=e.length,r=Math.min(t.length,e.length);for(n=0;n<r;++n)i.push(eo(t[n],e[n]));for(;n<o;++n)a[n]=t[n];for(;n<s;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=i[n](t);return a}}o.interpolate=eo,o.interpolators=[function(t,e){var n=typeof e;return("string"===n?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ka:Qa:e instanceof zt?Ka:Array.isArray(e)?no:"object"===n&&isNaN(e)?Ja:Xa)(t,e)}],o.interpolateArray=no;var io=function(){return L},ao=o.map({linear:io,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return co},cubic:function(){return uo},sin:function(){return po},exp:function(){return mo},circle:function(){return go},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/jt*Math.asin(1/t):(t=1,n=e/4);return function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*jt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return fo}}),oo=o.map({in:L,out:ro,"in-out":lo,"out-in":function(t){return lo(ro(t))}});function so(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function ro(t){return function(e){return 1-t(1-e)}}function lo(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function co(t){return t*t}function uo(t){return t*t*t}function ho(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function po(t){return 1-Math.cos(t*Pt)}function mo(t){return Math.pow(2,10*(t-1))}function go(t){return 1-Math.sqrt(1-t*t)}function fo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function vo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function bo(t){var e,n,i,a=[t.a,t.b],o=[t.c,t.d],s=wo(a),r=yo(a,o),l=wo(((e=o)[0]+=(i=-r)*(n=a)[0],e[1]+=i*n[1],e))||0;a[0]*o[1]<o[0]*a[1]&&(a[0]*=-1,a[1]*=-1,s*=-1,r*=-1),this.rotate=(s?Math.atan2(a[1],a[0]):Math.atan2(-o[0],o[1]))*Nt,this.translate=[t.e,t.f],this.scale=[s,l],this.skew=l?Math.atan2(r,l)*Nt:0}function yo(t,e){return t[0]*e[0]+t[1]*e[1]}function wo(t){var e=Math.sqrt(yo(t,t));return e&&(t[0]/=e,t[1]/=e),e}o.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=ao.get(n)||io,so((i=oo.get(i)||L)(n.apply(null,s.call(arguments,1))))},o.interpolateHcl=function(t,e){t=o.hcl(t),e=o.hcl(e);var n=t.h,i=t.c,a=t.l,s=e.h-n,r=e.c-i,l=e.l-a;isNaN(r)&&(r=0,i=isNaN(i)?e.c:i);isNaN(s)?(s=0,n=isNaN(n)?e.h:n):s>180?s-=360:s<-180&&(s+=360);return function(t){return Jt(n+s*t,i+r*t,a+l*t)+""}},o.interpolateHsl=function(t,e){t=o.hsl(t),e=o.hsl(e);var n=t.h,i=t.s,a=t.l,s=e.h-n,r=e.s-i,l=e.l-a;isNaN(r)&&(r=0,i=isNaN(i)?e.s:i);isNaN(s)?(s=0,n=isNaN(n)?e.h:n):s>180?s-=360:s<-180&&(s+=360);return function(t){return Gt(n+s*t,i+r*t,a+l*t)+""}},o.interpolateLab=function(t,e){t=o.lab(t),e=o.lab(e);var n=t.l,i=t.a,a=t.b,s=e.l-n,r=e.a-i,l=e.b-a;return function(t){return te(n+s*t,i+r*t,a+l*t)+""}},o.interpolateRound=vo,o.transform=function(t){var e=l.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new bo(n?n.matrix:_o)})(t)},bo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var _o={a:1,b:0,c:0,d:1,e:0,f:0};function Co(t,e){var n,i=[],a=[],s=o.transform(t),r=o.transform(e),l=s.translate,d=r.translate,c=s.rotate,u=r.rotate,h=s.skew,p=r.skew,m=s.scale,g=r.scale;return l[0]!=d[0]||l[1]!=d[1]?(i.push("translate(",null,",",null,")"),a.push({i:1,x:Xa(l[0],d[0])},{i:3,x:Xa(l[1],d[1])})):d[0]||d[1]?i.push("translate("+d+")"):i.push(""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),a.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:Xa(c,u)})):u&&i.push(i.pop()+"rotate("+u+")"),h!=p?a.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:Xa(h,p)}):p&&i.push(i.pop()+"skewX("+p+")"),m[0]!=g[0]||m[1]!=g[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),a.push({i:n-4,x:Xa(m[0],g[0])},{i:n-2,x:Xa(m[1],g[1])})):1==g[0]&&1==g[1]||i.push(i.pop()+"scale("+g+")"),n=a.length,function(t){for(var e,o=-1;++o<n;)i[(e=a[o]).i]=e.x(t);return i.join("")}}function ko(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function So(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function xo(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=Io(t),i=Io(e),a=n.pop(),o=i.pop(),s=null;for(;a===o;)s=a,a=n.pop(),o=i.pop();return s}(e,n),a=[e];e!==i;)e=e.parent,a.push(e);for(var o=a.length;n!==i;)a.splice(o,0,n),n=n.parent;return a}function Io(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function To(t){t.fixed|=2}function Ao(t){t.fixed&=-7}function jo(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Eo(t){t.fixed&=-5}o.interpolateTransform=Co,o.layout={},o.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(xo(t[n]));return e}},o.layout.chord=function(){var t,e,n,i,a,s,r,l={},d=0;function c(){var l,c,h,p,m,g={},f=[],v=o.range(i),b=[];for(t=[],e=[],l=0,p=-1;++p<i;){for(c=0,m=-1;++m<i;)c+=n[p][m];f.push(c),b.push(o.range(i)),l+=c}for(a&&v.sort((function(t,e){return a(f[t],f[e])})),s&&b.forEach((function(t,e){t.sort((function(t,i){return s(n[e][t],n[e][i])}))})),l=(jt-d*i)/l,c=0,p=-1;++p<i;){for(h=c,m=-1;++m<i;){var y=v[p],w=b[y][m],_=n[y][w],C=c,k=c+=_*l;g[y+"-"+w]={index:y,subindex:w,startAngle:C,endAngle:k,value:_}}e[y]={index:y,startAngle:h,endAngle:c,value:(c-h)/l},c+=d}for(p=-1;++p<i;)for(m=p-1;++m<i;){var S=g[p+"-"+m],x=g[m+"-"+p];(S.value||x.value)&&t.push(S.value<x.value?{source:x,target:S}:{source:S,target:x})}r&&u()}function u(){t.sort((function(t,e){return r((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(a){return arguments.length?(i=(n=a)&&n.length,t=e=null,l):n},l.padding=function(n){return arguments.length?(d=n,t=e=null,l):d},l.sortGroups=function(n){return arguments.length?(a=n,t=e=null,l):a},l.sortSubgroups=function(e){return arguments.length?(s=e,t=null,l):s},l.sortChords=function(e){return arguments.length?(r=e,t&&u(),l):r},l.chords=function(){return t||c(),t},l.groups=function(){return e||c(),e},l},o.layout.force=function(){var t,e,n,i,a,s={},r=o.dispatch("start","tick","end"),l=[1,1],d=.9,c=Po,u=Do,h=-30,p=No,m=.1,g=.64,f=[],v=[];function b(t){return function(e,n,i,a){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,r=a-n,l=o*o+s*s;if(r*r/g<l){if(l<p){var d=e.charge/l;t.px-=o*d,t.py-=s*d}return!0}if(e.point&&l&&l<p){d=e.pointCharge/l;t.px-=o*d,t.py-=s*d}}return!e.charge}}function y(t){t.px=o.event.x,t.py=o.event.y,s.resume()}return s.tick=function(){if((e*=.99)<.005)return r.end({type:"end",alpha:e=0}),!0;var t,s,c,u,p,g,y,w,_,C=f.length,k=v.length;for(s=0;s<k;++s)u=(c=v[s]).source,(g=(w=(p=c.target).x-u.x)*w+(_=p.y-u.y)*_)&&(w*=g=e*i[s]*((g=Math.sqrt(g))-n[s])/g,_*=g,p.x-=w*(y=u.weight/(p.weight+u.weight)),p.y-=_*y,u.x+=w*(y=1-y),u.y+=_*y);if((y=e*m)&&(w=l[0]/2,_=l[1]/2,s=-1,y))for(;++s<C;)(c=f[s]).x+=(w-c.x)*y,c.y+=(_-c.y)*y;if(h)for(!function t(e,n,i){var a=0,o=0;if(e.charge=0,!e.leaf)for(var s,r=e.nodes,l=r.length,d=-1;++d<l;)null!=(s=r[d])&&(t(s,n,i),e.charge+=s.charge,a+=s.charge*s.cx,o+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*i[e.point.index];e.charge+=e.pointCharge=c,a+=c*e.point.x,o+=c*e.point.y}e.cx=a/e.charge,e.cy=o/e.charge}(t=o.geom.quadtree(f),e,a),s=-1;++s<C;)(c=f[s]).fixed||t.visit(b(c));for(s=-1;++s<C;)(c=f[s]).fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*d,c.y-=(c.py-(c.py=c.y))*d);r.tick({type:"tick",alpha:e})},s.nodes=function(t){return arguments.length?(f=t,s):f},s.links=function(t){return arguments.length?(v=t,s):v},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(u="function"==typeof t?t:+t,s):u},s.friction=function(t){return arguments.length?(d=+t,s):d},s.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(m=+t,s):m},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,e?e=t>0?t:0:t>0&&(r.start({type:"start",alpha:e=t}),o.timer(s.tick)),s):e},s.start=function(){var t,e,o,r=f.length,d=v.length,p=l[0],m=l[1];for(t=0;t<r;++t)(o=f[t]).index=t,o.weight=0;for(t=0;t<d;++t)"number"==typeof(o=v[t]).source&&(o.source=f[o.source]),"number"==typeof o.target&&(o.target=f[o.target]),++o.source.weight,++o.target.weight;for(t=0;t<r;++t)o=f[t],isNaN(o.x)&&(o.x=g("x",p)),isNaN(o.y)&&(o.y=g("y",m)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(n=[],"function"==typeof c)for(t=0;t<d;++t)n[t]=+c.call(this,v[t],t);else for(t=0;t<d;++t)n[t]=c;if(i=[],"function"==typeof u)for(t=0;t<d;++t)i[t]=+u.call(this,v[t],t);else for(t=0;t<d;++t)i[t]=u;if(a=[],"function"==typeof h)for(t=0;t<r;++t)a[t]=+h.call(this,f[t],t);else for(t=0;t<r;++t)a[t]=h;function g(n,i){if(!e){for(e=new Array(r),l=0;l<r;++l)e[l]=[];for(l=0;l<d;++l){var a=v[l];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=o.behavior.drag().origin(L).on("dragstart.force",To).on("drag.force",y).on("dragend.force",Ao)),!arguments.length)return t;this.on("mouseover.force",jo).on("mouseout.force",Eo).call(t)},o.rebind(s,r,"on")};var Po=20,Do=1,No=1/0;function Lo(t,e){return o.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Uo,t}function Mo(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(a=t.children)&&(i=a.length))for(var i,a;--i>=0;)n.push(a[i])}function Bo(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(a=o.length))for(var a,o,s=-1;++s<a;)n.push(o[s]);for(;null!=(t=i.pop());)e(t)}function Ro(t){return t.children}function Fo(t){return t.value}function Oo(t,e){return e.value-t.value}function Uo(t){return o.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}o.layout.hierarchy=function(){var t=Oo,e=Ro,n=Fo;function i(a){var o,s=[a],r=[];for(a.depth=0;null!=(o=s.pop());)if(r.push(o),(d=e.call(i,o,o.depth))&&(l=d.length)){for(var l,d,c;--l>=0;)s.push(c=d[l]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=d}else n&&(o.value=+n.call(i,o,o.depth)||0),delete o.children;return Bo(a,(function(e){var i,a;t&&(i=e.children)&&i.sort(t),n&&(a=e.parent)&&(a.value+=e.value)})),r}return i.sort=function(e){return arguments.length?(t=e,i):t},i.children=function(t){return arguments.length?(e=t,i):e},i.value=function(t){return arguments.length?(n=t,i):n},i.revalue=function(t){return n&&(Mo(t,(function(t){t.children&&(t.value=0)})),Bo(t,(function(t){var e;t.children||(t.value=+n.call(i,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},i},o.layout.partition=function(){var t=o.layout.hierarchy(),e=[1,1];function n(n,i){var a=t.call(this,n,i);return function t(e,n,i,a){var o=e.children;if(e.x=n,e.y=e.depth*a,e.dx=i,e.dy=a,o&&(s=o.length)){var s,r,l,d=-1;for(i=e.value?i/e.value:0;++d<s;)t(r=o[d],n,l=r.value*i,a),n+=l}}(a[0],0,e[0],e[1]/function t(e){var n=e.children,i=0;if(n&&(a=n.length))for(var a,o=-1;++o<a;)i=Math.max(i,t(n[o]));return 1+i}(a[0])),a}return n.size=function(t){return arguments.length?(e=t,n):e},Lo(n,t)},o.layout.pie=function(){var t=Number,e=$o,n=0,i=jt,a=0;function s(r){var l,d=r.length,c=r.map((function(e,n){return+t.call(s,e,n)})),u=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof i?i.apply(this,arguments):i)-u,p=Math.min(Math.abs(h)/d,+("function"==typeof a?a.apply(this,arguments):a)),m=p*(h<0?-1:1),g=(h-d*m)/o.sum(c),f=o.range(d),v=[];return null!=e&&f.sort(e===$o?function(t,e){return c[e]-c[t]}:function(t,n){return e(r[t],r[n])}),f.forEach((function(t){v[t]={data:r[t],value:l=c[t],startAngle:u,endAngle:u+=l*g+m,padAngle:p}})),v}return s.value=function(e){return arguments.length?(t=e,s):t},s.sort=function(t){return arguments.length?(e=t,s):e},s.startAngle=function(t){return arguments.length?(n=t,s):n},s.endAngle=function(t){return arguments.length?(i=t,s):i},s.padAngle=function(t){return arguments.length?(a=t,s):a},s};var $o={};function Ho(t){return t.x}function Vo(t){return t.y}function zo(t,e,n){t.y0=e,t.y=n}o.layout.stack=function(){var t=L,e=Go,n=Yo,i=zo,a=Ho,s=Vo;function r(l,d){if(!(p=l.length))return l;var c=l.map((function(e,n){return t.call(r,e,n)})),u=c.map((function(t){return t.map((function(t,e){return[a.call(r,t,e),s.call(r,t,e)]}))})),h=e.call(r,u,d);c=o.permute(c,h),u=o.permute(u,h);var p,m,g,f,v=n.call(r,u,d),b=c[0].length;for(g=0;g<b;++g)for(i.call(r,c[0][g],f=v[g],u[0][g][1]),m=1;m<p;++m)i.call(r,c[m][g],f+=u[m-1][g][1],u[m][g][1]);return l}return r.values=function(e){return arguments.length?(t=e,r):t},r.order=function(t){return arguments.length?(e="function"==typeof t?t:Wo.get(t)||Go,r):e},r.offset=function(t){return arguments.length?(n="function"==typeof t?t:qo.get(t)||Yo,r):n},r.x=function(t){return arguments.length?(a=t,r):a},r.y=function(t){return arguments.length?(s=t,r):s},r.out=function(t){return arguments.length?(i=t,r):i},r};var Wo=o.map({"inside-out":function(t){var e,n,i=t.length,a=t.map(Ko),s=t.map(Jo),r=o.range(i).sort((function(t,e){return a[t]-a[e]})),l=0,d=0,c=[],u=[];for(e=0;e<i;++e)n=r[e],l<d?(l+=s[n],c.push(n)):(d+=s[n],u.push(n));return u.reverse().concat(c)},reverse:function(t){return o.range(t.length).reverse()},default:Go}),qo=o.map({silhouette:function(t){var e,n,i,a=t.length,o=t[0].length,s=[],r=0,l=[];for(n=0;n<o;++n){for(e=0,i=0;e<a;e++)i+=t[e][n][1];i>r&&(r=i),s.push(i)}for(n=0;n<o;++n)l[n]=(r-s[n])/2;return l},wiggle:function(t){var e,n,i,a,o,s,r,l,d,c=t.length,u=t[0],h=u.length,p=[];for(p[0]=l=d=0,n=1;n<h;++n){for(e=0,a=0;e<c;++e)a+=t[e][n][1];for(e=0,o=0,r=u[n][0]-u[n-1][0];e<c;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*r);i<e;++i)s+=(t[i][n][1]-t[i][n-1][1])/r;o+=s*t[e][n][1]}p[n]=l-=a?o/a*r:0,l<d&&(d=l)}for(n=0;n<h;++n)p[n]-=d;return p},expand:function(t){var e,n,i,a=t.length,o=t[0].length,s=1/a,r=[];for(n=0;n<o;++n){for(e=0,i=0;e<a;e++)i+=t[e][n][1];if(i)for(e=0;e<a;e++)t[e][n][1]/=i;else for(e=0;e<a;e++)t[e][n][1]=s}for(n=0;n<o;++n)r[n]=0;return r},zero:Yo});function Go(t){return o.range(t.length)}function Yo(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Ko(t){for(var e,n=1,i=0,a=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>a&&(i=n,a=e);return i}function Jo(t){return t.reduce(Xo,0)}function Xo(t,e){return t+e[1]}function Qo(t,e){return Zo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Zo(t,e){for(var n=-1,i=+t[0],a=(t[1]-i)/e,o=[];++n<=e;)o[n]=a*n+i;return o}function ts(t){return[o.min(t),o.max(t)]}function es(t,e){return t.value-e.value}function ns(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function is(t,e){t._pack_next=e,e._pack_prev=t}function as(t,e){var n=e.x-t.x,i=e.y-t.y,a=t.r+e.r;return.999*a*a>n*n+i*i}function os(t){if((e=t.children)&&(l=e.length)){var e,n,i,a,o,s,r,l,d=1/0,c=-1/0,u=1/0,h=-1/0;if(e.forEach(ss),(n=e[0]).x=-n.r,n.y=0,y(n),l>1&&((i=e[1]).x=i.r,i.y=0,y(i),l>2))for(ls(n,i,a=e[2]),y(a),ns(n,a),n._pack_prev=a,ns(a,i),i=n._pack_next,o=3;o<l;o++){ls(n,i,a=e[o]);var p=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(as(s,a)){p=1;break}if(1==p)for(r=n._pack_prev;r!==s._pack_prev&&!as(r,a);r=r._pack_prev,g++);p?(m<g||m==g&&i.r<n.r?is(n,i=s):is(n=r,i),o--):(ns(n,a),i=a,y(a))}var f=(d+c)/2,v=(u+h)/2,b=0;for(o=0;o<l;o++)(a=e[o]).x-=f,a.y-=v,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=b,e.forEach(rs)}function y(t){d=Math.min(t.x-t.r,d),c=Math.max(t.x+t.r,c),u=Math.min(t.y-t.r,u),h=Math.max(t.y+t.r,h)}}function ss(t){t._pack_next=t._pack_prev=t}function rs(t){delete t._pack_next,delete t._pack_prev}function ls(t,e,n){var i=t.r+n.r,a=e.x-t.x,o=e.y-t.y;if(i&&(a||o)){var s=e.r+n.r,r=a*a+o*o,l=.5+((i*=i)-(s*=s))/(2*r),d=Math.sqrt(Math.max(0,2*s*(i+r)-(i-=r)*i-s*s))/(2*r);n.x=t.x+l*a+d*o,n.y=t.y+l*o-d*a}else n.x=t.x+i,n.y=t.y}function ds(t,e){return t.parent==e.parent?1:2}function cs(t){var e=t.children;return e.length?e[0]:t.t}function us(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function hs(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function ps(t,e,n){return t.a.parent===e.parent?t.a:n}function ms(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function gs(t,e){var n=t.x+e[3],i=t.y+e[0],a=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return a<0&&(n+=a/2,a=0),o<0&&(i+=o/2,o=0),{x:n,y:i,dx:a,dy:o}}function fs(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function vs(t){return t.rangeExtent?t.rangeExtent():fs(t.range())}function bs(t,e,n,i){var a=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(a(t))}}function ys(t,e){var n,i=0,a=t.length-1,o=t[i],s=t[a];return s<o&&(n=i,i=a,a=n,n=o,o=s,s=n),t[i]=e.floor(o),t[a]=e.ceil(s),t}o.layout.histogram=function(){var t=!0,e=Number,n=ts,i=Qo;function a(a,s){for(var r,l,d=[],c=a.map(e,this),u=n.call(this,c,s),h=i.call(this,u,c,s),p=(s=-1,c.length),m=h.length-1,g=t?1:1/p;++s<m;)(r=d[s]=[]).dx=h[s+1]-(r.x=h[s]),r.y=0;if(m>0)for(s=-1;++s<p;)(l=c[s])>=u[0]&&l<=u[1]&&((r=d[o.bisect(h,l,1,m)-1]).y+=g,r.push(a[s]));return d}return a.value=function(t){return arguments.length?(e=t,a):e},a.range=function(t){return arguments.length?(n=fe(t),a):n},a.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Zo(e,t)}:fe(t),a):i},a.frequency=function(e){return arguments.length?(t=!!e,a):t},a},o.layout.pack=function(){var t,e=o.layout.hierarchy().sort(es),n=0,i=[1,1];function a(a,o){var s=e.call(this,a,o),r=s[0],l=i[0],d=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(r.x=r.y=0,Bo(r,(function(t){t.r=+c(t.value)})),Bo(r,os),n){var u=n*(t?1:Math.max(2*r.r/l,2*r.r/d))/2;Bo(r,(function(t){t.r+=u})),Bo(r,os),Bo(r,(function(t){t.r-=u}))}return function t(e,n,i,a){var o=e.children;if(e.x=n+=a*e.x,e.y=i+=a*e.y,e.r*=a,o)for(var s=-1,r=o.length;++s<r;)t(o[s],n,i,a)}(r,l/2,d/2,t?1:1/Math.max(2*r.r/l,2*r.r/d)),s}return a.size=function(t){return arguments.length?(i=t,a):i},a.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,a):t},a.padding=function(t){return arguments.length?(n=+t,a):n},Lo(a,e)},o.layout.tree=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ds,n=[1,1],i=null;function a(a,o){var d=t.call(this,a,o),c=d[0],u=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var a,o=e.children,s=0,r=o.length;s<r;++s)i.push((o[s]=a={_:o[s],parent:e,children:(a=o[s].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=a);return n.children[0]}(c);if(Bo(u,s),u.parent.m=-u.z,Mo(u,r),i)Mo(c,l);else{var h=c,p=c,m=c;Mo(c,(function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>m.depth&&(m=t)}));var g=e(h,p)/2-h.x,f=n[0]/(p.x+e(p,h)/2+g),v=n[1]/(m.depth||1);Mo(c,(function(t){t.x=(t.x+g)*f,t.y=t.depth*v}))}return d}function s(t){var n=t.children,i=t.parent.children,a=t.i?i[t.i-1]:null;if(n.length){!function(t){var e,n=0,i=0,a=t.children,o=a.length;for(;--o>=0;)(e=a[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-o):t.z=o}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,n,i){if(n){for(var a,o=t,s=t,r=n,l=o.parent.children[0],d=o.m,c=s.m,u=r.m,h=l.m;r=us(r),o=cs(o),r&&o;)l=cs(l),(s=us(s)).a=t,(a=r.z+u-o.z-d+e(r._,o._))>0&&(hs(ps(r,t,i),t,a),d+=a,c+=a),u+=r.m,d+=o.m,h+=l.m,c+=s.m;r&&!us(s)&&(s.t=r,s.m+=u-c),o&&!cs(l)&&(l.t=o,l.m+=d-h,i=t)}return i}(t,a,t.parent.A||i[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(t){return arguments.length?(i=null==(n=t)?l:null,a):i?null:n},a.nodeSize=function(t){return arguments.length?(i=null==(n=t)?null:l,a):i?n:null},Lo(a,t)},o.layout.cluster=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ds,n=[1,1],i=!1;function a(a,s){var r,l=t.call(this,a,s),d=l[0],c=0;Bo(d,(function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(n),t.y=function(t){return 1+o.max(t,(function(t){return t.y}))}(n)):(t.x=r?c+=e(t,r):0,t.y=0,r=t)}));var u=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(d),h=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(d),p=u.x-e(u,h)/2,m=h.x+e(h,u)/2;return Bo(d,i?function(t){t.x=(t.x-d.x)*n[0],t.y=(d.y-t.y)*n[1]}:function(t){t.x=(t.x-p)/(m-p)*n[0],t.y=(1-(d.y?t.y/d.y:1))*n[1]}),l}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(t){return arguments.length?(i=null==(n=t),a):i?null:n},a.nodeSize=function(t){return arguments.length?(i=null!=(n=t),a):i?n:null},Lo(a,t)},o.layout.treemap=function(){var t,e=o.layout.hierarchy(),n=Math.round,i=[1,1],a=null,s=ms,r=!1,l="squarify",d=.5*(1+Math.sqrt(5));function c(t,e){for(var n,i,a=-1,o=t.length;++a<o;)i=(n=t[a]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function u(t){var e=t.children;if(e&&e.length){var n,i,a,o=s(t),r=[],d=e.slice(),h=1/0,g="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(d,o.dx*o.dy/t.value),r.area=0;(a=d.length)>0;)r.push(n=d[a-1]),r.area+=n.area,"squarify"!==l||(i=p(r,g))<=h?(d.pop(),h=i):(r.area-=r.pop().area,m(r,g,o,!1),g=Math.min(o.dx,o.dy),r.length=r.area=0,h=1/0);r.length&&(m(r,g,o,!0),r.length=r.area=0),e.forEach(u)}}function h(t){var e=t.children;if(e&&e.length){var n,i=s(t),a=e.slice(),o=[];for(c(a,i.dx*i.dy/t.value),o.area=0;n=a.pop();)o.push(n),o.area+=n.area,null!=n.z&&(m(o,n.z?i.dx:i.dy,i,!a.length),o.length=o.area=0);e.forEach(h)}}function p(t,e){for(var n,i=t.area,a=0,o=1/0,s=-1,r=t.length;++s<r;)(n=t[s].area)&&(n<o&&(o=n),n>a&&(a=n));return e*=e,(i*=i)?Math.max(e*a*d/i,i/(e*o*d)):1/0}function m(t,e,i,a){var o,s=-1,r=t.length,l=i.x,d=i.y,c=e?n(t.area/e):0;if(e==i.dx){for((a||c>i.dy)&&(c=i.dy);++s<r;)(o=t[s]).x=l,o.y=d,o.dy=c,l+=o.dx=Math.min(i.x+i.dx-l,c?n(o.area/c):0);o.z=!0,o.dx+=i.x+i.dx-l,i.y+=c,i.dy-=c}else{for((a||c>i.dx)&&(c=i.dx);++s<r;)(o=t[s]).x=l,o.y=d,o.dx=c,d+=o.dy=Math.min(i.y+i.dy-d,c?n(o.area/c):0);o.z=!1,o.dy+=i.y+i.dy-d,i.x+=c,i.dx-=c}}function g(n){var a=t||e(n),o=a[0];return o.x=0,o.y=0,o.dx=i[0],o.dy=i[1],t&&e.revalue(o),c([o],o.dx*o.dy/o.value),(t?h:u)(o),r&&(t=a),a}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return a;function e(e){var n=t.call(g,e,e.depth);return null==n?ms(e):gs(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return gs(e,t)}var i;return s=null==(a=t)?ms:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(e){return arguments.length?(r=e,t=null,g):r},g.ratio=function(t){return arguments.length?(d=t,g):d},g.mode=function(t){return arguments.length?(l=t+"",g):l},Lo(g,e)},o.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,i,a;do{a=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!a||a>1);return t+e*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=o.random.normal.apply(o,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=o.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},o.scale={};var ws={floor:L,ceil:L};function _s(t,e,n,i){var a=[],s=[],r=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<=l;)a.push(n(t[r-1],t[r])),s.push(i(e[r-1],e[r]));return function(e){var n=o.bisect(t,e,1,l)-1;return s[n](a[n](e))}}function Cs(t,e){return o.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ks(t,e){return ys(t,(n=Ss(t,e)[2])?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ws);var n}function Ss(t,e){null==e&&(e=10);var n=fs(t),i=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*a;return o<=.15?a*=10:o<=.35?a*=5:o<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function xs(t,e){return o.range.apply(o,Ss(t,e))}function Is(t,e,n){var i=Ss(t,e);if(n){var a=Pe.exec(n);if(a.shift(),"s"===a[8]){var s=o.formatPrefix(Math.max(C(i[0]),C(i[1])));return a[7]||(a[7]="."+As(s.scale(i[2]))),a[8]="f",n=o.format(a.join("")),function(t){return n(s.scale(t))+s.symbol}}a[7]||(a[7]="."+function(t,e){var n=As(e[2]);return t in Ts?Math.abs(n-As(Math.max(C(e[0]),C(e[1]))))+ +("e"!==t):n-2*("%"===t)}(a[8],i)),n=a.join("")}else n=",."+As(i[2])+"f";return o.format(n)}o.scale.linear=function(){return function t(e,n,i,a){var o,s;function r(){var t=Math.min(e.length,n.length)>2?_s:bs,r=a?So:ko;return o=t(e,n,r,i),s=t(n,e,r,eo),l}function l(t){return o(t)}return l.invert=function(t){return s(t)},l.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},l.range=function(t){return arguments.length?(n=t,r()):n},l.rangeRound=function(t){return l.range(t).interpolate(vo)},l.clamp=function(t){return arguments.length?(a=t,r()):a},l.interpolate=function(t){return arguments.length?(i=t,r()):i},l.ticks=function(t){return xs(e,t)},l.tickFormat=function(t,n){return Is(e,t,n)},l.nice=function(t){return ks(e,t),r()},l.copy=function(){return t(e,n,i,a)},r()}([0,1],[0,1],eo,!1)};var Ts={s:1,g:1,p:1,r:1,e:1};function As(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}o.scale.log=function(){return function t(e,n,i,a){function s(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function r(t){return i?Math.pow(n,t):-Math.pow(n,-t)}function l(t){return e(s(t))}return l.invert=function(t){return r(e.invert(t))},l.domain=function(t){return arguments.length?(i=t[0]>=0,e.domain((a=t.map(Number)).map(s)),l):a},l.base=function(t){return arguments.length?(n=+t,e.domain(a.map(s)),l):n},l.nice=function(){var t=ys(a.map(s),i?Math:Es);return e.domain(t),a=t.map(r),l},l.ticks=function(){var t=fs(a),e=[],o=t[0],l=t[1],d=Math.floor(s(o)),c=Math.ceil(s(l)),u=n%1?2:n;if(isFinite(c-d)){if(i){for(;d<c;d++)for(var h=1;h<u;h++)e.push(r(d)*h);e.push(r(d))}else for(e.push(r(d));d++<c;)for(h=u-1;h>0;h--)e.push(r(d)*h);for(d=0;e[d]<o;d++);for(c=e.length;e[c-1]>l;c--);e=e.slice(d,c)}return e},l.tickFormat=function(t,e){if(!arguments.length)return js;arguments.length<2?e=js:"function"!=typeof e&&(e=o.format(e));var n,a=Math.max(.1,t/l.ticks().length),d=i?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/r(d(s(t)+n))<=a?e(t):""}},l.copy=function(){return t(e.copy(),n,i,a)},Cs(l,e)}(o.scale.linear().domain([0,1]),10,!0,[1,10])};var js=o.format(".0e"),Es={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Ps(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}o.scale.pow=function(){return function t(e,n,i){var a=Ps(n),o=Ps(1/n);function s(t){return e(a(t))}return s.invert=function(t){return o(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(a)),s):i},s.ticks=function(t){return xs(i,t)},s.tickFormat=function(t,e){return Is(i,t,e)},s.nice=function(t){return s.domain(ks(i,t))},s.exponent=function(t){return arguments.length?(a=Ps(n=t),o=Ps(1/n),e.domain(i.map(a)),s):n},s.copy=function(){return t(e.copy(),n,i)},Cs(s,e)}(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return function t(e,n){var i,a,s;function r(t){return a[((i.get(t)||("range"===n.t?i.set(t,e.push(t)):NaN))-1)%a.length]}function l(t,n){return o.range(e.length).map((function(e){return t+n*e}))}return r.domain=function(t){if(!arguments.length)return e;e=[],i=new x;for(var a,o=-1,s=t.length;++o<s;)i.has(a=t[o])||i.set(a,e.push(a));return r[n.t].apply(r,n.a)},r.range=function(t){return arguments.length?(a=t,s=0,n={t:"range",a:arguments},r):a},r.rangePoints=function(t,i){arguments.length<2&&(i=0);var o=t[0],d=t[1],c=e.length<2?(o=(o+d)/2,0):(d-o)/(e.length-1+i);return a=l(o+c*i/2,c),s=0,n={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(t,i){arguments.length<2&&(i=0);var o=t[0],d=t[1],c=e.length<2?(o=d=Math.round((o+d)/2),0):(d-o)/(e.length-1+i)|0;return a=l(o+Math.round(c*i/2+(d-o-(e.length-1+i)*c)/2),c),s=0,n={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(t,i,o){arguments.length<2&&(i=0),arguments.length<3&&(o=i);var d=t[1]<t[0],c=t[d-0],u=t[1-d],h=(u-c)/(e.length-i+2*o);return a=l(c+h*o,h),d&&a.reverse(),s=h*(1-i),n={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(t,i,o){arguments.length<2&&(i=0),arguments.length<3&&(o=i);var d=t[1]<t[0],c=t[d-0],u=t[1-d],h=Math.floor((u-c)/(e.length-i+2*o));return a=l(c+Math.round((u-c-(e.length-i)*h)/2),h),d&&a.reverse(),s=Math.round(h*(1-i)),n={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return s},r.rangeExtent=function(){return fs(n.a[0])},r.copy=function(){return t(e,n)},r.domain(e)}([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Ds)},o.scale.category20=function(){return o.scale.ordinal().range(Ns)},o.scale.category20b=function(){return o.scale.ordinal().range(Ls)},o.scale.category20c=function(){return o.scale.ordinal().range(Ms)};var Ds=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(re),Ns=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(re),Ls=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(re),Ms=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(re);function Bs(){return 0}o.scale.quantile=function(){return function t(e,n){var i;function a(){var t=0,a=n.length;for(i=[];++t<a;)i[t-1]=o.quantile(e,t/a);return s}function s(t){if(!isNaN(t=+t))return n[o.bisect(i,t)]}return s.domain=function(t){return arguments.length?(e=t.map(v).filter(b).sort(f),a()):e},s.range=function(t){return arguments.length?(n=t,a()):n},s.quantiles=function(){return i},s.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]},s.copy=function(){return t(e,n)},a()}([],[])},o.scale.quantize=function(){return function t(e,n,i){var a,o;function s(t){return i[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function r(){return a=i.length/(n-e),o=i.length-1,s}return s.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],r()):[e,n]},s.range=function(t){return arguments.length?(i=t,r()):i},s.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/a+e,t+1/a]},s.copy=function(){return t(e,n,i)},r()}(0,1,[0,1])},o.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[o.bisect(e,t)]}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=t,i):n},i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},i.copy=function(){return t(e,n)},i}([.5],[0,1])},o.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return xs(e,t)},n.tickFormat=function(t,n){return Is(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},o.svg={},o.svg.arc=function(){var t=Fs,e=Os,n=Bs,i=Rs,a=Us,o=$s,s=Hs;function r(){var r=Math.max(0,+t.apply(this,arguments)),d=Math.max(0,+e.apply(this,arguments)),c=a.apply(this,arguments)-Pt,u=o.apply(this,arguments)-Pt,h=Math.abs(u-c),p=c>u?0:1;if(d<r&&(m=d,d=r,r=m),h>=Et)return l(d,p)+(r?l(r,1-p):"")+"Z";var m,g,f,v,b,y,w,_,C,k,S,x,I=0,T=0,A=[];if((v=(+s.apply(this,arguments)||0)/2)&&(f=i===Rs?Math.sqrt(r*r+d*d):+i.apply(this,arguments),p||(T*=-1),d&&(T=Rt(f/d*Math.sin(v))),r&&(I=Rt(f/r*Math.sin(v)))),d){b=d*Math.cos(c+T),y=d*Math.sin(c+T),w=d*Math.cos(u-T),_=d*Math.sin(u-T);var j=Math.abs(u-c-2*T)<=At?0:1;if(T&&Vs(b,y,w,_)===p^j){var E=(c+u)/2;b=d*Math.cos(E),y=d*Math.sin(E),w=_=null}}else b=y=0;if(r){C=r*Math.cos(u-I),k=r*Math.sin(u-I),S=r*Math.cos(c+I),x=r*Math.sin(c+I);var P=Math.abs(c-u+2*I)<=At?0:1;if(I&&Vs(C,k,S,x)===1-p^P){var D=(c+u)/2;C=r*Math.cos(D),k=r*Math.sin(D),S=x=null}}else C=k=0;if((m=Math.min(Math.abs(d-r)/2,+n.apply(this,arguments)))>.001){g=r<d^p?0:1;var N=null==S?[C,k]:null==w?[b,y]:ca([b,y],[S,x],[w,_],[C,k]),L=b-N[0],M=y-N[1],B=w-N[0],R=_-N[1],F=1/Math.sin(Math.acos((L*B+M*R)/(Math.sqrt(L*L+M*M)*Math.sqrt(B*B+R*R)))/2),O=Math.sqrt(N[0]*N[0]+N[1]*N[1]);if(null!=w){var U=Math.min(m,(d-O)/(F+1)),$=zs(null==S?[C,k]:[S,x],[b,y],d,U,p),H=zs([w,_],[C,k],d,U,p);m===U?A.push("M",$[0],"A",U,",",U," 0 0,",g," ",$[1],"A",d,",",d," 0 ",1-p^Vs($[1][0],$[1][1],H[1][0],H[1][1]),",",p," ",H[1],"A",U,",",U," 0 0,",g," ",H[0]):A.push("M",$[0],"A",U,",",U," 0 1,",g," ",H[0])}else A.push("M",b,",",y);if(null!=S){var V=Math.min(m,(r-O)/(F-1)),z=zs([b,y],[S,x],r,-V,p),W=zs([C,k],null==w?[b,y]:[w,_],r,-V,p);m===V?A.push("L",W[0],"A",V,",",V," 0 0,",g," ",W[1],"A",r,",",r," 0 ",p^Vs(W[1][0],W[1][1],z[1][0],z[1][1]),",",1-p," ",z[1],"A",V,",",V," 0 0,",g," ",z[0]):A.push("L",W[0],"A",V,",",V," 0 0,",g," ",z[0])}else A.push("L",C,",",k)}else A.push("M",b,",",y),null!=w&&A.push("A",d,",",d," 0 ",j,",",p," ",w,",",_),A.push("L",C,",",k),null!=S&&A.push("A",r,",",r," 0 ",P,",",1-p," ",S,",",x);return A.push("Z"),A.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return r.innerRadius=function(e){return arguments.length?(t=fe(e),r):t},r.outerRadius=function(t){return arguments.length?(e=fe(t),r):e},r.cornerRadius=function(t){return arguments.length?(n=fe(t),r):n},r.padRadius=function(t){return arguments.length?(i=t==Rs?Rs:fe(t),r):i},r.startAngle=function(t){return arguments.length?(a=fe(t),r):a},r.endAngle=function(t){return arguments.length?(o=fe(t),r):o},r.padAngle=function(t){return arguments.length?(s=fe(t),r):s},r.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Pt;return[Math.cos(i)*n,Math.sin(i)*n]},r};var Rs="auto";function Fs(t){return t.innerRadius}function Os(t){return t.outerRadius}function Us(t){return t.startAngle}function $s(t){return t.endAngle}function Hs(t){return t&&t.padAngle}function Vs(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function zs(t,e,n,i,a){var o=t[0]-e[0],s=t[1]-e[1],r=(a?i:-i)/Math.sqrt(o*o+s*s),l=r*s,d=-r*o,c=t[0]+l,u=t[1]+d,h=e[0]+l,p=e[1]+d,m=(c+h)/2,g=(u+p)/2,f=h-c,v=p-u,b=f*f+v*v,y=n-i,w=c*p-h*u,_=(v<0?-1:1)*Math.sqrt(y*y*b-w*w),C=(w*v-f*_)/b,k=(-w*f-v*_)/b,S=(w*v+f*_)/b,x=(-w*f+v*_)/b,I=C-m,T=k-g,A=S-m,j=x-g;return I*I+T*T>A*A+j*j&&(C=S,k=x),[[C-l,k-d],[C*n/y,k*n/y]]}function Ws(t){var e=aa,n=oa,i=Kn,a=Gs,o=a.key,s=.7;function r(o){var r,l=[],d=[],c=-1,u=o.length,h=fe(e),p=fe(n);function m(){l.push("M",a(t(d),s))}for(;++c<u;)i.call(this,r=o[c],c)?d.push([+h.call(this,r,c),+p.call(this,r,c)]):d.length&&(m(),d=[]);return d.length&&m(),l.length?l.join(""):null}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r.defined=function(t){return arguments.length?(i=t,r):i},r.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=qs.get(t)||Gs).key,r):o},r.tension=function(t){return arguments.length?(s=t,r):s},r}o.svg.line=function(){return Ws(L)};var qs=o.map({linear:Gs,"linear-closed":function(t){return Gs(t)+"Z"},step:function(t){var e=0,n=t.length,i=t[0],a=[i[0],",",i[1]];for(;++e<n;)a.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);n>1&&a.push("H",i[0]);return a.join("")},"step-before":Ys,"step-after":Ks,basis:Qs,"basis-open":function(t){if(t.length<4)return Gs(t);var e,n=[],i=-1,a=t.length,o=[0],s=[0];for(;++i<3;)e=t[i],o.push(e[0]),s.push(e[1]);n.push(Zs(nr,o)+","+Zs(nr,s)),--i;for(;++i<a;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),ir(n,o,s);return n.join("")},"basis-closed":function(t){var e,n,i=-1,a=t.length,o=a+4,s=[],r=[];for(;++i<4;)n=t[i%a],s.push(n[0]),r.push(n[1]);e=[Zs(nr,s),",",Zs(nr,r)],--i;for(;++i<o;)n=t[i%a],s.shift(),s.push(n[0]),r.shift(),r.push(n[1]),ir(e,s,r);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,a,o=t[0][0],s=t[0][1],r=t[n][0]-o,l=t[n][1]-s,d=-1;++d<=n;)i=t[d],a=d/n,i[0]=e*i[0]+(1-e)*(o+a*r),i[1]=e*i[1]+(1-e)*(s+a*l);return Qs(t)},cardinal:function(t,e){return t.length<3?Gs(t):t[0]+Js(t,Xs(t,e))},"cardinal-open":function(t,e){return t.length<4?Gs(t):t[1]+Js(t.slice(1,-1),Xs(t,e))},"cardinal-closed":function(t,e){return t.length<3?Gs(t):t[0]+Js((t.push(t[0]),t),Xs([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Gs(t):t[0]+Js(t,function(t){var e,n,i,a,o=[],s=function(t){var e=0,n=t.length-1,i=[],a=t[0],o=t[1],s=i[0]=ar(a,o);for(;++e<n;)i[e]=(s+(s=ar(a=o,o=t[e+1])))/2;return i[e]=s,i}(t),r=-1,l=t.length-1;for(;++r<l;)e=ar(t[r],t[r+1]),C(e)<Tt?s[r]=s[r+1]=0:(n=s[r]/e,i=s[r+1]/e,(a=n*n+i*i)>9&&(a=3*e/Math.sqrt(a),s[r]=a*n,s[r+1]=a*i));r=-1;for(;++r<=l;)a=(t[Math.min(l,r+1)][0]-t[Math.max(0,r-1)][0])/(6*(1+s[r]*s[r])),o.push([a||0,s[r]*a||0]);return o}(t))}});function Gs(t){return t.join("L")}function Ys(t){for(var e=0,n=t.length,i=t[0],a=[i[0],",",i[1]];++e<n;)a.push("V",(i=t[e])[1],"H",i[0]);return a.join("")}function Ks(t){for(var e=0,n=t.length,i=t[0],a=[i[0],",",i[1]];++e<n;)a.push("H",(i=t[e])[0],"V",i[1]);return a.join("")}function Js(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Gs(t);var n=t.length!=e.length,i="",a=t[0],o=t[1],s=e[0],r=s,l=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],a=t[1],l=2),e.length>1){r=e[1],o=t[l],l++,i+="C"+(a[0]+s[0])+","+(a[1]+s[1])+","+(o[0]-r[0])+","+(o[1]-r[1])+","+o[0]+","+o[1];for(var d=2;d<e.length;d++,l++)o=t[l],r=e[d],i+="S"+(o[0]-r[0])+","+(o[1]-r[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*r[0]/3)+","+(o[1]+2*r[1]/3)+","+c[0]+","+c[1]}return i}function Xs(t,e){for(var n,i=[],a=(1-e)/2,o=t[0],s=t[1],r=1,l=t.length;++r<l;)n=o,o=s,s=t[r],i.push([a*(s[0]-n[0]),a*(s[1]-n[1])]);return i}function Qs(t){if(t.length<3)return Gs(t);var e=1,n=t.length,i=t[0],a=i[0],o=i[1],s=[a,a,a,(i=t[1])[0]],r=[o,o,o,i[1]],l=[a,",",o,"L",Zs(nr,s),",",Zs(nr,r)];for(t.push(t[n-1]);++e<=n;)i=t[e],s.shift(),s.push(i[0]),r.shift(),r.push(i[1]),ir(l,s,r);return t.pop(),l.push("L",i),l.join("")}function Zs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}qs.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var tr=[0,2/3,1/3,0],er=[0,1/3,2/3,0],nr=[0,1/6,2/3,1/6];function ir(t,e,n){t.push("C",Zs(tr,e),",",Zs(tr,n),",",Zs(er,e),",",Zs(er,n),",",Zs(nr,e),",",Zs(nr,n))}function ar(t,e){return(e[1]-t[1])/(e[0]-t[0])}function or(t){for(var e,n,i,a=-1,o=t.length;++a<o;)n=(e=t[a])[0],i=e[1]-Pt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function sr(t){var e=aa,n=aa,i=0,a=oa,o=Kn,s=Gs,r=s.key,l=s,d="L",c=.7;function u(r){var u,h,p,m=[],g=[],f=[],v=-1,b=r.length,y=fe(e),w=fe(i),_=e===n?function(){return h}:fe(n),C=i===a?function(){return p}:fe(a);function k(){m.push("M",s(t(f),c),d,l(t(g.reverse()),c),"Z")}for(;++v<b;)o.call(this,u=r[v],v)?(g.push([h=+y.call(this,u,v),p=+w.call(this,u,v)]),f.push([+_.call(this,u,v),+C.call(this,u,v)])):g.length&&(k(),g=[],f=[]);return g.length&&k(),m.length?m.join(""):null}return u.x=function(t){return arguments.length?(e=n=t,u):n},u.x0=function(t){return arguments.length?(e=t,u):e},u.x1=function(t){return arguments.length?(n=t,u):n},u.y=function(t){return arguments.length?(i=a=t,u):a},u.y0=function(t){return arguments.length?(i=t,u):i},u.y1=function(t){return arguments.length?(a=t,u):a},u.defined=function(t){return arguments.length?(o=t,u):o},u.interpolate=function(t){return arguments.length?(r="function"==typeof t?s=t:(s=qs.get(t)||Gs).key,l=s.reverse||s,d=s.closed?"M":"L",u):r},u.tension=function(t){return arguments.length?(c=t,u):c},u}function rr(t){return t.radius}function lr(t){return[t.x,t.y]}function dr(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Pt;return[n*Math.cos(i),n*Math.sin(i)]}}function cr(){return 64}function ur(){return"circle"}function hr(t){var e=Math.sqrt(t/At);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}o.svg.line.radial=function(){var t=Ws(or);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ys.reverse=Ks,Ks.reverse=Ys,o.svg.area=function(){return sr(L)},o.svg.area.radial=function(){var t=sr(or);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},o.svg.chord=function(){var t=zi,e=Wi,n=rr,i=Us,a=$s;function o(n,i){var a,o,d=s(this,t,n,i),c=s(this,e,n,i);return"M"+d.p0+r(d.r,d.p1,d.a1-d.a0)+(o=c,((a=d).a0==o.a0&&a.a1==o.a1?l(d.r,d.p1,d.r,d.p0):l(d.r,d.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,d.r,d.p0))+"Z")}function s(t,e,o,s){var r=e.call(t,o,s),l=n.call(t,r,s),d=i.call(t,r,s)-Pt,c=a.call(t,r,s)-Pt;return{r:l,a0:d,a1:c,p0:[l*Math.cos(d),l*Math.sin(d)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>At)+",1 "+e}function l(t,e,n,i){return"Q 0,0 "+i}return o.radius=function(t){return arguments.length?(n=fe(t),o):n},o.source=function(e){return arguments.length?(t=fe(e),o):t},o.target=function(t){return arguments.length?(e=fe(t),o):e},o.startAngle=function(t){return arguments.length?(i=fe(t),o):i},o.endAngle=function(t){return arguments.length?(a=fe(t),o):a},o},o.svg.diagonal=function(){var t=zi,e=Wi,n=lr;function i(i,a){var o=t.call(this,i,a),s=e.call(this,i,a),r=(o.y+s.y)/2,l=[o,{x:o.x,y:r},{x:s.x,y:r},s];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return i.source=function(e){return arguments.length?(t=fe(e),i):t},i.target=function(t){return arguments.length?(e=fe(t),i):e},i.projection=function(t){return arguments.length?(n=t,i):n},i},o.svg.diagonal.radial=function(){var t=o.svg.diagonal(),e=lr,n=t.projection;return t.projection=function(t){return arguments.length?n(dr(e=t)):e},t},o.svg.symbol=function(){var t=ur,e=cr;function n(n,i){return(pr.get(t.call(this,n,i))||hr)(e.call(this,n,i))}return n.type=function(e){return arguments.length?(t=fe(e),n):t},n.size=function(t){return arguments.length?(e=fe(t),n):e},n};var pr=o.map({circle:hr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*gr)),n=e*gr;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/mr),n=e*mr/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/mr),n=e*mr/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});o.svg.symbolTypes=pr.keys();var mr=Math.sqrt(3),gr=Math.tan(30*Dt);J.transition=function(t){for(var e,n,i=yr||++Cr,a=xr(t),o=[],s=wr||{time:Date.now(),ease:ho,delay:0,duration:250},r=-1,l=this.length;++r<l;){o.push(e=[]);for(var d=this[r],c=-1,u=d.length;++c<u;)(n=d[c])&&Ir(n,c,a,i,s),e.push(n)}return br(o,a,i)},J.interrupt=function(t){return this.each(null==t?fr:vr(xr(t)))};var fr=vr(xr());function vr(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function br(t,e,n){return W(t,_r),t.namespace=e,t.id=n,t}var yr,wr,_r=[],Cr=0;function kr(t,e,n,i){var a=t.id,o=t.namespace;return pt(t,"function"==typeof n?function(t,s,r){t[o][a].tween.set(e,i(n.call(t,t.__data__,s,r)))}:(n=i(n),function(t){t[o][a].tween.set(e,n)}))}function Sr(t){return null==t&&(t=""),function(){this.textContent=t}}function xr(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ir(t,e,n,i,a){var s=t[n]||(t[n]={active:0,count:0}),r=s[i];if(!r){var l=a.time;r=s[i]={tween:new x,time:l,delay:a.delay,duration:a.duration,ease:a.ease,index:e},a=null,++s.count,o.timer((function(a){var d,c,u=r.delay,h=ke,p=[];if(h.t=u+l,u<=a)return m(a-u);function m(n){if(s.active>i)return f();var a=s[s.active];a&&(--s.count,delete s[s.active],a.event&&a.event.interrupt.call(t,t.__data__,a.index)),s.active=i,r.event&&r.event.start.call(t,t.__data__,e),r.tween.forEach((function(n,i){(i=i.call(t,t.__data__,e))&&p.push(i)})),c=r.ease,d=r.duration,o.timer((function(){return h.c=g(n||1)?Kn:g,1}),0,l)}function g(n){if(s.active!==i)return 1;for(var a=n/d,o=c(a),l=p.length;l>0;)p[--l].call(t,o);return a>=1?(r.event&&r.event.end.call(t,t.__data__,e),f()):void 0}function f(){return--s.count?delete s[i]:delete t[n],1}h.c=m}),0,l)}}_r.call=J.call,_r.empty=J.empty,_r.node=J.node,_r.size=J.size,o.transition=function(t,e){return t&&t.transition?yr?t.transition(e):t:o.selection().transition(t)},o.transition.prototype=_r,_r.select=function(t){var e,n,i,a=this.id,o=this.namespace,s=[];t=X(t);for(var r=-1,l=this.length;++r<l;){s.push(e=[]);for(var d=this[r],c=-1,u=d.length;++c<u;)(i=d[c])&&(n=t.call(i,i.__data__,c,r))?("__data__"in i&&(n.__data__=i.__data__),Ir(n,c,o,a,i[o][a]),e.push(n)):e.push(null)}return br(s,o,a)},_r.selectAll=function(t){var e,n,i,a,o,s=this.id,r=this.namespace,l=[];t=Q(t);for(var d=-1,c=this.length;++d<c;)for(var u=this[d],h=-1,p=u.length;++h<p;)if(i=u[h]){o=i[r][s],n=t.call(i,i.__data__,h,d),l.push(e=[]);for(var m=-1,g=n.length;++m<g;)(a=n[m])&&Ir(a,m,r,s,o),e.push(a)}return br(l,r,s)},_r.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=ut(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]);for(var s,r=0,l=(s=this[a]).length;r<l;r++)(n=s[r])&&t.call(n,n.__data__,r,a)&&e.push(n)}return br(i,this.namespace,this.id)},_r.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):pt(this,null==e?function(e){e[i][n].tween.remove(t)}:function(a){a[i][n].tween.set(t,e)})},_r.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?Co:eo,i=o.ns.qualify(t);function a(){this.removeAttribute(i)}function s(){this.removeAttributeNS(i.space,i.local)}function r(t){return null==t?a:(t+="",function(){var e,a=this.getAttribute(i);return a!==t&&(e=n(a,t),function(t){this.setAttribute(i,e(t))})})}function l(t){return null==t?s:(t+="",function(){var e,a=this.getAttributeNS(i.space,i.local);return a!==t&&(e=n(a,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return kr(this,"attr."+t,e,i.local?l:r)},_r.attrTween=function(t,e){var n=o.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,i){var a=e.call(this,t,i,this.getAttributeNS(n.space,n.local));return a&&function(t){this.setAttributeNS(n.space,n.local,a(t))}}:function(t,i){var a=e.call(this,t,i,this.getAttribute(n));return a&&function(t){this.setAttribute(n,a(t))}})},_r.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function a(){this.style.removeProperty(t)}function o(e){return null==e?a:(e+="",function(){var i,a=c(this).getComputedStyle(this,null).getPropertyValue(t);return a!==e&&(i=eo(a,e),function(e){this.style.setProperty(t,i(e),n)})})}return kr(this,"style."+t,e,o)},_r.styleTween=function(t,e,n){function i(i,a){var o=e.call(this,i,a,c(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},_r.text=function(t){return kr(this,"text",t,Sr)},_r.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},_r.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=o.ease.apply(o,arguments)),pt(this,(function(i){i[n][e].ease=t})))},_r.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:pt(this,"function"==typeof t?function(i,a,o){i[n][e].delay=+t.call(i,i.__data__,a,o)}:(t=+t,function(i){i[n][e].delay=t}))},_r.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:pt(this,"function"==typeof t?function(i,a,o){i[n][e].duration=Math.max(1,t.call(i,i.__data__,a,o))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},_r.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var a=wr,s=yr;try{yr=n,pt(this,(function(e,a,o){wr=e[i][n],t.call(e,e.__data__,a,o)}))}finally{wr=a,yr=s}}else pt(this,(function(a){var s=a[i][n];(s.event||(s.event=o.dispatch("start","end","interrupt"))).on(t,e)}));return this},_r.transition=function(){for(var t,e,n,i=this.id,a=++Cr,o=this.namespace,s=[],r=0,l=this.length;r<l;r++){s.push(t=[]);for(var d,c=0,u=(d=this[r]).length;c<u;c++)(e=d[c])&&Ir(e,c,o,a,{time:(n=e[o][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return br(s,o,a)},o.svg.axis=function(){var t,e=o.scale.linear(),n=Tr,i=6,a=6,s=3,r=[10],l=null;function d(d){d.each((function(){var d,c=o.select(this),u=this.__chart__||e,h=this.__chart__=e.copy(),p=null==l?h.ticks?h.ticks.apply(h,r):h.domain():l,m=null==t?h.tickFormat?h.tickFormat.apply(h,r):L:t,g=c.selectAll(".tick").data(p,h),f=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Tt),v=o.transition(g.exit()).style("opacity",Tt).remove(),b=o.transition(g.order()).style("opacity",1),y=Math.max(i,0)+s,w=vs(h),_=c.selectAll(".domain").data([0]),C=(_.enter().append("path").attr("class","domain"),o.transition(_));f.append("line"),f.append("text");var k,S,x,I,T=f.select("line"),A=b.select("line"),j=g.select("text").text(m),E=f.select("text"),P=b.select("text"),D="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(d=jr,k="x",x="y",S="x2",I="y2",j.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),C.attr("d","M"+w[0]+","+D*a+"V0H"+w[1]+"V"+D*a)):(d=Er,k="y",x="x",S="y2",I="x2",j.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),C.attr("d","M"+D*a+","+w[0]+"H0V"+w[1]+"H"+D*a)),T.attr(I,D*i),E.attr(x,D*y),A.attr(S,0).attr(I,D*i),P.attr(k,0).attr(x,D*y),h.rangeBand){var N=h,M=N.rangeBand()/2;u=h=function(t){return N(t)+M}}else u.rangeBand?u=h:v.call(d,h,u);f.call(d,u,h),b.call(d,h,h)}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.orient=function(t){return arguments.length?(n=t in Ar?t+"":Tr,d):n},d.ticks=function(){return arguments.length?(r=arguments,d):r},d.tickValues=function(t){return arguments.length?(l=t,d):l},d.tickFormat=function(e){return arguments.length?(t=e,d):t},d.tickSize=function(t){var e=arguments.length;return e?(i=+t,a=+arguments[e-1],d):i},d.innerTickSize=function(t){return arguments.length?(i=+t,d):i},d.outerTickSize=function(t){return arguments.length?(a=+t,d):a},d.tickPadding=function(t){return arguments.length?(s=+t,d):s},d.tickSubdivide=function(){return arguments.length&&d},d};var Tr="bottom",Ar={top:1,right:1,bottom:1,left:1};function jr(t,e,n){t.attr("transform",(function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"}))}function Er(t,e,n){t.attr("transform",(function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"}))}o.svg.brush=function(){var t,e,n=V(h,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],r=[0,0],l=!0,d=!0,u=Dr[0];function h(t){t.each((function(){var t=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(u,L);n.exit().remove(),n.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return Pr[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var s,r=o.transition(t),l=o.transition(e);i&&(s=vs(i),l.attr("x",s[0]).attr("width",s[1]-s[0]),m(r)),a&&(s=vs(a),l.attr("y",s[0]).attr("height",s[1]-s[0]),g(r)),p(r)}))}function p(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+s[+/e$/.test(t)]+","+r[+/^s/.test(t)]+")"}))}function m(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(t){t.select(".extent").attr("y",r[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function f(){var u,f,v=this,b=o.select(o.event.target),y=n.of(v,arguments),w=o.select(v),_=b.datum(),C=!/^(n|s)$/.test(_)&&i,k=!/^(e|w)$/.test(_)&&a,S=b.classed("extent"),x=kt(v),I=o.mouse(v),T=o.select(c(v)).on("keydown.brush",E).on("keyup.brush",P);if(o.event.changedTouches?T.on("touchmove.brush",D).on("touchend.brush",L):T.on("mousemove.brush",D).on("mouseup.brush",L),w.interrupt().selectAll("*").interrupt(),S)I[0]=s[0]-I[0],I[1]=r[0]-I[1];else if(_){var A=+/w$/.test(_),j=+/^n/.test(_);f=[s[1-A]-I[0],r[1-j]-I[1]],I[0]=s[A],I[1]=r[j]}else o.event.altKey&&(u=I.slice());function E(){32==o.event.keyCode&&(S||(u=null,I[0]-=s[1],I[1]-=r[1],S=2),$())}function P(){32==o.event.keyCode&&2==S&&(I[0]+=s[1],I[1]+=r[1],S=0,$())}function D(){var t=o.mouse(v),e=!1;f&&(t[0]+=f[0],t[1]+=f[1]),S||(o.event.altKey?(u||(u=[(s[0]+s[1])/2,(r[0]+r[1])/2]),I[0]=s[+(t[0]<u[0])],I[1]=r[+(t[1]<u[1])]):u=null),C&&N(t,i,0)&&(m(w),e=!0),k&&N(t,a,1)&&(g(w),e=!0),e&&(p(w),y({type:"brush",mode:S?"move":"resize"}))}function N(n,i,a){var o,c,h=vs(i),p=h[0],m=h[1],g=I[a],f=a?r:s,v=f[1]-f[0];if(S&&(p-=g,m-=v+g),o=(a?d:l)?Math.max(p,Math.min(m,n[a])):n[a],S?c=(o+=g)+v:(u&&(g=Math.max(p,Math.min(m,2*u[a]-o))),g<o?(c=o,o=g):c=g),f[0]!=o||f[1]!=c)return a?e=null:t=null,f[0]=o,f[1]=c,!0}function L(){D(),w.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),o.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x(),y({type:"brushend"})}w.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",b.style("cursor")),y({type:"brushstart"}),D()}return h.event=function(i){i.each((function(){var i=n.of(this,arguments),a={x:s,y:r,i:t,j:e},l=this.__chart__||a;this.__chart__=a,yr?o.select(this).transition().each("start.brush",(function(){t=l.i,e=l.j,s=l.x,r=l.y,i({type:"brushstart"})})).tween("brush:brush",(function(){var n=no(s,a.x),o=no(r,a.y);return t=e=null,function(t){s=a.x=n(t),r=a.y=o(t),i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){t=a.i,e=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})})):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))}))},h.x=function(t){return arguments.length?(u=Dr[!(i=t)<<1|!a],h):i},h.y=function(t){return arguments.length?(u=Dr[!i<<1|!(a=t)],h):a},h.clamp=function(t){return arguments.length?(i&&a?(l=!!t[0],d=!!t[1]):i?l=!!t:a&&(d=!!t),h):i&&a?[l,d]:i?l:a?d:null},h.extent=function(n){var o,l,d,c,u;return arguments.length?(i&&(o=n[0],l=n[1],a&&(o=o[0],l=l[0]),t=[o,l],i.invert&&(o=i(o),l=i(l)),l<o&&(u=o,o=l,l=u),o==s[0]&&l==s[1]||(s=[o,l])),a&&(d=n[0],c=n[1],i&&(d=d[1],c=c[1]),e=[d,c],a.invert&&(d=a(d),c=a(c)),c<d&&(u=d,d=c,c=u),d==r[0]&&c==r[1]||(r=[d,c])),h):(i&&(t?(o=t[0],l=t[1]):(o=s[0],l=s[1],i.invert&&(o=i.invert(o),l=i.invert(l)),l<o&&(u=o,o=l,l=u))),a&&(e?(d=e[0],c=e[1]):(d=r[0],c=r[1],a.invert&&(d=a.invert(d),c=a.invert(c)),c<d&&(u=d,d=c,c=u))),i&&a?[[o,d],[l,c]]:i?[o,l]:a&&[d,c])},h.clear=function(){return h.empty()||(s=[0,0],r=[0,0],t=e=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!a&&r[0]==r[1]},o.rebind(h,n,"on")};var Pr={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dr=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Nr=Le.format=cn.timeFormat,Lr=Nr.utc,Mr=Lr("%Y-%m-%dT%H:%M:%S.%LZ");function Br(t){return t.toISOString()}function Rr(t,e,n){function i(e){return t(e)}function a(t,n){var i=(t[1]-t[0])/n,a=o.bisect(Or,i);return a==Or.length?[e.year,Ss(t.map((function(t){return t/31536e6})),n)[2]]:a?e[i/Or[a-1]<Or[a]/i?a-1:a]:[Hr,Ss(t,n)[2]]}return i.invert=function(e){return Fr(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Fr)},i.nice=function(t,e){var n=i.domain(),o=fs(n),s=null==t?a(o,10):"number"==typeof t&&a(o,t);function r(n){return!isNaN(n)&&!t.range(n,Fr(+n+1),e).length}return s&&(t=s[0],e=s[1]),i.domain(ys(n,e>1?{floor:function(e){for(;r(e=t.floor(e));)e=Fr(e-1);return e},ceil:function(e){for(;r(e=t.ceil(e));)e=Fr(+e+1);return e}}:t))},i.ticks=function(t,e){var n=fs(i.domain()),o=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Fr(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return Rr(t.copy(),e,n)},Cs(i,t)}function Fr(t){return new Date(t)}Nr.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Br:Mr,Br.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Br.toString=Mr.toString,Le.second=Fe((function(t){return new Me(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))}),(function(t){return t.getSeconds()})),Le.seconds=Le.second.range,Le.seconds.utc=Le.second.utc.range,Le.minute=Fe((function(t){return new Me(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))}),(function(t){return t.getMinutes()})),Le.minutes=Le.minute.range,Le.minutes.utc=Le.minute.utc.range,Le.hour=Fe((function(t){var e=t.getTimezoneOffset()/60;return new Me(36e5*(Math.floor(t/36e5-e)+e))}),(function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))}),(function(t){return t.getHours()})),Le.hours=Le.hour.range,Le.hours.utc=Le.hour.utc.range,Le.month=Fe((function(t){return(t=Le.day(t)).setDate(1),t}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t){return t.getMonth()})),Le.months=Le.month.range,Le.months.utc=Le.month.utc.range;var Or=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ur=[[Le.second,1],[Le.second,5],[Le.second,15],[Le.second,30],[Le.minute,1],[Le.minute,5],[Le.minute,15],[Le.minute,30],[Le.hour,1],[Le.hour,3],[Le.hour,6],[Le.hour,12],[Le.day,1],[Le.day,2],[Le.week,1],[Le.month,1],[Le.month,3],[Le.year,1]],$r=Nr.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Kn]]),Hr={range:function(t,e,n){return o.range(Math.ceil(t/n)*n,+e,n).map(Fr)},floor:L,ceil:L};Ur.year=Le.year,Le.scale=function(){return Rr(o.scale.linear(),Ur,$r)};var Vr=Ur.map((function(t){return[t[0].utc,t[1]]})),zr=Lr.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Kn]]);function Wr(t){return JSON.parse(t.responseText)}function qr(t){var e=l.createRange();return e.selectNode(l.body),e.createContextualFragment(t.responseText)}Vr.year=Le.year.utc,Le.scale.utc=function(){return Rr(o.scale.linear(),Vr,zr)},o.text=ve((function(t){return t.responseText})),o.json=function(t,e){return be(t,"application/json",Wr,e)},o.html=function(t,e){return be(t,"text/html",qr,e)},o.xml=ve((function(t){return t.responseXML})),void 0===(a="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=a),this.d3=o}()},function(t,e,n){var i,a;i=[n(94),n(77)],void 0===(a=function(t,e){return function(n){if(!e(n))return!1;var i=t(n);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(190),n(1172),n(2),n(34),n(10),n(9),n(7),n(28),n(31),n(49),n(1),n(5),n(4),n(3),n(6),n(8),n(134),n(724),n(725),n(726)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){var _="template",C="template_basic",k="template_demo",S="template_theme",x="template_campaign",I="template_page_preview",T="plaintext",A="page";return t([e],{badgeText:"Preview mode",paneClasses:"preview-container",content:n,headerInfoPane:null,previewId:null,previewType:null,previewView:"desktop",splitsOnSubject:!1,inboxPreviewEnabled:!0,variant:null,campaignType:null,constructor:function(t){if(u.mixin(this,t),!this.previewId)throw Error("Attempted to create HTML Preview Pane without a campaign or template ID.");if(!this.previewType)throw Error("Type of preview (campaign or template) is required.")},postCreate:function(){this.inherited(arguments),this.editorPane=new b({paneId:"preview"},this.editorPane),this.editorPane.startup(),this.viewToggler=new v({options:this._getToggleOptions(),onChange:u.hitch(this,"_changeView")},this.viewToggler),(this.isCustomTemplatePreview()||this.isDefaultTemplatePreview())&&l.set(this.badge,"Template preview mode"),this.upgradeMoment&&this.showUpgradeMoment&&(m.remove(this.upgradeMoment,"hide"),i(this.upgradeMoment,"click",u.hitch(this,(function(t){t.preventDefault(),window.top.location.href="/checkout/plan?feature_name=templates_preview_upgrade_experiment_feature_callout&redirect=/templates/create-template"})))),this.splitsOnSubject?m.add(this.desktopViewInner,"split-subject"):m.add(this.desktopViewInner,"no-split");var t=this.previewIframe,e=function(){g(t).parent().siblings(".iframe-loading-message").style("display","none"),i(t.contentWindow.document,"keyup",window.hotKeyHandler),this._attachAnchorClickHandlers()}.bind(this);a("ie")<=8&&t.attachEvent?t.attachEvent("onload",e):i(t,"load",e)},_getToggleOptions:function(){var t=[{value:"desktop",label:"Desktop"},{value:"mobile",label:"Mobile"}];return this.isInboxPreviewEnabled()&&t.push({value:"inbox",label:"Inbox"}),t},changeView:function(t){this.viewToggler.set("value",t)},_changeView:function(t){switch(this.previewView=t,t){case"desktop":g(this.previewPane).removeClass(["preview-mobile","preview-inbox"]).addClass("preview-desktop"),g(this.bananaPhone).removeClass("hide").removeClass("bananaphone"),g(this.approxMessage).addClass("hide"),m.toggle(this.contentDom,"no-right-pane",!this.headerInfoPane),this._toggleInbox(!1);break;case"mobile":g(this.previewPane).removeClass(["preview-desktop","preview-inbox"]).addClass("preview-mobile"),g(this.bananaPhone).removeClass("hide").addClass("bananaphone"),g(this.approxMessage).removeClass("hide"),m.toggle(this.contentDom,"no-right-pane",!this.headerInfoPane),this._toggleInbox(!1);break;case"inbox":g(this.previewPane).removeClass(["preview-desktop","preview-mobile"]).addClass("preview-inbox"),g(this.bananaPhone).addClass("hide"),g(this.approxMessage).addClass("hide"),m.remove(this.contentDom,"no-right-pane"),this._toggleInbox(!0);break;default:throw new Error("Unhandle preview view")}},_toggleInbox:function(t){this.headerInfoPane&&m.toggle(this.headerInfoPane.domNode,"hide",t),this.inboxPreview&&(t?this.inboxPreview.show():this.inboxPreview.hide())},show:function(){return this.displayActive||this._togglePreviewLoader(!1),this.inherited(arguments)},refreshPreview:function(t){this._togglePreviewLoader(!0),r.set(this.previewIframe,"src",t)},previewUrl:function(){switch(this.previewType){case _:return f.toUrl("templates/preview-template",{id:this.previewId});case T:return f.toUrl("campaigns/preview-content-text",{id:this.previewId});case C:return f.toUrl("campaigns/templates/preview-layout",{layout:this.previewId});case k:return f.toUrl("campaigns/templates/demo-preview",{layout:this.previewId});case S:return f.toUrl("campaigns/templates/preview-template",{id:this.previewId});case I:return window.Previewer={},window.Previewer.previewType="page",f.toUrl("campaigns/templates/preview-layout",{layout:this.previewId});case A:return f.toUrl("landing-pages/preview-page",{id:this.previewId});default:return f.toUrl("campaigns/preview-content-html",{id:this.previewId,variant:this.variant})}},isDefaultTemplatePreview:function(){return this.previewType==C||this.previewType==S},isCustomTemplatePreview:function(){return this.previewType==_},isCampaignTemplatePreview:function(){return this.previewType==x},isPagePreview:function(){return this.previewType===A},isCampaignPreview:function(){return!(this.isCustomTemplatePreview()||this.isDefaultTemplatePreview()||this.isCampaignTemplatePreview()||this.isPagePreview())},isInboxPreviewEnabled:function(){return"tx"!==this.campaignType&&(this.inboxPreviewEnabled&&(this.isCampaignPreview()||this.isCustomTemplatePreview()))},_paneDidShow:function(){if(this.isCampaignPreview()&&(this.headerInfoPane=new y({campaignId:this.previewId,onMemberLoad:u.hitch(this,(function(t){var e=this.previewUrl();t&&(e+="&e="+t),this.refreshPreview(e)}))}),this.headerInfoPane.placeAt(this.sidePane)),this.isInboxPreviewEnabled()){var t={clientPaneDom:this.sidePane,contentPaneDom:this.inboxPreviewContainer};this.isCampaignPreview()?t.campaignId=this.previewId:t.templateId=this.previewId,this.inboxPreview=new w(t)}this.refreshPreview(this.previewUrl()),this.viewToggler.setSelected(this.previewView)},_paneDidHide:function(){this.onHide&&this.onHide(),this.previewType!==A?(this.headerInfoPane&&this.headerInfoPane.destroy(),this.inboxPreview&&this.inboxPreview.destroy()):this.destroy()},_togglePreviewLoader:function(t){s.set(this.previewLoader,"display",t?"block":"")},_handleAnchorClick:function(t){t.preventDefault();var e=this.previewIframe.contentWindow.document.body.querySelector(t.target.hash);e&&e.scrollIntoView(!1)},_attachAnchorClickHandlers:function(){var t=this.previewIframe.contentWindow.document.body;g("a[href^='#']",t).forEach(function(t){return t.hash&&t.addEventListener("click",this._handleAnchorClick.bind(this))}.bind(this))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(15)],void 0===(a=function(t,e){return t(null,{paneId:null,show:function(){this.publishReady()},done:function(){this.publishDone()},publishReady:function(){e.globalPublish("mojo/editor/ready",[this])},publishSetup:function(){e.globalPublish("mojo/editor/setup",[this])},publishDone:function(){e.globalPublish("mojo/editor/done",[this])},save:function(t){},onShow:function(){},onClose:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(86),n(34),n(2),n(28),n(6),n(3),n(17),n(16),n(26),n(2022),n(122),n(201),n(33)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){return t([h],{autosaveInterval:2e4,customCkStylesPath:null,ckSkinConfig:"mcneapolitanconfig.js",constructor:function(){this.autosaveInSecs=this.autosaveInterval/1e3},isMobile:Boolean(window.app&&window.app.nativeUtils&&window.app.nativeUtils.getNativeObject()),showCKEditor:function(t,i,d,c,h){this.isMobile=Boolean(window.app&&window.app.nativeUtils&&window.app.nativeUtils.getNativeObject()),i&&(this._timeStampContainer=i,s.set(this._timeStampContainer,"We'll autosave every "+this.autosaveInSecs+" seconds"));var m=window.fckeditor_merge_url+"?id="+window.tpl_id+"&block=neapolitan",g="mc_styles_neapolitan:"+window.fckeditor_style_url+"?id="+window.tpl_id+"&block=neapolitan",f={customConfig:this.ckSkinConfig,sharedSpaces:{top:"text-editor-toolbar"},height:500,mergeTags:m,stylesSet:g,on:{instanceReady:e.hitch(this,(function(){this.editor.on("change",e.hitch(this,"_onCKChange")),e.isFunction(c)&&c(),this.editor.on("key",window.parent.hotKeyHandler),this.isPageTemplate||this._createWebfontWarning(t)})),webfontPresent:e.hitch(this,(function(t){r(this._fontWarningDom).toggleClass("hide",!t.data.isPresent)})),afterCommandExec:function(t){if("autogrow"!==t.data.name&&"enter"!==t.data.name){var e=1===t.data.command.previousState?"off":"on",n=t.data.name+"|"+e,i={editingType:window.app.editingType,campaignId:window.app&&window.app.campaignId};(this.block||this.mcedit.type)&&(i.blockType=this.block?this.block.type:this.mcedit.type,i.blockId=this.block?this.block.id:this.mcedit.editId);var a=JSON.stringify(i);u.googleAnalytics.trackEvent("CKEditor",n,a)}}.bind(this)}};h&&e.mixin(f,h),this.customCkStylesPath&&(f.contentsCss=this.customCkStylesPath);var v=["aspell","mergetags","mcimage","onchange","toolbarexpander","webfont","sharedspace"];(!a("ie")||!a("ie")>=9)&&v.push("autogrow"),this.restrictions&&(v.push("restrictions"),f.restrictions={maxLength:this.restrictions.max_length,allowUrls:this.restrictions.allow_urls},f.disallowedContent="img",!1===this.restrictions.allow_urls&&(f.disallowedContent+=" a")),f.extraPlugins=v.join(","),(!window.dojo.isIE||window.dojo.isIE>8)&&(f.on.mode=e.hitch(this,(function(){if("source"===this.editor.mode){var t=r(".cke_source")[0],n=p.fromTextArea(t,{mode:"text/html",autofocus:!0,tabMode:"indent",indentUnit:2,smartIndent:!1,theme:"default",autoClearEmptyLines:!0,lineWrapping:!0,lineNumbers:!0});o(n.display.wrapper,"contextmenu",(function(t){t.stopPropagation()})),l.add(r(".cke_inner")[0],"codeMirror-on");var i=n.addLineClass(0,"activeline");n.on("cursorActivity",(function(){var t=n.getLineHandle(n.getCursor().line);t!=i&&(n.removeLineClass(i,"background","activeline"),i=n.addLineClass(t,"background","activeline"))})),n.on("change",e.hitch(this,(function(){t.value=n.getValue(),this._onCKChange()})))}else l.remove(r(".cke_inner")[0],"codeMirror-on"),this.isMobile||this.editor.resize()}))),n.empty(t);document.getElementById("mobile-text-editor");this.isMobile?(t.innerHTML='<div id="mobile-text-editor" contenteditable="true"></div>',document.getElementById("mobile-text-editor").innerHTML=d,this.editor=window.CKEDITOR.inline("mobile-text-editor",f),this.editor.on("instanceReady",(function(t){t.editor.setReadOnly(!1)})),this.editor.type=this.block.type):this.editor=window.CKEDITOR.appendTo(t,f,d),window.editor=this.editor,window.onbeforeunload=e.hitch(this,(function(){if(this.editor&&this.editor.checkDirty())return"You are about to leave this page. Any changes you have made to the content will be lost. Are you sure you want to do this?"}))},getBlockContainer:function(t){for(var e,n=0,i=t.length;n<i;n++){if("Body Interior Style"===t[n].name&&"transparent"!==t[n].props["background-color"].value){e=t[n];break}"Body Style"!==t[n].name&&"Body Container Style"!==t[n].name||(e=t[n])}return e},clearCKAutosave:function(){this.autosaveTimeout&&clearTimeout(this.autosaveTimeout),window.onbeforeunload=null},onCKChange:function(){},_onCKChange:function(){this.autosaveTimeout||(this.autosaveTimeout=setTimeout(e.hitch(this,"_autoSaveEditor"),this.autosaveInterval)),this.onCKChange()},_autoSaveEditor:function(){this.autosaveTimeout=null,this.editor&&this.editor.checkDirty()&&this.save().then(e.hitch(this,(function(){if(this._timeStampContainer){var t=i.format(new Date,{selector:"date",datePattern:"h:mma v M/d/yy"});this._timeStampContainer.innerHTML="autosaved "+t}this.editor&&this.editor.resetDirty()})))},_createWebfontWarning:function(t){this._fontWarningDom=n.place("<p class='font-weight--bold small-meta padding--lv2 dim-el hide'>If an email client <a href='https://mailchimp.com/help/limitations-of-html-email/' target='_blank'>doesn't support web fonts</a>, we'll use a similar standard font instead.</p>",t)},onClose:function(){this.clearCKAutosave(),this.editor&&(this.onCKChange(),this.editor.destroy(),this.editor=null),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/sniff")},function(t,e,n){var i,a;i=[n(0),n(196),n(255)],void 0===(a=function(t,e,n){var i={transformErrorFromResponse:function(t){var e=t.response.status,n=i._getErrorClassForStatus(e);if(null===n)return new Error;if("createFromResponseData"in n==!1)throw new TypeError("errorClass for status '"+e+"' must implement createFromResponseData()");return n.createFromResponseData(t.response.data)},_getErrorClassForStatus:function(t){return 400===t?e:503===t?n:null},throwError:function(t){throw i.transformErrorFromResponse(t)}};return i}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(245)],void 0===(a=function(t){return function(e,n,i){"__proto__"==n&&t?t(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(246),n(88)],void 0===(a=function(t,e){return function(n,i){return n&&t(n,i,e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(350),n(89)],void 0===(a=function(t,e){var n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable;return t(function(){return arguments}())?t:function(t){return e(t)&&i.call(t,"callee")&&!a.call(t,"callee")}}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(t){var i,a;i=[n(64),n(351)],void 0===(a=function(n,i){var a=e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?n.Buffer:void 0;return(s?s.isBuffer:void 0)||i}.apply(e,i))||(t.exports=a)}).call(this,n(102)(t))},function(t,e,n){var i,a;i=[n(304),n(154)],void 0===(a=function(t,e){return function(n,i,a,o){var s=!a;a||(a={});for(var r=-1,l=i.length;++r<l;){var d=i[r],c=o?o(a[d],n[d],d,a,n):void 0;void 0===c&&(c=n[d]),s?e(a,d,c):t(a,d,c)}return a}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(18),n(58),n(22),n(8),n(153),n(462),n(56)],void 0===(a=function(t,e,n,i,a,o,s,r,l){var d,c=t(null,{constructor:function(t){this.listId=t.list_id,this.name=t.name,this.disabled=t.is_disabled}}),u=t(null,{constructor:function(t){this.storeId=t.store_id,this.storeName=t.store_name}}),h=t(null,{constructor:function(t){this.id=t.id,this.type=t.type,this.name=t.segment_name}}),p=t(null,{constructor:function(t){this.frontFileId=t.front_file_id,this.backTitle=t.back_title,this.backMessage=t.back_message,this.backFileId=t.back_file_id,this.frontFileUrl=t.front_file_url,this.backFileUrl=t.back_file_url,this.promoCodeId=t.promo_code_id,this.promoRuleId=t.promo_rule_id,this.promoStoreId=t.promo_store_id}});p.getPatchFromData=function(t){if(null===t)return{};var e={};return"frontFileId"in t&&(e.front_file_id=t.frontFileId),"frontFileUrl"in t&&(e.front_file_url=t.frontFileUrl),"backTitle"in t&&(e.back_title=t.backTitle),"backMessage"in t&&(e.back_message=t.backMessage),"backFileId"in t&&(e.back_file_id=t.backFileId),"backFileUrl"in t&&(e.back_file_url=t.backFileUrl),"promoStoreId"in t&&(e.promo_store_id=t.promoStoreId),"promoCodeId"in t&&(e.promo_code_id=t.promoCodeId),"promoRuleId"in t&&(e.promo_rule_id=t.promoRuleId),e};var m=t(null,{constructor:function(t){this.location_id=t.location_id,this.ui_name=t.ui_name,this.radius_miles=t.radius_miles,this.location_type=t.location_type}}),g=t(null,{constructor:function(t){this.id=t.location_id,this.type=t.location_type,this.name=t.display_name||t.ui_name},mustHaveRadius:function(){return"community"===this.type||"district"===this.type}}),f=t(null,{constructor:function(t){this.frontHtml=t.front_html,this.backHtml=t.back_html}}),v=t(null,{constructor:function(t){this.optimisticCount=t.optimistic_count}}),b=t(null,{constructor:function(t){this.strategy=t.strategy;var e=t.settings;this.settings=null===e?null:{interval:e.interval,storeName:e.store_name,latency:e.latency}}}),y=t(null,{constructor:function(t){this.storeId=t.store_id,this.storeName=t.store_name,this.postcard=t.postcard_id&&{postcardId:t.postcard_id,postcardUniqueId:t.postcard_unique_id,postcardStatus:t.postcard_status,postcardCanEdit:t.postcard_can_edit}}});b.getPatchFromData=function(t){return{strategy:t.strategy,settings:{interval:t.settings.interval}}};var w=t(null,{constructor:function(t){this.state=t},isFetchingAddresses:function(){return this.state===w.STATE_BUILDING},isReady:function(){return this.state===w.STATE_READY}});w.STATE_UNSTARTED=null,w.STATE_BUILDING="building",w.STATE_READY="ready";var _={PostcardLocation:m,PostcardLocationSuggestion:g,PostcardSegment:h,AUDIENCE_STRATEGY_CONTACTS:"contacts",AUDIENCE_STRATEGY_LOOKALIKE:"lookalike",AUDIENCE_STRATEGY_UPLOAD:"upload",AUTOMATION_STRATEGY_RECURRING:"recurring",AUTOMATION_STRATEGY_ABANDONED_CART:"abandoned_cart",POSTCARD_STATUS_DRAFT:"draft",POSTCARD_STATUS_PROCESSING:"processing",POSTCARD_STATUS_SENT:"sent",POSTCARD_STATUS_ACTIVE:"active",POSTCARD_STATUS_PAUSED:"paused",POSTCARD_STATUS_CANCELED:"canceled",POSTCARD_STATUS_REASON_COMPLIANCE:"compliance",POSTCARD_STATUS_REASON_NO_RECIPIENTS:"no_recipients",POSTCARD_STATUS_REASON_SOURCE_DELETED:"source_deleted",createFromProperties:function(t){return new d(t)},mockedPostcard:null,patchMocked:function(t){return this.mockedPostcard=e.mixin({},this.mockedPostcard,t),t.list_id&&(this.mockedPostcard.list={list_id:t.list_id,name:"Mocked List Name"}),i().then(this.createFromProperties.bind(this,this.mockedPostcard))},patchById:function(t,e){return n.post(o.toUrl("/postcards/patch",{id:t}),{handleAs:"json",data:{patch:JSON.stringify(e)}}).then(this.createFromProperties.bind(this))},fetchLocationSuggestions:function(t){return t&&t.length>=3&&t.length<=100?n.get(o.toUrl("/location-autocomplete/search",{q:t}),{handleAs:"json"}).then((function(t){return t.map((function(t){return new g(t)}))})):i().then((function(){return[]}))},getContentPreview:function(t){return n.post(o.toUrl("/postcards/content/get-preview"),{handleAs:"json",data:p.getPatchFromData(t)}).then((function(t){return new f(t)}),s.throwError)},getBillingSidebarHTML:function(t){return n.post(o.toUrl("postcards/billing-summary"),{data:{id:t},handleAs:"text"})},getPotentialRecipients:function(t,e,i){return n.post(o.toUrl("/postcards/potential-recipients"),{data:{max_budget_in_user_currency:t,list_segment_count:e,location_id:i?i.id:null},handleAs:"json"}).then((function(t){return new v(t)}))},getActiveStoresWithAbandonedCartPostcards:function(){return n.post(o.toUrl("/postcards/get-active-stores-with-abandoned-postcards"),{data:{},handleAs:"json"}).then((function(t){return t.map((function(t){return new y(t)}),this)}))},pollForFetchedAddresses:function(t,e){var n=new r((function(){return _.patchById(t).then((function(t){return t.audienceBuildingStatus.isFetchingAddresses()?(e(n._previousAttempts),r.RETRY):null}))}));return n.begin(),n.getPromise()},checkForFetchedAddresses:function(t,e){return this._addressRequest||(this._addressRequest=this.pollForFetchedAddresses(t,e).then(this._clearAddressRequest.bind(this))),this._addressRequest},cancelAddressRequest:function(){this._addressRequest&&!this._addressRequest.isFulfilled()&&this._addressRequest.cancel(),this._clearAddressRequest()},isCheckingForFetchedAddresses:function(){return!!this._addressRequest},_clearAddressRequest:function(){this._addressRequest=null}};return d=t(null,{constructor:function(t){this._timestamp=Date.now(),this.name=t.title,this.postcardId=t.postcard_id,this.updatedAt=t.updated_at?l.dateTransform(t.updated_at):null,this.status=t.status||null,this.statusReason=t.status_reason||null,this.uniqueID=t.unique_id||null,this.audienceStrategy=t.audience_strategy||null,this.list=t.list?new c(t.list):null,this.segment=t.segment?new h(t.segment):null,this.wasSourceDeleted=t.was_source_deleted||!1,this.maxBudgetInUserCurrency=t.max_budget_in_user_currency?Math.floor(t.max_budget_in_user_currency):null,this.creditRechargeAmountInUserCurrency=t.credit_recharge_amount_in_user_currency?Math.floor(t.credit_recharge_amount_in_user_currency):null,this.maxBudgetInUSD=t.max_budget_in_usd||null,this.location=t.location_filters&&t.location_filters.length>0?new m(t.location_filters[0]):null,this.audienceSize=t.audience_size,this.numberOfAddressesFoundByAddressFinder=t.number_of_addresses_found_by_address_finder,this.isTryingAddressFinder=t.is_trying_address_finder,this.remainingQuantity=t.number_of_postcards_available,this.content=new p(t.content),this.shouldShowSendErrorMessage=t.should_show_send_error_message;var e=t.automation_trigger;this.automationTrigger=e?new b(e):null,this.automationTriggerStore=t.automation_trigger_store?new u(t.automation_trigger_store):null,this.audienceBuildingStatus=new w(t.audience_building_status),this.isAutomated=null!==this.automationTrigger.strategy,this.nextOrderDate=t.next_order_date,this.scheduledSendTime=t.scheduled_send_time},patch:function(t){var n={};return(t=t||{}).listId&&(n=e.mixin(n,{list_id:t.listId})),t.name&&(n=e.mixin(n,{title:t.name})),void 0!==t.segment&&(n=e.mixin(n,{segment:t.segment})),void 0!==t.audienceStrategy&&(n=e.mixin(n,{audience_strategy:t.audienceStrategy})),void 0!==t.location&&(n=e.mixin(n,{location_filters:t.location?[t.location]:null})),void 0!==t.content&&(n=e.mixin(n,{content:p.getPatchFromData(t.content)})),void 0!==t.maxBudgetInUserCurrency&&(n=e.mixin(n,{max_budget_in_user_currency:t.maxBudgetInUserCurrency})),void 0!==t.creditRechargeAmountInUserCurrency&&(n=e.mixin(n,{credit_recharge_amount_in_user_currency:t.creditRechargeAmountInUserCurrency})),void 0!==t.automationTrigger&&(n=e.mixin(n,{automation_trigger:b.getPatchFromData(t.automationTrigger)})),void 0!==t.pastedAddresses&&(n=e.mixin(n,{pasted_addresses:t.pastedAddresses})),void 0!==t.isTryingAddressFinder&&(n=e.mixin(n,{is_trying_address_finder:t.isTryingAddressFinder})),_.mockedPostcard?_.patchMocked(n):_.patchById(this.postcardId,n)},getSupportedAudienceStrategies:function(){return this.isAutomated?[_.AUDIENCE_STRATEGY_CONTACTS]:[_.AUDIENCE_STRATEGY_CONTACTS,_.AUDIENCE_STRATEGY_LOOKALIKE,_.AUDIENCE_STRATEGY_UPLOAD]}}),_}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(1)],void 0===(a=function(t,e){var n={};return e.setObject("dojo.regexp",n),n.escapeString=function(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(function(t){return e&&-1!=e.indexOf(t)?t:"\\"+t}))},n.buildGroupRE=function(t,e,i){if(!(t instanceof Array))return e(t);for(var a=[],o=0;o<t.length;o++)a.push(e(t[o]));return n.group(a.join("|"),i)},n.group=function(t,e){return"("+(e?"?:":"")+t+")"},n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(42),n(75),n(4),n(9),n(1),n(2),n(33)],void 0===(a=function(t,e,n,i,a,o,s,r){r.add("config-bgIframe",r("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||r("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var l=new function(){var e=[];this.pop=function(){var o;if(e.length)(o=e.pop()).style.display="";else{if(r("ie")<9){var s="<iframe src='"+(n.dojoBlankHtmlUrl||t.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";o=document.createElement(s)}else(o=i.create("iframe")).src='javascript:""',o.className="dijitBackgroundIframe",o.setAttribute("role","presentation"),a.set(o,"opacity",.1);o.tabIndex=-1}return o},this.push=function(t){t.style.display="none",e.push(t)}};return e.BackgroundIframe=function(t){if(!t.id)throw new Error("no id");if(r("config-bgIframe")){var e=this.iframe=l.pop();t.appendChild(e),r("ie")<7||r("quirks")?(this.resize(t),this._conn=s(t,"resize",o.hitch(this,"resize",t))):a.set(e,{width:"100%",height:"100%"})}},o.extend(e.BackgroundIframe,{resize:function(t){this.iframe&&a.set(this.iframe,{width:t.offsetWidth+"px",height:t.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),l.push(this.iframe),delete this.iframe)}}),e.BackgroundIframe}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(10),n(7),n(9),n(1),n(33),n(42)],void 0===(a=function(t,e,n,i,a,o,s){var r={_isElementShown:function(t){var e=i.get(t);return"hidden"!=e.visibility&&"collapsed"!=e.visibility&&"none"!=e.display&&"hidden"!=n.get(t,"type")},hasDefaultTabStop:function(t){switch(t.nodeName.toLowerCase()){case"a":return n.has(t,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var e;try{var i=t.contentDocument;if("designMode"in i&&"on"==i.designMode)return!0;e=i.body}catch(n){try{e=t.contentWindow.document.body}catch(t){return!1}}return e&&("true"==e.contentEditable||e.firstChild&&"true"==e.firstChild.contentEditable);default:return"true"==t.contentEditable}},effectiveTabIndex:function(t){return n.get(t,"disabled")?void 0:n.has(t,"tabIndex")?+n.get(t,"tabIndex"):r.hasDefaultTabStop(t)?0:void 0},isTabNavigable:function(t){return r.effectiveTabIndex(t)>=0},isFocusable:function(t){return r.effectiveTabIndex(t)>=-1},_getTabNavigable:function(t){var e,i,a,s,l,d,c={};function u(t){return t&&"input"==t.tagName.toLowerCase()&&t.type&&"radio"==t.type.toLowerCase()&&t.name&&t.name.toLowerCase()}var h=r._isElementShown,p=r.effectiveTabIndex,m=function(t){for(var r=t.firstChild;r;r=r.nextSibling)if(!(1!=r.nodeType||o("ie")<=9&&"HTML"!==r.scopeName)&&h(r)){var g=p(r);if(g>=0){0==g?(e||(e=r),i=r):g>0&&((!a||g<s)&&(s=g,a=r),(!l||g>=d)&&(d=g,l=r));var f=u(r);n.get(r,"checked")&&f&&(c[f]=r)}"SELECT"!=r.nodeName.toUpperCase()&&m(r)}};function g(t){return c[u(t)]||t}return h(t)&&m(t),{first:g(e),last:g(i),lowest:g(a),highest:g(l)}},getFirstInTabbingOrder:function(t,n){var i=r._getTabNavigable(e.byId(t,n));return i.lowest?i.lowest:i.first},getLastInTabbingOrder:function(t,n){var i=r._getTabNavigable(e.byId(t,n));return i.last?i.last:i.highest}};return a.mixin(s,r),r}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(4),n(23)],void 0===(a=function(t,e,n,i){return e("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(t,e){var i=this.containerNode;if(e>0){for(i=i.firstChild;e>0;)1==i.nodeType&&e--,i=i.nextSibling;i?e="before":(i=this.containerNode,e="last")}n.place(t.domNode,i,e),this._started&&!t._started&&t.startup()},removeChild:function(t){if("number"==typeof t&&(t=this.getChildren()[t]),t){var e=t.domNode;e&&e.parentNode&&e.parentNode.removeChild(e)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(e,n){i.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var a=this.getChildren();return a[t.indexOf(a,e)+n]},getIndexOfChild:function(e){return t.indexOf(this.getChildren(),e)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(54),n(10),n(3),n(27),n(9),n(1),n(66),n(2),n(33),n(142),n(242),n(25),n(11),n(161),n(525),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){var b=e("dijit._MasterTooltip",[p,m],{duration:u.defaultDuration,templateString:f,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.bgIframe=new g(this.domNode),this.fadeIn=n.fadeIn({node:this.domNode,duration:this.duration,onEnd:r.hitch(this,"_onShow")}),this.fadeOut=n.fadeOut({node:this.domNode,duration:this.duration,onEnd:r.hitch(this,"_onHide")})},show:function(t,e,n,i,a,o,l){if(!this.aroundNode||this.aroundNode!==e||this.containerNode.innerHTML!=t)if("playing"!=this.fadeOut.status()){this.containerNode.innerHTML=t,a&&this.set("textDir",a),this.containerNode.align=i?"right":"left";var d=h.around(this.domNode,e,n&&n.length?n:_.defaultPosition,!i,r.hitch(this,"orient")),c=d.aroundNodePos;"M"==d.corner.charAt(0)&&"M"==d.aroundCorner.charAt(0)?(this.connectorNode.style.top=c.y+(c.h-this.connectorNode.offsetHeight>>1)-d.y+"px",this.connectorNode.style.left=""):"M"==d.corner.charAt(1)&&"M"==d.aroundCorner.charAt(1)?this.connectorNode.style.left=c.x+(c.w-this.connectorNode.offsetWidth>>1)-d.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top=""),s.set(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=e,this.onMouseEnter=o||w,this.onMouseLeave=l||w}else this._onDeck=arguments},orient:function(t,e,n,i,a){this.connectorNode.style.top="";var s=i.h,r=i.w;t.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[e+"-"+n],this.domNode.style.width="auto";var l=o.position(this.domNode);(c("ie")||c("trident"))&&(l.w+=2);var d=Math.min(Math.max(r,1),l.w);if(o.setMarginBox(this.domNode,{w:d}),"B"==n.charAt(0)&&"B"==e.charAt(0)){var u=o.position(t),h=this.connectorNode.offsetHeight;if(u.h>s){var p=s-(a.h+h>>1);this.connectorNode.style.top=p+"px",this.connectorNode.style.bottom=""}else this.connectorNode.style.bottom=Math.min(Math.max(a.h/2-h/2,0),u.h-h)+"px",this.connectorNode.style.top=""}else this.connectorNode.style.top="",this.connectorNode.style.bottom="";return Math.max(0,l.w-r)},_onShow:function(){c("ie")&&(this.domNode.style.filter="")},hide:function(t){this._onDeck&&this._onDeck[1]==t?this._onDeck=null:this.aroundNode===t&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()),this.onMouseEnter=this.onMouseLeave=w},_onHide:function(){this.domNode.style.cssText="",this.containerNode.innerHTML="",this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});v.showTooltip=function(e,n,i,a,o,s,r){return i&&(i=t.map(i,(function(t){return{after:"after-centered",before:"before-centered"}[t]||t}))),_._masterTT||(v._masterTT=_._masterTT=new b),_._masterTT.show(e,n,i,a,o,s,r)},v.hideTooltip=function(t){return _._masterTT&&_._masterTT.hide(t)};var y="DORMANT";function w(){}var _=e("dijit.Tooltip",p,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(e){t.forEach(this._connections||[],(function(e){t.forEach(e,(function(t){t.remove()}))}),this),this._connectIds=t.filter(r.isArrayLike(e)?e:e?[e]:[],(function(t){return i.byId(t,this.ownerDocument)}),this),this._connections=t.map(this._connectIds,(function(t){var e=i.byId(t,this.ownerDocument),n=this.selector,a=n?function(t){return d.selector(n,t)}:function(t){return t},o=this;return[d(e,a(l.enter),(function(){o._onHover(this)})),d(e,a("focusin"),(function(){o._onHover(this)})),d(e,a(l.leave),r.hitch(o,"_onUnHover")),d(e,a("focusout"),r.hitch(o,"set","state",y))]}),this),this._set("connectId",e)},addTarget:function(e){var n=e.id||e;-1==t.indexOf(this._connectIds,n)&&this.set("connectId",this._connectIds.concat(n))},removeTarget:function(e){var n=e.id||e,i=t.indexOf(this._connectIds,n);i>=0&&(this._connectIds.splice(i,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments),a.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var e=this.connectId;t.forEach(r.isArrayLike(e)?e:[e],this.addTarget,this)},getContent:function(t){return this.label||this.domNode.innerHTML},state:y,_setStateAttr:function(t){if(!(this.state==t||"SHOW TIMER"==t&&"SHOWING"==this.state||"HIDE TIMER"==t&&this.state==y)){switch(this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer),this._showTimer&&(this._showTimer.remove(),delete this._showTimer),t){case y:this._connectNode&&(_.hide(this._connectNode),delete this._connectNode,this.onHide());break;case"SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer((function(){this.set("state","SHOWING")}),this.showDelay));break;case"SHOWING":var e=this.getContent(this._connectNode);if(!e)return void this.set("state",y);_.show(e,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,r.hitch(this,"set","state","SHOWING"),r.hitch(this,"set","state","HIDE TIMER")),this.onShow(this._connectNode,this.position);break;case"HIDE TIMER":this._hideTimer=this.defer((function(){this.set("state",y)}),this.hideDelay)}this._set("state",t)}},_onHover:function(t){this._connectNode&&t!=this._connectNode&&this.set("state",y),this._connectNode=t,this.set("state","SHOW TIMER")},_onUnHover:function(t){this.set("state","HIDE TIMER")},open:function(t){this.set("state",y),this._connectNode=t,this.set("state","SHOWING")},close:function(){this.set("state",y)},onShow:function(){},onHide:function(){},destroy:function(){this.set("state",y),t.forEach(this._connections||[],(function(e){t.forEach(e,(function(t){t.remove()}))}),this),this.inherited(arguments)}});return _._MasterTooltip=b,_.show=v.showTooltip,_.hide=v.hideTooltip,_.defaultPosition=["after-centered","before-centered"],_}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(30),n(62),n(114),n(530),n(84)],void 0===(a=function(t,e,n,i,a){return t("dijit.form.ComboButton",i,{templateString:a,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(t){t.keyCode==e[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(n.focus(this._popupStateNode),t.stopPropagation(),t.preventDefault())},_onArrowKeyDown:function(t){t.keyCode==e[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(n.focus(this.titleNode),t.stopPropagation(),t.preventDefault())},focus:function(t){this.disabled||n.focus("start"==t?this.titleNode:this._popupStateNode)}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo")},function(t,e,n){var i;void 0===(i=function(){var t=/^(?:0|[1-9]\d*)$/;return function(e,n){return!!(n=null==n?9007199254740991:n)&&("number"==typeof e||t.test(e))&&e>-1&&e%1==0&&e<n}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(352),n(182),n(353)],void 0===(a=function(t,e,n){var i=n&&n.isTypedArray;return i?e(i):t}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(87),n(64)],void 0===(a=function(t,e){return t(e,"Map")}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(367),n(374),n(376),n(377),n(378)],void 0===(a=function(t,e,n,i,a){function o(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){for(var n=-1,i=null==t?0:t.length,a=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[a++]=s)}return o}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(131),n(103)],void 0===(a=function(t,e){return function(n,i){for(var a=0,o=(i=t(i,n)).length;null!=n&&a<o;)n=n[e(i[a++])];return a&&a==o?n:void 0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(50),n(132)],void 0===(a=function(t,e){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;return function(a,o){if(t(a))return!1;var s=typeof a;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=a&&!e(a))||(i.test(a)||!n.test(a)||null!=o&&a in Object(o))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(60),n(22),n(10),n(3),n(9),n(27),n(2),n(19),n(15),n(401),n(306)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){window.mobileUtilsLoaded=!1;var h=null,p=null,m={keyboardDown:null,screenState:null,backgroundActivate:null,backgroundUpdate:null,nativeToolbarGlobal:null,nativeToolbarHide:null,mobileZoomFit:null},g={previewMode:"desktop",stateQueue:[],nativeAppVersion:null,previewStyleOptions:[],genericMessageHandlers:{},versionDeferred:null,nativeFeatureConfig:{BLOCK_ACTIVE:{iOS:{version:1},Android:{version:1}},CONTAINER_BACKGROUND_STYLE_CONTROLS:{iOS:{version:1},Android:{version:1}},TOOLBAR:{iOS:{version:1},Android:{version:1}},COLOR_PICKER:{iOS:{version:2},Android:{version:1}},CONTENT_STUDIO_TOOLBAR:{iOS:{version:3},Android:{version:3}},FILE_BROWSER:{iOS:!1,Android:!0}},previewDidLoad:function(t){var e=g.getNativeVersion();this.previewStyleOptions.length>0&&(t.backgroundOptions=this.previewStyleOptions);var n=this.getNativeObject();"iOS"===n&&e.then((function(e){e&&e.hasOwnProperty("versionNumber")?(window.webkit.messageHandlers.webContentDidLoad.postMessage(t),g.triggerNativeGlobalState()):window.webkit.messageHandlers.webContentDidLoad.postMessage({})})),"Android"===n&&e.then((function(e){if(e&&e.hasOwnProperty("versionNumber")){var n=JSON.stringify(t);window.Android.webContentDidLoad(n),g.triggerNativeGlobalState()}else window.Android.webContentDidLoad()}))},getNativeVersion:function(){var t=this.getNativeObject();if(null===g.versionDeferred){var e={id:"versionNumber"};if(g.versionDeferred=new n,g.genericMessageHandlers.versionNumber=function(t){g.versionDeferred.resolve(t)},"iOS"===t&&(window.webkit.messageHandlers.getAppVersion&&window.webkit.messageHandlers.getAppVersion.postMessage?window.webkit.messageHandlers.getAppVersion.postMessage(e):g.versionDeferred.resolve(!1)),"Android"===t)if(window.Android.getAppVersion){var i=JSON.stringify(e);window.Android.getAppVersion(i)}else g.versionDeferred.resolve(!1);t||g.versionDeferred.resolve(!1)}return g.versionDeferred.promise},resetStateQueue:function(){g.stateQueue&&g.stateQueue.length>0&&(g.stateQueue=[])},removeStateQueue:function(t){if(g.stateQueue&&g.stateQueue.length>0){if(t)return void(g.stateQueue=c(g.stateQueue,t));g.stateQueue.pop()}},setScreenState:function(t){var e;g.stateQueue.length>0&&(e=g.stateQueue[g.stateQueue.length-1].state),e&&t.state===e||g.stateQueue.push(t)},triggerNativeGlobalState:function(t){var e={};g.previewMode&&(e.previewState=g.previewMode);var n=g.getNativeVersion(),i=g.getNativeObject();"iOS"===i&&n.then((function(t){t&&t.hasOwnProperty("versionNumber")&&window.webkit.messageHandlers.globalToolbar.postMessage(e)})),"Android"===i&&n.then((function(t){if(t&&t.hasOwnProperty("versionNumber")){var n=JSON.stringify(e);window.Android.globalToolbar(n)}}))},triggerNativeHideToolbar:function(t){var e=g.getNativeVersion(),n=g.getNativeObject();"iOS"===n&&e.then((function(t){t&&t.hasOwnProperty("versionNumber")&&window.webkit.messageHandlers.hideToolbar.postMessage({})})),"Android"===n&&e.then((function(t){if(t&&t.hasOwnProperty("versionNumber")){var e=JSON.stringify({});window.Android.hideToolbar(e)}}))},editorBackgroundActiveEvent:function(t){this.nativeDoneBlock(!0);var e=g.getNativeObject();if("iOS"===e&&window.webkit.messageHandlers.backgroundEdit.postMessage(t),"Android"===e){var n=JSON.stringify(t);window.Android.backgroundEdit(n)}},editorBackgroundChangeEvent:function(t){var e=g.getNativeObject();if("iOS"===e&&window.webkit.messageHandlers.backgroundEdit.postMessage(t),"Android"===e){var n=JSON.stringify(t);window.Android.backgroundEdit(n)}},campaignBlockSelected:function(){var t=g.getNativeVersion();g.nativeDoneBackground(!0),window.top.app.nativeStateHandler.setScreenState({state:"blockActive",backAction:g.nativeDoneBlock});var e=this.getNativeObject();"iOS"===e&&t.then((function(t){t&&t.hasOwnProperty("versionNumber")&&window.webkit.messageHandlers.blockEdit.postMessage({})})),"Android"===e&&t.then((function(t){if(t&&t.hasOwnProperty("versionNumber")){var e=JSON.stringify({});window.Android.blockEdit(e)}}))},mobileUserTriggersBack:function(){if(g.stateQueue.length>0){var t=g.stateQueue[g.stateQueue.length-1];t.backAction&&t.backAction()}else g.mobileSaveAndExit()},mobileSaveAndExit:function(){d.globalPublish("current/block/editor/save/for/mobile");var t=g.getNativeObject();"iOS"===t&&window.webkit.messageHandlers.mobileSaveAndExit.postMessage({}),"Android"===t&&window.Android.mobileSaveAndExit()},didSelectContent:function(t){var e=g.getNativeVersion(),n=this.getNativeObject();"iOS"===n&&e.then((function(e){e&&e.hasOwnProperty("versionNumber")&&window.webkit.messageHandlers.didSelectContent.postMessage({contentID:t})})),"Android"===n&&e.then((function(e){if(e&&e.hasOwnProperty("versionNumber")){var n=JSON.stringify({contentID:t});window.Android.didSelectContent(n)}}))},didChangeContentSource:function(t,e){var n=g.getNativeVersion();e=void 0===e||e;var i=this.getNativeObject();"iOS"===i&&n.then((function(n){n&&n.hasOwnProperty("versionNumber")&&window.webkit.messageHandlers.didChangeContentSource.postMessage({source:t,show_folder_option:e})})),"Android"===i&&n.then((function(n){if(n&&n.hasOwnProperty("versionNumber")){var i=JSON.stringify({source:t,show_folder_option:e});window.Android.didChangeContentSource(i)}}))},didDismissContentSourceSheet:function(){var t=g.getNativeVersion(),e=this.getNativeObject();"iOS"===e&&t.then((function(t){t&&t.hasOwnProperty("versionNumber")&&window.webkit.messageHandlers.didDismissContentSourceSheet.postMessage({})})),"Android"===e&&t.then((function(t){if(t&&t.hasOwnProperty("versionNumber")){var e=JSON.stringify({});window.Android.didDismissContentSourceSheet(e)}}))},androidFileBrowse:function(){"Android"===g.getNativeObject()&&window.Android.openFileBrowse()},nativeColorPicker:function(t){var e=g.getNativeObject();"iOS"===e&&window.webkit.messageHandlers.openColorPicker.postMessage({color:t}),"Android"===e&&window.Android.openColorPicker(t)},checkForNativeFeature:function(t,e){var n=this.getNativeObject(),i=g.nativeFeatureConfig[t][n];return i&&i.version?u(e)>=i.version:i},mobileReauthenticate:function(){var t=g.getNativeObject();"iOS"===t&&window.webkit.messageHandlers.mobileReauth.postMessage({}),"Android"===t&&window.Android.mobileReauth()},getNativeObject:function(){return window.webkit&&window.webkit.messageHandlers?"iOS":!!window.Android&&"Android"},setupNativeListeners:function(){return{messageResponse:this.onNativeMessageResponse,keyboardUp:this.onNativeKeyboardUp,keyboardDown:this.onNativeKeyboardDown,entryAnimationComplete:this.onEntryAnimationComplete,saveAndExitWebApp:this.mobileUserTriggersBack,backNavigate:this.mobileUserTriggersBack,fileUploadCancel:this.nativeFileUploadCancel,fileUploadSuccess:this.nativeFileUploadSuccess,fileUploadError:this.nativeFileUploadError,colorPickSuccess:this.nativeColorPickerSuccess,colorPickClose:this.nativeColorPickerClose,addBlock:this.nativeAddBlock,editBlock:this.nativeEditBlock,duplicateBlock:this.nativeCloneBlock,deleteBlock:this.nativeDeleteBlock,moveBlock:this.nativeSortBlock,doneWithBlockOptions:this.nativeDoneBlock,backgroundColor:this.nativeBackgroundColor,backgroundImage:this.nativeBackgroundImage,backgroundImageClose:this.nativeBackgroundImageClose,backgroundImageFit:this.nativeBackgroundImageFit,backgroundImageClear:this.nativeBackgroundImageClear,doneWithBackgroundOptions:this.nativeDoneBackground,setGlobalToolbarHeight:this.nativeSetGlobalToolbarHeight,togglePreview:g.changePreviewMode,openContentSource:this.openContentSource,openContentFolder:this.openContentFolder}},setupNativeUtils:function(){return{getNativeObject:this.getNativeObject,getNativeVersion:this.getNativeVersion,nativeColorPicker:this.nativeColorPicker,checkForNativeFeature:this.checkForNativeFeature}},setupNativeStateHandler:function(){return{removeStateQueue:g.removeStateQueue,setScreenState:g.setScreenState,resetStateQueue:g.resetStateQueue}},nativeFileUploadCancel:function(){d.globalPublish("content/manager/native/upload/cancel",{})},nativeFileUploadSuccess:function(t){d.globalPublish("content/manager/native/upload/success",t)},nativeFileUploadError:function(t){d.globalPublish("content/manager/native/upload/error",t)},nativeColorPickerSuccess:function(t){d.globalPublish("native/mobile/colorpicker/update",t)},nativeColorPickerClose:function(){d.globalPublish("native/mobile/colorpicker/close")},nativeAddBlock:function(t){var e=t.container||"body";t.blockType;d.globalPublish("native/mobile/add/"+e+"/newBlock",t)},nativeEditBlock:function(){d.globalPublish("native/mobile/block/action/edit")},nativeCloneBlock:function(){d.globalPublish("native/mobile/block/action/clone")},nativeDeleteBlock:function(){d.globalPublish("native/mobile/block/action/delete")},nativeSortBlock:function(t){d.globalPublish("native/mobile/block/action/sort",{moveDirection:t})},nativeDoneBlock:function(t){var e={};e.shouldNotFireGlobalToolbar=t||!1,d.globalPublish("native/mobile/block/action/done",e)},nativeBackgroundColor:function(){d.globalPublish("native/mobile/background/action/color")},nativeBackgroundImage:function(){d.globalPublish("native/mobile/background/action/image")},nativeBackgroundImageClose:function(){d.globalPublish("native/mobile/background/action/image/close")},nativeBackgroundImageFit:function(t){d.globalPublish("native/mobile/background/action/image/fill",{fillType:t})},nativeDoneBackground:function(t){d.globalPublish("native/mobile/background/action/deactivate",{shouldNotFireGlobalToolbar:t})},nativeBackgroundImageClear:function(){d.globalPublish("native/mobile/background/action/image/clear")},nativeBackgroundDeselect:function(){d.globalPublish("native/mobile/background/action/deactivate")},onNativeMessageResponse:function(t){t&&t.id&&g.genericMessageHandlers.hasOwnProperty(t.id)&&(t.data?g.genericMessageHandlers[t.id](t.data):g.genericMessageHandlers[t.id]())},onNativeKeyboardUp:function(t){d.globalPublish("native/mobile/keyboard/up",t)},onNativeKeyboardDown:function(t){d.globalPublish("native/mobile/keyboard/down",t)},nativeKeyboardDownFired:function(){d.globalPublish("current/blur/ckEditor/for/mobile")},onEntryAnimationComplete:function(){d.globalPublish("native/preview/nativeAnimationComplete")},toggleViewportZooming:function(t){var e=document.querySelector("meta[name=viewport]");t?e.setAttribute("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"):e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=5.0")},zoomOnResize:function(){h||(h=r(window,"resize",e(g.zoomPreviewToFit,50))),p||(p=r(window,"orientationchange",e(g.zoomPreviewToFit,500)))},changePreviewMode:function(t){g.previewMode=t,g.zoomPreviewToFit({scrollToTop:!0}),g.triggerNativeGlobalState()},setDefaultMobileType:function(t){g.previewMode=t},zoomPreviewToFit:function(t){g.toggleViewportZooming();var e=i.byId("preview-template"),n=document.body.querySelector("#previewcol > .colbody");if(n&&t&&t.hasOwnProperty("scrollToTop")&&t.scrollToTop&&(n.scrollTop=0),e){var r=e.contentWindow.document.documentElement;if("desktop"===g.previewMode){o.set(e,{transformOrigin:"0 0",transform:"scale(1)"}),a.remove(e,"mobile-preview");var l=s.position(r).w,c=document.documentElement.clientWidth;if(c<l){var u=c/(l+0),h=60/u;o.set(r,{"padding-bottom":h+"px"}),o.set(e,{transform:"scale("+u.toFixed(3)+") translate(0, 0)"}),d.globalPublish("container/controls/scale/preview",{scale:u.toFixed(3)})}}else o.set(e,{transform:"scale(1) translate(-50%, 0)"}),a.add(e,"mobile-preview"),d.globalPublish("container/controls/scale/preview",{scale:1})}},openContentSource:function(){d.globalPublish("native/content/opensource")},openContentFolder:function(){d.globalPublish("native/content/openfolder")}};return function(){for(var e in m)m.hasOwnProperty(e)&&m[e]&&m[e].remove();m.keyboardDown=l.subscribe("native/mobile/keyboard/down",t.hitch(this,g.nativeKeyboardDownFired)),m.backgroundActivate=l.subscribe("native/background/option/activate",t.hitch(g,g.editorBackgroundActiveEvent)),m.backgroundUpdate=l.subscribe("native/background/option/update",t.hitch(g,g.editorBackgroundChangeEvent)),m.nativeToolbarGlobal=l.subscribe("native/toolbar/state/global",t.hitch(this,g.triggerNativeGlobalState)),m.nativeToolbarHide=l.subscribe("native/toolbar/state/hide",t.hitch(this,g.triggerNativeHideToolbar)),m.mobileZoomFit=l.subscribe("mobile/zoom/to/fit",t.hitch(this,g.zoomPreviewToFit)),window.mobileUtilsLoaded=!0}(),g}.apply(e,i))||(t.exports=a)},function(t,e,n){var a,o;a=[n(23),n(1),n(469),n(281),n(10),n(79),n(596),n(125),n(40)],void 0===(o=function(t,e,n,a,o,s,r,l,d){t.experimental("dojox.dtl");var c=e.getObject("dojox.dtl",!0);c._base={},c.TOKEN_BLOCK=-1,c.TOKEN_VAR=-2,c.TOKEN_COMMENT=-3,c.TOKEN_TEXT=3,c._Context=e.extend((function(t){t&&(e._mixin(this,t),t.get&&(this._getter=t.get,delete this.get))}),{push:function(){var t=this,n=e.delegate(this);return n.pop=function(){return t},n},pop:function(){throw new Error("pop() called on empty Context")},get:function(t,e){var n=this._normalize;if(this._getter){var i=this._getter(t);if(void 0!==i)return n(i)}return void 0!==this[t]?n(this[t]):e},_normalize:function(t){return t instanceof Date&&(t.year=t.getFullYear(),t.month=t.getMonth()+1,t.day=t.getDate(),t.date=t.year+"-"+("0"+t.month).slice(-2)+"-"+("0"+t.day).slice(-2),t.hour=t.getHours(),t.minute=t.getMinutes(),t.second=t.getSeconds(),t.microsecond=t.getMilliseconds()),t},update:function(t){var n=this.push();return t&&e._mixin(this,t),n}});var u=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g,h=/\s+/g,p=function(t,e){if((t=t||h)instanceof RegExp||(t=new RegExp(t,"g")),!t.global)throw new Error("You must use a globally flagged RegExp with split "+t);t.exec("");for(var n,i=[],a=0,o=0;(n=t.exec(this))&&(i.push(this.slice(a,t.lastIndex-n[0].length)),a=t.lastIndex,!(e&&++o>e-1)););return i.push(this.slice(a)),i};c.Token=function(t,n){this.token_type=t,this.contents=new String(e.trim(n)),this.contents.split=p,this.split=function(){return String.prototype.split.apply(this.contents,arguments)}},c.Token.prototype.split_contents=function(t){var e,n=[],i=0;for(t=t||999;i++<t&&(e=u.exec(this.contents));)'"'==(e=e[0]).charAt(0)&&'"'==e.slice(-1)?n.push('"'+e.slice(1,-1).replace('\\"','"').replace("\\\\","\\")+'"'):"'"==e.charAt(0)&&"'"==e.slice(-1)?n.push("'"+e.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'"):n.push(e);return n};var m=c.text={_get:function(t,n,i){var a=c.register.get(t,n.toLowerCase(),i);if(!a){if(!i)throw new Error("No tag found for "+n);return null}var o,s=a[1],r=a[2];-1!=s.indexOf(":")&&(o=s.split(":"),s=o.pop());var l=r;/\./.test(r)&&(r=r.replace(/\./g,"/")),d([r],(function(){}));var u=e.getObject(l);return u[s||n]||u[n+"_"]||u[s+"_"]},getTag:function(t,e){return m._get("tag",t,e)},getFilter:function(t,e){return m._get("filter",t,e)},getTemplate:function(t){return new c.Template(m.getTemplateString(t))},getTemplateString:function(t){return s._getText(t.toString())||""},_resolveLazy:function(t,e,n){return e?n?n.fromJson(s._getText(t))||{}:c.text.getTemplateString(t):s.get({handleAs:n?"json":"text",url:t})},_resolveTemplateArg:function(t,e){if(m._isTemplate(t)){if(!e){var n=new l;return n.callback(t),n}return t}return m._resolveLazy(t,e)},_isTemplate:function(t){return void 0===t||"string"==typeof t&&(t.match(/^\s*[<{]/)||-1!=t.indexOf(" "))},_resolveContextArg:function(t,e){if(t.constructor==Object){if(!e){var n=new l;return n.callback(t),n}return t}return m._resolveLazy(t,e,!0)},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(t){return n(t,m._re,m._parseDelims)},_parseDelims:function(t,n,i){if(t)return[c.TOKEN_VAR,t];if(!n)return[c.TOKEN_BLOCK,i];for(var a,o=e.trim(i).split(/\s+/g),s=0;a=o[s];s++)/\./.test(a)&&(a=a.replace(/\./g,"/")),d([a])}};c.Template=e.extend((function(t,e){var n=e?t:m._resolveTemplateArg(t,!0)||"",i=m.tokenize(n),a=new c._Parser(i);this.nodelist=a.parse()}),{update:function(t,e){return m._resolveContextArg(e).addCallback(this,(function(e){var n=this.render(new c._Context(e));return t.forEach?t.forEach((function(t){t.innerHTML=n})):o.byId(t).innerHTML=n,this}))},render:function(t,e){return e=e||this.getBuffer(),t=t||new c._Context({}),this.nodelist.render(t,e)+""},getBuffer:function(){return new r}});var g=/\{\{\s*(.+?)\s*\}\}/g;c.quickFilter=function(t){return t?-1==t.indexOf("{%")?new c._QuickNodeList(n(t,g,(function(t){return new c._Filter(t)}))):void 0:new c._NodeList},c._QuickNodeList=e.extend((function(t){this.contents=t}),{render:function(t,e){for(var n=0,i=this.contents.length;n<i;n++)e=this.contents[n].resolve?e.concat(this.contents[n].resolve(t)):e.concat(this.contents[n]);return e},dummyRender:function(t){return this.render(t,c.Template.prototype.getBuffer()).toString()},clone:function(t){return this}}),c._Filter=e.extend((function(t){if(!t)throw new Error("Filter must be called with variable name");this.contents=t;var e=this._cache[t];e?(this.key=e[0],this.filters=e[1]):(this.filters=[],n(t,this._re,this._tokenize,this),this._cache[t]=[this.key,this.filters])}),{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:'"',1:'"',2:"",8:'"'},_args:{4:'"',5:'"',6:"",7:"'"},_tokenize:function(){for(var t,n,i=0,a=[];i<arguments.length;i++)a[i]=void 0!==arguments[i]&&"string"==typeof arguments[i]&&arguments[i];if(this.key){for(t in this._args)if(a[t]){var o=arguments[t];"'"==this._args[t]?o=o.replace(/\\'/g,"'"):'"'==this._args[t]&&(o=o.replace(/\\"/g,'"')),n=[!this._args[t],o];break}var s=m.getFilter(arguments[3]);if(!e.isFunction(s))throw new Error(arguments[3]+" is not registered as a filter");this.filters.push([s,n])}else for(t in this._values)if(a[t]){this.key=this._values[t]+arguments[t]+this._values[t];break}},getExpression:function(){return this.contents},resolve:function(t){if(void 0===this.key)return"";for(var e,n=this.resolvePath(this.key,t),i=0;e=this.filters[i];i++)n=e[1]?e[1][0]?e[0](n,this.resolvePath(e[1][1],t)):e[0](n,e[1][1]):e[0](n);return n},resolvePath:function(t,n){var i,a,o=t.charAt(0),s=t.slice(-1);if(isNaN(parseInt(o)))if('"'==o&&o==s)i=t.slice(1,-1);else{if("true"==t)return!0;if("false"==t)return!1;if("null"==t||"None"==t)return null;if(a=t.split("."),i=n.get(a[0]),e.isFunction(i)){var r=n.getThis&&n.getThis();i=i.alters_data?"":r?i.call(r):""}for(var l=1;l<a.length;l++){var d=a[l];if(!i)return"";var u=i;if(e.isObject(i)&&"items"==d&&void 0===i[d]){var h=[];for(var p in i)h.push([p,i[p]]);i=h}else{if(i.get&&e.isFunction(i.get)&&i.get.safe)i=i.get(d);else{if(void 0===i[d]){i=i[d];break}i=i[d]}e.isFunction(i)?i=i.alters_data?"":i.call(u):i instanceof Date&&(i=c._Context.prototype._normalize(i))}}}else i=-1==t.indexOf(".")?parseInt(t):parseFloat(t);return i}}),c._TextNode=c._Node=e.extend((function(t){this.contents=t}),{set:function(t){return this.contents=t,this},render:function(t,e){return e.concat(this.contents)},isEmpty:function(){return!e.trim(this.contents)},clone:function(){return this}}),c._NodeList=e.extend((function(t){this.contents=t||[],this.last=""}),{push:function(t){return this.contents.push(t),this},concat:function(t){return this.contents=this.contents.concat(t),this},render:function(t,e){for(var n=0;n<this.contents.length;n++)if(!(e=this.contents[n].render(t,e)))throw new Error("Template must return buffer");return e},dummyRender:function(t){return this.render(t,c.Template.prototype.getBuffer()).toString()},unrender:function(){return arguments[1]},clone:function(){return this},rtrim:function(){for(;i=this.contents.length-1,this.contents[i]instanceof c._TextNode&&this.contents[i].isEmpty();)this.contents.pop();return this}}),c._VarNode=e.extend((function(t){this.contents=new c._Filter(t)}),{render:function(t,e){var n=this.contents.resolve(t);return n.safe||(n=c._base.escape(""+n)),e.concat(n)}}),c._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1]},this.clone=function(){return this}},c._Parser=e.extend((function(t){this.contents=t}),{i:0,parse:function(t){var e,n={};t=t||[];for(var i=0;i<t.length;i++)n[t[i]]=!0;for(var a=new c._NodeList;this.i<this.contents.length;)if("string"==typeof(e=this.contents[this.i++]))a.push(new c._TextNode(e));else{var o=e[0],s=e[1];if(o==c.TOKEN_VAR)a.push(new c._VarNode(s));else if(o==c.TOKEN_BLOCK){if(n[s])return--this.i,a;var r=s.split(/\s+/g);if(r.length){r=r[0];var l=m.getTag(r);l&&a.push(l(this,new c.Token(o,s)))}}}if(t.length)throw new Error("Could not find closing tag(s): "+t.toString());return this.contents.length=0,a},next_token:function(){var t=this.contents[this.i++];return new c.Token(t[0],t[1])},delete_first_token:function(){this.i++},skip_past:function(t){for(;this.i<this.contents.length;){var e=this.contents[this.i++];if(e[0]==c.TOKEN_BLOCK&&e[1]==t)return}throw new Error("Unclosed tag found when looking for "+t)},create_variable_node:function(t){return new c._VarNode(t)},create_text_node:function(t){return new c._TextNode(t||"")},getTemplate:function(t){return new c.Template(t)}}),c.register={_registry:{attributes:[],tags:[],filters:[]},get:function(t,e){for(var n,i=c.register._registry[t+"s"],a=0;n=i[a];a++)if("string"==typeof n[0]){if(n[0]==e)return n}else if(e.match(n[0]))return n},getAttributeTags:function(){for(var t,n=[],i=c.register._registry.attributes,a=0;t=i[a];a++)if(3==t.length)n.push(t);else{var o=e.getObject(t[1]);o&&e.isFunction(o)&&(t.push(o),n.push(t))}return n},_any:function(t,n,i){for(var a in i)for(var o,s=0;o=i[a][s];s++){var r=o;if(e.isArray(o)&&(r=o[0],o=o[1]),"string"==typeof r){if("attr:"==r.substr(0,5)){var l=o;"attr:"==l.substr(0,5)&&(l=l.slice(5)),c.register._registry.attributes.push([l.toLowerCase(),n+"."+a+"."+l])}r=r.toLowerCase()}c.register._registry[t].push([r,o,n+"."+a])}},tags:function(t,e){c.register._any("tags",t,e)},filters:function(t,e){c.register._any("filters",t,e)}};var f=/&/g,v=/</g,b=/>/g,y=/'/g,w=/"/g;return c._base.escape=function(t){return c.mark_safe(t.replace(f,"&amp;").replace(v,"&lt;").replace(b,"&gt;").replace(w,"&quot;").replace(y,"&#39;"))},c._base.safe=function(t){return"string"==typeof t&&(t=new String(t)),"object"==typeof t&&(t.safe=!0),t},c.mark_safe=c._base.safe,c.register.tags("dojox.dtl.tag",{date:["now"],logic:["if","for","ifequal","ifnotequal"],loader:["extends","block","include","load","ssi"],misc:["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],loop:["cycle","ifchanged","regroup"]}),c.register.filters("dojox.dtl.filter",{dates:["date","time","timesince","timeuntil"],htmlstrings:["linebreaks","linebreaksbr","removetags","striptags"],integers:["add","get_digit"],lists:["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],logic:["default","default_if_none","divisibleby","yesno"],misc:["filesizeformat","pluralize","phone2numeric","pprint"],strings:["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]}),c.register.filters("dojox.dtl",{_base:["escape","safe"]}),c}.apply(e,a))||(t.exports=o)},function(t,e,n){var i,a;i=[n(0),n(33)],void 0===(a=function(t,e){return t([],{createStyleNode:function(t,e){var n;if(e){var i=t.getElementById(e);if(i)return i}return(n=document.createElement("style")).type="text/css",n.setAttribute("id",e||""),t.getElementsByTagName("head")[0].appendChild(n),n},getStyleSheet:function(t){var n;return e("ie")<9?n=t.styleSheet:(t.appendChild(document.createTextNode("")),n=t.sheet),this.addCSSRule(n,"body","width:100%;height:100%;",0),n},addCSSRule:function(t,e,n,i){i=void 0!==i?i:"cssRules"in t?t.cssRules.length:t.rules.length,"insertRule"in t?t.insertRule(e+"{"+n+"}",i):"addRule"in t&&t.addRule(e,n,i)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(10),n(3),n(34),n(1),n(2),n(85),n(53),n(32),n(84),n(14)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h=e("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){for(var e in this.inherited(arguments),t.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],(function(t){this.watch(t,o.hitch(this,"_setStateClass"))}),this),this.cssStateNodes||{})this._trackMouseState(this[e],this.cssStateNodes[e]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(t){if(!this.disabled)switch(t.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){var e=this.baseClass.split(" ");function n(n){e=e.concat(t.map(e,(function(t){return t+n})),"dijit"+n)}this.isLeftToRight()||n("Rtl");var i="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&n(i),this.state&&n(this.state),this.selected&&n("Selected"),this._opened&&n("Opened"),this.disabled?n("Disabled"):this.readOnly?n("ReadOnly"):this.active?n("Active"):this.hovering&&n("Hover"),this.focused&&n("Focused");var a=this.stateNode||this.domNode,o={};t.forEach(a.className.split(" "),(function(t){o[t]=!0})),"_stateClasses"in this&&t.forEach(this._stateClasses,(function(t){delete o[t]})),t.forEach(e,(function(t){o[t]=!0}));var s=[];for(var r in o)s.push(r);a.className=s.join(" "),this._stateClasses=e},_subnodeCssMouseEvent:function(t,e,n){if(!this.disabled&&!this.readOnly)switch(n.type){case"mouseover":case"MSPointerOver":case"pointerover":a(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":a(!1),o(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":o(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":o(!1);break;case"focus":case"focusin":s(!0);break;case"blur":case"focusout":s(!1)}function a(n){i.toggle(t,e+"Hover",n)}function o(n){i.toggle(t,e+"Active",n)}function s(n){i.toggle(t,e+"Focused",n)}},_trackMouseState:function(t,e){t._cssState=e}});return r((function(){function t(t,e,i){if(!i||!n.isDescendant(i,e))for(var a=e;a&&a!=i;a=a.parentNode)if(a._cssState){var o=u.getEnclosingWidget(a);o&&(a==o.domNode?o._cssMouseEvent(t):o._subnodeCssMouseEvent(a,a._cssState,t))}}var e,i=d.body();s(i,l.over,(function(e){t(e,e.target,e.relatedTarget)})),s(i,l.out,(function(e){t(e,e.target,e.relatedTarget)})),s(i,c.press,(function(n){t(n,e=n.target)})),s(i,c.release,(function(n){t(n,e),e=null})),s(i,"focusin, focusout",(function(t){var e=t.target;if(e._cssState&&!e.getAttribute("widgetId")){var n=u.getEnclosingWidget(e);n&&n._subnodeCssMouseEvent(e,e._cssState,t)}}))})),h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(125),n(10),n(7),n(3),n(27),n(9),n(34),n(30),n(1),n(2),n(53),n(14),n(62),n(106),n(76)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){return t("dijit._HasDropDown",g,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(t){this.disabled||this.readOnly||("MSPointerDown"!=t.type&&"pointerdown"!=t.type&&t.preventDefault(),this.own(c.once(this.ownerDocument,u.release,d.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(t){var e=this.dropDown,n=!1;if(t&&this._opened){var i=o.position(this._buttonNode,!0);if(!(t.pageX>=i.x&&t.pageX<=i.x+i.w&&t.pageY>=i.y&&t.pageY<=i.y+i.h)){for(var s=t.target;s&&!n;)a.contains(s,"dijitPopup")?n=!0:s=s.parentNode;if(n){if(s=t.target,e.onItemClick){for(var r;s&&!(r=h.byNode(s));)s=s.parentNode;r&&r.onClick&&r.getParent&&r.getParent().onItemClick(r,t)}return}}}this._opened?e.focus&&(!1!==e.autoFocus||"mouseup"==t.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer((function(){e.focus(),delete this._focusDropDownTimer}))):this.focus&&this.defer("focus")},_onDropDownClick:function(t){this._stopClickEvents&&(t.stopPropagation(),t.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var t={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";a.add(this._arrowWrapperNode||this._buttonNode,"dijit"+t+"ArrowButton")},postCreate:function(){this.inherited(arguments);var t=this.focusNode||this.domNode;this.own(c(this._buttonNode,u.press,d.hitch(this,"_onDropDownMouseDown")),c(this._buttonNode,"click",d.hitch(this,"_onDropDownClick")),c(t,"keydown",d.hitch(this,"_onKey")),c(t,"keyup",d.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0),this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(t){if(!this.disabled&&!this.readOnly){var e=this.dropDown,n=t.target;if(e&&this._opened&&e.handleKey&&!1===e.handleKey(t))return t.stopPropagation(),void t.preventDefault();e&&this._opened&&t.keyCode==l.ESCAPE?(this.closeDropDown(),t.stopPropagation(),t.preventDefault()):!this._opened&&(t.keyCode==l.DOWN_ARROW||(t.keyCode==l.ENTER||t.keyCode==l.SPACE&&(!this._searchTimer||t.ctrlKey||t.altKey||t.metaKey))&&("input"!==(n.tagName||"").toLowerCase()||n.type&&"text"!==n.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,t.stopPropagation(),t.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var t=this.dropDown;t&&t.focus&&this.defer(d.hitch(t,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(t){t()},loadAndOpenDropDown:function(){var t=new e,n=d.hitch(this,(function(){this.openDropDown(),t.resolve(this.dropDown)}));return this.isLoaded()?n():this.loadDropDown(n),t},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var t=this.dropDown,e=t.domNode,n=this._aroundNode||this.domNode,s=this,r=m.open({parent:this,popup:t,around:n,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){s.closeDropDown(!0)},onCancel:function(){s.closeDropDown(!0)},onClose:function(){i.set(s._popupStateNode,"popupActive",!1),a.remove(s._popupStateNode,"dijitHasDropDownOpen"),s._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&n.offsetWidth>t._popupWrapper.offsetWidth){var l=n.offsetWidth-t._popupWrapper.offsetWidth,c={w:t.domNode.offsetWidth+l};d.isFunction(t.resize)?t.resize(c):o.setMarginBox(e,c),"R"==r.corner[1]&&(t._popupWrapper.style.left=t._popupWrapper.style.left.replace("px","")-l+"px")}return i.set(this._popupStateNode,"popupActive","true"),a.add(this._popupStateNode,"dijitHasDropDownOpen"),this._set("_opened",!0),this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",t.id),"presentation"===e.getAttribute("role")||e.getAttribute("aria-labelledby")||e.setAttribute("aria-labelledby",this.id),r},closeDropDown:function(t){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),t&&this.focus&&this.focus(),m.close(this.dropDown),this._opened=!1)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(0),n(7),n(34),n(6),n(43),n(288),n(1103),n(1104),n(81),n(84)],void 0===(a=function(t,e,i,a,o,s,r,l,d){return a("dijit-legacy-requires")&&s(0,(function(){Promise.resolve().then((function(){n(291)})).catch(n.oe)})),e("dijit.form.CheckBox",[r,l],{templateString:d,baseClass:"dijitCheckBox",_setValueAttr:function(t,e){"string"==typeof t&&(this.inherited(arguments),t=!0),this._created&&this.set("checked",t,e)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments),this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&o("label[for='"+this.id+"']").addClass("dijitFocusedLabel"),this.inherited(arguments)},_onBlur:function(){this.id&&o("label[for='"+this.id+"']").removeClass("dijitFocusedLabel"),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(34),n(1)],void 0===(a=function(t,e){var n={getDaysInMonth:function(t){var e=t.getMonth();return 1==e&&n.isLeapYear(t)?29:[31,28,31,30,31,30,31,31,30,31,30,31][e]},isLeapYear:function(t){var e=t.getFullYear();return!(e%400&&(e%4||!(e%100)))},getTimezoneName:function(t){var e,n=t.toString(),i="",a=n.indexOf("(");if(a>-1)i=n.substring(++a,n.indexOf(")"));else{var o=/([A-Z\/]+) \d{4}$/;(e=n.match(o))?i=e[1]:(o=/ ([A-Z\/]+)$/,(e=(n=t.toLocaleString()).match(o))&&(i=e[1]))}return"AM"==i||"PM"==i?"":i},compare:function(t,e,n){return t=new Date(+t),e=new Date(+(e||new Date)),"date"==n?(t.setHours(0,0,0,0),e.setHours(0,0,0,0)):"time"==n&&(t.setFullYear(0,0,0),e.setFullYear(0,0,0)),t>e?1:t<e?-1:0},add:function(t,e,n){var i=new Date(+t),a=!1,o="Date";switch(e){case"day":break;case"weekday":var s,r,l=n%5;l?(s=l,r=parseInt(n/5)):(s=n>0?5:-5,r=n>0?(n-5)/5:(n+5)/5);var d=t.getDay(),c=0;6==d&&n>0?c=1:0==d&&n<0&&(c=-1);var u=d+s;0!=u&&6!=u||(c=n>0?2:-2),n=7*r+s+c;break;case"year":o="FullYear",a=!0;break;case"week":n*=7;break;case"quarter":n*=3;case"month":a=!0,o="Month";break;default:o="UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s"}return o&&i["set"+o](i["get"+o]()+n),a&&i.getDate()<t.getDate()&&i.setDate(0),i},difference:function(t,e,i){i=i||"day";var a=(e=e||new Date).getFullYear()-t.getFullYear(),o=1;switch(i){case"quarter":var s=t.getMonth(),r=e.getMonth(),l=Math.floor(s/3)+1,d=Math.floor(r/3)+1;o=(d+=4*a)-l;break;case"weekday":var c=Math.round(n.difference(t,e,"day")),u=parseInt(n.difference(t,e,"week")),h=c%7;if(0==h)c=5*u;else{var p=0,m=t.getDay(),g=e.getDay();u=parseInt(c/7),h=c%7;var f=new Date(t);f.setDate(f.getDate()+7*u);var v=f.getDay();if(c>0)switch(!0){case 6==m:p=-1;break;case 0==m:p=0;break;case 6==g:p=-1;break;case 0==g:p=-2;break;case v+h>5:p=-2}else if(c<0)switch(!0){case 6==m:p=0;break;case 0==m:p=1;break;case 6==g:p=2;break;case 0==g:p=1;break;case v+h<0:p=2}c+=p,c-=2*u}o=c;break;case"year":o=a;break;case"month":o=e.getMonth()-t.getMonth()+12*a;break;case"week":o=parseInt(n.difference(t,e,"day")/7);break;case"day":o/=24;case"hour":o/=60;case"minute":o/=60;case"second":o/=1e3;case"millisecond":o*=e.getTime()-t.getTime()}return Math.round(o)}};return e.mixin(e.getObject("dojo.date",!0),n),n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return function(e){return t(e)}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){var t=Object.prototype;return function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(127),n(362),n(363),n(364),n(365),n(366)],void 0===(a=function(t,e,n,i,a,o){function s(e){var n=this.__data__=new t(e);this.size=n.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(171),n(380),n(381)],void 0===(a=function(t,e,n){function i(e){var n=-1,i=null==e?0:e.length;for(this.__data__=new t;++n<i;)this.add(e[n])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,i}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){return t.has(e)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(23)],void 0===(a=function(t){return t.dojox}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(303),n(548),n(398),n(445),n(549),n(396),n(224),n(88),n(399),n(550),n(121)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u=/\b__p \+= '';/g,h=/\b(__p \+=) '' \+/g,p=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,g=/($^)/,f=/['\n\r\u2028\u2029\\]/g;return function(v,b,y){var w=d.imports._.templateSettings||d;y&&s(v,b,y)&&(b=void 0),v=c(v),b=t({},b,w,i);var _,C,k=t({},b.imports,w.imports,i),S=r(k),x=n(k,S),I=0,T=b.interpolate||g,A="__p += '",j=RegExp((b.escape||g).source+"|"+T.source+"|"+(T===l?m:g).source+"|"+(b.evaluate||g).source+"|$","g"),E="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";v.replace(j,(function(t,e,n,i,o,s){return n||(n=i),A+=v.slice(I,s).replace(f,a),e&&(_=!0,A+="' +\n__e("+e+") +\n'"),o&&(C=!0,A+="';\n"+o+";\n__p += '"),n&&(A+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),I=s+t.length,t})),A+="';\n";var P=b.variable;P||(A="with (obj) {\n"+A+"\n}\n"),A=(C?A.replace(u,""):A).replace(h,"$1").replace(p,"$1;"),A="function("+(P||"obj")+") {\n"+(P?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_?", __e = _.escape":"")+(C?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+A+"return __p\n}";var D=e((function(){return Function(S,E+"return "+A).apply(void 0,x)}));if(D.source=A,o(D))throw D;return D}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(39),n(76),n(2),n(10),n(14),n(7),n(28),n(55),n(36),n(34),n(1),n(5),n(32),n(22),n(46),n(4),n(3),n(9),n(27),n(6),n(37),n(135),n(257),n(43),n(1159),n(21),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A){var j=[];k.onEsc((function(){var t=E();t&&t.onEsc()}));var E=function(){return j.length?j.slice(-1)[0]:null};return t([e,n,i],{widgetsInTemplate:!0,titleText:"Preview",badgeText:"Badge Text",emailText:null,paneClasses:"topsliderpane-base",displayActive:!1,templateString:I,zIndex:null,postMixInProperties:function(){this.templateString=h.replace(this.templateString,{_content:this.content})},postCreate:function(){x(h.hitch(this,(function(){v.place(this.domNode,m.body()),this.zIndex&&y.set(this.domNode,"zIndex",""+this.zIndex)}))),this.closeLink&&a(this.closeLink,"click",h.hitch(this,(function(t){t.preventDefault(),this.hide()}))),this.closeAllLink&&a(this.closeAllLink,"click",h.hitch(this,(function(t){t.preventDefault(),this.onCloseAll()})));var t=_(".mobile-top-nav",this.domNode)[0];t&&(a(t,"click",(function(){b.toggle(this,"active")})),_(".exitnav a",this.domNode).forEach((function(e){a(e,"click",(function(){b.remove(t,"active")}))}))),this.title&&this.titleText&&l.set(this.title,this.titleText),this.badge&&this.badgeText?l.set(this.badge,this.badgeText):v.destroy(this.badge),this.emailTitle&&this.emailText?l.set(this.emailTitle,this.emailText):v.destroy(this.emailTitle),b.add(this.domNode,this.paneClasses)},show:function(t){S.enableFullscreen(!0);var e=new g,n=function(){this.title&&this.titleText&&l.set(this.title,this.titleText),c(this.domNode,"stop"),this.content&&y.set(this.content,"opacity",0)}.bind(this),i=function(){c(this.domNode,{opacity:[1,"easeIn",.4]},{duration:225,display:"block",begin:function(){y.set(this.domNode,{"z-index":"100"})}.bind(this),complete:function(){this.scrollTopCache=w.docScroll().y,b.add(_("html")[0],["overflow-hidden"]),b.add(m.body(),["overflow-hidden","absolute","full-height"]),this.closeLink&&(this.closeLink.focus(),this.closeLink.blur()),this.content&&c(this.content,{opacity:[1,"easeIn",0]},{delay:400,duration:225}),f(this._paneDidShow(),e.resolve)}.bind(this)})}.bind(this),a=function(){j.push(this),v.place(this.domNode,m.body(),"last"),this.displayActive||(this.displayActive=!0,f(n(this),function(){return f(this._paneWillShow(),function(){i(this,e)}.bind(this))}.bind(this))),t&&t.zIndex&&y.set(this.domNode,"zIndex",""+t.zIndex)}.bind(this),o=E();return!(t&&t.forceOnTop)&&o?o!==this&&o.hide().then(a):a(),e.promise},hide:function(){S.enableFullscreen(!1);var t=new g,e=function(){this.displayActive=!1,b.remove(_("html")[0],["overflow-hidden"]),b.remove(m.body(),["overflow-hidden","absolute","full-height"]),c(this.domNode,"stop"),c(this.content,{opacity:[0,"easeOut",1]},{duration:225}),c(this.domNode,{opacity:[.4,"easeOut",1],zIndex:[-1,"easeOut",95]},{duration:225,display:"none",complete:function(){m.body().scrollTop=this.scrollTopCache,document.documentElement.scrollTop=this.scrollTopCache;var e=j.indexOf(this);e>-1&&j.splice(e,1),f(this._paneDidHide(),t.resolve)}.bind(this)}),this.displayActive=!1}.bind(this);return f(this._paneWillHide(),(function(){e()})),t.promise},onEsc:function(){this.focused&&this.hide()},onCloseAll:function(){j.reverse().map((function(t){t.hide()}))},_paneWillShow:function(){return null},_paneWillHide:function(){return null},_paneDidShow:function(){return null},_paneDidHide:function(){return null}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(31),n(115),n(8),n(56)],void 0===(a=function(t,e,n,i){return{baseUrl:"/lists/members/",getProfileOverviewUrl:"get-subscriber-profile",getVIPUrl:"get-VIP-status",addVIPUrl:"add-gmonkey",removeVIPUrl:"rem-gmonkey",getStarRatingUrl:"get-star-rating",unsubscribeMemberUrl:"unsubscribe",subscribeMemberUrl:"subscribe",resendMemberUrl:"resubscribe",unarchiveMemberUrl:"unarchive",archiveMemberUrl:"archive",deleteMemberUrl:"delete",saveNoteUrl:"add-note",deleteNoteUrl:"delete-note",getBasicInfoUrl:"contact-basic-info",getCustomInfoUrl:"contact-merge-info",getAllInfoUrl:"contact-all-merge-info",getGroupsInfoUrl:"get-groups",getGdprInfoUrl:"gdpr-info",getMetaInfoUrl:"contact-meta-info",saveLanguageUrl:"set-language",saveFormatUrl:"edit-optin-post",getActivityFeedUrl:"feed",overrideEmailClientUrl:"override-email-client",overridePredictedDemographicsUrl:"override-predicted-demographics",overrideSocialProfileUrl:"override-social-profile",overrideLocationUrl:"override-location",pendingAppointmentsUrl:"pending-appointments",constructUrl:function(t,e,i){return n.toUrl(this.baseUrl+t+this.constructQueryString(e,i))},constructQueryString:function(t,e){var n="";if(t&&(n+="?id="+t),e)for(var i in e)e.hasOwnProperty(i)&&(n+="&"+i+"="+e[i]);return n},getRequest:function(e,n,i,a){return t.get(e,{handleAs:a||"text"}).then((function(t){n&&n(t)}),(function(t){i&&i(t)}))},postRequest:function(e,n,i,a){return t.post(e,{handleAs:"json",data:n}).then((function(t){i&&i(t)}),(function(t){a&&a(t)}))},getProfileOverview:function(t,e){var n=this.constructUrl(this.getProfileOverviewUrl,t);this.getRequest(n,e,null,"json")},getVIPStatus:function(t,e){var n=this.constructUrl(this.getVIPUrl,t);this.getRequest(n,e,null,"json")},addVIP:function(t,e){var n=this.constructUrl(this.addVIPUrl,t);this.getRequest(n,e,null,"text")},removeVIP:function(t,e){var n=this.constructUrl(this.removeVIPUrl,t);this.getRequest(n,e,null,"text")},getStarRating:function(t,e){var n=this.constructUrl(this.getStarRatingUrl,t);this.getRequest(n,e,null,"json")},unsubscribeMember:function(t,e){var n=this.constructUrl(this.unsubscribeMemberUrl,t);this.getRequest(n,e,null,"text")},subscribeMember:function(t,e){var n=this.constructUrl(this.subscribeMemberUrl,t);this.getRequest(n,e,null,"text")},resendMember:function(t,e){var n=this.constructUrl(this.resendMemberUrl,t);this.getRequest(n,e,null,"text")},unarchiveMember:function(t,e,n){var i=this.constructUrl(this.unarchiveMemberUrl,e,{list_id:t,list_member_ids:JSON.stringify([e])});this.getRequest(i,n,null,"json")},archiveMember:function(t,e){var n=this.constructUrl(this.archiveMemberUrl,t);this.getRequest(n,e,null,"text")},deleteMember:function(t,e){var n=this.constructUrl(this.deleteMemberUrl,t,{redirect:!1});this.getRequest(n,e,null,"text")},pendingAppointments:function(t,e){var n=this.constructUrl(this.pendingAppointmentsUrl,t);this.getRequest(n,e,null,"json")},addNote:function(t,e,n){var i=encodeURIComponent(e),a=this.constructUrl(this.saveNoteUrl,t,{note:i});this.getRequest(a,n,null,"text")},editNote:function(t,e,n,i){var a=encodeURIComponent(e),o=this.constructUrl(this.saveNoteUrl,t,{note:a,"note-id":n});this.getRequest(o,i,null,"text")},deleteNote:function(t,e,n){var i=this.constructUrl(this.deleteNoteUrl,t,{"note-id":e});this.getRequest(i,n,null,"text")},getInfoList:function(t,e,n){switch(e){case"basic":this.getBasicInfo(t,n);break;case"custom":this.getCustomInfo(t,n);break;case"all":this.getAllInfo(t,n);break;case"groups":this.getGroupsInfo(t,n);break;case"gdpr":this.getGdprInfo(t,n);break;case"meta":this.getMetaInfo(t,n)}},getBasicInfo:function(t,e){var n=this.constructUrl(this.getBasicInfoUrl,t);this.getRequest(n,e,null,"json")},getAllInfo:function(t,e){var n=this.constructUrl(this.getAllInfoUrl,t);this.getRequest(n,e,null,"json")},getCustomInfo:function(t,e){var n=this.constructUrl(this.getCustomInfoUrl,t);this.getRequest(n,e,null,"json")},getGroupsInfo:function(t,e){var n=this.constructUrl(this.getGroupsInfoUrl,t);this.getRequest(n,e,null,"json")},getGdprInfo:function(t,e){var n=this.constructUrl(this.getGdprInfoUrl,t);this.getRequest(n,e,null,"json")},getMetaInfo:function(t,e){var n=this.constructUrl(this.getMetaInfoUrl,t);this.getRequest(n,e,null,"json")},submitMetaInfo:function(t,n,i){var a=this,o=this.constructUrl(this.saveLanguageUrl,t,{lang:n});this.getRequest(o,(function(){var n=a.constructUrl(a.saveFormatUrl,t,{email_type:i});a.getRequest(n,(function(){e(""),location.reload()}),null,"text")}),null,"text")},overrideLocation:function(t,e){var n=this.constructUrl(this.overrideLocationUrl,t,{});this.getRequest(n,e,null,"text")},overrideEmailClient:function(t,e){var n=this.constructUrl(this.overrideEmailClientUrl,t,{});this.getRequest(n,e,null,"text")},overridePredictedDemographics:function(t,e){var n=this.constructUrl(this.overridePredictedDemographicsUrl,t,{});this.getRequest(n,e,null,"text")},overrideSocialProfile:function(t,e){var n=this.constructUrl(this.overrideSocialProfileUrl,t,{});this.getRequest(n,e,null,"text")},getActivityFeed:function(t,e,n,i,a){var o={slice_size:i,slice_start:n};e&&"all"!==e&&(o.types=e);var s=this.constructUrl(this.getActivityFeedUrl,t,o);this.getRequest(s,a,null,"json")},structureActivityFeed:function(t){var e=[],n="",a=[];return t.forEach((function(t){if(t.creation_time.date&&t.creation_time.date.length>0){var o=new Date(t.formatted_user_time),s=i.getDateOnlyString(o,!1);if(s!==n){var r={date:n=s,feed:a=[]};e.push(r)}t.displayTime=i.getTimeString(o,!0),a.push(t)}})),e}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(1),n(2),n(7),n(3),n(9),n(18),n(60),n(8),n(15),n(650),n(22),n(10),n(6),n(5),n(1482),n(1483)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b){var y=/[^\w\s-]/g;return t([e,n],{label:"Campaign URL",templateString:v,showInput:!0,showFullPreview:!0,rootDomain:null,campaignToken:null,brandToken:null,hasEditedCampaignUrl:!1,urlExistResponse:null,campaignId:null,inputSetter:null,editMode:!1,originalValue:null,rootDomainToken:null,originalInput:null,urlExistsPath:"campaigns/campaign-archive-url-exists",postCreate:function(){this.inherited(arguments);var t=this;t.originalValue=t.campaignToken,t.rootDomainToken="http://"+this.rootDomain+"/"+this.brandToken+"/",this.originalInput=g("input[type=text]",this.containerNode)[0],this.originalInput&&(r.set(this.originalInput,"display","none"),""!==this.originalInput.value?this.campaignToken=this.originalInput.value:this.originalInput.value=this.campaignToken,f.forEach(this.containerNode.children,(function(e){s.contains(e,"invalid-error")&&s.add(t.urlTokenInput,"invalid")}))),s.toggle(this.urlTokenInput,"hide",!this.showInput),s.toggle(this.urlTokenCharCount,"hide",!this.showInput),s.toggle(this.campaignUrlPreview,"hide",!this.showFullPreview),this.campaignToken&&(this.urlTokenInput.value=this.campaignToken,this.campaignTokenWrap.innerHTML=this.campaignToken,this.rootDomainTokenWrap.innerHTML=this.rootDomainToken,s.add(this.campaignTokenWrap,"c-campaignArchiveUrl_token"),this.campaignTokenNum.innerHTML=150-this.campaignToken.length,this.editMode||this.value===t.originalValue||""===this.value||t.campaignUrlExists(this.campaignToken)),this._initCampaignArchiveInput(),this.inputSetter&&this._initInputSetter(),this.watch("inputSetter",(function(){this._initInputSetter()}))},_initCampaignArchiveInput:function(){var t=this;a(this.urlTokenInput,"keyup",d((function(){""===this.value&&t.hasEditedCampaignUrl?u.addError(t.urlTokenInput,"Please complete your campaign URL"):t.editMode||this.value===t.originalValue||this.value.match(y)||t.campaignUrlExists(this.value)}),1e3)),a(this.urlTokenInput,"keyup",i.hitch(this,(function(){this.hasEditedCampaignUrl=!0,this._setUrlValue(this.urlTokenInput,this.campaignTokenWrap)}))),a(this.urlTokenInput,"focus",i.hitch(this,(function(){s.add(this.campaignTokenWrap,"c-campaignArchiveUrl_token--editing")}))),a(this.urlTokenInput,"blur",i.hitch(this,(function(){s.remove(this.campaignTokenWrap,"c-campaignArchiveUrl_token--editing");var t=this._removeExtraDashes(this.campaignToken);this.campaignToken=t,o.set(this.urlTokenInput,"value",this.campaignToken),this.campaignTokenWrap.innerHTML=this.campaignToken,this.originalInput&&o.set(this.originalInput,"value",this.campaignToken)})))},_initInputSetter:function(){var t=this;a(this.inputSetter,"keyup",d((function(){t.campaignUrlExists(t.urlTokenInput.value)}),1e3)),a(this.inputSetter,"keyup",i.hitch(this,(function(){this.hasEditedCampaignUrl||(this.campaignToken=this._makeValidUrl(this.inputSetter),this.campaignToken=this._removeExtraDashes(this.campaignToken),o.set(this.urlTokenInput,"value",this.campaignToken),u.checkInputLength(this.urlTokenInput,this.campaignTokenNum.id,150),this.campaignTokenWrap.innerHTML=this.campaignToken,this.originalInput&&o.set(this.originalInput,"value",this.campaignToken))})))},_setUrlValue:function(t,e){u.removeErrors(t),this.campaignToken=this._makeValidUrl(t,!0),s.contains(this.campaignTokenWrap,"c-campaignArchiveUrl_token")||s.add(this.campaignTokenWrap,"c-campaignArchiveUrl_token"),u.checkInputLength(t,this.campaignTokenNum.id,150),e.innerHTML=this.campaignToken,this.originalInput&&(o.set(this.originalInput,"value",this.campaignToken),u.removeErrors(this.originalInput))},_makeValidUrl:function(t,e){var n=t.value;return n.match(y)&&e?(h.playDenyAnimation(t),u.addError(t,"Customized campaign path must only contain one or more lowercase letters and/or numbers. A single dash or underscore may be used only to separate words.")):u.removeErrors(t),this.getCampaignTokenFromString(n)},_removeExtraDashes:function(t){return t.replace(/^[_-]|[_-]$/g,"")},_createNewUrl:function(t){return t&&(this.campaignToken=t),this.rootDomainToken+this.campaignToken},refresh:function(){this._setUrlValue(this.urlTokenInput,this.campaignTokenWrap)},campaignUrlExists:function(t){t=t||this.campaignToken;var e=this,n=e._removeExtraDashes(t);return l(c.toUrl(this.urlExistsPath),{query:{id:e.campaignId,brand_token:e.brandToken,campaign_token:n},handleAs:"json"}).then((function(t){return e.urlExistResponse=t.status,t.error&&e.urlTokenInput?(u.addError(e.urlTokenInput,t.error),!0):(u.removeErrors(e.urlTokenInput),!1)}))},getCampaignTokenFromString:function(t){var e=(t=t||"").toString().toLowerCase().replace(/[^a-z0-9_\s-]/g,"").trim().replace(/_+/g,"_").replace(/[\s]/g,"-").replace(/-+_/g,"-").replace(/_-+/g,"_").replace(/-+/g,"-");return e=b(e,"_-")},editUrl:function(){var t=new p,e=this,n=e._removeExtraDashes(e.campaignToken);return e.campaignToken=n,o.set(this.urlTokenInput,"value",this.campaignToken),e.urlTokenInput.innerHTML=this.campaignToken,l(c.toUrl("campaigns/edit-url"),{query:{id:e.campaignId,archived_brand_token:e.brandToken,new_token:e.campaignToken},handleAs:"json"}).then((function(n){n.url=e._createNewUrl(),t.resolve({promise:"success",response:n}),n.error&&u.addError(e.urlTokenInput,n.error)}),(function(t){t&&t.response&&t.response.data&&t.response.data.error&&u.addError(e.urlTokenInput,t.response.data.error)})),t}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(71),n(2),n(85),n(33),n(49)],void 0===(a=function(t,e,n,i,a){var o,s=new t;return n((function(){var t=a.getBox();if(s._rlh=e(window,"resize",(function(){var e=a.getBox();t.h==e.h&&t.w==e.w||(t=e,s.emit("resize"))})),8==i("ie")){var n=screen.deviceXDPI;setInterval((function(){screen.deviceXDPI!=n&&(n=screen.deviceXDPI,s.emit("resize"))}),500)}i("ios")&&(e(document,"focusin",(function(t){o=t.target})),e(document,"focusout",(function(t){o=null})))})),s.getEffectiveBox=function(t){var e=a.getBox(t),n=o&&o.tagName&&o.tagName.toLowerCase();if(i("ios")&&o&&!o.readOnly&&("textarea"==n||"input"==n&&/^(color|email|number|password|search|tel|text|url)$/.test(o.type))){e.h*=0==orientation||180==orientation?.66:.4;var s=o.getBoundingClientRect();e.h=Math.max(e.h,s.top+s.height)}return e},s}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/json")},function(t,e,n){var i,a;i=[n(0),n(33),n(210),n(526)],void 0===(a=function(t,e,n,i){return t("dijit.form._FormValueWidget",[n,i],{_layoutHackIE7:function(){if(7==e("ie"))for(var t=this.domNode,n=t.parentNode,i=t.firstChild||t,a=i.style.filter,o=this;n&&0==n.clientHeight;)!function(){var t=o.connect(n,"onscroll",(function(){o.disconnect(t),i.style.filter=(new Date).getMilliseconds(),o.defer((function(){i.style.filter=a}))}))}(),n=n.parentNode}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(293)],void 0===(a=function(t,e){var n=t([Error],{constructor:function(t,e,n){this.message=t,this.code=e,this.errors=n}});return n.createFromResponseData=function(t){var i=t.message,a=t.code,o=e(t.errors,(function(t){return n.createFromResponseData(t)}));return new n(i,a,o)},n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(379),n(89)],void 0===(a=function(t,e){return function n(i,a,o,s,r){return i===a||(null==i||null==a||!e(i)&&!e(a)?i!=i&&a!=a:t(i,a,o,s,n,r))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t={toUsdCurrency:function(t){return"$"+t.toFixed(2)},toFormat:function(t,e,n,i){var a=t,o=isNaN(e=Math.abs(e))?2:e,s=void 0===n?",":n,r=void 0===i?".":i,l=a<0?"-":"",d=parseInt(a=Math.abs(+a||0).toFixed(o))+"",c=(c=d.length)>3?c%3:0;return l+(c?d.substr(0,c)+r:"")+d.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+r)+(o?s+Math.abs(a-d).toFixed(o).slice(2):"")},toFileSize:function(e){return e>=1073741824?t.toFormat(e/1073741824,2,".","")+" Gb":e>=1048576?t.toFormat(e/1048576,2,".","")+" Mb":e>=1024?t.toFormat(e/1024,0)+" Kb":t.toFormat(e,0)+" bytes"},toOrdinal:function(t){var e=["th","st","nd","rd"];return String(t)+((t<11||t>13)&&e[t%10]?e[t%10]:e[0])},toThousandsString:function(t){return t>=1e3?Math.floor(t/1e3)+"K":String(t)},toShortString:function(t){var e=1e3,n=1e6,i=1e9,a=1e12,o=Number.MAX_SAFE_INTEGER,s=function(t,e,n,i){return Math.floor(t/(e/i))/i+n};return t<e?t+"":t<1e4?s(t,e,"K",10):t<n?s(t,e,"K",1):t<10*n?s(t,n,"M",10):t<i?s(t,n,"M",1):t<10*i?s(t,i,"B",10):t<a?s(t,i,"B",1):t<10*a?s(t,a,"T",10):t<o?s(t,a,"T",1):t.toExponential(1)}};return t}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(31),n(19),n(22),n(47),n(92),n(116),n(21),n(16),n(8),n(15),n(56),n(8),n(225),n(556),n(714)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){var b=t(null,{createdAt:null,contentType:null,width:null,height:null,dimensions:null,url:null,urls:null,download:null,size:null,constructor:function(t){this.createdAt=p.toRelativeString(new Date(1e3*t.created_at)),this.contentType=t.content_type||"image",this.sizeInBytes=t.size,this.size=t.size?h.formatFileSize(t.size):null,this.width=t.width,this.height=t.height,this.dimensions=this.width&&this.height?this.width+" × "+this.height+" px":null,this.url=t.url||"",this.urls=t.urls||{},this.download=this.url,this.fileExtension=this.url.split(".").reverse()[0],-1!==this.fileExtension.indexOf("?")&&(this.fileExtension=this.fileExtension.split("?")[0])},isImage:function(){return"image"===this.contentType},getDisplayUrl:function(){return this.urls&&"display"in this.urls?this.urls.display:this.url},getCanonicalUrl:function(){return this.getDisplayUrl()},getDisplayProperties:function(){var t=[];return t.push({label:"Created",value:this.createdAt}),this.dimensions&&t.push({label:"Dimensions",value:this.dimensions}),this.size&&t.push({label:"Size",value:this.size}),this.createdBy&&t.push({label:"Created by",value:this.createdBy}),this.price&&t.push({label:"Price",value:this.price}),this.sku&&t.push({label:"SKU",value:"SKU "+this.sku}),t},getThumbnailUrl:function(){if(!this.isImage())return null;var t=this.urls&&this.urls.thumbnail_500?this.urls.thumbnail_500:this.url;return m.addProxy(t)},getFixedParameters:function(){return{}}}),y=t(b,{contentId:null,sourceId:null,name:null,numVersions:null,versions:null,constructor:function(t){this.contentId=t.content_id,this.sourceId=t.source,this.name=t.name,this.numVersions=t.num_versions,this.versions=n.map(t.versions||[],(function(t){return new b(t)}))}}),w=t(y,{createdBy:null,constructor:function(t){this.createdBy=t.created_by}}),_=t([y],{constructor:function(t){this.productId=t.product_id,this.price=t.price,this.sku=t.sku,this.description=t.description}}),C=t([y],{constructor:function(t){this.rating=t.rating,this.fileExtension="gif"}}),k=t([y],{constructor:function(t){this.caption=t.caption,this.comments_count=t.comments_count,this.like_count=t.like_count,this.fileExtension="jpg"},getDisplayProperties:function(){return[{label:"Comments",value:this.comments_count},{label:"Likes",value:this.like_count}]}}),S=t([y],{createdBy:null,constructor:function(t){this.createdBy=t.created_by,this.name="Your Default Logo"},getCanonicalUrl:function(){return"*|BRAND:LOGO|*"},getFixedParameters:function(){return{width:196,height:null}}}),x=t([y],{}),I=t(null,{constructor:function(t){this.id=t.id,this.userLabel=t.userLabel,this.itemClass=t.itemClass,this.isHostedElsewhere=t.isHostedElsewhere,this.revisionUserLabel=t.revisionUserLabel,this.supportedActions=t.supportedActions,this.deleteModalClass=t.deleteModalClass,this.onDeleteHandler=t.onDeleteHandler,this.supportsMobile=t.supportsMobile,this.supportsKioskMode=t.supportsKioskMode},toInputOption:function(){return{value:this.id,label:this.userLabel}},isActionSupported:function(t){return this.supportedActions.indexOf(t)>=0}}),T={_convertResponseFromNative:function(t){return{content_id:t.id,content_type:t.type,created_at:new Date(t.created_at),created_by:"Dev Chimpster",folder:t.folder_id,height:t.height,name:t.name,num_versions:0,size:t.size,source:T.SOURCE_FILE,url:t.full_size_url,urls:{display:t.full_size_url,thumbnail:t.thumbnail_url},versions:[],width:t.width}},_buildContentItem:function(t){var e=this.getSource(t.source);return new(e?e.itemClass:y)(t)},_post:function(t,a,o){return i.post(u.toUrl(t),{handleAs:"json",data:a}).then(e.hitch(this,(function(t){return e.isArray(t)?n.map(t,(function(t){var e=o?o(t):t;return this._buildContentItem(e)}),this):this._buildContentItem(t.info)})),(function(t){return{error:t.message,data:t.response.data}}))},_get:function(t,a){return i.get(u.toUrl(t),{handleAs:"json",query:a}).then(e.hitch(this,(function(t){return t.items?(t.items=n.map(t.items,e.hitch(this,(function(t){return this._buildContentItem(t)}))),t):this._buildContentItem(t.info)})),e.hitch(this,(function(t){var e=t.response;if(401===e.status)return e.data;throw t})))},getInfo:function(t,e){return T._get("content/get-info",{content_id:t,source:e})},getAutoDesigner:function(){return i.get(u.toUrl("auto-designer/get-auto-designer"),{handleAs:"json"})},setAdTooltipCompletion:function(){return i.get(u.toUrl("auto-designer/set-ca-user-setting?key=ca-my-files-tooltip&value=true"),{handleAs:"json"})},upload:function(t,e,n,i){return T._post("content/upload",{data:e,name:n,"fields[folder]":(i||{}).folder,"fields[content_origin]":t,on_conflict:"keep_both"})},uploadFromUrl:function(t,e,n,i){return i||(i=T.CONFLICT_STRATEGY_KEEP_BOTH),T._post("content/upload",{source:t,data_url:n,"fields[content_origin]":e,"fields[originating_url]":n,on_conflict:i})},update:function(t,e,n){return T._post("content/update",{content_id:e,data:n,"fields[content_origin]":t})},updateFromUrl:function(t,e,n){return T._post("content/update",{content_id:e,data_url:n,"fields[content_origin]":t})},updateOrUploadFromUrl:function(t,e,n){var i=T.SOURCE_FILE;return T.updateFromUrl(t,e,n).then(null,(function(e){if(404===e.response.status)return T.uploadFromUrl(i,t,n);throw e}))},delete:function(t,e){return T._post("content/delete",{content_id:t,source:e},(function(t){return t.info}))},rename:function(t,e,n){return T._post("content/update",{content_id:t,source:e,"fields[name]":n})},list:function(t,n){return"content-engine"===t?new Promise((function(t){t(JSON.parse('{"status":"success","status_code":0,"pagination":{"total_count":0,"count":0,"offset":0},"items":[]}'))})):T._get("content/list",e.mixin({source:t},n))},search:function(t,n){return T._get("content/search",e.mixin({source:t},n))},getSourceOptions:function(t){return"content-engine"===t?new Promise((function(t){t(JSON.parse('{"status":"success","source_options":{"filters": [], "sorts":[],"accounts":[]}}'))})):i.get(u.toUrl("content/get-source-options",{source:t}),{handleAs:"json"}).then((function(t){return t}))},getAuthChannel:function(){return i.get(u.toUrl("/account/integrations/get-push-channel/"),{handleAs:"json"}).then((function(t){if(t.channel)return t.channel}))},getSources:function(){var t=[];return null!==d.bridgeBundles&&t.push(new I({id:T.SOURCE_CONTENT_ENGINE,userLabel:"Creative Assistant",itemClass:x,supportedActions:[],isHostedElsewhere:!0,supportsMobile:!0,supportsKioskMode:!1})),t.push(new I({id:T.SOURCE_FILE,userLabel:"My Files",itemClass:w,isHostedElsewhere:!1,revisionUserLabel:"Revision History",supportedActions:[T.SOURCE_ACTION_FOLDERS,T.SOURCE_ACTION_DELETE,T.SOURCE_ACTION_EDIT,T.SOURCE_ACTION_RENAME,T.SOURCE_ACTION_DOWNLOAD,T.SOURCE_ACTION_SEARCH,T.SOURCE_ACTION_PROMOTE_TO_BRAND,T.SOURCE_ACTION_UPLOAD],deleteModalClass:f,onDeleteHandler:l,supportsMobile:!0,supportsKioskMode:!0})),t.push(new I({id:T.SOURCE_PRODUCT,userLabel:"Products",itemClass:_,isHostedElsewhere:!0,revisionUserLabel:"Product Variants",supportedActions:[T.SOURCE_ACTION_EDIT,T.SOURCE_ACTION_SEARCH],supportsMobile:!0,supportsKioskMode:!1})),t.push(new I({id:T.SOURCE_GIPHY,userLabel:"Giphy",itemClass:C,isHostedElsewhere:!0,supportedActions:[T.SOURCE_ACTION_SEARCH],supportsMobile:!0,supportsKioskMode:!1})),t.push(new I({id:T.SOURCE_INSTAGRAM,userLabel:"Instagram",itemClass:k,isHostedElsewhere:!0,supportedActions:[],supportsMobile:!1,supportsKioskMode:!1})),t.push(new I({id:T.SOURCE_BRAND,userLabel:"My Logo",itemClass:S,isHostedElsewhere:!1,supportedActions:[T.SOURCE_ACTION_DELETE],deleteModalClass:v,onDeleteHandler:function(t){return g.setBrandItem(null),t},supportsMobile:!0,supportsKioskMode:!1})),t},getSource:function(t){var e=r(this.getSources(),{id:t});if(!e)throw new Error("Cannot find source with id: '"+t+"'");return e},readFileAsDataUrl:function(t){var e=new o,n=new FileReader;return n.onload=function(t){e.resolve(t.target.result)},n.readAsDataURL(t),e.promise},generateContentOriginFromContentItem:function(t){return t.sourceId+":"+t.contentId},buildImageItemFromNativeApiCall:function(t){return new y(this._convertResponseFromNative(t))},FileItem:w,SOURCE_CONTENT_ENGINE:"content-engine",SOURCE_FILE:"file",SOURCE_GIPHY:"giphy",SOURCE_PRODUCT:"product",SOURCE_BRAND:"brand",SOURCE_INSTAGRAM:"instagram",SOURCE_ACTION_FOLDERS:"folders",SOURCE_ACTION_SEARCH:"search",SOURCE_ACTION_DELETE:"delete",SOURCE_ACTION_EDIT:"edit",SOURCE_ACTION_RENAME:"rename",SOURCE_ACTION_DOWNLOAD:"download",SOURCE_ACTION_PROMOTE_TO_BRAND:"promote_to_brand",SOURCE_ACTION_UPLOAD:"upload",CONFLICT_STRATEGY_KEEP_BOTH:"keep_both",CONFLICT_STRATEGY_OVERWRITE:"overwrite",ERROR_CODE_FILE_CONFLICT:3};return T}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(6),n(10),n(1),n(9),n(3),n(4),n(7),n(37),n(19),n(5),n(18),n(45),n(58),n(22),n(96),n(60),n(2),n(38),n(15),n(8),n(26),n(28),n(14),n(122),n(201),n(559)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x){var I={},T={addUrl:y.toUrl("campaigns/segments/add-condition"),opUrl:y.toUrl("campaigns/segments/op"),valueUrl:y.toUrl("campaigns/segments/value"),extraUrl:y.toUrl("campaigns/segments/extra"),countUrl:y.toUrl("campaigns/segments/count"),buildPastedUrl:y.toUrl("campaigns/segments/build-pasted"),editPastedUrl:y.toUrl("campaigns/segments/edit-pasted"),productSearchUrl:y.toUrl("ecommerce/products-search-by-list")},A={customer_lifecycle_stage:"Customer Lifecycle Stage",email_marketing_engagement:"Email Marketing Engagement"},j={TOPIC:"recipients/segment_changed",reloadSegmentCallbacks:function(e,i){t("#"+e+" .segment-field select").forEach((function(t){t.onchange=null,dojo.connect(t,"onchange",j.segmentFieldChanged)})),t("#"+e+" .segment-op select").forEach((function(t){t.onchange=null,dojo.connect(t,"onchange",j.segmentOpChanged)})),t("#"+e+" [data-segment-match-type]").forEach((function(t){t.onchange=null,dojo.connect(t,"onchange",j.segmentMatchTypeChanged),j.segmentMatchTypeChanged.call(t)})),t("#"+e+" .segment-value select, #"+e+" .segment-value input").forEach((function(e){e.onchange=null,dojo.connect(e,"onchange",j.segmentValueChanged),0==t(".segment-extra input, .segment-extra select",e.parentNode.parentNode).length&&n.hitch(e,j.segmentValueChanged)()})),t(".goToNextStepContainer").removeClass("disabled"),l.publish(j.TOPIC)},segmentFieldChanged:function(){var e=this.id.split("-"),n=e[2],i=e[1],a=this.value,o={field:a,id:n,lid:i},s=[];s.push(c.post(T.opUrl,{data:o,handleAs:"text"}).then((function(e){t("#segmentcondition-"+i+"-"+n+" .segment-op")[0].innerHTML=e,j.reorderUI(o,a)}))),s.push(c.post(T.valueUrl,{data:o,handleAs:"text"}).then((function(e){var s=t("#segmentcondition-"+i+"-"+n+" .segment-value")[0];s.innerHTML=e,d.forEach(s.getElementsByTagName("*"),(function(t){if(t.id){var e=C.byId(t.id);e&&e.destroyRecursive()}})),r.parse(s),j.reorderUI(o,a)})));var l=C.byId("segment-"+i+"-"+n+"-extra");return l&&l.destroyRecursive(),t("#segmentcondition-"+i+"-"+n+" .segment-extra")[0].innerHTML="","ipgeo"!==a&&"source"!==a&&"customer_lifecycle_stage"!==a&&"customer_lifetime_value"!==a||s.push(j.reloadExtra(o)),A.hasOwnProperty(a)&&w.googleAnalytics.trackEvent(A[a],"select segmentation option",""),h(s).then((function(){j.reloadSegmentCallbacks("segmentpane-"+i)}))},reorderUI:function(e,n){var i=t("#segmentcondition-"+e.lid+"-"+e.id+" .segment-value")[0],a=t("#segmentcondition-"+e.lid+"-"+e.id+" .segment-op")[0],s="before";["contact_event","web_engagement","link_click"].includes(n)&&(s="after"),o.place(a,i,s)},segmentMatchTypeChanged:function(t){if(this.id){var e=this.id.split("-")[1],n=this.value;j.refreshSegmentConditionText(e,n)}},segmentOpChanged:function(n){if(this.id){var i=["geoin","ipgeoin","sent","notmember","within","date_within","occurred_before","occurred_after","occurred_within","not_occurred_within","contains"],a=d.some(this.options,(function(t){return d.indexOf(i,t.value)>=0}));a=a||d.some(this.options,(function(t){return t.value.indexOf("postcard")>=0}));var o=this.value;if(a||((a=d.indexOf(["blank","blank_not"],o)>=0)?s.set(this,"data-force-refresh",!0):(a=s.get(this,"data-force-refresh"),s.set(this,"data-force-refresh",!1))),a){var u=this.id.split("-"),p=u[2],m=u[1],g=e.byId("segment-"+m+"-"+p+"-value").value,f={field:e.byId("segment-"+m+"-"+p+"-field").value,id:p,lid:m,op:o,value:g},v=[];v.push(c.post(T.valueUrl,{data:f,handleAs:"text"}).then((function(e){var n=t("#segmentcondition-"+m+"-"+p+" .segment-value")[0];n.innerHTML=e,d.forEach(n.getElementsByTagName("*"),(function(t){if(t.id){var e=C.byId(t.id);e&&e.destroyRecursive()}})),r.parse(n),l.publish(j.TOPIC)})));var b=C.byId("segment-"+m+"-"+p+"-extra");b&&b.destroyRecursive(),t("#segmentcondition-"+m+"-"+p+" .segment-extra")[0].innerHTML="",-1!==["geoin","ipgeoin","ipgeonotin","ipgeoinzip","ipgeocity","ipgeonotcity","occurred_before","occurred_after","occurred_within","not_occurred_within"].indexOf(o)&&v.push(j.reloadExtra(f)),h(v).then((function(){j.reloadSegmentCallbacks("segmentpane-"+m)}))}}},segmentValueChanged:function(t){if(this.id){var n=this.id.split("-"),i=n[2],a=n[1],o=e.byId("segment-"+a+"-"+i+"-field").value;if("timestamp_opt"==o||"info_changed"==o||"ecomm_date"==o||"source"==o||"goal_last_visited"==o||"poll"==o){var s={field:o,id:i,value:this.value,lid:a};return j.reloadExtra(s).then((function(){l.publish(j.TOPIC)}))}l.publish(j.TOPIC)}},reloadExtra:function(e){return c.post(T.extraUrl,{data:e,handleAs:"text"}).then((function(n){var i=t("#segmentcondition-"+e.lid+"-"+e.id+" .segment-extra")[0],a=C.byId("segment-"+e.lid+"-"+e.id+"-extra");a&&a.destroyRecursive(),i.innerHTML=n,r.parse(i)}))},refreshSegmentConditionText:function(e,n){t("#segmentpane-"+e+" [data-segment-match-type-text]").forEach((function(t,e){0===e?a.add(t,"display--none"):a.remove(t,"display--none"),t.innerHTML="any"===n?"OR":"AND"}))},addSegmentCondition:function(e,n){return c.post(T.addUrl,{data:{lid:e},handleAs:"text",sync:!0}).then((function(n){var i=0,o=0;if(t("#segmentpane-"+e+" li.segment-condition").forEach((function(t){var e=t.id.split("-")[2];e>i&&(i=e),++o})),!(o>=5)){i++,n=n.replace(/\*\|CONDITION_ID\|\*/g,i);var s=document.createElement("li");s.id="segmentcondition-"+e+"-"+i,a.add(s,"segment-condition selfclear"),s.innerHTML=n,s=t("#segmentpane-"+e+" ul.segment-conditions")[0].appendChild(s),w.googleAnalytics.trackEvent("segments","add condition",""),j.reloadSegmentCallbacks("segmentpane-"+e),r.parse(s),j.setupSegmentButton(e)}}))},deleteSegmentCondition:function(t,n){var i=e.byId("segmentcondition-"+t+"-"+n);if(i){var a=C.byId("segment-"+t+"-"+n+"-extra");a&&a.destroyRecursive(),i.parentNode.removeChild(i),j.setupSegmentButton(t),j.refreshSegmentConditionText(t,e.byId("segmentmatchtype-"+t).value),w.googleAnalytics.trackEvent("segments","remove condition")}l.publish(j.TOPIC)},setupSegmentButton:function(e){var n=t("#segmentpane-"+e+" li.segment-condition"),i=n.length,a=0;n.forEach((function(e){var n=t(".delete",e)[0],o=t(".add-button")[0];0==a&&1==i?(o.style.display="",n.style.display="none"):0==a||4==a?(o.style.display="none",n.style.display=""):a==i-1?(o.style.display="",n.style.display=""):(o.style.display="none",n.style.display=""),a++}));var o=C.byId("segmentation-ad-"+e);o&&a>=3&&o.show()},refreshSegmentCount:function(t,e){var n=t+"-"+e,i=I[n];if(i&&!i.isFulfilled())return i;i=new p;var a=this.getSegmentData(t),o=1e3;return function n(){c.post(T.countUrl+"?id="+e+"&lid="+t,{data:a,handleAs:"json"}).then((function(t){"waiting"==t.status?((o=Math.ceil(1.15*o))>5e3&&(o=5e3),setTimeout(n,o)):i.resolve(t)}))}(),I[n]=i.promise,i},openPopup:function(t,e){var n=y.toUrl("/campaigns/segments/popup",{id:e,lid:t}),i=window.open(n,"_blank","toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=600,height=400");b.checkPopupWin(i)},getSegmentData:function(t){var n;n=e.byId("wizard-form")?e.byId("wizard-form"):e.byId("segment-form-"+t);var i=u.toObject(n);return i["segment-type"]=i["send-to-segment-radio-"+t],i},buildSegment:function(t,n){var i=e.byId("build-segment-"+t),a=e.byId("emails_"+t);if(a.value.split("\n").length>4e4)return j.showPastedError(t,"lines"),!1;if(""===a.value.trim())return j.showPastedError(t,"empty"),!1;i&&(s.set(i,"disabled","disabled"),i.innerHTML="Building...");var o=e.byId("pasted-form-"+t);return c.post(T.buildPastedUrl+"?id="+n+"&lid="+t,{data:u.toObject(o),handleAs:"html",sync:!1}).then((function(e){return s.remove(i,"disabled"),i.innerHTML="Build Segment",e||j.showPastedError(t,"include"),e&&j.refreshPastedSegment(t),!1})),!1},editSegment:function(t,n,i){var a=e.byId("edit-segment-"+t);return a&&b.toggleButtonLoadingState(a,"editing..."),c.post(T.editPastedUrl+"?id="+n,{handleAs:"html",sync:!1}).then((function(e){return i&&j.refreshPastedSegment(t),!1})),!1},showPastedError:function(t,n){var i=e.byId("pasted-error-emails-include-"+t);if(i.style.display="none",(i=e.byId("pasted-error-emails-exclude-"+t)).style.display="none",(i=e.byId("pasted-error-lines-"+t)).style.display="none",(i=e.byId("pasted-error-empty-"+t)).style.display="none","include"==n){var a=u.toObject(e.byId("pasted-form-"+t));i=e.byId("pasted-error-emails-"+a.pasted_segment_options+"-"+t)}else i="lines"==n?e.byId("pasted-error-lines-"+t):e.byId("pasted-error-empty-"+t);return i.style.display="block",!1},refreshPastedSegment:function(t){var n=C.byId("pastedsegmentpane-"+t);return n.domNode.style.display="block",n.setHref(n.href).then((function(){e.byId("emails_"+t)&&j.bindCodeMirror(e.byId("emails_"+t))})),!1},updateEcommSegment:function(t,n){var i=C.byId("ecomm-"+t+"-"+n);i.value&&(e.byId("segment-"+t+"-"+n+"-value").value=i.value,i.set("value","",!1))},setupEcommProductSearch:function(t,e){var n=C.byId("segment-"+t+"-"+e+"-value");n.set("fetchProperties",{sort:[{attribute:"name",descending:!1}]}),n.set("autoComplete",!1),(n.get("store").data||[]).length>=1500&&!n._hasBeenBlurred&&f(n,"keyup",g(function(){this.onEcommProductSearch(t,e)}.bind(this),1e3))},onEcommProductSearch:function(t,e){var n=C.byId("segment-"+t+"-"+e+"-value"),i=n.textbox.value;n.set("disabled",!0);var a=T.productSearchUrl+"?list_id="+t+"&term="+i+"&log_search=Y&encode_title=N";c.post(a,{handleAs:"json"}).then((function(t){var e=[];d.forEach(t,(function(t){e.push({value:t.title,label:v.encode(t.title)})})),e.sort((function(t,e){var n=t.label.toUpperCase(),i=e.label.toUpperCase();return n<i?-1:n>i?1:0})),n.set("searchAttr","value"),n.set("labelAttr","label"),n.set("labelType","html"),n.set("store",m({data:e})),e.length>0&&(n.set("value",i),n.openDropDown()),n.set("disabled",!1)}))},bindCodeMirror:function(t){var e=k.fromTextArea(t,{mode:"text",autofocus:!0,tabMode:"indent",indentUnit:2,smartIndent:!1,theme:"default",autoClearEmptyLines:!0,lineWrapping:!1,lineNumbers:!0});return e.on("change",(function(){e.save()})),e}};return j}.apply(e,i))||(t.exports=a)},function(t,e,n){!function(t){"use strict";t.defineMode("htmlmixed",(function(e,n){var i=t.getMode(e,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),a=t.getMode(e,"css"),o=[],s=n&&n.scriptTypes;if(o.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:t.getMode(e,"javascript")}),s)for(var r=0;r<s.length;++r){var l=s[r];o.push({matches:l.matches,mode:l.mode&&t.getMode(e,l.mode)})}function d(t,e){var n=e.htmlState.tagName,s=i.token(t,e.htmlState);if("script"==n&&/\btag\b/.test(s)&&">"==t.current()){var r=t.string.slice(Math.max(0,t.pos-100),t.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);(r=r?r[1]:"")&&/[\"\']/.test(r.charAt(0))&&(r=r.slice(1,r.length-1));for(var l=0;l<o.length;++l){var d=o[l];if("string"==typeof d.matches?r==d.matches:d.matches.test(r)){d.mode&&(e.token=u,e.localMode=d.mode,e.localState=d.mode.startState&&d.mode.startState(i.indent(e.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(s)&&">"==t.current()&&(e.token=h,e.localMode=a,e.localState=a.startState(i.indent(e.htmlState,"")));return s}function c(t,e,n){var i=t.current(),a=i.search(e);return a>-1?t.backUp(i.length-a):i.match(/<\/?$/)&&(t.backUp(i.length),t.match(e,!1)||t.match(i)),n}function u(t,e){return t.match(/^<\/\s*script\s*>/i,!1)?(e.token=d,e.localState=e.localMode=null,d(t,e)):c(t,/<\/\s*script\s*>/,e.localMode.token(t,e.localState))}function h(t,e){return t.match(/^<\/\s*style\s*>/i,!1)?(e.token=d,e.localState=e.localMode=null,d(t,e)):c(t,/<\/\s*style\s*>/,a.token(t,e.localState))}return o.push({matches:/./,mode:t.getMode(e,"text/plain")}),{startState:function(){return{token:d,localMode:null,localState:null,htmlState:i.startState()}},copyState:function(e){if(e.localState)var n=t.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:n,htmlState:t.copyState(i,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,n){return!e.localMode||/^\s*<\//.test(n)?i.indent(e.htmlState,n):e.localMode.indent?e.localMode.indent(e.localState,n):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||i}}}}),"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")}(n(122),n(1164),n(1165),n(1166))},function(t,e,n){var i,a;i=[n(0),n(6),n(32),n(30),n(63),n(4),n(9),n(55),n(1),n(10),n(27),n(3),n(241),n(137),n(5),n(451),n(2),n(571),n(44),n(48),n(19)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){return t("mojo.neapolitan.widgets.ColorPicker",[g],{templateString:v,showHex:!0,arrowWidth:15,defaultColors:["#222222","#ffffff","#EA5B3A","#FFD249","#E0629A","#89D085","#4CAAD8"],slideDuration:200,subscriptions:[],constructor:function(){this._events=[]},postCreate:function(){this.inherited(arguments);var t=this;s.set(this.domNode,"display","none"),s.set(this.hsvNode,"display","none"),s.set(this.siteColorNode,"display","none"),s.set(this.siteColorForm,"display","none"),m.forEach(this.defaultColors,(function(n){e("ul",t.defaultColorNode).append('<li style="background:'+n+'" class="mojoCustomColor">&nbsp;</li>')})),f(this.defaultColorNode,".mojoCustomColor:click, .mojoCustomColor:touchstart",(function(){t.setColor(s.get(this,"backgroundColor"),!0)})),f(this.colorUnderlay,"mousedown,touchstart",(function(e){var n=t.animatePoint;t.animatePoint=!1,t._setPoint(e),t.animatePoint=n,t._mover.onMouseDown(e)})),f(this.noColorNode,"click",l.hitch(this,(function(){this._showEmptyState(),this.onChange("")})))},addInput:function(t){this.connect(t.domNode,"click,touchstart",(function(e){if(a.stop(e),!t.disabled){this.hide(),this.attachTo(t).show();var n=parseInt(e.pageX-c.position(this.domNode,!0).x-this.arrowWidth/2);this._movePointer(n)}}))},_movePointer:function(t){var e=t>this.arrowWidth?t:this.arrowWidth;return s.set(this.arrow,"left",e+"px"),this},attachTo:function(t){if(this.attachInput!==t){this.attachInput=t;var e=t.get("value");this.setColor(e)}return o.place(this.domNode,t.domNode,"after"),this._events.push(this.connect(this.attachInput,"onChange",(function(){var t=this.attachInput.get("value");this.setColor(t,!1)}))),this},onChange:function(t){this.attachInput&&this.attachInput.set("value",t)},_removeAndroidSubscriptions:function(){this.subscriptions.forEach((function(t){t.remove()})),this.subscriptions=[]},_getNativeMobileUtils:function(){return window.app&&window.app.nativeUtils?window.app.nativeUtils:!(!window.top.app||!window.top.app.nativeUtils)&&window.top.app.nativeUtils},_handleNativeColorPickerShow:function(){var t=this._getNativeMobileUtils();if(t){t.nativeColorPicker(this.value);var e=w.subscribe("native/mobile/colorpicker/update",l.hitch(this,(function(t){this.setColor(t,!0)})));this.subscriptions.push(e);var n=w.subscribe("native/mobile/colorpicker/close",l.hitch(this,(function(t){this._removeAndroidSubscriptions()})));this.subscriptions.push(n)}},_handleWebColorPickerShow:function(t){this._events.push(this.connect(n.body(),"click,touchstart",(function(t){e(t.target).parents(".dojoxColorPicker").length||this.hide(),this.attachInput&&h.curNode===this.attachInput&&h.focus(n.body())})));var i=e(this.domNode).parent()[0],a=i.offsetHeight||62,o=c.position(i).y+275+a,r=window.innerHeight;t||(t={position:"absolute",marginTop:"10px",top:"0",left:"0"},u.add(i,"position--relative"),u.add(i,"overflow--visible"),o>r&&(t.top="-275px",t.left="0")),this.attachInput&&this.toggleNoColorControl(this.attachInput.noColorEnabled),t.display="block",s.set(this.domNode,t),this.onShow()},show:function(t){var e=this,n=this._getNativeMobileUtils();!!n&&n.getNativeObject()?n.getNativeVersion().then((function(i){var a=!1;i&&i.hasOwnProperty("versionNumber")&&(a=n.checkForNativeFeature("COLOR_PICKER",i.versionNumber)),a?e._handleNativeColorPickerShow():e._handleWebColorPickerShow(t)})):this._handleWebColorPickerShow(t)},hide:function(){m.forEach(this._events,(function(t){t.remove()})),this._events=[],s.set(this.domNode,"display","none"),this.onHide()},toggleNoColorControl:function(t){s.set(this.noColorNode,"display",t?"":"none")},setColor:function(t){this._validColor(t)?this.inherited(arguments):this._showEmptyState()},_validColor:function(t){return t&&"transparent"!==t&&null!==p.fromString(t)},_showEmptyState:function(){this.hexCode.value="",this.Rval.value="",this.Bval.value="",this.Gval.value=""},_setTimer:function(t){t.node!=this.cursorNode&&t.node!=this.hueCursorNode||(h.focus(t.node),d.setSelectable(this.domNode,!1),this._timer=setInterval(l.hitch(this,"_updateColor"),45))},_setHuePoint:function(t){var e=this.PICKER_HUE_SELECTOR_H/2,n=c.position(this.hueNode,!0),i=t.pageY-n.y-e;this.animatePoint?r.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:i,left:0,onEnd:l.hitch(this,(function(){this._updateColor(!0),h.focus(this.hueCursorNode)}))}).play():(s.set(this.hueCursorNode,"top",i+"px"),this._updateColor(!1))},_setPoint:function(t){var e=this.PICKER_SAT_SELECTOR_H/2,n=this.PICKER_SAT_SELECTOR_W/2,i=c.position(this.colorUnderlay,!0),a=t.pageY-i.y-e,o=t.pageX-i.x-n;t&&h.focus(t.target),this.animatePoint?r.slideTo({node:this.cursorNode,duration:this.slideDuration,top:a,left:o,onEnd:l.hitch(this,(function(){this._updateColor(!0),h.focus(this.cursorNode)}))}).play():(s.set(this.cursorNode,{left:o+"px",top:a+"px"}),this._updateColor(!1))},_updateColorInputs:function(t){if(this.inherited(arguments),this.attachInput){var e=t.toHex();this.attachInput.set("value",e,!1)}},onShow:function(){},onHide:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(22),n(4),n(2),n(8),n(733)],void 0===(a=function(t,e,n,i,a){return{open:function(t,e,n){return new a(t,e,n)},getImageInfo:function(a){var o=new t,s=e.create("img",{src:a});function r(){o.resolve({url:i.addProxy(a),width:s.naturalWidth,height:s.naturalHeight,originalUrl:s.src}),e.destroy(s)}var l=!s.complete;return l&&(l=!(void 0!==s.naturalWidth&&0===s.naturalWidth)),l?r():n.once(s,"load",r),o}}}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(t){var i,a;i=[n(0),n(1),n(2),n(19),n(3),n(92),n(259),n(228),n(453),n(39),n(25),n(1193),n(1194),n(15),n(190),n(573),n(199)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){var v=t([m],{templateString:h,content:"<div data-dojo-attach-point='contentManager__node' class='full-height'></div>",titleText:"Content Studio",isOverlay:!0,constructor:function(t){this.isOverlay=t,this.isOverlay||(this.templateString=u),this.inherited(arguments)},postCreate:function(){this.closeLinkMobile&&n(this.closeLinkMobile,"click",e.hitch(this,(function(t){t.preventDefault(),this.hide()}))),this.closeLink&&n(this.closeLink,"click",e.hitch(this,(function(t){t.preventDefault(),this.hide()}))),a.toggle(this.domNode,"kioskMode",this.isKioskMode),this.CM=new g({onComplete:this.hide.bind(this),isOverlay:!0}),this.CM.placeAt(this.contentManager__node)},startup:function(){this.CM.startup()},_paneDidShow:function(){this.CM._setUpFileDrag(),this.CM._setupWindowResize()},_paneWillShow:function(){this.CM._refresh()},_paneDidHide:function(){this.CM._cleanUpEvents(),this.onHide&&this.onHide()},show:function(t){return this.CM._handleShow(t),this.onHide=t.onHide,this.inherited(arguments)},hide:function(){return this.CM._handleHide(),this.inherited(arguments)},importFromUrl:function(t,e,n){return this.CM.importFromUrl(t,e,n)},uploadFile:function(t,e,n){return this.CM.uploadFile(t,null,!0)}}),b=null;return{_getContentManager:function(t){return t=void 0===t||t,b?b&&isOverlayRender!==t&&(b.destroyRecursive(),isOverlayRender=t,(b=new v(isOverlayRender)).startup()):(isOverlayRender=t,(b=new v(isOverlayRender)).startup()),b},show:function(t){return this._getContentManager(t.isOverlay).show(t)},hide:function(t){var e=!0;return t&&t.hasOwnProperty("isOverlay")&&(e=t.isOverlay),this._getContentManager(e).hide()},isShown:function(){return b&&!0===b.displayActive},importFromUrl:function(t,e,n){return this._getContentManager().importFromUrl(t,e,n)},uploadFile:function(t,e,n){return this._getContentManager().uploadFile(t,null,!0)},getInfo:function(t,e){return f.getInfo(t,e)}}}.apply(e,i))||(t.exports=a)}).call(this,n(102)(t))},function(t,e,n){var i,a;i=[n(0),n(4),n(3),n(7),n(2),n(1),n(86),n(25),n(11),n(20),n(211),n(113),n(165),n(456),n(647),n(8),n(15),n(17),n(21),n(16),n(648),n(1480),n(1481)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C){return t([r,l,d],{templateString:_,id:0,title:"",status:"",listName:"",type:"",channelIcon:"",stats:{},actions:{},statusContent:{},typeContent:{},statsOrder:[],statsContent:{},constructor:function(t){this.model=t.model,this.title=this.model.title,this.mode=t.mode,this.campaignListLocation=this.model.campaignListLocation},_getSlatPosition:function(t,e){for(var n="[data-target='"+t+"']",i=null,a=document.querySelectorAll(n),o=0;o<a.length;o++)a[o].href===e&&(i=o+1,o=a.length);return i},_buildActionDropDown:function(){var t=this._isReportsPage()?this.model.availableReportActions:this.model.availableActions;if(t&&t.length>0){var e;t.length>1&&(e=new c({class:"mc-dropdown"}),t.forEach(o.hitch(this,(function(t){t.label;if(t&&!t.is_primary){var n=this._generateButtonParams(t,this.actions,this.model.type,e,this.model.availableReportActions),i=new u(n);e.addChild(i)}}))));var i=this._getPrimaryAction(t);if(i){var a=this._generateButtonParams(i,this.actions,this.model.type,e,this.model.availableReportActions),s=new h(a);n.add(s.domNode,"c-slatButton button-small"),n.toggle(s.domNode,"c-campaignManager_slat_actions_single",!e),s.placeAt(this.node_actions,"replace")}}},_generateButtonParams:function(t,e,n,i,a){var o,s=t.label;if(o=t.is_primary?{label:this._generateLinkHTML(e[s].label,t.href)}:{label:this._generateLinkHTML(e[s].label,t.href,e[s])},e[s].onMouseUp){o.onMouseUp=function(i){i.target.className.includes("dijitArrowButtonInner")?e[s].onMouseUp("dropdown menu open","reports menu",{dimension56:"dropdown menu open"}):t.is_primary?e[s].onMouseUp("view report","campaigns",{dimension53:e[s].label,dimension54:t.href,dimension55:this._getSlatPosition("view-report-button",t.href),dimension56:e[s].label+" for a "+n+" campaign"}):e[s].onMouseUp("dropdown menu select",e[s].label,{dimension53:e[s].label,dimension54:t.href?t.href:null,dimension55:a.indexOf(t),dimension56:"dropdown menu select"})}.bind(this)}return!t.href&&e[s].onClick&&(o.onClick=e[s].onClick.bind(this)),t.is_primary&&(o.dropDown=i),o},_generateTitleAnalytics:function(t,e,n,i,o){a(t,"mouseup",function(){e("view report","campaigns",{dimension53:n,dimension54:i,dimension55:this._getSlatPosition("campaign-link",i),dimension56:"View report for a "+o+" campaign"})}.bind(this))},_buildTypeName:function(){var t=this.model.type;this.node_typeName.innerHTML=this.typeContent[t]?this.typeContent[t].label:""},_buildEditorType:function(){this.model.editorType&&this.node_badge_editorType&&(this.node_badge_editorType.innerHTML=this.model.editorType,n.remove(this.node_badge_editorType,"display--none"))},_buildStatusBadge:function(){var t=this.statusContent[this.model.status];t&&(this.node_badge.innerHTML=t.label,n.add(this.node_badge,t.badge))},_buildStats:function(){var t=this.model.stats;t&&this.statsOrder.forEach(o.hitch(this,(function(e){var n=t[e],i=n?Object.keys(n):[],a=this.statsContent[e]?this.statsContent[e].label:"",s=f.compileTemplate(this.template_statWrapper,{});i.forEach(o.hitch(this,(function(t){var e="percent"===t,o=n[t],r=this.model.automationId,l=f.compileTemplate(r&&o>0?this.template_statDetailsWithLink:this.template_statDetails,{type:i.length>1?"c-campaignManager_slat_stat_"+(e?"primary":"secondary"):"",value:(Number(o)?f.numberFormat(o,e?1:0,".",","):o)+(e&&"N/A"!==o?"%":""),name:a,href:g.toUrl("/reports/summary?id="+r)});s.appendChild(l)}))),this.node_stats.appendChild(s)})))},_buildCheckbox:function(){new m({value:this.model.uniqueId}).placeAt(this.node_selectCheckBox,"replace")},_buildTitleAction:function(){var t=this.node_titleLink,e=this._getPrimaryAction(this.model.availableActions),n=e.label,o=this._isReportsPage()?e.href:this.model.titleLink||e.href;o?i.set(t,"href",o):a(t,"click",this.actions[n].onClick.bind(this)),this.actions[n].onMouseUp&&this._generateTitleAnalytics(t,this.actions[n].onMouseUp,t.innerHTML,o,this.model.type)},_buildComplianceMessage:function(){this.model.shouldShowComplianceMessage?this.node_complianceMessage.appendChild(f.compileTemplate(this.template_complianceMessage,{message:"There is a compliance issue with this campaign."})):this.model.shouldShowTermsMessage?this.node_complianceMessage.appendChild(f.compileTemplate(this.template_complianceMessage,{message:"Terms of Service haven't been accepted."})):this.model.shouldShowDisconnectMessage&&this.node_complianceMessage.appendChild(f.compileTemplate(this.template_complianceMessage,{message:"This site has been disconnected."}))},_buildSendingErrorMessage:function(){this.model.shouldShowSendErrorMessage&&this.node_sendErrorMessage.appendChild(f.compileTemplate(this.template_sendErrorMessage,{message:"We were unable to send this campaign."}))},_showNdMessagingIfNeeded:function(){if(this.model.hasNdStore){var e=t([r,l,d],{templateString:"<div>                        <span class='freddicon warn-circle warn-circle-color padding-right--lv1'></span>                        <span data-dojo-attach-point='messageNode'></span>                        <a data-dojo-type='mojo/widgets/account/connected-sites/nd/NdResourceLink'></a>                    </div>",message:"",_setMessageAttr:{node:"messageNode",type:"innerText"}}),n=null;"automation"===this.model.type?v.flagIsOn(y.ND_CIRCUIT_BREAKER_DISCONNECT)&&"sending"===this.model.status?n="Automations triggered from Shopify will be paused, and revenue data is no longer available.":v.flagIsOn(y.ND_CIRCUIT_BREAKER_DISCONNECT)&&(n="Automations triggered from Shopify have been paused, and revenue data is no longer available."):"sent"===this.model.status&&v.flagIsOn(y.ND_CIRCUIT_BREAKER_DISCONNECT)&&(n="Revenue data from Shopify is no longer available."),n&&new e({message:n}).placeAt(this.node_ndMessage)}},buildAdditionalMetaData:function(){},buildChannelIcon:function(){n.add(this.node_channelIcon,this.channelIcon)},buildListName:function(){},_generateLinkHTML:function(t,n,o){var s=e.create("a",{innerHTML:t});return n&&(i.set(s,"href",n),"Print"===t&&i.set(s,"target","blank")),void 0===o&&i.set(s,"data-target","view-report-button"),o&&o.onMouseUp&&a(s,"mouseup",o.onMouseUp.bind(this)),s.outerHTML},_getPrimaryAction:function(t){return t.filter((function(t){return t.is_primary}))[0]},postMixInProperties:function(){"condensed"===this.mode&&(this.templateString=C)},postCreate:function(){"condensed"===this.mode?(this._buildTitleAction(),this._buildTypeName(),this._buildStats(),this.buildAdditionalMetaData(),this.buildListName()):(this._buildCheckbox(),this._buildStatusBadge(),this._buildEditorType(),this._buildActionDropDown(),this._buildTitleAction(),this._buildTypeName(),this._buildStats(),this._buildComplianceMessage(),this._buildSendingErrorMessage(),this._showNdMessagingIfNeeded(),this.buildChannelIcon(),this.buildAdditionalMetaData(),this.buildListName()),this._isReportsPage()&&(n.add(this.node_checkBox,"c-campaignManager_slat_checkbox--reports padding-right--lv4"),n.remove(this.node_checkBox,"padding-right--lv2"),"viewer"===v.role&&e.destroy(this.node_checkBox))},_isReportsPage:function(){return"reports"===this.campaignListLocation}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(10),n(7),n(6),n(45),n(31),n(29),n(22),n(892),n(124),n(8),n(15)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u=function(t){n(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()}))};return{confirmUnpublishPage:function(t,r){var l=new s,h=new o({title:"Are you sure?",onHide:function(){h.destroyRecursive()},onDownloadEnd:function(){u(h),n("form",h.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault(),a.post(e.get(this,"action"),{data:i.toObject(this),handleAs:"json"}).then((function(t){switch(h.hide(),t.status){case"success":l.resolve(t),c.toast('"'+r+'" was successfully unpublished');break;case"error":l.reject(t);break;default:l.reject("Unknown status `"+t.status+"`. "+(t.error_msg||""))}}),(function(){h.hide(),l.reject()}))}))}});return h.setHref(d.toUrl("landing-pages/confirm-unpublish-page",{id:t})),h.show(),l},confirmCancel:function(t){var r=new s,l=new o({title:"End your campaign?",onHide:function(){l.destroyRecursive()},onDownloadEnd:function(){u(l),n("form",l.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault(),a.post(e.get(this,"action"),{data:i.toObject(this),handleAs:"json"}).then((function(t){switch(l.hide(),t.status){case"success":r.resolve(t);break;case"error":r.reject(t);break;default:r.reject("Unknown status `"+t.status+"`. "+(t.error_msg||""))}}),(function(){l.hide(),r.reject()}))}))}});return l.setHref(d.toUrl("ads/confirm-cancel",{id:t})),l.show(),r},confirmExtension:function(t,r,l){var c=new s,h=new o({title:"Are you sure?",onHide:function(){h.destroyRecursive()},onDownloadEnd:function(){u(h),n("form",h.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault(),a.post(e.get(this,"action"),{data:i.toObject(this),handleAs:"json"}).then((function(t){switch(h.hide(),t.status){case"success":c.resolve(t);break;case"error":c.reject(t);break;default:c.reject("Unknown status `"+t.status+"`. "+(t.error_msg||""))}}),(function(){h.hide(),c.reject()}))}))}});return h.setHref(d.toUrl("ads/confirm-budget-extension",{id:t,budget:r,end_time:l})),h.show(),c},confirmDeleteAd:function(t,r){var l=new s,c=new o({title:"Are you sure?",onHide:function(){c.destroyRecursive()},onDownloadEnd:function(){u(c),n("form",c.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault(),a.post(e.get(this,"action"),{data:i.toObject(this),handleAs:"json"}).then((function(t){switch(c.hide(),t.status){case"success":l.resolve(t);break;case"error":l.reject(t);break;default:l.reject("Unknown status `"+t.status+"`. "+(t.error_msg||""))}}),(function(){c.hide(),l.reject()}))}))}});return c.setHref(d.toUrl("ads/google/confirm-delete-ad",{id:t,index:r})),c.show(),l},pauseAdWithConfirmDialogOnUpgrade:function(t){var e=new s,n=t.startsWith("02"),i=(new l).userHasFeature("ad_google_remarketing");if(n&&!i){var a=new o({title:"Pause your campaign?",content:r,onHide:function(){a.destroyRecursive()}});a.domNode.querySelector("form").addEventListener("submit",function(n){n.preventDefault(),this.pauseAd(t).then((function(t){a.onHide(),e.resolve(t)}))}.bind(this)),a.domNode.querySelector("[data-dojo-attach-point='cancelButton']").addEventListener("click",(function(){a.onHide(),e.reject(null)})),a.show()}else this.pauseAd(t).then((function(t){e.resolve(t)}));return e},pauseAd:function(t){var e=new s;return a.post(d.toUrl("/ads/pause",{id:t}),{handleAs:"json"}).then((function(t){switch(t.status){case"success":e.resolve(t);break;case"error":e.reject(t);break;default:e.reject("Unknown status "+t.status)}})),e},unpauseAd:function(t){var e=new s;return a.post(d.toUrl("/ads/unpause",{id:t}),{handleAs:"json"}).then((function(t){switch(t.status){case"success":e.resolve(t);break;case"error":e.reject(t);break;default:e.reject("Unknown status "+t.status)}})),e}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(3),n(27),n(9),n(1)],void 0===(a=function(t,e,n,i,a){function o(t,e){var i=t.resize?t.resize(e):n.setMarginBox(t.domNode,e);i?a.mixin(t,i):(a.mixin(t,n.getMarginBox(t.domNode)),a.mixin(t,e))}var s={marginBox2contentBox:function(t,e){var a=i.getComputedStyle(t),o=n.getMarginExtents(t,a),s=n.getPadBorderExtents(t,a);return{l:i.toPixelValue(t,a.paddingLeft),t:i.toPixelValue(t,a.paddingTop),w:e.w-(o.w+s.w),h:e.h-(o.h+s.h)}},layoutChildren:function(n,i,s,r,l){i=a.mixin({},i),e.add(n,"dijitLayoutContainer"),s=t.filter(s,(function(t){return"center"!=t.region&&"client"!=t.layoutAlign})).concat(t.filter(s,(function(t){return"center"==t.region||"client"==t.layoutAlign}))),t.forEach(s,(function(t){var n=t.domNode,a=t.region||t.layoutAlign;if(!a)throw new Error("No region setting for "+t.id);var s,d=n.style;d.left=i.l+"px",d.top=i.t+"px",d.position="absolute",e.add(n,"dijitAlign"+((s=a).substring(0,1).toUpperCase()+s.substring(1)));var c={};r&&r==t.id&&(c["top"==t.region||"bottom"==t.region?"h":"w"]=l),"leading"==a&&(a=t.isLeftToRight()?"left":"right"),"trailing"==a&&(a=t.isLeftToRight()?"right":"left"),"top"==a||"bottom"==a?(c.w=i.w,o(t,c),i.h-=t.h,"top"==a?i.t+=t.h:d.top=i.t+i.h+"px"):"left"==a||"right"==a?(c.h=i.h,o(t,c),i.w-=t.w,"left"==a?i.l+=t.w:d.left=i.l+i.w+"px"):"client"!=a&&"center"!=a||o(t,i)}))}};return a.setObject("dijit.layout.utils",s),s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(5)],void 0===(a=function(t,e){var n={};return t.setObject("dojo.date.stamp",n),n.fromISOString=function(t,i){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var a=n._isoRegExp.exec(t),o=null;if(a){a.shift(),a[1]&&a[1]--,a[6]&&(a[6]*=1e3),i&&(i=new Date(i),e.forEach(e.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],(function(t){return i["get"+t]()})),(function(t,e){a[e]=a[e]||t}))),o=new Date(a[0]||1970,a[1]||0,a[2]||1,a[3]||0,a[4]||0,a[5]||0,a[6]||0),a[0]<100&&o.setFullYear(a[0]||1970);var s=0,r=a[7]&&a[7].charAt(0);"Z"!=r&&(s=60*(a[8]||0)+(Number(a[9])||0),"-"!=r&&(s*=-1)),r&&(s-=o.getTimezoneOffset()),s&&o.setTime(o.getTime()+6e4*s)}return o},n.toISOString=function(t,e){var n=function(t){return t<10?"0"+t:t},i=[],a=(e=e||{}).zulu?"getUTC":"get",o="";if("time"!=e.selector){var s=t[a+"FullYear"]();o=["0000".substr((s+"").length)+s,n(t[a+"Month"]()+1),n(t[a+"Date"]())].join("-")}if(i.push(o),"date"!=e.selector){var r=[n(t[a+"Hours"]()),n(t[a+"Minutes"]()),n(t[a+"Seconds"]())].join(":"),l=t[a+"Milliseconds"]();if(e.milliseconds&&(r+="."+(l<100?"0":"")+n(l)),e.zulu)r+="Z";else if("time"!=e.selector){var d=t.getTimezoneOffset(),c=Math.abs(d);r+=(d>0?"-":"+")+n(Math.floor(c/60))+":"+n(c%60)}i.push(r)}return i.join("T")},n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(3),n(332),n(85),n(32)],void 0===(a=function(t,e,n,i){return n((function(){e("highcontrast")&&t.add(i.body(),"dijit_a11y")})),e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(33),n(23),n(43),n(25),n(178),n(11),n(339),n(40)],void 0===(a=function(t,e,i,a,o,s,r,l,d){return e("dijit-legacy-requires")&&a(0,(function(){Promise.resolve().then((function(){n(195)})).catch(n.oe)})),t("dijit.form._FormWidget",[o,r,s,l],{setDisabled:function(t){i.deprecated("setDisabled("+t+") is deprecated. Use set('disabled',"+t+") instead.","","2.0"),this.set("disabled",t)},setValue:function(t){i.deprecated("dijit.form._FormWidget:setValue("+t+") is deprecated.  Use set('value',"+t+") instead.","","2.0"),this.set("value",t)},getValue:function(){return i.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!e("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(30),n(519),n(520)],void 0===(a=function(t,e,n,i){return t("dijit.DropDownMenu",i,{templateString:n,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(t){this._moveToPopup(t),t.stopPropagation(),t.preventDefault()},_onLeftArrow:function(t){this.parentMenu?this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(!1):(t.stopPropagation(),t.preventDefault())}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(10),n(12),n(11),n(287),n(527)],void 0===(a=function(t,e,n,i,a,o){return t("dijit.MenuSeparator",[n,i,a],{templateString:o,buildRendering:function(){this.inherited(arguments),e.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(46),n(703),n(433)],void 0===(a=function(t,e,n,i,a){return t("dijit.form.FilteringSelect",[i,a],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(t,e,n,i){e&&e[this.searchAttr]!==this._lastQuery||!e&&t.length&&this.store.getIdentity(t[0])!=this._lastQuery||(t.length?this.set("item",t[0],i):this.set("value","",i||void 0===i&&!this.focused,this.textbox.value,null))},_openResultList:function(t,e,n){e[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(t,i,a,o){if(this._onChangeActive||(i=null),void 0===o){if((null===t||""===t)&&(t="",!e.isString(a)))return void this._setDisplayedValueAttr(a||"",i);var s=this;this._lastQuery=t,n(this.store.get(t),(function(t){s._callbackSetLabel(t?[t]:[],void 0,void 0,i)}))}else this.valueNode.value=t,this.inherited(arguments,[t,i,a,o])},_setItemAttr:function(t,e,n){this.inherited(arguments),this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(t){return t.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(t,i){if(null==t&&(t=""),!this._created){if(!("displayedValue"in this.params))return;i=!1}if(this.store){this.closeDropDown();var a,o=e.clone(this.query),s=this._getDisplayQueryString(t);this.store._oldAPI?a=s:(a=this._patternToRegExp(s)).toString=function(){return s},this._lastQuery=o[this.searchAttr]=a,this.textbox.value=t,this._lastDisplayedValue=t,this._set("displayedValue",t);var r=this,l={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};e.mixin(l,this.fetchProperties),this._fetchHandle=this.store.query(o,l),n(this._fetchHandle,(function(t){r._fetchHandle=null,r._callbackSetLabel(t||[],o,l,i)}),(function(t){r._fetchHandle=null,r._cancelingQuery||console.error("dijit.form.FilteringSelect: "+t.toString())}))}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1)],void 0===(a=function(t){var e={linear:function(t){return t},quadIn:function(t){return Math.pow(t,2)},quadOut:function(t){return t*(t-2)*-1},quadInOut:function(t){return(t*=2)<1?Math.pow(t,2)/2:-1*(--t*(t-2)-1)/2},cubicIn:function(t){return Math.pow(t,3)},cubicOut:function(t){return Math.pow(t-1,3)+1},cubicInOut:function(t){return(t*=2)<1?Math.pow(t,3)/2:(t-=2,(Math.pow(t,3)+2)/2)},quartIn:function(t){return Math.pow(t,4)},quartOut:function(t){return-1*(Math.pow(t-1,4)-1)},quartInOut:function(t){return(t*=2)<1?Math.pow(t,4)/2:(t-=2,-.5*(Math.pow(t,4)-2))},quintIn:function(t){return Math.pow(t,5)},quintOut:function(t){return Math.pow(t-1,5)+1},quintInOut:function(t){return(t*=2)<1?Math.pow(t,5)/2:(t-=2,(Math.pow(t,5)+2)/2)},sineIn:function(t){return-1*Math.cos(t*(Math.PI/2))+1},sineOut:function(t){return Math.sin(t*(Math.PI/2))},sineInOut:function(t){return-1*(Math.cos(Math.PI*t)-1)/2},expoIn:function(t){return 0==t?0:Math.pow(2,10*(t-1))},expoOut:function(t){return 1==t?1:-1*Math.pow(2,-10*t)+1},expoInOut:function(t){return 0==t?0:1==t?1:(t*=2)<1?Math.pow(2,10*(t-1))/2:(--t,(-1*Math.pow(2,-10*t)+2)/2)},circIn:function(t){return-1*(Math.sqrt(1-Math.pow(t,2))-1)},circOut:function(t){return t-=1,Math.sqrt(1-Math.pow(t,2))},circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-Math.pow(t,2))-1):(t-=2,.5*(Math.sqrt(1-Math.pow(t,2))+1))},backIn:function(t){var e=1.70158;return Math.pow(t,2)*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return Math.pow(t,2)*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?Math.pow(t,2)*((e+1)*t-e)/2:(t-=2,(Math.pow(t,2)*((e+1)*t+e)+2)/2)},elasticIn:function(t){if(0==t||1==t)return t;return t-=1,-1*Math.pow(2,10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)},elasticOut:function(t){if(0==t||1==t)return t;return Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},elasticInOut:function(t){if(0==t)return 0;if(2==(t*=2))return 1;var e=.3*1.5,n=e/4;return t<1?(t-=1,Math.pow(2,10*t)*Math.sin((t-n)*(2*Math.PI)/e)*-.5):(t-=1,Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/e)*.5+1)},bounceIn:function(t){return 1-e.bounceOut(1-t)},bounceOut:function(t){var e,n=7.5625,i=2.75;return t<1/i?e=n*Math.pow(t,2):t<2/i?(t-=1.5/i,e=n*Math.pow(t,2)+.75):t<2.5/i?(t-=2.25/i,e=n*Math.pow(t,2)+.9375):(t-=2.625/i,e=n*Math.pow(t,2)+.984375),e},bounceInOut:function(t){return t<.5?e.bounceIn(2*t)/2:e.bounceOut(2*t-1)/2+.5}};return t.setObject("dojo.fx.easing",e),e}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(n){var i;void 0===(i=function(){return"object"==typeof n&&n&&n.Object===Object&&n}.apply(e,[]))||(t.exports=i)}).call(this,n(343))},function(t,e,n){var i;void 0===(i=function(){var t=Function.prototype.toString;return function(e){if(null!=e){try{return t.call(e)}catch(t){}try{return e+""}catch(t){}}return""}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(185),n(296),n(186)],void 0===(a=function(t,e,n){return function(i,a,o,s,r,l){var d=1&o,c=i.length,u=a.length;if(c!=u&&!(d&&u>c))return!1;var h=l.get(i);if(h&&l.get(a))return h==a;var p=-1,m=!0,g=2&o?new t:void 0;for(l.set(i,a),l.set(a,i);++p<c;){var f=i[p],v=a[p];if(s)var b=d?s(v,f,p,a,i,l):s(f,v,p,i,a,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!e(a,(function(t,e){if(!n(g,e)&&(f===t||r(f,t,o,s,l)))return g.push(e)}))){m=!1;break}}else if(f!==v&&!r(f,v,o,s,l)){m=!1;break}}return l.delete(i),l.delete(a),m}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(384),n(170),n(385),n(251),n(386),n(94),n(216)],void 0===(a=function(t,e,n,i,a,o,s){var r=s(t),l=s(e),d=s(n),c=s(i),u=s(a),h=o;return(t&&"[object DataView]"!=h(new t(new ArrayBuffer(1)))||e&&"[object Map]"!=h(new e)||n&&n.resolve&&"[object Promise]"!=h(n.resolve())||i&&"[object Set]"!=h(new i)||a&&"[object WeakMap]"!=h(new a))&&(h=function(t){var e=o(t),n="[object Object]"==e?t.constructor:void 0,i=n?s(n):"";if(i)switch(i){case r:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case c:return"[object Set]";case u:return"[object WeakMap]"}return e}),h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(77)],void 0===(a=function(t){return function(e){return e==e&&!t(e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(117),n(224)],void 0===(a=function(t,e){return function(n){return t((function(t,i){var a=-1,o=i.length,s=o>1?i[o-1]:void 0,r=o>2?i[2]:void 0;for(s=n.length>3&&"function"==typeof s?(o--,s):void 0,r&&e(i[0],i[1],r)&&(s=o<3?void 0:s,o=1),t=Object(t);++a<o;){var l=i[a];l&&n(t,l,a,s)}return t}))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(120),n(108),n(167),n(77)],void 0===(a=function(t,e,n,i){return function(a,o,s){if(!i(s))return!1;var r=typeof o;return!!("number"==r?e(s)&&n(o,s.length):"string"==r&&o in s)&&t(s[o],a)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(15),n(17)],void 0===(a=function(t,e,n){var i={DEFAULT_LOGO_URL:"https://cdn-images.mailchimp.com/template_images/gallery/logo@1x.png",TOPIC_CHANGES:"mojo/api/brand-assets/topic",MERGE_TAG:"*|BRAND:LOGO|*",getBrandUrl:function(){return n.getBootstrappedInstance().brandLogoUrl},hasCustomBrandUrl:function(){return i.getBrandUrl()!==i.DEFAULT_LOGO_URL},_setBrandUrl:function(t){n.getBootstrappedInstance().brandLogoUrl=t},setBrandItem:function(t){i._setBrandUrl(t?t.getDisplayUrl():i.DEFAULT_LOGO_URL),e.globalPublish(i.TOPIC_CHANGES,{value:t})}};return i}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(5),n(3),n(4),n(22),n(2),n(52),n(698),n(29)],void 0===(a=function(t,e,n,i,a,o,s,r,l){var d=null;function c(t){if(null===d){var n=i.create("p"),a=n.style;d=!1,e.some(["webkit","Moz","MS",""],(function(t){return void 0!==a[t?t+"Animation":"animation"]&&(d=t,!0)})),i.destroy(n)}return!1!==d&&(d&&"webkit"===d?d+s.capitalize(t):t.toLowerCase())}var u=l.prototype.show,h=l.prototype.hide;return l.prototype.duration=0,l.prototype.show=function(){var t=u.call(this);-1===e.indexOf(this.underlayAttrs.class.split(" "),"on")&&(this.underlayAttrs.class+=" on");var i=r._singleton.node;n.add(this.domNode,"dijitDialogShow"),n.add(i,"on");var s=c("TransitionEnd");if(s){var l=new a;return o.once(i,s,(function(){l.resolve(!0)})),this.focusOnFirst(),l}return t},l.prototype.focusOnFirst=function(){this.autofocus&&this._firstFocusItem&&this._firstFocusItem.focus()},l.prototype.baseHide=function(){h.call(this)},l.prototype.baseShow=function(){u.call(this)},l.prototype.hide=function(){if(this._alreadyInitialized&&this.open){var e=r._singleton.node;if(n.remove(this.domNode,"dijitDialogShow"),!(l._dialogStack.length<=2))return h.call(this);n.remove(e,"on");var i=c("TransitionEnd");if(i){var s=new a;return o.once(e,i,t.hitch(this,(function(){h.call(this),s.resolve(!0)}))),s}return h.call(this)}},l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(155),n(562)],void 0===(a=function(t,e){return e(t)}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(398),n(88)],void 0===(a=function(t,e){return function(n){return null==n?[]:t(n,e(n))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(7),n(2),n(12),n(11),n(1206)],void 0===(a=function(t,e,n,i,a,o,s,r){var l="art-empty-default-alt",d={"art-line-graph":"art-line-graph","empty-brand":"art-empty-logo","empty-campaigns":"art-empty-campaigns","empty-comments":"art-empty-conversations","empty-contact-activity":"art-empty-activity","empty-ecomm":"art-empty-products","empty-facebook":"art-empty-default","empty-facebook-pages":"art-empty-fb-pages","empty-facebook-ron":"art-empty-fb","empty-general":l,"empty-landing-pages-reports":"art-empty-lander","empty-lists":"art-empty-lists","empty-notifications":"art-empty-notifications","empty-payment":"art-empty-payment","empty-reports":"art-empty-reports","empty-templates":"art-empty-templates","goose-egg":l,"import-from-file":l,"import-from-url":l,"no-analytics":l,"no-image":l,"no-list":"art-empty-lists","no-report":"art-empty-reports","no-tags":"art-empty-default"};return t([o,s],{templateString:r,type:"",icon:null,title:null,message:null,buttonText:null,buttonClass:null,buttonLink:null,buttonClickHandler:null,buttonNewWindow:!1,_iconPath:null,_setTitleAttr:null,postMixInProperties:function(){var t=this._getDefaultProps(this.type);this.icon=this._validateProp(this.icon,t.icon),this.title=this._validateProp(this.title,t.title),this.message=this._validateProp(this.message,t.message),this.buttonText=this._validateProp(this.buttonText,t.buttonText),this.buttonLink=this._validateProp(this.buttonLink,t.buttonLink),this.buttonNewWindow=this._validateProp(this.buttonNewWindow,t.buttonNewWindow),this.handleButtonClick=this._validateProp(this.handleButtonClick,t.buttonNewWindow),this._iconPath=this._getIconImageUrl()},postCreate:function(){n.toggle(this.noDataIcon,"hide",!this.icon),n.toggle(this.noDataTitle,"hide",!this.title),n.toggle(this.noDataMessage,"hide",!this.message),n.toggle(this.noDataButton,"hide",!this.buttonText||!this.buttonLink),this.buttonNewWindow&&i.set(this.noDataButton,"target","_blank"),this.handleButtonClick&&a(this.noDataButton,"click",this.handleButtonClick)},_getDefaultProps:function(){var t;switch(this.type){case"automations":t={icon:"art-empty-campaigns",title:"You haven't sent any automations yet",message:"You can set up an automation to trigger for things like an <a href='https://mailchimp.com/help/create-an-abandoned-cart-email/' target='_blank'>abandoned cart</a>, a welcome email, and even to wish a subscriber happy birthday!",buttonText:"Set Up An Automation",buttonLink:"/#/create-campaign/explore/emailCampaign:custom"};break;case"campaigns":t={icon:"art-empty-campaigns",title:"You haven't sent any campaigns yet",message:"<a href='https://mailchimp.com/help/getting-started-with-campaigns/' target='_blank'>Campaigns</a> are emails, ads, and other messages you share with contacts in your <a href='https://mailchimp.com/help/getting-started-with-lists/' target='_blank'>list</a>.<br>Don't have any contacts yet? No problem. Design a test email campaign and send it to yourself."};break;case"comments":t={icon:"art-empty-conversations",title:"Get feedback on this campaign.",message:"Start by <a href='#' data-dojo-attach-point='sendTestLink'>sending a test email</a> to your collaborators.<br>When they reply their comments will appear here."};break;case"compliance":t={icon:"art-empty-compliance",title:"Everything's running smoothly!",message:"Keep up the good work! Check out our <a href='https://mailchimp.com/help/about-compliance-for-email-marketing/' target='_blank'>compliance tips</a> for best practices and to avoid potential sending pitfalls."};break;case"ecomm":t={icon:"art-empty-products",title:"You don't have any eCommerce data yet",message:"Once you have a <a href='https://mailchimp.com/help/about-connected-sites/' target='_blank'>store connected</a>, you can view your data here at any time."};break;case"landing-pages-reports":t={icon:"art-empty-lander",title:"No landing page reports yet",message:"Reports show useful metrics like views and clicks. Ready to start collecting data?",buttonText:"Create a Landing Page",buttonLink:"/campaigns/#/create-campaign/explore/page"};break;case"ad-recommendations":t={icon:"art-empty-conversations",title:"Nothing to see here",message:"Your ad's doing great so far! Here are some <a href='https://blog.mailchimp.com/creating-an-effective-facebook-ad-campaign/' target='_blank'>best practices</a> to keep the good vibes going."};break;case"lists":t={icon:"art-empty-lists",title:"You haven't created an audience yet",message:"Audiences are where your contacts (aka subscribers!) live. You'll need one of these to send campaigns to the outside world."};break;case"notifications":t={icon:"art-empty-notifications",title:"Nothing new to report!"};break;case"organize":t={icon:"art-empty-default-alt",title:"This folder is empty",message:"<a href='https://mailchimp.com/help/organize-campaigns-into-folders/' target='_blank'>Learn how to organize using folders</a>"};break;case"payment":t={icon:"art-empty-payment",title:"Looks like you don't have a payment method on file",buttonText:"Add A Payment Method",buttonLink:"/account/billinginfo/"};break;case"reports":t={icon:"empty-reports",title:"You don't have any reports yet",message:"After you send your first campaign, you'll be able to see reports on how it performed, who opened it, and more!"};break;case"templates":t={icon:"art-empty-reports",title:"You don't have any saved templates",message:"A template is a saved design that can be reused when creating email campaigns."};break;case"purchased-templates":t={icon:"purchased-empty-min",message:"Need some inspiration? Explore premium email campaign templates designed by Mailchimp experts.",buttonText:"Browse The Marketplace",buttonLink:"https://mailchimp.com/marketplace/templates"};break;case"no-marketplace-purchased-templates":t={icon:"art-empty-default-alt",message:"Nothing to see here just yet. Check back soon."};break;case"contact-activity":t={icon:"art-empty-activity",title:"No activity yet",message:"Subscriber, e-commerce and other activity will show up here"};break;case"tags":t={icon:"art-empty-default",title:"You don't have any tags yet",message:"Create custom tags to help you organize and target contacts. <a href='https://mailchimp.com/help/getting-started-tags' target='_blank'>Learn about tags.</a>"};break;case"segments":t={icon:"art-empty-default-alt",title:"You don't have any segments yet",message:"<a href='https://mailchimp.com/help/about-auto-update-and-static-segments/' target='_blank'>Learn about segments</a>"};break;case"email-domains":t={icon:"art-empty-default-alt",title:"You haven’t verified a domain yet",message:'Before you can send campaigns with a <span class="font-style--italic">From email address</span> like you@yourdomain.com, you\'ll need to verify that you have access to an email address at that domain. <a href="https://mailchimp.com/help/verify-a-domain/" target="_blank">Learn more</a>.',buttonText:"Verify a Domain",buttonLink:"#"};break;case"branded-domains":t={icon:"art-empty-default-alt",title:"You haven’t verified a custom domain yet",message:'Verify a domain to share custom landing pages. To learn more, read our <a href="https://mailchimp.com/help/landing-page-domains/" target="_blank">custom domain setup guide</a>.',buttonText:"Verify Custom Domain",buttonLink:"#"};break;case"chimp-chatter":t={icon:"art-empty-default",title:"Nothing's unpacked yet",message:""};break;default:t={icon:"art-empty-default-alt",title:"Goose egg",message:"There's no information available."};break;case"covid-toolkit":t={icon:"art-line-graph",title:"COVID-19 Response Toolkit",message:"There are many ways to get your business online, let's find your next step.",buttonText:"Learn more",buttonLink:"https://mailchimp.com/get-your-business-online"}}return t},_getIconImageUrl:function(){return e.replace("/images/brand_assets/illos/{_icon}.png",{_icon:this._getIconKey()})},_getIconKey:function(){return d[this.icon]?d[this.icon]:this.icon},_validateProp:function(t,e){return t||e?null!==t?t:t||e:""}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(110),n(10),n(4),n(6),n(12),n(147)],void 0===(a=function(t,e,n,i,a,o,s,r){var l=2*Math.PI;return t([s],{bgColor:null,color:null,loaderSize:50,animate:!0,strokeWidth:5,animDuration:3500,isAnim:!0,center:null,radius:null,constructor:function(){this.color=this._getDefaultColor(),this.bgColor=this._getDefaultBgColor()},_getDefaultColor:function(){return n.brandColors.kale.hex},_getDefaultBgColor:function(){return n.brandColors.peppercorn15.rgb},postMixInProperties:function(){this.center={x:this.loaderSize/2,y:this.loaderSize/2},this.radius=this.loaderSize/2,!1===this.animate&&(this.isAnim=!1)},buildRendering:function(){var t=this;this.inherited(arguments),this.svg=r.select(this.domNode).append("svg").attr("width",this.loaderSize).attr("height",this.loaderSize).append("g").attr("transform","translate("+this.loaderSize/2+","+this.loaderSize/2+")"),this.arc=r.svg.arc().innerRadius(this.radius-this.strokeWidth).outerRadius(this.radius),this.background=this.svg.append("path").datum({startAngle:1e-6,endAngle:l}).style("fill",this.bgColor).attr("d",this.arc),this.foreground=this.svg.append("path").attr("id","path-"+t.id).attr("clip-path","url(#clipPath-"+t.id+")").datum({startAngle:1e-6,endAngle:1e-6}).style("fill",this.color).attr("d",this.arc),this.foregroundMask=this.svg.append("clipPath").attr("id","clipPath-"+t.id),this.foregroundMask.append("path").datum({startAngle:1e-6,endAngle:l}).style("fill","#990000").attr("d",this.arc)},postCreate:function(){this.render()},render:function(){this.animate&&this._animateLoader()},_animateLoader:function(){var t,e,n=this;t=.28,e=.43;var i=function(t,e){t.attrTween("d",(function(t){var i=r.interpolate(t.endAngle,e);return function(e){return t.endAngle=i(e),n.arc(t)}}))},a=function(t,e){t.attrTween("d",(function(t){var i=r.interpolate(t.startAngle,e);return function(e){return t.startAngle=i(e),n.arc(t)}}))};if(this.isAnim){n.foreground.transition().delay(t*n.animDuration).duration(.43*n.animDuration).call(i,l).each("end",(function(t,e){n.foreground.transition().duration(999).call(i,1e-6)}));var o=n.foregroundMask.select("path");o.transition().delay(e*n.animDuration).duration(.28*n.animDuration).call(a,l).each("end",(function(t,e){o.transition().duration(999).call(a,1e-6),n._animateLoader()}))}},start:function(){this.isAnim||(this.isAnim=!0,this._animateLoader())},stop:function(){this.isAnim=!1},destroy:function(){this.svg&&a.destroy(this.svg[0][0].ownerSVGElement),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(7),n(3),n(12),n(11),n(20),n(1263),n(17)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([i,a,o],{templateString:s,imageSrc:null,headerText:null,infoText:null,linkText:null,linkHref:null,settingId:null,addClass:null,boldText:null,type:"info",containerClass:null,postCreate:function(){this.inherited(arguments),this.linkText&&this.linkHref&&(this.infoLink.innerText=this.linkText,e.set(this.infoLink,"href",this.linkHref),n.remove(this.infoLink,"hide")),this.addClass&&n.add(this.newClass,this.addClass),this.boldText&&(this.additionalText.innerText=this.boldText,n.remove(this.additionalText,"hide")),this.connect(this.closeIcon,"click",(function(){this.settingId&&r.saveSetting(this.settingId,"true"),this.destroy()}));var t={success:"tick-circle",warning:"warn-circle",error:"not-allowed",info:"info-circle"};this.icon&&(n.add(this.domNode,this.type),n.add(this.domNode,this.containerClass),n.add(this.icon,t[this.type]))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(31),n(115),n(38),n(51),n(8),n(15)],void 0===(a=function(t,e,n,i,a,o,s,r){var l={tagsList:{},tagsCallback:{},tagsInitialized:{}};return{getContactTagStateUrl:"/lists/tags/get-contact-tag-state",getListTagsUrl:"/lists/tags/get-tags-json",applyTagsUrl:"/lists/tags/tag-contacts",removeTagsUrl:"/lists/tags/untag-contacts",getSelectedContactsTagsUrl:"/lists/tags/get-multi-contacts-tags",filterByTagUrl:"/lists/segments/members/tags-filter",tagSegmentOrPreviewUrl:"/lists/tags/tag-segment-preview",bulkUntagAudienceUrl:"/lists/tags/untag-contacts-new",bulkUntagSegmentUrl:"/lists/tags/untag-segment-preview",watchTags:function(t,e){l.tagsCallback[e]||(l.tagsCallback[e]=[],l.tagsInitialized.hasOwnProperty(e)||(l.tagsInitialized[e]=!1,this.getListTags(e,null))),l.tagsCallback[e].push(t),l.tagsInitialized[e]&&t(l.tagsList[e])},runCallbacks:function(t){l.tagsCallback[t]&&l.tagsCallback[t].forEach((function(e){e(l.tagsList[t])}))},getRequest:function(t,e){var i=n.get(t,{handleAs:"json"});return i.then((function(t){e&&e(t)}),(function(t){r.toast("Error: "+t.response.data.error)})),i},postRequest:function(t,e,i){return n.post(t,{handleAs:"json",data:e}).then((function(t){i&&i(t)}),(function(t){r.toast("Error: "+t.response.data.error)}))},getContactTags:function(t,e,n){var i=s.toUrl(this.getContactTagStateUrl,{id:t,list_email_id:e});this.getRequest(i,n)},getListTags:function(t,n){var i=s.toUrl(this.getListTagsUrl,{id:t});this.getRequest(i,n).then(e.hitch(this,(function(e){l.tagsList[t]=e.list_tags,l.tagsInitialized[t]=!0,this.runCallbacks(t)})))},applyTagToContacts:function(t,e,n,i){var a={id:t,list_email_ids:JSON.stringify(e),tag_ids:JSON.stringify([n])},o=s.toUrl(this.applyTagsUrl);this.postRequest(o,a,i)},removeTagFromContacts:function(t,e,n,i){var a={id:t,list_email_ids:JSON.stringify(e),tag_ids:JSON.stringify([n])},o=s.toUrl(this.removeTagsUrl);this.postRequest(o,a,i)},createTagApplyToContacts:function(t,n,i,a){var o={list_email_ids:JSON.stringify(i),tag_name:n,id:t},r=s.toUrl(this.applyTagsUrl);this.postRequest(r,o,e.hitch(this,(function(e){a(e),this.getListTags(t,null)})))},applyTagToAudience:function(t,e,n){var i={tag_audience:!0,id:t,tag_ids:JSON.stringify([e])},a=s.toUrl(this.applyTagsUrl);this.postRequest(a,i,n)},createTagApplyToAudience:function(t,n,i){var a={tag_audience:!0,tag_name:n,id:t},o=s.toUrl(this.applyTagsUrl);this.postRequest(o,a,e.hitch(this,(function(e){i(e),this.getListTags(t,null)})))},untagAudienceOrSegment:function(t,e,n,i,a){var o={untag_audience:t,id:e,tag_name:n,tag_id:i,tag_ids:JSON.stringify([i])},r=s.toUrl(this.bulkUntagSegmentUrl);t&&(r=s.toUrl(this.bulkUntagAudienceUrl)),this.postRequest(r,o,a)},getSelectedContactsTags:function(t,e,n){var i={list_email_ids:JSON.stringify(e),id:t},a=s.toUrl(this.getSelectedContactsTagsUrl);this.postRequest(a,i,n)},updateTagFilter:function(t,e,n){var i=s.toUrl(this.filterByTagUrl);i=i+"?list_id="+t+"&as_json=true",e&&e.length>0&&e.forEach((function(t){i=i+"&tag_ids[]="+t.tag_id})),this.getRequest(i,n)},tagSegmentOrPreview:function(t,e,n){var i=s.toUrl(this.tagSegmentOrPreviewUrl),a={id:t,tag_id:e};this.postRequest(i,a,n)},createTagSegmentPreview:function(t,n,i){var a={id:t,tag_name:n},o=s.toUrl(this.tagSegmentOrPreviewUrl);this.postRequest(o,a,e.hitch(this,(function(){i(),this.getListTags(t,null)})))}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(108),n(89)],void 0===(a=function(t,e){return function(n){return e(n)&&t(n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(136),n(18)],void 0===(a=function(t,e){return{get:function(t,e){return this.canUseXHR(t)?this._getViaXHR(t,e):this._getViaJSONP(t,e)},_getViaXHR:function(t,n){var i={handleAs:"json"};return n&&(i.query=n),e.get(t,i)},_getViaJSONP:function(e,n){var i={jsonp:"c"};return n&&(i.query=n),t.get(e,i)},canUseXHR:function(t){var e=document.createElement("a");return e.href=t,window.location.protocol===e.protocol&&window.location.host.toLowerCase()===e.host.toLowerCase()&&window.location.port===e.port}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(218),n(612)],void 0===(a=function(t,e){return function n(i,a,o,s,r){var l=-1,d=i.length;for(o||(o=e),r||(r=[]);++l<d;){var c=i[l];a>0&&o(c)?a>1?n(c,a-1,o,s,r):t(r,c):s||(r[r.length]=c)}return r}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(172),n(454),n(90),n(50)],void 0===(a=function(t,e,n,i){return function(a,o){return(i(a)?t:e)(a,n(o,3))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(7),n(6),n(2),n(3),n(8),n(36),n(312),n(43)],void 0===(a=function(t,e,n,i,a,o,s,r){var l={nextButton:null,siteId:null,init:function(){n(e("[data-kb-help]"),"click",(function(t){t.stopPropagation(),t.preventDefault(),s.main().show()})),this.nextButton=e("[data-mc-el='nextBtn']")[0]},disableNext:function(){this.nextButton&&t.set(this.nextButton,"disabled","disabled")},enableNext:function(){this.nextButton&&t.remove(this.nextButton,"disabled","disabled")},completeWizard:function(){this.siteId=this.nextButton.value,this.siteId&&(window.location=a.toUrl("account/connected-sites/site-detail?id="+this.siteId))}};return r((function(){l.init()})),l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){return t(null,{constructor:function(t,e){this.attrs={},this.href=t,this.title=e}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(32),n(3),n(71),n(34),n(30),n(2),n(19),n(53),n(119),n(331),n(503)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){var m=e("dojo.dnd.Manager",[o],{constructor:function(){this.avatar=null,this.source=null,this.nodes=[],this.copy=!0,this.target=null,this.canDropFlag=!1,this.events=[]},OFFSET_X:s("touch")?0:16,OFFSET_Y:s("touch")?-64:16,overSource:function(t){this.avatar&&(this.target=t&&"Disabled"!=t.targetState?t:null,this.canDropFlag=Boolean(this.target),this.avatar.update()),d.publish("/dnd/source/over",t)},outSource:function(t){this.avatar?this.target==t&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),d.publish("/dnd/source/over",null)):d.publish("/dnd/source/over",null)},startDrag:function(t,e,o){function s(t){t.preventDefault(),t.stopPropagation()}h.autoScrollStart(i.doc),this.source=t,this.nodes=e,this.copy=Boolean(o),this.avatar=this.makeAvatar(),i.body().appendChild(this.avatar.node),d.publish("/dnd/start",t,e,this.copy),this.events=[l(i.doc,c.move,n.hitch(this,"onMouseMove")),l(i.doc,c.release,n.hitch(this,"onMouseUp")),l(i.doc,"keydown",n.hitch(this,"onKeyDown")),l(i.doc,"keyup",n.hitch(this,"onKeyUp")),l(i.doc,"dragstart",s),l(i.body(),"selectstart",s)];var r="dojoDnd"+(o?"Copy":"Move");a.add(i.body(),r)},canDrop:function(t){var e=Boolean(this.target&&t);this.canDropFlag!=e&&(this.canDropFlag=e,this.avatar.update())},stopDrag:function(){a.remove(i.body(),["dojoDndCopy","dojoDndMove"]),t.forEach(this.events,(function(t){t.remove()})),this.events=[],this.avatar.destroy(),this.avatar=null,this.source=this.target=null,this.nodes=[]},makeAvatar:function(){return new p(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(t){var e=this.avatar;if(e){h.autoScrollNodes(t);var n=e.node.style;n.left=t.pageX+this.OFFSET_X+"px",n.top=t.pageY+this.OFFSET_Y+"px";var i=Boolean(this.source.copyState(u.getCopyKeyState(t)));this.copy!=i&&this._setCopyStatus(i)}s("touch")&&t.preventDefault()},onMouseUp:function(t){if(this.avatar){if(this.target&&this.canDropFlag){var e=Boolean(this.source.copyState(u.getCopyKeyState(t)));d.publish("/dnd/drop/before",this.source,this.nodes,e,this.target,t),d.publish("/dnd/drop",this.source,this.nodes,e,this.target,t)}else d.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(t){if(this.avatar)switch(t.keyCode){case r.CTRL:var e=Boolean(this.source.copyState(!0));this.copy!=e&&this._setCopyStatus(e);break;case r.ESCAPE:d.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(t){if(this.avatar&&t.keyCode==r.CTRL){var e=Boolean(this.source.copyState(!1));this.copy!=e&&this._setCopyStatus(e)}},_setCopyStatus:function(t){this.copy=t,this.source._markDndStatus(this.copy),this.updateAvatar(),a.replace(i.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});return u._manager=null,m.manager=u.manager=function(){return u._manager||(u._manager=new m),u._manager},m}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/request/util")},function(t,e,n){var i,a;i=[n(5),n(10),n(1),n(19),n(32),n(62),n(506),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r){var l={_curFocus:null,_prevFocus:null,isCollapsed:function(){return r.getBookmark().isCollapsed},getBookmark:function(){return(a.global==window?s:new s.SelectionManager(a.global)).getBookmark()},moveToBookmark:function(t){return(a.global==window?s:new s.SelectionManager(a.global)).moveToBookmark(t)},getFocus:function(t,n){var i=!o.curNode||t&&e.isDescendant(o.curNode,t.domNode)?r._prevFocus:o.curNode;return{node:i,bookmark:i&&i==o.curNode&&a.withGlobal(n||a.global,r.getBookmark),openedForWindow:n}},_activeStack:[],registerIframe:function(t){return o.registerIframe(t)},unregisterIframe:function(t){t&&t.remove()},registerWin:function(t,e){return o.registerWin(t,e)},unregisterWin:function(t){t&&t.remove()}};return o.focus=function(t){if(t){var e="node"in t?t.node:t,n=t.bookmark,i=t.openedForWindow,s=!!n&&n.isCollapsed;if(e){var l="iframe"==e.tagName.toLowerCase()?e.contentWindow:e;if(l&&l.focus)try{l.focus()}catch(t){}o._onFocusNode(e)}if(n&&a.withGlobal(i||a.global,r.isCollapsed)&&!s){i&&i.focus();try{a.withGlobal(i||a.global,r.moveToBookmark,null,[n])}catch(t){}}}},o.watch("curNode",(function(t,e,n){r._curFocus=n,r._prevFocus=e,n&&i.publish("focusNode",n)})),o.watch("activeStack",(function(t,e,n){r._activeStack=n})),o.on("widget-blur",(function(t,e){i.publish("widgetBlur",t,e)})),o.on("widget-focus",(function(t,e){i.publish("widgetFocus",t,e)})),n.mixin(r,l),r}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(27),n(9),n(23),n(32),n(193),n(42)],void 0===(a=function(t,e,n,i,a,o,s){function r(i,s,r,l){var d=o.getEffectiveBox(i.ownerDocument);i.parentNode&&"body"==String(i.parentNode.tagName).toLowerCase()||a.body(i.ownerDocument).appendChild(i);var c=null;t.some(s,(function(t){var n=t.corner,a=t.pos,o=0,s={w:{L:d.l+d.w-a.x,R:a.x-d.l,M:d.w}[n.charAt(1)],h:{T:d.t+d.h-a.y,B:a.y-d.t,M:d.h}[n.charAt(0)]},u=i.style;if(u.left=u.right="auto",r){var h=r(i,t.aroundCorner,n,s,l);o=void 0===h?0:h}var p=i.style,m=p.display,g=p.visibility;"none"==p.display&&(p.visibility="hidden",p.display="");var f=e.position(i);p.display=m,p.visibility=g;var v={L:a.x,R:a.x-f.w,M:Math.max(d.l,Math.min(d.l+d.w,a.x+(f.w>>1))-f.w)}[n.charAt(1)],b={T:a.y,B:a.y-f.h,M:Math.max(d.t,Math.min(d.t+d.h,a.y+(f.h>>1))-f.h)}[n.charAt(0)],y=Math.max(d.l,v),w=Math.max(d.t,b),_=Math.min(d.l+d.w,v+f.w)-y,C=Math.min(d.t+d.h,b+f.h)-w;return o+=f.w-_+(f.h-C),(null==c||o<c.overflow)&&(c={corner:n,aroundCorner:t.aroundCorner,x:y,y:w,w:_,h:C,overflow:o,spaceAvailable:s}),!o})),c.overflow&&r&&r(i,c.aroundCorner,c.corner,c.spaceAvailable,l);var u=c.y,h=c.x,p=a.body(i.ownerDocument);/relative|absolute/.test(n.get(p,"position"))&&(u-=n.get(p,"marginTop"),h-=n.get(p,"marginLeft"));var m=i.style;return m.top=u+"px",m.left=h+"px",m.right="auto",c}var l={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},d={at:function(e,n,i,a,o){return r(e,t.map(i,(function(t){var e={corner:t,aroundCorner:l[t],pos:{x:n.x,y:n.y}};return a&&(e.pos.x+="L"==t.charAt(1)?a.x:-a.x,e.pos.y+="T"==t.charAt(0)?a.y:-a.y),e})),o)},around:function(a,o,s,l,d){var c;if("string"==typeof o||"offsetWidth"in o||"ownerSVGElement"in o){if(c=e.position(o,!0),/^(above|below)/.test(s[0])){var u=e.getBorderExtents(o),h=o.firstChild?e.getBorderExtents(o.firstChild):{t:0,l:0,b:0,r:0},p=e.getBorderExtents(a),m=a.firstChild?e.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};c.y+=Math.min(u.t+h.t,p.t+m.t),c.h-=Math.min(u.t+h.t,p.t+m.t)+Math.min(u.b+h.b,p.b+m.b)}}else c=o;if(o.parentNode)for(var g="absolute"==n.getComputedStyle(o).position,f=o.parentNode;f&&1==f.nodeType&&"BODY"!=f.nodeName;){var v=e.position(f,!0),b=n.getComputedStyle(f);if(/relative|absolute/.test(b.position)&&(g=!1),!g&&/hidden|auto|scroll/.test(b.overflow)){var y=Math.min(c.y+c.h,v.y+v.h),w=Math.min(c.x+c.w,v.x+v.w);c.x=Math.max(c.x,v.x),c.y=Math.max(c.y,v.y),c.h=y-c.y,c.w=w-c.x}"absolute"==b.position&&(g=!0),f=f.parentNode}var _=c.x,C=c.y,k="w"in c?c.w:c.w=c.width,S="h"in c?c.h:(i.deprecated("place.around: dijit/place.__Rectangle: { x:"+_+", y:"+C+", height:"+c.height+", width:"+k+" } has been deprecated.  Please use { x:"+_+", y:"+C+", h:"+c.height+", w:"+k+" }","","2.0"),c.h=c.height),x=[];function I(t,e){x.push({aroundCorner:t,corner:e,pos:{x:{L:_,R:_+k,M:_+(k>>1)}[t.charAt(1)],y:{T:C,B:C+S,M:C+(S>>1)}[t.charAt(0)]}})}t.forEach(s,(function(t){var e=l;switch(t){case"above-centered":I("TM","BM");break;case"below-centered":I("BM","TM");break;case"after-centered":e=!e;case"before-centered":I(e?"ML":"MR",e?"MR":"ML");break;case"after":e=!e;case"before":I(e?"TL":"TR",e?"TR":"TL"),I(e?"BL":"BR",e?"BR":"BL");break;case"below-alt":e=!e;case"below":I(e?"BL":"BR",e?"TL":"TR"),I(e?"BR":"BL",e?"TR":"TL");break;case"above-alt":e=!e;case"above":I(e?"TL":"TR",e?"BL":"BR"),I(e?"TR":"TL",e?"BR":"BL");break;default:I(t.aroundCorner,t.corner)}}));var T=r(a,x,d,{w:k,h:S});return T.aroundNodePos=c,T}};return s.place=d}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(1),n(54),n(55),n(10),n(9),n(27),n(61),n(244)],void 0===(a=function(t,e,n,i,a,o,s,r,l){var d=e.getObject("dojox.fx",!0);return e.mixin(d,{anim:n.anim,animateProperty:n.animateProperty,fadeTo:n._fade,fadeIn:n.fadeIn,fadeOut:n.fadeOut,combine:i.combine,chain:i.chain,slideTo:i.slideTo,wipeIn:i.wipeIn,wipeOut:i.wipeOut}),d.sizeTo=function(t){var s=t.node=a.byId(t.node),r="absolute",l=t.method||"chain";t.duration||(t.duration=500),"chain"==l&&(t.duration=Math.floor(t.duration/2));var d,c,u,h,p,m,g=null,f=(m=s,function(){var e=o.getComputedStyle(m),n=e.position,i=e.width,a=e.height;if(d=n==r?m.offsetTop:parseInt(e.top)||0,u=n==r?m.offsetLeft:parseInt(e.left)||0,p="auto"==i?0:parseInt(i),g="auto"==a?0:parseInt(a),h=u-Math.floor((t.width-p)/2),c=d-Math.floor((t.height-g)/2),n!=r&&"relative"!=n){var s=o.coords(m,!0);d=s.y,u=s.x,m.style.position=r,m.style.top=d+"px",m.style.left=u+"px"}}),v=n.animateProperty(e.mixin({properties:{height:function(){return f(),{end:t.height||0,start:g}},top:function(){return{start:d,end:c}}}},t)),b=n.animateProperty(e.mixin({properties:{width:function(){return{start:p,end:t.width||0}},left:function(){return{start:u,end:h}}}},t));return i["combine"==t.method?"combine":"chain"]([v,b])},d.slideBy=function(t){var i,l,d,c=t.node=a.byId(t.node),u=(d=c,function(){var t=o.getComputedStyle(d),e=t.position;if(i="absolute"==e?d.offsetTop:parseInt(t.top)||0,l="absolute"==e?d.offsetLeft:parseInt(t.left)||0,"absolute"!=e&&"relative"!=e){var n=s.coords(d,!0);i=n.y,l=n.x,d.style.position="absolute",d.style.top=i+"px",d.style.left=l+"px"}});u();var h=n.animateProperty(e.mixin({properties:{top:i+(t.top||0),left:l+(t.left||0)}},t));return r.connect(h,"beforeBegin",h,u),h},d.crossFade=function(t){var o=t.nodes[0]=a.byId(t.nodes[0]),s=l.style(o,"opacity"),r=t.nodes[1]=a.byId(t.nodes[1]);l.style(r,"opacity");return i.combine([n[0==s?"fadeIn":"fadeOut"](e.mixin({node:o},t)),n[0==s?"fadeOut":"fadeIn"](e.mixin({node:r},t))])},d.highlight=function(t){var i=t.node=a.byId(t.node);t.duration=t.duration||400;var o=t.color||"#ffff99",s=l.style(i,"backgroundColor");"rgba(0, 0, 0, 0)"==s&&(s="transparent");var d=n.animateProperty(e.mixin({properties:{backgroundColor:{start:o,end:s}}},t));return"transparent"==s&&r.connect(d,"onEnd",d,(function(){i.style.backgroundColor=s})),d},d.wipeTo=function(t){t.node=a.byId(t.node);var i=t.node,o=i.style,s=t.width?"width":"height",r=t[s],d={};return d[s]={start:function(){if(o.overflow="hidden","hidden"==o.visibility||"none"==o.display)return o[s]="1px",o.display="",o.visibility="",1;var t=l.style(i,s);return Math.max(t,1)},end:r},n.animateProperty(e.mixin({properties:d},t))},d}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/html")},function(t,e,n){var i,a;i=[n(87)],void 0===(a=function(t){return function(){try{var e=t(Object,"defineProperty");return e({},"",{}),e}catch(t){}}()}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(294)],void 0===(a=function(t){return t()}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(349),n(156),n(50),n(157),n(167),n(168)],void 0===(a=function(t,e,n,i,a,o){var s=Object.prototype.hasOwnProperty;return function(r,l){var d=n(r),c=!d&&e(r),u=!d&&!c&&i(r),h=!d&&!c&&!u&&o(r),p=d||c||u||h,m=p?t(r.length,String):[],g=m.length;for(var f in r)!l&&!s.call(r,f)||p&&("length"==f||u&&("offset"==f||"parent"==f)||h&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||a(f,g))||m.push(f);return m}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){return function(n){return t(e(n))}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(172),n(300)],void 0===(a=function(t,e){var n=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;return i?function(e){return null==e?[]:(e=Object(e),t(i(e),(function(t){return n.call(e,t)})))}:e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(87),n(64)],void 0===(a=function(t,e){return t(e,"Set")}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(173)],void 0===(a=function(t){return function(e,n,i){var a=null==e?void 0:t(e,n);return void 0===a?i:a}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(107),n(109),n(50),n(132)],void 0===(a=function(t,e,n,i){var a=t?t.prototype:void 0,o=a?a.toString:void 0;return function t(a){if("string"==typeof a)return a;if(n(a))return e(a,t)+"";if(i(a))return o?o.call(a):"";var s=a+"";return"0"==s&&1/a==-1/0?"-0":s}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(392),n(301)],void 0===(a=function(t,e){return function(n,i){return null!=n&&e(n,i,t)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){var e=t([Error],{constructor:function(t,e,n){this.message=t,this.code=e,this.errors=n}});return e.CODE_REQUESTMAPPER=1526919,e.createFromResponseData=function(t){var n=t.message,i=t.code;return new e(n,i)},e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(9),n(22),n(10),n(1),n(36),n(7)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([],{overlayClass:"",lastFocusedElement:null,isVisible:function(){return"visible"==n.get(this.domNode,"visibility")&&1==n.get(this.domNode,"opacity")},show:function(t){var l=new i;return this.isVisible()?l.resolve():(this.lastFocusedElement=document.activeElement,this.onShow(),s(this.domNode,"stop"),n.set(this.domNode,"zIndex",940),e.add(document.documentElement,this.overlayClass+" overflow-hidden"),s(this.domNode,{opacity:[1,"easeOutCubic",.2],translateY:["0%","easeOutQuint","-100%"]},{visibility:"visible",duration:475,complete:o.hitch(this,(function(){a.byId(t)&&a.byId(t).focus(),r.set(this.domNode,"aria-hidden","false"),l.resolve()}))})),l.promise},hide:function(t){var a=new i;if(t=t||{},this.isVisible()){this.onHide();var l=!1===t.animate?0:375;s(this.domNode,"stop"),s(this.domNode,{translateY:["-100%","easeOutQuint","0%"]},{duration:l,visibility:"hidden",opacity:.2,complete:o.hitch(this,(function(){n.set(this.domNode,"zIndex",-5),e.replace(document.documentElement,"",this.overlayClass+" overflow-hidden"),r.set(this.domNode,"aria-hidden","true"),this.lastFocusedElement&&(this.lastFocusedElement.focus(),this.lastFocusedElement=null),a.resolve()}))})}else a.resolve();return a.promise},onHide:function(){},onShow:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t=window.top!==window&&"/i"===window.location.pathname.substr(0,2);return{enableFullscreen:function(e){t&&window.top.postMessage({channel:"fallback/fullscreen",payload:e},window.location.origin)},enableGlobalSearch:function(e){t&&window.top.postMessage({channel:"fallback/global-search",payload:e},window.location.origin)},prefixPath:function(e){return t?"/i"+e:e},isInFallbackIframe:function(){return t}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(13),n(6),n(2),n(1),n(18),n(7),n(3),n(9),n(4),n(37),n(5),n(28),n(10),n(35),n(14),n(101),n(29),n(99),n(15),n(8),n(51),n(45),n(22),n(450),n(48),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S){var x=function(t){n(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()}))},I=function(t){p.byId("billing-info-error").innerHTML=t,n("#billing-info-error").closest(".error").forEach((function(t){r.remove(t,"hide")}))};return{refreshPaymentInfo:function(t,e){var i=new k;return void 0!==t&&null!=t||(t="default"),void 0!==e&&null!=e||(e="current-billing-info"),n("#".refreshLocation)&&(domBlock=p.byId(e),o(w.toUrl("account/billing-info-snippet",{template:t})).then((function(t){try{u.forEach(g.findWidgets(domBlock),(function(t){t.destroy()})),domBlock.innerHTML=t,c.parse(domBlock)}catch(t){location.reload()}i.resolve()}),(function(t){location.reload()}))),i},removeBillingInfo:function(){var t=new k,e=new v({title:"Remove Payment Method",onHide:function(){e.destroyRecursive()},onDownloadEnd:function(){x(e),n("form",e.domNode).on("submit",(function(n){n.stopPropagation(),n.preventDefault(),o(w.toUrl("/account/delete-payment-post"),{handleAs:"json"}).then((function(n){n.error?I(n.error):(e.hide(),t.resolve(),y.toast("Swell. Your payment method has been removed."))}),(function(t){I("There was a problem removing your payment method. Please try again.")}))}))}});return e.setHref(w.toUrl("account/delete-payment-modal",{redirect:window.location.pathname})),e.show(),t},updateBillingEmail:function(){var t=new k,e=new v({title:"Update Billing Email",onHide:function(){e.destroyRecursive()},onDownloadEnd:function(){x(e),n("form",e.domNode).on("submit",(function(n){n.stopPropagation(),n.preventDefault();var i=C.toObject(this),a=s.get(this,"action");o.post(a,{data:i,handleAs:"json"}).then((function(n){n.error_msg?I(n.error_msg):(e.hide(),t.resolve(),y.toast("Billing email updated"))}),(function(t){I("There was a problem switching your email address. Please try again.")}))}))}});return e.set("href",w.toUrl("account/billing-email-modal")),e.show(),t}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(197)],void 0===(a=function(t){return function(e,n){return t(e,n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(116)],void 0===(a=function(t){return function(e){return"function"==typeof e?e:t}}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(t){var i,a;i=[n(0),n(12),n(11),n(20),n(41),n(228),n(1268),n(10),n(2),n(19),n(1),n(63),n(5),n(1269),n(4),n(3),n(9),n(7),n(51),n(30),n(29),n(138),n(21),n(15),n(52),n(17),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I){var T={REGULAR_LINK:{label:"Web address",value:"regularLink"},ABANDONED_CART_LINK:{label:"Abandoned cart page",value:"abandonCartLink"},EMAIL_LINK:{label:"Email address",value:"emailLink"},ANCHOR_LINK:{label:"Anchor link",value:"anchorLink"},FILE_LINK:{label:"File",value:"fileLink"},LANDING_PAGE_LINK:{label:"Landing page",value:"landingPageLink"},LANDING_PAGE_TRACKING_OPT_OUT:{label:"Tracking opt-out",value:"landingPageTrackingOptOut"},SURVEY_LINK:{label:"Survey",value:"surveyLink"}},A=["UNSUB","FORWARD","UPDATE_PROFILE","ARCHIVE","ABOUT_LIST"],j=t("mojo.widgets.LinkPicker",[e,n,i],{templateString:s,anchors:[],showButtons:!0,showRemoveLink:!0,showAdvancedOptions:!0,abandonedCartEnabled:!1,landingPagesLinks:[],surveysLinks:[],createdFromCK:!1,constructor:function(t){this.setLandingPagesLinks(),this.setDropdownOptions(t.allowed),window.app&&window.app.surveysLinks&&(this.surveysLinks=window.app.surveysLinks)},setLandingPagesLinks:function(){return window.app&&window.app.landingPagesLinks&&(this.landingPagesLinks=window.app.landingPagesLinks),!0},setDropdownOptions:function(t){return this.options=o(t||T),!0},refreshInputs:function(){if(this.linkType.set("value","regularLink"),this.href){var t=this.href,e=this.landingPagesLinks.map((function(t){return t.link})),n=this.surveysLinks.map((function(t){return t.link}));if(t.match("mailto:")){t=t.replace("mailto:",""),this.linkType.set("value","emailLink");var i={},a=-1==t.indexOf("?")?t:t.substring(0,t.indexOf("?"));if(-1!=t.indexOf("?")){var o=t.substring(t.indexOf("?")+1,t.length);o=o.replace(/&#039;/g,"'"),i=b.queryToObject(o)}this.emailInput.value=a,i.subject&&(this.subjectInput.value=i.subject),i.body&&(this.emailBodyInput.value=i.body)}else if(h.indexOf(e,t)>=0){this.linkType.set("value","landingPageLink");var s=e.indexOf(t),r=this.landingPagesLinks[s];this.selectLandingPage.set("value",JSON.stringify(r))}else this.abandonedCartEnabled&&"*|CART:URL|*"==t.trim()?this.linkType.set("value","abandonCartLink"):"#lp-tracking-opt-out"===t?(this.linkType.set("value","landingPageTrackingOptOut"),this.landingPageTrackingOptOutInput.value=this.text):h.indexOf(n,t)>=0?(this.linkType.set("value","surveyLink"),this.selectSurvey.set("value",this.surveysLinks[n.indexOf(t)].id)):this.hrefInput.value=this.href}this.targetCheckbox.set("checked",!0),this.attrs&&(this.titleInput.value=this.attrs.title?this.attrs.title:"",this.linkClassInput.value=this.attrs.class?this.attrs.class:"",this.attrs.target&&this.targetCheckbox.set("checked","_blank"==this.attrs.target)),this.showSection()},postCreate:function(){m.place("<label>Link to</label>",this.linkSelectPoint),this.linkType=new a({options:this.options,class:"!margin--lv0",disabled:1===this.options.length&&"disabled"}).placeAt(this.linkSelectPoint),this.options.length>1||g.add(this.linkSelectPoint,"hide"),this.showButtons||f.set(this.buttonGroup,"display","none"),this.showRemoveLink||f.set(this.removeLinkContainer,"display","none"),this.showAdvancedOptions||(g.remove(this.advancedToggle,"inline-block-i"),g.add(this.advancedToggle,"hide")),this.anchors.length&&(m.empty(this.selectAnchor),h.forEach(this.anchors,c.hitch(this,(function(t){m.place('<option value="'+t+'">'+t+"</option>",this.selectAnchor)})))),this.abandonedCartEnabled||this.linkType.removeOption("abandonCartLink"),this.landingPageTrackingOptOutEnabled()||this.linkType.removeOption("landingPageTrackingOptOut"),0===this.landingPagesLinks.length?this.linkType.removeOption("landingPageLink"):h.forEach(this.landingPagesLinks,c.hitch(this,(function(t){this.selectLandingPage.addOption({value:JSON.stringify(t),label:t.title})}))),0===this.surveysLinks.length?this.linkType.removeOption("surveyLink"):h.forEach(this.surveysLinks,c.hitch(this,(function(t){this.selectSurvey.addOption({value:t.id,label:t.title})})));var t=this;this.own(l(this.cancelBtn,"click",c.hitch(this,"_cancel")),l(this.saveBtn,"click",c.hitch(this,"_save")),l(this.removeLink,"click",c.hitch(this,"_remove")),l(this.advancedToggle,"click",c.hitch(this,(function(t){t.preventDefault(),k.disclosureElement(this.advancedOptions,t.currentTarget,!0)}))),l(this.linkType,"change",(function(){t.showSection()})),l(this.changeFileLink,"click",(function(e){e.stopPropagation(),e.preventDefault(),t._openFileManager()})),l(this.hrefInput,"blur",this._validateLinkUrl.bind(this)),d.subscribe("mojo/filemanager/hide",(function(){t.dialog&&t._closedForFileManager&&(t._closedForFileManager=!1,t.dialog.show())}))),this.refreshInputs()},showSection:function(){"landingPageTrackingOptOut"===this.linkType.value?g.add(this.additionalOptionsContainer,"hide"):g.remove(this.additionalOptionsContainer,"hide");var t=p(".linkType",this.domNode).addClass("hide").filter("."+this.linkType.value).removeClass("hide").query("input")[0];t&&t.focus(),"fileLink"==this.linkType.value&&this._openFileManager()},showValidationError:function(t){var e=this._getCurrentLinkInput();if(e){g.add(e,"invalid");var n=p(".invalid-error",e.parentElement);0===n.length&&(n=m.create("div",{class:"invalid-error",innerHTML:t}),m.place(n,e.parentElement))}},hideValidationError:function(){var t=this._getCurrentLinkInput();if(t){g.remove(t,"invalid");var e=p(".invalid-error",t.parentElement);Array.prototype.forEach.call(e,(function(t){m.destroy(t)}))}},_openFileManager:function(){this.dialog&&(this._closedForFileManager=!0,this.dialog.hide()),_.show({actions:"select, rename, copy",onSelect:c.hitch(this,(function(t){_.hide(),this.linkToFile(t)}))})},show:function(){this.dialog=new w({title:"Insert or Edit Link",content:this.domNode,class:"link-modal dijitDialog--fullScreen@phone",style:"width:450px;",draggable:!Boolean(window.app&&window.app.nativeUtils&&window.app.nativeUtils.getNativeObject())}),this.dialog.startup(),this.own(l(this.dialog.containerNode,"keydown",c.hitch(this,(function(t){if(this.dialog.open){var e=t.target||t.srcElement;t.keyCode==y.ENTER&&e!=this.emailBodyInput&&(u.stop(t),this._save())}})))),m.place(this.dialog.domNode,p("body")[0],"first"),this.dialog.show();var t=p(".linkType:not(.hide) input",this.domNode)[0];t&&setTimeout((function(){t.focus()}),50),window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.setScreenState({state:"linkDialog",backAction:c.hitch(this,this._cancel)})},hide:function(t){return this.dialog.hide().then(c.hitch(this,(function(){window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.removeStateQueue(),t&&this.destroy()})))},linkToFile:function(t){v.set(this.fileUrlInput,"value",t)},_save:function(){var t=this.hrefInput.value;S.isMergeField(t)&&this._sanitizeMergeField(),this.hide(!1).then(c.hitch(this,(function(){this.onSave(this.getLink()),this.destroy()})))},getLink:function(){var t,e,n;switch(this.linkType.value){case"abandonCartLink":e="*|CART:URL|*";break;case"emailLink":e="mailto:"+this.emailInput.value,this.subjectInput.value&&(e+="?subject="+encodeURIComponent(this.subjectInput.value)),this.emailBodyInput.value&&(e+=(encodeURIComponent(this.subjectInput.value)?"&":"?")+"body="+encodeURIComponent(this.emailBodyInput.value)),t=this.emailInput.value;break;case"anchorLink":e=""!=this.selectAnchor.value?"#"+this.selectAnchor.value:"",t=this.selectAnchor.value;break;case"fileLink":e=this.fileUrlInput.value,decodeURIComponent(e).match(/^((http[s]?:|ftp:|mailto:|tel:|#|\*\|))/gi)||(e="http://"+e),t=e;break;case"landingPageLink":var i=JSON.parse(this.selectLandingPage.value);e=i.link,n=i.uid,t=e;break;case"landingPageTrackingOptOut":t=this.landingPageTrackingOptOutInput.value,e="#lp-tracking-opt-out";break;case"surveyLink":e=t=this.surveysLinks[this.surveysLinks.map((function(t){return t.id})).indexOf(this.selectSurvey.value)].link;break;case"regularLink":default:t=e=this.hrefInput.value}return{linkType:this.linkType.value,href:e,text:t,uid:n,attrs:{class:this.linkClassInput.value,title:this.titleInput.value,target:v.get(this.targetCheckbox,"checked")?this.targetCheckbox.value:"_self"}}},_getCurrentLinkInput:function(){return p(".linkType",this.domNode).filter("."+this.linkType.value).query("input").shift()},_validateLinkUrl:function(){var t=this.hrefInput.value;return decodeURIComponent(t).match(/^((http[s]?:|ftp:|mailto:|tel:|#|\*\|))/gi)||(t="http://"+t,this.hrefInput.value=t),S.isUrl(t)||S.isMergeField(t)?(this.hideValidationError(),!0):(this.showValidationError("Please enter a valid URL or merge field."),!1)},_sanitizeMergeField:function(){var t=this.hrefInput.value;if(this._shouldAddTextTag(t)){var e=t.replace(/^\*\|/,"*|TEXT:");this.hrefInput.value=e}},_shouldAddTextTag:function(t){var e=/^\*\|/.test(t),n=/^\*\|.*?\:/.test(t),i=-1!==A.indexOf(S.toMergeToken(t));return e&&!n&&!i},_cancel:function(){this.onCancel(),this.hide(!0)},_remove:function(){this.onRemove(),this.hide(!0)},onSave:function(t){},onCancel:function(){},onRemove:function(){},landingPageTrackingOptOutEnabled:function(){return this.createdFromCK&&window.app&&window.app.isMCTrackingEnabledForPage}});return j.LINK_TYPES=T,j}.apply(e,i))||(t.exports=a)}).call(this,n(102)(t))},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(164),n(1331),n(7),n(3),n(2),n(66)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t([e,n],{templateString:a,tier:1,condensed:!1,label:null,toggletipText:null,postCreate:function(){if(this.inherited(arguments),1===this.tier&&s.remove(this.tierOne,"hide"),2===this.tier){this.condensed&&(s.add(this.tierTwo,"condensed"),s.add(this.tierTwoLabel,"hide")),s.remove(this.tierTwo,"hide");var t=this;r(this.tierTwo,l.enter,(function(){s.add(t.animateIntro,"hide"),s.add(t.animateIdle,"hide"),s.remove(t.animateHover,"hide")})),r(this.tierTwo,l.leave,(function(){s.add(t.animateIntro,"hide"),s.add(t.animateHover,"hide"),s.remove(t.animateIdle,"hide")})),this.toggletipText&&new i({connectId:this.tierTwo,showDelay:0,label:this.toggletipText})}},triggerAnimation:function(){o.set(this.animateIntro,"src","/images/smart-mark/tier2intro.gif?a="+Math.random())}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(6)],void 0===(a=function(t){return{dashToCamel:function(t){return t.replace(/(\-[a-z])/g,(function(t){return t.toUpperCase().replace("-","")}))},inline:function(e,n){return n?(n.forEach(function(n){for(var i in n.props)if(n.props.hasOwnProperty(i)){var a=n.props[i].value;if(a&&""!==a){var o=n.props[i].selector||n.selector;"mcBlockContainer"===o?t(e).style(this.dashToCamel(i),a):t(o,e).style(this.dashToCamel(i),a)}}}.bind(this)),e):e},reset:function(e,n){return n?(n.forEach(function(n){for(var i in n.props)if(n.props.hasOwnProperty(i)){var a=n.props[i].selector||n.selector;"mcBlockContainer"===a?t(e).style(this.dashToCamel(i),null):t(a,e).style(this.dashToCamel(i),null)}}.bind(this)),e):e}}}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div class="content__gdprBlock">\n    <div class="content__gdpr">\n        <label>${gdprLabel}</label>\n        <p>${gdprDescription}</p>\n        <div data-dojo-attach-point="gdprFormResponseMessages"></div>\n        <ul class="content__gdprFields" data-dojo-attach-point="gdprFieldsContainer"></ul>\n        <p>${gdprLegal}</p>\n    </div>\n    <div class="content__gdprLegal">\n        <a href="https://www.mailchimp.com/gdpr" target="_blank"><img src="https://cdn-images.mailchimp.com/icons/mailchimp-gdpr.svg" alt="GDPR" /></a>\n        <p data-dojo-attach-point="gdprMcLegalContainer"></p>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="field-wrapper">\n\t<label for="mc-${name}">${label}</label>\n\t<input type="text" name="${name}" value="" id="mc-${name}" />\n</div>'},function(t,e){t.exports='<div class="field-wrapper email-field">\n    <label for="mc-${name}">${label}</label>\n    <input type="email" name="${name}" value="" id="mc-${name}" data-dojo-attach-point="emailInput"/>\n</div>'},function(t,e){t.exports='<div class="field-wrapper birthday">\n\t<label for="mc-${name}-month">${label}</label>\n\t<div data-dojo-attach-point="inputsContainer"> \n        <input class="birthday-month" type="text" placeholder="MM" maxlength="2" name="${name}[month]" value="" id="mc-${name}-month" data-dojo-attach-point="monthNode" />\n        <input class="birthday-day" type="text" placeholder="DD" maxlength="2" name="${name}[day]" value="" id="mc-${name}-day" data-dojo-attach-point="dayNode" />\n\t</div>\n</div>'},function(t,e){t.exports='<div class="field-wrapper date">\n\t<label for="mc-${name}-month">${label}</label>\n\t<div data-dojo-attach-point="inputsContainer">\n\t\t<input class="date-year" type="text" maxlength="4" placeholder="YYYY" name="${name}[year]" value="" id="mc-${name}-year" data-dojo-attach-point="yearNode" />\n\t\t<input class="date-month" type="text" maxlength="2" placeholder="MM" name="${name}[month]" value="" id="mc-${name}-month" data-dojo-attach-point="monthNode" />\n\t\t<input class="date-day" type="text" maxlength="2" placeholder="DD" name="${name}[day]" value="" id="mc-${name}-day" data-dojo-attach-point="dayNode" />\n\t</div>\n</div>'},function(t,e){t.exports='<div class="field-wrapper phone">\n\t<label for="mc-${name}-area">${label}</label>\n    <div>\n        <input class="phone-area" type="text" maxlength="3" placeholder="###" name="${name}[area]" value="" id="mc-${name}-area" data-dojo-attach-point="phoneAreaNode" />\n        <input class="phone-detail1" type="text" maxlength="3" placeholder="###" name="${name}[detail1]" value="" id="mc-${name}-detail1" data-dojo-attach-point="phoneDetail1Node" />\n       \t<input class="phone-detail2" type="text" maxlength="4" placeholder="####" name="${name}[detail2]" value="" id="mc-${name}-detail2" data-dojo-attach-point="phoneDetail2Node" />\n    </div>\n</div>'},function(t,e){t.exports='<div class="field-wrapper">\n\t<label for="mc-${name}">${label}</label>\n\t<input type="text" name="${name}" value="" id="mc-${name}" />\n</div>'},function(t,e){t.exports='<div class="field-wrapper">\n\t<label for="mc-${name}">${label}</label>\n\t<input type="text" placeholder="http://" name="${name}" value="" id="mc-${name}" />\n</div>'},function(t,e){t.exports='<div class="field-wrapper">\n\t<label for="mc-${name}">${label}</label>\n\t<select name="${name}" id="mc-${name}" data-dojo-attach-point="choicesContainer"></select>\n</div>'},function(t,e){t.exports='<li class="field-wrapper !margin-bottom--lv2">\n\t<label class="checkbox" for="gdpr-${marketing_preference_id}">\n\t\t\t<input type="checkbox" id="gdpr-${marketing_preference_id}" name="${name}" data-dojo-attach-point="choicesContainer" />\n\t\t\t<span>${label}</span>\n\t</label>\n</li>\n'},function(t,e,n){var i,a;i=[n(31),n(51),n(15),n(8)],void 0===(a=function(t,e,n,i){var a={countUrl:i.toUrl("pro/segments/count"),popupUrl:i.toUrl("pro/segments/popup")};return{refreshSegmentCount:function(e,n,i){return t.post(a.countUrl,{data:{list_id:e,type:i,ast:JSON.stringify(n)},handleAs:"json"})},popupSegment:function(t,e,i){var o=a.popupUrl+"?list_id="+t+"&type"+i+"&ast="+JSON.stringify(e),s=window.open(o,"_blank","toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=600,height=400");return n.checkPopupWin(s),!1},getCachedCount:function(e,n){return t.get(i.toUrl("pro/segments/cached-count"),{query:{list_id:e,segment_id:n},handleAs:"json"})},getSegment:function(e,n){return t.get(i.toUrl("pro/segments/view",{list_id:e,segment_id:n}),{handleAs:"json"})},saveReportSegment:function(t,n,a,o,s){var r={id:n,segment_id:a,ast:JSON.stringify(s),name:o,list_id:t},l=e.objectToQuery(r);window.location.href=i.toUrl("pro/reports/save-segment?"+l)},runListSegment:function(e,n,a,o){return t.post(i.toUrl("pro/segments/run"),{data:{list_id:e,segment_id:n,name:a,ast:JSON.stringify(o)},handleAs:"json"})},reRunSegment:function(e,n){return t.post(i.toUrl("pro/segments/re-run"),{data:{list_id:e,segment_id:n},handleAs:"json"})},setListSegment:function(e,n){return t.post(i.toUrl("pro/segments/select-segment"),{data:{list_id:e,segment_id:n},handleAs:"json"})},deleteSegment:function(e,n){return t.post(i.toUrl("pro/segments/delete"),{data:{list_id:e,segment_id:n},handleAs:"json"})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(29),n(0),n(1),n(12),n(11),n(2),n(3),n(18),n(8),n(1477)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return e([i,a],{templateString:d,campaignUrl:"",campaignId:"",saveAndExitUrl:l.toUrl("campaigns"),continueButtonLabel:"Continue",cancelButtonLabel:"Save for later",saveInstructions:"You can choose to save your campaign as a draft and try again later, or continue to build your campaign now and send with this default campaign URL:",postCreate:function(){var e=new t({title:"Campaign URL Error",content:this.domNode,closable:!1});o(this.continueButton,"click",n.hitch(this,(function(){s.add(this.continueButton,"button-loading"),this.disablePrettyUrl().then((function(){e.hide()}))}))),this.onCancel&&o(this.cancelButton,"click",n.hitch(this,(function(t){this.onCancel(t),e.hide()}))),e.show()},disablePrettyUrl:function(t){return r(l.toUrl("campaigns/wizard/disable-pretty-url"),{query:{id:this.campaignId},handleAs:"json"})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(10),n(3),n(9),n(7),n(4),n(6),n(18),n(17),n(110)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h={};return h.AutomationChart=t([],{chartNoData:'<div class="lastUnit size1of1"><div class="c-noDataBlock text-align--center border-gray border-radius--lv2"><div class="c-noDataBlock_icon" style="background-image: url(/images/brand_assets/illos/art-empty-default.png)"></div><h2 class="c-noDataBlock_title">We don’t have enough data yet.</h2><p class="c-noDataBlock_message">We’ll show you some pretty charts here once your workflow starts sending.</p></div></div>',constructor:function(t,e,n){this.elementId=t,this.dataProviderUrl=e;var a=this;d.get(this.dataProviderUrl,{query:{id:n},handleAs:"json",content:""}).then((function(e){e&&e.length>=1?a.renderData(e):(i.byId(t).innerHTML=a.chartNoData,o.set(i.byId(t),{height:"auto"}),l("#automation-performance-legend").style("display","none"),l("#automation-performance-details").style("display","none"))}),(function(t){}))},renderData:function(t){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=t,this.chart.categoryField="date",this.chart.startDuration=0,this.chart.autoMargins=!1,this.chart.marginTop=10,this.chart.marginRight=0,this.chart.marginBottom=50,this.chart.marginLeft=50,this.chart.balloon.showBullet=!1,this.chart.balloon.textShadowColor="none",this.chart.balloon.horizontalPadding=15,this.chart.balloon.verticalPadding=5,this.chart.balloon.borderThickness=0,this.chart.balloon.borderThickness=0,this.chart.balloon.shadowAlpha=0,this.chart.balloon.color="#FFFFFF",this.chart.balloon.fillAlpha=1,this.chart.balloon.adjustBorderColor=!1,this.chart.fontSize=14,this.chart.fontFamily="'Graphik Web',' Helvetica Neue', Arial, Helvetica, Verdana, sans-serif",this.chart.color=u.brandColors.peppercorn.hex;var n=this.chart.categoryAxis;n.autoGridCount=!1,n.gridPosition="start",n.dashLength=0,n.axisThickness=2,n.gridAlpha=0,n.labelsEnabled=!1,n.axisColor=u.brandColors.peppercorn.hex;var i=new AmCharts.ValueAxis;i.dashLength=0,i.gridThickness=0,i.axisColor="#e0e0e0",i.axisThickness=0,i.position="right",this.chart.addValueAxis(i);var a=new AmCharts.ValueAxis;a.dashLength=0,a.axisAlphaaxisAlpha=0,a.unit="%",a.axisColor="#e0e0e0",a.axisThickness=0,e.some(t,(function(t){return t&&100==t.open_rate}))&&(a.maximum=100),this.chart.addValueAxis(a),this.sends=new AmCharts.AmGraph,this.sends.valueField="sends",this.sends.type="column",this.sends.fillAlphas=1,this.sends.showBallon=!0,this.sends.balloonText="[[value]] Emails Sent",this.sends.bullet="none",this.sends.valueAxis=i,this.sends.lineColor=u.dataViz.combo1.color3,this.sends.balloonColor=u.dataViz.flyover.flagFill,this.chart.addGraph(this.sends),this.clickrate=new AmCharts.AmGraph,this.clickrate.title="Click Rate",this.clickrate.valueField="click_rate",this.clickrate.type="smoothedLine",this.clickrate.balloonText="[[clicks]] Clicks - [[value]]%",this.clickrate.bullet="round",this.clickrate.bulletColor="#fff",this.clickrate.bulletBorderThickness=2,this.clickrate.bulletBorderAlpha=1,this.clickrate.bulletSize=6,this.clickrate.fillAlphas=0,this.clickrate.valueAxis=a,this.clickrate.bulletBorderColor=u.dataViz.combo1.color2,this.clickrate.lineColor=u.dataViz.combo1.color2,this.clickrate.balloonColor=u.dataViz.flyover.flagFill,this.clickrate.lineThickness=2,this.chart.addGraph(this.clickrate),this.openrate=new AmCharts.AmGraph,this.openrate.title="Open Rate",this.openrate.valueField="open_rate",this.openrate.type="smoothedLine",this.openrate.balloonText="[[opens]] Opens - [[value]]%",this.openrate.lineThickness=2,this.openrate.bullet="round",this.openrate.bulletColor="#fff",this.openrate.bulletBorderThickness=2,this.openrate.bulletBorderAlpha=1,this.openrate.bulletSize=6,this.openrate.fillAlphas=0,this.openrate.valueAxis=a,this.openrate.bulletBorderColor=u.dataViz.combo1.color1,this.openrate.lineColor=u.dataViz.combo1.color1,this.openrate.balloonColor=u.dataViz.flyover.flagFill,this.chart.addGraph(this.openrate);var o=new AmCharts.ChartCursor;o.cursorAlpha=.2,o.cursorPosition="middle",o.bulletsEnabled=!0,o.bulletSize=6,o.cursorColor=u.dataViz.flyover.flagFill,o.oneBalloonOnly=!0,this.chart.addChartCursor(o),this.chart.write(this.elementId)}}),h.PerformanceOverviewChart=t([],{chartNoData:'<div class="c-noDataBlock text-align--center border-gray border-radius--lv2"><div class="c-noDataBlock_icon" style="background-image: url(/images/brand_assets/illos/art-empty-reports.png)"></div><h2 class="c-noDataBlock_title">We don’t have enough campaign performance data yet.</h2></div>',constructor:function(t,e,n,a){this.elementId=t,this.dataProviderUrl=e,this.customColors=n,this.hasIndustry=a;var s=this;d.get(this.dataProviderUrl,{handleAs:"json",content:""}).then((function(e){e&&e.length>0?s.renderData(e):(i.byId(t).innerHTML=s.chartNoData,o.set(i.byId(t),{height:"auto"}),l("#campaign-performance-legend").style("display","none"))}),(function(t){console.log("error: "+JSON.stringify(t))}))},renderData:function(t){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=t,this.chart.categoryField="bubbleText",this.chart.startDuration=0,this.chart.autoMargins=!1,this.chart.marginTop=10,this.chart.marginRight=0,this.chart.marginLeft=50,this.chart.balloon.showBullet=!1,this.chart.balloon.textShadowColor="none",this.chart.balloon.horizontalPadding=15,this.chart.balloon.verticalPadding=5,this.chart.balloon.borderThickness=0,this.chart.balloon.borderThickness=0,this.chart.balloon.shadowAlpha=0,this.chart.balloon.color="#FFFFFF",this.chart.balloon.fillAlpha=1,this.chart.balloon.adjustBorderColor=!1,this.chart.fontSize=14,this.chart.fontFamily="'Graphik Web',' Helvetica Neue', Arial, Helvetica, Verdana, sans-serif",this.chart.marginBottom=75,this.chart.color=u.brandColors.peppercorn.hex,this.chart.addListener("clickGraphItem",this.dataPointClickedEvt),this.hasIndustry&&(this.indavg=new AmCharts.AmGraph,this.indavg.title="Industry Average",this.indavg.valueField="industryAvg",this.indavg.type="line",this.indavg.dashLength=3,this.indavg.balloonText="[[value]]% Industry Avg",this.indavg.lineThickness=2,this.indavg.bullet="round",this.indavg.bulletSize=0,this.indavg.fillAlphas=0,this.indavg.lineColor=u.dataViz.combo1.color3,this.indavg.balloonColor=u.dataViz.flyover.flagFill,this.chart.addGraph(this.indavg)),this.clicks=new AmCharts.AmGraph,this.clicks.title="Click Rate",this.clicks.valueField="clickRate",this.clicks.type="smoothedLine",this.clicks.balloonText="[[value]]% Click Rate",this.clicks.bullet="round",this.clicks.bulletColor="#fff",this.clicks.bulletBorderThickness=2,this.clicks.bulletBorderAlpha=1,this.clicks.bulletSize=6,this.clicks.fillAlphas=.3,this.clicks.bulletBorderColor=u.dataViz.combo1.color2,this.clicks.lineColor=u.dataViz.combo1.color2,this.clicks.balloonColor=u.dataViz.flyover.flagFill,this.clicks.lineThickness=2,this.chart.addGraph(this.clicks),this.opens=new AmCharts.AmGraph,this.opens.title="Open Rate",this.opens.valueField="openRate",this.opens.type="smoothedLine",this.opens.balloonText="[[value]]% Open Rate",this.opens.lineThickness=2,this.opens.bullet="round",this.opens.bulletColor="#fff",this.opens.bulletBorderThickness=2,this.opens.bulletBorderAlpha=1,this.opens.bulletSize=6,this.opens.fillAlphas=0,this.opens.bulletBorderColor=u.dataViz.combo1.color1,this.opens.lineColor=u.dataViz.combo1.color1,this.opens.balloonColor=u.dataViz.flyover.flagFill,this.chart.addGraph(this.opens);var n=this.chart.categoryAxis;n.autoGridCount=!1,n.gridPosition="start",n.dashLength=0,n.axisThickness=2,n.gridAlpha=0,n.labelsEnabled=!1,n.axisColor=u.brandColors.peppercorn.hex;var a=new AmCharts.ValueAxis;a.dashLength=0,a.axisAlpha=0,a.unit="%",a.axisColor="",a.axisThickness=0,e.some(t,(function(t){return t&&100==t.openRate}))&&(a.maximum=100),this.chart.addValueAxis(a);var o=new AmCharts.ChartCursor;o.cursorAlpha=.2,o.cursorPosition="middle",o.bulletsEnabled=!0,o.bulletSize=6,o.cursorColor=u.dataViz.flyover.flagFill,o.oneBalloonOnly=!0,this.chart.addChartCursor(o),i.byId(this.elementId).innerHTML="",this.chart.write(this.elementId)},dataPointClickedEvt:function(t){var e="",n=t.graph.valueField;"clickRate"==n&&(e=t.item.dataContext.clickUrl,window.location=e),"openRate"==n&&(e=t.item.dataContext.openUrl,window.location=e)},cursorChangedEvt:function(t){var e,n,i=t.target.chart.dataProvider,o=i[t.index];void 0!==o&&void 0!==i&&(l("[data-campaignId]").forEach((function(t){e=t.parentElement.parentElement,a.contains(e,"google-visualization-table-tr-sel")&&a.remove(e,"google-visualization-table-tr-sel")})),void 0!==l("[data-campaignId="+o.campaignId+"]")[0]&&(n=l("[data-campaignId="+o.campaignId+"]")[0].parentElement.parentElement,a.add(n,"google-visualization-table-tr-sel")))}}),h.ReportsTimeseriesChart=t([],{noDataMessage:'<div class="highlighted-message">No Data Available</div>',constructor:function(t,e,n){this.elementId=t,this.dataProviderUrl=e,this.customColors=n,this.updateData()},renderData:function(t){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=t,this.chart.categoryField="time",this.chart.startDuration=0,this.chart.autoMargins=!1,this.chart.marginTop=25,this.chart.marginBottom=50,this.chart.marginLeft=50,this.chart.balloon.showBullet=!1,this.chart.balloon.textShadowColor="none",this.chart.balloon.horizontalPadding=15,this.chart.balloon.verticalPadding=5,this.chart.balloon.borderThickness=0,this.chart.balloon.borderThickness=0,this.chart.balloon.shadowAlpha=0,this.chart.balloon.color="#FFFFFF",this.chart.balloon.fillAlpha=1,this.chart.balloon.adjustBorderColor=!1,this.chart.fontSize=14,this.chart.fontFamily="'Graphik Web',' Helvetica Neue', Arial, Helvetica, Verdana, sans-serif",this.chart.color=u.brandColors.peppercorn.hex,this.opens=new AmCharts.AmGraph,this.opens.title="Opens",this.opens.valueField="opens",this.opens.type="line",this.opens.balloonText="[[value]] Opens",this.opens.bullet="round",this.opens.bulletSize=0,this.opens.fillAlphas=0,this.opens.lineColor=u.dataViz.combo1.color1,this.opens.balloonColor=u.dataViz.flyover.flagFill,this.opens.lineThickness=2,this.chart.addGraph(this.opens),this.clicks=new AmCharts.AmGraph,this.clicks.title="Clicks",this.clicks.valueField="clicks",this.clicks.type="line",this.clicks.balloonText="[[value]] Clicks",this.clicks.lineThickness=2,this.clicks.bullet="round",this.clicks.bulletSize=0,this.clicks.fillAlphas=0,this.clicks.lineColor=u.dataViz.combo1.color2,this.clicks.balloonColor=u.dataViz.flyover.flagFill,this.chart.addGraph(this.clicks);var e=this.chart.categoryAxis;e.autoGridCount=!1,e.gridPosition="start",e.dashLength=0,e.axisThickness=2,e.gridAlpha=0,e.axisColor=u.brandColors.peppercorn.hex;var n=new AmCharts.ValueAxis;n.dashLength=0,n.axisColor="",n.axisThickness=0,this.chart.addValueAxis(n);var i=new AmCharts.ChartCursor;i.cursorAlpha=.2,i.cursorPosition="middle",i.cursorColor=u.dataViz.flyover.flagFill,i.oneBalloonOnly=!0,this.chart.addChartCursor(i),this.chart.write(this.elementId)},updateData:function(){var t=this;d.get(this.dataProviderUrl,{handleAs:"json"}).then((function(e){e&&e.length>0?t.chart?(t.chart.dataProvider=e,t.chart.validateData()):t.renderData(e):i.byId(t.elementId).innerHTML=t.noDataMessage}),(function(t){console.log("error: "+JSON.stringify(t))}))}}),h.PageReportsTimeseriesChart=t([],{noDataMessage:'<div class="highlighted-message">No Data Available</div>',constructor:function(t,e,n){this.elementId=t,this.dataProviderUrl=e,this.customColors=n,this.updateData()},renderData:function(t){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=t,this.chart.categoryField="time",this.chart.startDuration=0,this.chart.autoMargins=!1,this.chart.marginTop=25,this.chart.marginBottom=50,this.chart.marginLeft=50,this.chart.balloon.showBullet=!1,this.chart.balloon.textShadowColor="none",this.chart.balloon.horizontalPadding=15,this.chart.balloon.verticalPadding=5,this.chart.balloon.borderThickness=0,this.chart.balloon.borderThickness=0,this.chart.balloon.shadowAlpha=0,this.chart.balloon.color="#FFFFFF",this.chart.balloon.fillAlpha=1,this.chart.balloon.adjustBorderColor=!1,this.chart.fontSize=14,this.chart.fontFamily="'Graphik Web',' Helvetica Neue', Arial, Helvetica, Verdana, sans-serif",this.chart.color=u.brandColors.peppercorn.hex,this.opens=new AmCharts.AmGraph,this.opens.title="Visits",this.opens.valueField="opens",this.opens.type="smoothedLine",this.opens.balloonText="[[value]] Visits",this.opens.bullet="round",this.opens.bulletColor="#fff",this.opens.bulletBorderThickness=2,this.opens.bulletBorderAlpha=1,this.opens.bulletSize=6,this.opens.fillAlphas=0,this.opens.lineColor=u.dataViz.combo1.color1,this.opens.balloonColor=u.dataViz.flyover.flagFill,this.opens.lineThickness=2,this.opens.bulletBorderColor=u.dataViz.combo1.color1,this.chart.addGraph(this.opens),this.clicks=new AmCharts.AmGraph,this.clicks.title="Clicks",this.clicks.valueField="clicks",this.clicks.type="smoothedLine",this.clicks.balloonText="[[value]] Clicks",this.clicks.bullet="round",this.clicks.bulletColor="#fff",this.clicks.bulletBorderThickness=2,this.clicks.bulletBorderAlpha=1,this.clicks.bulletSize=6,this.clicks.fillAlphas=0,this.clicks.lineColor=u.dataViz.combo1.color2,this.clicks.bulletBorderColor=u.dataViz.combo1.color2,this.clicks.balloonColor=u.dataViz.flyover.flagFill,this.clicks.lineThickness=2,this.chart.addGraph(this.clicks);var e=this.chart.categoryAxis;e.autoGridCount=!1,e.gridPosition="start",e.dashLength=0,e.axisThickness=2,e.gridAlpha=0,e.axisColor=u.brandColors.peppercorn.hex;var n=new AmCharts.ValueAxis;n.dashLength=0,n.axisColor="",n.axisThickness=0,this.chart.addValueAxis(n);var i=new AmCharts.ChartCursor;i.cursorAlpha=.2,i.cursorPosition="middle",i.cursorColor=u.dataViz.flyover.flagFill,i.oneBalloonOnly=!0,this.chart.addChartCursor(i),this.chart.write(this.elementId)},updateData:function(){var t=this;d.get(this.dataProviderUrl,{handleAs:"json"}).then((function(e){e&&e.length>0?t.chart?(t.chart.dataProvider=e,t.chart.validateData()):t.renderData(e):i.byId(t.elementId).innerHTML=t.noDataMessage}))}}),h.RevenueOverviewChart=t([],{chartNoData:'<div class="lastUnit size1of1 !padding--lv0"><div class="c-noDataBlock text-align--center border-gray border-radius--lv2"><div class="c-noDataBlock_icon" style="background-image: url(/images/brand_assets/illos/art-empty-default.png)"></div><h2 class="c-noDataBlock_title">We don’t have enough analytics data yet</h2></div></div>',constructor:function(t,e,n){this.elementId=t,this.dataProviderUrl=e,this.customColors=n;var a=this;d.get(this.dataProviderUrl,{query:"",handleAs:"json"}).then((function(e){e&&e.length>0?a.renderData(e):(i.byId(t).innerHTML=a.chartNoData,o.set(i.byId(t),{height:"auto"}))}),(function(t){console.log("error: "+JSON.stringify(t))}))},renderData:function(t){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=t,this.chart.categoryField="bubbleText",this.chart.startDuration=0,this.chart.autoMargins=!1,this.chart.marginTop=10,this.chart.marginRight=0,this.chart.marginLeft=50,this.chart.balloon.showBullet=!1,this.chart.balloon.textShadowColor="none",this.chart.balloon.horizontalPadding=15,this.chart.balloon.verticalPadding=5,this.chart.balloon.borderThickness=0,this.chart.balloon.borderThickness=0,this.chart.balloon.shadowAlpha=0,this.chart.balloon.color="#FFFFFF",this.chart.balloon.fillAlpha=1,this.chart.balloon.adjustBorderColor=!1,this.chart.fontSize=14,this.chart.fontFamily="'Graphik Web',' Helvetica Neue', Arial, Helvetica, Verdana, sans-serif",this.chart.marginBottom=75,this.chart.color=u.brandColors.peppercorn.hex,this.chart.addListener("clickGraphItem",this.dataPointClickedEvt),this.revenue=new AmCharts.AmGraph,this.revenue.title="Revenue",this.revenue.valueField="revenue",this.revenue.type="smoothedLine",this.revenue.showHandOnHover=!0,this.revenue.balloonText="Revenue of [[value]]",this.revenue.bullet="round",this.revenue.bulletColor="#fff",this.revenue.bulletBorderThickness=2,this.revenue.bulletBorderAlpha=1,this.revenue.bulletSize=8,this.revenue.fillAlphas=0,this.revenue.bulletBorderColor=u.dataViz.combo1.color1,this.revenue.lineColor=u.dataViz.combo1.color1,this.revenue.lineThickness=2,this.revenue.balloonColor=u.dataViz.flyover.flagFill,this.chart.addGraph(this.revenue);var e=this.chart.categoryAxis;e.autoGridCount=!1,e.gridPosition="start",e.dashLength=0,e.axisThickness=2,e.gridAlpha=0,e.labelsEnabled=!1,e.axisColor=u.brandColors.peppercorn.hex;var n=new AmCharts.ValueAxis;n.dashLength=0,n.axisAlpha=0,n.unitPosition="left",n.axisThickness=0,this.chart.addValueAxis(n);var a=new AmCharts.ChartCursor;a.cursorAlpha=.2,a.cursorPosition="middle",a.bulletsEnabled=!0,a.bulletSize=10,a.cursorColor=u.dataViz.flyover.flagFill,this.chart.addChartCursor(a),a.addListener("changed",this.cursorChangedEvt),this.chart.addListener("zoomed",this.chartZoomed),i.byId(this.elementId).innerHTML="",this.chart.write(this.elementId)},dataPointClickedEvt:function(t){var e="";"revenue"==t.graph.valueField&&(e=t.item.dataContext.openUrl,window.location=e)},chartZoomed:function(t){var e=t.chart.dataProvider,n=t.startIndex,i=t.endIndex,a=0;if(void 0!==e){for(var o=i;o>=n;o--)a+=e[o].revenue;l(".startDate")[0].innerHTML=e[n].sentDate,l(".endDate")[0].innerHTML=e[i].sentDate,l(".zoomRevenue")[0].innerHTML=a.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}}}),h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(176)],void 0===(a=function(t,e){var n=t.getObject("tag.logic",!0,e);e.text;return n.IfNode=t.extend((function(t,e,n,i){this.bools=t,this.trues=e,this.falses=n,this.type=i}),{render:function(t,e){var n,i,a,o;if("or"==this.type){for(n=0;i=this.bools[n];n++)if(a=i[0],(o=i[1].resolve(t))&&!a||a&&!o)return this.falses&&(e=this.falses.unrender(t,e)),this.trues?this.trues.render(t,e,this):e;return this.trues&&(e=this.trues.unrender(t,e)),this.falses?this.falses.render(t,e,this):e}for(n=0;i=this.bools[n];n++)if(a=i[0],(o=i[1].resolve(t))==a)return this.trues&&(e=this.trues.unrender(t,e)),this.falses?this.falses.render(t,e,this):e;return this.falses&&(e=this.falses.unrender(t,e)),this.trues?this.trues.render(t,e,this):e},unrender:function(t,e){return e=this.trues?this.trues.unrender(t,e):e,e=this.falses?this.falses.unrender(t,e):e},clone:function(t){var e=this.trues?this.trues.clone(t):null,n=this.falses?this.falses.clone(t):null;return new this.constructor(this.bools,e,n,this.type)}}),n.IfEqualNode=t.extend((function(t,n,i,a,o){this.var1=new e._Filter(t),this.var2=new e._Filter(n),this.trues=i,this.falses=a,this.negate=o}),{render:function(t,e){var n=this.var1.resolve(t),i=this.var2.resolve(t);return i=void 0!==(n=void 0!==n?n:"")?i:"",this.negate&&n!=i||!this.negate&&n==i?(this.falses&&(e=this.falses.unrender(t,e,this)),this.trues?this.trues.render(t,e,this):e):(this.trues&&(e=this.trues.unrender(t,e,this)),this.falses?this.falses.render(t,e,this):e)},unrender:function(t,e){return n.IfNode.prototype.unrender.call(this,t,e)},clone:function(t){var e=this.trues?this.trues.clone(t):null,n=this.falses?this.falses.clone(t):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),e,n,this.negate)}}),n.ForNode=t.extend((function(t,n,i,a){this.assign=t,this.loop=new e._Filter(n),this.reversed=i,this.nodelist=a,this.pool=[]}),{render:function(e,n){var i,a,o=!1,s=this.assign;for(a=0;a<s.length;a++)if(void 0!==e[s[a]]){o=!0,e=e.push();break}!o&&e.forloop&&(o=!0,e=e.push());var r=this.loop.resolve(e)||[],l=[];if(t.isObject(r)&&!t.isArrayLike(r))for(var d in r)l.push(r[d]);else l=r;for(i=l.length;i<this.pool.length;i++)this.pool[i].unrender(e,n,this);this.reversed&&(l=l.slice(0).reverse());var c=e.forloop={parentloop:e.get("forloop",{})},u=0;for(i=0;i<l.length;i++){var h=l[i];if(c.counter0=u,c.counter=u+1,c.revcounter0=l.length-u-1,c.revcounter=l.length-u,c.first=!u,c.last=u==l.length-1,s.length>1&&t.isArrayLike(h)){o||(o=!0,e=e.push());var p={};for(a=0;a<h.length&&a<s.length;a++)p[s[a]]=h[a];t.mixin(e,p)}else e[s[0]]=h;u+1>this.pool.length&&this.pool.push(this.nodelist.clone(n)),n=this.pool[u++].render(e,n,this)}if(delete e.forloop,o)e=e.pop();else for(a=0;a<s.length;a++)delete e[s[a]];return n},unrender:function(t,e){for(var n,i=0;n=this.pool[i];i++)e=n.unrender(t,e);return e},clone:function(t){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(t))}}),t.mixin(n,{if_:function(t,i){var a,o,s,r=[],l=i.contents.split();if(l.shift(),i=l.join(" "),1==(l=i.split(" and ")).length)s="or",l=i.split(" or ");else for(s="and",a=0;a<l.length;a++)if(-1!=l[a].indexOf(" or "))throw new Error("'if' tags can't mix 'and' and 'or'");for(a=0;o=l[a];a++){var d=!1;0==o.indexOf("not ")&&(o=o.slice(4),d=!0),r.push([d,new e._Filter(o)])}var c=t.parse(["else","endif"]),u=!1;return"else"==(i=t.next_token()).contents&&(u=t.parse(["endif"]),t.next_token()),new n.IfNode(r,c,u,s)},_ifequal:function(t,e,i){var a=e.split_contents();if(3!=a.length)throw new Error(a[0]+" takes two arguments");var o="end"+a[0],s=t.parse(["else",o]),r=!1;return"else"==(e=t.next_token()).contents&&(r=t.parse([o]),t.next_token()),new n.IfEqualNode(a[1],a[2],s,r,i)},ifequal:function(t,e){return n._ifequal(t,e)},ifnotequal:function(t,e){return n._ifequal(t,e,!0)},for_:function(t,e){var i=e.contents.split();if(i.length<4)throw new Error("'for' statements should have at least four words: "+e.contents);var a="reversed"==i[i.length-1],o=a?-3:-2;if("in"!=i[i.length+o])throw new Error("'for' tag received an invalid argument: "+e.contents);for(var s=i.slice(1,o).join(" ").split(/ *, */),r=0;r<s.length;r++)if(!s[r]||-1!=s[r].indexOf(" "))throw new Error("'for' tag received an invalid argument: "+e.contents);var l=t.parse(["endfor"]);return t.next_token(),new n.ForNode(s,i[i.length+o+1],a,l)}}),n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(91),n(2124)],void 0===(a=function(t,e,n){return t("mojo.neapolitan.renderers.ButtonBlock",[e],{outputTplStr:n,getOutputModel:function(t){return{totalPadding:2*this.outerPadding,buttonText:t.buttonText,align:t.align,buttonWidth:t.buttonWidth,target:t.link&&t.link.attrs.target?t.link.attrs.target:"_blank",href:t.link?t.link.href:"#",linkClasses:t.link?t.link.attrs.class:"",title:t.link&&t.link.attrs.title?t.link.attrs.title:t.buttonText}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(10),n(3),n(71),n(2),n(19),n(53),n(119),n(289),n(32)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return e("dojo.dnd.Moveable",[o],{handle:"",delay:0,skip:!1,constructor:function(t,e){this.node=i.byId(t),e||(e={}),this.handle=e.handle?i.byId(e.handle):null,this.handle||(this.handle=this.node),this.delay=e.delay>0?e.delay:0,this.skip=e.skip,this.mover=e.mover?e.mover:c,this.events=[s(this.handle,l.press,n.hitch(this,"onMouseDown")),s(this.handle,"dragstart",n.hitch(this,"onSelectStart")),s(this.handle,"selectstart",n.hitch(this,"onSelectStart"))]},markupFactory:function(t,e,n){return new n(e,t)},destroy:function(){t.forEach(this.events,(function(t){t.remove()})),this.events=this.node=this.handle=null},onMouseDown:function(t){this.skip&&d.isFormElement(t)||(this.delay?(this.events.push(s(this.handle,l.move,n.hitch(this,"onMouseMove")),s(this.handle,l.release,n.hitch(this,"onMouseUp"))),this._lastX=t.pageX,this._lastY=t.pageY):this.onDragDetected(t),t.stopPropagation(),t.preventDefault())},onMouseMove:function(t){(Math.abs(t.pageX-this._lastX)>this.delay||Math.abs(t.pageY-this._lastY)>this.delay)&&(this.onMouseUp(t),this.onDragDetected(t)),t.stopPropagation(),t.preventDefault()},onMouseUp:function(t){for(var e=0;e<2;++e)this.events.pop().remove();t.stopPropagation(),t.preventDefault()},onSelectStart:function(t){this.skip&&d.isFormElement(t)||(t.stopPropagation(),t.preventDefault())},onDragDetected:function(t){new this.mover(this.node,t,this)},onMoveStart:function(t){r.publish("/dnd/move/start",t),a.add(u.body(),"dojoMove"),a.add(this.node,"dojoMoveItem")},onMoveStop:function(t){r.publish("/dnd/move/stop",t),a.remove(u.body(),"dojoMove"),a.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(t,e){this.onMoving(t,e);var n=t.node.style;n.left=e.l+"px",n.top=e.t+"px",this.onMoved(t,e)},onMoving:function(){},onMoved:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23)],void 0===(a=function(t){var e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),n=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),i=function(){for(var t=null,a=arguments,o=[a[0]],s=1;s<a.length;s++)if(a[s]){var r=new i(a[s]+""),l=new i(o[0]+"");if(""!=r.path||r.scheme||r.authority||r.query){if(!r.scheme&&(r.scheme=l.scheme,!r.authority&&(r.authority=l.authority,"/"!=r.path.charAt(0)))){for(var d=l.path.substring(0,l.path.lastIndexOf("/")+1)+r.path,c=d.split("/"),u=0;u<c.length;u++)"."==c[u]?u==c.length-1?c[u]="":(c.splice(u,1),u--):u>0&&(1!=u||""!=c[0])&&".."==c[u]&&".."!=c[u-1]&&(u==c.length-1?(c.splice(u,1),c[u-1]=""):(c.splice(u-1,2),u-=2));r.path=c.join("/")}}else r.fragment!=t&&(l.fragment=r.fragment),r=l;o=[],r.scheme&&o.push(r.scheme,":"),r.authority&&o.push("//",r.authority),o.push(r.path),r.query&&o.push("?",r.query),r.fragment&&o.push("#",r.fragment)}this.uri=o.join("");var h=this.uri.match(e);this.scheme=h[2]||(h[1]?"":t),this.authority=h[4]||(h[3]?"":t),this.path=h[5],this.query=h[7]||(h[6]?"":t),this.fragment=h[9]||(h[8]?"":t),this.authority!=t&&(h=this.authority.match(n),this.user=h[3]||t,this.password=h[4]||t,this.host=h[6]||h[7],this.port=h[9]||t)};return i.prototype.toString=function(){return this.uri},t._Url=i}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/_base/json")},function(t,e){t.exports=window.require("dojo/request/watch")},function(t,e,n){var i,a;i=[n(23),n(160)],void 0===(a=function(t,e){return t.cookie=function(t,n,i){var a,o=document.cookie;if(1==arguments.length){var s=o.match(new RegExp("(?:^|; )"+e.escapeString(t)+"=([^;]*)"));a=s?decodeURIComponent(s[1]):void 0}else{var r=(i=i||{}).expires;if("number"==typeof r){var l=new Date;l.setTime(l.getTime()+24*r*60*60*1e3),r=i.expires=l}r&&r.toUTCString&&(i.expires=r.toUTCString());var d,c=t+"="+(n=encodeURIComponent(n));for(d in i){c+="; "+d;var u=i[d];!0!==u&&(c+="="+u)}document.cookie=c}return a},t.cookie.isSupported=function(){return"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})),navigator.cookieEnabled},t.cookie}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(112)],void 0===(a=function(t,e,n){return t("dojo.dnd.Target",n,{constructor:function(){this.isSource=!1,e.remove(this.node,"dojoDndSource")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(61),n(1),n(2),n(33),n(42)],void 0===(a=function(t,e,n,i,a,o){var s=o.typematic={_fireEventAndReload:function(){this._timer=null,this._callback(++this._count,this._node,this._evt),this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay),this._timer=setTimeout(n.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(t,e,i,a,o,s,r,l){if(o!=this._obj){for(var d in this.stop(),this._initialDelay=r||500,this._subsequentDelay=s||.9,this._minDelay=l||10,this._obj=o,this._node=i,this._currentTimeout=-1,this._count=-1,this._callback=n.hitch(e,a),this._evt={faux:!0},t)if("layerX"!=d&&"layerY"!=d){var c=t[d];"function"!=typeof c&&void 0!==c&&(this._evt[d]=c)}this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(a,o,r,l,d,c,u){var h="keyCode"in o?"keydown":"charCode"in o?"keypress":e._keypress,p="keyCode"in o?"keyCode":"charCode"in o?"charCode":"charOrCode",m=[i(a,h,n.hitch(this,(function(t){t[p]!=o[p]||void 0!==o.ctrlKey&&o.ctrlKey!=t.ctrlKey||void 0!==o.altKey&&o.altKey!=t.altKey||void 0!==o.metaKey&&o.metaKey!=(t.metaKey||!1)||void 0!==o.shiftKey&&o.shiftKey!=t.shiftKey?s._obj==o&&s.stop():(t.stopPropagation(),t.preventDefault(),s.trigger(t,r,a,l,o,d,c,u))}))),i(a,"keyup",n.hitch(this,(function(){s._obj==o&&s.stop()})))];return{remove:function(){t.forEach(m,(function(t){t.remove()}))}}},addMouseListener:function(e,o,r,l,d,c){var u=[i(e,"mousedown",n.hitch(this,(function(t){t.preventDefault(),s.trigger(t,o,e,r,e,l,d,c)}))),i(e,"mouseup",n.hitch(this,(function(t){this._obj&&t.preventDefault(),s.stop()}))),i(e,"mouseout",n.hitch(this,(function(t){this._obj&&t.preventDefault(),s.stop()}))),i(e,"dblclick",n.hitch(this,(function(t){t.preventDefault(),a("ie")<9&&(s.trigger(t,o,e,r,e,l,d,c),setTimeout(n.hitch(this,s.stop),50))})))];return{remove:function(){t.forEach(u,(function(t){t.remove()}))}}},addListener:function(e,n,i,a,o,s,r,l){var d=[this.addKeyListener(n,i,a,o,s,r,l),this.addMouseListener(e,a,o,s,r,l)];return{remove:function(){t.forEach(d,(function(t){t.remove()}))}}}};return s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(35),n(0)],void 0===(a=function(t,e,n){return n("dijit.Destroyable",null,{destroy:function(t){this._destroyed=!0},own:function(){var n=["destroyRecursive","destroy","remove"];return t.forEach(arguments,(function(i){var a,o=e.before(this,"destroy",(function(t){i[a](t)})),s=[];function r(){o.remove(),t.forEach(s,(function(t){t.remove()}))}i.then?(a="cancel",i.then(r,r)):t.forEach(n,(function(t){"function"==typeof i[t]&&(a||(a=t),s.push(e.after(i,t,r,!0)))}))}),this),arguments}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(14)],void 0===(a=function(t,e){return t("dijit._Contained",null,{_getSibling:function(t){var n=this.domNode;do{n=n[t+"Sibling"]}while(n&&1!=n.nodeType);return n&&e.byNode(n)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var t=this.getParent();return t&&t.getIndexOfChild?t.getIndexOfChild(this):-1}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(23),n(126),n(430)],void 0===(a=function(t,e,n,i){return t("dijit.form.ToggleButton",[n,i],{baseClass:"dijitToggleButton",setChecked:function(t){e.deprecated("setChecked("+t+") is deprecated. Use set('checked',"+t+") instead.","","2.0"),this.set("checked",t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(33),n(32),n(10),n(27),n(9),n(71),n(2),n(53),n(119),n(331)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return e("dojo.dnd.Mover",[l],{constructor:function(t,e,i){this.node=o.byId(t),this.marginBox={l:e.pageX,t:e.pageY},this.mouseButton=e.button;var a=this.host=i,s=t.ownerDocument;function r(t){t.preventDefault(),t.stopPropagation()}this.events=[d(s,c.move,n.hitch(this,"onFirstMove")),d(s,c.move,n.hitch(this,"onMouseMove")),d(s,c.release,n.hitch(this,"onMouseUp")),d(s,"dragstart",r),d(s.body,"selectstart",r)],h.autoScrollStart(s),a&&a.onMoveStart&&a.onMoveStart(this)},onMouseMove:function(t){h.autoScroll(t);var e=this.marginBox;this.host.onMove(this,{l:e.l+t.pageX,t:e.t+t.pageY},t),t.preventDefault(),t.stopPropagation()},onMouseUp:function(t){(i("webkit")&&i("mac")&&2==this.mouseButton?0==t.button:this.mouseButton==t.button)&&this.destroy(),t.preventDefault(),t.stopPropagation()},onFirstMove:function(t){var e,n,i=this.node.style,o=this.host;switch(i.position){case"relative":case"absolute":e=Math.round(parseFloat(i.left))||0,n=Math.round(parseFloat(i.top))||0;break;default:i.position="absolute";var l=s.getMarginBox(this.node),d=a.doc.body,c=r.getComputedStyle(d),u=s.getMarginBox(d,c),h=s.getContentBox(d,c);e=l.l-(h.l-u.l),n=l.t-(h.t-u.t)}this.marginBox.l=e-this.marginBox.l,this.marginBox.t=n-this.marginBox.t,o&&o.onFirstMove&&o.onFirstMove(this,t),this.events.shift().remove()},destroy:function(){t.forEach(this.events,(function(t){t.remove()}));var e=this.host;e&&e.onMoveStop&&e.onMoveStop(this),this.events=this.node=this.host=null}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports={invalidMessage:"The value entered is not valid.",missingMessage:"This value is required.",rangeMessage:"This value is out of range."}},function(t,e,n){var i,a;i=[n(0),n(180),n(1105)],void 0===(a=function(t,e,n){return t("dijit.form.RadioButton",[e,n],{baseClass:"dijitRadio"})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(10),n(34),n(30),n(1),n(2),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r){var l=e("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(t,e,n){var i;void 0!==t&&(i=this.filter(t),"string"!=typeof n&&(n=null===i||"number"==typeof i&&isNaN(i)?"":this.filter(this.format(i,this.constraints)),0!=this.compare(i,this.filter(this.parse(n,this.constraints)))&&(n=null))),null==n||"number"==typeof n&&isNaN(n)||this.textbox.value==n||(this.textbox.value=n,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[i,e])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(t){null==t?t="":"string"!=typeof t&&(t=String(t)),this.textbox.value=t,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(t){return null==t?"":t.toString?t.toString():t},parse:function(t){return t},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(t){this._processInput(t),this.intermediateChanges&&this.defer((function(){this._handleOnChange(this.get("value"),!1)}))},_processInput:function(t){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){function t(t){var e;if("keydown"==t.type){switch(e=t.keyCode){case a.SHIFT:case a.ALT:case a.CTRL:case a.META:case a.CAPS_LOCK:case a.NUM_LOCK:case a.SCROLL_LOCK:return}if(!t.ctrlKey&&!t.metaKey&&!t.altKey){switch(e){case a.NUMPAD_0:case a.NUMPAD_1:case a.NUMPAD_2:case a.NUMPAD_3:case a.NUMPAD_4:case a.NUMPAD_5:case a.NUMPAD_6:case a.NUMPAD_7:case a.NUMPAD_8:case a.NUMPAD_9:case a.NUMPAD_MULTIPLY:case a.NUMPAD_PLUS:case a.NUMPAD_ENTER:case a.NUMPAD_MINUS:case a.NUMPAD_PERIOD:case a.NUMPAD_DIVIDE:return}if(e>=65&&e<=90||e>=48&&e<=57||e==a.SPACE)return;var n=!1;for(var i in a)if(a[i]===t.keyCode){n=!0;break}if(!n)return}}if((e=t.charCode>=32?String.fromCharCode(t.charCode):t.charCode)||(e=t.keyCode>=65&&t.keyCode<=90||t.keyCode>=48&&t.keyCode<=57||t.keyCode==a.SPACE?String.fromCharCode(t.keyCode):t.keyCode),e||(e=229),"keypress"==t.type){if("string"!=typeof e)return;if((e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||" "===e)&&(t.ctrlKey||t.metaKey||t.altKey))return}if("input"==t.type){if(this.__skipInputEvent)return void(this.__skipInputEvent=!1)}else this.__skipInputEvent=!0;var s,r={faux:!0};for(s in t)if(!/^(layer[XY]|returnValue|keyLocation)$/.test(s)){var l=t[s];"function"!=typeof l&&void 0!==l&&(r[s]=l)}o.mixin(r,{charOrCode:e,_wasConsumed:!1,preventDefault:function(){r._wasConsumed=!0,t.preventDefault()},stopPropagation:function(){t.stopPropagation()}}),!1===this.onInput(r)&&(r.preventDefault(),r.stopPropagation()),r._wasConsumed||this.defer((function(){this._onInput(r)}))}this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(s(this.textbox,"keydown, keypress, paste, cut, input, compositionend",o.hitch(this,t)),s(this.domNode,"keypress",(function(t){t.stopPropagation()})))},_blankValue:"",filter:function(t){return null===t?this._blankValue:("string"!=typeof t||(this.trim&&(t=o.trim(t)),this.uppercase&&(t=t.toUpperCase()),this.lowercase&&(t=t.toLowerCase()),this.propercase&&(t=t.replace(/[^\s]+/g,(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})))),t)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(t){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(t){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==t&&(this._selectOnClickHandle=s.once(this.domNode,"mouseup, touchend",o.hitch(this,(function(t){this._isTextSelected()||l.selectInputText(this.textbox)}))),this.own(this._selectOnClickHandle),this.defer((function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)}),500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return l._setSelectionRange=r._setSelectionRange=function(t,e,n){t.setSelectionRange&&t.setSelectionRange(e,n)},l.selectInputText=r.selectInputText=function(t,e,i){t=n.byId(t),isNaN(e)&&(e=0),isNaN(i)&&(i=t.value?t.value.length:0);try{t.focus(),l._setSelectionRange(t,e,i)}catch(t){}},l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(154),n(155),n(90)],void 0===(a=function(t,e,n){return function(i,a){var o={};return a=n(a,3),e(i,(function(e,n,i){t(o,n,a(e,n,i))})),o}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return function(e,n,i){for(var a=-1,o=Object(e),s=i(e),r=s.length;r--;){var l=s[t?r:++a];if(!1===n(o[l],l,o))break}return e}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(183),n(354)],void 0===(a=function(t,e){var n=Object.prototype.hasOwnProperty;return function(i){if(!t(i))return e(i);var a=[];for(var o in Object(i))n.call(i,o)&&"constructor"!=o&&a.push(o);return a}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(64)],void 0===(a=function(t){return t.Uint8Array}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(299),n(250),n(88)],void 0===(a=function(t,e,n){return function(i){return t(i,n,e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(218),n(50)],void 0===(a=function(t,e){return function(n,i,a){var o=i(n);return e(n)?o:t(o,a(n))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(131),n(156),n(50),n(167),n(169),n(103)],void 0===(a=function(t,e,n,i,a,o){return function(s,r,l){for(var d=-1,c=(r=t(r,s)).length,u=!1;++d<c;){var h=o(r[d]);if(!(u=null!=s&&l(s,h)))break;s=s[h]}return u||++d!=c?u:!!(c=null==s?0:s.length)&&a(c)&&i(h,c)&&(n(s)||e(s))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return{toEnglishEnumeration:function(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" and ");default:return t.slice(0,-2).join(", ")+(t.slice(0,-2).length?", ":"")+t.slice(-2).join(", and ")}}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(158),n(222),n(133)],void 0===(a=function(t,e,n){return e((function(e,i,a,o){t(i,n(i),e,o)}))}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(154),n(120)],void 0===(a=function(t,e){var n=Object.prototype.hasOwnProperty;return function(i,a,o){var s=i[a];n.call(i,a)&&e(s,o)&&(void 0!==o||a in i)||t(i,a,o)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(248)],void 0===(a=function(t){return t(Object.getPrototypeOf,Object)}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(77),n(132)],void 0===(a=function(t,e){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;return function(r){if("number"==typeof r)return r;if(e(r))return NaN;if(t(r)){var l="function"==typeof r.valueOf?r.valueOf():r;r=t(l)?l+"":l}if("string"!=typeof r)return 0===r?r:+r;r=r.replace(n,"");var d=a.test(r);return d||o.test(r)?s(r.slice(2),d?2:8):i.test(r)?NaN:+r}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(2),n(30),n(4),n(3),n(27),n(9),n(7),n(62),n(12),n(11),n(20),n(76),n(41),n(1162),n(1163),n(38),n(718)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y){var w=t([y,h,m],{templateString:f,value:"",dataListId:null,postCreate:function(){this.dataListId&&d.set(this.textInput,"list",this.dataListId),this.own(i(this.removeBtn,"click",n.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.destroy()}))),i(this.textInput,"keyup",n.hitch(this,(function(){this.setValue(this.textInput.value)})))),this.on("dblclick",n.hitch(this,"_onDblClick")),this.setValue(this.value),this.viewMode(),this.domNode.setAttribute("tabIndex","-1")},setValue:function(t){this.inherited(arguments),this.tagLabel.innerHTML=b.encode(t),this._adjustTextInput()},viewMode:function(){s.add(this.domNode,"view-mode"),s.remove(this.domNode,"edit-mode"),this.focused&&s.add(this.domNode,"active"),this._updateValue(),this.textInput.blur(),this.inherited(arguments)},editMode:function(){s.remove(this.domNode,"view-mode"),s.add(this.domNode,"edit-mode"),this._adjustTextInput(),c.focus(this.textInput),s.remove(this.domNode,"active"),this.inherited(arguments)},_updateValue:function(){this.tagLabel.innerHTML=b.encode(this.getValue()),this._adjustTextInput()},_adjustTextInput:function(){var t=r.position(this.tagLabel).w+50;l.set(this.textInput,"width",t+"px")},_onFocus:function(){s.toggle(this.domNode,"active",this.inViewMode()),this.inherited(arguments)},_onBlur:function(){s.remove(this.domNode,"active"),this.viewMode(),this.inherited(arguments)},_onDblClick:function(){this.inViewMode()&&(this.editMode(),this.textInput.select())}});return t([u,h,p],{templateString:v,TagModel:w,values:[],operator:null,tags:null,focusedTag:null,operatorOptions:null,validValues:null,constructor:function(){this.tags=[]},_addDataList:function(){this.dataListDom||(this.dataListDom=o.create("datalist",{id:this._getDataListId()}),o.place(this.dataListDom,document.body),e.forEach(this.validValues,n.hitch(this,(function(t){var e=o.create("option",{value:t});o.place(e,this.dataListDom)}))))},hasDataList:function(){return!!this.dataListDom},postCreate:function(){this.validValues&&this._addDataList(),e.forEach(this.values,n.hitch(this,(function(t){n.isString(t)?this._addTag(t):this._addTag(t.value,t.label)}))),this.operatorOptions?(s.add(this.domNode,"c-tagInput--dropdown"),this.opSelect=new g({class:"!margin--lv0",value:this.operator,options:this.operatorOptions}),this.opSelect.startup(),this.opSelect.placeAt(this.operatorDom),this.own(i(this.opSelect,"change",n.hitch(this,(function(){this.operator=this.opSelect.value})))),this.operator=this.opSelect.value):s.add(this.operatorDom,"hide"),this.own(c.watch("curNode",n.hitch(this,(function(t,e,n){n!==this.domNode&&n!==this.tagInputDom||this._addTag().editMode()}))),i(this.domNode,"keydown",n.hitch(this,(function(t){switch(t.charCode||t.keyCode){case a.ENTER:this._onEnterKey(t);break;case a.TAB:this._onTabKey(t);break;case a.BACKSPACE:this._onBackspace(t);break;case a.DELETE:this._onDeleteKey(t);break;case a.LEFT_ARROW:this._onLeftArrow(t);break;case a.RIGHT_ARROW:this._onRightArrow(t)}})))),this.domNode.setAttribute("tabIndex","0")},_onEnterKey:function(t){this.focusedTag&&this.focusedTag.onEnter()||this.moveToNewTag(),t.preventDefault()},moveToNewTag:function(){this.focusedTag&&this.focusedTag.inEditMode()&&(this.focusedTag.viewMode(),null===this._getNextTag()&&this._addTag().editMode())},_onTabKey:function(t){if(this.focusedTag)if(t.shiftKey){var e=this._getPrevTag();e&&(t.stopPropagation(),t.preventDefault(),e.focus())}else if(this.focusedTag===this._lastTag()){if(!this.focusedTag.isBlank())t.stopPropagation(),t.preventDefault(),this._addTag().editMode()}else{var n=this._getNextTag();n&&(t.stopPropagation(),t.preventDefault(),n.focus())}},_onBackspace:function(t){if(this.focusedTag)if(this.focusedTag.inViewMode())t.stopPropagation(),t.preventDefault(),this.focusedTag.clear(),this.focusedTag.editMode();else if(this.focusedTag.isBlank()){t.stopPropagation(),t.preventDefault();var e=this._getPrevTag();e&&(this.focusedTag.destroy(),e.focus())}},_onDeleteKey:function(t){if(this.focusedTag)if(this.focusedTag.inViewMode())t.stopPropagation(),t.preventDefault(),this.focusedTag.clear(),this.focusedTag.editMode();else if(this.focusedTag.isBlank()){t.stopPropagation(),t.preventDefault();var e=this._getNextTag();e&&(this.focusedTag.destroy(),e.focus())}},_onLeftArrow:function(t){if(this.focusedTag&&(this.focusedTag.inViewMode()||this.focusedTag.inEditMode()&&this.focusedTag.isBlank())){var e=this._getPrevTag();e&&(t.stopPropagation(),t.preventDefault(),e.focus())}},_onRightArrow:function(t){if(this.focusedTag&&this.focusedTag.inViewMode()){var e=this._getNextTag();if(e)t.stopPropagation(),t.preventDefault(),e.focus();else this._addTag().editMode()}},getValues:function(){return e.map(this.tags,(function(t){return t.getValue()}))},_getDataListId:function(){return this.id+"-data-list"},_addTag:function(t,e){t||(t="");var i={value:t,label:e,tagList:this};this.hasDataList()&&(i.dataListId=this._getDataListId());var a=new(0,this.TagModel)(i);return a.startup(),this.tags.push(a),o.place(a.domNode,this.containerNode),a.on("destroy",n.hitch(this,(function(){this._removeTag(a)}))),a.watch("mode",n.hitch(this,(function(){a.inViewMode()&&a.isBlank()&&a.destroy()}))),a.on("focus",n.hitch(this,(function(){this.focusedTag=a}))),a.on("blur",n.hitch(this,(function(){this.focusedTag=null}))),a},_getTags:function(){return this.tags},_removeTag:function(t){var e=this.tags.indexOf(t);e>=0&&this.tags.splice(e,1)},_getNextTag:function(){if(this.focusedTag){var t=this.tags.indexOf(this.focusedTag)+1;return t<this.tags.length&&this.tags[t]?this.tags[t]:null}return null},_getPrevTag:function(){if(this.focusedTag){var t=this.tags.indexOf(this.focusedTag);return(t-=1)>=0&&this.tags[t]?this.tags[t]:null}return null},_lastTag:function(){return this.tags.length?this.tags[this.tags.length-1]:null}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(1),n(4),n(37),n(31),n(14),n(8)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([e],{path:null,emailId:null,postCreate:function(){this.inherited(arguments),this.getView().then(n.hitch(this,(function(t){i.place(t,this.domNode),a.parse(this.domNode),this.onLoad()})))},onLoad:function(){},destroy:function(){widgets=s.findWidgets(this.domNode),widgets.forEach((function(t){t.destroyRecursive()})),this.inherited(arguments)},getView:function(){return o.get(r.toUrl(this.path),{handleAs:"text",query:{emailId:this.emailId}})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(23),n(1),n(7),n(4),n(9),n(3),n(10),n(45),n(2),n(37),n(6),n(18),n(60),n(14),n(29),n(12),n(1185),n(563),n(450),n(16),n(26),n(8),n(17),n(15),n(95),n(1187),n(564)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A){return e("mojo.widgets.ContactBillingModal",[v,b,y],{step:"contact",workflowMode:!1,callbackURI:null,launchStep:"",guid:null,modal:null,currency:null,activeCardProcessor:null,chaseEventHandlers:null,adyenCardEventHandlers:null,destroyOnClose:!1,onSuccessRedirect:null,resetFeedbackBlock:function(){var t=g.byId("errorFeedback");t&&t.destroy()},postCreate:function(){var e,i=this,s=[],v={},b=!1,y=!1,j=!1,E={},P={},D="dirty",N="";c(this.domNode,"click",function(){this.modal.show()}.bind(this));var L=function(t,e){var n=T.getPaymentFormProvider(t,P);if(i.activeCardProcessor!==n||e){var a=i.activeCardProcessor;i.activeCardProcessor=n,"dlocal"===i.activeCardProcessor&&i.updateDlocalCardProps(i.currency),null===i.activeCardProcessor&&(i.activeCardProcessor="default"),h('[data-mc-el="card_processor_input"]')[0].value=i.activeCardProcessor,function(t,e){E[t]&&r.add(E[t],"display--none"),E[e]&&r.remove(E[e],"display--none")}(a,n)}},M=function(t){var e,n;if(L(i.currency,t),l.byId("payment-adyen")&&r.add("payment-adyen","hide"),h("input[name='payment-method']").forEach((function(t){var e=l.byId(a.get(t,"data-show-el"));e&&(t.checked?r.remove(e,"hide"):r.add(e,"hide"))})),l.byId("payment-credit-card")&&!r.contains(l.byId("payment-credit-card"),"hide")&&(e="true"===h('[data-mc-el="cc_prod"]')[0].value,n=h('[data-mc-el="cc_origin_key"]')[0].value,i.initializeAdyenCardPayments(e,n,l.byId("payment-credit-card"),i.adyenCardEventHandlers,!0)),!t){var o=h("#payment-details").closest(".dijitDialogPaneContent")[0];o.scrollTop=o.scrollHeight}},B=function(t){l.byId("billing-info-error").innerHTML=t,h("#billing-info-error").closest(".error").forEach((function(t){r.remove(t,"hide")}))},R=function(e){if(!0===e){var n=h(".modal-content");t.forEach(n,(function(t){r.add(t,"js-hide")})),r.remove(l.byId("loadingState"),"js-hide")}else r.add(l.byId("loadingState"),"js-hide")},F=function(t,e){i.resetFeedbackBlock(),h(".invalid-error").forEach((function(t){n.destroy(t)}));var a=new I({message:t.error_msg,type:"error",id:"errorFeedback"});if(a.placeAt(l.byId("errorDiv"),"only"),r.remove(l.byId(v[e].contentId),"js-hide"),t.errors&&"string"!=typeof t.errors)for(var s in t.errors)if(s){var d=l.byId(s);"contact"!==i.step&&"billing"!==i.step||(d=l.byId(i.step+"-"+s)),d&&(r.add(d,"invalid"),o.place("<span class='invalid-error !margin-top--lv0'>"+t.errors[s]+"</span>",d,"after"),d.focus())}R(!1);try{a.domNode.scrollIntoView()}catch(t){}},O=function(n){var a=h(".modal-content"),o=v[n];i.resetFeedbackBlock(),t.forEach(a,(function(t){r.add(t,"js-hide")})),o.title&&i.modal.set("title",o.title),o.buttonTitle&&(l.byId("modal-save-button").innerText=o.buttonTitle),o.workflowHideFieldID&&!i.workflowMode&&r.add(l.byId(o.workflowHideFieldID),"js-hide"),i.modal.addressAttempts>=3&&(r.remove(l.byId("contactSupportMessaging"),"js-hide"),r.add(l.byId("sorryMessage"),"js-hide")),r.remove(l.byId(o.contentId),"js-hide"),e&&e.remove();var s=m(function(){o.saveFunctionality()}.bind(i),500);e=c(l.byId("modal-save-button"),"click",s),o.loadFunctionality&&o.loadFunctionality(),window.innerWidth<600&&(C.info("new-billing-modal","Mobile_Div_Shown",{guid:i.guid,launch_step:i.launchStep,message:"Mobile_Div_Shown"}),r.remove(l.byId("mobileSpacer"),"js-hide"))},U=function(){r.add(l.byId("validateContactAddressMessage"),"js-hide"),p.get(k.toUrl("/account/get-workflow-modal-step"),{handleAs:"json"}).then((function(t){O(t.step),"contact"===t.step&&r.remove(l.byId("validateContactAddressMessage"),"js-hide")}))},$=function(){c(l.byId("editContactSummaryAnchor"),"click",(function(){O("contact")})),c(l.byId("editBillingSummaryAnchor"),"click",(function(){O("billing")}))},H=function(){O("payment")},V=function(){if(h('[data-mc-el="creditCardDetails"]')[0]&&p.get(k.toUrl("account/chase-gateway/card-details"),{handleAs:"json"}).then((function(t){h('[data-mc-el="creditCardDetails"]')[0].innerHTML=t.html})),h('[data-mc-el="billingPlanSidebar"]')[0])try{window._mc.calculatePurchase()}catch(t){C.info("new-billing-modal","Error_Refreshing_Sidebar",{guid:i.guid,launch_step:i.launchStep,message:"Error_Refreshing_Sidebar",error:t})}else if(l.byId("current-payment-info")&&!i.onClose)p.get(k.toUrl("account/get-payment-info"),{handleAs:"json"}).then((function(t){l.byId("current-payment-info").innerHTML=t.html,u.parse(l.byId("current-payment-info"))}));else if(l.byId("current-billing-info")&&!i.onClose)p.get(k.toUrl("account/get-payment-info"),{handleAs:"json"}).then((function(t){l.byId("current-billing-info").innerHTML=t.html,u.parse(l.byId("current-billing-info"))}));else if(i.onClose)return i.onClose()};i.modal=new f({style:"width:750px; height: 500px",onHide:function(){(S.flagIsOn(_.CONTACT_BILLING_MODAL_DESTROY_DESCENDANTS)||i.destroyOnClose)&&i.modal.destroyDescendants(!1),C.info("new-billing-modal","Modal_Closed",{guid:i.guid,launch_step:i.launchStep,close_Step:N,message:"Modal_Closed"}),(y||b||j)&&(i.callbackURI?"reload"===i.callbackURI?location.reload():window.location.replace(k.toUrl(i.callbackURI)):"payment"===i.launchStep?V():i.onClose&&i.onClose()),i.chaseEventHandlers&&i.chaseEventHandlers.clear()},onDownloadEnd:function(){i.modal.addressAttempts=0,i.launchStep=i.step,i.close_Step=i.launchStep,i.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}();var e,o,s=n.dijit.byId("currencySelect");s&&(i.currency=s.get("value"),s.on("change",(function(){var t;(t=this.get("value"))!==i.currency&&(i.currency=t,D="dirty",h('[data-mc-el="creditCardDetails"]')[0].innerHTML='<p class="small-meta !margin--lv0">No card on file</p>',L(t))}))),!0===i.workflowMode?U():null!==i.step?O(i.step):O("contact"),null===i.workflowMode&&(i.workflowMode=!1),!0!==i.workflowMode&&r.add(l.byId("validateContactAddressMessage"),"js-hide"),e=function(){F({error_msg:"Sorry...something went wrong with your payment method. Please try again."},"credit-card")},o=function(){D="dirty"},i.chaseEventHandlers={init:function(){},start:function(){},finish:function(t,n){0===t?(R(!0),p.post(k.toUrl("/account/chase-gateway/complete"),{data:{uID:n,currency:i.currency},handleAs:"json"}).then((function(t){D="dirty",j=!0,R(!1),i.clearAppShellWarningBanner(t),"function"==typeof i.onSuccessRedirect&&i.onSuccessRedirect()||(V(),i.modal.hide())}),(function(t){o(),H(),e()}))):(o(),H(),e())},error:function(t,e,n){var a=i.formatChaseError(t,e,n);F({error_msg:a.join("<br/>")},"credit-card")},cancel:function(){o(),H()},clear:function(){o()},cvvExplainer:function(){r.toggle(l.byId("cvvExplainer"),"display--none")}},i.adyenCardEventHandlers={onValid:function(t){"adyen"===i.activeCardProcessor&&g.byId("modal-save-button").setDisabled(!t)}};var d,u,m,f,v,b,y=(d={},u={},h("[data-card-processor]").forEach((function(t){var e=a.get(t,"data-card-processor");u[e]=t;var n=a.get(t,"data-supported-currencies"),i=n&&n.split(",")||[];d[e]=i})),{nodes:u,currencies:d});E=y.nodes,P=y.currencies,c(l.byId("sameAsContactCheckbox"),"change",(function(){!0===this.checked?r.add(l.byId("billingAddressFieldWrapper"),"js-hide"):r.remove(l.byId("billingAddressFieldWrapper"),"js-hide")})),h(".cancel-button",(m=this).domNode).on("click",(function(t){t.stopPropagation(),t.preventDefault(),m.hide()})),M(!0),f=h("[data-mc-el='editContactMethod']"),v=l.byId("contactSummary"),b=l.byId("contactForm"),f&&f.on("click",(function(){r.toggle(v,"hide"),r.toggle(b,"hide")})),h('[data-mc-el="editCardButton"]').on("click",(function(t){var e={eventCategory:"billing_edit",eventAction:"billing_card_change",eventLabel:"billing_logging",currentPath:window.location.pathname};window.ga("send","event",e),t.stopPropagation(),t.preventDefault(),O("credit-card")})),x.addressCountrySelect(l.byId("contact-country"),!0),x.zipToCityFieldSpecific("contact-zip","contact-city","contact-country",k.toUrl("/account/zip-to-city")),x.zipToStateFieldSpecific("contact-zip","contact-state","contact-us-state",k.toUrl("/account/zip-to-state")),x.addressCountrySelect(l.byId("billing-country")),x.zipToCityFieldSpecific("billing-zip","billing-city","billing-country",k.toUrl("/account/zip-to-city")),x.zipToStateFieldSpecific("billing-zip","billing-state","billing-us-state",k.toUrl("/account/zip-to-state")),c(l.byId("billing-country"),"change, click",(function(){var e=l.byId("billing-country").value;l.byId("adyen-select")&&(-1!==t.indexOf([9,16,59,109],e)?(r.remove("adyen-select","hide"),l.byId("use_adyen").checked&&r.remove("payment-adyen","hide")):(r.add("adyen-select","hide"),r.add("payment-adyen","hide"))),l.byId("paypal-select")&&(157===e?(r.add("paypal-select","hide"),r.add("payment-paypal","hide"),l.byId("use_paypal").checked=!1):(r.remove("paypal-select","hide"),l.byId("use_paypal").checked&&r.remove("payment-paypal","hide")))})),l.byId("billing-country").click();var w=h("[data-mc-el='oneTimeFeeLabel']")[0],_=h("[data-mc-el='adyenSetupFeeLabel']")[0];if(w&&w.dataset.usd>0&&!_){var S=h("[data-mc-el='adyen-msg-block']")[0];S&&r.toggle(S,"hide")}var I=h("[data-mc-el='default-adyen-msg']")[0];I&&r.toggle(I,"hide",k.inUrl("billing/plans"));var T=h("[data-mc-el='default-adyen-msg']")[0];T&&r.toggle(T,"hide",!k.inUrl("billing/plans")),h("input[name='payment-method']").on("change",(function(){M()})),$(),C.info("new-billing-modal","Modal_Init",{guid:i.guid,launch_step:i.launchStep,message:"Modal_Init"})}});var z=function(t){h(".invalid-error").forEach((function(t){n.destroy(t)}));var e=!0;return h("label.required",t).forEach((function(t){if(0!==t.offsetHeight){var n=l.byId(a.get(t,"for"));r.toggle(n,"invalid",!n.value),n.value||(o.place("<span class='invalid-error'>You missed this field</span>",n,"after"),e=!1)}})),e},W=function(){return p.get(k.toUrl("/account/contact-summary"),{handleAs:"json"}).then((function(t){var e=t.template;o.place(e,l.byId("contactSummary"),"replace"),$()}))},q=function(t){var e=l.byId("contactInfoForm"),n=d.toObject(e),i=JSON.stringify(t);return n.results=i,p.post(k.toUrl("account/save-validation-results"),{handleAs:"json",data:n})},G=function(t){switch(t.type){case"individual_taxpayer_id":var e=h("#individual-taxpayer-id-input"),i=e.closest(".field-wrapper");return void(n.hasClass(i[0],"dlocal-invalid-error")||(i.addClass("dlocal-invalid-error"),o.place("<span class='dlocal-invalid-error-message'>"+t.message+"</span>",e[0],"after"),e[0].focus()));case"card":var a=h(".dlocal-field");if(!n.hasClass(a[0],"dlocal-invalid-error")){var s=h(".DlocalField");a.addClass("dlocal-invalid-error"),o.place("<span class='dlocal-invalid-error-message'>"+t.message+"</span>",s[0],"after")}return;default:return}}.bind(this),Y=function(t){return p.post(k.toUrl("/account/payment-info-post"),{handleAs:"json",data:t})},K=function(t){if(t&&t.length){var e={currency:this.currency,challenge_response:JSON.stringify(t[0])};this.setSaveButtonLoadingState(),p.post(k.toUrl("/account/billing/plans/submit-three-ds-data-for-token"),{data:e}).then(function(t){try{t=JSON.parse(t)}catch(t){B("Something went wrong. Please try again or contact support.")}t.success?(j=!0,this.clearAppShellWarningBanner(t),this.modal.hide(),this.unmountReverseBridge()):B("Something went wrong. Please try again or contact support.")}.bind(this))}},J=function(t){if(i.unsetSaveButtonLoadingState(),!1===t.success){if(t.threeDsAction)return C.info("new-billing-modal","Authentication_Required",{guid:i.guid,launch_step:i.launchStep,message:"User required to authenticate"}),e=t.threeDsAction,n=t.adyenProduction,a=t.adyenClientKey,o=h('[data-mc-el="cc_origin_key"]')[0].value,s=h('[data-mc-el="cc_component_url"]')[0].value,r=h('[data-mc-el="cc_api_url"]')[0].value,l={onResolveChallenge:K.bind(i),providerConfigurations:{adyen:{apiUrl:r,clientKey:a,componentUrl:s,isProd:n,originKey:o}},threeDsActionData:e},void(i.unmountReverseBridge=A("threeds-challenge",l));F(t,"payment"),C.info("new-billing-modal","Error_Submit_Payment",{guid:i.guid,launch_step:i.launchStep,message:"Error_Submit_Payment",Error:t.error_msg?t.error_msg:"Error submitting payment"})}else{if(C.info("new-billing-modal","Submission_Successful_Payment",{guid:i.guid,launch_step:i.launchStep,message:"Submission_Successful_Payment"}),j=!0,i.clearAppShellWarningBanner(t),"function"==typeof i.onSuccessRedirect&&i.onSuccessRedirect())return;i.modal.hide()}var e,n,a,o,s,r,l};v={contact:{contentId:"contactInfo",title:"Contact Information",buttonTitle:"Save",saveFunctionality:function(){var t=l.byId("contactInfoForm"),e=d.toObject(t);!0===z(t,v.contact)&&(R(!0),p.post(k.toUrl("account/validate-address"),{handleAs:"json",data:e}).then((function(t){if(!1===t.success)return F(t,"contact"),void C.info("new-billing-modal","Error_Thrown_Contact",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),message:"Error_Thrown_Contact"});s=t.results||[],b=!0,N="contact",!t.is_valid||"STREET"!==t.validation_level&&"SKIPPED"!==t.validation_level?"INVALID"!==t.validation_level&&t.results&&t.results.length>0?(!function(t){if(t.results)for(var e=0;e<t.results.length&&3!==e;e++){var n=t.results[e];r.remove(l.byId("lbAddressChoice"+(e+1)),"js-hide"),l.byId("addressChoice"+(e+1)).innerText=(a=void 0,a="",(i=n).address1&&i.address1.length>0&&(a+=i.address1),i.address2&&i.address2.length>0&&(a+=" "+i.address2),i.city&&i.city.length>0&&(a+=" "+i.city),i.state&&i.state.length>0&&(a+=", "+i.state),i.zip&&i.zip.length>0&&(a+=", "+i.zip),a)}var i,a}(t),R(!1),C.info("new-billing-modal","Malformed_Address_Did_You_Mean",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),message:"Malformed_Address_Did_You_Mean"}),O("did-you-mean")):(R(!1),i.modal.addressAttempts=i.modal.addressAttempts+1,C.info("new-billing-modal","Invalid_Address",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),message:"Invalid_Address"}),3===i.modal.addressAttempts&&C.info("new-billing-modal","Invalid_Address_Blocked_3_Attempts",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),message:"Invalid_Address_Blocked_3_Attempts"}),O("no-results-found")):q(t).then((function(n){if(!1===n.success)return F(n,"contact"),void C.info("new-billing-modal","Error_Thrown_Contact",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),error:n.error_msg,message:"Error_Thrown_Contact"});W().then((function(){C.info("new-billing-modal","Submission_Successful_Contact",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),message:"Submission_Successful_Contact"}),!0===i.workflowMode?(R(!1),function(t){var e=t.results[0];l.byId("contact-address1").value=e.address1,l.byId("contact-address2").value=e.address2,l.byId("contact-city").value=e.city,l.byId("contact-state").value=e.state,l.byId("contact-zip").value=e.zip,l.byId("contact-country").value=e.country}(t),U()):(i.modal.hide(),window.location.reload())}))}))})))}},billing:{contentId:"billingInfoModal",title:"Billing Information",buttonTitle:"Save",workflowHideFieldID:"billing-contact-fields",saveFunctionality:function(){var t=l.byId("billingInfoForm"),e=d.toObject(t);!0===z(t,v.billing)&&(R(!0),p.post(k.toUrl("account/save-billing-address"),{handleAs:"json",data:e}).then((function(t){if(!1===t.success)return F(t,"billing"),void C.info("new-billing-modal","Error_Thrown_Billing",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),error:t.error_msg,message:"Error_Thrown_Billing"});y=!0,N="billing",C.info("new-billing-modal","Submission_Successful_Billing",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(e),message:"Submission_Sucessful_Billing"}),W().then((function(){p.get(k.toUrl("/account/billing-summary"),{handleAs:"json"}).then((function(t){var e=t.template;o.place(e,l.byId("billingSummary"),"replace"),r.add(l.byId("contact-info-form"),"js-hide"),$()})).then((function(){!0===i.workflowMode?(R(!1),function(t){l.byId("billing-address1").value=t.final_address.address1,l.byId("billing-address2").value=t.final_address.address2,l.byId("billing-city").value=t.final_address.city,l.byId("billing-state").value=t.final_address.state,l.byId("billing-zip").value=t.final_address.zip,l.byId("billing-country").value=t.final_address.country}(t),O("payment"),$()):i.modal.hide()}))}))})))}},payment:{contentId:"paymentInfo",title:"Payment Information",buttonTitle:"Save",saveFunctionality:function(){var t,e,n=l.byId("paymentInfoForm"),a=d.toObject(n),o=a["payment-method"];if(N="payment","paypal"!==o||l.byId("is_paypal_already").value)if("credit-card"===o&&"dlocal"===a.card_processor){i.setSaveButtonLoadingState(),function(){var t=h("#individual-taxpayer-id-input"),e=t.closest(".field-wrapper"),n=t.siblings(".dlocal-invalid-error-message")[0];n&&(e.removeClass("dlocal-invalid-error"),n.remove());var i=h(".dlocal-field"),a=i.children(".dlocal-invalid-error-message")[0];a&&(i.removeClass("dlocal-invalid-error"),a.remove())}();var s=(t=a.individual_taxpayer_id,e=function(t){switch(t){case"ars":return{name:"DNI/CUIT",message:"must be 7, 8, 9, or 11 digits",validator:function(t){var e=t.replace(/[^0-9]/gi,"");return e.length>=7&&e.length<=9||11===e.length}};case"clp":return{name:"CI/RUT",message:"must be 8 or 9 characters without periods or hyphens",validator:function(t){var e=t.replace(/[^A-Za-z0-9]/g,"");return e.length>7&&e.length<10}};case"cop":return{name:"CC",message:"must be 6 to 10 digits without spaces",validator:function(t){var e=t.replace(/[^0-9]/gi,"");return e.length>5&&e.length<11}};case"mxn":return{name:"CURP",message:"must be 10 to 18 characters without spaces",validator:function(t){var e=t.replace(/[^A-Za-z0-9]/g,"");return e.length>9&&e.length<19}};case"brl":default:return{name:"CPF/CNPJ",message:"must be 11 or 14 digits without spaces",validator:function(t){var e=t.replace(/[^0-9]/gi,"");return e.length>10&&e.length<15}}}}(i.currency),t?e.validator(t)?void 0:{type:"individual_taxpayer_id",message:e.name+" "+e.message}:{type:"individual_taxpayer_id",message:e.name+" is required"});if(s)return i.unsetSaveButtonLoadingState(),void G(s);a.individual_taxpayer_id=a.individual_taxpayer_id.replace(/[^A-Za-z0-9]/gi,"");var r=l.byId("billingSummaryName"),c=r&&r.innerHTML.trim();window._dlocal.api.createToken(window._dlocal.card,{name:c}).then((function(t){a.token=t&&t.token,Y(a).then(function(t){!1===t.success&&"Sorry, we are unable to process your card at this time due to an invalid CPF/CNPJ."===t.error_msg?(i.unsetSaveButtonLoadingState(),G({type:"individual_taxpayer_id",message:"CPF/CNPJ is invalid"})):J(t)}.bind(i))})).catch((function(t){i.unsetSaveButtonLoadingState(),t.error&&(G({type:"card",message:t.error.message}),C.info("new-billing-modal","Error_Fetching_Token",{guid:i.guid,launch_step:i.launchStep,message:"Error_Fetching_Token",Error:JSON.stringify(t.error)}))}))}else{if(S.flagIsOn(_.FINOPS_3DS_TOKENIZATION)){var u=i.gatherThreeDsDeviceInfo();a.deviceInfo=JSON.stringify(u)}i.setSaveButtonLoadingState(),Y(a).then(J)}else{w.showPayPalNewModal((function(){B("Something went wrong, please select another payment method."),C.info("new-billing-modal","Error_Submit_Paypal",{guid:i.guid,launch_step:i.launchStep,message:"Error_Submit_Paypal"})})).then((function(t){(a=d.toObject(n)).nonce=t.nonce,a.email=t.details.email,Y(a).then((function(){j=!0,i.clearAppShellWarningBanner(),"function"==typeof i.onSuccessRedirect&&i.onSuccessRedirect()||i.modal.hide()})),C.info("new-billing-modal","Submission_Successful_Payment",{guid:i.guid,launch_step:i.launchStep,message:"Submission_Successful_Payment"})}))}},loadFunctionality:function(){"dlocal"===this.activeCardProcessor&&this.updateDlocalCardProps(this.currency)}.bind(i)},"credit-card":{contentId:"creditCardInfo",title:"Credit Card Details",buttonTitle:"Back",saveFunctionality:H,loadFunctionality:function(){var t=h('[data-mc-el="hostedPaymentFrame"]')[0];if(t&&"dirty"===D){R(!0);var e=function(){r.remove(l.byId("creditCardInfo"),"js-hide"),R(!1)},n=window.setTimeout((function(){e(),F({error_msg:"Sorry, we're having some difficulty"},"credit-card")}),15e3);t.onload=function(){window.clearTimeout(n),D="clean",e()},t.src=k.toUrl("account/chase-gateway/form?cvv=true&dijit_id="+i.id+"&currency="+i.currency)}}},"did-you-mean":{contentId:"didYouMean",suggestedAddresses:"getAddresses",title:"Verify Contact Address",buttonTitle:"Save",saveFunctionality:function(){R(!0);for(var t=0;t<3;t++)if(l.byId("rbAddressChoice"+(t+1)).checked){var e={is_valid:!0,validation_level:"STREET",results:[s[t]]};q(e).then((function(t){if(N="did-you-mean",!1===t.success)return F(t,"did-you-mean"),void C.info("new-billing-modal","Error_Thrown_DYM",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(t),error:t.error_msg,message:"Error_Thrown_DYM"});C.info("new-billing-modal","Submission_Successful_DYM",{guid:i.guid,launch_step:i.launchStep,formData:JSON.stringify(t),message:"Submission_Successful_DYM"}),W().then((function(){!0===i.workflowMode?(R(!1),U()):i.modal.hide()}))}));break}}},"no-results-found":{contentId:"noResults",title:"Verify Contact Address",buttonTitle:"Back",saveFunctionality:function(){O("contact")}}},i.modal.set("href",k.toUrl("account/contact-billing-modal"))},getChaseEventHandlers:function(){return this.chaseEventHandlers},setSaveButtonLoadingState:function(){var t=l.byId("modal-save-button");t&&!t.disabled&&(t.disabled=!0,x.toggleButtonLoadingState(t,"Save","button-loading disabled"))},unsetSaveButtonLoadingState:function(){var t=l.byId("modal-save-button");t&&t.disabled&&(t.disabled=!1,x.toggleButtonLoadingState(t,"Save","button-loading disabled"))},clearAppShellWarningBanner:function(t){window.top.postMessage({type:"PAYMENT_METHOD_UPDATED"})},updateDlocalCardProps:function(t){var e,n;switch(t){case"ars":e="AR",n="DNI/CUIT";break;case"brl":e="BR",n="CPF/CNPJ";break;case"clp":e="CL",n="CI/RUT";break;case"cop":e="CO",n="CC";break;case"mxp":default:e="MX",n="CURP"}window._dlocal=window._dlocal||{},window._dlocal.country=e;var i=h("#individual-taxpayer-id-input")[0];window._dlocal&&window._dlocal.card&&(window._dlocal.card.config.country=e),i&&(i.placeholder=n)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(2),n(6),n(7),n(1233),n(44),n(48)],void 0===(a=function(t,e,n,i,a,o,s){return t([e,n],{templateString:s,confirm:"CONFIRM",helptip:"",error:"Please enter the text exactly as it is displayed to confirm.",active:!0,postCreate:function(){var t=a(this.domNode).closest("form"),e=this;t&&i(t,"submit",(function(t){e.active&&!e.validate()&&(t.stopImmediatePropagation(),t.preventDefault())}))},validate:function(){return o.get(this.confirmInput,"value")!=this.confirm?(a(this.confirmError).style("display","").html(this.error),a(this.confirmInput).addClass("invalid"),!1):(a(this.confirmError).style("display","none"),a(this.confirmInput).removeClass("invalid"),window.scrollTo(0,0),!0)},clearInputField:function(){this.confirmInput.value=""}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(82),n(256),n(2),n(6),n(5),n(31),n(37),n(1),n(10),n(9),n(7),n(3),n(4),n(30),n(18),n(14),n(8),n(26),n(136),n(21),n(122),n(17),n(36),n(70),n(16),n(135),n(95),n(459),n(40)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E,P){var D=t([e,i,a],{overlayClass:"kb-overlay",searching:!1,lastSearch:"",basePath:"kb-api",extraLoadingAnimation:!0,postMixInProperties:function(){D._main||(D._main=this)},postCreate:function(){var t=this;o(t.searchForm,"submit",(function(e){e.preventDefault();var n=t.searchInput.value;t.searching||t._searchAll(n)})),o(t.clearIcon,"click",(function(e){e.preventDefault(),t.clearSearch(),t.toggleSearchLocaleSelector()})),o(t.searchInput,"keyup",(function(e){if((e.charCode||e.keyCode)===f.ESCAPE)t.clearSearch();else{var n=t.searchInput.value;""===n&&(t.clearSearch(),t.localeSelectorContainer.classList.contains("hide")&&t.toggleSearchLocaleSelector()),n!==t.lastSearch&&t.toggleSearchIcon(!1)}})),o(this.domNode,"a[data-kb-article]:click",(function(e){if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)){e.preventDefault(),e.stopPropagation();var n=p.get(this,"data-kb-article");t.show(),t.showArticle(n)}})),o(this.backLink,"click",(function(e){e.preventDefault(),e.stopPropagation(),t.toggleContentPanel(!1)})),o(this.domNode,"[data-kb-paging]:click",(function(e){e.preventDefault(),e.stopPropagation();var n=p.get(this,"data-kb-paging");t._pageArticles(n)})),o(this.closeButton,"click",c.hitch(this,"hide")),o(this.domNode,"[data-kb-suggestion]:click",(function(e){e.preventDefault(),e.stopPropagation();var n=p.get(this,"data-kb-suggestion");t._searchAll(n),t.searchInput.value=n})),this.toggleResults(!1),this.toggleContentPanel(!1)},onShow:function(){this.translateAllContent(),void 0!==this.recommendedArticlesContainer&&this._showRecommendedArticles(),void 0!==this.localeSelectorContainer&&this._loadSearchLocaleSelector()},clearSearch:function(){this.searchInput.value="",this.searchInput.focus(),this.toggleResults(!1),this.toggleSearchIcon(!1)},showArticle:function(t,e){this.extraLoadingAnimation&&(this.toggleSearchIcon(!1),this.toggleSearchLoader(!0)),this._getArticle(t,e).then(c.hitch(this,(function(t){try{if(JSON.parse(t).error_msg)t="<div class='padding-top--lv3'>"+new j({type:"error",title:"Something went wrong",message:'Search the <a href="https://mailchimp.com/help/">Knowledge Base</a>'}).domNode.outerHTML+"</div>"}catch(t){}this.contentContainer.innerHTML=t,this.toggleContentPanel(!0),this.extraLoadingAnimation&&(this.toggleSearchIcon(!0),this.toggleSearchLoader(!1)),s(".kb-article-code textarea",this.contentContainer).forEach((function(t){k.fromTextArea(t,{mode:"text/html",readOnly:!0,tabMode:"indent",theme:"default",autoClearEmptyLines:!0,lineWrapping:!0})})),d.parse(this.contentContainer),_.get(C.solvvyUrl),o(s("#email-support",this.domNode),"click",c.hitch(this,(function(t){t.preventDefault(),t.stopPropagation(),this.showContactForm(),w.pythia.logEvent("Help_ContactSupport_ClickEmailButton")}))),o(s("#phone-support"),"click",c.hitch(this,(function(t){t.preventDefault(),t.stopPropagation(),this.showContactForm(!0)}))),o(s("#locale-selector"),"change",c.hitch(this,(function(t){this.setLocaleCookie(t.target.value),this._reloadRecommendedArticles(),this._loadSearchLocaleSelector(),this.translateAllContent(),this._searchAll(this.lastSearch);var e=t.target.getAttribute("data-kb-article");this.showArticle(e,null)})))})))},translateAllContent:function(){l.get(y.toUrl(this.basePath+"/localized-content"),{handleAs:"json"}).then(c.hitch(this,(function(t){var e=t.locale,n=t.content;this.searchInput.placeholder=n.search_articles[e],this.searchTheKb.innerHTML=n.search_the_kb[e],this.somethingWentWrong.innerHTML=n.something_went_wrong[e],this.errorMessage.innerHTML=n.error_message[e],this.backLink.innerHTML=n.back_to_search[e],this.recommendArticles.innerHTML=n.recommended_articles[e],this.technicalSupport.placeholder=n.technical_support[e],this.contactSupportMessage.innerHTML=n.contact_support_message[e],this.emailUs.innerHTML=n.email_us[e],this.requestACall.innerHTML=n.request_a_call[e],this.logInMessage.innerHTML=n.login_message[e],this.logIn.placeholder=n.log_in[e],this.upgradeMessage.innerHTML=n.upgrade_message[e],this.chatFormButton.innerHTML=n.chat_with_us[e]})))},showContactForm:function(t){void 0===t&&(t=!1),l.get(y.toUrl("kb/contact-form"),{handleAs:"json"}).then(c.hitch(this,(function(e){var i=this.contentContainer;r.forEach(b.findWidgets(i),(function(t){t.destroyRecursive()})),this.toggleContentPanel(!0),i.innerHTML=e.content,Promise.resolve().then((function(){var e=[n(580)];(function(e){new e(!0,null,t).placeAt(u.byId("contact-form-container")),d.parse(i)}).apply(null,e)})).catch(n.oe)})))},toggleSearchIcon:function(t){m.toggle(this.clearIcon,"hide",!t),m.toggle(this.searchIcon,"hide",t)},toggleContentPanel:function(t){h.set(this.searchPanel,"display",t?"none":""),h.set(this.contentPanel,"display",t?"":"none"),this.contentPanel.scrollIntoView()},toggleResults:function(t){this.recommendedContainer&&h.set(this.recommendedContainer,"display",t?"none":""),h.set(this.resultsContainer,"display",t?"":"none")},toggleSearchLoader:function(t){m.toggle(this.searchLoader,"hide",!t)},_searchAll:function(t){if(!this.searching){this.searching=!0,this.lastSearch=t,this.toggleSearchLoader(!0);var e=l.get(y.toUrl(this.basePath+"/search"),{handleAs:"text",query:{term:t}});return e.then(c.hitch(this,(function(e){this.searching=!1,this.toggleSearchLoader(!1),this.toggleSearchLocaleSelector(),this.toggleSearchIcon(!0),this._destroySearchWidgets(),this.resultsList.innerHTML=e,this.toggleResults(!0),d.parse(this.resultsList),window.ga("send","event","KB","Search",t),window.ga("send","pageview",{page:"/kb-api/search/?q="+t+"&scope=tutorials",title:"In-app KB Search"})}))),e}},_destroySearchWidgets:function(){r.forEach(b.findWidgets(this.resultsList),(function(t){t.destroyRecursive()}))},_pageArticles:function(t){var e=b.byId("kb-search-article-tab");e&&l.get(y.toUrl(this.basePath+"/search-articles"),{handleAs:"text",query:{term:this.lastSearch,page:t<1?1:t}}).then((function(t){e.setContent(t)}))},_getArticle:function(t,e){return l.get(y.toUrl(this.basePath+"/article"),{handleAs:"text",query:{path:t,locale:e}})},_showRecommendedArticles:function(){!0!==this.recommendedArticlesVisible&&(this.toggleSearchIcon(!1),this.toggleSearchLoader(!0),l.get(y.toUrl(this.basePath+"/recommended-articles"),{handleAs:"text"}).then(c.hitch(this,(function(t){this.recommendedArticlesContainer.innerHTML=t,this.recommendedArticlesVisible=!0,this.toggleSearchIcon(!0),this.toggleSearchLoader(!1)}))))},_reloadRecommendedArticles:function(){l.get(y.toUrl(this.basePath+"/recommended-articles"),{handleAs:"text"}).then(c.hitch(this,(function(t){this.recommendedArticlesContainer.innerHTML=t})))},_loadSearchLocaleSelector:function(){l.get(y.toUrl(this.basePath+"/locale-selector"),{handleAs:"text"}).then(c.hitch(this,(function(t){this.localeSelectorContainer.innerHTML=t,o(s("#search-locale-selector"),"change",c.hitch(this,(function(t){this.setLocaleCookie(t.target.value),this._loadSearchLocaleSelector(),this.recommendedArticlesVisible=!1,this._showRecommendedArticles(),this.translateAllContent()})))})))},toggleSearchLocaleSelector:function(){m.toggle(this.localeSelectorContainer,"hide")},setLocaleCookie:function(t){var e=new Date;e.setTime(e.getTime()+2592e6);e.toUTCString();var n=new E;n.setCookie(n.advertisingCategory,"locale",t,e,"/")}});return D.main=function(){return D._main?D._main:null},D}.apply(e,i))||(t.exports=a)},function(t,e,n){t.exports=function(){var t=[],e=[],n={},i={},a={};function o(t){return"string"==typeof t?new RegExp("^"+t+"$","i"):t}function s(t,e){return t===e?e:t===t.toUpperCase()?e.toUpperCase():t[0]===t[0].toUpperCase()?(n=e).charAt(0).toUpperCase()+n.substr(1).toLowerCase():e.toLowerCase();var n}function r(t,e){return t.replace(/\$(\d{1,2})/g,(function(t,n){return e[n]||""}))}function l(t,e,i){return function(a){var o=a.toLowerCase();return e.hasOwnProperty(o)?s(a,o):t.hasOwnProperty(o)?s(a,t[o]):function(t,e,i){if(!t.length||n.hasOwnProperty(t))return e;for(var a=i.length;a--;){var o=i[a];if(o[0].test(e))return e.replace(o[0],(function(t,e,n){var i=r(o[1],arguments);return s(""===t?n[e-1]:t,i)}))}return e}(o,a,i)}}function d(t,e,n){return(n?e+" ":"")+(1===e?d.singular(t):d.plural(t))}return d.plural=l(a,i,t),d.singular=l(i,a,e),d.addPluralRule=function(e,n){t.push([o(e),n])},d.addSingularRule=function(t,n){e.push([o(t),n])},d.addUncountableRule=function(t){"string"!=typeof t?(d.addPluralRule(t,"$0"),d.addSingularRule(t,"$0")):n[t.toLowerCase()]=!0},d.addIrregularRule=function(t,e){e=e.toLowerCase(),t=t.toLowerCase(),a[t]=e,i[e]=t},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach((function(t){return d.addIrregularRule(t[0],t[1])})),[[/s?$/i,"s"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(t){return d.addPluralRule(t[0],t[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(?:sis|ses)$/i,"$1sis"],[/(^analy)(?:sis|ses)$/i,"$1sis"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(e[mn]u)s?$/i,"$1"],[/(movie|twelve)s$/i,"$1"],[/(cris|test|diagnos)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(t){return d.addSingularRule(t[0],t[1])})),["advice","adulthood","agenda","aid","alcohol","ammo","athletics","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","commerce","cod","cooperation","corps","digestion","debris","diabetes","energy","equipment","elk","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","trout","traffic","transporation","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pox$/i,/ois$/i,/deer$/i,/fish$/i,/sheep$/i,/measles$/i,/[^aeiou]ese$/i].forEach(d.addUncountableRule),d}()},function(t,e,n){var i,a;i=[n(0),n(1),n(7),n(30),n(2),n(4),n(3),n(6),n(31),n(772),n(38),n(62),n(14),n(26),n(15),n(8),n(17),n(16),n(52),n(12),n(11),n(20),n(76),n(1329),n(773),n(232)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x){return t([y,w,_,C],{templateString:k,tags:null,bulkUntagTarget:null,tagActionClass:null,listId:null,tagCreationAllowed:!1,exactMatch:!1,inputLabelFind:"Find a tag",inputLabelFindCreate:"Create or find a tag",inputLabelCreateFirst:"Create your first tag right here",activeNode:null,isLoading:!1,analyticsData:"",analyticsCategory:null,analyticsStatus:null,confirmationRequired:!1,confirmationWarningText:"You are about to tag all contacts.",confirmationTitle:"",confirmationHelpText:"",confirmationButtonText:"Confirm",confirmationWidgetId:null,all:[],mixed:[],tagSelectionCTAText:null,hideManageTags:null,postCreate:function(){this.inherited(arguments),this.setupTagInput(),n.set(this.manageTagsButton,"href",g.toUrl("/lists/tags",{id:this.listId})),a(this.manageTagsButton,"click",e.hitch(this,(function(){var t=this.tags&&this.tags.length>0?"Has Tags":"No Tags";p.googleAnalytics.trackEvent("Manage Tags",this.analyticsData,t)}))),a(this.tagInput,"blur, focus",e.hitch(this,(function(){this.toggleFocus()}))),this.tagSelectionCTAText&&(this.tagSelectionCTA.innerHTML=this.tagSelectionCTAText),this.hideManageTags&&s.add(this.manageTagsButton,"hide"),x.watchTags(e.hitch(this,(function(t){this.tags=t,this.tags.sort(this.sortTagsByName),this.refresh()})),this.listId)},setSelection:function(t){"object"==typeof t&&(this.all=t.all||[],this.mixed=t.mixed||[],this.populateTagsList(this.tags))},setupTagInput:function(){this.setPlaceholderAndManageText(),this.tagCreationAllowed||this.hideCreation(),a(this.overlayContainer,"keydown",e.hitch(this,"handleKeydown")),a(this.overlayContainer,"enterKeydown",d(e.hitch(this,"handleEnterKeydown"),500)),a(this.tagInput,"input",e.hitch(this,"handleInput")),a(this.newTagContainer,"click",e.hitch(this,"handleCreateTag"))},setPlaceholderAndManageText:function(){this.tagCreationAllowed?this.tags&&this.tags.length>0?(n.set(this.tagInput,"placeholder",this.inputLabelFindCreate),s.remove(this.manageTagsContainer,"hide")):(n.set(this.tagInput,"placeholder",this.inputLabelCreateFirst),s.add(this.manageTagsContainer,"hide")):(n.set(this.tagInput,"placeholder",this.inputLabelFind),s.remove(this.manageTagsContainer,"hide"))},getInputValue:function(){return this.tagInput.value},setInputValue:function(t){this.tagInput.value=t},setLoadingState:function(t){t?(s.remove(this.loadingContainer,"hide"),s.add(this.taggingContainer,"hide")):(s.add(this.loadingContainer,"hide"),s.remove(this.taggingContainer,"hide"),this.focusInput()),this.isLoading=t},populateTagsList:function(t){var e=this.getInputValue();this.tags&&this.tags.length>0?(t.map((function(t){t.tag_name=c.decode(t.tag_name)})),this.showSearchResults(t),s.add(this.noTagsContainer,"hide")):s.remove(this.noTagsContainer,"hide"),e&&e.length>0&&this.tagCreationAllowed&&!this.exactMatch&&e.trim().length>0?this.showCreation():this.hideCreation()},handleInput:function(){this.stripEmojisFromInput();var t=this.getInputValue();if(t&&t.length>0){var e=this.searchTags(t);this.populateTagsList(e),this.newTagContainer.innerText=t}else this.populateTagsList(this.tags);m.checkInputLength(this.tagInput,this.newTagCharsRemainingCount,100,!0)},stripEmojisFromInput:function(){this.setInputValue(b.stripEmojis(this.getInputValue()))},handleKeydown:function(t){t.keyCode===i.ENTER?(t.preventDefault(),a.emit(this.overlayContainer,"enterKeydown",t)):t.keyCode===i.DOWN_ARROW||t.keyCode===i.UP_ARROW?this.navigate(t):s.contains(this.createNewContainer,"hide")||s.remove(this.newTagContainer,"active")},handleEnterKeydown:function(){this.activeNode===this.tagInput?this.handleCreateTag():a.emit(this.getActiveNode(),"click",{bubbles:!1,cancelable:!0})},toggleFocus:function(){s.toggle(this.newTagCharsRemainingContainer,"hide")},navigate:function(t){t.preventDefault();var e=null;t.keyCode===i.DOWN_ARROW?e="down":t.keyCode===i.UP_ARROW&&(e="up");var n=this.getkeyableNodes(),a=this.getActiveNode(),o=this.getNextKeyableNode(a,n,e);this.setActiveNode(o)},getkeyableNodes:function(){return r(".keyable",this.overlayContainer)},getActiveNode:function(){return this.activeNode},getNextKeyableNode:function(t,e,n){var i=e.indexOf(t),a=0;if("down"===n?a=i+1:"up"===n&&(a=i-1),!this.isKeyable(e[a])){if("down"===n){for(var o=a;o<=e.length;o++)if(this.isKeyable(e[o]))return e[o];return e[0]}if("up"===n){for(var s=a;s>=0;s--)if(this.isKeyable(e[s]))return e[s];return e[e.length-1]}}return e[a]},isKeyable:function(t){return!!t&&(!s.contains(t,"hide")&&!s.contains(t.parentNode,"hide")&&s.contains(t,"keyable"))},setActiveNode:function(t){this.activeNode=t,t.focus()},setupTagButtons:function(t){var n=this,i=[];t.some((function(t,e){var a=new S({tagID:t.tag_id,tagName:t.tag_name});return n.all.forEach((function(e){e===t.tag_id&&a.setTagState("ALL")})),a.tagState||n.mixed.forEach((function(e){e===t.tag_id&&a.setTagState("MIXED")})),a.tagState||a.setTagState("NONE"),a.on("tagClick",(function(){n.handleTagClick(t)})),i.push(a),e>=500})),i.sort(this.sortTagsByState),i.forEach(e.hitch(this,(function(t){t.placeAt(this.searchResultsList,"last")})))},handleTagClick:function(t){if(this.confirmationRequired){if(this.tagConfirmationDialog.show(),a.once(this.tagConfirmationCancel,"click",e.hitch(this,(function(){this.tagConfirmationDialog.hide()}))),this.bulkUntagTarget)return this.confirmationWarningTextContainer.innerHTML="You're about to remove the tag <b>"+t.tag_name+"</b> from your selected contacts.",s.remove(this.confirmationWarningInputContainer,"hide"),void a(this.tagConfirmationConfirm,"click",e.hitch(this,(function(){this.performUntagAllAction(this.bulkUntagTarget,t)})));a.once(this.tagConfirmationConfirm,"click",e.hitch(this,(function(){this.performTagAction(t),this.tagConfirmationDialog.hide()})))}else this.performTagAction(t)},handleCreateTag:function(){var t=this.getInputValue();this.confirmationRequired?(this.tagConfirmationDialog.show(),a.once(this.tagConfirmationCancel,"click",e.hitch(this,(function(){this.tagConfirmationDialog.hide()}))),a.once(this.tagConfirmationConfirm,"click",e.hitch(this,(function(){this.tagInput.value=t,this.onCreateTag(),this.tagConfirmationDialog.hide()})))):this.onCreateTag()},performTagAction:function(t){var n;this.all.forEach(e.hitch(this,(function(e){e===t.tag_id&&(n=!0)}))),n?this.onRemoveTag(t):this.onApplyTag(t)},performUntagAllAction:function(t,e){var n;event.stopPropagation(),event.preventDefault();var i=!1;"audience"===t?(n=h.byId("confirmUntagAudienceInput"),i=!0):"segment"===t&&(n=h.byId("confirmUntagSegmentInput")),!!n&&n.validate()&&(this.onRemoveTag(i,e),this.tagConfirmationDialog.hide())},sortTagsByName:function(t,e){var n=0;return t.tag_name>e.tag_name?n=1:t.tag_name<e.tag_name&&(n=-1),n},sortTagsByState:function(t,e){var n=0;return t.tagState>e.tagState?n=1:t.tagState<e.tagState&&(n=-1),n},searchTags:function(t){this.exactMatch=!1;var e=this,n=[];return t=t.trim(),this.tags&&this.tags.forEach((function(i){i.tag_name=String(i.tag_name),i.tag_name.toLowerCase()===t.toLowerCase()?(e.exactMatch=!0,n.unshift(i)):i.tag_name.toLowerCase().indexOf(t.toLowerCase())>-1&&n.push(i)})),n},showSearchResults:function(t){o.empty(this.searchResultsList),t.length<1?(s.add(this.searchResultsContainer,"hide"),this.tagCreationAllowed||s.remove(this.noSearchResultsContainer,"hide")):(this.setupTagButtons(t),s.remove(this.searchResultsContainer,"hide"),s.add(this.noSearchResultsContainer,"hide"))},hideCreation:function(){s.add(this.createNewContainer,"hide")},showCreation:function(){s.remove(this.createNewContainer,"hide")},refresh:function(){this.setPlaceholderAndManageText(),this.setInputValue(null),this.hideCreation(),this.populateTagsList(this.tags),this.setLoadingState(!1),this.scrollContainer.scrollTop=0},onOpen:function(){if(this.focusInput(),this.refresh(),this.analyticsCategory&&this.analyticsStatus){var t=this.analyticsCategory+" - "+this.analyticsStatus;p.googleAnalytics.trackEvent(t,"Clicked","Open Tags")}},focusInput:function(){setTimeout(e.hitch(this,(function(){u.focus(this.tagInput),this.activeNode=this.tagInput})),100)},onApplyTag:function(t){},onRemoveTag:function(t){},onCreateTag:function(){},onClose:function(){this.setInputValue(null)},onExecute:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(t){var i,a;i=[n(0),n(1),n(9),n(7),n(2),n(6),n(47),n(11),n(12),n(316)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){var c={report_abuse:"https://mailchimp.com/contact/abuse/",monkeyrewards:""},u={templateString:null,isLivePage:!1,baseContainerStyles:{position:"absolute",bottom:"0",right:"0",left:"0",display:"flex","justify-content":"center"},baseBadgeStyles:{"font-size":"14px","font-family":"Helvetica, Arial, Verdana, sans-serif","text-align":"center",cursor:"pointer",width:"100%",padding:"12px 24px"},monkeyrewardsLinkStyles:{width:"163px",height:"40px",display:"flex","font-size":"10px","align-items":"center","margin-left":"12px","text-decoration":"none"},themeStyles:{light:{badgeStyles:{"background-color":"rgba(255, 255, 255, 0.6)",opacity:"0.8",color:"#241c15","border-top":"none"},monkeyrewardsImg:"https://eep.io/mc-cdn-images/template_images/branding_logo_text_dark.svg",linkColor:"#241c15"},dark:{badgeStyles:{"background-color":"#242424",opacity:"1",color:"#FFFFFF","border-top":"1px solid #FFFFFF","box-shadow":"none"},monkeyrewardsImg:"https://eep.io/mc-cdn-images/template_images/branding_logo_text_light.svg",linkColor:"#FFFFFF"}},constructor:function(t){t&&t.isLive&&(this.model=new s(t.settings));t.model||this.model;this.templateString=d,this.inherited(arguments)},postCreate:function(){this.rewardsLink=this.domNode.querySelector(".monkeyrewards"),this.logoImage=this.rewardsLink.querySelector(".logo"),c.monkeyrewards=this.model.get("isWebsitePage")?"https://mailchimp.com/referral/?utm_source=freemium_website&utm_medium=website&utm_campaign=referral_marketing":"https://mailchimp.com/referral/?utm_source=freemium_landingpage&utm_medium=landingpage&utm_campaign=referral_marketing",this._setStylesFromTheme();var t=document.querySelectorAll(".templateSection");if(t&&t.length>0){var o=t[t.length-1],s=n.get(o,"padding-bottom");n.set(o,"padding-bottom",s+140+"px")}this.model.get("enabled")||this._hide(),this.uniqueId&&i.set(this.rewardsLink,"href",c.monkeyrewards.replace(/%ACCOUNT_ID%/,this.uniqueId)),this.isLive?i.set(this.domNode.querySelector(".report-abuse"),"href",c.report_abuse):this.own(a(this.domNode,"click",e.hitch(this,(function(){this.onClick(this)})))),this.model.watch("theme",e.hitch(this,"updateTheme")),this.model.watch("enabled",e.hitch(this,"updateEnabled"))},updateTheme:function(t,e,n){e!==n&&this._setStylesFromTheme()},updateEnabled:function(t,e,n){e!==n&&(!0===n?this._show():this._hide())},_setStylesFromTheme:function(){var t=this.model.get("theme"),i=this.themeStyles[t];this.logoImage.src=i.monkeyrewardsImg,n.set(this.domNode,this.baseContainerStyles),n.set(this.domNode.querySelector(".mcPrivacyBadge"),e.mixin(this.baseBadgeStyles,i.badgeStyles)),n.set(this.rewardsLink,this.monkeyrewardsLinkStyles),o("a.privacyLink",this.domNode).forEach((function(t){n.set(t,"color",i.linkColor)})),o("a.monkeyrewards",this.domNode).forEach((function(t){n.set(t,"color",i.linkColor)}))},_hide:function(){n.set(this.domNode,"display","none")},_show:function(){n.set(this.domNode,"display","flex")}},h=t([l,r],u);return h.themeStyles=u.themeStyles,h.baseBadgeStyles=u.baseBadgeStyles,h.baseContainerStyles=u.baseContainerStyles,h}.apply(e,i))||(t.exports=a)}).call(this,n(102)(t))},function(t,e,n){var i;void 0===(i=function(){return'        <div>            <div class="mcPrivacyBadge">               <div class="contentContainer mcPrivacyBadgeContent" style="display: flex; align-items: center; justify-content: space-between; margin: auto;">                   <div class="reportAbuseWrapper">                       <a class="privacyLink report-abuse" target="_blank">Report abuse</a>                   </div>                   <a class="monkeyrewards" target="_blank">                       Created with <img src="" style="margin-left: 6px; width: 100px;" class="logo" />                   </a>               </div>             </div>         </div>    '}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(185),n(318),n(320),n(109),n(182),n(186)],void 0===(a=function(t,e,n,i,a,o){return function(s,r,l,d){var c=-1,u=e,h=!0,p=s.length,m=[],g=r.length;if(!p)return m;l&&(r=i(r,a(l))),d?(u=n,h=!1):r.length>=200&&(u=o,h=!1,r=new t(r));t:for(;++c<p;){var f=s[c],v=null==l?f:l(f);if(f=d||0!==f?f:0,h&&v==v){for(var b=g;b--;)if(r[b]===v)continue t;m.push(f)}else u(r,v,d)||m.push(f)}return m}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(319)],void 0===(a=function(t){return function(e,n){return!!(null==e?0:e.length)&&t(e,n,0)>-1}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(447),n(610),n(611)],void 0===(a=function(t,e,n){return function(i,a,o){return a==a?n(i,a,o):t(i,e,o)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e,n){for(var i=-1,a=null==t?0:t.length;++i<a;)if(n(e,t[i]))return!0;return!1}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(76),n(5),n(6),n(51),n(2),n(1),n(136),n(45),n(27),n(4),n(9),n(7),n(3),n(28),n(71),n(322),n(407),n(264),n(265),n(408),n(266),n(267),n(268),n(269),n(270),n(271),n(409),n(273),n(272)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E,P){var D=t([],{isEmpty:function(){var t;return a.forEach(this.inputs,l.hitch(this,(function(e){t="radio"==e.type||"checkbox"==e.type||"option"==e.tagName.toLowerCase()?"boolean"==typeof t?t&&!this._checked(e):!this._checked(e):"boolean"==typeof t?t&&this._empty(e.value):this._empty(e.value)}))),t},isChecked:function(){return a.some(this.inputs,l.hitch(this,(function(t){if(this._checked(t))return!0}))),!1},isEmail:function(){return this._email(this.inputs[0].value)},isPhone:function(){return this._phone(this.phoneAreaNode.value,this.phoneDetail1Node.value,this.phoneDetail2Node.value)},isUrl:function(){return this._url(this.inputs[0].value)},isNumber:function(){return this._number(this.inputs[0].value)},isBirthday:function(){return this._monthDigits(this.monthNode.value)&&this._dayDigits(this.dayNode.value)},isDate:function(){return this._yearDigits(this.yearNode.value)&&this._monthDigits(this.monthNode.value)&&this._dayDigits(this.dayNode.value)},isAddress:function(){return!this._empty(this.address1Node.value)&&!this._empty(this.cityNode.value)&&!this._empty(this.stateNode.value)&&this._checked(o(":checked",this.countrySelectNode)[0])&&!this._empty(this.zipNode.value)},_required:function(t){return t.trim().length>0},_empty:function(t){return null==t||""===t},_email:function(t){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},_yearDigits:function(t){return this._digits(t)&&this._range(t,[1,9999])},_monthDigits:function(t){return this._digits(t)&&this._range(t,[1,12])},_dayDigits:function(t){return this._digits(t)&&this._range(t,[1,31])},_digits:function(t){return/^\d+$/.test(t)},_range:function(t,e){return t>=e[0]&&t<=e[1]},_number:function(t){return this._digits(t)&&!isNaN(t)},_minlength:function(t,e){return t.trim().length>=e},_maxlength:function(t,e){return t.trim().length<=e},_exactLength:function(t,e){return t.trim().length==e},_zipcode:function(t){return/^\d{5}-\d{4}$|^\d{5}$/.test(t)},_url:function(t){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},_phone:function(t,e,n){return this._digits(t)&&this._digits(e)&&this._digits(n)&&this._exactLength(t,3)&&this._exactLength(e,3)&&this._exactLength(n,4)},_checked:function(t){return t.checked||t.selected&&!this._empty(t.value)},_checkable:function(t){return/radio|checkbox/i.test(t.type)}}),N=t([i,D],{_onBlur:function(){this.inherited(arguments),this.validateField()},validateField:function(){var t,e,n=[];switch(this.required&&((t=!this.isEmpty())||n.push("This field is required.")),this.validateAsType){case"email":t=this.isEmpty()||this.isEmail(),e="Please enter a valid email address.";break;case"address":t=this.isEmpty()||this.isAddress(),e="Please enter a valid address.";break;case"phone":t=this.isEmpty()||this.isPhone(),e="Please enter a valid phone number.";break;case"url":t=this.isEmpty()||this.isUrl(),e="Please enter a valid url.";break;case"number":t=this.isEmpty()||this.isNumber(),e="Please enter a valid number.";break;case"birthday":t=this.isEmpty()||this.isBirthday(),e="Please enter a valid birthday.";break;case"date":t=this.isEmpty()||this.isDate(),e="Please enter a valid date.";break;case"radiocheckbox":case"select":t=this.isEmpty()||this.isChecked();default:t=!0}return t||n.push(e),this.setFieldValidationStatus(n),n},setFieldValidationStatus:function(t){t.length>0?this.setFieldAsInvalid(t[0]):this.setFieldAsValid()},setFieldAsInvalid:function(t){this.inputs.addClass("invalid").removeClass("valid"),f.set(this.errorsNode,t),p.set(this.errorsNode,"display","block"),this.placeholderNode&&p.set(this.placeholderNode,"display","none")},setFieldAsValid:function(){this.inputs.addClass("valid").removeClass("invalid"),p.set(this.errorsNode,"display","none"),this.placeholderNode&&p.set(this.placeholderNode,"display","block")},resetField:function(){this.inputs.removeClass("valid").removeClass("invalid"),p.set(this.errorsNode,"display","none"),this.placeholderNode&&p.set(this.placeholderNode,"display","block")},_getErrorsNode:function(){var t=o(".invalid-error",this.domNode)[0];return t||(t=h.place('<div class="invalid-error"></div>',this.domNode)),t}}),L=t([e,n,N],{required:!1,inputs:[],errorsNode:null,placeholderNode:null,postCreate:function(){this.inputs=o("input:not([type='hidden']), select option",this.domNode),this.setupPlaceHelperText(),this.errorsNode=this._getErrorsNode()},setupPlaceHelperText:function(){if(this.helper_text){var t=this.placeholderNode?this.placeholderNode:this._createPlaceholderNode();t.innerText=this.helper_text,this.placeholderNode=t}else this.placeholderNode&&h.destroy(this.placeholderNode)},_createPlaceholderNode:function(){return h.place('<div class="helpText"></div>',this.domNode)}}),M=t([L],{templateString:_,validateAsType:"text"}),B=t([L],{templateString:T,validateAsType:"number"}),R=t([L],{templateString:C,validateAsType:"address",postCreate:function(){var t=[{id:"286",name:"Aaland Islands"},{id:"274",name:"Afghanistan"},{id:"2",name:"Albania"},{id:"3",name:"Algeria"},{id:"178",name:"American Samoa"},{id:"4",name:"Andorra"},{id:"5",name:"Angola"},{id:"176",name:"Anguilla"},{id:"175",name:"Antigua And Barbuda"},{id:"6",name:"Argentina"},{id:"7",name:"Armenia"},{id:"179",name:"Aruba"},{id:"8",name:"Australia"},{id:"9",name:"Austria"},{id:"10",name:"Azerbaijan"},{id:"11",name:"Bahamas"},{id:"12",name:"Bahrain"},{id:"13",name:"Bangladesh"},{id:"14",name:"Barbados"},{id:"15",name:"Belarus"},{id:"16",name:"Belgium"},{id:"17",name:"Belize"},{id:"18",name:"Benin"},{id:"19",name:"Bermuda"},{id:"20",name:"Bhutan"},{id:"21",name:"Bolivia"},{id:"22",name:"Bosnia and Herzegovina"},{id:"23",name:"Botswana"},{id:"181",name:"Bouvet Island"},{id:"24",name:"Brazil"},{id:"180",name:"Brunei Darussalam"},{id:"25",name:"Bulgaria"},{id:"26",name:"Burkina Faso"},{id:"27",name:"Burundi"},{id:"28",name:"Cambodia"},{id:"29",name:"Cameroon"},{id:"30",name:"Canada"},{id:"31",name:"Cape Verde"},{id:"32",name:"Cayman Islands"},{id:"33",name:"Central African Republic"},{id:"34",name:"Chad"},{id:"35",name:"Chile"},{id:"36",name:"China"},{id:"185",name:"Christmas Island"},{id:"37",name:"Colombia"},{id:"204",name:"Comoros"},{id:"38",name:"Congo"},{id:"183",name:"Cook Islands"},{id:"268",name:"Costa Rica"},{id:"275",name:"Cote D'Ivoire"},{id:"40",name:"Croatia"},{id:"276",name:"Cuba"},{id:"298",name:"Curacao"},{id:"41",name:"Cyprus"},{id:"42",name:"Czech Republic"},{id:"43",name:"Denmark"},{id:"44",name:"Djibouti"},{id:"289",name:"Dominica"},{id:"187",name:"Dominican Republic"},{id:"233",name:"East Timor"},{id:"45",name:"Ecuador"},{id:"46",name:"Egypt"},{id:"47",name:"El Salvador"},{id:"48",name:"Equatorial Guinea"},{id:"49",name:"Eritrea"},{id:"50",name:"Estonia"},{id:"51",name:"Ethiopia"},{id:"189",name:"Falkland Islands"},{id:"191",name:"Faroe Islands"},{id:"52",name:"Fiji"},{id:"53",name:"Finland"},{id:"54",name:"France"},{id:"193",name:"French Guiana"},{id:"277",name:"French Polynesia"},{id:"56",name:"Gabon"},{id:"57",name:"Gambia"},{id:"58",name:"Georgia"},{id:"59",name:"Germany"},{id:"60",name:"Ghana"},{id:"194",name:"Gibraltar"},{id:"61",name:"Greece"},{id:"195",name:"Greenland"},{id:"192",name:"Grenada"},{id:"196",name:"Guadeloupe"},{id:"62",name:"Guam"},{id:"198",name:"Guatemala"},{id:"270",name:"Guernsey"},{id:"63",name:"Guinea"},{id:"65",name:"Guyana"},{id:"200",name:"Haiti"},{id:"66",name:"Honduras"},{id:"67",name:"Hong Kong"},{id:"68",name:"Hungary"},{id:"69",name:"Iceland"},{id:"70",name:"India"},{id:"71",name:"Indonesia"},{id:"278",name:"Iran"},{id:"279",name:"Iraq"},{id:"74",name:"Ireland"},{id:"75",name:"Israel"},{id:"76",name:"Italy"},{id:"202",name:"Jamaica"},{id:"78",name:"Japan"},{id:"288",name:"Jersey  (Channel Islands)"},{id:"79",name:"Jordan"},{id:"80",name:"Kazakhstan"},{id:"81",name:"Kenya"},{id:"203",name:"Kiribati"},{id:"82",name:"Kuwait"},{id:"83",name:"Kyrgyzstan"},{id:"84",name:"Lao People's Democratic Republic"},{id:"85",name:"Latvia"},{id:"86",name:"Lebanon"},{id:"87",name:"Lesotho"},{id:"88",name:"Liberia"},{id:"281",name:"Libya"},{id:"90",name:"Liechtenstein"},{id:"91",name:"Lithuania"},{id:"92",name:"Luxembourg"},{id:"208",name:"Macau"},{id:"93",name:"Macedonia"},{id:"94",name:"Madagascar"},{id:"95",name:"Malawi"},{id:"96",name:"Malaysia"},{id:"97",name:"Maldives"},{id:"98",name:"Mali"},{id:"99",name:"Malta"},{id:"207",name:"Marshall Islands"},{id:"210",name:"Martinique"},{id:"100",name:"Mauritania"},{id:"212",name:"Mauritius"},{id:"241",name:"Mayotte"},{id:"101",name:"Mexico"},{id:"102",name:"Moldova, Republic of"},{id:"103",name:"Monaco"},{id:"104",name:"Mongolia"},{id:"290",name:"Montenegro"},{id:"294",name:"Montserrat"},{id:"105",name:"Morocco"},{id:"106",name:"Mozambique"},{id:"242",name:"Myanmar"},{id:"107",name:"Namibia"},{id:"108",name:"Nepal"},{id:"109",name:"Netherlands"},{id:"110",name:"Netherlands Antilles"},{id:"213",name:"New Caledonia"},{id:"111",name:"New Zealand"},{id:"112",name:"Nicaragua"},{id:"113",name:"Niger"},{id:"114",name:"Nigeria"},{id:"217",name:"Niue"},{id:"214",name:"Norfolk Island"},{id:"272",name:"North Korea"},{id:"116",name:"Norway"},{id:"117",name:"Oman"},{id:"118",name:"Pakistan"},{id:"222",name:"Palau"},{id:"282",name:"Palestine"},{id:"119",name:"Panama"},{id:"219",name:"Papua New Guinea"},{id:"120",name:"Paraguay"},{id:"121",name:"Peru"},{id:"122",name:"Philippines"},{id:"221",name:"Pitcairn"},{id:"123",name:"Poland"},{id:"124",name:"Portugal"},{id:"126",name:"Qatar"},{id:"315",name:"Republic of Kosovo"},{id:"127",name:"Reunion"},{id:"128",name:"Romania"},{id:"129",name:"Russia"},{id:"130",name:"Rwanda"},{id:"205",name:"Saint Kitts and Nevis"},{id:"206",name:"Saint Lucia"},{id:"237",name:"Saint Vincent and the Grenadines"},{id:"132",name:"Samoa (Independent)"},{id:"227",name:"San Marino"},{id:"133",name:"Saudi Arabia"},{id:"134",name:"Senegal"},{id:"266",name:"Serbia"},{id:"135",name:"Seychelles"},{id:"136",name:"Sierra Leone"},{id:"137",name:"Singapore"},{id:"302",name:"Sint Maarten"},{id:"138",name:"Slovakia"},{id:"139",name:"Slovenia"},{id:"223",name:"Solomon Islands"},{id:"140",name:"Somalia"},{id:"141",name:"South Africa"},{id:"257",name:"South Georgia and the South Sandwich Islands"},{id:"142",name:"South Korea"},{id:"311",name:"South Sudan"},{id:"143",name:"Spain"},{id:"144",name:"Sri Lanka"},{id:"293",name:"Sudan"},{id:"146",name:"Suriname"},{id:"225",name:"Svalbard and Jan Mayen Islands"},{id:"147",name:"Swaziland"},{id:"148",name:"Sweden"},{id:"149",name:"Switzerland"},{id:"285",name:"Syria"},{id:"152",name:"Taiwan"},{id:"260",name:"Tajikistan"},{id:"153",name:"Tanzania"},{id:"154",name:"Thailand"},{id:"155",name:"Togo"},{id:"232",name:"Tonga"},{id:"234",name:"Trinidad and Tobago"},{id:"156",name:"Tunisia"},{id:"157",name:"Turkey"},{id:"287",name:"Turks &amp; Caicos Islands"},{id:"159",name:"Uganda"},{id:"161",name:"Ukraine"},{id:"162",name:"United Arab Emirates"},{id:"262",name:"United Kingdom"},{id:"163",name:"Uruguay"},{id:"165",name:"Uzbekistan"},{id:"239",name:"Vanuatu"},{id:"166",name:"Vatican City State (Holy See)"},{id:"167",name:"Venezuela"},{id:"168",name:"Vietnam"},{id:"169",name:"Virgin Islands (British)"},{id:"238",name:"Virgin Islands (U.S.)"},{id:"188",name:"Western Sahara"},{id:"170",name:"Yemen"},{id:"173",name:"Zambia"},{id:"174",name:"Zimbabwe"}];a.forEach(t,l.hitch(this,(function(t){var e='<option value="'+t.id+'">'+t.name+"</option>";h.place(e,this.countrySelectNode,"last")}))),this.inherited(arguments)}}),F=t([L],{templateString:k,validateAsType:"email",toggleEmailPlaceholder:function(t){t?m.set(this.emailInput,"placeholder","Enter your email"):m.remove(this.emailInput,"placeholder")}}),O=t([L],{templateString:S,validateAsType:"birthday",validateAsGroup:!0,postCreate:function(){this.inherited(arguments),"DD/MM"==this.dateformat&&(h.place(this.dayNode,this.inputsContainer,"first"),h.place(this.monthNode,this.inputsContainer,"last"))}}),U=t([L],{templateString:x,validateAsType:"date",validateAsGroup:!0,postCreate:function(){this.inherited(arguments),"MM/DD/YYYY"==this.dateformat?(h.place(this.monthNode,this.inputsContainer,"first"),h.place(this.yearNode,this.inputsContainer,"last")):"DD/MM/YYYY"===this.dateformat&&(h.place(this.dayNode,this.inputsContainer,"first"),h.place(this.yearNode,this.inputsContainer,"last"))}}),$=t([L],{templateString:I,validateAsType:"phone",validateAsGroup:!0}),H=t([L],{templateString:A,validateAsType:"url"}),V=t([L],{templateString:j,validateAsType:"radiocheckbox",postCreate:function(){a.forEach(this.choices,l.hitch(this,(function(t,e){var n=this.merge_id?this.name+"-"+e:this.name+"-"+this.group_id+"-"+e,i='<li><input id ="'+(n="mc-"+n)+'" type="'+this.type+'" value="'+t.value+'" name="'+this.name;"checkbox"==this.type&&(i+="["+t.value+"]"),i+='" /><label for="'+n+'">'+t.label+"</label></li>",h.place(i,this.choicesContainer,"last")}))),this.inherited(arguments)}}),z=t([L],{templateString:E,validateAsType:"radiocheckbox"}),W=t([e,n],{templateString:w,gdprLabel:"",gdprDescription:"",gdprLegal:"",gdprMCLegal:"",postCreate:function(){this.inherited(arguments),h.place(this.gdprMCLegal,this.gdprMcLegalContainer)}}),q=t([L],{templateString:P,validateAsType:"select",postCreate:function(){var t=[];a.forEach(this.choices,l.hitch(this,(function(e){var n=h.toDom('<option value="'+e.value+'">'+e.label+"</option>");this._empty(e.label)&&t.push(n),h.place(n,this.choicesContainer,"last")}))),t.length>0?m.set(t[0],"selected","selected"):h.place('<option value="" selected="selected"></option>',this.choicesContainer,"first"),this.inherited(arguments)}});return t("SignupForm",[e,n,v],{templateString:y,subscribeUrl:"#",honeypotFieldName:"",fields:[],buttonLabel:"Subscribe",description:"",footer:"",config:{},constructor:function(){this.formIsValid=!1,this.fieldNodes=[]},postMixInProperties:function(){this.fields=this.config.fields,this.footer=this.config.footer,this.description=this.config.description,this.modalVariation=this.config.modalVariation,this.template=this.config.template,this.hasGdprEnabled=this.config.hasGdprEnabled,this.gdprLabel=this.config.gdprLabel,this.gdprDescription=this.config.gdprDescription,this.gdprLegal=this.config.gdprLegal,this.gdprMCLegal=h.toDom("<span>"+this.config.gdprMCLegal+"</span>"),this.config.buttonLabel&&(this.buttonLabel=this.config.buttonLabel)},postCreate:function(){this.hasGdprEnabled&&(this.gdprContainer=new W({gdprLabel:this.gdprLabel,gdprDescription:this.gdprDescription,gdprLegal:this.gdprLegal,gdprMCLegal:this.gdprMCLegal}),"modal"!==this.modalVariation||1!==this.template&&2!==this.template||this.gdprContainer.placeAt(this.formFieldsContainer,"after")),this.addFields(),this.addHoneypot(),this.applyStrictContentClasses(),f.set(this.footerContainer,this.footer),f.set(this.descriptionContainer,this.description);var t=this;r(this.formNode,"submit",(function(e){if(e.stopPropagation(),e.preventDefault(),t._validateForm(),t.formIsValid){if(t.config.captcha){var n=t._getCaptchaForm();window.open(n),p.set(o(".mc-closeModal",this.modalClose)[0],"display","none"),p.set(o(".mc-modal",this.mcModal)[0],"display","none"),p.set(o(".mc-modal-bg",this.modalOverlay)[0],"display","none")}else d.get(t._getJsonPostUrl(),{jsonp:"c",query:c.toQuery(t.formNode)}).then((function(e){"error"===e.result?t._handleErrorResponse(e):(t._handleSuccessResponse(e),e.webEngagementCookieValue&&t.setCookie("mcListMember",e.webEngagementCookieValue,7889238e3)),t.emit("resizeFrame",{})}));t.setCookieOnSubscribe()}else t.emit("resizeFrame",{})})),this.updateBadge()},applyStrictContentClasses:function(){if(this.isStrictContent()){var t=this.getStrictContentContainerClasses();g.add(this.formContentContainer,t)}},isStrictContent:function(){return Boolean(this.config.styles&&this.config.styles.baseFontSize)},getStrictContentContainerClasses:function(){return this.isStrictContent()?"strictContent "+this.config.styles.baseFontSize:""},setCookie:function(t,e,n){var i=n||7889238e3,a=new Date,o=new Date(a.getTime()+i);document.cookie=t+"="+e+";expires="+o.toUTCString()+";path=/"},setCookieOnSubscribe:function(){var t=new Date,e=new Date(t.getTime()+7889238e3);document.cookie="MCPopupSubscribed=yes;expires="+e.toUTCString()+";path=/"},updateBadge:function(){var t="1.0"!==this.config.version&&!!this.config.useRewards&&!!this.config.rewardsUrl,e=this.textBadge&&this.textBadgefixed;t&&!e?(this.textBadgefixed=new b({rewardsUrl:this.config.rewardsUrl}).placeAt(this.fixedBadge,"last"),this.textBadge=new b({rewardsUrl:this.config.rewardsUrl}).placeAt(this.formContentContainer,"after")):!t&&e&&(this.textBadgefixed.destroyRecursive(!1),this.textBadge.destroyRecursive(!1),this.textBadgefixed=null,this.textBadge=null)},addFields:function(){this.fieldNodes.length&&(a.forEach(this.fieldNodes,(function(t){t.destroy()})),this.fieldNodes=[],h.empty(this.formFieldsContainer),this.hasGdprEnabled&&h.empty(this.gdprContainer.gdprFieldsContainer)),a.forEach(this.fields,l.hitch(this,(function(t){var e=this._createField(t);this.hasGdprEnabled&&t.marketing_preference_id?e.placeAt(this.gdprContainer.gdprFieldsContainer):e.placeAt(this.formFieldsContainer),e.startup()})))},getEmailField:function(){var t=a.filter(this.fieldNodes,(function(t){return"email"===t.type}));return t.length?t[0]:null},addHoneypot:function(){var t=h.toDom('<div style="position:absolute;left:-5000px;" aria-hidden="true"><input type="text" name="'+this.honeypotFieldName+'" tabindex="-1" value=""></div>');"fixed"===this.modalVariation&&(t=h.toDom('<div style="position:absolute;top:-5000px;width:0" aria-hidden="true"><input type="text" name="'+this.honeypotFieldName+'" tabindex="-1" value=""></div>')),h.place(t,this.formFieldsContainer,"last")},_validateForm:function(){var t=[];a.forEach(this.fieldNodes,(function(e){var n=e.validateField();n.length>0&&t.push(n)})),this.formIsValid=!(t.length>0)},_createField:function(t){var e;switch(t.type){case"email":e=new F(t);break;case"address":e=new R(t);break;case"birthday":e=new O(t);break;case"date":e=new U(t);break;case"phone":e="US"==t.phoneformat?new $(t):new M(t);break;case"number":e=new B(t);break;case"select":case"dropdown":e=new q(t);break;case"radio":case"checkbox":e=t.marketing_preference_id?new z(t):new V(t);break;case"url":case"image":e=new H(t);break;case"text":default:e=new M(t)}return this.fieldNodes.push(e),e},getOrCreateFormSuccessNode:function(){var t=this.getFormSuccessNode();if(!t){var e=("popup-signup-success "+this.getStrictContentContainerClasses()).trim();t=h.place('<div class="'+e+'"></div>',this.formResponseMessages)}return t},setFormSuccessMessage:function(t){var e=this.getOrCreateFormSuccessNode();f.set(e,t)},getFormSuccessNode:function(){return o(".popup-signup-success",this.formResponseMessages)[0]},_handleSuccessResponse:function(t){var e=this.getOrCreateFormSuccessNode(),n="",i=t.type;n="custom"!==i?"<span style='font-size: 24px;'><span style='font-family:arial,helvetica neue,helvetica,sans-serif;'>"+t.msg+"</span></span>":t.msg,this.setFormSuccessMessage(n);var s=o(".flash-errors",this.formResponseMessages)[0];if(s&&p.set(s,"display","none"),this.formNode.reset(),a.forEach(this.fieldNodes,(function(t){t.resetField()})),p.set(this.formContentContainer,"display","none"),p.set(this.formImageContainer,"display","none"),"confirmation"!==i){var r=o(".mc-closeModal",this.modalClose)[0],d=o(".mc-modal",this.mcModal)[0],c=o(".mc-modal-bg",this.modalOverlay)[0];setTimeout(l.hitch(this,(function(){p.set(e,"display","none"),p.set(r,"display","none"),p.set(d,"display","none"),p.set(c,"display","none")})),3e3)}},_handleErrorResponse:function(t){var e=this.getFormSuccessNode();if(e&&p.set(e,"display","none"),t.msg){var n=o(".flash-errors",this.formResponseMessages)[0];n||(n=h.place('<div class="flash-errors"></div>',this.formResponseMessages)),f.set(n,t.msg),"absolute"===p.getComputedStyle(this.formImageContainer).position&&p.set(this.formImageContainer,{top:u.getMarginBox(n).h+"px"})}if(t.errors)if(this.hasGdprEnabled&&"gdpr_error"===t.type){var i="<div class='invalid-error'>"+t.errors.msg+"</div>";h.place(i,this.gdprContainer.gdprFormResponseMessages,"only")}else a.forEach(this.fieldNodes,(function(e){t.errors.hasOwnProperty(e.merge_id)?e.setFieldAsInvalid(t.errors[e.merge_id]):e.setFieldAsValid()}))},_getJsonPostUrl:function(){var t=this.subscribeUrl;return t=t.replace("/form-post?u=","/form-post-json?u=")},_getCaptchaForm:function(){var t=this.subscribeUrl.replace("/form-post?u=","/post?u="),e=t.substring(t.indexOf("?")+1,t.length),n=t.split("?")[0],i=s.queryToObject(e),a=c.toObject(this.formNode),o=Object.assign(i,a);return n+"?"+s.objectToQuery(o)},toHTML:function(){return this.domNode.outerHTML}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(406),n(7)],void 0===(a=function(t,e,n,i,a){return t([e,n],{templateString:i,rewardsUrl:"mailchimp.com",postCreate:function(){this.inherited(arguments),a.set(this.monkeyRewardsLink,"href",this.rewardsUrl)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(18),n(38),n(228),n(449),n(462),n(153),n(16),n(21),n(589),n(17),n(199),n(8),n(56),n(561)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){var f=t(null,{constructor:function(t){this.type=t.type,this.id=t.id,this.name=t.name,this.value=t.value}}),v=t(null,{constructor:function(t){this.mustBePruned=t.must_be_pruned,this.mustUndoImports=t.must_undo_imports,this.mustReconfirm=t.must_reconfirm,this.mustReconfirmExternal=t.must_reconfirm_external,this.hasRecentReconfirmation=t.has_recent_reconfirmation,this.reconfirmCount=t.reconfirm_count,this.hasDraftReconfirmation=t.has_draft_reconfirmation},hasBlockingIssues:function(){return o([this.mustBePruned,this.mustUndoImports,this.mustReconfirmExternal])}}),b=t(null,{constructor:function(t){this.listId=t.list_id,this.name=t.name,this.createdAt=new Date(t.created_at),this.isDeleted=!0===t.is_deleted,this.deletedAt=new Date(t.deleted_at),this.isDisabled=!0===t.is_disabled,this.defaults={fromName:t.defaults.from_name,fromEmail:t.defaults.from_email,fromEmailIsVerified:t.defaults.from_email_verified,subject:t.defaults.subject},this.mergeFields=t.merge_fields,this.complianceStatus=new v(t.compliance_status)}}),y=t([f],{constructor:function(t){this.count=t.count}});f.createFromProperties=function(t){return null===t?null:"pasted"===t.type?new y(t):new f(t)};var w=t(null,{constructor:function(t){this.count=null,this.recipientsAreReady=t.recipients_are_ready,this.segment=f.createFromProperties(t.segment),this.personalizeToTag=t.content.to_email||"",t.list&&(this.count="send_count"in t&&this.recipientsAreReady?t.send_count:null,this.listId=t.list.list_id,this.listName=t.list.name)},needsRecipientCount:function(){}});w.requestRecipientCount=function(t){return w._countRequest||(w._countRequest=t.getRecipientCountRequest(),w._countRequest.then(w._clearCountRequest)),w._countRequest},w.cancelRecipientCount=function(){w._countRequest&&!w._countRequest.isFulfilled()&&(w._countRequest.cancel(),w._clearCountRequest())},w._clearCountRequest=function(){w._countRequest=null},w.getRecipientsPatchFromData=function(t){var n={};return"listId"in t&&(n=e.mixin({},n,{list_id:t.listId})),"segment"in t&&(n=e.mixin({},n,{segment:t.segment})),"personalizeToTag"in t&&(n=e.mixin({},n,{content:{to_email:t.personalizeToTag}})),n};var _=t(null,{constructor:function(t){this.shouldAutopost=t.should_autopost,this.content=t.content,this.fileData=t.file_data?t.file_data.map((function(t){return{selectedVersionUrl:t.selected_version_url,fileData:t.file_item?new h.FileItem(t.file_item):null}})):null}}),C=t(null,{constructor:function(t){this.pageIds=t.foreign_profile_id?[t.foreign_profile_id]:[],this.content=t.content,this.fileData=t.file_data?t.file_data.map((function(t){return{selectedVersionUrl:t.selected_version_url,fileData:t.file_item?new h.FileItem(t.file_item):null}})):null,this.shouldAutopost=t.should_autopost}});C.getPatchFromData=function(t){var n={},i={platform:"instagram"};return"content"in t&&(i.message=t.content),"fileData"in t&&(i.file_data=t.fileData.map((function(t){return{id:t.id,url:t.selected_version_url}}))),"pageIds"in t&&(i.foreign_profile_id=t.pageIds[0]),"shouldAutopost"in t&&(i.should_autopost=t.shouldAutopost),n=e.mixin({},n,{social:e.mixin({},n.social,i)})},_.getPatchFromData=function(t){var n={};"shouldAutopost"in t&&(n=e.mixin({},n,{content:{auto_tweet:t.shouldAutopost}}));var i={};return"content"in t&&(i.auto_tweet_content=t.content),"fileData"in t&&(i.auto_tweet_file_data=t.fileData),n=e.mixin({},n,{social:e.mixin({},n.social,i)})};var k=t(null,{constructor:function(t){this.pageIds=t.page_ids,this.content=t.content,this.fileData=t.file_data?t.file_data.map((function(t){return{selectedVersionUrl:t.selected_version_url,fileData:t.file_item?new h.FileItem(t.file_item):null}})):null,this.shouldAutopost=!(!this.pageIds||!this.content)}});k.getPatchFromData=function(t){var n={},i={platform:"facebook",content:{}};return"content"in t&&(i.content.message=t.content),"fileData"in t&&(i.content.file_data=t.fileData.map((function(t){return{id:t.id,url:t.selected_version_url}}))),"pageIds"in t&&t.pageIds.length>0&&(i.foreign_profile_id=t.pageIds[0]),"shouldAutopost"in t&&(i.should_autopost=t.shouldAutopost),n=e.mixin({},n,{social:e.mixin({},n.social,i)})};var S=t(null,{constructor:function(t){this.twitter=new _(t.social.twitter),this.facebook=new k(t.social.facebook),this.instagram=new C(t.social.instagram)}});S.getSocialPatchFromData=function(t){var n={};"twitter"in t&&(n=e.mixin({},n,_.getPatchFromData(t.twitter)));var i={};"facebook"in t&&(i=k.getPatchFromData(t.facebook),n=e.mixin({},n,i));var a={};return"instagram"in t&&(a=C.getPatchFromData(t.instagram),n=e.mixin({},n,a)),n};var x=t(null,{constructor:function(t){this.fromName=t.content.from_name,this.fromEmail=t.content.from_email,this.isVerifiedEmail=t.content.is_verified_email}}),I=t(null,{constructor:function(t){this.subject=t.content.subject,this.previewText=t.content.preview_text,this.shortUrlLength=t.content.short_url.length}}),T=t(null,{constructor:function(t){t&&(this.useConversation=t.content.use_conversation,this.handleCampaignRepliesWithInbox=t.content.handle_campaign_replies_with_inbox,this.convertVideo=t.content.convert_video,this.trackOpens=t.content.track_opens,this.trackClicksHTML=t.content.track_clicks_html,this.trackClicksText=t.content.track_clicks_text,this.analytics=t.content.analytics,this.analyticsTag=t.content.analytics_tag,this.ecomm360=t.content.ecomm360,this.clicktale=t.content.clicktale,this.clicktaleTag=t.content.clicktale_tag,this.gooal=t.content.gooal,this.googleEnabled=t.google_enabled,this.isGoalAvailable=t.is_goal_available,this.isGoalEnabled=t.is_goal_enabled,this.convoNotifierCount=t.convo_notifier_account,this.crmSfExists=t.crm.salesforce,this.crmJavExists=t.crm.capsule,t.crm.salesforce&&(this.crmSfCreateNotes=t.crm.salesforce.create_notes,this.crmSfCreateCampaign=t.crm.salesforce.create_campaign),t.crm.capsule&&(this.crmJavCreateNotes=t.crm.capsule.create_notes))}}),A=t(null,{constructor:function(t){t.promotion&&(this.promotion=t.promotion,this.promotionIsEnabled=t.promotion.is_enabled,this.promotionIsComplete=t.promotion.is_complete)}}),j=t(null,{constructor:function(t){this.nonaccountRecipients=t?t.nonaccount_recipients:[],this.accountRecipients=t?t.account_recipients:[],this.recipients=t?t.recipients:[]},getDefaultTestEmails:function(){return this.nonaccountRecipients.join(", ")}}),E=t(null,{constructor:function(t){this.rootDomain=t.campaign_url.root_domain,this.campaignToken=t.campaign_url.campaign_token,this.brandToken=t.campaign_url.brand_token,this.mostRecentArchiveMapping=t.campaign_url.mostRecentArchiveMapping,this.mostRecentArchiveMappingCanEdit=t.campaign_url.mostRecentArchiveMappingCanEdit,this.canCustomizeArchiveUrl=t.campaign_url.canCustomizeArchiveUrl,this.brands=t.campaign_url.brands,this.url=t.campaign_url.url,this.isDuplicateCampaignUrl=t.campaign_url.is_duplicate}}),P=t(null,{constructor:function(t){var e=t.compliance_status;this.accountReviewIsRequired=e.account_review_is_required,this.exceedsSingleCampaignLimit=e.exceeds_single_campaign_limit,this.exceedsDailyCampaignLimit=e.exceeds_daily_campaign_limit,this.exceedsAvailableCredits=e.exceeds_available_credits,this.creditsLeft=e.credits_left,this.minimumPackage=e.minimum_package,this.egpPredictionWarning=t.egp_prediction_warning},hasBlockingIssues:function(){return o([this.exceedsSingleCampaignLimit,this.exceedsDailyCampaignLimit,this.exceedsAvailableCredits,this.egpPredictionWarning])}}),D=t(null,{constructor:function(t){this.id=t.id,this.name=t.name}}),N=t(null,{constructor:function(t){t&&(this.status=t.status,this.value=t.value,this.hasSeenPreviewText=t.hasSeenPreviewText)}}),L={patchById:function(t,e){var i=p.toUrl("/campaigns/api/patch",{campaign_id:t});return n.post(i,{handleAs:"json",data:{patch:JSON.stringify(e)}}).then(this.createFromProperties.bind(this),r.throwError)},createFromProperties:function(t){return new B(t)},CampaignRecipients:w,getAdminsForUser:function(t){return n.post(p.toUrl("/campaigns/users-to-notify"),{handleAs:"json"}).then((function(t){return t&&t.map((function(t){return new D(t)}))}))},recordPreviewTextGenClicked:function(t){return n.post(p.toUrl("/campaigns/preview-text-gen-clicked",{id:t}),{handleAs:"json"}).then((function(t){return t}))},recordPreviewTextDismissal:function(t){return n.post(p.toUrl("/campaigns/preview-text-dismissed",{id:t}),{handleAs:"json"}).then((function(t){return t}))}},M=function(t,e){return t&&!u.hasRole(e)?{canResolve:!1,message:"admin"===e?"An admin must resolve this.":"A manager or admin must resolve this."}:{canResolve:!0}},B=t(null,{constructor:function(t){this._timestamp=Date.now(),this.campaignId=t.campaign_id,this.createdAt=t.created_at?m.dateTransform(t.created_at):null,this.status=t.status,this.name=t.content.title||t.content.subject,this.screenshotUrl=t.screenshot_url,this.hasBrokenBlocks=t.has_broken_blocks,this.hasDefaultBlockContent=t.has_default_block_content,this.hasCreativeAssistantTemplate=t.has_creative_assistant_template,this.showCreativeAssistantPaywallExperiment=t.show_creative_assistant_paywall_experiment,this.presendChecks=new g(t.presend_checks),this.renderedHtml=t.rendered_html,this.isContentReady=t.is_content_ready,this.useAutoFooter=t.use_auto_footer,this.isHtmlNewerThanPlainText=t.is_html_newer_than_plain_text,this.plainTextLastUpdatedAt=t.plain_text_last_updated_at,this.hasRewards=t.has_rewards,this.fromDomain=t.from_domain,this.testsSent=t.tests_sent,this.isCanceled=t.is_canceled,this.canceledAt=t.canceled_at?m.dateTransform(t.canceled_at):null,this.sendTime=t.send_time?m.dateTransform(t.send_time):null,this.deliveryPercentage=t.delivery_percentage,this.notificationRecipients=t.notification_recipients,this.canTimewarp=t.can_timewarp,this.egpPredictionWarning=t.egp_prediction_warning,t.egp_prediction_warning&&t.egp_prediction&&(this.egpPrediction={actionRequired:t.egp_prediction.action_required,initialReason:t.egp_prediction.initial_reason,userSignedName:t.egp_prediction.user_signed_name}),this.complianceStatus=new P(t),this.list=t.list?new b(t.list):null,this.social=new S(t),this.recipients=new w(t),this.from=new x(t),this.content=new I(t),this.promotion=new A(t),this.recentCampaigns=t.recent_campaigns,this.lastTestSend=new j(t.last_test_send),this.campaignUrl=new E(t),this.settingsAndTracking=new T(t),this.previewTextGenerator=new N(t.preview_text_generator),t.list&&(this.fromDefaultName=t.list.defaults.from_name,this.fromDefaultEmail=t.list.defaults.from_email,this.fromDefaultVerifiedEmail=t.list.defaults.from_email_verified,this.fromDefaultSubject=t.list.defaults.subject),this.errorState=function(t){var e,n={scope:null,descriptionShort:null,descriptionLong:null,title:null,resolution:{action:{title:null,attr:null},roleNeeded:"author",canResolve:null,cantResolveMessage:null}},a=t.list;if(t&&t.egpPredictionWarning)return n.scope="list","no_send"===t.egpPrediction.actionRequired?(n.descriptionShort="Mailchimp's abuse prevention system has identified issues with the addresses on "+i.encode(t.list.name)+".",n.descriptionLong=["Mailchimp's abuse prevention system, Omnivore, has identified some issues with the addresses on <strong>"+i.encode(t.list.name)+"</strong> that have never been sent to through our system.",'Omnivore has indicated that these addresses may cause high <a href="https://mailchimp.com/help/about-abuse-complaints/" target="_blank">abuse complaints</a> or <a href="https://mailchimp.com/help/soft-vs-hard-bounces/" target="_blank">bounce rates</a>, and could contain <a href="https://mailchimp.com/help/about-spamtraps/" target="_blank">spamtrap addresses</a>. These are serious issues when it comes to email marketing and delivery.  The issues with these addresses will need to be resolved before the list can be sent to.','Remember that all lists used in your Mailchimp account must be current and up-to-date, and comply with our <a href="http://mailchimp.com/legal/" target="_blank">Terms of Use and Acceptable Use Policies</a>. Our Knowledge Base has further information about <a href="https://mailchimp.com/help/examples-of-compliant-and-non-compliant-lists/" target="_blank">supported lists</a> and <a href="https://mailchimp.com/help/requirements-and-best-practices-for-lists/" target="_blank">best practices</a>.'],n.resolution.action.attr="data-dojo-attach-event='click: openReconfirmDialog'",n.resolution.action.title="Resolve",n.resolution.roleNeeded="manager",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):(n.descriptionShort="Mailchimp's abuse prevention system has identified issues with your recent import.",t.egpPrediction.initialReason,n.descriptionLong=['Mailchimp\'s abuse prevention system, Omnivore, automatically scanned your recent import. Omnivore flagged the list for having a large number of addresses that may cause complaints, high bounce rates, or blocklistings. <a href="http://mailchimp.com/resources/research" target="_blank">Our research</a> shows that this can lead to increased abuse and complaint rates. This is known as a \'stale\' list. Stale lists are often older lists, and may not have been sent to in some time, are collected through supported methods, and/or improperly managed for bounces and unsubscribe requests.',"Internet Service Providers and email services set limits on the number of emails that report abuse, send to spam traps, and generate high bounce rates. When those limits are exceeded, the sender of the emails can be blocked from further sending."],n.resolution.action.attr="data-dojo-attach-event='click: openBounceWarningDialog'",n.resolution.action.title="Resolve",n.resolution.roleNeeded="manager",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n);if(!u.canSend&&u.whyNotSend)return n.title=[u.whyNotSendTitle],n.descriptionLong=[u.whyNotSend],n.descriptionShort=n.descriptionLong[0],n.scope="account",u.isPaused&&(n.resolution.roleNeeded="admin",n.resolution.action={attr:null,title:null}),e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n;if(a&&a.complianceStatus&&a.complianceStatus.mustReconfirm&&!t.isReconfirm){var o=a.complianceStatus.reconfirmCount;return n.scope="list",n.title="Reconfirmation status",n.descriptionLong=[o+" email "+(1===o?"address has":"addresses have")+" been removed for reconfirmation."],n.descriptionShort=n.descriptionLong[0],n.resolution.action={},n.resolution.action.attr='href="'+p.toUrl("/campaigns/show-or-create",{type:"reconfirm",list_id:a.listId})+'"',a.complianceStatus.hasDraftReconfirmation?(n.descriptionLong[1]="A <a href="+p.toUrl("campaigns/show-or-create",{type:"reconfirm",list_id:a.listId})+">reconfirmation campaign</a> for those addresses has been created but not sent yet.",n.resolution.action.title="show reconfirmation campaign"):(n.descriptionLong[1]="You can send this campaign now or <a href="+p.toUrl("campaigns/show-or-create",{type:"reconfirm",list_id:a.listId})+">create a reconfirmation campaign</a> to give the removed addresses a chance to opt-in before sending.",n.resolution.action.title="create a reconfirmation campaign"),n.resolution.roleNeeded="author",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n}return a&&a.complianceStatus&&a.complianceStatus.mustReconfirmExternal?(n.title="Sending Disabled",n.descriptionLong=["You must reconfirm this list before you can send to it."],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:'href="'+p.toUrl("/lists/members/reconfirm-external",{id:a.listId})+'"',title:"export and remove addresses"},n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):a&&a.complianceStatus&&a.complianceStatus.mustBePruned?(n.title="Sending Disabled",n.descriptionLong=["You must prune unengaged subscribers from this list before you can send to it."],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:'href="'+p.toUrl("/lists/members/prune",{id:t.recipients.listId})+'"',title:"resolve"},n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):a&&a.isDisabled?(n.title="Sending Disabled",n.descriptionLong=["The list you are sending to is disabled."],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:'href="'+p.toUrl("/account")+'"',title:"resolve"},n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):a&&a.complianceStatus&&a.complianceStatus.mustUndoImports?(n.title="Sending Disabled",n.descriptionLong=["Before you can send to this list, you'll need to undo some recent list imports."],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:'href="'+p.toUrl("/account")+'"',title:"resolve"},n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):t&&t.complianceStatus.exceedsAvailableCredits?(n.title="Not Enough Credits",u.isPayAsYouGo?(n.descriptionLong=["Your account does not have enough email credits to send this campaign. You would need to purchase <b>"+t.complianceStatus.creditsLeft+" credit"+(t.complianceStatus.creditsLeft-1?"s":"")+"</b> in order to send it."],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:'href="'+p.toUrl("/account/billing/plans/",{credits:t.complianceStatus.creditsLeft})+'"',title:"resolve"}):(n.descriptionLong=["This exceeds the sending limit for your free account."],n.descriptionShort=[n.descriptionLong[0]],n.resolution.roleNeeded="manager",n.resolution.action={attr:"data-dojo-attach-event='click: openPaywallWithSendTimeLimitGATracking'",title:"resolve"}),n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):t&&t.complianceStatus&&t.complianceStatus.exceedsSingleCampaignLimit?(n.title="Free Account Limit",n.descriptionLong=["Free accounts are not allowed to send to more than <b>"+u.freeLimit+"</b> recipients in a single campaign."],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:'href="'+p.toUrl("/account/billing/plans")+'"',title:"resolve"},n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):t&&t.complianceStatus&&t.complianceStatus.exceedsDailyCampaignLimit?(n.title="Free Account Limit",n.descriptionLong=["Free accounts are not allowed to send to more than <b>"+u.freeLimit+"</b> recipients in a single day.","There have been <b>"+u.sentToday+"</b> sends in the past 24 hours. This send includes <b>"+t.recipients.count+"</b>, which would exceed the limit by <b>"+(u.sentToday+t.recipients.count-u.freeLimit)+"</b>.</p>"],n.descriptionShort=n.descriptionLong[0],n.resolution.roleNeeded="manager",n.resolution.action={attr:"data-dojo-attach-event='click: openPaywall'",title:"resolve"},n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):t&&0===t.recipients.count?(n.descriptionLong=["To send, you need at least 1 subscribed contact in your audience."],n.descriptionShort=n.descriptionLong[0],n.scope="list",e=M(n.resolution.action,n.resolution.roleNeeded),n.resolution.canResolve=e.canResolve,n.resolution.cantResolveMessage=e.canResolve?null:e.message,n):null}(this)},patch:function(t){t||(t={});var n={};if(t.name&&(n.content=e.mixin({},n.content,{title:t.name})),t.from&&(n.content=e.mixin({},n.content,{from_name:t.from.fromName,from_email:t.from.fromEmail})),t.content&&(t.content.subject||t.content.previewText)&&(n.content=e.mixin({},n.content,{subject:t.content.subject,preview_text:t.content.previewText})),t.recipients){var i=w.getRecipientsPatchFromData(t.recipients);n=e.mixin({},n,i),"listId"in t.recipients&&(n=e.mixin({},n,{list_id:t.recipients.listId})),"segment"in t.recipients&&(n=e.mixin({},n,{segment:t.recipients.segment})),"personalizeToTag"in t.recipients&&(n=e.mixin({},n,{content:{to_email:t.recipients.personalizeToTag}}))}if(t.campaign_url&&(void 0!==t.campaign_url.campaign_token||t.campaign_url.brand_token)&&(n=e.mixin({},n,{campaign_token:t.campaign_url.campaign_token},t.campaign_url.brand_token?{list:{brand:{brand_token:t.campaign_url.brand_token}}}:{})),t.social){var a=S.getSocialPatchFromData(t.social);n=e.mixin({},n,a)}return t.settingsAndTracking&&(n.content=e.mixin({},n.content,{use_conversation:t.settingsAndTracking.useConversation,convert_video:t.settingsAndTracking.convertVideo,track_opens:t.settingsAndTracking.trackOpens,track_clicks_html:t.settingsAndTracking.trackClicksHTML,track_clicks_text:t.settingsAndTracking.trackClicksText,analytics:t.settingsAndTracking.analytics,analytics_tag:t.settingsAndTracking.analyticsTag,ecomm360:t.settingsAndTracking.ecomm360,clicktale:t.settingsAndTracking.clicktale,clicktale_tag:t.settingsAndTracking.clicktaleTag,gooal:t.settingsAndTracking.gooal}),n.crm=e.mixin({},n.crm,{salesforce:{create_notes:t.settingsAndTracking.crmSfCreateNotes,create_campaign:t.settingsAndTracking.crmSfCreateCampaign},capsule:{create_notes:t.settingsAndTracking.crmJavCreateNotes}})),L.patchById(this.campaignId,n)},getRecipientCountRequest:function(){var t=this,e=new s((function(){return t.patch({}).then((function(t){if(t.recipients.needsRecipientCount())return s.RETRY}))}));return e.begin(),e.getPromise()}});return L}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(7),n(43),n(6),n(22),n(1),n(45),n(9),n(51),n(18),n(14),n(29),n(68),n(69),n(15),n(8),n(48),n(311)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){var g=function(t){n(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()}))},f={initializeListWidgets:function(t){e((function(){var e=d.byId(t);if(!e)throw new Error("Conversation List is not in the page");var i=d.byId("action-menu");i&&(n("#delete-action").on("click",(function(t){t.stopPropagation(),t.preventDefault(),f.confirmDeletion(e)})),n("#mark-action").on("click",(function(t){t.stopPropagation(),t.preventDefault(),i.closeDropDown(),f.mark(e,!0)})),n("#unmark-action").on("click",(function(t){t.stopPropagation(),t.preventDefault(),i.closeDropDown(),f.mark(e,!1)})));var a={target:e.id,filters:[{label:"Status",key:"status",type:"select",options:{read:"Read",unread:"Unread"}},{label:"Include out of office replies",key:"include_filtered",type:"checkbox"}]},o=new u(a);n("#filter").append(o.domNode);var s=new h(a);n("#filter-message").append(s.domNode)}))},confirmDeletion:function(e){var i=new c({title:"Are you sure?",onHide:function(){i.destroyRecursive()},onDownloadEnd:function(){g(i),n("form",i.domNode).on("submit",(function(n){n.stopPropagation(),n.preventDefault();var a=o.toObject(this),s=0;for(var r in a)a.hasOwnProperty(r)&&0==r.indexOf("id[")&&s++;l.post(t.get(this,"action"),{data:o.toObject(this)}).then((function(){i.hide(),e.render(),p.toast(s+" conversation"+(1!=s?"s":"")+" successfully deleted")}),(function(){i.hide()}))}))}});i.setHref(m.toUrl("conversations/confirm-delete",{"id[]":e.getSelection()})),i.show()},notificationSettings:function(e){var a=new i,s=new c({title:"Notification Settings",onHide:function(){s.destroyRecursive()},onDownloadEnd:function(){g(s),n("form",s.domNode).on("submit",(function(e){e.stopPropagation(),e.preventDefault(),l.post(t.get(this,"action"),{handleAs:"json",data:o.toObject(this)}).then((function(t){a.resolve(t),s.hide()}),(function(t){a.reject(t),s.hide()}))}))}});return s.setHref(m.toUrl("conversations/notification-settings",e)),s.show(),a},mark:function(t,e){void 0!==e&&null!=e||(e=!0),l.post(m.toUrl("conversations/mark"),{data:{"id[]":t.getSelection(),read:e}}).then((function(){t.render()}))}};return f}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12)],void 0===(a=function(t,e){return t([e],{__cancel:function(){throw new Error("cancel has not been implemented by the "+this.slatName+" widget")},__save:function(){throw new Error("save has not been implemented by the "+this.slatName+" widget")},__back:function(){throw new Error("back has not been implemented by the "+this.slatName+" widget")},onLoaded:function(){},onDone:function(t){},onDoneWithError:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(14),n(8),n(257)],void 0===(a=function(t,e,n){return{clientId:null,agencyId:null,loginId:null,showRemoveAccountConfirmation:function(e){this.clientId=e,t.byId("remove-account-dialog").show()},doRemoveAccount:function(){window.location=e.toUrl("/account/clients/remove-account",{client_id:this.clientId})},showRemoveUserConfirmation:function(e,n){this.clientId=e,this.loginId=n,t.byId("remove-user-dialog").show()},doRemoveUser:function(){window.location=e.toUrl("/account/clients/revoke-user",{client_id:this.clientId,login_id:this.loginId})},showRemoveAgencyDialog:function(e){this.agencyId=e,t.byId("remove-agency-account-dialog").show()},doRemoveAgencyAccount:function(){var t=n.prefixPath("/account/users/remove-account");window.location=e.toUrl(t,{agency_id:this.agencyId})},showRemoveAgencyUserDialog:function(e,n){this.agencyId=e,this.loginId=n,t.byId("remove-agency-user-dialog").show()},doRemoveAgencyUser:function(){var t=n.prefixPath("/account/users/revoke-user");window.location=e.toUrl(t,{agency_id:this.agencyId,login_id:this.loginId})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var a,o;a=[n(166),n(42),n(188)],void 0===(o=function(t,e,n){t.provide("mojo.peaches");var a=["#cfbecd","#b79db5","#9f7d9c","#fbd4b4","#f69343","#ffeebf","#fede88"];mojo.peaches.OverallUnsubscribeReasons=function(e,n,a,o){this.elementId=e,this.dataProviderUrl=n,this.userId=a,this.legendId=o;var s=this;t.xhrGet({url:this.dataProviderUrl,content:{user_id:this.userId},handleAs:"json",load:function(e){var n=[],a=e.all_time;for(var o in"ninety-day-legend"===s.legendId?a=e.last_90_days:"thirty-day-legend"===s.legendId&&(a=e.last_30_days),a){var r=a[o];switch(o){case"":o="Unspecified";break;case"NORMAL":o="No longer interested";break;case"NOSIGNUP":o="Did not sign up";break;case"SPAM":o="Spammy Content";break;case"OTHER":o="Other";break;case"INAPPROPRIATE":o="Inappropriate";break;case"BYADMIN":o="Unsub by Admin"}var l={type:o,value:r};n.push(l)}var d=t.byId(s.legendId);d.innerHTML="";var c=-1;n.forEach((function(e,n){var i='<div class="size1of1 lastUnit flex small-meta nowrap"><span style="flex: 0 0 85%"><span class="swatch c-overallUnsubs_swatch c-swatch--'+ ++c+'"></span><span>'+e.type+'</span></span><span class="fwb">'+(100*e.value).toFixed(1)+"%</span></div>";t.place(i,d,"last")}));var u=[];for(i=0;i<n.length;i++)u.push(n[i].value);if(0===u[0]&&0===u[1]&&0===u[2]&&0===u[3]&&0===u[4]&&0===u[5]){s.elementId.innerHTML="";t.place('<div class="no-data alignc"><img role="presentation" src="/css/icons/no-data/goose-egg.svg" class="icon"><h2>Goose egg. There\'s no information available.</h2></div>',s.elementId,"only")}else s.elementId.innerHTML="",s.renderData(n)}})},mojo.peaches.OverallUnsubscribeReasons.prototype.renderData=function(t){AmCharts.makeChart(this.elementId,{type:"pie",theme:"light",dataProvider:t,titleField:"type",valueField:"value",labelRadius:5,colors:a,marginBottom:0,marginLeft:0,marginTop:0,radius:"42%",innerRadius:"80%",labelText:"[[title]]",pathToImages:"/charts/amcharts/images/",fontFamily:"'Open Sans','Helvetica Neue',Arial,Helvetica,Verdana,sans-serif",fontSize:13,percentFormatter:{precision:1,decimalSeparator:".",thousandsSeparator:","},pullOutRadius:"0%",balloonText:'<span class="fwb">[[percents]]%</span> <span class="capitalize">[[title]]</span>',balloon:{borderThickness:0,animationDuration:.25,fadeOutDuration:.25,shadowColor:"transparent",horizontalPadding:12,verticalPadding:6,color:"#fff",fillColor:"#373737",cornerRadius:3,fillAlpha:1,textAlign:"left",startDuration:0,sequencedAnimation:!0,startAlpha:"100%"},labelsEnabled:!1,startRadius:"0%",startDuration:0,pullOutRadius:"0%",angle:0,depth3D:0,minRadius:2})},mojo.peaches.PerformanceOverviewChart=function(e,n,i){this.elementId=e,this.dataProviderUrl=n,this.customColors=i;var a=this;t.xhrGet({url:this.dataProviderUrl,content:"",handleAs:"json",load:function(n){n&&n.length>0?a.renderData(n):(t.byId(e).innerHTML='<div class="no-data-sample border panel-block alignc" style="height:168px;"><img src="/images/icons/campaign-performance.png"><p class="empty-tagline">We don\'t have enough campaign performance data yet.</p></div>',t.byId("campaign-performance-legend").style.display="none",t.byId("reports-performance-chart").style.display="none")},error:function(t){console.log("error: "+JSON.stringify(t))}})},mojo.peaches.PerformanceOverviewChart.prototype.renderData=function(e){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=e,this.chart.categoryField="bubbleText",this.chart.startDuration=1,this.chart.marginTop=25,this.chart.marginBottom=50,this.chart.marginLeft=50,this.chart.color="#555",this.chart.balloon.showBullet=!1,this.chart.addListener("clickGraphItem",this.dataPointClickedEvt);var n=new AmCharts.AmGraph;n.title="Click Rate",n.valueField="clickRate",n.type="line",n.lineColor=this.customColors?this.customColors[0]:"#ed5d3b",n.balloonText="[[value]]% Click Rate",n.lineThickness=2,n.bullet="round",n.bulletColor="#fff",n.bulletSize=6,n.bulletBorderColor=this.customColors?this.customColors[0]:"#ed5d3b",n.bulletBorderThickness=3,n.fillAlphas=0,this.chart.addGraph(n);var i=new AmCharts.AmGraph;i.title="Open Rate",i.valueField="openRate",i.type="line",i.lineColor=this.customColors?this.customColors[1]:"#2c9ab7",i.balloonText="[[value]]% Open Rate",i.lineThickness=2,i.bullet="round",i.bulletColor="#fff",i.bulletSize=6,i.bulletBorderColor=this.customColors?this.customColors[1]:"#2c9ab7",i.bulletBorderThickness=3,i.fillAlphas=0,this.chart.addGraph(i);var a=this.chart.categoryAxis;a.autoGridCount=!1,a.gridPosition="start",a.dashLength=5,a.axisColor="#ccc";var o=new AmCharts.ValueAxis;o.dashLength=5,o.unit="%",o.axisColor="#ccc",this.chart.addValueAxis(o);var s=new AmCharts.ChartCursor;s.cursorColor="#333",s.cursorAlpha=.2,s.cursorPosition="middle",s.bulletsEnabled=!1,this.chart.addChartCursor(s),s.addListener("changed",this.cursorChangedEvt);var r=new AmCharts.ChartScrollbar;r.graph=i,this.chart.addChartScrollbar(r),t.byId(this.elementId).innerHTML="",this.chart.write(this.elementId)},mojo.peaches.PerformanceOverviewChart.prototype.dataPointClickedEvt=function(t){var e="",n=t.graph.valueField;"clickRate"==n&&(e=t.item.dataContext.clickUrl,window.location=e),"openRate"==n&&(e=t.item.dataContext.openUrl,window.location=e)},mojo.peaches.PerformanceOverviewChart.prototype.cursorChangedEvt=function(e){var n,i,a=e.target.chart.dataProvider,o=a[e.index];void 0!==o&&void 0!==a&&(t.query("[data-campaignId]").forEach((function(e){n=e.parentElement.parentElement,t.hasClass(n,"google-visualization-table-tr-sel")&&t.removeClass(n,"google-visualization-table-tr-sel")})),void 0!==t.query("[data-campaignId="+o.campaignId+"]")[0]&&(i=t.query("[data-campaignId="+o.campaignId+"]")[0].parentElement.parentElement,t.addClass(i,"google-visualization-table-tr-sel")))},mojo.peaches.AbusePerformanceOverviewChart=function(e,n,i){this.elementId=e,this.dataProviderUrl=n,this.customColors=i;var a=this;t.xhrGet({url:this.dataProviderUrl,content:"",handleAs:"json",load:function(n){if(n&&n.length>0)a.renderData(n);else{t.byId(e).innerHTML='<div class="no-data"><img src="/images/icons/campaign-performance.png"><p>We don\'t have enough campaign performance data yet.</p></div>';var i=t.byId("campaign-performance-legend");i&&(i.style.display="none")}},error:function(t){console.log("error: "+JSON.stringify(t))}})},mojo.peaches.AbusePerformanceOverviewChart.prototype.renderData=function(e){this.chart=new AmCharts.AmSerialChart,this.chart.pathToImages="/charts/amcharts/images/",this.chart.dataProvider=e,this.chart.categoryField="bubbleText",this.chart.startDuration=1,this.chart.marginTop=25,this.chart.marginBottom=50,this.chart.marginLeft=50,this.chart.color="#555",this.chart.balloon.showBullet=!1,this.chart.addListener("clickGraphItem",this.dataPointClickedEvt);var i=new AmCharts.AmGraph;i.title="Abuse Rate",i.valueField="abuseRate",i.type="line",i.lineColor=this.customColors?this.customColors[0]:"#ed5d3b",i.balloonText="[[value]]% Abuse Rate",i.lineThickness=2,i.bullet="round",i.bulletColor="#ed5d3b",i.bulletSize=6,i.bulletBorderColor=this.customColors?this.customColors[0]:"#ed5d3b",i.bulletBorderThickness=3,i.fillAlphas=0,this.chart.addGraph(i);var a=new AmCharts.AmGraph;a.title="Bounce Rate",a.valueField="bounceRate",a.type="line",a.lineColor=this.customColors?this.customColors[1]:"#2c9ab7",a.balloonText="[[value]]% Bounce Rate",a.lineThickness=2,a.bullet="round",a.bulletColor="#2c9ab7",a.bulletSize=6,a.bulletBorderColor=this.customColors?this.customColors[1]:"#2c9ab7",a.bulletBorderThickness=3,a.fillAlphas=0,this.chart.addGraph(a);var o=new AmCharts.AmGraph;o.title="Unsub Rate",o.valueField="unsubRate",o.type="line",o.lineColor=this.customColors?this.customColors[1]:"#b1e0ec",o.balloonText="[[value]]% Unsub Rate",o.lineThickness=2,o.bullet="round",o.bulletColor="#b1e0ec",o.bulletSize=6,o.bulletBorderColor=this.customColors?this.customColors[1]:"#b1e0ec",o.bulletBorderThickness=3,o.fillAlphas=0,this.chart.addGraph(o);var s=this.chart.categoryAxis;s.autoGridCount=!1,s.gridPosition="start",s.dashLength=5,s.axisColor="#ccc";var r=new AmCharts.ValueAxis;r.dashLength=5,r.unit="%",r.axisColor="#ccc",this.chart.addValueAxis(r);var l=new AmCharts.ChartCursor;l.cursorColor="#333",l.cursorAlpha=.2,l.cursorPosition="middle",l.bulletsEnabled=!1,l.categoryBalloonFunction=function(t){return n.html.entities.encode(t)},this.chart.addChartCursor(l),l.addListener("changed",this.cursorChangedEvt);var d=new AmCharts.ChartScrollbar;d.graph=i,this.chart.addChartScrollbar(d),t.byId(this.elementId).innerHTML="",this.chart.write(this.elementId)},mojo.peaches.AbusePerformanceOverviewChart.prototype.cursorChangedEvt=function(e){var n,i,a=e.target.chart.dataProvider,o=a[e.index];void 0!==o&&void 0!==a&&(t.query("[data-campaignId]").forEach((function(e){n=e.parentElement.parentElement,t.hasClass(n,"google-visualization-table-tr-sel")&&t.removeClass(n,"google-visualization-table-tr-sel")})),void 0!==t.query("[data-campaignId="+o.campaignId+"]")[0]&&(i=t.query("[data-campaignId="+o.campaignId+"]")[0].parentElement.parentElement,t.addClass(i,"google-visualization-table-tr-sel")))}}.apply(e,a))||(t.exports=o)},function(t,e){t.exports=window.require("dojo/main")},function(t,e,n){var i;void 0===(i=function(){return{addTo:function(t){Boolean(window.app&&window.app.nativeUtils&&window.app.nativeUtils.getNativeObject())?t.addMaxWidthRestriction(1200,"Images should be around 800px to 1200px wide. Please resize this image on desktop.","resize"):t.addMaxWidthRestriction(1200,"This image is so big it might cause slow load times or get clipped in people’s inboxes. Aim for 800 – 1200px wide instead.","resize","Let's fix it")}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(17),n(16)],void 0===(a=function(t,e,n){return t(null,{_getImageStyles:function(){var t=[];return t.push({name:"Image style",selector:"img.mcnImage, img.mcnRetinaImage",props:{border:{value:""},"border-radius":{value:"",minimum:0,maximum:50,unit:"%",wholeNumbersOnly:!0}}}),window.app&&"page"===window.app.campaignType&&"imageCard"!==this.type&&(t[0].props["box-shadow"]={value:"none"}),t}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(33),n(32),n(27),n(9),n(49)],void 0===(a=function(t,e,n,i,a,o){var s={};t.setObject("dojo.dnd.autoscroll",s),s.getViewport=o.getBox,s.V_TRIGGER_AUTOSCROLL=32,s.H_TRIGGER_AUTOSCROLL=32,s.V_AUTOSCROLL_VALUE=16,s.H_AUTOSCROLL_VALUE=16;var r,l=n.doc,d=1/0,c=1/0;return s.autoScrollStart=function(t){l=t,r=o.getBox(l);var e=n.body(l).parentNode;d=Math.max(e.scrollHeight-r.h,0),c=Math.max(e.scrollWidth-r.w,0)},s.autoScroll=function(t){var e=r||o.getBox(l),i=n.body(l).parentNode,a=0,u=0;t.clientX<s.H_TRIGGER_AUTOSCROLL?a=-s.H_AUTOSCROLL_VALUE:t.clientX>e.w-s.H_TRIGGER_AUTOSCROLL&&(a=Math.min(s.H_AUTOSCROLL_VALUE,c-i.scrollLeft)),t.clientY<s.V_TRIGGER_AUTOSCROLL?u=-s.V_AUTOSCROLL_VALUE:t.clientY>e.h-s.V_TRIGGER_AUTOSCROLL&&(u=Math.min(s.V_AUTOSCROLL_VALUE,d-i.scrollTop)),window.scrollBy(a,u)},s._validNodes={div:1,p:1,td:1},s._validOverflow={auto:1,scroll:1},s.autoScrollNodes=function(t){for(var o,r,l,d,c,u,h=0,p=0,m=t.target;m;){if(1==m.nodeType&&m.tagName.toLowerCase()in s._validNodes){var g=a.getComputedStyle(m),f=g.overflow.toLowerCase()in s._validOverflow,v=g.overflowX.toLowerCase()in s._validOverflow,b=g.overflowY.toLowerCase()in s._validOverflow;if((f||v||b)&&(o=i.getContentBox(m,g),r=i.position(m,!0)),(f||v)&&(l=Math.min(s.H_TRIGGER_AUTOSCROLL,o.w/2),c=t.pageX-r.x,(e("webkit")||e("opera"))&&(c+=n.body().scrollLeft),h=0,c>0&&c<o.w&&(c<l?h=-l:c>o.w-l&&(h=l),m.scrollLeft,m.scrollLeft=m.scrollLeft+h)),(f||b)&&(d=Math.min(s.V_TRIGGER_AUTOSCROLL,o.h/2),u=t.pageY-r.y,(e("webkit")||e("opera"))&&(u+=n.body().scrollTop),p=0,u>0&&u<o.h&&(u<d?p=-d:u>o.h-d&&(p=d),m.scrollTop,m.scrollTop=m.scrollTop+p)),h||p)return}try{m=m.parentNode}catch(t){m=null}}s.autoScroll(t)},s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(75),n(3),n(9),n(34),n(85),n(32)],void 0===(a=function(t,e,n,i,a,o,s){return a.add("highcontrast",(function(){var n=s.doc.createElement("div");n.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(e.blankGif||t.toUrl("dojo/resources/blank.gif"))+'");',s.body().appendChild(n);var o=i.getComputedStyle(n),r=o.backgroundImage,l=o.borderTopColor==o.borderRightColor||r&&("none"==r||"url(invalid-url:)"==r);return a("ie")<=8?n.outerHTML="":s.body().removeChild(n),l})),o((function(){a("highcontrast")&&n.add(s.body(),"dj_a11y")})),a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(112)],void 0===(a=function(t,e){return t("dojo.dnd.AutoSource",e,{constructor:function(){this.autoSync=!0}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(42),n(162),n(505),n(241),n(142),n(507),n(508),n(509),n(510),n(511),n(512),n(513)],void 0===(a=function(t){return t._base}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(27),n(1),n(85),n(33),n(32)],void 0===(a=function(t,e,n,i,a){var o=a.doc.documentElement,s=i("ie"),r=i("opera"),l=Math.floor,d=i("ff"),c=i("trident"),u=t.boxModel.replace(/-/,""),h={dj_quirks:i("quirks"),dj_opera:r,dj_khtml:i("khtml"),dj_webkit:i("webkit"),dj_safari:i("safari"),dj_chrome:i("chrome"),dj_gecko:i("mozilla"),dj_ios:i("ios"),dj_android:i("android")};s&&(h.dj_ie=!0,h["dj_ie"+l(s)]=!0,h.dj_iequirks=i("quirks")),d&&(h["dj_ff"+l(d)]=!0),7===l(c)&&(h.dj_ie=!0,h.dj_ie11=!0),h["dj_"+u]=!0;var p="";for(var m in h)h[m]&&(p+=m+" ");return o.className=e.trim(o.className+" "+p),n((function(){if(!t.isBodyLtr()){var n="dj_rtl dijitRtl "+p.replace(/ /g,"-rtl ");o.className=e.trim(o.className+" "+n+"dj_rtl dijitRtl "+p.replace(/ /g,"-rtl "))}})),i}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=void 0},function(t,e,n){var i,a;i=[n(23),n(338)],void 0===(a=function(t){return t.cache}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(40),n(34),n(31)],void 0===(a=function(t,e,n,i){var a;a=function(t,e,n){i(t,{sync:!!e,headers:{"X-Requested-With":null}}).then(n)};var o={},s=function(t){if(t){var e=(t=t.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"")).match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);e&&(t=e[1])}else t="";return t},r={},l={};return t.cache=function(t,n,i){var r;"string"==typeof t?/\//.test(t)?(r=t,i=n):r=e.toUrl(t.replace(/\./g,"/")+(n?"/"+n:"")):(r=t+"",i=n);var l=null!=i&&"string"!=typeof i?i.value:i,d=i&&i.sanitize;return"string"==typeof l?(o[r]=l,d?s(l):l):null===l?(delete o[r],null):(r in o||a(r,!0,(function(t){o[r]=t})),d?s(o[r]):o[r])},{dynamic:!0,normalize:function(t,e){var n=t.split("!"),i=n[0];return(/^\./.test(i)?e(i):i)+(n[1]?"!"+n[1]:"")},load:function(t,e,n){var i=t.split("!"),d=i.length>1,c=i[0],u=e.toUrl(i[0]),h="url:"+u,p=r,m=function(t){n(d?s(t):t)};if(c in o?p=o[c]:e.cache&&h in e.cache?p=e.cache[h]:u in o&&(p=o[u]),p===r)if(l[u])l[u].push(m);else{var g=l[u]=[m];a(u,!e.async,(function(t){o[c]=o[u]=t;for(var e=0;e<g.length;)g[e++](t);delete l[u]}))}else m(p)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(7),n(9),n(1),n(66),n(2),n(33),n(49),n(162)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return e("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(e){if(this._set("disabled",e),n.set(this.focusNode,"disabled",e),this.valueNode&&n.set(this.valueNode,"disabled",e),this.focusNode.setAttribute("aria-disabled",e?"true":"false"),e){this._set("hovering",!1),this._set("active",!1);var i="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";t.forEach(a.isArray(i)?i:[i],(function(t){var e=this[t];r("webkit")||d.hasDefaultTabStop(e)?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex")}),this)}else""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(t){if("mouse"==t&&this.isFocusable())var e=this.own(s(this.focusNode,"focus",(function(){i.remove(),e.remove()})))[0],n=r("pointer-events")?"pointerup":r("MSPointer")?"MSPointerUp":r("touch-events")?"touchend, mouseup":"mouseup",i=this.own(s(this.ownerDocumentBody,n,a.hitch(this,(function(t){i.remove(),e.remove(),this.focused&&("touchend"==t.type?this.defer("focus"):this.focus())}))))[0];this.scrollOnFocus&&this.defer((function(){l.scrollIntoView(this.domNode)})),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=i.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(t){}},compare:function(t,e){return"number"==typeof t&&"number"==typeof e?isNaN(t)&&isNaN(e)?0:t-e:t>e?1:t<e?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(t,e){null!=this._lastValueReported||null!==e&&this._onChangeActive||(this._resetValue=this._lastValueReported=t),this._pendingOnChange=this._pendingOnChange||typeof t!=typeof this._lastValueReported||0!=this.compare(t,this._lastValueReported),(this.intermediateChanges||e||void 0===e)&&this._pendingOnChange&&(this._lastValueReported=t,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer((function(){this._onChangeHandle=null,this.onChange(t)}))))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(7),n(30),n(1),n(2),n(14),n(76)],void 0===(a=function(t,e,n,i,a,o,s,r){return e("dijit._KeyNavMixin",r,{tabIndex:"0",childSelector:null,postCreate:function(){if(this.inherited(arguments),n.set(this.domNode,"tabIndex",this.tabIndex),!this._keyNavCodes){var t=this._keyNavCodes={};t[i.HOME]=a.hitch(this,"focusFirstChild"),t[i.END]=a.hitch(this,"focusLastChild"),t[this.isLeftToRight()?i.LEFT_ARROW:i.RIGHT_ARROW]=a.hitch(this,"_onLeftArrow"),t[this.isLeftToRight()?i.RIGHT_ARROW:i.LEFT_ARROW]=a.hitch(this,"_onRightArrow"),t[i.UP_ARROW]=a.hitch(this,"_onUpArrow"),t[i.DOWN_ARROW]=a.hitch(this,"_onDownArrow")}var e=this,r="string"==typeof this.childSelector?this.childSelector:a.hitch(this,"childSelector");this.own(o(this.domNode,"keypress",a.hitch(this,"_onContainerKeypress")),o(this.domNode,"keydown",a.hitch(this,"_onContainerKeydown")),o(this.domNode,"focus",a.hitch(this,"_onContainerFocus")),o(this.containerNode,o.selector(r,"focusin"),(function(t){e._onChildFocus(s.getEnclosingWidget(this),t)})))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(t,e){t&&(this.focusedChild&&t!==this.focusedChild&&this._onChildBlur(this.focusedChild),t.set("tabIndex",this.tabIndex),t.focus(e?"end":"start"))},_onContainerFocus:function(t){t.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){n.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(t){n.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(t){t&&t!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),t.set("tabIndex",this.tabIndex),this.lastFocused=t,this._set("focusedChild",t))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(t,e,n,i){t&&this.focusChild(t)},_keyboardSearchCompare:function(t,e){var n=t.domNode,i=(t.label||(n.focusNode?n.focusNode.label:"")||n.innerText||n.textContent||"").replace(/^\s+/,"").substr(0,e.length).toLowerCase();return e.length&&i==e?-1:0},_onContainerKeydown:function(t){var e=this._keyNavCodes[t.keyCode];e?(e(t,this.focusedChild),t.stopPropagation(),t.preventDefault(),this._searchString=""):t.keyCode==i.SPACE&&this._searchTimer&&!(t.ctrlKey||t.altKey||t.metaKey)&&(t.stopImmediatePropagation(),t.preventDefault(),this._keyboardSearch(t," "))},_onContainerKeypress:function(t){t.charCode<=i.SPACE||t.ctrlKey||t.altKey||t.metaKey||(t.preventDefault(),t.stopPropagation(),this._keyboardSearch(t,String.fromCharCode(t.charCode).toLowerCase()))},_keyboardSearch:function(t,e){var n,i=null,o=0;a.hitch(this,(function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=e;var t=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;n=this._searchString.substr(0,t),this._searchTimer=this.defer((function(){this._searchTimer=null,this._searchString=""}),this.multiCharSearchDuration);var a=this.focusedChild||null;if(1!=t&&a||(a=this._getNextFocusableChild(a,1))){var s=a;do{var r=this._keyboardSearchCompare(a,n);if(r&&0==o++&&(i=a),-1==r){o=-1;break}a=this._getNextFocusableChild(a,1)}while(a!=s)}}))(),this.onKeyboardSearch(i,t,n,o)},_onChildBlur:function(){},_getNextFocusableChild:function(t,e){var n=t;do{if(t)t=this._getNext(t,e);else if(!(t=this[e>0?"_getFirst":"_getLast"]()))break;if(null!=t&&t!=n&&t.isFocusable())return t}while(t!=n);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(t,e){if(t)for(t=t.domNode;t;)if((t=t[e<0?"previousSibling":"nextSibling"])&&"getAttribute"in t){var n=s.byNode(t);if(n)return n}return null}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(23),n(1),n(83),n(146),n(164),n(532),n(290)],void 0===(a=function(t,e,n,i,a,o,s){var r;return r=t("dijit.form.ValidationTextBox",a,{templateString:s,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(t,n){n!=r.prototype[t]&&(e.deprecated("ValidationTextBox id="+this.id+", set('"+t+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",n))},_setRegExpGenAttr:function(t){this._deprecateRegExp("regExpGen",t),this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(t){this._deprecateRegExp("regExp",t)},_setValueAttr:function(){this.inherited(arguments),this._refreshState()},validator:function(t,e){return new RegExp("^(?:"+this._computeRegexp(e)+")"+(this.required?"":"?")+"$").test(t)&&(!this.required||!this._isEmpty(t))&&(this._isEmpty(t)||void 0!==this.parse(t,e))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(t){return(this.trim?/^\s*$/:/^$/).test(t)},getErrorMessage:function(){var t="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,e="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:t;return this.required&&this._isEmpty(this.textbox.value)?e:t},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(t){var e="",n=this.disabled||this.isValid(t);n&&(this._maskValidSubsetError=!0);var i=this._isEmpty(this.textbox.value),a=!n&&t&&this._isValidSubset();return this._set("state",n?"":((!this._hasBeenBlurred||t)&&i||a)&&(this._maskValidSubsetError||a&&!this._hasBeenBlurred&&t)?"Incomplete":"Error"),this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false"),"Error"==this.state?(this._maskValidSubsetError=t&&a,e=this.getErrorMessage(t)):"Incomplete"==this.state?(e=this.getPromptMessage(t),this._maskValidSubsetError=!this._hasBeenBlurred||t):i&&(e=this.getPromptMessage(t)),this.set("message",e),n},displayMessage:function(t){t&&this.focused?o.show(t,this.domNode,this.tooltipPosition,!this.isLeftToRight()):o.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused),this.inherited(arguments)},constructor:function(t){this.constraints=n.clone(this.constraints),this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments),this._refreshState()},_setConstraintsAttr:function(t){!t.locale&&this.lang&&(t.locale=this.lang),this._set("constraints",t),this._refreshState()},_setPatternAttr:function(t){this._set("pattern",t),this._refreshState()},_computeRegexp:function(t){var e=this.pattern;if("function"==typeof e&&(e=e.call(this,t)),e!=this._lastRegExp){var n="";this._lastRegExp=e,".*"!=e&&e.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,(function(t){switch(t.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":n+=t;break;case")":n+="|$)";break;default:n+="(?:"+t+"|$)"}}));try{"".search(n)}catch(t){n=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+n+")$"}return e},postMixInProperties:function(){this.inherited(arguments),this.messages=i.getLocalization("dijit.form","validate",this.lang),this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(t){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(t){this._set("required",t),this.focusNode.setAttribute("aria-required",t),this._refreshState()},_setMessageAttr:function(t){this._set("message",t),this.displayMessage(t)},reset:function(){this._maskValidSubsetError=!0,this.inherited(arguments)},_onBlur:function(){this.displayMessage(""),this.inherited(arguments)},destroy:function(){o.hide(this.domNode),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(148),n(346),n(77),n(216)],void 0===(a=function(t,e,n,i){var a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,r=o.toString,l=s.hasOwnProperty,d=RegExp("^"+r.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(o){return!(!n(o)||e(o))&&(t(o)?d:a).test(i(o))}}.apply(e,i))||(t.exports=a)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,a;i=[n(107)],void 0===(a=function(t){var e=Object.prototype,n=e.hasOwnProperty,i=e.toString,a=t?t.toStringTag:void 0;return function(t){var e=n.call(t,a),o=t[a];try{t[a]=void 0;var s=!0}catch(t){}var r=i.call(t);return s&&(e?t[a]=o:delete t[a]),r}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t=Object.prototype.toString;return function(e){return t.call(e)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(347)],void 0===(a=function(t){var e,n=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return function(t){return!!n&&n in t}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(64)],void 0===(a=function(t){return t["__core-js_shared__"]}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){return null==t?void 0:t[e]}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(94),n(89)],void 0===(a=function(t,e){return function(n){return e(n)&&"[object Arguments]"==t(n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(){return!1}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(94),n(169),n(89)],void 0===(a=function(t,e,n){var i={};return i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,function(a){return n(a)&&e(a.length)&&!!i[t(a)]}}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(t){var i,a;i=[n(215)],void 0===(a=function(n){var i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&n.process;return function(){try{return o&&o.binding&&o.binding("util")}catch(t){}}()}.apply(e,i))||(t.exports=a)}).call(this,n(102)(t))},function(t,e,n){var i,a;i=[n(248)],void 0===(a=function(t){return t(Object.keys,Object)}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(356),n(387),n(221)],void 0===(a=function(t,e,n){return function(i){var a=e(i);return 1==a.length&&a[0][2]?n(a[0][0],a[0][1]):function(e){return e===i||t(e,i,a)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(184),n(197)],void 0===(a=function(t,e){return function(n,i,a,o){var s=a.length,r=s,l=!o;if(null==n)return!r;for(n=Object(n);s--;){var d=a[s];if(l&&d[2]?d[1]!==n[d[0]]:!(d[0]in n))return!1}for(;++s<r;){var c=(d=a[s])[0],u=n[c],h=d[1];if(l&&d[2]){if(void 0===u&&!(c in n))return!1}else{var p=new t;if(o)var m=o(u,h,c,n,i,p);if(!(void 0===m?e(h,u,3,o,p):m))return!1}}return!0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(){this.__data__=[],this.size=0}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(128)],void 0===(a=function(t){var e=Array.prototype.splice;return function(n){var i=this.__data__,a=t(i,n);return!(a<0)&&(a==i.length-1?i.pop():e.call(i,a,1),--this.size,!0)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(128)],void 0===(a=function(t){return function(e){var n=this.__data__,i=t(n,e);return i<0?void 0:n[i][1]}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(128)],void 0===(a=function(t){return function(e){return t(this.__data__,e)>-1}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(128)],void 0===(a=function(t){return function(e,n){var i=this.__data__,a=t(i,e);return a<0?(++this.size,i.push([e,n])):i[a][1]=n,this}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(127)],void 0===(a=function(t){return function(){this.__data__=new t,this.size=0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t){return this.__data__.get(t)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t){return this.__data__.has(t)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(127),n(170),n(171)],void 0===(a=function(t,e,n){return function(i,a){var o=this.__data__;if(o instanceof t){var s=o.__data__;if(!e||s.length<199)return s.push([i,a]),this.size=++o.size,this;o=this.__data__=new n(s)}return o.set(i,a),this.size=o.size,this}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(368),n(127),n(170)],void 0===(a=function(t,e,n){return function(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(369),n(370),n(371),n(372),n(373)],void 0===(a=function(t,e,n,i,a){function o(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(129)],void 0===(a=function(t){return function(){this.__data__=t?t(null):{},this.size=0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(129)],void 0===(a=function(t){var e=Object.prototype.hasOwnProperty;return function(n){var i=this.__data__;if(t){var a=i[n];return"__lodash_hash_undefined__"===a?void 0:a}return e.call(i,n)?i[n]:void 0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(129)],void 0===(a=function(t){var e=Object.prototype.hasOwnProperty;return function(n){var i=this.__data__;return t?void 0!==i[n]:e.call(i,n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(129)],void 0===(a=function(t){return function(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=t&&void 0===n?"__lodash_hash_undefined__":n,this}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(130)],void 0===(a=function(t){return function(e){var n=t(this,e).delete(e);return this.size-=n?1:0,n}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(130)],void 0===(a=function(t){return function(e){return t(this,e).get(e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(130)],void 0===(a=function(t){return function(e){return t(this,e).has(e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(130)],void 0===(a=function(t){return function(e,n){var i=t(this,e),a=i.size;return i.set(e,n),this.size+=i.size==a?0:1,this}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(184),n(217),n(382),n(383),n(219),n(50),n(157),n(168)],void 0===(a=function(t,e,n,i,a,o,s,r){var l="[object Object]",d=Object.prototype.hasOwnProperty;return function(c,u,h,p,m,g){var f=o(c),v=o(u),b=f?"[object Array]":a(c),y=v?"[object Array]":a(u),w=(b="[object Arguments]"==b?l:b)==l,_=(y="[object Arguments]"==y?l:y)==l,C=b==y;if(C&&s(c)){if(!s(u))return!1;f=!0,w=!1}if(C&&!w)return g||(g=new t),f||r(c)?e(c,u,h,p,m,g):n(c,u,b,h,p,m,g);if(!(1&h)){var k=w&&d.call(c,"__wrapped__"),S=_&&d.call(u,"__wrapped__");if(k||S){var x=k?c.value():c,I=S?u.value():u;return g||(g=new t),m(x,I,h,p,g)}}return!!C&&(g||(g=new t),i(c,u,h,p,m,g))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t){return this.__data__.has(t)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(107),n(297),n(120),n(217),n(249),n(187)],void 0===(a=function(t,e,n,i,a,o){var s=t?t.prototype:void 0,r=s?s.valueOf:void 0;return function(t,s,l,d,c,u,h){switch(l){case"[object DataView]":if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=s.byteLength||!u(new e(t),new e(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+t,+s);case"[object Error]":return t.name==s.name&&t.message==s.message;case"[object RegExp]":case"[object String]":return t==s+"";case"[object Map]":var p=a;case"[object Set]":var m=1&d;if(p||(p=o),t.size!=s.size&&!m)return!1;var g=h.get(t);if(g)return g==s;d|=2,h.set(t,s);var f=i(p(t),p(s),d,c,u,h);return h.delete(t),f;case"[object Symbol]":if(r)return r.call(t)==r.call(s)}return!1}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(298)],void 0===(a=function(t){var e=Object.prototype.hasOwnProperty;return function(n,i,a,o,s,r){var l=1&a,d=t(n),c=d.length;if(c!=t(i).length&&!l)return!1;for(var u=c;u--;){var h=d[u];if(!(l?h in i:e.call(i,h)))return!1}var p=r.get(n);if(p&&r.get(i))return p==i;var m=!0;r.set(n,i),r.set(i,n);for(var g=l;++u<c;){var f=n[h=d[u]],v=i[h];if(o)var b=l?o(v,f,h,i,n,r):o(f,v,h,n,i,r);if(!(void 0===b?f===v||s(f,v,a,o,r):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var y=n.constructor,w=i.constructor;y==w||!("constructor"in n)||!("constructor"in i)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(m=!1)}return r.delete(n),r.delete(i),m}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(87),n(64)],void 0===(a=function(t,e){return t(e,"DataView")}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(87),n(64)],void 0===(a=function(t,e){return t(e,"Promise")}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(87),n(64)],void 0===(a=function(t,e){return t(e,"WeakMap")}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(220),n(88)],void 0===(a=function(t,e){return function(n){for(var i=e(n),a=i.length;a--;){var o=i[a],s=n[o];i[a]=[o,s,t(s)]}return i}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(197),n(252),n(254),n(174),n(220),n(221),n(103)],void 0===(a=function(t,e,n,i,a,o,s){return function(r,l){return i(r)&&a(l)?o(s(r),l):function(i){var a=e(i,r);return void 0===a&&a===l?n(i,r):t(l,a,3)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(390)],void 0===(a=function(t){var e=/^\./,n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g;return t((function(t){var a=[];return e.test(t)&&a.push(""),t.replace(n,(function(t,e,n,o){a.push(n?o.replace(i,"$1"):e||t)})),a}))}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(391)],void 0===(a=function(t){return function(e){var n=t(e,(function(t){return 500===i.size&&i.clear(),t})),i=n.cache;return n}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(171)],void 0===(a=function(t){function e(n,i){if("function"!=typeof n||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var a=function(){var t=arguments,e=i?i.apply(this,t):t[0],o=a.cache;if(o.has(e))return o.get(e);var s=n.apply(this,t);return a.cache=o.set(e,s)||o,s};return a.cache=new(e.Cache||t),a}return e.Cache=t,e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){return null!=t&&e in Object(t)}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(394),n(395),n(174),n(103)],void 0===(a=function(t,e,n,i){return function(a){return n(a)?t(i(a)):e(a)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return function(e){return null==e?void 0:e[t]}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(173)],void 0===(a=function(t){return function(e){return function(n){return t(n,e)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(94),n(89),n(397)],void 0===(a=function(t,e,n){return function(i){if(!e(i))return!1;var a=t(i);return"[object Error]"==a||"[object DOMException]"==a||"string"==typeof i.message&&"string"==typeof i.name&&!n(i)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(94),n(305),n(89)],void 0===(a=function(t,e,n){var i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,r=o.call(Object);return function(i){if(!n(i)||"[object Object]"!=t(i))return!1;var a=e(i);if(null===a)return!0;var l=s.call(a,"constructor")&&a.constructor;return"function"==typeof l&&l instanceof l&&o.call(l)==r}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(109)],void 0===(a=function(t){return function(e,n){return t(n,(function(t){return e[t]}))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return/<%=([\s\S]+?)%>/g}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(31),n(1),n(8)],void 0===(a=function(t,e,n){return{getCampaignPreviews:function(t){return this._getPreviews({campaign_id:t})},getTemplatePreviews:function(t){return this._getPreviews({template_id:t})},previewCampaign:function(t,e){return this._previewRequest({campaign_id:t,"clients[]":e})},previewTemplate:function(t,e){return this._previewRequest({template_id:t,"clients[]":e})},getCampaignClientsStats:function(t){return this._getClientsStats({campaign_id:t})},getTemplateClientsStats:function(t){return this._getClientsStats({template_id:t})},getCampaignClientHistory:function(t,e){return this._getClientHistory({campaign_id:t,client_id:e})},getTemplateClientHistory:function(t,e){return this._getClientHistory({template_id:t,client_id:e})},getTokens:function(e){return t.get(n.toUrl("/inbox-preview/tokens"),{handleAs:"json",query:e})},getTokensBlocks:function(e){return t.get(n.toUrl("/inbox-preview/tokens-blocks"),{handleAs:"json",query:e})},purchaseTokens:function(t){return this._purchaseTokens({block_id:t})},updatePreview:function(i,a){return t.post(n.toUrl("/inbox-preview/update"),{handleAs:"json",data:e.mixin({id:i},a)})},_getPreviews:function(e){return t.get(n.toUrl("/inbox-preview/previews"),{handleAs:"json",query:e})},_previewRequest:function(e){return t.post(n.toUrl("/inbox-preview/run-preview"),{handleAs:"json",data:e})},_getClientHistory:function(e){return t.get(n.toUrl("/inbox-preview/client-history"),{handleAs:"json",query:e})},_getClientsStats:function(e){return t.get(n.toUrl("/inbox-preview/clients-stats"),{handleAs:"json",query:e})},_purchaseTokens:function(e){return t.get(n.toUrl("/inbox-preview/purchase-tokens"),{handleAs:"json",query:e})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(172),n(454),n(90),n(50),n(310)],void 0===(a=function(t,e,n,i,a){return function(o,s){return(i(o)?t:e)(o,a(n(s,3)))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(34),n(22),n(21),n(40)],void 0===(a=function(t,e,n,i){function a(t){if(!document.head.querySelector("link[href='"+t+"']")){var e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}}return function(t){if(function(){if(!document.head.querySelector("#js-experiment-data")){var t=document.createElement("script");t.id="js-experiment-data",t.type="application/json",t.textContent="[]",document.head.appendChild(t)}}(),window.__bridges){var o=document.querySelector("[data-bridge-css]");if(null!==o&&a(o.dataset.bridgeCss),!Object.prototype.hasOwnProperty.call(window.__bridges,t))throw new Error("Missing bridge:"+t);return window.__bridges[t]().then((function(t){return t.default}))}var s=new e;return n.bridgeBundles[t+".css"]&&a(n.bridgeBundles[t+".css"]),n.bridgeBundles["umd.vendor.css"]&&a(n.bridgeBundles["umd.vendor.css"]),i([n.bridgeBundles["umd.vendor.js"],n.bridgeBundles[t+".js"]],(function(t,e){s.resolve(e.default)})),s.promise}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(9),n(2),n(6),n(47),n(11),n(12),n(263),n(17),n(16),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([l,r],{templateString:'<div class="mcnTemplatePageBanner"><div class="mcnPageBannerContainer"><div class="mcnPageBannerContentContainer" data-dojo-attach-point="contentContainer"></div><div class="mcnCloseButton" data-dojo-attach-point="closeBtn" role="button"><span class="sr-only">close</span></div></div></div>',localStoragePrefix:"mc-lp-notification_"+window.location.pathname,closeBtnImage:'<img width="24" height="24" alt="close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAEVQTFRFAAAA////////////////////////////////////////////////////////AAAACwsLlpaWv7+/wMDAwcHB5+fn////js+8jgAAAA90Uk5TABkaT2lvcJi1ttny8/v+KMQKuwAAAJdJREFUKM91UuEawiAIRGdp6pZzi/d/1HDo11bd/RAFTk6QSGFdiDnH4CydYfzMHbM3H/+U+IQ0Df994QuWW8//8kvk4JjEP0itjtf962K86FQ9a6nN1LKqNktOE8uzbMybGOU4eii3imvfZal6DhR7vZastAOR8lAi6UIap4wD8KqAikO58IGwJbiJsO14UHi0+DP8+z5v3a8i3EEOD1IAAAAASUVORK5CYII=" />',constructor:function(t){t&&t.isLive&&(this.model=new s(t.settings)),this.inherited(arguments)},postCreate:function(){var t=window.localStorage.getItem(this.localStoragePrefix),e=!0,o=c.getBootstrappedInstance(),s=!o||!o.userId;if(this.model.watch("enabled",this.updateEnabled.bind(this)),this.model.watch("styles",this.updateStyles.bind(this)),this.model.watch("content",this.updateContent.bind(this)),this.updateContent(),this.updateStyles(),this.isLive&&t&&s&&(t=JSON.parse(t),!this.isPreview&&t.hasOwnProperty("hasClosed")&&t.hasClosed&&(e=!1)),n.place(this.closeBtnImage,this.closeBtn),this.isLive?a(this.closeBtn,"click",function(){this.onClickClose()}.bind(this)):(a(this.domNode,"click",function(){this.onClickPreview()}.bind(this)),a(this.closeBtn,"click",(function(t){t.preventDefault(),t.stopPropagation()}))),!this.model.get("enabled")||!e)return i.set(this.domNode,"display","none"),void this._hide();i.set(this.domNode,"display","none"),this._show()},updateEnabled:function(t,e,n){e!==n&&(!0===n?this._show():this._hide())},updateStyles:function(){d.reset(this.domNode,this.model.styles),d.inline(this.domNode,this.model.styles)},updateContent:function(){var t=n.toDom(this.model.get("content"));n.place(t,this.contentContainer,"only")},onClickClose:function(){this._hide(!0)},_hide:function(t){h(this.domNode,"transition.bounceDownOut",{duration:700,complete:e.hitch(this,(function(){t&&(this.isLive&&window.localStorage.setItem(this.localStoragePrefix,JSON.stringify({hasClosed:!0})),this.destroy())})),display:"none"})},_show:function(){h(this.domNode,"transition.slideDownIn",{easing:"easeInQuart",duration:400,delay:400,display:"inherit"})},destroy:function(){n.destroy(this.domNode)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(146),n(4),n(3),n(9),n(30),n(137),n(202),n(608)],void 0===(a=function(t,e,n,i,a,o,s,r,l){var d=null;function c(){return d&&!d._destroyed||((d=new r).startup(),n.place(d.domNode,document.body)),d}return t([e,l],{label:"Color",valueOnEmpty:"",noColorEnabled:!1,postCreate:function(){this.picker=c(),this.picker&&this.picker.addInput(this),i.add(this.domNode,"c-colorInput"),this.colorSwatch=n.place("<div class='c-colorInput_previewSwatch' title='Color preview'/>",this.domNode,"first"),this.inherited(arguments),this.toggleResetLink(null===this.value||!this._isEmptyValue(this.value)),this.toggleUnsetIndicator(),this.on("keydown",(function(t){t.keyCode===o.ENTER&&(t.stopPropagation(),t.preventDefault(),this._setValueAttr(this.get("value"),!0))}))},onChange:function(){var t=this.value;if(this.toggleResetLink(!this._isEmptyValue(t)),this.toggleUnsetIndicator(),!this._isEmptyValue(t)){var e=s.fromString("#"+t.replace(/#/g,""));t=null==(e=e||s.fromString(t))?"#ffffff":e.toHex(),this.set("value",t,!1)}},_isEmptyValue:function(t){return null===t||""===t||t===this.valueOnEmpty},_setValueAttr:function(t){null!==t&&""!==t||t===this.valueOnEmpty?this.inherited(arguments):this.inherited(arguments,[this.valueOnEmpty]),this.textbox.value=this._isEmptyValue(t)?"":t,this._updateColor()},_updateColor:function(){this.colorSwatch&&a.set(this.colorSwatch,"backgroundColor",this.value)},startup:function(){this.inherited(arguments),this._updateColor()},onReset:function(){this.set("value",this.valueOnEmpty)},toggleUnsetIndicator:function(){i.toggle(this.colorSwatch,"v-unsetSwatch",this._isEmptyValue(this.value))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(61),n(0),n(125),n(63),n(54),n(1),n(35),n(7),n(3),n(4),n(9),n(28),n(2),n(58),n(6),n(19),n(53),n(39),n(25),n(15),n(17),n(16),n(613),n(617),n(100),n(624),n(625)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T){return n("mojo.neapolitan.preview.McBlock",[y,b],{templateString:I,baseClass:"mojoMcBlock",blockId:0,blockType:null,editor:null,allowAutoDesigner:null,adClickedInHeader:null,isMobile:!1,selectedChannel:"mojo/neapolitan/McBlock/selected",blockEditorControlActions:["sort","edit","clone","delete"],constructor:function(t){if(!t.hasOwnProperty("block"))throw new Error("Must reference a Block");if(!t.hasOwnProperty("source"))throw new Error("Must contain a reference to a McContainerSource");this.subscriptions=[],this.imageUploaders=[],this.imageUploading=!1,this.isMobile=window.top.app&&window.top.app.nativeUtils&&window.top.app.nativeUtils.getNativeObject(),this.dynamicContentLabelHTML='<div class="dynamicContentBlockIndicator"><img class="dynamic-content-icon" src="/images/campaigns/content-blocks/dynamicContentVisual.svg"/><span class="dynamic-content-text">Dynamic Content Enabled</span></div>'},postMixInProperties:function(){this._blockWatch=this.block.watch(s.hitch(this,(function(t){this.imageUploading||this.render(),"_editorOpen"!==t&&"captionWidth"!==t&&"captionPosition"!==t&&"selectedLayout"!==t||this.block._editorOpen&&this.sendImageSize(),"_editorOpen"===t&&(this.block._editorOpen?this.focus():this.unFocus())}))),r.after(this.block,"updateData",s.hitch(this,(function(){this.showEdited()})))},sendImageSize:function(){if(this.imageUploaders.length>0){var t=this.imageUploaders[0].isSizedForAutoDesigner||!1,e=this.adClickedInHeader,n={width:this.imageUploaders[0].domNode.clientWidth,height:this.imageUploaders[0].domNode.clientHeight};w.globalPublish("isSizedForAutoDesigner",[t,n,e])}},showAdded:function(){h.set(this.editType,"Added"),this._showEditedOverlay()},showEdited:function(){h.set(this.editType,"Edited"),this._showEditedOverlay()},_showEditedOverlay:function(){var t=window.top.app.viewers[this.block.editedById]||window.top.app.getSupportViewer();t&&!this._showingEdited&&(this._showingEdited=!0,c.place(s.replace("<span class='userName'><img class='userColor float-left border-radius--lv1' width='18' height='18' src='{avatar}'>{name}</span>",t),this.editedBy,"only"),u.set(this.editedOverlay,{display:"",opacity:1}),setTimeout(s.hitch(this,(function(){o.fadeOut({node:this.editedOverlay,onEnd:s.hitch(this,(function(){this._showingEdited=!1,u.set(this.editedOverlay,{display:"none"})}))}).play()})),700))},postCreate:function(){this._setupBlockControlEvents(),this.block._renderMergeTags?(this.refresh(),this.block._setupMergeListeners(this)):this._contentPostProcessing(),this.sortBtn&&d.add(this.sortBtn,"drag-improvement"),this.block.hasDynamicContent&&c.place(this.dynamicContentLabelHTML,this.dynamicContentContainer),d.add(this.dynamicContentContainer,"drag-improvement-empty"),this.isMobile||this.own(p(this.autoDesigner,"click",function(t){this.adClickedInHeader=!0,w.globalPublish("autoDesignerBtnClicked"),this.displayEditorViaButton()}.bind(this)))},_setupBlockControlEvents:function(){p(this.domNode,"click",s.hitch(this,this.displayEditorBodyClick)),this.block&&this.block._blockEditorControls&&this.block._blockEditorControls.length>0?this.block._blockEditorControls.forEach(function(t){var e=this[t+"Btn"];if(e){var n;switch(t){case"edit":n=this.displayEditorViaButton;break;case"clone":n=this._cloneBlock;break;case"delete":n=this._confirmDelete;break;case"sort":n=this.sortGAtrack}p(e,v.press,s.hitch(this,n)),p(e,"click",a.stop)}T(this.block._blockEditorControls,this.blockEditorControlActions).forEach(function(t){var e=this[t+"Btn"];e&&c.destroy(e)}.bind(this))}.bind(this)):(p(this.deleteBtn,v.press,s.hitch(this,this._confirmDelete)),p(this.cloneBtn,v.press,s.hitch(this,this._cloneBlock)),p(this.editBtn,v.press,s.hitch(this,this.displayEditorViaButton)),p(this.sortBtn,v.press,s.hitch(this,this.sortGAtrack)),p(this.cloneBtn,"click",a.stop),p(this.editBtn,"click",a.stop),p(this.deleteBtn,"click",a.stop),p(this.sortBtn,"click",a.stop))},sortGAtrack:function(){window.top.ga("send","event","draft_edit","move",this.blockType)},displayEditorViaButton:function(){this.block.openEditor(),window.top.ga("send","event","draft_edit","edit via button click",this.blockType)},_confirmDelete:function(t){a.stop(t),t.altKey?(this.block._teardownMergeListeners(this),this.block.remove()):"payment"===this.block.type&&_.getBootstrappedInstance().flagIsOn(C.WEBSITES_SUNSET_PAYMENT_BLOCK)?window.parent.confirmDeletePaymentBlock(s.hitch(this,(function(){this.block._teardownMergeListeners(this),this.block.remove()}))):window.parent.confirmDelete(s.hitch(this,(function(){this.block._teardownMergeListeners(this),this.block.remove()}))),window.top.ga("send","event","draft_edit","delete",this.blockType)},displayEditorBodyClick:function(){this.block.openEditor(),window.top.ga("send","event","draft_edit","edit via body click",this.blockType)},displayEditor:function(){this.block.openEditor(),window.top.ga("send","event","draft_edit","edit automatically opened for user",this.blockType)},_cloneBlock:function(t){if(t&&a.stop(t),!this._cloning){this._cloning=!0;var e=this.source.cloneBlock(this),n=g(window.parent.document)[0],i=g("#previewcol .colbody",n)[0];x.smoothScroll({node:e.domNode,win:i,duration:250,onEnd:s.hitch(this,(function(){e.displayEditor(),this._cloning=!1}))}).play()}window.top.ga("send","event","draft_edit","duplicate",this.blockType)},changeContent:function(t){var e=this._renderMergeTags(t);c.place(e,this.containerNode,"only"),this._contentPostProcessing()},_renderMergeTags:function(t){return this.block._renderMergeTags?S.render(t):t},_contentPostProcessing:function(){this._handleImageUploader(),this._handleVideoPlaceholder(),this._handleContentLinks(),this._suppressFormEvents(),this._handleDynamicHeader()},_handleDynamicHeader:function(){if(!this.isMobile&&_.getBootstrappedInstance().flagIsOn(C.CONTENT_ENGINE_CA_DYNAMIC_HEADER)&&this.block.image&&this.allowAutoDesigner){c.empty(this.autoDesigner);c.place('<button role="button" data-action-type="autoDesignerBtn" class="button-small creative-assistant"><img src="/images/files/source-icon-content-engine-white.svg" alt="" class="button-image creative-assistant-icon">Creative Assistant</button>',this.autoDesigner)}},_handleVideoPlaceholder:function(){g(".mcpreview-video-placeholder",this.domNode).forEach((function(t){var e=c.toDom('<div class="imagePlaceholder"><div><img class="mojoImageItemIcon" src="/images/blocks/empty-video-144.png"></div><div><span>Add Video URL in editor</span></div></div>');c.place(e,t)}))},_handleImageUploader:function(){this.imageUploaders=t.map(this.imageUploaders,(function(t){return null===t?null:t.uploading?t:(t.destroyRecursive(),null)})),g(".mcpreview-image-uploader,.mcnImage",this.domNode).forEach(s.hitch(this,(function(t,e){var n;("template"===window.parent.app.editingType||this.block._campaignRenderingType&&this.block._campaignRenderingType.match(/^(regular|automation|page|automation-email|template)$/)&&!window.parent.app.isWebsitePage)&&(this.allowAutoDesigner=!0),this.imageUploaders[e]?(n=this.imageUploaders[e]).node=t:(n=new k({node:t,type:this.block._imageUploaderType,allowAutoDesigner:this.allowAutoDesigner}),this.connect(n,"onImageSelected",(function(n){if(!this.block.onImageUpload)throw new Error("Unable to upload an image to "+this.block.type+" because onImageUpload is not defined.");var i=l.get(t,"data-mc-id");i||(i=e),this.block.onImageUpload(n,i)})),this.imageUploaders.length<=e?this.imageUploaders.push(n):this.imageUploaders[e]=n),n.startup()})))},_handlePreviewResize:function(){g("img",this.domNode).onload((function(){window.parent.resizePreview()})),window.parent.resizePreview()},_handleContentLinks:function(){g("a:not(.mc-template-link)",this.containerNode).onclick((function(t){t.preventDefault()})),g("a.mc-template-link",this.containerNode).attr("target","_blank").onclick((function(t){t.stopImmediatePropagation()}))},_suppressFormEvents:function(){g("form",this.domNode).forEach((function(t){p(t,"submit",(function(t){t.preventDefault()}))}))},focus:function(){d.add(this.domNode,"focus"),w.globalPublish(this.selectedChannel,[this])},unFocus:function(){d.remove(this.domNode,"focus")},getIndex:function(){return this.source.getAllNodes().indexOf(this.domNode)},onContentDropped:function(e,n){var i=this._getAvailableImageUploaders(n),a=i.length>e.length?e.length:i.length;a&&(this.imageUploading=!0,this.block.set("_uploading",!0));var o=[];t.forEach(e.splice(0,a),s.hitch(this,(function(t,e){switch(i[e].onUploading(!0),t.type){case"image/url":case"image/file":o.push(i[e].upload(t))}}))),m(o).then(s.hitch(this,(function(e){var n=null;t.forEach(e,s.hitch(this,(function(t){t&&"error"===t.status&&(n=!0,w.globalPublish("show-toast",{message:t.error,type:"warning"}))}))),n&&this.refresh(),this.imageUploading=!1,this.block.set("_uploading",!1)})))},refresh:function(){return this.render(),this.block},render:function(){this.dynamicContentContainer&&this._updateDynamicContentBlock(),this.changeContent(this.block.getMarkup(this.source.containerWidth))},remove:function(){t.forEach(this.subscriptions,(function(t){t.remove()})),this.subscriptions=[],this._blockWatch.unwatch(),this.destroyRecursive()},_getAvailableImageUploaders:function(e){var n=[],i=t.filter(this.imageUploaders,(function(t){return t.domNode===e||g(e).closest(".mojoImageUploader")[0]===t.domNode}))[0];return i&&n.push(i),t.forEach(this.imageUploaders,(function(t){t!==i&&t.isPlaceholder&&n.push(t)})),n},_updateDynamicContentBlock:function(){this.block.hasDynamicContent?(this.dynamicContentContainer.innerHTML||c.place(this.dynamicContentLabelHTML,this.dynamicContentContainer),d.remove(this.dynamicContentContainer,"drag-improvement-empty")):(dojo.empty(this.dynamicContentContainer),d.add(this.dynamicContentContainer,"drag-improvement-empty"))}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div class="content__monkeyRewards">\n    <a data-dojo-attach-point="monkeyRewardsLink" href="" target="_blank">\n        Made with Mailchimp\n    </a>\n</div>'},function(t,e){t.exports='<div class="modalContent">\n    <div class="flash-block" data-dojo-attach-point="formResponseMessages"></div>\n    <div class="modalContent__content" data-dojo-attach-point="formContentContainer">\n        \n        \x3c!-- Title & Description - Holds HTML from CK editor --\x3e\n        <div class="content__titleDescription">\n            <div data-dojo-attach-point="descriptionContainer"></div>\n            <div class="content__fixedBadge" data-dojo-attach-point="fixedBadge"></div>\n        </div>\n\n        \x3c!-- Form Fields --\x3e\n\t\t<form action="${subscribeUrl}" accept-charset="UTF-8" method="post" enctype="multipart/form-data" data-dojo-attach-point="formNode" novalidate>\n\t\t\t<div class="content__formFields" data-dojo-attach-point="formFieldsContainer"></div>\n\t\t    <div class="content__button">\n\t\t        <input class="button" type="submit" value="${buttonLabel}" data-dojo-attach-point="submitButton"/>\n\t\t    </div>\n\t\t</form>\n\n        \x3c!-- Footer - Holds HTML from CK editor --\x3e\n        <div class="content__footer" data-dojo-attach-point="footerContainer"></div>\n    </div>\n    <div class="modalContent__image" data-dojo-attach-point="formImageContainer"></div>\n</div>'},function(t,e){t.exports='<div class="field-wrapper address">\n    <div>\n        <label for="mc-${name}-addr1">${label}</label>\n        <div class="helpText" data-dojo-attach-point="placeholderNode"></div>\n        <input class="address1" type="text" name="${name}[addr1]" value="" id="mc-${name}-addr1" data-dojo-attach-point="address1Node" />\n    </div>\n    <div>\n        <label for="mc-${name}-addr2">Address Line 2</label>\n        <input class="address2" type="text" name="${name}[addr2]" value="" id="mc-${name}-addr2" />\n    </div>\n    <div>\n        <label for="mc-${name}-city">City</label>\n        <input class="city" type="text" name="${name}[city]" value="" id="mc-${name}-city" data-dojo-attach-point="cityNode" />\n    </div>\n    <div>\n        <label for="mc-${name}-state">State/Province/Region</label>\n        <input class="state" type="text" name="${name}[state]" value="" id="mc-${name}-state" data-dojo-attach-point="stateNode" />\n    </div>\n    <div>\n        <label for="mc-${name}-zip">Postal / Zip Code</label>\n        <input class="zip" type="text" name="${name}[zip]" value="" id="mc-${name}-zip" data-dojo-attach-point="zipNode" />\n    </div>\n    <div>\n        <label for="mc-${name}-country">Country</label>\n        \x3c!-- TODO: Is there a formatting option for which country should be top of the list? --\x3e\n        <select class="country" name="${name}[country]" id="mc-${name}-country" data-dojo-attach-point="countrySelectNode">\n            <option value="" selected></option>\n            <option value="164">USA</option>\n        </select>\n    </div>\n</div>'},function(t,e){t.exports='<div class="field-wrapper radio-group">\n    <label for="mc-${name}">${label}</label>\n    <div class="helpText" data-dojo-attach-point="placeholderNode"></div>\n    <ul class="radioCheckboxContainer" data-dojo-attach-point="choicesContainer"></ul>\n</div>'},function(t,e,n){var i,a;i=[n(0),n(1),n(10),n(4),n(3),n(46),n(124),n(24),n(123),n(17),n(845),n(846),n(1463),n(16),n(21),n(26)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){return t([r,s],{templateString:h,renderedItems:null,shouldShowBreadcrumbsToOnboarding:null,positions:{before:"headerContainer",info:"infoContainer",default:"primaryItemsContainer",after:"secondaryItemsContainer"},emailEditorReminderType:null,renderedHtml:"",constructor:function(t){this.state={model:t.model,campaignType:t.campaignType}},save:function(t){return this.trackSave(),o(this.onSave(t,this.state.model),this._setModel.bind(this))},trackSave:function(){this.renderedItems.forEach((function(t){t.state.isActive&&"function"==typeof t.trackSave&&t.trackSave()}))},_setModel:function(t){this.setState({model:t}),this.renderStatus()},setActiveItem:function(){this.renderedItems.forEach((function(t){t.state.isActive||t.setState({isDisabled:!0})})),this.toggleSidebarIsItemActive(!0),this.status.setState({isItemActive:!0})},clearActiveItem:function(){this.trackCancel(),this.renderedItems.forEach((function(t){t.setState({isDisabled:!1})})),this.toggleSidebarIsItemActive(!1),this.status.setState({isItemActive:!1})},trackCancel:function(){this.renderedItems.forEach((function(t){t.state.isDisabled||"function"!=typeof t.trackCancel||t.trackCancel()}))},toggleSidebarIsItemActive:function(t){this.sidebar&&this.sidebar.setState({isItemActive:t})},render:function(){this.inherited(arguments),this.renderItems(),this.renderStatus(),this.renderSidebar(),this.renderBreadcrumbs(),this.renderEditorToggleReminderBlock()},renderBreadcrumbs:function(){this.shouldShowBreadcrumbsToOnboarding&&this.breadcrumbsLink.classList.remove("display--none")},renderSidebar:function(){if(this.sidebarWidget){this.sidebar&&this.sidebar.destroy();var t=this.sidebarContainer;a.remove(t,"hide"),this.sidebar=new this.sidebarWidget({model:this.state.model}),this.sidebar.placeAt(t)}},renderStatus:function(){var t=this.state.model,e=this.items.filter((function(e){return e.isComplete(t)&&e.isValid(t)})),i=e.length===this.items.length,a=this.items.length-e.length;this.status&&this.status.destroy();var o=n.byId("slot-campaignChecklistStatusBar");this.status=new this.statusWidget({model:t,completeItems:e,isReady:i,remainingItems:a,listDisabled:!!t.list&&t.list.disabled}),this.status.placeAt(o)},renderItems:function(){this.renderedItems&&this.renderedItems.forEach((function(t){t.unmount&&t.unmount()})),this.renderedItems=this.items.map((function(t){if("info"!==t.position||"regular"!==this.state.campaignType){var n=this.positions[t.position||"default"],i=new(t.widget||c)(e.mixin({},t,{onSave:this.save.bind(this),onActivate:function(){this.setActiveItem(),t.onActivate&&t.onActivate()}.bind(this),onDeactivate:this.clearActiveItem.bind(this),model:this.state.model,getCurrentlyRenderedItem:this.getCurrentlyRenderedItem.bind(this),badge:t.badge}));return i.placeAt(this[n]),i}}),this),this.renderedItems=this.renderedItems.filter((function(t){return!!t})),this.renderedItems[1].state.isDisabled!==this.items[1].isDisabled?this.renderedItems[1].state.isDisabled=this.items[1].isDisabled:this.renderedItems[2].state.isDisabled!==this.items[2].isDisabled&&(this.renderedItems[2].state.isDisabled=this.items[2].isDisabled)},getCurrentlyRenderedItem:function(t,e){if(this.renderedItems)return this.renderedItems.filter((function(e){return t===e.className}))[0]},_trackCreativeAssistatntUpgradeAction:function(t){g.googleAnalytics.trackEvent("creative assistant for email","cta","button",{dimension53:"upgrade",dimension54:window.location.pathname,dimension56:"upgrade moment",dimension96:"creative assistant for email",dimension97:t,dimension98:"access creative assistant emails"}),g.googleAnalytics.trackEvent("checkout ca email","start","checklist banner",{dimension54:window.location.pathname,dimension97:t})},renderEditorToggleReminderBlock:function(){if(this.emailEditorReminderType&&this.headerContainer){var t=new u({campaignId:this.model.campaignId,inlineEditor:"inline"===this.emailEditorReminderType,renderedHtml:this.renderedHtml});a.add(this.headerContainer,"email-toggle-reminder-block-container"),t.placeAt(this.headerContainer,"last")}else if(m.flagIsOn(p.CONTENT_ENGINE_CA_EMAIL_PAYWALL)&&this.model.showCreativeAssistantPaywallExperiment&&this.model.hasCreativeAssistantTemplate&&!this.userHasFeature("creative_assistant_for_email")&&this.headerContainer){var e=new l({body:{title:"Upgrade your account to send Creative Assistant emails and more",copy:"Send beautiful, on-brand emails with Creative Assistant plus much more when you upgrade."},fixedGATrackingCallback:this._trackCreativeAssistatntUpgradeAction,onCtaPressCallback:!0,featureName:"creative_assistant_for_email"});a.add(this.headerContainer,"email-toggle-reminder-block-container"),a.add(this.headerContainer,"ca-upgrade-banner"),g.googleAnalytics.trackEvent("checkout ca email","in view","checklist"),e.placeAt(this.headerContainer,"last")}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(13),n(1),n(5),n(10),n(7),n(6),n(3),n(9),n(28),n(55),n(54),n(31),n(2),n(80),n(14),n(15),n(8),n(72),n(21),n(124),n(274),n(99),n(100),n(478),n(456),n(275),n(123)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T){return t([e,w],{isRequestMapperDown:!1,campaignId:null,listId:null,title:"",sendCount:0,scheduledUserTime:null,sendCountWaiting:!1,shouldShowUpgrade:null,onReady:function(){if(f.parseEmoji(document.body),C.repositionFlashBlock(),C.moveFinalAction(this.$el.deliveryOptions),this.initNotifyDialog(),this.setupBatchDelivery(),this.setupScheduleOptions(),this.checkSendCountReady(),this.isRequestMapperDown)new I({campaignUrl:this.campaignUrl,campaignId:this.campaignId});window.dataLayer.push({event:"e_pageLoad",destination:"campaign_detail",outreach_id:this.outreachId,outreach_type:this.type,login_id:this.loginId?this.loginId:null,user_id:this.userId?this.userId:null}),this.emailSchedulingFeatures=this._getAuthEmailScheduling()},_getAuthEmailScheduling:function(){return{canSchedule:this.userHasFeature("campaign_scheduling"),canScheduleTimeWarp:this.userHasFeature("campaign_time_warp"),canOptimizeSendTime:this.userHasFeature("campaign_send_time_optimization"),canSendBatchDelivery:this.userHasFeature("campaign_scheduling_batch_delivery")}},setupBatchDelivery:function(){var t=a.byId("batch-count");t&&p(t,"change",n.hitch(this,(function(){var e=t.value,n=Math.floor((this.sendCount?this.sendCount:0)/e);this.$el.batchCountLabel.innerHTML=m.format(n,{places:0})})))},setupScheduleOptions:function(){i.forEach(["single-delivery","timewarp-on","optimize-on"],(function(t){g.byId(t)&&p(g.byId(t),"click",(function(){var e=s(".schedule-meta"),n=s("."+t+" ~ div");e.forEach((function(t){r.contains(t,"hide")||r.add(t,"hide")})),n.forEach((function(t){r.remove(t,"hide")}))}))})),g.byId("optimize-on")&&(p(g.byId("optimize-on"),"click",n.hitch(this,"_getOptimalSendTime")),p(g.byId("schedule-date"),"change",n.hitch(this,(function(){g.byId("optimize-on").checked&&this._getOptimalSendTime()}))),p(s(".optimize-option")[0],".try-again:click",n.hitch(this,(function(){this._getOptimalSendTime(!0)})))),this._setupScheduledClock()},checkSendCountReady:function(){this.sendCountWaiting&&this._pingSendCount()},_pingSendCount:function(t){t||(t=1e3),t>1e4&&(t=1e4),setTimeout(n.hitch(this,(function(){h.get(v.toUrl("/campaigns/wizard/check-send-count",{id:this.campaignId}),{handleAs:"json"}).then(n.hitch(this,(function(e){e.finished?window.location.reload():this._pingSendCount(2*t)})))})),t)},_setupScheduledClock:function(){var t=this;this.scheduleClock=new x({time:this.scheduledUserTime,width:42,height:42,cborder:"#373737",chand:"#373737",ccolor:"#373737",transition:!1},this.$el.scheduleClock),a.byId("schedule-hour")&&(p(a.byId("schedule-hour"),"change",(function(e){t.scheduleClock.setTime(this.value+":"+a.byId("schedule-minute").value)})),p(a.byId("schedule-minute"),"change",(function(e){t.scheduleClock.setTime(a.byId("schedule-hour").value+":"+this.value)}))),a.byId("schedule-hour-timewarp")&&(p(a.byId("schedule-hour-timewarp"),"change",(function(e){t.scheduleClock.setTime(this.value+":"+a.byId("schedule-minute-timewarp").value)})),p(a.byId("schedule-minute-timewarp"),"change",(function(e){t.scheduleClock.setTime(a.byId("schedule-hour-timewarp").value+":"+this.value)})))},openSocialShare:function(t,e,n){var i="warn-"+(n=n||"fill-large"),a="tick-"+n;this.shareSettings&&this.shareSettings.destroy();var c=s("[data-social-share="+t+"]")[0];if(!c)throw new Error("No social share container found");var u=s('[data-social-share-el="pr-container"]',c)[0],h=s('[data-social-share-el="pr-thumbnail"]',c)[0],p=s('[data-social-share-el="pr-title"]',c)[0],m=s('[data-social-share-el="desc"]',c)[0],g=s('[data-social-share-el="pr-desc"]',c)[0],f=s('[data-social-share-el="button"]',c)[0],v=s('[data-social-share-el="icon"]',c)[0];this.shareSettings=new S({campaignId:t,titleText:this.title,onSave:function(t){t.enabled&&t.description&&t.image_url&&t.title?(r.remove(v,i),r.add(v,a),r.remove(f,"p0"),d.set(f,"edit"),d.set(m,"Excellent! Your social card is ready to roll."),l.set(u,"display",""),o.set(h,"src",t.image_url),d.set(p,t.title),d.set(g,t.description)):t.enabled?(r.remove(v,a),r.add(v,i),r.add(f,"p0"),d.set(f,"resolve"),l.set(u,"display","none"),d.set(m,"Heads up! Your social cards need a few more details.")):(r.remove(v,a),r.add(v,i),r.add(f,"p0"),d.set(f,"resolve"),l.set(u,"display","none"),d.set(m,"You have not enabled Social Cards for your campaign."))}}),this.shareSettings.show()},initNotifyDialog:function(){var t=g.byId("author-finished");t&&s("form",t.domNode).on("submit",(function(e){s("input[type=checkbox]:checked",t.domNode).length||(e.stopPropagation(),e.preventDefault(),s(".error",t.domNode).html("You must choose at least one person to notify.").style("display",""))}))},sendConfirmed:function(t){try{g.byId("confirm-send").set("title","Sending..."),g.byId("confirm-send").set("closable",!1),g.byId("confirm-send").onCancel=function(){return!1},l.set("confirm-send-pre","display","none"),l.set("confirm-send-action","display","none"),l.set("confirm-send-post","display","block")}catch(t){console.log(t)}setTimeout((function(){document.location.href=v.toUrl("/campaigns/wizard/send",{id:t})}),600)},prepareSchedule:function(t){var e=s(".goToNextStepContainer")[0],i=a.byId("av-content"),o=s(".schedule")[0];c.wipeIn({node:o,duration:500}).play(),"none"!==l.get(e,"display")&&(u.animateProperty({node:i,duration:500,properties:{bottom:0}}).play(),u.animateProperty({node:e,duration:500,properties:{height:0,opacity:0},onEnd:n.hitch(this,(function(){this._scrollToBottom()}))}).play(),this._toggleSched(t))},cancelSchedule:function(t){var e=s(".goToNextStepContainer")[0],i=a.byId("av-content"),o=s(".schedule")[0];c.wipeOut({node:o,duration:500}).play(),0==l.get(e,"opacity")&&(u.animateProperty({node:i,duration:500,properties:{bottom:60}}).play(),u.animateProperty({node:e,duration:500,properties:{height:60,opacity:1},onEnd:n.hitch(this,(function(){this._scrollToBottom(),this._toggleSched(t)}))}).play())},_scrollToBottom:function(){var t=a.byId("av-content"),e=s(".bottom-page")[0];k.smoothScroll({node:e,win:t,duration:800}).play()},getAlertSchedulingContent:function(){var t="";return this.emailSchedulingFeatures.canSchedule||this.emailSchedulingFeatures.canScheduleTimeWarp&&this.emailSchedulingFeatures.canOptimizeSendTime?!this.emailSchedulingFeatures.canSchedule||this.emailSchedulingFeatures.canSendBatchDelivery&&this.emailSchedulingFeatures.canScheduleTimeWarp&&this.emailSchedulingFeatures.canOptimizeSendTime||(t="Upgrade to the Standard plan to refine your email schedule based on timezone, batch delivery, and subscriber engagement."):t="Schedule emails based on timezone, batch delivery and optimized send times to take control of your marketing.",{title:"Reach people when it matters",copy:t}},_toggleSched:function(t){if(this.shouldShowUpgrade){var e;this.emailSchedulingFeatures.canSchedule?this.emailSchedulingFeatures.canScheduleTimeWarp||this.emailSchedulingFeatures.canOptimizeSendTime||this.emailSchedulingFeatures.canSendBatchDelivery||(e="campaign_scheduling_advance_features"):e="campaign_scheduling";var n=new T({featureName:e,body:this.getAlertSchedulingContent(),gaTrackingCategory:"upsell_moment",gaTrackingAction:"button_click",gaTrackingLabelProps:{location:"plain_text_campaign",upgrade_reason:"schedule_campaign",button_text:"upgrade_now"},onComplete:function(){window.location.reload()},onCtaPressCallback:!0});this.emailSchedulingFeatures.canSchedule||this.emailSchedulingFeatures.canScheduleTimeWarp&&this.emailSchedulingFeatures.canOptimizeSendTime?!this.emailSchedulingFeatures.canSchedule||this.emailSchedulingFeatures.canSendBatchDelivery&&this.emailSchedulingFeatures.canScheduleTimeWarp&&this.emailSchedulingFeatures.canOptimizeSendTime||n.placeAt(this.$el.upgradeNotificationStandard,"only"):n.placeAt(this.$el.upgradeNotificationEssential,"only")}if(r.contains("delivery-options","open")){r.add("schedule-"+t,"hide"),r.add("schedule-delivery-options","hide"),r.remove("delivery-options","open");var i=g.byId("batch-delivery-on");i&&(i.attr("checked",!1),l.set("batch-options","display","none")),c.wipeOut({node:a.byId("schedule-"+t+"-panel"),duration:200}).play()}else r.remove("schedule-"+t,"hide"),r.add("delivery-options","open"),r.contains("schedule-delivery-options","hide")&&r.remove("schedule-delivery-options","hide"),c.wipeIn({node:a.byId("schedule-"+t+"-panel"),duration:200}).play()},doSchedule:function(){null!=g.byId("timewarp-on")&&g.byId("timewarp-on").checked?g.byId("confirm-timewarp").show():a.byId("schedule-form").submit()},acceptTermsDialog:function(){this.acceptEgpTerms(this.campaignId,(function(){g.byId("accept-terms-dialog").show()}))},acceptEgpTerms:function(t,e){var n=a.byId("accept-terms-signature").value;h.post(v.toUrl("/campaigns/accept-egp-terms"),{data:{sig:n,id:t},handleAs:"json"}).then((function(t){"success"===t.status?document.location.reload(!0):(alert(t.msg),e())}))},savePermissionReminder:function(){var t=a.byId("permission-reminder").value;t=t.replace(/^\s+/,"").replace(/\s+$/,"");var e=g.byId("permission-dialog");t||(alert("Please provide a permission reminder"),e.show()),h.post(v.toUrl("/lists/set-permission-reminder"),{data:{id:this.listId,reminder:t},handleAs:"json"}).then((function(t){"success"==t.status?document.location.reload(!0):(alert(t.msg),e.show())}))},_getOptimalSendTime:function(t){s(".optimize-option p").addClass("hide"),r.remove("optimizing","hide");var e=g.byId("schedule-date").valueNode.value;C.optimizeSendTime(this.campaignId,e,t).then((function(t){if(t.hour){var e=parseInt(t.hour,10),n=e>=12?"PM":"AM",i=e%12;0===i&&(i=12)}void 0===i||isNaN(i)?(s("#optimized-error .message").html("We couldn't find an optimal time for you."),s(".optimize-option p").addClass("hide"),r.remove("optimized-error","hide")):(s("#optimized-hour").html(i+" "+n),s(".optimize-option p").addClass("hide"),r.remove("optimized","hide"),a.byId("schedule-hour-optimized").value=i,a.byId("schedule-meridiem-optimized").value=n)}),(function(t){var e='There was an unknown error. <a href="#" class="try-again">Try again.</a>';if(t.message)e=t.message;else switch(t.reason){case"unavailable":e="This feature is currently not available. Try again at a later time."}s("#optimized-error .message").html(e),s(".optimize-option p").addClass("hide"),r.remove("optimized-error","hide")}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(6),n(31),n(29),n(24),n(15),n(8),n(1492),n(21),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([o],{templateString:l,validationMessage:"Your campaign name is too long.",constructor:function(t){this.state={isActive:!1,isDisabled:!!t.isDisabled&&t.isDisabled,isSaving:!1,error:"",name:t.model.name||"",status:t.model.status,parentId:t.model.parentId,isSingleEmailWelcome:t.isSingleEmailWelcome,flagNuni:d.flagIsOn(c.CUSTOMER_JOURNEYS_ONE_CLICK_WELCOME_NUNI),uniqueListId:t.model.uniqueListId,recipeId:t.model.recipeId}},edit:function(t){t.preventDefault(),this.state.isDisabled||(this.state.isDisabled||this.setState({isActive:!0}),this.onActivate(),window.ga("send","event","one_click_builder","click","edit_name"))},cancel:function(t){t.preventDefault(),this.state.name=this.model.name,this.setState({isActive:!1,error:""}),this.onDeactivate(),window.ga("send","event","one_click_builder","click","edit_name:cancel")},validate:function(t){return s.getSymbolLength(t)>100?this.validationMessage:null},updateValue:function(t){var e={};e[t.target.name]=t.target.value,e.error=this.validate(t.target.value),this.preserveFocus(t),this.setState(e)},shouldUpdate:function(t){return"name"!==t&&this.inherited(arguments)},save:function(t){t.preventDefault(),this.setState({isSaving:!0}),this.onSave({name:this.state.name}).then(e.hitch(this,(function(){this.setState({isActive:!1,isSaving:!1}),this.onDeactivate()})),e.hitch(this,(function(t){this.setState({isSaving:!1}),this.onDeactivate()}))),window.ga("send","event","one_click_builder","click","edit_name:save")},launchUseAdvancedSettingsModal:function(t){if(t.preventDefault(),!this.state.isDisabled){var e=new a({title:"Switch to advanced settings",onHide:function(){e.destroyRecursive()},onDownloadEnd:function(){n(".cancel-button",e.domNode).on("click",(function(t){t.stopPropagation(),t.preventDefault(),this.onclick=null,window.ga("send","event","one_click_builder","click","use_advanced_settings:cancel"),e.hide()})),n(".confirm-send-button",e.domNode).on("click",(function(){this.disabled=!0,window.ga("send","event","one_click_builder","click","switch_to_advanced_settings:use_advanced_settings");var t=document.getElementById("use-advanced-settings-form"),e=document.createElement("button");e.setAttribute("type","submit"),t.appendChild(e),e.click()}))}});e.setHref(r.toUrl("automations/confirm-use-advanced-settings",{parentId:this.state.parentId})),e.show()}},createNewWelcomeCJ:function(t){window.ga("send","event","one_click_builder","click","create_welcome_cj");var e=r.toUrl("/prebuilt-journeys/create-workflow-with-recipe"),n={list_id:this.state.uniqueListId,recipe_id:this.state.recipeId,workflow_name:this.state.name,settings:[]};return i.post(e,{handleAs:"json",data:JSON.stringify(n)}).then((function(t){document.location.href=r.toUrl("customer-journey/builder",{id:t.id})}),(function(t){s.toast("Error: "+t.response.data.error)}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(29),n(0),n(12),n(11),n(1),n(2),n(7),n(31),n(19),n(8),n(15),n(1497)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h,p,m=function(t){return"campaigns/plain-text/success/"+t},g=new e([n,i],{templateString:u,campaignId:null,postCreate:function(){this.own(o(this.cancelBtn,"click",a.hitch(this,"_onCancel")),o(this.regenBtn,"click",a.hitch(this,"_onRegen")),o(this.saveBtn,"click",a.hitch(this,"_onSave")))},setPlainText:function(t){this.textInput.value=t},getPlainTextFor:function(t){this.campaignId=t;var e=r.get(d.toUrl("campaigns/get-text",{id:t}),{handleAs:"json"});return e.then(a.hitch(this,(function(t){p.setPlainText(t.content)}))),e},_onSave:function(){c.toggleButtonLoadingState(this.saveBtn),r.post(d.toUrl("campaigns/text-update"),{data:{id:this.campaignId,text:this.textInput.value},handleAs:"json"}).then(a.hitch(this,(function(t){"error"!==t&&(h.hide(),l.publish(m(this.campaignId)),this.onSave&&this.onSave()),c.toggleButtonLoadingState(this.saveBtn)})))},_onRegen:function(){c.toggleButtonLoadingState(this.regenBtn),r.post(d.toUrl("campaigns/regen-text"),{data:{id:this.campaignId},handleAs:"json"}).then(a.hitch(this,(function(t){switch(t.status){case"error":c.toggleButtonLoadingState(this.regenBtn);break;default:s.set(this.textInput,"value",t.content),c.toggleButtonLoadingState(this.regenBtn)}})))},_onCancel:function(t){t.preventDefault(),t.stopPropagation(),h.hide()}});return{successTopic:m,show:function(e,n){h||((p=new g({onSave:n})).startup(),h=new t({class:"edit-plaintext-dialog",style:"width:760px",title:"Edit Plain-Text Version",content:p.domNode})),p.getPlainTextFor(e).then((function(){h.show()}))},hide:function(){h.hide()}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(18),n(46),n(228),n(259),n(8)],void 0===(a=function(t,e,n,i,a,o){var s,r,l=t(null,{constructor:function(t){this.type=t.field_type,this.name=t.name,this.var=t.var}}),d=t(null,{constructor:function(t){this.listId=t.list_id,this.type=t.list_type,this.name=t.name,this.size=t.size,this.mergeFields=(t.merge_fields||[]).map((function(t){return new l(t)})),this.hasInterestGroups=t.has_interest_groups,this.hasMergeFields=i(t.merge_fields).length>1,this.hasEcommerceStore=t.has_ecommerce_store,this.totalContacts=t.total_contacts,this.totalSubscribers=t.total_subscribers,this.hasPopupForm=t.has_popup_form,this.hasTags=t.has_tags},hasMergeFieldOfType:function(t){return this.mergeFields.filter((function(e){return e.type===t})).length>0},hasMergeFieldWithValue:function(t){return this.mergeFields.filter((function(e){return e.var===t})).length>0}});return{list:function(t){return e.get(o.toUrl("channels/get-all-lists"),{handleAs:"json",query:t||null}).then((function(t){return t.map((function(t){return new d(t)}))}))},cachedList:function(t){return r&&a(t,r.query)?Promise.resolve(r.data):s||(s=this.list.apply(this,[t]).then((function(e){return(r={data:e,query:t}).data})))},filters:{hasBirthday:function(t){return t.hasMergeFieldOfType("birthday")},hasDate:function(t){return t.hasMergeFieldOfType("date")},hasGroup:function(t){return t.hasInterestGroups},hasMergeField:function(t){return t.hasMergeFields},hasEcommerceStore:function(t){return t.hasEcommerceStore},hasAtLeast100Contacts:function(t){return t.totalContacts>=100},hasPopupForm:function(t){return t.hasPopupForm},hasTags:function(t){return t.hasTags}}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return{TYPES:{mailchimp:0,facebookPixel:1,googleAnalytics:2,ccpa:3,fbccpa:4},DATA_NAMES:{facebookPixel:"fb_pixel",googleAnalyticsTrackingId:"ga_tracking_id",hasAdsAccountPixel:"has_ads_account_pixel"}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(29),n(18),n(8),n(6),n(22)],void 0===(a=function(t,e,n,i,a){var o={delete:function(t){return e.post("/lists/surveys/delete",{data:JSON.stringify({"survey_id[]":t})})},replicate:function(t){return e.post(n.toUrl("/lists/surveys/replicate-post",{survey_id:t}),{handleAs:"json"}).then((function(t){return{replicaSurveyId:t.replica_survey_id}}))},getPublicUrl:function(t){return e.get(n.toUrl("lists/surveys/get-public-url",{survey_id:t}),{handleAs:"json"}).then((function(t){return{url:t.url}}))},showDeletionPrompt:function(e){var s=new a,r=new t({title:"Are you sure?",onHide:function(){r.destroyRecursive()},onDownloadEnd:function(){i(".cancel-button",r.domNode).on("click",(function(t){t.stopPropagation(),t.preventDefault(),r.hide()})),i("form",r.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault();e.length;o.delete(e).then((function(){r.hide(),s.resolve()}),(function(){r.hide(),s.reject()}))}))}});return r.setHref(n.toUrl("/lists/surveys/delete-confirm",{})),r.show(),s.promise}};return o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1588)],void 0===(a=function(t){return new t({})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(13),n(6),n(2),n(1),n(5),n(18),n(7),n(3),n(9),n(4),n(37),n(28),n(10),n(19),n(14),n(29),n(99),n(15),n(8),n(45),n(36),n(26),n(38),n(48),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k){var S=function(t){n(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()}))};return{initSaveReportNameModal:function(){var t=this,e=n("[data-action='edit-report-name']")[0],a=n("[data-action='close-report-name-dialog']")[0],r=n("[data-action='save-report-name']")[0],l=g.byId("name-report-dialog");i(e,"click",(function(){l.show()})),i(a,"click",(function(){l.hide()})),i(r,"click",(function(){var e=p.byId("report-name").value;s.post(y.toUrl("/pro/reports/save-report-name"),{query:{id:t.reportId,name:e}}).then((function(t){var i=n("[data-element='report-name']");o.forEach(i,(function(t,n){t.innerHTML=k.encode(e)})),m.publish("new-report-name",{newName:e}),l.hide()}))}))},shareReport:function(t){var e=new f({title:"Share latest snapshot",onHide:function(){e.destroyRecursive()},onDownloadEnd:function(){S(e),n("form",e.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault();w.toObject(this);s.post(r.get(this,"action"),{data:w.toObject(this)}).then((function(t){e.hide(),b.toast(t),C.pythia.logEvent("Pro_Reports_ShareReport")}),(function(){e.hide(),b.toast("There was a problem sharing the latest report's snapshot. Please try again.","error")}))})),n("[data-action='revoke-access']",e.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault();var i=this.id;s.post(y.toUrl("pro/reports/delete-share"),{data:{id:t,report_share_id:this.id}}).then((function(t){_(p.byId("share_"+i),{display:"none"},{easing:"easeInSine",duration:500,complete:function(){if(c.destroy("share_"+i),0===n(".share-row").length){var t=n("[data-element='share-with-container']")[0];l.add(t,"hide")}}})}),(function(){console.log("fail")}))}))}});e.setHref(y.toUrl("pro/reports/share-dialog",{id:t})),e.show()},_initScheduleInterface:function(){var t=g.byId("schedule-frequency"),e=(n("[data-element='at']")[0],n("[data-element='time']")[0],n("[data-element='start-on']")[0]),a=n("[data-element='day-of-week']")[0];i(t,"change",(function(){e&&!l.contains(e,"hide")&&l.add(e,"hide"),a&&!l.contains(a,"hide")&&l.add(a,"hide"),"weekly"===this.getValue()&&(l.remove(e,"hide"),l.remove(a,"hide"))}))},scheduleReport:function(t){var e=this,i=new f({title:"Schedule this report",onHide:function(){i.destroyRecursive()},onDownloadEnd:function(){S(i),e._initScheduleInterface(),n("form",i.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault();w.toObject(this);s.post(r.get(this,"action"),{data:w.toObject(this)}).then((function(t){i.hide(),b.toast("Great, your report has been scheduled!"),C.pythia.logEvent("Pro_Reports_ScheduleReport"),location.reload()}),(function(){i.hide(),b.toast("There was a problem scheduling this report. Please try again.","error")}))}))}});i.setHref(y.toUrl("pro/reports/schedule-dialog",{id:t})),i.show()},unscheduleReport:function(t){s.post(y.toUrl("pro/reports/unschedule",{id:t})).then((function(t){b.toast("Sure thing, we have unscheduled your report!"),C.pythia.logEvent("Pro_Reports_UnScheduleReport"),location.reload()}),(function(){b.toast("There was a problem unscheduling this report. Please try again.","error")}))},confirmDeletion:function(t,e){var i=new f({title:"Are you sure?",onHide:function(){i.destroyRecursive()},onDownloadEnd:function(){S(i),n("form",i.domNode).on("submit",(function(n){n.stopPropagation(),n.preventDefault();var a=w.toObject(this),o=0;for(var l in a)a.hasOwnProperty(l)&&0===l.indexOf("id[")&&o++;s.post(r.get(this,"action"),{data:w.toObject(this)}).then((function(){i.hide(),t.render()}),(function(){i.hide(),b.toast("There was a problem deleting your "+e+(1!=o?"s":"")+". Please try again.","error")}))}))}});i.setHref(y.toUrl("pro/reports/confirm-delete",{"id[]":t.getSelection()})),i.show()}}}.apply(e,i))||(t.exports=a)},function(t,e){t.exports=window.require("dojo/dom-prop")},function(t,e,n){var i,a;i=[n(0),n(13),n(8),n(14),n(3),n(10),n(6),n(7),n(9),n(18),n(57)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t(null,{webhookHeadCheckAll:function(){var t=[];s(".check-on-load").forEach((function(e,n){var i=r.get(e,"id"),a=r.get(e,"data-dojo-url"),o={};o.dom_id=i,o.url=a,t.push(o)})),this._checkHead(t)},reCheckHead:function(t,e){var n=[],i={};i.dom_id=t,i.url=e,n.push(i),a.add("pulse-"+t,"block"),a.remove("enabled-"+t,"block"),a.add("enabled-"+t,"hide"),o.byId("errored-"+t).innerHTML="",this._checkHead(n)},purgeRunningJobs:function(t){d(n.toUrl("/peaches2/admin/webhooks/purge-stuck-jobs"),{handleAs:"json",query:{user_id:t}}).then((function(t){var e=t.msg;"error"===t.status&&(e="Unable to purge running jobs: "+t.msg),c.utils.setFlash(e,t.status)}))},purgeEnqueuedJobs:function(t){d(n.toUrl("/peaches2/admin/webhooks/purge-enqueued-jobs"),{handleAs:"json",query:{user_id:t}}).then((function(t){var e=t.msg;"error"===t.status&&(e="Unable to purge enqueued jobs: "+t.msg),c.utils.setFlash(e,t.status)}))},_checkHead:function(t){var e="",i="",s="";d(n.toUrl("/peaches2/admin/webhooks/check-head"),{handleAs:"json",query:{urls:JSON.stringify(t)}}).then((function(n){for(var r=0;r<n.results.length;r++){if(i=n.results[r].status,e=t[n.results[r].index].dom_id,s=n.results[r].response_time,null==i)o.byId("badge-"+e).innerHTML="ERROR",a.add("badge-"+e,"error"),a.remove("icon-"+e,"time-circle"),a.remove("icon-"+e,"tick-circle"),a.add("icon-"+e,"not-allowed"),a.add("icon-"+e,"error"),void 0!==n.results[r].msg&&(o.byId("errored-"+e).innerHTML=n.results[r].msg,a.remove("errored-"+e,"hide"));else{var l=i;i>=200&&i<400?(a.remove("icon-"+e,"time-circle"),a.add("icon-"+e,"tick-circle"),a.add("icon-"+e,"success"),a.add("badge-"+e,"success")):(a.remove("icon-"+e,"time-circle"),a.add("icon-"+e,"not-allowed"),a.add("icon-"+e,"error"),a.add("badge-"+e,"error")),void 0!==s&&(l=l+" in "+s+"ms"),o.byId("badge-"+e).innerHTML=l}a.remove("pulse-"+e,"block"),a.add("pulse-"+e,"hide"),a.add("enabled-"+e,"block"),a.remove("enabled-"+e,"hide")}}))},disableWebhook:function(t,e,n,s,r){d(t+"/peaches2/admin/webhooks/disable",{handleAs:"json",query:{user_id:e,list_id:n,url:s}}).then((function(t){if("success"===t.status){void 0!==t.since&&" since "+t.since,a.add("enabled-wrapper-"+r,"hide"),a.remove("enabled-"+r,"block"),a.remove("pulse-"+r,"block"),a.add("pulse-"+r,"hide"),a.add("paused-"+r,"block"),l.set(o.byId("pause-button-"+r),"display","none"),l.set(o.byId("activate-button-"+r),"display","block")}else i.byId("pause-webhook-error").show()}))},enableWebhook:function(t,e,n,r,c){var u=this;d(t+"/peaches2/admin/webhooks/enable",{handleAs:"json",query:{user_id:e,list_id:n,url:r}}).then((function(t){"success"===t.status?(s("#paused-"+c+" span.badge")[0].innerHTML="Paused",a.remove("enabled-wrapper-"+c,"hide"),a.add("enabled-"+c,"block"),a.add("paused-"+c,"hide"),a.remove("paused-"+c,"block"),l.set(o.byId("pause-button-"+c),"display","block"),l.set(o.byId("activate-button-"+c),"display","none"),u.reCheckHead(c,r)):i.byId("enable-webhook-error").show()}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(37),n(10),n(7),n(6),n(1),n(5),n(45),n(3),n(4),n(9),n(31),n(43),n(2),n(55),n(16),n(8),n(17),n(14),n(19),n(29),n(36),n(200),n(48),n(311)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_){var C=null,k=[],S=null,x={showBulkDialog:function(t,e){var n,i=new y({title:"Are you sure?",onHide:function(){i.destroyRecursive()},onDownloadEnd:function(){T(i),I(i)}});this.grid=v.byId("member-grid");var o={id:t};this.grid&&this.grid.segment&&this.grid.allAll&&(o.segment_type=this.getSegmentType()),n=g.toUrl("lists/bulk-action-confirm",a.mixin(o,e)),i.setHref(n),i.show()},confirmBulkAction:function(t){var e=Array.prototype.slice.apply(arguments).slice(1);this.confirmBulkActionWithParameters(t,listId,!0,!1,null,e)},confirmBulkActionWithParameters:function(t,e,n,i,a,o){void 0===o&&(o=[]);var s={id:e,action:t,"params[]":o};if(n){var r=v.byId("member-grid");r.allAll?s.member_count="all":s.member_count=r.getSelection().length}i&&(s.member_count="all"),C=t,k=o,S=a,this.showBulkDialog(e,s)},getSegmentType:function(){return this.grid.segment.id?"saved|advanced":"preview"},bulkAction:function(t){if("remove"===C){var e=i("[name='remove_contacts']:checked")[0];C="archiveRadio"===e.id?"archive":"delete"}var n=v.byId("member-grid"),a={id:t,action:C,"params[]":k};"delete"===C&&(a.hard_delete=!0),!n||n.allAll?(a.members="all",n&&n.segment&&(a.segment_type=this.getSegmentType())):a["members[]"]=n.getSelection(),dojo.xhrPost({url:g.toUrl("lists/bulk-action"),content:a,handleAs:"json",load:function(t){var e;n&&n.toggleAll(!1),t.error?(e=dojo.byId("bulk-error"),dojo.query(".bulk-msg-error")[0].innerHTML=t.error):t.error_msg?dojo.query(".bulk-msg-error")[0].innerHTML=t.error_msg:(e=dojo.byId("bulk-success"),dojo.query(".bulk-msg-success")[0].innerHTML=t.msg,S&&S()),t.done&&v.byId("member-grid")&&v.byId("member-grid").requery(),w(e,"stop"),w(e,{maxHeight:["400px","easeIn",0]},{duration:225,display:"block"});setTimeout((function(){w(e,"stop"),w(e,{maxHeight:[0,"easeOut","400px"]},{duration:225,display:"none"})}),1e4)}})},unarchiveContacts:function(t,e){return c.post(g.toUrl("/lists/members/unarchive"),{handleAs:"json",data:{list_id:t,list_member_ids:JSON.stringify(e)}})}},I=function(t){var e=i("[data-mc-title]",t.containerNode)[0];if(e){var a=n.get(e,"data-mc-title");t.set("title",a)}},T=function(t){i(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()})),i(".refresh-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide(),window.location.reload()})),i(".bulk-action-button",t.domNode).on("click",(function(e){var n;e.stopPropagation(),e.preventDefault(),(!(n=v.byId("confirmDeleteInput"))||n.validate()||"archiveRadio"===i("[name='remove_contacts']:checked")[0].id)&&(x.bulkAction(v.byNode(this).value),t.hide())})),i("[name='remove_contacts']").on("click",(function(t){var e=i(".permanentDeleteWarning")[0];"deleteRadio"===t.target.id?r.remove(e,"hide"):r.add(e,"hide")}))};return x}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(160),n(80),n(484)],void 0===(a=function(t,e,n,i){var a=t.getObject("dojox.validate",!0);return a.isText=function(t,e){return e="object"==typeof e?e:{},!/^\s*$/.test(t)&&(("number"!=typeof e.length||e.length==t.length)&&(!("number"==typeof e.minlength&&e.minlength>t.length)&&!("number"==typeof e.maxlength&&e.maxlength<t.length)))},a._isInRangeCache={},a.isInRange=function(t,e){if(t=n.parse(t,e),isNaN(t))return!1;var i="number"==typeof(e="object"==typeof e?e:{}).max?e.max:1/0,o="number"==typeof e.min?e.min:-1/0,s="string"==typeof e.decimal?e.decimal:".",r=a._isInRangeCache,l=t+"max"+i+"min"+o+"dec"+s;return void 0!==r[l]||(r[l]=!(t<o||t>i)),r[l]},a.isNumberFormat=function(t,e){return new RegExp("^"+i.numberFormat(e)+"$","i").test(t)},a.isValidLuhn=function(e){var n,i,a=0;t.isString(e)||(e=String(e)),n=(e=e.replace(/[- ]/g,"")).length%2;for(var o=0;o<e.length;o++)i=parseInt(e.charAt(o)),o%2==n&&(i*=2),i>9&&(i-=9),a+=i;return!(a%10)},a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.u=e.models=void 0;var i=h(n(1)),a=(h(n(2)),h(n(3)),h(n(4))),o=h(n(6)),s=h(n(7)),r=h(n(8)),l=h(n(9)),d=h(n(10)),c=h(n(11)),u=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p={},m={};p.scatterTimeSeriesChart=a.default,p.lineChart=o.default,p.lineTimeSeriesChart=s.default,p.multiLineChart=r.default,p.multiLineTimeSeriesChart=l.default,p.ordinalBarChart=d.default,p.stackBarChart=c.default,p.doughnutChart=u.default,m.percentageTick=i.default.percentageTick,m.numberTick=i.default.numberTick,m.timeTick=i.default.timeTick,m.currencyTick=i.default.currencyTick,m.stringTick=i.default.stringTick,e.models=p,e.u=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={colors:["#2c9ab7","#9f7d9c","#f69343","#FEBE12","#959595"],scaleType:{LINEAR:"LINEAR",IDENTITY:"IDENTITY",POWER:"POWER",LOG:"LOG",QUANTIZE:"QUANTIZE",QUANTILE:"QUANTILE",THRESHOLD:"THRESHOLD",ORDINAL:"ORDINAL",TIME:"TIME"}},i=(e.parseDate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"%Y-%m-%d",n=d3.time.format(e).parse;return n(t)},e.percentageTick=function(t){return t+"%"});n.percentageTick=i;var a=e.numberTick=function(t){return d3.format("s")(t)};n.numberTick=a;var o=e.timeTick=d3.time.format.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%b",function(t){return t.getMonth()}],["%Y",function(){return!0}]]);n.timeTick=o;var s=e.currencyTick=function(t){return d3.format("$s")(t)};n.currencyTick=s;var r=e.stringTick=function(t){return t};n.stringTick=r,e.debounce=function(t,e,n){var i,a,o=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),a=0;a<n;a++)i[a]=arguments[a+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(e+1);for(a=0;a<e;a++)o[a]=arguments[a];return o[e]=i,t.apply(this,o)}},s=o((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),r=function(e,n){i=null,n&&(a=t.apply(e,n))},l=o((function(o){var l=n&&!i;return i&&clearTimeout(i),l?(i=setTimeout(r,e),a=t.apply(this,o)):n||(i=s(r,e,this,o)),a}));return l.cancel=function(){clearTimeout(i),i=null},l},e.createId=function(){return Math.random().toString(36).substr(2,9)},e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t="mcchart-tooltip-"+(new Date).getTime(),e=null,n=!1,i="500",a=!1,o=null,s=null,r=function(t){return t},l=0,d=0;function c(){n&&(o||(e=e||document.body,o=e.append("div").attr("class","mcchart-tooltip").attr("id",t).style("opacity",0).style("background-color","#241C15").style("border","0px solid #241C15").style("color","#ffffff").style("top",0).style("left",0)),s=o.node().getBoundingClientRect())}return c.data=function(t,e,i,a,c){n&&(o.html(r(t)),a<l?(e+=d,o.classed("mcchart-tooltip--flipped",!1),o.style("transform","translate("+e+"px,"+i+"px)")):(e=e-s.width-d,o.classed("mcchart-tooltip--flipped",!0),o.style("transform","translate("+e+"px,"+i+"px)")))},c.hide=function(){n&&(a&&o.style("opacity",0),a=!1)},c.show=function(){n&&(a||o.style("opacity",.9),a=!0)},c.xOffset=function(t){return arguments.length?(d=t,c):d},c.enabled=function(t){return arguments.length?(n=t,c):n},c.chartContainer=function(t){return arguments.length?(e=t,c):e},c.duration=function(t){return arguments.length?(i=t,c):i},c.dataFormatter=function(t){return arguments.length?(r=t,c):r},c.flipPoint=function(t){return arguments.length?(l=t,c):l},c.getHtmlNode=function(){return arguments.length?c:s},c}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t="mcchart-legend-"+(new Date).getTime(),e=null,n=null,i=[],a=null,o="left",s=15,r=15,l=10,d=5,c=30;function u(){console.log("legend fn")}return u.createLegend=function(t,u,h){e=t,n=u;var p,m,g,f=[];(a=h).selectAll("g").data(n).enter().append("g").attr("class","mcchart-legendSeries"),a.selectAll(".mcchart-legendSeries").append("rect").classed({"mcchart-legendBox":!0}).attr("rx",3).attr("ry",3).attr("width",s).attr("height",r).style("fill",(function(t,n){return e.colors()[n]})),a.selectAll(".mcchart-legendSeries").append("text").classed({"mcchart-legendText":!0}).attr("font-size","14px").text((function(t,e){return void 0===i[e]&&(i[e]="Series "+(e+1)),i[e]})).attr("x",s+l).attr("y",r/2+d),a.selectAll(".mcchart-legendSeries").attr("transform",(function(t,e){var n=d3.select(this).node().getBoundingClientRect().width,i=Math.ceil(n+c);return f.length>0?f[e]={w:i,x:f[e-1].x+f[e-1].w}:f[e]={w:i,x:0},"translate("+f[e].x+",0)"})),p=o,m=0,g=a.node().getBoundingClientRect().width,"left"===p&&(m=e.options.margin.left),"right"===p&&(m=e.width()-e.options.margin.right-g),a.attr("transform","translate("+m+",0)")},u.id=function(){return arguments.length?(console.error("Legend Id is automatically generated, can't set Id attribute"),u):t},u.seriesLabels=function(t){return arguments.length?(i=t,u):i},u.container=function(t){return arguments.length?(a=t,u):a},u.horizontalAlign=function(t){return arguments.length?(o=t,u):o},u.keyWidth=function(t){return arguments.length?(s=t,u):s},u.keyHeight=function(t){return arguments.length?(r=t,u):r},u.xOffset=function(t){return arguments.length?(l=t,u):l},u.yOffset=function(t){return arguments.length?(d=t,u):d},u.seriesSpacing=function(t){return arguments.length?(c=t,u):c},u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=(0,a.default)(),d={top:30,right:20,bottom:50,left:60},c=640,u=null,h=16,p=9,m=500,g=!0,f=r.default.colors,v=(0,o.default)(),b=!1,y="Hmmm, seems there is no data to show",w=!0,_=20,C=200,k=null,S=d3.bisector((function(t){return T.value(t)})).left,x=0,I=0,T=(0,i.default)("X"),A=(0,i.default)("Y");function j(i){i.each((function(i){n=i,(e=d3.select(this)).classed({"mcchart-container":!0}),g&&(c=e.node().getBoundingClientRect().width);var a=e.selectAll("svg").data([n]);a.attr("id","svg-"+this.id),a.classed({"mcchart-svg":!0});var o=a.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");a.attr("width",c),u=c*p/h,a.attr("height",u);var P=a.select("g");P.classed({"mcchart-scatterTimeSeriesChart":!0}),P.attr("transform","translate("+d.left+", "+d.top+")");var D=a.append("g").attr("class","mcchart-legendWrap");v.createLegend(j,[n],D),b||a.select(".mcchart-legendWrap").selectAll("*").remove(),j.update=function(t){n=t},j.redraw=function(){a.remove(),e.call(j)},x=Math.ceil(u-d.top-d.bottom),I=c-d.left-d.right;var N,L=d3.time.scale();L.type=r.default.scaleType.TIME,T.createAxis(j,n,L),N=o,T.setTicks(T.maxTicks(),T.maxResponsiveTicks()),0==!!T.tickFormat()&&T.tickFormat(s.timeTick),T.axis().scale(T.scale()).orient("bottom").tickFormat(T.tickFormat()),N.append("g").attr("class","mcchart-x mcchart-x-"+t+" mcchart-axis").classed("mcchart-tick--hide",!T.showTicks()).attr("transform","translate(0, "+x+")").call(T.axis());var M=d3.scale.linear();M.type=r.default.scaleType.LINEAR,A.createAxis(j,n,M),function(e){A.setTicks(A.maxTicks(),A.maxResponsiveTicks()),0==!!A.tickFormat()&&A.tickFormat(s.numberTick),A.axis().scale(A.scale()).tickSize(-I,0,0).tickFormat(A.tickFormat()).tickPadding(10).orient("left"),e.append("g").attr("class","mcchart-y mcchart-y-"+t+" mcchart-axis").classed("mcchart-tick--hide",!A.showTicks()).call(A.axis()),""!==A.label()&&d3.select(".mcchart-y-"+t).append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(A.label())}(o),function(t,e){var n=void 0,i=void 0;c<m?(n=1.5,i=3):(n=3,i=3.5),(!w||e.length>500)&&(_=0,C=0),setTimeout((function(){t.selectAll("mcchart-dot").data(e).enter().append("circle").attr("r",1e-6).style("opacity",1e-6).attr("cx",(function(t){return T.scale(T.value(t))})).attr("cy",(function(t){return A.scale(A.value(t))})).attr("stroke-width",n).attr("fill","#FFFFFF").attr("stroke",f[0]).transition().delay((function(t,e){return e*_})).duration(C).attr("r",i).style("opacity",1)}),500)}(o.append("g").attr("class","mcchart-scatterContainer"),n);var B,R=o.append("g").attr("class","mcchart-focus");k=o.append("rect"),R.style("display","none"),k.attr("width",I).attr("height",x).attr("class","mcchart-interactive mcchart-interactive-"+t),j.noDataContainer=o.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),j.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+I/2+","+x/2+")").attr("text-anchor","middle").text(y),B=j.noDataContainer,n.every(E)?(B.classed("mcchart-noDataContainer--hide",!1),B.transition().delay(C).duration(C/2).attr("opacity",1)):B.transition().duration(C/2).attr("opacity",0).each("end",(function(){B.classed("mcchart-noDataContainer--hide",!0)})),R.append("line").attr("class","mcchart-focus-y-line-"+t).style("stroke","#999999").style("stroke-width","2px").style("stroke-dasharray","4,4").style("opacity",.5).attr("y1",0).attr("y2",x),l.enabled()&&(l.chartContainer(e),l.flipPoint(I/2),R.append("div").call(l),k.on("mouseover",(function(){R.style("display",null),l.show()})).on("mouseout",(function(){R.style("display","none"),l.hide()})).on("mousemove",(function(e){var n=d3.mouse(this)[0],i=d3.mouse(this)[1],a=T.scale().invert(n),o=S(e,a,1),s=e[o-1],r=e[o];if(void 0!==r){var d=a-T.value(s)>T.value(r)-a?r:s,u=c-I,h=T.scale(T.value(d)),p=A.scale(A.value(d));R.select(".mcchart-focus-y-line-"+t).attr("transform","translate("+h+", "+p+")").attr("y2",x-A.scale(A.value(d))),l.data(d,h+u-20,p,n,i)}}))),g&&d3.select(window).on("resize",(0,s.debounce)((function(){j.animate(!1),j.redraw()}),500))}))}function E(t){return 0===A.value(t)||"0"===A.value(t)}return j.loadChart=function(t,e){d3.select(t).datum(e).call(j)},j.noDataMessage=function(t){return arguments.length?(y=t,j):y},j.colors=function(t){return arguments.length?(f=t,j):f},j.width=function(t){return arguments.length?(c=t,j):c},j.height=function(t){return arguments.length?(u=t,j):u},j.scaleWidth=function(t){return arguments.length?(I=t,j):I},j.scaleHeight=function(t){return arguments.length?(x=t,j):x},j.mobileThreshold=function(t){return arguments.length?(m=t,j):m},j.tooltip=function(t){return arguments.length?(l=t,j):l},j.responsive=function(t){return arguments.length?(g=t,j):g},j.aspectRatio=function(t,e){return arguments.length?(h=t,p=e,j):{aspectWidth:h,aspectHeight:p}},j.legend=function(t){return arguments.length?(v=t,j):v},j.showLegend=function(t){return arguments.length?(b=t,j):b},j.animate=function(t){return arguments.length?(w=t,j):w},j.xAxis=T,j.yAxis=A,j.options={},j.options.id=t,j.options.margin=d,j.options.type="scatterTimeSeries",j};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=null,n=null,i=0,a=[],s=d3.svg.axis(),r=t,l=function(t){return t[i]},d="",c=null,u=0,h=!0,p=10,m=4,g=null,f="%Y-%m-%d";function v(){}return v.createAxis=function(t,s,d){return e=t,n=s,c=d,(!r||"X"!==r&&"Y"!==r)&&console.error(r,": Must pass axis type: 'X' or 'Y' in order to create it."),"X"===r?(u=e.scaleWidth(),c.range([0,u])):(u=e.scaleHeight(),c.range([u,0])),c.type===o.default.scaleType.ORDINAL?(e.options.hasOwnProperty("type")&&"stackBar"===e.options.type?c.domain(n[0].map((function(t){return t.x}))):c.domain(n.map(l)),!e.options.hasOwnProperty("type")||"ordinalBar"!==e.options.type&&"stackBar"!==e.options.type||c.rangeRoundBands([0,u],e.options.barPad)):function(){if("X"===r)if(n[0].length){var t=[];c.type===o.default.scaleType.LINEAR?(n.forEach((function(e){t.push(e.length)})),c.domain([0,d3.max(t)])):(n.forEach((function(e){e.forEach((function(e){e.hasOwnProperty(i.toString())&&t.push(+e[i])}))})),c.domain(d3.extent(t)))}else c.type===o.default.scaleType.LINEAR?c.domain([0,n.length]):c.domain(d3.extent(n,(function(t){return+l(t)})));else if(e.options.hasOwnProperty("type")&&"stackBar"===e.options.type){var s,d=n[n.length-1];s=d3.max(d,(function(t){return t.y0+t.y})),c.domain([0,s]).nice()}else{var u=[];a.length?(n.forEach((function(t,e){t.forEach((function(t){t.hasOwnProperty(a[e])&&u.push(Number(t[a[e]]))}))})),c.domain([0,d3.max(u)]).nice()):c.domain([0,d3.max(n,(function(t){return Number(l(t))}))])}}(),v},v.value=function(t){return arguments.length?l(t):l},v.scale=function(t){return arguments.length?c(t):c},v.axis=function(t){return arguments.length?(s=t,v):s},v.keyValue=function(t){return arguments.length?(i=t,v):i},v.keyValues=function(t){return arguments.length?(a=t,v):a},v.label=function(t){return arguments.length?(d=t,v):d},v.tickFormat=function(t){return arguments.length?(g=t,v):g},v.maxTicks=function(t){return arguments.length?(p=t,v):p},v.maxResponsiveTicks=function(t){return arguments.length?(m=t,v):m},v.axisDateFormat=function(t){return arguments.length?(f=t,v):f},v.setTicks=function(t,n){return e.width()<e.mobileThreshold()?v.axis().ticks(n):v.axis().ticks(t),v},v.showTicks=function(t){return arguments.length?(h=t,v):h},v};var i,a=n(1),o=(i=a)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=null,d=null,c=(0,a.default)(),u={top:30,right:20,bottom:50,left:60},h=640,p=null,m=16,g=9,f=500,v=!0,b=r.default.colors,y=(0,o.default)(),w=!1,_="Hmmm, seems there is no data to show",C=!0,k=b[0],S="monotone",x=0,I=0,T=(0,i.default)("X"),A=(0,i.default)("Y"),j=d3.bisector((function(t){return t.index})).left;function E(i){i.each((function(i){null===l&&(l=i),(e=d3.select(this)).classed({"mcchart-container":!0}),v&&(h=e.node().getBoundingClientRect().width),(d=e.selectAll("svg").data([l])).attr("id","svg-"+this.id),d.classed({"mcchart-svg":!0});var a=d.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");d.attr("width",h),p=h*g/m,d.attr("height",p);var o=d.select("g");o.classed({"mcchart-lineTimeSeriesChart":!0}),o.attr("transform","translate("+u.left+","+u.top+")");var f=d.append("g").attr("class","mcchart-legendWrap");y.createLegend(E,[l],f),w||d.select(".mcchart-legendWrap").selectAll("*").remove(),x=Math.ceil(p-u.top-u.bottom),I=h-u.left-u.right;var b,C=d3.scale.linear();C.type=r.default.scaleType.LINEAR,T.createAxis(E,l,C),b=a,T.setTicks(T.maxTicks(),T.maxResponsiveTicks()),0==!!T.tickFormat()&&T.tickFormat(s.numberTick),T.axis().scale(T.scale()).orient("bottom").tickFormat(T.tickFormat()),b.append("g").attr("class","mcchart-x mcchart-axis").classed("mcchart-tick--hide",!T.showTicks()).attr("transform","translate(0, "+x+")").call(T.axis());var k=d3.scale.linear();k.type=r.default.scaleType.LINEAR,A.createAxis(E,l,k),function(t){A.setTicks(A.maxTicks(),A.maxResponsiveTicks()),0==!!A.tickFormat()&&A.tickFormat(s.numberTick),A.axis().scale(A.scale()).tickSize(-I,0,0).tickFormat(A.tickFormat()).tickPadding(10).orient("left"),t.append("g").attr("class","mcchart-y mcchart-axis").classed("mcchart-tick--hide",!A.showTicks()).call(A.axis()),""!==A.label()&&d3.select(".mcchart-y").append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(A.label())}(a),N(a.append("g").attr("class","mcchart-lineContainer"),l);var S=a.append("g").attr("class","mcchart-focus");if(n=a.append("rect"),S.style("display","none"),n.attr("width",I).attr("height",x).attr("class","mcchart-interactive mcchart-interactive-"+t),E.noDataContainer=a.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),E.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+I/2+","+x/2+")").attr("text-anchor","middle").text(_),D(E.noDataContainer),S.append("line").attr("class","mcchart-focus-y-line-"+t).style("stroke","#999999").style("stroke-width","2px").style("stroke-dasharray","4,4").style("opacity",.8).attr("y1",0).attr("y2",x),c.enabled()){c.chartContainer(e),c.flipPoint(I/2),c.xOffset(10),S.append("div").call(c);var P=[];l.forEach((function(t,e){P.push({val:t,index:e})})),n.on("mouseover",(function(){S.style("display",null),c.show()})).on("mouseout",(function(){S.style("display","none"),c.hide()})).on("mousemove",(function(e){var n=d3.mouse(this)[0],i=d3.mouse(this)[1],a=T.scale().invert(n),o=j(P,a,0,P.length),s=P[o-1],r=P[o];if(void 0!==r&&void 0!==s){var l=a-s.index>r.index-a?r:s,d=h-I-u.right,p=T.scale(l.index),m=A.scale(A.value(l.val));S.select(".mcchart-focus-y-line-"+t).attr("transform","translate("+p+","+m+")").attr("y2",x-A.scale(A.value(l.val))),c.data(l.val,p+d,m,n,i)}}))}v&&d3.select(window).on("resize",(0,s.debounce)((function(){E.animate(!1),E.redraw()}),500))}))}function P(t){return 0===A.value(t)||"0"===A.value(t)}function D(t){l.every(P)?(t.classed("mcchart-noDataContainer--hide",!1),t.transition().delay(1e3).duration(500).attr("opacity",1)):t.transition().duration(500).attr("opacity",0).each("end",(function(){t.classed("mcchart-noDataContainer--hide",!0)}))}function N(t,e){var n=0,i=d3.svg.line().interpolate(S).tension(n).x((function(t,e){return T.scale(e)})).y((function(t){return A.scale(A.value(t))})),a=t.append("path").attr("class","mcchart-line").attr("stroke",k).attr("stroke-width",3).attr("fill","none").attr("d",i(e)),o=t.selectAll(".mcchart-dot").data(e);if(o.enter().append("circle").attr("cx",(function(t,e){return T.scale(e)})).attr("cy",(function(t){return A.scale(A.value(t))})).attr("stroke-width",3).attr("fill",k).attr("stroke",b[0]),E.animate()){var s=a.node().getTotalLength();a.attr("stroke-dasharray",s+" "+s).attr("stroke-dashoffset",s),setTimeout((function(){a.transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0),o.attr("r",1e-6).style("opacity",1e-6).transition().delay(700).duration(500).attr("r",3).style("opacity",1)}),500)}else o.attr("r",3).style("opacity",1)}return E.update=function(t){l=t,D(E.noDataContainer),E.animate()||E.animate(!0);var e=d3.selectAll(".mcchart-lineContainer");n.data([l]);var i,a=d3.svg.line().x((function(t,e){return T.scale(e)})).y((function(t){return A.scale(0)})).interpolate(S).tension(0),o=e.select("path"),s=e.selectAll("circle").data([]);o.attr("opacity",1).transition().duration(1e3).attr("d",a).attr("opacity",0).remove(),s.exit().transition().duration(500).attr("r",0).style("opacity",0).remove(),i=l,T.scale().domain([0,i.length]).nice(),d3.select(".mcchart-x.mcchart-axis").transition().duration(1e3).call(T.axis()),function(t){A.scale().domain([0,d3.max(t,(function(t){return Number(A.value(t))}))]),d3.select(".mcchart-y.mcchart-axis").transition().duration(1e3).call(A.axis())}(l),N(e,l)},E.redraw=function(){d.remove(),e.call(E)},E.loadChart=function(t,e){d3.select(t).datum(e).call(E)},E.noDataMessage=function(t){return arguments.length?(_=t,E):_},E.colors=function(t){return arguments.length?(b=t,E):b},E.width=function(t){return arguments.length?(h=t,E):h},E.height=function(t){return arguments.length?(p=t,E):p},E.scaleWidth=function(t){return arguments.length?(I=t,E):I},E.scaleHeight=function(t){return arguments.length?(x=t,E):x},E.mobileThreshold=function(t){return arguments.length?(f=t,E):f},E.tooltip=function(t){return arguments.length?(c=t,E):c},E.responsive=function(t){return arguments.length?(v=t,E):v},E.aspectRatio=function(t,e){return arguments.length?(m=t,g=e,E):{aspectWidth:m,aspectHeight:g}},E.legend=function(t){return arguments.length?(y=t,E):y},E.showLegend=function(t){return arguments.length?(w=t,E):w},E.animate=function(t){return arguments.length?(C=t,E):C},E.lineStrokeColor=function(t){return arguments.length?(k=t,E):k},E.xAxis=T,E.yAxis=A,E.options={},E.options.id=t,E.options.margin=u,E.options.mobileThreshold=f,E.options.type="line",E.options.lineStrokeColor=E.lineStrokeColor,E};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=null,d=null,c=(0,a.default)(),u={top:30,right:20,bottom:50,left:60},h=640,p=null,m=16,g=9,f=500,v=!0,b=r.default.colors,y=(0,o.default)(),w=!1,_="Hmmm, seems there is no data to show",C=!0,k=b[0],S="monotone",x=0,I=0,T=(0,i.default)("X"),A=(0,i.default)("Y"),j=d3.bisector((function(t){return T.value(t)})).left;function E(i){i.each((function(i){null===l&&(l=i),(e=d3.select(this)).classed({"mcchart-container":!0}),v&&(h=e.node().getBoundingClientRect().width),(d=e.selectAll("svg").data([l])).attr("id","svg-"+this.id),d.classed({"mcchart-svg":!0});var a=d.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");d.attr("width",h),p=h*g/m,d.attr("height",p);var o=d.select("g");o.classed({"mcchart-lineTimeSeriesChart":!0}),o.attr("transform","translate("+u.left+","+u.top+")");var f=d.append("g").attr("class","mcchart-legendWrap");y.createLegend(E,[l],f),w||d.select(".mcchart-legendWrap").selectAll("*").remove(),x=Math.ceil(p-u.top-u.bottom),I=h-u.left-u.right;var b,C=d3.time.scale();C.type=r.default.scaleType.TIME,T.createAxis(E,l,C),b=a,T.setTicks(T.maxTicks(),T.maxResponsiveTicks()),0==!!T.tickFormat()&&T.tickFormat(s.timeTick),T.axis().scale(T.scale()).orient("bottom").tickFormat(T.tickFormat()),b.append("g").attr("class","mcchart-x mcchart-axis").classed("mcchart-tick--hide",!T.showTicks()).attr("transform","translate(0, "+x+")").call(T.axis());var k=d3.scale.linear();k.type=r.default.scaleType.LINEAR,A.createAxis(E,l,k),function(t){A.setTicks(A.maxTicks(),A.maxResponsiveTicks()),0==!!A.tickFormat()&&A.tickFormat(s.numberTick),A.axis().scale(A.scale()).tickSize(-I,0,0).tickFormat(A.tickFormat()).tickPadding(10).orient("left"),t.append("g").attr("class","mcchart-y mcchart-axis").classed("mcchart-tick--hide",!A.showTicks()).call(A.axis()),""!==A.label()&&d3.select(".mcchart-y").append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(A.label())}(a),N(a.append("g").attr("class","mcchart-lineContainer"),l);var S=a.append("g").attr("class","mcchart-focus");n=a.append("rect"),S.style("display","none"),n.attr("width",I).attr("height",x).attr("class","mcchart-interactive mcchart-interactive-"+t),E.noDataContainer=a.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),E.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+I/2+","+x/2+")").attr("text-anchor","middle").text(_),D(E.noDataContainer),S.append("line").attr("class","mcchart-focus-y-line-"+t).style("stroke","#999999").style("stroke-width","2px").style("stroke-dasharray","4,4").style("opacity",.8).attr("y1",0).attr("y2",x),c.enabled()&&(c.chartContainer(e),c.flipPoint(I/2),c.xOffset(10),S.append("div").call(c),n.on("mouseover",(function(){S.style("display",null),c.show()})).on("mouseout",(function(){S.style("display","none"),c.hide()})).on("mousemove",(function(e){var n=d3.mouse(this)[0],i=d3.mouse(this)[1],a=T.scale().invert(n),o=j(e,a,1),s=e[o-1],r=e[o];if(void 0!==r){var l=a-T.value(s)>T.value(r)-a?r:s,d=h-I-u.right,p=T.scale(T.value(l)),m=A.scale(A.value(l));S.select(".mcchart-focus-y-line-"+t).attr("transform","translate("+p+","+m+")").attr("y2",x-A.scale(A.value(l))),c.data(l,p+d,m,n,i)}}))),v&&d3.select(window).on("resize",(0,s.debounce)((function(){E.animate(!1),E.redraw()}),500))}))}function P(t){return 0===A.value(t)||"0"===A.value(t)}function D(t){l.every(P)?(t.classed("mcchart-noDataContainer--hide",!1),t.transition().delay(1e3).duration(500).attr("opacity",1)):t.transition().duration(500).attr("opacity",0).each("end",(function(){t.classed("mcchart-noDataContainer--hide",!0)}))}function N(t,e){var n=0,i=d3.svg.line().interpolate(S).tension(n).x((function(t){return T.scale(T.value(t))})).y((function(t){return A.scale(A.value(t))})),a=t.append("path").attr("class","mcchart-line").attr("stroke",k).attr("stroke-width",3).attr("fill","none").attr("d",i(e)),o=t.selectAll(".mcchart-dot").data(e);if(o.enter().append("circle").attr("cx",(function(t){return T.scale(T.value(t))})).attr("cy",(function(t){return A.scale(A.value(t))})).attr("stroke-width",3).attr("fill",k).attr("stroke",b[0]),E.animate()){var s=a.node().getTotalLength();a.attr("stroke-dasharray",s+" "+s).attr("stroke-dashoffset",s),setTimeout((function(){a.transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0),o.attr("r",1e-6).style("opacity",1e-6).transition().delay(700).duration(500).attr("r",3).style("opacity",1)}),500)}else o.attr("r",3).style("opacity",1)}return E.update=function(t){l=t,D(E.noDataContainer),E.animate()||E.animate(!0);var e=d3.selectAll(".mcchart-lineContainer");n.data([l]);var i,a=d3.svg.line().x((function(t){return T.scale(T.value(t))})).y((function(t){return A.scale(0)})).interpolate(S).tension(0),o=e.select("path"),s=e.selectAll("circle").data([]);o.attr("opacity",1).transition().duration(1e3).attr("d",a).attr("opacity",0).remove(),s.exit().transition().duration(500).attr("r",0).style("opacity",0).remove(),i=l,T.scale().domain(d3.extent(i,(function(t){return T.value(t)}))),d3.select(".mcchart-x.mcchart-axis").transition().duration(1e3).call(T.axis()),function(t){A.scale().domain([0,d3.max(t,(function(t){return Number(A.value(t))}))]),d3.select(".mcchart-y.mcchart-axis").transition().duration(1e3).call(A.axis())}(l),N(e,l)},E.redraw=function(){d.remove(),e.call(E)},E.loadChart=function(t,e){d3.select(t).datum(e).call(E)},E.noDataMessage=function(t){return arguments.length?(_=t,E):_},E.colors=function(t){return arguments.length?(b=t,E):b},E.width=function(t){return arguments.length?(h=t,E):h},E.height=function(t){return arguments.length?(p=t,E):p},E.scaleWidth=function(t){return arguments.length?(I=t,E):I},E.scaleHeight=function(t){return arguments.length?(x=t,E):x},E.mobileThreshold=function(t){return arguments.length?(f=t,E):f},E.tooltip=function(t){return arguments.length?(c=t,E):c},E.responsive=function(t){return arguments.length?(v=t,E):v},E.aspectRatio=function(t,e){return arguments.length?(m=t,g=e,E):{aspectWidth:m,aspectHeight:g}},E.legend=function(t){return arguments.length?(y=t,E):y},E.showLegend=function(t){return arguments.length?(w=t,E):w},E.animate=function(t){return arguments.length?(C=t,E):C},E.lineStrokeColor=function(t){return arguments.length?(k=t,E):k},E.xAxis=T,E.yAxis=A,E.options={},E.options.id=t,E.options.margin=u,E.options.mobileThreshold=f,E.options.type="lineTimeSeries",E.options.lineStrokeColor=E.lineStrokeColor,E};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=null,d=null,c=(0,a.default)(),u={top:30,right:20,bottom:50,left:60},h=640,p=null,m=16,g=9,f=500,v=!0,b=r.default.colors,y=(0,o.default)(),w=!0,_="Hmmm, seems there is no data to show",C=!0,k=b[0],S="monotone",x=0,I=0,T=(0,i.default)("X"),A=(0,i.default)("Y"),j=d3.bisector((function(t){return t.index})).left;function E(i){i.each((function(i){null===l&&(l=i,E.interactiveDataArray=L(l)),(e=d3.select(this)).attr("class","mcchart-container-"+t),e.classed({"mcchart-container":!0}),v&&(h=e.node().getBoundingClientRect().width),(d=e.selectAll("svg").data([l])).attr("id","svg-"+t),d.classed({"mcchart-svg":!0});var a=d.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");d.attr("width",h),p=h*g/m,d.attr("height",p);var o=d.select("g");o.classed({"mcchart-lineTimeSeriesChart":!0}),o.attr("transform","translate("+u.left+","+u.top+")");var f=d.append("g").attr("class","mcchart-legendWrap");y.createLegend(E,l,f),w?f.selectAll(".mcchart-legendSeries").on("click",(function(e,n){var i=d3.select(this);i.classed("mcchart-legendSeries--hide",!i.classed("mcchart-legendSeries--hide"));var a=d3.select(".mcchart-"+t+"-serie-"+n);a.classed("mcchart-serie--hide")?(a.transition().duration(500).attr("opacity",1),a.classed("mcchart-serie--hide",!1)):(a.attr("opacity",1),a.transition().duration(500).attr("opacity",0),a.classed("mcchart-serie--hide",!0))})):d.select(".mcchart-legendWrap").selectAll("*").remove(),x=Math.ceil(p-u.top-u.bottom),I=h-u.left-u.right;var b,C=d3.scale.linear();C.type=r.default.scaleType.LINEAR,T.createAxis(E,l,C),b=a,T.setTicks(T.maxTicks(),T.maxResponsiveTicks()),0==!!T.tickFormat()&&T.tickFormat(s.numberTick),T.axis().scale(T.scale()).orient("bottom").tickFormat(T.tickFormat()),b.append("g").attr("class","mcchart-x mcchart-x-"+t+" mcchart-axis").classed("mcchart-tick--hide",!T.showTicks()).attr("transform","translate(0, "+x+")").call(T.axis());var k=d3.scale.linear();k.type=r.default.scaleType.LINEAR,A.createAxis(E,l,k),function(e){A.setTicks(A.maxTicks(),A.maxResponsiveTicks()),0==!!A.tickFormat()&&A.tickFormat(s.numberTick),A.axis().scale(A.scale()).tickSize(-I,0,0).tickFormat(A.tickFormat()).tickPadding(10).orient("left"),e.append("g").attr("class","mcchart-y mcchart-y-"+t+" mcchart-axis").classed("mcchart-tick--hide",!A.showTicks()).call(A.axis()),""!==A.label()&&d3.select("mcchart-y-"+t).append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(A.label())}(a);var S=a.append("g").attr("class","mcchart-multiLineContainer mcchart-multiLineContainer-"+t);l.length!=A.keyValues().length?console.error("Data series must have a key value assigned for y-axis.\n%d series in data array and %d key values defined for y-axis",l.length,A.keyValues().length):N(S,l);var P=a.append("g").attr("class","mcchart-focus");(n=a.append("rect")).attr("width",I).attr("height",x).attr("class","mcchart-interactive mcchart-interactive-"+t),P.style("display","none"),E.noDataContainer=a.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),E.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+I/2+","+x/2+")").attr("text-anchor","middle").text(_),D(E.noDataContainer),P.append("line").attr("class","mcchart-focus-y-line-"+t).style("stroke","#999999").style("stroke-width","2px").style("stroke-dasharray","4,4").style("opacity",.8).attr("y1",0).attr("y2",x),c.enabled()&&(c.chartContainer(e),c.flipPoint(I/2),c.xOffset(10),P.call(c),n.data([E.interactiveDataArray]),n.on("mouseover",(function(){P.style("display",null),c.show()})).on("mouseout",(function(){P.style("display","none"),c.hide()})).on("mousemove",(function(e){var n,i,a,o=d3.mouse(this)[0],s=d3.mouse(this)[1],r=e,d=T.scale().invert(o),p=j(r,d,0,r.length),m=r[p-1],g=r[p];if(void 0!==g&&void 0!==m){var f=d-m.index>g.index-d?g:m,v=h-I-u.right,b=T.scale(f.index),y=A.scale((n=f,i=[],a=0,l.forEach((function(t,e){n["serie"+e]&&(a=parseFloat(n["serie"+e][A.keyValues()[e]])),i.push(a)})),Math.max.apply(Math,i)));P.select(".mcchart-focus-y-line-"+t).attr("transform","translate("+b+",0)").attr("y2",x),c.data(f,b+v,y,o,s)}}))),v&&d3.select(window).on("resize",(0,s.debounce)((function(){E.animate(!1),E.redraw()}),500))}))}function P(t){return 0===A.value(t)||"0"===A.value(t)}function D(t){var e=[];for(var n in l)e.push(l[n].every(P));e.every((function(t){return!0===t}))?(t.classed("mcchart-noDataContainer--hide",!1),t.transition().delay(750).duration(375).attr("opacity",1)):t.transition().duration(375).attr("opacity",0).each("end",(function(){t.classed("mcchart-noDataContainer--hide",!0)}))}function N(e,n){var i=0;if(n[0].length){var a=d3.svg.line().interpolate(S).tension(i).x((function(t,e){return T.scale(e)})).y((function(t){return A.scale(A.value(t))}));e.selectAll(".mcchart-lineWrap").data(n).enter().append("g").attr("class",(function(e,n){return"mcchart-lineWrap mcchart-"+t+"-serie-"+n})),e.selectAll(".mcchart-lineWrap").append("path").attr("class","mcchart-line").attr("stroke",(function(t,e){return b[e]})).attr("stroke-width",3).attr("fill","none").attr("d",(function(t,e){return A.keyValue(A.keyValues()[e]),a(t)})),e.selectAll(".mcchart-lineWrap").each((function(t,i){var a=d3.select(this).selectAll(".mcchart-dot").data(n[i]);A.keyValue(A.keyValues()[i]),a.enter().append("circle").attr("cx",(function(t,e){return T.scale(e)})).attr("cy",(function(t){return A.scale(A.value(t))})).attr("stroke-width",3).attr("fill",(function(t){return b[i]})).attr("stroke",(function(t){return b[i]})),E.animate()?e.selectAll(".mcchart-line").each((function(t,e){var n=d3.select(this),i=n.node().getTotalLength();n.attr("stroke-dasharray",i+" "+i).attr("stroke-dashoffset",i),setTimeout((function(){n.transition().duration(750).ease("linear").attr("stroke-dashoffset",0),a.attr("r",1e-6).style("opacity",1e-6).transition().delay(525).duration(375).attr("r",3).style("opacity",1)}),250)})):a.attr("r",3).style("opacity",1)}))}else console.error("Data must contain at least 2 series for Multiline chart to render.")}function L(t){for(var e=t[0].map((function(t,e){var n={};return n.serie0=t,n.index=e,n})),n=function(n){t[n].forEach((function(t,i){if(function(t){var n=!1;return e[t]&&(n=!0),n}(i))e[i]["serie"+n]=t;else{var a={};a["serie"+n]=t,a.index=i,e.push(a)}}))},i=1;i<t.length;i++)n(i);return e}return E.update=function(i){l=_castDateToNumber(i),E.interactiveDataArray=L(l),D(E.noDataContainer),E.animate()||E.animate(!0);var a=e.selectAll(".mcchart-multiLineContainer-"+t),o=a.selectAll(".mcchart-lineWrap").data(l);n.data([E.interactiveDataArray]);var s,r=d3.svg.line().x((function(t){return T.scale(T.value(t))})).y((function(t){return A.scale(0)})).interpolate(S).tension(0);o.each((function(t,e){A.keyValue(A.keyValues()[e]);var n=d3.select(this).selectAll("path").data([]),i=d3.select(this).selectAll("circle").data([]);n.exit().attr("opacity",1).transition().delay(100*e).duration(562.5).attr("d",(function(t){return r(t)})).attr("opacity",0).remove().each("end",(function(){o[0].length===e+1&&N(a,l)})),i.exit().transition().duration(375).attr("r",0).style("opacity",0).remove()})),s=[],l.forEach((function(t){t.forEach((function(t){t.hasOwnProperty(T.keyValue().toString())&&s.push(+t[T.keyValue()])}))})),T.scale().domain(d3.extent(s)),d3.select(".mcchart-x-"+t).transition().duration(750).call(T.axis()),function(e){var n=[];e.forEach((function(t,e){t.forEach((function(t){t.hasOwnProperty(A.keyValues()[e])&&n.push(Number(t[A.keyValues()[e]]))}))})),A.scale().domain([0,d3.max(n)]).nice(),d3.select(".mcchart-y-"+t).transition().duration(750).call(A.axis())}(l)},E.redraw=function(){d.remove(),e.call(E)},E.loadChart=function(t,e){d3.select(t).datum(e).call(E)},E.noDataMessage=function(t){return arguments.length?(_=t,E):_},E.colors=function(t){return arguments.length?(b=t,E):b},E.width=function(t){return arguments.length?(h=t,E):h},E.height=function(t){return arguments.length?(p=t,E):p},E.scaleWidth=function(t){return arguments.length?(I=t,E):I},E.scaleHeight=function(t){return arguments.length?(x=t,E):x},E.mobileThreshold=function(t){return arguments.length?(f=t,E):f},E.tooltip=function(t){return arguments.length?(c=t,E):c},E.responsive=function(t){return arguments.length?(v=t,E):v},E.aspectRatio=function(t,e){return arguments.length?(m=t,g=e,E):{aspectWidth:m,aspectHeight:g}},E.legend=function(t){return arguments.length?(y=t,E):y},E.showLegend=function(t){return arguments.length?(w=t,E):w},E.animate=function(t){return arguments.length?(C=t,E):C},E.lineStrokeColor=function(t){return arguments.length?(k=t,E):k},E.xAxis=T,E.yAxis=A,E.options={},E.options.id=t,E.options.margin=u,E.options.mobileThreshold=f,E.options.type="multiLine",E.options.lineStrokeColor=E.lineStrokeColor,E};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=null,d=null,c=(0,a.default)(),u={top:30,right:20,bottom:50,left:60},h=640,p=null,m=16,g=9,f=500,v=!0,b=r.default.colors,y=(0,o.default)(),w=!0,_="Hmmm, seems there is no data to show",C=!0,k=b[0],S="monotone",x=0,I=0,T=(0,i.default)("X"),A=(0,i.default)("Y"),j=d3.bisector((function(t){return T.value(t)})).left;function E(i){i.each((function(i){null===l&&(l=i,E.interactiveDataArray=M(l)),(e=d3.select(this)).attr("class","mcchart-container-"+t),e.classed({"mcchart-container":!0}),v&&(h=e.node().getBoundingClientRect().width),(d=e.selectAll("svg").data([l])).attr("id","svg-"+t),d.classed({"mcchart-svg":!0});var a=d.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");d.attr("width",h),p=h*g/m,d.attr("height",p);var o=d.select("g");o.classed({"mcchart-lineTimeSeriesChart":!0}),o.attr("transform","translate("+u.left+","+u.top+")");var f=d.append("g").attr("class","mcchart-legendWrap");y.createLegend(E,l,f),w?f.selectAll(".mcchart-legendSeries").on("click",(function(e,n){var i=d3.select(this);i.classed("mcchart-legendSeries--hide",!i.classed("mcchart-legendSeries--hide"));var a=d3.select(".mcchart-"+t+"-serie-"+n);a.classed("mcchart-serie--hide")?(a.transition().duration(500).attr("opacity",1),a.classed("mcchart-serie--hide",!1)):(a.attr("opacity",1),a.transition().duration(500).attr("opacity",0),a.classed("mcchart-serie--hide",!0))})):d.select(".mcchart-legendWrap").selectAll("*").remove(),x=Math.ceil(p-u.top-u.bottom),I=h-u.left-u.right;var b,C=d3.time.scale();C.type=r.default.scaleType.TIME,T.createAxis(E,l,C),b=a,T.setTicks(T.maxTicks(),T.maxResponsiveTicks()),0==!!T.tickFormat()&&T.tickFormat(s.timeTick),T.axis().scale(T.scale()).orient("bottom").tickFormat(T.tickFormat()),b.append("g").attr("class","mcchart-x mcchart-x-"+t+" mcchart-axis").classed("mcchart-tick--hide",!T.showTicks()).attr("transform","translate(0, "+x+")").call(T.axis());var k=d3.scale.linear();k.type=r.default.scaleType.LINEAR,A.createAxis(E,l,k),function(e){A.setTicks(A.maxTicks(),A.maxResponsiveTicks()),0==!!A.tickFormat()&&A.tickFormat(s.numberTick),A.axis().scale(A.scale()).tickSize(-I,0,0).tickFormat(A.tickFormat()).tickPadding(10).orient("left"),e.append("g").attr("class","mcchart-y mcchart-y-"+t+" mcchart-axis").classed("mcchart-tick--hide",!A.showTicks()).call(A.axis()),""!==A.label()&&d3.select("mcchart-y-"+t).append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(A.label())}(a);var S=a.append("g").attr("class","mcchart-multiLineContainer mcchart-multiLineContainer-"+t);l.length!=A.keyValues().length?console.error("Data series must have a key value assigned for y-axis.\n%d series in data array and %d key values defined for y-axis",l.length,A.keyValues().length):N(S,l);var P=a.append("g").attr("class","mcchart-focus");(n=a.append("rect")).attr("width",I).attr("height",x).attr("class","mcchart-interactive mcchart-interactive-"+t),P.style("display","none"),E.noDataContainer=a.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),E.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+I/2+","+x/2+")").attr("text-anchor","middle").text(_),D(E.noDataContainer),P.append("line").attr("class","mcchart-focus-y-line-"+t).style("stroke","#999999").style("stroke-width","2px").style("stroke-dasharray","4,4").style("opacity",.8).attr("y1",0).attr("y2",x),c.enabled()&&(c.chartContainer(e),c.flipPoint(I/2),c.xOffset(10),P.call(c),n.data([E.interactiveDataArray]),n.on("mouseover",(function(){P.style("display",null),c.show()})).on("mouseout",(function(){P.style("display","none"),c.hide()})).on("mousemove",(function(e){var n,i,a,o=d3.mouse(this)[0],s=d3.mouse(this)[1],r=e,d=T.scale().invert(o),p=j(r,d,1),m=r[p-1],g=r[p];if(void 0!==g){var f=d-new Date(T.value(m))>new Date(T.value(g))-d?g:m,v=h-I-u.right,b=T.scale(new Date(T.value(f))),y=A.scale((n=f,i=[],a=0,l.forEach((function(t,e){n["serie"+e]&&(a=parseFloat(n["serie"+e][A.keyValues()[e]])),i.push(a)})),Math.max.apply(Math,i)));P.select(".mcchart-focus-y-line-"+t).attr("transform","translate("+b+",0)").attr("y2",x),c.data(f,b+v,y,o,s)}}))),v&&d3.select(window).on("resize",(0,s.debounce)((function(){E.animate(!1),E.redraw()}),500))}))}function P(t){return 0===A.value(t)||"0"===A.value(t)}function D(t){var e=[];for(var n in l)e.push(l[n].every(P));e.every((function(t){return!0===t}))?(t.classed("mcchart-noDataContainer--hide",!1),t.transition().delay(750).duration(375).attr("opacity",1)):t.transition().duration(375).attr("opacity",0).each("end",(function(){t.classed("mcchart-noDataContainer--hide",!0)}))}function N(e,n){var i=0;if(n[0].length){var a=d3.svg.line().interpolate(S).tension(i).x((function(t){return T.scale(T.value(t))})).y((function(t){return A.scale(A.value(t))}));e.selectAll(".mcchart-lineWrap").data(n).enter().append("g").attr("class",(function(e,n){return"mcchart-lineWrap mcchart-"+t+"-serie-"+n})),e.selectAll(".mcchart-lineWrap").append("path").attr("class","mcchart-line").attr("stroke",(function(t,e){return b[e]})).attr("stroke-width",3).attr("fill","none").attr("d",(function(t,e){return A.keyValue(A.keyValues()[e]),a(t)})),e.selectAll(".mcchart-lineWrap").each((function(t,i){var a=d3.select(this).selectAll(".mcchart-dot").data(n[i]);A.keyValue(A.keyValues()[i]),a.enter().append("circle").attr("cx",(function(t){return T.scale(T.value(t))})).attr("cy",(function(t){return A.scale(A.value(t))})).attr("stroke-width",3).attr("fill",(function(t){return b[i]})).attr("stroke",(function(t){return b[i]})),E.animate()?e.selectAll(".mcchart-line").each((function(t,e){var n=d3.select(this),i=n.node().getTotalLength();n.attr("stroke-dasharray",i+" "+i).attr("stroke-dashoffset",i),setTimeout((function(){n.transition().duration(750).ease("linear").attr("stroke-dashoffset",0),a.attr("r",1e-6).style("opacity",1e-6).transition().delay(525).duration(375).attr("r",3).style("opacity",1)}),250)})):a.attr("r",3).style("opacity",1)}))}else console.error("Data must contain at least 2 series for Multiline chart to render.")}function L(t){return t.forEach((function(t,e){t.forEach((function(t,e){"number"!=typeof t[T.keyValue()]&&(t[T.keyValue()]=+(0,s.parseDate)(t[T.keyValue()],T.axisDateFormat()))}))})),t}function M(t){for(var e=t[0].map((function(t,e){var n={};return n.serie0=t,n[T.keyValue()]=t[T.keyValue()],n})),n=function(n){t[n].forEach((function(t,i){if(function(t){for(var n=!1,i=0;i<e.length;i++)if(t[T.keyValue()]===e[i][T.keyValue()]){n=!0;break}return n}(t))e.filter((function(e){return e[T.keyValue()]===t[T.keyValue()]}))[0]["serie"+n]=t;else{var a={};a["serie"+n]=t,a[T.keyValue()]=t[T.keyValue()],e.push(a)}}))},i=1;i<t.length;i++)n(i);return e}return E.update=function(i){l=L(i),E.interactiveDataArray=M(l),D(E.noDataContainer),E.animate()||E.animate(!0);var a=e.selectAll(".mcchart-multiLineContainer-"+t),o=a.selectAll(".mcchart-lineWrap").data(l);n.data([E.interactiveDataArray]);var s,r=d3.svg.line().x((function(t){return T.scale(T.value(t))})).y((function(t){return A.scale(0)})).interpolate(S).tension(0);o.each((function(t,e){A.keyValue(A.keyValues()[e]);var n=d3.select(this).selectAll("path").data([]),i=d3.select(this).selectAll("circle").data([]);n.exit().attr("opacity",1).transition().delay(100*e).duration(562.5).attr("d",(function(t){return r(t)})).attr("opacity",0).remove().each("end",(function(){o[0].length===e+1&&N(a,l)})),i.exit().transition().duration(375).attr("r",0).style("opacity",0).remove()})),s=[],l.forEach((function(t){t.forEach((function(t){t.hasOwnProperty(T.keyValue().toString())&&s.push(+t[T.keyValue()])}))})),T.scale().domain(d3.extent(s)),d3.select(".mcchart-x-"+t).transition().duration(750).call(T.axis()),function(e){var n=[];e.forEach((function(t,e){t.forEach((function(t){t.hasOwnProperty(A.keyValues()[e])&&n.push(Number(t[A.keyValues()[e]]))}))})),A.scale().domain([0,d3.max(n)]).nice(),d3.select(".mcchart-y-"+t).transition().duration(750).call(A.axis())}(l)},E.redraw=function(){d.remove(),e.call(E)},E.loadChart=function(t,e){var n=L(e);d3.select(t).datum(n).call(E)},E.noDataMessage=function(t){return arguments.length?(_=t,E):_},E.colors=function(t){return arguments.length?(b=t,E):b},E.width=function(t){return arguments.length?(h=t,E):h},E.height=function(t){return arguments.length?(p=t,E):p},E.scaleWidth=function(t){return arguments.length?(I=t,E):I},E.scaleHeight=function(t){return arguments.length?(x=t,E):x},E.mobileThreshold=function(t){return arguments.length?(f=t,E):f},E.tooltip=function(t){return arguments.length?(c=t,E):c},E.responsive=function(t){return arguments.length?(v=t,E):v},E.aspectRatio=function(t,e){return arguments.length?(m=t,g=e,E):{aspectWidth:m,aspectHeight:g}},E.legend=function(t){return arguments.length?(y=t,E):y},E.showLegend=function(t){return arguments.length?(w=t,E):w},E.animate=function(t){return arguments.length?(C=t,E):C},E.lineStrokeColor=function(t){return arguments.length?(k=t,E):k},E.xAxis=T,E.yAxis=A,E.options={},E.options.id=t,E.options.margin=u,E.options.mobileThreshold=f,E.options.type="multiLineTimeSeries",E.options.lineStrokeColor=E.lineStrokeColor,E};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=(0,a.default)(),d=null,c={top:30,right:20,bottom:50,left:60},u=640,h=null,p=16,m=9,g=500,f=!0,v=r.default.colors,b=(0,o.default)(),y=!1,w="Hmmm, seems there is no data to show",_=!0,C=0,k=0,S=(0,i.default)("X"),x=(0,i.default)("Y");function I(i){i.each((function(i){d=i,(e=d3.select(this)).classed({"mcchart-container":!0}),f&&(u=e.node().getBoundingClientRect().width),(n=e.selectAll("svg").data([d])).attr("id","svg-"+this.id),n.classed({"mcchart-svg":!0});var a=n.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");n.attr("width",u),h=u*m/p,n.attr("height",h),C=Math.ceil(h-c.top-c.bottom),k=u-c.left-c.right;var o=n.select("g");o.classed({"mcchart-barTimeSeriesChart":!0}),o.attr("transform","translate("+c.left+","+c.top+")");var g=n.append("g").attr("class","mcchart-legendWrap");b.createLegend(I,[d],g),y||n.select(".mcchart-legendWrap").selectAll("*").remove();var _,T=d3.scale.ordinal();T.type=r.default.scaleType.ORDINAL,S.createAxis(I,d,T),_=a,S.setTicks(S.maxTicks(),S.maxResponsiveTicks()),I.width()<I.mobileThreshold()?S.axis().tickValues(S.scale().domain().filter((function(t,e){return!(e%4)}))):S.axis().tickValues(S.scale().domain()),0==!!S.tickFormat()&&S.tickFormat(s.timeTick),S.axis().scale(S.scale()).orient("bottom").tickFormat(S.tickFormat()),_.append("g").attr("class","mcchart-x mcchart-axis").classed("mcchart-tick--hide",!S.showTicks()).attr("transform","translate(0, "+C+")").call(S.axis());var j=d3.scale.linear();j.type=r.default.scaleType.LINEAR,x.createAxis(I,d,j),function(t){x.setTicks(x.maxTicks(),x.maxResponsiveTicks()),0==!!x.tickFormat()&&x.tickFormat(s.numberTick),x.axis().scale(x.scale()).tickSize(-k,0,0).tickFormat(x.tickFormat()).tickPadding(10).orient("left"),t.append("g").attr("class","mcchart-y mcchart-axis").classed("mcchart-tick--hide",!x.showTicks()).call(x.axis()),""!==x.label()&&d3.select(".mcchart-y").append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(x.label())}(a),function(t,e){setTimeout((function(){var n=t.selectAll("mcchart-bar").data(e);n.enter().append("rect").attr("class","mcchart-bar").attr("x",(function(t){return S.scale(S.value(t))})).attr("width",S.scale().rangeBand()).attr("fill",v[0]).attr("opacity",1).attr("y",(function(t){return C})).attr("height",0),I.animate()?n.transition().duration(750).delay((function(t,e){return 10*e})).attr("height",(function(t){return C-x.scale(x.value(t))})).attr("y",(function(t){return x.scale(x.value(t))})):n.attr("height",(function(t){return C-x.scale(x.value(t))})).attr("y",(function(t){return x.scale(x.value(t))}))}),500)}(a.append("g").attr("class","mcchart-barContainer mcchart-barContainer-"+t).attr("transform","translate(0, -1)"),d);var E=a.append("g").attr("class","mcchart-focus"),P=a.append("rect");if(E.style("display","none"),P.attr("width",k).attr("height",C).attr("class","mcchart-interactive mcchart-interactive-"+t),I.noDataContainer=a.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),I.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+k/2+","+C/2+")").attr("text-anchor","middle").text(w),A(I.noDataContainer),l.enabled()){var D=S.scale().rangeBand();l.chartContainer(e),l.flipPoint(k/2+D/2),E.append("div").call(l),P.on("mouseout",(function(){l.hide()})).on("mousemove",(function(t){for(var e=d3.mouse(this)[0],n=d3.mouse(this)[1],i=0;i<t.length;i++){var a=t[i],o=S.scale(S.value(a)),s=o+S.scale().rangeBand(),r=x.scale(x.value(a));if(e>o&&e<s&&n>r){e<l.flipPoint()?l.data(a,o+D+c.left,r,e,n):l.data(a,o+c.left,r,e,n),l.show();break}l.hide()}}))}f&&d3.select(window).on("resize",(0,s.debounce)((function(){I.animate(!1),I.redraw()}),500)),I.update=function(e){d=e,A(I.noDataContainer),P.data([e]),d3.select(".mcchart-barContainer-"+t).selectAll(".mcchart-bar").data(e).transition().duration(750).attr("y",(function(t){return x.scale(x.value(t))})).attr("height",(function(t){return C-x.scale(x.value(t))}))},I.redraw=function(){n.remove(),e.call(I)}}))}function T(t){return 0===x.value(t)||"0"===x.value(t)}function A(t){d.every(T)?(t.classed("mcchart-noDataContainer--hide",!1),t.transition().delay(750).duration(375).attr("opacity",1)):t.transition().duration(375).attr("opacity",0).each("end",(function(){t.classed("mcchart-noDataContainer--hide",!0)}))}return I.loadChart=function(t,e){d3.select(t).datum(e).call(I)},I.noDataMessage=function(t){return arguments.length?(w=t,I):w},I.colors=function(t){return arguments.length?(v=t,I):v},I.width=function(t){return arguments.length?(u=t,I):u},I.height=function(t){return arguments.length?(h=t,I):h},I.scaleWidth=function(t){return arguments.length?(k=t,I):k},I.scaleHeight=function(t){return arguments.length?(C=t,I):C},I.mobileThreshold=function(t){return arguments.length?(g=t,I):g},I.legend=function(t){return arguments.length?(b=t,I):b},I.showLegend=function(t){return arguments.length?(y=t,I):y},I.tooltip=function(t){return arguments.length?(l=t,I):l},I.responsive=function(t){return arguments.length?(f=t,I):f},I.aspectRatio=function(t,e){return arguments.length?(p=t,m=e,I):{aspectWidth:p,aspectHeight:m}},I.animate=function(t){return arguments.length?(_=t,I):_},I.xAxis=S,I.yAxis=x,I.options={},I.options.id=t,I.options.margin=c,I.options.barPad=.2,I.options.mobileThreshold=g,I.options.type="ordinalBar",I.options.lineStrokeColor=I.lineStrokeColor,I};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,s.createId)(),e=null,n=null,l=(0,a.default)(),d=null,c={top:30,right:20,bottom:50,left:60},u=640,h=null,p=16,m=9,g=500,f=!0,v=r.default.colors,b=(0,o.default)(),y=!0,w="%Y-%m-%d",_="Hmmm, seems there is no data to show",C=[],k=[],S=[],x=!0,I=void 0,T=void 0,A=(d3.bisector((function(t){return xValue(t)})).left,0),j=0,E=(0,i.default)("X"),P=(0,i.default)("Y");function D(i){i.each((function(i){d=i;for(var a=0;a<Object.keys(i).length;a++)S[a]=!0;F(i),d=i,(e=d3.select(this)).classed({"mcchart-container":!0}),f&&(u=e.node().getBoundingClientRect().width),(n=e.selectAll("svg").data([k])).attr("id","svg-"+this.id),n.classed({"mcchart-svg":!0});var o=n.enter().append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).append("g");n.attr("width",u),h=u*m/p,n.attr("height",h);var g=n.select("g");g.classed({"mcchart-stackBarChart":!0}),g.attr("transform","translate("+c.left+","+c.top+")");var v=n.append("g").attr("class","mcchart-legendWrap");b.createLegend(D,k,v),y?v.selectAll(".mcchart-legendSeries").on("click",(function(t,e){var n=d3.select(this);n.classed("mcchart-legendSeries--hide",!n.classed("mcchart-legendSeries--hide")),S[e]?S[e]=!1:S[e]=!0,D._updateSeriesData()})):n.select(".mcchart-legendWrap").selectAll("*").remove(),D._updateSeriesData=function(){var t=R(d,C);O(t),T.data([t])},A=Math.ceil(h-c.top-c.bottom),j=u-c.left-c.right,D.redraw=function(){n.remove(),e.call(D)};var w,x=d3.scale.ordinal();x.type=r.default.scaleType.ORDINAL,E.createAxis(D,k,x),w=o,E.setTicks(E.maxTicks(),E.maxResponsiveTicks()),D.width()<D.mobileThreshold()?E.axis().tickValues(E.scale().domain().filter((function(t,e){return!(e%4)}))):E.axis().tickValues(E.scale().domain()),0==!!E.tickFormat()&&E.tickFormat(s.timeTick),E.axis().scale(E.scale()).orient("bottom").tickFormat(E.tickFormat()),w.append("g").attr("class","mcchart-x mcchart-x-"+t+" mcchart-axis").classed("mcchart-tick--hide",!E.showTicks()).attr("transform","translate(0, "+A+")").call(E.axis());var N=d3.scale.linear();N.type=r.default.scaleType.LINEAR,P.createAxis(D,k,N),function(e){P.setTicks(P.maxTicks(),P.maxResponsiveTicks()),0==!!P.tickFormat()&&P.tickFormat(s.numberTick),P.axis().scale(P.scale()).tickSize(-j,0,0).tickFormat(P.tickFormat()).tickPadding(10).ticks(P.maxTicks()).orient("left"),e.append("g").attr("class","mcchart-y mcchart-y-"+t+" mcchart-axis").classed("mcchart-tick--hide",!P.showTicks()).call(P.axis()),""!==P.label()&&d3.select(".mcchart-y-"+t).append("text").attr("class","mcchart-axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("font-size","12px").style("text-anchor","end").text(P.label())}(o),I=o.append("g").attr("class","mcchart-barContainer").attr("transform","translate(0, -1)"),O();var U=o.append("g").attr("class","mcchart-focus");if((T=o.append("rect")).attr("width",j).attr("height",A).attr("class","mcchart-interactive mcchart-interactive-"+t),U.style("display","none"),D.noDataContainer=o.append("g").attr("class","mcchart-noDataContainer").classed("mcchart-noDataContainer--hide",!0).attr("opacity",0),D.noDataContainer.append("text").attr("class","mcchart-noDataMessage").attr("transform","translate("+j/2+","+A/2+")").attr("text-anchor","middle").text(_),L(D.noDataContainer),l.enabled()){var $=E.scale().rangeBand();l.chartContainer(e),l.flipPoint(j/2+$/2),T.append("div").call(l),T.on("mouseout",(function(){l.hide()})).on("mousemove",(function(t){for(var e=d3.mouse(this)[0],n=d3.mouse(this)[1],i=0;i<t.length;i++)for(var a=0;a<t[i].length;a++){var o=t[i][a],s=E.scale(o.x),r=s+E.scale().rangeBand(),d=P.scale(o.y+o.y0),u=P.scale(o.y0);if(o.seriesIndex=i,e>s&&e<r&&n>d&&n<u){e<l.flipPoint()?l.data(o,s+$+c.left,d+c.top,e,n):l.data(o,s+c.left,d+c.top,e,n),l.show(),i=t.length-1;break}l.hide()}}))}D.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=t,L(D.noDataContainer);var n=F(t);T.data([n]),M(n,e),B(n),O()},f&&d3.select(window).on("resize",(0,s.debounce)((function(){D.animate(!1),D.redraw()}),500))}))}function N(t){return 0===P.value(t)||"0"===P.value(t)}function L(t){var e=[];for(var n in d)e.push(d[n].every(N));e.every((function(t){return!0===t}))?(t.classed("mcchart-noDataContainer--hide",!1),t.transition().delay(750).duration(375).attr("opacity",1)):t.transition().duration(375).attr("opacity",0).each("end",(function(){t.classed("mcchart-noDataContainer--hide",!0)}))}function M(e,n){if(E.scale().domain(e[0].map((function(t){return t.x}))),E.scale().rangeRoundBands([0,D.scaleWidth()],D.options.barPad),E.axis().tickValues(E.scale().domain()),n.xAxisFormat){var i=d3.time.format(n.xAxisFormat);E.axis().tickFormat((function(t){return i(t)}))}d3.select(".mcchart-x-"+t).transition().duration(750).call(E.axis())}function B(e){var n=[];P.scale().domain(e[e.length-1].map((function(t){n.push(t.y+t.y0)}))),P.scale().domain([0,d3.max(n)]).nice(),d3.select(".mcchart-y-"+t).transition().duration(750).call(P.axis())}function R(t,e){return d3.layout.stack()(e.map((function(e,n){var i=!0;for(var a in t[e])if(null===(0,s.parseDate)(t[e][a][E.keyValue()])){i=!1;break}return t[e].map((function(t){return{x:i?(0,s.parseDate)(t[E.keyValue()]):t[E.keyValue()],y:S[n]?+t[P.keyValue()]:0}}))})))}function F(t){for(var e in C=Object.keys(t),t)t[e].forEach((function(t){t[P.keyValue()]<0&&(t[P.keyValue()]=0)}));return k=R(t,C)}function O(t){var e=t||k,n=I.selectAll(".mcchart-barlayer").data(e),i=0;n.enter().append("g").attr("class","mcchart-barlayer").attr("x",(function(t){return E.scale(t.x)})).style("fill",(function(t,e){var n=S[e]?e+i:e+i++;return v[n]})),n.exit().style("fill",(function(t,e){var n=S[e]?e+i:e+i++;return v[n]})).selectAll("rect").transition().duration(750).delay((function(t,e){return 10*e})).attr("y",(function(t){return P.scale(t.y+t.y0)})).attr("height",(function(t){return 0})).remove();var a=n.selectAll("rect").data((function(t){return t}));a.transition().duration(750).delay((function(t,e){return 100*e})).attr("x",(function(t){return E.scale(t.x)})).attr("y",(function(t){return P.scale(t.y+t.y0)})).attr("width",E.scale().rangeBand()-1).attr("height",(function(t){return P.scale(t.y0)-P.scale(t.y+t.y0)})),a.enter().append("rect").attr("class","bar").attr("width",E.scale().rangeBand()-1).attr("opacity",1).attr("y",(function(t){return A})).attr("height",(function(t){return 0})).transition().duration(750).delay((function(t,e){return 100*e})).attr("x",(function(t){return E.scale(t.x)})).attr("y",(function(t){return P.scale(t.y+t.y0)})).attr("height",(function(t){return P.scale(t.y0)-P.scale(t.y+t.y0)})),a.exit().transition().duration(750).delay((function(t,e){return 50*e})).attr("y",(function(t){return A})).attr("height",(function(t){return 0})).remove()}return D.loadChart=function(t,e){d3.select(t).datum(e).call(D)},D.tooltip=function(t){return arguments.length?(l=t,D):l},D.noDataMessage=function(t){return arguments.length?(_=t,D):_},D.colors=function(t){return arguments.length?(v=t,D):v},D.width=function(t){return arguments.length?(u=t,D):u},D.height=function(t){return arguments.length?(h=t,D):h},D.scaleWidth=function(t){return arguments.length?(j=t,D):j},D.scaleHeight=function(t){return arguments.length?(A=t,D):A},D.mobileThreshold=function(t){return arguments.length?(g=t,D):g},D.responsive=function(t){return arguments.length?(f=t,D):f},D.aspectRatio=function(t,e){return arguments.length?(p=t,m=e,D):{aspectWidth:p,aspectHeight:m}},D.legend=function(t){return arguments.length?(b=t,D):b},D.showLegend=function(t){return arguments.length?(y=t,D):y},D.dateFormat=function(t){return arguments.length?(w=t,D):w},D.animate=function(t){return arguments.length?(x=t,D):x},D.xAxis=E,D.yAxis=P,D.options={},D.options.id=t,D.options.margin=c,D.options.barPad=.4,D.options.mobileThreshold=g,D.options.type="stackBar",D};var i=l(n(5)),a=l(n(2)),o=l(n(3)),s=n(1),r=l(s);function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,a.createId)(),e=o.default.colors,n=300,i=!0,s=14,r=50,l={noData:"There isn't enough data to display the chart"},d=!1;function c(o){var u=null,h=null,p=null,m=null,g=null,f=null,v=null,b=null;i&&(n=o.node().getBoundingClientRect().width,d3.select(window).on("resize",(0,a.debounce)((function(){c.redraw()}),500)));var y=Math.min(n,n)/2,w=d3.scale.ordinal().range(e),_=d3.svg.arc().outerRadius(y).innerRadius(y-r),C=d3.layout.pie().sort(null).value((function(t){return t.value})),k=o.attr("class","mcchart-container-"+t).append("svg").attr("id","svg-"+t).classed({"mcchart-svg":!0}).attr("width",n).attr("height",n),S=k.append("g").attr("transform","translate("+n/2+","+n/2+")"),x=null;function I(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return _(e(t))}}c.redraw=function(){n=o.node().getBoundingClientRect().width,S.attr("transform","translate("+n/2+","+n/2+")"),k.attr("width",n).attr("height",n),y=Math.min(n,n)/2,_.outerRadius(y).innerRadius(y-r),b.attr("d",_)},c._addHoverStates=function(t){t.on("mouseenter",(function(t,e){var n=d3.select(p[0][e]);c._highlightSource(this,t.data,n)})).on("mouseleave",(function(t){c._resetHighlight()}))};var T=d3.format(",f");c.sectionsArr=[],c.updateData=function(n){var i=A(n);return g=i,new Promise((function(n,a){c.legendContainer.innerHTML="",0===i.length?(k.style("display","none"),f.text(""),v.text(""),n({promise:"success",data:i,status:l.noData})):(k.style("display","block"),m=d3.sum(i,(function(t){return t.value})),(b=(b=S.selectAll("path")).data(C(i))).enter().append("path").attr("fill",(function(t,n){return this._current=t,e[n]})).attr("class","mcchart-arc"+t).attr("id",(function(t,e){var n={id:"#section-"+e,props:t};return c.sectionsArr.push(n),"section-"+e})),C.value((function(t){return t.value})),b.transition().duration(750).attrTween("d",I),b.exit().remove(),d?(f.text(""),v.text("")):(f.text(T(m)),v.text("Total")),c._addHoverStates(b),n({promise:"success",data:i}))}))},c._removeLegend=function(){u&&h&&(u.select("svg").remove(),h.select("svg").remove())},c.legnedContainer=null,c._createLegend=function(){var n=g,i=Array.from(c.legendContainer.children),a=[],o=[];i.forEach((function(t,e){a.push(t.firstChild),o.push(t.lastChild)})),p=d3.selectAll(i),u=d3.selectAll(a).datum(n),h=d3.selectAll(o).datum(n),u.each((function(n,i){var a=d3.select(this);(x=a.append("svg").attr("width","100%").attr("height",30).attr("class","mcchart-legend"+t)).append("text").attr("x",30).attr("y",13).attr("text-anchor","start").style("font-size",s).text(n[i].label),x.append("g").attr("width",15).attr("height",15).append("rect").attr("width",15).attr("height",15).attr("rx",3).attr("ry",3).style("fill",e[i])})),h.each((function(e,n){var i=d3.format(".2f")(e[n].value/m*100);0===e[n].value&&(i=0),d3.select(this).append("svg").attr("width","100%").attr("height",30).attr("class","mcchart-legendValue"+t).append("text").attr("y",13).text((function(){return d?i+"%":e[n].value+" ("+i+"%)"}))})),p.datum(n).on("mouseenter",(function(t,e){var n=c.getSectionObj(e).id,i=t[e],a=d3.select(this);c._highlightSource(n,i,a)})).on("mouseleave",(function(){c._resetHighlight()}))};var A=function(t){var e=t.map((function(e,n){var i=Object.keys(t[n]);return{label:e[i[0]],value:e[i[1]]}}));return e.filter((function(t){return 0!=t.value}))};return c.getSectionObj=function(t){return c.sectionsArr[t]},c._highlightSource=function(t,e,n){var i=d3.format(".2f")(e.value/m*100);f.text((function(){return d?i+"%":T(e.value)})),v.text(e.label),b.transition().style("opacity",.7),d3.select(t).transition().style("opacity",1),c._highlightLegendItem(n)},c._resetHighlight=function(){b.transition().style("opacity",1),d?(f.text(""),v.text("")):(f.text(m),v.text("Total")),p.transition().style("opacity",1)},c._highlightLegendItem=function(t){p.transition().style("opacity",.7),t.transition().style("opacity",1)},c._renderChart=function(e){b=S.datum(e).selectAll(".mcchart-arc"+t).data(C).enter().append("path").attr("class","mcchart-arc"+t).attr("id",(function(t,e){var n={id:"#section-"+e,props:t};return c.sectionsArr.push(n),"section-"+e})).attr("d",_).style("fill",(function(t){return w(t.data.label)})).each((function(t){this._current=t})),c._addHoverStates(b),m=d3.sum(e,(function(t){return t.value})),d?(f.text(""),v.text("")):(f.text(T(m)),v.text("Total"))},new Promise((function(e,n){o.each((function(n){g=A(n),m=d3.sum(g,(function(t){return t.value})),v=S.append("text").attr("y",15).attr("text-anchor","middle").attr("dominant-baseline","central").attr("class","mcchart-bottom-text"+t).style("font-size",s),f=S.append("text").attr("y",-15).attr("text-anchor","middle").attr("dominant-baseline","central").attr("class","mcchart-top-text"+t).style("font-size",s),0===g.length?e({promise:"success",data:g,status:"There isn't any data to display the chart."}):(c._renderChart(g),e({promise:"success",data:g,status:"All is well"}))}))}))}return c.loadChart=function(t,e){return c(d3.select(t).datum(e)).then((function(t){return t}))},c.colors=function(t){return arguments.length?(e=t,c):e},c.circleSize=function(t){return arguments.length?(n=t,c):n},c.strokeWidth=function(t){return arguments.length?(r=t,c):r},c.fontSize=function(t){return arguments.length?(s=t,c):s},c.status=function(t){return arguments.length?(l=t,c):l},c.isResponsive=function(t){return arguments.length?(i=t,c):i},c.percentageOnly=function(t){return arguments.length?(d=t,c):d},c};var i,a=n(1),o=(i=a)&&i.__esModule?i:{default:i}}])},t.exports=i()},function(t,e,n){var i,a;i=[n(0),n(12),n(4),n(7),n(1),n(5),n(141)],void 0===(a=function(t,e,n,i,a,o,s){return t([e,s],{value:null,options:null,buildRendering:function(){var t=this.value;this.domNode=n.create("select"),this.replaceOptions(this.options),t&&(this.domNode.value=t),this.set("value",this.domNode.value),this.on("change",a.hitch(this,"onValueChange"))},getDisplayHTML:function(){var t=this.domNode.options[this.domNode.selectedIndex];return t?t.innerHTML:"(Invalid value)"},getValue:function(){return this.value},setValue:function(t){this.set("value",t)},replaceOptions:function(t){this.options=t,n.empty(this.domNode);var e={};for(var i in o.forEach(this.options,a.hitch(this,(function(t){var i=n.create("option",{value:t.value,innerHTML:t.label});t.group?(e[t.group]||(e[t.group]=n.create("optgroup",{label:t.group})),n.place(i,e[t.group])):n.place(i,this.domNode)}))),e)n.place(e[i],this.domNode);this.set("value",this.domNode.value)},onValueChange:function(){this._updateValue()},_updateValue:function(){this.set("value",this.domNode.value)},_setOptionsAttr:function(t){this._set("options",t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(23),n(1),n(2),n(49)],void 0===(a=function(t,e,n,i,a,o){return e("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(e){var n=[];return t.forEach(e||this.getChildren(),(function(t){"value"in t?n.push(t):n=n.concat(this._getDescendantFormWidgets(t.getChildren()))}),this),n},reset:function(){t.forEach(this._getDescendantFormWidgets(),(function(t){t.reset&&t.reset()}))},validate:function(){var e=!1;return t.every(t.map(this._getDescendantFormWidgets(),(function(t){t._hasBeenBlurred=!0;var n=t.disabled||!t.validate||t.validate();return n||e||(o.scrollIntoView(t.containerNode||t.domNode),t.focus(),e=!0),n})),(function(t){return t}))},setValues:function(t){return n.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0"),this.set("value",t)},_setValueAttr:function(e){var n={};for(var a in t.forEach(this._getDescendantFormWidgets(),(function(t){t.name&&(n[t.name]||(n[t.name]=[])).push(t)})),n)if(n.hasOwnProperty(a)){var o=n[a],s=i.getObject(a,!1,e);void 0!==s&&(s=[].concat(s),"boolean"==typeof o[0].checked?t.forEach(o,(function(e){e.set("value",-1!=t.indexOf(s,e._get("value")))})):o[0].multiple?o[0].set("value",s):t.forEach(o,(function(t,e){t.set("value",s[e])})))}},getValues:function(){return n.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},_getValueAttr:function(){var e={};return t.forEach(this._getDescendantFormWidgets(),(function(t){var n=t.name;if(n&&!t.disabled){var a=t.get("value");if("boolean"==typeof t.checked)if(/Radio/.test(t.declaredClass))!1!==a?i.setObject(n,a,e):void 0===(a=i.getObject(n,!1,e))&&i.setObject(n,null,e);else{var o=i.getObject(n,!1,e);o||(o=[],i.setObject(n,o,e)),!1!==a&&o.push(a)}else{var s=i.getObject(n,!1,e);void 0!==s?i.isArray(s)?s.push(a):i.setObject(n,[s,a],e):i.setObject(n,a,e)}}})),e},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var e=t.map(this._descendants,(function(t){return t.get("state")||""}));return t.indexOf(e,"Error")>=0?"Error":t.indexOf(e,"Incomplete")>=0?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(e){this._descendants=this._getDescendantFormWidgets(),t.forEach(this._descendants,(function(t){t._started||t.startup()})),e||this._onChildChange()},_onChildChange:function(t){t&&"state"!=t&&"disabled"!=t||this._set("state",this._getState()),t&&"value"!=t&&"disabled"!=t&&"checked"!=t||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer((function(){delete this._onChangeDelayTimer,this._set("value",this.get("value"))}),10))},startup:function(){this.inherited(arguments),this._descendants=this._getDescendantFormWidgets(),this.value=this.get("value"),this.state=this._getState();var t=this;this.own(a(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",(function(e){e.target!=t.domNode&&t._onChildChange(e.type.replace("attrmodified-",""))}))),this.watch("state",(function(t,e,n){this.onValidStateChange(""==n)}))},destroy:function(){this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(162)],void 0===(a=function(t,e){return t("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute(),this.execute(this.get("value"))},_getFocusItems:function(){var t=e._getTabNavigable(this.domNode);this._firstFocusItem=t.lowest||t.first||this.closeButtonNode||this.domNode,this._lastFocusItem=t.last||t.highest||this._firstFocusItem}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports={scientificFormat:"#E0","currencySpacing-afterCurrency-currencyMatch":"[:^S:]",infinity:"∞",superscriptingExponent:"×",list:";",percentSign:"%",minusSign:"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":" ",nan:"NaN",plusSign:"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]",currencyFormat:"¤ #,##0.00",perMille:"‰",group:",",percentFormat:"#,##0%","decimalFormat-long":"000T",decimalFormat:"#,##0.###",decimal:".","currencySpacing-beforeCurrency-insertBetween":" ",exponential:"E"}},function(t,e){t.exports=window.require("dojo/_base/NodeList")},function(t,e,n){var i,a;i=[n(1)],void 0===(a=function(t){var e={};return t.setObject("dojo.data.util.sorter",e),e.basicComparator=function(t,e){var n=-1;return null===t&&(t=void 0),null===e&&(e=void 0),t==e?n=0:(t>e||null==t)&&(n=1),n},e.createSortFunction=function(t,n){var i,a=[];function o(t,e,n,i){return function(a,o){var s=i.getValue(a,t),r=i.getValue(o,t);return e*n(s,r)}}for(var s=n.comparatorMap,r=e.basicComparator,l=0;l<t.length;l++){var d=(i=t[l]).attribute;if(d){var c=i.descending?-1:1,u=r;s&&("string"!=typeof d&&"toString"in d&&(d=d.toString()),u=s[d]||r),a.push(o(d,c,u,n))}}return function(t,e){for(var n=0;n<a.length;){var i=a[n++](t,e);if(0!==i)return i}return 0}},e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(7)],void 0===(a=function(t,e){return t("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(t){var e=this.checked;this._set("checked",!e);var n=this.inherited(arguments);return this.set("checked",n?this.checked:e),n},_setCheckedAttr:function(t,n){this._set("checked",t);var i=this.focusNode||this.domNode;this._created&&e.get(i,"checked")!=!!t&&e.set(i,"checked",!!t),i.setAttribute(this._aria_attr,String(t)),this._handleOnChange(t,n)},postCreate:function(){this.inherited(arguments);var t=this.focusNode||this.domNode;this.checked&&t.setAttribute("checked","checked"),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(5),n(0),n(10),n(7),n(27),n(9),n(30),n(1),n(2),n(33),n(32),n(49),n(106),n(211),n(43)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c,u,h,p,m,g,f){return u("dijit-legacy-requires")&&f(0,(function(){Promise.resolve().then((function(){n(113),n(707),n(708),n(212)})).catch(n.oe)})),i("dijit.Menu",g,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):e.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(t){return p.get(this._iframeContentDocument(t))||this._iframeContentDocument(t).__parent__||t.name&&document.frames[t.name]||null},_iframeContentDocument:function(t){return t.contentDocument||t.contentWindow&&t.contentWindow.document||t.name&&document.frames[t.name]&&document.frames[t.name].document||null},bindDomNode:function(t){var e;if("iframe"==(t=a.byId(t,this.ownerDocument)).tagName.toLowerCase()){var n=t,i=this._iframeContentWindow(n);e=h.body(i.document)}else e=t==h.body(this.ownerDocument)?this.ownerDocument.documentElement:t;var s={node:t,iframe:n};o.set(t,"_dijitMenu"+this.id,this._bindings.push(s));var r=d.hitch(this,(function(t){var e=this.selector,i=e?function(t){return c.selector(e,t)}:function(t){return t},a=this;return[c(t,i(this.leftClickToOpen?"click":"contextmenu"),(function(t){t.stopPropagation(),t.preventDefault(),(new Date).getTime()<this._lastKeyDown+500||a._scheduleOpen(this,n,{x:t.pageX,y:t.pageY},t.target)})),c(t,i("keydown"),(function(t){(93==t.keyCode||t.shiftKey&&t.keyCode==l.F10||this.leftClickToOpen&&t.keyCode==l.SPACE)&&(t.stopPropagation(),t.preventDefault(),a._scheduleOpen(this,n,null,t.target),this._lastKeyDown=(new Date).getTime())}))]}));s.connects=e?r(e):[],n&&(s.onloadHandler=d.hitch(this,(function(){var t=this._iframeContentWindow(n),e=h.body(t.document);s.connects=r(e)})),n.addEventListener?n.addEventListener("load",s.onloadHandler,!1):n.attachEvent("onload",s.onloadHandler))},unBindDomNode:function(t){var e;try{e=a.byId(t,this.ownerDocument)}catch(t){return}var n="_dijitMenu"+this.id;if(e&&o.has(e,n)){for(var i,s=o.get(e,n)-1,r=this._bindings[s];i=r.connects.pop();)i.remove();var l=r.iframe;l&&(l.removeEventListener?l.removeEventListener("load",r.onloadHandler,!1):l.detachEvent("onload",r.onloadHandler)),o.remove(e,n),delete this._bindings[s]}},_scheduleOpen:function(t,e,n,i){this._openTimer||(this._openTimer=this.defer((function(){delete this._openTimer,this._openMyself({target:i,delegatedTarget:t,iframe:e,coords:n})}),1))},_openMyself:function(t){var e=t.target,n=t.iframe,i=t.coords,o=!i;if(this.currentTarget=t.delegatedTarget,i){if(n){var l=s.position(n,!0),d=this._iframeContentWindow(n),c=s.docScroll(d.document),h=r.getComputedStyle(n),p=r.toPixelValue,g=(u("ie")&&u("quirks")?0:p(n,h.paddingLeft))+(u("ie")&&u("quirks")?p(n,h.borderLeftWidth):0),f=(u("ie")&&u("quirks")?0:p(n,h.paddingTop))+(u("ie")&&u("quirks")?p(n,h.borderTopWidth):0);i.x+=l.x+g-c.x,i.y+=l.y+f-c.y}}else(i=s.position(e,!0)).x+=10,i.y+=10;var v=this,b=this._focusManager.get("prevNode"),y=this._focusManager.get("curNode"),w=!y||a.isDescendant(y,this.domNode)?b:y;function _(){v.refocus&&w&&w.focus(),m.close(v)}m.open({popup:this,x:i.x,y:i.y,onExecute:_,onCancel:_,orient:this.isLeftToRight()?"L":"R"}),this.focus(),o||this.defer((function(){this._cleanUp(!0)})),this._onBlur=function(){this.inherited("_onBlur",arguments),m.close(this)}},destroy:function(){e.forEach(this._bindings,(function(t){t&&this.unBindDomNode(t.node)}),this),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(125),n(35),n(429),n(0),n(10),n(3),n(23),n(1),n(6),n(46),n(145),n(195)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return a("dijit.form._FormSelectWidget",h,{multiple:!1,options:null,store:null,_setStoreAttr:function(t){this._created&&this._deprecatedSetStore(t)},query:null,_setQueryAttr:function(t){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:t})},queryOptions:null,_setQueryOptionsAttr:function(t){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:t})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(e){var n=this.options||[];return null==e?n:l.isArray(e)?t.map(e,"return this.getOptions(item);",this):(l.isString(e)&&(e={value:e}),l.isObject(e)&&(t.some(n,(function(t,n){for(var i in e)if(!(i in t)||t[i]!=e[i])return!1;return e=n,!0}))||(e=-1)),e>=0&&e<n.length?n[e]:null)},addOption:function(e){t.forEach(l.isArray(e)?e:[e],(function(t){t&&l.isObject(t)&&this.options.push(t)}),this),this._loadChildren()},removeOption:function(e){var n=this.getOptions(l.isArray(e)?e:[e]);t.forEach(n,(function(e){e&&(this.options=t.filter(this.options,(function(t){return t.value!==e.value||t.label!==e.label})),this._removeOptionItem(e))}),this),this._loadChildren()},updateOption:function(e){t.forEach(l.isArray(e)?e:[e],(function(t){var e,n=this.getOptions({value:t.value});if(n)for(e in t)n[e]=t[e]}),this),this._loadChildren()},setStore:function(t,e,n){r.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0"),this._deprecatedSetStore(t,e,n)},_deprecatedSetStore:function(a,o,s){var r=this.store;if(s=s||{},r!==a){for(var d;d=this._notifyConnections.pop();)d.remove();a.get||(l.mixin(a,{_oldAPI:!0,get:function(t){var n=new e;return this.fetchItemByIdentity({identity:t,onItem:function(t){n.resolve(t)},onError:function(t){n.reject(t)}}),n.promise},query:function(t,n){var i=new e((function(){a.abort&&a.abort()}));i.total=new e;var a=this.fetch(l.mixin({query:t,onBegin:function(t){i.total.resolve(t)},onComplete:function(t){i.resolve(t)},onError:function(t){i.reject(t)}},n));return new u(i)}}),a.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[n.after(a,"onNew",l.hitch(this,"_onNewItem"),!0),n.after(a,"onDelete",l.hitch(this,"_onDeleteItem"),!0),n.after(a,"onSet",l.hitch(this,"_onSetItem"),!0)])),this._set("store",a)}return this.options&&this.options.length&&this.removeOption(this.options),this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),s.query&&this._set("query",s.query),s.queryOptions&&this._set("queryOptions",s.queryOptions),a&&a.query&&(this._loadingStore=!0,this.onLoadDeferred=new e,this._queryRes=a.query(this.query,this.queryOptions),c(this._queryRes,l.hitch(this,(function(e){if(this.sortByLabel&&!s.sort&&e.length)if(a.getValue)e.sort(i.createSortFunction([{attribute:a.getLabelAttributes(e[0])[0]}],a));else{var n=this.labelAttr;e.sort((function(t,e){return t[n]>e[n]?1:e[n]>t[n]?-1:0}))}s.onFetch&&(e=s.onFetch.call(this,e,s)),t.forEach(e,(function(t){this._addOptionForItem(t)}),this),this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(l.hitch(this,(function(t,e,n){e==n?this._onSetItem(t):(-1!=e&&this._onDeleteItem(t),-1!=n&&this._onNewItem(t))})),!0)),this._loadingStore=!1,this.set("value","_pendingValue"in this?this._pendingValue:o),delete this._pendingValue,this.loadChildrenOnOpen?this._pseudoLoadChildren(e):this._loadChildren(),this.onLoadDeferred.resolve(!0),this.onSetStore()})),(function(t){console.error("dijit.form.Select: "+t.toString()),this.onLoadDeferred.reject(t)}))),r},_setValueAttr:function(e,n){if(this._onChangeActive||(n=null),this._loadingStore)this._pendingValue=e;else if(null!=e){e=l.isArray(e)?t.map(e,(function(t){return l.isObject(t)?t:{value:t}})):l.isObject(e)?[e]:[{value:e}],e=t.filter(this.getOptions(e),(function(t){return t&&t.value}));var i=this.getOptions()||[];this.multiple||e[0]&&e[0].value||!i.length||(e[0]=i[0]),t.forEach(i,(function(n){n.selected=t.some(e,(function(t){return t.value===n.value}))}));var a=t.map(e,(function(t){return t.value}));if(void 0!==a&&void 0!==a[0]){var o=t.map(e,(function(t){return t.label}));this._setDisplay(this.multiple?o:o[0]),this.inherited(arguments,[this.multiple?a:a[0],n]),this._updateSelection()}}},_getDisplayedValueAttr:function(){var e=t.map([].concat(this.get("selectedOptions")),(function(t){return t&&"label"in t?t.label:t?t.value:null}),this);return this.multiple?e:e[0]},_setDisplayedValueAttr:function(t){this.set("value",this.getOptions("string"==typeof t?{label:t}:t))},_loadChildren:function(){this._loadingStore||(t.forEach(this._getChildren(),(function(t){t.destroyRecursive()})),t.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null,this._set("value",this._getValueFromOpts());var e=[].concat(this.value);if(e&&(e[0]||""===e[0])){var n=this;t.forEach(this._getChildren(),(function(i){var a=t.some(e,(function(t){return i.option&&t===i.option.value}));a&&!n.multiple&&(n.focusedChild=i),s.toggle(i.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),a),i.domNode.setAttribute("aria-selected",a?"true":"false")}),this)}},_getValueFromOpts:function(){var e=this.getOptions()||[];if(!this.multiple&&e.length){var n=t.filter(e,(function(t){return t.selected}))[0];return n&&n.value?n.value:(e[0].selected=!0,e[0].value)}return this.multiple?t.map(t.filter(e,(function(t){return t.selected})),(function(t){return t.value}))||[]:""},_onNewItem:function(t,e){e&&e.parent||this._addOptionForItem(t)},_onDeleteItem:function(t){var e=this.store;this.removeOption({value:e.getIdentity(t)})},_onSetItem:function(t){this.updateOption(this._getOptionObjForItem(t))},_getOptionObjForItem:function(t){var e=this.store,n=this.labelAttr&&this.labelAttr in t?t[this.labelAttr]:e.getLabel(t);return{value:n?e.getIdentity(t):null,label:n,item:t}},_addOptionForItem:function(t){var e=this.store;if(!e.isItemLoaded||e.isItemLoaded(t)){var n=this._getOptionObjForItem(t);this.addOption(n)}else e.loadItem({item:t,onItem:function(t){this._addOptionForItem(t)},scope:this})},constructor:function(t){this._oValue=(t||{}).value||null,this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments),o.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?d("> *",this.srcNodeRef).map((function(t){return"separator"===t.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:t.getAttribute("data-"+r._scopeName+"-value")||t.getAttribute("value"),label:String(t.innerHTML),selected:t.getAttribute("selected")||!1,disabled:t.getAttribute("disabled")||!1}}),this):[]),this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments),n.after(this,"onChange",l.hitch(this,"_updateSelection"));var t=this.store;t&&(t.getIdentity||t.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(t,this._oValue,{query:this.query,queryOptions:this.queryOptions})),this._storeInitialized=!0},startup:function(){this._loadChildren(),this.inherited(arguments)},destroy:function(){for(var t;t=this._notifyConnections.pop();)t.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(0),n(22),n(23),n(1),n(145),n(533),n(535),n(179),n(436)],void 0===(a=function(t,e,i,a,o,s,r,l,d,c){return e("dijit.form.ComboBoxMixin",[d,r],{dropDownClass:l,hasDownArrow:!0,templateString:c,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(t){this._set("hasDownArrow",t),this._buttonNode.style.display=t?"":"none"},_showResultList:function(){this.displayMessage(""),this.inherited(arguments)},_setStoreAttr:function(t){t.get||o.mixin(t,{_oldAPI:!0,get:function(t){var e=new i;return this.fetchItemByIdentity({identity:t,onItem:function(t){e.resolve(t)},onError:function(t){e.reject(t)}}),e.promise},query:function(t,e){var n=new i((function(){a.abort&&a.abort()}));n.total=new i;var a=this.fetch(o.mixin({query:t,onBegin:function(t){n.total.resolve(t)},onComplete:function(t){n.resolve(t)},onError:function(t){n.reject(t)}},e));return s(n)}}),this._set("store",t)},postMixInProperties:function(){var t=this.params.store||this.store;if(t&&this._setStoreAttr(t),this.inherited(arguments),!this.params.store&&this.store&&!this.store._oldAPI){var e=this.declaredClass;o.mixin(this.store,{getValue:function(t,n){return a.deprecated(e+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0"),t[n]},getLabel:function(t){return a.deprecated(e+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0"),t.name},fetch:function(t){a.deprecated(e+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0"),n.e(4).then(function(){var e=[n(1084)];o.hitch(this,(function(e){new e({objectStore:this}).fetch(t)})).apply(null,e)}.bind(this)).catch(n.oe)}})}},buildRendering:function(){this.inherited(arguments),this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(10),n(1),n(6),n(96),n(14)],void 0===(a=function(t,e,n,i,a,o){function s(t){return{id:t.value,value:t.value,name:n.trim(t.innerText||t.textContent||"")}}return t("dijit.form.DataList",a,{constructor:function(t,a){this.domNode=e.byId(a),n.mixin(this,t),this.id&&o.add(this),this.domNode.style.display="none",this.inherited(arguments,[{data:i("option",this.domNode).map(s)}])},destroy:function(){o.remove(this.id)},fetchSelectedItem:function(){var t=i("> option[selected]",this.domNode)[0]||i("> option",this.domNode)[0];return t&&s(t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5)],void 0===(a=function(t){return function(e,n){switch(typeof e){default:throw new Error("Can not query with a "+typeof e);case"object":case"undefined":var i=e;e=function(t){for(var e in i){var n=i[e];if(n&&n.test){if(!n.test(t[e],t))return!1}else if(n!=t[e])return!1}return!0};break;case"string":if(!this[e])throw new Error("No filter function "+e+" was found in store");e=this[e];case"function":}function a(i){var a=t.filter(i,e),o=n&&n.sort;if(o&&a.sort("function"==typeof o?o:function(t,e){for(var n,i=0;n=o[i];i++){var a=t[n.attribute],s=e[n.attribute];if((a=null!=a?a.valueOf():a)!=(s=null!=s?s.valueOf():s))return!!n.descending==(null==a||a>s)?-1:1}return 0}),n&&(n.start||n.count)){var s=a.length;(a=a.slice(n.start||0,(n.start||0)+(n.count||1/0))).total=s}return a}return a.matches=e,a}}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n'},function(t,e,n){var i,a;i=[n(0),n(1),n(83),n(59),n(80),n(704)],void 0===(a=function(t,e,n,i,a,o){var s=function(t){t=t||{};var e,i=n.getLocalization("dojo.cldr","number",n.normalizeLocale(t.locale)),a=t.pattern?t.pattern:i[(t.type||"decimal")+"Format"];return e="number"==typeof t.places?t.places:"string"==typeof t.places&&t.places.length>0?t.places.replace(/.*,/,""):-1!=a.indexOf(".")?a.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:i.decimal,places:e}},r=t("dijit.form.NumberTextBoxMixin",null,{pattern:function(t){return"("+(this.focused&&this.editOptions?this._regExpGenerator(e.delegate(t,this.editOptions))+"|":"")+this._regExpGenerator(t)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:a.format,_regExpGenerator:a.regexp,_decimalInfo:s(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(t){var e="number"==typeof t.places?t.places:0;e&&e++,"number"!=typeof t.max&&(t.max=9*Math.pow(10,15-e)),"number"!=typeof t.min&&(t.min=-9*Math.pow(10,15-e)),this.inherited(arguments,[t]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=s(t)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var t=this.get("value");if("number"==typeof t&&!isNaN(t)){var e=this.format(t,this.constraints);void 0!==e&&(this.textbox.value=e)}this.inherited(arguments)}},format:function(t,n){var i=String(t);return"number"!=typeof t?i:isNaN(t)?"":"rangeCheck"in this&&this.rangeCheck(t,n)||!1===n.exponent||!/\de[-+]?\d/i.test(i)?(this.editOptions&&this.focused&&(n=e.mixin({},n,this.editOptions)),this._formatter(t,n)):i},_parser:a.parse,parse:function(t,n){var i=this._parser(t,e.mixin({},n,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(i)&&(i=this._parser(t,n)),i},_getDisplayedValueAttr:function(){var t=this.inherited(arguments);return isNaN(t)?this.textbox.value:t},filter:function(t){return null==t||"string"==typeof t&&""==t?NaN:("number"!=typeof t||isNaN(t)||0==t||(t=a.round(t,this._decimalInfo.places)),this.inherited(arguments,[t]))},serialize:function(t,e){return"number"!=typeof t||isNaN(t)?"":this.inherited(arguments)},_setBlurValue:function(){var t=e.hitch(e.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(t,!0)},_setValueAttr:function(t,e,n){void 0!==t&&void 0===n&&(n=String(t),"number"==typeof t?isNaN(t)?n="":("rangeCheck"in this&&this.rangeCheck(t,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(n))&&(n=void 0):t?t=void 0:(n="",t=NaN)),this.inherited(arguments,[t,e,n])},_getValueAttr:function(){var t=this.inherited(arguments);if(!isNaN(t)||""===this.textbox.value)return t;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+a._realNumberRegexp(e.delegate(this.constraints))+"$").test(this.textbox.value)){var n=Number(this.textbox.value);return isNaN(n)?void 0:n}},isValid:function(t){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var e=this.get("value");return!(isNaN(e)||!this.rangeCheck(e,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var t="number"==typeof this.constraints.min,e="number"==typeof this.constraints.max,n=this.get("value");if(isNaN(n)||!t&&!e)return this.inherited(arguments);var a=0|n,o=n<0,s=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),r=this.maxLength||20,l=r-this.textbox.value.length,d=s?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",c=s?a+"."+d:a+"",u=i.rep("9",l),h=n,p=n;return o?h=Number(c+u):p=Number(c+u),!(t&&p<this.constraints.min||e&&h>this.constraints.max)}}),l=t("dijit.form.NumberTextBox",[o,r],{baseClass:"dijitTextBox dijitNumberTextBox"});return l.Mixin=r,l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1108),n(1111)],void 0===(a=function(t,e,n){return t("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:e,_selector:"date",dropDownPosition:["below"],maxHeight:1/0,value:new Date("")})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(83)],void 0===(a=function(t,e){var n={};return t.setObject("dojo.cldr.supplemental",n),n.getFirstDayOfWeek=function(t){var e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,do:0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,in:0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[n._region(t)];return void 0===e?1:e},n._region=function(t){var n=(t=e.normalizeLocale(t)).split("-"),i=n[1];return i?4==i.length&&(i=n[2]):i={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us",in:"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de",new:"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[n[0]],i},n.getWeekend=function(t){var e=n._region(t),i={in:0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[e],a={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[e];return void 0===i&&(i=6),void 0===a&&(a=0),{start:i,end:a}},n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(5),n(243)],void 0===(a=function(t,e,n){var i=function(n,i){this.start=n,this.end=i;var a=t.isArray(n),o=a?[]:i-n;a?(e.forEach(this.start,(function(t,e){o[e]=this.end[e]-t}),this),this.getValue=function(t){var n=[];return e.forEach(this.start,(function(e,i){n[i]=o[i]*t+e}),this),n}):this.getValue=function(t){return o*t+this.start}};return n._Line=i,i}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){"use strict";var t={base:("https:"===location.protocol?"https:":"http:")+"//twemoji.maxcdn.com/",ext:".png",size:"36x36",className:"emoji",convert:{fromCodePoint:function(t){var e="string"==typeof t?parseInt(t,16):t;if(e<65536)return i(e);return i(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:c},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt),this)},parse:function(e,n){n&&"function"!=typeof n||(n={callback:n});return("string"==typeof e?l:r)(e,{callback:n.callback||o,base:"string"==typeof n.base?n.base:t.base,ext:n.ext||t.ext,size:n.folder||(i=n.size||t.size,"number"==typeof i?i+"x"+i:i),className:n.className||t.className});var i},replace:d,test:function(t){e.lastIndex=0;var n=e.test(t);return e.lastIndex=0,n}},e=/((?:\ud83c\udde8\ud83c\uddf3|\ud83c\uddfa\ud83c\uddf8|\ud83c\uddf7\ud83c\uddfa|\ud83c\uddf0\ud83c\uddf7|\ud83c\uddef\ud83c\uddf5|\ud83c\uddee\ud83c\uddf9|\ud83c\uddec\ud83c\udde7|\ud83c\uddeb\ud83c\uddf7|\ud83c\uddea\ud83c\uddf8|\ud83c\udde9\ud83c\uddea|\u0039\ufe0f?\u20e3|\u0038\ufe0f?\u20e3|\u0037\ufe0f?\u20e3|\u0036\ufe0f?\u20e3|\u0035\ufe0f?\u20e3|\u0034\ufe0f?\u20e3|\u0033\ufe0f?\u20e3|\u0032\ufe0f?\u20e3|\u0031\ufe0f?\u20e3|\u0030\ufe0f?\u20e3|\u0023\ufe0f?\u20e3|\ud83d\udeb3|\ud83d\udeb1|\ud83d\udeb0|\ud83d\udeaf|\ud83d\udeae|\ud83d\udea6|\ud83d\udea3|\ud83d\udea1|\ud83d\udea0|\ud83d\ude9f|\ud83d\ude9e|\ud83d\ude9d|\ud83d\ude9c|\ud83d\ude9b|\ud83d\ude98|\ud83d\ude96|\ud83d\ude94|\ud83d\ude90|\ud83d\ude8e|\ud83d\ude8d|\ud83d\ude8b|\ud83d\ude8a|\ud83d\ude88|\ud83d\ude86|\ud83d\ude82|\ud83d\ude81|\ud83d\ude36|\ud83d\ude34|\ud83d\ude2f|\ud83d\ude2e|\ud83d\ude2c|\ud83d\ude27|\ud83d\ude26|\ud83d\ude1f|\ud83d\ude1b|\ud83d\ude19|\ud83d\ude17|\ud83d\ude15|\ud83d\ude11|\ud83d\ude10|\ud83d\ude0e|\ud83d\ude08|\ud83d\ude07|\ud83d\ude00|\ud83d\udd67|\ud83d\udd66|\ud83d\udd65|\ud83d\udd64|\ud83d\udd63|\ud83d\udd62|\ud83d\udd61|\ud83d\udd60|\ud83d\udd5f|\ud83d\udd5e|\ud83d\udd5d|\ud83d\udd5c|\ud83d\udd2d|\ud83d\udd2c|\ud83d\udd15|\ud83d\udd09|\ud83d\udd08|\ud83d\udd07|\ud83d\udd06|\ud83d\udd05|\ud83d\udd04|\ud83d\udd02|\ud83d\udd01|\ud83d\udd00|\ud83d\udcf5|\ud83d\udcef|\ud83d\udced|\ud83d\udcec|\ud83d\udcb7|\ud83d\udcb6|\ud83d\udcad|\ud83d\udc6d|\ud83d\udc6c|\ud83d\udc65|\ud83d\udc2a|\ud83d\udc16|\ud83d\udc15|\ud83d\udc13|\ud83d\udc10|\ud83d\udc0f|\ud83d\udc0b|\ud83d\udc0a|\ud83d\udc09|\ud83d\udc08|\ud83d\udc07|\ud83d\udc06|\ud83d\udc05|\ud83d\udc04|\ud83d\udc03|\ud83d\udc02|\ud83d\udc01|\ud83d\udc00|\ud83c\udfe4|\ud83c\udfc9|\ud83c\udfc7|\ud83c\udf7c|\ud83c\udf50|\ud83c\udf4b|\ud83c\udf33|\ud83c\udf32|\ud83c\udf1e|\ud83c\udf1d|\ud83c\udf1c|\ud83c\udf1a|\ud83c\udf18|\ud83c\udccf|\ud83c\udd70|\ud83c\udd71|\ud83c\udd7e|\ud83c\udd8e|\ud83c\udd91|\ud83c\udd92|\ud83c\udd93|\ud83c\udd94|\ud83c\udd95|\ud83c\udd96|\ud83c\udd97|\ud83c\udd98|\ud83c\udd99|\ud83c\udd9a|\ud83d\udc77|\ud83d\udec5|\ud83d\udec4|\ud83d\udec3|\ud83d\udec2|\ud83d\udec1|\ud83d\udebf|\ud83d\udeb8|\ud83d\udeb7|\ud83d\udeb5|\ud83c\ude01|\ud83c\ude02|\ud83c\ude32|\ud83c\ude33|\ud83c\ude34|\ud83c\ude35|\ud83c\ude36|\ud83c\ude37|\ud83c\ude38|\ud83c\ude39|\ud83c\ude3a|\ud83c\ude50|\ud83c\ude51|\ud83c\udf00|\ud83c\udf01|\ud83c\udf02|\ud83c\udf03|\ud83c\udf04|\ud83c\udf05|\ud83c\udf06|\ud83c\udf07|\ud83c\udf08|\ud83c\udf09|\ud83c\udf0a|\ud83c\udf0b|\ud83c\udf0c|\ud83c\udf0f|\ud83c\udf11|\ud83c\udf13|\ud83c\udf14|\ud83c\udf15|\ud83c\udf19|\ud83c\udf1b|\ud83c\udf1f|\ud83c\udf20|\ud83c\udf30|\ud83c\udf31|\ud83c\udf34|\ud83c\udf35|\ud83c\udf37|\ud83c\udf38|\ud83c\udf39|\ud83c\udf3a|\ud83c\udf3b|\ud83c\udf3c|\ud83c\udf3d|\ud83c\udf3e|\ud83c\udf3f|\ud83c\udf40|\ud83c\udf41|\ud83c\udf42|\ud83c\udf43|\ud83c\udf44|\ud83c\udf45|\ud83c\udf46|\ud83c\udf47|\ud83c\udf48|\ud83c\udf49|\ud83c\udf4a|\ud83c\udf4c|\ud83c\udf4d|\ud83c\udf4e|\ud83c\udf4f|\ud83c\udf51|\ud83c\udf52|\ud83c\udf53|\ud83c\udf54|\ud83c\udf55|\ud83c\udf56|\ud83c\udf57|\ud83c\udf58|\ud83c\udf59|\ud83c\udf5a|\ud83c\udf5b|\ud83c\udf5c|\ud83c\udf5d|\ud83c\udf5e|\ud83c\udf5f|\ud83c\udf60|\ud83c\udf61|\ud83c\udf62|\ud83c\udf63|\ud83c\udf64|\ud83c\udf65|\ud83c\udf66|\ud83c\udf67|\ud83c\udf68|\ud83c\udf69|\ud83c\udf6a|\ud83c\udf6b|\ud83c\udf6c|\ud83c\udf6d|\ud83c\udf6e|\ud83c\udf6f|\ud83c\udf70|\ud83c\udf71|\ud83c\udf72|\ud83c\udf73|\ud83c\udf74|\ud83c\udf75|\ud83c\udf76|\ud83c\udf77|\ud83c\udf78|\ud83c\udf79|\ud83c\udf7a|\ud83c\udf7b|\ud83c\udf80|\ud83c\udf81|\ud83c\udf82|\ud83c\udf83|\ud83c\udf84|\ud83c\udf85|\ud83c\udf86|\ud83c\udf87|\ud83c\udf88|\ud83c\udf89|\ud83c\udf8a|\ud83c\udf8b|\ud83c\udf8c|\ud83c\udf8d|\ud83c\udf8e|\ud83c\udf8f|\ud83c\udf90|\ud83c\udf91|\ud83c\udf92|\ud83c\udf93|\ud83c\udfa0|\ud83c\udfa1|\ud83c\udfa2|\ud83c\udfa3|\ud83c\udfa4|\ud83c\udfa5|\ud83c\udfa6|\ud83c\udfa7|\ud83c\udfa8|\ud83c\udfa9|\ud83c\udfaa|\ud83c\udfab|\ud83c\udfac|\ud83c\udfad|\ud83c\udfae|\ud83c\udfaf|\ud83c\udfb0|\ud83c\udfb1|\ud83c\udfb2|\ud83c\udfb3|\ud83c\udfb4|\ud83c\udfb5|\ud83c\udfb6|\ud83c\udfb7|\ud83c\udfb8|\ud83c\udfb9|\ud83c\udfba|\ud83c\udfbb|\ud83c\udfbc|\ud83c\udfbd|\ud83c\udfbe|\ud83c\udfbf|\ud83c\udfc0|\ud83c\udfc1|\ud83c\udfc2|\ud83c\udfc3|\ud83c\udfc4|\ud83c\udfc6|\ud83c\udfc8|\ud83c\udfca|\ud83c\udfe0|\ud83c\udfe1|\ud83c\udfe2|\ud83c\udfe3|\ud83c\udfe5|\ud83c\udfe6|\ud83c\udfe7|\ud83c\udfe8|\ud83c\udfe9|\ud83c\udfea|\ud83c\udfeb|\ud83c\udfec|\ud83c\udfed|\ud83c\udfee|\ud83c\udfef|\ud83c\udff0|\ud83d\udc0c|\ud83d\udc0d|\ud83d\udc0e|\ud83d\udc11|\ud83d\udc12|\ud83d\udc14|\ud83d\udc17|\ud83d\udc18|\ud83d\udc19|\ud83d\udc1a|\ud83d\udc1b|\ud83d\udc1c|\ud83d\udc1d|\ud83d\udc1e|\ud83d\udc1f|\ud83d\udc20|\ud83d\udc21|\ud83d\udc22|\ud83d\udc23|\ud83d\udc24|\ud83d\udc25|\ud83d\udc26|\ud83d\udc27|\ud83d\udc28|\ud83d\udc29|\ud83d\udc2b|\ud83d\udc2c|\ud83d\udc2d|\ud83d\udc2e|\ud83d\udc2f|\ud83d\udc30|\ud83d\udc31|\ud83d\udc32|\ud83d\udc33|\ud83d\udc34|\ud83d\udc35|\ud83d\udc36|\ud83d\udc37|\ud83d\udc38|\ud83d\udc39|\ud83d\udc3a|\ud83d\udc3b|\ud83d\udc3c|\ud83d\udc3d|\ud83d\udc3e|\ud83d\udc40|\ud83d\udc42|\ud83d\udc43|\ud83d\udc44|\ud83d\udc45|\ud83d\udc46|\ud83d\udc47|\ud83d\udc48|\ud83d\udc49|\ud83d\udc4a|\ud83d\udc4b|\ud83d\udc4c|\ud83d\udc4d|\ud83d\udc4e|\ud83d\udc4f|\ud83d\udc50|\ud83d\udc51|\ud83d\udc52|\ud83d\udc53|\ud83d\udc54|\ud83d\udc55|\ud83d\udc56|\ud83d\udc57|\ud83d\udc58|\ud83d\udc59|\ud83d\udc5a|\ud83d\udc5b|\ud83d\udc5c|\ud83d\udc5d|\ud83d\udc5e|\ud83d\udc5f|\ud83d\udc60|\ud83d\udc61|\ud83d\udc62|\ud83d\udc63|\ud83d\udc64|\ud83d\udc66|\ud83d\udc67|\ud83d\udc68|\ud83d\udc69|\ud83d\udc6a|\ud83d\udc6b|\ud83d\udc6e|\ud83d\udc6f|\ud83d\udc70|\ud83d\udc71|\ud83d\udc72|\ud83d\udc73|\ud83d\udc74|\ud83d\udc75|\ud83d\udc76|\ud83d\udeb4|\ud83d\udc78|\ud83d\udc79|\ud83d\udc7a|\ud83d\udc7b|\ud83d\udc7c|\ud83d\udc7d|\ud83d\udc7e|\ud83d\udc7f|\ud83d\udc80|\ud83d\udc81|\ud83d\udc82|\ud83d\udc83|\ud83d\udc84|\ud83d\udc85|\ud83d\udc86|\ud83d\udc87|\ud83d\udc88|\ud83d\udc89|\ud83d\udc8a|\ud83d\udc8b|\ud83d\udc8c|\ud83d\udc8d|\ud83d\udc8e|\ud83d\udc8f|\ud83d\udc90|\ud83d\udc91|\ud83d\udc92|\ud83d\udc93|\ud83d\udc94|\ud83d\udc95|\ud83d\udc96|\ud83d\udc97|\ud83d\udc98|\ud83d\udc99|\ud83d\udc9a|\ud83d\udc9b|\ud83d\udc9c|\ud83d\udc9d|\ud83d\udc9e|\ud83d\udc9f|\ud83d\udca0|\ud83d\udca1|\ud83d\udca2|\ud83d\udca3|\ud83d\udca4|\ud83d\udca5|\ud83d\udca6|\ud83d\udca7|\ud83d\udca8|\ud83d\udca9|\ud83d\udcaa|\ud83d\udcab|\ud83d\udcac|\ud83d\udcae|\ud83d\udcaf|\ud83d\udcb0|\ud83d\udcb1|\ud83d\udcb2|\ud83d\udcb3|\ud83d\udcb4|\ud83d\udcb5|\ud83d\udcb8|\ud83d\udcb9|\ud83d\udcba|\ud83d\udcbb|\ud83d\udcbc|\ud83d\udcbd|\ud83d\udcbe|\ud83d\udcbf|\ud83d\udcc0|\ud83d\udcc1|\ud83d\udcc2|\ud83d\udcc3|\ud83d\udcc4|\ud83d\udcc5|\ud83d\udcc6|\ud83d\udcc7|\ud83d\udcc8|\ud83d\udcc9|\ud83d\udcca|\ud83d\udccb|\ud83d\udccc|\ud83d\udccd|\ud83d\udcce|\ud83d\udccf|\ud83d\udcd0|\ud83d\udcd1|\ud83d\udcd2|\ud83d\udcd3|\ud83d\udcd4|\ud83d\udcd5|\ud83d\udcd6|\ud83d\udcd7|\ud83d\udcd8|\ud83d\udcd9|\ud83d\udcda|\ud83d\udcdb|\ud83d\udcdc|\ud83d\udcdd|\ud83d\udcde|\ud83d\udcdf|\ud83d\udce0|\ud83d\udce1|\ud83d\udce2|\ud83d\udce3|\ud83d\udce4|\ud83d\udce5|\ud83d\udce6|\ud83d\udce7|\ud83d\udce8|\ud83d\udce9|\ud83d\udcea|\ud83d\udceb|\ud83d\udcee|\ud83d\udcf0|\ud83d\udcf1|\ud83d\udcf2|\ud83d\udcf3|\ud83d\udcf4|\ud83d\udcf6|\ud83d\udcf7|\ud83d\udcf9|\ud83d\udcfa|\ud83d\udcfb|\ud83d\udcfc|\ud83d\udd03|\ud83d\udd0a|\ud83d\udd0b|\ud83d\udd0c|\ud83d\udd0d|\ud83d\udd0e|\ud83d\udd0f|\ud83d\udd10|\ud83d\udd11|\ud83d\udd12|\ud83d\udd13|\ud83d\udd14|\ud83d\udd16|\ud83d\udd17|\ud83d\udd18|\ud83d\udd19|\ud83d\udd1a|\ud83d\udd1b|\ud83d\udd1c|\ud83d\udd1d|\ud83d\udd1e|\ud83d\udd1f|\ud83d\udd20|\ud83d\udd21|\ud83d\udd22|\ud83d\udd23|\ud83d\udd24|\ud83d\udd25|\ud83d\udd26|\ud83d\udd27|\ud83d\udd28|\ud83d\udd29|\ud83d\udd2a|\ud83d\udd2b|\ud83d\udd2e|\ud83d\udd2f|\ud83d\udd30|\ud83d\udd31|\ud83d\udd32|\ud83d\udd33|\ud83d\udd34|\ud83d\udd35|\ud83d\udd36|\ud83d\udd37|\ud83d\udd38|\ud83d\udd39|\ud83d\udd3a|\ud83d\udd3b|\ud83d\udd3c|\ud83d\udd3d|\ud83d\udd50|\ud83d\udd51|\ud83d\udd52|\ud83d\udd53|\ud83d\udd54|\ud83d\udd55|\ud83d\udd56|\ud83d\udd57|\ud83d\udd58|\ud83d\udd59|\ud83d\udd5a|\ud83d\udd5b|\ud83d\uddfb|\ud83d\uddfc|\ud83d\uddfd|\ud83d\uddfe|\ud83d\uddff|\ud83d\ude01|\ud83d\ude02|\ud83d\ude03|\ud83d\ude04|\ud83d\ude05|\ud83d\ude06|\ud83d\ude09|\ud83d\ude0a|\ud83d\ude0b|\ud83d\ude0c|\ud83d\ude0d|\ud83d\ude0f|\ud83d\ude12|\ud83d\ude13|\ud83d\ude14|\ud83d\ude16|\ud83d\ude18|\ud83d\ude1a|\ud83d\ude1c|\ud83d\ude1d|\ud83d\ude1e|\ud83d\ude20|\ud83d\ude21|\ud83d\ude22|\ud83d\ude23|\ud83d\ude24|\ud83d\ude25|\ud83d\ude28|\ud83d\ude29|\ud83d\ude2a|\ud83d\ude2b|\ud83d\ude2d|\ud83d\ude30|\ud83d\ude31|\ud83d\ude32|\ud83d\ude33|\ud83d\ude35|\ud83d\ude37|\ud83d\ude38|\ud83d\ude39|\ud83d\ude3a|\ud83d\ude3b|\ud83d\ude3c|\ud83d\ude3d|\ud83d\ude3e|\ud83d\ude3f|\ud83d\ude40|\ud83d\ude45|\ud83d\ude46|\ud83d\ude47|\ud83d\ude48|\ud83d\ude49|\ud83d\ude4a|\ud83d\ude4b|\ud83d\ude4c|\ud83d\ude4d|\ud83d\ude4e|\ud83d\ude4f|\ud83d\ude80|\ud83d\ude83|\ud83d\ude84|\ud83d\ude85|\ud83d\ude87|\ud83d\ude89|\ud83d\ude8c|\ud83d\ude8f|\ud83d\ude91|\ud83d\ude92|\ud83d\ude93|\ud83d\ude95|\ud83d\ude97|\ud83d\ude99|\ud83d\ude9a|\ud83d\udea2|\ud83d\udea4|\ud83d\udea5|\ud83d\udea7|\ud83d\udea8|\ud83d\udea9|\ud83d\udeaa|\ud83d\udeab|\ud83d\udeac|\ud83d\udead|\ud83d\udeb2|\ud83d\udeb6|\ud83d\udeb9|\ud83d\udeba|\ud83d\udebb|\ud83d\udebc|\ud83d\udebd|\ud83d\udebe|\ud83d\udec0|\ud83c\udde6|\ud83c\udde7|\ud83c\udde8|\ud83c\udde9|\ud83c\uddea|\ud83c\uddeb|\ud83c\uddec|\ud83c\udded|\ud83c\uddee|\ud83c\uddef|\ud83c\uddf0|\ud83c\uddf1|\ud83c\uddf2|\ud83c\uddf3|\ud83c\uddf4|\ud83c\uddf5|\ud83c\uddf6|\ud83c\uddf7|\ud83c\uddf8|\ud83c\uddf9|\ud83c\uddfa|\ud83c\uddfb|\ud83c\uddfc|\ud83c\uddfd|\ud83c\uddfe|\ud83c\uddff|\ud83c\udf0d|\ud83c\udf0e|\ud83c\udf10|\ud83c\udf12|\ud83c\udf16|\ud83c\udf17|\ue50a|\u3030|\u27b0|\u2797|\u2796|\u2795|\u2755|\u2754|\u2753|\u274e|\u274c|\u2728|\u270b|\u270a|\u2705|\u26ce|\u23f3|\u23f0|\u23ec|\u23eb|\u23ea|\u23e9|\u2122|\u27bf|\u00a9|\u00ae)|(?:(?:\ud83c\udc04|\ud83c\udd7f|\ud83c\ude1a|\ud83c\ude2f|\u3299|\u303d|\u2b55|\u2b50|\u2b1c|\u2b1b|\u2b07|\u2b06|\u2b05|\u2935|\u2934|\u27a1|\u2764|\u2757|\u2747|\u2744|\u2734|\u2733|\u2716|\u2714|\u2712|\u270f|\u270c|\u2709|\u2708|\u2702|\u26fd|\u26fa|\u26f5|\u26f3|\u26f2|\u26ea|\u26d4|\u26c5|\u26c4|\u26be|\u26bd|\u26ab|\u26aa|\u26a1|\u26a0|\u2693|\u267f|\u267b|\u3297|\u2666|\u2665|\u2663|\u2660|\u2653|\u2652|\u2651|\u2650|\u264f|\u264e|\u264d|\u264c|\u264b|\u264a|\u2649|\u2648|\u263a|\u261d|\u2615|\u2614|\u2611|\u260e|\u2601|\u2600|\u25fe|\u25fd|\u25fc|\u25fb|\u25c0|\u25b6|\u25ab|\u25aa|\u24c2|\u231b|\u231a|\u21aa|\u21a9|\u2199|\u2198|\u2197|\u2196|\u2195|\u2194|\u2139|\u2049|\u203c|\u2668)([\uFE0E\uFE0F]?)))/g,n=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|STYLE/,i=String.fromCharCode;return t;function a(t){return document.createTextNode(t)}function o(t,e){return"".concat(e.base,e.size,"/",t,e.ext)}function s(t,e){return c("️"===e?t.slice(0,-1):3===t.length&&"️"===t.charAt(1)?t.charAt(0)+t.charAt(2):t)}function r(i,o){for(var r,l,d,c,u,h,p,m,g,f,v,b=function t(e,i){for(var a,o,s=e.childNodes,r=s.length;r--;)3===(o=(a=s[r]).nodeType)?i.push(a):1!==o||n.test(a.nodeName)||t(a,i);return i}(i,[]),y=b.length;y--;){for(r=document.createDocumentFragment(),d=(l=b[y]).nodeValue,u=0;c=e.exec(d);)(h=c.index)!==u&&r.appendChild(a(d.slice(u,h))),m=c[0],g=c[1],f=c[2],u=h+m.length,"︎"!==f&&"©"!==g&&"®"!==g&&"™"!==g&&(v=o.callback(s(g,f),o,f))&&((p=new Image).onerror=t.onerror,p.className=o.className,p.setAttribute("draggable","false"),p.alt=m,p.src=v),r.appendChild(p||a(m)),p=null;0<u&&(u<d.length&&r.appendChild(a(d.slice(u))),l.parentNode.replaceChild(r,l))}return i}function l(t,e){return d(t,(function(t,n,i){var a;return"︎"!==i&&(a=e.callback(s(n,i),e,i))&&(t="<img ".concat('class="',e.className,'" ','draggable="false" ','alt="',t,'" ','src="',a,'"',">")),t}))}function d(t,n){return String(t).replace(e,n)}function c(t,e){for(var n=[],i=0,a=0,o=0;o<t.length;)i=t.charCodeAt(o++),a?(n.push((65536+(a-55296<<10)+(i-56320)).toString(16)),a=0):55296<=i&&i<=56319?a=i:n.push(i.toString(16));return n.join(e||"-")}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(223)],void 0===(a=function(t){var e=Math.max;return function(n,i,a){return i=e(void 0===i?n.length-1:i,0),function(){for(var o=arguments,s=-1,r=e(o.length-i,0),l=Array(r);++s<r;)l[s]=o[i+s];s=-1;for(var d=Array(i+1);++s<i;)d[s]=o[s];return d[i]=a(l),t(n,this,d)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(544),n(545)],void 0===(a=function(t,e){return e(t)}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return function(){return t}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(120)],void 0===(a=function(t){var e=Object.prototype,n=e.hasOwnProperty;return function(i,a,o,s){return void 0===i||t(i,e[o])&&!n.call(s,o)?a:i}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return function(e){return null==t?void 0:t[e]}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t,e,n,i){for(var a=t.length,o=n+(i?1:-1);i?o--:++o<a;)if(e(t[o],o,t))return o;return-1}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){var e=t(null,{constructor:function(t){this.type=t.type,this.code=t.code,this.heading=t.heading,this.details=t.details,this.context=t.context}});return e.TYPE_ERROR="error",e.TYPE_WARNING="warning",e.TYPE_SUCCESS="success",e.CODE_DEFAULT_TEXT_CONTENT=105,e.CODE_DEFAULT_IMAGE_CONTENT=117,e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(296),n(90),n(1170),n(50),n(224)],void 0===(a=function(t,e,n,i,a){return function(o,s,r){var l=i(o)?t:n;return r&&a(o,s,r)&&(s=void 0),l(o,e(s,3))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(18),n(8),n(4),n(10),n(32),n(22),n(40)],void 0===(a=function(t,e,n,i,a,o,s){var r,l=function(){i.byId("bt-pp-cancel")&&i.byId("bt-pp-cancel").click(),i.byId("braintree-paypal-button")&&i.byId("braintree-paypal-button").click()},d=function(t,e,n){var i=new o;return s(["https://js.braintreegateway.com/v1/braintree-data.js"],(function(){BraintreeData.setup(e,t,n?BraintreeData.environments.production:BraintreeData.environments.sandbox),i.resolve()})),i.promise};return{showPayPal:function(c){r=new o;return null===i.byId("paypal-hidden")?(n.place('<div id="paypal-hidden" style="display:none"></div>',a.body()),t(e.toUrl("/account/generate-braintree-token"),{handleAs:"json"}).then((function(t){s(["https://js.braintreegateway.com/v2/braintree.js"],(function(e){e.setup(t.token,"paypal",{container:"paypal-hidden",singleUse:!1,displayName:"Mailchimp",enableBillingAddress:!0,locale:"us",onReady:function(){d("billing-form",t.merchant_id,t.production).then(l)},onPaymentMethodReceived:function(t){r.resolve(t)},onUnsupported:function(t){c()}})}))}),(function(t){r.resolve(t),c(t.message)}))):d("billing-form").then(l),r.promise},showPayPalNewModal:function(c){r=new o;return null===i.byId("paypal-hidden")?(n.place('<div id="paypal-hidden" style="display:none"></div>',a.body()),t(e.toUrl("/account/generate-braintree-token"),{handleAs:"json"}).then((function(t){s(["https://js.braintreegateway.com/v2/braintree.js"],(function(e){e.setup(t.token,"paypal",{container:"paypal-hidden",singleUse:!1,displayName:"Mailchimp",enableBillingAddress:!0,locale:"us",onReady:function(){d("billing-form",t.merchant_id,t.production).then(l())},onPaymentMethodReceived:function(t){r.resolve(t)},onUnsupported:function(){c()}})}))}),(function(t){r.resolve(t),c(t.message)}))):d("billing-form").then(l()),r.promise}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(0),n(1),n(5),n(244),n(61),n(152),n(32),n(63),n(10),n(3),n(30),n(55),n(452),n(14),n(241),n(210),n(285),n(566),n(83),n(569),n(427),n(570),n(40)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k){t.experimental("dojox.widget.ColorPicker");return e("dojox.widget.ColorPicker",f,{showRgb:!0,showHsv:!0,showHex:!0,webSafe:!0,animatePoint:!0,slideDuration:250,liveUpdate:!1,PICKER_HUE_H:150,PICKER_SAT_VAL_H:150,PICKER_SAT_VAL_W:150,PICKER_HUE_SELECTOR_H:8,PICKER_SAT_SELECTOR_H:10,PICKER_SAT_SELECTOR_W:10,value:"#ffffff",_underlay:k.toUrl("dojox/widget/ColorPicker/images/underlay.png"),_hueUnderlay:k.toUrl("dojox/widget/ColorPicker/images/hue.png"),_pickerPointer:k.toUrl("dojox/widget/ColorPicker/images/pickerPointer.png"),_huePickerPointer:k.toUrl("dojox/widget/ColorPicker/images/hueHandle.png"),_huePickerPointerAlly:k.toUrl("dojox/widget/ColorPicker/images/hueHandleA11y.png"),templateString:C,postMixInProperties:function(){c.contains(r.body(),"dijit_a11y")&&(this._huePickerPointer=this._huePickerPointerAlly),this._uId=m.getUniqueId(this.id),n.mixin(this,y.getLocalization("dojox.widget","ColorPicker")),n.mixin(this,y.getLocalization("dojo.cldr","number")),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),s("ie")<7&&(this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this._underlay+"', sizingMethod='scale')",this.colorUnderlay.src=this._blankGif.toString()),this.showRgb||(this.rgbNode.style.visibility="hidden"),this.showHsv||(this.hsvNode.style.visibility="hidden"),this.showHex||(this.hexNode.style.visibility="hidden"),this.webSafe||(this.safePreviewNode.style.visibility="hidden")},startup:function(){this._started||(this._started=!0,this.set("value",this.value),this._mover=new p.boxConstrainedMoveable(this.cursorNode,{box:{t:-this.PICKER_SAT_SELECTOR_H/2,l:-this.PICKER_SAT_SELECTOR_W/2,w:this.PICKER_SAT_VAL_W,h:this.PICKER_SAT_VAL_H}}),this._hueMover=new p.boxConstrainedMoveable(this.hueCursorNode,{box:{t:-this.PICKER_HUE_SELECTOR_H/2,l:0,w:0,h:this.PICKER_HUE_H}}),this._subs=[],this._subs.push(o.subscribe("/dnd/move/stop",n.hitch(this,"_clearTimer"))),this._subs.push(o.subscribe("/dnd/move/start",n.hitch(this,"_setTimer"))),this._keyListeners=[],this._connects.push(v.addKeyListener(this.hueCursorNode,{charOrCode:u.UP_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,n.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(v.addKeyListener(this.hueCursorNode,{charOrCode:u.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,n.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(v.addKeyListener(this.cursorNode,{charOrCode:u.UP_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,n.hitch(this,this._updateCursorNode),25,25)),this._connects.push(v.addKeyListener(this.cursorNode,{charOrCode:u.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,n.hitch(this,this._updateCursorNode),25,25)),this._connects.push(v.addKeyListener(this.cursorNode,{charOrCode:u.LEFT_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,n.hitch(this,this._updateCursorNode),25,25)),this._connects.push(v.addKeyListener(this.cursorNode,{charOrCode:u.RIGHT_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,n.hitch(this,this._updateCursorNode),25,25)))},_setValueAttr:function(t,e){this._started&&this.setColor(t,e)},setColor:function(t,e){t=b.fromString(t),this._updatePickerLocations(t),this._updateColorInputs(t),this._updateValue(t,e)},_setTimer:function(t){t.node!=this.cursorNode&&t.node!=this.hueCursorNode||(g.focus(t.node),d.setSelectable(this.domNode,!1),this._timer=setInterval(n.hitch(this,"_updateColor"),45))},_clearTimer:function(t){this._timer&&(clearInterval(this._timer),this._timer=null,this.onChange(this.value),d.setSelectable(this.domNode,!0))},_setHue:function(t){a.style(this.colorUnderlay,"backgroundColor",b.fromHsv(t,100,100).toHex())},_updateHueCursorNode:function(t,e,n){if(-1!==t){var i=a.style(this.hueCursorNode,"top"),o=this.PICKER_HUE_SELECTOR_H/2;i+=o;var s=!1;n.charOrCode==u.UP_ARROW?i>0&&(i-=1,s=!0):n.charOrCode==u.DOWN_ARROW&&i<this.PICKER_HUE_H&&(i+=1,s=!0),i-=o,s&&a.style(this.hueCursorNode,"top",i+"px")}else this._updateColor(!0)},_updateCursorNode:function(t,e,n){var i=this.PICKER_SAT_SELECTOR_H/2,o=this.PICKER_SAT_SELECTOR_W/2;if(-1!==t){var s=a.style(this.cursorNode,"top"),r=a.style(this.cursorNode,"left");s+=i,r+=o;var l=!1;n.charOrCode==u.UP_ARROW?s>0&&(s-=1,l=!0):n.charOrCode==u.DOWN_ARROW?s<this.PICKER_SAT_VAL_H&&(s+=1,l=!0):n.charOrCode==u.LEFT_ARROW?r>0&&(r-=1,l=!0):n.charOrCode==u.RIGHT_ARROW&&r<this.PICKER_SAT_VAL_W&&(r+=1,l=!0),l&&(s-=i,r-=o,a.style(this.cursorNode,"top",s+"px"),a.style(this.cursorNode,"left",r+"px"))}else this._updateColor(!0)},_updateColor:function(t){var e=this.PICKER_HUE_SELECTOR_H/2,n=this.PICKER_SAT_SELECTOR_H/2,i=this.PICKER_SAT_SELECTOR_W/2,o=a.style(this.hueCursorNode,"top")+e,s=a.style(this.cursorNode,"top")+n,r=a.style(this.cursorNode,"left")+i,l=Math.round(360-o/this.PICKER_HUE_H*360),d=b.fromHsv(l,r/this.PICKER_SAT_VAL_W*100,100-s/this.PICKER_SAT_VAL_H*100);this._updateColorInputs(d),this._updateValue(d,t),l!=this._hue&&this._setHue(l)},_colorInputChange:function(t){var e,n=!1;switch(t.target){case this.hexCode:e=b.fromString(t.target.value),n=!0;break;case this.Rval:case this.Gval:case this.Bval:e=b.fromArray([this.Rval.value,this.Gval.value,this.Bval.value]),n=!0;break;case this.Hval:case this.Sval:case this.Vval:e=b.fromHsv(this.Hval.value,this.Sval.value,this.Vval.value),n=!0}n&&(this._updatePickerLocations(e),this._updateColorInputs(e),this._updateValue(e,!0))},_updateValue:function(t,e){var n=t.toHex();this.value=this.valueNode.value=n,!e||this._timer&&!this.liveUpdate||this.onChange(n)},_updatePickerLocations:function(t){var e=this.PICKER_HUE_SELECTOR_H/2,n=this.PICKER_SAT_SELECTOR_H/2,i=this.PICKER_SAT_SELECTOR_W/2,o=t.toHsv(),s=Math.round(this.PICKER_HUE_H-o.h/360*this.PICKER_HUE_H)-e,r=Math.round(o.s/100*this.PICKER_SAT_VAL_W)-i,l=Math.round(this.PICKER_SAT_VAL_H-o.v/100*this.PICKER_SAT_VAL_H)-n;this.animatePoint?(h.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:s,left:0}).play(),h.slideTo({node:this.cursorNode,duration:this.slideDuration,top:l,left:r}).play()):(a.style(this.hueCursorNode,"top",s+"px"),a.style(this.cursorNode,{left:r+"px",top:l+"px"})),o.h!=this._hue&&this._setHue(o.h)},_updateColorInputs:function(t){var e=t.toHex();if(this.showRgb&&(this.Rval.value=t.r,this.Gval.value=t.g,this.Bval.value=t.b),this.showHsv){var n=t.toHsv();this.Hval.value=Math.round(n.h),this.Sval.value=Math.round(n.s),this.Vval.value=Math.round(n.v)}this.showHex&&(this.hexCode.value=e),this.previewNode.style.backgroundColor=e,this.webSafe&&(this.safePreviewNode.style.backgroundColor=e)},_setHuePoint:function(t){var e=this.PICKER_HUE_SELECTOR_H/2,i=t.layerY-e;this.animatePoint?h.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:i,left:0,onEnd:n.hitch(this,(function(){this._updateColor(!1),g.focus(this.hueCursorNode)}))}).play():(a.style(this.hueCursorNode,"top",i+"px"),this._updateColor(!1))},_setPoint:function(t){var e=this.PICKER_SAT_SELECTOR_H/2,i=this.PICKER_SAT_SELECTOR_W/2,o=t.layerY-e,s=t.layerX-i;t&&g.focus(t.target),this.animatePoint?h.slideTo({node:this.cursorNode,duration:this.slideDuration,top:o,left:s,onEnd:n.hitch(this,(function(){this._updateColor(!0),g.focus(this.cursorNode)}))}).play():(a.style(this.cursorNode,{left:s+"px",top:o+"px"}),this._updateColor(!1))},_handleKey:function(t){},focus:function(){this.focused||g.focus(this.focusNode)},_stopDrag:function(t){l.stop(t)},destroy:function(){this.inherited(arguments),i.forEach(this._subs,(function(t){o.unsubscribe(t)})),delete this._subs}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(27),n(9),n(119),n(289),n(279)],void 0===(a=function(t,e,n,i,a,o){var s=t("dojo.dnd.move.constrainedMoveable",o,{constraints:function(){},within:!1,constructor:function(t,e){e||(e={}),this.constraints=e.constraints,this.within=e.within},onFirstMove:function(t){var n=this.constraintBox=this.constraints.call(this,t);if(n.r=n.l+n.w,n.b=n.t+n.h,this.within){var i=e.getMarginSize(t.node);n.r-=i.w,n.b-=i.h}},onMove:function(t,e){var n=this.constraintBox,i=t.node.style;this.onMoving(t,e),e.l=e.l<n.l?n.l:n.r<e.l?n.r:e.l,e.t=e.t<n.t?n.t:n.b<e.t?n.b:e.t,i.left=e.l+"px",i.top=e.t+"px",this.onMoved(t,e)}});return{constrainedMoveable:s,boxConstrainedMoveable:t("dojo.dnd.move.boxConstrainedMoveable",s,{box:{},constructor:function(t,e){var n=e&&e.box;this.constraints=function(){return n}}}),parentConstrainedMoveable:t("dojo.dnd.move.parentConstrainedMoveable",s,{area:"content",constructor:function(t,i){var a=i&&i.area;this.constraints=function(){var t=this.node.parentNode,i=n.getComputedStyle(t),o=e.getMarginBox(t,i);if("margin"==a)return o;var s=e.getMarginExtents(t,i);return o.l+=s.l,o.t+=s.t,o.w-=s.w,o.h-=s.h,"border"==a?o:(s=e.getBorderExtents(t,i),o.l+=s.l,o.t+=s.t,o.w-=s.w,o.h-=s.h,"padding"==a||(s=e.getPadExtents(t,i),o.l+=s.l,o.t+=s.t,o.w-=s.w,o.h-=s.h),o)}}})}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(572),n(227),n(260),n(50)],void 0===(a=function(t,e,n,i){return function(a,o){return(i(a)?t:e)(a,n(o))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(227)],void 0===(a=function(t){return function(e,n){var i=[];return t(e,(function(t,e,a){n(t,e,a)&&i.push(t)})),i}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(17),n(16)],void 0===(a=function(t,e,n,i){return t("Ada",null,{constructor:function(){},containsAda:function(){return window.top.hasOwnProperty("adaEmbed")},adaLoaded:function(){return!!window.top.document.getElementById("ada-button-frame")},createMetaFields:function(t){var e={};return window._mc.user_info&&(e=window._mc.user_info),Object.assign({},e,t)},loadAda:function(t){var e="mailchimp";n.flagIsOn(i.CED_ADA_SANDBOX)&&(e="demo-sandbox-mailchimp"),window.top.adaEmbed.start({handle:e,adaReadyCallback:function(){null!==window.top.document.getElementById("ada-button-frame")&&(window.top.document.getElementById("ada-button-frame").hidden=!0),window.top.adaEmbed.toggle(),window.top.adaObj=t},toggleCallback:function(t){window.top.QSI&&window.top.QSI.API&&t?window.top.QSI.API.unload():window.top.QSI&&window.top.QSI.API&&window.top.QSI.API.load().done(window.top.QSI.API.run),null!==window.top.document.getElementById("ada-chat-frame")&&(window.top.document.getElementById("ada-chat-frame").hidden=!t)},metaFields:t})},updateWorkflow:function(t){var e=t.workflow,n=t.referral,i=null,a=null;(window.top.adaObj&&window.top.adaObj.workflow||""===window.top.adaObj.workflow)&&(i=window.top.adaObj.workflow),window.top.adaObj&&window.top.adaObj.referral&&(a=window.top.adaObj.referral),e!==i||n!==a?window.top.adaEmbed.reset({metaFields:t}).then((function(){window.top.adaObj=t,window.top.adaEmbed.toggle()})):window.top.adaEmbed.toggle()},adaClicked:function(t){if(this.containsAda()){var e=this.createMetaFields(t);if(this.adaLoaded()){var n=this.updateWorkflow;window.top.adaEmbed.getInfo().then((function(t){t.isDrawerOpen||n(e)})).catch((function(t){throw t}))}else this.loadAda(e)}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(147)],void 0===(a=function(t,e,n){return t([e],{setTime:function(t){this.time=t,n.selectAll(".clock").remove(),this.render()},render:function(){var t,e,i,a,o,s,r,l=this.time.split(":"),d=[{unit:"minutes",value:l[1]},{unit:"hours",value:l[0]}],c=this.width||36,u=this.height||36,h=this.strokewidth||2,p=this.cfill||"none",m=this.cborder||"#FEBE12",g=this.chand||"#FEBE12",f=this.ccolor||"#FEBE12",v=this.transition,b=c/2,y=n.scale.linear().domain([0,59+59/60]).range([0,2*Math.PI]),w=n.scale.linear().domain([0,11+59/60]).range([0,2*Math.PI]),_=n.scale.linear().domain([0,59+59/60]).range([0,Math.PI/6]);return(t=n.select(this.domNode).append("svg:svg").attr("class","clock").attr("width",c).attr("height",u).append("svg:g").attr("transform","translate("+b+","+b+")")).append("svg:circle").attr("class","clockface").attr("r",b-h).attr("fill",p).attr("stroke",m).attr("stroke-width",h),i=n.svg.arc().innerRadius(0).outerRadius(2/3*b).startAngle(0).endAngle(0),a=n.svg.arc().innerRadius(0).outerRadius(2/3*b).startAngle((function(t){return y(+t.value)})).endAngle((function(t){return y(+t.value)})),e=n.svg.arc().innerRadius(0).outerRadius(.5*b).startAngle(0).endAngle(0),o=n.svg.arc().innerRadius(0).outerRadius(.5*b).startAngle((function(t){return w(+t.value%12)+_(r)})).endAngle((function(t){return w(+t.value%12)+_(r)})),s=t.selectAll(".clockhand").data(d).enter().append("svg:path").attr("class","clockhand").attr("stroke",g).attr("stroke-width",h).attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("fill","none"),v?s.attr("d",(function(t){return"minutes"===t.unit?(r=+t.value,i()):"hours"===t.unit?e():void 0})).transition().delay(333).duration(666).attrTween("transform",(function(t,e,i){if("minutes"===t.unit)return n.interpolate("rotate(0)","rotate("+y(+t.value)*(180/Math.PI)+")");if("hours"===t.unit)return n.interpolate("rotate(0)","rotate("+(w(+t.value%12)+_(r))*(180/Math.PI)+")")})):s.attr("d",(function(t){return"minutes"===t.unit?(r=+t.value,a(t)):"hours"===t.unit?o(t):void 0})),t.append("svg:circle").attr("class","centerdot").attr("r",1.5).attr("fill","#fff").attr("stroke",f).attr("stroke-width",h)},postCreate:function(){this.render()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(24),n(1242)],void 0===(a=function(t,e,n){return t([e],{templateString:n,img:{path:"/images/brand_assets/illos/art-other-automate.png",alt:"Illustration of flower"},body:{title:"Restart Your Automated Email Series",copy:"Now that you've upgraded, you can review and resume your automated email series that were previously paused."},hasDismissLink:!0,dismissConfig:{onDismissPressCallback:null,innerText:"Maybe later"},ctaText:"",dismissText:null,toggleCtaLoadingState:function(){this._isButtonDisabled()?(this.ctaButton.classList.remove("button-loading"),this.ctaButton.removeAttribute("disabled")):(this.ctaButton.classList.add("button-loading"),this.ctaButton.setAttribute("disabled","disabled"))},_isButtonDisabled:function(){return this.ctaButton.classList.contains("button-loading")&&"disabled"===this.ctaButton.getAttribute("disabled")},onCtaButtonPress:function(){},onDismissBtnPress:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(1250),n(2),n(1),n(7),n(19),n(3),n(60),n(6),n(30)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return t([e,n],{templateString:i,placeholder:"Search",wait:250,searchTopic:null,onChange:function(t){},onFocus:function(t){},onBlur:function(t){},onKeyDown:function(t){},postCreate:function(){var t=this;this.own(a(this.filteredInput,"focus",o.hitch(this,(function(t){this.onFocus(t)}))),a(this.filteredInput,"blur",o.hitch(this,(function(t){this.onBlur(t)}))),a(this.filteredInput,"keydown",o.hitch(this,(function(t){this.onKeyDown(t)}))),a(this.filteredInput,"keyup",d((function(e){switch(e.charCode||e.keyCode){case u.ESCAPE:t._clearSearch();break;case u.TAB:case u.DOWN_ARROW:case u.UP_ARROW:break;case u.ENTER:if(0===this.value.length)break;default:if(0===this.value.length){t._clearSearch();break}r.publish("search/"+t.searchTopic,this.value),l.remove(t.filteredClear,"hide"),t.onChange(this.value)}}),this.wait)),a(this.filteredClear,"click",(function(e){t._clearSearch(),e.preventDefault()})))},setValue:function(t){this.filteredInput.value=t||"",l.toggle(this.filteredClear,"hide",!t)},getValue:function(){return this.filteredInput.value},onClear:function(){},_clearSearch:function(){l.add(this.filteredClear,"hide"),this.filteredInput.value="",this.onClear()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){return t(null,{essentialCategory:"essential",performanceCategory:"performance",analyticsCategory:"analytics",advertisingCategory:"advertising",activeGroups:[],constructor:function(){void 0!==window.top.OneTrust&&(this.OneTrust=window.top.OneTrust),void 0!==window.top.OnetrustActiveGroups&&(this.activeGroups=window.top.OnetrustActiveGroups),this.cookieCategories={1:this.essentialCategory,2:this.performanceCategory,3:this.analyticsCategory,4:this.advertisingCategory},this.parsePreferences()},parsePreferences:function(){var t=this;return this.allowedCategories=[],this.allowedCategoryIDs=this.activeGroups.split(","),this.allowedCategoryIDs.shift(),this.allowedCategoryIDs.pop(),this.allowedCategoryIDs.forEach((function(e){t.allowedCategories.push(t.cookieCategories[e])})),this.allowedCategories},setCookie:function(t,e,n,i,a,o){if(this.isCategoryAllowed(t)){var s=encodeURIComponent(e)+"="+encodeURIComponent(n);return"string"==typeof a&&(s+=";path="+a),void 0!==i&&"function"==typeof i.getMonth&&(s+=";expires="+i),"string"==typeof o&&(s+=";domain="+o),document.cookie=s,!0}return!1},isCategoryAllowed:function(t){return this.allowedCategories.includes(t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(212),n(1279)],void 0===(a=function(t,e,n){return t([e],{templateString:n,label:"",message:""})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(31),n(2),n(4),n(3),n(25),n(39),n(41),n(212),n(38),n(8),n(589),n(1295),n(460),n(105)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){var f=t([l,g],{_fillContent:function(){this.inherited(arguments),o.add(this.dropDown.domNode,"dijitSelectWithOptionGroup")},_getMenuItemForOption:function(t){return t.optGroup?new m({label:t.optGroupLabel,message:t.message}):this.inherited(arguments)}}),v=t([s,r],{templateString:p,firstOption:null,nameAttribute:"segment_id",sourceFunction:null,sourceUrl:"/lists/segments/saved",createOption:!1,createSegmentOptionText:"Create a new segment",options:[],labels:{advanced:"Advanced Segments",saved_pro:"Advanced Segments",saved:"Segments",static:"Tags",pasted:"Pasted",fuzzy:"Fuzzy",prebuilt:"Pre-built Segments",contacts:"Contacts","contact-status":"Contacts","subscriber-engagement":"Subscriber Engagement","customer-behavior":"Customer Behavior","subscriber-profile":"Demographics"},load:function(t){var e=this._update.bind(this,t);this.sourceFunction?this.sourceFunction(t).then(e):h.getSegmentGroups(t,this.sourceUrl).then(e)},_getGroupLabel:function(t){return this.labels[t]||t},_update:function(t,e){this.options=[],this.firstOption&&this.options.push({value:v.OPTION_ENTIRE_LIST,label:this.firstOption}),this.createOption&&this.options.push({value:v.OPTION_CUSTOM_SEGMENT,label:this.createSegmentOptionText,selected:this.selected===v.OPTION_CUSTOM_SEGMENT});var n=!1;e.forEach(function(t){(t.segments.length>0||"static"===t.type)&&(n=!0,this.options.push({value:"",label:"",message:"static"===t.type&&0===t.segments.length?"Use tags to label your customers and organize your list.":"",selected:!1,optGroup:!0,optGroupLabel:this._getGroupLabel(t.type)}),t.segments.forEach(function(e){var n=c.encode(e.name),i=t.type+":"+e.segmentId;this.options.push({value:i,label:n,selected:this.selected===i})}.bind(this)))}.bind(this)),this.selected||this.firstOption||(this.options[1].selected=!0),this.segmentSelect.set("options",this.options),this.segmentSelect.startup(),n?(o.remove(this.segmentSelectContainer,"hide"),o.add(this.noSegments,"hide")):(this.createSegment.href=u.toUrl("/lists/members",{id:t,open_segment:1}),o.remove(this.noSegments,"hide"),o.add(this.segmentSelectContainer,"hide"))},postCreate:function(){this.listId&&(this.segmentSelect=new f({options:this.options,name:"segment_id",id:this.id+"_segmentSelect",maxHeight:-1,disabled:!!this.disabled,class:"select-small !margin-bottom--lv0 full-width"}).placeAt(this.segmentSelectContainer),this.load(this.listId),i(this.segmentSelect,"change",e.hitch(this,(function(t){if(this.onChange)return this.onChange(t)}))))}});return v.OPTION_CUSTOM_SEGMENT="_CUSTOM_",v.OPTION_ENTIRE_LIST="",v}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(22)],void 0===(a=function(t,e){var n=t(null,{constructor:function(t,i){this._pollableFunc=t,this._delayStrategy=i||n.EXPONENTIAL_BACKOFF_DELAY_STRATEGY,this._previousAttempts=0,this._pollable_promise=null,this._timeout_id=null,this._deferred=new e(this._handleCancel.bind(this))},getPromise:function(){return this._deferred.promise},begin:function(){0===this._previousAttempts&&this._makeAttempt()},_makeAttempt:function(){this._previousAttempts++,this._pollable_promise=this._pollableFunc(),this._pollable_promise.then(this._handlePollableSuccess.bind(this),this._handlePollableError.bind(this))},_handlePollableSuccess:function(t){if(t===n.RETRY){var e=this._delayStrategy(this._previousAttempts);this._timeout_id=setTimeout(this._makeAttempt.bind(this),e)}else this._deferred.resolve(t)},_handlePollableError:function(t){this._deferred.reject(t)},_handleCancel:function(){this._timeout_id&&clearTimeout(this._timeout_id),this._pollable_promise&&this._pollable_promise.cancel()}});return n.EXPONENTIAL_BACKOFF_DELAY_STRATEGY=function(t){return 1e3*Math.pow(1.15,t)},n.RETRY="retry",n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(256),n(1300),n(2),n(7),n(1),n(4),n(8),n(464),n(465),n(467),n(709),n(543)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){var g=null,f=t([e,n,i],{overlayClass:"subscriber-table-overlay",templateString:a,showPagination:!0,persistTableSettings:!0,postMixInProperties:function(){g||(g=this)},postCreate:function(){o(this.closeButton,"click",r.hitch(this,(function(t){window.history.back()}))),o(window,"popstate",r.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.hide()})))},load:function(t,e,n,i){window.history.pushState(null,null,window.location.pathname+window.location.search+"#overlay"),r.mixin(this,n);var a={list_id:t,type:i,ast:JSON.stringify(e)};this._createMemberTable(t,d.toUrl("/pro/segments/popup-data"),a,{sortable:!1}),this.show()},loadRegular:function(t,e,n){window.history.pushState(null,null,window.location.pathname+window.location.search+"#overlay"),r.mixin(this,n);var i={id:e,lid:t};this._createMemberTable(t,d.toUrl("/campaigns/segments/popup-data"),i,{sortable:!1}),this._loadDescription(i),this.show()},_createMemberTable:function(t,e,n,i){c.getSubscribersVisGridQuery(t).then(r.hitch(this,(function(t){this.membersTable=new u({query:new h(e,t,n),pageSize:100,options:i,showPagination:this.showPagination,persistTableSettings:this.persistTableSettings}),this.membersTable.placeAt(this.memberGridContainer)})))},_loadDescription:function(t){c.getSubcribersDescriptionQuery(t).then(r.hitch(this,(function(t){this._setMemberDescription(t)})))},_setMemberDescription:function(t){this.memberDescriptionContainer.innerHTML=t},onShow:function(){},onHide:function(){this.membersTable.destroy(),this._setMemberDescription("")}});return{main:function(){return g||(g=new f).placeAt(document.body),g}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(22),n(31),n(8)],void 0===(a=function(t,e,n){var i={};return{getConfig:function(t,a){var o=t+":"+a,s=i[o];if(!s||s.isRejected()){var r=e.get(n.toUrl("/lists/segments/config"),{handleAs:"json",query:{id:t,type:a}});i[o]=r}return i[o]},getSubscribersVisGridQuery:function(t){return e.get(n.toUrl("/lists/segments/get-subscribers-vis-grid-query"),{handleAs:"json",query:{id:t}})},getSubcribersDescriptionQuery:function(t){return e.get(n.toUrl("/campaigns/segments/popup-description"),{handleAs:"html",query:t})},getProductListFromTerm:function(t,i){return e.get(n.toUrl("/ecommerce/products-search-by-list"),{handleAs:"json",query:{list_id:t,term:i,encode_title:"N",log_search:"Y"}})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(32),n(49),n(10),n(4),n(3),n(7),n(28),n(2),n(96),n(466),n(763),n(37),n(764),n(593),n(579),n(118),n(38),n(6),n(19),n(27),n(9),n(14),n(15),n(230),n(33),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T){return t([g,v],{templateString:p,canSelectAll:!0,dateRows:0,constructor:function(){this._syncs=[],this._queries={}},postMixInProperties:function(){this.queryFilters&&this.selectedQueryFilter&&(this.query.query=this.queryFilters[this.selectedQueryFilter]),this._queries.regular=this.query,this.segmentQuery&&(this._queries.segment=this.segmentQuery),this._toggleQuery(),this.inherited(arguments)},postCreate:function(){this.dataRows=0,this.inherited(arguments),this.watch("selectedQueryFilter",n.hitch(this,(function(){this._updateActiveValue(),this.query.query=this.queryFilters[this.selectedQueryFilter],this.set("page",1),this.requery()}))),this._updateActiveValue(),this.watch("segment",n.hitch(this,(function(){var t=this.segment;t&&"started"==t.status?this.showLoader():(this._toggleQuery(),this.requery())}))),this.instantiateFloatingHeader(),this.loader=new I({color:"#6dc5dc",bgColor:"#d0d0d0"}),this.loader.startup(),this.loader.placeAt(this.loaderDom)},requery:function(){this.queryFilters&&this.selectedQueryFilter&&(this.query.query=this.queryFilters[this.selectedQueryFilter]),this.refresh(!0)},refresh:function(t,e){var i=this;return!this.refreshing&&(this.refreshing=!0,i.showLoader(),this.query.getCount().then(n.hitch(this,(function(e){this.set("total",e),this.total?(this._toggleNoData(!1),this._getData(t).then((function(){i.refreshing=!1,i.hideLoader();var t=C.docScroll().y;x.getAppScrollContainer();t>i.topPosition&&w(".table-pagination")[0].scrollIntoView()}))):(this.refreshing=!1,this._toggleNoData(!0),_.publish("mojo/analytics/"+i.id+"/ready"))}))))},showLoader:function(){r.add(this.subscriberTableOverlay,"loading")},hideLoader:function(){r.remove(this.subscriberTableOverlay,"loading")},getActiveValue:function(){var t;switch(this.selectedQueryFilter){case"bounced":t="B";break;case"unsub":t="N";break;default:t="Y"}return t},clearSelectionModel:function(t){for(var e in this.selected)this.selected.hasOwnProperty(e)&&(!this._validValue(e)||!t&&this._valueSelected(e)||(this.selected.set(e,!1),delete this.selected[e]))},_updateActiveValue:function(){for(var t in this._queries)this._queries.hasOwnProperty(t)&&(this._queries[t].urlParams.active=this.getActiveValue())},_toggleQuery:function(){this.segment?(this.query=this._queries.segment,this.set("canSelectAll",!1)):(this.query=this._queries.regular,this.set("canSelectAll",!0))},_toggleNoData:function(t){var e;e=this.options.noMembersMsg&&!this.segment&&"active"==this.selectedQueryFilter?this.options.noMembersMsg:this.noDataMsg,t?(r.add(this.dataTable,"hide"),r.remove(this.noData,"hide"),s.place("<div>"+e+"</div>",this.noData,"only")):(r.remove(this.dataTable,"hide"),r.add(this.noData,"hide"))},_getData:function(t){var i=this;return this.persistSettings(),i._removeState(t),this.query.getData(this.page,this.pageSize).then((function(a){if(i.dataRows=a.rows.length,0===i.dataRows)return i.set("total",i.dataRows),i._toggleNoData(!0),void r.add("hide",w(".subscriber-table-wrap")[0]);i.store=new h(new u({data:a.rows})),_.publish("mojo/analytics/"+i.id+"/ready"),s.empty(i.accessibleTableHeader),s.empty(i.accessibleTable);var o=[],d=s.create("tr");e.forEach(a.headers,(function(t){var e;switch(t.id){case"bulk_check":e=s.create("td",{class:"col-head row-head row-select",role:"columnheader",innerHTML:t.label},d),i.dataRows>5&&s.create("div",{class:"vis-row-selector"},e);break;case"email_link":case"view_activity_link":e=s.create("td",{class:"col-head row-head",role:"columnheader",innerHTML:t.label},d);break;case"list_email_id":break;default:e=s.create("td",{class:"col-head",role:"columnheader",innerHTML:t.label},d)}i._fieldIsSortableCheck(t.id)&&(l.set(e,"data-mojo-table-sort",t.id),r.add(e,"sortable"),i.sortAttr===t.id&&i.addSortClass(e))})),"bulk_check"!==a.headers[0].id?(r.add(i.accessibleTableHeader,"no-checkbox"),r.add(i.accessibleTable,"no-checkbox"),this.noCheckbox=!0):(r.remove(i.accessibleTableHeader,"no-checkbox"),r.remove(i.accessibleTable,"no-checkbox"),this.noCheckbox=!1),1===a.headers.length&&(r.add(i.accessibleTableHeader,"email-only"),r.add(i.accessibleTable,"email-only")),e.forEach(a.rows,(function(t){var n,r,l,d=s.create("tr");r=0;var c=/^interests/;for(n in t)if(t.hasOwnProperty(n))switch(n){case"email_link":case"view_activity_link":l=s.create("td",{class:"row-head",title:"View Profile"}),emailDiv=s.create("div",{class:"profile-view",innerHTML:t[n]},l),s.place(emailDiv,l),s.place(l,d),r++;break;case"bulk_check":var u=s.toDom(t.email_link);s.create("td",{class:"row-head profile-select",innerHTML:t[n],title:"Email address: "+u.innerHTML},d),r++;break;case"rating":s.create("td",{innerHTML:t[n],title:"Member Rating"},d),r++;break;default:if(e.indexOf(i.options.blacklist,n)<0)if("string"==typeof t[n]&&-1!=t[n].indexOf("<br")){var h=s.create("td",{title:a.headers[r].label},d);s.create("div",{class:"address",innerHTML:t[n]},h)}else n.match(c)?s.create("td",{innerHTML:y.encode(t[n]),title:a.headers[r].label},d):s.create("td",{innerHTML:t[n],title:a.headers[r].label},d);r++}o.push(d)})),i.dataRows>5?(s.place(d,i.accessibleTableHeader),r.remove(w(".fixed-header")[0],"hide"),r.remove(w(".table-body")[0],"few-rows")):(s.place(d,i.accessibleTable),r.add(w(".fixed-header")[0],"hide"),r.add(w(".table-body")[0],"few-rows")),e.forEach(o,(function(t){s.place(t,i.accessibleTable)})),m.parse(i.accessibleTable),i.resize(),i.rowSelector&&i.rowSelector.destroyRecursive(),i.rowSelector=new f({target:i,canSelectAll:i.canSelectAll},w(".vis-row-selector",i.accessibleTableHeader)[0]),i.rowSelector=new f({target:i,canSelectAll:i.canSelectAll},w(".vis-row-selector",i.accessibleTable)[0]),w(".selectCheckBox",this.domNode).forEach(n.hitch(this,(function(e){var n=S.byNode(e);t||1!=i.selected[n.value]&&1!=i.allAll?i.selected[n.value]=!1:(n.set("checked",!0),i.selected[n.value]=!0),i._syncs.push(b(i.selected,n.value,n,"checked"))})))}))},setTopPosition:function(){var t=x.getTabletNaviHeight();window.innerWidth<=1024?this.topPosition=C.position(w(".st")[0],!0).y-t:this.topPosition=C.position(w(".st")[0],!0).y},resize:function(){if(this.dataRows>5){var t=w("td",w(".table-header tr")[0]),n=w("td",w(".table-contents tr")[0]),i=t.map((function(t){return t.clientWidth})),a=(i.reduce((function(t,e){return t+e})),n.map((function(t){return t.clientWidth})));a.reduce((function(t,e){return t+e}));e.forEach(t,(function(t,e){var n=Math.max(a[e],i[e]);t.style.width=n+"px",t.style.minWidth=n+"px"})),e.forEach(n,(function(e,o){var s=Math.max(i[o],a[o]);if(e.style.width=s+"px",e.style.minWidth=s+"px",o===n.length-1){var r=w(".table-body")[0],l=w(".table-contents")[0];r.clientWidth-l.clientWidth-s>s?(e.style.width="100%",t[o].style.width="100%"):e.style.width=s+"px"}}))}else{n=w("td",w(".table-contents tr")[0]);var o=w(".table-body")[0],s=w(".table-contents")[0],r=n[n.length-1];o.clientWidth-s.clientWidth-r.clientWidth>0&&(r.style.width="100%")}},instantiateSort:function(){var t=this;c(t.domNode,".sortable:click",(function(){if(!t.refreshing){var e=t.sortAttr;t.sortAttr=l.get(this,"data-mojo-table-sort"),t._fieldIsSortableCheck(t.sortAttr)&&(t.sortOrder=e!=t.sortAttr||!t.sortOrder,t.performSort(t.sortAttr,t.sortOrder),t.addSortClass(this))}}))},instantiateFloatingHeader:function(){var t=this,e=0;c(window,"resize",(function(){var t=w("td",w(".table-header tr")[0]),n=w("td",w(".table-contents tr")[0]),i=w(".table-body")[0],a=w(".table-contents")[0];n[n.length-1].style.width=0,t[t.length-1].style.width=0;var o=Math.max(t[t.length-1].clientWidth,n[n.length-1].clientWidth);e=i.clientWidth-a.clientWidth-o,T("chrome")&&(e-=6),e>o?(t[t.length-1].style.width=e+"px",n[n.length-1].style.width=e+"px"):(t[t.length-1].style.width=o+"px",n[n.length-1].style.width=o+"px")})),t.scrollCache=0,c(t.accessibleTableBody,"scroll",(function(){this.scrollLeft!==t.scrollCache&&(t.accessibleTableHeaderBody.scrollLeft=this.scrollLeft,t.scrollCache=this.scrollLeft)})),t.accessibleTableHeaderBody&&c(t.accessibleTableHeaderBody,"scroll",(function(){this.scrollLeft!==t.scrollCache&&(t.accessibleTableBody.scrollLeft=this.scrollLeft,t.scrollCache=this.scrollLeft)}))},_fieldIsSortableCheck:function(t){return e.indexOf(this.query.query.sortable,t)>=0||e.indexOf(this.options.sortable,t)>=0},_removeState:function(t){e.forEach(this._syncs,"item.remove();"),this._syncs=[],this.clearSelectionModel(t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(1),n(46),n(5)],void 0===(a=function(t,e,n,i){var a=function(t){var a=[],o=0;(t=e.delegate(t)).notify=function(t,e){o++;for(var n=a.slice(),i=0,s=n.length;i<s;i++)n[i](t,e)};var s,r=t.query;function l(e,i){var a=t[e];a&&(t[e]=function(o){var r;if("put"===e&&(r=t.getIdentity(o)),s)return a.apply(this,arguments);s=!0;try{var l=a.apply(this,arguments);return n(l,(function(t){i("object"==typeof t&&t||o,r)})),l}finally{s=!1}})}return t.query=function(s,l){l=l||{};var d=r.apply(this,arguments);if(d&&d.forEach){var c=e.mixin({},l);delete c.start,delete c.count;var u,h=t.queryEngine&&t.queryEngine(s,c),p=o,m=[];d.observe=function(e,s){1==m.push(e)&&a.push(u=function(e,a){n(d,(function(n){var r,d,c,u=n.length!=l.count;if(++p!=o)throw new Error("Query is out of date, you must observe() the query prior to any data modifications");var g,f=-1,v=-1;if(void 0!==a)for(r=0,d=n.length;r<d;r++){var b=n[r];if(t.getIdentity(b)==a){g=b,f=r,!h&&e||n.splice(r,1);break}}if(h){if(e&&(h.matches?h.matches(e):h([e]).length)){var y=f>-1?f:n.length;n.splice(y,0,e),v=i.indexOf(h(n),e),n.splice(y,1),l.start&&0==v||!u&&v==n.length?v=-1:n.splice(v,0,e)}}else e&&(void 0!==a?v=f:l.start||(v=t.defaultIndex||0,n.splice(v,0,e)));if((f>-1||v>-1)&&(s||!h||f!=v)){var w=m.slice();for(r=0;c=w[r];r++)c(e||g,f,v)}}))});var r={};return r.remove=r.cancel=function(){var t=i.indexOf(m,e);t>-1&&(m.splice(t,1),m.length||a.splice(i.indexOf(a,u),1))},r}}return d},l("put",(function(e,n){t.notify(e,n)})),l("add",(function(e){t.notify(e)})),l("remove",(function(e){t.notify(void 0,e)})),t};return e.setObject("dojo.store.Observable",a),a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(22)],void 0===(a=function(t,e,n,i){return t([],{constructor:function(t,n,i){this.url=t,this.query=e.mixin({},n),this.urlParams=e.mixin({},i)},setSort:function(t,e){return this.query.orderby=t,this.query.ascending=e,this},resetSort:function(){return this.query.orderby=null,this.query.ascending=null,this},getCount:function(){var t=new i,e="select "+this.query.select_count;return this.query.from&&(e+=" from "+this.query.from),this.query.where?(e+=" where ("+this.query.where+")",this.query.filter&&(e+=" and ("+this.query.filter+")")):this.query.filter&&(e+=" where "+this.query.filter),this.query.groupby&&(e+=" group by "+this.query.groupby),this.query.pivot&&(e+=" pivot "+this.query.pivot),this._send(e).then((function(e){if("success"==e.status){var n=parseInt(e.data[0][0].v);t.resolve(n)}else t.reject("Couldn't get count")})),t},getData:function(t,e){var a=new i;return t||(t=1),e||(e=25),this._send(this._buildQuery(this.query,t,e)).then((function(t){var e={headers:[]};n.forEach(t.meta,(function(t){var n={id:t.id,label:t.label};e.headers.push(n)})),e.rows=[],n.forEach(t.data,(function(t){var i={};n.forEach(t,(function(t,n){i[e.headers[n].id]=t.f?t.f:t.v})),e.rows.push(i)})),a.resolve(e)})),a},_send:function(t){var n="",i=(new Date).getTime();return n=-1==this.url.indexOf("?")?this.url+"?_cbt="+i:this.url+"&_cbt="+i,dojo.xhrPost({url:n,content:e.mixin(this.urlParams,{q:t}),handleAs:"json"})},_buildQuery:function(t,n,i){var a="";return t.select&&(a+="select "+t.select),t.from&&(a+=" from "+t.from),t.where?(a+=" where ("+t.where+")",t.filter&&(a+=" and ("+t.filter+")")):t.filter&&(a+=" where "+t.filter),t.groupby&&(a+=" group by "+t.groupby),t.pivot&&(a+=" pivot "+t.pivot),t.orderby?(a+=" order by ",t.filter_orderby&&(a+=t.filter_orderby+", "),t.orderby=t.orderby.toLowerCase(),t.orderby.match("desc")?(t.orderby=e.trim(t.orderby.replace("desc","")),t.ascending=!1):t.orderby.toLowerCase().match("asc")&&(t.orderby=e.trim(t.orderby.replace("asc","")),t.ascending=!0),a+=t.orderby,t.ascending||(a+=" desc")):t.filter_orderby&&(a+="order by "+t.filter_orderby),a+=" limit "+i+" offset "+(n-1)*i,t.label&&(a+=" label "+t.label),t.format&&(a+=" format "+t.format),a}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(60),n(180),n(1306)],void 0===(a=function(t,e,n,i){return t([n],{templateString:i,baseClass:"switchWrapper",transitionTime:200,description:"",_onChangeAsync:function(){},onChange:function(t){this.inherited(arguments),this._onChangeAsync(t)},postCreate:function(){this.inherited(arguments),this.onChangeAsync&&(this._onChangeAsync=e(this.onChangeAsync,this.transitionTime))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(152)],void 0===(a=function(t,e){t.getObject("dojox.string",!0).tokenize;return function(t,n,i,a){for(var o,s,r=[],l=0;o=n.exec(t);){if((s=t.slice(l,n.lastIndex-o[0].length)).length&&r.push(s),i){if(e("opera")){for(var d=o.slice(0);d.length<o.length;)d.push(null);o=d}var c=i.apply(a,o.slice(1).concat(r.length));void 0!==c&&r.push(c)}l=n.lastIndex}return(s=t.slice(l)).length&&r.push(s),r}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(3),n(38),n(17),n(16),n(12),n(11),n(20),n(1328)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([r,l,d],{templateString:c,readOnly:!0,tag:null,tagName:null,maxTagLength:15,_setTagNameAttr:function(t){var e=t=String(t);t.length>this.maxTagLength&&(e=t.substring(0,this.maxTagLength)+"...",this.tagButtonContainer.title=t),this.tagLabel.innerText=e,this._set("tagName",t)},postCreate:function(){this.inherited(arguments);var t=this;this.readOnly||(i.remove(this.deleteTagButton,"hide"),this.own(n(this.deleteTagButton,"click",(function(){t.onRemove(t.tag)}))))},onRemove:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(598),n(222)],void 0===(a=function(t,e){return e((function(e,n,i){t(e,n,i)}))}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(7),n(2)],void 0===(a=function(t,e,n){return t([],{mainImageElement:null,galleryImagePaths:[],constructor:function(t){this.mainImageElement=document.querySelector(".mcnPaymentMainImage img.mcnImage");var e=document.querySelectorAll(".mcnPaymentGalleryImages div.mcnImage");e.length>0&&this._setupImages(e,t)},_setupImages:function(t,n){t.forEach(function(t,n){var i=e.get(t,"data-img-src");i&&(this.galleryImagePaths.push(i),this._setupOnClickHandler(t,n))}.bind(this))},_setupOnClickHandler:function(t,e){n(t,"click",function(t){t.preventDefault(),t.stopPropagation(),this._switchImage(this.galleryImagePaths[e]||"")}.bind(this))},_switchImage:function(t){e.set(this.mainImageElement,"src",t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t={FONT_FAMILY:"font-family",FONT_SIZE:"font-size",FONT_WEIGHT:"font-weight",FONT_STYLE:"font-style",COLOR:"color",TEXT_DECORATION:"text-decoration",TEXT_ALIGN:"text-align",LINE_HEIGHT:"line-height",LETTER_SPACING:"letter-spacing",BG_COLOR:"background-color",BG_IMAGE:"background-image",BG_SIZE:"background-size",BG_POSITION:"background-position",BG_REPEAT:"background-repeat",FLEX:"flex",PADDING_TOP:"padding-top",PADDING_RIGHT:"padding-right",PADDING_BOTTOM:"padding-bottom",PADDING_LEFT:"padding-left"};return t.FONT_STYLES_PROPS=[t.FONT_WEIGHT,t.FONT_STYLE,t.TEXT_DECORATION],t.FONT_PROPS=[t.FONT_FAMILY,t.COLOR,t.FONT_SIZE,t.LINE_HEIGHT,t.TEXT_ALIGN,t.LETTER_SPACING,t.FONT_WEIGHT,t.FONT_STYLE,t.TEXT_DECORATION],t.BG_PROPS=[t.BG_COLOR,t.BG_IMAGE,t.BG_SIZE,t.BG_POSITION,t.BG_REPEAT],t.PADDING_PROPS=[t.PADDING_TOP,t.PADDING_RIGHT,t.PADDING_BOTTOM,t.PADDING_LEFT],t}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(1),n(31),n(2),n(3),n(7),n(35),n(22),n(96),n(476),n(145),n(12),n(11),n(20),n(213),n(1411),n(1412),n(29),n(8),n(15),n(16),n(17)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_){var C="product",k="topSellers",S=t([l],{storeId:null,query:function(t){var i=e.isString(t)?t:t.name.toString(),a=b.toUrl("/ecommerce/products-search",{store_id:this.storeId,term:i}),o=n(a,{handleAs:"json"}).then(function(t){return t.map(function(t){return t.image_url=b.addProxy(t.image_url),t.productInfo=this.createProductInfo(t.price,t.sku),{product:t,id:t.product_id,name:y.decodeHTMLEntities(t.title),label:e.replace(f,t)}}.bind(this))}.bind(this));return o.total=o.then((function(t){return t.length})),c(o)},createProductInfo:function(t,e){return e?t+" &middot; SKU "+e:t}}),x=t([u,h,p],{templateString:g,stores:null,deferredInsert:null,dialogTitle:null,_readyPromise:null,_dataStores:null,_pickType:null,postMixInProperties:function(){this._dataStores={}},postCreate:function(){this._readyPromise=this._getStores().then(e.hitch(this,(function(t){this.stores=t.stores,this._initInputs()}))),this.own(i(this.cancelBtn,"click",e.hitch(this,(function(){this._hide()}))),i(this.saveBtn,"click",e.hitch(this,(function(){switch(this._pickType){case C:var t=this._getMemoryStore(this.storeSelect.value);if(this.productSearchInput.value){var e=t.get(this.productSearchInput.value);this._productsChosen([e.product])}break;case k:this._returnTopSellers();break;default:throw new Error("Unknown pick type:"+this._pickType)}}))))},chooseProduct:function(){return this._pickType=C,this.deferredInsert=new r,this._readyPromise.then(e.hitch(this,(function(){this._show()}))),this.deferredInsert.promise},chooseProductFromStore:function(t){return this._pickType=C,this.deferredInsert=new r,this._readyPromise.then(e.hitch(this,(function(){this._show(),this.storeSelect.value=t,this.productSearchInput.store=null,this.productSearchInput.reset(),this.productSearchInput.store=this._getMemoryStore(this.storeSelect.value),a.add(this.storeContainer,"hide")}))),this.deferredInsert.promise},chooseTopSellers:function(){return this._pickType=k,this.deferredInsert=new r,this._readyPromise.then(e.hitch(this,(function(){this.stores.length>1?(a.add(this.productSearchContainer,"hide"),this.saveBtn.innerHTML="Select",this.dialogTitle="Select a store",this._show()):1===this.stores.length&&this._returnTopSellers()}))),this.deferredInsert.promise},chooseTopSellersFromStore:function(t){return this._pickType=k,this.deferredInsert=new r,this._readyPromise.then(e.hitch(this,(function(){this.stores.length>1&&(this.storeSelect.value=t,this.productSearchInput.store=null,this.productSearchInput.reset(),this.productSearchInput.store=this._getMemoryStore(this.storeSelect.value)),this._returnTopSellers()}))),this.deferredInsert.promise},_toggleInsertBtn:function(){switch(this._pickType){case C:o.set(this.saveBtn,"disabled",!this.productSearchInput.value);break;default:o.remove(this.saveBtn,"disabled")}},_productsChosen:function(t){this.deferredInsert.resolve(t),this._hide()},_initInputs:function(){this.stores.forEach(e.hitch(this,(function(t){this.storeSelect.addOption({value:t.store_id,label:t.name})}))),1===this.stores.length&&a.add(this.storeContainer,"hide"),this.productSearchInput=new m({autoComplete:!1,queryExpr:"${0}",labelAttr:"label",labelType:"html",placeHolder:"Search by name",invalidMessage:"No product found.",required:!1},this.productSearchInput),this.productSearchInput.startup(),this.productSearchInput.store=this._getMemoryStore(this.storeSelect.value),this.own(i(this.storeSelect,"change",e.hitch(this,(function(){this.productSearchInput.store=null,this.productSearchInput.reset(),this.productSearchInput.store=this._getMemoryStore(this.storeSelect.value)}))),i(this.productSearchInput,"change",e.hitch(this,(function(){this._toggleInsertBtn()}))))},_getMemoryStore:function(t){return this._dataStores[t]||(this._dataStores[t]=new d(new S({storeId:t}),new l)),this._dataStores[t]},_getStores:function(){return n.get(b.toUrl("/ecommerce/stores"),{handleAs:"json"})},_returnTopSellers:function(){n.get(b.toUrl("/ecommerce/products-search"),{query:{store_id:this.storeSelect.value,type:"topSellers"},handleAs:"json"}).then(e.hitch(this,(function(t){this._productsChosen(t)})))},_show:function(){this.dialog=new v({title:"Select a product",content:this.domNode,style:"width:450px;",class:"dijitDialog--fullScreen@phone"}),s.after(this.dialog,"hide",e.hitch(this,(function(){this.destroy()}))),this.dialog.startup(),this.dialog.show(),this._toggleInsertBtn()},_hide:function(){this.dialog?this.dialog.hide():this.destroy()},destroy:function(){this.inherited(arguments)}}),I=null,T=function(){return I&&I._hide(),(I=new x).startup(),I};return{chooseProduct:function(){return T().chooseProduct()},chooseProductFromStore:function(t){return T().chooseProductFromStore(t)},chooseTopSellers:function(){return T().chooseTopSellers()},chooseTopSellersFromStore:function(t){return T().chooseTopSellersFromStore(t)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(46)],void 0===(a=function(t,e){var n=function(n,i,a){return a=a||{},t.delegate(n,{query:function(t,e){var o=n.query(t,e);return o.forEach((function(t){a.isLoaded&&!a.isLoaded(t)||i.put(t)})),o},queryEngine:n.queryEngine||i.queryEngine,get:function(t,a){return e(i.get(t),(function(o){return o||e(n.get(t,a),(function(e){return e&&i.put(e,{id:t}),e}))}))},add:function(t,a){return e(n.add(t,a),(function(e){return i.add(e&&"object"==typeof e?e:t,a),e}))},put:function(t,a){return i.remove(a&&a.id||this.getIdentity(t)),e(n.put(t,a),(function(e){return i.put(e&&"object"==typeof e?e:t,a),e}))},remove:function(t,a){return e(n.remove(t,a),(function(e){return i.remove(t,a)}))},evict:function(t){return i.remove(t)}})};return t.setObject("dojo.store.Cache",n),n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(37),n(6),n(1),n(45),n(4),n(31),n(22),n(14),n(5),n(8),n(29),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u=function(n,s,c){e(".cancel-button",n.domNode).on("click",(function(t){t.stopPropagation(),t.preventDefault(),n.hide()})),e("form",n.domNode).on("submit",(function(e){e.stopPropagation(),e.preventDefault(),window.ga("send",{hitType:"event",eventCategory:"segments",eventAction:"save",eventLabel:"regular",dimension13:1,dimension14:1});var h=this;o.post(d.toUrl(c),{data:i.toObject(h),sync:!0,handleAs:"text"}).response.then((function(e){"application/json"==e.getHeader("Content-Type")?(s.resolve(JSON.parse(e.data)),n.hide()):(l.forEach(r.findWidgets(h),(function(t){t.destroyRecursive()})),a.place(e.data,n.containerNode,"only"),t.parse(n.domNode),u(n,s,c))}))}))};return{confirmSave:function(t,e){var n=new s,i=new c({title:"Save Segment",onDownloadEnd:function(){u(i,n,"lists/segments/save-dialog-post")},onHide:function(){i.destroyRecursive()}});return i.setHref(d.toUrl("lists/segments/save-dialog",{id:t,segment_id:e})),i.show(),n.promise},updateSavedSegment:function(t,e,n){return o.post(d.toUrl("lists/segments/update-saved-segment"),{handleAs:"json",data:{id:t,segment_id:e,segment_name:n}})},getEditor:function(t,e){e||(e={});var i=n.mixin({id:t},e);return o.post(d.toUrl("lists/segments/editor"),{data:i,handleAs:"text"})},deleteSegment:function(t,e){return o.post(d.toUrl("lists/segments/delete"),{data:{id:t,ids:e,as_json:!0},handleAs:"json"})},storeSegment:function(t,e){return o.post(d.toUrl("lists/segments/members/store",{list_id:t}),{data:e,handleAs:"json",sync:!0})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(577),n(190),n(1476),n(2),n(63),n(10),n(31),n(504),n(9),n(7),n(28),n(34),n(32),n(1),n(5),n(22),n(38),n(4),n(3),n(6),n(19),n(21),n(138),n(8),n(16),n(17),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A){return t([a],{content:o,badgeText:"Social cards preview",paneClasses:"socialshare-container",campaignId:null,images:[],currentImageIndex:0,promotion:{},onSave:null,constructor:function(){this.actions=this._defaultActions},postMixInProperties:function(){this.inherited(arguments),this.rootUrl=S.rootUrl},postCreate:function(){this.inherited(arguments),setTimeout((function(){C(".pr-preview-link").on("click",(function(t){return dojo.hasClass(this,"active")||(C(".pr-preview-link.active").removeClass("active"),C(".pr-preview").style("display","none"),C(this).addClass("active"),l.byId("pr-"+h.get(this,"data-tag")).style.display="block"),!1}))}),500);var t=this,e=function(e){e&&(t.promotion.image_url=e,e=I.addProxy(e),C(".pr-img").attr("src",e),C(".pr-img-bg").style("backgroundImage","url("+e+")"))},n=function(e){t.promotion.description=e,e&&C(".pr-desc").html(y.encode(e))},i=function(t){t&&C(".pr-subject").html(y.encode(t))},a=function(e){t.promotion.title=e,e&&C(".pr-title").html(y.encode(e)),e.match(/\*\|([\w|\s:]+)\|\*/g)?(_.add(t.socialShareTitle,"invalid"),_.remove(t.invalidTitle,"hide"),_.add(t.saveAndClose,"disabled")):(_.remove(t.socialShareTitle,"invalid"),_.add(t.invalidTitle,"hide"),_.remove(t.saveAndClose,"disabled"))},o=function(t){t&&C(".pr-fromname").html(t)},r=function(t){C(".pr-domain").html(t)},c=function(e){t.promotion.enabled=e,e?(_.add(t.disabledView,"hide"),_.remove(t.settingsView,"hide"),_.remove(t.promotionPreview,"disabled")):(_.remove(t.disabledView,"hide"),_.add(t.settingsView,"hide"),_.add(t.promotionPreview,"disabled"))},m=function(){t.currentImageIndex=t.images.indexOf(t.promotion.image_url);var e=t.currentImageIndex>-1;t.images.length<1?(_.add(t.imageDetails,"hide"),_.remove(t.uploadNoImages,"hide"),_.add(t.uploadWithImages,"hide")):(_.remove(t.imageDetails,"hide"),_.add(t.uploadNoImages,"hide"),_.remove(t.uploadWithImages,"hide")),t.currentImageIndex<1?_.add(t.prevImage,"disabled"):_.remove(t.prevImage,"disabled"),e&&t.currentImageIndex>=t.images.length-1?_.add(t.nextImage,"disabled"):_.remove(t.nextImage,"disabled"),p.set(t.imageIndex,""+(t.currentImageIndex+1)),p.set(t.totalImages,""+t.images.length),e?(_.remove(t.imageCount,"hide"),_.add(t.chooseCampaign,"hide")):(_.add(t.imageCount,"hide"),_.remove(t.chooseCampaign,"hide"))};this.own(s(this.socialShareDescription,"keyup",f.hitch(this,(function(){var t=this.socialShareDescription.value;n(t)})))),this.own(s(this.socialShareTitle,"keyup",f.hitch(this,(function(){var t=this.socialShareTitle.value;a(t)})))),this.own(s(this.prevImage,"click",f.hitch(this,(function(){this.currentImageIndex>0&&(e(this.images[--this.currentImageIndex]),m())})))),this.own(s(this.nextImage,"click",f.hitch(this,(function(){this.currentImageIndex<this.images.length-1&&(e(this.images[++this.currentImageIndex]),m())})))),this.own(s(this.enableSwitch,"change",f.hitch(this,(function(){c(this.enableSwitch.checked)})))),this.own(s(this.saveAndClose,"click",f.hitch(this,(function(){!this.enableSwitch.checked||this.socialShareTitle.value&&this.socialShareDescription.value&&t.promotion.image_url?this.hide():_.remove(this.incompleteWarning,"hide")})))),this.own(s(this.saveAndCloseAnyway,"click",f.hitch(this,(function(){this.hide()})))),this.own(s(this.editCampaign,"click",f.hitch(this,(function(){this.hide()})))),this.own(C(".upload-image").on("click",f.hitch(this,(function(){x.show({zIndex:100,actions:"select, rename, copy",allowedFileTypes:"image",onSelect:function(t,n,i){e(t),m(),x.hide()},forceOnTop:!0})})))),d.post(I.toUrl("campaigns/wizard/social-card"),{handleAs:"json",data:{id:this.campaignId}}).then(f.hitch(this,(function(t){if(t){if(this.images=t.campaign_images,c(t.enabled),this.enableSwitch.setChecked(t.enabled),t.title&&(this.socialShareTitle.value=t.title,a(t.title)),t.description&&(this.socialShareDescription.value=t.description,n(t.description)),t.subject)if("string"==typeof t.subject)i(t.subject);else{var s=t.subject["GROUP:A"];i(s)}o(t.from_name),r(t.domain),t.image?(e(t.image),this.currentImageIndex=this.images.indexOf(t.image)):e(this.images[0]),m(),u.set(l.byId("share-settings"),"visibility","visible"),C("body").addClass("slider-editor")}})))},destroy:function(){w.destroy("share-settings"),C(".socialshare-container")&&C(".socialshare-container").forEach(w.destroy)},savePromotion:function(){return this.promotion.title&&this.promotion.title.match(/\*\|([\w|\s:]+)\|\*/g)&&(this.promotion.title=""),d.post(I.toUrl("campaigns/wizard/social-card/save"),{handleAs:"json",data:{id:this.campaignId,description:this.promotion.description,image_url:this.promotion.image_url,title:this.promotion.title,enabled:this.promotion.enabled}}).then(f.hitch(this,(function(t){return C("body").removeClass("slider-editor"),t})))},_paneDidHide:function(){var t=this.savePromotion();this.onSave&&t.then(f.hitch(this,(function(){this.onSave(this.promotion),this.destroy()})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(304),n(131),n(167),n(77),n(103)],void 0===(a=function(t,e,n,i,a){return function(o,s,r,l){if(!i(o))return o;for(var d=-1,c=(s=e(s,o)).length,u=c-1,h=o;null!=h&&++d<c;){var p=a(s[d]),m=r;if(d!=u){var g=h[p];void 0===(m=l?l(g,p,h):void 0)&&(m=i(g)?g:n(s[d+1])?[]:{})}t(h,p,m),h=h[p]}return o}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1677),n(1678),n(90),n(50),n(224)],void 0===(a=function(t,e,n,i,a){return function(o,s,r){var l=i(o)?t:e;return r&&a(o,s,r)&&(s=void 0),l(o,n(s,3))}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(24),n(1682)],void 0===(a=function(t,e,n){return t([e],{templateString:n,requiredProps:["payment_type"],postCreate:function(){this._validateProps()},_validateProps:function(){if(-1===["none","credit_card","paypal","adyen","bank"].indexOf(this.payment_type))throw new Error("'"+this.payment_type+"' is not an expected payment method type.'")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(7),n(18),n(19),n(8),n(12),n(11),n(20),n(1701)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t([s,r,l],{templateString:d,postEndpoint:null,slatId:null,actionBarEnabled:!0,postMixInProperties:function(){this._validateRequiredProps(),this._buildTemplate()},setData:function(t){},handleSave:function(){},postForm:function(t){i.post(o.toUrl(this.postEndpoint),{handleAs:"json",data:t}).then(e.hitch(this,"_onPostResponse"))},onPostSuccess:function(t){if(!this.cancelButton)throw new Error("Slat save successful but closing of the slat has failed.");this.cancelButton.click()},onPostError:function(t){},onPostErrorFeedbackGiven:function(){},_validateRequiredProps:function(){if(!this.slatId)throw new Error("slatId unimplemented. It is required.");if(!this.postEndpoint)throw new Error("postEndpoint unimplemented. It is required.")},_buildTemplate:function(){this.templateString=this.actionBarEnabled?e.replace(this.templateString,{_content:this.content}):this.content},_publishUpdate:function(t){a.publish("campaigns/checklist-interface",e.mixin({itemId:this.slatId},t))},_onPostResponse:function(t){switch(this._publishUpdate(t),t.status){case"success":this.onPostSuccess(t);break;case"error":this.onPostError(t),this.onPostErrorFeedbackGiven();break;default:throw new Error("Unknown state "+t.status)}},_setSlatIdAttr:function(){this.cancelButton&&n.set(this.cancelButton,"data-mc-slat",this.slatId)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return{instruction:{match:":identifier",go:function(t){return t}},selection:{match:"",go:function(){return""}}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(1),n(160),n(188)],void 0===(a=function(t,e,n){var i=t.getObject("validate.regexp",!0,n);return i=n.validate.regexp={ipAddress:function(t){"boolean"!=typeof(t="object"==typeof t?t:{}).allowDottedDecimal&&(t.allowDottedDecimal=!0),"boolean"!=typeof t.allowDottedHex&&(t.allowDottedHex=!0),"boolean"!=typeof t.allowDottedOctal&&(t.allowDottedOctal=!0),"boolean"!=typeof t.allowDecimal&&(t.allowDecimal=!0),"boolean"!=typeof t.allowHex&&(t.allowHex=!0),"boolean"!=typeof t.allowIPv6&&(t.allowIPv6=!0),"boolean"!=typeof t.allowHybrid&&(t.allowHybrid=!0);var e=[];t.allowDottedDecimal&&e.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])"),t.allowDottedHex&&e.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]"),t.allowDottedOctal&&e.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]"),t.allowDecimal&&e.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])"),t.allowHex&&e.push("0[xX]0*[\\da-fA-F]{1,8}"),t.allowIPv6&&e.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}"),t.allowHybrid&&e.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");var n="";return e.length>0&&(n="("+e.join("|")+")"),n},host:function(t){"boolean"!=typeof(t="object"==typeof t?t:{}).allowIP&&(t.allowIP=!0),"boolean"!=typeof t.allowLocal&&(t.allowLocal=!1),"boolean"!=typeof t.allowPort&&(t.allowPort=!0),"boolean"!=typeof t.allowNamed&&(t.allowNamed=!1);var e=t.allowPort?"(\\:\\d+)?":"",n="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)";return t.allowIP&&(n+="|"+i.ipAddress(t)),t.allowLocal&&(n+="|localhost"),t.allowNamed&&(n+="|^[^-][a-zA-Z0-9_-]*"),"("+n+")"+e},url:function(t){"scheme"in(t="object"==typeof t?t:{})||(t.scheme=[!0,!1]);return e.buildGroupRE(t.scheme,(function(t){return t?"(https?|ftps?)\\://":""}))+i.host(t)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},emailAddress:function(t){"boolean"!=typeof(t="object"==typeof t?t:{}).allowCruft&&(t.allowCruft=!1),t.allowPort=!1;var e="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@"+i.host(t);return t.allowCruft&&(e="<?(mailto\\:)?"+e+">?"),e},emailAddressList:function(t){"string"!=typeof(t="object"==typeof t?t:{}).listSeparator&&(t.listSeparator="\\s;,");var e=i.emailAddress(t);return"("+e+"\\s*["+t.listSeparator+"]\\s*)*"+e+"\\s*["+t.listSeparator+"]?\\s*"},numberFormat:function(t){void 0===(t="object"==typeof t?t:{}).format&&(t.format="###-###-####");return e.buildGroupRE(t.format,(function(t){return e.escapeString(t,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")}))},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(t){"boolean"!=typeof(t="object"==typeof t?t:{}).allowTerritories&&(t.allowTerritories=!0),"boolean"!=typeof t.allowMilitary&&(t.allowMilitary=!0);var e="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";return t.allowTerritories&&(e+="|AS|FM|GU|MH|MP|PW|PR|VI"),t.allowMilitary&&(e+="|AA|AE|AP"),"("+e+")"}}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var a,o;a=[n(0),n(12),n(11),n(671),n(486),n(487),n(6),n(1),n(2),n(4),n(9),n(33),n(30),n(58),n(22),n(3),n(177),n(48)],void 0===(o=function(t,e,n,a,o,s,r,l,d,c,u,h,p,m,g,f,v){var b=null;return t("PopupSignupForm",[e,n,v],{templateString:a,popupDelay:1e3,popupOpacity:.65,closeLabel:"close",origOverflowValue:null,version:"1.0",config:{},subscribeUrl:"#",honeypotFieldName:"",customCssNode:null,env:"prod",ignoreCookie:!1,closable:!0,appDomain:"",postMixInProperties:function(){this.config.popupOpacity&&(this.popupOpacity=this.config.popupOpacity/100),this.config.popupDelay&&(isNaN(Number(this.config.popupDelay))?this.popupDelay=this.config.popupDelay:this.popupDelay=1e3*this.config.popupDelay),this.config.styles&&(this.styles=this.config.styles),this.config.closeLabel&&(this.closeLabel=this.config.closeLabel),this.config.version&&(this.version=this.config.version),this.config.template&&(this.template=this.config.template),this.config.appDomain&&(this.appDomain=this.config.appDomain)},placeAt:function(){null===b&&this.inherited(arguments)},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments),null===b&&(b=this,u.set(this.bannerContainer,"display","none"),u.set(this.modalOverlay,"display","none"),u.set(this.modalContainer,"display","none"),this._skipShowingPopup()||(this.bannerFrame=new s({iframe:this.iframeBannerContainer,config:this.config,appDomain:this.appDomain}),this.bannerFrame.startup(),this.modalFrame=new o({iframe:this.iframeModalContainer,config:this.config,subscribeUrl:this.subscribeUrl,honeypotFieldName:this.honeypotFieldName,env:this.env,appDomain:this.appDomain}),this.modalFrame.startup(),this._setupModal(),m([this.loadModalCss(),this.loadCustomCss()]).then(l.hitch(this,"openModal"))))},openModal:function(){var t=this._openModal.bind(this),e=dojo.isFF?"mouseout":"mouseleave";"exit"==this.popupDelay?window.navigator.userAgent.indexOf("Edge")>-1||dojo.isIE||window.screen&&window.screen.width<640?setTimeout(t,1e3):document.firstElementChild.addEventListener(e,(function n(){t(),document.removeEventListener(e,n,!1)}),!1):"middle"==this.popupDelay?document.addEventListener("scroll",(function e(){window.innerHeight+window.scrollY>=document.body.offsetHeight/2&&(t(),document.removeEventListener("scroll",e,!1))}),!1):"bottom"==this.popupDelay?document.addEventListener("scroll",(function e(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&(t(),document.removeEventListener("scroll",e,!1))}),!1):setTimeout(t,this.popupDelay)},closeModal:function(){this._closeModal()},showModal:function(){u.set(this.bannerContainer,"display","none"),u.set(this.modalOverlay,"visibility","visible"),u.set(this.modalContainer,"visibility","visible")},closeBanner:function(){this.closable&&(u.set(this.bannerContainer,"display","none"),this._closeModal())},_openModal:function(){u.set(this.bannerContainer,"display","block"),u.set(this.modalOverlay,"display","block"),u.set(this.modalContainer,"display","block"),this.modalFrame.updateDocHeight(),this.bannerFrame.updateDocHeight(),u.set(this.modalOverlay,"opacity",this.popupOpacity),u.set(this.modalContainer,"opacity",1)},_closeModal:function(){if(this.closable)if(-1===window.location.href.indexOf("mailchimp.com")&&this._setCookie(),void 0===this.modalContainer.style.animation||"fixed"!==this.config.modalVariation&&"slide"!==this.config.modalVariation)this._hideOverlay();else try{this.modalContainer.addEventListener("webkitAnimationEnd",this._hideOverlay.bind(this)),this.modalContainer.addEventListener("animationend",this._hideOverlay.bind(this)),f.add(this.modalContainer,"mc-modal--close")}catch(t){this._hideOverlay()}},_hideOverlay:function(){u.set(this.modalOverlay,"opacity",0),u.set(this.modalOverlay,"display","none"),this._cleanup()},_cleanup:function(){c.destroy(this.domNode),u.set(document.body,"overflow",this.origOverflowValue),b=null},_setupModal:function(){this.origOverflowValue=dojo.getComputedStyle(document.body).overflow,u.set(document.body,"overflow","auto");var t=this.bannerFrame.bannerContent;d(t.modalOpen,"click",l.hitch(this,"closeBanner")),d(t.bannerClose,"click",l.hitch(this,"showModal")),d(r("[data-action='close-mc-modal']")[0],"click",l.hitch(this,"closeModal")),d(window.document,"keyup",l.hitch(this,(function(t){t.keyCode==p.ESCAPE&&this.closeModal()}))),d(this.modalFrame.frameDoc,"keyup",l.hitch(this,(function(t){t.keyCode==p.ESCAPE&&this.closeModal()})))},loadModalCss:function(){var t=new g,e=document.createElement("link");return e.rel="stylesheet",e.type="text/css","dev"==this.env?(e.href="//"+this.appDomain+"/css/signup-forms/popup/modal.css","slide"===this.config.modalVariation?e.href="//"+this.appDomain+"/css/signup-forms/popup/modal-slidein.css":"fixed"===this.config.modalVariation&&(e.href="//"+this.appDomain+"/css/signup-forms/popup/modal-fixed.css")):(e.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/modal.css","slide"===this.config.modalVariation?e.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/modal-slidein.css":"fixed"===this.config.modalVariation&&(e.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/modal-fixed.css")),e.media="all",d(e,"load",(function(){t.resolve()})),document.getElementsByTagName("head")[0].appendChild(e),t.promise},loadCustomCss:function(){this.customCssNode&&c.destroy(this.customCssNode);var t=new g;this.customCssNode=this.createStyleNode(document);var e=this.getStyleSheet(this.customCssNode);if(this.styles)for(var n in this.styles)if(this.styles.hasOwnProperty(n))switch(n){case"modal":for(var i in this.styles[n])switch(i){case"close_link_color":this.addCSSRule(e,".mc-closeModal","color:"+this.styles[n][i]+";")}}return!this.template||3!==this.template&&4!==this.template||this.addCSSRule(e,".mc-modal","width: 603px;"),t.resolve(),t.promise},_setCookie:function(){var t=new Date,e=new Date(t.getTime()+31536e6);document.cookie="MCPopupClosed=yes;expires="+e.toGMTString()+";path=/"},_skipShowingPopup:function(){return!this.ignoreCookie&&this._hasCookie()},_hasCookie:function(){var t=document.cookie.split(";");for(i=0;i<t.length;i++)if(parts=t[i].split("="),-1!==parts[0].indexOf("MCPopupClosed")||-1!==parts[0].indexOf("MCPopupSubscribed"))return!0;return!1}})}.apply(e,a))||(t.exports=o)},function(t,e,n){var i,a;i=[n(0),n(12),n(321),n(6),n(1),n(49),n(2),n(10),n(27),n(4),n(9),n(7),n(3),n(58),n(22),n(28),n(33),n(177)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){var b={arial:"Arial, 'Helvetica Neue', Helvetica, sans-serif",comic_sans:"'Comic Sans MS', 'Marker Felt-Thin', Arial, sans-serif",courier_new:"'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace",georgia:"Georgia, Times, 'Times New Roman', serif",helvetica:"'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif",lucida:"'Lucida Sans Unicode', 'Lucida Grande', sans-serif",tahoma:"Tahoma, Verdana, Segoe, sans-serif",times_new_roman:"'Times New Roman', Times, Baskerville, Georgia, serif",trebuchet_ms:"'Trebuchet MS', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Tahoma, sans-serif",verdana:"Verdana, Geneva, sans-serif"};return t([e,v],{version:"1.0",template:1,iframe:null,frameDoc:null,maxWidth:768,mobileView:!1,config:{},subscribeUrl:"#",honeypotFieldName:"",layoutCssNode:null,customCssNode:null,imageUrl:null,imageEdgeToEdge:null,env:"prod",appDomain:"",constructor:function(t){if(!t.iframe||!t.iframe.tagName||"iframe"!=t.iframe.tagName.toLowerCase())throw new Error("You must specify an iframe attribute to an iframe element")},postMixInProperties:function(){this.config.template&&(this.template=this.config.template),this.config.version&&(this.version=this.config.version),this.config.imageUrl&&(this.imageUrl=this.config.imageUrl),this.config.hasOwnProperty("imageEdgeToEdge")&&(this.imageEdgeToEdge=this.config.imageEdgeToEdge),this.config.styles&&(this.styles=this.config.styles),this.styles.hasOwnProperty("modal")&&this.styles.modal.hasOwnProperty("max_width")&&(this.maxWidth=this.styles.modal.max_width-20),this.frameDoc=this.iframe.contentWindow.document},postCreate:function(){this.signupForm=new n({config:this.config,subscribeUrl:this.subscribeUrl,honeypotFieldName:this.honeypotFieldName}),this.frameDoc.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/></head><body></body></html>'),this.frameDoc.close(),this.signupForm.placeAt(this.frameDoc.body),this.signupForm.startup(),p([this.loadCommonCss(),this.loadLayoutCss(),this.loadCustomCss()]).then(a.hitch(this,"updateDocHeight")),s(window,"resize",a.hitch(this,(function(){this.updateDocHeight(),this._addMobileClass(this._isMobileView())}))),this.signupForm.on("resizeFrame",a.hitch(this,(function(){this.updateDocHeight()}))),"fixed"===this.config.modalVariation&&(this._overrideDescriptionForFixedLayout(),this._showPlaceholderTextForEmail())},_overrideDescriptionForFixedLayout:function(){var t=this._cleanText(this.config.description);this.signupForm.isStrictContent()&&(t="<p>"+t+"</p>"),g.set(this.signupForm.descriptionContainer,t)},startup:function(){this.inherited(arguments),this.mobileView=this._isMobileView(),this._addMobileClass(this.mobileView)},_cleanText:function(t){return(t=(t=t.replace(/<\/?[^>]+(>|$)/gi,"")).replace(/&nbsp;/gi," ")).length>50?t.substring(0,50)+"...":t},_addMobileClass:function(t){var e=this.frameDoc.getElementsByClassName("modalContent")[0];t?h.add(e,"modalContent--mobile"):h.remove(e,"modalContent--mobile")},_showPlaceholderTextForEmail:function(){this.mobileView=this._isMobileView();var t=this.signupForm.getEmailField();t&&t.toggleEmailPlaceholder(!this.mobileView)},docHeight:function(){return l.getContentBox(this.signupForm.domNode).h},updateDocHeight:function(){try{c.set(this.iframe,"height",this.docHeight()+"px"),c.set(i(".mc-layout__modalContent")[0],"max-height",this.docHeight()+"px"),"fixed"===this.config.modalVariation&&c.set(i(".mc-layout__modalContent")[0],"max-height",this.docHeight()+1+"px")}catch(t){}},_isMobileView:function(){return o.getBox().w<=this.maxWidth},loadCommonCss:function(){var t=new m,e=this.frameDoc.createElement("link");return e.rel="stylesheet",e.type="text/css","dev"===this.env?e.href="//"+this.appDomain+"/css/signup-forms/popup/common.css":e.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/common.css",e.media="all",s(e,"load",(function(){t.resolve()})),this.frameDoc.getElementsByTagName("head")[0].appendChild(e),t.promise},loadLayoutCss:function(){this.layoutCssNode&&d.destroy(this.layoutCssNode);var t=new m;return this.layoutCssNode=this.frameDoc.createElement("link"),this.layoutCssNode.rel="stylesheet",this.layoutCssNode.type="text/css","dev"===this.env?(this.layoutCssNode.href="//"+this.appDomain+"/css/signup-forms/popup/layout-"+this.template+".css","fixed"===this.config.modalVariation&&(this.layoutCssNode.href="//"+this.appDomain+"/css/signup-forms/popup/layout-fixed.css",this.template=1)):(this.layoutCssNode.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/layout-"+this.template+".css","fixed"===this.config.modalVariation&&(this.layoutCssNode.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/layout-fixed.css",this.template=1)),this.layoutCssNode.media="all",s(this.layoutCssNode,"load",(function(){t.resolve()})),this.frameDoc.getElementsByTagName("head")[0].appendChild(this.layoutCssNode),t.promise},_getFontFamilyByKey:function(t){return b[t]?b[t]:b.helvetica},loadCustomCss:function(){this.customCssNode&&d.destroy(this.customCssNode);var t=new m;this.customCssNode=this.createStyleNode(this.frameDoc);var e=this.getStyleSheet(this.customCssNode);if(this.styles)for(var n in this.styles)if(this.styles.hasOwnProperty(n))switch(n){case"button":for(var i in this.styles[n])switch(i){case"color":this.addCSSRule(e,".button","background-color:"+this.styles[n][i]+";");break;case"hover_color":this.addCSSRule(e,".button:hover","background-color:"+this.styles[n][i]+";");break;case"text_color":this.addCSSRule(e,".button","color:"+this.styles[n][i]+";");break;case"alignment":"right"==this.styles[n][i]?this.addCSSRule(e,".button","float:right;"):"center"==this.styles[n][i]?(this.addCSSRule(e,".button","float:none;margin-left:auto;margin-right:auto;"),f("ie")<=9?(this.addCSSRule(e,".button","display:table-cell;"),this.addCSSRule(e,".content__button","margin-left:auto;margin-right:auto;display:table;")):this.addCSSRule(e,".button","display:table;")):this.addCSSRule(e,".button","float:left;");break;case"style":"full"==this.styles[n][i]&&this.addCSSRule(e,".button","width:100%;")}break;case"labels":if(!this.signupForm.isStrictContent())for(var i in this.styles[n])switch(i){case"color":this.addCSSRule(e,"label","color:"+this.styles[n][i]+";");break;case"font":this.addCSSRule(e,"label","font-family:"+this.styles[n][i]+";")}break;case"headingColor":this.addCSSRule(e,".strictContent h1, .strictContent h2, .strictContent h3, .strictContent h4","color:"+this.styles[n]+";");break;case"paragraphColor":this.addCSSRule(e,".strictContent p, .strictContent .helpText, label","color:"+this.styles[n]+";");break;case"headingFont":this.addCSSRule(e,".strictContent h1, .strictContent h2, .strictContent h3, .strictContent h4","font-family:"+this._getFontFamilyByKey(this.styles[n])+";");break;case"paragraphFont":this.addCSSRule(e,".strictContent p, .strictContent .helpText, label","font-family:"+this._getFontFamilyByKey(this.styles[n])+";")}return this.imageUrl&&1!=this.template&&this.addCSSRule(e,".modalContent__image","background-image:url("+this.imageUrl+");"),this.imageEdgeToEdge&&this.addCSSRule(e,".modalContent__image","background-size:cover;"),t.resolve(),t.promise}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(6),n(1),n(49),n(2),n(10),n(27),n(4),n(9),n(7),n(28),n(58),n(22),n(33),n(672),n(177),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){var b=t([e,n],{templateString:f,config:{},description:"",subscribeLabel:"Subscribe",closeLabel:"Close",appDomain:"",postMixInProperties:function(){this.config.closeLabel&&(this.closeLabel=this.config.closeLabel),this.config.description&&(this.description=this.config.description),this.config.buttonLabel&&(this.subscribeLabel=this.config.buttonLabel)},postCreate:function(){this.inherited(arguments),h.set(this.bannerDescription,this._cleanText(this.description))},_cleanText:function(t){return t=(t=t.replace(/<\/?[^>]+(>|$)/gi,"")).replace(/&nbsp;/gi," ")}});return t([e,v],{version:"1.0",iframe:null,frameDoc:null,config:{},customCssNode:null,env:"prod",constructor:function(t){if(!t.iframe||!t.iframe.tagName||"iframe"!=t.iframe.tagName.toLowerCase())throw new Error("You must specify an iframe attribute to an iframe element")},postMixInProperties:function(){this.config.version&&(this.version=this.config.version),this.config.styles&&(this.styles=this.config.styles),this.frameDoc=this.iframe.contentWindow.document},postCreate:function(){this.bannerContent=new b({config:this.config}),this.frameDoc.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/></head><body></body></html>'),this.frameDoc.close(),this.bannerContent.placeAt(this.frameDoc.body),p([this.loadCommonCss(),this.loadBannerCss(),this.loadCustomCss()]).then(a.hitch(this,(function(){this.defer(this.updateDocHeight,500)}))),s(window,"resize",a.hitch(this,(function(){this.updateDocHeight()})))},startup:function(){this.inherited(arguments)},docHeight:function(){},updateDocHeight:function(){try{c.set(this.iframe,"height",this.docHeight()+"px")}catch(t){}},loadCommonCss:function(){var t=new m,e=this.frameDoc.createElement("link");return e.rel="stylesheet",e.type="text/css","dev"==this.env?e.href="//"+this.appDomain+"/css/signup-forms/popup/common.css":e.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/common.css",e.media="all",s(e,"load",(function(){t.resolve()})),this.frameDoc.getElementsByTagName("head")[0].appendChild(e),t.promise},loadBannerCss:function(){var t=new m,e=document.createElement("link");return e.rel="stylesheet",e.type="text/css","dev"==this.env?e.href="//"+this.appDomain+"/css/signup-forms/popup/banner.css":e.href="//downloads.mailchimp.com/css/signup-forms/popup/"+this.version+"/banner.css",e.media="all",s(e,"load",(function(){t.resolve()})),this.frameDoc.getElementsByTagName("head")[0].appendChild(e),t.promise},loadCustomCss:function(){this.customCssNode&&d.destroy(this.customCssNode);var t=new m;this.customCssNode=this.createStyleNode(this.frameDoc);var e=this.getStyleSheet(this.customCssNode);if(this.styles)for(var n in this.styles)if(this.styles.hasOwnProperty(n))switch(n){case"button":for(var i in this.styles[n])switch(i){case"color":this.addCSSRule(e,".bannerContent__subscribeButton","background-color:"+this.styles[n][i]+";");break;case"hover_color":this.addCSSRule(e,".bannerContent__subscribeButton:hover","background-color:"+this.styles[n][i]+";");break;case"text_color":this.addCSSRule(e,".bannerContent__subscribeButton","color:"+this.styles[n][i]+";");break;case"alignment":"right"===this.styles[n][i]?this.addCSSRule(e,".bannerContent__subscribeButton","float:right;"):"center"===this.styles[n][i]?(this.addCSSRule(e,".bannerContent__subscribeButton","float:none;margin-left:auto;margin-right:auto;"),g("ie")<=9?(this.addCSSRule(e,".bannerContent__subscribeButton","display:table-cell;"),this.addCSSRule(e,".bannerContent__buttonContainer","margin-left:auto;margin-right:auto;display:table;")):this.addCSSRule(e,".bannerContent__subscribeButton","display:table;")):this.addCSSRule(e,".bannerContent__subscribeButton","float:left;");break;case"style":"full"==this.styles[n][i]&&this.addCSSRule(e,".bannerContent__subscribeButton","width:100%;")}}return t.resolve(),t.promise}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){return t([],{label:"",value:"",description:"",constructor:function(t,e,n){var i=typeof t;if("string"!==i)throw new Error("`label` argument must be a string, but found `"+i+"`");this.label=t;var a=typeof e;if("string"!==a)throw new Error("`value` argument must be a string, but found `"+a+"`");this.value=e;var o=typeof n;if(n&&"string"!==o)throw new Error("`description` argument must be a string, but found `"+o+"`");this.description=n},getValue:function(){return this.value},getLabel:function(){return this.label},getDescription:function(){return this.description}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(4),n(3),n(1),n(2),n(5),n(62),n(230),n(1857),n(464),n(1019),n(1881)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){return t([e,n],{templateString:c,listId:null,_rawConfig:null,configs:null,mainGroup:null,subGroups:null,savedAST:null,configType:"full",postMixInProperties:function(){this.subGroups=[]},postCreate:function(){this._beforeLoad(),u.getConfig(this.listId,this.configType).then(o.hitch(this,(function(t){this._setupConfigs(t),this._init(),this._afterLoad()})))},_init:function(){this.mainGroup=new h({configs:this.configs}),this.mainGroup.startup(),this.mainGroup.placeAt(this.mainGroupDom),this.mainGroup.on("conditionCountChange",o.hitch(this,"onConditionCountChange")),l.focus(this.mainGroup.domNode),this.savedAST?this._fromAST(this.savedAST):this.mainGroup.addCondition(),this.own(s(this.addSubGroupBtn,"click",o.hitch(this,(function(){this.addSubGroup().addCondition()}))))},_setupConfigs:function(t){this._rawConfig=t;var e={};r.forEach(t.fields,o.hitch(this,(function(t){var n=o.clone(t),i={};r.forEach(n.ops,(function(t){i[t.value]=t})),n.opsMap=i,e[t.field]=n}))),this.configs={fields:e,optionValues:o.clone(t.option_values),listId:this.listId,defaultField:t.default_field}},addSubGroup:function(){var t=new p({configs:this.configs});return t.startup(),i.place(t.domNode,this.subGroupsContainer),t.on("destroy",o.hitch(this,(function(){this.subGroups.splice(this.subGroups.indexOf(t),1)}))),t.on("conditionCountChange",o.hitch(this,"onConditionCountChange")),this.subGroups.push(t),t},getAST:function(){var t=this.mainGroup.getAST();return t.sub_conditions=r.map(this.subGroups,(function(t){return t.getAST()})),t},_fromAST:function(t){this.mainGroup.fromAST(t),t.sub_conditions&&r.forEach(t.sub_conditions,o.hitch(this,(function(t){this.addSubGroup().fromAST(t)})))},getConditionCount:function(){if(this.mainGroup){var t=this.mainGroup.conditions.length;return this.subGroups&&r.forEach(this.subGroups,o.hitch(this,(function(e){t+=e.conditions.length}))),t}return 0},_beforeLoad:function(){this.loader=new d({color:"#6dc5dc",bgColor:"#d0d0d0"}),this.loader.startup(),this.loader.placeAt(this.loaderDom),this._loaderTimeout=setTimeout(o.hitch(this,(function(){a.remove(this.loaderContainer,"hide")})),150)},_afterLoad:function(){a.add(this.loaderContainer,"hide"),a.remove(this.segmentContainer,"hide"),clearTimeout(this._loaderTimeout),this.loader.destroy()},onConditionCountChange:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(76)],void 0===(a=function(t,e,n){return t([n],{changeStateOnFocus:!0,viewClass:"view-mode",editClass:"edit-mode",viewMode:function(){e.add(this.domNode,this.viewClass),e.remove(this.domNode,this.editClass),this.onViewMode()},editMode:function(){e.add(this.domNode,this.editClass),e.remove(this.domNode,this.viewClass),this.onEditMode()},_onFocus:function(){this.inherited(arguments),this.changeStateOnFocus&&this.editMode()},_onBlur:function(){this.inherited(arguments),this.changeStateOnFocus&&this.viewMode()},onViewMode:function(){},onEditMode:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(93),n(151),n(2023),n(2024),n(1),n(6),n(4),n(3),n(9),n(7),n(5),n(2),n(73),n(74),n(41),n(65),n(111)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){return t([e,n,f],{type:"text",templateString:i,widgetsInTemplate:!0,maxColumns:2,splitOptions:[[[100]],[[50,50],[35,65],[65,35]]],postCreate:function(){this.block.splitOption instanceof Array||(this.block.splitOption=this._getSplitOptions()[this.block.splitOption]),this.inherited(arguments),this.columnSelectInput&&(this.sync("numberOfColumns",this.columnSelectInput,"value"),this.watch("numberOfColumns",o.hitch(this,(function(){for(var t=0;t<this.block.numberOfColumns;t++)null!==this.block.content[t]&&void 0!==this.block.content[t]||(this.block.content[t]=this.block._defaultText);this.block.set("splitOption",this._getSplitOptions()[0]),this.block.numberOfColumns-1<this.block.selectedColumn&&(this.block.set("selectedColumn",this.block.numberOfColumns-1),this._reloadEditor()),this._renderColumnSelection(),this._renderSplitIcons()}))),this.watch("selectedColumn",o.hitch(this,(function(){this._renderSplitIcons()}))),this._renderColumnSelection(),this._renderSplitIcons());var t=this;h(this.splitSelector,".mojoTextSplitLayout:click",(function(){t._selectSplitOption(this)})),this._setupPreservedContent()},_selectSplitOption:function(t){s(".mojoTextSplitLayout:selected",this.domNode).removeClass("selected"),l.add(t,"selected"),this.block.set("splitOption",this._getSplitOptions()[c.get(t,"data-split-option")])},_renderSplitIcons:function(){var t=null;u.forEach(this._getSplitOptions(),o.hitch(this,(function(e,n){e.toString()==this.block.splitOption.toString()&&(t=n)})));var e=this.getSplitIconTemplate().render(new m({selected:t,splits:this._getSplitOptions()}));r.place(e,this.splitSelector,"only"),s(this.splitSelectorSection).style("display",this.block.numberOfColumns>1?"block":"none")},_renderColumnSelection:function(){if(r.empty(this.columnSelector),this.block.numberOfColumns>1){document.getElementById("editor-pane").classList.add("multi-col");for(var t=0;t<this.block.numberOfColumns;t++){var e=r.create("div",{class:"inline-block padding-bottom--lv2 padding-right--lv5 font-weight--bold"}),n=r.create("a",{href:"#0","data-value":t,innerHTML:"Column "+(t+1),class:"c-editortabs_item inline-block small-meta"});this.block.selectedColumn===t&&l.add(n,"active"),r.place(n,e),r.place(e,this.columnSelector),this.connect(n,"click","_edit")}}else document.getElementById("editor-pane").classList.remove("multi-col")},startup:function(){this.showCKEditor(this.ckeditorContainer,this.timestampContainer,this._getCKContent(this.block.selectedColumn),o.hitch(this,"publishReady"))},show:function(){this.publishSetup()},_edit:function(t){t.stopPropagation(),t.preventDefault(),s("a",this.columnSelector).removeClass("active"),l.add(t.target,"active");var e=parseInt(c.get(t.target,"data-value"),10);this.block.content[this.block.selectedColumn]=this.editor.getData(),this.block.selectedColumn=e,this._reloadEditor()},_reloadEditor:function(){this.showCKEditor(this.ckeditorContainer,this.timeStampContainer,this._getCKContent(this.block.selectedColumn))},_getSplitOptions:function(){return this.splitOptions[this.block.numberOfColumns-1]},getSplitIconTemplate:function(){return this.iconTemplate||(this.iconTemplate=new dojox.dtl.Template(a)),this.iconTemplate},onCKChange:function(){var t=this.block.content;t[this.block.selectedColumn]=this.editor.getData(),this.block.set("content",t)},_getCKContent:function(t){return null!==this.block.content[t]&&void 0!==this.block.content[t]?this.block.content[t]:this.block._defaultText}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1),n(5),n(2),n(4),n(3),n(22),n(449),n(92),n(189),n(323),n(414),n(26),n(21),n(16),n(95),n(150),n(2078),n(2079),n(2080),n(2081)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C){return t([e,n,b],{storeMap:null,storeId:null,storeMismatchTemplate:null,storeMismatchTitleTemplate:null,constructor:function(t){this.storeMismatchTemplate=u(y),this.storeMismatchTitleTemplate=u(w),this.pRexStoreMismatchTemplate=u(_),this.pRexStoreMismatchTitleTemplate=u(C)},setupConnectAStore:function(){r.add(this.editorContainerWidget.domNode,"hide"),this.ActionButtonsPane&&r.add(this.ActionButtonsPane,"hide"),this.block.type?this.type=this.block.type:r.add(this.ConnectAStoreImage,"hide"),o(this.connectAStoreButton,"click",(function(){m.info("ecomm-blocks","Ecomm Blocks - ConnectAStore Button Clicked",{campaign_id:window.app.campaignId})})),o(this.connectAStoreCancelButton,"click",(function(){m.info("ecomm-blocks","Ecomm Blocks - ConnectAStore Cancel Button Clicked",{campaign_id:window.app.campaignId})})),r.remove(this.ConnectAStore,"hide"),this.onShow=function(){this.editorContainerWidget.destroyRecursive()}},setupStoreSection:function(){var t=this.getStores();a.forEach(t,i.hitch(this,(function(t){this.storeMap[t.store_id]=t}))),t.length>1?this._setupStoreDropdown(t):this._setupStoreLabel(),this.updateConfigurationFields()},getStores:function(){return window.app.allEcommStores},updateConfigurationFields:function(){},_setupStoreDropdown:function(t){this.block.storeId||(this.storeSelectDropdown.addOption({value:0,label:"Choose a Store&hellip;"}),this.block.set("storeId",0),this._disableSidebar()),o(this.storeSelectDropdown,"change",i.hitch(this,(function(t){t!==this.storeId&&(t?this._enableSidebar():this._disableSidebar(),this._updateStoreId(this.storeSelectDropdown.value),this.updateConfigurationFields(),this._updateStoreFlashblock())}))),a.forEach(t,i.hitch(this,(function(t){this.storeSelectDropdown.addOption({value:t.store_id,label:t.name,url:t.store_url})})));var e=window.app.ecommStores;0===this.block.storeId&&1===e.length&&(this.block.set("storeId",e[0].store_id),this._enableSidebar()),this._updateStoreId(this.block.storeId),r.remove(this.storeSelectContainer,"hide"),this._updateStoreFlashblock()},_updateStoreId:function(t){this.storeId=t,this.storeSelectDropdown&&this.sync("storeId",this.storeSelectDropdown,"value")},_setupStoreLabel:function(){var t,e=window.app.ecommStores,n=window.app.allEcommStores;1===e.length?t=e[0]:1===n.length&&(t=n[0]),this._updateStoreId(t.store_id),this._updateStoreFlashblock(),r.add(this.storeSelectContainer,"hide"),this.storeNameLabel.innerHTML=t.name,r.remove(this.oneStoreLabel,"hide")},_updateStoreFlashblock:function(){this.storeId&&this._getAssociatedListByStoreId(this.storeId).then(function(t){var e=c(window.app.memberLists,{listId:window.app.campaignListId});if(e&&e.listId!==t.listId){var n="productRec"===this.block.type?this.pRexStoreMismatchTitleTemplate:this.storeMismatchTitleTemplate,i="productRec"===this.block.type?this.pRexStoreMismatchTemplate:this.storeMismatchTemplate,a=n({campaignListName:e.name}),o=i({storesListName:t.name,campaignListName:e.name,storeName:this.storeMap[this.storeId].name}),l=new v({message:o,title:a,type:"info"});r.remove(this.storeInfo,"hide"),s.place(l.domNode,this.storeInfo,"only")}else r.add(this.storeInfo,"hide")}.bind(this))},_getAssociatedListByStoreId:function(t){var e=this._getStoreById(t),n=null;e&&(n=e.store_list_id);var i=new l;return window.app.memberLists?i.resolve(window.app.memberLists):p.list({merge_fields:"false"}).then((function(t){window.app.memberLists=t,i.resolve(t)})),i.then((function(t){return c(t,{listId:n})}))},_getStoreById:function(t){var e=window.app.allEcommStores;return c(e,{store_id:t})},_disableSidebar:function(){r.add(this.configurationFields,"disabled-container")},_enableSidebar:function(){r.remove(this.configurationFields,"disabled-container")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(91),n(2122)],void 0===(a=function(t,e,n){return t("mojo.neapolitan.email-renderers.TextBlock",[e],{outputTplStr:n,getSplitWidth:function(t,e){return Math.floor(t*(e/100))},getOutputModel:function(t){for(var e=[],n=t.containerWidth,i="string"==typeof t.content?[t.content]:t.content,a=0;a<t.numberOfColumns;a++){var o=t.splitOption[a],s=i[a]?i[a]:"";e.push({content:s,width:this.getSplitWidth(n,o)})}return{columns:e,columnCount:t.numberOfColumns,containerWidth:t.containerWidth}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(5),n(281),n(176),n(469)],void 0===(a=function(t,e,n,i,a){var o=t.getObject("tag.loop",!0,i);return o.CycleNode=t.extend((function(t,e,n,i){this.cyclevars=t,this.name=e,this.contents=n,this.shared=i||{counter:-1,map:{}}}),{render:function(t,e){t.forloop&&!t.forloop.counter0&&(this.shared.counter=-1),++this.shared.counter;var n=this.cyclevars[this.shared.counter%this.cyclevars.length],a=this.shared.map;return a[n]||(a[n]=new i._Filter(n)),n=a[n].resolve(t,e),this.name&&(t[this.name]=n),this.contents.set(n),this.contents.render(t,e)},unrender:function(t,e){return this.contents.unrender(t,e)},clone:function(t){return new this.constructor(this.cyclevars,this.name,this.contents.clone(t),this.shared)}}),o.IfChangedNode=t.extend((function(t,n,i){this.nodes=t,this._vars=n,this.shared=i||{last:null,counter:0},this.vars=e.map(n,(function(t){return new dojox.dtl._Filter(t)}))}),{render:function(t,i){var a;if(t.forloop&&(t.forloop.counter<=this.shared.counter&&(this.shared.last=null),this.shared.counter=t.forloop.counter),(a=this.vars.length?n.toJson(e.map(this.vars,(function(e){return e.resolve(t)}))):this.nodes.dummyRender(t,i))!=this.shared.last){var o=null===this.shared.last;this.shared.last=a,(t=t.push()).ifchanged={firstloop:o},i=this.nodes.render(t,i),t=t.pop()}else i=this.nodes.unrender(t,i);return i},unrender:function(t,e){return this.nodes.unrender(t,e)},clone:function(t){return new this.constructor(this.nodes.clone(t),this._vars,this.shared)}}),o.RegroupNode=t.extend((function(t,e,n){this._expression=t,this.expression=new i._Filter(t),this.key=e,this.alias=n}),{_push:function(t,e,n){n.length&&t.push({grouper:e,list:n})},render:function(t,e){t[this.alias]=[];var n=this.expression.resolve(t);if(n){for(var i=null,a=[],o=0;o<n.length;o++){var s=n[o][this.key];i!==s?(this._push(t[this.alias],i,a),i=s,a=[n[o]]):a.push(n[o])}this._push(t[this.alias],i,a)}return e},unrender:function(t,e){return e},clone:function(t,e){return this}}),t.mixin(o,{cycle:function(t,e){var n=e.split_contents();if(n.length<2)throw new Error("'cycle' tag requires at least two arguments");if(-1!=n[1].indexOf(",")){var i=n[1].split(",");n=[n[0]];for(var a=0;a<i.length;a++)n.push('"'+i[a]+'"')}if(2==n.length){var s=n[n.length-1];if(!t._namedCycleNodes)throw new Error("No named cycles in template: '"+s+"' is not defined");if(!t._namedCycleNodes[s])throw new Error("Named cycle '"+s+"' does not exist");return t._namedCycleNodes[s]}if(n.length>4&&"as"==n[n.length-2]){s=n[n.length-1];var r=new o.CycleNode(n.slice(1,n.length-2),s,t.create_text_node());t._namedCycleNodes||(t._namedCycleNodes={}),t._namedCycleNodes[s]=r}else r=new o.CycleNode(n.slice(1),null,t.create_text_node());return r},ifchanged:function(t,e){var n=e.contents.split(),i=t.parse(["endifchanged"]);return t.delete_first_token(),new o.IfChangedNode(i,n.slice(1))},regroup:function(t,e){var n=a(e.contents,/(\s+)/g,(function(t){return t}));if(n.length<11||"as"!=n[n.length-3]||"by"!=n[n.length-7])throw new Error("Expected the format: regroup list by key as newList");var i=n.slice(2,-8).join(""),s=n[n.length-5],r=n[n.length-1];return new o.RegroupNode(i,s,r)}}),o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(278),n(2177)],void 0===(a=function(t,e,n){var i={center:"center",left:"flex-start",right:"flex-end"};return t("mojo.neapolitan.email-renderers.ButtonBlock",[e],{outputTplStr:n,getOutputModel:function(t){return{totalPadding:2*this.outerPadding,buttonText:t.buttonText,align:i[t.align||"center"],buttonWidth:t.buttonWidth,target:t.link&&t.link.attrs.target?t.link.attrs.target:"_blank",href:t.link?t.link.href:"#",linkClasses:t.link?t.link.attrs.class:"",title:t.link&&t.link.attrs.title?t.link.attrs.title:t.buttonText,id:t.buttonId||0}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(17),n(16)],void 0===(a=function(t,e,n){var i="page";return t(null,{_getButtonStyles:function(t){return t===i?[{name:"Button style",selector:".mcnButtonContentContainer",props:{border:{value:""},"border-radius":{value:"4px",unit:"px",minimum:0,maximum:50,wholeNumbersOnly:!0},"background-color":{value:"#2BAADF"},"box-shadow":{value:"none"},"padding-top":{value:"18px"},"padding-left":{value:"18px"},"padding-bottom":{value:"18px"},"padding-right":{value:"18px"}}},{name:"Button text style",selector:".mcnButton",props:{color:{value:"#FFFFFF",selector:".mcnButton"},"font-family":{value:"Arial"},"font-size":{value:"16px"},"font-weight":{value:"bold"},"letter-spacing":{value:"normal"}}}]:[{name:"Button style",selector:".mcnButtonContentContainer",props:{border:{value:""},"border-radius":{value:"4px",unit:"px",minimum:0,maximum:50,wholeNumbersOnly:!0},"background-color":{value:"#2BAADF"}}},{name:"Button text style",selector:".mcnButtonContent",props:{color:{value:"#FFFFFF",selector:".mcnButtonContent .mcnButton"},"font-family":{value:"Arial"},"font-size":{value:"16px"},"font-weight":{value:"bold",selector:".mcnButtonContent .mcnButton"},"letter-spacing":{value:"normal",selector:".mcnButtonContent .mcnButton"},padding:{value:"18px"}}}]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(0),n(47),n(6),n(4),n(5),n(73),n(277),n(74),n(263),n(696)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return e([n],{outputTplStr:c,html:"",links:[],linkVisibilityMap:{},layoutSettings:{orientation:"horizontal",position:"static"},containerStyles:"position: static; text-align: center;",logoStyles:"float: left;",navigationStyles:"float: right;",logo:null,enabled:!1,useBrand:!1,styles:[{name:"Navigation Menu",selector:".mc-nav-container",props:{"background-color":{value:"#FFFFFF",isOptional:!1}}},{name:"Link Text",selector:".menu-item a",props:{color:{value:"#282828"},"font-family":{value:"Arial"},"font-size":{value:"14px"},"font-weight":{value:"normal"},"line-height":{value:"150%"},"letter-spacing":{value:"normal"}}},{name:"Mobile Menu Icon Color",selector:".mclp-wrapper .bar",props:{"background-color":{value:"#282828",isOptional:!1}}}],getContent:function(e){var n=this,i=e?this.links.filter((function(t){return!t.pageId||(n.linkVisibilityMap[t.pageId]||t.isActive)})).map((function(t){return{text:t.text,linkId:t.linkId,link:"#"}})):this.links;if(!this.enabled)return a.create("div");this.template||(this.template=new s.Template(this.outputTplStr));var o=new l({title:this.layoutSettings.orientation,links:i}),r=a.toDom(t.trim(this.template.render(o)));return d.inline(r,this.styles)},getMarkup:function(){var t=this.getContent(),e=(t.outerHTML,a.create("div"));a.place(t,e);var n=i(e).html();return a.destroy(),n}})}.apply(e,i))||(t.exports=a)},,function(t,e){t.exports={buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"}},function(t,e,n){var i,a;i=[n(0),n(1),n(29)],void 0===(a=function(t,e,n){return t(n,{hide:function(){this.inherited(arguments),setTimeout(e.hitch(this,this.destroyRecursive),500)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(23),n(1),n(10),n(4),n(66),n(428),n(2),n(53),n(119),n(502)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h=e("dojo.dnd.Selector",u,{constructor:function(t,e){e||(e={}),this.singular=e.singular,this.autoSync=e.autoSync,this.selection={},this.anchor=null,this.simpleSelection=!1,this.events.push(l(this.node,d.press,i.hitch(this,"onMouseDown")),l(this.node,d.release,i.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var t=new r,e=c._empty;for(var n in this.selection)n in e||t.push(a.byId(n));return t},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){return this.forInItems((function(t,e){this._addItemClass(a.byId(e),"Selected"),this.selection[e]=1}),this),this._removeAnchor()},deleteSelectedNodes:function(){var t=c._empty;for(var e in this.selection)if(!(e in t)){var n=a.byId(e);this.delItem(e),o.destroy(n)}return this.anchor=null,this.selection={},this},forInSelectedItems:function(t,e){e=e||n.global;var i=this.selection,a=c._empty;for(var o in i)o in a||t.call(e,this.getItem(o),o,this)},sync:function(){h.superclass.sync.call(this),this.anchor&&(this.getItem(this.anchor.id)||(this.anchor=null));var e=[],n=c._empty;for(var i in this.selection)i in n||this.getItem(i)||e.push(i);return t.forEach(e,(function(t){delete this.selection[t]}),this),this},insertNodes:function(t,e,n,i){var a=this._normalizedCreator;return this._normalizedCreator=function(e,n){var i=a.call(this,e,n);return t?(this.anchor?this.anchor!=i.node&&(this._removeItemClass(i.node,"Anchor"),this._addItemClass(i.node,"Selected")):(this.anchor=i.node,this._removeItemClass(i.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[i.node.id]=1):(this._removeItemClass(i.node,"Selected"),this._removeItemClass(i.node,"Anchor")),i},h.superclass.insertNodes.call(this,e,n,i),this._normalizedCreator=a,this},destroy:function(){h.superclass.destroy.call(this),this.selection=this.anchor=null},onMouseDown:function(t){if(this.autoSync&&this.sync(),this.current){if(!this.singular&&!c.getCopyKeyState(t)&&!t.shiftKey&&this.current.id in this.selection)return this.simpleSelection=!0,void(s.isLeft(t)&&(t.stopPropagation(),t.preventDefault()));if(!this.singular&&t.shiftKey){c.getCopyKeyState(t)||this._removeSelection();var e=this.getAllNodes();if(e.length&&(this.anchor||(this.anchor=e[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var n,i=0;i<e.length&&((n=e[i])!=this.anchor&&n!=this.current);++i);for(++i;i<e.length&&((n=e[i])!=this.anchor&&n!=this.current);++i)this._addItemClass(n,"Selected"),this.selection[n.id]=1;this._addItemClass(this.current,"Selected"),this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?c.getCopyKeyState(t)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):c.getCopyKeyState(t)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);t.stopPropagation(),t.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=l(this.node,d.move,i.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var t=c._empty;for(var e in this.selection)if(!(e in t)){var n=a.byId(e);n&&this._removeItemClass(n,"Selected")}return this.selection={},this},_removeAnchor:function(){return this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null),this}});return h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(23),n(1),n(32),n(10),n(3),n(4),n(71),n(34),n(2),n(6),n(53),n(119)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){var m=e("dojo.dnd.Container",l,{skipForm:!1,allowNested:!1,constructor:function(t,e){this.node=o.byId(t),e||(e={}),this.creator=e.creator||null,this.skipForm=e.skipForm,this.parent=e.dropParent&&o.byId(e.dropParent),this.map={},this.current=null,this.containerState="",s.add(this.node,"dojoDndContainer"),e&&e._skipStartup||this.startup(),this.events=[c(this.node,h.over,i.hitch(this,"onMouseOver")),c(this.node,h.out,i.hitch(this,"onMouseOut")),c(this.node,"dragstart",i.hitch(this,"onSelectStart")),c(this.node,"selectstart",i.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(t){return this.map[t]},setItem:function(t,e){this.map[t]=e},delItem:function(t){delete this.map[t]},forInItems:function(t,e){e=e||n.global;var i=this.map,a=p._empty;for(var o in i)o in a||t.call(e,i[o],o,this);return e},clearItems:function(){this.map={}},getAllNodes:function(){return u((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var t={};return this.getAllNodes().forEach((function(e){if(e.id){var n=this.getItem(e.id);if(n)return void(t[e.id]=n)}else e.id=p.getUniqueId();var i=e.getAttribute("dndType"),a=e.getAttribute("dndData");t[e.id]={data:a||e.innerHTML,type:i?i.split(/\s*,\s*/):["text"]}}),this),this.map=t,this},insertNodes:function(t,e,n){var i,a;if(this.parent.firstChild?e?n||(n=this.parent.firstChild):n&&(n=n.nextSibling):n=null,n)for(i=0;i<t.length;++i)a=this._normalizedCreator(t[i]),this.setItem(a.node.id,{data:a.data,type:a.type}),n.parentNode.insertBefore(a.node,n);else for(i=0;i<t.length;++i)a=this._normalizedCreator(t[i]),this.setItem(a.node.id,{data:a.data,type:a.type}),this.parent.appendChild(a.node);return this},destroy:function(){t.forEach(this.events,(function(t){t.remove()})),this.clearItems(),this.node=this.parent=this.current=null},markupFactory:function(t,e,n){return t._skipStartup=!0,new n(e,t)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var t=this.parent.getElementsByTagName("tbody");t&&t.length&&(this.parent=t[0])}this.defaultCreator=p._defaultCreator(this.parent),this.sync()},onMouseOver:function(t){for(var e=t.relatedTarget;e&&e!=this.node;)try{e=e.parentNode}catch(t){e=null}e||(this._changeState("Container","Over"),this.onOverEvent()),e=this._getChildByEvent(t),this.current!=e&&(this.current&&this._removeItemClass(this.current,"Over"),e&&this._addItemClass(e,"Over"),this.current=e)},onMouseOut:function(t){for(var e=t.relatedTarget;e;){if(e==this.node)return;try{e=e.parentNode}catch(t){e=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null),this._changeState("Container",""),this.onOutEvent()},onSelectStart:function(t){this.skipForm&&p.isFormElement(t)||(t.stopPropagation(),t.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(t,e){var n="dojoDnd"+t,i=t.toLowerCase()+"State";s.replace(this.node,n+e,n+this[i]),this[i]=e},_addItemClass:function(t,e){s.add(t,"dojoDndItem"+e)},_removeItemClass:function(t,e){s.remove(t,"dojoDndItem"+e)},_getChildByEvent:function(t){var e=t.target;if(e)for(var n=e.parentNode;n;n=(e=n).parentNode)if((n==this.parent||this.allowNested)&&s.contains(e,"dojoDndItem"))return e;return null},_normalizedCreator:function(t,e){var n=(this.creator||this.defaultCreator).call(this,t,e);return i.isArray(n.type)||(n.type=["text"]),n.node.id||(n.node.id=p.getUniqueId()),s.add(n.node,"dojoDndItem"),n}});return p._createNode=function(t){return t?function(e){return r.create(t,{innerHTML:e})}:p._createSpan},p._createTrTd=function(t){var e=r.create("tr");return r.create("td",{innerHTML:t},e),e},p._createSpan=function(t){return r.create("span",{innerHTML:t})},p._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"},p._defaultCreator=function(t){var e=t.tagName.toLowerCase(),n="tbody"==e||"thead"==e?p._createTrTd:p._createNode(p._defaultCreatorNodes[e]);return function(t,e){var a,o,s,r=t&&i.isObject(t);return r&&t.tagName&&t.nodeType&&t.getAttribute?(a=t.getAttribute("dndData")||t.innerHTML,o=(o=t.getAttribute("dndType"))?o.split(/\s*,\s*/):["text"],s=t):(a=r&&t.data?t.data:t,o=r&&t.type?t.type:["text"],s=("avatar"==e?p._createSpan:n)(String(a))),s.id||(s.id=p.getUniqueId()),{node:s,data:a,type:o}}},m}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(32),n(10),n(7),n(3),n(4),n(332),n(6)],void 0===(a=function(t,e,n,i,a,o,s,r){return t("dojo.dnd.Avatar",null,{constructor:function(t){this.manager=t,this.construct()},construct:function(){var t,e=o.create("table",{class:"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),n=this.manager.source,a=o.create("tbody",null,e),r=o.create("tr",null,a),l=o.create("td",null,r),d=Math.min(5,this.manager.nodes.length),c=0;for(s("highcontrast")&&o.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},l),o.create("span",{innerHTML:n.generateText?this._generateText():""},l),i.set(r,{class:"dojoDndAvatarHeader",style:{opacity:.9}});c<d;++c){if(n.creator)t=n._normalizedCreator(n.getItem(this.manager.nodes[c].id).data,"avatar").node;else if("tr"==(t=this.manager.nodes[c].cloneNode(!0)).tagName.toLowerCase()){var u=o.create("table");o.create("tbody",null,u).appendChild(t),t=u}t.id="",r=o.create("tr",null,a),(l=o.create("td",null,r)).appendChild(t),i.set(r,{class:"dojoDndAvatarItem",style:{opacity:(9-c)/10}})}this.node=e},destroy:function(){o.destroy(this.node),this.node=!1},update:function(){if(a.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag),s("highcontrast")){var t=n.byId("a11yIcon"),e="+";this.manager.canDropFlag&&!this.manager.copy?e="< ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(e="x"):e="o",t.innerHTML=e}r("tr.dojoDndAvatarHeader td span"+(s("highcontrast")?" span":""),this.node).forEach((function(t){t.innerHTML=this.manager.source.generateText?this._generateText():""}),this)},_generateText:function(){return this.manager.nodes.length.toString()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[t,n(40),n(282),n(240),n(1088),n(1),n(51),n(6),n(34),n(10),n(4),n(32),n(81)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h="dojo_request_iframe",p=h+"_onload";function m(t){return!this.isFulfilled()}function g(t){return!!this._finished}function f(t,e){if(!e)try{var n=t.options,i=y.doc(y._frame),s=n.handleAs;if("html"!==s){if("xml"===s)if("html"===i.documentElement.tagName.toLowerCase()){r("a",i.documentElement).orphan();var l=i.documentElement.innerText;l=l.replace(/>\s+</g,"><"),t.text=o.trim(l)}else t.data=i;else t.text=i.getElementsByTagName("textarea")[0].value;a(t)}else t.data=i}catch(t){e=t}e?this.reject(e):this._finished?this.resolve(t):this.reject(new Error("Invalid dojo/request/iframe request state"))}function v(t){this._callNext()}u.global[p]||(u.global[p]=function(){var t=y._currentDfd;if(t){var e=t.response.options,n=d.byId(e.form)||t._tmpForm;if(n){for(var i=t._contentToClean,a=0;a<i.length;a++)for(var o=i[a],s=0;s<n.childNodes.length;s++){var r=n.childNodes[s];if(r.name===o){c.destroy(r);break}}t._originalAction&&n.setAttribute("action",t._originalAction),t._originalMethod&&(n.setAttribute("method",t._originalMethod),n.method=t._originalMethod),t._originalTarget&&(n.setAttribute("target",t._originalTarget),n.target=t._originalTarget)}t._tmpForm&&(c.destroy(t._tmpForm),delete t._tmpForm),t._finished=!0}else y._fireNextRequest()});var b={method:"POST"};function y(t,e,a){var o=i.parseArgs(t,i.deepCreate(b,e),!0);if(t=o.url,"GET"!==(e=o.options).method&&"POST"!==e.method)throw new Error(e.method+" not supported by dojo/request/iframe");y._frame||(y._frame=y.create(y._iframeName,p+"();"));var s=i.deferred(o,null,m,g,f,v);return s._callNext=function(){this._calledNext||(this._calledNext=!0,y._currentDfd=null,y._fireNextRequest())},s._legacy=a,y._dfdQueue.push(s),y._fireNextRequest(),n(s),a?s:s.promise}return y.create=function(t,n,i){if(u.global[t])return u.global[t];if(u.global.frames[t])return u.global.frames[t];i||(l("config-useXDomain")&&!l("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),i=l("config-dojoBlankHtmlUrl")||e.toUrl("dojo/resources/blank.html"));var a=c.place('<iframe id="'+t+'" name="'+t+'" src="'+i+'" onload="'+n+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',u.body());return u.global[t]=a,a},y.doc=function(t){if(t.contentDocument)return t.contentDocument;var e=t.name;if(e){var n=u.doc.getElementsByTagName("iframe");if(t.document&&n[e].contentWindow&&n[e].contentWindow.document)return n[e].contentWindow.document;if(u.doc.frames[e]&&u.doc.frames[e].document)return u.doc.frames[e].document}return null},y.setSrc=function(t,e,n){var i=u.global.frames[t.name];i.contentWindow&&(i=i.contentWindow);try{n?i.location.replace(e):i.location=e}catch(t){console.log("dojo/request/iframe.setSrc: ",t)}},y._iframeName=h+"_IoIframe",y._notifyStart=function(){},y._dfdQueue=[],y._currentDfd=null,y._fireNextRequest=function(){var t;try{if(y._currentDfd||!y._dfdQueue.length)return;do{t=y._currentDfd=y._dfdQueue.shift()}while(t&&(t.canceled||t.isCanceled&&t.isCanceled())&&y._dfdQueue.length);if(!t||t.canceled||t.isCanceled&&t.isCanceled())return void(y._currentDfd=null);var e,n=t.response,a=n.options,r=t._contentToClean=[],l=d.byId(a.form),p=i.notify,m=a.data||null;if(t._legacy||"POST"!==a.method||l?"GET"===a.method&&l&&n.url.indexOf("?")>-1&&(e=n.url.slice(n.url.indexOf("?")+1),m=o.mixin(s.queryToObject(e),m)):l=t._tmpForm=c.create("form",{name:h+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},u.body()),l){if(!t._legacy){var g=l;do{g=g.parentNode}while(g&&g!==u.doc.documentElement);g||(l.style.position="absolute",l.style.left="-1000px",l.style.top="-1000px",u.body().appendChild(l)),l.name||(l.name=h+"_form")}if(m){var f=function(t,e){c.create("input",{type:"hidden",name:t,value:e},l),r.push(t)};for(var v in m){var b=m[v];if(o.isArray(b)&&b.length>1)for(var w=0;w<b.length;w++)f(v,b[w]);else l[v]?l[v].value=b:f(v,b)}}var _=l.getAttributeNode("action"),C=l.getAttributeNode("method"),k=l.getAttributeNode("target");n.url&&(t._originalAction=_?_.value:null,_?_.value=n.url:l.setAttribute("action",n.url)),t._legacy?C&&C.value||(C?C.value=a.method:l.setAttribute("method",a.method)):(t._originalMethod=C?C.value:null,C?C.value=a.method:l.setAttribute("method",a.method)),t._originalTarget=k?k.value:null,k?k.value=y._iframeName:l.setAttribute("target",y._iframeName),l.target=y._iframeName,p&&p.emit("send",n,t.promise.cancel),y._notifyStart(n),l.submit()}else{var S="";n.options.data&&"string"!=typeof(S=n.options.data)&&(S=s.objectToQuery(S));var x=n.url+(n.url.indexOf("?")>-1?"&":"?")+S;p&&p.emit("send",n,t.promise.cancel),y._notifyStart(n),y.setSrc(y._frame,x,!0)}}catch(e){t.reject(e)}},i.addCommonMethods(y,["GET","POST"]),y}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(23),n(14)],void 0===(a=function(t,e,n,i){var a=e("dijit.WidgetSet",null,{constructor:function(){this._hash={},this.length=0},add:function(t){if(this._hash[t.id])throw new Error("Tried to register widget with id=="+t.id+" but that id is already registered");this._hash[t.id]=t,this.length++},remove:function(t){this._hash[t]&&(delete this._hash[t],this.length--)},forEach:function(t,e){e=e||n.global;var i,a=0;for(i in this._hash)t.call(e,this._hash[i],a++,this._hash);return this},filter:function(t,e){e=e||n.global;var i,o=new a,s=0;for(i in this._hash){var r=this._hash[i];t.call(e,r,s++,this._hash)&&o.add(r)}return o},byId:function(t){return this._hash[t]},byClass:function(t){var e,n,i=new a;for(e in this._hash)(n=this._hash[e]).declaredClass==t&&i.add(n);return i},toArray:function(){var t=[];for(var e in this._hash)t.push(this._hash[e]);return t},map:function(e,n){return t.map(this.toArray(),e,n)},every:function(t,e){e=e||n.global;var i,a=0;for(i in this._hash)if(!t.call(e,this._hash[i],a++,this._hash))return!1;return!0},some:function(t,e){e=e||n.global;var i,a=0;for(i in this._hash)if(t.call(e,this._hash[i],a++,this._hash))return!0;return!1}});return t.forEach(["forEach","filter","byClass","map","every","some"],(function(t){i[t]=a.prototype[t]})),a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(10),n(1),n(33),n(32),n(62)],void 0===(a=function(t,e,n,i,a,o){var s=function(s){var r=s.document;this.getType=function(){if(r.getSelection){var t,e="text";try{t=s.getSelection()}catch(t){}if(t&&1==t.rangeCount){var n=t.getRangeAt(0);n.startContainer==n.endContainer&&n.endOffset-n.startOffset==1&&3!=n.startContainer.nodeType&&(e="control")}return e}return r.selection.type.toLowerCase()},this.getSelectedText=function(){if(r.getSelection){var t=s.getSelection();return t?t.toString():""}return"control"==this.getType()?null:r.selection.createRange().text},this.getSelectedHtml=function(){if(r.getSelection){var t=s.getSelection();if(t&&t.rangeCount){var e,n="";for(e=0;e<t.rangeCount;e++){var i=t.getRangeAt(e).cloneContents(),a=r.createElement("div");a.appendChild(i),n+=a.innerHTML}return n}return null}return"control"==this.getType()?null:r.selection.createRange().htmlText},this.getSelectedElement=function(){if("control"==this.getType()){if(r.getSelection){var t=s.getSelection();return t.anchorNode.childNodes[t.anchorOffset]}var e=r.selection.createRange();if(e&&e.item)return r.selection.createRange().item(0)}return null},this.getParentElement=function(){if("control"==this.getType()){var t=this.getSelectedElement();if(t)return t.parentNode}else{if(!r.getSelection){var e=r.selection.createRange();return e.collapse(!0),e.parentElement()}var n=r.getSelection();if(n){for(var i=n.anchorNode;i&&1!=i.nodeType;)i=i.parentNode;return i}}return null},this.hasAncestorElement=function(t){return null!=this.getAncestorElement.apply(this,arguments)},this.getAncestorElement=function(t){var e=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(e,arguments)},this.isTag=function(t,e){if(t&&t.tagName)for(var n=t.tagName.toLowerCase(),i=0;i<e.length;i++){var a=String(e[i]).toLowerCase();if(n==a)return a}return""},this.getParentOfType=function(t,e){for(;t;){if(this.isTag(t,e).length)return t;t=t.parentNode}return null},this.collapse=function(t){if(r.getSelection){var e=s.getSelection();e.removeAllRanges?t?e.collapseToStart():e.collapseToEnd():e.collapse(t)}else{var n=r.selection.createRange();n.collapse(t),n.select()}},this.remove=function(){var t=r.selection;return r.getSelection?((t=s.getSelection()).deleteFromDocument(),t):("none"!=t.type.toLowerCase()&&t.clear(),t)},this.selectElementChildren=function(t,n){var a;if(t=e.byId(t),r.getSelection){var o=s.getSelection();i("opera")?((a=o.rangeCount?o.getRangeAt(0):r.createRange()).setStart(t,0),a.setEnd(t,3==t.nodeType?t.length:t.childNodes.length),o.addRange(a)):o.selectAllChildren(t)}else if((a=t.ownerDocument.body.createTextRange()).moveToElementText(t),!n)try{a.select()}catch(t){}},this.selectElement=function(t,n){var o;if(t=e.byId(t),r.getSelection){var s=r.getSelection();o=r.createRange(),s.removeAllRanges&&(i("opera")&&s.getRangeAt(0)&&(o=s.getRangeAt(0)),o.selectNode(t),s.removeAllRanges(),s.addRange(o))}else try{var l=t.tagName?t.tagName.toLowerCase():"";(o="img"===l||"table"===l?a.body(r).createControlRange():a.body(r).createRange()).addElement(t),n||o.select()}catch(e){this.selectElementChildren(t,n)}},this.inSelection=function(t){var e,n;if(t)if(r.getSelection){var i=s.getSelection();if(i&&i.rangeCount>0&&(n=i.getRangeAt(0)),n&&n.compareBoundaryPoints&&r.createRange)try{if((e=r.createRange()).setStart(t,0),1===n.compareBoundaryPoints(n.START_TO_END,e))return!0}catch(t){}}else{n=r.selection.createRange();try{(e=t.ownerDocument.body.createTextRange()).moveToElementText(t)}catch(t){}if(n&&e&&1===n.compareEndPoints("EndToStart",e))return!0}return!1},this.getBookmark=function(){var t,e,n,i=r.selection,a=o.curNode;if(r.getSelection){if(i=s.getSelection())if(i.isCollapsed){if((n=a?a.tagName:"")&&("textarea"==(n=n.toLowerCase())||"input"==n&&(!a.type||"text"==a.type.toLowerCase())))return{isCollapsed:(i={start:a.selectionStart,end:a.selectionEnd,node:a,pRange:!0}).end<=i.start,mark:i};t={isCollapsed:!0},i.rangeCount&&(t.mark=i.getRangeAt(0).cloneRange())}else t={isCollapsed:!1,mark:(e=i.getRangeAt(0)).cloneRange()}}else if(i){if(n=(n=a?a.tagName:"").toLowerCase(),a&&n&&("button"==n||"textarea"==n||"input"==n))return i.type&&"none"==i.type.toLowerCase()?{isCollapsed:!0,mark:null}:{isCollapsed:!(e=i.createRange()).text||!e.text.length,mark:{range:e,pRange:!0}};t={};try{e=i.createRange(),t.isCollapsed=!("Text"==i.type?e.htmlText.length:e.length)}catch(e){return t.isCollapsed=!0,t}if("CONTROL"==i.type.toUpperCase())if(e.length){t.mark=[];for(var l=0,d=e.length;l<d;)t.mark.push(e.item(l++))}else t.isCollapsed=!0,t.mark=null;else t.mark=e.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return t},this.moveToBookmark=function(e){var i=e.mark;if(i)if(r.getSelection){var a=s.getSelection();if(a&&a.removeAllRanges)if(i.pRange){var o=i.node;o.selectionStart=i.start,o.selectionEnd=i.end}else a.removeAllRanges(),a.addRange(i);else console.warn("No idea how to restore selection for this browser!")}else if(r.selection&&i){var l;i.pRange?l=i.range:n.isArray(i)?(l=r.body.createControlRange(),t.forEach(i,(function(t){l.addElement(t)}))):(l=r.body.createTextRange()).moveToBookmark(i),l.select()}},this.isCollapsed=function(){return this.getBookmark().isCollapsed}},r=new s(window);return r.SelectionManager=s,r}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(1),n(49),n(242),n(42)],void 0===(a=function(t,e,n,i,a){var o={getViewport:function(){return n.getBox()}};return o.placeOnScreen=i.at,o.placeOnScreenAroundElement=function(t,n,a,o){var s;if(e.isArray(a))s=a;else for(var r in s=[],a)s.push({aroundCorner:r,corner:a[r]});return i.around(t,n,s,!0,o)},o.placeOnScreenAroundNode=o.placeOnScreenAroundElement,o.placeOnScreenAroundRectangle=o.placeOnScreenAroundElement,o.getPopupAroundAlignment=function(e,n){var i={};return t.forEach(e,(function(t){var e=n;switch(t){case"after":i[n?"BR":"BL"]=n?"BL":"BR";break;case"before":i[n?"BL":"BR"]=n?"BR":"BL";break;case"below-alt":e=!e;case"below":i[e?"BL":"BR"]=e?"TL":"TR",i[e?"BR":"BL"]=e?"TR":"TL";break;case"above-alt":e=!e;case"above":default:i[e?"TL":"TR"]=e?"BL":"BR",i[e?"TR":"TL"]=e?"BR":"BL"}})),i},e.mixin(a,o),a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(3),n(32),n(106),n(161)],void 0===(a=function(t,e,n){var i=n._createWrapper;n._createWrapper=function(n){return n.declaredClass||(n={_popupWrapper:n.parentNode&&t.contains(n.parentNode,"dijitPopup")?n.parentNode:null,domNode:n,destroy:function(){},ownerDocument:n.ownerDocument,ownerDocumentBody:e.body(n.ownerDocument)}),i.call(this,n)};var a=n.open;return n.open=function(t){if(t.orient&&"string"!=typeof t.orient&&!("length"in t.orient)){var e=[];for(var n in t.orient)e.push({aroundCorner:n,corner:t.orient[n]});t.orient=e}return a.call(this,t)},n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(49),n(42)],void 0===(a=function(t,e){e.scrollIntoView=function(e,n){t.scrollIntoView(e,n)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(335)],void 0===(a=function(){}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(285)],void 0===(a=function(){}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(7),n(1),n(42),n(209)],void 0===(a=function(t,e,n){var i={hasWaiRole:function(t,e){var n=this.getWaiRole(t);return e?n.indexOf(e)>-1:n.length>0},getWaiRole:function(n){return e.trim((t.get(n,"role")||"").replace("wairole:",""))},setWaiRole:function(e,n){t.set(e,"role",n)},removeWaiRole:function(n,i){var a=t.get(n,"role");if(a)if(i){var o=e.trim((" "+a+" ").replace(" "+i+" "," "));t.set(n,"role",o)}else n.removeAttribute("role")},hasWaiState:function(t,e){return t.hasAttribute?t.hasAttribute("aria-"+e):!!t.getAttribute("aria-"+e)},getWaiState:function(t,e){return t.getAttribute("aria-"+e)||""},setWaiState:function(t,e,n){t.setAttribute("aria-"+e,n)},removeWaiState:function(t,e){t.removeAttribute("aria-"+e)}};return e.mixin(n,i),n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(49),n(42)],void 0===(a=function(t,e){e.getDocumentWindow=function(e){return t.get(e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(0),n(1092),n(516),n(1096)],void 0===(a=function(t,e,n,i,a){return e("dijit.layout.TabContainer",n,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(e){var n=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new("string"==typeof this.controllerWidget?t.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,class:n,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},e)},postMixInProperties:function(){this.inherited(arguments),this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?i:a)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(2),n(5),n(30),n(0),n(34),n(84)],void 0===(a=function(t,e,n,i,a,o){var s=i("dijit._OnDijitClickMixin",null,{connect:function(t,e,n){return this.inherited(arguments,[t,"ondijitclick"==e?o:e,n])}});return s.a11yclick=o,s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(10),n(7),n(3),n(34),n(83),n(1),n(701),n(14),n(431),n(113),n(1095),n(499)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h=t("dijit.layout._TabButton",r.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:u,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments),e.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var t=this.domNode;this.defer((function(){t.className=t.className}),1)},_setCloseButtonAttr:function(t){if(this._set("closeButton",t),i.toggle(this.domNode,"dijitClosable",t),this.closeNode.style.display=t?"":"none",t){var e=o.getLocalization("dijit","common");this.closeNode&&n.set(this.closeNode,"title",e.itemClose)}},_setDisabledAttr:function(t){if(this.inherited(arguments),this.closeNode)if(t)n.remove(this.closeNode,"title");else{var e=o.getLocalization("dijit","common");n.set(this.closeNode,"title",e.itemClose)}},_setLabelAttr:function(t){this.inherited(arguments),this.showLabel||this.params.title||(this.iconNode.alt=s.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});var p=t("dijit.layout.TabController",r,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:h,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var t=new d({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(t){return i.contains(t,"dijitClosable")&&!i.contains(t,"dijitTabDisabled")}});this.own(t);var e=o.getLocalization("dijit","common"),n=this;t.addChild(new c({label:e.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(t){var e=l.byNode(this.getParent().currentTarget);n.onCloseButtonClick(e.page)}}))}});return p.TabButton=h,p}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(10),n(34),n(14)],void 0===(a=function(t,e,n,i){return t("dijit.form._ButtonMixin",null,{label:"",type:"button",__onClick:function(t){return t.stopPropagation(),t.preventDefault(),this.disabled||this.valueNode.click(t),!1},_onClick:function(t){if(this.disabled)return t.stopPropagation(),t.preventDefault(),!1;!1===this.onClick(t)&&t.preventDefault();var e=t.defaultPrevented;if(!e&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var n=this.domNode;n.parentNode;n=n.parentNode){var a=i.byNode(n);if(a&&"function"==typeof a._onSubmit){a._onSubmit(t),t.preventDefault(),e=!0;break}}return!e},postCreate:function(){this.inherited(arguments),e.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(t){this._set("label",t),(this.containerNode||this.focusNode).innerHTML=t}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\ttabIndex="-1" role="presentation" aria-hidden="true" data-dojo-attach-point="valueNode"\n/></span>\n'},function(t,e){t.exports='<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n'},function(t,e,n){var i,a;i=[n(5),n(0),n(10),n(7),n(3),n(1),n(66),n(2),n(49),n(84),n(14),n(25),n(178),n(521),n(11)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){return e("dijit._MenuBase",[u,m,p,h],{selected:null,_setSelectedAttr:function(t){this.selected!=t&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),t&&t._setSelected(!0),this._set("selected",t))},activated:!1,_setActivatedAttr:function(t){a.toggle(this.domNode,"dijitMenuActive",t),a.toggle(this.domNode,"dijitMenuPassive",!t),this._set("activated",t)},parentMenu:null,popupDelay:500,passivePopupDelay:1/0,autoFocus:!1,childSelector:function(t){var e=c.byNode(t);return t.parentNode==this.containerNode&&e&&e.focus},postCreate:function(){var t=this,e="string"==typeof this.childSelector?this.childSelector:o.hitch(this,"childSelector");this.own(r(this.containerNode,r.selector(e,s.enter),(function(){t.onItemHover(c.byNode(this))})),r(this.containerNode,r.selector(e,s.leave),(function(){t.onItemUnhover(c.byNode(this))})),r(this.containerNode,r.selector(e,d),(function(e){t.onItemClick(c.byNode(this),e),e.stopPropagation()})),r(this.containerNode,r.selector(e,"focusin"),(function(){t._onItemFocus(c.byNode(this))}))),this.inherited(arguments)},onKeyboardSearch:function(t,e,n,i){this.inherited(arguments),t&&(-1==i||t.popup&&1==i)&&this.onItemClick(t,e)},_keyboardSearchCompare:function(t,e){return t.shortcutKey?e==t.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(t){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,t);else{var e=this._getTopMenu();e&&e._isMenuBar&&e.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem),this._stopPendingCloseTimer()},onItemHover:function(t){this.activated?(this.set("selected",t),!t.popup||t.disabled||this.hover_timer||(this.hover_timer=this.defer((function(){this._openItemPopup(t)}),this.popupDelay))):this.passivePopupDelay<1/0&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer((function(){this.onItemClick(t,{type:"click"})}),this.passivePopupDelay)),this._hoveredChild=t,t._set("hovering",!0)},_onChildDeselect:function(t){this._stopPopupTimer(),this.currentPopupItem==t&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer((function(){this._pendingClose_timer=null,this.currentPopupItem=null,t._closePopup()}),this.popupDelay))},onItemUnhover:function(t){this._hoveredChild==t&&(this._hoveredChild=null),this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null),t._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var t=this;t.parentMenu;t=t.parentMenu);return t},onItemClick:function(t,e){if(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.focusChild(t),t.disabled)return!1;if(t.popup){this.set("selected",t),this.set("activated",!0);var n=/^key/.test(e._origType||e.type)||0==e.clientX&&0==e.clientY;this._openItemPopup(t,n)}else this.onExecute(),t._onClick?t._onClick(e):t.onClick(e)},_openItemPopup:function(t,e){if(t!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup()),this._stopPopupTimer();var n=t.popup;n.parentMenu=this,this.own(this._mouseoverHandle=r.once(n.domNode,"mouseover",o.hitch(this,"_onPopupHover")));var i=this;t._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){e&&i.focusChild(t),i._cleanUp()},onExecute:o.hitch(this,"_cleanUp",!0),onClose:function(){i._mouseoverHandle&&(i._mouseoverHandle.remove(),delete i._mouseoverHandle)}},e),this.currentPopupItem=t}},onOpen:function(){this.isShowingNow=!0,this.set("activated",!0)},onClose:function(){this.set("activated",!1),this.set("selected",null),this.isShowingNow=!1,this.parentMenu=null},_closeChild:function(){this._stopPopupTimer(),this.currentPopupItem&&(this.focused&&(i.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(t){this._hoveredChild&&this._hoveredChild!=t&&this.onItemUnhover(this._hoveredChild),this.set("selected",t)},_onBlur:function(){this._cleanUp(!0),this.inherited(arguments)},_cleanUp:function(t){this._closeChild(),void 0===this.isShowingNow&&this.set("activated",!1),t&&this.set("selected",null)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(7),n(23),n(30),n(1),n(14),n(163),n(76),n(340)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return e("dijit._KeyNavContainer",[l,d,r],{connectKeyNavHandlers:function(e,n){var i=this._keyNavCodes={},s=o.hitch(this,"focusPrev"),r=o.hitch(this,"focusNext");t.forEach(e,(function(t){i[t]=s})),t.forEach(n,(function(t){i[t]=r})),i[a.HOME]=o.hitch(this,"focusFirstChild"),i[a.END]=o.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){i.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments),t.forEach(this.getChildren(),o.hitch(this,"_startupChild"))},addChild:function(t,e){this.inherited(arguments),this._startupChild(t)},_startupChild:function(t){t.set("tabIndex","-1")},_getFirst:function(){var t=this.getChildren();return t.length?t[0]:null},_getLast:function(){var t=this.getChildren();return t.length?t[t.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(t){return(t=s.byNode(t))&&t.getParent()==this}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\n\t\trole="presentation"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</span>\n\t</td>\n</tr>\n'},function(t,e,n){var i,a;i=[n(5),n(0),n(3),n(27),n(9),n(1),n(6),n(14),n(193),n(207)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return e("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var t=this.getParent();this._childOfLayoutWidget=t&&t.isLayoutContainer,this._needLayout=!this._childOfLayoutWidget,this.inherited(arguments),this._isShown()&&this._onShow(),this._childOfLayoutWidget||this.own(l.on("resize",o.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var t=[],e=!1;s("> *",this.containerNode).some((function(n){var i=r.byNode(n);i&&i.resize?t.push(i):!/script|link|style/i.test(n.nodeName)&&n.offsetHeight&&(e=!0)})),this._singleChild=1!=t.length||e?null:t[0],n.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(t,e){this._resizeCalled=!0,this._scheduleLayout(t,e)},_scheduleLayout:function(t,e){this._isShown()?this._layout(t,e):(this._needLayout=!0,this._changeSize=t,this._resultSize=e)},_layout:function(t,e){delete this._needLayout,this._wasShown||!1===this.open||this._onShow(),t&&i.setMarginBox(this.domNode,t);var n=this.containerNode;if(n===this.domNode){var a=e||{};o.mixin(a,t||{}),"h"in a&&"w"in a||(a=o.mixin(i.getMarginBox(n),a)),this._contentBox=d.marginBox2contentBox(n,a)}else this._contentBox=i.getContentBox(n);this._layoutChildren()},_layoutChildren:function(){if(this._checkIfSingleChild(),this._singleChild&&this._singleChild.resize){var t=this._contentBox||i.getContentBox(this.containerNode);this._singleChild.resize({w:t.w,h:t.h})}else for(var e,n=this.getChildren(),a=0;e=n[a++];)e.resize&&e.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var t=this.domNode,e=this.domNode.parentNode;return"none"!=t.style.display&&"hidden"!=t.style.visibility&&!n.contains(t,"dijitHidden")&&e&&e.style&&"none"!=e.style.display},_onShow:function(){this._wasShown=!0,this._needLayout&&this._layout(this._changeSize,this._resultSize),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports={loadingState:"Loading...",errorState:"Sorry, an error occurred"}},function(t,e){t.exports='<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip" data-dojo-attach-event="mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n'},function(t,e,n){var i,a;i=[n(0),n(7),n(30),n(1),n(2),n(339)],void 0===(a=function(t,e,n,i,a,o){return t("dijit.form._FormValueMixin",o,{readOnly:!1,_setReadOnlyAttr:function(t){e.set(this.focusNode,"readOnly",t),this._set("readOnly",t)},postCreate:function(){this.inherited(arguments),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(t,e){this._handleOnChange(t,e)},_handleOnChange:function(t,e){this._set("value",t),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<tr class="dijitMenuSeparator" role="separator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n'},function(t,e){t.exports='<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitButtonContents overflow--hidden white-space--normal" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,textDirNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n'},function(t,e){t.exports='<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\tdata-dojo-attach-point="valueNode" role="presentation" aria-hidden="true"\n/></span>\n'},function(t,e){t.exports='<table class="dijit dijitReset dijitInline dijitLeft"\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:_onClick,onkeydown:_onButtonKeyDown"\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t></div\n\t\t></td\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event="onkeydown:_onArrowKeyDown"\n\t\t\ttitle="${optionsTitle}"\n\t\t\trole="button" aria-haspopup="true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t\t><td style="display:none !important;"\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode"\n\t\t\t\tclass="dijitOffScreen"\n\t\t\t\trole="presentation" aria-hidden="true"\n\t\t\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\t/></td></tr></tbody\n></table>\n'},function(t,e){t.exports='<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'},function(t,e){t.exports='<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'},function(t,e,n){var i,a;i=[n(35),n(0),n(7),n(30),n(1),n(6),n(160),n(33),n(434),n(292),n(534)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return e("dijit.form._AutoCompleterMixin",c,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(t){var e=0;if("number"==typeof t.selectionStart)e=t.selectionStart;else if(r("ie")){var n=t.ownerDocument.selection.createRange().duplicate(),i=t.createTextRange();n.move("character",0),i.move("character",0);try{i.setEndPoint("EndToEnd",n),e=String(i.text).replace(/\r/g,"").length}catch(t){}}return e},_setCaretPos:function(t,e){e=parseInt(e),d.selectInputText(t,e,e)},_setDisabledAttr:function(t){this.inherited(arguments),this.domNode.setAttribute("aria-disabled",t?"true":"false")},_onKey:function(t){if(!(t.charCode>=32)){var e=t.charCode||t.keyCode;if(e!=i.ALT&&e!=i.CTRL&&e!=i.META&&e!=i.SHIFT){var n=this.dropDown,a=null;if(this._abortQuery(),this.inherited(arguments),!(t.altKey||t.ctrlKey||t.metaKey))switch(this._opened&&(a=n.getHighlightedOption()),e){case i.PAGE_DOWN:case i.DOWN_ARROW:case i.PAGE_UP:case i.UP_ARROW:this._opened&&this._announceOption(a),t.stopPropagation(),t.preventDefault();break;case i.ENTER:if(a){if(a==n.nextButton){this._nextSearch(1),t.stopPropagation(),t.preventDefault();break}if(a==n.previousButton){this._nextSearch(-1),t.stopPropagation(),t.preventDefault();break}t.stopPropagation(),t.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case i.TAB:var o=this.get("displayedValue");if(n&&(o==n._messages.previousMessage||o==n._messages.nextMessage))break;a&&this._selectOption(a);case i.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(t){var e=this.focusNode;d.selectInputText(e,e.value.length);var n=this.ignoreCase?"toLowerCase":"substr";if(0==t[n](0).indexOf(this.focusNode.value[n](0))){var i=this.autoComplete?this._getCaretPos(e):e.value.length;i+1>e.value.length&&(e.value=t,d.selectInputText(e,i))}else e.value=t,d.selectInputText(e)},_openResultList:function(t,e,n){var i=this.dropDown.getHighlightedOption();this.dropDown.clearResultList(),t.length||0!=n.start?(this._nextSearch=this.dropDown.onPage=a.hitch(this,(function(e){t.nextPage(-1!==e),this.focus()})),this.dropDown.createOptions(t,n,a.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in n?(n.direction?this.dropDown.highlightFirstOption():n.direction||this.dropDown.highlightLastOption(),i&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(e[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0),this.openDropDown(),this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery(),this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var t=this.get("displayedValue"),e=this.dropDown;!e||t!=e._messages.previousMessage&&t!=e._messages.nextMessage?void 0===this.item?(this.item=null,this.set("displayedValue",t)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0),this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(t,e,n){var i="";t&&(n||(n=this.store._oldAPI?this.store.getValue(t,this.searchAttr):t[this.searchAttr]),i=this._getValueField()!=this.searchAttr?this.store.getIdentity(t):n),this.set("value",i,e,n,t)},_announceOption:function(t){if(t){var e;if(t==this.dropDown.nextButton||t==this.dropDown.previousButton)e=t.innerHTML,this.item=void 0,this.value="";else{var i=this.dropDown.items[t.getAttribute("item")];e=(this.store._oldAPI?this.store.getValue(i,this.searchAttr):i[this.searchAttr]).toString(),this.set("item",i,!1,e)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length),this.focusNode.setAttribute("aria-activedescendant",n.get(t,"id")),this._autoCompleteText(e)}},_selectOption:function(t){this.closeDropDown(),t&&this._announceOption(t),this._setCaretPos(this.focusNode,this.focusNode.value.length),this._handleOnChange(this.value,!0),this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0,this.inherited(arguments)},_startSearch:function(t){if(!this.dropDown){var e=this.id+"_popup",n=a.isString(this.dropDownClass)?a.getObject(this.dropDownClass,!1):this.dropDownClass;this.dropDown=new n({onChange:a.hitch(this,this._selectOption),id:e,dir:this.dir,textDir:this.textDir})}this._lastInput=t,this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){if(this.inherited(arguments),!this.store&&this.srcNodeRef){var t=this.srcNodeRef;if(this.store=new l({},t),!("value"in this.params)){var e=this.item=this.store.fetchSelectedItem();if(e){var n=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(e,n):e[n]}}}},postCreate:function(){var e=o('label[for="'+this.id+'"]');e.length&&(e[0].id||(e[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",e[0].id)),this.inherited(arguments),t.after(this,"onSearch",a.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(t){var e=this.labelFunc(t,this.store),n=this.labelType;return"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(e=this.doHighlight(e,this._lastInput),n="html"),{html:"html"==n,label:e}},doHighlight:function(t,e){var n=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),i=this.queryExpr.indexOf("${0}");return e=s.escapeString(e),this._escapeHtml(t.replace(new RegExp((0==i?"^":"")+"("+e+")"+(i==this.queryExpr.length-4?"$":""),n),"￿$1￿")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(t){return t=String(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null,this.inherited(arguments)},labelFunc:function(t,e){return(e._oldAPI?e.getValue(t,this.labelAttr||this.searchAttr):t[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(t,e,n,i){this._set("item",i||null),null==t&&(t=""),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(30),n(1),n(6),n(59),n(46),n(14)],void 0===(a=function(t,e,n,i,a,o,s){return t("dijit.form._SearchMixin",null,{pageSize:1/0,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(t){this._set("list",t)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(t){return new RegExp("^"+t.replace(/(\\.)|(\*)|(\?)|\W/g,(function(t,e,n,i){return n?".*":i?".":e||"\\"+t}))+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove()),this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove()),this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(t){if(!this.disabled&&!this.readOnly){var n=t.charOrCode;if(!("type"in t)||"key"!=t.type.substring(0,3)||!(t.altKey||(t.ctrlKey||t.metaKey)&&"x"!=n&&"v"!=n||n==e.SHIFT)){var i=!1;switch(this._prev_key_backspace=!1,n){case e.DELETE:case e.BACKSPACE:this._prev_key_backspace=!0,this._maskValidSubsetError=!0,i=!0;break;default:i="string"==typeof n||229==n}i&&(this.store?this.searchTimer=this.defer("_startSearchFromInput",1):this.onSearch())}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(t){this._abortQuery();var e,i=this,s=n.clone(this.query),r={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},l=a.substitute(this.queryExpr,[t.replace(/([\\\*\?])/g,"\\$1")]),d=function(){var t=i._fetchHandle=i.store.query(s,r);i.disabled||i.readOnly||e!==i._lastQuery||o(t,(function(n){i._fetchHandle=null,i.disabled||i.readOnly||e!==i._lastQuery||o(t.total,(function(t){n.total=t;var e=i.pageSize;(isNaN(e)||e>n.total)&&(e=n.total),n.nextPage=function(t){r.direction=t=!1!==t,r.count=e,t?(r.start+=n.length,r.start>=n.total&&(r.count=0)):(r.start-=e,r.start<0&&(r.count=Math.max(e+r.start,0),r.start=0)),r.count<=0?(n.length=0,i.onSearch(n,s,r)):d()},i.onSearch(n,s,r)}))}),(function(t){i._fetchHandle=null,i._cancelingQuery||console.error(i.declaredClass+" "+t.toString())}))};n.mixin(r,this.fetchProperties),this.store._oldAPI?e=l:(e=this._patternToRegExp(l)).toString=function(){return l},this._lastQuery=s[this.searchAttr]=e,this._queryDeferHandle=this.defer(d,this.searchDelay)},constructor:function(){this.query={},this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var t=this.list;t&&(this.store=s.byId(t))}this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(9),n(30),n(12),n(11),n(536),n(538)],void 0===(a=function(t,e,n,i,a,o,s,r){return t("dijit.form._ComboBoxMenu",[a,o,r,s],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments),this.isLeftToRight()||(e.add(this.previousButton,"dijitMenuItemRtl"),e.add(this.nextButton,"dijitMenuItemRtl")),this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var t=this.ownerDocument.createElement("div");return t.className="dijitReset dijitMenuItem small-meta fwb cursor-default"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),t.setAttribute("role","option"),t},onHover:function(t){e.add(t,"dijitMenuItemHover")},onUnhover:function(t){e.remove(t,"dijitMenuItemHover")},onSelect:function(t){e.add(t,"dijitMenuItemSelected")},onDeselect:function(t){e.remove(t,"dijitMenuItemSelected")},_page:function(t){var e=0,i=this.domNode.scrollTop,a=n.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();e<a;){var o=this.getHighlightedOption();if(t){if(!o.previousSibling||"none"==o.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!o.nextSibling||"none"==o.nextSibling.style.display)break;this.selectNextNode()}var s=this.domNode.scrollTop;e+=(s-i)*(t?-1:1),i=s}},handleKey:function(t){switch(t.keyCode){case i.DOWN_ARROW:return this.selectNextNode(),!1;case i.PAGE_DOWN:return this._page(!1),!1;case i.UP_ARROW:return this.selectPreviousNode(),!1;case i.PAGE_UP:return this._page(!0),!1;default:return!0}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(7),n(34),n(83),n(537)],void 0===(a=function(t,e,n,i,a){return e("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments),this._messages=a.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments),this.previousButton.innerHTML=this._messages.previousMessage,this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(t){this._set("value",t),this.onChange(t)},onClick:function(t){t==this.previousButton?(this._setSelectedAttr(null),this.onPage(-1)):t==this.nextButton?(this._setSelectedAttr(null),this.onPage(1)):this.onChange(t)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(t,e){var n=this._createMenuItem(),i=e(t);return i.html?n.innerHTML=i.label:n.appendChild(n.ownerDocument.createTextNode(i.label)),""==n.innerHTML&&(n.innerHTML="&#160;"),n},createOptions:function(e,i,a){this.items=e,this.previousButton.style.display=0==i.start?"none":"",n.set(this.previousButton,"id",this.id+"_prev"),t.forEach(e,(function(t,e){var i=this._createOption(t,a);i.setAttribute("item",e),n.set(i,"id",this.id+e),this.nextButton.parentNode.insertBefore(i,this.nextButton)}),this);var o=!1;e.total&&!e.total.then&&-1!=e.total?(i.start+i.count<e.total||i.start+i.count>e.total&&i.count==e.length)&&(o=!0):i.count==e.length&&(o=!0),this.nextButton.style.display=o?"":"none",n.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var t=this.containerNode;t.childNodes.length>2;)t.removeChild(t.childNodes[t.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports={previousMessage:"Previous choices",nextMessage:"More choices"}},function(t,e,n){var i,a;i=[n(0),n(2),n(53),n(539)],void 0===(a=function(t,e,n,i){return t("dijit.form._ListMouseMixin",i,{postCreate:function(){this.inherited(arguments),this.domNode.dojoClick=!0,this._listConnect("click","_onClick"),this._listConnect("mousedown","_onMouseDown"),this._listConnect("mouseup","_onMouseUp"),this._listConnect("mouseover","_onMouseOver"),this._listConnect("mouseout","_onMouseOut")},_onClick:function(t,e){this._setSelectedAttr(e,!1),this._deferredClick&&this._deferredClick.remove(),this._deferredClick=this.defer((function(){this._deferredClick=null,this.onClick(e)}))},_onMouseDown:function(t,e){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging=!0,this._setSelectedAttr(e,!1)},_onMouseUp:function(t,e){this._isDragging=!1;var n=this.selected,i=this._hoveredNode;n&&e==n?this.defer((function(){this._onClick(t,n)})):i&&this.defer((function(){this._onClick(t,i)}))},_onMouseOut:function(t,e){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging&&(this._cancelDrag=(new Date).getTime()+1e3)},_onMouseOver:function(t,e){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=e,this.onHover(e),this._isDragging&&this._setSelectedAttr(e,!1)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(2),n(49)],void 0===(a=function(t,e,n){return t("dijit.form._ListBase",null,{selected:null,_listConnect:function(t,n){var i=this;return i.own(e(i.containerNode,e.selector((function(t,e,n){return t.parentNode==n}),t),(function(t){i[n](t,this)})))},selectFirstNode:function(){for(var t=this.containerNode.firstChild;t&&"none"==t.style.display;)t=t.nextSibling;this._setSelectedAttr(t,!0)},selectLastNode:function(){for(var t=this.containerNode.lastChild;t&&"none"==t.style.display;)t=t.previousSibling;this._setSelectedAttr(t,!0)},selectNextNode:function(){var t=this.selected;if(t){for(var e=t.nextSibling;e&&"none"==e.style.display;)e=e.nextSibling;e?this._setSelectedAttr(e,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var t=this.selected;if(t){for(var e=t.previousSibling;e&&"none"==e.style.display;)e=e.previousSibling;e?this._setSelectedAttr(e,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(t,e){if(this.selected!=t){var i=this.selected;i&&this.onDeselect(i),t&&(e&&n.scrollIntoView(t),this.onSelect(t)),this._set("selected",t)}else t&&this.onSelect(t)}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports={"dateFormatItem-Ehm":"E h:mm a","days-standAlone-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E",eraNarrow:["BCE","CE"],"field-tue-relative+-1":"last Tuesday","days-format-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"y-MM-dd","field-era":"Era","dateFormatItem-yM":"y-MM","months-standAlone-wide":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L","days-standAlone-wide":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayPeriods-format-abbr-noon":"noon","timeFormat-medium":"HH:mm:ss","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"yesterday","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-h":"h a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"field-zone":"Zone","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-y":"y","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateTimeFormats-appendItem-Year":"{1} {0}","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],eraNames:["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":["S","M","T","W","T","F","S"],"field-month":"Month","days-standAlone-narrow":["S","M","T","W","T","F","S"],"dateFormatItem-MMM":"LLL","field-tue-relative+0":"this Tuesday","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"y-MM-dd","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday","dateFormatItem-yMMMEd":"y MMM d, E","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateFormatItem-Ed":"d, E","field-week":"Week","dateFormat-medium":"y MMM d","field-week-relative+-1":"last week","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-GyMMM":"G y MMM","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"}},function(t,e){t.exports='<div role="alertdialog" tabIndex="-1">\n\t<div class="dijitTooltipContainer" role="presentation">\n\t\t<div data-dojo-attach-point="contentsNode" class="dijitTooltipContents dijitTooltipFocusNode">\n\t\t\t<div data-dojo-attach-point="containerNode"></div>\n\t\t\t${!actionBarTemplate}\n\t\t</div>\n\t</div>\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n'},function(t,e,n){var i,a;i=[n(0),n(1),n(61),n(54),n(9),n(3),n(27),n(14),n(12),n(11),n(161),n(55),n(34),n(32),n(36),n(49)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){e.getObject("dojox.widget",!0);var f=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)};return t("dojox.widget.Toaster",[l,d],{templateString:'<div class="dijitToasterClip" dojoAttachPoint="clipNode"><div class="dijitToasterContainer" dojoAttachPoint="containerNode" dojoAttachEvent="onclick:onSelect"><div class="dijitToasterContent" dojoAttachPoint="contentNode"></div></div></div>',messageTopic:"",messageTypes:{MESSAGE:"message",WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"tr-down",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2e3,slideDuration:500,separator:"<hr></hr>",postCreate:function(){this.inherited(arguments),this.hide(),p.body().appendChild(this.domNode),this.messageTopic&&n.subscribe(this.messageTopic,this,"_handleMessage")},_handleMessage:function(t){e.isString(t)?this.setContent(t):this.setContent(t.message,t.type,t.duration)},setContent:function(t,n,i){for(var r in i=i||this.duration,this.messageTypes)o.remove(this.containerNode,"dijitToaster"+f(this.messageTypes[r]));a.set(this.containerNode,"opacity",1),this._setContent(t),o.add(this.containerNode,"dijitToaster"+f(n||this.defaultType)),this.show();s.getMarginBox(this.containerNode);this._cancelHideTimer(),this.isVisible?(this._placeClip(),this._stickyMessage||this._setHideTimer(i)):(m(this.domNode,"stop"),m(this.domNode,{opacity:[1,[.7,0,.175,1],0],bottom:["24px",[.7,0,.175,1.1],"10px"],translateZ:[0,[.7,0,.175,1],-1]},{duration:225,display:"block",complete:function(){e.hitch(this,(function(){this.isVisible=!0}))}}),m(this.domNode,{opacity:[0,[.7,0,.175,-.5],1],bottom:["-5px",[.7,0,.175,-.1],"-10px"],translateZ:[-1,[.7,0,.175,-.1],0]},{duration:125,delay:2500,display:"none",complete:function(){e.hitch(this,(function(){this.isVisible=!1,this.hide()}))}}))},_setContent:function(t){e.isFunction(t)?t(this):(t&&this.isVisible&&(t=this.contentNode.innerHTML+this.separator+t),this.contentNode.innerHTML=t)},_cancelHideTimer:function(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null)},_setHideTimer:function(t){this._cancelHideTimer(),t>0?(this._cancelHideTimer(),this._hideTimer=setTimeout(e.hitch(this,(function(t){this.bgIframe&&this.bgIframe.iframe&&(this.bgIframe.iframe.style.display="none"),this._hideTimer=null,this._stickyMessage=!1,this.fadeAnim.play()})),t)):this._stickyMessage=!0},_placeClip:function(){var t=g.getBox(),e=s.getMarginBox(this.containerNode),n=this.clipNode.style;n.height=e.h+"px",n.width=e.w+"px";var i=this.positionDirection;if(i.match(/^t/)?n.top=t.t+"px":i.match(/^b/)&&(n.top=t.h-e.h-2+t.t+"px"),i.match(/^[tb]r-/)?n.left=t.w-e.w-1-t.l+"px":i.match(/^[tb]l-/)?n.left="0px":i.match(/^[tb]c-/)&&(n.left=Math.round((t.w-e.w-1-t.l)/2)+"px"),n.clip="rect(0px, "+e.w+"px, "+e.h+"px, 0px)",h("ie")){this.bgIframe||(this.clipNode.id||(this.clipNode.id=r.getUniqueId("dojox_widget_Toaster_clipNode")),this.bgIframe=new c(this.clipNode));var a=this.bgIframe.iframe;a&&(a.style.display="block")}},onSelect:function(t){},show:function(){a.set(this.domNode,"display","block"),this._placeClip(),this._scrollConnected||(this._scrollConnected=n.connect(g,"onscroll",this,this._placeClip))},hide:function(){a.set(this.domNode,"display","none"),this._scrollConnected&&(n.disconnect(this._scrollConnected),this._scrollConnected=!1),a.set(this.containerNode,"opacity",1)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){var e=t([],{constructor:function(t){if("success"==t.status){for(var e,n=new google.visualization.DataTable,i=t.meta,a=0;e=i[a];++a)n.addColumn(e.type,e.label,e.id);delete i,delete e;var o,s,r=t.data;n.addRows(r.length);for(a=0;o=r[a];++a)for(var l=0;s=o[l];++l)n.setCell(a,l,s.v,s.f);this.table=n,this.error=!1}else this.table=null,this.error=t.code,this.error_msg=t.msg,this.error_detail=t.detail},getDataTable:function(){return this.table},getDetailedMessage:function(){return this.error_detail},getMessage:function(){return this.error_msg},getReasons:function(){return[this.error]},hasWarning:function(){return!1},isError:function(){return!!this.error}});return t([],{constructor:function(t,e){this.url=t,this.query=e},setQuery:function(t){this.query=t},send:function(t){var n={};this.query&&(n.q=this.query),dojo.xhrPost({url:this.url,content:n,handleAs:"json",load:function(n){var i=new e(n);t(i)},error:function(n){var i=new e({status:"error",code:"server_error",msg:"Server Error",detail:n});t(i)}})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(444),n(245),n(116)],void 0===(a=function(t,e,n){return e?function(n,i){return e(n,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t=Date.now;return function(e){var n=0,i=0;return function(){var a=t(),o=16-(a-i);if(i=a,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(77),n(183),n(547)],void 0===(a=function(t,e,n){var i=Object.prototype.hasOwnProperty;return function(a){if(!t(a))return n(a);var o=e(a),s=[];for(var r in a)("constructor"!=r||!o&&i.call(a,r))&&s.push(r);return s}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(223),n(117),n(396)],void 0===(a=function(t,e,n){return e((function(e,i){try{return t(e,void 0,i)}catch(t){return n(t)?t:new Error(t)}}))}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){var t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};return function(e){return"\\"+t[e]}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(551),n(553),n(554),n(399)],void 0===(a=function(t,e,n,i){return{escape:e,evaluate:n,interpolate:i,variable:"",imports:{_:{escape:t}}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(552),n(121)],void 0===(a=function(t,e){var n=/[&<>"']/g,i=RegExp(n.source);return function(a){return(a=e(a))&&i.test(a)?a.replace(n,t):a}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(446)],void 0===(a=function(t){return t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return/<%-([\s\S]+?)%>/g}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return/<%([\s\S]+?)%>/g}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(711)],void 0===(a=function(t){return function(e){var n=t(e),i=n%1;return n==n?i?n-i:n:0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1152),n(2),n(28),n(63),n(30),n(1),n(22),n(29)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([e,n],{templateString:i,dialog:null,deferred:null,dialogTitle:"Are you sure?",fileid:null,pluralizedFile:null,postMixInProperties:function(){this.fileid=this.fileid.toString(),this.pluralizedFile=1===this.fileid.split(",").length?"this file":"these files"},postCreate:function(){this.deferred=new d;var t=a(this.deleteButton,"click",l.hitch(this,(function(e){s.stop(e),t.remove(),this.resolve()}))),e=a(this.cancelButton,"click",l.hitch(this,(function(t){s.stop(t),e.remove(),this.cancel()})))},execute:function(){this.resolve()},resolve:function(){this.deferred.resolve(),this.dialog.hide()},cancel:function(){this.deferred.cancel(),this.dialog.hide()},show:function(){this.dialog=new c({title:this.dialogTitle,content:this}),this.dialog.startup(),this.dialog.show()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(2),n(12),n(11),n(126),n(1156),n(226)],void 0===(a=function(t,e,n,i,a,o,s,r,l){var d=t([a,o],{templateString:r,contentMessage:"",primaryActionLabel:"",onClickPrimaryAction:null,secondaryActionLabel:"",onClickSecondaryAction:null,dialog:null,postCreate:function(){this._setUpContentMessage(),this._setUpPrimaryAction(),this._setUpSecondaryAction()},_setUpContentMessage:function(){this.contentMessage&&n.create("p",{innerHTML:this.contentMessage},this.contentArea,"first")},_setUpPrimaryAction:function(){if(this.primaryActionLabel){var t=s({label:this.primaryActionLabel,class:"button p0",id:"primaryActionButton"});if(this.onClickPrimaryAction){var e=this;i(t,"click",(function(t){e.onClickPrimaryAction(t,e.dialog)}))}t.placeAt(this.actionBar,"last")}},_setUpSecondaryAction:function(){if(this.secondaryActionLabel){var t=n.create("a",{href:"#",innerHTML:this.secondaryActionLabel});if(this.onClickSecondaryAction){var e=this;i(t,"click",(function(t){e.onClickSecondaryAction(t,e.dialog)}))}n.place(t,this.actionBar,"last")}}});return t([l],{constructor:function(){this.content=new d(e.mixin(arguments[0],{dialog:this}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(15),n(12),n(11),n(20),n(47),n(1),n(4),n(3),n(38),n(30),n(1161)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return t([n,i,a,o],{templateString:u,wait:250,searchTopic:null,placeholderText:"",shouldShowSearchDivider:!0,constructor:function(t){this.suggestionsMap={},this.suggestionOrder=[],t.suggestions&&this._generateSuggestionMap(t.suggestions)},_generateSuggestionMap:function(t){this.suggestionsMap=t.reduce(s.hitch((function(t,e){return t[e.value]=e,t})),{search:{value:"search",label:"{search}",icon:"search",shouldShowPrompt:!0}}),this.suggestionOrder=t.map((function(t){return t.value}))},_setPlaceholderTextAttr:function(t){t&&(this.placeholderText=t,this.SearchBox.filteredInput.setAttribute("placeholder",this.placeholderText))},visibleSuggestions:[],_setVisibleSuggestionsAttr:function(t){this.visibleSuggestions=t;var n=document.createDocumentFragment(),i=!1;this.visibleSuggestions.forEach(s.hitch(this,(function(t,a){var o=this.suggestionsMap[t];o.domNode=e.compileTemplate(this.template_result,s.mixin(s.clone(o),{label:s.replace(o.label,{search:d.encode(this.searchText)}),icon:o.icon||"hide",promptClass:o.shouldShowPrompt?"":"hide",detailsClass:o.details?"":"hide"})),o.iconImage&&r.place(e.compileTemplate(this.template_iconImage,{iconImage:o.iconImage}),o.domNode,"first"),o.domNode.addEventListener("mousedown",this._selectSuggestion.bind(this,t)),a<=1&&!this.isSearch(t)&&!i&&this.shouldShowSearchDivider&&(i=!0,n.appendChild(e.compileTemplate(this.template_divider,{}))),n.appendChild(o.domNode)}))),r.place(n,this.node_autoCompleteResults,"only"),this.set("highlightedSuggestionKey","")},searchText:null,_setSearchTextAttr:function(t){t!==this.searchText&&(this.searchText=t||"",this.SearchBox.setValue(this.searchText),this._setVisibleSuggestionsBasedOnSearchText(),this.set("shouldShowSuggestions",this.isFocused&&(!this.shouldOnlySuggestOnFocus||!this.searchText)))},highlightedSuggestionKey:"",_setHighlightedSuggestionKeyAttr:function(t){this.highlightedSuggestionKey=t,this.visibleSuggestions.forEach(s.hitch(this,(function(t,e){l.toggle(this.suggestionsMap[t].domNode,"c-autocomplete_suggestion--highlighted",t===this.highlightedSuggestionKey)})))},selectedSuggestion:"",_setSelectedSuggestionAttr:function(t){this.selectedSuggestion=t,this.suggestionsMap[t]?this.set("searchText",this.suggestionsMap[t].label):t||this.set("searchText","")},shouldShowSuggestions:!1,_setShouldShowSuggestionsAttr:function(t){this.shouldShowSuggestions=t,l.toggle(this.node_autoCompleteResults,"hide",!t)},_setVisibleSuggestionsBasedOnSearchText:function(){this.suggestionFetchingFunction?this.suggestionFetchingFunction(this.searchText).then(function(t){this._generateSuggestionMap(t),this.set("visibleSuggestions",this.suggestionOrder),this.onSuggestionsChanged(t.length,this.searchText)}.bind(this)):this.set("visibleSuggestions",(this.searchText?["search"]:[]).concat(this.suggestionOrder).filter(s.hitch(this,(function(t){var e=this.suggestionsMap[t];return!this.searchText&&this.shouldSuggestInitially(e)||this.isSearch(t)||this.searchText&&this.shouldSuggestInSearches(e)&&e.label.toLowerCase().indexOf(this.searchText.toLowerCase())>-1}))))},_selectSuggestion:function(t,e){e.preventDefault(),this.SearchBox.filteredInput.blur(),this.set("shouldShowSuggestions",!1);var n=t||this.highlightedSuggestionKey;!n||this.isSearch(n)?this.onTextSearch(this.SearchBox.filteredInput.value):this.onSuggestionSelected(this.suggestionsMap[n])},_onKeyDown:function(t){var e=t.charCode||t.keyCode;if(e===c.DOWN_ARROW||e===c.UP_ARROW){t.preventDefault();var n=e===c.DOWN_ARROW?1:-1;this.set("highlightedSuggestionKey",this.visibleSuggestions[this.visibleSuggestions.indexOf(this.highlightedSuggestionKey)+n]||this.highlightedSuggestionKey)}else this.highlightedSuggestionKey&&e!==c.ENTER&&this.set("highlightedSuggestionKey","")},isSearch:function(t){return"search"===t},clear:function(){this.SearchBox._clearSearch()},onClear:function(){},onSuggestionSelected:function(){},shouldSuggestInitially:function(t){return!0},shouldSuggestInSearches:function(t){return!0},onTextSearch:function(){},onFocus:function(t){},onSuggestionsChanged:function(t,e){},setNewSuggestions:function(t){this._generateSuggestionMap(t),this.set("visibleSuggestions",this.suggestionOrder)},postCreate:function(){this.inherited(arguments),this.set("searchText",""),this.SearchBox.onChange=this.set.bind(this,"searchText"),this.SearchBox.onClear=s.hitch(this,(function(){this.set("searchText",""),this.onClear()})),this.SearchBox.onBlur=s.hitch(this,(function(){this.set("isFocused",!1),this.set("shouldShowSuggestions",!1)})),this.SearchBox.onFocus=s.hitch(this,(function(){this.set("isFocused",!0);var t=this.visibleSuggestions.length>0&&(!this.shouldOnlySuggestOnFocus||!this.searchText);t&&this._setVisibleSuggestionsBasedOnSearchText(),this.set("shouldShowSuggestions",t),this.onFocus(this.SearchBox.filteredInput)})),this.SearchBox.onKeyDown=this._onKeyDown.bind(this),this.domNode.addEventListener("submit",this._selectSuggestion.bind(this,null))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){!function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function n(t){e(t);var n=t.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.className="CodeMirror-placeholder",n.appendChild(document.createTextNode(t.getOption("placeholder"))),t.display.lineSpace.insertBefore(n,t.display.lineSpace.firstChild)}function i(t){o(t)&&n(t)}function a(t){var i=t.getWrapperElement(),a=o(t);i.className=i.className.replace(" CodeMirror-empty","")+(a?" CodeMirror-empty":""),a?n(t):e(t)}function o(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",(function(n,o,s){var r=s&&s!=t.Init;if(o&&!r)n.on("blur",i),n.on("change",a),a(n);else if(!o&&r){n.off("blur",i),n.off("change",a),e(n);var l=n.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}o&&!n.hasFocus()&&i(n)}))}(n(122))},function(t,e,n){var i,a;i=[n(71),n(1),n(240)],void 0===(a=function(t,e,n){var i=0,a=[].slice,o=e.mixin(new t,{onsend:function(t){i||this.emit("start"),i++},_onload:function(t){this.emit("done",t)},_onerror:function(t){this.emit("done",t)},_ondone:function(t){--i<=0&&(i=0,this.emit("stop"))},emit:function(e,n){var i=t.prototype.emit.apply(this,arguments);return this["_on"+e]&&this["_on"+e].apply(this,a.call(arguments,1)),i}});function s(t,e){return o.on(t,e)}return s.emit=function(t,e,n){return o.emit(t,e,n)},n.notify=s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(449),n(92),n(448)],void 0===(a=function(t,e,n,i){return t(null,{constructor:function(){},hasCheckWithCode:function(t){return e(this.presendChecks,{code:t})},getCheckWithCode:function(t){return n(this.presendChecks,{code:t})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(108)],void 0===(a=function(t){return function(e,n){return function(i,a){if(null==i)return i;if(!t(i))return e(i,a);for(var o=i.length,s=n?o:-1,r=Object(i);(n?s--:++s<o)&&!1!==a(r[s],s,r););return i}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(22),n(45),n(6),n(136),n(26),n(40)],void 0===(a=function(t,e,n,i,a,o,s,r){var l={test:"https://checkoutshopper-test.adyen.com/checkoutshopper/assets/js/sdk/checkoutSecuredFields.1.5.2.js",prod:"https://checkoutshopper-live.adyen.com/checkoutshopper/assets/js/sdk/checkoutSecuredFields.1.5.2.min.js"};return e([],{hasRetriedInitialization:!1,initializeAdyenCardPayments:function(e,n,i,a,o){var r=this._buildSecuredFieldsInstance(e,n,i);this.hasRetriedInitialization||(this.hasRetriedInitialization=!0,setTimeout(function(){r.isResolved()||(s.info("billing-checkout-fe","Trying to reinitialize payment form on billing info page."),this.initializeAdyenCardPayments())}.bind(this),3e3));var l=[];if(a&&a.onValid){var d=["encryptedCardNumber","encryptedExpiryMonth","encryptedExpiryYear"];o&&(d[d.length]="encryptedSecurityCode"),r.then((function(e,n){n&&console.warn("Error initializing cc fields",n),e.onFieldValid((function(e){var n=e.encryptedFieldName;e.valid&&-1===l.indexOf(n)&&l.push(n),e.valid||(l=t.filter(l,(function(t){return n!==t})));var i=t.every(d,(function(t){return l.indexOf(t)>=0}));a.onValid(i)}))}))}},getAdyenCardPaymentsFields:function(t){var e=i.toObject(a("form",t)[0]);return{encryptedCardNumber:e.encryptedCardNumber,encryptedExpiryMonth:e.encryptedExpiryMonth,encryptedExpiryYear:e.encryptedExpiryYear,encryptedSecurityCode:e.encryptedSecurityCode}},initializeCvcForm:function(t,e,n,i){var a=this._buildSecuredFieldsInstance(t,e,n);i&&i.onValid&&a.then((function(t){t.onFieldValid(i.onValid)}))},gatherThreeDsDeviceInfo:function(){return{acceptHeader:"*/*",colorDepth:screen.colorDepth,javaEnabled:window.navigator.javaEnabled&&window.navigator.javaEnabled(),language:window.navigator.language,userAgent:window.navigator.userAgent,screenHeight:screen.height,screenWidth:screen.width,timeZoneOffset:(new Date).getTimezoneOffset()}},handleThreeDsChallenge:function(t,e,n,i,a){this._buildWebComponentsInstance(e,n,a).then((function(e){e.createFromAction(t,{}).mount(i)}))},_buildSecuredFieldsInstance:function(t,e,i){var a={configObject:{originKey:e},rootNode:i,allowAVDetection:"none"},o=new n,s=t?l.prod:l.test,d=!1;try{r([s],(function(t){d=!0,o.resolve(t(a))}))}catch(t){if(d)throw t;o.reject(t)}return o.promise},_buildWebComponentsInstance:function(t,e,i){var a={clientKey:e,environment:t?"live":"test",locale:"en-US",onAdditionalDetails:i},o=new n,s=!1;try{r(["/js/vendor/adyen/4.1.0/adyen-mc.js"],(function(){s=!0,o.resolve(new window.AdyenCheckout(a))}))}catch(t){if(s)throw t;o.reject(t)}return o.promise}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){function t(t,e,n,i){window.top.postMessage({channel:"bridge",payload:{action:t,id:e,properties:n,fns:i}},window.location.origin)}return function(e,n){var i={},a={};for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];"function"==typeof s?a[o]=s:i[o]=s}function r(t){if(t.origin===window.location.origin&&t.data&&t.data.channel){var e=t.data.channel,i=t.data.payload;"bridge"===e&&"fn"===i.action&&n[i.key](JSON.parse(i.args))}}return t("mount",e,i,Object.keys(a)),window.addEventListener("message",r),function(){t("unmount",e),window.removeEventListener("message",r)}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(67),n(39),n(1192),n(5),n(118),n(41)],void 0===(a=function(t,e,n,i,a,o,s){return t([e,n],{templateString:i,label:"",alwaysVisible:!1,init:function(){var t=[];if(a.forEach(this.values,(function(e){t.push({label:e[1],value:e[0]})})),this.select=new s({options:t,onChange:this.onChange},this.select),this.select.startup(),!this.syncAttr)throw new Error("syncAttr must be specified");o(this.target,this.syncAttr,this.select,"value")},canDisplay:function(){return this.alwaysVisible||this.inherited(arguments)},onChange:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(567)],void 0===(a=function(t){return t}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(188),n(1),n(137),n(568)],void 0===(a=function(t,e,n,i){var a=e.getObject("color",!0,t);return a.Color=n,a.blend=n.blendColors,a.fromRgb=n.fromRgb,a.fromHex=n.fromHex,a.fromArray=n.fromArray,a.fromString=n.fromString,a.greyscale=i.makeGrey,e.mixin(a,{fromCmy:function(t,i,a){e.isArray(t)?(i=t[1],a=t[2],t=t[0]):e.isObject(t)&&(i=t.m,a=t.y,t=t.c);var o=1-(t/=100),s=1-(i/=100),r=1-(a/=100);return new n({r:Math.round(255*o),g:Math.round(255*s),b:Math.round(255*r)})},fromCmyk:function(t,i,a,o){var s,r,l;return e.isArray(t)?(i=t[1],a=t[2],o=t[3],t=t[0]):e.isObject(t)&&(i=t.m,a=t.y,o=t.b,t=t.c),t/=100,i/=100,a/=100,o/=100,s=1-Math.min(1,t*(1-o)+o),r=1-Math.min(1,i*(1-o)+o),l=1-Math.min(1,a*(1-o)+o),new n({r:Math.round(255*s),g:Math.round(255*r),b:Math.round(255*l)})},fromHsl:function(t,i,a){for(e.isArray(t)?(i=t[1],a=t[2],t=t[0]):e.isObject(t)&&(i=t.s,a=t.l,t=t.h),i/=100,a/=100;t<0;)t+=360;for(;t>=360;)t-=360;var o,s,r;return t<120?(o=(120-t)/60,s=t/60,r=0):t<240?(o=0,s=(240-t)/60,r=(t-120)/60):(o=(t-240)/60,s=0,r=(360-t)/60),o=2*i*Math.min(o,1)+(1-i),s=2*i*Math.min(s,1)+(1-i),r=2*i*Math.min(r,1)+(1-i),a<.5?(o*=a,s*=a,r*=a):(o=(1-a)*o+2*a-1,s=(1-a)*s+2*a-1,r=(1-a)*r+2*a-1),new n({r:Math.round(255*o),g:Math.round(255*s),b:Math.round(255*r)})}}),a.fromHsv=function(t,i,a){var o,s,r;if(e.isArray(t)?(i=t[1],a=t[2],t=t[0]):e.isObject(t)&&(i=t.s,a=t.v,t=t.h),360==t&&(t=0),a/=100,0==(i/=100))o=a,r=a,s=a;else{var l=t/60,d=Math.floor(l),c=l-d,u=a*(1-i),h=a*(1-i*c),p=a*(1-i*(1-c));switch(d){case 0:o=a,s=p,r=u;break;case 1:o=h,s=a,r=u;break;case 2:o=u,s=a,r=p;break;case 3:o=u,s=h,r=a;break;case 4:o=p,s=u,r=a;break;case 5:o=a,s=u,r=h}}return new n({r:Math.round(255*o),g:Math.round(255*s),b:Math.round(255*r)})},e.extend(n,{toCmy:function(){var t=1-this.r/255,e=1-this.g/255,n=1-this.b/255;return{c:Math.round(100*t),m:Math.round(100*e),y:Math.round(100*n)}},toCmyk:function(){var t,e,n,i,a=this.r/255,o=this.g/255,s=this.b/255;return t=(1-a-(i=Math.min(1-a,1-o,1-s)))/(1-i),e=(1-o-i)/(1-i),n=(1-s-i)/(1-i),{c:Math.round(100*t),m:Math.round(100*e),y:Math.round(100*n),b:Math.round(100*i)}},toHsl:function(){var t=this.r/255,e=this.g/255,n=this.b/255,i=Math.min(t,n,e),a=Math.max(t,e,n),o=a-i,s=0,r=0,l=(i+a)/2;return l>0&&l<1&&(r=o/(l<.5?2*l:2-2*l)),o>0&&(a==t&&a!=e&&(s+=(e-n)/o),a==e&&a!=n&&(s+=2+(n-t)/o),a==n&&a!=t&&(s+=4+(t-e)/o),s*=60),{h:s,s:Math.round(100*r),l:Math.round(100*l)}},toHsv:function(){var t=this.r/255,e=this.g/255,n=this.b/255,i=Math.min(t,n,e),a=Math.max(t,e,n),o=a-i,s=null,r=0==a?0:o/a;return 0==r?s=0:(s=t==a?60*(e-n)/o:e==a?120+60*(n-t)/o:240+60*(t-e)/o)<0&&(s+=360),{h:s,s:Math.round(100*r),v:Math.round(100*a)}}}),a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(23),n(1),n(137),n(5)],void 0===(a=function(t,e,n,i){var a={};e.setObject("dojo.colors",a);var o=function(t,e,n){n<0&&++n,n>1&&--n;var i=6*n;return i<1?t+(e-t)*i:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t};t.colorFromRgb=n.fromRgb=function(t,e){var a=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(a){var s,r=a[2].split(/\s*,\s*/),l=r.length,d=a[1];if("rgb"==d&&3==l||"rgba"==d&&4==l){var c=r[0];return"%"==c.charAt(c.length-1)?(s=i.map(r,(function(t){return 2.56*parseFloat(t)})),4==l&&(s[3]=r[3]),n.fromArray(s,e)):n.fromArray(r,e)}if("hsl"==d&&3==l||"hsla"==d&&4==l){var u=(parseFloat(r[0])%360+360)%360/360,h=parseFloat(r[1])/100,p=parseFloat(r[2])/100,m=p<=.5?p*(h+1):p+h-p*h,g=2*p-m;return s=[256*o(g,m,u+1/3),256*o(g,m,u),256*o(g,m,u-1/3),1],4==l&&(s[3]=r[3]),n.fromArray(s,e)}}return null};var s=function(t,e,n){return t=Number(t),isNaN(t)?n:t<e?e:t>n?n:t};return n.prototype.sanitize=function(){var t=this;return t.r=Math.round(s(t.r,0,255)),t.g=Math.round(s(t.g,0,255)),t.b=Math.round(s(t.b,0,255)),t.a=s(t.a,0,1),this},a.makeGrey=n.makeGrey=function(t,e){return n.fromArray([t,t,t,e])},e.mixin(n.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]}),n}.apply(e,i))||(t.exports=a)},function(t,e){t.exports={redLabel:"r",greenLabel:"g",blueLabel:"b",hueLabel:"h",saturationLabel:"s",valueLabel:"v",degLabel:"°",hexLabel:"hex",huePickerTitle:"Hue Selector",saturationPickerTitle:"Saturation Selector"}},function(t,e){t.exports='<table class="dojoxColorPicker" dojoAttachEvent="onkeypress: _handleKey" cellpadding="0" cellspacing="0" role="presentation">\n\t<tr>\n\t\t<td valign="top" class="dojoxColorPickerRightPad">\n\t\t\t<div class="dojoxColorPickerBox">\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\n\t\t\t\t<img title="${saturationPickerTitle}" alt="${saturationPickerTitle}" class="dojoxColorPickerPoint" src="${_pickerPointer}" tabIndex="0" dojoAttachPoint="cursorNode" style="position: absolute; top: 0px; left: 0px;">\n\t\t\t\t<img role="presentation" alt="" dojoAttachPoint="colorUnderlay" dojoAttachEvent="onclick: _setPoint, onmousedown: _stopDrag" class="dojoxColorPickerUnderlay" src="${_underlay}" ondragstart="return false">\n\t\t\t</div>\n\t\t</td>\n\t\t<td valign="top" class="dojoxColorPickerRightPad">\n\t\t\t<div class="dojoxHuePicker">\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\n\t\t\t\t<img dojoAttachPoint="hueCursorNode" tabIndex="0" class="dojoxHuePickerPoint" title="${huePickerTitle}" alt="${huePickerTitle}" src="${_huePickerPointer}" style="position: absolute; top: 0px; left: 0px;">\n\t\t\t\t<div class="dojoxHuePickerUnderlay" dojoAttachPoint="hueNode">\n\t\t\t\t    <img role="presentation" alt="" dojoAttachEvent="onclick: _setHuePoint, onmousedown: _stopDrag" src="${_hueUnderlay}">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</td>\n\t\t<td valign="top">\n\t\t\t<table cellpadding="0" cellspacing="0" role="presentation">\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign="top" class="dojoxColorPickerPreviewContainer">\n\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" role="presentation">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td valign="top" class="dojoxColorPickerRightPad">\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint="previewNode" class="dojoxColorPickerPreview"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td valign="top">\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint="safePreviewNode" class="dojoxColorPickerWebSafePreview"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign="bottom">\n\t\t\t\t\t\t<table class="dojoxColorPickerOptional" cellpadding="0" cellspacing="0" role="presentation">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class="dijitInline dojoxColorPickerRgb" dojoAttachPoint="rgbNode">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding="1" cellspacing="1" role="presentation">\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for="${_uId}_r">${redLabel}</label></td><td><input id="${_uId}_r" dojoAttachPoint="Rval" size="1" dojoAttachEvent="onchange: _colorInputChange"></td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for="${_uId}_g">${greenLabel}</label></td><td><input id="${_uId}_g" dojoAttachPoint="Gval" size="1" dojoAttachEvent="onchange: _colorInputChange"></td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for="${_uId}_b">${blueLabel}</label></td><td><input id="${_uId}_b" dojoAttachPoint="Bval" size="1" dojoAttachEvent="onchange: _colorInputChange"></td></tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class="dijitInline dojoxColorPickerHsv" dojoAttachPoint="hsvNode">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding="1" cellspacing="1" role="presentation">\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for="${_uId}_h">${hueLabel}</label></td><td><input id="${_uId}_h" dojoAttachPoint="Hval"size="1" dojoAttachEvent="onchange: _colorInputChange"> ${degLabel}</td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for="${_uId}_s">${saturationLabel}</label></td><td><input id="${_uId}_s" dojoAttachPoint="Sval" size="1" dojoAttachEvent="onchange: _colorInputChange"> ${percentSign}</td></tr>\n\t\t\t\t\t\t\t\t\t\t<tr><td><label for="${_uId}_v">${valueLabel}</label></td><td><input id="${_uId}_v" dojoAttachPoint="Vval" size="1" dojoAttachEvent="onchange: _colorInputChange"> ${percentSign}</td></tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colspan="2">\n\t\t\t\t\t\t\t\t\t<div class="dojoxColorPickerHex" dojoAttachPoint="hexNode" aria-live="polite">\t\n\t\t\t\t\t\t\t\t\t\t<label for="${_uId}_hex">&nbsp;${hexLabel}&nbsp;</label><input id="${_uId}_hex" dojoAttachPoint="hexCode, focusNode, valueNode" size="6" class="dojoxColorPickerHexCode" dojoAttachEvent="onchange: _colorInputChange">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</td>\n\t</tr>\n</table>\n\n'},function(t,e){t.exports='<div class="dojoxColorPicker" dojoAttachEvent="onkeypress: _handleKey" cellpadding="0" cellspacing="0">\n    <div class="dojoxColorPickers">\n        <div class="dojoxColorPickerBox">\n            \x3c!-- Forcing absolute positioning in style attr due to dojo DND issue with not picking it up from the class. --\x3e\n            <div role="status" title="${saturationPickerTitle}" alt="${saturationPickerTitle}" class="dojoxColorPickerPoint" tabIndex="0" dojoAttachPoint="cursorNode"  style="position: absolute; top: 0px; left: 0px;"></div>\n            <img role="presentation" alt="" dojoAttachPoint="colorUnderlay" class="dojoxColorPickerUnderlay" src="${_underlay}" ondragstart="return false">\n        </div>\n\n        <div class="dojoxHuePicker">\n            \x3c!-- Forcing absolute positioning in style attr due to dojo DND issue with not picking it up from the class. --\x3e\n            <div class="dojoxHuePickerPoint" dojoattachpoint="hueCursorNode" role="status" style="position: absolute; top: 65.15px; left: 0px;"></div>\n            <div class="dojoxHuePickerUnderlay" dojoattachpoint="hueNode" dojoattachevent="onclick: _setHuePoint, onmousedown: _stopDrag" role="presentation"></div>\n        </div>\n\n        <div dojoAttachPoint="previewNode" class="dojoxColorPickerPreview" style="display:none;"></div>\n        <div dojoAttachPoint="safePreviewNode" class="dojoxColorPickerWebSafePreview" style="display:none;"></div>\n    </div>\n\n    <div class="dojoxColorPickerOptional">\n        <label class="dojoxColorPickerControl dojoxColorPickerHex" aria-live="polite" dojoattachpoint="hexNode">\n            Hex\n            <input class="dojoxColorPickerHexCode" dojoAttachPoint="hexCode, focusNode, valueNode" type="text"  id="${_uId}_hex" placeholder="#000000" dojoAttachEvent="onchange: _colorInputChange">\n        </label>\n        <div class="dojoxColorPickerRgb" dojoAttachPoint="rgbNode">\n            <label class="dojoxColorPickerControl">\n                ${redLabel}\n                <input id="${_uId}_r" class="dojoxColorPickerRgbInput dojoxColorPickerRgbInput--left" dojoAttachPoint="Rval" size="1" dojoAttachEvent="onchange: _colorInputChange" type="number" placeholder="0">\n            </label>\n            <label class="dojoxColorPickerControl">\n                ${greenLabel}\n                <input id="${_uId}_g" class="dojoxColorPickerRgbInput dojoxColorPickerRgbInput--middle" dojoAttachPoint="Gval" size="1" dojoAttachEvent="onchange: _colorInputChange" type="number" placeholder="0">\n            </label>\n            <label class="dojoxColorPickerControl">\n                ${blueLabel}\n                <input id="${_uId}_b" class="dojoxColorPickerRgbInput dojoxColorPickerRgbInput--right"  dojoAttachPoint="Bval" size="1" dojoAttachEvent="onchange: _colorInputChange" type="number" placeholder="0">\n            </label>\n        </div>\n        <div class="dojoxColorPickerHsv" dojoAttachPoint="hsvNode">\n            <label for="${_uId}_h">${hueLabel}</label><input id="${_uId}_h" dojoAttachPoint="Hval"size="1" dojoAttachEvent="onchange: _colorInputChange"> ${degLabel}<br/>\n            <label for="${_uId}_s">${saturationLabel}</label><input id="${_uId}_s" dojoAttachPoint="Sval" size="1" dojoAttachEvent="onchange: _colorInputChange"> ${percentSign}<br />\n            <label for="${_uId}_v">${valueLabel}</label><input id="${_uId}_v" dojoAttachPoint="Vval" size="1" dojoAttachEvent="onchange: _colorInputChange"> ${percentSign}<br />\n        </div>\n    </div>\n\n    <div class="mojoCustomColorContainer" data-dojo-attach-point="defaultColorNode">\n        <ul class="mojoCustomColors"></ul>\n    </div>\n\n    <div class="mojoCustomColorContainer mojoCustomColorContainer--special" data-dojo-attach-point="noColorNode" style="display:none;">\n        <ul class="mojoCustomColors mojoCustomColors--special">\n            <li class="mojoCustomColor mojoCustomColor--special">No Color</li>\n        </ul>\n    </div>\n\n    \x3c!-- If we have site colors --\x3e\n    <div class="mojoCustomColorContainer" data-dojo-attach-point="siteColorNode">\n        <label class="mojoCustomColorLabel" title="Colors from http://www.yoursite.com">Your Site Colors <span>(<a href="#">Select Site</a>)</span></label>\n        <ul class="mojoCustomColors"><li style="background:#03050C" class="mojoCustomColor">&nbsp;</li><li style="background:#080A16" class="mojoCustomColor">&nbsp;</li><li style="background:#202035" class="mojoCustomColor">&nbsp;</li><li style="background:#070916" class="mojoCustomColor">&nbsp;</li><li style="background:#00010D" class="mojoCustomColor">&nbsp;</li><li style="background:#FFCCCC" class="mojoCustomColor">&nbsp;</li><li style="background:#18192A" class="mojoCustomColor">&nbsp;</li><li style="background:#FFFFFF" class="mojoCustomColor">&nbsp;</li><li style="background:#000000" class="mojoCustomColor">&nbsp;</li><li style="background:#501254" class="mojoCustomColor">&nbsp;</li><li style="background:#090B17" class="mojoCustomColor">&nbsp;</li></ul>\n    </div>\n    \x3c!-- If we don\'t have site colors --\x3e\n    <div class="mojoCustomColorContainer" data-dojo-attach-point="siteColorForm">\n        <label class="mojoCustomColorLabel">Get Site Colors From</label>\n        <input type="url" />\n        <a href="#">Go</a>\n    </div>\n    <div class="dojoxColorPickerArrow" data-dojo-attach-point="arrow"></div>\n</div>'},function(t,e,n){var i;void 0===(i=function(){return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(22),n(7),n(3),n(9),n(4),n(27),n(2),n(58),n(6),n(31),n(19),n(46),n(51),n(92),n(259),n(228),n(453),n(41),n(11),n(25),n(12),n(20),n(76),n(38),n(118),n(1195),n(1196),n(1197),n(68),n(69),n(574),n(576),n(565),n(21),n(577),n(203),n(139),n(16),n(175),n(72),n(17),n(8),n(15),n(95),n(225),n(26),n(402),n(226),n(134),n(199),n(735),n(741),n(742),n(743),n(744)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E,P,D,N,L,M,B,R,F,O,U,$,H,V,z,W,q,G,Y,K,J,X,Q,Z,tt,et,nt,it){var at=e([k,_,S],{templateString:A,titleText:"Content Studio",badgeText:"Experimental",paneClasses:"filemanager-container",_defaultActions:"edit,delete",_fileDragSignal:null,_showDrag:!1,_reactLoaded:!1,_windowResize:null,_windowOrientationChange:null,allowedFileTypes:null,allowedImageSizes:null,allowedFileSizes:null,actions:null,contextMessage:null,isOverlay:!1,filter:null,onSelect:null,onSelectContentItem:null,onSelectProductItem:null,onComplete:function(){},onLoadWidget:function(){},shouldAutoInsertSingleUploads:!0,shouldChangeFilter:null,shouldChangeGrid:null,shouldChangeSource:null,shouldChangeSourceAccount:null,shouldChangeSourceButtons:!0,source:null,initialSource:null,shouldLoadAutoDesigner:!0,sourceAccountId:null,newSource:null,newSourceAccountId:null,defaultSource:null,currentSourceTabChoices:null,isCampaign:!0,sessionTitle:null,allowAutoDesigner:!1,blockSize:null,autodesignerChannel:null,triggerType:null,relatedAssetsRequired:!1,mobileSourceOptionsNode:null,constructor:function(){this.actions=this._defaultActions},postMixInProperties:function(){this.inherited(arguments),this.rootUrl=B.rootUrl},postCreate:function(){this.shouldLoadAutoDesigner="/i/content/"!==window.location.pathname,this.isOverlay||window.addEventListener("hashchange",function(){this._addLeftNavChangeHandler()}.bind(this)),window._mc&&(this.isCampaign=!window._mc.my_files);var t=u("#wrap");t.length>0&&(t[0].classList.remove("overflow-auto-y"),t[0].classList.remove("overflow-hidden-x"));var e=$.getNativeObject(),i=null!==B.bridgeBundles;if(!e&&i&&(this._reactLoaded=!0,this._addBridge(),(this.allowAutoDesigner||window._mc&&window._mc.my_files)&&(o.add(this.sourceButtons,"showAutoDesigner"),o.add(this.mobileSourceSheet,"showAutoDesigner"))),this.source=this._determineTab(),this.defaultSource=this._determineTab(),this._onSourceChange(),this._initSourceButtons(),this.watch("source",this._onSourceChange.bind(this)),this.watch("sourceAccountId",this._onSourceChange.bind(this)),d(this.importUrlButton,"click",n.hitch(this,"handleImportUrl")),d(this.deleteButton,"click",n.hitch(this,"handleDelete")),d(this.deleteButtonMobile,"click",n.hitch(this,"handleDelete")),d(this.editButton,"click",n.hitch(this,"handleEdit")),d(this.copyUrlButton,"click",n.hitch(this,"handleCopyUrl")),d(this.viewDetailsButton,"click",n.hitch(this,"handleViewDetails")),d(this.viewDetailsButtonMobile,"click",n.hitch(this,"handleViewDetails")),d(this.insertButton,"click",n.hitch(this,"handleInsert")),d(this.selectItemButton,"click",n.hitch(this,"handleSelectItem")),d(this.selectButtonMobile,"click",n.hitch(this,"handleSelectContent")),d(this.uploadButton,"click",n.hitch(this,"handleUpload")),d(this.uploadButtonMobile,"click",n.hitch(this,"handleUpload")),d(this.promoteToBrandButton,"click",n.hitch(this,"handlePromoteToBrand")),p.subscribe("native/content/opensource",n.hitch(this,"toggleMobileSource")),p.subscribe("native/content/openfolder",n.hitch(this,"toggleMobileFolder")),d(this.mobileFolderButton,"click",n.hitch(this,"toggleMobileFolder")),d(this.mobileSourceButton,"click",n.hitch(this,"toggleMobileSource")),d(this.mobileFolderSheetContainer,"click",n.hitch(this,"dismissMobileModal")),d(this.mobileSourceSheetContainer,"click",n.hitch(this,"dismissMobileModal")),this.fileList.selected.watch(this.render.bind(this)),this.folderButton){var a={baseUrl:z.toUrl("content/folders"),target:"files-list"},s=new N(n.mixin({fetchFolders:!0,onFetch:n.hitch(this,(function(){this.moveToFolderButton&&new L(n.mixin({source:s},a),this.moveToFolderButton)}))},a)),l=new N(n.mixin({templateString:E,fetchFolders:!0},a));l.placeAt(this.mobileFolderSheet),r.place(s.domNode,this.folderButton,"only"),o.add(s.domNode,"!width--100@phone")}this._setAccounts([]),this.setupFileBrowse(),p.subscribe("mojo/content-manager/api/upload",n.hitch(this,(function(t){t.promise.then(this.forceRenderFileList.bind(this))}))),p.subscribe("mojo/content-manager/branded-images-refresh",n.hitch(this,(function(){this.updateSourceOptions(),this.forceRenderFileList()}))),p.subscribe("mojo/content-manager/api/auth-channel",n.hitch(this,this._handleAuthChannelOpen)),p.subscribe("mojo/content-manager/instagram-refresh",n.hitch(this,(function(){this.updateSourceOptions(),this.forceRenderFileList()}))),p.subscribe("mojo/content-manager/count",n.hitch(this,(function(t){this.contextMessageNode&&o.toggle(this.contextMessageNode,"hide",0===t)}))),this._refresh(),this._fixParams(),this._setUpFileDrag(),this._setupWindowResize();var c=this.dropTarget,h=this._showDrag,m=-1;R.attach(".file-drop-target",{onDragOver:function(){h=!0},onDragLeave:function(){h=!1,clearTimeout(m),m=setTimeout((function(){h||o.remove(c,"over")}),200)}}),$.getNativeVersion().then(function(t){$.checkForNativeFeature("CONTENT_STUDIO_TOOLBAR",t.versionNumber)&&this.isKioskMode&&this.filtersMobile.remove()}.bind(this)),this._initAnalytics(),this.inherited(arguments)},_fixParams:function(t){if(t){var e=t.allowedFileTypes;e&&"string"==typeof e&&(t.allowedFileTypes=e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/));var i=t.actions;i&&(t.actions=n.isArray(i)?i:i.replace(/^\s+|\s+$/g,"").split(/,\s*/),-1!==t.actions.indexOf("rename")&&t.actions.push("edit")),this.allowAutoDesigner=t.allowAutoDesigner,this.blockSize=t.blockSize,this.sessionTitle=t.sessionTitle,this.triggerType=t.triggerType,this.relatedAssetsRequired=t.relatedAssetsRequired,t.autodesignerChannel&&(this.autodesignerChannel=t.autodesignerChannel)}return t},_setupWindowResize:function(){setTimeout(n.hitch(this,this._adjustHeight),500),this._windowResize=d(window,"resize",n.hitch(this,this._onResizeOrientationChange)),this._windowOrientationChange=d(window,"orientationchange",n.hitch(this,this._onResizeOrientationChange))},_setUpFileDrag:function(){this._fileDragSignal=R.attach("[data-behavior='contentManager_root']",{onDragEnter:n.hitch(this,(function(){this.source.isActionSupported(Q.SOURCE_ACTION_UPLOAD)&&(o.add(this.dropTarget,"over"),this._showDrag=!0)})),onDragOver:n.hitch(this,(function(){this._showDrag=!0})),onDrop:n.hitch(this,(function(e,n,i){this.source.isActionSupported(Q.SOURCE_ACTION_UPLOAD)&&(o.remove(this.dropTarget,"over"),this._uploadFiles(t.map(e,(function(t){return t.content.type?t.content:t}))))}))},this.allowedFileTypes),p.publish("mojo/filemanager/show")},_addBridge:function(){this.shouldLoadAutoDesigner&&Q.getAutoDesigner().then(n.hitch(this,(function(t){if(this.autoDesignerCreds=t,!t.userData.tooltipCompleted&&V.flagIsOn(U.CONTENT_ENGINE_CA_DYNAMIC_HEADER)&&this.isCampaign){var e=u(".adTooltip",this.desktopSourceTabs.domNode)[0];this.newSource&&"content-engine"===this.newSource.id&&o.add(e,"hide"),y(this.desktopSourceTabs.domNode.children,n.hitch(this,(function(t){"content-engine"===u("button",t)[0].getAttribute("data-mc-value")&&this.newSource&&"content-engine"!==this.newSource.id&&o.contains(e,"hide")&&(Y.googleAnalytics.trackEvent("Content Studio","in view","displaying creative assistant tooltip to user"),o.remove(e,"hide"))})))}else this.desktopSourceTabs.showCaTooltip=!1;K("auto-designer").then(function(t){var e=window.location.href,i=e.substring(e.indexOf("?")+1,e.length),a=g.queryToObject(i);this._unmount=t.mountContentStudio(this.autoDesigner,{servicesConfig:this.autoDesignerCreds,autoDesignerConfig:{initialPage:a.initialPage?a.initialPage:null,isCampaign:this.isCampaign,sessionTitle:this.sessionTitle,channel:this.autodesignerChannel,blockSize:this.blockSize,triggerType:a.triggerType?a.triggerType.replace("#",""):this.triggerType,relatedAssetsRequired:this.relatedAssetsRequired},events:{handleMenuClick:n.hitch(this,"toggleMobileSource"),handleCloseClick:n.hitch(this,"onComplete"),insertToCampaign:n.hitch(this,this.select)}})}.bind(this),(function(t){Y.info("content-sutdio","AutoDesigner - bridge failed to load",{message:t})}))})),n.hitch(this,(function(t){Y.info("content-sutdio","AutoDesigner - bridge failed to load",{message:t})})))},_addLeftNavChangeHandler:function(){this.source=this._determineTab(),this.fileList.set("sourceId",this.source.id),this._setSelectedSource(this.source.id),this._refresh()},render:function(){"content-engine"===this.fileList.sourceId?(o.remove(this.autoDesigner,"hide"),o.remove(this.listContainer,"padding-top-bottom--lv8"),o.remove(this.overflow,"overflow-y--auto"),o.add(this.legacyWindow,"hide"),o.add(this.listControls,"hide"),o.add(this.controlsForm,"hide"),o.add(this.overflow,"overflow--visible"),o.add(this.overflow,"transform-up6"),o.add(this.paginationControls,"hide"),o.add(this.listContainer,"padding-bottom--lv8"),o.add(this.contentSearchFormMobile,"hide")):(o.remove(this.overflow,"overflow--visible"),o.remove(this.overflow,"transform-up6"),o.remove(this.paginationControls,"hide"),o.remove(this.legacyWindow,"hide"),o.remove(this.listControls,"hide"),o.remove(this.controlsForm,"hide"),o.remove(this.contentSearchFormMobile,"hide"),o.remove(this.listContainer,"padding-bottom--lv8"),o.add(this.overflow,"overflow-y--auto"),o.add(this.listContainer,"padding-top-bottom--lv8"),o.add(this.autoDesigner,"hide")),this._adjustHeight();var t=this.fileList.getSelectionItems(),e=t.length,n=1===e,i=e>0?t[0]:null;o.remove(this.viewDetailsButton.domNode,"disabled"),a.remove(this.insertButton,"disabled"),a.remove(this.selectItemButton,"disabled"),a.remove(this.viewDetailsButtonMobile,"disabled"),a.remove(this.selectButtonMobile,"disabled"),!1===n&&(o.add(this.viewDetailsButton.domNode,"disabled"),a.set(this.insertButton,"disabled","disabled"),a.set(this.selectItemButton,"disabled","disabled"),a.set(this.viewDetailsButtonMobile,"disabled","disabled"),a.set(this.selectButtonMobile,"disabled","disabled"));var s=this.source.isActionSupported(Q.SOURCE_ACTION_UPLOAD),r=this.source.isActionSupported(Q.SOURCE_ACTION_SEARCH);"content-engine"===this.fileList.sourceId&&(r=!1,s=!1),o.toggle(this.uploadButton.domNode,"hide",!1===s),o.toggle(this.uploadButtonMobile,"show-phone",!0===s),o.toggle(this.uploadButtonMobile,"hide",!1===s),o.toggle(this.uploadButtonMobile,"show-phone",!this.isKioskMode),o.toggle(this.uploadButtonMobile,"hide",this.isKioskMode),o.add(this.selectPane.domNode,"hide-mobile");var l=n&&i.isImage()&&this.source.isActionSupported(Q.SOURCE_ACTION_EDIT);o.toggle(this.editButton.domNode,"hide",!1===l),!1===this.canEditSelection&&a.set(this.viewDetailsButtonMobile,"disabled","disabled");var d=n&&i.isImage()&&this.source.isActionSupported(Q.SOURCE_ACTION_PROMOTE_TO_BRAND);o.toggle(this.promoteToBrandButton.domNode,"hide",!1===d);var c=this.source.isActionSupported(Q.SOURCE_ACTION_DELETE);o.toggle(this.deleteButton,"hide",!1===c),o.toggle(this.deleteButtonMobile,"hide",!1===c);var u=this.source.isActionSupported(Q.SOURCE_ACTION_FOLDERS);o.toggle(this.folderButton,"hide",!1===u),o.toggle(this.moveToFolderContainer,"hide",!1===u);var h=this.isActionAvailable("select");o.toggle(this.insertButton,"hide",!1===h),o.toggle(this.selectButtonMobile,"hide",!1===h);var p=this.isActionAvailable("selectItem");o.toggle(this.selectItemButton,"hide",!1===p),o.toggle(this.searchBox.domNode,"hide",!1===r),o.add(this.searchBox.domNode,"hide-phone"),this.contentSearchForm.addEventListener("submit",(function(t){t.preventDefault()})),this.contentSearchFormMobile.addEventListener("submit",(function(t){t.preventDefault()}))},_cleanUpEvents:function(){this.hideFilter&&(this.hideFilter=null),this._windowResize.remove(),this._windowOrientationChange.remove(),this._fileDragSignal&&this._fileDragSignal.detach(),W.globalPublish("mojo/filemanager/hide")},_refresh:function(){var t=$.getNativeObject(),e=null!==B.bridgeBundles;!t&&e&&(this._reactLoaded=!0,this._addBridge(),(this.allowAutoDesigner||window._mc&&window._mc.my_files)&&(o.add(this.sourceButtons,"showAutoDesigner"),o.add(this.mobileSourceSheet,"showAutoDesigner"))),this.shouldChangeSource&&(this.shouldChangeSourceAccount?(this.sourceAccountId=this.newSourceAcccountId,this._setSelectedSource(this.newSource.id),this.fileList.set("sourceAccountId",this.sourceAccountId)):this._setSelectedSource(this.newSource.id));var n=this.allowedFileTypes;(n&&"string"!=typeof n&&(n=n.join()),this.fileList.allowedFileTypes=this.allowedFileTypes,this.fileList.allowedImageSizes=this.allowedImageSizes,this.fileList.allowedFileSizes=this.allowedFileSizes,this.fileList.setOptions({allowedFileTypes:n}),this.filter&&this.fileList.setFilter(this.filter.name,this.filter.value),this.contextMessage)?new q(this.contextMessage).placeAt(this.contextMessageNode,"only"):r.empty(this.contextMessageNode);this.render()},forceRenderFileList:function(){var t=new i,e=p.subscribe(this.fileList.getTopic(),(function(){t.resolve(),e.remove()}));return this.fileList.render(),t.promise},_onSourceChange:function(){var t=this.source;this._filter&&(this.isCampaign||window._mc.hash_switch_enabled?this._filter=void 0:this._filter.clearFilters()),this.mobileSourceTabs&&(this.mobileSourceTabs.setValue(t.id),this.mobileSourceButtonLabel.innerText=t.userLabel),this.source=t,this.fileList.sourceId&&this.fileList.sourceId!==this.source.id&&Y.info("content-studio","tab changed",{newSource:t.id,oldSource:this.fileList.sourceId}),this.fileList.set("sourceId",t.id),this.dismissMobileModal(),this._ndOnSourceChangeSideEffect(t),this.updateSourceOptions(),this.render()},_getSourceInputOptions:function(){return Q.getSources().map((function(t){return t.toInputOption()}))},_getMobileLogoInputOptions:function(){return Q.getSources().filter((function(t){return t.supportsKioskMode})).map((function(t){return t.toInputOption()}))},updateSourceOptions:function(){var t=this.fileList.sourceId;Q.getSourceOptions(t).then(n.hitch(this,(function(t){var e=t.source_options;this._setFilters(e.filters),this._setSorts(e.sorts),this._setAccounts(e.accounts)})))},_handleAuthChannelOpen:function(){c({channel:Q.getAuthChannel(),pusher:H.load()}).then(n.hitch(this,(function(t){var e=t.pusher.subscribe(t.channel);e.bind("update",n.hitch(this,this.updateSourceOptions)),e.bind("update",n.hitch(this,this.forceRenderFileList))})))},_onAccountChange:function(t){this.sourceAccountId=t,this.fileList.set("sourceAccountId",t),this.updateSourceOptions(),this.render()},isActionAvailable:function(t){return-1!==this.actions.indexOf(t)},_initSourceButtons:function(){this.desktopSourceTabs&&this.desktopSourceTabs.destroy();var t=this._getSourceInputOptions(),e=this.source.id;this.currentSourceTabChoices=at.DEFAULT_SOURCE_TAB_CHOICES,this.desktopSourceTabs=new X({options:t,templateString:"<ul></ul>",itemTpl:j,activeClass:"v-buttonGroupList--active",showCaTooltip:V.flagIsOn(U.CONTENT_ENGINE_CA_DYNAMIC_HEADER)}),this.isCampaign&&(this.desktopSourceTabs.placeAt(this.sourceButtons),this.desktopSourceTabs.startup(),this.desktopSourceTabs.setSelected(e),T(this,"source",this.desktopSourceTabs,"value",at.MVC_SYNC_OPTIONS));var n=this._getSourceInputOptions().map((function(t){return t.value===e&&(t.selected=!0),t})).filter((function(t){return"content-engine"!==t.value})),i=r.create("div");o.add(i,"show-mobile width--100@phone display--inline-block margin-right--lv3 margin-right--lv0@phone"),this.mobileSourceTabs=new w({options:n,class:"!margin--lv0"}).placeAt(i),r.place(i,this.filterFolderButtons,"first");var a=window.location.href.includes("mobile-content");this.mobileLogoSourceTabs=new X({options:a?this._getMobileLogoInputOptions():t,templateString:"<ul></ul>",itemTpl:j,activeClass:"v-buttonGroupList--active"}),this.mobileLogoSourceTabs.placeAt(this.mobileSourceSheet),T(this,"source",this.mobileLogoSourceTabs,"value",at.MVC_SYNC_OPTIONS),o.add(this.filterFolderButtons,"hide-phone"),T(this,"source",this.mobileSourceTabs,"value",at.MVC_SYNC_OPTIONS)},_updateSourceButtons:function(t){t!==at.DEFAULT_SOURCE_TAB_CHOICES?this.mobileSourceTabs.set("disabled",!0):this.mobileSourceTabs.set("disabled",!1),y(this.desktopSourceTabs.domNode.children,(function(e){var n=u("button",e)[0],i=n.getAttribute("data-mc-value");-1!==t.indexOf(i)?a.remove(n,"disabled"):a.set(n,"disabled",!0)}))},_ndOnSourceChangeSideEffect:function(t){"product"===t.id?this._ndDisplayMessagingIfNeeded():this._ndHideMessaging()},_ndDisplayMessagingIfNeeded:function(){V.isND&&(u(".ndFeedback").length||V.flagIsOn(U.ND_CIRCUIT_BREAKER_DISCONNECT)&&new q({type:"warning",title:"Products from your Shopify store are no longer available.",message:"<a href='https://mailchimp.com/help/shopify-workarounds/'>Learn how you can add your product images from Shopify</a>",containerClass:"ndFeedback margin--lv2 margin-bottom--lv0"}).placeAt(this.feedbackContainerNode))},_ndHideMessaging:function(){u(".ndFeedback").forEach((function(t){t.remove()}))},_initAnalytics:function(){var e=u("[data-mc-value]",this.sourceButtons);t.forEach(e,n.hitch(this,(function(t){this._logGoogleAnalytics(t,"Tab / "+t.innerText.trim())}))),this._logGoogleAnalytics(this.uploadButton,"Button / Upload"),this._logGoogleAnalytics(this.uploadButtonMobile,"Button / Upload"),this._logGoogleAnalytics(this.importUrlButton,"Button / Import from URL"),this._logGoogleAnalytics(this.viewDetailsButton,"Button / View Details"),this._logGoogleAnalytics(this.editButton,"Button / Edit Image"),this._logGoogleAnalytics(this.copyUrlButton,"Button / Copy URL"),this._logGoogleAnalytics(this.promoteToBrandButton,"Button / Set My Logo"),this._logGoogleAnalytics(this.deleteButton,"Button / Delete"),this._logGoogleAnalytics(this.insertButton,"Button / Insert"),this._logGoogleAnalytics(this.selectItemButton,"Button / Select Item")},_logGoogleAnalytics:function(t,e){t&&d(t,"click",(function(){window.ga("send","event","Content Studio","Content Studio Index",e)}))},_setSelectedSource:function(t){this.set("source",Q.getSource(t)),"function"==typeof window.ga&&window.ga("send","pageview")},_selectFirstItem:function(){var t=this.fileList.getItems(),e=[b(t)[0].contentId];this.fileList.setSelection(e)},_determineTab:function(){if("URLSearchParams"in window)switch(new URL(window.location.href).searchParams.get("tab")){case"files":return Q.getSource(Q.SOURCE_FILE);case"instagram":return Q.getSource(Q.SOURCE_INSTAGRAM);case"brand":return Q.getSource(Q.SOURCE_BRAND);case"autodesigner":return Q.getSource(Q.SOURCE_CONTENT_ENGINE)}if(window.location.hash)switch(window.location.hash){case"#myfiles":return Q.getSource(Q.SOURCE_FILE);case"#instagram":return Q.getSource(Q.SOURCE_INSTAGRAM);case"#mylogo":return Q.getSource(Q.SOURCE_BRAND);case"#giphy":return Q.getSource(Q.SOURCE_GIPHY);case"#products":return Q.getSource(Q.SOURCE_PRODUCT)}if(this.source)return this.source;if(this.initialSource)switch(this.initialSource){case"autodesigner":return this.shouldLoadAutoDesigner?Q.getSource(Q.SOURCE_CONTENT_ENGINE):Q.getSource(Q.SOURCE_FILE)}return Q.getSource(at.INITIAL_SOURCE)},setupFileBrowse:function(){d(this.fileBrowse,"change",n.hitch(this,(function(t){var e=t.target.files||t.dataTransfer.files;this._uploadFiles(e),this.fileBrowse.form.reset()})))},handleInsert:function(){var t=this.fileList.getSelectionItems();1!==t.length&&W.globalPublish("show-toast",[{message:"You can't insert more than one item at a time.",type:"warning"}]);var e=t[0];Q.getInfo(e.contentId,e.sourceId).then(n.hitch(this,"select"))},handleSelectItem:function(){var t=this.fileList.getSelectionItems();1!==t.length&&W.globalPublish("show-toast",[{message:"You can't insert more than one item at a time.",type:"warning"}]);var e=t[0];Q.getInfo(e.contentId,e.sourceId).then(n.hitch(this,"selectProductItem"))},handleSelectContent:function(){if(!0===this.isKioskMode){var t=this.fileList.getSelectionItems();t[0]&&(this.invokeOnSelectHandler(t[0]),this.fileList.clearSelectionModel())}else this.handleInsert()},handleUpload:function(t){this.fileBrowse.click()},handleViewDetails:function(){var t=this.fileList.getSelectionItems();1!==t.length&&W.globalPublish("show-toast",[{message:"You can't view the details of more than one item at a time.",type:"warning"}]);var e=t[0],n=new tt({contentManager:this,sourceId:e.sourceId,contentId:e.contentId});n.startup(),n.show({forceOnTop:!0})},handleDelete:function(){this.deleteFile(this.fileList.getSelection().join())},handleImportUrl:function(){this._showImportDialog()},handleEdit:function(){var t=this.fileList.getSelectionItems();if(1===t.length){var e=t[0];this.editContent(e)}else W.globalPublish("show-toast",[{message:"You can't edit more than one item at a time.",type:"warning"}])},editContent:function(t,e){var i=t.url;e=e||t.contentId,o.toggle(this.actionPane,"disabled-container");var a=this.actionPane;return F.open(i).then(n.hitch(this,(function(t){return this.importFromUrl(t,!0,e).then(n.hitch(this,(function(t){return o.toggle(a,"disabled-container"),t})))})),(function(){o.toggle(a,"disabled-container")}))},handleCopyUrl:function(t){var e=this.fileList.getSelectionItems();if(1===e.length){var n=e[0];this.copyUrl(n)}else W.globalPublish("show-toast",[{message:"You can't copy more than one item at a time.",type:"warning"}])},handlePromoteToBrand:function(t){var e=this.fileList.getSelectionItems();if(1===e.length){var n=e[0],i=Q.generateContentOriginFromContentItem(n),a=n.getDisplayUrl();return Q.uploadFromUrl(Q.SOURCE_BRAND,i,a).then((function(t){if(t.error){var e=t.data;if(e.code!==Q.ERROR_CODE_FILE_CONFLICT)throw e;var n=new it;return n.show(),n.getPromise().then((function(){return Q.uploadFromUrl(Q.SOURCE_BRAND,i,a,Q.CONFLICT_STRATEGY_OVERWRITE)}))}})).then(G.setBrandItem,this._showErrorToast("Failed to set image as logo")).then(this._setSelectedSource.bind(this,Q.SOURCE_BRAND)).then(this.forceRenderFileList.bind(this)).then(this._selectFirstItem.bind(this))}W.globalPublish("show-toast",[{message:"You can't copy more than one item at a time.",type:"warning"}])},toggleMobileSource:function(){o.toggle(this.mobileSourceSheetContainer,"open")},toggleMobileFolder:function(){o.toggle(this.mobileFolderSheetContainer,"open")},dismissMobileModal:function(){o.remove(this.mobileFolderSheetContainer,"open"),o.remove(this.mobileSourceSheetContainer,"open")},renameContent:function(t){var e=I.decode(t.name),i=new nt({name:e});i.show();var a=i.deferred;return a.then(n.hitch(this,(function(e){return this._onContentRename(t,e)})),(function(t){if(!a.isCanceled())throw t}))},_onContentRename:function(t,e){return Q.rename(t.contentId,null,e).then(n.hitch(this,(function(t){return W.globalPublish("show-toast",[{message:"File renamed successfully.",type:"success"}]),this.fileList.render(),t})),(function(){W.globalPublish("show-toast",[{message:"Failed to rename file.",type:"error"}])}))},copyUrl:function(t){O.copy(t.url),W.globalPublish("show-toast",[{message:"The file URL is copied—paste when you're ready.",type:"success"}])},_isAllowedFileType:function(e){return!this.allowedFileTypes||t.some(this.allowedFileTypes,(function(n){return"image"===n?t.some(["image/png","image/jpeg","image/gif","image/url"],(function(t){return e.type===t})):e.name.split(".").pop()===n||e.type===n||e.type.split("/")[1]===n||e.type.split("/")[0]===n}))},_uploadFiles:function(e){if(e&&0!==e.length){var i=[],a=[];t.forEach(e,(function(t){this._isAllowedFileType(t)?i.push(t):a.push(t)}),this),t.forEach(i,(function(t){this._uploadToCurrentFolder(t).then(n.hitch(this,(function(t){1===i.length&&this.shouldAutoInsertSingleUploads&&this.select(t)})))}),this),a.length&&W.globalPublish("show-toast",[{message:"We can't upload that file type.",type:"error"}])}},_uploadToCurrentFolder:function(t,e){var n=this.fileList.getFilter("folder");return this.uploadFile(t,n,e)},uploadFile:function(t,e,n){var i;this.actions;if(-1!==["file/url","image/url"].indexOf(t.type)){var a=t.content;i=t.contentId?Q.updateOrUploadFromUrl(null,t.contentId,a):Q.uploadFromUrl(Q.SOURCE_FILE,null,a)}else if("data/image"===t.type&&t.contentId)i=Q.update(null,t.contentId,t.content);else{i=Q.readFileAsDataUrl(t).then((function(n){return Q.upload(null,n,t.name,{folder:e})}))}p.publish("mojo/content-manager/api/upload",{file:t,promise:i,skipUploadPane:n});var o=t.type.split("/").shift()?t.type.split("/").shift():"file",s=t.size>975e4?"Your file is too big. Resize your "+o+" to 10MB or smaller, then try uploading again.":"An error occurred while uploading.";return i.then(function(t){return t.error&&(Y.googleAnalytics.trackEvent("Content Studio","Content Studio Index","file_upload_error"),this._showErrorToast(s)(t)),t}.bind(this),this._showErrorToast(s)),i},_showErrorToast:function(t){return function(e){if("CancelError"!==e.name){var n=e&&e.response&&e.response.data?e.response.data.error:t;W.globalPublish("show-toast",[{message:n,type:"error"}])}throw e}},_showImportDialog:function(){var t=new et;t.show(),t.deferred.then(n.hitch(this,(function(t){return this.importFromUrl(t)}))).then(n.hitch(this,(function(t){this.select(t)})),(function(){}))},select:function(t){if(!1!==this.isActionAvailable("select")&&!1!==this.hasOnSelectHandler()){if(Y.info("content-studio","Content Inserted",{source:t.sourceId,url:t.url}),"ads"===this.autodesignerChannel&&p.publish("content/carousel/landscapeAdUsed",{landscapeAdUsed:"single_landscape_ad"===t.designSize}),Q.getSource(t.sourceId).isHostedElsewhere){var e=Q.generateContentOriginFromContentItem(t),i=t.getDisplayUrl();t=Q.uploadFromUrl(Q.SOURCE_FILE,e,i)}return m(t,n.hitch(this,(function(t){this.onComplete(),this.invokeOnSelectHandler(t)})))}},selectProductItem:function(t){!1!==this.isActionAvailable("selectItem")&&!1!==this.hasOnSelectHandler()&&(this.onComplete(),this.invokeOnSelectHandler(t))},hasOnSelectHandler:function(){return null!==this.onSelect||null!==this.onSelectContentItem||null!==this.onSelectProductItem},invokeOnSelectHandler:function(t){if(!1===this.hasOnSelectHandler())throw new Error("No onSelect handler registered to ContentManager");null!==this.onSelectContentItem?this.onSelectContentItem(t):null!==this.onSelect?this.onSelect(t.getCanonicalUrl(),t.name,t.contentId):null!==this.onSelectProductItem&&this.onSelectProductItem(t)},importFromUrl:function(t,e,n){var i="file/url";return"string"==typeof t&&0===t.indexOf("data:image/")&&(i="data/image"),this._uploadToCurrentFolder({content:t,type:i,contentId:n},e)},deleteFile:function(t){var e=this,n=new(0,this.source.deleteModalClass)({fileid:t});n.show();var i=n.deferred.then((function(n){return e._onFileDelete(t)})),a=this.source.onDeleteHandler;return i.then(a)},_onFileDelete:function(t){var e=Q.delete(t,this.source.id);return e.then(n.hitch(this,(function(e){this.fileList.render();var n=t.split?t.split(",").length:1,i=n+" file"+(n>1?"s":"")+" deleted.";W.globalPublish("show-toast",[{message:i,type:"success"}])})),(function(){W.globalPublish("show-toast",[{message:"Failed to delete file(s).",type:"error"}])})),e},_onResizeOrientationChange:function(){setTimeout(n.hitch(this,this._adjustHeight),500)},_adjustHeight:function(){if(this.fileList&&"content-engine"===this.fileList.sourceId)a.remove(this.listContainer,"style");else{var t=l.position(this.domNode).y,e=window.innerHeight-t,n=o.contains(this.listControls,"hide")?0:l.getMarginBox(this.listControls).h,i=l.getMarginBox(this.topBar).h,s=e-t-i-n-l.getMarginBox(this.paginationControls).h;this.isOverlay||(s=e-t-i-n),l.setMarginBox(this.listContainer,{h:s})}},_setFilters:function(t){this._filter&&this._filter.destroy(),this._filterMessage&&this._filterMessage.destroy(),0!==t.length&&(this._filter=new P({target:"files-list",filters:t}),r.place(this._filter.domNode,this.filterButton,"only"),this._filterMessage=new D({target:"files-list",filters:n.clone(t).concat([{key:"search",type:"search"}])}),r.place(this._filterMessage.domNode,this.filterMessage,"only"))},_setSorts:function(e){if(this._sort&&this._sort.destroy(),0!==e.length){var n=[];t.forEach(e,(function(t){var e=t.key;n.push([e+"-asc",t.asc]),n.push([e+"-desc",t.desc])})),this._sort=new M({target:"files-list",syncAttr:"sort",label:"Sort by",values:n}),this._mobileSort=new M({target:"files-list",syncAttr:"sort",label:"Sort by",values:n}),r.place(this._sort.domNode,this.sortButton,"only"),r.place(this._mobileSort.domNode,this.mobileSortButton,"only")}},_setAccounts:function(t){if(this._accounts&&this._accounts.destroy(),0!==t.length){o.toggle(this.accountSelector,"hide",!1);var e=r.create("div");o.add(e,"show-mobile width--100@phone display--inline-block margin-right--lv3 margin-right--lv0@phone");var n=this.sourceAccountId,i=t.map((function(t){return{value:t.id,label:t.name,selected:t.id===n}})),a=new w({name:"accountSelector",options:i,class:"!margin--lv0"}).placeAt(e),s=this;a.on("change",(function(){s._onAccountChange(this.get("value"))})),r.place(a.domNode,this.accountSelector,"only"),o.add(a.domNode,"!width--100@phone"),this.fileList.set("sourceAccountID",i[0].id)}else o.toggle(this.accountSelector,"hide",!0)},_paneDidShow:function(){this._fileDragSignal=R.attach(".c-topSliderPane_content",{onDragEnter:n.hitch(this,(function(){this.source.isActionSupported(Q.SOURCE_ACTION_UPLOAD)&&(o.add(this.dropTarget,"over"),this._showDrag=!0)})),onDragOver:n.hitch(this,(function(){this._showDrag=!0})),onDrop:n.hitch(this,(function(e,n,i){this.source.isActionSupported(Q.SOURCE_ACTION_UPLOAD)&&(o.remove(this.dropTarget,"over"),this._uploadFiles(t.map(e,(function(t){return t.content.type?t.content:t}))))}))},this.allowedFileTypes),p.publish("mojo/filemanager/show"),setTimeout(n.hitch(this,this._adjustHeight),500),this._windowResize=d(window,"resize",n.hitch(this,this._onResizeOrientationChange)),this._windowOrientationChange=d(window,"orientationchange",n.hitch(this,this._onResizeOrientationChange))},_paneWillShow:function(){this.shouldChangeSource&&(this.shouldChangeSourceAccount?(this.sourceAccountId=this.newSourceAcccountId,this._setSelectedSource(this.newSource.id),this.fileList.set("sourceAccountId",this.sourceAccountId)):this._setSelectedSource(this.newSource.id));var t=this.allowedFileTypes;(t&&"string"!=typeof t&&(t=t.join()),this.fileList.allowedFileTypes=this.allowedFileTypes,this.fileList.allowedImageSizes=this.allowedImageSizes,this.fileList.allowedFileSizes=this.allowedFileSizes,this.fileList.setOptions({allowedFileTypes:t}),this.filter&&this.fileList.setFilter(this.filter.name,this.filter.value),this.contextMessage)?new q(this.contextMessage).placeAt(this.contextMessageNode,"only"):r.empty(this.contextMessageNode);this.render()},_paneDidHide:function(){this.hideFilter&&(this.hideFilter=null),this._windowResize.remove(),this._windowOrientationChange.remove(),this._fileDragSignal&&this._fileDragSignal.detach(),W.globalPublish("mojo/filemanager/hide")},_handleShow:function(t){this._updateParams(t),this.onLoadWidget()},_handleHide:function(){var t=u("#wrap");t.length>0&&(t[0].classList.add("overflow-auto-y"),t[0].classList.add("overflow-hidden-x"))},_updateParams:function(t){this._updateParamsCleanup();var e=this._fixParams(t);return n.mixin(this,e),this.inherited(arguments)},_updateParamsCleanup:function(){this.allowedFileTypes=null,this._resetOnSelectHandler(),this.onSave=null,this.actions=this._defaultActions},_resetOnSelectHandler:function(){this.onSelect=null,this.onSelectContentItem=null}});at.INITIAL_SOURCE=Q.SOURCE_FILE,at.MVC_SYNC_OPTIONS={converter:{format:function(t){return t.id},parse:function(t){return Q.getSource(t)}}},at.DEFAULT_SOURCE_TAB_CHOICES=[Q.SOURCE_FILE,Q.SOURCE_GIPHY,Q.SOURCE_PRODUCT,Q.SOURCE_INSTAGRAM,Q.SOURCE_BRAND],at.PRODUCT_SOURCE_TAB_CHOICES=[Q.SOURCE_PRODUCT],at.KIOSK_MODE_SOURCE_TAB_CHOICES=[Q.SOURCE_FILE,Q.SOURCE_PRODUCT,Q.SOURCE_INSTAGRAM];var ot=e([at],{onFileBrowseSuccess:null,onFileBrowseError:null,onFileBrowseCancel:null,onMobileBackEvent:null,_handleShow:function(){this.onMobileBackEvent=p.subscribe("current/close/content/manager/for/mobile",n.hitch(this,this.hide)),window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.setScreenState({state:"contentManager",backAction:n.hitch(this,this.hide)}),this.inherited(arguments)},_handleHide:function(){this.onMobileBackEvent&&this.onMobileBackEvent.remove(),window.top&&window.top.app&&window.top.app.nativeStateHandler&&window.top.app.nativeStateHandler.removeStateQueue(),this.inherited(arguments)},_getSourceInputOptions:function(){var t=[];return Q.getSources().forEach((function(e){e.supportsMobile&&t.push(e.toInputOption())})),t},_handleAndroidFileUploadSuccess:function(t){this._removeFileBrowseSubscribe(),this.select(Q.buildImageItemFromNativeApiCall(t))},_handleAndroidFileUploadError:function(t){this._removeFileBrowseSubscribe();var e=t&&t.detail?t.detail:"An error occurred while uploading.";throw W.globalPublish("show-toast",[{message:e,type:"error"}]),t},_handleAndroidFileCancel:function(){this._removeFileBrowseSubscribe()},_addFileBrowseSubscribe:function(){this.onFileBrowseSuccess=p.subscribe("content/manager/native/upload/success",n.hitch(this,this._handleAndroidFileUploadSuccess)),this.onFileBrowseError=p.subscribe("content/manager/native/upload/error",n.hitch(this,this._handleAndroidFileUploadError)),this.onFileBrowseCancel=p.subscribe("content/manager/native/upload/cancel",n.hitch(this,this._handleAndroidFileCancel))},_removeFileBrowseSubscribe:function(){this.onFileBrowseSuccess.remove(),this.onFileBrowseError.remove(),this.onFileBrowseCancel.remove()},setupFileBrowse:function(){"Android"===$.getNativeObject()?(this.mobileUtils=$,d(this.fileBrowse,"click",n.hitch(this,(function(t){t.preventDefault(),this._addFileBrowseSubscribe(),this.mobileUtils.androidFileBrowse()})))):(this.inherited(arguments),this.fileBrowse.accept="image/*")}});return $.getNativeObject()?ot:at}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(67),n(575)],void 0===(a=function(t,e,n,i){return t([i,n],{init:function(){this.inherited(arguments),setTimeout(e.hitch(this,(function(){var t=this.target.getFilter("folder");t&&(this.getFolder(t)?this.setSelectedFolder(this.target.getFilter("folder"),!0):this.target.clearFilter("folder"))})),0)},onSelect:function(t){this.target.setFilter("folder",t)},onDeselect:function(){this.target.clearFilter("folder")},canDisplay:function(){return this.inherited(arguments)||this.target.hasFilter("folder")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1200),n(1201),n(1),n(5),n(6),n(31),n(4),n(9),n(3),n(7),n(2),n(35),n(15),n(17),n(734),n(43),n(38),n(114),n(143),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y){var w=t(v,{renderAsHtml:!1,rawVal:"",editable:!0,_onMouseOver:function(){},_onClick:function(t){return this.editing?(t.stopPropagation(),void t.preventDefault()):(this._onMouseOut(),this.onClick(t))},postCreate:function(){this.inherited(arguments),this.editable?(p(this.displayNode,"[data-folder-action=remove]:click",o.hitch(this,"_delete")),p(this.displayNode,"[data-folder-action=edit]:click",o.hitch(this,"edit"))):r("[data-folder-action]",this.displayNode).style("display","none")},_setValueAttr:function(t){this.inherited(arguments);var e="<span>"+y.encode(y.decode(this.value))+"</span>";(this.folder.count||0==this.folder.count)&&(e+='<div class="badge !margin--lv0 float-right folder-count">'+this.folder.count+"</div>"),e+='<a href="javascript:void(0);" data-folder-action="remove" class="mailchimpInlineHandle freddicon remove-circle" title="Delete"></a>',e+='<a href="javascript:void(0);" data-folder-action="edit" class="mailchimpInlineHandle freddicon edit" title="Edit"></a>',this.displayNode.innerHTML=e},onDelete:function(){},_delete:function(t){t.stopPropagation(),t.preventDefault(),this.onDelete()},updateCount:function(){r(".folder-count",this.domNode).html(this.folder.count)},_clear:function(){this.domNode.parentNode.removeChild(this.domNode)}});return t([e,n],{templateString:a,widgetsInTemplate:!0,folderRow:'<li data-folder-id="{id}" class="selfclear">{name}</li>',selectable:!0,canEdit:!0,canAdd:!0,includeAll:!0,fetchFolders:!1,baseUrl:null,defaultNewFolder:"New Folder",_defaultButtonText:"Folders",filter:"",constructor:function(){this._watches=[],this.foldersDom={}},uninitialize:function(){s.forEach(this._watches,(function(t){t.unwatch()})),this._watches=[],this.inherited(arguments)},postMixInProperties:function(){if(!this.baseUrl)throw new Error("Must provide a baseUrl to setup Folders");this.source?this.folders=this.source.folders:this.folders=new i(this.folders&&this.folders.length?o.clone(this.folders):[]),this.addBtnCss=this.canEdit?"unit size1of2 !padding-left--lv0 nochange":"unit size1of1 !padding-left--lv0 !padding-right--lv0 nochange",this.editBtnCss=this.canAdd?"lastUnit size1of2 !padding-right--lv0 nochange":"unit size1of1 !padding-left--lv0 !padding-right--lv0 nochange",this.removeBtnCss="unit size1of1 !padding-left--lv0 !padding-right--lv0 nochange",this.buttonText||(this.buttonText=this._defaultButtonText)},postCreate:function(){this.init()},toggleAddButton:function(t){u.toggle(this.addBtn,"hide",!t)},toggleRemoveButton:function(t){u.toggle(this.removeBtn,"hide",!t)},init:function(){var t=this;this.canEdit||this.canAdd||c.set(this.actionsContainer,"display","none"),this.dropdown.dropDown=this.foldersMenu,this.connect(this.dropdown.dropDown,"onHide",o.hitch(this,"_hideEditMode")),c.set(this.allOption,"display",this.includeAll?"":"none"),this.selectable&&u.add(this.allOption,"selected"),this._createFoldersDom(),t.toggleRemoveButton(!1),this.canEdit?this.own(p(this.editBtn,"click",(function(e){e.stopPropagation(),e.preventDefault(),u.contains(t.folderList,"edit-mode")?t._hideEditMode():t._showEditMode()}))):c.set(this.editBtn,"display","none"),this.canAdd?(this.own(p(this.addBtn,"click",(function(e){e.stopPropagation(),e.preventDefault(),t.request("create",{name:t._generateFolderName()}).then((function(e){t.addFolder(e.new_folder,!0),t.source?t.source.updateCounts(e.folders):t.updateCounts(e.folders),t.onAdd(e.new_folder)}))}))),this.own(p(this.removeBtn,"click",(function(e){e.stopPropagation(),e.preventDefault(),t.onRemoveFromFolder()})))):t.toggleAddButton(!1),p(this.folderList,"li:click",(function(){if(!t.editMode){var e=h.get(this,"data-folder-id");e?t.setSelectedFolder(e):t._deselect(e),t.dropdown.closeDropDown()}})),this._isEmpty()&&this._toggleEmptyMessage(),this._watches.push(this.folders.watch((function(e,n,i){if(!t._fetching){var a=t.foldersDom[i.id];if(a)a.value!=i.name&&a.set("value",i.name),a.set("folder",i),a.updateCount()}}))),this._watches.push(this.folders.watchElements((function(e,n,i){t._fetching||(i.length&&(s.forEach(i,(function(e){var n=t.foldersDom[0],i=n&&!t.shouldExcludeUnfiled?n.domNode:t.folderList,a=d.place(o.replace(t.folderRow,e),i,t.shouldExcludeUnfiled?"first":"after");t._initFolder(e,a)})),t.folders.length<=2&&t._toggleEmptyMessage()),n.length&&(s.forEach(n,(function(e){var n=t.foldersDom[e.id];n.domNode===t.selectedFolder&&t._deselect(e.id),n.destroyRecursive(),delete t.foldersDom[e.id]})),t._isEmpty()&&t._toggleEmptyMessage()))}))),b((function(){if(window.innerWidth<=640){var e=38*(t.folders.length+2),n=window.innerHeight-128;t.folderList.style.maxHeight=e>n?parseInt(n-66,10)+"px":"inherit"}})),this.fetchFolders&&this._fetchFolders()},_fetchFolders:function(){var t=this;t._fetching=!0,t.request("view").then((function(e){s.forEach(e.folders,o.hitch(this,(function(e){t.folders.push(e)}))),t._createFoldersDom(),t._fetching=!1,t._toggleEmptyMessage(),t.onFetch()}))},_generateFolderName:function(){for(var t=s.map(this.folders,(function(t){return t.name})),e=0,n=this.defaultNewFolder;-1!=s.indexOf(t,n);)n=this.defaultNewFolder+" "+e,e++;return n},removeFolder:function(t){s.some(this.folders,o.hitch(this,(function(e,n){return e.id==t&&(this.folders.splice(n,1),!0)})))},getFolder:function(t){var e=null;return s.some(this.folders,(function(n){return n.id==t&&(e=n,!0)})),e},setSelectedFolder:function(t,e){var n=this._getFolderDom(t);if(this.selectable)if(this.selectedFolder===n)this._deselect(t);else{r(this.selectedFolder).removeClass("selected"),u.add(n,"selected");var i="";0!=t&&(i=(this.buttonText==this._defaultButtonText?"Folder":this.buttonText)+" - "),i+=y.encode(y.decode(this.getFolder(t).name)),r(this.dropdown.containerNode).html(i),r(this.allOption).removeClass("selected"),this.selectedFolder=n,e||this.onSelect(t)}else e||this.onSelect(t)},_getFolderDom:function(t){return this.foldersDom[t].domNode},_deselect:function(t){this.selectable&&(r(this.selectedFolder).removeClass("selected"),r(this.dropdown.containerNode).html(this.buttonText),r(this.allOption).addClass("selected")),this.selectedFolder=null,this.onDeselect(t)},addFolder:function(t,e){this.folders.push(t),e&&this.foldersDom[t.id].edit()},_showEditMode:function(){this.editMode=!0,u.add(this.folderList,"edit-mode"),this.editText.innerHTML="Done"},_hideEditMode:function(){this.editMode=!1,u.remove(this.folderList,"edit-mode"),this.editText.innerHTML="Edit Folder"},_isEmpty:function(){return 0==this.folders.length||1==this.folders.length&&0==this.folders[0].id},_toggleEmptyMessage:function(){this._isEmpty()?(r(this.folderList).children().style("display","none"),c.set(this.emptyMessage,"display",this.isForFolder?"none":""),c.set(this.emptyMessageForFolder,"display",this.isForFolder?"":"none")):(r(this.folderList).children().style("display",""),c.set(this.emptyMessage,"display","none"),c.set(this.emptyMessageForFolder,"display","none"),c.set(this.allOption,"display",this.selectable?"":"none"))},_createFoldersDom:function(){s.forEach(this.folders,o.hitch(this,(function(t){var e=d.place(o.replace(this.folderRow,t),this.folderList);this._initFolder(t,e)})))},_initFolder:function(t,e){var n=this,i=new w({value:t.name,folder:t,onCancel:this.onEditCanceled,editable:0!=t.id},e);this.foldersDom[t.id]=i,m.after(i,"onChange",(function(){var e=i.value;t.name=e,s.some(n.folders,(function(e,i){return e.id==t.id&&(n.folders.set(i,t),!0)})),n.request("rename",{id:t.id,name:y.decode(e)}).then((function(){n.onChange(t.id,e)}))})),m.after(i,"onDelete",(function(){n.deleteFolder(t.id)}))},updateCounts:function(t){var e=this;s.forEach(t,o.hitch(this,(function(t,n){s.some(this.folders,(function(i){return i.id==t.id&&(i.count!=t.count&&e.folders.set(n,t),!0)}))})))},deleteFolder:function(t){var e=this.request("delete",{id:t});return e.then(o.hitch(this,(function(e){this.removeFolder(t),this.updateCounts(e.folders),this.onDelete(t)}))),e},request:function(t,e){return e&&(e.__csrf_token=f.__csrfToken),l.post(this.baseUrl+"/"+t,{handleAs:"json",data:o.mixin({filter:this.filter},e)})},onAdd:function(t){},onEditCanceled:function(){},onChange:function(t,e){},onDelete:function(t){},onSelect:function(t){},onRemoveFromFolder:function(){},onDeselect:function(t){},onFetch:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(67),n(575),n(26)],void 0===(a=function(t,e,n,i,a){return t([i,n],{buttonText:"Move To",canEdit:!1,selectable:!1,includeAll:!1,isReportsPage:!1,onMove:function(t,e){this.source&&(this.source.updateCounts(t),this.target.getFilter("folder")?this.target.render():this.source.setSelectedFolder(e),Object.keys(this.source.target.selected).forEach((function(t){"_watchCallbacks"!==t&&!0===this.source.target.selected[t]&&a.googleAnalytics.trackEvent("reports","move to folder","comparative")}),this))},onRemoveFromFolder:function(){this.onSelect(0)},onSelect:function(t){this.request("move-to-folder",{"id[]":this.target.getSelection(),fid:t,filter:this.isReportsPage?"report":""}).then(e.hitch(this,(function(t){this.onMove(t.folders,t.folder?t.folder.id:0)})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(2),n(32),n(5),n(0),n(1),n(63),n(10),n(6),n(3),n(4),n(7)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u=[],h={},p={},m=function(t){o.stop(t),"dragover"==t.type?(l.add(this,"hover-drag"),r(".drop-target",this).addClass("hover")):(l.remove(this,"hover-drag"),r(".hover",this).removeClass("hover"))},g=function(t){var e;o.stop(t),l.remove(this,"hover-drag"),r(".hover",this).removeClass("hover");var i,a=null;if(dojo.some(u,(function(n){return e=r(t.target).closest(n)[0],a=n,e&&Boolean(h[a].onDrop)})),e){var s=[],m=[],g=t.target.files||t.dataTransfer.files;if(g&&g.length)n.forEach(g,(function(t){t&&function(t,e){return!p[t]||n.some(p[t],(function(t){return console.debug(t),e.name.split(".").pop()===t||e.type===t||e.type.split("/")[1]===t||e.type.split("/")[0]===t}))}(a,t)?s.push({type:t.type,content:t}):m.push({type:t.type,content:t})}));else{var f=t.dataTransfer.getData("URL")||t.dataTransfer.getData("Text"),v=function(t){var e=d.toDom(t),n=r("img",e)[0],i=null;return n&&c.get(n,"src")&&(i=c.get(n,"src")),d.destroy(e),i}(t.dataTransfer.getData("text/html"));f&&(i=f,n.some([".jpg",".jpeg",".png",".gif"],(function(t){return-1!=i.indexOf(t)})))?s.push({type:"image/url",content:f}):v&&s.push({type:"image/url",content:v})}h[a]&&h[a].onDrop&&h[a].onDrop(s,t.target,m)}else;};return{attach:function(i,a,o){if(window.File&&window.FileList&&window.FileReader){u.unshift(i),h[i]=a,p[i]=o;var s=[];return a&&(a.onDragEnter&&s.push(t(e.doc,i+":dragenter",a.onDragEnter)),a.onDragOver&&s.push(t(e.doc,i+":dragenter",a.onDragOver)),a.onDragLeave&&s.push(t(e.doc,i+":dragleave",a.onDragLeave))),s.push(t(e.doc,i+":dragover",m)),s.push(t(e.doc,i+":dragleave",m)),s.push(t(e.doc,"drop",g)),s.push(t(e.doc,"dragover",(function(t){t.preventDefault()}))),s.push(t(e.doc,"dragenter",(function(t){t.preventDefault()}))),{detach:function(){n.forEach(s,(function(t,e){t.remove()}))}}}return null}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(579),n(1203),n(1204),n(1205),n(1),n(5),n(6),n(4),n(9),n(118),n(37),n(19),n(18),n(17),n(14),n(8),n(47)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b){return t([e,o,n,a],{page:1,pageSize:g.settings.pageSize,asc:!0,lazy:!1,options:null,_params:{},constructor:function(){this._syncs=[],this._published=!1,this._renderIsQueued=!1},postMixInProperties:function(){this.inherited(arguments),v.inUrl("/#/create-campaign")?this._persisted=!1:this.createHashParams()},postCreate:function(){var t=this.getHashParam("p");t&&this.shouldPersistPage()&&this.set("page",t),this.url||(this.url=document.location.pathname,"/"!=this.url[this.url.length-1]&&(this.url+="/"),this.url+="list"+document.location.search),"/i/"===this.url.substr(0,3)&&(this.url=this.url.substr(2)),this.watch("page",s.hitch(this,(function(){this.render(),this.shouldPersistPage()&&(1===this.page?this.unsetHashParam("p"):this.setHashParam("p",this.page))})));var e=this.getHashParam("s");e&&this.shouldPersistPage()&&this.set("pageSize",e),this.watch("pageSize",s.hitch(this,(function(){1==this.page?this.render():this.set("page",1),g.saveSetting("vis_grid_page_size",this.pageSize),this.shouldPersistPage()&&this.setHashParam("s",this.pageSize)}))),this.watch("url",s.hitch(this,"render")),this.watch("sort",s.hitch(this,"render")),this.watch("asc",s.hitch(this,"render")),this.watch("search",s.hitch(this,"render")),this._filters.watch(s.hitch(this,"render")),this.lazy||this.render()},render:function(){!1===this._renderIsQueued&&(this._renderIsQueued=!0,setTimeout(s.hitch(this,(function(){this._renderIsQueued=!1,this._render()})),0))},_render:function(){this.initialized=!0;var t=setTimeout(s.hitch(this,"renderLoading"),500),e=s.mixin({page:this.page,per_page:this.pageSize,sort:this.sort,asc:this.asc},this.getFilterQuery(),this._getOptions(),this._getParams());this.getData(e).then(s.hitch(this,(function(n){this._removeState(),clearTimeout(t),this.renderData(n,e),n.params&&(this._params=n.params);var i="pagination"in n?n.pagination.total_count:n.count;this.set("total",i),(!this._published||this._published&&0===n.count)&&(p.publish("mojo/analytics/"+this.id+"/ready"),this._published=!0),l(".selectCheckBox",this.domNode).forEach(s.hitch(this,(function(t){var e=f.byNode(t);this.selected[e.value]=this.selected[e.value]||!1,this._syncs.push(u(this.selected,e.value,e,"checked"))}))),p.publish(this.getTopic(),this)})))},getData:function(t){return m.get(this.getUrl(),{handleAs:"json",query:t})},getUrl:function(){return this.url},renderLoading:function(){this.renderContent({content:"<div class='list-loading'></div>"})},renderData:function(t,e){t.count||t.items&&t.items.length>0?(c.set(this.domNode,"display",""),this.emptyNode&&c.set(this.emptyNode,"display","none"),this.renderContent(t,e),h.parse(this.domNode)):(c.set(this.domNode,"display","none"),this.emptyNode||(this.emptyNode=d.place("<div></div>",this.domNode,"after")),c.set(this.emptyNode,"display",""),this.renderEmpty(t,e),h.parse(this.emptyNode))},renderContent:function(t,e){var n=s.trim(t.content);d.place(n,this.domNode,"only")},renderEmpty:function(t,e){var n=s.trim(t.content);d.place(n,this.emptyNode,"only")},setOptions:function(t){this.options=t,this.render()},_getOptions:function(){if(!this.options)return{};var t={};for(var e in this.options)t["options["+e+"]"]=this.options[e];return t},_getParams:function(){if(!this._params)return{};var t={};for(var e in this._params)t["params["+e+"]"]=this._params[e];return t},getTopic:function(){return"mojo/analytics/List/"+this.id+"/render"},shouldPersistPage:function(){return!0},_removeState:function(){r.forEach(this._syncs,(function(t){t.remove()})),this._syncs=[],this.clearSelectionModel(),r.forEach(f.findWidgets(this.domNode),(function(t){t.destroyRecursive()}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(47)],void 0===(a=function(t,e,n){return t(null,{constructor:function(){this.selected=new n},hasSelection:function(){for(var t in this.selected)if(this._valueSelected(t))return!0;return!1},getSelection:function(){var t=[];for(var e in this.selected)this._valueSelected(e)&&t.push(e);return t},isAllSelected:function(){var t=!0;for(var e in this.selected)this._validValue(e)&&(t=t&&this.selected[e]);return t},toggleAll:function(t){for(var e in this.selected)this._validValue(e)&&this.selected.set(e,t)},clearSelectionModel:function(){for(var t in this.selected)this._validValue(t)&&(this.selected.set(t,!1),delete this.selected[t])},setSelection:function(t){this.clearSelectionModel(),t.forEach(function(t){this.selected.set(t,!0)}.bind(this))},_valueSelected:function(t){return this._validValue(t)&&!0===this.selected[t]},_validValue:function(t){return this.selected.hasOwnProperty(t)&&0!=t.indexOf("_")&&null!=this.selected[t]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(1237),n(14),n(6),n(2),n(51),n(5),n(1),n(4),n(3),n(7),n(45),n(10),n(28),n(37),n(52),n(8),n(26),n(16),n(21),n(17),n(36),n(18)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S){return t([e,n],{templateString:i,widgetsInTemplate:!0,fields:{},is_logged_in:!1,site_key:null,isPhoneRequest:!1,isPricingRequest:!1,supportKey:!1,localizedContent:null,locale:"en",mobileData:null,constructor:function(t,e,n,a,o,s,r,l){var d;d=i,this.is_logged_in=t||!1,this.site_key=e,this.isPhoneRequest=n||!1,this.isPricingRequest=a||!1,this.templateString=d,this.supportKey=o||!1,this.localizedContent=s,this.locale=r,C.flagIsOn(w.CED_MOBILE_SUPPORT_TAGGING)&&(this.mobileData=l)},postCreate:function(){this.inherited(arguments),this._checkForSupportKnob(),this._checkForKbRef(),this._checkForRef(),this._checkForMobileData(),S.get(b.toUrl("kb/get-support-settings"),{handleAs:"json"}).then(d.hitch(this,(function(t){t.userData&&(t.userData.name&&h.set(m.byId("name"),"value",t.userData.name),t.userData.username&&h.set(m.byId("username"),"value",t.userData.username),t.userData.email&&h.set(m.byId("email"),"value",t.userData.email))}))).then(d.hitch(this,(function(){this.is_logged_in||(window.grecaptcha.render("captcha-container",{sitekey:this.site_key,theme:"light"}),u.remove(m.byId("captcha-wrapper"),"hide"),u.remove(m.byId("screenshotDiv"),"!margin-bottom--lv5"))})));var t=this;s(this.formNode,"submit",(function(e){e.preventDefault(),e.stopPropagation(),h.set("submit","disabled",!0),S.post(b.toUrl("kb/contact-form-post"),{data:t._getFormData(),headers:{"Content-Type":!1},handleAs:"json"}).then((function(e){if(C.flagIsOn(w.CED_V2_IN_APP_OVERLAY)&&e.ticket_id&&-1!==e.ticket_id&&y.googleAnalytics.trackEvent("help","contact request",e.ticket_id),"es"===dojo.cookie("locale"));else;e.success?(u.add(t.problemNode,"hide"),u.remove(t.successNode,"hide"),c.place("<p>"+e.message+"</p>",t.successMessage,"only")):(h.set("submit","disabled",!1),u.remove(t.problemNode,"hide"),c.place("<p>"+e.message+"</p>",t.problemMessage,"only"))}))}))},userIsLoggedIn:function(){return void 0!==this.is_logged_in&&null!==this.is_logged_in&&!1!==this.is_logged_in},startup:function(){h.set(m.byId("locale-selector"),"value",this.locale);var t=this;this.inherited(arguments);var e=o("[data-dojo-attach-point='backLink']")[0];e&&s(e,"click",(function(){void 0!==a.byId("spanish-request")&&a.byId("spanish-request").destroy(),void 0!==a.byId("topic")&&a.byId("topic").destroy(),void 0!==a.byId("phone-request")&&a.byId("phone-request").destroy(),void 0!==a.byId("phone-cc")&&a.byId("phone-cc").destroy()}));var n=m.byId("spanish-request-container");t.isPhoneRequest||null===n||u.remove(n,"hide"),f.parse(this.formNode).then((function(){o("[data-topics]",this.domNode).addClass("hide");var e=a.byId("topic");if(e&&s(e,"change",(function(){t._showRecommendedArticles(this.value),t._showRelatedFields(this.value)})),t.isPhoneRequest&&(y.info("zendesk-talk-support","Request a phone call form was loaded"),t.enablePhoneRequest(!0),t.hideTopic("stores"),t.hideTopic("appointments")),_.flagIsOn(w.CEC_CONSISTENT_SUPPORT_EXP)&&("integration_partner"!==t.supportKey&&"ecommerce_support"!==t.supportKey||t.preSelectTopic("integrations")),s(m.byId("phone-request"),"change",(function(e){a.byId("phone-request").checked?t.showPhoneField():t.hidePhoneField()})),t.isPricingRequest){var n=m.byId("username").closest("fieldset");u.add(n,"hide");var i=o("[name='have-ticket']")[0].closest("fieldset");u.add(i,"hide");var r=m.byId("screenshot").closest("fieldset");u.add(r,"hide");var d=o("[data-dojo-attach-point='backLink']")[0];u.add(d,"hide"),m.byId("request-type").value="pricing",m.byId("form-title").innerHTML="Request Custom Pricing";var c={value:"unpublished-pricing",label:"Custom Price Quote",selected:!0};a.byId("topic").addOption([c]),a.byId("topic").set("value",c.value),u.add(m.byId("topicSelect"),"hide"),m.byId("subject").value="Custom Price Request",m.byId("submit").innerHTML="Submit Request"}var h=document.getElementsByName("support_key");if(h&&h.length>0&&"ecommerce_support"==h[0].value){c={value:"ecommerce-support",label:"E-commerce",selected:!0};a.byId("topic").addOption([c]),a.byId("topic").set("value",c.value),u.add(m.byId("topicSelect"),"hide")}var p=o("[name='have-ticket']",t.domNode),g=o("[data-element='subject']")[0];l.forEach(p,(function(e){s(e,"change",(function(){"yes"===e.value?g.children[0].innerHTML=t.translateOnHaveTicket(dojo.cookie("locale"),"Ticket Number"):g.children[0].innerHTML=t.translateOnHaveTicket(dojo.cookie("locale"),"Subject")}))}))})),this._setLocaleSelectorValue()},translateOnHaveTicket:function(t,e){return"es"===t?{"Ticket Number":"Número de Ticket",Subject:"Referente a"}[e]:e},enablePhoneRequest:function(t){o("#phone-request-container").removeClass("hide"),t&&(this.showPhoneField(),a.byId("phone-request").set("checked",!0))},showPhoneField:function(){o("#phone-input-container").removeClass("hide"),o("#phone-legal").removeClass("hide")},hidePhoneField:function(){o("#phone-input-container").addClass("hide"),o("#phone-legal").addClass("hide")},_setLocaleSelectorValue:function(){var t=m.byId("locale_selector");if(t){var e=dojo.cookie("locale");"en"!==e&&"es"!==e&&"fr"!==e&&(e="en"),t.value=e}},_getFormData:function(){var t=new FormData,e=p.toObject(this.formNode);for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[n]);var i=m.byId("screenshot").files[0];return i&&t.append("screenshot",i),t},_showRecommendedArticles:function(t){var e=m.byId("recommended-articles"),n=o(".open",this.domNode),i=o('[data-element="'+t+'"]',this.dommNode)[0];n.length>0?(n.removeClass("open"),k(n,"transition.slideUpOut",{complete:function(){void 0===i?u.add(e,"hide"):(u.add(i,"open"),k(i,"transition.slideDownIn",450))},duration:450})):void 0!==i&&(u.remove(e,"hide"),u.add(i,"open"),k(i,"transition.slideDownIn",450))},_showRelatedFields:function(t){o("[data-topics]",this.domNode).forEach((function(e,n,i){var a=JSON.parse(h.get(e,"data-topics"));-1!=l.indexOf(a,t)?u.remove(e,"hide"):u.add(e,"hide")}))},_checkForRef:function(){var t=window.location.pathname;t=(t=t.replace(/^\/|\/$/g,"")).replace("/","_"),c.create("input",{type:"hidden",value:t,name:"ref"},this.formNode,"last")},_checkForSupportKnob:function(){var t=window.location.href,e=t.substring(t.indexOf("?")+1,t.length),n=r.queryToObject(e),i=n.support_key?n.support_key:this.supportKey;i&&c.create("input",{type:"hidden",value:i,name:"support_key"},this.formNode,"last")},_checkForKbRef:function(){"kb.mailchimp.com"===v.getUrlHostname(document.referrer)&&c.create("input",{type:"hidden",value:v.getUrlPath(document.referrer),name:"kb_slg"},this.formNode,"last")},_checkForMobileData:function(){this.mobileData&&C.flagIsOn(w.CED_MOBILE_SUPPORT_TAGGING)&&(this.mobileData.app_version&&c.create("input",{type:"hidden",value:this.mobileData.app_version,name:"app_version"},this.formNode,"last"),this.mobileData.os&&c.create("input",{type:"hidden",value:this.mobileData.os,name:"os"},this.formNode,"last"),this.mobileData.os_version&&c.create("input",{type:"hidden",value:this.mobileData.os_version,name:"os_version"},this.formNode,"last"))},preSelectTopic:function(t){var e=document.getElementById("topic");if(e)for(var n=e.length-1;n>=0;n--)e.options[n].value===t&&(e.options[n].selected=!0)},hideTopic:function(t){var e=document.getElementById("topic");if(e)for(var n=e.length-1;n>=0;n--)e.options[n].value===t&&e.remove(n)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11)],void 0===(a=function(t,e,n){var i=function(t,e,n,i,a,o){for(var s=0,r=["webkit","moz","ms","o"],l=0;l<r.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[r[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[l]+"CancelAnimationFrame"]||window[r[l]+"CancelRequestAnimationFrame"];for(var d in window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-s)),a=window.setTimeout((function(){t(n+i)}),i);return s=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),this.easeOutExpo=function(t,e,n,i){return n*(1-Math.pow(2,-10*t/i))*1024/1023+e},this.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",postFormatter:null,easingFn:null},o)o.hasOwnProperty(d)&&(this.options[d]=o[d]);""===this.options.separator&&(this.options.useGrouping=!1),this.options.prefix||(this.options.prefix=""),this.options.suffix||(this.options.suffix=""),this.options.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.d="string"==typeof t?document.getElementById(t):t,this.startVal=Number(e),this.endVal=Number(n),this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.decimals=Math.max(0,i||0),this.dec=Math.pow(10,this.decimals),this.duration=1e3*Number(a)||2e3;var c=this;this.version=function(){return"1.6.1"},this.printValue=function(t){var e=isNaN(t)?"--":c.formatNumber(t);"INPUT"==c.d.tagName?this.d.value=e:"text"==c.d.tagName||"tspan"==c.d.tagName?this.d.textContent=e:this.d.innerHTML=e},this.count=function(t){c.startTime||(c.startTime=t),c.timestamp=t;var e=t-c.startTime;c.remaining=c.duration-e,c.options.useEasing?c.countDown?c.frameVal=c.startVal-c.options.easingFn.call(c,e,0,c.startVal-c.endVal,c.duration):c.frameVal=c.options.easingFn.call(c,e,c.startVal,c.endVal-c.startVal,c.duration):c.countDown?c.frameVal=c.startVal-(c.startVal-c.endVal)*(e/c.duration):c.frameVal=c.startVal+(c.endVal-c.startVal)*(e/c.duration),c.countDown?c.frameVal=c.frameVal<c.endVal?c.endVal:c.frameVal:c.frameVal=c.frameVal>c.endVal?c.endVal:c.frameVal,c.frameVal=Math.floor(c.frameVal*c.dec)/c.dec,c.printValue(c.frameVal),e<c.duration?c.rAF=requestAnimationFrame(c.count):c.callback&&c.callback()},this.start=function(t){return c.callback=t,c.rAF=requestAnimationFrame(c.count),!1},this.pauseResume=function(){c.paused?(c.paused=!1,delete c.startTime,c.duration=c.remaining,c.startVal=c.frameVal,requestAnimationFrame(c.count)):(c.paused=!0,cancelAnimationFrame(c.rAF))},this.reset=function(){c.paused=!1,delete c.startTime,c.startVal=e,cancelAnimationFrame(c.rAF),c.printValue(c.startVal)},this.update=function(t){cancelAnimationFrame(c.rAF),c.paused=!1,delete c.startTime,c.startVal=c.frameVal,c.endVal=Number(t),c.countDown=c.startVal>c.endVal,c.rAF=requestAnimationFrame(c.count)},this.formatNumber=function(t){var e,n,i,a;if(t=t.toFixed(c.decimals),n=(e=(t+="").split("."))[0],i=e.length>1?c.options.decimal+e[1]:"",a=/(\d+)(\d{3})/,c.options.useGrouping)for(;a.test(n);)n=n.replace(a,"$1"+c.options.separator+"$2");var o=c.options.prefix+n+i+c.options.suffix;return null!=c.options.postFormatter&&(o=c.options.postFormatter(o)),o},c.printValue(c.startVal)};return t([e,n],{templateString:"<span></span>",target:null,startVal:0,endVal:100,decimals:2,duration:2,options:null,postCreate:function(){this.inherited(arguments),this.target||(this.target=this.domNode);var t=new i(this.target,this.startVal,this.endVal,this.decimals,this.duration,this.options);t.start()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(11),n(1240),n(2),n(6),n(7),n(1),n(47),n(147),n(44),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){var c=2*Math.PI,u=function(t,e){t.transition().ease("linear").delay(0).duration(e).attrTween("transform",(function(){return d.interpolateString("rotate(0)","rotate(360)")}))},h=function(t,e,n){t.styleTween(e,(function(){return d.interpolate(this.style[e],n)}))};return t("ProgressCircle",[e,n,l],{templateString:i,percentComplete:0,circleSize:72,pathWidth:2,pathBackgroundColor:"#e0e0e0",progressColor:"#52bad5",successColor:"#72c1b0",errorColor:"#EE836E",endValue:100,canceled:!1,cancelComplete:!1,loading:!0,loaderDuration:1e3,status:"",allowedStatuses:["loading","progress","success","canceling","canceled"],buildRendering:function(){this.inherited(arguments),this.svg=d.select(this.progressCircle).append("svg").attr("width",this.circleSize).attr("height",this.circleSize).append("g").attr("transform","translate("+this.circleSize/2+","+this.circleSize/2+")"),this.arc=d.svg.arc().innerRadius(this.circleSize/2-this.pathWidth).outerRadius(this.circleSize/2).startAngle(0),this.bg=this.svg.append("path").datum({endAngle:c}).style("fill",this.pathBackgroundColor).attr("d",this.arc)},postCreate:function(){this.render(),this.watch("status",(function(t,e,n){if(-1!=this.allowedStatuses.indexOf(n)){switch(n){case"loading":this.toggleForeground("off"),this.toggleTextValue("off"),this.toggleLoader("on");break;case"progress":this.toggleLoader("off"),this.toggleForeground("on"),this.toggleTextValue("on");break;case"success":this.toggleLoader("off"),this.toggleForeground("on"),this.toggleTextValue("off"),this.set("percentComplete",100);break;case"canceling":this.set("canceled",!0),this.toggleForeground("off"),this.toggleTextValue("off"),this.toggleLoader("on");break;case"canceled":this.set("canceled",!0),this.set("cancelComplete",!0),this.toggleLoader("off"),this.toggleForeground("on"),this.toggleTextValue("off"),this.set("percentComplete",100)}this.render()}}))},toggleLoader:function(t){if("on"===t&&void 0===this.loader){this.loader=this.svg.append("path").datum({endAngle:.2*c}).style("fill",this._getStatusColor()).attr("d",this.arc);var e=this;u(e.loader,e.loaderDuration),this.loaderIntervalId=setInterval((function(){u(e.loader,e.loaderDuration)}),e.loaderDuration)}else"off"===t&&this.loader&&(this.loader.transition().delay(0).call(h,"fill",this.pathBackgroundColor),this.loader.remove(),delete this.loader,clearInterval(this.loaderIntervalId))},toggleForeground:function(t){"on"===t&&void 0===this.foreground?this.foreground=this.svg.append("path").datum({endAngle:this.percentComplete/100*c}).style("fill",this._getStatusColor()).attr("d",this.arc):"off"===t&&this.foreground&&(this.foreground.remove(),delete this.foreground)},toggleTextValue:function(t){"on"===t&&void 0===this.textValue?this.textValue=this.svg.append("text").attr("x",0).attr("y",0).attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size","17px").attr("font-weight","600").text(this.percentComplete+"%"):"off"===t&&this.textValue&&(this.textValue.remove(),delete this.textValue)},render:function(){var t=this;this.foreground&&this.foreground.transition().delay(222).duration(666).call((function(e,n,i){e.attrTween("d",(function(e){var i=d.interpolate(e.endAngle,n);return function(n){return e.endAngle=i(n),t.textValue&&t.textValue.text(parseInt(100*e.endAngle/c,10)+"%"),t.arc(e)}}))}),t.percentComplete/100*c,t.percentComplete).call(h,"fill",t._getStatusColor()),this.textValue&&this.textValue.transition().delay(222).duration(333).styleTween("fill",(function(e,n,i){if(t.isCanceled())return d.interpolate(i,t._getStatusColor())})).styleTween("opacity",(function(e,n,i){if(t.isComplete())return d.interpolate(i,0)})),d.select(this.successImage).transition().delay(1333).duration(333).styleTween("opacity",(function(e,n,i){return"success"===t.status?d.interpolate(i,1):d.interpolate(i,0)})).styleTween("transform",(function(t,e,n){return d.interpolate(n,"scale(1)")})),d.select(this.cancelImage).transition().delay(1333).duration(333).styleTween("opacity",(function(e,n,i){return"canceled"===t.status?d.interpolate(i,1):d.interpolate(i,0)})).styleTween("transform",(function(t,e,n){return d.interpolate(n,"scale(1)")}))},setPercent:function(t){void 0!==t&&(this.set("percentComplete",t),this.render())},isLoading:function(){return void 0!==this.loader},isCanceled:function(){return this.canceled},isSuccess:function(){return this.isComplete()&&!this.isCanceled()},isComplete:function(){return 100===this.percentComplete},_getStatusColor:function(){return this.isCanceled()?this.errorColor:this.isSuccess()?this.successColor:this.progressColor}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){return t("Poll",[],{intervalId:null,pollFunction:null,intervalTime:null,constructor:function(t,e){this.pollFunction=t,this.intervalTime=e},start:function(t,e){this.pollFunction=t||this.pollFunction,this.intervalTime=e||this.intervalTime,this.stop(),this.intervalId=setInterval(this.pollFunction,this.intervalTime)},stop:function(){clearInterval(this.intervalId)},getFakeData:function(){return 10}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(4),n(2),n(6),n(19),n(7),n(18),n(8),n(29),n(458),n(17),n(15),n(12),n(11),n(20),n(1251)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){return t([m,g,f],{SUPPORTED_TYPES:["user"],RELEASED:"Released",ACTIVE:"Active",ADD_ENDPOINT:"/misc/flag/add",REMOVE_ENDPOINT:"/misc/flag/remove",templateString:v,isAdmin:!1,postCreate:function(){this._parseChildrenNodes(),this._initSearchBar()},startup:function(){this.inherited(arguments),o("[data-action='showAllFlags']")[0]&&a(o("[data-action='showAllFlags']")[0],"click",this._openDialog.bind(this)),n.remove(this.isAdmin?this.adminMessage:this.nonAdminMessage,"hide")},_initSearchBar:function(){this.searchBar=new u({placeholder:this._getRandomFlagName(),searchTopic:"flagList",onClear:this._hideAll.bind(this),baseClass:"margin-bottom--lv3"}),this.searchBar.placeAt(this.searchContainer),this.searchBar.startup(),s.subscribe("search/flagList",this._handleSearch.bind(this))},_parseChildrenNodes:function(){this.listItems=o("[data-flagName]",this.domNode),this.listItems.forEach(this._addClickListener.bind(this)),this._hideAll()},_handleSearch:function(t){var e=!1;this.listItems.forEach((function(i){var a=-1===i.getAttribute("data-flagName").search(new RegExp(t,"i"));n.toggle(i,"hide",a),a||(e=!0)})),n.toggle(this.noDataBlockContainer,"hide",e)},_getRandomFlagName:function(){return this.listItems[Math.floor(Math.random()*this.listItems.length)].getAttribute("data-flagName")},_hideAll:function(){this.listItems.addClass("hide"),n.add(this.noDataBlockContainer,"hide")},_openDialog:function(t){t.preventDefault(),this.flagListDialog=new c({title:"All feature flags",content:this._getDialogContent()}),this.flagListDialog.startup(),this.flagListDialog.show()},_getDialogContent:function(){var t=i.toDom("<div class='dijitDialogPaneContentArea dijitDialogPaneContentArea--mobile'></div>"),a=i.toDom("<ul class='padding--lv3'></ul>");return this.listItems.forEach(e.hitch(this,(function(t,o){var s=e.clone(t);n.remove(s,"hide"),i.place(s,a,"last"),this._addClickListener(s,o)}))),i.place(a,t,"only")},_addClickListener:function(t,e){a(t,"click",this._itemClicked.bind(this,e))},_itemClicked:function(t,n){if(n.preventDefault(),this.isAdmin){var i=JSON.parse(r.get(this.listItems[t],"data-flagInfo")),a=i.status===this.ACTIVE,o=i.status===this.RELEASED;if(!(this.SUPPORTED_TYPES.indexOf(i.scheme)>-1))return void p.toast("This type of flag can't be toggled by clicking yet.");if(o)return;this._showLoader(!0),l.post(d.toUrl(a?this.REMOVE_ENDPOINT:this.ADD_ENDPOINT),{handleAs:"json",data:{feature_id:i.name,__csrf_token:h.getCsrfToken()}}).then(e.hitch(this,(function(t){t.general_error?(this._hideLoader(),p.toast(t.general_error)):document.location.reload(!0)})))}},_showLoader:function(){this.loaderContainer&&(n.remove(this.loaderContainer,"hide"),n.add(this.containerNode,"hide"),n.add(this.searchContainer,"hide"),n.add(this.adminMessage,"hide"),this.flagListDialog&&this.flagListDialog.hide())},_hideLoader:function(){this.loaderContainer&&(n.add(this.loaderContainer,"hide"),n.remove(this.containerNode,"hide"),n.remove(this.searchContainer,"hide"),n.remove(this.adminMessage,"hide"))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(63),n(6),n(2),n(28),n(9),n(4),n(7),n(3),n(39),n(25),n(8),n(204),n(1256)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){return t([u,c],{templateString:m,baseClass:"mojoImageUploader blockDropTarget",uploadCopy:null,emptyImage:null,type:"image",allowedFileTypes:["image"],_fileDragSignal:null,_showDrag:!1,emptyImagePath:h.toUrl("/images/icons/empty-image.svg"),prefillImage:null,constructor:function(){this.placeholder=!1},postMixInProperties:function(){this.uploadCopy="Drop an image",this.emptyImage="/images/icons/empty-image.svg"},buildRendering:function(){d.contains(this.node,"form-image-uploader")?(this.inherited(arguments),this.isPlaceholder=!0):(this.domNode=this.node,d.add(this.domNode,"blockDropTarget"),this.isPlaceholder=!1)},postCreate:function(){this.browseBtn&&(a(this.browseBtn,"click",this.handleBrowseButtonClick.bind(this)),a(this.fileInput,"change",function(t){this.onImageUploading();var e=t.target.files;e.length>0&&this.upload(e[0])}.bind(this))),this.removeBtn&&a(this.removeBtn,"click",this.handleRemoveButtonClick.bind(this)),this.placeholder&&(r.place("<span>Image Placeholder</span>",this.uploadText,"only"),this.browseBtn&&s.set(this.browseBtn,"display","none")),this.prefillImage&&(l.set(this.imageNode,"src",this.prefillImage.url),l.set(this.imageNode,"id",this.prefillImage.name))},startup:function(){d.contains(this.node,"form-image-uploader")&&r.place(this.domNode,this.node)},handleBrowseButtonClick:function(t){this.placeholder||(n.stop(t),this.fileInput.click())},handleRemoveButtonClick:function(t){n.stop(t),this.onImageRemoved(),this.switchToEmptyView()},resetImage:function(){this.switchToEmptyView()},onImageSelected:function(t){},onImageRemoved:function(){},onImageUploading:function(){},upload:function(t){return this.onUploading(!0),this.setUploadProgress(.2),this.switchToUploadingView(),p.uploadFile(t,null,!1).then(function(t){return t.error?this._handleErrorImageUpload(t.error):this._handleSuccessfulImageUpload(t),t}.bind(this),this._handleErrorImageUpload.bind(this))},_parseFile:function(t,n,i){this.setUploadProgress(.1),window.parent.require(["mojo/widgets/FileManager"],e.hitch(this,(function(a){a.uploadFile(t).then(e.hitch(this,(function(t){this._handleSuccessfulImageUpload(t,n)})),e.hitch(this,"_handleErrorImageUpload")).then((function(){i.resolve()}))})))},_handleSuccessfulImageUpload:function(t,e){this.onUploading(!1),this.setUploadProgress(1),this.switchToUploadedView(t),this.onImageSelected(t)},_handleErrorImageUpload:function(t){this.onUploading(!1),this.setUploadProgress(0),this.switchToEmptyView()},onUploading:function(t){this.uploading=t},setUploadProgress:function(t){var e=i(".progress_bar_inner",this.domNode)[0];if(e){var n=Math.round(100*t);n=Math.max(0,Math.min(100,n)),s.set(e,"width",n+"%")}},switchToUploadingView:function(){s.set(this.uploadOverlay,"display","block")},switchToUploadedView:function(t){var e=t.url;l.set(this.imageNode,"src",e),l.set(this.imageNode,"id",t.name),o.set(this.titleNode,t.name),o.set(this.browseBtn,"Replace"),d.toggle(this.removeBtnNode,"hide",!1),s.set(this.uploadOverlay,"display","")},switchToEmptyView:function(){l.set(this.imageNode,"src",this.emptyImagePath),l.set(this.imageNode,"id","emptyImage"),this.fileInput.value=null,o.set(this.titleNode,"Upload an image"),o.set(this.browseBtn,"Browse"),d.toggle(this.removeBtnNode,"hide",!0),s.set(this.uploadOverlay,"display","")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(20),n(4),n(189),n(1257)],void 0===(a=function(t,e,n,i,a,o,s){return t([e,n,i],{containerNode:null,templateString:s,label:"What's this?",postCreate:function(){this.href&&this.addLine(o("<a href='<%= href %>' target='_blank' rel='noopener noreferrer'>Read more &rarr;</a>")({href:this.href}))},addLine:function(t,e){a.place("<li>"+t+"</li>",this.containerNode,e)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(452),n(54),n(27),n(9),n(30),n(1),n(33),n(279),n(289),n(6),n(66),n(2),n(26),n(142),n(62),n(285),n(126),n(195),n(163),n(1260)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_){var C=e("dijit.form._SliderMover",c,{onMouseMove:function(t){var e=this.widget,n=e._abspos;n||(n=e._abspos=a.position(e.sliderBarContainer,!0),e._setPixelValue_=r.hitch(e,"_setPixelValue"),e._isReversed_=e._isReversed());var i=t[e._mousePixelCoord]-n[e._startingPixelCoord];e._setPixelValue_(e._isReversed_?n[e._pixelCount]-i:i,n[e._pixelCount],!1)},destroy:function(t){c.prototype.destroy.apply(this,arguments);var e=this.widget;e._abspos=null,e._setValueAttr(e.value,!0)}}),k=e("dijit.form.HorizontalSlider",[y,w],{templateString:_,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:1/0,pageIncrement:2,clickSelect:!0,slideDuration:g.defaultDuration,trackingCategory:null,trackingAction:null,trackingLabel:null,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(t){this.disabled||this.readOnly||t.altKey||t.ctrlKey||t.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(t){if(!(this.disabled||this.readOnly||t.altKey||t.ctrlKey||t.metaKey)){switch(t.keyCode){case s.HOME:this._setValueAttr(this.minimum,!1);break;case s.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?s.RIGHT_ARROW:s.LEFT_ARROW:this.increment(t);break;case!1===this._descending?s.DOWN_ARROW:s.UP_ARROW:case!1===this._descending?s.PAGE_DOWN:s.PAGE_UP:this.increment10(t);break;case this._descending||this.isLeftToRight()?s.LEFT_ARROW:s.RIGHT_ARROW:this.decrement(t);break;case!1===this._descending?s.UP_ARROW:s.DOWN_ARROW:case!1===this._descending?s.PAGE_UP:s.PAGE_DOWN:this.decrement10(t);break;default:return}t.stopPropagation(),t.preventDefault()}},_onHandleClick:function(t){this.disabled||this.readOnly||(l("ie")||f.focus(this.sliderHandle),t.stopPropagation(),t.preventDefault(),this.trackingLabel&&this.trackingCategory&&this.trackingAction&&m.googleAnalytics.trackEvent(this.trackingCategory,this.trackingAction,this.trackingLabel))},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(t){if(!this.disabled&&!this.readOnly&&this.clickSelect){f.focus(this.sliderHandle),t.stopPropagation(),t.preventDefault();var e=a.position(this.sliderBarContainer,!0),n=t[this._mousePixelCoord]-e[this._startingPixelCoord];this._setPixelValue(this._isReversed()?e[this._pixelCount]-n:n,e[this._pixelCount],!0),this._movable.onMouseDown(t),this.trackingLabel&&this.trackingCategory&&this.trackingAction&&m.googleAnalytics.trackEvent(this.trackingCategory,this.trackingAction,this.trackingLabel)}},_setPixelValue:function(t,e,n){if(!this.disabled&&!this.readOnly){var i=this.discreteValues;(i<=1||i==1/0)&&(i=e);var a=e/--i,o=Math.round(t/a);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*o/i+this.minimum,this.maximum),this.minimum),n)}},_setValueAttr:function(t,e){this._set("value",t),this.valueNode.value=t,this.focusNode.setAttribute("aria-valuenow",t),this.inherited(arguments);var n=this.maximum>this.minimum?(t-this.minimum)/(this.maximum-this.minimum):0,a=!1===this._descending?this.remainingBar:this.progressBar,o=!1===this._descending?this.progressBar:this.remainingBar;if(this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0),e&&this.slideDuration>0&&a.style[this._progressPixelSize]){var s=this,r={},l=parseFloat(a.style[this._progressPixelSize]),d=this.slideDuration*(n-l/100);if(0==d)return;d<0&&(d=0-d),r[this._progressPixelSize]={start:l,end:100*n,units:"%"},this._inProgressAnim=i.animateProperty({node:a,duration:d,onAnimate:function(t){o.style[s._progressPixelSize]=100-parseFloat(t[s._progressPixelSize])+"%"},onEnd:function(){delete s._inProgressAnim},properties:r}),this._inProgressAnim.play()}else a.style[this._progressPixelSize]=100*n+"%",o.style[this._progressPixelSize]=100*(1-n)+"%"},_bumpValue:function(t,e){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var n=o.getComputedStyle(this.sliderBarContainer),i=a.getContentBox(this.sliderBarContainer,n),s=this.discreteValues;(s<=1||s==1/0)&&(s=i[this._pixelCount]),s--;var r=(this.value-this.minimum)*s/(this.maximum-this.minimum)+t;r<0&&(r=0),r>s&&(r=s),r=r*(this.maximum-this.minimum)/s+this.minimum,this._setValueAttr(r,e)}},_onClkBumper:function(t){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(t,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(t){this._bumpValue(t.keyCode==s.PAGE_DOWN?-this.pageIncrement:-1)},decrement10:function(t){this._bumpValue(t.keyCode==s.PAGE_DOWN?-this.pageIncrement:-10)},increment:function(t){this._bumpValue(t.keyCode==s.PAGE_UP?this.pageIncrement:1)},increment10:function(t){this._bumpValue(t.keyCode==s.PAGE_UP?this.pageIncrement:10)},_mouseWheeled:function(t){t.stopPropagation(),t.preventDefault(),this._bumpValue(t.wheelDelta<0?-1:1,!0)},startup:function(){this._started||(t.forEach(this.getChildren(),(function(t){this[t.container]!=this.containerNode&&this[t.container].appendChild(t.domNode)}),this),this.inherited(arguments))},_typematicCallback:function(t,e,n){-1==t?this._setValueAttr(this.value,!0):this[e==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](n)},buildRendering:function(){this.inherited(arguments),this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var t=u('label[for="'+this.id+'"]');t.length&&(t[0].id||(t[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",t[0].id)),this.focusNode.setAttribute("aria-valuemin",this.minimum),this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments),this.showButtons&&this.own(v.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),v.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500)),this.own(p(this.domNode,h.wheel,r.hitch(this,"_mouseWheeled")));var t=e(C,{widget:this});this._movable=new d(this.sliderHandle,{mover:t}),this._layoutHackIE7()},destroy:function(){this._movable.destroy(),this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0),this.inherited(arguments)}});return k._Mover=C,k}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(341),n(433)],void 0===(a=function(t,e,n){return t("dijit.form.ComboBox",[e,n],{})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(18),n(58),n(8),n(196),n(462),n(153)],void 0===(a=function(t,e,n,i,a,o,s){var r=t(null,{constructor:function(t){this.type=t.type,this.segments=t.segments}}),l=t(null,{constructor:function(t){this.segmentId=t.id,this.name=t.name,this.listId=t.list_id,this.type=t.type,this.typeDescription=t.typeDescription,this.createdAt=t.createdDate,this.updatedAt=t.updatedDate,this.status=t.status}}),d=t(l,{constructor:function(t){this.originalPastedBlob=t.pasted.emails,this.excludeOrInclude=t.pasted.pasted_segment_options,this.malformedEmails=t.pasted.invalid_data,this.notExistsEmails=t.pasted.not_exists,this.unsubbedEmails=t.pasted.unsubbed,this.count=t.count}}),c=t(null,{constructor:function(t){this.editorHtml=t.editor_html}}),u=t(null,{constructor:function(t){this.count=t.count}}),h={getSegmentEditorHtml:function(t,n){var a=i.toUrl("/campaigns/segments/get-editor",{list_id:t,conditions:n});return e.get(a,{handleAs:"json"}).then((function(t){return new c(t)}),s.handleError)},createPastedSegment:function(t,n,a){var o=i.toUrl("/campaigns/segments/create-pasted",{list_id:t});return e.post(o,{handleAs:"json",data:{emails:n,pasted_segment_options:a}}).then((function(t){return new d(t)}),s.throwError)},getSegment:function(t){var n=i.toUrl("/campaigns/segments/get-segment",{segment_id:t});return e.get(n,{handleAs:"json"}).then((function(t){return"pasted"in t?new d(t):new l(t)}),s.throwError)},getCount:function(t,e){var n=this._getPollableFunc(t,e),i=new o(n);return i.begin(),i.getPromise()},_getPollableFunc:function(t,e){if(null===e)return h._getCustomSegmentCount.bind(null,t,{match:"any",conditions:[]});if([h.TYPE_SAVED,h.TYPE_STATIC,h.PANE_PASTED].indexOf(e.type)>=0)return h._getSavedSegmentCount.bind(null,e.id);if(e.type===h.TYPE_PREBUILT)return h._getPrebuiltSegmentCount.bind(null,t,e.id);if(e.type===h.TYPE_CUSTOM)return h._getCustomSegmentCount.bind(null,t,e.value);if(e.type===h.TYPE_SAVED_PRO)return h._getProSavedSegmentCount.bind(null,e.id);if(e.type===h.TYPE_CUSTOM_PRO)return h._getProCustomSegmentCount.bind(null,t,e.value);throw new Error("No counting function for segment type '"+e.type+"'")},_getSavedSegmentCount:function(t){return h._makePollingRequest(i.toUrl("/segments/saved/get-recipients-count",{saved_segment_id:t}))},_getPrebuiltSegmentCount:function(t,e){return h._makePollingRequest(i.toUrl("/segments/prebuilt/get-recipients-count",{list_id:t,prebuilt_segment_id:e}))},_getCustomSegmentCount:function(t,e){return h._makePollingRequest(i.toUrl("/segments/custom/get-recipients-count",{list_id:t,segment:JSON.stringify(e)}))},_getProSavedSegmentCount:function(t){return h._makePollingRequest(i.toUrl("/segments/pro-saved/get-recipients-count",{pro_saved_segment_id:t}))},_getProCustomSegmentCount:function(t,e){return h._makePollingRequest(i.toUrl("/segments/pro-custom/get-recipients-count",{list_id:t,ast:JSON.stringify(e)}))},_makePollingRequest:function(t){return e.get(t,{handleAs:"json"}).then((function(t){return"waiting"===t.status?o.RETRY:new u(t)}),s.throwError)},getCachedPostcardSegmentGroups:function(t){return this._getCachedSegmentGroups(t,"lists/segments/saved-postcards")},_cachedSegmentGroups:{},_getCachedSegmentGroups:function(t,e){var i=this._cachedSegmentGroups[t];return i?n().then((function(){return i})):this.getSegmentGroups(t,e).then(function(e){var n=["contact-status","prebuilt","static","saved"],i=e.sort((function(t,e){var i=n.indexOf(t.type),a=n.indexOf(e.type);return i>a?1:a===i?0:-1}));return this._cachedSegmentGroups[t]=i,i}.bind(this))},fetchSegmentCount:function(t,n,a){return e.post(i.toUrl("/lists/segments/saved-postcard-segment-count",{id:t,segment_id:n,segment_type:a}),{handleAs:"json"}).then((function(t){return t.count}))},getSegmentGroups:function(t,n){return e.get(i.toUrl(n),{handleAs:"json",query:{id:t}}).then((function(e){return Object.keys(e).map((function(n){var i=e[n],a=Object.keys(i).map((function(e){return new l({id:e,name:i[e],list_id:t})}));return new r({type:n,segments:a})}))}))},TYPE_SAVED:"saved",TYPE_CUSTOM:"custom",TYPE_PREBUILT:"prebuilt",TYPE_SAVED_PRO:"saved_pro",TYPE_CUSTOM_PRO:"custom_pro",TYPE_STATIC:"static",TYPE_PASTED:"pasted"};return h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(7),n(21),n(12),n(11),n(20),n(1298)],void 0===(a=function(t,e,n,i,a,o,s){return t([i,a,o],{templateString:s,rootUrl:n.rootUrl,status:null,_setActionName:function(t,n){t.innerText=n,e.set(t,"title",n)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(67),n(39),n(1),n(80),n(2),n(118),n(9),n(3),n(41),n(14),n(19),n(6),n(1303)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){return t([e,n],{templateString:p,minTotalSize:10,container:null,init:function(){s(this.target,"total",this,"total"),s(this.target,"page",this,"page"),s(this.target,"pageSize",this,"pageSize"),this.updateAll();var t=this;o(this.prevButton,"click",(function(){if(!t.target.refreshing){var e=parseInt(t.get("page"),10)-1;e<=0&&(e=1),t.set("page",e),t.scrollToTop()}})),o(this.nextButton,"click",(function(){if(!t.target.refreshing){var e=parseInt(t.get("page"),10)+1;t.set("page",e),t.scrollToTop()}})),this.watch("page",i.hitch(this,"_updatePages")),this.watch("pageSize",i.hitch(this,"_updatePages")),this.watch("total",i.hitch(this,"updateAll"))},scrollToTop:function(){if(this.container){var t=h("#"+this.container)[0];t&&(t.scrollTop=0)}},updateAll:function(){this._updatePages(),this._updateTotalPages()},_updatePages:function(){var t=parseInt(this.pageSize),e=parseInt((this.page-1)*t,10)+1,n=e+t-1;this.startLabel.innerHTML=e,this.endLabel.innerHTML=n<this.total?n:this.total,r.set(this.prevButton,"display",this.page>1?"inline":"none"),r.set(this.nextButton,"display",n<this.total?"inline":"none")},_updateTotalPages:function(){this.totalPagesLabel.innerHTML=a.format(this.total,{pattern:"#,###"})},canDisplay:function(){return this.inherited(arguments)&&this.target.total>this.minTotalSize}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(67),n(39),n(5),n(118),n(41),n(1304)],void 0===(a=function(t,e,n,i,a,o,s){var r=[10,25,50,100];return t([e,n],{templateString:s,init:function(){this.pageOptions=new o({class:"!margin--lv0 select-small valign-middle",options:i.map(r,(function(t){return{label:String(t),value:String(t)}}))},this.pageOptions),a(this.target,"pageSize",this.pageOptions,"value",{parse:function(t){return parseInt(t,10)}})},canDisplay:function(){return this.inherited(arguments)&&this.target.total>r[0]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(39),n(1),n(10),n(5),n(4),n(3),n(2),n(7),n(1305),n(6),n(17),n(16),n(710),n(67),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){return t([m,e],{templateString:d,init:function(){for(box in this.canSelectAll||s.add(this.selectAll.parentNode,"hide"),p.convert(c("ul",this.domNode)[0]),this.target.allAll&&(s.remove(this.deselectAll.parentNode,"hide"),s.add(this.selectAll,"active"),s.remove(this.selectVisible,"active")),this.target.selected)if(!0===this.target.selected[box]){s.remove(this.deselectAll.parentNode,"hide");break}this.connect(this.selectAll,"click",n.hitch(this,(function(){this.target.toggleAll(!0),this.target.set("allAll",!0),u.flagIsOn(h.AM_ORGANIZE_SELECTED_CONTACTS_COUNT)&&this.target.set("selectedContactCountAction","selectAll"),s.add(this.selectAll,"active"),s.remove(this.selectVisible,"active")}))),this.connect(this.selectVisible,"click",n.hitch(this,(function(){this.target.toggleAll(!0),this.target.set("allAll",!1),u.flagIsOn(h.AM_ORGANIZE_SELECTED_CONTACTS_COUNT)&&this.target.set("selectedContactCountAction","selectVisible"),s.remove(this.selectAll,"active"),s.add(this.selectVisible,"active")}))),this.connect(this.deselectAll,"click",n.hitch(this,(function(){this.target.toggleAll(!1),this.target.set("allAll",!1),u.flagIsOn(h.AM_ORGANIZE_SELECTED_CONTACTS_COUNT)&&this.target.set("selectedContactCountAction","deselectAll")}))),this._watches.push(this.target.selected.watch(n.hitch(this,(function(){this.target.isAllSelected()?this.target.allAll||s.add(this.selectVisible,"active"):(s.remove(this.selectAll,"active"),s.remove(this.selectVisible,"active")),!this.target.isAllSelected()&&this.target.allAll&&this.target.set("allAll",!1),this.deselectAll&&this.deselectAll.parentNode&&s.toggle(this.deselectAll.parentNode,"hide",0==this.target.getSelection().length)}))))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(0),n(5),n(6),n(41),n(212),n(765)],void 0===(a=function(t,e,n,i,a,o,s){return e([a],{_fillContent:function(){this.inherited(arguments),this.srcNodeRef&&n.forEach(this.options,t.hitch(this,(function(t){var e=i("[value="+t.value+"]",this.srcNodeRef)[0];e&&(t.meta=e.getAttribute("data-meta"),t.imageSrc=e.getAttribute("data-image-src"),t.skip=e.getAttribute("data-skip"),t.badge=e.getAttribute("data-badge"),t.badgeType=e.getAttribute("data-badge-type")||"info")})))},_getMenuItemForOption:function(e){if(e.value||e.label){var n=t.hitch(this,"_setValueAttr",e),i=new s({option:e,label:("text"===this.labelType?(e.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):e.label)||this.emptyLabel,onClick:n,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:e.disabled||!1});return i.focusNode.setAttribute("role","option"),i}return new o({ownerDocument:this.ownerDocument})},_addOptionItem:function(t){this.dropDown&&!t.skip&&this.dropDown.addChild(this._getMenuItemForOption(t))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(402),n(17),n(1317)],void 0===(a=function(t,e,n,i,a,o){return t([e,n],{templateString:o,buttonText:"",buttonType:"",clearMargin:!1,containerClass:"",disableRefreshForEditorUpgrade:!1,redirect:"",featureName:"",featureContext:"",fullWidth:!1,gaTracking:void 0,onComplete:void 0,onCancel:void 0,fixedGATrackingCallback:void 0,postCreate:function(){this._renderReactUpgradeMomentButton()},_renderReactUpgradeMomentButton:function(){i("paywall").then(function(t){var e={allowDowngrades:this.allowDowngrades,buttonType:this.buttonType||"important",children:this.buttonText||"Upgrade Now",clearMargin:this.clearMargin,disabled:!a.hasRole("manager"),disableRefreshForEditorUpgrade:this.disableRefreshForEditorUpgrade,fullWidth:this.fullWidth,gaTracking:this.gaTracking,modalProps:{featureName:this.featureName,featureContext:this.featureContext,redirectUrl:this.redirect,onComplete:this.onComplete,onCancel:this.onCancel,shouldSkipPlanSelector:!!this.skipToCheckout,pricingPlanId:this.pricingPlanId},fixedGATrackingCallback:this.fixedGATrackingCallback};this.unmountUpgradeMomentButton=t.mountUpgradeMomentButton(this.buttonContainer,e)}.bind(this),function(){console.error("Failed to load Bridge"),this._unmountReactBridges()}.bind(this))},_unmountReactBridges:function(){this.unmountUpgradeMomentButton&&(this.unmountUpgradeMomentButton=null)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1)],void 0===(a=function(t){return t.getObject("string",!0,dojox).Builder=function(t){var e="";this.length=0,this.append=function(t){if(arguments.length>1){var n="",i=arguments.length;switch(i){case 9:n=""+arguments[8]+n;case 8:n=""+arguments[7]+n;case 7:n=""+arguments[6]+n;case 6:n=""+arguments[5]+n;case 5:n=""+arguments[4]+n;case 4:n=""+arguments[3]+n;case 3:n=""+arguments[2]+n;case 2:e+=""+arguments[0]+arguments[1]+n;break;default:for(var a=0;a<arguments.length;)n+=arguments[a++];e+=n}}else e+=t;return this.length=e.length,this},this.concat=function(t){return this.append.apply(this,arguments)},this.appendArray=function(t){return this.append.apply(this,t)},this.clear=function(){return e="",this.length=0,this},this.replace=function(t,n){return e=e.replace(t,n),this.length=e.length,this},this.remove=function(t,n){return void 0===n&&(n=e.length),0==n||(e=e.substr(0,t)+e.substr(t+n),this.length=e.length),this},this.insert=function(t,n){return e=0==t?n+e:e.slice(0,t)+n+e.slice(t),this.length=e.length,this},this.toString=function(){return e},t&&this.append(t)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(82),n(11),n(2),n(6),n(5),n(31),n(37),n(22),n(1),n(10),n(9),n(7),n(18),n(3),n(4),n(28),n(55),n(54),n(214),n(30),n(14),n(8),n(26),n(15),n(135),n(1332),n(774),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j){return t([e,n,i],{templateString:T,postCreate:function(){l.parse(this.domNode),this.inherited(arguments),this.shareList=new A({userList:this.userList}),f.place(this.shareList.domNode,this.shareListContainer),"function"==typeof this.cancelCallback&&f.place('<a class="small-meta fwb underline cursor-pointer" data-action="cancel-add-viewers">Cancel</a>',this.domNode,"last"),this.own(a(this.domNode,"[data-action='show-note']:click",c.hitch(this,(function(t){this.showNode(o("[data-element='email-note-text']")[0],"block"),this.showNode(o("[data-action='cancel-note']")[0],"block"),this.hideNode(o("[data-action='show-note']")[0])}))),a(this.domNode,"[data-action='cancel-note']:click",c.hitch(this,(function(t){this.showNode(o("[data-action='show-note']")[0]),this.hideNode(o("[data-element='email-note-text']")[0]),this.hideNode(o("[data-action='cancel-note']")[0])}))))},hideNode:function(t){h.set(t,"display","none")},showNode:function(t,e){e||(e="inline-block"),h.set(t,"display",e)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(184),n(782),n(246),n(1346),n(77),n(133)],void 0===(a=function(t,e,n,i,a,o){return function s(r,l,d,c,u){r!==l&&n(l,(function(n,o){if(a(n))u||(u=new t),i(r,l,o,d,s,c,u);else{var h=c?c(r[o],n,o+"",r,l,u):void 0;void 0===h&&(h=n),e(r,o,h)}}),o)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(297)],void 0===(a=function(t){return function(e){var n=new e.constructor(e.byteLength);return new t(n).set(new t(e)),n}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(77)],void 0===(a=function(t){var e=Object.create;return function(){function n(){}return function(i){if(!t(i))return{};if(e)return e(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}()}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(30),n(139),n(15),n(24),n(1350)],void 0===(a=function(t,e,n,i,a,o){return t([a],{templateString:o,baseClass:"colorSwatchNode",color:{},colorFormat:"hex",_copyColor:function(){n.copy(this.color[this.colorFormat]),i.globalPublish("show-toast",[{message:this.color[this.colorFormat]+" is copied—paste when you're ready.",type:"success"}])},_onClick:function(t){t.preventDefault(),this._copyColor()},_onKeyDown:function(t){t.keyCode===e.ENTER&&this._copyColor()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(234)],void 0===(a=function(t,e){return t([],{constructor:function(t){document.addEventListener("click",(function(n){"A"===n.target.tagName&&e.get(t.endpoint+"&url="+encodeURIComponent(n.target.href))}),!1)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0)],void 0===(a=function(t){return t([],{constructor:function(t){this.inherited(arguments);var e=document.querySelector(".burger-container");e&&e.addEventListener("click",(function(){document.querySelector(".mc-nav-container").classList.toggle("menu-opened")})),document.addEventListener("click",(function(t){t.target.matches(".menu-item-link")&&document.querySelector(".mc-nav-container").classList.remove("menu-opened")}),!1)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(10),n(6),n(2),n(234)],void 0===(a=function(t,e,n,i,a,o){return t([],{constructor:function(t){var e=document.querySelectorAll("a[data-tracking-opt-out],a[data-page-banner-opt-out]");e.length>0&&this._setupLinks(e,t)},_setupLinks:function(t,n){o.get(n.checkStatusUrl).then(e.hitch(this,(function(i){void 0===i.error&&!0===i.enabled?Array.prototype.forEach.call(t,e.hitch(this,(function(t){this._replaceWithDefaultText(t)}))):!0!==n.isPreview&&Array.prototype.forEach.call(t,e.hitch(this,(function(t){this._setupOnClickHandler(t,n)})))})))},_setupOnClickHandler:function(t,n){a(t,"click",e.hitch(this,(function(t){t.preventDefault(),t.stopPropagation(),this._handleClick(n)})))},_handleClick:function(t){o.get(t.enableUrl).then(e.hitch(this,(function(t){"error"!==t&&!0===t.success&&window.location.reload()})))},_replaceWithDefaultText:function(t){var e=document.createElement("p");e.innerHTML="You’ve opted out of tracking",t.parentNode.replaceChild(e,t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(47),n(0),n(1),n(7),n(3),n(4),n(2),n(31),n(8),n(17),n(198),n(12),n(11),n(20),n(114),n(211),n(113),n(1375)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){return e([u,h,p],{templateString:v,allAudiencesKey:"all",allAudiencesLabel:"All audiences",audienceList:[],contactCount:null,currentAudienceId:null,currentAudienceName:null,isDisabled:!1,hasBottomBorder:!1,hasBottomPadding:!0,hasLinkToViewAudiences:!1,isAllAudiencesEnabled:!1,isAllSelected:!1,onStartupCallback:null,onAudienceOpenCallback:null,onSwitchAudienceCallback:null,subscriberCount:null,postCreate:function(){this._fetchAndHydrate()},setDisabled:function(t){this.isDisabled=t,this.dropdownButton&&(this.dropdownButton.setDisabled(t),this.dropdownButton.setLabel(t?this.allAudiencesLabel:this.currentAudienceName)),this._injectData()},_fetchAndHydrate:function(){r.get("/lists/switcher/get-switcher-data",{handleAs:"json"}).then(n.hitch(this,(function(t){this.isAllSelected=t.isAllSelected,this.audienceList=t.audienceList,this.isAllAudiencesEnabled&&this.isAllSelected?(this.set("currentAudienceId",this.allAudiencesKey),this.currentAudienceName=this.allAudiencesLabel):(this.contactCount=c.toFormat(t.contactCount,null,null,","),this.set("currentAudienceId",t.currentAudienceId),this.currentAudienceName=t.currentAudienceName,this.subscriberCount=c.toFormat(t.subscriberCount,null,null,",")),this.onStartupCallback&&this.onStartupCallback(this.currentAudienceId),this.audienceList.length>1?(this._injectData(),this._setupSwitcher()):1===this.audienceList.length&&(this._injectData(),this._setupSingleList())})))},_injectData:function(){this.isAllAudiencesEnabled&&this.isAllSelected||this.isDisabled?(a.add(this.audienceData,"hide"),a.add(this.audienceDataReadOnly,"hide")):d.hasRole("manager")?(this.contactsLink.innerText=this.contactCount,i.set(this.contactsLink,"href","/lists/members/clear-and-view?id="+this.currentAudienceId),this.subscribersLink.innerText=this.subscriberCount,s(this.subscribersLink,"click",n.hitch(this,(function(){this._onSubscribersClick()}))),a.remove(this.audienceData,"hide")):(this.contactsDisplay.innerText=this.contactCount,this.subscribersDisplay.innerText=this.subscriberCount,a.remove(this.audienceDataReadOnly,"hide")),this.hasBottomBorder&&a.add(this.container,"border-bottom"),this.hasBottomPadding||a.remove(this.container,"padding-bottom--lv4"),a.remove(this.container,"hide")},_setupSingleList:function(){this.singleAudienceName.innerText=this.currentAudienceName,a.remove(this.singleAudienceName,"hide"),a.add(this.switcherContainer,"hide")},_setupSwitcher:function(){o.empty(this.switcher);var t=new g({style:"display: none;",onOpen:this.onAudienceOpenCallback});this.audienceList.forEach(n.hitch(this,(function(e){if(e.id!==this.currentAudienceId){var i=1===e.count?" contact":" contacts",a=c.toFormat(e.contactCount,null,null,",");t.addChild(new f({label:"<div><p class='font-weight--bold margin-bottom--lv0'>"+e.name+"</p><p class='margin-bottom--lv0 textcolor--secondary'>"+a+i+"</p></div>",onClick:n.hitch(this,(function(){this._onAudienceClick(e)}))}))}}))),this.isAllAudiencesEnabled&&!this.isAllSelected&&this.audienceList.length>1&&t.addChild(new f({label:"<p class='font-weight--bold margin-bottom--lv0'>All audiences</p>",onClick:n.hitch(this,(function(){this._onAudienceClick("all")}))})),this.hasLinkToViewAudiences&&t.addChild(new f({label:"<a class='view-audiences-link' href='/lists/'>View audiences</a>"}));var e=new m({label:this.isDisabled?this.allAudiencesLabel:this.currentAudienceName,dropDown:t,dropDownPosition:["below"],disabled:this.isDisabled});this.dropdownButton=e,e.placeAt(this.switcher,"only"),a.remove(this.switcherContainer,"hide"),a.add(this.singleAudienceName,"hide")},_onAudienceClick:function(t){if(t===this.allAudiencesKey)this._onAllAudiencesClick();else{var e="/lists/switcher/set-selected-audience?id="+t.id;e+="&overwrite_all="+this.isAllAudiencesEnabled;r.get(e,{handleAs:"json"}).then(n.hitch(this,(function(){this.onSwitchAudienceCallback(t.id),this._fetchAndHydrate()})))}},_onAllAudiencesClick:function(){r.get("/lists/switcher/set-select-all-audiences",{handleAs:"json"}).then(n.hitch(this,(function(){this.onSwitchAudienceCallback(this.allAudiencesKey),this._fetchAndHydrate()})))},_onSubscribersClick:function(){var t=new FormData;t.append("segment",JSON.stringify({match:"all",conditions:[{field:"contact_status",op:"status_is",value:["Y"]}]}));r.post("/lists/segments/members/storeJson?list_id="+this.currentAudienceId,{handleAs:"json",data:t}).then(n.hitch(this,(function(){window.location.href="/lists/members?id="+this.currentAudienceId+"&previewName=Subscribers"})))},setIsAllAudiences:function(){this._onAllAudiencesClick()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(137),n(11),n(12),n(20),n(2),n(404),n(1377)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([i,n,a],{label:"Color",templateString:r,colorInput:null,valueOnEmpty:"",noColorEnabled:!1,value:null,_color:null,_alpha:null,DEFAULT_ALPHA:0,constructor:function(){this.inherited(arguments),this.value&&this.value.toHex?this._color=this.value.toHex():this._color=this.valueOnEmpty,this.value&&this.value.a?this._alpha=this.value.a:this._alpha=this.DEFAULT_ALPHA},postCreate:function(){this.inherited(arguments),this.colorInput=new s({value:this._color}),this.colorInput.startup(),this.colorInput.placeAt(this.colorInputContainer),this.alphaInput.set("value",this._alpha),this.own(o(this.colorInput,"change",this.onColorChange.bind(this)),o(this.alphaInput,"change",this.onAlphaChange.bind(this)))},onColorChange:function(t){if(this._color!==t){this._color=t;var n=this._color&&e.fromHex(this._color)?e.fromHex(this._color):null;n&&(n.a=this._alpha),this.value=n,this.onChange(this.value)}},onAlphaChange:function(t){var n=parseFloat(t.toFixed(2),10);if(this._alpha!==n){var i=e.fromHex(this._color);this._alpha=n,i.a=this._alpha,this.value=i,this.onChange(this.value)}},_isEmptyValue:function(t){return null===t||""===t||t===this.valueOnEmpty},_setValueAttr:function(t){this._color=t?t.toHex():this.valueOnEmpty,this._alpha=t?t.a:this.DEFAULT_ALPHA,this._updateColor(this._color),this._updateAlpha(this._alpha)},_updateColor:function(t){this.colorInput&&t&&this.colorInput.set("value",t)},_updateAlpha:function(t){this.alphaInput&&t&&this.alphaInput.set("value",t)},onReset:function(){this.set("value",this.valueOnEmpty)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(6),n(4),n(2),n(9),n(3),n(48)],void 0===(a=function(t,e,n,i,a,o,s){return t([],{label:"Unknown",skipContainer:!1,isOptional:!1,resetLink:null,labelNode:null,inputContainerNode:null,subLabel:!1,subLabelClasses:"c-paneLabel--small fwn padding--lv0",postCreate:function(){if(this.inherited(arguments),!this.skipContainer){var t="style-"+this.label.toLowerCase().replace(" ",""),o="<div class='style-field selfclear "+t+"'></div>";n(this.domNode).wrap(o),this.inputContainerNode=this.domNode.parentNode;var r="<label>"+this.label+"</label>";if(this.labelNode=i.place(r,this.inputContainerNode,"first"),this.subLabel&&s.add(this.labelNode,this.subLabelClasses),this.isOptional){var l="<a href='#' class='small-meta margin--lv2'>Remove</a>";this.resetLink=i.place(l,n("label",this.inputContainerNode)[0]),this.own(a(this.resetLink,"click",e.hitch(this,"_resetHandler")))}}},_resetHandler:function(t){t.stopPropagation(),t.preventDefault(),this.onReset(),this.toggleResetLink(!1)},toggleResetLink:function(t){this.resetLink&&o.set(this.resetLink,"display",t?"":"none")},onReset:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(143),n(106),n(1381),n(1382),n(2),n(46),n(1),n(79),n(61),n(5),n(4),n(10),n(9),n(3),n(7),n(30),n(6),n(19),n(1383),n(261),n(138),n(203),n(21),n(15),n(8),n(17),n(16),n(26),n(225),n(405),n(81)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E,P,D,N){var L="browse",M="browseAd",B="edit",R="link",F="alt",O="remove",U="crop",$="resize";return t([e,n],{templateString:o,templateStringMobile:s,isMobile:!1,image:null,isSizedForAutoDesigner:null,allowAutoDesigner:null,blockSize:null,allowedFileTypes:["image"],allowedImageSizes:null,filter:null,actionTpl:'<li><a href="#" data-action-type="{action}">{actionLabel}</a></li>',actionTplDisabled:'<li><a href="#" data-action-type="{action}" class="disabledAction">{actionLabel}</a></li>',actionTplMobile:'<div class="{containerClassNames}"><a href="#" data-action-type="{action}" class="{actionClassNames}">{actionLabel}</a></div>',feedbackActionTpl:'&nbsp;<a href="#" data-action-type="{action}">{actionLabel}</a>',contextMessage:null,actions:null,_restrictions:null,renderingType:null,aspectRatio:"16:9",defaultSubtitle:"",constructor:function(t){t.isMobile&&(this.isMobile=t.isMobile,this.templateString=this.templateStringMobile),this.renderingType=t.renderingType,this.image=null},postMixInProperties:function(){this.actions||(this.isMobile?this.actions=[R,F]:this.actions=[B,R,F]),this._restrictions={}},addMinWidthRestriction:function(t,e,n){this._restrictions.minWidth={message:e,action:n,isValid:function(e){return e.width>=t}},this.checkRestrictions()},addMaxWidthRestriction:function(t,e,n,i){var a={message:e,action:n,isValid:function(e){return e.width<=t},actionLabel:i};"string"==typeof i&&(a.actionLabel=i),this._restrictions.maxWidth=a,this.checkRestrictions()},restrictAspectRatio:function(t,e){var n=this;this._restrictions.aspectRatio={message:"The proportions of this image differ from the one next to it.",action:U,isValid:function(i){var a=i.width/t,o=Math.round(i.height/a),s=i.width>=t&&o!==e;if(s){var r,l=i.height%e;if(0===l)r=i.width+":"+Math.round(a*e);else{var d=i.height-l,c=d/e,u=Math.round(i.width/a*c);r=u<t?t+":"+e:u+":"+d}n.aspectRatio=r}return!s}},this.checkRestrictions()},checkRestrictions:function(){if(this._hideRestrictionFeedback(),this.image)for(var t in this._restrictions)if(this._restrictions.hasOwnProperty(t)){var e=this._restrictions[t];if(!e.isValid(this.image)){this._showRestrictionFeedback(e);break}}},_onImageChange:function(){this._brandChangeListener&&this._brandChangeListener.remove(),this.image&&this.image.src===P.MERGE_TAG&&(this._brandChangeListener=w.subscribe(P.TOPIC_CHANGES,function(t){var e=t.value;null!==e?this._contentItemSelected(e):this._imageSelected(P.DEFAULT_LOGO_URL,null,null,{width:196})}.bind(this))),this.render()},render:function(){this._renderMeta(),this._renderImage(),this._renderActions(),this.checkRestrictions()},setActions:function(t){this.actions=t,this._renderActions()},toggleUploadMessage:function(t){g.set(this.uploadOverlay,"display",t?"block":"")},toggleDragHandle:function(t){this.isMobile||f.toggle(this.dndHandle,"hide",!t)},postCreate:function(){var t=this;this.watch("image",this._onImageChange.bind(this)),this.render(),this.own(r(this,"a:click, button:click",(function(e){var n=v.get(this,"data-action-type");switch(null!==n&&(e.preventDefault(),e.stopPropagation()),n){case L:E.googleAnalytics.trackEvent("draft_edit","click","content:image_actions:replace"),t.openFileManager();break;case M:E.googleAnalytics.trackEvent("draft_edit","click_to_insert_image_panel","auto_designer"),E.info("creative-assistant","AD btn clicked from side panel"),t.openFileManager("autoDesigner");break;case O:t.removeImage();break;case R:E.googleAnalytics.trackEvent("draft_edit","click","content:image_actions:".concat(R)),t.openLinkPicker();break;case F:E.googleAnalytics.trackEvent("draft_edit","click","content:image_actions:".concat(F)),t.openAltTextForm();break;case B:E.googleAnalytics.trackEvent("draft_edit","click","content:image_actions:".concat(B)),t.openImageEditor();break;case U:t.openAspectRatioEditor();break;case $:E.googleAnalytics.trackEvent("draft_edit","click","large_image:fix"),t.openResizeEditor()}})),r(this.altTextBtn,"click",(function(){t.closeAltTextForm()})),r(this.altTextInput,"keypress",(function(e){e.keyCode===b.ENTER&&(e.preventDefault(),e.stopPropagation(),t.closeAltTextForm())})))},addImage:function(t){this.set("image",t),this.render()},updateImage:function(t){this.set("image",t),this.render()},removeImage:function(){null!==this.image&&(this.set("image",null),this.onChange("image")),this.onRemove()},openFileManager:function(t){var e,n="autoDesigner"===t?"content-engine":"file";window.app&&(e=window.app.campaignTitle),k.show({actions:"select, rename, copy",shouldChangeSource:!0,newSource:{id:n},allowedFileTypes:this.allowedFileTypes,allowedImageSizes:this.allowedImageSizes,onSelectContentItem:d.hitch(this,(function(t){this._contentItemSelected(t),k.hide()})),contextMessage:this.contextMessage,filter:this.filter,allowAutoDesigner:this.allowAutoDesigner,blockSize:this.blockSize,sessionTitle:e})},openLinkPicker:function(){this.linkPickerConnects&&h.forEach(this.linkPickerConnects,this.disconnect),this.linkPickerConnects=[];var t=this.image?this.image.link:{};t=d.mixin({anchors:window.getAllAnchors()},t),this.linkPicker=new C(t),this.linkPickerConnects.push(this.connect(this.linkPicker,"onSave",(function(t){this._setImageLink(t)}))),this.linkPickerConnects.push(this.connect(this.linkPicker,"onRemove",(function(){this._setImageLink()}))),this.linkPicker.show()},openAltTextForm:function(){this.image&&(this.altTextInput.value=this.image.alt),f.contains(this.altTextContainer,"hide")&&f.remove(this.altTextContainer,"hide"),this.altTextInput.focus()},closeAltTextForm:function(){this.image&&(this.image.alt=this.altTextInput.value),f.add(this.altTextContainer,"hide"),this.updateImage(this.image),this.onChange("altText")},openImageEditor:function(){S.open(this.image.src).then(d.hitch(this,(function(t){return k.importFromUrl(t,!0,this.image.contentId)}))).then(d.hitch(this,(function(t){var e="data"in t?t.data:t;this._imageSelected(e.url,e.contentId)})),this._showEditErrorToast)},showAviaryToolTip:function(t){var e=new i({content:"<ul class='help-tip-lines selfclear'>We’re currently updating the editing experience, which should be back by January 2019 – thanks for your patience.</ul>",baseClass:"dijitTooltipDialogHelp",class:"help-tip-dialog dijitTooltipDialog",onBlur:function(){a.hide(e),e.destroy()}});a.open({popup:e,around:t}),e.focus()},openResizeEditor:function(){var t=this.image.contentId;T.removeProxy(this.image.src);S.open(this.image.src,["resize"]).then(d.hitch(this,(function(e){return k.importFromUrl(e,!0,t)}))).then(d.hitch(this,(function(t){var e="data"in t?t.data:t;this._imageSelected(e.url,e.contentId)})),this._showEditErrorToast)},openAspectRatioEditor:function(){var t=this.image.contentId;S.open(this.image.src,["crop"],{cropPresets:this.aspectRatio}).then(d.hitch(this,(function(e){return k.importFromUrl(e,!0,t)}))).then(d.hitch(this,(function(t){var e="data"in t?t.data:t;this._imageSelected(e.url,e.contentId)})),this._showEditErrorToast)},_showEditErrorToast:function(t){I.toast("Drats, unable to save edits!","warning")},_renderImage:function(){this.imageNode.src=this._getIconImageUrl()},_getIconImageUrl:function(){return this.image?"*|BRAND:LOGO|*"===this.image.src?P.hasCustomBrandUrl()?P.getBrandUrl():"/images/icons/empty-image.svg":"*|WEBSITE:LOGO|*"===this.image.src?A.websiteLogoUrl:this.image.src:"/images/icons/empty-image.svg"},_renderMeta:function(){this.image?(this.image.alt?(this.titleNode.innerHTML=this.image.alt,this._updateImageName(this.subtitleNode)):(this._updateImageName(this.titleNode),"*|WEBSITE:LOGO|*"===this.image.src?this.subtitleNode.innerHTML="Recommended Width: 200px":this.subtitleNode.innerHTML=""),this.image.width&&this.image.height?this.dimensionNode.innerHTML=this.image.width+" &times; "+this.image.height:this.dimensionNode.innerHTML=""):(this.titleNode.innerHTML="",this.subtitleNode.innerHTML=this.defaultSubtitle,this.dimensionNode.innerHTML="")},_renderActions:function(){p.empty(this.actionList);var t=[L];if(this.image){var e=[];"*|BRAND:LOGO|*"!==this.image.src&&"*|WEBSITE:LOGO|*"!==this.image.src||e.push(B);var n=_(this.actions,e);t=t.concat(n)}else this.actions.indexOf(O)>=0&&t.push(O);var i="";h.forEach(t,d.hitch(this,(function(t){var e={action:t,actionLabel:this._getActionLabel(t)},n=this.actionTpl;t!==L||this.isMobile||(e.actionClassNames=this.image?"":"button p0",n='<li><a href="#" class="{actionClassNames}" data-action-type="{action}">{actionLabel}</a></li>'),this.isMobile&&(n=this.actionTplMobile,e.containerClassNames=this._getActionContainerClassNames(t),e.actionClassNames=this._getActionClassNames(t)),i+=d.replace(n,e)})));var a=window.parent.app&&"template"===window.parent.app.editingType;if(this.renderingType||a){switch(this.renderingType){case"regular":case"automation":case"page":case"template":case"automation-email":window.app.isWebsitePage||(this.allowAutoDesigner=!0);break;case"post":"mainImage"===this.imageName&&x.flagIsOn(j.CONTENT_ENGINE_POSTCARDS)&&(this.allowAutoDesigner=!0);break;default:a&&(this.allowAutoDesigner=!0)}if(this.allowAutoDesigner&&!this.isMobile){p.empty(this.autoDesigner);var o=A.getBootstrappedInstance().flagIsOn(j.CONTENT_ENGINE_CA_DYNAMIC_HEADER)?'<div class="tooltip" ><span class="tooltipText">Instantly create beautiful, on-brand designs you can use across marketing channels</span></div>':"",s=A.getBootstrappedInstance().flagIsOn(j.CONTENT_ENGINE_CA_DYNAMIC_HEADER)?"/images/files/source-icon-content-engine-white.svg":"/images/files/source-icon-content-engine-white-deprecated.svg",r='<button role="button" data-action-type="browseAd" class="button p0 margin-top--lv3 '+(A.getBootstrappedInstance().flagIsOn(j.CONTENT_ENGINE_CA_DYNAMIC_HEADER)?"adBtnExp":"")+'"><img src="'+s+'" alt="" class="v-contentSourceBtnImg margin-right--lv1" style="margin-bottom: 4px"></span>Creative Assistant</button><span class="badge new" style="margin-left: -12px; transform: translateY(11px);">New</span>'+o;p.place(r,this.autoDesigner),w.subscribe("autoDesignerBtnClicked",function(){this.openFileManager("autoDesigner")}.bind(this)),w.subscribe("isSizedForAutoDesigner",function(){this.blockSize=arguments[1],this.autoDesigner&&(this.isSizedForAutoDesigner=arguments[0],g.set(this.autoDesigner,"display","block"));var t=arguments[2];t&&this.openFileManager("autoDesigner")}.bind(this)),E.googleAnalytics.trackEvent("draft_edit","in_view","display_auto_designer_in_template"),E.info("creative-assistant","Autodesigner - AD btn shown to user",{location:"nea side panel",url:window.location.href})}}p.place(i,this.actionList)},_getActionLabel:function(t){var e;switch(t){case L:e=this.image?"Replace":"Upload An Image";break;case F:e=this.isMobile?"Edit Alt Text":"Alt";break;case B:e="Edit";break;case R:e=this.isMobile?"Edit Link":"Link";break;case O:e="Remove";break;default:e=""}return e},_getActionContainerClassNames:function(t){var e;switch(t){case L:e="flex-full margin-bottom--lv2";break;case F:case B:case R:e="flex-half margin-bottom--lv2";break;case O:e="flex-full margin-bottom--lv2 text-align--center";break;default:e="flex--1"}return e},_getActionClassNames:function(t){var e;switch(t){case L:e="full-width button p0 margin-right--lv0";break;case F:case B:case R:e="full-width button margin-right--lv0";break;case O:default:e=""}return e},_updateImageName:function(t){this.image.name?t.innerText=this.image.name:this.image.contentId&&this.image.src!==P.MERGE_TAG?(t.innerText="Loading",k.getInfo(this.image.contentId).then((function(e){t.innerText=e.name}),d.hitch(this,(function(){t.innerText=this._imageName()})))):t.innerText=this._imageName()},_setImageLink:function(t){this.image.link=t,this.updateImage(this.image),this.onChange("link")},_imageName:function(){if(!this.image||!this.image.src)return null;var t=this.image.src,e=t.substring(t.lastIndexOf("/")+1,t.length);return"*|BRAND:LOGO|*"===e&&(e="Your Default Logo"),"*|WEBSITE:LOGO|*"===e&&(e="Your Website Logo"),e},_contentItemSelected:function(t){this._imageSelected(t.getDisplayUrl(),t.contentId,t.getCanonicalUrl(),t.getFixedParameters())},_imageSelected:function(t,e,n,i){i=i||{},S.getImageInfo(t).then(d.hitch(this,(function(t){var a=n||t.url,o=d.mixin({},this.image,{alt:"",src:a,width:t.width,height:t.height,originalUrl:t.originalUrl,contentId:e||null},i);this.updateImage(o),this.onChange("image")})))},_showRestrictionFeedback:function(t){var e=t.message;t.action&&!this.isMobile&&(e+=d.replace(this.feedbackActionTpl,{action:t.action,actionLabel:t.actionLabel||"Let's fix it"})),"page"!==this.renderingType&&(this.feedbackNode.innerHTML=e,f.remove(this.feedbackContainer,"hide")),t.action&&t.action===$&&E.googleAnalytics.trackEvent("draft_edit","show","large_image:warning")},showRestrictionFeedback:function(t,e,n){this._showRestrictionFeedback({action:t,actionLabel:n,message:e})},_hideRestrictionFeedback:function(){f.add(this.feedbackContainer,"hide"),this.feedbackNode.innerHTML=""},onChange:function(t){},onRemove:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t){return t!=t}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return function(t,e,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===e)return i;return-1}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(107),n(156),n(50)],void 0===(a=function(t,e,n){var i=t?t.isConcatSpreadable:void 0;return function(t){return n(t)||e(t)||!!(i&&t&&t[i])}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(79),n(63),n(6),n(19),n(44),n(9),n(4),n(7),n(22),n(51),n(3),n(39),n(25),n(614),n(615),n(616),n(15),n(17),n(16),n(26),n(175)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C){return t([m,p],{templateString:g,baseClass:"mojoImageUploader blockDropTarget",uploadCopy:null,emptyImage:null,type:"image",allowAutoDesigner:null,autoDesignerIcon:y.getBootstrappedInstance().flagIsOn(w.CONTENT_ENGINE_CA_DYNAMIC_HEADER)?"/images/files/source-icon-content-engine-white.svg":"/images/files/source-icon-content-engine-white-deprecated.svg",isSizedForAutoDesigner:null,constructor:function(){this.placeholder=!1,this.isSizedForAutoDesigner=null},postMixInProperties:function(){switch(this.type){case"video":this.uploadCopy="Add Video URL in editor, drop a preview image here",this.emptyImage="/images/blocks/empty-video-144.png";break;default:this.uploadCopy="Drop an image",this.emptyImage="/images/icons/empty-image.svg"}},buildRendering:function(){"table"===this.node.tagName.toLowerCase()&&(this.templateString="<tr><td>"+this.templateString+"</td></tr>"),h.contains(this.node,"mcpreview-image-uploader")?(this.inherited(arguments),this.isPlaceholder=!0):(this.domNode=this.node,h.add(this.domNode,"blockDropTarget"),this.isPlaceholder=!1);var t=C.getNativeObject();this.allowAutoDesigner&&!t&&(this.isSizedForAutoDesigner=r.get(this.node,"width")>217,this.isSizedForAutoDesigner&&this.browseAdBtn&&(window.parent.ga("send","event","draft_edit","in_view","display_auto_designer_in_template"),r.set(this.browseAdBtn,"display","inline"),y.getBootstrappedInstance().flagIsOn(w.CONTENT_ENGINE_CA_DYNAMIC_HEADER)&&(h.add(this.browseAdBtn,"adBtnExp"),r.set(this.browseAdTooltip,"display","inline"))))},postCreate:function(){this.browseBtn&&this.connect(this.browseBtn,"click",this.handleBrowseButtonClick),this.browseAdBtn&&this.connect(this.browseAdBtn,"click",this.handleBrowseButtonClick),this.placeholder&&(l.place("<span>Image Placeholder</span>",this.uploadText,"only"),this.browseBtn&&r.set(this.browseBtn,"display","none"))},startup:function(){h.contains(this.node,"mcpreview-image-uploader")&&l.place(this.domNode,this.node)},handleBrowseButtonClick:function(t){var n="auto-designer"===t.target.id||"auto-designer-img"===t.target.id?"content-engine":"file";if(!this.placeholder){"auto-designer"!==t.target.id&&"auto-designer-img"!==t.target.id||(window.parent.ga("send","event","draft_edit","click_to_insert_image_inline","auto_designer",{}),_.info("creative-assistant","AD btn clicked from image uploader")),i.stop(t);var a={width:this.domNode.clientWidth,height:this.domNode.clientHeight};window.parent.require(["mojo/widgets/FileManager"],e.hitch(this,(function(t){t.show({actions:"select, rename, copy",allowedFileTypes:"image",shouldChangeSource:!0,newSource:{id:n},allowAutoDesigner:this.allowAutoDesigner,blockSize:a,onSelect:e.hitch(this,(function(e,n,i){this._imageSelected(e,i),t.hide()})),sessionTitle:window.parent.app.campaignTitle})})))}},_imageSelected:function(t,n){window.parent.app.getImageInfo(t).then(e.hitch(this,(function(t){var e={src:t.url,alt:"",width:t.width,height:t.height};n&&(e.contentId=n),this.onImageSelected(e)})))},onImageSelected:function(t){},upload:function(t){var e=new c,n=this.switchToUploadingView();switch(t.type){case"image/file":this._parseFile(t.content,n,e);break;case"image/url":this._saveImageFromRemoteUrl(t.content,e);break;default:throw new Error("ImageUploader does not handle image of type "+t.type)}return this.onUploading(!0),e},_parseFile:function(t,n,i){this.setUploadProgress(.1),window.parent.require(["mojo/widgets/FileManager"],e.hitch(this,(function(a){a.uploadFile(t).then(e.hitch(this,(function(t){this._handleSuccessfulImageUpload(t,n)})),e.hitch(this,"_handleErrorImageUpload")).then((function(){i.resolve()}))})))},_saveImageFromRemoteUrl:function(t,n){this.setUploadProgress(.2),window.parent.require(["mojo/widgets/FileManager"],e.hitch(this,(function(i){i.importFromUrl(t,!0).then(e.hitch(this,"_handleSuccessfulImageUpload"),e.hitch(this,"_handleErrorImageUpload")).then((function(){n.resolve()}))})))},_handleSuccessfulImageUpload:function(t,e){this.onUploading(!1),this.setUploadProgress(1),this._imageSelected(t.getDisplayUrl(),t.contentId),this.switchToUploadedView(t,e)},_handleErrorImageUpload:function(t){this.onUploading(!1),this.setUploadProgress(0)},onUploading:function(t){this.uploading=t},setUploadProgress:function(t){var e=a(".progress_bar_inner",this.domNode)[0];if(e){var n=Math.round(100*t);n=Math.max(0,Math.min(100,n)),r.set(e,"width",n+"%")}},switchToUploadingView:function(){var t=r.get(this.domNode,"height");this.domNode=l.place(f.trim(),this.domNode,"replace"),r.set(this.domNode,"min-height",t+"px");var e=null;return"img"===this.domNode.tagName.toLowerCase()&&(e=r.get(this.domNode,"width")),e},switchToUploadedView:function(t,e){this.domNode=l.place(v.trim(),this.domNode,"replace");var n=r.get(this.domNode,"width"),i=n>e?n:e,a=t.getDisplayUrl();d.set(this.domNode,"src",a),d.set(this.domNode,"id",t.name),r.set(this.domNode,{"max-width":i+"px"})}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div class="imagePlaceholder">\n    <div data-dojo-attach-point="uploadView">\n        <img data-dojo-attach-point="emptyImage" class="mojoImageItemIcon" src="${emptyImage}">\n        <div data-dojo-attach-point="uploadText"><span>${uploadCopy}</span><br />or</div>\n        <div>\n            <input type="button" data-dojo-attach-point="browseBtn" class="button-small" value="browse"/>\n            <div class="autoDesigner">\n                <button type="button" data-dojo-attach-point="browseAdBtn" class="button-small hide" id="auto-designer" style="display: none;">\n                    <img src="${autoDesignerIcon}" alt="Auto Designer icon" id="auto-designer-img" class="v-contentSourceBtnImg button-image">\n                    Creative Assistant\n                </button>\n                <div class="tooltip" data-dojo-attach-point="browseAdTooltip" style="display: none;"><span class="tooltipText">Instantly create beautiful, on-brand designs you can use across marketing channels</span></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="tempImage">\n    <div class="tempImageOverlay">\n        <div class="tempImageMessage">Got it! We\'re uploading your image now.\n            <div class="meter"><span class="progress_bar_inner" style="width: 1%;"></span></div>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<img class="bodyImage" style="display: block" />\n'},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(31),n(59),n(8),n(52),n(618),n(225),n(17)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){var c=/(\*\|\w+(?:\:[^\|]*)?\|\*)/,u={PRODUCT_RECOMMENDATION:"PRODUCT_RECOMMENDATION",ABANDONED_CART:"ABANDONED_CART",ABANDONED_BROWSE:"ABANDONED_BROWSE",PROMO_CODE:"PROMO_CODE",PAGE:"PAGE",PAYMENT_PRICE:"PAYMENT_PRICE",WEB_VIDEO:"WEB_VIDEO"},h=e(null,{constructor:function(t,e){this.type=t,this.data=e,this.children=[],this.parent=null,this.params={},"raw"!==t&&this.parseParams()},parseParams:function(){var e=this.data.trim();if("]"!==e.substr(-1)||-1===e.indexOf("["))return!1;var i=e.indexOf("[");this.data=e.substr(0,i);var a=e.substr(i+1);a=a.substr(0,a.length-1),t.forEach(a.split(","),n.hitch(this,(function(t){var e=t.split("="),n=e[0].trim(),i=e.splice(-1).join("=").trim();"$"==n[0]&&(this.params[n.substr(1)]=i)})))},getData:function(){var t=[];for(var e in this.params)t.push("$"+e+"="+this.params[e]);return this.data+(t.length?" ["+t.join(",")+"]":"")},append:function(t){this.children.push(t),t.parent=this}}),p=new(e(null,{constructor:function(){this.current=null,this.blockStack=[],this.tokens=[],this.formConfig=null},setFormConfig:function(t){this.formConfig=t},tokenize:function(e){this.tokens=[],this.blockStack=[],this.current=null,t.forEach(e.split(c),n.hitch(this,(function(t){if("*|"!=t.substr(0,2)||"|*"!=t.substr(-2))this.addToken("raw",t);else if(-1==t.indexOf(":"))this.addToken("default",t.substr(2,t.length-4));else{var e=t.substr(2,t.length-4).split(":"),n=e[0],i=e.splice(-1).join(":");Boolean(u[n])?this.pushBlock(n,i):"END"==n&&null!=u[i]?this.popBlock(n):this.addToken(n,i)}})))},addToken:function(t,e){var n=new h(t,e);return null===this.current?this.tokens.push(n):this.current.append(n),n},pushBlock:function(t,e){var n=this.addToken(t,e);this.current=n,this.blockStack.push(n)},popBlock:function(t){for(;this.blockStack.length;){if(this.blockStack.pop().type==t)break}this.blockStack.length?this.current=this.blockStack[this.blockStack.length-1]:this.current=null},render:function(t){try{return this.tokenize(t),this.renderTokens(this.tokens)}catch(e){return console.error(e),t}},renderTokens:function(e,n){var i="",a=this;return t.forEach(e,(function(t){var e="",o="handle"+s.capitalize(t.type.toLowerCase());e="function"==typeof a[o]?a[o](t,n):a.handleMissing(t),i+=e})),i},handleMissing:function(t){return"*|"+t.type+":"+t.getData()+"|*"},handleDefault:function(t){return"*|"+t.data+"|*"},handleRaw:function(t){return t.data},handleProduct_recommendation:function(t){var e=+t.params.total,n=t.params.start_index?+t.params.start_index:0;e||(e=10);var i=e+n-1;i>9&&(i=9);for(var o="",s=n;s<=i;s++){var r="placeholder-"+a.pad(s+1,2,"0")+".png";o+=this.renderTokens(t.children,{image:"https://cdn-images.mailchimp.com/ecomm/products/"+r})}return o},handleAbandoned_cart:function(t){var e=+t.params.total;(!e||e>3)&&(e=3);for(var n="",i=0;i<e;i++){var o="placeholder-"+a.pad(i+1,2,"0")+".png";n+=this.renderTokens(t.children,{image:"https://cdn-images.mailchimp.com/ecomm/products/"+o})}return n},handleAbandoned_browse:function(t){for(var e="",n=0;n<1;++n){var i="placeholder-"+a.pad(n+1,2,"0")+".png";e+=this.renderTokens(t.children,{image:"https://cdn-images.mailchimp.com/ecomm/products/"+i})}return e},handleProduct:function(t,e){return e&&null!=t.parent?"IMAGE_URL"==t.data?e.image:"*|"+t.type+":"+t.data+"|*":this.handleMissing(t)},handlePromo_code:function(t){var e="";return t.params.promo_code&&(e=t.params.promo_code),e+=this.renderTokens(t.children)},handlePayment_price:function(t){return this.renderTokens(t.children)},handlePage:function(t){var e=this.formConfig||window.top&&window.top.app&&window.top.app.formConfig;return new r({config:e}).signupForm.toHTML()},handleBrand:function(t){return l.getBrandUrl()},handleWebsite:function(){return d.getBootstrappedInstance().websiteLogoUrl},handleWeb_video:function(t){var e,n=t.params.imgAlt||"",i=t.params.imgPath||"",a=t.params.imgProtocol||"http";t.params.imgWidth;switch(t.params.service){case"youtube":e="https://www.youtube.com/embed/"+t.params.id;break;case"vimeo":e="https://player.vimeo.com/video/"+t.params.id}return i?'<img alt="'+n+'" src="'+a+"://"+i+'" width="100%" style="align-self: center; max-width:100%;" class="mcnImage"/>':e?'<iframe src="'+e+'" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position: absolute; top:0; left: 0; width: 100%; height: 100%;" frameborder="0"></iframe>':""}}));return{setFormConfig:function(t){p.setFormConfig(t)},render:function(t){return p.render(t)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(22),n(10),n(7),n(4),n(27),n(9),n(2),n(58),n(6),n(33),n(49),n(12),n(15),n(177),n(17),n(16),n(619)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b){return t([p,g],{version:"1.0",template:1,maxWidth:960,mobileView:!1,config:{},subscribeUrl:"#",honeypotFieldName:"",layoutCssNode:null,customCssNode:null,postMixInProperties:function(){this.config.template&&(this.template=this.config.template),this.config.version&&(this.version=this.config.version),this.config.styles&&(this.styles=this.config.styles)},postCreate:function(){this.signupForm=new b({config:this.config}),this.loadCustomCss(),l(window,"resize",e.hitch(this,(function(){var t=this._isMobileView();t!==this.mobileView&&(this.mobileView=t)})))},startup:function(){this.inherited(arguments),this.mobileView=this._isMobileView()},_isMobileView:function(){return h.getBox().w<this.maxWidth},loadSignupFlagStyles:function(){var t=new n,e=document.createElement("link");return e.rel="stylesheet",e.type="text/css",e.href="/css/signup-forms/pages/signup-button-flag.css",e.media="all",m.globalPublish("neapolitan/preview/merge/template/add/css/flag",{linkElement:e}),t.promise},loadCustomCss:function(){this.customCssNode=this.createStyleNode(document,"customSignupFormStyle");var t=this.getStyleSheet(this.customCssNode);if(this.styles.hasOwnProperty("neapolitan")){if(this.styles.neapolitan.forEach(function(e){Object.keys(e.props).forEach(function(n){this.addCSSRule(t,e.selector,n+": "+e.props[n].value+";")}.bind(this))}.bind(this)),this.styles.hasOwnProperty("formStyles"))for(var e in this.styles.formStyles)this.styles.formStyles.hasOwnProperty(e)&&this._addAlignmentStyles(this,t,this.styles.formStyles,e)}else this.styles.hasOwnProperty("button")&&this._addButtonStyles(this,t,this.config.styles,"button"),this.styles.hasOwnProperty("labels")&&this._addLabelStyles(this,t,this.config.styles,"labels")},_addButtonStyles:function(t,e,n,i){for(var a in n[i])if(n[i].hasOwnProperty(a)){switch(a){case"color":t.addCSSRule(e,".webContent__content .button","background-color:"+n[i][a]+";");break;case"hover_color":t.addCSSRule(e,".webContent__content .button:hover","background-color:"+n[i][a]+";");break;case"text_color":t.addCSSRule(e,".webContent__content .button","color:"+n[i][a]+";");break;case"border":t.addCSSRule(e,".webContent__content .button","border:"+n[i][a]+";");break;case"alignment":"right"===n[i][a]?t.addCSSRule(e,".webContent__content .button","float:right;"):"center"===n[i][a]?(t.addCSSRule(e,".webContent__content .button","float:none;margin-left:auto;margin-right:auto;"),u("ie")<=9?(t.addCSSRule(e,".webContent__content .button","display:table-cell;"),t.addCSSRule(e,".webContent__content .content__button","margin-left:auto;margin-right:auto;display:table;")):t.addCSSRule(e,".webContent__content .button","display:table;")):t.addCSSRule(e,".webContent__content .button","float:left;");break;case"style":"full"===n[i][a]?t.addCSSRule(e,".webContent__content .button","width:100%;"):t.addCSSRule(e,".webContent__content .button","width:auto;")}t.addCSSRule(e,".mcnSignUpFormContentContainer","flex: auto; max-width: 450px")}},_addLabelStyles:function(t,e,n,i){for(var a in n[i])if(n[i].hasOwnProperty(a))switch(a){case"color":t.addCSSRule(e,".webContent__content label","color:"+n[i][a]+";");break;case"font":t.addCSSRule(e,".webContent__content label","font-family:"+n[i][a]+";")}},_addAlignmentStyles:function(t,e,n,i){switch(i){case"buttonAlignment":"right"===n[i]?t.addCSSRule(e,".webContent__content .button","float:right;"):"center"===n[i]?(t.addCSSRule(e,".webContent__content .button","float:none;margin-left:auto;margin-right:auto;"),u("ie")<=9?(t.addCSSRule(e,".webContent__content .button","display:table-cell;"),t.addCSSRule(e,".content__button","margin-left:auto;margin-right:auto;display:table;")):t.addCSSRule(e,".webContent__content .button","display:table;")):t.addCSSRule(e,".webContent__content .button","float:left;");break;case"buttonWidthStyle":"full"===n[i]&&t.addCSSRule(e,".webContent__content .button","width:100%;");break;case"formWidth":t.addCSSRule(e,".mcnSignUpFormContentContainer","flex:0 0 "+n[i])}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(7),n(4),n(45),n(27),n(9),n(71),n(28),n(2),n(6),n(136),n(620),n(264),n(265),n(621),n(266),n(267),n(268),n(269),n(270),n(271),n(622),n(623),n(272),n(273),n(12),n(11),n(24),n(321)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E){var P=e([T,A],{required:!1,inputs:[],errorsNode:null,_empty:function(t){return null==t||""===t},postCreate:function(){this.inputs=u("input:not([type='hidden']), select option",this.domNode)}}),D=e([P],{templateString:g}),N=e([P],{templateString:_}),L=e([P],{templateString:f,postCreate:function(){var e=[{id:"286",name:"Aaland Islands"},{id:"274",name:"Afghanistan"},{id:"2",name:"Albania"},{id:"3",name:"Algeria"},{id:"178",name:"American Samoa"},{id:"4",name:"Andorra"},{id:"5",name:"Angola"},{id:"176",name:"Anguilla"},{id:"175",name:"Antigua And Barbuda"},{id:"6",name:"Argentina"},{id:"7",name:"Armenia"},{id:"179",name:"Aruba"},{id:"8",name:"Australia"},{id:"9",name:"Austria"},{id:"10",name:"Azerbaijan"},{id:"11",name:"Bahamas"},{id:"12",name:"Bahrain"},{id:"13",name:"Bangladesh"},{id:"14",name:"Barbados"},{id:"15",name:"Belarus"},{id:"16",name:"Belgium"},{id:"17",name:"Belize"},{id:"18",name:"Benin"},{id:"19",name:"Bermuda"},{id:"20",name:"Bhutan"},{id:"21",name:"Bolivia"},{id:"22",name:"Bosnia and Herzegovina"},{id:"23",name:"Botswana"},{id:"181",name:"Bouvet Island"},{id:"24",name:"Brazil"},{id:"180",name:"Brunei Darussalam"},{id:"25",name:"Bulgaria"},{id:"26",name:"Burkina Faso"},{id:"27",name:"Burundi"},{id:"28",name:"Cambodia"},{id:"29",name:"Cameroon"},{id:"30",name:"Canada"},{id:"31",name:"Cape Verde"},{id:"32",name:"Cayman Islands"},{id:"33",name:"Central African Republic"},{id:"34",name:"Chad"},{id:"35",name:"Chile"},{id:"36",name:"China"},{id:"185",name:"Christmas Island"},{id:"37",name:"Colombia"},{id:"204",name:"Comoros"},{id:"38",name:"Congo"},{id:"183",name:"Cook Islands"},{id:"268",name:"Costa Rica"},{id:"275",name:"Cote D'Ivoire"},{id:"40",name:"Croatia"},{id:"276",name:"Cuba"},{id:"298",name:"Curacao"},{id:"41",name:"Cyprus"},{id:"42",name:"Czech Republic"},{id:"43",name:"Denmark"},{id:"44",name:"Djibouti"},{id:"289",name:"Dominica"},{id:"187",name:"Dominican Republic"},{id:"233",name:"East Timor"},{id:"45",name:"Ecuador"},{id:"46",name:"Egypt"},{id:"47",name:"El Salvador"},{id:"48",name:"Equatorial Guinea"},{id:"49",name:"Eritrea"},{id:"50",name:"Estonia"},{id:"51",name:"Ethiopia"},{id:"189",name:"Falkland Islands"},{id:"191",name:"Faroe Islands"},{id:"52",name:"Fiji"},{id:"53",name:"Finland"},{id:"54",name:"France"},{id:"193",name:"French Guiana"},{id:"277",name:"French Polynesia"},{id:"56",name:"Gabon"},{id:"57",name:"Gambia"},{id:"58",name:"Georgia"},{id:"59",name:"Germany"},{id:"60",name:"Ghana"},{id:"194",name:"Gibraltar"},{id:"61",name:"Greece"},{id:"195",name:"Greenland"},{id:"192",name:"Grenada"},{id:"196",name:"Guadeloupe"},{id:"62",name:"Guam"},{id:"198",name:"Guatemala"},{id:"270",name:"Guernsey"},{id:"63",name:"Guinea"},{id:"65",name:"Guyana"},{id:"200",name:"Haiti"},{id:"66",name:"Honduras"},{id:"67",name:"Hong Kong"},{id:"68",name:"Hungary"},{id:"69",name:"Iceland"},{id:"70",name:"India"},{id:"71",name:"Indonesia"},{id:"278",name:"Iran"},{id:"279",name:"Iraq"},{id:"74",name:"Ireland"},{id:"75",name:"Israel"},{id:"76",name:"Italy"},{id:"202",name:"Jamaica"},{id:"78",name:"Japan"},{id:"288",name:"Jersey  (Channel Islands)"},{id:"79",name:"Jordan"},{id:"80",name:"Kazakhstan"},{id:"81",name:"Kenya"},{id:"203",name:"Kiribati"},{id:"82",name:"Kuwait"},{id:"83",name:"Kyrgyzstan"},{id:"84",name:"Lao People's Democratic Republic"},{id:"85",name:"Latvia"},{id:"86",name:"Lebanon"},{id:"87",name:"Lesotho"},{id:"88",name:"Liberia"},{id:"281",name:"Libya"},{id:"90",name:"Liechtenstein"},{id:"91",name:"Lithuania"},{id:"92",name:"Luxembourg"},{id:"208",name:"Macau"},{id:"93",name:"Macedonia"},{id:"94",name:"Madagascar"},{id:"95",name:"Malawi"},{id:"96",name:"Malaysia"},{id:"97",name:"Maldives"},{id:"98",name:"Mali"},{id:"99",name:"Malta"},{id:"207",name:"Marshall Islands"},{id:"210",name:"Martinique"},{id:"100",name:"Mauritania"},{id:"212",name:"Mauritius"},{id:"241",name:"Mayotte"},{id:"101",name:"Mexico"},{id:"102",name:"Moldova, Republic of"},{id:"103",name:"Monaco"},{id:"104",name:"Mongolia"},{id:"290",name:"Montenegro"},{id:"294",name:"Montserrat"},{id:"105",name:"Morocco"},{id:"106",name:"Mozambique"},{id:"242",name:"Myanmar"},{id:"107",name:"Namibia"},{id:"108",name:"Nepal"},{id:"109",name:"Netherlands"},{id:"110",name:"Netherlands Antilles"},{id:"213",name:"New Caledonia"},{id:"111",name:"New Zealand"},{id:"112",name:"Nicaragua"},{id:"113",name:"Niger"},{id:"114",name:"Nigeria"},{id:"217",name:"Niue"},{id:"214",name:"Norfolk Island"},{id:"272",name:"North Korea"},{id:"116",name:"Norway"},{id:"117",name:"Oman"},{id:"118",name:"Pakistan"},{id:"222",name:"Palau"},{id:"282",name:"Palestine"},{id:"119",name:"Panama"},{id:"219",name:"Papua New Guinea"},{id:"120",name:"Paraguay"},{id:"121",name:"Peru"},{id:"122",name:"Philippines"},{id:"221",name:"Pitcairn"},{id:"123",name:"Poland"},{id:"124",name:"Portugal"},{id:"126",name:"Qatar"},{id:"315",name:"Republic of Kosovo"},{id:"127",name:"Reunion"},{id:"128",name:"Romania"},{id:"129",name:"Russia"},{id:"130",name:"Rwanda"},{id:"205",name:"Saint Kitts and Nevis"},{id:"206",name:"Saint Lucia"},{id:"237",name:"Saint Vincent and the Grenadines"},{id:"132",name:"Samoa (Independent)"},{id:"227",name:"San Marino"},{id:"133",name:"Saudi Arabia"},{id:"134",name:"Senegal"},{id:"266",name:"Serbia"},{id:"135",name:"Seychelles"},{id:"136",name:"Sierra Leone"},{id:"137",name:"Singapore"},{id:"302",name:"Sint Maarten"},{id:"138",name:"Slovakia"},{id:"139",name:"Slovenia"},{id:"223",name:"Solomon Islands"},{id:"140",name:"Somalia"},{id:"141",name:"South Africa"},{id:"257",name:"South Georgia and the South Sandwich Islands"},{id:"142",name:"South Korea"},{id:"311",name:"South Sudan"},{id:"143",name:"Spain"},{id:"144",name:"Sri Lanka"},{id:"293",name:"Sudan"},{id:"146",name:"Suriname"},{id:"225",name:"Svalbard and Jan Mayen Islands"},{id:"147",name:"Swaziland"},{id:"148",name:"Sweden"},{id:"149",name:"Switzerland"},{id:"285",name:"Syria"},{id:"152",name:"Taiwan"},{id:"260",name:"Tajikistan"},{id:"153",name:"Tanzania"},{id:"154",name:"Thailand"},{id:"155",name:"Togo"},{id:"232",name:"Tonga"},{id:"234",name:"Trinidad and Tobago"},{id:"156",name:"Tunisia"},{id:"157",name:"Turkey"},{id:"287",name:"Turks &amp; Caicos Islands"},{id:"159",name:"Uganda"},{id:"161",name:"Ukraine"},{id:"162",name:"United Arab Emirates"},{id:"262",name:"United Kingdom"},{id:"163",name:"Uruguay"},{id:"165",name:"Uzbekistan"},{id:"239",name:"Vanuatu"},{id:"166",name:"Vatican City State (Holy See)"},{id:"167",name:"Venezuela"},{id:"168",name:"Vietnam"},{id:"169",name:"Virgin Islands (British)"},{id:"238",name:"Virgin Islands (U.S.)"},{id:"188",name:"Western Sahara"},{id:"170",name:"Yemen"},{id:"173",name:"Zambia"},{id:"174",name:"Zimbabwe"}];t.forEach(e,n.hitch(this,(function(t){var e='<option value="'+t.id+'">'+t.name+"</option>";a.place(e,this.countrySelectNode,"last")}))),this.inherited(arguments)}}),M=e([P],{templateString:v}),B=e([P],{templateString:b,validateAsGroup:!0,postCreate:function(){this.inherited(arguments),"DD/MM"===this.dateformat&&(a.place(this.dayNode,this.inputsContainer,"first"),a.place(this.monthNode,this.inputsContainer,"last"))}}),R=e([P],{templateString:y,validateAsGroup:!0,postCreate:function(){this.inherited(arguments),"MM/DD/YYYY"===this.dateformat?(a.place(this.monthNode,this.inputsContainer,"first"),a.place(this.yearNode,this.inputsContainer,"last")):"DD/MM/YYYY"===this.dateformat&&(a.place(this.dayNode,this.inputsContainer,"first"),a.place(this.yearNode,this.inputsContainer,"last"))}}),F=e([P],{templateString:w,validateAsGroup:!0}),O=e([P],{templateString:C}),U=e([P],{templateString:k}),$=e([P],{templateString:S,postCreate:function(){t.forEach(this.choices,n.hitch(this,(function(t,e){var n,i,o=this.merge_id?this.name+"-"+e:this.name+"-"+this.group_id+"-"+e;o="mc-"+o,"checkbox"===this.type?(n=this.name+"["+t.value+"]",i="<div class='checkbox-bg'></div>"):(n=this.name,i="<div class='radio-fill'></div>");var s=a.create("input",{id:o,type:this.type,value:t.value,name:n,checked:"checkbox"===this.type&&"true"}),r=a.create("label",{for:o,class:this.type}),l=document.createTextNode(t.label),d=a.create("div",{class:"hover-focus-background"}),c=a.create("div",{class:"flex-spacer"}),u=a.create("li");a.place(s,r),a.place(l,r),i&&a.place(i,r),a.place(d,r),a.place(r,u),a.place(c,u),a.place(u,this.choicesContainer,"last")}))),this.inherited(arguments)}}),H=e([P],{templateString:I,validateAsType:"radiocheckbox"}),V=e([P],{templateString:x,postCreate:function(){var e=[];t.forEach(this.choices,n.hitch(this,(function(t){var n=a.toDom('<option value="'+t.value+'">'+t.label+"</option>");this._empty(t.label)&&e.push(n),a.place(n,this.choicesContainer,"last")}))),e.length>0?i.set(e[0],"selected","selected"):a.place('<option value="" selected="selected"></option>',this.choicesContainer,"first"),this.inherited(arguments)}}),z=e([T,A],{templateString:m,gdprLabel:"",gdprDescription:"",gdprLegal:"",gdprMCLegal:"",postCreate:function(){this.inherited(arguments);var t=a.toDom("<span>"+this.gdprMCLegal+"</span>");a.place(t,this.gdprMcLegalContainer)}});return e("PagesSignupFormBlock",[j],{templateString:p,state:{buttonLabel:"",successMessage:"",fields:[]},constructor:function(t){this.state={buttonLabel:t.config.buttonLabel,successMessage:t.config.successMessage,fields:t.config.fields,showConfirmation:t.config.showConfirmation,doubleOptin:t.config.doubleOptin,doubleOptinMessage:t.config.doubleOptinMessage,gdprLabel:t.config.gdprLabel,gdprDescription:t.config.gdprDescription,gdprLegal:t.config.gdprLegal,gdprMCLegal:t.config.gdprMCLegal,gdprEnabled:t.config.gdprEnabled},this.fieldNodes=[]},postCreate:function(){c(this.formNode,"submit",(function(t){t.stopPropagation(),t.preventDefault()}))},render:function(){this.inherited(arguments),this.state.gdprEnabled&&(this.gdprContent=new z({gdprLabel:this.state.gdprLabel,gdprDescription:this.state.gdprDescription,gdprLegal:this.state.gdprLegal,gdprMCLegal:this.state.gdprMCLegal}),this.gdprContent.placeAt(this.formFieldsContainer,"after")),this._addFields(),this.state.doubleOptin?d.set(this.formResponseMessages,this.state.doubleOptinMessage):d.set(this.formResponseMessages,this.state.successMessage),this._toggleConfirmation()},updateFields:function(t){this.setState({fields:t})},updateButtonLabel:function(t){this.setState({buttonLabel:t})},updateSuccessMessage:function(t){this.setState({successMessage:t})},_toggleConfirmation:function(){this.state.showConfirmation?(this.formResponseMessages.style.display="block",this.formContentContainer.style.display="none"):(this.formResponseMessages.style.display="none",this.formContentContainer.style.display="block")},_addFields:function(){this.fieldNodes.length&&(t.forEach(this.fieldNodes,(function(t){t.destroy()})),this.fieldNodes=[],a.empty(this.formFieldsContainer),this.gdprContent&&this.state.gdprEnabled&&a.empty(this.gdprContent.gdprFieldsContainer)),t.forEach(this.state.fields,n.hitch(this,(function(t){var e=this._createField(t);this.gdprContent&&this.state.gdprEnabled&&t.marketing_preference_id?e.placeAt(this.gdprContent.gdprFieldsContainer):e.placeAt(this.formFieldsContainer),e.startup()})))},_createField:function(t){var e;switch(t.type){case"email":e=new M(t);break;case"address":e=new L(t);break;case"birthday":e=new B(t);break;case"date":e=new R(t);break;case"phone":e="US"===t.phoneformat?new F(t):new D(t);break;case"number":e=new N(t);break;case"select":case"dropdown":e=new V(t);break;case"radio":case"checkbox":e=t.marketing_preference_id?new H(t):new $(t);break;case"hidden":e=new U(t);break;case"url":case"image":e=new O(t);break;case"text":default:e=new D(t)}return this.fieldNodes.push(e),e},toHTML:function(){return this.domNode.outerHTML}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div class="webContent">\n    <div class="flash-block" data-dojo-attach-point="formResponseMessages"></div>\n    <div class="webContent__content" data-dojo-attach-point="formContentContainer">\n        \x3c!-- Form Fields --\x3e\n\t\t<form action="" data-dojo-attach-point="formNode" novalidate>\n\t\t\t<div class="content__formFields" data-dojo-attach-point="formFieldsContainer"></div>\n\t\t    <div class="content__button">\n                <input type="submit" class="button" value="${buttonLabel}"/>\n\t\t    </div>\n\t\t</form>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="field-wrapper address">\n\t<div>\n\t    <label for="mc-${name}-addr1">${label}</label>\n\t\t<input class="address1" type="text" name="${name}[addr1]" value="" id="mc-${name}-addr1" data-dojo-attach-point="address1Node" />\n\t</div>\n\t<div>\n\t    <label for="mc-${name}-addr2">Address Line 2</label>\n\t\t<input class="address2" type="text" name="${name}[addr2]" value="" id="mc-${name}-addr2" />\n\t</div>\n\t<div>\n\t    <label for="mc-${name}-city">City</label>\n\t\t<input class="city" type="text" name="${name}[city]" value="" id="mc-${name}-city" data-dojo-attach-point="cityNode" />\n\t</div>\n\t<div>\n\t    <label for="mc-${name}-state">State/Province/Region</label>\n\t\t<input class="state" type="text" name="${name}[state]" value="" id="mc-${name}-state" data-dojo-attach-point="stateNode" />\n\t</div>\n\t<div>\n\t    <label for="mc-${name}-zip">Postal / Zip Code</label>\n\t\t<input class="zip" type="text" name="${name}[zip]" value="" id="mc-${name}-zip" data-dojo-attach-point="zipNode" />\n\t</div>\n\t<div>\n\t    <label for="mc-${name}-country">Country</label>\n\t    \x3c!-- TODO: Is there a formatting option for which country should be top of the list? --\x3e\n\t\t<select class="country" name="${name}[country]" id="mc-${name}-country" data-dojo-attach-point="countrySelectNode">\n\t\t    <option value="" selected></option>\n\t\t    <option value="164">USA</option>\n\t\t</select>\n\t</div>\n</div>'},function(t,e){t.exports='<div class="field-wrapper">\n\t<input type="hidden" placeholder="" name="${name}" value="" id="mc-${name}" />\n</div>'},function(t,e){t.exports='<div class="field-wrapper radio-group">\n\t<label for="mc-${name}">${label}</label>\n\t<ul class="radioCheckboxContainer" data-dojo-attach-point="choicesContainer"></ul>\n</div>'},function(t,e){t.exports='<div class="mojoMcBlock tpl-block dojoDndItem">\n    <div class="editedOverlay" style="display:none" data-dojo-attach-point="editedOverlay">\n        <span data-dojo-attach-point="editType"></span> by: <span class="userName" data-dojo-attach-point="editedBy"></span>\n    </div>\n\n    \x3c!-- Content of the block will get inserted inside of this --\x3e\n    <div data-dojo-attach-point="containerNode"></div>\n\n    <div class="tpl-block-controls flex-row">\n        <div class="tpl-block-move flex-auto">\n            <span title="Drag to Reorder" data-dojo-attach-point="sortBtn" class="tpl-block-drag dojoDndHandle freddicon move-arrows"></span>\n        </div>\n        <div class="dynamic-content-header flex-auto flex" data-dojo-attach-point="dynamicContentContainer">\n        </div>\n        <div class="tpl-block-actions">\n            <div data-dojo-attach-point="autoDesigner"></div>\n            <a title="Edit Block" href="#" class="tpl-block-edit" data-dojo-attach-point="editBtn"><span class="freddicon edit"></span></a>\n            <a title="Duplicate Block" href="#" class="tpl-block-clone" data-dojo-attach-point="cloneBtn"><span class="freddicon duplicate"></span></a>\n            <a title="Delete Block" href="#" class="tpl-block-delete" data-dojo-attach-point="deleteBtn"><span class="freddicon trash"></span></a>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){var i,a;i=[n(172),n(117),n(626),n(233)],void 0===(a=function(t,e,n,i){return e((function(e){return n(t(e,i))}))}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(317),n(235),n(627)],void 0===(a=function(t,e,n){return function(i,a,o){var s=i.length;if(s<2)return s?n(i[0]):[];for(var r=-1,l=Array(s);++r<s;)for(var d=i[r],c=-1;++c<s;)c!=r&&(l[r]=t(l[r]||d,i[c],a,o));return n(e(l,1),a,o)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(185),n(318),n(320),n(186),n(628),n(187)],void 0===(a=function(t,e,n,i,a,o){return function(s,r,l){var d=-1,c=e,u=s.length,h=!0,p=[],m=p;if(l)h=!1,c=n;else if(u>=200){var g=r?null:a(s);if(g)return o(g);h=!1,c=i,m=new t}else m=r?[]:p;t:for(;++d<u;){var f=s[d],v=r?r(f):f;if(f=l||0!==f?f:0,h&&v==v){for(var b=m.length;b--;)if(m[b]===v)continue t;r&&m.push(v),p.push(f)}else c(m,v,l)||(m!==p&&m.push(v),p.push(f))}return p}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(251),n(629),n(187)],void 0===(a=function(t,e,n){return t&&1/n(new t([,-0]))[1]==1/0?function(e){return new t(e)}:e}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(){}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(63),n(27),n(3),n(4),n(83),n(12),n(11),n(20),n(14),n(431),n(113),n(164),n(432),n(165),n(1394),n(1395),n(1396),n(1397),n(180)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){var _=t("dojox.form._CheckedMultiSelectItem",[l,d,c],{templateString:b,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"},this.disabled||(this.disabled=this.option.disabled=this.option.disabled||!1),this.readOnly||(this.readOnly=this.option.readOnly=this.option.readOnly||!1),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.labelNode.innerHTML=this.option.label},_changeBox:function(){this.get("disabled")||this.get("readOnly")||(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(t){this.get("disabled")||this.get("readOnly")?i.stop(t):this.checkBox._onClick(t)},_updateBox:function(){this.checkBox.set("value",this.option.selected)},_setDisabledAttr:function(t){this.disabled=t||this.option.disabled,this.checkBox.set("disabled",this.disabled),o.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(t){this.checkBox.set("readOnly",t),this.readOnly=t}}),C=t("dojox.form._CheckedMultiSelectMenu",h,{multiple:!1,buildRendering:function(){this.inherited(arguments);var t=this.menuTableNode=this.domNode,e=this.domNode=s.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});t.parentNode&&t.parentNode.replaceChild(e,t),o.remove(t,"dijitMenuTable"),e.className=t.className+" dojoxCheckedMultiSelectMenu",t.className="dijitReset dijitMenuTable",t.setAttribute("role","listbox"),e.setAttribute("role","presentation"),e.appendChild(t)},resize:function(t){t&&(a.setMarginBox(this.domNode,t),"w"in t&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments),this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(t,e){if(void 0===this.isShowingNow&&this._markActive(),this.focusChild(t),t.disabled||t.readOnly)return!1;this.multiple||this.onExecute(),t.onClick(e)}}),k=t("dojox.form._CheckedMultiSelectMenuItem",p,{templateString:v,option:null,parent:null,iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"}),this.disabled=this.option.disabled,this.checked=this.option.selected,this.label=this.option.label,this.readOnly=this.option.readOnly,this.inherited(arguments)},onChange:function(t){},_updateBox:function(){o.toggle(this.domNode,"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected),this.domNode.setAttribute("aria-checked",this.option.selected),this.inputNode.checked=this.option.selected,this.parent.multiple||o.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(t){this.disabled||this.readOnly||(this.parent.multiple?(this.option.selected=!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(n.forEach(this.parent.getChildren(),(function(t){t.option.selected=!1})),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected))),this.inherited(arguments)}});return t("dojox.form.CheckedMultiSelect",g,{templateString:y,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],postMixInProperties:function(){this.inherited(arguments),this._nlsResources=r.getLocalization("dojox.form","CheckedMultiSelect",this.lang),"$_unset_$"==this.invalidMessage&&(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){if(this.inherited(arguments),this.options.length&&!this.value&&this.srcNodeRef){var t=this.srcNodeRef.selectedIndex||0;this.value=this.options[t>=0?t:0].value}this.dropDown&&(o.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=new C({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,onChange:e.hitch(this,"_updateSelection")}))},startup:function(){this.inherited(arguments),this.dropDown&&(this.dropDownButton=new f({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode))},_onMouseDown:function(t){t.preventDefault()},validator:function(){return!this.required||n.some(this.getOptions(),(function(t){return t.selected&&null!=t.value&&0!=t.value.toString().length}))},validate:function(t){m.hide(this.domNode);var e=this.isValid(t);return e||this.displayMessage(this.invalidMessage),e},isValid:function(t){return this.validator()},getErrorMessage:function(t){return this.invalidMessage},displayMessage:function(t){m.hide(this.domNode),t&&m.show(t,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(t,e){},_addOptionItem:function(t){var e;this.dropDown?(e=new k({option:t,parent:this.dropDownMenu}),this.dropDownMenu.addChild(e)):(e=new _({option:t,parent:this,disabled:this.disabled,readOnly:this.readOnly}),this.wrapperDiv.appendChild(e.domNode)),this.onAfterAddOptionItem(e,t)},_refreshState:function(){this.validate(this.focused)},onChange:function(t){this._refreshState()},reset:function(){this.inherited(arguments),m.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments),this._handleOnChange(this.value),n.forEach(this._getChildren(),(function(t){t._updateBox()})),s.empty(this.containerNode);var t=this;if(n.forEach(this.value,(function(e){var n=s.create("option",{value:e,label:e,selected:"selected"});s.place(n,t.containerNode)})),this.dropDown&&this.dropDownButton){var i=0,a="";n.forEach(this.options,(function(t){t.selected&&(i++,a=t.label)})),this.dropDownButton.set("label",this.multiple?e.replace(this._nlsResources.multiSelectLabelText,{num:i}):a)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():n.map(this.wrapperDiv.childNodes,(function(t){return u.byNode(t)}))},invertSelection:function(t){this.multiple&&(n.forEach(this.options,(function(t){t.selected=!t.selected})),this._updateSelection())},_setDisabledAttr:function(t){this.inherited(arguments),this.dropDown&&this.dropDownButton.set("disabled",t),n.forEach(this._getChildren(),(function(e){e&&e.set&&e.set("disabled",t)}))},_setReadOnlyAttr:function(t){this.inherited(arguments),"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",t),this.readOnly=t,n.forEach(this._getChildren(),(function(e){e&&e.set&&e.set("readOnly",t)}))},uninitialize:function(){m.hide(this.domNode),n.forEach(this._getChildren(),(function(t){t.destroyRecursive()})),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(105),n(1),n(4),n(6),n(2)],void 0===(a=function(t,e,n,i,a,o,s,r){var l="bold",d="italic",c="underline",u="strikethrough";return t([e,n,i],{label:"Font Style",templateString:'<div class="mojoFontStyle flex"></div>',_checkboxTpl:'<input type="checkbox" class="v-visuallyHidden v-buttonGroupControl" id="{id}" value="{value}"><label for="{id}" class="v-buttonGroupLabel"><span class="freddicon {icon}"></span></label>',selector:null,fontStyle:null,fontWeight:null,textDecoration:null,properties:null,_inputs:null,postMixInProperties:function(){this.properties||(this.properties={}),this._inputs={}},postCreate:function(){for(var t in this.inherited(arguments),this.properties.hasOwnProperty("font-weight")&&this._addInput(l,"text-bold"),this.properties.hasOwnProperty("font-style")&&this._addInput(d,"text-italics"),this.properties.hasOwnProperty("text-decoration")&&(this._addInput(c,"text-underline"),this._addInput(u,"text-strikethrough")),s("[type=checkbox]",this.domNode).forEach(a.hitch(this,(function(t){this._inputs[t.value]=t}))),this.properties)this.properties.hasOwnProperty(t)&&this.updateValue(t,this.properties[t]);this.own(r(this.domNode,"[type=checkbox]:change",a.hitch(this,"_updateProperties"))),this.watch(a.hitch(this,(function(t,e,n){var i=null;switch(t){case"fontWeight":i="font-weight";break;case"fontStyle":i="font-style";break;case"textDecoration":i="text-decoration"}i&&this.onChange(i,n)})))},updateValue:function(t,e){switch(t){case"font-weight":this._inputs[l].checked=e&&"bold"===e.toLowerCase();break;case"font-style":this._inputs[d].checked=e&&"italic"===e.toLowerCase();break;case"text-decoration":var n="";"string"==typeof e&&(n=e.toLowerCase());var i=n.indexOf("line-through")>=0,a=n.indexOf("underline")>=0;this._inputs[u].checked=i,this._inputs[c].checked=a}},_addInput:function(t,e){var n=this.id+"_"+t;o.place(a.replace(this._checkboxTpl,{id:n,value:t,icon:e}),this.domNode)},_updateProperties:function(){var t=this._inputs[l],e=this._inputs[d],n=this._inputs[c],i=this._inputs[u];if(t&&this.set("fontWeight",t.checked?"bold":"normal"),e&&this.set("fontStyle",e.checked?"italic":"normal"),n&&i){var a=[];n.checked&&a.push("underline"),i.checked&&a.push("line-through"),this.set("textDecoration",a.length?a.join(" "):"none")}},onChange:function(t,e){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(12),n(146),n(59),n(105)],void 0===(a=function(t,e,n,i,a,o,s){return t("mojo/widgets/input/Measurement",[i,s],{baseClass:"mojoMeasurementInput",textboxOpts:{},_setValueAttr:function(t){null===(t=t.replace(/ /g,"")).match("%")?(this.suffix="px",t.match("px")&&(t=o.trim(t.replace("px","")))):this.suffix="",null!=this.input&&this.input.set("value",t,!1),this._updateSuffix();var e=this.get("value");this._set("value",t+this.suffix),e!=t&&this.onChange(t+this.suffix),this.inherited(arguments,[t])},_setDisabledAttr:function(t){this.input.set("disabled",t)},postCreate:function(){this.originalValue=this.get("value");var t={value:this.get("value")};e.mixin(t,this.textboxOpts),this.input=new a(t),this.input.startup(),this.input.placeAt(this.domNode),this.set("value",this.get("value")),this.suffixDom=n.place('<span class="suffix">'+this.suffix+"</span>",this.domNode),this.connect(this.input,"onChange","_setValueAttr"),this.inherited(arguments)},_updateSuffix:function(){this.suffixDom&&(this.suffixDom.innerHTML=this.suffix)},reset:function(){this.set("value",this.originalValue)},onChange:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(30),n(3),n(27),n(9),n(62),n(718),n(11),n(20),n(76),n(1404),n(213),n(96),n(38)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){return t([l,d,c,u],{templateString:h,store:null,autoComplete:!0,queryExpr:"${0}",postCreate:function(){a.add(this.inputField._buttonNode,"hide"),this.inputField.autoComplete=this.autoComplete,this.inputField.store=this.store,this.inputField.queryExpr=this.queryExpr,this.own(n(this,"click",e.hitch(this,(function(t){r.focus(this.domNode),t.stopPropagation(),t.preventDefault()}))),n(this,"dblclick",e.hitch(this,"_onDblClick")),n(this.removeBtn,"click",e.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.destroy()}))),n(this.inputField,"change",e.hitch(this,(function(){var t=this.inputField.item;t&&(this.setValue(t.id),this.setLabel(t.name)),this.inputField.focusNode.blur(),this.tagList.moveToNewTag()})))),this.setValue(this.value),this.viewMode()},getCurrentInput:function(){return this.inputField.focusNode.value||""},isBlank:function(){return!this.getValue()&&(this.inViewMode()||!this.getCurrentInput())},setLabel:function(t){this.inherited(arguments),this._updateValue()},viewMode:function(){this.domNode&&(a.add(this.domNode,"view-mode"),a.remove(this.domNode,"edit-mode")),this.focused&&a.add(this.domNode,"active"),this._updateValue(),this.inputField.focusNode.blur(),this.inherited(arguments)},editMode:function(){this.domNode&&(a.remove(this.domNode,"view-mode"),a.add(this.domNode,"edit-mode")),this._adjustTextInput(),r.focus(this.inputField.focusNode),a.remove(this.domNode,"active"),this.inherited(arguments)},_updateValue:function(){this.tagLabel.innerHTML=g.encode(this.getLabel()),this._adjustTextInput()},_adjustTextInput:function(){var t=o.position(this.tagLabel).w+50;s.set(this.inputField,"width",t+"px")},focus:function(){r.focus(this.domNode),this._onFocus()},_onFocus:function(){a.toggle(this.domNode,"active",this.inViewMode()),this.inherited(arguments)},_onBlur:function(){a.remove(this.domNode,"active"),this.viewMode(),this.inherited(arguments)},_onDblClick:function(){this.inViewMode()&&(this.editMode(),this.inputField.select())}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(7),n(9),n(31),n(2),n(3),n(35),n(22),n(19),n(29),n(12),n(11),n(20),n(1406),n(577),n(8),n(17),n(21),n(16),n(26),n(15),n(1407),n(635),n(204),n(458),n(585),n(807),n(1410),n(259),n(236)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j){var E={search:"productsListContent",add:"addProductContent"},P={search:"searchButton",add:"addButton"},D={edit:"patchProduct",add:"createProduct"},N="insert",L="edit",M="edit",B="add",R="block",F="account",O="block_search",U="account_search",$="edit",H="block_add",V="account_add",z={account_add:"Add product in connected sites",block_add:"Add product in landing page",block_select:"Select product in landing page",account_edit:"Edit product in connected sites"},W={square:"Square location",stripe:"Stripe account"},q=t([c,u,h],{templateString:p,deferredInsert:null,products:[],editingProduct:null,dialogTitle:null,errors:null,searchString:null,paymentStore:null,platform:null,defaultCurrencySymbol:f.currencySymbol,currentProductAction:"add",currentSearchProductAction:N,currentManagementType:R,hasCreatedItems:!1,allowedFileTypes:["image"],platformLabel:"Square location",searchPlaceholder:"Search products by name, description, SKU, or price",_setSearchStringAttr:function(t){this._updateProductsList(t,this.products),this._set("searchString",t)},constructor:function(t){this.platform=t.platform.toLowerCase(),this.platformLabel=t.platform?W[t.platform.toLowerCase()]:this.platformLabel,"stripe"===this.platform&&(this.searchPlaceholder="Search products by name, description, or price"),this._setPaymentStore()},_setPaymentStore:function(){C.getPaymentStore().then(function(t){t.length>0&&t[0]&&(this.paymentStore=t[0])}.bind(this))},_updateCurrencySymbol:function(t){t&&t.currencySymbol?(this.currencySymbol.innerHTML=t.currencySymbol,t.currencySymbol.length>1&&this.productPrice.classList.add("c-currencyInput--wide")):C.getPaymentStore().then(function(t){console.log("stores",t),t.length>0&&t[0]&&t[0].currencySymbol&&(this.currencySymbol.innerHTML=t[0].currencySymbol)}.bind(this))},postCreate:function(){this.searchHandler=l.subscribe("search/productName",this._handleSearchEvent.bind(this)),this.platform=this.platform.toLowerCase(),window.app&&window.app.paymentStores&&window.app.paymentStores.length>0&&this._updateCurrencySymbol(window.app.paymentStores[0]),this.imageUploader=new x({node:this.productImageUploader,placeholder:!1,onImageSelected:this._handleImageSelected.bind(this),onImageUploading:this._handleImageUploading.bind(this),onImageRemoved:this._handleImageRemoved.bind(this)}),this.imageUploader.startup(),this.watch("products",this._handleProductsChange.bind(this)),o.toggle(this.productSkuField,"hide","stripe"===this.platform),o.toggle(this.productPriceField,"padding-right--lv3","stripe"!==this.platform),this.own(a(this.saveProductButton,"click",function(t){t.preventDefault(),this._handleSaveProduct(this.currentProductAction)}.bind(this)),a(this.resetProductButton,"click",function(t){t.preventDefault(),this._resetForm()}.bind(this)),a(this.backButton,"click",function(t){t.preventDefault(),this._handleBackAction()}.bind(this)),a(this.searchButton,"click",function(){this._togglePane("search")}.bind(this)),a(this.addButton,"click",function(){this.currentProductAction=B,this._togglePane("add")}.bind(this)),a(this.createProductForm,"submit",(function(t){t.preventDefault(),t.stopPropagation()})))},_handleSearchEvent:function(t){this.set("searchString",t)},_setupFileDrag:function(){var t=this.dropTarget,e=this._showDrag,n=-1;m.attach(".file-drop-target",{onDragOver:function(){e=!0},onDragLeave:function(){e=!1,clearTimeout(n),n=setTimeout((function(){e||o.remove(t,"over")}),200)}}),this._fileDragSignal=m.attach(".dijitDialogPaneContentArea",{onDragEnter:function(){o.add(this.dropTarget,"over"),this._showDrag=!0}.bind(this),onDragOver:function(){this._showDrag=!0}.bind(this),onDrop:function(t,e,n){o.remove(this.dropTarget,"over"),this._showDrag=!1,t&&t[0]&&(this._handleImageUploading(),this.imageUploader.upload(t[0].content)),n&&n.length&&w.globalPublish("show-toast",[{message:"We can't upload that file type.",type:"error"}])}.bind(this)},this.allowedFileTypes)},_populateFormFields:function(t){this.productTitle.value=t.title,t.product_image_url?(this.imageUploader.switchToUploadedView({url:t.product_image_url,name:t.title}),this.productImageUrl.value=t.product_image_url):this.imageUploader.switchToEmptyView(),this.productPrice.value=parseFloat(t.price_amount),this.productSku.value=t.sku,this.productDescription.value=t.description},_getCurrentProduct:function(){var t={},e=this._isFormValid();return this._processErrorMessages(),e?(t.store_id=this.storeId,t.title=this.productTitle.value,t.product_image_url=this.productImageUrl.value,t.price=this.productPrice.value,t.sku="stripe"!==this.platform?this.productSku.value:null,t.description=this.productDescription.value,t):(this._processErrorMessages(this.errors),e)},_resetForm:function(){this.editingProduct=null,this._processErrorMessages(),this.imageUploader.resetImage(),this.createProductForm.reset()},_isFormValid:function(){var t=!0;this.errors={},this.productTitle.value||(t=!1,this.errors.productTitle=!0);var e=this.productPrice.value?parseFloat(this.productPrice.value,10):null,n=j(this.get("products"),{sku:this.productSku.value});return"stripe"!==this.platform&&""!==this.productSku.value&&n.length>0&&(n.length>1||this.editingProduct&&n[0].id!==this.editingProduct.id?(t=!1,this.errors.productSku=!0):this.editingProduct||(t=!1,this.errors.productSku=!0)),(!e||e<this.paymentStore.min_charge_amount||e>this.paymentStore.max_charge_amount)&&(t=!1,this.errors.productPrice={},null!==e?(e<this.paymentStore.min_charge_amount&&(this.errors.productPrice.minPrice=!0,this.productPriceMinimumError.innerHTML="Minimum Price of "+this.paymentStore.currencySymbol+this.paymentStore.min_charge_amount),e>this.paymentStore.max_charge_amount&&(this.errors.productPrice.maxPrice=!0,this.productPriceMaximumError.innerHTML="Maximum Price of "+this.paymentStore.currencySymbol+this.paymentStore.max_charge_amount)):this.errors.productPrice.required=!0),t},_processErrorMessages:function(t){o.toggle(this.productTitle,"invalid",!1),o.toggle(this.productPrice,"invalid",!1),o.toggle(this.productSku,"invalid",!1),o.toggle(this.productPriceError,"hide",!0),o.toggle(this.productTitleError,"hide",!0),o.toggle(this.productPriceRequiredError,"hide",!0),o.toggle(this.productPriceMinimumError,"hide",!0),o.toggle(this.productPriceMaximumError,"hide",!0),o.toggle(this.productSkuDuplicateError,"hide",!0),t&&(t.productTitle&&(this.productTitle.focus(),o.toggle(this.productTitle,"invalid",!0),o.toggle(this.productTitleError,"hide",!1)),t.productPrice&&(t.productTitle||this.productPrice.focus(),o.toggle(this.productPrice,"invalid",!0),o.toggle(this.productPriceError,"hide",!1),this.errors.productPrice.required&&o.toggle(this.productPriceRequiredError,"hide",!1),this.errors.productPrice.minPrice&&o.toggle(this.productPriceMinimumError,"hide",!1),this.errors.productPrice.maxPrice&&o.toggle(this.productPriceMaximumError,"hide",!1)),t.productSku&&(t.productTitle||t.productPrice||this.productSku.focus(),o.toggle(this.productSku,"invalid",!0),o.toggle(this.productSkuDuplicateError,"hide",!1)))},_processServerErrorMessages:function(t){o.toggle(this.productTitle,"invalid",!1),o.toggle(this.productPrice,"invalid",!1),o.toggle(this.productPriceError,"hide",!0),o.toggle(this.productTitleError,"hide",!0),o.toggle(this.productPriceRequiredError,"hide",!0),o.toggle(this.productPriceMinimumError,"hide",!0),o.toggle(this.productPriceMaximumError,"hide",!0)},_handleProductsChange:function(t,n,i){if(i.length<1)return this._togglePane("add"),void e.set(this[P.search],"disabled",!0);e.remove(this[P.search],"disabled"),T(i,n,A).length>0&&(this.productsListWidget=new I({productAction:this.currentSearchProductAction,products:i,handleProductAction:this._onProductAction.bind(this,this.currentSearchProductAction)}),this.productsListWidget.placeAt(this.productsListNode,"only"))},_handleSaveProduct:function(t){var n=this._getCurrentProduct(this.currentProductAction),i=!0;if(n){o.toggle(this.resetProductButton,"disabled-container",!0),w.toggleButtonLoadingState(this.saveProductButton),e.set(this.saveProductButton,"disabled",!0);var a=-1;if(t===M&&(a=this.editingProduct.id,n.price_amount=n.price,(n=_.toDiff(this.editingProduct,n)).hasOwnProperty("price_amount")?(n.price=n.price_amount,delete n.price_amount):delete n.price,i=n.constructor===Object&&0!==Object.keys(n).length),!i)return w.toggleButtonLoadingState(this.saveProductButton),e.remove(this.saveProductButton,"disabled"),o.toggle(this.resetProductButton,"disabled-container",!1),this._togglePane("search"),void this._resetForm();C[D[t]](n,a).then(function(n){w.toggleButtonLoadingState(this.saveProductButton),e.remove(this.saveProductButton,"disabled"),o.toggle(this.resetProductButton,"disabled-container",!1),n.error&&w.globalPublish("show-toast",[{message:n.error,type:"error"}]),n.product&&this._handleSavedProduct(n.product,this.currentManagementType,t)}.bind(this),w.globalPublish.bind(this,"show-toast",[{message:"There is a connection issue",type:"error"}]))}},_handleSavedProduct:function(t,e,n){var i=e+"_"+this.currentProductAction;switch(this._handleBehaviorLogging(i,t.id),e){case R:this._resetForm(),this._productChosen(t);break;case F:this.hasCreatedItems=!0,w.globalPublish("show-toast",[{message:"Product "+n+"ed: "+t.title,type:"success"}]),C.getStoreProducts(this.storeId).then(function(t){this.set("products",t),this._togglePane("search"),this._resetForm()}.bind(this));break;default:throw new Error("no management type passed")}},_handleBackAction:function(){this._togglePane("search"),this._resetForm()},_handleBehaviorLogging:function(t,e){var n=JSON.stringify({store_id:this.storeId,product_id:e});y.googleAnalytics.trackEvent("product management",z[t],n)},_updateProductsList:function(t,e){var n=this._filterBySearchString(t,e);this.productsListWidget.set("products",n)},_handleImageSelected:function(t){this.productImageUrl.value=t.url,e.remove(this.saveProductButton,"disabled")},_handleImageUploading:function(){e.set(this.saveProductButton,"disabled",!0)},_handleImageRemoved:function(){this.productImageUrl.value=""},manageProducts:function(t){return this.dfd=new r,this.currentManagementType=F,this.currentSearchProductAction=t.productSearchAction,this.storeId=t.storeId,C.getStoreProducts(t.storeId).then(function(e){this._togglePane(t.defaultView),this.storeId=t.storeId,this.set("products",e),this._show()}.bind(this)),this._updateCurrencySymbol(),this.dfd.promise},selectProducts:function(t){return this.dfd=new r,this.currentManagementType=R,this.currentSearchProductAction=t.productSearchAction,C.getStoreProducts(t.storeId).then(function(e){this.storeId=t.storeId,this._togglePane(t.defaultView),this.set("products",e),this._show()}.bind(this)),this.dfd.promise},_productChosen:function(t){var e=this.currentManagementType+"_select";this._handleBehaviorLogging(e,t.id),this.dfd.resolve(t),this._hide()},_onProductAction:function(t,e){switch(t){case"edit":this._onEditProduct(e);break;case"select":default:this._productChosen(e)}},_onEditProduct:function(t){this.editingProduct=t,this.currentProductAction=M,this._populateFormFields(t),o.toggle(this.paneButtons,"hide",!0),o.toggle(this[E.search],"hide",!0),o.toggle(this[E.add],"hide",!1),this._updateButtons($)},_productCreated:function(t){this.dfd.resolve(t),this._hide()},_filterBySearchString:function(t,e){var n=new RegExp("^.*"+t+".*$","i");return t&&""!==t?e.filter((function(t){return n.test(t.title)||n.test(t.description)||n.test(t.sku)||n.test(t.price)})):e},_togglePane:function(t){o.toggle(this.paneButtons,"hide",!1);var e=Object.keys(P),n=Object.keys(E);e.forEach(function(t){o.toggle(this[P[t]],"v-buttonGroupBordered--active",!1)}.bind(this)),n.forEach(function(t){o.toggle(this[E[t]],"hide",!0)}.bind(this)),o.toggle(this[P[t]],"v-buttonGroupBordered--active",!0),o.toggle(this[E[t]],"hide",!1);var i=this.currentManagementType+"_"+t;this._updateButtons(i)},_updateButtons:function(t){switch(o.toggle(this.contentPane,"!margin-bottom--lv0",!1),n.set(this.contentPane,"max-height",""),n.set(this.contentPane,"bottom",""),o.toggle(this.actionPane,"hide",!1),o.toggle(this.saveProductButton,"hide",!0),o.toggle(this.resetProductButton,"hide",!0),o.toggle(this.backButton,"hide",!0),t){case O:case U:o.toggle(this.contentPane,"!margin-bottom--lv0",!0),n.set(this.contentPane,"max-height","none"),n.set(this.contentPane,"bottom","0px"),o.toggle(this.actionPane,"hide",!0);break;case $:o.toggle(this.saveProductButton,"hide",!1),o.toggle(this.backButton,"hide",!1);break;case H:case V:o.toggle(this.saveProductButton,"hide",!1),o.toggle(this.resetProductButton,"hide",!1)}},_show:function(){this.dialog=new d({title:"Select a product",onCancel:function(){this.hasCreatedItems?this.dfd.resolve():this.dfd.reject()}.bind(this),content:this.domNode,style:"width:640px;",class:"dijitDialog--fullScreen@phone"}),s.after(this.dialog,"hide",function(){this.destroy()}.bind(this)),this._setupFileDrag(),this.dialog.startup(),this.dialog.show(),window.setTimeout(function(){this.dialog.focus()}.bind(this),300)},_hide:function(){this.hasCreatedItems=!1,this._fileDragSignal&&this._fileDragSignal.detach(),this.dialog?this.dialog.hide():this.destroy()},destroy:function(){this.searchHandler.remove(),this.inherited(arguments)}}),G=null,Y=function(t){return G&&G._hide(),(G=new q({platform:t})).startup(),G};return{manageProducts:function(t){return t.defaultView=t.defaultView||"search",t.productSearchAction=L,Y(t.platform).manageProducts(t)},selectProduct:function(t){return t.defaultView="search",t.productSearchAction=N,Y(t.platform).selectProducts(t)}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(18),n(8),n(21),n(16)],void 0===(a=function(t,e,n,i,a){var o=t(null,{constructor:function(t){this.name=t.name,this.platform=t.platform,this.store_id=t.store_id,this.isSyncing=t.isSyncing,this.currencySymbol=t.currencySymbol,this.currency=t.currency,this.min_charge_amount=t.min_charge_amount,this.max_charge_amount=t.max_charge_amount}}),s=(t(null,{constructor:function(t){this.description=t.description,this.image_url=t.image_url,this.price=t.price,this.id=t.product_id,this.title=t.title}}),t(null,{constructor:function(t){this.title=t.title,this.description=t.description,this.price=t.price,this.price_amount=t.price_amount,this.id=Number(t.product_id),this.product_foreign_id=t.product_foreign_id,this.product_variant_foreign_id=t.product_variant_foreign_id,this.sku=t.sku,this.product_image_url=t.product_image_url},toJSON:function(){return{title:this.title,description:this.description,price:this.price,price_amount:this.price_amount,id:this.id,product_foreign_id:this.product_foreign_id,product_variant_foreign_id:this.product_variant_foreign_id,sku:this.sku,product_image_url:this.product_image_url}}}));return{getPaymentStore:function(){return e.get(n.toUrl("channels/get-payment-stores"),{handleAs:"json",query:null}).then(function(t){return this.createPaymentStores(t)}.bind(this))},createProduct:function(t){return e.post(n.toUrl("ecommerce/products/create"),{handleAs:"json",data:t}).then((function(t){return t.success?{product:new s(t.data.product)}:{error:t.error}}))},patchProduct:function(t,i){return e.post(n.toUrl("ecommerce/products/patch",{id:i}),{handleAs:"json",data:{patch:JSON.stringify(t)}}).then((function(t){return t.success?{product:new s(t.data.product).toJSON()}:{error:t.error}}))},startPaymentStoreSync:function(t){return e.post(n.toUrl("ecommerce/payment-store/sync"),{handleAs:"json",data:{store_id:t}})},createPaymentStores:function(t){return t.map((function(t){return new o(t)}))},getStoreProducts:function(t){var i=n.toUrl("/ecommerce/products/get-products",{store_id:this.storeId});return e.post(i,{handleAs:"json",data:{store_id:t}}).then((function(t){var e=t.data&&t.data.products;return t.success&&Array.isArray(e)&&e.length?e.map((function(t){return t.product_image_url=n.addProxy(t.product_image_url),new s(t).toJSON()})):[]}),(function(t){return[]}))},getOneStoreProduct:function(t,i){var a=n.toUrl("/ecommerce/products-search",{store_id:this.storeId,type:"singleProduct"});return e.post(a,{handleAs:"json",data:{store_id:t,product_id:i}}).then((function(t){if(Array.isArray(t)&&t.length)return t.map((function(t){return t.image_url=n.addProxy(t.image_url),new s(t)}))}))}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(10),n(7),n(2),n(6),n(1),n(45),n(9),n(18),n(19),n(14),n(15),n(8),n(30),n(29),n(149),n(99),n(17),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){var b=!1;return{hasAcceptedTos:!1,searchForTemplate:function(t,e,n,i,a){var o,s={term:e,cat:n,exclude_integrations:i};t?(s.id=t,o=u.toUrl("campaigns/wizard/html/templates-predesigned",s)):o=u.toUrl("templates/selection/templates-predesigned",s),d.byId(a).set("href",o)},confirmTemplateDelete:function(t){var e=d.byId("confirm-template-delete");e.setHref(u.toUrl("templates/confirm-delete",{id:t})),e.show()},deleteTemplate:function(){var e=t.byId("template-id").value;window.location.href=u.toUrl("templates/delete",{ids:e})},confirmDeletion:function(t,n){n||(n="template");var a=new p({title:"Are you sure?",onHide:function(){a.destroyRecursive()},onDownloadEnd:function(){!function(t){i(".cancel-button",t.domNode).on("click",(function(e){e.stopPropagation(),e.preventDefault(),t.hide()}))}(a),i("form",a.domNode).on("submit",(function(i){i.stopPropagation(),i.preventDefault();var s=o.toObject(this),l=0;for(var d in s)s.hasOwnProperty(d)&&0===d.indexOf("ids[")&&l++;r.post(e.get(this,"action"),{data:o.toObject(this)}).then((function(){a.hide(),t.render(),c.toast(l+" "+n+(1!=l?"s":"")+" successfully deleted")}),(function(){a.hide(),c.toast("There was a problem deleting your "+n+(1!=l?"s":"")+". Please try again.")}))}))}});a.setHref(u.toUrl("templates/confirm-delete",{"ids[]":t.getSelection()})),a.show()},confirmTemplateExport:function(t){var e=d.byId("export-dnd-warning");e._url=u.toUrl("templates/export-template",{id:t}),e.show()},confirmImportFromHtml:function(){d.byId("import-html").show()},confirmImportFromZip:function(){d.byId("import-zip").show()},publishToMandrill:function(t){dojo.xhrPost({url:u.toUrl("templates/publish-mandrill"),content:{id:t},handleAs:"json",load:function(t){t.success?dojo.publish("show-toast",[{message:t.message,type:"message"}]):dojo.publish("show-toast",[{message:"Drats, your template wasn't published to mandrill",type:"error"}])},error:function(t){dojo.publish("show-toast",[{message:"Drats, your template wasn't published to mandrill",type:"error"}])}})},codeYourOwn:function(){window.location.href=u.toUrl("templates/design/new")},previewLayout:function(t,e,n,i){this.previewer?(this.previewer.previewId=t,this.previewer.previewType=n,this.previewer.titleText=e):this.previewer=new m({previewId:t,previewType:n,titleText:e,inboxPreviewEnabled:!1});var a={template_id:t.toString()};i&&(a.location=i),window.ga("send","event","template_preview","button_click",JSON.stringify(a)),this.previewer.show()},changeTemplate:function(t,e){if(e){g.disableForm();d.byId("confirm-change-layout");d.byId("confirm-change-layout").url=t,d.byId("confirm-change-layout").show()}else this._changeTemplate(t)},changeLpTemplate:function(t,e){this.hasAcceptedTos?e?(g.disableForm(),d.byId("confirm-change-lp-layout").url=t,d.byId("confirm-change-lp-layout").show()):this._changeTemplate(t):d.byId("accept-lp-tos").show()},checkTosStatus:function(){r.get(u.toUrl("user-terms/has-accepted?terms=landing_page_templates"),{handleAs:"json"}).then(function(t){return this.hasAcceptedTos=t.accepted,!!t.accepted||d.byId("accept-lp-tos").show()}.bind(this))},confirmChangeTemplate:function(){this._changeTemplate(d.byId("confirm-change-layout").url)},confirmChangeLpTemplate:function(){this._changeTemplate(d.byId("confirm-change-lp-layout").url)},confirmLpTemplateTOS:function(){r.post(u.toUrl("user-terms/accept?terms=landing_page_templates"),{handleAs:"json"}).then(function(){this.hasAcceptedTos=!0}.bind(this)),d.byId("accept-lp-tos").hide()},_changeTemplate:function(t){window.ga("send","event","template_select","click","continue"),b||(b=!0,g.disableForm(),window.location.href=t)},handleSaveKeyPress:function(t){t.keyCode==h.ENTER&&(d.byNode(i(".save-template-button")[0]).onClick(),saveTemplate(!0))}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(9),n(6),n(2),n(8),n(477),n(12),n(11),n(20),n(67),n(1424),n(638)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([c,r,l,d],{templateString:u,target:null,listId:null,adsConstants:{},constructor:function(){this.adsConstants=h},postCreate:function(){this.target.watch("total",e.hitch(this,"checkAndDisableAds")),a(i(this.sendCampaign),"click",e.hitch(this,(function(){window.ga("send",{hitType:"event",eventCategory:"segments",eventAction:"cta",eventLabel:"button",dimension53:this.sendCampaignDropdownButton.innerText,dimension55:"send campaign menu",dimension56:"open menu"})})))},checkAndDisableAds:function(){var t=i(".js-ads-action-meta",this.adAction.domNode),e=i(".js-lookalike-action-meta",this.lookalikeAction.domNode);this.target.total<h.minAdCount?(this.adAction.set("disabled",!0),t.removeClass("hide")):(this.adAction.set("disabled",!1),t.addClass("hide")),this.target.total<h.minLookalikeCount?(this.lookalikeAction.set("disabled",!0),e.removeClass("hide")):(this.lookalikeAction.set("disabled",!1),e.addClass("hide"))},onSendAction:function(){var t=this.target.segment,e=t&&t.hasOwnProperty("id"),n={list_id:this.listId};t&&"advanced"===t.type?n.pro_segment_id=t.id:e?n.segment_id=t.id:n.segment=1,window.ga("send","event","segments","cta","button",{cd53:"An email campaign",cd54:o.toUrl("campaigns/create",n),cd55:"send campaign menu",cd56:"redirect to campaign creator"}),window.location=o.toUrl("campaigns/create",n)},onAdAction:function(){this._createAdFromSegment(this.target.segment,!1)},onLookalikeAction:function(){this._createAdFromSegment(this.target.segment,!0)},_createAdFromSegment:function(t,n){var i=this.listId;t.id&&t.type?this._adsRedirect(t,n):s.confirmSave(i).then(e.hitch(this,(function(t){this._adsRedirect(t,n)})))},_adsRedirect:function(t,e){var n={list_id:this.listId,lookalike:e,source_id:t.type.concat(":",t.id),type:"facebook"};window.ga("send","event","segments","cta","button",{cd53:"A Facebook / Instagram ad",cd54:o.toUrl("/ads/create",n),cd55:"Ads menu",cd56:"redirect to Ads creator"}),window.location=o.toUrl("/ads/create",n)},_onPostcardAction:function(){this._createPostcardFromSegment(this.target.segment)},_createPostcardFromSegment:function(t){var n=this.listId;t.id&&t.type?this._postcardsRedirect(t):s.confirmSave(n).then(e.hitch(this,(function(t){this._postcardsRedirect(t)})))},_postcardsRedirect:function(t){var e={list_id:this.listId,segment_id:t.id,segment_type:t.type};window.ga("send","event","segments","cta","button",{cd53:"A Postcard",cd54:o.toUrl("/postcards/create",e),cd55:"Postcards menu",cd56:"redirect to Postcards creator"}),window.location=o.toUrl("/postcards/create",e)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return{minAdCount:100,minAdCountMessage:"You can target your list with an ad once you have at least 100 contacts.",minLookalikeCount:500,minLookalikeCountMessage:"You can build an audience similar to your list once you have at least 500 contacts."}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(18),n(3),n(19),n(8),n(38),n(12),n(11),n(20),n(1437),n(191)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([l,d,c],{templateString:u,noteHeader:null,memberID:null,noteID:null,editSuccessCallback:null,maxChars:1e3,charCount:0,remainingChars:1e3,noteText:null,showCancel:null,cancelFunction:null,isArchived:!1,postCreate:function(){this.inherited(arguments),a.remove(this.noteContainer,"hide"),this.setupInput(),this.isArchived&&a.add(this.noteContainer,"hide")},setupInput:function(){this.noteText?(this.noteTextarea.value=this.noteText,this.noteHeader.innerText="Edit Note",this.saveNoteButton.innerText="Save Note",this.showCancel&&this.cancelFunction&&(a.remove(this.cancelNoteButton,"hide"),n(this.cancelNoteButton,"click",e.hitch(this,"cancelFunction")))):this.noteHeader.innerText="Write a Note",n(this.saveNoteButton,"click",e.hitch(this,"saveNote")),n(this.noteTextarea,"keyup",e.hitch(this,"updateCharCount")),this.updateCharCount()},updateCharCount:function(){this.charCount=this.noteTextarea.value.length,this.remainingChars=this.maxChars-this.charCount,this.noteText=this.noteTextarea.value,this.remainingCharsContainer.innerHTML=r.encode(this.remainingChars.toString()),this.charCount>0&&this.charCount<=this.maxChars?a.remove(this.saveNoteButton,"disabled"):a.add(this.saveNoteButton,"disabled")},saveNote:function(){this.memberID&&this.charCount>0&&(this.noteID?h.editNote(this.memberID,this.noteText,this.noteID,this.editSuccessCallback):h.addNote(this.memberID,this.noteText,e.hitch(this,"resetInput")))},resetInput:function(){this.noteTextarea.value="",this.updateCharCount(),o.publish("contact-profile/note-added")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(3),n(2),n(115),n(14),n(38),n(641),n(12),n(11),n(20),n(1452),n(191)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){return t([d,c,u],{templateString:h,memberID:null,listName:null,listItems:null,listEndpoint:null,editModalID:null,isArchived:!1,postCreate:function(){this.inherited(arguments),p.getInfoList(this.memberID,this.listEndpoint,e.hitch(this,"hydrate"));var t=this;this.editModalID&&!this.isArchived&&(i.remove(this.editLink,"hide"),a(this.editLink,"click",(function(){s.byId(t.editModalID).show(),o(t.editModalID)})))},createListItems:function(){this.listItems.length>0?(i.remove(this.listOuterContainer,"hide"),Object.keys(this.listItems).forEach((function(t){new l({data:{label:this.listItems[t].label,value:this.listItems[t].value,type:this.listItems[t].type,extras:this.listItems[t].extras}}).placeAt(this.listContainer,"last")}),this)):n.destroy(this.listOuterContainer)},getListItemType:function(t){return t.isLocation?"location":t.isSocial?"social":"normal"},hydrate:function(t){this.listItems=t,this.createListItems()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(38),n(4),n(6),n(2),n(52),n(16),n(21),n(12),n(11),n(20),n(14),n(838),n(1451)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){return t([d,c,u],{templateString:m,data:null,defaultValue:"&mdash;",postCreate:function(){this.inherited(arguments),this.checkForEmails(),this.createListItem()},checkForEmails:function(){s.isValidEmailAddress(this.data.value)&&(this.data.type="email")},createListItem:function(){var t;switch(this.data.type){case"link":t="<p class='contact-field' title='"+this.data.value+"'><a href='"+this.data.value+"' target='_blank'>"+this.data.value+"</a></p>";break;case"staticModal":t="<p class='contact-field' title='"+this.data.value+"'><a href='#' class='staticModalLink'>"+this.data.value+"</a></p>";break;case"email":t="<a target='_blank' rel='noopener noreferrer' href='/audience/inbox?id="+this.data.extras.list_id+"&contact_id="+this.data.extras.contact_id+"'>"+this.data.value+"</a>";break;case"geolocation":default:t=this.data.value?"<p class='contact-field' title='"+this.data.value+"'>"+this.data.value+"</p>":"<p class='contact-field dim-el'>"+this.defaultValue+"</p>"}i.place(t,this.valueContainer);var e=a(".staticModalLink")[0];if(e&&o(e,"click",(function(){h.byId("form-version-dialog").show()})),"geolocation"===this.data.type){var n=new p;n.startup(),n.placeAt(this.labelContainer)}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(10),n(9),n(24),n(1465),n(14),n(8)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([a],{templateString:o,campaignId:null,constructor:function(t){this.state={model:t.model},this.pageId=t.model.pageId},showSendNowDialog:function(){s.byId(this.publishModal.id).show()},sendConfirmed:function(){s.byId(this.publishModal.id).set("title","Publishing..."),s.byId(this.publishModal.id).set("closable",!1),i.set(this.confirmSendPre,"display","none"),i.set(this.confirmSendAction,"display","none"),i.set(this.confirmSendPost,"display","block"),document.location.href=r.toUrl("/landing-pages/publish",{id:this.pageId})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(10),n(9),n(24),n(1469),n(14),n(8)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([a],{templateString:o,campaignId:null,constructor:function(t){this.state={model:t.model},this.campaignId=t.model.campaignId},showSendNowDialog:function(){s.byId(this.sendNowModal.id).show()},sendConfirmed:function(){s.byId(this.sendNowModal.id).set("title","Sending..."),s.byId(this.sendNowModal.id).set("closable",!1),i.set(this.confirmSendPre,"display","none"),i.set(this.confirmSendAction,"display","none"),i.set(this.confirmSendPost,"display","block"),window.ga("send","event","campaign_checklist","click","send: send_now"),window.top.location.href=r.toUrl("/campaigns/wizard/send",{id:this.campaignId})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(10),n(9),n(3),n(6),n(24),n(1471),n(14),n(8),n(17),n(159),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([s],{templateString:r,state:{},constructor:function(t){this.state={subscribers:t.total_list_size,monthlyAmount:t.upgrade_cost_in_user_currency,lowerBound:t.upgrade_list_lower_bound,upperBound:t.upgrade_list_upper_bound,maxEmailSends:t.max_email_sends||0,addOnContactBlockPrice:t.add_on_contact_block_price_in_user_currency||0,addOnContactBlockSize:t.add_on_contact_block_size||0,additionalEmailSends:t.additional_email_sends||0}},primaryMessage:function(){return'Based on your <span class="font-weight--bold">'+this.state.subscribers.toLocaleString()+" contacts</span>, you'll be upgraded to the Standard plan."},secondaryMessage:function(){return"<h1 class='flex flex-row flex-justify--center'>"+this.state.monthlyAmount+"<span>/month</span></h1><p>"+this.state.upperBound.toLocaleString()+" audience size</p>"},showDialog:function(){var t=l.byId(this.upsellPostcardModal.id);t.onHide=function(){t.destroyRecursive()},t.show()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(19),n(24),n(309),n(563),n(159),n(143),n(106),n(1479),n(644)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u="mojo/widgets/checklist-editor/items/PostcardBillingSidebar/SIDEBAR_UPDATED",h=t([i,o],{templateString:d,parseContent:!1,tooltips:{recharge:{content:"When your balance falls too low to send a postcard, we'll automatically renew it so you don't miss out on any carts."},deliveryEstimate:{content:"<strong>Printing/processing:</strong> 1 business day<br/><strong>Shipping:</strong> 4-8 business days<br><br>Postcards are only printed and shipped on business days."}},state:{content:null,isItemActive:!1},constructor:function(t){this.refreshSidebarContent(t.model.postcardId)},refreshSidebarContent:function(t){s.getBillingSidebarHTML(t).then(function(t){this.setState({content:t}),n.publish(u,this)}.bind(this))},toggleCVVError:function(t){var n=this.domNode.querySelector("[data-mc-el='ccSecurityError']"),i=this.domNode.querySelector("[data-mc-el='ccSecurity']");n&&i&&(e.toggle(n,"hide",!t),e.toggle(i,"invalid",t),t&&i.focus())},_bindTooltipEventListeners:function(){this.domNode.querySelectorAll("[data-tooltip]").forEach((function(t){var e=t.dataset.tooltip;this.tooltips[e]&&(this.tooltips[e].widget=new r({content:"<ul class='help-tip-lines selfclear'>"+this.tooltips[e].content+"</ul>",baseClass:"dijitTooltipDialogHelp",class:"help-tip-dialog dijitTooltipDialog",onBlur:function(){this.tooltips[e].isVisible=!1,l.hide(this.tooltips[e].widget)}.bind(this)}),t.addEventListener("click",function(n){this.tooltips[e].isVisible=!0,l.open({popup:this.tooltips[e].widget,around:t}),this.tooltips[e].widget.focus()}.bind(this)))}),this)},_bindLinkEventListeners:function(){var t=this.domNode.querySelector("[data-mc-el='editPaymentAnchor'], [data-mc-el='addPaymentAnchor']"),e=this.domNode.querySelector("[data-mc-el='toggleUpsell']");e&&e.addEventListener("click",(function(t){var e=window._mc.account_upgrade_details;this.upsellPostcard=new c(e),this.upsellPostcard.showDialog()})),t&&(this.editContactBillingModal&&this.editContactBillingModal.destroy(),this.editContactBillingModal=new a({step:"payment",workflowMode:!0,onClose:this.refreshSidebarContent.bind(this,this.model.postcardId)},t))},_bindAdyenCvvWidget:function(){if(this.domNode.querySelector("[data-mc-el='ccSecurityAdyen']")){var t="true"===this.domNode.querySelector('[data-mc-el="ccProd"]').value,e=this.domNode.querySelector('[data-mc-el="ccOriginKey"]').value;this.initializeCvcForm(t,e,this.domNode.querySelector("[data-mc-el='ccSecurityAdyen']"),{onValid:function(t){this.domNode.querySelector('[data-mc-el="ccSecurity"]').value=t?this.domNode.querySelector('[name="encryptedSecurityCode"]').value:""}.bind(this)})}},_disableSidebar:function(){var t=this.domNode.querySelector("[data-mc-el='ccSecurity']");t&&t.setAttribute("disabled","disabled");var e=this.domNode.querySelector("[data-mc-el='editPaymentAnchor']");e&&e.parentNode.removeChild(e);var n=this.domNode.querySelector(".disclosure-closed");n&&n.parentNode.removeChild(n),this.domNode.children[0].classList.add("c-disabledSlat")},getPaymentInfo:function(){var t=this.domNode.querySelector("[data-mc-el='ccSecurity']"),e=this.domNode.querySelector("[data-mc-el='oneTimeFeeLabel']"),n=e?Number(e.dataset.usd):0,i=e?Number(e.dataset.userCurrency):0,a=e?e.innerText:"",o=this.domNode.querySelector("[data-pricing-version]").getAttribute("data-pricing-version");return{hasPaymentMethod:!!this.domNode.querySelector("[data-has-payment-method='yes']"),isCVVRequired:!!this.domNode.querySelector("[data-mc-el='ccSecurity']"),pricingVersion:o,CVV:t?t.value:null,isPaymentRequired:n>0,amountDue:a,amountDueInUserCurrency:i}},render:function(){this.inherited(arguments),this.state.content&&(this.state.isItemActive?this._disableSidebar():(this._bindLinkEventListeners(),this._bindTooltipEventListeners(),this._bindAdyenCvvWidget()))}});return h.SIDEBAR_UPDATED_TOPIC=u,h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(2),n(1),n(38),n(29),n(21),n(15),n(56),n(104),n(17),n(16),n(26),n(205),n(649),n(857)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){var f={draft:{label:"Draft",badge:"",description:"Edited <strong>{lastUpdatedDate}</strong> by {lastUpdatedBy}"},sent:{label:"Sent",badge:"success",description:"Sent <strong>{sendDate}</strong> to {sends} recipients"},processing:{label:"Processing",badge:"info",description:""},compliance:{label:"Rejected",badge:"error",description:""},active:{label:"Sending",badge:"info",description:"Next order is scheduled for <strong>{nextOrderDate}</strong>"},paused:{label:"Paused",badge:"warning",description:"Edited <strong>{lastUpdatedDate}</strong> by {lastUpdatedBy}"},scheduled:{label:"Scheduled",badge:"warning",description:"Scheduled for <strong>{scheduledSendTime}</strong>"},canceled:{label:"Canceled",badge:"error",description:"Canceled <strong>{lastUpdatedDate}</strong> by {lastUpdatedBy}"}},v=t([p],{channelIcon:"c-channelIcon--postcard",statusContent:f,statsOrder:["recipients"],statsContent:{recipients:{label:"Recipients"}},typeContent:{postcard:{label:"Postcard"},recurring:{label:"Recurring Postcard"},abandoned_cart:{label:"Abandoned Cart Postcard"}},actions:{edit:{label:"Edit"},report:{label:"View Report",onMouseUp:function(t,e,n){h.googleAnalytics.trackEvent("reports",t,e,n)}},rename:{label:"Rename",onClick:function(){d.showRenameModal(this.model.uniqueId,a.encode(this.model.title))}},view:{label:"View Postcard"},pause:{label:"Pause Postcard",onClick:function(){var t=new o({title:"Would you like to pause your postcard?",content:m,onHide:function(){t.destroyRecursive()}});(t.domNode.querySelector("[data-dojo-attach-point='pauseButton']").addEventListener("click",function(){window.location.href="/postcards/pause?id="+this.model.postcardId}.bind(this)),t.domNode.querySelector("[data-dojo-attach-point='cancelButton']").addEventListener("click",(function(){t.hide()})),"scheduled"===this.model.status)&&(t.domNode.querySelector("#modalContent").innerText+="Note that pausing to edit a postcard may change your scheduled date.");t.show()}},replicate:{label:"Replicate",onClick:function(){var t=document.createElement("form");t.action="/postcards/replicate",t.method="POST";var e=document.createElement("input");e.type="hidden",e.name="id",e.value=this.model.postcardId,t.appendChild(e);var n=document.createElement("input");n.type="hidden",n.name="__csrf_token",n.value=c.getCsrfToken(),t.appendChild(n);var i=document.createElement("button");i.type="submit",t.appendChild(i),document.body.appendChild(t),i.click()}},cancel:{label:"Cancel",onClick:function(){var t=this.model.postcardId,e=this.model.title,n=new o({title:"Cancel this campaign?",content:g,onHide:function(){n.destroyRecursive()}});n.domNode.querySelector("form").setAttribute("action","/postcards/cancel?id="+t),n.domNode.querySelector("[data-dojo-attach-point='campaignNameSpan']").innerHTML=e,n.domNode.querySelector("[data-dojo-attach-point='csrf']").setAttribute("value",c.__csrfToken),n.domNode.querySelector("[data-dojo-attach-point='cancelButton']").addEventListener("click",(function(){n.hide()})),n.show()}}},buildAdditionalMetaData:function(){if(("active"!==this.model.status||"abandoned_cart"!==this.model.postcardAutomationStrategy)&&this.statusContent[this.model.status]){var t=this.statusContent[this.model.status].description;this.node_additionalMetaData.innerHTML=i.replace(t||"",i.hitch(this,(function(t,e){switch(e){case"lastUpdatedDate":case"sendDate":return this.model[e]?this.model[e]&&this.model[e]instanceof Object&&this.model[e].hasOwnProperty("jsDate")?l.formatDateTime(this.model[e].jsDate,l.DATE_STRING_FORMAT_NAMES.DAYNAME_MONTH_DAY_YEAR_TIME):l.getDateString(this.model[e]):"";case"nextOrderDate":return this.model.nextOrderDate?this.model[e]&&this.model[e]instanceof Object&&this.model[e].hasOwnProperty("jsDate")?l.formatDateTime(this.model[e].jsDate,l.DATE_STRING_FORMAT_NAMES.MONTH_DAY_YEAR):l.getDateOnlyString(this.model[e]):"";case"scheduledSendTime":return this.model.scheduledSendTime?this.model[e]&&this.model[e]instanceof Object&&this.model[e].hasOwnProperty("jsDate")?l.formatDateTime(this.model[e].jsDate,l.DATE_STRING_FORMAT_NAMES.MONTH_DAY_YEAR):l.getDateOnlyString(this.model[e]):"";default:return void 0!==this.model[e]&&null!==this.model[e]?this.model[e]:""}})))}},buildListName:function(){var t=this.model.storeName||this.model.listName;this.model.wasSourceDeleted&&(t="Deleted list or segment"),"upload"===this.model.audienceStrategy&&(t="Imported file"),this.node_listName.appendChild(r.compileTemplate(t?this.template_listName:"",{listName:t,segmentName:this.model.hasSegment&&this.model.segmentDisplay?this.model.segmentDisplay:""}))},_buildStatusBadge:function(){var t=this.statusContent[this.model.statusReason]||this.statusContent[this.model.status];t&&(this.node_badge.innerHTML=t.label,e.add(this.node_badge,t.badge))},_buildTypeName:function(){if(this.model.postcardAutomationStrategy&&this.typeContent[this.model.postcardAutomationStrategy]){var t=this.typeContent[this.model.postcardAutomationStrategy].label;this.node_typeName.innerHTML=this.template_typeIcon.innerHTML+t}else this.node_typeName.innerHTML=this.typeContent[this.model.type].label}});return v.STATUS_CONTENT=f,v}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(35),n(6),n(14),n(180)],void 0===(a=function(t,e,n,i,a,o){var s=null;return t([o],{baseClass:"dijitCheckBox selectCheckBox",postCreate:function(){this.inherited(arguments),n.after(this,"onClick",e.hitch(this,(function(t){if(t.shiftKey&&null!=s){var e=i(".selectCheckBox"),n=this.domNode,o=null,r=null;if(e.some((function(t,e){return t!=n&&s!=t||(null==o?o=e:r=e),null!=o&&null!=r})))for(var l=o;l<=r;l++){var d=a.byNode(e[l]);d.disabled||d.set("value",this.get("value"))}}s=this.domNode})),!0)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(18),n(8),n(21),n(16),n(56)],void 0===(a=function(t,e,n,i,a,o,s){var r=t(null,{constructor:function(t){var e;this.createdAt=t.created_at?s.dateTransform(t.created_at):null,this.updatedAt=t.updated_at?s.dateTransform(t.updated_at):null,e=this.updatedAt||this.createdAt,this.lastUpdatedDate=e||null,this.postedAt=t.posted_at?s.dateTransform(t.posted_at):null,this.sendDate=t.send_time?s.dateTransform(t.send_time):null,this.nextOrderDate=t.next_order_date?s.dateTransform(t.next_order_date):null,this.publishedAt=t.published_at?s.dateTransform(t.published_at):null,this.scheduledSendTime=t.scheduled_send_time?s.dateTransform(t.scheduled_send_time):null,this.pausedAt=t.paused_at?s.dateTransform(t.paused_at):null,this.startDate=t.start_time?s.dateTransform(t.start_time):null,this.endDate=t.end_time?s.dateTransform(t.end_time):null,this.canceledDate=t.canceled_at?s.dateTransform(t.canceled_at):null,this.lastDeliveryDate=t.last_delivery_time?s.dateTransform(t.last_delivery_time):null,this.rssLastSendDate=t.rss_last_send_time?s.dateTransform(t.rss_last_send_time):null,this.lastPausedDate=t.last_paused_at?s.dateTransform(t.last_paused_at):this.lastUpdatedDate,this.archivedDate=t.archived_at?s.dateTransform(t.archived_at):null,this.uniqueId=t.unique_id,this.campaignId=t.campaign_id,this.pageId=t.page_id,this.automationId=t.automation_id,this.autoresponderId=t.autoresponder_id,this.postcardId=t.postcard_id,this.socialId=t.social_post_id,this.surveyId=t.survey_id,this.adId=t.ad_id,this.title=t.title,this.titleLink=t.title_link,this.status=t.status,this.statusReason=t.status_reason,this.bucket=t.bucket,this.type=t.type,this.typeLabel=t.type_label,this.listName=t.list?t.list.name:null,this.lastUpdatedBy=t.last_updated_by,this.wasCanceledByNetwork=t.was_canceled_by_facebook,this.rssScheduleString=t.rss_schedule_string,this.rssScheduleHour=t.rss_schedule_hour,this.sendPercentage=t.delivery_status_percentage,this.showSendPercentage=t.show_delivery_status_percentage,this.isTimewarp=t.is_timewarp,this.editorType=t.email_editor_type,this.audience=t.email_source_name,this.hasSegment=t.has_segment,this.segmentDisplay=t.segment_display,this.stats=t.stats,this.availableActions=t.available_actions,this.availableReportActions=t.available_report_actions,this.autoresponderTriggerString=t.autoresponder_trigger_string,this.totalEmailsCount=t.total_emails_count,this.pausedEmailsCount=t.paused_emails_count,this.workflowType=t.workflow_type,this.storeName=t.store_name,this.needsAttention=t.needs_attention,this.pageUrl=t.page_url,this.hasStore=t.has_store,this.hasSignUpForm=t.has_signup_form,this.shouldShowComplianceMessage=t.should_show_compliance_message,this.shouldShowTermsMessage=t.should_show_terms_message,this.shouldShowDisconnectMessage=t.should_show_disconnect_message,this.shouldShowSendErrorMessage=t.should_show_send_error_message,this.editUrl=t.edit_url,this.hasUpdatesWhilePublished=t.has_updates_while_published,this.postcardAutomationStrategy=t.automation_trigger&&t.automation_trigger.strategy,this.wasSourceDeleted=t.was_source_deleted,this.hasNdStore=!!t.has_nd_store,this.hasFailedPost=t.has_failed_post,this.rawModel=t,this.signupTags=t.signup_tags,this.audienceStrategy=t.audience_strategy,this.campaignListLocation=t.campaign_list_location||null},isAd:function(){return["facebook","google"].indexOf(this.type)>-1},isAutomation:function(){return["autoresponder","automation"].indexOf(this.type)>-1},isPostcard:function(){return"postcard"===this.type},isSocial:function(){return"social"===this.type},isEffort:function(){return"effort"===this.type},isPage:function(){return["page"].indexOf(this.type)>-1}});return{STATUS_REASON_COMPLIANCE:"compliance",list:function(t){var a=e.clone(t);t["filters[folder]"]||"unfiled"!==t["filters[type]"]||(a["filters[type]"]=void 0,a["filters[folder]"]=0),"automation"===t["filters[type]"]&&(a["filters[type]"]="automation_all"),t["filters[folder]"]||t["filters[bucket]"]||(a["filters[bucket]"]="recent");var o="reports"===t.campaign_list_location?"/reports/get-campaign-data":"/channels";return n.get(i.toUrl(o),{handleAs:"json",query:a}).then(e.hitch(this,(function(t){return{items:t.items.map((function(t){return e.mixin(t,{bucket:a["filters[bucket]"]||"",campaign_list_location:a.campaign_list_location})})).map(this._createFromProperties.bind(this)),count:t.count}})))},_createFromProperties:function(t){return new r(t)}}}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div>\n    <div class="dijitDialogPaneContentArea">\n        <p class="readable-max-width" id="modalContent">\n            Your postcard must be paused for you to edit it. After editing, you\'ll need to resume your postcard to avoid missing your next send date.\n        </p>\n\n        <div class="dijitDialogPaneActionBar">\n            <a class="button p0" data-dojo-attach-point="pauseButton">Pause and Edit</a>\n            <a href="#" data-dojo-attach-point="cancelButton" class="small-meta fwb">Cancel</a>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){var i,a;i=[n(0),n(6),n(3),n(2),n(4),n(1),n(7),n(52),n(22),n(36),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return{validateForm:function(t,n){var i=!0;e("input[type=text], input[type=url]",t).forEach(o.hitch(this,(function(t){switch(s.get(t,"data-mcValidate")){case"required":t.value||(n||this.invalidateField(t,"This field is required, yo."),i=!1);break;default:return}})));var a=[];return e("input[type=radio]",t).forEach(o.hitch(this,(function(t){switch(s.get(t,"data-mcValidate")){case"required":var o=s.get(t,"name");if(a.indexOf(o)<0)if(a.push(o),!e("input[name="+o+"]::checked").length){var r=e("input[name="+o+"]");n||this.invalidateField(r[r.length-1],"This field is required, yo."),i=!1}break;default:return}}))),e("select",t).forEach(o.hitch(this,(function(t){switch(s.get(t,"data-mcValidate")){case"required":t.value||(n||this.invalidateField(t,"This field is required, yo."),i=!1);break;default:return}}))),i},invalidateField:function(t,r){n.add(t,"invalid");var l=s.get(t,"type"),d=e(t).next(".invalid-error")[0];"radio"===l&&(d=e(t).parents(".field-wrapper").next(".invalid-error")[0]),d?d.textContent=r:(d=a.create("div",{class:"invalid-error",textContent:r}),"radio"===l?a.place(d,e(t).parents(".field-wrapper")[0],"after"):a.place(d,t,"after"));var c="keydown";switch(t.tagName){case"INPUT":if("radio"===l){c="change";break}break;case"SELECT":c="change";break;default:c="keydown"}if("radio"===l)var u=s.get(t,"name"),h=e("input[name="+u+"]").on("change",o.hitch(this,(function(t){var n=e("input[name="+u+"]");this.resetInvalidField(n[n.length-1]),h.remove()})));else h=i(t,c,o.hitch(this,(function(e){this.resetInvalidField(t),h.remove()})))},resetInvalidField:function(t){var i=s.get(t,"type");if(n.remove(t,"invalid"),"radio"===i)var o=e(t).parents(".field-wrapper").next(".invalid-error")[0];else o=e(t).next(".invalid-error")[0];o&&a.destroy(o)},playDenyAnimation:function(t){var e=new l;return d(t,{translateX:-11},{duration:50,complete:function(){d(t,{translateX:11},{duration:50,complete:function(){d(t,{translateX:-11},{duration:50,complete:function(){d(t,{translateX:11},{duration:50,complete:function(){d(t,{translateX:-11},{duration:50,complete:function(){d(t,{translateX:11},{duration:50,complete:function(){d(t,{translateX:0},{duration:50}),e.resolve()}})}})}})}})}})}}),e}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(18),n(8),n(192),n(17),n(24),n(153),n(196),n(1494),n(21),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([r],{templateString:c,urlExistsPath:"campaigns/campaign-archive-url-exists",constructor:function(t){t.urlExistsPath&&(this.urlExistsPath=t.urlExistsPath),this.state={errors:{},list:t.model.list,campaignId:t.model.campaignId,rootDomain:t.model.campaignUrl.rootDomain,campaignToken:t.model.campaignUrl.campaignToken,brandToken:t.model.campaignUrl.brandToken,isSaving:!1,user:{hasVerifiedCustomDomain:s.hasVerifiedCustomDomain,isActivelyPaying:s.isActivelyPaying,hasPartnershipPlan:s.hasPartnershipPlan},brands:t.model.campaignUrl.brands},t.model.content?(this.state.subject=t.model.content.subject,this.state.isPage=!1):this.state.isPage=!0,this.campaignArchiveUrl=new o({urlExistsPath:this.urlExistsPath})},getData:function(){return{campaign_url:{brand_token:this.state.brandToken,campaign_token:this.campaignArchiveUrl.getCampaignTokenFromString(this.state.campaignToken)}}},setCampaignToken:function(t){this.setState({campaignToken:t})},setValue:function(t){if(t.target){var e=this.campaignArchiveUrl.getCampaignTokenFromString(t.target.value);""===e?this.disableSaveButton():this.enableSaveButton(),this.state.campaignToken=e}else this.setState({brandToken:t})},disableSaveButton:function(){n.add(this.campaignUrlSaveButton,"disabled")},enableSaveButton:function(){n.remove(this.campaignUrlSaveButton,"disabled")},save:function(t){this.getData();this.campaignUrlExists().then(this._successHandler.bind(this),this._errorHandler.bind(this)),window.ga("send","event","campaign_checklist","click","campaign_link:save")},_errorHandler:function(t){this.setState({errors:{campaignToken:t.message}})},_successHandler:function(){this.onSave(this.getData()),this.closeDialog()},campaignUrlExists:function(){var t=this.state.campaignToken?this.state.campaignToken.replace(/^[_-]|[_-]$/g,""):null;return i(a.toUrl(this.urlExistsPath),{query:{id:this.state.campaignId,brand_token:this.state.brandToken,campaign_token:t},handleAs:"json"}).then((function(t){if(t.error)throw new d(t.error);return t}),l.throwError)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(24),n(1496)],void 0===(a=function(t,e,n,i){return t([n],{state:{charCountRemaining:null},templateString:i,setCount:function(t){this.setState({charCountRemaining:t})},render:function(){this.inherited(arguments),e.add(this.domNode,"display--inline")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(10),n(3),n(14),n(19),n(38),n(26),n(24),n(149),n(413),n(595),n(478),n(1498),n(17),n(16),n(21),n(124),n(448),n(1500)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){var _=t([d,b],{templateString:w,constructor:function(t){this.state={PresendCheck:y,promotion:t.model.promotion.promotion||"",promotionIsEnabled:t.model.promotion.promotionIsEnabled||"",promotionIsComplete:t.model.promotion.promotionIsComplete||"",hasFeatureRemoveMailchimpBranding:this.userHasFeature("remove_mailchimp_branding"),hasFeatureSendCreativeAssistantEmail:this.userHasFeature("creative_assistant_for_email"),flagCAEmailPaywall:v.flagIsOn(f.CONTENT_ENGINE_CA_EMAIL_PAYWALL),hasSentTestEmail:t.model.testsSent>=1}},render:function(){this.inherited(arguments)},getData:function(){return{content:{}}},_trackCreativeAssistatntUpgradeAction:function(t){l.googleAnalytics.trackEvent("creative assistant for email","cta","inline",{dimension53:"upgrade",dimension54:window.location.pathname,dimension56:"upgrade moment",dimension96:"creative assistant for email",dimension97:t,dimension98:"access creative assistant emails"}),l.googleAnalytics.trackEvent("checkout ca email","start","checklist inline",{dimension54:window.location.pathname,dimension97:t})},postCreate:function(){this.creativeAssistantUpgradeButtonContainer&&(this.creativeAssistantUpgradeButton=new h({buttonText:"Upgrade",disableRefreshForEditorUpgrade:!1,fixedGATrackingCallback:this._trackCreativeAssistatntUpgradeAction,redirect:"/campaigns/edit?id="+this.model.campaignId,featureName:"creative_assistant_for_email"}),this.creativeAssistantUpgradeButton.placeAt(this.creativeAssistantUpgradeButtonContainer),this.creativeAssistantUpgradeButton.startup())},previewContent:function(){this.previewer||(this.previewer=new c({previewId:this.model.campaignId,previewType:"campaign",titleText:r.encode(this.model.title),showMergeInfo:!0})),this.previewer.show(),this.model.isSingleWelcome?window.ga("send","event","one_click_builder","click","preview"):window.ga("send","event","campaign_checklist","click","preview")},editPlainText:function(){u.show(this.model.campaignId,e.hitch(this,(function(){this.onSave(),this.model.isSingleWelcome?window.ga("send","event","one_click_builder","click","plain_text:save"):window.ga("send","event","campaign_checklist","click","plain_text:save")}))),this.model.isSingleWelcome?window.ga("send","event","one_click_builder","click","plain_text:edit"):window.ga("send","event","campaign_checklist","click","plain_text:edit")},showShareSettings:function(){this.shareSettings&&this.shareSettings.destroy(),this.shareSettings=new p({campaignId:this.model.campaignId,titleText:r.encode(this.model.title),onSave:e.hitch(this,(function(t){this.onSave(),this.model.isSingleWelcome?window.ga("send","event","one_click_builder","click","enable_social_cards:save_and_close"):window.ga("send","event","campaign_checklist","click","enable_social_cards:save_and_close")}))}),this.shareSettings.show(),this.model.isSingleWelcome?window.ga("send","event","one_click_bulder","click","enable_social_cards"):window.ga("send","event","campaign_checklist","click","enable_social_cards")},openModal:function(){this.sendTestModal&&this.sendTestModal.destroy(),g.getUserLogins().then(this._openModal.bind(this)),this.model.isSingleWelcome?window.ga("send","event","one_click_builder","click","send_a_test_email"):window.ga("send","event","campaign_builder","click","send_a_test_email")},_openModal:function(t){this.sendTestModal=new m({model:this.model,userLogins:t}),this.sendTestModal.show()},showPaywall:function(){l.googleAnalytics.trackEvent("email editor","cta","inline",{dimension53:"upgrade your account",dimension54:window.location.pathname,dimension56:"upgrade moment",dimension96:"email editor",dimension97:g.planDisplayName.toLowerCase(),dimension98:"remove mc branding"}),window.top.location="/account/paywall?redirect=/campaigns/edit?id="+this.model.campaignId+"&feature_name=remove_mailchimp_branding"}});return _.isComplete=function(t){return t.renderedHtml},_.isValid=function(t){return t.isContentReady},_}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(3),n(4),n(5),n(1501),n(140),n(24),n(17),n(15),n(16),n(1502),n(1503),n(1504)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){var g=t([l],{templateString:s,userRole:d.role,FROM_NAME_MAX_LENGTH:100,VERIFY_EMAIL_ERROR:1,DMARC_POLICY_ERROR:2,constructor:function(t){var e=t.model,n=e.list?e.list.defaults:{},i=e.from.fromEmail||n.fromEmail||"";this.isVerifiedEmail=""!==n.fromEmail&&i===n.fromEmail?n.fromEmailIsVerified:e.from.isVerifiedEmail,this.verifiedDomain=[""],this.emailNotVerified=!1,this.DMARCPolicyNoDKIM=!1,this.state={model:e,fromName:e.from.fromName||n.fromName||"",fromEmail:i,errors:t.errors||{},campaignId:e.campaignId,emailDomain:e.from.fromEmail?e.from.fromEmail.split("@")[1]:""},this.state.isValid=!!this.state.fromEmail&&!!this.state.fromName},postCreate:function(){p.list().then(function(t){this.verifiedDomain=t.map((function(t){return t.domain}))}.bind(this))},getData:function(){return{from:{fromName:this.state.fromName,fromEmail:this.state.fromEmail}}},onSaveError:function(t){t.errors.from_email.code===this.VERIFY_EMAIL_ERROR&&(this.emailNotVerified=!0),t.errors.from_email.code===this.DMARC_POLICY_ERROR&&(this.DMARCPolicyNoDKIM=!0),this.setState({errors:t.errors})},setFieldError:function(t,n){var i="Please enter a value",a=e.clone(this.state.errors);a[t]={message:i};var o={errors:a};o[n]="",o.isValid=0===Object.keys(a).length,this.setState(o)},onBeforeSave:function(){return this.resetErrorFlags(),this.state.fromName?!!this.state.fromEmail||(this.setFieldError("from_email","fromEmail"),!1):(this.setFieldError("from_name","fromName"),!1)},resetErrorFlags:function(){this.emailNotVerified=!1,this.DMARCPolicyNoDKIM=!1},validate:function(t,e){var n="";if("from_name"===t&&""===e&&(n="Please enter a value"),"from_email"===t){var i=h(e);""===e&&(n="Please enter a value"),i&&(n=i.message)}return n||null},isVerifiedDomain:function(){var t=this.state.fromEmail.split("@")[1];return!!(this.validEmail()&&this.verifiedDomain.indexOf(t)>=0)},validEmail:function(){var t=this.state.fromEmail,e=h(t);return""!==t&&!e},setValue:function(t){var n=this.validate(t.target.id,t.target.value),i=e.clone(this.state.errors);n?i[t.target.id]=n?{message:n}:null:delete i[t.target.id];var a={errors:i};a[t.target.name]=t.target.value,a.isValid=0===Object.keys(i).length,this.preserveFocus(t),this.setState(a)},isDMARC:function(){var t=this.state.fromEmail,e=t.split("@")[0];return!(!o.some(["@aol","@yahoo","@ymail","@rocketmail","@verizon.net","@mail.ru","@bk.ru","@list.ru","@inbox.ru","@mac.com","@btinternet.com","@btopenworld.com","@talk21.com","@icloud.com","@me.com","@ntlworld.com","@blueyonder.co.uk","@ziggo.nl","@home.nl","@virginmedia.com","@upcmail.nl","@chello.nl","@casema.nl","@virgin.net","@quicknet.nl","@multiweb.nl","@hahah.nl","@zeggis.nl","@telekabel.nl","@zinders.nl","@zeggis.com","@razcall.com","@cable.a2000.nl","@razcall.nl","@direct.a2000.nl","@vodafone.nl","@ziggo.com","@vodafoneziggo.nl"],(function(e){return t.indexOf(e)>=0}))||0===e.length)&&(this.state.DMARCEmail=t.split("@").join(".")+"@send.mailchimpapp.com",!0)},showVerifyModal:function(){this.VerifyDomain||(this.VerifyDomain=new m({model:this.state})),this.VerifyDomain.openVerifyModal()},render:function(){this.inherited(arguments),this.isActive&&(this.itemButtons&&this.itemButtons.destroy(),this.itemButtons=new r({label:"From",getData:this.getData.bind(this),onBeforeSave:this.onBeforeSave.bind(this),onSave:this.onSave,cancel:this.cancel,activate:this.activate,deactivate:this.deactivate,isActive:this.isActive,isValid:this.state.isValid,onSaveError:this.onSaveError.bind(this)}),this.itemButtons.placeAt(this.fromItemButtonsContainer))}});return g.isComplete=function(t){return null!==t.from.fromName&&null!==t.from.fromEmail},g.isValid=function(t){return null!==t.from.fromName&&c.getSymbolLength(t.from.fromName.trim())>0&&null!==t.from.fromEmail&&t.from.isVerifiedEmail},g}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(79),n(24),n(8),n(21),n(16),n(415),n(92),n(1511)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t([i],{templateString:d,constructor:function(t){var e="website"===t.model.type;if(e&&(t.model=t.model.childPage),this.state={listId:t.model.list.id,captchaEnabled:t.model.list.captchaEnabled,captchaUrl:a.toUrl("/lists/settings/defaults",{id:t.model.list.id}),isActive:!1,isSaving:!1,isValid:t.isValid,isWebsite:e},t.model.tracking_settings){var n=t.model.tracking_settings,i=n.items,o=r.TYPES;this.state.tracking={mailchimpTrackingEnabled:this.checkEnabledByType(i,o.mailchimp),googleRestrictedDataProcessing:this.checkEnabledByType(i,o.ccpa),googleAnalyticsTrackingEnabled:this.checkEnabledByType(i,o.googleAnalytics),facebookPixelTrackingEnabled:this.checkEnabledByType(i,o.facebookPixel),googleAnalyticsTrackingId:this.getPropertyBySettingTypeAndDataName(i,o.googleAnalytics,r.DATA_NAMES.googleAnalyticsTrackingId),facebookPixelId:this.getPropertyBySettingTypeAndDataName(i,o.facebookPixel,r.DATA_NAMES.facebookPixel),hasFacebookAdsAccountPixel:this.getPropertyBySettingTypeAndDataName(i,o.facebookPixel,r.DATA_NAMES.hasAdsAccountPixel),anySettingTypeEnabled:this.checkAnySettingTypeEnabled(i),acceptedTerms:n.did_accept_terms}}},checkAnySettingTypeEnabled:function(t){return void 0!==l(t,{enabled:!0})},activate:function(){this.setState({isActive:!0}),this.onActivate()},deactivate:function(){this.setState({isActive:!1}),this.onDeactivate()},checkEnabledByType:function(t,e){return void 0!==l(t,{setting_type:e,enabled:!0})},getPropertyBySettingTypeAndDataName:function(t,e,n){var i=l(t,{setting_type:e});if(void 0!==i&&void 0!==i.data)return i.data[n]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(29),n(24),n(15),n(26),n(1512)],void 0===(a=function(t,e,n,i,a,o,s,r){var l=/^(\d+)(\.)(0)$/;return t([a],{templateString:r,toggleSurveyListener:null,MAX_SUBJECTS_TO_DISPLAY:5,SURVEY_RES_YES:"useful_yes",SURVEY_RES_NO:"useful_no",constructor:function(t){var e=t.model&&t.model.recentCampaigns&&t.model.recentCampaigns.length>0,n=[];e&&(n=t.model.recentCampaigns.map((function(t){return{subject:t.subject,openRate:(e=t.open_rate,n=(100*e).toFixed(1)+"",n.match(l)&&(n=n.substr(0,n.length-2)),n)};var e,n}))),this.state={hasRecentCampaigns:e,campaignsSubjectPerf:n,shouldShowSurvey:!0,hasFinishedSurvey:!1}},render:function(){this.inherited(arguments);var t=e(".dijitDialogFocused .dijitDialogCloseIcon")[0];t&&!this.toggleSurveyListener&&(this.toggleSurveyListener=n(t,"click",function(){this.setState({shouldShowSurvey:!this.state.hasFinishedSurvey})}.bind(this)))},respondToSurvey:function(t){if(t.target&&t.target.id&&[this.SURVEY_RES_YES,this.SURVEY_RES_NO].includes(t.target.id)){var e="recent_subject_line_performance_survey:"+t.target.id;s.googleAnalytics.trackEvent("campaign_checklist","click",e),this.setState({hasFinishedSurvey:!0})}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(24),n(1513)],void 0===(a=function(t,e,n){return t([e],{state:{errors:""},templateString:n})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(18),n(8)],void 0===(a=function(t,e,n){var i=t(null,{constructor:function(t){this.name=t.name,this.storeId=t.store_id,this.listId=t.list_id||null,this.siteUrl=t.site_url}});return{filters:{hasMemberList:function(t){return t.listId}},list:function(){return e.get(n.toUrl("channels/get-active-stores"),{handleAs:"json",query:null}).then((function(t){return t.map((function(t){return new i(t)}))}))},listAbandonedBrowse:function(){return e.get(n.toUrl("channels/get-abandonedbrowse-stores"),{handleAs:"json",query:null}).then((function(t){return t.map((function(t){return new i(t)}))}))}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(166),n(0),n(1),n(2),n(10),n(3),n(19),n(42),n(164),n(29),n(15),n(255),n(26),n(16),n(21),n(323),n(24),n(192),n(275),n(262),n(652),n(656),n(657),n(140),n(885),n(879),n(871),n(1536)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T){var A=e([f],{templateString:T,isAutomation:!1,allSubjectLineCriteriaPassed:!1,allPreviewTextCriteriaPassed:!1,hasUserDismissedPreviewTextRec:!1,constructor:function(t){this.state={subject:t.model.content.subject||t.model.fromDefaultSubject,previewText:t.model.content.previewText,isPreviewTextFlagOn:m.flagIsOn(p.REPORTING_PREVIEW_TEXT),displayedRecs:{},previouslyActivatedSubject:!1,recommendationSuccess:!1,hasSeenSubjectRec:!1,hasSeenSubjectSuccess:!1,hasSeenPreviewRec:!1,hasSeenPreviewSuccess:!1,hasSeenPreviewTextAnimation:!1,dirtyFields:{},shouldShowPreviewTextRec:!1,previewTextRecStatus:x.STATUS_PT_NOT_SHOWN,previewTextRecSuppresses:!1,hasFollowedPreviewTextRec:!1,isShowingGeneratedPreviewText:!1,hasSeenPreviewText:!1},this.initializeRecommendationTopic(),this.inherited(arguments),this.subjectCharCount=new w({maxCharacterLength:150}),this.previewTextCharCount=new w({maxCharacterLength:150}),this.subjectValidationErrors=new C,this.previewTextValidationErrors=new C,this.campaignArchiveUrl=new v,this.isAutomation=void 0!==t.isAutomation&&t.isAutomation,!1===this.isAutomation&&t&&t.model&&t.model.campaignId&&t.model.campaignUrl&&(this.campaignId=t.model.campaignId,this.campaignUrl=t.model.campaignUrl.url),this.onSave=t.onSave,t.allSubjectLineCriteriaPassed&&(this.allSubjectLineCriteriaPassed=t.allSubjectLineCriteriaPassed),this.addPersistentExtraProps=t.addPersistentExtraProps,t.previouslyActivatedSubject&&(this.state.previouslyActivatedSubject=t.previouslyActivatedSubject,this.state.hasSeenSubjectRec=t.hasSeenSubjectRec,this.state.hasSeenSubjectSuccess=t.hasSeenSubjectSuccess,this.state.hasSeenPreviewRec=t.hasSeenPreviewRec,this.state.hasSeenPreviewSuccess=t.hasSeenPreviewSuccess),this.state.previouslyActivatedSubject&&this.allSubjectLineCriteriaPassed?this.state.recommendationSuccess=!0:this.allSubjectLineCriteriaPassed||(this.state.recommendationSuccess=!1),this.state.isPreviewTextFlagOn&&t.model.previewTextGenerator&&(this.state.hasFollowedPreviewTextRec=t.hasFollowedPreviewTextRec,this.state.hasSeenPreviewTextAnimation=t.hasSeenPreviewTextAnimation,this.state.hasPreviewText=Boolean(this.state.previewText),this.state.previewTextRecStatus=t.model.previewTextGenerator.status,this.state.previewTextRecValue=t.model.previewTextGenerator.value,this.state.hasSeenPreviewText=t.model.previewTextGenerator.hasSeenPreviewText),this.state.previewTextRecSuppresses=this.state.previewTextRecStatus>=x.STATUS_PT_AVAILABLE&&this.state.previewTextRecStatus<=x.STATUS_PT_REGEN_AVAILABLE},getData:function(){return{content:{subject:this.state.subject.trim(),previewText:this.state.previewText}}},onSaveError:function(t){t instanceof u&&!1===this.isAutomation&&t.code===u.CODE_REQUESTMAPPER&&new b({campaignUrl:this.campaignUrl,campaignId:this.campaignId,continueButtonLabel:"Use default URL",cancelButtonLabel:"Cancel changes",saveInstructions:"You can choose to cancel these changes, or continue to build your campaign with this default campaign URL:",onCancel:n.hitch(this,(function(t){t.preventDefault(),this.cancel(t)})),disablePrettyUrl:n.hitch(this,(function(){var t=this.getData();return t.campaign_url={campaign_token:null},this.onSave(t)}))})},onCancel:function(t){return t.preventDefault(),this.state.hasFollowedPreviewTextRec&&(this.onDismissPreviewTextRec(),h.googleAnalytics.trackEvent("campaign_checklist","preview text generator","cancel suggestion",{dimension53:t.target.innerText,dimension54:window.location.href,dimension56:"cancel/close subject slat"})),this.cancel(t)},onSaveChanges:function(t){return this.state.hasFollowedPreviewTextRec&&(this.addPersistentExtraProps({hasFollowedPreviewTextRec:!1,previewTextRecStatus:x.STATUS_PT_NOT_SHOWN,hasUserDismissedPreviewTextRec:!1}),this.setState({hasFollowedPreviewTextRec:!1,previewTextRecStatus:x.STATUS_PT_NOT_SHOWN}),this.hidePreviewTextInputTooltip(),this.state.previewText==this.state.previewTextRecValue&&h.googleAnalytics.trackEvent("campaign_checklist","preview text generator","save suggestion",{dimension53:"Save",dimension54:window.location.href,dimension56:"save generated preview text"})),this.onSave(t)},validate:function(){var t={};return""===this.state.subject?t.subject="Add the subject for your email before saving.":c.getSymbolLength(this.state.subject)>150&&(t.subject="Your subject should be 150 characters or less."),c.getSymbolLength(this.state.previewText)>150&&(t.previewText="Your preview should be 150 characters or less."),t},setValue:function(t){var e={},n=this.state.dirtyFields,i=t.target.name,a=t.target.value;""!==a&&(n[i]=!0,e.dirtyFields=n),"subject"===i&&this.subjectCriteriaListObject&&this.subjectCriteriaListObject.updateCriteria(a),e[i]=a,this.setState(e)},showSubjectLineHelper:function(){o.remove(this.subjectCriteriaList,"hide")},hideSubjectLineHelper:function(){o.add(this.subjectCriteriaList,"hide")},shouldShowPreviewTextRec:function(){return this.state.hasPreviewText?this.shouldShowRegenPreviewTextRec():this.state.previewTextRecStatus!==x.STATUS_PT_NOT_SHOWN},shouldShowSmartPreviewTextRec:function(){return this.state.hasPreviewText?this.shouldShowRegenPreviewTextRec():x.shouldShowSmartPreviewTextRec(this.state.previewTextRecStatus)},shouldShowRegenPreviewTextRec:function(){return[x.STATUS_PT_REGEN_AVAILABLE,x.STATUS_PT_MAX_REGEN_REACHED].includes(this.state.previewTextRecStatus)&&!this.hasUserDismissedPreviewTextRec},trackPreviewTextInput:function(){(!this.state.isPreviewTextFlagOn||this.state.previewTextRecStatus===x.STATUS_PT_NOT_SHOWN||this.state.previewTextRecStatus===x.STATUS_PT_UNAVAILABLE)&&h.googleAnalytics.trackEvent("email editor","start field input","enter preview text")},trackPTDismissal:function(){h.googleAnalytics.trackEvent("campaign_checklist","preview text generator","dismiss "+(this.state.previewTextRecStatus===x.STATUS_PT_AVAILABLE?"generate":"regenerate"),{dimension53:"X",dimension54:window.location.href,dimension55:this.isActive?"open slat":"closed slat",dimension56:this.state.previewTextRecStatus===x.STATUS_PT_AVAILABLE?"dismiss generate":"dismiss regenerate"})},onFollowedPreviewTextRec:function(t,e){var n=e&&e.target&&e.target.textContent,i=this.state.previewTextRecStatus===x.STATUS_PT_DISMISSED,a=i||this.state.previewTextRecStatus===x.STATUS_PT_AVAILABLE;t?(g.recordPreviewTextGenClicked(this.campaignId),h.googleAnalytics.trackEvent("campaign_checklist","preview text generator",a?"generate":"regenerate",{dimension53:n,dimension54:window.location.href,dimension55:i?"generated preview text dismissed":this.isActive?"open slat":"closed slat",dimension56:a?"generate preview text":"regenerate preview text"})):h.googleAnalytics.trackEvent("campaign_checklist","preview text generator","write own preview text",{dimension53:n,dimension54:window.location.href,dimension55:i?"generated preview text dismissed":"generated preview text unavailable",dimension56:"Add custom preview text"}),this.isActive?(this.setState({hasFollowedPreviewTextRec:t}),this.showGeneratedPreviewText()):(this.addPersistentExtraProps({hasFollowedPreviewTextRec:t}),this.activate())},onDismissPreviewTextRec:function(){this.trackPTDismissal(),this.hasUserDismissedPreviewTextRec=!0,this.addPersistentExtraProps({isShowingGeneratedPreviewText:!1,hasUserDismissedPreviewTextRec:!0,hasFollowedPreviewTextRec:!1}),this.setState({hasFollowedPreviewTextRec:!1}),this.hidePreviewTextInputTooltip(),g.recordPreviewTextDismissal(this.campaignId)},hidePreviewTextInputTooltip:function(){window.previewTextEmojiPicker&&l.hide(previewTextEmojiPicker.domNode),this.scrollListener&&this.scrollListener.remove(),this.resizeListener&&this.resizeListener.remove()},showPreviewTextInputTooltip:function(){setTimeout(n.hitch(this,(function(){var t="You can edit your preview text to make it your own.",e=previewTextEmojiPicker.domNode;l.show(t,e),this.scrollListener=i(a.byId("wrap"),"scroll",n.hitch(this,(function(n){l.hide(e),l.show(t,e)}))),this.resizeListener=i(window,"resize",n.hitch(this,(function(n){l.hide(e),l.show(t,e)})))})))},showGeneratedPreviewText:function(){if(this.isActive&&!this.state.isShowingGeneratedPreviewText){this.subjectPreviewTextRecContainer&&o.add(this.subjectPreviewTextRecContainer,"hide"),this.previewTextInput.value=this.state.previewTextRecValue,previewTextEmojiPicker.updateFauxInput();var t=new y({tier:2,condensed:!0,toggletipText:"Our smart preview text generator creates custom copy tailored to your voice and message, so you can send emails with confidence."});t.placeAt(this.previewTextLabelSmartMark,"only"),t.triggerAnimation(),this.showPreviewTextInputTooltip();var e=previewTextEmojiPicker.fauxInput;o.add(e,"generated"),i.once(e,"focus",n.hitch(this,(function(){o.remove(e,"generated"),this.hidePreviewTextInputTooltip()}))),i.once(subjectEmojiPicker.fauxInput,"focus",n.hitch(this,(function(){this.hidePreviewTextInputTooltip()}))),this.setState({isShowingGeneratedPreviewText:!0})}},showRecentSubjectLinePerformance:function(){this.subjectDialog||(this.subjectDialog=new d({title:"Recent subject line performance",content:new _({model:this.model})})),this.subjectDialog.show(),h.googleAnalytics.trackEvent("campaign_checklist","cta","inline",{dimension53:"recent subject lines",dimension54:window.location.href,dimension56:"open recent subject lines modal"})},initializeRecommendationTopic:function(){var t=this,e=function(t){s.publish("recs/checklist_editor",t)},n=[];s.subscribe("recs/checklist_editor",(function(i){switch(i.type){case"render":return function(e){if(n.length){var i={};n.forEach((function(t){e[t]&&(i[t]=e[t])})),t.setState({displayedRecs:i})}}(i.payload);case"subject_rec_codes":return a=i.payload,n=a,void e({type:"ready"});default:return null}var a})),e({type:"request_codes",payload:"subject"})},renderValidation:function(t){Object.keys(this.state.dirtyFields).forEach((function(e){var n=r.byId(e+"EmojiPicker");this[e+"ValidationErrorsContainer"].innerText=t[e]||"",n&&o.toggle(n.fauxInput,"invalid",!!t[e])}),this)},renderPreviewTextRec:function(){this.previewTextRec&&this.previewTextRec.destroy();var t={};this.isActive&&(t[x.STATUS_PT_AVAILABLE]="Not sure what to write? Get started with custom preview text generated for your email."),this.hasUserDismissedPreviewTextRec&&!this.state.hasPreviewText&&(this.state.previewTextRecStatus=x.STATUS_PT_DISMISSED,this.state.previewTextRecSuppresses=!1);var e={previewTextRecStatus:this.state.previewTextRecStatus,campaignId:this.campaignId,addPersistentExtraProps:this.addPersistentExtraProps,text:t,hasSeenPreviewTextAnimation:this.state.hasSeenPreviewTextAnimation,onClickGetPreviewTextRec:n.hitch(this,this.onFollowedPreviewTextRec.bind(this,!0)),onClickAddPreviewText:n.hitch(this,this.onFollowedPreviewTextRec.bind(this,!1)),onDismiss:n.hitch(this,this.onDismissPreviewTextRec),hasSeenPreviewText:this.state.hasSeenPreviewText};this.shouldShowSmartPreviewTextRec()&&this.subjectPreviewTextRecContainer&&(this.previewTextRec=new x(e),this.previewTextRec.placeAt(this.subjectPreviewTextRecContainer)),this.shouldShowPreviewTextRec()&&this.checklistPreviewTextRecContainer&&(this.previewTextRec=new x(e),this.previewTextRec.placeAt(this.checklistPreviewTextRecContainer)),this.state.hasFollowedPreviewTextRec&&this.showGeneratedPreviewText()},render:function(){if(""===this.domNode.innerHTML&&this.inherited(arguments),this.renderPreviewTextRec(),this.isActive){var t=this.validate();new l({connectId:this.emojiSupportLink,position:["below"],showDelay:0,label:I}),this.itemButtons&&this.itemButtons.destroy(),this.renderValidation(t),this.subjectCharCount.placeAt(this.subjectCharCountContainer),this.previewTextCharCount.placeAt(this.previewTextCharCountContainer),this.subjectCharCount.setCount(150-c.getSymbolLength(this.state.subject)),this.previewTextCharCount.setCount(150-c.getSymbolLength(this.state.previewText)),this.itemButtons=new k({label:"Subject",getData:this.getData.bind(this),onSaveError:this.onSaveError.bind(this),onSave:this.onSaveChanges.bind(this),cancel:this.onCancel.bind(this),activate:this.activate,deactivate:this.deactivate,isActive:this.isActive,isValid:0===Object.keys(t).length}),this.itemButtons.placeAt(this.subjectItemButtonsContainer),this.subjectCriteriaListObject||(this.subjectCriteriaListObject=new S({subject:this.state.subject,addPersistentExtraProps:this.addPersistentExtraProps}),this.subjectCriteriaListObject.placeAt(this.subjectCriteriaList))}}});return A.activate=function(){this.addPersistentExtraProps({previouslyActivatedSubject:!0}),this.setState({isActive:!0}),this.onActivate()},A.isComplete=function(t){return t.content.subject},A.isValid=function(t){return null!==t.content.subject&&c.getSymbolLength(t.content.subject.trim())>0&&c.getSymbolLength(t.content.previewText)<=150&&c.getSymbolLength(t.content.subject)<=150},A}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(18),n(228),n(449),n(8),n(17),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r){var l={patchById:function(t,e){return n.post(o.toUrl("/landing-pages/patch",{id:t}),{handleAs:"json",data:{patch:JSON.stringify(e)}}).then(this.createFromProperties.bind(this))},createFromProperties:function(t){return new u(t)},listPublishedSignupPages:function(){return n.get(o.toUrl("channels/get-published-signup-pages"),{handleAs:"json",query:null}).then((function(t){return t.map((function(t){return{pageId:t.page_id,title:t.title}}))}))},acceptTerms:function(){return n.get(o.toUrl("landing-pages/accept-terms"),{handleAs:"json"})}},d=t(null,{constructor:function(t){t.page_url&&(this.rootDomain=t.page_url.root_domain,this.campaignToken=t.page_url.campaign_token,this.brandToken=t.page_url.brand_token,this.domainType=t.page_url.domain_type,this.mostRecentArchiveMapping=t.page_url.mostRecentArchiveMapping,this.mostRecentArchiveMappingCanEdit=t.page_url.mostRecentArchiveMappingCanEdit,this.canCustomizeArchiveUrl=t.page_url.canCustomizeArchiveUrl,this.brands=t.page_url.brands,this.url=t.page_url.url)}}),c=t(null,{constructor:function(t){this.name=t.name,this.brandToken=t.brand_token}}),u=t(null,{constructor:function(t){this._timestamp=Date.now(),this.type=t.type,this.pageId=t.page_id,this.list={id:t.list_id,name:t.list_name,captchaEnabled:t.captcha_enabled,disabled:t.list_disabled},this.store={id:t.store_id,name:t.store_name},this.name=t.name,this.title=t.title,this.status=t.status,this.createdAt=t.created_at,this.updatedAt=t.updated_at,this.publishedAt=t.published_at,this.unpublishedAt=t.unpublished_at,this.hasBrokenBlocks=t.has_broken_blocks,this.hasDefaultBlockContent=t.has_default_block_content,this.hasPaymentBlock=t.has_payment_block,this.hasSignupForm=t.page_has_signup_block,this.renderedHtml=t.rendered_html,this.isContentReady=t.is_content_ready,this.campaignUrl=new d(t),this.canSend=t.can_send,this.contentType=t.content_type,this.screenshotUrl=t.screenshot_url,this.tracking_settings=t.tracking_settings,this.signup_tags=t.signup_tags,this.parkedPageUrl=t.parked_page_url,t.branded_domains&&t.branded_domains.length>0?this.brandedDomains=t.branded_domains.map((function(t){return new c(t)})):this.brandedDomains=[];t.signup_form_settings&&(this.redirectSettings=["successAction","successRedirectUrl","successPageRedirectUrl"].reduce((function(e,n){return e[n]=t.signup_form_settings[n],e}),{})),this.screenshotUrl=t.screenshot_url,this.hasTemplate=t.has_template},patch:function(t){t||(t={});var n={};return t.name&&(n=e.mixin({},n,{name:t.name})),t.listId&&(n=e.mixin({},n,{list_id:t.listId})),t.storeId&&(n=e.mixin({},n,{store_id:t.storeId})),t.title&&(n=e.mixin({},n,{title:t.title})),t.campaign_url&&t.campaign_url.campaign_token&&(n=e.mixin({},n,{campaign_token:t.campaign_url.campaign_token})),t.campaign_url&&t.campaign_url.hasOwnProperty("brand_token")&&(n=e.mixin({},n,{brand_token:t.campaign_url.brand_token})),t.tracking_settings&&(n=e.mixin({},n,{tracking_settings:t.tracking_settings})),t.signup_tags&&(n=e.mixin({},n,{signup_tags:t.signup_tags})),l.patchById(this.pageId,n)}});return l}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(13),n(6),n(2),n(19),n(3),n(7),n(8),n(15),n(29),n(895),n(18),n(14),n(104),n(42),n(21),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){return t([e],{onReady:function(){},showReplicationModal:function(t){var e=new d({title:"Replicate Automation",href:r.toUrl("/automations/replicate-automation-modal",{id:t}),onDownloadEnd:function(){n(".cancel",e.domNode).on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.hide()}))},onHide:function(){e.destroyRecursive()}});e.show()},_confirmArchiving:function(t){var e=new d({title:"Are you sure?",onHide:function(){e.destroyRecursive()},onDownloadEnd:function(){n(".cancel-button",e.domNode).on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.hide()})),n("form",e.domNode).on("submit",(function(n){m.byId("confirm-archiving-button").set("disabled",!0),n.stopPropagation(),n.preventDefault();var i={automationId:t};u.post(s.get(this,"action"),{data:i}).then((function(){l.toast("Your automation has been successfully archived."),p.reRenderCampaigns(!0,"archived"),e.hide()}),(function(){e.hide(),l.toast("There was a problem archiving your automation. Please try again.")}))}))}});e.setHref(r.toUrl("automations/confirm-archive",{automationId:t})),e.show()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return function(t,e,n,i){var a=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++a]);++a<o;)n=e(n,t[a],a,t);return n}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(1607),n(442),n(443)],void 0===(a=function(t,e,n){return function(i){return n(e(i,void 0,t),i+"")}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(299),n(921),n(133)],void 0===(a=function(t,e,n){return function(i){return t(i,n,e)}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(14),n(25),n(11),n(20),n(3),n(2),n(19),n(1661),n(926)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([i,a,o],{templateString:d,blueprint:null,isVisible:!1,cardClass:"",postMixInProperties:function(){this.inherited(arguments),this.title=this.blueprint.title,this.pathways=this.blueprint.pathways,this.description=this.blueprint.description,this.types=this.blueprint.types,this.channel=this.blueprint.options[0].type||"none"},postCreate:function(){this.blueprint.options.map((function(t){s.toggle(this.cardAutomation,"display--block",-1!==["automation","variate","transactional","rss","abandoned_browse"].indexOf(t.type))}),this)},focus:function(){this.cardLink.focus()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(18),n(8),n(17),n(16),n(26)],void 0===(a=function(t,e,n,i,a,o){return{getCardType:function(t){return this._get("/account/billing/card-type",t)},getPaymentMethod:function(){return this._get("/account/billing/payment-method",{id:i.userId})},postPaymentMethod:function(e){return e=t.mixin({__csrf:i.__csrfToken},e),this._post("/account/billing/payment-method-post",e)},_get:function(t,i){return e.get(n.toUrl(t,i),{handleAs:"json"})},_post:function(t,i){return e.post(n.toUrl(t),{handleAs:"json",data:i})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(2),n(31),n(14),n(8),n(15),n(471),n(940),n(941),n(482),n(1702)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([u],{content:h,slatId:"connect",postEndpoint:"/ads/facebook/post-connect/",pages:null,channels:null,channelWidgets:[],permissionsMsg:"To run an ad, we need permission to manage your business, manage your Pages, and publish as Pages you manage. <a href='_link_'>Update your permissions</a>.",authEndpoint:"/facebook/login?redir=ads|_unique_id_",setData:function(t){this.adId=t.ad_id,this.pages=t.pages,this.channels=t.placements,this.hasAllPermissions=t.has_all_permissions,this.hasAllPermissions?this._initPages():this._handleMissingPermissions(),this._toggleLoadingIndicator()},_handleMissingPermissions:function(){var t=s.toUrl(this.authEndpoint.replace("_unique_id_",this.adId));r.addError(this.errorAnchor,this.permissionsMsg.replace("_link_",t))},handleSave:function(){var t={id:this.adId,page_id:this._getSelectedPage().pageId};this.channelWidgets.forEach((function(n){t=e.mixin(t,n.getFormData())})),this.postForm(t)},onPostError:function(t){var e=t.errors[Object.keys(t.errors)[0]];r.addError(this.errorAnchor,e)},_initPages:function(){this.input=new d({data:this.pages}),this.input.placeAt(this.pageInput),this.input.startup(),this.input.watch("page",e.hitch(this,"_handleSelection")),this._handleSelection()},_initChannels:function(){this.channels.forEach(e.hitch(this,"_createChannel"))},_toggleLoadingIndicator:function(){n.toggle(this.loadingState,"hide"),n.toggle(this.readyState,"hide")},_handleSelection:function(){this._setPageData(),this._resetChannelItems(),this._initChannels()},_setPageData:function(){this.channels=l(this.channels,this._getFormattedPageData())},_createChannel:function(t){var e=new c({data:t});e.placeAt(this.channelItems),e.startup(),this.channelWidgets.push(e)},_resetChannelItems:function(){o.findWidgets(this.channelItems).forEach((function(t){t.destroyRecursive(!1)})),this.channelWidgets=[]},_getSelectedPage:function(){return this.input.get("page")},_getFormattedPageData:function(){var t=this._getSelectedPage();return[{enabled:!0,iconUrl:t.iconUrl},{enabled:t.instagram.enabled,iconUrl:t.instagram.iconUrl}]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(18),n(8)],void 0===(a=function(t,e,n){return{updateCarouselItem:function(t){return this._postForm("/ads/facebook/post-content/",t)},deleteCarouselItem:function(t){return this._postForm("/ads/facebook/remove-attachment",t)},resetCarousel:function(t){return this._postForm("/ads/facebook/reset-content",t)},addImage:function(t){return this._postForm("/ads/facebook/add-image",t)},removeImage:function(t){return this._postForm("/ads/facebook/remove-image",t)},editImage:function(t){return this._postForm("/ads/facebook/edit-image",t)},_postForm:function(t,i){return e.post(n.toUrl(t),{handleAs:"json",data:i})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(2),n(19),n(749),n(36),n(24),n(1708),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t([r],{templateString:l,animationDuration:250,type:"",label:"",name:"",required:!0,lengthLimit:null,content:{},postCreate:function(){this._initInput(),this._initHelpText(),this._initCharCount()},_initInput:function(){var t=null,a=null;switch(this.type){case"textarea":t="textarea",a={placeholder:this.content.placeholder?this.content.placeholder:"",innerHTML:this.content.value?this.content.value:"",cols:"30",rows:"2",className:"resize--none"};break;default:t="input",a={type:this.type,value:this.content.value?this.content.value:"",placeholder:this.content.placeholder?this.content.placeholder:""}}var o=e.mixin({id:this.id+"_input",name:this.name,maxlength:this.lengthLimit?this.lengthLimit:""},a);this.input=n.create(t,o,this.inputContainer),i(this.input,"focus",e.hitch(this,"_handleInputFocus")),i(this.input,"blur",e.hitch(this,"_handleInputBlur"))},_initHelpText:function(){this.content.helpText&&n.create("div",{className:"field-help",innerHTML:this.content.helpText},this.inputContainer)},_initCharCount:function(){this.lengthLimit&&(this.charCount=new o({inputField:this.id+"_input",characters:this.lengthLimit,className:"small-meta"}),this.charCount.placeAt(this.charCountContainer),this.charCount.startup())},_handleInputFocus:function(){this.lengthLimit&&(this.required?this._animateInWithRequired():s(this.charCountContainer,"transition.slideUpIn",{duration:this.animationDuration}))},_handleInputBlur:function(){this._compareValues(),this.lengthLimit&&(this.required?this._animateOutWithRequired():s(this.charCountContainer,"transition.slideDownOut",{duration:this.animationDuration}))},_animateInWithRequired:function(){s(this.requiredIndicator,"transition.slideUpOut",{duration:this.animationDuration/2,complete:e.hitch(this,(function(){s(this.charCountContainer,"transition.slideUpIn",{duration:this.animationDuration/2})}))})},_animateOutWithRequired:function(){s(this.charCountContainer,"transition.slideDownOut",{duration:this.animationDuration/2,complete:e.hitch(this,(function(){s(this.requiredIndicator,"transition.slideDownIn",{duration:this.animationDuration/2})}))})},getValue:function(){return this.input.value},getPassedInValue:function(){return this.content.value},_compareValues:function(){this.getValue()!==this.getPassedInValue()&&a.publish("content/carouselItem/inputChanged",{hasChanged:!0})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(4),n(24),n(958)],void 0===(a=function(t,e,n,i,a,o){return t([a],{templateString:o,postCreate:function(){this.toggleCarouselControls(),this._handleCarousel()},toggleCarouselControls:function(){n.toggle(this.carouselActions,"hide",!this.hasAttachments)},toggleActiveClass:function(t,e,i){i=i||"hide",t.forEach((function(t,a){n.toggle(t,i,a!==+e)}))},_handleCarousel:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div>\n    \x3c!-- MC BANNER --\x3e\n    <div class="mc-banner" data-dojo-attach-point="bannerContainer">\n        <div class="mc-layout__bannerContent">\n            <iframe src="about:blank" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" src="about:blank" style="width:100%;" data-dojo-attach-point="iframeBannerContainer"></iframe>\n        </div>\n    </div>\n\n    \x3c!-- MC MODAL --\x3e\n    <div class="mc-modal" data-dojo-attach-point="modalContainer">\n        <div class="mc-closeModal" style="display:block !important;" data-action="close-mc-modal" data-dojo-attach-point="modalClose"></div>\n        <div class="mc-layout__modalContent">\n            <iframe src="about:blank" frameborder="0" marginwidth="0" marginheight="0" src="about:blank" style="width:100%;" data-dojo-attach-point="iframeModalContainer"></iframe>\n        </div>\n    </div>\n\n    \x3c!-- MC MODAL OVERLAY --\x3e\n    <div class="mc-modal-bg" data-dojo-attach-point="modalOverlay"></div>\n</div>\n'},function(t,e){t.exports='<div class="bannerContent" data-dojo-attach-point="bannerContainer">\n    \x3c!-- Banner close button --\x3e\n    <div class="bannerContent__closeButton" data-dojo-attach-point="modalOpen"></div>\n    \x3c!-- Description text from CK editor --\x3e\n    <div class="bannerContent__description" data-dojo-attach-point="bannerDescription">${description}</div>\n    \x3c!-- Banner open full modal --\x3e\n    <div class="bannerContent__buttonContainer">\n        <button class="button bannerContent__subscribeButton" data-dojo-attach-point="bannerClose">${subscribeLabel}</button>\n    </div>\n</div>'},function(t,e,n){var i,a;i=[n(0),n(23),n(4),n(3),n(2),n(34),n(1013),n(674),n(152)],void 0===(a=function(t,e,n,i,a,o,s,r){function l(t,e){e&&e.nodeType&&t.appendChild(e)}function d(t){return r.escapeCssIdentifier(t,"-")}var c=t(s,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(t){return"object"!=typeof t?this.columns[t]:this.cell(t).column},listType:"grid",cell:function(t,e){if(t.column&&t.element)return t;var n;if(t.target&&t.target.nodeType&&(t=t.target),t.nodeType)do{if(this._rowIdToObject[t.id])break;var i=t.columnId;if(i){e=i,n=t;break}t=t.parentNode}while(t&&t!==this.domNode);if(!n&&void 0!==e){var a=this.row(t),o=a&&a.element;if(o)for(var s=o.getElementsByTagName("td"),r=0;r<s.length;r++)if(s[r].columnId===e){n=s[r];break}}return null!=t?{row:a||this.row(t),column:e&&this.column(e),element:n}:void 0},createRowCells:function(t,e,i,a){var s,r,l,c,u,h,p,m,g,f,v,b,y,w=n.create("table",{className:"dgrid-row-table",role:"presentation"}),_=o("ie")<9?n.create("tbody",null,w):w;for(r=0,l=(i=i||this.subRows).length;r<l;r++)for(h=i[r],s=n.create("tr",null,_),h.className&&(s.className=h.className),c=0,u=h.length;c<u;c++)m=(p=h[c]).id,g=p.field?" field-"+d(p.field):"",(f="function"==typeof p.className?p.className(a):p.className)&&(g+=" "+f),(v=n.create(t,{className:"dgrid-cell"+(m?" dgrid-column-"+d(m):"")+g,role:"th"===t?"columnheader":"gridcell"})).columnId=m,(b=p.colSpan)&&(v.colSpan=b),(y=p.rowSpan)&&(v.rowSpan=y),e(v,p),s.appendChild(v);return w},left:function(t,e){return t.element||(t=this.cell(t)),this.cell(this._move(t,-(e||1),"dgrid-cell"))},right:function(t,e){return t.element||(t=this.cell(t)),this.cell(this._move(t,e||1,"dgrid-cell"))},_defaultRenderCell:function(t,e,n){if(this.formatter){var i=this.formatter,a=this.grid.formatterScope;n.innerHTML="string"==typeof i&&a?a[i](e,t):this.formatter(e,t)}else null!=e&&n.appendChild(document.createTextNode(e))},renderRow:function(t,e){var i=this,a=this.createRowCells("td",(function(n,a){var o=t;a.get?o=a.get(t):"field"in a&&"_item"!==a.field&&(o=o[a.field]),a.renderCell?l(n,a.renderCell(t,o,n,e)):i._defaultRenderCell.call(a,t,o,n,e)}),e&&e.subRows,t),o=n.create("div",{role:"row"});return o.appendChild(a),o},renderHeader:function(){var t=this,e=this.headerNode;e.setAttribute("role","row"),n.empty(e);var i=this.createRowCells("th",(function(t,e){var n=e.headerNode=t,i=e.field;i&&(t.field=i),e.renderHeaderCell?l(n,e.renderHeaderCell(n)):("label"in e||e.field)&&n.appendChild(document.createTextNode("label"in e?e.label:e.field)),!1!==e.sortable&&i&&"_item"!==i&&(t.sortable=!0,t.className+=" dgrid-sortable")}),this.subRows&&this.subRows.headerRows);this._rowIdToObject[i.id=this.id+"-header"]=this.columns,e.appendChild(i),this._sortListener&&this._sortListener.remove(),this._sortListener=a(i,"click,keydown",(function(n){if("click"===n.type||32===n.keyCode||!o("opera")&&13===n.keyCode){var i,s,r,l,d=n.target;do{if(d.sortable){i=d.field||d.columnId,s=t.sort[0],r=t.hasNeutralSort&&s&&s.property===i&&s.descending?[]:[{property:i,descending:s&&s.property===i&&!s.descending}],l={bubbles:!0,cancelable:!0,grid:t,parentType:n.type,sort:r},a.emit(n.target,"dgrid-sort",l)&&(t._sortNode=d,t.set("sort",r));break}}while((d=d.parentNode)&&d!==e)}}))},resize:function(){var t,e=this.headerNode.firstChild,n=this.contentNode;this.inherited(arguments),n.style.width="",n&&e&&(t=e.offsetWidth)>n.offsetWidth&&(n.style.width=t+"px")},destroy:function(){this._destroyColumns(),this._sortListener&&this._sortListener.remove(),this.inherited(arguments)},_setSort:function(){this.inherited(arguments),this.updateSortArrow(this.sort)},_findSortArrowParent:function(t){var e=this.columns;for(var n in e){var i=e[n];if(i.field===t)return i.headerNode}},updateSortArrow:function(t,e){if(this._lastSortedArrow&&(i.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),n.destroy(this._lastSortedArrow),delete this._lastSortedArrow),e&&(this.sort=t),t[0]){var a=t[0].property,o=t[0].descending,s=this._sortNode||this._findSortArrowParent(a);delete this._sortNode,s&&(s=s.contents||s,this._lastSortedArrow=n.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"&nbsp;",role:"presentation"},s,"first"),i.add(s,"dgrid-sort-"+(o?"down":"up")),this.resize())}},styleColumn:function(t,e){return this.addCssRule("#"+r.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+d(t),e)},_configColumns:function(t,n){var i=[],a=n instanceof Array;return r.each(n,(function(o,s){"string"==typeof o&&(n[s]=o={label:o}),a||o.field||(o.field=s),s=o.id=o.id||(isNaN(s)?s:t+s),this._configColumn&&(this._configColumn(o,n,t),s=o.id),a&&(this.columns[s]=o),o.grid=this,"function"==typeof o.init&&(e.deprecated("colum.init","Column plugins are being phased out in favor of mixins for better extensibility. column.init may be removed in a future release."),o.init()),i.push(o)}),this),a?n:i},_destroyColumns:function(){var t,n,i,a,o=this.subRows,s=o&&o.length;for(this.cleanup(),t=0;t<s;t++)for(n=0,a=o[t].length;n<a;n++)"function"==typeof(i=o[t][n]).destroy&&(e.deprecated("colum.destroy","Column plugins are being phased out in favor of mixins for better extensibility. column.destroy may be removed in a future release."),i.destroy())},configStructure:function(){var t=this.subRows,e=this._columns=this.columns;if(this.columns=!e||e instanceof Array?{}:e,t)for(var n=0;n<t.length;n++)t[n]=this._configColumns(n+"-",t[n]);else this.subRows=[this._configColumns("",e)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(t){this._destroyColumns(),this.subRows=null,this.columns=t,this._updateColumns()},_setSubRows:function(t){this._destroyColumns(),this.subRows=t,this._updateColumns()},_updateColumns:function(){this.configStructure(),this.renderHeader(),this.refresh(),this._lastCollection&&this.renderArray(this._lastCollection),this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});return c.appendIfNode=l,c}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(34)],void 0===(a=function(t){t.add("dom-contains",(function(t,e,n){return!!n.contains}));var e,n,i,a=[],o=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g;var s={defaultDelay:15,throttle:function(t,e,n){var i=!1;return n=n||s.defaultDelay,function(){i||(i=!0,t.apply(e,arguments),setTimeout((function(){i=!1}),n))}},throttleDelayed:function(t,e,n){var i=!1;return n=n||s.defaultDelay,function(){if(!i){i=!0;var a=arguments;setTimeout((function(){i=!1,t.apply(e,a)}),n)}}},debounce:function(t,e,n){var i;return n=n||s.defaultDelay,function(){i&&(clearTimeout(i),i=null);var a=arguments;i=setTimeout((function(){t.apply(e,a)}),n)}},each:function(t,e,n){var i,a;if(t)if("number"==typeof t.length)for(i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t);else for(i in t)e.call(n,t[i],i,t)},contains:function(e,n){return t("dom-contains")?e.contains(n):8&e.compareDocumentPosition(n)},addCssRule:function(t,o){e||(e=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(e),e=e.sheet||e.styleSheet,n=e.deleteRule?"deleteRule":"removeRule",i=e.cssRules?"cssRules":"rules");var s=a.length;return a[s]=(e.cssRules||e.rules).length,e.addRule?e.addRule(t,o):e.insertRule(t+"{"+o+"}",a[s]),{get:function(t){return e[i][a[s]].style[t]},set:function(t,n){void 0!==a[s]&&(e[i][a[s]].style[t]=n)},remove:function(){!function(t){var i,o,s=a[t];if(void 0!==s)for(e[n](s),a[t]=void 0,i=t+1,o=a.length;i<o;i++)a[i]>s&&a[i]--}(s)}}},escapeCssIdentifier:function(t,e){return"string"==typeof t?t.replace(o,e||"\\$1"):t}};return s}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(35),n(3),n(2),n(1),n(34),n(674),n(152)],void 0===(a=function(t,e,n,i,a,o,s){var r={checkbox:1,radio:1,button:1},l=/\bdgrid-cell\b/,d=/\bdgrid-row\b/,c=t(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments),this.keyMap||(this.keyMap=a.mixin({},c.defaultKeyMap)),this.headerKeyMap||(this.headerKeyMap=a.mixin({},c.defaultHeaderKeyMap))},postCreate:function(){this.inherited(arguments);var t=this;function n(t){var e=t.target;return e.type&&(!r[e.type]||32===t.keyCode)}function a(a){var o=t.cellNavigation,r=o?l:d,c=a===t.headerNode,u=a;function h(){if(t._focusedHeaderNode&&(t._focusedHeaderNode.tabIndex=-1),t.showHeader){if(o){for(var e,n=t.headerNode.getElementsByTagName("th"),i=0;e=n[i];++i)if(r.test(e.className)){t._focusedHeaderNode=u=e;break}}else t._focusedHeaderNode=u=t.headerNode;u&&(u.tabIndex=t.tabIndex)}}c?(h(),e.after(t,"renderHeader",h,!0)):e.after(t,"renderArray",(function(e){var n=t._focusedNode||u;if(r.test(n.className)&&s.contains(a,n))return e;for(var i,o=a.getElementsByTagName("*"),l=0;i=o[l];++l)if(r.test(i.className)){n=t._focusedNode=i;break}return n.tabIndex=t.tabIndex,e})),t._listeners.push(i(a,"mousedown",(function(e){n(e)||t._focusOnNode(e.target,c,e)}))),t._listeners.push(i(a,"keydown",(function(e){if(!e.metaKey&&!e.altKey){var i=t[c?"headerKeyMap":"keyMap"][e.keyCode];i&&!n(e)&&i.call(t,e)}})))}this.tabableHeader&&(a(this.headerNode),i(this.headerNode,"dgrid-cellfocusin",(function(){t.scrollTo({x:this.scrollLeft})}))),a(this.contentNode),this._debouncedEnsureScroll=s.debounce(this._ensureScroll,this)},removeRow:function(t){if(!this._focusedNode)return this.inherited(arguments);var e,n=this,i=document.activeElement===this._focusedNode,a=this[this.cellNavigation?"cell":"row"](this._focusedNode),o=a.row||a;(t=t.element||t)===o.element&&((e=this.down(o,!0))&&e.element!==t||(e=this.up(o,!0)),this._removedFocus={active:i,rowId:o.id,columnId:a.column&&a.column.id,siblingId:e&&e.element!==t?e.id:void 0},setTimeout((function(){n._removedFocus&&n._restoreFocus(o.id)}),0),this._focusedNode=null),this.inherited(arguments)},insertRow:function(){var t=this.inherited(arguments);return this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(t),t},_restoreFocus:function(t){var e,i,a=this._removedFocus;if((e=(t=t&&this.row(t))&&t.element&&t.id===a.rowId?t:void 0!==a.siblingId&&this.row(a.siblingId))&&e.element){if(!e.element.parentNode.parentNode)return void(a.wait=!0);void 0!==a.columnId&&(i=this.cell(e,a.columnId))&&i.element&&(e=i),a.active&&0!==e.element.offsetHeight?this._focusOnNode(e,!1,null):(n.add(e.element,"dgrid-focus"),e.element.tabIndex=this.tabIndex,this._focusedNode=e.element)}delete this._removedFocus},addKeyHandler:function(t,n,i){return e.after(this[i?"headerKeyMap":"keyMap"],t,n,!0)},_ensureRowScroll:function(t){var e=this.getScrollPosition().y;e>t.offsetTop?this.scrollTo({y:t.offsetTop}):e+this.contentNode.offsetHeight<t.offsetTop+t.offsetHeight&&this.scrollTo({y:t.offsetTop-this.contentNode.offsetHeight+t.offsetHeight})},_ensureColumnScroll:function(t){var e=this.getScrollPosition().x,n=t.offsetLeft;if(e>n)this.scrollTo({x:n});else{var i=this.bodyNode.clientWidth,a=t.offsetWidth,o=n+a;e+i<o&&this.scrollTo({x:i>a?o-i:n})}},_ensureScroll:function(t,e){this.cellNavigation&&(this.columnSets||this.subRows.length>1)&&!e&&this._ensureRowScroll(t.row.element),this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(t.element)},_focusOnNode:function(t,e,o){var s,r,c,u,h,p="_focused"+(e?"Header":"")+"Node",m=this[p],g=this.cellNavigation?"cell":"row",f=this[g](t);if(t=f&&f.element){if(this.cellNavigation)for(h=0,c=(s=t.getElementsByTagName("input")).length;h<c;h++)if((-1!==(r=s[h]).tabIndex||"_dgridLastValue"in r)&&!r.disabled){r.focus(),u=!0;break}null!==o&&((o=a.mixin({grid:this},o)).type&&(o.parentType=o.type),o.bubbles||(o.bubbles=!0)),m&&(n.remove(m,"dgrid-focus"),m.removeAttribute("tabindex"),o&&(o[g]=this[g](m),i.emit(m,"dgrid-cellfocusout",o))),m=this[p]=t,o&&(o[g]=f);var v=this.cellNavigation?l:d;!u&&v.test(t.className)&&(t.tabIndex=this.tabIndex,t.focus()),n.add(t,"dgrid-focus"),o&&i.emit(m,"dgrid-cellfocusin",o),this._debouncedEnsureScroll(f,e)}},focusHeader:function(t){this._focusOnNode(t||this._focusedHeaderNode,!0)},focus:function(t){var e=t||this._focusedNode;e?this._focusOnNode(e,!1):this.contentNode.focus()}}),u=c.moveFocusVertical=function(t,e){var n=this.cellNavigation,i=this[n?"cell":"row"](t),a=n&&i.column.id,o=this.down(this._focusedNode,e,!0);n&&(o=this.cell(o,a)),this._focusOnNode(o,!1,t),t.preventDefault()},h=c.moveFocusUp=function(t){u.call(this,t,-1)},p=c.moveFocusDown=function(t){u.call(this,t,1)},m=c.moveFocusPageUp=function(t){u.call(this,t,-this.pageSkip)},g=c.moveFocusPageDown=function(t){u.call(this,t,this.pageSkip)},f=c.moveFocusHorizontal=function(t,e){if(this.cellNavigation){var n=!this.row(t),i=this["_focused"+(n?"Header":"")+"Node"];this._focusOnNode(this.right(i,e),n,t),t.preventDefault()}},v=c.moveFocusLeft=function(t){f.call(this,t,-1)},b=c.moveFocusRight=function(t){f.call(this,t,1)},y=c.moveHeaderFocusEnd=function(t,e){var n;this.cellNavigation&&(n=this.headerNode.getElementsByTagName("th"),this._focusOnNode(n[e?0:n.length-1],!0,t)),t.preventDefault()},w=c.moveHeaderFocusHome=function(t){y.call(this,t,!0)},_=c.moveFocusEnd=function(t,n){var i,s=this.cellNavigation,r=this.contentNode,l=n?0:r.scrollHeight,d=r.scrollTop+l,c=r[n?"firstChild":"lastChild"],u=c.className.indexOf("dgrid-preload")>-1,h=u?c[(n?"next":"previous")+"Sibling"]:c,p=h.offsetTop+(n?0:h.offsetHeight);if(u){for(;h&&h.className.indexOf("dgrid-row")<0;)h=h[(n?"next":"previous")+"Sibling"];if(!h)return}!u||c.offsetHeight<1?(s&&(h=this.cell(h,this.cell(t).column.id)),this._focusOnNode(h,!1,t)):(o("dom-addeventlistener")||(t=a.mixin({},t)),i=e.after(this,"renderArray",(function(e){var a=e[n?0:e.length-1];return s&&(a=this.cell(a,this.cell(t).column.id)),this._focusOnNode(a,!1,t),i.remove(),e}))),d===p&&t.preventDefault()},C=c.moveFocusHome=function(t){_.call(this,t,!0)};function k(t){t.preventDefault()}return c.defaultKeyMap={32:k,33:m,34:g,35:_,36:C,37:v,38:h,39:b,40:p},c.defaultHeaderKeyMap={32:k,35:y,36:w,37:v,39:b},c}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(27),n(14)],void 0===(a=function(t,e,n){return t(null,{minSize:0,maxSize:1/0,layoutPriority:0,showTitle:!0,buildRendering:function(){n.add(this),this.inherited(arguments),this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var t=n.getEnclosingWidget(this.domNode.parentNode);t&&t.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments),n.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(t){t&&e.setMarginBox(this.domNode,t),this.inherited(arguments)},_set:function(t,e){this[t]=e},watch:function(){},getParent:function(){return n.getEnclosingWidget(this.domNode.parentNode)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(24),n(1832),n(488),n(480)],void 0===(a=function(t,e,n,i,a){var o=t([e],{templateString:n,constructor:function(t){var e=t.stats;if(!1===Array.isArray(e))throw new Error("Must provide `stats` prop with type `array`");if(!1===a(e,(function(t){var e=t instanceof i;return Array.isArray(t)?a(t,(function(t){return t instanceof i})):e})))throw new Error("`stats` prop may contain only `mojo.report.Stat`s or arrays of `mojo.report.Stat`s");var n=t.format;if("string"!=typeof n)throw new Error("Must provide `format` prop with type `string`");if(-1===o.FORMATS.indexOf(n)){var s=o.FORMATS.map((function(t){return"'"+t+"'"})).join(" ");throw new Error("`format` prop value must be one of: "+s+". Found '"+n+"'")}this.state={stats:e,format:n,FORMAT_FACTOID:o.FORMAT_FACTOID,FORMAT_BREAKDOWN:o.FORMAT_BREAKDOWN}}});return o.FORMAT_FACTOID="factoid",o.FORMAT_BREAKDOWN="breakdown",o.FORMATS=[o.FORMAT_FACTOID,o.FORMAT_BREAKDOWN],o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(1),n(1860),n(1021),n(1865),n(1866),n(1867),n(1868),n(1869),n(424),n(1870),n(1871),n(1872),n(1873),n(1875),n(1877),n(38)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){function b(e,i){var a,o=i.options;if(o instanceof Array)a=o;else{if("string"!=typeof o)throw new Error("invalid input config:"+JSON.stringify(i));a=e.optionValues[o]}var s=n.clone(a);return s=t.map(s,(function(t){return t.label=null!==t.label?v.encode(t.label.toString()):"",t}))}var y={date:function(t,e){return a({configs:t,inputConfig:e})},dateRange:function(t,e){return o({configs:t,inputConfig:e})},multiText:function(t,e){return h({configs:t,inputConfig:e})},select:function(t,e){var n=b(t,e);return new c({class:"condition-value",options:n,configs:t,inputConfig:e})},multiSelect:function(t,e){var n=b(t,e);return new u({options:n,nounLabel:e.noun_label,configs:t,inputConfig:e})},extraSelect:function(t,e){var n=b(t,e);return new s({configs:t,inputConfig:e,ops:n})},filterSelect:function(t,e){var n=b(t,e);return new r({configs:t,inputConfig:e,options:n})},rating:function(t,e){return new g({configs:t,inputConfig:e})},text:function(t,e){return f({configs:t,inputConfig:e})},currency:function(t,e){return i({configs:t,inputConfig:e})},numberDays:function(t,e){return m({configs:t,inputConfig:e})},integer:function(t,e){return d({configs:t,inputConfig:e})},inlineExtraSelectStore:function(t,e){var n=b(t,e);return new l({configs:t,inputConfig:e,ops:n})},product:function(t,e){var n=b(t,e);return new p({configs:t,inputConfig:e,options:n})}};return{create:function(t,e){var n=e.type;if(!y[n])throw new Error("Unable to render input of type:"+n);var i=y[n](t,e);return i.segmentInputType=n,i.startup&&i.startup(),i}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(17),n(16)],void 0===(a=function(t,e,n){function i(t,e){return(t.nested_conditions||[]).filter((function(t){return t.field===e}))}var a=t(null,{field:null,nested_fields:null,ops:null,constructor:function(t){this.field=t.field,this.label=t.label,this.category=t.category,this.ops=t.ops,this.nested_fields=t.nested_fields},displaysNameBeforeOperator:function(t){return"contact_event_property"===this.field&&"is"===t},supportsMultipleNestedConditions:function(t){return"contact_event"===this.field&&"contact_event_property"===t},nestedFieldsFromAST:function(t){var e=this.nested_fields||[];return(e=(e=e.map((function(t){return JSON.parse(JSON.stringify(t))}))).filter(function(e){return this._shouldShowNestedFieldGivenAST(t,e)}.bind(this))).forEach(function(e){if("contact_event"===this.field||"website_engagement"===this.field){if("contact_event_property"===e.field){if(!(a=i(t,"contact_event_name")[0]))return;var n=a.value;e.ops.forEach((function(t){"is"===t.value&&(t.input.options="contact_event_property_name_options_for_event_"+n)}))}if("contact_event_property0"===e.field){if(!(a=i(t,"contact_event_name")[0]))return;n=a.value;e.ops.forEach((function(t){"is"===t.value&&(t.input.options="web_engagement_property_options_for_event_"+n)}))}}else if("contact_event"===this.field&&"contact_event_property"===e.field){var a;if(!(a=i(t,"contact_event_name")[0]))return;n=a.value;e.ops.forEach((function(t){"is"===t.value&&(t.input.options="contact_event_property_name_options_for_event_"+n)}))}}.bind(this)),e},_shouldShowNestedFieldGivenAST:function(t,e){if("email_campaign_activity"===this.field){if("timeframe"===e.field){var n=i(t,"campaign")[0];return n&&null===n.op.match(/(any|all)last\d/)}if("click_url"===e.field)return"click"===t.op||"not_click"===t.op}return!0},clone:function(){return new a({field:this.field,label:this.label,category:this.category,ops:this.ops,nested_fields:this.nested_fields})}});return a}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(13),n(8),n(78),n(327),n(10)],void 0===(a=function(t,e,n,i,a,o){return t([e],{pageTabs:null,activeSection:null,userAttrs:null,modules:null,onReady:function(){var t=new i;if(t.createContentPanes(this.$el.informationTabs,this,window._mcaModules),this.tabContainer=t,this.modules=this.tabContainer.viewModule,"list-details"===this.activeSection){var e=new URL(window.location.href).searchParams.get("list_id");e&&this.viewListDetails(e)}},viewListDetails:function(t){var e=this,i={title:"List Details: "+t,href:n.toUrl("/peaches2/users/lists?user_id="+e.userAttrs.userId+"&_s=list-details&list_id="+t),stub:"list-details",closable:!0,onClose:function(){return e.tabContainer.listDetailsSection=null,!0},onDownloadEnd:function(){e.listDetailsInit(t,this)}};this.tabContainer.addNewPane(i,!0)},listDetailsInit:function(t,e){var i=this;this.parse(),this._loadCharts(this.userAttrs.userId,t);var a=this.$widget.detailsGrowthSelect;a.set("onChange",(function(){var t=a.attr("value"),o=n.toUrl("/peaches2/users/lists",{_s:"list-details",user_id:i.userAttrs.userId,list_id:t});e.set("href",o).then((function(){i._loadCharts(i.userAttrs.userId,t)})),e.set("title","Login Details: "+t)}))},_loadCharts:function(t,e){o.byId("campaign-history")&&new a.PerformanceOverviewChart("campaign-history",n.toUrl("/peaches2/users/lists/campaign-history-json-data",{user_id:t,list_id:e})),o.byId("campaign-abuse-history")&&new a.AbusePerformanceOverviewChart("campaign-abuse-history",n.toUrl("/peaches2/users/lists/campaign-abuse-history-json-data",{user_id:t,list_id:e}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(13),n(7),n(2),n(68),n(69)],void 0===(a=function(t,e,n,i,a,o){return t([e],{pageJs:null,elId:null,onReady:function(){var t={target:"emails-left-list",filters:[{label:"Since",key:"from",type:"text"},{label:"Up to",key:"to",type:"text"}]},e=new a(t);this.$el.emailsLeftListFilters.appendChild(e.domNode);var n=new o(t);this.$el.emailsLeftListFiltersMessage.appendChild(n.domNode)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(5),n(1),n(4),n(3),n(7),n(2),n(31),n(763),n(2005),n(37),n(22),n(593),n(591),n(592),n(579),n(118),n(38),n(6),n(19),n(115),n(27),n(14),n(17),n(15),n(16),n(230),n(33),n(44)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j){var E={ACTIVE:"Y",BOUNCED:"B",UNSUB:"N",TRANSACTIONAL:"T"},P="waiting",D="success",N=function(){return{status:"started"}},L=t([e,n,v],{templateString:c,showPagination:!0,persistTableSettings:!0,page:1,canSelectAll:!0,dataUrl:null,segment:null,tagFilter:null,headers:null,rows:null,emailStatus:E.ACTIVE,sortAttr:null,sortAsc:null,refreshing:!1,total:0,selectedContactCount:0,selectedContactCountAction:null,floatingHeaderEnabled:!0,showingElasticSearchSegment:!1,constructor:function(){this._syncs=[]},postMixInProperties:function(){this.options=a.mixin({pageSize:x.settings.pageSize},this.options),this._reloadNoDataMsg(),this._setDefaults()},toggleAll:function(t){for(var e in this.selected)this._validValue(e)&&!this._valueDisabled(e)&&this.selected.set(e,t)},_valueDisabled:function(t){var e=w('input[value="'+t+'"]',this.domNode)[0];if(e)return S.byNode(e.parentNode).disabled},_reloadNoDataMsg:function(){this.options.noDataDom?this.noDataMsg=w(this.options.noDataDom).html():this.noDataMsg=this.options.noDataMsg||u},_setDefaults:function(){if(this.persistTableSettings){var t=C();if(t){var e=t.split("-");e&&e.length&&i.forEach(e,a.hitch(this,(function(t){var e=t.split(":");switch(e[0]){case"p":this.page=parseInt(e[1],10);break;case"s":this.pageSize=parseInt(e[1],10);break;case"sa":this.sortAttr=e[1];break;case"so":this.sortAsc="true"==e[1]}})))}this.page<=0&&(this.page=1),this.pageSize>100&&(this.pageSize=100),this.pageSize||(this.pageSize=this.options.pageSize),this.pageSize||(this.pageSize=25),this.sortAttr?void 0===this.sortAsc&&(this.sortAsc=!1):(this.sortAttr="last_update_time",this.sortAsc=!1)}},_persistSettings:function(){if(this.persistTableSettings){var t=[];t.push("p:"+this.page),t.push("s:"+this.pageSize),this.sortAttr&&t.push("sa:"+this.sortAttr),void 0!==this.sortAsc&&t.push("so:"+this.sortAsc),C(t.join("-"),!0)}},postCreate:function(){this.showPagination&&(this.topPaging&&(this.topPaging=new g({target:this},this.topPaging)),this.topPageSizeSelect&&(this.topPageSizeSelect=new f({target:this},this.topPageSizeSelect)),this.bottomPaging&&(this.bottomPaging=new g({target:this},this.bottomPaging)),this.bottomPageSizeSelect&&(this.bottomPageSizeSelect=new f({target:this},this.bottomPageSizeSelect))),this._initSort(),this.watch("page",a.hitch(this,(function(){this.refresh(!1)}))),this.watch("pageSize",a.hitch(this,(function(){1==this.page?this.refresh(!1):this.set("page",1),x.saveSetting("vis_grid_page_size",this.pageSize)}))),this.options.wait||this.refresh(),this.watch("emailStatus",a.hitch(this,(function(){this.set("page",1),this.requery()}))),this.watch("segment",a.hitch(this,(function(){var t=this.segment;t&&"started"==t.status?this.showLoader():(this.set("page",1),this.requery())}))),x.flagIsOn(T.AM_ORGANIZE_SELECTED_CONTACTS_COUNT)&&this.watch("selectedContactCountAction",a.hitch(this,(function(t,e,n){this.updateSelectedContactCount(n)}))),this._instantiateFloatingHeader(),this.loader=new A({color:"#6dc5dc",bgColor:"#d0d0d0"}),this.loader.startup(),this.loader.placeAt(this.loaderDom)},requery:function(){this.refresh(!0)},refresh:function(t){var e=this;if(this.refreshing)return!1;this.set("refreshing",!0),this.showLoader();var n=new p,i=1e3;return function a(){e._fetchData().then((function(o){switch(o.status){case P:(i=Math.ceil(1.15*i))>1e4&&(i=1e4),setTimeout(a,i);break;case D:e._onFinishedData(o,t),n.resolve(o)}}))}(),n.promise},_onFinishedData:function(t,e){(this.segment&&"started"===this.segment.status&&(this.segment.status="finished"),this.set("total",t.count),this.total)?(this._toggleNoData(!1),this._persistSettings(),this._removeState(e),this._renderTable(e),this.set("refreshing",!1),this.hideLoader(),k.docScroll().y>this.topPosition&&w(".table-pagination")[0].scrollIntoView()):(this.set("refreshing",!1),this._toggleNoData(!0),this._publishReadyEvent())},_fetchData:function(){var t=d.get(this.dataUrl,{query:{page:this.page,page_size:this.pageSize,email_status:this.emailStatus,sort_attr:this.sortAttr,sort_asc:this.sortAsc,use_segment:null!==this.segment||null!==this.tagFilter},handleAs:"json"});return t.then(a.hitch(this,(function(t){this.headers=t.headers,this.rows=t.rows}))),t},showLoader:function(){s.add(this.subscriberTableOverlay,"loading")},hideLoader:function(){s.remove(this.subscriberTableOverlay,"loading")},showSubscribers:function(){this.set("emailStatus",E.ACTIVE)},showBounces:function(){this.set("emailStatus",E.BOUNCED)},showUnsubscribes:function(){this.set("emailStatus",E.UNSUB)},showTransactional:function(){this.set("emailStatus",E.TRANSACTIONAL)},setSegment:function(t){this.set("segment",t)},setToCustomSegment:function(){this.setSegment({status:"started"})},setTagFilter:function(t){this.set("tagFilter",t)},clearSegment:function(){this.set("segment",null)},clearSelectionModel:function(t){for(var e in this.selected)this.selected.hasOwnProperty(e)&&(!this._validValue(e)||!t&&this._valueSelected(e)||(this.selected.set(e,!1),delete this.selected[e]))},_toggleNoData:function(t){var e;e=this.options.noMembersMsg&&!this.segment&&this.emailStatus==E.ACTIVE?this.options.noMembersMsg:this.noDataMsg,t?(o.place("<div>"+e+"</div>",this.noData,"only"),s.add(this.dataTable,"hide"),s.remove(this.noData,"hide")):(s.remove(this.dataTable,"hide"),s.add(this.noData,"hide"))},_renderTable:function(t){var e=this,n=e.rows.length;if(0===n)return e.set("total",0),void e._toggleNoData(!0);this._publishReadyEvent(),o.empty(e.accessibleTableHeader),o.empty(e.accessibleTable);var l=[],d=o.create("tr");if(i.forEach(e.headers,(function(t){var i;switch(t.id){case"bulk_check":i=o.create("td",{class:"row-head row-select background-color--light",role:"columnheader",innerHTML:t.label},d),n>5&&o.create("div",{class:"vis-row-selector"},i);break;case"email_link":case"view_activity_link":i=o.create("td",{class:"row-head background-color--light",role:"columnheader",innerHTML:t.label},d);break;case"list_email_id":break;default:i=o.create("td",{class:"background-color--light",role:"columnheader",innerHTML:y.encode(t.label)},d)}t.sortable&&(r.set(i,"data-mojo-table-sort",t.id),s.add(i,"sortable"),e.sortAttr===t.id&&e._addSortClass(i))})),"bulk_check"!==e.headers[0].id?(s.add(e.accessibleTableHeader,"no-checkbox"),s.add(e.accessibleTable,"no-checkbox")):(s.remove(e.accessibleTableHeader,"no-checkbox"),s.remove(e.accessibleTable,"no-checkbox")),1===e.headers.length&&(s.add(e.accessibleTableHeader,"email-only"),s.add(e.accessibleTable,"email-only")),i.forEach(e.rows,(function(t){var n,a,s=o.create("tr");n=0,i.forEach(e.headers,(function(r){if(t.hasOwnProperty(r.id)){var l=r.id;switch(l){case"email_link":case"view_activity_link":a=o.create("td",{class:"row-head",title:"View Profile"});var d=o.create("div",{class:"profile-view",innerHTML:t[l]},a);o.place(d,a),o.place(a,s),n++;break;case"bulk_check":var c=o.toDom(t.email_link);o.create("td",{class:"row-head profile-select",innerHTML:t[l],title:"Email address: "+c.innerHTML},s),n++;break;case"rating":o.create("td",{innerHTML:t[l],title:"Member Rating"},s),n++;break;case"contact_tags":o.create("td",{innerHTML:t[l],title:"Contact Tags"},s),n++;break;default:if(i.indexOf(e.options.blacklist,l)<0)if("string"==typeof t[l]&&-1!=t[l].indexOf("<br")){var u=o.create("td",{title:e.headers[n].label},s);o.create("div",{class:"address",innerHTML:t[l]},u)}else o.create("td",{innerHTML:t[l],title:e.headers[n].label},s);n++}}})),l.push(s)})),n>5?(o.place(d,e.accessibleTableHeader),s.remove(w(".table-body")[0],"few-rows")):(o.place(d,e.accessibleTable),s.add(w(".table-body")[0],"few-rows")),i.forEach(l,(function(t){o.place(t,e.accessibleTable)})),h.parse(e.accessibleTable),e.resize(),e.rowSelector&&e.rowSelector.destroyRecursive(),e.rowSelector=new m({target:e,canSelectAll:e.canSelectAll},w(".vis-row-selector",e.accessibleTableHeader)[0]),e.rowSelector=new m({target:e,canSelectAll:e.canSelectAll},w(".vis-row-selector",e.accessibleTable)[0]),x.flagIsOn(T.AM_ORGANIZE_SELECTED_CONTACTS_COUNT))var c=this.refreshing?e.selectedContactCount:0;w(".selectCheckBox",this.domNode).forEach(a.hitch(this,(function(n){var i=S.byNode(n);if(t||1!=e.selected[i.value]&&1!=e.allAll)e.selected[i.value]=!1;else{var a=i.disabled;i.set("checked",!a),e.selected[i.value]=!a}e._syncs.push(b(e.selected,i.value,i,"checked")),x.flagIsOn(T.AM_ORGANIZE_SELECTED_CONTACTS_COUNT)&&e._syncs.push(b(e.selected,i.value,e,"selectedContactCountAction",{bindDirection:b.from}))}))),x.flagIsOn(T.AM_ORGANIZE_SELECTED_CONTACTS_COUNT)&&(e.selectedContactCount=c)},updateSelectedContactCount:function(t){if(!this.refreshing){switch(t){case"selectAll":this.set("selectedContactCount",this.total);break;case"deselectAll":this.set("selectedContactCount",0);break;case"selectVisible":var e=0;Object.values(this.selected).forEach((function(t){!0===t&&e++})),this.set("selectedContactCount",e);break;case!1:this.set("selectedContactCount",this.selectedContactCount-1);break;default:this.set("selectedContactCount",this.selectedContactCount+1)}this.selectedContactCountAction=null}},setTopPosition:function(){var t=I.getTabletNaviHeight();window.innerWidth<=1024?this.topPosition=k.position(w(".st")[0],!0).y-t:this.topPosition=k.position(w(".st")[0],!0).y},resize:function(){if(this.rows.length>5){var t=w("td",w(".table-header tr")[0]),e=w("td",w(".table-contents tr")[0]),n=t.map((function(t){return t.clientWidth})),a=e.map((function(t){return t.clientWidth}));i.forEach(t,(function(t,e){var i=Math.max(a[e],n[e]);t.style.width=i+"px",t.style.minWidth=i+"px"})),i.forEach(e,(function(i,o){var s=Math.max(n[o],a[o]);if(i.style.width=s+"px",i.style.minWidth=s+"px",o===e.length-1){var r=w(".table-body")[0],l=w(".table-contents")[0];r.clientWidth-l.clientWidth-s>s?(i.style.width="100%",t[o].style.width="100%"):i.style.width=s+"px"}}))}else{e=w("td",w(".table-contents tr")[0]);var o=w(".table-body")[0],s=w(".table-contents")[0],r=e[e.length-1];o.clientWidth-s.clientWidth-r.clientWidth>0&&(r.style.width="100%")}},_initSort:function(){var t=this;this.own(l(t.domNode,".sortable:click",(function(){if(!t.refreshing){var e=t.sortAttr;t.sortAttr=r.get(this,"data-mojo-table-sort"),t.sortAsc=e!=t.sortAttr||!t.sortAsc,t._addSortClass(this),t.requery()}})))},_addSortClass:function(t){w("th, .h-head").removeClass("sort-a sort-d sorted"),s.add(t,this.sortAsc?"sort-a sorted":"sort-d sorted")},_instantiateFloatingHeader:function(){if(this.floatingHeaderEnabled){var t=this,e=0;l(window,"resize",(function(){var n=w("td",w(".table-header tr")[0]),i=w("td",w(".table-contents tr")[0]),a=w(".table-body")[0];if(null!=a){var o=w(".table-contents")[0];i[i.length-1].style.width=0,n[n.length-1].style.width=0;var s=Math.max(n[n.length-1].clientWidth,i[i.length-1].clientWidth);e=a.clientWidth-o.clientWidth-s,j("chrome")&&(e-=6),e>s?(n[n.length-1].style.width=e+"px",i[i.length-1].style.width=e+"px"):(n[n.length-1].style.width=s+"px",i[i.length-1].style.width=s+"px"),t._stickyHeader()}})),document.querySelector("#wrap").addEventListener("scroll",(function(){t._stickyHeader()})),t.scrollCache=0,l(t.accessibleTableBody,"scroll",(function(){this.scrollLeft!==t.scrollCache&&(t.accessibleTableHeaderBody.scrollLeft=this.scrollLeft,t.scrollCache=this.scrollLeft)})),t.accessibleTableHeaderBody&&l(t.accessibleTableHeaderBody,"scroll",(function(){this.scrollLeft!==t.scrollCache&&(t.accessibleTableBody.scrollLeft=this.scrollLeft,t.scrollCache=this.scrollLeft)}))}},_stickyHeader:function(){var t=w(".subscriber-table")[0],e=w(".main")[0],n=w(".content")[0],i=w(".fixed-header")[0],a=w(".table-body")[0],o=k.position(t),r=document.querySelector(".main-navigation"),l=r?r.offsetTop+r.offsetHeight:0,d=w(".contact-table-action-bar")[0],c=d.offsetHeight,u=l+c;if(o.h){var h=k.position(e||n);o.y<u&&i?(s.add(d,"sticky"),s.add(i,"sticky"),a.style.paddingTop=c+i.offsetHeight+"px",window.innerWidth<=1024?(d.style.top=-1*h.y+l+"px",i.style.top=-1*h.y+u+"px"):(d.style.top=l+"px",i.style.top=u+"px")):(d.style.top=0,i.style.top=0,s.remove(d,"sticky"),s.remove(i,"sticky"),a.style.paddingTop="0px")}},_removeState:function(t){i.forEach(this._syncs,"item.remove();"),this._syncs=[],this.clearSelectionModel(t)},_publishReadyEvent:function(){_.publish("mojo/analytics/"+this.id+"/ready")}});return L.EMAIL_STATUS=E,L.getCustomSegment=N,L}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(4),n(7),n(5),n(97)],void 0===(a=function(t,e,n,i,a,o){return t([o],{type:"text",_name:"Text",_kbLink:"https://mailchimp.com/help/use-text-content-blocks/",_defaultText:"This is a text block. You can use it to add text to your template.",constructor:function(){this.content=[this._defaultText],this.numberOfColumns=1,this.splitOption=[100],this.selectedColumn=0,this.styles=[{name:"Text style",selector:".mcnTextContent, .mcnTextContentLeft, .mcnTextContentRight, .mcnTextContent p, .mcnTextContentLeft p, .mcnTextContentRight p",props:{color:{value:""},"font-family":{value:""},"font-size":{value:""},"font-style":{value:""},"font-weight":{value:""},"line-height":{value:""},"text-align":{value:""}}}]},onLinkUpdate:function(t,o,s){var r=this.getContent(),l=e("a",r)[s];if(l&&i.get(l,"href")==t){var d=e(".mcnTextContentContainer",r),c=e(l).parents(".mcnTextContentContainer")[0],u=a.indexOf(d,c);if(u<0)return n.destroy(r),this.inherited(arguments);var h=a.indexOf(e("a",c),l),p=n.create("div"),m=n.toDom(this.content[u]);return n.place(m,p),i.set(e("a",p)[h],"href",o),this.content[u]=e(p).html(),n.destroy(p),n.destroy(r),this.save()}return n.destroy(r),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(2),n(6),n(59),n(4),n(19),n(25),n(39),n(146),n(404),n(792),n(793),n(794),n(632),n(795),n(804),n(805),n(791),n(796),n(802),n(803),n(95),n(16),n(473),n(17),n(15),n(2020),n(2021),n(150)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E){var P="Image Card",D="Image + Caption",N="Video",L=t([c],{containerTpl:'<div class="style-field selfclear style-{styleSuffix}"><label>{label}</label></div>',postCreate:function(){this.inherited(arguments),this.skipContainer||(this.inputContainerNode=s.toDom(n.replace(this.containerTpl,{styleSuffix:this.label.toLowerCase().replace(" ",""),label:this.label})),s.place(this.domNode,this.inputContainerNode))}});var M=t([l,d],{sectionName:"",styles:null,templateString:j,isOptional:!1,styleTopics:null,constructor:function(t){this._inputBySelectorMap={},this.inputs=[],this.selectors=[],this._stylesBySelectorMap={},this.styleTopics=t.styleTopics},postMixInProperties:function(){e.forEach(this.styles,n.hitch(this,(function(t){-1===this.selectors.indexOf(t.selector)&&this.selectors.push(t.selector),this._stylesBySelectorMap[t.selector]||(this._stylesBySelectorMap[t.selector]={}),this._stylesBySelectorMap[t.selector][t.property]=t})))},postCreate:function(){this._createInputs(),this.own(i(this.headerNode,"click",n.hitch(this,(function(){e.forEach(this.selectors,(function(t){Preview.highlightEditable(t)}))}))))},updateValue:function(t,e,n){return this._hasAllBgProperties(t)&&this._isBgProperty(e)?(this._inputBySelectorMap[t]["--mc-bg"].updateValue(e,n),!0):this._isFontProperty(e)?(this._inputBySelectorMap[t]["--mc-font"].updateValue(e,n),!0):!(!this._inputBySelectorMap[t]||!this._inputBySelectorMap[t][e])&&(this._inputBySelectorMap[t][e].set("value",n,!1),!0)},revert:function(){e.forEach(this.inputs,"item.reset();")},_hasAllBgProperties:function(t){return e.every(x.BG_PROPS,n.hitch(this,(function(e){return this._stylesBySelectorMap[t].hasOwnProperty(e)})))},_isBgProperty:function(t){return-1!==x.BG_PROPS.indexOf(t)},_isFontProperty:function(t){return-1!==x.FONT_PROPS.indexOf(t)},_createInputs:function(){for(var t in this._stylesBySelectorMap)if(this._stylesBySelectorMap.hasOwnProperty(t)){var n=this._stylesBySelectorMap[t],i={};this._hasAllBgProperties(t)&&(this._createBackgroundInput(t),e.forEach(x.BG_PROPS,(function(t){i[t]=!0})));var a={};e.forEach(x.FONT_PROPS,(function(t){n.hasOwnProperty(t)&&(a[t]=n[t].value,i[t]=!0)})),Object.keys(a).length&&(d=this.sectionName,["Button hover style","Form input style"].indexOf(d)>-1&&(a.label="Text color"),this._createFontInput(t,a));var o={};x.PADDING_PROPS.forEach((function(t){n.hasOwnProperty(t)&&(o[t]=n[t].value)}));var s=Object.keys(o);for(var r in 4===s.length&&(s.forEach((function(t){i[t]=!0})),this._createPaddingInput(t,o)),n){var l;if(!i[r])this.styleTopics&&this.styleTopics.hasOwnProperty(r)&&(l=this.styleTopics[r]),this._createSinglePropertyInput(n[r],l)}}var d},_createFontInput:function(t,e){var n=new w({selector:t,properties:e,isOptional:this.isOptional,useExtendedWebFonts:window.app&&"page"===window.app.campaignType});n.startup(),s.place(n.domNode,this.domNode),this._addInputToMap(t,"--mc-font",n),this.connect(n,"onChange",(function(e,i){var a=this._stylesBySelectorMap[t][e];this.onChange(n.selector,e,i,a.important)}))},_createBackgroundInput:function(t){var e=this._stylesBySelectorMap[t][x.BG_COLOR],n=this._stylesBySelectorMap[t][x.BG_IMAGE],i=this._stylesBySelectorMap[t][x.BG_POSITION],a=this._stylesBySelectorMap[t][x.BG_REPEAT],o=this._stylesBySelectorMap[t][x.BG_SIZE],r=window.app&&"page"===window.app.campaignType,l=new y({selector:t,color:e.value,image:n.value,position:i.value,repeat:a.value,size:o.value,canAddColorOverlay:r});l.startup(),this.inputs.push(l),s.place(l.domNode,this.domNode),this._addInputToMap(t,"--mc-bg",l),this.connect(l,"onChange",(function(e,n){var i=this._stylesBySelectorMap[t][e];this.onChange(l.selector,e,n,i.important)}))},_createPaddingInput:function(t,e){var n=new C({selector:t,properties:e});n.startup(),n.placeAt(this.domNode),this._addInputToMap(t,"padding",n),this.connect(n,"onChange",function(e,i){var a=this._stylesBySelectorMap[t][e];this.onChange(n.selector,e,i,a.important)}.bind(this))},_createSinglePropertyInput:function(t,e){var i;switch(t.property){case"background-color":i=new u(n.mixin(t,{valueOnEmpty:"transparent",noColorEnabled:!0}));break;case"box-shadow":i=new p(t);break;case"border-color":i=new u(t);break;case"border-top":case"border-left":case"border-right":case"border-bottom":case"border":i=new h(t);break;case"display":i=new m(t);break;case"visibility":i=new VisibilityInput(t);break;case"max-width":i=new g(t),".contentContainer"===t.selector&&(t.label="Width",i=new v(t));break;case"width":i=t.editorInputType&&"percentage"===t.editorInputType?new b(t):new g(t);break;case"height":case"margin":case"padding":case"padding-top":case"padding-bottom":case"padding-right":case"padding-left":i=new g(t);break;case"border-radius":t.label="Rounded corners",t.sliderLabels=["Less","More"],i=new _(t);break;case"flex":i=new f(t);break;default:i=new L(t)}return this.connect(i,"onChange",(function(n){var a=i.get("value");n&&I.flagIsOn(S.NEAPOLITAN_ONCHANGE_STYLE_INPUT)&&(a=n),this.onChange(i.selector,i.property,a,t.important),e&&T.globalPublish(e)})),i?(i.startup(),this.inputs.push(i),s.place(i.inputContainerNode,this.domNode),this._addInputToMap(t.selector,t.property,i),i):null},_addInputToMap:function(t,e,n){this._inputBySelectorMap[t]||(this._inputBySelectorMap[t]={}),this._inputBySelectorMap[t][e]=n},onChange:function(t,e,n,i){}});return t([l,d,E],{templateString:A,inlineStyleListener:null,isOptional:!1,styleTopics:null,_silentChanges:!1,constructor:function(){this.title="",this.styles=[],this.sections=[],this._sectionsBySelectorMap={},this._setupInlineStyleWarningListener()},destroy:function(){this.inlineStyleListener&&this.inlineStyleListener.remove(),this.inherited(arguments)},postCreate:function(){var t=n.clone(this.styles);e.forEach(t,(function(t){for(var e in t.props){t.props[e].value||(t.props[e].value="");var n=t.props[e].important;n||(n=null!==t.props[e].value.match("!important")),t.props[e].important=n}})),this.changedStyles=t,this.changeSet=null,e.forEach(t,n.hitch(this,(function(t,i){var a=[];for(var r in t.props){var l=t.props[r],d=l.selector||t.selector,c=l.important,u=l.label||this._getStyleLabel(r),h=t.props[r].hasOwnProperty("isOptional")?t.props[r].isOptional:this.isOptional,p=t.props[r].value;c&&(p=o.trim(p.replace("!important","")));var m={};n.mixin(m,l,{value:p,important:c,selector:d,property:r,isOptional:h,label:u});var g=t.props[r].editorInputType;g&&(m.editorInputType=g),a.push(m)}t.name&&"Caption"===t.name&&(t.name=this._getStyleSectionName(this.type,t.name));var f=new M({sectionName:t.name?t.name:"",styles:a,isOptional:this.isOptional,styleTopics:this.params.styleTopics||null});f.startup(),s.place(f.domNode,this.styleForm),this.sections.push(f),e.forEach(f.selectors,n.hitch(this,(function(t){this._sectionsBySelectorMap[t]||(this._sectionsBySelectorMap[t]=[]),this._sectionsBySelectorMap[t].push(f)}))),this.connect(f,"onChange",(function(e,n,i,a){this.changeSet=this.changeSet||{},this.changeSet[e]||(this.changeSet[e]={}),this.changeSet[e][n]={value:i,important:a},t.props[n].value=i,this._silentChanges||this.onChange(this.changedStyles,{value:i,selector:e,important:a,property:n})}))}))),this.backBtn&&this.connect(this.backBtn,"click","_onSave"),this.cancelBtn&&this.connect(this.cancelBtn,"click","_onCancel"),this.saveBtn&&this.connect(this.saveBtn,"click","_onSave")},_setupInlineStyleWarningListener:function(){this.inlineStyleListener=r.subscribe("current/block/has/inline/style",n.hitch(this,(function(t){if(t.hasStyles){var e=new k({title:"Content tab vs. Style",message:"It looks like you're using inline styles for your content, which may override these changes.",type:"error"});s.place(e.domNode,a('[data-js-el="styleHeader"]',this.styleForm)[0],"after")}})))},_getStyleSectionName:function(t,e){var n=e;switch(t){case P:case D:case N:n="Text style"}return n},updateInputs:function(t){this._silentChanges=!0;t=n.clone(t);e.forEach(t,(function(t){for(var e in t.props){t.props[e].value||(t.props[e].value="");var n=t.props[e].important;n||(n=null!==t.props[e].value.match("!important")),t.props[e].important=n}})),e.forEach(t,n.hitch(this,(function(t){for(var n in t.props){var i=t.props[n].selector||t.selector,a=t.props[n].value;a=o.trim(a.replace("!important","")),this._sectionsBySelectorMap[i]&&e.forEach(this._sectionsBySelectorMap[i],(function(t){t.updateValue(i,n,a)}))}}))),this._silentChanges=!1},_onCancel:function(t){t.stopPropagation(),t.preventDefault(),this.cancel=!0,this.onCancel(this.styles),this.done()},revert:function(){this._silentChanges=!0,e.forEach(this.sections,"item.revert();"),setTimeout(n.hitch(this,(function(){this._silentChanges=!1,this.changeSet=null,this.onRevert(this.styles)}),0))},_onSave:function(t){t.stopPropagation(),t.preventDefault(),this.save(),this.done()},save:function(){this.onSave(this.getStyles(),this.changeSet),this.changeSet=null,!0===window.app.isWebsitePage&&window.ga("send","event","Website Builder","Edit Website Design-Content-Design","Clicked / Save")},onChange:function(t,e){},onCancel:function(t){},onSave:function(t,e){},onRevert:function(t){},getStyles:function(){return this.changedStyles},_getStyleLabel:function(t){switch(t){case x.BG_COLOR:return"Background";case x.COLOR:return"Text Color";case x.FLEX:return"Width";default:return t.replace(/-/g," ")}}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(93),n(151),n(1),n(2070),n(1043),n(1044),n(1045),n(28),n(9),n(41),n(38),n(111)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([e,n],{type:"rssItems",templateString:a,presetsLabel:"RSS Items Style",constructor:function(){this.contentPresets={excerpts:{label:"Excerpts",content:o},titles:{label:"Titles Only",content:s},full:{label:"Full Content",content:r},custom:{label:"Custom",content:r}}},postCreate:function(){this.inherited(arguments);var t=[];for(var e in this.contentPresets)t.push({value:e,label:this.contentPresets[e].label});this.RSSItemsStyleInput=new c({options:t}),this.RSSItemsStyleInput.placeAt(this.presetContainer),this.sync("selectedPreset",this.RSSItemsStyleInput,"value"),this.watch("selectedPreset",i.hitch(this,(function(t,e,n){"custom"==n&&(this.block.customContent||(this.block.set("customContent",this.contentPresets.custom.content),this.showCKEditor(this.ckeditorContainer,this.timeStampContainer,this._getCustomContent()))),this.updateEditorWithContent(n)}))),this.updateEditorWithContent(this.block.selectedPreset)},updateEditorWithContent:function(t){if("custom"==t)d.set(this.ckeditorContainer,"display","block"),d.set(this.mergeTagPreviewToggle,"display","none");else{var e=dojox.html.entities.encode(this.contentPresets[t].content).replace(/\n/g,"<br />");l.set(this.mergeTagPreview,e),d.set(this.ckeditorContainer,"display","none"),d.set(this.mergeTagPreviewToggle,"display","block")}},show:function(){this.publishSetup()},_getContent:function(){return"custom"==this.block.selectedPreset?this.block.customContent:this.contentPresets[this.block.selectedPreset].content},_getCustomContent:function(){return this.block.customContent?this.block.customContent:""},startup:function(){this.showCKEditor(this.ckeditorContainer,this.timestampContainer,this._getCustomContent(),i.hitch(this,"publishReady"))},onCKChange:function(){this.block.set("customContent",this.editor.getData())}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<h1 class="h1">*|RSSFEED:TITLE|*</h1>\n*|RSSFEED:DESCRIPTION|*<br />\n<br />'},function(t,e){t.exports='<h1 class="h1">*|RSSFEED:TITLE|*</h1>\nLatest posts from *|RSSFEED:URL|* on *|RSSFEED:DATE|*<br />\n<br />\n'},function(t,e){t.exports="Updates from *|RSSFEED:URL|*\n<h1>*|RSSFEED:TITLE|*</h1>\n<strong>*|RSSFEED:DESCRIPTION|*</strong><br />\n<br />\n<strong>In the *|RSSFEED:DATE|* edition:</strong><br />\n*|MC:TOC|*<br />"},function(t,e,n){var i,a;i=[n(109),n(90),n(969),n(50)],void 0===(a=function(t,e,n,i){return function(a,o){return(i(a)?t:n)(a,e(o,3))}}.apply(e,i))||(t.exports=a)},function(t,e,n){(function(t){var i,a;i=[n(0),n(1),n(22),n(18),n(47),n(8),n(16),n(17),n(236),n(453),n(401),n(1054),n(92),n(689),n(2107),n(2108),n(2112)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){var v=t([a],{pageId:null,_formConfigEndpoint:"landing-pages/save-signup-form-settings",formConfig:null,fieldsConfig:null,_allFieldTypes:["merge","group","marketing_preference"],gdprEnabled:!1,allKeyedFields:null,listSelectedIds:[],gdprSelectedIds:[],_defaultEmailField:{label:"Email Address",name:"EMAIL",type:"email",required:!0},setupFormConfig:function(t,e,n){return this._defaultEmailField.label=t,this.set("formConfig",new a(n)),this.setupFields(t,e,this.get("formConfig").get("fields")),this.get("formConfig")},updateFormConfig:function(t){return d(t,e.hitch(this,(function(t,e){this.formConfig.set(e,t)}))),this.get("formConfig")},updateFieldSelection:function(t,e){t._isSelected=e;l(this.allKeyedFields,{isMarketingPreference:!1,_isSelected:!0}),l(this.allKeyedFields,{isMarketingPreference:!0,_isSelected:!0});return e?this._addIdToSorted(t._postKeyId,t._fieldType):this._removeIdFromSorted(t._postKeyId,t._fieldType),this.updateRenderedFields(),this.fieldsConfig.set("fieldSets",this._getAvailableFields(this.allKeyedFields))},updateGdprRequired:function(t){return this.fieldsConfig.set("requireGdprSelection",t)},updateRequiredFields:function(t,e){h(this.allKeyedFields,["_postKeyId",t]).required=e,this.updateRenderedFields()},updateSortedFields:function(t,e){var n;switch(e){case"marketing_preference":n=this.gdprSelectedIds;break;default:n=this.listSelectedIds}return d(t,(function(t,e){n[e]=t})),this.updateRenderedFields(),this.fieldsConfig.set("fieldSets",this._getAvailableFields(this.allKeyedFields))},_addIdToSorted:function(t,e){switch(e){case"marketing_preference":this.gdprSelectedIds.push(t);break;default:this.listSelectedIds.push(t)}},_removeIdFromSorted:function(t,e){switch(e){case"marketing_preference":this.gdprSelectedIds=g(this.gdprSelectedIds,t);break;default:this.listSelectedIds=g(this.listSelectedIds,t)}},setupFields:function(t,n,i){return this.allKeyedFields=p(n,e.hitch(this,(function(t,e){return t._postKeyId=e,t._isSelected=!1,t.isGroup=!1,t.isMarketingPreference="marketing_preference"===this._getSelectedType(this._allFieldTypes,t),t._fieldType=this._getSelectedType(this._allFieldTypes,t),t}))),d(i,e.hitch(this,(function(t,e){var n=this._getSelectedKey(this._allFieldTypes,t),i=h(this.allKeyedFields,["_postKeyId",n.key]);i&&(i._isSelected=!0,i.required=t.required,"group"===n.type&&(i.isGroup=!0),"marketing_preference"===n.type&&(i.isMarketingPreference=!0),this._addIdToSorted(n.key,n.type))}))),this.set("fieldsConfig",new a({hasGdpr:this.get("gdprEnabled"),requireGdprSelection:this.get("formConfig").get("requireOneField"),emailLabel:t,fieldSets:this._getAvailableFields(this.allKeyedFields)})),this.get("fieldsConfig")},_getAvailableFields:function(t){var e={};if(this.get("gdprEnabled")){e.availableGdprFields=l(t,{isMarketingPreference:!0,_isSelected:!1});var n=l(t,{isMarketingPreference:!0,_isSelected:!0});e.selectedGdprFields=p(this.gdprSelectedIds,(function(t){return h(n,["_postKeyId",t])}))}e.availableListFields=l(t,{isMarketingPreference:!1,_isSelected:!1});var i=l(t,{isMarketingPreference:!1,_isSelected:!0});return e.selectedListFields=p(this.listSelectedIds,(function(t){return h(i,["_postKeyId",t])})),e},updateRenderedFields:function(){var t=[this._defaultEmailField],e=l(this.allKeyedFields,{isMarketingPreference:!1,_isSelected:!0}),n=p(this.listSelectedIds,(function(t){return h(e,["_postKeyId",t])}));if(t=t.concat(n),this.get("gdprEnabled")){var i=l(this.allKeyedFields,{isMarketingPreference:!0,_isSelected:!0}),a=p(this.gdprSelectedIds,(function(t){return h(i,["_postKeyId",t])}));t=t.concat(a)}this.formConfig.set("fields",t)},_addDefaultEmailField:function(t){return t.unshift(this._defaultEmailField)},_createPostKey:function(t,e){var n;return d(t,(function(t){if(e.hasOwnProperty(t+"_id")){var i=e[t+"_id"];n=t+"_"+i}})),n},_getSelectedKey:function(t,e){var n={};return d(t,(function(t){e.hasOwnProperty(t+"_id")&&(n.type=t,n.key=t+"_"+e[t+"_id"])})),n},_getSelectedType:function(t,e){var n;return d(t,(function(t){e._postKeyId.indexOf(t)&&(n=e._postKeyId.substring(0,e._postKeyId.lastIndexOf("_")))})),n},_serializeFields:function(t){return c(t,{name:"EMAIL"}).map(e.hitch(this,(function(t){return t.hasOwnProperty("_postKeyId")?t._postKeyId:this._createPostKey(this._allFieldTypes,t)})))},save:function(){var t=["successMessage","buttonLabel","successAction","successRedirectUrl","successPageUniqueId"],n=Object.keys(this.formConfig).reduce(function(e,n){return-1===t.indexOf(n)||(e[f(n)]=this.formConfig[n]),e}.bind(this),{}),a={styles:JSON.stringify(this.formConfig.styles),setting:JSON.stringify(n)};a.fields=JSON.stringify(this._serializeFields(this.formConfig.get("fields")));var s={};return l(this.formConfig.fields,{required:!0}).forEach(e.hitch(this,(function(t){"EMAIL"!==t.name&&(t._postKeyId||(t._postKeyId=this._createPostKey(this._allFieldTypes,t)),s[t._postKeyId]="on")}))),a.required_fields=JSON.stringify(s),a.require_one_field=JSON.stringify(this.get("fieldsConfig").get("requireGdprSelection")?"on":"off"),i.post(o.toUrl(this._formConfigEndpoint,{id:this.formConfig.pageId}),{data:a,handleAs:"json"}).then(e.hitch(this,(function(t){return this.updateFormConfig(t)})))}}),b=null;return{_getPagesFormConfig:function(){return b||(b=new v),b},setupFormConfig:function(t,e,n,i){var a=this._getPagesFormConfig();return a.set("pageId",t),a.setupFormConfig(e,n,i)},getStateful:function(){return this._getPagesFormConfig().get("formConfig")},getFieldsConfig:function(){return this._getPagesFormConfig().get("fieldsConfig")},updateFieldSelection:function(t,e){return this._getPagesFormConfig().updateFieldSelection(t,e)},updateGdprRequired:function(t){return this._getPagesFormConfig().updateGdprRequired(t)},updateRequiredFields:function(t,e){return this._getPagesFormConfig().updateRequiredFields(t,e)},updateSortedFields:function(t,e){return this._getPagesFormConfig().updateSortedFields(t,e)},setGDPREnabled:function(t){this._getPagesFormConfig().set("gdprEnabled",t)},save:function(){return this._getPagesFormConfig().save()}}}.apply(e,i))||(t.exports=a)}).call(this,n(102)(t))},function(t,e,n){var i,a;i=[n(0),n(91),n(5),n(4),n(9),n(73),n(74),n(2126),n(2127),n(2128)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t("mojo.neapolitan.renderers.ImageCardBlock",[e],{outputTplStr:r,constructor:function(){this.horizontalTemplate=new dojox.dtl.Template(l),this.verticalTemplate=new dojox.dtl.Template(d)},getOutputModel:function(t){var e=this._getWidths(t),n=t.caption;return n.image&&(n.image&&n.image.width>e.image?n.image.calculatedWidth=e.image:n.image.calculatedWidth=n.image.width),{blockHtml:this._getCaptionTemplate(t.captionPosition).render(new s({widths:e,align:t.align,position:t.captionPosition,caption:n,container:t.container,innerPadding:this.innerPadding,outerPadding:this.outerPadding,totalPadding:2*this.outerPadding,firstPadding:"0 "+this.innerPadding+"px "+this.innerPadding+"px "+this.innerPadding+"px ",lastPadding:this.innerPadding+"px "+this.innerPadding+"px 0 "+this.innerPadding+"px ",singlePadding:"0 "+this.outerPadding+"px "})),totalPadding:2*this.outerPadding,outerPadding:this.outerPadding}},_getCaptionTemplate:function(t){switch(t){case"left":case"right":return this.horizontalTemplate;case"top":case"bottom":return this.verticalTemplate;default:throw new Error("Unknown captionPosition")}},_getWidths:function(t){var e,n,i,a,o=Math.floor(t.containerWidth-2*this.outerPadding-2*this.innerPadding),s=0,r=0,l=0;switch(t.captionPosition){case"top":case"bottom":e=n=Math.floor(o-4*this.innerPadding),s=this.innerPadding,i=2*this.innerPadding,!0===t.edgeToEdge&&(n+=2*this.innerPadding,e+=4*this.innerPadding,i=0,s+=this.innerPadding,r+=this.innerPadding);break;case"left":case"right":switch(i=2*this.innerPadding,t.captionWidth){case"half":n=Math.floor((o-4*this.innerPadding)/2),a=Math.floor(o/2),e=Math.floor(a-2*this.innerPadding);break;case"one-third":n=Math.floor((o-2*this.innerPadding)/3),a=Math.floor(o-n-2*this.innerPadding),e=Math.floor(a-2*this.innerPadding);break;case"two-third":e=Math.floor((o-2*this.innerPadding)/3),n=Math.floor(o-e-4*this.innerPadding),a=Math.floor(e+2*this.innerPadding);break;case"three-quarter":e=Math.floor((o-2*this.innerPadding*2)/4),n=Math.floor(o-e-4*this.innerPadding),a=Math.floor(e+2*this.innerPadding);break;default:throw new Error("Unknown captionWidth")}t.edgeToEdge&&(e+=2*this.innerPadding,i=0,r+=2*this.innerPadding,l+=this.innerPadding,s+=this.innerPadding);break;default:throw new Error("Unknown captionPosition")}var d=this._getImageBorderOffset(t);return d<e&&(e-=d),{edgeToEdge:t.edgeToEdge,caption:n,container:a,image:e,imagePadding:i,calculatedInnerPadding:s,calculatedTextSidePadding:r,calculatedTextTopPadding:l}},_getImageBorderOffset:function(t){var e=0;return t.styles&&t.styles instanceof Array&&n.forEach(t.styles,(function(t){if("Card"===t.name&&t.props&&t.props.border){var n=t.props.border;if(n&&n.value){var o=i.create("div");a.set(o,"border",n.value);var s=a.get(o,"borderWidth");s&&(e=2*+s)}}})),e}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(10),n(2210)],void 0===(a=function(t,e){return new e("template-section-hide-coachmark",{step1:{placement:t.byId("toolcol"),arrow:"up",completesOn:"neapolitan/tabs/design-pane",endStep:!0}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(6),n(4),n(7),n(5),n(52),n(21),n(16),n(97),n(330)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([d,c],{type:"imageCard",_name:"Image Card",_kbLink:"https://mailchimp.com/help/use-image-card-content-blocks/",_defaultCaption:"Input caption text here. Use the block's Settings tab to change the caption position and set other styles.",constructor:function(t){this.caption={text:this._defaultCaption,image:null},this.captionPosition="bottom",this.captionWidth="two-third",this.edgeToEdge=!0,this.align="left",this.styles=[{name:"Text style",selector:".mcnTextContent, .mcnTextContent p",props:{color:{value:"#F2F2F2"},"font-family":{value:"Helvetica"},"font-size":{value:"14px"},"font-style":{value:""},"font-weight":{value:"normal"},"line-height":{value:""},"text-align":{value:"center"}}},{name:"Card",selector:".mcnImageCardRightContentInner, .mcnImageCardLeftContentInner, .mcnImageCardBottomContent, .mcnImageCardTopContent",props:{"background-color":{value:"#404040"},border:{value:""}}}],"page"===t._campaignRenderingType&&(this.styles[1].props["box-shadow"]={value:"none"}),this.styles=this.styles.concat(this._getImageStyles())},onImageUpload:function(t){var e=this.caption;e.image=t,this.set("caption",e),this.save()},onLinkUpdate:function(t,e,o){var s=this.getContent(),r=n("a",s)[o];if(r&&a.get(r,"href")==t&&("left"==this.captionPosition||"right"==this.captionPosition?this._handleHorizontalLinkUpdate(t,e,r,s):this._handleVerticalLinkUpdate(t,e,r,s)))return i.destroy(s),this.save();return i.destroy(s),this.inherited(arguments)},_handleHorizontalLinkUpdate:function(t,e,i){var a=".mcnImageCard"+s.capitalize(this.captionPosition)+"TextContentContainer",r=".mcnImageCard"+s.capitalize(this.captionPosition)+"ImageContentContainer";if(n(i).parents(r)[0])return this._updateImageUrl(t,e);var l=n(i).parents(a)[0],d=o.indexOf(n("a",l),i);return this._updateContentUrl(d,t,e)},_handleVerticalLinkUpdate:function(t,e,i){var a=".mcnImageCard"+s.capitalize(this.captionPosition)+"ImageContent";if(n(i).parent(a)[0])return this._updateImageUrl(t,e);var r=n(i).parents(".mcnTextContent")[0],l=o.indexOf(n("a",r),i);return this._updateContentUrl(l,t,e)},_updateImageUrl:function(t,e){return!!(this.caption&&this.caption.image&&this.caption.image.link&&this.caption.image.link.href==t)&&(this.caption.image.link.href=e,this.caption.image.link.text==t&&(this.caption.image.link.text=e),!0)},_updateContentUrl:function(t,e,o){var s=i.create("div"),r=i.toDom(this.caption.text);return i.place(r,s),a.set(n("a",s)[t],"href",o),this.caption.text=n(s).html(),i.destroy(s),!0}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1072),n(151),n(2235),n(1),n(2),n(14),n(6),n(3),n(7),n(27),n(9)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return t([e,n],{templateString:i,startup:function(){this.inherited(arguments),this.showCKEditor(this.ckeditorContainer,this.timestampContainer,this.mcedit.content,a.hitch(this,"publishReady"))},show:function(){this.publishSetup()},postCreate:function(){this.inherited(arguments);var t=this.mcedit.isFooter&&this.mcedit.isFooter(),e=this;u.set(this.footerContactInfo,"display",t?"block":"none");var n=s.byId("edit-contactinfo-modal");t&&n&&(u.set(this.contactEditLink,"display",""),o(this.contactEditLink,"click",(function(t){t.preventDefault(),t.stopPropagation(),n.show()}))),window.app.hasPreservedContent()&&(u.set(this.switchContentBtn,"display",""),o(this.switchContentBtn,"click",(function(t){t.stopPropagation(),t.preventDefault(),window.app.openPreservedContentDialog().then((function(t){e.mcedit.recoverContent(t).then((function(t){e.mcedit.set("content",t.content),e.editor.setData(t.content)}))}))})));var i=r(".mojoEditableTextSection",this.domNode);i&&i.length&&i.forEach(a.hitch(this,(function(t){d.get(t,"data-mojo-ck-scroll")&&this._handleCKToolbarScroll(t)})))},_onDone:function(t){t.preventDefault(),t.stopPropagation(),this.done()},onCKChange:function(){var t=this.editor.getData();this.mcedit.set("content",t)},_handleCKToolbarScroll:function(t){var e=null;o(t,"scroll",(function(){if(!e){var n=r(".cke_toolbox",t)[0];if(n){var i=c.position(n);e=i.y+i.h}}if(e){var a=c.position(t).y+t.scrollTop-1>e&&t.scrollTop>1;l.toggle(t,"contentEditorScrolled",a)}}))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(4),n(3),n(9),n(36)],void 0===(a=function(t,e,n,i,a){return t(null,{sectionId:null,appRef:null,type:"template_section",isHidden:!1,sectionContainers:{},constructor:function(t,n,i){this.appRef=t,this.sectionId=n,this.dom=i,this.endpoint=t.getEndpoint(),this.listeners=[],this.isHidden=this.checkHiddenClassNames(i),this.sectionOverlay=e.place('<div class=\'tpl-section-wrapper hide\'><div class="tpl-section-wrapper-headline-container"><h5 class="tpl-section-wrapper-headline">'+n+"</h5></div></div>",this.dom,"first")},toggleSectionVisible:function(){this.isHidden=this.checkHiddenClassNames(this.dom),this.isHidden?(n.toggle(this.dom,"hidden-opacity",!0),n.toggle(this.dom,"tpl-section-hidden",!1),a.animate(this.dom,"slideDown",{duration:400,complete:function(t){n.toggle(this.dom,"tpl-section-hidden-height",!1),i.set(this.dom,"display",""),a(this.dom,{opacity:1},{delay:1e3,duration:400,complete:function(){n.toggle(this.dom,"hidden-opacity",!1),i.set(this.dom,"opacity",""),window.top.resizePreview()}.bind(this)})}.bind(this)})):a(this.dom,{opacity:0},{duration:400,complete:function(){n.toggle(this.dom,"tpl-section-hidden-opacity",!0),a.animate(this.dom,"slideUp",{duration:400,complete:function(t){n.toggle(this.dom,"tpl-section-hidden",!0),this.appRef.hideTemplateSection(this),window.top.resizePreview()}.bind(this)})}.bind(this)})},toggleTemplateSectionRequest:function(){return this.endpoint.hideable.toggle(this.sectionId).then(function(){this.toggleSectionVisible()}.bind(this))},checkHiddenClassNames:function(t){return t.classList.contains("tpl-section-hidden")},mouseEnterControls:function(){n.toggle(this.sectionOverlay,"hide",!1),a.animate(this.sectionOverlay,"fadeIn",{duration:300,complete:function(t){n.toggle(this.dom,"tpl-section-wrapper-overlay",!0)}.bind(this)})},mouseLeaveControls:function(){a.animate(this.sectionOverlay,"fadeOut",{duration:0,complete:function(t){n.toggle(this.dom,"tpl-section-wrapper-overlay",!1),n.toggle(this.sectionOverlay,"hide",!0)}.bind(this)})}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i;void 0===(i=function(){return'<nav>   <div class="mclp-wrapper" style="display: flex; justify-content: center;">     <div class="contentContainer">       <div class="mc-nav-container">         <div class="burger-container">           <div id="burger">             <div class="bar topBar"></div>             <div class="bar midBar"></div>             <div class="bar btmBar"></div>           </div>         </div>         <ul class="menu">           {% for link in links %}             <li class="menu-item menu-item-{{ link.text }}"><a href="{{ link.link }}" class="menu-item-link">{{ link.text }}</a></li>           {% endfor %}         </ul>       </div>     </div>   </div> </nav> '}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,a;i=[n(2),n(6),n(15)],void 0===(a=function(t,e,n){return{_canClickPromotion:!0,setupButtonEvents:function(){e("[data-promotion-loading-button]").forEach(function(e){t(e,"click",function(t){var i=this._canClickPromotion;return this._canClickPromotion?(n.toggleButtonLoadingState(e),this._canClickPromotion=!1):(t.preventDefault(),t.stopPropagation()),i}.bind(this))}.bind(this))}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(35),n(7),n(9),n(2),n(49),n(25),n(11),n(161),n(193),n(42)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){var h=t("dijit.DialogUnderlay",[r,l],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"",class:"",_modalConnects:[],_setDialogIdAttr:function(t){i.set(this.node,"id",t+"_underlay"),this._set("dialogId",t)},_setClassAttr:function(t){this.node.className="dijitDialogUnderlay "+t,this._set("class",t)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.own(o(this.domNode,"keydown",e.hitch(this,"_onKeyDown"))),this.inherited(arguments)},layout:function(){var t=this.node.style,e=this.domNode.style;e.display="none";var n=s.getBox(this.ownerDocument);e.top=n.t+"px",e.left=n.l+"px",t.width=n.w+"px",t.height=n.h+"px",e.display="block"},show:function(){this.domNode.style.display="block",this.open=!0,this.layout(),this.bgIframe=new d(this.domNode);var t=s.get(this.ownerDocument);this._modalConnects=[c.on("resize",e.hitch(this,"layout")),o(t,"scroll",e.hitch(this,"layout"))]},hide:function(){for(this.bgIframe.destroy(),delete this.bgIframe,this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});return h.show=function(t,e){var n=h._singleton;!n||n._destroyed?n=u._underlay=h._singleton=new h(t):t&&n.set(t),a.set(n.domNode,"zIndex",e),n.open||n.show()},h.hide=function(){var t=h._singleton;t&&!t._destroyed&&t.hide()},h}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(6),n(1),n(35),n(54),n(55)],void 0===(a=function(t,e,n,i,a){var o=t.NodeList;return e.extend(o,{_anim:function(t,n,i){i=i||{};var o=a.combine(this.map((function(a){var o={node:a};return e.mixin(o,i),t[n](o)})));return i.auto?o.play()&&this:o},wipeIn:function(t){return this._anim(a,"wipeIn",t)},wipeOut:function(t){return this._anim(a,"wipeOut",t)},slideTo:function(t){return this._anim(a,"slideTo",t)},fadeIn:function(t){return this._anim(i,"fadeIn",t)},fadeOut:function(t){return this._anim(i,"fadeOut",t)},animateProperty:function(t){return this._anim(i,"animateProperty",t)},anim:function(t,e,o,s,r){var l=a.combine(this.map((function(n){return i.animateProperty({node:n,properties:t,duration:e||350,easing:o})})));return s&&n.after(l,"onEnd",s,!0),l.play(r||0)}}),o}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(25),n(163),n(287),n(193),n(0),n(3),n(27),n(9)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return o("dijit.layout._LayoutWidget",[e,n,i],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments),s.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var e=this.getParent&&this.getParent();e&&e.isLayoutContainer||(this.resize(),this.own(a.on("resize",t.hitch(this,"resize"))))}},resize:function(e,n){var i=this.domNode;e&&r.setMarginBox(i,e);var a=n||{};t.mixin(a,e||{}),"h"in a&&"w"in a||(a=t.mixin(r.getMarginBox(i),a));var o=l.getComputedStyle(i),s=r.getMarginExtents(i,o),d=r.getBorderExtents(i,o),c=this._borderBox={w:a.w-(s.w+d.w),h:a.h-(s.h+d.h)},u=r.getPadExtents(i,o);this._contentBox={l:l.toPixelValue(i,o.paddingLeft),t:l.toPixelValue(i,o.paddingTop),w:c.w-u.w,h:c.h-u.h},this.layout()},layout:function(){},_setupChild:function(t){var e=this.baseClass+"-child "+(t.baseClass?this.baseClass+"-"+t.baseClass:"");s.add(t.domNode,e)},addChild:function(t,e){this.inherited(arguments),this._started&&this._setupChild(t)},removeChild:function(t){var e=this.baseClass+"-child"+(t.baseClass?" "+this.baseClass+"-"+t.baseClass:"");s.remove(t.domNode,e),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(3),n(4),n(30),n(1),n(2),n(19),n(62),n(14),n(25),n(11),n(163),n(288),n(53)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){var m=e("dijit.layout._StackButton",p,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(t){this.inherited(arguments),(this.focusNode||this.domNode).setAttribute("role","tab")}}),g=e("dijit.layout.StackController",[c,u,h],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:m,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(t){return d.byId(this.id+"_"+t)},postCreate:function(){this.inherited(arguments),this.own(r.subscribe(this.containerId+"-startup",o.hitch(this,"onStartup")),r.subscribe(this.containerId+"-addChild",o.hitch(this,"onAddChild")),r.subscribe(this.containerId+"-removeChild",o.hitch(this,"onRemoveChild")),r.subscribe(this.containerId+"-selectChild",o.hitch(this,"onSelectChild")),r.subscribe(this.containerId+"-containerKeyDown",o.hitch(this,"onContainerKeyDown"))),this.containerNode.dojoClick=!0,this.own(s(this.containerNode,"click",o.hitch(this,(function(t){var e=d.getEnclosingWidget(t.target);if(e!=this.containerNode&&!e.disabled&&e.page)for(var i=t.target;i!==this.containerNode;i=i.parentNode){if(n.contains(i,this.buttonWidgetCloseClass)){this.onCloseButtonClick(e.page);break}if(i==e.domNode){this.onButtonClick(e.page);break}}}))))},onStartup:function(e){this.textDir=e.textDir,t.forEach(e.children,this.onAddChild,this),e.selected&&this.onSelectChild(e.selected);var n=d.byId(this.containerId).containerNode,i=o.hitch(this,"pane2button"),a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"},r=function(t,e){return s(n,"attrmodified-"+t,(function(t){var n=i(t.detail&&t.detail.widget&&t.detail.widget.id);n&&n.set(e,t.detail.newValue)}))};for(var l in a)this.own(r(l,a[l]))},destroy:function(t){this.destroyDescendants(t),this.inherited(arguments)},onAddChild:function(t,e){var n=new(o.isString(this.buttonWidget)?o.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+t.id,name:this.id+"_"+t.id,label:t.title,disabled:t.disabled,ownerDocument:this.ownerDocument,dir:t.dir,lang:t.lang,textDir:t.textDir||this.textDir,showLabel:t.showTitle,iconClass:t.iconClass,closeButton:t.closable,title:t.tooltip,page:t});this.addChild(n,e),t.controlButton=n,this._currentChild||this.onSelectChild(t);var i=t._wrapper.getAttribute("aria-labelledby")?t._wrapper.getAttribute("aria-labelledby")+" "+n.id:n.id;t._wrapper.removeAttribute("aria-label"),t._wrapper.setAttribute("aria-labelledby",i)},onRemoveChild:function(t){this._currentChild===t&&(this._currentChild=null);var e=this.pane2button(t.id);e&&(this.removeChild(e),e.destroy()),delete t.controlButton},onSelectChild:function(t){if(t){if(this._currentChild){var e=this.pane2button(this._currentChild.id);e.set("checked",!1),e.focusNode.setAttribute("tabIndex","-1")}var n=this.pane2button(t.id);n.set("checked",!0),this._currentChild=t,n.focusNode.setAttribute("tabIndex","0");d.byId(this.containerId)}},onButtonClick:function(t){var e=this.pane2button(t.id);l.focus(e.focusNode),this._currentChild&&this._currentChild.id===t.id&&e.set("checked",!0),d.byId(this.containerId).selectChild(t)},onCloseButtonClick:function(t){if(d.byId(this.containerId).closeChild(t),this._currentChild){var e=this.pane2button(this._currentChild.id);e&&l.focus(e.focusNode||e.domNode)}},adjacent:function(e){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(e=!e);var n,i=this.getChildren(),a=t.indexOf(i,this.pane2button(this._currentChild.id)),o=i[a];do{n=i[a=(a+(e?1:i.length-1))%i.length]}while(n.disabled&&n!=o);return n},onkeydown:function(t,e){if(!this.disabled&&!t.altKey){var n=null;if(t.ctrlKey||!t._djpage){switch(t.keyCode){case a.LEFT_ARROW:case a.UP_ARROW:t._djpage||(n=!1);break;case a.PAGE_UP:t.ctrlKey&&(n=!1);break;case a.RIGHT_ARROW:case a.DOWN_ARROW:t._djpage||(n=!0);break;case a.PAGE_DOWN:t.ctrlKey&&(n=!0);break;case a.HOME:for(var i=this.getChildren(),o=0;o<i.length;o++){if(!(s=i[o]).disabled){this.onButtonClick(s.page);break}}t.stopPropagation(),t.preventDefault();break;case a.END:for(o=(i=this.getChildren()).length-1;o>=0;o--){var s;if(!(s=i[o]).disabled){this.onButtonClick(s.page);break}}t.stopPropagation(),t.preventDefault();break;case a.DELETE:case"W".charCodeAt(0):this._currentChild.closable&&(t.keyCode==a.DELETE||t.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),t.stopPropagation(),t.preventDefault());break;case a.TAB:t.ctrlKey&&(this.onButtonClick(this.adjacent(!t.shiftKey).page),t.stopPropagation(),t.preventDefault())}null!==n&&(this.onButtonClick(this.adjacent(n).page),t.stopPropagation(),t.preventDefault())}}},onContainerKeyDown:function(t){t.e._djpage=t.page,this.onkeydown(t.e)}});return g.StackButton=m,g}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(1),n(79),n(101),n(1102),n(0)],void 0===(a=function(t,e,n,i,a){return a("dojox.layout.ContentPane",n,{adjustPaths:!1,cleanContent:!1,renderStyles:!1,executeScripts:!0,scriptHasHooks:!1,ioMethod:e.get,ioArgs:{},onExecError:function(t){},_setContent:function(e){var n=this._contentSetter;return n&&n instanceof i._ContentSetter||(n=this._contentSetter=new i._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,(function(t){var e=this.onContentError(t);try{this.containerNode.innerHTML=e}catch(t){console.error("Fatal "+this.id+" could not change content due to "+t.message,t)}}))})),this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"},this.inherited("_setContent",arguments)},destroy:function(){var t=this._contentSetter;t&&t.tearDown(),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(33),n(4),n(341)],void 0===(a=function(t,e,n,i){return t("dijit.form.MappedTextBox",i,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(t){return t.toString?t.toString():""},toString:function(){var t=this.filter(this.get("value"));return null!=t?"string"==typeof t?t:this.serialize(t,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=n.place("<input type='hidden'"+(this.name&&!e("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(83),n(703),n(290)],void 0===(a=function(t,e,n){return t("dijit.form.RangeBoundTextBox",n,{rangeMessage:"",rangeCheck:function(t,e){return(!("min"in e)||this.compare(t,e.min)>=0)&&(!("max"in e)||this.compare(t,e.max)<=0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var t=this.get("value");if(null==t)return!1;var e=!1;if("min"in this.constraints){var n=this.constraints.min;e=this.compare(t,"number"==typeof n&&n>=0&&0!=t?0:n)<0}if(!e&&"max"in this.constraints){var i=this.constraints.max;e=this.compare(t,"number"!=typeof i||i>0?i:0)>0}return e},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(t){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(t))},getErrorMessage:function(t){var e=this.get("value");return null==e||""===e||"number"==typeof e&&isNaN(e)||this.isInRange(t)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=e.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(5),n(0),n(10),n(7),n(3),n(27),n(55),n(34),n(23),n(30),n(178),n(11),n(101),n(1107),n(142),n(84)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){return e("dijit.TitlePane",[h,u,c],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:m.defaultDuration,baseClass:"dijitTitlePane",templateString:p,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments),n.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments),this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var t=this.hideNode,e=this.wipeNode;this._wipeIn=s.wipeIn({node:e,duration:this.duration,beforeBegin:function(){t.style.display=""}}),this._wipeOut=s.wipeOut({node:e,duration:this.duration,onEnd:function(){t.style.display="none"}})},_setOpenAttr:function(e,n){(t.forEach([this._wipeIn,this._wipeOut],(function(t){t&&"playing"==t.status()&&t.stop()})),n)?this[e?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=e?"":"none";this._started&&(e?this._onShow():this.onHide()),this.containerNode.setAttribute("aria-hidden",e?"false":"true"),this.focusNode.setAttribute("aria-pressed",e?"true":"false"),this._set("open",e),this._setCss()},_setToggleableAttr:function(t){this.focusNode.setAttribute("role",t?"button":"heading"),t?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(i.remove(this.focusNode,"aria-controls"),i.remove(this.focusNode,"tabIndex"),i.remove(this.focusNode,"aria-pressed")),this._set("toggleable",t),this._setCss()},_setContentAttr:function(t){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),o.setMarginBox(this.wipeNode,{h:o.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var t=this.titleBarNode||this.focusNode,e=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed"),a.replace(t,this._titleBarClass,e||""),a.replace(t,this._titleBarClass.replace("TitlePaneTitle",""),(e||"").replace("TitlePaneTitle","")),this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(t){t.keyCode==d.DOWN_ARROW&&this.open&&(this.containerNode.focus(),t.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(t){l.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0"),this.set("title",t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(0),n(3),n(1),n(80),n(25),n(11),n(1112)],void 0===(a=function(t,e,n,i,a,o,s,r){return e("dijit.ProgressBar",[o,s],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:r,_indeterminateHighContrastImagePath:t.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments),this.params&&"value"in this.params||(this.value=this.indeterminate?1/0:this.progress)},buildRendering:function(){this.inherited(arguments),this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString()),this.update()},_setDirAttr:function(t){var e="rtl"==t.toLowerCase();n.toggle(this.domNode,"dijitProgressBarRtl",e),n.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&e),this.inherited(arguments)},update:function(t){i.mixin(this,t||{});var e=this.internalProgress,a=this.domNode,o=1;this.indeterminate?a.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(o=Math.min(parseFloat(this.progress)/100,1),this.progress=o*this.maximum):(this.progress=Math.min(this.progress,this.maximum),o=this.maximum?this.progress/this.maximum:0),a.setAttribute("aria-valuenow",this.progress)),a.setAttribute("aria-labelledby",this.labelNode.id),a.setAttribute("aria-valuemin",0),a.setAttribute("aria-valuemax",this.maximum),this.labelNode.innerHTML=this.report(o),n.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate),n.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight()),e.style.width=100*o+"%",this.onChange()},_setValueAttr:function(t){this._set("value",t),t==1/0?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:t})},_setLabelAttr:function(t){this._set("label",t),this.update()},_setIndeterminateAttr:function(t){this._set("indeterminate",t),this.update()},report:function(t){return this.label?this.label:this.indeterminate?"&#160;":a.format(t,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(9),n(1),n(6),n(106),n(14),n(113),n(209)],void 0===(a=function(t,e,n,i,a,o,s){return t("dijit.PopupMenuItem",s,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var t=i("*",this.srcNodeRef);this.inherited(arguments,[t[0]]),this.dropDownContainer=this.srcNodeRef}},_openPopup:function(t,e){var i=this.popup;a.open(n.delegate(t,{popup:this.popup,around:this.domNode})),e&&i.focus&&i.focus()},_closePopup:function(){a.close(this.popup),this.popup.parentMenu=null},startup:function(){if(!this._started){if(this.inherited(arguments),!this.popup){var t=i("[widgetId]",this.dropDownContainer)[0];this.popup=o.byNode(t)}this.ownerDocumentBody.appendChild(this.popup.domNode),this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id),this.popup.startup(),this.popup.domNode.style.display="none",this.arrowWrapper&&e.set(this.arrowWrapper,"visibility",""),this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(t){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(t),delete this.popup),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(3),n(113),n(1113),n(209)],void 0===(a=function(t,e,n,i){return t("dijit.CheckedMenuItem",n,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:i,checked:!1,_setCheckedAttr:function(t){this.domNode.setAttribute("aria-checked",t?"true":"false"),this._set("checked",t)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(t){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked)),this.onClick(t)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(2),n(6),n(10),n(9),n(7),n(3),n(4),n(543),n(48)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){var u={allowHtml:!0,page:"event",sort:"event",pageSize:10};return t([],{constructor:function(t,i,a,s){this.url=t,this.query=i,this.el=a,this.count_timeout=null,"event"==(s=e.mixin({},u,s)).page&&"enable"==s.sort&&(s.sort="event"),"event"==s.page&&(s.pagingButtonsConfiguration="both"),s.responsive&&(this.responsive=!0,delete s.responsive),this.options=s,this.page=1;var r=this.loadPaging();if(r.p&&(this.page=r.p,this.skipFilterPageReset=!0,r.p&&(this.options.pageSize=r.s),r.sc)){var l=n.map(i.select.split(","),(function(t){return e.trim(t)}));n.indexOf(l,r.sn)>=0&&(this.sorted={column:r.sc,ascending:"true"==r.sa,sortIndexes:r.si?r.si:null},this.query.orderby=r.sn,this.sorted.ascending||(this.query.orderby+=" desc"))}s.no_data_msg?this.no_data_msg=s.no_data_msg:this.no_data_msg="<div class='c-noDataBlock text-align--center border-gray border-radius--lv2'><div class='c-noDataBlock_icon' style='background: url(/css/icons/no-data/empty-general.svg)'></div><h2 class='c-noDataBlock_title'>Goose egg</h2><p class='c-noDataBlock_message'>There’s no information available.</p></div>",o.byId("no-data-message-tpl")&&(this.no_data_msg_first=o.byId("no-data-message-tpl").innerHTML),s.wait||this.refresh(!0)},refresh:function(t){this.query.select_count&&"event"==this.options.page&&this.getPageTotal();var n=new c(this.url);n.setQuery(this.buildQuery(this.query)),this.table||(this.table=new google.visualization.Table(this.el),"event"==this.options.page&&google.visualization.events.addListener(this.table,"page",e.hitch(this,"changePage")),google.visualization.events.addListener(this.table,"sort",e.hitch(this,"sort")));var i=this;this.skipFilterPageReset=!1,n.send(e.hitch(this,(function(n){if(n.isError())console.debug(n.getDetailedMessage());else{var a=n.getDataTable();if(i.options.formatters)for(var o in i.options.formatters)i.options.formatters[o].formatter.format(a,i.options.formatters[o].col);if(a.getNumberOfRows()){var s=e.clone(i.options);this.responsive&&(s.cssClassNames={headerRow:"table-header-tr",tableRow:"table-body-tr",oddTableRow:"table-body-tr odd",selectedTableRow:"table-td-selected",hoverTableRow:"table-td-hover",tableCell:"table-td",headerCell:"table-th",rowNumberCell:"table-td-number"}),i.table.draw(a,s),i.data=a,i.postProcess(i.table),i._renameTableClass()}else i.el.innerHTML='<div class="google-grid-nodata">'+(t&&i.no_data_msg_first?i.no_data_msg_first:i.no_data_msg)+"</div>"}})))},postProcessRetry:function(t){clearTimeout(this.count_timeout),this.count_timeout=null,this.postProcess(t)},postProcess:function(t){if(isNaN(this.total_pages)){if(null==this.count_timeout){var e=this;this.count_timeout=setTimeout((function(){e.postProcessRetry(t)}),250)}}else{if("event"==this.options.page){a(".google-visualization-table-table").style("width","");var n=a(".google-visualization-table-div-page",this.el)[0];if(n&&1!=this.total_pages){s.set(n,"float","right"),s.set(n,"display","");var i=parseInt(this.options.pageSize),o=(parseInt(this.page)-1)*i+1,c=parseInt(o)+i-1;c>this.row_count&&(c=this.row_count);var u=d.create("span",{class:"pager-rowinfo relative"});a(u).innerHTML('<span class="float-left"><strong>View</strong> <span class="row-option-select"></span></span><strong>'+o+" - "+c+"</strong> of <strong>"+parseInt(this.row_count)+"</strong>"),a(".row-option-select",u)[0].appendChild(this.getRowSelect());var h=a('img[alt="previous"]',n)[0],p=a('img[alt="next"]',n)[0];h.src="/images/arrow_left.gif",p.src="/images/arrow_right.gif",r.set(h,"style","width: 8px; height: 12px; position: relative; padding: 0px 3px; top: 3px;"),r.set(p,"style","width: 8px; height: 12px; position: relative; padding: 0px 3px; top: 3px;");var m=h.parentNode,g=p.parentNode;m&&(n.insertBefore(u,m.parentNode.parentNode),1==this.page?(s.set(m,"display","none"),r.set(g,"style","border-left:1px solid #aaa;")):(s.set(m,"display",""),r.set(g,"style","border-left:none;")),this.page==this.total_pages?s.set(g,"display","none"):s.set(g,"display",""))}else n&&s.set(n,"display","none")}if(this.sorted){var f=a(this.responsive?"td.table-th":"td.google-visualization-table-th",this.el)[this.sorted.column];l.add(f,"google-visualization-table-sorthdr"),f.innerHTML+='<span class="google-visualization-table-sortind">'+(this.sorted.ascending?"▲":"▼")+"</span>"}this.onRender&&this.onRender(this.el)}},getRowSelect:function(){for(var t=document.createElement("select"),n=[10,25,50,100],a=0;a<n.length;a++){var o=document.createElement("option");o.setAttribute("value",n[a]),o.innerHTML=n[a]+" Rows",t.appendChild(o)}return t.value=this.options.pageSize,i(t,"change",e.hitch(this,"changePageSize")),t},changePageSize:function(t){this.options.pageSize=parseInt(t.target.value),this.page=1,this.storePaging(parseInt(this.page),parseInt(this.options.pageSize)),this.total_pages=Math.ceil(parseInt(this.row_count)/this.options.pageSize),this.refresh()},changePage:function(t){t.page<=0&&(t.page=-1),this.page=parseInt(this.page)+parseInt(t.page),this.storePaging(parseInt(this.page),parseInt(this.options.pageSize)),this.page<=0&&(this.page=1),this.total_pages&&this.page>this.total_pages&&(this.page=this.total_pages),this.refresh()},storePaging:function(t,e){var n="#p:"+t+"-s:"+e;this.sorted&&(n+="-sc:"+this.sorted.column+"-sn:"+this.data.getColumnId(this.sorted.column),this.sorted.ascending&&(n+="-sa:"+this.sorted.ascending),this.sorted.sortedIndexes&&(n+="-si:"+this.sorted.sortedIndexes)),window.location.hash=n},loadPaging:function(){var t=window.location.hash;if(!t)return"undefined"!=typeof vis_grid_page_size&&"NaN"!=vis_grid_page_size?{s:vis_grid_page_size,p:"1"}:{};var e=t.substring(1).split("-"),n={};for(var i in e){var a=e[i].split(":");2==a.length&&(isNaN(a[1])?n[a[0]]=a[1]:n[a[0]]=parseInt(a[1],10))}return isNaN(n.p)||isNaN(n.s)?n={}:n.s>100&&(n.s=10),n},getPageTotal:function(){var t=new c(this.url),e="select "+this.query.select_count;this.query.from&&(e+=" from "+this.query.from),this.query.where?(e+=" where ("+this.query.where+")",this.query.filter&&(e+=" and ("+this.query.filter+")")):this.query.filter&&(e+=" where "+this.query.filter),this.query.groupby&&(e+=" group by "+this.query.groupby),this.query.pivot&&(e+=" pivot "+this.query.pivot),t.setQuery(e);var n=this;t.send((function(t){if(!t.isError()){var e=parseInt(t.getDataTable().getValue(0,0));n.row_count=e,n.total_pages=Math.ceil(parseInt(e)/parseInt(n.options.pageSize))}}))},buildQuery:function(t){var e="";if(t.select&&(e+="select "+t.select),t.from&&(e+=" from "+t.from),t.where?(e+=" where ("+t.where+")",t.filter&&(e+=" and ("+t.filter+")")):t.filter&&(e+=" where "+t.filter),t.groupby&&(e+=" group by "+t.groupby),t.pivot&&(e+=" pivot "+t.pivot),t.orderby?(e+=" order by ",t.filter_orderby&&(e+=t.filter_orderby+", "),e+=t.orderby):t.filter_orderby&&(e+="order by "+t.filter_orderby),"event"==this.options.page){var n=this.options.pageSize;e+=" limit "+n+" offset "+(this.page-1)*n}return t.label&&(e+=" label "+t.label),t.format&&(e+=" format "+t.format),e},setFilter:function(t,e){this.skipFilterPageReset||(this.page=1),this.query.filter=t,this.query.filter_orderby=e,"event"==this.options.page&&this.getPageTotal()},sort:function(t){if("event"==this.options.sort){this.sorted&&t.column==this.sorted.column&&(t.ascending=!this.sorted.ascending);var e=this.data.getColumnId(t.column),n=!0;if(this.options.sortable){n=!1;for(var i=0;i<this.options.sortable.length;++i)if(e==this.options.sortable[i]){n=!0;break}}if(n&&this.options.not_sortable)for(i=0;i<this.options.not_sortable.length;++i)if(e==this.options.not_sortable[i]){n=!1;break}return!!n&&(this.query.orderby=e,t.ascending||(this.query.orderby+=" desc"),this.page=1,this.sorted=t,this.storePaging(this.page,this.options.pageSize),this.refresh(),!0)}return this._renameTableClass(),!0},_renameTableClass:function(){this.responsive&&a(".google-visualization-table-table",this.el).removeClass("google-visualization-table-table").addClass("responsive-table-google")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(2),n(6),n(5),n(9),n(63),n(43),n(44)],void 0===(a=function(t,e,n,i,a,o,s){var r=[],l=function(){n(".hover-list.click-to-open > li > ul").style("display","none"),d()},d=function(){i.forEach(r,(function(t){t.remove()})),r=[]},c=function(t){n("> li > ul",t).forEach((function(t,i){var s=n(t).siblings("a,button")[0];s&&e(s,"click",(function(i){if(l(),o.stop(i),"block"==a.get(t,"display"))n(t).style("display","none");else{r.length&&d(),r.push(e(window.document,"click",(function(t){dojo.query(t.target).parents(".click-outside-to-close").length<1&&l()})));var s=document.location.protocol+"//"+document.location.host;n("iframe").forEach((function(t){t.src.slice(0,s.length)==s&&r.push(e.once(t.contentWindow.document,"click",l))})),n(t).style("display","block")}}))}))};return s((function(){n(".hover-list.click-to-open").forEach(c)})),{convert:c}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(306)],void 0===(a=function(t){return function(e){return e?(e=t(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(6),n(2),n(3),n(41),n(12),n(11),n(1151),n(713)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([r,l],{templateString:d,buttonTemplate:'<div class="flex-auto text-align--{buttonAlign} padding-top--lv2 padding-bottom--lv2"><button class="button {cssOptions}">{buttonText}</button></div>',selectTemplate:'<div class="flex-auto text-align--{selectAlign} padding-top--lv2 padding-bottom--lv2"></div>',postCreate:function(){this.params.button&&this._setupButton(this.params.button),this.params.select&&this._setupSelect(this.params.select),this.params.iconToggle&&this._setupIconToggle(this.params.iconToggle)},_setupButton:function(t){var i={buttonAlign:t.align,buttonText:t.buttonText,cssOptions:t.colorStyles+" margin-right--lv0"},o=n.place(e.replace(this.buttonTemplate,i),this.actionpFlexPaneEl);a(o,"button:click",(function(e){t.action()}))},_setupSelect:function(t){this.sectionToggle=new s({class:t.classNames,options:t.options});var i={selectAlign:t.align},r=n.place(e.replace(this.selectTemplate,i),this.actionpFlexPaneEl,t.order);n.place(this.sectionToggle.domNode,r,"first"),a(this.sectionToggle,"change",t.onChange),o.add(this.sectionToggle.domNode,"!width--auto")},_setupIconToggle:function(t){this.iconGroup=new c(t),n.place(this.iconGroup.domNode,this.actionpFlexPaneEl,t.order)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(4),n(134),n(1154),n(1155)],void 0===(a=function(t,e,n,i,a,o,s){return t([a],{templateString:'<ul class="flex align-items--center"></ul>',iconTpl:o,imageTpl:s,activeClass:"active",postCreate:function(){this.inherited(arguments),this.setSelected(this.params.value)},_addOptions:function(){e.forEach(this.options,n.hitch(this,(function(t){var e=n.mixin({value:"",label:"",icon:""},t);t.icon?i.place(n.replace(this.iconTpl,e),this.domNode):i.place(n.replace(this.imageTpl,e),this.domNode)})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(556),n(1153)],void 0===(a=function(t,e,n){return t([e],{dialogTitle:"Are you sure you want to delete your logo?",templateString:n})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(190),n(1160),n(1)],void 0===(a=function(t,e,n,i){return t([e],{reportId:null,titleText:"Mailchimp Comparative Reports",badgeText:"Add Segment",paneClasses:"add-segment-container",content:n,constructor:function(t){if(i.mixin(this,t),!this.reportId)throw Error("Can't create segment without a report Id.")},postCreate:function(){this.inherited(arguments)},show:function(){return this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(82),n(256),n(2),n(6),n(5),n(31),n(37),n(1),n(10),n(9),n(7),n(3),n(4),n(28),n(55),n(54),n(214),n(30),n(14),n(717),n(719),n(720),n(721),n(722),n(723),n(8),n(26),n(15),n(17),n(16),n(135),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S,x,I,T,A,j,E,P,D,N){var L=t([e,n,i],{overlayClass:"automation-overlay",s_panelTitle:"Title",s_submitBtn:"Save",s_panelText:"",currentOverlay:null,currentEmailDom:null,currentViewId:null,postMixInProperties:function(){L._main||(L._main=this)},trackEvent:function(t,e,n){window.ga("send","event",t,e,n)},postCreate:function(){this.inherited(arguments);var t=this;a(this.cancel,"click",(function(){t.trackEvent("automations_wizard","click",t.panelTitle.innerHTML.toLowerCase()+":cancel"),t.closeView()})),a(this.submit,"click",(function(){if(t.submit.disabled=!0,t.currentView._validate()){var e=t.currentOverlay._save(),n=o("[data-view-id='feedback']",t.currentEmailDom)[0],i=o("[data-view-id='status']",t.currentEmailDom)[0];if("trigger"===t.currentViewId){var a=o("[data-action='trigger']",t.currentEmailDom)[0];(d=w.findWidgets(a)).forEach((function(t){t.destroyRecursive()})),a.innerHTML=e.trigger_text,l.parse(a),t.updateNotification("Trigger",n,i),e.order&&_mc.reorderEmails(e.order),_mc.toggleAddWorkflowButton(e.workflow_add_allowed)}if("schedule"===t.currentViewId)o("[data-action='schedule']",t.currentEmailDom)[0].innerHTML=e,t.updateNotification("Schedule",n,i);if("postsend"===t.currentViewId){var s=o("[data-action='postsend']",t.currentEmailDom)[0],r=o("[data-view-id='postsend'] > span",t.currentEmailDom)[0],d=w.findWidgets(s);d.forEach((function(t){t.destroyRecursive()})),s.innerHTML=e||"None",r.innerHTML=e?"Edit":"Add",l.parse(s),l.parse(r),t.updateNotification("Actions",n,i)}if("segment"===t.currentViewId){var c=o("[data-action='segment']",t.currentEmailDom)[0],u=o("[data-view-id='segment'] > span",t.currentEmailDom)[0];(d=w.findWidgets(c)).forEach((function(t){t.destroyRecursive()})),c.innerHTML=e||"None",u.innerHTML=e?"Edit":"Add",l.parse(c),l.parse(u),t.updateNotification("Segment",n,i)}"queueAdd"!==t.currentViewId&&"queueRemove"!==t.currentViewId||j.toast(e,"success"),t.closeView()}t.submit.disabled=!1})),D.onEsc((function(){t.isVisible()&&t.closeView()}))},openView:function(t,e,n,i){var a=this;if(this.currentEmailDom=i,this.currentViewId=e,this.viewContainer.innerHTML="","trigger"===e){this.trackEvent("automations_wizard","edit",e+":edit");var s=new _({emailId:t});this.currentOverlay=s,g.set(a.panelTitle,"Edit Trigger"),g.set(a.submit,"Update Trigger"),a.currentView=s,m.place(s.domNode,a.viewContainer),s.on("load",(function(){})),s.on("delayChange",(function(){console.debug("ok")}))}if("schedule"===e){this.trackEvent("automations_wizard","edit",e+":edit");s=new C({emailId:t});this.currentOverlay=s,g.set(a.panelTitle,"Schedule Email"),g.set(a.submit,"Save Schedule"),a.currentView=s,m.place(s.domNode,a.viewContainer)}if("segment"===e){var r=o("[data-view-id='segment'] > span",a.currentEmailDom)[0];this.trackEvent("automations_wizard",r.innerHTML.toLowerCase(),e+":"+r.innerHTML.toLowerCase());s=new k({emailId:t});this.currentOverlay=s,g.set(a.panelTitle,"Segment Email"),g.set(a.submit,"Save Segment"),a.currentView=s,m.place(s.domNode,a.viewContainer)}if("postsend"===e){var l=o("[data-view-id='postsend'] > span",a.currentEmailDom)[0];this.trackEvent("automations_wizard",l.innerHTML.toLowerCase(),e+":"+l.innerHTML.toLowerCase());s=new S({emailId:t});this.currentOverlay=s,g.set(a.panelTitle,"Edit Action"),g.set(a.submit,"Update Action"),a.currentView=s,m.place(s.domNode,a.viewContainer)}if("queueAdd"===e){this.trackEvent("automations_wizard","click",e);s=new x({emailId:t});this.currentOverlay=s,g.set(a.panelTitle,"Workflow Queue Management"),g.set(a.submit,"Add Subscribers to Workflow"),a.currentView=s,m.place(s.domNode,a.viewContainer)}if("queueRemove"===e){this.trackEvent("automations_wizard","click",e);s=new I({emailId:t});this.currentOverlay=s,g.set(a.panelTitle,"Workflow Queue Management"),g.set(a.submit,"Remove Subscribers from Workflow"),a.currentView=s,m.place(s.domNode,a.viewContainer)}this.show().then((function(){N(a.viewContainer,{opacity:1},{duration:333})}))},closeView:function(){var t=this;N(this.viewContainer,{opacity:0},{duration:333,complete:function(){t.hide(),g.set(t.panelTitle,t.s_panelTitle),g.set(t.submit,t.s_submitBtn),g.set(t.panelText,t.s_panelText),t.currentView&&t.currentView.destroy()}})},updateNotification:function(t,e,n){u.set(n,"opacity",0),e.innerHTML=t+" Updated",u.set(e,"opacity",1),f.chain([v.fadeOut({node:e,duration:3e3,easing:b.expoIn}),v.fadeIn({node:n,duration:500})]).play()}});return L.main=function(){return L._main?L._main:null},L}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(28),n(14),n(4),n(18),n(8),n(10),n(3),n(7),n(9),n(37),n(1),n(5),n(15),n(307),n(308),n(21),n(16),n(26)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){return t(v,{path:"/automations/email-trigger",selectTriggerPanelShow:!1,triggerSettingsPanel:"",triggerSelectPanel:"",loadingIndicator:"",currentTrigger:null,triggers:null,currentTriggerName:null,currentTriggerDescription:null,currentTriggerSettings:null,eventApiPattern:/^[a-z0-9_\-]{2,30}$/i,onLoad:function(){var t=this;this.changeTriggerPanel=e("[data-action='change-trigger']",this.domNode)[0],this.triggerSettingsPanel=e("[data-el='trigger-settings']",this.domNode)[0],this.triggerSelectPanel=e("[data-el='select-trigger-panel']",this.domNode)[0],this.currentTriggerName=e("[data-workflow='current_trigger_name']",this.domNode)[0],this.currentTriggerDescription=e("[data-workflow='current_trigger_description']",this.domNode)[0],this.currentTriggerSettings=e("[data-workflow='current_trigger_settings']",this.domNode)[0],this.currentTriggerDelayUnits=e("[data-workflow='current_trigger_delay_units']",this.domNode)[0],this.currentTriggerDelayUnit=e("[data-workflow='delay_unit']",this.domNode)[0],this.delayOffsetBlock=e("[data-workflow='delay_offset_block']",this.domNode)[0],this.triggerDelayDirection=e("[data-workflow='delay_direction']",this.domNode)[0],this.loadingIndicator=e("[data-el='loading-indicator']",this.domNode)[0];var i=this._getTriggers(this.emailId);this.currentTrigger=i.current_trigger,this.triggers=i.triggers,this.isMergeBased=i.is_merge_based,this.setDelaySettings(this.currentTrigger),this.onDelayUnitChange(),d.add(l.byId("delay_offset_error"),"hide"),this.swapTriggerAction(this.currentTrigger),this.currentTrigger.show_delay_direction||d.add(this.triggerDelayDirection,"hide"),this.own(n(this.domNode,"[name=delay-unit]:change",p.hitch(this,"onDelayUnitChange")),n(this.domNode,'[data-action="change-trigger"]:click',p.hitch(this,"changeTriggerAction")),n(this.domNode,'[data-action="select-new-trigger"]:click',p.hitch(this,"selectNewTriggerAction")),n(this.domNode,'[data-action="add-goal-url"]:click',p.hitch(this,"addGoalUrl")),n(this.domNode,'[data-action="delete-goal-url"]:click',(function(n){var i=e(this).parent(".goal-url-container")[0],a=e("input",i)[0];c.set(a,"value",""),d.remove(i,"show"),d.add(i,"hide"),t.toggleGoalControls()}))),d.add(this.triggerSelectPanel,"hide"),"eventApi"===this.currentTrigger.key&&(this.event_name=l.byId("event_data0").value,w.googleAnalytics.trackEvent({eventCategory:"Auto Wizard",eventAction:"Clicked Edit Trigger",eventLabel:"automation - Event API"}))},destroy:function(){widgets=a.findWidgets(this.domNode),widgets.forEach((function(t){t.destroyRecursive()})),o.destroy(this.domNode)},_getTriggers:function(t){var e;return s.post(r.toUrl("/automations/triggers"),{data:{emailId:t},sync:!0,handleAs:"json"}).then((function(t){e=t})),e},changeTriggerAction:function(t){d.toggle(this.triggerSettingsPanel,"hide"),d.toggle(this.triggerSelectPanel,"hide"),this.selectTriggerPanelShow?(this.changeTriggerPanel.innerHTML="Change trigger",this.selectTriggerPanelShow=!1):(this.changeTriggerPanel.innerHTML="Cancel new trigger",this.selectTriggerPanelShow=!0)},selectNewTriggerAction:function(t){var e=c.get(t.target,"data-workflow-key");this.findTriggerWithKey(e);this.getSettingsByTriggerKeyAction(e);var n=l.byId("event_data0");this._clearEventDataValue(n);var i=l.byId("event_data1");this._clearEventDataValue(i);var a=l.byId("event_data2");this._clearEventDataValue(a);var o=l.byId("event_data3");this._clearEventDataValue(o)},getSettingsByTriggerKeyAction:function(t){this.toggleLoadingIndicator(),s.post(r.toUrl("/automations/get-settings-by-trigger-key"),{data:{triggerKey:t,emailId:this.emailId},handleAs:"json"}).then(this._handleTriggerSettingsRequest.bind(this,t))},_handleTriggerSettingsRequest:function(t,e){this.toggleLoadingIndicator();var n=this.findTriggerWithKey(t);n.settingsHTML=e,this.swapTriggerAction(n),this.changeTriggerAction()},toggleLoadingIndicator:function(){d.toggle(this.loadingIndicator,"hide"),d.toggle(this.triggerSelectPanel,"hide")},getDelayUnit:function(){return this.currentTriggerDelayUnit.value},getDelayOffset:function(){return this.delayOffsetBlock.value},getDelayDirection:function(){return this.triggerDelayDirection.value},setDelaySettings:function(t){c.set(this.currentTriggerDelayUnit,"value",t.delay_unit),c.set(this.delayOffsetBlock,"value",t.delay_offset),c.set(this.triggerDelayDirection,"value",t.delay_direction)},swapTriggerAction:function(t){if(t.delay_unit=this.getDelayUnit(),t.delay_offset=this.getDelayOffset(),t.delay_direction=this.getDelayDirection(),this.currentTrigger=t,this.currentTriggerName.innerHTML=t.name,this.currentTriggerDescription.innerHTML=t.description,widgets=a.findWidgets(this.currentTriggerSettings),widgets.forEach((function(t){t.destroyRecursive()})),this.currentTriggerSettings.innerHTML=t.settingsHTML,h.parse(this.currentTriggerSettings),widgets=a.findWidgets(this.currentTriggerDelayUnits),widgets.forEach((function(t){t.destroyRecursive()})),this.currentTriggerDelayUnits.innerHTML=t.delayUnitHTML,h.parse(this.currentTriggerDelayUnits),this.currentTriggerDelayUnit=e("[data-workflow='delay_unit']",this.domNode)[0],this.own(n(this.domNode,"[name=delay-unit]:change",p.hitch(this,"onDelayUnitChange"))),this.setDelaySettings(t),this.onDelayUnitChange(),l.byId("settings_error")&&d.add(l.byId("settings_error"),"hide"),"goal"===this.currentTrigger.key?(e(".goal-url-container",this.domNode).forEach((function(t){var n=""!==e("input",t)[0].value?"show":"hide";e(t).removeClass("hide show").addClass(n)})),this.toggleGoalControls()):"eventApi"===this.currentTrigger.key&&this.own(n(this.domNode,"[name=event-name]:input",p.hitch(this,"onEventNameChange"))),"mdSent"===this.currentTrigger.key||"mdOpen"===this.currentTrigger.key||"mdClick"===this.currentTrigger.key||"mdAny"===this.currentTrigger.key){var i=[];try{(null===(i=JSON.parse(this.currentTrigger.event_data0))||i&&i.constructor!==Array)&&(i=[]),i.constructor===Array&&i.indexOf("*|any|*")>=0&&(i=[])}catch(t){}var o=e("[data-mc-taglist]")[0];this.tagList=new f({values:i,operatorOptions:[{label:"Any",value:"any"}]}).placeAt(o)}},findTriggerWithKey:function(t){var e;return this.triggers.forEach((function(n){n.key===t&&(e=n)})),e},addGoalUrl:function(){var t=e(".goal-url-container",this.domNode),n=e(".goal-events-container",this.domNode)[0];m.some(t,(function(t){if(!g.isVisible(t))return e("input",t)[0].value="",d.add(t,"show"),d.remove(t,"hide"),o.place(t,e(".goal-url-inputs-container",n)[0],"last"),!0})),this.toggleGoalControls()},toggleGoalControls:function(){var t=e('[data-action="add-goal-url"]')[0],n=e(".goal-events-container",this.domNode)[0],i=e(".goal-url-container.show",this.domNode).length;1===i&&(d.remove(t,"hide"),d.remove(n,"multiple-on")),i>1&&i<=3&&(d.remove(t,"hide"),d.add(n,"multiple-on")),4===i&&(d.add(t,"hide"),d.add(n,"multiple-on"))},_validate:function(){if(!this._validateDelay())return d.add(l.byId("delay_offset"),"invalid"),d.remove(l.byId("delay_offset_error"),"hide"),!1;if(this.isMergeBased&&!this._validateMergeDelay())return d.add(l.byId("delay_offset"),"invalid"),d.remove(l.byId("delay_duplicate_error"),"hide"),!1;var t=l.byId("event_data0"),e=l.byId("event_data1"),n=l.byId("event_data2"),i=l.byId("event_data3");return this._validateEventData(t)&&this._validateEventData(e)&&this._validateEventData(n)&&this._validateEventData(i)?"goal"===this.currentTrigger.key&&g.isVisible(t)&&!t.value&&g.isVisible(e)&&!e.value&&g.isVisible(n)&&!n.value&&g.isVisible(i)&&!i.value?(settings_error=l.byId("settings_error"),d.remove(settings_error,"hide"),!1):"eventApi"!==this.currentTrigger.key||t.value.match(this.eventApiPattern)?(d.remove(l.byId("delay_offset"),"invalid"),d.add(l.byId("delay_offset_error"),"hide"),!0):(d.remove(l.byId("settings_error"),"hide"),!1):(d.remove(l.byId("settings_error"),"hide"),!1)},_validateDelay:function(){var t=l.byId("delay_offset").value,e=l.byId("delay_unit").value,n=l.byId("delay_direction").value;if("now"==e)return!0;if(!t.match(/^[0-9]+$/))return!1;var i=parseInt(t,10);return!isNaN(i)&&(!(i<=0)&&(!(i>999)&&("+"==n||"-"==n)))},_validateEventData:function(t){return!t||(!g.isVisible(t)||(input_type=c.get(t,"type"),"checkbox"==input_type||(!!t.value||(d.add(t,"invalid"),!1))))},_validateMergeDelay:function(){var t=!1;return s.post(r.toUrl("/automations/validate-merge-delay"),{data:this._getTriggerSettings(),sync:!0,handleAs:"json"}).then((function(e){t=e.valid})),t},_save:function(){var t={};return s.post(r.toUrl("/automations/email-trigger-post"),{data:this._getTriggerSettings(),sync:!0,handleAs:"json"}).then((function(e){t=e})),"eventApi"===this.currentTrigger.key&&w.googleAnalytics.trackEvent({eventCategory:"Auto Wizard",eventAction:"Clicked Update Trigger",eventLabel:"automation - Event API"}),t},_getTriggerSettings:function(){params={},params.emailId=this.emailId,params.event=this.currentTrigger.key;var t=l.byId("event_data0");params.event_data0=this._getEventDataValue(t);var e=l.byId("event_data1");params.event_data1=this._getEventDataValue(e);var n=l.byId("event_data2");params.event_data2=this._getEventDataValue(n);var i=l.byId("event_data3");params.event_data3=this._getEventDataValue(i),!this.tagList||"mdSent"!==params.event&&"mdOpen"!==params.event&&"mdClick"!==params.event&&"mdAny"!==params.event||(params.md_tags=JSON.stringify(this.tagList.getValues()));var a=l.byId("delay_direction");params.delay_direction=a.value;var o=l.byId("delay_unit");params.delay_unit=o.value;var s=l.byId("delay_offset");return params.delay_offset=s.value,"now"==o.value?params.delay="now":params.delay=a.value+s.value+" "+o.value,params},_getEventDataValue:function(t){return t?(input_type=c.get(t,"type"),"checkbox"==input_type&&t.checked||"checkbox"!=input_type?t.value:null):null},_clearEventDataValue:function(t){if(!t)return null;input_type=c.get(t,"type"),"text"==input_type&&(t.value="")},onDelayUnitChange:function(t){var e=this.currentTriggerDelayUnit.value,n=l.byId("delay_direction");"now"==e?(d.add(this.delayOffsetBlock,"hide"),d.add(n,"hide")):(d.remove(this.delayOffsetBlock,"hide"),this.isMergeBased&&d.remove(n,"hide")),this.getDelayUnit()||c.set(this.currentTriggerDelayUnit,"value","day")},onEventNameChange:function(t){if(t.target.value.match(this.eventApiPattern)||t.target.value.length<=1)return e("code.event-name",this.domNode)[0].innerHTML=t.target.value,void(this.event_name=t.target.value);t.target.value=this.event_name}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11)],void 0===(a=function(t,e){return t([e],{value:"",label:null,mode:"view",setValue:function(t){this.value=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},getValue:function(){return this.value},clear:function(){this.setValue(""),this.setLabel("")},viewMode:function(){this.set("mode","view")},editMode:function(){this.set("mode","edit")},inEditMode:function(){return"edit"===this.mode},inViewMode:function(){return"view"===this.mode},isBlank:function(){return""===this.getValue()},destroy:function(){this.inherited(arguments),this.onDestroy()},focus:function(){this.domNode.focus()},onEnter:function(){return!1},onDestroy:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(28),n(194),n(4),n(3),n(7),n(9),n(37),n(31),n(5),n(1),n(14),n(8),n(308),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){return t(g,{path:"/automations/email-schedule",daysSentWidget:null,timewarpWidget:null,onLoad:function(){this.daysSentWidget=p.byId("days-sent"),this.timewarpWidget=p.byId("use-timewarp"),this.toggleSelectedDaysWarning(),this.toggleSendTimeOptions(),this.setSelectedDays(),this.own(n(this.daysSentWidget,"change",h.hitch(this,"toggleSelectedDaysWarning")),n(this.domNode,"[data-workflow-container=delay-time] select:change",h.hitch(this,"_evaluateValidTimes")),n(this.domNode,"select[name=gate-selection]:change",h.hitch(this,"toggleSendTimeOptions")))},destroy:function(){o.destroy(this.domNode),this.daysSentWidget.destroyRecursive(),this.timewarpWidget&&this.timewarpWidget.destroyRecursive()},_save:function(){var t="",e=h.mixin({emailId:this.emailId,days:a.stringify(this.getSelectedDays())},this._getSchedulingValues());return c.post(m.toUrl("automations/email-schedule-post"),{data:e,sync:!0,handleAs:"text"}).then((function(e){t=e})),t},_validate:function(){return Object.keys(this.getSelectedDays()).length>0},_getSchedulingValues:function(){var t={};return e("input,select",this.domNode).forEach((function(e){"checkbox"==e.type&&(e.checked||(e.value=null)),t[e.name]||(t[e.name]=e.value)})),t},getSelectedDays:function(){var t={},e=p.byId("days-sent"),n=u.filter(e.options,(function(t){return t.selected}));return u.forEach(n,(function(e){t[e.dayOfWeek]=e.value})),t},toggleSelectedDaysWarning:function(){var t=this.getSelectedDays(),n=e(".days-warning-message")[0],i=e("#no_days_selected_error")[0];0===Object.keys(t).length?i.style.display="block":i.style.display="none",Object.keys(t).length<7?n.style.display="block":n.style.display="none"},setSelectedDays:function(){var t=p.byId("days-sent"),e=this._getSavedSelectedDays(),n=[];for(var i in e)n.push(e[i]);t.options.forEach((function(t){n.indexOf(t.value)>=0?t.selected=!0:t.selected=!1}),this),t.onChange(),this.toggleSelectedDaysWarning()},_getSavedSelectedDays:function(){var t;return c.post(m.toUrl("automations/email-schedule-days"),{data:{emailId:this.emailId},sync:!0,handleAs:"json"}).then((function(e){t=e})),t},toggleSendTimeOptions:function(){var t=e("select[name=gate-selection]",this.domNode)[0],n=e(".runtime-start",this.domNode)[0],i=e(".runtime-end",this.domNode)[0],a=e(".range-text",this.domNode)[0],o=e(".timezone-label")[0],s=e(".anytime-label")[0];switch(t.value){case"range":n.style.display="block",i.style.display="block",a.style.display="block",o.style.display="block",s.style.display="none";break;case"time_of_event":n.style.display="none",i.style.display="none",a.style.display="none",o.style.display="none",s.style.display="block";break;case"specific_time":n.style.display="block",i.style.display="none",a.style.display="none",o.style.display="block",s.style.display="none"}},_evaluateValidTimes:function(){var t=e("[name=start-delay-hour]",this.domNode)[0],n=e("[name=start-delay-minute]",this.domNode)[0],i=e("[name=start-delay-period]",this.domNode)[0],a=e("[name=end-delay-hour]",this.domNode)[0],o=e("[name=end-delay-minute]",this.domNode)[0],s=e("[name=end-delay-period]",this.domNode)[0],r=parseInt(t.value),l=parseInt(n.value),d=i.value,c=parseInt(a.value),h=parseInt(o.value),p=s.value;u.forEach(s.options,(function(t){"pm"==d&&"pm"!=t.value?t.disabled="disabled":t.disabled=null})),12==r&&(r=0),"pm"==d&&(r+=12,p="pm",s.value=p);var m=null,g="pm"==p?12:0;u.forEach(a.options,(function(t){var e=parseInt(t.value);r>e+g?t.disabled="disabled":((null===m||m>e)&&(m=e),t.disabled=null)})),null!==m&&c<m&&(c=m,a.value=c),"pm"==p&&(c+=12);var f=null;u.forEach(o.options,(function(t){var e=parseInt(t.value);r==c&&l>e?t.disabled="disabled":((null===f||f>e)&&(f=e),t.disabled=null)})),null!==f&&h<f&&(o.value=f)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(28),n(14),n(4),n(18),n(8),n(17),n(16),n(72),n(10),n(5),n(14),n(200),n(15),n(3),n(7),n(9),n(37),n(1),n(308),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C){return t(_,{path:"/automations/email-segment",selectTriggerPanelShow:!1,triggerSettingsPanel:"",triggerSelectPanel:"",campaignId:null,listId:null,pusherChannel:null,lastJobHash:null,onLoad:function(){var t=this,i=this._getData(this.emailId);this.campaignId=i.campaign_id,this.listId=i.list_id,this.automationHasStarted=i.has_started;var a=i.campaign_id,o=i.list_id;if(formContainer=u.byId("workflow-setup"),!this.automationHasStarted){var l=u.byId("queueCount");f.add(l,"hide")}channelName=this.getPusherChannelName(a),this.pusherChannel=this.initializePusherChannel(channelName),this.pusherChannel.bind("queue_count",(function(t){var e=t.job_hash,n=t.count;if(!0===this.isMostRecentJob(e)){var i=n+" "+(1===n?"subscriber":"subscribers");this.updateQueueCountText(i)}}),this),this.lastJobHash=this.processInitialQueueCount(a),n(formContainer,"[name=segment-type]:click",(function(){var t;switch(e("[data-mc-segment-options]").style("display","none"),e("[data-mc-segment-options="+this.value+"]").style("display","block"),this.value){case"new":t=p.byId("segmentpane-"+o);break;case"saved":t=p.byId("savedsegmentpane");break;default:throw new Error("New segment option does not have a handler")}t.refresh()}));var d="segmentpane-"+this.listId;p.byId(d).on("load",(function(){m.reloadSegmentCallbacks(d)})),n(formContainer,"[name=use-segment]:click",(function(){e(".segment-options-container").style("display",this.checked?"":"none"),t.updateQueueCountText("Calculating subscribers"),t.lastJobHash=t.processCustomSegmentationQueueCount(a,formContainer)})),n(formContainer,"[data-workflow-calculate-count]:click",(function(e){e.preventDefault(),e.stopPropagation(),t.updateQueueCountText("Calculating subscribers"),t.lastJobHash=t.processCustomSegmentationQueueCount(a,formContainer)})),n(formContainer,"[data-workflow-segment-members]:click",(function(n){n.preventDefault(),n.stopPropagation();var i=w.mixin({id:a,"queue-action":"segmentation",__csrf_token:e("[name=__csrf_token]")[0].value},t._getWorkflowValues(formContainer));s.post(r.toUrl("campaigns/wizard/automation/queue-members"),{data:i,sync:!0});var l=r.toUrl("campaigns/segments/popup?id="+a+"&lid="+o),d=window.open(l,"_blank","toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=600,height=400");g.checkPopupWin(d)}))},destroy:function(){this.pusherChannel&&this.terminatePusherChannel(this.pusherChannel.name),this.inherited(arguments)},_getData:function(t){var e;return s.post(r.toUrl("/automations/segment"),{data:{emailId:t},sync:!0,handleAs:"json"}).then((function(t){e=t})),e},_validate:function(){return!0},_save:function(){var t,e=u.byId("workflow-setup"),n=w.mixin({emailId:this.emailId},this._getWorkflowValues(e));return s.post(r.toUrl("/automations/email-segment-post"),{data:n,sync:!0,handleAs:"text"}).then((function(e){t=e})),t},getPusherChannelName:function(t){var e="";return s.get(r.toUrl("automations/get-segmentation-channel-name"),{query:{campaign_id:t},sync:!0,handleAs:"json"}).then((function(t){e=t.channel_name})),e},initializePusherChannel:function(t){var e;return c.load().then((function(n){e=n.subscribe(t)})),e},terminatePusherChannel:function(t){c.load().then((function(e){e.unsubscribe(t)}))},processInitialQueueCount:function(t){var e="";return s.post(r.toUrl("/automations/process-segmentation-queue-count"),{data:{campaign_id:t},sync:!0,handleAs:"json"}).then((function(t){e=t.job_hash})),e},processCustomSegmentationQueueCount:function(t,e){var n=w.mixin({campaign_id:t},this._getWorkflowValues(e)),i="";return s.post(r.toUrl("/automations/process-custom-segmentation-queue-count"),{data:n,sync:!0,handleAs:"json"}).then((function(t){i=t.job_hash})),i},isMostRecentJob:function(t){return null!==this.lastJobHash&&this.lastJobHash===t},updateQueueCountText:function(t){e("[data-workflow-segment-members]")[0].innerHTML=t},_updateSegmentCount:function(t,n){var i=e("[data-workflow-segment-count]");if(i.length){this._clearDelayTimer(),i.html("<p>&nbsp;</p>"),this.delayTimer=setTimeout(w.hitch(this,(function(){i.html("<p>Calculating recipient count...</p>"),this.delayTimer=null})),100);var a=w.hitch(this,(function(t){this._clearDelayTimer();var e,n=t.count;e='<a href="#" data-workflow-segment-members>'+n+" subscriber"+(1!=n?"s":"")+"</a> currently in queue. ",i.html("<p>"+e+' <a href="#" data-workflow-calculate-count>Refresh count</a></p>')})),o=w.hitch(this,(function(){this._clearDelayTimer(),i.html('Failed to get queue count. <a href="#" data-workflow-calculate-count>Try again.</a>')}));this._getSegmentCount(t,n).then(a,o)}},_clearDelayTimer:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},_getSegmentCount:function(t,e){var n=w.mixin({id:t,"queue-action":"segmentation"},this._getWorkflowValues(e));return s.post(r.toUrl("campaigns/wizard/automation/queue-management-count"),{data:n,handleAs:"json"})},_getWorkflowValues:function(t){var n={};return e("input,select",t).forEach((function(t){var e=t.type||"",i=t.value,a=t.name;"select-multiple"==e&&h.forEach(t.options,(function(t){n[a]||(n[a]=[]),t.selected&&n[a].push(t.value)})),"radio"!=e&&"checkbox"!=e||t.checked||(i=null),"tags"==a&&i&&(n[a]||(n.tags=[]),n.tags.push(i)),n[a]||(n[a]=i)})),n}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(28),n(194),n(10),n(4),n(3),n(7),n(9),n(37),n(31),n(5),n(1),n(14),n(8),n(308),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v){return t(f,{path:"/automations/email-postsend",onLoad:function(){c.parse(this.domNode),this.refreshUpdateMergeFields(),this.refreshActionOptions(),this.own(n(this.domNode,"[name=use-actions]:click",(function(){e("[data-container=actions]").style("display",this.checked?"":"none")})),n(this.domNode,"[name=action]:change",p.hitch(this,"refreshActionOptions")),n(this.domNode,"[data-container=action-merge]:change",p.hitch(this,"refreshUpdateMergeFields")))},destroy:function(){widgets=m.findWidgets(this.domNode),widgets.forEach((function(t){t.destroyRecursive()})),s.destroy(this.domNode)},_save:function(){var t="",e=p.mixin({emailId:this.emailId},this._getPostSendValues());return u.post(g.toUrl("/automations/email-postsend-post"),{data:e,sync:!0,handleAs:"text"}).then((function(e){t=e})),t},_validate:function(){return!0},_getPostSendValues:function(){var t={};return e("input,select",this.domNode).forEach((function(e){"checkbox"==e.type&&(e.checked||(e.value=null)),t[e.name]||(t[e.name]=e.value)})),t},refreshUpdateMergeFields:function(){var t=o.byId("merge_id").value;e(".merge-field",this.domNode).forEach((function(e){e.style.display=e.id=="merge-field-"+t?"":"none"}))},refreshActionOptions:function(){actions=e("[name=action]",this.domNode)[0],merge=e("[data-container=action-merge]",this.domNode),merge_value=e("[data-container=action-merge-value]",this.domNode),segment=e("[data-container=action-segment]",this.domNode),grouping=e("[data-container=action-grouping]",this.domNode),merge.style("display","none"),merge_value.style("display","none"),segment.style("display","none"),grouping.style("display","none"),"update_merge"==actions.value?(merge.style("display",""),merge_value.style("display","")):"join_interest"==actions.value||"leave_interest"==actions.value?grouping.style("display",""):"add_segment"!=actions.value&&"remove_segment"!=actions.value||segment.style("display",""),o.byId("join-group-warning").style.display="join_interest"==actions.value?"block":"none"}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(28),n(194),n(10),n(4),n(3),n(7),n(9),n(37),n(31),n(5),n(1),n(14),n(200),n(8),n(15),n(308),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y){return t(b,{path:"/automations/email-queue-add",delayTime:null,onLoad:function(){this.updateSegmentCount();var t=this._getCampaignData();listId=t.list_id,this.own(n(this.domNode,"[data-workflow-segment-members]:click",p.hitch(this,"_openQueueCountPopup",listId)),n(this.domNode,"[data-workflow-calculate-count]:click",p.hitch(this,"updateSegmentCount")),n(this.domNode,"[name=segment-type]:click",(function(){switch(e("[data-mc-segment-options]").style("display","none"),e("[data-mc-segment-options="+this.value+"]").style("display","block"),this.value){case"list":break;case"saved":m.byId("savedsegmentpane").refresh();break;case"new":m.byId("segmentpane-"+listId).refresh();break;default:throw new Error("New segment option does not have a handler")}})));var i="segmentpane-"+listId;m.byId(i).on("load",(function(){g.reloadSegmentCallbacks(i)}))},destroy:function(){widgets=m.findWidgets(this.domNode),widgets.forEach((function(t){t.destroyRecursive()})),s.destroy(this.domNode)},updateSegmentCount:function(){var t=e("[data-workflow-segment-count]",this.domNode)[0];this._clearDelayTimer(),this.delayTimer=setTimeout(p.hitch(this,(function(){t.innerHTML="<p>Calculating recipient count...</p>",this.delayTimer=null})),100);var n=p.hitch(this,(function(e){this._clearDelayTimer();var n=e.count,i='<a href="#" data-workflow-segment-members>'+n+" subscriber"+(1!=n?"s":"")+"</a> will be added to the workflow. ";t.innerHTML="<p>"+i+' <a href="#" data-workflow-calculate-count>Refresh count</a></p>'})),i=p.hitch(this,(function(){this._clearDelayTimer(),t.innerHTML='Failed to get count. <a href="#" data-workflow-calculate-count>Try again.</a>'}));this._getSegmentCount().then(n,i)},_getSegmentCount:function(){var t=p.mixin({id:this.emailId,"queue-action":"add"},this._getWorkflowValues());return u.post(f.toUrl("campaigns/wizard/automation/queue-management-count"),{data:t,handleAs:"json"})},_openQueueCountPopup:function(t){var n=p.mixin({id:this.emailId,"queue-action":"add",__csrf_token:e("[name=__csrf_token]")[0].value},this._getWorkflowValues());u.post(f.toUrl("campaigns/wizard/automation/queue-members"),{data:n,sync:!0,handleAs:"text"});var i=f.toUrl("campaigns/segments/popup?id="+this.emailId+"&lid="+t),a=window.open(i,"_blank","toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=600,height=400");v.checkPopupWin(a)},_clearDelayTimer:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},_getCampaignData:function(){var t;return u.post(f.toUrl("/automations/email-queue-data"),{data:{emailId:this.emailId},sync:!0,handleAs:"json"}).then((function(e){t=e})),t},_getWorkflowValues:function(){var t={};return e("input,select",this.domNode).forEach((function(e){var n=e.type||"",i=e.value,a=e.name;"select-multiple"==n&&h.forEach(e.options,(function(e){t[a]||(t[a]=[]),e.selected&&t[a].push(e.value)})),"radio"!=n&&"checkbox"!=n||e.checked||(i=null),"tags"==a&&i&&(t[a]||(t.tags=[]),t.tags.push(i)),t[a]||(t[a]=i)})),t},_save:function(){var t="",n=p.mixin({id:this.emailId,"queue-action":"add",__csrf_token:e("[name=__csrf_token]")[0].value},this._getWorkflowValues());return u.post(f.toUrl("campaigns/wizard/automation/queue-management-post"),{data:n,sync:!0,handleAs:"text"}).then((function(e){t=e})),t},_validate:function(){return!0}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(6),n(2),n(28),n(194),n(10),n(4),n(3),n(7),n(9),n(37),n(31),n(5),n(1),n(14),n(200),n(8),n(15),n(17),n(16),n(308),n(36),n(70)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_){return t(w,{path:"/automations/email-queue-remove",delayTime:null,onLoad:function(){this.updateSegmentCount();var t=this._getCampaignData(),i=t.list_id,a=t.is_abandoned_cart;this.own(n(this.domNode,"[data-workflow-segment-members]:click",p.hitch(this,"_openQueueCountPopup",i,a)),n(this.domNode,"[data-workflow-calculate-count]:click",p.hitch(this,"updateSegmentCount")),n(this.domNode,"[name=segment-type]:click",(function(){switch(e("[data-mc-segment-options]").style("display","none"),e("[data-mc-segment-options="+this.value+"]").style("display","block"),this.value){case"list":break;case"saved":m.byId("savedsegmentpane").refresh();break;case"new":m.byId("segmentpane-"+i).refresh();break;default:throw new Error("New segment option does not have a handler")}})));var o="segmentpane-"+i;m.byId(o).on("load",(function(){g.reloadSegmentCallbacks(o)}))},destroy:function(){widgets=m.findWidgets(this.domNode),widgets.forEach((function(t){t.destroyRecursive()})),s.destroy(this.domNode)},updateSegmentCount:function(){var t=e("[data-workflow-segment-count]",this.domNode)[0];this._clearDelayTimer(),this.delayTimer=setTimeout(p.hitch(this,(function(){t.innerHTML="<p>Calculating recipient count...</p>",this.delayTimer=null})),100);var n=p.hitch(this,(function(e){this._clearDelayTimer();var n=e.count,i='<a href="#" data-workflow-segment-members>'+n+" subscriber"+(1!=n?"s":"")+"</a> will be removed from the workflow. ";t.innerHTML="<p>"+i+' <a href="#" data-workflow-calculate-count>Refresh count</a></p>'})),i=p.hitch(this,(function(){this._clearDelayTimer(),t.innerHTML='Failed to get count. <a href="#" data-workflow-calculate-count>Try again.</a>'}));this._getSegmentCount().then(n,i)},_getSegmentCount:function(){var t=p.mixin({id:this.emailId,"queue-action":"remove"},this._getWorkflowValues());return u.post(f.toUrl("campaigns/wizard/automation/queue-management-count"),{data:t,handleAs:"json"})},_openQueueCountPopup:function(t,n){var i=p.mixin({id:this.emailId,"queue-action":"remove",__csrf_token:e("[name=__csrf_token]")[0].value},this._getWorkflowValues());u.post(f.toUrl("campaigns/wizard/automation/queue-members"),{data:i,sync:!0,handleAs:"text"});var a=null;a=n?f.toUrl("campaigns/segments/popup?id="+this.emailId+"&lid="+t+"&active=Y,T"):f.toUrl("campaigns/segments/popup?id="+this.emailId+"&lid="+t);var o=window.open(a,"_blank","toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=600,height=400");v.checkPopupWin(o)},_clearDelayTimer:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},_getCampaignData:function(){var t;return u.post(f.toUrl("/automations/email-queue-data"),{data:{emailId:this.emailId},sync:!0,handleAs:"json"}).then((function(e){t=e})),t},_getWorkflowValues:function(){var t={};return e("input,select",this.domNode).forEach((function(e){var n=e.type||"",i=e.value,a=e.name;"select-multiple"==n&&h.forEach(e.options,(function(e){t[a]||(t[a]=[]),e.selected&&t[a].push(e.value)})),"radio"!=n&&"checkbox"!=n||e.checked||(i=null),"tags"==a&&i&&(t[a]||(t.tags=[]),t.tags.push(i)),t[a]||(t[a]=i)})),t},_save:function(){var t="",n=p.mixin({id:this.emailId,"queue-action":"remove",__csrf_token:e("[name=__csrf_token]")[0].value},this._getWorkflowValues());return u.post(f.toUrl("campaigns/wizard/automation/queue-management-post"),{data:n,sync:!0,handleAs:"text"}).then((function(e){t=e})),t},_validate:function(){return!0}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(6),n(1),n(61),n(9),n(3),n(4),n(125),n(36)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([e,n],{paneId:null,templateString:"<div><div data-dojo-attach-point='container'></div></div>",editor:null,postCreate:function(){var t=this;this._defaultContainerStyles(),s.set(this.domNode,"display","none"),o.subscribe("mojo/editor/setup",this,(function(e){t._isValidEditor(e)&&t.setup(e)})),o.subscribe("mojo/editor/ready",this,(function(e){t._isValidEditor(e)&&t.display(e)})),o.subscribe("mojo/editor/done",this,(function(e){t._isValidEditor(e)&&(t.editor==e?t.closeEditor():e.onClose())}))},_defaultContainerStyles:function(){s.set(this.container,{width:"100%",height:"100%",position:"absolute",left:0,top:0,bottom:0,overflow:"hidden",background:"#ffffff"})},_isValidEditor:function(t){return!(t.paneId||this.paneId)||t.paneId===this.paneId},setup:function(t){var e=new d;if(null===this.editor||this.editor&&this.editor!==t){var n=this.editor;this.editor=t;var i=a.hitch(this,(function(){n&&n.onClose(),l.place(this.editor.domNode,this.container,"only"),this.editor.startup(),e.resolve()}));this.editor?this._hide(!0).then(i):i()}else e.resolve();return e},display:function(t){this.setup(t).then(a.hitch(this,(function(){"none"==s.get(this.domNode,"display")&&this._show(!0).then(a.hitch(t,t.onShow))})))},saveEditor:function(){this.editor&&this.editor.save&&this.editor.save(!0)},closeEditor:function(){var t=/^([\S]+)/;if(this.editor&&!this._closing){var e=t.exec(this.editor.domNode.innerText)?t.exec(this.editor.domNode.innerText)[0]:this.editor.type;this._closing=!0,this._hide(!0).then(a.hitch(this,(function(){this.editor.onClose(),this.editor=null,this._closing=!1}))),window.ga("send","event","draft_editor","click",e+"_editor:Cancel")}},_hide:function(t){var e=new d;return i("#content-link.active").length&&i("body:not(.slider-editor)").removeClass("open-drawer"),t?(r.add(this.domNode,"editorPaneHiding"),this._hideAnimation().then(a.hitch(this,(function(){this._hide(!1),r.remove(this.domNode,"editorPaneHiding"),e.resolve()})))):(s.set(this.domNode,"display","none"),e.resolve()),e},_hideAnimation:function(){var t=new d,e=this.domNode.offsetWidth,n=Math.round(100*(e/250+1));return c(this.container,{left:e},{duration:n,easing:"easeOutExpo",complete:a.hitch(this,(function(){t.resolve()}))}),t.promise},_show:function(t){var e=new d;return i("body").addClass("open-drawer"),t?this._showAnimation().then((function(){e.resolve()})):(s.set(this.domNode,"display","block"),e.resolve()),e},_showAnimation:function(){var t=new d;s.set(this.domNode,{display:"block"});var e=this.domNode.offsetWidth;s.set(this.container,{left:e+"px"});var n=Math.round(100*(e/250+1));return c(this.container,{left:"0px"},{duration:n,easing:"easeOutExpo",complete:function(){t.resolve()}}),t.promise}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(11),n(20),n(1173),n(2),n(31),n(1),n(4),n(3),n(5),n(135),n(8)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){return t([e,n,i],{templateString:a,campaignId:null,rowTpl:"<li class='!margin-bottom--lv4'><p class='fwb !margin--lv0'>{label}:</p><p class='!margin--lv0'>{value}</p></li>",showMerge:!1,mergePosition:null,fetching:!1,_fetchRequest:null,postMixInProperties:function(){if(!this.campaignId)throw new Error("HeaderInfoEditor requires a campaignId")},postCreate:function(){this.own(o(this.liveMergeSwitch,"change",r.hitch(this,(function(){this._cancelRequest(),this.liveMergeSwitch.checked?this.nextMember():(this.mergePosition=null,d.remove(this.mergeNextBtn,"disabled"),this.hideMergeControls(),this.refreshHeaderInfo())}))),o(this.mergePrevBtn,"click",r.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.prevMember()}))),o(this.mergeNextBtn,"click",r.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.nextMember()}))),u.onSpecialKey("RIGHT_ARROW",r.hitch(this,(function(){this.liveMergeSwitch.checked&&(this._highlightBtn(this.mergeNextBtn),this.nextMember())}))),u.onSpecialKey("LEFT_ARROW",r.hitch(this,(function(){this.liveMergeSwitch.checked&&(this._highlightBtn(this.mergePrevBtn),this.prevMember())})))),this.refreshHeaderInfo(),this.hideMergeControls()},nextMember:function(){d.contains(this.mergeNextBtn,"disabled")||this.fetching||(null==this.mergePosition?(this.mergePosition=0,this.showMergeControls()):this.mergePosition++,this.refreshHeaderInfo())},prevMember:function(){this.fetching||null==this.mergePosition||(this.mergePosition<=0?(this.mergePosition=null,this.hideMergeControls()):this.mergePosition--,this.refreshHeaderInfo())},refreshHeaderInfo:function(){if(!this.fetching){this.fetching=!0;var t=this;null==this.mergePosition?this._fetchRequest=this._updateHeaderInfo():(this._fetchRequest=this._getPreviewRecipient(this.mergePosition),this._fetchRequest.then((function(e){var n=e.member_id;d.toggle(t.mergeNextBtn,"disabled",e.is_last),t._updateHeaderInfo(n)})))}},showMergeControls:function(){d.remove(this.mergePrevBtn,"hide"),d.remove(this.mergeNextBtn,"hide"),this.refreshHeaderInfo()},hideMergeControls:function(){this.liveMergeSwitch.set("checked",!1),d.add(this.mergePrevBtn,"hide"),d.add(this.mergeNextBtn,"hide")},_highlightBtn:function(t){d.add(t,"active"),setTimeout(r.hitch(this,(function(){d.remove(t,"active")})),200)},_updateHeaderInfo:function(t){var e=this;return e.onMemberLoad(t),this._getHeaderInfo(t).then((function(t){l.empty(e.body);var n=l.toDom("<ul></ul>");c.forEach(t.rows,(function(t){var i=l.place(r.replace(e.rowTpl,t),n);t.meta&&l.place(r.replace("<p class='!margin--lv0 dim-el fwb small-meta'>{meta}</p>",t),i)})),t.info_message?(e.feedbackBody.innerHTML=t.info_message,d.remove(e.feedbackContainer,"hide")):d.add(e.feedbackContainer,"hide"),l.place(n,e.body),e._finishRequest()}))},_finishRequest:function(){this.fetching=!1,this._fetchRequest=null},_cancelRequest:function(){this.fetching&&(this._fetchRequest&&this._fetchRequest.cancel(),this._fetchRequest=null,this.fetching=!1)},_getPreviewRecipient:function(t){var e={id:this.campaignId,pos:t};return s.get(h.toUrl("campaigns/preview-recipient"),{handleAs:"json",query:e})},_getHeaderInfo:function(t){var e={id:this.campaignId,e:t||"default",type:"json"};return s.get(h.toUrl("campaigns/preview-headers"),{query:e,handleAs:"json"})},onMemberLoad:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(5),n(2),n(3),n(19),n(47),n(286),n(58),n(72),n(400),n(727),n(731)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h){var p=t([s],{balance:null,available:null,channel:null,channelName:null,_connectPusher:function(){d.load().then(e.hitch(this,(function(t){this.channel=t.subscribe(this.channelName),this._channelCallback=e.hitch(this,"_updateTokens"),this.channel.bind("tokens-updated",this._channelCallback)})))},_updateTokens:function(t){this.set("balance",t.balance)},_disconnectPusher:function(){this.channel&&(this.channel.unbind(this._channelCallback),d.load().then(e.hitch(this,(function(t){t.unsubscribe(this.channelName)}))))},destroy:function(){this.inherited(arguments),this._disconnectPusher()}}),m=t([s,r],{campaignId:null,templateId:null,tokens:null,previews:null,hasPreviews:!1,clients:null,clientLabels:{web:"Web-based",mobile:"Mobile",client:"Desktop"},numClientsSelected:0,previewsError:null,channel:null,_channelCallback:null,channelName:null,constructor:function(t){e.mixin(this,t),this.previews=new s,this.clients={}},fetchData:function(){var t=this.campaignId?c.getCampaignPreviews(this.campaignId):c.getTemplatePreviews(this.templateId),n=c.getTokens(),i=l({p:t,t:n});return i.then(e.hitch(this,(function(t){this.clients=t.p.clients,this.update(t.p.previews),this.channelName=t.p.pushChannel,this._connectPusher(),this.tokens.balance=t.t.balance,this.tokens.available=t.t.balance,this.tokens.numFreeMonthly=t.t.numFreeMonthly,this.tokens.channelName=t.t.pushChannel,this.tokens._connectPusher()}))),i},update:function(){},runPreview:function(t){this.tokens.set("balance",this.tokens.balance-t.length),this.hasPreviews=!0,t.forEach(e.hitch(this,(function(t){this.previews.set(t,{client:t,status:"queued"})}))),(this.campaignId?c.previewCampaign(this.campaignId,t):c.previewTemplate(this.templateId,t)).then(e.hitch(this,(function(t){this.set("previewsError",t.success?null:t.message),this.update(t.previews)})))},markAsViewed:function(t,n){c.updatePreview(t.preview_id,{viewed:n}).then(e.hitch(this,(function(t){this.previews.set(t.client,t)})))},markAsApproved:function(t,n){c.updatePreview(t.preview_id,{approved:n}).then(e.hitch(this,(function(t){this.previews.set(t.client,t)})))},_connectPusher:function(){d.load().then(e.hitch(this,(function(t){this.channel=t.subscribe(this.channelName),this._channelCallback=e.hitch(this,"_updatePreview"),this.channel.bind("preview-updated",this._channelCallback)})))},_updatePreview:function(t){this.previews.set(t.client,t)},_disconnectPusher:function(){this.channel&&(this.channel.unbind(this._channelCallback),d.load().then(e.hitch(this,(function(t){t.unsubscribe(this.channelName)}))))},destroy:function(){this.inherited(arguments),this._disconnectPusher()}});return t([r],{campaignId:null,templateId:null,contentPaneDom:null,clientPaneDom:null,contentPane:null,clientPane:null,clients:null,previews:null,visible:!1,_ready:!1,constructor:function(t){if(e.mixin(this,t),!this.campaignId&&!this.templateId)throw new Error("Must provide a campaign or a template for inbox preview");if(!this.contentPaneDom)throw new Error("contentPaneDom must be passed to InboxPreview");if(!this.clientPaneDom)throw new Error("clientPaneDom must be passed to InboxPreview");a.add(this.contentPaneDom,"hide"),this.store=new m({campaignId:this.campaignId,templateId:this.templateId,tokens:new p}),this.store.fetchData().then(e.hitch(this,(function(){this._ready=!0,this._setupWidgets()})))},show:function(){this.visible=!0,this._toggleVisibility()},hide:function(){this.visible=!1,this._toggleVisibility()},_toggleVisibility:function(){this._ready&&(a.toggle(this.clientPane.domNode,"hide",!this.visible),a.toggle(this.contentPaneDom,"hide",!this.visible),a.toggle(this.clientPane.domNode,"hide",!this.visible))},_setupWidgets:function(){this.contentPane=new h({store:this.store}),this.contentPane.placeAt(this.contentPaneDom),this.clientPane=new u({store:this.store,onClientSelected:e.hitch(this,(function(t){this.contentPane.set("selectedClient",t.client)}))}),this.clientPane.placeAt(this.clientPaneDom),this._toggleVisibility()},destroy:function(){this.clientPane.destroy(),this.contentPane.destroy(),this.store.destroy(),this.inherited(arguments)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(20),n(1174),n(1175),n(1176),n(1177),n(5),n(1),n(4),n(3),n(6),n(2),n(86),n(80),n(28),n(189),n(728),n(729),n(730),n(17)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_){var C=t([e,n,i],{templateString:s,loading:!1,store:null,client:null,selected:!1,visible:!1,updatable:!1,postMixInProperties:function(){if(!this.client)throw new Error("A client row requires a client");if(!this.store)throw new Error("A store is required for a client row")},postCreate:function(){this.own(p(this.domNode,"click",d.hitch(this,"select")),this.store.previews.watch(this.client.id,d.hitch(this,"_updateRow")),p(this.historyLink,"click",d.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.select(),y.show(this.store,this.client)}))),p(this.rerunLink,"click",d.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.store.runPreview([this.client.id])}))),p(this.selectedBox,"change",d.hitch(this,(function(){var t=this.getPreview();t.approved==this.selectedBox.checked&&this.store.markAsApproved(t,!t.approved),this._toggleUpdateState()}))),this.watch("selected",d.hitch(this,(function(){this._updateSelectedState();var t=this.getPreview();t.viewed||this.store.markAsViewed(t,t.viewed)})))),this._updateRow()},select:function(){this.selected||(this.set("selected",!0),this.onSelected())},deselect:function(){this.set("selected",!1)},_toggleApproveState:function(){var t=this.getPreview();t&&this.selectedBox.set("checked",!t.approved)},_updateSelectedState:function(){u.toggle(this.domNode,"active",this.selected)},isVisible:function(){return this.getPreview()},getPreview:function(){return this.store.previews[this.client.id]},_updateRow:function(){this._toggleVisibility(),this._handlePreviewStatus(),this._toggleUpdateState(),this._toggleViewState(),this._toggleApproveState()},_toggleVisibility:function(){var t=this.getPreview();this.set("visible",null!=t),u.toggle(this.domNode,"hide",!this.visible)},_toggleUpdateState:function(){var t=this.getPreview(),e=this.selectedBox.checked&&"completed"==t.status;this.set("updatable",e)},_toggleViewState:function(){var t=this.getPreview();t&&(this.set("viewed",t.viewed),u.toggle(this.domNode,"unread",!t.viewed&&"completed"==t.status))},_handlePreviewStatus:function(){var t=this.getPreview();if(t)switch(t.status){case"queued":u.add(this.selectedBox.domNode,"hide"),u.add(this.failedIcon,"hide"),u.add(this.actionsContainer,"hide"),u.add(this.rerunContainer,"hide"),u.add(this.historyLink,"hide"),u.remove(this.loadingIndicator,"hide"),this.statusMessage.innerHTML="Waiting...";break;case"completed":u.add(this.loadingIndicator,"hide"),u.add(this.failedIcon,"hide"),u.toggle(this.rerunContainer,"hide",this.store.tokens.balance<=0),u.remove(this.historyLink,"hide"),u.remove(this.actionsContainer,"hide"),u.remove(this.selectedBox.domNode,"hide"),this.statusMessage.innerHTML='<span class="fwb">Updated</span> on '+this._formatDate(t.finished_timestamp),this.rerunLink.innerHTML="Update";break;case"failed":u.add(this.selectedBox.domNode,"hide"),u.add(this.loadingIndicator,"hide"),u.toggle(this.rerunContainer,"hide",this.store.tokens.balance<=0),u.remove(this.actionsContainer,"hide"),u.remove(this.failedIcon,"hide"),u.remove(this.historyLink,"hide"),this.statusMessage.innerHTML="This preview failed to generate",this.rerunLink.innerHTML="Retry this client"}},_formatDate:function(t){var e=new Date(1e3*t);return m.format(e,{formatLength:"medium",timePattern:"h:mm a"})},onSelected:function(){}}),k=t([e,n],{templateString:o,store:null,clientType:null,rows:null,constructor:function(){if(this.clientType)throw new Error("clientType is required");if(this.store)throw new Error("store is required");this.rows=[]},postMixInProperties:function(){this.sectionName=this.store.clientLabels[this.clientType]},postCreate:function(){this._toggleVisibility()},addRow:function(t){t.placeAt(this.rowContainer),this.rows.push(t),this._toggleVisibility(),this.own(this.store.previews.watch(t.client.id,d.hitch(this,"_toggleVisibility")))},isVisible:function(){return l.some(this.rows,(function(t){return t.isVisible()}))},_toggleVisibility:function(){u.toggle(this.domNode,"hide",!this.isVisible())}});return t([e,n],{templateString:a,store:null,sections:null,rows:null,rowsMap:null,selectedRow:null,_previewWatcher:null,numUpdatableRows:0,constructor:function(){this.sections=[],this.rows=[],this.rowsMap={}},postMixInProperties:function(){if(!this.store)throw new Error("store must be passed to client pane")},postCreate:function(){this.createClientRows(),this.selectedRow||this._selectFirstRowWithPreviews(),this.store.hasPreviews=this._hasPreviews(),this.own(p(this.tokensBtn,"click",d.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),w.show(this.store)}))),p(this.addClientBtn,"click",d.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this._showEditor()}))),p(this.updateBtn,"click",d.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this._previewSelectedClients()}))),p(this.getStartedBtn,"click",d.hitch(this,(function(t){t.stopPropagation(),t.preventDefault(),this.store.tokens.balance>0?this._showEditor():this._showTokensEditor()}))),this.store.tokens.watch("balance",d.hitch(this,(function(){this._updateAvailableTokens(),this._toggleUpdateBtn(),this._toggleAddClientBtn(),this._updateTokensBtn(),this._updateGetStartedBtn()}))),this.watch("numUpdatableRows",d.hitch(this,(function(){this._updateAvailableTokens(),this.selectedRow||this._selectFirstRowWithPreviews()}))),this.store.watch("previewsError",d.hitch(this,(function(){this.previewsErrorMsg.innerHTML=this.store.previewsError,u.toggle(this.previewsErrorContainer,"hide",null===this.store.previewsError)})))),this._toggleNoData(),this._toggleUpdateBtn(),this._toggleAddClientBtn(),this._updateTokensBtn(),this._updateRerunLinks()},_showEditor:function(){b.show(this.store).on("close",d.hitch(this,(function(){this._updateRerunLinks()})))},_showTokensEditor:function(){w.show(this.store).on("close",d.hitch(this,(function(){this._hasPreviews()||setTimeout(d.hitch(this,(function(){this._showEditor()})),250)})))},_selectFirstRowWithPreviews:function(){l.some(this.rows,d.hitch(this,(function(t){if(t.isVisible())return t.select(),!0})))},_hasPreviews:function(){return l.some(this.sections,(function(t){return t.isVisible()}))},_updateAvailableTokens:function(){var t=this.getCheckedClients();this.store.tokens.set("available",this.store.tokens.balance-t.length)},_updateRerunLinks:function(){l.forEach(this.rows,d.hitch(this,(function(t){u.toggle(t.rerunContainer,"hide",this.store.tokens.balance<=0)})))},_toggleNoData:function(){this._previewWatcher&&(this._previewWatcher.unwatch(),this._previewWatcher=null);var t=this._hasPreviews(),e=this.store.tokens.balance>0,n=_.pro||"paid"===_.userLevel&&!_.isPayAsYouGo;if(u.toggle(this.addClientBtn.parentNode,"hide",!t),u.toggle(this.updateBtn.parentNode,"hide",!t),u.toggle(this.tokensBtn.parentNode,"hide",!n&&!t&&!e),u.toggle(this.noDataContainer,"hide",t||!e),this.getStartedBtn.innerHTML="Get Started",!t&&!e){var i={isUserMonthlyOrPro:n};f.set(this.litmusHandoffContainer,v(r)(i))}t||(this._previewWatcher=this.store.previews.watch(d.hitch(this,"_toggleNoData")))},_toggleUpdateBtn:function(){var t=this._getNumInQueue();t>0?(u.add(this.updateBtn,"disabled"),u.add(this.updateBtnIcon,"is-running"),this.updateBtnText.innerHTML="Updating",this.updateCount.innerHTML=t):this.numUpdatableRows?(u.toggle(this.updateBtn,"disabled",this.store.tokens.available<0),u.remove(this.updateBtnIcon,"is-running"),this.updateBtnText.innerHTML="Update",this.updateCount.innerHTML=this.numUpdatableRows,this.store.numClientsSelected=this.numUpdatableRows):(u.add(this.updateBtn,"disabled"),u.remove(this.updateBtnIcon,"is-running"),this.updateBtnText.innerHTML="Update",this.updateCount.innerHTML="&nbsp;")},_toggleAddClientBtn:function(){this._getNumInQueue();0==this._getNumNewClients()?(u.add(this.addClientBtn,"disabled"),this.addClientBtn.innerHTML="No more clients"):u.toggle(this.addClientBtn,"disabled",this.store.tokens.balance<=0)},_updateTokensBtn:function(){this.tokensCount.innerHTML=g.format(this.store.tokens.balance)},_updateGetStartedBtn:function(){this.getStartedBtn.innerHTML=this.store.tokens.balance>0?"Get Started":"Buy Tokens To Get Started"},_getNumInQueue:function(){var t=0;for(var e in this.store.previews)this.store.previews.hasOwnProperty(e)&&"queued"==this.store.previews[e].status&&t++;return t},_getNumNewClients:function(){var t=0;for(var e in this.store.clients)this.store.clients.hasOwnProperty(e)&&l.forEach(this.store.clients[e],d.hitch(this,(function(e){this.store.previews[e.id]||t++})));return t},_previewSelectedClients:function(){var t=this.getCheckedClients();t.length&&this.store.runPreview(t)},_createClientSection:function(t){var e=new k({store:this.store,clientType:t});e.startup(),e.placeAt(this.clientLists),l.forEach(this.store.clients[t],d.hitch(this,(function(t){var n=new C({store:this.store,client:t});n.startup(),e.addRow(n),this.rows.push(n),this.rowsMap[t.id]=n,this.own(p(n,"selected",d.hitch(this,(function(){this.select(n.client.id)}))),n.watch("updatable",d.hitch(this,(function(t,e,n){this.set("numUpdatableRows",this.numUpdatableRows+(n?1:-1)),this._toggleUpdateBtn(),this._toggleAddClientBtn()}))))}))),this.sections.push(e)},select:function(t){var e=this.rowsMap[t];e&&(this.deselect(),this.selectedRow=e,this.onClientSelected(this.store.previews[t]))},deselect:function(){this.selectedRow&&(this.selectedRow.deselect(),this.selectedRow=null)},getCheckedClients:function(){var t=[];return l.forEach(this.rows,(function(e){e.updatable&&t.push(e.client.id)})),t},createClientRows:function(){this._createClientSection("client"),this._createClientSection("mobile"),this._createClientSection("web")},destroy:function(){l.forEach(this.sections,(function(t){t.destroy()})),l.forEach(this.rows,(function(t){t.destroy()})),this._previewWatcher&&this._previewWatcher.unwatch(),b.hide(),this.inherited(arguments)},onClientSelected:function(t){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(20),n(5),n(1),n(4),n(7),n(28),n(2),n(3),n(80),n(400),n(150),n(1178),n(1179),n(1180)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f){var v,b=t([e,n,i],{templateString:f,client:null,checked:!1,postCreate:function(){this.own(d(this.domNode,"click",o.hitch(this,(function(){this.set("checked",!this.checked)}))))},onChange:function(t){},_setCheckedAttr:function(t){this.checkBox.set("checked",t),this.checked!=t&&(this._set("checked",t),this.onChange(t))}}),y=t([e,n],{templateString:g,sectionName:"Section Name",clientType:null,store:null,rows:null,numSelectedRows:0,postMixInProperties:function(){if(!this.clientType)throw new Error("clientType must be set");if(!this.store)throw new Error("store must be set");this.sectionName=this.store.clientLabels[this.clientType]},postCreate:function(){var t=this;this.rows=[];var e=this._getAvailableClients();e.length?a.forEach(e,(function(e){var n=new b({client:e});n.startup(),n.placeAt(t.rowContainer),t.own(d(n,"change",(function(e){t.set("numSelectedRows",t.numSelectedRows+(e?1:-1)),t._updateSelectionText()}))),t.rows.push(n)})):c.add(this.domNode,"hide"),this.own(d(this.selectionLink,"click",(function(e){e.preventDefault(),e.stopPropagation(),t.numSelectedRows?t.deselectAll():t.selectAll()})))},_updateSelectionText:function(){var t=0==this.numSelectedRows?"Select All":"Deselect All ("+this.numSelectedRows+")";l.set(this.selectionLink,t)},selectAll:function(){a.forEach(this.rows,(function(t){t.set("checked",!0)}))},deselectAll:function(){a.forEach(this.rows,(function(t){t.set("checked",!1)}))},_getAvailableClients:function(){return a.filter(this.store.clients[this.clientType],o.hitch(this,(function(t){return!this.store.previews||this.store.previews&&!this.store.previews.hasOwnProperty(t.id)})))},getSelectedClients:function(){return a.map(this.getSelectedRows(),(function(t){return t.client.id}))},getSelectedRows:function(){return a.filter(this.rows,(function(t){return t.checked}))},destroy:function(){a.forEach(this.rows,(function(t){t.destroy()})),this.inherited(arguments)}}),w=t([e,n,i,p],{sliderEditor:!0,templateString:m,paneId:"preview",store:null,sections:null,clientsStats:null,preselectedClients:null,constructor:function(){this.sections=[],this.clientsStats=[]},postCreate:function(){this.fetchData().then(o.hitch(this,(function(){this._createSection("client"),this._createSection("mobile"),this._createSection("web"),this._updateAvailableTokens(),this.setupTopClients(),this.setupPreselectedClients(),c.toggle(this.topClientsContainer,"hide",this.hasPreviews()&&!this.hasTopClients())}))),this.own(d(this.addClientsBtn,"click",o.hitch(this,"_selectClients")))},setupTopClients:function(){a.forEach(this.clientsStats,o.hitch(this,(function(t){var e=s.toDom("<li>"+t.name+' <span class="float-right nofloat-small">'+u.format(100*t.percent,{places:1})+"%</span></li>");s.place(e,this.topClients)}))),c.toggle(this.topClientsLink,"hide",!this.hasTopClients())},setupPreselectedClients:function(){this.hasPreviews()||(a.forEach(this.sections,o.hitch(this,(function(t){a.forEach(t.rows,o.hitch(this,(function(t){-1!==this.preselectedClients.indexOf(t.client.id)&&t.set("checked",!0)})))}))),this.preselectedClientsText.innerHTML=this.hasTopClients()?"We’ve preselected your subscribers’ top email clients.":"We’ve preselected the top 10 email clients used by most subscribers.",this.preselectedClientsText.innerHTML+=" You can add more clients for greater coverage"),c.toggle(this.preselectedClientsText,"hide",this.hasPreviews())},hasPreviews:function(){return!0===this.store.hasPreviews},hasTopClients:function(){return this.clientsStats&&this.clientsStats.length>0},fetchData:function(){var t=this.store.campaignId?h.getCampaignClientsStats(this.store.campaignId):h.getTemplateClientsStats(this.store.templateId);return t.then(o.hitch(this,(function(t){this.clientsStats=t.clientsStats,this.preselectedClients=t.preselectedClients}))),t},_selectClients:function(){var t=[];a.forEach(this.sections,(function(e){t=t.concat(e.getSelectedClients())})),this._updateAvailableTokens(),this.store.runPreview(t),this.done()},_getNumSelectedRows:function(){var t=0;return a.forEach(this.sections,(function(e){t+=e.numSelectedRows})),t},_updateAvailableTokens:function(){this.store.tokens.set("available",this.store.tokens.balance-this._getNumSelectedRows())},_updateButtonLabel:function(){var t,e=this._getNumSelectedRows();e>0?(t="Add "+e+" Client"+(1!=e?"s":""),this.store.tokens.available>=0?r.remove(this.addClientsBtn,"disabled"):r.set(this.addClientsBtn,"disabled","disabled")):(t="Add clients",r.set(this.addClientsBtn,"disabled","disabled")),l.set(this.addClientsBtn,t)},_createSection:function(t){var e=new y({clientType:t,store:this.store});return e.startup(),e.placeAt(this.body),this.own(e.watch("numSelectedRows",o.hitch(this,(function(){this._updateAvailableTokens(),this._updateButtonLabel()})))),this.sections.push(e),e},onClose:function(){this.destroy()},_onDone:function(t){t.stopPropagation(),t.preventDefault(),a.forEach(this.sections,(function(t){t.deselectAll()})),this.done()},destroy:function(){a.forEach(this.sections,(function(t){t.destroy()})),this.inherited(arguments)}});return{show:function(t){return v&&!v._destroyed||(v=new w({store:t})),v.show(),v},hide:function(){v&&!v._destroyed&&v.done()}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(20),n(5),n(1),n(4),n(7),n(28),n(2),n(3),n(86),n(400),n(150),n(1181),n(1182)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g){var f,v=t([e,n,i],{templateString:g,selected:!1,postCreate:function(){this.formattedDate.innerHTML=this._formatDate(this.preview.finished_timestamp),this.own(d(this.domNode,"click",o.hitch(this,"select")),this.watch("selected",o.hitch(this,(function(){c.toggle(this.domNode,"active",this.selected)}))))},_formatDate:function(t){var e=new Date(1e3*t);return u.format(e,{formatLength:"medium",timePattern:"h:mm a"})},select:function(){this.selected||(this.set("selected",!0),this.onSelected())},deselect:function(){this.set("selected",!1)},onSelected:function(){}}),b=t([e,n,i,p],{sliderEditor:!0,templateString:m,paneId:"preview",store:null,client:null,clientHistory:null,selectedRow:null,constructor:function(){this.rows=[]},postCreate:function(){this.fetchData().then(o.hitch(this,(function(){a.forEach(this.clientHistory,o.hitch(this,(function(t){var e=new v({preview:t});e.startup(),e.placeAt(this.rowContainer),this.rows.push(e),this.own(d(e,"selected",o.hitch(this,(function(){this.select(e)}))))})))})))},fetchData:function(){var t=this.store.campaignId?h.getCampaignClientHistory(this.store.campaignId,this.client.id):h.getTemplateClientHistory(this.store.templateId,this.client.id);return t.then(o.hitch(this,(function(t){this.clientHistory=t.previews}))),t},select:function(t){this.deselect(),this.selectedRow=t,this.store.previews.set(t.preview.client,t.preview)},deselect:function(){this.selectedRow&&(this.selectedRow.deselect(),this.selectedRow=null)},onClose:function(){var t=this.clientHistory[0];this.store.previews.set(t.client,t),this.destroy()},_onDone:function(t){t.stopPropagation(),t.preventDefault(),this.done()},destroy:function(){a.forEach(this.rows,(function(t){t.destroy()})),this.inherited(arguments)}});return{show:function(t,e){return f&&!f._destroyed||(f=new b({store:t,client:e})),f.show(),f},hide:function(){f&&!f._destroyed&&f.done()}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(20),n(14),n(150),n(1183),n(1184),n(400),n(5),n(1),n(4),n(7),n(28),n(2),n(3),n(80),n(36),n(6),n(309),n(17),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_){var C,k=t([e,n,i],{templateString:r,postCreate:function(){this.own(m(this.domNode,"click",c.hitch(this,"select")),this.watch("selected",c.hitch(this,(function(){g.toggle(this.domNode,"active",this.selected)}))))},select:function(){this.selected||(this.set("selected",!0),this.onSelected())},deselect:function(){this.set("selected",!1)},onSelected:function(){}}),S=t([e,n,i,o],{sliderEditor:!0,templateString:s,paneId:"preview",store:null,canPurchaseTokens:!1,numFreeMonthly:0,hasPurchaseError:!1,constructor:function(){this.tokensBlocks=[]},postMixInProperties:function(){this.numFreeMonthly=this.store.tokens.numFreeMonthly},postCreate:function(){if(g.toggle(this.numFreeMonthlyText,"hide",this.numFreeMonthly<=0),this.fetchData().then(c.hitch(this,(function(){d.forEach(this.tokensBlocks,c.hitch(this,(function(t){(t=new k({block:t})).startup(),t.placeAt(this.blockContainer),this.own(m(t,"selected",c.hitch(this,(function(){this.select(t)}))))})))}))),this.own(m(this.purchaseTokensBtn,"click",c.hitch(this,"_purchaseTokens")),dijit.byId("billingInfo").watch("canPurchase",c.hitch(this,(function(){this.canPurchaseTokens=dijit.byId("billingInfo").get("canPurchase"),this.canPurchaseTokens&&this.selectedBlock?h.remove(this.purchaseTokensBtn,"disabled"):h.set(this.purchaseTokensBtn,"disabled","disabled")})))),b("[data-mc-el='editPaymentAnchor']")[0])new y({step:"payment",workflowMode:!0},b("[data-mc-el='editPaymentAnchor']")[0]);else if(b("[data-mc-el='addPaymentAnchor']")[0])new y({step:"payment",workflowMode:!0},b("[data-mc-el='addPaymentAnchor']")[0]);this.purchasePrompt.innerText="Need more previews?",g.add(this.blockContainer,"hide"),g.add(this.billingHeader,"hide"),g.add(this.actionButtonsPane,"hide"),g.add(a.byId("billingInfo").domNode,"hide"),g.remove(this.litmusUpsell,"hide"),0===this.store.tokens.balance?g.toggle(this.limitedReachedLitmusLink,"hide"):g.toggle(this.signupLitmusLink,"hide")},fetchData:function(){var t=l.getTokensBlocks();return t.then(c.hitch(this,(function(t){this.tokensBlocks=t}))),t},select:function(t){this.deselect(),this.selectedBlock=t,this.canPurchaseTokens&&h.remove(this.purchaseTokensBtn,"disabled")},deselect:function(){this.selectedBlock&&(this.selectedBlock.deselect(),this.selectedBlock=null)},update:function(){this._updateTokensText(),this.selectedClientsCount.innerHTML=this.store.numClientsSelected,g.toggle(this.noTokensContainer,"hide",!0)},onClose:function(){this.destroy()},_onDone:function(t){t.stopPropagation(),t.preventDefault(),this.done()},_updateTokensText:function(){this.tokensCount.innerHTML=f.format(this.store.tokens.balance)},_animatePurchase:function(){var t=this;g.toggle(this.staticTokenImg,"hide"),g.toggle(this.spinningTokenImg,"hide"),v(this.tokenStatusMsg,"transition.slideUpOut",{duration:300,complete:function(){v(t.processingMsg,"transition.slideUpIn",{duration:300,before:function(){g.toggle(t.processingMsg,"hide")},complete:function(){v(t.processingMsg,"transition.slideUpOut",{duration:200,delay:1e3,complete:function(){g.toggle(t.staticTokenImg,"hide"),g.toggle(t.spinningTokenImg,"hide"),g.toggle(t.purchaseErrorContainer,"hide",!t.hasPurchaseError),v(t.tokenStatusMsg,"transition.slideUpIn",{duration:200})}})}})}}),v(this.canBuyTokens,{opacity:.3},{easing:"easeInOut",duration:300,begin:function(){g.add(t.canBuyTokens,"no-clicky")},complete:function(){v(t.canBuyTokens,"reverse",{duration:200,delay:1750,complete:function(){g.remove(t.canBuyTokens,"no-clicky")}})}})},_purchaseTokens:function(){this.hasPurchaseError=!1,g.add(this.noTokensContainer,"hide"),g.add(this.purchaseTokensBtn,"button-loading"),h.set(this.purchaseTokensBtn,"disabled","disabled"),g.add(this.purchaseErrorContainer,"hide"),this._animatePurchase();var t=this.selectedBlock.block.block_id;l.purchaseTokens(t).then(c.hitch(this,(function(t){this.hasPurchaseError=!t.success,t.success?(this._updateTokensText(),setTimeout(c.hitch(this,(function(){this.done()})),1e3)):this.purchaseErrorMsg.innerHTML=t.message,g.remove(this.purchaseTokensBtn,"button-loading"),h.remove(this.purchaseTokensBtn,"disabled")})))}});return{show:function(t){return C&&!C._destroyed||(C=new S({store:t})),C.update(),C.show(),C},hide:function(){C&&!C._destroyed&&C.done()}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(4),n(3),n(1),n(1188)],void 0===(a=function(t,e,n,i,a,o,s){return t([e,n],{templateString:s,imageTpl:'<img src="{src}" class="!margin-bottom--lv8 drop-shadow">',store:null,selectedClient:null,postCreate:function(){this.own(this.store.previews.watch(o.hitch(this,(function(t){this.selectedClient===t&&this._showInboxPreview()})))),this.watch("selectedClient",o.hitch(this,(function(){this._showInboxPreview()}))),this._showInboxPreview()},_showInboxPreview:function(){var t=this.getPreview();if(t)switch(i.empty(this.contentContainer),t.status){case"queued":a.add(this.contentContainer,"hide"),a.add(this.litmusMsgContainer,"hide"),a.remove(this.loadingContainer,"hide"),a.add(this.loadingContainer,"animate-preview-pane");break;case"failed":a.add(this.contentContainer,"hide"),a.add(this.litmusMsgContainer,"hide"),a.remove(this.loadingContainer,"hide"),a.remove(this.loadingContainer,"animate-preview-pane");break;case"completed":i.place(o.replace(this.imageTpl,{src:t.url}),this.contentContainer,"only"),a.add(this.loadingContainer,"hide"),a.remove(this.loadingContainer,"animate-preview-pane"),a.remove(this.contentContainer,"hide"),a.remove(this.litmusMsgContainer,"hide")}else a.add(this.contentContainer,"hide"),a.remove(this.loadingContainer,"hide")},getPreview:function(){return this.selectedClient?this.store.previews[this.selectedClient]:null}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(4),n(2),n(12),n(11),n(29),n(52),n(21),n(16),n(15),n(1189)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return t([a,o],{templateString:u,title:"Review for placeholder content",type:"onLoad",contentType:"text",onContinueCallback:null,onDismissCallback:null,presendChecks:null,trackingLocation:null,dialog:null,postMixInProperties:function(){this.presendChecks.context[1]>0&&(this.contentType="content")},postCreate:function(){this.formatPresendContent(),"onSave"===this.type&&(this.title="Hang on! There’s still placeholder "+this.contentType+"."),this.dialog=new s({title:this.title,content:"onLoad"===this.type?this.onLoad:this.onSave,style:"overflow: auto; width: 500px",onHide:e.hitch(this,(function(){this.onDismissCallback&&this.onDismissCallback(),this.destroyRecursive(),this.trackEvent(this.trackingLocation,"click","placeholder_content:close")}))}),i(this.continueButton,"click",e.hitch(this,(function(){this.onDismissCallback&&this.onDismissCallback(),this.dialog.destroyRecursive(),this.trackEvent(this.trackingLocation,"click","placeholder_content:got_it")}))),i(this.exitButton,"click",e.hitch(this,(function(){this.onContinueCallback(),this.trackEvent(this.trackingLocation,"click","placeholder_content:exit_anyway")}))),i(this.returnButton,"click",e.hitch(this,(function(){this.onDismissCallback&&this.onDismissCallback(),this.dialog.destroyRecursive(),this.trackEvent(this.trackingLocation,"click","placeholder_content:keep_editing")}))),this.dialog.show(),this.trackEvent(this.trackingLocation,"show","placeholder_content")},formatPresendContent:function(){for(var t=this.presendChecks.context[0],e=this.presendChecks.context[1],n=0;n<2;n++)if(t[n]){var i="<li>"+t[n]+"</li>";this.updateContentList(i)}if(0!==e){var a="<li>"+e+r.toPlural(" image",e)+"</li>";this.updateContentList(a)}if(t.length>2){var o="<li> + "+(t.length-2)+" more.</li>";this.updateContentList(o)}},updateContentList:function(t){var e="onLoad"===this.type?this.contentListOnLoad:this.contentListOnSave,i=n.toDom(t);n.place(i,e)},trackEvent:function(t,e,n){t&&e&&n&&window.ga("send","event",t,e,n)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(22),n(32),n(4)],void 0===(a=function(t,e,n){return function(i,a,o){a=a||[],o=o||{};var s=new t;window.dataLayer.push({event:"e_photoeditor",photomethod:"open"});var r=new Image;return r.onload=function(){var t="/image-editor/?url="+i+"&width="+r.naturalWidth+"&height="+r.naturalHeight;a.length&&(t+="&tools="+a.join(","));var l=Object.keys(o).map((function(t){return t+"="+o[t]}));l.length&&(t+="&"+l.join("&"));var d=n.toDom('<iframe style="visibility:hidden;position:absolute;width:100%;height:100%;z-index:100;top:0;left:0;" src="'+t+'"></iframe>');function c(t){var e=JSON.parse(t.data);if("image_editor:show"!==e.event)return"image_editor:close"===e.event?(s.resolve(null),void u()):"image_editor:save"===e.event?(s.resolve(e.image),window.dataLayer.push({event:"e_photoeditor",photomethod:"save",tools:e.tools||[]}),void u()):void 0;d.style.visibility="visible"}function u(){window.removeEventListener("message",c),n.destroy(d)}n.place(d,e.body()),window.addEventListener("message",c)},r.src=i,s.promise}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(40),n(5),n(35),n(0),n(7),n(3),n(4),n(9),n(83),n(23),n(30),n(1),n(2),n(33),n(46),n(84),n(62),n(25),n(11),n(20),n(163),n(126),n(292),n(146),n(1202),n(499)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S){var x=i("dijit._InlineEditor",[v,b,y],{templateString:S,contextRequire:t,postMixInProperties:function(){this.inherited(arguments),this.messages=l.getLocalization("dijit","common",this.lang),e.forEach(["buttonSave","buttonCancel"],(function(t){this[t]||(this[t]=this.messages[t])}),this)},buildRendering:function(){this.inherited(arguments);var n="string"==typeof this.editor?u.getObject(this.editor)||t(this.editor):this.editor,i=this.sourceStyle,a="line-height:"+i.lineHeight+";",o=r.getComputedStyle(this.domNode);e.forEach(["Weight","Family","Size","Style"],(function(t){var e=i["font"+t];o["font"+t]!=e&&(a+="font-"+t+":"+i["font"+t]+";")}),this),e.forEach(["marginTop","marginBottom","marginLeft","marginRight","position","left","top","right","bottom","float","clear","display"],(function(t){this.domNode.style[t]=i[t]}),this);var l=this.inlineEditBox.width;"100%"==l?(a+="width:100%;",this.domNode.style.display="block"):a+="width:"+l+(Number(l)==l?"px":"")+";";var d=u.delegate(this.inlineEditBox.editorParams,{style:a,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new n(d,this.editorPlaceholder),this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,s.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var t=this.editWidget;this.inlineEditBox.autoSave?this.own(n.after(t,"onChange",u.hitch(this,"_onChange"),!0),h(t,"keydown",u.hitch(this,"_onKeyDown"))):"intermediateChanges"in t&&(t.set("intermediateChanges",!0),this.own(n.after(t,"onChange",u.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup(),this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0),this.inherited(arguments)},getValue:function(){var t=this.editWidget;return String(t.get("displayedValue"in t||"_getDisplayedValueAttr"in t?"displayedValue":"value"))},_onKeyDown:function(t){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(t.altKey||t.ctrlKey)return;t.keyCode==c.ESCAPE?(t.stopPropagation(),t.preventDefault(),this.cancel(!0)):t.keyCode==c.ENTER&&"INPUT"==t.target.tagName&&(t.stopPropagation(),t.preventDefault(),this._onChange())}},_onBlur:function(){this.inherited(arguments),this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave()&&f.focus(this.inlineEditBox.displayNode)},enableSave:function(){return!this.editWidget.isValid||this.editWidget.isValid()},focus:function(){this.editWidget.focus(),this.editWidget.focusNode&&(f._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer((function(){C.selectInputText(this.editWidget.focusNode)})))}}),I=i("dijit.InlineEditBox",v,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",renderAsHtml:!1,editor:k,editorWrapper:x,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:p("ie")<=6?"<span style='font-family: wingdings; text-decoration: underline;'>&#160;&#160;&#160;&#160;&#x270d;&#160;&#160;&#160;&#160;</span>":"<span style='text-decoration: underline;'>&#160;&#160;&#160;&#160;&#x270d;&#160;&#160;&#160;&#160;</span>",constructor:function(){this.editorParams={}},postMixInProperties:function(){this.inherited(arguments),this.displayNode=this.srcNodeRef,this.own(h(this.displayNode,g,u.hitch(this,"_onClick")),h(this.displayNode,"mouseover, focus",u.hitch(this,"_onMouseOver")),h(this.displayNode,"mouseout, blur",u.hitch(this,"_onMouseOut"))),this.displayNode.setAttribute("role","button"),this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0),this.value||"value"in this.params||(this.value=u.trim(this.renderAsHtml?this.displayNode.innerHTML:this.displayNode.innerText||this.displayNode.textContent||"")),this.value||(this.displayNode.innerHTML=this.noValueIndicator),o.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(t){d.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",t)},_setDisabledAttr:function(t){this.domNode.setAttribute("aria-disabled",t?"true":"false"),t?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",0),o.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",t),this._set("disabled",t)},_onMouseOver:function(){this.disabled||o.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){o.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(t){this.disabled||(t&&(t.stopPropagation(),t.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){if(this._set("editing",!0),this._savedTabIndex=a.get(this.displayNode,"tabIndex")||"0",!this.wrapperWidget){var t=s.create("span",null,this.domNode,"before"),e="string"==typeof this.editorWrapper?u.getObject(this.editorWrapper):this.editorWrapper;this.wrapperWidget=new e({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:r.getComputedStyle(this.displayNode),save:u.hitch(this,"save"),cancel:u.hitch(this,"cancel"),textDir:this.textDir},t),this.wrapperWidget._started||this.wrapperWidget.startup(),this._started||this.startup()}var n=this.wrapperWidget;o.add(this.displayNode,"dijitOffScreen"),o.remove(n.domNode,"dijitOffScreen"),r.set(n.domNode,{visibility:"visible"}),a.set(this.displayNode,"tabIndex","-1");var i=n.editWidget,l=this;m(i.onLoadDeferred,u.hitch(n,(function(){i.set("displayedValue"in i||"_setDisplayedValueAttr"in i?"displayedValue":"value",l.value),this.defer((function(){n.saveButton&&n.saveButton.set("disabled","intermediateChanges"in i),this.focus(),this._resetValue=this.getValue()}))})))}},_onBlur:function(){this.inherited(arguments),this.editing},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget),this.inherited(arguments)},_showText:function(t){var e=this.wrapperWidget;r.set(e.domNode,{visibility:"hidden"}),o.add(e.domNode,"dijitOffScreen"),o.remove(this.displayNode,"dijitOffScreen"),a.set(this.displayNode,"tabIndex",this._savedTabIndex),t&&f.focus(this.displayNode)},save:function(t){if(!this.disabled&&this.editing){this._set("editing",!1);var e=this.wrapperWidget.getValue();this.set("value",e),this._showText(t)}},setValue:function(t){return d.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",t)},_setValueAttr:function(t){t=u.trim(t);var e=this.renderAsHtml?t:t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>");this.displayNode.innerHTML=e||this.noValueIndicator,this._set("value",t),this._started&&this.defer((function(){this.onChange(t)}))},getValue:function(){return d.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0"),this.get("value")},cancel:function(t){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(t))}});return I._InlineEditor=x,I}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(578),n(1),n(5),n(6),n(19),n(7),n(2),n(37),n(4),n(9),n(31),n(118),n(38),n(17),n(16),n(26),n(229),n(8),n(198),n(199),n(736),n(737),n(738),n(740)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C,k,S){return t([e],{items:{},allowedFileTypes:null,allowedImageSizes:null,allowedFileSizes:null,startup:function(){this.inherited(arguments),this.watch("sourceId",this.render.bind(this)),this.watch("sourceAccountId",this.render.bind(this))},getUrl:function(){},getData:function(t){var e=this.hasFilter("search")?"search":"list";return w[e](this.sourceId,t)},renderLoading:function(){c.set(this.domNode,"display","");var t=n.trim('<li class="size1of1"><div data-dojo-type="mojo/widgets/CircularLoader" data-dojo-props="loaderSize: 100, strokeWidth: 2" class="text-align--center"></div></li>');d.place(t,this.domNode,"only"),this.emptyNode&&d.empty(this.emptyNode),l.parse(this.domNode)},renderContent:function(t,e){o.publish("mojo/content-manager/count",t.items.length),this.items={};var a=i.map(t.items,n.hitch(this,(function(t){var e=this._getDisabledReason(t),n=new C({contentItem:t,contentManager:this.getParent(),disabledReason:e,handleContentSelection:this.handleContentSelection});return this.items[t.contentId]=n,n})));a.some((function(t){if(t.numVersions>1)return!0}))&&f.googleAnalytics.trackEvent("Content Studio","Content Studio Index","multiple_versions"),d.empty(this.domNode),i.map(a,n.hitch(this,(function(t){d.place(t.domNode,this.domNode,"last")})))},renderInstagramNotConnected:function(){c.set(this.domNode,"display","");var t=n.trim('<li class="size1of1"><div data-dojo-type="mojo/widgets/CircularLoader" data-dojo-props="loaderSize: 100, strokeWidth: 2" class="text-align--center"></div></li>');d.place(t,this.domNode,"only"),this.emptyNode&&d.empty(this.emptyNode),l.parse(this.domNode)},_getDisabledReason:function(t){if(this.allowedFileTypes&&!i.some(this.allowedFileTypes,(function(e){return"image"===e?i.some(["png","jpg","jpeg","gif","bmp"],(function(e){return t.fileExtension===e})):t.fileExtension===e})))return t.fileExtension.toUpperCase()+" unsupported";if(this.allowedImageSizes&&t.width&&t.height){var e=this.allowedImageSizes.minWidth||0,n=this.allowedImageSizes.minHeight||0,a=this.allowedImageSizes.maxWidth||Number.MAX_SAFE_INTEGER,o=this.allowedImageSizes.maxHeight||Number.MAX_SAFE_INTEGER;if(t.width<e||t.height<n)return"Too Small";if(t.width>a||t.height>o)return"Too Big"}if(this.allowedFileSizes&&t.sizeInBytes){var s=this.allowedFileSizes.minSize||0,r=this.allowedFileSizes.maxSize||Number.MAX_SAFE_INTEGER;if(t.sizeInBytes>r)return"File Size Over "+y.toFileSize(r);if(t.sizeInBytes<s)return"File Size Under "+y.toFileSize(s)}return null},getSelectionItems:function(){return this.getSelection().map(n.hitch(this,(function(t){return this.items[t].contentItem})))},getItems:function(){return this.items},renderEmpty:function(t,e){o.publish("mojo/content-manager/count",0);var i=e.source;d.empty(this.emptyNode);var a={title:"Add files",message:"Upload images and files to include in your campaigns, templates, or signup forms"};if("product"===i&&(a={title:"There aren&rsquo;t any products here yet",message:"Once you&rsquo;ve set up and connected your e-commerce store, the products you sell will appear here."}),"brand"===i){var s=new _({contentManager:this.getParent()});return s.placeAt(this.emptyNode),void s.startup()}if("instagram"===i)switch(t.status_code?t.status_code-61860:0){case 1:var r=new S;return r.placeAt(this.emptyNode),void r.startup();case 2:a={title:"Instagram permission disabled",message:"Update your Facebook permissions so you can see and use your Instagram images here.",buttonText:"Change Facebook Permissions",buttonLink:"/facebook/login?push=true",buttonNewWindow:!0,handleButtonClick:n.hitch(this,(function(){this._handleAuthClick()}))};break;case 3:var l=new k;return l.placeAt(this.emptyNode),void l.startup();default:a={title:"No Instagram posts yet",message:"When you post to Instagram, the images will show up here."}}if(e.query){var c=p.encode(e.query);switch(i){case"product":a={title:"Products not found",message:"We couldn&rsquo;t find any products that match <strong>&ldquo;"+c+"&rdquo;</strong>. Try broadening your search."};break;case"giphy":a={title:"GIF not found",message:"We couldn&rsquo;t find any GIFs that match <strong>&ldquo;"+c+"&rdquo;</strong>. Try broadening your search."};break;default:a={title:"Goose egg",message:"We couldn&rsquo;t find any files that match <strong>&ldquo;"+c+"&rdquo;</strong>. Try broadening your search."}}}var u="empty-general";"product"===i?u="empty-ecomm":"brand"===i&&(u="empty-brand"),a.icon=u,a.class="noborder";var h=new v(a);h.placeAt(this.emptyNode),h.startup()},_getParams:function(){var t=this.inherited(arguments),e=this.sort.split("-");return t["sort[order]"]=e[1],t["sort[by]"]=e[0],t.query=this.getFilter("search"),t.source=this.sourceId,t.source_account_id=this.sourceAccountId,t},_handleAuthClick:function(){o.publish("mojo/content-manager/api/auth-channel","click")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(2),n(199),n(12),n(11),n(1207)],void 0===(a=function(t,e,n,i,a,o,s){return t([a,o],{templateString:s,contentManager:null,postCreate:function(){n(this.uploadButton,"click",e.hitch(this,(function(){this.logoFileBrowse.click()}))),n(this.logoFileBrowse,"change",e.hitch(this,(function(t){var e=t.target.files||t.dataTransfer.files;e&&1===e.length&&(this._uploadLogo(e[0]),this.logoFileBrowse.form.reset())})))},_uploadLogo:function(t){this.contentManager.uploadFile(t,null,!1).then(e.hitch(this,(function(t){if(!t.error){var n=i.generateContentOriginFromContentItem(t),a=t.getDisplayUrl();i.uploadFromUrl(i.SOURCE_BRAND,n,a,i.CONFLICT_STRATEGY_OVERWRITE).then(e.hitch(this,(function(){this.contentManager.forceRenderFileList()})))}})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(11),n(20),n(14),n(6),n(3),n(7),n(2),n(16),n(17),n(1),n(5),n(1208)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){return t([e,n,i],{templateString:p,contentItem:null,contentManager:null,sourceId:null,contentId:null,contentType:"image",name:"",url:null,thumbnailUrl:null,numVersions:null,meta:"",disabledReason:null,handleContentSelection:null,postMixInProperties:function(){this.sourceId=this.contentItem.sourceId,this.contentId=this.contentItem.contentId,this.contentType="ico"===this.contentItem.fileExtension?"image":this.contentItem.contentType,this.name=this.contentItem.name,this.url=this.contentItem.url,this.thumbnailUrl="ico"===this.contentItem.fileExtension?this.contentItem.url:this.contentItem.getThumbnailUrl(),this.numVersions=this.contentItem.numVersions,"file"===this.contentManager.fileList.sourceId&&this.numVersions++,this.meta=h.map(this.contentItem.getDisplayProperties(),(function(t){return t.value})).join(" · ")},postCreate:function(){l(this.itemInput,"change",u.hitch(this,"handleSelection")),l(this.domNode,"dblclick",u.hitch(this,"handleDblClick")),this.toggleVersionIndicator(),s.toggle(this.gridImageNode,"hide","image"!==this.contentType&&"ico"!==this.contentItem.fileExtension),s.toggle(this.listImageNode,"hide","image"!==this.contentType&&"ico"!==this.contentItem.fileExtension),this.disabledReason&&(s.add(this.domNode,"disabled"),r.set(this.itemInput,"disabled","true"),s.remove(this.itemLabel,"cursor--pointer"),s.add(this.itemLabel,"cursor--not-allowed"),s.add(this.overlay,"hide"),s.remove(this.disabledOverlay,"hide"),s.remove(this.disabledReasonListBadge,"hide"),r.set(this.disabledReasonGridBadge,"textContent",this.disabledReason),r.set(this.disabledReasonListBadge,"textContent",this.disabledReason))},handleDblClick:function(){this.disabledReason||this.contentManager.select(this.contentItem)},handleSelection:function(){s.toggle(this.gridImage,"c-fileGridItem--selected"),this.handleContentSelection&&this.handleContentSelection()},toggleVersionIndicator:function(){s.toggle(this.gridBadge,"hide",this.numVersions<2),s.toggle(this.listBadge,"hide",this.numVersions<2)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(4),n(7),n(2),n(37),n(6),n(31),n(19),n(41),n(12),n(11),n(8),n(229),n(17),n(16),n(739),n(1210),n(5)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y){return t([u,h],{templateString:b,pages:[],postCreate:function(){return this._initializeNewInstagramConnect()},_initializeControl:function(){var t={title:"Instagram isn't connected",message:"Check that your Instagram business profile is connected to the <a href='https://mailchimp.com/help/add-instagram-facebook-page/' target='_blank'>right Facebook page</a>.",class:"noborder"},i=new m(t);i.placeAt(this.instagramConnectMsg),i.startup(),o.once(this.instagramConnectMsg,"click",e.hitch(this,"_handleRedirectToDocumentationClick")),n.remove(this.instagramConnectMsg,"hide")},_initializeNewInstagramConnect:function(){this.createErrorView(),this._refresh(),this.attachClickEvents()},createErrorView:function(){var t={title:"We’re having trouble tracking down your Facebook Page",message:"Refresh this screen to try again.",buttonText:"Refresh",buttonLink:"#",handleButtonClick:e.hitch(this,(function(){this._refresh()})),class:"noborder",icon:"empty-facebook-pages"},n=new m(t);n.placeAt(this.facebookPageError),n.startup()},attachClickEvents:function(){o(this.createPageButton,"click",e.hitch(this,"_handleFacebookPageClick")),o(this.refreshButton,"click",e.hitch(this,"_refresh"))},_refresh:function(){this._hideAllViews(),n.remove(this.facebookPageLoaderNode,"hide"),l.get(p.toUrl("facebook/pages",{u:g.userId}),{handleAs:"json"}).then(e.hitch(this,(function(t){n.add(this.facebookPageLoaderNode,"hide"),this.pages=t.pages,this.pages.length>0?this._initPageInput():this._handleEmptyPageInput()})),e.hitch(this,(function(t){n.add(this.facebookPageLoaderNode,"hide"),this._handleErrorPageInput()})))},_initPageInput:function(){this.pageInput&&this.pageInput.destroy(),this.pageInput=new v({data:this.pages}),this.pageInput.placeAt(this.facebookPageListNode),this.pageInput.startup(),n.remove(this.facebookPageSelect,"hide")},_handleEmptyPageInput:function(){n.remove(this.facebookPageCreate,"hide")},_hideAllViews:function(){n.add(this.facebookPageCreate,"hide"),n.add(this.facebookPageSelect,"hide"),n.add(this.facebookPageError,"hide"),n.add(this.instagramConnectMsg,"hide")},_handleErrorPageInput:function(){n.remove(this.facebookPageError,"hide")},_handleFacebookPageClick:function(){d.publish("mojo/content-manager/api/auth-channel","click")},_handleRedirectToDocumentationClick:function(){d.publish("mojo/content-manager/api/auth-channel","click")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(31),n(19),n(12),n(11),n(165),n(41),n(2),n(3),n(8),n(92),n(1209)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){var m=t([l],{getSelectedOptions:function(){return this.options.filter((function(t){return t.selected}))}});return t([o,s],{templateString:p,label:"",input:null,postCreate:function(){this.buildInput(),this.handleSelection(),this.attachEventHandlers()},attachEventHandlers:function(){d(this.editLink,"click",n.hitch(this,"handleEditLink")),d(this.input,"change",n.hitch(this,"handleSelection")),d(this.refreshButton,"click",n.hitch(this,"_refresh"))},handleEditLink:function(){this.input.toggleDropDown()},handleSelection:function(){this.updateLabel(),this.updateButton(),this.set("page",this.getSelectedPage())},buildInput:function(){this.input=new m({name:"page_id",options:this.getOptions(),_aroundNode:this.dropDownAnchor}),this.input.placeAt(this.inputContainer),this.input.startup()},updateLabel:function(){var t=this.getSelectedPage();this.label.innerText=t.name,t.icon?(c.remove(this.iconUrl,"hide"),this.iconUrl.src=t.icon):c.add(this.iconUrl,"hide")},updateButton:function(){var t=this.getSelectedPage(),e="https://www.facebook.com/"+t.name.replace(/\s+/g,"-")+"-"+t.pageId+"/settings/?tab=instagram_management";this.connectInstagram.href=e},getOptions:function(){return this.data.map(n.hitch(this,(function(t,e){return{label:this.getLabelMarkup({label:t.name,iconUrl:t.icon}),"aria-label":t.name,value:t.pageId,selected:t.pageId===this.selected}})))},getSelectedPage:function(){var t=this.input.getSelectedOptions()[0].value;return h(this.data,{pageId:t})},getLabelMarkup:function(t){return n.replace(this.tplLabelStandard.innerHTML,t)},_refresh:function(){a.publish("mojo/content-manager/instagram-refresh","click")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(3),n(19),n(12),n(11),n(229),n(17),n(16),n(1211)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t([a,o],{templateString:d,postCreate:function(){return this._initializeNewFacebookConnect()},_initializeControl:function(){var t={title:"Facebook isn't connected",message:"Your Instagram images will show up here when you <a href='https://mailchimp.com/help/connect-or-disconnect-the-facebook-integration/' target='_blank'>connect your Facebook page</a> to Mailchimp.",buttonText:"Connect Facebook",buttonLink:"/facebook/login?push=true",buttonNewWindow:!0,handleButtonClick:e.hitch(this,(function(){this._handleFacebookAuthClick()})),class:"noborder"},i=new s(t);i.placeAt(this.facebookConnectMsg),i.startup(),n.remove(this.facebookConnectMsg,"hide")},_initializeNewFacebookConnect:function(){var t={title:"Connect your Facebook Page",message:"Looks like your Facebook page isn’t integrated with Mailchimp yet. Once you connect them, you can use Instagram posts.",buttonText:"Sync Instagram Posts",buttonLink:"/facebook/login?push=true",buttonNewWindow:!0,handleButtonClick:e.hitch(this,(function(){this._handleFacebookAuthClick()})),class:"noborder",icon:"empty-facebook-ron"},i=new s(t);i.placeAt(this.facebookConnectMsg),i.startup(),n.remove(this.facebookConnectMsg,"hide")},_handleFacebookAuthClick:function(){i.publish("mojo/content-manager/api/auth-channel","click")}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(1),n(2),n(43),n(6),n(4),n(3),n(1212),n(12),n(39),n(14),n(15),n(8),n(190),n(134),n(199),n(1214),n(1215),n(1216)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y){var w=t([d,c],{templateString:y});return t([m],{contentManager:null,contentItem:null,currentVersion:null,versionLookUpMap:null,versionGroup:null,overlayClass:"content-manager-details-overlay",templateString:v,sourceId:null,source:null,contentId:null,name:null,_setNameAttr:function(t){this.nameNode.innerText=t,this.fileDescription.innerText=t},url:null,_setUrlAttr:{node:"imageNode",type:"attribute",attribute:"src"},iconUrl:null,_setIconUrlAttr:{node:"fileIcon",type:"attribute",attribute:"src"},download:null,_setDownloadAttr:{node:"downloadNode",type:"attribute",attribute:"href"},close:function(){r.toggle(this.domNode,"hide",!0),window.top.postMessage({channel:"fallback/fullscreen",payload:!1},window.location.origin)},postCreate:function(){a(n.hitch(this,(function(){s.place(this.domNode,o("body")[0])}))),i(this.closeButton,"click",n.hitch(this,"close")),i(this.renameLink,"click",this.handleRename.bind(this)),i(this.deleteLink,"click",this.handleDelete.bind(this)),i(this.insertBtn,"click",this.handleInsert.bind(this)),i(this.copyUrlBtn,"click",this.handleCopyUrl.bind(this)),i(this.editImageBtn,"click",this.handleEdit.bind(this)),this.render(),this.refresh()},show:function(){"forceOnTop"in arguments[0]==!1&&(arguments[0].forceOnTop=!0),this.inherited(arguments)},render:function(){var t=this.contentManager.isActionAvailable("select");r.toggle(this.insertBtn,"hide",!1===t);var e=null!==this.source&&(this.source.isActionSupported(f.SOURCE_ACTION_RENAME)||this.source.isActionSupported(f.SOURCE_ACTION_DOWNLOAD)||this.source.isActionSupported(f.SOURCE_ACTION_DELETE));if(r.toggle(this.actionLinks,"hide",!1===e),null!==this.contentItem){var n=!0===this.contentItem.isImage()&&this.source.isActionSupported(f.SOURCE_ACTION_EDIT);r.toggle(this.editImageBtn,"hide",!1===n),r.toggle(this.imageNode,"hide",!1===this.contentItem.isImage()&&"ico"!==this.contentItem.fileExtension),r.toggle(this.fileMetaContainer,"hide",this.contentItem.isImage()||"ico"===this.contentItem.fileExtension),this._showContentDetails(),this._displayVersions()}},refresh:function(){f.getInfo(this.contentId,this.sourceId).then(this._setContentItem.bind(this))},_setContentItem:function(t){this.contentId=t.contentId,this.sourceId=t.sourceId,this.contentItem=t,this.source=f.getSource(this.sourceId),this._setCurrentVersion(t)},_setCurrentVersion:function(t){this.currentVersion=t,this.render()},_displayVersions:function(){this.revisionLabel.innerText=this.source.revisionUserLabel;var t=this.contentItem.versions.length>0;if(r.toggle(this.revisionContainer,"hide",!t),t){this.versionLookUpMap={};var e=[this.contentItem].concat(this.contentItem.versions);e.forEach(function(t,e){this.versionLookUpMap[e.toString()]=t}.bind(this)),this.versionGroup&&this.versionGroup.destroy(),this.versionGroup=new g({options:e.map((function(t,e){return n.mixin({value:e.toString(),thumbnailUrl:t.getThumbnailUrl(),meta:[t.dimensions,t.size].filter((function(t){return null!=t})).join(" &middot; ")},t)})),templateString:"<ul></ul>",itemTpl:b,activeClass:"v-buttonGroupMenuItem--active"}),this.versionGroup.placeAt(this.revisions),this.versionGroup.startup();var i=e.indexOf(this.currentVersion).toString();this.versionGroup.setSelected(i),this.versionGroup.on("change",function(t){this._setCurrentVersion(this.versionLookUpMap[t])}.bind(this))}},_showContentDetails:function(){this.set("name",this.contentItem.name),this.set("url",p.addProxy(this.currentVersion.url)),this.set("download",this.currentVersion.download),this.set("iconUrl","/images/files/content-manager-"+this.contentItem.contentType+"-white.svg"),this._showPropertyRows()},_showPropertyRows:function(){var t=this.contentItem.getDisplayProperties().concat(this.currentVersion.getDisplayProperties()),n={};e.forEach(t,(function(t){n[t.label]=t})),t=l.values(n);var i=e.map(t,(function(t){return new w(t)}));e.forEach(u.findWidgets(this.properties),(function(t){t.destroyRecursive()})),e.forEach(i,(function(t){t.placeAt(this.properties),t.startup()}),this)},handleRename:function(){this.contentManager.renameContent(this.contentItem).then(this._setContentItem.bind(this))},handleDelete:function(){this.contentManager.deleteFile(this.contentItem.contentId).then(this.hide.bind(this))},handleCopyUrl:function(){this.contentManager.copyUrl(this.currentVersion)},handleEdit:function(){this._disableActionPane(),this.contentManager.editContent(this.currentVersion,this.contentItem.contentId).then(this._enableActionPane.bind(this)).then(this._setContentItem.bind(this))},handleInsert:function(){this.contentManager.select(n.mixin({},this.contentItem,this.currentVersion)),this.hide()},_disableActionPane:function(t){return r.toggle(this.actionPane,"disabled-container",!0),t},_enableActionPane:function(t){return r.toggle(this.actionPane,"disabled-container",!1),t}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1217),n(2),n(63),n(30),n(1),n(22),n(29)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t([e,n],{templateString:i,dialog:null,deferred:null,postCreate:function(){this.deferred=new l;var t=a(this.importButton,"click",r.hitch(this,(function(e){o.stop(e),t.remove(),this.resolve()}))),e=a(this.importInput,"keyup",r.hitch(this,(function(t){var n=t.charCode||t.keyCode;o.stop(t),n===s.ENTER&&this.importInput.value&&(e.remove(),this.resolve()),o.stop(t),n===s.ESCAPE&&(e.remove(),this.cancel())})));a(this.cancelLink,"click",r.hitch(this,(function(t){o.stop(t),this.cancel()})))},execute:function(){this.resolve()},resolve:function(){var t=this.importInput.value;t?(this.deferred.resolve(t),this.dialog.hide()):this.cancel()},cancel:function(){this.deferred.cancel(),this.dialog.hide()},show:function(){this.dialog=new d({title:"Import URL",content:this}),this.dialog.startup(),this.dialog.show(),this.importInput.focus()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1218),n(2),n(7),n(63),n(30),n(1),n(22),n(29)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([e,n],{templateString:i,dialog:null,deferred:null,name:null,extension:null,postCreate:function(){this.deferred=new d;var t=this.name.lastIndexOf("."),e=this.name.substring(0,t);this.extension=this.name.substring(t);var n=a(this.renameButton,"click",l.hitch(this,(function(){n.remove(),this.resolve()})));o.set(this.nameInput,"value",e);var i=a(this.cancelButton,"click",l.hitch(this,(function(){i.remove(),this.cancel()})))},execute:function(){this.resolve()},resolve:function(){var t=o.get(this.nameInput,"value")+this.extension;this.deferred.resolve(t),this.dialog.hide()},cancel:function(){this.deferred.cancel(),this.dialog.hide()},show:function(){this.dialog=new c({title:"Rename File",content:this}),this.dialog.startup(),this.dialog.show(),this.nameInput.select(),this.own(a(this.nameInput,"keyup",l.hitch(this,(function(t){(t.charCode||t.keyCode)===r.ENTER&&this.renameButton.click()}))))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(63),n(1),n(25),n(39),n(29),n(2),n(7),n(30),n(22),n(1219)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c){return t([i,a],{templateString:c,dialog:null,deferred:null,postCreate:function(){this.deferred=new d;var t=s(this.confirmButton,"click",function(){t.remove(),this.resolve()}.bind(this)),e=s(this.cancelButton,"click",function(){e.remove(),this.cancel()}.bind(this))},execute:function(){this.resolve()},resolve:function(){this.deferred.resolve(),this.dialog.hide()},cancel:function(){this.deferred.cancel(),this.dialog.hide()},getPromise:function(){return this.deferred.promise},show:function(){this.dialog=new o({title:"Update default logo",content:this}),this.dialog.startup(),this.dialog.show()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(18),n(8),n(1),n(22),n(17),n(16),n(21)],void 0===(a=function(t,e,n,i,a,o,s,r){return t(null,{userData:null,constructor:function(){var t,i,a,o,s;window.$zopim||(t=document,i="script",a=$zopim=function(t){a._.push(t)},o=a.s=t.createElement(i),s=t.getElementsByTagName(i)[0],a.set=function(t){a.set._.push(t)},a._=[],a.set._=[],o.async=!0,o.setAttribute("charset","utf-8"),o.src="//v2.zopim.com/?3b6ziEnZVB74oBc8AtnqB7kdH8QS4Zst",a.t=+new Date,o.type="text/javascript",s.parentNode.insertBefore(o,s)),$zopim((function(){$zopim.livechat.hideAll()})),this.userData=e.get(n.toUrl("kb/get-support-settings"),{handleAs:"json"})},getChatDeptStatus:function(t){this.userData.then(i.hitch(this,(function(e){if(e.userData){var n=e.userData;$zopim((function(){$zopim.livechat.setOnConnected((function(){var e,i=$zopim.livechat.departments.getDepartment;"pro"===n.user_level||!0===n.golden_monkey?"offline"===(e=i("pro")).status&&(e=i("technical-support")):"offline"===(e=i("technical-support")).status&&(e=i("task-us")),(void 0===e||r.flagIsOn(s.FORCE_CHATS_OFFLINE))&&(e={status:"offline"}),"online"===e.status?t(!0):t(!1)}))}))}})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(7),n(3),n(4),n(59),n(12),n(11),n(1226)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([o,s],{templateString:r,titleTemplate:'<span class="small-meta margin-bottom--lv1">${title}</span>',descriptionTemplate:'<span class="small-meta line-height--lv3 font-weight--normal">${description}</span>',_id:"",name:"",value:"",badge:"",title:null,description:null,checked:!1,disabled:!1,disabledReason:"",type:"checkbox",constructor:function(t){this.inherited(arguments),t._id||console.warn("In order to set the input id for this Choice Card, pass in an '_id' parameter.")},postCreate:function(){if(this.title){var t=a.escape(this.title);i.place(a.substitute(this.titleTemplate,{title:t}),this.containerNode)}if(this.description){var e=a.escape(this.description);i.place(a.substitute(this.descriptionTemplate,{description:e}),this.containerNode)}this.content&&i.place(this.content,this.containerNode),this.input.checked=this.checked,this.setDisabled(this.disabled,this.disabledReason),this.badge&&n.remove(this.badgeNode,"hide")},setDisabled:function(t,i){this.disabled=t,this.disabledReason=i,this.input.disabled=t,n.toggle(this.containerNode,"disabled-container",!!t),this.disabledText.innerText=this.disabledReason,e.set(this.domNode,"title",i||"")},_onClick:function(t){t.target.checked||t.target.blur(),this.onClick&&this.onClick(t)},onClick:function(t){},setChecked:function(t){this.checked=t,this.input.checked=t}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<ul class="line flex flex-direction--column@tablet margin-bottom--lv5 margin-bottom--lv2@tablet c-choiceCardGroup"\n    data-dojo-attach-point="containerNode">\n\n</ul>\n'},function(t,e,n){var i,a;i=[n(0),n(7),n(3),n(4),n(59),n(12),n(11),n(1228)],void 0===(a=function(t,e,n,i,a,o,s,r){return t([o,s],{templateString:r,titleTemplate:'<span class="small-meta margin-bottom--lv1">${title}</span>',descriptionTemplate:'<span class="small-meta line-height--lv3 font-weight--normal">${description}</span>',textBlockTemplate:'<div class="c-choiceCard_image-card--text"><p class="small-meta margin-bottom--lv1 font-weight--normal"><span class="font-weight--bold">${title}</span> in ${listName}</p><p class="small-meta line-height--lv3 font-weight--normal">${description}</p></div>',imageTemplate:'<img src="${imageUrl}" height="110" class="c-choiceCard_image-card--image"/>',_id:"",name:"",value:"",badge:"",imageUrl:"",listName:null,title:null,description:null,checked:!1,disabled:!1,disabledReason:"",type:"checkbox",constructor:function(t){this.inherited(arguments),t._id||console.warn("In order to set the input id for this Choice Card, pass in an '_id' parameter.")},postCreate:function(){if(this.imageUrl){var t=a.escape(this.imageUrl);i.place(a.substitute(this.imageTemplate,{imageUrl:t}),this.imageContainerNode)}if(this.title&&this.description&&this.listName){var e=a.escape(this.title),o=a.escape(this.listName),s=a.escape(this.description);i.place(a.substitute(this.textBlockTemplate,{title:e,listName:o,description:s}),this.containerNode)}else{if(this.title){e=a.escape(this.title);i.place(a.substitute(this.titleTemplate,{title:e}),this.containerNode)}if(this.description){s=a.escape(this.description);i.place(a.substitute(this.descriptionTemplate,{description:s}),this.containerNode)}}this.content&&i.place(this.content,this.containerNode),this.input.checked=this.checked,this.setDisabled(this.disabled,this.disabledReason),this.badge&&n.remove(this.badgeNode,"hide")},setDisabled:function(t,i){this.disabled=t,this.disabledReason=i,this.input.disabled=t,n.toggle(this.containerNode,"disabled-container",!!t),this.disabledText.innerText=this.disabledReason,e.set(this.domNode,"title",i||"")},_onClick:function(t){t.target.checked||t.target.blur(),this.onClick&&this.onClick(t)},onClick:function(t){},setChecked:function(t){this.checked=t,this.input.checked=t}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(10),n(7),n(3),n(6),n(2),n(33),n(52),n(25)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d){return t([d],{regexAstralSymbols:/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,characters:280,postCreate:function(){if(this.defaultText||(this.domNode.innerHTML=this.characters+" characters"),this.inputField){this.countTextNormal=!!a.contains(this.domNode,"font-weight--normal");var t=s.selector("#"+this.inputField,"keyup");if(this.own(s(window.document,t,this._handleKeyup.bind(this))),this.shouldCountOnBoot){var e=o("#"+this.inputField);0===e.length?console.warn("Failed to find inputField '"+this.inputField+"'"):this._countRemainingCharacters(e[0])}}else console.warn("Undefined input field")},_handleKeyup:function(t){var e=t.target;this._countRemainingCharacters(e)},_countRemainingCharacters:function(t){var e=t.value.replace(this.regexAstralSymbols,"_").length;t.value.match(this.regexAstralSymbols)&&i.has(t,"maxlength")&&r("chrome")&&(e=t.value.length),this.remaining=this.characters-e;var n=null;e<=0?(n=this.characters+" characters",i.set(t,"maxlength",this.characters)):n=this.remaining+" "+l.toPlural("character",this.characters-e)+" remaining",this.domNode.innerHTML=n,a.toggle(this.domNode,"textcolor--error opaque",this.remaining<10),this.countTextNormal&&a.toggle(this.domNode,"font-weight--normal",this.remaining>=10)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(15),n(12),n(11),n(20),n(1239),n(582),n(4),n(9),n(28),n(2),n(104),n(1),n(47),n(8),n(59),n(18),n(583),n(29),n(45),n(6),n(7),n(10)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w,_,C){return t("DeliveryStatus",[n,i,a,p],{templateString:o,widgetsInTemplate:!0,campaignId:null,emailsDelivered:null,emailsIntended:null,status:"",allowedStatuses:["loading","progress","success","canceling","canceled"],whyNotCanCancelCode:null,constructor:function(){this.inherited(arguments),this.messages={loading:{primary:"We're sending your campaign...",secondary:null},progress:{primary:"We're sending your campaign...",secondary:null},success:{primary:"Your campaign has been delivered!",secondary:null},canceling:{primary:"Your campaign has been canceled.",secondary:"We’ll notify you as soon as we know which subscribers received this campaign."},canceled:{primary:"Your campaign has been canceled",secondary:"${numRecipients} out of ${numIntended} subscribers received this campaign."}},this.whyNotCanCancelMessages={0:"This delivery can't be stopped because your campaign has already been canceled.",1:"This delivery can't be stopped because your campaign has been deleted.",2:"This delivery can't be stopped because your campaign list has been deleted.",3:"This delivery can't be stopped because your campaign is not a regular or Plain-text campaign.",4:"This delivery can't be stopped because your campaign has not been sent.",5:"This delivery can't be stopped because your campaign's recipient count is fewer than 10,000 subscribers.",6:"This delivery can't be stopped because your campaign has finished sending.",7:"This delivery can't be stopped because your campaign was sent more than three days ago.",9:"You need Admin or Manager permissions to stop this delivery.",10:"This delivery can't be stoppped because this campaign isn't being tracked."}},postCreate:function(){this.inherited(arguments),this.poll=new v(h.hitch(this,this.updateStatus),5e3),this.poll.start(),this.updateStatus(),this.progressMeter=new s,this.progressMeter.placeAt(this.progressMeterContainer),c(this.cancelSendLink,"click",h.hitch(this,(function(){this.confirmCancellation(this.campaignId)}))),this.watch("status",(function(t,e,n){if(-1!=this.allowedStatuses.indexOf(n))switch(this.updateMessaging(n),n){case"loading":this.progressMeter.set("status","loading");break;case"progress":this.progressMeter.set("status","progress");break;case"success":this.progressMeter.set("status","success"),this.canCancel(!1),this.poll.stop();break;case"canceling":this.progressMeter.set("status","canceled"),this.canCancel(!1);break;case"canceled":this.progressMeter.set("status","canceled"),this.canCancel(!1),this.poll.stop()}}))},updateStatus:function(){this.poll.stop(),f.get(m.toUrl("campaigns/get-delivery-status"),{handleAs:"json",query:{id:this.campaignId}}).then(h.hitch(this,(function(t){t.success&&t.data&&(this.updateData(t.data),this.poll.start())})))},updateData:function(t){l.set(this.domNode,"display",t.enabled?"block":"none"),t.emailsDelivered>=0&&(this.emailsDelivered=t.emailsDelivered),t.emailsIntended>=0&&(this.emailsIntended=t.emailsIntended),t.whyNotCanCancel&&t.whyNotCanCancel.code&&(this.whyNotCanCancelCode=t.whyNotCanCancel.code),t.campaignCanceled?t.campaignCancelComplete?this.set("status","canceled"):this.set("status","canceling"):t.sendConfirmed?this.set("status","success"):t.percentComplete>0?(this.set("status","progress"),this.setPercentComplete(t.percentComplete)):this.set("status","loading"),this.canCancel(t.canCancel)},getWhyNotCanCancelReason:function(){var t=parseInt(this.whyNotCanCancelCode);return this.whyNotCanCancelMessages.hasOwnProperty(t)?this.whyNotCanCancelMessages[t]:"This delivery can't be stoppped for an unknown reason. Please contact support for more information."},updateMessaging:function(t){if(-1!=this.allowedStatuses.indexOf(t)){if(this.messages[t].primary?(d.set(this.statusMessagePrimary,this.messages[t].primary),l.set(this.statusMessagePrimary,"display","block")):l.set(this.statusMessagePrimary,"display","none"),this.messages[t].secondary){if(null!==this.emailsDelivered&&null!==this.emailsIntended){var e=g.substitute(this.messages[t].secondary,{numRecipients:this.emailsDelivered,numIntended:this.emailsIntended});d.set(this.statusMessageSecondary,e)}else d.set(this.statusMessageSecondary,this.messages[t].secondary);if("canceled"===this.status){var n=" <a href='"+m.toUrl("/reports/activity/sent?id="+this.campaignId)+"' target='_blank'>View the recipients</a>";r.place(n,this.statusMessageSecondary,"last")}l.set(this.statusMessageSecondary,"display","block")}else l.set(this.statusMessageSecondary,"display","none");d.set(this.whyNotCanCancelMessage,this.getWhyNotCanCancelReason())}},isComplete:function(){return"success"===this.status||"canceled"===this.status},setPercentComplete:function(t){void 0!==t&&this.progressMeter.setPercent(t)},canCancel:function(t){t?(l.set(this.cancelSendLink,"display","block"),l.set(this.whyNotCanCancelMessage,"display","none")):(l.set(this.cancelSendLink,"display","none"),"loading"===this.status||"progress"===this.status?l.set(this.whyNotCanCancelMessage,"display","block"):l.set(this.whyNotCanCancelMessage,"display","none"))},confirmCancellation:function(t){var n=this,i=new b({title:"Are you sure?",onHide:function(){i.destroyRecursive()},onDownloadEnd:function(){c(i.domNode,".cancel-button:click",(function(t){t.stopPropagation(),t.preventDefault(),i.hide()})),w("form",i.domNode).on("submit",(function(t){t.stopPropagation(),t.preventDefault(),e.toggleButtonLoadingState(C.byId("confirmBtn"),"Please wait..."),_.set(C.byId("confirmBtn"),"disabled",!0),f.post(_.get(this,"action"),{data:y.toObject(this),handleAs:"json"}).then((function(t){console.log(t),t.success?(e.toast("Campaign send has been successfully canceled."),n.set("status","canceling")):e.toast("There was a problem canceling your campaign send. Please try again.","error"),i.hide()}),(function(t){console.error(t),i.hide(),e.toast("There was a problem canceling your campaign send. Please try again.","error")}))}))}});i.setHref(m.toUrl("campaigns/confirm-cancel",{id:t})),i.show()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1245),n(1),n(4)],void 0===(a=function(t,e,n,i,a,o){return t("mojo.widgets.DrillNav",[e,n],{templateString:i,itemTemplateString:'<li><a href="#">{name}</a></li>',addNavItem:function(t){return o.place(o.toDom(a.replace(this.itemTemplateString,t)),this.mainNav)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(22),n(3),n(9),n(36),n(12),n(11),n(1264)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t([s,r],{templateString:l,message:"",variant:"dark",postCreate:function(){"light"===this.variant?i.add(this.inlineToast,"c-inlineToast--light"):i.add(this.inlineToast,"c-inlineToast--dark")},showToast:function(){o(this.inlineToast,"stop"),"1"===a.get(this.inlineToast,"opacity")?this._animFadeOut(this.inlineToast):this._animPopIn(this.inlineToast).then(e.hitch(this,(function(){this._animFadeOut(this.inlineToast)})))},_animPopIn:function(t){var e=new n;return o(t,{opacity:["1.0","easeinout","0"],translateY:["0","easeinout","12px"]},{delay:0,duration:200,complete:function(){e.resolve()}}),e},_animFadeOut:function(t){var e=new n;return o(t,{opacity:0},{delay:3e3,duration:400,complete:function(){e.resolve()}}),e}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(134)],void 0===(a=function(t,e){return t([e],{templateString:'<ul class="flex border-bottom"></ul>',itemTpl:'<li class="c-buttonGroupItem"><button type="button" data-mc-value="{value}" title="{title}" class="c-buttonGroupButton normal-meta v-buttonGroupUnderlined no-transform">{label}</button></li>',activeClass:"v-buttonGroupUnderlined--active"})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(26),n(12),n(11),n(1272)],void 0===(a=function(t,e,n,i,a){return t([n,i],{templateString:a,content:a,boldText:"",copyText:"",linkText:"",linkHref:"",imageSrc:"",eventLabel:"",position:"",textAlignment:"",postCreate:function(){"try the templates"===this.buttonLabel.toLowerCase()&&e.googleAnalytics.trackEvent("recommendation block","modal load","grow audience with page templates",{nonInteraction:1}),this.inherited(arguments)},cta:function(t){var n={dimension53:t.target.innerText,dimension54:this.destinationUrl,dimension55:"promo",dimension56:this.event};e.googleAnalytics.trackEvent("front_door","cta",this.buttonLabel,n)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(24),n(1273)],void 0===(a=function(t,e,n){return t([e],{templateString:n})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(1),n(5),n(10),n(7),n(3),n(4),n(9),n(6),n(2),n(60),n(110),n(581)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p){return t([e],{chartId:null,legendId:null,chartData:null,metric:null,previousData:[],postCreate:function(){var t=Object.keys(this.chartData)[0];this.changeMetric(t),c(window,"resize",u(n.hitch(this,"_renderChart"),500))},_renderChart:function(){var t=[h.dataViz.combo1.color1,h.dataViz.combo1.color2,h.dataViz.combo1.color3,h.dataViz.combo1.color4],e={type:"pie",dataProvider:this.getCurrentChartData(),titleField:"gender",valueField:"count",pathToImages:"/charts/amcharts/images/",colors:t,marginBottom:0,marginLeft:0,marginTop:0,startDuration:0,pullOutRadius:"0%",angle:0,depth3D:0,minRadius:2,innerRadius:"80%",labelsEnabled:!1,fontFamily:"'Open Sans','Helvetica Neue',Arial,Helvetica,Verdana,sans-serif",fontSize:14,percentFormatter:{precision:1,decimalSeparator:".",thousandsSeparator:","},balloonText:'<span class="fwb">[[percents]]%</span> <span class="capitalize">[[title]]s</span>',balloon:{borderThickness:0,animationDuration:.25,fadeOutDuration:.25,shadowColor:"transparent",horizontalPadding:12,verticalPadding:6,color:h.white,fillColor:h.dark,cornerRadius:3,fillAlpha:1,textAlign:"left"}};this.amchart=AmCharts.makeChart(this.chartId,e),this.amchart.addListener("clickSlice",this._handleSliceClick)},_renderLegend:function(){var t=a.byId(this.legendId);r.empty(t),i.forEach(this.getCurrentChartData(),n.hitch(this,(function(e,n){var i=this.previousData[n],a='<div class="unit size1of2 small-meta capitalize fwb nowrap"><span class="swatch dataViz--color'+(n+1)+'"></span><span data-mc-group="countUp" data-mc-value-start="'+(i?i.percent:0)+'" data-mc-value-end="'+e.percent+'"></span>% <span class="fwn">'+e.gender+"</span></div>";r.place(a,t)}))),this.previousData=this.getCurrentChartData(),d('[data-mc-group="countUp"]',t).forEach((function(t){var e=new p({startVal:o.get(t,"data-mc-value-start"),endVal:o.get(t,"data-mc-value-end"),decimals:1,duration:.5});e.placeAt(t),e.startup()}))},_renderNoData:function(){l.set(this.chartId,"height","175px"),s.add(this.chartId,"grayscale no-clicky"),this.metric=!1,this._renderChart()},_handleSliceClick:function(t){window.ga("send","event","PD Gender Chart","click",JSON.stringify({gender:t.dataItem.title}))},changeMetric:function(t){this.metric=t,this.chartData[this.metric]?(l.set(this.chartId,"height","150px"),this._renderLegend(),this._renderChart()):this._renderNoData()},getCurrentChartData:function(){return this.chartData[this.metric]?this.chartData[this.metric]:[{gender:"female",count:25},{gender:"male",count:75}]}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(12),n(11),n(1288),n(1),n(5),n(10),n(7),n(3),n(4),n(9),n(2),n(6),n(581),n(36)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m){var g=t([e,n],{templateString:i,label:null,startVal:0,endVal:null,colorClasses:{female:"dataViz--color1",male:"dataViz--color2",other:"dataViz--color3",unknown:"dataViz--color4"},postCreate:function(){this.inherited(arguments),this._renderMeterRow()},_renderMeterRow:function(){for(var t in this.meterLabel.innerHTML=this.label,this.genders){var e=this.startGenders?this.startGenders[t].percent:this.genders[t].percent,n=this.genders[t].percent;if(this.genders.hasOwnProperty(t)){var i=d.toDom('<div data-mc-group="animateWidth" data-gender="'+t+'" data-dojo-attach-point="meterRowSegment" data-end-value="'+n+'" class="'+this.colorClasses[t]+'" style="width:'+e+'%;"></div>');d.place(i,this.meterContainer),u(i,"click",a.hitch(this,(function(t){this._handleRowClick(t)})))}}h("[data-mc-group='animateWidth']").forEach((function(t){endVal=r.get(t,"data-end-value"),m(t,{width:endVal+"%"},{easing:"easeIn",duration:500})})),c.set(this.meterContainer,"width",this.startVal+"%"),m(this.meterContainer,{width:this.endVal+"%"},{easing:"easeIn",duration:500,delay:10}),this.countUp=new p({startVal:this.startVal,endVal:this.endVal,decimals:1,duration:.5}),this.countUp.placeAt(this.meterValue),this.countUp.startup()},_handleRowClick:function(t){window.ga("send","event","PD Age Range Chart","click",JSON.stringify({ageRange:this.label,gender:t.target.dataset.gender}))}});return t([e],{chartData:null,chartContainer:null,previousData:null,postCreate:function(){var t=Object.keys(this.chartData)[0],e=this.chartData[t];e?this._renderChart(e):this._renderNoData()},_renderChart:function(t){d.empty(this.chartContainer),o.forEach(t,a.hitch(this,(function(t,e){var n=this.previousData?this.previousData[e].percent:0,i=this.previousData?this.previousData[e].genders:null;new g({label:t.age_range,startVal:n,endVal:t.percent,startGenders:i,genders:t.genders}).placeAt(this.chartContainer)}))),this.previousData=t},_renderNoData:function(){l.add(this.chartContainer,"grayscale no-clicky"),this._renderChart([{age_range:"18-24",percent:0},{age_range:"50-34",percent:0},{age_range:"35-44",percent:0},{age_range:"45-54",percent:0},{age_range:"55-64",percent:0},{age_range:"64+",percent:0}])},changeMetric:function(t){this.chartData[t]?this._renderChart(this.chartData[t]):this._renderNoData()}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(31),n(1),n(8)],void 0===(a=function(t,e,n){return{getCampaignGenderData:function(t){return this._getGenderData({campaign_id:t})},getListGenderData:function(t){return this._getGenderData({list_id:t})},getCampaignGenderByAgeRangeData:function(t){return this._getGenderByAgeRangeData({campaign_id:t})},getListGenderByAgeRangeData:function(t){return this._getGenderByAgeRangeData({list_id:t})},_getGenderData:function(e){return t.get(n.toUrl("/predicted-demographics/get-gender-data"),{handleAs:"json",query:e})},_getGenderByAgeRangeData:function(e){return t.get(n.toUrl("/predicted-demographics/get-gender-by-age-range-data"),{handleAs:"json",query:e})}}}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(25),n(39),n(1294),n(37),n(3),n(147),n(110)],void 0===(a=function(t,e,n,i,a,o,s,r,l){return t([n,i],{templateString:a,maxValue:8,value:1,setValue:function(t){this.render()},render:function(){var t,e,n=this.width||160,i=this.height||160,a=this.radius||n/2,o=r.scale.linear().range([0,360]).domain([0,this.maxValue]);t=r.select(this.segmentDial).append("svg:svg").attr("class","dial block").attr("width",n).attr("height",i).attr("style","margin: 0 auto").append("svg:g").attr("transform","translate("+a+", "+a+")"),e=l.brandColors.parsnip.hex,t.append("svg:circle").attr("r",a-4).attr("class","dial").style("fill","white").attr("stroke",e).attr("stroke-width",8),this.dial=t;var s,d=r.svg.arc().innerRadius(a-8).outerRadius(a).startAngle(0);this.arc=d,s=l.brandColors.apple.hex;var c=t.append("svg:path").datum({endAngle:0}).style("fill",s).attr("d",d);this.path=c,t.append("svg:g").attr("class","ticks").selectAll(".tick").data(r.range(0,this.maxValue)).enter().append("svg:line").attr("class","tick").attr("x1",-1).attr("x2",-1).attr("y1",a+1).attr("y2",a-9).attr("transform",(function(t){return"rotate("+(180+o(t))+")"})).style("fill","none").attr("stroke-width",4).attr("stroke","white")},drawArc:function(t,e){var n=2*Math.PI/this.maxValue*t,i=2*Math.PI/this.maxValue*e;this.path.datum({endAngle:n}).transition().ease("elastic",1,2).duration(200).call((function(t,e,n){t.attrTween("d",(function(t){var i=r.interpolate(t.endAngle,e);return function(e){return t.endAngle=i(e),n(t)}}))}),i,this.arc)},updateLabel:function(){s.toggle(this.maxLabel,"hide",this.value<this.maxValue);var t=this;r.select(this.valueLabel).transition().duration(200).tween("text",(function(){var e=r.select(this),n=r.interpolate(e.text(),t.value);return function(t){e.text(Math.round(n(t)))}}))},updateZeroLabel:function(){s.toggle(this.maxZeroLabel,"hide",this.value>0)},postCreate:function(){this.render(),this.watch("value",e.hitch(this,(function(t,e,n){this.drawArc(e,n),this.updateLabel(),this.updateZeroLabel()})))}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(1),n(37),n(14),n(1296),n(6),n(4),n(44)],void 0===(a=function(t,e,n,i,a,o,s){return t([a],{placeHolder:null,constructor:function(t){var e=this.placeHolder=s.create("div");o(t).children().forEach((function(t){i.findWidgets(t).forEach((function(t){t.destroy(!0)})),s.place(t,e)}))},createView:function(t){var i=e.clone(o(this.placeHolder).children()[t]);return n.parse(i),i},getCount:function(){return o(this.placeHolder).length},destroy:function(){s.destroy(this.placeHolder)}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(587),n(4),n(10)],void 0===(a=function(t,e,n,i){return t([e],{sliderLabelHtml:'<div role="presentation" aria-hidden="true" data-mc-el="sliderValueLabel" class="slider-label alignc relative inline-block fwb small-meta border-radius--lv1"></div>',postCreate:function(){this.inherited(arguments),this.sliderLabel=n.place(this.sliderLabelHtml,this.sliderComponents,"last"),this.sliderLabel.innerHTML=this.value},_mouseWheeled:function(){}})}.apply(e,i))||(t.exports=a)},function(t,e,n){var i,a;i=[n(0),n(5),n(60),n(3),n(4),n(9),n(2),n(12),n(11),n(20),n(590),n(1299)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u){return t([r,l,d],{templateString:u,actions:{},status:{},icon:{classes:""},title:"",label:"",badge:{type:"",label:""},badgeOptions:{},actionOptions:[],_createBadgeOptions:function(){this.badgeOptions.draft={type:"",label:"Draft"},this.badgeOptions.pending={type:"warning",label:"In review"},this.badgeOptions.scheduled={type:"warning",label:"Scheduled"},this.badgeOptions.active={type:"info",label:"Published"},this.badgeOptions.paused={type:"warning",label:"Paused"},this.badgeOptions.rejected={type:"error",label:"Rejected"},this.badgeOptions.completed={type:"success",label:"Completed"}},postMixInProperties:function(){this.inherited(arguments),this._createBadgeOptions(),this.title=this.status.title,this.label=this.status.label,this.badge=this.badgeOptions[this._getStatusName()]},postCreate:function(){this.inherited(arguments);var t=this;this._createActions(),this._placeActions(),this._createActionOptions(),this._setAvailableActions(),s(window,"resize",n((function(e){t._onResize()}),100))},render:function(t,e){return this.placeAt(e),this._onResize(),this},_onResize:function(){this.actionContainerDesktop&&("none"===o.get(this.actionContainerDesktop,"display")?a.place(this.actions.containerNode,this.actionsMobile):a.place(this.actions.containerNode,this.actionsDesktop))},_createActions:function(){this.actions=new c({status:this.status})},_placeActions:function(){a.place(this.actions.containerNode,this.actionsDesktop),this.actions.startup()},_createActionOptions:function(){},_setAvailableActions:function(){var t=this;e.forEach(this.actionOptions[this._getStatusName()],(function(n){e.forEach(t.actions.containerNode.childNodes,(function(t){i.toggle(n,"hide",n===t)}))}))},_getStatusName:function(){return this.status.name}})}.apply(e,i))||(t.exports=a)},function(t,e){t.exports='<div>\n    <div data-dojo-attach-point="dataTable" class="subscriber-table-wrap sub-section">\n        <div class="subscriber-table full-width !margin-bottom--lv3">\n            <div class="st fixed-header selfclear relative">\n                <div class="full-width inner" data-dojo-attach-point="accessibleTableHeaderBody">\n                    <table class="table-header" role="presentation" data-dojo-attach-point="accessibleTableHeader"></table>\n                </div>\n            </div>\n            <div data-dojo-attach-point="subscriberTableBody" class="st table-body selfclear relative">\n                <div class="full-width inner" data-dojo-attach-point="accessibleTableBody">\n                    <table class="table-contents" data-dojo-attach-point="accessibleTable"></table>\n                </div>\n            </div>\n        </div>\n        <div data-dojo-attach-point="subscriberTableBottomPaging" class="line overflow-visible table-pagination !margin-bottom--lv4 selfclear">\n            <div class="unit size1of2 maintain-width nochange !margin-bottom--lv3">\n                <div data-dojo-attach-point="bottomPageSizeSelect"></div>\n            </div>\n            <div class="lastUnit size1of2 nochange alignr !margin-bottom--lv3">\n                <div data-dojo-attach-point="bottomPaging"></div>\n            </div>\n        </div>\n        <div data-dojo-attach-point="subscriberTableOverlay" class="st-overlay">\n            <div class="margin--lv8">\n                <div class="alignc padding--lv6" data-dojo-attach-point="loaderDom"></div>\n            </div>\n        </div>\n    </div>\n\n    <div data-dojo-attach-point="noData" class="hide"></div>\n</div>\n'},function(t,e,n){var i,a;i=[n(0),n(25),n(39),n(1),n(10),n(5),n(4),n(2),n(7),n(3),n(96),n(466),n(19),n(115),n(6),n(17),n(1301),n(1302),n(591),n(592),n(16)],void 0===(a=function(t,e,n,i,a,o,s,r,l,d,c,u,h,p,m,g,f,v,b,y,w){var _={allowHtml:!0,pageSize:g.settings.pageSize,sort:"query"};return t([e,n],{templateString:f,showPagination:!0,persistTableSettings:!0,page:1,constructor:function(){this.store=new u(new c)},postMixInProperties:function(){this.options=i.mixin({},_,this.options),this.reloadNoDataMsg(),this.setDefaults()},reloadNoDataMsg:function(){var t="egg";if(this.srcNodeRef){var e=l.get(this.srcNodeRef,"data-mojo-nodataicon");e&&(t=e)}this.options.noDataDom?this.noDataMsg=m(this.options.noDataDom).html():this.noDataMsg=this.options.noDataMsg||i.replace(v,{icon:t})},setDefaults:function(){if(this.persistTableSettings){var t=p();if(t){var e=t.split("-");e&&e.length&&o.forEach(e,i.hitch(this,(function(t){var e=t.split(":");switch(e[0]){case"p":this.page=parseInt(e[1],10);break;case"s":this.pageSize=parseInt(e[1],10);break;case"sa":this.sortAttr=e[1];break;case"so":this.sortOrder="true"==e[1]}})))}if(this.page<=0&&(this.page=1),this.pageSize>100&&(this.pageSize=100),this.pageSize||(this.pageSize=this.options.pageSize),this.pageSize||(this.pageSize=25),void 0!==this.sortAttr){var n=this.sortOrder;void 0===this.sortOrder&&(n=!1),this.query.setSort(this.sortAttr,n)}}},persistSettings:function(){if(this.persistTableSettings){var t=[];t.push("p:"+this.page),t.push("s:"+this.pageSize),this.sortAttr&&t.push("sa:"+this.sortAttr),void 0!==this.sortOrder&&t.push("so:"+this.sortOrder),p(t.join("-"),!0),g.saveSetting("vis_grid_page_size",this.pageSize)}},postCreate:function(){this.showPagination&&(this.topPaging&&(this.topPaging=new b({target:this},this.topPaging)),this.topPageSizeSelect&&(this.topPageSizeSelect=new y({target:this},this.topPageSizeSelect)),this.bottomPaging&&(this.bottomPaging=new b({target:this},this.bottomPaging)),this.bottomPageSizeSelect&&(this.bottomPageSizeSelect=new y({target:this},this.bottomPageSizeSelect))),this.instantiateSort(),this.watch("page",i.hitch(this,(function(){this.refresh(!1,!0)}))),this.watch("pageSize",i.hitch(this,(function(){1==this.page?this.refresh():this.set("page",1)}))),this.options.wait||this.refresh()},instantiateSort:function(){var t=this;r(this.domNode,"th:click",(function(){var e=t.sortAttr;t.sortAttr=l.get(this,"data-mojo-table-sort"),(null===t.sortable||o.indexOf(t.options.sortable,t.sortAttr)>=0)&&(t.sortOrder=e!=t.sortAttr||!t.sortOrder,t.performSort(t.sortAttr,t.sortOrder),t.addSortClass(this))}))},performSort:function(t,e){var n=this;"client"==this.options.sort?(s.empty(this.body),this.store.query({},{sort:[{attribute:t,descending:!e}]}).forEach((function(t){var e=s.place("<tr></tr>",n.body);o.forEach(n.headers,(function(){}