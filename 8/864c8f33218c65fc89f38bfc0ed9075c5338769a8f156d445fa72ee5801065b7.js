/*! For license information please see 31.a88f7ee293077ee7d33b.js.LICENSE.txt */
(self.webpackChunk_solo_marketing=self.webpackChunk_solo_marketing||[]).push([[31],{2270:function(e,t,r){var n;!function(o){"use strict";var i,a,c,s,u,l,f,p,h,d,y,g,v,b,m,w,S;function k(e){return void 0===e}function x(e){return null!=e}function E(e){return L(e,Number)&&e>v&&e<b}function O(e){return"number"==typeof e&&e%1==0}function T(e,t){return E(e)&&e>t}function P(e,t){return E(e)&&e<t}function j(e,t){return E(e)&&e>=t}function _(e,t){return E(e)&&e<=t}function A(e){return L(e,String)}function C(e){return A(e)&&""!==e}function R(e){return"[object Object]"===h.call(e)}function D(e,t){for(var r in e)if(p.call(e,r)&&t(r,e[r]))return!0;return!1}function I(e,t){try{return e instanceof t}catch(e){return!1}}function L(e,t){try{return I(e,t)||e.constructor.name===t.name||h.call(e)==="[object "+t.name+"]"}catch(e){return!1}}function M(e,t){var r,n=x(e),o=x(t);if(!n&&o||n&&!o)return!1;for(r in t)if(p.call(t,r)){if(!1===p.call(e,r)||typeof e[r]!=typeof t[r])return!1;if(R(e[r])&&!1===M(e[r],t[r]))return!1}return!0}function N(e){return x(e)&&e.length>=0}function F(e){return m?x(e)&&G(e[Symbol.iterator]):N(e)}function B(e,t){var r,n;if(!x(e))return!1;if(S&&I(e,Set))return e.has(t);if(A(e))return-1!==e.indexOf(t);if(m&&e[Symbol.iterator]&&G(e.values)){r=e.values();do{if((n=r.next()).value===t)return!0}while(!n.done);return!1}return D(e,(function(e,r){return r===t}))}function U(e,t){return!!x(e)&&(w&&I(e,Map)?e.has(t):!(F(e)&&!E(+t))&&e.hasOwnProperty(t))}function G(e){return"function"==typeof e}function z(e,t){for(var r in e)p.call(e,r)&&t(r,e[r])}function V(e,t){var r;for(r=0;r<e.length;r+=1)if(e[r]===t)return t;return!t}function q(e,t){var r,n;for(r in e)if(p.call(e,r)){if(R(n=e[r])&&q(n,t)===t)return t;if(n===t)return t}return!t}function K(e,t){return z(t,(function(t,r){e[t]=r})),e}function W(e,t){return function(){var r=arguments,n=e.l||e.length,o=r[n],i=r[n+1];return Y(e.apply(null,r),C(o)?o:t.replace("{a}",H(r[0])).replace("{e}",H(r[1])).replace("{e2}",H(r[2])).replace("{t}",(function(){var e=r[1];return e&&e.name?e.name:e})),G(i)?i:TypeError),r[0]}}function H(e){return function(){return A(e)?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':e&&!0!==e&&e.constructor&&!I(e,RegExp)&&"number"!=typeof e?e.constructor.name:e}}function Y(e,t,r){if(e)return e;throw new(r||Error)(t||"assert failed")}function X(e){var t=function(){return J(e.apply(null,arguments))};return t.l=e.length,t}function J(e){return!e}function $(e,t,r){var n=function(){var n,o;if(n=arguments[0],"maybe"===e&&u.assigned(n))return!0;if(!t(n))return!1;n=Q(t,n),o=y.call(arguments,1);try{if(g(n))for(var i=0;i<n.length;i++){var a=n[i];if(("maybe"!==e||x(a)&&r!==k)&&!r.apply(null,[a].concat(o)))throw 0}else n.forEach((function(t){if(("maybe"!==e||x(t))&&!r.apply(null,[t].concat(o)))throw 0}))}catch(e){return!1}return!0};return n.l=r.length,n}function Q(e,t){switch(e){case N:return y.call(t);case R:return d(t).map((function(e){return t[e]}));default:return t}}function Z(e,t){return ee([e,a,t,""])}function ee(e){var t,r,n;return t=e.shift(),r=e.pop(),n=e.pop(),z(e.pop(),(function(o,a){var c=i[o];c&&r&&(c=c.replace("to",r+"to")),Object.defineProperty(n,o,{configurable:!1,enumerable:!0,writable:!1,value:t.apply(null,e.concat(a,c))})})),n}function te(e,t,r){return ee([e,t,{},r])}function re(e,t){f.forEach((function(r){e[r].of=te(t,a[r].of)}))}i={},a={},[{n:"equal",f:function(e,t){return e===t},s:"equal {e}"},{n:"undefined",f:k,s:"be undefined"},{n:"null",f:function(e){return null===e},s:"be null"},{n:"assigned",f:x,s:"be assigned"},{n:"primitive",f:function(e){var t;switch(e){case null:case void 0:case!1:case!0:return!0}return"string"===(t=typeof e)||"number"===t||m&&"symbol"===t},s:"be primitive type"},{n:"contains",f:B,s:"contain {e}"},{n:"in",f:function(e,t){return B(t,e)},s:"be in {e}"},{n:"containsKey",f:U,s:"contain key {e}"},{n:"keyIn",f:function(e,t){return U(t,e)},s:"be key in {e}"},{n:"zero",f:function(e){return 0===e},s:"be 0"},{n:"one",f:function(e){return 1===e},s:"be 1"},{n:"infinity",f:function(e){return e===v||e===b},s:"be infinity"},{n:"number",f:E,s:"be Number"},{n:"integer",f:O,s:"be integer"},{n:"float",f:function(e){return E(e)&&e%1!=0},s:"be non-integer number"},{n:"even",f:function(e){return"number"==typeof e&&e%2==0},s:"be even number"},{n:"odd",f:function(e){return O(e)&&e%2!=0},s:"be odd number"},{n:"greater",f:T,s:"be greater than {e}"},{n:"less",f:P,s:"be less than {e}"},{n:"between",f:function(e,t,r){if(t<r)return T(e,t)&&e<r;return P(e,t)&&e>r},s:"be between {e} and {e2}"},{n:"greaterOrEqual",f:j,s:"be greater than or equal to {e}"},{n:"lessOrEqual",f:_,s:"be less than or equal to {e}"},{n:"inRange",f:function(e,t,r){if(t<r)return j(e,t)&&e<=r;return _(e,t)&&e>=r},s:"be in the range {e} to {e2}"},{n:"positive",f:function(e){return T(e,0)},s:"be positive number"},{n:"negative",f:function(e){return P(e,0)},s:"be negative number"},{n:"string",f:A,s:"be String"},{n:"emptyString",f:function(e){return""===e},s:"be empty string"},{n:"nonEmptyString",f:C,s:"be non-empty string"},{n:"match",f:function(e,t){return A(e)&&!!e.match(t)},s:"match {e}"},{n:"boolean",f:function(e){return L(e,Boolean)},s:"be Boolean"},{n:"object",f:R,s:"be Object"},{n:"emptyObject",f:function(e){return R(e)&&!D(e,(function(){return!0}))},s:"be empty object"},{n:"nonEmptyObject",f:function(e){return R(e)&&D(e,(function(){return!0}))},s:"be non-empty object"},{n:"inheritance",f:function(e,t){try{return x(e)&&e.prototype instanceof t}catch(e){return!1}},s:"inherit from {t}"},{n:"instanceStrict",f:I,s:"be instanceof {t}"},{n:"thenable",f:function(e){return x(e)&&G(e.then)},s:"be promise-like"},{n:"instance",f:L,s:"be {t}"},{n:"like",f:M,s:"be like {e}"},{n:"array",f:function(e){return g(e)},s:"be Array"},{n:"nan",f:function(e){return isNaN(e)},s:"be NaN"},{n:"emptyArray",f:function(e){return g(e)&&0===e.length},s:"be empty array"},{n:"nonEmptyArray",f:function(e){return g(e)&&e.length>0},s:"be non-empty array"},{n:"arrayLike",f:N,s:"be array-like"},{n:"iterable",f:F,s:"be iterable"},{n:"date",f:function(e){return I(e,Date)&&O(e.getTime())},s:"be valid Date"},{n:"function",f:G,s:"be Function"},{n:"hasLength",f:function(e,t){return x(e)&&e.length===t},s:"have length {e}"},{n:"throws",f:function(e){if(!G(e))return!1;try{e()}catch(e){return!0}return!1},s:"throw"}].map((function(e){var t=e.n;i[t]="assert failed: expected {a} to "+e.s,a[t]=e.f})),c={map:function e(t,r){var n;n=g(t)?[]:{};if(G(r))z(t,(function(e,t){n[e]=r(t)}));else{g(r)||s.object(r);var o=d(t||{});z(r,(function(r,i){o.some((function(e,t){return e===r&&(o.splice(t,1),!0)})),G(i)?u.assigned(t)?n[r]=!!i.m:n[r]=i(t[r]):n[r]=e(t[r],i)}))}return n},all:function(e){if(g(e))return V(e,!1);return s.object(e),q(e,!1)},any:function(e){if(g(e))return V(e,!0);return s.object(e),q(e,!0)}},f=["array","arrayLike","iterable","object"],p=Object.prototype.hasOwnProperty,h=Object.prototype.toString,d=Object.keys,y=Array.prototype.slice,g=Array.isArray,v=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,m="function"==typeof Symbol,w="function"==typeof Map,S="function"==typeof Set,c=K(c,a),s=Z(W,Y),u=Z(X,J),l=Z((function(e){var t=function(){return!!u.assigned(arguments[0])||e.apply(null,arguments)};return t.l=e.length,t.m=!0,t}),(function(e){if(!1===x(e))return!0;return e})),s.not=te(W,u,"not "),s.maybe=te(W,l,"maybe "),f.forEach((function(e){a[e].of=ee([$.bind(null,null),a[e],a,{},""])})),re(s,W),re(u,X),f.forEach((function(e){l[e].of=ee([$.bind(null,"maybe"),a[e],a,{},""]),s.maybe[e].of=te(W,l[e].of),s.not[e].of=te(W,u[e].of)})),function(o){o.Check=o,void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}(K(c,{assert:s,not:u,maybe:l}))}()},398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7264);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}))},8480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(4359);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c,s,u=TypeError,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"DefaultError",get:function(){return u}},{key:"ErrorType",get:function(){return c},set:function(e){if(!o.default.instance(e.prototype,Error))throw TypeError("Config.ErrorType expected a Type that inherits from Error.");c=e}},{key:"logger",get:function(){return s},set:function(e){s=new i.Logger(e)}},{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.default.not.object(t)||(o.default.assigned(t.ErrorType)&&(e.ErrorType=t.ErrorType),o.default.assigned(t.logger)&&(e.logger=t.logger))}},{key:"reset",value:function(){e.resetErrorType(),e.resetLogger()}},{key:"resetErrorType",value:function(){e.ErrorType=u}},{key:"resetLogger",value:function(){e.logger=console}}],(r=null)&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Config=l,l.reset()},7264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Check:!0};Object.defineProperty(t,"Check",{enumerable:!0,get:function(){return i.default}});var o,i=(o=r(2270))&&o.__esModule?o:{default:o},a=r(8480);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=r(9883);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=r(2990);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},4359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var n,o=(n=r(2270))&&n.__esModule?n:{default:n};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c,s,u=(a=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a;o.default.function(t[e])?t[e].apply(t,n):(a=console)[e].apply(a,n)};e.methods.forEach((function(e){(o.default.not.assigned(t)||o.default.not.function(t[e]))&&console.warn('Provided logger is missing the expected "'.concat(e,'" function, falling back to console.')),r[e]=n.bind(null,e)}))},c&&i(a.prototype,c),s&&i(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a);t.Logger=u,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(u,"methods",["warn"])},840:(e,t)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.buildExpectedMessage=function(e){var t=e.type,n=e.expectedArgs,o=void 0===n?[]:n,i=e.message,a=t.toString.apply(t,[i].concat((c=o,function(e){if(Array.isArray(e))return r(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())));var c;return"expected ".concat(a)}},4481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildReceivedMessage=function(e){var t=(0,n.getValueName)(e,{includeTypeName:!0});return"but received ".concat(t)};var n=r(2571)},7998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(840);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(4481);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(270);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=r(4264);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=r(9186);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=r(1749);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},270:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBuilder=void 0;var n=r(9186),o=r(840),i=r(4481);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.methodSignature=t,this.param=null}var t,r,c;return t=e,r=[{key:"setCurrentParam",value:function(e,t){this.param=this.methodSignature.findParam(e,t)}},{key:"setParentParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.param)throw ReferenceError("setParentParams(...) this.param is null. Call setCurrentParam() before.");return this.param.params=new n.Params(e,{parent:this.param}),this.param.isArray=t,this.param}},{key:"buildCustomMessage",value:function(e){return"".concat(this.methodSignature," ").concat(e,".")}},{key:"buildMessage",value:function(e){var t=e.value,r=(0,o.buildExpectedMessage)(e),n=(0,i.buildReceivedMessage)(t);return"".concat(this.methodSignature," ").concat(this.param," ").concat(r).concat(this.param.extension," ").concat(n,".")}}],r&&a(t.prototype,r),c&&a(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MessageBuilder=c},4264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodSignature=void 0;var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(339),a=r(9186);function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.object,n=void 0===r?null:r,o=t.method,c=void 0===o?null:o,s=t.objParams,u=void 0===s?null:s,l=t.displayBrackets,f=void 0!==l&&l,p=(0,i.hasSuperclass)(n);this.object=n,this.method=c,this.params=new a.Params(u,{displayEtcetera:p,displayBrackets:f})}var t,r,n;return t=e,r=[{key:"name",get:function(){var e,t=(0,i.getTypeToString)(this.object,""),r=(0,i.getTypeToString)(this.method,"");return e=o.default.nonEmptyString(t)&&o.default.nonEmptyString(r)?".":"","".concat(t).concat(e).concat(r)}},{key:"parameters",get:function(){var e="",t="";return o.default.nonEmptyString(this.name)?(e="(",t=")"):this.params.length>0&&(e="{",t="}"),"".concat(e).concat(this.params).concat(t)}},{key:"findParam",value:function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!==(t=null==r?void 0:r.params)&&void 0!==t?t:this.params,i=null,c=0;c<n.length&&(i=n.get(c),o.default.instanceStrict(i,a.Params)&&(i=this.findParam(e,r,i)),null==i||i.name!==e||i.parent!==r);c++);if(null==i)throw ReferenceError("findParam(...) not able to find param: ".concat(e,"."));return i}},{key:"toString",value:function(){return"".concat(this.name).concat(this.parameters)}}],r&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MethodSignature=s},1749:(e,t)=>{"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Param=void 0;var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.name,n=t.parent,o=void 0===n?null:n,i=t.isOptional,a=void 0!==i&&i;this.name=r,this.parent=o,this.isOptional=a,this.isArray=!1,this.params=null}var t,n,o;return t=e,(n=[{key:"isRequired",get:function(){return!1===this.isOptional}},{key:"isNonRequired",get:function(){return this.isOptional}},{key:"extension",get:function(){return this.isOptional?" or null or undefined":""}},{key:"toString",value:function(){var e=null!=this.parent?"".concat(this.parent.name,"."):"";return"".concat(e).concat(this.name)}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Param=n},9186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(1749);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=null!=r?r:{},i=n.parent,a=n.displayEtcetera,c=void 0!==a&&a,s=n.displayBrackets,u=void 0!==s&&s;o.default.object(t)?this.params=e.toArray(t,i):this.params=[],this.displayBrackets=u,this.displayEtcetera=c,this.atLeastOne=!1}var t,r,n;return t=e,r=[{key:"length",get:function(){return this.params.length}},{key:"isSomeParamRequired",get:function(){return this.params.some((function(e){return e.isRequired}))}},{key:"isEveryParamNonRequired",get:function(){return this.length>0&&this.params.every((function(e){return e.isNonRequired}))}},{key:"map",value:function(e){return this.params.map(e)}},{key:"get",value:function(e){return this.params[e]}},{key:"toString",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params,r=t.map((function(t){return e.stringify(t)})),n=this.displayBrackets&&this.atLeastOne?"{":"",o=this.displayBrackets&&this.atLeastOne?"}":"";return"".concat(n).concat(r.join(", ")).concat(o)}},{key:"stringify",value:function(e){if(o.default.not.assigned(e.params))return"".concat(e.name);var t=this.displayEtcetera?", ...":"",r=e.isArray?"[":"",n=e.isArray?"]":"",i=this.toString(e.params);return"".concat(r,"{").concat(i).concat(t,"}").concat(n)}}],n=[{key:"toArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null==e?[]:Object.keys(e).map((function(r){var n=e[r].isOptional;return new i.Param({name:r,parent:t,isOptional:n})}))}}],r&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Params=c},9373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6556);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(5571);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},5571:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TypeCheckerAtLeastOne=void 0;var o,i=(o=r(2270))&&o.__esModule?o:{default:o},a=r(339);function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=u(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},s.apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,e);var t,r,n,o=f(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this,e)).messageBuilder.methodSignature.params.atLeastOne=!0,t}return t=u,r=[{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(h(u.prototype),"execute",this).call(this,e);var t=e.userData,r=void 0===t?this.userArguments:t,n=e.objParams,o=void 0===n?this.objParams:n,c=!1;if(Object.keys(o).forEach((function(e,t){var n=(0,a.getValue)(r,t,e);i.default.assigned(n)&&(c=!0)})),!1===c){var l=this.messageBuilder.buildCustomMessage("at least one parameter must be provided");throw new this.ErrorType(l)}}}],r&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(r(6556).TypeChecker);t.TypeCheckerAtLeastOne=d},6556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeChecker=void 0;var n=r(8480),o=r(339);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.messageBuilder,o=t.userArguments,i=t.objParams,a=t.ErrorType,c=void 0===a?n.Config.ErrorType:a,s=t.signature,u=t.loggingFunc;this.messageBuilder=r,this.userArguments=o,this.objParams=i,this.ErrorType=c,this.signature=s,this.loggingFunc=u}var t,r,a;return t=e,r=[{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.userData,n=void 0===r?this.userArguments:r,i=t.objParams,a=void 0===i?this.objParams:i,c=t.parent;Object.keys(a).forEach((function(t,r){var i=a[t];e.messageBuilder.setCurrentParam(t,c),i((0,o.getValue)(n,r,t),e)}))}}],r&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.TypeChecker=a},2990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4563);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(5474);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(2035);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},2035:(e,t,r)=>{"use strict";var n=r(9373),o=r(4563),i=r(6780);o.typecheck.atLeastOne=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=(0,i.validateArguments)(t,"typecheck.atLeastOne"),a=new n.TypeCheckerAtLeastOne(o);a.execute()}},4563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typecheck=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,o.validateArguments)(t),a=new n.TypeChecker(i);a.execute()};var n=r(9373),o=r(6780)},5474:(e,t,r)=>{"use strict";var n=r(9373),o=r(6780);r(4563).typecheck.warn=function(){for(var e="warn",t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=(0,o.validateArguments)(r,"typecheck.".concat(e)),c=new n.TypeChecker(a);c.loggingFunc=e,c.execute()}},300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeOverloading=function(e){var t,r,n,a,c,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"typecheck",u="".concat(s,"(...)");switch(e.length){case 5:var l=i(e,5);t=l[0],r=l[1],n=l[2],a=l[3],c=l[4];break;case 4:if(o.default.inheritance(e[3],Error))if(o.default.function(e[0])||o.default.string(e[0])){var f=i(e,4);r=f[0],n=f[1],a=f[2],c=f[3]}else{var p=i(e,4);t=p[0],n=p[1],a=p[2],c=p[3]}else{var h=i(e,4);t=h[0],r=h[1],n=h[2],a=h[3]}break;case 3:if(o.default.inheritance(e[2],Error)){var d=i(e,3);n=d[0],a=d[1],c=d[2]}else if(o.default.function(e[0])||o.default.string(e[0])){var y=i(e,3);r=y[0],n=y[1],a=y[2]}else{var g=i(e,3);t=g[0],n=g[1],a=g[2]}break;case 2:var v=i(e,2);n=v[0],a=v[1];break;default:var b=i(e,1);n=b[0]}return{signature:u,object:t,method:r,c:n,d:a,ErrorType:c}};var n,o=(n=r(2270))&&n.__esModule?n:{default:n};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},6780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(300);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(128);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(6372);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserInput=function(e){return o.default.arrayLike(e)&&o.default.not.string(e)||o.default.object(e)};var n,o=(n=r(2270))&&n.__esModule?n:{default:n}},6372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateArguments=function(e,t){var r=(0,i.composeOverloading)(e,t),a=r.signature,c=r.object,s=r.method,u=r.c,l=r.d,f=r.ErrorType,p=(0,o.getUserArgumentsType)(l);if(p===o.UserArgumentsType.none)throw TypeError("".concat(a," arguments expected an Array or an Object. Make sure you invoke typecheck correctly."));var h=p===o.UserArgumentsType.object,d=new n.MethodSignature({object:c,method:s,objParams:u,displayBrackets:h}),y=new n.MessageBuilder(d);return{signature:a,messageBuilder:y,objParams:u,userArguments:l,ErrorType:f}};var n=r(7998),o=r(339),i=r(300)},5275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Asserts=void 0;var n=r(2474),o=r(339),i=r(9108),a=[{assertName:"array",singular:"an Array",plural:"arrays",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"arrayBufferView",singular:"an ArrayBufferView",plural:"arrayBufferViews",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator,validator:i.arrayBufferViewValidator},{assertName:"assigned",singular:"an assigned value",plural:"assigned values",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"boolean",singular:"a Boolean",plural:"booleans",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"custom",expectArgs:!0,isArrayable:!1,validateCreator:n.customValidateCreator},{assertName:"date",singular:"a Date",plural:"dates",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"dateString",singular:"a String in ISO date format",plural:"strings in ISO date format",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator,validator:i.dateStringValidator},{assertName:"function",singular:"a Function",plural:"functions",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"greaterOrEqual",singular:"a Number greater or equal to {a}",plural:"numbers greater or equal to {a}",expectArgs:!0,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"in",singular:"one of [{a}]",plural:"one of [{a}]",expectArgs:!0,isArrayable:!0,stringifyArgs:o.stringifyValues,validateCreator:n.genericValidateCreator},{assertName:"inheritance",arrayLike:"inheritance",singular:"a type that inherits from {a}",plural:"types that inherit from {a}",expectArgs:!0,isArrayable:!0,stringifyArgs:o.getTypeToString,validateCreator:n.genericValidateCreator},{assertName:"instanceStrict",singular:"an instance of {a}",plural:"instances of {a}",expectArgs:!0,isArrayable:!0,stringifyArgs:o.getTypeToString,validateCreator:n.genericValidateCreator},{assertName:"integer",singular:"an integer",plural:"integers",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"keyIn",singular:"as a key in [{a}]",plural:"as keys in [{a}]",expectArgs:!0,isArrayable:!1,stringifyArgs:o.stringifyKeys,validateCreator:n.genericValidateCreator},{assertName:"like",singular:"an Object that matches {{a}}",plural:"objects that match {{a}}",expectArgs:!0,isArrayable:!1,stringifyArgs:o.stringifyKeys,validateCreator:n.genericValidateCreator},{assertName:"nonEmptyObject",singular:"a non-empty Object",plural:"non-empty objects",expectArgs:!1,isArrayable:!0,validateCreator:n.genericValidateCreator},{assertName:"nonEmptyString",singular:"a non-empty String",plural:"non-empty strings",expectArgs:!1,isArrayable:!0,validateCreator:n.genericValidateCreator},{assertName:"number",singular:"a Number",plural:"numbers",expectArgs:!1,isArrayable:!0,validateCreator:n.genericValidateCreator},{assertName:"object",singular:"an Object",plural:"objects",expectArgs:!0,isArrayable:!0,validateCreator:n.objectValidateCreator},{assertName:"positive",singular:"a Number greater than 0",plural:"numbers greater than 0",expectArgs:!1,isArrayable:!1,validateCreator:n.genericValidateCreator},{assertName:"skip",singular:"a value",expectArgs:!1,isExtensible:!1,isArrayable:!1,validateCreator:n.skipValidateCreator},{assertName:"string",singular:"a String",plural:"strings",expectArgs:!1,isArrayable:!0,validateCreator:n.genericValidateCreator}];t.Asserts=a},5972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTypes=function e(t){var r={};return o.Asserts.forEach((function(o){var a=o.assertName,s=o.isArrayable;if(!t||!1!==s){var u=new i.Type(a,c(c({},o),{},{isArray:t}));if((0,n.defineProperty)(r,a,u.createValidator()),"array"===a){if(t)return;(0,n.defineProperty)(r.array,"of",e(!0))}}})),r};var n=r(7740),o=r(5275),i=r(2865);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},2865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0;var n=r(8948);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=null!=r?r:{},a=i.assert,c=void 0===a?t:a,s=i.singular,u=void 0===s?t:s,l=i.plural,f=void 0===l?"".concat(t,"s"):l,p=i.isArray,h=void 0!==p&&p,d=i.expectArgs,y=void 0!==d&&d,g=i.isExtensible,v=void 0===g||g,b=i.isArrayable,m=void 0===b||b,w=i.autoDisplayArgs,S=void 0===w||w,k=i.firstType,x=i.validator,E=i.operator,O=i.validateCreator,T=void 0===O?function(){return!1}:O,P=i.stringifyArgs,j=void 0===P?function(e){return(0,n.stringify)(e)}:P;this.name=t,this.assert=c,this.plural=f,this.isArray=h,this.singular=h?"an Array of ".concat(this.plural):u,this.firstType=k,this.validator=x,this.expectArgs=!!y,this.isExtensible=!!v,this.isArrayable=!!m,this.autoDisplayArgs=!!S,this.operator=E,this.validateCreator=T,this.stringifyArgs=j}var t,r,a;return t=e,r=[{key:"createValidator",value:function(){return this.expectArgs?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.validateCreator.apply(this,[this].concat(t))}.bind(this):this.validateCreator(this)}},{key:"toString",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.name,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];if("custom"===this.name)return t;var i=this.singular;if(/{[a-k]}/.test(i))["a","b","c","d","e","f"].forEach((function(t,r){var o=n[r];if(void 0!==o){var a=e.stringifyArgs(o);i=i.replace(new RegExp("{".concat(t,"}"),"i"),a).trim()}else i=i.replace(new RegExp("{".concat(t,"}"),"i"),"").trim()}));else if(this.autoDisplayArgs&&n.length>0){var a=n.map((function(t){return"".concat(e.stringifyArgs(t))})).join();i+=": ".concat(a)}return i}}],r&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Type=a},9883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0;var n=(0,r(5972).createTypes)();t.Types=n},7617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayBufferViewValidator=function(e){return ArrayBuffer.isView(e)}},1077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateStringValidator=function(e){return r.test(e)};var r=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?(Z|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/},9108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7617);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(1077);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},5589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomValidator=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},r=arguments.length>2?arguments[2]:void 0;if(e.expectArgs){var o=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n.customValidateCreator.apply(void 0,[e,t,r].concat(i))};return o.bind(e)}return(0,n.customValidateCreator)(e,t,r)};var n=r(2474)},7740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperty=function(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1})}},2788:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArticle=function(e){switch(i(e)){case"string":case"number":case"function":case"boolean":return"a ";case"object":return function(e){if(o.default.not.function(e.constructor))return"";switch(e.constructor.name.substr(0,1).toLowerCase()){case"a":case"e":case"i":case"o":case"u":return"an ";default:return"a "}}(e);default:return""}};var n,o=(n=r(2270))&&n.__esModule?n:{default:n};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}},7324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeName=function(e,t){if(o.default.not.assigned(e)||Number.isNaN(e))return o.default.string(t)?t:String(e);if(o.default.function(e))return function(e){return e.name||(0,i.getTypeToString)(e)}(e);return function(e){var t;return(null===(t=e.constructor)||void 0===t?void 0:t.name)||(0,i.getTypeToString)(e)}(e)};var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(5542)},5542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeToString=function(e,t){if(o.default.not.assigned(e)||Number.isNaN(e))return o.default.string(t)?t:String(e);if(o.default.string(e))return e;if(o.default.function(e))return function(e){var t,r="";switch(e){case Date:case String:case Number:case Boolean:r=e.name;break;default:if(o.default.function(null===(t=e.prototype)||void 0===t?void 0:t.toString))try{r=e.prototype.toString()}catch(e){}}if(i(r))return r;return e.name||"a Function"}(e);return function(e){var t,r="";try{r=e.toString()}catch(e){}if(i(r))return r;return(null===(t=e.constructor)||void 0===t?void 0:t.name)||"an Object"}(e)};var n,o=(n=r(2270))&&n.__esModule?n:{default:n};function i(e){return""!==e&&-1===e.indexOf("[object")}},4448:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserArgumentsType=void 0,t.getUserArgumentsType=function(e){if(o.default.object(e))return i.object;if(o.default.arrayLike(e)&&o.default.not.string(e))return i.array;return i.none};var n,o=(n=r(2270))&&n.__esModule?n:{default:n};var i={object:1,array:2,none:0};t.UserArgumentsType=i},3697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValue=function(e,t,r){switch((0,n.getUserArgumentsType)(e)){case n.UserArgumentsType.array:return e[t];case n.UserArgumentsType.object:return e[r];default:throw ReferenceError("typecheckParams(...) error in step2.")}};var n=r(4448)},2571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValueName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.includeTypeName,n=void 0!==r&&r;if(o.default.not.assigned(e)||Number.isNaN(e))return String(e);if(o.default.function(e))return(0,c.getTypeToString)(e);if(o.default.object(e)){var u=(0,c.getTypeToString)(e);if("Object"!==u&&"an Object"!==u)return u}var l=(0,s.stringify)(e);if(n){var f="".concat((0,i.getArticle)(e)).concat((0,a.getTypeName)(e));return l?"".concat(f,": ").concat(l):f}return l};var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(2788),a=r(7324),c=r(5542),s=r(8948)},8982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSuperclass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null!=e?Object.getPrototypeOf(e):null,r=null!=t?Object.getPrototypeOf(t):null,n=null!=r?Object.getPrototypeOf(r):null;return null!=n}},339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5589);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(7740);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(2788);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=r(7324);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=r(5542);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=r(4448);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var u=r(3697);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=r(2571);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var f=r(8982);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r(3904);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var h=r(1098);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var d=r(8948);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var y=r(7451);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var g=r(9040);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var v=r(4052);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}))},3904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEveryParamNonRequired=function(e){if(null==e)return!1;return Object.keys(e).every((function(t){var r=e[t];return r&&(r.isOptional||r.isUndefinable)}))}},1098:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObjectTypes=function(e){if(o.default.nonEmptyObject(e))return Object.values(e).every((function(e){return o.default.function(e)&&o.default.string(e.typeName)}));return!1};var n,o=(n=r(2270))&&n.__esModule?n:{default:n}},8948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return l("",{"":e},t)};var n=r(5542);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'"',"\\":"\\\\"};function c(e){return i.lastIndex=0,i.test(e)?'"'.concat(e.replace(i,(function(e){var t=a[e];return"string"==typeof t?t:"\\u".concat("0000".concat(e.charCodeAt(0).toString(16)).slice(-4))})),'"'):'"'.concat(e,'"')}function s(e,t){if(-1===t)return Array.isArray(e)?e.length>0?"[...]":"[]":Object.keys(e).length>0?"{...}":"{}";var r,n,o,i=[];if(Array.isArray(e)){for(o=e.length,r=0;r<o&&(0===t||r<t);r++)i[r]=l(r,e,-1)||"null";return 0===i.length?n="[]":(n="[".concat(i.join(", ")),n+=t>0&&o>t?", ...]":"]"),n}var a=Object.keys(e);for(o=a.length,r=0;r<o&&(0===t||r<t);r++){var c=a[r];Object.prototype.hasOwnProperty.call(e,c)&&(n=l(c,e,-1))&&i.push("".concat(c,":").concat(n))}return 0===i.length?n="{}":(n="{".concat(i.join(", ")),n+=t>0&&o>t?", ...}":"}"),n}function u(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(o(e)){case"string":return c(e);case"boolean":case"number":case"undefined":return String(e);case"function":return(0,n.getTypeToString)(e);case"object":if(null==e)return"null";switch(null===(t=e.constructor)||void 0===t?void 0:t.name){case"Date":return e.toISOString();case"Array":case"Object":return s(e,r);case"Boolean":case"Number":return String(e.valueOf());case"String":return c(e.valueOf());default:try{if("function"==typeof e.toString){var i=e.toString();if(""!==i&&-1===i.indexOf("[object"))return i}return s(e,r)}catch(e){}return""}default:return""}}function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t[e];return n&&"object"===o(n)&&"function"==typeof n.toJSON&&(n=n.toJSON(n)),u(n,r)}},7451:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyKeys=function(e){return Object.keys(e).map((function(e){return'"'.concat(e,'"')}))}},9040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyValues=function(e){return Object.values(e).map((function(e){return(0,n.stringify)(e)}))};var n=r(8948)},4052:()=>{},6321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customValidateCreator=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},r=arguments.length>2?arguments[2]:void 0,a=arguments.length,c=new Array(a>3?a-3:0),s=3;s<a;s++)c[s-3]=arguments[s];var u=e.isArray;function l(i,a,s){var l=a.ErrorType,f=a.userArguments,p=a.messageBuilder.buildMessage({value:i,type:e,message:r,expectedArgs:c});function h(e){var r=!1;try{r=!!(r=t.apply(void 0,[e,f].concat(c)))}catch(e){o.Config.logger.warn("TypeChecking",e)}if(!1===r){if(!s)throw new l(p);o.Config.logger[s](p)}}u?(n.assert.array(i,p,l),i.forEach((function(e){return h(e)}))):h(i)}return(0,i.extendValidateCreator)(l,e)};var n=r(2270),o=r(8480),i=r(5992)},5992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendValidateCreator=function(e,t){var r=t.name;return e=(0,a.logValidateCreator)(e,{typeName:r}),(0,i.defineProperty)(e,"optional",(0,a.logValidateCreator)((function(t,r,n,i){if(o.default.not.assigned(t))return;e(t,r,n,i)}),{typeName:r,isOptional:!0})),e};var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(7740),a=r(7203)},7804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genericValidateCreator=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=e.name,u=e.isExtensible;function l(t,n,a){if(o.default.not.assigned(n))throw TypeError("typecheck(...) params expected Types.".concat(s," not Types.").concat(s,"()"));i.checkValue.apply(void 0,[t,e,n,a].concat(r))}if(u)return(0,a.extendValidateCreator)(l,e);return(0,c.logValidateCreator)(l,{typeName:s})};var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(1255),a=r(5992),c=r(7203)},2474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6321);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(7804);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(7203);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=r(2143);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=r(6122);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},7203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logValidateCreator=function(e,t){var r=t.typeName,o=t.isOptional;return(0,n.defineProperty)(e,"warn",(function(t,r){e(t,r,"warn")})),(0,n.defineProperty)(e.warn,"isLogging",!0),(0,n.defineProperty)(e.warn,"typeName",r),(0,n.defineProperty)(e.warn,"isOptional",o),(0,n.defineProperty)(e,"typeName",r),(0,n.defineProperty)(e,"isOptional",o),e};var n=r(7740)},2143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectValidateCreator=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.isArray,n=o.default.nonEmptyObject(t);function c(o,a,c){if((0,i.checkValue)(o,e,a,c)&&n){var s=a.messageBuilder.setParentParams(t,r);r?o.forEach((function(e){return a.execute({objParams:t,parent:s,userData:e})})):a.execute({objParams:t,parent:s,userData:o})}}return(0,a.extendValidateCreator)(c,e)};var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(1255),a=r(5992)},6122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipValidateCreator=function(e){var t=e.name;return(0,a.logValidateCreator)((function(t,r,n){if(o.default.not.assigned(r))throw TypeError("typecheck(...) params expected Types.skip not Types.skip()");var a=r.messageBuilder;if(n){var c=a.buildMessage({value:t,type:e});i.Config.logger[n](c)}}),{typeName:t})};var n,o=(n=r(2270))&&n.__esModule?n:{default:n},i=r(8480),a=r(7203)},1255:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkValue=function(e,t,r,i){for(var a=r.messageBuilder,c=r.ErrorType,s=i||r.loggingFunc,u=arguments.length,l=new Array(u>4?u-4:0),f=4;f<u;f++)l[f-4]=arguments[f];var p=o.isValueOk.apply(void 0,[e,t].concat(l));if(!1===p){var h=a.buildMessage({value:e,type:t,expectedArgs:l});if(!s)throw new c(h);n.Config.logger[s](h)}return p};var n=r(8480),o=r(1725)},1725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValueOk=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a,c=t.assert,s=t.isArray,u=t.validator,l=!0;if(o.default.function(u))return s?(l=o.default.assert.array(e))&&e.forEach((function(e){l=l&&u.apply(void 0,[e].concat(n))})):l=u.apply(void 0,[e].concat(n)),l;l=s?l&&(a=o.default.array.of)[c].apply(a,[e].concat(n)):o.default[c].apply(o.default,[e].concat(n));return l};var n,o=(n=r(2270))&&n.__esModule?n:{default:n}},4751:(e,t,r)=>{"use strict";r.d(t,{Z:()=>LP});var n=r(398);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){o(this,e);var r={options:n.Types.object({name:n.Types.nonEmptyString.optional,entry:n.Types.object().optional,service:n.Types.object().optional})};(0,n.typecheck)(this,r,arguments);var i=t.name,a=t.entry,c=t.service;this.name=i,this.entry=a,this.service=c}var t,r,a;return t=e,(r=[{key:"createApi",value:function(){}},{key:"createManager",value:function(){}},{key:"onSdkSessionCreated",value:function(){}},{key:"toString",value:function(){return"SDK.Plugin"}}])&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"getCommonProperties",value:function(){throw new Error("".concat(this.toString(),".getCommonProperties() - not-implemented"))}},{key:"getDictionaryVersion",value:function(){throw new Error("".concat(this.toString(),".getDictionaryVersion() - not-implemented"))}},{key:"toString",value:function(){return"SDK.Logging.AnalyticsProvider"}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u={0:"none",1:"trace",2:"debug",3:"info",4:"warn",5:"error"},l=Object.create(u,{});Object.keys(u).forEach((function(e){l[u[e]]=e}));const f=l;function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.none;p(this,e),this.logLevel=t}var t,r,n;return t=e,(r=[{key:"log",value:function(e){throw new ReferenceError("Sink must implement log(LogEvent)")}},{key:"toString",value:function(){return"SDK.Logging.LogSink"}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;y(this,e),this.isPublic=t,this.level=void 0===r?null:r,this.source=n,this.message=o,this.extraData=i||{}}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return JSON.stringify({isPublic:this.isPublic,level:f[this.level],source:this.source,message:this.message,extraData:this.extraData})}},{key:"toString",value:function(){return"(".concat(f[this.level],"): ").concat(this.source," - ").concat(this.message)}}])&&g(t.prototype,r),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(i,e);var t,r,n,o=S(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).hasConsole="undefined"!=typeof console,t}return t=i,(r=[{key:"log",value:function(e){if(e.level<this.logLevel)return Promise.resolve();var t=this.hasConsole,r=e.toString();return t&&console.log(r),Promise.resolve()}},{key:"toString",value:function(){return"SDK.Logging.Sinks.ConsoleSink"}}])&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(d);function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}for(var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sinks=[],this.analyticsProvider=void 0,this.sdkInstanceId=null}var t,r,o;return t=e,r=[{key:"log",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(e,t,r)}},{key:"addSink",value:function(e){var t=this,r={sink:n.Types.instanceStrict(d)};return(0,n.typecheck)(this,"addSink",r,arguments),new Promise((function(r){t.sinks.includes(e)||t.sinks.push(e),r()}))}},{key:"removeSink",value:function(e){var t=this,r={sink:n.Types.instanceStrict(d)};return(0,n.typecheck)(this,"removeSink",r,arguments),new Promise((function(r){t.sinks=t.sinks.filter((function(t){return t!==e})),r()}))}},{key:"console",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(r){return e.sinks=e.sinks.filter((function(e){return!(e instanceof E)})),t&&e.sinks.push(new E(f.none)),r()}))}},{key:"logWithOverrideLevel",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.baseLogLevel;return"string"==typeof e&&void 0===t?this.logMessage("",e,r,n):"string"==typeof t?this.logMessage(e,t,r,n):(n&&(t.level=n),this.logMetric(e,t))}},{key:"logMetric",value:function(e,t){var r=this;return new Promise((function(n){var o,i=t.isPublic,a=t.level,c=t.name,s=t.extraData,u=new v(i,void 0===a?f.none:a,e,c,s),l=O(r.sinks);try{for(l.s();!(o=l.n()).done;)o.value.log(u)}catch(e){l.e(e)}finally{l.f()}n()}))}},{key:"logMessage",value:function(e,t,r,n){var o=this;return new Promise((function(i){var a,c=new v(r,void 0===n?f.none:n,e,t),s=O(o.sinks);try{for(s.s();!(a=s.n()).done;)a.value.log(c)}catch(e){s.e(e)}finally{s.f()}i()}))}},{key:"toString",value:function(){return"SDK.Logging.Logger"}}],r&&P(t.prototype,r),o&&P(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_=function(){var e=C[A];j.prototype[e]=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.logWithOverrideLevel(t,r,n,f[e])}},A=0,C=Object.keys(f);A<C.length;A++)_();function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}j.instance=new j;var I=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";R(this,e),this.code=t,this.description=r}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Exception.ErrorReason"}}])&&D(t.prototype,r),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L={file:n.Types.nonEmptyString,line:n.Types.number.optional},M={urn:n.Types.nonEmptyString,location:n.Types.object(L).optional},N={host:n.Types.nonEmptyString,path:n.Types.nonEmptyString,method:n.Types.nonEmptyString},F={statusCode:n.Types.number,requestId:n.Types.nonEmptyString.optional,roundTripTime:n.Types.number,region:n.Types.nonEmptyString.optional,cloudFrontPop:n.Types.nonEmptyString.optional,cloudFrontId:n.Types.nonEmptyString.optional},B={requestStart:n.Types.number,requestEnd:n.Types.number},U={endpoint:n.Types.nonEmptyString},G={request:n.Types.object(N),response:n.Types.object(F).optional,configuration:n.Types.object(U),timing:n.Types.object(B),error:n.Types.array.of.instanceStrict(I).optional};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function V(){V=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==z(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function q(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var H=function(){function e(t){K(this,e);var r={options:n.Types.object({logger:n.Types.instanceStrict(j),urn:n.Types.nonEmptyString,file:n.Types.nonEmptyString,line:n.Types.number.optional,sdkInstanceId:n.Types.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.logger,i=t.urn,a=t.file,c=t.line,s=t.sdkInstanceId;this.urn=i,this.file=a,this.line=c,this.logger=o,this.startTime=new Date,this.totalDuration=null,this.serviceRequests=[],this.isPublic=!0,this.sdkInstanceId=s}var t,r,o,i,a;return t=e,r=[{key:"appendRequest",value:function(e){var t={request:n.Types.object(G)};(0,n.typecheck)(this,"appendRequest",t,arguments),this.serviceRequests.push(e)}},{key:"finalize",value:function(e){this.totalDuration=Date.now()-this.startTime;try{var t=this.isPublic,r=this.logger,n=this.file,o=this.generateLogEvent(e);r.log(n,o,t).catch((function(e){return r.warn(e,o)}))}catch(e){console&&console.error&&console.error(e)}}},{key:"generateLogEvent",value:function(e){var t=this.isPublic,r=this.level,n=this.serviceRequests,o=this.file,i=this.line,a=this.urn;return{extraData:{isEdge:!0,file:o,line:i,urn:a,serviceRequests:n,startTime:this.startTime,totalDuration:this.totalDuration,sdkInstanceId:this.sdkInstanceId,error:e},isPublic:t,name:a,level:r}}},{key:"toString",value:function(){return"SDK.Logging.LogTransaction"}}],o=[{key:"wrapLogTransaction",value:(i=V().mark((function t(r){var o,i,a,c,s,u,l,f=arguments;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={options:n.Types.object({urn:n.Types.nonEmptyString,file:n.Types.nonEmptyString,logger:n.Types.instanceStrict(j),action:n.Types.function})},(0,n.typecheck)(this,"wrapLogTransaction",o,f),i=r.urn,a=r.file,c=r.logger,s=r.action,u=new e({logger:c,urn:i,file:a,sdkInstanceId:c.sdkInstanceId}),t.prev=4,t.next=7,s(u);case 7:return t.abrupt("return",t.sent);case 10:throw t.prev=10,t.t0=t.catch(4),l=t.t0,t.t0;case 14:return t.prev=14,u.finalize(l),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[4,10,14,17]])})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){q(o,r,n,a,c,"next",e)}function c(e){q(o,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}],r&&W(t.prototype,r),o&&W(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Y={account:{accountBlocked:{name:"AccountBlockedException",message:"The account is blocked."},accountLoginFailed:{name:"AccountLoginFailedException",message:"Unable to get the account grant for the credentials."},accountNotFound:{name:"AccountNotFoundException",message:"The account was not found."},actionGrantRejected:{name:"ActionGrantRejectedException",message:"ActionGrant was not accepted by the service."},identityAlreadyUsed:{name:"IdentityAlreadyUsedException",message:"Identity is already linked to another account."},invalidToken:{name:"InvalidTokenException",message:"External identity token was invalid."},linkSubscriptionPartial:{name:"LinkSubscriptionPartialException",message:"Copy partial Error."}},commerce:{cardUpdateRejected:{name:"CardUpdateRejectedException",message:"The request was rejected by the service, please try again."},comcastConsentRefused:{name:"ComcastConsentRefusedException",message:"The request to the Comcast service failed due to a bad request."},comcastServerError:{name:"ComcastServerErrorException",message:"There was a failure from the Comcast service."},comcastServiceUnavailable:{name:"ComcastServiceUnavailableException",message:"The Comcast service is unavailable."},invalidData:{name:"InvalidDataException",message:"Unable to create payment information due to invalid data.",errorCases:[{method:["submitOrderWithPaymentMethod","submitOrderWithCardPaymentMethod"],status:[400]}]},invalidOrderId:{name:"InvalidOrderIdException",message:"The order Id is invalid or does not exist."},invalidPaymentInformation:{name:"InvalidPaymentInformationException",message:"Unable to submit the order due to invalid payment information.",errorCases:[{method:["createCardPaymentMethod"],status:[422]}]},invalidRedemptionCode:{name:"InvalidRedemptionCodeException",message:"Redemption code is invalid or already redeemed."},invalidZipCode:{name:"InvalidZipCodeException",message:"Invalid or nonexistent zip code.",errorCases:[{method:["lookupByZipCode"],status:[403]}]},orderTimeout:{name:"OrderTimeoutException",message:"The order could not be verified in a timely fashion. Requests Limit reached for an order.",errorCases:[{method:["getOrderStatus"],status:[429]}]},orderProductBlocked:{name:"OrderProductBlockedException",message:"Indicated order was blocked, product is already owned by the user."},orderCountryInvalid:{name:"OrderCountryInvalidException",message:"Indicated order failed because the geo-location country code of the user does not match the wallet BIN country code.",errorCases:[{method:["getOrderStatus"],status:[422]}]},orderFraud:{name:"OrderFraudException",message:"Indicated order failed to pass fraud prevention checks."},orderPaymentDeclined:{name:"OrderPaymentDeclinedException",message:"Indicated order failed due to the payment method being declined."},orderStandaloneExceedsBundle:{name:"OrderStandaloneExceedsBundleException",message:"Indicate to any subscribers with select 2+ standalone services that they are not able to purchase the Disney Bundle on D+.",errorCases:[{method:["getOrderStatus"],status:[422]}]},paymentMethodNotFound:{name:"PaymentMethodNotFoundException",message:"Unable to retrieve the payment method as it was not found.",errorCases:[{method:["getDefaultPaymentMethod"],status:[404],code:"payment-method.not-found"},{method:["getPaymentCard"],status:[404],code:"payment-method.not-found"}]},paymentMethodConsentRequired:{name:"PaymentMethodConsentRequiredException",message:"The user must consent to share their default payment method on file across partners.",errorCases:[{method:["getDefaultPaymentMethod"],status:[404],code:"payment-method.consent-required"}]},productBlocked:{name:"ProductBlockedException",message:"Product Blocked user has active subscription for a similar product."},unpriceableOrder:{name:"UnpriceableOrderException",message:"Order could not be priced due to issues with the provided data.",errorCases:[{method:["priceOrder"],status:[400,422]}]}},common:{authenticationExpired:{name:"AuthenticationExpiredException",message:"Authentication has expired and needs to be updated before proceeding."},clientUnsupportedFeature:{name:"ClientUnsupportedFeatureException",message:"An error needs to be emitted that wasn't anticipated during planning."},invalidState:{name:"InvalidStateException",message:"The operation being attempted is not valid for the current state."},locationAcquisition:{name:"LocationAcquisitionException",message:"Unable to get user location due to location service being disabled."},locationNotAllowed:{name:"LocationNotAllowedException",message:"User is not allowed to use the app in their current location."},network:{name:"NetworkException",message:"Problem with the underlying network connection."},requestBlocked:{name:"RequestBlockedException",message:"Device IP address is blacklisted."},requestTemporarilyBlocked:{name:"RequestTemporarilyBlockedException",message:"Device IP address is temporarily blocked."},temporarilyThrottled:{name:"TemporarilyThrottledException",message:"Device IP address is temporarily throttled."},temporarilyUnavailable:{name:"TemporarilyUnavailableException",message:"There was a general error while processing the request"},unexpectedError:{name:"UnexpectedErrorException",message:"An unexpected error has occurred."},upgradeRequired:{name:"UpgradeRequiredException",message:"The profile requires a PIN but no PIN was supplied and X-BAMTech-PIN-Unsupported header is set."}},configuration:{configurationNotFound:{name:"ConfigurationNotFoundException",message:"Unable to locate configuration data based on the supplied bootstrap parameter."}},content:{invalidRequest:{name:"InvalidRequestException",message:"The content query request was invalid.",errorCases:[{method:["query"],status:[400]}]}},drm:{downgrade:{name:"DowngradeException",message:"The device does not meet the security requirements for the requested content quality and should retry at a lower quality setting."},rejected:{name:"RejectedException",message:"The device should be considered blacklisted."}},eligibility:{accountResolution:{name:"AccountResolutionException",message:"The account could not be resolved."},huluService:{name:"HuluServiceException",message:"There was a general Hulu error while processing the request."},invalidRequest:{name:"InvalidRequestException",message:"The eligibility request was invalid.",errorCases:[{method:["getEligibilityStatus"],status:[400]}]}},externalAuthorization:{clientIdNotFound:{name:"ClientIdNotFoundException",message:"The provided client ID was not found."},redirectUriInvalid:{name:"RedirectUriInvalidException",message:"The provided redirect URI is invalid."},redirectUriNotAllowed:{name:"RedirectUriNotAllowedException",message:"The provided redirect URI is not allowed."}},internal:{invalidDustConfiguration:{name:"InvalidDustConfigurationException",message:"Dust Configuration is incomplete or incorrect - most likely the application or environment Object is incomplete."}},media:{accountIdMissing:{name:"AccountIdMissingException",message:"Request for license has been made with device authorization instead of account authorization."},authorizationExpired:{name:"AuthorizationExpiredException",message:"Could not reauthorize before attempting to access media."},blackout:{name:"BlackoutException",message:"The current user is not allowed to access the media for the requested license because they are in a blackout location."},downloadLimitReached:{name:"DownloadLimitReachedException",message:"The device has downloaded the maximum number of videos permitted."},drm:{name:"DrmException",message:"General DRM error."},fraudDetectionViolation:{name:"FraudDetectionViolationException",message:"Account has been flagged for potential fraud due to a high number of downloads on different devices."},keyNotFound:{name:"KeyNotFoundException",message:"The requested license is not available."},kidsModeEnabled:{name:"KidsModeEnabledException",message:"The current user is not allowed to access the media for the requested license due to parental controls restrictions on the account."},loginRequired:{name:"LoginRequiredException",message:"The requested media can only be viewed after authentication."},mediaExperienceContextBodyInvalid:{name:"MediaExperienceContextBodyInvalidException",message:"Invalid experience context (bumper) configuration for QC playback."},mediaNotAllowed:{name:"MediaNotAllowedException",message:"The current user is not allowed to access the media for the requested license."},mediaUnavailable:{name:"MediaUnavailableException",message:"The requested media is not available."},notEntitled:{name:"NotEntitledException",message:"The user is not entitled to the requested media for the requested license."},offlineNotPermitted:{name:"OfflineNotPermittedException",message:"The current user is not allowed to obtain the requested license because the media is not available for offline viewing."},parentalControlsRestricted:{name:"ParentalControlsRestrictedException",message:"The current user is not allowed to access the media for the requested license due to parental controls restrictions on the profile."},sdkMisconfigured:{name:"SdkMisconfiguredException",message:"The SDK is misconfigured and does not include any playback scenario defaults."},streamConcurrency:{name:"StreamConcurrencyException",message:"The current user is not allowed to access the media for the requested license because they have too many concurrent streams."},thumbnailsNotAvailable:{name:"ThumbnailsNotAvailableException",message:"No thumbnails are available for the given media."}},orchestration:{accountArchived:{name:"AccountArchivedException",message:"The orchestration service was unable to get the account grant due to the account being archived."},accountSecurityFlagged:{name:"AccountSecurityFlaggedException",message:"The account has been security flagged."},accountVerificationRequired:{name:"AccountVerificationRequiredException",message:"The account is not verified."},identityPasswordResetRequired:{name:"IdentityPasswordResetRequiredException",message:"A password reset is required for this account."},attributeValidation:{name:"AttributeValidationException",message:"One or more attributes supplied are invalid."},authenticationBlocked:{name:"AuthenticationBlockedException",message:"The users account should be blocked for being a minor or due to inappropriate behavior."},deviceIdInvalid:{name:"DeviceIdInvalidException",message:"The access token contains an invalid device ID."},documentsRetrievalFailed:{name:"DocumentsRetrievalFailedException",message:"The documents could not be retrieved."},identityAlreadyExists:{name:"IdentityAlreadyExistsException",message:"The new email address is already taken."},identityNotFound:{name:"IdentityNotFoundException",message:"The requested identity does not exist."},invalidCredentials:{name:"InvalidCredentialsException",message:"Invalid credential values received. This could be incorrect email or password, or mismatched credentials."},invalidEmail:{name:"InvalidEmailException",message:"The new email address is invalid."},invalidPasscode:{name:"InvalidPasscodeException",message:"The passcode is invalid."},invalidPassword:{name:"InvalidPasswordException",message:"The user entered a password that does not meet the minimum password requirements."},invalidPreAuthToken:{name:"InvalidPreAuthTokenException",message:"The pre-auth token has expired, is invalid or was faked by the user."},licensePlateNotFound:{name:"LicensePlateNotFoundException",message:"The license plate was not found."},marketingPreferenceUpdateFailed:{name:"MarketingPreferenceUpdateFailedException",message:"Update of marketing preferences failed."},offDeviceActionGrantInvalid:{name:"OffDeviceActionGrantInvalidException",message:"The action grant was invalid."},offDeviceGrantInvalid:{name:"OffDeviceGrantInvalidException",message:"The device grant was invalid."},offDeviceMissingActionGrant:{name:"OffDeviceMissingActionGrantException",message:"The action grant is missing."},offDeviceMissingRedemptionFlow:{name:"OffDeviceMissingRedemptionFlowException",message:"The redemption flow is missing."},rateLimited:{name:"RateLimitedException",message:"Too many passcodes have been requested."},resourceTimedOut:{name:"ResourceTimedOutException",message:"Call to dynamodb in the resource-service timed out."},tokenAlreadyUsed:{name:"TokenAlreadyUsedException",message:"Unable to use the reset token, it has already been used."},tokenInvalid:{name:"TokenInvalidException",message:"Unable to reset the password as the reset token is not recognized by the service."},maximumProfilesReached:{name:"MaximumProfilesReachedException",message:"The maximum number of profiles for the user's account has already been reached."},profileCreationProtected:{name:"ProfileCreationProtectedException",message:"Creation of a profile on this account requires authentication."},profilePinInvalid:{name:"ProfilePinInvalidException",message:"The provided PIN is not the correct pin for this profile."},profileRetrieval:{name:"ProfileRetrievalException",message:"The profiles for the user's account could not be retrieved."},userProfileDeleteFailed:{name:"UserProfileDeleteFailedException",message:"The userProfile failed to be deleted."},profileLookupIdFailed:{name:"ProfileLookupIdFailedException",message:"The userProfile Id was not found."},userProfileNotFound:{name:"UserProfileNotFoundException",message:"The userProfile was not found."},userProfileUpdateFailed:{name:"UserProfileUpdateFailedException",message:"The userProfile update failed."}},purchase:{activationBadRequest:{name:"ActivationBadRequestException",message:"The service failed to activate due to a bad request."},activationFailed:{name:"ActivationFailedException",message:"The service failed to activate the receipt."},activationForbidden:{name:"ActivationForbiddenException",message:"The service failed to activate due to linking being forbidden."},activationTokenExpired:{name:"ActivationTokenExpiredException",message:"The service failed to activate due to the activation token being expired."},bundleForbidden:{name:"BundleForbiddenException",message:"The service failed to return the ActivationToken for the bundle purchase."},retryFailed:{name:"RetryFailedException",message:"The SDK exhausted all retry attempts without successfully activating."},providerNotEnabled:{name:"ProviderNotEnabledException",message:"The specified content provider is not enabled."}},userProfile:{ageNotVerified:{name:"AgeNotVerifiedException",message:"The age for the users profile has not been verified and needs to be before proceeding."},ageNotVerifiedKr:{name:"AgeNotVerifiedKrException",message:"The age for the users profile has not been verified and needs to be before proceeding. The user is located in South Korea."},profilePinExpired:{name:"ProfilePinExpiredException",message:"The profile pin has expired and needs to be updated before proceeding."},profileMissing:{name:"ProfileMissingException",message:"There was no active profile in the token or the service was unable to use it."},profilePinMissing:{name:"ProfilePinMissingException",message:"The profile requires a PIN but no PIN was supplied."},profilePinNotEligible:{name:"ProfilePinNotEligibleException",message:"The profile is not eligible for setting a pin"},profilePinUpdateFailed:{name:"ProfilePinUpdateFailedException",message:"The pin update failed"}},socket:{flowControlPolicyConflict:{name:"FlowControlPolicyConflictException",message:"Conflicting policies are applied for an eventUrn."},flowControlPolicyInvalid:{name:"FlowControlPolicyInvalidException",message:"An invalid policy name is supplied."},flowControlEventInvalid:{name:"FlowControlEventInvalidException",message:"An event-type URN provided is an invalid format (not URN)."}},subscription:{subscriptionNotFound:{name:"SubscriptionNotFoundException",message:"No subscription with that id has been found for the user.",errorCases:[{method:["getAccountSubscription","getSubscriberInfo"],status:[404]}]}}},X={accountArchived:{code:"account.archived",exceptionData:Y.orchestration.accountArchived},accountBlocked:{code:"account.blocked",status:[200,403],exceptionData:Y.account.accountBlocked},accountGetFailed:{code:"account.get.failed",status:[200,401,404],exceptionData:Y.account.accountNotFound},accountIdMissing:{code:"account-id.missing",status:[400],exceptionData:Y.media.accountIdMissing},accountLoginFailed:{code:"account.login.failed",exceptionData:Y.account.accountLoginFailed},accountNotFound:{code:"account.not.found",status:[200,401,404],exceptionData:Y.account.accountNotFound},deviceIdInvalid:{code:"device.error.device.id.invalid",exceptionData:Y.orchestration.deviceIdInvalid},userProfileDeleteFailed:{code:"account.profile.delete.failed",status:[200],exceptionData:Y.orchestration.userProfileDeleteFailed},profileLookupIdFailed:{code:"profile.lookup.id.failed",status:[200],exceptionData:Y.orchestration.profileLookupIdFailed},userProfileNotFound:{code:"account.profile.not.found",status:[200],exceptionData:Y.orchestration.userProfileNotFound},profileRetrieval:{code:"account.profile.read.failed",status:[200],exceptionData:Y.orchestration.profileRetrieval},userProfileUpdateFailed:{code:"profile.update.failed",status:[200],exceptionData:Y.orchestration.userProfileUpdateFailed},maximumProfilesReached:{code:"account.profiles.max.exceeded",status:[200],exceptionData:Y.orchestration.maximumProfilesReached},accountResolution:{code:"account.resolution.failure",exceptionData:Y.eligibility.accountResolution},accountSecurityFlagged:{code:"account.security-flagged",exceptionData:Y.orchestration.accountSecurityFlagged},accountVerificationRequired:{code:"account.verification.required",exceptionData:Y.orchestration.accountVerificationRequired},accountIdentityVerificationRequired:{code:"idp.error.identity.verification.required",exceptionData:Y.orchestration.accountVerificationRequired},identityPasswordResetRequired:{code:"idp.error.identity.password-reset-required",exceptionData:Y.orchestration.identityPasswordResetRequired},actionGrantRejected:{code:"account.error.action-grant.invalid",exceptionData:Y.account.actionGrantRejected},ageNotVerified:{code:"age-not-verified",status:[403],exceptionData:Y.userProfile.ageNotVerified},ageNotVerifiedKr:{code:"age-not-verified-kr",status:[403],exceptionData:Y.userProfile.ageNotVerifiedKr},authorizationExpired:{code:"access-token.expired",status:[401],exceptionData:Y.media.authorizationExpired},blackout:{code:"blackout",status:[403],exceptionData:Y.media.blackout},channelNoAiring:{code:"channel.no-airing",status:[404],exceptionData:Y.media.mediaUnavailable},channelNotFound:{code:"channel.not-found",status:[404],exceptionData:Y.media.mediaUnavailable},clientIdNotFound:{code:"payload.client-id.not.found",exceptionData:Y.externalAuthorization.clientIdNotFound},clientRevoked:{code:"client-revoked",status:[403],exceptionData:Y.media.mediaNotAllowed},clientUnsupportedFeature:{code:"client.unsupported-feature",exceptionData:Y.common.clientUnsupportedFeature},clockSync:{code:"clock-sync",status:[403],exceptionData:Y.media.mediaNotAllowed},comcastConsentRefused:{code:"comcast.commerce.403",exceptionData:Y.commerce.comcastConsentRefused},comcastServerError:{code:"comcast.commerce.500",exceptionData:Y.commerce.comcastServerError},comcastServiceUnavailable:{code:"comcast.commerce.503",exceptionData:Y.commerce.comcastServiceUnavailable},contentKeyNotFound:{code:"content-key.not-found",status:[404],exceptionData:Y.media.keyNotFound},copyFailure:{code:"copy.failure",exceptionData:Y.account.linkSubscriptionPartial},copyLimitReached:{code:"copy.limit.reached",exceptionData:Y.account.linkSubscriptionPartial},documentsRetrievalFailed:{code:"documents.retrieval.failure",exceptionData:Y.orchestration.documentsRetrievalFailed},downgrade:{code:"downgrade",status:[403],exceptionData:Y.drm.downgrade},downloadLimitReached:{code:"not-permitted-renewal",description:["download-limit-reached"],exceptionData:Y.media.downloadLimitReached},expectedSubscriptionsNotFound:{code:"expected.subscriptions.not.found",status:[403],exceptionData:Y.purchase.bundleForbidden},flowControlPolicyConflict:{code:"policy.conflict",exceptionData:Y.socket.flowControlPolicyConflict},flowControlPolicyInvalid:{code:"policy.invalid",exceptionData:Y.socket.flowControlPolicyInvalid},flowControlEventInvalid:{code:"event.invalid",exceptionData:Y.socket.flowControlEventInvalid},forbidden:{code:"forbidden",status:[403],exceptionData:Y.common.requestTemporarilyBlocked},fraudAccessRevoked:{code:"not-permitted-offline",description:["fraud-access-revoked"],exceptionData:Y.media.fraudDetectionViolation},huluService:{code:"hulu.service.failure",exceptionData:Y.eligibility.huluService},identityAlreadyExists:{code:"idp.error.identity.already-exists",exceptionData:Y.orchestration.identityAlreadyExists},identityAlreadyUsed:{code:"identity.already.used",exceptionData:Y.account.identityAlreadyUsed},idpErrorIdentityBadCredentials:{code:"idp.error.identity.bad-credentials",status:[200,401],exceptionData:Y.orchestration.invalidCredentials},idpErrorPasswordInvalidValue:{code:"idp.error.password.enhanced.invalid-value",exceptionData:Y.orchestration.invalidPassword},idpErrorResetTokenAlreadyUsed:{code:"idp.error.reset-token.already-used",exceptionData:Y.orchestration.tokenAlreadyUsed},idpErrorResetTokenInvalid:{code:"idp.error.reset-token.invalid",exceptionData:Y.orchestration.tokenInvalid},idpErrorAuthenticationBlocked:{code:"idp.error.identity.blocked",status:[200,403],exceptionData:Y.orchestration.authenticationBlocked},idpErrorIdentityNotFound:{code:"idp.error.identity.not-found",exceptionData:Y.orchestration.identityNotFound},idpFailureDataStoreThrottling:{code:"idp.failure.datastore.throttling-exception",status:[200],exceptionData:Y.common.temporarilyThrottled},invalidEmail:{code:"idp.error.params.invalid-email",exceptionData:Y.orchestration.invalidEmail},invalidEmailUpdate:{code:"idp.error.identity.invalid-email-update",exceptionData:Y.orchestration.invalidEmail},invalidGrant:{code:"invalid_grant",exceptionData:Y.common.authenticationExpired},invalidOrderId:{code:"invalid.order.id",exceptionData:Y.commerce.invalidOrderId},invalidPasscode:{code:"idp.error.otp.invalid-passcode",exceptionData:Y.orchestration.invalidPasscode},invalidPreAuthToken:{code:"idp.error.pre-auth.invalid-token",exceptionData:Y.orchestration.invalidPreAuthToken},invalidRedemptionCode:{code:"redemption.redeem.invalid.redemptionCode",status:[422],exceptionData:Y.commerce.invalidRedemptionCode},keyNotFound:{code:"key.not-found",status:[404],exceptionData:Y.media.keyNotFound},kidsModeEnabled:{code:"kids-mode-enabled",status:[403],exceptionData:Y.media.kidsModeEnabled},licensePlateNotFound:{code:"device.error.license.not.found",status:[200],exceptionData:Y.orchestration.licensePlateNotFound},linkedElsewhere:{code:"linked.elsewhere",exceptionData:Y.purchase.activationForbidden},loginRequired:{code:"login.required",status:[403],exceptionData:Y.media.loginRequired},marketingPreferenceUpdateFailed:{code:"idp.error.marketing.update.failed",exceptionData:Y.orchestration.marketingPreferenceUpdateFailed},mediaExperienceContextBodyInvalid:{code:"experience.context.body-invalid",status:[400],exceptionData:Y.media.mediaExperienceContextBodyInvalid},mediaMissing:{code:"media.missing",status:[404],exceptionData:Y.media.mediaUnavailable},mediaNotPlayable:{code:"media.not-playable",status:[404],exceptionData:Y.media.mediaUnavailable},notEntitled:{code:"not-entitled",status:[403],exceptionData:Y.media.notEntitled},notPermittedOffline:{code:"not-permitted-offline",status:[403],exceptionData:Y.media.offlineNotPermitted},offDeviceGrantInvalid:{code:"device.error.offdevicegrant.invalid",status:[200],exceptionData:Y.orchestration.offDeviceGrantInvalid},offDeviceActionGrantInvalid:{code:"device.error.invalid.action.grant",status:[200],exceptionData:Y.orchestration.offDeviceActionGrantInvalid},offDeviceMissingActionGrant:{code:"device.error.missing.action.grant",status:[200],exceptionData:Y.orchestration.offDeviceMissingActionGrant},offDeviceMissingRedemptionFlow:{code:"device.error.missing.redemption.flow",status:[200],exceptionData:Y.orchestration.offDeviceMissingRedemptionFlow},orderProductBlocked:{code:"order.product.blocked",status:[422],exceptionData:Y.commerce.orderProductBlocked},orderCountryInvalid:{code:"order.bin.country.invalid",status:[200,422],exceptionData:Y.commerce.orderCountryInvalid},orderFraud:{code:"order.ft.fraud",status:[422],exceptionData:Y.commerce.orderFraud},orderPaymentDeclined:{code:"order.failed",status:[422],exceptionData:Y.commerce.orderPaymentDeclined},orderStandaloneExceedsBundle:{code:"order.standalone.exceeds.bundle",status:[200,422],exceptionData:Y.commerce.orderStandaloneExceedsBundle},parentalControlsRestricted:{code:"parental-controls-restricted",status:[403],exceptionData:Y.media.parentalControlsRestricted},payloadFieldsIncorrect:{code:"payload.fields.incorrect",status:[200,404],exceptionData:Y.orchestration.attributeValidation},idpPayloadFieldsIncorrectGraphQl:{code:"idp.error.payload.fields.incorrect",exceptionData:Y.orchestration.attributeValidation},payloadIdTokenInvalid:{code:"payload.id-token.validation.failed",exceptionData:Y.account.invalidToken},pinExpired:{code:"pin-expired",status:[403],exceptionData:Y.userProfile.profilePinExpired},pinMissing:{code:"pin-missing",status:[403],exceptionData:Y.userProfile.profilePinMissing},preAuthThrottled:{code:"idp.error.auth.pre-auth.throttled",exceptionData:Y.orchestration.rateLimited},profileCreationProtected:{code:"account.profile.creation.protected",status:[200],exceptionData:Y.orchestration.profileCreationProtected},profileMissing:{code:"profile-missing",status:[403],exceptionData:Y.userProfile.profileMissing},profilePinInvalid:{code:"account.profile.pin.invalid",status:[200],exceptionData:Y.orchestration.profilePinInvalid},profilePinNotEligible:{code:"account.profile.pin.not-eligible",status:[200],exceptionData:Y.userProfile.profilePinNotEligible},profilePinMissing:{code:"account.profile.pin.missing",status:[400,401,404],exceptionData:Y.userProfile.profilePinMissing},profilePinUpdateFailed:{code:"account.profile.pin.update.failed",status:[200],exceptionData:Y.userProfile.profilePinUpdateFailed},productBlocked:{code:"redemption.redeem.product.blocked",status:[422],exceptionData:Y.commerce.productBlocked},providerNotEnabled:{code:"provider.not.enabled",status:[400],exceptionData:Y.purchase.providerNotEnabled},rateLimited:{code:"idp.error.auth.otp.throttled",status:[200,400],exceptionData:Y.orchestration.rateLimited},redirectUriInvalid:{code:"payload.redirect-uri.invalid",exceptionData:Y.externalAuthorization.redirectUriInvalid},redirectUriNotAllowed:{code:"payload.redirect-uri.not.allowed",exceptionData:Y.externalAuthorization.redirectUriNotAllowed},rejected:{code:"rejected",exceptionData:Y.drm.rejected},requestRejected:{code:"request.rejected",status:[400],exceptionData:Y.commerce.cardUpdateRejected},resourceTimedOut:{code:"resource.db.timeout.error",exceptionData:Y.orchestration.resourceTimedOut},securityLevel:{code:"security-level",status:[403],exceptionData:Y.media.mediaNotAllowed},securityLevelInsufficient:{code:"security-level.insufficient",status:[403],exceptionData:Y.drm.downgrade},streamConcurrency:{code:"stream-concurrency",status:[403],exceptionData:Y.media.streamConcurrency},streamConcurrencyViolation:{code:"stream-concurrency-violation",status:[403],exceptionData:Y.media.streamConcurrency},subscriptionNotFound:{code:"subscription.not.found",status:[404],exceptionData:Y.subscription.subscriptionNotFound},temporarilyUnavailable:{code:"graph.upstream.timeout",status:[200],exceptionData:Y.common.temporarilyUnavailable},tokenExpired:{code:"token.expired",exceptionData:Y.purchase.activationTokenExpired},tokenInvalid:{code:"token.invalid",exceptionData:Y.purchase.activationBadRequest},tokenMissing:{code:"token.missing",exceptionData:Y.purchase.activationBadRequest},tokenForbidden:{code:"token.forbidden",exceptionData:Y.purchase.activationForbidden},tokenServiceInvalidGrant:{code:"token.service.invalid.grant",exceptionData:Y.common.authenticationExpired},throttled:{code:"throttled",exceptionData:Y.common.temporarilyThrottled},thumbnailsUnavailable:{code:"thumbnails-unavailable",status:[404],exceptionData:Y.media.thumbnailsNotAvailable},tokenServiceUnauthorizedClient:{code:"token.service.unauthorized.client",exceptionData:Y.common.locationNotAllowed},unauthorizedClient:{code:"unauthorized_client",description:["unknown-location","unreliable-location","forbidden-location"],exceptionData:Y.common.locationNotAllowed},unexpectedError:{code:"graph.local.unexpected",status:[200],exceptionData:Y.common.unexpectedError},unpriceableOrderError101:{code:"price.order.101",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError102:{code:"price.order.102",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError103:{code:"price.order.103",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError104:{code:"price.order.104",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError110:{code:"price.order.110",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError111:{code:"price.order.111",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError112:{code:"price.order.112",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError113:{code:"price.order.113",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError116:{code:"price.order.116",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError117:{code:"price.order.117",exceptionData:Y.commerce.unpriceableOrder},unpriceableOrderError118:{code:"price.order.118",exceptionData:Y.commerce.unpriceableOrder},unspecifiedDrmError:{code:"unspecified-drm-error",status:[403],exceptionData:Y.media.drm},upgradeRequired:{code:"platform.client.upgrade.required",exceptionData:Y.common.upgradeRequired}};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){var t="function"==typeof Map?new Map:void 0;return te=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return re(e,arguments,ie(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),oe(n,e)},te(e)}function re(e,t,r){return re=ne()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&oe(o,r.prototype),o},re.apply(null,arguments)}function ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(s,e);var t,r,o,i,a,c=(t=s,r=ne(),function(){var e,n=ie(t);if(r){var o=ie(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Z(this,e)});function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.common.invalidState;if($(this,s),n.Check.string(t)){var o=t;t={reasons:[new I("",o)],exceptionData:r}}var i=t,a=i.transactionId,u=i.reasons,l=i.status,f=i.exceptionData,p=void 0===f?{}:f,h="ServiceException",d="An unexpected error occurred communicating with a service.",y=n.Check.nonEmptyString(p.message)?p.message:d;if((e=c.call(this,y)).transactionId=n.Check.string(a)?a:"",e.reasons=n.Check.array(u)?u:[],e.status=n.Check.number(l)?l:null,e.name=n.Check.nonEmptyString(p.name)?p.name:h,e.data={name:e.name,message:e.message},n.Check.function(Error.captureStackTrace)&&Error.captureStackTrace(ee(e),e.constructor),n.Check.string(e.stack)){var g=e.stack.split("\n");j.instance.error(g.slice(0,3).join("\n"),ee(e))}else j.instance.error("Unknown",ee(e));return e}return o=s,(i=[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message)}},{key:"inspect",value:function(){return this.toString()}}])&&Q(o.prototype,i),a&&Q(o,a),Object.defineProperty(o,"prototype",{writable:!1}),s}(te(Error));function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pe(e);if(t){var o=pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return fe(this,r)}}function fe(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(i,e);var t,r,n,o=le(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t={reasons:[new I("",e)],exceptionData:{name:"InvalidArgumentException",message:e}};return o.call(this,t)}return t=i,n=[{key:"typeName",get:function(){return"InvalidArgumentException"}},{key:"message",get:function(){return"One or more of the supplied variables does not pass validation."}}],(r=null)&&se(t.prototype,r),n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ae);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ge(e,t){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ge(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=me(e);if(t){var o=me(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return be(this,r)}}function be(e,t){if(t&&("object"===de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(i,e);var t,r,n,o=ve(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t={reasons:[new I("",e)],exceptionData:{name:"ProviderException",message:e}};return o.call(this,t)}return t=i,n=[{key:"typeName",get:function(){return"ProviderException"}},{key:"message",get:function(){return"An unexpected error occurred with a platform provider implementation."}}],(r=null)&&ye(t.prototype,r),n&&ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ae);const Se={ErrorReason:I,ErrorCode:X,ExceptionReference:Y,InvalidArgumentException:he,ProviderException:we,ServiceException:ae};function ke(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ee=Se.ErrorCode,Oe=Se.ErrorReason,Te=Se.ExceptionReference,Pe=Se.ServiceException;function je(e,t,r){var o,i=t&&t.length?t[0]:{},a=i.description,c=i.code;if(n.Check.nonEmptyString(r))for(var s=0,u=Object.keys(Te);s<u.length;s++){for(var l=u[s],f=Te[l],p=void 0,h=0,d=Object.keys(f);h<d.length;h++){var y=f[d[h]],g=y.errorCases;if(n.Check.array(g)&&(p=g.some((function(t){return!(!t.status.includes(e)||!t.method.includes(r))&&(!n.Check.assigned(t.code)||t.code===c)}))),p){o=y;break}}if(p)break}else for(var v=0,b=Object.keys(Ee);v<b.length;v++){var m=b[v],w=Ee[m];if(n.Check.array(w.description)){if(c===w.code&&w.description.includes(a)){o=w.exceptionData;break}}else if(n.Check.array(w.status)){if(c===w.code&&w.status.includes(e)){o=w.exceptionData;break}}else if(c===w.code){o=w.exceptionData;break}}return o}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=e.errors,o=e.methodName,i=[],a=[200,400,401,403,404,406,409,422,429],c=["getEligibilityStatus"];return c.includes(o)&&a.push(500),a.includes(t)&&n.Check.array(r)&&r.forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,r=e.description;i.push(new Oe(t,r))})),i}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=e.transactionId,o=e.errors,i=e.methodName,a=e.contentType,c=_e({status:t,errors:o,methodName:i}),s=je(t,o,i);if(!s){var u=n.Check.not.assigned(r),l=n.Check.string(a)&&"text/html"===a.toLowerCase();if(t>=500)s=Te.common.temporarilyUnavailable;else if(403===t&&u&&l)s=Te.common.requestBlocked;else if(200===t&&o&&o.length){s=Te.common.unexpectedError;var f=o[0];n.Check.string(f.description)&&(s.message=f.description)}else s={}}return new Pe({transactionId:r,reasons:c,exceptionData:s,status:t})}var Ce={200:[Ee.clientIdNotFound,Ee.redirectUriInvalid,Ee.redirectUriNotAllowed,Ee.accountArchived,Ee.accountBlocked,Ee.accountSecurityFlagged,Ee.accountVerificationRequired,Ee.accountIdentityVerificationRequired,Ee.actionGrantRejected,Ee.deviceIdInvalid,Ee.offDeviceGrantInvalid,Ee.offDeviceActionGrantInvalid,Ee.offDeviceMissingActionGrant,Ee.offDeviceMissingRedemptionFlow,Ee.invalidEmail,Ee.invalidEmailUpdate,Ee.licensePlateNotFound,Ee.unexpectedError,Ee.unpriceableOrderError101,Ee.unpriceableOrderError102,Ee.unpriceableOrderError103,Ee.unpriceableOrderError104,Ee.unpriceableOrderError110,Ee.unpriceableOrderError111,Ee.unpriceableOrderError112,Ee.unpriceableOrderError113,Ee.unpriceableOrderError116,Ee.unpriceableOrderError117,Ee.unpriceableOrderError118,Ee.accountGetFailed,Ee.accountLoginFailed,Ee.accountNotFound,Ee.maximumProfilesReached,Ee.profileCreationProtected,Ee.profilePinInvalid,Ee.profileRetrieval,Ee.userProfileDeleteFailed,Ee.profileLookupIdFailed,Ee.userProfileNotFound,Ee.userProfileUpdateFailed,Ee.identityAlreadyExists,Ee.identityAlreadyUsed,Ee.idpErrorIdentityBadCredentials,Ee.idpErrorAuthenticationBlocked,Ee.idpErrorIdentityNotFound,Ee.idpErrorPasswordInvalidValue,Ee.idpFailureDataStoreThrottling,Ee.marketingPreferenceUpdateFailed,Ee.payloadFieldsIncorrect,Ee.idpPayloadFieldsIncorrectGraphQl,Ee.documentsRetrievalFailed,Ee.invalidPreAuthToken,Ee.temporarilyUnavailable,Ee.preAuthThrottled,Ee.profilePinNotEligible,Ee.profilePinUpdateFailed,Ee.rateLimited,Ee.resourceTimedOut,Ee.tokenServiceInvalidGrant,Ee.tokenServiceUnauthorizedClient,Ee.identityPasswordResetRequired,Ee.orderCountryInvalid,Ee.orderStandaloneExceedsBundle],202:[Ee.copyFailure,Ee.copyLimitReached]},Re=[].concat(ke(Ce[200].map((function(e){return e.code}))),ke(Ce[202].map((function(e){return e.code}))));function De(e){return!!n.Check.array(e)&&e.some((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code;return Re.includes(t)}))}function Ie(e,t,r){var o={response:n.Types.object(),dustLogUtility:n.Types.skip,methodName:n.Types.nonEmptyString.optional};(0,n.typecheck)("checkResponseCode",o,arguments);var i=e.status,a=e.headers,c=e.data,s=c||{},u=s.errors,l=void 0===u?[]:u,f=c.error,p=c.error_description,h=c.data,d=l[0]||{},y=d.message,g=d.extensions,v=void 0===g?{}:g,b=[200,202].includes(i),m=a&&a.get?a.get("x-request-id"):null,w=a&&a.get?a.get("content-type"):null,S=i>=400,k=!1;if(S&&n.Check.string(f)&&l.push({code:f,description:p}),b&&n.Check.string(v.code)&&n.Check.not.nonEmptyObject(h)&&(l[0]={code:v.code,description:y},S=!0),t&&t.parseResponse({response:e,transactionId:m}),b&&(k=De(l)),S||k){var x=Ae({status:i,transactionId:m,errors:l,methodName:r,contentType:w});return t&&(t.logTransaction&&t.setServiceInteraction({response:e,exception:x}),t.captureError(x)),Promise.reject(x)}return t&&t.logTransaction&&t.setServiceInteraction({response:e}),Promise.resolve(e)}function Le(e,t){try{var r=e();return void 0!==r?r:t}catch(e){return t}}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}const Ne=function(){return"object"===("undefined"==typeof self?"undefined":Me(self))&&self.self===self&&self||"object"===(void 0===r.g?"undefined":Me(r.g))&&r.g.global===r.g&&r.g||window};var Fe=new RegExp("//aeng(-test)?");var Be=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?(Z|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}const Ge=function(){var e=new WeakSet;return function(t,r){if("object"===Ue(r)&&null!==r){if(e.has(r))return;e.add(r)}return r}};const ze=function(e,t){var r="";if(n.Check.string(e)&&(r=e),n.Check.nonEmptyString(t)){var o=r.includes("?")?"&":"?";return r.concat("".concat(o).concat(t))}return r},Ve={checkResponseCode:Ie,delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},getSafe:Le,getScope:Ne,adEngineRegex:function(e){return Fe.test(e)},dateRegex:function(e){return Be.test(e)},circularReplacer:Ge,toUpperFirst:function(e){if(n.Check.nonEmptyString(e)){var t=e.toLowerCase();return t.substr(0,1).toUpperCase()+t.substr(1)}},appendQuerystring:ze},qe={account:{accountApi:{getAccount:"urn:bamtech:dust:bamsdk:api:account:getAccount",updateAccount:"urn:bamtech:dust:bamsdk:api:account:updateAccount",linkSubscriptionsFromDevice:"urn:bamtech:dust:bamsdk:api:account:linkSubscriptionsFromDevice",authorize:"urn:bamtech:dust:bamsdk:api:account:authorize",createAccount:"urn:bamtech:dust:bamsdk:api:account:createAccount",onboardAccountToStar:"urn:bamtech:dust:bamsdk:api:account:onboardAccountToStar",updateProtectProfileCreation:"urn:bamtech:dust:bamsdk:api:account:updateProtectProfileCreation",updateProtectProfileCreationWithActionGrant:"urn:bamtech:dust:bamsdk:api:account:updateProtectProfileCreationWithActionGrant",checkIsProfileCreationProtected:"urn:bamtech:dust:bamsdk:api:account:checkIsProfileCreationProtected"}},commerce:{commerceApi:{priceOrder:"urn:bamtech:dust:bamsdk:api:commerce:priceOrder",getLocationCandidates:"urn:bamtech:dust:bamsdk:api:commerce:getLocationCandidate",submitOrderWithPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:submitOrderWithPaymentMethod",submitOrderWithCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:submitOrderWithPaymentMethod",updateOrder:"urn:bamtech:dust:bamsdk:api:commerce:updateOrder",validateOrder:"urn:bamtech:dust:bamsdk:api:commerce:checkOrderStatus",createCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:createPaymentMethod",getDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:getDefaultPaymentMethod",getPaymentCard:"urn:bamtech:dust:bamsdk:api:commerce:getPaymentCard",updatePaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:updatePaymentMethod",listAllPaymentMethods:"urn:bamtech:dust:bamsdk:api:commerce:listAllPaymentMethods",redeem:"urn:bamtech:dust:bamsdk:api:commerce:redeem",resumeAccount:"urn:bamtech:dust:bamsdk:api:commerce:resumeAccount",getDdcJwtToken:"urn:bamtech:dust:bamsdk:api:commerce:getDdcJwtToken",planSwitch:"urn:bamtech:dust:bamsdk:api:commerce:planSwitch",shareDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:shareDefaultPaymentMethod",restartSubscription:"urn:bamtech:dust:bamsdk:api:commerce:restartSubscription",getPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:getPaymentMethod",associateAuthValuesWithPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:associateAuthValuesWithPaymentMethod"},comcastApi:{submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:comcast:submitPayment",createComcastPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:comcast:createComcastPaymentMethod",getComcastConsent:"urn:bamtech:dust:bamsdk:api:commerce:comcast:getComcastConsent"},iDealApi:{createIDealPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:iDeal:createIDealPaymentMethod",getIDealPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:iDeal:getIDealPaymentMethod",submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:iDeal:submitPayment"},payPalApi:{getCheckoutDetails:"urn:bamtech:dust:bamsdk:api:commerce:paypal:getCheckoutDetails",setCheckoutDetails:"urn:bamtech:dust:bamsdk:api:commerce:paypal:setCheckoutDetails"},mercadoApi:{submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:mercado:submitPayment"},klarnaApi:{submitPayment:"urn:bamtech:dust:bamsdk:api:commerce:klarna:submitPayment"},paymentCardApi:{submitOrderWithCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:paymentCard:submitOrderWithPaymentMethod",createCardPaymentMethod:"urn:bamtech:dust:bamsdk:api:commerce:paymentCard:createPaymentMethod"}},configuration:{configurationManager:{getConfiguration:"urn:bamtech:dust:bamsdk:service:configuration:loadRemote"}},content:{contentApi:{query:"urn:bamtech:dust:bamsdk:api:content:query",getSearchSuggestions:"urn:bamtech:dust:bamsdk:api:content:getSearchSuggestions",getBookmarks:"urn:bamtech:dust:bamsdk:api:content:getBookmarks",search:"urn:bamtech:dust:bamsdk:api:content:search",getWatchlist:"urn:bamtech:dust:bamsdk:api:content:getWatchlist",removeFromWatchlist:"urn:bamtech:dust:bamsdk:api:content:removeFromWatchlist",addToWatchlist:"urn:bamtech:dust:bamsdk:api:content:addToWatchlist",clearWatchlist:"urn:bamtech:dust:bamsdk:api:content:clearWatchlist"}},customerService:{customerServiceApi:{createSupportCode:"urn:bamtech:dust:bamsdk:api:customerService:createSupportCode"}},drm:{fairPlayDrmProvider:{getFairPlayLicense:"urn:bamtech:dust:bamsdk:api:fairPlayDrmProvider:getFairPlayLicense",getFairPlayCertificate:"urn:bamtech:dust:bamsdk:api:fairPlayDrmProvider:getFairPlayCertificate"},nagraDrmProvider:{getNagraCertificate:"urn:bamtech:dust:bamsdk:api:nagraDrmProvider:getNagraCertificate"},playReadyDrmProvider:{getPlayReadyLicense:"urn:bamtech:dust:bamsdk:api:playReadyDrmProvider:getPlayReadyLicense"},silkDrmProvider:{getSilkKey:"urn:bamtech:dust:bamsdk:api:silkDrmProvider:getSilkKey"},widevineDrmProvider:{getWidevineLicense:"urn:bamtech:dust:bamsdk:api:widevineDrmProvider:getWidevineLicense",getWidevineCertificate:"urn:bamtech:dust:bamsdk:api:widevineDrmProvider:getWidevineCertificate"}},externalAuthorization:{externalAuthorizationApi:{createLinkGrant:"urn:bamtech:dust:bamsdk:api:externalAuthorization:createLinkGrant"}},entitlement:{entitlementApi:{verifyMediaRights:"urn:bamtech:dust:bamsdk:api:entitlement:verifyMediaRights"}},invoice:{invoiceApi:{getInvoice:"urn:bamtech:dust:bamsdk:api:invoice:getInvoice",getPaginatedInvoices:"urn:bamtech:dust:bamsdk:api:invoice:getPaginatedInvoices"}},media:{mediaApi:{createPlaybackSession:"urn:bamtech:dust:bamsdk:api:media:createPlaybackSession",fetch:"urn:bamtech:dust:bamsdk:api:media:fetch",getSpriteSheetThumbnailSets:"urn:bamtech:dust:bamsdk:api:media:getSpriteSheetThumbnailSets",getSpriteSheetThumbnailSet:"urn:bamtech:dust:bamsdk:api:media:getSpriteSheetThumbnailSet",getSpriteSheetThumbnail:"urn:bamtech:dust:bamsdk:api:media:getSpriteSheetThumbnail",getBifThumbnailSets:"urn:bamtech:dust:bamsdk:api:media:getBifThumbnailSets",getBifThumbnailSet:"urn:bamtech:dust:bamsdk:api:media:getBifThumbnailSet"},playbackSession:{prepare:"urn:bamtech:dust:bamsdk:api:media:playbackSession:prepare",release:"urn:bamtech:dust:bamsdk:api:media:playbackSession:release",onAccessChanged:"urn:bamtech:dust:bamsdk:api:media:playbackSession:onAccessChanged"},encryptionKeyProvider:{getEncryptionKey:"urn:bamtech:dust:bamsdk:api:media:encryptionKeyProvider:getEncryptionKey"}},messaging:{messagingApi:{registerChannel:"urn:bamtech:dust:bamsdk:api:messaging:registerChannel"}},orchestration:{orchestrationApi:{query:"urn:bamtech:dust:bamsdk:api:orchestration:query",getOperationUrn:function(e){return"urn:bamtech:dust:bamsdk:api:orchestration:".concat(e)}}},paywall:{paywallApi:{getPaywall:"urn:bamtech:dust:bamsdk:api:paywall:getPaywall"}},purchase:{purchaseApi:{redeem:"urn:bamtech:dust:bamsdk:api:purchase:redeem",restore:"urn:bamtech:dust:bamsdk:api:purchase:restore",getEligibilityStatus:"urn:bamtech:dust:bamsdk:api:purchase:getEligibilityStatus",redeemToken:"urn:bamtech:dust:bamsdk:api:purchase:redeemToken",redeemBundle:"urn:bamtech:dust:bamsdk:api:purchase:redeemBundle",createExternalRedemptionToken:"urn:bamtech:dust:bamsdk:api:purchase:createExternalRedemptionToken",generateActivationToken:"urn:bamtech:dust:bamsdk:api:purchase:generateActivationToken"}},sdkSession:{createSdkSession:"urn:bamtech:dust:bamsdk:api:session:create",initialize:"urn:bamtech:dust:bamsdk:api:session:initialize",reset:"urn:bamtech:dust:bamsdk:api:session:reset",reauthorize:"urn:bamtech:dust:bamsdk:api:session:reauthorize",getAccessState:"urn:bamtech:dust:bamsdk:api:session:getAccessState",restoreAccessState:"urn:bamtech:dust:bamsdk:api:session:restoreAccessState",getSessionInfo:"urn:bamtech:dust:bamsdk:api:session:getSessionInfo",createCustomerSupportCode:"urn:bamtech:dust:bamsdk:api:session:createCustomerSupportCode",authorize:"urn:bamtech:dust:bamsdk:api:session:authorize",assumeIdentity:"urn:bamtech:dust:bamsdk:api:session:assumeIdentity",getInitializationState:"urn:bamtech:dust:bamsdk:api:session:getInitializationState",getSessionToken:"urn:bamtech:dust:bamsdk:api:session:getSessionToken",getExperimentAssignment:"urn:bamtech:dust:bamsdk:api:session:getExperimentAssignment",isAuthorized:"urn:bamtech:dust:bamsdk:api:session:isAuthorized"},socket:{socketApi:{sendMessage:"urn:bamtech:dust:bamsdk:api:socket:sendMessage",start:"urn:bamtech:dust:bamsdk:api:socket:start",stop:"urn:bamtech:dust:bamsdk:api:socket:stop"},socketManager:{sourcePrefix:"urn:dss:source:sdk:javascript",authenticated:"urn:dss:transport:edge:event:authenticated",authentication:"urn:dss:event:edge:sdk:authentication",edgeEventReceived:"urn:dss:transport:edge:event:received",event:"urn:dss:event:sdk:api:event",exposure:"urn:dss:event:weaponx:exposure",unauthenticated:"urn:dss:transport:edge:event:unauthenticated",reconnect:"urn:dss:event:edge:sdk:reconnect",refresh:"urn:dss:event:edge:sdk:token:refresh",flowControl:"urn:dss:event:edge:sdk:flowControlRequest",flowControlError:"urn:dss:transport:edge:event:flowControlError",received:"urn:dss:transport:edge:event:received",offDeviceTokenRefresh:"urn:dss:event:offDeviceLogin:refresh",ageVerificationRequestCompleted:"urn:dss:event:age-verification:request:completed",ageVerificationRequestErrored:"urn:dss:event:age-verification:request:errored",ageVerificationRedeemCompleted:"urn:dss:event:age-verification:redeem:completed",ageVerificationRedeemErrored:"urn:dss:event:age-verification:redeem:errored",ping:"urn:dss:transport:edge:event:ping",pong:"urn:dss:transport:edge:event:pong",sessionAuthentication:"urn:dss:event:edge:sdk:sessionAuthentication"}},subscription:{subscriptionApi:{getSubscriptions:"urn:bamtech:dust:bamsdk:api:subscription:getSubscriptions",getSubscriberInfo:"urn:bamtech:dust:bamsdk:api:subscription:getSubscriberInfo",getAccountSubscription:"urn:bamtech:dust:bamsdk:api:subscription:getAccountSubscription"}},userActivity:{personalization:{contentRecommendationAward:"urn:bamtech:dust:bamsdk:app:content-recommendation-reward:v1"},glimpse:{appLaunched:"urn:dss:glimpse:event:app-lifecycle:app-launched",backgroundPlaybackStarted:"urn:dss:glimpse:track-action:background-playback-started",backgroundPlaybackExited:"urn:dss:glimpse:track-action:background-playback-exited",contentSelected:"urn:dss:glimpse:event:track-action:content-selected",searchViewLoaded:"urn:dss:glimpse:event:track-action:search-view-loaded",playbackSelected:"urn:dss:glimpse:event:track-action:playback-selected",playbackExited:"urn:dss:glimpse:event:track-action:playback-exited",purchaseCompleted:"urn:dss:glimpse:event:track-action:purchase-completed",purchaseCompletedv2:"urn:dss:event:fed:purchase:completed-v2",viewLoaded:"urn:dss:glimpse:event:track-state:view-loaded"}},userProfile:{userProfileApi:{deleteProfilePin:"urn:bamtech:dust:bamsdk:api:account:deleteProfilePin",onboardProfileToStar:"urn:bamtech:dust:bamsdk:api:userProfile:onboardProfileToStar",retrieveProfilePin:"urn:bamtech:dust:bamsdk:api:account:retrieveProfilePin",updateProfilePin:"urn:bamtech:dust:bamsdk:api:account:updateProfilePin",updateProfilePinWithActionGrant:"urn:bamtech:dust:bamsdk:api:account:updateProfilePinWithActionGrant",createProfilePin:"urn:bamtech:dust:bamsdk:api:account:createProfilePin"}},qualityOfService:{audioChanged:"urn:dss:event:fed:media:playback:audio:changed",bitrateChanged:"urn:dss:event:fed:media:playback:bitrate:changed",drmCertificateFetched:"urn:dss:event:fed:media:drm:certificate:fetched",drmKeyFetched:"urn:dss:event:fed:media:drm:key:fetched",multivariantPlaylistFetched:"urn:dss:event:fed:media:playlist:master:fetched",mediaPayloadFetched:"urn:dss:event:fed:media:payload:fetched",mediaSegmentFetched:"urn:dss:event:fed:media:segment:fetched",playbackSessionTransferred:"urn:dss:event:fed:media:session:playback:transferred",subtitleChanged:"urn:dss:event:fed:media:playback:subtitle:changed",playbackStartup:"urn:dss:event:client:playback:startup:v1",playback:"urn:dss:event:client:playback:event:v1",playbackHeartbeat:"urn:dss:event:client:playback:heartbeat:v1",error:"urn:dss:event:qoe:client:error:v1"},services:{account:{accountClient:{createAccount:"urn:bamtech:dust:bamsdk:service:account:createAccount",createAccountGrant:"urn:bamtech:dust:bamsdk:service:account:createAccountGrant",deleteProfilePin:"urn:bamtech:dust:bamsdk:service:account:deleteProfilePin",getCurrentAccount:"urn:bamtech:dust:bamsdk:service:account:getCurrentAccount",onboardAccountToStar:"urn:bamtech:dust:bamsdk:service:account:onboardAccountToStar",onboardProfileToStar:"urn:bamtech:dust:bamsdk:service:account:onboardProfileToStar",retrieveProfilePin:"urn:bamtech:dust:bamsdk:service:account:retrieveProfilePin",updateAttributes:"urn:bamtech:dust:bamsdk:service:account:updateAttributes",updateProfilePin:"urn:bamtech:dust:bamsdk:service:account:updateProfilePin",updateProfilePinWithActionGrant:"urn:bamtech:dust:bamsdk:service:account:updateProfilePinWithActionGrant",updateProtectProfileCreation:"urn:bamtech:dust:bamsdk:service:account:updateProtectProfileCreation",updateProtectProfileCreationWithActionGrant:"urn:bamtech:dust:bamsdk:service:account:updateProtectProfileCreationWithActionGrant",checkIsProfileCreationProtected:"urn:bamtech:dust:bamsdk:service:account:checkIsProfileCreationProtected",createProfilePin:"urn:bamtech:dust:bamsdk:service:account:createProfilePin"}},commerce:{commerceClient:{priceOrder:"urn:bamtech:dust:bamsdk:service:commerce:priceOrder",lookupByZipCode:"urn:bamtech:dust:bamsdk:service:commerce:lookupByZipCode",submitOrderWithPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:submitOrderWithPaymentMethod",updateOrder:"urn:bamtech:dust:bamsdk:service:commerce:updateOrder",getOrderStatus:"urn:bamtech:dust:bamsdk:service:commerce:getOrderStatus",createCardPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:createPaymentMethod",getDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:getDefaultPaymentMethod",updatePaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:updatePaymentMethod",listAllPaymentMethods:"urn:bamtech:dust:bamsdk:service:commerce:listAllPaymentMethods",redeem:"urn:bamtech:dust:bamsdk:service:commerce:redeem",resumeAccount:"urn:bamtech:dust:bamsdk:service:commerce:resumeAccount",getDdcJwtToken:"urn:bamtech:dust:bamsdk:service:commerce:getDdcJwtToken",planSwitch:"urn:bamtech:dust:bamsdk:service:commerce:planSwitch",shareDefaultPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:shareDefaultPaymentMethod",submitComcastPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitComcastPayment",submitIDealPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitIDealPayment",submitKlarnaPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitKlarnaPayment",submitMercadoPayment:"urn:bamtech:dust:bamsdk:service:commerce:submitMercadoPayment",getCheckoutDetails:"urn:bamtech:dust:bamsdk:service:commerce:getCheckoutDetails",setCheckoutDetails:"urn:bamtech:dust:bamsdk:service:commerce:setCheckoutDetails",restartSubscription:"urn:bamtech:dust:bamsdk:service:commerce:restartSubscription",getPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:getPaymentMethod",createComcastPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:createComcastPaymentMethod",getComcastConsent:"urn:bamtech:dust:bamsdk:service:commerce:getComcastConsent",associateAuthValuesWithPaymentMethod:"urn:bamtech:dust:bamsdk:service:commerce:associateAuthValuesWithPaymentMethod"}},configuration:{configurationClient:{getConfiguration:"urn:bamtech:dust:bamsdk:service:configuration:getConfiguration"}},content:{contentClient:{query:"urn:bamtech:dust:bamsdk:service:content:query",getSearchSuggestions:"urn:bamtech:dust:bamsdk:service:content:getSearchSuggestions"}},customerService:{customerServiceClient:{createSupportCode:"urn:bamtech:dust:bamsdk:service:customerService:createSupportCode"}},drm:{drmClient:{getSilkKey:"urn:bamtech:dust:bamsdk:service:drm:silkKey",getPlayReadyLicense:"urn:bamtech:dust:bamsdk:service:drm:playReadyLicense",getFairPlayCertificate:"urn:bamtech:dust:bamsdk:service:drm:fairPlayCertificate",getFairPlayLicense:"urn:bamtech:dust:bamsdk:service:drm:fairPlayLicense",getWidevineCertificate:"urn:bamtech:dust:bamsdk:service:drm:widevineCertificate",getWidevineLicense:"urn:bamtech:dust:bamsdk:service:drm:widevineLicense",getNagraCertificate:"urn:bamtech:dust:bamsdk:service:drm:nagraCertificate",getNagraLicense:"urn:bamtech:dust:bamsdk:service:drm:nagraLicense"}},eligibility:{eligibilityClient:{getEligibilityStatus:"urn:bamtech:dust:bamsdk:service:eligibility:getEligibilityStatus"}},entitlement:{entitlementClient:{verifyMediaRights:"urn:bamtech:dust:bamsdk:service:entitlement:verifyMediaRights"}},externalActivation:{externalActivationClient:{redeemBundle:"urn:bamtech:dust:bamsdk:service:externalActivation:redeemBundle",redeemToken:"urn:bamtech:dust:bamsdk:service:externalActivation:redeemToken",createExternalRedemptionToken:"urn:bamtech:dust:bamsdk:service:externalActivation:createExternalRedemptionToken",generateActivationToken:"urn:bamtech:dust:bamsdk:service:externalActivation:generateActivationToken"}},externalAuthorization:{externalAuthorizationClient:{createLinkGrant:"urn:bamtech:dust:bamsdk:service:externalAuthorization:createLinkGrant"}},internal:{telemetry:{telemetryClient:{postEvents:"urn:bamtech:dust:bamsdk:service:telemetry:postEvent"},eventBuffer:{processBatch:"urn:bamtech:dust:bamsdk:service:telemetry:processBatch"}}},invoice:{invoiceClient:{getInvoice:"urn:bamtech:dust:bamsdk:service:invoice:getInvoice",getPaginatedInvoices:"urn:bamtech:dust:bamsdk:service:invoice:getPaginatedInvoices"}},media:{adEngine:{adEngineClient:{updateCookies:"urn:bamtech:dust:bamsdk:service:adEngine:setToken",getCookies:"urn:bamtech:dust:bamsdk:service:adEngine:setTokenRedirect"}},mediaClient:{mediaPayload:"urn:bamtech:dust:bamsdk:service:media:postForMediaPayload",createAuthCookie:"urn:bamtech:dust:bamsdk:service:media:createAuthCookie",getSpriteSheetThumbnails:"urn:bamtech:dust:bamsdk:service:media:spriteSheetThumbnails",getSpriteSheetThumbnail:"urn:bamtech:dust:bamsdk:service:media:spriteSheetThumbnail",getBifThumbnails:"urn:bamtech:dust:bamsdk:service:media:bifThumbnails",downloadBifThumbnail:"urn:bamtech:dust:bamsdk:service:media:bifThumbnail"}},orchestration:{orchestrationClient:{query:"urn:bamtech:dust:bamsdk:service:orchestration:query",registerDevice:"urn:bamtech:dust:bamsdk:service:orchestration:registerDevice",exchangeDeviceGrantForAccessToken:"urn:bamtech:dust:bamsdk:service:orchestration:exchangeDeviceGrantForAccessToken",refreshToken:"urn:bamtech:dust:bamsdk:service:orchestration:refreshToken",getOperationUrn:function(e){return"urn:bamtech:dust:bamsdk:service:orchestration:".concat(e)}}},paywall:{paywallClient:{getPaywall:"urn:bamtech:dust:bamsdk:service:paywall:paywall"}},purchase:{purchaseClient:{redeemPurchases:"urn:bamtech:dust:bamsdk:service:purchase:redeemPurchases",restorePurchases:"urn:bamtech:dust:bamsdk:service:purchase:restorePurchases",getTokens:"urn:bamtech:dust:bamsdk:service:purchase:getTokens"}},subscription:{subscriptionClient:{linkSubscriptionsFromDevice:"urn:bamtech:dust:bamsdk:service:subscription:linkSubscriptionsFromDevice",getSubscriptions:"urn:bamtech:dust:bamsdk:service:subscription:getSubscriptions",getSubscriberInfo:"urn:bamtech:dust:bamsdk:service:subscription:getSubscriberInfo",getAccountSubscription:"urn:bamtech:dust:bamsdk:service:subscription:getAccountSubscription"}},token:{tokenClient:{exchange:"urn:bamtech:dust:bamsdk:service:token:exchange"}}},streamSample:"urn:dss:telemetry-service:event:stream-sample",bamSdk:"urn:bamtech:dust:bamsdk"},Ke={api:{event:":event:sdk",error:":error:sdk"},service:{event:":event:service",error:":error:service"},glimpse:"urn:bamtech:dust:bamsdk:event:glimpse",personalization:"urn:bamtech:dust:bamsdk:event:app",qos:"urn:bamtech:dust:bamsdk:event:qos"};function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function He(){He=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==We(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ye(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){$e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var et={options:n.Types.custom((function(e){return!!e&&(!0===e.skipLogTransaction||!!n.Check.instanceStrict(e.logTransaction,H))})," { logTransaction: LogTransaction } instance or { skipLogTransaction: true }")},tt=function(){function e(t){Qe(this,e);var r={options:n.Types.object({logger:n.Types.instanceStrict(j),source:n.Types.nonEmptyString,urn:n.Types.nonEmptyString,data:n.Types.object().optional,method:n.Types.nonEmptyString.optional,payload:n.Types.object().optional,category:n.Types.nonEmptyString.optional,endpointKey:n.Types.nonEmptyString.optional,dustEnabled:n.Types.boolean.optional})};(0,n.typecheck)(this,r,arguments),(0,n.typecheck)(this,et,arguments);var o=t.logger,i=t.source,a=t.urn,c=t.data,s=void 0===c?{}:c,u=t.method,l=t.payload,f=void 0===l?{}:l,p=t.category,h=t.logTransaction,d=t.endpointKey,y=t.dustEnabled,g=void 0===y||y;this.logger=o,this.source=i,this.urn=a,this.data=s,this.payload=f,this.category=p,this.logTransaction=h,this.dustEnabled=g,this.endpointKey=d,this.server=u?Je({},{method:u}):{},this.timestamp=new Date,this.name=this.urn,this.level=3,this.isPublic=!0,this.error=null,this.parsePayload()}var t,r,o,i,a;return t=e,r=[{key:"log",value:function(){try{var e=this.generateLogEvent,t=this.isPublic,r=this.logger,n=this.source;if(!this.dustEnabled)return Promise.resolve();var o=e.call(this);return r.log(n,o,t).catch((function(e){return r.warn(e,o)})).finally((function(){return Promise.resolve()}))}catch(e){return Promise.resolve()}}},{key:"captureErrors",value:function(e){return this.captureError(e)}},{key:"captureError",value:function(e){return this.exception=e,this.error={case:Ve.getSafe((function(){return e.data.name})),reasons:Ve.getSafe((function(){return e.reasons})),cause:{message:Ve.getSafe((function(){return e.message})),transactionId:Ve.getSafe((function(){return e.transactionId}))}},e}},{key:"logData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.data=Object.assign(this.data,e)}},{key:"parseResponse",value:function(e){if(n.Check.object(e)){var t=this.server,r=this.timestamp,o=e.response.status,i=e.transactionId;t.requestId=i,t.statusCode=o,t.roundTripTime=Date.now()-r}}},{key:"setServiceInteraction",value:function(e){var t=this.logTransaction,r=this.timestamp,n=this.server,o=this.endpointKey,i=e.response,a=e.exception,c=i.status,s=i.headers,u={host:n.host,path:n.path,method:n.method},l={requestId:s.get("X-Request-ID"),region:s.get("X-BAMTech-Region"),cloudFrontPop:s.get("x-amz-cf-pop"),cloudFrontId:s.get("x-amz-cf-id"),statusCode:c,roundTripTime:Date.now()-r},f={requestStart:r-t.startTime,requestEnd:Date.now()-t.startTime},p={endpoint:o},h=a?a.reasons:void 0;t.appendRequest({request:u,response:l,timing:f,configuration:p,error:h})}},{key:"parsePayload",value:function(){var e=this.payload,t=this.server;if(n.Check.nonEmptyString(e.url)){var r=new RegExp("^(.*:)//?([www.]+)*([A-Za-z0-9-.]+)(:[0-9]+)?(.*)$","g").exec(e.url);n.Check.nonEmptyArray(r)&&(t.host=r[3],t.path=r[5].split("?")[0])}}},{key:"generateLogEvent",value:function(){var e=this.data,t=this.error,r=this.isPublic,o=this.level,i=this.name,a=this.payload,c=this.server,s=this.timestamp,u=n.Check.nonEmptyObject(a),l=n.Check.assigned(t),f={extraData:{category:this.generateCategory({isServiceEvent:u,hasErrors:l}),timestamp:s.toISOString()},isPublic:r,name:i,level:o},p=f.extraData;return u&&(p.server=c),n.Check.nonEmptyObject(e)&&(p.data=e),l&&(p.error=t),f}},{key:"generateCategory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.category;if(n.Check.not.assigned(t)){var r=e.isServiceEvent,o=e.hasErrors,i=r?"service":"api",a=o?"error":"event";return"".concat(qe.bamSdk).concat(Ke[i][a])}return t}},{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustLogUtility"}}],o=[{key:"wrap",value:(i=He().mark((function t(r){var o,i,a,c,s,u,l,f=arguments;return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o={options:n.Types.object({dustEnabled:n.Types.boolean,dustUtilityCtorOptions:n.Types.nonEmptyObject,action:n.Types.function})},(0,n.typecheck)(this,"wrap",o,f),i=r.dustEnabled,a=r.dustUtilityCtorOptions,c=r.action,s=r.DustLogUtilityCtorOverride||e,i){t.next=8;break}return t.next=7,c();case 7:case 12:return t.abrupt("return",t.sent);case 8:return u=new s(a),t.prev=9,t.next=12,c(u);case 15:throw t.prev=15,t.t0=t.catch(9),l=t.t0,u.captureError(l),l;case 20:return t.prev=20,u.log(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[9,15,20,23]])})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){Ye(o,r,n,a,c,"next",e)}function c(e){Ye(o,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}],r&&Ze(t.prototype,r),o&&Ze(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(){nt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==rt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function ot(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ct=function(){function e(t){it(this,e);var r={options:n.Types.object({logger:n.Types.instanceStrict(j)})};(0,n.typecheck)(this,r,arguments);var o=t.logger;this.logger=o}var t,r,o,i,a;return t=e,r=[{key:"wrapLogTransaction",value:(i=nt().mark((function e(t){var r,o,i,a,c,s=arguments;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={options:n.Types.object({urn:n.Types.nonEmptyString,file:n.Types.nonEmptyString,action:n.Types.function})},(0,n.typecheck)(this,"wrapLogTransaction",r,s),o=t.urn,i=t.file,a=t.action,c=this.logger,e.abrupt("return",H.wrapLogTransaction({urn:o,file:i,logger:c,action:a}));case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){ot(o,r,n,a,c,"next",e)}function c(e){ot(o,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.BaseApi"}}],r&&at(t.prototype,r),o&&at(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(){ut=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==st(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function lt(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yt(e);if(t){var o=yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return dt(this,r)}}function dt(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(u,e);var t,r,o,i,a,c=ht(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).permitAppDustEvents=!1,t.logger.info(t.toString(),"Created."),t}return t=u,r=[{key:"registerCorrelationId",value:function(e,t){return new Promise((function(e,t){return t(new Error("Not Implemented"))}))}},{key:"deregisterCorrelationId",value:function(e){return new Promise((function(e,t){return t(new Error("Not Implemented"))}))}},{key:"logDustEvent",value:(i=ut().mark((function e(t){var r,o,i,a,c,s,u,l=arguments;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={dustEvent:n.Types.object({category:n.Types.nonEmptyString,event:n.Types.nonEmptyString,data:n.Types.nonEmptyObject.optional,server:n.Types.object({method:n.Types.nonEmptyString.optional}).optional})},(0,n.typecheck)(this,"logDustEvent",r,l),o=t.category,i=t.event,a=t.data,c=t.server,s=(c||{}).method,!this.permitAppDustEvents){e.next=8;break}return u=new tt({logger:this.logger,category:o,source:this.toString(),urn:i,data:a,method:s,skipLogTransaction:!0}),e.next=8,u.log();case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){lt(o,r,n,a,c,"next",e)}function c(e){lt(o,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"setAnalyticsProvider",value:function(e){var t={analyticsProvider:n.Types.instanceStrict(s)};(0,n.typecheck)(this,"setAnalyticsProvider",t,arguments),this.logger.analyticsProvider=e}},{key:"getAnalyticsProvider",value:function(){return this.logger.analyticsProvider}},{key:"correlationIds",value:function(){return new Promise((function(e,t){return t(new Error("Not Implemented"))}))}},{key:"enableCustomDustEvents",value:function(){this.permitAppDustEvents=!0}},{key:"toString",value:function(){return"SDK.Logging.LoggingApi"}}],r&&ft(t.prototype,r),o&&ft(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(ct);function vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};vt(this,e),this.isPublic=t,this.level=r,this.name=n,this.extraData=o}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Logging.Metric"}}])&&bt(t.prototype,r),n&&bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const wt=Object.assign(j.instance,{LoggingApi:gt,Logger:j,LogEvent:v,LogSink:Object.assign(d,{ConsoleSink:E}),LogLevel:f,LogTransaction:H,Metric:mt,AnalyticsProvider:s});var St=r(6752),kt=r.n(St);const xt=kt()({dev:null,prod:null,staging:null}),Et=kt()({prod:null,qa:null,mock:null,rapid:null}),Ot=kt()({chromecast:null,netcast:null,panasonictv:null,sonybravia:null,tivo:null,tizen:null,trilithium:null,vizio:null,webos:null,canalPlus:null,skyq:null,cableVision:null,comcastx1:null,telecentro:null,toshibaRegza:null,hisense:null,rogersx1:null,coxx1:null,xglobal:null});function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jt,_t,At,Ct=function(){function e(t){Tt(this,e);var r={options:n.Types.object({clientId:n.Types.nonEmptyString,clientApiKey:n.Types.nonEmptyString,environment:n.Types.in(Et),application:n.Types.object({version:n.Types.nonEmptyString,id:n.Types.nonEmptyString.optional,name:n.Types.nonEmptyString.optional}),debugEnabled:n.Types.boolean.optional,platform:n.Types.in(Ot).optional,configHostName:n.Types.nonEmptyString.optional,useStorageCompression:n.Types.boolean.optional,configHostOverride:n.Types.nonEmptyString.optional,applicationRuntimeOverride:n.Types.nonEmptyString.optional,deviceProfileOverride:n.Types.nonEmptyString.optional,configHostUrlOverride:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.clientId,i=t.clientApiKey,a=t.environment,c=t.debugEnabled,s=void 0!==c&&c,u=t.platform,l=void 0===u?null:u,f=t.configHostName,p=void 0===f?xt.prod:f,h=t.application,d=t.useStorageCompression,y=void 0!==d&&d,g=t.configHostOverride,v=t.applicationRuntimeOverride,b=t.deviceProfileOverride,m=t.configHostUrlOverride;this.clientId=o,this.clientApiKey=i,this.environment=a,this.debugEnabled=s||!1,this.platform=l,this.configHostName=p||xt.prod,this.application=h,this.useStorageCompression=y||!1,this.configHostOverride=g,this.applicationRuntimeOverride=v,this.deviceProfileOverride=b,this.configHostUrlOverride=m}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.BootstrapConfiguration"}}])&&Pt(t.prototype,r),o&&Pt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"setProviders",value:function(t){var r={options:n.Types.object({EnvironmentConfiguration:n.Types.function,HttpClient:n.Types.function,Storage:n.Types.function})};(0,n.typecheck)(e,"setProviders",r,arguments);var o=t.EnvironmentConfiguration,i=t.HttpClient,a=t.Storage;_t=o,jt=i,At=a}},{key:"EnvironmentConfiguration",get:function(){if(!_t)throw new Error("EnvironmentConfiguration provider not specified");return _t}},{key:"HttpClient",get:function(){if(!jt)throw new Error("HttpClient provider not specified");return jt}},{key:"Storage",get:function(){if(!At)throw new Error("Storage provider not specified");return At}}],(r=[{key:"toString",value:function(){return"SDK.Services.Providers.PlatformProviders"}}])&&Rt(t.prototype,r),o&&Rt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mt=function(){function e(t){It(this,e);var r={options:n.Types.object({updateAccessToken:n.Types.function,refreshAccessToken:n.Types.function,getAccessToken:n.Types.function,once:n.Types.function,emit:n.Types.function})};(0,n.typecheck)(this,r,arguments);var o=t.updateAccessToken,i=t.refreshAccessToken,a=t.getAccessToken,c=t.once,s=t.emit;this.once=c,this.emit=s,this.updateAccessToken=o,this.refreshAccessToken=i,this.getAccessToken=a,this.tokenManager=null}var t,r,o;return t=e,(r=[{key:"currentTokenRefreshPromise",get:function(){return this.tokenManager&&this.tokenManager.currentTokenRefreshPromise},set:function(e){this.tokenManager&&(this.tokenManager.currentTokenRefreshPromise=e)}},{key:"toString",value:function(){return"SDK.Services.TokenUpdater"}}])&&Lt(t.prototype,r),o&&Lt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Nt=kt()({TokenRefreshFailed:null,AccessChanged:null,SessionInfoChanged:null,UpdateAdEngine:null});function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Bt(){Bt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ft(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ut(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Gt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ut(i,n,o,a,c,"next",e)}function c(e){Ut(i,n,o,a,c,"throw",e)}a(void 0)}))}}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qt=Se.ErrorReason,Kt=Se.ExceptionReference,Wt=Se.ServiceException,Ht=Se.ProviderException,Yt=function(){function e(t,r){zt(this,e);var o={logger:n.Types.instanceStrict(wt.Logger),tokenUpdater:n.Types.instanceStrict(Mt)};(0,n.typecheck)(this,o,arguments),this.optionsBaseline={url:""},this.optionsMismatchError="Options do not match expected input",this.logger=t,this.tokenUpdater=r,this.regionHeader="x-bamtech-region",this.logger.log(this.toString(),"Created Core Provider.")}var t,r,o,i,a,c,s;return t=e,r=[{key:"post",value:function(e){return Promise.reject(new Ht("".concat(this.toString(),".post(options) - not-implemented")))}},{key:"get",value:function(e){return Promise.reject(new Ht("".concat(this.toString(),".get(options) - not-implemented")))}},{key:"del",value:function(e){return Promise.reject(new Ht("".concat(this.toString(),".del(options) - not-implemented")))}},{key:"delete",value:function(e){return this.del(e)}},{key:"patch",value:function(e){return Promise.reject(new Ht("".concat(this.toString(),".patch(options) - not-implemented")))}},{key:"put",value:function(e){return Promise.reject(new Ht("".concat(this.toString(),".put(options) - not-implemented")))}},{key:"tryParseJSON",value:function(e){var t;try{t=JSON.parse(e)}catch(r){t=e}return t}},{key:"getResponseData",value:(s=Gt(Bt().mark((function e(t){var r,n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="text",e.prev=1,e.next=4,t.text();case 4:r=e.sent,n="text",r=JSON.parse(r),n="json",e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:return e.abrupt("return",{data:r,dataType:n});case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),function(e){return s.apply(this,arguments)})},{key:"verifyStatus",value:function(e){return e>=200}},{key:"onError",value:function(e,t){var r=Kt.common.network,o=[];return n.Check.assigned(e)&&(o=[new qt(e.name,e.message)]),Promise.reject(new Wt({reasons:o,exceptionData:r}))}},{key:"rawFetch",value:(c=Gt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject(new Ht("".concat(this.toString(),".rawFetch(options) - not-implemented"))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"fetchRequest",value:(a=Gt(Bt().mark((function e(t){var r,n,o,i,a,c,s=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(s.length>1&&void 0!==s[1])||s[1],e.prev=1,e.next=4,this.rawFetch(t);case 4:return n=e.sent,e.next=7,this.getResponseData(n,t.bodyType);case 7:if(o=e.sent,!r){e.next=16;break}return e.next=11,this.isTokenInvalidatedBasedOnErrorResponse({status:n.status,dataWrapper:o});case 11:if(!e.sent){e.next=16;break}return e.next=15,this.applyNewTokenToHeaders(t.headers);case 15:return e.abrupt("return",this.fetchRequest(t,!1));case 16:return i=n.status,a=n.headers,c=o.data,e.abrupt("return",{url:t.url,status:i,headers:a,data:c});case 21:return e.prev=21,e.t0=e.catch(1),e.abrupt("return",this.onError(e.t0,t));case 24:case"end":return e.stop()}}),e,this,[[1,21]])}))),function(e){return a.apply(this,arguments)})},{key:"isTokenInvalidatedBasedOnErrorResponse",value:(i=Gt(Bt().mark((function e(t){var r,n,o,i,a,c,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.status,n=t.dataWrapper,o=401===r,i="json"===n.dataType,!o||!i){e.next=16;break}if(e.prev=4,a=Ve.getSafe((function(){return n.data.errors[0]})),c=a&&"access-token.invalid"===a.code,s=["auth.invalidated","auth.expired"],!c||!s.includes(a.description)&&!s.includes(a.reason)){e.next=11;break}return this.logger.warn("".concat(a.code," found - going to re-try acquire token")),e.abrupt("return",!0);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),this.logger.error("Error reading JSON response",e.t0,n.data);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(e){return i.apply(this,arguments)})},{key:"applyNewTokenToHeaders",value:function(e){var t=this;return new Promise(function(){var r=Gt(Bt().mark((function r(n,o){var i,a,c;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.tokenUpdater&&t.tokenUpdater.once&&t.tokenUpdater.once(Nt.TokenRefreshFailed,(function(e){o(e)})),r.next=5,t.tokenUpdater.refreshAccessToken({forceRefresh:!0});case 5:i=e.get("Authorization"),a=t.tokenUpdater.getAccessToken(),(c=Ve.getSafe((function(){return a.token})))&&i&&e.set("Authorization",i.replace(/([Bb]earer ?)?(.*)/,"$1".concat(c))),n(),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),o(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"toString",value:function(){return"SDK.Services.Providers.Shared.CoreHttpClientProvider"}}],r&&Vt(t.prototype,r),o&&Vt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Xt=kt()({GET:null,POST:null,DELETE:null,PATCH:null,PUT:null});function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Qt=function(){function e(t){Jt(this,e);var r={configHostParams:n.Types.nonEmptyObject};n.typecheck.warn(this,r,arguments),this.configHostParams=t}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClientExtrasMap"}}])&&$t(t.prototype,r),o&&$t(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zt(this,e),this.baseUrl=t,this.endpoints=r}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceClientConfiguration"}}])&&er(t.prototype,r),n&&er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rr(e){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(e)}function nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ir(e,t){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ir(e,t)}function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ur(e);if(t){var o=ur(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return cr(this,r)}}function cr(e,t){if(t&&("object"===rr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}var lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ir(e,t)}(a,e);var t,r,o,i=ar(a);function a(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nr(this,a),r=i.call(this,t,o);var c={extras:n.Types.instanceStrict(Qt),baseUrl:n.Types.nonEmptyString,endpoints:n.Types.skip};return(0,n.typecheck)(sr(r),c,arguments),r.extras=e,r}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClientConfiguration"}}])&&or(t.prototype,r),o&&or(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(tr);function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pr=[],hr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"plugins",get:function(){return pr}},{key:"addPlugin",value:function(e){pr.push(e)}}],(r=[{key:"toString",value:function(){return"SDK.SdkPlugins"}}])&&fr(t.prototype,r),n&&fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var gr=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];dr(this,e),this.client=t,this.extras=r,this.disabled=n}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceConfiguration"}}])&&yr(t.prototype,r),n&&yr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wr(e,t){return wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wr(e,t)}function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xr(e);if(t){var o=xr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return kr(this,r)}}function kr(e,t){if(t&&("object"===vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xr(e){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xr(e)}var Er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wr(e,t)}(i,e);var t,r,n,o=Sr(i);function i(){return br(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.EventsAtEdgeDustConfiguration"}}])&&mr(t.prototype,r),n&&mr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(gr);function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jr(e,t){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jr(e,t)}function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Cr(e);if(t){var o=Cr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ar(this,r)}}function Ar(e,t){if(t&&("object"===Or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cr(e){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cr(e)}var Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jr(e,t)}(i,e);var t,r,n,o=_r(i);function i(){return Tr(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.OrchestrationManagerConfiguration"}}])&&Pr(t.prototype,r),n&&Pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(gr);function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mr(e,t){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mr(e,t)}function Nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Br(e);if(t){var o=Br(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Fr(this,r)}}function Fr(e,t){if(t&&("object"===Dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Br(e){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Br(e)}var Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mr(e,t)}(i,e);var t,r,n,o=Nr(i);function i(){return Ir(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.OrchestrationClientConfiguration"}}])&&Lr(t.prototype,r),n&&Lr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(tr);function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Vr=function(){function e(t){Gr(this,e);var r={options:n.Types.object({enableUpdateDeviceOS:n.Types.boolean}).optional};n.typecheck.warn(this,r,arguments);var o=t||{},i=o.enableUpdateDeviceOS;this.enableUpdateDeviceOS=i||!1}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.OrchestrationExtrasMap"}}])&&zr(t.prototype,r),o&&zr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hr(e,t){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hr(e,t)}function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Jr(e);if(t){var o=Jr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Xr(this,r)}}function Xr(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Jr(e){return Jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jr(e)}var $r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hr(e,t)}(i,e);var t,r,n,o=Yr(i);function i(){return Kr(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionClientConfiguration"}}])&&Wr(t.prototype,r),n&&Wr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(tr);function Qr(e){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(e)}function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tn(e,t){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tn(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=on(e);if(t){var o=on(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nn(this,r)}}function nn(e,t){if(t&&("object"===Qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tn(e,t)}(i,e);var t,r,n,o=rn(i);function i(){return Zr(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.SubscriptionManagerConfiguration"}}])&&en(t.prototype,r),n&&en(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(gr);function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ln(e,t){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ln(e,t)}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=hn(e);if(t){var o=hn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return pn(this,r)}}function pn(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hn(e){return hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hn(e)}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(i,e);var t,r,n,o=fn(i);function i(){return sn(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryClientConfiguration"}}])&&un(t.prototype,r),n&&un(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(tr);function yn(e){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(e)}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}function mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Sn(e);if(t){var o=Sn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wn(this,r)}}function wn(e,t){if(t&&("object"===yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Sn(e){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sn(e)}var kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(i,e);var t,r,n,o=mn(i);function i(){return gn(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.TelemetryManagerConfiguration"}}])&&vn(t.prototype,r),n&&vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(gr);function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var On=function(){function e(t){xn(this,e);var r={options:n.Types.object({bufferConfigurationDefault:n.Types.object(),streamSampleBufferConfiguration:n.Types.object(),glimpseBufferConfiguration:n.Types.object(),qoeBufferConfiguration:n.Types.object(),eventBufferConfiguration:n.Types.object(),fastTrack:n.Types.object(),prohibited:n.Types.object(),permitAppDustEvents:n.Types.boolean})};n.typecheck.warn(this,r,arguments);var o=t.bufferConfigurationDefault,i=t.streamSampleBufferConfiguration,a=t.glimpseBufferConfiguration,c=t.qoeBufferConfiguration,s=t.eventBufferConfiguration,u=t.fastTrack,l=t.prohibited,f=t.permitAppDustEvents;this.bufferConfigurationDefault=o,this.streamSampleBufferConfiguration=i||o,this.glimpseBufferConfiguration=a||o,this.qoeBufferConfiguration=c||o,this.eventBufferConfiguration=s||o,this.fastTrack=u,this.prohibited=l,this.permitAppDustEvents=f}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.TelemetryManagerExtrasMap"}}])&&En(t.prototype,r),o&&En(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function Pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jn(e,t){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jn(e,t)}function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Cn(e);if(t){var o=Cn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return An(this,r)}}function An(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}var Rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jn(e,t)}(i,e);var t,r,n,o=_n(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).extras=r,n}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Token.TokenClientConfiguration"}}])&&Pn(t.prototype,r),n&&Pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(tr);function Dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var In=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Token.TokenClientExtrasMap"}}])&&Dn(t.prototype,r),n&&Dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fn(e,t){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fn(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gn(e);if(t){var o=Gn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Un(this,r)}}function Un(e,t){if(t&&("object"===Ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}var zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fn(e,t)}(i,e);var t,r,n,o=Bn(i);function i(){return Mn(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.TokenManagerConfiguration"}}])&&Nn(t.prototype,r),n&&Nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(gr);function Vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kn=function(){function e(t,r,o,i){Vn(this,e);var a={retryBasePeriod:n.Types.number.warn,retryMultiplier:n.Types.number.warn,retryMaxAttempts:n.Types.number.warn,retryMaxPeriod:n.Types.number.warn};(0,n.typecheck)(this,a,arguments),this.retryBasePeriod=t,this.retryMultiplier=r,this.retryMaxAttempts=o,this.retryMaxPeriod=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.RetryPolicy"}}])&&qn(t.prototype,r),o&&qn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yn=function(){function e(t,r,o){Wn(this,e);var i={refreshThreshold:n.Types.number,autoRefreshRetryPolicy:n.Types.instanceStrict(Kn),subjectTokenTypes:n.Types.nonEmptyObject};n.typecheck.warn(this,i,arguments),this.refreshThreshold=t,this.autoRefreshRetryPolicy=r,this.subjectTokenTypes=o||this.getDefaultSubjectTokenTypes()}var t,r,o;return t=e,(r=[{key:"getDefaultSubjectTokenTypes",value:function(){return{device:"urn:bamtech:params:oauth:token-type:device",account:"urn:bamtech:params:oauth:token-type:account",temporary:"urn:ietf:params:oauth:token-type:jwt"}}},{key:"toString",value:function(){return"SDK.Services.Configuration.TokenManagerExtrasMap"}}])&&Hn(t.prototype,r),o&&Hn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $n=function(){function e(t,r,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Xt.GET,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Xn(this,e),this.rel=t,this.href=r,this.ttl=n,this.timeout=o,this.templated=i,this.method=a,this.headers=c,this.optionalHeaders=s}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceEndpoint"}}])&&Jn(t.prototype,r),n&&Jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eo=function(){function e(t){Qn(this,e);var r={options:n.Types.object({services:n.Types.nonEmptyObject,commonHeaders:n.Types.object().optional,commonValues:n.Types.object().optional,logger:n.Types.instanceStrict(wt.Logger)})};(0,n.typecheck)(this,r,arguments);var o=t.services,i=t.commonHeaders,a=void 0===i?{}:i,c=t.commonValues,s=void 0===c?{}:c,u=t.logger;this.commonHeaders=a||{},this.commonValues=s||{},this.account={},this.adEngine={},this.customerService={},this.drm={},this.eligibility={},this.entitlement={},this.purchase={},this.subscription={},this.token={},this.media={},this.telemetry={},this.content={},this.commerce={},this.orchestration={},this.paywall={},this.externalActivation={},this.externalAuthorization={},this.socket={},this.invoice={},this.eventsAtEdgeDust={},this.processServices(o,u)}var t,r,o;return t=e,r=[{key:"processServices",value:function(e,t){var r=e.subscription,n=e.token,o=e.telemetry,i=e.orchestration,a=e.eventsAtEdgeDust,c=n.client,s=n.extras,u=c.endpoints,l=c.extras,f=s.autoRefreshRetryPolicy,p=o.extras,h=new Kn(f.retryBasePeriod,f.retryMultiplier,f.retryMaxAttempts,f.retryMaxPeriod),d=this,y=new $r(Le((function(){return r.client.baseUrl})),d.processEndpoints(Le((function(){return r.client.endpoints})))),g=new dn(Le((function(){return o.client.baseUrl})),d.processEndpoints(Le((function(){return o.client.endpoints})))),v=new Rn(c.baseUrl,d.processEndpoints(u),new In(l)),b=new Ur(Le((function(){return i.client.baseUrl})),d.processEndpoints(i.client.endpoints));this.eventsAtEdgeDust=new Er(null,null,a.disabled),hr.plugins.forEach((function(t){t.applyConfig&&t.applyConfig(d,e)})),d.subscription=new an(y,null,r.disabled),d.telemetry=new kn(g,new On({eventBufferConfiguration:p.eventBufferConfiguration,bufferConfigurationDefault:p.bufferConfigurationDefault,streamSampleBufferConfiguration:p.streamSampleBufferConfiguration,glimpseBufferConfiguration:p.glimpseBufferConfiguration,qoeBufferConfiguration:p.qoeBufferConfiguration,fastTrack:p.fastTrack,prohibited:p.prohibited,permitAppDustEvents:p.permitAppDustEvents,logger:t}),o.disabled),d.token=new zn(v,new Yn(s.refreshThreshold,h,s.subjectTokenTypes),n.disabled),d.orchestration=new Rr(b,new Vr(i.extras),i.disabled)}},{key:"processEndpoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.commonHeaders,r={};return Object.keys(e).forEach((function(n){var o=e[n];o.headers=o.headers?Object.assign(o.headers,t):t,o.rel=n,r[o.rel]=new $n(o.rel,o.href,o.ttl,o.timeout,o.templated,o.method,o.headers,o.optionalHeaders)})),r}},{key:"toString",value:function(){return"SDK.Services.Configuration.ServiceDefinitionsConfiguration"}}],r&&Zn(t.prototype,r),o&&Zn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var no=function(){function e(t){to(this,e);var r={options:n.Types.object({commonHeaders:n.Types.nonEmptyObject,commonValues:n.Types.nonEmptyObject.optional,services:n.Types.nonEmptyObject,environmentConfiguration:n.Types.instanceStrict(Dt.EnvironmentConfiguration),application:n.Types.nonEmptyObject.optional,logger:n.Types.instanceStrict(wt.Logger)})};(0,n.typecheck)(this,r,arguments);var o=t.application,i=t.commonHeaders,a=t.commonValues,c=t.environmentConfiguration,s=t.logger,u=t.services;this.commonHeaders={},this.commonValues={},this.services={},this.application=o,this.processConfig({commonHeaders:i,commonValues:a,services:u,application:o},c,s)}var t,r,o;return t=e,(r=[{key:"processConfig",value:function(e,t,r){var n=e.commonHeaders,o=e.commonValues,i=void 0===o?{}:o,a=e.services,c=t.sdkVersion,s=t.applicationVersion,u=t.constructedPlatformIdentifier;this.commonHeaders=n,this.commonValues=i;var l=this.commonHeaders["X-BAMSDK-Version"].replace(/\{SDKVersion\}/gi,c),f=this.commonHeaders["X-BAMSDK-Platform"].replace(/\{SDKPlatform\}/gi,u),p=this.commonHeaders["X-Application-Version"].replace(/\{applicationVersion\}/gi,s);this.commonHeaders["X-BAMSDK-Version"]=l,this.commonHeaders["X-BAMSDK-Platform"]=f,this.commonHeaders["X-Application-Version"]=p,this.services=new eo({services:a,commonHeaders:n,commonValues:i,logger:r})}},{key:"toString",value:function(){return"SDK.Services.Configuration.SdkSessionConfiguration"}}])&&ro(t.prototype,r),o&&ro(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ao=qe.services.configuration.configurationClient,co=function(){function e(t,r,o){oo(this,e);var i={configurationClientConfiguration:n.Types.instanceStrict(lr),logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt)};(0,n.typecheck)(this,i,arguments),this.config=t,this.logger=r,this.httpClient=o,this.dustEnabled=!0,this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,r=[{key:"getConfiguration",value:function(e,t,r){var o={bootstrapConfiguration:n.Types.instanceStrict(Ct),environmentConfiguration:n.Types.instanceStrict(Dt.EnvironmentConfiguration),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"getConfiguration",o,arguments);var i=this.dustEnabled,a=this.httpClient,c=this.logger,s=this.getPayload({bootstrapConfiguration:e,environmentConfiguration:t}),u="getConfiguration",l=new tt({dustEnabled:i,logger:c,source:this.toString(),urn:ao.getConfiguration,payload:s,method:Xt.GET,endpointKey:u,logTransaction:r});return c.info(this.toString(),"GET ".concat(s.url)),a.get(s).then((function(e){return Ve.checkResponseCode(e,l)})).then((function(e){var r=e.data,n=r.commonHeaders,o=r.services,i=r.application,a=new no({commonHeaders:n,services:o,environmentConfiguration:t,logger:c,application:i});return Promise.resolve(a)})).finally((function(){l.log()}))}},{key:"getPayload",value:function(e){var t=e.bootstrapConfiguration,r=e.environmentConfiguration,n=r.sdkVersion,o=r.deviceFamily,i=r.deviceProfile,a=r.applicationRuntime,c=r.configVersion,s=t.debugEnabled,u=t.environment,l=t.clientId,f=t.configHostName,p=t.configHostOverride,h=t.configHostUrlOverride,d=this.config,y=d.endpoints,g=d.extras,v=y.bootstrap,b=v.headers,m=v.href,w=s&&h||m;if(v.templated){var S=p||Ve.getSafe((function(){return g.configHostParams[f].baseUrl}));w=w.replace(/\{baseUrl\}/gi,S).replace(/\{configVersion\}/gi,c).replace(/\{clientId\}/gi,l).replace(/\{deviceFamily\}/gi,o).replace(/\{sdkVersion\}/gi,n).replace(/\{applicationRuntime\}/gi,a).replace(/\{deviceProfile\}/gi,i).replace(/\{environment\}/gi,u)}return{url:w,headers:b}}},{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClient"}}],r&&io(t.prototype,r),o&&io(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const so=kt()({configuration:null});function uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const fo={BootstrapConfiguration:Ct,ConfigurationClient:co,ConfigurationClientConfiguration:lr,ConfigurationClientEndpoint:so,ConfigurationClientExtrasMap:Qt,ConfigurationClientHostParams:function(){function e(t){uo(this,e);var r={baseUrl:n.Types.nonEmptyString};(0,n.typecheck)(this,r,arguments),this.baseUrl=t}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.ConfigurationClientHostParams"}}])&&lo(t.prototype,r),o&&lo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ConfigurationHostName:xt,EventsAtEdgeDustConfiguration:Er,OrchestrationManagerConfiguration:Rr,Platform:Ot,PlatformProfileReference:{chromecast:{deviceProfile:"google",applicationRuntime:"chromecast",deviceRuntimeProfile:"chromecast",platform:"chromecast"},netcast:{deviceProfile:"lg",applicationRuntime:"netcast",deviceRuntimeProfile:"netcast",platform:"netcast"},panasonictv:{deviceProfile:"panasonic",applicationRuntime:"panasonictv",deviceRuntimeProfile:"panasonictv",platform:"panasonictv"},sonybravia:{deviceProfile:"sony",applicationRuntime:"sonybravia",deviceRuntimeProfile:"sonybravia",platform:"sonybravia"},trilithium:{deviceProfile:"sony",applicationRuntime:"trilithium"},tivo:{deviceProfile:"tivo",applicationRuntime:"tivo",deviceRuntimeProfile:"tivo",platform:"tivo"},tizen:{deviceProfile:"samsung",applicationRuntime:"tizen",deviceRuntimeProfile:"tizen",platform:"tizen"},vizio:{deviceProfile:"vizio",applicationRuntime:"vizio",deviceRuntimeProfile:"vizio",platform:"vizio"},webos:{deviceProfile:"lg",applicationRuntime:"webos",deviceRuntimeProfile:"webos",platform:"webos"},canalPlus:{deviceProfile:"canalPlus",applicationRuntime:"canalPlus",deviceRuntimeProfile:"canalPlus",platform:"canalPlus"},skyq:{deviceProfile:"sky",applicationRuntime:"skyq",deviceRuntimeProfile:"skyq",platform:"skyq"},cableVision:{deviceProfile:"cableVision",applicationRuntime:"cableVision",deviceRuntimeProfile:"cableVision",platform:"cableVision"},comcastx1:{deviceProfile:"comcast",applicationRuntime:"comcastx1",deviceRuntimeProfile:"comcastx1",platform:"comcastx1"},telecentro:{deviceProfile:"telecentro",applicationRuntime:"telecentro",deviceRuntimeProfile:"telecentro",platform:"telecentro"},toshibaRegza:{deviceProfile:"toshiba",applicationRuntime:"toshibaRegza",deviceRuntimeProfile:"toshibaRegza",platform:"toshibaRegza"},hisense:{deviceProfile:"hisense",applicationRuntime:"hisense",deviceRuntimeProfile:"hisense",platform:"hisense"},rogersx1:{deviceProfile:"rogers",applicationRuntime:"rogersx1",deviceRuntimeProfile:"rogersx1",platform:"rogersx1"},coxx1:{deviceProfile:"cox",applicationRuntime:"coxx1",deviceRuntimeProfile:"coxx1",platform:"coxx1"},xglobal:{deviceProfile:"xglobal",applicationRuntime:"xglobal",deviceRuntimeProfile:"xglobal",platform:"xglobal"}},SdkSessionConfiguration:no,ServiceConfiguration:gr,ServiceEnvironmentName:Et,ServiceDefinitionsConfiguration:eo,SubscriptionManagerConfiguration:an,TelemetryManagerConfiguration:kn,TelemetryManagerExtrasMap:On,TokenManagerConfiguration:zn,TokenManagerExtrasMap:Yn,RetryPolicy:Kn,HttpMethod:Xt};function po(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ho(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yo=function(){function e(t){po(this,e);var r={options:n.Types.object({query:n.Types.string,variables:n.Types.object().optional})};(0,n.typecheck)(this,r,arguments);var o=t.query,i=t.variables;this.query=o,this.variables=i||{}}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.GraphQl.GraphQlRequest"}}])&&ho(t.prototype,r),o&&ho(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bo=function(){function e(t,r,o,i){go(this,e);var a={grantType:n.Types.nonEmptyString,tokenData:n.Types.nonEmptyObject,latitude:n.Types.number,longitude:n.Types.number};(0,n.typecheck)(this,a,arguments),this.grantType=t,this.tokenData=r,this.latitude=o,this.longitude=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Token.TokenRequest"}}])&&vo(t.prototype,r),o&&vo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.grantType="",this.tokenData=Object.create(null)}var t,r,o;return t=e,r=[{key:"build",value:function(e,t){var r={latitude:n.Types.number,longitude:n.Types.number};(0,n.typecheck)(this,"build",r,arguments);var o=this.grantType,i=this.tokenData;return Promise.resolve(new bo(o,i,e,t))}},{key:"toString",value:function(){return"SDK.Services.Token.TokenRequestBuilder"}}],r&&mo(t.prototype,r),o&&mo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eo(e,t){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Eo(e,t)}function Oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=jo(e);if(t){var o=jo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return To(this,r)}}function To(e,t){if(t&&("object"===So(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Po(e)}function Po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jo(e){return jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jo(e)}var _o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eo(e,t)}(a,e);var t,r,o,i=Oo(a);function a(e){var t;ko(this,a),t=i.call(this);var r={refreshToken:n.Types.nonEmptyString.optional};return(0,n.typecheck)(Po(t),r,arguments),t.grantType="refresh_token",t.tokenData.refresh_token=e||"",t}return t=a,(r=[{key:"refreshToken",get:function(){return this.tokenData.refresh_token}},{key:"toString",value:function(){return"SDK.Services.Token.RefreshGrant"}}])&&xo(t.prototype,r),o&&xo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(wo);function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function Co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ro(e,t){return Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ro(e,t)}function Do(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Lo(e);if(t){var o=Lo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Io(this,r)}}function Io(e,t){if(t&&("object"===Ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ro(e,t)}(i,e);var t,r,n,o=Do(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=e.token,n=e.tokenType,a=e.accessTokenType,c=e.expiresIn,s=e.issuedAt,u=e.refreshAt,l=e.region,f=e.refreshToken||e.tokenData&&e.tokenData.refresh_token;return(t=o.call(this,f)).token=r,t.tokenType=n,t.expiresIn=c||600,t.issuedAt=s||Date.now(),t.expiresAt=new Date(t.issuedAt+1e3*t.expiresIn).getTime(),t.refreshAt=u||null,t.region=l,t.accessTokenType=a,t}return t=i,(r=[{key:"expired",value:function(){return this.expiresAt<Date.now()}},{key:"toString",value:function(){return"SDK.Services.Token.AccessContext"}}])&&Co(t.prototype,r),n&&Co(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(_o);function No(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Bo=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;No(this,e);var o={token:n.Types.nonEmptyString,region:n.Types.nonEmptyString.optional};(0,n.typecheck)(this,o,arguments),this.token=t,this.region=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Token.AccessToken"}}])&&Fo(t.prototype,r),o&&Fo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vo(e,t){return Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vo(e,t)}function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ho(e);if(t){var o=Ho(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ko(this,r)}}function Ko(e,t){if(t&&("object"===Uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wo(e)}function Wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ho(e)}var Yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vo(e,t)}(a,e);var t,r,o,i=qo(a);function a(e,t){var r;Go(this,a),r=i.call(this);var o={subject:n.Types.nonEmptyString,subjectType:n.Types.nonEmptyString};return(0,n.typecheck)(Wo(r),o,arguments),r.subject=e,r.subjectType=t,r.grantType="urn:ietf:params:oauth:grant-type:token-exchange",r.actorType="urn:ietf:params:oauth:token-type:refresh_token",r.tokenData.subject_token_type=r.subjectType,r.tokenData.subject_token=r.subject,r.tokenData.actor_token_type=r.actorType,r.tokenData.actor_token="",r}return t=a,(r=[{key:"actor",get:function(){return this.tokenData.actor_token},set:function(e){this.tokenData.actor_token=e}},{key:"toString",value:function(){return"SDK.Services.Token.DelegationToken"}}])&&zo(t.prototype,r),o&&zo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(wo);function Xo(e){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(e)}function Jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $o(e,t){return $o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$o(e,t)}function Qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ei(e);if(t){var o=ei(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Zo(this,r)}}function Zo(e,t){if(t&&("object"===Xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ei(e){return ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ei(e)}var ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$o(e,t)}(i,e);var t,r,n,o=Qo(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=e;return(t=o.call(this,r,"urn:ietf:params:oauth:token-type:access_token")).accessToken=e,t}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Token.AccessTokenDelegation"}}])&&Jo(t.prototype,r),n&&Jo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yo);const ri={device:"Device",account:"Account",accountWithoutActiveProfile:"AccountWithoutActiveProfile"};function ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ii=function(){function e(t,r){ni(this,e);var o={grantType:n.Types.nonEmptyString.optional,assertion:n.Types.nonEmptyString};(0,n.typecheck)(this,o,arguments),this.grantType=t,this.assertion=r,this.subjectTokenTypeKey=""}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Token.Grant"}}])&&oi(t.prototype,r),o&&oi(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ai(e){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(e)}function ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function si(e,t){return si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},si(e,t)}function ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fi(e);if(t){var o=fi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return li(this,r)}}function li(e,t){if(t&&("object"===ai(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fi(e){return fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fi(e)}var pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&si(e,t)}(i,e);var t,r,n,o=ui(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).subjectTokenTypeKey="device",r}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Token.DeviceGrant"}}])&&ci(t.prototype,r),n&&ci(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ii);function hi(e){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hi(e)}function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yi(e,t){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yi(e,t)}function gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=bi(e);if(t){var o=bi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return vi(this,r)}}function vi(e,t){if(t&&("object"===hi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bi(e){return bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bi(e)}var mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yi(e,t)}(i,e);var t,r,n,o=gi(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=e;return(t=o.call(this,r,"urn:ietf:params:oauth:token-type:refresh_token")).refreshToken=e,t}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Token.RefreshTokenDelegation"}}])&&di(t.prototype,r),n&&di(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yo);function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Si(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ki(e,t){return ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ki(e,t)}function xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Oi(e);if(t){var o=Oi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ei(this,r)}}function Ei(e,t){if(t&&("object"===wi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}var Ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ki(e,t)}(i,e);var t,r,n,o=xi(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).subjectTokenTypeKey="temporary",r.errors=[],r}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Token.TemporaryGrant"}}])&&Si(t.prototype,r),n&&Si(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ii);function Pi(e){return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(e)}function ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ai(e,t)}function Ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ii(e);if(t){var o=Ii(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ri(this,r)}}function Ri(e,t){if(t&&("object"===Pi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Di(e)}function Di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(e)}var Li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}(a,e);var t,r,o,i=Ci(a);function a(e,t){var r;ji(this,a),r=i.call(this);var o={grant:n.Types.instanceStrict(ii),subjectType:n.Types.nonEmptyString};return(0,n.typecheck)(Di(r),o,arguments),r.grant=e,r.subjectType=t,r.grantType="urn:ietf:params:oauth:grant-type:token-exchange",r.tokenData.subject_token_type=r.subjectType,r.tokenData.subject_token=r.grant.assertion,r}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Token.ExchangeGrant"}}])&&_i(t.prototype,r),o&&_i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(wo),Mi=r(3473);const Ni=kt()({exchange:null});function Fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(r),!0).forEach((function(t){Ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Vi=fo.HttpMethod,qi=qe.services.token.tokenClient,Ki=function(){function e(t){Gi(this,e);var r={options:n.Types.object({tokenClientConfiguration:n.Types.instanceStrict(Rn),platformId:n.Types.nonEmptyString.optional,logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt)})};(0,n.typecheck)(this,r,arguments);var o=t.tokenClientConfiguration,i=t.platformId,a=t.logger,c=t.httpClient;this.config=o,this.logger=a,this.httpClient=c,this.platformData={platform:i||this.config.extras.platformId},this.dustEnabled=!0,this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,r=[{key:"exchange",value:function(e,t,r){var o={tokenRequest:n.Types.instanceStrict(bo),apiKey:n.Types.nonEmptyString,logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"exchange",o,arguments);var i=this.dustEnabled,a=this.httpClient,c=this.logger,s=this.platformData,u=e.grantType,l=e.tokenData,f=e.latitude,p=e.longitude,h=Ni.exchange,d=this.getPayload({apiKey:t,endpointKey:h,body:Bi(Bi(Bi({},{grant_type:u,latitude:f,longitude:p}),l),s)});c.info(this.toString(),'Exchange token request:\n            originating grantType: "'.concat(l.subject_token_type,'",\n            latitude: "').concat(f,'",\n            longitude: "').concat(p,'",\n            platform: "').concat(s.platform,'"\n        ').replace(/(\s(?=\s))/g,""));var y=new tt({dustEnabled:i,logger:c,source:this.toString(),urn:qi.exchange,payload:d,method:Vi.POST,endpointKey:h,logTransaction:r});return a.post(d).then((function(e){return Ve.checkResponseCode(e,y)})).then((function(e){var t=e.data,r=e.headers,n=t.access_token,o=t.token_type,i=t.refresh_token,a=t.expires_in;return new Mo({token:n,tokenType:o,refreshToken:i,expiresIn:a,region:r.get("x-bamtech-region")})})).finally((function(){y.log()}))}},{key:"getPayload",value:function(e){var t=e.apiKey,r=e.endpointKey,n=e.body,o=this.config.endpoints[r],i=o.href,a=o.headers,c=n?Mi.stringify(n):"",s=Bi({},a);return s.Authorization=s.Authorization.replace(/\{apiKey\}/gi,t),{url:i,body:c,headers:s}}},{key:"toString",value:function(){return"SDK.Services.Token.TokenClient"}}],r&&zi(t.prototype,r),o&&zi(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Wi={AccessContext:Mo,AccessToken:Bo,AccessTokenDelegation:ti,AccessTokenType:ri,DeviceGrant:pi,DelegationToken:Yo,Grant:ii,RefreshTokenDelegation:mi,RefreshGrant:_o,TemporaryGrant:Ti,ExchangeGrant:Li,TokenClient:Ki,TokenClientConfiguration:Rn,TokenClientEndpoint:Ni,TokenClientExtrasMap:In,TokenRequest:bo,TokenRequestBuilder:wo};function Hi(e){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hi(e)}function Yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(r),!0).forEach((function(t){Ji(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $i(){$i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Hi(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Qi(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Zi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Qi(i,n,o,a,c,"next",e)}function c(e){Qi(i,n,o,a,c,"throw",e)}a(void 0)}))}}function ea(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ta=Wi.AccessToken,ra=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o,i,a;return t=e,r=[{key:"toString",value:function(){return"SDK.Services.GraphQl.GraphQlClient"}}],o=[{key:"query",value:(a=Zi($i().mark((function t(r){var o,i,a,c,s,u,l,f,p=arguments;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={options:n.Types.object({endpoint:n.Types.instanceStrict($n),request:n.Types.instanceStrict(yo),logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt),extraHeaders:n.Types.object().optional,accessToken:n.Types.instanceStrict(ta)})},(0,n.typecheck)(e,"query",o,p),i=r.endpoint,a=r.request,c=r.accessToken,s=r.logger,u=r.httpClient,l=r.extraHeaders,f=e.getPayload({accessToken:c,endpoint:i,extraHeaders:l,body:{query:a.query,operationName:a.operationName,variables:a.variables},logger:s}),s.info(e.prototype.toString(),"Attempting to execute GraphQl query with variables: ".concat(JSON.stringify(a.variables,Ge()))),t.next=7,u.post(f);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)})},{key:"registerDevice",value:(i=Zi($i().mark((function t(r){var o,i,a,c,s,u,l,f,p=arguments;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={options:n.Types.object({endpoint:n.Types.instanceStrict($n),request:n.Types.instanceStrict(yo),logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt),extraHeaders:n.Types.object().optional,apiKey:n.Types.nonEmptyString})},(0,n.typecheck)(e,"registerDevice",o,p),i=r.endpoint,a=r.request,c=r.apiKey,s=r.logger,u=r.httpClient,l=r.extraHeaders,f=e.getPayload({apiKey:c,endpoint:i,extraHeaders:l,body:{query:a.query,operationName:a.operationName,variables:a.variables},logger:s}),s.info(e.prototype.toString(),"Attempting to register a device with variables: ".concat(JSON.stringify(a.variables,Ge()))),t.next=7,u.post(f);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"getPayload",value:function(t){var r={options:n.Types.object({accessToken:n.Types.instanceStrict(ta).optional,apiKey:n.Types.nonEmptyString.optional})};n.typecheck.atLeastOne(e,"getPayload",r,arguments);var o=t.accessToken,i=t.apiKey,a=t.endpoint,c=t.body,s=t.extraHeaders,u=void 0===s?{}:s,l=t.logger,f=a.href,p=a.headers,h=f,d=JSON.stringify(c),y=Xi(Xi({},p),u);return o?(y.Authorization=p.Authorization.replace(/\{accessToken\}/i,o.token),l.info(e.prototype.toString(),"Creating Authorization header with accessToken")):i&&(y.Authorization=p.Authorization.replace(/\{apiKey\}/i,i),l.info(e.prototype.toString(),"Creating Authorization header with apiKey")),{url:h,body:d,headers:y}}}],r&&ea(t.prototype,r),o&&ea(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const na={GraphQlClient:ra,GraphQlRequest:yo},oa=kt()({Register:null,Login:null}),ia=kt()({query:null,registerDevice:null,exchangeDeviceGrantForAccessToken:null,refreshToken:null});var aa=r(7265),ca=r.n(aa);function sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ua(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ua(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const la={ANONYMOUS_IP:"AnonymousIp",COUNTRY_CODE:"CountryCode",LOW_CONFIDENCE:"LowConfidence",PROXIED_IP:"ProxiedIp",UNAVAILABLE:"Unavailable",UNKNOWN:"Unknown",ZIP_CODE:"ZipCode",AnonymousIp:"AnonymousIp",CountryCode:"CountryCode",LowConfidence:"LowConfidence",ProxiedIp:"ProxiedIp",Unavailable:"Unavailable",Unknown:"Unknown",ZipCode:"ZipCode"};var fa={countryCode:n.Types.nonEmptyString},pa={liveAndUnratedContent:n.Types.object({enabled:n.Types.boolean})},ha={countryCode:n.Types.nonEmptyString,type:n.Types.keyIn(la)},da={impliedMaturityRating:n.Types.number,ratingSystem:n.Types.nonEmptyString},ya={id:n.Types.nonEmptyString},ga={id:n.Types.nonEmptyString,platform:n.Types.nonEmptyString},va={name:n.Types.nonEmptyString},ba=(n.Types.nonEmptyString,n.Types.number,n.Types.nonEmptyString,{id:n.Types.nonEmptyString}),ma={type:n.Types.nonEmptyString,zipCode:n.Types.string.optional,countryCode:n.Types.string.optional,dma:n.Types.number.optional,asn:n.Types.number.optional,regionName:n.Types.string.optional,connectionType:n.Types.string.optional,designatedMarketArea:n.Types.number.optional},wa={id:n.Types.nonEmptyString,parentalControls:n.Types.object(pa).optional};function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ka(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ka(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(r),!0).forEach((function(t){Oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ja=function(){function e(t){Ta(this,e);var r={options:n.Types.object({id:n.Types.nonEmptyString,account:n.Types.object(ya).optional,device:n.Types.object(ga),location:n.Types.object(ma),profile:n.Types.object(wa).optional,entitlements:n.Types.array.of.object(va),inSupportedLocation:n.Types.boolean,isSubscriber:n.Types.boolean,experiments:n.Types.object(),portabilityLocation:n.Types.object(ha).optional,preferredMaturityRating:n.Types.object(da).optional,homeLocation:n.Types.object(fa).optional,partnerName:n.Types.nonEmptyString,identity:n.Types.object(ba).optional})};(0,n.typecheck)(this,r,arguments);var o=t.id,i=t.account,a=t.device,c=t.location,s=t.profile,u=t.entitlements,l=t.inSupportedLocation,f=t.partnerName,p=t.isSubscriber,h=t.experiments,d=t.portabilityLocation,y=t.preferredMaturityRating,g=t.homeLocation,v=t.identity;this.id=o,this.account=i,this.device=a,this.location=c,this.profile=s,this.entitlements=u,this.inSupportedLocation=l,this.isSubscriber=p,this.experiments=h,this.portabilityLocation=d,this.preferredMaturityRating=y,this.homeLocation=g,this.partnerName=f,this.identity=v}var t,r,o;return t=e,o=[{key:"create",value:function(t){var r,o,i,a=t.account,c=t.entitlements,s=t.experiments,u=void 0===s?{}:s,l=t.device,f=t.inSupportedLocation,p=t.isSubscriber,h=t.location,d=t.preferredMaturityRating,y=t.profile,g=t.identity,v=t.session_id||t.sessionId||t.id,b=t.partnerName||t.partner&&t.partner.name;if(h){var m=function(e,t,r){if(t in e)return e[t];var n=Object.keys(e).find((function(r){return e[r]===t}));return n?e[n]:r}(la,h.type,la.UNKNOWN),w=h.dma||h.designatedMarketArea,S=h.zip_code||h.zipCode,k=h.country_code||h.countryCode;r=Ea(Ea({},h),{},{type:m,zipCode:S,countryCode:k,designatedMarketArea:w})}y&&(o=y);var x=t.portability_location||t.portabilityLocation;if(n.Check.assigned(x)){var E=la[function(e,t){if(t in e)return t;var r=Object.entries(e).find((function(e){return sa(e,2)[1]===t}));return r?r[0]:void 0}(la,x.type)];E&&(i={countryCode:x.country_code||x.countryCode,type:E})}var O=[];c&&c.forEach((function(e){var t=n.Check.string(e)?e:e.name;O.push({name:t})}));var T,P=Object.create(null);if(Array.isArray(u))u.forEach((function(e){var t=e.featureId;P[t]=e}));else for(var j=0,_=Object.entries(u);j<_.length;j++){var A=Sa(_[j],2),C=A[0],R=A[1],D={variantId:R.variantId||R.variant_id,version:R.version,featureId:C};P[C]=D}var I=t.home_location||t.homeLocation;return n.Check.assigned(I)&&(T={countryCode:I.country_code||I.countryCode}),new e({id:v,account:a,device:l,location:r,profile:o,entitlements:O,inSupportedLocation:f,isSubscriber:p,experiments:P,portabilityLocation:i,preferredMaturityRating:d,homeLocation:T,partnerName:b,identity:g})}}],(r=[{key:"sessionId",get:function(){return this.id}},{key:"toString",value:function(){return"SDK.Services.Session.SessionInfo"}}])&&Pa(t.prototype,r),o&&Pa(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ca=function(){function e(t,r){_a(this,e);var o={oldSessionInfo:n.Types.instanceStrict(ja).optional,newSessionInfo:n.Types.instanceStrict(ja).optional};(0,n.typecheck)(this,o,arguments),this.oldSessionInfo=t,this.newSessionInfo=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.SessionInfoChangedEvent"}}])&&Aa(t.prototype,r),o&&Aa(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Da(){Da=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ra(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ia(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function La(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ia(i,n,o,a,c,"next",e)}function c(e){Ia(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Ma(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fa(e,t){return Fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fa(e,t)}function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=za(e);if(t){var o=za(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ua(this,r)}}function Ua(e,t){if(t&&("object"===Ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ga(e)}function Ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(e){return za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},za(e)}var Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fa(e,t)}(u,e);var t,r,o,i,a,c,s=Ba(u);function u(e){var t;Ma(this,u);var r={options:n.Types.object({clientId:n.Types.nonEmptyString,environment:n.Types.nonEmptyString,logger:n.Types.instanceStrict(wt.Logger),storage:n.Types.instanceStrict(Dt.Storage)})};t=s.call(this),(0,n.typecheck)(Ga(t),r,arguments);var o=e.clientId,i=e.environment,a=e.logger,c=e.storage;return t.clientId=o,t.environment=i,t.logger=a,t.storage=c,t.cacheKey="\n            __bam_sdk_session_info--".concat(t.clientId,"_").concat(t.environment,"\n        ").replace(/(?:\n\s+)/g,""),t.logger.log(t.toString(),"Created."),t}return t=u,r=[{key:"saveSessionInfo",value:(c=La(Da().mark((function e(t){var r,o,i,a,c,s,u=arguments;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={sessionInfo:n.Types.instanceStrict(ja)},(0,n.typecheck)(this,"saveSessionInfo",r,u),o=this.cacheKey,i=this.logger,a=this.storage,i.info(this.toString(),'Save SessionInfo to Storage using key: "'.concat(o,'".')),e.next=6,this.getSessionInfo();case 6:return c=e.sent,this.hasSessionInfoChanged(c,t)&&(s=new Ca(c,t),this.emit(Nt.SessionInfoChanged,s)),e.next=10,a.set(o,t);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getSessionInfo",value:(a=La(Da().mark((function e(){var t,r,n,o;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.logger,r=this.storage,n=this.cacheKey,t.log(this.toString(),"Get cached SessionInfo."),e.prev=2,e.next=5,r.get(n);case 5:if(!(o=e.sent)){e.next=8;break}return e.abrupt("return",u.normalizeSessionInfoFromCache(o));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.error(this.toString(),e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return a.apply(this,arguments)})},{key:"clear",value:(i=La(Da().mark((function e(){var t,r,n;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cacheKey,r=this.logger,n=this.storage,r.warn(u.name,'Clearing cached SDK.Services.Session.SessionInfo for key: "'.concat(t,'".')),e.next=4,n.remove(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"hasSessionInfoChanged",value:function(e,t){if(n.Check.not.assigned(e))return!0;try{return e.id!==t.id}catch(e){return this.logger.warn(this.toString(),e),!0}}},{key:"toString",value:function(){return"SDK.Session.SessionInfoStorage"}}],o=[{key:"normalizeSessionInfoFromCache",value:function(e){return ja.create(e)}}],r&&Na(t.prototype,r),o&&Na(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(ca());const qa=kt()({ReauthorizationFailure:null,OffDeviceTokenRefresh:null,AccessChanged:null,SessionInfoChanged:null,MediaFailure:null,AgeVerificationChanged:null,FeatureFlagsChanged:null});function Ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ha=function(){function e(t,r){Ka(this,e);var o={oldFeatureFlags:n.Types.object().optional,newFeatureFlags:n.Types.object()};(0,n.typecheck)(this,o,arguments),this.oldFeatureFlags=t,this.newFeatureFlags=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.FeatureFlagsChangedEvent"}}])&&Wa(t.prototype,r),o&&Wa(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ya(e){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(e)}function Xa(){Xa=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ya(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ja(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function $a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ja(i,n,o,a,c,"next",e)}function c(e){Ja(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ec(e,t){return ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ec(e,t)}function tc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oc(e);if(t){var o=oc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return rc(this,r)}}function rc(e,t){if(t&&("object"===Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nc(e)}function nc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oc(e){return oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oc(e)}var ic=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ec(e,t)}(s,e);var t,r,o,i,a,c=tc(s);function s(e){var t;Qa(this,s),t=c.call(this);var r={options:n.Types.object({clientId:n.Types.nonEmptyString,environment:n.Types.nonEmptyString,logger:n.Types.instanceStrict(wt.Logger),storage:n.Types.instanceStrict(Dt.Storage)})};(0,n.typecheck)(nc(t),r,arguments);var o=e.clientId,i=e.environment,a=e.logger,u=e.storage;return t.clientId=o,t.environment=i,t.logger=a,t.storage=u,t.cacheKey="\n            __bam_sdk_feature_flags--".concat(t.clientId,"_").concat(t.environment,"\n        ").replace(/(?:\n\s+)/g,""),t.logger.log(t.toString(),"Created."),t}return t=s,r=[{key:"saveFeatureFlags",value:(a=$a(Xa().mark((function e(t){var r,o,i,a=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={featureFlags:n.Types.object()},(0,n.typecheck)(this,"saveFeatureFlags",r,a),this.logger.info(this.toString(),'Save feature flags to Storage using key: "'.concat(this.cacheKey,'".')),e.next=5,this.getFeatureFlags();case 5:return o=e.sent,i=new Ha(o,t),this.emit(qa.FeatureFlagsChanged,i),e.next=10,this.storage.set(this.cacheKey,t);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFeatureFlags",value:(i=$a(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.log(this.toString(),"Get cached feature flags."),e.prev=1,e.next=4,this.storage.get(this.cacheKey);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.logger.error(this.toString(),e.t0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Session.FeatureFlagsStorage"}}],r&&Za(t.prototype,r),o&&Za(t,o),Object.defineProperty(t,"prototype",{writable:!1}),s}(ca());function ac(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sc=function(){function e(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ac(this,e);var c={clientId:n.Types.nonEmptyString,environment:n.Types.nonEmptyString,logger:n.Types.instanceStrict(wt.Logger),deviceGrant:n.Types.instanceStrict(pi).optional,storage:n.Types.instanceStrict(Dt.Storage).optional};(0,n.typecheck)(this,c,arguments),this.clientId=t,this.environment=r,this.logger=o,this.deviceGrant=i,this.storage=a||new Dt.Storage(this.logger),this.cacheKey="\n            __bam_sdk_device_grant--".concat(this.clientId,"_").concat(this.environment,"\n        ").replace(/(?:\n\s+)/g,""),this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,r=[{key:"saveDeviceGrant",value:function(e){var t={deviceGrant:n.Types.instanceStrict(pi)};(0,n.typecheck)(this,"saveDeviceGrant",t,arguments);var r=this.cacheKey,o=this.logger,i=this.storage;return o.info(this.toString(),'Save device grant to Storage using key: "'.concat(r,'".')),this.deviceGrant=e,i.set(r,this.deviceGrant)}},{key:"getDeviceGrant",value:function(){return this.logger.log(this.toString(),"Get cached device grant."),this.deviceGrant}},{key:"clear",value:function(){var e=this.cacheKey,t=this.logger,r=this.storage;return t.warn(this.toString(),'Clearing cached device grant for key: "'.concat(e,'".')),this.deviceGrant=null,r.remove(e)}},{key:"getDeviceGrantFromStorage",value:function(){var e=this,t=this.cacheKey,r=this.logger,o=this.storage;return r.info(this.toString(),'Get device grant from Storage using cache key: "'.concat(t,'".')),o.get(t).catch((function(){return Promise.resolve(e.deviceGrant)})).then((function(t){var r=Ve.getSafe((function(){return t.grantType})),o=Ve.getSafe((function(){return t.assertion}));return n.Check.assigned(r)&&(e.deviceGrant=new pi(r,o)),Promise.resolve(e.deviceGrant)}))}},{key:"toString",value:function(){return"SDK.Token.DeviceGrantStorage"}}],r&&cc(t.prototype,r),o&&cc(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];uc(this,e),this.modes=t}var t,r,n;return t=e,(r=[{key:"hasMode",value:function(e){return this.modes.includes(e)}},{key:"toString",value:function(){return"SDK.Token.AccessContextState"}}])&&lc(t.prototype,r),n&&lc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dc=function(){function e(t,r){pc(this,e);var o={context:n.Types.instanceStrict(Mo),contextState:n.Types.instanceStrict(fc)};(0,n.typecheck)(this,o,arguments),this.context=t,this.contextState=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Token.Access"}}])&&hc(t.prototype,r),o&&hc(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vc=function(){function e(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;yc(this,e);var c={clientId:n.Types.nonEmptyString,environment:n.Types.nonEmptyString,logger:n.Types.instanceStrict(wt.Logger),access:n.Types.instanceStrict(dc).optional,storage:n.Types.instanceStrict(Dt.Storage).optional};(0,n.typecheck)(this,c,arguments),this.clientId=t,this.environment=r,this.logger=o,this.access=i,this.storage=a||new Dt.Storage(this.logger),this.cacheKey="\n            __bam_sdk_access--".concat(this.clientId,"_").concat(this.environment,"\n        ").replace(/(?:\n\s+)/g,""),this.cacheKeyLegacy="\n            __bam_sdk_authorization_context--".concat(this.clientId,"_").concat(this.environment,"\n        ").replace(/(?:\n\s+)/g,""),this.isLegacyToken=!1,this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,r=[{key:"saveAccess",value:function(e){var t={access:n.Types.instanceStrict(dc)};(0,n.typecheck)(this,"saveAccess",t,arguments);var r=this.cacheKey,o=this.logger,i=this.storage;return o.info(this.toString(),'Save Access to Storage using key: "'.concat(r,'".')),this.access=e,i.set(r,this.access)}},{key:"getAccess",value:function(){return this.logger.log(this.toString(),"Get cached Access."),this.access}},{key:"clear",value:function(){var e=this.cacheKey,t=this.logger,r=this.storage;return t.warn(this.toString(),'Clearing cached SDK.Token.Access for key: "'.concat(e,'".')),this.access=null,r.remove(e)}},{key:"getAccessFromStorage",value:function(){var e=this,t=this.cacheKey,r=this.logger,o=this.storage;return r.info(this.toString(),'Get Access from Storage using cache key: "'.concat(t,'".')),o.get(t).catch((function(){return Promise.resolve(e.access)})).then((function(t){var r=Ve.getSafe((function(){return t.context})),o=Ve.getSafe((function(){return t.contextState.modes}));return n.Check.assigned(r)?(e.access=new dc(new Mo(r),new fc(o)),Promise.resolve(e.access)):e.getLegacyAccessFromStorage()}))}},{key:"getLegacyAccessFromStorage",value:function(){var e=this,t=this.cacheKeyLegacy,r=this.logger,o=this.storage;return r.info(this.toString(),'Get legacy Access from Storage using cache key: "'.concat(t,'".')),o.get(t).catch((function(){return Promise.resolve(e.access)})).then((function(r){var i=Ve.getSafe((function(){return r.accessToken})),a=Ve.getSafe((function(){return r.refreshToken}));return n.Check.assigned(a)&&(e.isLegacyToken=!0,e.access=new dc(new Mo({token:i,refreshToken:a,expiresIn:0}),new fc)),o.remove(t).then((function(){return Promise.resolve(e.access)}))}))}},{key:"toString",value:function(){return"SDK.Token.AccessStorage"}}],r&&gc(t.prototype,r),o&&gc(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bc(e){return bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(e)}function mc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sc(e,t){return Sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sc(e,t)}function kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ec(e);if(t){var o=Ec(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return xc(this,r)}}function xc(e,t){if(t&&("object"===bc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ec(e){return Ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ec(e)}var Oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sc(e,t)}(i,e);var t,r,n,o=kc(i);function i(){return mc(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Token.AccessToken"}}])&&wc(t.prototype,r),n&&wc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Bo);function Tc(e){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(e)}function Pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _c(e,t){return _c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_c(e,t)}function Ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Dc(e);if(t){var o=Dc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Cc(this,r)}}function Cc(e,t){if(t&&("object"===Tc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rc(e)}function Rc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dc(e){return Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dc(e)}var Ic=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_c(e,t)}(a,e);var t,r,o,i=Ac(a);function a(e){var t;Pc(this,a),t=i.call(this,e);var r={options:n.Types.object({operationName:n.Types.nonEmptyString})};n.typecheck.warn(Rc(t),r,arguments);var o=e.operationName;return t.operationName=o,t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.OrchestrationRequest"}}])&&jc(t.prototype,r),o&&jc(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(yo);function Lc(e){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(e)}function Mc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nc(e,t){return Nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nc(e,t)}function Fc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Uc(e);if(t){var o=Uc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bc(this,r)}}function Bc(e,t){if(t&&("object"===Lc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Uc(e){return Uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uc(e)}var Gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nc(e,t)}(i,e);var t,r,n,o=Fc(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=i.query,r={input:e};return o.call(this,{query:t,variables:r,operationName:"exchangeDeviceGrantForAccessToken"})}return t=i,n=[{key:"query",get:function(){return"mutation exchangeDeviceGrantForAccessToken($input: ExchangeDeviceGrantForAccessTokenInput!) {\n            exchangeDeviceGrantForAccessToken(exchangeDeviceGrantForAccessToken: $input) {\n                accepted\n            }\n        }"}}],(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.ExchangeDeviceGrantForAccessTokenRequest"}}])&&Mc(t.prototype,r),n&&Mc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ic);function zc(e){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(e)}function Vc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qc(e,t){return qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qc(e,t)}function Kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Hc(e);if(t){var o=Hc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Wc(this,r)}}function Wc(e,t){if(t&&("object"===zc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Hc(e){return Hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hc(e)}var Yc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qc(e,t)}(i,e);var t,r,n,o=Kc(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=i.query,r={input:e};return o.call(this,{query:t,variables:r,operationName:"refreshToken"})}return t=i,n=[{key:"query",get:function(){return"mutation refreshToken($input: RefreshTokenInput!) {\n            refreshToken(refreshToken: $input) {\n                activeSession {\n                    sessionId\n                }\n            }\n        }"}}],(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.RefreshTokenRequest"}}])&&Vc(t.prototype,r),n&&Vc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ic);function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function Jc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $c(e,t){return $c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$c(e,t)}function Qc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=es(e);if(t){var o=es(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Zc(this,r)}}function Zc(e,t){if(t&&("object"===Xc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},es(e)}var ts=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$c(e,t)}(i,e);var t,r,n,o=Qc(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=i.query,r={input:e};return o.call(this,{query:t,variables:r,operationName:"registerDevice"})}return t=i,n=[{key:"query",get:function(){return"mutation registerDevice($input: RegisterDeviceInput!) {\n            registerDevice(registerDevice: $input) {\n                grant {\n                    grantType\n                    assertion\n                }\n            }\n        }"}}],(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.RegisterDeviceRequest"}}])&&Jc(t.prototype,r),n&&Jc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ic);function rs(e){return rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rs(e)}function ns(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function os(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(r),!0).forEach((function(t){is(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ns(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function is(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function as(){as=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==rs(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function cs(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function ss(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){cs(i,n,o,a,c,"next",e)}function c(e){cs(i,n,o,a,c,"throw",e)}a(void 0)}))}}function us(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fs=fo.HttpMethod,ps=qe.services.orchestration.orchestrationClient,hs=function(){function e(t){us(this,e);var r={options:n.Types.object({orchestrationClientConfiguration:n.Types.instanceStrict(Ur),logger:n.Types.instanceStrict(wt.Logger),tokenUpdater:n.Types.instanceStrict(Mt),httpClient:n.Types.instanceStrict(Yt),deviceGrantStorage:n.Types.instanceStrict(sc),sessionInfoStorage:n.Types.instanceStrict(Va),featureFlagsStorage:n.Types.instanceStrict(ic),accessStorage:n.Types.instanceStrict(vc),apiKey:n.Types.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.orchestrationClientConfiguration,i=t.logger,a=t.tokenUpdater,c=t.httpClient,s=t.deviceGrantStorage,u=t.sessionInfoStorage,l=t.featureFlagsStorage,f=t.accessStorage,p=t.apiKey;this.config=o,this.logger=i,this.tokenUpdater=a,this.httpClient=c,this.deviceGrantStorage=s,this.sessionInfoStorage=u,this.featureFlagsStorage=l,this.accessStorage=f,this.apiKey=p,this.dustEnabled=!0,this.logger.log(this.toString(),"Created.")}var t,r,o,i,a,c,s,u,l;return t=e,r=[{key:"query",value:function(e){var t=this,r={options:n.Types.object({request:n.Types.instanceStrict(Ic),accessToken:n.Types.instanceStrict(Oc),logTransaction:n.Types.instanceStrict(H)})};(0,n.typecheck)(this,"query",r,arguments);var o=this.dustEnabled,i=this.logger,a=this.httpClient,c=this.config,s=c.endpoints,u=e.request,l=e.accessToken,f=e.logTransaction,p=u.operationName,h=p||"query",d=s[ia[p]||ia.query],y=ps.getOperationUrn(h),g=new tt({dustEnabled:o,logger:i,source:this.toString(),urn:y,payload:{url:d.href},method:fs.POST,endpointKey:h,logTransaction:f}),v={endpoint:d,request:u,accessToken:l,logger:i,httpClient:a};return i.info(this.toString(),"Send custom query"),ra.query(v).then((function(e){return Ie(e,g)})).then(function(){var e=ss(as().mark((function e(r){var n;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processExtensions(r,f);case 2:return n=r.data.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){g.log()}))}},{key:"registerDevice",value:function(e,t){var r=this,o={request:n.Types.instanceStrict(ts),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"registerDevice",o,arguments);var i=this.dustEnabled,a=this.logger,c=this.httpClient,s=this.config,u=this.apiKey,l=s.endpoints,f=ia.registerDevice,p=l[f],h=ps.registerDevice,d=new tt({dustEnabled:i,logger:a,source:this.toString(),urn:h,payload:{url:p.href},method:fs.POST,endpointKey:f,logTransaction:t}),y={endpoint:p,request:e,apiKey:u,logger:a,httpClient:c};return a.info(this.toString(),"Send custom query to register a device"),ra.registerDevice(y).then((function(e){return Ie(e,d)})).then(function(){var e=ss(as().mark((function e(n){var o;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.processExtensions(n,t);case 2:return o=e.sent,e.abrupt("return",os(os({},n),{},{extensions:o}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){d.log()}))}},{key:"exchangeDeviceGrantForAccessToken",value:function(e,t){var r=this,o={request:n.Types.instanceStrict(Gc),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"exchangeDeviceGrantForAccessToken",o,arguments);var i=this.dustEnabled,a=this.logger,c=this.httpClient,s=this.config,u=this.apiKey,l=s.endpoints,f=ia.exchangeDeviceGrantForAccessToken,p=l[f],h=ps.exchangeDeviceGrantForAccessToken,d=new tt({dustEnabled:i,logger:a,source:this.toString(),urn:h,payload:{url:p.href},method:fs.POST,endpointKey:f,logTransaction:t}),y={endpoint:p,request:e,apiKey:u,logger:a,httpClient:c};return a.info(this.toString(),"Send custom query to exchange device grant for access token"),ra.registerDevice(y).then((function(e){return Ie(e,d)})).then(function(){var e=ss(as().mark((function e(n){var o;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.processExtensions(n,t);case 2:return o=e.sent,e.abrupt("return",os(os({},n),{},{extensions:o}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){d.log()}))}},{key:"refreshToken",value:function(e){var t=this,r={options:n.Types.object({request:n.Types.instanceStrict(Yc),reason:n.Types.nonEmptyString.optional,logTransaction:n.Types.instanceStrict(H)})};(0,n.typecheck)(this,"refreshToken",r,arguments);var o=this.dustEnabled,i=this.logger,a=this.httpClient,c=this.config,s=this.apiKey,u=e.request,l=e.reason,f=e.logTransaction,p=c.endpoints,h=l?{reason:l}:void 0,d=ia.refreshToken,y=p[d],g=ps.refreshToken,v=new tt({dustEnabled:o,logger:i,source:this.toString(),urn:g,payload:{url:y.href},method:fs.POST,data:h,endpointKey:d,logTransaction:f}),b={endpoint:y,request:u,apiKey:s,logger:i,httpClient:a};return i.info(this.toString(),"Send custom query to refresh a token"),ra.registerDevice(b).then((function(e){return Ie(e,v)})).then(function(){var e=ss(as().mark((function e(r){var n;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processExtensions(r,f);case 2:return n=e.sent,e.abrupt("return",os(os({},r),{},{extensions:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){v.log()}))}},{key:"wrapTry",value:(l=ss(as().mark((function e(t){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),this.logger.error(this.toString(),e.t0),e.next=10;break;case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return l.apply(this,arguments)})},{key:"processExtensions",value:(u=ss(as().mark((function e(t,r){var n,o,i,a,c=this;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},o=t.headers,i=t.data,a=(i=void 0===i?{}:i).extensions,e.next=6,this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.processDeviceGrant(a,n);case 2:n.deviceGrant=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 6:return e.next=8,this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.processToken(a,o,r);case 2:case"end":return e.stop()}}),e)}))));case 8:return e.next=10,this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.processSessionInfo(a,n);case 2:n.sessionInfo=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 10:return e.next=12,this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.processFeatureFlags(a,n);case 2:n.featureFlags=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"processDeviceGrant",value:(s=ss(as().mark((function e(t){var r,n,o,i,a=this;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Le((function(){return t.sdk.grant.device})))){e.next=6;break}return o=r.grantType,i=r.assertion,n=new pi(o,i),e.next=6,this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.deviceGrantStorage.saveDeviceGrant(n);case 2:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"processToken",value:(c=ss(as().mark((function e(t,r,n){var o,i,a;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Le((function(){return t.sdk.token})))){e.next=7;break}return i=r.get("x-bamtech-region"),a=os(os({},o),{},{region:i}),e.next=7,this.tokenUpdater.updateAccessToken(a,!1,n);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"processSessionInfo",value:(a=ss(as().mark((function e(t){var r,n,o=this;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Le((function(){return t.sdk.session})))&&(n=Va.normalizeSessionInfoFromCache(r),this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.sessionInfoStorage.saveSessionInfo(n);case 2:case"end":return e.stop()}}),e)}))))),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"processFeatureFlags",value:(i=ss(as().mark((function e(t){var r,n,o=this;return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Le((function(){return t.sdk.featureFlags})))&&(n=r,this.wrapTry(ss(as().mark((function e(){return as().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.featureFlagsStorage.saveFeatureFlags(n);case 2:case"end":return e.stop()}}),e)}))))),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Services.Orchestration.OrchestrationClient"}}],r&&ls(t.prototype,r),o&&ls(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ds=kt()({PlanPicker:null,EarlyAccessPlanPicker:null,AccountDetails:null,EarlyAccess:null});function ys(e){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(e)}function gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vs(e,t){return vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vs(e,t)}function bs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ws(e);if(t){var o=ws(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ms(this,r)}}function ms(e,t){if(t&&("object"===ys(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ws(e){return ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ws(e)}var Ss=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vs(e,t)}(i,e);var t,r,n,o=bs(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=i.query,r={input:e};return o.call(this,{query:t,variables:r,operationName:"updateDeviceOperatingSystem"})}return t=i,n=[{key:"query",get:function(){return"mutation updateDeviceOperatingSystem($input: UpdateDeviceOperatingSystemInput!) {\n            updateDeviceOperatingSystem(updateDeviceOperatingSystem: $input) {\n                accepted\n            }\n        }"}}],(r=[{key:"toString",value:function(){return"SDK.Services.Orchestration.Internal.UpdateDeviceOperatingSystemRequest"}}])&&gs(t.prototype,r),n&&gs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ic);const ks={OffDeviceRedemptionFlow:oa,OrchestrationClient:hs,OrchestrationClientConfiguration:Ur,OrchestrationClientEndpoint:ia,OrchestrationExtrasMap:Vr,PurchaseContext:ds,Internal:{ExchangeDeviceGrantForAccessTokenRequest:Gc,OrchestrationRequest:Ic,RefreshTokenRequest:Yc,RegisterDeviceRequest:ts,UpdateDeviceOperatingSystemRequest:Ss}},xs=kt()({postEvent:null,dustEvent:null,validateDustEvent:null,validateQoeEvent:null});function Es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Os(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ts=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Es(this,e);var r={options:n.Types.object({server:n.Types.object().optional,client:n.Types.object().optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t.server,i=void 0===o?{}:o,a=t.client,c=void 0===a?{}:a;this.server=i,this.client=c}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryPayload"}}])&&Os(t.prototype,r),o&&Os(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function js(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _s=function(){function e(t,r){Ps(this,e);var o={replyAfter:n.Types.number.optional,requestId:n.Types.nonEmptyString.optional};(0,n.typecheck)(this,o,arguments),this.replyAfter=t,this.requestId=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryResponse"}}])&&js(t.prototype,r),o&&js(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const As={other:"other",success:"com.disneystreaming.sdp.http.Success",unknownTypeError:"com.disneystreaming.sdp.http.UnknownTypeError",jsonDustEventDecodeError:"com.disneystreaming.sdp.http.JsonEventDecodeError"};function Cs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ds=function(){function e(t){Cs(this,e);var r={options:n.Types.object({_type:n.Types.string,message:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t._type,i=t.message,a=Object.values(As).find((function(e){return e===o}));this.validationResultType=a||As.other,this.message=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResult"}}])&&Rs(t.prototype,r),o&&Rs(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Is(e){return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(e)}function Ls(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ms(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ns(e,t){return Ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ns(e,t)}function Fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gs(e);if(t){var o=Gs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bs(this,r)}}function Bs(e,t){if(t&&("object"===Is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Us(e)}function Us(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gs(e){return Gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gs(e)}var zs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ns(e,t)}(a,e);var t,r,o,i=Fs(a);function a(e){var t;Ls(this,a);var r=e.replyAfter,o=e.requestId;t=i.call(this,r,o);var c={options:n.Types.object({results:n.Types.array.of.instanceStrict(Ds),replyAfter:n.Types.skip,requestId:n.Types.skip})};(0,n.typecheck)(Us(t),c,arguments);var s=e.results;return t.results=s,t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidatedTelemetryResponse"}}])&&Ms(t.prototype,r),o&&Ms(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(_s);const Vs={success:"Success",horaFailure:"HoraFailure",sdpFailure:"SdpFailure",multipleFailures:"MultipleFailures",schemaParsingFailure:"SchemaParsingFailure",healthCheckFailure:"HealthCheckFailure",internalServerError:"InternalServerError",unableToReachServer:"UnableToReachServer",dataValidationFailure:"DataValidationFailure"},qs={hora:"Hora",sdp:"Sdp",root:"Root"};var Ks,Ws={description:n.Types.nonEmptyString.optional,metadataMatcher:n.Types.object().optional,owner:n.Types.nonEmptyString.optional,status:n.Types.nonEmptyString.optional,url:n.Types.nonEmptyString.optional,urnCategoryMatcher:n.Types.array.of.nonEmptyString.optional};function Hs(e){return Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hs(e)}function Ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Js(e,t){return Js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Js(e,t)}function $s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=eu(e);if(t){var o=eu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Qs(this,r)}}function Qs(e,t){if(t&&("object"===Hs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zs(e)}function Zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e){return eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eu(e)}Ks={countErrors:n.Types.number.optional,countErrorsRelative:n.Types.number.optional,countSuccess:n.Types.number.optional,description:n.Types.nonEmptyString.optional,failures:n.Types.array.of.object(Ks).optional,httpMessage:n.Types.nonEmptyString.optional,httpStatus:n.Types.number.optional,name:n.Types.nonEmptyString.optional,result:n.Types.in(Vs),sha:n.Types.nonEmptyString.optional,source:n.Types.in(qs),successes:n.Types.array.of.object(Ks).optional,validationManifest:n.Types.object(Ws).optional,validationMessage:n.Types.array.of.nonEmptyString.optional};var tu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Js(e,t)}(a,e);var t,r,o,i=$s(a);function a(e){var t;Ys(this,a);var r=e.replyAfter,o=e.requestId;t=i.call(this,r,o);var c={options:n.Types.object({results:n.Types.array.of.object(Ks),replyAfter:n.Types.skip,requestId:n.Types.skip})};(0,n.typecheck)(Zs(t),c,arguments);var s=e.results;return t.results=s,t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.HoraValidatedTelemetryResponse"}}])&&Xs(t.prototype,r),o&&Xs(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(_s);function ru(e){return ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(e)}function nu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ou(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iu(e,t){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iu(e,t)}function au(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=su(e);if(t){var o=su(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return cu(this,r)}}function cu(e,t){if(t&&("object"===ru(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}var uu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iu(e,t)}(i,e);var t,r,n,o=au(i);function i(){return nu(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResultSuccess"}}])&&ou(t.prototype,r),n&&ou(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ds);function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hu(e,t){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hu(e,t)}function du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vu(e);if(t){var o=vu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return yu(this,r)}}function yu(e,t){if(t&&("object"===lu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gu(e)}function gu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vu(e){return vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vu(e)}var bu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hu(e,t)}(a,e);var t,r,o,i=du(a);function a(e){var t;fu(this,a),t=i.call(this,e);var r={options:n.Types.object({receivedType:n.Types.nonEmptyString.optional})};(0,n.typecheck)(gu(t),r,arguments);var o=e.receivedType;return t.receivedType=o,t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResultUnknownTypeError"}}])&&pu(t.prototype,r),o&&pu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ds);function mu(e){return mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(e)}function wu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Su(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ku(e,t){return ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ku(e,t)}function xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Tu(e);if(t){var o=Tu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Eu(this,r)}}function Eu(e,t){if(t&&("object"===mu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ou(e)}function Ou(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tu(e){return Tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tu(e)}var Pu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ku(e,t)}(a,e);var t,r,o,i=xu(a);function a(e){var t;wu(this,a),t=i.call(this,e);var r={options:n.Types.object({errors:n.Types.array.of.nonEmptyString.optional})};(0,n.typecheck)(Ou(t),r,arguments);var o=e.errors;return t.errors=o,t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.ValidationResultJsonDustEventDecodeError"}}])&&Su(t.prototype,r),o&&Su(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ds);function ju(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Au(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ru=Wi.AccessToken,Du=fo.HttpMethod,Iu=qe.services.internal.telemetry.telemetryClient,Lu=function(){function e(t,r,o){Au(this,e);var i={telemetryClientConfiguration:n.Types.instanceStrict(dn),logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt)};(0,n.typecheck)(this,i,arguments),this.config=t,this.logger=r,this.httpClient=o,this.replyAfterHeader="x-mlbam-reply-after",this.requestIdHeader="x-request-id",this.dustEnabled=!0,this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,r=[{key:"postEvents",value:function(e,t,r){var o=this,i={accessToken:n.Types.instanceStrict(Ru),telemetryPayloads:n.Types.array.of.instanceStrict(Ts),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"postEvents",i,arguments);var a=this.dustEnabled,c=this.logger,s=this.httpClient,u=xs.postEvent,l=this.getPayload({accessToken:e,endpointKey:u,body:t}),f=new tt({dustEnabled:a,logger:c,source:this.toString(),urn:Iu.postEvents,payload:l,method:Du.GET,endpointKey:u,logTransaction:r});return c.info(this.toString(),"Posting telemetry events: Count: ".concat(t.length)),s.post(l).then((function(e){return Ve.checkResponseCode(e,f)})).then((function(e){var t=e.headers,r=o.replyAfterHeader,n=o.requestIdHeader,i=Number(t.get(r)),a=t.get(n);return Promise.resolve(new _s(i,a))})).finally((function(){f.log()}))}},{key:"postDustEvents",value:function(e,t){var r=this,o={accessToken:n.Types.instanceStrict(Ru),telemetryPayloads:n.Types.array.of.instanceStrict(Ts)};(0,n.typecheck)(this,"postDustEvents",o,arguments);var i=this.logger,a=this.httpClient,c=this.getPayload({accessToken:e,endpointKey:xs.dustEvent,body:t});return i.info(this.toString(),"Posting dust events: Count: ".concat(t.length)),a.post(c).then((function(e){return Ve.checkResponseCode(e)})).then((function(e){var t=e.headers,n=r.replyAfterHeader,o=r.requestIdHeader,i=Number(t.get(n)),a=t.get(o);return Promise.resolve(new _s(i,a))}))}},{key:"validateDustEvents",value:function(e,t){var r=this,o={accessToken:n.Types.instanceStrict(Ru),telemetryPayloads:n.Types.array.of.instanceStrict(Ts)};(0,n.typecheck)(this,"validateDustEvents",o,arguments);var i=this.logger,a=this.httpClient,c=this.getPayload({accessToken:e,endpointKey:xs.validateDustEvent,body:t});return i.info(this.toString(),"Validating dust events: Count: ".concat(t.length)),a.post(c).then((function(e){return e.status<=400&&"application/json"===e.headers.get("content-type")?e:Ve.checkResponseCode(e)})).then((function(e){var t=e.headers,n=e.data,o=r.replyAfterHeader,i=r.requestIdHeader,a=Number(t.get(o)),c=t.get(i),s=n.map((function(e){switch(e._type){case As.success:return new uu(e);case As.unknownTypeError:return new bu(e);case As.jsonDustEventDecodeError:return new Pu(e);default:return new Ds(e)}}));return new zs({replyAfter:a,requestId:c,results:s})}))}},{key:"validateQoeEvents",value:function(e,t){var r=this,o={accessToken:n.Types.instanceStrict(Ru),telemetryPayloads:n.Types.array.of.instanceStrict(Ts)};(0,n.typecheck)(this,"validateQoeEvents",o,arguments);var i=this.logger,a=this.httpClient,c=this.getPayload({accessToken:e,endpointKey:xs.validateQoeEvent,body:t});return i.info(this.toString(),"Validating QoE events: Count: ".concat(t.length)),a.post(c).then((function(e){return e.status<=400&&"application/json"===e.headers.get("content-type")?e:Ve.checkResponseCode(e)})).then((function(e){var t=e.headers,n=e.data,o=r.replyAfterHeader,i=r.requestIdHeader,a=Number(t.get(o)),c=t.get(i);return new tu({replyAfter:a,requestId:c,results:[n]})}))}},{key:"getPayload",value:function(e){var t=e.accessToken,r=e.endpointKey,o=e.body,i=this.config.endpoints[r],a=i.href,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(r),!0).forEach((function(t){_u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ju(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i.headers),s=JSON.stringify(o);c.Authorization=c.Authorization.replace(/\{accessToken\}/gi,t.token);var u="X-BAMTECH-Event-Transport-Timestamp",l=c[u];return n.Check.assigned(l)&&(c[u]=l.replace(/\{time\}/i,(new Date).toISOString())),{url:a,body:s,headers:c}}},{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.TelemetryClient"}}],r&&Cu(t.prototype,r),o&&Cu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fu=function(){function e(t){Mu(this,e);var r={options:n.Types.object({event:n.Types.nonEmptyString,timestamp:n.Types.number,playbackSessionId:n.Types.nonEmptyString,playhead:n.Types.number.optional,bitrate:n.Types.number.optional,interactionId:n.Types.nonEmptyString.optional,groupId:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.event,i=t.timestamp,a=t.playbackSessionId,c=t.playhead,s=t.bitrate,u=t.interactionId,l=void 0===u?null:u,f=t.groupId;this.event=o,this.timestamp=i,this.play_head=c,this.playback_session_id=a,this.bitrate=s,this.interaction_id=l,this.group_id=f}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.StreamSampleClientPayload"}}])&&Nu(t.prototype,r),o&&Nu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bu(e){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(e)}function Uu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zu(e,t){return zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zu(e,t)}function Vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Wu(e);if(t){var o=Wu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return qu(this,r)}}function qu(e,t){if(t&&("object"===Bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ku(e)}function Ku(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wu(e){return Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wu(e)}const Hu={TelemetryClientConfiguration:dn,TelemetryClient:Lu,TelemetryClientEndpoint:xs,TelemetryPayload:Ts,TelemetryResponse:_s,HoraValidatedTelemetryResponse:tu,HoraValidationResultType:Vs,HoraValidationSource:qs,StreamSamplePayload:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zu(e,t)}(a,e);var t,r,o,i=Vu(a);function a(e){var t;Uu(this,a),t=i.call(this,e);var r={options:n.Types.object({server:n.Types.object(),client:n.Types.instanceStrict(Fu)})};return(0,n.typecheck)(Ku(t),r,arguments),t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Telemetry.StreamSamplePayload"}}])&&Gu(t.prototype,r),o&&Gu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ts),StreamSampleClientPayload:Fu,ValidatedTelemetryResponse:zs,ValidationResult:Ds,ValidationResultJsonDustEventDecodeError:Pu,ValidationResultSuccess:uu,ValidationResultType:As,ValidationResultUnknownTypeError:bu};function Yu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ju=function(){function e(t){Yu(this,e);var r={options:n.Types.object({version:n.Types.nonEmptyString,id:n.Types.nonEmptyString,name:n.Types.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.version,i=t.id,a=t.name;this.version=o,this.id=i,this.name=a}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustApplicationPayload"}}])&&Xu(t.prototype,r),o&&Xu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Qu=new Uint8Array(16);function Zu(){if(!$u)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $u(Qu)}const el=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const tl=function(e){return"string"==typeof e&&el.test(e)};for(var rl=[],nl=0;nl<256;++nl)rl.push((nl+256).toString(16).substr(1));const ol=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(rl[e[t+0]]+rl[e[t+1]]+rl[e[t+2]]+rl[e[t+3]]+"-"+rl[e[t+4]]+rl[e[t+5]]+"-"+rl[e[t+6]]+rl[e[t+7]]+"-"+rl[e[t+8]]+rl[e[t+9]]+"-"+rl[e[t+10]]+rl[e[t+11]]+rl[e[t+12]]+rl[e[t+13]]+rl[e[t+14]]+rl[e[t+15]]).toLowerCase();if(!tl(r))throw TypeError("Stringified UUID is invalid");return r};const il=function(e,t,r){var n=(e=e||{}).random||(e.rng||Zu)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return ol(n)};function al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sl=function(){function e(t){al(this,e);var r={options:n.Types.object({os:n.Types.nonEmptyString,model:n.Types.nonEmptyString,brand:n.Types.nonEmptyString.optional,modelFamily:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.os,i=t.model,a=t.brand,c=t.modelFamily;this.os=o,this.model=i,this.brand=a,this.modelFamily=c||null}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustDevicePayload"}}])&&cl(t.prototype,r),o&&cl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ll(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fl=function(){function e(t,r){ul(this,e);var o={version:n.Types.nonEmptyString,platform:n.Types.nonEmptyString.optional};(0,n.typecheck)(this,o,arguments),this.version=t,this.platform="javascript"}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustSdkPayload"}}])&&ll(t.prototype,r),o&&ll(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dl=function(){function e(t){pl(this,e);var r={options:n.Types.object({category:n.Types.nonEmptyString,device:n.Types.instanceStrict(sl),data:n.Types.object().optional,event:n.Types.nonEmptyString,application:n.Types.instanceStrict(Ju),sdk:n.Types.instanceStrict(fl),transactionId:n.Types.string.optional,correlationIds:n.Types.object().optional,timestamp:n.Types.dateString.optional,version:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.category,i=t.device,a=t.data,c=void 0===a?{}:a,s=t.event,u=t.application,l=t.sdk,f=t.transactionId,p=t.correlationIds,h=t.timestamp,d=void 0===h?(new Date).toISOString():h,y=t.version;this.category=o,this.device=i,this.data=c,this.event=s,this.eventId=il(),this.application=u,this.sdk=l,this.transactionId=f,this.correlationIds=p,this.timestamp=d,this.version=y}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustClientPayload"}}])&&hl(t.prototype,r),o&&hl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),yl={MockDustLogUtility:void 0};const gl={internalTestabilityOverride:yl,dustMethodLogDecorator:function(e){var t={urnBaseObj:n.Types.nonEmptyObject};return(0,n.typecheck)("DustDecorators","dustMethodLogDecorator",t,arguments),function(t,r,o){var i=e[r];if(!i)throw new he("DustDecorator - Could not find urn name based on key ".concat(r));var a=o.value;return n.Check.function(a)&&(o.value=function(){for(var e=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var c=this.logger,s=this.dustEnabled;return c||console.warn('no "logger" instance found on',t),tt.wrap({dustEnabled:s,dustUtilityCtorOptions:{logger:c,source:t.constructor.name,urn:i},action:function(){return a.call.apply(a,[e].concat(n))},DustLogUtilityCtorOverride:yl.MockDustLogUtility})}),o}},apiMethodDecorator:function(e,t){var r={urnBaseObj:n.Types.nonEmptyObject,apiMethodOptions:n.Types.object({skipDustLogUtility:n.Types.boolean.optional,method:n.Types.nonEmptyString.optional,paramTypes:n.Types.object().optional}).optional};return(0,n.typecheck)("DustDecorators","apiMethodDecorator",r,arguments),function(r,o,i){var a=e[o];if(!a)throw new he("DustDecorator - Could not find urn name based on key ".concat(o));var c=i.value;return n.Check.function(c)&&(i.value=function(){for(var e=this,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];var l=this.logger,f=this.dustEnabled;l||console.warn('no "logger" instance found on',r);var p=t||{},h=p.method,d=void 0===h?o:h,y=p.paramTypes,g=p.skipDustLogUtility;y&&(0,n.typecheck)(this,d,y,arguments);var v=this.toString();return H.wrapLogTransaction({urn:a,file:v,logger:l,action:function(t){return g?c.call(e,{method:d,logTransaction:t,args:s}):tt.wrap({dustEnabled:f,dustUtilityCtorOptions:{logger:l,source:r.constructor.name,urn:a,skipLogTransaction:!0},action:function(r){return c.call(e,{method:d,logTransaction:t,dustLogUtility:r,args:s})},DustLogUtilityCtorOverride:yl.MockDustLogUtility})}})}),i}}};function vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ml=function(){function e(t){vl(this,e);var r={options:n.Types.object({host:n.Types.nonEmptyString,path:n.Types.nonEmptyString,method:n.Types.nonEmptyString,statusCode:n.Types.number.optional,requestId:n.Types.nonEmptyString.optional,roundTripTime:n.Types.number.optional})};(0,n.typecheck)(this,r,arguments);var o=t.host,i=t.path,a=t.method,c=t.statusCode,s=t.requestId,u=t.roundTripTime;this.host=o,this.path=i,this.method=a,this.statusCode=c,this.requestId=s,this.roundTripTime=u}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustServerPayload"}}])&&bl(t.prototype,r),o&&bl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wl(e){return wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(e)}function Sl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xl(e,t){return xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xl(e,t)}function El(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pl(e);if(t){var o=Pl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ol(this,r)}}function Ol(e,t){if(t&&("object"===wl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tl(e)}function Tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pl(e){return Pl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pl(e)}const jl={Telemetry:Hu,Dust:{DustApplicationPayload:Ju,DustCategory:Ke,DustClientPayload:dl,DustDecorators:gl,DustDevicePayload:sl,DustLogUtility:tt,DustPayload:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xl(e,t)}(a,e);var t,r,o,i=El(a);function a(e){var t;function r(e){return n.Check.nonEmptyObject(e)?n.Check.instanceStrict(e,ml):n.Check.object(e)}Sl(this,a),t=i.call(this,e);var o={options:n.Types.object({server:n.Types.custom(r).optional,client:n.Types.instanceStrict(dl)})};return(0,n.typecheck)(Tl(t),o,arguments),t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Internal.Dust.DustPayload"}}])&&kl(t.prototype,r),o&&kl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ts),DustSdkPayload:fl,DustServerPayload:ml,DustUrnReference:qe}},_l=kt()({player:null,account:null,login:null,onboarding:null});function Al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Rl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Al(this,e);var r={options:n.Types.object({playbackSessionId:n.Types.nonEmptyString.optional,audioChannels:n.Types.number.optional,audioCodec:n.Types.nonEmptyString.optional,audioLanguage:n.Types.nonEmptyString.optional,audioName:n.Types.nonEmptyString.optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.playbackSessionId,a=o.audioChannels,c=o.audioCodec,s=o.audioLanguage,u=o.audioName;this.playbackSessionId=i,this.audioChannels=n.Check.assigned(a)?a:void 0,this.audioCodec=c,this.audioLanguage=s,this.audioName=u}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.AudioChangedEventData"}}])&&Cl(t.prototype,r),o&&Cl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Dl=kt()({initializing:null,seeking:null,resuming:null,buffering:null,rebuffering:null,stalePlaylist:null,segmentGap:null,segmentDownloadFailure:null}),Il=kt()({info:null,warn:null,error:null}),Ll=kt()({app:null,player:null,sdk:null,service:null}),Ml={cellular3g:"3g",cellular4g:"4g",cellular5g:"5g",wifi:"wifi",ethernet:"ethernet",unknown:"unknown"},Nl=kt()({ad:null,bumper:null,content:null,loading:null,unknown:null}),Fl=kt()({drmHdcp:null,drmDecryption:null,drmExpiredLicense:null,drmSecurityLevel:null,drmOther:null,networkFailure:null,serviceError:null,authorizationExpired:null,concurrency:null,pcon:null,blackout:null,notEntitled:null,contentNotAvailable:null,unknown:null}),Bl={live:"Live",vod:"VOD"};function Ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zl=function(){function e(t){Ul(this,e);var r={options:n.Types.object({applicationContext:n.Types.in(_l),isFatal:n.Types.boolean.optional,source:n.Types.in(Ll).optional,errorLevel:n.Types.in(Il).optional,errorName:n.Types.in(Fl).optional,playbackSessionId:n.Types.nonEmptyString.optional,productType:n.Types.in(Bl).optional,playheadPosition:n.Types.number.optional,videoBitrate:n.Types.number.optional,videoAverageBitrate:n.Types.number.optional,audioBitrate:n.Types.number.optional,maxAllowedVideoBitrate:n.Types.number.optional,segmentPosition:n.Types.number.optional,cdnName:n.Types.nonEmptyString.optional,periodType:n.Types.in(Nl).optional,networkType:n.Types.in(Ml).optional,liveLatencyAmount:n.Types.number.optional,errorLocalizationKey:n.Types.nonEmptyString.optional,dictionaryVersion:n.Types.nonEmptyString.optional,underlyingSdkError:n.Types.instanceStrict(I).optional,errorMessage:n.Types.nonEmptyString.optional,contentKeys:n.Types.object().optional,clientGroupIds:n.Types.nonEmptyString.optional,serverGroupIds:n.Types.nonEmptyString.optional,data:n.Types.object().optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.applicationContext,a=o.isFatal,c=o.source,s=o.errorLevel,u=o.errorName,l=o.playbackSessionId,f=o.productType,p=o.playheadPosition,h=o.videoBitrate,d=o.videoAverageBitrate,y=o.audioBitrate,g=o.maxAllowedVideoBitrate,v=o.segmentPosition,b=o.cdnName,m=o.periodType,w=o.networkType,S=o.liveLatencyAmount,k=o.errorLocalizationKey,x=o.dictionaryVersion,E=o.underlyingSdkError,O=o.errorMessage,T=o.clientGroupIds,P=o.serverGroupIds,j=o.contentKeys,_=o.data,A=void 0===_?{}:_;this.applicationContext=i,this.isFatal=n.Check.assigned(a)?a:void 0,this.source=c,this.errorId=il(),this.errorLevel=s,this.errorName=this.setErrorName(i,u),this.playbackSessionId=l,this.productType=f,this.playheadPosition=n.Check.assigned(p)?p:-1,this.videoBitrate=n.Check.assigned(h)?h:0,this.videoAverageBitrate=n.Check.assigned(d)?d:0,this.audioBitrate=n.Check.assigned(y)?y:0,this.maxAllowedVideoBitrate=n.Check.assigned(g)?g:void 0,this.segmentPosition=n.Check.assigned(v)?v:void 0,this.cdnName=b||"null",this.periodType=m||Nl.unknown,this.networkType=w||Ml.unknown,this.liveLatencyAmount=n.Check.assigned(S)?S:void 0,this.errorLocalizationKey=k,this.dictionaryVersion=x,this.underlyingSdkError=E,this.errorMessage=O,this.clientGroupIds=T,this.serverGroupIds=P,this.contentKeys=j||{},this.setData(A)}var t,r,o;return t=e,r=[{key:"setData",value:function(e){n.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"setErrorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fl.unknown;return e!==_l.player?Fl.unknown:t}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.ErrorEventData"}}],r&&Gl(t.prototype,r),o&&Gl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Vl={optimizely:"optimizely",weaponX:"weapon_x"};function ql(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wl=function(){function e(t){ql(this,e);var r={options:n.Types.object({experimentPlatform:n.Types.in(Vl),experimentFeatureId:n.Types.nonEmptyString,experimentId:n.Types.nonEmptyString,variantId:n.Types.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.experimentPlatform,i=t.experimentFeatureId,a=t.experimentId,c=t.variantId;this.experimentPlatform=o,this.experimentFeatureId=i,this.experimentId=a,this.variantId=c}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.ExperimentsDetails"}}])&&Kl(t.prototype,r),o&&Kl(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Hl=kt()({completed:null,cancelled:null,noNetwork:null}),Yl=kt()({get:null,post:null,put:null,delete:null,patch:null}),Xl=kt()({ageNotVerified:null,ageNotVerifiedKr:null,authenticationExpired:null,authorizationExpired:null,blackout:null,concurrency:null,contentNotAvailable:null,locationAcquisitionError:null,locationNotAllowed:null,loginRequired:null,mediaNotAllowed:null,networkFailure:null,notEntitled:null,parentalControlsRestricted:null,pcon:null,pinExpired:null,profileMissing:null,profilePinMissing:null,requestBlocked:null,requestTemporarilyBlocked:null,temporarilyThrottled:null,temporarilyUnavailable:null,unexpectedError:null,upgradeRequired:null,unknown:null}),Jl=kt()({dns:null,timeout:null,notConnected:null,prohibited:null,unknown:null});function $l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ql(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Zl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$l(this,e);var r={options:n.Types.object({method:n.Types.in(Yl).optional,host:n.Types.nonEmptyString.optional,path:n.Types.nonEmptyString.optional,statusCode:n.Types.number.optional,requestId:n.Types.nonEmptyString.optional,roundTripTime:n.Types.number.optional,status:n.Types.in(Hl).optional,serverIP:n.Types.nonEmptyString.optional,cdnName:n.Types.nonEmptyString.optional,networkType:n.Types.in(Ml).optional,timeToFirstByte:n.Types.number.optional,error:n.Types.in(Jl).optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.method,a=o.host,c=o.path,s=o.statusCode,u=o.requestId,l=o.roundTripTime,f=o.status,p=o.serverIP,h=o.cdnName,d=o.networkType,y=o.timeToFirstByte,g=o.error;this.method=i||null,this.host=a||null,this.path=c||null,this.statusCode=n.Check.assigned(s)?s:null,this.requestId=u||null,this.roundTripTime=n.Check.assigned(l)?l:null,this.status=f||null,this.serverIP=p||null,this.cdnName=h||null,this.networkType=d||null,this.timeToFirstByte=n.Check.assigned(y)?y:null,this.error=g||null}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.ServerRequest"}}])&&Ql(t.prototype,r),o&&Ql(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ef(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rf=function(){function e(t){ef(this,e);var r={options:n.Types.object({playbackSessionId:n.Types.nonEmptyString.optional,offline:n.Types.boolean.optional,serverRequest:n.Types.instanceStrict(Zl).optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.playbackSessionId,a=o.offline,c=o.serverRequest;this.playbackSessionId=i,this.offline=!!n.Check.assigned(a)&&a,this.serverRequest=c}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.MediaSegmentFetchedEventData"}}])&&tf(t.prototype,r),o&&tf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const nf=kt()({video:null,audio:null,subtitle:null,iframe:null});function of(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function af(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cf=function(){function e(t){of(this,e);var r={options:n.Types.object({error:n.Types.in(Fl).optional,errorLevel:n.Types.in(Il).optional,errorDetail:n.Types.nonEmptyString.optional,playheadPosition:n.Types.number.optional,segmentPosition:n.Types.number.optional,liveLatencyAmount:n.Types.number.optional})};(0,n.typecheck)(this,r,arguments);var o=t.error,i=t.errorLevel,a=t.errorDetail,c=t.playheadPosition,s=t.segmentPosition,u=t.liveLatencyAmount;this.error=o,this.errorLevel=i,this.errorDetail=a,this.playheadPosition=n.Check.assigned(c)?c:-1,this.segmentPosition=s,this.liveLatencyAmount=u}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.NonFatalPlaybackErrorEventData"}}])&&af(t.prototype,r),o&&af(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const sf=kt()({bitrateChanged:null,ended:null,paused:null,rebufferingEnded:null,rebufferingStarted:null,resumed:null,seekEnded:null,seekStarted:null,started:null}),uf=kt()({forward:null,backward:null,same:null}),lf=kt()({fromLiveEdge:null,toLiveEdge:null});function ff(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hf=function(){function e(t){ff(this,e);var r={options:n.Types.object({playbackActivity:n.Types.in(sf),streamUrl:n.Types.nonEmptyString,playbackSessionId:n.Types.nonEmptyString.optional,productType:n.Types.in(Bl).optional,playheadPosition:n.Types.number.optional,videoBitrate:n.Types.number.optional,videoAverageBitrate:n.Types.number.optional,audioBitrate:n.Types.number.optional,maxAllowedVideoBitrate:n.Types.number.optional,segmentPosition:n.Types.number.optional,cdnName:n.Types.nonEmptyString.optional,periodType:n.Types.in(Nl).optional,networkType:n.Types.in(Ml).optional,liveLatencyAmount:n.Types.number.optional,cause:n.Types.nonEmptyString.optional,bufferType:n.Types.in(Dl).optional,duration:n.Types.number.optional,playerSeekDirection:n.Types.in(uf).optional,seekDistance:n.Types.number.optional,seekDirection:n.Types.in(lf).optional,seekSize:n.Types.number.optional,playbackError:n.Types.in(Fl).optional,playbackErrorDetail:n.Types.nonEmptyString.optional,cdnRequestedTrail:n.Types.array.of.nonEmptyString.optional,cdnFailedTrail:n.Types.array.of.nonEmptyString.optional,cdnFallbackCount:n.Types.number.optional,isCdnFallback:n.Types.boolean.optional,contentKeys:n.Types.object().optional,clientGroupIds:n.Types.nonEmptyString.optional,serverGroupIds:n.Types.nonEmptyString.optional,data:n.Types.object().optional})};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.playbackActivity,a=o.streamUrl,c=o.playbackSessionId,s=o.productType,u=o.playheadPosition,l=o.videoBitrate,f=o.videoAverageBitrate,p=o.audioBitrate,h=o.maxAllowedVideoBitrate,d=o.segmentPosition,y=o.cdnName,g=o.periodType,v=o.networkType,b=o.liveLatencyAmount,m=o.cause,w=o.bufferType,S=o.duration,k=o.playerSeekDirection,x=o.seekDistance,E=o.seekDirection,O=o.seekSize,T=o.playbackError,P=o.playbackErrorDetail,j=o.cdnRequestedTrail,_=o.cdnFailedTrail,A=o.cdnFallbackCount,C=o.isCdnFallback,R=o.clientGroupIds,D=o.serverGroupIds,I=o.contentKeys,L=o.data,M=void 0===L?{}:L;this.playbackActivity=i,this.streamUrl=a,this.playbackSessionId=c,this.productType=s,this.playheadPosition=n.Check.assigned(u)?u:-1,this.videoBitrate=n.Check.assigned(l)?l:0,this.videoAverageBitrate=n.Check.assigned(f)?f:0,this.audioBitrate=n.Check.assigned(p)?p:0,this.maxAllowedVideoBitrate=n.Check.assigned(h)?h:0,this.segmentPosition=d,this.cdnName=y||"null",this.periodType=g||Nl.unknown,this.networkType=v||Ml.unknown,this.liveLatencyAmount=b,this.cause=m,this.bufferType=w,this.duration=S,this.playerSeekDirection=k,this.seekDistance=x,this.seekDirection=E,this.seekSize=O,this.playbackError=T,this.playbackErrorDetail=P,this.cdnRequestedTrail=j||[],this.cdnFailedTrail=_||[],this.cdnFallbackCount=A,this.isCdnFallback=C,this.clientGroupIds=R,this.serverGroupIds=D,this.contentKeys=I||{},this.setData(M)}var t,r,o;return t=e,(r=[{key:"setData",value:function(e){n.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackEventData"}}])&&pf(t.prototype,r),o&&pf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const df=kt()({applicationExit:null,applicationBackground:null,user:null,error:null,playedToEnd:null}),yf=kt()({buffering:null,finished:null,paused:null,playing:null}),gf=kt()({average:null,peak:null});function vf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mf=function(){function e(t){vf(this,e);var r={options:n.Types.object({playbackDuration:n.Types.number.optional,playbackState:n.Types.in(yf).optional,productType:n.Types.in(Bl).optional,totalVst:n.Types.number.optional,videoStartTimestamp:n.Types.number.optional,bufferSegmentDuration:n.Types.number.optional,mediaBytesDownloaded:n.Types.number.optional,mediaDownloadTotalTime:n.Types.number.optional,mediaDownloadTotalCount:n.Types.number.optional,playbackSessionId:n.Types.nonEmptyString.optional,playheadPosition:n.Types.number.optional,videoBitrate:n.Types.number.optional,videoAverageBitrate:n.Types.number.optional,audioBitrate:n.Types.number.optional,maxAllowedVideoBitrate:n.Types.number.optional,segmentPosition:n.Types.number.optional,cdnName:n.Types.nonEmptyString.optional,periodType:n.Types.in(Nl).optional,networkType:n.Types.in(Ml).optional,liveLatencyAmount:n.Types.number.optional,playlistBitrateType:n.Types.in(gf).optional,currentThroughput:n.Types.number.optional,cpuPercentage:n.Types.number.optional,freeMemory:n.Types.number.optional,seekableRangeEndProgramDateTime:n.Types.number.optional,isLiveEdge:n.Types.boolean.optional,artificialDelay:n.Types.boolean.optional,clientGroupIds:n.Types.nonEmptyString.optional,serverGroupIds:n.Types.nonEmptyString.optional,contentKeys:n.Types.object().optional,data:n.Types.object().optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.playbackDuration,a=o.playbackState,c=o.productType,s=o.totalVst,u=o.videoStartTimestamp,l=o.bufferSegmentDuration,f=o.mediaBytesDownloaded,p=o.mediaDownloadTotalTime,h=o.mediaDownloadTotalCount,d=o.playbackSessionId,y=o.playheadPosition,g=o.videoBitrate,v=o.videoAverageBitrate,b=o.audioBitrate,m=o.maxAllowedVideoBitrate,w=o.segmentPosition,S=o.cdnName,k=o.periodType,x=o.networkType,E=o.liveLatencyAmount,O=o.playlistBitrateType,T=o.currentThroughput,P=o.cpuPercentage,j=o.freeMemory,_=o.seekableRangeEndProgramDateTime,A=o.isLiveEdge,C=o.artificialDelay,R=o.clientGroupIds,D=o.serverGroupIds,I=o.contentKeys,L=o.data,M=void 0===L?{}:L;this.playbackDuration=i,this.playbackState=a,this.productType=c,this.totalVst=n.Check.assigned(s)?s:0,this.videoStartTimestamp=n.Check.assigned(u)?u:0,this.bufferSegmentDuration=n.Check.assigned(l)?l:0,this.mediaBytesDownloaded=f,this.mediaDownloadTotalTime=p,this.mediaDownloadTotalCount=h,this.playbackSessionId=d,this.playheadPosition=n.Check.assigned(y)?y:-1,this.videoBitrate=n.Check.assigned(g)?g:0,this.videoAverageBitrate=n.Check.assigned(v)?v:0,this.audioBitrate=n.Check.assigned(b)?b:0,this.maxAllowedVideoBitrate=m,this.segmentPosition=w,this.cdnName=S||"null",this.periodType=k||Nl.unknown,this.networkType=x||Ml.unknown,this.liveLatencyAmount=E,this.playlistBitrateType=O,this.currentThroughput=T,this.cpuPercentage=P,this.freeMemory=j,this.seekableRangeEndProgramDateTime=_,this.isLiveEdge=A,this.artificialDelay=C,this.clientGroupIds=R,this.serverGroupIds=D,this.contentKeys=I||{},this.setData(M)}var t,r,o;return t=e,(r=[{key:"setData",value:function(e){n.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackHeartbeatEventData"}}])&&bf(t.prototype,r),o&&bf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const wf=kt()({autoplay:null,userAction:null,autoAdvance:null,background:null,pip:null,transferred:null,userActionRestartButton:null,tileFocus:null,feedSwitch:null}),Sf=kt()({user:null,stall:null,applicationBackgrounded:null}),kf=kt()({user:null,stall:null,applicationForegrounded:null,liveEndofWindow:null}),xf=kt()({app:null,seek:null,scrub:null,skip:null});function Ef(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Of(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tf=function(){function e(t){Ef(this,e);var r={playbackSessionId:n.Types.nonEmptyString.optional};(0,n.typecheck)(this,r,arguments),this.playbackSessionId=t}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackSessionTransferredEventData"}}])&&Of(t.prototype,r),o&&Of(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Pf=kt()({event:null,sliding:null,complete:null}),jf=kt()({requested:null,ready:null,initialized:null,fetched:null,masterFetched:null,variantFetched:null,drmCertificateFetched:null,drmKeyFetched:null,reattempt:null});function _f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Af(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cf=function(){function e(t){_f(this,e);var r={options:n.Types.object({name:n.Types.nonEmptyString.optional,language:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.name,i=t.language;this.name=o,this.language=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Media.AudioRendition"}}])&&Af(t.prototype,r),o&&Af(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Rf=kt()({NONE:null,SILK:null,PLAYREADY:null,WIDEVINE:null,FAIRPLAY:null,PRMNAGRA:null});function Df(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function If(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Lf=function(){function e(t){Df(this,e);var r={options:n.Types.object({drmEndpointKey:n.Types.nonEmptyString}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.drmEndpointKey;this.drmEndpointKey=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackSecurity"}}])&&If(t.prototype,r),o&&If(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(r),!0).forEach((function(t){Ff(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ff(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Gf=function(){function e(t){Bf(this,e);var r={options:n.Types.object({adPartner:n.Types.nonEmptyString.optional,drms:n.Types.array.of.in(Rf),security:n.Types.instanceStrict(Lf),encryptionType:n.Types.nonEmptyString,audioSegmentTypes:n.Types.array.of.nonEmptyString,videoSegmentTypes:n.Types.array.of.nonEmptyString,videoRanges:n.Types.array.of.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.adPartner,i=t.drms,a=t.security,c=t.encryptionType,s=t.audioSegmentTypes,u=t.videoSegmentTypes,l=t.videoRanges;this.adPartner=o,this.drms=i,this.security=a,this.encryptionType=c,this.audioSegmentTypes=s,this.videoSegmentTypes=u,this.videoRanges=l}var t,r,o;return t=e,o=[{key:"parse",value:function(t){if(t){var r=new Lf(t.security);return new e(Nf(Nf({},t),{},{security:r}))}}}],(r=[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackAttributes"}}])&&Uf(t.prototype,r),o&&Uf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qf=function(){function e(t){zf(this,e);var r={options:n.Types.object({bandwidth:n.Types.number.optional,resolution:n.Types.nonEmptyString.optional,videoBytes:n.Types.number.optional,maxAudioRenditionBytes:n.Types.number.optional,maxSubtitleRenditionBytes:n.Types.number.optional,audioChannels:n.Types.number.optional,videoRange:n.Types.nonEmptyString.optional,videoCodec:n.Types.nonEmptyString.optional,audioType:n.Types.nonEmptyString.optional,audioCodec:n.Types.nonEmptyString.optional,averageBandwidth:n.Types.number.optional,frameRate:n.Types.number.optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.bandwidth,a=o.resolution,c=o.videoBytes,s=o.maxAudioRenditionBytes,u=o.maxSubtitleRenditionBytes,l=o.audioChannels,f=o.videoRange,p=o.videoCodec,h=o.audioType,d=o.audioCodec,y=o.averageBandwidth,g=o.frameRate;this.bandwidth=n.Check.assigned(i)?i:null,this.resolution=a||null,this.videoBytes=n.Check.assigned(c)?c:null,this.maxAudioRenditionBytes=n.Check.assigned(s)?s:null,this.maxSubtitleRenditionBytes=n.Check.assigned(u)?u:null,this.audioChannels=n.Check.assigned(l)?l:null,this.videoRange=f||null,this.videoCodec=p||null,this.audioType=h||null,this.audioCodec=d||null,this.averageBandwidth=n.Check.assigned(y)?y:null,this.frameRate=n.Check.assigned(g)?g:null}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Media.PlaybackVariant"}}])&&Vf(t.prototype,r),o&&Vf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Hf=function(){function e(t){Kf(this,e);var r={options:n.Types.object({name:n.Types.nonEmptyString.optional,language:n.Types.nonEmptyString.optional,forced:n.Types.boolean.optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.name,a=o.language,c=o.forced;this.name=i,this.language=a,this.forced=c}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Media.SubtitleRendition"}}])&&Wf(t.prototype,r),o&&Wf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jf=function(){function e(t){Yf(this,e);var r={options:n.Types.object({startupActivity:n.Types.in(jf),playbackSessionId:n.Types.nonEmptyString.optional,productType:n.Types.in(Bl).optional,playheadPosition:n.Types.number.optional,networkType:n.Types.in(Ml).optional,playbackIntent:n.Types.in(wf).optional,mediaPreBuffer:n.Types.boolean.optional,bufferSegmentDuration:n.Types.number.optional,videoPlayerName:n.Types.nonEmptyString.optional,videoPlayerVersion:n.Types.nonEmptyString.optional,playbackUrl:n.Types.nonEmptyString.optional,playbackScenario:n.Types.nonEmptyString.optional,playlistLiveType:n.Types.in(Pf).optional,localMedia:n.Types.boolean.optional,serverRequest:n.Types.instanceStrict(Zl).optional,cpuPercentage:n.Types.number.optional,freeMemory:n.Types.number.optional,audio:n.Types.instanceStrict(Cf).optional,subtitle:n.Types.instanceStrict(Hf).optional,variant:n.Types.instanceStrict(qf).optional,streamUrl:n.Types.nonEmptyString.optional,attributes:n.Types.instanceStrict(Gf).optional,variants:n.Types.array.of.instanceStrict(qf).optional,error:n.Types.in(Xl).optional,drmKeyId:n.Types.nonEmptyString.optional,playlistName:n.Types.nonEmptyString.optional,playlistLanguage:n.Types.nonEmptyString.optional,mediaSegmentType:n.Types.in(nf).optional,contentKeys:n.Types.object().optional,data:n.Types.object().optional,playbackError:n.Types.in(Fl).optional,playbackErrorDetail:n.Types.nonEmptyString.optional,qos:n.Types.object().optional,clientGroupIds:n.Types.nonEmptyString.optional,serverGroupIds:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.startupActivity,i=t.playbackSessionId,a=t.productType,c=t.playheadPosition,s=t.networkType,u=t.playbackIntent,l=t.mediaPreBuffer,f=t.bufferSegmentDuration,p=t.videoPlayerName,h=t.videoPlayerVersion,d=t.playbackUrl,y=t.playbackScenario,g=t.playlistLiveType,v=t.localMedia,b=t.serverRequest,m=t.cpuPercentage,w=t.freeMemory,S=t.audio,k=t.subtitle,x=t.variant,E=t.streamUrl,O=t.attributes,T=t.variants,P=t.error,j=t.drmKeyId,_=t.playlistName,A=t.playlistLanguage,C=t.mediaSegmentType,R=t.contentKeys,D=t.data,I=void 0===D?{}:D,L=t.playbackError,M=t.playbackErrorDetail,N=t.qos,F=void 0===N?{}:N,B=t.clientGroupIds,U=t.serverGroupIds;this.startupActivity=o,this.playbackSessionId=i,this.productType=a,this.playheadPosition=n.Check.assigned(c)?c:-1,this.networkType=s||Ml.unknown,this.playbackIntent=u,this.mediaPreBuffer=!!n.Check.assigned(l)&&l,this.bufferSegmentDuration=f,this.videoPlayerName=p,this.videoPlayerVersion=h,this.playbackUrl=d,this.playbackScenario=y,this.playlistLiveType=g,this.localMedia=!!n.Check.assigned(v)&&v,this.serverRequest=b,this.cpuPercentage=m,this.freeMemory=w,this.playlistAudioChannels=n.Check.assigned(x)?x.audioChannels:void 0,this.playlistAudioCodec=n.Check.assigned(x)?x.audioCodec:void 0,this.playlistAudioLanguage=n.Check.assigned(S)?S.language:void 0,this.playlistAudioName=n.Check.assigned(S)?S.name:void 0,this.mediaStartBitrate=n.Check.assigned(x)?x.bandwidth:void 0,this.playlistSubtitleLanguage=n.Check.assigned(k)?k.language:void 0,this.playlistSubtitleName=n.Check.assigned(k)?k.name:void 0,this.subtitleVisibility=n.Check.assigned(k)?k.forced:void 0,this.playlistVideoCodec=n.Check.assigned(x)?x.videoCodec:void 0,this.playlistVideoRange=n.Check.assigned(x)?x.videoRange:void 0,this.streamUrl=E,this.attributes=O,this.variants=T,this.error=P||null,this.drmKeyId=j,this.videoBitrate=n.Check.assigned(x)?x.bandwidth:void 0,this.videoAverageBitrate=n.Check.assigned(x)?x.averageBandwidth:void 0,this.playlistChannels=n.Check.assigned(x)&&n.Check.assigned(x.audioChannels)?x.audioChannels.toString():void 0,this.playlistName=_,this.playlistLanguage=A,this.mediaSegmentType=C,this.playlistResolution=n.Check.assigned(x)?x.resolution:void 0,this.playlistFrameRate=n.Check.assigned(x)?x.frameRate:void 0,this.contentKeys=R||{},this.playbackError=L||null,this.playbackErrorDetail=M,this.cdnRequestedTrail=null,this.cdnFailedTrail=null,this.cdnFallbackCount=0,this.isCdnFallback=!1,this.clientGroupIds=B,this.serverGroupIds=U,this.setQosData(F),this.setData(I)}var t,r,o;return t=e,r=[{key:"setQosData",value:function(e){n.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"setData",value:function(e){n.Check.nonEmptyObject(e)&&Object.assign(this,e)}},{key:"fallbackAttempt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isCdnFallback&&this.cdnFallbackCount++,this.cdnRequestedTrail?this.cdnRequestedTrail.push(e):this.cdnRequestedTrail=[e]}},{key:"fallbackFailed",value:function(){this.isCdnFallback=!0,this.cdnFailedTrail=this.cdnRequestedTrail}},{key:"toString",value:function(){return"SDK.Services.QualityOfService.PlaybackStartupEventData"}}],r&&Xf(t.prototype,r),o&&Xf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Zf=function(){function e(t){$f(this,e);var r={options:n.Types.object({applicationContext:n.Types.in(_l),isFatal:n.Types.boolean,source:n.Types.in(Ll),errorId:n.Types.nonEmptyString,errorLevel:n.Types.in(Il),errorName:n.Types.in(Fl),errorLocalizationKey:n.Types.nonEmptyString.optional,dictionaryVersion:n.Types.nonEmptyString.optional,underlyingSdkError:n.Types.instanceStrict(I).optional,errorMessage:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.applicationContext,i=t.isFatal,a=t.source,c=t.errorId,s=t.errorLevel,u=t.errorName,l=t.errorLocalizationKey,f=t.dictionaryVersion,p=t.underlyingSdkError,h=t.errorMessage;this.applicationContext=o,this.isFatal=i,this.source=a,this.errorId=c,this.errorLevel=s,this.errorName=u,this.errorLocalizationKey=l,this.dictionaryVersion=f,this.underlyingSdkError=p,this.errorMessage=h}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.QoeError"}}])&&Qf(t.prototype,r),o&&Qf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ep(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const rp={ApplicationContext:_l,AudioChangedEventData:Rl,BufferType:Dl,ErrorEventData:zl,ErrorLevel:Il,ErrorSource:Ll,ExperimentPlatform:Vl,ExperimentsDetails:Wl,FetchStatus:Hl,HttpMethod:Yl,MediaFetchError:Xl,MediaSegmentFetchedEventData:rf,MediaSegmentType:nf,NetworkError:Jl,NetworkType:Ml,NonFatalPlaybackErrorEventData:cf,PeriodType:Nl,PlaybackActivity:sf,PlaybackError:Fl,PlaybackEventData:hf,PlaybackExitedCause:df,PlaybackHeartbeatEventData:mf,PlaybackIntent:wf,PlaybackPausedCause:Sf,PlaybackResumedCause:kf,PlaybackSeekCause:xf,PlaybackSessionTransferredEventData:Tf,PlaybackStartupEventData:Jf,PlaybackState:yf,PlayerSeekDirection:uf,PlaylistBitrateType:gf,PlaylistLiveType:Pf,ProductType:Bl,QoeError:Zf,SeekDirection:lf,ServerRequest:Zl,StartupActivity:jf,SubtitleChangedEventData:function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ep(this,e);var r={options:n.Types.object({playbackSessionId:n.Types.nonEmptyString.optional,subtitleLanguage:n.Types.nonEmptyString.optional,subtitleName:n.Types.nonEmptyString.optional,subtitleVisibility:n.Types.boolean.optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.playbackSessionId,a=o.subtitleLanguage,c=o.subtitleName,s=o.subtitleVisibility;this.playbackSessionId=i,this.subtitleLanguage=a,this.subtitleName=c,this.subtitleVisibility=n.Check.assigned(s)?s:void 0}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.QualityOfService.SubtitleChangedEventData"}}])&&tp(t.prototype,r),o&&tp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},np={LocationType:la,SessionInfo:ja},op={},ip={other:"other",voluntaryCancel:"VOLUNTARY_CANCEL",involuntaryCancel:"INVOLUNTARY_CANCEL",autoCancel:"AUTO_CANCEL",abuseRevocation:"ABUSE_REVOCATION",unknown:"UNKNOWN"},ap={other:"other",grace:"GRACE",hold:"HOLD",cancelled:"CANCELLED"},cp={other:"other",doubleBilled:"DOUBLE_BILLED",discounted:"DISCOUNTED",stacked:"STACKED"},sp={other:"other",monthly:"MONTHLY",annual:"ANNUAL",multiAnnual:"MULTI_ANNUAL"},up={other:"other",active:"ACTIVE",grace:"GRACE",hold:"HOLD",cancelled:"CANCELLED",paused:"PAUSED",churned:"CHURNED"},lp={other:"other",active:"ACTIVE",grace:"GRACE",hold:"HOLD",cancelled:"CANCELLED",paused:"PAUSED",churned:"CHURNED"},fp={CancellationType:ip,RiskState:ap,SourceSubType:{giftSub:"GIFT_SUB",giftCard:"GIFT_CARD",paid:"PAID",promoRedemption:"PROMO_REDEMPTION",comp:"COMP",temp:"TEMP",initial:"INITIAL",recurring:"RECURRING",planSwitched:"PLAN_SWITCHED"},StackingStatus:cp,SubscriberPeriod:sp,SubscriberStatus:up,SubscriptionState:lp},pp=kt()({PENDING_VOLUNTARY_CANCEL:null,PENDING_INVOLUNTARY_CANCEL:null,VOLUNTARY_CANCEL:null,INVOLUNTARY_CANCEL:null,LAPSED:null}),hp=kt()({SUBSCRIBED:null,UNSUBSCRIBED:null});function dp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var gp=function(){function e(t){dp(this,e);var r={statusObj:n.Types.object({subType:n.Types.in(pp).optional,type:n.Types.nonEmptyString})};n.typecheck.warn(this,r,arguments);var o=t.subType,i=t.type;this.subType=pp[o],this.type=hp[i]}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionStatus"}}])&&yp(t.prototype,r),o&&yp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const vp={noah:"NOAH",sash:"SASH"};var bp={type:n.Types.in(ip).optional,restartEligible:n.Types.boolean.optional},mp={id:n.Types.number,name:n.Types.nonEmptyString,desc:n.Types.nonEmptyString.optional,partner:n.Types.nonEmptyString.optional},wp={campaignCode:n.Types.nonEmptyString,redemptionCode:n.Types.nonEmptyString.optional,voucherCode:n.Types.nonEmptyString},Sp={status:n.Types.in(cp).optional,overlappingSubscriptionProviders:n.Types.array.of.nonEmptyString,previouslyStacked:n.Types.boolean,previouslyStackedByProvider:n.Types.nonEmptyString.optional},kp={purchaseDate:n.Types.date.optional,startDate:n.Types.date.optional,expiryDate:n.Types.date.optional,nextRenewalDate:n.Types.date.optional,pausedDate:n.Types.date.optional,churnedDate:n.Types.date.optional,isFreeTrial:n.Types.boolean.optional},xp={duration:n.Types.nonEmptyString},Ep={sku:n.Types.nonEmptyString,id:n.Types.number,name:n.Types.nonEmptyString.optional,entitlements:n.Types.array.of.object(mp),categoryCodes:n.Types.array.of.nonEmptyString.optional,redeemed:n.Types.object(wp).optional,bundle:n.Types.boolean.optional,subscriptionPeriod:n.Types.in(sp).optional,earlyAccess:n.Types.boolean.optional,trial:n.Types.object(xp).optional,bundleType:n.Types.in(vp).optional},Op={sourceType:n.Types.nonEmptyString,sourceProvider:n.Types.nonEmptyString,sourceRef:n.Types.nonEmptyString},Tp={id:n.Types.nonEmptyString,groupId:n.Types.nonEmptyString,state:n.Types.in(lp),partner:n.Types.nonEmptyString,paymentProvider:n.Types.nonEmptyString,isEntitled:n.Types.boolean,source:n.Types.object(Op),product:n.Types.object(Ep),term:n.Types.object(kp),cancellation:n.Types.object(bp).optional,stacking:n.Types.object(Sp).optional},Pp={subscriberStatus:n.Types.in(up),subscriptionAtRisk:n.Types.in(ap).optional,overlappingSubscription:n.Types.boolean,doubleBilled:n.Types.boolean,doubleBilledProviders:n.Types.array.of.nonEmptyString.optional,subscriptions:n.Types.array.of.object(Tp)};const jp=kt()({getSubscriptions:null,linkSubscriptionsFromDevice:null,getSubscriberInfo:null,getAccountSubscription:null});function _p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Dp=Wi.AccessToken,Ip=fo.HttpMethod,Lp=fp.SubscriptionState,Mp=qe.services.subscription.subscriptionClient,Np=function(){function e(t,r,o){Cp(this,e);var i={subscriptionClientConfiguration:n.Types.instanceStrict($r),logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt)};(0,n.typecheck)(this,i,arguments),this.config=t,this.logger=r,this.httpClient=o,this.dustEnabled=!0,this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,r=[{key:"getSubscriptions",value:function(e,t){var r={accessToken:n.Types.instanceStrict(Dp),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"getSubscriptions",r,arguments);var o=this.dustEnabled,i=this.logger,a=this.httpClient,c=jp.getSubscriptions,s=this.getPayload({accessToken:e,endpointKey:c});i.info(this.toString(),"Attempting to get subscriptions.");var u=new tt({dustEnabled:o,logger:i,source:this.toString(),urn:Mp.getSubscriptions,payload:s,method:Ip.GET,endpointKey:c,logTransaction:t});return a.get(s).then((function(e){return Ve.checkResponseCode(e,u)})).then((function(e){var t=e.data;return Promise.resolve(t)})).finally((function(){u.log()}))}},{key:"linkSubscriptionsFromDevice",value:function(e,t){var r={accessToken:n.Types.instanceStrict(Dp),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"linkSubscriptionsFromDevice",r,arguments);var o=this.dustEnabled,i=this.logger,a=this.httpClient,c=jp.linkSubscriptionsFromDevice,s=this.getPayload({accessToken:e,endpointKey:c});i.info(this.toString(),"Attempting to link subscriptions from device.");var u=new tt({dustEnabled:o,logger:i,source:this.toString(),urn:Mp.linkSubscriptionsFromDevice,payload:s,method:Ip.POST,endpointKey:c,logTransaction:t});return a.post(s).then((function(e){return Ve.checkResponseCode(e,u)})).finally((function(){u.log()}))}},{key:"getSubscriberInfo",value:function(e){var t=this,r={options:n.Types.object({state:n.Types.in(Lp).optional,includeChurned:n.Types.boolean.optional,accessToken:n.Types.instanceStrict(Dp),logTransaction:n.Types.instanceStrict(H)})};(0,n.typecheck)(this,"getSubscriberInfo",r,arguments);var o=e.state,i=e.includeChurned,a=e.accessToken,c=e.logTransaction,s=this.dustEnabled,u=this.logger,l=this.httpClient,f=jp.getSubscriberInfo,p=this.getPayload({accessToken:a,endpointKey:f}),h=p.url;n.Check.assigned(o)&&(h=ze(h,"state=".concat(o))),n.Check.assigned(i)&&(h=ze(h,"includeChurned=".concat(i))),p.url=h;var d=new tt({dustEnabled:s,logger:u,source:this.toString(),urn:Mp.getSubscriberInfo,payload:p,method:Ip.GET,endpointKey:f,logTransaction:c});return l.get(p).then((function(e){return Ve.checkResponseCode(e,d,"getSubscriberInfo")})).then((function(e){var r=e.data;r.subscriptions.forEach((function(e){var r=e.term;t.normalizeTerm(r)}));var o={data:n.Types.object(Pp)};return n.typecheck.warn(o,[r]),r})).finally((function(){d.log()}))}},{key:"getAccountSubscription",value:function(e,t,r){var o=this,i={subscriptionId:n.Types.nonEmptyString,accessToken:n.Types.instanceStrict(Dp),logTransaction:n.Types.instanceStrict(H)};(0,n.typecheck)(this,"getAccountSubscription",i,arguments);var a=this.dustEnabled,c=this.logger,s=this.httpClient,u=jp.getAccountSubscription,l=this.getPayload({accessToken:t,endpointKey:u});l.url=l.url.replace(/\{subscriptionId\}/gi,e);var f=new tt({dustEnabled:a,logger:c,source:this.toString(),urn:Mp.getAccountSubscription,payload:l,method:Ip.GET,endpointKey:u,logTransaction:r});return s.get(l).then((function(e){return Ve.checkResponseCode(e,f,"getAccountSubscription")})).then((function(e){var t=e.data,r=t.term;o.normalizeTerm(r);var i={data:n.Types.object(Tp)};return n.typecheck.warn(i,[t]),t})).finally((function(){f.log()}))}},{key:"getPayload",value:function(e){var t=e.accessToken,r=e.endpointKey,n=e.body,o=this.config.endpoints[r],i=o.headers,a=o.href,c=n?JSON.stringify(n):"",s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(r),!0).forEach((function(t){Ap(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i);return s.Authorization=s.Authorization.replace(/\{accessToken\}/gi,t.token),{url:a,body:c,headers:s}}},{key:"normalizeTerm",value:function(e){if(e){var t=function(e){return e?new Date(e):e};e.purchaseDate=t(e.purchaseDate),e.startDate=t(e.startDate),e.expiryDate=t(e.expiryDate),e.nextRenewalDate=t(e.nextRenewalDate),e.pausedDate=t(e.pausedDate),e.churnedDate=t(e.churnedDate)}}},{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionClient"}}],r&&Rp(t.prototype,r),o&&Rp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Fp=kt()({UNKNOWN:null,EXPIRY:null,NO_EXPIRY:null}),Bp=kt()({GIFT_SUB:null,GIFT_CARD:null,PAID:null,PROMO_REDEMPTION:null,COMP:null,TEMP:null,INITIAL:null,RECURRING:null,PLAN_SWITCHED:null,OTHER:null}),Up=kt()({D2C:null,IAP:null,CST:null,EXT:null,MVPD:null,OPS:null}),Gp=kt()({BAM_IDENTITY:null,BEARER:null,EXTERNAL_IDENTITY:null});function zp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const qp={unknown:"UNKNOWN",active:"ACTIVE",inactive:"INACTIVE"};function Kp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const Hp={other:"other",voluntaryCancel:"VOLUNTARY_CANCEL",involuntaryCancel:"INVOLUNTARY_CANCEL",unknownCancel:"UNKNOWN_CANCEL",abuseRevocation:"ABUSE_REVOCATION",planSwitched:"PLAN_SWITCHED"},Yp={other:"other",grace:"GRACE",billingHold:"BILLING_HOLD"};function Xp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const Zp={SubscriptionStatus:gp,SubscriptionClient:Np,SubscriptionExpiryType:Fp,SubscriptionSourceSubType:Bp,SubscriptionSourceType:Up,SubscriptionClientEndpoint:jp,SubscriptionStatusSubType:pp,SubscriptionStatusType:hp,SubscriptionType:Gp,SubscriptionOffer:function(){function e(t){zp(this,e);var r={options:n.Types.object({campaignCode:n.Types.nonEmptyString.optional,voucherCode:n.Types.nonEmptyString.optional})};n.typecheck.warn(this,r,arguments);var o=t.campaignCode,i=t.voucherCode;this.campaignCode=o,this.voucherCode=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionOffer"}}])&&Vp(t.prototype,r),o&&Vp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),SubscriptionFreeTrial:function(){function e(t){Kp(this,e);var r={options:n.Types.object({status:n.Types.nonEmptyString,endDate:n.Types.dateString.optional})};n.typecheck.warn(this,r,arguments);var o=t.status,i=t.endDate;this.status=qp[o.toLowerCase()]||qp.unknown,this.endDate=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionFreeTrial"}}])&&Wp(t.prototype,r),o&&Wp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),SubscriptionFreeTrialStatus:qp,SubscriptionCancellation:function(){function e(t){Xp(this,e);var r={options:n.Types.object({reason:n.Types.nonEmptyString,status:n.Types.nonEmptyString.optional})};n.typecheck.warn(this,r,arguments);var o=t.reason,i=t.status,a=Object.keys(Hp).find((function(e){return Hp[e]===o})),c=Object.keys(Yp).find((function(e){return Yp[e]===i}));this.reason=Hp[a]||Hp.unknown,this.status=Yp[c]}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Subscription.SubscriptionCancellation"}}])&&Jp(t.prototype,r),o&&Jp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),SubscriptionCancellationReason:Hp,SubscriptionCancellationStatus:Yp,ProductRule:function(){function e(t){$p(this,e);var r={ruleObj:n.Types.object({description:n.Types.string.optional,id:n.Types.string.optional})};n.typecheck.warn(this,r,arguments);var o=t.description,i=t.id;this.description=o,this.id=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Subscription.ProductRule"}}])&&Qp(t.prototype,r),o&&Qp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),BundleType:vp},eh={Bam:{OneTimePasscodeRequestReason:{authenticate:"Login",forgotPassword:"ForgotPassword",changeEmail:"ChangeEmail",changePassword:"ChangePassword"}}};function th(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"Configuration",get:function(){return fo}},{key:"Exception",get:function(){return Se}},{key:"GraphQl",get:function(){return na}},{key:"Internal",get:function(){return jl}},{key:"Logging",get:function(){return wt}},{key:"Identity",get:function(){return eh}},{key:"Orchestration",get:function(){return ks}},{key:"QualityOfService",get:function(){return rp}},{key:"Session",get:function(){return np}},{key:"Socket",get:function(){return op}},{key:"Subscriber",get:function(){return fp}},{key:"Subscription",get:function(){return Zp}},{key:"Token",get:function(){return Wi}},{key:"Util",get:function(){return Ve}},{key:"HttpClient",get:function(){return Dt.HttpClient}},{key:"Storage",get:function(){return Dt.Storage}},{key:"ServiceEndpoint",get:function(){return $n}},{key:"HttpMethod",get:function(){return Xt}}],(r=null)&&th(t.prototype,r),n&&th(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ih=rh.Configuration.ConfigurationClientConfiguration,ah=rh.Configuration.ConfigurationClientExtrasMap,ch=rh.Configuration.ConfigurationHostName,sh=rh.ServiceEndpoint,uh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];nh(this,e);var r={isFallback:n.Types.boolean};(0,n.typecheck)(this,r,arguments);var o=ch.prod,i={dev:{baseUrl:"https://dev-bam-sdk-configs.bamgrid.com/bam-sdk"},prod:{baseUrl:"https://bam-sdk-configs.bamgrid.com/bam-sdk"},staging:{baseUrl:"https://staging-bam-sdk-configs.bamgrid.com/bam-sdk"}},a="\n            {baseUrl}/\n            v{configVersion}/\n            {clientId}/{deviceFamily}/v{sdkVersion}/\n            {deviceProfile}/{applicationRuntime}/{environment}.json\n        ".replace(/(?:\n\s+)/g,"");t&&(a=a.replace(/\{deviceProfile\}/gi,"default").replace(/\{applicationRuntime\}/gi,"browser"));var c={Accept:"application/json","Content-Type":"application/json"},s={bootstrap:new sh("bootstrap",a,0,30,!0,null,c)};this.defaultConfigHostName=o,this.client=new ih(new ah(i),o,s)}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Configuration.EmbeddedConfiguration"}}])&&oh(t.prototype,r),o&&oh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lh(e){return lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(e)}function fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ph(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hh(){hh=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==lh(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function dh(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function yh(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){dh(i,n,o,a,c,"next",e)}function c(e){dh(i,n,o,a,c,"throw",e)}a(void 0)}))}}function gh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bh=rh.Util,mh=rh.Configuration.BootstrapConfiguration,wh=rh.Configuration.SdkSessionConfiguration,Sh=rh.Configuration.ConfigurationClient,kh=rh.Internal.Dust.DustLogUtility,xh=rh.Internal.Dust.DustUrnReference.configuration.configurationManager,Eh=rh.Configuration.PlatformProfileReference,Oh=function(){function e(t,r,o){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;gh(this,e);var c={bootstrapConfiguration:n.Types.instanceStrict(mh),logger:n.Types.instanceStrict(wt.Logger),httpClient:n.Types.instanceStrict(Yt),storage:n.Types.instanceStrict(rh.Storage).optional};(0,n.typecheck)(this,c,arguments),this.bootstrapConfiguration=t,this.logger=r,this.httpClient=o,this.storage=a||new rh.Storage(r),this.environmentConfiguration=e.createEnvironmentConfiguration(this.bootstrapConfiguration),this.configurationClientConfiguration=e.getClientConfiguration(),this.client=new Sh(this.configurationClientConfiguration,this.logger,this.httpClient),this.cacheKey="\n            __bam_sdk_sdkSession_configuration--\n            ".concat(this.bootstrapConfiguration.clientId,"_\n            ").concat(this.bootstrapConfiguration.environment,"\n        ").replace(/(?:\n\s+)/g,""),this.dustEnabled=bh.getSafe((function(){return i.client.dustEnabled})),this.logger.log(this.toString(),"Created.")}var t,r,o,i,a,c;return t=e,r=[{key:"getConfiguration",value:(c=yh(hh().mark((function t(r){var n,o,i,a,c,s,u,l,f,p,h;return hh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.client,o=this.cacheKey,i=this.dustEnabled,a=this.storage,c=this.logger,s=this.bootstrapConfiguration,u=this.environmentConfiguration,l=new kh({dustEnabled:i,logger:c,source:this.toString(),urn:xh.getConfiguration,skipLogTransaction:!0}),c.info(this.toString(),'Getting configuration:\n            clientId: "'.concat(s.clientId,'",\n            environment: "').concat(s.environment,'",\n            deviceFamily: "').concat(u.deviceFamily,'",\n            sdkVersion: "').concat(u.sdkVersion,'",\n            configVersion: "').concat(u.configVersion,'",\n            configHostName: "').concat(s.configHostName,'",\n            configHostOverride: "').concat(s.configHostOverride,'",\n            applicationRuntimeOverride: "').concat(s.applicationRuntimeOverride,'",\n            deviceProfileOverride: "').concat(s.deviceProfileOverride,'",\n            configHostUrlOverride: "').concat(s.configHostUrlOverride,'"\n        ').replace(/(\s(?=\s))/g,"")),t.prev=4,t.next=7,n.getConfiguration(s,u,r);case 7:return f=t.sent,c.log(e.name,"Successfully fetched configuration."),t.prev=9,t.next=12,this.cacheConfiguration(f);case 12:t.next=19;break;case 14:t.prev=14,t.t0=t.catch(9),c.log(this.toString(),"Failed to cache sdkSessionConfiguration"),c.error(this.toString(),t.t0),l.captureErrors(t.t0);case 19:return t.abrupt("return",f);case 22:return t.prev=22,t.t1=t.catch(4),c.error(this.toString(),"Unable to get configuration."),c.log(this.toString(),'Loading from storage, cache key: "'.concat(o,'".')),l.captureErrors(t.t1),t.prev=27,t.next=30,a.get(o);case 30:return p=t.sent,h=new wh(p),t.abrupt("return",h);case 35:return t.prev=35,t.t2=t.catch(27),c.error(this.toString(),"Unable to fetch cached configuration."),t.next=40,this.getFallbackConfiguration(r);case 40:return t.abrupt("return",t.sent);case 41:return t.prev=41,l.log(),t.finish(41);case 44:case"end":return t.stop()}}),t,this,[[4,22,41,44],[9,14],[27,35]])}))),function(e){return c.apply(this,arguments)})},{key:"cacheConfiguration",value:(a=yh(hh().mark((function t(r){var n,o;return hh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.cacheKey,o=this.storage,this.logger.log(e.name,'Adding configuration to Storage, cache key: "'.concat(n,'".')),t.next=4,o.set(n,r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFallbackConfiguration",value:(i=yh(hh().mark((function t(r){var n,o,i,a,c,s;return hh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.bootstrapConfiguration,o=this.environmentConfiguration,i=this.logger,a=this.httpClient,c=new uh(!0),s=new Sh(c.client,i,a),i.log(e.name,"Fetching fallback configuration."),t.next=7,s.getConfiguration(n,o,r);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Configuration.ConfigurationManager"}}],o=[{key:"loadEmbeddedConfiguration",value:function(){return new uh(!1)}},{key:"createEnvironmentConfiguration",value:function(e){var t=e.applicationRuntimeOverride,r=e.deviceProfileOverride,n=e.platform,o=Eh[n],i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fh(Object(r),!0).forEach((function(t){ph(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({applicationRuntimeOverride:t,deviceProfileOverride:r,applicationVersion:bh.getSafe((function(){return e.application.version}))},o);return new Dt.EnvironmentConfiguration(i)}},{key:"getClientConfiguration",value:function(){return e.loadEmbeddedConfiguration().client}}],r&&vh(t.prototype,r),o&&vh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Th={ConfigurationManager:Oh,EmbeddedConfiguration:uh};var Ph="(",jh=")",_h="|",Ah="desktop",Ch="(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)",Rh="\\((bb)(10);|(blackberry)\\w*\\/?([\\w\\.]+)*|Rim",Dh="(android)[\\/\\s-]?([\\w\\.]+)*",Ih="(windows\\sphone(?:\\sos)*|windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)",Lh="(Linux)(?!.*(?:Android|Tizen|CrKey|Tivo|Web[0|O]S))[\\/\\s]([\\w\\.]+)",Mh="(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*",Nh="(cros)\\s[\\w]+\\s([\\w\\.]+\\w)",Fh="Trident(?:.*?Touch(?:.*?Mobile))",Bh="(CrKey)[\\/\\s]([\\w\\.]+)",Uh="(Tesla|QtCarBrowser)",Gh="(NetCast)[\\/\\s]([\\w\\.]+)",zh="(Viera)[\\/\\s]([\\w\\.]+)",Vh="(SonyCEBrowser)[\\/\\s]([\\w\\.]+)",qh="(Tizen)[\\/\\s]([\\w\\.]+)",Kh="(Web[0|O]S)(?!Linux)[\\/\\s-]?([\\w\\.]+)*",Wh="(?:"+[Mh,Ih,Lh,Nh].join(_h)+"(?!.*(Tizen|SMART-TV|Tivo|Web[0|O]S))"+jh,Hh={desktop:"desktop",other:Ah,phone:"phone",tablet:"tablet",smarttv:"smarttv",connecteddevice:"connecteddevice"};function Yh(e,t){return new RegExp(e,t||"i")}var Xh=[{family:"microsoft",regExes:[Yh("(edg/)"),Yh("[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]"),Yh("(windows\\sphone|windows\\smobile|windows)(?!.*(?:xbox|WPDesktop))"),Yh("(?:windows).+(WPDesktop)")],groupIndex:1,done:function(e){return"edg/"===(e=e.toLowerCase())?e="chromium":-1!==["windows","windows phone","windows mobile","wpdesktop"].indexOf(e)&&(e="windows"),e}},{family:"apple",regExes:[Yh(Ch),Yh(Mh)],groupIndex:1},{family:"amazon",regExes:[Yh("(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\/")],groupIndex:1,done:function(e){return"kftt"===e.toLowerCase()&&(e="kindle fire"),e}},{family:"samsung",regExes:[Yh("(?:Smart-TV|Linux).+(Tizen).+(?:TV)?"),Yh("(?:Smart-TV).+(Maple)"),Yh("((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-n900))")],groupIndex:1,done:function(e){return e=e.toLowerCase(),/^(s[cgp]h-|gt-|galaxy\snexus|sm-n)/gi.test(e)?e="galaxy":"tizen"===e&&(e="tizenbrowser"),e}},{family:"google",regExes:[Yh(Bh),Yh(Nh)],groupIndex:1,done:function(e){return"crkey"===(e=e.toLowerCase())?e="chromecast":"cros"===e&&(e="chromium"),e}},{family:"blackberry",regExes:[Yh("(PlayBook|Blackberry 9900|BB10)")],groupIndex:1,done:function(e){return"blackberry 9900"===(e=e.toLowerCase())&&(e="bold"),e}},{family:"tesla",regExes:[Yh(Uh)],groupIndex:1},{family:"sony",regExes:[Yh("(SonyCEBrowser)")],groupIndex:1,done:function(e){return"sonycebrowser"===(e=e.toLowerCase())&&(e="sonybraviabrowser"),e}},{family:"panasonic",regExes:[Yh("(Viera)")],groupIndex:1,done:function(e){return"viera"===(e=e.toLowerCase())&&(e="panasonictvbrowser"),e}},{family:"lg",regExes:[Yh("(Web[0|O]S).*(?:SmartTV)"),Yh("(NetCast).*(?:TV)")],groupIndex:1,done:function(e){return"web0s"===(e=e.toLowerCase())||"webos"===e?e="webosbrowser":"netcast"===e&&(e="netcastbrowser"),e}},{family:"linux",regExes:[Yh(Lh)],groupIndex:1}],Jh={IOS:Yh(Ch),WINDOWSPHONE:Yh([Fh,"windows phone","WPDesktop"].join(_h)),WINDOWS:Yh(Ih),ANDROID:Yh(Dh),MACINTOSH:Yh(Mh),CHROMECAST:Yh(Bh),CHROMEBOOK:Yh(Nh),BLACKBERRY:Yh(Rh),TESLA:Yh(Uh),TIZEN:Yh(qh),NETCAST:Yh(Gh),PANASONICTV:Yh(zh),SONYBRAVIA:Yh(Vh),WEBOS:Yh(Kh),LINUX:Yh(Lh)},$h={IOS:Yh(Ch),WINDOWSPHONE:Yh(Ih),WINDOWS:Yh(Ih),ANDROID:Yh(Dh),MACINTOSH:Yh(Mh),CHROMECAST:Yh(Bh),CHROMEBOOK:Yh(Nh),BLACKBERRY:Yh(Rh),TESLA:Yh(Uh),TIZEN:Yh(qh),NETCAST:Yh(Gh),PANASONICTV:Yh(zh),SONYBRAVIA:Yh(Vh),WEBOS:Yh(Kh),LINUX:Yh(Lh)},Qh={ANDROID:Yh("(?:android).+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)"),MSIE:[Yh("(?:ms|\\()(?:ie)[\\/\\s]([\\w\\.]+)"),Yh("(?:trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko")],EDGE:Yh("(?:edge|edg)\\/((\\d+)?[\\w\\.]+)"),CHROME:[Yh("(?:chrome)\\/v?([\\w\\.]+)"),Yh("(?:(?:android.+)crmo|crios)\\/([\\w\\.]+)")],FIREFOX:Yh("(?:firefox|FxiOS)\\/([\\w\\.-]+)"),OPERA:[Yh("(?:opera(?!.*?mini)\\s[mobiletab]+).+version\\/([\\w\\.-]+)"),Yh("(?:opera(?!.*?mini)).+version\\/([\\w\\.]+)"),Yh("(?:opera(?!.*?mini))[\\/\\s]+([\\w\\.]+)"),Yh("(?:OPiOS)[\\/\\s]+([\\w\\.]+)")],OPERAMINI:Yh("(?:opera\\smini)\\/([\\w\\.-]+)"),SILK:Yh("(?:silk)\\/([\\w\\.-]+)"),SAFARI:Yh("version\\/([\\w\\.]+).+?(?:mobile\\s?safari|safari)"),PHANTOMJS:Yh("(?:PhantomJS)\\/([\\w\\.-]+)")},Zh={WEBKIT:Yh("AppleWebKit"),GECKO:Yh("gecko"),TRIDENT:Yh("trident"),EDGE:Yh("Edge")},ed={default:{tablet:Yh(Ph+["Tablet|iPad","\\sNT.*?"+Fh,Dh+"(?!.*Mobi)","silk",Rh+".*?Tablet"].join(_h)+jh),phone:Yh(Ph+["Mobi|Mobile",Ch,Fh,Rh].join(_h)+jh),smarttv:Yh(Ph+["Tizen","SMART-TV","SmartTV","NetCast","Viera"].join(_h)+jh),connecteddevice:Yh(Ph+["CrKey","Tivo","SonyCEBrowser"].join(_h)+jh),desktop:Yh(Wh)},ms:{tablet:Yh(Ph+["Tablet|iPad","\\sNT.*?"+Fh,Dh+"(?!.*Mobi)","silk",Rh+".*?Tablet","xbox"].join(_h)+jh),phone:Yh(Ph+["Mobi|Mobile","WPDesktop",Ch,Fh,Rh].join(_h)+jh),smarttv:Yh(Ph+["Tizen","SMART-TV","NetCast","Viera"].join(_h)+jh),connecteddevice:Yh(Ph+["Xbox","CrKey","Tivo","SonyCEBrowser"].join(_h)+jh),desktop:Yh("(?:Windows NT(?!.*WPDesktop)(?!.*Xbox))")}};const td={constants:{OPEN:Ph,CLOSE:jh,CASE:"i",PIPE:_h,OTHER:Ah,VERSION:"version",FORMFACTORS:Hh},re:Yh,devices:Xh,platforms:Jh,platformVersion:$h,browser:Qh,browserCore:Zh,formFactor:ed};var rd={},nd=td.constants.OTHER,od=td.constants.VERSION,id=td.constants.FORMFACTORS;function ad(e){var t=e.split(/[._]/).slice(0,3);return e&&t.length<2&&t.push(0),t.join(".")}function cd(e){return e=e||window.navigator.userAgent,rd[e]?rd[e]:this instanceof cd?(rd[e]=this,this.userAgent=e,this.is={},this.details=this.getDeviceDetails(),this.platform=this.getPlatform(),this.platformVersion=this.getPlatformVersion(),this.browser=this.getBrowser(),this.browserVersion=this.getBrowserVersion(),this.formFactor=this.getFormFactor(),void(this.browserLanguage=this.getBrowserLanguage())):new cd(e)}cd.prototype={getBrowserLanguage:function(){for(var e,t=["language","browserLanguage","systemLanguage","userLanguage"],r=0;r<t.length;r++)if(e=window.navigator[t[r]])return e;return null},getDeviceDetails:function(){for(var e=null,t=0;t<td.devices.length;t++){for(var r=td.devices[t],n=0;n<r.regExes.length;n++){var o=r.regExes[n],i=this.match(o,r.groupIndex);if(i){r.done&&(i=r.done(i)),e={family:r.family,name:i.toLowerCase().replace(/(\s|-|_)/gi,"")};break}}if(e)break}return e||{family:"default",name:"default"}},getPlatform:function(){return this.test(td.platforms)||nd},getPlatformVersion:function(){var e,t="";switch(this.platform&&this.platform!==nd&&(t=this.match(td.platformVersion[this.platform.toUpperCase()],2)||od),!0){case this.is.android:case this.is.ios:case this.is.macintosh:t=ad(t);break;case this.is.windows:case this.is.windowsphone:t={"NT 6.0":"vista","NT 6.1":"7.0","NT 6.2":"8.0","NT 6.3":"8.1","NT 6.4":"10.0","NT 10.0":"10.0"}[e=t]||e}return t},getBrowser:function(){return this.test(td.browserCore),this.test(td.browser)||nd},getBrowserVersion:function(){var e="";if(this.browser){var t=td.browser[this.browser.toUpperCase()];if(t)if(Array.isArray(t))for(var r=0;r<t.length&&""===(e=this.match(t[r],1));r++);else e=this.match(t,1)}return ad(e)},getFormFactor:function(){var e="",t=id;return e=this.is.msie?td.formFactor.ms:td.formFactor.default,t[this.test(e)]||t.other},match:function(e,t){var r=function(e,t){return e&&t?e[t]:e}(e.exec(this.userAgent),t)||"";return r},test:function(e){var t,r,n=this.userAgent,o="";for(t in e){var i=e[t];if(Array.isArray(i))for(var a=0;a<i.length&&!(r=i[a].test(n));a++);else r=i.test(n);t=t.toLowerCase(),this.is[t]=this.is[t]||r&&!o,r&&!o&&(o=t)}return o},toString:function(){return"SDK.Services.Providers.Device"}};const sd=cd,ud={amazonAdvertisingId:"amazon.advertising.id",androidAdvertisingId:"android.advertising.id",androidDrmId:"android.drm.id",androidVendorId:"android.vendor.id",appleAdvertisingId:"apple.advertising.id",appleVendorId:"apple.vendor.id",chromecastDeviceId:"chromecast.device.id",playstationDeviceId:"playstation.device.id",rokuAdvertisingId:"roku.advertising.id",tizenDeviceId:"tizen.device.id",unknown:"unknown",webosDeviceId:"webos.device.id",windowsAdvertisingId:"windows.advertising.id",windowsHardwareId:"windows.hardware.id",xboxAdvertisingId:"xbox.advertising.id",xboxHardwareId:"xbox.hardware.id"};function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pd=function(){function e(t){ld(this,e);var r={options:n.Types.object({identifier:n.Types.nonEmptyString.optional,type:n.Types.in(ud).optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.identifier,a=o.type;n.Check.assigned(i)&&(this.identifier=i),n.Check.assigned(a)&&(this.type=a)}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Device.OsDeviceId"}}])&&fd(t.prototype,r),o&&fd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hd(Object(r),!0).forEach((function(t){yd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bd=function(){function e(t){gd(this,e);var r={options:n.Types.object({osDeviceIds:n.Types.array.of.instanceStrict(pd).optional,manufacturer:n.Types.string.optional,model:n.Types.string.optional,operatingSystem:n.Types.string.optional,operatingSystemVersion:n.Types.string.optional,browserName:n.Types.string.optional,browserVersion:n.Types.string.optional,deviceLanguage:n.Types.string.optional,modelFamily:n.Types.string.optional,passwordResetRequired:n.Types.boolean.optional}).optional};(0,n.typecheck)(this,r,arguments);var o=t||{},i=o.osDeviceIds,a=o.manufacturer,c=o.model,s=o.operatingSystem,u=o.operatingSystemVersion,l=o.browserName,f=o.browserVersion,p=o.deviceLanguage,h=o.modelFamily,d=o.passwordResetRequired;this.osDeviceIds=i||[],this.manufacturer=a||null,this.model=c||null,this.operatingSystem=s||"n/a",this.operatingSystemVersion=u||"n/a",this.browserName=l||null,this.browserVersion=f||null,this.deviceLanguage=p||null,this.modelFamily=h||null,this.passwordResetRequired=d||!1}var t,r,o;return t=e,o=[{key:"normalizeAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.manufacturer,r=e.operatingSystem,n=e.operatingSystemVersion;return dd(dd({},e),{},{manufacturer:t||"n/a",operatingSystem:r||"n/a",operatingSystemVersion:n||"n/a"})}}],(r=[{key:"toString",value:function(){return"SDK.Device.DeviceAttributes"}}])&&vd(t.prototype,r),o&&vd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Sd=function(){function e(t){md(this,e);var r={logger:n.Types.instanceStrict(wt.Logger).optional};(0,n.typecheck)(this,r,arguments),this.logger=t||wt,this.logger.log(this.toString(),"Created provider")}var t,r,o;return t=e,o=[{key:"validateAttributes",value:function(t){var r={attributes:n.Types.instanceStrict(bd)};(0,n.typecheck)(e,"validateAttributes",r,[t],we)}}],(r=[{key:"getDeviceAttributes",value:function(){}},{key:"toString",value:function(){return"SDK.Device.DeviceAttributeProvider"}}])&&wd(t.prototype,r),o&&wd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kd(e){return kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(e)}function xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Od(e,t){return Od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Od(e,t)}function Td(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_d(e);if(t){var o=_d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Pd(this,r)}}function Pd(e,t){if(t&&("object"===kd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jd(e)}function jd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _d(e){return _d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_d(e)}var Ad=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Od(e,t)}(a,e);var t,r,o,i=Td(a);function a(e,t){var r;xd(this,a),r=i.call(this,e);var o={logger:n.Types.instanceStrict(wt.Logger).optional,userAgent:n.Types.nonEmptyString.optional};return(0,n.typecheck)(jd(r),o,arguments),r.device=new sd(t),r}return t=a,(r=[{key:"getDeviceAttributes",value:function(){var e=this.device;return new bd({osDeviceIds:[],manufacturer:e.details.family,operatingSystem:e.platform,operatingSystemVersion:e.platformVersion,browserName:e.browser||null,browserVersion:e.browserVersion||null,deviceLanguage:e.browserLanguage})}},{key:"toString",value:function(){return"SDK.Device.BrowserDeviceAttributeProvider"}}])&&Ed(t.prototype,r),o&&Ed(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Sd);function Cd(e){return Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(e)}function Rd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Id(e,t){return Id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Id(e,t)}function Ld(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Fd(e);if(t){var o=Fd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Md(this,r)}}function Md(e,t){if(t&&("object"===Cd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nd(e)}function Nd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fd(e){return Fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fd(e)}var Bd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Id(e,t)}(a,e);var t,r,o,i=Ld(a);function a(e,t){var r;Rd(this,a),r=i.call(this);var o={storage:n.Types.instanceStrict(vc),logger:n.Types.instanceStrict(wt.Logger)};return(0,n.typecheck)(Nd(r),o,arguments),r.storage=e,r.accessToken=r.getAccessToken(),r.logger=t,r.logger.log(r.toString(),"Created."),r}return t=a,(r=[{key:"getAccessToken",value:function(){var e=this.storage.getAccess();if(n.Check.not.assigned(e))return null;var t=new Oc(e.context.token,e.context.region);return this.accessToken=t,this.accessToken}},{key:"getAccessContext",value:function(){var e=this.storage,t=e&&e.getAccess();return n.Check.not.assigned(t)?null:t.context}},{key:"hasTokenChanged",value:function(e){var t=this.accessToken;return!!(n.Check.assigned(t)&&n.Check.assigned(e)&&n.Check.not.equal(t.token,e.token))}},{key:"toString",value:function(){return"SDK.Token.AccessTokenProvider"}}])&&Dd(t.prototype,r),o&&Dd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(ca());function Ud(e){return Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(e)}function Gd(){Gd=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ud(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function zd(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Vd(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){zd(i,n,o,a,c,"next",e)}function c(e){zd(i,n,o,a,c,"throw",e)}a(void 0)}))}}function qd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wd=rh.Configuration.OrchestrationManagerConfiguration,Hd=rh.Orchestration.OrchestrationClient,Yd=function(){function e(t){qd(this,e);var r={options:n.Types.object({config:n.Types.instanceStrict(Wd),client:n.Types.instanceStrict(Hd),accessTokenProvider:n.Types.instanceStrict(Bd),logger:n.Types.instanceStrict(wt.Logger)})};(0,n.typecheck)(this,r,arguments);var o=t.config,i=t.client,a=t.accessTokenProvider,c=t.logger;this.config=o,this.client=i,this.accessTokenProvider=a,this.logger=c,this.logger.log(this.toString(),"Created.")}var t,r,o,i,a,c,s,u;return t=e,r=[{key:"query",value:(u=Vd(Gd().mark((function e(t,r){var n;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Ic(t),e.next=3,this.client.query({request:n,accessToken:this.accessToken,logTransaction:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"registerDevice",value:(s=Vd(Gd().mark((function e(t,r){var n,o,i,a,c,s,u,l,f,p,h,d,y;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.deviceFamily,o=t.applicationRuntime,i=t.deviceProfile,a=t.attributes,c=a.osDeviceIds,s=a.manufacturer,u=a.model,l=a.operatingSystem,f=a.operatingSystemVersion,p=a.browserName,h=a.browserVersion,d=a.deviceLanguage,y=new ts({deviceFamily:n,applicationRuntime:o,deviceProfile:i,deviceLanguage:d,attributes:{osDeviceIds:c,manufacturer:s,model:u,operatingSystem:l,operatingSystemVersion:f,browserName:p,browserVersion:h}}),e.next=6,this.client.registerDevice(y,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"updateDeviceOperatingSystem",value:(c=Vd(Gd().mark((function e(t,r){var n,o,i,a,c=this;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==Le((function(){return c.config.extras.enableUpdateDeviceOS}),!1)){e.next=4;break}return this.logger.info(this.toString(),"Skipped updateDeviceOperatingSystem per config setting"),e.abrupt("return",void 0);case 4:return n=t.operatingSystem,o=t.operatingSystemVersion,i=t.osDeviceIds,a=new Ss({operatingSystem:n,operatingSystemVersion:o,osDeviceIds:i}),e.next=9,this.client.query({request:a,accessToken:this.accessToken,logTransaction:r});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"exchangeDeviceGrantForAccessToken",value:(a=Vd(Gd().mark((function e(t,r){var n,o;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={deviceGrant:t.assertion},o=new Gc(n),e.next=4,this.client.exchangeDeviceGrantForAccessToken(o,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"refreshToken",value:(i=Vd(Gd().mark((function e(t){var r,n,o,i;return Gd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.refreshToken,n=t.reason,o=t.logTransaction,i=new Yc({refreshToken:r}),e.next=5,this.client.refreshToken({request:i,reason:n,logTransaction:o});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"accessToken",get:function(){return this.accessTokenProvider.getAccessToken()}},{key:"toString",value:function(){return"SDK.Orchestration.OrchestrationManager"}}],r&&Kd(t.prototype,r),o&&Kd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $d=function(){function e(t){Xd(this,e);var r={options:n.Types.object({deviceFamily:n.Types.nonEmptyString,applicationRuntime:n.Types.nonEmptyString,deviceProfile:n.Types.nonEmptyString,attributes:n.Types.instanceStrict(bd)})};(0,n.typecheck)(this,r,arguments);var o=t.deviceFamily,i=t.applicationRuntime,a=t.deviceProfile,c=t.attributes;this.deviceFamily=o,this.applicationRuntime=i,this.deviceProfile=a,this.attributes=c||{}}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Device.DeviceMetadata"}}])&&Jd(t.prototype,r),o&&Jd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qd(e){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(e)}function Zd(){Zd=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Qd(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function ey(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function ty(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ey(i,n,o,a,c,"next",e)}function c(e){ey(i,n,o,a,c,"throw",e)}a(void 0)}))}}function ry(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ny(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oy=function(){function e(t){ry(this,e);var r={options:n.Types.object({logger:n.Types.instanceStrict(wt.Logger),deviceGrantStorage:n.Types.instanceStrict(sc),environmentConfiguration:n.Types.instanceStrict(Dt.EnvironmentConfiguration),deviceAttributeProvider:n.Types.instanceStrict(Sd),orchestrationManager:n.Types.instanceStrict(Yd),tokenUpdater:n.Types.instanceStrict(Mt)})};(0,n.typecheck)(this,r,arguments);var o=t.logger,i=t.deviceGrantStorage,a=t.environmentConfiguration,c=t.deviceAttributeProvider,s=t.orchestrationManager,u=t.tokenUpdater;this.logger=o,this.deviceGrantStorage=i,this.environmentConfiguration=a,this.deviceAttributeProvider=c,this.orchestrationManager=s,this.tokenUpdater=u,this.logger.log(this.toString(),"Created.")}var t,r,o,i,a;return t=e,r=[{key:"getDeviceGrant",value:(a=ty(Zd().mark((function e(t){var r;return Zd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.deviceGrantStorage.getDeviceGrant(),!n.Check.assigned(r)){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,this.createDeviceGrant(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"createDeviceGrant",value:(i=ty(Zd().mark((function e(t){var r,n,o,i,a,c,s,u,l,f,p,h;return Zd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.deviceGrantStorage,n=this.deviceAttributeProvider,o=this.logger,i=this.environmentConfiguration,a=i.deviceFamily,c=i.applicationRuntime,s=i.deviceProfile,u=n.getDeviceAttributes(),Sd.validateAttributes(u),l=new $d({deviceFamily:a,applicationRuntime:c,deviceProfile:s,attributes:u}),e.prev=6,f=this.orchestrationManager.registerDevice(l,t),this.tokenUpdater.currentTokenRefreshPromise=f,e.next=11,f;case 11:return p=e.sent,h=p.extensions.deviceGrant,o.info(this.toString(),"DeviceGrant Created"),e.next=16,r.saveDeviceGrant(h);case 16:return e.abrupt("return",h);case 19:throw e.prev=19,e.t0=e.catch(6),e.t0;case 22:return e.prev=22,this.tokenUpdater.currentTokenRefreshPromise=null,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[6,19,22,25]])}))),function(e){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Device.DeviceManager"}}],r&&ny(t.prototype,r),o&&ny(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const iy={BrowserDeviceAttributeProvider:Ad,DeviceAttributes:bd,DeviceAttributeProvider:Sd,DeviceManager:oy,DeviceMetadata:$d,OsDeviceId:pd,OsDeviceIdType:ud};function ay(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sy=function(){function e(t,r){ay(this,e);var o={longitude:n.Types.number,latitude:n.Types.number};(0,n.typecheck)(this,o,arguments),this.longitude=t,this.latitude=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Token.GeoLocation"}}])&&cy(t.prototype,r),o&&cy(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uy(e){return uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(e)}function ly(){ly=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==uy(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function fy(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function py(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dy=function(){function e(t){py(this,e);var r={logger:n.Types.instanceStrict(wt.Logger).optional};(0,n.typecheck)(this,r,arguments),this.logger=t||wt,this.logger.log(this.toString(),"Created GeoProvider.")}var t,r,o,i,a;return t=e,r=[{key:"getGeoLocation",value:(i=ly().mark((function e(t){return ly().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new sy(0,0));case 1:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){fy(o,r,n,a,c,"next",e)}function c(e){fy(o,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Providers.DefaultGeoProvider"}}],r&&hy(t.prototype,r),o&&hy(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const yy={setProviders:function(e){dy=e.GeoProvider},get GeoProvider(){if(!dy)throw new Error("GeoProvider provider not specified");return dy}};function gy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vy,by,my=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"version",get:function(){return vy}},{key:"versionShort",get:function(){return by}},{key:"setVersion",value:function(e){by=(vy=e||"15.0.0").replace(/^(\d+\.)?(\d+).(.*)/,"$1$2")}}],(r=null)&&gy(t.prototype,r),n&&gy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}my.setVersion(void 0);var ky=function(){function e(t,r,o){wy(this,e);var i={token:n.Types.nonEmptyString,refreshToken:n.Types.nonEmptyString,contextState:n.Types.instanceStrict(fc)};(0,n.typecheck)(this,i,arguments),this.token=t,this.refreshToken=r,this.contextState=o}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Token.AccessStateData"}}])&&Sy(t.prototype,r),o&&Sy(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ey(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Oy=function(){function e(t,r){xy(this,e);var o={version:n.Types.nonEmptyString,data:n.Types.instanceStrict(ky)};(0,n.typecheck)(this,o,arguments),this.version=t,this.data=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Token.AccessState"}}])&&Ey(t.prototype,r),o&&Ey(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ty(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jy=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ty(this,e),this.error=t,this.hasResetToAnonymousToken=r}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.Token.TokenRefreshFailure"}}])&&Py(t.prototype,r),n&&Py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ay=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.accessToken=t}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"SDK.AccessChangedEvent"}}])&&_y(t.prototype,r),n&&_y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cy(e){return Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(e)}function Ry(){Ry=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Cy(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Dy(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Iy(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Dy(i,n,o,a,c,"next",e)}function c(e){Dy(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Ly(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function My(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ny(e,t){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ny(e,t)}function Fy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gy(e);if(t){var o=Gy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return By(this,r)}}function By(e,t){if(t&&("object"===Cy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uy(e)}function Uy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gy(e)}var zy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ny(e,t)}(d,e);var t,r,o,i,a,c,s,u,l,f,p,h=Fy(d);function d(e){var t;Ly(this,d);var r=e||{},o=r.storage,i=r.logger;t=h.call(this,o,i);var a={options:n.Types.object({apiKey:n.Types.nonEmptyString,tokenManagerConfiguration:n.Types.instanceStrict(zn),tokenClient:n.Types.instanceStrict(Ki),geoProvider:n.Types.instanceStrict(yy.GeoProvider).optional,logger:n.Types.instanceStrict(wt.Logger),storage:n.Types.instanceStrict(vc),deviceManager:n.Types.instanceStrict(oy),deviceGrantStorage:n.Types.instanceStrict(sc),orchestrationManager:n.Types.instanceStrict(Yd),refreshSessionInfo:n.Types.function})};(0,n.typecheck)(Uy(t),a,arguments);var c=e.apiKey,s=e.tokenManagerConfiguration,u=e.tokenClient,l=e.geoProvider,f=void 0===l?null:l,p=e.deviceManager,y=e.deviceGrantStorage,g=e.orchestrationManager,v=e.refreshSessionInfo;return t.apiKey=c,t.config=s,t.client=u,t.geoProvider=f||new yy.GeoProvider(i),t.logger=i,t.deviceManager=p,t.orchestrationManager=g,t.refreshSessionInfo=v,t.deviceGrantStorage=y,t.refreshTimeoutId=-1,t.retryAttempt=0,t.retryDelay=-1,t.currentTokenRefreshPromise=null,t.logger.log(t.toString(),"Created"),t}return t=d,r=[{key:"currentTokenRefreshPromise",get:function(){return this._currentTokenRefreshPromise},set:function(e){this._currentTokenRefreshPromise=e}},{key:"exchangeGrant",value:(p=Iy(Ry().mark((function e(t,r,o){var i,a,c=this;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.Check.instanceStrict(t,pi)){e.next=6;break}return e.next=4,this.orchestrationManager.exchangeDeviceGrantForAccessToken(t,o);case 4:e.next=10;break;case 6:return i=Le((function(){return c.config.extras.subjectTokenTypes[t.subjectTokenTypeKey]})),a=new Li(t,i),e.next=10,this.exchangeRequest(a,r,o);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"exchangeRequest",value:(f=Iy(Ry().mark((function e(t,r,n){var o,i,a,c,s,u,l;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.apiKey,i=this.client,e.prev=1,e.next=4,this.geoProvider.getGeoLocation();case 4:return a=e.sent,c=a.latitude,s=a.longitude,e.next=8,t.build(c,s);case 8:return u=e.sent,e.next=11,i.exchange(u,o,n);case 11:return l=e.sent,e.next=14,this.processAccess(l,r,void 0,n);case 14:case 21:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(1),e.next=21,this.handleTokenException(e.t0,n);case 22:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e,t,r){return f.apply(this,arguments)})},{key:"getAccessState",value:function(){var e=this.storage.getAccess();return new Oy(my.versionShort,new ky(Le((function(){return e.context.token})),Le((function(){return e.context.refreshToken})),Le((function(){return e.contextState}))))}},{key:"updateAccessToken",value:(l=Iy(Ry().mark((function e(t){var r,n,o,i,a,c,s,u,l,f,p,h,d=arguments;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(d.length>1&&void 0!==d[1])||d[1],n=d.length>2?d[2]:void 0,o=t.accessToken,i=t.expiresIn,a=t.refreshToken,c=t.tokenType,s=t.region,u=t.accessTokenType,l=this.storage.getAccess(),f=(l||{}).contextState,p=new Mo({token:o,tokenType:c,refreshToken:a,expiresIn:i,region:s,accessTokenType:u}),h=u===ri.device?new fc:f,e.next=9,this.processAccess(p,h,r,n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"shouldRefreshToken",value:function(e,t){if(e)return!0;var r=t.context,n=r.expiresIn,o=r.issuedAt,i=o+this.config.extras.refreshThreshold*n*1e3,a=Date.now();return a>=i||a<o}},{key:"refreshAccessToken",value:(u=Iy(Ry().mark((function e(){var t,r,o,i,a,c,s,u,l,f=this,p=arguments;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{},r=this.storage,o=this.orchestrationManager,i=this.logger,a=t.forceRefresh,c=void 0!==a&&a,s=t.reason,u=t.logTransaction,l=function(){var e=Iy(Ry().mark((function e(){var t,a,l,p,h,d;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.getAccess(),!f.currentTokenRefreshPromise){e.next=6;break}return i.info(f.toString(),"Waiting for current token refresh operation in progress to complete."),e.next=5,f.currentTokenRefreshPromise;case 5:case 15:return e.abrupt("return",e.sent);case 6:if(!n.Check.instanceStrict(t,dc)){e.next=17;break}if(!f.shouldRefreshToken(c,t)||f.currentTokenRefreshPromise){e.next=16;break}return a=t.context.refreshToken,l={refreshToken:a,reason:s,logTransaction:u},p=function(){var e=Iy(Ry().mark((function e(){return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.refreshToken(l);case 3:case 10:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,f.handleTokenException(e.t0,u);case 11:return e.prev=11,f.currentTokenRefreshPromise=null,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,6,11,14]])})));return function(){return e.apply(this,arguments)}}(),f.currentTokenRefreshPromise=p(),e.next=15,f.currentTokenRefreshPromise;case 16:return e.abrupt("return",void 0);case 17:return h=[new I("","A successful token exchange is required before refresh is allowed")],d=Y.common.invalidState,e.abrupt("return",Promise.reject(new ae({reasons:h,exceptionData:d})));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!u){e.next=7;break}return e.abrupt("return",l());case 7:return e.abrupt("return",H.wrapLogTransaction({urn:qe.services.orchestration.orchestrationClient.refreshToken,file:this.toString(),logger:i,action:function(e){return u=e,l()}}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"handleTokenException",value:(s=Iy(Ry().mark((function e(t,r){var o,i,a;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(e){var t=Le((function(){return e.reasons[0].code}));return t===X.tokenServiceInvalidGrant.code||t===X.invalidGrant.code},i=this.deviceGrantStorage.getDeviceGrant(),e.prev=2,!o(t)){e.next=7;break}return e.next=6,this.reset(i,r);case 6:return e.abrupt("return",e.sent);case 7:throw t;case 10:if(e.prev=10,e.t0=e.catch(2),a=e.t0,!n.Check.not.assigned(i)&&!o(a)){e.next=17;break}return e.next=16,this.deviceManager.createDeviceGrant(r);case 16:return e.abrupt("return",void 0);case 17:throw a;case 18:return e.prev=18,this.emit(Nt.TokenRefreshFailed,new jy(a||t,!0)),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[2,10,18,21]])}))),function(e,t){return s.apply(this,arguments)})},{key:"logout",value:(c=Iy(Ry().mark((function e(t){var r;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.clear();case 2:return e.next=4,this.deviceManager.getDeviceGrant(t);case 4:return r=e.sent,e.next=7,this.reset(r,t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"reset",value:(a=Iy(Ry().mark((function e(t,r){return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearRetryRefresh(),e.next=3,this.exchangeGrant(t,void 0,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"restoreAccessState",value:function(e,t){var r=JSON.parse(e).data,n=r.refreshToken,o=r.contextState,i=this.storage.getAccess(),a=new mi(n),c=new fc(o.modes);return a.actor=i.context.refreshToken,this.clearRetryRefresh(),this.exchangeRequest(a,c,t)}},{key:"hasAccessMode",value:function(e){var t=this.storage.getAccess();if(n.Check.not.assigned(t))return Promise.resolve(!1);var r=Le((function(){return t.contextState.hasMode(e)}),!1);return Promise.resolve(r)}},{key:"processAccess",value:(i=Iy(Ry().mark((function e(t,r){var n,o,i,a,c,s=arguments;return Ry().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],o=s.length>3?s[3]:void 0,i=this.logger,a=new dc(t,r),c=new Oc(t.token,t.region),e.next=7,this.storage.saveAccess(a);case 7:if(i.info(this.toString(),"Dispatch AccessChanged event."),this.emit(Nt.AccessChanged,new Ay(c)),this.enqueueRefresh(),!n){e.next=13;break}return e.next=13,this.refreshSessionInfo(o);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"enqueueRefresh",value:function(){var e=this.logger,t=this.config,r=this.storage.getAccess(),o=Date.now();if(r){this.clearRetryRefresh();var i=n.Check.assigned(r.context)&&n.Check.assigned(r.context.refreshToken),a=t.extras.refreshThreshold*(1e3*r.context.expiresIn),c=r.context.issuedAt+a-o;return i?(this.retryAttempt=0,this.retryDelay=1e3*t.extras.autoRefreshRetryPolicy.retryBasePeriod,void(this.refreshTimeoutId=setTimeout(this.retryRefresh.bind(this),c))):void e.warn(this.toString(),"refreshToken missing, skipping refresh logic.")}var s=[new I("","A successful token exchange is required before refresh is allowed")],u=Y.common.invalidState;throw new ae({reasons:s,exceptionData:u})}},{key:"retryRefresh",value:function(){var e=this,t=this.config,r=this.logger,n=t.extras.autoRefreshRetryPolicy,o=n.retryMaxAttempts,i=n.retryMultiplier,a=1e3*n.retryMaxPeriod;return this.clearRetryRefresh(),H.wrapLogTransaction({urn:qe.services.orchestration.orchestrationClient.refreshToken,file:this.toString(),logger:r,action:function(t){return e.refreshAccessToken({forceRefresh:!0,logTransaction:t}).catch((function(t){if(e.retryAttempt<o){e.refreshTimeoutId=setTimeout(e.retryRefresh.bind(e),e.retryDelay);var n=e.retryDelay*i;e.retryDelay=n<a?n:a,e.retryAttempt++}else r.error(e.toString(),"Token refresh failed."),r.info(e.toString(),"Dispatch TokenRefreshFailed event."),e.emit(Nt.TokenRefreshFailed,new jy(t));throw t}))}})}},{key:"clearRetryRefresh",value:function(){clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=-1}},{key:"toString",value:function(){return"SDK.Token.TokenManager"}}],r&&My(t.prototype,r),o&&My(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(Bd);function Vy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const qy={GeoLocation:sy,get GeoProvider(){return yy.GeoProvider},TokenManager:zy,TokenRefreshFailure:jy,AccessStorage:vc,DeviceGrantStorage:sc,AccessContextState:fc,Access:dc,AccessTokenProvider:Bd,AccessTokenUpdater:function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"refreshAccessToken",value:function(e){return new Promise((function(e,t){return t(new Error("not-implemented"))}))}},{key:"toString",value:function(){return"SDK.Token.AccessTokenUpdater"}}])&&Vy(t.prototype,r),n&&Vy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),AccessToken:Oc,AccessState:Oy,AccessStateData:ky};function Ky(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"getPayload",value:function(){return new Promise((function(e){return e(new Error("TelemetryEvent#getPayload - not-implemented"))}))}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.TelemetryEvent"}}])&&Ky(t.prototype,r),n&&Ky(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Hy=kt()({glimpseValidation:null,qosValidation:null,qoeValidation:null});function Yy(e){return Yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(e)}function Xy(e){return function(e){if(Array.isArray(e))return Jy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Jy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $y(){$y=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Yy(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Qy(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Zy(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Qy(i,n,o,a,c,"next",e)}function c(e){Qy(i,n,o,a,c,"throw",e)}a(void 0)}))}}function eg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rg=qe.services.internal.telemetry.eventBuffer,ng=rh.Internal.Telemetry.TelemetryClient,og=rh.Internal.Telemetry.TelemetryClientEndpoint,ig=qy.TokenManager,ag=rh.Util,cg=rh.Exception.ExceptionReference;function sg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,r=1e3*t;return Math.min(Math.pow(2,e)+5*Math.random(),r)}var ug=function(){function e(t){var r=this;eg(this,e);var o={options:n.Types.object({bufferConfiguration:n.Types.nonEmptyObject,tokenManager:n.Types.instanceStrict(ig),telemetryClient:n.Types.instanceStrict(ng),logger:n.Types.instanceStrict(wt.Logger),endpoint:n.Types.nonEmptyObject,prohibited:n.Types.object({urns:n.Types.array}),fastTrack:n.Types.object({urns:n.Types.array.of.nonEmptyString}).optional,diagnosticFeature:n.Types.in(Hy).optional})};(0,n.typecheck)(this,o,arguments);var i=t.bufferConfiguration,a=t.tokenManager,c=t.telemetryClient,s=t.logger,u=t.endpoint,l=t.fastTrack,f=void 0===l?null:l,p=t.prohibited,h=t.diagnosticFeature;this.config=i,this.tokenManager=a,this.client=c,this.logger=s,this.endpoint=u,this.fastTrack=f,this.prohibited=p,this.isScheduled=!1,this.batchLimit=this.config.batchLimit,this.replyAfterFallback=this.config.replyAfterFallback,this.maxBackOffRetrySeconds=this.config.maxBackOffRetrySeconds||120,this.replyAfter=this.replyAfterFallback,this.minimumBatchSize=this.config.minimumBatchSize,this.queueLimit=this.config.queueLimit,this.queue=[],this.disabled=this.config.disabled,this.diagnosticFeature=h,this.validateEvents=!1,this.retryCount=0,this.tokenManager.on(Nt.TokenRefreshFailed,(function(e){e&&e.hasResetToAnonymousToken||(r.disabled=!0)})),this.tokenManager.on(Nt.AccessChanged,(function(){r.disabled=r.config.disabled})),this.logger.log(this.toString(),"Created.")}var t,r,o,i,a;return t=e,r=[{key:"postEvent",value:function(e){var t={telemetryEvent:n.Types.instanceStrict(Wy)};if((0,n.typecheck)(this,"postEvent",t,arguments),this.disabled)this.logger.warn(this.toString(),"Buffering is disabled, events will not be posted.");else{var r=e.getPayload(),o=r.client.event,i=this.fastTrack.urns.includes(o),a=this.prohibited.urns.includes(o);if(a)this.logger.warn(this.toString(),"Event will not be posted because it is prohibited: ".concat(o));else if(i)this.logger.info(this.toString(),"Event added to beginning of queue: ".concat(o)),this.processBatch(r);else{if(this.queue.push(r),this.logger.info(this.toString(),"Event added to end of queue: ".concat(o)),this.queueLimit)for(;this.queue.length>this.queueLimit;)this.queue.shift();this.scheduleNextBatch(this.replyAfter||this.replyAfterFallback)}}}},{key:"drain",value:(a=Zy($y().mark((function e(){var t,r;return $y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.queue.length>0)){e.next=9;break}return t=this.queue,this.queue=[],this.clearSchedule(),e.next=6,this.client.postDustEvents(this.accessToken,t);case 6:r=e.sent,this.replyAfter=r.replyAfter||this.replyAfterFallback,this.scheduleNextBatch(this.replyAfter);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"processBatch",value:(i=Zy($y().mark((function e(t){var r,o,i,a,c,s,u=this;return $y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=3;break}return this.clearSchedule(),e.abrupt("return");case 3:if(e.prev=3,this.retryCount++,!n.Check.assigned(t)){e.next=9;break}r=[t],e.next=15;break;case 9:if(!(this.queue.length<this.minimumBatchSize)){e.next=14;break}return this.clearSchedule(),e.abrupt("return");case 14:r=this.queue.splice(0,this.batchLimit);case 15:return this.logger.info(this.toString(),"Attempting to post ".concat(r.length," events")),e.next=18,this.tokenManager.refreshAccessToken();case 18:if(this.endpoint.rel!==og.postEvent){e.next=22;break}o=H.wrapLogTransaction({file:this.toString(),urn:rg.processBatch,logger:this.logger,action:function(){var e=Zy($y().mark((function e(t){return $y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.client.postEvents(u.accessToken,r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.next=38;break;case 22:if(!this.validateEvents||!this.diagnosticFeature){e.next=35;break}if(this.diagnosticFeature!==Hy.glimpseValidation){e.next=29;break}return e.next=26,this.client.validateDustEvents(this.accessToken,r);case 26:o=e.sent,e.next=32;break;case 29:return e.next=31,this.client.validateQoeEvents(this.accessToken,r);case 31:o=e.sent;case 32:try{this.logger.debug("TelemetryValidation",JSON.stringify(o,ag.circularReplacer()))}catch(e){this.logger.debug("TelemetryValidation","Could not stringify the ValidatedTelemetryResponse")}e.next=38;break;case 35:return e.next=37,this.client.postDustEvents(this.accessToken,r);case 37:o=e.sent;case 38:this.retryCount=0,this.replyAfter=o.replyAfter||this.replyAfterFallback,this.clearSchedule(),this.scheduleNextBatch(this.replyAfter),e.next=51;break;case 44:e.prev=44,e.t0=e.catch(3),i=e.t0.status,a=e.t0.data,c=(a=void 0===a?{}:a).name,(i<400||i>=500||c===cg.common.network)&&((s=this.queue).unshift.apply(s,Xy(r)),this.replyAfter=sg(this.retryCount,this.maxBackOffRetrySeconds),this.clearSchedule(),this.scheduleNextBatch(this.replyAfter)),this.logger.warn(this.toString(),e.t0);case 51:case"end":return e.stop()}}),e,this,[[3,44]])}))),function(e){return i.apply(this,arguments)})},{key:"scheduleNextBatch",value:function(e){this.isScheduled||(this.isScheduled=!0,this.nextBatchTimeoutId=setTimeout(this.processBatch.bind(this),1e3*e))}},{key:"clearSchedule",value:function(){this.isScheduled=!1}},{key:"dispose",value:function(){clearTimeout(this.nextBatchTimeoutId),this.clearSchedule()}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.EventBuffer"}}],r&&tg(t.prototype,r),o&&tg(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pg=rh.Configuration.TelemetryManagerConfiguration,hg=rh.Internal.Telemetry.TelemetryClient,dg=qy.TokenManager,yg=function(){function e(t,r,o,i){lg(this,e);var a={telemetryManagerConfiguration:n.Types.instanceStrict(pg),tokenManager:n.Types.instanceStrict(dg),telemetryClient:n.Types.instanceStrict(hg),logger:n.Types.instanceStrict(wt.Logger)};(0,n.typecheck)(this,a,arguments),this.logger=i,this.streamSampleBuffer=new ug({bufferConfiguration:t.extras.streamSampleBufferConfiguration,tokenManager:r,endpoint:o.config.endpoints.postEvent,telemetryClient:o,logger:i,fastTrack:t.extras.fastTrack,prohibited:t.extras.prohibited}),this.eventBuffer=new ug({bufferConfiguration:t.extras.eventBufferConfiguration,tokenManager:r,endpoint:o.config.endpoints.dustEvent,telemetryClient:o,logger:i,fastTrack:t.extras.fastTrack,prohibited:t.extras.prohibited,diagnosticFeature:Hy.glimpseValidation}),this.trackingBuffer=new ug({bufferConfiguration:t.extras.glimpseBufferConfiguration,tokenManager:r,endpoint:o.config.endpoints.dustEvent,telemetryClient:o,logger:i,fastTrack:t.extras.fastTrack,prohibited:t.extras.prohibited,diagnosticFeature:Hy.glimpseValidation}),this.qoeBuffer=new ug({bufferConfiguration:t.extras.qoeBufferConfiguration,tokenManager:r,endpoint:o.config.endpoints.dustEvent,telemetryClient:o,logger:i,fastTrack:t.extras.fastTrack,prohibited:t.extras.prohibited,diagnosticFeature:Hy.qoeValidation}),this.logger.log(this.toString(),"Created.")}var t,r,o;return t=e,(r=[{key:"dispose",value:function(){this.qoeBuffer.dispose(),this.trackingBuffer.dispose(),this.eventBuffer.dispose(),this.streamSampleBuffer.dispose()}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.TelemetryManager"}}])&&fg(t.prototype,r),o&&fg(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gg(e){return gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(e)}function vg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mg(e,t){return mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mg(e,t)}function wg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xg(e);if(t){var o=xg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Sg(this,r)}}function Sg(e,t){if(t&&("object"===gg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kg(e)}function kg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xg(e){return xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xg(e)}var Eg=rh.Internal.Dust,Og=Eg.DustPayload,Tg=Eg.DustClientPayload,Pg=Eg.DustServerPayload,jg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mg(e,t)}(a,e);var t,r,o,i=wg(a);function a(e){var t;function r(e){return n.Check.nonEmptyObject(e)?n.Check.instanceStrict(e,Pg):n.Check.object(e)}vg(this,a),t=i.call(this,e);var o={options:n.Types.object({client:n.Types.instanceStrict(Tg),server:n.Types.custom(r).optional})};(0,n.typecheck)(kg(t),o,arguments);var c=e.server,s=void 0===c?{}:c,u=e.client;return t.client=u,t.server=s,t}return t=a,(r=[{key:"getPayload",value:function(){var e=this.server,t=this.client;return new Og({server:e,client:t})}},{key:"toString",value:function(){return"SDK.Internal.Dust.DustEvent"}}])&&bg(t.prototype,r),o&&bg(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Wy);function _g(e){return _g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(e)}function Ag(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(r),!0).forEach((function(t){Rg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ag(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ig(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lg(e,t){return Lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lg(e,t)}function Mg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Bg(e);if(t){var o=Bg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ng(this,r)}}function Ng(e,t){if(t&&("object"===_g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fg(e)}function Fg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bg(e){return Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bg(e)}var Ug=rh.Internal.Dust,Gg=Ug.DustServerPayload,zg=Ug.DustClientPayload,Vg=Ug.DustDevicePayload,qg=Ug.DustApplicationPayload,Kg=Ug.DustSdkPayload,Wg=Ug.DustCategory,Hg=wt.LogSink,Yg=rh.Exception,Xg=rh.Exception.ErrorReason,Jg=Yg.ServiceException,$g=Yg.ExceptionReference,Qg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lg(e,t)}(a,e);var t,r,o,i=Mg(a);function a(e){var t;Dg(this,a),t=i.call(this);var r={logger:n.Types.instanceStrict(wt.Logger)};return(0,n.typecheck)(Fg(t),r,arguments),t.queue=[],t.telemetryManager=null,t.eventBufferReady=!1,t.environment=null,t.application=null,t.enabled=!1,t.logger=e,t.initialized=!1,t}return t=a,r=[{key:"log",value:function(e){var t=this.enabled,r=this.queue,n=e.extraData,o=void 0===n?{}:n;return e.isPublic&&!o.isEdge&&r&&(t?this.postEvent(e):r.push(e)),Promise.resolve()}},{key:"enableDustSink",value:function(){this.enabled=!0}},{key:"emptySink",value:function(){for(var e=this.queue;e.length;)this.postEvent(e.shift())}},{key:"disableDustSink",value:function(){this.enabled=!1,this.queue=[]}},{key:"initializeDustSink",value:function(e){try{var t={options:n.Types.object({telemetryManager:n.Types.instanceStrict(yg),environment:n.Types.object({device:n.Types.nonEmptyObject,sdk:n.Types.nonEmptyObject}),sdkConfigApplication:n.Types.nonEmptyObject,application:n.Types.nonEmptyObject.optional})};(0,n.typecheck)(this,"initializeDustSink",t,arguments);var r=e.telemetryManager,o=e.environment,i=e.sdkConfigApplication,a=e.application,c=o.device,s=o.sdk,u=Cg(Cg({},i),a);this.application=new qg(u),this.environment={device:new Vg(c),sdk:new Kg(s.version,s.platform)},this.telemetryManager=r,this.initialized=!0}catch(e){throw new Jg({reasons:[new Xg("",e.message)],exceptionData:$g.internal.invalidDustConfiguration})}}},{key:"createDustEvent",value:function(e){var t=this.environment,r=this.application,o=t.device,i=t.sdk,a=e.extraData,c=void 0===a?{}:a,s=c.server,u=Cg({},c.data),l={};if(c.error&&(u.error=c.error),n.Check.nonEmptyObject(s)){var f=s.host,p=s.path,h=s.method,d=s.statusCode,y=s.requestId,g=s.roundTripTime;l=new Gg({host:f,path:p,method:h,statusCode:d,requestId:y,roundTripTime:g})}var v=new zg({application:r,device:o,sdk:i,category:c.category,data:u,event:e.message,timestamp:c.timestamp});return new jg({server:l,client:v})}},{key:"postEvent",value:function(e){try{var t=this.telemetryManager,r=e.extraData,n=(void 0===r?{}:r).category,o=this.createDustEvent(e);n===Wg.qos?t.qoeBuffer.postEvent(o):n===Wg.glimpse?t.trackingBuffer.postEvent(o):t.eventBuffer.postEvent(o)}catch(e){this.logger.warn(this.toString(),"Error creating SDK.Internal.Dust.DustEvent ".concat(e.message))}}},{key:"toString",value:function(){return"SDK.Internal.Dust.DustSink"}}],r&&Ig(t.prototype,r),o&&Ig(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Hg);function Zg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ev(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tv=function(){function e(t){Zg(this,e);var r={options:n.Types.object({invocation:n.Types.object(M),services:n.Types.array.of.object(G),startTime:n.Types.date,totalDuration:n.Types.number,error:n.Types.instanceStrict(ae).optional,sdkInstanceId:n.Types.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.invocation,i=t.services,a=t.startTime,c=t.totalDuration,s=t.error,u=t.sdkInstanceId;this.invocation=o,this.startTime=a.toISOString(),this.totalDuration=c,this.services=i,this.error=s?{code:s.name}:void 0,this.sdkInstanceId=u}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Internal.Dust.EdgeEvent"}}])&&ev(t.prototype,r),o&&ev(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const rv={unthrottledCustom:"urn:dss:event-edge:flow-control:policy:unthrottled-custom",throttled:"urn:dss:event-edge:flow-control:policy:throttled",paused:"urn:dss:event-edge:flow-control:policy:paused"};function nv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ov(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var iv=function(){function e(t){nv(this,e);var r={options:n.Types.object({policy:n.Types.in(rv),eventTypes:n.Types.array.of.nonEmptyString})};(0,n.typecheck)(this,r,arguments);var o=t.policy,i=t.eventTypes;this.policy=o,this.eventTypes=i}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Socket.FlowControlPolicy"}}])&&ov(t.prototype,r),o&&ov(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const av=kt()({disabled:null,closed:null,connecting:null,connected:null,disconnected:null}),cv={0:"CONNECTING",1:"OPEN",2:"CLOSING",3:"CLOSED",CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};var sv;function uv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const lv=(uv(sv={},cv.OPEN,av.connected),uv(sv,cv.CONNECTING,av.connecting),uv(sv,cv.CLOSED,av.closed),sv);function fv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hv=function(){function e(t){fv(this,e);var r={options:n.Types.object({eventType:n.Types.nonEmptyString,schemaUrl:n.Types.nonEmptyString,dataContentType:n.Types.nonEmptyString.optional,subject:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.eventType,i=t.schemaUrl,a=t.dataContentType,c=t.data,s=t.subject;this.eventType=o,this.schemaUrl=i,this.data=c,this.dataContentType=a||"application/json;charset=utf-8",this.subject=s,this.id=il(),this.time=new Date,this.sdkSource=null}var t,r,o;return t=e,r=[{key:"source",get:function(){return this.sdkSource}},{key:"getSocketMessage",value:function(e){var t={options:n.Types.object({subject:n.Types.nonEmptyString.optional,source:n.Types.nonEmptyString})};(0,n.typecheck)(this,"getSocketMessage",t,arguments);var r=e.source,o=e.subject;this.sdkSource=r;var i=this.eventType,a=this.data,c=this.dataContentType,s=this.id,u=this.subject,l={source:r,time:this.time.toISOString(),id:s,data:a,datacontenttype:c,type:i,schemaurl:this.schemaUrl,subject:u||o};return l}},{key:"toString",value:function(){return"SDK.Socket.SocketEvent"}}],r&&pv(t.prototype,r),o&&pv(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dv(e){return dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(e)}function yv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gv(e,t){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gv(e,t)}function vv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=mv(e);if(t){var o=mv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return bv(this,r)}}function bv(e,t){if(t&&("object"===dv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mv(e)}var wv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gv(e,t)}(i,e);var t,r,n,o=vv(i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=i.query;return o.call(this,{query:e,operationName:"activeSession"})}return t=i,n=[{key:"query",get:function(){return"query activeSession {\n            activeSession {\n              device {\n                id\n                platform\n              }\n              entitlements\n              inSupportedLocation\n              isSubscriber\n              location {\n                type\n                countryCode\n                dma\n                asn\n                regionName\n                connectionType\n                zipCode\n              }\n              sessionId\n              experiments {\n                featureId\n                variantId\n                version\n              }\n              account {\n                id\n              }\n              profile {\n                id\n              }\n              preferredMaturityRating {\n                impliedMaturityRating\n                ratingSystem\n              }\n              homeLocation {\n                countryCode\n              }\n              portabilityLocation {\n                countryCode\n              }\n              partnerName\n            }\n          }"}}],(r=[{key:"toString",value:function(){return"SDK.Session.SessionInfoRequest"}}])&&yv(t.prototype,r),n&&yv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ic);function Sv(e){return Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(e)}function kv(){kv=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Sv(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function xv(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Ev(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){xv(i,n,o,a,c,"next",e)}function c(e){xv(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Ov(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pv=qy.TokenManager,jv=rh.Session.SessionInfo;const _v={FeatureFlagsStorage:ic,SessionManager:function(){function e(t){Ov(this,e);var r={options:n.Types.object({logger:n.Types.instanceStrict(wt.Logger),tokenManager:n.Types.instanceStrict(Pv),sessionInfoStorage:n.Types.instanceStrict(Va),featureFlagsStorage:n.Types.instanceStrict(ic),orchestrationClient:n.Types.instanceStrict(hs)})};(0,n.typecheck)(this,r,arguments);var o=t.logger,i=t.tokenManager,a=t.sessionInfoStorage,c=t.featureFlagsStorage,s=t.orchestrationClient;this.logger=o,this.tokenManager=i,this.storage=a,this.featureFlagsStorage=c,this.orchestrationClient=s,this.logger.log(this.toString(),"Created.")}var t,r,o,i,a,c;return t=e,r=[{key:"getInfo",value:(c=Ev(kv().mark((function e(t){var r,o;return kv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.storage,e.next=3,r.getSessionInfo();case 3:if(o=e.sent,!n.Check.instanceStrict(o,jv)){e.next=6;break}return e.abrupt("return",o);case 6:return e.next=8,this.getInfoFromServices(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getInfoFromServices",value:(a=Ev(kv().mark((function e(t){var r,n,o,i;return kv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.accessToken,n=this.storage,e.next=3,this.orchestrationClient.query({request:new wv,accessToken:r,logTransaction:t});case 3:return o=e.sent,i=jv.create(o.activeSession),e.next=7,n.saveSessionInfo(i);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFeatureFlags",value:(i=Ev(kv().mark((function e(){var t;return kv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureFlagsStorage.getFeatureFlags();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"toString",value:function(){return"SDK.Session.SessionManager"}}],r&&Tv(t.prototype,r),o&&Tv(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),SessionInfoStorage:Va};function Av(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cv=rh.Exception.ErrorCode,Rv=rh.Exception.ErrorReason,Dv=rh.Exception.ServiceException,Iv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messageTypes=n.Check.array(t)?t:[t]}var t,r,o;return t=e,r=[{key:"is",value:function(e){var t=(e||{}).type;return this.messageTypes.includes(t)}},{key:"createServiceException",value:function(e){if(n.Check.not.nonEmptyArray(e)||n.Check.not.nonEmptyObject(e[0]))return new Dv;var t=e[0].code,r=e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Rv(e.code,e.description)})),o=Object.values(Cv).find((function(e){return e.code===t})),i=o&&o.exceptionData;return new Dv({reasons:r,exceptionData:i})}},{key:"toString",value:function(){return"SDK.Socket.MessageProcessorBase"}}],r&&Av(t.prototype,r),o&&Av(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lv(e){return Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(e)}function Mv(){Mv=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Lv(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Nv(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Fv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bv(e,t){return Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bv(e,t)}function Uv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=zv(e);if(t){var o=zv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Gv(this,r)}}function Gv(e,t){if(t&&("object"===Lv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zv(e)}var Vv=rh.Internal.Dust.DustUrnReference.socket,qv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bv(e,t)}(c,e);var t,r,n,o,i,a=Uv(c);function c(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=Vv.socketManager.authenticated;return(r=a.call(this,n)).socketManager=e,r.startupPromiseResolveCallback=t,r}return t=c,r=[{key:"process",value:(o=Mv().mark((function e(){return Mv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startupPromiseResolveCallback(),this.socketManager.retryAttempts=0,this.socketManager.retryDelay=1e3*this.socketManager.retryPolicy.retryBasePeriod,this.socketManager.emitConnectionState(av.connected),this.socketManager.sendFlowControl(),e.next=7,this.socketManager.flushAwaitingConnectionBuffer();case 7:this.socketManager.pingPongMessageProcessor.start(),this.socketManager.oldSocket&&this.socketManager.closeExistingSocket();case 9:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){Nv(i,r,n,a,c,"next",e)}function c(e){Nv(i,r,n,a,c,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.AuthenticatedMessageProcessor"}}],r&&Fv(t.prototype,r),n&&Fv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(Iv);const Kv=kt()({message:null,exception:null,tokenRefreshRequested:null,connectionStateChanged:null,flowControlError:null,offDeviceTokenRefresh:null,ageVerificationChanged:null});function Wv(e){return Wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(e)}function Hv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yv(e,t){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yv(e,t)}function Xv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$v(e);if(t){var o=$v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Jv(this,r)}}function Jv(e,t){if(t&&("object"===Wv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$v(e)}var Qv=rh.Util,Zv=rh.Internal.Dust.DustUrnReference.socket,eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yv(e,t)}(i,e);var t,r,n,o=Xv(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=Zv.socketManager.flowControlError;return(t=o.call(this,r)).socketManager=e,t}return t=i,(r=[{key:"process",value:function(e){var t=Qv.getSafe((function(){return e.data.errors})),r=this.createServiceException(t);this.socketManager.emit(Kv.flowControlError,r)}},{key:"toString",value:function(){return"SDK.Socket.FlowControlErrorMessageProcessor"}}])&&Hv(t.prototype,r),n&&Hv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Iv);function tb(e){return tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(e)}function rb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nb(e,t){return nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nb(e,t)}function ob(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ab(e);if(t){var o=ab(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ib(this,r)}}function ib(e,t){if(t&&("object"===tb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ab(e){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ab(e)}var cb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nb(e,t)}(i,e);var t,r,n,o=ob(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).socketManager=e,t}return t=i,(r=[{key:"is",value:function(){return!0}},{key:"process",value:function(e){this.socketManager.emit(e.type,e)}},{key:"toString",value:function(){return"SDK.Socket.ForwardAllMessagesProcessor"}}])&&rb(t.prototype,r),n&&rb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Iv);function sb(e){return sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(e)}function ub(){ub=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==sb(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function lb(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function fb(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){lb(i,n,o,a,c,"next",e)}function c(e){lb(i,n,o,a,c,"throw",e)}a(void 0)}))}}function pb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var db=rh.Internal.Dust.DustUrnReference.socket,yb=function(){function e(t){pb(this,e);var r={options:n.Types.object({socketManager:n.Types.object(),logger:n.Types.instanceStrict(wt.Logger),pongTimeout:n.Types.number,pingMaxAttempts:n.Types.number})};(0,n.typecheck)(this,r,arguments);var o=t.socketManager,i=t.logger,a=t.pongTimeout,c=t.pingMaxAttempts;this.socketManager=o,this.logger=i,this.pongTimeout=a,this.pingMaxAttempts=c,this.pingAttempts=0}var t,r,o,i;return t=e,r=[{key:"send",value:(i=fb(ub().mark((function e(){var t=this;return ub().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=fb(ub().mark((function e(r,n){var o;return ub().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new hv({eventType:db.socketManager.ping,schemaUrl:"https://github.bamtech.co/schema-registry/schema-registry/blob/master/dss/event/edge/1.0.0/sdk/transport/ping.oas2.yaml"}),t.pingAttempts++,t.pongResolve=function(){t.pingAttempts=0,clearTimeout(t.timeoutId),r()},e.next=5,t.socketManager.sendMessage(o);case 5:t.timeoutId=setTimeout((function(){t.pingAttempts>=t.pingMaxAttempts?(t.logger.error("Ping","Server has been pinged ".concat(t.pingAttempts," times with no pong received")),n()):(t.logger.error("Ping","Ping request timed out before pong received - trying attempt: ".concat(t.pingAttempts)),t.send().then(r,n))}),1e3*t.pongTimeout);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"pong",value:function(){this.pongResolve()}},{key:"toString",value:function(){return"SDK.Socket.Ping"}}],r&&hb(t.prototype,r),o&&hb(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gb(e){return gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(e)}function vb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mb(e,t){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mb(e,t)}function wb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kb(e);if(t){var o=kb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Sb(this,r)}}function Sb(e,t){if(t&&("object"===gb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function kb(e){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kb(e)}var xb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mb(e,t)}(i,e);var t,r,n,o=wb(i);function i(){return vb(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Configuration.SocketManagerConfiguration"}}])&&bb(t.prototype,r),n&&bb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(gr);function Eb(e){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(e)}function Ob(){Ob=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Eb(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Tb(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Pb(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Tb(i,n,o,a,c,"next",e)}function c(e){Tb(i,n,o,a,c,"throw",e)}a(void 0)}))}}function jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jb(Object(r),!0).forEach((function(t){Ab(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ab(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Db(e,t){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Db(e,t)}function Ib(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Nb(e);if(t){var o=Nb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Lb(this,r)}}function Lb(e,t){if(t&&("object"===Eb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mb(e)}function Mb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nb(e){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nb(e)}var Fb=rh.Internal.Dust.DustUrnReference.socket,Bb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Db(e,t)}(s,e);var t,r,o,i,a,c=Ib(s);function s(e){var t;Cb(this,s);var r=Fb.socketManager.pong;t=c.call(this,r);var o={options:n.Types.object({socketManager:n.Types.assigned,config:n.Types.instanceStrict(xb),logger:n.Types.instanceStrict(wt.Logger)})};(0,n.typecheck)(Mb(t),o,arguments);var i=e.socketManager,a=e.config,u=e.logger,l={disabled:!1,pingInterval:5,pongTimeout:5,pingMaxAttempts:2};return t.socketManager=i,t.config=a,t.logger=u,t.pingPolicy=_b(_b({},l),t.config.extras.pingPolicy),t.intervalId=0,t.currentPing=null,t}return t=s,r=[{key:"enable",value:function(e){this.pingPolicy=_b(_b({},this.pingPolicy),e),this.pingPolicy.disabled=!1,this.start()}},{key:"disable",value:function(){this.pingPolicy.disabled=!0,this.stop()}},{key:"stop",value:function(){clearInterval(this.intervalId),this.intervalId=0}},{key:"process",value:(a=Pb(Ob().mark((function e(){return Ob().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentPing&&(this.currentPing.pong(),this.logger.info("PingPongMessageProcessor","Pong received"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"reset",value:function(){this.currentPing&&(this.currentPing.pong(),this.logger.info("PingPongMessageProcessor","Message received, resetting the ping timer")),this.start()}},{key:"start",value:(i=Pb(Ob().mark((function e(){var t=this;return Ob().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.pingPolicy.disabled?e():t.isSocketConnected?(t.intervalId>0&&t.stop(),t.intervalId=setTimeout(Pb(Ob().mark((function n(){return Ob().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.currentPing=new yb({socketManager:t.socketManager,logger:t.logger,pongTimeout:t.pingPolicy.pongTimeout,pingMaxAttempts:t.pingPolicy.pingMaxAttempts}),n.prev=1,n.next=4,t.currentPing.send();case 4:n.next=11;break;case 6:return n.prev=6,n.t0=n.catch(1),t.stop(),n.next=11,t.socketManager.beginReconnecting();case 11:t.start().then(e,r);case 12:case"end":return n.stop()}}),n,null,[[1,6]])}))),1e3*t.pingPolicy.pongTimeout)):setTimeout((function(){t.start().then(e,r)}),1e3*t.pingPolicy.pongTimeout)}));case 2:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"isSocketConnected",get:function(){return this.socketManager.isSocketInReadyState(cv.OPEN)}},{key:"toString",value:function(){return"SDK.Socket.PingPongMessageProcessor"}}],r&&Rb(t.prototype,r),o&&Rb(t,o),Object.defineProperty(t,"prototype",{writable:!1}),s}(Iv);function Ub(e){return Ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(e)}function Gb(){Gb=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ub(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function zb(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Vb(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){zb(i,n,o,a,c,"next",e)}function c(e){zb(i,n,o,a,c,"throw",e)}a(void 0)}))}}function qb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kb(e,t){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kb(e,t)}function Wb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Yb(e);if(t){var o=Yb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Hb(this,r)}}function Hb(e,t){if(t&&("object"===Ub(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yb(e){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yb(e)}var Xb=rh.Util,Jb=qe.socket,$b=rh.Orchestration.OffDeviceRedemptionFlow,Qb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kb(e,t)}(a,e);var t,r,n,o,i=Wb(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=e.socketManager,n=e.tokenManager,o=e.logger,c=Jb.socketManager.offDeviceTokenRefresh;return(t=i.call(this,c)).socketManager=r,t.tokenManager=n,t.logger=o,t}return t=a,r=[{key:"process",value:(o=Vb(Gb().mark((function e(t){var r,n,o,i,a,c,s,u,l=this;return Gb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.tokenManager,n=this.logger,o=t.data,i=o.refreshToken,a=o.actionGrant,c=o.offDeviceRedemptionFlow,s=Xb.toUpperFirst(c),u=$b[s],e.next=6,H.wrapLogTransaction({urn:Jb.socketManager.offDeviceTokenRefresh,file:this.toString(),logger:n,action:function(){var e=Vb(Gb().mark((function e(t){var n,o;return Gb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.deviceManager.getDeviceGrant(t);case 3:return n=e.sent,e.next=6,r.reset(n,t);case 6:return e.next=8,r.getAccessState();case 8:return(o=e.sent).data.refreshToken=i,e.next=12,r.restoreAccessState(JSON.stringify(o),t);case 12:l.socketManager.emit(Kv.offDeviceTokenRefresh,{actionGrant:a,offDeviceRedemptionFlow:u}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),l.socketManager.emit(Kv.offDeviceTokenRefresh,{exception:e.t0});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.OffDeviceTokenRefreshMessageProcessor"}}],r&&qb(t.prototype,r),n&&qb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Iv);function Zb(e){return Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(e)}function em(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tm(e,t){return tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tm(e,t)}function rm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=om(e);if(t){var o=om(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nm(this,r)}}function nm(e,t){if(t&&("object"===Zb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function om(e){return om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},om(e)}var im=rh.Internal.Dust.DustUrnReference.socket,am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tm(e,t)}(i,e);var t,r,n,o=rm(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=im.socketManager.reconnect;return(t=o.call(this,r)).socketManager=e,t}return t=i,(r=[{key:"process",value:function(e){this.socketManager.reconnect(e.data.region)}},{key:"toString",value:function(){return"SDK.Socket.ReconnectMessageProcessor"}}])&&em(t.prototype,r),n&&em(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Iv);function cm(e){return cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(e)}function sm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function um(e,t){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},um(e,t)}function lm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pm(e);if(t){var o=pm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return fm(this,r)}}function fm(e,t){if(t&&("object"===cm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pm(e){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pm(e)}var hm=rh.Internal.Dust.DustUrnReference.socket,dm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&um(e,t)}(i,e);var t,r,n,o=lm(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=hm.socketManager.refresh;return(t=o.call(this,r)).socketManager=e,t}return t=i,(r=[{key:"process",value:function(e){var t=e.data.reason;this.socketManager.emit(Kv.tokenRefreshRequested,{reason:t})}},{key:"toString",value:function(){return"SDK.Socket.RefreshMessageProcessor"}}])&&sm(t.prototype,r),n&&sm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Iv);function ym(e){return ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(e)}function gm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vm(e,t){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vm(e,t)}function bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=wm(e);if(t){var o=wm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return mm(this,r)}}function mm(e,t){if(t&&("object"===ym(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wm(e)}var Sm=rh.Internal.Dust.DustUrnReference.socket,km=rh.Util,xm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vm(e,t)}(i,e);var t,r,n,o=bm(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=Sm.socketManager.received;return(t=o.call(this,r)).socketManager=e,t}return t=i,r=[{key:"process",value:function(e){var t=km.getSafe((function(){return e.data.eventId})),r=km.getSafe((function(){return e.data.status})),n=km.getSafe((function(){return e.data.retriesExhausted}));if(t)for(var o=0,i=this.socketManager.unacknowledgedBuffer.length;o<i;o++){var a=this.socketManager.unacknowledgedBuffer[o];if(t===a.id){this.socketManager.unacknowledgedBuffer.splice(o,1);var c=a.accessToken,s=Object.assign({},a);delete s.accessToken,n||("rejected.internal-failure"===r?this.socketManager.sendSocketMessage(s):"rejected.envelope-subject-invalid"===r&&this.socketManager.sendSessionAuthentication({message:s,accessToken:c}));break}}this.socketManager.pingPongMessageProcessor.reset()}},{key:"toString",value:function(){return"SDK.Socket.ReceivedMessageProcessor"}}],r&&gm(t.prototype,r),n&&gm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Iv);function Em(e){return Em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Em(e)}function Om(){Om=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Em(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Tm(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Pm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jm(e,t){return jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jm(e,t)}function _m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Cm(e);if(t){var o=Cm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Am(this,r)}}function Am(e,t){if(t&&("object"===Em(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cm(e){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cm(e)}var Rm=rh.Internal.Dust.DustUrnReference.socket,Dm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jm(e,t)}(c,e);var t,r,n,o,i,a=_m(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var r=e.socketManager,n=e.tokenManager,o=e.logger,i=Rm.socketManager.unauthenticated;return(t=a.call(this,i)).socketManager=r,t.tokenManager=n,t.logger=o,t}return t=c,r=[{key:"process",value:(o=Om().mark((function e(t){var r,n,o,i;return Om().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,o=(n=void 0===r?{}:r).code,i=n.description,this.socketManager.enabled){e.next=6;break}return this.logger.error("UnauthenticatedMessageProcessor","Socket token refresh disabled."),e.abrupt("return");case 6:if("access-token.invalid"!==o||!["auth.invalidated","auth.expired"].includes(i)){e.next=11;break}return e.next=9,this.tokenManager.refreshAccessToken();case 9:e.next=12;break;case 11:this.logger.error("UnauthenticatedMessageProcessor","Unauthenticated message with unknown data: ".concat(JSON.stringify(t)));case 12:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){Tm(i,r,n,a,c,"next",e)}function c(e){Tm(i,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.UnauthenticatedMessageProcessor"}}],r&&Pm(t.prototype,r),n&&Pm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(Iv);const Im=kt()({redeem:null,request:null});function Lm(e){return Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(e)}function Mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nm(e,t){return Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nm(e,t)}function Fm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Um(e);if(t){var o=Um(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bm(this,r)}}function Bm(e,t){if(t&&("object"===Lm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Um(e){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Um(e)}var Gm=rh.Internal.Dust.DustUrnReference.socket.socketManager,zm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nm(e,t)}(i,e);var t,r,n,o=Fm(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=[Gm.ageVerificationRequestCompleted,Gm.ageVerificationRequestErrored,Gm.ageVerificationRedeemCompleted,Gm.ageVerificationRedeemErrored];return(t=o.call(this,r)).socketManager=e,t}return t=i,(r=[{key:"process",value:function(e){var t=e.type,r=e.data,n={deviceId:r.deviceId,accountId:r.accountId,profileId:r.profileId,errorCode:r.errorCode,timestamp:r.timestamp,flowType:[Gm.ageVerificationRequestCompleted,Gm.ageVerificationRequestErrored].includes(t)?Im.request:Im.redeem};this.socketManager.emit(Kv.ageVerificationChanged,n)}},{key:"toString",value:function(){return"SDK.Socket.AgeVerificationMessageProcessor"}}])&&Mm(t.prototype,r),n&&Mm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Iv);function Vm(e){return Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vm(e)}function qm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Km(e,t){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Km(e,t)}function Wm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ym(e);if(t){var o=Ym(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Hm(this,r)}}function Hm(e,t){if(t&&("object"===Vm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ym(e)}var Xm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Km(e,t)}(i,e);var t,r,n,o=Wm(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).extras=r,n}return t=i,(r=[{key:"toString",value:function(){return"SDK.Services.Socket.SocketClientConfiguration"}}])&&qm(t.prototype,r),n&&qm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(tr);function Jm(e){return Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(e)}function $m(){$m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Jm(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Qm(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Zm(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Qm(i,n,o,a,c,"next",e)}function c(e){Qm(i,n,o,a,c,"throw",e)}a(void 0)}))}}function ew(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rw(e,t)}function nw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=aw(e);if(t){var o=aw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ow(this,r)}}function ow(e,t){if(t&&("object"===Jm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iw(e)}function iw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aw(e)}var cw=rh.Internal.Dust.DustUrnReference.socket,sw=rh.Util,uw=qy.TokenManager,lw=rh.Token.AccessToken,fw=_v.SessionManager,pw=rh.Exception.ErrorReason,hw=rh.Exception.ServiceException,dw=rh.Exception.ProviderException,yw=1e3,gw=1008,vw=1011,bw=4e3,mw=4001,ww=[cv.OPEN,cv.CONNECTING];function Sw(){var e=!1;try{e="WebSocket"in r.g&&r.g.WebSocket.CLOSING===cv.CLOSING}catch(e){}if(!e)throw new dw("WebSockets are not supported in this environment")}var kw,xw,Ew,Ow,Tw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}(b,e);var t,r,o,i,a,c,s,u,l,f,p,h,d,y,g,v=nw(b);function b(e){var t;ew(this,b),t=v.call(this);var r={options:n.Types.object({config:n.Types.instanceStrict(xb),clientConfig:n.Types.instanceStrict(Xm),tokenManager:n.Types.instanceStrict(uw),sessionManager:n.Types.instanceStrict(fw),logger:n.Types.instanceStrict(wt.Logger),environmentConfiguration:n.Types.instanceStrict(Dt.EnvironmentConfiguration),bootstrapConfiguration:n.Types.instanceStrict(Ct),deviceAttributeProvider:n.Types.instanceStrict(Sd)})};(0,n.typecheck)(iw(t),r,arguments);var o=e.config,i=e.clientConfig,a=e.tokenManager,c=e.sessionManager,s=e.logger,u=e.environmentConfiguration,l=e.bootstrapConfiguration,f=e.deviceAttributeProvider,p=u.deviceProfile,h=u.applicationRuntime;t.config=o,t.clientConfig=i,t.client={dustEnabled:!0},t.tokenManager=a,t.sessionManager=c,t.bootstrapConfiguration=l,t.deviceAttributeProvider=f,t.deviceProfile=p,t.logger=s,t.socket=null,t.oldSocket=null,t.protocolHeaders=[],t.queryString="",t.enabled=!t.config.disabled,t.source="".concat(cw.socketManager.sourcePrefix,":").concat(p,":").concat(h),t.url="",t.reconnectCodes=[gw,vw,bw,mw],t.errorCodes=[1013],t.closeCodes={CLIENT_REQUESTED:yw},t.retryAttempts=0,t.retryPolicy=t.config.extras.retryPolicy,t.retryDelay=1e3*t.retryPolicy.retryBasePeriod,t.init=t.init.bind(iw(t)),t.userStartAttemptTimeout=4e3,t.policies=null;var d=t.clientConfig.extras.unacknowledgedEventBuffer||{},y=d.maxSize,g=isNaN(Number(y));return t.maxUnacknowledgedBufferSize=g?100:y,t.unacknowledgedBuffer=[],t.nonAcknowledgedMessageTypes=[cw.socketManager.ping],t.awaitingConnectionBuffer=[],t.pingPongMessageProcessor=new Bb({socketManager:iw(t),config:o,logger:s}),t.reconnectionTimerInterval=2e4,t.reconnectionTimerId=0,t.duplicateEventBuffer=[],t.tokenManager.on(Nt.TokenRefreshFailed,(function(e){e&&e.hasResetToAnonymousToken||(t.enabled=!1)})),t.tokenManager.on(Nt.AccessChanged,(function(){t.enabled=!t.config.disabled})),t.logger.log(t.toString(),"Created."),t}return t=b,r=[{key:"init",value:(g=Zm($m().mark((function e(t){var r,o,i,a,c,s=arguments;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=3;break}return this.emitConnectionState(av.disabled),e.abrupt("return");case 3:try{r={token:n.Types.instanceStrict(lw)},(0,n.typecheck)(this,"init",r,s),Sw(),o=this.clientConfig.extras,i=o.protocolHeaders,a=o.supportedProtocols,c=o.headers,this.protocolHeaders=Object.keys(i).filter((function(e){return a.includes(e)})).map((function(e){return i[e]})),this.queryString=Object.keys(c).map((function(e){return"".concat(e,"=").concat(c[e])})).join("&"),this.setUrl(t.region),this.logger.info("SocketManager","Initiated."),this.emit(Kv.message,{origin:"init"})}catch(e){this.logger.error("SocketManager",e),this.emit(Kv.exception,{origin:"init",data:{error:e}})}case 4:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"checkIfReconnectionNeeded",value:function(){var e=this;this.reconnectionTimerId=setTimeout((function(){e.isSocketInReadyState(cv.CLOSED)&&e.beginReconnecting(),e.checkIfReconnectionNeeded()}),this.reconnectionTimerInterval)}},{key:"isSocketInReadyState",value:function(e){return this.socket&&this.socket.readyState===e}},{key:"start",value:(y=Zm($m().mark((function e(){var t,r,n,o,i,a=this;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.logger,r=this.toString(),this.enabled){e.next=7;break}throw n="SDK Sockets are disabled until a valid AccessToken is acquired.",this.config.disabled&&(n="SDK Sockets are disabled in the SDK config."),t.error(r,n),new hw(n);case 7:if(o=!1,this.checkIfReconnectionNeeded(),i=function e(){return new Promise((function(n,i){var c;function s(e){if(clearTimeout(c),e){t.error(r,e);var o=new hw(e);i(o)}else n()}if(!o)return a.isSocketInReadyState(cv.OPEN)?(t.info(r,"SDK Sockets already connected."),void s()):void(a.isSocketInReadyState(cv.CLOSING)?s("SDK Sockets closing."):a.isSocketInReadyState(cv.CLOSED)?s("SDK Sockets closed."):(setTimeout(Zm($m().mark((function t(){return $m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:s(t.sent),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),100),c=setTimeout((function(){a.isSocketInReadyState(cv.OPEN)||(o=!0,s("SDK Sockets timed out waiting for current connection to open"))}),a.userStartAttemptTimeout)))}))},!this.isSocketInReadyState(cv.OPEN)){e.next=13;break}return t.info(r,"SDK Sockets already connected."),e.abrupt("return",void 0);case 13:if(!this.isSocketInReadyState(cv.CONNECTING)){e.next=18;break}return t.log(r,"SDK Sockets Still connecting..."),e.next=17,i();case 17:return e.abrupt("return",e.sent);case 18:return e.abrupt("return",this.openSocket());case 19:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"stop",value:function(){return clearInterval(this.reconnectionTimerId),this.reconnectionTimerId=0,this.policies=null,this.duplicateEventBuffer=[],this.pingPongMessageProcessor.stop(),this.closeSocket(this.socket)}},{key:"enablePing",value:function(e){this.pingPongMessageProcessor.enable(e)}},{key:"disablePing",value:function(){this.pingPongMessageProcessor.disable()}},{key:"startPing",value:function(){this.isSocketInReadyState(cv.OPEN)&&this.pingPongMessageProcessor.start()}},{key:"stopPing",value:function(){this.isSocketInReadyState(cv.OPEN)&&this.pingPongMessageProcessor.stop()}},{key:"setUrl",value:function(e){var t={region:n.Types.nonEmptyString};(0,n.typecheck)(this,"setUrl",t,arguments);var r=this.clientConfig.extras.regionalEndpointMapping[e],o=this.clientConfig.endpoints[r].href;this.url=ze(o,this.queryString),this.emit(Kv.message,{origin:"setUrl",data:{url:this.url}})}},{key:"reconnect",value:(d=Zm($m().mark((function e(t){return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ignoreConnectionStateChanges=!0,e.next=3,this.tokenManager.refreshAccessToken();case 3:n.Check.assigned(t)?this.setUrl(t):this.closeExistingSocket(),e.prev=4,this.retryAttempts=0,this.beginReconnecting(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),e.t0;case 12:return e.prev=12,this.ignoreConnectionStateChanges=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[4,9,12,15]])}))),function(e){return d.apply(this,arguments)})},{key:"beginReconnecting",value:function(){var e=this;this.logger.info(this.toString(),"Beginning reconnection attempt"),this.retryAttempts++,this.retryDelay*=this.retryPolicy.retryMultiplier,this.retryDelay>1e3*this.retryPolicy.retryMaxPeriod&&(this.retryDelay=1e3*this.retryPolicy.retryMaxPeriod),setTimeout(Zm($m().mark((function t(){return $m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.openSocket();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.logger.error(e.toString(),"Failed to open socket");case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),this.retryDelay)}},{key:"isAuthenticated",value:function(e){return e.type===cw.socketManager.authenticated}},{key:"onError",value:function(e){var t=this.parseMessage(e);this.logger.error("SocketManager",t),this.emit(Kv.exception,{origin:"onError",data:t})}},{key:"onClose",value:function(e){var t,r=e.code,n=e.wasClean,o=e.reason,i=e.type,a=e.timeStamp,c=e.isTrusted,s=Kv.message,u=!1;this.logger.info("SocketManager",e),this.reconnectCodes.includes(r)&&this.canRetry()?(this.pingPongMessageProcessor.stop(),u=!0,this.beginReconnecting()):this.errorCodes.includes(r)&&(s=Kv.exception,t=new hw({reasons:[new pw(r,o)]})),!u&&this.isSocketInReadyState(cv.CLOSED)&&this.emitConnectionState(av.closed),this.emit(s,{origin:"onClose",data:{code:r,wasClean:n,reason:o,type:i,timeStamp:a,isTrusted:c,error:t}})}},{key:"canRetry",value:function(){return this.retryAttempts<this.retryPolicy.retryMaxAttempts}},{key:"parseMessage",value:function(e){var t={};return this.tryParseMessage(e,t),t.data}},{key:"tryParseMessage",value:function(e,t){try{return t.data=JSON.parse(e.data),!0}catch(e){var r={error:new hw({reasons:[new pw("",e)],exceptionData:e})};return this.emit(Kv.exception,{origin:"parseMessage",data:r}),t.data=r,!1}}},{key:"onOpen",value:function(){if(this.isSocketInReadyState(cv.CONNECTING))setTimeout(this.onOpen.bind(this),100);else{var e=this.bootstrapConfiguration.application,t={id:e.id,name:e.name,version:e.version},r=this.accessToken&&this.accessToken.token,n=this.getDeviceInfo(),o=new hv({eventType:cw.socketManager.authentication,schemaUrl:"https://github.bamtech.co/schema-registry/schema-registry/blob/master/dss/event/edge/1.0.0/sdk/authentication.oas2.yaml",data:{accessToken:r,application:t,device:n}}),i=this.sendMessage(o);this.logger.info(this.toString(),"Opening socket - sending authentication frame"),this.emit(Kv.message,{origin:"onOpen",data:i})}}},{key:"getDeviceInfo",value:function(){var e=this.deviceAttributeProvider.getDeviceAttributes(),t=bd.normalizeAttributes(e),r=t.manufacturer,n=t.operatingSystem,o=t.operatingSystemVersion,i=e.model;return{manufacturer:r,model:i=i||this.deviceProfile,operatingSystem:n,operatingSystemVersion:o,modelFamily:e.modelFamily}}},{key:"sendMessage",value:(h=Zm($m().mark((function e(t){var r,o,i,a,c=arguments;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={socketEvent:n.Types.instanceStrict(hv)},(0,n.typecheck)(this,"sendMessage",r,c),e.next=4,this.createMessageSubject();case 4:return o=e.sent,i=t.getSocketMessage({source:this.source,subject:o}),this.isSocketInReadyState(cv.OPEN)?(this.nonAcknowledgedMessageTypes.includes(i.type)||(a=Object.assign({},i,{accessToken:this.accessToken.token}),this.unacknowledgedBuffer.push(a)),this.unacknowledgedBuffer.length>this.maxUnacknowledgedBufferSize&&(this.logger.log(this.toString(),"Max unacknowledgedBuffer - removing oldest message"),this.unacknowledgedBuffer.shift()),this.sendSocketMessage(i)):(this.logger.log(this.toString(),"Socket is not open yet. Adding this message to the queue"),this.awaitingConnectionBuffer.push(i)),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"sendSocketMessage",value:function(e){var t={rawEvent:n.Types.nonEmptyObject};(0,n.typecheck)(this,"sendSocketMessage",t,arguments),this.socket.send(JSON.stringify(e))}},{key:"requestFlowControl",value:(p=Zm($m().mark((function e(t){return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.policies=t,e.next=3,this.sendFlowControl();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"createMessageSubject",value:(f=Zm($m().mark((function e(){var t,r,n,o;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.sessionManager.getInfo();case 3:if(!(t=e.sent)){e.next=12;break}if(r=sw.getSafe((function(){return t.id})),n=sw.getSafe((function(){return t.profile.id})),o=[],r&&o.push("sessionId=".concat(r)),n&&o.push("profileId=".concat(n)),!o.length){e.next=12;break}return e.abrupt("return",o.join());case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return f.apply(this,arguments)})},{key:"closeExistingSocket",value:function(){var e=this.oldSocket;return this.logger.info("SocketManager","closeExistingSocket"),this.oldSocket=null,this.closeSocket(e)}},{key:"closeSocket",value:function(e){return this.logger.log(this.toString(),"closeSocket"),"undefined"!=typeof WebSocket&&n.Check.instanceStrict(e,WebSocket)&&ww.includes(e.readyState)?(this.logger.log(this.toString(),"closing with readyState being: ".concat(cv[e.readyState])),e.close(this.closeCodes.CLIENT_REQUESTED),!0):(this.emit(Kv.message,{origin:"closeSocket",data:{readyState:e&&e.readyState}}),!1)}},{key:"flushAwaitingConnectionBuffer",value:(l=Zm($m().mark((function e(){var t,r;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSocketInReadyState(cv.OPEN)){e.next=6;break}return this.awaitingConnectionBuffer.length>0&&this.logger.info(this.toString(),"Socket is open. Sending ".concat(this.awaitingConnectionBuffer.length," messages that were waiting in the queue now.")),e.next=4,this.createMessageSubject();case 4:for(t=e.sent;this.awaitingConnectionBuffer.length>0;)(r=this.awaitingConnectionBuffer.shift()).subject||(r.subject=t),this.sendSocketMessage(r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"emitConnectionState",value:function(e){this.ignoreConnectionStateChanges||this.emit(Kv.connectionStateChanged,e)}},{key:"currentSocketReadyState",get:function(){return this.socket?this.socket.readyState:cv.CLOSED}},{key:"openSocket",value:function(){var e=this;return new Promise((function(t,r){var n=e.url,o=e.protocolHeaders,i=e.pingPongMessageProcessor,a=!1,c=new qv(e,(function(){a=!0,t()})),s=new am(e),u=new dm(e),l=new xm(e),f=new cb(e),p=new eb(e),h=new Qb({socketManager:e,tokenManager:e.tokenManager,logger:e.logger}),d=new zm(e),y=[c,l,new Dm({socketManager:e,tokenManager:e.tokenManager,logger:e.logger}),s,u,f,p,i,h,d];e.emitConnectionState(av.connecting),e.oldSocket=e.socket,e.socket=new WebSocket("".concat(n,"&X-Request-Id=").concat(il()),o),e.socket.onmessage=function(){var t=Zm($m().mark((function t(n){var o;return $m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processSocketMessage(y,n);case 2:a||(a=!0,o=new hw("Authentication frame not received"),r(o));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.socket.onopen=e.onOpen.bind(e),e.socket.onclose=e.onClose.bind(e),e.socket.onerror=function(t){r(t),e.onError.call(e,t)},e.emit(Kv.message,{origin:"openSocket",data:{url:n,protocolHeaders:o}})}))}},{key:"processSocketMessage",value:(u=Zm($m().mark((function e(t,r){var n,o,i,a,c,s,u,l=this;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.duplicateEventBuffer,o={},i=sw.getSafe((function(){return l.config.extras.messageDeduplicationStoreSize})),!this.tryParseMessage(r,o)){e.next=17;break}if(!(c=(a=o.data).id)||!n.includes(c)){e.next=9;break}return this.logger.info(this.toString(),"Message not processed by SDK due to duplicate event ".concat(r)),e.abrupt("return");case 9:return s=!1,u=t.map(function(){var e=Zm($m().mark((function e(t){return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.is(a)){e.next=6;break}return e.next=4,t.process(a);case 4:c&&(n.length>=i&&n.shift(),n.push(c)),s=!0;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.logger.error(l.toString(),"Failed to process message, ".concat(r.data,", ").concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e.next=13,Promise.all(u);case 13:s||this.logger.warn(this.toString(),"Message not processed by SDK ".concat(r.data)),this.emit(Kv.message,{origin:"onMessage",data:a}),e.next=18;break;case 17:this.logger.error(this.toString(),"Failed to parse message: ".concat(r.data));case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"sendFlowControl",value:(s=Zm($m().mark((function e(){var t,r;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.policies)||!this.isSocketInReadyState(cv.OPEN)){e.next=5;break}return r=new hv({eventType:cw.socketManager.flowControl,schemaUrl:"https://github.bamtech.co/schema-registry/schema-registry/blob/master/dss/event/edge/1.0.0/sdk/flow-control-request.oas2.yaml",data:{policies:t}}),e.next=5,this.sendMessage(r);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"postEdgeEvent",value:(c=Zm($m().mark((function e(t){var r;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new hv({eventType:cw.socketManager.event,schemaUrl:"https://github.bamtech.co/schema-registry/schema-registry-sdk/blob/series/0.X.X/yaml/dss/event/sdk/client/api/event.oas2.yaml",data:t}),e.next=3,this.sendMessage(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"sendSessionAuthentication",value:(a=Zm($m().mark((function e(t){var r,n,o,i,a,c,s;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.message,n=t.accessToken,o="sessionId=",i=r.subject.split(","),a=i.find((function(e){return e.includes(o)})),c=a.splice(o.length),s=new hv({eventType:cw.socketManager.sessionAuthentication,schemaUrl:"https://github.bamtech.co/schema-registry/schema-registry/blob/master/dss/event/edge/1.0.0/sdk/session-authentication.oas2.yaml",data:{sessionId:c,accessToken:n}}),e.next=8,this.sendMessage(s);case 8:return e.next=10,this.sendSocketMessage(r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"sendExposureExperiment",value:(i=Zm($m().mark((function e(t){var r;return $m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new hv({eventType:cw.socketManager.exposure,schemaUrl:"https://github.bamtech.co/schema-registry/schema-registry/blob/master/dss/event/experimentation/weaponx/2.0.0/weaponx-exposure.oas2.yaml",data:t}),e.next=3,this.sendMessage(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"accessToken",get:function(){return this.tokenManager.getAccessToken()}},{key:"toString",value:function(){return"SDK.Socket.SocketManager"}}],r&&tw(t.prototype,r),o&&tw(t,o),Object.defineProperty(t,"prototype",{writable:!1}),b}(ca());function Pw(e){return Pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pw(e)}function jw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Aw(){Aw=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Pw(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Cw(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Rw(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Cw(i,n,o,a,c,"next",e)}function c(e){Cw(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Dw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lw(e,t)}function Mw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Bw(e);if(t){var o=Bw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Nw(this,r)}}function Nw(e,t){if(t&&("object"===Pw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fw(e)}function Fw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bw(e)}function Uw(e,t,r,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Gw=rh.Util,zw=qe.socket.socketApi,Vw=gl.apiMethodDecorator.bind(null,zw),qw=(kw=Vw(),xw=Vw(),Ew=Vw({paramTypes:{socketEvent:n.Types.instanceStrict(hv)}}),Ow=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}(f,e);var t,r,o,i,a,c,s,u,l=Mw(f);function f(e){var t;Dw(this,f),t=l.call(this,e);var r={options:n.Types.object({socketManager:n.Types.instanceStrict(Tw)})};(0,n.typecheck)(Fw(t),r,arguments);var o=e.socketManager;return t.socketManager=o,t.dustEnabled=Gw.getSafe((function(){return t.socketManager.client.dustEnabled})),t.logger.info(t.toString(),"Created."),t}return t=f,r=[{key:"connectionState",get:function(){var e=this.socketManager.currentSocketReadyState;return this.socketManager.enabled?lv[e]||av.closed:av.disabled}},{key:"start",value:(u=Rw(Aw().mark((function e(){return Aw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.socketManager.start();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"stop",value:(s=Rw(Aw().mark((function e(){return Aw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.socketManager.stop();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"sendMessage",value:(c=Rw(Aw().mark((function e(t){var r,n;return Aw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jw(t.args,1),n=r[0],e.next=3,this.socketManager.sendMessage(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"on",value:function(e,t){return this.socketManager.on(e,t)}},{key:"off",value:function(e,t){return this.socketManager.off(e,t)}},{key:"requestFlowControl",value:(a=Rw(Aw().mark((function e(t){var r,o=arguments;return Aw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={policies:n.Types.array.of.instanceStrict(iv)},(0,n.typecheck)(this,"requestFlowControl",r,o),e.next=4,this.socketManager.requestFlowControl(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"enablePing",value:function(e){var t={options:n.Types.object({pingInterval:n.Types.number.optional,pongTimeout:n.Types.number.optional,pingMaxAttempts:n.Types.number.optional}).optional};(0,n.typecheck)(this,"enablePing",t,arguments),this.socketManager.enablePing(e)}},{key:"disablePing",value:function(){this.socketManager.disablePing()}},{key:"postEdgeEvent",value:(i=Rw(Aw().mark((function e(t){var r,o=arguments;return Aw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={edgeEvent:n.Types.instanceStrict(tv)},(0,n.typecheck)(this,"postEdgeEvent",r,o),e.next=4,this.socketManager.postEdgeEvent(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Socket.SocketApi"}}],r&&Iw(t.prototype,r),o&&Iw(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(ct),Uw(Ow.prototype,"start",[kw],Object.getOwnPropertyDescriptor(Ow.prototype,"start"),Ow.prototype),Uw(Ow.prototype,"stop",[xw],Object.getOwnPropertyDescriptor(Ow.prototype,"stop"),Ow.prototype),Uw(Ow.prototype,"sendMessage",[Ew],Object.getOwnPropertyDescriptor(Ow.prototype,"sendMessage"),Ow.prototype),Ow);function Kw(e){return Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kw(e)}function Ww(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yw(e,t)}function Xw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Qw(e);if(t){var o=Qw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Jw(this,r)}}function Jw(e,t){if(t&&("object"===Kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $w(e)}function $w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qw(e){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qw(e)}var Zw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yw(e,t)}(a,e);var t,r,o,i=Xw(a);function a(e){var t;Ww(this,a),t=i.call(this);var r={logger:n.Types.instanceStrict(wt.Logger)};return(0,n.typecheck)($w(t),r,arguments),t.socketApi=null,t.eventBufferReady=!1,t.isEnabled=!0,t.logger=e,t.initialized=!1,t}return t=a,r=[{key:"log",value:function(e){var t=e.extraData,r=void 0===t?{}:t;return this.isEnabled&&e.isPublic&&r.isEdge&&this.postEvent(e),Promise.resolve()}},{key:"enableEdgeSink",value:function(){this.isEnabled=!0}},{key:"disableEdgeSink",value:function(){this.isEnabled=!1}},{key:"initializeEdgeSink",value:function(e){var t={options:n.Types.object({socketApi:n.Types.instanceStrict(qw)})};(0,n.typecheck)(this,"initializeEdgeSink",t,arguments);var r=e.socketApi;this.socketApi=r,this.initialized=!0}},{key:"createEdgeEvent",value:function(e){var t=e.extraData,r=void 0===t?{}:t,n=r.urn,o=r.file,i=r.line,a=r.serviceRequests,c=r.startTime,s=r.totalDuration,u=r.error,l=r.sdkInstanceId;return new tv({invocation:{urn:n,location:{file:o,line:i}},startTime:c,totalDuration:s,services:a,error:u,sdkInstanceId:l})}},{key:"postEvent",value:function(e){try{var t=this.socketApi,r=this.createEdgeEvent(e);t.postEdgeEvent(r)}catch(e){this.logger.warn(this.toString(),"Error creating SDK.Internal.Dust.EdgeEvent ".concat(e.message))}}},{key:"toString",value:function(){return"SDK.Internal.Dust.EdgeSink"}}],r&&Hw(t.prototype,r),o&&Hw(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(wt.LogSink);const eS={DustSink:Qg,DustEvent:jg,EdgeEvent:tv,EdgeSink:Zw};function tS(e){return tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tS(e)}function rS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oS(e,t){return oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oS(e,t)}function iS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=sS(e);if(t){var o=sS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return aS(this,r)}}function aS(e,t){if(t&&("object"===tS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cS(e)}function cS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sS(e)}var uS=rh.Internal.Telemetry.StreamSampleClientPayload,lS=rh.Internal.Telemetry.StreamSamplePayload,fS=rh.Internal.Dust.DustUrnReference;const pS={Dust:eS,Telemetry:{TelemetryManager:yg,TelemetryEvent:Wy,EventBuffer:ug,StreamSampleTelemetryEvent:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oS(e,t)}(a,e);var t,r,o,i=iS(a);function a(e){var t;rS(this,a),t=i.call(this);var r={options:n.Types.object({playbackSessionId:n.Types.nonEmptyString,playhead:n.Types.greaterOrEqual(0).optional,bitrate:n.Types.number.optional,serverData:n.Types.object().optional,interactionId:n.Types.nonEmptyString.optional,extraData:n.Types.object().optional})};(0,n.typecheck)(cS(t),r,arguments);var o=e.playbackSessionId,c=e.playhead,s=e.bitrate,u=e.serverData,l=void 0===u?{}:u,f=e.interactionId,p=e.extraData,h=void 0===p?{}:p;return t.serverData=l,t.playbackSessionId=o,t.playhead=c||0,t.bitrate=s||0,t.event=fS.streamSample,t.timestamp=Date.now(),t.interactionId=f,t.extraData=h,t}return t=a,(r=[{key:"getPayload",value:function(){var e=this.serverData,t=this.event,r=this.playbackSessionId,n=this.playhead,o=this.bitrate,i=this.timestamp,a=this.interactionId,c=this.extraData.groupId,s=new uS({event:t,timestamp:i,playbackSessionId:r,playhead:n,bitrate:o,interactionId:a,groupId:c});return new lS({server:e,client:s})}},{key:"toString",value:function(){return"SDK.Internal.Telemetry.StreamSampleTelemetryEvent"}}])&&nS(t.prototype,r),o&&nS(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Wy)}};function hS(e){return hS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hS(e)}var dS,yS;function gS(){gS=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==hS(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function vS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mS(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function wS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kS(e,t){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kS(e,t)}function xS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=TS(e);if(t){var o=TS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ES(this,r)}}function ES(e,t){if(t&&("object"===hS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return OS(e)}function OS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TS(e){return TS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},TS(e)}var PS,jS,_S,AS,CS,RS,DS=rh.Internal.Dust.DustLogUtility,IS=qe.orchestration.orchestrationApi,LS=IS;const MS={OrchestrationApi:(dS=gl.apiMethodDecorator.bind(null,LS)({skipDustLogUtility:!0,paramTypes:{options:n.Types.object({query:n.Types.nonEmptyString,operationName:n.Types.nonEmptyString.warn,variables:n.Types.object().optional})}}),yS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kS(e,t)}(s,e);var t,r,o,i,a,c=xS(s);function s(e){var t;wS(this,s),t=c.call(this,e);var r={options:n.Types.object({orchestrationManager:n.Types.instanceStrict(Yd)})};(0,n.typecheck)(OS(t),r,arguments);var o=e.orchestrationManager;return t.orchestrationManager=o,t.dustEnabled=Le((function(){return t.orchestrationManager.client.dustEnabled})),t.logger.info(t.toString(),"Created."),t}return t=s,r=[{key:"query",value:(i=gS().mark((function e(t){var r,n,o,i,a,c,s,u;return gS().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,n=vS(t.args,1),o=n[0],i=o.operationName,a=this.logger,c=this.dustEnabled,s=i||"query",u=new DS({dustEnabled:c,logger:a,source:this.toString(),urn:IS.getOperationUrn(s),endpointKey:s,logTransaction:r}),e.prev=5,e.next=8,this.orchestrationManager.query(o,r);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(5),u.captureErrors(e.t0),e.t0;case 15:return e.prev=15,u.log(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[5,11,15,18]])})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){mS(o,r,n,a,c,"next",e)}function c(e){mS(o,r,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"toString",value:function(){return"SDK.Orchestration.OrchestrationApi"}}],r&&SS(t.prototype,r),o&&SS(t,o),Object.defineProperty(t,"prototype",{writable:!1}),s}(ct),PS=yS.prototype,jS="query",_S=[dS],AS=Object.getOwnPropertyDescriptor(yS.prototype,"query"),CS=yS.prototype,RS={},Object.keys(AS).forEach((function(e){RS[e]=AS[e]})),RS.enumerable=!!RS.enumerable,RS.configurable=!!RS.configurable,("value"in RS||RS.initializer)&&(RS.writable=!0),RS=_S.slice().reverse().reduce((function(e,t){return t(PS,jS,e)||e}),RS),CS&&void 0!==RS.initializer&&(RS.value=RS.initializer?RS.initializer.call(CS):void 0,RS.initializer=void 0),void 0===RS.initializer&&(Object.defineProperty(PS,jS,RS),RS=null),yS),OrchestrationManager:Yd};var NS=r(5813);const FS=kt()({bundle:null,notBundle:null,unknown:null});var BS=function(){function e(e){var t={options:n.Types.object({desc:n.Types.nonEmptyString.optional,id:n.Types.number,name:n.Types.nonEmptyString,partner:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,t,arguments);var r=e.id,o=e.name,i=e.desc,a=e.partner;this.id=r,this.name=o,this.description=i,this.partner=a}return e.prototype.toString=function(){return"SDK.Subscription.ProductEntitlement"},e}();const US=BS,GS=kt()({AVAILABLE:null,UNKNOWN:null,UNAVAILABLE:null});function zS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qS=rh.Exception.ErrorReason,KS=rh.Subscription.ProductRule,WS=function(){function e(t){zS(this,e);var r={options:n.Types.object({categoryCodes:n.Types.array.of.nonEmptyString.optional,error:n.Types.object({code:n.Types.nonEmptyString,description:n.Types.nonEmptyString}).optional,id:n.Types.number.optional,name:n.Types.nonEmptyString.optional,partner:n.Types.nonEmptyString.optional,productEntitlements:n.Types.array.of.nonEmptyObject.optional,rule:n.Types.nonEmptyObject.optional,sku:n.Types.nonEmptyString,status:n.Types.nonEmptyString,bundleType:n.Types.in(vp).optional})};(0,n.typecheck)(this,r,arguments);var o=t.categoryCodes,i=void 0===o?[]:o,a=t.error,c=t.id,s=t.name,u=t.partner,l=t.productEntitlements,f=void 0===l?[]:l,p=t.rule,h=t.sku,d=t.status,y=t.bundleType,g=null;n.Check.assigned(a)&&(g=new qS(a.code,a.description)),this.categoryCodes=i,this.id=c,this.name=s,this.sku=h,this.status=GS[d]||GS.UNKNOWN,this.error=g,this.entitlements=f.map((function(e){return new US(e)})),this.partner=u,this.rule=p?new KS(p):null,this.bundleType=y}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Subscription.Product"}}])&&VS(t.prototype,r),o&&VS(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const HS=kt()({BAMTECH:null,APPLE:null,GOOGLE:null,ROKU:null,SAMSUNG:null,HULU:null,AMAZON:null,VERIZON:null,NO_PAYMENT:null,CANAL:null,FREE:null,BOUYGUES:null,SKYUK:null,MOVISTAR:null,TIM:null,ORANGE:null,DETELEKOM:null,SFR:null,O2:null});function YS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var JS=rh.Subscription.SubscriptionSourceSubType,$S=rh.Subscription.SubscriptionSourceType,QS=function(){function e(t){YS(this,e);var r={options:n.Types.object({provider:n.Types.nonEmptyString,ref:n.Types.nonEmptyString,type:n.Types.nonEmptyString,subType:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o=t.provider,i=t.ref,a=t.subType,c=t.type;this.provider=HS[o]||o,this.ref=i,this.subType=JS[a]||JS.OTHER,this.type=$S[c]||c}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Subscription.SubscriptionSource"}}])&&XS(t.prototype,r),o&&XS(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ZS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ek(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tk=function(){function e(t){ZS(this,e);var r={options:n.Types.object({profileId:n.Types.nonEmptyString,profileName:n.Types.nonEmptyString,attributes:n.Types.object().optional,metadata:n.Types.object().optional})};(0,n.typecheck)(this,r,arguments);var o=t.profileId,i=t.profileName,a=t.attributes,c=void 0===a?{}:a,s=t.metadata,u=void 0===s?{}:s;this.profileId=o,this.profileName=i,this.attributes=c,this.metadata=u}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Account.UserProfile"}}])&&ek(t.prototype,r),o&&ek(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ok=function(){function e(t,r){rk(this,e);var o={identityId:n.Types.nonEmptyString,providerId:n.Types.nonEmptyString};(0,n.typecheck)(this,o,arguments),this.identityId=t,this.providerId=r}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Account.Identity"}}])&&nk(t.prototype,r),o&&nk(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ik(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ck=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ik(this,e);var r={options:n.Types.object({accountId:n.Types.nonEmptyString,activeUserProfile:n.Types.instanceStrict(tk),attributes:n.Types.object().optional,identities:n.Types.array.of.object().optional})};(0,n.typecheck)(this,r,arguments);var o=t.accountId,i=t.activeUserProfile,a=t.attributes,c=void 0===a?{}:a,s=t.identities,u=void 0===s?[]:s;this.accountId=o,this.activeProfile=i,this.attributes=c,this.identities=u.map((function(e){return new ok(e.identityId,e.providerId)}))}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"SDK.Services.Account.Account"}}])&&ak(t.prototype,r),o&&ak(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lk=rh.Subscription.ProductRule,fk=rh.Subscription.SubscriptionCancellation,pk=rh.Subscription.SubscriptionExpiryType,hk=rh.Subscription.SubscriptionStatus,dk=rh.Subscription.SubscriptionType,yk=rh.Subscription.SubscriptionOffer,gk=rh.Subscription.SubscriptionFreeTrial,vk=function(){function e(t){sk(this,e);var r={options:n.Types.object({accountId:n.Types.nonEmptyString.optional,deviceId:n.Types.nonEmptyString.optional,expirationDate:n.Types.nonEmptyString.optional,expiryType:n.Types.nonEmptyString.optional,externalIdentity:n.Types.nonEmptyString.optional,id:n.Types.nonEmptyString,isActive:n.Types.boolean,lastSyncDate:n.Types.nonEmptyString.optional,nextRenewalDate:n.Types.nonEmptyString.optional,products:n.Types.array.of.instanceStrict(Object),rule:n.Types.nonEmptyObject.optional,source:n.Types.object(),startDate:n.Types.nonEmptyString.optional,status:n.Types.object(),type:n.Types.nonEmptyString.optional,purchaseDate:n.Types.dateString.optional,bundle:n.Types.boolean.optional,offer:n.Types.object().optional,freeTrial:n.Types.object().optional,cancellation:n.Types.object().optional,earlyAccess:n.Types.boolean.optional,paymentProvider:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,r,arguments);var o,i=t.accountId,a=t.deviceId,c=t.expirationDate,s=t.expiryType,u=t.externalIdentity,l=t.id,f=t.isActive,p=t.lastSyncDate,h=t.nextRenewalDate,d=t.products,y=void 0===d?[]:d,g=t.rule,v=t.source,b=t.startDate,m=t.status,w=t.type,S=t.purchaseDate,k=t.bundle,x=t.offer,E=t.freeTrial,O=t.cancellation,T=t.earlyAccess,P=t.paymentProvider;n.Check.assigned(k)&&(o=k?FS.bundle:FS.notBundle),this.expirationDate=c?new Date(c):null,this.expiryType=pk[s]||pk.UNKNOWN,this.id=l,this.isActive=f,this.nextRenewalDate=h?new Date(h):null,this.products=y.map((function(e){return new WS(e)})),this.startDate=b?new Date(b):null,this.status=new hk(m),this.provider=HS[v.provider]||HS.OTHER,this.accountId=i,this.deviceId=a,this.externalIdentity=u,this.lastSyncDate=p?new Date(p):null,this.rule=g?new lk(g):null,this.source=new QS(v),this.type=dk[w],this.purchaseDate=S,this.bundleStatus=o||FS.unknown,this.offer=x?new yk(x):null,this.freeTrial=E?new gk(E):null,this.cancellation=O?new fk(O):null,this.earlyAccess=T,this.paymentProvider=P}var t,r,o;return t=e,r=[{key:"isBoundToDevice",value:function(){return n.Check.nonEmptyString(this.deviceId)}},{key:"isBoundToAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.accountId,r=n.Check.assigned(t);return r&&n.Check.instanceStrict(e,ck)?t===e.accountId:r}},{key:"toString",value:function(){return"SDK.Subscription.Subscription"}}],r&&uk(t.prototype,r),o&&uk(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bk(e){return bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bk(e)}function mk(){mk=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==bk(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function wk(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Sk(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){wk(i,n,o,a,c,"next",e)}function c(e){wk(i,n,o,a,c,"throw",e)}a(void 0)}))}}function kk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ek=qy.AccessTokenProvider,Ok=rh.Configuration.SubscriptionManagerConfiguration,Tk=rh.Subscription.SubscriptionClient,Pk=function(){function e(t){kk(this,e);var r={options:n.Types.object({subscriptionManagerConfiguration:n.Types.instanceStrict(Ok),subscriptionClient:n.Types.instanceStrict(Tk),logger:n.Types.instanceStrict(wt.Logger),accessTokenProvider:n.Types.instanceStrict(Ek)})};(0,n.typecheck)(this,r,arguments);var o=t.subscriptionManagerConfiguration,i=t.subscriptionClient,a=t.logger,c=t.accessTokenProvider;this.config=o,this.client=i,this.logger=a,this.accessTokenProvider=c,this.logger.log(this.toString(),"Created.")}var t,r,o,i,a,c,s;return t=e,r=[{key:"getSubscriptions",value:(s=Sk(mk().mark((function e(t){var r,o;return mk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getSubscriptions(this.accessToken,t);case 2:return r=e.sent,o=[],n.Check.nonEmptyArray(r)&&r.forEach((function(e){o.push(new vk(e))})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"linkSubscriptionsFromDevice",value:(c=Sk(mk().mark((function e(t){return mk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.linkSubscriptionsFromDevice(this.accessToken,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getSubscriberInfo",value:(a=Sk(mk().mark((function e(t,r,n){return mk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getSubscriberInfo({state:t,includeChurned:r,accessToken:this.accessToken,logTransaction:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"getAccountSubscription",value:(i=Sk(mk().mark((function e(t,r){return mk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getAccountSubscription(t,this.accessToken,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"accessToken",get:function(){return this.accessTokenProvider.getAccessToken()}},{key:"toString",value:function(){return"SDK.Subscription.SubscriptionManager"}}],r&&xk(t.prototype,r),o&&xk(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),jk=rh.Subscriber.SubscriptionState,_k=rh.Util,Ak=qe.subscription.subscriptionApi,Ck=gl.apiMethodDecorator.bind(null,Ak);const Rk={SubscriptionApi:function(e){function t(t){var r=e.call(this,t)||this,o={options:n.Types.object({subscriptionManager:n.Types.instanceStrict(Pk)})};(0,n.typecheck)(r,o,arguments);var i=t.subscriptionManager;return r.subscriptionManager=i,r.dustEnabled=_k.getSafe((function(){return r.subscriptionManager.client.dustEnabled})),r.logger.info(r.toString(),"Created."),r}return(0,NS.ZT)(t,e),t.prototype.getSubscriptions=function(e){return(0,NS.mG)(this,void 0,void 0,(function(){var t;return(0,NS.Jh)(this,(function(r){switch(r.label){case 0:return t=e.logTransaction,[4,this.subscriptionManager.getSubscriptions(t)];case 1:return[2,r.sent()]}}))}))},t.prototype.getSubscriberInfo=function(e){return(0,NS.mG)(this,void 0,void 0,(function(){var t,r,n,o;return(0,NS.Jh)(this,(function(i){switch(i.label){case 0:return t=e.logTransaction,r=(0,NS.CR)(e.args,2),n=r[0],o=r[1],[4,this.subscriptionManager.getSubscriberInfo(n,o,t)];case 1:return[2,i.sent()]}}))}))},t.prototype.getAccountSubscription=function(e){return(0,NS.mG)(this,void 0,void 0,(function(){var t,r,n;return(0,NS.Jh)(this,(function(o){switch(o.label){case 0:return t=e.logTransaction,r=(0,NS.CR)(e.args,1),n=r[0],[4,this.subscriptionManager.getAccountSubscription(n,t)];case 1:return[2,o.sent()]}}))}))},t.prototype.toString=function(){return"SDK.Subscription.SubscriptionApi"},(0,NS.gn)([Ck(),(0,NS.w6)("design:type",Function),(0,NS.w6)("design:paramtypes",[Object]),(0,NS.w6)("design:returntype",Promise)],t.prototype,"getSubscriptions",null),(0,NS.gn)([Ck({paramTypes:{state:n.Types.in(jk).optional,includeChurned:n.Types.boolean.optional}}),(0,NS.w6)("design:type",Function),(0,NS.w6)("design:paramtypes",[Object]),(0,NS.w6)("design:returntype",Promise)],t.prototype,"getSubscriberInfo",null),(0,NS.gn)([Ck({paramTypes:{subscriptionId:n.Types.nonEmptyString}}),(0,NS.w6)("design:type",Function),(0,NS.w6)("design:paramtypes",[Object]),(0,NS.w6)("design:returntype",Promise)],t.prototype,"getAccountSubscription",null),t}(ct),SubscriptionManager:Pk,BundleStatus:FS,Product:WS,ProductEntitlement:US,ProductStatus:GS,Subscription:vk,SubscriptionProvider:HS,SubscriptionSource:QS};function Dk(e){return Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dk(e)}function Ik(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mk(e,t){return Mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mk(e,t)}function Nk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Uk(e);if(t){var o=Uk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Fk(this,r)}}function Fk(e,t){if(t&&("object"===Dk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bk(e)}function Bk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uk(e){return Uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uk(e)}var Gk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mk(e,t)}(a,e);var t,r,o,i=Nk(a);function a(e){var t;Ik(this,a),t=i.call(this,e);var r={options:n.Types.object({telemetryManager:n.Types.instanceStrict(yg)})};(0,n.typecheck)(Bk(t),r,arguments);var o=e.telemetryManager;return t.telemetryManager=o,t.glimpseBuffer=o.trackingBuffer,t.qoeBuffer=o.qoeBuffer,t.logger.info(t.toString(),"Created."),t}return t=a,(r=[{key:"enable",value:function(e){this.getEventBuffer(e).validateEvents=!0}},{key:"disable",value:function(e){this.getEventBuffer(e).validateEvents=!1}},{key:"isEnabled",value:function(e){return this.getEventBuffer(e).validateEvents}},{key:"getEventBuffer",value:function(e){return e===Hy.glimpseValidation?this.glimpseBuffer:this.qoeBuffer}},{key:"toString",value:function(){return"SDK.DiagnosticsApi"}}])&&Lk(t.prototype,r),o&&Lk(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(ct);function zk(e){return zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zk(e)}function Vk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kk(e,t){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kk(e,t)}function Wk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xk(e);if(t){var o=Xk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Hk(this,r)}}function Hk(e,t){if(t&&("object"===zk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yk(e)}function Yk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xk(e){return Xk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xk(e)}var Jk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t)}(a,e);var t,r,o,i=Wk(a);function a(e){var t;Vk(this,a);var r=e.assertion,o=e.grant_type;t=i.call(this,o,r);var c={options:n.Types.object({assertion:n.Types.nonEmptyString,grant_type:n.Types.nonEmptyString.optional})};return(0,n.typecheck)(Yk(t),c,arguments),t.subjectTokenTypeKey="account",t}return t=a,(r=[{key:"toString",value:function(){return"SDK.Services.Account.AccountGrant"}}])&&qk(t.prototype,r),o&&qk(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(Wi.Grant);function $k(e){return $k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$k(e)}function Qk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ex(e,t){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ex(e,t)}function tx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=nx(e);if(t){var o=nx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return rx(this,r)}}function rx(e,t){if(t&&("object"===$k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nx(e){return nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nx(e)}var ox=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}(i,e);var t,r,n,o=tx(i);function i(){return Qk(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"toString",value:function(){return"SDK.ReauthorizationFailure"}}])&&Zk(t.prototype,r),n&&Zk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(qy.TokenRefreshFailure);const ix=kt()({unknown:null,none:null,basic:null,enhanced:null});function ax(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sx=function(){function e(t){ax(this,e);var r={logger:n.Types.instanceStrict(wt.Logger).optional};(0,n.typecheck)(this,r,arguments),this.logger=t||wt,this.logger.log(this.toString(),"Created provider")}var t,r,o;return t=e,(r=[{key:"getSupportedHdrTypes",value:function(){return[]}},{key:"getWidevineSecurityLevel",value:function(){return null}},{key:"getSupportedCodecs",value:function(){return[]}},{key:"getHdcpSecurityLevel",value:function(){return ix.unknown}},{key:"supportsAtmos",value:function(){return!1}},{key:"toString",value:function(){return"SDK.Media.MediaCapabilitiesProvider"}}])&&cx(t.prototype,r),o&&cx(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ux(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fx=function(){function e(t){ux(this,e);var r={logger:n.Types.instanceStrict(wt.Logger).optional};(0,n.typecheck)(this,r,arguments),this.logger=t||wt,this.logger.log(this.toString(),"Created provider")}var t,r,o;return t=e,(r=[{key:"availableCpuPercentage",value:function(){return null}},{key:"availableMemoryMb",value:function(){return null}},{key:"toString",value:function(){return"SDK.Platform.PlatformMetricsProvider"}}])&&lx(t.prototype,r),o&&lx(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function px(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dx,yx,gx,vx,bx,mx,wx,Sx,kx,xx,Ex,Ox,Tx,Px,jx=function(){function e(t){px(this,e);var r={options:n.Types.object({deviceGrant:n.Types.instanceStrict(pi),access:n.Types.instanceStrict(dc),sessionInfo:n.Types.instanceStrict(ja)})};(0,n.typecheck)(this,r,arguments);var o=t.deviceGrant,i=t.access,a=t.sessionInfo;this.deviceGrant=o,this.access=i,this.sessionInfo=a}var t,r,o;return t=e,o=[{key:"createWithSdkExtensionInfo",value:function(t){var r={options:n.Types.object({sdk:n.Types.object({grant:n.Types.object({device:n.Types.object()}),session:n.Types.nonEmptyObject,token:n.Types.object()}),region:n.Types.nonEmptyString.optional,provider:n.Types.nonEmptyString.optional})};(0,n.typecheck)(this,"createWithSdkExtensionInfo",r,arguments);var o=t.region,i=t.sdk,a=t.provider,c=i.grant.device,s=c.grantType,u=c.assertion,l=new pi(s,u),f=i.token,p=f.accessToken,h=f.tokenType,d=f.refreshToken,y=f.expiresIn,g=f.accessTokenType,v=new Mo({token:p,tokenType:h,refreshToken:d,expiresIn:y,region:o,accessTokenType:g}),b=[];a&&b.push(a);var m=new fc(b),w=new dc(v,m),S=ja.create(i.session);return new e({deviceGrant:l,access:w,sessionInfo:S})}},{key:"deserialize",value:function(t){var r=t.deviceGrant,n=r.grantType,o=r.assertion,i=new pi(n,o),a=new Mo(t.access.context),c=new fc(t.access.contextState.modes);return new e({deviceGrant:i,access:new dc(a,c),sessionInfo:ja.create(t.sessionInfo)})}}],(r=[{key:"toString",value:function(){return"SDK.InitializationState"}}])&&hx(t.prototype,r),o&&hx(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _x(e){return _x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(e)}function Ax(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rx(){Rx=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&r.call(g,o)&&(d=g);var v=h.prototype=f.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==_x(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,c(v,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(m.prototype),c(m.prototype,i,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Dx(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Ix(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Dx(i,n,o,a,c,"next",e)}function c(e){Dx(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Lx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nx(e,t){return Nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nx(e,t)}function Fx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gx(e);if(t){var o=Gx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bx(this,r)}}function Bx(e,t){if(t&&("object"===_x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ux(e)}function Ux(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gx(e)}function zx(e,t,r,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Vx=wt.LoggingApi,qx=rh.Util,Kx=rh.Configuration.BootstrapConfiguration,Wx=rh.Configuration.SdkSessionConfiguration,Hx=rh.Configuration.ServiceEnvironmentName,Yx=rh.Token.DelegationToken,Xx=rh.Internal.Dust.DustLogUtility,Jx=rh.Token.TokenClient,$x=rh.Internal.Telemetry.TelemetryClient,Qx=rh.Subscription.SubscriptionClient,Zx=rh.Orchestration.OrchestrationClient,eE=Th.ConfigurationManager,tE=iy.DeviceManager,rE=qy.TokenManager,nE=pS.Telemetry.TelemetryManager,oE=Rk.SubscriptionManager,iE=_v.SessionManager,aE=MS.OrchestrationManager,cE=qy.AccessContextState,sE=qy.AccessTokenProvider,uE=iy.DeviceAttributeProvider,lE=qy.DeviceGrantStorage,fE=qy.AccessStorage,pE=_v.FeatureFlagsStorage,hE=_v.SessionInfoStorage,dE=Rk.SubscriptionApi,yE=MS.OrchestrationApi,gE=rh.Exception.ServiceException,vE=rh.Exception.ExceptionReference,bE=rh.Exception.ErrorReason,mE=qe.sdkSession,wE=gl.apiMethodDecorator.bind(null,mE),SE=(dx=wE(),yx=wE({skipDustLogUtility:!0}),gx=wE(),vx=wE({skipDustLogUtility:!0,paramTypes:{reason:n.Types.nonEmptyString.optional}}),bx=wE(),mx=wE(),wx=wE({paramTypes:{accessState:n.Types.nonEmptyString}}),Sx=wE({skipDustLogUtility:!0,paramTypes:{grant:n.Types.nonEmptyString,provider:n.Types.nonEmptyString}}),kx=wE({paramTypes:{delegationToken:n.Types.instanceStrict(Yx),provider:n.Types.nonEmptyString}}),xx=wE({paramTypes:{provider:n.Types.nonEmptyString}}),Ex=wE(),Ox=wE({paramTypes:{featureId:n.Types.nonEmptyString}}),Tx=wE(),Px=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nx(e,t)}(E,e);var t,r,o,i,a,c,s,u,l,f,p,h,d,y,g,v,b,m,w,S,k,x=Fx(E);function E(e){var t;Lx(this,E);var r={options:n.Types.object({sdkSessionConfiguration:n.Types.instanceStrict(Wx),deviceGrantStorage:n.Types.instanceStrict(lE),accessStorage:n.Types.instanceStrict(fE),sessionInfoStorage:n.Types.instanceStrict(hE),featureFlagsStorage:n.Types.instanceStrict(pE),logger:n.Types.instanceStrict(wt.Logger),geoProvider:n.Types.instanceStrict(yy.GeoProvider).optional,mediaCapabilitiesProvider:n.Types.instanceStrict(sx).optional,platformMetricsProvider:n.Types.instanceStrict(fx),storage:n.Types.instanceStrict(Dt.Storage).optional,httpClient:n.Types.instanceStrict(Dt.HttpClient),managers:n.Types.object({deviceManager:n.Types.instanceStrict(tE),tokenManager:n.Types.instanceStrict(rE),telemetryManager:n.Types.instanceStrict(nE),subscriptionManager:n.Types.instanceStrict(oE),sessionManager:n.Types.instanceStrict(iE)}),metadata:n.Types.object({clientId:n.Types.nonEmptyString,clientApiKey:n.Types.nonEmptyString,environment:n.Types.keyIn(Hx),debugEnabled:n.Types.boolean}),accessTokenProvider:n.Types.instanceStrict(sE),sdkInstanceId:n.Types.nonEmptyString})};t=x.call(this),(0,n.typecheck)(Ux(t),r,arguments);var o=e.sdkSessionConfiguration,i=e.storage,a=e.accessStorage,c=e.deviceGrantStorage,s=e.sessionInfoStorage,u=e.featureFlagsStorage,l=e.mediaCapabilitiesProvider,f=e.platformMetricsProvider,p=e.accessTokenProvider,h=e.geoProvider,d=e.logger,y=e.httpClient,g=e.managers,v=e.metadata,b=e.sdkInstanceId;return t.config=o,t.accessStorage=a,t.deviceGrantStorage=c,t.sessionInfoStorage=s,t.featureFlagsStorage=u,t.logger=d,t.geoProvider=h||new yy.GeoProvider(t.logger),t.mediaCapabilitiesProvider=l||new sx(t.logger),t.platformMetricsProvider=f,t.storage=i||new rh.Storage(t.logger),t.httpClient=y,t.managers=g,t.accessTokenProvider=p,t.clientApiKey=v.clientApiKey||"",t.clientId=v.clientId||"",t.environment=v.environment||"",t.version=my.version,t.versionShort=my.versionShort,t.debugEnabled=v.debugEnabled||!1,t.commerceApi=null,t.commerce=null,t.mediaApi=null,t.socketApi=null,t.purchaseApi=null,t.paywallApi=null,t.externalAuthorizationApi=null,t.contentApi=null,t.invoiceApi=null,t.accountApi=null,t.userActivityApi=null,t.userProfileApi=null,t.entitlementApi=null,hr.plugins.forEach((function(e){e.createApi({sdkSession:Ux(t),logger:d})})),t.loggingApi=new Vx({logger:t.logger}),t.subscriptionApi=new dE({subscriptionManager:t.managers.subscriptionManager,logger:t.logger}),t.diagnosticsApi=new Gk({telemetryManager:t.managers.telemetryManager,logger:t.logger}),t.orchestrationApi=new yE({orchestrationManager:t.managers.orchestrationManager,logger:t.logger}),t.deviceAttributeProvider=t.managers.deviceManager.deviceAttributeProvider,t.managers.commerceManager&&t.managers.commerceManager.browserInfoProvider&&(t.browserInfoProvider=t.managers.commerceManager.browserInfoProvider),t.isInitialized=!1,t.dustEnabled=!0,t.sdkInstanceId=b,t.logger.info(t.toString(),"Created."),t}return t=E,r=[{key:"initialize",value:(k=Ix(Rx().mark((function e(t){var r,n;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.logTransaction,(n=this.logger).info(this.toString(),"Initialize."),!this.isInitialized){e.next=7;break}throw n.error(this.toString(),"Already initialized."),this.createAlreadyInitializedException();case 7:return e.prev=7,e.next=10,this.internalReauthorize({logTransaction:r});case 10:n.info(this.toString(),"Successfully initialized."),this.isInitialized=!0,this.enableDustSink(),e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(7),n.error("".concat(this.toString(),".initialize()"),e.t0),n.info("".concat(this.toString(),".initialize()"),"Dispatch ReauthorizationFailure event."),this.emit(qa.ReauthorizationFailure,new ox(e.t0)),e.t0;case 21:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(e){return k.apply(this,arguments)})},{key:"getInitializationState",value:(S=Ix(Rx().mark((function e(t){var r,n,o,i;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,n=this.deviceGrantStorage.getDeviceGrant(r),o=this.accessStorage.getAccess(),e.next=5,this.sessionInfoStorage.getSessionInfo();case 5:return i=e.sent,e.abrupt("return",new jx({deviceGrant:n,access:o,sessionInfo:i}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"initializeWithState",value:(w=Ix(Rx().mark((function e(t){var r,o,i,a,c=arguments;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={initializationState:n.Types.instanceStrict(jx)},(0,n.typecheck)(this,"initializeWithState",r,c),!this.isInitialized){e.next=4;break}throw this.createAlreadyInitializedException();case 4:return o=t.deviceGrant,i=t.access,a=t.sessionInfo,e.next=7,Promise.all([this.deviceGrantStorage.saveDeviceGrant(o),this.accessStorage.saveAccess(i),this.sessionInfoStorage.saveSessionInfo(a)]);case 7:this.isInitialized=!0,this.enableDustSink();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"reset",value:(m=Ix(Rx().mark((function e(t){return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internalReset(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"reauthorize",value:(b=Ix(Rx().mark((function e(t){return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internalReauthorize(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"getSessionToken",value:(v=Ix(Rx().mark((function e(){var t,r;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info(this.toString(),"Get current access token."),t=this.accessTokenProvider.getAccessToken(),r=qx.getSafe((function(){return t.token})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"getAccessState",value:(g=Ix(Rx().mark((function e(){var t;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info(this.toString(),"Get access state."),t=JSON.stringify(this.managers.tokenManager.getAccessState()),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"restoreAccessState",value:(y=Ix(Rx().mark((function e(t){var r,n,o,i;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.logTransaction,n=Ax(t.args,1),o=n[0],(i=this.logger).info(this.toString(),"Restore access state from another device or SDK instance."),!this.isInitialized){e.next=7;break}throw i.warn(this.toString(),"Already initialized."),this.createAlreadyInitializedException();case 7:return e.next=9,this.internalReset({logTransaction:r});case 9:return e.next=11,this.managers.tokenManager.restoreAccessState(o,r);case 11:this.isInitialized=!0,this.enableDustSink();case 13:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"authorize",value:(d=Ix(Rx().mark((function e(t){var r,n,o,i,a,c;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,n=Ax(t.args,2),o=n[0],i=n[1],a=new cE([i]),c=new Jk({assertion:o}),e.next=5,this.managers.tokenManager.exchangeGrant(c,a,r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"assumeIdentity",value:(h=Ix(Rx().mark((function e(t){var r,n,o,i,a,c,s;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,n=Ax(t.args,2),o=n[0],i=n[1],this.logger.info(this.toString(),'Assume identity for "'.concat(i,'"')),e.next=4,this.internalReset({logTransaction:r});case 4:return a=this.managers.tokenManager,c=a.storage.getAccess(),s=new cE([i]),o.actor=c.context.refreshToken,e.next=10,a.exchangeRequest(o,s,r);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"isAuthorized",value:(p=Ix(Rx().mark((function e(t){var r,n,o,i,a,c,s,u;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,n=Ax(t.args,1),o=n[0],this.logger.info(this.toString(),'Check authorization state for "'.concat(o,'"')),i=this.managers,a=i.sessionManager,c=i.tokenManager,e.next=6,c.hasAccessMode(o);case 6:if(!(s=e.sent)){e.next=9;break}return e.abrupt("return",s);case 9:return e.next=11,a.getInfo(r);case 11:if(!(u=e.sent)||!u.account){e.next=14;break}return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getSessionInfo",value:(f=Ix(Rx().mark((function e(t){var r;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,this.logger.info(this.toString(),"Get session information."),e.next=4,this.managers.sessionManager.getInfo(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getExperimentAssignment",value:(l=Ix(Rx().mark((function e(t){var r,o,i,a,c,s,u;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,o=Ax(t.args,1),i=o[0],(a=this.logger).info(this.toString(),"Get experiment assignment for feature ID: ".concat(i,".")),e.next=5,this.managers.sessionManager.getInfo(r);case 5:if(c=e.sent,s=c.experiments,u=s[i],!n.Check.not.assigned(u)){e.next=11;break}return a.warn(this.toString(),"Cannot find experiment assignment for feature ID: ".concat(i,".")),e.abrupt("return",null);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"createCustomerSupportCode",value:(u=Ix(Rx().mark((function e(t){var r,n,o;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,n=this.accessTokenProvider,this.logger.info(this.toString(),"Get customer service support code."),o=n.getAccessToken(),e.next=6,this.managers.customerServiceManager.createSupportCode(o,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"isEventsAtEdgeEnabled",get:function(){var e=this.logger.sinks.find((function(e){return n.Check.instanceStrict(e,Zw)}));return qx.getSafe((function(){return e.isEnabled}),!1)},set:function(e){e?this.enableEdgeSink():this.disableEdgeSink()}},{key:"getFeatureFlags",value:(s=Ix(Rx().mark((function e(){var t;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureFlagsStorage.getFeatureFlags();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"internalReset",value:(c=Ix(Rx().mark((function e(t){var r,o,i,a,c,s,u=arguments;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={options:n.Types.object({logTransaction:n.Types.instanceStrict(H)})},(0,n.typecheck)(this,"internalReset",r,u),o=t.logTransaction,this.logger.info(this.toString(),"Reset SDK to an anonymous state."),i=this.managers,a=i.sessionManager,c=i.socketManager,s=i.tokenManager,c.stopPing(),!a){e.next=9;break}return e.next=9,a.storage.clear();case 9:if(!s){e.next=12;break}return e.next=12,s.logout(o);case 12:c.startPing(),this.isInitialized=!0;case 14:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"internalReauthorize",value:(a=Ix(Rx().mark((function e(t){var r,o,i,a,c,s,u,l,f,p,h,d,y,g,v,b,m;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.logTransaction,o=t.args,i=Ax(o=void 0===o?[]:o,1),a=i[0],c=this.dustEnabled,s=this.logger,u=a?{reason:a}:void 0,s.info(this.toString(),"Reauthorize the current access."),l="reauthorize",f=new Xx({dustEnabled:c,logger:s,source:this.toString(),urn:mE.reauthorize,data:u,endpointKey:l,logTransaction:r}),e.prev=8,p=this.managers,h=p.deviceManager,d=p.orchestrationManager,y=p.tokenManager,g=!!this.deviceGrantStorage.getDeviceGrant(),e.next=13,h.getDeviceGrant(r);case 13:if(v=e.sent,b=y.getAccessToken(),g||!n.Check.assigned(v)||!n.Check.assigned(b)){e.next=18;break}return e.abrupt("return");case 18:if(!(g&&n.Check.assigned(v)&&n.Check.assigned(b))){e.next=24;break}return e.next=22,y.refreshAccessToken({forceRefresh:!0,reason:a,logTransaction:r});case 22:e.next=26;break;case 24:return e.next=26,y.exchangeGrant(v,new cE,r);case 26:return m=this.deviceAttributeProvider.getDeviceAttributes(),uE.validateAttributes(m),e.next=30,d.updateDeviceOperatingSystem(m,r);case 30:e.next=36;break;case 32:throw e.prev=32,e.t0=e.catch(8),f.captureErrors(e.t0),e.t0;case 36:return e.prev=36,f.log(),e.finish(36);case 39:case"end":return e.stop()}}),e,this,[[8,32,36,39]])}))),function(e){return a.apply(this,arguments)})},{key:"createAlreadyInitializedException",value:function(){var e=[new bE("","".concat(this.toString()," already initialized."))],t=vE.common.invalidState;return new gE({reasons:e,exceptionData:t})}},{key:"enableDustSink",value:function(){var e=this.logger.sinks.find((function(e){return n.Check.instanceStrict(e,Qg)?e:null}));e.initialized&&(e.enableDustSink(),e.emptySink())}},{key:"enableEdgeSink",value:function(){var e=this.logger.sinks.find((function(e){return n.Check.instanceStrict(e,Zw)}));e&&(e.initialized||e.initializeEdgeSink({socketApi:this.socketApi}),e.enableEdgeSink())}},{key:"disableEdgeSink",value:function(){var e=this.logger.sinks.find((function(e){return n.Check.instanceStrict(e,Zw)}));e&&e.disableEdgeSink()}},{key:"dispose",value:function(){this.isDisposed=!0;var e=this.managers,t=e.socketManager,r=e.telemetryManager,n=e.tokenManager;r&&r.dispose(),n&&n.clearRetryRefresh(),t&&t.closeExistingSocket()}},{key:"toString",value:function(){return"SDK.SdkSession"}}],o=[{key:"attachPlugin",value:function(e){hr.addPlugin(e)}},{key:"createManager",value:function(e){hr.plugins.forEach((function(t){t.createManager(e)}))}},{key:"createSdkSession",value:(i=Ix(Rx().mark((function e(t){var r,o,i,a=this,c=arguments;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wt,o=il(),i=c,r.sdkInstanceId=o,e.abrupt("return",H.wrapLogTransaction({file:E.prototype.toString(),urn:mE.createSdkSession,logger:r,action:function(){var e=Ix(Rx().mark((function e(c){var s,u,l,f,p,h,d,y,g,v,b,m,w,S,k,x,O,T,P,j,_,A,C,R,D,I,L,M,N,F,B,U,G,z,V,q,K,W,H,Y,X,J,$,Q,Z,ee;return Rx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={options:n.Types.object({bootstrapConfiguration:n.Types.instanceStrict(Kx),geoProvider:n.Types.instanceStrict(yy.GeoProvider).optional,mediaCapabilitiesProvider:n.Types.instanceStrict(sx).optional,platformMetricsProvider:n.Types.instanceStrict(fx).optional,deviceAttributeProvider:n.Types.instanceStrict(uE).optional,browserInfoProvider:n.Types.object({getBrowserInfo:n.Types.function}).optional})},(0,n.typecheck)(a,"createSdkSession",s,i),u=t.bootstrapConfiguration,l=t.geoProvider,f=t.mediaCapabilitiesProvider,p=t.deviceAttributeProvider,h=void 0===p?new Ad:p,d=t.browserInfoProvider,y=u.clientId,g=u.clientApiKey,v=u.environment,b=u.debugEnabled,m=u.application,w=u.useStorageCompression,S=t.platformMetricsProvider,k=void 0===S?new fx(r):S,x=r.sinks.find((function(e){return n.Check.instanceStrict(e,Qg)})),n.Check.not.assigned(x)&&(x=new Qg(r),r.addSink(x)),O=r.sinks.find((function(e){return n.Check.instanceStrict(e,Zw)})),n.Check.not.assigned(O)&&(O=new Zw(r),r.addSink(O)),r.console(b),r.info(E.name,"Create SDK session instance, ".concat(y,"/").concat(v,".")),r.info(E.name,"Version, ".concat(my.version,".")),r.info(E.name,"Debug mode enabled."),T=new Xx({logger:r,source:E.name,urn:mE.createSdkSession,logTransaction:c}),P=Object.create(null),j=new Mt({updateAccessToken:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=P.tokenManager.updateAccessToken).call.apply(e,[P.tokenManager].concat(r))},refreshAccessToken:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=P.tokenManager.refreshAccessToken).call.apply(e,[P.tokenManager].concat(r))},getAccessToken:function(){return P.tokenManager.getAccessToken.call(P.tokenManager)},once:function(){}