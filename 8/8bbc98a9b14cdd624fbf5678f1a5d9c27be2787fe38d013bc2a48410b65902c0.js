!function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);m.length;)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={60:0},o={60:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{68:1}[e]&&t.push(r[e]=new Promise((function(t,n){for(var a=({65:"polyfills-core-js",66:"polyfills-css-shim",67:"polyfills-dom"}[e]||e)+"-"+{3:"31d6cfe0d16ae931b73c",4:"31d6cfe0d16ae931b73c",5:"31d6cfe0d16ae931b73c",6:"31d6cfe0d16ae931b73c",7:"31d6cfe0d16ae931b73c",8:"31d6cfe0d16ae931b73c",9:"31d6cfe0d16ae931b73c",10:"31d6cfe0d16ae931b73c",11:"31d6cfe0d16ae931b73c",12:"31d6cfe0d16ae931b73c",13:"31d6cfe0d16ae931b73c",14:"31d6cfe0d16ae931b73c",15:"31d6cfe0d16ae931b73c",16:"31d6cfe0d16ae931b73c",17:"31d6cfe0d16ae931b73c",18:"31d6cfe0d16ae931b73c",19:"31d6cfe0d16ae931b73c",20:"31d6cfe0d16ae931b73c",21:"31d6cfe0d16ae931b73c",22:"31d6cfe0d16ae931b73c",23:"31d6cfe0d16ae931b73c",24:"31d6cfe0d16ae931b73c",25:"31d6cfe0d16ae931b73c",26:"31d6cfe0d16ae931b73c",27:"31d6cfe0d16ae931b73c",28:"31d6cfe0d16ae931b73c",29:"31d6cfe0d16ae931b73c",30:"31d6cfe0d16ae931b73c",31:"31d6cfe0d16ae931b73c",32:"31d6cfe0d16ae931b73c",33:"31d6cfe0d16ae931b73c",34:"31d6cfe0d16ae931b73c",35:"31d6cfe0d16ae931b73c",36:"31d6cfe0d16ae931b73c",37:"31d6cfe0d16ae931b73c",38:"31d6cfe0d16ae931b73c",39:"31d6cfe0d16ae931b73c",40:"31d6cfe0d16ae931b73c",41:"31d6cfe0d16ae931b73c",42:"31d6cfe0d16ae931b73c",43:"31d6cfe0d16ae931b73c",44:"31d6cfe0d16ae931b73c",45:"31d6cfe0d16ae931b73c",46:"31d6cfe0d16ae931b73c",47:"31d6cfe0d16ae931b73c",48:"31d6cfe0d16ae931b73c",49:"31d6cfe0d16ae931b73c",50:"31d6cfe0d16ae931b73c",51:"31d6cfe0d16ae931b73c",52:"31d6cfe0d16ae931b73c",53:"31d6cfe0d16ae931b73c",54:"31d6cfe0d16ae931b73c",55:"31d6cfe0d16ae931b73c",56:"31d6cfe0d16ae931b73c",57:"31d6cfe0d16ae931b73c",58:"31d6cfe0d16ae931b73c",65:"31d6cfe0d16ae931b73c",66:"31d6cfe0d16ae931b73c",67:"31d6cfe0d16ae931b73c",68:"c5b121112fab615775d7",69:"31d6cfe0d16ae931b73c",70:"31d6cfe0d16ae931b73c"}[e]+".css",o=s.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var l=(d=i[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===a||l===o))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var d;if((l=(d=u[c]).getAttribute("data-href"))===a||l===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],m.parentNode.removeChild(m),n(i)},m.href=o,document.getElementsByTagName("head")[0].appendChild(m)})).then((function(){r[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+({65:"polyfills-core-js",66:"polyfills-css-shim",67:"polyfills-dom"}[e]||e)+"-"+{3:"d29c25c9b7e2b70388a4",4:"7c8ab9d7b4a8d266d9bd",5:"80b3b806926825b161fd",6:"7e8922afe8171b6b1e8d",7:"45a312f35b9fcc12af64",8:"be76d1d9d8505b1ff44c",9:"f6230bdb1be8e38b28d1",10:"bdbf30ae4ffc8d197936",11:"df614a0f0f3f4f7f4cde",12:"f91e8cd6df79272350ed",13:"5151f4fe56f86b4c75a4",14:"b3cc174966d78047ff80",15:"31bbe94a8de44a8d4c77",16:"ff665abf853add65c987",17:"b353a7ad1db3a100e417",18:"78bd896433f701baf26f",19:"8993c96d4c931b94cf20",20:"d13b8c0f3c25361388cc",21:"9b2ca5cd8b5743538377",22:"8038b7fbd3a9e92f9fc6",23:"8f2ed91a9b27b434e5ae",24:"7b923bc48536c8141929",25:"9244d2de7aae8b8ae99f",26:"15c28f43ea4bf932afd5",27:"b4a3dd9615df29b059c1",28:"d860d1df865ff3d9798c",29:"39475d94743b5d0d2847",30:"3c7719ad052f20344766",31:"293f92521fe88fb41f19",32:"97433b51ae28ddf69ba6",33:"e143c3670c5143c9f14a",34:"abc73c12d93c0faad877",35:"ac1dcda99462f4995d01",36:"19617fc928fec31b9998",37:"fe1d4adf91ba58ffc8af",38:"08c1b90c74cfa3516b99",39:"3d763dfbf75874132e16",40:"2254331cbc8621b1e5cc",41:"4f297954226e0ea4ee4f",42:"f853f5a33e2c13f1fd3b",43:"db617bac31748c68a5ef",44:"18c271ade9f5fe725a32",45:"098c9657e310752083aa",46:"a188cda2b9b17706234d",47:"55c91e45b4f2a2173c67",48:"5c9f9726c4c3ef06a515",49:"a70f76179fef43adaf8b",50:"4257807deb1b6f639516",51:"756afc3a9d6ffe45ff9b",52:"ce714e270abad33476f4",53:"513ae8a9b72bf01b941f",54:"012c93b4964e5300662d",55:"5d151485fe516e1d2d3a",56:"24fe01d765d423497d58",57:"dfbcea6e54509b76705b",58:"4f915cba6dbc31dc28c7",65:"7043b657ff79a81b4cc8",66:"5fac6ec6a8c599d00c3c",67:"ccf5541a07aed8fbd5ad",68:"0cdde0c48beeb132a89b",69:"a683917544ede9ea1ca7",70:"f9008b33368558328339"}[e]+".js"}(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/livemap/assets/",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;i.push([733,1,2,0]),n()}({11:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return v}));var a=n(71),r=n(16),o=n(0),i=n(279);var s=n(5),c=n(20);var l=n(33),u=n(7);var d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const m=(p={experience:function(e=c.b.experience,t){switch(t.type){case s.W:case s.k:return c.a.INITIAL;case s.Y:return c.a.SHARE_DRIVE;case s.X:case s.A:case s.M:return c.a.ROUTING;default:return e}},shareDrive:function(e=c.b.shareDrive,t){switch(t.type){case s.Y:return Object.assign(Object.assign({},e),t.payload.shareDrive);case s.k:return;case s.yb:return Object.assign(Object.assign({},e),t.payload);case s.L:return t.payload;default:return e}},permalink:function(e=c.b.permalink,t){switch(t.type){case s.I:return function(e,t){const n=e?e.params:{},a=t?t.params:{};return Object.assign(Object.assign(Object.assign({},e),t),{params:Object.assign(Object.assign({},n),a)})}(e,t.payload);default:return e}},user:function(e=c.b.user,t){switch(t.type){case s.P:return t.payload;case s.S:return{id:-1,username:null};case s.Q:return Object.assign(Object.assign({},e),{favorites:t.payload});case s.R:return Object.assign(Object.assign({},e),{favoritesFetchError:t.payload});default:return e}},localeContext:function(e=c.b.localeContext,t){return t.type,e},routing:function(e=c.b.routing,t){switch(t.type){case s.W:return;case s.X:return t.payload;case s.A:return Object.assign(Object.assign({},e),{from:t.payload});case s.M:return Object.assign(Object.assign({},e),{to:t.payload});case s.H:return Object.assign(Object.assign({},e),{pendingPoi:t.payload});case s.E:return Object.assign(Object.assign({},e),{isRoutingEditing:t.payload});case s.c:return Object.assign(Object.assign({},e),{from:void 0,routes:void 0});case s.d:return Object.assign(Object.assign({},e),{to:void 0,routes:void 0});case s.o:return Object.assign(Object.assign({},e),{locked:!0});case s.J:return Object.assign(Object.assign({},e),{routes:t.payload,highlightedRoute:t.payload[0],locked:!1,error:void 0});case s.u:{const t=null!=e?e:{},{routes:n,error:a,highlightedRoute:r}=t,o=d(t,["routes","error","highlightedRoute"]);return Object.assign(Object.assign({},o),{locked:!1})}case s.T:return Object.assign(Object.assign({},e),{error:t.payload,locked:!1});case s.V:return Object.assign(Object.assign(Object.assign(Object.assign({},e),e&&{from:e.to}),e&&{to:e.from}),{fromToSwitched:!0});case s.w:return Object.assign(Object.assign({},e),{fromToSwitched:!1});case s.m:return Object.assign(Object.assign({},e),{highlightedRoute:t.payload});case s.K:return Object.assign(Object.assign({},e),t.payload);case s.v:{const t=null!=e?e:{},{at:n,reverse:a}=t;return d(t,["at","reverse"])}case s.U:return Object.assign(Object.assign({},e),{navigationRoute:t.payload});default:return e}},enrichment:function(e=c.b.enrichment,t){switch(t.type){case s.C:return Object.assign(Object.assign({},e),{from:Object.assign(Object.assign({},null==e?void 0:e.from),t.payload)});case s.O:return Object.assign(Object.assign({},e),{to:Object.assign(Object.assign({},null==e?void 0:e.to),t.payload)});case s.B:return Object.assign(Object.assign({},e),{from:Object.assign(Object.assign({},null==e?void 0:e.from),{reviews:t.payload})});case s.N:return Object.assign(Object.assign({},e),{to:Object.assign(Object.assign({},null==e?void 0:e.to),{reviews:t.payload})});default:return e}},isSidebarVisible:function(e=c.b.isSidebarVisible,t){switch(t.type){case s.r:return!0;case s.f:return!1;default:return e}},geolocation:function(e=c.b.geolocation,t){switch(t.type){case s.D:return t.payload;default:return e}},tourSteps:function(e=c.b.tourSteps,t){switch(t.type){case s.a:return[t.payload,...e];default:return e}},loginHook:function(e=c.b.loginHook,t){switch(t.type){case s.G:return t.payload;case s.S:return{state:u.h.INITIAL};case s.Q:if(e.state===u.h.LOGGING_IN){const e=t.payload;return Boolean(e.find(e=>e.type===u.e.HOME||e.type===u.e.WORK))?{state:u.h.OK}:{state:u.h.NO_FAVORITES}}return e;case s.R:return e.state===u.h.LOGGING_IN?{state:u.h.ERROR,error:new l.a("FAVORITES_FETCH_ERROR","Could not fetch favorites")}:e;default:return e}},landingPageContext:function(e=c.b.landingPageContext,t){return t.type,e},config:function(e=c.b.config,t){switch(t.type){case s.F:return t.payload;default:return e}},notifications:function(e={},t){switch(t.type){case s.xb:return Object.assign(Object.assign({},e),t.payload);default:return e}},isLanguageSelectorVisible:function(e=c.b.isLanguageSelectorVisible,t){switch(t.type){case s.q:return!0;case s.e:return!1;default:return e}}},(e,t)=>{const n={},a=Object.keys(p);for(const r of a){const a=p[r];n[r]=a(e&&e[r],t)}return n});var p;const f=Object(a.getSearchParamFlag)("wm_debug_store")?console:void 0,v=new class extends class{constructor(e,t,n){this.reducer=e,this.logger=n,this.reducer=e,this.state=e(t,{type:" "}),this.listeners=[],this.isDispatching=!1}getState(){return this.state}dispatch(e){if(this.logger&&this.logger.info("DISPATCH",e),this.isDispatching)throw new Error("Store: cannot dispatch while dispatching");this.isDispatching=!0;const t=this.state;try{this.state=this.reducer(this.state,e)}finally{this.isDispatching=!1}this.logger&&this.logger.info("NEW STATE",i(this.state)),this.listeners.forEach(e=>e(this.state,t))}subscribe(e){return this.listeners.push(e),()=>{this.listeners.splice(this.listeners.indexOf(e),1)}}}{constructor(e,t){super(m,e,t)}}(r.a.livemapState,f),h=o.createContext({dispatch:v.dispatch.bind(v),state:v.getState()});function E({value:e=v,children:t}){const[n,a]=o.useState(e.getState()),r=e.dispatch.bind(e),i=e.subscribe(e=>a(e));return o.useEffect(()=>i,[]),o.createElement(h.Provider,{value:{dispatch:r,state:n}},t)}},121:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(108),r=n(2),o=n(146);function i(e){return{title:s(e.seconds,e.isHOV),subtitle:c(e.label,e.tollPriceInfo)}}function s(e,t){const n=Object(o.a)(e,(e,t)=>Object(r.t)(e.replace(/^\./,""),Object.assign(Object.assign({},t),{scope:"livemap.time_short"})));return t?"◊ "+n:n}function c(e,t){var n;const a=null===(n=null==e?void 0:e.mapViewLabel)||void 0===n?void 0:n.routeTypeLabel;if(null==a?void 0:a.includes("__TOLL_PRICE__")){const e=u(t),n=e?a:"$$Toll";return Object(r.t)(n,{scope:"livemap.route.type",tollPrice:e})}return a?Object(r.t)(a,{scope:"livemap.route.type"}):""}function l(e){var t,n;const a=null===(t=null==e?void 0:e.extraInfoLabel)||void 0===t?void 0:t.routeTypeLabel,o=null===(n=null==e?void 0:e.extraInfoLabel)||void 0===n?void 0:n.trafficStatusLabel,i=a&&Object(r.t)(a,{scope:"livemap.route.type"}),s=o&&Object(r.t)(o,{scope:"livemap.route.traffic_status"});return i&&s?Object(r.t)("livemap.route.type_with_traffic_status",{routeType:i,trafficStatus:s}):i||s||""}function u({tollPrice:e,tollPriceCurrencyCode:t}={}){var n;return e&&t&&null!==(n=Object(a.a)(e,t))&&void 0!==n?n:""}},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{constructor(e,t){this.geoEnv=e,this.latLngs=t.latLngs,this.name=t.name,this.type=t.type,this.requiredPermits=t.requiredPermits,this.areas=t.areas,this.isBlocked=t.isBlocked,this.isInvalid=t.isInvalid,this.isRestricted=t.isRestricted,this.passesThroughDangerArea=t.passesThroughDangerArea,this.meters=t.meters,this.seconds=t.seconds,this.isToll=t.isToll,this.isHOV=t.isHOV,this.isFastest=t.isFastest,this.etaHistograms=t.etaHistograms,this.label=t.label,this.tollPriceInfo=t.tollPriceInfo,this.hovRouteInfo=t.hovRouteInfo,this.alerts=t.alerts,this.jams=t.jams,this.routeAttr=t.routeAttr,this.distances=this.getDistances(),this.distance=this.distances.get(this.latLngs.slice(-1)[0])}distanceAt(e){const t=this.distances.get(e);if(null==t)throw new Error("Route does not contain "+e);return t}project(e,t){const n=this.findClosestIndex(e),a=this.findClosestIndex(t,n);return[this.latLngs[n],this.latLngs[a]]}findClosestIndex(e,t=0){let n=t,a=this.latLngs[n].distanceTo(e);for(let r=t;r<this.latLngs.length;r++){const t=this.latLngs[r].distanceTo(e);t<a&&(a=t,n=r)}return n}getDistances(){var e;const t=new Map;let n,a=0;for(const r of this.latLngs)a+=null!==(e=null==n?void 0:n.distanceTo(r))&&void 0!==e?e:0,t.set(r,a),n=r;return t}}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(45);function r(e,t){return function(e,t){if(0===e.hours)return t(".minutes",e);if(0===e.minutes)return t(".hours",e);return t(".hours_minutes",e)}(Object(a.d)(e),t)}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(8),r=n(18),o=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};class i extends a.Marker{constructor(e,t){var{content:n}=t;super(e,o(t,["content"])),this.content=n}onAdd(e){return super.onAdd(e),Object(r.render)(this.content,this.getElement()),this}onRemove(e){return Object(r.unmountComponentAtNode)(this.getElement()),super.onRemove(e),this}}},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0);var r=n(239);function o(e,t){const n=Object(r.a)(t.getBoundingClientRect(),-16),a=e.getBoundingClientRect();!function(e,t){const n=Number.parseFloat(getComputedStyle(e).left);e.style.left=n+t+"px",e.style.right="auto",e.style.transformOrigin=`calc(50% - ${t}px) 50%`}(e,function(e,t){const n=t.x-e.x,a=n+t.width-e.width;if(n>0)return n;if(a<0)return a;return 0}(a,n))}n(680);const i=({title:e,children:t})=>{const n=a.useRef(null),r=a.useRef(document.querySelector(".wz-map-placeholder__container")),i=a.useCallback(()=>{var e,t;o(n.current,r.current),e=n.current,t=r.current,e.getBoundingClientRect().y<t.getBoundingClientRect().y&&e.classList.add("flip-y")},[]),s=a.useCallback(()=>{var e;n.current.classList.remove("flip-y"),(e=n.current).style.removeProperty("left"),e.style.removeProperty("right"),e.style.removeProperty("transform-origin")},[]);return a.createElement("div",{className:"wz-waypoint-tooltip",onMouseOver:i,onMouseOut:s},t,a.createElement("div",{ref:n,className:"wz-waypoint-tooltip__title"},e))}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var a,r,o=n(7);!function(e){e.INITIAL="initial",e.SHARE_DRIVE="share_drive",e.ROUTING="routing"}(a||(a={})),function(e){e.OTHER="other",e.CLEAN="clean",e.ROUTING_TO="routing_to",e.ROUTING_FROM="routing_from",e.ROUTING_FROM_TO="routing_from_to",e.SHARE_DRIVE="share_drive"}(r||(r={}));const i={experience:a.INITIAL,isSidebarVisible:!1,routing:{},enrichment:{},geolocation:{state:o.g.AVAILABLE},tourSteps:[],loginHook:{state:o.h.INITIAL},config:void 0}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));n(40);var a=n(0);const r=a.createContext(null);function o(e,t=[]){const n=a.useContext(r);return a.useEffect(()=>{if(null!=n)return e(n)},[n,...t])}function i(e,t){const n=a.useRef();a.useEffect(()=>{n.current=t},[t]),o(t=>{function a(){null!=n.current&&n.current(t)}return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}},[])}},236:function(e,t,n){},237:function(e,t,n){},239:function(e,t,n){"use strict";function a(e,t,n=t){const a=e.x-t,r=e.y-n,o=e.width+2*t,i=e.height+2*n;return new DOMRect(a,r,o,i)}n.d(t,"a",(function(){return a}))},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);function r(e){return t=function(e){const t=[];for(const n of e)t.push("lat"in n?n.lat:n.y),t.push("lng"in n?n.lng:n.x);return new Float64Array(t).buffer}(e),String.fromCodePoint(...new Uint8Array(t));var t}function o(e){return Object(a.useMemo)(()=>{const t=new Map;for(const n of e){const e=r(n.latLngs);t.has(e)||t.set(e,[]),t.get(e).push(n)}return t},[e])}},293:function(e,n,a){var r=a(35);e.exports=function(e){var n,a="",o=e||{};return function(e){a=a+'<div class="wz-popup-overlay"><div class="wz-popup"><div class="wz-popup-content"><div class="wz-popup-title"><h4>'+r.escape(null==(n=e(".title"))?"":n)+'</h4></div><form class="wz-form--full-width"><div class="wz-field-container"><div class="wz-label" for="problem-type">'+r.escape(null==(n=e(".type"))?"":n)+'</div><select class="wz-select-field js-problem-type"><option selected value="7">'+r.escape(null==(n=e(".types.incorrect_address"))?"":n)+'</option><option value="16">'+r.escape(null==(n=e(".types.missing_road"))?"":n)+'</option><option value="18">'+r.escape(null==(n=e(".types.missing_landmark"))?"":n)+'</option><option value="6">'+r.escape(null==(n=e(".types.incorrect_turn"))?"":n)+'</option><option value="9">'+r.escape(null==(n=e(".types.missing_roundabout"))?"":n)+'</option><option value="14">'+r.escape(null==(n=e(".types.wrong_direction"))?"":n)+'</option></select></div><div class="wz-field-container"><div class="wz-label" for="problem-comment">'+r.escape(null==(n=e(".description"))?"":n)+'</div><textarea class="wz-text-field js-problem-description" required rows="5"></textarea></div></form></div><div class="wz-popup-controls"><wz-button class="js-cancel" color="secondary">'+r.escape(null==(n=e(".cancel"))?"":n)+'</wz-button><wz-button class="js-submit">'+r.escape(null==(n=e(".submit"))?"":n)+'</wz-button></div><button class="wz-popup-close js-close"><i class="w-icon-x w-icon"></i></button></div></div>'}.call(this,"t"in o?o.t:"undefined"!=typeof t?t:void 0),a}},294:function(e,n,a){var r=a(35);e.exports=function(e){var n,a="",o=e||{};return function(e,t,o,i){a=a+'<p class="wz-p--small">'+(null==(n=e)?"":n)+'</p><div class="wz-clipboard-field wz-clipboard-field--large js-clipboard-field"><textarea class="js-embed-code"'+r.attr("value",i,!0,!0)+">"+r.escape(null==(n=i)?"":n)+'</textarea><button data-ga-event="click" data-ga-category="livemap" data-ga-action="copy_iframe"'+r.attr("data-ga-label",t.href,!0,!0)+">"+r.escape(null==(n=o(".copy"))?"":n)+"</button></div>"}.call(this,"embedBodySafeHtml"in o?o.embedBodySafeHtml:"undefined"!=typeof embedBodySafeHtml?embedBodySafeHtml:void 0,"location"in o?o.location:"undefined"!=typeof location?location:void 0,"t"in o?o.t:"undefined"!=typeof t?t:void 0,"value"in o?o.value:"undefined"!=typeof value?value:void 0),a}},295:function(e,n,a){var r=a(35);e.exports=function(e){var n,a="",o=e||{};return function(e,t,o,i){a=a+'<p class="wz-p--small">'+(null==(n=e)?"":n)+'</p><div class="wz-clipboard-field wz-clipboard-field--large js-clipboard-field"><input'+r.attr("value",i,!0,!0)+'><button data-ga-event="click" data-ga-category="livemap" data-ga-action="copy_drive_link"'+r.attr("data-ga-label",t.href,!0,!0)+">"+r.escape(null==(n=o(".copy"))?"":n)+"</button></div>"}.call(this,"drivingDirectionsBodySafeHtml"in o?o.drivingDirectionsBodySafeHtml:"undefined"!=typeof drivingDirectionsBodySafeHtml?drivingDirectionsBodySafeHtml:void 0,"location"in o?o.location:"undefined"!=typeof location?location:void 0,"t"in o?o.t:"undefined"!=typeof t?t:void 0,"value"in o?o.value:"undefined"!=typeof value?value:void 0),a}},296:function(e,n,a){var r=a(35);e.exports=function(e){var n,a="",o=e||{};return function(e,t,o){a=a+'<p class="wz-p--small">'+r.escape(null==(n=t(".share_the_map.body"))?"":n)+'</p><div class="wz-clipboard-field wz-clipboard-field--large js-clipboard-field"><input'+r.attr("value",o,!0,!0)+'><button data-ga-event="click" data-ga-category="livemap" data-ga-action="copy_permalink"'+r.attr("data-ga-label",e.href,!0,!0)+">"+r.escape(null==(n=t(".copy"))?"":n)+"</button></div>"}.call(this,"location"in o?o.location:"undefined"!=typeof location?location:void 0,"t"in o?o.t:"undefined"!=typeof t?t:void 0,"value"in o?o.value:"undefined"!=typeof value?value:void 0),a}},297:function(e,n,a){var r=a(35);e.exports=function(e){var n,a="",o=e||{};return function(e){a=a+'<div class="wz-popup-overlay"><div class="wz-popup"><div class="wz-popup-content"><h4>'+r.escape(null==(n=e(".title"))?"":n)+'</h4><div class="wz-tabs is-small js-tabs"><div class="wz-tab-line"><a class="wz-tab is-active" href="#">'+r.escape(null==(n=e(".share_driving_directions.title"))?"":n)+'</a><a class="wz-tab" href="#">'+r.escape(null==(n=e(".share_the_map.title"))?"":n)+'</a><a class="wz-tab" href="#">'+r.escape(null==(n=e(".embed.title"))?"":n)+'</a></div><div class="wz-tab-panes"><div class="wz-tab-pane is-active js-share-drive"></div><div class="wz-tab-pane js-share-map"></div><div class="wz-tab-pane js-embed"></div><div class="wz-tab-pane js-planned-drive"></div></div></div><button class="wz-popup-close js-close"><i class="w-icon-x w-icon"></i></button></div></div></div>'}.call(this,"t"in o?o.t:"undefined"!=typeof t?t:void 0),a}},300:function(e,n,a){var r=a(35);e.exports=function(e){var n,a="",o=e||{};return function(e){a=a+'<div class="wz-popup-overlay is-drive-ended"><div class="wz-popup"><div class="wz-popup-content"><button class="w-icon-x w-icon js-close"></button><div class="wz-popup-overlay__image"></div><h3 class="wz-popup-overlay__title">'+r.escape(null==(n=e(".title"))?"":n)+'</h3><div class="wz-popup-overlay__body">'+r.escape(null==(n=e(".body"))?"":n)+'</div><wz-button class="js-close" size="lg">'+r.escape(null==(n=e(".close"))?"":n)+"</wz-button></div></div></div>"}.call(this,"t"in o?o.t:"undefined"!=typeof t?t:void 0),a}},301:function(e,t,n){var a=n(35);e.exports=function(e){var t="",n=e||{};return function(e){t=t+'<div class="wm-image-marker"><div class="wm-image-marker__cover"></div><div class="wm-image-marker__inner"><div class="wm-image-marker__img-wrap"><img'+a.attr("src",e,!0,!0)+"></div></div></div>"}.call(this,"imageUrl"in n?n.imageUrl:"undefined"!=typeof imageUrl?imageUrl:void 0),t}},304:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var a=n(89),r=n(51),o=n(52),i=n(21),s=n(79),c=n(90),l=n(8),u=n(0),d=n(4),m=n(100),p=n(305),f=n(306);n(683);function v({from:t,to:n,onClick:v}){const h=Object(o.a)(),{translator:E}=Object(u.useContext)(d.a),b=E.translate("livemap.dropped_pin"),g=Object(u.useMemo)(()=>{const e=[];return null!=t&&e.push(function(e,t,n){var o,i;if(n)return new f.a(e.latLng,{title:u.createElement(u.Fragment,null,u.createElement("b",null,null!==(o=e.title)&&void 0!==o?o:t)," ",e.address&&u.createElement("i",null,e.address))});return new r.LabeledMarker(e.latLng,{iconType:a.MarkerIconType.ORIGIN,label:null!==(i=e.text)&&void 0!==i?i:t})}(t,b,h).on("click",()=>v(0,"origin"))),null!=n&&e.push(function(e,t,n){var o,i;if(n)return new p.a(e.latLng,{title:u.createElement(u.Fragment,null,u.createElement("b",null,null!==(o=e.title)&&void 0!==o?o:t)," ",e.address&&u.createElement("i",null,e.address))});return new r.LabeledMarker(e.latLng,{iconType:a.MarkerIconType.DESTINATION,label:null!==(i=e.text)&&void 0!==i?i:t})}(n,b,h).on("click",()=>v(1,"destination"))),e},[t,n,v,b,h]),_=Object(s.a)(g);return Object(u.useEffect)(()=>{_.on("click",()=>{e(()=>{const e=document.querySelector(".wm-routing-poi"),t=document.querySelector(".wm-routing__scrollable");if(e&&t){const n=e.offsetTop-t.scrollTop-250;t.scrollBy({top:n,left:0,behavior:"smooth"})}})})},[_]),Object(i.b)(e=>{if(!t||!n){function a(t){var n,a,r;if(t)if((null===(n=t.venue)||void 0===n?void 0:n.types)&&Object(m.b)(null===(a=t.venue)||void 0===a?void 0:a.types)&&(null===(r=t.venue)||void 0===r?void 0:r.bounds)){const{northeast:n,southwest:a}=t.venue.bounds;e.fitBounds(Object(l.latLngBounds)([n,a]),Object(c.a)())}else e.fitBounds(Object(l.latLngBounds)([t.latLng,t.latLng]),Object(c.a)())}a(t),a(n)}},[t,n]),g}}).call(this,n(678).setImmediate)},305:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(8),r=n(0),o=n(148),i=n(150),s=(n(681),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n});class c extends o.a{constructor(e,t={}){var{title:n}=t,o=s(t,["title"]);super(e,Object.assign({icon:new a.DivIcon({className:"wz-destination-marker",iconSize:[41,48],iconAnchor:[20.5,48]}),content:r.createElement(i.a,{title:n},r.createElement("div",{className:"wz-destination-marker__icon"})),zIndexOffset:void 0},o))}}},306:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(8),r=n(0),o=n(148),i=n(150),s=(n(682),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n});class c extends o.a{constructor(e,t={}){var{title:n}=t,o=s(t,["title"]);super(e,Object.assign({icon:new a.DivIcon({className:"wz-origin-marker",iconSize:[22,22],iconAnchor:[11,11]}),content:r.createElement(i.a,{title:n},r.createElement("div",{className:"wz-origin-marker__icon"})),zIndexOffset:void 0},o))}}},34:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return E}));var a=n(91),r=n(6),o=n(27),i=n(45),s=n(36),c=n(30),l=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function u(e,t,n){var a;Object(o.b)({event_name:"LM_ROUTES_OPTION_CLICKED",params:{INDEX:t+1,NAME:e.name,TIME:e.time,LENGTH:e.raw.meters,START:`${e.start.lat},${e.start.lng}`,END:`${e.start.lat},${e.start.lng}`,BADGES:null===(a=e.badges)||void 0===a?void 0:a.map(e=>e.name).join(),SOURCE:n}})}function d(e,t,n){Object(o.b)({event_name:"LM_POI_CARD_CLICKED",action:e,type:t,params:n})}function m(e,t){return t?"ARRIVE_BY":void 0===e?"LEAVE_NOW":"LEAVE_AT"}function p(e){return l(this,void 0,void 0,(function*(){const t=new Date,n=Object(s.d)({at:e.at?parseInt(e.at,10):void 0,reverse:e.reverse},t),o=new Date(n),l=e.from,u=e.to,d=Object(a.a)({from:l.latLng,to:u.latLng,episodeId:r.a.getEpisodeId()});return Object(c.a)("livemap.planning_request",{waValue:d}),r.a.track({event_name:"LM_PLANNING_REQUEST",params:Object.assign({ORIGIN:[e.from.latLng.lat,e.from.latLng.lng].join(","),DEST:[e.to.latLng.lat,e.to.latLng.lng].join(","),TIMESTAMP:n,PLANNED_DAY_OF_WEEK:o.toLocaleDateString("en",{weekday:"long"}).toUpperCase(),MODE:m(e.at,e.reverse),ORIGIN_TYPE:l.type,ORIGIN_VENUE_ID:l.id,DEST_TYPE:u.type,DEST_VENUE_ID:u.id,PLANNING_ID:d},e.at&&{PLANNED_MINUTE_DIFF:Object(i.b)(n-t.getTime()).minutes})})}))}function f(e,t,n){const o=Object(a.a)({from:t.from.latLng,to:t.to.latLng,episodeId:r.a.getEpisodeId()});r.a.track({event_name:"LM_PLANNING_RESPONSE",params:Object.assign({RESULT:n?"FAILURE":"SUCCESS",ORIGIN:[t.from.latLng.lat,t.from.latLng.lng].join(","),DEST:[t.to.latLng.lat,t.to.latLng.lng].join(","),MODE:m(t.at,t.reverse),COUNT:e.length,TIMES:e.map(e=>e.seconds&&Math.ceil(e.seconds/60)),LENGTHS:e.map(e=>e.meters),BADGES:e.map(e=>{var t;return null===(t=e.type)||void 0===t?void 0:t.join(",")}),PLANNING_ID:o,LEAVE_BY_MINUTE_DIFF:v(e[0],t)},n&&{REASON:"AbortError"===n.name?"CANCELLED":n.message})})}function v(e,t){if(null==t.at||null==(null==e?void 0:e.seconds))return;const n=1e3*e.seconds,a=Number.parseInt(t.at,10)-n;return Math.floor((a-Date.now())/6e4)}var h;function E(e,t,n,a){return l(this,void 0,void 0,(function*(){const o=Date.now()-e;r.a.track({event_name:"LM_SERVER_REQUEST_RESULT",params:Object.assign({API:n,TIME:o,MODE:t,RESULT:a?"FAILURE":"SUCCESS"},a&&{REASON:"AbortError"===a.name?"CANCELLED":a.message})})}))}!function(e){e.BIFROST="ROUTING_BIFROST",e.USERDRIVE="ROUTING_USERDRIVE"}(h||(h={}))},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return v})),n.d(t,"i",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"h",(function(){return _})),n.d(t,"d",(function(){return w}));var a=n(2);const r=15,o=864e5,i=6048e5,s=60*r*1e3;function c(e,t=(new Date).setHours(0,0,0,0)){const n=new Date(t).getTimezoneOffset()-new Date(e).getTimezoneOffset(),a=e+6e4*n-t,r=Math.floor(a/o);return{time:e+6e4*n-r*o,day:r}}function l({time:e,day:t}){return e-6e4*(new Date(e).getTimezoneOffset()-new Date(e+t*o).getTimezoneOffset())+t*o}const u=new Intl.DateTimeFormat(a.currentLocale(),{weekday:"short",month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(a.currentLocale(),{day:"numeric"}),m=new Intl.DateTimeFormat(a.currentLocale(),{month:"short"}),p=new Intl.DateTimeFormat(a.currentLocale(),{weekday:"long"});function f(e=new Date){return Array(7).fill(0).map((t,n)=>{const a=e.getTime()+n*o;return{date:u.format(a),day:d.format(a),month:m.format(a),weekday:p.format(a)}})}const v=new Intl.DateTimeFormat(a.currentLocale(),{hour:"numeric",minute:"2-digit"});function h(e,t,n=v){const a=[];for(let r=E(e);r<=t;r+=s){const e=n.format(r);a.push([e,r])}return a}function E(e){return Math.ceil(e/s)*s}const b=new Intl.DateTimeFormat(a.currentLocale(),{hour:"2-digit",minute:"2-digit"});function g(e=new Date){const t=18e5*Math.ceil(e.getTime()/18e5),n=Math.floor(o/18e5);return Array(n).fill(0).map((e,n)=>{const a=t+18e5*n;return[b.format(a),a]})}function _(e,t,n=new Date,a=n.getTimezoneOffset()){const r=new Date(n).setUTCHours(0,a,0,0);if(0===e.length)return 0===t?E(n.getTime()):r;const i=6e4*e[0].routeLengthInMinutes;if(t>0){const e=new Date(n).setUTCHours(24,a,0,0);return r+Math.max(0,i-(e-n.getTime()))}const s=e.find(e=>1e3*e.timeToLeave>=n.getTime());return(s?1e3*s.eta:n.getTime()+i)-t*o}function w(e,t=new Date){return e&&e.at?e.at<t.getTime()?(console.warn('Trip date is in the past, defaulting to "now"'),t.getTime()):e.at:t.getTime()}},41:function(e,t,n){"use strict";n.d(t,"g",(function(){return w})),n.d(t,"i",(function(){return O})),n.d(t,"c",(function(){return C})),n.d(t,"e",(function(){return L})),n.d(t,"j",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"d",(function(){return k})),n.d(t,"h",(function(){return I})),n.d(t,"k",(function(){return R})),n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return j}));var a=n(42),r=n(19),o=n(81),i=n(70),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};var c=n(5),l=n(84),u=n(7),d=n(33),m=n(8),p=n(143),f=n(34);function v(e){const t=new Map;for(const n of e)t.set(n.toString(),n);return[...t.values()]}var h=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};class E{constructor(e){this.geoEnv=e}findRoutes(e,t){return h(this,void 0,void 0,(function*(){const n=Date.now();let a;Object(f.c)(e);const r=Object(f.b)(e.at,e.reverse);try{a=this.parseResponse(yield this.makeRequest(e,t)),Object(f.f)(n,r,f.a.USERDRIVE),Object(f.d)(a,e)}catch(t){if(Object(f.f)(n,r,f.a.USERDRIVE,t),Object(f.d)([],e,t),t instanceof Error)throw t;throw new Error(t)}return a}))}makeRequest(e,t){return h(this,void 0,void 0,(function*(){const n=this.buildRequest(e),a=new URL("/live-map/api/user-drive",location.href);a.searchParams.set("geo_env",this.geoEnv),null!=e.timeout&&a.searchParams.set("timeout",e.timeout.toString());const r=Object.assign({credentials:"same-origin",body:JSON.stringify(n),method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}},t),o=yield fetch(a.toString(),r);return yield o.json()}))}buildRequest(e){const t={from:this.buildCoord(e.from),to:this.buildCoord(e.to),nPaths:e.nPaths,useCase:"LIVEMAP_PLANNING"};e.reverse?t.endTime=null!=e.at?parseInt(e.at,10):void 0:e.at&&(t.startTime=parseInt(e.at,10)),t.range=e.range,t.interval=e.interval,t.arriveAt=e.arriveAt;const n=this.buildDebugUserDriveParams();return n&&(t.debugParams=n),t}buildCoord(e){return{y:e.latLng.lat,x:e.latLng.lng}}buildDebugUserDriveParams(e=new URLSearchParams(location.search)){const t={};let n=!1;return e.forEach((e,a)=>{a.startsWith("rp_")&&(n=!0,t[a.substr("rp_".length)]?t[a.substr("rp_".length)].push(e):t[a.substr("rp_".length)]=[e])}),n?t:null}parseResponse(e){if("error"in e)throw new Error(e.error);return e.alternatives.map(e=>new p.a(this.geoEnv,{latLngs:v(e.coords.map(e=>new m.LatLng(e.y,e.x))),name:e.response.routeName,passesThroughDangerArea:e.response.passesThroughDangerArea,meters:e.response.totalLength,seconds:e.response.totalSeconds,isToll:e.response.isToll,isHOV:e.response.isHOV,areas:e.response.areas,requiredPermits:e.response.requiredPermits,isFastest:e.response.isFastest,etaHistograms:e.response.etaHistograms,label:e.response.label,tollPriceInfo:e.response.tollPriceInfo,hovRouteInfo:e.response.hovRouteInfo,alerts:e.response.alerts,jams:e.response.jams,routeAttr:new Set(e.response.routeAttr)}))}}var b=n(36),g=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};var _;function w(e,t){return g(this,void 0,void 0,(function*(){const n=yield y(e);t(new c.gb(!1)),t(new c.Z(Object.assign(Object.assign({text:e.text,id:e.place.id,latLng:e.place.latLng,type:e.type},n),{title:e.place.name||(null==n?void 0:n.title)})))}))}function O(e,t){return g(this,void 0,void 0,(function*(){const n=yield y(e);t(new c.gb(!1)),t(new c.kb(Object.assign(Object.assign({text:e.text,id:e.place.id,latLng:e.place.latLng,type:e.type},n),{title:e.place.name||(null==n?void 0:n.title)})))}))}function y(e){return g(this,void 0,void 0,(function*(){if(!e.place)return;const t=Object(a.findGeoEnv)(e.place.latLng),{venue:n,nearbyVenues:c}=yield function(e,t){return s(this,void 0,void 0,(function*(){let n,a=[];return null!=e&&(n=yield Object(o.a)(e,t)),n&&(a=n.address?yield Object(i.a)(n.address):[]),{venue:null!=n?n:void 0,nearbyVenues:a}}))}(function(e){if(e.type===u.e.HOME||e.type===u.e.WORK||e.type===u.j.FAVORITE)return e.place.venueId;return e.place.id}(e),{rawGooglePlace:e.place.rawGooglePlaceData,geoEnv:t,locale:r.a.locale});return n?Object(l.a)(n,c,r.a):void 0}))}function C(e,t,n){var r;const{from:o,to:i,reverse:s}=e,l=null===(r=e.at)||void 0===r?void 0:r.toString();if(o&&i){t(new c.p);const r=Object(a.findGeoEnv)(o.latLng),u={from:o,to:i,at:l,reverse:s,interval:b.b,arriveAt:!0,nPaths:"number"==typeof e.at?1:3},m=function(e=new URLSearchParams(location.search)){const t=e.get("max_routes"),n=t&&parseInt(t,10);return n&&!isNaN(n)?n:null}();m&&(u.nPaths=m);new E(r).findRoutes(u,n).then(e=>{t(new c.hb(e))},e=>{"AbortError"!==e.name&&(t(new c.rb(new d.a(_.ROUTING_GENERAL_ERROR,e.name))),console.error("Error while finding routes: ",e))})}}function L(e){e(new c.t)}function N(e){e(new c.tb)}function S(e){e(new c.z)}function k(e,t){t(new c.n(e))}function I(e,t){t(new c.db(e))}function R(e,t){e(new c.sb(t))}function T(e){e(new c.g)}function j(e){e(new c.h)}!function(e){e.ROUTING_GENERAL_ERROR="ROUTING_GENERAL_ERROR"}(_||(_={}))},5:function(e,t,n){"use strict";n.d(t,"W",(function(){return a})),n.d(t,"Y",(function(){return r})),n.d(t,"X",(function(){return o})),n.d(t,"I",(function(){return i})),n.d(t,"L",(function(){return s})),n.d(t,"yb",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"P",(function(){return u})),n.d(t,"S",(function(){return d})),n.d(t,"Q",(function(){return m})),n.d(t,"R",(function(){return p})),n.d(t,"A",(function(){return f})),n.d(t,"M",(function(){return v})),n.d(t,"H",(function(){return h})),n.d(t,"C",(function(){return E})),n.d(t,"O",(function(){return b})),n.d(t,"N",(function(){return g})),n.d(t,"B",(function(){return _})),n.d(t,"E",(function(){return w})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"o",(function(){return C})),n.d(t,"J",(function(){return L})),n.d(t,"u",(function(){return N})),n.d(t,"T",(function(){return S})),n.d(t,"V",(function(){return k})),n.d(t,"w",(function(){return I})),n.d(t,"m",(function(){return R})),n.d(t,"K",(function(){return T})),n.d(t,"v",(function(){return j})),n.d(t,"U",(function(){return D})),n.d(t,"r",(function(){return A})),n.d(t,"f",(function(){return x})),n.d(t,"D",(function(){return P})),n.d(t,"a",(function(){return z})),n.d(t,"G",(function(){return M})),n.d(t,"F",(function(){return U})),n.d(t,"xb",(function(){return G})),n.d(t,"q",(function(){return H})),n.d(t,"e",(function(){return F})),n.d(t,"ub",(function(){return V})),n.d(t,"t",(function(){return W})),n.d(t,"j",(function(){return B})),n.d(t,"s",(function(){return K})),n.d(t,"i",(function(){return $})),n.d(t,"wb",(function(){return Y})),n.d(t,"jb",(function(){return q})),n.d(t,"Ab",(function(){return X})),n.d(t,"l",(function(){return Z})),n.d(t,"vb",(function(){return Q})),n.d(t,"nb",(function(){return J})),n.d(t,"qb",(function(){return ee})),n.d(t,"ob",(function(){return te})),n.d(t,"pb",(function(){return ne})),n.d(t,"fb",(function(){return ae})),n.d(t,"Z",(function(){return re})),n.d(t,"kb",(function(){return oe})),n.d(t,"mb",(function(){return ie})),n.d(t,"bb",(function(){return se})),n.d(t,"lb",(function(){return ce})),n.d(t,"ab",(function(){return le})),n.d(t,"gb",(function(){return ue})),n.d(t,"db",(function(){return de})),n.d(t,"g",(function(){return me})),n.d(t,"h",(function(){return pe})),n.d(t,"tb",(function(){return fe})),n.d(t,"z",(function(){return ve})),n.d(t,"p",(function(){return he})),n.d(t,"hb",(function(){return Ee})),n.d(t,"x",(function(){return be})),n.d(t,"rb",(function(){return ge})),n.d(t,"n",(function(){return _e})),n.d(t,"ib",(function(){return we})),n.d(t,"y",(function(){return Oe})),n.d(t,"sb",(function(){return ye})),n.d(t,"cb",(function(){return Ce})),n.d(t,"b",(function(){return Le})),n.d(t,"zb",(function(){return Ne})),n.d(t,"eb",(function(){return Se}));const a="SWITCH_TO_INITIAL",r="SWITCH_TO_SHARE_DRIVE",o="SWITCH_TO_ROUTING",i="SET_PERMALINK",s="SET_SHARE_DRIVE",c="UPDATE_SHARE_DRIVE",l="END_SHARE_DRIVE",u="SET_USER",d="SET_VISITOR",m="SET_USER_FAVORITES",p="SET_USER_FAVORITES_ERROR",f="SET_FROM",v="SET_TO",h="SET_PENDING_POI",E="SET_FROM_WIKI_EXTRACT",b="SET_TO_WIKI_EXTRACT",g="SET_TO_REVIEWS",_="SET_FROM_REVIEWS",w="SET_IS_ROUTING_FOCUSED",O="CLEAR_FROM",y="CLEAR_TO",C="LOCK",L="SET_ROUTES",N="RESET_ROUTES",S="SHOW_ERROR",k="SWITCH_FROM_AND_TO",I="RESET_SWITCHED_FROM_AND_TO",R="HIGHLIGHT",T="SET_SCHEDULE",j="RESET_SCHEDULE",D="SHOW_NAVIGATION",A="OPEN_SIDEBAR",x="CLOSE_SIDEBAR",P="SET_GEOLOCATION",z="ADD_TOUR_STEP",M="SET_LOGIN_HOOK_STATE",U="SET_LIVEMAP_CONFIG",G="UPDATE_NOTIFICATIONS",H="OPEN_LANGUAGE_SELECTOR",F="CLOSE_LANGUAGE_SELECTOR";class V{constructor(){this.type=a}}class W{constructor(){this.type=A}}class B{constructor(){this.type=x}}class K{constructor(){this.type=H}}class ${constructor(){this.type=F}}class Y{constructor(e){this.payload=e,this.type=r}}class q{constructor(e){this.payload=e,this.type=s}}class X{constructor(e){this.payload=e,this.type=c}}class Z{constructor(){this.type=l}}class Q{constructor(e){this.payload=e,this.type=o}}class J{constructor(e){this.payload=e,this.type=u}}class ee{constructor(){this.type=d}}class te{constructor(e){this.payload=e,this.type=m}}class ne{constructor(e){this.payload=e,this.type=p}}class ae{constructor(e){this.payload=e,this.type=M}}class re{constructor(e){this.payload=e,this.type=f}}class oe{constructor(e){this.payload=e,this.type=v}}class ie{constructor(e){this.payload=e,this.type=b}}class se{constructor(e){this.payload=e,this.type=E}}class ce{constructor(e){this.payload=e,this.type=g}}class le{constructor(e){this.payload=e,this.type=_}}class ue{constructor(e){this.payload=e,this.type=h}}class de{constructor(e){this.payload=e,this.type=w}}class me{constructor(){this.type=O}}class pe{constructor(){this.type=y}}class fe{constructor(){this.type=k}}class ve{constructor(){this.type=I}}class he{constructor(){this.type=C}}class Ee{constructor(e){this.payload=e,this.type=L}}class be{constructor(){this.type=N}}class ge{constructor(e){this.payload=e,this.type=S}}class _e{constructor(e){this.payload=e,this.type=R}}class we{constructor(e){this.payload=e,this.type=T}}class Oe{constructor(){this.type=j}}class ye{constructor(e){this.payload=e,this.type=D}}class Ce{constructor(e){this.payload=e,this.type=P}}class Le{constructor(e){this.payload=e,this.type=z}}class Ne{constructor(e){this.payload=e,this.type=G}}class Se{constructor(e){this.payload=e,this.type=U}}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(80),o=n(92);function i(){return"1"===Object(a.useContext)(r.a)[o.a.TRIP_OVERVIEW_PHASE_2]}},524:function(e,t,n){},545:function(e,t,n){},546:function(e,t,n){},566:function(e,t,n){},604:function(e,t,n){},605:function(e,t,n){},606:function(e,t,n){},607:function(e,t,n){},608:function(e,t,n){},609:function(e,t,n){},610:function(e,t,n){},611:function(e,t,n){},612:function(e,t,n){},613:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){},616:function(e,t,n){},617:function(e,t,n){},625:function(e,t,n){},626:function(e,t,n){},627:function(e,t,n){},628:function(e,t,n){},629:function(e,t,n){},630:function(e,t,n){},631:function(e,t,n){},632:function(e,t,n){},633:function(e,t,n){},634:function(e,t,n){},636:function(e,t,n){},637:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){},642:function(e,t,n){},643:function(e,t,n){},644:function(e,t,n){},645:function(e,t,n){},647:function(e,t,n){},648:function(e,t,n){},664:function(e,t,n){},665:function(e,t,n){},672:function(e,t,n){},673:function(e,t,n){},674:function(e,t,n){},675:function(e,t,n){},676:function(e,t,n){},677:function(e,t,n){},680:function(e,t,n){},681:function(e,t,n){},682:function(e,t,n){},683:function(e,t,n){},684:function(e,t,n){},685:function(e,t,n){var a={"./meeting-info.json":686,"./pickup-driver-info.json":687};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=685},686:function(e){e.exports=JSON.parse('{"id":"info","path":"SocialMediaServer\\\\/internal\\\\/getMeetingInfo","method":"get","response":[{"state":"success","status":200,"contentType":"application/json","body":{"eventID":"A234asmASf","name":"Foo","rsvpStatus":null,"startTime":1566210562000,"endTime":1566214162000,"location":{"name":"Woot","street":"Foo","city":"Bar","state":null,"country":null,"zip":null,"latitude":32.33507537841797,"longitude":34.86546325683594,"type":null,"venueId":"waze.street-2503.26","address":null,"houseNumber":null,"routingContext":null},"community":"waze","calculatedLocation":{"name":"בית","street":"הרב ריינס 26","city":"נתניה","state":null,"country":null,"zip":null,"latitude":32.33507537841797,"longitude":34.86546325683594,"type":null,"venueId":"waze.street-2503.26","address":null,"houseNumber":null,"routingContext":null},"dateOnly":false,"ownerName":null,"ownerCommunityID":"1221867038","nDriving":0,"uuid":null,"type":"SHARE_DRIVE","ownerFirstName":null,"ownerLastName":null,"ownerUserName":"Fooname","recurringEventId":null,"isRecurring":null,"attributes":null,"partnerInfo":null}},{"state":"success-invalid-response","status":200,"contentType":"application/json","body":{"eventID":"A234asmASf","name":"Foo","rsvpStatus":null,"startTime":1566210562000,"endTime":1566214162000,"location":{"name":"Woot","street":"Foo","city":"Bar","state":null,"country":null,"zip":null,"latitude":32.33507537841797,"longitude":34.86546325683594,"type":null,"venueId":"waze.street-2503.26","address":null,"houseNumber":null,"routingContext":null},"community":"waze","dateOnly":false,"ownerName":null,"ownerCommunityID":"1221867038","nDriving":0,"uuid":null,"type":"SHARE_DRIVE","ownerFirstName":null,"ownerLastName":null,"ownerUserName":"Fooname","recurringEventId":null,"isRecurring":null,"attributes":null,"partnerInfo":null}}]}')},687:function(e){e.exports=JSON.parse('{"id":"pickup","path":"\\\\/(.*)-rtserver\\\\/web\\\\/PickUpGetDriverInfo","method":"get","response":[{"state":"success","status":200,"contentType":"application/json","body":{"mood":1,"lonlatTimestamp":0,"lon":34.793778,"display_name":"","onSegmentY":32.07674916970995,"onSegmentX":34.79486418319207,"frequency":60000,"eta":1306,"route":[34.793948630283694,32.07263584095712,34.793953466075145,32.07277666661518,34.79395636441804,32.072872,34.793953,32.07306100000001,34.793951,32.073288999999995,34.793951,32.073288999999995,34.793937407500366,32.07382310496379,34.79392381500073,32.07436175239889,34.79392854270894,32.07442469506219,34.7940991508291,32.07550514765995,34.7940991508291,32.07550514765996,34.794426117911094,32.07611779732438,34.79485727104861,32.07674070376767,34.794897196338866,32.076789603968415,34.79544415883114,32.077401463052816,34.796321461065936,32.078357880070584,34.796321461065936,32.078357880070584,34.79732483617695,32.07952714271075,34.79753673070227,32.07984109799604,34.79775954494252,32.08022267869867,34.79843322530646,32.082127177125464,34.79879085251187,32.08346917581106,34.79934792067461,32.08525969217019,34.79934792067461,32.08525969217019,34.80001312175174,32.08689737702838,34.80047937274136,32.08833893666542,34.80092,32.08997999999998,34.801151,32.090838999999995,34.80161878224373,32.09290637500763,34.80177542824173,32.09367556085205,34.80177542824173,32.09367556085205,34.80274551628953,32.09896923361698,34.80299251255204,32.10001360637124,34.803008864247545,32.100074580252794,34.8034479414912,32.101325491607845,34.803903789681286,32.10215551832312,34.80393722392344,32.10220906589065,34.80466506569336,32.103317137817726,34.80919234410718,32.110017898054984,34.80919234410718,32.110017898054984,34.80988318658751,32.1110747046946,34.810550847115366,32.11222003559745,34.81057797060894,32.1122770395427,34.810954503619605,32.1132820678902,34.810967620995115,32.113343844031895,34.81110247271517,32.1143132425741,34.81110247271517,32.1143132425741,34.81070197254133,32.11884087023571,34.81065844241644,32.120229047928945,34.8106219130349,32.12234792601148,34.8106219130349,32.12234792601148,34.81039323566933,32.131987455852254,34.81039323566933,32.131987455852254,34.810441398076414,32.13293316822301,34.81051200137242,32.13400406146738,34.81071900256895,32.13479815459244,34.811001,32.135466,34.811001,32.135466,34.812352,32.137448,34.812386,32.137501,34.812541,32.137777,34.812596,32.138023,34.8126,32.138086,34.812591,32.138212,34.812578,32.138274,34.812538,32.138393,34.81251,32.13845,34.812475,32.138503,34.812303,32.13871482209015,34.8120585,32.13887205952454,34.81124960449219,32.13916525496292,34.810473,32.139362,34.810473,32.139362,34.809524,32.139772,34.808283,32.140239000000015,34.808222,32.140254,34.807604,32.140379999999986,34.807604,32.140379999999986,34.80685,32.14046,34.806787,32.140464000000016,34.805658,32.1405,34.805658,32.1405,34.80445840837564,32.140516412417476,34.804395315513844,32.14051853512092,34.80411249591825,32.14053389724372,34.80382967632265,32.140571970848676,34.80376813801241,32.14058618609982,34.80350801336092,32.14068349115168,34.8033122617258,32.14080350752682,34.80326146495319,32.14084098449073,34.80269627976228,32.141414355636776,34.80269627976228,32.141414355636776,34.802519597553264,32.141631533435984,34.8024219619713,32.14178928877745,34.802338139881144,32.141936737783915,34.802282822090156,32.142061999999996,34.80224100000001,32.14221382209016,34.80221577546311,32.142408066543354,34.802203822090156,32.14256700000001,34.802286,32.143038999999995,34.802286,32.143039,34.803481,32.147156,34.803481,32.147156,34.80414817653423,32.14892602373486,34.80414817653423,32.14892602373486,34.805845942283156,32.15188218328311,34.80791147435569,32.155081063124705,34.80791147435569,32.155081063124705,34.81054206689832,32.159243600638895,34.81325199139858,32.16392408416402,34.81325199139858,32.16392408416402,34.813653246267805,32.16491946864359,34.8136720738523,32.16497972408638,34.81385741984209,32.165843867892114,34.81386662297515,32.16590632193945,34.81406272831199,32.16753594465391,34.814205776969956,32.169234439450584,34.8143895100493,32.17067475477086,34.814405929755566,32.17073571045183,34.815163334028576,32.1728113737941,34.815939,32.17477,34.815939,32.17477,34.816081,32.176342,34.816086,32.176405,34.816175,32.178423,34.81615337301636,32.17919836045074,34.81606737301636,32.179780601852414,34.815831,32.180988,34.815386,32.183538,34.815379,32.183601,34.815338,32.184231,34.815336,32.184546,34.815412,32.185318,34.815412,32.185318,34.81553617141993,32.186320153049444,34.815549427330346,32.18638187416312,34.815943821837394,32.18771352279981,34.81714869298232,32.19123791876565,34.818409704256794,32.19507635586044,34.81842784210217,32.195136822648806,34.818916732686354,32.19748542419967,34.81923727575437,32.19978245660804,34.81923727575437,32.19978245660804,34.81952567048392,32.201526367101025,34.81977687319498,32.20224107976616,34.81980244475371,32.202298795870455,34.820048,32.202772,34.820048,32.202772,34.82427554368894,32.20823981420527,34.82697151918792,32.21172542659763,34.827316214610256,32.21215352553849,34.827316214610256,32.21215352553852,34.827887525131274,32.212940991336254,34.827983,32.213115999999985,34.828532,32.214595999999986,34.828823,32.216147000000014,34.829190355441895,32.2177893864553,34.829276017196676,32.21799738469381,34.82933852240881,32.21817794739409,34.82987186508181,32.21966692473951,34.83085928153524,32.222126182400885,34.831446180866934,32.223507148702566,34.83171992527074,32.22434370547189,34.831853126687186,32.22501709374682,34.831938048341364,32.22561333012172,34.832020332679804,32.22628146159783,34.83203106151589,32.22656281853686,34.83202904985709,32.22689522702524,34.83203977869254,32.2273081833163,34.83204782532035,32.227700716951524,34.832064721567285,32.228001781770175,34.832044096813206,32.22887134464299,34.832044096813206,32.22887134464299,34.83240484267125,32.232505729296236,34.832499,32.233273,34.83286532049656,32.235524011485815,34.832989,32.23628399999999,34.83333543165748,32.2383083389793,34.83333543165748,32.2383083389793,34.83480151842292,32.24687477199032,34.83480151842292,32.24687477199032,34.835247923446865,32.249462459427725,34.835247923446865,32.249462459427725,34.83591823710288,32.25331867713645,34.83644793121343,32.255397999064435,34.83701001306424,32.25747031777835,34.838443203670614,32.261583735375694,34.840061244660994,32.26616752948267,34.84038505364303,32.26670948584127,34.84072732454209,32.26716297467857,34.84076853433582,32.26721079599,34.84121374400732,32.26765840126983,34.84126090535321,32.267700364658246,34.841961066077296,32.26823969222983,34.842013910839086,32.268274226703724,34.84228434319922,32.268437002406415,34.84233928269959,32.268468095779966,34.84284261353844,32.268731728076624,34.84290011350436,32.268757783627095,34.84379410875673,32.26906993747102,34.84471842556466,32.26928664969682,34.84471842556466,32.269286649696824,34.84871320691408,32.270081060203694,34.84871320691408,32.270081060203694,34.84974059250775,32.270391347408285,34.84980065433276,32.27041078433937,34.85063207666119,32.270710511095515,34.85165436448961,32.27120670773747,34.85168407956917,32.271223730388854,34.85168407956917,32.271223730388854,34.85240069377899,32.27164452876663,34.853483,32.272507,34.854454,32.273489,34.854454,32.273489,34.85532513393049,32.274728299749704,34.85597581469542,32.27610210151163,34.85597581469542,32.27610210151163,34.85730322023299,32.28020384867987,34.85730322023299,32.28020384867987,34.860846,32.291393,34.860846,32.291393,34.8617,32.29410200000001,34.862574,32.29733200000001,34.86319285305657,32.30015544161801,34.86319285305657,32.30015544161801,34.86418948218144,32.304702255605704,34.86418948218144,32.304702255605704,34.864696,32.307013,34.864816678123056,32.307533590107894,34.865247,32.30954199999999,34.865629830688476,32.31165745767211,34.865841,32.31372999999999,34.866305,32.31911,34.866305,32.31911,34.86679917626344,32.32093226860983,34.86679917626344,32.32093226860983,34.86694034557261,32.32146959783451,34.86694034557261,32.32146959783451,34.86697720641263,32.321603641484984,34.86697720641263,32.321603641484984,34.867294567815364,32.322757711179776,34.86741426830786,32.323313095159854,34.86788903732791,32.32531881876954,34.86788903732791,32.32531881876954,34.868148370575554,32.32582426308607,34.86818329553874,32.3258768293004,34.868267846925306,32.3259695717078,34.86831081386133,32.3260154167054,34.86836191992703,32.32605223780759,34.86841764588088,32.32608173925792,34.868476683324864,32.32610396586097,34.868537624692785,32.326118109704986,34.868599626944885,32.32612605717787,34.86866218684515,32.32612558411079,34.86878577649324,32.32610533558779,34.8689035875072,32.32606137454757,34.86895850961405,32.3260304097957,34.86905724388647,32.325952779137154,34.86909848498345,32.32590564779361,34.869133544248584,32.32585375158902,34.86916157688879,32.32579776815964,34.869181876398095,32.3257385673789,34.86919410302177,32.32567726794367,34.86919674372232,32.32561450827062,34.869190013808065,32.32555238605077,34.869175731420405,32.325491452069514,34.869154655012366,32.325432583391226,34.869126020653106,32.32537658653775,34.86908948674252,32.325325257629395,34.86904647632349,32.32527928022899,34.868997997011355,32.325238329001145,34.86894598557839,32.325201838878904,34.868891638335896,32.32516980968948,34.868834409277596,32.325143296947495,34.86877439176489,32.325122661369974,34.86871264586196,32.32510782876548,34.86865035180629,32.32509780317915,34.86820985838166,32.325053707227646,34.86820985838166,32.325053707227646,34.86763406310421,32.32512493093473,34.86763406310421,32.32512493093473,34.8671041305488,32.325180043625075,34.8671041305488,32.325180043625075,34.86578173151393,32.32533200129657,34.86578173151393,32.32533200129657,34.86529585027493,32.32546961912732,34.86442413168463,32.3257528292739,34.86442413168463,32.3257528292739,34.86449393666832,32.32605988340626,34.8645202528053,32.32611766795535,34.864648837687284,32.32633343455548,34.86478630404471,32.326546328970814,34.864902591785416,32.32678731754691,34.864902591785416,32.32678731754691,34.86536774344074,32.327400222961,34.86554596627005,32.32766065525071,34.865717,32.327916,34.865717,32.327916,34.865993,32.328339,34.86606081349182,32.3285,34.86612481349182,32.32865191534424,34.86621181349182,32.32885746627045,34.86628262698364,32.32907773743439,34.866436,32.329382,34.866436,32.329382,34.86630127116394,32.32952917790985,34.866165,32.329675,34.866165,32.329675,34.86586214705197,32.329985230154904,34.865602766063134,32.33026113216566,34.86547553562111,32.33040135469094,34.86523965078639,32.33069767577451,34.86523965078639,32.33069767577451,34.865168135017555,32.33092336190674,34.86513265832348,32.331109327066144,34.86511851950227,32.33123474885486,34.865125,32.331487,34.865125,32.331487,34.865058,32.332026,34.865046,32.332088,34.865016,32.332211,34.86500565889549,32.33232984540367,34.86495670798058,32.332448627763796,34.86495670798058,32.332448627763796,34.86496661667559,32.33245116751629,34.86499767804668,32.332465196073535,34.86502490356614,32.33248407533211,34.86504724697253,32.332507079769925,34.865063849621286,32.33253332533656,34.86507407348189,32.33256180342726,34.865077525657156,32.33259141964339,34.865076744527265,32.33259812095559,34.865076744527265,32.33259812095559,34.86507407348189,32.33262103584982,34.865063849621286,32.33264951391295,34.86504724697253,32.33267575943828,34.86504724697253,32.33267575943828,34.86522746085944,32.33323731236973,34.8653806046632,32.33446995558097,34.8653806046632,32.33446995558097,34.865463583202946,32.33506840715731],"onSegmentIndex":12,"routeTimestamp":1566210560263,"lat":32.077636,"status":"ok"}}]}')},70:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return m}));var a=n(55),r=n.n(a),o=n(142),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function s(e){return i(this,void 0,void 0,(function*(){const t=Date.now()/1e3,{rawOffset:n,dstOffset:a}=yield fetch(function(e,t){const n=new URLSearchParams({lat:e.lat.toString(),lng:e.lng.toString(),timestamp:t.toString()});return`${o.a}?${n.toString()}`}(e,t)).then(e=>e.json());return n&&a?new Date(1e3*(t+n+a)):new Date}))}var c=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function l(e,t={}){return c(this,void 0,void 0,(function*(){return r.a.get("/live-map/api/venues/"+e,{params:{locale:t.locale}}).then(e=>e.data)}))}function u(e,t={}){return c(this,void 0,void 0,(function*(){return r.a.get("/live-map/api/venues/"+e,{params:{type:"street",geoEnv:t.geoEnv,locale:t.locale}}).then(e=>e.data)}))}function d(e){return c(this,void 0,void 0,(function*(){return r.a.get("/live-map/api/venues/nearby",{params:e}).then(e=>e.data.nearbyVenues)}))}function m(e){return c(this,void 0,void 0,(function*(){if(null!=e.isOpen)return e.isOpen;const t=yield s(e.latLng),n=t.getUTCDay();if(e.hours){const a=e.hours.filter(e=>e.day===n),r=0===n?6:n-1,o=e.hours.filter(e=>e.day===r);if(a)return function(e,t,n){const a=e.getUTCHours();let r=!1;for(const e of t){const{from:t,to:o}=e;if(t.hours===o.hours){r=!0;break}if(n&&n.length)for(const e of n){const{from:t,to:n}=e;if(n.hours<t.hours&&a<n.hours){r=!0;break}}if(r)break;r=a>=t.hours&&a<o.hours}return r}(t,a,o)}return!1}))}},733:function(e,t,n){"use strict";n.r(t);var a=n(277),r=n(6),o=n(11),i=n(5);const s={livemap_test:!1,tripOverview:"none",feedbackFormCooldown:0,feedbackFormGracePeriodDays:3,wikipediaExtract:!1,googleReviewSource:"googleplaces"};var c=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const l=new a.ConfigurationLoader("LivemapConfig",s,{reloadWhenUserChanged:!1,timeoutMs:1500});var u=n(0);const d=()=>{var e;const{state:t}=u.useContext(o.a);return null!==(e=t.config)&&void 0!==e?e:s};var m=n(16),p=n(44),f=n(137),v=n(116),h=n(28),E=n(17),b=n(93),g=n(43);function _(e){const{latLng:t,poi:n,ignoreQuery:a}=e,r=n&&n.venue,o=Object(v.a)({latLng:t,venue:r,ignoreQuery:a});return Object(h.g)(o),o}function w(e){var t;const n=new URL(window.location.pathname.replace(/\/live-map.*/,"/live-map/directions"),window.location.origin),a=new URLSearchParams(location.search);if(a.delete("from"),a.delete("to"),a.delete("at"),a.delete("time"),a.delete("reverse"),a.delete("place"),a.delete("zoom"),a.delete("latlng"),e.to&&(a.set("to",Object(g.e)(e.to)),(null===(t=e.to.venue)||void 0===t?void 0:t.address)&&e.to.venue.id)){const{type:t}=Object(E.b)(e.to.venue.id);n.pathname=Object(b.b)("/live-map/directions",e.to.venue,t)}return e.from&&a.set("from",Object(g.e)(e.from)),e.at&&(a.set("time",e.at.toString()),e.reverse&&a.set("reverse","yes")),n.search=a.toString(),n}function O(){return window.location.href.split("?")[0]}var y=n(39),C=n(31),L=n(4),N=n(20);function S(e,t){return k(e,t)||I(e,t)}function k(e,t){const n=t&&t.driveEnded;return e===N.a.SHARE_DRIVE&&!n}function I(e,t){const n=t&&t.driveEnded,a=e===N.a.ROUTING;return Boolean(!n&&a&&t)}var R=n(283),T=n(40),j=n(24),D=n(78),A=n(19),x=n(14),P=n(7);n(86);var z=n(33),M=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function U(e){const t=function(e,t){switch(e.type){case P.e.HOME:return t.translate("livemap.favorites.home");case P.e.WORK:return t.translate("livemap.favorites.work");default:return e.name}}(e,A.a),n=`${t}, ${e.place.address}`;return Object.assign(Object.assign({},e),{name:t,label:n,place:Object.assign(Object.assign({},e.place),{name:t})})}function G(e){return M(this,void 0,void 0,(function*(){const t=Date.now();let n;try{const a=yield function(){return M(this,void 0,void 0,(function*(){return(yield fetch("/live-map/api/favorites").then(e=>e.json())).map(U)}))}();e(new i.ob(a))}catch(t){n=t,e(new i.pb(z.a.fromError(t)))}finally{r.a.track({event_name:"LM_SERVER_REQUEST_RESULT",params:Object.assign({API:"/live-map/api/favorites",TIME:Date.now()-t,RESULT:n?"FAILURE":"SUCCESS"},n&&{REASON:"AbortError"===n.name?"CANCELLED":n.message})})}}))}function H(e){const t=function(e){const t=localStorage.getItem(e);if(null!=t){const e=Number.parseInt(t,10);if(!Number.isNaN(e))return e}}(e),[n,a]=u.useState(t);return[n,u.useCallback(()=>{const t=Date.now();a(t),localStorage.setItem(e,t.toString())},[])]}var F=n(47),V=n(21);function W(){const[e,t]=Object(u.useState)({lat:0,lng:0});return Object(V.b)(e=>{const n=()=>t(e.getCenter());return e.whenReady(n).on("moveend",n),()=>{e.off("load moveend",n)}},[]),e}var B=n(18),K=n(12);n(524);function $(){const e=document.querySelector(".wm-attribution-control"),{translator:t}=u.useContext(L.a),n=Object(K.a)("livemap.attribution",t),a=W(),{href:r}=_({latLng:a}),[o,i]=u.useState(n(".click_to_copy")),s=u.useRef(null),c=u.useCallback(()=>{s.current&&(s.current.select(),document.execCommand("copy"),i(n(".copied")),setTimeout(()=>{i(n(".click_to_copy"))},2e3))},[s,r]);return e?Object(B.createPortal)(u.createElement("div",{className:"wz-attribution-link"},u.createElement("input",{className:"wz-attribution-link__input",ref:s,value:r,readOnly:!0}),u.createElement(F.b,{text:o,placement:"left"},u.createElement("button",{className:"wz-attribution-link__copy",onClick:c},u.createElement("i",{className:"w-icon-link w-icon"})))),e):null}var Y,q=n(9),X=n(10),Z=n.n(X);!function(e){e.REGAL_800="#155270",e.TRANSPARENT="#0000"}(Y||(Y={}));var Q=n(288),J=n(170);n(545);const ee={color:{dark:Y.REGAL_800,light:Y.TRANSPARENT},margin:0};function te({link:e}){const{translator:t}=u.useContext(L.a),n=Object(K.a)("livemap.send_to_phone",t),a=u.useMemo(()=>function(e){const t=Q.create(e,{version:15});return Object(J.renderToDataURL)(t,ee)}(e),[]);return u.createElement(u.Fragment,null,u.createElement("h3",null,n(".title")),u.createElement("div",{className:"wz-popup-content-columns"},u.createElement("div",{className:"wz-popup-content-child wz-qr"},u.createElement("img",{src:a,title:e}),u.createElement("div",{className:"wz-icon-wrapper"},u.createElement("i",{className:"wz-icon is-wazer"}))),u.createElement("div",{className:"wz-popup-content-child"},u.createElement("ol",null,u.createElement("li",null,n(".sections.first")),u.createElement("li",null,n(".sections.second")),u.createElement("li",null,n(".sections.third"))),u.createElement("div",{className:"wz-icon-list"},u.createElement("div",{className:"wz-icon-box"},u.createElement("i",{className:"wz-icon w-icon-android w-icon"})),u.createElement("div",{className:"wz-popup-send-to-phone-footer"},n(".footer.text"))))))}var ne=n(8);const ae=(e,t)=>{const{state:n}=u.useContext(o.a),{shareDrive:a,routing:r}=n;return u.useMemo(()=>{let n=new URL(Object(h.i)());switch(e){case N.a.ROUTING:(null==r?void 0:r.from)&&("ORIGIN"===t?Object(h.d)(n,r.from):Object(h.b)(n,r.from)),(null==r?void 0:r.to)&&Object(h.d)(n,r.to),(null==r?void 0:r.to)||(null==r?void 0:r.from)||Object(h.e)(n);break;case N.a.SHARE_DRIVE:n=new URL(function(e){if(!e||!e.token)return O();const{token:t,geoEnv:n}=e,a=n||"";return`${O()}?token=${encodeURIComponent(t)}&env=${encodeURIComponent(a)}`}(a))}return Object(h.f)(n),n.href},[t,r,e])},re=u.forwardRef((e,t)=>{const[n,a]=u.useState(e.isOpen),r=u.useCallback(()=>{a(!0)},[n]),i=u.useCallback(()=>{a(!1)},[n]),{Popup:s}=u.useContext(L.a),{state:c}=u.useContext(o.a),l=e.experience||c.experience,d=ae(l,e.type);return u.useImperativeHandle(t,()=>({show:r,hide:i}),[]),u.createElement(s,{isOpen:n,onOverlayClick:i},u.createElement("div",{className:Z()("wz-popup wz-send-to-phone-popup")},u.createElement("div",{className:"wz-popup-content"},u.createElement("button",{className:"wz-popup-close",onClick:i},u.createElement("i",{className:"w-icon-x w-icon"})),u.createElement(te,{link:d}))))});var oe=n(32),ie=n(49),se=n(99);const ce={playStoreId:"com.waze",appStoreId:"323229106",universalLink:Object(h.i)(),firebaseBundleId:"com.waze.iphone",firebaseUrlScheme:"waze",firebaseUrl:"https://mtjz3.app.goo.gl"},le=(Object(h.j)(),new URLSearchParams(location.search)),ue={app:ce,utm_source:le.get("utm_source")||"waze_website",utm_campaign:le.get("utm_campaign")||"default"};function de(e){const t=Object.assign(Object.assign({},ue),e);return Object(oe.isApple)()?me(t):Object(oe.isAndroid)()?pe(t):void 0}function me(e={}){const t=Object.assign(Object.assign({},ue),e);return Object(oe.isMobile)()?function(e){const t=new URLSearchParams,n=[e.utm_source,e.utm_medium,e.utm_campaign].filter(e=>null!=e).join("_");return t.set("isi",e.app.appStoreId),t.set("ibi",e.app.firebaseBundleId),t.set("ius",e.app.firebaseUrlScheme),t.set("ct",n),t.set("pt","274039"),t.set("mt",8..toString()),t.set("link",function(e){const t=Object.assign(Object.assign({},ue),e),n=new URLSearchParams;n.set("ref",fe(t)),n.set("url_ver","2"),t.shareDrive?(n.set("a","share_drive"),n.set("sd",t.shareDrive.token),n.set("locale",t.shareDrive.locale),n.set("env",t.shareDrive.env)):t.plannedDrive?(n.set("pd_ll",Object(ie.stringifyLatLng)(t.plannedDrive.latLng)),n.set("pd_time",t.plannedDrive.arriveBy.toString()),n.set("pd_title",t.plannedDrive.title),n.set("zoom",t.plannedDrive.zoom.toString()),n.set("deep_link",t.plannedDrive.deeplink),n.set("navigate","yes")):t.map&&(n.set("ll",Object(ie.stringifyLatLng)(t.map.latLng)),n.set("navigate","yes"));n.set("utm_source",t.utm_source),t.utm_medium&&n.set("utm_medium",t.utm_medium);return n.set("utm_campaign",t.utm_campaign),`${t.app.universalLink}?${n}`}(e)),`${e.app.firebaseUrl}?${t}`}(t):function(e){const t=new URLSearchParams,n=[e.utm_source,e.utm_medium,e.utm_campaign].filter(e=>null!=e).join("_");return t.set("ct",n),t.set("pt","274039"),t.set("mt",8..toString()),`https://itunes.apple.com/app/app-store/id${e.app.appStoreId}?${t}`}(t)}function pe(e={}){const t=Object.assign(Object.assign({},ue),e),n=new URLSearchParams;return n.set("id",t.app.playStoreId),n.set("referrer",fe(t)),"https://market.android.com/details?"+n}function fe(e){const t=new URLSearchParams;if((e.plannedDrive||e.map)&&t.set("f",""),t.set("utm_source",e.utm_source),e.utm_medium&&t.set("utm_medium",e.utm_medium),t.set("utm_campaign",e.utm_campaign),e.plannedDrive){return"deeplink_"+he(e.plannedDrive,t).toString()}return e.map?(t.set("ll",Object(ie.stringifyLatLng)(e.map.latLng)),t.set("navigate","yes"),"deeplink_"+t.toString()):t.toString()}function ve(e){const t=Object.assign(Object.assign(Object.assign({},ue),{navigate:!0}),e),n=new URLSearchParams;if(t.map){const e=se.encode(t.map.latLng.lat,t.map.latLng.lng);n.set("h",e)}else t.plannedDrive&&he(t.plannedDrive,n);return t.navigate&&n.set("n","T"),n.set("utm_source",t.utm_source),t.utm_medium&&n.set("utm_medium",t.utm_medium),n.set("utm_campaign",t.utm_campaign),"waze://?"+n.toString()}function he(e,t){return t.set("pd_ll",Object(ie.stringifyLatLng)(e.latLng)),t.set("pd_time",e.arriveBy.toString()),t.set("pd_title",e.title),t.set("zoom",e.zoom.toString()),t.set("deep_link",e.deeplink),t.set("navigate","yes"),t}function Ee(e){const t=new URLSearchParams;return t.set("sd",e.token),e.utm_medium&&t.set("utm_medium",e.utm_medium),e.utm_campaign&&t.set("utm_campaign",e.utm_campaign),t.set("utm_source","waze_app"),"waze://?"+t}var be,ge=n(37),_e=n(98);function we(e,t){return e.plannedDrive?function(e,t){const n=Object.assign(Object.assign({},Oe(t)),{plannedDrive:e});return{isPlannedDrive:!0,deepLink:ve(n),appStoreLink:me(n),playStoreLink:pe(n),downloadLink:de(n)}}(e.plannedDrive,t):function(e,t){const n=Object.assign(Object.assign({},Oe(t)),{map:{latLng:new ne.LatLng(e.latLng.lat,e.latLng.lng)}});return{isPlannedDrive:!1,deepLink:ve(n),appStoreLink:me(n),playStoreLink:pe(n),downloadLink:de(n)}}(e,t)}function Oe(e){const t=new URLSearchParams(location.search),n=t.get("utm_campaign")||t.get("pname"),a=Object(oe.isMobile)()?"mobile":"desktop",r=function(e){const{placeId:t,latLng:n}=Object(_e.a)(e,"to");if(t){const{type:e}=Object(E.b)(t);if(e===E.a.GOOGLE_PLACE_ID)return"g_place";if(e===E.a.WAZE_PLACE_ID)return"w_place"}if(n)return"location";return""}(t),o=ge.a.isPlannedDrive?"planned_drive":ge.a.isShareDrive?"share_drive":"",i=t.get("utm_medium")||["web-livemap",a,e,r,o].filter(Boolean).join("-");return Object.assign({utm_medium:i},n&&{utm_campaign:n})}!function(e){e.CTA_BAR="cta_bar",e.OVERLAY="overlay",e.POI_CARD="poi_card",e.SHARE_DRIVE="share_drive",e.OPEN_APP="openapp"}(be||(be={}));var ye=n(63);n(546);function Ce({value:e}){const t=W(),n=we(null!=e?e:{latLng:t},be.CTA_BAR),a=u.useRef(null),{translator:r}=u.useContext(L.a),o=Object(K.a)("livemap.download_bar",r),[i,s]=H("downloadbarClosedAt"),c=null==i||Date.now()>i+12e5,l=u.useCallback(()=>{a.current&&a.current.show()},[]);if(!c)return null;const{isPlannedDrive:d,appStoreLink:m,playStoreLink:p,downloadLink:f}=n;return u.createElement("div",{className:"wz-downloadbar","data-nosnippet":!0},u.createElement(re,{ref:a}),u.createElement("button",{className:"wz-downloadbar__close-button",onClick:s},u.createElement("i",{className:"w-icon-x w-icon"})),u.createElement("div",{className:"wz-downloadbar-content"},u.createElement("div",{className:"wz-downloadbar__center-column"},u.createElement("div",{className:"wz-downloadbar__logo"},u.createElement("i",{className:"waze-text-logo"}),u.createElement("i",{className:"wz-hidden-mobile wz-icon stars is-stars-gold"}),u.createElement("i",{className:"wz-hidden-desktop exp-cta-bar-default wz-icon stars is-stars-gold"}),u.createElement("i",{className:"wz-hidden-desktop exp-cta-bar-blue wz-icon stars is-stars-platinum"})),u.createElement("div",{className:"wz-downloadbar__tagline"},o(d?".pd_tagline":".tagline"))),u.createElement("i",{className:Z()("wz-hidden-mobile wz-icon is-app-driver",{"is-planned-drive":d})}),u.createElement("i",{className:Z()("wz-hidden-desktop exp-cta-bar-default wz-icon is-app-driver",{"is-planned-drive":d})}),u.createElement("i",{className:Z()("wz-hidden-desktop exp-cta-bar-blue wz-icon is-wazer",{"is-planned-drive":d})})),u.createElement("div",{className:"wz-hidden-mobile"},u.createElement(q.WzButton,{color:"secondary",className:"wz-send-to-phone-button",onClick:l},u.createElement("i",{className:"w-icon-send-to-phone w-icon"}),o(".send_phone")),u.createElement(ye.a,{href:m,className:"wz-download-button wz-download-button--ios"}),u.createElement(ye.a,{href:p,className:"wz-download-button wz-download-button--android"})),u.createElement("div",{className:"wz-hidden-desktop"},u.createElement(q.WzButton,{id:"download-button-default",onClick:()=>window.open(f),size:"sm",className:"exp-cta-bar-default wz-downloadbar__mobile-button"},o(".download")),u.createElement(q.WzButton,{id:"download-button-blue",onClick:()=>window.open(f),size:"sm",className:"exp-cta-bar-blu wz-downloadbar__mobile-button"},o(".get"))))}var Le=n(52),Ne=n(79);const Se=new(n(139).GeoRssLayer)({filters:{alerts:function(e){switch(e.type){case"ACCIDENT":case"CHIT_CHAT":case"POLICE":case"ROAD_CLOSED":return!0;case"HAZARD":return"HAZARD_ON_ROAD_CAR_STOPPED"!==e.subtype&&"HAZARD_ON_SHOULDER_CAR_STOPPED"!==e.subtype;default:return!1}}},trucksEnabled:!1});function ke(){return Se}function Ie(){const e=ke(),t=Object(u.useMemo)(()=>[e],[e]),n=function(){const e=function(){const[e,t]=Object(u.useState)(location.search),n=Object(u.useMemo)(()=>new URLSearchParams(e),[e]);return Object(u.useEffect)(()=>t(location.search)),n}(),t=Object(Le.a)(),n=e.has("from")&&e.has("to");return t&&n}();return Object(Ne.a)(n?[]:t),null}var Re=n(26),Te=n(69),je=n(64),De=n(2);const Ae=()=>{const{translator:e}=u.useContext(L.a),{locale:t}=e,n=u.useMemo(()=>t===De.defaultLocale,[t]);return{livemapLink:u.useMemo(()=>n?"/live-map":`/${t}/live-map`,[t,n]),carpoolLink:u.useMemo(()=>n?"/carpool/web":`/${t}/carpool/web`,[t,n]),editorLink:u.useMemo(()=>n?"/editor":`/${t}/editor`,[t,n]),forumLink:"/forum",wazeopediaLink:"https://wazeopedia.waze.com",partnerhubLink:"/partnerhub",adsLink:u.useMemo(()=>n?"/business":"/business/"+t,[t,n]),accountLink:u.useMemo(()=>n?"/account":`/${t}/account`,[t,n]),helpCenterLink:u.useMemo(()=>n?"https://support.google.com/waze/answer/9058157":"https://support.google.com/waze/answer/9058157?hl="+t,[t,n]),reportIssueLink:u.useMemo(()=>"/ContactForm/form-web/:locale/core-web".replace(":locale",t),[t])}},xe=e=>t=>{const{onClick:n}=t,a=Object.assign({onclick:n},t);return u.createElement(e,Object.assign({},a))},Pe=xe(q.WzAppLauncherItem),ze=u.memo(()=>{const e=Object(Re.a)("waze_menu.app_launcher"),{livemapLink:t,carpoolLink:n,editorLink:a,forumLink:r,wazeopediaLink:o,partnerhubLink:i,adsLink:s}=Ae(),c=u.useCallback(()=>{window.open(t)},[t]),l=u.useCallback(()=>{window.open(n)},[n]),d=u.useCallback(()=>{window.open(a)},[a]),m=u.useCallback(()=>{window.open(r)},[r]),p=u.useCallback(()=>{window.open(o)},[o]),f=u.useCallback(()=>{window.open(i)},[i]),v=u.useCallback(()=>{window.open(s)},[s]);return u.createElement(q.WzAppLauncher,{className:"wz-header__app-launcher"},u.createElement(Pe,{icon:"livemap",onClick:c},e(".livemap")),u.createElement(Pe,{icon:"carpool",onClick:l},e(".carpool")),u.createElement(Pe,{icon:"editor",onClick:d},e(".editor")),u.createElement(Pe,{icon:"forums",onClick:m},e(".forum")),u.createElement(Pe,{icon:"wazeopedia",onClick:p},e(".wazeopedia")),u.createElement(Pe,{icon:"partners",onClick:f},e(".partner_hub")),u.createElement(Pe,{icon:"ads",onClick:v},e(".ads")))});n(566);const Me=()=>({trackUserBoxItemClicked:u.useCallback(e=>{r.a.track({event_name:"LM_USERBOX_CLICKED",action:e})},[])}),Ue=xe(q.WzMenuItem),Ge=u.memo(({user:e,onLogout:t})=>{const n=Object(Re.a)("waze_menu"),{accountLink:a,helpCenterLink:r,reportIssueLink:o}=Ae(),{trackUserBoxItemClicked:i}=Me(),s=u.useCallback(()=>{i("dashboard"),window.open(a)},[a,i]),c=u.useCallback(()=>{i("helpCenter"),window.open(r)},[r,i]),l=u.useCallback(()=>{i("reportIssue"),window.open(o)},[o,i]),d=u.useCallback(()=>{i("logout"),t()},[t,i]);return u.createElement("div",{className:"wz-header__user-box","data-e2e":"header__user-box"},u.createElement(q.WzUserBox,{userName:e.fullname,userEmail:e.email,avatarUrl:e.profileImageUrl},u.createElement(q.WzUserBoxAvatar,{avatarUrl:e.profileImageUrl}),u.createElement(Ue,{onClick:s},n(".user_box.account")),u.createElement(Ue,{onClick:c},n(".help_center")),u.createElement(Ue,{onClick:l},n(".report_issue")),u.createElement(Ue,{onClick:d},n(".user_box.logout"))))}),He=xe(q.WzMenuItem),Fe=u.memo(()=>{const e=Object(Re.a)("waze_menu"),t=u.useRef(null),{helpCenterLink:n,reportIssueLink:a}=Ae(),{trackUserBoxItemClicked:r}=Me(),o=u.useCallback(e=>{var n;null===(n=t.current)||void 0===n||n.toggleMenu(e.nativeEvent)},[]),i=u.useCallback(()=>{r("helpCenter"),window.open(n)},[n,r]),s=u.useCallback(()=>{r("reportIssue"),window.open(a)},[a,r]);return u.createElement("div",{className:"wz-visitor-menu"},u.createElement("i",{className:"w-icon w-icon-dot-menu wz-visitor-menu__button",onClick:o}),u.createElement(q.WzMenu,{ref:t,className:"wz-visitor-menu__menu"},u.createElement(He,{onClick:i},e(".help_center")),u.createElement(He,{onClick:s},e(".report_issue"))))});var Ve=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const We=()=>{const{state:e,dispatch:t}=u.useContext(o.a),{translator:n}=u.useContext(L.a),a=Object(Re.a)("waze_menu"),{trackLoginClicked:s}={trackLoginClicked:u.useCallback(()=>{r.a.track({event_name:"LM_LOGIN_CLICKED"})},[])},c=u.useCallback(()=>Ve(void 0,void 0,void 0,(function*(){let e;try{e=yield je.a.loginOrDie(n.locale)}catch(e){if(z.a.isLivemapError(e)&&e.code===Te.a.DISMISSED)return;return console.error("Login failed",e)}t(new i.nb(e))})),[]),l=u.useCallback(()=>Ve(void 0,void 0,void 0,(function(){})),[c,s]);return u.useEffect(()=>{je.a.getCurrentUser().then(e=>{const n=e?new i.nb(e):new i.qb;t(n)})},[]),e.user?u.createElement("div",{className:"wz-header","data-e2e":"header","data-nosnippet":!0},u.createElement(ze,null),(d=e.user,Boolean(null==d?void 0:d.username)?u.createElement(Ge,{user:e.user,onLogout:je.a.logout}):u.createElement(u.Fragment,null,u.createElement(Fe,null),u.createElement(q.WzButton,{className:"wz-header__login-button","data-e2e":"header__login-button",onClick:l},a(".login"))))):null;var d};var Be=n(65),Ke=n(289),$e=n.n(Ke),Ye=n(290),qe=n.n(Ye),Xe=n(125);function Ze(e,t){const n=e.querySelector(t);if(null==n)throw new Error("Cannot find selector "+t);return n}function Qe(e,t){const n=Object.assign({target:"_blank",rel:"noopener nofollow"},t);return Xe.tagify(Object(De.t)(e),"a",n)}function Je(e,t){const n=Object(De.t)(e),a=/\[(.+)\]/.exec(n);if(null==a)return u.createElement(u.Fragment,null,n);const r=a[1],o=a.index,i=n.slice(0,o),s=n.slice(o+r.length+2);return u.createElement(u.Fragment,null,i,u.createElement("a",Object.assign({},t),r),s)}function et(...e){e.forEach(e=>e.classList.add("wz-hidden"))}const tt={closeOnOverlayClick:!0,closeOnEscPress:!0};class nt{constructor(e,t=tt){this.el=e,this.options=t,this.ui={close:this.el.querySelectorAll(".js-close"),ok:this.el.querySelector(".js-ok"),cancel:this.el.querySelector(".js-cancel")},this.closeCallbacks=[],et(this.el),this.addEventListeners()}close(e){this.hide(),this.closeCallbacks.forEach(t=>t(e))}show(){!function(...e){e.forEach(e=>e.classList.remove("wz-hidden"))}(this.el)}hide(){et(this.el)}onClose(e){this.closeCallbacks.push(e)}addEventListeners(){this.ui.close&&this.ui.close.forEach(e=>e.addEventListener("click",()=>this.close(!1))),this.ui.ok&&this.ui.ok.addEventListener("click",()=>this.close(!0)),this.ui.cancel&&this.ui.cancel.addEventListener("click",()=>this.close(!1)),this.options.closeOnOverlayClick&&this.el.addEventListener("click",e=>{e.target.classList.contains("wz-popup-overlay")&&this.close(!1)}),this.options.closeOnEscPress&&(this.el.addEventListener("keydown",e=>{"Escape"===e.key&&this.close(!1)}),this.el.tabIndex=0,setTimeout(()=>this.el.focus(),0))}}var at=n(291),rt=n(292),ot=n(293);class it{constructor(e){this.context=e,this.el=document.createElement("div");const t=ot({t:(n="livemap.add_problem_popup",(e,t)=>{const a="."===e.charAt(0)?n+e:e;return Object(De.t)(a,t)})});var n;const a=Object(rt.htmlFromStringKnownToSatisfyTypeContract)(t,"This should eventually be migrated to React, as it's a template\n      which is being maintained by us, it's safe to assume that its secured.");this.el.innerHTML=Object(at.unwrapHtmlForSink)(a),this.popup=new nt(this.el),this.ui={submit:Ze(this.el,".js-submit"),type:Ze(this.el,".js-problem-type"),description:Ze(this.el,".js-problem-description")},this.ui.submit.addEventListener("click",()=>this.submit())}show(){document.body.appendChild(this.el),this.popup.show()}submit(){this.ui.submit.setAttribute("disabled","disabled");const e=new $e.a({latLng:this.context.getLatLng(),type:this.ui.type.value,description:this.ui.description.value});qe.a.forGeoEnv(this.context.getGeoEnv()).createMapProblem(e).then(()=>{this.ui.submit.removeAttribute("disabled"),this.popup.hide()})}}class st{constructor(e){this.el=e,this.tabs=Array.from(this.el.querySelectorAll(".wz-tab")),this.panes=Array.from(this.el.querySelectorAll(".wz-tab-pane")),this.tabs.forEach((e,t)=>{"#"===e.getAttribute("href")&&e.addEventListener("click",e=>{e.preventDefault(),this.setActive(t)})}),this.invalidateSize()}static init(){return Array.from(document.querySelectorAll(".wz-tabs")).map(e=>new st(e))}invalidateSize(){const e=this.el.querySelector(".wz-tab-line");e&&e.scrollWidth>e.clientWidth?this.el.classList.add("is-overflow"):this.el.classList.remove("is-overflow")}setActive(e){this.clearActive(),this.tabs[e].classList.add("is-active"),this.panes[e].classList.add("is-active"),this.el.dispatchEvent(new CustomEvent("activeTabChanged",{detail:{index:e}}))}clearActive(){const e=this.panes.find(e=>e.classList.contains("is-active"));null!=e&&e.classList.remove("is-active");const t=this.tabs.find(e=>e.classList.contains("is-active"));null!=t&&t.classList.remove("is-active")}}class ct{constructor(e){this.ui={field:Ze(e,"input, textarea"),copy:Ze(e,"button")},this.ui.field.readOnly=!0,this.addEventListeners()}setValue(e){this.ui.field.value=e}disallowCopy(){this.ui.copy.disabled=!0}allowCopy(){this.ui.copy.disabled=!1}addEventListeners(){this.ui.field.addEventListener("click",()=>this.select()),this.ui.copy.addEventListener("click",()=>{this.select(),document.execCommand("copy"),this.updateCopyButton()})}select(){this.ui.field.focus(),this.ui.field.setSelectionRange(0,this.ui.field.value.length)}updateCopyButton(){this.ui.copy.innerText=De.t("styleguide.copied"),this.ui.copy.classList.add("wz-copied"),setTimeout(()=>{this.ui.copy.innerText=De.t("styleguide.copy"),this.ui.copy.classList.remove("wz-copied")},2e3)}}var lt=n(294);class ut extends T.BaseView{constructor(e,t){super(),this.latLng=e,this.zoom=t,this.ui=this.defineUi(()=>({embedCode:this.querySelectorOrDie(".js-embed-code"),clipboardField:this.querySelectorOrDie(".js-clipboard-field")}))}render(){return this.renderTemplate(lt,{embedBodySafeHtml:Qe("livemap.share_popup.embed.body",{href:m.a.aboutEmbed}),value:this.getEmbedCode()},"livemap.share_popup"),this.createClipboardField(),this.setEmbedCodeHeight(),this}createClipboardField(){return new ct(this.ui().clipboardField)}setEmbedCodeHeight(){setTimeout(()=>{this.ui().embedCode.style.height=this.ui().embedCode.scrollHeight+"px"},0)}getEmbedCode(){const e=new URL("/iframe",m.a.embedHost);return Object(h.a)(e,this.latLng,this.zoom),Object(h.g)(e),`<iframe src="${e.href}" width="600" height="450" allowfullscreen></iframe>`}}var dt=n(48);function mt(e){const{utm_source:t,utm_medium:n,utm_campaign:a,utm_term:r,utm_content:o}=Object(dt.parse)(e);return Object(x.pick)({utm_source:t,utm_medium:n,utm_campaign:a,utm_term:r,utm_content:o},e=>"string"==typeof e)}function pt(e){return Object(dt.stringify)(mt(e))}var ft=n(295);class vt extends T.BaseView{constructor(e,t,n){super(),this.latLng=e,this.zoom=t,this.poi=n,this.ui=this.defineUi(()=>({clipboardField:this.querySelectorOrDie(".js-clipboard-field")}))}render(){const e=new URL(Object(h.i)());this.poi?Object(h.d)(e,this.poi):Object(h.c)(e,this.latLng,this.zoom),Object(h.g)(e);const{utm_campaign:t,utm_source:n}=mt(location.search);return e.searchParams.set("utm_campaign",t||"default"),e.searchParams.set("utm_source",n||"waze_website"),e.searchParams.set("utm_medium","lm_share_location"),this.renderTemplate(ft,{drivingDirectionsBodySafeHtml:Qe("livemap.share_popup.share_driving_directions.body",{href:m.a.wazeDeeplinks}),value:e.href},"livemap.share_popup"),this.createClipboardField(),this}createClipboardField(){return new ct(this.ui().clipboardField)}}var ht=n(296);class Et extends T.BaseView{constructor(e,t){super(),this.latLng=e,this.poi=t,this.ui=this.defineUi(()=>({clipboardField:this.querySelectorOrDie(".js-clipboard-field")}))}render(){return this.renderTemplate(ht,{value:_({latLng:this.latLng,poi:this.poi}).href},"livemap.share_popup"),this.createClipboardField(),this}createClipboardField(){return new ct(this.ui().clipboardField)}}var bt,gt=n(297);class _t extends T.BaseView{constructor(e,t,n){super(),this.latLng=e,this.zoom=t,this.poi=n,this.ui=this.defineUi(()=>({tabs:this.querySelectorOrDie(".js-tabs")})),this.regions=this.defineRegions(()=>({shareDrive:this.createRegion(".js-share-drive"),shareMap:this.createRegion(".js-share-map"),embed:this.createRegion(".js-embed")}))}static show(e,t,n){const a=new _t(e,t,n).render(),r=new nt(a.el);document.body.appendChild(a.el),r.onClose(()=>a.destroy()),r.show()}render(){return this.renderTemplate(gt,{isPoi:Boolean(this.poi)},"livemap.share_popup"),this.tabs=new st(this.ui().tabs),this.shareMap=new Et(this.latLng,this.poi),this.shareDrive=new vt(this.latLng,this.zoom,this.poi),this.embed=new ut(this.latLng,this.zoom),this.regions().shareDrive.showView(this.shareDrive),this.regions().shareMap.showView(this.shareMap),this.regions().embed.showView(this.embed),this.ui().tabs.addEventListener("activeTabChanged",()=>this.embed&&this.embed.setEmbedCodeHeight()),this}getTabs(){return this.tabs}}!function(e){e.SHARE="SHARE",e.CENTER="CENTER",e.ORIGIN="ORIGIN",e.DESTINATION="DEST",e.REPORT="REPORT"}(bt||(bt={}));const wt=e=>{var t,n;const a=e.context,{lat:o,lng:i}=null!==(t=null==a?void 0:a.getLatLng())&&void 0!==t?t:{};r.a.track({event_name:"LM_MAP_CONTEXT_MENU_SHOWN",type:null!==(n=null==a?void 0:a.getStreetName())&&void 0!==n?n:De.t("wazemap.no_street"),params:{LAT:o,LNG:i}})},Ot=e=>{var t;const{context:n,action:a}=e,{lat:o,lng:i}=n.getLatLng();r.a.track({event_name:"LM_MAP_CONTEXT_MENU_CLICKED",type:null!==(t=n.getStreetName())&&void 0!==t?t:De.t("wazemap.no_street"),action:a,params:{LAT:o,LNG:i}})};var yt=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function Ct(){Object(V.b)(e=>(e.on("reverse_geocoding:rendered",wt),e.on("livemap:context_menu_clicked",Ot),()=>{e.off("reverse_geocoding:rendered",wt),e.off("livemap:context_menu_clicked",Ot)}),[]);const{state:e,dispatch:t}=u.useContext(o.a),{translator:n}=u.useContext(L.a),a=Object(K.a)("livemap.routing",n);return Object(V.b)(e=>{const n=e.actions;return n.register("share",function(e){return{text:De.t("livemap.share"),canRun:e=>null!=e.getLatLng(),run(t){_t.show(t.getLatLng(),t.getZoom()),e.fire("livemap:context_menu_clicked",{context:t,action:bt.SHARE})}}}(e)),n.register("setAsMapCenter",function(e){return{text:De.t("livemap.set_as_map_center"),canRun:e=>null!=e.getLatLng(),run(t){e.setView(t.getLatLng(),t.getZoom()),e.fire("livemap:context_menu_clicked",{context:t,action:bt.CENTER})}}}(e)),n.register("setAsOrigin",Lt(a(".set_as_origin"),t,e)),n.register("setAsDestination",Nt(a(".set_as_destination"),t,e)),()=>n.unregister("share","setAsMapCenter","setAsOrigin","setAsDestination")},[]),Object(V.b)(e=>(je.a.getCurrentUser().then(t=>{null!=t&&(e.actions.unregister("reportMapProblem"),e.actions.register("reportMapProblem",function(e){return{text:De.t("livemap.add_problem_popup.title"),canRun:e=>null!=e.getLatLng(),run(t){new it(t).show(),e.fire("livemap:context_menu_clicked",{context:t,action:bt.REPORT})}}}(e)))}),()=>e.actions.unregister("reportMapProblem")),[e.user]),null}function Lt(e,t,n){return{text:e,canRun:e=>null!=e.getLatLng(),run:e=>yt(this,void 0,void 0,(function*(){const a=yield St(e);t(new i.Z(a)),n.fire("livemap:context_menu_clicked",{context:e,action:bt.ORIGIN})}))}}function Nt(e,t,n){return{text:e,canRun:e=>null!=e.getLatLng(),run:e=>yt(this,void 0,void 0,(function*(){const a=yield St(e);t(new i.kb(a)),n.fire("livemap:context_menu_clicked",{context:e,action:bt.DESTINATION})}))}}function St(e){return yt(this,void 0,void 0,(function*(){const t=yield Object(Be.a)(e.getLatLng()),n=P.j.DROPPED_PIN;return Object.assign({type:n},t)}))}var kt=n(298);function It(){const{browser:{isMobile:e,width:t}}=Object(u.useContext)(L.a);return Object(V.b)(n=>{if(e||t<768)return;const a=(new kt.ReverseGeocodingLayer).addTo(n);return()=>{a.remove()}},[]),null}function Rt(e,{withAmPm:t}={withAmPm:!0}){const n=e.toLocaleString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit"});return t?n:n.slice(0,-3)}function Tt(e){return e.toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())}var jt=n(55),Dt=n.n(jt);var At=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function xt(e){const t="SocialMediaServer";if(e!==j.GeoEnv.IL&&e!==j.GeoEnv.ROW)return t;return`${Pt(e)}-${t}`}function Pt(e){return e===j.GeoEnv.ROW?"row":e===j.GeoEnv.IL?"il":"na"}function zt(e,{withStreet:t}={withStreet:!1}){if(!e.calculatedLocation)return"";const{calculatedLocation:n}=e,{street:a,city:r,state:o,country:i}=n;return[t?a:null,r,o,i].filter(Boolean).join(", ")}function Mt(e,t){return At(this,void 0,void 0,(function*(){const n=xt(t),a=yield Dt.a.get(`/${n}/internal/getMeetingInfo`,{params:{event_id:e}});return Object.assign(Object.assign({},a.data),{token:e})}))}function Ut(e,t){return At(this,void 0,void 0,(function*(){const n=Pt(t),a=Date.now(),r=yield Dt.a.get(`/${n}-rtserver/web/PickUpGetDriverInfo`,{params:{token:e,getUserInfo:!0,_:a}}),{status:o}=r.data;return"ok"!==o?null:function(e){const{route:t}=e,n=function(e,t=1){return Array(Math.ceil(e.length/t)).fill([]).map((e,n)=>n*t).map(n=>e.slice(n,n+t))}(t,2).map(([e,t])=>({lat:t,lng:e})),a={lat:e.lat,lng:e.lon};return Object.assign(Object.assign({},e),{driver:a,latLngs:n,lngLatTimestamp:e.lonlatTimestamp,driveEnded:Boolean(!e||!e.route||!e.route.length)})}(r.data)}))}function Gt(e,t){return`/${xt(t)}/facebook/getResource/pickup/${encodeURIComponent(e)}/picture?token_type=meeting&type=square300`}var Ht;n(604);!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(Ht||(Ht={}));class Ft extends u.Component{constructor(e){super(e);const{shareDrive:t}=e.store.getState();this.state={token:t&&t.token||"",geoEnv:t?t.geoEnv:j.GeoEnv.IL,withProfileImage:!0},this.handleError=this.handleError.bind(this)}render(){const{token:e,geoEnv:t,withProfileImage:n}=this.state;return u.createElement("div",{className:"wz-profile-picture__image is-size-"+this.props.size},n&&u.createElement("img",{src:Gt(e,t),onError:this.handleError}),!n&&u.createElement("div",{className:"wz-profile-picture__image-default"}))}handleError(){this.setState({withProfileImage:!1})}}n(605);class Vt extends u.Component{constructor(e){super(e);const{shareDrive:t,experience:n}=e.store.getState();this.state={shareDrive:t,experience:n}}componentDidMount(){this.unsubscribe=this.props.store.subscribe(this.handleStoreChange.bind(this))}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const{shareDrive:e,experience:t}=this.state;if(!I(t,e)||!e||!e.endDate)return null;const n=this.renderContent(e,e.endDate),a=new URLSearchParams(location.search);return a.delete("to"),a.delete("from"),u.createElement(C.b,{className:"wz-share-drive-minimized",to:"/live-map/meeting?"+a.toString()},n)}handleStoreChange(e){this.setState({experience:e.experience,shareDrive:e.shareDrive})}renderContent(e,t){const n=Object(oe.isMobile)(),a=Rt(t,{withAmPm:!1}),r=A.a.translate("livemap.meeting.default_name"),o=e.ownerFirstName?Tt(e.ownerFirstName):r;return u.createElement(u.Fragment,null,u.createElement(Ft,{shareDrive:e,store:this.props.store,size:n?Ht.SMALL:Ht.MEDIUM}),!n&&u.createElement("div",{className:"wz-share-drive-minimized-card__text"},A.a.translate("livemap.meeting.poi.user_driving_to",{name:o})),n?u.createElement("div",{className:"wz-share-drive-minimized-card__icon-wrapper"},u.createElement("div",{className:"wz-icon w-icon-wifi w-icon"})):u.createElement("div",{className:"wz-share-drive-minimized-card__arrival"},u.createElement("div",{className:"wz-share-drive-minimized-card__icon-wrapper"},u.createElement("div",{className:"wz-icon w-icon-wifi w-icon"})),u.createElement("div",{className:"wz-share-drive-minimized-card__arrival-eta"},A.a.translate("livemap.meeting.poi.eta_time",{time:a}))))}}n(606);function Wt(){const{translator:e}=u.useContext(L.a),t=Object(K.a)("wazeon",e);return u.createElement("div",{className:"wz-wazeon-banner gtm-covid19-livemap-banner","data-nosnippet":!0},u.createElement("div",{className:"wz-wazeon-banner__help"},u.createElement("div",null,t(".title"),":"),u.createElement("div",null,t(".description"))),u.createElement(ye.a,{href:"https://www.waze.com/wazeon",className:"wz-wazeon-banner__learn-more"},t(".learn_more")))}const Bt=new RegExp(window.location.host+"(.)*/signin"),Kt=new RegExp(window.location.host+"(.)*/live-map");function $t(){return Kt.test(document.referrer)}const Yt=u.createContext({register:x.noop,get:()=>document.body});function qt(e){const[t,n]=u.useState({}),a=u.useRef({}),r=u.useCallback((e,t)=>{a.current[e]=t,n(a.current)},[]),o=u.useCallback(e=>t[e],[t]);return u.createElement(Yt.Provider,{value:{register:r,get:o}},e.children)}function Xt({id:e}){const{register:t}=u.useContext(Yt),n=u.createRef(),a=u.useCallback(n=>{n&&t(e,n)},[e]);return u.useEffect(()=>{a(n.current)},[n.current]),u.createElement("div",{ref:n,id:e+"-portal"})}var Zt=n(27);class Qt extends u.Component{constructor(){super(...arguments),this.state={error:!1}}static getDerivedStateFromError(){return{error:!0}}componentDidCatch(e,t){console.error("Component crashed",e,t)}render(){return this.state.error?this.props.fallback:this.props.children}}const Jt={changeActive:x.noop,changeMobilePoiVisible:x.noop},en=u.createContext(Jt);class tn extends u.Component{constructor(){super(...arguments),this.state={active:"destination",mobilePoiVisible:!1}}render(){return u.createElement(Qt,{fallback:null},u.createElement("div",{className:Z()("wm-cards is-"+this.state.active,{"with-share-drive":this.props.withShareDrive,"with-routing":this.props.withRouting,"with-routes":this.props.withRoutes,"mobile-poi-visible":this.state.mobilePoiVisible})},u.createElement(en.Provider,{value:{changeActive:e=>this.setState({active:e}),changeMobilePoiVisible:e=>this.setState({mobilePoiVisible:e})}},this.props.children)))}}const nn=()=>{const{isMobile:e}=u.useContext(L.a).browser;return u.createElement("div",{className:"wz-map-placeholder__container"},!e&&u.createElement("div",{id:"map-viewport",className:"wz-map-placeholder__viewport"}),u.createElement("div",{className:"wz-map-placeholder__image"}),u.createElement("div",{className:"wz-app-loader"}))};var an=n(22),rn=n(101),on=n(80);function sn(){const{translator:e}=u.useContext(L.a),{state:t}=u.useContext(o.a),n=u.useContext(on.a),[a,i]=u.useState(!1),[s,c]=u.useState(!1);u.useEffect(()=>{r.a.startGlobalClickTracking(),Object.assign(window,{__TRACK_N_EVENTS__:(e=2e3)=>{for(let t=0;t<e;t++)r.a.track({event_name:"TEST_EVENT"})}})},[]),u.useEffect(()=>{a&&s&&r.a.setReady(!0)},[a,s]),u.useEffect(()=>{c(!0),r.a.updateOptions(Object.assign(Object.assign({},r.b),{enrich:a=>{var r;return Object.assign(Object.assign({},a),{language:e.locale,source_app:an.SourceApp.LIVEMAP,component:an.Component.LIVEMAP,version:Object(rn.a)(),params:Object.assign(Object.assign(Object.assign({},a.params),{EXPERIMENTS_JSON:JSON.stringify(n),LANDING:null===(r=t.landingPageContext)||void 0===r?void 0:r.pageType}),l.isSynced()?null:{WEF:!1})})}}))},[e.locale,t.config,n]),u.useEffect(()=>{var e;t.user&&(i(!0),r.a.setUser(null===(e=t.user)||void 0===e?void 0:e.id,an.Role.DRIVER))},[t.user])}function cn({selected:e,onSelect:t,iconType:n,primaryText:a,secondaryText:r,classNames:o=[]}){const i=u.useCallback(()=>{const e=setTimeout(()=>{t()},201);return()=>{clearTimeout(e)}},[t]);return u.createElement("li",{className:Z()("wm-search-item",{"wm-search-item-selected":e},...o),onClick:i},u.createElement(ln,{type:n}),u.createElement("span",null,u.createElement("span",{className:"wm-search-item__primary"},a),u.createElement("span",{className:"wm-search-item__secondary"},r)))}function ln({type:e}){switch(e){case P.e.HOME:return u.createElement("i",{className:"w-icon w-icon-home"});case P.e.WORK:return u.createElement("i",{className:"w-icon w-icon-work"});default:return u.createElement("i",{className:"w-icon w-icon-star"})}}function un({favorite:e,selected:t,onSelect:n,suggestionMatchesHomeOrWork:a}){return u.useEffect(()=>{r.a.track({event_name:"LM_HWF_OPTION_SHOWN",params:{TYPE:e.type,QUERY_MATCHES_LOCALIZED_HOME_OR_WORK:a}})},[]),u.createElement(cn,{selected:t,iconType:e.type,primaryText:e.name,secondaryText:e.place.address,classNames:["is-favorite"],onSelect:dn(n,e)})}function dn(e,t){const{dispatch:n}=u.useContext(o.a);return u.useCallback(()=>{n(new i.fb({state:P.h.INITIAL})),e(t)},[t])}function mn({selected:e,onSelect:t}){return u.createElement(cn,{onSelect:t,selected:e,iconType:P.e.OTHER,primaryText:Object(De.t)("livemap.favorites.login_hook.hook"),classNames:["favorites-login-hook"]})}function pn({favorites:e,selectedIndex:t,onSelect:n,onLoginHookSelect:a,suggestionMatchesHomeOrWork:r}){return 0===e.length&&!1!==a?u.createElement(mn,{selected:0===t,onSelect:a}):u.createElement(u.Fragment,null,e.map((e,a)=>u.createElement(un,{selected:a===t,favorite:e,key:e.id,onSelect:()=>n(e,a),suggestionMatchesHomeOrWork:r})))}var fn,vn,hn=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function En(e,t){return hn(this,void 0,void 0,(function*(){let n;e(new i.fb({state:P.h.LOGGING_IN}));try{n=yield je.a.loginOrDie(t)}catch(t){if(z.a.isLivemapError(t)&&(t.code===Te.a.DISMISSED||t.code===Te.a.REOPENED))return;e(new i.fb({state:P.h.ERROR,error:z.a.fromError(t)}))}null!=n&&e(new i.nb(n))}))}function bn(e,t){return{event_name:"LM_ERROR_MESSAGE_"+t.verb,type:t.type,action:t.action,params:Object.assign({SUBTYPE:t.subType,ERROR_CODE:e.code,COPY:t.copy},t.additionalParams||{})}}!function(e){e.FLASH="FLASH"}(fn||(fn={})),function(e){e.CLOSE="CLOSE",e.TRY_AGAIN="TRY_AGAIN",e.LEARN_MORE="LEARN_MORE"}(vn||(vn={}));n(607);function gn({children:e,permanent:t,type:n="default",CloseButton:a="button",onClose:r}){const[o,i]=u.useState(!1),{translator:s}=u.useContext(L.a),c=Object(K.a)("livemap.styleguide",s),l=u.createElement("div",{className:"wz-notification-container"},u.createElement("div",{className:Z()("wz-notification is-"+n,{"wz-hidden":o,"is-animated":!t}),hidden:o},e,u.createElement(a,{"aria-label":c(".close"),onClick:()=>{i(!0),null==r||r()}},u.createElement("i",{className:"w-icon-x w-icon"})))),d=u.useContext(Yt).get("notification");return d?Object(B.createPortal)(l,d):l}n(608);const _n=new Map([[P.h.LOGGING_IN,"LM_HWF_LOGIN_HOOK_LOGIN_FLASH"],[P.h.NO_FAVORITES,"LM_HWF_LOGIN_HOOK_NO_HWF_FLASH"],[P.h.OK,"LM_HWF_LOGIN_HOOK_SUCCESS_FLASH"]]);function wn(){const{translator:e}=u.useContext(L.a),{dispatch:t,state:n}=u.useContext(o.a),{loginHook:a}=n,s=Object(K.a)("livemap.favorites.login_hook",e);u.useEffect(()=>{if(a.state===P.h.ERROR)return void r.a.track(bn(a.error,{type:fn.FLASH,subType:"LOGIN_HOOK",verb:"SHOWN",copy:s(".failure_error")}));const e=_n.get(a.state);null!=e&&r.a.track({event_name:e+"_SHOWN"})},[a]);const c=u.useCallback(()=>{if(a.state===P.h.ERROR)return void r.a.track(bn(a.error,{type:fn.FLASH,subType:"LOGIN_HOOK",verb:"CLICKED",copy:s(".failure_error"),action:vn.CLOSE}));const e=_n.get(a.state);null!=e&&r.a.track({event_name:e+"_CLICKED",action:"CLOSE"}),t(new i.fb({state:P.h.INITIAL}))},[a]);return a.state===P.h.INITIAL?null:a.state===P.h.LOGGING_IN?u.createElement(gn,{permanent:!0,onClose:c},u.createElement("i",{className:"wz-login-hook__pending-icon"}),u.createElement("span",null,Je("livemap.favorites.login_hook.login_retry",{onClick(){const n=_n.get(P.h.LOGGING_IN);null!=n&&r.a.track({event_name:n+"_CLICKED",action:"LOGIN"}),En(t,e.locale)}}))):a.state===P.h.NO_FAVORITES?u.createElement(gn,{permanent:!0,onClose:c},u.createElement("i",{className:"wz-login-hook__error-icon"}),s(".failure_no_favorites")):a.state===P.h.OK?u.createElement(gn,{type:"success",permanent:!0,onClose:c},u.createElement("i",{className:"wz-login-hook__success-icon"}),s(".success")):a.state===P.h.ERROR?u.createElement(gn,{permanent:!0,onClose:c},u.createElement("i",{className:"wz-login-hook__error-icon"}),u.createElement("span",null,Je("livemap.favorites.login_hook.failure_error",{onClick(){r.a.track(bn(a.error,{type:fn.FLASH,verb:"CLICKED",action:vn.TRY_AGAIN,subType:"LOGIN_HOOK",copy:s(".failure_error")})),function(e,t,n){hn(this,void 0,void 0,(function*(){null==n||-1===n.id?yield En(e,t):(e(new i.fb({state:P.h.LOGGING_IN})),G(e))}))}(t,e.locale,n.user)}}))):null}var On=n(36);n(609);const yn=({children:e,onDismiss:t})=>u.createElement("div",{className:"wz-dialog-wrapper wz-responsive-dialog"},u.createElement("div",{className:"wz-responsive-dialog__overlay",onClick:t}),u.createElement("div",{className:"wz-dialog sm"},e,u.createElement("button",{className:"dismiss-button",onClick:t},u.createElement("i",{className:"w-icon w-icon-x"})))),Cn=e=>{const{browser:t}=u.useContext(L.a),n=t.isMobile?"vertical":"horizontal-reverse",a=t.isMobile?"lg":"md",o=Object(Re.a)("livemap.feedback_form"),[i,s]=function(e,t){const n=u.useCallback(()=>{r.a.track({event_name:"LM_FEEDBACK_FORM_CLICKED",params:{ACTION:"ACCEPT"}}),e()},[]),a=u.useCallback(()=>{r.a.track({event_name:"LM_FEEDBACK_FORM_CLICKED",params:{ACTION:"DISMISS"}}),t()},[t]);return u.useEffect(()=>{r.a.track({event_name:"LM_FEEDBACK_FORM_SHOWN"})},[]),[n,a]}(u.useCallback(()=>{window.open(e.url),e.onAccept()},[e.url,e.onAccept]),e.onDismiss);return u.createElement(yn,{onDismiss:s},u.createElement(q.WzDialogHeader,null,o(".title")),u.createElement(q.WzDialogContent,null,o(".body")),u.createElement(q.WzDialogControls,{layout:n},u.createElement(q.WzButton,{size:a,onClick:i},o(".actions.accept")),u.createElement(q.WzButton,{size:a,color:"secondary",onClick:s},o(".actions.decline"))))};const Ln=({url:e,cooldownWeeks:t,graceDays:n})=>{const a=Date.now(),[r,o]=H("feedbackFormAcceptedAt"),[i,s]=H("feedbackFormDismissedAt"),[c]=H("firstVisitAt"),l=null==r,d=null==i||a>i+t*On.c,m=null!=c&&a>c+n*On.a;return l&&d&&m?u.createElement(Cn,{url:e,onAccept:o,onDismiss:s}):null},Nn=()=>{const{feedbackFormUrl:e,feedbackFormCooldown:t,feedbackFormGracePeriodDays:n}=d();return null!=e?u.createElement(Ln,{url:e,cooldownWeeks:t,graceDays:n}):null};var Sn=n(136);n(610);function kn({mobile:e,isPlannedDrive:t}){const{translator:n}=u.useContext(L.a),a=Object(K.a)("livemap.teaser",n);return u.createElement("div",{className:"wz-download-teaser"},u.createElement("i",{className:"wz-icon is-app-driver"}),u.createElement("div",{className:Z()("wz-download-teaser__description",{"is-mobile":e})},u.createElement("i",{className:"wz-download-teaser__logo"}),e?u.createElement(u.Fragment,null,u.createElement("div",{className:"wz-download-teaser__rating"},u.createElement("i",null)),u.createElement("div",{className:"wz-download-teaser__subtitle"},a(t?".pd_promo":".promo"))):u.createElement(u.Fragment,null,u.createElement("div",{className:"wz-download-teaser__subtitle"},n.translate("livemap.download_bar.tagline")),u.createElement("div",{className:"wz-download-teaser__rating is-desktop"},u.createElement("i",null),u.createElement("span",{className:"wz-download-teaser__reviews"},a(".reviews_desktop"))))))}n(611);function In({value:e,onPlayStoreLinkClick:t,onAppStoreLinkClick:n}){const{translator:a}=u.useContext(L.a),r=Object(K.a)("livemap.desktop_overlay",a),{isPlannedDrive:o,playStoreLink:i,appStoreLink:s}=e;return u.createElement(u.Fragment,null,u.createElement("h3",null,r(o?".pd_title":".title")),u.createElement("p",null,r(o?".pd_subtitle":".subtitle")),u.createElement(kn,{isPlannedDrive:o}),u.createElement("hr",null),u.createElement(ye.a,{href:i,className:"wz-download-button wz-download-button--android hidden-ios",onClick:t}),u.createElement(ye.a,{href:s,className:"wz-download-button wz-download-button--ios hidden-android",onClick:n}))}var Rn;n(612);function Tn({value:e,onContinueLinkClick:t,onDeeplinkClick:n,onPlayStoreLinkClick:a,onAppStoreLinkClick:r}){const{translator:o,browser:{isAndroid:i}}=u.useContext(L.a),s=Object(K.a)("livemap.mobile_overlay",o),{isPlannedDrive:c}=e;return u.createElement(u.Fragment,null,u.createElement(kn,{mobile:!0,isPlannedDrive:c}),u.createElement(q.WzButton,{color:"secondary",className:"is-wide",onClick:t},s(".continue_to_website")),u.createElement(q.WzButton,{color:"secondary",className:"is-wide hidden-ios",onClick:n},s(".open_app")),u.createElement(q.WzButton,{className:"is-wide hidden-ios",onClick:a},s(".title")),u.createElement(q.WzButton,{className:"is-wide hidden-android",onClick:r},s(i?".use_app":".open_app")))}function jn({onClose:e}){var t,n;const{Popup:a,browser:{isMobile:i}}=u.useContext(L.a),{state:s}=u.useContext(o.a),c=u.useMemo(()=>{var e;const t=null===(e=s.routing)||void 0===e?void 0:e.to;if(t)return we(t,be.OVERLAY)},[null===(t=s.routing)||void 0===t?void 0:t.to]),[l,d]=u.useState(!0),m=u.useMemo(()=>{var e,t,n;const a=!$t()&&document.referrer,r=null===(n=null===(t=null===(e=s.routing)||void 0===e?void 0:e.to)||void 0===t?void 0:t.venue)||void 0===n?void 0:n.id;return{IS_ADDRESS:ge.a.isLocation,IS_PLANNED_DRIVE:ge.a.isPlannedDrive,REFERRER:a,VENUE_ID:r}},[s.experience,null===(n=s.routing)||void 0===n?void 0:n.to]),p=u.useCallback(()=>{d(!1),r.a.track({event_name:"LM_DOWNLOAD_WAZE_OVERLAY_CLICKED",action:"BGC",params:m})},[]),f=u.useCallback(()=>{d(!1),r.a.track({event_name:"LM_DOWNLOAD_WAZE_OVERLAY_CLICKED",action:"CONTINUE_TO_WEBSITE",params:m})},[]),v=u.useCallback(()=>{r.a.track({event_name:"LM_DOWNLOAD_WAZE_OVERLAY_CLICKED",action:"ANROID_STORE",params:m})},[]),h=u.useCallback(()=>{r.a.track({event_name:"LM_DOWNLOAD_WAZE_OVERLAY_CLICKED",action:"IOS_STORE",params:m})},[]),E=u.useCallback(()=>{r.a.track({event_name:"LM_DOWNLOAD_WAZE_OVERLAY_CLICKED",action:"DEEPLINK",params:m})},[]);return u.useEffect(()=>{l&&r.a.track({event_name:"LM_DOWNLOAD_WAZE_OVERLAY_SHOWN",params:Object.assign(Object.assign({},m),{EXPERIENCE:s.experience,UTM_PARAMS:Object(Sn.b)(location.search)})})},[l]),u.useEffect(()=>{l||e()},[l,e]),u.createElement(a,{isOpen:!0,onOverlayClick:p},c&&u.createElement("div",{className:Z()("wz-popup",i?"is-mobile-overlay":"is-desktop-overlay",{"is-planned-drive":c.isPlannedDrive}),"data-nosnippet":!0},u.createElement("div",{className:"wz-popup-content"},i?u.createElement(Tn,{value:c,onContinueLinkClick:f,onPlayStoreLinkClick:v,onAppStoreLinkClick:h,onDeeplinkClick:E}):u.createElement(In,{value:c,onPlayStoreLinkClick:v,onAppStoreLinkClick:h}))))}function Dn(){const{state:e}=u.useContext(o.a);return u.createElement(F.c,{acknowledge:Object(De.t)("livemap.tour.close"),steps:e.tourSteps,storageKey:"livemapTour",onTooltipShown:An,onTooltipClosed:xn,zIndex:1001})}function An(e){r.a.track({event_name:"LM_DISC_TOOLTIP_SHOWN",type:e.id.toUpperCase()})}function xn(e){r.a.track({event_name:"LM_DISC_TOOLTIP_CLICKED",type:e.id.toUpperCase(),action:"CLOSE"})}function Pn(){const[e,t]=u.useState(Rn.UNKNOWN),n=function(){if(function(){const{state:e}=u.useContext(o.a);return u.useMemo(()=>{var t,n;return null!=(null===(t=e.routing)||void 0===t?void 0:t.to)&&-1===(null===(n=e.user)||void 0===n?void 0:n.id)&&ge.b.showOverlay},[e.user])}())return Rn.DOWNLOAD;return Rn.NONE}(),a=u.useCallback(()=>t(Rn.NONE),[]);return u.useEffect(()=>t(n),[n]),u.createElement(u.Fragment,null,e===Rn.DOWNLOAD&&u.createElement(jn,{onClose:a}),e===Rn.NONE&&u.createElement(Dn,null))}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.DOWNLOAD=1]="DOWNLOAD",e[e.NONE=2]="NONE"}(Rn||(Rn={}));var zn=n(140);function Mn(){return localStorage.getItem("livemapLocale")}function Un(e){null!=e?localStorage.setItem("livemapLocale",e):localStorage.removeItem("livemapLocale")}n(613);const Gn=()=>{const{translator:e}=u.useContext(L.a),{state:t,dispatch:n}=u.useContext(o.a),{isLanguageSelectorVisible:a,localeContext:s}=t,[c,l]=u.useState([De.defaultLocale]);return u.useEffect(()=>{const e=function(e,t){const n=new Set(zn());e&&n.add(e);const a=Mn();a&&n.add(a);const r=new Set([De.defaultLocale]);return n.forEach(e=>{const n=t.find(t=>t.locale===e||e.startsWith(t.locale+"-"));n&&r.add(n.locale)}),Array.from(r)}(s?s.currentLocale:null,s?s.locales:[]);l(e)},[]),a?B.createPortal(u.createElement("div",{className:"wz-language-selector-portal"},u.createElement(F.a,{title:e.translate("select_language"),preferred:c,onSelect:Un,onClose:()=>n(new i.i),webEvents:r.a})),document.body):null};function Hn(e){switch(e){case P.f.IL:return P.d.IL;case P.f.ROW:return P.d.ROW;default:return P.d.NA}}function Fn(){const e=u.useRef(),{translator:t}=u.useContext(L.a),n=Vn(e,t.locale),a=Object(u.useCallback)(()=>{r.a.track({event_name:"LM_MAP_TOOLS_CLICKED",action:"EDIT"}),r.a.track({event_name:"LM_GENERAL_EDIT_MAP_CLICKED",params:{source:"MAP_TOOLS"}})},[]);return u.createElement(F.b,{text:t.translate("wazemap.controls.editor.text"),placement:"left"},u.createElement("a",{className:"wz-control-button is-external",target:"_blank",rel:"noopener noreferrer",href:n,onClick:a},u.createElement("i",{className:"w-icon-pencil w-icon"})))}function Vn(e,t){const[n,a]=u.useState("");return Object(V.b)(n=>{if(!n)return;const r=()=>{const e=function(e){let t;try{t=e.getGeoEnv()}catch(e){t=P.f.NA}return t}(n),r=Object(h.h)({lang:t,latLng:n.getCenter(),zoom:Math.max(0,n.getZoom()-12),geoEnv:e,editorGeoEnv:Hn(e)}).toString();a(r)};return n.whenReady(()=>{e.current=n,r()}),n.addEventListener("moveend",r),()=>{n.removeEventListener("moveend",r)}}),n}var Wn=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};var Bn=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};let Kn;function $n(){return Bn(this,void 0,void 0,(function*(){return null==Kn&&(Kn=yield function(){return Bn(this,void 0,void 0,(function*(){const{latLng:e}=yield function(){return Wn(this,void 0,void 0,(function*(){return(yield Dt()("/web_api/request_info")).data}))}();if(null!=e)return function(e){const[t,n]=e.split(","),a=Number.parseFloat(t),r=Number.parseFloat(n);return{lat:a,lng:r}}(e)}))}()),Kn}))}function Yn(e){return{lat:e.latitude,lng:e.longitude}}var qn=n(30);function Xn(){const{browser:e}=u.useContext(L.a),[t,n]=u.useState(!0);return u.useEffect(()=>{const e=setTimeout(()=>n(!1),200);return()=>clearTimeout(e)}),e.isMobile||t?null:Object(B.createPortal)(u.createElement("div",{className:"wz-popup-overlay"}),document.body)}function Zn({error:e}){const{translator:t}=u.useContext(L.a),n=Object(K.a)("livemap.geolocation",t),a=u.useCallback(t=>{const a=t.target.closest("a");a&&t.currentTarget.contains(a)&&r.a.track({event_name:"LM_ERROR_MESSAGE_CLICKED",type:fn.FLASH,action:vn.LEARN_MORE,params:{SUBTYPE:"GEOLOCATION",ERROR_CODE:null==e?void 0:e.code,COPY:n(".error")}})},[]);return u.useEffect(()=>{r.a.track({event_name:"LM_ERROR_MESSAGE_SHOWN",type:fn.FLASH,params:{SUBTYPE:"GEOLOCATION",ERROR_CODE:null==e?void 0:e.code,COPY:n(".error")}})},[]),u.createElement(gn,{onClose:()=>{r.a.track({event_name:"LM_ERROR_MESSAGE_CLICKED",type:fn.FLASH,action:vn.CLOSE,params:{SUBTYPE:"GEOLOCATION",ERROR_CODE:null==e?void 0:e.code,COPY:n(".error")}})},CloseButton:e=>u.createElement("button",Object.assign({},e,{"data-event-type":"click","data-event-category":"livemap","data-event-action":"geolocation_request-failure-dismiss"}))},u.createElement("i",{className:"wz-icon is-incognito-location wz-hidden-mobile"}),u.createElement("div",{onClick:a,dangerouslySetInnerHTML:{__html:Qe("livemap.geolocation.error",{href:"https://support.google.com/chrome/answer/142065","data-event-type":"click","data-event-category":"livemap","data-event-action":"geolocation_request-failure-learn_more"})}}))}function Qn(e){switch(e.state){case P.g.UNAVAILABLE:case P.g.ERROR:return u.createElement("i",{className:"w-icon-recenter-off w-icon"});case P.g.PENDING:return u.createElement("span",{className:"wz-spinner"});default:return u.createElement("i",{className:"w-icon-recenter w-icon"})}}var Jn=n(89);function ea({latLng:e}){const t=new T.LabeledMarker(e,{iconType:Jn.MarkerIconType.CURRENT_LOCATION});return Object(V.b)(e=>(e.addLayer(t),()=>{e.removeLayer(t)}),[]),Object(u.useEffect)(()=>{t.setLatLng(e)},[e]),null}function ta(e){switch(e.state){case P.g.AVAILABLE:case P.g.OUTDATED:return A.a.translate("livemap.geolocation.tooltip.show_current");case P.g.UPDATED:return A.a.translate("livemap.geolocation.tooltip.showing_current");case P.g.UNAVAILABLE:case P.g.ERROR:return A.a.translate("livemap.geolocation.tooltip.unavailable");default:return""}}const na=Object(u.createContext)(navigator.geolocation),aa=(e,t)=>{const n=Date.now()-e;r.a.track({event_name:"LM_SERVER_REQUEST_RESULT",params:Object.assign({API:"GEOLOCATION",TIME:n,RESULT:t?"FAILURE":"SUCCESS"},t&&{REASON:t.message})})};function ra(e,t){const n=Object(u.useContext)(na);return Object(u.useCallback)(()=>{if(n){const a=Date.now();return null==n?void 0:n.getCurrentPosition(t=>{aa(a),e(t)},e=>{aa(a,e),t(e)},{timeout:1e4})}},[n,e,t])}function oa(){const{state:{geolocation:e},dispatch:t}=u.useContext(o.a),n=e=>t(new i.cb(e)),[a,s]=u.useState(!1),[c,l]=u.useState(null),d=ra(u.useCallback(({coords:e})=>{Object(qn.a)("geolocation_request-success"),n({state:P.g.UPDATED,latLng:Yn(e)}),s(!0)},[]),u.useCallback(e=>{Object(qn.a)("geolocation_request-failure"),l(e),n({state:P.g.ERROR})},[])),m=u.useCallback(()=>{d&&e.state!==P.g.PENDING&&(n({state:P.g.PENDING}),l(null),d())},[]);u.useEffect(()=>{d||n({state:P.g.UNAVAILABLE}),r.a.track({event_name:"LM_CURL_SHOWN"})},[]),Object(V.b)(t=>{function a(){e.state===P.g.UPDATED&&n({state:P.g.OUTDATED,latLng:e.latLng})}return e.state===P.g.UPDATED&&t.panTo(e.latLng).once("moveend",()=>{t.on("moveend",a)}),()=>{t.off("moveend",a)}},[e]);const p=u.createElement("button",{className:"wz-control-button is-"+e.state,disabled:!d,onClick:m,"data-event-type":"click","data-event-category":"livemap","data-event-action":"geolocation_request","data-we":"click","data-we-event_name":"LM_CURL_CLICKED"},u.createElement(Qn,{state:e.state}));return e.state===P.g.PENDING?u.createElement(u.Fragment,null,p,u.createElement(Xn,null)):u.createElement(F.b,{text:ta({state:e.state}),placement:"left"},p,e.state===P.g.ERROR&&u.createElement(Zn,{error:c}),"latLng"in e&&a&&u.createElement(ea,{latLng:e.latLng}))}var ia=n(299);function sa({children:e}){const t=u.useMemo(()=>new ia.ContainerControl,[]);return Object(V.b)(e=>(e.addControl(t),()=>{e.removeControl(t)})),Object(B.createPortal)(e,t.getContainer())}n(614);var ca=n(141);function la(){const[e,t]=u.useState(0);Object(V.b)(u.useCallback(e=>{t(e.getZoom())},[t])),Object(V.c)("zoomend",u.useCallback(n=>{const a=n.getZoom();!function(e,t,n){r.a.track({event_name:"LM_ZOOM",type:e,params:{OLD_LEVEL:t,NEW_LEVEL:n}})}(a>e?"IN":"OUT",e,a),t(a)},[e]))}function ua(e,t){r.a.track({event_name:"LM_MAP_TOOLS_CLICKED",action:t,params:{zoom:e.getZoom()}})}function da(){const{browser:e}=u.useContext(L.a);return u.useEffect(()=>{r.a.track({event_name:"LM_MAP_TOOLS_SHOWN"})},[]),la(),Object(V.b)(Object(ca.a)(ua),[]),e.isMobile?u.createElement("div",{className:"wz-mobile-controls"},u.createElement(oa,null)):u.createElement(u.Fragment,null,u.createElement(sa,null,u.createElement(oa,null)),u.createElement(sa,null,u.createElement(Fn,null)))}n(615);const ma=()=>u.createElement("div",{id:"map-viewport",className:"wz-map-viewport-mobile"}),pa=new Set;function fa(e){const t=e.getLatLng().toString(),n=e.getElement();var a;null==(a=n)||"none"===window.getComputedStyle(a).display||pa.has(t)||(r.a.track({event_name:"LM_MARKER_SHOWN",params:va(e)}),pa.add(t)),e.on("click",()=>{r.a.track({event_name:"LM_MARKER_CLICKED",params:va(e)}),Object(qn.a)("livemap.marker.clicked")})}function va(e){const t=e.getElement();return{TYPE:e.constructor.name,ICON:(n=t,n&&(null===(a=window.getComputedStyle(n).backgroundImage.match(ha))||void 0===a?void 0:a[0])),SIZE:Ea(t)};var n,a}const ha=/[\w-]+(?=(@2x)?-\w+\.\w+)/;function Ea(e){const t=null==e?void 0:e.getBoundingClientRect();return t&&JSON.stringify([t.width,t.height])}const ba=()=>{const e=Object(u.useCallback)(({layer:e})=>{e instanceof ne.Marker&&fa(e)},[]);return Object(V.b)(t=>(t.on("layeradd",e),()=>{t.off("layeradd",e)}),[]),null};function ga(){const{translator:e}=u.useContext(L.a);return u.useEffect(()=>{r.a.track({event_name:"LM_ERROR_MESSAGE_SHOWN",type:fn.FLASH,params:{SUBTYPE:"NOT_FOUND",ERROR_CODE:"GENERAL_ERROR",COPY:e.translate("livemap.not_found")}})},[]),u.createElement(gn,{permanent:!0,onClose:()=>{r.a.track({event_name:"LM_ERROR_MESSAGE_SHOWN",type:fn.FLASH,action:vn.CLOSE,params:{SUBTYPE:"NOT_FOUND",ERROR_CODE:"GENERAL_ERROR",COPY:e.translate("livemap.not_found")}})}},u.createElement("i",{className:"wz-icon is-not-found wz-hidden-mobile"}),u.createElement("div",null,e.translate("livemap.not_found")))}var _a=n(126);function wa(e){const t={};e instanceof _a.AlertClusterPopup&&(t.TYPE="ALERT_CLUSTER",function(e){let t=0;e.on("alertClusterPopup:groupChange",()=>{r.a.track({event_name:"LM_ALERT_CLUSTER_POPUP_GROUP_CHANGED",params:{COUNT:++t}})})}(e)),r.a.track({event_name:"LM_MAP_POPUP_SHOWN",params:t})}const Oa=()=>(Object(V.b)(e=>{const t=({popup:e})=>wa(e);return e.on("popupopen",t),()=>{e.off("popupopen",t)}},[]),null);n(616);function ya(){return u.createElement("div",{id:"search-suggestions",className:"wz-search-suggestions"})}function Ca(e){return function(e,t){const n=t.getUTCMonth();return e.lat>35&&La.has(n)||e.lat<-35&&Na.has(n)}(W(),e)}const La=new Set([11,0,1]),Na=new Set([5,6,7]);function Sa(){return u.createElement("i",{className:Z()("wz-icon",Ca(new Date)?"is-snowplow":"is-garbage-truck")})}const ka="UTILITY_VEHICLES",Ia=u.memo(({onChange:e,defaultChecked:t})=>{const n=Object(Re.a)("sidebar"),[a,o]=u.useState(t),i=u.useCallback(t=>{const n=t.target.checked;r.a.track({event_name:"LM_SIDEBAR_TOGGLE_CLICKED",params:{TYPE:ka,VALUE:n}}),Object(qn.a)("sidebar-toggle-utility-vehicles-"+(n?"on":"off")),e(n),o(n)},[e]);return u.useEffect(()=>{r.a.track({event_name:"LM_SIDEBAR_TOGGLE_SHOWN",params:{TYPE:ka,VALUE:t}})},[]),u.createElement("li",null,u.createElement(q.WzToggleSwitch,{reversed:!0,checked:a,onChange:i},u.createElement("span",{className:"wz-sidebar-toggle-label","data-e2e":"sidebar-toggle-utility-vehicles-"+(a?"off":"on")},u.createElement(Sa,null),u.createElement("span",{className:"wz-sidebar-button-label"},n(".show_utility_vehicles")))))}),Ra=u.memo(({onChange:e,defaultChecked:t})=>{const n=Object(Re.a)("sidebar"),[a,o]=u.useState(t),i=u.useCallback(t=>{const n=t.target.checked;r.a.track({event_name:"LM_SIDEBAR_TOGGLE_CLICKED",params:{TYPE:"REPORTS",VALUE:n}}),Object(qn.a)("sidebar-toggle-reports-layer-"+(n?"on":"off")),e(n),o(n)},[e]);return u.useEffect(()=>{r.a.track({event_name:"LM_SIDEBAR_TOGGLE_SHOWN",params:{TYPE:"REPORTS",VALUE:t}})},[]),u.createElement("li",null,u.createElement(q.WzToggleSwitch,{reversed:!0,checked:a,onChange:i},u.createElement("span",{className:"wz-sidebar-toggle-label","data-e2e":"sidebar-toggle-reports-layer-"+(a?"off":"on")},u.createElement("i",{className:"wz-icon is-icon-reports"}),u.createElement("span",{className:"wz-sidebar-button-label"},n(".show_reports")))))}),Ta=u.memo(({onChange:e,defaultChecked:t})=>{const n=Object(Re.a)("sidebar"),[a,o]=u.useState(t),i=u.useCallback(t=>{const n=t.target.checked;r.a.track({event_name:"LM_SIDEBAR_TOGGLE_CLICKED",params:{TYPE:"TRAFFIC_JAMS",VALUE:n}}),Object(qn.a)("sidebar-toggle-traffic-layer-"+(n?"on":"off")),e(n),o(n)},[e]);return u.useEffect(()=>{r.a.track({event_name:"LM_SIDEBAR_TOGGLE_SHOWN",params:{TYPE:"TRAFFIC_JAMS",VALUE:t}})},[]),u.createElement("li",null,u.createElement(q.WzToggleSwitch,{reversed:!0,checked:a,onChange:i},u.createElement("span",{className:"wz-sidebar-toggle-label","data-e2e":"sidebar-toggle-traffic-layer-"+(a?"off":"on")},u.createElement("i",{className:"wz-icon is-icon-traffic"}),u.createElement("span",{className:"wz-sidebar-button-label"},n(".show_traffic_jams")))))}),ja=u.memo(({onChange:e,defaultChecked:t})=>{const n=Object(Re.a)("sidebar"),[a,o]=u.useState(t),i=u.useCallback(t=>{const n=t.target.checked;r.a.track({event_name:"LM_SIDEBAR_TOGGLE_CLICKED",params:{TYPE:"WAZERS",VALUE:n}}),Object(qn.a)("sidebar-toggle-wazers-layer-"+(n?"on":"off")),e(n),o(n)},[e]);return u.useEffect(()=>{r.a.track({event_name:"LM_SIDEBAR_TOGGLE_SHOWN",params:{TYPE:"WAZERS",VALUE:t}})},[]),u.createElement("li",null,u.createElement(q.WzToggleSwitch,{reversed:!0,checked:a,onChange:i},u.createElement("span",{className:"wz-sidebar-toggle-label","data-e2e":"sidebar-toggle-wazers-layer-"+(a?"off":"on")},u.createElement("i",{className:"wz-icon is-icon-wazers"}),u.createElement("span",{className:"wz-sidebar-button-label"},n(".show_other_wazers")))))});function Da(){const e=ke(),t=u.useCallback(t=>e.toggleAlertsLayer(t),[]),n=u.useCallback(t=>e.toggleJamsLayer(t),[]),a=u.useCallback(t=>e.toggleUserLayer(t),[]),r=u.useCallback(t=>e.toggleTrucksLayer(t),[]);return u.createElement("ul",null,u.createElement(Ta,{defaultChecked:e.options.jamsEnabled,onChange:n}),u.createElement(Ra,{defaultChecked:e.options.alertsEnabled,onChange:t}),u.createElement(ja,{defaultChecked:e.options.usersEnabled,onChange:a}),u.createElement(Ia,{defaultChecked:e.options.trucksEnabled,onChange:r}))}var Aa=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function xa({translator:e,closeSidebar:t}){const n=Object(K.a)("sidebar",e),a=location.origin+"/partners",{dispatch:r}=u.useContext(o.a);return u.createElement("ul",{className:"sidebar-footer"},u.createElement("li",null,u.createElement("a",{href:m.a.cmsHomeLink,target:"_blank",className:"wz-sidebar-button",rel:"noopener noreferrer","data-event-type":"click","data-event-category":"livemap","data-event-action":"sidebar-click-home-link"},u.createElement("i",{className:"w-icon-info w-icon"}),u.createElement("label",{className:"wz-sidebar-button-label"},n(".about")))),u.createElement("li",null,u.createElement("a",{href:a,target:"_blank",className:"wz-sidebar-button",rel:"noopener noreferrer","data-event-type":"click","data-event-category":"livemap","data-event-action":"sidebar-click-partners-link"},u.createElement("i",{className:"w-icon-partners w-icon"}),u.createElement("label",{className:"wz-sidebar-button-label"},n(".partners")))),u.createElement("li",null,u.createElement("a",{className:"wz-sidebar-button",onClick:()=>Aa(this,void 0,void 0,(function*(){yield t(),r(new i.s)})),"data-event-type":"click","data-event-category":"livemap","data-event-action":"sidebar-open-language-switcher-popup"},u.createElement("i",{className:"w-icon-translate w-icon"}),u.createElement("label",{className:"wz-sidebar-button-label"},e.translate("select_language")))),u.createElement("li",null,u.createElement("a",{href:m.a.support,target:"_blank",rel:"noopener noreferrer",className:"wz-sidebar-button","data-event-type":"click","data-event-category":"livemap","data-event-action":"sidebar-click-support-link"},u.createElement("i",{className:"w-icon-help w-icon"}),u.createElement("label",{className:"wz-sidebar-button-label"},n(".support")))))}n(617);var Pa=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function za({isOpen:e=!1}){const t=document.body,n=u.useRef(null),a=u.useRef(),{state:r,dispatch:s}=u.useContext(o.a),{translator:c}=u.useContext(L.a),l=Object(K.a)("sidebar",c),d=Vn(a,c.locale),m=u.useCallback(()=>{var e;const t=a.current;t&&(Object(qn.a)("sidebar-open-share-and-embed-popup"),_t.show(t.getCenter(),t.getZoom(),null===(e=r.routing)||void 0===e?void 0:e.to))},[a]);u.useEffect(()=>{p(e)});const p=(e=!0)=>Promise.race([new Promise(e=>{setTimeout(e,200)}),new Promise(t=>{const a=n.current;if(!a)return t();const r=()=>{a.removeEventListener("transitionend",r),t()};a.addEventListener("transitionend",r),a.classList.toggle("wz-sidebar-open",e)})]),f=()=>Pa(this,void 0,void 0,(function*(){yield p(!1),function(e){e(new i.j)}(s),Object(qn.a)("close-sidebar")}));return Object(B.createPortal)(u.createElement("div",{className:"wz-popup-overlay wz-sidebar-overlay",onClick:()=>{f()},ref:n,style:{display:e?"flex":"none"},"data-nosnippet":!0},u.createElement("div",{className:"wz-sidebar",onClick:e=>{e.stopPropagation()}},u.createElement("div",{className:"wz-sidebar-header"},u.createElement("div",{className:"wz-logo"}),u.createElement("button",{type:"button",className:"wz-icon is-chevron-double-left",onClick:()=>{f()}})),u.createElement(Da,null),u.createElement("ul",null,u.createElement("li",null,u.createElement("a",{className:"wz-sidebar-button",onClick:()=>Pa(this,void 0,void 0,(function*(){yield f(),m()}))},u.createElement("i",{className:"w-icon-code w-icon"}),u.createElement("label",{className:"wz-sidebar-button-label"},l(".share_and_embed")))),u.createElement("li",null,u.createElement("a",{href:d,className:"wz-sidebar-button",target:"_blank",rel:"noopener noreferrer","data-event-type":"click","data-event-category":"livemap","data-event-action":"sidebar-click-editor-link","data-we":"click","data-we-event_name":"LM_GENERAL_EDIT_MAP_CLICKED","data-we-param-source":"MENU"},u.createElement("i",{className:"w-icon-pencil w-icon"}),u.createElement("label",{className:"wz-sidebar-button-label"},l(".edit_map"))))),u.createElement(xa,{translator:c,closeSidebar:f}))),t)}var Ma=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function Ua(e,t,n){return Ma(this,void 0,void 0,(function*(){return(yield Dt.a.get("/live-map/api/venues/reviews/"+e,{params:{language_code:n,amount:t}})).data.reviews}))}var Ga=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function Ha(e,t={}){var n,a,r;return Ga(this,void 0,void 0,(function*(){const{locale:o="en"}=t;if(e.name){const i=yield function(e,t={}){return Ga(this,void 0,void 0,(function*(){const{locale:n="en"}=t,a=`https://${n}.wikipedia.org/w/api.php`;try{const t=yield Dt.a.get(a,{params:{format:"json",action:"query",prop:"extracts|pageprops",exintro:"",explaintext:"",exchars:150,redirects:1,titles:e.join("|"),origin:"*"}});for(const e in t.data.query.pages)if({}.hasOwnProperty.call(t.data.query.pages,e)){const n=t.data.query.pages[e];if(n.extract)return{success:!0,pageExtract:n}}return{success:!1}}catch(e){return{success:!1}}}))}(Object(x.compact)([e.name,e.alternativeName||void 0]),t);if(i.success&&i.pageExtract&&null==(null===(n=i.pageExtract.pageprops)||void 0===n?void 0:n.disambiguation))return{wikiExtract:Fa(null===(a=i.pageExtract)||void 0===a?void 0:a.extract,150),wikiLink:`https://${o}.wikipedia.org/wiki/${null===(r=i.pageExtract)||void 0===r?void 0:r.title}`}}return{}}))}function Fa(e,t){if(t&&t<=0)throw new Error("Wikipedia extract max length should be positive");if(!t||e.length<=t)return e;let n=e.substr(0,t);return n=n.substr(0,Math.min(n.length,n.lastIndexOf(" "))),n+"…"}function Va(){var e,t,n,a;const r=d(),s=r.wikipediaExtract,c=r.googleReviewSource,{state:{routing:l={},localeContext:m,enrichment:p={}},dispatch:f}=u.useContext(o.a);return u.useEffect(()=>{var e;if(!ge.a.enrichVenues&&!s)return;const t=null===(e=null==l?void 0:l.to)||void 0===e?void 0:e.venue;t&&Ha(t,{locale:null==m?void 0:m.currentLocale}).then(e=>{e.wikiExtract&&f(new i.mb(e))})},[null===(e=null==l?void 0:l.to)||void 0===e?void 0:e.venue]),u.useEffect(()=>{var e;if(!ge.a.enrichVenues&&!s)return;const t=null===(e=null==l?void 0:l.from)||void 0===e?void 0:e.venue;t&&Ha(t,{locale:null==m?void 0:m.currentLocale}).then(e=>{e.wikiExtract&&f(new i.bb(e))})},[null===(t=null==l?void 0:l.from)||void 0===t?void 0:t.venue]),u.useEffect(()=>{var e,t;if(!ge.a.useGeoReviews&&"georeviews"!==c)return;const n=null===(e=null==l?void 0:l.from)||void 0===e?void 0:e.venue,a=null==p?void 0:p.from;(null==n?void 0:n.googlePlaceId)&&!(null==a?void 0:a.reviews)&&(f(new i.ab([])),Ua(n.googlePlaceId,50,null!==(t=null==m?void 0:m.currentLocale)&&void 0!==t?t:"en").then(e=>{f(new i.ab(e))}))},[null===(n=null==l?void 0:l.from)||void 0===n?void 0:n.venue]),u.useEffect(()=>{var e,t;if(!ge.a.useGeoReviews&&"georeviews"!==c)return;const n=null===(e=null==l?void 0:l.to)||void 0===e?void 0:e.venue,a=null==p?void 0:p.to;(null==n?void 0:n.googlePlaceId)&&!(null==a?void 0:a.reviews)&&(f(new i.lb([])),Ua(n.googlePlaceId,50,null!==(t=null==m?void 0:m.currentLocale)&&void 0!==t?t:"en").then(e=>{f(new i.lb(e))}))},[null===(a=null==l?void 0:l.to)||void 0===a?void 0:a.venue]),u.createElement(u.Fragment,null)}var Wa=n(81),Ba=n(70);function Ka(e,t){const{time:n,at:a}=e;if(n){if("now"===n)return;const e=Number.parseInt(n,10);if(!Number.isNaN(e))return e;console.warn('"time" param is not a valid timestamp, skipping')}if(a){if(a.match(/^\d{2}:\d{2}$/))return function(e,t=new Date){const[n,a]=e.split(":"),r=Number.parseInt(n,10),o=Number.parseInt(a,10);let i=new Date(t).setHours(r,o,0,0);return i<t.getTime()&&(i+=864e5),i}(a,t);console.warn('"at" param does not match HH:mm format, skipping')}}var $a=n(84),Ya=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const qa=()=>Ya(void 0,void 0,void 0,(function*(){const e=yield Xa(location.search),t=null==e?void 0:e.to;if(t)return new ne.LatLng(t.latLng.lat,t.latLng.lng)}));function Xa(e,t=new Date){return Ya(this,void 0,void 0,(function*(){const n=new URLSearchParams(e),[a,r]=yield Promise.all([Za(n,"from"),Za(n,"to")]);if(null==a&&null==r)return;const o=Ka(Object(dt.parse)(e),t);return{from:a,to:r,at:o,reverse:!!o}}))}function Za(e,t){return Ya(this,void 0,void 0,(function*(){const{placeId:n,latLng:a}=Object(_e.a)(e,t);let r;return n&&(r=yield function(e){return Ya(this,void 0,void 0,(function*(){try{const t=yield Object(Wa.a)(e,{locale:A.a.locale});if(!t)return;const n=t.address&&(yield Object(Ba.a)(t.address));return Object($a.a)(t,null!=n?n:[],A.a)}catch(e){console.error(e)}}))}(n)),a&&(r=yield Object(Be.a)(a)),r&&(r.type=E.a.REFRESH),r}))}n(625);const Qa=u.forwardRef((e,t)=>{const{translator:n,Popup:a}=u.useContext(L.a),{dispatch:r}=u.useContext(o.a),[s,c]=u.useState(e.isOpen),l=u.useCallback(()=>{c(!0)},[s]),d=u.useCallback(()=>{c(!1),r(new i.ub)},[s]);u.useImperativeHandle(t,()=>({show:l,hide:d}),[]);const m=Object(K.a)("livemap.error_popup",n);return u.createElement(a,{isOpen:s,onOverlayClick:d},u.createElement("div",{className:Z()("wz-popup","wz-error-popup")},u.createElement("div",{className:"wz-popup-content"},u.createElement("button",{className:"wz-popup-close",onClick:d},u.createElement("i",{className:"w-icon-x w-icon"})),u.createElement("div",{className:"wz-error-popup__icon"}),u.createElement("div",{className:"wz-error-popup__title"},m(".message")),u.createElement(q.WzButton,{onClick:d},m(".close")))))});function Ja(){const e=new URLSearchParams(window.location.search);return e.delete("token"),e.delete("env"),"/live-map?"+e.toString()}function er(e){const{shareDrive:t,onAddressClick:n}=e,{calculatedLocation:a,ownerFirstName:r,endDate:o,eta:i}=t;if(!a||!i)throw new Error("Missing shareDrive card details!");const{name:s,street:c,venueId:l,latitude:d,longitude:m}=a,{translator:p}=u.useContext(L.a),f=o?Rt(o):"",v=p.translate("livemap.meeting.default_name"),h=r?Tt(r):v,b=zt(t),g=Math.floor(i/60),{type:_}=l?Object(E.b)(l):{type:null},w=!!l&&_!==E.a.WAZE_STREET_ID,O=s||c||`${d}, ${m}`;return u.createElement("div",{className:"wz-share-drive-card__content"},u.createElement("div",{className:"wz-share-drive-card__text"},u.createElement("span",{className:"wz-share-drive-poi-card__text-name"},h," "),p.translate("livemap.meeting.user_driving_to")),u.createElement("a",{className:Z()("wz-share-drive-card__address",{"is-venue":w,"is-not-venue":!w}),onClick:n},u.createElement("span",{className:"wz-share-drive-card__address-street wz-strong"},O,b?",":""),b),g<=1?u.createElement("div",{className:"wz-share-drive-card__arrival"},u.createElement("div",{className:"wz-share-drive-card__arrival-now wz-strong"},p.translate("livemap.meeting.arriving_now"))):u.createElement("div",{className:"wz-share-drive-card__arrival"},u.createElement("div",{className:"wz-share-drive-card__arrival-text"},p.translate("livemap.meeting.arriving")),u.createElement("div",{className:"wz-share-drive-card__arrival-time"},f)))}const tr=[{single:"last_year",many:"years_ago",div:1},{single:"last_month",many:"months_ago",div:12},{single:"last_week",many:"weeks_ago",div:4},{single:"yesterday",many:"days_ago",div:7},{single:"hour",many:"hours_ago",div:24},{single:"less_than_minute",many:"minutes_ago",div:60},{single:"now",many:"less_than_minute",div:10}];function nr(e){const t=e.getTime(),n=Date.now();if(t>n)return ar("future");for(let e=0,a=tr.length,r=n-t,o=290304e5;e<a;++e){const t=tr[e],n=Math.floor(r/(o/=t.div));if(n>=1)return 1===n?ar(t.single):ar(t.many,{many:n})}return ar(tr.slice(-1)[0].single)}function ar(e,t={}){return A.a.translate("livemap.time_ago."+e,t)}class rr extends u.Component{constructor(e){super(e),this.calc=this.calc.bind(this),this.state={date:this.props.date,timeAgo:nr(this.props.date)}}componentDidMount(){this.calcInterval=window.setInterval(this.calc,rr.UPDATE_ROUND_MS),this.unsubscribe=this.props.store.subscribe(this.handleStoreChange.bind(this))}componentWillUnmount(){window.clearInterval(this.calcInterval),this.unsubscribe&&this.unsubscribe()}render(){return u.createElement("span",null,this.state.timeAgo)}handleStoreChange(e){const{shareDrive:t}=e;if(!t||!t.routeTimestamp)return;const n=Math.max(t.lngLatTimestamp||0,t.routeTimestamp),a=new Date(n);this.setState({date:a,timeAgo:nr(a)})}calc(){this.setState({timeAgo:nr(this.state.date)})}}rr.UPDATE_ROUND_MS=3e4;n(626);class or extends u.Component{constructor(e){super(e);const{shareDrive:t}=this.props.store.getState();this.state={lastUpdatedTimestamp:this.extractTimestamp(t)}}