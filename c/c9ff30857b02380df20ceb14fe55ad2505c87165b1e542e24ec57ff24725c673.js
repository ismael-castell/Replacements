function videoInit(m){var g,y,e,v,_,b,T;"video"==m.get(0).nodeName.toLowerCase()&&(g={307200:["LOW",180],768e3:["SD",360],1536e3:["HD",540],180:"LOW",360:"SD",540:"HD"},y={"big-play-button":["play_invert_big","play_small"],"play-control":["play_small","pause_small","repeat_small"],"mute-control":["sound","mute"],"fullscreen-control":["fullscreen","fullscreen_exit"],"close-button":["close"],share:["share"],"share-embed-control":["code"]},e="https://nfw.ria.ru/flv/mediacontent.aspx?id="+m.data("import-id")+"&type=MBR_SMIL&mediaType=json&protocol=http&nolog=1",v="https://nfw.ria.ru/flv/file.aspx?ID="+m.data("import-id")+"&type=atl",b=(_=m).get(0),(T=_.parents(".video-player")).find(".video_info"),nextVideoTimer=null,$.getJSON(e,function(e){var a,s,t,o,l,i,c,n,r,u,d,h,p,f;_.hasClass("video-js")&&(s=!(a=[]),t="dvr"==e.smil.head.meta["@svc"],o=e.smil.head.meta["@base"],e=e.smil.body.switch.video,l="",void 0===e[0]&&(e=[e]),$.each(e,function(e,t){var i=o+t["@src"],n="video/mp4",r=o.split("$(ReplaceMe)");r[1]&&(s=!0,i=r[0].replace("http://hls.rian","https://hls-rian")+t["@src"]+r[1],o=i.substr(0,i.lastIndexOf("/")+1),l=t["@src"],a.push({src:i,type:n="application/x-mpegURL",label:"AUTO",res:"auto"})),s||a.push({src:i,type:n,label:g[t["@system-bitrate"]][0],res:g[t["@system-bitrate"]][1]})}),i=videojs(b,{controls:!0,inactivityTimeout:1e3,controlBar:{volumePanel:{inline:!1}},plugins:{videoJsResolutionSwitcher:{default:s?"auto":localStorage.getItem("videoQuality")||360,dynamicLabel:!0}},html5:{hls:{overrideNative:!videojs.browser.IS_ANY_SAFARI}}},function(){"function"==typeof html5videoCountersFunction&&html5videoCountersFunction($(i).attr("id")),$.each(y,function(e){var i="";$.each(y[e],function(e,t){i+=ria.getIcon("icon-"+t)}),T.find(".vjs-"+e+" > .vjs-icon-placeholder").append(i)}),i.on("loadedmetadata",function(){}),T.find(".vjs-current-time, .vjs-time-divider, .vjs-duration").wrapAll('<div class="vjs-time-control-wrap"></div>');var e=a.length;i.updateSrc(a),e<2&&T.find(".vjs-resolution-button").addClass("vjs-resolution-button-hidden"),s&&(i.one("play",function(){e<2&&(i.updateSrc(a),a.length<2&&T.find(".vjs-resolution-button").addClass("vjs-resolution-button-hidden"),i.play())}),liveStat(i,l),liveViews(T)),t&&i.dvrseekbar(),i.volume(localStorage.getItem("videoVolume")||1),"true"==localStorage.getItem("videoMuted")&&i.muted(!0),i.on("resolutionchange",function(){localStorage.setItem("videoQuality",i.currentResolution().sources[0].res)}),i.on("volumechange",function(){localStorage.setItem("videoVolume",i.volume()),localStorage.setItem("videoMuted",i.muted())}),videoPlayerSize(T),i.on("fullscreenchange",function(){videoPlayerSize(T)}),i.on("dispose",function(){clearTimeout(nextVideoTimer)})}),c=i,e=videojs.getComponent("Component"),n=videojs.getComponent("ModalDialog"),r=videojs.getComponent("Button"),videojs.registerComponent("gradientsComponent",videojs.extend(e)),(u=c.addChild("gradientsComponent")).addClass("vjs-gradients"),c.el().insertBefore(u.el(),c.getChild("textTrackDisplay").el()),u=videojs.extend(e,{createEl:function(){return videojs.dom.createEl("div",{className:"vjs-toppane",innerHTML:'<div class="vjs-toppane-info"><div class="vjs-toppane-title">'+_.data("title").replace(/\\"/g,'"')+"</div>"+(0<_.data("length")?'<div class="vjs-toppane-time">'+timeFormat(_.data("length"))+"</div>":"")+'</div><div class="vjs-toppane-share-more">'+ria.getIcon("icon-share")+"</div>"})}}),videojs.registerComponent("topPane",u),c.addChild("topPane"),(d=new n(c,{temporary:!1})).addClass("vjs-modal-endcard"),c.addChild(d),c.on("ended",function(){var l,u;l=c,(u=d).opened()||videojs.xhr({body:{},uri:"/services/video/recommend/",json:!0},function(e,t,i){var n=document.createElement("div"),r=(videojs.addClass(n,"vjs-modal-endcard-list"),'<div class="vjs-modal-endcard-replay"><span class="vjs-modal-endcard-replay-icon">'+ria.getIcon("icon-repeat_small")+'</span><span class="vjs-modal-endcard-replay-text">смотреть еще раз</span></div>'),a="",s=($.each(i.videos,function(e,t){a+='<a href="'+t.url+'" target="_top" style="background-image: url('+t.img+')"><span class="vjs-modal-endcard-list-title">'+t.title+'</span><span class="vjs-modal-endcard-list-button">'+ria.getIcon("icon-play_small")+"</span>",0==e&&(a+='<span class="vjs-modal-endcard-list-timer"><span></span></span><span class="vjs-modal-endcard-list-cancel"></span>'),a+="</a>"}),n.innerHTML=a+r,$(n).find(".vjs-modal-endcard-list-timer")),r=$(n).find(".vjs-modal-endcard-list-cancel"),o=$(n).find(".vjs-modal-endcard-list-button:eq(0)");r.on("click",function(e){s.hasClass("paused")||(e.preventDefault(),clearTimeout(nextVideoTimer),s.addClass("paused"),o.addClass("paused"))}),$(n).find(".vjs-modal-endcard-replay").on("click",function(){l.play()}),u.content(n),u.open(),!$(".videoplayer-embed").length&&m.data("next-autoplay")&&(clearTimeout(nextVideoTimer),nextVideoTimer=setTimeout(function(){location.href=i.videos[0].url},7e3))}),videoCounter(_.data("media-id"),0,c.currentTime())}),c.on("loadedmetadata",function(){var l;s||((l=new Image).addEventListener("load",function(){for(var e=l.naturalWidth/10,t=l.naturalHeight/10,i=c.duration()/100,n={},r=0,a=0;a<10;a++)for(var s=0;s<10;s++){var o=Math.round(i*r*100)/100;n[o]={},0==r&&(n[o].src=v,n[o].width=e),n[o].style={},n[o].style.left=-e/2-e*s+"px",n[o].style.top=-t*(a+1)-13+"px",n[o].style.clip="rect("+t*a+"px, "+e*(s+1)+"px, "+t*(a+1)+"px, "+e*s+"px)",r++}c.thumbnails(n)},!1),l.src=v)}),c.on("play",function(){d.close(),clearTimeout(nextVideoTimer),$(".vjs-modal-endcard-list-timer, .vjs-modal-endcard-list-button").removeClass("paused"),videoCounter(_.data("media-id"),1,c.currentTime())}),c.on("pause",function(){videoCounter(_.data("media-id"),3,c.currentTime())}),h=!1,c.on("timeupdate",function(){var e=parseInt(c.currentTime()),t=e%30==0&&0!=e;t&&h!=t&&videoCounter(_.data("media-id"),2,e),h=t}),c.on("abort",function(){c.tech_.hls||setTimeout(function(){c.play()},100)}),c.on("error",function(){c.tech_.hls&&3==c.error().code?setTimeout(function(){c.updateSrc(a),a.length<2&&T.find(".vjs-resolution-button").addClass("vjs-resolution-button-hidden"),c.play()},2e3):setTimeout(function(){c.updateSrc(a)},2e3)}),(p=new n(c,{temporary:!1})).addClass("vjs-modal-share"),p.content($('<div class="video-share"><ul></ul><div class="video-share__buttons"><a href="" class="video-share__button video-share__download" download="video" target="_blank"><span>Скачать</span><span>Скачать видео</span></a><a href="" class="video-share__button video-share__link"><span>Ссылка</span><span>Скопировать ссылку</span></a><a href="" class="video-share__button video-share__embed-code"><span>Получить код</span></a></div><div class="video-share__copypaste"></div></div>').get(0)),c.addChild(p),p.on("modalclose",function(){T.find(".video-share__copypaste").removeClass("m-active")}),f='<iframe width="640" height="360" src="https://ria.ru/services/video/embed/'+_.data("media-id")+"-"+_.data("articleid")+'.html" frameborder="0" allowfullscreen=""></iframe>',T.on("click",".vjs-toppane-share-more",function(){p.open(),T.find(".vjs-modal-share .vjs-modal-dialog-content ul > li").length||(riaShare.initFullList(".vjs-modal-share .vjs-modal-dialog-content > div"),T.find(".video-share__buttons").on("click",".video-share__download",function(e){var t=_.attr("src");$(this).attr("href",t)}).on("click",".video-share__link",function(e){e.preventDefault(),T.find(".video-share__copypaste").addClass("m-active").text(_.data("url")),selectText(T.find(".video-share__copypaste"))}).on("click",".video-share__embed-code",function(e){e.preventDefault(),T.find(".video-share__copypaste").addClass("m-active").text(f),selectText(T.find(".video-share__copypaste"))}))}),e=videojs.extend(r,{constructor:function(e,t){r.call(this,e,t),this.controlText("Получить код")},handleClick:function(){p.open(),T.find(".video-share__copypaste").addClass("m-active").text(f),selectText(T.find(".video-share__copypaste"))},buildCSSClass:function(){return"vjs-share-embed-control vjs-control vjs-button"}}),videojs.registerComponent("shareButton",e),c.getChild("controlBar").addChild("shareButton",{}),$(window).resize(function(){$.throttle(videoPlayerSize(T),300)}))}))}function liveViews(e){var t;e.parents(".b-article__announce").length&&(e="/services/media/"+(t=e.find(".video_info")).data("media-id")+"-info.html?page_type=json&article_id="+t.data("article-id"),$.getJSON(e,function(e){null!=e.views&&(e.views,1)&&0!=e.views&&(e="сейчас смотрят: "+e.views,t.text(e),t.addClass("video_info_visible"))}))}function liveStat(e,t){var i=!1,n="https://nfw.ria.ru/flv/livestat.aspx?stream="+t+"&uid="+getUUID();e.on(["waiting","pause","ended","abort","error","dispose"],function(){i=!1}),e.on("playing",function(){i=!0}),e.one("play",function(){$.get(n),setInterval(function(){i&&$.get(n)},6e4)})}function videoPlayerSize(e){var e=e.find(".video-js"),t=e.outerWidth();e.removeClass("vjs-layout-480"),e.removeClass("vjs-layout-600"),440<=t&&e.addClass("vjs-layout-480"),600<=t&&e.addClass("vjs-layout-600")}function selectText(e){var t,i;document.selection?((t=document.body.createTextRange()).moveToElementText(e.get(0)),t.select()):window.getSelection&&(t=document.createRange(),0<(i=window.getSelection()).rangeCount&&i.removeAllRanges(),t.selectNode(e.get(0)),i.addRange(t),document.execCommand("copy"))}function timeFormat(e){function t(e){return("0"+e).slice(-2)}var i=Math.floor(e/60),n=Math.floor(i/60);return e=Math.floor(e%60),i%=60,(0<n?n+":"+t(i):""+i)+":"+t(e)}function getUUID(){var e;return localStorage.getItem("ria_uuid2")||(e="xxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(e){return 10*Math.random()|0}),localStorage.setItem("ria_uuid2",e)),localStorage.getItem("ria_uuid2")}function videoCounter(e,t,i){e="https://tns-counter.ru/e/ec01&cid=rian_ru&typ=1&tms=rian_ru&idc=145&idlc="+e+"&ver=0&type=2&view="+t+"&fts="+parseInt(i);fetch(e)}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.videojs=t()}(this,function(){var R="7.2.4",M="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function B(e,t){return e(t={exports:{}},t.exports),t.exports}function N(e,t){var i,n=z.levels[q],r=new RegExp("^("+n+")$");"log"!==e&&t.unshift(e.toUpperCase()+":"),W&&W.push([].concat(t)),t.unshift("VIDEOJS:"),h.console&&(i=(i=h.console[e])||"debug"!==e?i:h.console.info||h.console.log)&&n&&r.test(e)&&i[Array.isArray(t)?"apply":"call"](h.console,t)}function j(e){for(var t="",i=0;i<arguments.length;i++)t+=e[i].replace(/\n\r?\s*/g,"")+(arguments[i+1]||"");return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function F(e,t){return e.raw=t,e}function V(e){return Y(e)?Object.keys(e):[]}var h="undefined"!=typeof window?window:void 0!==M?M:"undefined"!=typeof self?self:{},H={},t=Object.freeze({default:H}),i=void 0!==M?M:"undefined"!=typeof window?window:{},d=("undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=t&&H),n),z=void 0,q="info",W=[],p=((z=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];N("log",t)}).levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:q},z.level=function(e){if("string"==typeof e){if(!z.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');q=e}return q},z.history=function(){return W?[].concat(W):[]},z.history.clear=function(){W&&(W.length=0)},z.history.disable=function(){null!==W&&(W.length=0,W=null)},z.history.enable=function(){null===W&&(W=[])},z.error=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return N("error",t)},z.warn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return N("warn",t)},z.debug=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return N("debug",t)},z),st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G=Object.prototype.toString;function X(t,i){V(t).forEach(function(e){return i(t[e],e)})}function f(i){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[i].concat(t)):(t.forEach(function(e){e&&X(e,function(e,t){i[t]=e})}),i)}function Y(e){return!!e&&"object"===(void 0===e?"undefined":st(e))}function $(e){return Y(e)&&"[object Object]"===G.call(e)&&e.constructor===Object}function K(e,t){return e&&t&&"function"==typeof h.getComputedStyle&&(e=h.getComputedStyle(e))?e[t]:""}var Q=F(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function J(e){return"string"==typeof e&&/\S/.test(e)}function Z(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function ee(){return d===h.document}function te(e){return Y(e)&&1===e.nodeType}function ie(){try{return h.parent!==h.self}catch(e){return!0}}function ne(i){return function(e,t){if(!J(e))return d[i](null);t=te(t=J(t)?d.querySelector(t):t)?t:d;return t[i]&&t[i](e)}}function re(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],r=d.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(p.warn(j(Q,e,t)),r.setAttribute(e,t)):"textContent"===e?ae(r,t):r[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),n&&Ce(r,n),r}function ae(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function se(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function oe(e,t){return Z(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function le(e,t){return e.classList?e.classList.add(t):oe(e,t)||(e.className=(e.className+" "+t).trim()),e}function ue(e,t){return e.classList?e.classList.remove(t):(Z(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function ce(e,t,i){var n=oe(e,t);if((i="boolean"!=typeof(i="function"==typeof i?i(e,t):i)?!n:i)!==n)return(i?le:ue)(e,t),e}function de(i,n){Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];null==t||!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})}function he(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,n=i.length-1;0<=n;n--){var r=i[n].name,a=i[n].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function pe(e,t){return e.getAttribute(t)}function fe(e,t,i){e.setAttribute(t,i)}function me(e,t){e.removeAttribute(t)}function ge(){d.body.focus(),d.onselectstart=function(){return!1}}function ye(){d.onselectstart=function(){return!0}}function ve(e){var t,i;if(e&&e.getBoundingClientRect&&e.parentNode)return t=e.getBoundingClientRect(),i={},["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(K(e,"height"))),i.width||(i.width=parseFloat(K(e,"width"))),i}function _e(e){var t=void 0;if(!(t=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():t))return{left:0,top:0};var e=d.documentElement,i=d.body,n=e.clientLeft||i.clientLeft||0,r=h.pageXOffset||i.scrollLeft,r=t.left+r-n,n=e.clientTop||i.clientTop||0,e=h.pageYOffset||i.scrollTop,i=t.top+e-n;return{left:Math.round(r),top:Math.round(i)}}function be(e,t){var i={},n=_e(e),r=e.offsetWidth,e=e.offsetHeight,a=n.top,n=n.left,s=t.pageY,o=t.pageX;return t.changedTouches&&(o=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(a-s+e)/e)),i.x=Math.max(0,Math.min(1,(o-n)/r)),i}function Te(e){return Y(e)&&3===e.nodeType}function Se(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ke(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return te(e="function"==typeof e?e():e)||Te(e)?e:"string"==typeof e&&/\S/.test(e)?d.createTextNode(e):void 0}).filter(function(e){return e})}function Ce(t,e){return ke(e).forEach(function(e){return t.appendChild(e)}),t}function we(e,t){return Ce(Se(e),t)}function Ee(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}var Ae=ne("querySelector"),Le=ne("querySelectorAll"),Oe=Object.freeze({isReal:ee,isEl:te,isInFrame:ie,createEl:re,textContent:ae,prependTo:se,hasClass:oe,addClass:le,removeClass:ue,toggleClass:ce,setAttributes:de,getAttributes:he,getAttribute:pe,setAttribute:fe,removeAttribute:me,blockTextSelection:ge,unblockTextSelection:ye,getBoundingClientRect:ve,findPosition:_e,getPointerPosition:be,isTextNode:Te,emptyEl:Se,normalizeContent:ke,appendContent:Ce,insertContent:we,isSingleLeftClick:Ee,$:Ae,$$:Le}),xe=1;var Pe={},Ie="vdata"+(new Date).getTime();function Ue(e){var t=(t=e[Ie])||(e[Ie]=xe++);return Pe[t]||(Pe[t]={}),Pe[t]}function De(e){e=e[Ie];return e&&Object.getOwnPropertyNames(Pe[e]).length}function Re(e){var t=e[Ie];if(t){delete Pe[t];try{delete e[Ie]}catch(t){e.removeAttribute?e.removeAttribute(Ie):e[Ie]=null}}}function Me(e,t){var i=Ue(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Re(e)}function Be(t,i,e,n){e.forEach(function(e){t(i,e,n)})}function Ne(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n,r,a,s=e||h.event;for(n in e={},s)"layerX"===n||"layerY"===n||"keyLocation"===n||"webkitMovementX"===n||"webkitMovementY"===n||"returnValue"===n&&s.preventDefault||(e[n]=s[n]);e.target||(e.target=e.srcElement||d),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){s.preventDefault&&s.preventDefault(),e.returnValue=!1,s.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),e.cancelBubble=!0,s.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX&&(r=d.documentElement,a=d.body,e.pageX=e.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var je=!1;try{var Fe=Object.defineProperty({},"passive",{get:function(){je=!0}});h.addEventListener("test",null,Fe),h.removeEventListener("test",null,Fe)}catch(Fe){}var Ve=["touchstart","touchmove"];function He(s,e,t){if(Array.isArray(e))return Be(He,s,e,t);var o=Ue(s);o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=xe++),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=Ne(e);var i=o.handlers[e.type];if(i)for(var n=i.slice(0),r=0,a=n.length;r<a&&!e.isImmediatePropagationStopped();r++)try{n[r].call(s,e,t)}catch(e){p.error(e)}}}),1===o.handlers[e].length&&(s.addEventListener?(t=!1,je&&-1<Ve.indexOf(e)&&(t={passive:!0}),s.addEventListener(e,o.dispatcher,t)):s.attachEvent&&s.attachEvent("on"+e,o.dispatcher))}function ze(e,t,i){if(De(e)){var n=Ue(e);if(n.handlers){if(Array.isArray(t))return Be(ze,e,t,i);function r(e,t){n.handlers[t]=[],Me(e,t)}if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);Me(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function qe(e,t,i){var n=De(e)?Ue(e):{},r=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Ne(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles?qe.call(null,r,t,i):r||t.defaultPrevented||(n=Ue(t.target),t.target[t.type]&&(n.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),n.disabled=!1)),!t.defaultPrevented}function We(e,t,i){if(Array.isArray(t))return Be(We,e,t,i);function n(){ze(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||xe++,He(e,t,n)}function Ge(){if(ee()&&!1!==$e.options.autoSetup){var e=Array.prototype.slice.call(d.getElementsByTagName("video")),t=Array.prototype.slice.call(d.getElementsByTagName("audio")),i=Array.prototype.slice.call(d.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&0<n.length)for(var r=0,a=n.length;r<a;r++){var s=n[r];if(!s||!s.getAttribute){Ke(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&$e(s)}else Ye||Ke(1)}}var Xe=Object.freeze({fixEvent:Ne,on:He,off:ze,trigger:qe,one:We}),Ye=!1,$e=void 0;function Ke(e,t){t&&($e=t),h.setTimeout(Ge,e)}ee()&&"complete"===d.readyState?Ye=!0:We(h,"load",function(){Ye=!0});function Qe(e){var t=d.createElement("style");return t.className=e,t}function Je(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function Ze(t,i){var n=Date.now();return function(){var e=Date.now();i<=e-n&&(t.apply(void 0,arguments),n=e)}}function et(n,r,a){function e(){var e=this,t=arguments,i=function(){i=o=null,a||n.apply(e,t)};!o&&a&&n.apply(e,t),s.clearTimeout(o),o=s.setTimeout(i,r)}var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:h,o=void 0;return e.cancel=function(){s.clearTimeout(o),o=null},e}function tt(){}function it(e){if(!e.nodeName&&!ut(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function nt(e){if(!ct(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function rt(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function at(e,t){var i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,n=void 0,r=void 0,a=void 0,a=i?(n=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],t[1]):(n=t[0],r=t[1],t[2]);return it(n),nt(r),rt(a),{isTargetingSelf:i,target:n,type:r,listener:a=l(e,a)}}function ot(e,t,i,n){it(e),e.nodeName?Xe[t](e,i,n):e[t](i,n)}var l=function(e,t,i){t.guid||(t.guid=xe++);function n(){return t.apply(e,arguments)}return n.guid=i?i+"_"+t.guid:t.guid,n},lt=(tt.prototype.allowedEvents_={},tt.prototype.addEventListener=tt.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},He(this,e,t),this.addEventListener=i},tt.prototype.removeEventListener=tt.prototype.off=function(e,t){ze(this,e,t)},tt.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},We(this,e,t),this.addEventListener=i},tt.prototype.dispatchEvent=tt.prototype.trigger=function(e){var t=e.type||e;e=Ne(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),qe(this,e)},void 0),ut=(tt.prototype.queueTrigger=function(e){var t=this,i=(lt=lt||new Map,e.type||e),n=lt.get(this),r=(n||(n=new Map,lt.set(this,n)),n.get(i)),r=(n.delete(i),h.clearTimeout(r),h.setTimeout(function(){0===n.size&&(n=null,lt.delete(t)),t.trigger(e)},0));n.set(i,r)},function(t){return t instanceof tt||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})}),ct=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},dt={on:function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,a=at(this,i),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;ot(o,"on",l,u),s||((r=function(){return e.off(o,l,u)}).guid=u.guid,(a=function(){return e.off("dispose",r)}).guid=u.guid,ot(this,"on","dispose",r),ot(o,"on","dispose",a))},one:function(){for(var r=this,e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=at(this,t),a=n.isTargetingSelf,s=n.target,o=n.type,l=n.listener;a?ot(s,"one",o,l):((n=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];r.off(s,o,e),l.apply(null,i)}).guid=l.guid,ot(s,"one",o,n))},off:function(e,t,i){!e||ct(e)?ze(this.eventBusEl_,e,t):(t=t,it(e=e),nt(t),rt(i),i=l(this,i),this.off("dispose",i),e.nodeName?(ze(e,t,i),ze(e,"dispose",i)):ut(e)&&(e.off(t,i),e.off("dispose",i)))},trigger:function(e,t){return qe(this.eventBusEl_,e,t)}};function ht(e,t){var i=(1<arguments.length&&void 0!==t?t:{}).eventBusKey;if(i){if(!e[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');e.eventBusEl_=e[i]}else e.eventBusEl_=re("span",{className:"vjs-event-bus"});f(e,dt),e.on("dispose",function(){e.off(),h.setTimeout(function(){e.eventBusEl_=null},0)})}var pt={state:{},setState:function(e){var i=this,n=("function"==typeof e&&(e=e()),void 0);return X(e,function(e,t){i.state[t]!==e&&((n=n||{})[t]={from:i.state[t],to:e}),i.state[t]=e}),n&&ut(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function ft(e,t){f(e,pt),e.state=f({},e.state,t),"function"==typeof e.handleStateChanged&&ut(e)&&e.on("statechanged",e.handleStateChanged)}function m(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function g(){for(var i={},e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){e&&X(e,function(e,t){$(e)?($(i[t])||(i[t]={}),i[t]=g(i[t],e)):i[t]=e})}),i}o.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Re(this.el_),this.el_=null),this.player_=null},o.prototype.player=function(){return this.player_},o.prototype.options=function(e){return p.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=g(this.options_,e)),this.options_},o.prototype.el=function(){return this.el_},o.prototype.createEl=function(e,t,i){return re(e,t,i)},o.prototype.localize=function(e,i){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],n=n&&n.split("-")[0],r=r&&r[n],n=t;return a&&a[e]?n=a[e]:r&&r[e]&&(n=r[e]),n=i?n.replace(/\{(\d+)\}/g,function(e,t){t=i[t-1];return void 0===t?e:t}):n},o.prototype.contentEl=function(){return this.contentEl_||this.el_},o.prototype.id=function(){return this.id_},o.prototype.name=function(){return this.name_},o.prototype.children=function(){return this.children_},o.prototype.getChildById=function(e){return this.childIndex_[e]},o.prototype.getChild=function(e){if(e)return e=m(e),this.childNameIndex_[e]},o.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0,r=void 0;if("string"==typeof e){var r=m(e),a=t.componentClass||r,s=(t.name=r,o.getComponent(a));if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;n=new s(this.player_||this,t)}else n=e;return this.children_.splice(i,0,n),"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(r=r||n.name&&m(n.name()))&&(this.childNameIndex_[r]=n),"function"==typeof n.el&&n.el()&&(a=this.contentEl().children[i]||null,this.contentEl().insertBefore(n.el(),a)),n},o.prototype.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,i=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){i=!0,this.children_.splice(n,1);break}i&&(this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},o.prototype.initChildren=function(){var i,e,t,n=this,r=this.options_.children;r&&(i=this.options_,e=void 0,t=o.getComponent("Tech"),(e=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t=void 0,i=void 0,i="string"==typeof e?r[t=e]||n.options_[t]||{}:(t=e.name,e);return{name:t,opts:i}}).filter(function(e){e=o.getComponent(e.opts.componentClass||m(e.name));return e&&!t.isTech(e)}).forEach(function(e){var t=e.name,e=e.opts;!1!==(e=void 0!==i[t]?i[t]:e)&&((e=!0===e?{}:e).playerOptions=n.options_.playerOptions,(e=n.addChild(t,e))&&(n[t]=e))}))},o.prototype.buildCSSClass=function(){return""},o.prototype.ready=function(e){if(e)return this.isReady_?void(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},o.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},o.prototype.$=function(e,t){return Ae(e,t||this.contentEl())},o.prototype.$$=function(e,t){return Le(e,t||this.contentEl())},o.prototype.hasClass=function(e){return oe(this.el_,e)},o.prototype.addClass=function(e){le(this.el_,e)},o.prototype.removeClass=function(e){ue(this.el_,e)},o.prototype.toggleClass=function(e,t){ce(this.el_,e,t)},o.prototype.show=function(){this.removeClass("vjs-hidden")},o.prototype.hide=function(){this.addClass("vjs-hidden")},o.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},o.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},o.prototype.getAttribute=function(e){return pe(this.el_,e)},o.prototype.setAttribute=function(e,t){fe(this.el_,e,t)},o.prototype.removeAttribute=function(e){me(this.el_,e)},o.prototype.width=function(e,t){return this.dimension("width",e,t)},o.prototype.height=function(e,t){return this.dimension("height",e,t)},o.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},o.prototype.dimension=function(e,t,i){if(void 0!==t)return-1!==(""+(t=null!==t&&t==t?t:0)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;t=this.el_.style[e],i=t.indexOf("px");return-1!==i?parseInt(t.slice(0,i),10):parseInt(this.el_["offset"+m(e)],10)},o.prototype.currentDimension=function(e){var t,i=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return"function"==typeof h.getComputedStyle&&(i=(t=h.getComputedStyle(this.el_)).getPropertyValue(e)||t[e]),0===(i=parseFloat(i))&&(t="offset"+m(e),i=this.el_[t]),i},o.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},o.prototype.currentWidth=function(){return this.currentDimension("width")},o.prototype.currentHeight=function(){return this.currentDimension("height")},o.prototype.focus=function(){this.el_.focus()},o.prototype.blur=function(){this.el_.blur()},o.prototype.emitTapEvents=function(){function e(){n=!1}var t=0,i=null,n=void 0;this.on("touchstart",function(e){1===e.touches.length&&(i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),n=!0)}),this.on("touchmove",function(e){var t;1<e.touches.length?n=!1:i&&(t=e.touches[0].pageX-i.pageX,e=e.touches[0].pageY-i.pageY,10<Math.sqrt(t*t+e*e)&&(n=!1))});this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(i=null)===n&&(new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap"))})},o.prototype.enableTouchActivity=function(){var t,i,e;this.player()&&this.player().reportUserActivity&&(t=l(this.player(),this.player().reportUserActivity),i=void 0,this.on("touchstart",function(){t(),this.clearInterval(i),i=this.setInterval(t,250)}),e=function(e){t(),this.clearInterval(i)},this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e))},o.prototype.setTimeout=function(e,t){var i,n,r=this;return e=l(this,e),i=h.setTimeout(function(){r.off("dispose",n),e()},t),(n=function(){return r.clearTimeout(i)}).guid="vjs-timeout-"+i,this.on("dispose",n),i},o.prototype.clearTimeout=function(e){h.clearTimeout(e);function t(){}return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},o.prototype.setInterval=function(e,t){function i(){return n.clearInterval(r)}var n=this,r=(e=l(this,e),h.setInterval(e,t));return i.guid="vjs-interval-"+r,this.on("dispose",i),r},o.prototype.clearInterval=function(e){h.clearInterval(e);function t(){}return t.guid="vjs-interval-"+e,this.off("dispose",t),e},o.prototype.requestAnimationFrame=function(e){var t,i,n=this;return this.supportsRaf_?(e=l(this,e),t=h.requestAnimationFrame(function(){n.off("dispose",i),e()}),(i=function(){return n.cancelAnimationFrame(t)}).guid="vjs-raf-"+t,this.on("dispose",i),t):this.setTimeout(e,1e3/60)},o.prototype.cancelAnimationFrame=function(e){var t;return this.supportsRaf_?(h.cancelAnimationFrame(e),(t=function(){}).guid="vjs-raf-"+e,this.off("dispose",t),e):this.clearTimeout(e)},o.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=o.getComponent("Tech"),i=i&&i.isTech(t),n=o===t||o.prototype.isPrototypeOf(t.prototype);if(i||!n)throw new Error('Illegal component, "'+e+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=m(e),o.components_||(o.components_={});n=o.getComponent("Player");if("Player"===e&&n&&n.players){var r=n.players,i=Object.keys(r);if(r&&0<i.length&&i.map(function(e){return r[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return o.components_[e]=t},o.getComponent=function(e){if(e)return e=m(e),o.components_&&o.components_[e]?o.components_[e]:void 0};var y=o;function o(e,t,i){u(this,o),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=g({},this.options_),t=this.options_=g(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+xe++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&ht(this,{eventBusKey:this.el_?"el_":null}),ft(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}y.prototype.supportsRaf_="function"==typeof h.requestAnimationFrame&&"function"==typeof h.cancelAnimationFrame,y.registerComponent("Component",y);var mt=h.navigator&&h.navigator.userAgent||"",i=/AppleWebKit\/([\d.]+)/i.exec(mt),t=i?parseFloat(i.pop()):null,H=/iPad/i.test(mt),gt=/iPhone/i.test(mt)&&!H,n=/iPod/i.test(mt),yt=gt||H||n,i=(i=mt.match(/OS (\d+)_/i))&&i[1]?i[1]:null,vt=/Android/i.test(mt),_t=function(){var e=mt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),bt=vt&&_t<5&&t<537,Tt=/Firefox/i.test(mt),t=/Edge/i.test(mt),St=!t&&(/Chrome/i.test(mt)||/CriOS/i.test(mt)),kt=(r=mt.match(/(Chrome|CriOS)\/(\d+)/))&&r[2]?parseFloat(r[2]):null,Ct=r=!(r=(r=/MSIE\s(\d+)\.\d/.exec(mt))&&parseFloat(r[1]))&&/Trident\/7.0/i.test(mt)&&/rv:11.0/.test(mt)?11:r,r=/Safari/i.test(mt)&&!St&&!vt&&!t,wt=(r||yt)&&!St,Et=ee()&&("ontouchstart"in h||h.navigator.maxTouchPoints||h.DocumentTouch&&h.document instanceof h.DocumentTouch),H=Object.freeze({IS_IPAD:H,IS_IPHONE:gt,IS_IPOD:n,IS_IOS:yt,IOS_VERSION:i,IS_ANDROID:vt,ANDROID_VERSION:_t,IS_NATIVE_ANDROID:bt,IS_FIREFOX:Tt,IS_EDGE:t,IS_CHROME:St,CHROME_VERSION:kt,IE_VERSION:Ct,IS_SAFARI:r,IS_ANY_SAFARI:wt,TOUCH_ENABLED:Et});function At(e,t,i,n){var r=i.length-1;if("number"!=typeof n||n<0||r<n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+n+") is non-numeric or out of bounds (0-"+r+").");return i[n][t]}function Lt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:At.bind(null,"start",0,e),end:At.bind(null,"end",1,e)}}function Ot(e,t){return Array.isArray(e)?Lt(e):void 0===e||void 0===t?Lt():Lt([[e,t]])}function xt(e,t){var i,n=0,r=void 0;if(!t)return 0;e&&e.length||(e=Ot(0,0));for(var a=0;a<e.length;a++)i=e.start(a),n+=(r=t<(r=e.end(a))?t:r)-i;return n/t}for(var Pt={},It=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ut=It[0],Dt=void 0,Rt=0;Rt<It.length;Rt++)if(It[Rt][1]in d){Dt=It[Rt];break}if(Dt)for(var Mt=0;Mt<Dt.length;Mt++)Pt[Ut[Mt]]=Dt[Mt];function Bt(e){if(e instanceof Bt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:Y(e)&&("number"==typeof e.code&&(this.code=e.code),f(this,e)),this.message||(this.message=Bt.defaultMessages[this.code]||"")}Bt.prototype.code=0,Bt.prototype.message="",Bt.prototype.status=null,Bt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Bt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Nt=0;Nt<Bt.errorTypes.length;Nt++)Bt[Bt.errorTypes[Nt]]=Nt,Bt.prototype[Bt.errorTypes[Nt]]=Nt;function jt(e){return null!=e&&"function"==typeof e.then}function Ft(e){jt(e)&&e.then(null,function(e){})}function Vt(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,i){return n[t]&&(e[t]=n[t]),e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}var Ht,zt="vjs-modal-dialog",qt=(e(a,Ht=y),a.prototype.createEl=function(){return Ht.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},a.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,Ht.prototype.dispose.call(this)},a.prototype.buildCSSClass=function(){return zt+" vjs-hidden "+Ht.prototype.buildCSSClass.call(this)},a.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},a.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},a.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},a.prototype.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",l(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},a.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},a.prototype.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",l(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},a.prototype.closeable=function(e){var t,i;return"boolean"==typeof e&&(e=this.closeable_=!!e,t=this.getChild("closeButton"),e&&!t&&(i=this.contentEl_,this.contentEl_=this.el_,t=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(t,"close",this.close)),!e&&t&&(this.off(t,"close",this.close),this.removeChild(t),t.dispose())),this.closeable_},a.prototype.fill=function(){this.fillWith(this.content())},a.prototype.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling,e=(this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),we(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t),this.getChild("closeButton"));e&&i.appendChild(e.el_)},a.prototype.empty=function(){this.trigger("beforemodalempty"),Se(this.contentEl()),this.trigger("modalempty")},a.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},a.prototype.conditionalFocus_=function(){var e=d.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus(),this.on(d,"keydown",this.handleKeyDown))},a.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(d,"keydown",this.handleKeyDown)},a.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),i=this.el_.querySelector(":focus"),n=void 0,r=0;r<t.length;r++)if(i===t[r]){n=r;break}d.activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())}},a.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof h.HTMLAnchorElement||e instanceof h.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof h.HTMLInputElement||e instanceof h.HTMLSelectElement||e instanceof h.HTMLTextAreaElement||e instanceof h.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof h.HTMLIFrameElement||e instanceof h.HTMLObjectElement||e instanceof h.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},a);function a(e,t){u(this,a);e=c(this,Ht.call(this,e,t));return e.opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=re("div",{className:zt+"-content"},{role:"document"}),e.descEl_=re("p",{className:zt+"-description vjs-control-text",id:e.el().getAttribute("aria-describedby")}),ae(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e}qt.prototype.options_={pauseOnOpen:!0,temporary:!0},y.registerComponent("ModalDialog",qt);e(Yt,Wt=tt),Yt.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},Yt.prototype.removeTrack=function(e){for(var t=void 0,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack"})},Yt.prototype.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t};var Wt,Gt,Xt=Yt;function Yt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(u(this,Yt),c(this,Wt.call(this)));t.tracks_=[],Object.defineProperty(t,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)t.addTrack(e[i]);return t}for(Gt in Xt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Xt.prototype.allowedEvents_)Xt.prototype["on"+Gt]=null;function $t(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)}function Kt(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)}function Qt(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=d.createElement("a"),n=(i.href=e,""===i.host&&"file:"!==i.protocol),r=void 0;n&&((r=d.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),d.body.appendChild(r));for(var a={},s=0;s<t.length;s++)a[t[s]]=i[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=h.location.protocol),n&&d.body.removeChild(r),a}function Jt(e){var t;return e.match(/^https?:\/\//)||((t=d.createElement("div")).innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href),e}function Zt(e){if("string"==typeof e){e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(e)return e.pop().toLowerCase()}return""}function ei(e){var t=hi.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e(vi,ri=Xt),vi.prototype.addTrack=function(e){var t=this;e.enabled&&$t(this,e),ri.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){t.changing_||(t.changing_=!0,$t(t,e),t.changing_=!1,t.trigger("change"))})};var ti,ii,ni,ri,n=vi,i=(e(yi,ni=Xt),yi.prototype.addTrack=function(e){var t=this;e.selected&&Kt(this,e),ni.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){t.changing_||(t.changing_=!0,Kt(t,e),t.changing_=!1,t.trigger("change"))})},yi),t=(e(gi,ii=Xt),gi.prototype.addTrack=function(e){ii.prototype.addTrack.call(this,e),e.addEventListener("modechange",l(this,function(){this.queueTrigger("change")})),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",l(this,function(){this.trigger("selectedlanguagechange")}))},gi),r=(mi.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},mi.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},mi.prototype.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},mi),ai=(fi.prototype.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var i=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;if(i<r)for(n=i;n<r;n++)t.call(this,n)},fi.prototype.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},fi),si={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},oi={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},li={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ui={disabled:"disabled",hidden:"hidden",showing:"showing"},s=(e(pi,ti=tt),pi),ci=function(e){var t=h.location,e=Qt(e);return(":"===e.protocol?t:e).protocol+e.host!==t.protocol+t.host},di=Object.freeze({parseUrl:Qt,getAbsoluteURL:Jt,getFileExtension:Zt,isCrossOrigin:ci}),hi=Object.prototype.toString;function pi(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(u(this,pi),c(this,ti.call(this))),n={id:t.id||"vjs_track_"+xe++,kind:t.kind||"",label:t.label||"",language:t.language||""};for(e in n)!function(e){Object.defineProperty(i,e,{get:function(){return n[e]},set:function(){}})}(e);return i}function fi(e){u(this,fi),fi.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}function mi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];u(this,mi),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}function gi(){return u(this,gi),c(this,ii.apply(this,arguments))}function yi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];u(this,yi);for(var t=e.length-1;0<=t;t--)if(e[t].selected){Kt(e,e[t]);break}var i=c(this,ni.call(this,e));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}function vi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];u(this,vi);for(var t=e.length-1;0<=t;t--)if(e[t].enabled){$t(e,e[t]);break}var i=c(this,ri.call(this,e));return i.changing_=!1,i}function _i(e,t,i){if(!Ci(t))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),("[object Array]"===wi.call(e)?function(e,t,i){for(var n=0,r=e.length;n<r;n++)Ei.call(e,n)&&t.call(i,e[n],n,e)}:"string"==typeof e?function(e,t,i){for(var n=0,r=e.length;n<r;n++)t.call(i,e.charAt(n),n,e)}:function(e,t,i){for(var n in e)Ei.call(e,n)&&t.call(i,e[n],n,e)})(e,t,i)}function bi(e){if(!e)return{};var n={};return Li(Ai(e).split("\n"),function(e){var t=e.indexOf(":"),i=Ai(e.slice(0,t)).toLowerCase(),e=Ai(e.slice(t+1));void 0===n[i]?n[i]=e:(t=n[i],"[object Array]"===Object.prototype.toString.call(t)?n[i].push(e):n[i]=[n[i],e])}),n}function Ti(){for(var e={},t=0;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Oi.call(n,i)&&(e[i]=n[i])}return e}var v=Object.freeze({default:ei,__moduleExports:ei}),_=B(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),Si=_.left,ki=_.right,Si=Object.freeze({default:_,__moduleExports:_,left:Si,right:ki}),Ci=v&&ei,wi=Object.prototype.toString,Ei=Object.prototype.hasOwnProperty,ki=Object.freeze({default:_i,__moduleExports:_i}),Ai=Si&&_||Si,Li=ki&&_i,v=Object.freeze({default:bi,__moduleExports:bi}),Oi=Object.prototype.hasOwnProperty,_=Object.freeze({default:Ti,__moduleExports:Ti}),xi=v&&bi,Pi=_&&Ti,Ii=Di;function Ui(e,t,i){var n=e;return Ci(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=Pi(t,{uri:e}),n.callback=i,n}function Di(e,t,i){return Ri(t=Ui(e,t,i))}function Ri(n){if(void 0===n.callback)throw new Error("callback argument missing");function r(e,t,i){a||(a=!0,n.callback(e,t,i))}var a=!1;function t(e){return clearTimeout(o),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,r(e,m)}function e(){var e,t,i;if(!s)return clearTimeout(o),e=n.useXDR&&void 0===l.status?200:1223===l.status?204:l.status,t=m,i=null,0!==e?(t={body:function(){var e=void 0,e=l.response||l.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(l);if(f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(t.headers=xi(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,t,t.body)}var i,s,o,l=n.xhr||null,u=(l=l||new(n.cors||n.useXDR?Di.XDomainRequest:Di.XMLHttpRequest)).url=n.uri||n.url,c=l.method=n.method||"GET",d=n.body||n.data,h=l.headers=n.headers||{},p=!!n.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:l};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===n.json?d:n.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(e,0)},l.onload=e,l.onerror=t,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=t,l.open(c,u,!p,n.username,n.password),p||(l.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(o=setTimeout(function(){var e;s||(s=!0,l.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",t(e))},n.timeout)),l.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&l.setRequestHeader(i,h[i]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(l.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(l),l.send(d||null),l}Di.XMLHttpRequest=h.XMLHttpRequest||function(){},Di.XDomainRequest="withCredentials"in new Di.XMLHttpRequest?Di.XMLHttpRequest:h.XDomainRequest;for(var Mi=["get","put","post","patch","head","delete"],Bi=0;Bi<Mi.length;Bi++)!function(n){Di["delete"===n?"del":n]=function(e,t,i){return(t=Ui(e,t,i)).method=n.toUpperCase(),Ri(t)}}(Mi[Bi]);var Ni,ji=function(e,t){var i=new h.WebVTT.Parser(h,h.vttjs,h.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),0<n.length&&(h.console&&h.console.groupCollapsed&&h.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return p.error(e)}),h.console&&h.console.groupEnd&&h.console.groupEnd()),i.flush()},Fi=(e(Vi,Ni=s),Vi.prototype.addCue=function(e){var t=e;if(h.vttjs&&!(e instanceof h.vttjs.VTTCue)){for(var i in t=new h.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},Vi.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},Vi);function Vi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(u(this,Vi),!e.tech)throw new Error("A tech was not provided.");var e=g(e,{kind:li[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=ui[e.mode]||"disabled",t=e.default,n=("metadata"!==e.kind&&"chapters"!==e.kind||(i="hidden"),c(this,Ni.call(this,e))),r=(n.tech_=e.tech,n.cues_=[],n.activeCues_=[],new ai(n.cues_)),s=new ai(n.activeCues_),o=!1,a=l(n,function(){this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==i&&n.tech_.ready(function(){n.tech_.on("timeupdate",a)},!0),Object.defineProperties(n,{default:{get:function(){return t},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;ui[e]&&("disabled"!==(i=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",a)},!0):this.tech_.off("timeupdate",a),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?r:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),e.src?(n.src=e.src,function(e,r){var t={uri:e},e=ci(e);e&&(t.cors=e),Ii(t,l(this,function(e,t,i){if(e)return p.error(e,t);var n;r.loaded_=!0,"function"!=typeof h.WebVTT?r.tech_&&(r.tech_.on("vttjsloaded",n=function(){return ji(i,r)}),r.tech_.on("vttjserror",function(){p.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",n)})):ji(i,r)}))}(e.src,n)):n.loaded_=!0,n}Fi.prototype.allowedEvents_={cuechange:"cuechange"};e(Xi,qi=s);var Hi,zi,qi,Si=Xi,ki=(e(Gi,zi=s),Gi),v=(e(Wi,Hi=tt),Wi);function Wi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(u(this,Wi),c(this,Hi.call(this))),i=void 0,n=new Fi(e);return t.kind=n.kind,t.src=n.src,t.srclang=n.language,t.label=n.label,t.default=n.default,Object.defineProperties(t,{readyState:{get:function(){return i}},track:{get:function(){return n}}}),i=0,n.addEventListener("loadeddata",function(){i=2,t.trigger({type:"load",target:t})}),t}function Gi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(u(this,Gi),g(e,{kind:si[e.kind]||""})),t=c(this,zi.call(this,e)),i=!1;return Object.defineProperty(t,"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),e.selected&&(t.selected=e.selected),t}function Xi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(u(this,Xi),g(e,{kind:oi[e.kind]||""})),t=c(this,qi.call(this,e)),i=!1;return Object.defineProperty(t,"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),e.enabled&&(t.enabled=e.enabled),t.loaded_=!0,t}v.prototype.allowedEvents_={load:"load"},v.NONE=0,v.LOADING=1,v.LOADED=2,v.ERROR=3;var Yi={audio:{ListClass:n,TrackClass:Si,capitalName:"Audio"},video:{ListClass:i,TrackClass:ki,capitalName:"Video"},text:{ListClass:t,TrackClass:Fi,capitalName:"Text"}},$i=(Object.keys(Yi).forEach(function(e){Yi[e].getterName=e+"Tracks",Yi[e].privateName=e+"Tracks_"}),{remoteText:{ListClass:t,TrackClass:Fi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:r,TrackClass:v,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}}),Ki=g(Yi,$i),Qi=($i.names=Object.keys($i),Yi.names=Object.keys(Yi),Ki.names=[].concat($i.names).concat(Yi.names),Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Ji.prototype=e,new Ji});function Ji(){}function Zi(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function en(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}e=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function tn(){this.values=Qi(null)}function nn(e,t,i,n){var r,a,s=n?e.split(n):[e];for(r in s)"string"!=typeof s[r]||2===(a=s[r].split(i)).length&&t(a[0],a[1])}((Zi.prototype=Qi(Error.prototype)).constructor=Zi).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},tn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var rn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},an={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},sn={v:"title",lang:"lang"},on={rt:"ruby"};function ln(r,t){function i(e){return rn[e]}for(var e,n=r.document.createElement("div"),a=n,s=[];null!==(e=function(){if(!t)return null;var e=(e=t.match(/^([^<]*)(<[^>]*>?)?/))[1]||e[2];return t=t.substr(e.length),e}());)if("<"!==e[0])a.appendChild(r.document.createTextNode(function(e){for(;u=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(u[0],i);return e}(e)));else{if("/"===e[1]){s.length&&s[s.length-1]===e.substr(2).replace(">","")&&(s.pop(),a=a.parentNode);continue}var o,l=en(e.substr(1,e.length-2));if(l){o=r.document.createProcessingInstruction("timestamp",l),a.appendChild(o);continue}var u=e.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!u)continue;if(!(o=function(e,t){var i=an[e];if(!i)return null;var n=r.document.createElement(i);return n.localName=i,(i=sn[e])&&t&&(n[i]=t.trim()),n}(u[1],u[3])))continue;if(l=a,on[(e=o).localName]&&on[e.localName]!==l.localName)continue;u[2]&&(o.className=u[2].substr(1).replace("."," ")),s.push(u[1]),a.appendChild(o),a=o}return n}var un=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function cn(){}function dn(e,t,i){cn.call(this),this.cue=t,this.cueDiv=ln(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},r=(this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function a(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}for(a(t,e);i=function e(t){if(!t||!t.length)return null;var i,n=t.pop(),r=n.textContent||n.innerText;return r?(i=r.match(/^.*(\n|\r)/))?i[t.length=0]:r:"ruby"===n.tagName?e(t):n.childNodes?(a(t,n),e(t)):void 0}(t);)for(var n=0;n<i.length;n++)if(function(e){for(var t=0;t<un.length;t++){var i=un[t];if(e>=i[0]&&e<=i[1])return 1}}(i.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":r=t.position;break;case"middle":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function hn(e){var t,i,n,r;e.div&&(t=e.div.offsetHeight,i=e.div.offsetWidth,n=e.div.offsetTop,r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),e=e.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0),this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||t,this.bottom=e.bottom||n+(e.height||t),this.width=e.width||i,this.lineHeight=void 0!==r?r:e.lineHeight}function pn(){}cn.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},cn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(dn.prototype=Qi(cn.prototype)).constructor=dn,hn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},hn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},hn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},hn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},hn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},hn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},hn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},hn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},pn.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},pn.convertCueToDOMTree=function(e,t){return e&&t?ln(e,t):null},pn.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t))for(var r,a,s=[],o=hn.getSimpleBoxPosition(n),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"},u=0;u<t.length;u++){a=t[u],r=new dn(e,a,l),n.appendChild(r.div),b=S=T=b=_=v=c=y=g=m=f=p=h=d=void 0;var c,d=r,h=o,p=s,f=new hn(d),m=d.cue,g=function(){if("number"==typeof m.line&&(m.snapToLines||0<=m.line&&m.line<=100))return m.line;if(!m.track||!m.track.textTrackList||!m.track.textTrackList.mediaElement)return-1;for(var e=m.track,t=e.textTrackList,i=0,n=0;n<t.length&&t[n]!==e;n++)"showing"===t[n].mode&&i++;return-1*++i}(),y=[];if(m.snapToLines){switch(m.vertical){case"":y=["+y","-y"],c="height";break;case"rl":y=["+x","-x"],c="width";break;case"lr":y=["-x","+x"],c="width"}var v=f.lineHeight,_=v*Math.round(g),b=h[c]+v,T=y[0];Math.abs(_)>b&&(_=_<0?-1:1,_*=Math.ceil(b/v)*v),g<0&&(_+=""===m.vertical?h.height:h.width,y=y.reverse()),f.move(T,_)}else{var S=f.lineHeight/h.height*100;switch(m.lineAlign){case"middle":g-=S/2;break;case"end":g-=S}switch(m.vertical){case"":d.applyStyles({top:d.formatStyle(g,"%")});break;case"rl":d.applyStyles({left:d.formatStyle(g,"%")});break;case"lr":d.applyStyles({right:d.formatStyle(g,"%")})}y=["+y","-x","+x","-y"],f=new hn(d)}b=function(e,t){for(var i,n=new hn(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(h,t[a])||e.within(h)&&e.overlapsAny(p);)e.move(t[a]);if(e.within(h))return e;var s=e.intersectPercentage(h);s<r&&(i=new hn(e),r=s),e=new hn(n)}return i||n}(f,y),d.move(b.toCSSCompatValues(h)),a.displayState=r.div,s.push(hn.getSimpleBoxPosition(r))}else for(var k=0;k<t.length;k++)n.appendChild(t[k].displayState)},(pn.Parser=function(e,t,i){i||(i=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Zi))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function i(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}function r(e){e.match(/X-TIMESTAMP-MAP/)?nn(e,function(e,t){var i;"X-TIMESTAMP-MAP"===e&&(e=t,i=new tn,nn(e,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",en(t))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")}))},/=/):nn(e,function(e,t){var r;"Region"===e&&(e=t,r=new tn,nn(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var n=new tn;if(n.percent("x",i[0]),n.percent("y",i[1]),!n.has("x")||!n.has("y"))break;r.set(e+"X",n.get("x")),r.set(e+"Y",n.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")&&((e=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=r.get("width",100),e.lines=r.get("lines",3),e.regionAnchorX=r.get("regionanchorX",0),e.regionAnchorY=r.get("regionanchorY",100),e.viewportAnchorX=r.get("viewportanchorX",0),e.viewportAnchorY=r.get("viewportanchorY",100),e.scroll=r.get("scroll",""),n.onregion&&n.onregion(e),n.regionList.push({id:r.get("id"),region:e})))},/:/)}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var a=(t=i()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Zi(Zi.Errors.BadSignature);n.state="HEADER"}for(var s=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:t=i(),n.state){case"HEADER":/:/.test(t)?r(t):t||(n.state="ID");continue;case"NOTE":t||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){n.state="NOTE";break}if(!t)continue;if(n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,""),n.state="CUE",-1===t.indexOf("--\x3e")){n.cue.id=t;continue}case"CUE":try{!function(t,e,a){var i,s,n=t;function r(){var e=en(t);if(null===e)throw new Zi(Zi.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=r(),o(),"--\x3e"!==t.substr(0,3))throw new Zi(Zi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),o(),e.endTime=r(),o(),i=t,e=e,s=new tn,nn(i,function(e,t){switch(e){case"region":for(var i=a.length-1;0<=i;i--)if(a[i].id===t){s.set(e,a[i].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];s.integer(e,r),s.percent(e,r)&&s.set("snapToLines",!1),s.alt(e,r,["auto"]),2===n.length&&s.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=t.split(","),s.percent(e,n[0]),2===n.length&&s.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),e.region=s.get("region",null),e.vertical=s.get("vertical",""),e.line=s.get("line","auto"),e.lineAlign=s.get("lineAlign","start"),e.snapToLines=s.get("snapToLines",!0),e.size=s.get("size",100),e.align=s.get("align","middle"),e.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(t,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==t.indexOf("--\x3e");if(!t||o&&(s=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=t;continue;case"BADCUE":t||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Zi(Zi.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var _=pn,s=Object.freeze({default:_,__moduleExports:_}),fn={"":1,lr:1,rl:1},mn={start:1,middle:1,end:1,left:1,right:1};function gn(e){return"string"==typeof e&&!!mn[e.toLowerCase()]&&e.toLowerCase()}function yn(e,t,i){this.hasBeenReset=!1;var n="",r=!1,a=e,s=t,o=i,l=null,u="",c=!0,d="auto",h="start",p=50,f="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){e="string"==typeof(e=e)&&!!fn[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");u=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){e=gn(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");h=e,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){e=gn(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");f=e,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){e=gn(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}yn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var n=yn,i=Object.freeze({default:n,__moduleExports:n}),vn={"":!0,up:!0};function _n(e){return"number"==typeof e&&0<=e&&e<=100}function bn(){var t=100,i=3,n=0,r=100,a=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!_n(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!_n(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!_n(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!_n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!_n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){e="string"==typeof(e=e)&&!!vn[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");o=e}}})}var Tn,t=Object.freeze({default:bn,__moduleExports:bn}),Sn=s&&_,kn=i&&n,Cn=t&&bn,wn=B(function(e){var e=e.exports={WebVTT:Sn,VTTCue:kn,VTTRegion:Cn},t=(h.vttjs=e,h.WebVTT=e.WebVTT,e.VTTCue),i=e.VTTRegion,n=h.VTTCue,r=h.VTTRegion;e.shim=function(){h.VTTCue=t,h.VTTRegion=i},e.restore=function(){h.VTTCue=n,h.VTTRegion=r},h.VTTCue||e.shim()}),b=(wn.WebVTT,wn.VTTCue,wn.VTTRegion,e(T,Tn=y),T.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},T.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},T.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},T.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(l(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},T.prototype.onDurationChange=function(e){this.duration_=this.duration()},T.prototype.buffered=function(){return Ot(0,0)},T.prototype.bufferedPercent=function(){return xt(this.buffered(),this.duration_)},T.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},T.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},T.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},T.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},T.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},T.prototype.dispose=function(){this.clearTracks(Yi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),Tn.prototype.dispose.call(this)},T.prototype.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],i=t.length;i--;){var n=t[i];"text"===e&&r.removeRemoteTextTrack(n),t.removeTrack(n)}})},T.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},T.prototype.reset=function(){},T.prototype.error=function(e){return void 0!==e&&(this.error_=new Bt(e),this.trigger("error")),this.error_},T.prototype.played=function(){return this.hasStarted_?Ot(0,0):Ot()},T.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},T.prototype.initTrackListeners=function(){var r=this;Yi.names.forEach(function(e){function t(){r.trigger(e+"trackchange")}var i=Yi[e],n=r[i.getterName]();n.addEventListener("removetrack",t),n.addEventListener("addtrack",t),r.on("dispose",function(){n.removeEventListener("removetrack",t),n.removeEventListener("addtrack",t)})})},T.prototype.addWebVttScript_=function(){var e,t=this;h.WebVTT||(d.body.contains(this.el())?!this.options_["vtt.js"]&&$(wn)&&0<Object.keys(wn).length?this.trigger("vttjsloaded"):((e=d.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),h.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},T.prototype.emulateTextTracks=function(){function t(e){return r.addTrack(e.track)}function i(e){return r.removeTrack(e.track)}function n(){s();for(var e=0;e<r.length;e++){var t=r[e];t.removeEventListener("cuechange",s),"showing"===t.mode&&t.addEventListener("cuechange",s)}}var e=this,r=this.textTracks(),a=this.remoteTextTracks(),s=(a.on("addtrack",t),a.on("removetrack",i),this.addWebVttScript_(),function(){return e.trigger("texttrackchange")});n(),r.addEventListener("change",n),r.addEventListener("addtrack",n),r.addEventListener("removetrack",n),this.on("dispose",function(){a.off("addtrack",t),a.off("removetrack",i),r.removeEventListener("change",n),r.removeEventListener("addtrack",n),r.removeEventListener("removetrack",n);for(var e=0;e<r.length;e++)r[e].removeEventListener("cuechange",s)})},T.prototype.addTextTrack=function(e,t,i){if(e)return function(e,t,i,n,r){var a=4<arguments.length&&void 0!==r?r:{},s=e.textTracks(),a=(a.kind=t,i&&(a.label=i),n&&(a.language=n),a.tech=e,new Ki.text.TrackClass(a));return s.addTrack(a),a}(this,e,t,i);throw new Error("TextTrack kind is required but was not provided")},T.prototype.createRemoteTextTrack=function(e){e=g(e,{tech:this});return new $i.remoteTextEl.TrackClass(e)},T.prototype.addRemoteTextTrack=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=this.createRemoteTextTrack(t);return!0!==i&&!1!==i&&(p.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==i&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(n.track)}),n},T.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},T.prototype.getVideoPlaybackQuality=function(){return{}},T.prototype.setPoster=function(){},T.prototype.playsinline=function(){},T.prototype.setPlaysinline=function(){},T.prototype.overrideNativeAudioTracks=function(){},T.prototype.overrideNativeVideoTracks=function(){},T.prototype.canPlayType=function(){return""},T.canPlayType=function(){return""},T.canPlaySource=function(e,t){return T.canPlayType(e.type)},T.isTech=function(e){return e.prototype instanceof T||e instanceof T||e===T},T.registerTech=function(e,t){if(T.techs_||(T.techs_={}),!T.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!T.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(T.canPlaySource)return e=m(e),T.techs_[e]=t,"Tech"!==e&&T.defaultTechOrder_.push(e),t;throw new Error("Techs must have a static canPlaySource method on them")},T.getTech=function(e){if(e)return e=m(e),T.techs_&&T.techs_[e]?T.techs_[e]:h&&h.videojs&&h.videojs[e]?(p.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),h.videojs[e]):void 0},T);function T(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},i=(u(this,T),t.reportTouchActivity=!1,c(this,Tn.call(this,null,t,e)));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),Ki.names.forEach(function(e){e=Ki[e];t&&t[e.getterName]&&(i[e.privateName]=t[e.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new Ki.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Ki.names.forEach(function(e){var t=Ki[e];b.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),b.prototype.featuresVolumeControl=!0,b.prototype.featuresMuteControl=!0,b.prototype.featuresFullscreenResize=!1,b.prototype.featuresPlaybackRate=!1,b.prototype.featuresProgressEvents=!1,b.prototype.featuresSourceset=!1,b.prototype.featuresTimeupdateEvents=!1,b.prototype.featuresNativeTextTracks=!1,b.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var i=(i=r.sourceHandlers)||(r.sourceHandlers=[]);void 0===t&&(t=i.length),i.splice(t,0,e)},r.canPlayType=function(e){for(var t,i=r.sourceHandlers||[],n=0;n<i.length;n++)if(t=i[n].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var i=r.sourceHandlers||[],n=0;n<i.length;n++)if(i[n].canHandleSource(e,t))return i[n];return null},r.canPlaySource=function(e,t){var i=r.selectSourceHandler(e,t);return i?i.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:p.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},y.registerComponent("Tech",b),b.registerTech("Tech",b),b.defaultTechOrder_=[];var En={},An={},Ln={};function On(e,t,i,n){for(var r=3<arguments.length&&void 0!==n?n:null,a="call"+m(i),a=e.reduce(Un(a),r),r=a===Ln,a=r?null:t[i](a),s=e,o=i,l=a,u=r,c=s.length-1;0<=c;c--){var d=s[c];d[o]&&d[o](u,l)}return a}var xn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Pn={setCurrentTime:1},In={play:1,pause:1};function Un(i){return function(e,t){return e===Ln?Ln:t[i]?t[i](e):e}}function Dn(){var e=Zt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"");return Rn[e.toLowerCase()]||""}var Rn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"};function Mn(e){var t=Dn(e.src);return!e.type&&t&&(e.type=t),e}e(Nn,Bn=y);var Bn,r=Nn;function Nn(e,t,i){u(this,Nn);var n=g({createEl:!1},t),n=c(this,Bn.call(this,e,n,i));if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var r=0,a=t.playerOptions.techOrder;r<a.length;r++){var s=m(a[r]),o=b.getTech(s);if((o=s?o:y.getComponent(s))&&o.isSupported()){e.loadTech_(s);break}}return n}y.registerComponent("MediaLoader",r);e(Fn,jn=y),Fn.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),e=("button"===e&&p.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=f({role:"button"},i),this.tabIndex_=t.tabIndex,jn.prototype.createEl.call(this,e,t,i));return this.createControlTextEl(e),e},Fn.prototype.dispose=function(){this.controlTextEl_=null,jn.prototype.dispose.call(this)},Fn.prototype.createControlTextEl=function(e){return this.controlTextEl_=re("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},Fn.prototype.controlText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,ae(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},Fn.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+jn.prototype.buildCSSClass.call(this)},Fn.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},Fn.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},Fn.prototype.handleClick=function(e){},Fn.prototype.handleFocus=function(e){He(d,"keydown",l(this,this.handleKeyPress))},Fn.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):jn.prototype.handleKeyPress&&jn.prototype.handleKeyPress.call(this,e)},Fn.prototype.handleBlur=function(e){ze(d,"keydown",l(this,this.handleKeyPress))};var jn,v=Fn;function Fn(e,t){u(this,Fn);e=c(this,jn.call(this,e,t));return e.emitTapEvents(),e.enable(),e}y.registerComponent("ClickableComponent",v);e(Hn,Vn=v),Hn.prototype.dispose=function(){this.player().off("posterchange",this.update),Vn.prototype.dispose.call(this)},Hn.prototype.createEl=function(){return re("div",{className:"vjs-poster",tabIndex:-1})},Hn.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},Hn.prototype.setSrc=function(e){e=e?'url("'+e+'")':"";this.el_.style.backgroundImage=e},Hn.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Ft(this.player_.play()):this.player_.pause())};var Vn,s=Hn;function Hn(e,t){u(this,Hn);t=c(this,Vn.call(this,e,t));return t.update(),e.on("posterchange",l(t,t.update)),t}y.registerComponent("PosterImage",s);var zn="#222",qn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Wn(e,t){var i=void 0;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Gn(e,t,i){try{e.style[t]=i}catch(e){return}}e(Yn,Xn=y),Yn.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage,n=void 0,r=void 0,a=void 0,s=0;s<t.length;s++){var o=t[s];i&&i.enabled&&i.language===o.language?a=o.kind!==i.kind&&a||o:i&&!i.enabled?r=n=a=null:o.default&&("descriptions"!==o.kind||n?o.kind in e&&!r&&(r=o):n=o)}a?a.mode="showing":r?r.mode="showing":n&&(n.mode="showing")},Yn.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},Yn.prototype.createEl=function(){return Xn.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},Yn.prototype.clearDisplay=function(){"function"==typeof h.WebVTT&&h.WebVTT.processCues(h,[],this.el_)},Yn.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,i=null,n=e.length;n--;){var r=e[n];"showing"===r.mode&&("descriptions"===r.kind?t=r:i=r)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},Yn.prototype.updateForTrack=function(e){if("function"==typeof h.WebVTT&&e.activeCues){for(var t=[],i=0;i<e.activeCues.length;i++)t.push(e.activeCues[i]);if(h.WebVTT.processCues(h,t,this.el_),this.player_.textTrackSettings)for(var n=this.player_.textTrackSettings.getValues(),r=t.length;r--;){var a,s=t[r];s&&(s=s.displayState,n.color&&(s.firstChild.style.color=n.color),n.textOpacity&&Gn(s.firstChild,"color",Wn(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(s.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Gn(s.firstChild,"backgroundColor",Wn(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Gn(s,"backgroundColor",Wn(n.windowColor,n.windowOpacity)):s.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+zn:"raised"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+zn:"depressed"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+zn:"uniform"===n.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+zn)),n.fontPercent&&1!==n.fontPercent&&(a=h.parseFloat(s.style.fontSize),s.style.fontSize=a*n.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"),n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=qn[n.fontFamily]))}}};var Xn,_=Yn;function Yn(i,e,t){u(this,Yn);var e=c(this,Xn.call(this,i,e,t)),n=l(e,e.updateDisplay);return i.on("loadstart",l(e,e.toggleDisplay)),i.on("texttrackchange",n),i.on("loadstart",l(e,e.preselectTrack)),i.ready(l(e,function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",n),i.on("playerresize",n),h.addEventListener("orientationchange",n),i.on("dispose",function(){return h.removeEventListener("orientationchange",n)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),e}y.registerComponent("TextTrackDisplay",_);e(Kn,$n=y),Kn.prototype.createEl=function(){var e=this.player_.isAudio(),e=this.localize(e?"Audio Player":"Video Player"),e=re("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[e])}),t=$n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return t.appendChild(e),t};var $n,i=Kn;function Kn(){return u(this,Kn),c(this,$n.apply(this,arguments))}y.registerComponent("LoadingSpinner",i);e(Zn,Qn=v),Zn.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=f({type:"button"},i),t=y.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(t),t},Zn.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.constructor.name;return p.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),y.prototype.addChild.call(this,e,t)},Zn.prototype.enable=function(){Qn.prototype.enable.call(this),this.el_.removeAttribute("disabled")},Zn.prototype.disable=function(){Qn.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},Zn.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&Qn.prototype.handleKeyPress.call(this,e)};var Qn,Jn=Zn;function Zn(){return u(this,Zn),c(this,Qn.apply(this,arguments))}y.registerComponent("Button",Jn);e(tr,er=Jn),tr.prototype.buildCSSClass=function(){return"vjs-big-play-button"},tr.prototype.handleClick=function(e){var t,i=this.player_.play();this.mouseused_&&e.clientX&&e.clientY?Ft(i):(e=this.player_.getChild("controlBar"),(t=e&&e.getChild("playToggle"))?(e=function(){return t.focus()},jt(i)?i.then(e,function(){}):this.setTimeout(e,1)):this.player_.focus())},tr.prototype.handleKeyPress=function(e){this.mouseused_=!1,er.prototype.handleKeyPress.call(this,e)},tr.prototype.handleMouseDown=function(e){this.mouseused_=!0};var er,n=tr;function tr(e,t){u(this,tr);e=c(this,er.call(this,e,t));return e.mouseused_=!1,e.on("mousedown",e.handleMouseDown),e}n.prototype.controlText_="Play Video",y.registerComponent("BigPlayButton",n);e(nr,ir=Jn),nr.prototype.buildCSSClass=function(){return"vjs-close-button "+ir.prototype.buildCSSClass.call(this)},nr.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})};var ir,t=nr;function nr(e,t){u(this,nr);e=c(this,ir.call(this,e,t));return e.controlText(t&&t.controlText||e.localize("Close")),e}y.registerComponent("CloseButton",t);e(ar,rr=Jn),ar.prototype.buildCSSClass=function(){return"vjs-play-control "+rr.prototype.buildCSSClass.call(this)},ar.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},ar.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},ar.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},ar.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},ar.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)};var rr,r=ar;function ar(e,t){u(this,ar);t=c(this,rr.call(this,e,t));return t.on(e,"play",t.handlePlay),t.on(e,"pause",t.handlePause),t.on(e,"ended",t.handleEnded),t}r.prototype.controlText_="Play",y.registerComponent("PlayToggle",r);function sr(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),t=Math.floor(t/3600);return(r=0<(r=!isNaN(e)&&e!==1/0?r:n=i="-")||0<t?r+":":"")+(n=((r||10<=a)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)}var or=sr;function lr(e){return or(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:e)}e(cr,ur=y),cr.prototype.createEl=function(e){var t=this.buildCSSClass(),i=ur.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=re("span",{className:t+"-display"},{"aria-live":"off"}),this.updateTextNode_(),i.appendChild(this.contentEl_),i},cr.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,ur.prototype.dispose.call(this)},cr.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=d.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},cr.prototype.formatTime_=function(e){return lr(e)},cr.prototype.updateFormattedTime_=function(e){e=this.formatTime_(e);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))},cr.prototype.updateContent=function(e){};var ur,s=cr;function cr(e,t){u(this,cr);t=c(this,ur.call(this,e,t));return t.throttledUpdateContent=Ze(l(t,t.updateContent),25),t.on(e,"timeupdate",t.throttledUpdateContent),t}s.prototype.labelText_="Time",s.prototype.controlText_="Time",y.registerComponent("TimeDisplay",s);e(hr,dr=s),hr.prototype.buildCSSClass=function(){return"vjs-current-time"},hr.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},hr.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};var dr,_=hr;function hr(e,t){u(this,hr);t=c(this,dr.call(this,e,t));return t.on(e,"ended",t.handleEnded),t}_.prototype.labelText_="Current Time",_.prototype.controlText_="Current Time",y.registerComponent("CurrentTimeDisplay",_);e(fr,pr=s),fr.prototype.buildCSSClass=function(){return"vjs-duration"},fr.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))};var pr,i=fr;function fr(e,t){u(this,fr);t=c(this,pr.call(this,e,t));return t.on(e,"durationchange",t.updateContent),t.on(e,"loadedmetadata",t.throttledUpdateContent),t}i.prototype.labelText_="Duration",i.prototype.controlText_="Duration",y.registerComponent("DurationDisplay",i);e(gr,mr=y),gr.prototype.createEl=function(){return mr.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};var mr,n=gr;function gr(){return u(this,gr),c(this,mr.apply(this,arguments))}y.registerComponent("TimeDivider",n);e(vr,yr=s),vr.prototype.buildCSSClass=function(){return"vjs-remaining-time"},vr.prototype.formatTime_=function(e){return"-"+yr.prototype.formatTime_.call(this,e)},vr.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},vr.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)};var yr,t=vr;function vr(e,t){u(this,vr);t=c(this,yr.call(this,e,t));return t.on(e,"durationchange",t.throttledUpdateContent),t.on(e,"ended",t.handleEnded),t}t.prototype.labelText_="Remaining Time",t.prototype.controlText_="Remaining Time",y.registerComponent("RemainingTimeDisplay",t);e(br,_r=y),br.prototype.createEl=function(){var e=_r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=re("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},br.prototype.dispose=function(){this.contentEl_=null,_r.prototype.dispose.call(this)},br.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()};var _r,r=br;function br(e,t){u(this,br);e=c(this,_r.call(this,e,t));return e.updateShowing(),e.on(e.player(),"durationchange",e.updateShowing),e}y.registerComponent("LiveDisplay",r);e(Sr,Tr=y),Sr.prototype.enabled=function(){return this.enabled_},Sr.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},Sr.prototype.disable=function(){var e;this.enabled()&&(e=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},Sr.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.className=t.className+" vjs-slider",t=f({tabIndex:0},t),i=f({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),Tr.prototype.createEl.call(this,e,t,i)},Sr.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||St||e.preventDefault(),ge(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},Sr.prototype.handleMouseMove=function(e){},Sr.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;ye(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},Sr.prototype.update=function(){if(this.el_){var e,t=this.getPercent(),i=this.bar;if(i)return e=(100*(t="number"!=typeof t||t!=t||t<0||t===1/0?0:t)).toFixed(2)+"%",i=i.el().style,this.vertical()?i.height=e:i.width=e,t}},Sr.prototype.calculateDistance=function(e){e=be(this.el_,e);return this.vertical()?e.y:e.x},Sr.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Sr.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},Sr.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Sr.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},Sr.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};var Tr,_=Sr;function Sr(e,t){u(this,Sr);e=c(this,Tr.call(this,e,t));return e.bar=e.getChild(e.options_.barName),e.vertical(!!e.options_.vertical),e.enable(),e}y.registerComponent("Slider",_);e(Cr,kr=y),Cr.prototype.createEl=function(){return kr.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},Cr.prototype.dispose=function(){this.partEls_=null,kr.prototype.dispose.call(this)},Cr.prototype.update=function(e){function t(e,t){return 100*(1<=(e=e/t||0)?1:e)+"%"}var i=this.player_.buffered(),n=this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_;this.el_.style.width=t(r,n);for(var s=0;s<i.length;s++){var o=i.start(s),l=i.end(s),u=a[s];u||(u=this.el_.appendChild(re()),a[s]=u),u.style.left=t(o,r),u.style.width=t(l-o,r)}for(var c=a.length;c>i.length;c--)this.el_.removeChild(a[c-1]);a.length=i.length};var kr,i=Cr;function Cr(e,t){u(this,Cr);t=c(this,kr.call(this,e,t));return t.partEls_=[],t.on(e,"progress",t.update),t}y.registerComponent("LoadProgressBar",i);e(Er,wr=y),Er.prototype.createEl=function(){return wr.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},Er.prototype.update=function(e,t,i){var n,r=ve(this.el_),a=ve(this.player_.el()),t=e.width*t;a&&r&&(n=e.left-a.left+t,t=e.width-t+(a.right-e.right),n<(a=r.width/2)?a+=a-n:t<a&&(a=t),a<0?a=0:a>r.width&&(a=r.width),this.el_.style.right="-"+a+"px",ae(this.el_,i))};var wr,n=Er;function Er(){return u(this,Er),c(this,wr.apply(this,arguments))}y.registerComponent("TimeTooltip",n);e(Lr,Ar=y),Lr.prototype.createEl=function(){return Ar.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},Lr.prototype.update=function(i,n){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=lr(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),t=r.getChild("timeTooltip");t&&t.update(i,n,e)})};var Ar,s=Lr;function Lr(){return u(this,Lr),c(this,Ar.apply(this,arguments))}s.prototype.options_={children:[]},yt||vt||s.prototype.options_.children.push("timeTooltip"),y.registerComponent("PlayProgressBar",s);e(xr,Or=y),xr.prototype.createEl=function(){return Or.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},xr.prototype.update=function(t,i){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=n.player_.duration(),e=lr(i*e,e);n.el_.style.left=t.width*i+"px",n.getChild("timeTooltip").update(t,i,e)})};var Or,t=xr;function xr(e,t){u(this,xr);e=c(this,Or.call(this,e,t));return e.update=Ze(l(e,e.update),25),e}t.prototype.options_={children:["timeTooltip"]},y.registerComponent("MouseTimeDisplay",t);e(Ir,Pr=_),Ir.prototype.setEventHandlers_=function(){var e=this;this.update=Ze(l(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},Ir.prototype.createEl=function(){return Pr.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},Ir.prototype.update_=function(e,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[lr(e,i),lr(i,i)],"{1} of {2}")),this.bar.update(ve(this.el_),t)},Ir.prototype.update=function(e){var t=Pr.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t},Ir.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},Ir.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},Ir.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return 1<=e?1:e||0},Ir.prototype.handleMouseDown=function(e){Ee(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),Pr.prototype.handleMouseDown.call(this,e))},Ir.prototype.handleMouseMove=function(e){Ee(e)&&((e=this.calculateDistance(e)*this.player_.duration())===this.player_.duration()&&(e-=.1),this.player_.currentTime(e))},Ir.prototype.enable=function(){Pr.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},Ir.prototype.disable=function(){Pr.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},Ir.prototype.handleMouseUp=function(e){Pr.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Ft(this.player_.play())},Ir.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},Ir.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},Ir.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},Ir.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):Pr.prototype.handleKeyPress&&Pr.prototype.handleKeyPress.call(this,e)};var Pr,r=Ir;function Ir(e,t){u(this,Ir);e=c(this,Pr.call(this,e,t));return e.setEventHandlers_(),e}r.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},yt||vt||r.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),r.prototype.playerEvent="timeupdate",y.registerComponent("SeekBar",r);e(Dr,Ur=y),Dr.prototype.createEl=function(){return Ur.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},Dr.prototype.handleMouseMove=function(e){var t,i,n=this.getChild("seekBar");n&&(t=n.getChild("mouseTimeDisplay"),i=ve(n=n.el()),1<(n=be(n,e).x)?n=1:n<0&&(n=0),t&&t.update(i,n))},Dr.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},Dr.prototype.enabled=function(){return this.enabled_},Dr.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},Dr.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},Dr.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},Dr.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)};var Ur,i=Dr;function Dr(e,t){u(this,Dr);e=c(this,Ur.call(this,e,t));return e.handleMouseMove=Ze(l(e,e.handleMouseMove),25),e.throttledHandleMouseSeek=Ze(l(e,e.handleMouseSeek),25),e.enable(),e}i.prototype.options_={children:["seekBar"]},y.registerComponent("ProgressControl",i);e(Mr,Rr=Jn),Mr.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+Rr.prototype.buildCSSClass.call(this)},Mr.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},Mr.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};var Rr,n=Mr;function Mr(e,t){u(this,Mr);t=c(this,Rr.call(this,e,t));return t.on(e,"fullscreenchange",t.handleFullscreenChange),!1===d[Pt.fullscreenEnabled]&&t.disable(),t}n.prototype.controlText_="Fullscreen",y.registerComponent("FullscreenToggle",n);e(Nr,Br=y),Nr.prototype.createEl=function(){return Br.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};var Br,s=Nr;function Nr(){return u(this,Nr),c(this,Br.apply(this,arguments))}y.registerComponent("VolumeLevel",s);e(Fr,jr=_),Fr.prototype.createEl=function(){return jr.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},Fr.prototype.handleMouseDown=function(e){Ee(e)&&jr.prototype.handleMouseDown.call(this,e)},Fr.prototype.handleMouseMove=function(e){Ee(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},Fr.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},Fr.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},Fr.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},Fr.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},Fr.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},Fr.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},Fr.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})};var jr,t=Fr;function Fr(e,t){u(this,Fr);var i=c(this,jr.call(this,e,t));return i.on("slideractive",i.updateLastVolume_),i.on(e,"volumechange",i.updateARIAAttributes),e.ready(function(){return i.updateARIAAttributes()}),i}t.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},t.prototype.playerEvent="volumechange",y.registerComponent("VolumeBar",t);e(Hr,Vr=y),Hr.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),Vr.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},Hr.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},Hr.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},Hr.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)};var Vr,r=Hr;function Hr(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(u(this,Hr),n.vertical=n.vertical||!1,void 0!==n.volumeBar&&!$(n.volumeBar)||(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),c(this,Vr.call(this,e,n)));return t=r,(i=e).tech_&&!i.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}),r.throttledHandleMouseMove=Ze(l(r,r.handleMouseMove),25),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")}),r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")}),r}r.prototype.options_={children:["volumeBar"]},y.registerComponent("VolumeControl",r);e(qr,zr=Jn),qr.prototype.buildCSSClass=function(){return"vjs-mute-control "+zr.prototype.buildCSSClass.call(this)},qr.prototype.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();0===t?(this.player_.volume(i<.1?.1:i),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},qr.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},qr.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;yt&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)ue(this.el_,"vjs-vol-"+i);le(this.el_,"vjs-vol-"+t)},qr.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)};var zr,i=qr;function qr(e,t){u(this,qr);var i,n,t=c(this,zr.call(this,e,t));return i=t,(n=e).tech_&&!n.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),t.on(e,["loadstart","volumechange"],t.update),t}i.prototype.controlText_="Mute",y.registerComponent("MuteToggle",i);e(Gr,Wr=y),Gr.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},Gr.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},Gr.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},Gr.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),Wr.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})};var Wr,n=Gr;function Gr(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=(u(this,Gr),void 0!==t.inline?t.inline=t.inline:t.inline=!0,void 0!==t.volumeControl&&!$(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),c(this,Wr.call(this,e,t)));return t.on(e,["loadstart"],t.volumePanelState_),t.on(t.volumeControl,["slideractive"],t.sliderActive_),t.on(t.volumeControl,["sliderinactive"],t.sliderInactive_),t}n.prototype.options_={children:["muteToggle","volumeControl"]},y.registerComponent("VolumePanel",n);e($r,Xr=y),$r.prototype.addItem=function(t){this.addChild(t),t.on("click",l(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},$r.prototype.createEl=function(){var e=this.options_.contentElType||"ul",e=(this.contentEl_=re(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),Xr.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"}));return e.appendChild(this.contentEl_),He(e,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),e},$r.prototype.dispose=function(){this.contentEl_=null,Xr.prototype.dispose.call(this)},$r.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},$r.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},$r.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},$r.prototype.focus=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())};var Xr,Yr=$r;function $r(e,t){u(this,$r);e=c(this,Xr.call(this,e,t));return t&&(e.menuButton_=t.menuButton),e.focusedChild_=-1,e.on("keydown",e.handleKeyPress),e}y.registerComponent("Menu",Yr);e(S,Kr=y),S.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},S.prototype.createMenu=function(){var e,t=new Yr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e=re("li",{className:"vjs-menu-title",innerHTML:m(this.options_.title),tabIndex:-1}),this.hideThreshold_+=1,t.children_.unshift(e),se(e,t.contentEl())),this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)t.addItem(this.items[i]);return t},S.prototype.createItems=function(){},S.prototype.createEl=function(){return Kr.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},S.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Jn.prototype.buildCSSClass()+" "+Kr.prototype.buildCSSClass.call(this)},S.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Kr.prototype.buildCSSClass.call(this)},S.prototype.controlText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},S.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",l(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},S.prototype.focus=function(){this.menuButton_.focus()},S.prototype.blur=function(){this.menuButton_.blur()},S.prototype.handleFocus=function(){He(d,"keydown",l(this,this.handleKeyPress))},S.prototype.handleBlur=function(){ze(d,"keydown",l(this,this.handleKeyPress))},S.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},S.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},S.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),yt&&ie()||this.menu.focus())},S.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},S.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},S.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()};var Kr,s=S;function S(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(u(this,S),c(this,Kr.call(this,e,t))),t=(i.menuButton_=new Jn(e,t),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true"),Jn.prototype.buildCSSClass());return i.menuButton_.el_.className=i.buildCSSClass()+" "+t,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}y.registerComponent("MenuButton",s);e(Jr,Qr=s);var Qr,_=Jr;function Jr(e,t){u(this,Jr);var i=t.tracks,e=c(this,Qr.call(this,e,t));if(e.items.length<=1&&e.hide(),!i)return c(e);var n=l(e,e.update);return i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.player_.on("ready",n),e.player_.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}),e}y.registerComponent("TrackButton",_);e(ea,Zr=v),ea.prototype.createEl=function(e,t,i){return this.nonIconControl=!0,Zr.prototype.createEl.call(this,"li",f({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),i)},ea.prototype.handleClick=function(e){this.selected(!0)},ea.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};var Zr,t=ea;function ea(e,t){u(this,ea);e=c(this,Zr.call(this,e,t));return e.selectable=t.selectable,e.isSelected_=t.selected||!1,e.multiSelectable=t.multiSelectable,e.selected(e.isSelected_),e.selectable?e.multiSelectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitemradio"):e.el_.setAttribute("role","menuitem"),e}y.registerComponent("MenuItem",t);e(na,ta=t),na.prototype.handleClick=function(e){var t=this.track.kind,i=this.track.kinds,n=this.player_.textTracks(),i=i||[t];if(ta.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var a=n[r];a===this.track&&-1<i.indexOf(a.kind)?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled")}},na.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},na.prototype.handleSelectedLanguageChange=function(e){var t;"showing"!==this.track.mode||(t=this.player_.cache_.selectedLanguage)&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind})},na.prototype.dispose=function(){this.track=null,ta.prototype.dispose.call(this)};var ta,ia=na;function na(e,t){u(this,na);function i(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];o.handleTracksChange.apply(o,t)}function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];o.handleSelectedLanguageChange.apply(o,t)}var r,a=t.track,s=e.textTracks(),o=(t.label=a.label||a.language||"Unknown",t.selected="showing"===a.mode,c(this,ta.call(this,e,t)));o.track=a;return e.on(["loadstart","texttrackchange"],i),s.addEventListener("change",i),s.addEventListener("selectedlanguagechange",n),o.on("dispose",function(){e.off(["loadstart","texttrackchange"],i),s.removeEventListener("change",i),s.removeEventListener("selectedlanguagechange",n)}),void 0===s.onchange&&(r=void 0,o.on(["tap","click"],function(){if("object"!==st(h.Event))try{r=new h.Event("change")}catch(e){}r||(r=d.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(r)})),o.handleTracksChange(),o}y.registerComponent("TextTrackMenuItem",ia);e(sa,ra=ia),sa.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},sa.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})};var ra,aa=sa;function sa(e,t){return u(this,sa),t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,c(this,ra.call(this,e,t))}y.registerComponent("OffTextTrackMenuItem",aa);e(la,oa=_),la.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ia,i=void 0,n=(this.label_&&(i=this.label_+" off"),e.push(new aa(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1,this.player_.textTracks());Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a,s=n[r];-1<this.kinds_.indexOf(s.kind)&&((a=new t(this.player_,{track:s,selectable:!0,multiSelectable:!1})).addClass("vjs-"+s.kind+"-menu-item"),e.push(a))}return e};var oa,r=la;function la(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u(this,la),t.tracks=e.textTracks(),c(this,oa.call(this,e,t))}y.registerComponent("TextTrackButton",r);e(da,ua=t),da.prototype.handleClick=function(e){ua.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},da.prototype.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)};var ua,ca=da;function da(e,t){u(this,da);var i=t.track,n=t.cue,r=e.currentTime(),r=(t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=r&&r<n.endTime,c(this,ua.call(this,e,t)));return r.track=i,r.cue=n,i.addEventListener("cuechange",l(r,r.update)),r}y.registerComponent("ChaptersTrackMenuItem",ca);e(pa,ha=r),pa.prototype.buildCSSClass=function(){return"vjs-chapters-button "+ha.prototype.buildCSSClass.call(this)},pa.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+ha.prototype.buildWrapperCSSClass.call(this)},pa.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),ha.prototype.update.call(this)},pa.prototype.setTrack=function(e){var t;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=e,this.track_&&(this.track_.mode="hidden",(t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.addEventListener("load",this.updateHandler_)))},pa.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var i=e[t];if(i.kind===this.kind_)return i}},pa.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(m(this.kind_))},pa.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),ha.prototype.createMenu.call(this)},pa.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],r=new ca(this.player_,{track:this.track_,cue:r});e.push(r)}return e};var ha,i=pa;function pa(e,t,i){return u(this,pa),c(this,ha.call(this,e,t,i))}i.prototype.kind_="chapters",i.prototype.controlText_="Chapters",y.registerComponent("ChaptersButton",i);e(ma,fa=r),ma.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){i=!0;break}}i?this.disable():this.enable()},ma.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+fa.prototype.buildCSSClass.call(this)},ma.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+fa.prototype.buildWrapperCSSClass.call(this)};var fa,n=ma;function ma(e,t,i){u(this,ma);var t=c(this,fa.call(this,e,t,i)),n=e.textTracks(),r=l(t,t.handleTracksChange);return n.addEventListener("change",r),t.on("dispose",function(){n.removeEventListener("change",r)}),t}n.prototype.kind_="descriptions",n.prototype.controlText_="Descriptions",y.registerComponent("DescriptionsButton",n);e(ya,ga=r),ya.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+ga.prototype.buildCSSClass.call(this)},ya.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+ga.prototype.buildWrapperCSSClass.call(this)};var ga,v=ya;function ya(e,t,i){return u(this,ya),c(this,ga.call(this,e,t,i))}v.prototype.kind_="subtitles",v.prototype.controlText_="Subtitles",y.registerComponent("SubtitlesButton",v);e(ba,va=ia),ba.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()};var va,_a=ba;function ba(e,t){u(this,ba),t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem";e=c(this,va.call(this,e,t));return e.addClass("vjs-texttrack-settings"),e.controlText(", opens "+t.kind+" settings dialog"),e}y.registerComponent("CaptionSettingsMenuItem",_a);e(Sa,Ta=r),Sa.prototype.buildCSSClass=function(){return"vjs-captions-button "+Ta.prototype.buildCSSClass.call(this)},Sa.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+Ta.prototype.buildWrapperCSSClass.call(this)},Sa.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new _a(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),Ta.prototype.createItems.call(this,e)};var Ta,i=Sa;function Sa(e,t,i){return u(this,Sa),c(this,Ta.call(this,e,t,i))}i.prototype.kind_="captions",i.prototype.controlText_="Captions",y.registerComponent("CaptionsButton",i);e(wa,ka=ia),wa.prototype.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),ka.prototype.createEl.call(this,e,f({innerHTML:n+="</span>"},t),i)};var ka,Ca=wa;function wa(){return u(this,wa),c(this,ka.apply(this,arguments))}y.registerComponent("SubsCapsMenuItem",Ca);e(Aa,Ea=r),Aa.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+Ea.prototype.buildCSSClass.call(this)},Aa.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+Ea.prototype.buildWrapperCSSClass.call(this)},Aa.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new _a(this.player_,{kind:this.label_})),this.hideThreshold_+=1),Ea.prototype.createItems.call(this,e,Ca)};var Ea,n=Aa;function Aa(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=(u(this,Aa),c(this,Ea.call(this,e,t)));return t.label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(t.player_.language_)&&(t.label_="captions"),t.menuButton_.controlText(m(t.label_)),t}n.prototype.kinds_=["captions","subtitles"],n.prototype.controlText_="Subtitles",y.registerComponent("SubsCapsButton",n);e(xa,La=t),xa.prototype.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),La.prototype.createEl.call(this,e,f({innerHTML:n+="</span>"},t),i)},xa.prototype.handleClick=function(e){var t=this.player_.audioTracks();La.prototype.handleClick.call(this,e);for(var i=0;i<t.length;i++){var n=t[i];n.enabled=n===this.track}},xa.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)};var La,Oa=xa;function xa(e,t){u(this,xa);function i(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleTracksChange.apply(a,t)}var n=t.track,r=e.audioTracks(),a=(t.label=n.label||n.language||"Unknown",t.selected=n.enabled,c(this,La.call(this,e,t)));a.track=n,a.addClass("vjs-"+n.kind+"-menu-item");return r.addEventListener("change",i),a.on("dispose",function(){r.removeEventListener("change",i)}),a}y.registerComponent("AudioTrackMenuItem",Oa);e(Ia,Pa=_),Ia.prototype.buildCSSClass=function(){return"vjs-audio-button "+Pa.prototype.buildCSSClass.call(this)},Ia.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+Pa.prototype.buildWrapperCSSClass.call(this)},Ia.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new Oa(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e};var Pa,v=Ia;function Ia(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u(this,Ia),t.tracks=e.audioTracks(),c(this,Pa.call(this,e,t))}v.prototype.controlText_="Audio Track",y.registerComponent("AudioTrackButton",v);e(Ra,Ua=t),Ra.prototype.handleClick=function(e){Ua.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},Ra.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)};var Ua,Da=Ra;function Ra(e,t){u(this,Ra);var i=t.rate,n=parseFloat(i,10),t=(t.label=i,t.selected=1===n,t.selectable=!0,t.multiSelectable=!1,c(this,Ua.call(this,e,t)));return t.label=i,t.rate=n,t.on(e,"ratechange",t.update),t}Da.prototype.contentElType="button",y.registerComponent("PlaybackRateMenuItem",Da);e(Ba,Ma=s),Ba.prototype.createEl=function(){var e=Ma.prototype.createEl.call(this);return this.labelEl_=re("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},Ba.prototype.dispose=function(){this.labelEl_=null,Ma.prototype.dispose.call(this)},Ba.prototype.buildCSSClass=function(){return"vjs-playback-rate "+Ma.prototype.buildCSSClass.call(this)},Ba.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+Ma.prototype.buildWrapperCSSClass.call(this)},Ba.prototype.createMenu=function(){var e=new Yr(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;0<=i;i--)e.addChild(new Da(this.player(),{rate:t[i]+"x"}));return e},Ba.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},Ba.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},Ba.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},Ba.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},Ba.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},Ba.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};var Ma,i=Ba;function Ba(e,t){u(this,Ba);t=c(this,Ma.call(this,e,t));return t.updateVisibility(),t.updateLabel(),t.on(e,"loadstart",t.updateVisibility),t.on(e,"ratechange",t.updateLabel),t}i.prototype.controlText_="Playback Rate",y.registerComponent("PlaybackRateMenuButton",i);e(ja,Na=y),ja.prototype.buildCSSClass=function(){return"vjs-spacer "+Na.prototype.buildCSSClass.call(this)},ja.prototype.createEl=function(){return Na.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};var Na,r=ja;function ja(){return u(this,ja),c(this,Na.apply(this,arguments))}y.registerComponent("Spacer",r);e(Va,Fa=r),Va.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+Fa.prototype.buildCSSClass.call(this)},Va.prototype.createEl=function(){var e=Fa.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e};var Fa,n=Va;function Va(){return u(this,Va),c(this,Fa.apply(this,arguments))}y.registerComponent("CustomControlSpacer",n);e(za,Ha=y),za.prototype.createEl=function(){return Ha.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};var Ha,_=za;function za(){return u(this,za),c(this,Ha.apply(this,arguments))}_.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},y.registerComponent("ControlBar",_);e(Wa,qa=qt),Wa.prototype.buildCSSClass=function(){return"vjs-error-display "+qa.prototype.buildCSSClass.call(this)},Wa.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""};var qa,v=Wa;function Wa(e,t){u(this,Wa);t=c(this,qa.call(this,e,t));return t.on(e,"error",t.open),t}v.prototype.options_=g(qt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),y.registerComponent("ErrorDisplay",v);var Ga="vjs-text-track-settings",t=["#000","Black"],s=["#00F","Blue"],i=["#0FF","Cyan"],r=["#0F0","Green"],n=["#F0F","Magenta"],_=["#F00","Red"],v=["#FFF","White"],Xa=["#FF0","Yellow"],Ya=["1","Opaque"],$a=["0.5","Semi-Transparent"],k=["0","Transparent"],Ka={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[t,v,_,r,s,Xa,n,i]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ya,$a,k]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[v,t,_,r,s,Xa,n,i]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ya,$a]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[k,$a,Ya]}};function Qa(e,t){if((e=t?t(e):e)&&"none"!==e)return e}Ka.windowColor.options=Ka.backgroundColor.options;e(C,Ja=qt),C.prototype.dispose=function(){this.endDialog=null,Ja.prototype.dispose.call(this)},C.prototype.createElSelect_=function(e){var i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",r=Ka[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},C.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},C.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},C.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},C.prototype.createElColors_=function(){return re("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},C.prototype.createElFont_=function(){return re("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},C.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return re("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},C.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},C.prototype.label=function(){return this.localize("Caption Settings Dialog")},C.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},C.prototype.buildCSSClass=function(){return Ja.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},C.prototype.getValues=function(){var r=this;return function(i,n,e){var t=2<arguments.length&&void 0!==e?e:0;return V(i).reduce(function(e,t){return n(e,i[t],t)},t)}(Ka,function(e,t,i){n=r.$(t.selector),t=t.parser;var n=Qa(n.options[n.options.selectedIndex].value,t);return void 0!==n&&(e[i]=n),e},{})},C.prototype.setValues=function(s){var o=this;X(Ka,function(e,t){var i=o.$(e.selector),n=s[t],r=e.parser;if(n)for(var a=0;a<i.options.length;a++)if(Qa(i.options[a].value,r)===n){i.selectedIndex=a;break}})},C.prototype.setDefaults=function(){var i=this;X(Ka,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})},C.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(h.localStorage.getItem(Ga))}catch(e){p.warn(e)}e&&this.setValues(e)},C.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?h.localStorage.setItem(Ga,JSON.stringify(e)):h.localStorage.removeItem(Ga)}catch(e){p.warn(e)}}},C.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},C.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(d,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,e=e&&e.captionsButton;t?t.focus():e&&e.focus()};var Ja,v=C;function C(e,t){u(this,C),t.temporary=!1;var i=c(this,Ja.call(this,e,t));return i.updateDisplay=l(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=re("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),X(Ka,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}y.registerComponent("TextTrackSettings",v);e(es,Za=y),es.prototype.createEl=function(){return Za.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},es.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},es.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&ze(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null};var Za,t=es;function es(e,t){u(this,es);var i=t.ResizeObserver||h.ResizeObserver,n=g({createEl:!(i=null===t.ResizeObserver?!1:i),reportTouchActivity:!1},t),r=c(this,Za.call(this,e,n));return r.ResizeObserver=t.ResizeObserver||h.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=et(function(){r.resizeHandler()},100,!1,r),i?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(e.el())):(r.loadListener_=function(){r.el_&&r.el_.contentWindow&&He(r.el_.contentWindow,"resize",r.debouncedHandler_)},r.one("load",r.loadListener_)),r}y.registerComponent("ResizeManager",t);function ts(a){var t,e,i,s=a.el();s.resetSourceWatch_||(t={},e=as([a.el(),h.HTMLMediaElement.prototype,h.Element.prototype,rs],"innerHTML"),i=function(r){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=r.apply(s,t);return ns(a),n}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=i(t[e]))}),Object.defineProperty(s,"innerHTML",g(e,{set:i(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},a.one("sourceset",s.resetSourceWatch_))}var is,ns=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],t="";if(!i.length)return!1;for(var r=0;r<i.length;r++){var a=i[r].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(t=n[0]),e.triggerSourceset(t),!0)},rs=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=d.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=d.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",h.Element.prototype.appendChild.call(this,i),this.innerHTML}}),as=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},ss=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Jt(h.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return h.Element.prototype.setAttribute.call(this,"src",e),e}}),os=F(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),w=(e(E,is=b),E.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),E.disposeMediaElement(this.el_),this.options_=null,is.prototype.dispose.call(this)},E.prototype.setupSourcesetHandling_=function(){var i,n,t,r,a;(i=this).featuresSourceset&&!(n=i.el()).resetSourceset_&&(t=as([i.el(),h.HTMLMediaElement.prototype,ss],"src"),r=n.setAttribute,a=n.load,Object.defineProperty(n,"src",g(t,{set:function(e){e=t.set.call(n,e);return i.triggerSourceset(n.src),e}})),n.setAttribute=function(e,t){t=r.call(n,e,t);return/src/i.test(e)&&i.triggerSourceset(n.src),t},n.load=function(){var e=a.call(n);return ns(i)||(i.triggerSourceset(""),ts(i)),e},n.currentSrc?i.triggerSourceset(n.currentSrc):ns(i)||ts(i),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=a,n.setAttribute=r,Object.defineProperty(n,"src",t),n.resetSourceWatch_&&n.resetSourceWatch_()})},E.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){r=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&r.push({track:t,storedMode:t.mode})}}function i(){for(var e=0;e<r.length;e++){var t=r[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}n.removeEventListener("change",i)}var n=this.textTracks(),r=void 0;e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)});this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",i),n.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",i)})},E.prototype.overrideNative_=function(e,t){var i,n=this;t===this["featuresNative"+e+"Tracks"]&&(this[(i=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i))},E.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},E.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},E.prototype.proxyNativeTracksForType_=function(e){var n,t,r=this,e=Yi[e],a=this.el()[e.getterName],s=this[e.getterName]();this["featuresNative"+e.capitalName+"Tracks"]&&a&&a.addEventListener&&(t=function(){for(var e=[],t=0;t<s.length;t++){for(var i=!1,n=0;n<a.length;n++)if(a[n]===s[t]){i=!0;break}i||e.push(s[t])}for(;e.length;)s.removeTrack(e.shift())},this[e.getterName+"Listeners_"]=n={change:function(e){s.trigger({type:"change",target:s,currentTarget:s,srcElement:s})},addtrack:function(e){s.addTrack(e.track)},removetrack:function(e){s.removeTrack(e.track)}},Object.keys(n).forEach(function(t){var i=n[t];a.addEventListener(t,i),r.on("dispose",function(e){return a.removeEventListener(t,i)})}),this.on("loadstart",t),this.on("dispose",function(e){return r.off("loadstart",t)}))},E.prototype.proxyNativeTracks_=function(){var t=this;Yi.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},E.prototype.createEl=function(){var e,t=this.options_.tag;t&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(t?(e=t.cloneNode(!0),t.parentNode&&t.parentNode.insertBefore(e,t),E.disposeMediaElement(t),t=e):(t=d.createElement("video"),e=g({},this.options_.tag&&he(this.options_.tag)),Et&&!0===this.options_.nativeControlsForTouch||delete e.controls,de(t,f(e,{id:this.options_.techId,class:"vjs-tech"}))),t.playerId=this.options_.playerId),void 0!==this.options_.preload&&fe(t,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],n=0;n<i.length;n++){var r=i[n],a=this.options_[r];void 0!==a&&(a?fe(t,r,r):me(t,r),t[r]=a)}return t},E.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){var t,i,n;if(0===e.readyState)return t=!1,this.on("loadstart",i=function(){t=!0}),this.on("loadedmetadata",n=function(){t||this.trigger("loadstart")}),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")});var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},E.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){p(e,"Video is not ready. (Video.js)")}},E.prototype.duration=function(){var t=this;return this.el_.duration===1/0&&vt&&St&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},E.prototype.width=function(){return this.el_.offsetWidth},E.prototype.height=function(){return this.el_.offsetHeight},E.prototype.proxyWebkitFullscreen_=function(){var e,t,i=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},this.on("webkitbeginfullscreen",t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))}),this.on("dispose",function(){i.off("webkitbeginfullscreen",t),i.off("webkitendfullscreen",e)}))},E.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=h.navigator&&h.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},E.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},E.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},E.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},E.prototype.reset=function(){E.resetMediaElement(this.el_)},E.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},E.prototype.setControls=function(e){this.el_.controls=!!e},E.prototype.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):is.prototype.addTextTrack.call(this,e,t,i)},E.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return is.prototype.createRemoteTextTrack.call(this,e);var t=d.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},E.prototype.addRemoteTextTrack=function(e,t){e=is.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(e),e},E.prototype.removeRemoteTextTrack=function(e){if(is.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},E.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),h.performance&&"function"==typeof h.performance.now?e.creationTime=h.performance.now():h.performance&&h.performance.timing&&"number"==typeof h.performance.timing.navigationStart&&(e.creationTime=h.Date.now()-h.performance.timing.navigationStart),e},E);function E(e,t){u(this,E);var i=c(this,is.call(this,e,t)),t=e.source,n=!1;if(t&&(i.el_.currentSrc!==t.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(t):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var r=i.el_.childNodes,a=r.length,s=[];a--;){var o=r[a];"track"===o.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(o),i.remoteTextTracks().addTrack(o.track),i.textTracks().addTrack(o.track),n||i.el_.hasAttribute("crossorigin")||!ci(o.src)||(n=!0)):s.push(o))}for(var l=0;l<s.length;l++)i.el_.removeChild(s[l])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&n&&p.warn(j(os)),i.restoreMetadataTracksInIOSNativePlayer_(),(Et||gt||bt)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}ee()&&(w.TEST_VID=d.createElement("video"),(_=d.createElement("track")).kind="captions",_.srclang="en",_.label="English",w.TEST_VID.appendChild(_)),w.isSupported=function(){try{w.TEST_VID.volume=.5}catch(e){return!1}return!(!w.TEST_VID||!w.TEST_VID.canPlayType)},w.canPlayType=function(e){return w.TEST_VID.canPlayType(e)},w.canPlaySource=function(e,t){return w.canPlayType(e.type)},w.canControlVolume=function(){try{var e=w.TEST_VID.volume;return w.TEST_VID.volume=e/2+.1,e!==w.TEST_VID.volume}catch(e){return!1}},w.canMuteVolume=function(){try{var e=w.TEST_VID.muted;return w.TEST_VID.muted=!e,w.TEST_VID.muted?fe(w.TEST_VID,"muted","muted"):me(w.TEST_VID,"muted"),e!==w.TEST_VID.muted}catch(e){return!1}},w.canControlPlaybackRate=function(){if(vt&&St&&kt<58)return!1;try{var e=w.TEST_VID.playbackRate;return w.TEST_VID.playbackRate=e/2+.1,e!==w.TEST_VID.playbackRate}catch(e){return!1}},w.canOverrideAttributes=function(){try{function e(){}Object.defineProperty(d.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},w.supportsNativeTextTracks=function(){return wt||yt&&St},w.supportsNativeVideoTracks=function(){return!(!w.TEST_VID||!w.TEST_VID.videoTracks)},w.supportsNativeAudioTracks=function(){return!(!w.TEST_VID||!w.TEST_VID.audioTracks)},w.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],w.prototype.featuresVolumeControl=w.canControlVolume(),w.prototype.featuresMuteControl=w.canMuteVolume(),w.prototype.featuresPlaybackRate=w.canControlPlaybackRate(),w.prototype.featuresSourceset=w.canOverrideAttributes(),w.prototype.movingMediaElementInDOM=!yt,w.prototype.featuresFullscreenResize=!0,w.prototype.featuresProgressEvents=!0,w.prototype.featuresTimeupdateEvents=!0,w.prototype.featuresNativeTextTracks=w.supportsNativeTextTracks(),w.prototype.featuresNativeVideoTracks=w.supportsNativeVideoTracks(),w.prototype.featuresNativeAudioTracks=w.supportsNativeAudioTracks();var ls,us=w.TEST_VID&&w.TEST_VID.constructor.prototype.canPlayType,cs=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,ds=(w.patchCanPlayType=function(){4<=_t&&!Tt&&!St&&(w.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&cs.test(e)?"maybe":us.call(this,e)})},w.unpatchCanPlayType=function(){var e=w.TEST_VID.constructor.prototype.canPlayType;return w.TEST_VID.constructor.prototype.canPlayType=us,e},w.patchCanPlayType(),w.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},w.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){w.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){w.prototype["set"+m(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){w.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){w.prototype["set"+m(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){w.prototype[e]=function(){return this.el_[e]()}}),b.withSourceHandlers(w),w.nativeSourceHandler={},w.nativeSourceHandler.canPlayType=function(e){try{return w.TEST_VID.canPlayType(e)}catch(e){return""}},w.nativeSourceHandler.canHandleSource=function(e,t){return e.type?w.nativeSourceHandler.canPlayType(e.type):e.src?(e=Zt(e.src),w.nativeSourceHandler.canPlayType("video/"+e)):""},w.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},w.nativeSourceHandler.dispose=function(){},w.registerSourceHandler(w.nativeSourceHandler),b.registerTech("Html5",w),F(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "])),hs=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ps={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},fs=(e(A,ls=y),A.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),A.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),An[this.id()]=null,ls.prototype.dispose.call(this)},A.prototype.createEl=function(){var e,t,i=this.tag,n=void 0,r=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase(),s=(r?n=this.el_=i.parentNode:a||(n=this.el_=ls.prototype.createEl.call(this,"div")),he(i));if(a){for(n=this.el_=i,i=this.tag=d.createElement("video");n.children.length;)i.appendChild(n.firstChild);oe(n,"video-js")||le(n,"video-js"),n.appendChild(i),r=this.playerElIngest_=n,Object.keys(n).forEach(function(e){i[e]=n[e]})}i.setAttribute("tabindex","-1"),s.tabindex="-1",Ct&&(i.setAttribute("role","application"),s.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){a&&"class"===e||n.setAttribute(e,s[e]),a&&i.setAttribute(e,s[e])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",(i.player=n.player=this).addClass("vjs-paused"),!0!==h.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=Qe("vjs-styles-dimensions"),e=Ae(".vjs-styles-defaults"),(t=Ae("head")).insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)),this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=i.getElementsByTagName("a"),l=0;l<o.length;l++){var u=o.item(l);le(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!r&&i.parentNode.insertBefore(n,i),se(i,n),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=n},A.prototype.width=function(e){return this.dimension("width",e)},A.prototype.height=function(e){return this.dimension("height",e)},A.prototype.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?p.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},A.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},A.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},A.prototype.updateStyleEl_=function(){var e,t,i,n;!0!==h.VIDEOJS_NO_DYNAMIC_STYLE?(e=(e=((n=i=t=void 0)!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/e[0],t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300,i=void 0!==this.height_?this.height_:t*e,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Je(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+i+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*e+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,i="number"==typeof this.height_?this.height_:this.options_.height,(n=this.tech_&&this.tech_.el())&&(0<=t&&(n.width=t),0<=i&&(n.height=i)))},A.prototype.loadTech_=function(e,t){var i,n=this,r=(this.tech_&&this.unloadTech_(),m(e)),a=e.charAt(0).toLowerCase()+e.slice(1),s=("Html5"!==r&&this.tag&&(b.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1,{source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset}),a=(Ki.names.forEach(function(e){e=Ki[e];s[e.getterName]=n[e.privateName]}),f(s,this.options_[r]),f(s,this.options_[a]),f(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime),b.getTech(e));if(!a)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new a(s),this.tech_.ready(l(this,this.handleTechReady_),!0),t=this.textTracksJson_||[],i=this.tech_,t.forEach(function(e){var t=i.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),i.textTracks(),hs.forEach(function(e){n.on(n.tech_,e,n["handleTech"+m(e)+"_"])}),Object.keys(ps).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+ps[t]+"_"].bind(n),event:e}):n["handleTech"+ps[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||se(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},A.prototype.unloadTech_=function(){var e,t,i,n=this;Ki.names.forEach(function(e){e=Ki[e];n[e.privateName]=n[e.getterName]()}),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=Vt(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Vt))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},A.prototype.tech=function(e){return void 0===e&&p.warn(j(ds)),this.tech_},A.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},A.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},A.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},A.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},A.prototype.manualAutoplay_=function(t){var i=this;if(this.tech_&&"string"==typeof t){function e(){var t=i.muted(),e=(i.muted(!0),i.play());if(e&&e.then&&e.catch)return e.catch(function(e){i.muted(t)})}var n=void 0;if("any"===t?(n=this.play())&&n.then&&n.catch&&n.catch(e):n="muted"===t?e():this.play(),n&&n.then&&n.catch)return n.then(function(){i.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){i.trigger({type:"autoplay-failure",autoplay:t})})}},A.prototype.updateSourceCaches_=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=e,i="";if("string"!=typeof t&&(t=e.src,i=e.type),!/^blob:/.test(t)){this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return Dn(t)}(this,t)),this.cache_.source=g({},e,{src:t,type:i});for(var e=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),n=[],r=this.$$("source"),a=[],s=0;s<r.length;s++){var o=he(r[s]);n.push(o),o.src&&o.src===t&&a.push(o.src)}a.length&&!e.length?this.cache_.sources=n:e.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}},A.prototype.handleTechSourceset_=function(e){var i=this;this.changingSrc_||(this.updateSourceCaches_(e.src),e.src)||this.tech_.one(["sourceset","loadstart"],function e(t){"sourceset"!==t.type&&i.updateSourceCaches_(i.techGet_("currentSrc")),i.tech_.off(["sourceset","loadstart"],e)}),this.trigger({src:e.src,type:"sourceset"})},A.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},A.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},A.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},A.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},A.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},A.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},A.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},A.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},A.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},A.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(p.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},A.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},A.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},A.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},A.prototype.handleTechClick_=function(e){Ee(e)&&this.controls_&&(this.paused()?Ft(this.play()):this.pause())},A.prototype.handleTechDoubleClick_=function(t){!this.controls_||Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())},A.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},A.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},A.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},A.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},A.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},A.prototype.handleStageClick_=function(){this.reportUserActivity()},A.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},A.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},A.prototype.handleTechTextData_=function(){var e=1<arguments.length?arguments[1]:null;this.trigger("textdata",e)},A.prototype.getCache=function(){return this.cache_},A.prototype.techCall_=function(i,n){this.ready(function(){if(i in Pn)return e=this.middleware_,this.tech_[t=i](e.reduce(Un(t),n));if(i in In)return On(this.middleware_,this.tech_,i,n);var e,t;try{this.tech_&&this.tech_[i](n)}catch(e){throw p(e),e}},!0)},A.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in xn)return t=this.middleware_,i=this.tech_,t.reduceRight(Un(e),i[e]());if(e in In)return On(this.middleware_,this.tech_,e);var t,i;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw p("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw p("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw p(t),t}}},A.prototype.play=function(){var t=this,e=this.options_.Promise||h.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},A.prototype.play_=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ft;this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_?this.changingSrc_||!this.src()&&!this.currentSrc()?(this.playOnLoadstart_=function(){e.playOnLoadstart_=null,t(e.play())},this.one("loadstart",this.playOnLoadstart_)):t(this.techGet_("play")):this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,t(e.play())}))},A.prototype.pause=function(){this.techCall_("pause")},A.prototype.paused=function(){return!1!==this.techGet_("paused")},A.prototype.played=function(){return this.techGet_("played")||Ot(0,0)},A.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},A.prototype.currentTime=function(e){return void 0!==e?void this.techCall_("setCurrentTime",e=e<0?0:e):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},A.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},A.prototype.remainingTime=function(){return this.duration()-this.currentTime()},A.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},A.prototype.buffered=function(){var e=this.techGet_("buffered");return e=e&&e.length?e:Ot(0,0)},A.prototype.bufferedPercent=function(){return xt(this.buffered(),this.duration())},A.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},A.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},A.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},A.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},A.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},A.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},A.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},A.prototype.requestFullscreen=function(){var i=Pt;this.isFullscreen(!0),i.requestFullscreen?(He(d,i.fullscreenchange,l(this,function e(t){this.isFullscreen(d[i.fullscreenElement]),!1===this.isFullscreen()&&ze(d,i.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[i.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},A.prototype.exitFullscreen=function(){var e=Pt;this.isFullscreen(!1),e.requestFullscreen?d[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},A.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=d.documentElement.style.overflow,He(d,"keydown",l(this,this.fullWindowOnEscKey)),d.documentElement.style.overflow="hidden",le(d.body,"vjs-full-window"),this.trigger("enterFullWindow")},A.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},A.prototype.exitFullWindow=function(){this.isFullWindow=!1,ze(d,"keydown",this.fullWindowOnEscKey),d.documentElement.style.overflow=this.docOrigOverflow,ue(d.body,"vjs-full-window"),this.trigger("exitFullWindow")},A.prototype.canPlayType=function(e){for(var t=void 0,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],a=b.getTech(r);if(a=a||y.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else p.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},A.prototype.selectSource=function(e){function t(e,i,n){var r=void 0;return e.some(function(t){return i.some(function(e){if(r=n(t,e))return!0})}),r}function i(e,t){var i=e[0];if(e[1].canPlaySource(t,r.options_[i.toLowerCase()]))return{source:t,tech:i}}var n,r=this,a=this.options_.techOrder.map(function(e){return[e,b.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(p.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,a,(n=i,function(e,t){return n(t,e)})):t(a,e,i))||!1},A.prototype.src=function(e){var n=this;if(void 0===e)return this.cache_.src||"";var t,i,r,a=function t(e){var i;return e=Array.isArray(e)?(i=[],e.forEach(function(e){e=t(e),Array.isArray(e)?i=i.concat(e):Y(e)&&i.push(e)}),i):"string"==typeof e&&e.trim()?[Mn({src:e})]:Y(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Mn(e)]:[]}(e);a.length?(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),t=this,i=a[0],r=function(e,t){var i;if(n.middleware_=t,n.cache_.sources=a,n.updateSourceCaches_(e),n.src_(e))return 1<a.length?n.src(a.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void n.triggerReady());i=n.tech_,t.forEach(function(e){return e.setTech&&e.setTech(i)})},t.setTimeout(function(){return function i(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],a=arguments[3],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],o=5<arguments.length&&void 0!==arguments[5]&&arguments[5],t=e[0],l=e.slice(1);if("string"==typeof t)i(n,En[t],r,a,s,o);else if(t){var u=function(e,t){var i=An[e.id()],n=null;if(null==i)return n=t(e),An[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r],s=a[0],a=a[1];s===t&&(n=a)}return null===n&&(n=t(e),i.push([t,n])),n}(a,t);if(!u.setSource)return s.push(u),i(n,l,r,a,s,o);u.setSource(f({},n),function(e,t){if(e)return i(n,l,r,a,s,o);s.push(u),i(t,n.type===t.type?l:En[t.type],r,a,s,o)})}else l.length?i(n,l,r,a,s,o):o?r(n,s):i(n,En["*"],r,a,s,!0)}(i,En[i.type],r,t)},1)):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},A.prototype.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,m(t)!==m(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},A.prototype.load=function(){this.techCall_("load")},A.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},A.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},A.prototype.currentSource=function(){return this.cache_.source||{}},A.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},A.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},A.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},A.prototype.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t=void 0;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},A.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},A.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},A.prototype.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},A.prototype.handleTechPosterChange_=function(){var e;(!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster&&(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},A.prototype.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},A.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},A.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Bt(e),this.addClass("vjs-error"),p.error("(CODE:"+this.error_.code+" "+Bt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},A.prototype.reportUserActivity=function(e){this.userActivity_=!0},A.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},A.prototype.listenForUserActivity_=function(){var t=void 0,i=void 0,n=void 0,r=l(this,this.reportUserActivity),a=(this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,r())}),this.on("mouseup",function(e){r(),this.clearInterval(t)}),this.on("keydown",r),this.on("keyup",r),void 0);this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a),(e=this.options_.inactivityTimeout)<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},A.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},A.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},A.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},A.prototype.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},A.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},A.prototype.removeRemoteTextTrack=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;if(this.tech_)return this.tech_.removeRemoteTextTrack(void 0===e?arguments[0]:e)},A.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},A.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},A.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},A.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},A.prototype.languages=function(){return g(A.prototype.options_.languages,this.languages_)},A.prototype.toJSON=function(){var e=g(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=g(n)).player=void 0,e.tracks[i]=n}return e},A.prototype.createModal=function(e,t){var i=this,n=((t=t||{}).content=e||"",new qt(this,t));return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},A.getTagSettings=function(e){var t,i={sources:[],tracks:[]},n=he(e),r=n["data-setup"];if(oe(e,"vjs-fluid")&&(n.fluid=!0),null!==r&&(t=(r=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]}(r||"{}"))[0],r=r[1],t&&p.error(t),f(n,r)),f(i,n),e.hasChildNodes())for(var a=e.childNodes,s=0,o=a.length;s<o;s++){var l=a[s],u=l.nodeName.toLowerCase();"source"===u?i.sources.push(he(l)):"track"===u&&i.tracks.push(he(l))}return i},A.prototype.flexNotSupported_=function(){var e=d.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},A);function A(e,t,i){if(u(this,A),e.id=e.id||t.id||"vjs_video_"+xe++,(t=f(A.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var n=e.closest("[lang]");n&&n.getAttribute&&(t.language=n.getAttribute("lang"))}else for(var r=e;r&&1===r.nodeType;){if(he(r).hasOwnProperty("lang")){t.language=r.getAttribute("lang");break}r=r.parentNode}var a,n=c(this,ls.call(this,null,t,i));if(n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");n.tag=e,n.tagAttributes=e&&he(e),n.language(n.options_.language),t.languages?(a={},Object.getOwnPropertyNames(t.languages).forEach(function(e){a[e.toLowerCase()]=t.languages[e]}),n.languages_=a):n.languages_=A.prototype.options_.languages,n.cache_={},n.poster_=t.poster||"",n.controls_=!!t.controls,n.cache_.lastVolume=1,e.controls=!1,e.removeAttribute("controls"),e.hasAttribute("autoplay")?n.options_.autoplay=!0:n.autoplay(n.options_.autoplay),n.scrubbing_=!1,n.el_=n.createEl(),n.cache_.lastPlaybackRate=n.defaultPlaybackRate(),ht(n,{eventBusKey:"el_"});var s,i=g(n.options_),i=(t.plugins&&(s=t.plugins,Object.keys(s).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](s[e])},n)),n.options_.playerOptions=i,n.middleware_=[],n.initChildren(),n.isAudio("audio"===e.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),yt||n.addClass("vjs-workinghover"),A.players[n.id_]=n,R.split(".")[0]);return n.addClass("vjs-v"+i),n.userActive(!0),n.reportUserActivity(),n.one("play",n.listenForUserActivity_),n.on("fullscreenchange",n.handleFullscreenChange_),n.on("stageclick",n.handleStageClick_),n.changingSrc_=!1,n.playWaitingForReady_=!1,n.playOnLoadstart_=null,n}Ki.names.forEach(function(e){var t=Ki[e];fs.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),fs.players={};function ms(e){return Ss.hasOwnProperty(e)}function gs(e){return ms(e)?Ss[e]:void 0}function ys(e,t){e[Ts]=e[Ts]||{},e[Ts][t]=!0}function vs(e,t,i){i=(i?"before":"")+"pluginsetup",e.trigger(i,t),e.trigger(i+":"+t.name,t)}function _s(r,a){return a.prototype.name=r,function(){vs(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=new(Function.prototype.bind.apply(a,[null].concat([this].concat(t))));return this[r]=function(){return n},vs(this,n.getEventHash()),n}}var r=h.navigator,bs=(fs.prototype.options_={techOrder:b.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:r&&(r.languages&&r.languages[0]||r.userLanguage||r.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){fs.prototype[e]=function(){return this.techGet_(e)}}),hs.forEach(function(e){fs.prototype["handleTech"+m(e)+"_"]=function(){return this.trigger(e)}}),y.registerComponent("Player",fs),"plugin"),Ts="activePlugins_",Ss={},ks=(Cs.prototype.version=function(){return this.constructor.VERSION},Cs.prototype.getEventHash=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},Cs.prototype.trigger=function(e){return qe(this.eventBusEl_,e,this.getEventHash(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))},Cs.prototype.handleStateChanged=function(e){},Cs.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Ts][e]=!1,this.player=this.state=null,t[e]=_s(e,Ss[e])},Cs.isBasic=function(e){e="string"==typeof e?gs(e):e;return"function"==typeof e&&!Cs.prototype.isPrototypeOf(e.prototype)},Cs.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+(void 0===e?"undefined":st(e))+".");if(ms(e))p.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(fs.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===t?"undefined":st(t))+".");var i,n,r;return Ss[e]=t,e!==bs&&(Cs.isBasic(t)?fs.prototype[e]=(i=e,n=t,r=function(){vs(this,{name:i,plugin:n,instance:null},!0);var e=n.apply(this,arguments);return ys(this,i),vs(this,{name:i,plugin:n,instance:e}),e},Object.keys(n).forEach(function(e){r[e]=n[e]}),r):fs.prototype[e]=_s(e,t)),t},Cs.deregisterPlugin=function(e){if(e===bs)throw new Error("Cannot de-register base plugin.");ms(e)&&(delete Ss[e],delete fs.prototype[e])},Cs.getPlugins=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(Ss),i=void 0;return e.forEach(function(e){var t=gs(e);t&&((i=i||{})[e]=t)}),i},Cs.getPluginVersion=function(e){e=gs(e);return e&&e.VERSION||""},Cs);function Cs(e){if(u(this,Cs),this.constructor===Cs)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,ht(this),delete this.trigger,ft(this,this.constructor.defaultState),ys(e,this.name),this.dispose=l(this,this.dispose),e.on("dispose",this.dispose)}ks.getPlugin=gs,ks.BASE_PLUGIN_NAME=bs,ks.registerPlugin(bs,ks),fs.prototype.usingPlugin=function(e){return!!this[Ts]&&!0===this[Ts][e]},fs.prototype.hasPlugin=function(e){return!!ms(e)};function ws(e){return 0===e.indexOf("#")?e.slice(1):e}function L(e,t,i){if(r=L.getPlayer(e))return t&&p.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&r.ready(i),r;var n="string"==typeof e?Ae("#"+ws(e)):e;if(!te(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");d.body.contains(n)||p.warn("The element supplied is not included in the DOM"),t=t||{},L.hooks("beforesetup").forEach(function(e){e=e(n,g(t));Y(e)&&!Array.isArray(e)?t=g(t,e):p.error("please return an object in beforesetup hooks")});var r=new(y.getComponent("Player"))(n,t,i);return L.hooks("setup").forEach(function(e){return e(r)}),r}L.hooks_={},L.hooks=function(e,t){return L.hooks_[e]=L.hooks_[e]||[],t&&(L.hooks_[e]=L.hooks_[e].concat(t)),L.hooks_[e]},L.hook=function(e,t){L.hooks(e,t)},L.hookOnce=function(i,e){L.hooks(i,[].concat(e).map(function(t){return function e(){return L.removeHook(i,e),t.apply(void 0,arguments)}}))},L.removeHook=function(e,t){t=L.hooks(e).indexOf(t);return!(t<=-1||(L.hooks_[e]=L.hooks_[e].slice(),L.hooks_[e].splice(t,1),0))},!0!==h.VIDEOJS_NO_DYNAMIC_STYLE&&ee()&&!(s=Ae(".vjs-styles-defaults"))&&(s=Qe("vjs-styles-defaults"),(Xa=Ae("head"))&&Xa.insertBefore(s,Xa.firstChild),Je(s,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")),Ke(1,L),L.VERSION=R,L.options=fs.prototype.options_,L.getPlayers=function(){return fs.players},L.getPlayer=function(e){var t=fs.players,i=void 0;if("string"==typeof e){var n=ws(e),r=t[n];if(r)return r;i=Ae("#"+n)}else i=e;if(te(i)){r=i,n=r.player,e=r.playerId;if(n||t[e])return n||t[e]}},L.getAllPlayers=function(){return Object.keys(fs.players).map(function(e){return fs.players[e]}).filter(Boolean)},L.players=fs.players,L.getComponent=y.getComponent,L.registerComponent=function(e,t){b.isTech(t)&&p.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),y.registerComponent.call(y,e,t)},L.getTech=b.getTech,L.registerTech=b.registerTech,L.use=function(e,t){En[e]=En[e]||[],En[e].push(t)},Object.defineProperty(L,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(L.middleware,"TERMINATOR",{value:Ln,writeable:!1,enumerable:!0}),L.browser=H,L.TOUCH_ENABLED=Et,L.extend=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=function(){e.apply(this,arguments)},r={},i=("object"===(void 0===i?"undefined":st(i))?(i.constructor!==Object.prototype.constructor&&(n=i.constructor),r=i):"function"==typeof i&&(n=i),n),a=e;if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+(void 0===a?"undefined":st(a)));for(t in i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(i.super_=a),r)r.hasOwnProperty(t)&&(n.prototype[t]=r[t]);return n},L.mergeOptions=g,L.bind=l,L.registerPlugin=ks.registerPlugin,L.deregisterPlugin=ks.deregisterPlugin,L.plugin=function(e,t){return p.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ks.registerPlugin(e,t)},L.getPlugins=ks.getPlugins,L.getPlugin=ks.getPlugin,L.getPluginVersion=ks.getPluginVersion,L.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),L.options.languages=g(L.options.languages,((i={})[e]=t,i)),L.options.languages[e]},L.log=p,L.createTimeRange=L.createTimeRanges=Ot,L.formatTime=lr,L.setFormatTime=function(e){or=e},L.resetFormatTime=function(){or=sr},L.parseUrl=Qt,L.isCrossOrigin=ci,L.EventTarget=tt,L.on=He,L.one=We,L.off=ze,L.trigger=qe,L.xhr=Ii,L.TextTrack=Fi,L.AudioTrack=Si,L.VideoTrack=ki,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){L[e]=function(){return p.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Oe[e].apply(null,arguments)}}),L.computedStyle=K,L.dom=Oe,L.url=di;function Es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function As(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":st(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ls(e,t){if(e)return!t||"object"!==(void 0===t?"undefined":st(t))&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Os(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},n=t.length,r=void 0;n--;)""!==t[n]&&((r=/([^=]*)=(.*)/.exec(t[n]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),i[r[0]]=r[1]);return i}function xs(e){var t=e.attributes,e=e.segments,i={attributes:((i={NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(t.type||"static"),timeline:t.periodIndex,resolvedUri:"",targetDuration:t.duration,segments:e,mediaSequence:e.length?e[0].number:1};return t.contentProtection&&(i.contentProtection=t.contentProtection),i}function Ps(e){return!!e&&"object"===(void 0===e?"undefined":Ys(e))}function Is(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=zs.buildAbsoluteURL(h.location.href,e)),zs.buildAbsoluteURL(e,t))}function Us(e){var t=e.baseUrl,i=void 0===(i=e.source)?"":i,e=void 0===(e=e.range)?"":e,t={uri:i,resolvedUri:Is((void 0===t?"":t)||"",i)};return e&&(i=e.split("-"),e=parseInt(i[0],10),i=parseInt(i[1],10),t.byterange={length:i-e,offset:e}),t}function Ds(e,t){for(var i,n,r,a,s,o,l,u=e.type,c=void 0===u?"static":u,d=void 0===(u=e.minimumUpdatePeriod)?0:u,h=void 0===(u=e.media)?"":u,p=e.sourceDuration,f=void 0===(u=e.timescale)?1:u,m=void 0===(u=e.startNumber)?1:u,g=e.periodIndex,y=[],v=-1,_=0;_<t.length;_++){var b,T=t[_],S=T.d,k=T.r||0,T=T.t||0,T=(v<0&&(v=T),T&&v<T&&(v=T),void 0);T=k<0?(b=_+1)===t.length?"dynamic"===c&&0<d&&0<h.indexOf("$Number$")?(i=v,n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=e.start,l=e.minimumUpdatePeriod,Math.ceil((((n+r)/1e3+(void 0===l?0:l)-(a+(void 0===o?0:o)))*(void 0===s?1:s)-i)/S)):(p*f-v)/S:(t[b].t-v)/S:k+1;for(var C=m+y.length+T,w=m+y.length;w<C;)y.push({number:w,duration:S/f,time:v,timeline:g}),v+=S,w++}return y}function Rs(e){var s,t=void 0===(t=e.type)?"static":t,i=e.duration,n=void 0===(n=e.timescale)?1:n,r=e.sourceDuration,a=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}((a=Js[t](e)).start,a.end).map((s=e,function(e,t){var i=s.duration,n=s.timescale,r=s.periodIndex,a=s.startNumber;return{number:(void 0===a?1:a)+e,duration:i/(void 0===n?1:n),timeline:r,time:t*i}}));return"static"===t&&(a[e=a.length-1].duration=r-i/n*e),a}function Ms(e,t){return e.replace(Zs,(r=t,function(e,t,i,n){if("$$"===e)return"$";if(void 0===r[t])return e;e=""+r[t];return"RepresentationID"===t||(n=i?parseInt(n,10):1)<=e.length?e:new Array(n-e.length+1).join("0")+e}));var r}function Bs(e){var t=e.attributes,e=e.segmentInfo,i=void 0,n=void 0;return e.template?(n=eo,i=$s(t,e.template)):e.base?(n=ao,i=$s(t,e.base)):e.list&&(n=ro,i=$s(t,e.list)),n?(t=n(i,e.timeline),i.duration?(e=(n=i).duration,n=n.timescale,i.duration=e/(void 0===n?1:n)):t.length?i.duration=t.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):i.duration=0,{attributes:i,segments:t}):{attributes:t}}function Ns(e){return e.textContent.trim()}function js(e){if(!(e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e)))return 0;var t=(e=e.slice(1))[0],i=e[1],n=e[2],r=e[3],a=e[4],e=e[5];return 31536e3*parseFloat(t||0)+2592e3*parseFloat(i||0)+86400*parseFloat(n||0)+3600*parseFloat(r||0)+60*parseFloat(a||0)+parseFloat(e||0)}var Fs,Vs,Hs,zs=B(function(e,t){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=s.parseURL(e);if(n)return n.path=s.normalizePath(n.path),s.buildURLFromParts(n);throw new Error("Error trying to parse base URL.")}n=s.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=s.normalizePath(n.path),s.buildURLFromParts(n)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=a.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/");var r,e={scheme:t.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(e.netLoc=t.netLoc,"/"===n.path[0])||(n.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+n.path,e.path=s.normalizePath(r)):(e.path=t.path,n.params||(e.params=t.params,n.query||(e.query=t.query)))),null===e.path&&(e.path=i.alwaysNormalize?s.normalizePath(n.path):n.path),s.buildURLFromParts(e)},parseURL:function(e){e=i.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}),qs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n=(po.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},po.prototype.off=function(e,t){if(!this.listeners[e])return!1;t=this.listeners[e].indexOf(t);return this.listeners[e].splice(t,1),-1<t},po.prototype.trigger=function(e){var t,i=this.listeners[e],n=void 0,r=void 0;if(i)if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else for(t=Array.prototype.slice.call(arguments,1),r=i.length,n=0;n<r;++n)i[n].apply(this,t)},po.prototype.dispose=function(){this.listeners={}},po.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},po),Ws=(As(ho,Hs=n),ho.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},ho),Gs=(As(co,Vs=n),co.prototype.push=function(e){var t=void 0,i=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var n=0;n<this.customParsers.length;n++)if(this.customParsers[n].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void this.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void this.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void this.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){var r,a,i={type:"tag",tagType:"map"};t[1]&&((a=Os(t[1])).URI&&(i.uri=a.URI),a.BYTERANGE&&(r=(a=a.BYTERANGE.split("@"))[0],a=a[1],i.byterange={},r&&(i.byterange.length=parseInt(r,10)),a&&(i.byterange.offset=parseInt(a,10)))),this.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))i={type:"tag",tagType:"stream-inf"},t[1]&&(i.attributes=Os(t[1]),i.attributes.RESOLUTION&&(r={},(a=i.attributes.RESOLUTION.split("x"))[0]&&(r.width=parseInt(a[0],10)),a[1]&&(r.height=parseInt(a[1],10)),i.attributes.RESOLUTION=r),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=Os(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(t=/^#EXT-X-DISCONTINUITY/.exec(e)))return(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void this.trigger("data",i)):(t=/^#EXT-X-KEY:?(.*)$/.exec(e))?(i={type:"tag",tagType:"key"},t[1]&&(i.attributes=Os(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i)):(t=/^#EXT-X-START:?(.*)$/.exec(e))?(i={type:"tag",tagType:"start"},t[1]&&(i.attributes=Os(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i)):(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i)):(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i)):(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i)):void this.trigger("data",{type:"tag",data:e.slice(4)});this.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},co.prototype.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},co),Xs=(As(uo,Fs=n),uo.prototype.push=function(e){this.lineStream.push(e)},uo.prototype.end=function(){this.lineStream.push("\n")},uo.prototype.addParser=function(e){this.parseStream.addParser(e)},uo),Ys="function"==typeof Symbol&&"symbol"===st(Symbol.iterator)?function(e){return void 0===e?"undefined":st(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":st(e)},$s=function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(t,i){return Object.keys(i).forEach(function(e){Array.isArray(t[e])&&Array.isArray(i[e])?t[e]=t[e].concat(i[e]):Ps(t[e])&&Ps(i[e])?t[e]=n(t[e],i[e]):t[e]=i[e]}),t},{})},Ks=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},Qs=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},Js={static:function(e){var t=e.duration,i=e.timescale,e=e.sourceDuration;return{start:0,end:Math.ceil(e/(t/(void 0===i?1:i)))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,r=void 0===r?1:r,a=e.duration,s=e.start,o=e.minimumUpdatePeriod,e=e.timeShiftBufferDepth,e=void 0===e?1/0:e,t=(t+i)/1e3,i=n+(void 0===s?0:s),n=Math.ceil((t+(void 0===o?0:o)-i)*r/a),s=Math.floor((t-i-e)*r/a),o=Math.floor((t-i)*r/a);return{start:Math.max(0,s),end:Math.min(n,o)}}},Zs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,eo=function(i,e){var n={RepresentationID:i.id,Bandwidth:i.bandwidth||0},t=i.initialization,t=void 0===t?{sourceURL:"",range:""}:t,r=Us({baseUrl:i.baseUrl,source:Ms(t.sourceURL,n),range:t.range}),t=e;return((e=i).duration||t?e.duration?Rs(e):Ds(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]).map(function(e){n.Number=e.number,n.Time=e.time;var t=Ms(i.media||"",n);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:Is(i.baseUrl||"",t),map:r,number:e.number}})},to="INVALID_NUMBER_OF_PERIOD",io="DASH_EMPTY_MANIFEST",no="DASH_INVALID_XML",ro=function(n,e){var t=n.duration,i=n.segmentUrls,i=void 0===i?[]:i;if(!t&&!e||t&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");var r=i.map(function(e){return e=e,i=n.baseUrl,t=n.initialization,t=Us({baseUrl:i,source:(t=void 0===t?{}:t).sourceURL,range:t.range}),(i=Us({baseUrl:i,source:e.media,range:e.mediaRange})).map=t,i;var t,i}),i=void 0;return t&&(i=Rs(n)),(i=e?Ds(n,e):i).map(function(e,t){if(r[t])return(t=r[t]).timeline=e.timeline,t.duration=e.duration,t.number=e.number,t}).filter(function(e){return e})},ao=function(e){var t=e.baseUrl,i=e.initialization,i=void 0===i?{}:i,n=e.sourceDuration,r=e.timescale,r=void 0===r?1:r,a=e.indexRange,a=void 0===a?"":a,s=e.duration;if(!t)throw new Error("NO_BASE_URL");i=Us({baseUrl:t,source:i.sourceURL,range:i.range}),t=Us({baseUrl:t,source:t,range:a});return t.map=i,s?(a=Rs(e)).length&&(t.duration=a[0].duration,t.timeline=a[0].timeline):n&&(t.duration=n/r,t.timeline=0),t.number=0,[t]},so=function(e,t){return Qs(e.childNodes).filter(function(e){return e.tagName===t})},oo={mediaPresentationDuration:js,availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=e)&&(e+="Z"),Date.parse(e)/1e3},minimumUpdatePeriod:js,timeShiftBufferDepth:js,start:js,width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?js(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},lo=function(e){return e&&e.attributes?Qs(e.attributes).reduce(function(e,t){var i=oo[t.name]||oo.DEFAULT;return e[t.name]=i(t.value),e},{}):{}};function uo(){Es(this,uo);var e=Ls(this,Fs.call(this)),r=(e.lineStream=new Ws,e.parseStream=new Gs,e.lineStream.pipe(e.parseStream),e),a=[],s={},o=void 0,l=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var i=void 0,n=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((s.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((s.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(l.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):l=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){o={},t.uri&&(o.uri=t.uri),t.byterange&&(o.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(s.attributes||(s.attributes={}),qs(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var e;this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME?((e=this.manifest.mediaGroups[t.attributes.TYPE])[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},i=e[t.attributes["GROUP-ID"]],(n={default:/yes/i.test(t.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),i[t.attributes.NAME]=n):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data}}[t.tagType]||function(){}).call(r)},uri:function(){s.uri=t.uri,a.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=c,o&&(s.map=o),s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)}),e}function co(){Es(this,co);var e=Ls(this,Vs.call(this));return e.customParsers=[],e}function ho(){Es(this,ho);var e=Ls(this,Hs.call(this));return e.buffer="",e}function po(){Es(this,po),this.listeners={}}function fo(e){if(""===e)throw new Error(io);if(!(e=(e=(new h.DOMParser).parseFromString(e,"application/xml"))&&"MPD"===e.documentElement.tagName?e.documentElement:null)||0<e.getElementsByTagName("parsererror").length)throw new Error(no);return e}function mo(e,t){if(!(e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.manifestUri,i=void 0===i?"":i,n=t.NOW,n=void 0===n?Date.now():n,t=t.clientOffset,t=void 0===t?0:t,r=so(e,"Period");if(1!==r.length)throw new Error(to);var a,s,o=lo(e),i=Po([i],so(e,"BaseURL"));return o.sourceDuration=o.mediaPresentationDuration||0,o.NOW=n,o.clientOffset=t,Ks(r.map((a=o,s=i,function(e,t){var i=Po(s,so(e,"BaseURL")),n=lo(e),n=$s(a,n,{periodIndex:t}),t=so(e,"AdaptationSet"),e=Io(e);return Ks(t.map(Uo(n,i,e)))})))}(fo(e),t).map(Bs)).length)return{};var i=(t=e[0].attributes).sourceDuration,t=void 0===(t=t.minimumUpdatePeriod)?0:t,n=e.filter(function(e){e=e.attributes;return"video/mp4"===e.mimeType||"video"===e.contentType}).map(xs),r=e.filter(function(e){e=e.attributes;return"audio/mp4"===e.mimeType||"audio"===e.contentType}),e=e.filter(function(e){e=e.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType}),a={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((a={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},a.SUBTITLES={},a),uri:"",duration:i,playlists:n,minimumUpdatePeriod:1e3*t};return r.length&&(a.mediaGroups.AUDIO.audio=r.reduce(function(e,t){var i=t.attributes.role&&t.attributes.role.value||"main",n=t.attributes.lang||"",r="main";return e[r=n?t.attributes.lang+" ("+i+")":r]&&e[r].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[r]={language:n,autoselect:!0,default:"main"===i,playlists:[(r=t.attributes,n=t.segments,t={attributes:((i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1},r.contentProtection&&(t.contentProtection=r.contentProtection),t)],uri:""}),e},{})),e.length&&(a.mediaGroups.SUBTITLES.subs=e.reduce(function(e,t){var i,n=t.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[(n=t.attributes,void 0===(t=t.segments)&&(t=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:((i={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:t,mediaSequence:t.length?t[0].number:1})],uri:""}),e},{})),a}var go,yo,vo,O,_o,bo,To,So,ko,Co,wo,Eo,Ao,Lo,Oo,xo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Po=function(e,i){return i.length?Ks(e.map(function(t){return i.map(function(e){return Is(t,Ns(e))})})):e},Io=function(e){var t=so(e,"SegmentTemplate")[0],i=so(e,"SegmentList")[0],n=i&&so(i,"SegmentURL").map(function(e){return $s({tag:"SegmentURL"},lo(e))}),e=so(e,"SegmentBase")[0],r=i||t,r=r&&so(r,"SegmentTimeline")[0],a=i||e||t,a=a&&so(a,"Initialization")[0],t=t&&lo(t),s=(t&&a?t.initialization=a&&lo(a):t&&t.initialization&&(t.initialization={sourceURL:t.initialization}),{template:t,timeline:r&&so(r,"S").map(function(e){return lo(e)}),list:i&&$s(lo(i),{segmentUrls:n,initialization:lo(a)}),base:e&&$s(lo(e),{initialization:lo(a)})});return Object.keys(s).forEach(function(e){s[e]||delete s[e]}),s},Uo=function(o,l,u){return function(e){var t=lo(e),i=Po(l,so(e,"BaseURL")),n=so(e,"Role")[0],n={role:lo(n)},t=$s(o,t,n),n=so(e,"ContentProtection").reduce(function(e,t){var n,i=lo(t),r=xo[i.schemeIdUri];return r&&(e[r]={attributes:i},(i=so(t,"cenc:pssh")[0])&&(t=(n=Ns(i))&&function(){for(var e=h.atob(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(),e[r].pssh=t)),e},{});Object.keys(n).length&&(t=$s(t,{contentProtection:n}));var r,a,s,n=Io(e),e=so(e,"Representation"),n=$s(u,n);return Ks(e.map((r=t,a=i,s=n,function(e){var t=so(e,"BaseURL"),t=Po(a,t),i=$s(r,lo(e)),n=Io(e);return t.map(function(e){return{segmentInfo:$s(s,n),attributes:$s(i,{baseUrl:e})}})})))}},i={toUnsigned:function(e){return e>>>0}},k=Object.freeze({default:i,__moduleExports:i,toUnsigned:i.toUnsigned}),Do=(k&&i).toUnsigned,Ro={findBox:go=function(e,t){var i,n,r,a=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=Do(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),r=yo(e.subarray(i+4,i+8)),n=1<n?i+n:e.byteLength,r===t[0]&&(1===t.length?a.push(e.subarray(i+8,n)):(r=go(e.subarray(i+8,n),t.slice(1))).length&&(a=a.concat(r))),i=n;return a},parseType:yo=function(e){var t="";return(t=(t=(t+=String.fromCharCode(e[0]))+String.fromCharCode(e[1]))+String.fromCharCode(e[2]))+String.fromCharCode(e[3])},timescale:function(e){return go(e,["moov","trak"]).reduce(function(e,t){var i,n;return(n=go(t,["tkhd"])[0])?(i=n[0],n=Do(n[i=0===i?12:20]<<24|n[1+i]<<16|n[2+i]<<8|n[3+i]),(t=go(t,["mdia","mdhd"])[0])?(i=0===t[0]?12:20,e[n]=Do(t[i]<<24|t[1+i]<<16|t[2+i]<<8|t[3+i]),e):null):null},{})},startTime:function(i,e){e=go(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return go(t,["tfhd"]).map(function(e){e=Do(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),e=i[e]||9e4;return(go(t,["tfdt"]).map(function(e){var t=e[0],i=Do(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);return i=1===t?(i*=Math.pow(2,32))+Do(e[8]<<24|e[9]<<16|e[10]<<8|e[11]):i})[0]||1/0)/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},videoTrackIds:function(e){var e=go(e,["moov","trak"]),n=[];return e.forEach(function(e){var t=go(e,["mdia","hdlr"]),i=go(e,["tkhd"]);t.forEach(function(e,t){var e=yo(e.subarray(8,12)),t=i[t];"vide"===e&&(t=0===(e=new DataView(t.buffer,t.byteOffset,t.byteLength)).getUint8(0)?e.getUint32(12):e.getUint32(20),n.push(t))})}),n}},Mo=Math.pow(2,32)-1;if(O={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var Bo in O)O.hasOwnProperty(Bo)&&(O[Bo]=[Bo.charCodeAt(0),Bo.charCodeAt(1),Bo.charCodeAt(2),Bo.charCodeAt(3)]);_o=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),To=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),bo=new Uint8Array([0,0,0,1]),$a=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ya=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),So={video:$a,audio:Ya},wo=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Co=new Uint8Array([0,0,0,0,0,0,0,0]),Eo=new Uint8Array([0,0,0,0,0,0,0,0]),Ao=Eo,Lo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Oo=Eo,ko=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}function No(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){return!!a[e]&&(t=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(t,1),-1<t)},this.trigger=function(e){var t,i,n,r;if(t=a[e])if(2===arguments.length)for(n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=t.length,i=0;i<n;++i)t[i].apply(this,r)}},this.dispose=function(){a={}}}}function jo(){jo.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new P(0,0),new P(0,1),new P(1,0),new P(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)}function Fo(e){return null===e?"":(e=fl[e]||e,String.fromCharCode(e))}function Vo(){for(var e=[],t=15;t--;)e.push("");return e}function Ho(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e}function zo(e){var t,i;zo.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===i&&(i=e.dts),e.dts=Ho(e.dts,i),e.pts=Ho(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.discontinuity=function(){t=i=void 0}}var qo,x=function(e){for(var t,i=[],n=0,r=1;r<arguments.length;r++)i.push(arguments[r]);for(r=i.length;r--;)n+=i[r].byteLength;for(t=new Uint8Array(n+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),r=0,n=8;r<i.length;r++)t.set(i[r],n),n+=i[r].byteLength;return t},Wo=function(){return x(O.dinf,x(O.dref,wo))},Go=function(e){return x(O.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},Xo=function(e){return x(O.hdlr,So[e])},Yo=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),x(O.mdhd,t)},$o=function(e){return x(O.mdia,Yo(e),Xo(e.type),Qo(e))},Ko=function(e){return x(O.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},Qo=function(e){return x(O.minf,"video"===e.type?x(O.vmhd,ko):x(O.smhd,Co),Wo(),tl(e))},Jo=function(e){for(var t=e.length,i=[];t--;)i[t]=ll(e[t]);return x.apply(null,[O.mvex].concat(i))},Zo=function(e){e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return x(O.mvhd,e)},el=function(e){for(var t,i=e.samples||[],n=new Uint8Array(4+i.length),r=0;r<i.length;r++)t=i[r].flags,n[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return x(O.sdtp,n)},tl=function(e){return x(O.stbl,il(e),x(O.stts,Oo),x(O.stsc,Ao),x(O.stsz,Lo),x(O.stco,Eo))},il=function(e){return x(O.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?nl:rl)(e))},nl=function(e){for(var t=e.sps||[],i=e.pps||[],n=[],r=[],a=0;a<t.length;a++)n.push((65280&t[a].byteLength)>>>8),n.push(255&t[a].byteLength),n=n.concat(Array.prototype.slice.call(t[a]));for(a=0;a<i.length;a++)r.push((65280&i[a].byteLength)>>>8),r.push(255&i[a].byteLength),r=r.concat(Array.prototype.slice.call(i[a]));return x(O.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),x(O.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([t.length]).concat(n).concat([i.length]).concat(r))),x(O.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},rl=function(e){return x(O.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),Go(e))},al=function(e){e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return x(O.tkhd,e)},sl=function(e){var t,i=x(O.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),n=Math.floor(e.baseMediaDecodeTime/(1+Mo)),r=Math.floor(e.baseMediaDecodeTime%(1+Mo)),n=x(O.tfdt,new Uint8Array([1,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===e.type?(t=hl(e,92),x(O.traf,i,n,t)):(r=el(e),t=hl(e,r.length+92),x(O.traf,i,n,t,r))},ol=function(e){return e.duration=e.duration||4294967295,x(O.trak,al(e),$o(e))},ll=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),x(O.trex,t)},ul=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},cl=function(e,t){var i,n,r,a;for(t+=20+16*(n=e.samples||[]).length,i=ul(n,t),a=0;a<n.length;a++)r=n[a],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return x(O.trun,new Uint8Array(i))},dl=function(e,t){var i,n,r,a;for(t+=20+8*(n=e.samples||[]).length,i=ul(n,t),a=0;a<n.length;a++)r=n[a],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return x(O.trun,new Uint8Array(i))},hl=function(e,t){return("audio"===e.type?dl:cl)(e,t)},v={ftyp:vo=function(){return x(O.ftyp,_o,bo,_o,To)},mdat:function(e){return x(O.mdat,e)},moof:function(e,t){for(var i=[],n=t.length;n--;)i[n]=sl(t[n]);return x.apply(null,[O.moof,Ko(e)].concat(i))},moov:qo=function(e){for(var t=e.length,i=[];t--;)i[t]=ol(e[t]);return x.apply(null,[O.moov,Zo(4294967295)].concat(i).concat(Jo(e)))},initSegment:function(e){var t,i=vo(),e=qo(e);return(t=new Uint8Array(i.byteLength+e.byteLength)).set(i),t.set(e,i.byteLength),t}},t=Object.freeze({default:v,__moduleExports:v,ftyp:v.ftyp,mdat:v.mdat,moof:v.moof,moov:v.moov,initSegment:v.initSegment}),_=(No.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},No.prototype.push=function(e){this.trigger("data",e)},No.prototype.flush=function(e){this.trigger("done",e)},No),r=Object.freeze({default:_,__moduleExports:_}),Xa={groupNalsIntoFrames:function(e){for(var t,i=[],n=[],r=i.byteLength=0;r<e.length;r++)"access_unit_delimiter_rbsp"===(t=e[r]).nalUnitType?(i.length&&(i.duration=t.dts-i.dts,n.push(i)),(i=[t]).byteLength=t.data.byteLength,i.pts=t.pts,i.dts=t.dts):("slice_layer_without_partitioning_rbsp_idr"===t.nalUnitType&&(i.keyFrame=!0),i.duration=t.dts-i.dts,i.byteLength+=t.data.byteLength,i.push(t));return n.length&&(!i.duration||i.duration<=0)&&(i.duration=n[n.length-1].duration),n.push(i),n},groupFramesIntoGops:function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){for(var i,n,r,a,s=t||0,o=[],l=0;l<e.length;l++)for(n=e[l],i=0;i<n.length;i++)r=n[i],a=void 0,(a={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=s,a.compositionTimeOffset=r.pts-r.dts,a.duration=r.duration,a.size=4*r.length,a.size+=r.byteLength,r.keyFrame&&(a.flags.dependsOn=2,a.flags.isNonSyncSample=0),s+=(r=a).size,o.push(r);return o},concatenateNalData:function(e){for(var t,i,n,r,a,s=0,o=e.byteLength,l=e.nalCount,u=new Uint8Array(o+4*l),c=new DataView(u.buffer),d=0;d<e.length;d++)for(n=e[d],t=0;t<n.length;t++)for(r=n[t],i=0;i<r.length;i++)a=r[i],c.setUint32(s,a.data.byteLength),u.set(a.data,s+=4),s+=a.data.byteLength;return u}},s=Object.freeze({default:Xa,__moduleExports:Xa,groupNalsIntoFrames:Xa.groupNalsIntoFrames,groupFramesIntoGops:Xa.groupFramesIntoGops,extendFirstKeyFrame:Xa.extendFirstKeyFrame,generateSampleTable:Xa.generateSampleTable,concatenateNalData:Xa.concatenateNalData}),H={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=i,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/9e4,t=Math.floor(t)),t},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}},Si=Object.freeze({default:H,__moduleExports:H,clearDtsInfo:H.clearDtsInfo,calculateTrackBaseMediaDecodeTime:H.calculateTrackBaseMediaDecodeTime,collectDtsInfo:H.collectDtsInfo}),ki={parseSei:function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,r=n=0}return i},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var i,n,r,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s},discardEmulationPreventionBytes:function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,a=new Uint8Array(r),s=0,n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a},USER_DATA_REGISTERED_ITU_T_T35:4},di=Object.freeze({default:ki,__moduleExports:ki,parseSei:ki.parseSei,parseUserData:ki.parseUserData,parseCaptionPackets:ki.parseCaptionPackets,discardEmulationPreventionBytes:ki.discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:ki.USER_DATA_REGISTERED_ITU_T_T35}),k=r&&_,pl=di&&ki,fl=((jo.prototype=new k).push=function(e){var t;if("sei_rbsp"===e.nalUnitType&&(t=pl.parseSei(e.escapedRBSP)).payloadType===pl.USER_DATA_REGISTERED_ITU_T_T35&&(t=pl.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));t=pl.parseCaptionPackets(e.pts,t),this.captionPackets_=this.captionPackets_.concat(t),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},jo.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},jo.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},jo.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},jo.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},jo.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496}),ml=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],P=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;(t=32639&e.ccData)!==this.lastControlCode_?(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,n=255&t,t!==this.PADDING_&&(t===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":t===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),a=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=a,this.startPts_=e.pts):t===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):t===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):t===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):t===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):t===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):t===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=Vo()):t===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Vo():t===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Vo()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(i,n)?(r=Fo((i=(3&i)<<8)|n),this[this.mode_](e.pts,r),this.column_++):this.isExtCharacter(i,n)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=Fo((i=(3&i)<<8)|n),this[this.mode_](e.pts,r),this.column_++):this.isMidRowCode(i,n)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&n)&&this.addFormatting(e.pts,["i"]),1==(1&n)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(i,n)?this.column_+=3&n:this.isPAC(i,n)?(a=ml.indexOf(7968&t),"rollUp"===this.mode_&&this.setRollUp(e.pts,a),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(i)&&(0===n&&(n=null),r=Fo(i),r+=Fo(n),this[this.mode_](e.pts,r),this.column_+=r.length))):this.lastControlCode_=null}},i=(P.prototype=new k,P.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},P.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Vo(),this.nonDisplayed_=Vo(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},P.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},P.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},P.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},P.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},P.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},P.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},P.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},P.prototype.isNormalChar=function(e){return 32<=e&&e<=127},P.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Vo(),this.displayed_=Vo()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},P.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);t=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,t)},P.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},P.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=i+=t},P.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t},P.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},P.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t},{CaptionStream:jo,Cea608Stream:P}),$a=Object.freeze({default:i,__moduleExports:i,CaptionStream:i.CaptionStream,Cea608Stream:i.Cea608Stream}),Ya={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},r=Object.freeze({default:Ya,__moduleExports:Ya,H264_STREAM_TYPE:Ya.H264_STREAM_TYPE,ADTS_STREAM_TYPE:Ya.ADTS_STREAM_TYPE,METADATA_STREAM_TYPE:Ya.METADATA_STREAM_TYPE});zo.prototype=new k;function gl(e,t,i){for(var n="",r=t;r<i;r++)n+="%"+("00"+e[r].toString(16)).slice(-2);return n}function yl(e,t,i){return decodeURIComponent(gl(e,t,i))}function vl(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var _l,_={TimestampRolloverStream:zo,handleRollover:Ho},di=Object.freeze({default:_,__moduleExports:_,TimestampRolloverStream:_.TimestampRolloverStream,handleRollover:_.handleRollover}),bl=r&&Ya,Tl={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=yl(e.data,1,t),e.value=yl(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=yl(e.data,1,t),e.url=yl(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,i=0;i<e.data.length;i++)if(0===e.data[i]){e.owner=(t=e.data,unescape(gl(t,0,i)));break}e.privateData=e.data.subarray(i+1),e.data=e.privateData}};(_l=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(_l.prototype.init.call(this),this.dispatchType=bl.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,n,r,a,s,o;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug;else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=vl(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)t.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();i=10,64&t.data[5]&&(i=(i+=4)+vl(t.data.subarray(10,14)),u-=vl(t.data.subarray(16,20)));do{if((n=vl(t.data.subarray(i+4,i+8)))<1)return}while((r={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+n+10)}).key=r.id,Tl[r.id]&&(Tl[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)&&(o=(1&(s=r.data)[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2,o=(o*=4)+(3&s[7]),r.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)),t.frames.push(r),(i=i+10+n)<u);this.trigger("data",t)}}}).prototype=new k;var Sl,kl,Cl,wl,ki=_l,r=Object.freeze({default:ki,__moduleExports:ki}),Ya=$a&&i,$a=di&&_,i=r&&ki,di=$a.TimestampRolloverStream,El=((Sl=function(){var r=new Uint8Array(188),a=0;Sl.prototype.init.call(this),this.push=function(e){var t,i=0,n=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;n<t.byteLength;)71!==t[i]||71!==t[n]?(i++,n++):(this.trigger("data",t.subarray(i,n)),i+=188,n+=188);i<t.byteLength&&(r.set(t.subarray(i),0),a=t.byteLength-i)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")}}).prototype=new k,(kl=function(){var n,r,a,s;kl.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),("pat"===t.type?r:a)(e.subarray(i),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},a=function(e,t){var i,n;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var r=e[n],a=(31&e[n+1])<<8|e[n+2];r===bl.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=a:r===bl.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=a:r===bl.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][a]=r),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},i=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(i+=e[i]+1),0===t.pid)t.type="pat",n(e.subarray(i),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",n(e.subarray(i),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,t]):this.processPes_(e,i,t)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=bl.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=bl.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new k,kl.STREAM_TYPES={h264:27,adts:15},(Cl=function(){function n(e,t,i){var n,r=new Uint8Array(e.size),a={type:t},s=0,o=0;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,s=0;s<e.data.length;s++)n=e.data[s],r.set(n.data,o),o+=n.data.byteLength;var l,u,c=r;(l=a).packetLength=6+(c[4]<<8|c[5]),l.dataAlignmentIndicator=0!=(4&c[6]),192&(u=c[7])&&(l.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,l.pts*=4,l.pts+=(6&c[13])>>>1,l.dts=l.pts,64&u&&(l.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,l.dts*=4,l.dts+=(6&c[18])>>>1)),l.data=c.subarray(9+c[8]),u="video"===t||a.packetLength<=e.size,(i||u)&&(e.size=0,e.data.length=0),u&&d.trigger("data",a)}}var d=this,r={data:[],size:0},a={data:[],size:0},s={data:[],size:0};Cl.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,t;switch(i.streamType){case bl.H264_STREAM_TYPE:case bl.H264_STREAM_TYPE:e=r,t="video";break;case bl.ADTS_STREAM_TYPE:e=a,t="audio";break;case bl.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&n(e,t,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=i.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),d.trigger("data",e)}})[i.type]()},this.flush=function(){n(r,"video"),n(a,"audio"),n(s,"timed-metadata"),this.trigger("done")}}).prototype=new k,{PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Sl,TransportParseStream:kl,ElementaryStream:Cl,TimestampRolloverStream:di,CaptionStream:Ya.CaptionStream,Cea608Stream:Ya.Cea608Stream,MetadataStream:i});for(wl in bl)bl.hasOwnProperty(wl)&&(El[wl]=bl[wl]);var Al,_=El,r=Object.freeze({default:_,__moduleExports:_}),Ll=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Al=function(){var l;Al.prototype.init.call(this),this.push=function(e){var t,i,n,r,a,s=0,o=0;if("audio"===e.type)for(l?(n=l,(l=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),l.set(e.data,n.byteLength)):l=e.data;s+5<l.length;)if(255===l[s]&&240==(246&l[s+1])){if(t=2*(1&~l[s+1]),i=(3&l[s+3])<<11|l[s+4]<<3|(224&l[s+5])>>5,a=9e4*(r=1024*(1+(3&l[s+6])))/Ll[(60&l[s+2])>>>2],l.byteLength<(i=s+i))return;if(this.trigger("data",{pts:e.pts+o*a,dts:e.dts+o*a,sampleCount:r,audioobjecttype:1+(l[s+2]>>>6&3),channelcount:(1&l[s+2])<<2|(192&l[s+3])>>>6,samplerate:Ll[(60&l[s+2])>>>2],samplingfrequencyindex:(60&l[s+2])>>>2,samplesize:16,data:l.subarray(s+7+t,i)}),l.byteLength===i)return void(l=void 0);o++,l=l.subarray(i)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new k;function Ol(n){var r=n.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=n.byteLength-r,t=new Uint8Array(4),i=Math.min(4,r);if(0===i)throw new Error("no bytes available");t.set(n.subarray(e,e+i)),a=new DataView(t.buffer).getUint32(0),s=8*i,r-=i},this.skipBits=function(e){var t;e<s||(e=(e-=s)-8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),i=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?i<<t|this.readBits(t):i},this.skipLeadingZeros=function(){for(var e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}var xl,Pl,Il,ki=Al,di=Object.freeze({default:ki,__moduleExports:ki}),i=Object.freeze({default:Ol,__moduleExports:Ol}),Ul=i&&Ol;(Pl=function(){var i,n,r=0;Pl.prototype.init.call(this),this.push=function(e){var t;for(n=n?((t=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),t.set(e.data,n.byteLength),t):e.data;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&this.trigger("data",n.subarray(r+3,i-2));1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}this.trigger("data",n.subarray(r+3,i-2)),r=i-2,i+=3;break;default:i+=3}n=n.subarray(r),i-=r,r=0},this.flush=function(){n&&3<n.byteLength&&this.trigger("data",n.subarray(r+3)),n=null,r=0,this.trigger("done")}}).prototype=new k,Il={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(xl=function(){var i,n,r,a,s,o,g,t=new Pl;xl.prototype.init.call(this),(i=this).push=function(e){"video"===e.type&&(n=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:n,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",t)}),t.on("done",function(){i.trigger("done")}),this.flush=function(){t.flush()},g=function(e,t){for(var i=8,n=8,r=0;r<e;r++)i=0===(n=0!==n?(i+t.readExpGolomb()+256)%256:n)?i:n},s=function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,a=new Uint8Array(r),s=0,n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a},o=function(e){var t,i,n,r,a,s,o,l,u=0,c=0,d=0,h=0,p=1,e=(t=new Ul(e)).readUnsignedByte(),f=t.readUnsignedByte(),m=t.readUnsignedByte();if(t.skipUnsignedExpGolomb(),Il[e]&&(3===(n=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(s=3!==n?8:12,l=0;l<s;l++)t.readBoolean()&&g(l<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(n=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===n)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),i=t.readUnsignedExpGolomb(),l=0;l<i;l++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),n=t.readUnsignedExpGolomb(),r=t.readUnsignedExpGolomb(),0===(a=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),h=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:o=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}o&&(p=o[0]/o[1])}return{profileIdc:e,levelIdc:m,profileCompatibility:f,width:Math.ceil((16*(n+1)-2*u-2*c)*p),height:(2-a)*(r+1)*16-2*d-2*h}}}).prototype=new k;var Dl,i={H264Stream:xl,NalByteStream:Pl},Rl=Object.freeze({default:i,__moduleExports:i,H264Stream:i.H264Stream,NalByteStream:i.NalByteStream});(Dl=function(){var a=new Uint8Array,s=0;Dl.prototype.init.call(this),this.setTimestamp=function(e){s=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+i:10+i},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},this.push=function(e){var t,i,n=0,r=0;for(a.length?(i=a.length,(a=new Uint8Array(e.byteLength+i)).set(a.subarray(0,i)),a.set(e,i)):a=e;3<=a.length-r;)if(a[r]!=="I".charCodeAt(0)||a[r+1]!=="D".charCodeAt(0)||a[r+2]!=="3".charCodeAt(0))if(!0&a[r]&&240==(240&a[r+1])){if(a.length-r<7)break;if((n=this.parseAdtsSize(a,r))>a.length)break;t={type:"audio",data:a.subarray(r,r+n),pts:s,dts:s},this.trigger("data",t),r+=n}else r++;else{if(a.length-r<10)break;if((n=this.parseId3TagSize(a,r))>a.length)break;t={type:"timed-metadata",data:a.subarray(r,r+n)},this.trigger("data",t),r+=n}i=a.length-r,a=0<i?a.subarray(r):new Uint8Array}}).prototype=new k;function I(e){for(var t=[];e--;)t.push(0);return t}var Ml,Bl,Nl,jl,Fl,Vl=Dl,Hl=Object.freeze({default:Vl,__moduleExports:Vl}),U=[33,16,5,32,164,27],zl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],U={96e3:[U,[227,64],I(154),[56]],88200:[U,[231],I(170),[56]],64e3:[U,[248,192],I(240),[56]],48e3:[U,[255,192],I(268),[55,148,128],I(54),[112]],44100:[U,[255,192],I(268),[55,163,128],I(84),[112]],32e3:[U,[255,192],I(268),[55,234],I(226),[112]],24e3:[U,[255,192],I(268),[55,255,128],I(268),[111,112],I(126),[224]],16e3:[U,[255,192],I(268),[55,255,128],I(268),[111,255],I(269),[223,108],I(195),[1,192]],12e3:[zl,I(268),[3,127,248],I(268),[6,255,240],I(268),[13,255,224],I(268),[27,253,128],I(259),[56]],11025:[zl,I(268),[3,127,248],I(268),[6,255,240],I(268),[13,255,224],I(268),[27,255,192],I(268),[55,175,128],I(108),[112]],8e3:[zl,I(268),[3,121,16],I(47),[7]]},zl=(Ml=U,Object.keys(Ml).reduce(function(e,t){return e[t]=new Uint8Array(Ml[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),U=Object.freeze({default:zl,__moduleExports:zl}),ql={secondsToVideoTs:function(e){return 9e4*e},secondsToAudioTs:function(e,t){return e*t},videoTsToSeconds:function(e){return e/9e4},audioTsToSeconds:function(e,t){return e/t},audioTsToVideoTs:function(e,t){return e/t*9e4},videoTsToAudioTs:function(e,t){return e/9e4*t}},Wl=Object.freeze({default:ql,__moduleExports:ql,secondsToVideoTs:ql.secondsToVideoTs,secondsToAudioTs:ql.secondsToAudioTs,videoTsToSeconds:ql.videoTsToSeconds,audioTsToSeconds:ql.audioTsToSeconds,audioTsToVideoTs:ql.audioTsToVideoTs,videoTsToAudioTs:ql.videoTsToAudioTs}),Gl=t&&v,Xl=s&&Xa,Yl=Si&&H,$l=r&&_||r,Kl=di&&ki,Ql=Hl&&Vl,Jl=U&&zl||U,Zl=Wl&&ql,eu=(Rl&&i).H264Stream,tu=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],iu=["width","height","profileIdc","levelIdc","profileCompatibility"],nu=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ru=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},au=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].data.byteLength;return t};(Nl=function(n,r){var a=[],s=0,t=0,l=0,u=1/0;r=r||{},Nl.prototype.init.call(this),this.push=function(t){Yl.collectDtsInfo(n,t),n&&tu.forEach(function(e){n[e]=t[e]}),a.push(t)},this.setEarliestDts=function(e){t=e-n.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){u=e},this.setAudioAppendStart=function(e){l=e},this.flush=function(){var e,t,i;0!==a.length&&(t=this.trimAdtsFramesByEarliestDts_(a),n.baseMediaDecodeTime=Yl.calculateTrackBaseMediaDecodeTime(n,r.keepOriginalTimestamps),this.prefixWithSilence_(n,t),n.samples=this.generateSampleTable_(t),t=Gl.mdat(this.concatenateFrameData_(t)),a=[],e=Gl.moof(s,[n]),i=new Uint8Array(e.byteLength+t.byteLength),s++,i.set(e),i.set(t,e.byteLength),Yl.clearDtsInfo(n),this.trigger("data",{track:n,boxes:i})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,n,r,a,s=0,o=0;if(t.length&&(a=Zl.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),i=Math.ceil(9e4/(e.samplerate/1024)),l&&u&&(a=a-Math.max(l,u),o=(s=Math.floor(a/i))*i),!(s<1||45e3<o))){for((n=Jl[e.samplerate])||(n=t[0].data),r=0;r<s;r++)t.splice(r,0,{data:n});e.baseMediaDecodeTime-=Math.floor(Zl.videoTsToAudioTs(o,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return n.minSegmentDts>=t?e:(n.minSegmentDts=1/0,e.filter(function(e){return e.dts>=t&&(n.minSegmentDts=Math.min(n.minSegmentDts,e.dts),n.minSegmentPts=n.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){for(var t,i=[],n=0;n<e.length;n++)t=e[n],i.push({size:t.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(e){for(var t,i=0,n=new Uint8Array(au(e)),r=0;r<e.length;r++)t=e[r],n.set(t.data,i),i+=t.data.byteLength;return n}}).prototype=new k,(Bl=function(s,n){var t,i,r=0,a=[],u=[];n=n||{},Bl.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(e){Yl.collectDtsInfo(s,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,s.sps=[e.data],iu.forEach(function(e){s[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,s.pps=[e.data]),a.push(e)},this.flush=function(){for(var e,t,i;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=Xl.groupNalsIntoFrames(a),(e=Xl.groupFramesIntoGops(e))[0][0].keyFrame||((i=this.getGopForFusion_(a[0],s))?(e.unshift(i),e.byteLength+=i.byteLength,e.nalCount+=i.nalCount,e.pts=i.pts,e.dts=i.dts,e.duration+=i.duration):e=Xl.extendFirstKeyFrame(e)),u.length){if(!(i=n.alignGopsAtEnd?this.alignGopsAtEnd_(e):this.alignGopsAtStart_(e)))return this.gopCache_.unshift({gop:e.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Yl.clearDtsInfo(s),e=i}Yl.collectDtsInfo(s,e),s.samples=Xl.generateSampleTable(e),i=Gl.mdat(Xl.concatenateNalData(e)),s.baseMediaDecodeTime=Yl.calculateTrackBaseMediaDecodeTime(s,n.keepOriginalTimestamps),this.trigger("processedGopsInfo",e.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:e.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),e=Gl.moof(r,[s]),t=new Uint8Array(e.byteLength+i.byteLength),r++,t.set(e),t.set(i,e.byteLength),this.trigger("data",{track:s,boxes:t}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){Yl.clearDtsInfo(s),i=t=void 0},this.getGopForFusion_=function(e){for(var t,i,n,r=1/0,a=0;a<this.gopCache_.length;a++)i=(n=this.gopCache_[a]).gop,s.pps&&ru(s.pps[0],n.pps[0])&&s.sps&&ru(s.sps[0],n.sps[0])&&(i.dts<s.timelineStartInfo.dts||-1e4<=(i=e.dts-i.dts-i.duration)&&i<=45e3&&(!t||i<r)&&(t=n,r=i));return t?t.gop:null},this.alignGopsAtStart_=function(e){for(var t,i,n,r,a=e.byteLength,s=e.nalCount,o=e.duration,l=t=0;l<u.length&&t<e.length&&(i=u[l],n=e[t],i.pts!==n.pts);)n.pts>i.pts?l++:(t++,a-=n.byteLength,s-=n.nalCount,o-=n.duration);return 0===t?e:t===e.length?null:((r=e.slice(t)).byteLength=a,r.duration=o,r.nalCount=s,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(e){for(var t,i,n=u.length-1,r=e.length-1,a=null,s=!1;0<=n&&0<=r;){if(t=u[n],i=e[r],t.pts===i.pts){s=!0;break}t.pts>i.pts?n--:(n===u.length-1&&(a=r),r--)}if(!s&&null===a)return null;if(0===(o=s?r:a))return e;var o=e.slice(o),l=o.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return o.byteLength=l.byteLength,o.duration=l.duration,o.nalCount=l.nalCount,o.pts=o[0].pts,o.dts=o[0].dts,o},this.alignGopsWith=function(e){u=e}}).prototype=new k,(Fl=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Fl.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new k,Fl.prototype.flush=function(e){var t,i,n,r=0,a={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,iu.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,tu.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,e=Gl.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(e.byteLength),a.initSegment.set(e),a.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)a.data.set(this.pendingBoxes[n],r),r+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)(t=this.pendingCaptions[n]).startTime=t.startPts-s,t.startTime/=9e4,t.endTime=t.endPts-s,t.endTime/=9e4,a.captionStreams[t.stream]=!0,a.captions.push(t);for(n=0;n<this.pendingMetadata.length;n++)(i=this.pendingMetadata[n]).cueTime=i.pts-s,i.cueTime/=9e4,a.metadata.push(i);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(jl=function(n){var r,a,s=this,i=!0;jl.prototype.init.call(this),n=n||{},this.baseMediaDecodeTime=n.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new $l.MetadataStream,t.aacStream=new Ql,t.audioTimestampRolloverStream=new $l.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new $l.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Kl,t.coalesceStream=new Fl(n,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new Nl(a,n),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new $l.MetadataStream,i.packetStream=new $l.TransportPacketStream,i.parseStream=new $l.TransportParseStream,i.elementaryStream=new $l.ElementaryStream,i.videoTimestampRolloverStream=new $l.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new $l.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new $l.TimestampRolloverStream("timed-metadata"),i.adtsStream=new Kl,i.h264Stream=new eu,i.captionStream=new $l.CaptionStream,i.coalesceStream=new Fl(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new Bl(r,n),i.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))}),i.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),a&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Nl(a,n),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,Yl.clearDtsInfo(a),a.timelineStartInfo.baseMediaDecodeTime=e,t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Yl.clearDtsInfo(r),t.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=e),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){var t;i&&((t=nu(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new k;function su(e){return new Date(1e3*e-20828448e5)}function ou(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function lu(){var t,l,u,h,p,e=!1;this.isInitialized=function(){return e},this.init=function(){t=new ic,e=!0,t.on("data",function(e){e.startTime=e.startPts/h,e.endTime=e.endPts/h,p.captions.push(e),p.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===(void 0===t?"undefined":st(t))&&0===Object.keys(t).length||u===e[0]&&h===t[u])},this.parse=function(e,t,i){var n,r,c,a,d,s;if(!this.isInitialized())return null;if(!t||!i)return null;if(this.isNewInit(t,i))u=t[0],h=i[u];else if(!u||!h)return l.push(e),null;for(;0<l.length;){var o=l.shift();this.parse(o,t,i)}return r=h,null!==(e=(n=u)?{seiNals:(e=e,c=n,a=Ro.findBox(e,["moof","traf"]),e=Ro.findBox(e,["mdat"]),d={},s=[],e.forEach(function(e,t){t=a[t];s.push({mdat:e,traf:t})}),s.forEach(function(e){var t,i,n,r,a,s=e.mdat,e=e.traf,o=Ro.findBox(e,["tfhd"]),o=ec.parseTfhd(o[0]),l=o.trackId,u=Ro.findBox(e,["tfdt"]),u=0<u.length?ec.parseTfdt(u[0]).baseMediaDecodeTime:0,e=Ro.findBox(e,["trun"]);c===l&&0<e.length&&(t=u,i=o.defaultSampleDuration||0,n=o.defaultSampleSize||0,r=o.trackId,a=[],e.forEach(function(e){e=ec.parseTrun(e).samples;e.forEach(function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=n),e.trackId=r,e.dts=t,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=t+e.compositionTimeOffset,t+=e.duration}),a=a.concat(e)}),u=function(e,t,i){for(var n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],s=0;s+4<e.length;s+=u){var o,l,u=r.getUint32(s);s+=4,u<=0||6==(31&e[s])&&(l=e.subarray(s+1,s+1+u),o=nc(s,t),l={nalUnitType:"sei_rbsp",size:u,data:l,escapedRBSP:tc(l),trackId:i},o?(l.pts=o.pts,l.dts=o.dts,n=o):(l.pts=n.pts,l.dts=n.dts),a.push(l))}return a}(s,a,l),d[l]||(d[l]=[]),d[l]=d[l].concat(u))}),d[n]),timescale:r}:null)&&e.seiNals?(this.pushNals(e.seiNals),this.flushStream(),p):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){p.captions=[],p.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){l=[],h=u=null,p?this.clearParsedCaptions():p={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}function uu(e){var t=31&e[1];return(t<<=8)|e[2]}function cu(e){return!!(64&e[1])}function du(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function hu(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function pu(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mu(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function gu(e,t,i){for(var n,r,a,s,o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),l=new dc(Array.prototype.slice.call(t)),t=new Uint8Array(e.byteLength),u=new Int32Array(t.buffer),c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,c=i[0],d=i[1],h=i[2],p=i[3],f=0;f<o.length;f+=4)n=mu(o[f]),r=mu(o[f+1]),a=mu(o[f+2]),s=mu(o[f+3]),l.decrypt(n,r,a,s,u,f),u[f]=mu(u[f]^c),u[f+1]=mu(u[f+1]^d),u[f+2]=mu(u[f+2]^h),u[f+3]=mu(u[f+3]^p),c=n,d=r,h=a,p=s;return t}function yu(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=zs.buildAbsoluteURL(h.location.href,e)),zs.buildAbsoluteURL(e,t))}function vu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":st(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function bu(e,t){if(e)return!t||"object"!==(void 0===t?"undefined":st(t))&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Tu(r,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var i in r.mediaGroups[e][t]){var n=r.mediaGroups[e][t][i];a(n,e,t,i)}})}function Su(e,t){var i=fc(e,{});if(!(e=i.playlists[t.uri]))return null;if(e.segments&&t.segments&&e.segments.length===t.segments.length&&e.mediaSequence===t.mediaSequence)return null;var n=fc(e,t);e.segments&&(n.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),a=i;a<r;a++)n[a-i]=fc(e[a],n[a-i]);return n}(e.segments,t.segments,t.mediaSequence-e.mediaSequence)),n.segments.forEach(function(e){var t=n.resolvedUri;e.resolvedUri||(e.resolvedUri=yu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=yu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=yu(t,e.map.uri))});for(var r=0;r<i.playlists.length;r++)i.playlists[r].uri===t.uri&&(i.playlists[r]=n);return i.playlists[t.uri]=n,i}function ku(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];(e.playlists[i.uri]=i).resolvedUri=yu(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},mc.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function Cu(t){Tu(t,function(e){e.uri&&(e.resolvedUri=yu(t.uri,e.uri))})}function wu(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)}function Eu(e,r,t){var i;return(r=void 0===r?e.mediaSequence+e.segments.length:r)<e.mediaSequence?0:(i=function(e){var t=0,i=r-e.mediaSequence,n=e.segments[i];if(n){if(void 0!==n.start)return{result:n.start,precise:!0};if(void 0!==n.end)return{result:n.end-n.duration,precise:!0}}for(;i--;){if(void 0!==(n=e.segments[i]).end)return{result:t+n.end,precise:!0};if(t+=n.duration,void 0!==n.start)return{result:t+n.start,precise:!0}}return{result:t,precise:!1}}(e)).precise?i.result:(e=function(e){for(var t,i=0,n=r-e.mediaSequence;n<e.segments.length;n++){if(void 0!==(t=e.segments[n]).start)return{result:t.start-i,precise:!0};if(i+=t.duration,void 0!==t.end)return{result:t.end-i,precise:!0}}return{result:-1,precise:!1}}(e)).precise?e.result:i.result+t}function Au(e,t,i){if(!e)return 0;if(void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return h.Infinity}return Eu(e,t,i="number"!=typeof i?0:i)}function Lu(e,t,i){var n,r=0;if(i<t&&(t=(n=[i,t])[0],i=n[1]),t<0){for(var a=t;a<Math.min(0,i);a++)r+=e.targetDuration;t=0}for(var s=t;s<i;s++)r+=e.segments[s].duration;return r}function Ou(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,n=i+2*e.targetDuration;t--&&!(n<=(i+=e.segments[t].duration)););return Math.max(0,t)}function xu(e,t,i){return e&&e.segments?e.endList?Au(e):null===t?null:(t=t||0,i=i?Ou(e):e.segments.length,Eu(e,e.mediaSequence+i,t)):null}function Pu(e){return e-Math.floor(e)==0}function Iu(e,t){if(Pu(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,n=1;n<=i;n++){var r=Math.pow(10,n),a=t*r;if(Pu(a)||n===i)return(a+e)/r}}function Uu(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function Du(e){return e.excludeUntil&&e.excludeUntil===1/0}function Ru(e){var t=Uu(e);return!e.disabled&&!t}function Mu(e,t){return t.attributes&&t.attributes[e]}function Bu(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Ru(e)&&(e.attributes.BANDWIDTH||0)<i}).length}function Nu(){return function e(t,n){t=Sc({timeout:45e3},t);var i=e.beforeRequest||L.Hls.xhr.beforeRequest,r=(!i||"function"!=typeof i||(i=i(t))&&(t=i),Tc(t,function(e,t){var i=r.response;!e&&i&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=i.byteLength||i.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(r.timedout=!0),e||r.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(r&&(i||r.responseText)))),n(e,r)})),a=r.abort;return r.abort=function(){return r.aborted=!0,a.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r}}function ju(e,t){return e=e.toString(16),"00".substring(0,2-e.length)+e+(t%2?" ":"")}function Fu(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Vu(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function Hu(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(ju).join("")+" "+t.slice(16*n,16*n+16).map(Fu).join("")+"\n";return i}function zu(e,t){var i=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return L.createTimeRanges(i)}function qu(e,i){return zu(e,function(e,t){return e-Cc<=i&&i<=t+Cc})}function Wu(e,t){return zu(e,function(e){return t<=e-Cc})}function Gu(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")}function Xu(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function Yu(e,t,i){var n,r=void 0;if(i&&i.cues)for(r=i.cues.length;r--;)(n=i.cues[r]).startTime<=t&&n.endTime>=e&&i.removeCue(n)}function $u(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}var Ku,Qu,t={Transmuxer:jl,VideoSegmentStream:Bl,AudioSegmentStream:Nl,AUDIO_PROPERTIES:tu,VIDEO_PROPERTIES:iu},v=Object.freeze({default:t,__moduleExports:t,Transmuxer:t.Transmuxer,VideoSegmentStream:t.VideoSegmentStream,AudioSegmentStream:t.AudioSegmentStream,AUDIO_PROPERTIES:t.AUDIO_PROPERTIES,VIDEO_PROPERTIES:t.VIDEO_PROPERTIES}),Ju=Ro.parseType,Zu={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Ku(e.subarray(78,e.byteLength))}},avcC:function(e){for(var t,i,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},a=31&e[5],s=6,o=0;o<a;o++)i=n.getUint16(s),s+=2,r.sps.push(new Uint8Array(e.subarray(s,s+i))),s+=i;for(t=e[s],s++,o=0;o<t;o++)i=n.getUint16(s),s+=2,r.pps.push(new Uint8Array(e.subarray(s,s+i))),s+=i;return r},btrt:function(e){e=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:Ju(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)i.compatibleBrands.push(Ju(e.subarray(n,n+4))),n+=4;return i},dinf:function(e){return{boxes:Ku(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Ku(e.subarray(8))}},hdlr:function(e){for(var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Ju(e.subarray(8,12)),name:""},i=8,i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}t.name+=String.fromCharCode(e[i])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){for(var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],r=0;r+4<e.length;r+=t)if(t=i.getUint32(r),r+=4,t<=0)n.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[r]){case 1:n.push("slice_layer_without_partitioning_rbsp");break;case 5:n.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:n.push("sei_rbsp");break;case 7:n.push("seq_parameter_set_rbsp");break;case 8:n.push("pic_parameter_set_rbsp");break;case 9:n.push("access_unit_delimiter_rbsp");break;default:n.push("UNKNOWN NAL - "+e[r]&31)}return n}(e)}},mdhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,e={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===e.version?(e.creationTime=su(t.getUint32(i+=4)),e.modificationTime=su(t.getUint32(i+=8)),e.timescale=t.getUint32(i+=4),i+=8):(e.creationTime=su(t.getUint32(i)),e.modificationTime=su(t.getUint32(i+=4)),e.timescale=t.getUint32(i+=4),i+=4),e.duration=t.getUint32(i),t=t.getUint16(i+=4),e.language+=String.fromCharCode(96+(t>>10)),e.language+=String.fromCharCode(96+((992&t)>>5)),e.language+=String.fromCharCode(96+(31&t)),e},mdia:function(e){return{boxes:Ku(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Ku(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),t={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(t.streamDescriptor=Ku(e.subarray(28))[0]),t},moof:function(e){return{boxes:Ku(e)}},moov:function(e){return{boxes:Ku(e)}},mvex:function(e){return{boxes:Ku(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(n.creationTime=su(t.getUint32(i+=4)),n.modificationTime=su(t.getUint32(i+=8)),n.timescale=t.getUint32(i+=4),i+=8):(n.creationTime=su(t.getUint32(i)),n.modificationTime=su(t.getUint32(i+=4)),n.timescale=t.getUint32(i+=4),i+=4),n.duration=t.getUint32(i),n.rate=t.getUint16(i+=4)+t.getUint16(i+2)/16,n.volume=t.getUint8(i+=4)+t.getUint8(i+1)/8,i=(i+=2)+2+8,n.matrix=new Uint32Array(e.subarray(i,i+36)),n.nextTrackId=t.getUint32(i=i+36+24),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){for(var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=4;i<e.byteLength;i++)t.samples.push({dependsOn:(48&e[i])>>4,isDependedOn:(12&e[i])>>2,hasRedundancy:3&e[i]});return t},sidx:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},n=t.getUint16(22),r=24;n;r+=12,n--)i.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Ku(e)}},stco:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},n=t.getUint32(4),r=8;n;r+=4,n--)i.chunkOffsets.push(t.getUint32(r));return i},stsc:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=t.getUint32(4),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},r=8;i;r+=12,i--)n.sampleToChunks.push({firstChunk:t.getUint32(r),samplesPerChunk:t.getUint32(r+4),sampleDescriptionIndex:t.getUint32(r+8)});return n},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Ku(e.subarray(8))}},stsz:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},n=12;n<e.byteLength;n+=4)i.entries.push(t.getUint32(n));return i},stts:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},n=t.getUint32(4),r=8;n;r+=8,n--)i.timeToSamples.push({sampleCount:t.getUint32(r),sampleDelta:t.getUint32(r+4)});return i},styp:function(e){return Zu.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),e={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},i=1&e.flags[2],n=2&e.flags[2],r=8&e.flags[2],a=16&e.flags[2],s=32&e.flags[2],o=65536&e.flags[0],l=131072&e.flags[0],u=8;return i&&(u+=4,e.baseDataOffset=t.getUint32(12),u+=4),n&&(e.sampleDescriptionIndex=t.getUint32(u),u+=4),r&&(e.defaultSampleDuration=t.getUint32(u),u+=4),a&&(e.defaultSampleSize=t.getUint32(u),u+=4),s&&(e.defaultSampleFlags=t.getUint32(u)),o&&(e.durationIsEmpty=!0),!i&&l&&(e.baseDataOffsetIsMoof=!0),e},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(n.creationTime=su(t.getUint32(i+=4)),n.modificationTime=su(t.getUint32(i+=8)),n.trackId=t.getUint32(i+=4),i=i+4+8):(n.creationTime=su(t.getUint32(i)),n.modificationTime=su(t.getUint32(i+=4)),n.trackId=t.getUint32(i+=4),i=i+4+4),n.duration=t.getUint32(i),n.layer=t.getUint16(i=i+4+8),n.alternateGroup=t.getUint16(i+=2),n.volume=t.getUint8(i+=2)+t.getUint8(i+1)/8,i=i+2+2,n.matrix=new Uint32Array(e.subarray(i,i+36)),n.width=t.getUint16(i+=36)+t.getUint16(i+2)/16,n.height=t.getUint16(i+=4)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:Ku(e)}},trak:function(e){return{boxes:Ku(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],c=n.getUint32(4),d=8;for(r&&(i.dataOffset=n.getInt32(d),d+=4),a&&c&&(t={flags:ou(e.subarray(d,d+4))},d+=4,s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),u&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),c--);c--;)t={},s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=ou(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},s={inspect:Ku=function(e){for(var t,i,n,r,a,s=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);s<e.byteLength;)i=t.getUint32(s),n=Ju(e.subarray(s+4,s+8)),r=1<i?s+i:e.byteLength,(a=(Zu[n]||function(e){return{data:e}})(e.subarray(s+8,r))).size=i,a.type=n,o.push(a),s=r;return o},textify:Qu=function(e,t){var r;return t=t||0,r=new Array(2*t+1).join(" "),e.map(function(n,e){return r+n.type+"\n"+Object.keys(n).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t,i=r+"  "+e+": ",e=n[e];return e instanceof Uint8Array||e instanceof Uint32Array?(t=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===t.length?i+"<"+t.join("").slice(1)+">":i+"<\n"+t.map(function(e){return r+"  "+e}).join("\n")+"\n"+r+"  >":i+"<>":i+JSON.stringify(e,null,2).split("\n").map(function(e,t){return 0===t?e:r+"  "+e}).join("\n")}).join("\n")+(n.boxes?"\n"+Qu(n.boxes,t+1):"")}).join("\n")},parseTfdt:Zu.tfdt,parseHdlr:Zu.hdlr,parseTfhd:Zu.tfhd,parseTrun:Zu.trun},Xa=Object.freeze({default:s,__moduleExports:s,inspect:s.inspect,textify:s.textify,parseTfdt:s.parseTfdt,parseHdlr:s.parseHdlr,parseTfhd:s.parseTfhd,parseTrun:s.parseTrun}),ec=Xa&&s,tc=pl.discardEmulationPreventionBytes,ic=Ya.CaptionStream,nc=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null},Si=Object.freeze({default:lu,__moduleExports:lu}),H=v&&t,rc=(H.Transmuxer,H.AudioSegmentStream,H.VideoSegmentStream,Si&&lu),_={parseType:function(e,t){e=uu(e);return 0===e?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=cu(e),i=4+du(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=cu(e),n=4+du(e);if(i&&(n+=e[n]+1),1&e[n+5]){for(var r=3+((15&e[n+1])<<8|e[n+2])-4,a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var s=n+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:cu,parsePesType:function(e,t){switch(t[uu(e)]){case bl.H264_STREAM_TYPE:return"video";case bl.ADTS_STREAM_TYPE:return"audio";case bl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!cu(e))return null;var t=4+du(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+du(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===hu(31&i[r+3])&&(a=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===hu(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,a=i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===hu(31&i[r+3])?!0:a}},r=Object.freeze({default:_,__moduleExports:_,parseType:_.parseType,parsePat:_.parsePat,parsePmt:_.parsePmt,parsePayloadUnitStartIndicator:_.parsePayloadUnitStartIndicator,parsePesType:_.parsePesType,parsePesTime:_.parsePesTime,videoPacketContainsKeyFrame:_.videoPacketContainsKeyFrame}),ac=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],di={parseId3TagSize:function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+i:10+i},parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ac[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i=10;64&e[5]&&(i=(i+=4)+pu(e.subarray(10,14)));do{if((t=pu(e.subarray(i+4,i+8)))<1)return null;if("PRIV"===String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]))for(var n,r,a=e.subarray(i+10,i+t+10),s=0;s<a.byteLength;s++)if(0===a[s]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t){for(var i="",n=0;n<t;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i}(a,s)))return r=(1&(n=a.subarray(s+1))[3])<<30|n[4]<<22|n[5]<<14|n[6]<<6|n[7]>>>2,(r*=4)+(3&n[7]);break}}while((i=i+10+t)<e.byteLength);return null}},ki=Object.freeze({default:di,__moduleExports:di,parseId3TagSize:di.parseId3TagSize,parseAdtsSize:di.parseAdtsSize,parseType:di.parseType,parseSampleRate:di.parseSampleRate,parseAacTimestamp:di.parseAacTimestamp}),Hl=ki&&di,sc=$a.handleRollover,D={},oc=(D.ts=r&&_,D.aac=Hl,188),lc=function(e,t,i){for(var n,r,a,s,o=0,l=oc,u=!1;l<e.byteLength;)if(71!==e[o]||71!==e[l])o++,l++;else{if("pes"===(n=e.subarray(o,l),D.ts.parseType(n,t.pid))&&(r=D.ts.parsePesType(n,t.table),a=D.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=D.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)),u)break;o+=oc,l+=oc}for(o=(l=e.byteLength)-oc,u=!1;0<=o;)if(71!==e[o]||71!==e[l])o--,l--;else{if("pes"===(n=e.subarray(o,l),D.ts.parseType(n,t.pid))&&(r=D.ts.parsePesType(n,t.table),a=D.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=D.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0)),u)break;o-=oc,l-=oc}},uc=function(e,t,i){for(var n,r,a,s,o,l,u,c=0,d=oc,h=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{if("pes"===(n=e.subarray(c,d),D.ts.parseType(n,t.pid)))if(r=D.ts.parsePesType(n,t.table),a=D.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!h&&(s=D.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0),!i.firstKeyFrame)){if(a&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),o.set(u,l),l+=u.byteLength;D.ts.videoPacketContainsKeyFrame(o)&&(i.firstKeyFrame=D.ts.parsePesTime(o),i.firstKeyFrame.type="video"),p.size=0}p.data.push(n),p.size+=n.byteLength}if(h&&i.firstKeyFrame)break;c+=oc,d+=oc}for(c=(d=e.byteLength)-oc,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{if("pes"===(n=e.subarray(c,d),D.ts.parseType(n,t.pid))&&(r=D.ts.parsePesType(n,t.table),a=D.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=D.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0)),h)break;c-=oc,d-=oc}},Vl=function(e,t,i){return t&&Dc(e.prototype,t),i&&Dc(e,i),e},cc=null,dc=(Uc.prototype.decrypt=function(e,t,i,n,r,a){for(var s,o,l=this._key[1],u=e^l[0],c=n^l[1],d=i^l[2],h=t^l[3],p=void 0,f=l.length/4-2,m=void 0,g=4,e=this._tables[1],y=e[0],v=e[1],_=e[2],b=e[3],T=e[4],m=0;m<f;m++)p=y[u>>>24]^v[c>>16&255]^_[d>>8&255]^b[255&h]^l[g],s=y[c>>>24]^v[d>>16&255]^_[h>>8&255]^b[255&u]^l[g+1],o=y[d>>>24]^v[h>>16&255]^_[u>>8&255]^b[255&c]^l[g+2],h=y[h>>>24]^v[u>>16&255]^_[c>>8&255]^b[255&d]^l[g+3],g+=4,u=p,c=s,d=o;for(m=0;m<4;m++)r[(3&-m)+a]=T[u>>>24]<<24^T[c>>16&255]<<16^T[d>>8&255]<<8^T[255&h]^l[g++],p=u,u=c,c=d,d=h,h=p},Uc),hc=(Ic.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},Ic.prototype.off=function(e,t){if(!this.listeners[e])return!1;t=this.listeners[e].indexOf(t);return this.listeners[e].splice(t,1),-1<t},Ic.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},Ic.prototype.dispose=function(){this.listeners={}},Ic.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},Ic),pc=function(t){function i(){fu(this,i);var e=function(e,t){if(e)return!t||"object"!==(void 0===t?"undefined":st(t))&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,t.call(this,hc));return e.jobs=[],e.delay=1,e.timeout_=null,e}var e=i,n=t;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":st(n)));return e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n),i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(hc),zl=(Pc.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=gu(t,i,n);r.set(e,t.byteOffset)}},Vl(Pc,null,[{key:"STEP",get:function(){return 32e3}}]),Pc),U=function(e,t,i){return t&&xc(e.prototype,t),i&&xc(e,i),e},fc=L.mergeOptions,Wl=L.EventTarget,mc=L.log,gc=(_u(Oc,Wl),U(Oc,[{key:"playlistRequestError",value:function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var i=this,n=(this.request=null,this.state="HAVE_METADATA",new Xs),e=(n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{},Su(this.master,n.manifest));this.targetDuration=n.manifest.targetDuration,e?(this.master=e,this.media_=this.master.playlists[n.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(h.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=h.setTimeout(function(){i.trigger("mediaupdatetimeout")},wu(this.media(),!!e))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),h.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())}},{key:"media",value:function(i){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}var e=!this.media_||i.uri!==this.media_.uri;if(this.master.playlists[i.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e){if(this.state="SWITCHING_MEDIA",this.request){if(yu(this.master.uri,i.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:yu(this.master.uri,i.uri),withCredentials:this.withCredentials},function(e,t){if(n.request){if(e)return n.playlistRequestError(n.request,i.uri,r);n.haveMetadata(t,i.uri),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),h.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this,i=(h.clearTimeout(this.mediaUpdateTimeout),this.media());e?(e=i?i.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=h.setTimeout(function(){return t.load()},e)):this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");e=new Xs;return e.push(t.responseText),e.end(),i.state="HAVE_MASTER",e.manifest.uri=i.srcUrl,e.manifest.playlists?(i.master=e.manifest,ku(i.master),Cu(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(e.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:h.location.href,playlists:[{uri:i.srcUrl,id:0}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.master.playlists[0].resolvedUri=i.srcUrl,i.master.playlists[0].attributes=i.master.playlists[0].attributes||{},i.haveMetadata(t,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),Oc),yc=L.createTimeRange,vc=Iu.bind(null,1),_c=Iu.bind(null,-1),bc={duration:Au,seekable:function(e,t){var i=t||0,e=xu(e,t,!0);return null===e?yc():yc(i,e)},safeLiveIndex:Ou,getMediaInfoForTime:function(e,t,i,n){var r=void 0,a=void 0,s=e.segments.length,o=t-n;if(o<0){if(0<i)for(r=i-1;0<=r;r--)if(a=e.segments[r],0<(o+=_c(a.duration)))return{mediaIndex:r,startTime:n-Lu(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<s;r++)if(a=e.segments[r],(o-=vc(a.duration))<0)return{mediaIndex:r,startTime:n+Lu(e,i,r)};return{mediaIndex:s-1,startTime:t}},isEnabled:Ru,isDisabled:function(e){return e.disabled},isBlacklisted:Uu,isIncompatible:Du,playlistEnd:xu,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Mu,estimateSegmentRequestTime:function(e,t,i){return Mu("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*(3<arguments.length&&void 0!==arguments[3]?arguments[3]:0))/t:NaN},isLowestEnabledRendition:Bu},Tc=L.xhr,Sc=L.mergeOptions,kc=function(i){var n={};return Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n},ql=Object.freeze({createTransferableMessage:kc,initSegmentId:Vu,hexDump:Hu,tagDump:function(){}