const vt=function(e){const t=[];let i=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=r&63|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=r&63|128)}return t},Ot=function(e){const t=[];let i=0,n=0;for(;i<e.length;){const r=e[i++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[i++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[i++],a=e[i++],o=e[i++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[i++],a=e[i++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},_t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<e.length;r+=3){const s=e[r],a=r+1<e.length,o=a?e[r+1]:0,c=r+2<e.length,h=c?e[r+2]:0,u=s>>2,f=(s&3)<<4|o>>4;let L=(o&15)<<2|h>>6,E=h&63;c||(E=64,a||(L=64)),n.push(i[u],i[f],i[L],i[E])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ot(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<e.length;){const s=i[e.charAt(r++)],a=r<e.length,o=a?i[e.charAt(r)]:0;++r;const c=r<e.length,h=c?i[e.charAt(r)]:64;++r;const u=r<e.length,f=u?i[e.charAt(r)]:64;if(++r,s==null||o==null||h==null||f==null)throw Error();const L=s<<2|o>>4;if(n.push(L),h!==64){const E=o<<4&240|h>>2;if(n.push(E),f!==64){const Z=h<<6&192|f;n.push(Z)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Pe=function(e){try{return _t.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ue(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function xe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Me(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fe(){const e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}const Rt="FirebaseError";class N extends Error{constructor(e,t,i){super(t);this.code=e,this.customData=i,this.name=Rt,Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?Ct(r,i):"Error",a=`${this.serviceName}: ${s} (${n}).`,o=new N(n,a,i);return o}}function Ct(e,t){return e.replace(kt,(i,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const kt=/\{\$([^}]+)}/g;function ee(e){const t=[];for(const[i,n]of Object.entries(e))Array.isArray(n)?n.forEach(r=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function k(e){const t={},i=e.replace(/^\?/,"").split("&");return i.forEach(n=>{if(n){const[r,s]=n.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function D(e){const t=e.indexOf("?");if(!t)return"";const i=e.indexOf("#",t);return e.substring(t,i>0?i:void 0)}function We(e,t){const i=new Dt(e,t);return i.subscribe.bind(i)}class Dt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let n;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Pt(e,["next","error","complete"])?n=e:n={next:e,error:t,complete:i},n.next===void 0&&(n.next=me),n.error===void 0&&(n.error=me),n.complete===void 0&&(n.complete=me);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(s){}return}),this.observers.push(n),r}unsubscribeOne(e){if(this.observers===void 0||this.observers[e]===void 0)return;delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this)}forEachObserver(e){if(this.finalized)return;for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){if(this.finalized)return;this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0})}}function Pt(e,t){if(typeof e!="object"||e===null)return!1;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}function me(){}const Fn=4*60*60*1e3;function P(e){return e&&e._delegate?e._delegate:e}class U{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ut=[];var d;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(d||(d={}));const xt={debug:d.DEBUG,verbose:d.VERBOSE,info:d.INFO,warn:d.WARN,error:d.ERROR,silent:d.SILENT},Mt=d.INFO,Ft={[d.DEBUG]:"log",[d.VERBOSE]:"log",[d.INFO]:"info",[d.WARN]:"warn",[d.ERROR]:"error"},Wt=(e,t,...i)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),r=Ft[t];if(r)console[r](`[${n}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class te{constructor(e){this.name=e,this._logLevel=Mt,this._logHandler=Wt,this._userLogHandler=null,Ut.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in d))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,d.DEBUG,...e),this._logHandler(this,d.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,d.VERBOSE,...e),this._logHandler(this,d.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,d.INFO,...e),this._logHandler(this,d.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,d.WARN,...e),this._logHandler(this,d.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,d.ERROR,...e),this._logHandler(this,d.ERROR,...e)}}class Ht{constructor(e){this.container=e}getPlatformInfoString(){const e=this.container.getProviders();return e.map(t=>{if(Gt(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Gt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ge="@firebase/app",Ve="0.7.13";const Ie=new te("@firebase/app"),Bt="@firebase/app-compat",Yt="@firebase/analytics-compat",Kt="@firebase/analytics",qt="@firebase/app-check-compat",jt="@firebase/app-check",zt="@firebase/auth",$t="@firebase/auth-compat",Jt="@firebase/database",Xt="@firebase/database-compat",Qt="@firebase/functions",Zt="@firebase/functions-compat",ei="@firebase/installations",ti="@firebase/installations-compat",ii="@firebase/messaging",ni="@firebase/messaging-compat",ri="@firebase/performance",si="@firebase/performance-compat",ai="@firebase/remote-config",oi="@firebase/remote-config-compat",ci="@firebase/storage",li="@firebase/storage-compat",hi="@firebase/firestore",di="@firebase/firestore-compat",ui="firebase",pi="9.6.3";const fi={[ge]:"fire-core",[Bt]:"fire-core-compat",[Kt]:"fire-analytics",[Yt]:"fire-analytics-compat",[jt]:"fire-app-check",[qt]:"fire-app-check-compat",[zt]:"fire-auth",[$t]:"fire-auth-compat",[Jt]:"fire-rtdb",[Xt]:"fire-rtdb-compat",[Qt]:"fire-fn",[Zt]:"fire-fn-compat",[ei]:"fire-iid",[ti]:"fire-iid-compat",[ii]:"fire-fcm",[ni]:"fire-fcm-compat",[ri]:"fire-perf",[si]:"fire-perf-compat",[ai]:"fire-rc",[oi]:"fire-rc-compat",[ci]:"fire-gcs",[li]:"fire-gcs-compat",[hi]:"fire-fst",[di]:"fire-fst-compat","fire-js":"fire-js",[ui]:"fire-js-all"};const mi=new Map,Ge=new Map;function gi(e,t){try{e.container.addComponent(t)}catch(i){Ie.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function G(e){const t=e.name;if(Ge.has(t))return Ie.debug(`There were multiple attempts to register component ${t}.`),!1;Ge.set(t,e);for(const i of mi.values())gi(i,e);return!0}const Ii={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Xn=new v("app","Firebase",Ii);const we=pi;function x(e,t,i){var n;let r=(n=fi[e])!==null&&n!==void 0?n:e;i&&(r+=`-${i}`);const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${t}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ie.warn(o.join(" "));return}G(new U(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function wi(e){G(new U("platform-logger",t=>new Ht(t),"PRIVATE")),x(ge,Ve,e),x(ge,Ve,"esm2017"),x("fire-js","")}wi("");function ie(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i}function He(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Be=He,Ye=new v("auth","Firebase",He());const Ke=new te("@firebase/auth");function ne(e,...t){Ke.logLevel<=d.ERROR&&Ke.error(`Auth (${we}): ${e}`,...t)}function w(e,...t){throw Ae(e,...t)}function H(e,...t){return Ae(e,...t)}function Ai(e,t,i){const n=Object.assign(Object.assign({},Be()),{[t]:i}),r=new v("auth","Firebase",n);return r.create(t,{appName:e.name})}function Ae(e,...t){if(typeof e!="string"){const i=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(i,...n)}return Ye.create(e,...t)}function l(e,t,...i){if(!e)throw Ae(t,...i)}function g(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ne(t),new Error(t)}function O(e,t){e||g(t)}const qe=new Map;function _(e){O(e instanceof Function,"Expected a class definition");let t=qe.get(e);return t?(O(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qe.set(e,t),t)}function bi(e,t){const i=(t==null?void 0:t.persistence)||[],n=(Array.isArray(i)?i:[i]).map(_);(t==null?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function yi(){return je()==="http:"||je()==="https:"}function je(){var e;return typeof self!="undefined"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function Si(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yi()||xe()||"connection"in navigator)?navigator.onLine:!0}function Ti(){if(typeof navigator=="undefined")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class B{constructor(e,t){this.shortDelay=e,this.longDelay=t,O(t>e,"Short delay should be less than long delay!"),this.isMobile=Ue()||Me()}get(){return Si()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Li(e,t){O(e.emulator,"Emulator should always be set here");const{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class ze{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;g("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;g("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;g("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ei={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"internal-error",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error"};const Ni=new B(3e4,6e4);function m(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function I(e,t,i,n,r={}){return $e(e,r,async()=>{let s={},a={};n&&(t==="GET"?a=n:s={body:JSON.stringify(n)});const o=ee(Object.assign({key:e.config.apiKey},a)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),ze.fetch()(Je(e,e.config.apiHost,i,o),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))})}async function $e(e,t,i){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},Ei),t);try{const r=new vi(e),s=await Promise.race([i(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw re(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,h]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw re(e,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw re(e,"email-already-in-use",a);const u=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ai(e,u,h);w(e,u)}}catch(r){if(r instanceof N)throw r;w(e,"network-request-failed")}}async function R(e,t,i,n,r={}){const s=await I(e,t,i,n,r);return"mfaPendingCredential"in s&&w(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Je(e,t,i,n){const r=`${t}${i}?${n}`;return e.config.emulator?Li(e.config,r):`${e.config.apiScheme}://${r}`}class vi{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(H(this.auth,"timeout")),Ni.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function re(e,t,i){const n={appName:e.name};i.email&&(n.email=i.email),i.phoneNumber&&(n.phoneNumber=i.phoneNumber);const r=H(e,t,n);return r.customData._tokenResponse=i,r}async function Oi(e,t){return I(e,"POST","/v1/accounts:delete",t)}async function _i(e,t){return I(e,"POST","/v1/accounts:lookup",t)}function Y(e){if(!e)return;try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}return}async function Xe(e,t=!1){const i=P(e),n=await i.getIdToken(t),r=ye(n);l(r&&r.exp&&r.auth_time&&r.iat,i.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:Y(be(r.auth_time)),issuedAtTime:Y(be(r.iat)),expirationTime:Y(be(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function be(e){return Number(e)*1e3}function ye(e){const[t,i,n]=e.split(".");if(t===void 0||i===void 0||n===void 0)return ne("JWT malformed, contained fewer than 3 sections"),null;try{const r=Pe(i);return r?JSON.parse(r):(ne("Failed to decode base64 JWT payload"),null)}catch(r){return ne("Caught error parsing JWT payload as JSON",r),null}}function Ri(e){const t=ye(e);return l(t,"internal-error"),l(typeof t.exp!="undefined","internal-error"),l(typeof t.iat!="undefined","internal-error"),Number(t.exp)-Number(t.iat)}async function K(e,t,i=!1){if(i)return t;try{return await t}catch(n){throw n instanceof N&&Ci(n)&&(e.auth.currentUser===e&&await e.auth.signOut()),n}}function Ci({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class ki{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){if(this.isRunning)return;this.isRunning=!0,this.schedule()}_stop(){if(!this.isRunning)return;this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId)}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const i=(t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0,n=i-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Qe{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Y(this.lastLoginAt),this.creationTime=Y(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function se(e){var t;const i=e.auth,n=await e.getIdToken(),r=await K(e,_i(i,{idToken:n}));l(r==null?void 0:r.users.length,i,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=((t=s.providerUserInfo)===null||t===void 0?void 0:t.length)?Pi(s.providerUserInfo):[],o=Di(e.providerData,a),c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(o==null?void 0:o.length),u=c?h:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Qe(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,f)}async function Ze(e){const t=P(e);await se(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Di(e,t){const i=e.filter(n=>!t.some(r=>r.providerId===n.providerId));return[...i,...t]}function Pi(e){return e.map(t=>{var{providerId:i}=t,n=ie(t,["providerId"]);return{providerId:i,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function Ui(e,t){const i=await $e(e,{},async()=>{const n=ee({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=Je(e,r,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ze.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}class ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){l(e.idToken,"internal-error"),l(typeof e.idToken!="undefined","internal-error"),l(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Ri(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return l(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:n,expiresIn:r}=await Ui(e,t);this.updateTokensAndExpiration(i,n,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:n,expirationTime:r}=t,s=new ae;return i&&(l(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),n&&(l(typeof n=="string","internal-error",{appName:e}),s.accessToken=n),r&&(l(typeof r=="number","internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ae,this.toJSON())}_performRefresh(){return g("not implemented")}}function A(e,t){l(typeof e=="string"||typeof e=="undefined","internal-error",{appName:t})}class M{constructor(e){var{uid:t,auth:i,stsTokenManager:n}=e,r=ie(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ki(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.metadata=new Qe(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return l(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Xe(this,e)}reload(){return Ze(this)}_assign(e){if(this===e)return;l(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager)}_clone(e){return new M(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){l(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await se(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await K(this,Oi(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,n,r,s,a,o,c,h;const u=(i=t.displayName)!==null&&i!==void 0?i:void 0,f=(n=t.email)!==null&&n!==void 0?n:void 0,L=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,E=(s=t.photoURL)!==null&&s!==void 0?s:void 0,Z=(a=t.tenantId)!==null&&a!==void 0?a:void 0,de=(o=t._redirectEventId)!==null&&o!==void 0?o:void 0,_e=(c=t.createdAt)!==null&&c!==void 0?c:void 0,Re=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ue,emailVerified:Ce,isAnonymous:ke,providerData:pe,stsTokenManager:De}=t;l(ue&&De,e,"internal-error");const Et=ae.fromJSON(this.name,De);l(typeof ue=="string",e,"internal-error"),A(u,e.name),A(f,e.name),l(typeof Ce=="boolean",e,"internal-error"),l(typeof ke=="boolean",e,"internal-error"),A(L,e.name),A(E,e.name),A(Z,e.name),A(de,e.name),A(_e,e.name),A(Re,e.name);const fe=new M({uid:ue,auth:e,email:f,emailVerified:Ce,displayName:u,isAnonymous:ke,photoURL:E,phoneNumber:L,tenantId:Z,stsTokenManager:Et,createdAt:_e,lastLoginAt:Re});return pe&&Array.isArray(pe)&&(fe.providerData=pe.map(Nt=>Object.assign({},Nt))),de&&(fe._redirectEventId=de),fe}static async _fromIdTokenResponse(e,t,i=!1){const n=new ae;n.updateFromServerResponse(t);const r=new M({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:i});return await se(r),r}}class et{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){return}_removeListener(e,t){return}}et.type="NONE";const Se=et;function Te(e,t,i){return`firebase:${e}:${t}:${i}`}class q{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:n,name:r}=this.auth;this.fullUserKey=Te(this.userKey,n.apiKey,r),this.fullPersistenceKey=Te("persistence",n.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?M._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new q(_(Se),e,i);const n=(await Promise.all(t.map(async c=>await c._isAvailable()?c:void 0))).filter(c=>c);let r=n[0]||_(Se);const s=Te(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(s);if(h){const u=M._fromJSON(e,h);c!==r&&(a=u),r=c;break}}catch(h){}const o=n.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!o.length?new q(r,e,i):(r=o[0],a&&await r._set(s,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(s)}catch(h){}})),new q(r,e,i))}}function at(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(it(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rt(t))return"Blackberry";if(st(t))return"Webos";if(tt(t))return"Safari";if((t.includes("chrome/")||Mi(t))&&!t.includes("edge/"))return"Chrome";if(nt(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(i);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function xi(e=p()){return/firefox\//i.test(e)}function tt(e=p()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Mi(e=p()){return/crios\//i.test(e)}function it(e=p()){return/iemobile/i.test(e)}function nt(e=p()){return/android/i.test(e)}function rt(e=p()){return/blackberry/i.test(e)}function st(e=p()){return/webos/i.test(e)}function ot(e=p()){return/iphone|ipad|ipod/i.test(e)}function Fi(){return Fe()&&document.documentMode===10}function Wi(e=p()){return ot(e)||nt(e)||st(e)||rt(e)||/windows phone/i.test(e)||it(e)}function Vi(){try{return!!(window&&window!==window.top)}catch(e){return!1}}function ct(e,t=[]){let i;switch(e){case"Browser":i=at(p());break;case"Worker":i=`${at(p())}-${e}`;break;default:i=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${we}/${n}`}class Gi{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lt(this),this.idTokenSubscription=new lt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_(t)),this._initializationPromise=this.queue(async()=>{var i,n;if(this._deleted)return;if(this.persistenceManager=await q.create(this,e),this._deleted)return;if((i=this._popupRedirectResolver)===null||i===void 0?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}if(await this.initializeCurrentUser(t),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,this._deleted)return;this._isInitialized=!0}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!this.currentUser&&!e)return;if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}async initializeCurrentUser(e){var t;let i=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,r=i==null?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(e);(!n||n===r)&&(s==null?void 0:s.user)&&(i=s.user)}return i?i._redirectEventId?(l(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(i){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await se(e)}catch(t){if(t.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ti()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?P(e):null;return t&&l(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){return this._deleted?void 0:(e&&l(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new v("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_(e)||this._popupRedirectResolver;l(t,this,"argument-error"),this.redirectPersistenceManager=await q.create(this,[_(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,n){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return l(s,this,"internal-error"),s.then(()=>r(this.currentUser)),typeof t=="function"?e.addObserver(t,i,n):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return l(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){if(!e||this.frameworks.includes(e))return;this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ct(this.config.clientPlatform,this._getFrameworks())}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function ht(e){return P(e)}class lt{constructor(e){this.auth=e,this.observer=null,this.addObserver=We(t=>this.observer=t)}get next(){return l(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class j{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return g("not implemented")}_getIdTokenResponse(e){return g("not implemented")}_linkToIdToken(e,t){return g("not implemented")}_getReauthenticationResolver(e){return g("not implemented")}}async function Hi(e,t){return I(e,"POST","/v1/accounts:update",t)}async function Bi(e,t){return R(e,"POST","/v1/accounts:signInWithPassword",m(e,t))}async function Yi(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",m(e,t))}async function Ki(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",m(e,t))}class z extends j{constructor(e,t,i,n=null){super("password",i);this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new z(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new z(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Bi(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Yi(e,{email:this._email,oobCode:this._password});default:w(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Ki(e,{idToken:t,email:this._email,oobCode:this._password});default:w(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function F(e,t){return R(e,"POST","/v1/accounts:signInWithIdp",m(e,t))}const qi="http://localhost";class C extends j{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const t=new C(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):w("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:n}=t,r=ie(t,["providerId","signInMethod"]);if(!i||!n)return null;const s=new C(i,n);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return F(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,F(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,F(e,t)}buildRequest(){const e={requestUri:qi,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ee(t)}return e}}async function ji(e,t){return I(e,"POST","/v1/accounts:sendVerificationCode",m(e,t))}async function zi(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",m(e,t))}async function $i(e,t){const i=await R(e,"POST","/v1/accounts:signInWithPhoneNumber",m(e,t));if(i.temporaryProof)throw re(e,"account-exists-with-different-credential",i);return i}const Ji={["USER_NOT_FOUND"]:"user-not-found"};async function Xi(e,t){const i=Object.assign(Object.assign({},t),{operation:"REAUTH"});return R(e,"POST","/v1/accounts:signInWithPhoneNumber",m(e,i),Ji)}class W extends j{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,t){return new W({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new W({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return zi(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return $i(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Xi(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:n,temporaryProof:r}=e;return!i&&!t&&!n&&!r?null:new W({verificationId:t,verificationCode:i,phoneNumber:n,temporaryProof:r})}}function Qi(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zi(e){const t=k(D(e)).link,i=t?k(D(t)).deep_link_id:null,n=k(D(e)).deep_link_id,r=n?k(D(n)).link:null;return r||n||i||t||e}class Le{constructor(e){var t,i,n,r,s,a;const o=k(D(e)),c=(t=o.apiKey)!==null&&t!==void 0?t:null,h=(i=o.oobCode)!==null&&i!==void 0?i:null,u=Qi((n=o.mode)!==null&&n!==void 0?n:null);l(c&&h&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=h,this.continueUrl=(r=o.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(s=o.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Zi(e);try{return new Le(t)}catch(i){return null}}}class ${constructor(){this.providerId=$.PROVIDER_ID}static credential(e,t){return z._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Le.parseLink(t);return l(i,"argument-error"),z._fromEmailAndCode(e,i.code,i.tenantId)}}$.PROVIDER_ID="password";$.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class en{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oe extends en{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class b extends oe{constructor(){super("facebook.com")}static credential(e){return C._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return b.credentialFromTaggedObject(e)}static credentialFromError(e){return b.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return b.credential(e.oauthAccessToken)}catch(t){return null}}}b.FACEBOOK_SIGN_IN_METHOD="facebook.com";b.PROVIDER_ID="facebook.com";class y extends oe{constructor(){super("google.com");this.addScope("profile")}static credential(e,t){return C._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return y.credentialFromTaggedObject(e)}static credentialFromError(e){return y.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return y.credential(t,i)}catch(n){return null}}}y.GOOGLE_SIGN_IN_METHOD="google.com";y.PROVIDER_ID="google.com";class S extends oe{constructor(){super("github.com")}static credential(e){return C._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return S.credentialFromTaggedObject(e)}static credentialFromError(e){return S.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return S.credential(e.oauthAccessToken)}catch(t){return null}}}S.GITHUB_SIGN_IN_METHOD="github.com";S.PROVIDER_ID="github.com";class T extends oe{constructor(){super("twitter.com")}static credential(e,t){return C._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return T.credentialFromTaggedObject(e)}static credentialFromError(e){return T.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return T.credential(t,i)}catch(n){return null}}}T.TWITTER_SIGN_IN_METHOD="twitter.com";T.PROVIDER_ID="twitter.com";class J{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,n=!1){const r=await M._fromIdTokenResponse(e,i,n),s=dt(i),a=new J({user:r,providerId:s,_tokenResponse:i,operationType:t});return a}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const n=dt(i);return new J({user:e,providerId:n,_tokenResponse:i,operationType:t})}}function dt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ee extends N{constructor(e,t,i,n){var r;super(t.code,t.message);this.operationType=i,this.user=n,Object.setPrototypeOf(this,Ee.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,n){return new Ee(e,t,i,n)}}function ut(e,t,i,n){const r=t==="reauthenticate"?i._getReauthenticationResolver(e):i._getIdTokenResponse(e);return r.catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ee._fromErrorAndOperation(e,s,t,n):s})}async function tn(e,t,i=!1){const n=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),i);return J._forOperation(e,"link",n)}async function nn(e,t,i=!1){const{auth:n}=e,r="reauthenticate";try{const s=await K(e,ut(n,r,t,e),i);l(s.idToken,n,"internal-error");const a=ye(s.idToken);l(a,n,"internal-error");const{sub:o}=a;return l(e.uid===o,n,"user-mismatch"),J._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&w(n,"user-mismatch"),s}}async function rn(e,t,i=!1){const n="signIn",r=await ut(e,n,t),s=await J._fromIdTokenResponse(e,n,r);return i||await e._updateCurrentUser(s.user),s}function sn(e,t){return I(e,"POST","/v2/accounts/mfaEnrollment:start",m(e,t))}function an(e,t){return I(e,"POST","/v2/accounts/mfaEnrollment:finalize",m(e,t))}const cr=new WeakMap,ce="__sak";class pt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ce,"1"),this.storage.removeItem(ce),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function on(){const e=p();return tt(e)||ot(e)}const cn=1e3,ln=10;class hn extends pt{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=on()&&Vi(),this.fallbackToPolling=Wi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),n=this.localCache[t];i!==n&&e(t,n,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,a,o)=>{this.notifyListeners(s,o)});return}const i=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(i);if(e.newValue!==s)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!t)return}const n=()=>{const s=this.storage.getItem(i);if(!t&&this.localCache[i]===s)return;this.notifyListeners(i,s)},r=this.storage.getItem(i);Fi()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,ln):n()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const n of Array.from(i))n(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},cn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hn.type="LOCAL";class dn extends pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener