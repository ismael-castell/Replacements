(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9389],{89332:(e,t,i)=>{"use strict";i(77173);var o=i(11040),n=i(41697),a=i(70119),r=i(22296),s=i(3198),l=i(96042),c=i(68927),d=i.n(c),_=i(32667),u=i(40798),p=i(64047);const m=["fetch"],E=["includes"],g=["values","entries","getOwnPropertyDescriptors"];var h=i(84584);function T(e){var t,i,o,n,a,s,l;const c=null!==(n=null!==(o=null===(i=null===(t=window.SIGI_STATE)||void 0===t?void 0:t.I18n)||void 0===i?void 0:i.lang)&&void 0!==o?o:document.documentElement.getAttribute("lang"))&&void 0!==n?n:"en",d=null!==(l=null===(s=null===(a=window.SIGI_STATE)||void 0===a?void 0:a.I18n)||void 0===s?void 0:s.translations)&&void 0!==l?l:{};return new Promise(((t,i)=>{r.ZP.use(u.CJ).init({debug:!1,fallbackLng:["en"],initImmediate:!0,defaultNS:null!=e?e:"Webapp"},(e=>{e?i(e):t()})),r.ZP.setLang(c)})).then((()=>{Object.entries(d).forEach((([e,t])=>{Object.entries(t).forEach((([t,i])=>{r.ZP.addResourceBundle(e,t,i,!0)}))}))}))}var S=i(11362);i(48148),window[S.ho];var O=i(22612),A=i.n(O),I=i(22763),v=i(90293),y=i(91051),C=i(98154),f=i(21041),N=i(13597),R=i.n(N);const L={Primary:"rgba(255, 59, 92, 1.0)",Primary2:"rgba(255, 255, 255, 0.9)",Secondary:"rgba(32, 213, 236, 1.0)",Secondary2:"rgba(0, 198, 233, 1.0)",Link:"rgba(255, 59, 92, 1.0)",Link2:"rgba(255, 59, 92, 1.0)",Link3:"rgba(255, 59, 92, 1.0)",Positive:"rgba(11, 224, 155, 1.0)",Negative:"rgba(255, 76, 58, 1.0)",ToastDefault:"rgba(84, 84, 84, 0.92)",ToastNegative:"rgba(255, 76, 58, 0.92)",TextPrimary:"rgba(255, 255, 255, 0.9)",TextSecondary:"rgba(255, 255, 255, 0.75)",TextTertiary:"rgba(255, 255, 255, 0.5)",TextTertiary2:"rgba(255, 255, 255, 0.75)",TextQuaternary:"rgba(255, 255, 255, 0.34)",TextReverse:"rgba(255, 255, 255, 0.9)",TextReverse2:"rgba(255, 255, 255, 0.75)",TextReverse3:"rgba(255, 255, 255, 0.5)",TextReverse4:"rgba(255, 255, 255, 0.34)",ConstTextInverse:"rgba(255, 255, 255, 1.0)",ConstTextInverse2:"rgba(255, 255, 255, 0.9)",ConstTextInverse3:"rgba(255, 255, 255, 0.75)",ConstTextInverse4:"rgba(255, 255, 255, 0.5)",ConstTextInverse5:"rgba(255, 255, 255, 0.34)",BGPrimary:"rgba(18, 18, 18, 1.0)",BGPrimary2:"rgba(255, 255, 255, 0.04)",BGSecondary2:"rgba(255, 255, 255, 0.08)",BGSecondary:"rgba(37, 37, 37, 1.0)",BGTertiary:"rgba(46, 46, 46, 1.0)",BGTertiary2:"rgba(255, 255, 255, 0.12)",BGQuaternary:"rgba(56, 56, 56, 1.0)",BGInput:"rgba(255, 255, 255, 0.12)",BGInput2:"rgba(255, 255, 255, 0.08)",BGPlaceholderDefault:"rgba(255, 255, 255, 0.08)",BGPlaceholderOpaque:"rgba(37, 37, 37, 1.0)",BGView:"rgba(255, 255, 255, 0.04)",BGView2:"rgba(255, 255, 255, 0.0)",BGCreation:"rgba(18, 18, 18, 1.0)",BGCreation2:"rgba(27, 27, 27, 1.0)",BGCreation3:"rgba(18, 18, 18, 1.0)",ConstBGInverse:"rgba(0, 0, 0, 1.0)",ConstBGInverse2:"rgba(0, 0, 0, 0.6)",BGInverse3:"rgba(37, 37, 37, 0.6)",ConstBGContainer:"rgba(255, 255, 255, 0.12)",ConstBGContainer2:"rgba(255, 255, 255, 0.08)",ConstBGContainer3:"rgba(255, 255, 255, 0.04)",BGReverse:"rgba(18, 18, 18, 1.0)",BGBrand:"rgba(254, 44, 85, 0.34)",BGReverse2:"rgba(18, 18, 18, 0.9)",SDPrimary:"rgba(0, 0, 0, 0.8)",SDSecondary:"rgba(0, 0, 0, 0.68)",SDTertiary:"rgba(0, 0, 0, 0.5)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineInput:"rgba(255, 255, 255, 0.5)",LinePrimary:"rgba(255, 255, 255, 0.0)",LinePrimary2:"rgba(255, 255, 255, 0.2)",LineSecondary:"rgba(255, 255, 255, 0.12)",LineSecondary2:"rgba(255, 255, 255, 0.0)",LineSecondary3:"rgba(255, 255, 255, 0.0)",LineReverse2:"rgba(255, 255, 255, 0.12)",LineReverse3:"rgba(255, 255, 255, 0.0)",LineInverse:"rgba(255, 255, 255, 0.0)",ConstLineInverse:"rgba(255, 255, 255, 0.2)",ConstLineInverse2:"rgba(255, 255, 255, 0.12)",TagGreenText:"rgba(178, 255, 217, 1.0)",TagGreenBG:"rgba(89, 128, 102, 1.0)",TagPurpleText:"rgba(255, 178, 217, 1.0)",TagPurpleBG:"rgba(128, 89, 108, 1.0)",TagBrownText:"rgba(255, 179, 179, 1.0)",TagBrownBG:"rgba(128, 89, 89, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1)",ConstSecondary2:"rgba(16, 162, 197, 1)",AssistColorYellow:"rgba(250, 206, 21, 1)",BGMessageIcon:"rgba(255, 255, 255, 0.08)",BGMessageOperateHover:"rgba(255, 255, 255, 0.12)"},b={Proxima:'"IBM Plex Sans", ProximaNova, Arial, Tahoma, PingFangSC, sans-serif',Sofia:'"IBM Plex Sans", SofiaPro, Arial, Tahoma, PingFangSC, sans-serif'},P={P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}};var D;!function(e){e[e.Dark=0]="Dark",e[e.Bright=1]="Bright",e[e.System=2]="System"}(D||(D={}));const M={direction:"ltr",isDark:!1,colors:{Primary:"rgba(254, 44, 85, 1.0)",Primary2:"rgba(22, 24, 35, 1.0)",Secondary:"rgba(32, 213, 236, 1.0)",Secondary2:"rgba(0, 198, 233, 1.0)",Link:"rgba(254, 44, 85, 1.0)",Link2:"rgba(254, 44, 85, 1.0)",Link3:"rgba(254, 44, 85, 1.0)",Positive:"rgba(11, 224, 155, 1.0)",Negative:"rgba(255, 76, 58, 1.0)",ToastDefault:"rgba(84, 84, 84, 0.92)",ToastNegative:"rgba(255, 76, 58, 0.92)",TextPrimary:"rgba(22, 24, 35, 1.0)",TextSecondary:"rgba(22, 24, 35, 0.75)",TextTertiary:"rgba(22, 24, 35, 0.5)",TextTertiary2:"rgba(22, 24, 35, 0.5)",TextQuaternary:"rgba(22, 24, 35, 0.34)",TextReverse:"rgba(22, 24, 35, 1.0)",TextReverse2:"rgba(22, 24, 35, 0.75)",TextReverse3:"rgba(22, 24, 35, 0.5)",TextReverse4:"rgba(22, 24, 35, 0.34)",ConstTextInverse:"rgba(255, 255, 255, 1.0)",ConstTextInverse2:"rgba(255, 255, 255, 0.9)",ConstTextInverse3:"rgba(255, 255, 255, 0.75)",ConstTextInverse4:"rgba(255, 255, 255, 0.5)",ConstTextInverse5:"rgba(255, 255, 255, 0.34)",BGPrimary:"rgba(255, 255, 255, 1.0)",BGPrimary2:"rgba(255, 255, 255, 1.0)",BGSecondary2:"rgba(255, 255, 255, 1.0)",BGSecondary:"rgba(255, 255, 255, 1.0)",BGTertiary:"rgba(255, 255, 255, 1.0)",BGTertiary2:"rgba(255, 255, 255, 1.0)",BGQuaternary:"rgba(255, 255, 255, 1.0)",BGInput:"rgba(22, 24, 35, 0.06)",BGInput2:"rgba(22, 24, 35, 0.06)",BGPlaceholderDefault:"rgba(22, 24, 35, 0.06)",BGPlaceholderOpaque:"rgba(241, 241, 241, 1.0)",BGView:"rgba(22, 24, 35, 0.03)",BGView2:"rgba(22, 24, 35, 0.03)",BGCreation:"rgba(18, 18, 18, 1.0)",BGCreation2:"rgba(27, 27, 27, 1.0)",BGCreation3:"rgba(248, 248, 248, 1.0)",ConstBGInverse:"rgba(0, 0, 0, 1.0)",ConstBGInverse2:"rgba(0, 0, 0, 0.6)",BGInverse3:"rgba(37, 37, 37, 0.6)",ConstBGContainer:"rgba(255, 255, 255, 0.12)",ConstBGContainer2:"rgba(255, 255, 255, 0.08)",ConstBGContainer3:"rgba(255, 255, 255, 0.04)",BGReverse:"rgba(255, 255, 255, 1.0)",BGBrand:"rgba(254, 44, 85, 0.06)",BGReverse2:"rgba(255, 255, 255, 0.9)",SDPrimary:"rgba(0, 0, 0, 0.8)",SDSecondary:"rgba(0, 0, 0, 0.5)",SDTertiary:"rgba(0, 0, 0, 0.2)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineInput:"rgba(22, 24, 35, 0.5)",LinePrimary:"rgba(22, 24, 35, 0.2)",LinePrimary2:"rgba(22, 24, 35, 0.2)",LineSecondary:"rgba(22, 24, 35, 0.12)",LineSecondary2:"rgba(22, 24, 35, 0.12)",LineSecondary3:"rgba(22, 24, 35, 0.03)",LineReverse2:"rgba(22, 24, 35, 0.12)",LineReverse3:"rgba(22, 24, 35, 0.12)",LineInverse:"rgba(22, 24, 35, 0.2)",ConstLineInverse:"rgba(255, 255, 255, 0.2)",ConstLineInverse2:"rgba(255, 255, 255, 0.12)",TagGreenText:"rgba(89, 128, 108, 1.0)",TagGreenBG:"rgba(239, 245, 242, 1.0)",TagPurpleText:"rgba(128, 89, 121, 1.0)",TagPurpleBG:"rgba(246, 240, 245, 1.0)",TagBrownText:"rgba(128, 89, 89, 1.0)",TagBrownBG:"rgba(245, 240, 240, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1.0)",ConstSecondary2:"rgba(16, 162, 197, 1.0)",AssistColorYellow:"rgba(250, 206, 21, 1)",BGMessageIcon:"rgb(241, 241, 242)",BGMessageOperateHover:"rgba(196, 196, 196, .425)"},link:{color:"#0078d4",hoverColor:"#004578",activeColor:"#004578",focusColor:"#0078d4",visitedColor:"#0078d4"},selection:{background:"rgba(141, 214, 249, 0.35)"},text:{fontFamily:'"SofiaPro", PingFangSC, sans-serif',fontSize:"14px",color:"#000"},border:{radius:"3px"},boxShadowBase:"0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108)",markdown:{blockquote:{color:"#4e7182",backgroundColor:"#eaf8ff"},inlineCode:{color:"hotpink",background:"rgba(70, 94, 105, 0.05)"}},typography:{P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}},fontFamilies:{Proxima:"ProximaNova, Arial, Tahoma, PingFangSC, sans-serif",Sofia:"SofiaPro, Arial, Tahoma, PingFangSC, sans-serif"},fontWeights:{normal:400,medium:500,semiBold:600,bold:700}};function x(e,t){var i;const o=Object.create(null);for(const[n,a]of Object.entries(e)){const e=t[n];o[n]="object"==typeof e?x(a,e):null!==(i=t[n])&&void 0!==i?i:a}return o}function w(e){const{isDark:t,isMobile:i,lang:o}=e,n={};return t&&(n.colors=L,n.isDark=!0),i&&(n.typography=P),"vi-VN"===o?n.fontFamilies=b:"ar"!==o&&"he-IL"!==o&&"ur"!==o||(n.direction="rtl"),x(M,n)}const U=(0,y.createContext)({value:!1,toggle:R()});var k=i(4589),F=i(34685),B=i.n(F);function G({children:e,supportRoutes:t}){const i=function(e,t){const i=(0,k.lX)(t);function o(t){return(o,n)=>{const{pathname:a,href:r}=function(e){var t;if("string"==typeof e){const t=new URL(e,window.location.origin);return{pathname:t.pathname,href:t.href}}return{pathname:null!==(t=e.pathname)&&void 0!==t?t:"",href:`${e.pathname}${e.search}${e.hash}`}}(o);!function(e,t){return t.some((t=>B()(t).test(e)))}(a,e)?t?window.location.replace(r):window.location.href=r:t?i.replace(o,n):i.push(o,n)}}return Object.create(i,{push:{enumerable:!0,value:o(!1)},replace:{enumerable:!0,value:o(!0)}})}(t);return(0,o.jsx)(f.F0,Object.assign({history:i},{children:e}),void 0)}function j({children:e}){const t=(0,f.k6)();return(0,o.jsx)(I.o,Object.assign({history:t},{children:e}),void 0)}function H({children:e}){const t=(0,y.useMemo)((()=>matchMedia("(prefers-color-schema: dark)")),[]),i=(0,y.useMemo)((()=>"1"===v.parse(window.location.search)._r),[]),[n,a]=(0,y.useState)(!i&&t.matches),r=(0,y.useCallback)((e=>{i||a(e.matches)}),[i]);(0,y.useEffect)((()=>(t.addListener(r),()=>{t.removeListener(r)})),[t,r]);const s=(0,y.useMemo)((()=>({value:n,toggle:a})),[n]);return(0,o.jsx)(U.Provider,Object.assign({value:s},{children:e}),void 0)}const W=({children:e,supportRoutes:t})=>{var i,n,a,r;const s=null!==(r=null!==(a=null===(n=null===(i=window.SIGI_STATE)||void 0===i?void 0:i.I18n)||void 0===n?void 0:n.lang)&&void 0!==a?a:document.documentElement.getAttribute("lang"))&&void 0!==r?r:"en";return(0,y.useEffect)((()=>{(null===history||void 0===history?void 0:history.scrollRestoration)&&(history.scrollRestoration="manual")})),(0,o.jsx)(C.B6,{children:(0,o.jsx)(u.bd,Object.assign({lang:s},{children:(0,o.jsx)(y.StrictMode,{children:(0,o.jsx)(G,Object.assign({supportRoutes:t},{children:(0,o.jsx)(j,{children:(0,o.jsx)(H,{children:e},void 0)},void 0)}),void 0)},void 0)}),void 0)},void 0)};var V=i(29046),Y=i(24142),K=i(9236),z=i(94582),$=i(84785),q=i(2734),Z=i(73306),Q=i(83421),X=i(16926),J=i(89974),ee=i.n(J),te=i(34708),ie=i(57244),oe=i(481);let ne=class{constructor(){this.handlePolicyConfirmOnFYP=e=>{oe.WB.event("tns_web_trending_setting",e)},this.handleAgeGateResponse=(e,t)=>{oe.WB.event("age_gate_response",{enter_type:"click_sign_up",is_success:e?1:0,error_code:t})}}handleUniversalPopShow(e){oe.WB.event("tns_general_dialog_show",e)}handleUniversalPopClick(e){oe.WB.event("qa_tns_general_dialog_click",e)}};ne=(0,p.__decorate)([(0,ie.G)()],ne);var ae=i(95918),re=i(27918);const se=(0,ae.Z)("a",{target:"e1k110iq0"})((({theme:e})=>(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary"})),"label:ALink;");var le=i(73566),ce=i(48185),de=i(19630),_e=i(60595),ue=i(20948),pe=i(56979),me=i(49584),Ee=i(47165),ge=i(4206);let he=class{constructor(e){this.fetch=e}getUniversalPopConfig(e){return this.fetch.get("/api/policy/notice/",{query:e})}setUniversalPopOperation(e){return this.fetch.post("https://www.tiktok.com/api/policy/notice/approve/",{body:(0,v.stringify)(e)})}getPolicyContent(e){return this.fetch.get("https://www.tiktok.com/web/api/v2/project/articleContent/",{query:e})}};he=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],he);let Te=class extends le.D{constructor(e,t){super(),this.service=e,this.appContext=t,this.defaultState={popupConfig:null}}setPopupConfig(e,t){e.popupConfig=t}getPopupConfig(e){return e.pipe((0,ue.M)(this.appContext.state$),(0,pe.U)((([e,t])=>{var i;return{locale:null!==(i=t.lang)&&void 0!==i?i:"en"}})),(0,me.z)((({locale:e})=>this.service.getUniversalPopConfig({locale:e}).pipe((0,pe.U)((({policy_notices:e})=>{var t;return this.getActions().setPopupConfig(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:null)}))))),(0,Ee.n)({}))}};function Se({link:e,lang:t}){return e.replace("${locale}",t)}function Oe({onHide:e,report:t,popupService:i,common:{business:o,policy_version:n,style:a},action:{text:r,approve:s,operation:l,dismiss:c,link:d,extra:_,new_web_tab:u,link_type:p}}){return m=>{if(null==m||m.preventDefault(),t.handleUniversalPopClick({style:a,business:o,button_info:r}),"callback"===p||s)return i.setUniversalPopOperation({business:o,extra:_,policy_version:n,style:a,operation:null==l?void 0:l.toString()}).subscribe(),void(null==e||e());c?null==e||e():p&&"h5"!==p||!d||(u?window.open(d):window.location.href=d)}}(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Te.prototype,"setPopupConfig",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Te.prototype,"getPopupConfig",null),Te=(0,p.__decorate)([(0,de.Y)("UniversalPop"),(0,p.__metadata)("design:paramtypes",[he,$.G])],Te);const Ae=function(){return(0,o.jsxs)(C.ql,{children:[(0,o.jsx)("meta",{name:"google",content:"notranslate"},"google"),",",(0,o.jsx)("meta",{name:"format-detection",content:"telephone=no"},"format-detection"),",",(0,o.jsx)("link",{rel:"shortcut icon",href:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/logo_144c91a.png",type:"image/x-icon"},"shortcut")]},void 0)},Ie=["//v16.tiktokcdn.com","//p16-va.tiktokcdn.com","//s20.tiktokcdn.com"],ve=function(){return(0,o.jsx)(C.ql,{children:Ie.map(((e,t)=>(0,o.jsx)("link",{rel:"dns-prefetch",href:e},`prefetch-${t+1}`)))},void 0)};var ye=i(40022),Ce=i(23753),fe=i(51302);const Ne=function({appContext:e,slardarBid:t}){const{$abTestVersion:i,$env:n,$botType:a,$appType:r,$user:s,$wid:l,$region:c,$isMobile:d,$domains:_}=null!=e?e:{},{pathname:u}=(0,f.TH)(),p=(0,y.useMemo)((()=>{var e;return Object.assign(Object.assign({region:null!=c?c:"",botType:null!=a?a:"",isMobile:Boolean(d).toString(),isDowngrade:(0,ye.W)().toString(),isLogin:Boolean(s).toString()},((e={parameters:{},versionName:""})=>{const t={};try{const i=e.parameters||{};Object.entries(i).forEach((([e,i])=>{t[e]=i.vid}))}catch(e){console.error("Abtest config parse error",e)}return t})(i)),{uid:null!==(e=null==s?void 0:s.uid)&&void 0!==e?e:""})}),[i,a,d,s,c]),m=(0,Ce.A4)(null!=r?r:"m",{bid:t,userId:l,pid:(0,fe.BB)(u),context:p,env:"boe"===(null==n?void 0:n.type)?"test":"production",domain:null==_?void 0:_.slardar});return(0,o.jsx)(C.ql,{children:(0,o.jsx)("script",{children:m},void 0)},void 0)},Re=function({appContext:e,slardarBid:t}){const{$language:i,$botType:n}=(0,q.m7)(e),a=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.ql,{htmlAttributes:{lang:i}},void 0),(0,o.jsx)(Ae,{},void 0),(0,o.jsx)(Ne,{appContext:e,slardarBid:a},void 0),(0,o.jsx)(ve,{},void 0)]},void 0)};var Le=i(493),be=i(95673),Pe=i(50218),De=i(47741);function Me(e){return null==e||"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):Array.isArray(e)?e.map((e=>Me(e))):"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(((t,i)=>(t[i]=Me(e[i]),t)),{}):Me(String(e))}class xe extends y.PureComponent{dynamicAddCompKey(e=[]){return e&&e.length?e.map(Me).reduce(((e,t,i)=>{const[n="",a={}]=t;return""!==n&&0!==Object.keys(a).length&&e.push((0,o.jsx)(De.wd,Object.assign({dangerouslyExposeHtml:!0,id:n},{children:(0,o.jsx)(De.TV,{genericType:n,genericKey:n,schema:a},void 0)}),`${n}-${i}`)),e}),[]):null}render(){const{wrappedHead:e,metaParams:t={},jsonldList:i=[],children:n}=this.props,{title:a="",keywords:r="",description:s="",robotsContent:l="",canonicalHref:c="",alternateHref:d="",amphtmlHref:_="",applicableDevice:u="",hreflangList:p=[]}=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e,{children:[(0,o.jsx)("title",{children:a},void 0),r&&(0,o.jsx)("meta",{name:"keywords",content:r},"keywords"),s&&(0,o.jsx)("meta",{name:"description",content:s},"description"),l&&(0,o.jsx)("meta",{name:"robots",content:l},"robots"),u&&(0,o.jsx)("meta",{name:"applicable-device",content:u},"applicable-device"),c&&(0,o.jsx)("link",{rel:"canonical",href:c},"canonical"),_&&(0,o.jsx)("link",{rel:"amphtml",href:_},"amphtml"),d&&(0,o.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:d},"alternate-media"),p.length?p.map((({hreflang:e,href:t})=>(0,o.jsx)("link",{rel:"alternate",hrefLang:e,href:t},e))):null,n]},void 0),this.dynamicAddCompKey(i)]},void 0)}}const we=xe;var Ue=i(92311);const ke=function({appContext:e}){const{metaParams:t,jsonldList:i}=(0,K.mp)(Ue.q),{pathname:n}=(0,f.TH)();let a=n;try{a=encodeURI(decodeURI(n))}catch(e){}const r=(0,y.useMemo)((()=>{let i=[];const{robotsContent:o}=null!=t?t:{};if(o&&!o.includes("noindex")){const{$host:t}=null!=e?e:{},o=(0,Pe.Hg)(a);i=[{hreflang:"x-default",href:o?`https://${t}`:`https://${t}${a}`}],be.LANGUAGE_LIST.forEach((({value:e})=>{const n=e.replace(/(^zh([_-]\w+)*)/g,"zh-Hant"),r=o?`https://${t}/${n}/`:`https://${t}${a}?lang=${n}`;i.push({hreflang:n,href:r})}))}return Object.assign(Object.assign({},t),{hreflangList:i})}),[e,t,a]);return(0,o.jsx)(we,{wrappedHead:C.ql,metaParams:r,jsonldList:i},void 0)};var Fe=i(19328);const Be=function(e){const{appContext:t}=e,{location:i}=(0,f.k6)(),n=`https://${null==t?void 0:t.$host}${i.pathname}${i.search}`,a=Object.assign(Object.assign({},(0,K.mp)(Fe.I).value),{"og:url":n});return(0,o.jsx)(C.ql,{children:Object.keys(a).map((e=>(0,o.jsx)("meta",{property:e,content:a[e]},e)))},void 0)};var Ge=i(56277);const je=(0,ae.Z)("div",{target:"eyt76ed0"})({width:"100vw",top:re.Mz-1+"px",left:"0",marginTop:"1px",position:"fixed",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",zIndex:999,background:"#fff",display:"flex",justifyContent:"center",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,re.Cx)("bottom"))},"label:DivBannerContainer;"),He=(0,ae.Z)("div",{target:"eyt76ed1"})([{width:re.XP,maxWidth:re.XP,paddingTop:"16px",paddingBottom:"16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,re.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),We=(0,ae.Z)("div",{target:"eyt76ed2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginEnd:"24px"})],"label:DivLeftContainer;"),Ve=(0,ae.Z)("div",{target:"eyt76ed3"})([{display:"flex",alignItems:"center"}],"label:DivRightContainer;"),Ye="48px",Ke=(0,ae.Z)("div",{target:"eyt76ed4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:"inline-block",width:Ye,height:Ye,flex:"0 0 48px",padding:"0"},(0,re.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),ze=(0,ae.Z)("img",{target:"eyt76ed5"})({width:Ye,height:Ye},"label:ImgIcon;"),$e=(0,ae.Z)("div",{target:"eyt76ed6"})([({theme:e})=>(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{alignSelf:"center"}],"label:DivContentWrapper;"),qe=(0,ae.Z)("h4",{target:"eyt76ed8"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:H4Title;"),Ze=(0,ae.Z)(Ge.Z,{target:"eyt76ed9"})({width:"24px",height:"24px",cursor:"pointer"},"label:StyledCloseIcon;"),Qe=(0,ae.Z)("div",{target:"eyt76ed10"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-of-type)":(0,re.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),Xe=(0,ae.Z)("a",{target:"eyt76ed11"})((({theme:e})=>[(0,re.GI)({theme:e,color:"Primary",typography:"P2"}),{":link, :active, :hover, :visited":{color:e.colors.Primary}}]),{textDecoration:"none",whiteSpace:"nowrap",":hover":{textDecoration:"none"}},"label:AButtonLink;"),Je=(0,y.memo)((function({title:e,content:t,icon:i,buttons:n,onShow:a}){const r=(0,y.useRef)(null);return(0,y.useEffect)((()=>{var e,t;null==a||a(null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,o.jsx)(je,Object.assign({ref:r},{children:(0,o.jsxs)(He,{children:[(0,o.jsxs)(We,{children:[(0,o.jsx)(Ke,{children:i&&(0,o.jsx)(ze,{alt:"icon",src:i},void 0)},void 0),(0,o.jsxs)($e,{children:[e&&(0,o.jsx)(qe,{},void 0),(0,o.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,o.jsx)(y.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,o.jsx)(Ve,{children:n.map((({text:e,link:t,onClick:i,isCloseStyle:n})=>n?(0,o.jsx)("div",Object.assign({onClick:i},{children:(0,o.jsx)(Ze,{},void 0)}),e):(0,o.jsx)(Qe,{children:t?(0,o.jsx)(Xe,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,o.jsx)(Xe,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)})),et="inline-block",tt=(0,ae.Z)("div",{target:"e1qek5np0"})((({theme:{colors:e}})=>({width:"100vw",top:0,left:0,position:"fixed",zIndex:999,background:e.ConstBGInverse2,display:"flex",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,re.Cx)("bottom"))})),"label:DivBannerContainer;"),it=(0,ae.Z)("div",{target:"e1qek5np1"})([{width:re.XP,maxWidth:re.XP,padding:"12px 12px 12px 16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,re.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),ot=(0,ae.Z)("div",{target:"e1qek5np2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginEnd:"8px"})],"label:DivLeftContainer;"),nt=(0,ae.Z)("div",{target:"e1qek5np3"})([{display:"flex",alignItems:"flex-start"}],"label:DivRightContainer;"),at="48px",rt=(0,ae.Z)("div",{target:"e1qek5np4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:et,width:at,height:at,flex:"0 0 48px",padding:"0"},(0,re.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),st=(0,ae.Z)("img",{target:"e1qek5np5"})({width:at,height:at},"label:ImgIcon;"),lt=(0,ae.Z)("div",{target:"e1qek5np6"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"ConstTextInverse"}),{display:et,fontSize:"15px",lineHeight:"18px",alignSelf:"center",a:{display:et,alignSelf:"center",fontSize:"15px",lineHeight:"18px",fontWeight:700,color:`${e.colors.ConstTextInverse} !important`}}]),"label:DivContentWrapper;"),ct=(0,ae.Z)("h4",{target:"e1qek5np7"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"ConstTextInverse"})]),"label:H4Title;"),dt=(0,ae.Z)(Ge.Z,{target:"e1qek5np8"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"},"label:StyledCloseIcon;"),_t=(0,ae.Z)("div",{target:"e1qek5np9"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-child)":(0,re.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),ut=(0,ae.Z)("a",{target:"e1qek5np10"})((({theme:e})=>[(0,re.GI)({theme:e,color:"Primary",typography:"P2"})]),{textDecoration:"none",whiteSpace:"nowrap",textAlign:"center"},"label:AButtonLink;"),pt=(0,y.memo)((function({title:e,content:t,icon:i,buttons:n,onShow:a}){const r=(0,y.useRef)(null);return(0,y.useEffect)((()=>{var e,t;null==a||a(null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,o.jsx)(tt,Object.assign({ref:r},{children:(0,o.jsxs)(it,{children:[(0,o.jsxs)(ot,{children:[(0,o.jsx)(rt,{children:i&&(0,o.jsx)(st,{alt:"icon",src:i},void 0)},void 0),(0,o.jsxs)(lt,{children:[e&&(0,o.jsx)(ct,{children:e},void 0),(0,o.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,o.jsx)(y.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,o.jsx)(nt,{children:n.map((({text:e,link:t,onClick:i,isCloseStyle:n})=>n?(0,o.jsx)("div",Object.assign({onClick:i},{children:(0,o.jsx)(dt,{fill:"#fff"},void 0)}),e):(0,o.jsx)(_t,{children:t?(0,o.jsx)(ut,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,o.jsx)(ut,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)}));var mt=i(54251),Et=i(80537);const gt=(0,ae.Z)("div",{target:"es36pgp0"})({pointerEvents:"auto",position:"absolute",boxSizing:"border-box",left:"0",bottom:"0",width:"100%",background:"#fff",borderRadius:"12px 12px 0 0",padding:"16px 20px 20px"},"label:DivContainer;"),ht=(0,ae.Z)("div",{target:"es36pgp1"})({textAlign:"center",position:"relative",":not(:empty)":{paddingBottom:"16px",marginBottom:"12px","::after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,re.Cx)("bottom"))}},"label:DivTitleContainer;"),Tt=(0,ae.Z)("img",{target:"es36pgp2"})({display:"inline-block"},"label:ImgIcon;"),St=(0,ae.Z)("h4",{target:"es36pgp3"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"semiBold"})),"label:H4Title;"),Ot=(0,ae.Z)("p",{target:"es36pgp4"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{marginBottom:"32px"},"label:PContent;"),At=(0,ae.Z)("div",{target:"es36pgp5"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},"label:DivButtonWrapper;"),It=(0,ae.Z)(Et.W,{target:"es36pgp6"})((({theme:{direction:e}})=>({"& + &":(0,re.YJ)({direction:e,marginStart:"24px"})})),"label:StyledButton;"),vt=(0,y.memo)((function({icon:e,title:t,content:i,buttons:n}){return(0,o.jsx)(mt.AR,Object.assign({compact:!0,isOpen:!0},{children:(0,o.jsxs)(gt,{children:[(0,o.jsxs)(ht,{children:[e&&(0,o.jsx)(Tt,{src:e},void 0),t&&(0,o.jsx)(St,{children:t},void 0)]},void 0),(0,o.jsx)(Ot,{children:i},void 0),(0,o.jsx)(At,{children:n.map((({text:e,highlight:t,line:i,onClick:n})=>(0,o.jsx)(It,Object.assign({size:"medium",buttonTheme:t?"primary":i?"line":"default",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0)}));var yt=i(81773);const Ct=(0,ae.Z)("div",{target:"e1uf1l9s0"})((({theme:e,theme:{colors:t}})=>[{position:"relative",width:"400px",background:t.BGTertiary,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px",borderRadius:"8px",whiteSpace:"pre-line"},(0,re.GI)({theme:e,fontFamily:"Proxima"})]),"label:DivContainer;"),ft=(0,ae.Z)(Ct,{target:"e1uf1l9s1"})({width:"84vw",maxWidth:"360px",maxHeight:"480px",overflow:"auto",paddingTop:"20px"},"label:DivContainerMobile;"),Nt=(0,ae.Z)("img",{target:"e1uf1l9s2"})({height:"48px"},"label:ImgIcon;"),Rt=(0,ae.Z)("h4",{target:"e1uf1l9s3"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P0",fontWeight:"bold"}),{textAlign:"center",padding:"0 32px",flex:"0 0 auto",order:0,wordBreak:"break-word"}]),"label:H4Title;"),Lt=(0,ae.Z)("h2",{target:"e1uf1l9s4"})((({theme:e})=>[(0,re.GI)({theme:e,fontWeight:"bold"}),{textAlign:"center",padding:"0 20px",flex:"0 0 auto",order:0,wordBreak:"break-word",fontSize:"20px",lineHeight:"24px"}]),"label:H2Title;"),bt=(0,ae.Z)("p",{target:"e1uf1l9s5"})((({theme:e})=>({color:e.colors.TextSecondary,fontSize:"15px",lineHeight:"18px",padding:"0 32px",textAlign:"center",marginTop:"7px"})),"label:PContent;"),Pt=(0,ae.Z)(bt,{target:"e1uf1l9s6"})({maxHeight:"300px",overflow:"auto",padding:"0 20px"},"label:PContentMobile;"),Dt=(0,ae.Z)("div",{target:"e1uf1l9s7"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"24px 32px 32px"},"label:DivButtonWrapper;"),Mt=(0,ae.Z)(Dt,{target:"e1uf1l9s8"})((({theme:{colors:e}})=>({borderTop:`.5px solid ${e.LineSecondary}`,padding:0,marginTop:"20px",boxSizing:"border-box"})),"label:DivButtonWrapperMobile;"),xt=(0,ae.Z)("div",{target:"e1uf1l9s9"})({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box",padding:"22px 20px 6px"},"label:DivButtonWrapperVertical;"),wt=(0,ae.Z)(Et.W,{target:"e1uf1l9s10"})((({theme:e,theme:{direction:t}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",":not(:first-of-type)":(0,re.YJ)({direction:t,marginStart:"16px"})},(0,re.GI)({theme:e,typography:"P2"})]),"label:StyledButton;"),Ut=(0,ae.Z)(Et.W,{target:"e1uf1l9s11"})((({theme:{colors:e}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",fontSize:"15px",lineHeight:"18px",":not(:first-child)":{marginTop:"2px",border:"none",color:e.TextTertiary}}]),"label:StyledButtonMobile;"),kt=(0,ae.Z)(wt,{target:"e1uf1l9s12"})((({isBold:e=!1,theme:{colors:t}})=>({width:"50%",border:"none",borderRadius:0,borderRight:`.5px solid ${t.LineSecondary}`,margin:"0 !important",color:e?t.TextPrimary:t.TextTertiary})),"label:StyledButtonLine;"),Ft=(0,y.memo)((function({title:e,content:t,isMobile:i=!1,icon:n,buttons:a}){const r=i&&a.some((e=>e.highlight)),s=i?r?xt:Mt:Dt,l=i?r?Ut:kt:wt;return i?(0,o.jsx)(yt.u_,Object.assign({maskCloseable:!1,visible:!0},{children:(0,o.jsxs)(ft,{children:[n&&(0,o.jsx)(Nt,{src:n},void 0),e&&(0,o.jsx)(Lt,{children:e},void 0),t&&(0,o.jsx)(Pt,{children:t},void 0),(0,o.jsx)(s,{children:a.map((({text:e,isBold:t,highlight:i,line:n,onClick:a})=>(0,o.jsx)(l,Object.assign({isBold:t,buttonTheme:i?"primary":n?"default":"line",onClick:a},{children:e}),e)))},void 0)]},void 0)}),void 0):(0,o.jsx)(mt.AR,Object.assign({compact:!0,closeOnBackdropClick:!1,isOpen:!0},{children:(0,o.jsxs)(Ct,{children:[n&&(0,o.jsx)(Nt,{src:n},void 0),e&&(0,o.jsx)(Rt,{children:e},void 0),t&&(0,o.jsx)(bt,{children:t},void 0),(0,o.jsx)(s,{children:a.map((({text:e,highlight:t,line:i,onClick:n})=>(0,o.jsx)(l,Object.assign({buttonTheme:t?"primary":i?"default":"line",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0)})),Bt=function(e){var t;const{onHide:i}=e,[n,a]=(0,y.useState)(!0),r=(0,y.useCallback)((()=>{null==i||i(),a(!1)}),[i]),{$isMobile:s}=null!==(t=(0,te.L)((()=>["$isMobile"]),[]))&&void 0!==t?t:{},l=function({onHide:e}){var t;const{popupConfig:i}=(0,K.mp)(Te),{$language:n="en",$isMobile:a=!1}=null!==(t=(0,te.L)((()=>["$language","$isMobile"]),[]))&&void 0!==t?t:{},r=function({onHide:e,lang:t,$isMobile:i}){const{popupConfig:o}=(0,K.mp)(Te),n=(0,X.fz)(he),a=(0,X.fz)(ne);return(0,y.useMemo)((()=>{if(!o)return[];const r=i?0:1,s=i?-1:0,{actions:l=[],first_button_highlight:c,business:d,policy_version:_,style:u}=o;return(c&&i?l:[...l].reverse()).map((({text:i,is_bold:o=!1,link:l,link_type:p,approve:m,extra:E,operation:g,dismiss:h,is_close_style:T,new_web_tab:S},O)=>{const A="string"==typeof l?Se({link:l,lang:t}):void 0;return{text:i,isBold:o,highlight:Boolean(c)&&r===O,line:!c||s===O,link:A,isCloseStyle:T,onClick:Oe({onHide:e,report:a,popupService:n,common:{business:d,policy_version:_,style:u},action:{text:i,approve:m,dismiss:h,extra:E,link:l,link_type:p,new_web_tab:S,operation:g}})}}))}),[i,t,e,o,n,a])}({onHide:e,lang:n,$isMobile:a}),s=function({lang:e,onHide:t}){const{popupConfig:i}=(0,K.mp)(Te),n=(0,X.fz)(he),a=(0,X.fz)(ne);return(0,y.useMemo)((()=>{if(!i)return null;const{body_link_list:r,body:s}=i;if(!(null==r?void 0:r.length)||!/%s/.test(s))return s;const l=[],c=s;let d=0;const _=/%s/g;return r.forEach((({link:r="",name:s,dismiss:u,approve:p,operation:m,new_web_tab:E})=>{const g=_.exec(c);if(!g)return;const h=Se({link:r,lang:e}),T=Oe({onHide:t,popupService:n,report:a,common:ee()(i,["business","policy_version","style"]),action:{text:s,approve:p,dismiss:u,operation:m,new_web_tab:E,link:h}}),S=(0,o.jsx)(se,Object.assign({target:"_blank",rel:"noopener noreferer",href:h,onClick:T},{children:s}),void 0);l.push(c.slice(d,g.index)),l.push(S),d=Number(g.index)+g[0].length})),l.push(c.slice(d)),l}),[e,t,i,n,a])}({lang:n,onHide:e});if(!i)return null;const{title:l,icon_url:c,body:d,style:_}=i;return{title:l,icon:c,body:d,style:_,content:s,buttons:r}}({onHide:r}),c=(0,K.qj)(Te);if((0,y.useEffect)((()=>{c.getPopupConfig()}),[c]),!l||"none"===l.style||!n)return null;const{title:d,icon:_,content:u,style:p,buttons:m}=l;switch(p){case"pc_banner":return(0,o.jsx)(Je,{title:d,content:u,icon:_,buttons:m,onShow:e.onShow},void 0);case"mobile_banner":return(0,o.jsx)(pt,{title:d,content:u,icon:_,buttons:m,onShow:e.onShow},void 0);case"pop":return(0,o.jsx)(Ft,{isMobile:s,title:d,content:u,icon:_,buttons:m},void 0);case"float":case"bottom":return(0,o.jsx)(vt,{title:d,content:u,icon:_,buttons:m},void 0);default:return null}};var Gt=i(30121);const jt=function({path:e}){const t=(0,y.useCallback)((()=>(window.location.href=`/404?fromUrl=${encodeURIComponent(window.location.pathname)}`,null)),[]);return(0,o.jsx)(f.AW,{path:e,render:t},void 0)};var Ht=i(35468),Wt=i(65763),Vt=i(30074);const Yt=(0,ae.Z)("div",{target:"eaxh4gs0"})((({theme:{direction:e}})=>[{position:"relative",borderRadius:"8px",overflow:"hidden"},(0,re.YJ)({direction:e,start:"unset"})]),"label:DivFrameContainer;");Yt.defaultProps=Object.assign(Object.assign({},Yt.defaultProps),{"data-e2e":"login-frame"});const Kt=(0,ae.Z)("button",{target:"eaxh4gs1"})((({theme:{direction:e}})=>[re.Ph,{position:"absolute",top:"24px",width:"40px",height:"40px",cursor:"pointer",background:"rgba(22, 24, 35, .06)",borderRadius:"100%",transition:"all ease-in-out 200ms",":hover":{background:"rgba(22, 24, 35, .1)"},":active":{background:"rgba(22, 24, 35, .14)"}},(0,re.YJ)({direction:e,end:"24px"})]),"label:ButtonCloseWrapper;"),zt=(0,ae.Z)(Ge.Z,{target:"eaxh4gs2"})({position:"absolute",top:"8px",right:"8px",width:"24px",height:"24px"},"label:StyledXMark;"),$t=(0,ae.Z)("iframe",{target:"eaxh4gs3"})({overflow:"hidden",display:"block",width:"472px",height:"calc(100vh - 64px)",maxHeight:"660px",background:"transparent",border:"none"},"label:IframeLoginSite;"),qt=function(){const[e,t]=(0,K.b7)(Wt.r),i=(0,y.useCallback)(((e="click_x")=>{t.closeModal({enter_method:e})}),[t]),n=(0,y.useCallback)((()=>{i("click_x")}),[i]),a=(0,y.useCallback)((e=>{let i="click_x";i=0===e||2===e?"click_x":"click_blank",t.closeModal({enter_method:i})}),[t]);return(0,y.useEffect)((()=>{function e(e){var o;if("object"==typeof e.data&&e.origin===location.origin)switch(e.data.event){case"deleteSuccess":i(),window.location.href=null!==(o=e.data.redirectUrl)&&void 0!==o?o:"/";break;case"loginCancel":i();break;case"hasLogin":i(),window.location.reload();break;case"loginSuccess":if(i("login_success"),e.data.message)return Ht.h.open({content:e.data.message,duration:3,widthType:"half",style:{zIndex:10011}}),void setTimeout((()=>{e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload()}),3e3);e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload();break;case"hideOuterClose":t.setCloseable(!1)}}return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}}),[t,i]),(0,o.jsx)(yt.u_,Object.assign({visible:e.isOpen,zIndex:10010,maskCloseable:!1,keyboardCloseable:e.closeable,onClose:a},{children:(0,o.jsxs)(Yt,{children:[e.closeable&&(0,o.jsx)(Kt,Object.assign({onClick:n},{children:(0,o.jsx)(zt,{},void 0)}),void 0),(0,o.jsx)($t,{src:e.url,style:e.iframeStyle},e.url)]},void 0)}),void 0)};var Zt=i(26890),Qt=i(26591),Xt=i(49755),Jt=i(13964),ei=i(17230),ti=i(50986),ii=i(35435),oi=i(10026),ni=i(93859);let ai=class{constructor(e){this.fetch=e}getNewestReply(){return this.fetch.get("/api/feedback/v1/newest_reply/",{query:{aid:1284,appkey:"tiktok-web"}})}};ai=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],ai);let ri=class extends le.D{constructor(e){super(),this.service=e,this.defaultState={hasNewFeedbackReply:!1,lastFeedbackReplyId:0}}setReply(e,t){e.lastFeedbackReplyId=t.feedback_id,e.hasNewFeedbackReply=t.has_reply}getNewestReply(e){return e.pipe((0,ii.w)((()=>(0,ti.F)(6e5).pipe((0,oi.O)(0)).pipe((0,ii.w)((()=>this.service.getNewestReply().pipe((0,ni.b)((e=>{e.data||console.warn("There is no data in response.")})),(0,pe.U)((e=>e.data?this.getActions().setReply(e.data):this.noop())),(0,Ee.n)({}))))))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ri.prototype,"setReply",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ri.prototype,"getNewestReply",null),ri=(0,p.__decorate)([(0,de.Y)("Feedback"),(0,p.__metadata)("design:paramtypes",[ai])],ri);var si=i(21025),li=i(44465),ci=i(81578);const di=()=>{const e=(0,y.useRef)(""),t=[V.Ad.searchHome,V.Ad.searchUser,V.Ad.searchVideo],{pathname:i}=(0,f.TH)(),o=t.includes(i)&&!t.includes(e.current)||!t.includes(i),n=(0,y.useCallback)((t=>e.current=t),[]);return{needRefresh:o,setPathname:n,pathname:i}};var _i=i(89749),ui=i.n(_i),pi=i(23028),mi=i(39526),Ei=i(1e3);function gi(){const{pathname:e}=(0,f.TH)();return(0,y.useMemo)((()=>(0,f.LX)(e,{path:Ei.$J.liveGoLive,exact:!0})),[e])}var hi=i(53095),Ti=i(82346),Si=i(68854),Oi=i(11348),Ai=i(91218);let Ii=class{constructor(e){this.service=e,this.reportErrorLog=e=>{this.service.sendLog(null==e?void 0:e.message,"error")}}};Ii=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],Ii);var vi=i(9663),yi=i.n(vi);const Ci="REPORT_FIRST_FRAME_SUCCESS_FOR_OPEN_LIVE_FLAG";function fi(){(0,Jt.D$)(Ci,"1")}function Ni(){(0,Jt.e8)(Ci)}var Ri;!function(e){e.TraceSuccess="live_sdk_go_live_trace_success",e.TraceError="live_sdk_go_live_trace_fail",e.CreateRoomInfoSuccess="live_sdk_create_room_info_success",e.CreateRoomInfoFail="live_sdk_craete_room_info_fail",e.GoLiveSuccess="live_sdk_openLive_success",e.GoLivePreviewFirstFrameSuccess="live_sdk_openLive_preview_first_frame_success",e.GoLivePlayerError="live_sdk_go_live_player_error",e.GoLiveError="live_sdk_openLive_error",e.GoLiveWarning="live_sdk_openLive_warning",e.GoLiveStreamkeyError="live_sdk_openLive_streamkey_error",e.GoLiveStreamurlError="live_sdk_openLive_serverUrl_error",e.EndLiveSuccess="live_sdk_end_live_success",e.EndLiveFail="live_sdk_end_live_fail",e.LoadingTooLong="live_sdk_go_live_page_loading_too_long",e.EndLiveDataSuccess="live_sdk_end_live_data_success",e.EndLiveDataFailed="live_sdk_end_live_data_fail"}(Ri||(Ri={}));let Li=class{constructor(e){this.service=e,this.defaultTag={where:"GoLive"},this.defaultMetrics={count:1},this.handlePlayerError=(e,t)=>{this.service.emitEvent("live_sdk_go_live_player_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{roomId:String(t),code:String(e.status),message:e.message}))},this.handleTraceSuccess=()=>{this.service.emitEvent("live_sdk_go_live_trace_success",this.defaultMetrics,this.defaultTag)},this.handleTraceError=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_trace_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomSuccess=()=>{this.service.emitEvent("live_sdk_openLive_success",this.defaultMetrics,this.defaultTag)},this.handleCreateRoomFirstFrameSuccess=()=>{"1"===(0,Jt.le)(Ci)&&(this.service.emitEvent("live_sdk_openLive_preview_first_frame_success",this.defaultMetrics,this.defaultTag),Ni())},this.reportGoLiveError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleCreateRoomFail=({errorCode:e,errorMessage:t})=>{this.service.sendLog(null!=t?t:"","error"),this.service.emitEvent("live_sdk_openLive_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomWarning=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_openLive_warning",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleGoLiveStreamkeyError=()=>{this.service.emitEvent("live_sdk_openLive_streamkey_error",this.defaultMetrics,this.defaultTag)},this.handleGoLiveStreamurlError=()=>{this.service.emitEvent("live_sdk_openLive_serverUrl_error",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoSuccess=()=>{this.service.emitEvent("live_sdk_create_room_info_success",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_craete_room_info_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveSuccess=()=>{this.service.emitEvent("live_sdk_end_live_success",this.defaultMetrics,this.defaultTag)},this.handleEndLiveFail=()=>{this.service.emitEvent("live_sdk_end_live_fail",this.defaultMetrics,this.defaultTag)},this.handleLoadingTooLong=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_page_loading_too_long",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_end_live_data_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataSuccess=()=>{this.service.emitEvent("live_sdk_end_live_data_success",this.defaultMetrics,this.defaultTag)}}};function bi(e){return(0,hi.z)((t=>{var i,o;return 0!==t.status_code&&(null===(i=t.data)||void 0===i?void 0:i.prompts)?((!e||e&&t.status_code&&(null==e?void 0:e(t.status_code)))&&Ht.h.open({content:null===(o=t.data)||void 0===o?void 0:o.prompts,duration:3}),(0,Ti.of)(Object.assign(Object.assign({},t),{error:t}))):(0,Ti.of)(t)}))}Li=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],Li);let Pi=class{constructor(e){this.fetch=e,this.getLivePermission=()=>this.fetch.get("/webcast/room/live_podcast/",{baseUrlType:4}).pipe(bi()),this.applyPermission=e=>this.fetch.post("/webcast/room/live_permission/apply/",{query:e,baseUrlType:4}).pipe(bi()),this.getApplyInfo=e=>this.fetch.get("/webcast/room/live_permission/apply_info/",{query:e,baseUrlType:4}).pipe(bi())}};Pi=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],Pi);let Di=class extends le.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.goLiveSlardar=i,this.defaultState={}}setPermissionData(e,t){e.permissionInfo={showComputerLiveEntrance:t.showComputerLiveEntrance,hasOBSLivePermission:t.hasOBSLivePermission,hasLiveApplyPermission:t.hasLiveApplyPermission}}getLivePermission(e){return e.pipe((0,hi.z)((()=>this.service.getLivePermission().pipe((0,hi.z)((({data:e,error:t})=>{var i,o,n,a;if(t)return(0,Ti.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}));if(null==e?void 0:e.can_be_live_podcast){const t=null!==(o=null===(i=null==e?void 0:e.live_scenario)||void 0===i?void 0:i.enable_live_third_party)&&void 0!==o&&o,r=!t&&null!==(a=null===(n=null==e?void 0:e.live_permission_apply)||void 0===n?void 0:n.enable_third_party)&&void 0!==a&&a;return(0,Ti.of)(this.getActions().setPermissionData({showComputerLiveEntrance:t||r,hasOBSLivePermission:t,hasLiveApplyPermission:r}))}return(0,Ti.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}))})),(0,Si.K)((e=>(this.goLiveSlardar.handleTraceError({errorCode:"1001",errorMessage:e.message}),this.errorSlardar.reportErrorLog(e),Oi.E)))))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Di.prototype,"setPermissionData",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Di.prototype,"getLivePermission",null),Di=(0,p.__decorate)([(0,de.Y)("LivePermission"),(0,p.__metadata)("design:paramtypes",[Pi,Ii,Li])],Di);var Mi,xi=i(5549),wi=i(90035);!function(e){e.GoLiveStreamKeyInfo="__tiktok_stream_key",e.GoLiveTopicId="goLive_topic_id",e.GoLiveGameTagId="goLive_game_tag_id",e.GoLiveTopicShow="__tiktok_topic_info",e.GoLiveEndStreamSetting="go_live_stream_setting",e.GoLivePermissionApply="go_live_permission_apply",e.HideMatureThemesRedDot="hide_go_live_mature_themes_red_dot",e.StudioDownloadVisited="studio_download_visited",e.CompleteSubscritionGuide="live_anchor_complete_subscription_guide",e.SubscriptionSubOnlyChat="live_subscription_sub_only_chat",e.SharePlatform="webapp-share-platform",e.LiveCreatorHubPopup="webapp-live-creator-hub-popup"}(Mi||(Mi={}));const Ui=6048e5;let ki=class{constructor(){this.getGoLiveStreamKeyInfo=(e,t)=>{const i=(0,Jt.le)("__tiktok_stream_key");if(i){const{streamKey:e,expiration:o,roomId:n}=JSON.parse(i);if(o-Date.now()>1e3&&t===n)return{streamKey:e,expiration:o-Date.now(),roomId:n}}return{streamKey:e,roomId:t,expiration:Ui}},this.setGoLiveStreamKeyInfo=(e,t)=>{const i={streamKey:e,roomId:t,expiration:Date.now()+Ui};return(0,Jt.D$)("__tiktok_stream_key",JSON.stringify(i))},this.getGoLiveTopicId=e=>(0,Jt.le)("goLive_topic_id"+e),this.setGoLiveTopicId=(e,t)=>(0,Jt.D$)("goLive_topic_id"+t,e),this.getGoLiveGameTagId=e=>(0,Jt.le)("goLive_game_tag_id"+e),this.setGoLiveGameTagId=(e,t)=>(0,Jt.D$)("goLive_game_tag_id"+t,e),this.getGoLiveTopicShow=e=>!!e&&"0"===(0,Jt.le)(`__tiktok_topic_info${e}`,"0"),this.setGoLiveTopicShow=e=>(0,Jt.D$)(`__tiktok_topic_info${e}`,"1"),this.setGoLiveEndStreamSetting=e=>(0,Jt.D$)("go_live_stream_setting",e?"1":"0"),this.getGoLiveEndStreamSetting=()=>"1"===(0,Jt.le)("go_live_stream_setting","0"),this.setHideGoLiveMatureThemesRedDot=()=>(0,Jt.D$)("hide_go_live_mature_themes_red_dot","1"),this.getHideGoLiveMatureThemesRedDot=()=>"1"===(0,Jt.le)("hide_go_live_mature_themes_red_dot","0"),this.getLiveRoomPreviousPage=()=>{try{const{twoPrev:e}=JSON.parse((0,Jt.St)(ei.m8));return!(0,Jt.St)(ei.vN)&&e}catch(e){return!1}}}setHasAppliedPermission(e){return(0,Jt.D$)(`go_live_permission_apply${e}`,"1")}getHasApplyPermissionBefore(e){return"1"===(0,Jt.le)(`go_live_permission_apply${e}`,"0")}getHasCompleteSubscriptionGuide(){return"1"===(0,Jt.le)("live_anchor_complete_subscription_guide","0")}setHasCompleteSubscriptionGuide(){return(0,Jt.D$)("live_anchor_complete_subscription_guide","1")}getSubscriptionSubOnlyChat(){return"1"===(0,Jt.le)("live_subscription_sub_only_chat","0")}setSubscriptionSubOnlyChat(e){return(0,Jt.D$)("live_subscription_sub_only_chat",e?"1":"0")}get studioDownloadVisited(){return"1"===(0,Jt.le)("studio_download_visited","0")}setStudioDownloadVisited(){return(0,Jt.D$)("studio_download_visited","1")}getSharePlatform(e){const t=(0,Jt.le)("webapp-share-platform");return t?JSON.parse(t)[e]:{}}setSharePlatform(e,t){return(0,Jt.D$)("webapp-share-platform",JSON.stringify({[e]:t}))}sortSharePlatform(e,t){var i,o;const n=null!==(i=this.getSharePlatform(e))&&void 0!==i?i:{},a=null!==(o=n[t])&&void 0!==o?o:0;if(n[t]=a+1,a===Number.MAX_SAFE_INTEGER){const e=Object.keys(n).sort(((e,t)=>{var i,o;return(null!==(i=n[e])&&void 0!==i?i:0)-(null!==(o=n[t])&&void 0!==o?o:0)}));e.forEach(((e,t)=>{n[e]=t}))}this.setSharePlatform(e,n)}getLiveCreatorHubPopup(){return"0"===(0,Jt.le)("webapp-live-creator-hub-popup","0")}setLiveCreatorHubPopup(e){return(0,Jt.D$)("webapp-live-creator-hub-popup",e?"1":"0")}};var Fi,Bi,Gi,ji,Hi;ki=(0,p.__decorate)([(0,ie.G)()],ki),function(e){e.GoLivePlayerError="livesdk_go_live_player_error",e.TakePageShow="livesdk_pm_live_takepage_show",e.ScreenshotClick="livesdk_cover_modify_screenshot_click",e.ScreenshotButtonShow="livesdk_cover_modify_screenshot_show",e.Take="livesdk_live_take",e.CoverChange="livesdk_cover_modify_click",e.WebTopicClick="livesdk_web_topic_click",e.AutoStopChange="livesdk_thirdparty_auto_stop",e.ServerUrlCopy="livesdk_server_url_copy",e.StreamKeyCopy="livesdk_stream_key_copy",e.StreamKeyChangePop="livesdk_stream_key_change_pop",e.ThirdPartyStatus="livesdk_thirdparty_status",e.ShareLinkCopy="livesdk_anchor_link_copy",e.EndLiveClick="livesdk_end_live_click",e.LiveOver="livesdk_live_over",e.AppealClick="livesdk_anchor_appeal_click",e.OBSRevokeAnchorPop="livesdk_obs_revoke_anchor_pop",e.OBSRevokeRemind="livesdk_obs_revoke_remind",e.LiveCenterEntranceShow="livesdk_anchor_live_center_entrance_show",e.LiveTakepageShow="livesdk_pm_live_takepage_show",e.LiveContentClick="livesdk_live_content_click",e.LiveContentResultShow="livesdk_live_content_result_show",e.LiveTopicClick="livesdk_live_topic_click",e.LiveMatureThemeIconClick="livesdk_mature_theme_icon_click",e.LiveMatureThemePopup="livesdk_mature_theme_popup",e.LiveMatureThemePopupClick="livesdk_mature_theme_popup_click"}(Fi||(Fi={})),function(e){e.FromObs="third_party",e.FromDirect="video_live"}(Bi||(Bi={})),function(e){e.On="on",e.Off="off"}(Gi||(Gi={})),function(e){e.On="on",e.Off="off"}(ji||(ji={})),function(e){e[e.Temp=0]="Temp",e[e.Permanent=1]="Permanent"}(Hi||(Hi={}));let Wi=class{constructor(){this.handlePlayerError=(e,t)=>{oe.WB.event("livesdk_go_live_player_error",{roomId:String(t),code:String(e.status),message:e.message})},this.getHashTagname=(e,t)=>{var i,o;return null!==(o=null===(i=e.find((e=>e.id===t)))||void 0===i?void 0:i.title)&&void 0!==o?o:"none"},this.handleScreenshotStatusClick=e=>{oe.WB.event("livesdk_cover_modify_screenshot_click",Object.assign(Object.assign({},e),{live_type:"third_party"}))},this.handleScreenshotButtonShow=e=>{oe.WB.event("livesdk_cover_modify_screenshot_show",Object.assign(Object.assign({},e),{live_type:"third_party"}))},this.handlePageShow=e=>{oe.WB.event("livesdk_pm_live_takepage_show",Object.assign(Object.assign({},e),{shoot_way:"",device:"web",live_type:"third_party"}))},this.handleCoverChange=()=>{oe.WB.event("livesdk_cover_modify_click")},this.OBSRevokeAnchorPop=e=>{oe.WB.event("livesdk_obs_revoke_anchor_pop",e)},this.OBSRevokeRemindShow=e=>{oe.WB.event("livesdk_obs_revoke_remind",e)},this.handleTopicClick=e=>{oe.WB.event("livesdk_web_topic_click",e)},this.handleAutoStopChange=e=>{oe.WB.event("livesdk_thirdparty_auto_stop",e)},this.handleServerUrlCopyClick=e=>{oe.WB.event("livesdk_server_url_copy",e)},this.handleStreamKeyCopyClick=e=>{oe.WB.event("livesdk_stream_key_copy",e)},this.handleStreamKeyChangePop=e=>{oe.WB.event("livesdk_stream_key_change_pop",e)},this.handleAppealClick=e=>{oe.WB.event("livesdk_anchor_appeal_click",e)},this.handleEndLiveClick=()=>{oe.WB.event("livesdk_end_live_click")},this.handleLiveOver=e=>{oe.WB.event("livesdk_live_over",e)},this.handleShareLinkCopy=()=>{oe.WB.event("livesdk_anchor_link_copy")},this.handleLiveStreamReport=e=>{oe.WB.event("livesdk_live_take",Object.assign({live_type:"third_party",send_gift_type:"open",event_type:"click",is_active_fans_show:0,show_active_user_ucnt:0,event_page:"live_take_button",game_label:e.game_label,game_label_id:e.game_label_id},e))},this.handleLiveCenterShow=e=>{oe.WB.event("livesdk_anchor_live_center_entrance_show",{anchor_id:e.anchor_id,enter_from:"profile_hover",app_name:"webapp"})},this.handleGoLiveShow=()=>{oe.WB.event("livesdk_pm_live_takepage_show")},this.handleLiveContentClick=e=>{oe.WB.event("livesdk_live_content_click",{anchor_id:e.anchor_id})},this.handleLiveContentConfirm=e=>{oe.WB.event("livesdk_live_content_result_show",{anchor_id:e.anchor_id,game_label:e.game_label,game_label_id:e.game_label_id})},this.handleLiveTopicClick=e=>{oe.WB.event("livesdk_live_topic_click",{anchor_id:e.anchor_id})},this.handleLiveMatureThemeIconClick=e=>{oe.WB.event("livesdk_mature_theme_icon_click",{action_type:e.action_type,enter_from:"live",anchor_id:e.anchor_id,source:"web"})},this.handleLiveMatureThemePopup=e=>{oe.WB.event("livesdk_mature_theme_popup",{enter_from:"live",anchor_id:e.anchor_id,source:"web"})},this.handleLiveMatureThemePopupClick=e=>{oe.WB.event("livesdk_mature_theme_popup_click",{action_type:e.action_type,enter_from:"live",anchor_id:e.anchor_id,source:"web"})}}};Wi=(0,p.__decorate)([(0,ie.G)()],Wi);var Vi=i(80279),Yi=i.n(Vi);const Ki=Object.values(Ei.$J);function zi(e){return[1,2,3].includes(e)}function $i(e){return Ki.some((t=>Yi()(t).test(e.replace(/\?(.*)/,""))))}var qi;!function(e){e.VideoLive="video_live",e.ThirdParty="third_party",e.Audio="audio",e.ScreenShare="screen_share",e.SocialLive="social_live",e.LiveStudio="live_studio"}(qi||(qi={}));var Zi=i(35167),Qi=i(21396);const Xi="ls_golive_livecontent_othergame",Ji="ls_golive_livecontent_other";var eo=i(30626);let to=class{constructor(e){this.fetch=e,this.getRoomInfo=e=>this.fetch.get("/webcast/room/info/",{query:e,baseUrlType:4}),this.getTopicTagsAndGameTags=()=>this.fetch.get("/webcast/room/hashtag/list/",{baseUrlType:4}),this.sendLiveChat=e=>this.fetch.post("/webcast/room/chat/",{query:e,baseUrlType:4,headers:{"Content-Type":eo.zv.FORM_ENCODE}}).pipe(bi()),this.sendLiveEmoteChat=e=>this.fetch.post("/webcast/room/emote_chat/",{query:e,baseUrlType:4,headers:{"Content-Type":eo.zv.FORM_ENCODE}}).pipe(bi())}};to=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],to);let io=class extends le.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.t=i,this.defaultState={roomTopics:[],roomGameTags:[],roomGameTopic:null,roomInfo:null,hotLiveRoomInfo:null,loadingState:{roomInfo:0,roomTopics:0}}}setRoomInfo(e,t){e.roomInfo=t}setHotLiveRoomInfo(e,t){e.hotLiveRoomInfo=t}setRoomTopicsAndGameTags(e,t){var i,o,n,a,r,s,l;e.roomTopics=null!==(n=null===(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.hashtag)||void 0===o?void 0:o.map((e=>Object.assign({id:0,title:"",image:{},namespace:0},e))))&&void 0!==n?n:[];const c={id:"0",show_name:(d=this.t)(Ji),short_name:d(Ji),full_name:d(Ji),game_category:[{game_type:0,title:""}]};var d;const _=function(e){return{id:"-1",show_name:e(Xi),short_name:e(Xi),full_name:e(Xi),game_category:[{game_type:3,title:""},{game_type:2,title:""},{game_type:1,title:""}]}}(this.t);e.roomGameTags=(null!==(r=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.game_tag_list)&&void 0!==r?r:[]).concat([c,_]).map((e=>Object.assign(Object.assign({},e),{id:`${e.id}`}))),e.roomGameTopic=null!==(l=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.game_hashtag)&&void 0!==l?l:null}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}getRoomInfo(e){return e.pipe((0,ii.w)((e=>this.service.getRoomInfo(e).pipe((0,ni.b)((({status_code:e})=>{(0,wi.k)(e,[0])})),(0,hi.z)((({status_code:e,data:t})=>0!==e?Oi.E:(0,Ti.of)(this.getActions().setRoomInfo(t)))),(0,oi.O)(this.getActions().setLoadingState({roomInfo:1})),(0,xi.l)(this.getActions().setLoadingState({roomInfo:2})),(0,Si.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,Ti.of)(this.getActions().setLoadingState({roomInfo:3})))))))))}getRoomTopics(e){return e.pipe((0,ii.w)((()=>this.service.getTopicTagsAndGameTags().pipe((0,hi.z)((e=>(0,Ti.of)(this.getActions().setRoomTopicsAndGameTags(e)))),(0,oi.O)(this.getActions().setLoadingState({roomTopics:1})),(0,xi.l)(this.getActions().setLoadingState({roomTopics:2})),(0,Si.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,Ti.of)(this.getActions().setLoadingState({roomTopics:3})))))))))}};var oo,no;(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],io.prototype,"setRoomInfo",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],io.prototype,"setHotLiveRoomInfo",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],io.prototype,"setRoomTopicsAndGameTags",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],io.prototype,"setLoadingState",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],io.prototype,"getRoomInfo",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],io.prototype,"getRoomTopics",null),io=(0,p.__decorate)([(0,de.Y)("Room"),(0,p.__param)(2,(0,Zi.t)(Qi.s)),(0,p.__metadata)("design:paramtypes",[to,Ii,Function])],io),function(e){e.DefinitionSelectedKey="definition_selected_key",e.HideDefinitionRedDot="hide_definition_red_dot",e.Volume="live_player_volume"}(oo||(oo={})),function(e){e.NetworkLagNoticeCount="live_quality_network_lag_notice_count",e.SwitchToAbrNoticeCount="live_quality_switch_abr_notice_count",e.ABRUpgradeNoticeCount="live_quality_abr_upgrade_notice_count",e.ABRDownGradeNoticeCount="live_quality_abr_downgrade_notice_count"}(no||(no={}));let ao=class{constructor(){this.setDefinitionSelectKey=e=>(0,Jt.D$)("definition_selected_key",e),this.getDefinitionSelectKey=()=>(0,Jt.le)("definition_selected_key",""),this.removeDefinitionSelectKey=()=>(0,Jt.e8)("definition_selected_key"),this.setHideDefinitionRedDot=()=>(0,Jt.D$)("hide_definition_red_dot","1"),this.getHideDefinitionRedDot=()=>"1"===(0,Jt.le)("hide_definition_red_dot","0"),this.setVolume=e=>(0,Jt.D$)("live_player_volume",e.toString()),this.getVolume=()=>{let e=+(0,Jt.le)("live_player_volume","60");return(e<0||e>1e3||isNaN(e))&&(e=60),e},this.setDailyFrequencyControlCount=(e,t)=>{const i=new Date,o=`${i.getFullYear()}${i.getMonth()}${i.getDate()}`;return(0,Jt.D$)(e,`${o}-${t.toString()}`)},this.getDailyFrequencyControlCount=e=>{const t=new Date,i=`${t.getFullYear()}${t.getMonth()}${t.getDate()}`,o=(0,Jt.le)(e);if(!o)return 0;const[n,a]=o.split("-");return n===i?Number(a):0}}};var ro;ao=(0,p.__decorate)([(0,ie.G)()],ao),function(e){e.StreamNotSupport="livesdk_stream_not_support"}(ro||(ro={}));let so=class{constructor(e){this.service=e,this.handleStreamNotSupported=({roomId:e,streamData:t})=>{this.service.emitEvent("livesdk_stream_not_support",{count:1},{roomId:e,streamData:t})}}};var lo;so=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],so),function(e){e.LiveStreamNotSupported="livesdk_stream_not_supported"}(lo||(lo={}));let co=class{constructor(){this.handleStreamNotSupported=e=>{oe.WB.event("livesdk_stream_not_supported",e)}}};co=(0,p.__decorate)([(0,ie.G)()],co);var _o,uo,po,mo,Eo,go=i(14379),ho=i.n(go);!function(e){e[e.On=1]="On",e[e.Off=2]="Off"}(_o||(_o={})),function(e){e.LD="ld",e.SD="sd",e.HD="hd",e.HD60="hd_60",e.UHD="uhd",e.UHD60="uhd_60",e.ORIGIN="origin",e.AUTO="auto"}(uo||(uo={})),function(e){e.H264="h264",e.Bytevc1="bytevc1"}(po||(po={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.OBS=1]="OBS",e[e.MEDIA=2]="MEDIA",e[e.AUDIO=3]="AUDIO",e[e.SCREEN=4]="SCREEN",e[e.SOCIAL_LIVE=5]="SOCIAL_LIVE",e[e.STUDIO=6]="STUDIO"}(mo||(mo={})),function(e){e.Normal="normal",e.PoorConnection="poor_connection",e.Offline="offline"}(Eo||(Eo={}));const To=Object.freeze(["auto","origin","uhd_60","uhd","hd_60","hd","sd","ld"]);function So(e){return po.Bytevc1===e.VCodec}function Oo(e,t){const i=function(e){return e.map((e=>{var t;return{key:e.sdkKey,label:null!==(t=e.definition)&&void 0!==t?t:""}}))}(e).map((e=>e.key)),o=function(e,t){return e.find((e=>e.sdkKey===t))}(e,t&&i.includes(t)?t:i[0]);return o||(console.error(`[stream] getMainStream: no stream found by ${t}`),null)}let Ao=class extends le.D{constructor(e,t,i,o){super(),this.livePlayerStorage=e,this.liveStreamSlardar=t,this.liveStreamReport=i,this.appContext=o,this.defaultState={streamItems:[],isSupportDefinition:!1,currentDefinitionKey:"auto",abrDefinitionLabel:"",abrDefinitionKey:void 0,abrBitrate:0,networkStatus:"normal",isFatal:!1}}setNetworkStatus(e,t){e.networkStatus=t}setStreamInfo(e,t){e.streamItems=t}clearStreamInfo(e){e.streamItems=[],e.abrDefinitionLabel="",e.currentDefinitionKey="auto",e.isSupportDefinition=!1,e.isFatal=!1}setActiveStream(e,t){const{key:i,url:o}=t;e.streamItems=e.streamItems.map((e=>Object.assign(Object.assign({},e),{isActive:i===e.sdkKey,activeUrl:o})))}setSupportDefinition(e,t){e.isSupportDefinition=t}setCurrentDefinitionKey(e,t){e.currentDefinitionKey=t}setAbrDefinitionLabel(e,t){e.abrDefinitionLabel=t}setAbrDefinitionKey(e,t){e.abrDefinitionKey=t}setAbrBitrate(e,t){e.abrBitrate=t}setIsFatal(e,t){e.isFatal=t}updateAbrDefition(e){return e.pipe((0,hi.z)((e=>{var t,i;return(0,Ti.of)(this.getActions().setAbrDefinitionLabel(null!==(t=null==e?void 0:e.definition)&&void 0!==t?t:""),this.getActions().setAbrDefinitionKey(null==e?void 0:e.sdkKey),this.getActions().setAbrBitrate(null!==(i=null==e?void 0:e.bitrate)&&void 0!==i?i:0))})))}updateDefinition(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>{var i,o;if("auto"===e)return(0,Ti.of)(this.getActions().setCurrentDefinitionKey(e));{const n=Oo(t.streamItems,e),a={key:null!==(i=null==n?void 0:n.sdkKey)&&void 0!==i?i:"",url:null!==(o=null==n?void 0:n.url.mainFLV)&&void 0!==o?o:""};return this.livePlayerStorage.setDefinitionSelectKey(a.key),(0,Ti.of)(this.getActions().setCurrentDefinitionKey(e),this.getActions().setActiveStream(a),this.getActions().updateAbrDefition(n))}})))}updateDefinitionByBitrate(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>{const i=(o=t.streamItems,n=e,o.find((e=>e.bitrate===n)));var o,n;return(null==i?void 0:i.sdkKey)?(0,Ti.of)(this.getActions().updateAbrDefition(i)):Oi.E})))}updateStreamInfoByRoomInfo(e){return e.pipe((0,ue.M)(this.appContext.state$),(0,hi.z)((([e,{appContext:t}])=>{var i,o,n,a,r,s,l,c,d,_,u,p,m,E,g,h;const{streamData:T,notSupportData:S}=function(e){var t,i,o,n;try{const a={common:{},data:{}},r={},s=e?JSON.parse(null!==(n=null===(o=null===(i=null===(t=e.stream_url)||void 0===t?void 0:t.live_core_sdk_data)||void 0===i?void 0:i.pull_data)||void 0===o?void 0:o.stream_data)&&void 0!==n?n:""):{};if(a.common=s.common,s.data)for(const e in s.data)if(s.data[e].main){const t=JSON.parse(s.data[e].main.sdk_params);So(t)?(r[e]={},r[e].main=s.data[e].main):(a.data[e]={},a.data[e].main=s.data[e].main,a.data[e].main.sdk_params=t),s.data[e].backup&&(So(JSON.parse(s.data[e].backup.sdk_params))?r[e].backup=s.data[e].backup:(a.data[e].backup=s.data[e].backup,a.data[e].backup.sdk_params=t))}return{streamData:a,notSupportData:r}}catch(e){return{streamData:{},notSupportData:{}}}}(e),O=function(e){return ho()(e,(e=>To.indexOf(e.sdkKey)))}((y=T,C=null!==(r=null===(a=null===(n=null===(o=null===(i=e.stream_url)||void 0===i?void 0:i.live_core_sdk_data)||void 0===o?void 0:o.pull_data)||void 0===n?void 0:n.options)||void 0===a?void 0:a.qualities)&&void 0!==r?r:[],Object.keys(y.data).map((e=>{var t,i,o;const n=y.data[e],a=null===(t=C.find((t=>t.sdk_key===e)))||void 0===t?void 0:t.name;let r=n.main.sdk_params.vbitrate;return"origin"===e&&(r=2e6),{sdkKey:e,definition:a,bitrate:r,url:{mainFLV:n.main.flv,mainHLS:n.main.hls,backupFLV:null===(i=n.backup)||void 0===i?void 0:i.flv,backupHLS:null===(o=n.backup)||void 0===o?void 0:o.hls},activeUrl:"",isActive:!1,pullFailedCount:0}})))),A="v2"===(0,pi.x)(null==t?void 0:t.$abTestVersion,"live_player_enable_1080p"),I=null!==(s=(0,pi.x)(null==t?void 0:t.$abTestVersion,"live_auto_definition_tips"))&&void 0!==s?s:"v1",v=A?O:O.filter((e=>!e.sdkKey.includes("_60")));var y,C;if(Object.keys(S).length){const t=JSON.stringify(S);this.liveStreamReport.handleStreamNotSupported({roomId:null!==(l=e.id_str)&&void 0!==l?l:"",streamData:t}),this.liveStreamSlardar.handleStreamNotSupported({roomId:null!==(c=e.id_str)&&void 0!==c?c:"",streamData:t})}const f=!!(null==e?void 0:e.live_room_mode)&&[1,4,6].includes(e.live_room_mode);let N=null!==(E=null===(m=null===(p=null===(u=null===(_=null===(d=e.stream_url)||void 0===d?void 0:d.live_core_sdk_data)||void 0===_?void 0:_.pull_data)||void 0===u?void 0:u.options)||void 0===p?void 0:p.default_quality)||void 0===m?void 0:m.sdk_key)&&void 0!==E?E:v[0].sdkKey,R="auto";"v1"===I&&f&&(N=this.livePlayerStorage.getDefinitionSelectKey()||N,R=N);const L=Oo(v,N);return(0,Ti.of)(this.getActions().setStreamInfo(v),this.getActions().setSupportDefinition(f),this.getActions().setCurrentDefinitionKey(R),this.getActions().updateAbrDefition(L),this.getActions().setActiveStream({key:null!==(g=null==L?void 0:L.sdkKey)&&void 0!==g?g:"",url:null!==(h=null==L?void 0:L.url.mainFLV)&&void 0!==h?h:""}),this.getActions().setIsFatal(!1))})))}changeAvailableStream(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>{const i=t.streamItems.map((e=>e.isActive?Object.assign(Object.assign({},e),{pullFailedCount:e.pullFailedCount+1}):e)),o="auto"===t.currentDefinitionKey,n=[],a=function(e){let t=0;const i=function(e){return e.reduce(((e,t)=>(e.push(t.url.mainFLV),e.push(t.url.mainHLS),t.url.backupFLV&&e.push(t.url.backupFLV),t.url.backupHLS&&e.push(t.url.backupHLS),e)),[])}(e).length;let o;const n=4*(2*e.length<i?2:1);for(;!o&&t<n;)o=e.find((e=>e.pullFailedCount===t)),t++;if(o){const t=function(e,t){var i,o;let n=e.url.mainFLV;switch(t){case 1:n=null!==(i=e.url.backupFLV)&&void 0!==i?i:e.url.mainHLS;break;case 2:n=e.url.backupFLV?e.url.mainHLS:e.url.mainFLV;break;case 3:n=null!==(o=e.url.backupHLS)&&void 0!==o?o:e.url.mainHLS;break;default:n=e.url.mainFLV}return n}(o,o.pullFailedCount%4);return function(e,t,i){return e.map((e=>Object.assign(Object.assign({},e),{isActive:t===e.sdkKey,activeUrl:i})))}(e,o.sdkKey,t)}return e.map((e=>Object.assign(Object.assign({},e),{isActive:!1})))}(i),r=a.find((e=>e.isActive));return r?o?n.push(this.getActions().updateAbrDefition(r)):n.push(this.getActions().setCurrentDefinitionKey(r.sdkKey)):t.streamItems.length>0&&n.push(this.getActions().setIsFatal(!0)),(0,Ti.of)(this.getActions().setStreamInfo(a),...n)})))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setNetworkStatus",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Array]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setStreamInfo",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"clearStreamInfo",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setActiveStream",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setSupportDefinition",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setCurrentDefinitionKey",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setAbrDefinitionLabel",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setAbrDefinitionKey",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setAbrBitrate",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"setIsFatal",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"updateAbrDefition",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"updateDefinition",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"updateDefinitionByBitrate",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"updateStreamInfoByRoomInfo",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ao.prototype,"changeAvailableStream",null),Ao=(0,p.__decorate)([(0,de.Y)("Stream"),(0,p.__metadata)("design:paramtypes",[ao,so,co,$.G])],Ao);let Io=class{constructor(e){this.fetch=e,this.getCreateInfo=()=>this.fetch.get("/webcast/room/create_info/",{query:{aid:ei.CO},baseUrlType:5}),this.updateScreenshotStatus=e=>this.fetch.post("/webcast/room/screenshot_cover/update/",{query:e,baseUrlType:5,headers:{"Content-Type":eo.zv.FORM_ENCODE}}),this.createRoom=e=>this.fetch.post("/webcast/room/create/",{query:e,baseUrlType:5,headers:{"Content-Type":eo.zv.FORM_ENCODE}}).pipe(bi((e=>[4003035,20063].includes(e)))),this.endLive=()=>this.fetch.post("/webcast/room/finish_abnormal/",{baseUrlType:5}),this.setTopicTag=e=>this.fetch.post("/webcast/room/hashtag/set/",{query:e,baseUrlType:4,headers:{"Content-Type":eo.zv.FORM_ENCODE}}),this.uploadImage=e=>{const t=new FormData;return t.append("image",e),this.fetch.post("/webcast/room/upload/image/",{body:t,omitContentType:!0,baseUrlType:5})},this.getEndLiveInfo=e=>this.fetch.get("/webcast/data/data_center/room_stats/",{query:e,baseUrlType:5}),this.getLastBanRecord=e=>this.fetch.get("/webcast/review/get_latest_ban_record/",{query:Object.assign(Object.assign({},e),{ban_type:2}),baseUrlType:5})}};Io=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],Io);let vo=class extends le.D{constructor(e,t,i,o,n,a,r){super(),this.service=e,this.roomModule=t,this.roomService=i,this.streamModule=o,this.slardar=n,this.storage=a,this.teaReport=r,this.defaultState={liveStatus:0,roomCreateInfo:null,showSuicidePrevention:!1,showAppealModal:!1,roomStats:null,isTempPermission:!1,streamKey:"",streamKeyExpiration:Ui,loadingState:{createRoomInfo:0,roomCreateInfo:0,OBSAccessRecallInfo:0}}}setLiveStatus(e,t){e.liveStatus=t}setIsTempPermission(e,t){e.isTempPermission=t}setRoomCreateInfo(e,t){e.roomCreateInfo=t}setRoomStatsData(e,t){e.roomStats=t}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}setSuicidePrevention(e,t){e.showSuicidePrevention=t}setStreamKey(e,t){e.streamKey=t.streamKey,e.streamKeyExpiration=t.expiration}setAppealVisible(e,t){e.showAppealModal=t}getCreateRoomInfo(e){return e.pipe((0,ii.w)((e=>{const{shouldGetRoomInfo:t}=e;return this.service.getCreateInfo().pipe((0,ni.b)((({status_code:e})=>{(0,wi.k)(e,[0])})),(0,hi.z)((({data:e,status_code:i})=>{if(0!==i)return this.slardar.handleGetCreateRoomInfoFail({errorCode:i.toString(),errorMessage:""}),this.slardar.handleTraceError({errorCode:"1002",errorMessage:`status_code: ${i}`}),Oi.E;const{last_room_id_str:o,live_status:n,ban_status:a}=e,r=!(null==a?void 0:a.is_ban),s=[2,1,3].includes(n);var l;return r&&t&&(l=n,yi()(l)&&(1===l?fi():Ni())),r&&s&&t?this.roomService.getRoomInfo({is_anchor:!0,room_id:o}).pipe((0,hi.z)((({data:t})=>(this.slardar.handleGetCreateRoomInfoSuccess(),(0,Ti.of)(this.getActions().setRoomCreateInfo(e),...this.setRoomInfo(t),this.getActions().setLiveStatus(n)))))):(0,Ti.of)(this.getActions().setRoomCreateInfo(e),this.getActions().setLiveStatus(n))})),(0,oi.O)(this.getActions().setLoadingState({roomCreateInfo:1})),(0,xi.l)(this.getActions().setLoadingState({roomCreateInfo:2})),(0,Si.K)((e=>(this.slardar.reportGoLiveError(e),this.slardar.handleTraceError({errorCode:"1002",errorMessage:e.message}),this.slardar.handleGetCreateRoomInfoFail({errorCode:"-1",errorMessage:e.message}),(0,Ti.of)(this.getActions().setLoadingState({roomCreateInfo:3}))))))})))}createRoomInfo(e){return e.pipe((0,ue.M)(this.roomModule.state$),(0,hi.z)((([e,t])=>this.service.createRoom(e).pipe((0,hi.z)((({data:i,status_code:o})=>{var n,a;if(o&&0!==o)switch(o){case 2403:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ti.of)(this.getActions().setSuicidePrevention(!0),this.getActions().setLoadingState({createRoomInfo:3}));case 10018:case 4003035:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ti.of)(this.getActions().setLiveStatus(-1),this.getActions().setLoadingState({createRoomInfo:3}));case 50004:case 20063:case 30009:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ti.of)(this.getActions().setLoadingState({createRoomInfo:3}));case 4003105:return i.prompts&&Ht.h.open({content:i.prompts,duration:3}),this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,Ti.of)(this.getActions().setLoadingState({createRoomInfo:3}));default:throw new Error(`status_code: ${o}`)}this.slardar.handleCreateRoomSuccess(),fi(),this.slardar.handleTraceSuccess();const r=t.roomGameTags.find((t=>t.id===e.game_tag_id));return this.teaReport.handleLiveStreamReport({anchor_id:null===(n=i.owner)||void 0===n?void 0:n.id_str,room_id:i.id_str,live_type:(null==i?void 0:i.live_type_third_party)?"third_party":"video_live",game_label:null==r?void 0:r.show_name,game_label_id:null==r?void 0:r.id,choose_hashtag_id:e.hashtag_id,choose_hashtag_name:null===(a=t.roomTopics.find((t=>t.id===e.hashtag_id)))||void 0===a?void 0:a.title,cover_type:1===e.screenshot_cover_status?"screen_shot":"user_upload"}),(0,Ti.of)(...this.setRoomInfo(i),this.getActions().setLiveStatus(1),this.getActions().setLoadingState({createRoomInfo:2}))})),(0,oi.O)(this.getActions().setLoadingState({createRoomInfo:1})),(0,Si.K)((e=>(this.slardar.handleTraceError({errorCode:"1003",errorMessage:e.message}),this.slardar.handleCreateRoomFail({errorCode:"-1",errorMessage:e.message}),(0,Ti.of)(this.getActions().setLoadingState({createRoomInfo:3})))))))))}setRoomInfo(e){const t=[],[,i]=function(e){if(e){const t=e.lastIndexOf("/");return[e.substr(0,t),e.substr(t+1)]}return[]}(function(e){var t,i;const o=null==e?void 0:e.stream_url,n=null===(t=null==o?void 0:o.push_urls)||void 0===t?void 0:t[0];return null!==(i=null!=n?n:null==o?void 0:o.rtmp_push_url)&&void 0!==i?i:""}(e));if(i&&e.id_str){let o=i;const{streamKey:n,expiration:a}=this.storage.getGoLiveStreamKeyInfo(o,e.id_str);o!==n?o=n:this.storage.setGoLiveStreamKeyInfo(o,e.id_str),t.push(this.getActions().setStreamKey({streamKey:o,expiration:a}))}return t.push(this.roomModule.getActions().setRoomInfo(e)),t.push(this.streamModule.getActions().updateStreamInfoByRoomInfo(e)),t}endLive(e){return e.pipe((0,hi.z)((()=>this.service.endLive().pipe((0,hi.z)((()=>(this.slardar.handleEndLiveSuccess(),(0,Ti.of)(this.getActions().setLiveStatus(4),this.streamModule.getActions().setStreamInfo([]))))),(0,Si.K)((e=>(this.slardar.handleEndLiveFail(),this.slardar.reportGoLiveError(e),Oi.E)))))))}setTopicTag(e){return e.pipe((0,ii.w)((e=>this.service.setTopicTag(e).pipe((0,pe.U)((()=>this.noop())),(0,Si.K)((e=>(this.slardar.reportGoLiveError(e),Oi.E)))))))}getRoomStatsData(e){return e.pipe((0,hi.z)((e=>this.service.getEndLiveInfo({room_id:e}).pipe((0,ni.b)((({status_code:e})=>{(0,wi.k)(e,[0])})),(0,hi.z)((({data:e})=>(0,Ti.of)(this.getActions().setRoomStatsData(e.room_stats)))),(0,Si.K)((e=>(this.slardar.reportGoLiveError(e),Oi.E)))))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setLiveStatus",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setIsTempPermission",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setRoomCreateInfo",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setRoomStatsData",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setLoadingState",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setSuicidePrevention",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setStreamKey",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setAppealVisible",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"getCreateRoomInfo",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"createRoomInfo",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"endLive",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"setTopicTag",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],vo.prototype,"getRoomStatsData",null),vo=(0,p.__decorate)([(0,de.Y)("GoLive"),(0,p.__metadata)("design:paramtypes",[Io,io,to,Ao,Li,ki,Wi])],vo);var yo,Co=i(96942),fo=i.n(Co),No=i(8721),Ro=i(87608),Lo=i(56785),bo=i(3483);!function(e){e.EnterFollowingTab="enter_following_tab"}(yo||(yo={}));let Po=class{constructor(){this.handleAccountModalShow=e=>{oe.WB.event("enter_following_tab",e)}}};Po=(0,p.__decorate)([(0,ie.G)()],Po);var Do=i(84834),Mo=i(76759),xo=i(88650),wo=i(63092),Uo=i(11838),ko=i(48036),Fo=i(43683),Bo=i(90835),Go=i(75546);const jo=(0,Bo.Z)("div",{target:"e797se20"})((({theme:e})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",":hover":{textDecoration:"none"}},(0,re.VZ)({theme:e})]),"label:DivUserLinkContainer;"),Ho=(0,Bo.Z)(Go.k,{target:"e797se22"})((({isSmall:e=!1})=>[({theme:{direction:t}})=>[(0,re.YJ)({direction:t,marginEnd:e?"6px":"12px"}),(0,re.f1)({max:1071,style:(0,re.YJ)({direction:t,marginStart:"2px",marginEnd:"0"})})],{flex:"0 0 48px"}]),"label:StyledUserAvatar;"),Wo=(0,Bo.Z)(Uo.D,{target:"e797se24"})([{flexGrow:1,height:"32px",":hover":{textDecoration:"none"}},(0,re.f1)({max:1071,style:{display:"none"}})],"label:StyledUserContentLink;"),Vo=(re.wj,(0,Bo.Z)("div",{target:"e797se26"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivUserTitleWrapper;")),Yo=(0,Bo.Z)("h4",{target:"e797se27"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia"}),{marginTop:"-2px",maxWidth:"260px"}]),re.wj,"label:H4UserTitle;"),Ko=(0,Bo.Z)("p",{target:"e797se29"})((({theme:e})=>[(0,re.GI)({theme:e,fontWeight:"normal",typography:"P4",fontFamily:"Proxima",color:"TextSecondary"}),{lineHeight:"15px",maxWidth:"260px"}]),re.wj,"label:PUserDesc;"),zo=(0,Bo.Z)("div",{target:"e797se213"})((({theme:{direction:e}})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",height:"48px"},(0,re.f1)({max:1071,style:[{justifyContent:"center",width:"48px",height:"48px",marginBottom:"0",padding:"0 8px",borderRadius:"4px"},(0,re.YJ)({direction:e,marginStart:"2px"})]})]),"label:DivUserSkeletonContainerV2;"),$o=(0,Bo.Z)("div",{target:"e797se214"})((({theme:{direction:e}})=>[{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"48px"},(0,re.YJ)({direction:e,marginStart:"12px"}),(0,re.f1)({max:1071,style:{display:"none"}})]),"label:DivSkeletonTitleGroup;"),qo=(0,y.memo)((0,y.forwardRef)((function(e,t){const{uniqueId:i,e2ePrefix:n="",style:a,enterMethod:r="click_panel"}=e,s=(0,K.mp)(Mo.z,{selector:e=>{const t=e.users[i];if(!t)return null;const{verified:o,avatarThumb:n,secUid:a,nickname:r,roomId:s,id:l,relation:c}=t;return{avatarThumb:n,secUid:a,verified:o,nickname:r,roomId:s,id:l,uniqueId:i,relation:c}},dependencies:[i]}),{secUid:l,verified:c,nickname:d,relation:_}=(0,q.m7)(s),u=(0,xo.zW)(s),{isShowLive:p}=u,m=p?wo.G:Uo.D,E=(0,y.useRef)(null);(0,y.useImperativeHandle)(t,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=E.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0},get offsetLeft(){var e,t;return null!==(t=null===(e=E.current)||void 0===e?void 0:e.offsetLeft)&&void 0!==t?t:0}})),[]),(0,xo.TB)({isShowLive:p,autoReport:!0,once:!0,enterMethod:"suggested_others_photo",reportTrigger:p,reportValidator:()=>void 0!==_,user:s});const g=(0,xo.CN)({user:s,enterMethod:r}),{isInVideoFeedRedesign:h}=(0,ko.y7)(),{isDetailPageCoverQuantityTestGroup:T}=(0,ko.t1)(),{isInNewVideoDetail:S}=(0,ko.xy)(),O=h||T||S,A=(0,y.useMemo)((()=>O?{maxWidth:"145px"}:{}),[O]),I=(0,X.fz)(bo._e),v=(0,y.useCallback)((()=>{I.handleEnterPage("enter_personal_detail",{to_user_id:null==s?void 0:s.id,enter_method:r}),I.handleClickNav({target:p?"live_detail":"others_homepage"})}),[I,p,null==s?void 0:s.id,r]);return(0,o.jsxs)(jo,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,ref:E,onClick:v,style:a},{children:[(0,o.jsx)(m,Object.assign({uniqueId:i,secUid:l,teaParams:g,"data-e2e":`${n}-user-avatar`,onClick:Jt.UW},{children:(0,o.jsx)(Ho,Object.assign({liveTheme:6,size:32},u,{isShowLiveTag:!1}),void 0)}),void 0),(0,o.jsxs)(Wo,Object.assign({uniqueId:i,secUid:l,teaParams:g,onClick:Jt.UW},{children:[(0,o.jsxs)(Vo,{children:[(0,o.jsx)(Yo,Object.assign({style:A,"data-e2e":`${n}-user-title`},{children:i}),void 0),c&&(0,o.jsx)("div",Object.assign({"data-e2e":`${n}-user-bluev`},{children:(0,o.jsx)(Fo.Q,{width:14,height:14},void 0)}),void 0)]},void 0),(0,o.jsx)(Ko,Object.assign({style:A,"data-e2e":`${n}-user-desc`},{children:d}),void 0)]}),void 0)]}),void 0)})));var Zo=i(9578);const Qo=(0,y.memo)((function(){return(0,o.jsxs)(zo,{children:[(0,o.jsx)(Zo.Od.Avatar,{style:{width:32,height:32}},void 0),(0,o.jsxs)($o,{children:[(0,o.jsx)(Zo.Od.Title,{style:{width:107,height:12}},void 0),(0,o.jsx)(Zo.Od.Title,{style:{width:66,height:12}},void 0)]},void 0)]},void 0)}));var Xo=i(97953);const Jo=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),en=(0,Bo.Z)("div",{target:"e4a681b0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),Jo({color:t.LineSecondary}),(0,re.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivUserContainer;"),tn=(0,Bo.Z)("p",{target:"e4a681b1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,re.GI)({theme:e,typography:"P3"}),(0,re.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),on=(0,Bo.Z)("div",{target:"e4a681b2"})((({isAtBottom:e=!0,theme:{direction:t}})=>[{display:"flex",flexDirection:"row",alignItems:"center",padding:"0 8px",marginTop:"8px",cursor:"pointer"},e?null:[{position:"absolute",top:"8px"},(0,re.YJ)({direction:t,end:"0"})],(0,re.f1)({max:1071,style:{display:"none"}})]),"label:DivShowMoreTextContainer;");on.defaultProps=Object.assign(Object.assign({},on.defaultProps),{"data-e2e":"see-all"});const nn=(0,Bo.Z)("p",{target:"e4a681b3"})((({theme:e})=>(0,re.GI)({theme:e,color:"Primary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"})),"label:PShowMoreText;"),an=(0,Bo.Z)(Xo.Z,{target:"e4a681b4"})((({up:e,theme:{direction:t}})=>[(0,re.YJ)({direction:t,marginStart:"4px"}),{transition:"all 0.3s",transform:e?"rotate(180deg)":"none",display:"none"}]),"label:StyledArrowDown;"),rn=(0,Bo.Z)("p",{target:"e4a681b5"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{padding:"0 8px"},(0,re.f1)({max:1071,style:{display:"none"}})]),"label:PFollowEmptyHint;"),sn=(0,y.forwardRef)((function({title:e,listType:t,loading:i=!0,children:n},a){const r=(0,K.mp)(Ro.G,{selector:e=>0===e[t].list.length,dependencies:[t]});return(0,o.jsxs)(en,Object.assign({bottomBar:"following"===t,ref:a},{children:[(0,o.jsx)(tn,Object.assign({"data-e2e":`${t}-accounts`},{children:e}),void 0),r&&i?Array(1).fill("").map(((e,t)=>(0,o.jsx)(Qo,{},t))):n]}),void 0)})),ln=(0,y.memo)((0,y.forwardRef)((function(e,t){var i;const n=(0,a.a)(),r=(0,No.Q)(),{$abTestVersion:s}=null!==(i=(0,te.L)((()=>["$abTestVersion"]),[]))&&void 0!==i?i:{},[l,c]=(0,y.useState)(!1),[_,u]=(0,y.useState)(!1),p=10,[{authorIdList:m,loading:E,hasMore:g,totalLength:h},T]=(0,K.b7)(Ro.G,{selector:e=>{const{list:t,loading:i,maxCursor:o}=e.following;return{authorIdList:l?t:t.slice(0,p),loading:i,hasMore:-1!==o,totalLength:t.length}},dependencies:[l],equalFn:(e,t)=>fo()(e,t)});(0,y.useImperativeHandle)(t,(()=>({handleHitBottom:d()})),[]);const{needRefresh:S,setPathname:O,pathname:A}=di();(0,y.useEffect)((()=>{S&&T.getFollowingList({count:p}),O(A)}),[T,S,p]);const{setPlaying:I}=(0,K.qj)(Lo.x),v=(0,X.fz)(bo._e),C=(0,X.fz)(Po),f=(0,pi.x)(s,"em_follow_p2_test"),N="v1"===f||"v3"===f,R=(0,y.useCallback)((()=>{if(!N)return u(!0),I(!1),void C.handleAccountModalShow({enter_method:"click_following_panel"});g&&l||c(!l),g&&T.getFollowingList({count:p}),!l||(g||!l)&&v.handleClickNav({target:"see_more"})}),[T,v,g,l,p,N,C,I]),{shouldShowToggle:L,showMoreText:b}=(({hasMore:e,isShowingMore:t,totalLength:i,showNum:o,loading:n})=>({shouldShowToggle:!!i&&(e&&!t||!e&&i>o||!n),showMoreText:(0,No.Q)()(e||!t?"feed_caption_see_more":"see_less")}))({hasMore:g,isShowingMore:l,totalLength:h,showNum:p,loading:E}),P=r("desktop_logged_in_profile"),D=(0,y.useCallback)((()=>{u(!1),I(!0)}),[I]);return(0,o.jsxs)(sn,Object.assign({loading:E,listType:"following",title:P},{children:[h?m.map((e=>e?(0,o.jsx)(qo,{uniqueId:e,e2ePrefix:"following",enterMethod:"click_navigation"},e):null)):(0,o.jsx)(rn,{children:r("sidenav_follow_hint")},void 0),E&&N?(0,o.jsx)("div",Object.assign({style:{marginTop:"4px"}},{children:(0,o.jsx)(Qo,{},void 0)}),void 0):null,L&&(0,o.jsxs)(on,Object.assign({isAtBottom:N,onClick:R,"data-e2e":"following-see-all"},{children:[(0,o.jsx)(nn,{children:N?b:r("feed_caption_see_more")},void 0),N&&(0,o.jsx)(an,{fill:n.colors.Primary,width:16,height:16,up:l},void 0)]}),void 0),(0,o.jsx)(Do.U,{visible:_,type:"following",onClose:D},void 0)]}),void 0)})));var cn=i(49167);const dn=(0,y.memo)((function(e){var t;const{onEnterItem:i,onLeaveItem:n}=e,{$abTestVersion:a}=null!==(t=(0,te.L)((()=>["$abTestVersion"]),[]))&&void 0!==t?t:{},r=(0,No.Q)(),{pathname:s}=(0,f.TH)(),l=(0,K.mp)(cn.R,{selector:e=>e.uniqueId,dependencies:[]}),c=(0,K.mp)(Mo.z,{selector:e=>e.users[null!=l?l:""],dependencies:[l]}),d=(0,y.useRef)(""),[_,u]=(0,y.useState)(!1),[p,m]=(0,y.useState)(!1),[{list:E,totalLength:g},h]=(0,K.b7)(Ro.G,{selector:e=>{const{list:t}=e.suggest;return{list:t,totalLength:t.length}},dependencies:[_]}),{needRefresh:T,setPathname:S}=di();(0,y.useEffect)((()=>{var e;(0,Pe.bf)(s)?d.current!==(null==c?void 0:c.id)&&c&&(d.current=null!==(e=c.id)&&void 0!==e?e:"",h.getRecommendList({pathname:s,userId:null==c?void 0:c.id})):(d.current="-1",T&&h.getRecommendList({pathname:s})),S(s)}),[h,T,s,S,c]);const{setPlaying:O}=(0,K.qj)(Lo.x),A=(0,X.fz)(bo._e),I=(0,X.fz)(Po),v=(0,pi.x)(a,"em_follow_p2_test"),C="v1"===v||"v3"===v,N=("v3"===v||"v4"===v)&&(0,Pe.bf)(s),R=(0,y.useCallback)((()=>{if(!C)return m(!0),O(!1),void I.handleAccountModalShow({enter_method:"click_suggested_panel"});u(!_),!_&&A.handleClickNav({target:"see_more"})}),[A,_,C,I,O]),L=(0,y.useRef)([]),b=(0,y.useRef)(null),P=(0,y.useCallback)((e=>t=>{L.current[e]=t}),[]),D=(0,y.useCallback)(((e,t)=>()=>{var o,n,a,r;null==i||i(e,(null!==(n=null===(o=L.current[t])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:0)+(null!==(r=null===(a=b.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0),0)}),[i]),M=(0,y.useCallback)((e=>()=>{null==n||n(e)}),[n]),x=(0,y.useCallback)((()=>{m(!1),O(!0)}),[O]),w=(({pathname:e,user:t})=>{var i;const{$user:o}=null!==(i=(0,te.L)((()=>["$user"]),[]))&&void 0!==i?i:{};return!((0,Pe.BL)(e)||(0,Pe.ws)(e)||(0,Pe.Dj)(e)||(0,Pe.FZ)(e)&&!o||(0,Pe.bf)(e)&&((null==t?void 0:t.secret)||void 0!==t&&(null==t?void 0:t.uniqueId)===(null==o?void 0:o.uniqueId)))})({pathname:s,user:c});return!w||N?null:(0,o.jsxs)(sn,Object.assign({ref:b,listType:"suggest",title:r("sug_accounts")},{children:[E.map(((e,t)=>e?(0,o.jsx)(qo,{ref:P(t),onMouseEnter:D(e,t),onMouseLeave:M(e),uniqueId:e,e2ePrefix:"suggest",style:!_&&t>=5?{display:"none"}:void 0,enterMethod:"click_panel"},e):null)),g>5&&(0,o.jsx)(on,Object.assign({isAtBottom:C,isRecommend:!0,onClick:R},{children:(0,o.jsx)(nn,Object.assign({"data-e2e":"suggest-see-all"},{children:r(C&&_?"see_less":"see_all")}),void 0)}),void 0),(0,o.jsx)(Do.U,{visible:p,type:"suggest",onClose:x},void 0)]}),void 0)}));var _n;!function(e){e.DiscoverLinkShow="discover_link_show",e.ClickDiscoverLink="click_discover_link",e.EnterTagDetail="enter_tag_detail",e.EnterMusicDetail="enter_music_detail",e.EnterDiscoveryPage="enter_discovery_page"}(_n||(_n={}));let un=class{constructor(){this.handleLinkShow=e=>{oe.WB.event("discover_link_show",e)},this.handleClickLink=e=>{oe.WB.event("click_discover_link",e)},this.handleEnterTagDetail=()=>{oe.WB.event("enter_tag_detail",{enter_method:"discover"})},this.handleEnterMusicDetail=()=>{oe.WB.event("enter_music_detail",{enter_method:"discover"})},this.handleDiscoveryPage=()=>{oe.WB.event("enter_discovery_page",{enter_method:"discover"})}}};un=(0,p.__decorate)([(0,ie.G)()],un);let pn=class{constructor(e){this.fetch=e}getDiscoverList(e){return this.fetch.get("/node/share/discover/list",{query:{pageType:e}}).pipe((0,pe.U)((e=>e.body.discoverList)))}};pn=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],pn);let mn=class extends le.D{constructor(e,t){super(),this.service=e,this.discoverReport=t,this.defaultState={list:[],loading:!1}}setList(e,t){const{list:i}=t;e.list=i}setLoading(e,t){const{loading:i}=t;e.loading=i}getDiscoverList(e){return e.pipe((0,me.z)((({pageType:e})=>this.service.getDiscoverList(e).pipe((0,ni.b)((e=>{e.forEach(((e,t)=>{const{type:i,title:o,isInternalLink:n}=e;this.discoverReport.handleLinkShow({link_type:i,order:t,content:o,is_experiment:n?1:0})}))})),(0,pe.U)((e=>this.getActions().setList({list:e}))),(0,oi.O)(this.getActions().setLoading({loading:!0})),(0,xi.l)(this.getActions().setLoading({loading:!1}),this.terminate()),(0,Ee.n)({})))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],mn.prototype,"setList",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],mn.prototype,"setLoading",null),(0,p.__decorate)([(0,ce.Qm)({payloadGetter:1}),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],mn.prototype,"getDiscoverList",null),mn=(0,p.__decorate)([(0,de.Y)("DiscoverList"),(0,p.__metadata)("design:paramtypes",[pn,un])],mn);var En=i(63155),gn=i(43756),hn=i(17492),Tn=i(30641),Sn=i(65598),On=i(77107);const An=(0,Tn.F4)({"0%":{transform:"translateX(-240px)"},"100%":{transform:"translateX(328px)"}}),In=(0,Bo.Z)("div",{target:"eikhr9j0"})((({theme:{colors:e}})=>({overflow:"hidden",width:"208px",height:"24px",marginBottom:"12px",borderRadius:"12px",background:e.BGPlaceholderOpaque})),"label:DivDiscoverSkeletonItem;"),vn=(0,Bo.Z)("div",{target:"eikhr9j1"})({width:"120px",height:"24px",background:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .06) 50.52%, rgba(22, 24, 35, 0) 100%)",animation:`${An} 1.5s cubic-bezier(0, 0, 1, 1) infinite`},"label:DivLinearGradient;"),yn=(0,Bo.Z)("div",{target:"eikhr9j2"})((({theme:{colors:e}})=>[{position:"relative",boxSizing:"border-box",width:"100%",padding:"16px 8px 8px 8px","::after":{content:'""',position:"absolute",top:"0",width:"calc(100% - 16px)",height:"1px",background:e.LineSecondary,transform:"scaleY(.5)"}},(0,re.f1)({max:1071,style:{display:"none"}})]),"label:DivDiscoverContainer;"),Cn=(0,Bo.Z)("p",{target:"eikhr9j3"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{paddingBottom:"16px"}]),"label:PDiscoverTitle;");Cn.defaultProps=Object.assign(Object.assign({},Cn.defaultProps),{"data-e2e":"nav-discover-title"});const fn=(0,Bo.Z)("div",{target:"eikhr9j4"})({display:"flex",flexWrap:"wrap",width:"100%"},"label:DivDiscoverListContainer;");fn.defaultProps=Object.assign(Object.assign({},fn.defaultProps),{"data-e2e":"nav-discover-list"});const Nn={display:"block",width:"fit-content",maxWidth:"100%",":hover":{textDecoration:"none"}},Rn=(0,Bo.Z)(Sn.rU,{target:"eikhr9j5"})(Nn,"label:StyledLink;");Rn.defaultProps=Object.assign(Object.assign({},Rn.defaultProps),{"data-e2e":"nav-discover-href"});const Ln=(0,Bo.Z)(On.v,{target:"eikhr9j6"})(Nn,"label:StyledTmpLink;");Ln.defaultProps=Object.assign(Object.assign({},Ln.defaultProps),{"data-e2e":"nav-discover-href"});const bn=(0,Bo.Z)("div",{target:"eikhr9j7"})((({theme:e,theme:{colors:t,direction:i}})=>[{display:"flex",boxSizing:"border-box",width:"fit-content",maxWidth:"100%",height:"24px",marginBottom:"12px",padding:"3px 10px",border:"1px solid "+t.LinePrimary,borderRadius:"12px"},(0,re.VZ)({theme:e}),(0,re.YJ)({direction:i,marginEnd:"8px"})]),"label:DivDiscoverItemContainer;"),Pn=(0,Bo.Z)(En.Z,{target:"eikhr9j9"})({flexShrink:0},"label:StyledNumber;"),Dn=(0,Bo.Z)(gn.Z,{target:"eikhr9j10"})({flexShrink:0},"label:StyledMusicNote;"),Mn=(0,Bo.Z)(hn.Z,{target:"eikhr9j11"})({flexShrink:0},"label:StyledMagnifyingGlass;"),xn=(0,Bo.Z)("p",{target:"eikhr9j12"})(re.wj,(({theme:e,theme:{direction:t}})=>[(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"18px"},(0,re.YJ)({direction:t,paddingStart:"6px"})]),"label:PText;"),wn=function(){var e;const t=(0,No.Q)(),{pathname:i}=(0,f.TH)(),{$language:n}=null!==(e=(0,te.L)((()=>["$language"]),[]))&&void 0!==e?e:{},[{list:a,loading:r},s]=(0,K.b7)(mn,{selector:e=>{const{list:t,loading:i}=e;return{list:t,loading:i}},dependencies:[]}),{needRefresh:l,setPathname:c}=di();(0,y.useEffect)((()=>{const e=(0,Pe.C2)(i);l&&s.getDiscoverList({pageType:e}),c(i)}),[s,i]);const d=(0,X.fz)(un),_=(0,y.useCallback)(((e,t)=>()=>{const{type:i,title:o,isInternalLink:n}=e;switch(d.handleClickLink({link_type:i,order:t,content:o,is_experiment:n?1:0}),i){case 3:d.handleEnterTagDetail();break;case 4:d.handleEnterMusicDetail();break;default:d.handleDiscoveryPage()}}),[d]);return!r&&a.length<4?null:(0,o.jsxs)(yn,{children:[(0,o.jsx)(Cn,{children:t("Discover")},void 0),r?(0,o.jsxs)("div",{children:[(0,o.jsx)(In,{children:(0,o.jsx)(vn,{},void 0)},void 0),(0,o.jsx)(In,{children:(0,o.jsx)(vn,{},void 0)},void 0)]},void 0):(0,o.jsx)(fn,{children:a.map(((e,t)=>{const{type:i,title:a}=e;let{link:r}=e,s=null;switch(r=`${r.replace("https://www.tiktok.com","")}?lang=${n}`,i){case 3:s=(0,o.jsx)(Pn,{width:16,height:16},void 0);break;case 4:s=(0,o.jsx)(Dn,{width:16,height:16},void 0);break;default:s=(0,o.jsx)(Mn,{width:16,height:16},void 0)}return(0,o.jsx)(Ln,Object.assign({to:r,onClick:_(e,t)},{children:(0,o.jsxs)(bn,{children:[s,(0,o.jsx)(xn,{children:a},void 0)]},void 0)}),t)}))},void 0)]},void 0)};var Un=i(39973),kn=i(84475);const Fn=(0,Bo.Z)("div",{target:"el3hfgg0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",paddingTop:"16px","::before":{content:'""',position:"absolute",left:"8px",right:"8px",top:0,height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,re.YJ)({direction:t,paddingStart:"8px"}),(0,re.f1)({max:1071,style:{display:"none"}})]),"label:DivFooterContainer;"),Bn=(0,Bo.Z)("div",{target:"el3hfgg1"})({marginBottom:"8px"},"label:DivLinkContainer;"),Gn=e=>[(0,re.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P4",isLink:!0}),{display:"inline-block",marginRight:"6px",marginTop:"5px"}],jn=(0,Bo.Z)("span",{target:"el3hfgg2"})((({theme:e})=>Gn(e)),"label:SpanCopyright;");jn.defaultProps=Object.assign(Object.assign({},jn.defaultProps),{"data-e2e":"copyright"});const Hn=(0,Bo.Z)(On.v,{target:"el3hfgg3"})((({theme:e})=>Gn(e)),"label:StyledNavLink;"),Wn=(0,Bo.Z)("div",{target:"el3hfgg4"})({marginBottom:"8px",position:"relative"},"label:DivMoreContainer;"),Vn=(0,Bo.Z)("span",{target:"el3hfgg5"})((({theme:e})=>Gn(e)),{cursor:"pointer"},"label:SpanMoreText;");Vn.defaultProps=Object.assign(Object.assign({},Vn.defaultProps),{"data-e2e":"more-link"});const Yn=(0,Bo.Z)("div",{target:"el3hfgg6"})({padding:"15px 16px 20px",width:"fit-content",maxWidth:"200px"},"label:DivMorePopupWrapper;"),Kn=(0,Bo.Z)(On.v,{target:"el3hfgg7"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{display:"block",":hover":{textDecoration:"none",color:e.colors.Primary},"& + &":{marginTop:"20px"}}]),"label:StyledMoreLink;"),zn=(0,y.memo)((function({navList:e,translateText:t=!1,e2e:i}){const n=(0,No.Q)();return(0,o.jsx)(Bn,{children:e.map((e=>(0,o.jsx)(Hn,Object.assign({forceSSR:!0,to:e.href,"data-e2e":i,target:"_blank"},{children:t?n(e.title):e.title}),e.href)))},void 0)}));var $n;!function(e){e.Sidebar="sidebar",e.Footer="footer"}($n||($n={}));const qn="copyright-policy",Zn=[{title:"terms",key:"terms-of-service",href:""},{title:"privacy",key:"privacy-policy-row",href:""},{title:"copyright",key:"copyright-policy",href:""}];function Qn(e){var t;return null!==(t=null==e?void 0:e.children.filter((({placements:e=[]})=>0===e.length||e.includes("sidebar"))))&&void 0!==t?t:[]}const Xn=(0,y.memo)((function({lang:e}){const t=(0,No.Q)(),{active:i,handleMouseEnter:n,handleMouseLeave:a}=(0,Un.R)(),{navList:r=[],$legalList:s,$region:l}=(0,K.mp)($.G,{selector:e=>{var i,o,n,a;return{$legalList:null===(o=null===(i=e.appContext)||void 0===i?void 0:i.$navList.find((({title:e})=>e===t("Legal"))))||void 0===o?void 0:o.children,navList:null===(n=e.appContext)||void 0===n?void 0:n.$navList,$region:null===(a=e.appContext)||void 0===a?void 0:a.$region}},dependencies:[]}),{pageList:c,programList:d,legalList:_}=(0,y.useMemo)((()=>{const t=[{title:"help",key:"help-center",href:`https://support.tiktok.com/${e}`},{title:"safety",key:"safety-center",href:`https://www.tiktok.com/safety?lang=${e}`},...Zn.reduce(((t,i)=>{var o;const n=(null!=s?s:[]).map((({key:e})=>e)).indexOf(i.key);return i.key===qn&&(t.push({title:"Creator Portal",key:"create-portal",href:"https://www.tiktok.com/creators/creator-portal/en-us/"}),t.push({title:"Community Guidelines",key:"community-guidelines",href:`https://www.tiktok.com/community-guidelines?lang=${e}`})),n>=0&&t.push(Object.assign(Object.assign({},i),{href:null!==(o=null==s?void 0:s[n].href)&&void 0!==o?o:""})),t}),[])],i=Qn(r[0]),o=Qn(r[1]);return o.splice(3,0,{href:`https://www.tiktok.com/transparency?lang=${e}`,key:"transparency",title:"Transparency"}),{pageList:i,programList:o,legalList:t}}),[s,e,r]),u=`${(new Date).getFullYear()} TikTok`,p=(null!=s?s:[]).filter((e=>-1===_.findIndex((({key:t})=>t===e.key))||e.key===qn));return"DE"===(null==l?void 0:l.trim().toUpperCase())&&p.splice(3,0,{href:"https://www.tiktok.com/transparency/de-de/netzdg/",key:"netzdg",title:"NetzDG"}),"AT"===(null==l?void 0:l.trim().toUpperCase())&&p.push({href:"https://www.tiktok.com/transparency/de-de/koplg-about/",key:"kopig",title:"KoPi-G"}),(0,o.jsxs)(Fn,{children:[(0,o.jsx)(zn,{navList:c,e2e:"page-link"},void 0),(0,o.jsx)(zn,{navList:d,e2e:"program-link"},void 0),(0,o.jsx)(zn,{translateText:!0,navList:_,e2e:"legal-link"},void 0),p.length>0&&(0,o.jsx)(Wn,{children:(0,o.jsxs)(Vn,Object.assign({onMouseEnter:n,onMouseLeave:a},{children:[t("more"),(0,o.jsx)(kn.G,Object.assign({active:i,placement:"topLeft",verticalOffset:5},{children:(0,o.jsx)(Yn,{children:p.map((({title:e,href:t})=>(0,o.jsx)(Kn,Object.assign({forceSSR:!0,to:t,target:"_blank"},{children:e}),e)))},void 0)}),void 0)]}),void 0)},void 0),(0,o.jsxs)(jn,{children:[" ",u]},void 0)]},void 0)}));var Jn=i(23588);const ea="=+~#$@",ta={"[]":/\[([^[\]]+)\]/g,"{}":/\{([^{}]*)\}/g,"%s":/%s/g},ia=({text:e,matchArr:t,replaceComponents:i})=>{const[n,a]=(0,y.useState)([]);return(0,y.useEffect)((()=>{let n=[];const r=[],s=ta[t];let l=e;l=e.replace(s,((...e)=>(r.push(e[1]),ea))),n=l.split(ea);const c=[];n.forEach(((e,t)=>{if(c.push(e),r.length>t&&i.length>0){const e=i[t%i.length];c.push((0,o.jsx)(e,{text:r[t],matchIndex:t},t))}})),a(c)}),[e,t,i]),(0,o.jsx)(o.Fragment,{children:n},void 0)};var oa,na,aa,ra,sa,la=i(67608);function ca(){return ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ca.apply(this,arguments)}const da=function(e){return y.createElement("svg",ca({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 84 81",width:"1em",height:"1em"},e),oa||(oa=y.createElement("path",{fill:"white",d:"M36.802 9.019c2.308-4.005 8.088-4.005 10.396 0l31.117 53.985c2.305 4-.582 8.996-5.199 8.996H10.884c-4.617 0-7.504-4.996-5.199-8.996L36.802 9.019z"})),na||(na=y.createElement("path",{fill:"url(#video-warning_svg__paint0_linear_1104_6141)",d:"M38.522 10.121c1.534-2.699 5.422-2.699 6.956 0l30.627 53.903C77.62 66.69 75.694 70 72.627 70H11.373c-3.067 0-4.993-3.31-3.478-5.976l30.627-53.903z"})),aa||(aa=y.createElement("path",{fill:"white",d:"M38.5 28a1 1 0 011-1h4a1 1 0 011 1v23a1 1 0 01-1 1h-4a1 1 0 01-1-1V28z"})),ra||(ra=y.createElement("circle",{cx:41.5,cy:59,r:3,fill:"white"})),sa||(sa=y.createElement("defs",null,y.createElement("linearGradient",{id:"video-warning_svg__paint0_linear_1104_6141",x1:33.5,x2:64,y1:20.5,y2:67,gradientUnits:"userSpaceOnUse"},y.createElement("stop",{stopColor:"#FF796B"}),y.createElement("stop",{offset:1,stopColor:"#FF4C3A"})))))},_a=(0,la.Z)("div",{target:"e1m9td0x0"})({width:400,display:"flex",flexDirection:"column",alignItems:"center",padding:"36px 19px 32px 19px"},"label:DivContainer;"),ua=(0,la.Z)(da,{target:"e1m9td0x1"})([{width:83,height:81,marginBottom:24}],"label:StyledVideoWarningIcon;"),pa=(0,la.Z)("div",{target:"e1m9td0x2"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"TextPrimary"}),{textAlign:"center",marginBottom:24}]),"label:DivContent;"),ma=(0,la.Z)("div",{target:"e1m9td0x3"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"TextTertiary"}),{marginBottom:24}]),"label:DivTips;"),Ea=(0,la.Z)("span",{target:"e1m9td0x4"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"Primary"}),{marginBottom:24}]),"label:SpanTipsHighlight;"),ga=(0,la.Z)(Et.W,{target:"e1m9td0x5"})((({theme:e,theme:{colors:t}})=>[(0,re.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"ConstTextInverse",fontWeight:"semiBold"}),{padding:"12px auto",textAlign:"center",width:"100%",backgroundColor:t.Primary,":hover":{backgroundColor:t.Primary}}]),"label:StyledButton;"),ha=function({onOkClick:e,visible:t,duration:i}){const n=(0,No.Q)(),a=(0,y.useMemo)((()=>[({text:e})=>(0,o.jsx)(Ea,{children:e},void 0)]),[]);return(0,o.jsx)(yt.u_,Object.assign({visible:t,maskClosable:!1},{children:(0,o.jsxs)(_a,{children:[(0,o.jsx)(ua,{},void 0),(0,o.jsx)(pa,{children:n("pm_mt_obs_revoke_desc")},void 0),(0,o.jsx)(ma,{children:(0,o.jsx)(ia,{text:n("pm_mt_revoke_duration",{num:i,number:i}).replace("%s",i),matchArr:"%s",replaceComponents:a},void 0)},void 0),(0,o.jsx)(ga,Object.assign({type:"submit",onClick:e},{children:n("pm_mt_modal_revoke_confirm_btn")}),void 0)]},void 0)}),void 0)};var Ta=i(88671);function Sa({containerRef:e,scrollRef:t}){const{direction:i}=(0,a.a)(),[o,n]=(0,y.useState)(-1e3),[r,s]=(0,y.useState)(-1e3),l=()=>{var t,o;if(!e.current)return;const a=e.current.getBoundingClientRect();s(null!==(t="ltr"===i?a.left+a.width+12:a.left-12)&&void 0!==t?t:0),n(null!==(o=a.top+a.height/2)&&void 0!==o?o:0)},c=(0,Ta.fB)(l,[e,i],200),d=(0,y.useCallback)(l,[e,i]);return(0,y.useEffect)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.dom;return window.addEventListener("resize",c),null==i||i.addEventListener("scroll",d),window.addEventListener("recalculate-tip-position",d),c(),()=>{window.removeEventListener("resize",c),window.removeEventListener("recalculate-tip-position",d),null==i||i.removeEventListener("scroll",d)}}),[e,c,d,t]),{top:o,left:r,transform:`translate(${"ltr"===i?"0":"-100%"}, -50%) translate(${r}px, ${o}px)`}}const Oa=(0,Bo.Z)("div",{target:"enmnmya0"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"normal"}),{display:"none",position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:"#4b4b4b"},(0,re.f1)({max:1071,style:{display:"block"}})]),"label:DivNavHintContainer;"),Aa=function({text:e,active:t,containerRef:i,scrollRef:n}){const{transform:a}=Sa({containerRef:i,scrollRef:n});return t?(0,_.createPortal)((0,o.jsx)(Oa,Object.assign({style:{transform:a}},{children:e}),void 0),document.body):null};var Ia=i(1723);const va=(0,Bo.Z)("div",{target:"e10dtyqb0"})((({active:e,theme:t,theme:{colors:i}})=>[(0,re.GI)({theme:t,fontFamily:"Proxima",typography:"H6",fontWeight:"semiBold",color:"ConstTextInverse"}),{position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:i.ConstSecondary2,maxWidth:"300px"},(0,re.f1)({max:767,style:{display:e?"block":"none"}})]),"label:DivLiveHintContainer;"),ya=(0,Bo.Z)(Ia.Z,{target:"e10dtyqb1"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",left:"-16px",top:"50%",transform:`translateY(-50%) rotate(${"ltr"===t?"-90deg":"90deg"})`,width:24,height:8,fill:e.ConstSecondary2},(0,re.YJ)({direction:t,start:"-16px"})]),"label:StyledArrowIcon;"),Ca=(0,Bo.Z)("p",{target:"e10dtyqb2"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2"})),"label:PLiveStreamTitle;"),fa=(0,Bo.Z)("p",{target:"e10dtyqb3"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3",fontWeight:"normal"})),{marginBottom:"4px"},"label:PLiveStreamDesc;"),Na=(0,Bo.Z)("div",{target:"e10dtyqb4"})({display:"flex",justifyContent:"flex-end",marginTop:"4px"},"label:DivLiveStreamConfirm;"),Ra=function({active:e,containerRef:t,scrollRef:i}){const n=(0,No.Q)(),{delayMounted:a,isLiving:r,needShowLiveStream:s,isTipShowing:l,setIsTipShowing:c}=function({delay:e=1e3}={}){const{isLiving:t,needShowLiveStream:i}=(0,K.mp)(vo,{dependencies:[],selector:({roomCreateInfo:e,liveStatus:t})=>{const i=zi(t);return{isLiving:i,needShowLiveStream:i&&1===(null==e?void 0:e.stream_status)}}}),o=(0,Jt.le)(ei.AH),[n,a]=(0,y.useState)(!o),[r,s]=(0,y.useState)(!1),[l,c]=(0,y.useState)(!1);(0,y.useEffect)((()=>{s(!0)}),[]),(0,y.useEffect)((()=>{setTimeout((()=>{c(!0)}),e)}),[e]),(0,y.useEffect)((()=>{i&&a(!0)}),[i]);const d=(0,y.useRef)();return(0,y.useEffect)((()=>{n&&!i&&(d.current=window.setTimeout((()=>{a(!1)}),1e4)),i&&clearTimeout(d.current)}),[n,i]),{mounted:r,delayMounted:l,isLiving:t,needShowLiveStream:i,isTipShowing:n,setIsTipShowing:a}}(),{transform:d}=Sa({containerRef:t,scrollRef:i});(0,y.useEffect)((()=>{a&&window.dispatchEvent(new Event("recalculate-tip-position"))}),[a]);const u=(0,y.useMemo)((()=>s?n("live_obs_string_get_tips"):r?"":n("start_live_guide")),[r,s,n]),p=(0,y.useCallback)((()=>{c(!1)}),[c]);return a&&l&&u?(0,_.createPortal)((0,o.jsxs)(va,Object.assign({active:e,style:{transform:d}},{children:[(0,o.jsx)(ya,{},void 0),s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ca,{children:n("live_obs_string_get_title")},void 0),(0,o.jsx)(fa,{children:u},void 0),(0,o.jsx)(Na,{children:(0,o.jsx)(Ca,Object.assign({onClick:p,style:{cursor:"pointer"}},{children:n("live_close")}),void 0)},void 0)]},void 0):(0,o.jsx)("p",{children:u},void 0)]}),void 0),document.body):null},La=(0,Bo.Z)("div",{target:"e1k5k7j00"})((({theme:{colors:e,direction:t}})=>[{padding:"8px",position:"relative","::before":{content:'""',position:"absolute",left:"8px",top:"0px",right:"8px",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,re.f1)({max:1071,style:{[`${Da}`]:{display:"none"},[`${xa}`]:[(0,re.YJ)({direction:t,marginEnd:"0"})]}})]),"label:DivGoLiveEntranceContainer;"),ba=(0,Bo.Z)(On.v,{target:"e1k5k7j01"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,re.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:StyledLink;"),Pa=(0,Bo.Z)("div",{target:"e1k5k7j02"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,re.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:DivText;"),Da=(0,Bo.Z)("span",{target:"e1k5k7j03"})((({theme:{colors:e},isLiveStreaming:t,isDisabled:i})=>({color:i?e.TextQuaternary:t?e.Primary:e.TextPrimary})),"label:SpanText;"),Ma=[(0,Tn.F4)({"0%":{y:"4px",height:"10px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"10px"}}),(0,Tn.F4)({"0%":{y:"4px",height:"6px"},"40%":{y:"4px",height:"10px"},"70%":{y:"4px",height:"12px"},"100%":{y:"4px",height:"6px"}}),(0,Tn.F4)({"0%":{y:"4px",height:"8px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"8px"}})],xa=(0,Bo.Z)("svg",{target:"e1k5k7j04"})((({isLiveStreaming:e,theme:{direction:t}})=>[(0,re.YJ)({direction:t,marginEnd:"4px"}),e?{rect:{transformOrigin:"center",transform:"rotateZ(180deg)",":nth-of-type(1)":{animation:`${Ma[0]} .5s ease-out infinite`},":nth-of-type(2)":{animation:`${Ma[1]} .5s ease-out infinite`},":nth-of-type(3)":{animation:`${Ma[2]} .5s ease-out infinite`}}}:null]),"label:SvgLiveIcon;"),wa=(0,y.memo)((function({isLiveStreaming:e,isDisabled:t}){const{colors:i}=(0,a.a)(),n=t?i.TextQuaternary:e?i.Primary:i.Primary2;return(0,o.jsxs)(xa,Object.assign({isLiveStreaming:!t&&e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,o.jsx)("rect",{x:"4.1665",y:"4.16797",width:"2.69231",height:"11.6667",rx:"0.5",fill:n},void 0),(0,o.jsx)("rect",{x:"8.65381",y:"9.02734",width:"2.69231",height:"6.80555",rx:"0.5",fill:n},void 0),(0,o.jsx)("rect",{x:"13.1406",y:"7.08594",width:"2.69231",height:"8.75",rx:"0.5",fill:n},void 0)]}),void 0)})),Ua=function({hintActive:e,scrollRef:t}){var i,n;const a=(0,No.Q)(),[r,s]=(0,y.useState)(!1),[l,c]=(0,y.useState)(!1),d=function(){const{liveStatus:e}=(0,K.mp)(vo);return zi(e)}(),{permissionInfo:_}=(0,K.mp)(Di),{roomCreateInfo:u}=(0,K.mp)(vo),{pathname:p}=(0,f.TH)(),m=1===Number(null===(i=null==u?void 0:u.obs_accees_recall_info)||void 0===i?void 0:i.status),E=(g=Number(null===(n=null==u?void 0:u.obs_accees_recall_info)||void 0===n?void 0:n.duration),parseInt((g/86400).toString())||1).toString();var g;const{user:h,lang:T}=(0,K.mp)($.G,{dependencies:[],selector:({appContext:e,lang:t})=>{var i,o,n;return{user:{uniqueId:null===(i=null==e?void 0:e.$user)||void 0===i?void 0:i.uniqueId,secUid:null===(o=null==e?void 0:e.$user)||void 0===o?void 0:o.secUid,uid:null===(n=null==e?void 0:e.$user)||void 0===n?void 0:n.uid},lang:t}}}),S=(0,X.fz)(Jn.yB),O=(0,X.fz)(Wi),A=a(m?"go_live":d?"live_on_status":"go_live"),I=(0,y.useRef)(null),C=(0,y.useCallback)((()=>{var e;if(!d&&!m){const t=(0,Jt.le)(ei.AH);S.handleLiveStreamEntranceClick({anchor_id:null!==(e=h.uid)&&void 0!==e?e:"",is_notified:t?0:1,is_application_needed:(null==_?void 0:_.hasLiveApplyPermission)?1:0})}m&&s(!0),(0,Jt.D$)(ei.AH,JSON.stringify({name:h.uniqueId}))}),[d,S,h.uid,h.uniqueId,null==_?void 0:_.hasLiveApplyPermission,m]),N=(0,y.useCallback)((()=>{c(!0)}),[]),R=(0,y.useCallback)((()=>{c(!1)}),[]),L=(0,v.stringifyUrl)({url:Ei.$J.liveGoLive,query:{lang:T}}),b=$i(p),P=(0,y.useMemo)((()=>m?(0,o.jsxs)(Pa,Object.assign({onClick:C},{children:[(0,o.jsx)(wa,{isDisabled:!0,isLiveStreaming:d},void 0),(0,o.jsx)(Da,Object.assign({isLiveStreaming:d,"data-e2e":"go-live-entrance-text",isDisabled:!0},{children:A}),void 0)]}),void 0):(0,o.jsxs)(ba,Object.assign({forceSSR:!b,to:L,onClick:C},{children:[(0,o.jsx)(wa,{isDisabled:!1,isLiveStreaming:d},void 0),(0,o.jsx)(Da,Object.assign({isLiveStreaming:d,"data-e2e":"go-live-entrance-text",isDisabled:!1},{children:A}),void 0)]}),void 0)),[m,b,L,d,C,A]),D=(0,y.useCallback)((()=>s(!1)),[]);return(0,y.useEffect)((()=>{var e;r&&O.OBSRevokeRemindShow({anchor_id:null!==(e=h.uid)&&void 0!==e?e:""})}),[r,h.uid,O]),(0,o.jsxs)(La,Object.assign({ref:I,onMouseEnter:N,onMouseLeave:R,"data-e2e":"go-live-entrance"},{children:[P,(0,o.jsx)(Ra,{active:e,containerRef:I,scrollRef:t,"data-e2e":"go-live-entrance-tip"},void 0),(0,o.jsx)(Aa,{active:l,text:A,scrollRef:t,containerRef:I},void 0),(0,o.jsx)(ha,{visible:r,onOkClick:D,duration:E},void 0)]}),void 0)},ka=(0,Bo.Z)("div",{target:"efna91q0"})([{position:"relative",padding:"20px 8px 24px 8px",margin:"0","::before":{content:'""',position:"absolute",height:"1px",left:"8px",right:"8px",background:"rgba(22, 24, 35, .12)",transform:"scaleY(.5)",top:"0"}},(0,re.f1)({max:1071,style:{display:"none"}})],"label:DivFrameContainer;"),Fa=(0,Bo.Z)("p",{target:"efna91q1"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",color:"TextTertiary"})),"label:PLoginHint;");Fa.defaultProps=Object.assign(Object.assign({},Fa.defaultProps),{"data-e2e":"nav-login-tip"});const Ba=(0,Bo.Z)(Et.W,{target:"efna91q2"})({marginTop:"20px",width:"100%"},"label:StyledLogin;");Ba.defaultProps=Object.assign(Object.assign({},Ba.defaultProps),{"data-e2e":"nav-login-button"});const Ga=function(){const e=(0,No.Q)(),t=(0,K.qj)(Wt.r),i=(0,X.fz)(bo._e),n=(0,y.useCallback)((()=>{t.openModal({query:{enter_method:"click_navigation",enter_from:oe.WB.commonParams.page_name,redirect_url:(0,fe.AY)()}}),i.handleClickNav({target:"login"})}),[i,t]);return(0,o.jsxs)(ka,{children:[(0,o.jsx)(Fa,{children:e("sidenav_login_cta")},void 0),(0,o.jsx)(Ba,Object.assign({buttonTheme:"line",onClick:n},{children:e("Log In")}),void 0)]},void 0)};var ja,Ha=i(25147),Wa=i(90594),Va=i(40308),Ya=i(15632),Ka=i(48499),za=i(83922),$a=i(74472),qa=i(21137);function Za(){const{canShowliveEntry:e}=function(){const e=(0,te.L)((()=>["$user","$liveSuggestConfig","$abTestVersion"]),[]),t=function(){var e;const{$botType:t}=null!==(e=(0,te.L)((()=>["$botType"]),[]))&&void 0!==e?e:{};return"others"!==t}();return(0,y.useMemo)((()=>{var i,o,n;const a=null!==(i=(0,pi.x)(null==e?void 0:e.$abTestVersion,"live_detail_non_logged_in_entry"))&&void 0!==i?i:"v1",r=null===(o=null==e?void 0:e.$liveSuggestConfig)||void 0===o?void 0:o.isBlockedArea,s=null===(n=null==e?void 0:e.$liveSuggestConfig)||void 0===n?void 0:n.isRiskArea,l=!!(null==e?void 0:e.$user),c=Boolean(!l&&"v1"===a),d=Boolean(!l&&"v2"===a),_=Boolean(!l&&"v3"===a),u=Boolean(!l&&s);if(r)return{canShowliveEntry:!1,canLoadFeed:!1,canEnterRoom:!1};if(u)return{canShowliveEntry:!0,canLoadFeed:!1,canEnterRoom:!1};const p=l||t||c;return{canShowliveEntry:!d,canLoadFeed:p||_,canEnterRoom:p}}),[t,e])}();return e}i(88008),function(e){e.Show="livesdk_live_tab_show"}(ja||(ja={}));let Qa=class{constructor(){this.handleShow=()=>{oe.WB.event("livesdk_live_tab_show")}}};Qa=(0,p.__decorate)([(0,ie.G)()],Qa);var Xa=i(44798),Ja=i(75036);const er=(0,Bo.Z)(Ja.w,{target:"e14l9ebt0"})((({extraTop:e=0,extraWidth:t,theme:{colors:i,direction:o}})=>[{top:re.Mz+e,bottom:"0",width:`${null!=t?t:356}px`,background:i.BGPrimary,position:"fixed",zIndex:99},(0,re.YJ)({direction:o,paddingEnd:"8px"}),(0,re.f1)({max:1071,style:{padding:"0 8px",width:"72px",flex:"0 0 72px",borderRight:`1px solid ${i.LineSecondary}`,boxShadow:`0px 2px 8px ${i.ShadowSecondary}`}})]),"label:StyledScroll;"),tr=(0,Bo.Z)("div",{target:"e14l9ebt1"})((({transStatus:e,extraWidth:t})=>{const i=e===Xa.d0||e===Xa.Ix;return[{position:"relative",width:`${null!=t?t:356}px`,flex:`0 0 ${null!=t?t:356}px`},(0,re.f1)({max:767,style:{zIndex:99,[`${er}`]:[null,i?{transition:"all 0.3s"}:null]}}),(0,re.f1)({max:1071,style:{width:"72px",flex:"0 0 72px"}})]}),"label:DivSideNavContainer;"),ir=(0,Bo.Z)("div",{target:"e14l9ebt2"})((({theme:{direction:e}})=>[{flexShrink:0,padding:"20px 0 26px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",minHeight:"100%"},(0,re.YJ)({direction:e,paddingStart:"8px"}),(0,re.f1)({max:1071,style:{padding:"12px 0 26px"}})]),"label:DivWrapper;"),or=({theme:e})=>[{position:"relative",display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"8px",boxSizing:"border-box",borderRadius:"4px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},(0,re.VZ)({theme:e}),(0,re.f1)({max:1071,style:{justifyContent:"center"}})],nr=(0,Bo.Z)(On.v,{target:"e14l9ebt5"})(or,"label:StyledTmpLink;"),ar=(0,Bo.Z)("div",{target:"e14l9ebt6"})({flex:"1 1 0px"},"label:DivPlaceholder;"),rr=(0,Bo.Z)("h2",{target:"e14l9ebt7"})((({active:e,theme:t,theme:{direction:i}})=>[(0,re.GI)({theme:t,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",lineHeight:"32px",color:e?"Primary":"Primary2"}),(0,re.YJ)({direction:i,marginStart:"8px"}),(0,re.f1)({max:1071,style:{display:"none"}})]),"label:H2MainNavText;"),sr=(0,Bo.Z)("div",{target:"e14l9ebt8"})([{marginBottom:"8px",padding:"0"},(0,re.f1)({max:1071,style:{padding:"0"}})],"label:DivMainNavContainer;"),lr={path:"/",Icon:Ha.Z,ActiveIcon:Wa.Z,text:"for_you",teaParams:{target:"trending",enterPage:"enter_homepage_hot"},linkProps:{"data-e2e":"nav-foryou",disableAutoLang:!0}},cr={path:"/following",Icon:Va.Z,ActiveIcon:Ya.Z,text:"Following",teaParams:{target:"following",enterPage:"enter_homepage_follow"},linkProps:{"data-e2e":"nav-following",disableAutoLang:!1}},dr={path:"/live",Icon:Ka.Z,ActiveIcon:za.Z,text:"LIVE",teaParams:{target:"live",enterPage:"enter_live_discover"},linkProps:{"data-e2e":"nav-live",disableAutoLang:!1}};function _r({currentPath:e,configPath:t}){return e===t}const ur=function(e){const{text:t,path:i,onClick:n,onLoad:r,onCheckActive:s=_r,Container:l=nr,Icon:c,ActiveIcon:d,linkProps:_,teaParams:u,scrollRef:p,forceSSR:m}=e,E=(0,No.Q)(),{pathname:g}=(0,f.TH)(),{colors:h}=(0,a.a)(),[T,S]=(0,y.useState)(s({configPath:i,currentPath:g})),O=T?d:c,A=(0,X.fz)(bo._e),[I,v]=(0,y.useState)(!1),C=(0,y.useCallback)((e=>{const{enterPage:t,target:i}=u;null==n||n(e),A.handleEnterPage(t,{enter_method:"navigation_bar"}),A.handleClickNav({target:i})}),[A,n,u]);(0,y.useEffect)((()=>{S(s({configPath:i,currentPath:location.pathname}))}),[s,i,g]),(0,y.useEffect)((()=>{null==r||r()}),[r]);const N=(0,y.useRef)(null),R=(0,y.useCallback)((()=>{v(!0)}),[]),L=(0,y.useCallback)((()=>{v(!1)}),[]);return(0,o.jsx)("div",Object.assign({ref:N},{children:(0,o.jsxs)(l,Object.assign({to:i,onClick:C},_,{forceSSR:m,onMouseEnter:R,onMouseLeave:L},{children:[(0,o.jsx)(O,{fill:T?h.Primary:h.Primary2,width:32,height:32},void 0),(0,o.jsx)(rr,Object.assign({active:T},{children:E(t)}),void 0),(0,o.jsx)(Aa,{active:I,text:E(t),scrollRef:p,containerRef:N},void 0)]}),void 0)}),void 0)},pr=(0,y.memo)((function({scrollRef:e}){const t=Za(),{pathname:i}=(0,f.TH)(),n=(0,X.fz)(Qa),a=(0,K.qj)($a.h9),[{enterForyou:r},{setEnterForyou:s}]=(0,K.b7)(qa.e),{lang:l=""}=(0,K.mp)($.G,{selector:({appContext:e})=>{const{$language:t}=null!=e?e:{};return{lang:t}},dependencies:[]});(0,y.useEffect)((()=>{!(0,Pe.oC)(i)&&s(!1)}),[s,i]);const c=(0,y.useCallback)((()=>r&&(0,Pe.cQ)(i)||(0,Pe.oC)(i)),[i,r]),d=(0,y.useCallback)((e=>{(0,Pe.oC)(i)&&(e.preventDefault(),a.resetItemList({key:"foryou"}),a.getRecommendList({key:"foryou"}))}),[a,i]);lr.path=`/${l}`;const _=$i(i),u=(0,y.useCallback)((()=>{n.handleShow()}),[n]);return(0,o.jsxs)(sr,{children:[(0,o.jsx)(ur,Object.assign({},lr,{scrollRef:e,onClick:d,onCheckActive:c}),void 0),(0,o.jsx)(ur,Object.assign({},cr,{scrollRef:e}),void 0),t&&(0,o.jsx)(ur,Object.assign({onLoad:u,forceSSR:!_,Container:nr,scrollRef:e},dr),void 0)]},void 0)}));var mr=i(94328),Er=i(53046);let gr=class extends le.D{constructor(){super(...arguments),this.defaultState={profileUserId:null,itemOffset:0,offsetLeft:0}}setShowing(e,t){e.profileUserId=t.userId,t.itemOffset&&(e.itemOffset=t.itemOffset),t.offsetLeft&&(e.offsetLeft=t.offsetLeft)}itemEnter(e){return e.pipe((0,ii.w)((({userId:e,itemOffset:t,offsetLeft:i,timeout:o})=>(0,mr.H)(o).pipe((0,Er.h)(this.getActions().setShowing({userId:e,itemOffset:t,offsetLeft:i}))))))}};var hr;(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],gr.prototype,"setShowing",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],gr.prototype,"itemEnter",null),gr=(0,p.__decorate)([(0,de.Y)("SideNavigation")],gr),function(e){e.EnterTopicsPage="enter_topics_page"}(hr||(hr={}));let Tr=class{handleEnterTopic(e){oe.WB.event("enter_topics_page",e)}};var Sr;function Or(){return Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Or.apply(this,arguments)}Tr=(0,p.__decorate)([(0,ie.G)()],Tr);var Ar,Ir;function vr(){return vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},vr.apply(this,arguments)}var yr,Cr,fr;function Nr(){return Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Nr.apply(this,arguments)}var Rr,Lr,br;function Pr(){return Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Pr.apply(this,arguments)}var Dr;function Mr(){return Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Mr.apply(this,arguments)}var xr,wr;function Ur(){return Ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ur.apply(this,arguments)}var kr,Fr,Br,Gr;function jr(){return jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},jr.apply(this,arguments)}const Hr=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),Wr=(0,Bo.Z)("div",{target:"ehbc6qq0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),Hr({color:t.LineSecondary}),(0,re.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivTopicContainer;"),Vr=(0,Bo.Z)("p",{target:"ehbc6qq1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,re.GI)({theme:e,typography:"P3"}),(0,re.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),Yr=(0,Bo.Z)(Sn.rU,{target:"ehbc6qq2"})([{padding:"4px 8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",marginTop:"4px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},({theme:e})=>(0,re.VZ)({theme:e})],"label:StyledTopicItemLink;"),Kr=(0,Bo.Z)("h2",{target:"ehbc6qq3"})((({active:e,theme:t,theme:{direction:i}})=>[(0,re.GI)({theme:t,fontFamily:"Proxima",typography:"P2",color:e?"Primary":"Primary2"}),{height:"22px",lineHeight:"24px"},(0,re.YJ)({direction:i,marginStart:"10px"}),(0,re.f1)({max:1071,style:{display:"none"}})]),"label:H2TopicNavText;"),zr=[{key:"topic_foryou_comedy",value:"comedy",Icon:function(e){return y.createElement("svg",Nr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),yr||(yr=y.createElement("path",{fillRule:"evenodd",d:"M24 38c6.29 0 11.45-4.84 11.959-11 .045-.55-.407-1-.959-1H13c-.552 0-1.004.45-.959 1 .508 6.16 5.668 11 11.959 11zm0-4a8 8 0 01-6.93-4h13.86A8 8 0 0124 34z",clipRule:"evenodd"})),Cr||(Cr=y.createElement("path",{d:"M18.376 20.059c.312.455.738.941 1.29.941H21c.552 0 1.01-.452.901-.994a5.002 5.002 0 00-9.802 0c-.11.542.349.994.901.994h1.333c.553 0 .979-.486 1.291-.941a1.665 1.665 0 012.752 0zM33.667 21c-.553 0-.979-.486-1.291-.941a1.665 1.665 0 00-2.752 0c-.312.455-.738.941-1.29.941H27c-.552 0-1.01-.452-.901-.994a5.002 5.002 0 019.802 0c.11.542-.349.994-.901.994h-1.333z"})),fr||(fr=y.createElement("path",{fillRule:"evenodd",d:"M44 24c0 11.046-8.954 20-20 20S4 35.046 4 24 12.954 4 24 4s20 8.954 20 20zm-4 0c0 8.837-7.163 16-16 16S8 32.837 8 24 15.163 8 24 8s16 7.163 16 16z",clipRule:"evenodd"})))}},{key:"topic_foryou_gaming",value:"gaming",Icon:function(e){return y.createElement("svg",Ur({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),xr||(xr=y.createElement("path",{d:"M17 14.5a1 1 0 011 1v2h2a1 1 0 011 1v2a1 1 0 01-1 1h-2v2a1 1 0 01-1 1h-2a1 1 0 01-1-1v-2h-2a1 1 0 01-1-1v-2a1 1 0 011-1h2v-2a1 1 0 011-1h2zM33 17.5a2 2 0 114 0 2 2 0 01-4 0zM31 19.5a2 2 0 100 4 2 2 0 000-4z"})),wr||(wr=y.createElement("path",{fillRule:"evenodd",d:"M14 5.5c-5.523 0-10 4.477-10 10v19.369a7.631 7.631 0 0014.496 3.333l2.631-5.417a.2.2 0 01.18-.113h5.386a.2.2 0 01.18.113l2.63 5.417A7.631 7.631 0 0044 34.87V15.5c0-5.523-4.477-10-10-10H14zm-6 10a6 6 0 016-6h20a6 6 0 016 6v19.369a3.631 3.631 0 01-6.898 1.586l-2.631-5.418a4.2 4.2 0 00-3.778-2.365h-5.386a4.2 4.2 0 00-3.778 2.365l-2.631 5.418A3.632 3.632 0 018 34.869V15.5z",clipRule:"evenodd"})))}},{key:"topic_foryou_food",value:"food",Icon:function(e){return y.createElement("svg",Mr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Dr||(Dr=y.createElement("path",{fillRule:"evenodd",d:"M32.573 31.34c-.029-.197-.06-.397-.092-.597-.35-2.196-.869-4.52-1.175-5.489a11.393 11.393 0 00-2.836-4.657 11.31 11.31 0 00-4.668-2.793c-.987-.301-3.444-.95-5.729-1.4a46.377 46.377 0 00-.49-.094L11.06 37.91l21.514-6.569zm11.167.414c-.058.388-.339.703-.713.817L5.672 43.977a.522.522 0 01-.649-.653L16.291 6.023c.112-.372.42-.652.8-.715 3.497-.578 7.081-.34 10.477.695a23.13 23.13 0 019.547 5.712 23.3 23.3 0 015.801 9.525 23.397 23.397 0 01.825 10.514zM26.016 10.47c-2.265-.691-4.117-1.07-5.955-1.06l-.827 2.91.459.096c2.157.456 4.322 1.03 5.332 1.338 2.412.736 4.61 2.05 6.403 3.831a15.628 15.628 0 013.892 6.39c.363 1.152.855 3.368 1.21 5.44l.026.158 2.82-.81c.102-1.968-.152-3.766-.802-5.826a19.063 19.063 0 00-4.747-7.794 18.926 18.926 0 00-7.811-4.673zm-9.223 15.98a2.097 2.097 0 012.977 0 2.124 2.124 0 010 2.993 2.097 2.097 0 01-2.977 0 2.124 2.124 0 010-2.992zm10.42 0a2.097 2.097 0 00-2.977 0 2.124 2.124 0 000 2.993 2.097 2.097 0 002.977 0 2.124 2.124 0 000-2.992z",clipRule:"evenodd"})))}},{key:"topic_foryou_dance",value:"dance",Icon:function(e){return y.createElement("svg",Pr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Rr||(Rr=y.createElement("path",{d:"M38.61 4.402c.032-.114.048-.171.06-.196a.368.368 0 01.66 0c.012.025.028.082.06.195l.032.114c.065.23.098.344.133.45.55 1.67 1.897 2.986 3.622 3.54.11.035.228.068.465.133.076.022.114.032.132.039a.344.344 0 010 .646 2.093 2.093 0 01-.132.039c-.236.065-.355.098-.465.134-1.725.553-3.072 1.869-3.622 3.538-.035.107-.068.221-.133.45l-.032.114v.001c-.032.113-.048.17-.06.195a.368.368 0 01-.66 0c-.012-.025-.028-.082-.06-.195l-.032-.114c-.065-.23-.098-.344-.133-.45-.55-1.67-1.897-2.986-3.622-3.54a12.93 12.93 0 00-.465-.133c-.076-.022-.114-.032-.132-.039a.344.344 0 010-.646c.018-.007.056-.017.132-.039.236-.065.355-.098.465-.134 1.725-.553 3.072-1.869 3.622-3.538.035-.107.068-.221.133-.45l.032-.114z"})),Lr||(Lr=y.createElement("path",{fillRule:"evenodd",d:"M24 44c-9.389 0-17-7.611-17-17 0-7.649 5.051-14.118 12-16.253V10a2 2 0 012-2h1V5a1 1 0 011-1h2a1 1 0 011 1v3h1a2 2 0 012 2v.747C35.949 12.882 41 19.351 41 27c0 9.389-7.611 17-17 17zm13.91-17c0 1.062-.12 2.097-.346 3.09H31.6a37.224 37.224 0 000-6.18h5.964c.226.993.345 2.028.345 3.09zm-9.413-3.09c.09.99.14 2.023.14 3.09 0 1.067-.05 2.1-.14 3.09h-8.994c-.09-.99-.14-2.023-.14-3.09 0-1.067.05-2.1.14-3.09h8.994zm2.704-3.092h5.262a13.958 13.958 0 00-7.478-6.807c.975 1.813 1.743 4.147 2.216 6.807zM24 13.091c.176 0 1.346.298 2.65 3.167.573 1.26 1.058 2.804 1.406 4.56h-8.112c.348-1.756.833-3.3 1.406-4.56 1.304-2.869 2.474-3.167 2.65-3.167zm-4.985.92c-.975 1.813-1.743 4.147-2.216 6.807h-5.262a13.958 13.958 0 017.478-6.807zm-2.216 19.17h-5.262a13.958 13.958 0 007.478 6.808c-.975-1.813-1.743-4.147-2.216-6.807zm12.186 6.808l.018-.032-.002.026-.016.006zm-.93-6.807c-.347 1.756-.832 3.3-1.405 4.56-1.304 2.869-2.474 3.167-2.65 3.167-.176 0-1.346-.298-2.65-3.167-.573-1.26-1.058-2.804-1.406-4.56h8.112z",clipRule:"evenodd"})),br||(br=y.createElement("path",{d:"M7.688 36.322c.026-.092.039-.137.048-.157a.294.294 0 01.528 0c.01.02.022.065.048.157l.026.09c.052.184.078.276.106.36.44 1.336 1.517 2.389 2.897 2.831.088.029.183.055.372.107h.001c.06.018.091.026.105.032a.275.275 0 010 .517l-.105.03h-.002c-.188.053-.283.08-.37.108-1.38.442-2.458 1.495-2.898 2.83a9.43 9.43 0 00-.106.36l-.026.091a1.601 1.601 0 01-.048.157.294.294 0 01-.528 0 1.601 1.601 0 01-.048-.157l-.026-.09a9.431 9.431 0 00-.106-.36c-.44-1.336-1.517-2.389-2.898-2.831a10.268 10.268 0 00-.372-.108l-.105-.03a.275.275 0 010-.517c.014-.006.044-.014.105-.031h.001c.189-.053.284-.08.371-.108 1.38-.442 2.458-1.495 2.898-2.83.028-.086.054-.177.106-.36l.026-.091z"})))}},{key:"topic_foryou_beauty",value:"beauty",Icon:function(e){return y.createElement("svg",vr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Ar||(Ar=y.createElement("path",{fillRule:"evenodd",d:"M24.928 4.25a5.99 5.99 0 011.903.705l13.257 7.654a3.692 3.692 0 011.351 5.043.308.308 0 01-.42.113L30.027 11.42l-10.5 18.186 10.601 6.677a.5.5 0 01.167.673l-1.02 1.765a.5.5 0 01-.665.192l-11.083-5.843-1.25 2.166L27.27 41.58a.308.308 0 01.113.42 3.692 3.692 0 01-5.044 1.352L9.08 35.699a5.99 5.99 0 01-2.9-6.294 5.99 5.99 0 01.704-1.902L18.635 7.15a5.99 5.99 0 016.293-2.9zM12.813 33.236l13.75-23.816-.866-.5a3 3 0 00-4.098 1.098l-10.75 18.62a3 3 0 001.098 4.098l.866.5z",clipRule:"evenodd"})),Ir||(Ir=y.createElement("path",{d:"M28.527 14.017l10.601 6.677a.5.5 0 01.167.673l-1.02 1.765a.5.5 0 01-.665.192l-11.083-5.843 2-3.464zM36.128 25.89l-10.601-6.676-2 3.464L34.61 28.52a.5.5 0 00.666-.192l1.019-1.765a.5.5 0 00-.167-.673zM22.527 24.41l10.601 6.677a.5.5 0 01.167.673l-1.02 1.764a.5.5 0 01-.665.193l-11.083-5.843 2-3.464z"})))}},{key:"topic_foryou_animals",value:"animals",Icon:function(e){return y.createElement("svg",Or({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Sr||(Sr=y.createElement("path",{fillRule:"evenodd",d:"M18 18c3.038 0 5.5-3.134 5.5-7S21.038 4 18 4s-5.5 3.134-5.5 7 2.462 7 5.5 7zm.744-4.521c.4-.51.756-1.373.756-2.479s-.356-1.97-.756-2.478C18.349 8.019 18.056 8 18 8c-.056 0-.349.019-.744.522-.4.509-.756 1.372-.756 2.478s.356 1.97.756 2.479c.395.502.688.521.744.521.056 0 .349-.019.744-.521zM9.5 28c3.038 0 5.5-2.91 5.5-6.5S12.538 15 9.5 15 4 17.91 4 21.5 6.462 28 9.5 28zm.835-4.488c.358-.422.665-1.12.665-2.012 0-.892-.307-1.59-.665-2.012-.35-.414-.66-.488-.835-.488-.176 0-.486.074-.836.488C8.307 19.91 8 20.608 8 21.5c0 .892.307 1.59.664 2.012.35.414.66.488.836.488.176 0 .486-.074.835-.488zM35.5 11c0 3.866-2.462 7-5.5 7s-5.5-3.134-5.5-7 2.462-7 5.5-7 5.5 3.134 5.5 7zm-4 0c0 1.106-.356 1.97-.756 2.479-.395.502-.688.521-.744.521-.056 0-.349-.019-.744-.521-.4-.51-.756-1.373-.756-2.479s.356-1.97.756-2.478C29.651 8.019 29.944 8 30 8c.056 0 .349.019.744.522.4.509.756 1.372.756 2.478zM38.5 28c3.038 0 5.5-2.91 5.5-6.5S41.538 15 38.5 15 33 17.91 33 21.5s2.462 6.5 5.5 6.5zm.836-4.488c.357-.422.664-1.12.664-2.012 0-.892-.307-1.59-.664-2.012-.35-.414-.66-.488-.836-.488-.175 0-.486.074-.836.488-.357.422-.664 1.12-.664 2.012 0 .892.307 1.59.664 2.012.35.414.66.488.836.488.175 0 .486-.074.836-.488zM16.508 25.027c2.978-6.721 12.04-6.697 14.985.04l1.193 2.73a7.78 7.78 0 001.81 2.57C39.586 35.123 36.398 44 29.6 44H18.42c-6.802 0-10.005-8.87-4.93-13.65a7.799 7.799 0 001.777-2.521l1.241-2.802zM29.601 40H18.42c-1.44 0-2.613-.884-3.157-2.391-.548-1.518-.259-3.19.97-4.348a11.8 11.8 0 002.69-3.812l1.242-2.802c1.567-3.537 6.11-3.53 7.662.022l1.193 2.73a11.782 11.782 0 002.744 3.89c1.228 1.147 1.52 2.812.977 4.326-.54 1.504-1.707 2.385-3.14 2.385z",clipRule:"evenodd"})))}},{key:"topic_foryou_sports",value:"sports",Icon:function(e){return y.createElement("svg",jr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em"},e),kr||(kr=y.createElement("mask",{id:"sports_svg__a"},y.createElement("path",{d:"M17.122 8.493c.81.385 1.57.859 2.266 1.408l4.465-7.734a1 1 0 00-.866-1.5h-7.02a1 1 0 00-.868.505L11.586 7.34a12.046 12.046 0 012.92.262l2.43-4.267h3.165l-2.979 5.159zM4.608 9.856a12 12 0 012.275-1.394L3.922 3.333h3.164l2.146 3.77 1.535-2.695-1.843-3.236a1 1 0 00-.87-.505h-7.02a1 1 0 00-.865 1.5l4.44 7.689zM13.092 16.122l-.805-2.48a.333.333 0 00-.634 0l-.806 2.48a.333.333 0 01-.317.23H7.923a.333.333 0 00-.196.603l2.11 1.532a.333.333 0 01.12.373l-.805 2.48c-.1.306.252.562.513.372l2.109-1.532a.333.333 0 01.392 0l2.108 1.532a.333.333 0 00.514-.373l-.806-2.48a.333.333 0 01.121-.372l2.109-1.532a.333.333 0 00-.196-.603H13.41a.333.333 0 01-.317-.23z"}),y.createElement("path",{fillRule:"evenodd",d:"M11.97 27.333a9.333 9.333 0 100-18.666 9.333 9.333 0 000 18.666zm0-2.666a6.667 6.667 0 100-13.334 6.667 6.667 0 000 13.334z",clipRule:"evenodd"}))),Fr||(Fr=y.createElement("path",{d:"M17.122 8.493c.81.385 1.57.859 2.266 1.408l4.465-7.734a1 1 0 00-.866-1.5h-7.02a1 1 0 00-.868.505L11.586 7.34a12.046 12.046 0 012.92.262l2.43-4.267h3.165l-2.979 5.159zM4.608 9.856a12 12 0 012.275-1.394L3.922 3.333h3.164l2.146 3.77 1.535-2.695-1.843-3.236a1 1 0 00-.87-.505h-7.02a1 1 0 00-.865 1.5l4.44 7.689zM13.092 16.122l-.805-2.48a.333.333 0 00-.634 0l-.806 2.48a.333.333 0 01-.317.23H7.923a.333.333 0 00-.196.603l2.11 1.532a.333.333 0 01.12.373l-.805 2.48c-.1.306.252.562.513.372l2.109-1.532a.333.333 0 01.392 0l2.108 1.532a.333.333 0 00.514-.373l-.806-2.48a.333.333 0 01.121-.372l2.109-1.532a.333.333 0 00-.196-.603H13.41a.333.333 0 01-.317-.23z"})),Br||(Br=y.createElement("path",{fillRule:"evenodd",d:"M11.97 27.333a9.333 9.333 0 100-18.666 9.333 9.333 0 000 18.666zm0-2.666a6.667 6.667 0 100-13.334 6.667 6.667 0 000 13.334z",clipRule:"evenodd"})),Gr||(Gr=y.createElement("path",{d:"M19.388 9.9l-2.475 3.143 3.63 2.858 2.31-4-3.465-2zm-2.266-1.407l-3.464-2-2.165 3.75 3.91 1.861 1.719-3.611zm6.732-6.326l3.464 2-3.465-2zm-.867-1.5v-4 4zm-7.02 0v4-4zm-.868.505l3.476 1.98-3.476-1.98zM11.586 7.34L8.11 5.36 4.58 11.562l7.133-.224-.126-3.998zm2.92.263l-.842 3.91 2.867.617 1.45-2.548-3.475-1.98zm2.43-4.268v-4h-2.325l-1.15 2.02 3.475 1.98zm3.165 0l3.464 2 3.464-6h-6.928v4zM6.883 8.461l1.697 3.622 3.945-1.85-2.178-3.772-3.464 2zM4.608 9.856l-3.464 2 2.296 3.976 3.624-2.819-2.456-3.157zm-.686-6.523v-4h-6.929l3.465 6 3.464-2zm3.164 0l3.476-1.98-1.15-2.02H7.085v4zm2.146 3.77L5.757 9.081l3.475 6.103 3.476-6.103-3.476-1.98zm1.535-2.695l3.476 1.98 1.127-1.98-1.127-1.98-3.476 1.98zM8.924 1.172L12.4-.808l-3.476 1.98zm-8.755.995l-3.464 2 3.464-2zm12.118 11.475l3.804-1.236-3.804 1.236zm.805 2.48l3.804-1.236-3.804 1.236zm-1.44-2.48l3.805 1.236-3.804-1.236zm-.805 2.48l-3.804-1.236 3.804 1.236zm-3.12.833l2.351-3.236-2.35 3.236zm2.11 1.532l-2.352 3.236 2.351-3.236zm.12.373l3.805 1.236-3.805-1.236zm-.805 2.48l3.804 1.235-3.804-1.236zm.513.372l-2.351-3.236 2.35 3.236zm2.109-1.532l-2.351-3.236 2.35 3.236zm.392 0l2.35-3.236-2.35 3.236zm2.108 1.532l-2.35 3.236 2.35-3.236zm.514-.373l3.804-1.236-3.804 1.236zm-.806-2.48l-3.804 1.237 3.804-1.236zm.121-.372l2.351 3.236-2.351-3.236zm2.109-1.532l-2.351-3.236 2.351 3.236zm5.651-10.197a16.005 16.005 0 00-3.021-1.877l-3.44 7.223a8 8 0 011.511.94l4.95-6.286zM20.39.167L15.924 7.9l6.928 4 4.466-7.734-6.929-4zm2.599 4.5c-2.31 0-3.753-2.5-2.599-4.5l6.929 4c1.924-3.334-.482-7.5-4.33-7.5v8zm-7.02 0h7.02v-8h-7.02v8zm2.607-1.515a3 3 0 01-2.607 1.515v-8a5 5 0 00-4.345 2.526l6.952 3.959zm-3.513 6.167l3.513-6.167-6.952-3.96L8.11 5.36l6.952 3.959zM11.97 3.333c-.17 0-.34.003-.51.008l.252 7.996c.085-.002.171-.004.258-.004v-8zm3.377.358a16.048 16.048 0 00-3.377-.358v8c.585 0 1.152.063 1.694.18l1.683-7.822zm-1.886-2.337L11.03 5.622l6.952 3.96 2.43-4.269-6.951-3.959zm6.64-2.02h-3.165v8h3.165v-8zm.485 11.159l2.979-5.16-6.928-4-2.98 5.16 6.93 4zM5.185 4.84a16 16 0 00-3.033 1.859l4.912 6.314a8.001 8.001 0 011.516-.93L5.185 4.84zm-4.727.493l2.96 5.129 6.929-4-2.961-5.129-6.928 4zm6.628-6H3.922v8h3.164v-8zm5.622 5.79l-2.146-3.77-6.952 3.96 2.147 3.769 6.951-3.96zM7.291 2.428L5.757 5.123l6.951 3.959 1.535-2.694-6.952-3.96zm-1.843.723l1.843 3.236 6.952-3.958L12.4-.808l-6.952 3.96zm2.607 1.516A3 3 0 015.448 3.15L12.4-.808a5 5 0 00-4.345-2.525v8zm-7.02 0h7.02v-8h-7.02v8zm2.598-4.5c1.155 2-.289 4.5-2.598 4.5v-8c-3.85 0-6.255 4.166-4.33 7.5l6.928-4zm4.44 7.689L3.632.166l-6.928 4 4.44 7.69 6.927-4zM14.635 18a2.667 2.667 0 01-2.666 2.667v8c5.89 0 10.666-4.776 10.666-10.667h-8zm-2.666-2.667A2.667 2.667 0 0114.636 18h8c0-5.891-4.775-10.667-10.666-10.667v8zM9.303 18a2.667 2.667 0 012.667-2.667v-8C6.079 7.333 1.303 12.11 1.303 18h8zm2.667 2.667A2.667 2.667 0 019.303 18h-8c0 5.891 4.776 10.667 10.667 10.667v-8zM17.303 18a5.333 5.333 0 01-5.333 5.333v8c7.363 0 13.333-5.97 13.333-13.333h-8zm-5.333-5.333A5.333 5.333 0 0117.303 18h8c0-7.364-5.97-13.333-13.333-13.333v8zM6.636 18a5.333 5.333 0 015.334-5.333v-8C4.606 4.667-1.364 10.637-1.364 18h8zm5.334 5.333A5.333 5.333 0 016.636 18h-8c0 7.364 5.97 13.333 13.334 13.333v-8zm-3.488-8.455l.806 2.48 7.608-2.473-.805-2.479-7.609 2.472zm6.975 0c-1.098 3.379-5.877 3.378-6.975 0l7.609-2.472c-1.297-3.992-6.945-3.992-8.243 0l7.609 2.472zm-.806 2.48l.806-2.48-7.609-2.472-.805 2.48 7.608 2.472zm-4.12 2.994a4.333 4.333 0 004.12-2.994l-7.608-2.473a3.667 3.667 0 013.487-2.533v8zm-2.608 0h2.607v-8H7.923v8zm2.155-6.633c2.874 2.088 1.397 6.633-2.155 6.633v-8c-4.198 0-5.943 5.372-2.547 7.839l4.702-6.472zm2.11 1.532l-2.11-1.532-4.702 6.472 2.11 1.532 4.701-6.472zm1.574 4.845a4.333 4.333 0 00-1.575-4.845l-4.702 6.472a3.667 3.667 0 01-1.332-4.1l7.609 2.473zm-.806 2.48l.806-2.48-7.609-2.472-.805 2.479 7.608 2.472zm-5.642-4.1c2.873-2.088 6.74.721 5.642 4.1l-7.608-2.473c-1.298 3.992 3.272 7.312 6.668 4.845l-4.702-6.472zm2.109-1.532l-2.11 1.532 4.703 6.472 2.109-1.532-4.702-6.473zm5.094 0a4.333 4.333 0 00-5.094 0l4.702 6.472a3.667 3.667 0 01-4.31 0l4.702-6.473zm2.109 1.532l-2.11-1.532-4.702 6.472 2.11 1.532 4.702-6.472zm-5.643 4.1c-1.097-3.379 2.769-6.188 5.643-4.1l-4.703 6.472c3.396 2.467 7.966-.853 6.669-4.845l-7.609 2.472zm-.805-2.48l.805 2.48 7.609-2.473-.806-2.48-7.608 2.473zm1.574-4.845a4.333 4.333 0 00-1.574 4.845l7.608-2.472a3.667 3.667 0 01-1.332 4.1l-4.702-6.473zm2.109-1.532l-2.11 1.532 4.703 6.472 2.11-1.532-4.703-6.472zm2.155 6.633c-3.552 0-5.029-4.545-2.155-6.633l4.702 6.472c3.396-2.467 1.65-7.84-2.547-7.84v8zm-2.607 0h2.607v-8H13.41v8zm-4.121-2.994a4.333 4.333 0 004.121 2.994v-8a3.667 3.667 0 013.487 2.534l-7.608 2.472z",mask:"url(#sports_svg__a)"})))}}],$r=()=>{const e=(0,No.Q)(),t=(0,X.fz)(Tr),{colors:i}=(0,a.a)(),{pathname:n}=(0,f.TH)(),r=(0,f.LX)(n,{path:V.Ad.topics,exact:!0}),s=null==r?void 0:r.params.name,l=(0,y.useCallback)((e=>{const i=e.currentTarget.dataset.topic;t.handleEnterTopic({topic_name:i})}),[t]);return(0,o.jsxs)(Wr,{children:[(0,o.jsx)(Vr,{children:e("topic_foryou_topics_header")},void 0),zr.map((({key:t,value:n,Icon:a})=>{const r=s===n;return(0,o.jsxs)(Yr,Object.assign({"data-topic":n,to:V.zp.topics({name:n}),onClick:l},{children:[r&&(0,o.jsx)("h1",Object.assign({style:{display:"none"}},{children:e(t)}),void 0),(0,o.jsx)(a,{width:32,height:32,fill:r?i.Primary:i.Primary2},void 0),(0,o.jsx)(Kr,Object.assign({active:r},{children:e(t)}),void 0)]}),t)}))]},void 0)},qr=(0,y.memo)((function({lang:e,slot:t,transStatus:i,extraTop:n,extraWidth:a}){const{user:r,isSideNavActive:s,topicLab:l,region:c}=(0,K.mp)($.G,{selector:e=>{var t,i,o;return{user:null===(t=e.appContext)||void 0===t?void 0:t.$user,isSideNavActive:e.sideNavActive,topicLab:(0,pi.x)(null===(i=e.appContext)||void 0===i?void 0:i.$abTestVersion,"video_topic"),region:null===(o=e.appContext)||void 0===o?void 0:o.$region}},dependencies:[]}),{pathname:d}=(0,f.TH)(),_=gi(),{permissionInfo:u}=(0,K.mp)(Di),p=Boolean(r),m=(0,y.useRef)(null),E=(0,y.useRef)(null),[{profileUserId:g,offsetTop:h,offsetLeft:T},S]=(0,K.b7)(gr,{selector:({profileUserId:e,itemOffset:t,offsetLeft:i})=>({profileUserId:e,offsetTop:t,offsetLeft:i}),dependencies:[]}),[O,A]=(0,y.useState)(!1),I=(0,y.useCallback)(((e,t,i)=>{var o,n;const a=document.documentElement.scrollTop||document.body.scrollTop,r=null!==(n=null===(o=E.current)||void 0===o?void 0:o.scrollTop)&&void 0!==n?n:0;let s;window.innerWidth<1072?(s=t-r+a-re.Mz+20,A(!0)):(s=t-r+a+10,A(!1)),S.itemEnter({userId:e,itemOffset:s,timeout:1e3,offsetLeft:i})}),[S]),v=(0,y.useCallback)((()=>{S.itemEnter({userId:null,timeout:0})}),[S]),C=(0,y.useCallback)((()=>{S.itemEnter({userId:g,timeout:0})}),[S,g]),N=(0,y.useCallback)((()=>{S.itemEnter({userId:null,timeout:500})}),[S]),R=(0,y.useCallback)((()=>{g&&S.itemEnter({userId:null,timeout:0})}),[S,g]);(0,y.useEffect)((()=>{const e=ui()((()=>{S.itemEnter({userId:null,timeout:0})}),1e3);return window.addEventListener("scroll",e),()=>{window.addEventListener("scroll",e)}}),[S]);const L=(0,K.qj)(vo);(0,y.useEffect)((()=>{(null==r?void 0:r.uid)&&!_&&(null==u?void 0:u.showComputerLiveEntrance)&&L.getCreateRoomInfo({})}),[L,r,null==u?void 0:u.showComputerLiveEntrance,_]);const b=O,P=(0,K.qj)(Di);return(0,y.useEffect)((()=>{(null==r?void 0:r.uid)&&P.getLivePermission()}),[P,r]),(0,y.useEffect)((()=>{g&&N()}),[N,d]),(0,o.jsxs)(tr,Object.assign({transStatus:i,extraWidth:a},{children:[(0,o.jsxs)(er,Object.assign({extraTop:n,extraWidth:a,Wrapper:ir,onScroll:R,ref:E},{children:[(0,o.jsx)(pr,{scrollRef:E},void 0),(null==u?void 0:u.showComputerLiveEntrance)&&(0,o.jsx)(Ua,{hintActive:s,scrollRef:E},void 0),!p&&(0,o.jsx)(Ga,{},void 0),"V2"===l&&"US"===c&&(0,o.jsx)($r,{},void 0),t||(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(dn,{onEnterItem:I,onLeaveItem:v},void 0),p&&(0,o.jsx)(ln,{ref:m},void 0),(0,o.jsx)(wn,{},void 0),(0,o.jsx)(ar,{},void 0)]},void 0),(0,o.jsx)(Xn,{lang:e},void 0)]}),void 0),g&&(0,o.jsx)(mi.C,{followTheme:"primary",paddingTop:24,paddingStart:b?20:0,hideSignature:!0,fixedLeft:b?52:T,top:h,uniqueId:g,onMouseEnter:C,onMouseLeave:N},void 0)]}),void 0)}));var Zr=i(37535),Qr=i.n(Zr),Xr=i(31090),Jr=i(16119),es=i(40599);const ts=[{"*, *::before, *::after":{boxSizing:"border-box"},"body,h1,h2,h3,h4,p,figure,blockquote,dl,dd":{margin:0},'ul[role="list"], ol[role="list"]':{listStyle:"none"},"html:focus-within":{scrollBehavior:"smooth"},body:{minHeight:"100vh",textRendering:"optimizeSpeed",lineHeight:1.5},"a:not([class])":{textDecorationSkipInk:"auto"},"img, picture":{maxWidth:"100%",display:"block"},"input,button,textarea,select":{font:"inherit"},"@media (prefers-reduced-motion: reduce)":{"html:focus-within":{scrollBehavior:"auto"},"*,*::before,*::after":{animationDuration:"0.01ms !important",animationIterationCount:"1 !important",transitionDuration:"0.01ms !important",scrollBehavior:"auto !important"}},"@supports (-webkit-touch-callout: none)":{body:{minHeight:"-webkit-fill-available"}}}];var is=i(66312),os=i(55602),ns=i(43039);const as=(0,Bo.Z)("div",{target:"eyhjz840"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivErrorBoundaryContainer;");class rs extends y.Component{constructor(){super(...arguments),this.state={isNetOffline:!1,hasError:!1},this.handleOnlineStatusChange=()=>{this.setState({isNetOffline:!navigator.onLine})}}get iconElem(){const{hasError:e}=this.state;return e?(0,o.jsx)(is.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0):(0,o.jsx)(os.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}get text(){const{hasError:e}=this.state;return e?{title:"Page not available",desc:"server_error_sub",button:"try_again_btn"}:{title:"network_error_title",desc:"network_error_sub",button:"try_again_btn"}}componentDidMount(){window.addEventListener("online",this.handleOnlineStatusChange),window.addEventListener("offline",this.handleOnlineStatusChange)}componentWillUnmount(){window.removeEventListener("online",this.handleOnlineStatusChange),window.removeEventListener("offline",this.handleOnlineStatusChange)}handleRetry(){window.location.reload()}componentDidCatch(e,t){const{onCatchError:i}=this.props;i(e,t),this.setState({hasError:!0})}render(){const{isNetOffline:e,hasError:t}=this.state,{children:i,isMobile:n}=this.props,{t:a}=this.context;if(e||t){const{title:e,desc:t,button:i}=this.text;return n?(0,o.jsx)(as,{children:(0,o.jsx)(ns.T,{brightness:0,isFullScreen:!0,iconElem:this.iconElem,title:a(e),desc:a(t),buttonText:a(i),onButtonClick:this.handleRetry},void 0)},void 0):(0,o.jsx)(ns.T,{isFullScreen:!0,onButtonClick:this.handleRetry,iconElem:this.iconElem,title:a(e),desc:a(t),buttonText:a(i)},void 0)}return i}}rs.contextType=u.OO;let ss=class{constructor(e){this.fetch=e}reportRenderError(e){return this.fetch.get("/node/page/error",{query:{page:e}})}};function ls({children:e,isMobile:t}){var i;const n=(0,X.fz)(Xr.i),[r,s]=(0,K.b7)($.G,{selector:e=>({lang:e.lang,appContext:e.appContext&&Qr()(e.appContext,"statusCode"),initialized:e.initialized}),dependencies:[]}),{pathname:l,search:c}=(0,f.TH)(),d=(0,No.H)(t,null===(i=r.appContext)||void 0===i?void 0:i.$isBot);(0,y.useEffect)((()=>{var e,t,i,o,a;const l=null!==(o=null!==(i=null===(t=null===(e=(0,v.parse)(c))||void 0===e?void 0:e.lang)||void 0===t?void 0:t.toString())&&void 0!==i?i:document.documentElement.getAttribute("lang"))&&void 0!==o?o:"en";s.init({lang:l,starlingNs:d}),"others"===(null===(a=r.appContext)||void 0===a?void 0:a.$botType)&&n.checkTTwid(),n.initTargetIdcRequest().subscribe()}),[s]);const _=(0,X.fz)(eo.GV);(0,Jr.L)((()=>{r.appContext&&_.setAppContext(r.appContext)}),[_,r.appContext]);const{GlobalModalProvider:u,value:p}=(0,es.R)(),{value:m}=(0,y.useContext)(U),E=(0,y.useMemo)((()=>w({isDark:m,isMobile:t,lang:r.lang})),[m,t,r.lang]),g=(A={isDark:m,lang:r.lang,isMobile:t},(0,y.useMemo)((()=>{return e=w(A),t=A.isMobile,[ts,{body:{fontFamily:e.fontFamilies.Proxima,fontSize:e.text.fontSize,color:e.colors.TextPrimary,backgroundColor:e.colors.BGPrimary,overscrollBehavior:"contain",direction:e.direction,a:{color:e.colors.TextPrimary,transition:"color 250ms",textDecoration:"none",cursor:"pointer"},"a:visited":{color:e.colors.TextPrimary},"a:hover":{color:e.colors.TextPrimary,textDecoration:"underline"},"a:active":{color:e.colors.TextPrimary},"a:focus":{color:e.colors.TextPrimary},input:{"::-ms-clear":{display:"none",width:0,height:0},"::-ms-reveal":{display:"none",width:0,height:0},"::-webkit-search-decoration, ::-webkit-search-cancel-button, ::-webkit-search-results-button, ::-webkit-search-results-decoration":{display:"none"}},"&.hidden":{overflow:"hidden"},WebkitFontSmoothing:"antialiased"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff2) format("woff2"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Semibold"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff2) format("woff2"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff) format("woff"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Medium"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.otf) format("opentype")',fontWeight:500,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Semibold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{html:t?{}:{body:{overflowY:"overlay"},"*":{"::-webkit-scrollbar":{borderRadius:"0",width:"8px"},"::-webkit-scrollbar-track":{borderRadius:"0",backgroundColor:"rgba(0, 0, 0, 0)"},"::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, .15)"}}}}];var e,t}),[A])),h=(0,X.fz)(Ai.n),T=(0,X.fz)(ss),S=(0,y.useMemo)((()=>(0,fe.BB)(l)),[l]),O=(0,y.useCallback)(((e,t)=>{try{T.reportRenderError(S),h.captureMessage(`Page render Error: ${e.message}`,"fatal",{page:S}),console.info("Error occurs in render time:",e),console.info("Error occurs in component:",t.componentStack)}catch(e){console.error("Error occurs when reporting error:",e)}}),[T,S,h]);var A;return r.initialized?(0,o.jsx)(u,Object.assign({value:p},{children:(0,o.jsx)(a.b,Object.assign({theme:E},{children:(0,o.jsxs)(rs,Object.assign({onCatchError:O,isMobile:t},{children:[(0,o.jsx)(Tn.xB,{styles:g},void 0),e]}),void 0)}),void 0)}),void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Tn.xB,{styles:{"#app":{justifyContent:"center"}}},void 0),(0,o.jsx)(Vt.g,{center:!0,style:{margin:"auto"}},void 0)]},void 0)}ss=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],ss);var cs=i(77813),ds=i(72349),_s=i.n(ds);let us=class{constructor(e){this.fetch=e}getComplianceSettings(){return this.fetch.get("/api/compliance/settings/",{query:{aid:1988,fromWeb:1}}).pipe(this.errorHandler)}validateAge(e){return this.fetch.post("https://www.tiktok.com/api/v3/register/verification/age/",{body:_s().stringify({fromWeb:1,source:"web",session_registered:1,birthday:e,tt_csrf_token:this.fetch.csrfToken})}).pipe(this.errorHandler)}errorHandler(e){return e.pipe((0,Si.K)((e=>(0,Ti.of)(Object.assign({error_code:e.error_code||-1},e)))))}};var ps;us=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],us),function(e){e[e.PASS=0]="PASS",e[e.FTC=1]="FTC",e[e.NormalThreshold=2]="NormalThreshold"}(ps||(ps={}));let ms=class extends le.D{constructor(e,t){super(),this.service=e,this.pnsReport=t,this.defaultState={ageGateAction:0,registerLimited:!1,initial:!1,birthday:"",checkAgeLoading:!1,ageEligible:!1}}setYear(e,t){e.year=t}setMonth(e,t){e.month=t}setDate(e,t){e.date=t}setBirthday(e,t){const{year:i,month:o,date:n}=t,a=`${i}-${o<10?`0${o}`:o}-${n<10?`0${n}`:n}`;a!==e.birthday&&(e.birthday=a,e.ageEligible=!1,e.ageErrorMsg="",e.showAgeConfirm=!1)}setAgeGateSetting(e,t){e.initial=!0,e.ageGateAction=t.action,e.registerLimited=t.registerLimited}setCheckAgeLoading(e,t){e.checkAgeLoading=t}setAgeCheckResult(e,t){e.ageErrorMsg=t.ageErrorMsg,e.ageEligible=t.ageEligible,e.showErrorByToast=Boolean(t.showErrorByToast),e.errorCode=t.errorCode}setShowAgeConfirm(e,t){e.showAgeConfirm=t}getComplianceSettings(e){return e.pipe((0,hi.z)((()=>this.service.getComplianceSettings().pipe((0,pe.U)((e=>{if(0===(null==e?void 0:e.status_code)){const{age_gate_info:t={},device_limit_register_expired:i=!0}=e,{register_age_gate_action:o=2}=t;return this.getActions().setAgeGateSetting({registerLimited:!i,action:o})}return this.noop()}))))))}validateAge(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([{canSkip:e},{birthday:t,ageEligible:i,ageGateAction:o}])=>e||i||0===o?(0,Ti.of)(this.noop()):this.service.validateAge(t).pipe((0,pe.U)((e=>{const{is_eligible:t,status_code:i,status_msg:o,register_age_gate_post_action:n}=e;let a=o;return this.pnsReport.handleAgeGateResponse(t,i),t?this.getActions().setAgeCheckResult({ageErrorMsg:"",ageEligible:!0,errorCode:i}):t||1!==n?this.getActions().setAgeCheckResult({ageErrorMsg:a||"Sorry, something went wrong, please try again later",ageEligible:!1,showErrorByToast:!1,errorCode:i}):(a=a||"mus_agegate_not_eligible",this.getActions().setShowAgeConfirm(!0))}))))))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],ms.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setYear",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setMonth",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setDate",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setBirthday",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setAgeGateSetting",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setCheckAgeLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setAgeCheckResult",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"setShowAgeConfirm",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"getComplianceSettings",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ms.prototype,"validateAge",null),ms=(0,p.__decorate)([(0,de.Y)("AgeGateModule"),(0,p.__metadata)("design:paramtypes",[us,ne])],ms);var Es=i(64236),gs=i(80840);const hs=(0,gs.Z)("div",{target:"e1lgic6i0"})({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginTop:"40px",fontWeight:600},"label:DivBack;"),Ts=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),{loginModalShow:t}=(0,K.mp)(Wt.r),i=(0,f.k6)(),n=(0,f.$B)([V.gY.loginQRcode,V.gY.loginPhoneOrEmail,V.gY.signupPhoneOrEmail]),a=(0,y.useCallback)((()=>{i.goBack()}),[i]);return t||!n?null:(0,o.jsxs)(hs,Object.assign({onClick:a},{children:[(0,o.jsx)(Es.Z,{},void 0),e("common_login_back")]}),void 0)}));var Ss=i(1394),Os=i.n(Ss),As=i(96980);const Is={1002:"common_registration_phone_input_error",1003:"common_registration_phone_input_error",1054:"common_login_reset_phone_input_error"},vs={1011:"common_login_reset_email_input_error",1202:"common_registration_phone_sms_error"},ys={1039:"login_risk_SMS_1",1091:"passport_uid_banned",1203:"mus_error_code",1054:"common_login_reset_phone_input_error",1051:"common_registration_password_error",1382:"createpw_error_1",8:"login_expired",2027:"login_page_lock",2028:"login_page_lock"},Cs=[1203];var fs,Ns;fs||(fs={}),function(e){e[e.NeedTwoStep=2046]="NeedTwoStep",e[e.NeedForceResetPassword=1381]="NeedForceResetPassword",e[e.NeedReactiveCanceledAccount=1075]="NeedReactiveCanceledAccount",e[e.TwoStepBlockResetPassword=1356]="TwoStepBlockResetPassword",e[e.TwoStepBlockLogin=1053]="TwoStepBlockLogin",e[e.NeedSignup=1011]="NeedSignup",e[e.AuthorizationError=1045]="AuthorizationError",e[e.ReactiveAccountError=4]="ReactiveAccountError"}(Ns||(Ns={}));var Rs=i(51882),Ls=i(42905),bs=i(23427);const Ps=(e,t,i)=>{switch(e){case 1027:case 3250:return"common_registration_username_error_format";case 3251:return"common_registration_username_error_short";case 3252:return"common_registration_username_error_long";case 3253:return"common_registration_username_error_period";case 3254:return"common_registration_username_error_number";case 1024:case 1028:return"common_registration_username_error_ sensitivity";case 0:return;default:return null!=i?i:t?"common_registration_username_error_occupied":"common_registration_username_error_ sensitivity"}},Ds=e=>-1!==[1340,1341].indexOf(e)||-1!==[2020,2025,2032,2033,2031,2046].indexOf(e)||-1!==[1357,1384].indexOf(e);var Ms,xs,ws,Us;!function(e){e.ClickSignUp="click_sign_up",e.ClickLogin="click_login"}(Ms||(Ms={})),function(e){e.Qrcode="QRcode",e.PhoneOrEmail="phone_or_email",e.Email="email",e.Username="handle",e.PhonePassword="phone",e.Sms="sms_verification",e.ResetByPhone="reset_pwd_by_phone",e.ResetByEmail="reset_pwd_by_email",e.ForceResetByEmail="force_reset_pwd_by_email",e.ForceResetByPhone="force_reset_pwd_by_phone",e.Repeat="repeatLogin"}(xs||(xs={})),function(e){e.Click="user_click",e.Resend="resend",e.ForgotPwd="forgot_password",e.TwoStep="2sv",e.ForceReset="force_reset",e.Delete="delete"}(ws||(ws={})),function(e){e[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.Cancelled=2]="Cancelled"}(Us||(Us={}));let ks=class{constructor(){this.setPlatform=e=>{this.platform=e},this.event=(e,t)=>{oe.WB.event(e,Object.assign({platform:this.platform},t))},this.handlePageView=()=>{oe.WB.event("page_view",{enter_from:"login"})},this.loginNotify=()=>{oe.WB.event("login_notify")},this.LoginNotifyClose=e=>{oe.WB.config({commonEventParams:{page_name:oe.WB.commonParams.enter_from}}),this.event("login_notify_close",e)},this.clickSignUp=()=>{oe.WB.event("click_sign_up")},this.enterSignUp=()=>{oe.WB.event("enter_sign_up",{enter_type:"click_sign_up"})},this.clickLoginButton=()=>{oe.WB.event("click_login_button")},this.sendSms=e=>{oe.WB.event("send_sms",e)},this.sendMail=e=>{oe.WB.event("send_mail",e)},this.sendSmsResult=e=>{oe.WB.event("monitor_send_sms",e)},this.sendMailResult=e=>{oe.WB.event("monitor_send_email_code",e)},this.loginSubmit=e=>{this.event("login_submit",{enter_type:(null==e?void 0:e.signUp)?"click_sign_up":"click_login"})},this.loginSuccess=e=>{this.event("login_success",{enter_type:e.signUp?"click_sign_up":"click_login",is_register:e.is_register}),"force_reset_pwd_by_email"!==this.platform&&"force_reset_pwd_by_phone"!==this.platform||this.forceResetSuccess()},this.loginFailure=e=>{this.event("login_failure",{enter_type:e.signUp?"click_sign_up":"click_login",error_code:e.error_code})},this.thirdPartyLoginResult=e=>{this.event("monitor_login_thirdparty",e)},this.clickQrCode=()=>{this.platform="QRcode",this.event("click_QR_login")},this.scanQrCode=()=>{this.event("scan_QR_login")},this.ageGateShow=()=>{this.event("age_gate_show",{enter_type:"click_sign_up"})},this.twoStepNotify=e=>{this.event("login_two_step_verification_notify",e)},this.twoStepSubmit=e=>{this.event("login_two_step_verification_submit",e)},this.twoStepResult=e=>{this.event("login_two_step_verification_result",e)},this.forceResetSubmit=()=>{this.event("forced_pwchange_submit")},this.forceResetSuccess=()=>{this.event("forced_pwchange_success")},this.showEmailConsent=()=>{oe.WB.event("show_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version"})},this.clickEmailConsent=e=>{oe.WB.event("click_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version",status:e.checked?"checked":"unchecked"})},this.privateNotifyShow=()=>{oe.WB.event("private_notify_show")},this.privateNotifyClick=e=>{oe.WB.event("private_notify_click",e)},this.rigisterClickNext=e=>{oe.WB.event("register_click_next",e)},this.thirdRegister=()=>{oe.WB.event("monitor_third_register")}}};var Fs;ks=(0,p.__decorate)([(0,ie.G)()],ks),function(e){e.Main="webapp",e.TV="tv",e.AgeVerify="ageVerify",e.DataExport="dataExport",e.Seller="seller",e.Rechange="recharge",e.Search="search"}(Fs||(Fs={}));const Bs={loginTitle:"common_login_panel_title",loginSlogan:"common_login_panel_copy",signUpTitle:"common_registration_panel_title",signUpSlogan:"common_registration_panel_copy",aid:"1459",disableSignup:!1,isSecurityVerification:!1},Gs={tv:{loginTitle:"tv_login_title",loginSlogan:"tv_login_tiktoktv-desc",signUpTitle:"tv_sign_up_title",signUpSlogan:"tv_login_tiktoktv-desc"},ageVerify:{loginTitle:"age_verify_login_title",loginSlogan:"age_verify_login_intro",disableSignup:!0,isSecurityVerification:!0},dataExport:{loginTitle:"data_export_login_title",loginSlogan:"data_export_login_intro",disableSignup:!0,isSecurityVerification:!0},seller:{aid:"4068"},recharge:{loginTitle:"webapp_coin_recharge_login",signUpTitle:"WebApp_coin_recharge_9"},search:{loginTitle:"login_to_search",signUpTitle:"login_to_search"}};var js,Hs;!function(e){e.AccountNotExist="inexistent",e.InEligible="ineligible",e.TwoStepBlock="twoStepVerifyBlock",e.TwoStepBlockResetPwd="TwoStepBlockResetPwd",e.Null=""}(js||(js={})),function(e){e[e.Login=1]="Login",e[e.Reactive=2]="Reactive"}(Hs||(Hs={}));let Ws=class{constructor(e){this.fetch=e}getUrlParams(e){const t=e?e.split("?")[1]:window.location.search;return(0,v.parse)(t)}getLoginConfig(){return this.fetch.get("/node-webapp/api/login-config",{baseUrlType:2})}};Ws=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],Ws);let Vs=class{constructor(e){this.service=e,this.getLoginType=e=>{var t;const i=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null==e?void 0:e.enter_method;if(!i)return"webapp";const o=Array.isArray(i)?i[0]:i;return Gs[o]?i:"webapp"},this.getShowAlertMessageType=(e,t)=>{const{message:i}=t;if(!i)return;const o=Array.isArray(i)?i[0]:i;return"ageVerify"!==e||"ineligible"!==o&&"inexistent"!==o?void 0:o}}getLoginContext(e){var t;const i=this.service.getUrlParams(e),o=this.getLoginType(i),n=this.getShowAlertMessageType(o,i),a=null!==(t=Gs[o])&&void 0!==t?t:{},{redirect_url:r=""}=i;return this.service.getLoginConfig().pipe((0,hi.z)((e=>{if(0!==e.statusCode)throw new Error("get api error");return(0,Ti.of)(Object.assign({},e.config))})),(0,Si.K)((()=>(0,Ti.of)({emailSuffixConfig:[],platformConfig:{show_num:3,order:"FACEBOOK,GOOGLE,TWITTER,INSTAGRAM"},disableSignup:!1,forceLogin:!1,emailConsent:!1,ttpConfig:{open:!0,syncSeverList:[{name:"global",domain:"https://m.tiktok.com"},{name:"ttp",domain:"https://us.tiktok.com"}]}})))).pipe((0,pe.U)((e=>Object.assign(Object.assign(Object.assign(Object.assign({},Bs),a),{loginType:o,showAlertMessageType:n,redirectUrl:Array.isArray(r)?r[0]:null!=r?r:""}),e))))}};Vs=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ws])],Vs);let Ys=class extends le.D{constructor(e,t){super(),this.service=e,this.modalLogin=t,this.defaultState={initialized:!1,platformConfig:{order:""},emailSuffixConfig:[]}}setContext(e,t){for(const i in t)e[i]=t[i]}setInitialized(e,t){e.initialized=t}setShowAlertMessageType(e,t){e.showAlertMessageType=t}init(e){return e.pipe((0,ue.M)(this.modalLogin.state$),(0,hi.z)((([e,{url:t,loginModalShow:i}])=>this.service.getLoginContext(i?t:void 0).pipe((0,me.z)((e=>(0,Ti.of)(this.getActions().setContext(e),this.getActions().setInitialized(!0)))),(0,xi.l)(this.terminate())))))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],Ys.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Ys.prototype,"setContext",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],Ys.prototype,"setInitialized",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Ys.prototype,"setShowAlertMessageType",null),(0,p.__decorate)([(0,ce.Qm)({ssr:!0}),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ys.prototype,"init",null),Ys=(0,p.__decorate)([(0,de.Y)("LoginContextModule"),(0,p.__metadata)("design:paramtypes",[Vs,Wt.r])],Ys);const Ks=[{label:"A",lists:[{name:"Afghanistan",shortname:"AF",code:93,key:"afghanistan"},{name:"land Islands",shortname:"AX",code:35818,key:"land_islands"},{name:"Albania",shortname:"AL",code:355,key:"albania"},{name:"Algeria",shortname:"DZ",code:213,key:"algeria"},{name:"American Samoa",shortname:"AS",code:1684,key:"american_samoa"},{name:"Andorra",shortname:"AD",code:376,key:"andorra"},{name:"Angola",shortname:"AO",code:244,key:"angola"},{name:"Anguilla",shortname:"AI",code:1264,key:"anguilla"},{name:"Antigua & Barbuda",shortname:"AG",code:1268,key:"antigua_and_barbuda"},{name:"Argentina",shortname:"AR",code:54,key:"argentina"},{name:"Armenia",shortname:"AM",code:374,key:"armenia"},{name:"Aruba",shortname:"AW",code:297,key:"aruba"},{name:"Ascension Island",shortname:"SH",code:247,key:"ascension"},{name:"Australia",shortname:"AU",code:61,key:"australia"},{name:"Austria",shortname:"AT",code:43,key:"austria"},{name:"Azerbaijan",shortname:"AZ",code:994,key:"azerbaijan"}]},{label:"B",lists:[{name:"Bahamas",shortname:"BS",code:1242,key:"bahamas"},{name:"Bahrain",shortname:"BH",code:973,key:"bahrain"},{name:"Bangladesh",shortname:"BD",code:880,key:"bangladesh"},{name:"Barbados",shortname:"BB",code:1246,key:"barbados"},{name:"Barbuda",shortname:"AG",code:1268,key:"barbuda"},{name:"Belarus",shortname:"BY",code:375,key:"belarus"},{name:"Belgium",shortname:"BE",code:32,key:"belgium"},{name:"Belize",shortname:"BZ",code:501,key:"belize"},{name:"Benin",shortname:"BJ",code:229,key:"benin"},{name:"Bermuda",shortname:"BM",code:1441,key:"bermuda_island"},{name:"Bhutan",shortname:"BT",code:975,key:"bhutan"},{name:"Bolivia",shortname:"BO",code:591,key:"bolivia"},{name:"Bosnia & Herzegovina",shortname:"BA",code:387,key:"bosnia_and_herzegovina"},{name:"Botswana",shortname:"BW",code:267,key:"botswana"},{name:"Brazil",shortname:"BR",code:55,key:"brazil"},{name:"British Indian Ocean Territory",shortname:"IO",code:246,key:"british_indian_ocean_territory"},{name:"British Virgin Islands",shortname:"VG",code:1284,key:"british_virgin_islands"},{name:"Brunei",shortname:"BN",code:673,key:"brunei"},{name:"Bulgaria",shortname:"BG",code:359,key:"bulgaria"},{name:"Burkina-faso",shortname:"BF",code:226,key:"burkina_faso"},{name:"Burundi",shortname:"BI",code:257,key:"burundi"}]},{label:"C",lists:[{name:"Cameroon",shortname:"CM",code:237,key:"cameroon"},{name:"Canada",shortname:"CA",code:1,key:"canada"},{name:"Cape Verde",shortname:"CV",code:238,key:"cape_verde"},{name:"Caribbean Netherlands",shortname:"BQ",code:5997,key:"caribbean_netherlands"},{name:"Cayman Is.",shortname:"KY",code:1345,key:"cayman_islands"},{name:"Central African Republic",shortname:"CF",code:236,key:"central_african_republic"},{name:"Chad",shortname:"TD",code:235,key:"chad"},{name:"Chile",shortname:"CL",code:56,key:"chile"},{name:"China mainland",shortname:"CN",code:86,key:"china_mainland"},{name:"Christmas Island",shortname:"CX",code:61,key:"christmas_island"},{name:"Cocos (Keeling) Islands",shortname:"CC",code:61,key:"cocos_keeling_islands"},{name:"Colombia",shortname:"CO",code:57,key:"colombia"},{name:"Comoros",shortname:"KM",code:269,key:"comoros"},{name:"Congo - Brazzaville",shortname:"CG",code:242,key:"congo"},{name:"Congo - Kinshasa",shortname:"CD",code:243,key:"congo_kinshasa"},{name:"Cook Is.",shortname:"CK",code:682,key:"cook_islands"},{name:"Costa Rica",shortname:"CR",code:506,key:"costa_rica"},{name:"Croatia",shortname:"HR",code:385,key:"croatia"},{name:"Curaao",shortname:"CW",code:5999,key:"curaao"},{name:"Cyprus",shortname:"CY",code:357,key:"cyprus"},{name:"Czechia",shortname:"CZ",code:420,key:"czech_republic"}]},{label:"D",lists:[{name:"Denmark",shortname:"DK",code:45,key:"denmark"},{name:"Diego Garcia",shortname:"DG",code:246,key:"diego_garcia"},{name:"Djibouti",shortname:"DJ",code:253,key:"djibouti"},{name:"Dominica",shortname:"DM",code:1767,key:"dominica"},{name:"Dominican Republic",shortname:"DO",code:1,key:"dominican_republic"}]},{label:"E",lists:[{name:"EI Salvador",shortname:"SV",code:503,key:"el_salvador"},{name:"Ecuador",shortname:"EC",code:593,key:"ecuador"},{name:"Egypt",shortname:"EG",code:20,key:"egypt"},{name:"Equatorial Guinea",shortname:"GQ",code:240,key:"equatorial_guinea"},{name:"Eritrea",shortname:"ER",code:291,key:"eritrea"},{name:"Estonia",shortname:"EE",code:372,key:"estonia"},{name:"Eswatini",shortname:"SZ",code:268,key:"eswatini"},{name:"Ethiopia",shortname:"ET",code:251,key:"ethiopia"}]},{label:"F",lists:[{name:"Falkland Islands",shortname:"FK",code:500,key:"falkland_islands"},{name:"Faroe Islands",shortname:"FO",code:298,key:"faroe_islands"},{name:"Fiji",shortname:"FJ",code:679,key:"fiji"},{name:"Finland",shortname:"FI",code:358,key:"finland"},{name:"France",shortname:"FR",code:33,key:"france"},{name:"French Guiana",shortname:"GF",code:594,key:"french_guiana"},{name:"French Polynesia",shortname:"PF",code:689,key:"french_polynesia"}]},{label:"G",lists:[{name:"Gabon",shortname:"GA",code:241,key:"gabon"},{name:"Gambia",shortname:"GM",code:220,key:"gambia"},{name:"Georgia",shortname:"GE",code:995,key:"georgia"},{name:"Germany",shortname:"DE",code:49,key:"germany"},{name:"Ghana",shortname:"GH",code:233,key:"ghana"},{name:"Gibraltar",shortname:"GI",code:350,key:"gibraltar"},{name:"Greece",shortname:"GR",code:30,key:"greece"},{name:"Greenland",shortname:"GL",code:299,key:"greenland"},{name:"Grenada",shortname:"GD",code:1473,key:"grenada"},{name:"Guadeloupe",shortname:"GP",code:590,key:"guadeloupe"},{name:"Guam",shortname:"GU",code:1671,key:"guam"},{name:"Guatemala",shortname:"GT",code:502,key:"guatemala"},{name:"Guernsey",shortname:"GG",code:44,key:"guernsey"},{name:"Guinea",shortname:"GN",code:224,key:"guinea"},{name:"Guinea-Bissau",shortname:"GW",code:245,key:"guinea_bissau"},{name:"Guyana",shortname:"GY",code:592,key:"guyana"}]},{label:"H",lists:[{name:"Haiti",shortname:"HT",code:509,key:"haiti"},{name:"Honduras",shortname:"HN",code:504,key:"honduras"},{name:"Hongkong",shortname:"HK",code:852,key:"hongkong"},{name:"Hungary",shortname:"HU",code:36,key:"hungary"}]},{label:"I",lists:[{name:"Iceland",shortname:"IS",code:354,key:"iceland"},{name:"India",shortname:"IN",code:91,key:"india"},{name:"Indonesia",shortname:"ID",code:62,key:"indonesia"},{name:"Iraq",shortname:"IQ",code:964,key:"iraq"},{name:"Ireland",shortname:"IE",code:353,key:"ireland"},{name:"Israel",shortname:"IL",code:972,key:"israel"},{name:"Isle of Man",shortname:"IM",code:44,key:"region_isle_of_man"},{name:"Italy",shortname:"IT",code:39,key:"italy"},{name:"Ivory Coast",shortname:"CI",code:225,key:"cte_d_ivoire"}]},{label:"J",lists:[{name:"Jamaica",shortname:"JM",code:1876,key:"jamaica"},{name:"Japan",shortname:"JP",code:81,key:"japan"},{name:"Jersey",shortname:"JE",code:44,key:"jersey"},{name:"Jordan",shortname:"JO",code:962,key:"jordan"}]},{label:"K",lists:[{name:"Kampuchea (Cambodia )",shortname:"KH",code:855,key:"cambodia"},{name:"Kazakhstan",shortname:"KZ",code:76,key:"kazakhstan"},{name:"Kazakhstan",shortname:"KZ",code:77,key:"kazakhstan"},{name:"Kenya",shortname:"KE",code:254,key:"kenya"},{name:"Kiribati",shortname:"KI",code:686,key:"kiribati"},{name:"Korea",shortname:"KR",code:82,key:"south_korea"},{name:"Kosovo",shortname:"XK",code:383,key:"region_kosovo"},{name:"Kuwait",shortname:"KW",code:965,key:"kuwait"},{name:"Kyrgyzstan",shortname:"KG",code:996,key:"kyrgyzstan"}]},{label:"L",lists:[{name:"Laos",shortname:"LA",code:856,key:"laos"},{name:"Latvia",shortname:"LV",code:371,key:"latvia"},{name:"Lebanon",shortname:"LB",code:961,key:"lebanon"},{name:"Lesotho",shortname:"LS",code:266,key:"lesotho"},{name:"Liberia",shortname:"LR",code:231,key:"liberia"},{name:"Libya",shortname:"LY",code:218,key:"libya"},{name:"Liechtenstein",shortname:"LI",code:423,key:"liechtenstein"},{name:"Lithuania",shortname:"LT",code:370,key:"lithuania"},{name:"Luxembourg",shortname:"LU",code:352,key:"luxembourg"}]},{label:"M",lists:[{name:"Macao",shortname:"MO",code:853,key:"macao"},{name:"Madagascar",shortname:"MG",code:261,key:"madagascar"},{name:"Malawi",shortname:"MW",code:265,key:"malawi"},{name:"Malaysia",shortname:"MY",code:60,key:"malaysia"},{name:"Maldives",shortname:"MV",code:960,key:"maldives"},{name:"Mali",shortname:"ML",code:223,key:"mali"},{name:"Malta",shortname:"MT",code:356,key:"malta"},{name:"Marshall Islands",shortname:"MH",code:692,key:"marshall_islands"},{name:"Martinique",shortname:"MQ",code:596,key:"martinique"},{name:"Mauritania",shortname:"MR",code:222,key:"mauritania"},{name:"Mauritius",shortname:"MU",code:230,key:"mauritius"},{name:"Mayotte",shortname:"YT",code:262,key:"mayotte"},{name:"Mexico",shortname:"MX",code:52,key:"mexico"},{name:"Micronesia",shortname:"FM",code:691,key:"micronesia"},{name:"Moldova, Republic of",shortname:"MD",code:373,key:"republic_of_moldova"},{name:"Monaco",shortname:"MC",code:377,key:"monaco"},{name:"Mongolia",shortname:"MN",code:976,key:"mongolia"},{name:"Montenegro",shortname:"ME",code:382,key:"montenegro"},{name:"Montserrat",shortname:"MS",code:1664,key:"montserrat"},{name:"Morocco",shortname:"MA",code:212,key:"morocco"},{name:"Mozambique",shortname:"MZ",code:258,key:"mozambique"},{name:"Myanmar (Burma)",shortname:"MY",code:95,key:"myanmar_burma"}]},{label:"N",lists:[{name:"Namibia",shortname:"NA",code:264,key:"namibia"},{name:"Nauru",shortname:"NR",code:674,key:"nauru"},{name:"Nepal",shortname:"NP",code:977,key:"nepal"},{name:"Netherlands",shortname:"NL",code:31,key:"netherlands"},{name:"New Caledonia",shortname:"NC",code:687,key:"new_caledonia"},{name:"New Zealand",shortname:"NZ",code:64,key:"new_zealand"},{name:"Nicaragua",shortname:"NI",code:505,key:"nicaragua"},{name:"Niger",shortname:"NE",code:227,key:"niger"},{name:"Nigeria",shortname:"NG",code:234,key:"nigeria"},{name:"Niue",shortname:"NU",code:683,key:"niue"},{name:"Norfolk Island",shortname:"NF",code:672,key:"norfolk_island"},{name:"North Macedonia",shortname:"MK",code:389,key:"macedonia"},{name:"Northern Mariana Islands",shortname:"MP",code:1670,key:"northern_mariana_islands"},{name:"Norway",shortname:"NO",code:47,key:"norway"}]},{label:"O",lists:[{name:"Oman",shortname:"OM",code:968,key:"oman"}]},{label:"P",lists:[{name:"Pakistan",shortname:"PK",code:92,key:"pakistan"},{name:"Palau",shortname:"PW",code:680,key:"palau"},{name:"Palestinian Territories",shortname:"PS",code:970,key:"palestinian_territories"},{name:"Panama",shortname:"PA",code:507,key:"panama"},{name:"Papua New Cuinea",shortname:"PG",code:675,key:"papua_new_guinea"},{name:"Paraguay",shortname:"PY",code:595,key:"paraguay"},{name:"Peru",shortname:"PE",code:51,key:"peru"},{name:"Philippines",shortname:"PH",code:63,key:"philippines"},{name:"Pitcairn Islands",shortname:"PN",code:64,key:"pitcairn_islands"},{name:"Poland",shortname:"PL",code:48,key:"poland"},{name:"Portugal",shortname:"PT",code:351,key:"portugal"},{name:"Puerto Rico",shortname:"PR",code:1787,key:"puerto_rico"},{name:"Puerto Rico",shortname:"PR",code:1939,key:"puerto_rico"}]},{label:"Q",lists:[{name:"Qatar",shortname:"QA",code:974,key:"qatar"}]},{label:"R",lists:[{name:"Runion",shortname:"RE",code:262,key:"reunion"},{name:"Romania",shortname:"RO",code:40,key:"romania"},{name:"Russia",shortname:"RU",code:7,key:"russia"},{name:"Rwanda",shortname:"RW",code:250,key:"rwanda"}]},{label:"S",lists:[{name:"Samoa",shortname:"WS",code:685,key:"samoa"},{name:"San Marino",shortname:"SM",code:378,key:"san_marino"},{name:"Sao Tome and Principe",shortname:"ST",code:239,key:"sao_tome_and_principe"},{name:"Saudi Arabia",shortname:"SA",code:966,key:"saudi_arabia"},{name:"Senegal",shortname:"SN",code:221,key:"senegal"},{name:"Serbia",shortname:"RS",code:381,key:"serbia"},{name:"Seychelles",shortname:"SC",code:248,key:"seychelles"},{name:"Sierra Leone",shortname:"SL",code:232,key:"sierra_leone"},{name:"Singapore",shortname:"SG",code:65,key:"singapore"},{name:"Sint Maarten",shortname:"SX",code:1721,key:"sint_maarten"},{name:"Slovakia",shortname:"SK",code:421,key:"slovakia"},{name:"Slovenia",shortname:"SI",code:386,key:"slovenia"},{name:"Solomon Is",shortname:"SB",code:677,key:"solomon_islands"},{name:"Somali",shortname:"SO",code:252,key:"somalia"},{name:"South Africa",shortname:"ZA",code:27,key:"south_africa"},{name:"So. Georgia & So. Sandwich  Isl.",shortname:"GS",code:500,key:"south_georgia_and_south_sandwich_islands"},{name:"South Sudan",shortname:"SS",code:211,key:"south_sudan"},{name:"Spain",shortname:"ES",code:34,key:"spain"},{name:"Sri Lanka",shortname:"LK",code:94,key:"sri_lanka"},{name:"St. Barthlemy",shortname:"BL",code:590,key:"st_barthlemy"},{name:"St. Helena",shortname:"SH",code:290,key:"st_helena"},{name:"St. Kitts & Nevis",shortname:"KN",code:1869,key:"st_kitts_and_nevis"},{name:"St. Martin",shortname:"MF",code:590,key:"st_martin_france"},{name:"St. Pierre & Miquelon",shortname:"PM",code:508,key:"st_pierre_and_miquelon"},{name:"St.Lucia",shortname:"LC",code:1758,key:"saint_lucia"},{name:"St. Vincent & Grenadines",shortname:"VC",code:1784,key:"st.vincent"},{name:"Sudan",shortname:"SD",code:249,key:"sudan"},{name:"Suriname",shortname:"SR",code:597,key:"suriname"},{name:"Svalbard & Jan Mayen",shortname:"SJ",code:4779,key:"svalbard_and_jan_mayen"},{name:"Sweden",shortname:"SE",code:46,key:"sweden"},{name:"Switzerland",shortname:"CH",code:41,key:"switzerland"}]},{label:"T",lists:[{name:"Taiwan",shortname:"TW",code:886,key:"taiwan"},{name:"Tajikstan",shortname:"TJ",code:992,key:"tajikistan"},{name:"Tanzania",shortname:"TZ",code:255,key:"tanzania"},{name:"Thailand",shortname:"TH",code:66,key:"thailand"},{name:"Timor-Leste",shortname:"TL",code:670,key:"east_timor"},{name:"Togo",shortname:"TG",code:228,key:"togo"},{name:"Tokelau",shortname:"TK",code:690,key:"tokelau"},{name:"Tonga",shortname:"TO",code:676,key:"tonga"},{name:"Trinidad & Tobago",shortname:"TT",code:1868,key:"trinidad_and_tobago"},{name:"Tunisia",shortname:"TN",code:216,key:"tunisia"},{name:"Turkey",shortname:"TR",code:90,key:"turkey"},{name:"Turkmenistan",shortname:"TM",code:993,key:"turkmenistan"},{name:"Turks & Caicos Islands",shortname:"TC",code:1649,key:"turks_and_caicos_islands"},{name:"Tuvalu",shortname:"TV",code:688,key:"tuvalu"}]},{label:"U",lists:[{name:"U.S. Virgin Islands",shortname:"VI",code:1340,key:"u_s_virgin_islands"},{name:"Uganda",shortname:"UG",code:256,key:"uganda"},{name:"Ukraine",shortname:"UA",code:380,key:"ukraine"},{name:"United Arab Emirates",shortname:"AE",code:971,key:"united_arab_emirates"},{name:"United Kingdom",shortname:"UK",code:44,key:"united_kingdom"},{name:"United States",shortname:"US",code:1,key:"united_states"},{name:"Uruguay",shortname:"UY",code:598,key:"uruguay"},{name:"Uzbekistan",shortname:"UZ",code:998,key:"uzbekistan"}]},{label:"V",lists:[{name:"Vanuatu",shortname:"VU",code:678,key:"vanuatu"},{name:"Vatican City",shortname:"VA",code:379,key:"vatican_city"},{name:"Vatican City",shortname:"VA",code:3906698,key:"vatican_city"},{name:"Venezuela",shortname:"VE",code:58,key:"venezuela"},{name:"Vietnam",shortname:"VN",code:84,key:"vietnam"}]},{label:"W",lists:[{name:"Wallis & Futuna",shortname:"WF",code:681,key:"wallis_and_futuna"},{name:"Western Sahara",shortname:"EH",code:212,key:"region_western_sahara"}]},{label:"Y",lists:[{name:"Yemen",shortname:"YE",code:967,key:"yemen"}]},{label:"Z",lists:[{name:"Zambia",shortname:"ZM",code:260,key:"zambia"},{name:"Zimbabwe",shortname:"ZW",code:263,key:"zimbabwe"}]}],zs=e=>/^\w+([\.\-\+]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);let $s=class extends le.D{constructor(){super(...arguments),this.defaultState={area:"",phone:"",phoneCode:"",searchText:"",showAreaCodeSelector:!1,mobile:"",mobileOpenId:""}}setShowAreaCodeSelector(e,t){e.showAreaCodeSelector=t}setAreaCode(e,t){const{code:i,area:o}=t;e.areaCode=i,e.area=o,this.setMobileInfo(e,{areaCode:i,phone:e.phone})}setPhoneNumber(e,t){e.phone=t,this.setMobileInfo(e,{areaCode:e.areaCode,phone:t})}setErrorMsg(e,t){e.phoneErrorMsg=t}setAreaSearchText(e,t){if(e.searchText=t,!t)return void(e.matchSearchArea=void 0);const i=RegExp(t.replace("+","\\+"),"ig");e.matchSearchArea=Ks.reduce(((e,{lists:t})=>e.concat(t)),[]).find((({name:e,code:t,shortname:o})=>e.match(i)||`${t}`.match(i)||o.match(i)))}setPhoneCode(e,t){e.phoneCode=t}toggleAreaCodeSelector(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([,{showAreaCodeSelector:e}])=>(0,Ti.of)(this.getActions().setShowAreaCodeSelector(!e)))))}selectAreaCode(e){return e.pipe((0,hi.z)((({code:e,area:t})=>(0,Ti.of)(this.getActions().setAreaCode({area:t,code:e}),this.getActions().setShowAreaCodeSelector(!1)))))}checkPhoneNumberFormat(e){return e.pipe((0,hi.z)((({phone:e})=>{const t=(e=>e&&/[^\d]+/.test(e))(e);return(0,Ti.of)(this.getActions().setPhoneNumber(e),this.getActions().setErrorMsg(t?"common_registration_phone_input_error":""))})))}setMobileInfo(e,t){const{phone:i,areaCode:o}=t;if(!i||!o)return e.mobile="",void(e.mobileOpenId="");e.mobile=`+${o} ${i}`,e.mobileOpenId=86===o?i:`+${o}${i}`}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],$s.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"setShowAreaCodeSelector",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"setAreaCode",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"setPhoneNumber",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"setErrorMsg",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"setAreaSearchText",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"setPhoneCode",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"toggleAreaCodeSelector",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"selectAreaCode",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],$s.prototype,"checkPhoneNumberFormat",null),$s=(0,p.__decorate)([(0,de.Y)("PhoneNumberModule")],$s);const qs=(e,t=!1)=>{const i=(0,Jt.St)(`sms_code_count_down${t?"_email":""}_${e}`),o=+i-Date.now();return"number"!=typeof o||o<0?{hasSent:Boolean(i),countDownSecond:0}:{hasSent:Boolean(i),countDownSecond:Math.round(o/1e3)}};let Zs=class extends le.D{constructor(){super(...arguments),this.defaultState={}}setEmail(e,t){e.email=t}setEmailErrorMsg(e,t){e.emailErrorMsg=t}setEmailInfo(e){return e.pipe((0,hi.z)((({email:e,valid:t})=>(0,Ti.of)(this.getActions().setEmail(e),this.getActions().setEmailErrorMsg(t?"":"common_registration_email_input_error")))))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],Zs.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Zs.prototype,"setEmail",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Zs.prototype,"setEmailErrorMsg",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Zs.prototype,"setEmailInfo",null),Zs=(0,p.__decorate)([(0,de.Y)("EmailModule")],Zs);let Qs=class extends le.D{constructor(e,t,i,o,n,a){super(),this.contextModule=e,this.service=t,this.ageGate=i,this.phone=o,this.email=n,this.loginReport=a,this.defaultState={sendCodeLoading:!1,code:""},this.sendReason="user_click",this.isEmail=!1}setCode(e,t){const i=(e=>Boolean(e&&(/[^\d]+/.test(e)||6!==e.length)))(t);e.codeFormatError=i?"common_login_reset_email_verify_title":"",e.code=t}setTicket(e,t){e.ticket=t}setSendCodeLoading(e,t){t&&(e.getCodeErrorMsg=""),e.sendCodeLoading=t}clearGetCodeError(e){e.getCodeErrorMsg="",e.emailRegistered=void 0}setErrorMsg(e,t){const{description:i,emailRegistered:o}=t;e.emailRegistered=o,e.getCodeErrorMsg=i}sendPhoneCodeForVerify(e){return e.pipe((0,ni.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,hi.z)((({mobile:e})=>this.service.notLoginSendCode({mobile:e}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendPhoneCodeForLogin(e){return e.pipe((0,ni.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,ii.w)((e=>{const{isSignUp:t,mobile:i}=e;return this.ageGate.validateAge((0,Ti.of)({canSkip:!t})).pipe((0,As.q)(1),(0,hi.z)((({payload:t})=>"boolean"==typeof t?(0,Ti.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendPhoneCode(e).pipe(this.sendCodeHandler({cacheKey:i,agePayload:null!=t?t:void 0})):(0,Ti.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,oi.O)(this.getActions().setSendCodeLoading(!0)),(0,xi.l)(this.getActions().setSendCodeLoading(!1)))})))}sendPhoneCodeForResetPwd(e){return e.pipe((0,ni.b)((({mobile:e,verify_ticket:t})=>{var i;return this.reportSendCode({reason:"forgot_password",cacheKey:null!==(i=null!=e?e:t)&&void 0!==i?i:""})})),(0,ni.b)((()=>this.loginReport.sendSms({send_reason:"forgot_password"}))),(0,hi.z)((({mobile:e,verify_ticket:t,not_login_ticket:i})=>{var o;return this.service.sendPhoneCodeWithType({mobile:e,type:4,method:"GET",verify_ticket:t,not_login_ticket:i}).pipe(this.sendCodeHandler({cacheKey:null!==(o=null!=e?e:t)&&void 0!==o?o:""}))})))}sendPhoneCodeForTwoStep(e){return e.pipe((0,ni.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:e.verify_ticket}))),(0,hi.z)((({verify_ticket:e,not_login_ticket:t,mobile:i})=>this.service.sendPhoneCodeWithType({verify_ticket:e,not_login_ticket:t,type:t?13:22,method:"GET",mobile:i}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendPhoneCodeForForceResetPwd(e){return e.pipe((0,ni.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket}))),(0,ue.M)(this.state$),(0,hi.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendPhoneCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendEmailCodeForForceResetPwd(e){return e.pipe((0,ni.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket,isEmail:!0}))),(0,ue.M)(this.state$),(0,hi.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendEmailCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({email:!0,cacheKey:e})))))}sendEmailCodeForLogin(e){return e.pipe((0,ni.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,ni.b)((()=>this.loginReport.sendMail({send_reason:"user_click"}))),(0,hi.z)((({email:e,not_login_ticket:t,verify_ticket:i})=>this.service.sendEmailCodeForLogin({email:null!=e?e:"",extra_params:{not_login_ticket:t,verify_ticket:i}}).pipe(this.sendCodeHandler({email:!0,cacheKey:i})))))}sendEmailCodeForVerify(e){return e.pipe((0,ni.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,hi.z)((e=>this.service.verifySendEmailCode(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${e.verify_ticket}`})))))}sendEmailCodeForSignup(e){return e.pipe((0,ni.b)((e=>this.reportSendCode({reason:"user_click",cacheKey:`${e.email}`,isEmail:!0}))),(0,hi.z)((e=>this.ageGate.validateAge((0,Ti.of)({canSkip:!1})).pipe((0,As.q)(1),(0,hi.z)((({payload:t})=>"boolean"==typeof t?(0,Ti.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendEmailCodeForSignup(e).pipe((0,ni.b)((e=>{1023===e.error_code&&(e.emailRegistered=!0)})),this.sendCodeHandler({email:!0,agePayload:null!=t?t:void 0,cacheKey:`${e.email}`})):(0,Ti.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,oi.O)(this.getActions().setSendCodeLoading(!0)),(0,xi.l)(this.getActions().setSendCodeLoading(!1))))))}sendEmailCodeForReset(e){return e.pipe((0,ni.b)((e=>{var t;return this.reportSendCode({reason:"forgot_password",cacheKey:`${null!==(t=e.email)&&void 0!==t?t:e.verify_ticket}`,isEmail:!0})})),(0,hi.z)((e=>{var t;return this.service.sendEmailCodeForResetPwd(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${null!==(t=e.email)&&void 0!==t?t:`${e.verify_ticket}`}`}))})))}reportSendCode(e){const{cacheKey:t,reason:i,isEmail:o}=e;this.sendReason=i,this.isEmail=Boolean(o);const{hasSent:n}=qs(t);o?this.loginReport.sendMail({is_retry:n,send_reason:i}):this.loginReport.sendSms({is_retry:n,send_reason:i})}reportSendCodeResult(e){const{error_code:t,"x-tt-logid":i,message:o,description:n}=e,a={status:t?1:0,error_code:t,error_desc:o||n,type:this.sendReason,logid:i};this.isEmail?this.loginReport.sendMailResult(a):this.loginReport.sendSmsResult(a)}sendCodeHandler({cacheKey:e,agePayload:t,email:i}){return o=>o.pipe((0,ni.b)((e=>this.reportSendCodeResult(e))),(0,hi.z)((o=>{var n;const{retry_time:a=60,emailRegistered:r,ticket:s,error_code:l}=o;return l||((e,t,i)=>{(0,Jt.D9)(`sms_code_count_down${i?"_email":""}_${e}`,`${Date.now()+1e3*t}`)})(e,a,i),1356===l?(0,Ti.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd")):s?(0,Ti.of)(this.getActions().setTicket(s)):Is[l]?(0,Ti.of)(this.phone.getActions().setErrorMsg(Is[l]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):vs[l]?(0,Ti.of)(this.email.getActions().setEmailErrorMsg(vs[l]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):(0,Ti.of)(this.getActions().setErrorMsg({description:r||!o.error_code?"":null!==(n=o.description)&&void 0!==n?n:"Sorry, something went wrong, please try again later",emailRegistered:r}),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop())})),(0,oi.O)(this.getActions().setSendCodeLoading(!0)),(0,xi.l)(this.getActions().setSendCodeLoading(!1)))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],Qs.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"setCode",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"setTicket",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"setSendCodeLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"clearGetCodeError",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"setErrorMsg",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendPhoneCodeForLogin",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendPhoneCodeForResetPwd",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendPhoneCodeForTwoStep",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendPhoneCodeForForceResetPwd",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendEmailCodeForForceResetPwd",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendEmailCodeForLogin",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendEmailCodeForVerify",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendEmailCodeForSignup",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Qs.prototype,"sendEmailCodeForReset",null),Qs=(0,p.__decorate)([(0,de.Y)("SendCode"),(0,p.__metadata)("design:paramtypes",[Ys,Rs.Q,ms,$s,Zs,ks])],Qs);var Xs=i(15608),Js=i(87837);let el=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleSyncKrPolicyApprove=e=>{this.service.emitEvent("SyncKrPolicyApprove",this.defaultMetrics,e)}}};el=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],el);let tl=class extends le.D{constructor(e,t,i,o){super(),this.pnsSlardar=e,this.pnsReport=t,this.service=i,this.appContext=o,this.defaultState={krPolicySelection:[],termsDomContent:"",privacyDomContent:""}}setKrPolicySelection(e,t){e.krPolicySelection=t}setTermsDomContent(e,t){e.termsDomContent=t}setPrivacyDomContent(e,t){e.privacyDomContent=t}requestPolicyContent(e){return e.pipe((0,ue.M)(this.appContext.state$),(0,hi.z)((([{articleKeys:e},{appContext:t}])=>(0,Xs.D)(e.map((e=>{var i;return this.service.getPolicyContent({lang:null!==(i=null==t?void 0:t.$language)&&void 0!==i?i:"en",project_key:"legal",article_key:e})})))))).pipe((0,hi.z)((e=>(0,Ti.of)(this.getActions().setTermsDomContent(e[0].body.article_content),this.getActions().setPrivacyDomContent(e[1].body.article_content)))))}syncKrPolicyApprove(){var e;const{krPolicySelection:t}=this.state,{$region:i}=null!==(e=this.appContext.state.appContext)&&void 0!==e?e:{};if("KR"!==i||!t.length)return(0,Ti.of)(null);const o=-1!==t.indexOf("push-policy");return this.pnsReport.handlePolicyConfirmOnFYP({trending:o?"on":"off"}),this.service.setUniversalPopOperation({business:"kr_consent_market_message",policy_version:"v20200629",style:"bottom",operation:-1!==t.indexOf("push-policy")?"2":"1",aid:1988}).pipe((0,pe.U)((({status_code:e})=>{if(this.pnsSlardar.handleSyncKrPolicyApprove({error_code:`${e}`}),0!==e)throw new Error(`sync kr policy error, error_code: ${e}`);return(0,Ti.of)(null)})),(0,Si.K)((e=>(console.error(e),(0,Ti.of)({status_code:-1})))),(0,Js.X)(1))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],tl.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Array]),(0,p.__metadata)("design:returntype",void 0)],tl.prototype,"setKrPolicySelection",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],tl.prototype,"setTermsDomContent",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],tl.prototype,"setPrivacyDomContent",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],tl.prototype,"requestPolicyContent",null),tl=(0,p.__decorate)([(0,de.Y)("PolicyModule"),(0,p.__metadata)("design:paramtypes",[el,ne,he,$.G])],tl);let il=class extends le.D{constructor(e){super(),this.fetch=e,this.defaultState={isRegisterWithPrivateOn:!1}}setIsRegisterWithPrivateOn(e,t){e.isRegisterWithPrivateOn=t}getIsRegisterPrivateAccount(){return this.fetch.get("/api/user/detail/self/",{query:{tt_csrf_token:this.fetch.csrfToken}}).pipe((0,pe.U)((({statusCode:e,userInfo:t})=>{var i,o;if(0!==e&&10222!==e)throw new Error(`getIsRegisterPrivateAccount error, error_code ${e}`);return null!==(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.showPrivateBanner)&&void 0!==o&&o})),(0,Si.K)((e=>(console.error(e),(0,Ti.of)(!1)))),(0,Js.X)(1))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],il.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],il.prototype,"setIsRegisterWithPrivateOn",null),il=(0,p.__decorate)([(0,de.Y)("RegisterPrivateAccount"),(0,p.__metadata)("design:paramtypes",[ge.r])],il);var ol=i(38645),nl=i(745),al=i.n(nl);let rl=class{constructor(e){this.fetch=e}validateUsername(e){return this.fetch.get("https://www.tiktok.com/api/uniqueid/check/",{query:{unique_id:e,fromWeb:1,aid:1180}}).pipe(this.errorHandler)}validateFTCUsername(e){return this.fetch.get("https://www.tiktok.com/api/register/check/login/name/",{query:{login_name:e}}).pipe(this.errorHandler)}syncEmailConsentInfo(){return this.fetch.post("https://www.tiktok.com/api/privacy/agreement/record/agree/v1",{body:al().stringify({record_name:"email_consent",tt_csrf_token:this.fetch.csrfToken||"IQodDvCCo34LIXpe5ArEKd-S"})})}errorHandler(e){return e.pipe((0,Si.K)((e=>(0,Ti.of)(Object.assign({error_code:e.error_code||-1},e)))))}};var sl;rl=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],rl),function(e){e.Third="Third",e.Phone="Phone"}(sl||(sl={}));let ll=class extends le.D{constructor(e,t,i,o,n,a,r,s){super(),this.service=e,this.policy=t,this.registerPrivateAccount=i,this.ageGate=o,this.accountService=n,this.loginReport=a,this.t=r,this.regionService=s,this.defaultState={username:"",signupLoading:!1}}setSuccess(e){e.success=!0}setEmailConsent(e,t){e.emailConsent=t}setErrorMsg(e,t){e.errorMsg=t}setLoading(e,t){e.signupLoading=t}setCheckNameLoading(e,t){e.checkNameLoading=t}setNextPage(e,t){e.nextPage=t}setUsername(e,t){e.username=t}setUsernameInfo(e,t){e.usernameInfo=t}setFromNotRegisterLogin(e,t){e.fromNotRegisterLogin=t}cacheSmsCodeKey(e,t){e.phoneNotRegistered=t,e.fromNotRegisterLogin="Phone"}cacheThirdNotRegistered(e,t){e.thirdPlatformNotRegistered=t,e.fromNotRegisterLogin="Third"}clearSignUpResult(e){e.errorMsg="",e.nextPage=""}registerThirdPlatform(e){return e.pipe((0,ni.b)((()=>{this.loginReport.thirdRegister()})),(0,ue.M)(this.ageGate.state$),(0,hi.z)((([{platform:e,profileKey:t,rrc:i,chooseAgeGate:o},{ageGateAction:n,birthday:a}])=>{const r=0===n||1===n&&-1!==["facebook","google"].indexOf(e);return r||o?this.ageGate.validateAge((0,Ti.of)({canSkip:r})).pipe((0,As.q)(1),(0,hi.z)((({payload:o})=>"boolean"==typeof o?(0,Ti.of)(this.ageGate.getActions().setShowAgeConfirm(o)):(null==o?void 0:o.ageEligible)||null===o?this.accountService.thirdLogin({platform_app_id:ol.Oy[e],platform:e,profile_key:t,rrc:i,login_only:!1,birthday:a}).pipe((0,hi.z)((t=>(t.fromThird=!0,this.loginReport.setPlatform(e),t.platform=e,(0,Ti.of)(this.getActions().handleSignupResult(t),o?this.ageGate.getActions().setAgeCheckResult(o):this.noop())))),(0,oi.O)(this.getActions().setLoading(!0)),(0,xi.l)(this.getActions().setLoading(!1))):(0,Ti.of)(this.ageGate.getActions().setAgeCheckResult(o))))):(0,Ti.of)(this.getActions().cacheThirdNotRegistered({platform:e,profileKey:t}),this.getActions().setNextPage(V.gY.signupAgeGate))})))}registerPhone(e){return e.pipe((0,ni.b)((()=>{this.loginReport.setPlatform("sms_verification"),this.loginReport.loginSubmit({signUp:!0})})),(0,ue.M)(this.state$,this.ageGate.state$),(0,hi.z)((([{chooseAgeGate:e},{phoneNotRegistered:t},{ageGateAction:i,birthday:o}])=>i&&!e?(0,Ti.of)(this.getActions().setNextPage(V.gY.signupAgeGate)):this.ageGate.validateAge((0,Ti.of)({canSkip:!1})).pipe((0,As.q)(1),(0,hi.z)((({payload:e})=>{var i,n;return"boolean"==typeof e?(0,Ti.of)(this.ageGate.getActions().setShowAgeConfirm(e)):(null==e?void 0:e.ageEligible)||null===e?this.accountService.smsLoginContinue({mobile:null!==(i=null==t?void 0:t.mobile)&&void 0!==i?i:"",sms_code_key:null!==(n=null==t?void 0:t.smsCodeKey)&&void 0!==n?n:"",extra_params:{birthday:o}}).pipe((0,oi.O)(this.getActions().setLoading(!0)),(0,pe.U)((e=>(e.platform="sms_verification",this.getActions().handleSignupResult(e))))):(0,Ti.of)(this.ageGate.getActions().setAgeCheckResult(e))}))))))}syncUserInfos(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([{fromThird:e,fromEmail:t,fromFTC:i},{emailConsent:o}])=>(0,Xs.D)([this.policy.syncKrPolicyApprove(),this.syncEmailConsent(o),this.registerPrivateAccount.getIsRegisterPrivateAccount()]).pipe((0,ii.w)((o=>{const[,,n]=o,a=e||t?V.gY.signupCreateUsername:V.gY.signupCreatePassword;return(0,Ti.of)(this.getActions().setLoading(!1),this.registerPrivateAccount.getActions().setIsRegisterWithPrivateOn(n),i?this.getActions().setSuccess():this.getActions().setNextPage(a))}))))))}validateUsername(e){return e.pipe((0,hi.z)((({name:e,fromThird:t})=>e?this.service.validateUsername(e).pipe((0,hi.z)((i=>{const{status_code:o,recommended_unique_ids:n,is_valid:a,status_msg:r}=i,s=!a&&t?n[0]:e;return(0,Ti.of)(t?this.getActions().setUsername(s):this.noop(),this.getActions().setUsernameInfo({value:s,isValid:a,suggestList:n,errorMsg:t?"":Ps(o,Boolean(n),r)}))})),(0,oi.O)(this.getActions().setCheckNameLoading(!0)),(0,xi.l)(this.getActions().setCheckNameLoading(!1))):(0,Ti.of)(this.getActions().setUsernameInfo(void 0)))))}validateFTCUsername(e){return e.pipe((0,hi.z)((({name:e})=>e?this.service.validateFTCUsername(e).pipe((0,pe.U)((t=>{const{valid:i}=t;return this.getActions().setUsernameInfo({value:e,isValid:i,errorMsg:i?"":"common_registration_username_error_ sensitivity"})})),(0,oi.O)(this.getActions().setCheckNameLoading(!0)),(0,xi.l)(this.getActions().setCheckNameLoading(!1))):(0,Ti.of)(this.getActions().setUsernameInfo(void 0)))))}usernameRegister(e){return e.pipe((0,ni.b)((()=>{this.loginReport.setPlatform("handle"),this.loginReport.loginSubmit({signUp:!0})})),(0,ue.M)(this.state$,this.ageGate.state$),(0,hi.z)((([{password:e},{username:t},{birthday:i}])=>this.accountService.usernameRegister({password:e,username:t,extra_params:{birthday:i}}).pipe((0,pe.U)((e=>(e.fromFTC=!0,this.getActions().handleSignupResult(e)))),(0,oi.O)(this.getActions().setLoading(!0)),(0,xi.l)(this.getActions().setLoading(!1))))))}emailRegister(e){return e.pipe((0,ue.M)(this.ageGate.state$,this.state$),(0,ni.b)((([,,{emailConsent:e}])=>{this.loginReport.setPlatform("email"),this.loginReport.loginSubmit({signUp:!0}),this.loginReport.rigisterClickNext(void 0===e?{}:{status:e?"checked":"unchecked",text_type:"long_version"})})),(0,hi.z)((([{password:e,code:t,email:i},{birthday:o}])=>this.accountService.emailRegister({password:e,code:t,email:i,ifLogin:!0,extra_params:{birthday:o,email_logic_type:e?2:1}}).pipe((0,pe.U)((e=>(e.fromEmail=!0,this.getActions().handleSignupResult(e)))),(0,oi.O)(this.getActions().setLoading(!0)),(0,xi.l)(this.getActions().setLoading(!1))))))}handleSignupResult(e){return e.pipe((0,hi.z)((e=>{const{error_code:t,errorMsg:i,description:o,error_msg:n,fromThird:a,fromFTC:r,fromEmail:s,name:l,screen_name:c,sec_user_id:d}=e;if(!t)return this.loginReport.loginSuccess({is_register:1}),this.regionService.authBroadcast({screen_name:c,sec_uid:d}).pipe((0,hi.z)((()=>(0,Ti.of)(this.getActions().syncUserInfos({fromThird:a,fromEmail:s,fromFTC:r}),a?this.getActions().validateUsername({name:l,fromThird:a}):this.noop()))));if(this.loginReport.loginFailure({error_code:t,signUp:!0}),Ds(t))return(0,Ti.of)(this.getActions().setNextPage({pathname:V.gY.loginDownloadApp}));const _=i||n||o||"Sorry, something went wrong, please try again later";return a?(Ht.h.open({content:this.t(_),duration:3,widthType:"half"}),(0,Ti.of)(this.getActions().setNextPage(""))):(0,Ti.of)(this.getActions().setErrorMsg(_))})))}syncEmailConsent(e){return e?this.service.syncEmailConsentInfo().pipe((0,pe.U)((()=>(0,Ti.of)(null))),(0,Si.K)((e=>(console.error(e),(0,Ti.of)({status_code:-1}))))):(0,Ti.of)(null)}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],ll.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setSuccess",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setEmailConsent",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setErrorMsg",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setCheckNameLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setNextPage",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setUsername",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setUsernameInfo",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"setFromNotRegisterLogin",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"cacheSmsCodeKey",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"cacheThirdNotRegistered",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"clearSignUpResult",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"registerThirdPlatform",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"registerPhone",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"syncUserInfos",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"validateUsername",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"validateFTCUsername",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"usernameRegister",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"emailRegister",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],ll.prototype,"handleSignupResult",null),ll=(0,p.__decorate)([(0,de.Y)("SignupModule"),(0,p.__param)(6,(0,Zi.t)(Qi.s)),(0,p.__metadata)("design:paramtypes",[rl,tl,il,ms,Rs.Q,ks,Function,Ls.D])],ll);let cl=class extends le.D{constructor(e,t,i,o,n,a,r,s,l){super(),this.contextModule=e,this.signupModule=t,this.service=i,this.regionService=o,this.ageGate=n,this.loginReport=a,this.sendCode=r,this.phone=s,this.t=l,this.defaultState={errorMsg:"",showReactiveModal:!1,loginLoading:!1}}setLoginSuccess(e,t){e.success=null!=t?t:1}setErrorMsg(e,t){e.errorMsg=t}setErrorCode(e,t){e.errorCode=t}setTwoStepVerifyRes(e,t){e.twoStepResponse=t}setNextPage(e,t){e.nextPage=t}setShowInstagramCantLoginModal(e,t){e.showInstagramCantLoginModal=t}setNeedForceResetPassword(e,t){const i=t.otp_type.match("email")?"email":"phone";e.nextPage="email"===i?V.gY.loginForgetEmailPassword:V.gY.loginForgetPhonePassword,e.forceResetResponse=Object.assign(Object.assign({},t),{type:i})}clearForceResetRes(e){e.forceResetResponse=void 0}setShowReactiveModal(e,t){e.showReactiveModal=t.show,e.inCancellationResponse=t.res}setLoginLoading(e,t){e.loginLoading=t}setPhoneNotRegistered(e){e.phoneNotRegistered=!0}clearLoginResult(e){e.errorMsg="",e.phoneNotRegistered=!1,e.twoStepResponse=void 0,e.nextPage=""}cancelDeleteAccount(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>{var i;const o=null===(i=t.inCancellationResponse)||void 0===i?void 0:i.token;return this.service.cancelDeleteAccount({token:o,type:0}).pipe((0,hi.z)((e=>(e.successType=2,(0,Ti.of)(this.getActions().setShowReactiveModal({show:!1}),this.getActions().handleLoginResult(e))))))})))}handleForceResetPwdByEmail(e){return e.pipe((0,hi.z)((e=>this.service.validateEmailCodeForForceReset(e).pipe((0,ii.w)((t=>{const{error_code:i,ticket:o}=t;return i?(0,Ti.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,pe.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1)))})),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}handleForceResetPwdByPhone(e){return e.pipe((0,hi.z)((e=>this.service.validatePhoneCodeForForceReset(e).pipe((0,hi.z)((t=>{const{error_code:i,ticket:o}=t;return i?(0,Ti.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,pe.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1)))})),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}handlePasswordLogin(e){return e.pipe((0,ue.M)(this.contextModule.state$),(0,hi.z)((([e,{isSecurityVerification:t}])=>(t?this.service.verifyPwdWithoutLogin(e):this.service.passwordLogin(e)).pipe((0,pe.U)((t=>{var i;const{verify_ticket:o}=null!==(i=e.extra_params)&&void 0!==i?i:{};return o&&this.loginReport.twoStepResult({error_code:t.error_code,result:t.error_code?"fail":"success",verification_method:"password"}),t.accountQuery=e,1011===t.error_code&&(t.errorMsg="common_login_email_error"),this.getActions().handleLoginResult(t)})),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}changePwdByEmail(e){return e.pipe((0,hi.z)((({password:e,email:t,emailCode:i,not_login_ticket:o,verify_ticket:n})=>this.service.resetPwdLoginByEmail({email:t,code:i,password:e,extra_params:{not_login_ticket:o,verify_ticket:n}}).pipe((0,pe.U)((t=>(n&&this.loginReport.twoStepResult({verification_method:"email",error_code:t.error_code,result:t.error_code?"fail":"success"}),t.error_code&&(t.password=e,1011===t.error_code&&(t.errorMsg="common_login_reset_email_input_error")),this.getActions().handleLoginResult(t)))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}handleSmsLogin(e){return e.pipe((0,hi.z)((({mobile:e,phoneCode:t,login_only:i,birthday:o})=>this.ageGate.validateAge((0,Ti.of)({canSkip:i})).pipe((0,As.q)(1),(0,hi.z)((({payload:n})=>"boolean"==typeof n?(0,Ti.of)(this.ageGate.getActions().setShowAgeConfirm(n)):(null==n?void 0:n.ageEligible)||null===n?this.service.smsLogin({mobile:e,code:t,login_only:i,birthday:o}).pipe((0,hi.z)((e=>(e.error_code&&(e.errorMsg=ys[e.error_code]),(0,Ti.of)(this.getActions().handleLoginResult(e),n?this.ageGate.getActions().setAgeCheckResult(n):this.noop())))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))):(0,Ti.of)(this.ageGate.getActions().setAgeCheckResult(n))))))))}handleSmsVerify(e){return e.pipe((0,hi.z)((({mobile:e,phoneCode:t})=>this.service.smsVerify({mobile:e,code:t}).pipe((0,hi.z)((e=>(e.error_code&&(e.errorMsg=ys[e.error_code]),(0,Ti.of)(this.getActions().handleLoginResult(e))))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}changePwdByMobile(e){return e.pipe((0,hi.z)((({password:e,mobile:t,phoneCode:i})=>this.service.changePwdByMobile({mobile:t,code:i,password:e}).pipe((0,pe.U)((t=>(t.error_code&&(t.password=e,t.errorMsg=ys[t.error_code]),this.getActions().handleLoginResult(t)))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}setAccount(e){return e.pipe((0,hi.z)((e=>this.service.setAccount(e).pipe((0,pe.U)((e=>{const{error_code:t,description:i}=e;return t?(Ht.h.open({content:this.t(i),duration:3,widthType:"half"}),this.noop()):this.getActions().setLoginSuccess()})),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}handleLoginResult(e){return e.pipe((0,ue.M)(this.contextModule.state$,this.phone.state$),(0,hi.z)((([e,{disableSignup:t,isSecurityVerification:i},{mobile:o}])=>{const{error_code:n,errorMsg:a,error_msg:r,description:s,new_user:l,screen_name:c,sec_user_id:d,successType:_,ticket:u}=e;if(bs.g.hide(),l)return this.loginReport.loginSuccess({is_register:1}),(0,Ti.of)(this.signupModule.getActions().syncUserInfos({}));if(!n)return this.loginReport.loginSuccess({is_register:0}),i&&this.setTicketIntoCookie(u),this.regionService.authBroadcast({screen_name:c,sec_uid:d}).pipe((0,pe.U)((()=>this.getActions().setLoginSuccess(_))));if(this.loginReport.loginFailure({error_code:n}),1381===n)return(0,Ti.of)(this.getActions().setNeedForceResetPassword(e));if(2046===n)return(0,Ti.of)(this.getActions().setTwoStepVerifyRes(e));if(1075===n)return(0,Ti.of)(this.getActions().setShowReactiveModal({show:!0,res:e}));if(1053===n)return(0,Ti.of)(this.contextModule.getActions().setShowAlertMessageType("twoStepVerifyBlock"));if(1356===n)return(0,Ti.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd"));if(1011===n&&t||1045===n&&i)return(0,Ti.of)(this.contextModule.getActions().setShowAlertMessageType("inexistent"));if(1011===n){if(e.sms_code_key)return(0,Ti.of)(this.getActions().setPhoneNotRegistered(),this.signupModule.getActions().cacheSmsCodeKey({smsCodeKey:e.sms_code_key,mobile:o}));if(e.profile_key)return(0,Ti.of)(this.signupModule.getActions().registerThirdPlatform({profileKey:e.profile_key,platform:e.platform}))}if(Ds(n))return(0,Ti.of)(this.getActions().setNextPage({pathname:V.gY.loginDownloadApp}),this.getActions().setErrorCode(n));if(Is[n])return(0,Ti.of)(this.phone.getActions().setErrorMsg(Is[n]));const p=ys[n]||a||r||s||"Sorry, something went wrong, please try again later";return Cs.includes(n)?(0,Ti.of)(this.sendCode.getActions().setErrorMsg({description:p})):(0,Ti.of)(this.getActions().setErrorMsg(p),this.getActions().setErrorCode(n))})))}setTicketIntoCookie(e){const t=new Date;t.setTime((new Date).getTime()+12e5),Os().set("security_verification_ticket",e,{domain:"tiktok.com",secure:!0,expires:t})}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],cl.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setLoginSuccess",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setErrorMsg",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setErrorCode",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setTwoStepVerifyRes",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setNextPage",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setShowInstagramCantLoginModal",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setNeedForceResetPassword",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"clearForceResetRes",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setShowReactiveModal",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setLoginLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setPhoneNotRegistered",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"clearLoginResult",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"cancelDeleteAccount",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"handleForceResetPwdByEmail",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"handleForceResetPwdByPhone",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"handlePasswordLogin",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"changePwdByEmail",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"handleSmsLogin",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"handleSmsVerify",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"changePwdByMobile",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"setAccount",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],cl.prototype,"handleLoginResult",null),cl=(0,p.__decorate)([(0,de.Y)("LoginResultDealModule"),(0,p.__param)(8,(0,Zi.t)(Qi.s)),(0,p.__metadata)("design:paramtypes",[Ys,ll,Rs.Q,Ls.D,ms,ks,Qs,$s,Function])],cl);const dl=(0,gs.Z)("div",{target:"esqadv70"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",width:"400px",padding:"0 16px 32px"})),"label:DivContainer;"),_l=(0,gs.Z)("h5",{target:"esqadv71"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"24px",lineHeight:"32px",textAlign:"center",padding:"0 8px"}]),"label:H5Title;"),ul=(0,gs.Z)("p",{target:"esqadv72"})([({theme:e})=>(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"15px",margin:"24px 8px",textAlign:"center",fontSize:"12px"}],"label:PDesc;"),pl=(0,gs.Z)("div",{target:"esqadv73"})({display:"flex"},"label:DivButtonWrapper;"),ml=()=>{const e=(0,No.Q)("WebApp_Login"),[{showReactiveModal:t},{setShowReactiveModal:i,cancelDeleteAccount:n}]=(0,K.b7)(cl),a=(0,y.useCallback)((()=>{i({show:!1})}),[i]),r=(0,y.useCallback)((()=>{n()}),[n]);return(0,o.jsx)(yt.u_,Object.assign({visible:t,maskCloseable:!1,onClose:a},{children:(0,o.jsxs)(dl,{children:[(0,o.jsx)(_l,{children:e("reactivate_h1")},void 0),(0,o.jsx)(ul,{children:e("reactivate_h2")},void 0),(0,o.jsx)(ul,{children:e("reactivate_h3")},void 0),(0,o.jsx)(ul,{children:e("reactivate_h4")},void 0),(0,o.jsxs)(pl,{children:[(0,o.jsx)(Et.W,Object.assign({size:"large",onClick:a,style:{margin:"0 8px"}},{children:e("common_registration_phone_input_popup_button")}),void 0),(0,o.jsx)(Et.W,Object.assign({size:"large",buttonTheme:"primary",onClick:r,style:{margin:"0 8px"}},{children:e("reactivate_btn")}),void 0)]},void 0)]},void 0)}),void 0)};var El=i(85866),gl=i(24054),hl=i(92178);const Tl=(0,gs.Z)("div",{target:"e1cgu1qo0"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima"}),{border:`1px solid ${e.colors.LineSecondary2}`,fontSize:"15px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",height:"44px",minWidth:"300px",position:"relative",cursor:"pointer",marginBottom:"16px",wordBreak:"keep-all",whiteSpace:"nowrap"}]),"label:DivBoxContainer;"),Sl=(0,gs.Z)("div",{target:"e1cgu1qo1"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,start:"12px"}),{fontSize:"20px",position:"absolute",display:"flex"}]),"label:DivIconContainer;"),Ol=e=>{const{text:t,Icon:i}=e;return(0,o.jsxs)(Tl,Object.assign({onClick:e.onClick},{children:[(0,o.jsx)(Sl,{children:(0,o.jsx)(i,{},void 0)},void 0),t]}),void 0)},Al=(0,gs.Z)("a",{target:"epl6mg0"})((({theme:e,textTheme:t,underline:i=!0})=>[(0,re.GI)({theme:e,color:"primary"===t?"Primary":"TextSecondary",fontWeight:"semiBold"}),{fontSize:"12px","&:hover, &:focus":{textDecoration:i?"underline":"none",textDecorationColor:"primary"===t?e.colors.Primary:e.colors.TextSecondary}}]),"label:ALink;"),Il=({path:e,text:t,children:i,className:n,replace:a=!1,textTheme:r,underline:s})=>{const l=(0,f.k6)(),c=(0,y.useCallback)((t=>{t.preventDefault(),t.stopPropagation(),a?l.replace(e):l.push(e)}),[l,e,a]);return(0,o.jsxs)(Al,Object.assign({onClick:c,href:e,className:n,textTheme:r,underline:s},{children:[t,i]}),void 0)};var vl=i(99550),yl=i(42917),Cl=i(94894),fl=i(11153),Nl=i(90447),Rl=i(97669),Ll=i(86668),bl=i(91574),Pl=i(27137),Dl=i(39022),Ml=i.n(Dl);function xl(e,t){return(0,K.mp)(Ys,{selector:t=>{const i=t;return Ml()(i,...e())},dependencies:t})}var wl=i(91855),Ul=i(17021);const kl=(e,t)=>{const i=(o=e,`${ol.lF}:${o}`);var o;const n={timestamp:Number(new Date),timeInterval:6e5},a=Object.assign(Object.assign({},t),{expires:n});(0,Jt.D$)(i,JSON.stringify(a)),(0,Jt.D$)(e,JSON.stringify(a))},Fl=e=>{2===Number(null!=e?e:localStorage.getItem("oauthType"))&&(location.href=`${location.href}&no_refactor=1`)},Bl="hello_page_login_way",Gl=()=>{(0,Jt.D$)(Bl,"1")};var jl=i(14896),Hl=i(14716);let Wl=class{constructor(e,t){this.loginReport=e,this.fetch=t}get apple$(){return window.AppleID?(0,Ti.of)(null):(0,Ti.of)(null).pipe((0,hi.z)((()=>(0,Xs.D)([(0,Hl.D)(i.e(6757).then(i.t.bind(i,57956,23))),this.getAppleConfig()]).pipe((0,pe.U)((([e,{data:t}])=>{const{client_id:i,state:o}=t;e.auth.init({clientId:i,state:o,redirectURI:"https://www.tiktok.com/oauth",scope:"name email",response_mode:"fragment",usePopup:!0}),window.AppleID=e}))))),(0,Si.K)((()=>(0,Ti.of)({error_code:-1}))))}login(){return this.apple$.pipe((0,ii.w)((()=>(0,Hl.D)(window.AppleID.auth.signIn()).pipe((0,ii.w)((e=>this.afterAppleAuthentication(e))),(0,Si.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:"popup_closed_by_user"===e.error?2:1,error_desc:e.error})),(0,Ti.of)(Object.assign(Object.assign({error_code:-1},e),{error_msg:e.error,platform:"apple"})))))))))}afterAppleAuthentication(e){return(0,Ti.of)(e).pipe((0,pe.U)((e=>{const{authorization:t={}}=e,{id_token:i}=t;return{openid:(0,jl.Z)(i).sub,platform_app_id:ol.Oy.apple,platform:"apple",id_token:i}})))}getAppleConfig(){return this.fetch.post("https://www.tiktok.com/passport/web/auth/config",{query:{aid:1459,account_sdk_source:"web"},body:al().stringify({platform_app_id:ol.Oy.apple,action:"login_only",next:"https://www.tiktok.com/foryou?lang=en"})})}};Wl=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ks,ge.r])],Wl);var Vl=i(83157);let Yl=class{constructor(e){this.loginReport=e,this.loadSdk=e=>{i.e(1792).then(i.t.bind(i,57525,23)).then((({default:t})=>{t.init({facebook:"1862952583919182",google:"1096011445005-sdea0nf5jvj14eia93icpttv27cidkvk.apps.googleusercontent.com",twitter:"rLsbFQ5NHI2IsWZiRc2McRCFc",instagram:"c8785d0dc7df48f298532fddf33d7cb5",vk:"6961453"}),this.helloJS=t,null==e||e()})).catch((t=>{console.error(t),null==e||e()}))}}get helloJS$(){return this.helloJS?(0,Ti.of)(this.helloJS):new _e.y((e=>{this.loadSdk((()=>{e.next(),e.complete()}))}))}login(e){const{platform:t,display:i}=e;return"page"===i&&Gl(),this.helloJS$.pipe((0,hi.z)((()=>(0,Hl.D)(this.helloJS(t).login(e)).pipe((0,ii.w)((e=>this.afterHelloAuthentication(e)))))),(0,Si.K)((o=>{var n,a,r,s;return this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},o.error),{status:"cancelled"===(null===(n=o.error)||void 0===n?void 0:n.code)?2:1,error_desc:null===(a=o.error)||void 0===a?void 0:a.message})),"blocked"===(null===(r=o.error)||void 0===r?void 0:r.code)&&"popup"===i&&(e.display="page",this.helloJS(t).login(e),Gl()),(0,Ti.of)(Object.assign({platform:t,error_code:-1,error_msg:null===(s=o.error)||void 0===s?void 0:s.message},o.error))})))}ListenLogin(){return(0,Jt.e8)(Bl),this.helloJS$.pipe((0,ii.w)((()=>(0,Vl.R)(this.helloJS,"auth.login").pipe((0,As.q)(1)))),(0,ii.w)((e=>this.afterHelloAuthentication(e[0]))))}afterHelloAuthentication(e){return(0,Ti.of)(e).pipe((0,ii.w)((e=>{const{network:t,authResponse:i}=e,o="vk"===t?{v:"5.81"}:void 0;return(0,Hl.D)(this.helloJS(t).api("me",o)).pipe((0,pe.U)((e=>{const{access_token:o="",oauth_token_secret:n=""}=i;return{openid:e.id,access_token:o,access_token_secret:n,platform:t,platform_app_id:ol.Oy[t]}})))})))}};Yl=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ks])],Yl);let Kl=class{constructor(e){this.loginReport=e}get Kakao$(){return window.Kakao?(0,Ti.of)(null):new _e.y((e=>{i.e(2628).then(i.t.bind(i,37373,23)).then((({default:t})=>{window.Kakao=t,window.Kakao.init(ol.Sx),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}login(){return this.Kakao$.pipe((0,hi.z)((()=>new _e.y((e=>{const t=t=>{console.error(t),e.next({error_code:-1,error_msg:t.message,platform:"kakaotalk"}),e.complete()};window.Kakao.Auth.login({success(i){window.Kakao.API.request({url:"/v2/user/me",success:t=>{e.next(Object.assign({openid:t.id,platform_app_id:ol.Oy.kakaotalk,platform:"kakaotalk"},i)),e.complete()},fail:t})},fail:t})})))),(0,Si.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:1,error_desc:e.error})),(0,Ti.of)({error_code:-1,platform:"kakaotalk",error_msg:e.message})))))}};Kl=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ks])],Kl);let zl=class extends le.D{constructor(e,t,i,o,n,a,r,s){super(),this.service=e,this.loginResultDealModule=t,this.contextModule=i,this.helloJS=o,this.kakaoSdk=n,this.appleSdk=a,this.slardar=r,this.loginReport=s,this.defaultState={platform:""}}handleHelloJSAuth(e){return e.pipe((0,hi.z)((e=>this.helloJS.login(e).pipe((0,ni.b)((e=>this.reportThirdGetToken(e))),(0,pe.U)((e=>e.error_code?"cancelled"===e.code?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e)))))))}handleHelloLoginEvent(e){return e.pipe((0,hi.z)((()=>this.helloJS.ListenLogin().pipe((0,pe.U)((e=>e.error_code?this.noop():this.getActions().thirdLogin(e)))))))}handleKakaoLogin(e){return e.pipe((0,hi.z)((()=>this.kakaoSdk.login().pipe((0,pe.U)((e=>(this.reportThirdGetToken(e),this.getActions().thirdLogin(e))))))))}handleAppleLogin(e){return e.pipe((0,hi.z)((()=>this.appleSdk.login()))).pipe((0,ni.b)((e=>this.reportThirdGetToken(e))),(0,pe.U)((e=>e.error_code?"popup_closed_by_user"===e.error?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e))))}handlePopupAuthorize(e){return e.pipe((0,ue.M)(this.contextModule.state$),(0,hi.z)((([{url:e,platform:t},{isSmartPlayer:i}])=>this.jumpAuthorizationPage({url:e,isSmartPlayer:i}).pipe((0,pe.U)((({closeByUser:e})=>{if(e)return this.loginReport.thirdPartyLoginResult({error_code:-1,status:2,error_desc:"user cancel login"}),this.noop();const i=(e=>{const t=(0,Jt.le)(e);try{return JSON.parse(t)}catch(e){return{}}})(t);if("twitter"===t){const e=JSON.stringify({oauth_token:i.oauth_token,oauth_verifier:i.oauth_verifier});i.code=wl.DS.encode(e)}return this.getActions().thirdLogin(Object.assign({openid:i.user_id,platform_app_id:ol.Oy[t],platform:t},i))}))))))}thirdLogin(e){return e.pipe((0,ue.M)(this.contextModule.state$),(0,hi.z)((([e,{isSecurityVerification:t}])=>e.error_code||!e.platform_app_id?(0,Ti.of)(this.loginResultDealModule.getActions().handleLoginResult(e)):(bs.g.show(),(t?this.service.thirdVerify(Object.assign(Object.assign({},e),{login_only:!0})):this.service.thirdLogin(Object.assign(Object.assign({},e),{login_only:!0}))).pipe((0,pe.U)((t=>(t.thirdQuery=Object.assign(Object.assign({},e),{profile_key:t.profile_key}),this.loginReport.setPlatform(e.platform),t.platform=e.platform,this.loginResultDealModule.getActions().handleLoginResult(t)))))))))}jumpAuthorizationPage(e){const{url:t,isSmartPlayer:i}=e;let o="";i||(o="resizable,scrollbars,width=500,height=550,display=popup");const n=window.open(t,"_blank",o);return n?new _e.y((e=>{const t=setInterval((()=>{(!n||n.closed||n.authDoneClose)&&(clearInterval(t),e.next({closeByUser:!n.authDoneClose}),n.authDoneClose&&n.close(),e.complete())}),100)})):(0,Oi.c)()}reportThirdGetToken(e){var t;const{error_code:i,code:o,error_msg:n,error:a,platform:r}=e;this.slardar.handleThirdGetToken({error_code:i?-1:0,error_message:null!==(t=null!=o?o:a)&&void 0!==t?t:n,platform:r})}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],zl.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],zl.prototype,"handleHelloJSAuth",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],zl.prototype,"handleHelloLoginEvent",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],zl.prototype,"handleKakaoLogin",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],zl.prototype,"handleAppleLogin",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],zl.prototype,"handlePopupAuthorize",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],zl.prototype,"thirdLogin",null),zl=(0,p.__decorate)([(0,de.Y)("ThirdPlatformModule"),(0,p.__metadata)("design:paramtypes",[Rs.Q,cl,Ys,Yl,Kl,Wl,Ul.M,ks])],zl);const $l=(0,gs.Z)("div",{target:"exattu0"})({display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},"label:DivShowMore;"),ql={facebook:{text:"common_login_panel_button_facebook",icon:vl.Z},google:{text:"common_login_panel_button_google",icon:yl.Z},twitter:{text:"common_login_panel_button_twitter",icon:Cl.Z},instagram:{text:"common_login_panel_button_instagram",icon:fl.Z},apple:{text:"common_login_panel_button_apple",icon:Nl.Z},line:{text:"common_login_panel_button_line",icon:Rl.Z},kakaotalk:{text:"common_login_panel_button_kakaotalk",icon:Ll.Z},vk:{text:"common_login_panel_button_vk",icon:bl.Z}},Zl=({signUp:e})=>{const{isSmartPlayer:t,platformConfig:i}=xl((()=>["isSmartPlayer","platformConfig"]),[]),[n,a]=(0,y.useState)(!1),r=(0,X.fz)(ks),s=(0,No.Q)("WebApp_Login"),{handleAppleLogin:l,handlePopupAuthorize:c,handleHelloJSAuth:d,handleHelloLoginEvent:_,handleKakaoLogin:u}=(0,K.qj)(zl),{setShowInstagramCantLoginModal:p}=(0,K.qj)(cl),m=(e=>{const t={show_num:2,order:"FACEBOOK,GOOGLE,INSTAGRAM,LINE,TWITTER,KAKAOTALK"},{isSignUp:i,platform:o,isSmartPlayer:n,platformConfig:a=t}=e,r="FACEBOOK,GOOGLE,TWITTER,APPLE,INSTAGRAM,LINE,KAKAOTALK,VK".toLocaleLowerCase().split(","),s="APPLE,INSTAGRAM".toLocaleLowerCase().split(","),l="LINE,KAKAOTALK,APPLE".toLocaleLowerCase().split(","),c={expand:[],fold:[]};if(o){const e=r.find((e=>e===o));return e&&c.expand.push(e),c}const d=a.order.toLocaleLowerCase().split(","),_={expand:[...d.slice(0,a.show_num)],fold:[...d.slice(a.show_num)]};return n&&(_.expand=_.expand.filter((e=>!l.includes(e))),_.fold=_.fold.filter((e=>!l.includes(e)))),i?(_.expand=_.expand.filter((e=>!s.includes(e))),_.fold=_.fold.filter((e=>!s.includes(e)))):_.expand=_.expand.concat(_.fold),_.expand=_.expand.filter((e=>r.includes(e))),_.fold=_.fold.filter((e=>r.includes(e))),_})({platformConfig:i,isSignUp:e,isSmartPlayer:t}),E=(0,f.k6)(),{$isMobile:g}=(0,q.m7)((0,te.L)((()=>["$isMobile"]),[])),h=(0,y.useCallback)((()=>{const e=(()=>{const e=(0,v.stringifyUrl)({url:`${window.location.origin}/oauth/?page=new`,query:{platform:["twitter"],oauthType:0,lang:"en"}});return(0,v.stringifyUrl)({url:"https://us.tiktok.com/passport/web/web_login/",query:{platform_app_id:ol.Oy.twitter,platform:["twitter"],aid:"1459",next:encodeURIComponent(e),action:"login_only"}})})();c({url:e,platform:"twitter"})}),[c]),T=(0,y.useCallback)((()=>{const e=(0,v.stringifyUrl)({url:"https://access.line.me/oauth2/v2.1/authorize",query:{response_type:"code",client_id:ol.z,redirect_uri:`${window.location.origin}/oauthLine/`,state:"1line",scope:"openid profile"}});c({url:e,platform:"line"})}),[c]),S=(0,y.useCallback)((()=>{const e=(0,v.stringifyUrl)({url:"https://oauth.vk.com/authorize",query:{display:"page",response_type:"token",client_id:ol.zH,redirect_uri:"https://www.tiktok.com/login/",scope:"offline, v",state:"vk_authorization"}});c({url:e,platform:"vk"})}),[c]),O=(0,y.useCallback)((()=>{g?p(!0):E.push({pathname:V.gY.loginDownloadApp,state:{fromIns:!0}})}),[g,p,E]),A=(0,y.useCallback)((i=>()=>{var o,n;switch(r.setPlatform(i),r.loginSubmit({signUp:e}),i){case"apple":l();break;case"twitter":h();break;case"line":T();break;case"facebook":case"google":d({force:!0,platform:i,display:t?"page":"popup",redirect_uri:"https://www.tiktok.com/login/",scope:null!==(n=null===(o=ql[i])||void 0===o?void 0:o.scope)&&void 0!==n?n:""});break;case"vk":S();break;case"kakaotalk":u();break;case"instagram":O()}}),[r,e,l,h,T,d,t,u,O,S]),I=(0,y.useCallback)((()=>{a(!0)}),[]);return(0,y.useEffect)((()=>{(()=>{if(location.hash){const{state:e,access_token:t,user_id:i}=v.parse(location.hash.substr(1));"vk_authorization"===e&&(kl("vk",{access_token:null==t?void 0:t.toString(),user_id:null==i?void 0:i.toString()}),window.authDoneClose=!0)}})(),Boolean((0,Jt.le)(Bl))&&_()}),[_]),(0,o.jsxs)(o.Fragment,{children:[m.expand.map((e=>ql[e]?(0,o.jsx)(Ol,{text:s(ql[e].text),Icon:ql[e].icon,onClick:A(e)},e):null)),m.fold.length>0&&e&&!n&&(0,o.jsxs)($l,Object.assign({onClick:I},{children:[" ",(0,o.jsx)(Pl.Z,{},void 0)]}),void 0),n&&m.fold.map((e=>ql[e]?(0,o.jsx)(Ol,{text:s(ql[e].text),Icon:ql[e].icon,onClick:A(e)},e):null))]},void 0)},Ql=(e,t)=>{const i=`https://www.tiktok.com/foryou?lang=${e}`,o=window.decodeURIComponent(null!=t?t:""),n=[/^https?:\/\/([\w\-.]+?\.)?tiktok\.com(\/.*)?$/].some((e=>new RegExp(e).test(o)));return o&&n?o:i},Xl=(0,gs.Z)("div",{target:"exd0a430"})((({isMobile:e})=>({width:"375px",margin:"auto",padding:e?"0 30px":"unset"})),"label:DivLoginContainer;"),Jl=(0,gs.Z)("div",{target:"exd0a431"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextQuaternary"}),{fontSize:"15px",lineHeight:"18px",margin:"12px 0 32px",textAlign:"center"}]),"label:DivDescriptionContainer;"),ec=(0,gs.Z)("div",{target:"exd0a432"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),tc=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),{loginModalShow:i}=(0,K.mp)(Wt.r),{$region:n}=(0,q.m7)((0,te.L)((()=>["$region"]),[])),{loginTitle:a,loginSlogan:r,signUpSlogan:s,signUpTitle:l}=xl((()=>["loginTitle","loginSlogan","signUpSlogan","signUpTitle"]),[]),c=(0,f.k6)(),{pathname:d}=c.location,_=d.startsWith(V.gY.signupHome),u=(0,y.useCallback)((()=>{_?t.clickSignUp():t.clickLoginButton()}),[_,t]),p=(0,y.useCallback)((()=>{t.clickQrCode()}),[t]),m=!_,E="KR"===n?V.gY.signupPolicyConfirm:V.gY.signupPhone;return(0,o.jsxs)("div",{children:[(0,o.jsx)(ec,{children:e(_?l:a)},void 0),!i&&(0,o.jsx)(Jl,{children:e(_?s:r)},void 0),m&&(0,o.jsx)(Il,Object.assign({path:V.gY.loginQRcode,underline:!1},{children:(0,o.jsx)(Ol,{text:e("common_login_panel_button_qrcode"),Icon:gl.Z,onClick:p},void 0)}),void 0),(0,o.jsx)(Il,Object.assign({underline:!1,path:_?E:V.gY.loginPhone},{children:(0,o.jsx)(Ol,{text:e(_?"common_registration_panel_button_phoneoremail":"common_login_panel_button_phoneoremailorusername"),Icon:hl.Z,onClick:u},void 0)}),void 0),(0,o.jsx)(Zl,{signUp:_},void 0)]},void 0)},ic={initialized:!1,eventCommonParams:{},init(e){var t;const{enter_from:i,enter_method:o,platform:n}=v.parse(e);this.initialized=!0,this.eventCommonParams={enter_from:null!==(t=null==i?void 0:i.toString())&&void 0!==t?t:"login",enter_method:o,platform:n}}},oc={login:{title:"Log in",description:"Log in or sign up for an account on TikTok. Start watching to discover real people and real videos that will make your day.",keywords:"Log in, Log in to TikTok"},signup:{title:"Sign up",description:"Sign up for an account or log back into TikTok. Create an account to discover real people and real videos that will make your day.",keywords:"Sign up, Sign up for TikTok"}},nc=(0,y.memo)((({page:e})=>{const t=oc[e],i=(0,No.Q)("WebApp_Login"),n=(0,te.L)((()=>["$language"]),[]);return(0,o.jsxs)(C.ql,Object.assign({htmlAttributes:{lang:null==n?void 0:n.$language}},{children:[(0,o.jsx)("title",{children:i(`${t.title}${t.title.indexOf(" ")<0?"":" | TikTok"}`)},void 0),(0,o.jsx)("meta",{name:"description",content:i(t.description)},void 0),(0,o.jsx)("meta",{name:"keywords",content:t.keywords},void 0)]}),void 0)})),ac=(0,gs.Z)("div",{target:"e10o7n900"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"24px",lineHeight:"32px",margin:"32px auto 12px",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),rc=(0,gs.Z)("div",{target:"e10o7n901"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary"}),{fontSize:"18px",lineHeight:"25px",display:"flex",justifyContent:"space-between",marginBottom:"40px"}]),"label:DivDescription;"),sc=(0,gs.Z)("img",{target:"e10o7n902"})({width:"80%",margin:"0 auto 16px"},"label:ImgQR;");var lc=i(30008);const cc=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rc,{children:e("login_risk_popup_pc_body_2")},void 0),(0,o.jsx)(sc,{src:lc},void 0)]},void 0)})),dc=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),t=(0,f.TH)(),{fromIns:i}=t.state||{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ac,{children:e(i?"login_new_ins_PC_title":"login_risk_popup_pc_title")},void 0),(0,o.jsx)(cc,{},void 0)]},void 0)}));let _c=class extends le.D{constructor(){super(...arguments),this.defaultState={password:""}}setPassword(e,t){e.password=t}setHasInvalid(e,t){e.hasInvalid=t}setLengthValid(e,t){e.lengthValid=t}setContentValid(e,t){e.contentValid=t}updatePassword(e){return e.pipe((0,hi.z)((({value:e})=>{const{hasInvalid:t,contentValid:i,lengthValid:o}=(e=>{if(!e)return{};const t=/[^\w~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/,i=/[_~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/.test(e)&&/[0-9]+/.test(e)&&/[A-Za-z]+/.test(e)&&!t.test(e),o=e.length>=8&&e.length<=20;return{hasInvalid:t.test(e),lengthValid:o,contentValid:i}})(e);return(0,Ti.of)(this.getActions().setPassword(e),this.getActions().setHasInvalid(t),this.getActions().setLengthValid(o),this.getActions().setContentValid(i))})))}};(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],_c.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],_c.prototype,"setPassword",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],_c.prototype,"setHasInvalid",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],_c.prototype,"setLengthValid",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],_c.prototype,"setContentValid",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],_c.prototype,"updatePassword",null),_c=(0,p.__decorate)([(0,de.Y)("SetPasswordModule")],_c);const uc={email_verify:"email",pwd_verify:"password",mobile_sms_verify:"phone"},pc={email:"email_verify",password:"pwd_verify",phone:"mobile_sms_verify"};let mc=class extends le.D{constructor(e,t,i,o,n){super(),this.service=e,this.third=t,this.login=i,this.loginReport=o,this.phone=n,this.defaultState={loginLoading:!1}}setTwoStepVerifyRes(e,t){var i;const o=t.verify_ways,n={};o.forEach((({verify_way:e,mobile:t,email:i})=>{n[e]=null!=t?t:i})),e.verifyWays=n,e.type=t.default_verify_way||(null===(i=o[0])||void 0===i?void 0:i.verify_way),e.isTwoStep=Boolean(null==t?void 0:t.default_verify_way),e.thirdQuery=t.thirdQuery,e.accountQuery=t.accountQuery,e.password=t.password,e.verify_ticket=t.verify_ticket,e.not_login_ticket=t.not_login_ticket,e.sms_code_key=t.sms_code_key}setTwoStepType(e,t){e.type=t}setErrorMsg(e,t){e.errorMsg=t}setLoginLoading(e,t){e.loginLoading=t}handlePasswordVerify(e){return e.pipe((0,ue.M)(this.state$,this.phone.state$),(0,hi.z)((([e,{sms_code_key:t=""},{mobile:i}])=>this.service.accountVerify(e).pipe((0,ni.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"password"}))),(0,ii.w)((e=>e.error_code?(0,Ti.of)(this.getActions().setErrorMsg(e.description)):this.service.smsLoginContinue({mobile:i,sms_code_key:t}).pipe((0,pe.U)((e=>this.login.getActions().handleLoginResult(e))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}handleCodeVerify(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,{type:t="",thirdQuery:i,accountQuery:o}])=>i||o?(t===pc.email?this.service.validateEmailCodeForLogin(e):this.service.validateMobileCodeForLogin(e)).pipe((0,ni.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:uc[t]}))),(0,ii.w)((e=>e.error_code?(0,Ti.of)(this.getActions().setErrorMsg(e.description)):i?(0,Ti.of)(this.third.getActions().thirdLogin(i)):o?(0,Ti.of)(this.login.getActions().handlePasswordLogin(o)):(0,Ti.of)(this.noop()))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))):(0,Ti.of)(this.getActions().handleEmailCodeVerify(e)))))}handleEmailCodeVerify(e){return e.pipe((0,hi.z)((e=>this.service.emailCodeLogin(e).pipe((0,ni.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"email"}))),(0,pe.U)((e=>this.login.getActions().handleLoginResult(e))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}handleSmsCodeVerifyReset(e){return e.pipe((0,hi.z)((e=>this.service.validateMobileCodeForReset(e).pipe((0,ni.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"phone"}))),(0,pe.U)((e=>this.login.getActions().handleLoginResult(e))),(0,oi.O)(this.getActions().setLoginLoading(!0)),(0,xi.l)(this.getActions().setLoginLoading(!1))))))}reportTwoStepResult(e){this.loginReport.twoStepResult({verification_method:e.type,result:e.error_code?"fail":"success",error_code:e.error_code})}};function Ec(e=[]){const[{errorMsg:t},i]=(0,K.b7)(cl),[{errorMsg:o},n]=(0,K.b7)(ll),{phone:a,areaCode:r}=(0,K.mp)($s),{email:s}=(0,K.mp)(Zs),[{code:l},{clearGetCodeError:c}]=(0,K.b7)(Qs),{password:d}=(0,K.mp)(_c),[{errorMsg:_},{setErrorMsg:u}]=(0,K.b7)(mc),[p,m]=(0,y.useState)(""),E=t||o||_,g=(0,No.Q)("WebApp_Login"),h=(0,f.k6)(),{pathname:T}=h.location;return(0,y.useEffect)((()=>{E&&(T===V.gY.loginHome||T===V.gY.loginHome?Ht.h.open({content:g(E),duration:3,widthType:"half"}):m(E))}),[g,h.location,E,T]),(0,y.useEffect)((()=>{i.clearLoginResult(),n.setErrorMsg(""),c(),m("")}),[a,r,s,l,i,n,d,...e]),(0,y.useEffect)((()=>()=>{i.clearLoginResult(),n.clearSignUpResult(),c(),m(""),u("")}),[]),p}(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],mc.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"setTwoStepVerifyRes",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"setTwoStepType",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"setErrorMsg",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"setLoginLoading",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"handlePasswordVerify",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"handleCodeVerify",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"handleEmailCodeVerify",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],mc.prototype,"handleSmsCodeVerifyReset",null),mc=(0,p.__decorate)([(0,de.Y)("TwoStepModule"),(0,p.__metadata)("design:paramtypes",[Rs.Q,zl,cl,ks,$s])],mc);const gc=(0,gs.Z)("div",{target:"e1ggqfg30"})((({theme:e,type:t})=>[(0,re.GI)({theme:e,fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"15px",marginTop:"4px",color:"error"===t?e.colors.Negative:"success"===t?e.colors.Positive:e.colors.TextTertiary,display:"flex",svg:{marginInlineEnd:"4px"}}]),"label:DivTextContainer;"),hc=(0,y.memo)((({text:e,type:t="default",children:i,style:n})=>(0,o.jsxs)(gc,Object.assign({type:t,style:n},{children:[i,e]}),void 0)));var Tc,Sc=i(85485);function Oc(){return Oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Oc.apply(this,arguments)}const Ac=function(e){return y.createElement("svg",Oc({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Tc||(Tc=y.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},y.createElement("path",{d:"M2.8 7.8c2.1 1 4.5 1.6 7 1.6s4.9-.6 7-1.6M9.8 9.8v3M5.1 9.2l-1.5 2.6M14.6 9.2l1.5 2.6"}))))};var Ic;function vc(){return vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},vc.apply(this,arguments)}const yc=function(e){return y.createElement("svg",vc({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Ic||(Ic=y.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},y.createElement("path",{d:"M9.8 4.8c3 0 5.3 1.7 7 5-1.7 3.3-4 5-7 5s-5.3-1.7-7-5c1.6-3.4 4-5 7-5z"}),y.createElement("path",{d:"M9.8 11.8a2 2 0 100-4 2 2 0 000 4z"}))))},Cc=(0,gs.Z)("div",{target:"e93gz7m0"})({position:"relative"},"label:DivInputContainer;"),fc=(0,gs.Z)("input",{target:"e93gz7m1"})((({theme:{colors:e},border:t=!1,errorState:i=!1})=>[{"::placeholder":{color:e.TextQuaternary},color:e.TextPrimary,border:t?`1px solid ${e.LineSecondary2}`:"none",borderRadius:"2px",backgroundColor:e.BGInput,paddingInlineStart:"12px",lineHeight:"100%",outline:"none",fontSize:"16px",height:"44px",caretColor:e.Primary,width:"100%"},()=>{if(i)return{color:e.Negative,border:`1px solid ${e.Negative}`}}]),"label:InputContainer;"),Nc=(0,gs.Z)("div",{target:"e93gz7m2"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,end:"0"}),{display:"flex",alignItems:"center",position:"absolute",top:0,height:"44px",paddingInlineEnd:"16px"}]),"label:DivIconContainer;"),Rc=(0,gs.Z)("i",{target:"e93gz7m3"})({lineHeight:"0",marginInlineStart:"16px",cursor:"pointer",fontSize:"20px"},"label:IPasswordIcon;"),Lc=(0,y.memo)((function(e){const{errorState:t,value:i,placeholder:n,password:a=!1,className:r,border:s=!0,style:l,autocomplete:c,name:d,autoFocus:_}=e,[u,p]=(0,y.useState)("text");(0,y.useEffect)((()=>{a&&p("password")}),[a]);const m=(0,y.useCallback)((()=>{p("text")}),[]),E=(0,y.useCallback)((()=>{p("password")}),[]);return(0,o.jsxs)(Cc,Object.assign({className:r,style:l},{children:[(0,o.jsx)(fc,{autoFocus:_,value:i,type:u,errorState:t,placeholder:n,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,onInput:e.onInput,border:s,autoComplete:c,autocomplete:c,name:d},void 0),(0,o.jsxs)(Nc,{children:[t&&(0,o.jsx)(Sc.Z,{fill:"rgba(254, 44, 85, 1.0)"},void 0),a&&("password"===u?(0,o.jsx)(Rc,Object.assign({onClick:m},{children:(0,o.jsx)(Ac,{},void 0)}),void 0):(0,o.jsx)(Rc,Object.assign({onClick:E},{children:(0,o.jsx)(yc,{},void 0)}),void 0))]},void 0)]}),void 0)})),bc=(0,gs.Z)("div",{target:"ewblsjs0"})({marginBottom:"9px"},"label:DivContainer;"),Pc=(0,gs.Z)(Lc,{target:"ewblsjs1"})({flex:1,width:0,"& > input":{background:"transparent"}},"label:StyledBaseInput;"),Dc=(0,gs.Z)("div",{target:"ewblsjs2"})((({theme:{colors:e},errState:t})=>[{background:e.BGInput,border:`1px solid ${e.LineSecondary2}`,transition:"all 0.3s",borderRadius:"4px",display:"flex"},()=>t?{border:`1px solid ${e.Negative}`,input:{color:e.Negative}}:{}]),"label:DivPhoneInputContainer;"),Mc=(0,gs.Z)("div",{target:"ewblsjs3"})({position:"relative",cursor:"pointer"},"label:DivAreaSelectionContainer;"),xc=(0,gs.Z)("div",{target:"ewblsjs4"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"12px",height:"44px","::after":{content:'""',width:"1px",height:"30px",background:e.LineSecondary,right:"rtl"===t?"unset":"0",left:"rtl"===t?"0":"unset",position:"absolute"}}]),"label:DivAreaLabelContainer;"),wc=(0,gs.Z)("span",{target:"ewblsjs5"})((({theme:{colors:e}})=>[{fontSize:"16px",lineHeight:1,color:e.TextPrimary,marginInlineEnd:"12px"}]),"label:SpanLabelContainer;");var Uc=i(62687);const kc=(0,gs.Z)("button",{target:"e1gzcpl10"})((({theme:e})=>[(0,re.GI)({color:"TextPrimary",theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:0,backgroundColor:e.colors.BGPrimary,borderColor:e.colors.LineSecondary2,borderWidth:1.5,borderStyle:"solid",borderRadius:"rtl"===e.direction?"4px 0 0 4px":"0px 4px 4px 0px",borderInlineStartWidth:1.5,cursor:"pointer",fontSize:"16px",padding:"0px 16px",height:"44px",flexShrink:0,boxSizing:"content-box","&:disabled":{color:e.colors.TextQuaternary,cursor:"not-allowed"},"&:focus-visible":{outline:"none"}}]),"label:ButtonSendCode;"),Fc=(0,gs.Z)(Uc.Z,{target:"e1gzcpl11"})({marginInlineStart:"4px",fontSize:"20px",verticalAlign:"middle",marginTop:"-2px",animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),Bc=(0,y.memo)((function(e){const{text:t,disabled:i,countDownSecond:n=0,loading:a}=e;return(0,o.jsxs)(kc,Object.assign({type:"button",onClick:e.onClick,disabled:!!i||!!n,lo:!0},{children:[t+(n?`: ${n}s`:""),a&&(0,o.jsx)(Fc,{},void 0)]}),void 0)})),Gc=(0,gs.Z)("div",{target:"e2oypfg0"})({transition:"all 0.3s",display:"flex",justifyContent:"space-between"},"label:DivCodeInputContainer;"),jc=(0,gs.Z)(Lc,{target:"e2oypfg1"})((({theme:e})=>({flex:1,width:0,"& > input":{height:"47px",borderInlineEndWidth:"0",borderRadius:"rtl"===e.direction?"0 2px 2px 0":"2px 0px 0px 2px"}})),"label:StyledBaseInput;"),Hc=(0,y.memo)((function(e){const{errorMsg:t,disabled:i,codeFromNumber:n,loading:a,autoSendFirstTime:r,email:s}=e,l=(0,No.Q)("WebApp_Login"),[c,d]=(0,y.useState)(!1),[_,u]=(0,y.useState)(),[{codeFormatError:p,getCodeErrorMsg:m,code:E},{setCode:g}]=(0,K.b7)(Qs);(0,y.useEffect)((()=>{u(t)}),[t]),(0,y.useEffect)((()=>{u(m)}),[m]);const{countDownSecond:h,hasSent:T}=((e,t,i)=>{const[o,n]=(0,y.useState)(0),[a,r]=(0,y.useState)(!1),s=(0,y.useRef)({});return(0,y.useEffect)((()=>{s.current&&clearTimeout(s.current);const{hasSent:t,countDownSecond:o}=qs(e,i);r(t),n(o)}),[e,i,t]),(0,y.useEffect)((()=>{o>0&&(s.current=setTimeout((()=>{n(o-1)}),1e3))}),[o]),{hasSent:a,countDownSecond:o}})(n,a,s);(0,y.useEffect)((()=>{if(r){const{countDownSecond:t}=qs(n,s);!t&&e.onClickSendCode()}return()=>{g("")}}),[]);const S=(0,y.useCallback)((()=>{d(!0)}),[]),O=(0,y.useCallback)((()=>{d(!1)}),[]),A=(0,y.useCallback)((e=>{g(e.target.value)}),[g]),I=_||p,v=p?!c:Boolean(I);return(0,o.jsxs)(bc,{children:[(0,o.jsxs)(Gc,{children:[(0,o.jsx)(jc,{placeholder:l("common_login_reset_email_verify_title"),onFocus:S,onBlur:O,onChange:A,value:E,className:"code-input",autoComplete:"off",errorState:v},void 0),(0,o.jsx)(Bc,{loading:a,onClick:e.onClickSendCode,disabled:!!i||!!h||a,countDownSecond:h,text:l(T?"common_registration_phone_sms_button":"common_registration_phone_input_button")},void 0)]},void 0),v&&I&&(0,o.jsx)(hc,{text:l(I),type:"error"},void 0)]},void 0)})),Wc=(0,y.memo)((function(e){const t=(0,y.useCallback)((t=>{t.preventDefault(),e.onSubmit()}),[e]);return(0,o.jsx)("form",Object.assign({onSubmit:t},{children:e.children}),void 0)}));var Vc=i(58778);const Yc=(0,gs.Z)("p",{target:"e13i10ol0"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:"4px 0"}]),"label:PDescriptionTitleContainer;"),Kc=(0,y.memo)((function(e){const{loginError:t,autoFocus:i,create:n=!0}=e,[{password:a,hasInvalid:r,lengthValid:s,contentValid:l},{updatePassword:c}]=(0,K.b7)(_c),d=(0,No.Q)("WebApp_Login"),[_,u]=(0,y.useState)(!1),p=(0,y.useCallback)((()=>{u(!0)}),[]),m=(0,y.useCallback)((()=>{u(!1)}),[]),E=(0,y.useCallback)((e=>{c({value:e.target.value})}),[c]);(0,y.useEffect)((()=>()=>{c({value:""})}),[]);const g=n&&(!1===s||!1===l)&&!_,h=(!s||!l)&&a||_,T=!1!==s||_?!0===s?"success":"default":"error",S=!1!==l||_?!0===l?"success":"default":"error";return(0,o.jsxs)(bc,{children:[(0,o.jsx)(Lc,{autoFocus:i,placeholder:d("Password"),onFocus:p,onBlur:m,onChange:E,value:a,errorState:g||t,password:!0,autocomplete:"new-password"},void 0),r&&(0,o.jsx)(hc,{text:d("createpw_error_6"),type:"error"},void 0),h&&n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Yc,{children:d("common_registration_password_pc_text")},void 0),(0,o.jsx)(hc,Object.assign({text:d("common_registration_password_pc_1"),type:T},{children:(0,o.jsx)(Vc.Z,{fill:"success"===T?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0),(0,o.jsx)(hc,Object.assign({text:d("createpw_helptext_2"),type:S},{children:(0,o.jsx)(Vc.Z,{fill:"success"===S?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0)]},void 0)]},void 0)})),zc=(0,gs.Z)(Et.W,{target:"e1521l5b0"})([{width:"100%",marginTop:"16px"}],"label:StyledButton;"),$c=(0,gs.Z)("div",{target:"e1521l5b1"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),qc=(0,gs.Z)("div",{target:"e1521l5b3"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),Zc=(0,gs.Z)("div",{target:"e1521l5b4"})((({theme:e})=>[{marginTop:"20px",border:"1px solid",borderColor:e.colors.LineSecondary2,padding:"13px",borderRadius:"2px",width:"100%",position:"relative",":before":{content:'""',height:"16px",position:"absolute",background:e.colors.BGPrimary,width:"16px",top:"-8px",left:"rtl"===e.direction?"unset":"calc(50% - 8px)",right:"rtl"===e.direction?"calc(50% - 8px)":"unset",borderInlineEnd:`1px solid ${e.colors.LineSecondary2}`,borderTop:`1px solid ${e.colors.LineSecondary2}`,transform:"rotateZ(-45deg)"}}]),"label:DivPhoneNotRegistered;"),Qc=(0,gs.Z)("p",{target:"e1521l5b5"})((({theme:e,link:t})=>[{fontSize:"12px",lineHeight:"17px",color:t?e.colors.Primary:e.colors.TextPrimary,fontWeight:600,margin:"0 0 8px",cursor:"pointer"}]),"label:PPhoneNotRegistered;"),Xc=(0,gs.Z)("div",{target:"eop2wpq1"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{marginBottom:"16px",fontSize:"18px",lineHeight:"24px",display:"flex",justifyContent:"space-between"}]),"label:DivDescription;"),Jc=()=>{const e=(0,X.fz)(ks),t=(0,No.Q)("WebApp_Login"),[{forceResetResponse:i,loginLoading:n},{handleForceResetPwdByEmail:a,handleForceResetPwdByPhone:r,clearForceResetRes:s}]=(0,K.b7)(cl),{conditional_login_ticket:l,type:c,email:d,mobile:_}=(0,q.m7)(i),[{sendCodeLoading:u,ticket:p,code:m,codeFormatError:E},{sendPhoneCodeForForceResetPwd:g,sendEmailCodeForForceResetPwd:h}]=(0,K.b7)(Qs),{password:T,contentValid:S,lengthValid:O}=(0,K.mp)(_c),A=Ec(),I=(0,y.useCallback)((()=>{"email"===c?h({conditional_login_ticket:l}):g({conditional_login_ticket:l})}),[c,h,l,g]),v=(0,y.useCallback)((()=>{const t={code:m,ticket:null!=p?p:"",password:T,conditional_login_ticket:l};e.forceResetSubmit(),"email"===c?a(t):r(t)}),[m,l,a,r,e,T,p,c]),C=!(m&&T&&S&&O&&!E),f="email"===c?t("setting_password_code_email_text",{email:d}):t("setting_password_code_sms_text",{mobile:_}).replace(/(\D{1})(4)(\D{1})/,((e,t,i,o)=>`${t}6${o}`));return(0,y.useEffect)((()=>()=>{s()}),[]),(0,o.jsxs)(Wc,Object.assign({onSubmit:v},{children:[(0,o.jsx)($c,{children:t("common_login_reset_password_title")},void 0),(0,o.jsx)(Xc,{children:t("changepw_banner")},void 0),(0,o.jsx)(Hc,{email:"email"===c,autoSendFirstTime:!0,disabled:!l,codeFromNumber:l,loading:u,onClickSendCode:I},void 0),(0,o.jsx)(hc,{text:f,type:"default",style:{marginBottom:"4px"}},void 0),(0,o.jsx)(Kc,{loginError:Boolean(A)},void 0),(0,o.jsx)(hc,{text:t(A),type:"error"},void 0),(0,o.jsx)(zc,Object.assign({buttonTheme:"primary",size:"largeNew",type:"submit",disabled:C,loading:n},{children:t("Login")}),void 0)]}),void 0)},ed=(0,gs.Z)(Il,{target:"ep888o80"})({fontSize:"12px",display:"inline-block"},"label:StyledLink;"),td=(0,y.memo)((function({text:e,path:t,replace:i,textTheme:n}){return(0,o.jsx)(ed,{path:t,text:e,replace:i,textTheme:n},void 0)})),id=(0,gs.Z)("div",{target:"e16xc1ie0"})({marginBottom:"9px",position:"relative"},"label:DivEmailContainer;"),od=(0,gs.Z)("ul",{target:"e16xc1ie1"})((({theme:e})=>({position:"absolute",top:"44px",borderRadius:"4px",background:e.colors.BGPrimary,border:"1px solid",borderColor:e.colors.LineSecondary,zIndex:2,marginTop:"4px",width:"100%",padding:"0"})),"label:UlList;"),nd=(0,gs.Z)("li",{target:"e16xc1ie2"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),ad=(0,y.memo)((function(e){const{placeholder:t,errorMsg:i,onChange:n,emailRegistered:a}=e,r=(0,No.Q)("WebApp_Login"),{emailSuffixConfig:s}=xl((()=>["emailSuffixConfig"]),[]),[l,c]=(0,y.useState)(!1),[d,_]=(0,y.useState)(!1),[u,p]=(0,y.useState)(""),m=(0,y.useCallback)((()=>{setTimeout((()=>{c(!0)}),300)}),[]),E=(0,y.useCallback)((()=>{c(!1)}),[]),g=(0,y.useCallback)((e=>{const t=e.target.value,i=zs(t);!i&&l&&t.includes("@")&&s.length?_(!0):_(!1),p(t),n({value:t,valid:i})}),[l,s.length,n]),h=(0,y.useCallback)((e=>()=>{p(e),_(!1),n({value:e,valid:!0})}),[n]),T=(Boolean(i)||a)&&!l;return(0,o.jsxs)(id,{children:[(0,o.jsx)(Lc,{placeholder:t,onFocus:m,onBlur:E,onChange:g,value:u,errorState:T,autocomplete:"email",name:"email"},void 0),d&&(0,o.jsx)(od,{children:s.map(((e,t)=>(0,o.jsxs)(nd,Object.assign({onClick:h(`${u}${e}`)},{children:[u,e]}),t)))},void 0),!l&&i&&(0,o.jsx)(hc,{text:r(i),type:"error"},void 0)]},void 0)})),rd=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[i,n]=(0,K.b7)(Zs),[{loginLoading:a},{changePwdByEmail:r}]=(0,K.b7)(cl),[{sendCodeLoading:s,code:l,codeFormatError:c},{sendEmailCodeForReset:d}]=(0,K.b7)(Qs),{password:_,lengthValid:u,contentValid:p}=(0,K.mp)(_c),{emailErrorMsg:m,email:E=""}=i,g=Ec(),h=(0,y.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),r({password:_,email:E,emailCode:l})}),[t,r,_,E,l]),T=(0,y.useCallback)((e=>{n.setEmailInfo({email:e.value,valid:e.valid})}),[n]),S=(0,y.useCallback)((()=>{d({email:E,email_logic_type:2})}),[E,d]),O=!(E&&_&&l&&p&&u&&!c&&!m);return(0,o.jsxs)(Wc,Object.assign({onSubmit:h},{children:[(0,o.jsx)($c,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(qc,{children:[e("setting_password_email_verify_title"),(0,o.jsx)(td,{text:e("forget_password_switch_phone"),path:V.gY.loginForgetPhonePassword,replace:!0},void 0)]},void 0),(0,o.jsx)(ad,{placeholder:e("common_login_reset_email_input_placeholder"),onChange:T,errorMsg:m},void 0),(0,o.jsx)(Hc,{email:!0,disabled:Boolean(m)||!E,codeFromNumber:E,loading:s,onClickSendCode:S},void 0),(0,o.jsx)(Kc,{loginError:Boolean(g)},void 0),(0,o.jsx)(hc,{text:e(g),type:"error"},void 0),(0,o.jsx)(zc,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew",disabled:O,loading:a},{children:e("Login")}),void 0)]}),void 0)};var sd=i(1399),ld=i(51877);const cd=(0,gs.Z)("ul",{target:"e2hldqz0"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{padding:"0",margin:0}]),"label:UlListContainer;"),dd=(0,gs.Z)("li",{target:"e2hldqz1"})((({theme:e,selected:t})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),()=>t&&{backgroundColor:"rgba(22, 24, 35, .03)"},{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),_d=(0,gs.Z)("span",{target:"e2hldqz2"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary"}),{paddingInlineEnd:"4px"}]),"label:SpanItemName;"),ud=(0,gs.Z)("span",{target:"e2hldqz3"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextSecondary"})]),"label:SpanItemCode;"),pd=({filterCountryList:e=[],onSelected:t,searchText:i,currentSelectCode:n,matchSearchArea:a})=>{const{$isMobile:r}=(0,q.m7)((0,te.L)((()=>["$isMobile"]),[])),s=(0,No.Q)("WebApp_Login"),l=RegExp(i.replace("+","\\+"),"ig"),c=(0,y.useCallback)((({code:e,shortname:i})=>()=>{t({code:e,area:i})}),[t]);return(0,o.jsxs)(cd,{children:[Ks.map((t=>{const{label:a,lists:s}=t;return(0,o.jsx)("div",Object.assign({id:a},{children:s.map((t=>{const{name:a,code:s,shortname:d}=t;if(-1!==e.indexOf(d))return null;if(i&&!(a.match(l)||`+${s}`.match(l)||d.match(l)))return null;const _=`${n}`==`${s}`;return(0,o.jsx)(dd,Object.assign({selected:_,onClick:c({shortname:d,code:s})},{children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_d,{children:a},void 0),(0,o.jsx)(ud,{children:`+${s}`},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_d,{dangerouslySetInnerHTML:{__html:(u=`${a} +${s}`,i?u=u.replace(l,(e=>`<span style="color: #20D5EC">${e}</span>`)):u)}},void 0),_&&(0,o.jsx)(ld.Z,{width:16,height:16,fill:"#000"},void 0)]},void 0)}),a+s);var u}))}),a)})),Boolean(!a)&&(0,o.jsx)(dd,Object.assign({selected:!1,style:{justifyContent:"center"}},{children:s("registration_phone_search_empty")}),void 0)]},void 0)};var md=i(5550);const Ed=(0,gs.Z)("div",{target:"emwsnhg0"})({top:"45px",height:"35px",width:"326px",boxSizing:"border-box",borderBottom:"1px solid rgba(22, 24, 35, .12)",background:"#fff",marginTop:"4px",display:"flex",justifyContent:"space-between",flexShrink:0},"label:DivSearchContainer;"),gd=(0,gs.Z)("div",{target:"emwsnhg1"})((({theme:e})=>({margin:"0 15px",color:e.colors.LineInput,display:"flex",alignItems:"center"})),"label:DivSearchIcon;"),hd=(0,gs.Z)("input",{target:"emwsnhg2"})((({theme:e})=>({outline:"none",border:"none",flex:"1",caretColor:e.colors.Primary})),"label:InputSearch;"),Td=()=>{const e=(0,No.Q)("WebApp_Login"),{matchSearchArea:t}=(0,K.mp)($s),{setAreaSearchText:i,selectAreaCode:n}=(0,K.qj)($s),a=(0,y.useCallback)((e=>{i(e.target.value)}),[i]),r=(0,y.useCallback)((e=>{13===e.keyCode&&t&&n({code:t.code,area:t.shortname})}),[t,n]);return(0,y.useEffect)((()=>()=>{i("")}),[i]),(0,o.jsxs)(Ed,{children:[(0,o.jsx)(gd,{children:(0,o.jsx)(md.Z,{width:14,height:14},void 0)},void 0),(0,o.jsx)(hd,{autoFocus:!0,maxLength:35,onKeyUp:r,placeholder:e("registration_phone_search_placeholder"),onChange:a},void 0)]},void 0)},Sd=(0,gs.Z)("div",{target:"e1llxcni0"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,start:"0"}),{maxHeight:"320px",background:e.colors.BGPrimary,border:"0.5px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"4px",position:"absolute",top:"54px",display:"flex",flexDirection:"column",zIndex:2}]),"label:DivSelectorContainer;"),Od=(0,gs.Z)("div",{target:"e1llxcni1"})({flex:"1",overflow:"auto"},"label:DivListWrapper;"),Ad=e=>(0,o.jsxs)(Sd,{children:[(0,o.jsx)(Td,{},void 0),(0,o.jsx)(Od,{children:(0,o.jsx)(pd,{matchSearchArea:e.matchSearchArea,filterCountryList:e.filterCountryList,onSelected:e.onSelected,currentSelectCode:e.currentSelectCode,searchText:e.searchText},void 0)},void 0)]},void 0),Id=(0,y.memo)((function({errorStatus:e,filterCountryList:t}){const i=(0,y.useRef)(null),{$region:n,$appType:a}=(0,q.m7)((0,te.L)((()=>["$region","$appType"]),[])),[r,s]=(0,K.b7)($s),{area:l,areaCode:c,phoneErrorMsg:d,showAreaCodeSelector:_,searchText:u,phone:p,matchSearchArea:m}=r,[E,g]=(0,y.useState)(!1),{checkPhoneNumberFormat:h}=s,{toggleAreaCodeSelector:T,selectAreaCode:S}=s,O=(0,No.Q)("WebApp_Login");(0,y.useEffect)((()=>{if(!c){let e=!1;if(Ks.forEach((({lists:t})=>t.forEach((({code:t,shortname:i})=>{i===n&&(e=!0,s.selectAreaCode({code:t,area:i}))})))),!e){let e="m"===a?{code:1,area:"US"}:{code:81,area:"JP"};(null==t?void 0:t.find((t=>t===e.area)))&&(e={code:1,area:"CA"}),s.selectAreaCode(e)}}}),[a,n,c,s,t]);const A=(0,y.useCallback)((e=>{var t;_&&!(null===(t=null==i?void 0:i.current)||void 0===t?void 0:t.contains(e.target))&&T()}),[_,T]);(0,y.useEffect)((()=>(window.addEventListener("mousedown",A),()=>{window.removeEventListener("mousedown",A)})),[s,A]);const I=(0,y.useCallback)((e=>{h({phone:e.target.value})}),[h]),v=(0,y.useCallback)((()=>{g(!0)}),[]),C=(0,y.useCallback)((()=>{g(!1)}),[]),f=(0,y.useCallback)((({code:e,area:t})=>{S({code:e,area:t})}),[S]),N=Boolean((d||e)&&!E);return(0,o.jsxs)(bc,{children:[(0,o.jsxs)(Dc,Object.assign({errState:N},{children:[(0,o.jsxs)(Mc,Object.assign({ref:i},{children:[(0,o.jsxs)(xc,Object.assign({onClick:T},{children:[(0,o.jsxs)(wc,{children:[l," +",c]},void 0),(0,o.jsx)(sd.Z,{style:{transform:_?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"}},void 0)]}),void 0),_&&(0,o.jsx)(Ad,{matchSearchArea:m,filterCountryList:t,onSelected:f,currentSelectCode:c,searchText:u},void 0)]}),void 0),(0,o.jsx)(Pc,{value:p,border:!1,errState:N,placeholder:O("phone_number"),onChange:I,onFocus:v,onBlur:C,name:"mobile",autocomplete:"tel-national"},void 0)]}),void 0),N&&(0,o.jsx)(hc,{text:O(d||e||""),type:"error"},void 0)]},void 0)})),vd=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[i]=(0,K.b7)($s),{phoneErrorMsg:n,mobile:a,phone:r}=i,[{sendCodeLoading:s,codeFormatError:l,code:c},{sendPhoneCodeForResetPwd:d}]=(0,K.b7)(Qs),[{loginLoading:_},{changePwdByMobile:u}]=(0,K.b7)(cl),{password:p,lengthValid:m,contentValid:E}=(0,K.mp)(_c),g=Ec(),h=(0,y.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit(),u({password:p,mobile:a,phoneCode:c})}),[t,u,p,a,c]),T=(0,y.useCallback)((()=>{d({mobile:a})}),[a,d]),S=!(a&&p&&c&&E&&m&&!n&&!l);return(0,o.jsxs)(Wc,Object.assign({onSubmit:h},{children:[(0,o.jsx)($c,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(qc,{children:[e("setting_bind_phone_input_title"),(0,o.jsx)(td,{text:e("forget_password_switch_email"),path:V.gY.loginForgetEmailPassword,replace:!0},void 0)]},void 0),(0,o.jsx)(Id,{},void 0),(0,o.jsx)(Hc,{disabled:Boolean(n)||!r,codeFromNumber:a,loading:s,onClickSendCode:T},void 0),(0,o.jsx)(Kc,{loginError:Boolean(g)},void 0),(0,o.jsx)(hc,{text:e(g),type:"error"},void 0),(0,o.jsx)(zc,Object.assign({buttonTheme:"primary",size:"largeNew",type:"submit",disabled:S,loading:_},{children:e("Login")}),void 0)]}),void 0)},yd=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[{loginLoading:i},{handlePasswordLogin:n}]=(0,K.b7)(cl),{password:a,hasInvalid:r}=(0,K.mp)(_c),[s,l]=(0,y.useState)(""),c=Ec([s]),d=(0,y.useCallback)((()=>{const e=zs(s)?s:void 0;t.setPlatform(e?"email":"handle"),t.loginSubmit(),n({username:s,password:a,email:e})}),[n,t,a,s]),_=(0,y.useCallback)((e=>{l(e.target.value)}),[]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:d},{children:[(0,o.jsx)($c,{children:e("Login")},void 0),(0,o.jsxs)(qc,{children:[e("Email or Username")," ",(0,o.jsx)(td,{text:e("common_login_switch_phone"),path:V.gY.loginPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(Lc,{style:{marginBottom:"9px"},placeholder:e("Email or Username"),onChange:_,name:"username"},void 0),(0,o.jsx)(Kc,{create:!1,loginError:Boolean(c)},void 0),c&&(0,o.jsx)(hc,{text:e(c),type:"error"},void 0),(0,o.jsx)("div",Object.assign({style:{marginTop:"9px"}},{children:(0,o.jsx)(td,{text:e("forget_password"),path:V.gY.loginForgetEmailPassword},void 0)}),void 0),(0,o.jsx)(zc,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew",disabled:!s||!a||r,loading:i},{children:e("Login")}),void 0)]}),void 0)},Cd=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendPhoneCodeForLogin:r,sendPhoneCodeForVerify:s}]=(0,K.b7)(Qs),[{phoneNotRegistered:l,loginLoading:c},{handleSmsLogin:d,handleSmsVerify:_}]=(0,K.b7)(cl),{registerPhone:u}=(0,K.qj)(ll),{isSecurityVerification:p}=xl((()=>["isSecurityVerification"]),[]),[m]=(0,K.b7)($s),{mobile:E,phoneErrorMsg:g}=m,h=E&&n&&!g&&!a,T=Ec(),S=(0,y.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit();const e={mobile:E,phoneCode:n,login_only:!0};p?_(e):d(e)}),[d,_,p,t,E,n]),O=(0,y.useCallback)((()=>{p?s({mobile:E}):r({mobile:E})}),[p,E,r,s]),A=(0,y.useCallback)((()=>{u({})}),[u]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:S},{children:[(0,o.jsx)($c,{children:e("Login")},void 0),(0,o.jsxs)(qc,{children:[e("phone")," ",(0,o.jsx)(td,{text:e("common_login_switch_email"),path:V.gY.loginEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Id,{},void 0),(0,o.jsx)(Hc,{disabled:Boolean(g)||!E,codeFromNumber:E,loading:i,errorMsg:T,onClickSendCode:O},void 0),(0,o.jsx)(td,{text:e("login_option_password"),path:V.gY.loginPhonePassword},void 0),(0,o.jsx)(zc,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew",disabled:!h,loading:c},{children:e("Login")}),void 0),l&&(0,o.jsxs)(Zc,{children:[(0,o.jsx)(Qc,{children:e("common_login_sms_unregistered_pc_1")},void 0),(0,o.jsx)(Qc,Object.assign({link:!0,onClick:A},{children:e("common_login_sms_unregistered_pc_2")}),void 0)]},void 0)]}),void 0)},fd=(0,gs.Z)("div",{target:"e1c067ot0"})({display:"flex",alignItems:"center",marginTop:"9px"},"label:DivLinksContainer;"),Nd=(0,gs.Z)("span",{target:"e1c067ot1"})((({theme:e})=>({width:"1px",height:"12px",margin:"0 16px",background:e.colors.LineSecondary})),"label:SpanSplitLine;"),Rd=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[{loginLoading:i},{handlePasswordLogin:n}]=(0,K.b7)(cl),{phoneErrorMsg:a,phone:r,areaCode:s}=(0,K.mp)($s),{password:l,hasInvalid:c}=(0,K.mp)(_c),d=Ec(),_=(0,y.useCallback)((()=>{const e=`+${s} ${r}`;t.setPlatform("phone"),t.loginSubmit(),n({account:e,password:l,mobile:e})}),[s,n,t,l,r]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:_},{children:[(0,o.jsx)($c,{children:e("Login")},void 0),(0,o.jsxs)(qc,{children:[e("phone")," ",(0,o.jsx)(td,{text:e("common_login_switch_email"),path:V.gY.loginEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Id,{},void 0),(0,o.jsx)(Kc,{create:!1,loginError:Boolean(d)},void 0),d&&(0,o.jsx)(hc,{text:e(d),type:"error"},void 0),(0,o.jsxs)(fd,{children:[(0,o.jsx)(td,{text:e("forget_password"),path:V.gY.loginForgetPhonePassword},void 0),(0,o.jsx)(Nd,{},void 0),(0,o.jsx)(td,{text:e("common_login_password_button"),path:V.gY.loginPhone},void 0)]},void 0),(0,o.jsx)(zc,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:Boolean(a)||!r||!l||c,loading:i,type:"submit"},{children:e("Login")}),void 0)]}),void 0)};var Ld,bd=i(81426),Pd=i(38743),Dd=i(54393),Md=i.n(Dd),xd=i(95731),wd=i(33874);!function(e){e.Init="init",e.GetCode="new",e.Scanned="scanned",e.Confirmed="confirmed",e.Expired="expired",e.Refused="refuse",e.Error="error"}(Ld||(Ld={}));let Ud=class extends le.D{constructor(e,t,i){super(),this.service=e,this.fetch=t,this.loginSlardar=i,this.defaultState={status:"init",inQrcodePage:!1}}setStatus(e,t){e.status=t}setInQRCodePage(e,t){e.inQrcodePage=t,t&&(e.status="init")}setGetQrcodeResutl(e,t){const{qrCodeUrl:i,clientSecret:o,token:n}=t;e.token=n,e.clientSecret=o,e.qrCodeUrl=i,e.status="new"}getQrCodeUrl(e){return e.pipe((0,hi.z)((()=>this.service.getQrCodeUrl({next:"https://www.tiktok.com"}).pipe((0,hi.z)((e=>{const{token:t,qrcode_index_url:i}=e,o=function(e=8){const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let i="";for(let o=0;o<e;o++)i+=t[Math.ceil(35*Math.random())];return i}(),n=al().parse(decodeURIComponent(i).split("?")[1]),{next_url:a}=n,r=(0,p.__rest)(n,["next_url"]),s=`${a}?client_secret=${o}`,l=`${decodeURIComponent(i).split("?")[0]}?${al().stringify(Object.assign(Object.assign({},r),{next_url:s}))}`;return this.shortenQrUrl(l).pipe((0,pe.U)((e=>{var i;return this.getActions().setGetQrcodeResutl({token:t,clientSecret:o,qrCodeUrl:null!==(i=e.short_url)&&void 0!==i?i:l})})))}))))))}checkQrConnect(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([{ttpConfig:e,oldStatus:t},{token:i="",clientSecret:o=""}])=>this.checkQrcodeRequest({token:i,clientSecret:o,ttpConfig:e,oldStatus:t}).pipe((0,pe.U)((e=>{const{status:t,error_code:i,description:o}=e;return i?(Ht.h.open({content:o,duration:3,widthType:"half"}),this.getActions().setStatus("error")):this.getActions().setStatus(t)}))))))}shortenQrUrl(e){return this.fetch.post("https://www.tiktok.com/shorten/",{body:(0,nl.stringify)({belong:"tiktok-webapp-qrcode",persist:0,expired_time:3600,targets:e})}).pipe((0,pe.U)((e=>{var t;return null!==(t=e.data[0])&&void 0!==t?t:{status:"failed",short_url:void 0}})),(0,Si.K)((e=>(this.loginSlardar.QRCodeShortenFail({code:`${e.code}`}),(0,Ti.of)({status:"failed",short_url:void 0})))))}checkQrcodeRequest(e){const{token:t,clientSecret:i,ttpConfig:o,oldStatus:n}=e,{open:a,syncSeverList:r}=o||{},s=a?r:[{name:"gloable",domain:""}];return(0,Xs.D)(s.map((e=>this.service.checkQrconnect({token:null!=t?t:"",next:"https://www.tiktok.com",baseURL:e.domain})))).pipe((0,hi.z)((e=>{const t=e.find((e=>e.client_secret===i));for(const o of e){const{status:e,client_secret:a,error_code:r,description:s}=t||o;if(this.state.inQrcodePage&&("init"===e||"new"===e||e===n))throw new Error("user not scanned, need check agin");return a===i?(0,Ti.of)({status:e}):r?(0,Ti.of)({error_code:r,description:s}):(0,Ti.of)({status:e})}return(0,Ti.of)(this.noop())})),(0,xd.a)((e=>e.pipe((0,wd.j)((()=>(0,mr.H)(800)))))))}};var kd;function Fd(){return Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Fd.apply(this,arguments)}(0,p.__decorate)([(0,ce.cQ)(),(0,p.__metadata)("design:type",_e.y)],Ud.prototype,"dispose$",void 0),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],Ud.prototype,"setStatus",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],Ud.prototype,"setInQRCodePage",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],Ud.prototype,"setGetQrcodeResutl",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ud.prototype,"getQrCodeUrl",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Ud.prototype,"checkQrConnect",null),Ud=(0,p.__decorate)([(0,de.Y)("QRCodeModule"),(0,p.__metadata)("design:paramtypes",[Rs.Q,ge.r,Ul.M])],Ud);const Bd=function(e){return y.createElement("svg",Fd({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),kd||(kd=y.createElement("path",{fill:"#FACE15",fillRule:"evenodd",d:"M20.552 6.917c1.547-2.63 5.35-2.63 6.896 0L43.95 34.972C45.519 37.64 43.597 41 40.503 41H7.497c-3.094 0-5.016-3.361-3.448-6.028L20.552 6.917zM24 8.945L7.497 37h33.006L24 8.945zM22 18a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1h-2a1 1 0 01-1-1v-9zm2 17a2.5 2.5 0 100-5 2.5 2.5 0 000 5z",clipRule:"evenodd"})))};var Gd;function jd(){return jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},jd.apply(this,arguments)}const Hd=function(e){return y.createElement("svg",jd({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Gd||(Gd=y.createElement("path",{fill:"#0BE09B",fillRule:"evenodd",d:"M42.692 12.722a1 1 0 01-.03 1.414L18.886 36.944a2 2 0 01-2.8-.03L5.294 26.121a1 1 0 010-1.414l1.414-1.414a1 1 0 011.414 0l9.408 9.408 22.365-21.452a1 1 0 011.414.03l1.384 1.443z",clipRule:"evenodd"})))};var Wd=i(77523),Vd=i(53995),Yd=i(45253),Kd=i(93483);const zd=(0,gs.Z)("div",{target:"e12kzezm0"})({width:"100%",height:"160px",textAlign:"center",position:"relative"},"label:DivCodeImage;"),$d=(0,gs.Z)("img",{target:"e12kzezm1"})({width:"160px",height:"100%",margin:"auto"},"label:ImgCode;"),qd=(0,gs.Z)("div",{target:"e12kzezm2"})((({clickAble:e,theme:t})=>[(0,re.YJ)({direction:t.direction,start:"calc(50% - 80px)"}),{position:"absolute",display:"flex",flexDirection:"column",width:"160px",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, 0.68)",borderRadius:"10px",padding:"0 24px",justifyContent:"center",alignItems:"center",cursor:e?"pointer":"unset"}]),"label:DivCodeMask;"),Zd=(0,gs.Z)("span",{target:"e12kzezm3"})({fontSize:"36px",height:"36px"},"label:SpanCodeTip;"),Qd=(0,gs.Z)("p",{target:"e12kzezm4"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima"}),{color:"rgba(255, 255, 255, .9)",fontWeight:600,lineHeight:"20px",fontSize:"14px"}]),"label:PCodeTip;"),Xd=(0,gs.Z)("div",{target:"e12kzezm5"})({width:"100%",textAlign:"center",marginTop:"16px"},"label:DivStepContainer;"),Jd=(0,gs.Z)("p",{target:"e12kzezm6"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{width:"276px",fontSize:"14px",lineHeight:"20px",margin:"0 auto 4px"}]),"label:PStep;"),e_=(0,gs.Z)("div",{target:"e12kzezm7"})({display:"flex",flexDirection:"column",position:"relative",marginTop:"20px"},"label:DivInstruction;"),t_=(0,gs.Z)("div",{target:"e12kzezm8"})({position:"absolute",width:"100%",flex:"auto",display:"none",justifyContent:"center",alignItems:"center",backgroundColor:"#fff",zIndex:10,transform:"translateY(-100%)",transition:"opacity 200ms cubic-bezier(0.65, 0, 0.35, 1)"},"label:DivTipImageMask;"),i_=(0,gs.Z)("img",{target:"e12kzezm9"})({width:"180px",height:"289px"},"label:ImgTip;"),o_=(0,gs.Z)("p",{target:"e12kzezm10"})((({theme:e})=>[(0,re.GI)({theme:e,color:"Primary",fontFamily:"Proxima"}),{fontWeight:600,fontSize:"16px",lineHeight:"22px",cursor:"pointer",margin:"24px 0 4px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",":hover":{"& + div":{display:"flex"}}}]),"label:PInstructionTip;"),n_=()=>{var e,t,i;const n=(0,No.Q)("WebApp_Login"),a=(0,X.fz)(ks),{ttpConfig:r}=xl((()=>["ttpConfig"]),[]),{$appId:s,$language:l}=null!==(e=(0,te.L)((()=>["$appId","$language"]),[]))&&void 0!==e?e:{},[{qrCodeUrl:c,status:d},{getQrCodeUrl:_,checkQrConnect:u,setInQRCodePage:p}]=(0,K.b7)(Ud),{handleLoginResult:m}=(0,K.qj)(cl),E=n("common_login_qrcode_copy",{scan_button:"{scan}",Discover:"{discover}"}).split("\\n"),[g,h=""]=(null!==(t=E[0])&&void 0!==t?t:"").split("{discover}"),[T,S=""]=(null!==(i=E[1])&&void 0!==i?i:"").split("{scan}"),O="ar"===l||"ur"===l||"he-IL"===l,A=(0,y.useCallback)((()=>{_()}),[_]);(0,y.useEffect)((()=>(p(!0),A(),()=>{p(!1)})),[]),(0,y.useEffect)((()=>{"scanned"===d&&(a.scanQrCode(),u({ttpConfig:r,oldStatus:"scanned"})),"confirmed"===d&&(a.setPlatform("QRcode"),m({error_code:0}))}),[u,m,a,d,r]),(0,y.useEffect)((()=>{c&&u({ttpConfig:r})}),[u,c,r]);const I="new"!==d;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($c,{children:n("common_login_qrcode_title")},void 0),(0,o.jsxs)(zd,{children:[c?(0,o.jsx)(Md(),{size:160,value:c,style:{borderRadius:I?"10px":"unset"}},void 0):(0,o.jsx)($d,{src:1233===s?Yd:Kd,alt:"qrcode"},void 0),["scanned","confirmed"].includes(d)&&(0,o.jsxs)(qd,{children:[(0,o.jsx)(Zd,{children:(0,o.jsx)(Hd,{},void 0)},void 0),(0,o.jsx)(Qd,{children:n("common_login_qrcode_status_scanned")},void 0)]},void 0),["expired","refuse","error"].includes(d)&&(0,o.jsxs)(qd,Object.assign({onClick:A,clickAble:!0},{children:[(0,o.jsx)(Zd,{children:(0,o.jsx)(Bd,{},void 0)},void 0),(0,o.jsx)(Qd,{children:n("expired"===d?"common_login_qrcode_status_expired":"common_login_qrcode_status_failed_2")},void 0)]}),void 0),"init"===d&&(0,o.jsx)(qd,{children:(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0)},void 0)]},void 0),(0,o.jsxs)(Xd,{children:[(0,o.jsxs)(Jd,{children:[g,(0,o.jsx)("b",{children:n("common_login_qrcode_discover")},void 0),h]},void 0),(0,o.jsxs)(Jd,{children:[T,(0,o.jsx)(bd.Z,{},void 0),S]},void 0),(0,o.jsx)(Jd,{children:E[2]},void 0)]},void 0),(0,o.jsxs)(e_,{children:[(0,o.jsxs)(o_,{children:[(0,o.jsx)(Pd.Z,{},void 0),(0,o.jsx)("span",Object.assign({style:{marginInlineStart:"4px"}},{children:n("common_login_qrcode_checkinstruction")}),void 0)]},void 0),(0,o.jsx)(t_,{children:(0,o.jsx)(i_,{src:O?Wd:Vd},void 0)},void 0)]},void 0),(0,o.jsx)(Ts,{},void 0)]},void 0)},a_=(0,gs.Z)("div",{target:"e1d7z6y00"})((({theme:e})=>[{color:e.colors.TextPrimary,border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",backgroundColor:e.colors.BGInput,paddingInlineStart:"12px",lineHeight:"44px",outline:"none",fontSize:"16px",height:"44px",width:"100%"}]),"label:DivEmailContainer;"),r_=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[{loginLoading:i},{handlePasswordLogin:n}]=(0,K.b7)(cl),{email:a}=(0,K.mp)(Zs),[r,s]=(0,y.useState)(""),l=Ec([r]),c=(0,y.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),n({email:a,password:r,username:a})}),[a,n,t,r]),d=(0,y.useCallback)((e=>{s(e.target.value)}),[]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:c},{children:[(0,o.jsx)($c,{children:e("Login")},void 0),(0,o.jsx)(qc,{children:e("common_registration_email_existing_title")},void 0),(0,o.jsx)(a_,{children:a},void 0),(0,o.jsx)(Lc,{placeholder:e("Password"),onChange:d,style:{marginTop:"9px"},password:!0,border:!0,errorState:Boolean(l)},void 0),(0,o.jsx)(hc,{text:e(l||"common_registration_email_existing_text"),type:l?"error":"default"},void 0),(0,o.jsx)("div",Object.assign({style:{marginTop:"9px"}},{children:(0,o.jsx)(td,{text:e("forget_password"),path:V.gY.loginForgetEmailPassword},void 0)}),void 0),(0,o.jsx)(zc,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:!r,loading:i,type:"submit"},{children:e("Login")}),void 0)]}),void 0)},s_=(0,gs.Z)("div",{target:"e1tcmjut1"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),{fontSize:"33px"}]),"label:DivTitleContainer;"),l_=(0,gs.Z)("p",{target:"e1tcmjut2"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"16px",lineHeight:"22px",margin:"16px 0"}]),"label:PDescriptionContainer;"),c_=(0,gs.Z)("span",{target:"e1tcmjut4"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{display:"inline-block",fontSize:"14px",lineHeight:"17px",margin:"12px 0",paddingInlineEnd:"12px","& + &":{paddingInlineStart:"12px",position:"relative","&::before":{content:'""',position:"absolute",left:"rtl"===e.direction?"unset":"0",right:"rtl"===e.direction?"0":"unset",height:"12px",width:"1px",top:"2px",background:e.colors.LineSecondary}}}]),"label:SpanOptionsText;");var d_=i(28931);const __=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),[{verifyWays:t,type:i},{setTwoStepType:n}]=(0,K.b7)(mc),a=(0,y.useCallback)((e=>()=>{n(e)}),[n]);return(0,o.jsxs)(o.Fragment,{children:[t&&Object.keys(t).filter((e=>e!==i)).map((t=>{const i="email_verify"===t?"use email instead":"pwd_verify"===t?"use password instead":"use SMS instead",n=`/login/2sv/${uc[t]}`;return(0,o.jsx)(c_,Object.assign({onClick:a(t)},{children:(0,o.jsx)(d_.rU,Object.assign({to:n},{children:e(i)}),void 0)}),t)})),"pwd_verify"===i&&1===Object.keys(t).length&&(0,o.jsx)(c_,{children:(0,o.jsx)(d_.rU,Object.assign({to:V.gY.loginForgetPhonePassword},{children:e("Forgot password?")}),void 0)},void 0)]},void 0)})),u_=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendEmailCodeForReset:r,sendEmailCodeForLogin:s,sendEmailCodeForVerify:l}]=(0,K.b7)(Qs),[{verifyWays:c,not_login_ticket:d,verify_ticket:_,password:u="",loginLoading:p},{handleCodeVerify:m}]=(0,K.b7)(mc),{changePwdByEmail:E}=(0,K.qj)(cl),g=Ec(),h=(0,y.useCallback)((()=>{t.twoStepSubmit({verification_method:"email",forReset:Boolean(u)}),u?E({not_login_ticket:d,verify_ticket:_,emailCode:n,password:u,email:""}):m({code:n,not_login_ticket:d,verify_ticket:_})}),[E,n,m,t,d,u,_]),T=(0,y.useCallback)((()=>{u?r({not_login_ticket:d,verify_ticket:_}):d?s({not_login_ticket:d,verify_ticket:_}):l({verify_ticket:_})}),[u,r,d,s,_,l]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:h},{children:[(0,o.jsx)(l_,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(l_,{children:e("common_verify_email_text",{email:null==c?void 0:c.email_verify})},void 0),(0,o.jsx)(Hc,{autoSendFirstTime:!0,email:!0,codeFromNumber:_,loading:i,onClickSendCode:T,errorMsg:g},void 0),(0,o.jsx)(__,{},void 0),(0,o.jsx)(Et.W,Object.assign({disabled:Boolean(a)||!n,buttonTheme:"primary",size:"largeNew",style:{width:"100%"},loading:p,type:"submit"},{children:e("login_next")}),void 0)]}),void 0)},p_=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),{password:i,hasInvalid:n}=(0,K.mp)(_c),[{verify_ticket:a,loginLoading:r},{handlePasswordVerify:s}]=(0,K.b7)(mc),l=Ec(),c=(0,y.useCallback)((()=>{t.twoStepSubmit({verification_method:"password",forReset:!1}),s({password:i,verify_ticket:a})}),[s,t,i,a]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:c},{children:[(0,o.jsx)(l_,{children:e("common_verify_password_text")},void 0),(0,o.jsx)(Kc,{create:!1,loginError:Boolean(l)},void 0),(0,o.jsx)(__,{},void 0),(0,o.jsx)(hc,{text:e(l),type:"error"},void 0),(0,o.jsx)("div",{style:{height:"16px"}},void 0),(0,o.jsx)(Et.W,Object.assign({disabled:Boolean(n)||!i,buttonTheme:"primary",size:"largeNew",style:{width:"100%"},loading:r,type:"submit"},{children:e("login_next")}),void 0)]}),void 0)},m_=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendPhoneCodeForTwoStep:r,sendPhoneCodeForResetPwd:s}]=(0,K.b7)(Qs),[{verifyWays:l,verify_ticket:c,not_login_ticket:d,password:_,loginLoading:u,accountQuery:p},{handleCodeVerify:m,handleSmsCodeVerifyReset:E}]=(0,K.b7)(mc),g=Ec(),h=(0,y.useCallback)((()=>{const e={verify_ticket:c,not_login_ticket:d,mobile:null==p?void 0:p.mobile};_?s(e):r(e)}),[null==p?void 0:p.mobile,d,_,s,r,c]),T=(0,y.useCallback)((()=>{t.twoStepSubmit({verification_method:"phone",forReset:Boolean(_)}),_?E({not_login_ticket:d,verify_ticket:c,code:n,password:_}):m({verify_ticket:c,code:n,not_login_ticket:d})}),[n,m,E,t,d,_,c]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:T},{children:[(0,o.jsx)(l_,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(l_,{children:e("common_verify_sms_text",{mobile:null==l?void 0:l.mobile_sms_verify})},void 0),(0,o.jsx)(Hc,{autoSendFirstTime:!0,codeFromNumber:c,loading:i,onClickSendCode:h,errorMsg:g},void 0),(0,o.jsx)(__,{},void 0),(0,o.jsx)(Et.W,Object.assign({disabled:Boolean(a)||!n,buttonTheme:"primary",size:"largeNew",style:{width:"100%"},type:"submit",loading:u},{children:e("login_next")}),void 0)]}),void 0)},E_=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),i=(0,f.k6)(),{isTwoStep:n,verifyWays:a,password:r}=(0,K.mp)(mc),{type:s}=(0,f.UO)(),l=pc[s];return(0,y.useEffect)((()=>{l&&(null==a?void 0:a[l])||i.replace(V.gY.loginHome),t.twoStepNotify({verification_method:s,forReset:Boolean(r)})}),[i,t,r,s,a,l]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s_,{children:e(n?"security_step_verification":"common_verify_title")},void 0),s===uc.pwd_verify?(0,o.jsx)(p_,{},void 0):s===uc.email_verify?(0,o.jsx)(u_,{},void 0):(0,o.jsx)(m_,{},void 0)]},void 0)},g_=(0,y.memo)((()=>{(()=>{const e=(0,X.fz)(ks);(0,y.useEffect)((()=>{e.loginNotify()}),[e])})(),(0,El.q)({pid:"login"});const{forceResetResponse:e}=(0,K.mp)(cl),{$isMobile:t}=(0,q.m7)((0,te.L)((()=>["$isMobile"]),[]));return(0,o.jsxs)(Xl,Object.assign({isMobile:t},{children:[(0,o.jsx)(nc,{page:"login"},void 0),(0,o.jsxs)(f.rs,{children:[(0,o.jsx)(f.AW,{path:V.gY.loginHome,component:tc,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginQRcode,component:n_,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginPhone,component:Cd,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginPhonePassword,component:Rd,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginEmail,component:yd,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginWithSignedEmail,component:r_,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginTwoStepVerify,component:E_,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginForgetEmailPassword,component:e?Jc:rd,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginForgetPhonePassword,component:e?Jc:vd,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.loginDownloadApp,component:dc,exact:!0},void 0),(0,o.jsx)(f.AW,{path:"*",component:tc},void 0)]},void 0)]}),void 0)}));var h_=i(64785);const T_=(0,gs.Z)("div",{target:"e6r3pim0"})({marginTop:"110px"},"label:DivContainer;"),S_=(0,gs.Z)("i",{target:"e6r3pim1"})({width:"72px",height:"72px"},"label:Iicon;"),O_=(0,gs.Z)("div",{target:"e6r3pim2"})((({theme:e})=>[(0,re.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:"24px",lineHeight:"28px",marginBottom:"24px"}]),"label:DivTitle;"),A_=(0,gs.Z)("div",{target:"e6r3pim3"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:"16px",textAlign:"center",lineHeight:"22px",marginBottom:"12px"}]),"label:DivDescription;"),I_=(0,gs.Z)("span",{target:"e6r3pim4"})((({theme:e})=>[{fontSize:"16px",lineHeight:"22px",color:e.colors.Primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}]),"label:SpanLinkText;"),v_=()=>{const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),i=(0,y.useCallback)((()=>{t.privateNotifyClick({result:"ok"})}),[t]),n=(0,y.useCallback)((()=>{t.privateNotifyClick({result:"learn_more"})}),[t]);return(0,y.useEffect)((()=>{t.privateNotifyShow()}),[t]),(0,o.jsxs)(T_,{children:[(0,o.jsx)(S_,{},void 0),(0,o.jsx)(O_,{children:e("title_private_on")},void 0),(0,o.jsx)(A_,{children:e("descrip_private_on_signup")},void 0),(0,o.jsx)(d_.rU,Object.assign({to:"https://support.tiktok.com/en/account-and-privacy/account-privacy-settings/making-your-account-public-or-private"},{children:(0,o.jsxs)(I_,Object.assign({onClick:n},{children:[e("link_learn_more_private_accounts_signup")," >"]}),void 0)}),void 0),(0,o.jsx)(Et.W,Object.assign({size:"largeNew",buttonTheme:"primary",onClick:i,bottonTheme:"text",style:{marginTop:"16px",width:"100%"}},{children:e("button_signup_private_on")}),void 0)]},void 0)},y_=(0,gs.Z)("div",{target:"e7y6k0x0"})({marginTop:"110px"},"label:DivContainer;"),C_=(0,gs.Z)("div",{target:"e7y6k0x1"})((({theme:e})=>[(0,re.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:"32px",lineHeight:"38px",marginBottom:"16px"}]),"label:DivTitle;"),f_=(0,gs.Z)("div",{target:"e7y6k0x2"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:"18px",textAlign:"center",lineHeight:"25px",marginBottom:"16px"}]),"label:DivDescription;"),N_=()=>{const e=(0,No.Q)("WebApp_Login");return(0,o.jsxs)(y_,{children:[(0,o.jsx)(C_,{children:e("mus_agegate_error_ftc_title")},void 0),(0,o.jsx)(f_,{children:e("mus_agegate_error_ftc_desc")},void 0),(0,o.jsx)(Il,Object.assign({path:V.gY.signupCreateAccount,underline:!1},{children:(0,o.jsx)(Et.W,Object.assign({size:"largeNew",buttonTheme:"primary",bottonTheme:"text",style:{marginTop:"16px",width:"100%"}},{children:e("Continue")}),void 0)}),void 0)]},void 0)},R_=(0,gs.Z)("div",{target:"e14eam340"})({width:"32px",position:"relative"},"label:DivCheckboxWrapper;"),L_=(0,gs.Z)("input",{target:"e14eam341"})({width:"24px",height:"24px",visibility:"hidden"},"label:InputCheckbox;"),b_=(0,gs.Z)("i",{target:"e14eam342"})((({theme:e,checked:t,circle:i=!0})=>[(0,re.YJ)({direction:e.direction,start:"0"}),{position:"absolute",top:0,width:i?"24px":"22px",height:i?"24px":"22px",borderRadius:i?"50%":"unset",border:"1px solid",borderColor:t?e.colors.Primary:e.colors.LineInverse,marginInlineEnd:"8px",display:"inline-block",background:t?e.colors.Primary:e.colors.BGPrimary,transition:"all .1s",padding:"3px 0",textAlign:"center",boxSizing:"border-box"}]),"label:ICheckboxIcon;"),P_=({id:e,value:t,checked:i,onChange:n,circle:a})=>{const r=(0,y.useCallback)((e=>{n(e.target.checked,t)}),[n,t]);return(0,o.jsxs)(R_,{children:[(0,o.jsx)(L_,{type:"checkbox",value:t,id:e,onClick:r},void 0),(0,o.jsx)("label",Object.assign({htmlFor:e},{children:(0,o.jsx)(b_,Object.assign({checked:i,circle:a},{children:(0,o.jsx)(ld.Z,{fill:"white",fontSize:"14px"},void 0)}),void 0)}),void 0)]},void 0)},D_=(0,gs.Z)("h3",{target:"eb49p770"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),{fontSize:"32px",lineHeight:"38px",marginBottom:"32px",textAlign:"center",marginTop:"64px"}]),"label:H3Title;"),M_=(0,gs.Z)("div",{target:"eb49p771"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),x_=(0,gs.Z)("p",{target:"eb49p772"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"15px",lineHeight:"24px",display:"inline"}]),"label:PCheckboxText;"),w_=(0,gs.Z)("h5",{target:"eb49p773"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"15px",lineHeight:"24px",display:"inline",margin:0}]),"label:H5CheckboxTitle;"),U_=(0,gs.Z)("p",{target:"eb49p774"})((({theme:e})=>[{fontSize:"12px",lineHeight:"18px",maxHeight:"140px",overflowY:"auto",wordBreak:"break-word",padding:"12px",background:e.colors.BGPlaceholderDefault,color:e.colors.TextSecondary,borderRadius:"8px",marginBottom:"16px",marginTop:"12px",img:{maxWidth:"100%"},"h1, h2, h3, h4, h5, h6, p, ul, ol, li, strong, font, a":{fontSize:"12px !important",lineHeight:"15px !important",color:`${e.colors.TextSecondary} !important`,margin:0,padding:0},strong:{fontWeight:"normal"},"ul > li":{listStyleType:"disc"},a:{cursor:"pointer",textDecoration:"underline"}}]),"label:PPolicyContent;");var k_;!function(e){e.Terms="terms-of-service",e.Privacy="privacy-policy",e.Push="push-policy"}(k_||(k_={}));const F_=[{title:"common_registration_terms_and_conditions_decription_terms",value:"terms-of-service",content:""},{title:"common_registration_terms_and_conditions_decription_pp",value:"privacy-policy",content:""},{title:"register_page_marketing_push_title",value:"push-policy",content:"register_page_marketing_push_subtitle"}],B_=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),t=(0,f.k6)(),[{termsDomContent:i,privacyDomContent:n},{requestPolicyContent:a,setKrPolicySelection:r}]=(0,K.b7)(tl),[{fromNotRegisterLogin:s,thirdPlatformNotRegistered:l},{registerThirdPlatform:c,registerPhone:d}]=(0,K.b7)(ll),[_,u]=(0,y.useState)([]);(0,y.useEffect)((()=>{a({articleKeys:["terms-of-service","privacy-policy"]})}),[a]);const p=(0,y.useCallback)((e=>{u(e?["terms-of-service","privacy-policy","push-policy"]:[])}),[]),m=(0,y.useCallback)(((e,t)=>{const i=_.indexOf(t);-1===i?u([..._,t]):(_.splice(i,1),u([..._]))}),[_]);(0,y.useEffect)((()=>{r(_)}),[r,_]);const E=(0,y.useCallback)((()=>{"Third"===s&&l?c({chooseAgeGate:!0,platform:l.platform,profileKey:l.profileKey}):"Phone"===s?d({chooseAgeGate:!0}):t.push(V.gY.signupPhone)}),[s,t,d,c,l]),g=-1===_.indexOf("terms-of-service")||-1===_.indexOf("privacy-policy");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D_,{children:e("common_registration_terms_and_conditions_title")},void 0),(0,o.jsxs)(M_,{children:[(0,o.jsx)(P_,{checked:3===_.length,onChange:p,id:"signup-policy-all"},void 0),(0,o.jsx)(x_,{children:e("register_page_agree_all_kr")},void 0)]},void 0),F_.map((({title:t,value:a,content:r})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(M_,{children:[(0,o.jsx)(P_,{id:`signup-policy-${a}`,checked:-1!==_.indexOf(a),value:a,onChange:m},void 0),(0,o.jsx)(w_,{children:e(t)},void 0)]},`div-${a}`),"terms-of-service"===a?(0,o.jsx)(U_,{dangerouslySetInnerHTML:{__html:i}},`p-${a}`):"privacy-policy"===a?(0,o.jsx)(U_,{dangerouslySetInnerHTML:{__html:n}},`p-${a}`):(0,o.jsx)(U_,{children:e(r)},`p-${a}`)]},void 0))),(0,o.jsx)(Et.W,Object.assign({size:"largeNew",buttonTheme:"primary",disabled:g,onClick:E,bottonTheme:"text",style:{margin:"32px 0",width:"100%"}},{children:e("common_registration_terms_and_conditions_next")}),void 0)]},void 0)}));var G_=i(16789);const j_=(e=1)=>{let t=31;return 2===e?t=29:-1!==[4,6,9,11].indexOf(e)&&(t=30),Array(t).fill(0).map(((e,t)=>({value:t+1,key:`${t+1}`})))},H_=(0,gs.Z)("div",{target:"e1phcp2x0"})((({theme:e})=>({background:e.colors.BGInput,borderRadius:"4px",position:"relative","& + &":{marginInlineStart:"8px"},cursor:"pointer"})),"label:DivSelector;"),W_=(0,gs.Z)("div",{target:"e1phcp2x1"})((({hasValue:e,theme:t,error:i})=>({width:"120px",height:"44px",padding:"0 12px",display:"flex",justifyContent:"space-between",alignItems:"center",color:i?t.colors.Negative:e?t.colors.TextPrimary:t.colors.TextQuaternary,fontSize:"16px"})),"label:DivSelectLabel;"),V_=(0,gs.Z)(sd.Z,{target:"e1phcp2x2"})((({theme:e,up:t})=>({color:e.colors.TextPrimary,transform:t?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"})),"label:StyledArrowTriangleDownLargeFill;"),Y_=(0,gs.Z)(ld.Z,{target:"e1phcp2x3"})({width:"16px",height:"16px",marginInlineStart:"12px"},"label:StyledSelectIcon;"),K_=(0,gs.Z)("div",{target:"e1phcp2x4"})((({theme:e,show:t})=>[(0,re.YJ)({direction:e.direction,end:"0",start:"0"}),{width:"120px",maxHeight:"320px",overflow:"auto",position:"absolute",background:e.colors.BGPrimary,borderRadius:"4px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",top:"50px",zIndex:12,display:t?"block":"none",transition:"display .3s"}]),"label:DivOptionsWarpper;"),z_=(0,gs.Z)("div",{target:"e1phcp2x5"})((({theme:e,selected:t})=>({height:"34px",overflow:"auto",fontSize:"16px",padding:"0 12px",cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.TextPrimary,background:t?e.colors.BGView:"unset",":hover":{background:e.colors.BGView}})),"label:DivOption;"),$_=e=>{const t=(0,No.Q)("WebApp_Login"),{placeholder:i,options:n,selectItem:a,onClick:r,error:s}=e,{key:l,value:c}=null!=a?a:{},d=(0,y.useRef)(null),[_,u]=(0,y.useState)(!1),p=(0,y.useCallback)((e=>()=>{r(e),u(!1)}),[r]),m=(0,y.useCallback)((e=>{var t;_&&!(null===(t=null==d?void 0:d.current)||void 0===t?void 0:t.contains(e.target))&&u(!1)}),[_]);(0,y.useEffect)((()=>(window.addEventListener("mousedown",m),()=>{window.removeEventListener("mousedown",m)})),[m]);const E=(0,y.useCallback)((()=>{u(!_)}),[_]);return(0,o.jsxs)(H_,Object.assign({ref:d},{children:[(0,o.jsxs)(W_,Object.assign({onClick:E,hasValue:Boolean(l),error:s},{children:[t(null!=l?l:i),(0,o.jsx)(V_,{up:_},void 0)]}),void 0),(0,o.jsx)(K_,Object.assign({show:_},{children:n.map(((e,i)=>{var n;return(0,o.jsxs)(z_,Object.assign({selected:c===e.value,onClick:p(e)},{children:[t(`${null!==(n=e.key)&&void 0!==n?n:e.value}`),c===e.value&&(0,o.jsx)(Y_,{},void 0)]}),i)}))}),void 0)]}),void 0)},q_=(0,gs.Z)("div",{target:"e18rms3f0"})({display:"flex",marginBottom:"4px"},"label:DivAgeSelector;"),Z_=(0,gs.Z)("div",{target:"e18rms3f1"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"16px",lineHeight:"22px",marginBottom:"4px"}]),"label:DivTitle;"),Q_=(0,gs.Z)("div",{target:"e18rms3f2"})((({theme:e,type:t})=>[(0,re.GI)({theme:e,color:"error"===t?"Negative":"TextTertiary"}),{fontSize:"14px",lineHeight:"20px",marginBottom:"16px"}]),"label:DivDescription;"),X_=["Month_1","Month_2","Month_3","Month_4","Month_5","Month_6","Month_7","Month_8","Month_9","Month_10","Month_11","Month_12"].map(((e,t)=>({value:t+1,key:e}))),J_=(()=>{const e=new Date(1900,0,1,0,0,0),t=new Date((new Date).getFullYear()-1,11,31,0,0,0);return Array(t.getFullYear()-e.getFullYear()+1).fill(t.getFullYear()).map(((e,t)=>({value:e-t,key:""+(e-t)})))})(),eu=(0,y.memo)((function(){const e=(0,X.fz)(ks),[{ageErrorMsg:t,showErrorByToast:i,year:n,month:a,date:r},{setBirthday:s,setMonth:l,setYear:c,setDate:d}]=(0,K.b7)(ms),_=(0,No.Q)("WebApp_Login");(0,y.useEffect)((()=>{a&&n&&r&&s({year:n.value,month:a.value,date:r.value})}),[n,a,r,s]),(0,y.useEffect)((()=>{e.ageGateShow()}),[]);const u=(0,y.useCallback)((e=>{l(e)}),[l]),p=(0,y.useCallback)((e=>{d(e)}),[d]),m=(0,y.useCallback)((e=>{c(e)}),[c]),E=Boolean(t&&!i),g=E?t:"mus_age_gate_tips";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Z_,{children:_("common_registration_agegate_title")},void 0),(0,o.jsxs)(q_,{children:[(0,o.jsx)($_,{error:E,placeholder:"Month",selectItem:a,options:X_,onClick:u},void 0),(0,o.jsx)($_,{error:E,placeholder:"Day",selectItem:r,options:j_(null==a?void 0:a.value),onClick:p},void 0),(0,o.jsx)($_,{error:E,placeholder:"Year",selectItem:n,options:J_,onClick:m},void 0)]},void 0),(0,o.jsx)(Q_,Object.assign({type:E?"error":"default"},{children:_(null!=g?g:"")}),void 0)]},void 0)})),tu=(0,gs.Z)(Et.W,{target:"e1lzrlvq0"})([{width:"100%",marginTop:"16px"}],"label:StyledButton;"),iu=(0,gs.Z)("div",{target:"e1lzrlvq1"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),ou=(0,gs.Z)("div",{target:"e1lzrlvq2"})({width:"375px",margin:"auto"},"label:DivLoginContainer;"),nu=(0,gs.Z)("div",{target:"e1lzrlvq3"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),au=()=>{var e;const t=(0,No.Q)("WebApp_Login"),i=(0,f.k6)(),{$region:n}=(0,q.m7)((0,te.L)((()=>["$region"]),[])),[{fromNotRegisterLogin:a,thirdPlatformNotRegistered:r,signupLoading:s},{registerThirdPlatform:l,registerPhone:c}]=(0,K.b7)(ll),[{birthday:d,ageErrorMsg:_,showErrorByToast:u}]=(0,K.b7)(ms),p=(0,y.useCallback)((()=>{"KR"===n?i.push(V.gY.signupPolicyConfirm):"Third"===a&&r?l({chooseAgeGate:!0,platform:r.platform,profileKey:r.profileKey}):"Phone"===a?c({chooseAgeGate:!0}):i.push(V.gY.signupPhone)}),[n,a,i,c,l,r]);return(0,y.useEffect)((()=>{_&&u&&G_.Z.open({content:t(_),duration:3})}),[_,t,u]),(0,o.jsxs)(ou,{children:[(0,o.jsx)(iu,{children:t("common_login_panel_entry_2")},void 0),(0,o.jsx)(eu,{platform:null!==(e=null==r?void 0:r.platform)&&void 0!==e?e:"sms_verification"},void 0),(0,o.jsx)(tu,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:!d,loading:s,onClick:p},{children:t("common_registration_email_input_button")}),void 0)]},void 0)},ru=(0,gs.Z)("div",{target:"e1sbfgbz0"})((({theme:e})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.BGPrimary,borderBottom:"1px solid",borderColor:e.colors.LineReverse3,padding:"16px 0"})),"label:DivAgreement;"),su=(0,gs.Z)("p",{target:"e1sbfgbz1"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"12px",lineHeight:"15px",width:"375px",textAlign:"center"}]),"label:PText;"),lu=(0,gs.Z)("a",{target:"e1sbfgbz2"})((({theme:e})=>({color:e.colors.TextPrimary})),"label:ALink;"),cu=(0,y.memo)((function({key:e,show:t}){var i;const n=[V.gY.signupPhoneOrEmail,V.gY.signupPhone,V.gY.signupEmail,V.gY.signupHome],{pathname:a}=(0,f.TH)(),r=null!=t?t:n.find((e=>e===a.replace(/\/$/,""))),{$language:s}=null!==(i=(0,te.L)((()=>["$language"]),[]))&&void 0!==i?i:{},l=(0,No.Q)("WebApp_Login"),c=l(null!=e?e:"common_registration_email_input_agreement").split(/%\d*\$s/),d=l("common_registration_terms_use"),_=l("common_registration_privacy_policy");return r?(0,o.jsx)(ru,{children:(0,o.jsxs)(su,{children:[c[0]," ",(0,o.jsx)(lu,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/terms-of-use?lang=${s}`},{children:d}),void 0),c[1]," ",(0,o.jsx)(lu,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/privacy-policy?lang=${s}`},{children:_}),void 0),c[2]]},void 0)},void 0):null})),du=(0,gs.Z)("div",{target:"e2227pc0"})({marginBottom:"16px",position:"relative"},"label:DivUsernameContainer;"),_u=(0,gs.Z)("div",{target:"e2227pc1"})((({theme:{colors:e,direction:t}})=>[{position:"relative",marginTop:"11px",borderRadius:"4px",border:"1px solid",background:e.BGPrimary,borderColor:e.LineSecondary,zIndex:2,width:"100%",":before":{content:'""',height:"14px",position:"absolute",background:e.BGPrimary,width:"14px",top:"-7px",left:"rtl"===t?"unset":"14px",right:"rtl"===t?"14px":"unset",zIndex:-1,borderInlineEnd:`1px solid ${e.LineSecondary2}`,borderTop:`1px solid ${e.LineSecondary2}`,transform:"rtl"===t?"rotateZ(45deg)":"rotateZ(-45deg)"}}]),"label:DivSuggestListWrapper;"),uu=(0,gs.Z)("div",{target:"e2227pc2"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"13px",lineHeight:"17px",padding:"16px 12px 9px"}]),"label:DivLabel;"),pu=(0,gs.Z)("ul",{target:"e2227pc3"})({padding:"0",margin:"0",maxHeight:"200px",overflowY:"auto"},"label:UlList;"),mu=(0,gs.Z)("li",{target:"e2227pc4"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),Eu=(0,gs.Z)("div",{target:"e2227pc5"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",boxSizing:"border-box",paddingTop:"14.5px",width:"20px",height:"44px",top:0,div:{position:"absolute",width:"15px",height:"15px",margin:"2px",border:"2px solid rgba(22, 24, 35, .34)",borderRadius:"50%",animation:"lds-ring 1.2s cubic-bezier(.5, 0, .5, 1) infinite",borderColor:"rgba(22, 24, 35, .34) transparent transparent transparent",":nth-child(1)":{animationDelay:"-.45s"},":nth-child(2)":{animationDelay:"-.3s"},":nth-child(3)":{animationDelay:"-.15s"}},"@keyframes lds-ring":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}]),"label:DivNameCheckLoading;"),gu=(0,y.memo)((function({autoFocus:e,ftc:t,placeholder:i,tip:n}){var a,r,s,l;const[{usernameInfo:c,username:d,checkNameLoading:_},{validateUsername:u,validateFTCUsername:p,setUsername:m,setUsernameInfo:E}]=(0,K.b7)(ll),g=(0,No.Q)("WebApp_Login"),h=(0,y.useCallback)((e=>{const t=e.target.value;m(t)}),[m]),T=(0,y.useCallback)((e=>()=>{m(e)}),[m]);return(0,y.useEffect)((()=>{d?t?p({name:d}):u({name:d}):E(void 0)}),[t,E,d,p,u]),(0,o.jsxs)(du,{children:[(0,o.jsx)(Lc,{autoFocus:e,placeholder:g(null!=i?i:"common_registration_username_placeholder"),onChange:h,errorState:c&&!c.isValid&&!_,autoComplete:"off",name:"new-username",value:d,style:{marginTop:"16px"}},void 0),_&&(0,o.jsxs)(Eu,{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]},void 0),(0,o.jsx)(hc,{text:g(null!==(r=null!==(a=null==c?void 0:c.errorMsg)&&void 0!==a?a:n)&&void 0!==r?r:"common_registration_username_text"),type:(null==c?void 0:c.errorMsg)?"error":"default"},void 0),Boolean(!(null==c?void 0:c.isValid)&&(null===(s=null==c?void 0:c.suggestList)||void 0===s?void 0:s.length))&&(0,o.jsxs)(_u,{children:[(0,o.jsx)(uu,{children:g("common_registration_email_input_suggested")},void 0),(0,o.jsx)(pu,{children:null===(l=null==c?void 0:c.suggestList)||void 0===l?void 0:l.map(((e,t)=>(0,o.jsx)(mu,Object.assign({onClick:T(`${e}`)},{children:e}),t)))},void 0)]},void 0)]},void 0)})),hu=()=>{const e=(0,No.Q)("WebApp_Login"),[{usernameInfo:t,errorMsg:i,signupLoading:n},{usernameRegister:a}]=(0,K.b7)(ll),{registerLimited:r,ageGateAction:s}=(0,K.mp)(ms),l=(0,f.k6)(),{password:c,lengthValid:d,contentValid:_}=(0,K.mp)(_c),u=(0,y.useCallback)((()=>{a({password:c})}),[c,a]);(0,y.useEffect)((()=>{r||1===s||l.replace(V.gY.signupHome)}),[s,l,r]);const p=!1===(null==t?void 0:t.isValid)||!c||!_||!d;return(0,o.jsxs)(Wc,Object.assign({onSubmit:u},{children:[(0,o.jsx)(iu,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(nu,{children:e("common_login_sms_popup_option_1")},void 0),(0,o.jsx)(gu,{autoFocus:!0,placeholder:e("common_registration_username_placeholder"),tip:"mus_create_account_desc_pc",ftc:!0},void 0),(0,o.jsx)(Kc,{loginError:Boolean(i)},void 0),r&&(0,o.jsx)(cu,{show:!0},void 0),(0,o.jsx)(hc,{text:e(null!=i?i:""),type:"error",style:{marginBottom:"12px"}},void 0),(0,o.jsx)(tu,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:p,loading:n,type:"submit"},{children:e("common_notification_unlogged_button")}),void 0)]}),void 0)},Tu=(0,gs.Z)("div",{target:"e6sea5o0"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{height:"44px",lineHeight:"44px",textAlign:"center",fontSize:"16px",marginTop:"10px",width:"100%",cursor:"pointer"}]),"label:DivTextContainer;"),Su=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),{setLoginSuccess:t}=(0,K.qj)(cl),i=(0,y.useCallback)((()=>{t()}),[t]);return(0,o.jsx)(Tu,Object.assign({onClick:i},{children:e("common_registration_username_skip")}),void 0)})),Ou=()=>{const e=(0,No.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,K.mp)(ll),[{loginLoading:n},{setAccount:a}]=(0,K.b7)(cl),{password:r,lengthValid:s,contentValid:l}=(0,K.mp)(_c),c=(0,y.useCallback)((()=>{a({password:r,username:i})}),[a,r,i]),d=!((null==t?void 0:t.isValid)&&r&&l&&s);return(0,o.jsxs)(Wc,Object.assign({onSubmit:c},{children:[(0,o.jsx)(iu,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(nu,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Kc,{autoFocus:!0},void 0),(0,o.jsx)(nu,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(gu,{},void 0),(0,o.jsx)(tu,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:d,loading:n,type:"submit"},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(Su,{},void 0)]}),void 0)},Au=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,K.mp)(ll),[{loginLoading:n},{setAccount:a}]=(0,K.b7)(cl),r=(0,y.useCallback)((()=>{a({username:i})}),[a,i]),s=!(null==t?void 0:t.isValid);return(0,o.jsxs)(Wc,Object.assign({onSubmit:r},{children:[(0,o.jsx)(iu,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(nu,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(gu,{},void 0),(0,o.jsx)(tu,Object.assign({loading:n,buttonTheme:"primary",size:"largeNew",disabled:s,type:"submit"},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(Su,{},void 0)]}),void 0)}));var Iu=i(8355);const vu=(0,gs.Z)("div",{target:"e19c4o080"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),yu=(0,gs.Z)("p",{target:"e19c4o081"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"16px",display:"inline"}]),"label:PCheckboxText;"),Cu=(0,y.memo)((function(){const e=(0,No.Q)("WebApp_Login"),t=(0,X.fz)(ks),{emailConsent:i}=xl((()=>["emailConsent"]),[]),{$region:n}=(0,q.m7)((0,te.L)((()=>["$region"]),[])),[{emailConsent:a},{setEmailConsent:r}]=(0,K.b7)(ll),s=(0,y.useCallback)((e=>{t.clickEmailConsent({checked:e}),r(e)}),[t,r]);return(0,y.useEffect)((()=>{i&&(t.showEmailConsent(),["MY","PK","BD"].includes(n)&&r(!0))}),[n,i,t,r]),i?(0,o.jsxs)(vu,{children:[(0,o.jsx)(P_,{checked:Boolean(a),onChange:s,id:"email-consent",circle:!1},void 0),(0,o.jsx)(yu,{children:e("EDM_onboarding_email_consent_checkbox_list")},void 0)]},void 0):null})),fu=(0,gs.Z)("p",{target:"esdrtey0"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary"}),{fontSize:"12px",lineHeight:"15px",marginBottom:"8px",marginTop:"-4px",display:"flex"}]),"label:PRegister;"),Nu=(0,gs.Z)("span",{target:"esdrtey1"})((({theme:e})=>[(0,re.GI)({theme:e,color:"Primary"}),{display:"flex",alignItems:"center"}]),"label:SpanLink;"),Ru=()=>{const e=(0,No.Q)("WebApp_Login"),{ageGateAction:t,birthday:i}=(0,K.mp)(ms),[{errorMsg:n,signupLoading:a},{emailRegister:r}]=(0,K.b7)(ll),[s,l]=(0,K.b7)(Zs),[{sendCodeLoading:c,code:d,codeFormatError:_,emailRegistered:u},{sendEmailCodeForSignup:p}]=(0,K.b7)(Qs),{password:m,lengthValid:E,contentValid:g}=(0,K.mp)(_c),{emailErrorMsg:h,email:T=""}=s,S=(0,y.useCallback)((()=>{p({email:T})}),[T,p]),O=(0,y.useCallback)((e=>{l.setEmailInfo({email:e.value,valid:e.valid})}),[l]),A=(0,y.useCallback)((()=>{r({password:m,code:d,email:T})}),[T,d,r,m]),I=!T||!m||!d||!g||!E||!!_||!!h||Boolean(!i&&t);return(0,o.jsxs)(Wc,Object.assign({onSubmit:A},{children:[(0,o.jsx)(iu,{children:e("common_login_panel_entry_2")},void 0),Boolean(t)&&(0,o.jsx)(eu,{platform:"phone_or_email"},void 0),(0,o.jsxs)(nu,{children:[e("email")," ",(0,o.jsx)(td,{text:e("common_registration_switch_phone"),path:V.gY.signupPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(ad,{placeholder:e("common_login_reset_email_input_placeholder"),onChange:O,errorMsg:h,emailRegistered:u},void 0),u&&(0,o.jsxs)(fu,{children:[e("common_registration_email_existing_title"),",",(0,o.jsx)(Il,Object.assign({path:V.gY.loginWithSignedEmail,underline:!1},{children:(0,o.jsxs)(Nu,{children:[e("Log in"),(0,o.jsx)(Iu.Z,{},void 0)]},void 0)}),void 0)]},void 0),(0,o.jsx)(Kc,{},void 0),(0,o.jsx)(Hc,{email:!0,disabled:Boolean(h||!T||!i&&t),codeFromNumber:T,loading:c,errorMsg:n,onClickSendCode:S},void 0),(0,o.jsx)(Cu,{},void 0),(0,o.jsx)(tu,Object.assign({loading:a,buttonTheme:"primary",size:"largeNew",disabled:I,type:"submit"},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},Lu=()=>{const e=(0,No.Q)("WebApp_Login"),[{birthday:t,ageGateAction:i}]=(0,K.b7)(ms),[{sendCodeLoading:n,code:a,codeFormatError:r},{sendPhoneCodeForLogin:s}]=(0,K.b7)(Qs),[{loginLoading:l},{handleSmsLogin:c}]=(0,K.b7)(cl),d=(0,X.fz)(ks),[_]=(0,K.b7)($s),{mobile:u,phoneErrorMsg:p,phone:m}=_,E=u&&a&&!p&&!r&&(t||!i),g=Ec(),h=(0,y.useCallback)((()=>{d.setPlatform("sms_verification"),d.loginSubmit({signUp:!0}),c({birthday:t,phoneCode:a,mobile:u,login_only:!1})}),[t,c,d,u,a]),T=(0,y.useCallback)((()=>{s({mobile:u,isSignUp:!0})}),[u,s]);return(0,o.jsxs)(Wc,Object.assign({onSubmit:h},{children:[(0,o.jsx)(iu,{children:e("common_login_panel_entry_2")},void 0),Boolean(i)&&(0,o.jsx)(eu,{platform:"sms_verification"},void 0),(0,o.jsxs)(nu,{children:[e("phone")," ",(0,o.jsx)(td,{text:e("common_registration_switch_email"),path:V.gY.signupEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Id,{},void 0),(0,o.jsx)(Hc,{disabled:Boolean(p||!m||!t&&i),codeFromNumber:u,loading:n,errorMsg:g,onClickSendCode:T},void 0),(0,o.jsx)(tu,Object.assign({buttonTheme:"primary",size:"largeNew",loading:l,disabled:!E,type:"submit"},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},bu=(0,y.memo)((()=>{const[{initial:e,registerLimited:t}]=(0,K.b7)(ms);(()=>{const e=(0,X.fz)(ks);(0,y.useEffect)((()=>{e.enterSignUp()}),[e])})(),(0,El.q)({pid:"signup"});const i=(0,f.k6)(),{pathname:n}=i.location;return function(){const e=(0,f.k6)(),t=(0,No.Q)("WebApp_Login"),{krPolicySelection:i}=(0,K.mp)(tl),{$region:o}=(0,q.m7)((0,te.L)((()=>["$region"]),[])),{ageEligible:n,ageErrorMsg:a,showErrorByToast:r,showAgeConfirm:s}=(0,K.mp)(ms);(0,y.useEffect)((()=>{n&&("KR"!==o||i.length||e.push(V.gY.signupPolicyConfirm))}),[n]),(0,y.useEffect)((()=>{s&&e.push(V.gY.signupAgeGateConfirm)}),[e,s]),(0,y.useEffect)((()=>{r&&a&&(Ht.h.destroy(),Ht.h.open({content:t(a),duration:3,widthType:"half"}))}),[a,t,r])}(),(0,y.useEffect)((()=>{t&&i.replace(V.gY.signupCreateAccount)}),[i,t]),e||n===V.gY.signupHome?(0,o.jsxs)(Xl,{children:[(0,o.jsx)(nc,{page:"signup"},void 0),(0,o.jsxs)(f.rs,{children:[(0,o.jsx)(f.AW,{path:V.gY.signupHome,component:tc,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupPhoneOrEmail,component:Lu,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupPhone,component:Lu,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupEmail,component:Ru,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupCreatePassword,component:Ou,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupCreateUsername,component:Au,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupCreateAccount,component:hu,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupPrivateOn,component:v_,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupAgeGate,component:au,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupAgeGateConfirm,component:N_,exact:!0},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupPolicyConfirm,component:B_,exact:!0},void 0),(0,o.jsx)(f.AW,{path:"*",component:tc},void 0)]},void 0)]},void 0):(0,o.jsx)(h_.Z,{center:!0,style:{margin:"auto"}},void 0)})),Pu=(0,gs.Z)("div",{target:"e10jupx40"})({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"label:DivOauthBodyContainer;"),Du=(0,y.memo)((function(){const{search:e}=(0,f.TH)(),{oauth_token:t,oauth_verifier:i,error:n,oauthType:a}=(0,v.parse)(e),r=(0,X.fz)(ks),s=(0,X.fz)(Ul.M);return(0,y.useEffect)((()=>{Fl(null==a?void 0:a.toString()),s.handleThirdGetToken({platform:"twitter",error_code:t&&i?0:-1,error_message:String(n)}),t&&i?(kl("twitter",{oauth_token:t.toString(),oauth_verifier:i.toString()}),window.authDoneClose=!0):r.thirdPartyLoginResult({status:1,error_code:-1,error_desc:null==n?void 0:n.toString()})}),[n,r,t,i,s,a]),(0,o.jsx)(Pu,{children:(0,o.jsx)(Vt.g,{},void 0)},void 0)})),Mu=()=>{const{search:e}=(0,f.TH)(),{code:t,error:i}=(0,v.parse)(e),n=(0,X.fz)(ks),a=(0,X.fz)(Ul.M);return(0,y.useEffect)((()=>{Fl(),a.handleThirdGetToken({platform:"line",error_code:t?0:-1,error_message:String(i)}),t?(kl("line",{code:null==t?void 0:t.toString()}),window.authDoneClose=!0):n.thirdPartyLoginResult({status:1,error_code:-1,error_desc:String(i)})}),[t,i,n,a]),(0,o.jsx)(Pu,{children:(0,o.jsx)(Vt.g,{},void 0)},void 0)};var xu=i(98465),wu=i(85404);function Uu(){const[{lang:e,hasLoaded:t},i]=(0,K.b7)(xu.L,{selector:({lang:e,translations:t})=>{var i;return{lang:e,hasLoaded:Boolean(null===(i=t[e])||void 0===i?void 0:i.WebApp_Login)}},dependencies:[]}),{loadData:o}=i,{domain:n,teaDomain:a}=(0,wu.o)();return(0,y.useEffect)((()=>{o({lang:e,namespaces:["WebApp_Login"],teaDomain:a,domain:n})}),[e,o,n,a]),t}var ku=i(12820),Fu=i(27256);const Bu=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"2px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGTertiary2,":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGPrimary2,color:e.colors.TextQuaternary}};case"primary":return{borderRadius:"2px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2}};default:return{":disabled":{}}}},Gu={large:{minWidth:"248px",minHeight:"44px",fontSize:"15px",lineHeight:"18px",fontWeight:700},medium:{minWidth:"144px",height:"35px",fontSize:"14px",lineHeight:"17px",fontWeight:700},small:{minWidth:"88px",height:"28px",fontSize:"14px",lineHeight:"17px",fontWeight:700},tiny:{minWidth:"74px",minHeight:"24px",fontSize:"13px",lineHeight:"17px",fontWeight:600}},ju=(0,Fu.Z)("button",{target:"e5u1qxo0"})((({buttonTheme:e="default",size:t="medium",theme:i,loading:o=!1})=>[Bu({theme:i,buttonTheme:e}),Gu[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",fontFamily:"ProximaNova, PingFangSC, sans-serif",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),Hu=(0,y.memo)((function(e){var{buttonTheme:t,size:i,type:n="button",loading:a=!1,loadingTheme:r="primary",loadingSize:s="medium",children:l}=e,c=(0,p.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children"]);return(0,o.jsxs)(ju,Object.assign({type:n,buttonTheme:t,loading:a,size:i},c,{children:[l,a&&(0,o.jsx)(ku.$,{style:{position:"absolute"},theme:r,size:s},void 0)]}),void 0)})),Wu=(0,gs.Z)("div",{target:"ermvtw20"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",maxWidth:"400px",padding:"0px 32px 32px",textAlign:"center"})),"label:DivContainer;"),Vu=(0,gs.Z)("h5",{target:"ermvtw21"})((({theme:e})=>[(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"20px",lineHeight:"24px"}]),"label:H5Title;"),Yu=(0,gs.Z)("p",{target:"ermvtw22"})([({theme:e})=>(0,re.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"20px",margin:"24px 0",textAlign:"center"}],"label:PDesc;"),Ku=e=>{const t=(0,No.Q)("WebApp_Login"),{title:i,text:n,buttonText:a,visible:r,supportText:s}=e,{$language:l}=(0,q.m7)((0,te.L)((()=>["$language"]),[]));return(0,o.jsx)(yt.u_,Object.assign({visible:r,maskCloseable:!1,onClose:e.onClose},{children:(0,o.jsxs)(Wu,{children:[i&&(0,o.jsx)(Vu,{children:t(i)},void 0),(0,o.jsx)(Yu,{children:t(n)},void 0),s&&(0,o.jsx)("a",Object.assign({href:`https://support.tiktok.com?lang=${l}`,target:"_blank",rel:"noopener noreferrer"},{children:(0,o.jsx)(Hu,Object.assign({size:"large",buttonTheme:"primary",style:{width:"100%",marginBottom:"16px"}},{children:t(null!=a?a:"twosv_recover_pw_popup_btn")}),void 0)}),void 0),(0,o.jsx)(Hu,Object.assign({size:"large",buttonTheme:"default",style:{width:"100%"},onClick:e.onClose},{children:t(null!=a?a:"OK")}),void 0)]},void 0)}),void 0)},zu={inexistent:{title:"age_verify_login_inexistent",subTitle:"age_verify_login_inexistent_intro"},ineligible:{title:"age_verify_login_ineligible",subTitle:"age_verify_login_ineligible_intro"},twoStepVerifyBlock:{title:"twosv_login_sms_block_title",subTitle:"twosv_login_sms_block_content"},TwoStepBlockResetPwd:{title:"twosv_recover_pw_popup_title",subTitle:"twosv_recover_pw_popup_desc",supportText:"twosv_recover_pw_popup_btn"}},$u=()=>{var e;const t=(0,f.k6)(),[{showAlertMessageType:i},{setShowAlertMessageType:n}]=(0,K.b7)(Ys),a=null===(e=(0,f.$B)(V.gY.loginHome))||void 0===e?void 0:e.isExact,r=(0,y.useCallback)((()=>{n("");const{message:e}=(0,v.parse)(window.location.search),i=new RegExp(`&?message=${e}`);t.replace({pathname:V.gY.loginHome,search:(window.location||{}).search.replace(i,"")})}),[t,n]);return(0,y.useEffect)((()=>{i&&!a&&t.push(V.gY.loginHome)}),[i,t,a]),i?(0,o.jsx)(Ku,{supportText:zu[i].supportText,visible:Boolean(i),title:zu[i].title,text:zu[i].subTitle,onClose:r},void 0):null},qu=(0,y.memo)((function(){var e,t;const i=(0,te.b)();(e=>{const t=(0,f.TH)(),i=(0,X.fz)(ks),{loginModalShow:o,url:n}=(0,K.mp)(Wt.r),{loginType:a}=xl((()=>["loginType"]),[]);ic.initialized||ic.init(o?n.split("?")[1]:t.search),(0,Z.k0)((()=>Object.assign({page_name:e,login_type:a},ic.eventCommonParams)),[a,e]),(0,y.useEffect)((()=>{a&&i.handlePageView()}),[i,a])})("login");const n=Uu(),a=(0,X.fz)(Rs.Q),r=(0,X.fz)(Ls.D);!function(){const{twoStepResponse:e}=(0,K.mp)(cl),[{type:t},{setTwoStepVerifyRes:i,setTwoStepType:o}]=(0,K.b7)(mc),n=(0,f.k6)(),{pathname:a}=(0,f.TH)();(0,y.useEffect)((()=>{e&&i(e)}),[e,i]),(0,y.useEffect)((()=>{t&&`/login/2sv/${uc[t]}`!==a&&n.push(`/login/2sv/${uc[t]}`)}),[t,e]),(0,y.useEffect)((()=>()=>{o(void 0)}),[])}(),function(){const{success:e}=(0,K.mp)(cl),{redirectUrl:t}=(0,K.mp)(Ys),{success:i}=(0,K.mp)(ll),{$language:o}=(0,q.m7)((0,te.L)((()=>["$language"]),[])),n=(0,No.Q)("WebApp_Login");(0,y.useEffect)((()=>{(e||i)&&(Ht.h.destroy(),Ht.h.open({content:n(2===e?"reactivate_toast":"Login Success"),duration:3,widthType:"half"}),setTimeout((()=>{location.href=Ql(o,t)}),1e3))}),[o,n,t,i,e])}(),function(){const e=(0,X.fz)(Yl);(0,y.useEffect)((()=>{e.loadSdk()}),[e])}(),function(){const{$user:e,$language:t}=(0,q.m7)((0,te.L)((()=>["$user","$language"]),[])),{redirectUrl:i}=(0,K.mp)(Ys),o=(0,No.Q)("WebApp_Login"),n=(0,X.fz)(ks),a=[V.gY.oauth,V.gY.oauthLine],r=(0,f.$B)(a);(0,y.useEffect)((()=>{e&&!r&&(Ht.h.open({content:o("You are logged in, no need to repeat"),duration:3,widthType:"half"}),n.setPlatform("repeatLogin"),n.loginSuccess({is_register:0}),setTimeout((()=>{location.href=Ql(t,i)}),1e3))}),[i])}(),Ec(),function(){const{nextPage:e}=(0,K.mp)(cl),{nextPage:t}=(0,K.mp)(ll),i=e||t,o=(0,f.k6)();(0,y.useEffect)((()=>{i&&o.push(i)}),[o,i])}();const[{initialized:s,ttpConfig:l},{init:c}]=(0,K.b7)(Ys),[{initial:d},{getComplianceSettings:_}]=(0,K.b7)(ms);return(0,y.useEffect)((()=>{i.appContext&&a.setAppContext(i.appContext)}),[i.appContext,a]),(0,y.useEffect)((()=>{var e,t;l&&r.setInitConfig({isSG:(null===(e=i.appContext)||void 0===e?void 0:e.$sgOpen)||1180===(null===(t=i.appContext)||void 0===t?void 0:t.$appId),ttpConfig:l})}),[null===(e=i.appContext)||void 0===e?void 0:e.$appId,null===(t=i.appContext)||void 0===t?void 0:t.$sgOpen,l,r]),(0,y.useEffect)((()=>{!s&&c(),!d&&_()}),[]),n&&s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(f.rs,{children:[(0,o.jsx)(f.AW,{path:V.gY.loginHome,component:g_},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupHome,component:bu},void 0),(0,o.jsx)(f.AW,{path:V.gY.signupPhone,component:bu},void 0),(0,o.jsx)(f.AW,{path:V.gY.oauth,component:Du},void 0),(0,o.jsx)(f.AW,{path:V.gY.oauthLine,component:Mu},void 0)]},void 0),(0,o.jsx)(Re,{appContext:i.appContext,slardarBid:Le.Zy},void 0),(0,o.jsx)(Ts,{},void 0),(0,o.jsx)($u,{},void 0),(0,o.jsx)(ml,{},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Tn.xB,{styles:{"#app":{justifyContent:"center"},"#loginContainer":{display:"flex",alignItems:"center"}}},void 0),(0,o.jsx)(Vt.g,{center:!0,style:{margin:"auto"}},void 0)]},void 0)})),Zu=(0,gs.Z)("div",{target:"e1b6crsh0"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{height:"64px",borderTop:`1px solid ${e.colors.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px",lineHeight:"18px"}]),"label:DivContainer;"),Qu=(0,gs.Z)("span",{target:"e1b6crsh1"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,marginStart:"5px"}),{fontWeight:600,fontSize:"15px",lineHeight:"18px",color:e.colors.Primary}]),"label:SpanLinkText;"),Xu=(0,y.memo)((function(){var e;const{disableSignup:t}=xl((()=>["disableSignup"]),[]),{loginModalShow:i}=(0,K.mp)(Wt.r),n=(0,No.Q)("WebApp_Login"),{pathname:a}=(0,f.TH)(),r=[V.gY.signupAgeGateConfirm,V.gY.signupCreateAccount],s=null===(e=(0,f.$B)(r))||void 0===e?void 0:e.isExact,l=(0,f.$B)([V.gY.loginHome,V.gY.signupHome])&&!s,{$isMobile:c}=(0,q.m7)((0,te.L)((()=>["$isMobile"]),[])),d=a.includes("signup"),_=n(d?"common_registration_panel_entry_1":"common_login_panel_entry_1"),u=n(d?"common_registration_panel_entry_2":"common_registration_username_button"),p=d?V.gY.loginHome:V.gY.signupHome;return t||!l?null:(0,o.jsxs)(Zu,Object.assign({modal:i,style:c?{height:"58px"}:{}},{children:[(0,o.jsx)("div",{children:_.replace("%s"," ")},void 0),(0,o.jsx)(Il,Object.assign({path:p,textTheme:"primary",replace:i},{children:(0,o.jsx)(Qu,{children:u},void 0)}),void 0)]}),void 0)})),Ju=(0,gs.Z)("div",{target:"eg439om0"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"16px",cursor:"pointer",transform:"rtl"===e.direction?"rotateZ(180deg)":"unset"}]),"label:DivBack;"),ep=(0,gs.Z)(Es.Z,{target:"eg439om1"})([{width:"24px",height:"24px"}],"label:StyledChevronLeftOffset;"),tp=(0,gs.Z)("div",{target:"eg439om2"})({width:"483px",height:"100%",padding:"48px 0 0",display:"flex",flexDirection:"column"},"label:DivModalContent;"),ip=(0,gs.Z)("div",{target:"eg439om3"})({flex:"1",overflow:"auto"},"label:DivPageWrapper;"),op={margin:"auto",position:"relative",maxHeight:"693px",height:"80%",overflow:"hidden"},np={transform:"scale(1.7)"},ap=(0,y.memo)((function(){const[{loginModalShow:e,url:t,closeable:i},{setLoginModalShow:n}]=(0,K.b7)(Wt.r),a=(0,X.fz)(ks),[r,s]=(0,y.useState)(0),[l,c]=(0,y.useState)(!1),[d,_]=(0,y.useState)(!1),u=Uu(),p=(0,y.useRef)((0,cs.PP)({initialEntries:[null!=t?t:V.gY.loginHome]}));(0,y.useEffect)((()=>{e&&t&&(p.current.go(Number(`-${p.current.length}`)),p.current.replace(t))}),[e,t]);const{forceLogin:m}=xl((()=>["forceLogin"]),[]),E=(0,y.useCallback)((()=>{p.current.goBack()}),[]),g=(0,y.useCallback)((()=>{c([V.gY.signupAgeGateConfirm,V.gY.signupCreateAccount].includes(p.current.location.pathname))}),[c]),h=(0,y.useCallback)((()=>{_([V.gY.signupAgeGateConfirm,V.gY.signupCreateAccount].includes(p.current.location.pathname))}),[]),T=(0,y.useCallback)((()=>{n(!1);const e=p.current.location.pathname.match("/signup")?"1":"0";a.LoginNotifyClose({isSignUp:e})}),[a,n]);return(0,y.useEffect)((()=>{p.current.listen((()=>{h(),g(),s(p.current.index)}))}),[g,h]),(0,o.jsxs)(yt.u_,Object.assign({visible:e,onClose:T,maskCloseable:!1,contentStyle:op,closeStyles:np,closeStyle:m||d||!i?0:2},{children:[r>0&&!l&&(0,o.jsx)(Ju,Object.assign({onClick:E},{children:(0,o.jsx)(ep,{},void 0)}),void 0),(0,o.jsx)(f.F0,Object.assign({history:p.current},{children:(0,o.jsxs)(tp,{children:[(0,o.jsx)(ip,Object.assign({id:"loginContainer"},{children:(0,o.jsx)(qu,{history:p.current},void 0)}),void 0),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(cu,{},void 0),(0,o.jsx)(Xu,{},void 0)]},void 0)]},void 0)}),void 0)]}),void 0)})),rp=(0,Bo.Z)("div",{target:"e10win0d0"})((({theme:{colors:e}})=>[{display:"flex",justifyContent:"space-around",boxShadow:`0px 1px 1px ${e.ShadowPrimary}`,height:re.Mz,width:"100%",top:0,position:"fixed",alignItems:"center",background:e.BGPrimary,zIndex:1e3}]),"label:DivHeaderContainer;"),sp=(0,Bo.Z)("div",{target:"e10win0d1"})({width:"100%",display:"flex",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},(({expand:e})=>e?{}:{maxWidth:re.XP}),(({theme:{direction:e}})=>(0,re.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})),"label:DivHeaderWrapperMain;"),lp=(0,Bo.Z)(sp,{target:"e10win0d2"})([{maxWidth:"100%"},({theme:{direction:e}})=>(0,re.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})],"label:StyledDivHeaderWrapperMainV2;"),cp=(0,Bo.Z)(On.v,{target:"e1an6zpe0"})({fontSize:0},"label:StyledLinkLogo;");cp.defaultProps=Object.assign(Object.assign({},cp.defaultProps),{"data-e2e":"tiktok-logo"});const dp=(0,y.memo)((function(){const e=(0,No.Q)(),{pathname:t}=(0,f.TH)(),i=(0,K.qj)($a.h9),n=(0,X.fz)(bo._e),a=(0,y.useCallback)((e=>{(0,Pe.oC)(t)&&(e.preventDefault(),i.resetItemList({key:"foryou"}),i.getRecommendList({key:"foryou"})),n.handleClickLogo()}),[i,t,n]);return(0,o.jsxs)(cp,Object.assign({to:V.Ad.home,onClick:a},{children:[(0,o.jsx)("svg",Object.assign({height:42,width:118,alt:e("TikTok i18n title")},{children:(0,o.jsx)("use",{xlinkHref:"#svg-header-logo"},void 0)}),void 0),(0,o.jsx)("strong",{children:e("TikTok i18n title")},void 0)]}),void 0)}));var _p=i(68137),up=i(84047),pp=i(42972),mp=i(59383);const Ep=(e="")=>e.split("-")[0].replace("zh","zh-Hant")||e||"en";var gp=i(97103),hp=i(66958),Tp=i(80185),Sp=i(48710),Op=i(69829);const Ap=(0,Bo.Z)("form",{target:"ev30f210"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",background:e.BGInput,borderRadius:"92px",position:"relative",overflow:"hidden",zIndex:1,margin:"0"})),"label:FormElement;"),Ip=(0,Bo.Z)("div",{target:"ev30f211"})((({theme:{colors:e}})=>({display:"none",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:`1.5px solid ${e.LinePrimary}`,borderRadius:"92px",zIndex:-1})),"label:DivInputBorder;"),vp=(0,Bo.Z)("input",{target:"ev30f212"})((({theme:{colors:e,typography:t,fontFamilies:i,fontWeights:o},withIcon:n})=>Object.assign(Object.assign({fontFamily:i.Proxima,fontWeight:o.normal},t.P2),{border:"none",background:"transparent",outline:"none",padding:"0",width:n?"252px":"292px",caretColor:e.Primary,appearance:"textfield",[`:focus ~ ${Ip}`]:{display:"block"}})),"label:InputElement;");vp.defaultProps=Object.assign(Object.assign({},vp.defaultProps),{"data-e2e":"search-user-input"});const yp=(0,Bo.Z)("div",{target:"ev30f213"})({fontSize:0},"label:DivIconWrapper;"),Cp=(0,Bo.Z)(Op.Z,{target:"ev30f214"})({animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),fp=(0,Bo.Z)("span",{target:"ev30f215"})((({theme:{colors:e}})=>({width:"1px",height:"28px",margin:"-3px 0",background:e.LineSecondary})),"label:SpanSpliter;"),Np=(0,Bo.Z)("button",{target:"ev30f216"})((({theme:{colors:e,direction:t}})=>[{padding:"11px 16px 11px 12px",margin:"-12px -16px",fontSize:"0",cursor:"pointer",outline:"none",border:"none",background:"transparent",":hover":{background:e.BGView},":active":{background:e.BGInput2}},(0,re.YJ)({direction:t,marginStart:"0"})]),"label:ButtonSearch;");Np.defaultProps=Object.assign(Object.assign({},Np.defaultProps),{"data-e2e":"search-button"});const Rp=(0,y.memo)((function({initialValue:e,onEnter:t}){var i;const[{searchValue:n,loading:r},{handleInputFocusChange:s,setSearchValue:l,setActiveUp:c,setActiveDown:d}]=(0,K.b7)(up.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading})}),{$user:_,$searchVideoForLoggedin:u}=null!==(i=(0,te.L)((()=>["$user","$searchVideoForLoggedin"]),[]))&&void 0!==i?i:{},p=Boolean(_),m=(0,y.useRef)(null),{pathname:E}=(0,f.TH)(),g=Boolean((0,f.LX)(E,{path:V.Ad.searchHome})),h=(0,No.Q)()(p||!u?"search_bar_login":"search_users"),{colors:T}=(0,a.a)(),S=(0,y.useMemo)((()=>({fill:T.TextQuaternary,width:16,height:16,style:{margin:"0 12px"}})),[T]);(0,y.useEffect)((()=>{l(e)}),[e,l]);const O=(0,y.useCallback)((e=>{const t=e.target.value;(e=>!e.startsWith(" "))(t)&&l(t)}),[l]),A=(0,Sp.J)({upHandler:c,downHandler:d,confirmHandler:t}),I=(0,y.useCallback)((()=>{s(!0)}),[s]),v=(0,y.useCallback)((()=>{s(!1)}),[s]),C=(0,y.useCallback)((()=>{var e;l(""),null===(e=m.current)||void 0===e||e.focus()}),[l]);(0,y.useEffect)((()=>{g||l("")}),[g,l]);const N=(0,y.useCallback)((()=>r?(0,o.jsx)(yp,{children:(0,o.jsx)(Cp,Object.assign({},S),void 0)},void 0):n?(0,o.jsx)(yp,Object.assign({onClick:C,"data-e2e":"reset-search-form"},{children:(0,o.jsx)(Tp.Z,Object.assign({},S),void 0)}),void 0):null),[r,n,S,C]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vp,{ref:m,withIcon:Boolean(n)||r,value:n,onChange:O,onKeyDown:A,onFocus:I,onBlur:v,placeholder:h,name:"q",type:"search",autoComplete:"off"},void 0),N()]},void 0)})),Lp=(0,y.memo)((function({initialValue:e,onSubmit:t}){const[i,n]=(0,K.b7)(up.B,{dependencies:[],selector:e=>e.searchValue}),{search:r}=(0,f.TH)(),{q:s}=(0,v.parse)(r),{colors:l}=(0,a.a)(),{pathname:c}=(0,f.TH)(),d=(0,y.useRef)(!1),_=(0,y.useCallback)((()=>{d.current=!0}),[]),u=(0,y.useCallback)((e=>{e.preventDefault(),n.setInputFocus(!1),null==t||t(d.current),d.current=!1}),[n,t]),p=Boolean((0,f.LX)(c,{path:V.Ad.searchHome}));return(0,o.jsxs)(Ap,Object.assign({className:"search-input",action:"/search",onSubmit:u},{children:[p&&(0,o.jsx)("h1",Object.assign({style:{display:"none",alignItems:"center"}},{children:s}),void 0),(0,o.jsx)(Rp,{initialValue:e,onEnter:_},void 0),(0,o.jsx)(fp,{},void 0),(0,o.jsx)(Np,Object.assign({type:"submit"},{children:(0,o.jsx)(hn.Z,{fill:i?l.TextSecondary:l.TextQuaternary,width:24,height:24},void 0)}),void 0),(0,o.jsx)(Ip,{},void 0)]}),void 0)})),bp=(0,Bo.Z)("div",{target:"eagc08l0"})({position:"relative"},"label:DivSearchFormContainer;"),Pp=e=>{const[{activeIndex:t},i]=(0,K.b7)(up.B),o=t===e,n=(0,y.useCallback)((()=>{o||i.setActiveIndex(e)}),[o,i,e]);return{active:o,handleMouseEnter:n}};var Dp=i(13761);const Mp=(0,Bo.Z)("div",{target:"e1yapk9z0"})((({theme:{colors:e}})=>({position:"absolute",width:"100%",marginTop:"8px",background:e.BGPrimary,boxShadow:`0 2px 12px ${e.ShadowPrimary}`,borderRadius:"8px",paddingTop:"8px",boxSizing:"border-box",maxHeight:`min(calc(100vh - 96px - ${re.Mz}px), 734px)`,overflowY:"auto",overflowX:"hidden"})),"label:DivContainer;");Mp.defaultProps=Object.assign(Object.assign({},Mp.defaultProps),{"data-e2e":"sug-container"});const xp=(0,Bo.Z)("div",{target:"e1yapk9z1"})((({paddingVertical:e,active:t,theme:{colors:i}})=>({padding:`${e}px 16px`,cursor:"pointer",background:t?i.BGView:void 0,display:"flex",alignItems:"center"})),"label:DivItemContainer;"),wp=(0,Bo.Z)("h4",{target:"e1yapk9z2"})((({theme:{typography:e,fontWeights:t}})=>Object.assign(Object.assign({},e.P2),{fontWeight:t.semiBold,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:H4ItemTitle;"),Up=(0,Bo.Z)("p",{target:"e1yapk9z3"})((({theme:{typography:e,fontWeights:t,colors:i}})=>Object.assign(Object.assign({},e.P3),{color:i.TextTertiary,fontWeight:t.normal,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:PItemDesc;"),kp=(0,Bo.Z)("p",{target:"e1yapk9z4"})((({theme:{fontFamilies:e,fontWeights:t,typography:i,colors:o}})=>Object.assign(Object.assign({fontFamily:e.Proxima,fontWeight:t.semiBold},i.P2),{color:o.TextPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),"label:PMoreText;"),Fp=(0,Bo.Z)("div",{target:"e1yapk9z5"})((({theme:{direction:e}})=>Object.assign({height:"20px",flex:"0 0 20px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px"},(0,re.YJ)({direction:e,marginEnd:"8px"}))),"label:DivSearchIconContainer;"),Bp=(0,Bo.Z)(Dp.q,{target:"e1yapk9z6"})((({theme:{direction:e}})=>Object.assign({},(0,re.YJ)({direction:e,marginEnd:"12px"}))),"label:StyledAvatar;"),Gp=(0,Bo.Z)("div",{target:"e1yapk9z7"})({flex:"0 1 auto",minWidth:0},"label:DivSugItemContent;"),jp=(0,Bo.Z)("div",{target:"e1yapk9z8"})((({theme:{fontWeights:e,typography:t,colors:i}})=>Object.assign(Object.assign({height:"30px",padding:"5px 12px"},t.P3),{fontWeight:e.semiBold,color:i.TextTertiary})),"label:DivSugAccountTitle;"),Hp=(0,y.memo)((function(e){const{item:t,index:i,onSelect:n}=e,{active:a,handleMouseEnter:r}=Pp(i),{content:s,extra_info:l}=t,{nickname:c,unique_id:d,is_verified:_,rich_sug_avatar_uri:u}=l,p=Boolean(d),m=(0,y.useCallback)((()=>{null==n||n(t,i)}),[i,t,n]),E=p?"user-sug-item":"content-sug-item";return(0,o.jsxs)(xp,Object.assign({"data-e2e":E,paddingVertical:9,active:a,onMouseDown:m,onMouseMove:r},{children:[p?(0,o.jsx)(Bp,{src:u,size:40},void 0):(0,o.jsx)(Fp,{children:(0,o.jsx)(hn.Z,{},void 0)},void 0),(0,o.jsx)(Gp,{children:p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(wp,{children:[d," ",_&&(0,o.jsx)(Fo.Q,{width:14,height:14},"badge")]},void 0),(0,o.jsx)(Up,{children:c},void 0)]},void 0):(0,o.jsx)(wp,{children:s},void 0)},void 0)]}),void 0)})),Wp=(0,y.memo)((function({index:e,onClick:t}){const i=(0,K.mp)(up.B,{dependencies:[],selector:e=>e.searchValue}),{active:n,handleMouseEnter:a}=Pp(e),r=(0,No.Q)()("view_all_results",{keyword:i}),s=(0,y.useCallback)((()=>{null==t||t("click_view_all")}),[t]);return(0,o.jsx)(xp,Object.assign({paddingVertical:15,active:n,onMouseMove:a,onMouseDown:s},{children:(0,o.jsx)(kp,{children:r},void 0)}),void 0)})),Vp=(0,y.memo)((function(e){const t=(0,No.Q)(),[i,n]=(0,K.b7)(up.B,{selector:e=>e.sugList,dependencies:[]}),a=(0,y.useCallback)((()=>{n.setActiveIndex(-1)}),[n]),[r,s]=(0,y.useMemo)((()=>i.reduce((([e,t],i)=>(i.extra_info.sug_user_id?e.push(i):t.push(i),[e,t])),[[],[]])),[i]),l=(t,i=0)=>t.map(((t,n)=>(0,o.jsx)(Hp,{item:t,index:n+i,onSelect:e.onSelect},t.content)));return(0,o.jsxs)(Mp,Object.assign({onMouseLeave:a},{children:[l(s),0===r.length?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(jp,{children:t("search_account")},void 0),l(r,s.length)]},void 0),(0,o.jsx)(Wp,{index:i.length,onClick:e.onSelectMore},void 0)]}),void 0)})),Yp={[V.Ad.searchHome]:"general",[V.Ad.searchUser]:"user",[V.Ad.searchVideo]:"video"},Kp=(0,y.memo)((function(){const{search:e,pathname:t}=(0,f.TH)(),{q:i}=(0,v.parse)(e),n=(0,_p.if)(Yp[t]),[{searchValue:a,loading:r,sugList:s,inputFocus:l,activeIndex:c},d]=(0,K.b7)(up.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,sugList:e.sugList,inputFocus:e.inputFocus,activeIndex:e.activeIndex})}),{lang:_,$user:u,$searchVideoForLoggedin:p}=(0,K.mp)($.G,{selector:e=>{var t,i,o;return{lang:e.lang,$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$searchVideoForLoggedin:null!==(o=null===(i=e.appContext)||void 0===i?void 0:i.$searchVideoForLoggedin)&&void 0!==o?o:[]}},dependencies:[]}),[{currentKeyword:m},E]=(0,K.b7)(pp.t8,{selector:e=>{var i,o;return{currentKeyword:null!==(o=null===(i=e[Yp[t]])||void 0===i?void 0:i.keyword)&&void 0!==o?o:""}},dependencies:[t]}),g=Boolean(u),h=(0,X.fz)(mp.xq),T=(0,X.fz)(bo._e),S=(0,y.useRef)([]),O=(0,f.k6)(),A=(0,f.TH)(),I=(0,y.useCallback)((()=>{d.getSugList({app_language:Ep(_),history_list:encodeURIComponent(JSON.stringify(S.current)),keyword:a})}),[d,_,a]),C=Boolean((0,f.LX)(t,{path:V.Ad.searchHome}));(0,y.useEffect)((()=>{C&&i&&d.setSearchValue(String(i))}),[i,C]),(0,y.useEffect)((()=>{I()}),[I]);const N=(0,y.useCallback)(((e,t)=>{d.setInputFocus(!1);const i=Date.now();let o=C?A.pathname:V.zp.searchHome();if(C&&e===m)return void n(!0,!0);!g&&p&&(o=V.zp.searchUser());const a=(0,gp.C)({location:A,to:{pathname:o,search:{q:e,t:i}}});O.push(a,Object.assign({searchSource:"normal_search"},t))}),[C,A,g,n,O,d,p,m]),R=(0,y.useCallback)(((e,i)=>{const{extra_info:{unique_id:o,sug_user_id:n},word_record:{words_content:r,group_id:s},content:l,impr_id:c}=e;S.current.push(l);const d=Boolean(n);h.handleSugClick({impr_id:c,words_source:"sug",words_position:i,words_content:r,raw_query:a,sug_type:d?"enrich_sug":"normal_sug",query_id:"",group_id:s}),d?(T.handleEnterPage("enter_personal_detail",{enter_from:"search_sug",search_keyword:a,to_user_id:n,search_id:c,impr_id:c,rank:i,search_type:Yp[t]}),window.location.href=(0,v.stringifyUrl)({url:(0,hp.yl)({uniqueId:o}),query:{lang:_}})):N(l,{enterMethod:"click_icon"})}),[T,_,h,a,N,t]),L=(0,y.useCallback)((e=>{E.resetSearchResult(),N(a,{enterMethod:e})}),[N,E,a]),b=(0,y.useCallback)((e=>{a&&(e&&s[c]?R(s[c],c):L(e?"click_enter":"click_icon"))}),[c,L,R,a,s]);return(0,o.jsxs)(bp,{children:[(0,o.jsx)(Lp,{initialValue:"",onSubmit:b},void 0),!r&&Boolean(a)&&s.length>0&&l?(0,o.jsx)(Vp,{onSelect:R,onSelectMore:L},void 0):null]},void 0)}));var zp=i(17936),$p=i(19014),qp=i(44538),Zp=i(33980);let Qp=class{constructor(e){this.fetch=e}getReportNotices(e){return this.fetch.get("/aweme/v1/report/inbox/notice",{query:e,baseUrlType:2})}getReportList(e){return this.fetch.get("/node/report/inbox/list",{query:e,baseUrlType:2})}getReportDetail(e){return this.fetch.get("/node/report/inbox/detail",{query:e,baseUrlType:2})}};Qp=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],Qp);var Xp=i(57001),Jp=i.n(Xp);const em="homepage_message";let tm=class{handleEnter(e){oe.WB.event("enter_homepage_message",Object.assign(Object.assign({},e),{enter_method:"click_button"}))}handlePopShow(e){oe.WB.event("message_pop_notice_show",e)}handleChangeTab(e){oe.WB.event("change_notification_tab",this.getNoticeParams(e))}handleEnterFollow(e){oe.WB.event("enter_follow_request",this.getNoticeParams(e))}handleFollowRequestAction(e){oe.WB.event("follow_request_action",Jp()(e,{enter_from:"follow_request_page",previous_page:"homepage_message"}))}handleEnterFold(e){oe.WB.event("enter_folded_message",Jp()(e,{enter_from:em,account_type:"like"}))}handleFollow(){}getNoticeParams(e){return Jp()(e,{enter_from:em,page_name:em,previous_page:oe.WB.commonParams.page_name})}};tm=(0,p.__decorate)([(0,ie.G)()],tm);let im=class{constructor(e){this.fetch=e}getNoticeGroupData(e){return this.fetch.get("/api/notice/multi/",{query:e,baseUrlType:2})}getNoticeDiggList(e){return this.fetch.get("/api/notice/digg/list/",{query:e})}getNoticeCount(){return this.fetch.get("/api/notice/count/",{query:{source:7},baseUrlType:2})}getNoticeFollowRequestList(e){return this.fetch.get("/api/user/following/request/list/",{query:e})}postFollowReplyApprove(e){return this.fetch.post("/api/commit/follow/request/approve/",{query:{from_user_id:e,from:33},headers:{[eo.eD]:this.fetch.csrfToken}})}postFollowReplyReject(e){return this.fetch.post("/api/commit/follow/request/reject/",{query:{from_user_id:e,from:33},headers:{[eo.eD]:this.fetch.csrfToken}})}};im=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],im);const om=e=>33===e.type&&Boolean(e.follow),nm=e=>41===e.type&&Boolean(e.digg),am=e=>31===e.type&&Boolean(e.comment),rm=e=>21===e.type&&Boolean(e.duet),sm=e=>45===e.type&&Boolean(e.at),lm=e=>213===e.type&&Boolean(e.template_notice);var cm,dm;!function(e){e[e.All=500]="All",e[e.Like=3]="Like",e[e.Comment=2]="Comment",e[e.Mention=6]="Mention",e[e.Follow=7]="Follow"}(cm||(cm={})),function(e){e[e.Approve=0]="Approve",e[e.Reject=1]="Reject"}(dm||(dm={}));const _m={500:"all",2:"comments",7:"followers",3:"likes",6:"mentions"};let um=class extends le.D{constructor(e,t,i,o,n){super(),this.service=e,this.user=t,this.reporter=i,this.reportInboxService=o,this.appContext=n,this.defaultNoticeList={has_more:1,max_time:0,min_time:0,notice_list:[],loading:!1},this.defaultFollowRequest={has_more:!1,min_time:0,total:0,users:[],loading:!1},this.defaultState={diggList:{users:[],loading:!1,has_more:1,max_cursor:0,min_cursor:0},activeGroup:500,noticeList:this.defaultNoticeList,noticeCount:[],followRequest:this.defaultFollowRequest,reportInbox:{noticeList:[],count:0}}}setActiveGroup(e,t){e.activeGroup=t}setNoticeList(e,t){e.noticeList=t}setNoticeListLoading(e,t){e.noticeList.loading=t}changeActiveGroup(e){return e.pipe((0,ni.b)((e=>{this.reporter.handleChangeTab({to_tab_name:_m[e]})})),(0,hi.z)((e=>(0,Ti.of)(this.getActions().setActiveGroup(e),this.getActions().setNoticeList(this.defaultNoticeList),this.getActions().fetchNoticeData()))))}fetchNoticeData(e){return e.pipe((0,ue.M)(this.state$),(0,ii.w)((([e,{activeGroup:t,noticeList:i}])=>{if(i.loading||!i.has_more)return Oi.E;const o={count:20,is_mark_read:1,group:t,max_time:i.max_time,min_time:i.min_time};return this.service.getNoticeGroupData({aid:1988,group_list:JSON.stringify([o])}).pipe((0,ni.b)((e=>{(0,wi.k)(e.status_code,[0])})),(0,hi.z)((e=>{var t;if(0===e.status_code){const{notice_lists:o}=e;if(!(null==o?void 0:o.length))return(0,Ti.of)(this.getActions().setNoticeList({has_more:0,min_time:i.min_time,max_time:i.max_time,notice_list:i.notice_list,loading:!1}));const{has_more:n,max_time:a,min_time:r,notice_list:s=[]}=o[0];return(0,Ti.of)(this.user.getActions().multiSetUser(this.getNoticeUsers(s)),this.getActions().setNoticeList({has_more:n,max_time:a,min_time:r,notice_list:[...null!==(t=i.notice_list)&&void 0!==t?t:[],...s],loading:!1}))}return(0,Ti.of)(this.noop())})),(0,oi.O)(this.getActions().setNoticeListLoading(!0)),(0,xi.l)(this.getActions().setNoticeListLoading(!1)),(0,Ee.n)({}))})))}setDiggList(e,t){e.diggList.users=t}setDiggListLoading(e,t){e.diggList.loading=t}fetchDiggListData(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([{ref_id:e},{diggList:t}])=>{if(t.loading||!t.has_more)return Oi.E;const i={count:20,max_cursor:t.max_cursor,min_cursor:t.min_cursor,digg_type:1,ref_id:e,aid:1988};return this.service.getNoticeDiggList(i).pipe((0,hi.z)((e=>{var t;const i=(null!==(t=e.digg_infos)&&void 0!==t?t:[]).map((({simple_user:e})=>(0,q.yk)(e)));return(0,Ti.of)(this.user.getActions().multiSetUser(i),this.getActions().setDiggList(i.map((({uniqueId:e})=>e))))})),(0,oi.O)(this.getActions().setDiggListLoading(!0)),(0,xi.l)(this.getActions().setDiggListLoading(!1)))})))}setNoticeCount(e,t){e.noticeCount=t}fetchNoticeCount(e){return e.pipe((0,hi.z)((()=>this.service.getNoticeCount().pipe((0,ni.b)((e=>{(0,wi.k)(e.status_code,[0])})),(0,pe.U)((e=>{var t;if(0===e.status_code){const i=(null!==(t=e.notice_count)&&void 0!==t?t:[]).filter((e=>[500,2,7,3,6].indexOf(e.group)>=0&&500!==e.group));return this.getActions().setNoticeCount(i)}return this.noop()})),(0,Ee.n)({})))))}setNoticeFollowRequest(e,t){e.followRequest=t}setNoticeFollowRequestLoading(e,t){e.followRequest.loading=t}fetchNoticeFollowRequest(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([{uid:e,refresh:t},{followRequest:i}])=>{const o={user_id:e,count:20,max_time:t?0:i.min_time,aid:1988};return this.service.getNoticeFollowRequestList(o).pipe((0,ni.b)((e=>{(0,wi.k)(e.status_code,[0])})),(0,hi.z)((e=>{var o;if(0===e.status_code){const n=(null!==(o=e.request_users)&&void 0!==o?o:[]).map((e=>(0,q.yk)(e))),a=n.map((({uniqueId:e})=>e));return(0,Ti.of)(this.user.getActions().multiSetUser(n),this.getActions().setNoticeFollowRequest({has_more:e.has_more,loading:!1,min_time:e.min_time,total:e.total,users:t?a:i.users.concat(a),from:"fetchNoticeFollowRequest"}))}return(0,Ti.of)(this.noop())})),(0,oi.O)(this.getActions().setNoticeFollowRequestLoading(!0)),(0,xi.l)(this.getActions().setNoticeFollowRequestLoading(!1)),(0,Ee.n)({}))})))}setNoticeFollowRequestReply(e,t){const i=e.followRequest.users.indexOf(t);if(i>=0){e.followRequest.users.splice(i,1);const t=e.followRequest.total;e.followRequest.total="string"==typeof t?t.replace(/(.+?)(\d0*$)/,((e,t,i)=>t+String(Number(i)-1))):t-1}}postFollowReply(e){return e.pipe((0,ni.b)((({approveOrReject:e,uid:t=""})=>{this.reporter.handleFollowRequestAction({action:0===e?"accept":"delete",to_user_id:t})})),(0,hi.z)((({approveOrReject:e,uniqueId:t,uid:i=""})=>(0===e?this.service.postFollowReplyApprove(i):this.service.postFollowReplyReject(i)).pipe((0,Er.h)(this.getActions().setNoticeFollowRequestReply(t))))))}setReportInboxNoticeList(e,t){e.reportInbox.noticeList=t}setReportInboxNoticeCount(e,t){e.reportInbox.count=t}fetchReportInbox(e){return e.pipe((0,ue.M)(this.appContext.state$),(0,me.z)((([e,{appContext:t}])=>{var i,o,n,a;return this.reportInboxService.getReportNotices({request_tag_from:(null==t?void 0:t.$isMobile)?"h5":"pc",carrier_region:null!==(i=null==t?void 0:t.$region)&&void 0!==i?i:"",sys_region:null!==(o=null==t?void 0:t.$region)&&void 0!==o?o:"",current_region:null!==(n=null==t?void 0:t.$region)&&void 0!==n?n:"",locale:null!==(a=null==t?void 0:t.$language)&&void 0!==a?a:""}).pipe((0,hi.z)((({notice_lists:e})=>{var t;if(!e)return[this.noop()];const{notice_list:i}=e[0];if(!i)return[this.noop()];const o=!1===(null===(t=i[0])||void 0===t?void 0:t.has_read)?1:0;return[this.getActions().setReportInboxNoticeList(i),this.getActions().setReportInboxNoticeCount(o)]})),(0,Ee.n)({}))})))}getNoticeUsers(e){return e.reduce(((e,t)=>{var i;return om(t)&&e.push((0,q.yk)(t.follow.from_user)),nm(t)&&(null===(i=t.digg.from_user)||void 0===i||i.forEach((t=>e.push((0,q.yk)(t))))),am(t)&&e.push((0,q.yk)(t.comment.comment.user)),rm(t)&&e.push((0,q.yk)(t.duet.aweme.author)),sm(t)&&t.at.user_info&&e.push((0,q.yk)(t.at.user_info)),e}),[])}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setActiveGroup",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setNoticeList",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setNoticeListLoading",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"changeActiveGroup",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"fetchNoticeData",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Array]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setDiggList",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setDiggListLoading",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"fetchDiggListData",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Array]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setNoticeCount",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"fetchNoticeCount",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setNoticeFollowRequest",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setNoticeFollowRequestLoading",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"fetchNoticeFollowRequest",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setNoticeFollowRequestReply",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"postFollowReply",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Array]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setReportInboxNoticeList",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"setReportInboxNoticeCount",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],um.prototype,"fetchReportInbox",null),um=(0,p.__decorate)([(0,de.Y)("Notice"),(0,p.__metadata)("design:paramtypes",[im,Mo.z,tm,Qp,$.G])],um);const pm=/^\(\d+\+?\)/;var mm=i(44860),Em=i(28370);const gm=(0,ae.Z)("div",{target:"e1nx07zo0"})((({theme:{direction:e},removeMarginLeft:t})=>(0,re.YJ)({direction:e,marginStart:t?"0px":"16px"})),{cursor:"pointer",height:"32px",padding:"3px 3px 0",position:"relative"},"label:DivMessageIconContainer;");gm.defaultProps=Object.assign(Object.assign({},gm.defaultProps),{"data-e2e":"top-dm-icon"});const hm=({theme:{direction:e}})=>({display:"block",width:"26px",height:"26px",transform:"rtl"===e?"rotateY(180deg)":"none"}),Tm=(0,ae.Z)(mm.Z,{target:"e1nx07zo1"})(hm,"label:StyledIcon;"),Sm=(0,ae.Z)(Em.Z,{target:"e1nx07zo2"})(hm,"label:StyledActiveIcon;"),Om=(0,ae.Z)("sup",{target:"e1nx07zo3"})((({theme:e,long:t})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"semiBold"}),(0,re.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"-7px",minWidth:"20px",borderRadius:"10px",height:"20px",background:e.colors.Primary,textAlign:"center",padding:t?"0 6px":"0"}]),"label:SupMsgBadge;"),Am=function({removeMarginLeft:e}){const{pathname:t}=(0,f.TH)(),i=t.startsWith("/message")?Sm:Tm,n=(0,No.Q)(),a=(0,K.mp)($.G,{dependencies:[],selector:e=>e.lang}),r=(0,K.mp)(Zp.O,{dependencies:[],selector:e=>e.messageCount}),s=(0,X.fz)($p.RB);!function(){const{$user:e,$encryptedWebid:t,lang:i,$appType:o,$env:n,$wid:a,$apiUrl:r,$wsUrl:s}=(0,K.mp)($.G,{dependencies:[],selector:e=>{var t,i,o,n,a,r,s;return{$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$wid:null===(i=e.appContext)||void 0===i?void 0:i.$wid,$encryptedWebid:null===(o=e.appContext)||void 0===o?void 0:o.$encryptedWebid,$appType:null===(n=e.appContext)||void 0===n?void 0:n.$appType,lang:e.lang,$env:null===(a=e.appContext)||void 0===a?void 0:a.$env,$apiUrl:null===(r=e.appContext)||void 0===r?void 0:r.$domains.imApi,$wsUrl:null===(s=e.appContext)||void 0===s?void 0:s.$domains.imFrontier}}}),l=(0,K.qj)(Zp.O),c=(0,X.fz)(eo.GV);(0,y.useEffect)((()=>{c.getRiskParams(0).then((o=>{var n;Object.keys(o).forEach((e=>{void 0!==o[e]?o[e]=String(o[e]):o[e]=""})),o.referer||(o.referer=window.location.href);const c={appId:1459,userId:null!==(n=null==e?void 0:e.uid)&&void 0!==n?n:"",secUid:null==e?void 0:e.secUid,deviceId:null!=a?a:"",appKey:"e1bd35ec9db7b8d846de66ed140b1ad9",fpId:9,method:1,apiUrl:r,frontierUrl:s,headers:Object.assign(Object.assign({},o),{from_appID:"1988",app_language:i,app_name:"tiktok_web",channel:"web",user_agent:navigator.userAgent}),extended:{device_id:void 0,ttwid:window.decodeURIComponent(null!=t?t:"")},timeout:5e3,disableInitPull:!0,eventListner(e){l.handleImEvent(e)}};Object.assign(c,{debug:!1,service:5,withCredentials:!0}),l.initSDK(c)}))}),[o,null==n?void 0:n.name,null==e?void 0:e.secUid,null==e?void 0:e.uid,a,t,l,i,c,r,s])}(),function(){const e=(0,K.mp)(Zp.O,{dependencies:[],selector:e=>e.messageCount}),t=(0,K.mp)(um,{dependencies:[],selector:e=>e.noticeCount.reduce(((e,{count:t})=>e+t),0)}),i=(0,y.useMemo)((()=>e+t),[e,t]);(0,y.useEffect)((()=>{if(i>0){const e=(0,q.a1)(i);pm.test(document.title)?document.title=document.title.replace(pm,`(${e})`):document.title=`(${e})${document.title}`}else document.title=document.title.replace(pm,"")}),[i])}();const l=(0,qp.xW)(),c=(0,y.useCallback)((()=>{s.handleEnterChatList(r)}),[r,s]),d=(0,q.a1)(r);return(0,o.jsx)(zp.u,Object.assign({overlay:n("webdm_message_button"),placement:"bottom"},{children:(0,o.jsxs)(gm,Object.assign({removeMarginLeft:e},{children:[(0,o.jsx)(On.v,Object.assign({forceSSR:!l,to:`/messages?lang=${a}`,onClick:c},{children:(0,o.jsx)("span",{children:(0,o.jsx)(i,{},void 0)},void 0)}),void 0),r>0&&(0,o.jsx)(Om,Object.assign({long:r>10},{children:d}),void 0)]}),void 0)}),void 0)};var Im=i(13033);let vm=class{constructor(e){this.fetch=e}postScheduleRecord(e){return this.fetch.post("/api/v1/post_schedule/ack/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken})})}updateRedDot(e){return this.fetch.post("/api/reddot/report",{query:Object.assign({},e)})}};vm=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],vm);const ym="upload-long-video";var Cm,fm;!function(e){e[e.None=0]="None",e[e.Upload=1]="Upload",e[e.Inbox=2]="Inbox",e[e.EditProfile=3]="EditProfile"}(Cm||(Cm={})),function(e){e[e.Schedule=0]="Schedule",e[e.LongVideo=1]="LongVideo"}(fm||(fm={}));let Nm=class extends le.D{constructor(e,t){var i,o,n,a,r,s,l,c,d,_,u;super(),this.service=e,this.home=t,this.defaultState={tooltipPriority:(null===(o=null===(i=this.home.state.appContext)||void 0===i?void 0:i.$user)||void 0===o?void 0:o.showScheduleTips)||(null!==(r=null===(a=null===(n=this.home.state.appContext)||void 0===n?void 0:n.$user)||void 0===a?void 0:a.longVideoMinutes)&&void 0!==r?r:0)>0&&!Im.iv.getItem(ym)?1:3,uploadTooltipType:(null!==(c=null===(l=null===(s=this.home.state.appContext)||void 0===s?void 0:s.$user)||void 0===l?void 0:l.longVideoMinutes)&&void 0!==c?c:0)>0&&!Im.iv.getItem(ym)?1:0,redDot:null!==(u=null===(_=null===(d=this.home.state.appContext)||void 0===d?void 0:d.$user)||void 0===_?void 0:_.redDot)&&void 0!==u?u:[]}}setTooltipPriority(e,t){e.tooltipPriority=t}deleteTypeRedDot(e,t){const i=[...e.redDot],o=i.indexOf(t);i.splice(o,1),e.redDot=i}postScheduleRecord(e){return e.pipe((0,hi.z)((e=>this.service.postScheduleRecord(e).pipe((0,pe.U)((()=>this.noop()))))))}updateRedDot(e){return e.pipe((0,hi.z)((({redirect:e,type:t})=>this.service.updateRedDot({type:t}).pipe((0,ni.b)((()=>{e&&(location.href=e)})),(0,pe.U)(())))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],Nm.prototype,"setTooltipPriority",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],Nm.prototype,"deleteTypeRedDot",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Nm.prototype,"postScheduleRecord",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],Nm.prototype,"updateRedDot",null),Nm=(0,p.__decorate)([(0,de.Y)("Header"),(0,p.__metadata)("design:paramtypes",[vm,$.G])],Nm);const Rm=(0,Bo.Z)("div",{target:"efubjyv0"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginStart:"24px"})),{position:"relative",width:"32px",height:"32px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"50%",cursor:"pointer"},"label:DivProfileContainer;");Rm.defaultProps=Object.assign(Object.assign({},Rm.defaultProps),{"data-e2e":"profile-icon"});const Lm=(0,y.memo)((function(e){var t;const{children:i,style:n={}}=e,{appContext:a}=(0,K.mp)($.G);return(0,o.jsx)(Rm,Object.assign({style:Object.assign({backgroundImage:`url(${null===(t=null==a?void 0:a.$user)||void 0===t?void 0:t.avatarUri[0]})`},n),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:i}),void 0)}));var bm,Pm=i(87358),Dm=i(10441),Mm=i(4058),xm=i(32568);function wm(){return wm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},wm.apply(this,arguments)}const Um=function(e){return y.createElement("svg",wm({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),bm||(bm=y.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M4.123 12l7.586 7.586a.5.5 0 010 .707l-1.414 1.414a.5.5 0 01-.707 0L.94 13.061a1.5 1.5 0 010-2.122l8.647-8.646a.5.5 0 01.707 0l1.414 1.414a.5.5 0 010 .707L4.123 12z",clipRule:"evenodd"})))};let km=class extends le.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={reportDetail:{isLoading:!1,data:null},reportList:{data:[],hasNextPage:!0,pageCount:0},activeReport:null}}setReportDetail(e,t){e.reportDetail.data=t}setReportDetailLoading(e,t){e.reportDetail.isLoading=t}setReportListData(e,t){e.reportList.data.push(...t.data),e.reportList.hasNextPage=t.hasNextPage,e.reportList.pageCount=t.pageCount}setActiveReport(e,t){e.activeReport=t}getReportDetail(e){return e.pipe((0,me.z)((({reportId:e,reportType:t})=>this.service.getReportDetail({report_id:e,report_type:t}).pipe((0,pe.U)((({body:{detail:e}})=>e?this.getActions().setReportDetail(e):this.noop())),(0,oi.O)(this.getActions().setReportDetailLoading(!0)),(0,xi.l)(this.getActions().setReportDetailLoading(!1)),(0,Ee.n)({callback:this.commonToastError})))))}getReportList(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([e,{reportList:{pageCount:t,hasNextPage:i}}])=>i?this.service.getReportList({start:t,count:15}).pipe((0,pe.U)((({body:{status_code:e,list:i,has_more:o}})=>0!==e?this.noop():this.getActions().setReportListData({data:null!=i?i:[],hasNextPage:o,pageCount:t+15}))),(0,Ee.n)({callback:this.commonToastError})):(0,Ti.of)(this.noop()))))}updateActiveReport(e){return e.pipe((0,hi.z)((e=>[this.getActions().setActiveReport(e)])))}commonToastError(){Ht.h.destroy(),Ht.h.open({content:this.t(ei.kU),duration:3,widthType:"half"})}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"setReportDetail",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"setReportDetailLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"setReportListData",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"setActiveReport",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"getReportDetail",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"getReportList",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],km.prototype,"updateActiveReport",null),km=(0,p.__decorate)([(0,de.Y)("ReportInbox"),(0,p.__param)(1,(0,Zi.t)(Qi.s)),(0,p.__metadata)("design:paramtypes",[Qp,Function])],km);var Fm,Bm,Gm,jm=i(21145);function Hm(){return Hm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Hm.apply(this,arguments)}const Wm=function(e){return y.createElement("svg",Hm({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 20",width:"1em",height:"1em"},e),Fm||(Fm=y.createElement("rect",{width:1.501,height:17.768,fill:"#fff",rx:.5,transform:"scale(1 -1) rotate(45.638 27.162 10.536)"})),Bm||(Bm=y.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M10.57 14.556c1.11 0 2.163-.17 3.11-.472L12.5 12.93a.512.512 0 01-.058-.068 9.006 9.006 0 01-1.873.193c-1.802 0-3.368-.514-4.445-1.267-1.08-.757-1.557-1.658-1.557-2.484 0-.826.476-1.728 1.557-2.485a5.44 5.44 0 01.075-.051L5.11 5.702c-1.266.94-2.043 2.207-2.043 3.602 0 2.9 3.36 5.252 7.503 5.252zM7.475 4.518c.943-.3 1.99-.466 3.093-.466 4.144 0 7.503 2.351 7.503 5.252 0 1.39-.77 2.652-2.03 3.592l-1.09-1.066a5.9 5.9 0 00.062-.042c1.08-.757 1.557-1.658 1.557-2.484 0-.826-.476-1.728-1.557-2.485-1.076-.753-2.643-1.267-4.445-1.267-.65 0-1.268.067-1.844.188l-1.25-1.222z",clipRule:"evenodd"})),Gm||(Gm=y.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.357 11.81a2.626 2.626 0 01-3.31-3.236l3.31 3.236zM9.803 6.792a2.626 2.626 0 013.296 3.224L9.804 6.792z",clipRule:"evenodd"})))};var Vm=i(39556),Ym=i.n(Vm);function Km(e){if(isNaN(Number(e)))return"";const t=Ym().unix(Number(e)),i=e=>e.toString().padStart(2,"0"),o=i(t.month()+1),n=i(t.date()),a=i(t.hour()),r=i(t.minute()),s=i(t.second());return`${t.year()}-${o}-${n} ${a}:${r}:${s}`}const zm=(0,ae.Z)("div",{target:"egjh0py0"})({display:"flex",padding:"10px 0"},"label:DivItemContainer;"),$m=(0,ae.Z)("img",{target:"egjh0py1"})((({theme:{direction:e}})=>[{height:"48px",width:"48px",borderRadius:"50%"},(0,re.YJ)({direction:e,marginEnd:"12px"})]),"label:ImgLeftIcon;"),qm=(0,ae.Z)("img",{target:"egjh0py2"})((({theme:{colors:e}})=>({objectFit:"cover",backgroundColor:e.TextTertiary})),"label:ImgCover;"),Zm=(0,ae.Z)("div",{target:"egjh0py3"})({flex:1,display:"flex",justifyContent:"space-between"},"label:DivRightContent;"),Qm=(0,ae.Z)("div",{target:"egjh0py4"})((({theme:{colors:e,direction:t}})=>[{flex:1,color:e.TextPrimary},(0,re.YJ)({direction:t,marginEnd:"12px"})]),"label:DivDialogContent;"),Xm=(0,ae.Z)("span",{target:"egjh0py5"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{lineHeight:"17px"}]),"label:SpanTitle;"),Jm=(0,ae.Z)("div",{target:"egjh0py6"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"17px"}]),"label:DivContent;"),eE=(0,ae.Z)("span",{target:"egjh0py7"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTime;"),tE=(0,ae.Z)("div",{target:"egjh0py8"})({width:"42px",height:"56px",borderRadius:"2px",overflow:"hidden",position:"relative"},"label:DivImgWrapper;"),iE=(0,ae.Z)("div",{target:"egjh0py9"})((({theme:{direction:e}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, .5)"},(0,re.YJ)({direction:e,start:0})]),"label:DivViolationMask;"),oE=({item:e,isV2:t})=>{const[i,n]=(0,y.useState)(!1),a=(0,y.useCallback)((()=>{n(!0)}),[]),{title:r="",content:s="",time:l="",cover_url:c="",avatar_url:d="",has_mask:_=!1}=e;return(0,o.jsxs)(zm,{children:[(0,o.jsx)($m,{src:d||jm},void 0),(0,o.jsxs)(Zm,{children:[(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Xm,{children:r},void 0),(0,o.jsxs)(Jm,{children:[s," ",(0,o.jsx)(eE,{children:t?Km(l):l},void 0)]},void 0)]},void 0),c&&(0,o.jsxs)(tE,{children:[(0,o.jsx)(qm,{width:"100%",height:"100%",src:c,onLoad:a},void 0),_&&i&&(0,o.jsx)(iE,{children:(0,o.jsx)(Wm,{width:20,height:20},void 0)},void 0)]},void 0)]},void 0)]},void 0)},nE=(0,ae.Z)("div",{target:"eaptjjg0"})((({theme:{direction:e}})=>[{paddingTop:"8px",display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflowY:"auto"},(0,re.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})]),"label:DivReportDetail;"),aE=({reportId:e,reportType:t})=>{const{reportDetail:{isLoading:i,data:n}}=(0,K.mp)(km),a=(0,K.qj)(km),r=(0,y.useCallback)((()=>{a.getReportDetail({reportId:e,reportType:t})}),[e,t,a]);if((0,y.useEffect)((()=>{r()}),[r]),i)return(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0);if(!n)return(0,o.jsx)("div",{},void 0);const{text_infos:s}=n,l=void 0!==t;return(0,o.jsx)(nE,{children:null==s?void 0:s.map(((e,t)=>(0,o.jsx)(oE,{item:e,isV2:l},t)))},void 0)};var rE,sE=i(53304);function lE(){return lE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},lE.apply(this,arguments)}const cE=function(e){return y.createElement("svg",lE({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32",width:"1em",height:"1em"},e),rE||(rE=y.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M16.58 6.023c-2.175-1.546-4.752-1.507-6.651-1.157a14.519 14.519 0 00-3.097.948 8.763 8.763 0 00-.252.116l-.016.008-.006.003-.004.001A1 1 0 006 6.838v20.495c0 .369.298.667.667.667h.666A.667.667 0 008 27.333v-8.247l.233-.09c.515-.19 1.236-.42 2.059-.57 1.674-.31 3.597-.27 5.129.819 2.174 1.546 4.751 1.506 6.65 1.156a14.515 14.515 0 003.097-.948 8.48 8.48 0 00.253-.116l.015-.007h.001l.005-.003.003-.002A1 1 0 0026 18.43V6.838a1 1 0 00-1.444-.896h-.001l-.006.003a3.144 3.144 0 01-.186.085 12.52 12.52 0 01-2.654.812c-1.675.309-3.598.27-5.13-.82zm-6.288.81c1.674-.308 3.597-.269 5.129.82 2.174 1.546 4.751 1.506 6.65 1.156a14.358 14.358 0 001.929-.5v9.464a12.486 12.486 0 01-2.292.661c-1.674.309-3.597.27-5.129-.82-2.174-1.545-4.751-1.506-6.65-1.156a14.35 14.35 0 00-1.929.5V7.495l.233-.09c.515-.19 1.236-.42 2.059-.57z",clipRule:"evenodd"})))};var dE;function _E(){return _E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_E.apply(this,arguments)}const uE=function(e){return y.createElement("svg",_E({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 16",width:"1em",height:"1em"},e),dE||(dE=y.createElement("path",{fill:"#161823",fillOpacity:.5,fillRule:"evenodd",d:"M12.305 7.529L6.874 2.098a.333.333 0 00-.472 0l-.471.471a.333.333 0 000 .471L10.891 8l-4.96 4.96a.333.333 0 000 .471l.471.471c.13.13.342.13.472 0l5.43-5.43a.667.667 0 000-.943z",clipRule:"evenodd"})))},pE={101:"report_inbox_video",102:"report_inbox_comment",103:"report_inbox_account",107:"report_inbox_live",130:"report_inbox_livecomment",106:"report_inbox_directmessage",115:"report_inbox_directmessage",123:"report_inbox_directmessage",105:"report_inbox_sound",119:"report_inbox_hashtag",141:"shoutouts_detail_comment_report_title",142:"tns_intro_reporter_title",160:"%s - qareport_question",230:"profile_page_events_list",210:"photo_name_nocaption"},mE={1:"report_inbox_inreview",3:"report_inbox_violation",2:"report_inbox_noviolation"},EE=(0,ae.Z)("div",{target:"e1cbfxtu0"})((({theme:{colors:e,direction:t},isNotice:i,isMobile:o=!1})=>[{height:"68px",minHeight:"68px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",cursor:"pointer",":hover":o?{}:{backgroundColor:e.BGPlaceholderDefault}},(0,re.YJ)({direction:t,paddingStart:"16px",paddingEnd:i?"16px":"24px"})]),"label:DivReportItemContainer;"),gE=(0,ae.Z)("div",{target:"e1cbfxtu1"})((({theme:{colors:e}})=>[{minWidth:"48px",width:"48px",height:"48px",borderRadius:"24px",border:`1px solid ${e.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center"}]),"label:DivFlagContainer;"),hE=(0,ae.Z)("div",{target:"e1cbfxtu2"})((({theme:{direction:e}})=>[{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden",wordWrap:"break-word"},(0,re.YJ)({direction:e,marginStart:"12px"})]),"label:DivReportItemContent;"),TE=(0,ae.Z)("div",{target:"e1cbfxtu3"})((({theme:{direction:e}})=>[Object.assign({minWidth:"16px",width:"16px",height:"16px"},"rtl"===e&&{transform:"rotate(180deg)"})]),"label:DivArrowContainer;"),SE=(0,ae.Z)("span",{target:"e1cbfxtu4"})((({theme:e,isNotice:t})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextPrimary",fontWeight:"semiBold"}),{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:t?"normal":"nowrap",lineHeight:"17px"}]),"label:SpanTitle;"),OE=(0,ae.Z)("span",{target:"e1cbfxtu5"})((({theme:e,isNotice:t})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:t?"TextPrimary":"TextTertiary"}),{lineHeight:"17px"}]),"label:SpanSubtitle;"),AE=(0,ae.Z)("span",{target:"e1cbfxtu6"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTimestamp;"),IE=(0,ae.Z)("div",{target:"e1cbfxtu7"})((({theme:{direction:e}})=>[{position:"relative",width:"42px",minWidth:"42px",height:"56px",minHeight:"56px",borderRadius:"2px",overflow:"hidden"},(0,re.YJ)({direction:e,marginStart:"12px"})]),"label:DivCoverImageWrapper;"),vE=(0,ae.Z)("img",{target:"e1cbfxtu8"})((({theme:{colors:e},isNotLoaded:t})=>[Object.assign({width:"100%",height:"100%",objectFit:"cover"},t?{backgroundColor:e.TextTertiary}:{})]),"label:ImgCoverImage;"),yE=(0,ae.Z)("div",{target:"e1cbfxtu9"})({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, .5)"},"label:DivViolationMask;"),CE=(0,ae.Z)("span",{target:"e1cbfxtu10"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"70%",float:"left"},"label:SpanReportBoxRow;"),fE=({report:e,onClick:t})=>{const{timeTranslator:i}=(0,wu.e)(),n=(0,No.Q)(),{$isMobile:a}=(0,q.m7)((0,te.L)((()=>["$isMobile"]),[])),[r,s]=(0,y.useState)(!1),l=pE[e.report_type]?n(pE[e.report_type]):"",c=i(1e3*Number(e.modify_time)),d=(0,y.useCallback)((()=>{t()}),[t]),_=(0,y.useCallback)((()=>{s(!0)}),[]),u=mE[e.status]?n(mE[e.status]):"";return(0,o.jsxs)(EE,Object.assign({onClick:d,isMobile:a},{children:[(0,o.jsx)(gE,{children:(0,o.jsx)(cE,{width:32,height:32},void 0)},void 0),(0,o.jsxs)(hE,{children:[(0,o.jsx)(SE,{children:(()=>{if(e.title)return e.title;if(160===e.report_type){const t=` - ${n("qareport_question")||"Question"}`;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(CE,{children:e.object_desc},void 0),(0,o.jsx)("span",{children:t.padStart(t.length+1)},void 0)]},void 0)}return l.replace("%s",e.object_owner_name||e.object_desc||"")})()},void 0),(0,o.jsxs)(OE,{children:[n("report_inbox_status"),": ",u,(0,o.jsx)(AE,{children:c.padStart(c.length+1)},void 0)]},void 0)]},void 0),e.cover_image?(0,o.jsxs)(IE,{children:[(0,o.jsx)(vE,{isNotLoaded:!r,src:e.cover_image,onLoad:_},void 0),3===e.status&&r&&(0,o.jsx)(yE,{children:(0,o.jsx)(Wm,{width:20,height:20},void 0)},void 0)]},void 0):(0,o.jsx)(TE,{children:(0,o.jsx)(uE,{width:16,height:16},void 0)},void 0)]}),void 0)},NE=(0,ae.Z)("div",{target:"eq5dlep0"})({display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflow:"auto",height:"100%"},"label:DivReportList;"),RE=()=>{const{reportList:{data:e,hasNextPage:t}}=(0,K.mp)(km),i=(0,K.qj)(km),n=(0,y.useRef)(null);(0,y.useEffect)((()=>{e.length>0||i.getReportList()}),[i,e.length]);const a=(0,y.useCallback)((()=>{i.getReportList()}),[i]),r=(0,y.useCallback)((e=>()=>{i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]);return(0,sE.s)({elemRef:n,onHitBottom:a,bottomThreshold:200,throttle:200}),(0,o.jsxs)(NE,Object.assign({ref:n},{children:[e.map(((e,t)=>(0,o.jsx)(fE,{report:e,onClick:r(e)},t))),t&&(0,o.jsx)("div",{children:(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0)},LE=(0,ae.Z)("div",{target:"e115u39r0"})({height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden"},"label:DivReportInboxContainer;"),bE=(0,ae.Z)("div",{target:"e115u39r1"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"0 16px",margin:"24px 0 18px"},"label:DivHeader;"),PE=(0,ae.Z)("span",{target:"e115u39r2"})((({theme:e})=>[(0,re.GI)({theme:e,fontFamily:"Sofia",typography:"H4",color:"TextPrimary",fontWeight:"bold"})]),"label:SpanHeaderTitle;"),DE=(0,ae.Z)("div",{target:"e115u39r3"})((({theme:{direction:e}})=>[Object.assign({width:"24px",height:"24px",cursor:"pointer"},"rtl"===e&&{transform:"rotate(180deg)"})]),"label:DivBackButton;"),ME=({onClose:e})=>{var t,i;const{reportDetail:n,activeReport:a}=(0,K.mp)(km),r=(0,No.Q)(),s=(0,K.qj)(km),l=(0,y.useCallback)((()=>{null===a?e():s.setActiveReport(null)}),[a,s,e]),c=r("report_inbox_title"),d=null!==a&&null!==(i=null===(t=n.data)||void 0===t?void 0:t.tab_title)&&void 0!==i?i:c;return(0,o.jsxs)(LE,{children:[(0,o.jsxs)(bE,{children:[(0,o.jsx)(DE,Object.assign({onClick:l},{children:(0,o.jsx)(Um,{width:24,height:24},void 0)}),void 0),(0,o.jsx)(PE,{children:d},void 0)]},void 0),null!==a?(0,o.jsx)(aE,{reportId:a.reportId,reportType:a.reportType},void 0):(0,o.jsx)(RE,{},void 0)]},void 0)};var xE=i(25615),wE=i.n(xE),UE=i(2723),kE=i(89436),FE=i(98691),BE=i(87700),GE=i(59130),jE=i(97099),HE=i(84698);const WE=(0,ae.Z)("div",{target:"e1d0xjxi0"})({padding:"88px 32px 0",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivErrorContainer;"),VE=(0,ae.Z)("p",{target:"e1d0xjxi1"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{marginTop:"20px"},"label:PErrorTitle;"),YE=(0,ae.Z)("p",{target:"e1d0xjxi2"})((({theme:e})=>(0,re.GI)({theme:e,typography:"H6",color:"TextSecondary"})),{marginTop:"12px",textAlign:"center"},"label:PErrorDesc;"),KE={500:{title:"inbox_all_activity",desc:"inbox_default_text",Icon:FE.Z},2:{title:"Inbox_Comments_on_your_videos",desc:"Inbox_When_someone_comments_on__one_of_your_videos_you_ll_see_it_here",Icon:BE.Z},7:{title:"Inbox_New_followers",desc:"Inbox_When_someone_new_follows_you_you_ll_see_it_here",Icon:GE.Z},3:{title:"Inbox_Likes_on_your_videos",desc:"Inbox_When_someone_likes_one_of_your_videos_you_ll_see_it_here",Icon:jE.Z},6:{title:"Inbox_Mentions_of_You",desc:"Inbox_When_someone_mentions_you_you_ll_see_it_here",Icon:HE.Z}},zE=(0,y.memo)((function({type:e}){const t=(0,No.Q)(),{colors:i}=(0,a.a)(),{title:n,desc:r,Icon:s}=KE[e];return(0,o.jsxs)(WE,{children:[(0,o.jsx)(s,{width:70,height:70,fill:i.TextQuaternary},void 0),(0,o.jsx)(VE,{children:t(n)},void 0),(0,o.jsx)(YE,{children:t(r)},void 0)]},void 0)})),$E=({item:e,onClick:t})=>{var i,n,a,r,s,l,c;const{$isMobile:d=!1}=null!==(i=(0,te.L)((()=>["$isMobile"]),[]))&&void 0!==i?i:{},{timeTranslator:_}=(0,wu.e)(),u=_(1e3*Number(e.create_time)),p=null!==(r=null===(a=null===(n=e.template_notice)||void 0===n?void 0:n.notice)||void 0===a?void 0:a.content)&&void 0!==r?r:"",m=(0,y.useCallback)((()=>{d?window.location.href="/report/inbox":null==t||t()}),[d,t]);return(0,o.jsxs)(EE,Object.assign({isNotice:!0,onClick:m},{children:[(0,o.jsx)(gE,{children:(0,o.jsx)(cE,{width:32,height:32},void 0)},void 0),(0,o.jsx)(hE,{children:(0,o.jsxs)(SE,Object.assign({isNotice:!0},{children:[null===(c=null===(l=null===(s=e.template_notice)||void 0===s?void 0:s.notice)||void 0===l?void 0:l.title)||void 0===c?void 0:c.title,":",(0,o.jsxs)(OE,Object.assign({isNotice:!0},{children:[p.padStart(p.length+1),(0,o.jsx)(AE,{children:u.padStart(u.length+1)},void 0)]}),void 0)]}),void 0)},void 0),(0,o.jsx)(TE,{children:(0,o.jsx)(uE,{width:16,height:16},void 0)},void 0)]}),void 0)};var qE=i(70756);function ZE({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,kE.e)();return t=(0,qE.ot)(t),(0,y.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}function QE({uniqueId:e,onClick:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const r=(0,K.mp)($.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.$user)&&(null===(i=null==o?void 0:o.$user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]}),s=(0,X.fz)(bo._e);return(0,y.useCallback)((e=>{var l;let c=i;a&&(c=null!==(l=function(e){let t=e.target;for(;!((null==t?void 0:t.dataset.method)||t===e.currentTarget&&t);)t=t.parentElement;return t.dataset.method}(e))&&void 0!==l?l:i),null==t||t(e);const d=r?"enter_personal_homepage":"enter_personal_detail";s.handleEnterPage(d,{enter_method:c,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:oe.WB.commonParams.page_name})}),[i,a,t,r,s,o,n])}function XE(e){const{vid:t,authorId:i}=e,o=(0,X.fz)(bo._e);return(0,y.useCallback)((()=>{o.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:t,to_group_id:t,to_author_id:i})}),[i,o,t])}const JE=(0,ae.Z)("div",{target:"exfus50"})((({theme:e})=>[(0,re.GI)({theme:e,typography:"H6"}),re.gi,{display:"flex",flexDirection:"row",padding:"10px 16px",alignItems:"flex-start",cursor:"pointer",":hover":{background:e.colors.BGView}}]),"label:DivItemContainer;"),eg=(0,ae.Z)("div",{target:"exfus51"})({position:"relative",width:"48px",height:"48px",flex:"0 0 48px"},"label:DivAvatarContainer;"),tg=(0,ae.Z)(Dp.q,{target:"exfus52"})((({size:e,multiple:t,theme:i})=>t?{position:"absolute",border:`1px solid ${i.colors.BGPrimary}`,background:i.colors.BGPrimary,boxSizing:"content-box",":first-of-type":{right:0,top:0},":last-of-type":{left:0,bottom:0}}:{flex:`0 0 ${e}px`}),"label:StyledAvatar;"),ig=(0,ae.Z)(Et.W,{target:"exfus53"})({alignSelf:"center",flex:"0 0 auto","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;"),og=(0,ae.Z)("div",{target:"exfus54"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:DivVideoCover;"),ng=(0,ae.Z)(On.v,{target:"exfus55"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:StyledLinkVideoCover;"),ag=(0,ae.Z)("div",{target:"exfus56"})({padding:"0 12px",flex:"1 1 auto"},"label:DivContentContainer;"),rg=({theme:e})=>({fontWeight:e.fontWeights.semiBold}),sg=(0,ae.Z)("p",{target:"exfus57"})(rg,"label:PTitleText;"),lg=(0,ae.Z)("a",{target:"exfus58"})(rg,"label:ATitleLink;"),cg=(0,ae.Z)(On.v,{target:"exfus59"})(rg,"label:StyledTitleTextLink;"),dg=(0,ae.Z)("p",{target:"exfus510"})((0,re.FC)(7),(({theme:e})=>({color:e.colors.TextTertiary,maxHeight:130,wordBreak:"break-word"})),"label:PDescText;"),_g=(0,ae.Z)("span",{target:"exfus511"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:SpanPrimary;"),ug=(0,ae.Z)(dg,{target:"exfus512"})((({theme:e})=>({position:"relative",paddingLeft:"8px",marginTop:"4px",lineClamp:1,WebkitLineClamp:1,"::before":{content:'""',position:"absolute",top:0,left:0,width:"2px",height:"100%",background:e.colors.LineSecondary}})),"label:StyledExtraText;"),pg=(0,ae.Z)("div",{target:"exfus513"})({marginTop:"8px"},"label:DivFollowReqButtonWrapper;"),mg=(0,ae.Z)(Et.W,{target:"exfus514"})({display:"inline-flex",":not(:first-of-type)":{marginLeft:"8px"}},"label:StyledFollowReqButton;"),Eg=(0,y.memo)((function({item:e}){var t,i,n,a,r;const s=(0,K.mp)(Mo.z,{selector:t=>{var i;return t.users[null!==(i=e.comment.comment.user.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),l=e.comment.aweme,c=`/@${null==l?void 0:l.author.uid}/video/${null==l?void 0:l.aweme_id}`,d=(0,hp.yl)({uniqueId:null!==(t=null==s?void 0:s.uniqueId)&&void 0!==t?t:"",secUid:null==s?void 0:s.secUid}),_=XE({vid:null==l?void 0:l.aweme_id,authorId:null==l?void 0:l.author.uid}),{handleBefore:u,state:p}=(0,y.useMemo)((()=>({handleBefore:()=>{Im.To.setItem("highlight_comment",{id:e.comment.comment.cid,groupId:e.comment.aweme.aweme_id,show:!0}),_()},state:{browserMode:!0,cid:e.comment.comment.cid,vid:e.comment.aweme.aweme_id}})),[_,e.comment.aweme.aweme_id,e.comment.comment.cid]),m=ZE({href:`${c}?browserMode=1`,state:p,shouldUsePush:!0,beforeStart:u}),E=QE({uniqueId:null==s?void 0:s.uniqueId,onClick:Jt.UW,enter_method:"click_head"}),g=QE({uniqueId:null==s?void 0:s.uniqueId,onClick:Jt.UW,enter_method:"click_name"}),h=(0,X.fz)(bo._e),T=(0,y.useCallback)((e=>{e.stopPropagation(),h.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:null==l?void 0:l.aweme_id,to_group_id:null==l?void 0:l.aweme_id,to_author_id:null==l?void 0:l.author.uid})}),[h,null==l?void 0:l.author.uid,null==l?void 0:l.aweme_id]);return s?(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:m},{children:[(0,o.jsx)(On.v,Object.assign({to:d,onClick:E},{children:(0,o.jsx)(tg,{size:48,src:s.avatarThumb,multiple:!1},void 0)}),void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(cg,Object.assign({"data-e2e":"inbox-title",to:d,onClick:g},{children:s.uniqueId}),void 0),(0,o.jsx)(gg,{item:e,user:s},void 0)]},void 0),(0,o.jsx)(On.v,Object.assign({to:c,onClick:T},{children:(0,o.jsx)(og,{style:{backgroundImage:`url(${null===(r=null===(a=null===(n=null===(i=e.comment.aweme)||void 0===i?void 0:i.video)||void 0===n?void 0:n.cover)||void 0===a?void 0:a.url_list)||void 0===r?void 0:r[0]})`}},void 0)}),void 0)]}),void 0):(0,wi.G)(["user"])})),gg=(0,y.memo)((function({item:e,user:t}){var i,n;const{timeTranslator:a,t:r}=(0,wu.e)(),{comment:s,create_time:l}=e,{comment_type:c,reply_comment:d}=s,_=(0,o.jsxs)(o.Fragment,{children:["",a(1e3*Number(l))]},void 0);return 2===c||11===c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(_g,{children:`${r("Inbox_replied_to_your_comment").replace("%s","")}: ${null!==(i=s.comment.text)&&void 0!==i?i:""}`},void 0),_]}),void 0),(0,o.jsx)(ug,{children:`${null!==(n=null==t?void 0:t.uniqueId)&&void 0!==n?n:""}: ${null==d?void 0:d.text}`},void 0)]},void 0):17===c||18===c?(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(_g,{children:r("inbox_videoreply")},void 0),_]}),void 0):(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(_g,{children:r("Inbox_commented").replace(/%(s|@)/g,"")+s.comment.text},void 0),_]}),void 0)})),hg=(0,y.memo)((function({item:e}){var t,i,n,a,r,s;const{t:l,timeTranslator:c}=(0,wu.e)(),d=(0,K.mp)(Mo.z,{selector:t=>{var i;return t.users[null!==(i=e.duet.aweme.author.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),_=(0,hp.fH)({videoId:e.duet.aweme.aweme_id,uniqueId:null!==(t=null==d?void 0:d.uniqueId)&&void 0!==t?t:"",secUid:null==d?void 0:d.secUid}),u=(0,hp.yl)({uniqueId:null!==(i=null==d?void 0:d.uniqueId)&&void 0!==i?i:"",secUid:null==d?void 0:d.secUid}),p=QE({uniqueId:null==d?void 0:d.uniqueId,enter_method:"click_head"}),m=QE({uniqueId:null==d?void 0:d.uniqueId,enter_method:"click_name"}),E=ZE({href:_,shouldUsePush:!0,beforeStart:XE({vid:e.duet.aweme.aweme_id,authorId:e.duet.aweme.author.uid})});return d?(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:E},{children:[(0,o.jsx)(On.v,Object.assign({to:u,onClick:p},{children:(0,o.jsx)(tg,{size:48,src:d.avatarThumb},void 0)}),void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(cg,Object.assign({"data-e2e":"inbox-title",to:u,onClick:m},{children:d.uniqueId}),void 0),(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[l("Inbox_created_a_duet_with_you").replace(/%(s|#)/g,"")," ",c(1e3*Number(e.create_time))]}),void 0)]},void 0),(0,o.jsx)(og,{style:{backgroundImage:`url(${null===(s=null===(r=null===(a=null===(n=e.duet.aweme)||void 0===n?void 0:n.video)||void 0===a?void 0:a.cover)||void 0===r?void 0:r.url_list)||void 0===s?void 0:s[0]})`}},void 0)]}),void 0):(0,wi.G)(["user"])}));var Tg=i(59151),Sg=i(33104);const Og=(0,y.memo)((function({item:e}){var t,i,n;const a=(0,K.mp)($.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"":"."},dependencies:[]}),{t:r,timeTranslator:s}=(0,wu.e)(),l=(0,K.mp)(Mo.z,{selector:t=>{var i;return t.users[null!==(i=e.follow.from_user.unique_id)&&void 0!==i?i:""]},dependencies:[e.follow.from_user.unique_id]}),{handleFollow:c,isFollowing:d,text:_,relation:u}=(0,Sg.w)({uniqueId:null!==(t=null==l?void 0:l.uniqueId)&&void 0!==t?t:"",followerStatus:null===(i=null==l?void 0:l.extraInfo)||void 0===i?void 0:i.followerStatus,prevent:!0,teaParams:{enter_from:"homepage_message",page_name:"homepage_message",page_type:oe.WB.commonParams.page_name,previous_page:oe.WB.commonParams.page_name}}),p=0===e.follow.follow_button_type?r("Inbox_is_following_you").replace(/%s/g,"")+a:r("Inbox_started_following_you").replace(/%s/g,"")+a,m=s(1e3*Number(e.create_time)),E=(0,hp.yl)({uniqueId:null!==(n=null==l?void 0:l.uniqueId)&&void 0!==n?n:"",secUid:null==l?void 0:l.secUid}),g=ZE({href:E,shouldUsePush:!0,beforeStart:QE({uniqueId:e.follow.from_user.unique_id,enter_method:"click_noti",shouldHandleDom:!0})});return l?(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:g},{children:[(0,o.jsx)(Dp.q,{size:48,src:l.avatarThumb,style:{flex:"0 0 48px"},"data-method":"click_head"},void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(lg,Object.assign({"data-e2e":"inbox-title",href:E,onClick:Jt.PF,"data-method":"click_name"},{children:l.uniqueId}),void 0),(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[p," ",m]}),void 0)]},void 0),(0,o.jsxs)(ig,Object.assign({"data-e2e":2===u?"":"follow-back",onClick:c,size:"tiny",buttonTheme:d?"default":"primary"},{children:[2===u?(0,o.jsx)(Tg.Z,{},void 0):null,_]}),void 0)]}),void 0):(0,wi.G)(["user"])}));var Ag,Ig=i(73487);!function(e){e[e.Single=48]="Single",e[e.Multiple=36]="Multiple"}(Ag||(Ag={}));const vg=(0,y.memo)((function({item:e,onClick:t}){var i,n,a;const r=(0,K.mp)(Mo.z,{selector:t=>{var i;return null===(i=e.digg.from_user)||void 0===i?void 0:i.map((({unique_id:e})=>t.users[null!=e?e:""]))},dependencies:[e.digg.from_user]}),s=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`,l=(0,y.useCallback)((i=>{i.preventDefault(),i.stopPropagation(),t(e)}),[e,t]),c=(0,X.fz)(bo._e),d=(0,y.useCallback)((t=>{t.stopPropagation(),c.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid})}),[c,e.digg.aweme.author.uid,e.digg.aweme.aweme_id]);return(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:l},{children:[(0,o.jsx)(yg,{users:r},void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(sg,Object.assign({"data-e2e":"inbox-title",onClick:Jt.UW},{children:(0,o.jsx)(fg,{users:r,merge_count:e.digg.merge_count},void 0)}),void 0),(0,o.jsx)(Cg,{item:e},void 0)]},void 0),(0,o.jsx)(ng,{onClick:d,to:s,style:{backgroundImage:`url(${null===(a=null===(n=null===(i=e.digg.aweme)||void 0===i?void 0:i.video)||void 0===n?void 0:n.cover.url_list)||void 0===a?void 0:a[0]})`}},void 0)]}),void 0)})),yg=(0,y.memo)((function({users:e}){var t,i,n,a,r;const s=Boolean(null==e?void 0:e[1]),l=QE({uniqueId:null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.uniqueId,enter_method:"click_head"});if(!s){const{uniqueId:t="",secUid:a}=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:{},r=(0,hp.yl)({uniqueId:t,secUid:a});return(0,o.jsx)(eg,Object.assign({onClick:Jt.UW},{children:(0,o.jsx)(Ig.rU,Object.assign({to:r,onClick:l},{children:(0,o.jsx)(tg,{size:48,src:null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.avatarThumb},void 0)}),void 0)}),void 0)}return(0,o.jsxs)(eg,Object.assign({"data-e2e":"inbox-avatar-multiple"},{children:[(0,o.jsx)(tg,{size:36,multiple:!0,src:null===(a=null==e?void 0:e[1])||void 0===a?void 0:a.avatarThumb},void 0),(0,o.jsx)(tg,{size:36,multiple:!0,src:null===(r=null==e?void 0:e[0])||void 0===r?void 0:r.avatarThumb},void 0)]}),void 0)})),Cg=(0,y.memo)((function({item:e}){var t;const{t:i,timeTranslator:n}=(0,wu.e)(),a=(0,K.mp)($.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"":"."},dependencies:[]}),r=n(1e3*Number(e.create_time),!0);if(1===e.digg.digg_type)return(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_liked_your_video").replace(/%s/g,"")+a," ",r]}),void 0);if(3===e.digg.digg_type){const{text:n,user:s}=null!==(t=e.digg.comment)&&void 0!==t?t:{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_liked_your_comment").replace(/%s/g,"")+a," ",r]}),void 0),(0,o.jsxs)(ug,{children:[null==s?void 0:s.unique_id,": ",n]},void 0)]},void 0)}return null})),fg=function({merge_count:e,users:t}){const i=(0,No.Q)();return(null==t?void 0:t[1])?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ng,{user:null==t?void 0:t[0]},void 0),","," ",(0,o.jsx)(Ng,{user:null==t?void 0:t[1]},void 0),"number"==typeof e&&e>2&&(0,o.jsxs)(o.Fragment,{children:[" ",i("Inbox_and")," ",i("Inbox_others").replace(/%d/,String(e-2))]},void 0)]},void 0):(0,o.jsx)(Ng,{user:null==t?void 0:t[0]},void 0)},Ng=function({user:e}){const t=QE({uniqueId:null==e?void 0:e.uniqueId,enter_method:"click_name"});if(!e)return null;const{uniqueId:i,secUid:n}=e,a=(0,hp.yl)({uniqueId:i,secUid:n});return(0,o.jsx)(Ig.rU,Object.assign({to:a,onClick:t},{children:e.uniqueId}),void 0)},Rg=(0,y.memo)((function({item:e}){var t,i,n,a,r,s,l;const c=(0,K.mp)(Mo.z,{selector:t=>{var i,o;return t.users[null!==(o=null===(i=e.at.user_info)||void 0===i?void 0:i.unique_id)&&void 0!==o?o:""]},dependencies:[e]}),d=e.at.aweme,_=`/@${null==d?void 0:d.author.uid}/video/${null==d?void 0:d.aweme_id}`,u=(0,hp.yl)({uniqueId:null!==(t=null==c?void 0:c.uniqueId)&&void 0!==t?t:"",secUid:null==c?void 0:c.secUid}),{schema_url:p}=e.at,m=(null!==(i=null==p?void 0:p.match(/cid=(\d+)/))&&void 0!==i?i:[])[1],E=(null!==(n=null==p?void 0:p.match(/detail\/(\d+)/))&&void 0!==n?n:[])[1],g=(0,y.useMemo)((()=>{if(m)return{browserMode:!0,cid:m,vid:E}}),[m,E]),h=XE({vid:null==d?void 0:d.aweme_id,authorId:null==d?void 0:d.author.uid}),T=QE({uniqueId:null==c?void 0:c.uniqueId,onClick:Jt.UW,enter_method:"click_head"}),S=QE({uniqueId:null==c?void 0:c.uniqueId,onClick:Jt.UW,enter_method:"click_name"}),O=ZE({href:`${_}?browserMode=1`,state:g,shouldUsePush:!0,beforeStart:(0,y.useCallback)((()=>{h(),m&&Im.To.setItem("highlight_comment",{id:m,groupId:E,show:!0})}),[m,h,E])}),A=(0,X.fz)(bo._e),I=(0,y.useCallback)((e=>{e.stopPropagation(),A.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:null==d?void 0:d.aweme_id,to_group_id:null==d?void 0:d.aweme_id,to_author_id:null==d?void 0:d.author.uid})}),[A,null==d?void 0:d.author.uid,null==d?void 0:d.aweme_id]);return c?(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:O},{children:[(0,o.jsx)(On.v,Object.assign({to:u,onClick:T},{children:(0,o.jsx)(tg,{size:48,src:c.avatarThumb},void 0)}),void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(cg,Object.assign({"data-e2e":"inbox-title",to:u,onClick:S},{children:c.uniqueId}),void 0),(0,o.jsx)(Lg,{item:e},void 0)]},void 0),(0,o.jsx)(On.v,Object.assign({to:_,onClick:I},{children:(0,o.jsx)(og,{style:{backgroundImage:`url(${null===(l=null===(s=null===(r=null===(a=e.at.aweme)||void 0===a?void 0:a.video)||void 0===r?void 0:r.cover)||void 0===s?void 0:s.url_list)||void 0===l?void 0:l[0]})`}},void 0)}),void 0)]}),void 0):(0,wi.G)(["user"])})),Lg=({item:e})=>{var t;const{t:i,timeTranslator:n}=(0,wu.e)(),{create_time:a,at:r}=e,{sub_type:s,content:l,reply_comment:c}=r,d=(0,o.jsxs)(o.Fragment,{children:["",n(1e3*Number(a))]},void 0);return 1===s?(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_mentioned_you_in_a_video").replace(/%(s|#)/g,""),d]}),void 0):2===s?(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(_g,{children:i("Inbox_mentioned_you_in_a_comment").replace("%@"," ").replace("%#","")+l},void 0),d]}),void 0):5===s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(dg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(_g,{children:i("Inbox_replied_to_your_comment").replace("%s","")+l},void 0),d]}),void 0),(0,o.jsx)(ug,{children:null!==(t=null==c?void 0:c.text)&&void 0!==t?t:""},void 0)]},void 0):null},bg=(0,y.memo)((function({item:e,onLikeClick:t,onReportInboxClick:i}){const n=(0,y.useCallback)((e=>{t(e)}),[t]);return om(e)?(0,o.jsx)(Og,{item:e},void 0):nm(e)?(0,o.jsx)(vg,{item:e,onClick:n},void 0):am(e)?(0,o.jsx)(Eg,{item:e},void 0):rm(e)?(0,o.jsx)(hg,{item:e},void 0):sm(e)?(0,o.jsx)(Rg,{item:e},void 0):lm(e)?(0,o.jsx)($E,{item:e,onClick:i},void 0):null})),Pg=(0,y.memo)((function({uniqueId:e}){var t;const i=(0,No.Q)(),n=(0,K.mp)(Mo.z,{selector:t=>t.users[e],dependencies:[e]}),a=(0,K.qj)(um),r=(0,y.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),a.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==n?void 0:n.id})}),[a,e,null==n?void 0:n.id]),s=(0,hp.yl)({uniqueId:null!==(t=null==n?void 0:n.uniqueId)&&void 0!==t?t:"",secUid:null==n?void 0:n.secUid}),l=ZE({href:s,shouldUsePush:!0,beforeStart:QE({uniqueId:null==n?void 0:n.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0})});return n?(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:l},{children:[(0,o.jsx)(tg,{size:48,src:n.avatarThumb,"data-method":"click_head"},void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(lg,Object.assign({"data-e2e":"inbox-title",href:s,onClick:Jt.PF,"data-method":"click_name"},{children:n.uniqueId}),void 0),(0,o.jsx)(dg,{children:n.nickname},void 0),(0,o.jsxs)(pg,{children:[(0,o.jsx)(mg,Object.assign({size:"tiny",onClick:r(1)},{children:i("delete")}),void 0),(0,o.jsx)(mg,Object.assign({"data-e2e":"inbox-request-accept",size:"tiny",buttonTheme:"primary",onClick:r(0)},{children:i("inbox_request_accept")}),void 0)]},void 0)]},void 0)]}),void 0):(0,wi.G)(["user"])}));var Dg=i(89442);const Mg=(0,ae.Z)("div",{target:"e11z9zg00"})({flex:"1 1 auto",overflow:"auto"},"label:DivInboxContentContainer;"),xg=(0,ae.Z)("p",{target:"e11z9zg01"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"TextTertiary"})),{padding:"0 16px",marginTop:"8px"},"label:PTimeGroupTitle;"),wg=(0,ae.Z)(On.v,{target:"e11z9zg02"})({display:"block",width:"54px",height:"72px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px",margin:"auto"},"label:StyledAnchor;"),Ug=(0,ae.Z)("p",{target:"e11z9zg03"})((({theme:e})=>(0,re.GI)({theme:e,typography:"H6",color:"TextTertiary"})),re.wj,{padding:"8px 48px 2px"},"label:PCommentText;"),kg=(0,ae.Z)("div",{target:"e11z9zg04"})((({theme:{colors:e}})=>({height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)",margin:"8px 16px"})),"label:DivSplit;"),Fg=(0,ae.Z)("div",{target:"e11z9zg05"})({cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"8px"},(({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginStart:"16px",marginEnd:"auto"})),"label:DivBack;"),Bg=(0,ae.Z)(Dg.Z,{target:"e11z9zg06"})((({theme:{direction:e}})=>"ltr"===e?null:{transform:"rotate(180deg)"}),"label:StyledChevronLeftOffset;"),Gg=(0,ae.Z)("div",{target:"e11z9zg07"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3"})),{padding:"8px 24px 8px 16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},"label:DivFollowReqEntranceContainer;"),jg=(0,ae.Z)("span",{target:"e11z9zg08"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:SpanHintContainer;"),Hg=(0,ae.Z)("i",{target:"e11z9zg09"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"8px",background:e.Primary},(0,re.YJ)({direction:t,marginEnd:"8px"})]),"label:IDot;"),Wg=(0,ae.Z)("span",{target:"e11z9zg010"})((({theme:{colors:e,direction:t}})=>[{color:e.TextTertiary,marginRight:"8px"},(0,re.YJ)({direction:t,marginEnd:"8px"})]),"label:SpanHintText;"),Vg=(0,y.memo)((function(e){const t=(0,No.Q)();return(0,o.jsxs)(Fg,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack},{children:[(0,o.jsx)(Dg.Z,{},void 0),(0,o.jsx)("span",{children:t("Back")},void 0)]}),void 0)})),Yg=(0,y.memo)((function(e){const{item:t}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Vg,{onClickBack:e.onClickBack},void 0),(0,o.jsx)(Mg,Object.assign({"data-e2e":"inbox-list"},{children:t.users.map((e=>(0,o.jsx)(Pg,{uniqueId:e},e)))}),void 0)]},void 0)}));var Kg=i(99122);const zg=(0,y.memo)((function(e){const{total:t}=e,i=(0,No.Q)(),{colors:n}=(0,a.a)();return(0,o.jsxs)(Gg,Object.assign({"data-e2e":"inbox-follow-request",onClick:e.onClick},{children:[(0,o.jsx)("h4",{children:i("Inbox_Follow_requests")},void 0),(0,o.jsxs)(jg,{children:[(0,o.jsx)(Hg,{},void 0),(0,o.jsx)(Wg,{children:t},void 0),(0,o.jsx)(Kg.Z,{fill:n.TextTertiary,width:12,height:12},void 0)]},void 0)]}),void 0)})),$g=(0,y.memo)((function({uniqueId:e}){var t;const i=(0,K.mp)(Mo.z,{selector:t=>t.users[e],dependencies:[e]}),{handleFollow:n,isFollowing:a,text:r,relation:s}=(0,Sg.w)({uniqueId:e,prevent:!0,teaParams:{enter_from:"homepage_message"}}),l=(0,hp.yl)({uniqueId:null!==(t=null==i?void 0:i.uniqueId)&&void 0!==t?t:"",secUid:null==i?void 0:i.secUid}),c=ZE({href:l,shouldUsePush:!0,beforeStart:QE({uniqueId:e,enter_method:"click_noti",shouldHandleDom:!0})});return i?(0,o.jsxs)(JE,Object.assign({"data-e2e":"inbox-list-item",onClick:c},{children:[(0,o.jsx)(tg,{size:48,src:i.avatarThumb,"data-method":"click_head"},void 0),(0,o.jsxs)(ag,{children:[(0,o.jsx)(lg,Object.assign({"data-e2e":"inbox-title",href:l,onClick:Jt.PF,"data-method":"click_name"},{children:i.uniqueId}),void 0),(0,o.jsx)(dg,Object.assign({"data-e2e":"inbox-content"},{children:i.nickname}),void 0)]},void 0),(0,o.jsxs)(ig,Object.assign({onClick:n,size:"tiny",buttonTheme:a?"default":"primary"},{children:[2===s?(0,o.jsx)(Tg.Z,{},void 0):null,r]}),void 0)]}),void 0):(0,wi.G)(["user"])})),qg=(0,y.memo)((function(e){var t,i,n;const{item:a}=e,r=(0,No.Q)(),[{loading:s,users:l},c]=(0,K.b7)(um,{selector:e=>e.diggList,dependencies:[]});(0,y.useEffect)((()=>{var e,t;return c.fetchDiggListData({ref_id:null!==(t=null===(e=a.digg.comment)||void 0===e?void 0:e.cid)&&void 0!==t?t:a.digg.aweme.aweme_id}),()=>{c.setDiggList([]),c.setDiggListLoading(!1)}}),[c,a.digg.aweme.aweme_id,null===(t=a.digg.comment)||void 0===t?void 0:t.cid]);const d=(0,y.useCallback)((()=>s&&!l.length?(0,o.jsx)(Vt.g,{size:"small",center:!0},void 0):l.map((e=>(0,o.jsx)($g,{uniqueId:e},e)))),[s,l]),_=(0,qE.ot)(`/@${a.digg.aweme.author.uid}/video/${a.digg.aweme.aweme_id}`),u=(0,y.useCallback)((()=>{location.href=_}),[_]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Fg,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack},{children:[(0,o.jsx)(Bg,{},void 0),(0,o.jsx)("span",{children:r("Back")},void 0)]}),void 0),(0,o.jsxs)(Mg,Object.assign({"data-e2e":"inbox-list"},{children:[(0,o.jsx)(wg,{to:_,style:{backgroundImage:`url(${null===(i=a.digg.aweme.video.cover.url_list)||void 0===i?void 0:i[0]})`},onClick:u},void 0),!!(null===(n=a.digg.comment)||void 0===n?void 0:n.text)&&(0,o.jsx)(Ug,{children:a.digg.comment.text},void 0),(0,o.jsx)(kg,{},void 0),d()]}),void 0)]},void 0)}));var Zg;!function(e){e[e.New=0]="New",e[e.Today=1]="Today",e[e.Yesterday=2]="Yesterday",e[e.ThisWeek=3]="ThisWeek",e[e.ThisMonth=4]="ThisMonth",e[e.Previous=5]="Previous"}(Zg||(Zg={}));const Qg={0:"Inbox_New",1:"Inbox_Today",2:"Inbox_Yesterday",3:"Inbox_This_Week",4:"Inbox_This_Month",5:"Inbox_Previous"},Xg=[0,1,6,(new Date).getDate()].map((e=>function(e=0){return(new Date).setHours(0,0,0,0)/1e3-86400*e}(e))),Jg=e=>{if(!e.has_read)return 0;const t=Xg.findIndex((t=>t<e.create_time));return-1===t?5:t+1},eh=(0,y.memo)((function(e){var t;const{activeGroup:i,item:n,likeItem:a,reportInboxList:r,onLikeItemChange:s,followItem:l,showFollow:c,onFollowChange:d,onHitBottom:_,onReportInboxClick:u}=e,p=(0,X.fz)(tm),m=(0,y.useCallback)((()=>{s(null)}),[s]),E=(0,y.useRef)(null);(0,UE.s)({onHitBottom:_,bottomThreshold:100});const g=(0,y.useCallback)((()=>{d(!1)}),[d]),h=(0,y.useCallback)((()=>{d(!0),p.handleEnterFollow({request_cnt:Number(l.total)})}),[l.total,d,p]);return a?(0,o.jsx)(qg,{item:a,onClickBack:m},void 0):c?(0,o.jsx)(Yg,{onClickBack:g,item:l},void 0):(0,o.jsxs)(Mg,Object.assign({"data-e2e":"inbox-list",ref:E},{children:[500===i&&Boolean(l.total)&&(0,o.jsx)(zg,{onClick:h,total:l.total},void 0),(0,o.jsx)(ih,{item:n,onLikeItemChange:e.onLikeItemChange,reportInboxList:r,activeGroup:i,onReportInboxClick:u},void 0),Boolean(null===(t=n.notice_list)||void 0===t?void 0:t.length)&&n.loading&&(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0)]}),void 0)})),th={preventDefault:wE()},ih=(0,y.memo)((function({item:e,onLikeItemChange:t,activeGroup:i,reportInboxList:n,onReportInboxClick:a}){var r;const s=(0,No.Q)(),l=(0,X.fz)(bo._e),c=(0,X.fz)(tm),d=n[0],_=(0,kE.e)(),u=(0,y.useCallback)((e=>{var o,n,a;if(3===(null==e?void 0:e.digg.digg_type)||1===(null===(o=null==e?void 0:e.digg.from_user)||void 0===o?void 0:o.length)){const t=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`;let i;return 3===e.digg.digg_type&&(null===(n=e.digg.comment)||void 0===n?void 0:n.cid)&&(Im.To.setItem("highlight_comment",{id:e.digg.comment.cid,groupId:e.digg.aweme.aweme_id,show:!0}),i={browserMode:!0,cid:e.digg.comment.cid,vid:e.digg.aweme.aweme_id}),l.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid}),void _(th,{href:t,state:i,shouldUsePush:!0})}t(e),c.handleEnterFold({tab_name:500===i?"all":"likes",group_id:null!==(a=null==e?void 0:e.digg.aweme.aweme_id)&&void 0!==a?a:""})}),[i,l,_,t,c]),p=(0,y.useMemo)((()=>{var t;if(500!==i||!d)return e.notice_list;const o=Jg(d),n=(null!==(t=e.notice_list)&&void 0!==t?t:[]).slice();for(let e=0;e<n.length;e++){const t=n[e],i=Jg(t);if(0===o&&0!==i)return n.splice(e,0,d),n;if(d.create_time>t.create_time)return n.splice(e,0,d),n}return n.push(d),n}),[i,d,e.notice_list]);if(e.loading&&!(null===(r=e.notice_list)||void 0===r?void 0:r.length))return(0,o.jsx)(Vt.g,{center:!0,size:"small"},void 0);if(!(null==p?void 0:p.length))return(0,o.jsx)(zE,{type:i},void 0);let m=Jg(null==p?void 0:p[0]);return(0,o.jsx)(o.Fragment,{children:null==p?void 0:p.map(((e,t)=>{let i=null;return(0===t||0===m&&e.has_read||e.create_time<Xg[m-1])&&(m=Jg(e),i=(0,o.jsx)(xg,{children:s(Qg[m])},m)),(0,o.jsxs)(o.Fragment,{children:[i,(0,o.jsx)(bg,{item:e,onLikeClick:u,onReportInboxClick:a},e.nid)]},void 0)}))},void 0)})),oh=(0,ae.Z)("div",{target:"e1bp8k4k0"})((({theme:{direction:e}})=>[{paddingTop:"24px",flex:"0 0 auto"},(0,re.YJ)({direction:e,paddingStart:"16px"})]),"label:DivInboxHeaderContainer;"),nh=(0,ae.Z)("h4",{target:"e1bp8k4k1"})((({theme:e})=>(0,re.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H4",color:"TextPrimary"})),"label:H4InboxTitle;"),ah=(0,ae.Z)("div",{target:"e1bp8k4k2"})((({theme:e})=>(0,re.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3",color:"TextPrimary"})),{marginTop:"16px",display:"flex",flexDirection:"row",flexWrap:"wrap"},"label:DivGroupContainer;"),rh=e=>({0:{background:e.BGPlaceholderOpaque,":hover":{background:e.ShadowPrimary}},1:{color:e.ConstTextInverse,background:e.TextPrimary}}),sh=(0,ae.Z)("span",{target:"e1bp8k4k3"})((({theme:{colors:e,direction:t},active:i})=>[rh(e)[Number(i)],{":not(:last-child)":[(0,re.YJ)({direction:t,marginEnd:"8px"})]}]),{display:"block",padding:"2px 8px",marginBottom:"12px",textAlign:"center",cursor:"pointer",borderRadius:"12px",transition:"all 300ms"},"label:SpanGroupItem;"),lh={500:"Inbox_All",3:"Inbox_Likes",2:"Inbox_Comments",6:"Inbox_Mentions",7:"Followers"},ch=[500,3,2,6,7],dh=["all","likes","comments","mentions","followers"],_h=(0,y.memo)((function({value:e,onChange:t}){const i=(0,No.Q)(),n=(0,y.useCallback)((e=>()=>{t(e)}),[t]);return(0,o.jsxs)(oh,{children:[(0,o.jsx)(nh,{children:i("Inbox_Notifications")},void 0),(0,o.jsx)(ah,Object.assign({"data-e2e":"inbox-bar"},{children:ch.map(((t,a)=>(0,o.jsx)(sh,Object.assign({"data-e2e":dh[a],active:t===e,onClick:n(t)},{children:i(lh[t])}),t)))}),void 0)]},void 0)})),uh=(0,ae.Z)("div",{target:"e32s1fi0"})({height:"100%",display:"flex",flexDirection:"column"},"label:DivInboxContainer;"),ph=(0,y.memo)((function(){const[e,t]=(0,y.useState)("main"),i=(0,y.useCallback)((()=>{t("report-inbox")}),[]),n=(0,y.useCallback)((()=>{t("main")}),[]),a=(0,K.mp)($.G,{selector:e=>{var t,i,o,n,a;return{uid:null!==(o=null===(i=null===(t=e.appContext)||void 0===t?void 0:t.$user)||void 0===i?void 0:i.uid)&&void 0!==o?o:"",did:null!==(a=null===(n=e.appContext)||void 0===n?void 0:n.$wid)&&void 0!==a?a:""}},dependencies:[]}),[{activeGroup:r,noticeList:s,followRequest:l,reportInboxList:c},d]=(0,K.b7)(um,{selector:e=>{const{activeGroup:t,noticeList:i,followRequest:o,reportInbox:{noticeList:n}}=e;return{activeGroup:t,noticeList:i,followRequest:o,reportInboxList:n}},dependencies:[]}),[_,u]=(0,y.useState)(null),[p,m]=(0,y.useState)(!1),E=(0,y.useCallback)((e=>{d.changeActiveGroup(e),u(null),m(!1)}),[d]);(0,y.useEffect)((()=>{p||setTimeout((()=>{d.fetchNoticeFollowRequest(Object.assign(Object.assign({},a),{refresh:!0}))}),2e3)}),[d,a,p]),(0,y.useEffect)((()=>{l.has_more||0!==l.total?l.has_more&&l.users.length<=10&&d.fetchNoticeFollowRequest(a):m(!1)}),[d,l.has_more,l.total,l.users.length,a]);const g=(0,y.useCallback)((()=>{d.fetchNoticeData()}),[d]);return"report-inbox"===e?(0,o.jsx)(ME,{onClose:n},void 0):(0,o.jsxs)(uh,Object.assign({"data-e2e":"inbox-notifications"},{children:[(0,o.jsx)(_h,{value:r,onChange:E},void 0),(0,o.jsx)(eh,{activeGroup:r,item:s,onHitBottom:g,likeItem:_,onLikeItemChange:u,followItem:l,showFollow:p,onFollowChange:m,reportInboxList:c,onReportInboxClick:i},void 0)]}),void 0)}));var mh=i(35785),Eh=i(27558);const gh=(0,Bo.Z)("div",{target:"e18kkhh40"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginStart:"16px"})),{position:"relative"},"label:DivHeaderInboxContainer;");gh.defaultProps=Object.assign(Object.assign({},gh.defaultProps),{"data-e2e":"inbox-icon"});const hh={cursor:"pointer",display:"block"},Th=(0,Bo.Z)(mh.Z,{target:"e18kkhh41"})(hh,"label:StyledInboxIcon;"),Sh=(0,Bo.Z)(Eh.Z,{target:"e18kkhh42"})(hh,"label:StyledInboxIconActive;"),Oh=(0,Bo.Z)("sup",{target:"e18kkhh43"})((({long:e,theme:t})=>[(0,re.GI)({theme:t,fontFamily:"Proxima",typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse"}),(0,re.YJ)({direction:t.direction,start:"16px"}),{background:t.colors.Primary,minWidth:"20px",height:"20px",display:"flex",justifyContent:"center",borderRadius:"10px",position:"absolute",top:"-20%"},e?{padding:"0 6px"}:{}]),"label:SupBadge;"),Ah=(0,Bo.Z)("div",{target:"e18kkhh44"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P4",color:"ConstTextInverse",fontWeight:"semiBold"})),{display:"flex",padding:"12px",fontSize:"12px"},"label:DivTipWrapper;"),Ih=(0,Bo.Z)("span",{target:"e18kkhh47"})({display:"flex",alignItems:"center",justifyContent:"center","& + &":{marginLeft:"16px"},b:{marginLeft:"2px",fontWeight:600}},"label:SpanTipItem;"),vh=(0,Bo.Z)(Ia.Z,{target:"e18kkhh48"})({position:"absolute",top:"-8px"},(({theme:{direction:e}})=>(0,re.YJ)({direction:e,end:"70px"})),"label:StyledArrow;"),yh=(0,Bo.Z)("div",{target:"e18kkhh49"})((({theme:{colors:e,direction:t},state:i,duration:o})=>[{display:i===Xa.Wj?"none":"block",position:"absolute",width:"376px",height:"640px",top:"45px",background:e.ConstTextInverse,borderRadius:"8px",boxShadow:`0 -4px 32px ${e.ShadowPrimary}`,transition:`all ${o}ms linear`,zIndex:1e3,opacity:Number(i===Xa.cn)},(0,re.YJ)({direction:t,end:"-66px"})]),"label:DivHeaderInboxWrapper;"),Ch={width:16,height:16},fh={2:(0,o.jsx)(Pm.Z,Object.assign({},Ch),void 0),3:(0,o.jsx)(Dm.Z,Object.assign({},Ch),void 0),6:(0,o.jsx)(Mm.Z,Object.assign({},Ch),void 0),7:(0,o.jsx)(xm.Z,Object.assign({},Ch),void 0)},Nh=(0,y.memo)((function(){const e=(0,No.Q)(),t=(0,a.a)(),{pathname:i}=(0,f.TH)(),[{noticeList:n,reportInboxNoticeCount:r},s]=(0,K.b7)(um,{selector:e=>({noticeList:e.noticeCount,reportInboxNoticeCount:e.reportInbox.count}),dependencies:[]}),[{tooltipPriority:l},c]=(0,K.b7)(Nm),{totalText:d,totalLong:_,countList:u,isShowTotal:p}=(0,y.useMemo)((()=>{const e=n.reduce(((e,{count:t})=>e+t),0);return{isShowTotal:e>0,totalText:(0,q.a1)(e+r),totalLong:e+r>10,countList:n.filter((e=>e.count>=0))}}),[n,r]),m=function(){const[e,t]=(0,y.useState)(!1);return(0,y.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}(),[E,g]=(0,y.useState)(!1);(0,y.useEffect)((()=>{let e;return p&&2===l&&(g(!0),e=window.setTimeout((()=>{g(!1),c.setTooltipPriority(3)}),5e3)),()=>{e&&clearTimeout(e)}}),[l,p,c]);const{handleEnter:h}=function({showTip:e}){const t=(0,y.useRef)(0),i=(0,X.fz)(tm),{total:o,countList:n}=(0,K.mp)(um,{dependencies:[],selector:e=>{const t=e.noticeCount;return{total:t.reduce(((e,{count:t})=>e+t),0),countList:t.filter((e=>e.count>=0))}}});(0,y.useEffect)((()=>{t.current=Date.now()}),[]);const a=(0,y.useCallback)((()=>{const e=Date.now()-t.current;i.handleEnter({show_cnt:o,enter_within_30s:e<3e4?1:0})}),[i,o]);return(0,y.useEffect)((()=>{if(e){const e=n.reduce(((e,{group:t,count:i})=>{switch(t){case 2:e.comment_cnt=i;break;case 3:e.like_cnt=i;break;case 6:e.mention_cnt=i;break;case 7:e.follower_cnt=i}return e}),{like_cnt:0,comment_cnt:0,mention_cnt:0,follower_cnt:0});i.handlePopShow(e)}}),[n,i,e]),{handleEnter:a}}({showTip:E}),[T,S]=(0,y.useState)(!1),O=(0,y.useCallback)((e=>{e&&(e.preventDefault(),e.stopPropagation()),S(!T),s.setNoticeCount([]),s.setReportInboxNoticeCount(0),T||h()}),[s,h,T]);(0,y.useEffect)((()=>{-1!==location.search.indexOf("open_inbox=1")&&O()}),[]);const A=(0,y.useMemo)((()=>T?Sh:Th),[T]),{showModal:I,hideModal:v}=(0,es.J)(),C=(0,y.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]);(0,y.useEffect)((()=>{s.fetchNoticeCount()}),[s]);const N=(0,y.useRef)(null),R=(0,y.useRef)(!1),L=(0,y.useCallback)((()=>{I(),R.current=!0}),[I]),b=(0,y.useCallback)((()=>{v(),R.current=!1}),[v]);(0,y.useEffect)((()=>{const e=()=>{R.current||S(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,y.useEffect)((()=>{T&&S(!1)}),[i]);const P=(0,y.useRef)(!1),D=(0,K.qj)(um);return(0,y.useEffect)((()=>{T&&!P.current&&(D.fetchNoticeData(),P.current=!0)}),[D,T]),(0,y.useEffect)((()=>{D.fetchReportInbox()}),[D]),(0,o.jsxs)(gh,Object.assign({onClick:O},{children:[T?(0,o.jsx)(A,{width:32,height:32},void 0):(0,o.jsx)(zp.u,Object.assign({placement:"bottom",overlay:e("Inbox")},{children:(0,o.jsx)("span",{children:(0,o.jsx)(A,{width:32,height:32},void 0)},void 0)}),void 0),(p||r>0)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kn.G,Object.assign({active:E,placement:u.length>2?"bottomRight":"bottom",margin:"-54px",arrowMargin:"52px",backgroundColor:t.colors.Primary},{children:(0,o.jsx)(Ah,{children:u.map((({group:e,count:t})=>(0,o.jsxs)(Ih,{children:[fh[e],(0,o.jsx)("b",{children:(0,q.BT)(t)},void 0)]},e)))},void 0)}),void 0),!E&&(0,o.jsx)(Oh,Object.assign({long:_},{children:d}),void 0)]},void 0),m&&(0,o.jsx)(Xa.ZP,Object.assign({timeout:200,in:T,nodeRef:N},{children:e=>(0,o.jsxs)(yh,Object.assign({ref:N,state:e,duration:200,onClick:C,onMouseEnter:L,onMouseLeave:b},{children:[(0,o.jsx)(vh,{width:24,height:8,fill:t.colors.ConstTextInverse},void 0),(0,o.jsx)(ph,{},void 0)]}),void 0)}),void 0)]}),void 0)})),Rh=({children:e})=>{var t;const[i,n]=(0,y.useState)(!1),r=(0,X.fz)(ki),{direction:s}=(0,a.a)(),l=(0,y.useMemo)((()=>({offset:"ltr"===s?[30,20]:[-30,20]})),[s]),c=(0,y.useMemo)((()=>"ltr"===s?"bottomRight":"bottomLeft"),[s]),d=(0,te.L)((()=>["$region","$liveCenterConfig"]),[]),_=null!==(t=null==d?void 0:d.$region)&&void 0!==t?t:"",u=(0,y.useMemo)((()=>{var e,t;return(null!==(t=null===(e=null==d?void 0:d.$liveCenterConfig)||void 0===e?void 0:e.showCreatorHubRegion)&&void 0!==t?t:[]).includes(_)}),[d,_]),p=(0,y.useMemo)((()=>({width:180,padding:12,fontSize:14})),[]),m=(0,No.Q)();(0,y.useEffect)((()=>{if(u){const e=r.getLiveCreatorHubPopup();n(e)}}),[u,r]);const E=(0,y.useCallback)((e=>{e||(n(!1),r.setLiveCreatorHubPopup(!0))}),[r]);return(0,o.jsx)(zp.u,Object.assign({visible:i,trigger:"click",tooltipTheme:"blue",placement:c,align:l,overlay:m("live_creator_hub_home_desc",{},"Explore the endless possibilities of TikTok LIVE. It's the place to be for real-time fun, expression, creativity, and connection."),overlayInnerStyle:p,onVisibleChange:E},{children:e}),void 0)};var Lh=i(30572);const bh=(0,Bo.Z)("div",{target:"e5vohn00"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),Ph=(0,Bo.Z)("h3",{target:"e5vohn01"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),Dh=(0,Bo.Z)("p",{target:"e5vohn02"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),Mh=(0,Bo.Z)("div",{target:"e5vohn03"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),xh=(0,Bo.Z)(Sn.rU,{target:"e5vohn04"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),(({theme:e})=>(0,re.YJ)({direction:e.direction,marginStart:"16px"})),{color:"#ffffff!important",cursor:"pointer","&:hover":{textDecoration:"none"}},"label:StyledLink;"),wh=(0,Bo.Z)("button",{target:"e5vohn05"})(re.Ph,(({theme:e})=>(0,re.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),Uh=(0,y.memo)((({uniqueId:e,secUid:t,userPopupActive:i})=>{const{colors:n,direction:r}=(0,a.a)(),s=(0,No.Q)(),l=(0,X.fz)(Lh.p),{pathname:c}=(0,f.TH)(),d=(0,Pe.Xq)(c),_="fyp"===d?"homepage_hot_tooltip":d+"_tooltip",[u,p]=(0,y.useState)(!1),{tooltipPriority:m}=(0,K.mp)(Nm),E=(0,Pe.bf)(c)&&c.replace("/@","")===e,g=(0,y.useRef)(!1);(0,y.useEffect)((()=>{let e;return u&&(e=window.setTimeout((()=>{g.current=!0,l.handleCloseProfileTooltip({enter_from:_,close_method:"auto_cancel"}),p(!1)}),5e3)),()=>clearTimeout(e)}),[u]),(0,y.useEffect)((()=>()=>{u&&!g.current&&l.handleCloseProfileTooltip({enter_from:_,close_method:"other"})}),[u]),(0,y.useEffect)((()=>{(0,Jt.le)(ei.S0)||E||3!==m?p(!1):(p(!0),l.handleShowProfileTooltip({enter_from:_}),(0,Jt.D$)(ei.S0,"1"))}),[m]),(0,y.useEffect)((()=>{i&&u&&(g.current=!0,l.handleCloseProfileTooltip({enter_from:_,close_method:"other"}),p(!1))}),[i,_,u]);const h=(0,y.useCallback)((()=>{l.handleCloseProfileTooltip({enter_from:_,close_method:"edit_profile"}),l.handleClickEditProfile({enter_from:_}),(0,Jt.D9)(ei.OB,_),g.current=!0,p(!1)}),[_,l]),T=(0,y.useCallback)((()=>{g.current=!0,p(!1),l.handleCloseProfileTooltip({enter_from:_,close_method:"cancel"})}),[_,l]),S=(0,qE.ot)({pathname:(0,hp.yl)({uniqueId:e,secUid:t}),search:{}}),O=(0,y.useMemo)((()=>({pathname:S})),[S]),A="ltr"===r?"bottomRight":"bottomLeft";return(0,o.jsx)(kn.G,Object.assign({active:u,backgroundColor:n.ConstSecondary2,placement:A,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(bh,{children:[(0,o.jsx)(Ph,{children:s("editprofile_feedtooltip_title")},void 0),(0,o.jsx)(Dh,{children:s("editprofile_feedtooltip_subtitle")},void 0),(0,o.jsxs)(Mh,{children:[(0,o.jsx)(wh,Object.assign({onClick:T},{children:s("editprofile_close")}),void 0),(0,o.jsx)(xh,Object.assign({to:O,onClick:h},{children:s("editprofile_editprofile")}),void 0)]},void 0)]},void 0)}),void 0)}));var kh,Fh=i(11242);!function(e){e.LiveRechargeShow="livesdk_recharge_show",e.LiveRechargeClick="livesdk_recharge_click",e.LiveRechargeCashierShow="livesdk_web_cashier_show",e.LiveRechargePay="livesdk_recharge_pay",e.LiveRechargeSuccess="livesdk_recharge_success",e.LiveRechargeFailed="livesdk_recharge_failed",e.LiveBillingAddressClick="livesdk_billing_address_click",e.LiveWebGetCoinShow="livesdk_web_getcoin_show",e.LiveWebGetCoinClick="livesdk_web_getcoin_click",e.LiveWebPayFeedbackShow="livesdk_web_pay_feedback_show",e.LiveWebPayFeedbackClick="livesdk_web_pay_feedback_click",e.LiveWebPayMethodClick="livesdk_web_pay_method_click",e.LiveWebLinkEWalletShow="livesdk_link_ewallet_show",e.LiveWebLinkEWalletClick="livesdk_link_ewallet_click",e.LiveWebLinkEWalletSuccess="livesdk_link_ewallet_success",e.LiveWebLinkEWalletFailed="livesdk_link_ewallet_failed",e.LiveRechargeExchangeEntranceShow="livesdk_recharge_exchange_entrance_show",e.LiveRechargeExchangeEntranceClick="livesdk_recharge_exchange_entrance_click",e.LiveRechargeExchangeClick="livesdk_recharge_exchange_click",e.LiveRechargeExchangePopupShow="livesdk_recharge_exchange_popup_show",e.LiveRechargeExchangeConfirm="livesdk_recharge_exchange_confirm",e.LiveRechargeExchangeCancel="livesdk_recharge_exchange_cancel",e.LiveRechargeExchangeSuccess="livesdk_recharge_exchange_success",e.LiveRechargeExchangeFailed="livesdk_recharge_exchange_failed",e.LiveRechargeLogoutClick="livesdk_logout_click",e.LiveBillingAddressShow="livesdk_billing_address_show",e.LiveBillingAddressConfirm="livesdk_billing_address_confirm",e.LiveBillingAddressCancel="livesdk_billing_address_cancel",e.LiveBillingAddressFailed="livesdk_billing_address_failed"}(kh||(kh={}));let Bh=class{constructor(){this.handleRechargeShow=e=>{oe.WB.event("livesdk_recharge_show",e)},this.handleRechargeClick=e=>{oe.WB.event("livesdk_recharge_click",e)},this.handleCashierShow=e=>{oe.WB.event("livesdk_web_cashier_show",e)},this.handlePayAction=e=>{oe.WB.event("livesdk_recharge_pay",e)},this.handleRechargeSuccess=e=>{oe.WB.event("livesdk_recharge_success",e)},this.handleRechargeFailed=e=>{oe.WB.event("livesdk_recharge_failed",e)},this.handleBillingAddressClick=e=>{oe.WB.event("livesdk_billing_address_click",e)},this.handleLiveWebGetCoinShow=e=>{oe.WB.event("livesdk_web_getcoin_show",e)},this.handleLiveWebGetCoinClick=e=>{oe.WB.event("livesdk_web_getcoin_click",e)},this.handleRechargeFeedbackShow=e=>{oe.WB.event("livesdk_web_pay_feedback_show",e)},this.handleRechargeFeedbackClick=e=>{oe.WB.event("livesdk_web_pay_feedback_click",e)},this.handleRechargeCashierSelectPaymentMethod=e=>{oe.WB.event("livesdk_web_pay_method_click",e)},this.handleRechargeCashierEWalletShow=e=>{oe.WB.event("livesdk_link_ewallet_show",e)},this.handleRechargeCashierEWalletClick=e=>{oe.WB.event("livesdk_link_ewallet_click",e)},this.handleRechargeCashierEWalletSuccess=e=>{oe.WB.event("livesdk_link_ewallet_success",e)},this.handleRechargeCashierEWalletFailed=e=>{oe.WB.event("livesdk_link_ewallet_failed",e)},this.handleExchangeEntranceShow=e=>{oe.WB.event("livesdk_recharge_exchange_entrance_show",e)},this.handleExchangeEntranceClick=e=>{oe.WB.event("livesdk_recharge_exchange_entrance_click",e)},this.handleExchangeClick=e=>{oe.WB.event("livesdk_recharge_exchange_click",e)},this.handleExchangePopupShow=e=>{oe.WB.event("livesdk_recharge_exchange_popup_show",e)},this.handleExchangeConfirm=e=>{oe.WB.event("livesdk_recharge_exchange_confirm",e)},this.handleExchangeCancel=e=>{oe.WB.event("livesdk_recharge_exchange_cancel",e)},this.handleExchangeSuccess=e=>{oe.WB.event("livesdk_recharge_exchange_success",e)},this.handleExchangeFailed=e=>{oe.WB.event("livesdk_recharge_exchange_failed",e)},this.handleRechargeLogoutClick=e=>{oe.WB.event("livesdk_logout_click",e)},this.handleBillingAddressShow=e=>{oe.WB.event("livesdk_billing_address_show",e)},this.handleBillingAddressConfirm=e=>{oe.WB.event("livesdk_billing_address_confirm",e)},this.handleBillingAddressCancel=e=>{oe.WB.event("livesdk_billing_address_cancel",e)},this.handleBillingAddressFailed=e=>{oe.WB.event("livesdk_billing_address_failed",e)}}};var Gh;Bh=(0,p.__decorate)([(0,ie.G)()],Bh),function(e){e[e.SLARDAR=0]="SLARDAR",e[e.TEA=1]="TEA"}(Gh||(Gh={}));const jh={RECHARGE_BUY_NOW_SHOW:{key:"rd_live_webapp_recharge_buy_now_show",platform:1},RECHARGE_BUY_NOW_CLICK:{key:"rd_live_webapp_recharge_buy_now_click",platform:1},RECHARGE_PLACE_ORDER_RESULT_API_ERR:{key:"rd_live_webapp_recharge_place_order_result_api_err",platform:0},RECHARGE_PAY_NOW_SHOW:{key:"rd_live_webapp_recharge_pay_now_show",platform:1},RECHARGE_PAY_NOW_CLICK:{key:"rd_live_webapp_recharge_pay_now_click",platform:1},RECHARGE_PAYMENT_METHOD_SHOW:{key:"rd_live_webapp_recharge_payment_method_show",platform:1},RECHARGE_PAY_RESULT_API_ERR:{key:"rd_live_webapp_recharge_pay_result_api_err",platform:0},RECHARGE_TOTAL_PRICE_SHOW:{key:"rd_live_webapp_recharge_total_price_show",platform:1},RECHARGE_COINS_LIST_SHOW:{key:"rd_live_webapp_recharge_coins_list_show",platform:1},RECHARGE_PAGE_SHOW:{key:"rd_live_webapp_recharge_page_show",platform:1}},Hh={RECHARGE_TOTAL_PRICE_SHOW:{key:"rd_live_webapp_m_recharge_total_price_show",platform:1},RECHARGE_PLACE_ORDER_RESULT_API_ERR:{key:"rd_live_webapp_m_recharge_place_order_result_api_err",platform:0},RECHARGE_PAYMENT_METHOD_SHOW:{key:"rd_live_webapp_m_recharge_payment_method_show",platform:1},RECHARGE_PAY_RESULT_API_ERR:{key:"rd_live_webapp_m_recharge_pay_result_api_err",platform:0},RECHARGE_PAY_NOW_CLICK:{key:"rd_live_webapp_m_recharge_pay_now_click",platform:1},RECHARGE_PAY_NOW_SHOW:{key:"rd_live_webapp_m_recharge_pay_now_show",platform:1},RECHARGE_PAGE_SHOW:{key:"rd_live_webapp_m_recharge_page_show",platform:1},RECHARGE_COINS_LIST_SHOW:{key:"rd_live_webapp_m_recharge_coins_list_show",platform:1},RECHARGE_BUY_NOW_CLICK:{key:"rd_live_webapp_m_recharge_buy_now_click",platform:1},RECHARGE_BUY_NOW_SHOW:{key:"rd_live_webapp_m_recharge_buy_now_show",platform:1}};let Wh=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleReport=(e,t)=>{switch(e.platform){case 0:this.service.emitEvent(e.key,this.defaultMetrics,t);break;case 1:oe.WB.event(e.key,null!=t?t:{});break;default:console.error(`rdLog platform ${e.platform} not registered`)}}}};Wh=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],Wh);const Vh=e=>{const{count:t,realDot:i,keepDot:o,currentPrice:n}=e,a=t*n;if(0===a)return{showAmount:"0.00",localAmount:"0",total:0};let r=i-o,s=a,l=!1;for(;r>0;)s%10>0&&(l=!0),r--,s=Math.trunc(s/10);const c=(l?Number(s)+1:Number(s)).toString().split(""),d=i-o,_=c.splice(-d),u=_.length>0?`.${_.join("").padStart(o,"0")}`:".00",p=`${c.join("")||0}${u}`,m=p.toString().split("."),E=(m[1]||"").padEnd(o,"0").split("").slice(0,o).join("");return{showAmount:p,localAmount:`${m[0]}${E}`,total:a}},Yh=e=>{const{keepDot:t,currentPrice:i}=e,o=i,n=o.toString().split(""),a=n.splice(-t),r=a.length>0?`.${a.join("").padStart(t,"0")}`:".00";return{showAmount:`${n.join("")||0}${r}`,localAmount:o.toString(),total:o}};var Kh;!function(e){e.PIPOPayError="live_sdk_pipo_pay_error",e.GetPermissionError="live_sdk_get_permission_error",e.GetCoinsError="live_sdk_get_coins_error",e.PlaceOrderError="live_sdk_place_order_error",e.ApplePayEvent="live_sdk_recharge_applepay",e.VenmoEvent="live_sdk_recharge_venmo"}(Kh||(Kh={}));let zh=class{constructor(e){this.service=e,this.defaultTag={where:"Recharge"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePayFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_pipo_pay_error",this.defaultMetrics,this.defaultTag)},this.handleGetPermissionFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_permission_error",this.defaultMetrics,this.defaultTag)},this.handleGetCoinsFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_coins_error",this.defaultMetrics,{error:e.message})},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_order_error",this.defaultMetrics,this.defaultTag)},this.handleApplePayEvent=e=>{this.service.sendLog("live_sdk_recharge_applepay","info",{extra:e}),this.service.emitEvent("live_sdk_recharge_applepay",this.defaultMetrics,{extra:e})},this.handleVenmoEvent=e=>{this.service.emitEvent("live_sdk_recharge_venmo",this.defaultMetrics,{extra:e})}}};var $h;zh=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],zh),function(e){e.GetPackagesError="live_sdk_get_packages_error",e.GetBasePackageError="live_sdk_get_basepackage_error",e.PlaceOrderError="live_sdk_place_exchange_order_error"}($h||($h={}));let qh=class{constructor(e){this.service=e,this.defaultTag={where:"Exchange"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePackagesFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_packages_error",this.defaultMetrics,this.defaultTag)},this.handleBasePackageFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_basepackage_error",this.defaultMetrics,this.defaultTag)},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_exchange_order_error",this.defaultMetrics,this.defaultTag)}}};qh=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],qh);var Zh=i(31943),Qh=i.n(Zh),Xh=i(98425),Jh=i.n(Xh);Qh().extend(Jh());const eT=(e,t,i)=>{var o,n,a;let r=0;const s=(null==e?void 0:e.currency_price)&&null!==(o=null==e?void 0:e.currency_price[0].price)&&void 0!==o?o:0,l=(null==e?void 0:e.currency_price)&&null!==(n=null==e?void 0:e.currency_price[0].price_dot)&&void 0!==n?n:0,c=(null==e?void 0:e.currency_price)&&null!==(a=e.currency_price[0].keep_dot)&&void 0!==a?a:0;if(t){const e=i*s;if(0===e)return 0;let t=l-c,o=e,n=!1;if(c>=l)for(let e=l;e<c;e++)o*=10;for(;t>0;)o%10>0&&(n=!0),t--,o=Math.trunc(o/10);const a=n?Number(o)+1:Number(o);if(0===c)return a;const r=a.toString().split(""),d=r.splice(-c);for(;c>d.length;)d.unshift("0");const _=d.length>0?`.${d.join("")}`:"",u=r.join("");return Number(`${u}${_}`)}{if(r=s,c>=l)for(let e=l;e<c;e++)r*=10;const e=r.toString().split("");let t=[];if(e.length<c)for(let t=e.length;t<c;t++)e.unshift("0");t=0===c&&0!==l?e.splice(c-l):0===c&&0===l?e.splice(e.length):e.splice(-c);const i=t.length>0?`.${t.join("")}`:"",o=e.join("");return Number(`${o}${i}`)}},tT=Object.values(Ei.w_).map((e=>{var t;return null===(t=e.match(/\/coin\/([^/@:]+)\/?.*/))||void 0===t?void 0:t[1]})).filter((e=>!!e));var iT=i(40235);let oT=class{constructor(e){this.fetch=e}getPermission(e){return this.fetch.get("/webcast/wallet_api/diamond_buy/permission/",{query:e,baseUrlType:4})}getCoinsConfig(){return this.fetch.get("/webcast/diamond/",{baseUrlType:4})}getNonce(){return this.fetch.get("/webcast/wallet_api/diamond_buy/nonce",{baseUrlType:4})}placeOrder(e){return this.fetch.get("/webcast/wallet_api/diamond_buy_external/",{query:e,baseUrlType:4})}getTransactionHistory(e){return this.fetch.get("/webcast/wallet_api/query_web_order/",{query:e,baseUrlType:4})}getVoiceAddressApi(e){return this.fetch.get("/webcast/wallet_api/invoice/download/",{query:e,baseUrlType:4})}getNoticeContent(){return this.fetch.get("/webcast/wallet_api_tiktok/notifycenter/notices/latest",{query:{view_name:"webapp_recharge"},baseUrlType:4})}getExchangeCustomPackage(e){return this.fetch.post("/webcast/recharge/base_package/",{query:e,baseUrlType:4})}getExchangePackages(e){return this.fetch.post("/webcast/recharge/packages/",{query:e,baseUrlType:4})}exchangeEarningsToCoins(e){return this.fetch.post("/webcast/wallet_api/diamond_exchange/",{query:e,baseUrlType:4})}verifyZipCode(e){return this.fetch.get("/webcast/wallet_api/verify_zip_code/",{query:e,baseUrlType:4})}saveBillingAddress(e){return this.fetch.post("/webcast/wallet_api/save_billing_address_info/",{query:e,body:(0,iT.stringify)(e),baseUrlType:4})}};var nT,aT;oT=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],oT),function(e){e[e.WebAppPage=2]="WebAppPage",e[e.WebAppH5=3]="WebAppH5"}(nT||(nT={})),function(e){e.Default="default",e.From3ds="From3ds"}(aT||(aT={}));let rT=class extends le.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.appContext=t,this.report=i,this.rechargeSlardar=o,this.exchangeSlardar=n,this.rdReport=a,this.defaultState={userState:{loadingState:0,hasRechargePermission:!1,showEntry:!1,coins:0,exchangePermission:{currency:"",enable:!1,has_short_video_gift:!1,price_dot:0,region:"",revenue:0,unit_price:0}},orderInfo:{loadingState:0},coins:{loadingState:0,coinsData:[]},exchangePackages:{loadingState:0,packagesData:{}},exchangeCustomPackage:{loadingState:0,customPackageData:{}},exchangeState:{loadingState:0,packageList:[],selectedPackageIndex:-1,selectedComboId:0,currency:"",coinAmount:0,currencyDot:0,localAmount:0,showAmountLocal:"0.00",showAmountUSD:"0.00"},nonce:{loadingState:0,nonce:"",expiredAt:Date.now()},customerCoinId:0,customCoinMaxNum:0,customCoinMinNum:0,priceUnit:"",apUnitPrice:{},gpUnitPrice:{},merchantId:"",paymentMethod:"",paymentState:{selectedComboId:0,coinAmount:0,priceDot:0,keepDot:0,totalPrice:0,coinPrice:0,price:0,currency:""},transactionHistory:{loadingState:0,total:0,pageNumber:1,pageSize:8,pageData:[],totalData:[],isWebRechargedBefore:void 0},noticeConfig:{content:"",disable_recharge_button:!1},inAppState:{hideHeader:!1,hidePadding:!1,rechargeFrom:"others"},reportState:{},mobileInputVisible:!1,cashierModalLoaded:!1,paymentResultModalLoaded:!1,billingAddress:{postalCode:"",validating:!1,validated:!1,isValid:!1},showVerifyNow:!1,errorPrompt:""}}setUserPermission(e,t){e.userState=Object.assign(Object.assign({},e.userState),t)}setNotice(e,t){e.noticeConfig=Object.assign(Object.assign({},e.noticeConfig),t)}setCoinsConfig(e,t){e.coins=Object.assign(Object.assign({},e.coins),t)}setPaymentState(e,t){e.paymentState=Object.assign(Object.assign({},e.paymentState),t)}setPaymentMethod(e,t){e.paymentMethod=t}setExchangePackages(e,t){e.exchangePackages=Object.assign(Object.assign({},e.exchangePackages),t)}setExchangeCustomPackage(e,t){e.exchangeCustomPackage=Object.assign(Object.assign({},e.exchangeCustomPackage),t)}setExchangeState(e,t){e.exchangeState=Object.assign(Object.assign({},e.exchangeState),t)}setCustomCoin(e,t){const{customerCoinId:i,customCoinMaxNum:o,customCoinMinNum:n,priceUnit:a,apUnitPrice:r,gpUnitPrice:s,merchantId:l}=t;e.customerCoinId=i,e.customCoinMaxNum=o,e.customCoinMinNum=n,e.priceUnit=a,e.apUnitPrice=r,e.gpUnitPrice=s,e.merchantId=l}updateOrder(e,t){e.orderInfo=Object.assign(Object.assign({},e.orderInfo),t)}updateNonce(e,t){t.nonce?e.nonce=Object.assign(Object.assign(Object.assign({},e.nonce),t),{loadingState:2,expiredAt:Date.now()+24e4}):e.nonce=Object.assign(Object.assign({},e.nonce),t)}setTransactionHistory(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),t)}setTransactionSize(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),{pageSize:t.pageSize,pageNumber:t.pageNumber})}setInAppState(e,t){e.inAppState=Object.assign(Object.assign({},e.inAppState),t)}setRefHash(e,t){t&&!tT.includes(t)&&(e.refhash=t)}setEnterFrom(e,t){e.reportState.enterFrom=t}setMobileInputVisible(e,t){e.mobileInputVisible=t}setCashierModalLoaded(e,t){e.cashierModalLoaded=t}setPaymentResultModalLoaded(e,t){e.paymentResultModalLoaded=t}setBillingAddress(e,t){e.billingAddress=Object.assign(Object.assign({},e.billingAddress),t)}setDefaultSelectedMethod(e,t){e.defaultSelectedMethod=Object.assign(Object.assign({},e.defaultSelectedMethod),t)}setShowVerifyNow(e,t){e.showVerifyNow=t}setErrorPrompt(e,t){e.errorPrompt=t}initPayment(e){return e.pipe((0,hi.z)((()=>(0,Ti.of)(this.getActions().updateOrder({orderData:void 0,loadingState:0}),this.getActions().setPaymentState({selectedComboId:0,coinAmount:0,priceDot:0,totalPrice:0,price:0,currency:""})))))}updateCoinsAmount(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>{var i,o,n;const{coinComboId:a}=e,{coins:r,customerCoinId:s}=t,{coinsData:l}=r,c=null==l?void 0:l.find((e=>e.id===a));let d=null!==(i=null==c?void 0:c.diamond_count)&&void 0!==i?i:0,_=0;a===s?(d=e.coinAmount,c&&(_=eT(c,!0,d))):c&&(_=eT(c,!1,d));const u=null===(o=r.coinsData)||void 0===o?void 0:o.find((e=>e.id===a)),p=(null!==(n=null==u?void 0:u.currency_price)&&void 0!==n?n:[])[0],{currency:m,price:E,price_dot:g,keep_dot:h}=p;return(0,Ti.of)(this.getActions().setPaymentState({selectedComboId:a,coinAmount:d,totalPrice:_,currency:m,price:E,priceDot:g,keepDot:h}))})))}fetchPermission(e){return e.pipe((0,ue.M)(this.appContext.state$),(0,hi.z)((([e,t])=>{const{appContext:i}=t,{$user:o,$region:n}=i;return this.service.getPermission({user_id:null==o?void 0:o.uid,local_country:n,live_id:12}).pipe((0,hi.z)((e=>{var t,i;return(null==e?void 0:e.data)?(0,Ti.of)(this.getActions().setUserPermission({hasRechargePermission:e.data.is_allow,showEntry:e.data.is_show,coins:(null===(t=e.data)||void 0===t?void 0:t.coins)||0,exchangePermission:null===(i=e.data)||void 0===i?void 0:i.exchange,loadingState:2}),this.getActions().fetchCustomExchangePackage(),this.getActions().fetchExchangePackages()):(0,Ti.of)(this.getActions().setUserPermission({loadingState:3}))})),(0,oi.O)(this.getActions().setUserPermission({loadingState:1})),(0,Si.K)((e=>(this.rechargeSlardar.handleGetPermissionFail(e),(0,Ti.of)(this.getActions().setUserPermission({loadingState:3}))))))})))}fetchNotice(e){return e.pipe((0,hi.z)((()=>this.service.getNoticeContent().pipe((0,hi.z)((e=>(null==e?void 0:e.data)?(0,Ti.of)(this.getActions().setNotice(null==e?void 0:e.data)):(0,Ti.of)(this.getActions().setNotice({})))),(0,Si.K)((()=>(0,Ti.of)(this.getActions().setNotice({}))))))))}placeOrder(e){return e.pipe((0,ue.M)(this.appContext.state$,this.state$),(0,me.z)((([e,t,i])=>{var o,n;const{type:a="default"}=e,{paymentState:r,customerCoinId:s,refhash:l}=i,c=null===(o=t.appContext)||void 0===o?void 0:o.$region,d=null===(n=t.appContext)||void 0===n?void 0:n.$geo;if(!c)return(0,Ti.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));let _={};if("AE"===c&&(_.sub_region=null==d?void 0:d[0]),"default"===a){const{selectedComboId:t,currency:i,coinAmount:o,totalPrice:n,keepDot:a,price:d}=r;let u=d.toString();if(t===s){const e=n.toString().split("."),t=(e[1]||"").padEnd(a,"0").split("").slice(0,a).join("");u=`${e[0]}${t}`}_=Object.assign(Object.assign({},_),{diamond_id:t,currency:i,source:e.source,coins_count:o,local_amount:u,region:c,refhash:l})}else if("From3ds"===a){const{diamond_id:t,coins_count:i,local_amount:o,currency:n}=e;if(!(t&&i&&o&&n))return(0,Ti.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));_=Object.assign(Object.assign({},_),{diamond_id:t,currency:n,source:e.source,coins_count:i,local_amount:o,region:c,refhash:l})}return this.service.placeOrder(_).pipe((0,hi.z)((e=>{var t,i,o,n,a;return 0===e.status_code&&e.data?e.data.nonce?[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().updateNonce({nonce:e.data.nonce})]:[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().getNonce()]:(0,Ti.of)(this.getActions().updateOrder({loadingState:3,statusCode:null!==(t=null==e?void 0:e.status_code)&&void 0!==t?t:"",prompts:null!==(o=null===(i=e.data)||void 0===i?void 0:i.prompts)&&void 0!==o?o:""}),this.getActions().setErrorPrompt(null!==(a=null===(n=e.data)||void 0===n?void 0:n.prompts)&&void 0!==a?a:""))})),(0,oi.O)(this.getActions().updateOrder({loadingState:1})),(0,Si.K)((t=>(this.rechargeSlardar.handlePlaceOrderFail(t),this.rdReport.handleReport(3===e.source?jh.RECHARGE_PLACE_ORDER_RESULT_API_ERR:Hh.RECHARGE_PLACE_ORDER_RESULT_API_ERR,t),(0,Ti.of)(this.getActions().updateOrder({loadingState:3,prompts:""}))))))})))}fetchExchangePackages(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,Ti.of)(this.noop());const{region:i}=t.userState.exchangePermission;return this.service.getExchangePackages({currency:"USD",package_region:i,type:101}).pipe((0,hi.z)((e=>(null==e?void 0:e.data)?(0,Ti.of)(this.getActions().setExchangePackages({loadingState:2,packagesData:e.data})):(0,Ti.of)(this.getActions().setExchangePackages({loadingState:3})))),(0,oi.O)(this.getActions().setExchangePackages({loadingState:1})),(0,Si.K)((e=>(this.exchangeSlardar.handlePackagesFail(e),(0,Ti.of)(this.getActions().setExchangePackages({loadingState:3}))))))})))}fetchCustomExchangePackage(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,Ti.of)(this.noop());const{region:i,revenue:o}=t.userState.exchangePermission;return this.service.getExchangeCustomPackage({currency:"USD",package_region:i,balance:o,type:101,real_dot:2}).pipe((0,hi.z)((e=>(null==e?void 0:e.data)?(0,Ti.of)(this.getActions().setExchangeCustomPackage({loadingState:2,customPackageData:e.data})):(0,Ti.of)(this.getActions().setExchangeCustomPackage({loadingState:3})))),(0,oi.O)(this.getActions().setExchangeCustomPackage({loadingState:1})),(0,Si.K)((e=>(this.exchangeSlardar.handleBasePackageFail(e),(0,Ti.of)(this.getActions().setExchangeCustomPackage({loadingState:3}))))))})))}setExchangePackageList(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>(0,Ti.of)(this.getActions().setExchangeState({packageList:e})))))}updateExchangeAmount(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>{var i;const{selectedPackageIndex:o,coinAmount:n}=e,a=t.exchangeState.packageList,r=a[o],{coins:s,price:l,realDot:c,keepDot:d,localRealDot:_,localKeepDot:u,localPrice:p}=r,m=t.exchangePackages.packagesData,E=o===a.length-1,g=o===a.length-2,h=E?n:s,T=!!m.local_currency_info,S=null===(i=null==m?void 0:m.currency_info)||void 0===i?void 0:i.code,{total:O,showAmount:A,localShowAmount:I}=(e=>{const{count:t,realDot:i,keepDot:o,isCustom:n=!1,currentPrice:a,useLocal:r=!1,localRealDot:s=0,localKeepDot:l=0,localCurrentPrice:c=0}=e,d=n?Vh:Yh,{showAmount:_,localAmount:u,total:p}=d({count:t,realDot:i,keepDot:o,currentPrice:a}),m={showAmount:_,localAmount:u,total:p};if(r){const{showAmount:e,localAmount:i,total:o}=d({count:t,realDot:s,keepDot:l,currentPrice:c});m.localShowAmount=e||"",m.localTotal=o||0,m.localAmountString=i||""}return m})({isCustom:g||E,count:g?Number(r.coins):h,realDot:c,keepDot:d,currentPrice:l,useLocal:T,localRealDot:_,localKeepDot:u,localCurrentPrice:p});return(0,Ti.of)(this.getActions().setExchangeState({selectedComboId:r.id,selectedPackageIndex:o,currency:S,currencyDot:c,localAmount:O,coinAmount:Number(h),showAmountUSD:A,showAmountLocal:I}))})))}placeExchangeOrder(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([e,t])=>{const{isMobile:i,reportParams:o}=e,{exchangeState:n}=t,{selectedComboId:a,currency:r,coinAmount:s,currencyDot:l,localAmount:c}=n;return this.service.exchangeEarningsToCoins({diamond_id:a,way:1,source:i?3:2,currency:r,currency_dot:l,coins_count:s,local_amount:c}).pipe((0,hi.z)((e=>{var i,n,a,r,s,l;return e.data&&1===e.data.status?(this.report.handleExchangeSuccess(Object.assign({},o)),(0,Ti.of)(this.getActions().setExchangeState({loadingState:2,statusCode:e.data.status}),this.getActions().fetchPermission(),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:t.transactionHistory.pageSize}))):(this.report.handleExchangeFailed(Object.assign(Object.assign({},o),{error_code:null===(i=e.data)||void 0===i?void 0:i.status})),(0,Ti.of)(this.getActions().setExchangeState({loadingState:3,statusCode:null!==(n=null==e?void 0:e.status_code)&&void 0!==n?n:"",prompts:null!==(r=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.prompts)&&void 0!==r?r:""}),this.getActions().setErrorPrompt(null!==(l=null===(s=e.data)||void 0===s?void 0:s.prompts)&&void 0!==l?l:"")))})),(0,oi.O)(this.getActions().setExchangeState({loadingState:1})),(0,Si.K)((e=>(this.exchangeSlardar.handlePlaceOrderFail(e),(0,Ti.of)(this.getActions().setExchangeState({loadingState:3,prompts:""}))))))})))}initExchangeOrderStatus(e){return e.pipe((0,hi.z)((()=>(0,Ti.of)(this.getActions().setExchangeState({loadingState:0,coinAmount:0,selectedComboId:0,prompts:""}),this.getActions().setPaymentState({selectedComboId:0,coinAmount:0,totalPrice:0})))))}fetchCoinsConfig(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([e,t])=>this.service.getCoinsConfig().pipe((0,hi.z)((i=>{var o,n,a,r,s,l,c,d,_,u,p,m,E,g,h,T,S,O,A,I,v,y;return 0===i.status_code&&i.data&&i.extra?(0,Ti.of)(this.getActions().setCoinsConfig({loadingState:2,coinsData:i.data}),this.getActions().setCustomCoin({customerCoinId:(null===(o=null==i?void 0:i.extra)||void 0===o?void 0:o.customized_ids)?null===(n=null==i?void 0:i.extra)||void 0===n?void 0:n.customized_ids[0]:0,customCoinMaxNum:null!==(r=null===(a=null==i?void 0:i.extra)||void 0===a?void 0:a.max_customized_diamond_cnt)&&void 0!==r?r:0,customCoinMinNum:null!==(s=null==i?void 0:i.extra.min_customized_diamond_cnt)&&void 0!==s?s:0,priceUnit:(null===(l=null==i?void 0:i.data[0])||void 0===l?void 0:l.currency_price)&&null!==(_=null===(d=null===(c=null==i?void 0:i.data[0])||void 0===c?void 0:c.currency_price[0])||void 0===d?void 0:d.price_show_form)&&void 0!==_?_:"",apUnitPrice:null!==(p=null===(u=null==i?void 0:i.extra)||void 0===u?void 0:u.ap_unit_price)&&void 0!==p?p:{},gpUnitPrice:null!==(E=null===(m=null==i?void 0:i.extra)||void 0===m?void 0:m.gp_unit_price)&&void 0!==E?E:{},merchantId:null!==(h=null===(g=null==i?void 0:i.extra)||void 0===g?void 0:g.merchant_id)&&void 0!==h?h:""})):(this.report.handleRechargeFailed({error_code:null!==(T=String(null==i?void 0:i.status_code))&&void 0!==T?T:"unknown",error_from:"get_coins",message:null!==(O=null===(S=null==i?void 0:i.data)||void 0===S?void 0:S.prompts)&&void 0!==O?O:"some error in get_coins",charge_from:null!==(A=t.refhash)&&void 0!==A?A:"",request_page:e.isMobile?"mobile_h5":"webapp",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",recharge_type:"feature_available",order_id:null!==(v=null===(I=t.orderInfo.orderData)||void 0===I?void 0:I.order_id)&&void 0!==v?v:"",event_module:(null==t?void 0:t.customerCoinId)===(null===(y=null==t?void 0:t.paymentState)||void 0===y?void 0:y.selectedComboId)?"customized":"normal",recharge_from:t.inAppState.rechargeFrom,pay_method:t.paymentMethod}),(0,Ti.of)(this.getActions().setCoinsConfig({loadingState:3})))})),(0,oi.O)(this.getActions().setCoinsConfig({loadingState:1})),(0,Si.K)((e=>(this.rechargeSlardar.handleGetCoinsFail(e),(0,Ti.of)(this.getActions().setCoinsConfig({loadingState:3})))))))))}getTransactionHistoryList(e){return e.pipe((0,ue.M)(this.appContext.state$),(0,me.z)((([e,t])=>{const{pageSize:i,pageNumber:o}=e,{appContext:n}=t,a=null==n?void 0:n.$user;if(!a)return(0,Ti.of)(this.noop());const r=a.uid;return this.service.getTransactionHistory({page:o,count:i,user_id:r}).pipe((0,hi.z)((e=>(0,Ti.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,total:e.data.total_count,pageNumber:o,pageSize:i,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,oi.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,Si.K)((()=>(0,Ti.of)(this.getActions().setTransactionHistory({loadingState:3})))))})))}loadTransactionHistory(e){return e.pipe((0,ue.M)(this.appContext.state$,this.state$),(0,ii.w)((([e,t,i])=>{const{pageSize:o,pageNumber:n,totalData:a}=i.transactionHistory,{appContext:r}=t,s=null==r?void 0:r.$user;if(!s)return(0,Ti.of)(this.noop());const l=s.uid;return this.service.getTransactionHistory({page:n,count:o,user_id:l}).pipe((0,hi.z)((e=>(0,Ti.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,totalData:[...a,...e.data.list_recharge_order],total:e.data.total_count,pageNumber:n+1,pageSize:o,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,oi.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,Si.K)((()=>(0,Ti.of)(this.getActions().setTransactionHistory({loadingState:3})))))})))}getNonce(e){return e.pipe((0,hi.z)((()=>this.service.getNonce().pipe((0,hi.z)((e=>0===e.status_code?(0,Ti.of)(this.getActions().updateNonce({nonce:e.data.nonce,loadingState:2})):(0,Ti.of)(this.getActions().updateNonce({loadingState:3})))),(0,oi.O)(this.getActions().updateNonce({loadingState:1}))))))}init(e){return e.pipe((0,hi.z)((e=>[this.getActions().fetchPermission(),this.getActions().fetchCoinsConfig({isMobile:e.isMobile}),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:e.pageSize}),this.getActions().fetchNotice()])),(0,Si.K)((()=>(0,Ti.of)(this.noop()))))}updateInAppState(e){return e.pipe((0,hi.z)((e=>[this.getActions().setInAppState(e)])),(0,Si.K)((()=>(0,Ti.of)(this.noop()))))}verifyPostalCode(e){return e.pipe((0,ue.M)(this.state$),(0,ii.w)((([e,t])=>this.service.verifyZipCode({region:"us",zip_code:t.billingAddress.postalCode}).pipe((0,hi.z)((e=>{var t;return(0,Ti.of)(this.getActions().setBillingAddress({isValid:null===(t=e.data)||void 0===t?void 0:t.is_valid,validating:!1,validated:!0}))})),(0,Si.K)((()=>(0,Ti.of)(this.getActions().setBillingAddress({validating:!1})))),(0,oi.O)(this.getActions().setBillingAddress({validating:!0}))))))}saveBillingAddress(e){return e.pipe((0,ue.M)(this.state$),(0,hi.z)((([e,t])=>this.service.saveBillingAddress({region:"us",zip_code:t.billingAddress.postalCode}).pipe((0,hi.z)((i=>{var o,n,a;return(null===(o=i.data)||void 0===o?void 0:o.is_saved)?(0,Ti.of)(this.getActions().setBillingAddress({isValid:!0})):(this.report.handleBillingAddressFailed({enter_from:null!==(n=t.reportState.enterFrom)&&void 0!==n?n:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:e.isMobile?"mobile_h5":"webapp",event_module:t.paymentState.selectedComboId===t.customerCoinId?"customized":"normal",recharge_package:t.paymentState.coinAmount,charge_from:null!==(a=t.refhash)&&void 0!==a?a:""}),(0,Ti.of)(this.getActions().updateOrder({loadingState:3})))})),(0,Si.K)((()=>{var i,o;return this.report.handleBillingAddressFailed({enter_from:null!==(i=t.reportState.enterFrom)&&void 0!==i?i:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:e.isMobile?"mobile_h5":"webapp",event_module:t.paymentState.selectedComboId===t.customerCoinId?"customized":"normal",recharge_package:t.paymentState.coinAmount,charge_from:null!==(o=t.refhash)&&void 0!==o?o:""}),(0,Ti.of)(this.getActions().updateOrder({loadingState:3}))}))))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setUserPermission",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setNotice",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setCoinsConfig",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setPaymentState",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setPaymentMethod",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setExchangePackages",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setExchangeCustomPackage",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setExchangeState",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setCustomCoin",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"updateOrder",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"updateNonce",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setTransactionHistory",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setTransactionSize",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setInAppState",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setRefHash",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setEnterFrom",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setMobileInputVisible",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setCashierModalLoaded",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setPaymentResultModalLoaded",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setBillingAddress",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Object]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setDefaultSelectedMethod",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setShowVerifyNow",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,String]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setErrorPrompt",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"initPayment",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"updateCoinsAmount",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"fetchPermission",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"fetchNotice",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"placeOrder",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"fetchExchangePackages",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"fetchCustomExchangePackage",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"setExchangePackageList",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"updateExchangeAmount",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"placeExchangeOrder",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"initExchangeOrderStatus",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"fetchCoinsConfig",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"getTransactionHistoryList",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"loadTransactionHistory",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"getNonce",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"init",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"updateInAppState",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"verifyPostalCode",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],rT.prototype,"saveBillingAddress",null),rT=(0,p.__decorate)([(0,de.Y)("Recharge"),(0,p.__metadata)("design:paramtypes",[oT,$.G,Bh,zh,qh,Wh])],rT);const sT=(0,Bo.Z)("div",{target:"equhrky0"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginStart:"16px"})),{cursor:"pointer",height:"32px",position:"relative",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivRechargeContainer;");sT.defaultProps=Object.assign(Object.assign({},sT.defaultProps),{"data-e2e":"recharge-icon"});const lT=(0,Bo.Z)("span",{target:"equhrky1"})({width:"24px",height:"24px",display:"block"},"label:SpanLogoContainer;"),cT=(0,Bo.Z)("span",{target:"equhrky2"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginEnd:"8px"})),{width:"20px",height:"20px",display:"block"},"label:SpanLogoContainerInner;"),dT=(0,Bo.Z)("div",{target:"equhrky3"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginStart:"16px"})),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer",height:"36px",position:"relative",padding:"7px 16px",borderRadius:"2px",border:"1px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box"},"label:DivRechargeContainerWithText;");dT.defaultProps=Object.assign(Object.assign({},dT.defaultProps),{"data-e2e":"recharge-icon"});const _T=(0,Bo.Z)("h2",{target:"equhrky4"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e})),{fontFamily:"Proxima Nova",height:"24px",position:"relative",fontStyle:"normal",whiteSpace:"nowrap",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:H2RechargeTextContainer;"),uT="HAS_ENTERED_KEY",pT="HAS_ENTERED_VALUE";var mT;!function(e){e[e.Showing=0]="Showing",e[e.Clicking=1]="Clicking"}(mT||(mT={}));const ET=()=>(0,o.jsx)(cT,{children:(0,o.jsx)(Fh.Z,{width:20,height:20},void 0)},void 0),gT=()=>{const e=(0,No.Q)();return(0,o.jsx)(zp.u,Object.assign({placement:"bottom",overlay:e("WebApp_coin_recharge_1")},{children:(0,o.jsx)(lT,{children:(0,o.jsx)(Fh.Z,{width:22.5,height:22.5},void 0)},void 0)}),void 0)},hT=()=>{const e=(0,No.Q)(),t=(0,f.k6)(),i=(0,X.fz)(Bh),n=(0,K.mp)(rT),a=n.userState.showEntry,r=(0,y.useCallback)((()=>{i.handleLiveWebGetCoinShow({show_page:"live_page",is_web_recharged_before:n.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[n.transactionHistory.isWebRechargedBefore,i]);(0,y.useEffect)((()=>{r()}),[r]);const s=(0,y.useCallback)((()=>{i.handleLiveWebGetCoinClick({show_page:"live_page",is_web_recharged_before:n.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[n.transactionHistory.isWebRechargedBefore,i]),l=(0,y.useCallback)((()=>{t.push(`${Ei.$J.coin}?enter_from=web_live_nav`)}),[t]),c=(0,y.useCallback)((()=>{s(),l()}),[s,l]);return a?(0,o.jsxs)(dT,Object.assign({onClick:c},{children:[(0,o.jsx)(ET,{},void 0),(0,o.jsx)(_T,{children:e("WebApp_coin_recharge_1")},void 0)]}),void 0):null},TT=()=>{const[e,t]=(0,y.useState)(!0),[i,n]=(0,y.useState)(!1),a=(0,f.k6)(),r=(0,No.Q)(),s=(0,X.fz)(Bh),l=(0,te.L)((()=>["$abTestVersion"]),[]),c=(0,K.mp)(rT),d=c.userState.showEntry,_=(0,pi.x)(null==l?void 0:l.$abTestVersion,"expose_recharge_entry_pc"),u=void 0===_||"v1"===_,p=void 0!==_&&"v2"===_,m=p&&e;(0,y.useEffect)((()=>{e&&p&&(0,Jt.le)(uT)===pT&&t(!1),n(!0)}),[e,p]);const E=(0,y.useCallback)((e=>{const t={show_page:"main_page",is_web_recharged_before:c.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:m?"icon_and_text":"icon_only"};0===e?s.handleLiveWebGetCoinShow(t):1===e&&s.handleLiveWebGetCoinClick(t)}),[s,c.transactionHistory.isWebRechargedBefore,m]),g=(0,y.useCallback)((()=>{E(0)}),[E]);(0,y.useEffect)((()=>{i&&d&&!u&&g()}),[i,e,d,u,g]);const h=(0,y.useCallback)((()=>{(0,Jt.D$)(uT,pT)}),[]),T=(0,y.useCallback)((()=>{a.push(`${Ei.$J.coin}?enter_from=web_main_nav`)}),[a]),S=(0,y.useCallback)((()=>{E(1)}),[E]),O=(0,y.useCallback)((()=>{p&&e&&h(),S(),T()}),[p,e,h,T,S]);return!d||u?null:m?(0,o.jsxs)(dT,Object.assign({onClick:O},{children:[(0,o.jsx)(ET,{},void 0),(0,o.jsx)(_T,{children:r("WebApp_coin_recharge_1")},void 0)]}),void 0):(0,o.jsx)(sT,Object.assign({onClick:O},{children:(0,o.jsx)(gT,{},void 0)}),void 0)},ST=({alwaysShowRechargeIconAndText:e})=>e?(0,o.jsx)(hT,{},void 0):(0,o.jsx)(TT,{},void 0);var OT,AT=i(32950),IT=i(74629),vT=i(97578),yT=i(65974),CT=i(37578),fT=i(56705),NT=i(97820),RT=i(4591),LT=i(78120),bT=i(5351);!function(e){e.ClickEntry="feedback",e.Confirm="feedback_confirm",e.Continue="feedback_continue",e.Submit="feedback_submit"}(OT||(OT={}));let PT=class{constructor(){this.handleEnterFeedback=e=>{oe.WB.event("feedback",{feedback_type:e})}}};PT=(0,p.__decorate)([(0,ie.G)()],PT);var DT=i(66739);var MT;!function(e){e.UploadEmoteError="live_sdk_subscription_upload_emote_error",e.GetEmoteDetailError="live_sdk_subscription_get_emote_error",e.PermissionError="live_sdk_subscription_get_permission_error",e.GetBadgeDetailError="live_sdk_subscription_get_badge_detail_error",e.UpdateBadgeError="live_sdk_subscription_update_badge_error"}(MT||(MT={}));let xT=class{constructor(e){this.service=e,this.defaultTag={where:"Subscription"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleUploadEmoteError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_upload_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetBadgeDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_badge_detail_error",this.defaultMetrics,this.defaultTag)},this.handleUpdateBadgeError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_update_badge_error",this.defaultMetrics,this.defaultTag)},this.handlePermissionError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_permission_error",this.defaultMetrics,this.defaultTag)}}};xT=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[Ai.n])],xT);let wT=class{constructor(e){this.fetch=e,this.getSubPermissionInfo=e=>this.fetch.get("/webcast/sub/privilege/get_sub_info",{query:e,baseUrlType:4}),this.getDetails=e=>this.fetch.get("/webcast/sub/privilege/get_sub_privilege_detail",{query:{sec_anchor_id:e,for_anchor:!0},baseUrlType:4}),this.getBadgeDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_badge_detail",{query:e,baseUrlType:4}),this.getSubscriberList=e=>this.fetch.get("/webcast/sub/anchor/subscriber/",{query:e,baseUrlType:4}),this.updateBadge=e=>this.fetch.post("/webcast/sub/privilege/update_badge",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.getEmoteDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_emote_detail/",{query:e,baseUrlType:4}),this.updateEmote=e=>this.fetch.post("/webcast/sub/privilege/update_emote",{body:JSON.stringify(Object.assign({},e)),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.uploadImage=e=>{const t=new FormData;return t.append("data",e),this.fetch.post("/webcast/resource/upload/",{query:{scene:"tikcast_subscription"},body:t,omitContentType:!0,baseUrlType:4})}}};var UT;wT=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[ge.r])],wT),function(e){e[e.Guide=0]="Guide",e[e.Badge=1]="Badge",e[e.Emote=2]="Emote"}(UT||(UT={}));let kT=class extends le.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={loading:0,showInitModal:!1,showUpdateModal:!1,enableSubscription:!1,initializedSubscription:!1,emoteStatus:0,badgeStatus:0,hasFetchedPermission:!1,initStep:0,hasEditEmote:!1,hasEditBadge:!1}}setEnableSubscription(e,t){e.enableSubscription=t}setInitializedSubscription(e,t){e.initializedSubscription=t}setBadgeStatus(e,t){e.badgeStatus=t}setEmoteStatus(e,t){e.emoteStatus=t}setLoading(e,t){e.loading=t}setShowInitModal(e,t){e.showInitModal=t}setShowUpdateModal(e,t){e.showUpdateModal=t}setInitStep(e,t){e.initStep=t}setHasFetchedPermission(e,t){e.hasFetchedPermission=t}setHasEditEmote(e,t){e.hasEditEmote=t}setHasEditBadge(e,t){e.hasEditBadge=t}getSubPermissionInfo(e){return e.pipe((0,ue.M)(this.state$),(0,me.z)((([e,{hasFetchedPermission:t}])=>t?(0,Ti.of)(this.noop()):this.service.getSubPermissionInfo(e).pipe((0,hi.z)((({status_code:e,data:t})=>{var i,o;if(0!==e||!t)return(0,Ti.of)(this.noop());const{enable:n,initialized:a,badge_info:r,emote_info:s}=t;return(0,Ti.of)(this.getActions().setEnableSubscription(null!=n&&n),this.getActions().setInitializedSubscription(null!=a&&a),this.getActions().setBadgeStatus(null!==(i=null==r?void 0:r.current_status)&&void 0!==i?i:0),this.getActions().setEmoteStatus(null!==(o=null==s?void 0:s.current_status)&&void 0!==o?o:0),this.getActions().setHasFetchedPermission(!0))})),(0,oi.O)(this.getActions().setLoading(1)),(0,xi.l)(this.getActions().setLoading(2)),(0,Si.K)((e=>(this.slardar.handlePermissionError(e),(0,Ti.of)(this.noop()))))))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setEnableSubscription",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setInitializedSubscription",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setBadgeStatus",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setEmoteStatus",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setLoading",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setShowInitModal",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setShowUpdateModal",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Number]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setInitStep",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setHasFetchedPermission",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setHasEditEmote",null),(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"setHasEditBadge",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],kT.prototype,"getSubPermissionInfo",null),kT=(0,p.__decorate)([(0,de.Y)("SubscriptionCommonModule"),(0,p.__metadata)("design:paramtypes",[wT,xT])],kT);var FT=i(91623),BT=i.n(FT),GT=i(19531);const jT=(0,Bo.Z)("div",{target:"e1xkydcv0"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{minWidth:"223px"},"label:DivContainer;"),HT=(0,Bo.Z)("div",{target:"e1xkydcv1"})({display:"flex",alignItems:"center",position:"relative",height:"50px"},"label:DivHeader;"),WT=(0,Bo.Z)(GT.Z,{target:"e1xkydcv2"})((({theme:{direction:e}})=>[(0,re.YJ)({direction:e,marginStart:"28px"}),"ltr"===e?null:{transform:"rotate(180deg)"}]),{width:"20px",height:"20px"},"label:StyledBackIcon;"),VT=(0,Bo.Z)("p",{target:"e1xkydcv3"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{position:"absolute",left:"50%",transform:"translateX(-50%)"},"label:PTitle;"),YT=(0,Bo.Z)("ul",{target:"e1xkydcv4"})({listStyle:"none",margin:0,padding:0,maxHeight:"590px",overflowY:"auto"},"label:UlListWrapper;"),KT=(0,Bo.Z)("li",{target:"e1xkydcv5"})((({theme:e,theme:{colors:t},active:i})=>[{padding:"10px 24px",background:i?t.BGPlaceholderDefault:"transparent",":hover":{background:t.BGPlaceholderDefault}},(0,re.GI)({theme:e,fontFamily:"Sofia"})]),"label:LiListItem;"),zT=function(e){var t,i;const n=(0,No.Q)(),{$language:a}=null!==(t=(0,te.L)((()=>["$language"]),[]))&&void 0!==t?t:{},r=null!==(i=be.LANGUAGE_LIST.reduce(((e,t)=>(t.value===a?e.unshift(t):e.push(t),e)),[]))&&void 0!==i?i:[],{pathname:s,search:l}=(0,f.TH)(),c=function(){const e=(0,X.fz)(bo._e);return(0,y.useCallback)((({lang:t,url:i,currentLang:o,isMobile:n})=>{n?e.handleMobileLanguageChange(t,null!=o?o:""):e.handleLanguageChange(t),BT().remove(be.LANGUAGE_COOKIE_NAME,{domain:"www.tiktok.com"}),BT().set(be.LANGUAGE_COOKIE_NAME,t,{secure:!0,expires:300,domain:".tiktok.com"}),window.location.replace(i)}),[e])}(),d=(0,y.useCallback)((e=>()=>{let t;t=(0,Pe.Hg)(s)?`/${e}`:(0,v.stringifyUrl)({url:s,query:Object.assign(Object.assign({},(0,v.parse)(l)),{lang:e})}),c({lang:e,url:t})}),[s,c,l]),{showModal:_,hideModal:u}=(0,es.J)();return(0,y.useEffect)((()=>(_(),()=>{u()})),[u,_]),(0,o.jsxs)(jT,{children:[(0,o.jsxs)(HT,{children:[(0,o.jsx)("i",Object.assign({onClick:e.onBack},{children:(0,o.jsx)(WT,{},void 0)}),void 0),(0,o.jsx)(VT,{children:n("Language")},void 0)]},void 0),(0,o.jsx)(YT,{children:r.map((({value:e,label:t})=>(0,o.jsx)(KT,Object.assign({active:a===e,onClick:d(e)},{children:t}),e)))},void 0)]},void 0)};var $T=i(89649),qT=i(93328),ZT=i(46484);const QT=(0,Bo.Z)("ul",{target:"exws2ct0"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{padding:"8px 0",margin:0,minWidth:"223px",listStyle:"none"},"label:UlPopupContainer;"),XT=(0,Bo.Z)("li",{target:"exws2ct1"})((({theme:{colors:e},withBorder:t})=>[{padding:"10px 16px",":hover":{background:e.BGView}},t?{borderTop:`1px solid ${e.LineSecondary}`}:null]),"label:LiItemWrapper;"),JT={display:"flex",whiteSpace:"nowrap",flexDirection:"row",alignItems:"center",":hover":{textDecoration:"none"}},eS=(0,Bo.Z)(On.v,{target:"exws2ct2"})(JT,"label:StyledLinkItem;"),tS=(0,Bo.Z)(Uo.D,{target:"exws2ct3"})(JT,"label:StyledUserLink;"),iS=(0,Bo.Z)("div",{target:"exws2ct4"})(JT,"label:DivSettingItem;"),oS=(0,Bo.Z)("i",{target:"exws2ct5"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"50%",background:e.Primary},(0,re.YJ)({direction:t,marginStart:"8px"})]),"label:INewIcon;");var nS;oS.defaultProps=Object.assign(Object.assign({},oS.defaultProps),{"data-e2e":"red-dot"}),function(e){e[e.Main=0]="Main",e[e.Language=1]="Language"}(nS||(nS={}));const aS=function({Icon:e,text:t,href:i,renderLink:n,withBorder:r,hasNew:s,forceSSR:l=!1,e2eTag:c,onClick:d}){const _=(0,No.Q)(),{direction:u}=(0,a.a)(),p=function(e){const t=(0,re.YJ)({direction:e,marginEnd:"8px"});return(0,ZT.iv)([t,{width:"20px",height:"20px",flex:"0 0 20px"}])}(u),m=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,{className:p},void 0),(0,o.jsx)("span",{children:_(t)},void 0),s&&(0,o.jsx)(oS,{},void 0)]},void 0);return(0,o.jsx)(XT,Object.assign({withBorder:r,"data-e2e":c,onClick:d},{children:n?n(m):i?(0,o.jsx)(eS,Object.assign({forceSSR:l,to:null!=i?i:"#"},{children:m}),void 0):(0,o.jsx)(iS,{children:m},void 0)}),void 0)},rS=(0,y.memo)((function({active:e,margin:t=-17,e2eTag:i}){var n,r,s,l,c,d,_,u,p,m;const{direction:E}=(0,a.a)(),{pathname:g,search:h}=(0,f.TH)(),T=(0,X.fz)(bo._e),S=(0,X.fz)(Wi),O=(0,K.qj)(vo),A=function(){const e=(0,f.k6)(),t=(0,y.useCallback)((t=>{$i(t)?e.push(t):window.location.href=`https://www.tiktok.com${t}`}),[e]);return(0,y.useMemo)((()=>({push:t,goBack:e.goBack})),[t,e])}(),I=gi(),C=(0,X.fz)(Bh),N=(0,te.L)((()=>["$user","$language","$abTestVersion","$region","$searchVideoForLoggedin","$studioDownloadEntrance","$liveStudioEnable","$liveCenterConfig"]),[]),R=(0,y.useMemo)((()=>{var e,t;return(null!==(t=null===(e=be.LANGUAGE_LIST.find((({value:e})=>e===(null==N?void 0:N.$language))))||void 0===e?void 0:e.label)&&void 0!==t?t:"Language").replace(/[(].+?$/,"")}),[null==N?void 0:N.$language]),L=null==N?void 0:N.$user,b=null!==(n=null==N?void 0:N.$region)&&void 0!==n?n:"",P=null!==(r=null==N?void 0:N.$liveStudioEnable)&&void 0!==r&&r,D=null!==(l=null===(s=null==N?void 0:N.$studioDownloadEntrance)||void 0===s?void 0:s.all)&&void 0!==l&&l,M=(0,y.useMemo)((()=>{var e,t;return null!==(t=null===(e=null==N?void 0:N.$studioDownloadEntrance)||void 0===e?void 0:e.regions)&&void 0!==t?t:[]}),[null===(c=null==N?void 0:N.$studioDownloadEntrance)||void 0===c?void 0:c.regions]),x=(0,y.useMemo)((()=>g===Ei.$J.studioDownload),[g]),w=(0,y.useMemo)((()=>D||M.includes(b)&&P),[D,M,b,P]),{roomCreateInfo:U}=(0,K.mp)(vo),k=!!(null===(d=null==N?void 0:N.$liveCenterConfig)||void 0===d?void 0:d.entrance)&&0===(null==U?void 0:U.never_go_live_flag),F=(null!==(u=null===(_=null==N?void 0:N.$liveCenterConfig)||void 0===_?void 0:_.showCreatorHubRegion)&&void 0!==u?u:[]).includes(b),B=L?"portrait":"more",G=(0,y.useMemo)((()=>$i(g)),[g]),[j,H]=(0,K.b7)(Nm,{selector:e=>{var t;return null!==(t=e.redDot)&&void 0!==t?t:[]},dependencies:[]});(0,y.useEffect)((()=>{var e;(null===(e=null==N?void 0:N.$user)||void 0===e?void 0:e.uid)&&!I&&O.getCreateRoomInfo({})}),[O,null===(p=null==N?void 0:N.$user)||void 0===p?void 0:p.uid,I]),(0,y.useEffect)((()=>{var e;k&&S.handleLiveCenterShow({anchor_id:null===(e=null==N?void 0:N.$user)||void 0===e?void 0:e.uid})}),[k,S,null===(m=null==N?void 0:N.$user)||void 0===m?void 0:m.uid]);const[W,Y]=(0,y.useState)(!1),{keyboardMenuItem:z}=(({setShowKeyboardShortcut:e})=>{const{enhanceVideoConsumptionVersion:t="v1"}=(0,qT.m)(),i=(0,X.fz)(bo._e),n=(0,y.useCallback)((()=>{e(!0),i.handleEnterPage("enter_keyboard_setting",{}),Im.u8.setItem("hasCloseKeyboardShortcut",!0)}),[i,e]);return{keyboardMenuItem:"v3"===t?(0,o.jsx)(aS,{Icon:$T.Z,text:"desktop_kb_shortcuts_menu",href:null,onClick:n,e2eTag:"keyboard-shortcut-entrance"},void 0):null}})({setShowKeyboardShortcut:Y}),$=(0,X.fz)(PT),q=(0,K.mp)(ri,{selector:e=>e.hasNewFeedbackReply,dependencies:[]}),Z=(0,y.useCallback)((()=>{$.handleEnterFeedback(q?"history":"new")}),[$,q]),Q=q?"/feedback/report":"/feedback",J=(0,y.useCallback)((()=>{T.handleEnterPage("enter_setting_page",{enter_method:"top_bar"})}),[T]),ee=(0,y.useCallback)((()=>{Y(!1),Im.u8.setItem("hasCloseKeyboardShortcut",!0)}),[]),[ie,oe]=(0,y.useState)(0);(0,y.useEffect)((()=>{e||oe(0)}),[e]);const ne=(0,y.useCallback)((()=>{T.handleLanguageClick(),oe(1)}),[T]),ae=(0,y.useCallback)((()=>{oe(0)}),[]),re="ltr"===E?"bottomRight":"bottomLeft",se=(0,y.useCallback)((e=>L?(0,o.jsx)(tS,Object.assign({secUid:L.secUid,uniqueId:L.uniqueId,shouldStopPropagation:!1,reportTea:!1,teaParams:{to_user_id:L.uid}},{children:e}),void 0):null),[L]),le=(0,y.useCallback)((()=>{T.handleEnterPage("enter_personal_homepage",{})}),[T]),ce=(0,y.useCallback)((()=>{T.handleEnterPage("click_insight",{})}),[T]),de=(0,y.useCallback)((()=>{window.location.href=`${Ei.$J.studioDownload}?enter_from=profile`}),[]),_e=(0,y.useCallback)((()=>{-1!==j.indexOf(2)&&H.updateRedDot({type:2,redirect:`${location.origin}/business-suite`}),T.handleEnterPage("enter_business_suite",{})}),[T,j,H]),[ue,pe]=(0,K.b7)(rT);(0,y.useEffect)((()=>{(null==N?void 0:N.$user)&&pe.fetchPermission()}),[N,pe]);const me=ue.userState.showEntry,Ee=(0,pi.x)(null==N?void 0:N.$abTestVersion,"expose_recharge_entry_pc"),ge=me&&!G&&(void 0===Ee||"v1"===Ee),[he,Te]=(0,K.b7)(kT);(0,y.useEffect)((()=>{var e;(null==N?void 0:N.$user)&&Te.getSubPermissionInfo({sec_anchor_id:null===(e=null==N?void 0:N.$user)||void 0===e?void 0:e.secUid,need_current_state:!0})}),[Te,N]);const Se=(null==N?void 0:N.$searchVideoForLoggedin)&&[V.zp.searchHome(),V.zp.searchVideo()].includes(g)||[V.zp.messages()].includes(g),Oe=(0,v.stringify)(Qr()((0,v.parse)(h),"q","t")),Ae=Oe?`?${Oe}`:"",Ie=`https://www.tiktok.com${V.zp.foryou()}${Ae}`,ve=`/logout?redirect_url=${encodeURIComponent(Se?Ie:"undefined"==typeof window?"":(0,fe.AY)())}`,ye=(0,y.useCallback)((()=>{C.handleLiveWebGetCoinShow({show_page:"setting",is_web_recharged_before:ue.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[C,ue.transactionHistory.isWebRechargedBefore]);(0,y.useEffect)((()=>{ge&&ye()}),[ge,ye]);const Ce=(0,y.useCallback)((()=>{C.handleLiveWebGetCoinClick({show_page:"setting",is_web_recharged_before:ue.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[C,ue.transactionHistory.isWebRechargedBefore]),Ne=(0,y.useCallback)((()=>{Ce(),A.push(`${Ei.jT.coin()}?enter_from=web_main_nav`)}),[Ce,A]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kn.G,Object.assign({placement:re,active:e,arrowMargin:15,margin:t},{children:(()=>{var e,t;switch(ie){case 0:return(0,o.jsxs)(QT,Object.assign({"data-e2e":i},{children:[L&&(0,o.jsx)(aS,{renderLink:se,onClick:le,Icon:AT.Z,text:"View profile",href:null,e2eTag:"profile-info"},void 0),ge&&(0,o.jsx)(aS,{Icon:Fh.Z,text:"WebApp_coin_recharge_1",href:"/coin?enter_from=web_main_nav",forceSSR:!0,e2eTag:"recharge-entrance",onClick:Ne},void 0),Boolean((null==L?void 0:L.analyticsOn)&&!(null===(e=L.proAccountInfo)||void 0===e?void 0:e.businessSuiteEntrance))&&(0,o.jsx)(aS,{Icon:IT.Z,text:"view_analytics",forceSSR:!0,href:"/analytics",e2eTag:"analytics-entrance",onClick:ce},void 0),!x&&L&&!L.ftcUser&&w&&(0,o.jsx)(aS,{Icon:vT.Z,text:"ls_live_studio",forceSSR:!0,href:null,e2eTag:"live-studio-entrance",onClick:de},void 0),(null===(t=null==L?void 0:L.proAccountInfo)||void 0===t?void 0:t.businessSuiteEntrance)&&(0,o.jsx)(aS,{Icon:yT.Z,text:"web_business_suite_entry",href:-1!==j.indexOf(2)?"":"/business-suite",forceSSR:!0,hasNew:-1!==j.indexOf(2),onClick:_e,e2eTag:"business-entrance"},void 0),k&&(0,o.jsx)(aS,{Icon:CT.Z,text:"live_center_title",href:`https://livecenter.tiktok.com?enter_from=profile_hover&lang=${null==N?void 0:N.$language}`,forceSSR:!0,e2eTag:"live-center"},void 0),F&&(0,o.jsx)(aS,{Icon:fT.Z,text:"live_creator_hub_name",href:`https://www.tiktok.com/live/creators?enter_from=${B}&lang=${null==N?void 0:N.$language}&region=${null==N?void 0:N.$region}`,forceSSR:!0,e2eTag:"live-creator-hub"},void 0),L&&(0,o.jsx)(aS,{Icon:NT.Z,text:"settings",href:"/setting",onClick:J,forceSSR:!0,e2eTag:"settings-entrance"},void 0),(0,o.jsx)(aS,{Icon:RT.Z,text:R,href:null,onClick:ne,e2eTag:"language-select"},void 0),(0,o.jsx)(aS,{Icon:LT.Z,text:"Feedback and help",href:Q,onClick:Z,hasNew:q,forceSSR:!0,e2eTag:"feedback-entrance"},void 0),z,L&&(0,o.jsx)(aS,{withBorder:!0,Icon:bT.Z,text:"Log out",forceSSR:!0,href:ve,e2eTag:"logout-entrance"},void 0)]}),void 0);case 1:return(0,o.jsx)(zT,{onBack:ae},void 0);default:return null}})()}),void 0),(0,o.jsx)(yt.u_,Object.assign({visible:W,onClose:ee,maskCloseable:!1},{children:(0,o.jsx)(DT.e,{onClose:ee,isModal:!0},void 0)}),void 0)]},void 0)}));var sS=i(16492);const lS=(0,Bo.Z)("div",{target:"e13wiwn60"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},"label:DivHeaderRightContainer;"),cS=(0,Bo.Z)("button",{target:"e13wiwn61"})(re.Ph,(({theme:e})=>[(0,re.GI)({theme:e,typography:"P2",fontFamily:"Sofia",fontWeight:"semiBold",color:"Primary"}),(0,re.YJ)({direction:e.direction,marginStart:"6px",marginEnd:"-24px"})]),{minWidth:"88px",padding:"6px 8px",userSelect:"none",cursor:"pointer"},"label:ButtonSignUp;"),dS=(0,Bo.Z)(Et.W,{target:"e13wiwn62"})((({theme:e,theme:{direction:t}})=>[(0,re.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),(0,re.YJ)({direction:t,marginStart:"16px"}),{minWidth:"100px"}]),"label:StyledLoginButton;");dS.defaultProps=Object.assign(Object.assign({},dS.defaultProps),{"data-e2e":"top-login-button"});const _S=(0,Bo.Z)("i",{target:"e13wiwn63"})((({theme:{direction:e}})=>(0,re.YJ)({direction:e,marginStart:"16px"})),{position:"relative",cursor:"pointer",fontStyle:"normal",padding:"0 4px"},"label:IMoreIconWrapper;");_S.defaultProps=Object.assign(Object.assign({},_S.defaultProps),{"data-e2e":"see-more-icon"});const uS=(0,Bo.Z)(sS.Z,{target:"e13wiwn64"})({width:"20px",height:"20px",display:"block"},"label:StyledEllipsisVertical;"),pS=(0,Bo.Z)("i",{target:"e13wiwn65"})((({theme:e})=>[(0,re.YJ)({direction:e.direction,right:"unset",left:0}),{position:"absolute",width:"8px",height:"8px",borderRadius:"50%",background:e.colors.Primary,border:`1px solid ${e.colors.ConstTextInverse}`,boxSizing:"content-box",right:0,top:"-4px"}]),"label:IStyledRedDot;");var mS;pS.defaultProps=Object.assign(Object.assign({},pS.defaultProps),{"data-e2e":"profile-icon-red"}),function(e){e.ClickEntrance="click_upload_entrance"}(mS||(mS={}));let ES=class{handleEnter(e){oe.WB.event("click_upload_entrance",e)}};ES=(0,p.__decorate)([(0,ie.G)()],ES);var gS=i(85498);const hS=(0,Bo.Z)("div",{target:"e18d3d940"})((({needMarginLeft:e})=>({marginLeft:e?"16px":"0px",position:"relative",height:"36px","a:hover":[{textDecoration:"none"}],"@media screen and (max-width: 479px)":{display:"none"}})),"label:DivUploadContainer;");hS.defaultProps=Object.assign(Object.assign({},hS.defaultProps),{"data-e2e":"upload-icon"});const TS=(0,Bo.Z)(On.v,{target:"e18d3d941"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{display:"block",":hover":{textDecoration:"none"}},"label:StyledLinkText;");TS.defaultProps=Object.assign(Object.assign({},TS.defaultProps),{"data-e2e":"upload-icon"});const SS=(0,Bo.Z)("div",{target:"e18d3d942"})({padding:"16px",width:"282px",wordBreak:"break-word"},"label:DivTipWrapper;"),OS=(0,Bo.Z)("div",{target:"e18d3d943"})({minWidth:"110px",padding:"0 16px",height:"36px",border:"1px solid rgba(22, 24, 35, 0.12)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",":hover":{backgroundColor:"rgba(22, 24, 35, 0.03)"},":target":{backgroundColor:"rgba(22, 24, 35, 0.06)"}},"label:DivUpload;"),AS=(0,Bo.Z)(gS.Z,{target:"e18d3d944"})({height:"20px",width:"20px",marginRight:"8px"},"label:StyledPlusIcon;"),IS=(0,Bo.Z)("span",{target:"e18d3d945"})({fontStyle:"normal",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:SpanUploadText;"),vS=(0,Bo.Z)("h3",{target:"e18d3d946"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),yS=(0,Bo.Z)("p",{target:"e18d3d947"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),CS=(0,Bo.Z)("div",{target:"e18d3d948"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),fS=(0,Bo.Z)("button",{target:"e18d3d949"})(re.Ph,(({theme:e})=>(0,re.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonOk;"),NS=(0,Bo.Z)(fS,{target:"e18d3d9410"})({width:"100%",height:"36px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, .12)",marginTop:"8px"},"label:StyledButtonUpload;"),RS=function({needMarginLeft:e}){var t,i;const n=(0,No.Q)(),{colors:r,direction:s}=(0,a.a)(),[{tooltipPriority:l,uploadTooltipType:c},d]=(0,K.b7)(Nm),_=(0,te.L)((()=>["$user"]),[]),u=null!==(i=null===(t=null==_?void 0:_.$user)||void 0===t?void 0:t.longVideoMinutes)&&void 0!==i?i:0,[p,m]=(0,y.useState)(!1),{lang:E}=(0,K.mp)($.G,{selector:e=>({lang:e.lang}),dependencies:[]}),g=(0,y.useCallback)((()=>{d.setTooltipPriority(2),d.postScheduleRecord({ack_type:1})}),[d]),h=(0,X.fz)(ES),T=(0,X.fz)(bo._e),{isInVideoFeedRedesign:S}=(0,ko.y7)(),O=(0,y.useMemo)((()=>S?{play_mode:"large_video_mode"}:{}),[S]),A=(0,y.useCallback)((()=>{h.handleEnter(Object.assign({enter_method:"navigation_bar"},O)),T.handleClickNav({target:"upload",order:1})}),[T,O,h]);(0,y.useEffect)((()=>{1===l?setTimeout((()=>{m(!0)}),1e3):m(!1)}),[l]),(0,y.useEffect)((()=>{p&&1===c&&(Im.iv.setItem(ym,!0),setTimeout((()=>{d.setTooltipPriority(2)}),15e3))}),[p,c,d]);const I=(0,y.useCallback)((()=>{d.setTooltipPriority(2),window.location.href=`https://www.tiktok.com/upload?lang=${E}`}),[d,E]),v=(0,o.jsxs)(OS,{children:[(0,o.jsx)(AS,{},void 0),(0,o.jsx)(IS,{children:n("Upload")},void 0)]},void 0),C="ltr"===s?"bottomRight":"bottomLeft";return(0,o.jsxs)(hS,Object.assign({needMarginLeft:e},{children:[(0,o.jsx)(On.v,Object.assign({forceSSR:!0,to:`/upload?lang=${E}`,onClick:A},{children:v}),void 0),(0,o.jsx)(kn.G,Object.assign({active:p,backgroundColor:r.ConstSecondary2,placement:C,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(SS,{children:[(0,o.jsx)(vS,{children:0===c?n("scheduler_welcome_tooltip_title"):n("new_feature_guidance_title",{num:u}).replace(/%\w/,String(u))},void 0),(0,o.jsx)(yS,{children:0===c?n("scheduler_welcome_tooltip_des"):n("new_feature_guidance_text",{num:u}).replace(/%\w/,String(u))},void 0),0===c?(0,o.jsx)(CS,{children:(0,o.jsx)(fS,Object.assign({onClick:g},{children:n("OK")}),void 0)},void 0):(0,o.jsx)(NS,Object.assign({onClick:I},{children:n("new_feature_guidance_Upload")}),void 0)]},void 0)}),void 0)]}),void 0)},LS=function(){const e=(0,No.Q)(),t=(0,K.qj)(Wt.r),i=(0,X.fz)(ES),{isInVideoFeedRedesign:n}=(0,ko.y7)(),a=(0,y.useMemo)((()=>n?{play_mode:"large_video_mode"}:{}),[n]),r=(0,y.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),i.handleEnter(Object.assign({enter_method:"navigation_bar"},a)),t.openModal({query:{enter_method:"click_navigation_bar",redirect_url:"https://www.tiktok.com/upload/"}})}),[a,t,i]);return(0,o.jsx)("div",{children:(0,o.jsx)(TS,Object.assign({forceSSR:!0,to:"/upload",onClick:r},{children:(0,o.jsxs)(OS,{children:[(0,o.jsx)(AS,{},void 0),(0,o.jsx)(IS,{children:e("Upload")},void 0)]},void 0)}),void 0)},void 0)},bS=function({alwaysShowRechargeIconAndText:e=!1}){const t=(0,No.Q)(),{$user:i,$deviceLimitRegisterExpired:n,signUpOpen:a=!0}=(0,K.mp)($.G,{selector:e=>{var t,i,o,n;return{$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$deviceLimitRegisterExpired:null===(i=e.appContext)||void 0===i?void 0:i.$deviceLimitRegisterExpired,signUpOpen:null===(n=null===(o=e.appContext)||void 0===o?void 0:o.$config)||void 0===n?void 0:n.signUpOpen}},dependencies:[]}),[r,s]=(0,y.useState)(!0),l=(0,X.fz)(bo._e),{hasNewFeedbackReply:c}=(0,K.mp)(ri),d=(0,K.qj)(Wt.r),[_,u]=(0,K.b7)(Nm,{selector:e=>-1!==e.redDot.indexOf(1),dependencies:[]}),p=(0,y.useCallback)(((e=!1)=>()=>{d.openModal({closeable:!0,isSignup:e,query:{enter_method:"click_top_bar",redirect_url:(0,fe.AY)()}})}),[d]),{active:m,handleMouseEnter:E,handleMouseLeave:g}=(0,Un.R)(500),h=(0,te.L)((()=>["$abTestVersion"]),[]),T=(0,pi.x)(null==h?void 0:h.$abTestVersion,"expose_recharge_entry_pc"),S=void 0!==T&&"v2"===T,O=S&&r;(0,y.useEffect)((()=>{r&&S&&"HAS_ENTERED_VALUE"===(0,Jt.le)("HAS_ENTERED_KEY")&&s(!1)}),[r,S]);const A=(0,y.useCallback)((()=>{_&&u.updateRedDot({type:1}),E(),l.handleProfileHoveShow()}),[_,u,E,l]);if(!i)return(0,o.jsxs)(lS,{children:[(0,o.jsx)(LS,{},void 0),!n&&a&&(0,o.jsx)(cS,Object.assign({onClick:p(!0)},{children:t("common_notification_unlogged_button")}),void 0),(0,o.jsx)(dS,Object.assign({size:"medium",buttonTheme:"primary",onClick:p(!1)},{children:t("Log In")}),void 0),(0,o.jsxs)(_S,Object.assign({onMouseEnter:A,onMouseLeave:g},{children:[(0,o.jsx)(uS,{},void 0),(0,o.jsx)(rS,{active:m,e2eTag:"see-more-popup",margin:-13},void 0)]}),void 0)]},void 0);const{uniqueId:I,secUid:v}=i;return(0,o.jsxs)(lS,{children:[!O&&(0,o.jsx)(RS,{},void 0),(null==i?void 0:i.hasIMPermission)&&O&&(0,o.jsx)(Am,{removeMarginLeft:!0},void 0),(null==i?void 0:i.hasIMPermission)&&!O&&(0,o.jsx)(Am,{},void 0),(0,o.jsx)(Nh,{},void 0),O&&(0,o.jsx)(RS,{needMarginLeft:!0},void 0),(0,o.jsx)(ST,{alwaysShowRechargeIconAndText:e},void 0),(0,o.jsx)(Rh,{children:(0,o.jsxs)(Lm,Object.assign({onMouseEnter:A,onMouseLeave:g},{children:[(c||_)&&(0,o.jsx)(pS,{className:"red-dot"},void 0),(0,o.jsx)(rS,{margin:-12,active:m,e2eTag:"profile-popup"},void 0)]}),void 0)},void 0),(0,o.jsx)(Uh,{uniqueId:I,secUid:v,userPopupActive:m},void 0)]},void 0)};var PS,DS;!function(e){e.Show="browser_push_notifications_show",e.Granted="browser_push_notifications_allow",e.Denied="browser_push_notifications_block",e.Default="browser_push_notifications_close"}(PS||(PS={})),function(e){e.Show="guide_permission_popup_show",e.Yes="guide_permission_popup_turn_on",e.No="guide_permission_popup_cancel"}(DS||(DS={}));let MS=class{constructor(){this.handlePushShowReport=e=>{oe.WB.event("browser_push_notifications_show",{show_method:e})},this.handlePushGrantedReport=e=>{oe.WB.event("browser_push_notifications_allow",{show_method:e})},this.handlePushDeniedReport=e=>{oe.WB.event("browser_push_notifications_block",{show_method:e})},this.handlePushDefaultReport=e=>{oe.WB.event("browser_push_notifications_close",{show_method:e})},this.handleGuideShowReport=()=>{oe.WB.event("guide_permission_popup_show")},this.handleGuideYesReport=()=>{oe.WB.event("guide_permission_popup_turn_on")},this.handleGuideNoReport=()=>{oe.WB.event("guide_permission_popup_cancel")}}};MS=(0,p.__decorate)([(0,ie.G)()],MS);var xS,wS=i(42685);function US(){return e=this,t=void 0,n=function*(){const{FCM:e}=yield i.e(1792).then(i.bind(i,22343));return e},new((o=void 0)||(o=Promise))((function(i,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}));var e,t,o,n}!function(e){e.GrantedSuccess="GRANTED_SUCCESS",e.GrantedFailed="GRANTED_FAILED",e.Denied="DENIED",e.Default="DEFAULT",e.Failed="FAILED"}(xS||(xS={}));const kS="web-push-permission";let FS=class{constructor(e){this.security=e}initFCM(e,t){const i={firebaseConfig:{apiKey:"AIzaSyDHGqRfibWT6DffZBTYlhXfTQHAP_ri1MI",appId:"1:943363548815:web:f9a03b69b49a48fb5c72fa",authDomain:"tiktok-webapp.firebaseapp.com",databaseURL:"https://tiktok-webapp.firebaseio.com",measurementId:"G-WTKRD0C8TF",messagingSenderId:"943363548815",projectId:"tiktok-webapp",storageBucket:"tiktok-webapp.appspot.com"},messagingConfig:{vapidKey:"BAxZo-Q87DGZeDuCG33n7l9hsdXb2Zwf3-Cc9_NPuaNZvqMCHhCtCm-5kivnFwhVef1N06SoKbWlJBpZU0jcfa4",onMessageShow:!0,requestPermission:!1},commonParameter:{aid:1988,sender_id:17,app_region:e,app_language:t,version_code:"1.0.0"}};return(0,Xs.D)([US(),this.security.init$]).pipe((0,hi.z)((([e])=>{const t=new e(i.firebaseConfig,i.messagingConfig,i.commonParameter);return(0,Hl.D)(t.requestPermission().then((e=>{switch(e){case"granted":return t.onTokenRefresh().then((()=>"GRANTED_SUCCESS")).catch((()=>"GRANTED_FAILED"));case"denied":return"DENIED";default:return"DEFAULT"}})))})),(0,Si.K)((()=>(console.warn("fcm init failed"),(0,Ti.of)("FAILED")))))}getPushPermissionAllowed(){var e;try{const t=null!==(e=Im.iv.getItem(kS))&&void 0!==e?e:[],i=Date.now();return 0===t.length?(t.unshift(i),Im.iv.setItem(kS,t),(0,Ti.of)(!0)):i-t[0]<864e5?(0,Ti.of)(!1):t.length<3?(t.unshift(i),Im.iv.setItem(kS,t),(0,Ti.of)(!0)):i-t[2]<2592e6?(0,Ti.of)(!1):(t.unshift(i),Im.iv.setItem(kS,t.slice(0,3)),(0,Ti.of)(!0))}catch(e){return(0,Ti.of)(!1)}}};FS=(0,p.__decorate)([(0,ie.G)(),(0,p.__metadata)("design:paramtypes",[wS.$])],FS);let BS=class extends le.D{constructor(e,t){super(),this.service=e,this.pushPermissionReport=t,this.defaultState={pushPermissionOn:!1}}setPushPermissionOn(e,t){e.pushPermissionOn=t}initFCM(e){return e.pipe((0,ni.b)((({showMethod:e})=>{e&&this.pushPermissionReport.handlePushShowReport(e)})),(0,hi.z)((({region:e,lang:t,showMethod:i})=>this.service.initFCM(e,t).pipe((0,ni.b)((e=>{if(i)switch(e){case"GRANTED_SUCCESS":case"GRANTED_FAILED":this.pushPermissionReport.handlePushGrantedReport(i);break;case"DENIED":this.pushPermissionReport.handlePushDeniedReport(i);break;case"DEFAULT":this.pushPermissionReport.handlePushDefaultReport(i)}})),(0,pe.U)((()=>this.noop()))))))}judgeIfPush(e){return e.pipe((0,hi.z)((({region:e,lang:t,vid:i})=>this.service.getPushPermissionAllowed().pipe((0,pe.U)((o=>o?"v3"===i?this.getActions().setPushPermissionOn(!0):this.getActions().initFCM({region:e,lang:t,showMethod:"direct_ask_notification_permission"}):this.noop())),(0,Si.K)((()=>(0,Ti.of)(this.noop())))))))}};(0,p.__decorate)([(0,ce.lF)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[Object,Boolean]),(0,p.__metadata)("design:returntype",void 0)],BS.prototype,"setPushPermissionOn",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],BS.prototype,"initFCM",null),(0,p.__decorate)([(0,ce.Qm)(),(0,p.__metadata)("design:type",Function),(0,p.__metadata)("design:paramtypes",[_e.y]),(0,p.__metadata)("design:returntype",void 0)],BS.prototype,"judgeIfPush",null),BS=(0,p.__decorate)([(0,de.Y)("Push"),(0,p.__metadata)("design:paramtypes",[FS,MS])],BS);var GS=i(39953);const jS=(0,GS.Z)("div",{target:"e1gxxrd20"})((({theme:{colors:e}})=>({position:"absolute",boxSizing:"border-box",width:"400px",padding:"32px",top:"0",left:"50%",transform:"translateX(-50%)",background:e.BGPrimary,boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px",zIndex:2,textAlign:"center"})),"label:DivPushPermissionContainer;"),HS=(0,GS.Z)("div",{target:"e1gxxrd21"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P0",fontWeight:"bold",fontFamily:"Proxima"})),"label:DivPushPermissionTitle;"),WS=(0,GS.Z)("div",{target:"e1gxxrd22"})((({theme:e})=>(0,re.GI)({theme:e,typography:"P2",fontFamily:"Proxima"})),(({theme:{colors:e}})=>({margin:"8px 0 24px",color:e.TextPrimary})),"label:DivPushPermissionSubtitle;"),VS=(0,GS.Z)("div",{target:"e1gxxrd23"})({display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"},"label:DivPushPermissionButtonContainer;"),YS=(0,GS.Z)(Et.W,{target:"e1gxxrd24"})({"min-width":"164px"},"label:StyledButton;"),KS=function({permissionCallback:e}){const t=(0,No.Q)(),i=(0,X.fz)(MS);(0,y.useEffect)((()=>{i.handleGuideShowReport()}),[i]);const n=(0,y.useCallback)((()=>{e("denied"),i.handleGuideNoReport()}),[e,i]),a=(0,y.useCallback)((()=>{e("granted"),i.handleGuideYesReport()}),[e,i]);return(0,o.jsxs)(jS,{children:[(0,o.jsx)(HS,{children:t("push_popup_title")},void 0),(0,o.jsx)(WS,{children:t("push_popup_content")},void 0),(0,o.jsxs)(VS,{children:[(0,o.jsx)(YS,Object.assign({buttonTheme:"default",size:"largeNew",onClick:n},{children:t("push_popup_btn1")}),void 0),(0,o.jsx)(YS,Object.assign({buttonTheme:"primary",size:"largeNew",onClick:a},{children:t("push_popup_btn2")}),void 0)]},void 0)]},void 0)},zS=(0,GS.Z)("div",{target:"e15qqn8h0"})({position:"relative"},(0,re.f1)({max:767,style:{display:"none"}}),"label:DivHeaderCenterContainer;"),$S=()=>{const{pathname:e}=(0,f.TH)();return(0,y.useMemo)((()=>(0,Pe.BL)(e)||(0,Pe.I8)(e)),[e])},qS=(0,y.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,ko.y7)(),{isDetailPageCoverQuantityTestGroup:i}=(0,ko.t1)(),{isInNewVideoDetail:n}=(0,ko.xy)(),a=$S(),r=t||i||n||a?lp:sp;return(0,o.jsx)(r,Object.assign({},e),void 0)})),ZS=(0,y.memo)((function(){const e=(0,K.mp)($.G,{selector:({appContext:e})=>Boolean(e),dependencies:[]}),[t,i]=(0,y.useState)(0),n=(0,y.useCallback)((({hasModal:e,scrollWidth:t})=>{i(e?t:0)}),[]),{pushPermissionOn:a,permissionCallback:r}=function(){const[{pushPermissionOn:e},t]=(0,K.b7)(BS),{lang:i,$region:o,$user:n,$abTestVersion:a}=(0,K.mp)($.G,{selector:e=>{var t,i,o,n;return{lang:e.lang,$region:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.$region)&&void 0!==i?i:"",$user:null===(o=e.appContext)||void 0===o?void 0:o.$user,$abTestVersion:null===(n=e.appContext)||void 0===n?void 0:n.$abTestVersion}},dependencies:[]}),r=(0,pi.x)(a,"web_push_test"),s=(0,y.useCallback)((e=>{t.setPushPermissionOn(!1),"granted"===e&&t.initFCM({region:o,lang:i,showMethod:"click_guide_permission_popup_turn_on"})}),[o,i,t]),l=(0,y.useCallback)((()=>{US().then((e=>{if(("v2"===r||"v3"===r)&&e.isAvailable()&&("US"!==o||n))switch(Notification.permission){case"denied":return;case"granted":t.initFCM({region:o,lang:i});break;default:t.judgeIfPush({region:o,lang:i,vid:r})}})).catch((()=>{console.warn("load fcm failed")}))}),[r,o,n,t,i]);return(0,y.useEffect)((()=>{l()}),[l]),{pushPermissionOn:e,permissionCallback:s}}(),{subscribeModalChange:s}=(0,es.J)();return(0,y.useEffect)((()=>{const e=s(n);return()=>{e()}}),[n,s]),(0,o.jsxs)(rp,Object.assign({style:{right:t/2+"px"}},{children:[a?(0,o.jsx)(KS,{permissionCallback:r},void 0):null,(0,o.jsxs)(qS,{children:[(0,o.jsx)(dp,{},void 0),(0,o.jsx)(zS,{children:(0,o.jsx)(Kp,{},void 0)},void 0),e&&(0,o.jsx)(bS,{},void 0)]},void 0)]}),void 0)}));var QS=i(50482);const XS=(0,QS.ZP)({resolved:{},chunkName:()=>"following",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(4321),i.e(426),i.e(1073),i.e(2322),i.e(4858),i.e(3641),i.e(6307),i.e(4423),i.e(556)]).then(i.bind(i,60056)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>60056}),JS=(0,QS.ZP)({resolved:{},chunkName:()=>"search",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(8118),i.e(2388),i.e(2085),i.e(3872),i.e(6464)]).then(i.bind(i,60343)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>60343}),eO=(0,QS.ZP)({resolved:{},chunkName:()=>"user",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(4321),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(4602),i.e(378)]).then(i.bind(i,13444)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>13444}),tO=(0,QS.ZP)({resolved:{},chunkName:()=>"challenge",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(4321),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(4602),i.e(7454)]).then(i.bind(i,81108)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>81108}),iO=(0,QS.ZP)({resolved:{},chunkName:()=>"video",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(4321),i.e(2322),i.e(4858),i.e(6791)]).then(i.bind(i,66820)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>66820}),oO=(0,QS.ZP)({resolved:{},chunkName:()=>"playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(4321),i.e(426),i.e(3594),i.e(2768),i.e(7449)]).then(i.bind(i,59954)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>59954}),nO=(0,QS.ZP)({resolved:{},chunkName:()=>"music",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(4321),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(2768),i.e(4602),i.e(4106)]).then(i.bind(i,21309)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>21309}),aO=(0,QS.ZP)({resolved:{},chunkName:()=>"foryou",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(2322),i.e(4858),i.e(3641),i.e(6307),i.e(4423),i.e(427),i.e(8782)]).then(i.bind(i,72246)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>72246}),rO=(0,QS.ZP)({resolved:{},chunkName:()=>"topics",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2322),i.e(6307),i.e(427),i.e(3062)]).then(i.bind(i,43410)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>43410},{resolveComponent:e=>e.Topics}),sO=(0,QS.ZP)({resolved:{},chunkName:()=>"question",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(8118),i.e(2388),i.e(5714),i.e(2085),i.e(4321),i.e(426),i.e(3872),i.e(1073),i.e(3594),i.e(6516)]).then(i.bind(i,13640)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>13640}),lO=(0,QS.ZP)({resolved:{},chunkName:()=>"kep",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(7063),i.e(5714),i.e(8726)]).then(i.bind(i,84707)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>84707}),cO=(0,QS.ZP)({resolved:{},chunkName:()=>"messages",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2306),i.e(7063),i.e(4158)]).then(i.bind(i,2812)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>2812}),dO=(0,QS.ZP)({resolved:{},chunkName:()=>"discover",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(1792),i.e(2777),i.e(5915),i.e(2768),i.e(5023)]).then(i.bind(i,65603)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>65603}),_O=(0,GS.Z)("div",{target:"e1irlpdw0"})((({extraTop:e=0,maxWidth:t})=>({marginTop:re.Mz+e,display:"flex",width:"100vw",maxWidth:null!=t?t:re.XP,justifyContent:"space-between",alignSelf:"center",flex:"1 1 auto"})),"label:DivBodyContainer;"),uO=(0,GS.Z)("div",{target:"e1irlpdw1"})({},"label:DivSideNavContainer;"),pO=(0,GS.Z)("div",{target:"e1irlpdw2"})((({status:e,theme:{colors:t}})=>(0,re.f1)({max:767,style:[{position:"fixed",inset:re.Mz-1+"px 0 0",zIndex:99,backgroundColor:t.ConstBGInverse2,opacity:e===z.d0||e===z.cn?1:0},e===z.d0||e===z.Ix?{transition:"all 0.3s"}:null,e===z.Wj?{pointerEvents:"none"}:null]})),"label:DivSideNavMask;"),mO=(0,GS.Z)(_O,{target:"e1x8fefz0"})({maxWidth:"unset",justifyContent:"flex-start"},"label:StyledDivBodyContainerV2;"),EO=(0,y.memo)((e=>{const{pathname:t}=(0,f.TH)(),{isInVideoFeedRedesign:i}=(0,ko.y7)(),n=i||(0,Pe.BL)(t)?mO:_O;return(0,o.jsx)(n,Object.assign({},e),void 0)}));function gO({location:e}){const t=(0,y.useMemo)((()=>({pathname:e.pathname.replace(/\/\/+/g,"/"),search:e.search})),[e.pathname,e.search]);return(0,o.jsx)(f.l_,{to:t},void 0)}const hO=()=>{const[{appContext:e,isSideNavActive:t},i]=(0,K.b7)($.G,{selector:e=>({appContext:e.appContext,isSideNavActive:e.sideNavActive}),dependencies:[]}),n=(0,f.$B)([V.Ad.messages]),{$user:a,$language:r="en",$appId:s,$env:l}=(0,q.m7)(e),c=(0,y.useRef)(null);(()=>{const{$language:e}=(0,q.m7)((0,te.L)((()=>["$language"]),[])),t=(0,y.useRef)(e),i=(0,K.qj)(si.X),o=(0,y.useCallback)((()=>{i.setCookieBannerShowing(!0)}),[i]),n=(0,y.useCallback)((()=>{i.setCookieBannerShowing(!1)}),[i]);(0,y.useEffect)((()=>{Qt.f.loadCookieBanner({locale:e,onShow:o,onHide:n})}),[e,n,o]),(0,y.useEffect)((()=>{t.current&&e!==t.current&&Qt.f.updateBannerLocale(e),t.current=e}),[e])})(),function(e){const t=(0,K.qj)(ri);(0,y.useEffect)((()=>{e&&!e.ftcUser&&t.getNewestReply()}),[e,t])}(a),function(e,t,i){(0,y.useEffect)((()=>{e&&new Zt.R({aid:1459,service:"www.tiktok.com",host:"boe"===(null==i?void 0:i.type)?"https://boei18n-device.bytedance.net":1180===t?"https://ttwid-sg.byteoversea.com":"https://ttwid-va.byteoversea.com"}).init()}),[t,null==i?void 0:i.type,e])}(a,s,l),function(){const[e,t]=(0,K.b7)(Xt.D);(0,y.useEffect)((()=>{const i=i=>{if(e.isModalShow)return;i.preventDefault();const o=e.isExpand||!(0,Jt.le)(ei.OV);o&&t.handleShowSnack(!0),t.storeDeferredPrompt(i),t.setIsPwaInstallable(!0),t.setIsExpand(o)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}}),[t,e.isExpand,e.isModalShow])}(),(0,Z.u8)(!1),function(){const e=(0,K.qj)(Q.f),t=(0,y.useCallback)((()=>{window.ttWebappFocusTime||(window.ttWebappFocusTime=Date.now(),window.ttWebappBlurTime=null)}),[]),i=(0,y.useCallback)((()=>{const t=Date.now();e.updateVideoFocusTime({blurTime:t}),window.ttWebappFocusTime=null,window.ttWebappBlurTime=t}),[e]);(0,y.useEffect)((()=>{window.ttWebappFocusTime=Date.now()}),[]),(0,y.useEffect)((()=>(window.addEventListener("blur",i),window.addEventListener("focus",t),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",i)})),[i,t])}(),function(){const{pathname:e}=(0,f.TH)();(0,y.useEffect)((()=>{window.scrollTo(0,0)}),[e])}(),function(){const e=(0,X.fz)(li.W),{photoSensitiveVideosSetting:t}=(0,K.mp)(ci.P);(0,y.useEffect)((()=>{e.handleRemovePhotosensitiveStatus(1===t?"on":"off")}),[])}();const{bodyContainerWidth:d,sideNavWidth:_}=(()=>{const{isInVideoFeedRedesign:e}=(0,ko.y7)(),{isDetailPageCoverQuantityTestGroup:t}=(0,ko.t1)(),{isInNewVideoDetail:i}=(0,ko.xy)(),o=$S(),n=e||t||i||o;return{sideNavWidth:n?240:void 0,bodyContainerWidth:n?"100vw":void 0}})(),u=(0,y.useCallback)((()=>{i.setSideNavActive(!1)}),[i]),{popupHeight:p,handlePopupHide:m,handlePopupShow:E}=function(){const[e,t]=(0,y.useState)(0),i=(0,y.useCallback)((()=>{t(0)}),[]);return{popupHeight:e,handlePopupShow:(0,y.useCallback)((e=>{t(e)}),[]),handlePopupHide:i}}(),g=(0,o.jsx)(z.ZP,Object.assign({timeout:300,in:t,nodeRef:c},{children:e=>(0,o.jsxs)("div",Object.assign({ref:c},{children:[(0,o.jsx)(pO,{status:e,onClick:u},void 0),(0,o.jsx)(qr,{extraWidth:_,extraTop:p,transStatus:e,lang:r},void 0)]}),void 0)}),void 0);return(0,o.jsxs)(ls,Object.assign({isMobile:!1},{children:[(0,o.jsx)(Re,{appContext:e,slardarBid:Le.Li},void 0),(0,o.jsx)(ke,{appContext:e},void 0),(0,o.jsx)(Be,{appContext:e},void 0),(0,o.jsx)(ZS,{},void 0),(0,o.jsx)("link",{rel:"stylesheet",href:Y},void 0),(0,o.jsx)(Bt,{onShow:E,onHide:m},void 0),(0,o.jsxs)(EO,Object.assign({extraTop:p,maxWidth:d},{children:[!n&&(0,o.jsx)(uO,{children:g},void 0),(0,o.jsxs)(f.rs,{children:[(0,o.jsx)(f.AW,{path:"(.*//+.*)",exact:!0,strict:!0,component:gO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.following,component:XS},void 0),(0,o.jsx)(f.AW,{path:V.Ad.searchHome,component:JS},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.user,component:eO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.challenge,component:tO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.video,component:iO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.musicPlaylist,component:oO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.music,component:nO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:Gt.Vh,component:aO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.topics,component:rO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.question,component:sO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.expansion,component:lO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.messages,component:cO},void 0),(0,o.jsx)(f.AW,{exact:!0,path:V.Ad.discover,component:dO},void 0),(0,o.jsx)(jt,{path:"*"},void 0)]},void 0)]}),void 0),(0,o.jsx)(qt,{},void 0),(0,o.jsx)(ap,{},void 0)]}),void 0)},TO=A()(Object.values(V.Ad));!function(e,t){const{beforeStart:r=d(),ns:c}=null!=t?t:{};(function(){return(0,p.__awaiter)(this,void 0,void 0,(function*(){"Promise"in window?(m.some((e=>!(e in window)))&&(yield i.e(1342).then(i.bind(i,16376))),(E.some((e=>!(e in Array.prototype)))||g.some((e=>!(e in Object))))&&(yield Promise.all([i.e(800).then(i.t.bind(i,67735,23)),i.e(800).then(i.t.bind(i,76299,23)),i.e(800).then(i.t.bind(i,58935,23)),i.e(800).then(i.t.bind(i,33759,23))]))):window.location.href="https://www.tiktok.com/unsupported"}))})().then((()=>Promise.all([(0,l.g)(),(0,h.Bs)(),r(),(0,s.TA)(),T(c)]))).then((()=>{!function(e){const t=document.querySelector("#app");{const i=(0,n.Z)({key:"tiktok"});(0,_.hydrate)((0,o.jsx)(a.C,Object.assign({value:i},{children:(0,o.jsx)(e,{},void 0)}),void 0),t)}}(e)})).catch((e=>{console.error(e)}))}((()=>(0,o.jsx)(W,Object.assign({supportRoutes:TO},{children:(0,o.jsx)(hO,{},void 0)}),void 0)),{beforeStart:void 0})},21396:(e,t,i)=>{"use strict";i.d(t,{s:()=>o});const o=new(i(12579).O)("i18n")},30121:(e,t,i)=>{"use strict";i.d(t,{Jc:()=>n,Vh:()=>a});var o=i(29046);const n=["/en","/ar","/de-DE","/es","/fi-FI","/fr","/id-ID","/ja-JP","/ko-KR","/ms-MY","/ru-RU","/th-TH","/tr-TR","/vi-VN","/zh-Hans","/zh-Hant-TW","/he-IL","/jv-ID","/ceb-PH","/cs-CZ","/it-IT","/hu-HU","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/sv-SE","/fil-PH","/el-GR","/uk-UA","/ur","/hi-IN","/bn-IN","/my-MM","/km-KH"],a=[o.Ad.home,o.Ad.foryou,...n];var r;o.gs.home,o.gs.foryou,o.gs.discover,o.gs.topics,function(e){e.Video="video",e.User="user",e.Challenge="hashtag",e.Trending="fyp",e.Live="live",e.Message="message",e.Setting="setting",e.Music="music",e.SearchResults="search",e.Discover="discover",e.Following="following",e.Topics="topics",e.Profile="profile",e.Expansion="expansion",e.Inbox="inbox"}(r||(r={}))},16119:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});const o=i(91051).useLayoutEffect},88671:(e,t,i)=>{"use strict";i.d(t,{fB:()=>l,Nr:()=>c});var o=i(57341),n=i.n(o),a=i(53586),r=i.n(a),s=i(91051);function l(e,t,i){return(0,s.useMemo)((()=>n()(e,i)),t)}function c(e,t,i){return(0,s.useMemo)((()=>r()(e,i)),t)}},8721:(e,t,i)=>{"use strict";i.d(t,{H:()=>s,Q:()=>l});var o=i(91051),n=i(21041),a=i(95673),r=i(40798);function s(e,t){const{pathname:i,search:o}=(0,n.TH)();return(0,a.getI18nNamespace)({isMobile:e,search:o,pathname:i,isSearchbot:t})}const l=(e="Webapp")=>{const t=(0,o.useContext)(r.OO).t;return(0,o.useCallback)(((i,o,n)=>t(i,Object.assign({ns:e},o),n)),[e,t])}},40798:(e,t,i)=>{"use strict";i.d(t,{CJ:()=>l,OO:()=>c,bd:()=>d});var o=i(11040),n=i(16926),a=i(91051),r=i(21396);let s;const l={type:"intl3rdParty",name:"intl-react-plugin",init(e){s=e}},c=(0,a.createContext)({t:e=>e,lang:"en"}),d=({lang:e,t,children:i})=>{const l=(0,a.useMemo)((()=>[{provide:r.s,useValue:s.t}]),[]),d=(0,a.useMemo)((()=>({t:null!=t?t:s.t,lang:e})),[e,t]);return(0,o.jsx)(c.Provider,Object.assign({value:d},{children:(0,o.jsx)(n.yx,Object.assign({providers:l},{children:i}),void 0)}),void 0)}},66958:(e,t,i)=>{"use strict";i.d(t,{P4:()=>n,MB:()=>a,JD:()=>r,yl:()=>l,fH:()=>c,nY:()=>_,_9:()=>d,cC:()=>E});var o=i(25508);const{getPureLivePath:n,getPureMusicPath:a,getPureTagPath:r,getPureStickerPath:s,getPureUserPath:l,getPureVideoPath:c,getPureQuestionPath:d}=o.Z,{getPureUniqueId:_,hasIllegalText:u,isPureNumber:p,isRealUniqueId:m,purifyMusicName:E}=o.c},50218:(e,t,i)=>{"use strict";i.d(t,{Hg:()=>r,oC:()=>s,Xq:()=>l,Io:()=>c,FZ:()=>d,cQ:()=>_,ws:()=>u,Dj:()=>p,bf:()=>m,BL:()=>E,u7:()=>g,I8:()=>h,C2:()=>T});var o=i(21041),n=i(29046),a=i(30121);function r(e){const t=e.replace(/\/$/,"");return e===n.Ad.home||a.Jc.includes(t)}function s(e){return e.replace(/\/$/,"")===n.Ad.foryou||r(e)}function l(e){if(s(e))return"fyp";if(e.match("/following"))return"following";if(e.match("/setting"))return"setting";if(e.match("/search"))return"search";if(e.match("/message"))return"message";if(e.match("/video"))return"video";if(e.match("/@"))return"user";if(e.match("/music"))return"music";if(e.match("/tag"))return"hashtag";if(e.match(/\/discover\/.+/))return"expansion";if(e.match("/discover"))return"discover";if(e.match("/live"))return"live";if(c(e)){const t=(0,o.LX)(e,{path:n.Ad.topics,exact:!0});return"topics_"+(null==t?void 0:t.params.name)}return e.match("/profile")?"profile":e.match("/inbox")?"inbox":""}function c(e){return!!(0,o.LX)(e,{path:n.Ad.topics,exact:!0})}function d(e){return e===n.Ad.following}function _(e){return/^\/@[^/]+\/video\/\d+/.test(e)}function u(e){return/^\/music\/.+/.test(e)}function p(e){return/^\/tag\/.+/.test(e)}function m(e){return!/^\/@.+\/live/.test(e)&&!/^\/@.+\/video\/\d+/.test(e)&&/^\/@.+/.test(e)}function E(e){return/^\/discover\/.+/.test(e)}function g(e){return/^\/question\/.+/.test(e)}function h(e){return!!(0,o.LX)(e,{path:n.Ad.discover,exact:!0})}function T(e){return s(e)?5:d(e)?11:_(e)?0:u(e)?4:p(e)?3:m(e)?1:function(e){return e===n.Ad.searchUser}(e)?106:function(e){return e===n.Ad.searchVideo}(e)?107:function(e){return e===n.Ad.searchHome}(e)?105:g(e)?16:c(e)?113:function(e){return/^\/messages/.test(e)}(e)?13:h(e)?103:5}},30626:(e,t,i)=>{"use strict";i.d(t,{eD:()=>u,zv:()=>p,GV:()=>m});var o=i(64047),n=i(57244),a=i(37729),r=i(50218),s=i(13964),l=i(39341);const c="webapp-session-referer";var d,_;!function(e){e[e.Default=0]="Default",e[e.Simple=1]="Simple",e[e.None=2]="None"}(d||(d={})),function(e){e[e.None=0]="None",e[e.AWEME=1]="AWEME",e[e.FixedWww=2]="FixedWww",e[e.AutoMOrT=3]="AutoMOrT",e[e.Webcast=4]="Webcast",e[e.AutoWebcastMOrT=5]="AutoWebcastMOrT",e[e.AWEMEV1=6]="AWEMEV1",e[e.PostLikeTest=7]="PostLikeTest",e[e.CommentTest=8]="CommentTest"}(_||(_={}));const u="tt-csrf-token",p={FORM_ENCODE:"application/x-www-form-urlencoded; charset=UTF-8"};let m=class{constructor(){this.appContext$=new a.t(1),this.appLanguage="en",this.isPageVisible=!0,this.isFocus=!0}setAppContext(e){this.appContext||(this.appContext$.next(e),this.appContext=e,(0,s.Y8)(this.handleVisibilityChange.bind(this,!1),this.handleVisibilityChange.bind(this,!0)),this.bindFocusChange())}getBaseUrl(e=0){var t,i,o,n,a,r,s,l,c,d,_,u,p,m,E,g,h,T,S,O,A,I;switch(e){case 1:return"https://api.tiktok.com";case 2:return null!==(i=null===(t=this.appContext)||void 0===t?void 0:t.$domains.rootApi)&&void 0!==i?i:"https://www.tiktok.com";case 3:return this.appContext?this.appContext.$domains.mTApi:"";case 6:return this.appContext?this.appContext.$domains.rootApi:"";case 4:return null!==(n=null===(o=this.appContext)||void 0===o?void 0:o.$domains.webcastRootApi)&&void 0!==n?n:"https://webcast.tiktok.com";case 5:return this.appContext?this.appContext.$domains.webcastApi:"";case 0:return null!==(r=null===(a=this.appContext)||void 0===a?void 0:a.$domains.rootApi)&&void 0!==r?r:"";case 7:return null!==(m=null!==(u=null===(_=null===(d=null===(c=null===(l=null===(s=this.appContext)||void 0===s?void 0:s.$abTestVersion)||void 0===l?void 0:l.parameters)||void 0===c?void 0:c.like_comment_domain)||void 0===d?void 0:d.vid)||void 0===_?void 0:_.like)&&void 0!==u?u:null===(p=this.appContext)||void 0===p?void 0:p.$domains.mTApi)&&void 0!==m?m:"";case 8:return null!==(I=null!==(O=null===(S=null===(T=null===(h=null===(g=null===(E=this.appContext)||void 0===E?void 0:E.$abTestVersion)||void 0===g?void 0:g.parameters)||void 0===h?void 0:h.like_comment_domain)||void 0===T?void 0:T.vid)||void 0===S?void 0:S.comment)&&void 0!==O?O:null===(A=this.appContext)||void 0===A?void 0:A.$domains.rootApi)&&void 0!==I?I:""}}getRiskParams(e,t=!1){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.appContext)return{};if(2===e)return{};(0,s.St)(c)||(0,s.D9)(c,document.referrer);const i=1===e;let o=null;if(!t&&navigator.getBattery&&(o=(yield navigator.getBattery()).level),i)return Object.assign(Object.assign({},(0,l.$b)()),{from_page:(0,r.Xq)(location.pathname)});const n={};return"ageVerify"===(0,s.St)("enter_method")&&(n.security_verification_aid="1459"),Object.assign(Object.assign(Object.assign({},(0,l.Kj)(this.appContext,this.isPageVisible,this.isFocus,o)),{from_page:(0,r.Xq)(location.pathname)}),n)}))}handleVisibilityChange(e){this.isPageVisible=e}bindFocusChange(){const e=()=>{this.isFocus=!0},t=()=>{this.isFocus=!1};return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}};m=(0,o.__decorate)([(0,n.G)()],m)},4206:(e,t,i)=>{"use strict";i.d(t,{r:()=>y});var o=i(64047),n=i(57244),a=i(57001),r=i.n(a),s=i(40316),l=i.n(s),c=i(90293),d=i(82346),_=i(14716),u=i(60595),p=i(53095),m=i(30626),E=i(39341),g=i(42685),h=i(71952);const T=1e4;var S;!function(e){e[e.Pass=0]="Pass",e[e.Reject=1]="Reject",e[e.Retry=2]="Retry"}(S||(S={}));let O=class{constructor(){this.domId="tiktok-verify-ele",this.captcha=null,this.verifyElement=null,this.open=!1,this.rejectPass=!1,this.checkVerify=(e,t,i,n)=>(0,o.__awaiter)(this,void 0,void 0,(function*(){var o;if("object"!=typeof e)return e;const{statusCode:a,code:r}=null!=e?e:{};if(a===T||r===String(T)){const a=r===String(T)?e:e.verifyConfig,s=yield this.loadCaptcha(n&&i?"ttp":a.region,t);if(-1===a.fp){const e=yield null===(o=this.captcha)||void 0===o?void 0:o.getFp();a.fp=e}return s?this.open?(yield this.updateState(),this.rejectPass?1:2):this.goVerify(a,n):1}return 0})),this.destroy=()=>{var e;null===(e=this.captcha)||void 0===e||e.close(),this.verifyElement&&(document.body.removeChild(this.verifyElement),this.verifyElement=null)}}init(){this.verifyElement||(this.verifyElement=document.createElement("div"),this.verifyElement.setAttribute("id",this.domId),document.body.appendChild(this.verifyElement))}goVerify(e,t){return this.init(),new Promise((i=>{this.openVerify((()=>{this.closeVerify(),i(2)}),(()=>{this.closeVerify(!0),i(1)}),e,t)}))}closeVerify(e=!1){var t;this.open=!1,this.rejectPass=e,null===(t=this.captcha)||void 0===t||t.close()}openVerify(e,t,i,o){var n;const a={ele:this.domId,lang:"en",successCb:e,showMode:"mask",closeCb:t,errorCb:()=>{},fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}};o&&(a.host=o),this.open=!0,this.rejectPass=!0,null===(n=this.captcha)||void 0===n||n.render({verify_data:i,captchaOptions:a})}updateState(){return new Promise((e=>{if(!this.open)return void e();const t=setInterval((()=>{this.open||(clearInterval(t),e())}),800)}))}loadCaptcha(e,t){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.captcha){let o;switch(e){case"boe":case"sg":o=i.e(1792).then(i.bind(i,14694));break;case"va":o=i.e(1792).then(i.bind(i,1371));break;case"in":case"ttp":o=i.e(1792).then(i.bind(i,85438));break;default:return!1}const n=yield o;this.captcha=n,n.init({commonOptions:{aid:1988,did:t||"0",iid:"0"},captchaOptions:{fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}}})}return!0}))}};O=(0,o.__decorate)([(0,n.G)()],O);const A="content-type",I=["application/pdf"],v={m:"va",t:"sg",us:"ttp",boe:"boe"};let y=class{constructor(e,t,i){this.verify=e,this.util=t,this.security=i,this.get=this.rxFetchFactory("GET"),this.post=this.fetchPost,this.put=this.rxFetchFactory("PUT"),this.delete=this.rxFetchFactory("DELETE")}get csrfToken(){var e,t;return this.util.appContext,null!==(t=null===(e=this.util.appContext)||void 0===e?void 0:e.$csrfToken)&&void 0!==t?t:""}get appContext(){return this.util.appContext,this.util.appContext}rxFetchFactory(e){return(t,i)=>this.rxFetch(t,Object.assign(Object.assign({},i),{method:e}))}judgeNeedEncryption(e){return h.kS.some((t=>e.indexOf(t)>-1))}fetchPost(e,t={}){var{omitContentType:i=!1}=t,n=(0,o.__rest)(t,["omitContentType"]);const a=new Headers(n.headers);return a.get(A)||i||a.set(A,"application/x-www-form-urlencoded"),n.body||(n.body=""),n.headers=a,this.rxFetch(e,Object.assign(Object.assign({},n),{method:"POST"}))}getVerifyJson(e,t){var i,o;const n=e.status_code,a=3058===n,r=3059===n,s=v[null!==(o=null===(i=this.appContext)||void 0===i?void 0:i.$domains.kind)&&void 0!==o?o:""];return t.includes("/api/update/profile/")&&(a||r)?{code:"10000",from:"shark_admin",type:"verify",version:1,region:s,subtype:a?"slide":"text",verify_event:"",detail:{},fp:-1}:e}rawFetch(e,t){var i,n,a,r,s,l;return(0,o.__awaiter)(this,void 0,void 0,(function*(){const o=yield window.fetch.call(null,e,t);if(o.status>=400)return Promise.reject(o);{const c=o.headers.get(A);if(null==c?void 0:c.includes("application/json")){const l=yield o.json(),c=this.getVerifyJson(l,e),d=yield this.verify.checkVerify(c,null!==(n=null===(i=this.appContext)||void 0===i?void 0:i.$wid)&&void 0!==n?n:"0",null!==(r=null===(a=this.appContext)||void 0===a?void 0:a.$isTTP)&&void 0!==r&&r,null===(s=this.appContext)||void 0===s?void 0:s.$domains.captcha);return 0===d?l:2===d?this.rawFetch(e,t):{statusCode:-1}}return(null===(l=o.headers.get(A))||void 0===l?void 0:l.includes("text/"))?o.text():-1!==I.indexOf(String(c))?o.blob():(null==c?void 0:c.includes("application/x-protobuf"))?o.arrayBuffer():o.text()}}))}rxFetch(e,t){var{credentials:i="include"}=t,n=(0,o.__rest)(t,["credentials"]);return(!e.startsWith("/")||e.startsWith("//")||"GET"!==n.method||h.rJ.some((t=>!!e.match(new RegExp(t))))?this.security.init$:(0,d.of)([!0,!0])).pipe((0,p.z)((()=>{var e;const t=null!==(e=n.riskParamsType)&&void 0!==e?e:0,i=n.isInstantApp;return(0,_.D)(this.util.getRiskParams(t,i))})),(0,p.z)((t=>new u.y((o=>{var a;const s="AbortController"in window?new AbortController:{signal:{aborted:!1},abort(){this.signal.aborted=!0}},d=Object.assign({},t,n.query);e.startsWith("http:")||e.startsWith("https:")||(e=this.util.getBaseUrl(n.baseUrlType)+e);const _=l()(r()(n,{signal:s.signal,credentials:i}),"query","riskParamsType","baseUrlType");if(this.judgeNeedEncryption(e)){const i=(0,E.J4)(d);_.headers=Object.assign(Object.assign({},null!==(a=_.headers)&&void 0!==a?a:{}),{"x-tt-params":i}),t&&(e=(0,c.stringifyUrl)({url:e,query:t}))}else e=(0,c.stringifyUrl)({url:e,query:d});return this.rawFetch(e,_).then((e=>{o.next(e),o.complete()})).catch((e=>{o.error(e)})),()=>{s.signal.aborted||s.abort()}})))))}};y=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[O,m.GV,g.$])],y)},39341:(e,t,i)=>{"use strict";i.d(t,{Kj:()=>a,$b:()=>r,J4:()=>s});const o=i(70745),n=(e,t)=>{try{return sessionStorage.getItem(e)||t}catch(e){return console.warn("sessionStorage get failed"),t}},a=(e,t,i,o)=>{const a=document.cookie.match(/s_v_web_id=(\w+)/);try{const r={aid:"1988",app_name:"tiktok_web",channel:"tiktok_web",device_platform:(e||{}).$isMobile?"web_mobile":"web_pc",device_id:(e||{}).$wid,region:(e||{}).$region,priority_region:((e||{}).$user||{}).region||"",os:(e||{}).$os,referer:document.referrer,root_referer:n("webapp-session-referer"),cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,verifyFp:(a||"")[1],app_language:(e||{}).$language,webcast_language:(e||{}).$language,tz_name:Intl.DateTimeFormat().resolvedOptions().timeZone,is_page_visible:t,focus_state:i,is_fullscreen:window.matchMedia("(display-mode: fullscreen)").matches,history_len:window.history.length};return"ageVerify"===n("enter_method")&&(r.security_verification_aid="1459"),navigator.getBattery&&(r.battery_info=o),r}catch(e){}return{}},r=()=>({cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,timezone_name:Intl.DateTimeFormat().resolvedOptions().timeZone}),s=e=>{const t=[];return Object.keys(e).forEach((i=>{const o=i+"="+e[i];t.push(o)})),t.push("is_encryption=1"),((e,t)=>{const i=((e,t)=>{let i=e.toString();const o=i.length;return o<16?i=new Array(16-o+1).join("0")+i:o>16&&(i=i.slice(0,16)),i})("webapp1.0+20210628"),n=o.enc.Utf8.parse(i);return o.AES.encrypt(e,n,{iv:n,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString()})(t.join("&"))}},71952:(e,t,i)=>{"use strict";var o;i.d(t,{rJ:()=>a,kS:()=>l,Yf:()=>c}),function(e){e[e.LoginMode=513]="LoginMode",e[e.USUnloginMode=514]="USUnloginMode",e[e.USUnloginHighRiskMode=515]="USUnloginHighRiskMode",e[e.NonUSUnloginMode=516]="NonUSUnloginMode",e[e.U13Mode=517]="U13Mode"}(o||(o={}));const n=["/api/impression/write/","/api/user/set/animation/","/api/aweme/set/react_duet_stitch/","/api/aweme/delete/","/api/schedule/aweme/delete/","/passport/web/login_name/update/","/api/update/profile/","/api/upload/image/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/commit/follow/user/","/tiktok/v1/username/save_async/"],a=["/node/share/","/share/item/list","/discover/render/undefined","/node/feedback/upload_image/","/share/item/explore/list","/api/comment/list/","/api/comment/list/reply/","/api/commit/follow/user/","/api/commit/item/digg/","/aweme/v1/upload/image2/","/api/notice/multi/","/api/notice/count/","/api/notice/digg/list/","/api/user/following/request/list/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/sticker/item_list/","/api/user/contact/list/","/api/at/default/list/","/api/comment/search/user/","/web/aweme/v1/search/challengesug","/web/aweme/v1/discover/search/","/api/v1/item/create/","/api/search/user/full/","/api/search/user/preview/","/api/search/item/full/","/api/search/general/full/","/api/music/detail/","/api/challenge/detail/","/api/user/detail/","/api/user/list/","/api/item/detail/","/api/question/detail/","/api/question/item_list/","/api/discover/challenge/","/api/discover/user/","/api/discover/music/","/api/discover/expansion/item/","/api/discover/expansion/word_list/","/api/challenge/item_list/","/api/music/item_list/","/api/post/item_list/","/api/favorite/item_list/","/api/following/item_list/","/api/recommend/item_list/","/api/recommend/user/","/api/recommend/embed_videos/","/api/live/detail/","/api/im/multi_user/","/api/user/get/animation/","/api/user/settings/","/aweme/v1/music/list/","/api/mix/detail","/api/mix/item_list","/api/uniqueid/check/",...n,"/node/report/reasons","/aweme/v1/aweme/feedback/","/webcast.*","/v1/message/send","/v2/conversation/create","/v1/voip/call","/v1/conversation/add_participants","/1/conversation/remove_participants","/v1/conversation/update_participant","/v1/conversation/set_setting_info","/v1/conversation/get_setting_info","/v1/conversation/upsert_core_ext_info","/v1/conversation/upsert_settings_ext","/v1/conversation/dissolve","/v1/message/mark","/v1/message/batch_unmark","/v1/message/set_property","/node-a/send/download_link","/api/uniqueid/check/","/api/v3/register/user/info/sync/","/api/policy/notice/approve/","/api/private_banner/ack/","/api/privacy/agreement/record/agree/v1","/api/v3/register/verification/age/","/api/register/check/login/name/","/api/user/detail/self/","/api/policy/notice/","api/compliance/settings","/passport/web/","/shorten/"],r=["/webcast/room/chat/","/webcast/room/create_info/","/webcast/room/enter/","/webcast/room/leave/","/webcast/room/live_podcast/","/webcast/room/ping/audience/","/webcast/user/relation/update/","/webcast/gift/send/","/webcast/room/emote_chat/","/webcast/room/share/","/webcast/wallet_api/diamond_exchange/"],s=["/api/private_banner/ack/","/cloudpush/update_sender_token/","/cloudpush/app_notice_status/","/api/user/set/settings/","/api/reddot/report","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/aweme/delete/","/api/schedule/aweme/delete/","/api/privacy/user/private_account/update/v1","/api/im_setting/update/v1","/api/privacy/agreement/record/agree/v1"],l=["/api/post/item_list/","/api/music/item_list/"],c={"webcast.tiktok.com":{POST:r},"webcast-t.tiktok.com":{POST:r},"webcast-m.tiktok.com":{POST:r},"webcast.us.tiktok.com":{POST:["/webcast/gift/send/","/webcast/wallet_api/diamond_exchange/"]},"www.tiktok.com":{POST:s},"us.tiktok.com":{POST:s},"m.tiktok.com":{POST:n},"t.tiktok.com":{POST:n}}},42685:(e,t,i)=>{"use strict";i.d(t,{$:()=>h});var o=i(64047),n=i(57244),a=i(15608),r=i(82346),s=i(14716),l=i(96980),c=i(49584),d=i(93859),_=i(56979),u=i(68854),p=i(58755),m=i(84584),E=i(30626),g=i(71952);let h=class{constructor(e){this.util=e,this.init$=(0,a.D)([this.initAcrawler().pipe((0,l.q)(1)),this.initCSRF().pipe((0,l.q)(1))]),this.acrawlerInitliazed=!1,this.csrfInitliazed=!1}getSecSdkMode({isVA:e,isLogin:t,isFTC:i,isHighRisk:o}){return i?517:t?513:e&&o?515:e&&!o?514:516}initAcrawler(){return this.util.appContext$.pipe((0,c.z)((e=>{const{$appId:t,$sgOpen:i,$user:o,$isTTP:n}=e,a=1233===t&&!i;let r=a?"va-tiktok":"sg-tiktok";return r=n?"ttp":r,this.loadSdk("acrawler").pipe((0,d.b)((()=>{var e;this.acrawlerInitliazed||(this.acrawlerInitliazed=!0,window.byted_acrawler.init({aid:1988,dfp:!1,boe:!1,intercept:!0,enablePathList:g.rJ,region:r,mode:this.getSecSdkMode({isVA:a,isLogin:!!o,isFTC:null!==(e=null==o?void 0:o.ftcUser)&&void 0!==e&&e,isHighRisk:!1}),isSDK:!1}))})))})),(0,_.U)((()=>!0)),(0,u.K)((()=>(0,r.of)(!0))))}initCSRF(){return this.util.appContext$.pipe((0,c.z)((e=>{const{$appId:t,$sgOpen:i}=e,o=1233!==t||i?"secsdk_sg":"secsdk_va";return this.loadSdk(o)})),(0,_.U)((()=>!0)),(0,d.b)((()=>{this.csrfInitliazed||(this.csrfInitliazed=!0,window.secsdk.csrf.setProtectedHost(g.Yf))})),(0,u.K)((()=>(0,r.of)(!0))))}loadSdk(e,t=1e4){return(0,s.D)((0,m.yy)({moduleId:e,retry:1})).pipe((0,p.V)(t))}};h=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[E.GV])],h)},481:(e,t,i)=>{"use strict";i.d(t,{WB:()=>m});var o=i(57001),n=i.n(o),a=i(25615),r=i.n(a),s=i(90293),l=i(17230),c=i(13964);const d=/h5_t|h5_m|landing_page|webapp/,_=/embed/,u="header.custom";function p(){}p.send=r(),p.init=r(),p.config=r(),p.setDomain=r(),r(),r();const m=new class{constructor(e=i(87097).Z,t=[],o=!1,n={}){this.instance=e,this.missEventsCaches=t,this.initialized=o,this.baseConfig=n,this.commonEventParams={}}get commonParams(){return this.commonEventParams}config({conf:e,commonEventParams:t}={}){this.initialized||this.init(e);const i=n()(this.baseConfig,e);t&&(this.commonEventParams=Object.assign(Object.assign({},this.commonEventParams),t)),this.instance.config(i)}beconEvent(e,t={}){if(this.initialized)try{this.instance.beconEvent(e,Object.assign(Object.assign({},this.commonEventParams),t))}catch(e){}}event(e,t={}){if(this.initialized)try{this.instance.event(e,Object.assign(Object.assign({},this.commonEventParams),t)),this.missEventsCaches.length&&(this.missEventsCaches.forEach((e=>{this.instance.event(e[0],Object.assign(Object.assign({},this.commonEventParams),e[1]))})),this.missEventsCaches.length=0)}catch(e){}else this.missEventsCaches.push([e,t])}setDomain(e){this.instance.setDomain(e),this.instance.event("reactive_domain")}resetStayDuration(e,t,i){var o,n;null===(n=(o=this.instance).resetStayDuration)||void 0===n||n.call(o,e,t,i)}init(e){var t,i;const o=T();"microsoft-store"!==o["app-install-source"]&&"app-info://platform/microsoft-store"!==(null===document||void 0===document?void 0:document.referrer)||(o.source="msft");const{traffic_type:a,utm_source:r,utm_medium:s,utm_campaign:p,referer_video_id:m,utm_content:g,utm_term:S}=o,{lm:O="",refer:A="",source:I="",is_from_webapp:v="",referer_url:y="",_r:C=""}=function(e,t){const i={};return["refer","source","is_from_webapp","referer_url","lm","_r"].forEach((t=>{const o=e[t];Array.isArray(o)?i[t]=o[0]:i[t]=null!=o?o:void 0})),i}(o),f=(null!==(t=new RegExp(`${location.origin}/(@?\\w+)`).exec(document.referrer))&&void 0!==t?t:[])[1],N=Boolean(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/))||navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1?"mobile":"pc",R=function(e){const t=(0,c.St)(l.hw,void 0),{refer:i,refererUrl:o,lm:n,device:a,trafficType:r,source:s,fromWebapp:d,siteOnePath:_,queryR:u}=e,p="embed"===_||"embed"===i,m="creator_embed"===i,E="amp"===_||/^amp_\w+/.test(o);return!t||p||E||m?"msft"===s?"msft":"twa"===s?"twa":"push"===s?"push":navigator.standalone||"pc"===a&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui)").matches||"mobile"===a&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: fullscreen)").matches?"pwa":"11"===n?"paid":p?"referral_embed":m?"referral_creator_embed":E?"referral_amp":"tiktok_browse"===i?"referral_tiktok_browse":/google|yahoo|yandex|bing|naver|duckduckgo/gi.test(r)?"organic":"1"===u?"reflow":"webapp"===s||d?"webapp_reflow":i||o||document.referrer?"referral":"direct":t}({refer:A,refererUrl:y,lm:O,trafficType:E(),device:N,source:I,fromWebapp:v,siteOnePath:f,queryR:C});(0,c.D9)(l.hw,R),function(e){h.forEach((t=>{e[t]&&(0,c.D9)(t,e[t])}))}(o);const L=function(e,t){var i,o,n,a,r,s;const d=(0,c.St)(l.lF,"");if(d&&"{}"!==d)return d;const _=T()||{},u={object_id:null!==(i=_.object_id)&&void 0!==i?i:_.referer_video_id,object_type:_.object_type,share_device:null!==(n=null!==(o=_.share_device)&&void 0!==o?o:_.sender_device)&&void 0!==n?n:"",share_web_id:null!==(r=null!==(a=_.share_web_id)&&void 0!==a?a:_.sender_web_id)&&void 0!==r?r:"",share_user_id:null!==(s=_.share_user_id)&&void 0!==s?s:""};"referral_amp"===e||"referral_embed"===e?(u.object_type="video",u.object_id=_.referer_video_id):"reflow"===e||"webapp_reflow"===e?(u.object_type=t.object_type,u.object_id=t.object_id):"push"===e&&(u.push_type=_.push_type),Object.keys(u).forEach((e=>{u[e]||delete u[e]}));const p=JSON.stringify(u);return(0,c.D9)(l.lF,p),p}(R,e),b={channel:"sg",device:N,launch_mode:R,region:"unknown",traffic_type:null!=a?a:E(),source:d.test(I)?"":I,referer_url:y?decodeURIComponent(y):(null==A?void 0:A.replace(_,""))||f||document.referrer||"direct",utm_source:null!=r?r:"",utm_medium:null!=s?s:"",utm_campaign:null!=p?p:"",utm_content:null!=g?g:"",utm_term:null!=S?S:"",referer_video_id:null!=m?m:"",extraData:L,user_is_login:!1},P=n()(b,e);e.id===l.CO?(this.baseConfig={user_type:12,[u]:Object.assign({traffic_type:P.traffic_type,utm_source:P.utm_source,source:P.source,launch_mode:P.launch_mode,device:P.device,region:P.region,utm_medium:P.utm_medium,utm_campaign:P.utm_campaign,utm_content:P.utm_content,utm_term:P.utm_term,referer_url:P.referer_url,referer_video_id:P.referer_video_id,session_id:P.session_id,extraData:P.extraData},P[u])},this.baseConfig.user_id&&(this.baseConfig.user_id=Number(P.user_id),this.baseConfig.user_is_login=!0)):(this.baseConfig={user_type:12,[u]:Object.assign({traffic_type:P.traffic_type,launch_mode:P.launch_mode,referer_url:P.referer_url},P[u])},this.commonEventParams={traffic_type:P.traffic_type,refer_source:P.referer_url}),this.instance.init({enable_ttwebid:!0,channel_domain:P.channel_domain,app_id:null!==(i=e.id)&&void 0!==i?i:l.CO,enable_stay_duration:!0,channel_type:"tcpy"}),this.initialized=!0,this.instance.start()}};function E(){var e;let t=(0,c.St)(l.Gb);if(!t){if(document.referrer){const i=/https?:\/\/.*(google|yahoo|yandex|bing|naver|wikipedia|facebook|instagram|youtube|twitter|tiktok|buzzfeed|debate|greenlemon|cloudfront|multimedios|huffpost|sdpnoticias|pinterest|bluradio|eluniversal|elcomercio|insider|medialeaks|intheknow|distractify|telediario|msn|duckduckgo|linkedin|discord|whatsapp|telegram|viber|reddit|twitch|snapchat|messenger).*\/?/;t=(null!==(e=document.referrer.match(i))&&void 0!==e?e:[])[1]||"others"}else t="no_referrer";(0,c.D9)(l.Gb,t)}return t}var g;!function(e){e.Pwa="pwa",e.Paid="paid",e.Embed="referral_embed",e.CreateEmbed="referral_creator_embed",e.Browse="referral_tiktok_browse",e.Amp="referral_amp",e.Reflow="reflow",e.WebApp="webapp_reflow",e.MSFT="msft",e.TWA="twa",e.Push="push",e.Organic="organic",e.Refer="referral",e.Direct="direct"}(g||(g={}));const h=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","referer_url","referer_video_id"];function T(){return"undefined"==typeof document?{}:(0,s.parse)(location.search,{arrayFormat:"bracket"})}},90035:(e,t,i)=>{"use strict";i.d(t,{G:()=>o,k:()=>n});const o=e=>null,n=(e,t,i)=>{}},47165:(e,t,i)=>{"use strict";i.d(t,{n:()=>r});var o=i(11348),n=i(49847),a=i(68854);const r=({msg:e,shouldShowMsg:t=!1,prevent:i=!0,callback:r})=>s=>s.pipe((0,a.K)((a=>(t&&console.error("Effect error: ",null!=e?e:a),null==r||r(),i?o.E:(0,n._)((()=>a))))))},13964:(e,t,i)=>{"use strict";i.d(t,{G6:()=>a,Y8:()=>r,Di:()=>s,Ii:()=>l,YT:()=>c,cx:()=>d,uf:()=>u,KZ:()=>p,YZ:()=>m,le:()=>E,D$:()=>g,e8:()=>h,St:()=>T,D9:()=>S,lD:()=>O,NS:()=>A,UW:()=>I,PF:()=>v});var o=i(25615),n=i.n(o);function a(){return navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")}function r(e=n(),t=n()){let i,o;function a(){i&&document[i]?e():t()}return"hidden"in document?(i="hidden",o="visibilitychange"):"msHidden"in document?(i="msHidden",o="msvisibilitychange"):"webkitHidden"in document&&(i="webkitHidden",o="webkitvisibilitychange"),"addEventListener"in document&&i&&o?(document.addEventListener(o,a,!1),document.removeEventListener.bind(document,o,a,!1)):n()}function s(e,t){let i={top:0,bottom:0,left:0,right:0};try{i=e.getBoundingClientRect()}catch(e){}let{top:o,bottom:n}=i;const{height:a}=i;return o-=t,n-=t,o=Math.abs(o),n<=0||o>=a?0:Number((n/a).toFixed(2))}function l(){return window.innerHeight<document.body.offsetHeight&&"hidden"!==document.body.style.overflow}function c(){return window.innerWidth-document.body.offsetWidth}function d(){const e=document.documentElement||document.body.parentNode||document.body;return void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop}const _="webapp-scroll_invoke_by_click";function u(){return T(_)}function p(){O(_)}function m(e=0,t=100){const i=d(),o=Date.now(),n=()=>{window.pageYOffset.toFixed()===e.toFixed()&&(S(_,"done"),window.removeEventListener("scroll",n))};S(_,"start"),window.addEventListener("scroll",n),function n(){const a=Date.now()-o;if(a>=t)return void window.scrollTo({top:e,behavior:"smooth"});const r=(t-a)/t*(e-i)+i;window.scrollTo({top:r,behavior:"smooth"}),requestAnimationFrame(n)}()}function E(e,t=""){var i;try{return null!==(i=localStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function g(e,t){try{localStorage.setItem(e,t)}catch(e){}}function h(e){try{localStorage.removeItem(e)}catch(e){}}function T(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function S(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}function O(e){try{sessionStorage.removeItem(e)}catch(e){}}const A=e=>{e.preventDefault(),e.stopPropagation()},I=e=>{e.stopPropagation()},v=e=>{e.preventDefault()}},40022:(e,t,i)=>{"use strict";function o(){return"undefined"==typeof window||"undefined"==typeof document}function n(){return!o()&&!window.SIGI_STATE}i.d(t,{y:()=>o,W:()=>n})},23588:(e,t,i)=>{"use strict";i.d(t,{yB:()=>l});var o,n,a=i(64047),r=i(57244),s=i(481);!function(e){e.Share="livesdk_share",e.Report="livesdk_live_user_report",e.ReportSuccess="livesdk_report_success",e.ChatClose="livesdk_comment_close",e.HoverUserCardShow="livesdk_user_card_show",e.Follow="livesdk_follow",e.Take="livesdk_live_action",e.SetupPopShow="livesdk_live_tab_popup_show",e.AnchorEnterRoom="livesdk_anchor_enter_room",e.Show="livesdk_live_show",e.ClickEntrance="livesdk_rec_live_play",e.Unfollow="livesdk_unfollow"}(o||(o={})),function(e){e.VideoHeadBrowser="video_head_browser",e.Creator="creator",e.VideoHead="video_head",e.OthersPhoto="others_photo",e.SuggestedOthersPhoto="suggested_others_photo",e.ClickOneColumnUser="click_main_btn"}(n||(n={}));let l=class{constructor(){this.handleLiveEntranceShow=e=>{s.WB.event("livesdk_live_show",e)},this.handleLiveEntranceClick=e=>{s.WB.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=e=>{s.WB.event("livesdk_live_action",Object.assign({live_type:"third_party"},e))}}};l=(0,a.__decorate)([(0,r.G)()],l)},48036:(e,t,i)=>{"use strict";i.d(t,{y7:()=>_,t1:()=>u,It:()=>p,xy:()=>m,II:()=>E});var o=i(9236),n=i(21041),a=i(50218),r=i(34708),s=i(92311),l=i(2734),c=i(23028);const d="$abTestVersion";function _(){var e;const{$abTestVersion:t}=(0,l.m7)((0,r.L)((()=>[d]),[])),{pathname:i}=(0,n.TH)(),o=(0,c.T)(t,"xgplayer_preload_test"),s=null!==(e=(0,c.T)(t,"video_feed_redesign"))&&void 0!==e?e:"v1",_="v2"===s,u="v3"===s;return{xgplayerVid:o,isUseNativePlayer:"v2"!==o,isVideoFeedRedesignV1:!_&&!u,isVideoFeedRedesignV2:_,isVideoFeedRedesignV3:u,isInVideoFeedRedesign:(_||u)&&((0,a.oC)(i)||(0,a.FZ)(i))}}const u=()=>{var e,t;const{$abTestVersion:i}=null!==(e=(0,r.L)((()=>[d]),[]))&&void 0!==e?e:{},{pathname:o}=(0,n.TH)(),s=(0,a.ws)(o)||(0,a.Dj)(o)||(0,a.bf)(o)||(0,a.u7)(o),l=null!==(t=(0,c.T)(i,"increase_detail_page_cover_quantity_test"))&&void 0!==t?t:"v1";return{isDetailPageCoverQuantityTestGroup:("v2"===l||"v3"===l)&&s,ssrLimit:"v3"===l&&s?16:6}};function p(){var e;const{$abTestVersion:t}=(0,l.m7)((0,r.L)((()=>[d]),[])),i=null!==(e=(0,c.T)(t,"xgplayer_preload_test"))&&void 0!==e?e:"v1";return{isUseNativePlayer:"v2"!==i,xgplayerVid:i}}function m(){const{pathname:e}=(0,n.TH)(),{testId:t}=(0,o.mp)(s.q),i="video_refactor_treatment"===t?"v7":"v1",r="v1"!==i;return{hasNewVideoDetailPage:r,hasFYPBack:"v1"!==i,verticalVideoPanel:"v1"!==i,hasBrowserMode:"v7"!==i,actionBarInPlayer:!0,isInNewVideoDetail:r&&(0,a.cQ)(e)}}function E(){var e;const{$abTestVersion:t}=(0,l.m7)((0,r.L)((()=>[d]),[])),i=null!==(e=(0,c.T)(t,"add_transcript"))&&void 0!==e?e:"v1";return{isDownloadTranscript:"v1"!==i,isOriginVideoDetail:"v1"===i,isInActionBar:"v2"===i,isDefaultHidden:"v2"===i,isDefaultExpanded:"v2"===i||"v3"===i,isDefaultFolded:"v4"===i,isShowCloseIcon:"v2"===i}}},17230:(e,t,i)=>{"use strict";var o;i.d(t,{OV:()=>n,AH:()=>a,uU:()=>r,S0:()=>s,Gb:()=>l,hw:()=>c,lF:()=>d,vN:()=>_,HW:()=>u,m8:()=>p,OB:()=>m,b7:()=>E,kU:()=>T,CO:()=>S,ES:()=>O,lK:()=>A,kg:()=>I,_T:()=>v,eQ:()=>y,jd:()=>C}),function(e){e[e.Hot=0]="Hot",e[e.Relation=1]="Relation",e[e.Fresh=2]="Fresh",e[e.Post=3]="Post",e[e.Favorite=4]="Favorite",e[e.Challenge=5]="Challenge",e[e.Music=6]="Music",e[e.Category=7]="Category",e[e.MusicFresh=8]="MusicFresh",e[e.ChallengeFresh=9]="ChallengeFresh",e[e.Follow=10]="Follow",e[e.Trending=18]="Trending",e[e.TitleRecommend=20]="TitleRecommend",e[e.Nearby=21]="Nearby",e[e.Search=23]="Search",e[e.HotVideo=24]="HotVideo",e[e.HotMusic=25]="HotMusic",e[e.FollowerList=26]="FollowerList",e[e.Inbox=33]="Inbox",e[e.Live=27]="Live"}(o||(o={}));const n="webapp-pwa-expanded",a="webapp-live-nav-click",r="webapp_google_one_tap_close_time",s="webapp_showed_profile_tip",l="webapp_original_traffic_type",c="webapp_launch_mode",d="webapp_extra_data",_="webapp_tiktok_open",u="webapp_session_id",p="webapp_tiktok_privious",m="webapp_open_edit_profile_modal_from",E="popup_profile_toast";var g,h;!function(e){e[e.NIL=-255]="NIL",e[e.UnknownError=-1]="UnknownError",e[e.Ok=0]="Ok",e[e.ReportLiveFailed=90002]="ReportLiveFailed",e[e.VerifyCode=1e4]="VerifyCode",e[e.VideoLikeFreq=2150]="VideoLikeFreq",e[e.VideoLikeFreq2=2210]="VideoLikeFreq2",e[e.VideoUnavailableDeleted=2054]="VideoUnavailableDeleted",e[e.AdVideoUnavailableChange=2752]="AdVideoUnavailableChange",e[e.CommentBanCode=22]="CommentBanCode",e[e.CommentLikePermissionDisable=3002043]="CommentLikePermissionDisable",e[e.SearchSensitiveCode=403]="SearchSensitiveCode",e[e.SearchYoungCode=203]="SearchYoungCode",e[e.SmsInvalidNumber=-1]="SmsInvalidNumber",e[e.SmsSlideVerify=-4]="SmsSlideVerify",e[e.FypVideoListLimit=10404]="FypVideoListLimit",e[e.ClientPageError=450]="ClientPageError",e[e.LiveNeedLogin=10119]="LiveNeedLogin",e[e.SharkBlock=10114]="SharkBlock",e[e.SharkSlide=10113]="SharkSlide",e[e.NetError=10111]="NetError",e[e.ServerErrorNot500=10101]="ServerErrorNot500",e[e.VideoRisk=10228]="VideoRisk",e[e.VideoRMask=10229]="VideoRMask",e[e.VideoRiskMask=10230]="VideoRiskMask",e[e.VideoNeedRecheck=10227]="VideoNeedRecheck",e[e.VideoUnshelveByMusic=10220]="VideoUnshelveByMusic",e[e.VideoNotExist=10204]="VideoNotExist",e[e.VideoAbnormal=10215]="VideoAbnormal",e[e.VideoLowAgeM=10213]="VideoLowAgeM",e[e.VideoLowAgeT=10214]="VideoLowAgeT",e[e.VideoFirstReviewUnshelve=10217]="VideoFirstReviewUnshelve",e[e.VideoPrivateByUser=10216]="VideoPrivateByUser",e[e.VideoGeofenceBlock=10231]="VideoGeofenceBlock",e[e.VideoPhoto=10239]="VideoPhoto",e[e.VideoFriendsOnly=10240]="VideoFriendsOnly",e[e.VideoDeleted=10241]="VideoDeleted",e[e.VideoUserBlockedByAuthor=10242]="VideoUserBlockedByAuthor",e[e.HashtagNotExist=10205]="HashtagNotExist",e[e.HashtagUnshelve=10212]="HashtagUnshelve",e[e.HashtagSensitivityWord=10211]="HashtagSensitivityWord",e[e.HashtagBlackList=10209]="HashtagBlackList",e[e.UserInboxFollowBan=24]="UserInboxFollowBan",e[e.UserNotExist=10202]="UserNotExist",e[e.UserBan=10221]="UserBan",e[e.UserPrivate=10222]="UserPrivate",e[e.UserNotLogin=10102]="UserNotLogin",e[e.UserFtc=10223]="UserFtc",e[e.UserUniqueSensitivity=10225]="UserUniqueSensitivity",e[e.QuestionNotAvailable=10236]="QuestionNotAvailable",e[e.MusicNotExist=10203]="MusicNotExist",e[e.MusicUnshelve=10218]="MusicUnshelve",e[e.MusicNoCopyright=10219]="MusicNoCopyright",e[e.GameNotExist=10224]="GameNotExist",e[e.LiveNotExist=10210]="LiveNotExist",e[e.GoLiveRoomBaned=10018]="GoLiveRoomBaned",e[e.GoLiveBaned=4003035]="GoLiveBaned",e[e.LiveRoomPrepare=30019]="LiveRoomPrepare",e[e.LiveRoomEnd=30003]="LiveRoomEnd",e[e.LiveRoomBan=30012]="LiveRoomBan",e[e.LiveNoGatedAuth=4003043]="LiveNoGatedAuth",e[e.LiveNoAgeGatedAuth=4003110]="LiveNoAgeGatedAuth",e[e.LiveSuicideCase=2403]="LiveSuicideCase",e[e.LiveSensitiveTitle=50004]="LiveSensitiveTitle",e[e.LiveRoomBaned=10018]="LiveRoomBaned",e[e.LiveEnterRoomNeedLogin=20003]="LiveEnterRoomNeedLogin",e[e.LiveAccountUnderRiskControl=20063]="LiveAccountUnderRiskControl",e[e.LiveHitBanStrategy=30009]="LiveHitBanStrategy",e[e.LiveOBSAccessRecalled=4003105]="LiveOBSAccessRecalled",e[e.EffectNotExist=10208]="EffectNotExist",e[e.PlaylistNotExist=10233]="PlaylistNotExist",e[e.PlaylistInTrill=10234]="PlaylistInTrill",e[e.VideoPlaylistUnavailable=10243]="VideoPlaylistUnavailable",e[e.VideoPlaylistIsEmpty=10244]="VideoPlaylistIsEmpty",e[e.PrivateAccountLimitByBC=3026002]="PrivateAccountLimitByBC"}(g||(g={})),function(e){e.Trending="homepage_hot",e.Discover="discovery",e.Inbox="homepage_message",e.Profile="personal_homepage",e.User="others_homepage",e.Music="single_song",e.Challenge="challenge",e.Video="video_detail",e.Setting="setting",e.Report="report",e.Error="page_404",e.Analytics="insight_page",e.Following="homepage_follow",e.Feedback="feedback",e.FeedbackReport="feedback_report",e.FeedbackHistory="feedback_history",e.AgeVerification="AGE_VERIFICATION",e.Topics="topic",e.Live="live_detail",e.LiveEmbedDetail="live_embed_detail",e.GoLive="live_take",e.LiveDiscover="live_discover",e.LiveReferralHost="live_referral_host",e.LiveReferralHostLogin="live_referral_host_login",e.LiveReferralHostAccept="live_referral_host_accept",e.LiveReferralHostWrong="live_referral_host_wrong",e.LiveReferralHostFaq="live_referral_host_faq",e.LiveEvent="live_event",e.SearchReflow="search_reflow",e.SharingVideo="reflow_video",e.SharingMusic="reflow_music",e.SharingChallenge="reflow_challenge",e.SharingSticker="reflow_sticker",e.SharingUser="reflow_user",e.SharingGroup="reflow_group",e.QADetail="qa_detail",e.QADetailReflow="reflow_qa_detail",e.VideoPlaylist="reflow_video_playlist",e.GeneralSearch="general_search",e.SearchUser="search_user",e.SearchVideo="search_video",e.SuicidePrevention="suicide_prevention",e.Messages="messages",e.Recharge="live_recharge",e.RechargeCashier="live_recharge_cashier",e.Expansion="discover_kw",e.Playlist="music_playlist",e.StudioDownload="studio_download",e.Subscription="subscription",e.VideoTT4D="video_tt4d",e.Login="login",e.Signup="signup"}(h||(h={}));const T="Sorry, something wrong with the server, please try again.",S=1988,O=3e4,A=30,I=9,v=9,y=30,C=30},493:(e,t,i)=>{"use strict";i.d(t,{Li:()=>o,Zy:()=>n});const o="tiktok_webapp",n="tiktok_webapp_login"},53304:(e,t,i)=>{"use strict";i.d(t,{s:()=>a,q:()=>r});var o=i(91051),n=i(88671);function a({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const r=(0,n.fB)((()=>{if(!e.current)return;const{offsetHeight:o,scrollTop:n,scrollHeight:a}=e.current;o+n+i>=a&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>{const{current:t}=e;return null==t||t.addEventListener("scroll",r),()=>{null==t||t.removeEventListener("scroll",r)}}),[e,e.current,r])}function r({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const r=(0,n.fB)((()=>{if(!e.current)return;const{bottom:o}=e.current.getBoundingClientRect();o-i<=window.innerHeight&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>(window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)})),[r])}},2723:(e,t,i)=>{"use strict";i.d(t,{s:()=>a});var o=i(91051),n=i(88671);function a({threshold:e=1e3,onHitBottom:t,onPageBottom:i,shouldRunOnMount:a}){const r=(0,o.useRef)(null),s=(0,o.useRef)(0),l=(0,n.fB)((()=>{var o;if(!r)return;const n=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageYOffset?window.pageYOffset:n.scrollTop,l=Number(null===(o=r.current)||void 0===o?void 0:o.scrollHeight)-a-window.innerHeight;l-e<=0&&s.current<a&&(null==t||t()),l<=-60&&a-s.current>=18&&(null==i||i()),s.current=a}),[t,e,i],100);return(0,o.useEffect)((()=>{a&&l()}),[]),(0,o.useEffect)((()=>(window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)})),[l]),r}},40599:(e,t,i)=>{"use strict";i.d(t,{R:()=>l,J:()=>c});var o=i(25615),n=i.n(o),a=i(91051),r=i(13964);const s=(0,a.createContext)({counterRef:{current:0},scrollWidthRef:{current:0},subscribeRef:{current:[]},setCounter:n(),setScrollWidth:n(),subscribeModalChange:()=>n()});function l(){const e=(0,a.useRef)(0),t=(0,a.useRef)(0),i=(0,a.useRef)([]),o=(0,a.useCallback)((t=>{e.current=t}),[]),n=(0,a.useCallback)((e=>{t.current=e}),[]),r=(0,a.useCallback)((e=>(i.current.push(e),()=>{const t=i.current.indexOf(e);i.current.splice(t)})),[]),l=(0,a.useMemo)((()=>({counterRef:e,subscribeRef:i,scrollWidthRef:t,setCounter:o,setScrollWidth:n,subscribeModalChange:r})),[r,o,n]);return{GlobalModalProvider:s.Provider,value:l}}function c(){const{counterRef:e,setCounter:t,setScrollWidth:i,subscribeRef:o,scrollWidthRef:n,subscribeModalChange:l}=(0,a.useContext)(s),c=(0,a.useCallback)((e=>{o.current.forEach((t=>{t({hasModal:e,scrollWidth:n.current})}))}),[n,o]);return{showModal:(0,a.useCallback)((o=>{if(!(0,r.Ii)()&&!o)return;const{current:n}=e;if(t(n+1),0===n){const e=(0,r.YT)();i(e),document.body.style.paddingRight=`${e}px`,document.body.className+=" hidden",c(!0)}}),[e,c,t,i]),hideModal:(0,a.useCallback)((()=>{const{current:o}=e,n=Math.max(0,o-1);t(n),0===n&&(i(0),document.body.className=document.body.className.replace(/\s?hidden/g,""),document.body.style.paddingRight="0px",c(!1))}),[e,c,t,i]),subscribeModalChange:l}}},85404:(e,t,i)=>{"use strict";i.d(t,{o:()=>s,e:()=>l});var o=i(9236),n=i(91051),a=i(8721),r=i(84785);function s(){return(0,o.mp)(r.G,{selector:e=>{var t,i,o,n;return{domain:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.$domains.starling)&&void 0!==i?i:"https://starling-oversea.byteoversea.com",teaDomain:null!==(n=null===(o=e.appContext)||void 0===o?void 0:o.$domains.tea)&&void 0!==n?n:"https://maliva-mcs.byteoversea.com"}},dependencies:[]})}const l=(e="Webapp")=>{const t=(0,a.Q)(e),i=(0,n.useCallback)(((e,i)=>{const o=function(e){if(!e||isNaN(e))return"";const t=new Date(Number(e)),i=new Date,o=Math.max(i.getTime()-t.getTime(),0);return t.getFullYear()!==i.getFullYear()?`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`:~~(o/p)>7?`${t.getMonth()+1}-${t.getDate()}`:7==~~(o/p)?{num:1,unit:"unit_week"}:o>p?{num:~~(o/p),unit:"unit_day"}:o>u?{num:~~(o/u),unit:"unit_hr"}:o>_?{num:~~(o/_),unit:"unit_min"}:{num:1+~~(o/d),unit:"unit_sec"}}(e);if("string"==typeof o)return o;const{num:n,unit:a}=o;return i?`${n}${t(a)}`:t("time_ago",{num:n,unit:t(a)})}),[t]);return{t,timeTranslator:i}};var c;!function(e){e.Week="unit_week",e.Day="unit_day",e.Hour="unit_hr",e.Minute="unit_min",e.Second="unit_sec"}(c||(c={}));const d=1e3,_=6e4,u=36e5,p=24*u},48710:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var o=i(91051);const n=({upHandler:e,downHandler:t,confirmHandler:i})=>(0,o.useCallback)((o=>{const{keyCode:n}=o;switch(n){case 38:o.preventDefault(),e();break;case 40:o.preventDefault(),t();break;case 13:null==i||i()}}),[i,t,e])},89436:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var o=i(91051),n=i(21041),a=i(34708),r=i(2734);function s(){const e=(0,n.k6)(),{$config:t}=(0,r.m7)((0,a.L)((()=>["$config"]),[])),i=!t.isInWebappV1;return(0,o.useCallback)(((t,{href:o,state:n,shouldUsePush:a})=>{i?a&&(t.preventDefault(),e.push(o,n)):location.href=o}),[e,i])}},23753:(e,t,i)=>{"use strict";i.d(t,{A4:()=>n,S0:()=>r});const o={bid:"tiktok_webapp",plugins:{ajax:{ignoreUrls:[".byteoversea.com","tiktokv.com/v1/list","mcs-sg.tiktok.com","mcs-va.tiktok.com","mcs.us.tiktok.com"]},jsError:{ignoreErrors:["Blocked a frame with origin","__msg_type","vid_mate_check is not defined","ResizeObserver loop limit exceeded"]},resource:!0},sample:{sample_rate:1,sample_granularity:"event",include_users:[],rules:{resource:{enable:!0,sample_rate:.01,conditional_sample_rules:[]},resource_error:{enable:!0,sample_rate:.05,conditional_sample_rules:[]},performance_longtask:{enable:!0,sample_rate:.001,conditional_sample_rules:[]}}},env:"production",release:"undefined"},n=(e,t={})=>`!function(e,n,r,t,d){if(window[n]&&window[n].config)return;var i=document.createElement(r),s=document.getElementsByTagName(r)[0];i.async=1,i.src=e;var a=s.parentNode;a&&a.insertBefore(i,s);var o=[];function c(){o.push(arguments[0])}window[n]={error:o,config:t,listener:c,sf:d},window.addEventListener("error",c,!0),window.addEventListener("unhandledrejection",c)}("${"t"===e?"https://sf16-short-sg.bytedapm.com/slardar/fe/sdk_lite/browser-nocookie.lite.0.7.7.sg.js":"https://sf16-short-va.bytedapm.com/slardar/fe/sdk_lite/browser-nocookie.lite.0.7.7.maliva.js"}","SlardarLite","script",${JSON.stringify(Object.assign(o,t))},0);`;var a;!function(e){e.P0="fatal",e.P1="error",e.P2="warning",e.P3="info",e.P4="debug",e.P5="critical"}(a||(a={}));const r=["lcp","fp","fid","ttfb","mpfid"]},85866:(e,t,i)=>{"use strict";i.d(t,{q:()=>s});var o=i(16926),n=i(91051),a=i(91218);let r=!0;function s({pid:e}){const t=(0,o.fz)(a.n);(0,n.useEffect)((()=>{t.config({pid:e}),t.context({isLandingPage:r?1:0}),r=!1}),[e,t])}},91218:(e,t,i)=>{"use strict";i.d(t,{n:()=>d});var o=i(64047),n=i(57244),a=i(10768),r=i(481),s=i(40022),l=i(493),c=i(23753);let d=class{constructor(){if(this.cachePreBid="",!(0,s.y)())try{a.Z.on("beforeSend",(e=>{var t,i,o,n;try{if("performance"===e.ev_type&&("metrics"in e.payload?e.payload.metrics.forEach(this.collectSlardarMetricsToTea):this.collectSlardarMetricsToTea(e.payload,null===(t=e.common)||void 0===t?void 0:t.pid)),"performance_timing"===e.ev_type){const{responseEnd:t,responseStart:a,domContentLoadedEventEnd:s,fetchStart:l,navigationStart:c}=null!==(i=e.payload.timing)&&void 0!==i?i:{},d=null!==(n=null===(o=e.payload.common)||void 0===o?void 0:o.pid)&&void 0!==n?n:"unknown",_=s-l,u=t-a,p=a-c;r.WB.event("slardar_perf_domready",{metric_duration:_&&_>0?_.toString():-1,pid:d}),r.WB.event("slardar_perf_response",{metric_duration:u&&u>0?u.toString():-1,pid:d}),r.WB.event("slardar_perf_ttfb",{metric_duration:p&&p>0?p.toString():-1,pid:d})}}catch(e){}return e}))}catch(e){}}config(e){try{a.Z.config(e)}catch(e){}}toggleLoginSlardar(e){var t,i;e?(this.cachePreBid=null===(i=null===(t=window.SlardarLite)||void 0===t?void 0:t.config)||void 0===i?void 0:i.bid,this.config({bid:l.Zy})):this.config({bid:this.cachePreBid})}context(e){try{Object.entries(e).forEach((([e,t])=>{var i;return null===(i=a.Z.context)||void 0===i?void 0:i.set(e,t)}))}catch(e){}}captureMessage(e="",t,i={}){var o;try{null===(o=a.Z.captureException)||void 0===o||o.call(a.Z,new Error(e),t?Object.assign(Object.assign({},i),{level:t}):i)}catch(e){console.info("slardar: capture exception error")}}emitEvent(e,t,i){var o;try{null===(o=a.Z.sendEvent)||void 0===o||o.call(a.Z,{name:e,categories:i,metrics:t})}catch(e){}}reportI18nLoadedFailed(e,t){this.emitEvent("I18nLoadFailed",{count:1},{staringName:e,lang:t})}sendLog(e,t,i){var o;try{null===(o=a.Z.sendLog)||void 0===o||o.call(a.Z,{content:e,level:t,extra:i})}catch(e){}}sendPV(e){var t;try{null===(t=a.Z.sendPageview)||void 0===t||t.call(a.Z,e)}catch(e){}}collectSlardarMetricsToTea(e,t){if(e.isSupport||e.isPolyfill){const i=e.name.toLowerCase();c.S0.includes(i)&&r.WB.event(`slardar_perf_${i}`,{metric_duration:e.value.toString(),pid:null!=t?t:"unknown"})}}};d=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[])],d)},3483:(e,t,i)=>{"use strict";i.d(t,{_e:()=>c});var o,n,a,r=i(64047),s=i(57244),l=i(481);!function(e){e.PageView="page_view",e.ClickToTop="click_to_top",e.ClickLanguage="click_change_language",e.ChangeLanguage="change_langauage",e.LoginBannerShow="login_banner_show",e.LoginNotify="login_notify",e.LoginNotifyClose="login_notify_close",e.EnterSignUp="enter_sign_up",e.LoginBannerClose="login_banner_close",e.Logo="click_logo",e.Click="click_navigation_bar",e.ClickMusicPlay="click_music_play",e.ClickHamburgerMenu="click_hamburger_menu",e.ClickInsight="click_insight",e.EnterInsightDetail="enter_insight_detail",e.VideoPlay="video_play",e.ProfileHoveShow="livesdk_web_profile_hover_show",e.SwipeUpGuideShow="swipe_up_guide_show",e.SwipeUpGuideClose="swipe_up_guide_close",e.ClickCommentButton="click_comment_button",e.CloseCommentPanel="close_comment_panel",e.VideoLoginGuideShow="video_login_guide_show",e.VideoLoginGuideClick="video_login_guide_click",e.CommentLoginGuideShow="comment_login_guide_show",e.VideoLimitNotify="video_limit_notify"}(o||(o={})),function(e){e.Trending="enter_homepage_hot",e.Challenge="enter_tag_detail",e.Music="enter_music_detail",e.User="enter_personal_detail",e.Profile="enter_personal_homepage",e.Discover="enter_discovery_page",e.Video="enter_video_detail",e.Question="enter_qa_detail_page",e.Set="enter_setting_page",e.Following="enter_homepage_follow",e.SuicidePrevention="tns_show_ssh_tips_support_page",e.Live="enter_live_detail",e.Business="enter_business_suite",e.Analytics="click_insight",e.LiveDiscover="enter_live_discover",e.KeyboardShortcut="enter_keyboard_setting",e.Message="enter_homepage_message",e.MusicPlaylist="enter_playlist_page"}(n||(n={})),function(e){e.VideoDetail="video_detail",e.HomepageHot="homepage_hot",e.SearchSug="search_sug",e.SearchResult="search_result",e.SearchOuter="search_outer",e.Inbox="homepage_message",e.InboxFollowRequest="follow_request_page"}(a||(a={}));let c=class{constructor(){this.handlePageView=e=>{l.WB.event("page_view",e)},this.handleToTop=()=>{l.WB.event("click_to_top")},this.handleLanguageChange=e=>{l.WB.event("change_langauage",{enter_method:"top_bar",to_language:e})},this.handleMobileLanguageChange=(e,t)=>{l.WB.event("change_langauage",{language:t,to_language:e})},this.handleLoginBannerShow=()=>{l.WB.event("login_banner_show")},this.handleLoginNotify=()=>{l.WB.event("login_notify",{enter_method:"click_banner"})},this.handleSignUp=()=>{l.WB.event("enter_sign_up",{enter_method:"click_banner"})},this.handleLoginBannerClose=()=>{l.WB.event("login_banner_close")},this.handleLoginModalHide=({enter_method:e="click_x"})=>{l.WB.event("login_notify_close",{enter_method:e})},this.handleLanguageClick=()=>{l.WB.event("click_change_language",{enter_method:"top_bar"})},this.handleLanguageSelect=({language:e})=>{l.WB.event("click_change_language",{language:e})},this.handleEnterPage=(e,t)=>{l.WB.event(e,t)},this.handleClickLogo=()=>{l.WB.event("click_logo")},this.handleClickNav=e=>{l.WB.event("click_navigation_bar",e)},this.handleClickHamburgerMenu=()=>{l.WB.event("click_hamburger_menu")},this.handleClickMusicCard=e=>{l.WB.event("click_music_play",e)},this.handleClickAnalyticsButton=()=>{l.WB.event("click_insight"),l.WB.event("enter_insight_detail",{widget_name:null,sub_widget:null})},this.handleClickAnalyticsVideoCover=()=>{l.WB.event("video_play",{enter_from:"insight_page",widget_name:"null",sub_widget:"null",enter_method:"video_card"})},this.handleProfileHoveShow=()=>{l.WB.event("livesdk_web_profile_hover_show")},this.handleNewUserGuideShow=e=>{l.WB.event("swipe_up_guide_show",e)},this.handleNewUserGuideClose=e=>{l.WB.event("swipe_up_guide_close",e)},this.handleClickCommentButton=e=>{l.WB.event("click_comment_button",e)},this.handleVideoLoginGuideShow=e=>{l.WB.event("video_login_guide_show",e)},this.handleVideoLoginGuideClick=e=>{l.WB.event("video_login_guide_click",e)},this.handleCloseCommentPanel=e=>{l.WB.event("close_comment_panel",e)},this.handleCommentLoginGuideShow=e=>{l.WB.event("comment_login_guide_show",e)},this.handleVideoLimitNotify=()=>{l.WB.event("video_limit_notify")}}};c=(0,r.__decorate)([(0,s.G)()],c)},30572:(e,t,i)=>{"use strict";i.d(t,{p:()=>s});var o,n=i(64047),a=i(57244),r=i(481);!function(e){e.SaveProfile="save_profile",e.ClickEditProfile="click_edit_profile",e.EditProfileNotifyShow="edit_profile_notify_show",e.CancelEditProfile="cancel_edit_profile",e.CancelEditProfileShow="cancel_edit_profile_show"}(o||(o={}));let s=class{constructor(){this.handleSaveReport=e=>{r.WB.event("save_profile",e)},this.handleClickEditProfile=e=>{r.WB.event("click_edit_profile",e)},this.handleShowProfileTooltip=e=>{r.WB.event("edit_profile_notify_show",e)},this.handleCancelEditProfile=e=>{r.WB.event("cancel_edit_profile",e)},this.handleCloseProfileTooltip=e=>{r.WB.event("cancel_edit_profile_show",e)}}};s=(0,n.__decorate)([(0,a.G)()],s)},73306:(e,t,i)=>{"use strict";i.d(t,{M3:()=>O,k0:()=>A,mn:()=>I,u8:()=>v,nV:()=>y});var o=i(64047),n=i(16926),a=i(90293),r=i(91051),s=i(21041),l=i(481),c=i(13964),d=i(40022),_=i(50218),u=i(23028),p=i(34708),m=i(17230),E=i(51302),g=i(3483),h=i(31966),T=i(88851),S=i(955);function O(){var e;const{$abTestVersion:t,$user:i}=null!==(e=(0,p.L)((()=>["$abTestVersion","$user"]),[]))&&void 0!==e?e:{},o=(0,u.x)(t,"webapp_version"),n=(0,u.x)(t,"webapp_version_non_loggedin"),a="v2"===o||"v2"===n||!o&&!n;(0,r.useEffect)((()=>{if(!a){const e=i?"webapp_server_reorg_login":"webapp_server_reorg_non_login";l.WB.event("ab_test_traffic_cross",{content:e})}}),[])}function A(e,t,i=[]){const n=(0,p.L)((()=>["$region","$user","$appId","$sgOpen","$wid","$domains"]),[]),{$region:a="",$user:s,$appId:_,$sgOpen:u,$wid:E="",$domains:g}=null!=n?n:{},h=(0,r.useCallback)((t=>{var i;const{seo_ab_version:n}=t,r=(0,o.__rest)(t,["seo_ab_version"]);if((0,c.St)(m.vN))r.is_landing_page=0;else{const{page_name:t}=e();r.is_landing_page=1,(0,c.D9)(m.vN,t)}return r.userAgent=navigator.userAgent,r.previous_page=function(e){var t;let i;try{i=JSON.parse(null!==(t=(0,c.St)(m.m8))&&void 0!==t?t:"null")||{}}catch(e){i={}}return location.href!==i.href||e!==i.pageName?((0,c.D9)(m.m8,JSON.stringify({href:location.href,pageName:e,twoPrev:i.pageName,twoPrevHref:i.href})),i.pageName):i.twoPrev}(r.page_name),r.region=a,r.page_url=null!==(i=r.page_url)&&void 0!==i?i:window.location.href,r}),[a,e]);(0,r.useEffect)((()=>{var t;const o=e();if(!o||!n)return;const{page_name:r,object_id:p,object_type:T}=o;let S=(0,c.St)(m.HW);S||(S=E+Date.now().toString(),(0,c.D9)("webapp_session_id",S));const O=h(o),A=i.reduce(((e,t)=>(e[t]=O[t],e)),{}),I={is_downgrade:(0,d.W)(),channel_domain:g.tea,id:m.CO,channel:1180===_||u?"sg":"va",region:a,session_id:S,object_id:p,object_type:T,user_id:null!==(t=null==s?void 0:s.uid)&&void 0!==t?t:"",user_is_login:Boolean(s),evtParams:Object.assign({page_name:r},A),"header.custom":{is_kids_mode:(null==s?void 0:s.ftcUser)?1:0,landing_page:(0,c.St)(m.vN)||r,user_is_login:s?1:0,region:a}};l.WB.config({conf:I,commonEventParams:O})}),[n,...t])}function I({seo_ab_version:e,eParams:t}){var i;const l=(0,n.fz)(g._e),{$botType:c,$isMobile:d}=null!==(i=(0,p.L)((()=>["$botType","$isMobile"]),[]))&&void 0!==i?i:{},{search:u,pathname:m}=(0,s.TH)(),E=(0,a.parse)(u);return(0,r.useCallback)((()=>{const i=t||{},{is_from_webapp:n}=i,a=(0,o.__rest)(i,["is_from_webapp"]),r=E.sender_web_id?{sender_device:E.sender_device,sender_web_id:E.sender_web_id}:{},s=d||(0,_.oC)(m)||(u=`#${location.pathname}`,/^#\/@.+\/video\/\d+$/.test(u))||location.search.indexOf("item_id")>-1?Object.assign({is_from_webapp:n||["v1","v2","v3"].indexOf(E.is_from_webapp)>-1?E.is_from_webapp:"0"},r):{};var u;const p=Object.assign(Object.assign({seo_ab_version:e,bot_type:null!=c?c:"others",keyword:E.keyword,sub_keyword:E.sub_keyword},a),s);l.handlePageView(p)}),[t,E.sender_web_id,E.sender_device,E.is_from_webapp,d,E.keyword,E.sub_keyword,m,e,c,l])}function v(e){const{pathname:t}=(0,s.TH)(),i=(0,n.fz)(h.KF);(0,r.useEffect)((()=>{const e=(0,E.BB)(t);i.updateCurrentPage(e),i.setCurrentPageReport(!1),i.resetExist(),i.reportVideoAdditionStart({startTime:Date.now(),situation:"addition_first_load"})}),[i,e,t])}function y(){const e=(0,n.fz)(T.e),t=(0,n.fz)(S.k);(0,r.useEffect)((()=>{e.reset(),t.resetState()}),[e,t])}},19014:(e,t,i)=>{"use strict";i.d(t,{RB:()=>c});var o,n,a,r=i(64047),s=i(57244),l=i(481);!function(e){e.EnterChatList="enter_chat_list",e.LeaveChatList="leave_chat_list",e.LeaveChat="leave_chat",e.DeleteChat="delete_chat",e.AcceptStrangerChat="accept_stranger_chat",e.ReportStrangerChat="report_stranger_chat",e.DeleteStrangerChat="delete_stranger_chat",e.ClickReport="click_report",e.EnterText="enter_text",e.SendMessage="send_message",e.FailSendMessage="fail_send_message",e.LikeMessage="like_message",e.DeleteMessage="delete_message",e.ReportMessage="report_message",e.ChatSettingClick="chat_setting_click",e.ChatMuteClick="chat_mute_click",e.ChatTopClick="chat_top_click",e.EnterStrangerChatList="enter_stranger_chat_list",e.Block="block",e.Unblock="unblock",e.ChangeMessagePermission="change_message_permission",e.ChangeBrandMessageStatus="change_brand_message_status",e.EnterChat="enter_chat",e.ShareHeadShow="share_head_show",e.ShareVideoToChat="share_video_to_chat",e.SearchContact="search_contact",e.ShareVideo="share_video"}(o||(o={})),function(e){e.Off="off",e.On="on"}(n||(n={})),function(e){e.Private="private",e.Business="business"}(a||(a={}));let c=class{handleEnterChatList(e){l.WB.event("enter_chat_list",{num:e})}handleLeaveChatList(){l.WB.event("leave_chat_list")}handleEnterStrangerChatList(){l.WB.event("enter_stranger_chat_list")}handleChatSettingClick(e){l.WB.event("chat_setting_click",{conversation_id:e,chat_type:"private"})}handleChatMuteClick({to_status:e,conversation_id:t}){l.WB.event("chat_mute_click",{to_status:e,conversation_id:t,chat_type:"private"})}handleChatTopClick({to_status:e,conversation_id:t}){l.WB.event("chat_top_click",{to_status:e,conversation_id:t,chat_type:"private"})}handleDeleteChat({is_stranger:e,conversation_id:t}){l.WB.event("delete_chat",{is_stranger:e?1:0,conversation_id:t,chat_type:"private"})}handleBlock({to_user_id:e,conversation_id:t,isBlock:i}){l.WB.event(i?"block":"unblock",{to_user_id:e,conversation_id:t,chat_type:"private"})}handleEnterChat({relation_tag:e,is_stranger:t,conversation_id:i,chat_type:o}){l.WB.event("enter_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i,chat_type:o})}handleLeaveChat({relation_tag:e,is_stranger:t,conversation_id:i}){l.WB.event("leave_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i})}handleAcceptStrangerChat(){l.WB.event("accept_stranger_chat")}handleClickReport(e){var{videoId:t,authorId:i,is_stranger:o}=e,n=(0,r.__rest)(e,["videoId","authorId","is_stranger"]);l.WB.event("click_report",Object.assign({group_id:t,author_id:i,is_stranger:o?1:0},n))}handleSendMessage({relation_tag:e,conversation_id:t,message_type:i,chat_type:o,to_user_id:n}){l.WB.event("send_message",{relation_tag:e,conversation_id:t,message_type:i,chat_type:o,to_user_id:n})}handleFailSendMessage({relation_tag:e,conversation_id:t,message_type:i,chat_type:o,error_code:n,to_user_id:a}){l.WB.event("fail_send_message",{relation_tag:e,conversation_id:t,message_type:i,chat_type:o,error_code:n,to_user_id:a})}handleDeleteMessage({conversation_id:e,to_user_id:t}){l.WB.event("delete_message",{conversation_id:e,to_user_id:t,chat_type:"private"})}handleReportMessage({conversation_id:e,to_user_id:t}){l.WB.event("report_message",{conversation_id:e,to_user_id:t,chat_type:"private"})}handleLikeMessage({conversation_id:e,to_user_id:t}){l.WB.event("like_message",{conversation_id:e,to_user_id:t,chat_type:"private"})}handleEnterText(){l.WB.event("enter_text")}handleChangeMessagePermission(e){l.WB.event("change_message_permission",{to_status:e})}handleChangeBrandMessageStatus(e){l.WB.event("change_brand_message_status",{to_status:e})}handleShareHeadShow({rank_index:e,is_self:t,to_user_id:i,user_type:o}){l.WB.event("share_head_show",{rank_index:e,is_self:t,to_user_id:i,user_type:o})}handleShareVideoToChat({platform:e,is_self:t,group_id:i,author_id:o,is_with_text:n,chat_cnt:a,to_user_id:r}){l.WB.event("share_video_to_chat",{platform:e,is_self:t,group_id:i,author_id:o,is_with_text:n,chat_cnt:a,to_user_id:r})}handleSearchContact(){l.WB.event("search_contact",{action_type:"share"})}handleShareVideo({platform:e,enter_method:t,is_self:i,group_id:o,author_id:n,to_user_id:a}){l.WB.event("share_video",{platform:e,enter_method:t,is_self:i,group_id:o,author_id:n,to_user_id:a})}};c=(0,r.__decorate)([(0,s.G)()],c)},59383:(e,t,i)=>{"use strict";i.d(t,{xq:()=>_});var o,n,a,r,s,l=i(64047),c=i(57244),d=i(481);!function(e){e.TrendingWordsShow="trending_words_show",e.TrendingWordsClick="trending_words_click",e.Search="search",e.SearchResultShow="search_result_show",e.SearchResultShowVideo="search_result_show_video",e.SearchResultClick="search_result_click",e.SearchSessionFinish="search_session_finish",e.EnterSearch="enter_search",e.EmptySearch="empty_search"}(o||(o={})),function(e){e.ClickEnter="click_enter",e.ClickIcon="click_icon",e.ClickViewAll="click_view_all",e.Solved="_solved"}(n||(n={})),function(e){e.EnrichSug="enrich_sug",e.NormalSug="normal_sug"}(a||(a={})),function(e){e.User="user",e.Video="video",e.General="general"}(r||(r={})),function(e){e.NormalSearch="normal_search",e.SearchOuter="search_outer",e.SwitchTab="switch_tab",e.ClickMoreGeneralList="click_more_general_list"}(s||(s={}));let _=class{constructor(){this.handleSugClick=e=>{d.WB.event("trending_words_click",e)},this.handleSugImpression=e=>{d.WB.event("trending_words_show",e)}}handleSearchEntry(){d.WB.event("enter_search")}handleSearchImpression(e){d.WB.event("search_result_show",Object.assign(Object.assign({},e),{token_type:"person"}))}handleSearchVideoImpression(e){d.WB.event("search_result_show_video",Object.assign({},e))}handleSearchResultEmpty(e){d.WB.event("empty_search",Object.assign({},e))}handleSearch(e){var{enter_method:t}=e,i=(0,l.__rest)(e,["enter_method"]);d.WB.event("search",Object.assign(Object.assign({},i),{enter_method:null!=t?t:"",is_success:1}))}handleSearchResultClick(e){d.WB.event("search_result_click",Object.assign({},e))}handleSearchSessionFinish(e){d.WB.event("search_session_finish",Object.assign({},e))}};_=(0,l.__decorate)([(0,c.G)()],_)},31966:(e,t,i)=>{"use strict";i.d(t,{KF:()=>s});var o,n=i(64047),a=i(57244),r=i(481);!function(e){e.PageFCP="page_content_paint",e.FirstScreen="first_screen_video",e.FirstFrame="first_frame_video",e.InteractAddition="interact_additional_video_end",e.InteractExisted="interact_existed_video_end",e.RouteChange="video_route_change",e.InteractAdditionStart="interact_additional_video_start",e.InteractExistedStart="interact_existed_video_start",e.SwiperSlideTransitionEnd="swiper_slide_transition_end"}(o||(o={}));let s=class{constructor(){this.additionQueue=[],this.existedQueue=[],this.firstLoadReport=!1,this.firstFrameReport=!1,this.currentPageReport=!1,this.currentPage="",this.reportedCanPlayVideoSource="",this.reportedPlayingVideoSource="",this.reportedScrollPrevIndex=-1,this.reportedScrollCurrIndex=-1,this.slideTransitionExsitedQueue=[],this.emit=(e,t)=>{try{r.WB.event(e,t)}catch(e){console.error(`Video Scene Evnet Tea Report Error: ${e}`)}},this.reportVideoPageFCP=e=>{this.emit("page_content_paint",e)},this.reportVideoFirstScreen=e=>{const{endTime:t,videoSource:i}=e;if(!this.firstLoadReport){if(this.firstLoadReport=!0,this.currentPageReport=!0,!this.checkIfCanReportFirstPlay())return;const e=performance.timeOrigin||performance.timing.navigationStart,o={duration:Math.round(t-e),to_page:this.currentPage};this.emit("first_screen_video",o),this.resetAddition(),this.setReportVideoSource(i,0)}},this.reportVideoFirstFrame=e=>{if(e&&!this.firstFrameReport){if(this.firstFrameReport=!0,!this.checkIfCanReportFirstFrame())return;const e=performance.timeOrigin||performance.timing.navigationStart,t={duration:Math.round(Date.now()-e),to_page:this.currentPage};this.emit("first_frame_video",t)}},this.reportVideoAddition=e=>{const t=this.additionQueue[0],{endTime:i,videoSource:o}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(o,0))return;const{startTime:n=0,situation:a="",from_page:r=""}=t,s=this.currentPage;if(!this.currentPageReport&&r!==s){this.currentPageReport=!0;const e={situation:a,from_page:r,to_page:s,duration:i-n};this.emit("interact_additional_video_end",e),this.resetAddition(),this.setReportVideoSource(o,0)}},this.reportVideoInteract=e=>{const t=this.existedQueue[0]||{},{startTime:i=0,situation:o="",from_page:n=""}=t,{endTime:a,videoSource:r}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(r,1)&&"open_browser_mode"!==o)return;const s={situation:o,from_page:n,to_page:this.currentPage,duration:a-i};this.emit("interact_existed_video_end",s),this.resetExist(),this.setReportVideoSource(r,1)},this.reportVideoAdditionStart=e=>{const{situation:t,startTime:i}=e;this.currentPageReport=!1,this.additionQueue=[{startTime:i,situation:t,from_page:this.currentPage}]},this.reportVideoInteractStart=e=>{var t;const i=this.existedQueue[0];if(!this.isEmptyEvent(i)){const{situation:o=""}=i;if((null!==(t=e.situation)&&void 0!==t?t:"").indexOf("one_column_scroll")>-1&&o.indexOf("browser_mode")>-1)return}const{startTime:o,situation:n,currVideoIndex:a,prevVideoIndex:r,enterMethod:s}=e;if(a&&a>0&&a===this.reportedScrollCurrIndex&&r===this.reportedScrollPrevIndex)return;const l=this.currentPage;this.existedQueue=[{startTime:o,situation:n,from_page:l}];const c={situation:n,from_page:this.currentPage,enter_method:s};this.emit("interact_existed_video_start",c),this.reportedScrollCurrIndex=null!=a?a:-1,this.reportedScrollPrevIndex=null!=r?r:-1},this.reportSlideTransitionStart=e=>{const{from_page:t,start_time:i,current_index:o}=e;this.slideTransitionExsitedQueue=[{from_page:t,start_time:i,current_index:o}]},this.reportSlideTransitionEnd=e=>{const t=this.slideTransitionExsitedQueue[0]||{},{from_page:i,start_time:o,current_index:n}=t,{from_page:a,end_time:r,current_index:s}=e;if(this.isEmptyEvent(t)||a!==i||s===n)return;const l={from_page:a,situation:s-n>0?"swiper_slide_next":"swiper_slide_prev",duration:r-o};this.emit("swiper_slide_transition_end",l),this.slideTransitionExsitedQueue=[]},this.updateCurrentPage=e=>{this.currentPage=e},this.setReportVideoSource=(e,t)=>{0===t?this.reportedCanPlayVideoSource=e:this.reportedPlayingVideoSource=e},this.setCurrentPageReport=e=>{this.currentPageReport=e},this.getCurrentPageReport=()=>this.currentPageReport,this.getFirstLoadReport=()=>this.firstLoadReport,this.getFirstFrameReport=()=>this.firstFrameReport,this.isEmptyEvent=e=>!e||0===Object.keys(e).length,this.checkIfCanReportFirstPlay=()=>l.indexOf(this.currentPage)>-1&&performance,this.checkIfCanReportFirstFrame=()=>c.indexOf(this.currentPage)>-1&&performance,this.checkIfHasReported=(e,t)=>(0===t?this.reportedCanPlayVideoSource:this.reportedPlayingVideoSource)===e,this.resetAddition=()=>this.additionQueue=[],this.resetExist=()=>this.existedQueue=[]}};s=(0,n.__decorate)([(0,a.G)()],s);const l=["homepage_hot","homepage_hot_h5","homepage_following","others_homepage","challenge","single_song","video_detail","video_detail_h5"],c=["homepage_hot","homepage_follow","others_homepage","challenge","video_detail","single_song"];var d;!function(e){e.BrowserModeNext="browser_mode_next",e.BrowserModePrev="browser_mode_prev",e.OneColumnScrollNext="one_column_scroll_next",e.OneColumnScrollPrev="one_column_scroll_prev",e.OpenBrowserMode="open_browser_mode",e.AdditionFirstLoad="addition_first_load",e.SwiperSlideNext="swiper_slide_next",e.SwiperSlidePrev="swiper_slide_prev",e.ThreeColumnUserHover="three_column_user_hover",e.ThreeColumnUserTouch="three_column_user_touch",e.VideoDatailSelect="video_detail_select"}(d||(d={}))},44465:(e,t,i)=>{"use strict";i.d(t,{W:()=>l});var o,n,a=i(64047),r=i(57244),s=i(481);!function(e){e.RemovePhotosensitiveStatus="tns_remove_photosensitive_status",e.ShowMaskLayer="tns_show_mask_layer",e.ShowPhotosensitiveRemoved="tns_show_photosensitive_removed",e.MaskLayerClickSkip="tns_mask_layer_click_skip",e.MaskLayerClickWatch="tns_mask_layer_click_watch"}(o||(o={})),function(e){e.General="general",e.Photosensitive="photosensitive"}(n||(n={}));let l=class{constructor(){this.handleRemovePhotosensitiveStatus=e=>{s.WB.event("tns_remove_photosensitive_status",{status:e})},this.handleShowMaskLayer=e=>{s.WB.event("tns_show_mask_layer",e)},this.handleShowPhotosensitiveRemoved=e=>{s.WB.event("tns_show_photosensitive_removed",e)},this.handleMaskLayerClickSkip=e=>{s.WB.event("tns_mask_layer_click_skip",e)},this.handleMaskLayerClickWatch=e=>{s.WB.event("tns_mask_layer_click_watch",e)}}};l=(0,a.__decorate)([(0,r.G)()],l)},88851:(e,t,i)=>{"use strict";i.d(t,{e:()=>l});var o,n=i(64047),a=i(57244),r=i(90293),s=i(481);!function(e){e.Play="video_play",e.Finish="video_play_finish",e.Stop="play_time",e.SchedulePlay="schedule_video_play",e.ScheduleFinish="schedule_video_play_finish",e.ScheduleStop="schedule_video_play_time",e.PreviewVideoPlay="preview_video_play",e.PreviewVideoFinish="preview_video_play_finish",e.PreviewVideoStop="preview_play_time",e.Pause="video_pause"}(o||(o={}));let l=class{constructor(){this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.isPause=!1,this.startPlayTimestamp=0,this.enterMethod="",this.prevReportId="",this.videoFocusTime=0,this.isThreeColumnAuto=!1,this.isVideoDetail=!1,this.setEnterMethod=e=>{this.enterMethod=e},this.setIsThreeColumnAuto=e=>{this.isThreeColumnAuto=e},this.setIsVideoDetail=e=>{this.isVideoDetail=e},this.reset=()=>{this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1},this.updateVideoFocusTime=e=>{const{isPause:t,startPlayTimestamp:i}=this,{ttWebappFocusTime:o}=window;!t&&o&&(this.videoFocusTime+=o>i?e-o:e-i)},this.handlePlayTime=e=>{this.playTimeEvent(e)},this.handleTimeUpdate=(e,t=!1)=>{const{isFirstPlayReported:i,startPlayTimestamp:o,enterMethod:n}=this,{itemId:a,authorId:r,isScheduled:l,autoplayStatus:c=0,currentTime:d,searchId:_="",searchKeyword:u,searchResultId:p,questionId:m,playMode:E,isMute:g=!1}=e;if(!d)return;let h=null;if(!i){const e=Object.assign({group_id:a,author_id:r,play_mode:this.getPlayModeForTea(E),autoplay_status:c,enter_method:n,search_id:_,search_keyword:u,search_result_id:p,question_id:m},this.getExtraParams()),i=l?"schedule_video_play":1===E?"preview_video_play":"video_play",o=t&&this.prevReportId===a;"video_play"===i&&(e.is_mute=g?"1":"0"),o||(h=i,s.WB.event(i,e),this.isFirstPlayReported=!0,this.prevReportId=a)}return 0===o&&this.setStartPlay(),this.isPause=!1,h},this.handleEnded=e=>{this.playFinishEvent(e)},this.handlePause=e=>{const{currentTime:t,duration:i}=e;i!==t&&this.playTimeEvent(e),this.isPause=!0},this.handleWaiting=e=>{const{currentTime:t,duration:i}=e;0!==t&&t!==i&&this.playTimeEvent(e)},this.handleError=e=>{this.playTimeEvent(e)},this.triggerPause=e=>{if(!this.isPause){const{enter_method:t,playMode:i}=e,o={enter_method:t,play_mode:this.getPlayModeForTea(i)};s.WB.event("video_pause",o)}this.isPause=!0}}getPlayModeForTea(e){let t="others";switch(e){case 2:t="browser_mode";break;case 0:t=this.isVideoDetail?"others":"one_column";break;case 1:t=this.isThreeColumnAuto?"list_auto":"list_mouse_trigger";break;case 3:t="large_video_mode";break;case 4:t="video_detail"}return t}setStartPlay(){this.startPlayTimestamp=Date.now(),this.videoFocusTime=0}playFinishEvent(e){const{isFirstPlayEndReported:t,enterMethod:i}=this,{itemId:o,authorId:n,isScheduled:a,autoplayStatus:r=0,searchId:l="",searchKeyword:c,searchResultId:d,playMode:_,isMute:u}=e;if(!t){const e=Object.assign({group_id:o,author_id:n,play_mode:this.getPlayModeForTea(_),autoplay_status:r,enter_method:i,search_id:l,search_keyword:c,search_result_id:d},this.getExtraParams());void 0!==u&&(e.is_mute=u?"1":"0");const t=a?"schedule_video_play_finish":1===_?"preview_video_play_finish":"video_play_finish";s.WB.event(t,e),this.isFirstPlayEndReported=!0}}playTimeEvent(e){const{startPlayTimestamp:t,enterMethod:i,videoFocusTime:o}=this,{itemId:n,authorId:a,isScheduled:r,autoplayStatus:l=0,searchId:c="",searchKeyword:d,searchResultId:_,questionId:u,playMode:p,isMute:m}=e,{ttWebappFocusTime:E,ttWebappBlurTime:g}=window;let h=0;const T=Date.now();if(E?h=E<t?T-t:o+T-E:g&&(h=g>t?o:0),0!==t){const e=Object.assign({group_id:n,author_id:a,play_mode:this.getPlayModeForTea(p),autoplay_status:l,duration:Math.max(T-t,0),enter_method:i,search_id:c,search_keyword:d,search_result_id:_,question_id:u,focus_time:h},this.getExtraParams());void 0!==m&&(e.is_mute=m?"1":"0");const o=r?"schedule_video_play_time":1===p?"preview_play_time":"play_time";s.WB.event(o,e),this.startPlayTimestamp=0}}getExtraParams(){var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,r.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}}};l=(0,n.__decorate)([(0,a.G)()],l)},955:(e,t,i)=>{"use strict";i.d(t,{k:()=>h});var o,n,a,r,s,l,c=i(64047),d=i(57244),_=i(90293),u=i(481);!function(e){e[e.HaveNothing=0]="HaveNothing",e[e.HaveMetaData=1]="HaveMetaData",e[e.HaveCurrentData=2]="HaveCurrentData",e[e.HaveFutureData=3]="HaveFutureData",e[e.HaveEnoughData=4]="HaveEnoughData"}(o||(o={})),function(e){e[e.PlayStop=0]="PlayStop",e[e.ResumePlaying=1]="ResumePlaying"}(n||(n={})),function(e){e[e.Public=0]="Public",e[e.Self=1]="Self",e[e.Friend=2]="Friend"}(a||(a={})),function(e){e.PlayQuality="video_play_quality",e.PlayEnded="video_play_end",e.PlayFailed="video_play_failed",e.BlockStart="video_block_start",e.Block="video_block",e.Request="video_request",e.RequestResponse="video_request_response",e.FirstFrame="first_feed_show_time"}(r||(r={})),function(e){e.FeedRequest="feed_request",e.FeedRequestResponse="feed_request_response"}(s||(s={})),function(e){e.LoadMore="load_more"}(l||(l={}));const p={isPause:null,isVideoLoaded:!1,isFirstPlayReported:!1,isFirstPlayEndReported:!1,isInPlaybackStage:!1,triggerPlayTimestamp:0,firstTriggerPlayTimestamp:0,loadStartTimestamp:0,blockStartTimestamp:0,blockStartProgress:0,playingStartTimestamp:0,pauseStartTimestamp:0,totalPauseDuration:0,volume:0},m={currentSrc:"",duration:0,error:null,currentTime:0,readyState:0,buffered:{start:()=>0,end:()=>0,length:0},volume:0},E={0:"one_column",1:"three_column",2:"browser_mode",3:"large_video_mode",4:"video_detail"},g=e=>{var t;return e?null!==(t=(0,_.parse)(e).lr)&&void 0!==t?t:"none":"unknown"};let h=class{constructor(){this.innerStates=Object.assign({},p),this.innerVideoAttributeStates=Object.assign({},m),this.isFirstFrameReported=!1,this.currentVideoId="",this.setCurrentVideoId=e=>{this.currentVideoId=e},this.resetState=()=>{this.innerStates=Object.assign({},p),this.currentVideoId="",this.isFirstFrameReported=!1,this.innerVideoAttributeStates=Object.assign({},m)},this.resetStateWhenSlideChange=()=>{this.innerStates=Object.assign({},p),this.innerVideoAttributeStates=Object.assign({},m)},this.reset=(e,t)=>{this.currentVideoId!==e&&(this.playEndEvent(t),this.blockEndEvent(Object.assign(Object.assign({},t),{endType:0})),this.innerStates=Object.assign({},p))},this.resetWhenSlideChange=e=>{this.playEndEvent(Object.assign(Object.assign({},e),this.innerVideoAttributeStates)),this.blockEndEvent(Object.assign(Object.assign(Object.assign({},e),{endType:0}),this.innerVideoAttributeStates)),this.innerVideoAttributeStates=Object.assign({},m)},this.handlePlay=()=>{this.innerStates.triggerPlayTimestamp=Date.now();const{firstTriggerPlayTimestamp:e}=this.innerStates;e||(this.innerStates.firstTriggerPlayTimestamp=Date.now())},this.handlePause=e=>{const{id:t}=e,{playingStartTimestamp:i,isPause:o}=this.innerStates;t&&i&&!o&&(this.innerStates.pauseStartTimestamp=Date.now()),this.innerStates.isPause=!0},this.handleTimeUpdate=e=>{var t;const{triggerPlayTimestamp:i,isFirstPlayReported:o,pauseStartTimestamp:n}=this.innerStates,{id:a,authorId:r,playMode:s,currentTime:l=0,duration:c=0,bitrate:d,format:_,encodedType:p,videoQuality:m,encodeUserTag:h,codecType:T,definition:S,forFriend:O=!1,secret:A=!1,preload_time:I=-1,preload_size:v=-1,video_type:y="mp4",player_type:C="defaultPlayer",volume:f=0,muted:N,buffered:R,currentSrc:L,error:b,readyState:P}=e;if(this.innerVideoAttributeStates.duration=c,this.innerVideoAttributeStates.currentTime=l,this.innerVideoAttributeStates.buffered=R,this.innerVideoAttributeStates.currentSrc=L,this.innerVideoAttributeStates.error=b,this.innerVideoAttributeStates.readyState=P,!(l<=0)){if(!o&&0!==i){const e=Date.now()-i-1e3*l,o={group_id:a,author_id:r,play_mode:null!==(t=E[s])&&void 0!==t?t:"others",duration:Math.round(e),video_duration:Math.round(1e3*c),video_bitrate:d,video_format:_,codec_format:T,encoded_type:p,bitrate_quality:m,video_quality:m&&S?`${m}_${S}`:"",video_encodeUserTag:h,is_bytevc1:(null!=T?T:"").indexOf("h265")>-1?1:0,logo_type:g(L),item_status:O?2:A?1:0,preload_time:I,preload_size:v,video_type:y,player_type:C,muted:N?1:0};u.WB.event("video_play_quality",o),this.innerStates.isFirstPlayReported=!0,this.innerStates.playingStartTimestamp=Date.now(),this.innerStates.volume=f}if(!this.isFirstFrameReported&&performance&&this.firstFrameEvent(),this.innerStates.isPause){const e=n?Date.now()-n:0;this.innerStates.totalPauseDuration+=e}this.blockEndEvent(Object.assign(Object.assign({},e),{endType:1})),this.innerStates.isInPlaybackStage=!0,this.innerStates.isPause=!1}},this.handleEnded=()=>{this.innerStates.isInPlaybackStage=!1},this.handleError=e=>{var t;const{isVideoLoaded:i,isInPlaybackStage:o}=this.innerStates,{id:n,authorId:a,playMode:r,error:s,currentSrc:l="",bitrate:c=-1,format:d="",encodedType:_="",videoQuality:p="",encodeUserTag:m="",codecType:h="",forFriend:T=!1,secret:S=!1}=e,{code:O=0,message:A=""}=null!=s?s:{};if(i&&o){const e={group_id:n,author_id:a,play_mode:null!==(t=E[r])&&void 0!==t?t:"others",error_code:String(O),error_info:A,play_url:l,video_bitrate:c,video_format:d,codec_format:h,encoded_type:_,bitrate_quality:p,video_encodeUserTag:m,is_bytevc1:h.indexOf("h265")>-1?1:0,logo_type:g(l),item_status:T?2:S?1:0};u.WB.event("video_play_failed",e)}else this.responseEvent(e)},this.handleWaiting=e=>{var t;const{id:i,authorId:o,playMode:n,currentTime:a=0,duration:r=0,currentSrc:s,forFriend:l=!1,secret:c=!1}=e,{isInPlaybackStage:d,blockStartTimestamp:_,isPause:p}=this.innerStates;if(0!==a&&a!==r&&d&&!1===p&&0===_){const e={group_id:i,author_id:o,play_mode:null!==(t=E[n])&&void 0!==t?t:"others",logo_type:g(s),item_status:l?2:c?1:0};u.WB.event("video_block_start",e),this.innerStates.blockStartTimestamp=Date.now(),this.innerStates.blockStartProgress=1e3*a}},this.handleLoadStart=e=>{var t;const{id:i,authorId:o,playMode:n}=e,a={group_id:i,author_id:o,play_mode:null!==(t=E[n])&&void 0!==t?t:"others"};u.WB.event("video_request",a),this.innerStates.loadStartTimestamp=Date.now()},this.handleLoadedData=e=>{this.responseEvent(e),this.innerStates.isVideoLoaded=!0},this.videoFeedRequestEvent=()=>{u.WB.event("feed_request",{request_method:"load_more"})},this.videoFeedResponseEvent=e=>{const{duration:t,list_length:i}=e,o={duration:t,is_success:i?"1":"0",request_method:"load_more",video_num:i};u.WB.event("feed_request_response",o)},this.firstFrameEvent=()=>{const e=performance.timeOrigin,t={feed_total:e?Math.round(Date.now()-e):-1};u.WB.event("first_feed_show_time",t),this.isFirstFrameReported=!0}}getCacheSize(e){return void 0!==e&&e.length>0?1e3*(e.end(0)-e.start(0)):0}blockEndEvent(e){var t;const{id:i,authorId:o,playMode:n,currentTime:a=0,bitrate:r,format:s,encodedType:l,videoQuality:c,encodeUserTag:d,codecType:_,endType:p,definition:m,currentSrc:h,forFriend:T=!1,secret:S=!1,video_type:O="mp4",should_filter:A=!1,player_type:I="defaultPlayer"}=e,{blockStartTimestamp:v,blockStartProgress:y,isInPlaybackStage:C,isVideoLoaded:f}=this.innerStates;if(f&&C&&0!==v&&(1e3*a!==y||0===p)){const e=Date.now()-v-(1e3*a-y),C={group_id:i,author_id:o,play_mode:null!==(t=E[n])&&void 0!==t?t:"others",duration:Math.round(e),video_bitrate:r,video_format:s,codec_format:_,encoded_type:l,bitrate_quality:c,video_quality:c&&m?`${c}_${m}`:"",video_encodeUserTag:d,is_bytevc1:(null!=_?_:"").indexOf("h265")>-1?1:0,end_type:p,position:Math.round(1e3*a),logo_type:g(h),item_status:T?2:S?1:0,video_type:O,player_type:I,should_filter:A?"1":"0"};u.WB.event("video_block",C),this.innerStates.blockStartTimestamp=0}}responseEvent(e){var t;const{loadStartTimestamp:i}=this.innerStates,{id:o,authorId:n,playMode:a,error:r,videoQuality:s,definition:l,currentSrc:c,forFriend:d=!1,secret:_=!1}=e,p=Date.now()-i,m={group_id:o,author_id:n,play_mode:null!==(t=E[a])&&void 0!==t?t:"others",error_code:String(null==r?void 0:r.code),duration:p,is_success:r?"0":"1",video_quality:s&&l?`${s}_${l}`:"",logo_type:g(c),item_status:d?2:_?1:0};u.WB.event("video_request_response",m)}playEndEvent(e){var t;const{isFirstPlayReported:i,isFirstPlayEndReported:o,playingStartTimestamp:n,totalPauseDuration:a,firstTriggerPlayTimestamp:r,volume:s}=this.innerStates;if(!o){const{id:o,authorId:l,playMode:c,buffered:d,duration:_=0,currentTime:p=0,readyState:m,bitrate:h,videoQuality:T,definition:S,currentSrc:O,forFriend:A=!1,secret:I=!1,preload_time:v=-1,preload_size:y=-1,volume:C=0,muted:f}=e,N=n?Date.now()-n-a:0,R={group_id:o,author_id:l,play_mode:null!==(t=E[c])&&void 0!==t?t:"others",is_success:i?"1":"0",video_duration:isNaN(_)?0:Math.round(1e3*_),play_duration:Math.round(1e3*p),buffering:(null!=m?m:0)<=2?1:0,duration:N>=0?Math.round(N):0,wait_duration:n>0?null:Date.now()-r,cur_cache_duration:Math.round(this.getCacheSize(d)),video_bitrate:null!=h?h:-1,video_quality:T&&S?`${T}_${S}`:"",local_time_ms:Date.now(),logo_type:g(O),item_status:A?2:I?1:0,preload_time:v,preload_size:y,volume_level:Number(C.toFixed(4)),volume_change:i?Number((C-s).toFixed(4)):0,muted:f?1:0};u.WB.event("video_play_end",R),this.innerStates.isFirstPlayEndReported=!0}}};h=(0,c.__decorate)([(0,d.G)()],h)},52432:(e,t,i)=>{"use strict";i.d(t,{B:()=>c});var o,n=i(64047),a=i(57244),r=i(481);!function(e){e.LoadMore="load_more",e.SlideUp="video_slide_up",e.SlideDown="video_slide_down",e.EnterBrowserMode="feed_enter",e.HotSlideUp="homepage_hot_slide_up",e.HotSlideDown="homepage_hot_slide_down",e.Like="like",e.LikeCancel="like_cancel",e.ClickComment="click_comment_button",e.ClickPrivacySettingVideo="click_privacy_setting_video",e.SelectPrivacySettingVideo="select_privacy_setting_video",e.PrivacySettingAllowInteraction="privacy_setting_allow_interaction",e.ClickDeleteVideo="click_delete_video",e.ActionOnDeleteVideo="action_on_delete_video",e.ScheduleDeleteClick="click_delete_scheduled_video",e.ScheduleDeleteAction="action_on_delete_scheduled_video",e.Follow="follow",e.Unfollow="unfollow",e.DropdownCardShow="dropdown_card_show",e.SwitchSound="switch_sound",e.SwitchAutoplay="switch_autoplay",e.ShowProgressBar="show_progress_bar",e.ClickProgressBar="click_progress_bar",e.AutoShowProgressBar="show_progress_bar"}(o||(o={}));const s={0:"one-column",1:"three-column",2:"browser-mode",3:"swiper-mode",4:"video-detail"};var l;!function(e){e.FollowButton="follow_button",e.Card="card"}(l||(l={}));let c=class{handleListMore(e){r.WB.event("load_more",e)}handleVideoChange(e){var{direction:t}=e,i=(0,n.__rest)(e,["direction"]);const o="next"===t?"video_slide_up":"video_slide_down";r.WB.event(o,i)}handleHotVideoChange(e){var{direction:t}=e,i=(0,n.__rest)(e,["direction"]);const o="next"===t?"homepage_hot_slide_up":"homepage_hot_slide_down";r.WB.event(o,i)}handleEnterBrowser(e){var t;r.WB.event("feed_enter",Object.assign(Object.assign({},e),{from_mode:null!==(t=e.from_mode)&&void 0!==t?t:0}))}handleSeekBarShow(e){r.WB.event("show_progress_bar",Object.assign({show_method:"preview"},e))}handleSeekBarClick(e){var{fromPercent:t,toPercent:i,video_length:o}=e,a=(0,n.__rest)(e,["fromPercent","toPercent","video_length"]);const s=i>t?"front":"back",l=o*t,c=o*i;r.WB.event("click_progress_bar",Object.assign({action_type:s,seek_from:l,seek_to:c,video_length:o},a))}handleSeekBarAutoShow(e){r.WB.event("show_progress_bar",Object.assign({show_method:"preview"},e))}handleLikeVideoResult(e){var{actionType:t}=e,i=(0,n.__rest)(e,["actionType"]);const o=1===t?"like":"like_cancel";r.WB.event(o,i)}handleCommentShow(e,t){r.WB.event("click_comment_button",{author_id:e,group_id:t})}handleSelectPrivacySettingVideo(e){r.WB.event("select_privacy_setting_video",e)}handlePrivateSetting(e){r.WB.event("privacy_setting_allow_interaction",e)}handleClickDeleteVideo(e){r.WB.event("click_delete_video",e)}handleVideoDelete(e){r.WB.event("action_on_delete_video",{action:e})}handleScheduleConfirm(e){r.WB.event("click_delete_scheduled_video",{group_id:e})}handleScheduleDelete(e){r.WB.event("action_on_delete_scheduled_video",{action:e})}handleDropdownCardShow(){r.WB.event("dropdown_card_show")}handleFollowUser(e){var{actionType:t}=e,i=(0,n.__rest)(e,["actionType"]);const o=0===t?"unfollow":"follow";r.WB.event(o,i)}handleSwitchSound(e){const{muted:t,playMode:i,enter_method:o="click",volume_from:n,volume_to:a}=e;void 0!==n&&void 0!==a?r.WB.event("switch_sound",{sound_mode:a>n?"adjust_up":"adjust_down",play_mode:s[i],enter_method:o,volume_from:n,volume_to:a}):r.WB.event("switch_sound",{sound_mode:t?"off":"on",play_mode:s[i],enter_method:o})}};c=(0,n.__decorate)([(0,a.G)()],c)},23028:(e,t,i)=>{"use strict";i.d(t,{x:()=>a,T:()=>r});var o=i(481);const n=[];function a(e,t){try{return e.parameters[t].vid}catch(e){return void(-1===n.indexOf(t)&&(o.WB.event("abtest_vid_failed",{experiment_name:t}),n.push(t)))}}function r(e,t){try{if((null==e?void 0:e.parameters.webapp_version)||(null==e?void 0:e.parameters.webapp_version_non_loggedin))return;return e.parameters[t].vid}catch(e){return void(-1===n.indexOf(t)&&(o.WB.event("abtest_vid_failed",{experiment_name:t}),n.push(t)))}}},2734:(e,t,i)=>{"use strict";function o(e,t=1){return Math.round(Number(`${e}e${t}`))/Math.pow(10,t)}i.d(t,{BT:()=>n,a1:()=>a,ZT:()=>s,yk:()=>c,u0:()=>d,Nn:()=>_,Bm:()=>u,sA:()=>p,m7:()=>E,G:()=>g,y7:()=>h,vp:()=>T});function n(e=0){let t;return t=e<1e4?e.toString():e<999999?`${o(e/1e3)}K`:e<999999999?`${o(e/1e6)}M`:`${o(e/1e9)}B`,t}function a(e,t=99,i="99+"){return e>t?i:String(e)}function r(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.url_list)||void 0===t?void 0:t.find((e=>!/\.webp/.test(e))))&&void 0!==i?i:""}function s(e){var t;return void 0===e?"":e.url_list&&(null===(t=e.url_list)||void 0===t?void 0:t.length)>0?e.url_list[0]:""}function l({is_block:e,is_blocked:t,follow_status:i}){if(null!=i)return e?4:t?5:u[i]}function c(e,t){const{avatar_larger:i,avatar_medium:o,avatar_thumb:n,uid:a,short_id:s,unique_id:c,sec_uid:d,room_id:_,nickname:u,is_block:p,is_blocked:m,follow_status:E,signature:g,show_favorite_list:h,custom_verify:T,enterprise_verify_reason:S,comment_setting:O,duet_setting:A,is_ad_fake:I,is_private_account:v,secret:y,show_secret_banner:C,stitch_setting:f,follower_status:N}=e;return{avatarLarger:r(i),avatarMedium:r(o),avatarThumb:r(n),id:a,shortId:s,uniqueId:null!=c?c:"",secUid:null!=d?d:"",roomId:String(null!=_?_:""),nickname:u,relation:l({is_block:p,is_blocked:m,follow_status:E}),signature:g,openFavorite:h,verified:Boolean(T||S),commentSetting:O,duetSetting:A,stitchSetting:f,isADVirtual:I,privateAccount:Boolean(v),secret:Boolean(y),createTime:0,showPrivateBanner:Boolean(C),extraInfo:Object.assign({followerStatus:N},t)}}function d(e,t=!1){const{follower_count:i,following_count:o,aweme_count:n}=e;return{diggCount:0,followerCount:null!=i?i:0,followingCount:null!=o?o:0,heart:0,heartCount:0,videoCount:null!=n?n:0,needFix:t}}function _(e){const{id_str:t,title:i,play_url:o,cover_medium:n,cover_large:a,cover_thumb:r,is_original:l,duration:c,author:d}=e;return{id:String(t),title:i,duration:c,keyToken:"",playUrl:s(o),coverMedium:s(n),coverLarge:s(a),coverThumb:s(r),original:null!=l&&l,authorName:d}}const u={[-1]:-1,0:0,1:1,2:2,4:3};function p(e,t){if(!e)return!0;const{commentSetting:i,relation:o,id:n}=e;return 1===i&&2!==o&&t!==n}const m=Object.freeze({});function E(e){return null!=e?e:m}function g(e){return Number(null!=e?e:0)}function h(e,t,i){if((null==e?void 0:e.vv)&&Number(null==e?void 0:e.vv)>0)return Number(e.vv);let o=0;return t&&t.forEach((e=>{var t,i;o+=null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.playCount)&&void 0!==i?i:0})),i&&i.forEach((e=>{var t,i;o+=Number(null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.viewCount)&&void 0!==i?i:0)})),o}function T(e){return e.replace(/\n(\n)*( )*(\n)*\n/g,"\n")}},97913:(e,t,i)=>{"use strict";i.d(t,{Re:()=>l,Ld:()=>_});var o=i(64047),n=i(57244);const a=8*Math.pow(10,5),r="keyvaluepairs",s={byteLength:-1,duration:-1,type:-1,vid:"unknown"};let l=class{constructor(){this.preloadQueue=[],this.preloadStartIndex=-1,this.currentPage="",this.preloadUrlsPool=new Set,this.setPreloadQueue=e=>{e.length&&(this.preloadQueue=null!=e?e:[],e.forEach((({id:e})=>{e&&this.preloadUrlsPool.add(e)})))},this.setPreloadIndex=e=>{e>=0&&(this.preloadStartIndex=e)},this.getPreloadUrls=()=>{const{preloadStartIndex:e}=this;return this.preloadQueue.slice(e+1,e+4)},this.getPreloadedPool=()=>this.preloadUrlsPool,this.reset=()=>{this.preloadQueue=[],this.preloadStartIndex=-1,this.preloadUrlsPool.clear()},this.setCurrentPage=e=>{this.currentPage=e||"unknown"},this.clearAllVideoCaches=()=>{this.currentPage&&(this.preloadUrlsPool.clear(),this.clearIndexDBCache())},this.clearSingleVideoCache=e=>{this.clearIndexDBCache(!1,[e],(()=>{this.preloadUrlsPool.delete(e)}))},this.clearIndexDBCache=(e=!0,t=[],i=(()=>{}))=>{const o=this;if(!window.indexedDB)return void console.warn("Browser doesn't support a stable version of IndexedDB, preload feature may not be available. ");const n=window.indexedDB.open("__PRE_CACHE__");n.onsuccess=function(){const s=n.result;try{const n=s.transaction([r],"readwrite"),l=n.objectStore(r);e?l.clear().onsuccess=function(){i.call(o)}:t.forEach((e=>{l.delete(((e,t="video",i=0)=>`TT-vCache-${e}#${t}#${i}#${a-1}`)(e)).onsuccess=function(){i.call(o,e)}})),n.onerror=function(){console.error("[IndexDB]: transaction error: ",n.error)}}catch(e){return}},n.onerror=function(e){console.error("[IndexDB]: Open database error, maybe no authorization. For more: ",n.error,e.target.errorCode)}}}};l=(0,o.__decorate)([(0,n.G)()],l);class c{constructor(){this.preloadVideoId="",this.preloadVideoCache=s,this.setPreloadCacheInfo=(e,t)=>{e&&t&&e!==this.preloadVideoId&&(this.preloadVideoId=e,this.preloadVideoCache=t)},this.getPreloadCacheInfo=e=>e&&this.preloadVideoId&&e===this.preloadVideoId?this.preloadVideoCache:s}}let d=null;const _=},91506:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var o=i(90293);const n=({src:e,sgOpen:t})=>{const i=/^https?:\/\/[a-zA-Z0-9-]+-sg/.test(e)||t?"t.tiktok.com":"m.tiktok.com";return(0,o.stringifyUrl)({url:`https://${i}/node-a/video/playsv`,query:{play_url:e}})}},13033:(e,t,i)=>{"use strict";i.d(t,{iv:()=>l,F3:()=>c,To:()=>d,Bv:()=>u,u8:()=>p,$I:()=>m});var o=i(13964);const n=()=>'""',a=()=>{},r=()=>{};class s{constructor(e,t){this.key=e,this.type=t,this.storageObject=null,this.getter=n,this.setter=a,this.remove=r,this.getter="local"===t?o.le:o.St,this.setter="local"===t?o.D$:o.D9,this.remove="local"===t?o.e8:o.lD}get storage(){return this.storageObject||(this.storageObject=this.tryParseJson(this.getter(this.key,"{}"))),this.storageObject}setItem(e,t){this.storage[e]=t,this.setter(this.key,JSON.stringify(this.storage))}getItem(e){return this.storage[e]}removeItem(e){this.storage[e]=void 0,this.setter(this.key,JSON.stringify(this.storage))}removeAll(){this.storageObject=null,this.remove(this.key)}tryParseJson(e){try{return JSON.parse(e)}catch(e){return{}}}}const l=new s("frequency-control-config","local"),c=new s("webapp-common-config","local"),d=new s("webapp-common-config","session");var _;!function(e){e.Manual="manual",e.BrowserMode="browser_mode"}(_||(_={}));const u=new s("webapp-video-mute","local"),p=new s("keyboard-shortcut-config","local"),m=new s("webapp-comment-url","session")},51302:(e,t,i)=>{"use strict";i.d(t,{BB:()=>s,AY:()=>l});var o=i(21041),n=i(29046),a=i(1e3),r=i(50218);function s(e){return(0,r.oC)(e)?"homepage_hot":/^\/@(.*?)\/video\/(.*?)/.test(e)?"video_detail":/^\/@(.*?)\/live\/(.*?)/.test(e)?"live_detail":/^\/@(.*?)/.test(e)?"others_homepage":/^\/music\//.test(e)?"single_song":/^\/tag\//.test(e)?"challenge":/^\/following/.test(e)?"homepage_follow":/^\/discover\/.+/.test(e)?"discover_kw":/^\/discover/.test(e)?"discovery":/^\/profile/.test(e)?"personal_homepage":/^\/topics/.test(e)?`topic_${e.slice(1).split("/")[1]}`:/^\/inbox/.test(e)?"homepage_message":/^\/report/.test(e)?"report":(0,o.LX)(e,{path:n.Ad.searchHome,exact:!0})?"general_search":(0,o.LX)(e,{path:n.Ad.searchUser,exact:!0})?"search_user":(0,o.LX)(e,{path:n.Ad.searchVideo,exact:!0})?"search_video":(0,o.LX)(e,{path:a.$J.liveGoLive,exact:!0})?"live_take":(0,o.LX)(e,{path:[a.$J.liveReferralHost,a.$J.liveReferralHostFaq],exact:!0})?"live_referral_host":(0,o.LX)(e,{path:a.$J.liveDiscover,exact:!0})?"live_discover":(0,o.LX)(e,{path:a.$J.liveRoomEmbed,exact:!0})?"live_embed_detail":(0,o.LX)(e,{path:a.$J.liveRoom,exact:!0})?"live_detail":(0,o.LX)(e,{path:a.$J.rechargePayment,exact:!0})||(0,o.LX)(e,{path:a.$J.coinPayment,exact:!0})?"live_recharge_cashier":(0,o.LX)(e,{path:n.gY.loginHome,exact:!1})||(0,o.LX)(e,{path:n.gY.oauth,exact:!1})||(0,o.LX)(e,{path:n.gY.oauthLine,exact:!1})?"login":(0,o.LX)(e,{path:n.gY.signupHome,exact:!1})?"signup":(0,o.LX)(e,{path:[a.$J.recharge,a.$J.rechargePaymentCode,a.$J.rechargePaymentResult,a.$J.rechargeTransactions,a.$J.rechargeUnavailable,a.$J.rechargeTerms,a.$J.rechargeTransactionsDetail,a.$J.rechargeCardManagement,a.$J.coin,a.$J.coinPaymentCode,a.$J.coinPaymentResult,a.$J.coinTransactions,a.$J.coinUnavailable,a.$J.coinTerms,a.$J.coinTransactionsDetail,a.$J.coinCardManagement],exact:!0})?"live_recharge":"unknown"}function l(){return location.pathname.startsWith(n.Ad.musicPlaylist.split(":")[0])?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}${location.search}`:location.href}},75546:(e,t,i)=>{"use strict";i.d(t,{k:()=>T});var o,n=i(64047),a=i(11040),r=i(8721),s=i(30641),l=i(95918),c=i(27918),d=i(13761);!function(e){e[e.UserFeed=0]="UserFeed",e[e.Feed=1]="Feed",e[e.Browser=2]="Browser",e[e.List=3]="List",e[e.UserPage=4]="UserPage",e[e.Search=5]="Search",e[e.RecommendList=6]="RecommendList"}(o||(o={}));const _=(0,s.F4)({"0%":{transform:"scale(.95)"},"50%":{transform:"scale(.9)"},"100%":{transform:"scale(.95)"}}),u=(0,s.F4)({"0%":{transform:"scale(1)"},"40%":{transform:"scale(1.15)"},"45%":{transform:"scale(1.16)"},"95%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),p=(0,l.Z)("svg",{target:"e1vl87hj0"})({position:"absolute"},"label:SvgRoundCircle;"),m=(0,l.Z)("div",{target:"e1vl87hj1"})({position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},(({isAnimating:e})=>e?{":after":{content:'""',position:"absolute",left:1,top:1,right:1,bottom:1,borderRadius:"50%",border:"1px solid rgba(255, 119, 146, .5)",animation:`${u} 1800ms ease-out infinite`,boxShadow:"0 -0.5px 0.5px 0.5px rgba(255,119,146,.5)"}}:null),"label:DivContainer;"),E=(0,l.Z)(d.q,{target:"e1vl87hj2"})((({enable:e,theme:{colors:t},isAnimating:i})=>[{borderColor:t.LineSecondary,borderWidth:"0.5px",cursor:e?"pointer":"unset"},i?{animation:`${_} 1800ms ease-out infinite`,animationDelay:".9s"}:null]),"label:StyledAvatar;"),g=(0,l.Z)("span",{target:"e1vl87hj3"})((({theme:e})=>(0,c.GI)({theme:e,typography:"P4",fontWeight:"bold",color:"ConstTextInverse"})),{position:"absolute",background:"linear-gradient(131.17deg, #FF1764 0%, #ED3495 94.15%)",height:"15px",lineHeight:"15px",padding:"0 4px",bottom:"-2px",left:"50%",transform:"translateX(-50%)",wordBreak:"keep-all",borderRadius:"2px",zIndex:1},"label:SpanLiveBadge;"),h=function({size:e=48}){return(0,a.jsxs)(p,Object.assign({width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,a.jsx)("circle",{cx:e/2,cy:e/2,r:e/2-.75,stroke:"url(#paint0_linear)",strokeWidth:"1.5"},void 0),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",Object.assign({id:"paint0_linear",x1:-20.9902*e/48,y1:24*e/48,x2:27.0098*e/48,y2:65.9805*e/48,gradientUnits:"userSpaceOnUse"},{children:[(0,a.jsx)("stop",{stopColor:"#FF1764"},void 0),(0,a.jsx)("stop",{offset:"1",stopColor:"#ED3495"},void 0)]}),void 0)},void 0)]}),void 0)},T=function(e){var{className:t,needAnimation:i=!1,isShowLive:o=!0,size:s=32,isShowLiveTag:l=!0,e2eTag:c}=e,d=(0,n.__rest)(e,["className","needAnimation","isShowLive","size","isShowLiveTag","e2eTag"]);const _=(0,r.Q)(),u=o&&i,p=o?s-6:s,T=u?s-4:s;return(0,a.jsxs)(m,Object.assign({isAnimating:u,className:t,"data-e2e":c,style:{width:s,height:s}},{children:[o&&(0,a.jsx)(h,{size:T},void 0),(0,a.jsx)(E,Object.assign({isAnimating:u,enable:!0,size:p},d),void 0),o&&l&&(0,a.jsx)(g,{children:_("LIVE")},void 0)]}),void 0)}},43039:(e,t,i)=>{"use strict";i.d(t,{T:()=>u});var o=i(11040),n=i(95918),a=i(80537);const r=(0,n.Z)("div",{target:"emuynwa0"})((({isFullScreen:e})=>e?{flex:"1 1 auto"}:null),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",margin:"0 auto"},"label:DivErrorContainer;"),s={1:"rgba(22, 24, 35, 1.0)",0:"rgba(255, 255, 255, 0.9)"},l=(0,n.Z)("p",{target:"emuynwa1"})((({brightness:e=1,theme:{typography:t,fontWeights:i,fontFamilies:o}})=>[t.H4,{fontFamily:o.Sofia,fontWeight:i.bold,color:s[e],marginTop:"24px"}]),"label:PTitle;"),c={1:"rgba(22, 24, 35, 0.75)",0:"rgba(255, 255, 255, 0.5)"},d=(0,n.Z)("p",{target:"emuynwa2"})((({brightness:e=1,theme:{typography:t,fontWeights:i,fontFamilies:o}})=>[t.P2,{fontFamily:o.Proxima,fontWeight:i.normal,color:c[e],marginTop:"8px"}]),"label:PDesc;"),_=(0,n.Z)(a.W,{target:"emuynwa3"})({marginTop:"62px"},"label:StyledButton;"),u=function(e){const{iconElem:t,title:i,desc:n,buttonText:a,isFullScreen:s,brightness:c=1,e2eTitle:u,e2eDesc:p}=e;return(0,o.jsxs)(r,Object.assign({isFullScreen:s},{children:[t,i&&(0,o.jsx)(l,Object.assign({"data-e2e":u,brightness:c},{children:i}),void 0),n&&(0,o.jsx)(d,Object.assign({"data-e2e":p,brightness:c},{children:n}),void 0),Boolean(a)&&(0,o.jsx)(_,Object.assign({type:"button",onClick:e.onButtonClick,buttonTheme:"default",size:"large"},{children:a}),void 0)]}),void 0)}},93328:(e,t,i)=>{"use strict";i.d(t,{m:()=>a});var o=i(23028),n=i(34708);const a=()=>{var e,t;const{$abTestVersion:i}=null!==(e=(0,n.L)((()=>["$abTestVersion"]),[]))&&void 0!==e?e:{},a=null!==(t=(0,o.x)(i,"enhance_video_consumption_test"))&&void 0!==t?t:"v1";return{isEnhanceVideoConsumptionV1:"v1"===a,enhanceVideoConsumptionVersion:a}}},66739:(e,t,i)=>{"use strict";i.d(t,{e:()=>N});var o=i(11040),n=i(65949),a=i(31941),r=i(37834),s=i(25674),l=i(56277),c=i(25615),d=i.n(c),_=i(91051),u=i(8721),p=i(34708),m=i(50218),E=i(13033),g=i(93328),h=i(95918),T=i(27918);const S=(0,h.Z)("div",{target:"e1l04njg0"})((({isModal:e=!1,theme:t})=>[{marginBottom:e?"0":"12px",minWidth:e?"400px":"300px",minHeight:e?"280px":"258px",padding:e?"40px 32px 32px":"44px 24px 16px",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",backgroundColor:t.colors.BGPrimary,borderRadius:"8px",border:`1px solid ${t.colors.LineSecondary3}`,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.06)"}]),"label:DivKeyboardShortcutContainer;"),O=(0,h.Z)("div",{target:"e1l04njg1"})((({isModal:e=!1,theme:t})=>[(0,T.GI)({theme:t,typography:e?"P0":"P1",fontWeight:"bold",fontFamily:"Proxima"}),{width:"100%",height:"22px",lineHeight:"22px",textAlign:"center",color:t.colors.TextPrimary,whiteSpace:"nowrap"}]),"label:DivKeyboardShortcutTitle;"),A=(0,h.Z)("div",{target:"e1l04njg2"})((({theme:e})=>[{marginTop:"16px",width:"100%",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContent;"),I=(0,h.Z)("div",{target:"e1l04njg3"})((({theme:e})=>[(0,T.GI)({theme:e,typography:"P3",fontWeight:"normal",fontFamily:"Proxima"}),{width:"100%",height:"40px",textAlign:"left",color:e.colors.ConstBGInverse,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContentItem;"),v=(0,h.Z)("div",{target:"e1l04njg4"})((({theme:{direction:e}})=>(0,T.YJ)({direction:e,end:"16px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),y=(0,h.Z)(v,{target:"e1l04njg5"})((({theme:{colors:e}})=>({width:"24px",height:"24px",borderRadius:"100px",backgroundColor:e.BGView})),"label:StyledModalXMarkWrapper;"),C=24,f=[{content:"desktop_kb_shortcuts_tooltip_previous",icon:(0,o.jsx)(n.Z,{width:C,height:C},void 0)},{content:"desktop_kb_shortcuts_tooltip_next",icon:(0,o.jsx)(a.Z,{width:C,height:C},void 0)},{content:"desktop_kb_shortcuts_tooltip_like_vid",icon:(0,o.jsx)(r.Z,{width:C,height:C},void 0)},{content:"desktop_kb_shortcuts_tooltip_mute_unmute_vid",icon:(0,o.jsx)(s.Z,{width:C,height:C},void 0)}],N=(0,_.memo)((function({isModal:e=!1,onClose:t=d()}){const i=(0,u.Q)(),n=(0,p.L)((()=>["$abTestVersion","$wid"]),[]),{showKeyboardShortcut:a,handleClose:r}=((e=!1,t,i)=>{const o=E.u8.getItem("webid"),[n,a]=(0,_.useState)(!0),{enhanceVideoConsumptionVersion:r}=(0,g.m)(),[s,l]=(0,_.useState)(e),c=(0,_.useCallback)((()=>{e?t():(E.u8.setItem("hasCloseKeyboardShortcut",!0),a(!1))}),[e,t]);return(0,_.useEffect)((()=>{var t;if(!e)if("v3"!==r)l(!1);else if((null==i?void 0:i.$wid)!==o)l(!0),E.u8.setItem("webid",null!==(t=null==i?void 0:i.$wid)&&void 0!==t?t:""),E.u8.setItem("hasCloseKeyboardShortcut",!1);else{const e=E.u8.getItem("hasCloseKeyboardShortcut");l(!e)}}),[]),(0,_.useEffect)((()=>{const{pathname:t=""}=location;e||(0,m.oC)(t)||t.startsWith("/following")||/^\/@.+\/video\/\d+/.test(t)||l(!1)}),[]),{showKeyboardShortcut:n&&s,handleClose:c}})(e,t,n),s=i(e?"desktop_kb_shortcuts_modal":"desktop_kb_shortcuts_tooltip_title");return a?(0,o.jsxs)(S,Object.assign({isModal:e},{children:[e?(0,o.jsx)(y,Object.assign({onClick:r},{children:(0,o.jsx)(l.Z,{width:20,height:20},void 0)}),void 0):(0,o.jsx)(v,Object.assign({onClick:r},{children:(0,o.jsx)(l.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(O,Object.assign({isModal:e},{children:s}),void 0),(0,o.jsx)(A,{children:f.map((({content:t,icon:n})=>(0,o.jsxs)(I,Object.assign({isModal:e},{children:[i(t),n]}),t)))},void 0)]}),void 0):null}));N.defaultProps=Object.assign(Object.assign({},N.defaultProps),{"data-e2e":"keyboard-shortcut"})},63092:(e,t,i)=>{"use strict";i.d(t,{G:()=>u});var o=i(64047),n=i(11040),a=i(16926),r=i(89974),s=i.n(r),l=i(91051),c=i(66958),d=i(23588),_=i(77107);const u=function(e){var{uniqueId:t,secUid:i,extraQuery:r={},children:u,replace:p=!1,isInBrowserMode:m=!1,teaParams:E,stopPropagation:g=!0,onClick:h,onLinkClick:T}=e,S=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","stopPropagation","onClick","onLinkClick"]);const O=(0,l.useMemo)((()=>({pathname:(0,c.P4)({uniqueId:t,secUid:i}),search:r})),[r,i,t]),A=(0,a.fz)(d.yB),I=(0,l.useCallback)((e=>{g&&e.stopPropagation(),A.handleLiveEntranceClick(s()(E,["anchor_id","follow_status","room_id","enter_from_merge","action_type","enter_method"])),null==h||h(e),null==T||T(e,O.pathname)}),[g,A,E,h,T,O.pathname]);return(0,n.jsx)(_.v,Object.assign({forceSSR:!0,to:O},S,{replace:p||m,onClick:I},{children:u}),void 0)}},11838:(e,t,i)=>{"use strict";i.d(t,{D:()=>p});var o=i(64047),n=i(11040),a=i(16926),r=i(91051),s=i(66958),l=i(3483),c=i(77107),d=i(33104),_=i(90293),u=i(21041);const p=(0,r.memo)((function(e){var{uniqueId:t,secUid:i,extraQuery:p={},children:m,replace:E=!1,isInBrowserMode:g=!1,teaParams:h,shouldStopPropagation:T=!0,reportTea:S=!0,onClick:O,onLinkClick:A}=e,I=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","shouldStopPropagation","reportTea","onClick","onLinkClick"]);const v=function(e,t={}){var i;const{search:o}=(0,u.TH)(),n=t.disableAutoLang?"":null!==(i=(0,_.parse)(o).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:o}=(0,_.parseUrl)(e);return(0,_.stringifyUrl)({url:i,query:Object.assign({lang:n},o)},Object.assign({skipEmptyString:!0},t))}const{pathname:a="",search:r={},hash:s}=e,l=s?`#${s}`:"";return`${(0,_.stringifyUrl)({url:a,query:Object.assign({lang:n},r)},Object.assign({skipEmptyString:!0},t))}${l}`}({pathname:(0,s.yl)({uniqueId:t,secUid:i}),search:p}),y=(0,a.fz)(l._e),C=(0,r.useCallback)((e=>{T&&e.stopPropagation(),S&&y.handleEnterPage("enter_personal_detail",h),null==O||O(e),null==A||A(e,v)}),[T,y,h,O,A,v,S]),f=(0,d.p)(t),N=null==f?void 0:f.isADVirtual;return(0,n.jsx)(c.v,Object.assign({to:v,disabled:N},I,{replace:E||g,onClick:C},{children:m}),void 0)}))},47127:(e,t,i)=>{"use strict";i.d(t,{X:()=>s,Q:()=>l});var o=i(9236),n=i(91051),a=i(34708),r=i(65763);function s({action:e,modalConfig:t={}}){const i=(0,a.L)((()=>["$user"]),[]),s=(0,o.qj)(r.r);return(0,n.useCallback)(((...o)=>{if(null==i?void 0:i.$user)return e(...o);s.openModal(t)}),[e,null==i?void 0:i.$user,s,t])}function l(e={}){const t=(0,o.qj)(r.r),i="function"==typeof e?e():e;return(0,n.useCallback)((()=>{t.openModal(i)}),[i,t])}},81773:(e,t,i)=>{"use strict";i.d(t,{u_:()=>A});var o,n=i(11040),a=i(25615),r=i.n(a),s=i(91051),l=i(32667),c=i(46009),d=i(40599),_=i(64047),u=i(56277),p=i(95918),m=i(27918);!function(e){e[e.None=0]="None",e[e.Outer=1]="Outer",e[e.Inner=2]="Inner",e[e.InnerLarge=3]="InnerLarge"}(o||(o={}));const E=(0,p.Z)("div",{target:"e1gjoq3k0"})({position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:1001,overflow:"auto",outline:"0px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)"},(({status:e,isShow:t})=>({display:t||e===c.Ix?"flex":"none",opacity:Number(e!==c.Ix&&e!==c.Wj)})),"label:DivModalContainer;"),g=(0,p.Z)("div",{target:"e1gjoq3k1"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"fixed",left:0,right:0,top:0,bottom:0})),"label:DivModalMask;"),h=(0,p.Z)("div",{target:"e1gjoq3k2"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,o=e.contentStyle,{transform:n}=o,a=(0,_.__rest)(o,["transform"]);return[{transform:t===c.Wj||t===c.Ix?n||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary},a]}),"label:DivContentContainer;"),T=(0,p.Z)(u.Z,{target:"e1gjoq3k3"})("label:StyledIcon;");function S(e){const{closeStyle:t,theme:{colors:i,direction:o}}=e,n=[(0,m.YJ)({direction:o,end:"24px"})];switch(t){case 2:n.push({width:"24px",height:"24px",background:i.BGView,[`${T}`]:{width:"15px",height:"15px"}});break;case 3:n.push({width:"24px",height:"24px",[`${T}`]:{width:"24px",height:"24px",fill:"rgba(22, 24, 35, 0.75)"}});break;case 1:n.push({width:"40px",height:"40px",background:i.BGPrimary,[`${T}`]:{width:"24px",height:"24px"}})}return n}const O=(0,p.Z)("div",{target:"e1gjoq3k4"})({position:"absolute",top:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},S,"label:DivCloseWrapper;"),A=function({children:e,onClose:t,visible:i,timeout:o,onWheel:a=r(),closeStyle:_=0,closeStyles:u={},maskCloseable:p=!0,keyboardCloseable:m=!0,zIndex:S=1001,mask:A=!0,fixed:I=!0,contentStyle:v={},maskStyle:y={},e2eData:C="",backgroundColor:f}){const N=(0,s.useRef)(),R=(0,s.useRef)(!!i),{showModal:L,hideModal:b}=(0,d.J)(),[P,D]=(0,s.useState)(!1);(0,s.useEffect)((()=>{i&&A?(L(),o&&(clearTimeout(N.current),N.current=window.setTimeout((()=>{null==t||t(2)}),o))):R.current&&(b(),clearTimeout(N.current)),R.current=!!i}),[i,A]),(0,s.useEffect)((()=>(D(!0),()=>{R.current&&b()})),[]),(0,s.useEffect)((()=>{const e=e=>{i&&m&&27===e.keyCode&&(null==t||t(1))};return i&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[m,t,i]);const M=(0,s.useCallback)((()=>{p&&(null==t||t(3))}),[p,t]),x=(0,s.useCallback)((()=>{null==t||t(0)}),[t]),w=(0,s.useRef)(null),U=(0,s.useRef)(null);return P?(0,l.createPortal)((0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,nodeRef:w},{children:t=>(0,n.jsxs)(E,Object.assign({status:t,isShow:i,onWheel:a,ref:w,style:{zIndex:S,position:I?"fixed":"relative"}},{children:[A&&(0,n.jsx)(g,Object.assign({style:y,onClick:M},{children:1===_&&(0,n.jsx)(O,Object.assign({closeStyle:_,onClick:x,style:u},{children:(0,n.jsx)(T,{},void 0)}),void 0)}),void 0),(0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,unmountOnExit:!0,nodeRef:U},{children:t=>(0,n.jsxs)(h,Object.assign({"data-e2e":C,status:t,ref:U,contentStyle:v,style:{backgroundColor:f}},{children:[e,(2===_||3===_)&&(0,n.jsx)(O,Object.assign({closeStyle:_,onClick:x,"data-e2e":"modal-close-inner-button",style:u},{children:(0,n.jsx)(T,{},void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),document.body):null}},39973:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});var o=i(91051);function n(e=0){const t=(0,o.useRef)(0),[i,n]=(0,o.useState)(!1),a=(0,o.useCallback)((()=>{n(!0),window.clearTimeout(t.current)}),[]),r=(0,o.useCallback)((()=>{window.clearTimeout(t.current),t.current=window.setTimeout((()=>{n(!1)}),e)}),[e]);return{active:i,setActive:n,handleMouseEnter:a,handleMouseLeave:r}}},84475:(e,t,i)=>{"use strict";i.d(t,{G:()=>p});var o=i(11040),n=i(91051),a=i(46009),r=i(95918),s=i(1723);function l(e,t){return e||t?t?e?{left:"50%",transform:`translate(-50%, ${t}px)`}:{transform:`translateY(${t}px)`}:{left:"50%",transform:"translateX(-50%)"}:null}const c=(0,r.Z)("div",{target:"e2ipgxl0"})((({state:e,duration:t=300,theme:i,centered:o,verticalPropKey:n,verticalOffset:a})=>[{position:"absolute",zIndex:1,background:i.colors.BGPrimary,borderRadius:"8px",[n]:"calc(100% + 12px)",boxShadow:"0 4px 16px rgba(0, 0, 0, .12)",transition:`opacity ${t}ms`,opacity:Number("entering"===e||"entered"===e)},l(o,a)]),"label:DivContainer;"),d=(0,r.Z)(s.Z,{target:"e2ipgxl1"})({display:"block",width:"24px",height:"8px",position:"absolute"},(({centered:e})=>e?{left:"50%",transform:"translateX(-50%)"}:null),(({verticalPropKey:e})=>"top"===e?{top:"-8px"}:{bottom:"-8px",transform:"rotate(180deg)"}),"label:StyledTopArrow;"),_={topRight:"right",bottomRight:"right",topLeft:"left",bottomLeft:"left",bottom:null},u={topRight:"bottom",topLeft:"bottom",bottomRight:"top",bottomLeft:"top",bottom:"top"},p=function({placement:e,margin:t="-2px",arrowMargin:i=6,duration:r=300,backgroundColor:s="#fff",active:l=!1,verticalOffset:p=0,style:m,children:E}){const g=(0,n.useRef)(null),h=_[e],T=u[e],S=Object.assign({backgroundColor:s},m),O={};return h&&(O[h]=i,S[h]=t),(0,o.jsx)(a.ZP,Object.assign({in:l,timeout:r,unmountOnExit:!0,nodeRef:g},{children:e=>(0,o.jsxs)(c,Object.assign({verticalPropKey:T,state:e,duration:r,ref:g,style:S,centered:!h,verticalOffset:p},{children:[(0,o.jsx)(d,{fill:s,style:O,centered:!h,verticalPropKey:T},void 0),E]}),void 0)}),void 0)}},39526:(e,t,i)=>{"use strict";i.d(t,{C:()=>k});var o=i(11040),n=i(9236),a=i(16926),r=i(86254),s=i.n(r),l=i(91051),c=i(43683),d=i(13761),_=i(80537),u=i(66958),p=i(8721),m=i(90035),E=i(89436),g=i(52432),h=i(2734),T=i(34708),S=i(70756),O=i(33104),A=i(76759),I=i(47127),v=i(95918),y=i(27918),C=i(11838);const f=(0,v.Z)("div",{target:"er095110"})((({paddingTop:e=40})=>({height:e,cursor:"pointer"})),"label:DivPaddingTop;"),N=(0,v.Z)("div",{target:"er095111"})((({paddingStart:e=0,theme:{direction:t}})=>[{zIndex:100,position:"absolute"},(0,y.YJ)({direction:t,paddingStart:e})]),"label:DivProfileOuterContainer;"),R=(0,v.Z)("div",{target:"er095112"})((({theme:{colors:e}})=>({position:"relative",width:"320px",boxSizing:"border-box",padding:"20px",background:e.BGPrimary,boxShadow:`0px 4px 16px ${e.ShadowPrimary}`,borderRadius:"8px"})),"label:DivProfileContainer;"),L=(0,v.Z)("div",{target:"er095113"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},"label:DivHeadContainer;"),b=(0,v.Z)(C.D,{target:"er095114"})((({theme:e})=>(0,y.GI)({theme:e,color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia",typography:"H5"})),y.gi,"label:StyledUserTitle;"),P=(0,v.Z)(C.D,{target:"er095115"})((({theme:e})=>(0,y.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima",typography:"P3"})),y.gi,"label:StyledUserName;"),D=(0,v.Z)(C.D,{target:"er095116"})({display:"block",width:"44px",flex:"0 0 44px"},"label:StyledAvatarLink;"),M=(0,v.Z)("p",{target:"er095117"})({marginTop:"8px"},"label:PUserStat;"),x=(0,v.Z)("span",{target:"er095118"})((({theme:e})=>[(0,y.GI)({theme:e,fontWeight:"bold",typography:"H3"}),(0,y.YJ)({direction:e.direction,marginEnd:"6px"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block"}]),"label:SpanUserStatsText;"),w=(0,v.Z)("span",{target:"er095119"})((({theme:e})=>[(0,y.GI)({theme:e,color:"TextSecondary",typography:"H3"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block",":not(:last-of-type)":(0,y.YJ)({direction:e.direction,marginEnd:"12px"})}]),"label:SpanUserStatsDesc;"),U=(0,v.Z)("p",{target:"er0951110"})((({theme:e})=>[(0,y.GI)({theme:e,typography:"P3"}),{paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${e.colors.LineSecondary2}`}]),"label:PSignature;"),k=(0,l.memo)((function(e){var t,i;const{uniqueId:r,top:v,hideSignature:y,fixedLeft:C,paddingStart:k,paddingTop:F,groupId:B,followTheme:G,onClick:j}=e,H=(0,p.Q)(),W=(0,a.fz)(g.B),[V,Y]=(0,n.b7)(A.z,{selector:e=>({user:e.users[r],stats:e.stats[r]}),dependencies:[r],equalFn:(e,t)=>s()(e,t)}),{isADVirtual:K}=null!==(t=null==V?void 0:V.user)&&void 0!==t?t:{},{$language:z}=null!==(i=(0,T.L)((()=>["$language"]),[]))&&void 0!==i?i:{},$=(0,I.Q)(),q={enter_method:"click_hover"};B&&(q.group_id=B);const{isFollowing:Z,handleFollow:Q,text:X}=(0,O.w)({uniqueId:r,onNeedLogin:$,teaParams:q}),{secUid:J,id:ee}=(0,h.m7)(V.user);(0,l.useEffect)((()=>{V.stats&&!V.stats.needFix||Y.getUserDetail({uniqueId:r,secUid:J,language:z})}),[Y,V.stats,z,J,r]),(0,l.useEffect)((()=>{W.handleDropdownCardShow()}),[W]);const te=(0,l.useMemo)((()=>({to_user_id:ee,author_id:ee,enter_method:"click_dropdown_card"})),[ee]),ie=(0,S.ot)({pathname:(0,u.yl)({uniqueId:r,secUid:J})}),oe=(0,E.e)(),ne=(0,l.useCallback)((e=>{null==j||j(e),K||oe(e,{href:ie,shouldUsePush:!0})}),[oe,ie,j,K]);if(!V.user)return(0,m.G)(["item.user"]);const{avatarThumb:ae,nickname:re,verified:se,signature:le}=V.user,ce=V.stats;return B&&(te.group_id=B),(0,o.jsxs)(N,Object.assign({paddingStart:k,paddingTop:F,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:{top:v,left:C}},{children:[(0,o.jsx)(f,{onClick:ne},void 0),(0,o.jsxs)(R,{children:[(0,o.jsxs)(L,{children:[(0,o.jsx)(D,Object.assign({uniqueId:r,secUid:J,target:"_blank",rel:"noopener",teaParams:te,"data-e2e":"user-card-avatar"},{children:(0,o.jsx)(d.q,{size:44,src:ae},void 0)}),void 0),(0,o.jsx)(_.W,Object.assign({size:"small",onClick:Q,buttonTheme:Z?"default":null!=G?G:"line","data-e2e":"user-card-follow"},{children:X}),void 0)]},void 0),(0,o.jsxs)(b,Object.assign({uniqueId:r,secUid:J,target:"_blank",rel:"noopener",teaParams:te},{children:[(0,o.jsx)("span",Object.assign({"data-e2e":"user-card-username"},{children:r}),void 0),se&&(0,o.jsx)(c.Q,{width:14,height:14,"data-e2e":"user-card-bluev"},void 0)]}),void 0),(0,o.jsx)("br",{},void 0),(0,o.jsx)(P,Object.assign({uniqueId:r,secUid:J,target:"_blank",rel:"noopener",teaParams:te,"data-e2e":"user-card-nickname"},{children:re}),void 0),(0,o.jsxs)(M,{children:[(0,o.jsx)(x,Object.assign({"data-e2e":"user-card-follower-count"},{children:ce?(0,h.BT)(ce.followerCount):"--"}),void 0),(0,o.jsx)(w,Object.assign({"data-e2e":"user-card-follower"},{children:H("Followers")}),void 0),(0,o.jsx)(x,Object.assign({"data-e2e":"user-card-like-count"},{children:ce?(0,h.BT)(ce.heartCount):"--"}),void 0),(0,o.jsx)(w,Object.assign({"data-e2e":"user-card-like"},{children:H("Likes")}),void 0)]},void 0),le&&!y&&(0,o.jsx)(U,Object.assign({"data-e2e":"user-card-user-bio"},{children:le}),void 0)]},void 0)]}),void 0)}))},75036:(e,t,i)=>{"use strict";i.d(t,{w:()=>u});var o=i(11040),n=i(91051),a=i(88671),r=i(95918),s=i(27918);const l=(0,r.Z)("div",{target:"e1b4u1n0"})({position:"absolute",padding:"0 4px",top:"0",transformOrigin:"right top",transition:"opacity .5s",opacity:0},(({theme:{direction:e}})=>{const t=(0,s.$K)(e,"end");return[(0,s.YJ)({direction:e,end:"0"}),{transformOrigin:`${t} top`}]}),"label:DivScrollBar;"),c=(0,r.Z)("div",{target:"e1b4u1n1"})({overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",perspective:"1px",transformStyle:"preserve-3d","::-webkit-scrollbar":{width:0,height:0},[`:hover ${l}`]:{opacity:1}},(({theme:{direction:e}})=>{const t=(0,s.$K)(e,"end");return[(0,s.YJ)({direction:e,paddingEnd:"12px"}),{perspectiveOrigin:`${t} top`}]}),"label:DivScrollContainer;"),d=(0,r.Z)("div",{target:"e1b4u1n2"})("label:DivScrollWrapper;"),_=(0,r.Z)("div",{target:"e1b4u1n3"})({width:"6px",height:"100%",borderRadius:"3px",background:"rgba(22, 24, 35, .06)"},"label:DivScrollBarThumb;"),u=(0,n.memo)((0,n.forwardRef)((function({children:e,Wrapper:t=d,onScroll:i,onScrollBottom:r,bottomThreshold:s=100,className:u,style:p,wrapperStyle:m},E){const g=(0,n.useRef)(null),[h,T]=(0,n.useState)(0),[S,O]=(0,n.useState)(0),A=(0,n.useMemo)((()=>{const e=h>=S?0:Math.pow(h,2)/S,t=(h-e)/(S-h);return{height:e,transform:`matrix3d(${[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,-1].join(",")}) scale(${1/t}) translateZ(${1-1/t}px) translateZ(-2px)`}}),[h,S]);(0,n.useImperativeHandle)(E,(()=>({get scrollTop(){var e,t;return null!==(t=null===(e=g.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0},get dom(){return g.current}})),[]);const I=(0,a.fB)((()=>{if(!g.current)return;const{current:e}=g,{height:t}=e.getBoundingClientRect(),{scrollHeight:i}=e;T(t),O(i)}),[],300),v=(0,n.useCallback)((()=>{if(!g.current||!r)return;const{scrollTop:e}=g.current;null==i||i({scrollTop:e}),h+e+s>=S&&r()}),[r,i,h,s,S]);return(0,n.useEffect)((()=>{const e=new window.MutationObserver((function(e){e.length&&I()}));return g.current&&e.observe(g.current,{childList:!0,subtree:!0}),window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),e.disconnect()}}),[I]),(0,o.jsxs)(c,Object.assign({ref:g,onScroll:v,className:u,style:p},{children:[(0,o.jsx)(t,Object.assign({style:m},{children:e}),void 0),(0,o.jsx)(l,Object.assign({style:A},{children:(0,o.jsx)(_,{},void 0)}),void 0)]}),void 0)})))},84834:(e,t,i)=>{"use strict";i.d(t,{U:()=>se});var o=i(11040),n=i(54251),a=i(27319),r=i(9236),s=i(86254),l=i.n(s),c=i(91051),d=i(9578),_=i(88671),u=i(8721),p=i(2734),m=i(87608),E=i(34708),g=i(59151),h=i(16926),T=i(66958),S=i(3483),O=i(75546),A=i(63092),I=i(11838),v=i(47127),y=i(88650),C=i(33104),f=i(76759),N=i(14695),R=i(95918),L=i(27918),b=i(80537),P=i(77107);const D=(0,R.Z)(P.v,{target:"e85wp610"})({":hover":{textDecoration:"none"}},"label:StyledLink;"),M=(0,R.Z)("div",{target:"e85wp611"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"4px",transition:"background-color 300ms",":hover":{backgroundColor:e.BGView},":active":{backgroundColor:e.BGInput}})),"label:DivUserContainer;"),x=(0,R.Z)("div",{target:"e85wp612"})((({theme:{direction:e}})=>[{display:"flex",flex:"1"},(0,L.YJ)({direction:e,paddingEnd:"24px"})]),"label:DivUserInfo;"),w=(0,R.Z)("div",{target:"e85wp613"})((({theme:{direction:e}})=>[{maxWidth:"450px",padding:"1px 0"},(0,L.YJ)({direction:e,paddingStart:"12px"})]),"label:DivUserDesc;"),U=(0,R.Z)("div",{target:"e85wp614"})({display:"flex",alignItems:"center",height:"22px",lineHeight:"22px"},"label:DivTopPart;"),k=(0,R.Z)("span",{target:"e85wp615"})((({theme:e})=>[(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P2"})]),"label:SpanUniqueId;"),F=(0,R.Z)("span",{target:"e85wp616"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",lineHeight:"15px",typography:"P4"}),{color:i.TextSecondary},(0,L.YJ)({direction:t,paddingStart:"4px"})]),"label:SpanNickname;"),B=(0,R.Z)("div",{target:"e85wp617"})((({theme:e,theme:{colors:t}})=>[(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{height:"20px",marginTop:"4px",color:t.TextSecondary}]),"label:DivBottomPart;"),G=(0,R.Z)("p",{target:"e85wp618"})({maxWidth:"450px"},L.wj,"label:PSignature;"),j=(0,R.Z)("p",{target:"e85wp619"})({maxWidth:"450px"},L.wj,"label:POther;"),H=(0,R.Z)("span",{target:"e85wp6110"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,paddingStart:"8px"})),"label:SpanSecond;"),W=(0,R.Z)(b.W,{target:"e85wp6111"})((({theme:{direction:e}})=>({flexShrink:0,"& > svg":[(0,L.YJ)({direction:e,marginEnd:"6px"})]})),"label:StyledFollowButton;"),V=(0,R.Z)(N.Z,{target:"e85wp6112"})((({theme:{direction:e}})=>(0,L.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifiedBadgeColor;"),Y=(0,c.memo)((function({uniqueId:e,enterMethod:t,onClose:i}){const n=(0,u.Q)(),a=(0,r.mp)(f.z,{selector:t=>{const i=t.users[e],o=t.stats[e];if(!i)return null;const{verified:n,avatarThumb:a,secUid:r,nickname:s,roomId:l,id:c,relation:d,signature:_,secret:u}=i,{followerCount:p=0,videoCount:m=0}=null!=o?o:{};return{avatarThumb:a,secUid:r,verified:n,nickname:s,roomId:l,id:c,uniqueId:e,signature:_,relation:d,secret:u,followerCount:p,videoCount:m}},dependencies:[e]}),{id:s,nickname:l,secUid:d,signature:_,verified:m,followerCount:E,videoCount:N}=(0,p.m7)(a),R=(0,T.yl)({uniqueId:e,secUid:null!=d?d:""}),L=(0,y.zW)(a),{isShowLive:b}=L,P=b?A.G:I.D,Y=(0,y.CN)({user:a,enterMethod:t}),K=(0,v.Q)(),{handleFollow:z,text:$,isFollowing:q,relation:Z}=(0,C.w)({uniqueId:e,onNeedLogin:K}),Q=q?"default":"line",X=(0,c.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),z(e)}),[z]),J=(0,h.fz)(S._e),ee=(0,c.useCallback)((()=>{J.handleEnterPage("enter_personal_detail",{to_user_id:s,enter_method:t}),null==i||i()}),[J,t,s,i]),te=(0,c.useCallback)((e=>{e.stopPropagation(),null==i||i()}),[i]);return(0,o.jsx)(D,Object.assign({to:R,onClick:ee},{children:(0,o.jsxs)(M,{children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(P,Object.assign({uniqueId:e,secUid:d,teaParams:Y,shouldStopPropagation:!1,onClick:te},{children:(0,o.jsx)(O.k,Object.assign({},L,{liveTheme:6,size:48}),void 0)}),void 0),(0,o.jsxs)(w,{children:[(0,o.jsxs)(U,{children:[(0,o.jsx)(k,{children:e},void 0),m&&(0,o.jsx)(V,{width:14,height:14},void 0),(0,o.jsx)(F,{children:l},void 0)]},void 0),(0,o.jsx)(B,Object.assign({className:"bottom-part"},{children:_?(0,o.jsx)(G,Object.assign({className:"signature"},{children:_}),void 0):(0,o.jsxs)(j,{children:[(0,o.jsxs)("span",{children:[n("Video"),": ",N]},void 0),(0,o.jsxs)(H,{children:[n("Followers"),": ",(0,p.BT)(E)]},void 0)]},void 0)}),void 0)]},void 0)]},void 0),(0,o.jsxs)(W,Object.assign({size:"small",id:s,buttonTheme:Q,onClick:X},{children:[2===Z?(0,o.jsx)(g.Z,{},void 0):null,$]}),void 0)]},void 0)}),s)})),K=(0,R.Z)("div",{target:"exlovqy0"})({display:"flex",flexDirection:"column",position:"absolute",width:"700px",height:"500px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px"},"label:DivAccountListModal;"),z=(0,R.Z)("div",{target:"exlovqy1"})((({theme:{colors:e}})=>({position:"relative",height:"56px","::after":{position:"absolute",left:"0",bottom:"0",content:'""',width:"100%",height:"1px",transform:"scaleY(.5)",background:e.LinePrimary}})),"label:DivHeader;"),$=(0,R.Z)("div",{target:"exlovqy2"})((({theme:{direction:e}})=>[{display:"flex"},(0,L.YJ)({direction:e,marginStart:"14px"})]),"label:DivTabsContainer;"),q=(0,R.Z)("div",{target:"exlovqy3"})((({theme:e,active:t,theme:{colors:i}})=>[(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:t?"bold":"semiBold",typography:"P2"}),{position:"relative",margin:"24px 30px 0",color:t?i.TextPrimary:i.TextTertiary,cursor:"pointer"},t?{"::after":{position:"absolute",left:"0",bottom:"-10px",content:'""',width:"100%",height:"2px",background:i.TextPrimary}}:null]),"label:DivTab;"),Z=(0,R.Z)("span",{target:"exlovqy4"})((({theme:{direction:e}})=>[(0,L.YJ)({direction:e,paddingStart:"4px"})]),"label:SpanCount;"),Q=(0,R.Z)("div",{target:"exlovqy5"})((({theme:{colors:e,direction:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"16px",width:"32px",height:"32px",background:e.BGView,borderRadius:"16px",cursor:"pointer"},(0,L.YJ)({direction:t,end:"16px"})]),"label:DivCloseBtn;"),X=(0,R.Z)("div",{target:"exlovqy6"})((({isHidden:e})=>({flex:"1",overflowY:e?"hidden":"auto"})),"label:DivMain;"),J=(0,R.Z)("div",{target:"exlovqy7"})({boxSizing:"border-box",width:"100%",padding:"16px 0 16px 12px"},"label:DivUserList;"),ee=(0,R.Z)("div",{target:"exlovqy8"})({boxSizing:"border-box",display:"flex",alignItems:"center",width:"100%",padding:"8px 12px"},"label:DivLoadingContainer;"),te=(0,R.Z)("div",{target:"exlovqy9"})({width:"48px",height:"48px",flexShrink:0},"label:DivAvatarContainer;"),ie=(0,R.Z)("div",{target:"exlovqy10"})((({theme:{direction:e}})=>[{flexGrow:1},(0,L.YJ)({direction:e,marginStart:"12px"})]),"label:DivSkeletonTitleContainer;"),oe=(0,R.Z)("div",{target:"exlovqy11"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"label:DivEmptyContainer;"),ne=(0,R.Z)("p",{target:"exlovqy12"})((({theme:e})=>[(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",lineHeight:"24px",typography:"P1"})]),"label:PTitle;"),ae=(0,R.Z)("p",{target:"exlovqy13"})((({theme:e,theme:{colors:t}})=>[(0,L.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2"}),{marginTop:"8px",color:t.TextSecondary}]),"label:PDesc;"),re={following:{title:"following",empty:"following_my_empty_desc"},follower:{title:"Followers",empty:"followers_my_empty_desc"},suggest:{title:"common_registration_username_suggested",empty:"profile_suggested_empty_toast"}},se=(0,c.memo)((function(e){var t;const{visible:i,type:s,shouldShowSuggested:g=!0}=e,h=(0,u.Q)(),{$user:T}=null!==(t=(0,E.L)((()=>["$user"]),[]))&&void 0!==t?t:{},S=(0,c.useRef)(null),[O,A]=(0,r.b7)(m.G,{selector:e=>({following:Object.assign(Object.assign({},e.following),{hasMore:-1!==e.following.maxCursor}),follower:Object.assign(Object.assign({},e.follower),{hasMore:-1!==e.follower.maxCursor}),suggest:Object.assign(Object.assign({},e.suggest),{hasMore:!1})}),dependencies:[],equalFn:(e,t)=>l()(e,t)}),I={following:"pop_up_following",follower:"pop_up_follower",suggest:"pop_up_suggest"},[v,y]=(0,c.useState)(T?s:"suggest");(0,c.useEffect)((()=>{const{loading:e,list:t}=O.follower;i&&!t.length&&e&&A.getFollowerList({count:20})}),[O,A,i]),(0,c.useEffect)((()=>{i&&y(s)}),[s,i]);const C=(0,c.useCallback)((e=>()=>{y(e),S.current&&(S.current.scrollTop=0)}),[y]),{list:f,loading:N,hasMore:R}=O[v],L=0!==f.length||N,b=(0,_.fB)((()=>{var e;if("suggest"===v||N||!R)return;const{scrollTop:t=0,scrollHeight:i=0}=null!==(e=null==S?void 0:S.current)&&void 0!==e?e:{};t&&i-t<480&&("following"===v?A.getFollowingList({count:20}):A.getFollowerList({count:20}))}),[A,v,N,R],200),P=(0,c.useMemo)((()=>Array.from({length:f.length?1:7}).fill(0)),[f.length]);return(0,o.jsx)(n.AR,Object.assign({isOpen:i,compact:!0,closeOnBackdropClick:!0,onClose:e.onClose},{children:(0,o.jsxs)(K,{children:[(0,o.jsxs)(z,{children:[(0,o.jsxs)($,{children:[T&&["following","follower"].map((e=>(0,o.jsxs)(q,Object.assign({active:v===e,onClick:C(e)},{children:[(0,o.jsx)("span",{children:h(re[e].title)},void 0),(O[e].total||!O[e].loading)&&(0,o.jsx)(Z,{children:(0,p.BT)(O[e].total)},void 0)]}),e))),g&&(0,o.jsx)(q,Object.assign({active:"suggest"===v,onClick:C("suggest")},{children:(0,o.jsx)("span",{children:h("common_registration_username_suggested")},void 0)}),void 0)]},void 0),(0,o.jsx)(Q,Object.assign({onClick:e.onClose},{children:(0,o.jsx)(a.Z,{width:14,height:14,style:{color:"rgba(22, 24, 35, 0.75)"}},void 0)}),void 0)]},void 0),(0,o.jsx)(X,Object.assign({isHidden:N&&!f.length,ref:S,onScroll:b},{children:L?(0,o.jsxs)(J,{children:[O[v].list.map((t=>(0,o.jsx)(Y,{uniqueId:t,enterMethod:I[v],onClose:e.onClose},t))),N&&P.map(((e,t)=>(0,o.jsxs)(ee,{children:[(0,o.jsx)(te,{children:(0,o.jsx)(d.Od.Avatar,{},void 0)},void 0),(0,o.jsxs)(ie,{children:[(0,o.jsx)(d.Od.Title,{style:{width:"119px",height:"16px",margin:"4px 0 12px"}},void 0),(0,o.jsx)(d.Od.Title,{style:{width:"254px",height:"12px"}},void 0)]},void 0),(0,o.jsx)(d.Od.Button,{style:{width:"106px",height:"36px",flexShrink:0}},void 0)]},t)))]},void 0):(0,o.jsxs)(oe,{children:[(0,o.jsx)(ne,{children:h(re[v].title)},void 0),(0,o.jsx)(ae,{children:h(re[v].empty)},void 0)]},void 0)}),void 0)]},void 0)}),void 0)}))},87608:(e,t,i)=>{"use strict";i.d(t,{G:()=>y});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(49845),l=i.n(s),c=i(82346),d=i(60595),_=i(49584),u=i(53095),p=i(10026),m=i(5549),E=i(20948),g=i(56979),h=i(47165),T=i(76759),S=i(57244),O=i(50218),A=i(4206);let I=class{constructor(e){this.fetch=e}getUserDiscoverData(e,t){let i=28,o=17;return(0,O.FZ)(e)?i=50:(0,O.bf)(e)?(i=30,o=15):i=30,this.fetch.get("/node/share/discover",{query:{noUser:"0",count:i,scene:o,pageId:t,userId:t}}).pipe((0,g.U)((e=>e.body[0].exploreList)))}getFollowingUserList(e){return this.fetch.get("/api/user/list/",{query:e})}};var v;I=(0,o.__decorate)([(0,S.G)(),(0,o.__metadata)("design:paramtypes",[A.r])],I),function(e){e.Recommend="suggest",e.Following="following",e.Follower="follower"}(v||(v={}));let y=class extends n.D{constructor(e,t){super(),this.service=e,this.user=t,this.defaultState={following:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},follower:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},suggest:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0}}}setList(e,t){const{list:i,key:o,maxCursor:n,minCursor:a,total:r}=t;e[o].list=l()(e[o].list.concat(i)),e[o].maxCursor=n,e[o].minCursor=a,r&&(e[o].total=r)}resetList(e,t){const{key:i}=t;e[i].list=[],e[i].maxCursor=0,e[i].minCursor=0}setLoading(e,t){const{loading:i,key:o}=t;e[o].loading=i}getRecommendList(e){return e.pipe((0,_.z)((({pathname:e,userId:t=""})=>this.service.getUserDiscoverData(e,t).pipe((0,u.z)((e=>{const t=e.map((({cardItem:e})=>({avatarLarger:e.cover,avatarMedium:e.cover,avatarThumb:e.cover,id:e.id,nickname:e.title,relation:e.extraInfo.relation,signature:e.description,uniqueId:e.subTitle.replace(/^@/,""),verified:e.extraInfo.verified,secUid:e.extraInfo.secUid,roomId:e.extraInfo.roomId}))).sort(((e,t)=>{var i,o;return(null!==(i=null==e?void 0:e.relation)&&void 0!==i?i:0)-(null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:0)})).sort(((e,t)=>{var i,o,n,a;return(null!==(o=null===(i=null==t?void 0:t.roomId)||void 0===i?void 0:i.length)&&void 0!==o?o:0)-(null!==(a=null===(n=null==e?void 0:e.roomId)||void 0===n?void 0:n.length)&&void 0!==a?a:0)}));return(0,c.of)(this.user.getActions().multiSetUser(t),this.getActions().setList({key:"suggest",list:t.map((({uniqueId:e})=>e)),hasMore:!1}))})),(0,p.O)(this.getActions().resetList({key:"suggest"}),this.getActions().setLoading({key:"suggest",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"suggest",loading:!1}),this.terminate()),(0,h.n)({})))))}getFollowingList(e){return e.pipe((0,E.M)(this.state$),(0,g.U)((([{count:e},t])=>Object.assign(Object.assign({},t.following),{count:e}))),(0,_.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:21,maxCursor:t,minCursor:i,count:o}).pipe((0,u.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,c.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((