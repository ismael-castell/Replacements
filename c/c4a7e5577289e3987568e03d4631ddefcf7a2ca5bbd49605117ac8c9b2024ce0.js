!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn1.affirm.com/products/affirmjs/master/dist/",n(n.s=79)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(6)),o=s(n(15)),i=s(n(1)),a=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=o.default.getEnvironmentPaths(),d={buildParams:function(e,t,n){Array.isArray(t)?t.forEach(function(t,r){e.match(/\[]$/)?n(e,t):d.buildParams("".concat(e,"[").concat("object"===l(t)?r:"","]"),t,n)}):d.isObject(t)?Object.keys(t).forEach(function(r){d.buildParams("".concat(e,"[").concat(r,"]"),t[r],n)}):null!==t&&n(e,t)},delay:function(e,t){return setTimeout(e,t)},extend:function(e,t){return d.isObject(t)?(Object.keys(t).forEach(function(n){var r=t[n];Object.prototype.hasOwnProperty.call(t,n)&&(!r||"object"!==l(r)||Array.isArray(r)||d.isElement(r)?e[n]=r:"object"===l(e[n])?e[n]=d.extend(e[n],d.extend({},r)):e[n]=d.extend({},r))}),e):e},formattedUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(e.split("#"),2),r=n[0],o=n[1],i=r.match(/\?/)?"&":"?",a=r;return a="".concat(a).concat(i).concat(d.param(t)),o&&(a+="#".concat("".concat(o))),a},getApiUrl:function(e){return d.getResourceUrl(f.api_url,e)},getDomain:function(e){try{var t=document.createElement("a");t.href=encodeURI(e);var n=""!==t.port?":".concat(t.port):"";return"".concat(t.protocol,"//").concat(t.hostname).concat(n,"/")}catch(t){return e}},getElementById:function(e){var t=e;return"string"==typeof t&&(t=document.getElementById(t.replace(/^#/,""))),t},getResourceUrl:function(e,t){var n="",r=e&&e.length&&"/"!==e[e.length-1],o=t&&t.length&&"/"!==t[0];return r&&o&&(n="/"),"".concat(e).concat(n).concat(t)},getFrontendUrl:function(e){return d.getResourceUrl(f.frontend_url,e)},getUserAgent:function(){return navigator.userAgent},getNavigatorVendor:function(){return navigator.vendor},getUserTimeZone:function(){return Intl&&"function"==typeof Intl.DateTimeFormat&&"function"==typeof Intl.DateTimeFormat().resolvedOptions&&Intl.DateTimeFormat().resolvedOptions().timeZone||null},getWebhookSessionId:function(){return window._affirm_config?window._affirm_config.session_id:null},isAffirmWebView:function(){var e=d.getUserAgent(),t=!!e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari).*(Affirm-iOS).*/i),n=!!e.match(/(Android).*AppleWebKit.*(Affirm-Android).*/i);return t||n},isElement:function(e){try{return e instanceof HTMLElement}catch(e){}try{return"object"===l(e)&&1===e.nodeType&&"object"===l(e.style)&&"object"===l(e.ownerDocument)}catch(e){}return!1},isIe:function(){return d.getUserAgent().match(/MSIE/i)||d.getUserAgent().match(/Trident.*rv:11\./)},isMobile:function(){return d.getUserAgent().match(/Android/i)||d.getUserAgent().match(/iPad/i)||d.getUserAgent().match(/iPod/i)||d.getUserAgent().match(/webOS/i)||d.getUserAgent().match(/iPhone/i)||d.getUserAgent().match(/BlackBerry/i)},isSafariDesktop:function(){var e=d.getUserAgent(),t=d.getNavigatorVendor();return/Safari/i.test(e)&&/Apple Computer/.test(t)&&!/Mobi|Android/i.test(e)},isObject:function(e){return e&&"object"===l(e)},isTouch:function(){return d.getUserAgent().match(/Android/i)||d.getUserAgent().match(/iPad/i)||d.getUserAgent().match(/iPod/i)||d.getUserAgent().match(/iPhone/i)},isIosWebView:function(){return!!d.getUserAgent().match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)},isWhiteLabeledCustomerForHeaderAuth:function(e){return"HR5MJO3HE6F0YKWI"===e||"N1UBT9WU3PRPJIOM"===e},logEvent:function(e,t){i.default.trackPageView(e,!0,t)},param:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=function(e,t){var r=t;"function"==typeof t?r=t():null!==t&&void 0!==t||(r=""),n[n.length]="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))};return Array.isArray(e)?e.forEach(function(e,t){d.buildParams(t,e,r)}):d.isObject(e)&&Object.keys(e).forEach(function(t){d.buildParams(t,e[t],r)}),n=n.join("&"),t&&(n=n.replace(/%20/g,"+")),n},postToUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=document.createElement("form");d.setElementAttrs(r,{"accept-charset":"utf-8",action:e,method:n}),d.isObject(t)&&Object.keys(t).forEach(function(e){var n=t[e];Object.prototype.hasOwnProperty.call(t,e)&&("string"==typeof n&&(n=[n]),n.forEach(function(t){var n=document.createElement("input");d.setElementAttrs(n,{name:e,type:"hidden",value:t}),r.appendChild(n)}))}),document.body.appendChild(r),i.default.trackActionLog("AFJS_form_sent",{checkoutToken:t.checkout_token,path:e,method:n}),r.submit()},preconnectTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];["preconnect","dns-prefetch"].forEach(function(n){var r=document.createElement("link");r.rel=n,r.href=e,t&&(r.crossOrigin=""),document.head.appendChild(r)})},queryObj:function(e){var t={};return(e?d.queryString(e):window.location.search).slice(1).split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]||""}}),t},queryString:function(e){var t=e.indexOf("?");return t>-1?e.substring(t):""},setElementAttrs:function(e,t){d.isObject(t)&&Object.keys(t).forEach(function(n){var r=t[n];try{e.setAttribute(n,r)}catch(t){e[n]=r}})},setElementStyle:function(e,t){d.isObject(t)&&Object.keys(t).forEach(function(n){e.style[n]=t[n]})},setUrl:function(e){document.location.assign&&document.location.assign(e),document.location.href=e},sniffer:{failed:[],promises:{},register:function(e,t){if(t.async){var n=t.test();return d.sniffer.promises[e]=n,void n.then(function(n){d.sniffer[e]=n,n||d.sniffer.failed.push(t.message)})}try{d.sniffer[e]=t.test()}catch(t){d.sniffer[e]=!1}d.sniffer[e]||d.sniffer.failed.push(t.message)}},swapStyle:function(e,t,n){if(e.style[t]){var r=e.style[n];e.style[n]=e.style[t],e.style[t]=r}if(e.style[n]){var o=e.style[t];e.style[t]=e.style[n],e.style[n]=o}},throwErrIfNotObject:function(e){if(!e||e.constructor!==Object)throw new Error("Provided argument is not an object")}},p={cookies:{message:"Cookies Disabled",test:a.default.cookies},cors:{message:"Cross Origin Resource Sharing not available",test:a.default.cors},JSON:{message:"JSON not available",test:a.default.json},localstorage:{message:"localStorage Disabled",test:a.default.localStorage},thirdPartyCookies:{async:!0,message:"Third Party Cookies not available",test:function(){return a.default.thirdPartyCookies(d.getFrontendUrl("api/v2/".concat(r.default.resource_urls.third_party_cookie_check)))}}};Object.keys(p).forEach(function(e){d.sniffer.register(e,p[e])}),d.get_domain=d.getDomain;var h=d;t.default=h},function(e,t,n){"use strict";n.r(t),n.d(t,"ANALYTICS_STORAGE_COLLECTORS",function(){return _}),n.d(t,"USER_ACTIONS",function(){return w}),n.d(t,"flushEventQueue",function(){return j}),n.d(t,"trackEvent",function(){return N}),n.d(t,"trackCustomEvent",function(){return L}),n.d(t,"trackDebugEvent",function(){return U}),n.d(t,"trackOnExit",function(){return F}),n.d(t,"trackPageView",function(){return B}),n.d(t,"trackImpression",function(){return H}),n.d(t,"trackActionLog",function(){return W}),n.d(t,"trackAPI",function(){return V}),n.d(t,"trackBrowserNotSupportedImpression",function(){return q}),n.d(t,"trackLongTasksEntries",function(){return Y}),n.d(t,"trackResourceTiming",function(){return J}),n.d(t,"trackApplicationResponseTime",function(){return X}),n.d(t,"trackUserInteraction",function(){return z}),n.d(t,"trackFirstInputDelay",function(){return Z}),n.d(t,"trackTimeToInteractive",function(){return $}),n.d(t,"trackAppAbandonment",function(){return ee}),n.d(t,"tag",function(){return te}),n.d(t,"untag",function(){return ne}),n.d(t,"clearTags",function(){return re}),n.d(t,"init",function(){return ie});var r=n(2),o=n(75),i=n.n(o),a=n(45),s=n.n(a),u=n(76),c=n(43),l=n.n(c),f=n(28),d=n.n(f),p=n(77),h=n(29),m=n(30),g=n(78),y=n.n(g);n(119);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A="last_session_id",b=window.Rollbar||window.affirm&&window.affirm.Rollbar,_={DEFAULT:"/collect",CHRONO:"/api/chrono/v1/collect2"},w={CLICK:"Click",DISMISS:"Dismiss",HOVER:"Hover",SWIPE_LEFT:"Swipe Left",SWIPE_RIGHT:"Swipe Right",TAP:"Tap"},E={},k="",O="",P=!1,S=null,I=[],T=null,C=1;function M(e,t,n){void 0===n&&(n={});window.fetch(e,v({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n)).catch(function(t){!Object(h.a)(t)&&Math.random()<.01&&b&&b.warn("Network error fetching "+e,t,{version:"v2"})})}function R(e,t){if(void 0===e&&(e={}),void 0===t&&(t=!1),k){var n="https://"+k+_.DEFAULT,r=""+O+_.CHRONO,o=t?_.CHRONO:_.DEFAULT,i="localhost"===k?o:t?r:n;if(t)M(i,e);else if(navigator&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(i,JSON.stringify(e))||Math.random()<.01&&b&&b.warn("Error queueing beacon to "+i,void 0,{version:"v2"});else M(i,e,{credentials:"include"})}else if(window.console&&"function"==typeof console.log){var a=t?"Tracking event with Chrono: "+e[0].eventType:"Tracking event: "+e.eventType;console.log(a,e)}}function x(){var e,t,n=(e=window.location.href,(t=document.createElement("a")).href=e,t);return{hash:n.hash,hostname:n.hostname,pathname:n.pathname,queryParams:n.search}}function j(){for(;0!==I.length;){var e=I.pop(),t=e.payloadData,n=e.useChrono;Object.assign(t,E),R(t,n)}}function D(e,t,n){void 0===n&&(n=!0);var r={hr:window.location.href,ts:Date.now(),ms:window.performance?window.performance.now():null,is_load_finished:null!=S},o={};Object.assign(o,E),Object.assign(o,{eventType:e}),Object.assign(o,r),Object.assign(o,t),"user-interaction"===e?T=o:T&&"page-view"===e&&(o.screen_transition={latency:o.ms-T.ms,start_page_key:T.pageKey,start_user_action:T.user_action,start_element_name:T.element_name},T=null);var i=s()(o),a=i;return n&&(a=d()(i)),a}function N(e,t,n,r,o){if(void 0===t&&(t={}),void 0===n&&(n=1),void 0===r&&(r=!0),void 0===o&&(o=!1),!(Math.random()>n)){var i=D(e,t,r);if(window.Rollbar&&"function"==typeof window.Rollbar.captureEvent&&"resource-timing"!==e){var a={eventType:e,action_name:t.action_name,url:t.url,response_status:t.response_status,pageKey:t.pageKey,user_action:t.user_action,element_name:t.element_name,referrer:t.referrer,load_type:t.load_type};i&&(a.screen_transition=i.screen_transition),window.Rollbar.captureEvent(a,"info")}var s=o?function(e,t){return[v({},e,{eventType:t,merchantPublicApiKey:E.public_api_key})]}(t,e):i;P?(R(s,o),j()):I.push({payloadData:s,useChrono:o})}}function L(e,t){void 0===t&&(t={}),ae.trackEvent("custom-event",v({customEventName:e},t))}function U(e,t){void 0===t&&(t={}),ae.trackEvent("debug-event",v({debugEventName:e},t))}function F(e,t){void 0===e&&(e={}),void 0===t&&(t="resource-timing"),R(D(t,{entry:e&&e.entry?e.entry:{entryType:"exit_page"}}))}function B(e,t,n){void 0===t&&(t=!0),void 0===n&&(n={});var r=v({},n,{load_type:t?"full":"dynamic",referrer:document.referrer});e&&Object.assign(r,{pageKey:e}),te({path:x()}),N("page-view",r)}function H(e,t){void 0===t&&(t={}),ae.trackEvent("impression",v({},t,{element_name:e}))}function W(e,t){N("action-log",{action_name:e,action_data:t})}function V(e,t,n,r){var o;void 0===r&&(r={}),o="string"!=typeof n?JSON.stringify(n):n;var i=t<=299?C:1;N("api",v({},r,{url:e,response_status:t||"unknown",response_message:o}),i)}function q(e,t){N("Browser does not support PerformanceEntry type "+e,{errorMessage:t?t.message:""})}function K(e){e.forEach(function(e){var t=e.toJSON();t.entryName=t.name,delete t.name,N("resource-timing",{entry:t})})}function G(e,t){void 0===t&&(t={});var n=Object.assign({},e);n.entryName=n.name,delete n.name;var r=Object.assign({},n,t);if(!!r.responseStart){var o=r.redirectEnd-r.redirectStart,i=0!==o,a=r.domainLookupStart-r.fetchStart==0,s=r.domainLookupEnd-r.domainLookupStart,u=0===s,c=r.connectEnd-r.connectStart,l=0===c;Object.assign(r,{isBrowserCached:a,isDNSCached:u,isPersistentConnection:l,isRedirected:i,resourceConnectionTime:c,resourceContentDownloadTime:r.responseEnd-r.responseStart,resourceDNSLookupTime:s,resourceRedirectTime:o,resourceTTFB:r.responseStart-r.startTime,resourceTTLB:r.responseEnd-r.startTime})}return r}function Q(e,t){e.reduce(function(e,n){if("function"!=typeof n.toJSON)return e;var r=_.DEFAULT,o=n.toJSON(),i="localhost"===k?r:"https://"+k+r;if(-1!==o.name.indexOf(i))return e;if(t&&t.length&&!t.find(function(e){return o.name.indexOf(e)>-1}))return e;return e.push(G(o)),e},[]).forEach(function(e){ae.trackEvent("resource-timing",{entry:e})})}function Y(e){e.forEach(function(e){var t=e.toJSON();if(t&&t.attribution){var n=G(t);delete n.attribution,t.attribution.forEach(function(e){var t=e;t.attributionName=t.name,delete t.name,ae.trackEvent("resource-timing",{entry:n,attribution:t})})}else{q("longtask",{message:"TaskAttributionTiming not present in the entry"})}})}function J(){}function X(e){N("resource-timing",{applicationResponseData:e})}function z(e,t,n){void 0===n&&(n={}),Object.keys(w).some(function(e){return w[e]===t})&&ae.trackEvent("user-interaction",v({},n,{element_name:e,user_action:t}))}function Z(){try{perfMetrics.onFirstInputDelay(function(e){ae.trackEvent("resource-timing",{entry:{entryType:"first-input-delay",duration:e}})})}catch(e){q("first-input-delay",e)}return r.default.deviceId}function $(){return window.performance&&window.PerformanceLongTaskTiming?(window.__tti={entries:[]},window.__tti.entries=window.__tti.entries.concat(window.performance.getEntriesByType("longtask")),y.a.getFirstConsistentlyInteractive().then(function(e){ae.trackEvent("resource-timing",{entry:{entryType:"time-to-interactive",duration:e}})})):r.default.deviceId}function ee(){document.addEventListener("visibilitychange",function e(){document.removeEventListener("visibilitychange",e),ae.trackOnExit({entry:{entryType:"app-abandonment",startTime:window.performance?window.performance.now():null}},"page-view")})}function te(e){return void 0===e&&(e={}),Object.assign(E,d()(s()(e))),this}function ne(e){return(Array.isArray(e)?e:[e]).forEach(function(e){return delete E[e]}),this}function re(){return E={},this}function oe(e){var t,n,o=r.default.localDeviceId,a=m.a.read(A),s=((t={})[r.default.COOKIE_KEY]=o,t);return a&&(s[A]=a),te(s),P=!0,e.firePageView&&(n=function(){N("page-load",{performance:i()(),load_type:"full",is_performance_observed:"PerformanceObserver"in window})},Object(p.loadEventListener)(function(){return setTimeout(n,0)}),B()),e.fireAppAbandonment&&ee(),j(),r.default.deviceId}function ie(e,t,n,o,i,a,s,c,f,d,p,h,m,g){void 0===i&&(i={}),void 0===a&&(a=!0),void 0===s&&(s=1),void 0===c&&(c=[]),void 0===f&&(f=!0),void 0===d&&(d=!0),void 0===p&&(p=1),void 0===h&&(h=!0),void 0===m&&(m=p),void 0===g&&(g=""),C=m;var y=navigator.userAgent,A=l()(y),b=Object(u.parseUserAgentIntoDeviceType)(y),_=navigator.connection?navigator.connection.effectiveType:"";k=o,O=g;var w={firePageView:a,fireAppAbandonment:h,defaultObserverSampleRate:s};return te({client:{appName:e,appVersion:t,browser:A,deviceType:b,connectionType:_},path:x()}),te(i),te({pageKey:window.location.href}),r.default.initialize({apiUrl:n}).then(function(){return oe(w)}).then(function(){return function(e,t){if(Math.random()>t)return r.default.deviceId;try{window.performance&&window.performance.getEntriesByType&&Q(window.performance.getEntriesByType("resource"),e),new PerformanceObserver(function(t){Q(t.getEntries(),e)}).observe({entryTypes:["resource"]})}catch(e){q("resource",e)}return r.default.deviceId}(c,p)}).then(function(){Math.random()>s||function(){if(window.performance&&window.performance.getEntriesByType&&(K(window.performance.getEntriesByType("paint")),window.PerformanceObserver)){var e=new PerformanceObserver(function(t){K(t.getEntries()),e.disconnect()});try{e.observe({entryTypes:["paint"]})}catch(e){q("paint",e)}}return r.default.deviceId}().then(function(){return function(){if(window.performance&&window.performance.getEntriesByType&&(Y(window.performance.getEntriesByType("longtask")),window.PerformanceObserver)){var e=new PerformanceObserver(function(e){Y(e.getEntries())});try{e.observe({entryTypes:["longtask"]})}catch(e){q("longtask",e)}}return r.default.deviceId}()}).then(function(){return function(){var e="largest-contentful-paint";try{new PerformanceObserver(function(e){var t=e.getEntries(),n=t[t.length-1];S={startTime:n.renderTime||n.loadTime,size:n.size,url:n.url,element:{text:n.element&&n.element.innerText,pageUrl:n.element&&n.element.baseURI}}}).observe({type:e,buffered:!0}),document.addEventListener("visibilitychange",function(){S&&"hidden"===document.visibilityState&&ae.trackOnExit({entry:v({entryType:"largest-contentful-paint"},S)})})}catch(t){q(e,t)}return r.default.deviceId}()}).then(function(){return d&&$()}).then(function(){return f&&Z()})}),this}var ae={clearTags:re,init:ie,tag:te,untag:ne,trackEvent:N,trackBrowserNotSupportedImpression:q,trackCustomEvent:L,trackDebugEvent:U,trackOnExit:F,trackActionLog:W,trackApplicationResponseTime:X,trackImpression:H,trackUserInteraction:z,trackResourceTiming:J,trackResourceTimingEntries:Q,trackLongTasksEntries:Y,trackTimeToInteractive:$,trackFirstInputDelay:Z,trackAppAbandonment:ee,trackAPI:V,trackPageView:B,postTrackingEvent:R,USER_ACTIONS:w};t.default=ae},function(e,t,n){"use strict";function r(e){var t=e.match(/Chrom[^ \/]+\/(\d+)[\.\d]/);return t&&parseInt(t[1],10)}function o(e){var t=e.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&parseInt(t[1],10)}function i(e){var t=e.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return{major:t&&parseInt(t[1],10),minor:t&&parseInt(t[2],10)}}function a(e){return Boolean(e.match(/Chrom(e|ium)/))}n.r(t),n.d(t,"default",function(){return b});var s={chromeMajorVersion:r,iosMajorVersion:o,macosxVersion:i,isChromeMajorVersion:function(e,t){return r(e)===t},isChromiumBased:a,isIosMajorVersion:function(e,t){return o(e)===t},isMacEmbeddedBrowser:function(e){return Boolean(e.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\)+ AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))},isMacosxVersion:function(e,t,n){void 0===n&&(n=null);var r=i(e),o=r.major,a=r.minor;return n?o===t&&a===n:o===t},isSafariBased:function(e){return!a(e)&&Boolean(e.match(/Version\/.* Safari\//))}},u={};function c(){var e=navigator.userAgent;return!(!s.isIosMajorVersion(e,12)&&!s.isMacosxVersion(e,10,14)||!s.isSafariBased(e)&&!s.isMacEmbeddedBrowser(e))||!!(s.isChromiumBased(e)&&s.chromeMajorVersion(e)<67)}function l(e){window.Rollbar&&"function"==typeof window.Rollbar.warning&&window.Rollbar.warning(e)}function f(e,t,n,r,o){try{var i;if(n){var a=new Date(Date.now());a.setTime(a.getTime()+24*n*60*60*1e3),i=a.toUTCString()}else i="";u.buildCookie(e,t,r||"",i,o)}catch(e){l(e)}}function d(e){try{var t=window.location.hostname.split(".");t.slice(0,-1).forEach(function(n,r){var o=t.slice(r).join(".");u.buildCookie(e,"",o,"Thu, 01 Jan 1970 00:00:01 GMT")})}catch(e){l(e)}}function p(e){try{for(var t=document.cookie.split(";"),n=0;n<t.length;n+=1){var r=t[n],o=new RegExp("s*"+e+"=(.*)").exec(r);if(o&&o.length>1)return o[1]}}catch(e){l(e)}return null}u.buildCookie=function(e,t,n,r,o){void 0===o&&(o="Lax");var i=r?"; expires="+r:"",a=n?"; domain="+n:"",s="https:"===location.protocol&&"None"===o?"; Secure":"",u=e+"="+t+i+a+"; path=/";c()?document.cookie=u:document.cookie=u+"; SameSite="+o+s},u.create=f,u.enabled=function(){try{u.buildCookie("cookietest","1","","","None");var e=-1!==document.cookie.indexOf("cookietest=");return u.buildCookie("cookietest","1","","Thu, 01 Jan 1970 00:00:01 GMT","None"),e}catch(e){return l(e),!1}},u.erase=d,u.read=p,u.upsert=function(e,t,n,r,o){try{p(e)&&d(e),f(e,t,n,r,o)}catch(e){l(e)}},u.isSameSiteNoneIncompatible=c;var h=u;var m={getParamValue:function(e){var t=window.location.search.substring(1);if(""===t)return null;t=t.split("&");for(var n=0;n<t.length;n+=1){var r=t[n].split("=");if(r[0]===e){if(void 0===r[1])break;return decodeURIComponent(r[1])}}return null}};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y,v,A,b=function(){function e(t){if(void 0===t&&(t={}),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance)return e.instance;window.affirm=window.affirm||{},window.affirm.deviceId=window.affirm.deviceId||{},this.config=t,this.config.apiUrl||(this.config.apiUrl=e.API_URL),"/"!==this.config.apiUrl.slice(-1)&&(this.config.apiUrl=this.config.apiUrl+"/")}var t,n,r;return t=e,r=[{key:"initialize",value:function(t){return e.instance?e.deviceId:(e.instance=new e(t),e.deviceId.then(function(t){return t&&(e.deviceId=t),t}))}},{key:"reset",value:function(){e.instance=null,window.affirm&&window.affirm.deviceId&&delete window.affirm.deviceId}},{key:"API_URL",get:function(){return"/api/v2/"}},{key:"COOKIE_EXPIRATION",get:function(){return 1825}},{key:"COOKIE_KEY",get:function(){return"tracker_device"}},{key:"DEVICE_ID_URL",get:function(){return"session/touch_track"}},{key:"SEARCH_PARAM",get:function(){return"device_id"}},{key:"deviceId",get:function(){return new Promise(function(t){var n=e.localDeviceId;return t(n||e.deviceIdFromApi)})},set:function(t){h.upsert(e.COOKIE_KEY,t,e.COOKIE_EXPIRATION),window.affirm&&window.affirm.deviceId&&(window.affirm.deviceId.value=t)}},{key:"deviceIdFromApi",get:function(){if(window.affirm.deviceId.promise)return window.affirm.deviceId.promise;var t=e.instance.config.apiUrl+e.DEVICE_ID_URL,n=window.fetch(t,{credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){return e.id}).catch(function(){return null}).finally(function(){return delete window.affirm.deviceId.promise});return window.affirm.deviceId.promise=n,n}},{key:"deviceIdFromCookies",get:function(){return h.read(e.COOKIE_KEY)}},{key:"deviceIdFromSearchParam",get:function(){return m.getParamValue(e.SEARCH_PARAM)}},{key:"localDeviceId",get:function(){return window.affirm.deviceId.value||e.deviceIdFromSearchParam||e.deviceIdFromCookies}}],(n=null)&&g(t.prototype,n),r&&g(t,r),e}();A=null,(v="instance")in(y=b)?Object.defineProperty(y,v,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[v]=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8)),o=s(n(7)),i=s(n(53)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=["YOUR_PUBLIC_KEY","XXXXXXXXXXXXXXX"],h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,r.default);var t,n,o,s=f(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this)).publicApiKey=null,e.getPublicApiKey()&&e.setPublicApiKey(e.getPublicApiKey()),e}return t=u,(n=[{key:"checkPublicApiKey",value:function(){return!!this.getPublicApiKey()}},{key:"getPublicApiKey",value:function(){var e=this.publicApiKey||i.default.queryObj().public_api_key||window._affirm_config&&(window._affirm_config.public_api_key||window._affirm_config.publicApiKey);return-1===p.indexOf(e)?e:null}},{key:"setPublicApiKey",value:function(e){var t=this;this.publicApiKey=e,a.default.tag({public_api_key:e}),i.default.delay(function(){t.trigger("public_api_key_set")})}}])&&c(t.prototype,n),o&&c(t,o),u}()),m=(0,o.default)(h,["checkPublicApiKey","getPublicApiKey","off","on","setPublicApiKey","trigger"]);t.default=m},function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o=60103,i={use_static:!1};function a(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function u(e,t){s(e,t,function(){throw new y("The "+t+" method cannot be invoked on an Immutable data structure.")})}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(i.use_static=Boolean(t.use_static));var c="__immutable_invariants_hold";function l(e){return"object"!=typeof e||null===e||Boolean(Object.getOwnPropertyDescriptor(e,c))}function f(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],h=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),g=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function y(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function v(e,t){for(var n in s(e,c,!0),t)t.hasOwnProperty(n)&&u(e,t[n]);return Object.freeze(e),e}function A(e,t){var n=e[t];s(e,t,function(){return G(n.apply(e,arguments))})}function b(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=G.merge(this[e],t,{deep:!0,mode:"replace"})),f(this[e],t)))return this;var o=S.call(this);return o[e]=G(t),E(o)}y.prototype=new Error,y.prototype.constructor=Error;var _=G([]);function w(e,t,n){var r=e[0];if(1===e.length)return b.call(this,r,t,n);var o,i=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=G.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?w.call(_,i,t):L.call(N,i,t)}if(r in this&&a===o)return this;var u=S.call(this);return u[r]=o,E(u)}function E(e){for(var t in m)m.hasOwnProperty(t)&&A(e,m[t]);i.use_static||(s(e,"flatMap",O),s(e,"asObject",I),s(e,"asMutable",S),s(e,"set",b),s(e,"setIn",w),s(e,"update",F),s(e,"updateIn",H),s(e,"getIn",W));for(var n=0,r=e.length;n<r;n++)e[n]=G(e[n]);return v(e,h)}function k(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return E(n)}function P(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach(function(e,t,n){"number"==typeof e&&(n[t]=e.toString())}),e=function(e,n){return-1!==t.indexOf(n)}}var n=a(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return K(n)}function S(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(T(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function I(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],a=o[1];n[i]=a}return K(n)}function T(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,c)||e instanceof Date?e:G.asMutable(e,{deep:!0})}function C(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function M(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),i=t&&t.deep,s=t&&t.mode||"merge",u=t&&t.merger;function c(e,r,o){var s,c=G(r[o]),l=u&&u(e[o],c,t),p=e[o];void 0===n&&void 0===l&&e.hasOwnProperty(o)&&f(c,p)||f(p,s=void 0!==l?l:i&&d(p)&&d(c)?G.merge(p,c,t):c)&&e.hasOwnProperty(o)||(void 0===n&&(n=C(e,a(e))),n[o]=s)}if(o)for(var l=0,p=e.length;l<p;l++){var h=e[l];for(r in h)h.hasOwnProperty(r)&&c(void 0!==n?n:this,h,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&c(this,e,r);"replace"===s&&function(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=C(e,a(e))),delete n[r])}(this,e)}return void 0===n?this:K(n)}function R(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return G.merge(this,e,{deep:n,mode:"replace"})}var x,j,D,N=G({});function L(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return U.call(this,r,t,n);var o,i=e.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?G.setIn(s,i,t):L.call(N,i,t),this.hasOwnProperty(r)&&s===o)return this;var u=C(this,a(this));return u[r]=o,K(u)}function U(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=G.merge(this[e],t,{deep:!0,mode:"replace"})),f(this[e],t)))return this;var o=C(this,a(this));return o[e]=G(t),K(o)}function F(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return G.set(this,e,t.apply(r,[r].concat(n)))}function B(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function H(e,t){var n=Array.prototype.slice.call(arguments,2),r=B(this,e);return G.setIn(this,e,t.apply(r,[r].concat(n)))}function W(e,t){var n=B(this,e);return void 0===n?t:n}function V(e){var t,n=a(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=T(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function q(){return{}}function K(e){return i.use_static||(s(e,"merge",M),s(e,"replace",R),s(e,"without",P),s(e,"asMutable",V),s(e,"set",U),s(e,"setIn",L),s(e,"update",F),s(e,"updateIn",H),s(e,"getIn",W)),v(e,p)}function G(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(e.$$typeof===o||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(G);if(Array.isArray(e))return E(e.slice());if(e instanceof Date)return a=new Date(e.getTime()),i.use_static||s(a,"asMutable",k),v(a,g);var a,u=t&&t.prototype,c=(u&&u!==Object.prototype?function(){return Object.create(u)}:q)();if(null==n&&(n=64),n<=0)throw new y("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var f in n-=1,e)Object.getOwnPropertyDescriptor(e,f)&&(c[f]=G(e[f],void 0,n));return K(c)}function Q(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function Y(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return G.from=G,G.isImmutable=l,G.ImmutableError=y,G.merge=Q(M),G.replace=Q(R),G.without=Q(P),G.asMutable=(x=V,j=S,D=k,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?j.apply(t,e):t instanceof Date?D.apply(t,e):x.apply(t,e)}),G.set=Y(U,b),G.setIn=Y(L,w),G.update=Q(F),G.updateIn=Q(H),G.getIn=Q(W),G.flatMap=Q(O),G.asObject=Q(I),i.use_static||(G.static=e({use_static:!0})),Object.freeze(G),G}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){var r=n(92),o={},i=!1;function a(e,t){return t===s(e)}function s(e){var t=typeof e;return"object"!==t?t:e?e instanceof Error?"error":{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function u(e){return a(e,"function")}function c(e){var t=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),n=RegExp("^"+t+"$");return l(e)&&n.test(e)}function l(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function f(){var e=v();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}var d={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function p(e,t){var n,r;try{n=o.stringify(e)}catch(o){if(t&&u(t))try{n=t(e)}catch(e){r=e}else r=o}return{error:r,value:n}}function h(e,t){return function(n,r){try{t(n,r)}catch(t){e.error(t)}}}var m=["log","network","dom","navigation","error","manual"],g=["critical","error","warning","info","debug"];function y(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function v(){return Date.now?+Date.now():+new Date}e.exports={addParamsAndAccessTokenToPath:function(e,t,n){(n=n||{}).access_token=e;var r,o=[];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&o.push([r,n[r]].join("="));var i="?"+o.sort().join("&");(t=t||{}).path=t.path||"";var a,s=t.path.indexOf("?"),u=t.path.indexOf("#");-1!==s&&(-1===u||u>s)?(a=t.path,t.path=a.substring(0,s)+i+"&"+a.substring(s+1)):-1!==u?(a=t.path,t.path=a.substring(0,u)+i+a.substring(u)):t.path=t.path+i},createItem:function(e,t,n,o,i){for(var a,u,c,l,d,p,m=[],g=[],y=0,A=e.length;y<A;++y){var b=s(p=e[y]);switch(g.push(b),b){case"undefined":break;case"string":a?m.push(p):a=p;break;case"function":l=h(t,p);break;case"date":m.push(p);break;case"error":case"domexception":case"exception":u?m.push(p):u=p;break;case"object":case"array":if(p instanceof Error||"undefined"!=typeof DOMException&&p instanceof DOMException){u?m.push(p):u=p;break}if(o&&"object"===b&&!d){for(var _=0,w=o.length;_<w;++_)if(void 0!==p[o[_]]){d=p;break}if(d)break}c?m.push(p):c=p;break;default:if(p instanceof Error||"undefined"!=typeof DOMException&&p instanceof DOMException){u?m.push(p):u=p;break}m.push(p)}}m.length>0&&((c=r(c)).extraArgs=m);var E={message:a,err:u,custom:c,timestamp:v(),callback:l,notifier:n,diagnostic:{},uuid:f()};return function(e,t){t&&void 0!==t.level&&(e.level=t.level,delete t.level),t&&void 0!==t.skipFrames&&(e.skipFrames=t.skipFrames,delete t.skipFrames)}(E,c),o&&d&&(E.request=d),i&&(E.lambdaContext=i),E._originalArgs=e,E.diagnostic.original_arg_types=g,E},addErrorContext:function(e,t){var n=e.data.custom||{},o=!1;try{for(var i=0;i<t.length;++i)t[i].hasOwnProperty("rollbarContext")&&(n=r(n,t[i].rollbarContext),o=!0);o&&(e.data.custom=n)}catch(t){e.diagnostic.error_context="Failed: "+t.message}},createTelemetryEvent:function(e){for(var t,n,r,o,i=0,a=e.length;i<a;++i)switch(s(o=e[i])){case"string":!t&&y(m,o)?t=o:!r&&y(g,o)&&(r=o);break;case"object":n=o}return{type:t||"manual",metadata:n||{},level:r}},filterIp:function(e,t){if(e&&e.user_ip&&!0!==t){var n=e.user_ip;if(t)try{var r;if(-1!==n.indexOf("."))(r=n.split(".")).pop(),r.push("0"),n=r.join(".");else if(-1!==n.indexOf(":")){if((r=n.split(":")).length>2){var o=r.slice(0,3),i=o[2].indexOf("/");-1!==i&&(o[2]=o[2].substring(0,i)),n=o.concat("0000:0000:0000:0000:0000").join(":")}}else n=null}catch(e){n=null}else n=null;e.user_ip=n}},formatArgsAsString:function(e){var t,n,r,o=[];for(t=0,n=e.length;t<n;++t){switch(s(r=e[t])){case"object":(r=(r=p(r)).error||r.value).length>500&&(r=r.substr(0,497)+"...");break;case"null":r="null";break;case"undefined":r="undefined";break;case"symbol":r=r.toString()}o.push(r)}return o.join(" ")},formatUrl:function(e,t){if(!(t=t||e.protocol)&&e.port&&(80===e.port?t="http:":443===e.port&&(t="https:")),t=t||"https:",!e.hostname)return null;var n=t+"//"+e.hostname;return e.port&&(n=n+":"+e.port),e.path&&(n+=e.path),n},get:function(e,t){if(e){var n=t.split("."),r=e;try{for(var o=0,i=n.length;o<i;++o)r=r[n[o]]}catch(e){r=void 0}return r}},handleOptions:function(e,t,n){var o=r(e,t,n);return!t||t.overwriteScrubFields?o:(t.scrubFields&&(o.scrubFields=(e.scrubFields||[]).concat(t.scrubFields)),o)},isError:function(e){return a(e,"error")||a(e,"exception")},isFunction:u,isIterable:function(e){var t=s(e);return"object"===t||"array"===t},isNativeFunction:c,isType:a,isObject:l,isString:function(e){return"string"==typeof e||e instanceof String},jsonParse:function(e){var t,n;try{t=o.parse(e)}catch(e){n=e}return{error:n,value:t}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(e,t,n,r,o,i,a,s){var u={url:t||"",line:n,column:r};u.func=s.guessFunctionName(u.url,u.line),u.context=s.gatherContext(u.url,u.line);var c=document&&document.location&&document.location.href,l=window&&window.navigator&&window.navigator.userAgent;return{mode:i,message:o?String(o):e||a,url:c,stack:[u],useragent:l}},merge:r,now:v,redact:function(){return"********"},sanitizeUrl:function(e){var t=function(e){if(a(e,"string")){for(var t=d,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=0,i=t.key.length;o<i;++o)r[t.key[o]]=n[o]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,o){n&&(r[t.q.name][n]=o)}),r}}(e);return t?(""===t.anchor&&(t.source=t.source.replace("#","")),e=t.source.replace("?"+t.query,"")):"(unknown)"},set:function(e,t,n){if(e){var r=t.split("."),o=r.length;if(!(o<1))if(1!==o)try{for(var i=e[r[0]]||{},a=i,s=1;s<o-1;++s)i[r[s]]=i[r[s]]||{},i=i[r[s]];i[r[o-1]]=n,e[r[0]]=a}catch(e){return}else e[r[0]]=n}},setupJSON:function(e){i||(i=!0,a(JSON,"undefined")||(c(JSON.stringify)&&(o.stringify=JSON.stringify),c(JSON.parse)&&(o.parse=JSON.parse)),u(o.stringify)&&u(o.parse)||e(o))},stringify:p,maxByteSize:function(e){for(var t=0,n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<128?t+=1:o<2048?t+=2:o<65536&&(t+=3)}return t},typeName:s,uuid4:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(24)),o=n(14),i=c(n(3)),a=c(n(52)),s=c(n(15)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var l,f,d=i.default.getPublicApiKey(),p=s.default.getEnvironmentPaths();l=a.default.getTrackingBlacklist(),f=d,(0,o.indexOf)(l,f)>-1||(u.default.init("affirm-js-v2","10.153.1",p.api_url,p.tracking_endpoint,{},!1,0,[p.api_url,p.frontend_url,p.minified_url],!1,!1,.01,!1,1,p.frontend_url),d||u.default.trackEvent("Merchant API Key Not Set",{},.01));var h=r.default;t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={instance:e};return t.forEach(function(t){n[t]=e[t].bind(e)}),n}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.on=this.on.bind(this),this.off=this.off.bind(this),this.trigger=this.trigger.bind(this),this.logError=this.logError.bind(this),this.name=t||"AFFIRM_ELEMENT_".concat(Math.round(10*Math.random())),this.uuid="".concat(10*Math.random()).replace(/\./,"-"),this.on("error",this.logError)}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){var n=this,r=e;return"string"==typeof r&&(r=[r]),this.events||(this.events={}),r.forEach(function(e){n.events[e]||(n.events[e]=[]),n.events[e].push(t)}),this}},{key:"off",value:function(e,t){var n=this,r=e;return"string"==typeof r&&(r=[r]),this.events||(this.events={}),r.forEach(function(e){return window.setTimeout(function(){if(n.events[e]){var r=-1;if(Object.keys(n.events[e]).forEach(function(o){n.events[e][o]===t&&(r=o)}),r>=0)return n.events[e].splice(r,1)}})})}},{key:"trigger",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e;"string"==typeof o&&(o=[o]),this.events||(this.events={});var i=[];return o.forEach(function(e){n.events[e]&&n.events[e].forEach(function(r){i.push("function"==typeof r.call?r.call(n,t,e):void 0)}),r&&n.events.all&&n.events.all.forEach(function(r){i.push("function"==typeof r.call?r.call(n,t,e):void 0)})}),i}},{key:"logError",value:function(e,t){var n=t,o=e;"object"===r(e)&&e.data&&(n=e.data.data||{},o=e.data.error_name);var i="Affirm Error (".concat(this.name,"):");try{return console.log(i,o,n)}catch(e){return}}}])&&o(t.prototype,n),i&&o(t,i),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featureFlagNames=t.POPUP_FLOW_DEPRECATION=t.INLINE_VALUE_PROPS_EXPERIMENT=t.FEATURE_FLAG_STATUS=t.ADAPTIVE_CHECKOUT_EXPERIMENT=void 0,t.getAdaptiveCheckoutExperiment=function(e){if(-1===i.ADAPTIVE_CHECKOUT_PUBLIC_API_KEYS.indexOf(o.default.getPublicApiKey()))return Promise.resolve({adaptiveCheckoutExperimentResult:i.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.NOT_IN_ADAPTIVE_CHECKOUT_EXPERIMENT});null===g&&(g=u.AxpClient.getExperimentVariants([h]));return g.then(function(t){g=null;var n=t[h],r="treatment"===n;return e&&("treatment"===n?u.AxpClient.trackImpression(h,n,u.impressionTypes.SHOWN_TREATMENT):"default"===n&&u.AxpClient.trackImpression(h,n,u.impressionTypes.SHOWN_DEFAULT)),r?Promise.resolve({adaptiveCheckoutExperimentResult:i.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.IN_ADAPTIVE_CHECKOUT_TREATMENT}):Promise.resolve({adaptiveCheckoutExperimentResult:i.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.NOT_IN_ADAPTIVE_CHECKOUT_TREATMENT})}).catch(function(e){return g=null,window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&Math.random()<.1&&window.affirm.Rollbar.warning("AXP Impression failed",e),Promise.resolve({adaptiveCheckoutExperimentResult:i.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.EXCEPTION})})},t.getFeatureFlagStatus=function(e){return u.AxpClient.getAxpVariants({featureFlagNames:Object.keys(d)}).then(function(t){return t.featureFlagVariants[e]||f.FEATURE_OFF}).catch(function(e){return window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&Math.random()<.1&&window.affirm.Rollbar.warning("AXP Variant fetch failed",e),!1})},t.getInlineExperiment=function(e){null===g&&(g=u.AxpClient.getExperimentVariants([p]));return g.then(function(t){g=null;var n=t[p],r="default"===n;return e&&u.AxpClient.trackImpression(p,n,r?u.impressionTypes.SHOWN_DEFAULT:u.impressionTypes.SHOWN_TREATMENT),r}).catch(function(e){return g=null,window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&Math.random()<.1&&window.affirm.Rollbar.warning("AXP Impression failed",e),!1})},t.getItemsInput=function(e){if(!e||!e.length)return null;var t=e.map(y);return JSON.stringify(t)},t.getModes=void 0,t.getPopupFlowDeprecationExperiment=function(e){null===g&&(g=u.AxpClient.getExperimentVariants([m]));return g.then(function(t){g=null;var n=t[m];if(n){var o="treatment"===n;return e&&(c.default.trackActionLog("AFJS_popup_deprecation_assignment",{deviceId:r.default.localDeviceId,variant:o}),u.AxpClient.trackImpression(m,n,o?u.impressionTypes.SHOWN_TREATMENT:u.impressionTypes.SHOWN_DEFAULT,{userAgent:s.default.getUserAgent()})),o}return!1}).catch(function(e){return g=null,window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&window.affirm.Rollbar.warning("AXP Impression failed",e),!1})},t.getPublicApiKeyByWindowLocation=function(){var e=window.location.hostname;return c.default.trackActionLog("AJFS_public_key_from_window_location"),e.indexOf("americangirl.com")>-1?"J58O9ZQ92CVD2JUI":e.indexOf("shiekh.com")>-1?"Y7YCRFSNMXGWVY2B":e.indexOf("eshakti.com")>-1?"FDZPOIM536QEZPP5":e.indexOf("511tactical.com")>-1?"4UDO5IUJVOMQ5PHD":e.indexOf("luisaviaroma.com")>-1?"19QM9L004P0D521M":e.indexOf("neimanmarcus.com")>-1?"BF1E98V0I4ZFN4LF":e.indexOf("mavix.com")>-1?"5HQ4NWB4X643A4GM":e.indexOf("revzilla.com")>-1?"LV2522QG9NXCFS23":e.indexOf("adidas.com")>-1?"LFZI1FWRYWDJ5VO4":""},t.logWarning=void 0,t.throttle=v;var r=l(n(2)),o=l(n(3)),i=n(19),a=l(n(53)),s=l(n(0)),u=n(73),c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var f={FEATURE_OFF:"feature_off",FEATURE_ON:"feature_on"};t.FEATURE_FLAG_STATUS=f;var d={prequal_popup_deprecation:"prequal_popup_deprecation"};t.featureFlagNames=d;var p="inline_checkout_version_two";t.INLINE_VALUE_PROPS_EXPERIMENT=p;var h="adaptive_checkout_experiment";t.ADAPTIVE_CHECKOUT_EXPERIMENT=h;var m="popup_flow_deprecation";t.POPUP_FLOW_DEPRECATION=m;var g=null;function y(e){return{sku:e.sku,display_name:e.displayName,qty:e.qty,unit_price:e.unitPrice,item_url:e.itemUrl,item_image_url:e.itemImageUrl,upc:e.upc}}function v(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return function(){t||(e.apply(void 0,arguments),t=!0,setTimeout(function(){t=!1},n))}}var A=v(function(e){var t,n,r;console.warn(e),null===(t=window)||void 0===t||null===(n=t.affirm)||void 0===n||null===(r=n.Rollbar)||void 0===r||r.warning(e)});t.logWarning=A;t.getModes=function(){return a.default.queryObj().modes||window._affirm_config&&window._affirm_config.modes||null}},function(e,t,n){"use strict";function r(e,t){for(var n,r=t,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if("string"==typeof t&&(r=e,i.push(t)),!i.length)throw new Error("bindAll requires at least one method name to bind");i.forEach(function(t){if("function"!=typeof(n=e[t]))throw new Error(t+" is not a method on object");e[t]=n.bind(r)})}n.r(t),n.d(t,"default",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8)),o=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}var a=new r.default,s=(0,o.default)(a,["off","on","trigger"]);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(3)),o=d(n(55)),i=d(n(134)),a=d(n(0)),s=n(9),u=d(n(54)),c=d(n(10)),l=d(n(136)),f=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,o.default);var t,n,d,p=y(b);function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);var r={width:i.default.DEFAULT_OPTIONS.popupWidth};if(!(e=p.call(this,a.default.extend({popupCss:r},n))).constructor.isValidMode(t.mode))throw new Error(e.constructor.INVALID_MODE_ERROR);return e.config=a.default.extend({},t),(0,c.default)(v(e),"configureMessaging","startConfiguringMessaging"),e}return t=b,d=[{key:"APP_NAME",get:function(){return"modal-popup-widget"}},{key:"INVALID_MODE_ERROR",get:function(){return"Widget mode must either be 'modal' or 'popup'"}},{key:"MAX_CONFIG_ATTEMPTS",get:function(){return 50}},{key:"MODE_MODAL",get:function(){return"modal"}},{key:"MODE_POPUP",get:function(){return"popup"}},{key:"MODE_UNSUPPORTED",get:function(){return"unsupported"}},{key:"POPUP_TIMEOUT",get:function(){return 0}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_MESSAGES"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Please click continue if you don't see the Affirm pop-up window. You may need to turn off your pop-up blocker."}},{key:"determineMode",value:function(e){return b.isModalSupported().then(function(e){return e}).catch(function(){return!1}).then(function(t){var n,o=e||b.MODE_UNSUPPORTED;return o===b.MODE_MODAL&&!t&&(o=b.MODE_POPUP),o!==b.MODE_POPUP||b.isPopupSupported()||(o=t?b.MODE_MODAL:b.MODE_UNSUPPORTED),a.default.isWhiteLabeledCustomerForHeaderAuth(r.default.getPublicApiKey())&&b.isPopupSupported()&&(o=b.MODE_MODAL),null!==(n=(0,s.getModes)())&&void 0!==n&&n.disableEduModalPopup&&(o=b.MODE_MODAL),o})}},{key:"isModalSupported",value:function(){var e;return e=a.default.sniffer.promises&&a.default.sniffer.promises.thirdPartyCookies?a.default.sniffer.promises.thirdPartyCookies:u.default.thirdPartyCookies(),(0,l.default)(e,500).catch(function(){return!1})}},{key:"isPopupSupported",value:function(){return!a.default.isIe()}},{key:"isValidMode",value:function(e){return e===b.MODE_MODAL||e===b.MODE_POPUP||e===b.MODE_UNSUPPORTED}}],(n=[{key:"configPayload",get:function(){return{id:this.currentPostMessageId||this.constructor.POST_MESSAGE_ID}}},{key:"targetWindow",get:function(){return this.config.mode===b.MODE_MODAL?this.$iframe.contentWindow:this.config.mode===b.MODE_POPUP?this.popup&&this.popup.popupWindow:null}},{key:"clearTimers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.config.mode===b.MODE_POPUP&&this.popup&&this.popup.clearTimer(),clearInterval(this.payloadMessageTimer),delete this.payloadMessageTimer,e&&"Affirm Checkout"===this.constructor.APP_NAME&&f.default.trackActionLog("AFJS_post_message_config_succeeded",{elapsedTime:Date.now()-this.widgetOpenTime,isIFrameReady:this.isIFrameReady,widgetMode:this.config.mode,checkoutAri:this.config.checkoutAri})}},{key:"close",value:function(e){this.clearTimers(),this.config.mode===b.MODE_MODAL?m(A(b.prototype),"close",this).call(this,e):this.config.mode===b.MODE_POPUP?(this.trigger("hiding"),this.popup&&this.popup.close(e)):"function"==typeof e&&e()}},{key:"configureMessaging",value:function(e){var t="function"==typeof window.postMessage;this.payloadMessageCounter<this.constructor.MAX_CONFIG_ATTEMPTS?(this.postMessage(e||this.configPayload),this.payloadMessageCounter+=1):(this.clearTimers(),f.default.trackActionLog("AFJS_post_message_config_failed",{checkoutAri:this.config.checkoutAri,elapsedTime:Date.now()-this.widgetOpenTime,isIFrameReady:this.isIFrameReady,isPostMessageSupported:t,widgetMode:this.config.mode,widgetType:this.constructor.APP_NAME}))}},{key:"open",value:function(e){this.widgetOpenTime=Date.now(),"Affirm Checkout"===this.constructor.APP_NAME&&f.default.trackActionLog("AFJS_open_checkout_modal_popup_widget",{widgetMode:this.config.mode,checkoutAri:this.config.checkoutAri}),this.config.mode===b.MODE_MODAL?(m(A(b.prototype),"open",this).call(this,e),this.startConfiguringMessaging()):this.config.mode===b.MODE_POPUP?(this.popup||(this.popup=new i.default({popupName:this.constructor.APP_NAME,popupOverlayMessage:this.constructor.POPUP_OVERLAY_MESSAGE,popupTimeout:this.constructor.POPUP_TIMEOUT,popupWidth:this.options.popupCss.width,src:this.options.src})),this.popup.open(this.onPopupOpen.bind(this,e))):"function"==typeof e&&e()}},{key:"onPopupOpen",value:function(e){this.options.src&&setTimeout(this.startConfiguringMessaging,500),"function"==typeof e&&e()}},{key:"postMessage",value:function(e){if(this.config.mode===b.MODE_MODAL)m(A(b.prototype),"postMessage",this).call(this,e);else if(this.config.mode===b.MODE_POPUP&&this.options.src){var t=a.default.extend({id:this.currentPostMessageId||this.constructor.POST_MESSAGE_ID},e);this.targetWindow&&this.targetWindow.postMessage(JSON.stringify(t),a.default.getDomain(this.options.src))}}},{key:"startConfiguringMessaging",value:function(e){var t=this;this.payloadMessageTimer||(this.payloadMessageCounter=0,this.payloadMessageTimer=setInterval(function(){return t.configureMessaging(e)},500))}},{key:"updatePopupSource",value:function(e,t){this.options.src=e,this.popup.updateSource(e),setTimeout(this.startConfiguringMessaging,500),"function"==typeof t&&t()}}])&&h(t.prototype,n),d&&h(t,d),b}();t.default=b},function(e,t,n){"use strict";n.r(t),t.default={bind:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbind:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCheckoutAri=t.setLocalStorage=t.moneyWithCents=t.isValidItems=t.indexOf=t.get=t.findIndex=t.childWindowParams=t.applyLigatures=t.addInsertListener=void 0;t.indexOf=function(e,t){for(var n=0;void 0!==e[n];){if(e[n]===t)return n;n+=1}return-1};t.moneyWithCents=function(e){return(parseInt(e,10)/100).toFixed(2)};t.setLocalStorage=function(e,t){return localStorage.setItem(e,JSON.stringify(t))};t.childWindowParams=function(e){var t=void 0!==window.screenX?window.screenX:window.screenLeft,n=void 0!==window.screenY?window.screenY:window.screenTop,r=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,o=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,i=Math.max(t,0),a=.8*o,s=parseInt(e,10),u=parseInt(i+(r-s)/2,10),c=parseInt(n+(o-a)/2.5,10);return"width=".concat(s,", height=").concat(a,", left=").concat(u,", top=").concat(c,", toolbar=0, scrollbars=1")};t.addInsertListener=function(e,t){var n=function(n){n.animationName===e&&t(n.target)};document.addEventListener&&(document.addEventListener("animationstart",n,!1),document.addEventListener("MSAnimationStart",n,!1),document.addEventListener("webkitAnimationStart",n,!1))};t.applyLigatures=function(e,t){if(e){var n=e.innerText,r=e.innerHTML,o=t[n||r];o&&e.classList.add("__ligature__".concat(o,"__")),e.classList.add("__processed")}};t.validateCheckoutAri=function(e){return!(!e||16!==e.length||null!==e.match(/[\Wa-z]{1,}/))};t.isValidItems=function(e){return!(!Array.isArray(e)||!e.length)&&e.every(function(e){return e.displayName&&e.sku&&e.unitPrice&&e.qty})};t.get=function e(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t&&t[n]&&(o.length?e.apply(void 0,[t[n]].concat(o)):t[n])};t.findIndex=function(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n))return n;return-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(120)),o=u(n(24)),i=u(n(32)),a=u(n(8)),s=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,a.default);var t,n,s,u=d(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this)).environmentPaths=null,e.getEnvironmentPaths()&&e.setEnvironmentPaths(e.getEnvironmentPaths()),e}return t=c,(n=[{key:"checkEnvironmentPaths",value:function(){return!!this.getEnvironmentPaths()}},{key:"concatUrlFragments",value:function(e){return e.filter(function(e){return!!e}).reduce(function(e,t){return e.concat([t.replace(/\/$/,"")])},[]).join("/")}},{key:"getPlatformPath",value:function(e,t){return this.concatUrlFragments([e,t||"","platform"])}},{key:"getAssetsRootPath",value:function(e,t,n,r){return this.concatUrlFragments([e,n||"","products",r||"","affirmjs",t,"dist"])}},{key:"getUserEnvironmentPaths",value:function(){var e=o.default.buildTarget,t=o.default.hash,n=null;if("test"===o.default.target||"dev"===e)return n;n=r.default[i.default.getCountryEnvironment(e)];var a=this.getAssetsRootPath(n.cdn_root,"",i.default.getCountryCodeAlpha2(),t);return n.tracking_endpoint=n.affirm_tracking_endpoint,n.platform_cdn_url=this.getPlatformPath(n.cdn_root,""),n.assets_root="".concat(a,"/"),n.promos_url_prefix="".concat(n.platform_cdn_url,"/").concat(n.promos_url_path),n}},{key:"getEnvironmentPaths",value:function(){var e={api_url:o.default.api_url,api_version:o.default.api_version,assets_root:o.default.assets_root,frontend_url:o.default.frontend_url,minified_url:o.default.minified_url,payments_url_base:o.default.payments_url_base,promos_url_prefix:o.default.promos_url_prefix,tracking_endpoint:o.default.tracking_endpoint,cdn_assets_root:o.default.cdn_assets_root,cdn_root:o.default.cdn_root,elastic_cloud_apm_endpoint:o.default.elastic_cloud_apm_endpoint};return this.environmentPaths||this.getUserEnvironmentPaths()||e}},{key:"setEnvironmentPaths",value:function(e){this.environmentPaths=e}}])&&l(t.prototype,n),s&&l(t,s),c}()),m=(0,s.default)(h,["checkEnvironmentPaths","getEnvironmentPaths","off","on","setEnvironmentPaths","trigger"]);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(8)),o=s(n(7)),i=s(n(0)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,r.default);var t,n,o,s=f(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this)).data={},e}return t=u,(n=[{key:"get",value:function(){return this.data}},{key:"resetPrequal",value:function(){this.data={},this.trigger("reset")}},{key:"set",value:function(e){i.default.throwErrIfNotObject(e),this.data=e,a.default.trackActionLog("Prequal Config Set",{keys:Object.keys(this.data).join(",")}),this.trigger("set",this.data)}},{key:"updatePrequal",value:function(e){i.default.throwErrIfNotObject(e),this.data=Object.assign(this.data,e),this.trigger("update",this.data)}}])&&c(t.prototype,n),o&&c(t,o),u}()),h=(0,o.default)(p,["get","resetPrequal","set","updatePrequal"]);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=A(n(2)),o=n(27),i=A(n(38)),a=A(n(3)),s=A(n(6)),u=n(9),c=A(n(21)),l=A(n(11)),f=n(23),d=A(n(12)),p=A(n(20)),h=A(n(0)),m=A(n(1)),g=A(n(10)),y=A(n(40)),v=A(n(13));function A(e){return e&&e.__esModule?e:{default:e}}function b(e){"@babel/helpers - typeof";return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;return O(e)}(this,n)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=h.default.getFrontendUrl(s.default.resource_urls.prequal_backend_route),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(b,d.default);var t,n,s,A=k(b);function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);var r=Object.assign({mode:t.mode||d.default.MODE_MODAL},t);return(e=A.call(this,r,Object.assign({name:"prequal-application",popupCss:{width:"500px"},src:b.constructURL(t.urlParams)},n))).isPrequalComplete=!1,(0,g.default)(O(e),"postMessageListener"),e.on("prequalFinished",function(e){var n=t.onSuccess;"function"==typeof n&&n(e)}),e}return t=b,s=[{key:"APP_NAME",get:function(){return"Affirm Prequal"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Select continue, or turn off your pop-up blocker."}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_PREQUAL_MESSAGES"}},{key:"generatePromoPrequalConfig",value:function(e,t,n,o){return _({},e,{urlParams:{device_id:r.default.localDeviceId,merchant_name:e.merchant_name,promo_external_id:t.promoId,referring_url:encodeURIComponent(o),unit_price:t.amount,webhook_session_id:e.webhook_session_id||h.default.getWebhookSessionId(),use_promo:e.use_promo||"",page_type:t.page_type,cohort_id:t.cohort_id,use_adaptive:t.use_adaptive||null,inline:t.inline||null,locale:c.default.getLocale()||null},mode:n,page_type:"home"})}},{key:"constructURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_({public_api_key:a.default.getPublicApiKey()},e);return"".concat(I,"?").concat(b.urlParamsToQueryString(t))}},{key:"urlParamsToQueryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,y.default)(e,function(e){return null!==e&&void 0!==e});return null!==t&&void 0!==t&&t.items&&(t.items=(0,u.getItemsInput)(t.items)),e&&Object.keys(t).length?"".concat(Object.keys(t).map(function(e){return t[e]?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])):""}).join("&")):""}}],(n=[{key:"configPayload",get:function(){var e=this.config,t=e.merchant||{};return t.name=e.merchant_name,t.public_api_key=a.default.getPublicApiKey(),Object.assign({id:this.currentPostMessageId||b.POST_MESSAGE_ID,merchant:t,meta:{__affirm_tracking_uuid:r.default.localDeviceId,user_timezone:h.default.getUserTimeZone()},referring_url:window.location.href},this.config)}},{key:"defaultOptions",get:function(){var e=P(S(b.prototype),"defaultOptions",this);return e.resizeHeight=!0,e}},{key:"close",value:function(e){var t=this;v.default.unbind(window,"message",this.postMessageListener),P(S(b.prototype),"close",this).call(this,function(){t.isPrequalComplete||t.unload(),l.default.trigger("prequal:close"),"function"==typeof e&&e()})}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.default.bind(window,"message",this.postMessageListener),d.default.determineMode(n.mode||this.config.mode||d.default.MODE_MODAL).then(function(r){(0,u.getFeatureFlagStatus)(u.featureFlagNames.prequal_popup_deprecation).then(function(o){var i=r;if(o===u.FEATURE_FLAG_STATUS.FEATURE_ON&&r===d.default.MODE_POPUP&&(i=d.default.MODE_MODAL),i===d.default.MODE_UNSUPPORTED)return(0,f.showError)({body:"Affirm Prequal requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),void("function"==typeof e&&e());t.config=Object.assign(t.config,n,{mode:i}),i===d.default.MODE_MODAL?m.default.trackImpression("Prequal Modal Page"):i===b.MODE_POPUP&&m.default.trackImpression("Prequal Popup Page"),P(S(b.prototype),"open",t).call(t,e)})})}},{key:"postMessageListener",value:function(e){var t=p.default.parsePostMessageData(e);if(t&&t.id===b.POST_MESSAGE_ID)switch(t.name){case"AFFIRM_PREQUAL_FINISHED":m.default.trackActionLog("Prequal Finished"),this.isPrequalComplete=!0,l.default.trigger("prequal:complete",t.data),this.trigger("prequalFinished",t.data);break;case"AFFIRM_PREQUAL_SIGNED_OUT":this.trigger("prequalSignedOut");break;case"AFFIRM_PREQUAL_CLOSE":this.close(),i.default.open(o.Apps.toast,{forceShow:!0,onSuccess:!0});break;case"AFFIRM_PREQUAL_INIT":this.clearTimers(!0)}}},{key:"unload",value:function(){P(S(b.prototype),"unload",this).call(this),v.default.unbind(window,"message",this.postMessageListener)}}])&&w(t.prototype,n),s&&w(t,s),b}();t.default=T},function(e,t){function n(e){var t=e.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&parseInt(t[1],10)}function r(e){var t=e.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return{major:t&&parseInt(t[1],10),minor:t&&parseInt(t[2],10)}}function o(e){var t=e.match(/Chrom[^ \/]+\/(\d+)[\.\d]/);return t&&parseInt(t[1],10)}function i(e){return Boolean(e.match(/Chrom(e|ium)/))}e.exports={iosMajorVersion:n,isIosMajorVersion:function(e,t){return n(e)===t},macosxVersion:r,isMacosxVersion:function(e,t,n){void 0===n&&(n=null);var o=r(e),i=o.major,a=o.minor;return n?i===t&&a===n:i===t},chromeMajorVersion:o,isChromeMajorVersion:function(e,t){return o(e)===t},isChromiumBased:i,isSafariBased:function(e){return!i(e)&&Boolean(e.match(/Version\/.* Safari\//))},isMacEmbeddedBrowser:function(e){return Boolean(e.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\)+ AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPECIAL_SPLITTING_PUBLIC_API_KEYS=t.ADAPTIVE_CHECKOUT_PUBLIC_API_KEYS=t.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT=void 0;t.ADAPTIVE_CHECKOUT_PUBLIC_API_KEYS=["27GDB3KH87ZPDICH","JWT2LAPPJQTDK2SW","FDZPOIM536QEZPP5","SXO2XZQ1OQ4KFWZC","6UD7GEK4U046B61J","QN6SCT3JOMWTJ90E","FFPUYR6P1654ODTA","DYNB1M9QLFHS47AR","VZ60GS0BX7RPPVWN","TNF5NU0UBXCB9XD5","H9DOZHJKDAZK68WU","Y7YCRFSNMXGWVY2B","PIH7A1LKPA9ZAU24","V49TV5P48A687DU7","HXF83ZEBF449AP02","AK2DBZ68BRNLSZ55","J64NYL3G1DKJKB1V","4UDO5IUJVOMQ5PHD","N6HM56EKFFUEFTT0","PUKW23HVGVQF1XJN","YJM31BCW00Q58S3V","DZK2I17PYFDUIO1L","6HDNQ9YCNUNWNETV","LVEC84XYH1TYGG30","7SXFPNH8IFLCFIJ4","62ZNI4BHHBCQL1FA","QM417IPHRV7F0TT6","YJ978EA9EIHRI7CN","A85J1VARSMJ4LB32","4IFF0LPB412QVJ6X","3YXHZXT8GGPGRIUH","D2FYAAX8YTGWLYZB","OFADH1CHSEQIDHDP","94NCH5PAXPFSDW6I","EAXE45QORTXPR8HY","5HQ4NWB4X643A4GM","BF1E98V0I4ZFN4LF","PTCKDSV4A44PRCP8","D50TRX6V0QC4GUQC","LC8L7YAYS7LJH37I","8JXGSBOZCN9DKILG","6JUZU4FBFQTV1ZCD","WMBM5MOFR503HKQJ","HZ9STG0UUTT5V84S","G6KDN1FTYUWEW1OT","YATW0CPO4ZX2PC0Z","LV2522QG9NXCFS23","A3R18WNBS6DVDZS8","R4DN4G53PT26BCMJ","RQ3WYPYYIFM1SRDR","K1TCS68DO4W0BA0Y","MFA17HWWXAUEV9C0","DD1IFOA504CED288","GTYB1LCHAZZKE6DR","NFEN6DK8ICWYHRIZ","PreSeededApiKeyDirect"];t.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT={NOT_IN_ADAPTIVE_CHECKOUT_EXPERIMENT:"not_in_adaptive_checkout_experiment",IN_ADAPTIVE_CHECKOUT_TREATMENT:"in_adaptive_checkout_treatment",NOT_IN_ADAPTIVE_CHECKOUT_TREATMENT:"not_in_adaptive_checkout_treatment",EXCEPTION:"exception"};t.SPECIAL_SPLITTING_PUBLIC_API_KEYS=["0IG46T5QMF0HQCVJ","ZX67WEM48P0CITDQ","NP70PDQCUSKRTDUV","WPNP0URIGLIVJQWH","PreSeededApiKeyAdaptiveIntl2","PreSeededApiKeyDirect","NK1IPXSWACQWMA66","48GVRHRRAAAXVWXR","IG55M62K4XPNNC8L","QGWQQRVF4VCMG61M","JDSM0ZS04RXMJC9M"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(15)),o=c(n(8)),i=c(n(0)),a=c(n(1)),s=c(n(10)),u=c(n(13));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=r.default.getEnvironmentPaths(),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,o.default);var t,n,r,c=h(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this,t.name)).options=t,e.generateFrame(),(0,s.default)(m(e),"handlePostMessage","handleResizeEvent"),e.on("resize",e.handleResizeEvent),u.default.bind(window,"message",e.handlePostMessage),window["_affirm_post_message_".concat(e.name)]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.trigger(t,n)},e}return t=l,r=[{key:"APP_NAME",get:function(){return"Affirm"}},{key:"IFRAME_CLASSNAME",get:function(){return"affirm-sandbox-iframe"}},{key:"RESIZE_INTERVAL",get:function(){return 500}},{key:"SANDBOX_CONTAINER_CLASSNAME",get:function(){return"affirm-sandbox-container"}},{key:"SANDBOX_PERMISSIONS",get:function(){return{"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-same-origin":!0,"allow-scripts":!0}}},{key:"insertResizeListener",value:function(){return["<scr","ipt"," defer='defer'>","(function(){","function getHeight(){","var body = document.body, html = document.documentElement,","max_height = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );","return body.scrollHeight;","}","var _current_height = 0;","setInterval(function(){","if(_current_height != getHeight()){","trigger('resize', {height: getHeight()});","_current_height = getHeight();","}","}, ".concat(l.RESIZE_INTERVAL,");"),"}());","</scr","ipt>"].join("")}},{key:"postMessageHasValidOrigin",value:function(e){return e.origin===y.frontend_url.replace(/\/$/,"")}},{key:"parsePostMessageData",value:function(e){var t=null;if(l.postMessageHasValidOrigin(e)&&"string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){}return t}}],(n=[{key:"generateFrame",value:function(){var e=this;this.cssOptions=i.default.extend({overflow:"hidden",width:"100%",height:"100%"},this.options.css||{});var t=document.createElement("div");t.className=l.SANDBOX_CONTAINER_CLASSNAME,this.options.iframe_container_css&&i.default.setElementStyle(t,this.options.iframe_container_css);var n=document.createElement("iframe");return n.className=l.IFRAME_CLASSNAME,i.default.setElementAttrs(n,{id:this.name,width:this.cssOptions.width,height:this.cssOptions.height,frameborder:0,allowScroll:"no",allowTransparency:!0,sandbox:Object.keys(this.constructor.SANDBOX_PERMISSIONS||{}).join(" "),title:this.constructor.APP_NAME}),i.default.isObject(this.cssOptions)&&Object.keys(this.cssOptions).forEach(function(t){n.style[t]=e.cssOptions[t]}),this.defaultContainerDisplayStyle=(null!=this.options.iframe_container_css?this.options.iframe_container_css.display:void 0)||"block",t.style.display="none",this.$iframe=n,this.$iframe_container=t,this.orientation=window.orientation,this.bind("ready",function(){return e.trigger("ready")}),this.$iframe_container}},{key:"handlePostMessage",value:function(e){var t,n=e||{data:""};try{t=JSON.parse(n.data)}catch(e){t={}}var r=new RegExp("".concat(this.name,"_"));if(t&&t.name&&t.name.match(r)){var o=t.name.replace(r,"").toLowerCase(),i=t.data||{};this.trigger(o,i)}}},{key:"regenerateIfAlreadyAppended",value:function(){if(!this.isOrphan()&&this.$iframe_container.parentNode){var e=this.$iframe_container.style.display;this.$iframe_container.parentNode.removeChild(this.$iframe_container),this.generateFrame(),this.$iframe_container.style.display=e}}},{key:"appendTo",value:function(e){var t=i.default.getElementById(e);return this.regenerateIfAlreadyAppended(),this.$iframe_container.appendChild(this.$iframe),t&&t.appendChild&&t.appendChild(this.$iframe_container),this}},{key:"content",value:function(e){if(this.isOrphan())return this.logError("Tried to set content on orphaned iframe",{content:e}),this;var t=this.$iframe.contentWindow.document;return this.write(e),this.write(this.insertPostMessageSender()),this.write(this.insertPostMessageReceiver()),this.write(l.insertResizeListener()),t.close(),this}},{key:"write",value:function(e){try{this.$iframe.contentWindow.document.write(e)}catch(e){}}},{key:"insertPostMessageSender",value:function(){return["<scr","ipt"," defer='defer'>","window.trigger = function(name,data){","try{","_name = '".concat(this.name,"_' + name;"),"_d = JSON.stringify({ name: _name, data: data });","window.parent.postMessage( _d, '".concat(document.location.origin,"' );"),"} catch(e) {","window.parent._affirm_post_message_".concat(this.name,"(name, data);"),"}","}","</scr","ipt>"].join("")}},{key:"insertPostMessageReceiver",value:function(){return["<scr","ipt"," defer='defer'>","if(window.addEventListener){","_action = 'addEventListener';","_event  = 'message';","} else {","_action = 'attachEvent';","_event  = 'onmessage';","}","window[_action](_event, function(ev){","var _event = ev || {data:''},","_namespace_regex = new RegExp('".concat(this.name,"_');"),"try{","_data = JSON.parse(_event.data);","} catch (e){","_data = {};","}","if(_data && _data.name && _data.name.match(_namespace_regex)){","var _n = _data.name.replace(_namespace_regex, '').toLowerCase();","var _d = _data.data || {};","try{","if (window.affirm_events && window.affirm_events[_n]) {","window.affirm_events[_n].call(window,_d);","}","}catch(e){}","}","});","</scr","ipt>"].join("")}},{key:"handleResizeEvent",value:function(e,t){var n=this,r=t||e||{},o=this.orientation;if(this.orientation=window.orientation,window.orientation!==o&&(i.default.swapStyle(this.$iframe_container,"top","bottom"),i.default.swapStyle(this.$iframe_container,"left","right"),this.$iframe_container.style.width)){var a=this.$iframe_container.style.width;this.$iframe_container.style.width="",window.requestAnimationFrame(function(){n.$iframe_container.style.width=a})}r.height&&this.$iframe.scrollHeight<r.height&&(this.$iframe.style.height=r.height+100)}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.data||t;d(g(l.prototype),"trigger",this).call(this,e,r);var o={name:"".concat(this.name,"_").concat(e),data:r};try{o=JSON.stringify(o)}catch(e){o=""}var s=i.default.getDomain(this.src())!==i.default.getDomain(window.location.href);if(n&&(s||!this.isOrphan())){var u=this.getTargetWindow();u?u.postMessage(o,this.origin()):a.default.trackActionLog("Post message error: target window not found on event trigger")}}},{key:"origin",value:function(){return(this.src()||document.location.href).split("/").slice(0,3).join("/")}},{key:"isOrphan",value:function(){try{return!(this.$iframe&&this.$iframe.contentWindow&&this.$iframe.contentWindow.document)}catch(e){return!this.$iframe.parentNode}}},{key:"bind",value:function(e,t){u.default.bind(this.$iframe,e,t)}},{key:"unbind",value:function(e,t){u.default.unbind(this.$iframe(e,t))}},{key:"src",value:function(e){if(!e)try{return this.$iframe.getAttribute("src")}catch(e){return this.$iframe.src}return i.default.setElementAttrs(this.$iframe,{src:e}),this}},{key:"hide",value:function(){return this.trigger("hiding",{},!1),this.$iframe_container.style.display="none",this}},{key:"show",value:function(){return this.activeElementBeforeShown=document.activeElement,this.trigger("showing",{},!1),this.$iframe_container.style.display=this.defaultContainerDisplayStyle,this}},{key:"remove",value:function(){return u.default.unbind(window,"message",this.handlePostMessage),this.$iframe_container.parentNode&&this.$iframe_container.parentNode.removeChild(this.$iframe_container),this.trigger("remove",{},!1),this}},{key:"getTargetWindow",value:function(){return this.$iframe.contentWindow}}])&&f(t.prototype,n),r&&f(t,r),l}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),o=a(n(8)),i=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,o.default);var t,n,i,a=l(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this)).locale=null,e.getLocale()&&e.setLocale(e.getLocale()),e}return t=s,(n=[{key:"checkLocale",value:function(){return!!this.getLocale()}},{key:"getUserLocale",value:function(){switch(r.default.getCountryCode()){case"CA":return"en_CA";case"AU":return"en_AU";case"CAN":return"en_CA";case"AUS":return"en_AU";case"US":default:return"en_US"}}},{key:"getLocale",value:function(){return this.locale||window._affirm_config&&window._affirm_config.locale||this.getUserLocale()||"en_US"}},{key:"setLocale",value:function(e){this.locale=e}}])&&u(t.prototype,n),i&&u(t,i),s}()),p=(0,i.default)(d,["checkLocale","getLocale","off","on","setLocale","trigger"]);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(3)),o=_(n(59)),i=_(n(41)),a=_(n(6)),s=n(19),u=_(n(21)),c=_(n(16)),l=_(n(25)),f=_(n(11)),d=n(68),p=_(n(12)),h=_(n(39)),m=_(n(17)),g=_(n(69)),y=n(14),v=_(n(0)),A=_(n(1)),b=n(9);function _(e){return e&&e.__esModule?e:{default:e}}function w(e){"@babel/helpers - typeof";return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I="Subject to credit check and approval. Down payment may be required. For purchases under $100, limited payment options are available. Estimated payment amount excludes taxes and shipping fees. Affirm loans are made by Cross River Bank, a New Jersey State Chartered Commercial Bank, Member FDIC. See www.affirm.com/faqs for details.",T="Make easy monthly payments over 3, 6, or 12 months",C="Make easy monthly payments for your purchase",M="Rates from 10&ndash;30% APR.",R="Rates from 0&ndash;30% APR.",x="${payment}/mo based on a purchase price of ${amount} at 0% APR for {term_length} months. Rates from 0&ndash;30% APR.",j="${payment}/mo based on a purchase price of ${amount} at 10% APR for {term_length} months. Rates from 10&ndash;30% APR.",D="XXXXXXXXXXXXXXX",N={quick_and_easy:{icon:"quick",header:"Quick and easy",body:"Enter a few pieces of information for a real-time decision. Checking your eligibility won't affect your credit score."},no_hidden_fees:{icon:"transparent",header:"No hidden fees",body:"Know up front exactly what you'll owe, with no hidden costs and no surprises."},select_affirm_at_checkout:{icon:"bag",header:"Just select Affirm at checkout",body:"Just a few pieces of information is all it takes to get a real-time decision."},make_interest_free_payments:{icon:"loan",header:"Pay monthly without interest",body:"Your purchase is split up into three payments. There’s no interest—and never any hidden fees!"}},L="Multicolor Affirm Logo cta",U="Multicolor Affirm Logo cta - just select Affirm at checkout",F="Product Page Promo Modal",B="Site Wide Promo Modal",H={contentSpace1:"quick_and_easy",contentSpace2:"no_hidden_fees",apr:.1,termLength:12,footer:I,styles:{}},W={contentSpace1:"quick_and_easy",contentSpace2:"no_hidden_fees",footer:I,styles:{}},V=window.devicePixelRatio>1,q={},K={};function G(e,t,n){var r="";return e||(r+="affirm-no-hero-image "),t||(r+="affirm-merchant-no-logo "),"fast"===n&&(r+="affirm_fast "),r}function Q(e,t){var n=r.default.getPublicApiKey();if(!t)return"product_page_modal"===e?i.default.getPromoConfig(n,e,t,H):i.default.getPromoConfig(n,e,t,W);if(g.default.isPromoSet(t))return"product_page_modal"===e?g.default.getConfig(t,"productPageModal"):g.default.getConfig(t,"siteWideModal");var o="affirm-modal:".concat(n,":").concat(e,":").concat(t);if(!q[o]){var s="".concat(a.default.promos_url_prefix).concat(e,"/").concat(n,"/").concat(t,".json");q[o]=fetch(s).then(function(n){return n.json().then(function(e){return(0,y.setLocalStorage)(o,e),e}).catch(function(){return console.error("Error while retrieving the modal config ".concat(e," ").concat(t,". Returning Default")),Q(e)})})}return q[o]}function Y(e,t){var a=n(42),l=t.modalId,f=t.promoId,d=t.type,h=t.amount&&parseFloat(t.amount);"product_page_modal"===d?A.default.trackUserInteraction(F,A.default.USER_ACTIONS.CLICK):A.default.trackUserInteraction(B,A.default.USER_ACTIONS.CLICK);var y=null;(y=f||l)===D&&(y=void 0);var _=r.default.getPublicApiKey();return i.default.useV2Api(_,y)?i.default.getPromoResponse(_,{amount:h,pageType:t.pageType,promoId:y},i.default.TEMPLATE_FIELD.modal).then(function(n){A.default.trackEvent("LearnMoreWidget: openModal",{promoResponse:n});return-1!==["J5E24QQQJ9ZL9LMD","8F5E01N5KIO60DJ6","ZPQY8VGE0U8Y6WP2","5X8V8MQUX8VFYCME","D3ACIW1WYYJXNX1M"].indexOf(_)?new J({DOMNode:e,renderedPromo:n.promo}):o.default.getFinancingExperimentCohortId(_).then(function(e){return(0,b.getAdaptiveCheckoutExperiment)(!0).then(function(n){var r="".concat(d,"/").concat(y,"/").concat(h,"/").concat(t.pageType);K[r]||(K[r]=new m.default(m.default.generatePromoPrequalConfig(Object.assign(c.default.get(),{use_promo:!0}),{amount:h,cohort_id:e,page_type:t.pageType,promoId:y,use_adaptive:n.adaptiveCheckoutExperimentResult===s.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.IN_ADAPTIVE_CHECKOUT_TREATMENT,locale:u.default.getLocale()||null},p.default.MODE_MODAL,window.location.href))),K[r].open()})})}):Q(d,y).then(function(e){var t=Object.assign({},e);if(t.promoId=y,h){var n,r,o;if(t.amount=h,t.termLengthIntervals&&(r=g.default.getTermLengthIntervalForAmount(t.termLengthIntervals,h)),r)n=r.apr,o=r.termLength;else n=t.apr,o=t.termLength;return a.getEstimate({apr:n,amount:h,months:o}).then(function(e){var r={};return v.default.extend(r,t),r.amount=h,r.apr=n,r.months=o,r.payment=e.payment,r.termLength=e.months||o,r})}return t}).catch(function(){return Q(d).then(function(e){if(h){var t=e.apr,n=e.termLength;return a.getEstimate({apr:t,amount:h,months:n}).then(function(r){var o={};return v.default.extend(o,e),o.payment=r.payment,o.amount=h,o.months=n,o.termLength=r.months||n,o.apr=t,o})}return e})}).then(function(n){var r,o=Object.assign({},n);if(o.promo_prequal_enabled){var i="".concat(d,"/").concat(o.promoId,"/").concat(h,"/").concat(t.pageType);K[i]||(g.default.isPromoSet(o.promoId)||(o.promoId=null),r=new m.default(m.default.generatePromoPrequalConfig(Object.assign(c.default.get(),{use_promo:!0}),o,p.default.MODE_MODAL,window.location.href)),K[i]=r),K[i].open()}else r=new J({amount:o.amount,apr:o.apr,config:o,DOMNode:e,months:o.months,payment:o.payment,termLength:o.termLength});return r})}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,h.default);var t,n,r,o=O(i);function i(){var e,t,n,r,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var u=s.DOMNode;delete s.DOMNode;var c=V?"2x":"",p="";if(s.renderedPromo){(n=s.renderedPromo.config.images["hero".concat(c)])&&(n="background-image: url('".concat(n,"')")),r=s.renderedPromo.config.images["logo".concat(c)],t="";var h=s.renderedPromo.config.promo_style;"fast"!==h&&(A.default.trackImpression(L),t=s.renderedPromo.button.replace(/affirm/gi,'<span class="__affirm-logo __affirm-logo-primary __ligature__affirm_full_logo__ __processed">Affirm</span>')),e=o.call(this,v.default.extend({name:"affirm_learn_more_splitpay",template:"templates/learn_more_split_pay.html",template_args:{color:s.renderedPromo.config.styles.color||"auto",copy:{tagline:s.renderedPromo.headline,promo:s.renderedPromo.tagline,cta:t,section_1:i.getSection(s.renderedPromo.content_space_1),section_2:i.getSection(s.renderedPromo.content_space_2)},fontFamily:s.renderedPromo.config.styles.fontFamily||"inherit",footer:s.renderedPromo.footer,hero_image:n,logo_image:r,modal_class:G(n,r,h)}},s))}else{var m,g,b,_=!!s.amount;m=_?H:W,a={},v.default.extend(a,m),v.default.extend(a,s.config),v.default.isMobile()&&s.source&&("function"==typeof s.source.trigger&&s.source.trigger("loading"),null!=s.source.product_key&&l.default.setProduct(s.source.product_key)),n=a["heroImage".concat(c)],r=a["logo".concat(c)];var w=null!=s.apr&&0===parseFloat(s.apr);if(_){t="",b=a.pricingTemplate;var E=a&&0===a.apr&&3===a.termLength&&a.termLengthIntervals&&1===a.termLengthIntervals.length;E?p+="affirm_fast ":(A.default.trackImpression(U),t='Just select <span class="__affirm-logo __affirm-logo-primary __ligature__affirm_full_logo__ __processed">Affirm</span> at checkout.'),b||E||(b=w?x:j),b=(b=(b=(b=b.replace(/{payment}/gi,"$".concat((0,y.moneyWithCents)(s.payment)))).replace(/{amount}/gi,"$".concat((0,y.moneyWithCents)(s.amount)))).replace(/{apr}/gi,parseInt(100*s.apr,10))).replace(/{term_length}/gi,s.termLength),g=a.headlineTemplate}else{(b=a.pricing)||(b=w?R:M),g=a.headline}if(!g)g=!s.termLength||[3,6,12].indexOf(s.termLength)>-1?T:C;n&&(n="background-image: url('".concat(n,"')")),p+=G(n,r),e=o.call(this,v.default.extend({name:"affirm_learn_more_splitpay",template:"templates/learn_more_split_pay.html",template_args:{color:a.styles.color||"auto",copy:{tagline:g,promo:b,cta:t,section_1:i.getSection(a.contentSpace1),section_2:i.getSection(a.contentSpace2)},fontFamily:a.styles.fontFamily||"inherit",footer:a.footer,hero_image:n,logo_image:r,modal_class:p}},s))}e.on("continue",function(){return e.trigger("close")});var k=!1;return a=(0,d.findAffirmConfig)(u),e.on("close",function(){k||((a=(0,d.findAffirmConfig)(u))&&"function"==typeof a.onCloseModal&&a.onCloseModal(),k=!0,f.default.trigger("learnMore:close"))}),e.open(a?a.onOpenModal:void 0),s.DOMNode=u,P(e)}return t=i,r=[{key:"APP_NAME",get:function(){return"Learn More About Affirm"}},{key:"getSection",value:function(e){return N[e]}},{key:"openModal",value:function(e,t){return Y(e,t)}},{key:"setupSiteElements",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,o=0;o<r;o+=1){var i=(t=e[o]).getAttribute("data-modal-id"),a=t.getAttribute("data-page-type")||"product",s=t.getAttribute("data-promo-id");t.getAttribute("data-amount")&&console&&console.error("Affirm: data-amount not valid in site modals. Element",t),t.style.cursor||(t.style.cursor="pointer");var u={modalId:i,pageType:a,promoId:s,type:"site_wide_modal"};(0,d.setAffirmConfig)(t,u);var c=s||i;c?A.default.trackImpression("Custom ".concat(B)):A.default.trackImpression("Default ".concat(B)),g.default.isPromoSet(c)&&A.default.trackImpression("Promo Set Promo Modal");var l=t.innerText||t.innerHTML;t.setAttribute("aria-label","".concat(l," - Affirm Financing (opens in modal)")),t.onclick=function(e,t){return function(){return Y(e,t)}}(t,u),n.trackPromos&&A.default.trackEvent("Promo: Learn More Click Attached",{elapsedTime:Date.now()-n.promoTimer,version:"site"})}}},{key:"setupProductElements",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,o=0;o<r;o+=1){var i=(t=e[o]).getAttribute("data-amount"),a=t.getAttribute("data-modal-id"),s=t.getAttribute("data-page-type"),u=t.getAttribute("data-promo-id");console&&(i||console.error("Affirm: data-amount attribute is required in product modals",t),i<5e3&&console.error("Affirm: data-amount is lower than the minimum ($50)."),i>175e4&&console.error("Affirm: data-amount is higher than the maximum ($17500).")),t.style.cursor||(t.style.cursor="pointer");var c={amount:i,modalId:a,pageType:s,promoId:u,type:"product_page_modal"};(0,d.setAffirmConfig)(t,c);var l=u||a;l?A.default.trackImpression("Custom ".concat(F)):A.default.trackImpression("Default ".concat(F)),g.default.isPromoSet(l)&&A.default.trackImpression("Promo Set Promo Modal");var f=t.innerText||t.innerHTML;t.setAttribute("aria-label","".concat(f," - Affirm Financing (opens in modal)")),t.onclick=function(e,t){return function(){return Y(e,t)}}(t,c),n.trackPromos&&A.default.trackEvent("Promo: Learn More Click Attached",{elapsedTime:Date.now()-n.promoTimer,version:"product"})}}}],(n=null)&&E(t.prototype,n),r&&E(t,r),i}();t.default=J},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorModalWidget=void 0,t.showError=v;var r=l(n(6)),o=l(n(8)),i=l(n(55)),a=l(n(1)),s=l(n(0)),u=l(n(10)),c=l(n(13));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(!s.default.sniffer.cors||!s.default.sniffer.JSON){var t=s.default.extend({body:"If you continue to have trouble, please contact us at help@affirm.com.",title:"We encountered a problem with your checkout."},e);return alert("".concat(t.title,"\n\n").concat(t.body)),v.trigger("close")}var n=new A(e);return n.open(),n}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(f,i.default);var t,n,o,l=m(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var n=s.default.extend({body:"If you continue to have trouble, please contact us at help@affirm.com.",merchantName:r.default&&r.default.merchant||"the Merchant",title:"We encountered a problem with your checkout."},t),o={name:"affirm-error-modal",src:"".concat(r.default.assets_root,"error.html?").concat(s.default.param(n,!1))};return t.container&&t.iframe_container_css&&(o.container=t.container,o.iframe_container_css=t.iframe_container_css),(e=l.call(this,o)).on("all",function(e,t){return v.trigger(t,e,!1)}),(0,u.default)(g(e),"postMessageListener"),c.default.bind(window,"message",e.postMessageListener),e}return t=f,o=[{key:"APP_NAME",get:function(){return"Affirm Error"}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_ERROR_MESSAGES"}},{key:"POST_TRACKING_ID",get:function(){return"AFFIRM_TRACKING_EVENTS"}}],(n=[{key:"hide",value:function(){var e=this;p(y(f.prototype),"hide",this).call(this),this.trigger("close"),s.default.delay(function(){return e.remove()},300)}},{key:"postMessageListener",value:function(e){var t;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){}!t||t.id!==f.POST_MESSAGE_ID&&t.id!==f.POST_TRACKING_ID||(t.id===f.POST_TRACKING_ID&&("IMPRESSION"===t.type&&a.default.trackImpression(t.event),"CLICK"===t.type&&a.default.trackUserInteraction(t.event,a.default.USER_ACTIONS.CLICK)),"close"===t.name&&this.hide())}}])&&d(t.prototype,n),o&&d(t,o),f}();t.ErrorModalWidget=A,["on","off","trigger"].forEach(function(e){v[e]=o.default.prototype[e]})},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new(((r=n(115))&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(n(2)),o=v(n(3)),i=v(n(6)),a=v(n(15)),s=n(9),u=v(n(8)),c=v(n(34)),l=v(n(124)),f=v(n(36)),d=v(n(128)),p=v(n(132)),h=v(n(138)),m=v(n(12)),g=v(n(0)),y=v(n(1));function v(e){return e&&e.__esModule?e:{default:e}}function A(e){"@babel/helpers - typeof";return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=a.default.getEnvironmentPaths();function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E.set(e)}["on","off","trigger"].forEach(function(e){E[e]=u.default.prototype[e]}),g.default.extend(E,{add:function(){var e=this;this.data.items||(this.data.items={});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){[].concat(t).forEach(function(t){var n=t;["sku","unit_price"].forEach(function(e){if(null==n[e])throw"No ".concat(e," given for item")}),n.qty||(n.qty=1),["qty","unit_price"].forEach(function(e){if(n[e]=parseInt(n[e],10),"NaN"===n[e].toString())throw"item ".concat(e," must be an integer")}),e.data.items[n.sku]&&e.data.items[n.sku].sku===n.sku?e.data.items[n.sku].qty+=parseInt(n.qty,10):e.data.items[n.sku]=n})}),this},attr:function(e,t){if("items"===e)return t&&this.items()?(this.empty(),this.add(t)):this.items();if(["productKey","financial_product_key"].indexOf(e)>-1)return null!=t?this.setProduct(t):this.getProduct();if(["publicApiKey","public_api_key"].indexOf(e)>-1)return null!=t?o.default.setPublicApiKey(t):o.default.getPublicApiKey();var n,r;n=e.match(/^[^.]+(\.[^.]+)+$/)?e.split("."):e.match(/^[^[\]]+(\[[^[\]]+])+$/)?e.replace("][","]").replace(/]$/,"").split(/]|\[/):[e];for(var i=this.data;r=n.shift();){if(null!=t&&0===n.length)return i[r]=t,this;if(null==i[r]){if(null==t)return null;i[r]={}}i=i[r]}return null!=t?this:i},checkCaasParams:function(e){if("string"!=typeof e.merchant.caas)throw new Error("Caas parameter must be string.");if(!this.isModal(e))throw new Error("Credit as a Service is only compatible with mode modal.")},checkData:function(e,t){var n=this;if(Array.isArray(t)){var r=[];return t.forEach(function(e){r.push(n.checkData(null,e))}),r}if(g.default.isObject(t)){var o={};return Object.keys(t).forEach(function(e){o[e]=n.checkData(e,t[e])}),o}return"name"===e&&"string"==typeof t?{full:t}:void 0===t?null:t},cleanData:function(){return this.checkData(null,g.default.extend({},this.data))},close:function(){y.default.trackUserInteraction("Inline Checkout closed"),d.default.hide(this.inlineCheckoutWidget)},currentProduct:null,empty:function(){return this.data.items={},this},get:function(e){return this.attr(e)},getProduct:function(){return this.currentProduct},init:function(){var e,t=this;this.data={items:{}},this._data=this.data,e=window.affirm.checkout&&window.affirm.checkout._?window.affirm.checkout._:[],g.default.delay(function(){e.forEach(function(e){t[e[0]].apply(t,b(e[1]))}),t.ready()})},inline:function(e){var t=this;return(0,s.getInlineExperiment)(!0).then(function(n){if(n){null!=e.data&&t.set(e.data);var r={container:e.merchant&&e.merchant.inline_container,data:Object.assign({},t.payload())},o={checkoutData:{}};["total","financing_program","order_id"].forEach(function(e){t.data[e]&&(o.checkoutData[e]=t.data[e])}),y.default.trackImpression("Inline Checkout initiated",o),t.inlineCheckoutWidget?t.inlineCheckoutWidget.update(r):(t.inlineCheckoutWidget=new h.default(r),t.inlineCheckoutWidget.on("removed",function(){return delete t.inlineCheckoutWidget})),d.default.show(t.inlineCheckoutWidget)}})},isModal:function(e){return e&&e.metadata&&e.metadata.mode===m.default.MODE_MODAL},isReady:!1,items:function(){var e=this;this.data.items||(this.data.items={});var t=[];return g.default.isObject(this.data.items)&&Object.keys(this.data.items).forEach(function(n){t.push(e.data.items[n])}),t},open:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=t.checkout_data&&this.set(t.checkout_data),!(0,l.default)())return!1;var n=this.get("metadata")||{};t.merchant&&t.merchant.use_vcn||y.default.trackEvent("Checkout initiated",{widgetMode:n.mode});var r=g.default.extend({checkoutPayload:Object.assign({},this.payload()),mode:n.mode||"redirect"},this.cleanData());return t.onFail&&(r.onFail=t.onFail),t.onOpen&&(r.onOpen=t.onOpen),t.onSuccess&&(r.onSuccess=t.onSuccess),this.checkoutWidget||(t.modalContainerId?(r.checkoutPayload.metadata=Object.assign({external_modal:!0},r.checkoutPayload.metadata),this.checkoutWidget=new p.default(r,{container:document.getElementById(t.modalContainerId),iframe_container_css:{position:"relative",height:"100%"}})):this.checkoutWidget=new p.default(r),this.checkoutWidget.on("unload",function(){return delete e.checkoutWidget}),this.checkoutWidget.open()),this},openVcn:function(e){var t=g.default.extend(e,{checkout_data:{merchant:{use_vcn:!0}}}),n=t.checkout_data.metadata||{};if(y.default.trackEvent("VCN Checkout initiated",{widgetMode:n.mode}),n.mode=n.mode||p.default.MODE_POPUP,t.checkout_data.metadata=n,!t.success||!t.error)throw"success and error callbacks must be specified";t.onFail=t.error,t.onSuccess=t.success,t.onOpen=t.open,delete t.error,delete t.success,delete t.open,this.open(t)},payload:function(){var e=o.default.getPublicApiKey();return g.default.extend({api_version:w.api_version,bluecore_distinct_id:f.default.getDistinctID(e),bluecore_token:f.default.getToken(e),config:{financial_product_key:E.getProduct()},merchant:{public_api_key:e},meta:{__affirm_tracking_uuid:r.default.localDeviceId,release:null!=(null!=i.default?i.default.version:void 0),user_timezone:g.default.getUserTimeZone()}},this.cleanData())},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.open(g.default.extend(e,{redirect:!0}))},ready:function(e){e?this.isReady?"function"==typeof e&&e():this.on("ready",e):(this.trigger("ready"),this.isReady=!0)},reset:function(){return this.data={items:{}},this._data=this.data,this},set:function(e,t){var n=this;if(!t&&"object"===A(e)){var r=g.default.extend({},e);return["financial_product_key","items","productKey","public_api_key","publicApiKey"].forEach(function(e){r[e]&&(n.attr(e,r[e]),delete r[e])}),this.data=g.default.extend(this.data||{},r),this._data=this.data,p.default.isCaas(this.data)&&this.checkCaasParams(this.data),this.data.config&&this.data.config.public_api_key&&o.default.setPublicApiKey(this.data.config.public_api_key),this}return this.attr(e,t)},setProduct:function(e){var t=this;e!==this.currentProduct&&(this.currentProduct=e,this.trigger("product_changed",this.getProduct()),g.default.delay(function(){return c.default.get(t.currentProduct)})),y.default.tag({productKey:e})}}),E.open_vcn=E.openVcn,E.init();var k=E;t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(6)),o=s(n(0)),i=s(n(125)),a=s(n(28));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={},f={get:function(e,t){l[e]?o.default.delay(function(){return t.call(window,l[e])}):i.default.get(e).then(function(e,n){return t(n)})},put:function(e,t){l[e]=t},render:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t;o.ASSETS_ROOT||(o.ASSETS_ROOT=r.default.assets_root);var i=(0,a.default)(o),s=function(e){return i[e]||""},c=n.match(/{{! *([a-zA-Z0-9$_.]+) *}}/g);c&&c.forEach(function(t){var r=n.indexOf(t),o=u(t.match(/{{! *([a-zA-Z0-9$_.]+) *}}/),2);e=o[1];var i="{{/ *".concat(e," *}}"),a=n.match(i),c=a.index,l=s(e);n=l?(n=n.replace(t,"")).replace(a[0],""):n.substr(0,r)+n.substr(c+a[0].length)});var l=n.match(/{{ *([a-zA-Z0-9$_.]+) *}}/g);return l?(l.forEach(function(e){var t=u(e.match(/{{ *([a-zA-Z0-9$_.]+) *}}/),2)[1],r=s(t);n=n.replace(new RegExp(e),r)}),n):n}};t.default=f},function(e,t,n){"use strict";var r,o,i,a;n.r(t),n.d(t,"Selectors",function(){return r}),n.d(t,"Sources",function(){return o}),n.d(t,"Events",function(){return i}),n.d(t,"Apps",function(){return a}),function(e){e.wrapper="wrapper"}(r||(r={})),function(e){e.merchantConfig="merchantConfig",e.breakpoints="breakpoints"}(o||(o={})),function(e){e.style="style",e.dataRequest="dataRequest",e.dataResponse="dataResponse",e.open="open",e.close="close"}(i||(i={})),function(e){e.prequal="prequal",e.toast="toast"}(a||(a={}))},function(e,t){var n;n=function(e){var t;return null==e&&(e={}),t={},Object.keys(e).forEach(function(r){var o;if(e.hasOwnProperty(r))return Array.isArray(e[r])?t[r+"_json"]=JSON.stringify(e[r]):"object"==typeof e[r]&&null!==e[r]?(o=n(e[r]),Object.keys(o).forEach(function(e){return t[r+"."+e]=o[e]})):t[r]=e[r]}),t},e.exports=n},function(e,t,n){"use strict";function r(e){var t=e&&e.message&&"function"==typeof e.message.toLowerCase&&e.message.toLowerCase()||"";return t.indexOf("failed to fetch")>-1||t.indexOf("network request failed")>-1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return u});var r=n(18),o={};function i(e){window.Rollbar&&"function"==typeof window.Rollbar.warning&&window.Rollbar.warning(e)}function a(){var e=navigator.userAgent;return!(!Object(r.isIosMajorVersion)(e,12)&&!Object(r.isMacosxVersion)(e,10,14)||!Object(r.isSafariBased)(e)&&!Object(r.isMacEmbeddedBrowser)(e))||!!(Object(r.isChromiumBased)(e)&&Object(r.chromeMajorVersion)(e)<67)}function s(e,t,n,r,a){try{var s;if(n){var u=new Date(Date.now());u.setTime(u.getTime()+24*n*60*60*1e3),s=u.toUTCString()}else s="";o.buildCookie(e,t,r||"",s,a)}catch(e){i(e)}}function u(){try{o.buildCookie("cookietest","1","","","None");var e=-1!==document.cookie.indexOf("cookietest=");return o.buildCookie("cookietest","1","","Thu, 01 Jan 1970 00:00:01 GMT","None"),e}catch(e){return i(e),!1}}function c(e){try{var t=window.location.hostname.split(".");t.slice(0,-1).forEach(function(n,r){var i=t.slice(r).join(".");o.buildCookie(e,"",i,"Thu, 01 Jan 1970 00:00:01 GMT")})}catch(e){i(e)}}function l(e){try{for(var t=document.cookie.split(";"),n=0;n<t.length;n+=1){var r=t[n],o=new RegExp("s*"+e+"=(.*)").exec(r);if(o&&o.length>1)return o[1]}}catch(e){i(e)}return null}o.buildCookie=function(e,t,n,r,o){void 0===o&&(o="Lax");var i=r?"; expires="+r:"",s=n?"; domain="+n:"",u="https:"===location.protocol&&"None"===o?"; Secure":"",c=e+"="+t+i+s+"; path=/";a()?document.cookie=c:document.cookie=c+"; SameSite="+o+u},o.create=s,o.enabled=u,o.erase=c,o.read=l,o.upsert=function(e,t,n,r,o){try{l(e)&&c(e),s(e,t,n,r,o)}catch(e){i(e)}},o.isSameSiteNoneIncompatible=a,t.a=o},function(e,t,n){n(97);var r=n(98),o=n(5);e.exports={error:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),r.ieVersion()<=8?console.error(o.formatArgsAsString(e)):console.error.apply(console,e)},info:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),r.ieVersion()<=8?console.info(o.formatArgsAsString(e)):console.info.apply(console,e)},log:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),r.ieVersion()<=8?console.log(o.formatArgsAsString(e)):console.log.apply(console,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),o=a(n(24)),i=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,r.default);var t,n,i,a=l(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this)).countryCode=null,e.getCountryCode()&&e.setCountryCode(e.getCountryCode()),e}return t=s,i=[{key:"COUNTRY_CODES",get:function(){return{CAN:{countryCode:"CAN",prefix:"ca",alpha2:"CA"},AUS:{countryCode:"AUS",prefix:"au",alpha2:"AU"},USA:{countryCode:"USA",prefix:"",alpha2:"US"},CA:{countryCode:"CAN",prefix:"ca",alpha2:"CA"},AU:{countryCode:"AUS",prefix:"au",alpha2:"AU"},US:{countryCode:"USA",prefix:"",alpha2:"US"}}}}],(n=[{key:"checkCountryCode",value:function(){return!!this.getCountryCode()}},{key:"getCountryCode",value:function(){var e,t,n,r;return this.countryCode||(null===(e=window)||void 0===e?void 0:null===(t=e._affirm_config)||void 0===t?void 0:t.country_code)&&window._affirm_config.country_code||(null===(n=window)||void 0===n?void 0:null===(r=n.affirm_config)||void 0===r?void 0:r.country_code)&&window.affirm_config.country_code||o.default.country_code||"USA"}},{key:"getCountryPrefix",value:function(e){if(e&&e.match(/^au-|^ca-/i))return"";var t=this.getCountryCode();return Object.prototype.hasOwnProperty.call(s.COUNTRY_CODES,t)?s.COUNTRY_CODES[t].prefix:""}},{key:"getCountryCodeAlpha2",value:function(){var e=this.getCountryCode();return Object.prototype.hasOwnProperty.call(s.COUNTRY_CODES,e)?s.COUNTRY_CODES[e].alpha2:"US"}},{key:"getCountryEnvironment",value:function(e){var t=this.getCountryPrefix(e);return""!==t?t.concat("-",e):e}},{key:"setCountryCode",value:function(e){this.countryCode=e}}])&&u(t.prototype,n),i&&u(t,i),s}()),p=(0,i.default)(d,["checkCountryCode","getCountryCode","getCountryCodeAlpha2","getCountryPrefix","getCountryEnvironment","off","on","setCountryCode","trigger"]);t.default=p},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(0,((r=n(118))&&r.__esModule?r:{default:r}).default)();var o=function(e,t){var n=e.split(".");return function e(t,n,r){var o=n.shift();if(0===n.length){var i;if(o in t)for(i in t[o])t[o].hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=t[o][i]);t[o]=r}else o in t||(t[o]={}),e(t[o],n,r);return t}(window.affirm,n,t)};t.default=o},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(3)),i=c(n(6)),a=(c(n(33)),c(n(0))),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(123));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}var l={};function f(e,t){var n=a.default.getDomain(i.default.assets_root),r="".concat(n,"0/merchant/").concat(o.default.getPublicApiKey(),"/product/").concat(e,"/config.json"),u="_".concat(Math.round(1e14*Math.random()));l.callbacks[u]=function(n){l.products[e]=n;try{t(n)}catch(e){}try{i.default.merchant=n.merchant_name}catch(e){}},l.__callbacks=l.callbacks,s.loadjs("".concat(r,"?callback=affirm.product.__callbacks.").concat(u))}Object.assign(l,{callbacks:[],clearCache:function(){this.products={},this.__products=this.products},get:function(e,t){var n=this;if(this.products[e]&&"function"==typeof t)return a.default.delay(function(){return t(n.products[e])});o.default.getPublicApiKey()&&f(e,t),o.default.on("public_api_key_set",function n(){f(e,t),o.default.off("public_api_key_set",n)})},products:{}});var d=l;t.default=d},function(e,t,n){"use strict";n.r(t),t.default={getScrollbarWidth:function(){var e=document.createElement("div");e.style.msOverflowStyle="scrollbar",e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),t-r},hasVerticalScrollbar:function(){return window.innerWidth>document.documentElement.clientWidth}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["PreSeededApiKeyDirect","27GDB3KH87ZPDICH","JWT2LAPPJQTDK2SW","ZY2590ABAF62S9KM"],o=function(e){return-1!==r.indexOf(e)},i={getDistinctID:function(e){if(o(e))return window.triggermail&&window.triggermail.lytics&&window.triggermail.lytics.cookie&&window.triggermail.lytics.cookie.props&&window.triggermail.lytics.cookie.props.distinct_id},getToken:function(e){if(o(e))return window.triggermail&&window.triggermail.lytics&&window.triggermail.lytics.config&&window.triggermail.lytics.config.token}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),o=a(n(131)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,t.id)).options=i.default.extend({container:document.body,styles:{height:"100%",overflow:"hidden",width:"100%"}},t),e.state={isLoaded:!1,isShown:!1,shouldCallSizeChange:!1,resizingIframe:!1},e.registerEventListeners(),e}return t=f,a=[{key:"IFRAME_CLASSNAME",get:function(){return"affirm-iframe-widget"}},{key:"IFRAME_PERMISSIONS",get:function(){return{"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-same-origin":!0,"allow-scripts":!0}}},{key:"IFRAME_TITLE",get:function(){return"Affirm"}}],(n=[{key:"append",value:function(){var e=i.default.getElementById(this.options.container);if(!e)throw new Error("Widget container does not exist");e.appendChild(this.$iframe)}},{key:"detach",value:function(){var e=this.$iframe.parentElement;e&&e.removeChild(this.$iframe),delete this.$iframe,this.state.isLoaded=!1,this.state.isShown=!1}},{key:"generateFrame",value:function(){var e=this;this.$iframe=document.createElement("iframe"),i.default.setElementAttrs(this.$iframe,{allowScroll:"no",allowTransparency:!0,class:f.IFRAME_CLASSNAME,frameborder:0,height:this.options.styles.height,id:this.options.id,sandbox:Object.keys(this.constructor.IFRAME_PERMISSIONS||{}).join(" "),title:this.constructor.IFRAME_TITLE,width:this.options.styles.width}),Object.keys(this.options.styles).forEach(function(t){e.$iframe.style[t]=e.options.styles[t]})}},{key:"hide",value:function(){this.state.isShown&&(this.$iframe.style.display="none",this.state.isShown=!1,this.trigger("hidden",{},!1))}},{key:"load",value:function(){var e=this;if(!this.state.isLoaded){if(!this.options.src)throw new Error("src is required");this.$iframe||this.generateFrame(),this.$iframe.onload=function(){e.src()&&(e.state.isLoaded=!0,e.trigger("iframeReady"))};var t=this.setupPostMessageTunnel();this.src(t),this.append(),this.postMessageClient.setTargetWindow(this.$iframe.contentWindow)}}},{key:"registerEventListeners",value:function(){this.on("sizeChange",this.resize),this.on("closeRequest",this.remove)}},{key:"reload",value:function(e){this.options=Object.assign(this.options,e),this.remove(!0),this.load()}},{key:"remove",value:function(e){this.$iframe&&(o.default.removeClient(this.postMessageClient),delete this.postMessageClient,this.detach(),e||this.trigger("removed",{},!1))}},{key:"resize",value:function(e){var t=this;if(i.default.isSafariDesktop())if(this.state.resizingIframe){var n=i.default.getElementById(this.options.container).getBoundingClientRect();({width:n.width,height:n.height}).height<e.height&&(this.updateContainerSize(e),this.state.shouldCallSizeChange=!0,setTimeout(function(){t.state.shouldCallSizeChange=!1},200))}else this.updateContainerSize(e),this.state.resizingIframe=!0,setTimeout(function(){t.state.resizingIframe=!1},100);else this.updateContainerSize(e)}},{key:"updateContainerSize",value:function(e){var t;this.$iframe&&e&&void 0!==e.height&&("string"==typeof e.height?t=e.height:"number"==typeof e.height&&(t="".concat(e.height,"px")),this.$iframe.style.height=t)}},{key:"setupPostMessageTunnel",value:function(){var e=this;return this.postMessageClient?this.postMessageClient.url:(this.postMessageClient=o.default.createClient(this.options.src,{name:this.options.id}),this.postMessageClient.onClientResize(function(t){if(t&&!e.state.shouldCallSizeChange){var n=t.data;n&&e.trigger("sizeChange",n)}}),this.postMessageClient.onClose(function(){e.trigger("closeRequest")}),this.postMessageClient.onInitialized(function(){e.trigger("postMessageReady")}),this.postMessageClient.onStateChange(function(t){if(t){var n=t.data.state;n&&e.trigger("stateChange",n)}}),this.postMessageClient.onStepChange(function(t){if(t){var n=t.data.step;n&&e.trigger("stepChange",n)}}),this.postMessageClient.on("InlineCheckoutOpenEduModal",function(){e.trigger("openLearnMore")}),this.postMessageClient.url)}},{key:"show",value:function(){this.state.isShown||(this.$iframe.style.display=this.options.styles.display||"block",this.state.isShown=!0,this.trigger("shown",{},!1))}},{key:"src",value:function(e){return e&&(this.$iframe.src=e),this.$iframe.src}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppRegistry=t.App=void 0;var r=g(n(2)),o=g(n(3)),i=g(n(6)),a=g(n(162)),s=g(n(11)),u=g(n(1)),c=g(n(16)),l=g(n(17)),f=n(27),d=g(n(7)),p=g(n(12)),h=g(n(0)),m=n(14);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T={},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,a.default);var t=P(n);function n(e){var r;_(this,n);var o=h.default.getFrontendUrl("apps/".concat(e,"/"));return(r=t.call(this,o)).appName=e,r.configKeys=[],r.breakpointIndex=null,r.setupListeners(),r.processBreakpoints(),r.wrapper.setAttribute("data-test-id","".concat(e,"-wrapper")),r.frame.setAttribute("data-test-id","".concat(e,"-frame")),r.frame.setAttribute("title","Affirm ".concat(e)),r}return E(n,[{key:"open",value:function(e){this.send(f.Events.open,I({merchantPublicApiKey:o.default.getPublicApiKey()},e))}},{key:"close",value:function(){k(S(n.prototype),"close",this).call(this),window.removeEventListener("orientationchange",this.processBreakpoints),window.removeEventListener("resize",this.processBreakpoints)}},{key:"setupListeners",value:function(){var e=this;this.on(f.Events.style,this.applyStyles),this.on(f.Events.dataRequest,function(t){t.sources.forEach(function(t){return e.handleDataRequest(t)})}),this.on(f.Events.open,function(e){var t=e.app,n=e.data;t===f.Apps.prequal?function(e){if(!T[e]){var t=c.default.get();T[e]=new l.default(I({},t,{urlParams:{unit_price:e,device_id:r.default.localDeviceId,merchant_name:t.merchant_name,referring_url:encodeURIComponent(window.location.href),webhook_session_id:t.webhook_session_id||h.default.getWebhookSessionId()}}))}T[e].open(),T[e]}(n.amount):R.open(t,n)}),s.default.on("config",function(t){e.sendMerchantConfig(t)}),this.on(f.Events.close,function(){return e.close()}),window.addEventListener("orientationchange",function(){return e.processBreakpoints()}),window.addEventListener("resize",function(){return e.processBreakpoints()})}},{key:"handleDataRequest",value:function(e){var t,n=e.source,r=e.query,o=(b(t={},f.Sources.merchantConfig,this.handleMerchantConfigRequest),b(t,f.Sources.breakpoints,this.handleBreakpointRequest),t)[n];o&&o.call(this,r)}},{key:"handleBreakpointRequest",value:function(e){var t=e.breakpoints;this.breakpoints=t,this.processBreakpoints()}},{key:"getBreakpointIndex",value:function(e){var t=(0,m.findIndex)(this.breakpoints,function(t){return e<=t});return t<0?this.breakpoints.length:t}},{key:"processBreakpoints",value:function(){if(this.breakpoints){var e=this.getBreakpointIndex(window.innerWidth);e!==this.breakpointIndex&&(this.breakpointIndex=e,this.send(f.Events.dataResponse,b({},f.Sources.breakpoints,{breakpointIndex:this.breakpointIndex})))}}},{key:"handleMerchantConfigRequest",value:function(e){var t=e.keys;this.configKeys=t,this.sendMerchantConfig(i.default)}},{key:"getMerchantConfig",value:function(e){var t={};return this.configKeys.forEach(function(n){var r=m.get.apply(void 0,[e].concat(v(n.split("."))));void 0!==r&&(t[n]=r)}),t}},{key:"sendMerchantConfig",value:function(e){var t=this.getMerchantConfig(e);Object.keys(t).length&&this.send(f.Events.dataResponse,b({},f.Sources.merchantConfig,t))}},{key:"applyStyles",value:function(e){var t=e.styles,n=b({},f.Selectors.wrapper,this.wrapper);t.forEach(function(e){var t=e.selector,r=e.style;n[t]&&Object.assign(n[t].style,r)})}}]),n}();t.App=C;var M=function(){function e(){_(this,e),this.appRegistry={},this.eligible=p.default.isModalSupported()}return E(e,[{key:"open",value:function(e,t){var n=this;return this.eligible.then(function(r){try{return r&&(n.appRegistry[e]||(n.appRegistry[e]=new C(e)),n.appRegistry[e].open(t)),r}catch(e){return void u.default.trackActionLog("AppService Open Error",{errorMessage:e&&e.message})}})}},{key:"close",value:function(e){var t=this.appRegistry[e];t&&(t.close(),delete this.appRegistry[e])}},{key:"reset",value:function(){Object.keys(this.appRegistry).forEach(this.close)}}]),e}();t.AppRegistry=M;var R=new M,x=(0,d.default)(R,["close","open","reset"]);t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(56)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,r.default);var t,n,i,a=c(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n={"-webkit-tap-highlight-color":"transparent",display:"flex",justifyContent:"center",overflowY:"auto",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:r.default.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"};o.default.isMobile()&&(n["-webkit-overflow-scrolling"]="touch",n["-webkit-transform"]="translate3d(0, 0, 0)",n.transform="translate3d(0, 0, 0)",n.overflow="scroll",n.background="#fff");var i=o.default.extend({css:{overflowX:"hidden",overflowY:"auto",height:"100%",width:"100%",margin:"0",border:"0",padding:"0"},iframe_container_css:n,on:{close:function(){return t.close()}}},e);return t=a.call(this,i)}return t=l,n&&s(t.prototype,n),i&&s(t,i),t}();t.default=f},function(e,t,n){"use strict";function r(e,t){var n,o=null;return Array.isArray(e)?(o=[],e.forEach(function(e){n=r(e,t),t(n)&&o.push(n)})):null!==e&&"object"==typeof e?(o={},Object.keys(e).forEach(function(i){n=r(e[i],t),t(n)&&(o[i]=n)})):t(e)&&(o=e),o}n.r(t),n.d(t,"default",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(19),o=n(9),i=c(n(21)),a=c(n(0)),s=c(n(1)),u=c(n(40));function c(e){return e&&e.__esModule?e:{default:e}}var l=["TEST_BLACKLISTED_MERCHANT"],f="promo_set",d="api/promos/v2",p={all:"all",ala:"ala",modal:"modal"},h={promo:{ala:"Buy in monthly payments with Affirm on orders over $50. Learn more",html_ala:'Buy in monthly payments with Affirm on orders over $50. <a class="affirm-modal-trigger">Learn more</a>',button:"Just select Affirm at checkout.",config:{calculate_ala_option:"longest_loan_term",images:{hero:null,hero2x:null,logo:null,logo2x:null},promo_prequal_enabled:!1,styles:{color:null,fontFamily:null}},content_space_1:"quick_and_easy",content_space_2:"no_hidden_fees",footer:"Subject to credit check and approval. Down payment may be required. Available for purchases over $50. Estimated payment amount excludes taxes and shipping fees. Affirm loans are made by Cross River Bank, a New Jersey State Chartered Commercial Bank, Member FDIC. See www.affirm.com/faqs for details.",headline:"Make easy monthly payments for your purchase",tagline:"Rates from 10-30% APR"},offer:{terms:[],expiry:null}};var m={getPromoConfig:function(e,t,n,r){var o=a.default.getApiUrl("promos/".concat(e,"/").concat(t));return n&&(o+="?promo_external_id=".concat(n)),window.fetch(o).then(function(e){return e.ok?e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t),t}):e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t.message),r})})},getPromoResponse:function(e,t,n){var c,l=p[n]||p.all;return(0,o.getAdaptiveCheckoutExperiment)(!0).then(function(n){var s="".concat(d,"/").concat(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.default)(e,function(e){return""!==e&&null!==e&&void 0!==e});return e&&Object.keys(t).length?"?".concat(Object.keys(t).map(function(e){return t[e]?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])):""}).join("&")):""}({amount:t.amount,field:l,items:(0,o.getItemsInput)(t.items),locale:i.default.getLocale()||null,logo_color:t.logoColor,logo_type:t.logoType,page_type:t.pageType,promo_external_id:t.promoId,show_cta:t.showCTA,use_adaptive:n.adaptiveCheckoutExperimentResult===r.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.IN_ADAPTIVE_CHECKOUT_TREATMENT}));return c=a.default.getFrontendUrl(s),window.fetch(c,{credentials:"include"})}).then(function(e){return e.ok?e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t),t}):e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t.message),h})}).catch(function(e){return s.default.trackAPI(c,500,"Promo fetch error message: ".concat(e?e.message:"FALSY ERROR OBJECT")),h})},useV2Api:function(e,t){var n,r=-1!==l.indexOf(e);return t?(n=t)&&n.indexOf&&0===n.indexOf(f)&&!r:!r},DEFAULT_PROMO_RESPONSE:h,TEMPLATE_FIELD:p};t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(3)),o=u(n(15)),i=u(n(22)),a=u(n(0)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=o.default.getEnvironmentPaths(),l={};var f={getEstimate:function(e,t){var n,o=e.amount,u=e.apr,f=e.months,d=r.default.getPublicApiKey(),p=new Date,h="".concat(p.getUTCFullYear(),"/").concat(p.getUTCMonth()+1,"/").concat(p.getUTCDate()),m=[o,u,f,h],g=l[m],y="".concat(a.default.getDomain(c.payments_url_base),"promos/payment_estimate_path");return g?n=g:(n=window.fetch("".concat(y,"/").concat(d,"/").concat(u,"/").concat(o,"/").concat(f,"?date=").concat(h)).then(function(e){return e.ok?e.json().then(function(t){return{json:t,status:e.status,url:e.url}}):e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t.message),Promise.reject("Could not get an estimate for apr: ".concat(u,", amount: ").concat(o,", months: ").concat(f,". Error: ").concat(t.error))})}).then(function(t){var n=t.json,r=t.status,a=t.url;s.default.trackAPI(a,r,n.disclosure);var c=n;return c.open_modal=function(t){var n,r,a,l;t&&"function"==typeof t.preventDefault&&t.preventDefault(),s.default.trackUserInteraction("Promo Modal",s.default.USER_ACTIONS.CLICK),new i.default({amount:o,apr:u,disclosure:(n=c.payment,r=c.disclosure,a=Math.floor(n/100),l=n%100,l=l<10?"0".concat(l):l,"$".concat(a,".").concat(l,"/mo ").concat(r[0].toLowerCase()).concat(r.slice(1))),DOMNode:e.elem,months:f,payment:c.payment,termLength:c.months})},c}).catch(function(e){return Promise.reject("Could not get an estimate for apr: ".concat(u,", amount: ").concat(o,", months: ").concat(f,". Error: ").concat(e.error))}),l[m]=n),t&&n.then(t),n}};f.get_estimate=f.getEstimate;var d=f;t.default=d},function(e,t){e.exports=function(e){return-1!==e.indexOf("Opera")||-1!==e.indexOf("OPR")?"Opera":-1!==e.indexOf("Edge")?"Edge":-1!==e.indexOf("Chrome")?"Chrome":-1!==e.indexOf("Safari")?"Safari":-1!==e.indexOf("Firefox")?"Firefox":-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident")?"IE":"Other"}},function(e,t){function n(e){return Array.isArray(e)}function r(e){return"object"==typeof e&&!n(e)}e.exports={isArray:n,isObject:r,isPlainObject:function(e){return r(e)&&"[object Object]"===String(e)}}},function(e,t){var n=["ssn","cvc","dob","name","phone","email","line1","address","zipcode","ssn_last4","card_number","phone_number","account_number"];e.exports=function e(t,r){if(void 0===t||null===t||"boolean"==typeof t)return t;if("string"==typeof t||"number"==typeof t)return r?(""+t).replace(/[0-9a-z]/gi,"*"):t;if(Array.isArray(t))return t.map(function(t){return e(t,r)});if("object"==typeof t){var o={};return Object.keys(t).forEach(function(i){o[i]=e(t[i],function(e){return-1!==n.indexOf(e)}(i)||r)}),o}return null}},function(e,t,n){var r,o;!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(o[c]=u,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports={parse:function(e){var t,n,r={protocol:null,auth:null,host:null,path:null,hash:null,href:e,hostname:null,port:null,pathname:null,search:null,query:null};if(-1!==(t=e.indexOf("//"))?(r.protocol=e.substring(0,t),n=t+2):n=0,-1!==(t=e.indexOf("@",n))&&(r.auth=e.substring(n,t),n=t+1),-1===(t=e.indexOf("/",n))){if(-1===(t=e.indexOf("?",n)))return-1===(t=e.indexOf("#",n))?r.host=e.substring(n):(r.host=e.substring(n,t),r.hash=e.substring(t)),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),r;r.host=e.substring(n,t),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),n=t}else r.host=e.substring(n,t),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),n=t;if(-1===(t=e.indexOf("#",n))?r.path=e.substring(n):(r.path=e.substring(n,t),r.hash=e.substring(t)),r.path){var o=r.path.split("?");r.pathname=o[0],r.query=o[1],r.search=r.query?"?"+r.query:null}return r}}},function(e,t,n){var r=n(102),o="?",i=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function a(){return null}function s(e){var t={};return t._stackFrame=e,t.url=e.fileName,t.line=e.lineNumber,t.func=e.functionName,t.column=e.columnNumber,t.args=e.args,t.context=null,t}function u(e,t){return{stack:function(){var n=[];t=t||0;try{n=r.parse(e)}catch(e){n=[]}for(var o=[],i=t;i<n.length;i++)o.push(new s(n[i]));return o}(),message:e.message,name:function(e){var t=e.name&&e.name.length&&e.name,n=e.constructor.name&&e.constructor.name.length&&e.constructor.name;if(!t||!n)return t||n;if("Error"===t)return n;return t}(e),rawStack:e.stack,rawException:e}}e.exports={guessFunctionName:function(){return o},guessErrorClass:function(e){if(!e||!e.match)return["Unknown error. There was no error message to display.",""];var t=e.match(i),n="(unknown)";return t&&(n=t[t.length-1],e=(e=e.replace((t[t.length-2]||"")+n+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[n,e]},gatherContext:a,parse:function(e,t){var n=e;if(n.nested){for(var r=[];n;)r.push(new u(n,t)),n=n.nested,t=0;return r[0].traceChain=r,r[0]}return new u(n,t)},Stack:u,Frame:s}},function(e,t,n){var r=n(5),o=n(51);function i(e,t){var n=t.split("."),o=n.length-1;try{for(var i=0;i<=o;++i)i<o?e=e[n[i]]:e[n[i]]=r.redact()}catch(e){}}e.exports=function(e,t,n){if(t=t||[],n)for(var a=0;a<n.length;++a)i(e,n[a]);var s=function(e){for(var t,n=[],r=0;r<e.length;++r)t="^\\[?(%5[bB])?"+e[r]+"\\[?(%5[bB])?\\]?(%5[dD])?$",n.push(new RegExp(t,"i"));return n}(t),u=function(e){for(var t,n=[],r=0;r<e.length;++r)t="\\[?(%5[bB])?"+e[r]+"\\[?(%5[bB])?\\]?(%5[dD])?",n.push(new RegExp("("+t+"=)([^&\\n]+)","igm"));return n}(t);function c(e,t){return t+r.redact()}return o(e,function e(t,n,i){var a=function(e,t){var n;for(n=0;n<s.length;++n)if(s[n].test(e)){t=r.redact();break}return t}(t,n);return a===n?r.isType(n,"object")||r.isType(n,"array")?o(n,e,i):function(e){var t;if(r.isType(e,"string"))for(t=0;t<u.length;++t)e=e.replace(u[t],c);return e}(a):a},[])}},function(e,t,n){var r=n(5);e.exports=function(e,t,n){var o,i,a,s=r.isType(e,"object"),u=r.isType(e,"array"),c=[];if(s&&-1!==n.indexOf(e))return e;if(n.push(e),s)for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&c.push(o);else if(u)for(a=0;a<e.length;++a)c.push(a);var l=s?{}:[],f=!0;for(a=0;a<c.length;++a)i=e[o=c[a]],l[o]=t(o,i,n),f=f&&l[o]===e[o];return 0==c.length||f?e:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(114)),o=u(n(24)),i=u(n(32)),a=u(n(8)),s=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,a.default);var t,n,s,u=d(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this)).apiTokens=null,e.getApiTokens()&&e.setApiTokens(e.getApiTokens()),e}return t=c,(n=[{key:"checkApiTokens",value:function(){return!!this.getApiTokens()}},{key:"getUserApiTokens",value:function(){var e=o.default.buildTarget,t=null;return"test"===o.default.target||"dev"===e?t:t=r.default[i.default.getCountryEnvironment(e)]}},{key:"getApiTokens",value:function(){return this.apiTokens||this.getUserApiTokens()||o.default.apiTokens||null}},{key:"getTrackingBlacklist",value:function(){return this.getApiTokens().tracking_blacklist}},{key:"setApiTokens",value:function(e){this.apiTokens=e}}])&&l(t.prototype,n),s&&l(t,s),c}()),m=(0,s.default)(h,["checkApiTokens","getApiTokens","getTrackingBlacklist","off","on","setApiTokens","trigger"]);t.default=m},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t={};return(e?function(e){var t=e.indexOf("?");return t>-1?e.substring(t):""}(e):window.location.search).slice(1).split("&").forEach(function(e){if(e){var n=r(e.split("="),2),o=n[0],i=n[1];t[o]=i||""}}),t}function a(e,t){setTimeout(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.delay=a,t.queryObj=i;var s={queryObj:i,delay:a};t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(29),i=n(30),a={};a.cookies=i.b,a.cors=function(){return!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)},a.json=function(){try{return window.JSON.parse(window.JSON.stringify({affirmsniffer:!0})),!0}catch(e){return!1}},a.localStorage=function(){try{return window.localStorage.setItem("affirmsniffer","affirmsniffer"),window.localStorage.getItem("affirmsniffer"),window.localStorage.removeItem("affirmsniffer"),!0}catch(e){return!1}},a.postMessage=function(){return!!window.postMessage},a.thirdPartyCookies=function(e,t){return void 0===t&&(t=!1),function(e){return window.fetch(e,{credentials:"include",headers:{Accept:"application/json"},method:"GET"})}(e).then(function(e){return e.json()}).then(function(n){return!!n.cookie_sent||!t&&a.thirdPartyCookies(e,!0)}).catch(function(e){if(Object(o.a)(e))r.default.trackEvent("Third party cookie check failed",{},.1);else{var t=window.Rollbar||window.affirm&&window.affirm.Rollbar;t&&t.error("Error conducting third party cookie check",e)}return!1})},a.ie11=function(){return!(window.navigator.userAgent.indexOf("Trident")>-1)},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(56)),o=l(n(20)),i=l(n(0)),a=l(n(10)),s=l(n(13)),u=l(n(127)),c=l(n(35));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,r.default);var t,n,l,f=m(v);function v(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);var n={"-webkit-tap-highlight-color":"transparent",overflow:"hidden",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:r.default.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"},o={height:"100%",width:"100%",margin:"0",border:"0",padding:"0"};i.default.isMobile()&&(o=i.default.extend({position:"fixed","-webkit-overflow-scrolling":"touch","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)",background:"#fff"},o));var s=i.default.extend({css:{height:"100%",width:"100%",margin:"0",border:"0",padding:"0"},iframe_container_css:n,modalCss:o},e);return(t=f.call(this,s)).isIFrameReady=!1,t.options=i.default.extend(t.defaultOptions,t.options),t.options.src=e.src,i.default.isMobile()||(t.scrollbarWidth=c.default.getScrollbarWidth()),(0,a.default)(g(t),"alignModalAndPage","handleBackgroundClick","modalMessageListener","resetBodyPosition","resetModalAndPageAlignment","setBodyPosition"),t.registerWidgetListeners(),t}return t=v,l=[{key:"IFRAME_CONTAINER_CLASSNAME",get:function(){return"affirm-sandbox-iframe-container"}},{key:"MODAL_MARGIN",get:function(){return 40}}],(n=[{key:"defaultOptions",get:function(){return{minModalHeight:0,resizeHeight:!1,resizeWidth:!1}}},{key:"targetWindow",get:function(){return this.$iframe.contentWindow}},{key:"alignModalAndPage",value:function(){var e={},t=this.exceedsViewportHeight();if(void 0===this.bodyPosition&&void 0===this.bodyMarginRight&&(this.bodyPosition=document.body.style.position,this.bodyMarginRight=document.body.style.marginRight),this.bodyHasVerticalScroll){var n;try{var r=getComputedStyle(document.body);n=parseInt(r["margin-right"],10)}catch(e){n=0}i.default.setElementStyle(document.body,{position:"relative",marginRight:"".concat(this.scrollbarWidth+n,"px")}),t||0===this.scrollbarWidth?e.marginRight="0":e.marginRight="".concat(this.scrollbarWidth,"px")}else t&&0!==this.scrollbarWidth?e.marginRight="-".concat(this.scrollbarWidth,"px"):e.marginRight="0";i.default.setElementStyle(this.modal,e)}},{key:"appendTo",value:function(e){var t=i.default.getElementById(e);return this.regenerateIfAlreadyAppended(),this.modal.appendChild(this.$iframe),this.$iframe_container.appendChild(this.modal),t&&t.appendChild&&t.appendChild(this.$iframe_container),this}},{key:"exceedsViewportHeight",value:function(){return this.modalContainerHeight+this.modalVerticalMargins>window.innerHeight}},{key:"generateFrame",value:function(){p(y(v.prototype),"generateFrame",this).call(this);var e=document.createElement("div");e.className=v.IFRAME_CONTAINER_CLASSNAME,i.default.setElementStyle(e,this.options.modalCss),this.modal=e}},{key:"handleBackgroundClick",value:function(e){e.currentTarget===this.$iframe_container&&this.close()}},{key:"maxViewableHeight",value:function(){return window.innerHeight-this.modalVerticalMargins}},{key:"modalMessageListener",value:function(e){var t=o.default.parsePostMessageData(e);if(t&&t.id===u.default.POST_MESSAGE_ID)switch(t.name){case u.default.IFRAME_DIMENSIONS_MESSAGE:this.resizeModal(t);break;case u.default.IFRAME_READY_MESSAGE:this.isIFrameReady=!0;break;case u.default.REQUEST_PARENT_BOUNDS_MESSAGE:this.sendModalBounds()}}},{key:"open",value:function(e){p(y(v.prototype),"open",this).call(this,e),i.default.isMobile()||this.requestModalContentDimensions()}},{key:"optimizeUiCalculations",value:function(e){this.modalContainerHeight=parseInt(e.modalCss.height,10),this.modalVerticalMargins=parseInt(this.modal.style.marginBottom,10)+parseInt(this.modal.style.marginTop,10),this.scrollbarWidth=c.default.getScrollbarWidth()}},{key:"registerWidgetListeners",value:function(){i.default.isMobile()?(this.on("hiding",this.resetBodyPosition),this.on("showing",this.setBodyPosition)):(this.on("hiding",this.resetModalAndPageAlignment),this.on("showing",this.alignModalAndPage),s.default.bind(this.$iframe_container,"click",this.handleBackgroundClick)),s.default.bind(window,"message",this.modalMessageListener)}},{key:"requestModalContentDimensions",value:function(){this.postMessage({name:u.default.REQUEST_IFRAME_DIMENSIONS_MESSAGE})}},{key:"resetBodyPosition",value:function(){void 0!==this.bodyPosition&&(i.default.setElementStyle(document.body,{position:this.bodyPosition}),delete this.bodyPosition)}},{key:"resetModalAndPageAlignment",value:function(){i.default.setElementStyle(document.body,{position:this.bodyPosition,marginRight:this.bodyMarginRight}),delete this.bodyPosition,delete this.bodyMarginRight}},{key:"resizeModal",value:function(e){if(e&&e.height&&e.width){var t={},n=e.height>this.modalContainerHeight;if(this.options.resizeHeight&&(n||this.exceedsViewportHeight())){var r=Math.max(e.height,this.maxViewableHeight(),this.options.minModalHeight);t.height="".concat(r,"px"),this.modalContainerHeight=r}this.options.resizeWidth&&(t.width="".concat(e.width,"px")),(t.height||t.width)&&(i.default.setElementStyle(this.modal,t),this.alignModalAndPage())}}},{key:"postMessage",value:function(e){var t=this.src();if(t){var n=i.default.extend({id:u.default.POST_MESSAGE_ID},e);this.isIFrameReady&&this.targetWindow.postMessage(JSON.stringify(n),i.default.getDomain(t))}}},{key:"sendModalBounds",value:function(){var e=Math.round(this.$iframe_container.scrollTop);i.default.isMobile()||(e-=v.MODAL_MARGIN),e=Math.max(e,0);var t=this.modalContainerHeight-e,n=Math.min(t,window.innerHeight);this.postMessage({availableHeight:n,modalHeight:this.modalContainerHeight,name:u.default.PARENT_BOUNDS_MESSAGE,scrollTop:e})}},{key:"setBodyPosition",value:function(){void 0===this.bodyPosition&&(this.bodyPosition=document.body.style.position,i.default.setElementStyle(document.body,{position:"fixed"}))}},{key:"unload",value:function(){this.isIFrameReady=!1,p(y(v.prototype),"unload",this).call(this)}}])&&d(t.prototype,n),l&&d(t,l),v}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(57)),o=s(n(58)),i=s(n(10)),a=s(n(35));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return p(e)}(this,n)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(m,r.default);var t,n,s,u=d(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),t=u.call(this,e),(0,i.default)(p(t),"disablePageScroll","resetPageScroll","setIFrameFocus"),t.registerEventHandlers(),t}return t=m,s=[{key:"MAX_ZINDEX_VALUE",get:function(){return 2147483647}}],(n=[{key:"close",value:function(e){o.default.close(e)}},{key:"disablePageScroll",value:function(){void 0===this.bodyOverflowStyle&&this.disablePageScrollOnShow()&&(this.bodyHasVerticalScroll=a.default.hasVerticalScrollbar(),this.htmlOverflowStyle=document.documentElement.style.overflow,document.documentElement.style.overflow="unset",this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden")}},{key:"disablePageScrollOnShow",value:function(){return!0}},{key:"hide",value:function(){var e=this;l(h(m.prototype),"hide",this).call(this),setTimeout(function(){e.activeElementBeforeShown&&e.activeElementBeforeShown.focus&&(e.activeElementBeforeShown.focus(),delete e.activeElementBeforeShown)},0)}},{key:"open",value:function(e){var t,n=this;this.isOrphan()?(this.on("ready",t=function(){n.off("ready",t),o.default.open(n,n.setIFrameFocus),"function"==typeof e&&e()}),o.default.load(this)):o.default.open(this,this.setIFrameFocus)}},{key:"preload",value:function(){o.default.load(this)}},{key:"registerEventHandlers",value:function(){this.on("hiding",this.resetPageScroll).on("showing",this.disablePageScroll)}},{key:"resetPageScroll",value:function(){document.documentElement.style.overflow=this.htmlOverflowStyle,delete this.htmlOverflowStyle,document.body.style.overflow=this.bodyOverflowStyle,delete this.bodyOverflowStyle}},{key:"setIFrameFocus",value:function(){this.$iframe&&!this.isOrphan()&&"function"==typeof this.$iframe.focus&&this.$iframe.focus()}},{key:"unload",value:function(){o.default.remove(this)}}])&&c(t.prototype,n),s&&c(t,s),m}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(20)),o=a(n(26)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e=s.call(this,t),i.default.isObject(e.options.on)&&Object.keys(e.options.on).forEach(function(t){e.on(t,e.options.on[t])}),e}return t=f,(n=[{key:"container",value:function(){return this.isOrphan()?this.options.container:this.$iframe_container.parentNode}},{key:"paint",value:function(){var e=this;if(!this.options.container)return this.logError("Cannot paint widget without container",{options:this.options});if(!this.options.src&&!this.options.content&&!this.options.template)return this.logError("Cannot paint widget without src, content, or template",{options:this.options});if(this.appendTo(this.options.container),this.options.src)this.$iframe.onload=function(){e.trigger("ready")},this.src(this.options.src);else if(this.options.content)this.content(this.options.content),this.trigger("ready");else if(this.options.template){var t=this.options.template_args||{};o.default.get(this.options.template,function(n){e.content(o.default.render(t,n)),e.trigger("ready")})}return this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.default.extend(this.options,e),this.paint()}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.widgets=[],this.hidden=!0,(0,o.default)(this,"close","load","open","remove","transition")}var t,n,i;return t=e,(n=[{key:"close",value:function(e){return this.hidden?("function"==typeof e&&e(),this):(this.widgets.forEach(function(e){e.hide()}),this.hidden=!0,r.default.delay(function(){"function"==typeof e&&e()},250))}},{key:"load",value:function(e){e.options.container||(e.options.container=document.body),e.paint(),this.widgets.push(e)}},{key:"open",value:function(e,t){return this.hidden?(-1===this.widgets.indexOf(e)&&this.load(e),e.show(),this.hidden=!1,r.default.delay(function(){"function"==typeof t&&r.default.delay(t,250)})):this.transition(e,t)}},{key:"remove",value:function(e){this.widgets=this.widgets.filter(function(t){return t!==e}),"function"==typeof e.remove&&e.remove()}},{key:"transition",value:function(e,t){return this.hidden?this.open(e,t):(-1===this.widgets.indexOf(e)&&this.load(e),this.widgets.forEach(function(t){t!==e&&t.hide()}),e.show(),r.default.delay(function(){"function"==typeof t&&t()},250))}}])&&a(t.prototype,n),i&&a(t,i),e}());t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cachePromises=a,t.cacheSinglePromise=function(e){var t,n=!1;return function(){return n?t:(t=e(),n=!0,t)}},t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r};var i={};function a(e){var t={};return function(n){if(n in t)return t[n];var r=e(n);return t[n]=r,r}}a(function(e){return Promise.resolve()});var s={getExperimentPageType:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],Promise.resolve(t)},getFinancingExperimentCohortId:function(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Promise.resolve()},getUniqueExperimentIDs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t={};return o.default.isObject(e)&&Object.keys(e).forEach(function(n){t[e[n].experimentId]=!0}),Object.keys(t)}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(1)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.checkoutData,n=e.checkoutAri,i=e.mode,a=e.userConfirmationUrl,s=e.userConfirmationUrlAction;r.default.trackActionLog("AFJS_default_checkout_on_success",{checkoutAri:n,checkoutToken:t.checkout_token,widgetMode:i});var u={};t.checkout_token?u.checkout_token=t.checkout_token:u.charge_id=t.id,"GET"===s&&(u=Object.assign(o.default.queryObj(a),u)),o.default.postToUrl(a,u,s)};t.default=a},function(e,t,n){"use strict";var r,o=(r=n(1))&&r.__esModule?r:{default:r};var i={};e.exports={onClick:function(e,t){i[e]=t},getClickHandler:function(e){var t=Object.keys(i).filter(function(t){return function(e,t){return(Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector).call(e,t)}(e,t)});return 0===t.length?null:(t.length>1&&o.default.trackEvent("Element matches multiple selectors",t.length),i[t[0]])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=g(n(3)),o=n(142),i=g(n(6)),a=g(n(11)),s=g(n(60)),u=n(23),c=g(n(12)),l=g(n(17)),f=g(n(20)),d=g(n(0)),p=g(n(13)),h=n(1),m=n(9);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;return k(e)}(this,n)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P={prequal:"prequal",orders:"orders",checkout:"checkout"},S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(S,l.default);var t,n,g,y=E(S);function S(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(n=y.call(this,r,Object.assign(o,{popupCss:{width:"960px"},src:null}))).startAtOrders=!!r.startAtOrders,n.currentApp=n.startAtOrders?P.orders:P.prequal,n.onCheckoutSuccess=(null===i.default||void 0===i.default?void 0:null===(e=i.default.merchant)||void 0===e?void 0:e.onCheckoutSuccess)||n.onCheckoutSuccess,n.onCheckoutSuccess=n.onCheckoutSuccess.bind(k(n)),n.onCheckoutFailure=(null===i.default||void 0===i.default?void 0:null===(t=i.default.merchant)||void 0===t?void 0:t.onCheckoutFailure)||S.onCheckoutFail,n.onCheckoutFailure=n.onCheckoutFailure.bind(k(n)),n.items=r.items,n.discountCodes=r.discountCodes,n.boundRedirectPostMessageListener=n.redirectPostMessageListener.bind(k(n)),p.default.bind(window,"message",n.boundRedirectPostMessageListener),n.postMessageListenerAttached=!0,n}return t=S,g=[{key:"appNameToPostMessageId",get:function(){var e;return v(e={},P.orders,"AFFIRM_ORDER_MESSAGES"),v(e,P.prequal,"AFFIRM_PREQUAL_MESSAGES"),v(e,P.checkout,"AFFIRM_CHECKOUT_MESSAGES"),e}},{key:"isValidPostMessageId",value:function(e){var t=this;return-1!==Object.keys(this.appNameToPostMessageId).map(function(e){return t.appNameToPostMessageId[e]}).indexOf(e)}},{key:"onCheckoutFail",value:function(){window.location=i.default.merchant.user_cancel_url.url}}],(n=[{key:"currentPostMessageId",get:function(){return S.appNameToPostMessageId[this.currentApp]}},{key:"makeMerchantRequest",value:function(e){var t=this;return new Promise(function(n){var r={id:S.appNameToPostMessageId[P.orders],name:"AFFIRM_MERCHANT_REQUEST_COMPLETED"};if(!(e&&e.requestData&&e.merchantUrl&&e.submitUrl))return t.postMessage(Object.assign({success:!1},r)),void n();var o=e.requestData,i=e.merchantUrl,a=e.submitUrl;fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:{order:o}})}).then(function(e){e.status>=400?((0,h.trackAPI)(i,e.status,"error"),t.postMessage(Object.assign({success:!1},r)),n()):e.ok&&e.json().then(function(o){(0,h.trackAPI)(i,e.status,o),t.postMessage(Object.assign({success:!0,response:o,submitUrl:a},r)),n()})}).catch(function(){(0,h.trackEvent)("orders/merchantFetchFailure"),t.postMessage(Object.assign({success:!1},r)),n()})})}},{key:"redirectPostMessageListener",value:function(e){var t=f.default.parsePostMessageData(e),n=e.source;if(t&&S.isValidPostMessageId(t.id))switch(t.name){case"AFFIRM_REDIRECT":n.location=t.url;var r=S.appNameToPostMessageId[t.redirectAppName],o=r&&{id:r};this.startConfiguringMessaging(o);break;case"AFFIRM_INIT":t.id===S.appNameToPostMessageId[P.orders]&&a.default.trigger("orders:open"),this.clearTimers(!0);break;case"AFFIRM_CLOSE":this.close();break;case"AFFIRM_CHECKOUT_CLOSE":this.checkoutClose(t);break;case"AFFIRM_CHECKOUT_INIT":this.clearTimers(!0);break;case"AFFIRM_MAKE_MERCHANT_REQUEST":this.makeMerchantRequest(t)}}},{key:"checkoutClose",value:function(e){var t=this;return new Promise(function(n){t.close(function(){if(!e)return t.onCheckoutFailure(),t.unload(),void n();var r=e.success?t.onCheckoutSuccess:t.onCheckoutFailure;i.default.merchant.use_vcn?(0,o.getOrder)(t.flowAri).then(function(t){r(A({order_id:t.data.merchant_internal_order_id},e.data))}).catch(function(){return t.onCheckoutFailure(e.data)}).then(function(){t.unload(),n()}):(r(e.data),t.unload(),n())})})}},{key:"onCheckoutSuccess",value:function(e){return(0,s.default)({checkoutData:e,mode:this.config.mode,userConfirmationUrl:i.default.merchant.user_confirmation_url.url,userConfirmationUrlAction:i.default.merchant.user_confirmation_url.action})}},{key:"onGetOrderData",value:function(e,t){if(e&&e.ari){this.flowAri=e.ari;var n=this.options.src.indexOf("?")>-1?"&":"?";this.options.src="".concat(this.options.src).concat(n,"flow_ari=").concat(e.ari,"&public_api_key=").concat(r.default.getPublicApiKey())}this.config.mode===c.default.MODE_MODAL?_(O(S.prototype),"open",this).call(this,t,this.prequalOrderConfig):this.config.mode===c.default.MODE_POPUP&&this.updatePopupSource(this.options.src,t)}},{key:"loadPrequalOrderSource",value:function(e){var t=this;return this.options.src=this.startAtOrders?d.default.getFrontendUrl(i.default.resource_urls.orders_backend_route):l.default.constructURL(this.config.urlParams),(0,o.createOrder)({items:this.items,discount_codes:this.discountCodes}).then(function(n){return t.onGetOrderData(n,e)}).catch(function(){return t.onGetOrderData(null,e)})}},{key:"onPopupOpen",value:function(e){_(O(S.prototype),"onPopupOpen",this).call(this),this.loadPrequalOrderSource(e)}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.postMessageListenerAttached||p.default.bind(window,"message",this.boundRedirectPostMessageListener),this.popup=null,this.options.src=null,this.prequalOrderConfig=n,c.default.determineMode(this.config.mode).then(function(r){(0,m.getFeatureFlagStatus)(m.featureFlagNames.prequal_popup_deprecation).then(function(o){var i=r;o===m.FEATURE_FLAG_STATUS.FEATURE_ON&&r===c.default.MODE_POPUP&&(i=c.default.MODE_MODAL),t.config.mode=i,i===c.default.MODE_MODAL?t.loadPrequalOrderSource(e):i===c.default.MODE_POPUP?_(O(S.prototype),"open",t).call(t,e,n):i===c.default.MODE_UNSUPPORTED&&((0,u.showError)({body:"Affirm requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),"function"==typeof e&&e())})})}},{key:"unload",value:function(){_(O(S.prototype),"unload",this).call(this),p.default.unbind(window,"message",this.boundRedirectPostMessageListener),this.postMessageListenerAttached=!1}}])&&b(t.prototype,n),g&&b(t,g),S}();t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(64)),o=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}var a=new r.default({service:"affirm.ui.ready"});a.runQueuedActions();var s=(0,o.default)(a,["on","off","ready","trigger"]);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),o=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d="affirm.jsReady",p="affirm.ui.ready",h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this)).isReady=!1,t.service=e.service||"",t}return t=f,(n=[{key:"getActionLog",value:function(){var e;switch(this.service){case d:e=window.affirm&&window.affirm._;break;case p:e=window.affirm&&window.affirm.ui&&window.affirm.ui._;break;default:e=[]}return e||[]}},{key:"ready",value:function(e){if(e)if(this.isReady){if("function"==typeof e)try{e()}catch(e){i.default.trackEvent("".concat(this.service," Callback Error"),e)}}else this.on("ready",e);else this.trigger("ready"),this.isReady=!0;return this.isReady}},{key:"runQueuedActions",value:function(){var e=this,t=this.getActionLog();o.default.delay(function(){t.forEach(function(t){e[t[0]].apply(e,t[1])})})}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(64)).default)({service:"affirm.jsReady"});i.runQueuedActions();var a=(0,r.default)(i,["ready"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(144)).default),a=(0,r.default)(i,["launchPrequalFlow"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=w(n(2)),o=w(n(41)),i=w(n(3)),a=w(n(6)),s=n(19),u=n(9),c=w(n(21)),l=w(n(16)),f=w(n(61)),d=w(n(22)),p=w(n(12)),h=w(n(42)),m=w(n(62)),g=w(n(17)),y=w(n(69)),v=n(14),A=w(n(0)),b=w(n(36));n(70);var _=w(n(1));function w(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k={},O={apr:.1,pricingTemplate:"Starting at {payment}/month with {affirm_logo}",termLength:12},P=["text","logo","symbol"],S=["black","blue","primary","white"],I={},T=function(e){var t=i.default.getPublicApiKey();return"en_AU"===c.default.getLocale()&&-1!==s.SPECIAL_SPLITTING_PUBLIC_API_KEYS.indexOf(t)?e.split(", "):e.split(",")},C=function(e){return{displayName:"DISPLAYNAME-SKU",qty:1,sku:e.trim(),unitPrice:1}},M=function(e){if(!e.isDefault){var t=l.default.get(),n=i.default.getPublicApiKey();return E({},t,{urlParams:{device_id:r.default.localDeviceId,merchant_name:t.merchant_name,promo_external_id:e.promoId,referring_url:encodeURIComponent(window.location.href),unit_price:e.amount,webhook_session_id:t.webhook_session_id||A.default.getWebhookSessionId(),page_type:e.pageType,use_promo:!0,bluecore_distinct_id:b.default.getDistinctID(n),bluecore_token:b.default.getToken(n),use_adaptive:e.adaptiveCheckoutEnabled||null,locale:c.default.getLocale()||null},mode:p.default.MODE_MODAL,page_type:"home"})}return null},R=function(e){var t=i.default.getPublicApiKey();if(!e)return o.default.getPromoConfig(t,"as_low_as",e,O);var n="affirm-promo:".concat(t,"-").concat(e);if(!I[n]){var r="".concat(a.default.promos_url_prefix,"as_low_as/").concat(t,"/").concat(e,".json");I[n]=window.fetch(r).then(function(e){return e.ok&&_.default.trackAPI(r,e.statusCode,e),e.json()}).catch(function(){return O})}return I[n]},x=function(e,t,n,r){var o=e.replace(/\{lowest_apr\}/gi,(100*n).toString());return o=(o=o.replace(/\{payment\}/gi,'<span class="affirm-ala-price">$'.concat(t,"</span>"))).replace(/\{affirm_logo\}/gi,r)},j=function(e,t,n,r){return!k.promoPrequalWidgets[t]||e?(0,u.getAdaptiveCheckoutExperiment)(!0).then(function(o){n.adaptiveCheckoutEnabled=o.adaptiveCheckoutExperimentResult===s.ADAPTIVE_CHECKOUT_EXPERIMENT_RESULT.IN_ADAPTIVE_CHECKOUT_TREATMENT;var i,a=M(n);a.items=e,a.urlParams.items=e,i=e?new m.default(a,{}):new g.default(a),k.promoPrequalWidgets[t]=i,i.on(["prequalFinished","prequalSignedOut"],function(){r&&U(r)}),i.open(null,{mode:p.default.MODE_MODAL})}):(k.promoPrequalWidgets[t].open(null,{mode:p.default.MODE_MODAL}),Promise.resolve())},D=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t,i=o.promoId;if(_.default.trackUserInteraction("As Low As",_.default.USER_ACTIONS.CLICK,{isPromoDefault:o.isDefault}),o.isDefault)return d.default.openModal(e,o),Promise.resolve();var a="".concat(i,"-").concat(o.amount,"-").concat(o.pageType),s=f.default.getClickHandler(r);if(s)return Promise.resolve(s()).then(function(e){var t=e.items;return(0,v.isValidItems)(t)?j(t,a,o,r):j({},a,o,r)});var u=null===r||void 0===r?void 0:null===(n=r.getAttribute)||void 0===n?void 0:n.call(r,"data-sku");if(u){var c=[];if(u=u?u.trim():u)if(c=T(u).map(C),(0,v.isValidItems)(c))return j(c,a,o,r)}return j(null,a,o,r)},N=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Learn more";if(n){""!==e.innerHTML&&(e.innerHTML+=". ");var i=document.createElement("a");i.innerHTML=o,i.setAttribute("aria-label","".concat(o," about Affirm Financing (opens in modal)")),i.setAttribute("href","javascript:void(0)"),i.onclick=function(n){n.preventDefault(),D(n,t,e)},e.appendChild(i)}else if(r){var a=e.innerText||e.innerHTML;e.setAttribute("aria-label","".concat(a," - Affirm Financing (opens in modal)")),e.setAttribute("href","javascript:void(0)"),e.onclick=function(n){n.preventDefault(),D(n,t,e)},e.style="cursor: pointer;"}},L=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=i;if(u.isDefault=!o.promo_prequal_enabled,o.termLengthIntervals){if(!(t=y.default.getTermLengthIntervalForAmount(o.termLengthIntervals,u.amount))){if(o.defaultMessage){var c=o.defaultMessage.replace(/\{affirm_logo\}/gi,u.affirmLogo),l=y.default.getMinAPR(o.termLengthIntervals);e.innerHTML=c.replace(/\{lowest_apr\}/gi,(100*l).toString()),k.setSiteWideModalOnElement(e,u)}else e.innerHTML="";return}var f=t;n=f.apr,r=f.termLength}else{if(u.amount<5e3)return void(e.innerHTML="");n=o.apr,r=o.termLength}h.default.getEstimate({amount:u.amount,apr:n,months:r,elem:e}).then(function(t){u.apr=n,u.termLength=r,u.paymentString=t.payment_string,u.pricingTemplate=o.pricingTemplate,k.setPromoOnElement(e,u),k.setProductPageModalOnElement(e,u),s.trackPromos&&_.default.trackEvent("Promo: ALA Rendered",{elapsedTime:Date.now()-s.promoTimer,version:"v1"}),a&&a()})},U=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.getAttribute("data-amount"),s=e.getAttribute("data-affirm-color")||"blue",u=e.getAttribute("data-affirm-type")||"logo",c="false"!==e.getAttribute("data-learnmore-show"),l=e.getAttribute("data-page-type"),f=[],d=e.getAttribute("data-sku");(d=d?d.trim():d)&&(f=T(d).map(C));var p="XXXXXXXXXXXXXXX"===e.getAttribute("data-promo-id")?null:e.getAttribute("data-promo-id");if(t=n?"true"===e.getAttribute("data-clickable"):"false"!==e.getAttribute("data-clickable"),!a)throw new Error("Affirm: data-amount is required in as low as promos. Element:",e);if(a>3e6)return e.innerHTML="",Promise.resolve();if(-1===P.indexOf(u))throw new Error('Affirm: Received a wrong data-affirm-type value "'.concat(u,'". Element:'),e);if(-1===S.indexOf(s))throw new Error('Affirm: Received a wrong data-affirm-color value "'.concat(s,'". Element:'),e);var h={amount:a,affirmLogo:function(e,t){var n="symbol"===t?"affirm":"Affirm";return"text"===t?"Affirm":'<span class="__affirm-logo __affirm-logo-'.concat(e,'">').concat(n,"</span>")}(s,u),learnMore:c,clickable:t,promoId:p,pageType:l};r.trackPromos&&_.default.trackEvent("Promo: ALA Pre-fetch",{elapsedTime:Date.now()-r.promoTimer});var m=i.default.getPublicApiKey();if(o.default.useV2Api(m,p)){var g={promoId:h.promoId,amount:h.amount,pageType:h.pageType,logoType:u,showCTA:c?"true":"false",logoColor:s};f.length>0&&(g.items=f);var y=o.default.TEMPLATE_FIELD.ala;return o.default.getPromoResponse(m,g,y).then(function(n){var o=n?n.promo:null;if(o&&o.config){var i={amount:h.amount,pageType:h.pageType,promoId:p,type:"product_page_modal"};e.innerHTML=o.html_ala,r.trackPromos&&_.default.trackEvent("Promo: ALA Rendered",{elapsedTime:Date.now()-r.promoTimer,version:"v2"}),t&&function(e,t){var n=e.getElementsByClassName("affirm-modal-trigger");if(0!==n.length){n.length>1&&_.default.trackEvent("too many affirm-modal-trigger elements found",E({numElements:n.length},t));var r=n[0],o=r.innerText||r.innerHTML;r.setAttribute("aria-label","".concat(o," about Affirm Financing (opens in modal)")),r.setAttribute("href","javascript:void(0)"),r.onclick=function(n){n.preventDefault(),D(n,t,e)}}else _.default.trackEvent("no affirm-modal-trigger found",E({},t))}(e,i)}})}return k.getConfig(p).then(function(t){L(e,t,h,null,r)})},F=function(e,t){return-1!==e.parentElement.className.indexOf(t)};k.defaultConfig=O,k.generatePromoPrequalConfig=M,k.getConfig=function(e){return y.default.isPromoSet(e)?y.default.getConfig(e,"asLowAs").catch(function(){return R(e)}):R(e)},k.getDisplayText=x,k.getPromoConfig=R,k.openModalAssociatedWithPromoId=D,k.processConfigAndSetElement=L,k.promoPrequalWidgets={},k.promos=I,k.setProductPageModalOnElement=function(e,t){var n=e.getAttribute("data-promo-id"),r=e.getAttribute("data-modal-id"),o={isDefault:t.isDefault,modalId:r,amount:t.amount,promoId:n,apr:t.apr,termLength:t.termLength,type:"product_page_modal"};N(e,o,t.learnMore,t.clickable)},k.setPromoOnElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.innerHTML=x(t.pricingTemplate,t.paymentString,t.apr,t.affirmLogo)},k.setSiteWideModalOnElement=function(e,t){var n=e.getAttribute("data-promo-id"),r=e.getAttribute("data-modal-id"),o={isDefault:t.isDefault,modalId:r,promoId:n,type:"site_wide_modal"};N(e,o,t.learnMore,t.clickable)},k.setupElement=U,k.setupElements=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;n<e.length;n+=1){var r=e[n];try{var o=F(r,"affirm-product-modal")||F(r,"affirm-site-modal");U(r,o,t)}catch(e){console.error(e)}}};var B=k;t.default=B},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){return e&&e.affirmConfig?e.affirmConfig:null}Object.defineProperty(t,"__esModule",{value:!0}),t.findAffirmConfig=o,t.setAffirmConfig=function(e,t){var n=o(e)||{};return e.affirmConfig=r({},n,t),e.affirmConfig}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6)),o=a(n(3)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u={},c=["asLowAs","productPageModal","siteWideModal"],l=function(e){return e&&e.indexOf&&0===e.indexOf("promo_set")||!1},f={getConfig:function(e,t){if(!l(e))return Promise.reject("The provided promoSetId ".concat(e," is not a valid promoset."));if(-1===c.indexOf(t))return Promise.reject("The provided key ".concat(t," must be one of: ").concat(c.join(", "),"."));var n=o.default.getPublicApiKey(),a="affirm-promoset:".concat(n,"-").concat(e);if(!u[a]){var f="".concat(r.default.promos_url_prefix,"promo_set/").concat(n,"/").concat(e,".json");u[a]=window.fetch(f).then(function(e){return e.ok?(i.default.trackAPI(f,e.statusCode,e),e.json()):Promise.reject("Invalid promoset")})}return u[a].then(function(e){return s({},e[t],{promo_prequal_enabled:e.promo_prequal_enabled})})},getMinAPR:function(e){for(var t=1,n=0;n<e.length;n+=1)e[n].apr<=t&&(t=e[n].apr);return t},getTermLengthIntervalForAmount:function(e,t){var n,r;for(r=0;r<e.length;r+=1)e[r].minimumLoanAmount<=t&&(n=e[r]);return n},isPromoSet:l};t.default=f},function(e,t,n){var r=n(145);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(150)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(r.default.checkPublicApiKey()){var t=e||{},n=t.amount||null,i={pageType:t.pageType||null,promoId:t.id||t.promoId||null,isSdk:"true"===t.isSdk};n&&n>=a&&n<=s?(i.type="product_page_modal",i.amount=n):i.type="site_wide_modal";var u=document.createElement("p");return o.default.openModal(u,i),u}return console.warn("Missing API Key"),null};var r=i(n(3)),o=i(n(22));function i(e){return e&&e.__esModule?e:{default:e}}var a=5e3,s=175e4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.default.checkPublicApiKey()){var t=Date.now(),n=e.trackPromos,l="IE"===(0,c.default)(window.navigator.userAgent);if(!l){var f=document.getElementsByClassName("affirm-as-low-as");o.default.setupElements(f,{promoTimer:t,trackPromos:n});var d=document.getElementsByClassName("affirm-site-modal");a.default.setupSiteElements(d,{promoTimer:t,trackPromos:n});var p=document.getElementsByClassName("affirm-product-modal");a.default.setupProductElements(p,{promoTimer:t,trackPromos:n});var h=document.getElementsByClassName("affirm-prequal-text");i.default.setupElements(h);var m=u.default.queryObj();"t"===m.aff_fm&&"true"!==sessionStorage.getItem("AffirmLearnMore")&&function(e,t,n){var r,o={};r=t.length>0?t:e.length>0?e:n;if(r.length>0){var i=r[0].getAttribute("data-promo-id"),a=r[0].getAttribute("data-modal-id"),u=r[0].getAttribute("data-page-type");o.id=i||a,o.pageType=u;var c=r[0].getAttribute("data-amount");c&&(o.amount=c)}(0,s.default)(o),sessionStorage.setItem("AffirmLearnMore","true")}(f,p,d)}}else console.warn("Missing API Key")};var r=l(n(3)),o=l(n(67)),i=l(n(152)),a=l(n(22)),s=l(n(71)),u=l(n(0)),c=l(n(43));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AxpClient",function(){return q}),n.d(t,"axpClientMiddleware",function(){return Y}),n.d(t,"buildAxpGetAssignmentsAction",function(){return J}),n.d(t,"buildAxpTrackImpressionAction",function(){return X}),n.d(t,"buildAxpSetCustomAttributeAction",function(){return z}),n.d(t,"buildAxpClearCustomAttributeAction",function(){return Z}),n.d(t,"axpAssignmentsReducer",function(){return ne}),n.d(t,"axpAssignmentsReducerWrappedWith",function(){return re}),n.d(t,"assignmentFetchStatus",function(){return _}),n.d(t,"impressionTypes",function(){return i}),n.d(t,"SHOWN_DEFAULT",function(){return oe}),n.d(t,"SHOWN_TREATMENT",function(){return ie});var r=n(4),o=n.n(r),i=Object.freeze({SHOWN_DEFAULT:"shown_default",SHOWN_TREATMENT:"shown_treatment"}),a=function(e,t,n,r){var i={assignment:e,impressionType:t,impressionAt:n,impressionData:r||{}};return o()(i)},s=n(46),u=n.n(s),c=n(2);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n,r){if(void 0===r&&(r={}),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t||"string"!=typeof t)throw new Error("HeaderConfig: appName must be provided to constructor as string");if(!n||"string"!=typeof n)throw new Error("HeaderConfig: appVersion must be provided to constructor as string");if(r&&"object"!=typeof r)throw new Error("HeaderConfig: appHeaders must be an object");this.universalHeaders={Accept:"text/html, application/json","Affirm-User-Agent":"Affirm-Web","Affirm-Platform":t,"Affirm-App-Version":n},this.appHeaders=r,this.defaultHeaders={"Content-Type":"application/json"}}var t,n,r;return t=e,(n=[{key:"updateWithResponseHeaders",value:function(e){void 0===e&&(e=new Map),e.get("Affirm-Authorization")&&(this.universalHeaders["Affirm-Authorization"]=e.get("Affirm-Authorization"))}},{key:"getCombinedHeaders",value:function(e){return void 0===e&&(e={}),Object.assign({},this.defaultHeaders,e,this.appHeaders,this.universalHeaders)}}])&&l(t.prototype,n),r&&l(t,r),e}(),d=function(e,t,n,r,o){void 0===t&&(t={}),void 0===n&&(n="GET"),void 0===r&&(r={}),void 0===o&&(o="include");var i={credentials:o,headers:r,method:n},a=r["Content-Type"];return"POST"!==n&&"PUT"!==n&&"PATCH"!==n||(t instanceof FormData?(i.body=t,delete i.headers["Content-Type"]):i.body=JSON.stringify(t)),fetch(e,i).then(function(e){if(e.status>=500||404===e.status)return{responseData:{message:404===e.status?"Not Found":"Unexpected Error"},responseHeaders:e.headers,responseStatus:e.status};switch(a){case"application/json":return e.json().then(function(t){return{responseData:t,responseHeaders:e.headers,responseStatus:e.status}});default:return e.text().then(function(t){return{responseData:t,responseHeaders:e.headers,responseStatus:e.status}})}})},p=Object.freeze({APP_NAME:"Affirm-Platform",APP_VERSION:"Affirm-App-Version",APP_USER_AGENT:"Affirm-User-Agent",APP_CAPABILITIES:"Affirm-Client-Capabilities"});function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(){function e(t,n,r,o){if(void 0===o&&(o={}),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"urlBase",null),m(this,"headerConfig",null),void 0===t||null===t||!n||!r)throw Error("AXP client: invalid configuration");this.urlBase=t,this.headerConfig=new f(n,r,o)}var t,n,r;return t=e,(n=[{key:"getHeaders",value:function(){return this.headerConfig.getCombinedHeaders()}},{key:"getAssignments",value:function(e,t,n,r,i){var a,s,u=this.getHeaders(),c={experiment_names:e,feature_flag_names:t,custom_attributes:n,related_units:r},l=d(this.urlBase+"/api/axp/v1/assignments/fetch",c,"POST",u);return(a=i,s=l,new Promise(function(e,t){setTimeout(function(){t(new Error("Axp Client fetch timeout"))},a),s.then(e,t)})).then(function(i){if(200!==i.responseStatus)throw new Error(i.responseData.message);var a=i.responseData.assignments||{},s=i.responseData.feature_flag_assignments||{},u=(new Date).toISOString(),c={},l={};return e.forEach(function(e){c[e]=function(e,t,n,r,i){if(void 0===r&&(r={}),void 0===i&&(i={}),t&&t.experiment_name!==e)throw Error("assignment experiment name mismatch");var a={experimentName:e,hasVariant:!!t&&!!Object.keys(t).length,experimentUuid:t&&t.experiment_uuid,assignmentUuid:t&&t.assignment_uuid,unitType:t&&t.unit_type,unitValue:t&&t.unit_value,variantName:t&&t.variant_name,internalReason:t&&t.internal_reason,assignmentAt:n,customAttributesData:r,relatedUnits:i};return o()(a)}(e,a[e]||void 0,u,n,r)}),t.forEach(function(e){l[e]=function(e,t,n,r,i){void 0===r&&(r={}),void 0===i&&(i={});var a={featureFlagName:e,variantName:t,assignmentAt:n,customAttributesData:r,relatedUnits:i};return o()(a)}(e,s[e]||void 0,u,n,r)}),o()({experimentAssignments:c,featureFlagAssignments:l})})}},{key:"fireImpressions",value:function(e){var t=this.getHeaders(),n=[];e.forEach(function(e){if(e.getIn(["assignment","hasVariant"])){var t={assignment:{experiment_name:e.getIn(["assignment","experimentName"]),experiment_uuid:e.getIn(["assignment","experimentUuid"]),assignment_uuid:e.getIn(["assignment","assignmentUuid"]),unit_type:e.getIn(["assignment","unitType"]),unit_value:e.getIn(["assignment","unitValue"]),variant_name:e.getIn(["assignment","variantName"]),internal_reason:e.getIn(["assignment","internalReason"])},impression_type:e.impressionType,impression_at:e.impressionAt,data:Object.assign({},{assignment_data:{assignment_at:e.getIn(["assignment","assignmentAt"]),custom_attributes:e.getIn(["assignment","customAttributesData"]),related_units:e.getIn(["assignment","relatedUnits"])}},e.impressionData)};n.push(t)}});var r,o={impressions:n};return n.length?d((r=this.urlBase,r+"/api/axp/v1/assignments/impressions"),o,"POST",t).then(function(e){if(200!==e.responseStatus)throw new Error(e.responseData.message);return!!e.responseData.results}):Promise.resolve(!1)}}])&&h(t.prototype,n),r&&h(t,r),e}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=Object.freeze({appName:{required:!0,objectType:"String"},appVersion:{required:!0,objectType:"String"},capabilities:{required:!1,objectType:"Array",defaultTo:[]},forceMemoryStorage:{required:!1,objectType:"Boolean",defaultTo:!1},cacheTtlMs:{required:!1,objectType:"Number",defaultTo:3e5},impressionFlushIntervalMs:{required:!1,objectType:"Number",defaultTo:1e3},assignmentFetchTimeoutMs:{required:!1,objectType:"Number",defaultTo:3e3},networkRetryThreshold:{required:!1,objectType:"Number",defaultTo:5}}),A=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=null,(r="config")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i;var a={};if(Object.keys(t).filter(function(e){return!Object.prototype.hasOwnProperty.call(v,e)}).length>0)throw Error("Unsupported Axp ClientConfig");Object.keys(v).forEach(function(e){var n=v[e];if(n.required&&!t[e])throw Error("Missing client config");var r=t[e]||n.defaultTo;if(Object.prototype.toString.call(r)!=="[object "+n.objectType+"]")throw Error("Unexpected client config type");a[e]=r}),this.config=o()(a)}var t,n,r;return t=e,(n=[{key:"getAdditionalAppHeaders",value:function(){var e;return this.config.capabilities.length>0?((e={})[p.APP_CAPABILITIES]=this.config.capabilities,e):{}}}])&&y(t.prototype,n),r&&y(t,r),e}(),b=Object.freeze({CLIENT_PLATFORM:"client_platform",CLIENT_VERSION_STR:"client_version_str",CLIENT_USER_AGENT:"client_user_agent",CLIENT_ALL_CAPABILITIES:"client_all_capabilities"}),_=Object.freeze({PENDING:"pending",SUCCESS:"success",FAILED:"failed"});function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){var n,r,i;if(void 0===t&&(t={}),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=null,(r="attributes")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,"object"!=typeof t)throw Error("Invalid custom attributes");this.attributes=o()(t)}var t,n,r;return t=e,r=[{key:"constructClientAttributesFromHeaders",value:function(e){var t,n=((t={})[b.CLIENT_PLATFORM]=e[p.APP_NAME],t[b.CLIENT_VERSION_STR]=e[p.APP_VERSION],t[b.CLIENT_USER_AGENT]=e[p.APP_USER_AGENT],t[b.CLIENT_ALL_CAPABILITIES]=e[p.APP_CAPABILITIES],t);return o()(n)}}],(n=[{key:"setAttribute",value:function(e,t){this.attributes=this.attributes.set(e,o()(t))}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getAttributesJS",value:function(){return this.getAttributes()}},{key:"clearAttribute",value:function(){}