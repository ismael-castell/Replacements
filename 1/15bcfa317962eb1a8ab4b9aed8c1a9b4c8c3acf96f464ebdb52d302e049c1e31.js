(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{39:function(e,t,s){"use strict";var r=s(4),a=s.n(r),n=s(5),i=s.n(n),o=s(6),c=s.n(o),l=s(7),d=s.n(l),u=s(3),p=s.n(u),v=s(0),f=s(9),m=s(40),g=s(1),y=s(2);function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var w=function(e){c()(RewardsDropsCard,e);var t=_createSuper(RewardsDropsCard);function RewardsDropsCard(){var e;return a()(this,RewardsDropsCard),(e=t.call(this)).container=null,e.card=null,e.gradient=null,e}return i()(RewardsDropsCard,[{key:"componentDidMount",value:function componentDidMount(){this.setupForAnimationEvents(),this.addAnimationEvents()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.setupForAnimationEvents()}},{key:"addAnimationEvents",value:function addAnimationEvents(){var e=this;this.container.addEventListener("mouseenter",(function(){return e.onMouseEnter()})),this.container.addEventListener("mouseleave",(function(){return e.onMouseLeave()}))}},{key:"calculateCardStyles",value:function calculateCardStyles(e,t,s,r){return e?{gradientStyle:t,badgeStyle:"background-color: ".concat(r,";color: ").concat(s,";")}:{gradientStyle:t,badgeStyle:void 0}}},{key:"displayOverlay",value:function displayOverlay(e,t){t.preventDefault(),t.stopPropagation(),m.a.display(e)}},{key:"onMouseEnter",value:function onMouseEnter(){var e=this;-1===this.gradient.className.split(" ").indexOf("gradient-over")&&(this.gradient.className+=" gradient-over"),this.cardRotator=function(t){return e.rotateCard(t)},this.container.style.transform="scale3d(1.03, 1.03, 1.03)",this.container.addEventListener("mousemove",this.cardRotator)}},{key:"onMouseLeave",value:function onMouseLeave(){this.gradient.className.replace(/\bgradient-over\b/g,""),this.container.removeEventListener("mousemove",this.cardRotator),this.container.style.transform="",this.card.style.transition="",this.card.style.transform="",this.gradient.style.transition="",this.gradient.style.top="",this.gradient.style.left=""}},{key:"rotateCard",value:function rotateCard(e){var t=this.card.getBoundingClientRect(),s=e.clientX,r=e.clientY,a=s-t.x,n=r-t.y,i={x:a-t.width/2,y:n-t.height/2},o=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2));this.card.style.transition="transform 0.1s ease-out",this.card.style.perspecitve="".concat(3*t.width,"px"),this.card.style.transform="\n        scale3d(1.03, 1.03, 1.03)\n        rotate3d(\n          ".concat(-i.y/100,",\n          ").concat(i.x/100,",\n          0,\n          ").concat(2*Math.log(o),"deg\n        )\n      ");var c=t.width-a||0,l=t.height-n||0;this.gradient.style.transition="none",this.gradient.style.top="".concat(l/t.height*100-100,"%"),this.gradient.style.left="".concat(c/t.width*100-100,"%")}},{key:"setupForAnimationEvents",value:function setupForAnimationEvents(){this.container=this.base,this.card=this.container.querySelector(".card"),this.gradient=this.container.querySelector(".gradient")}},{key:"render",value:function render(e){var t=this,s=e.id,r=e.classList,a=e.productImage,n=e.sponsorImage,i=e.backgroundColor,o=e.foregroundColor,c=e.unlockedDate,l=e.title,d=e.isRare,u=e.styleDeclaration,p=y.a.classNames(r,"card"),v=g.a.translate(c).shortDayAndMonth,m="color: ".concat(d?i:o,";"),w=this.calculateCardStyles(d,u,o,i),b=w.gradientStyle,R=w.badgeStyle,k=y.a.classNames("title",l.length>=35?"long":"short");return h("div",{class:this.constructor.name},h("div",{role:"button",key:s,class:p,onclick:function onclick(e){return t.displayOverlay(s,e)}},h("div",{class:"gradient",style:b}),h("div",{class:"sponsor-image"},h(f.a,{class:"img",src:n,size:"x40"})),h("div",{class:"product-image"},a.endsWith(".gif")?h(f.a,{class:"img",src:a,size:"original"}):h(f.a,{class:"img",src:a,size:"384x200"})),d&&h("div",{class:"rare-badge",style:R},g.a.translate("rewards.drops.rare")),h("div",{class:"unlocked-date",style:m},g.a.translate("rewards.drops.unlockedDate",{date:v})),h("div",{class:k},l)))}}]),RewardsDropsCard}(v.b);t.a=w},40:function(e,t,s){"use strict";var r=s(4),a=s.n(r),n=s(5),i=s.n(n),o=s(6),c=s.n(o),l=s(7),d=s.n(l),u=s(3),p=s.n(u),v=s(0),f=s(9),m=s(8),g=s(39),y=s(18),w=s(14),b=s(31),R=s(41),k=s.n(R),S=s(1);function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var P=/\\n/g,D=/{code}/g,C="psa",L=["code",C,"text"],I=function(e){c()(RewardsDropsOverlay,e);var t=_createSuper(RewardsDropsOverlay);function RewardsDropsOverlay(){return a()(this,RewardsDropsOverlay),t.apply(this,arguments)}return i()(RewardsDropsOverlay,[{key:"renderPresentedBy",value:function renderPresentedBy(e){return h("div",{class:"presented-by"},h("div",{class:"label"},S.a.translate("rewards.drops.presentedBy")),h(f.a,{class:"img",src:e,size:"x54"}))}},{key:"toggleInstructions",value:function toggleInstructions(e){e.preventDefault(),e.stopPropagation(),Object(v.a)(e.currentTarget).parent().find(".instructions").toggleClass("show")}},{key:"hasInstructions",value:function hasInstructions(e){return L.includes(e)}},{key:"componentDidUpdate",value:function componentDidUpdate(){Object(v.a)(".markdown a").attr("target","_blank")}},{key:"renderReward",value:function renderReward(e){var t=this;return e.inventory.dropType===C?h("div",{class:"reward",role:"button"},h("div",{class:"wrapper"},h("div",{class:"title"},this.getLocalizedTitle(e)),this.renderDescription(this.getLocalizedDescription(e))),h("div",{class:"image"},h(f.a,{class:"img",src:e.inventory.imageUrl,size:"240x272"}))):h("div",{class:"reward",onclick:function onclick(e){return t.toggleInstructions(e)},role:"button"},h("div",{class:"wrapper"},h("div",{class:"title"},this.getLocalizedTitle(e)),h("div",{class:"how-to-claim"},S.a.translate("rewards.drops.howToClaim"))),h("div",{class:"image"},h(f.a,{class:"img",src:e.inventory.imageUrl,size:"240x272"})))}},{key:"isPromoCodePending",value:function isPromoCodePending(e){return e&&"pending"===e.toLowerCase()}},{key:"insertPromoCode",value:function insertPromoCode(e,t){return e.replace(D,t||"")}},{key:"renderDescription",value:function renderDescription(e){var t=(this.state&&this.state.drop).promoCode;if(this.isPromoCodePending(t))return h("div",{class:"description"},S.a.translate("rewards.drops.checkBackSoon"));var s=this.insertPromoCode(e.replace(P,"\n"),t);return h("div",{class:"description markdown",dangerouslySetInnerHTML:{__html:k.a.parse(s,{useInlineLinks:!0})}})}},{key:"isValidInventoryItem",value:function isValidInventoryItem(e){return e&&e.inventory&&e.inventory.imageUrl&&e.inventory.dropType&&e.title&&this.getLocalizedTitle(e)&&e.description&&this.getLocalizedDescription(e)}},{key:"getLocalizedTitle",value:function getLocalizedTitle(e){var t=S.a.get(!0);return e.title[t]||e.title.en_US}},{key:"getLocalizedDescription",value:function getLocalizedDescription(e){var t=S.a.get(!0);return e.description[t]||e.description.en_US}},{key:"renderInventory",value:function renderInventory(e){var t=this;if(e){var s=e.map((function(e){if(t.isValidInventoryItem(e))return h("div",{class:"wrapper"},h("div",{class:"item"},t.renderReward(e),t.hasInstructions(e.inventory.dropType)&&t.renderInstructions(t.getLocalizedDescription(e))))}));return h("div",{class:"inventory"},s)}}},{key:"renderInstructions",value:function renderInstructions(e){return h("div",{class:"instructions"},h("div",{class:"how-to-claim-title"},S.a.translate("rewards.drops.howToClaim")),this.renderDescription(e))}},{key:"fetchDetails",value:function fetchDetails(e){var t=this;return b.a.fetchDetails(e).then((function(e){t.setState({drop:e})})).catch((function(e){t.setState({error:e})}))}},{key:"close",value:function close(){Object(v.a)(document.body).removeClass("no-scroll"),Object(v.a)(this.base).html(""),Object(v.h)(null,document.body,this.base)}},{key:"addListeners",value:function addListeners(){var e=this;document.addEventListener("keydown",this.keyHandler=function(t){"Escape"===t.code&&e.close()}),document.addEventListener("router.navigation.go",(function(){return e.close()}))}},{key:"componentDidMount",value:function componentDidMount(){this.fetchDetails(this.props.id),this.addListeners()}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.keyHandler)}},{key:"renderClose",value:function renderClose(){var e=this;return h("div",{class:"close",onclick:function onclick(t){return e.close(t)}},h(m.a,{name:"close"}))}},{key:"renderErrorOrLoading",value:function renderErrorOrLoading(e){if(e){var t=document.querySelector(".InformBubble"),s=function dismiss(){return Object(v.h)(null,document.body,t)};return s(),h(y.a,{theme:"error",icon:"error",onDismissHandler:s},e.message)}return h("div",{class:this.constructor.name},h("div",{class:"background"}),this.renderClose(),h(w.a,null))}},{key:"renderFansUnlocked",value:function renderFansUnlocked(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e||t>=1e3,r="";if(s){var a={number:S.a.kFormatter(t)},n=e?"rewards.drops.cappedOnly.fansUnlocked":"rewards.drops.fansUnlocked";r=S.a.translate(n,a)}return h("div",{class:"fans-unlocked"},r)}},{key:"renderDropsetDescription",value:function renderDropsetDescription(e){return e&&h("div",{class:"dropset-description"},e)}},{key:"render",value:function render(){var e=this,t=this.state,s=t.drop,r=t.error;return this.props.id&&s&&!r?(Object(v.a)(document.body).addClass("no-scroll"),h("div",{class:this.constructor.name},h("div",{class:"background"}),this.renderClose(),h("div",{role:"button",class:"content",onclick:function onclick(t){return Object(v.a)(t.target).is(".content")&&e.close(t)}},this.renderPresentedBy(s.sponsorImages.presentedByUrl),this.renderFansUnlocked(s.cappedDrop,s.numberOfFansUnlocked),h("div",{class:"background-title-wrapper"},h("div",{class:"background-title"},s.dropsetTitle)),h(g.a,{id:s.id,classList:"overlay",productImage:s.dropsetImages.cardUrl,sponsorImage:s.sponsorImages.cardOverlayUrl,backgroundColor:s.rarity&&s.rarity.badgeBackgroundColor,foregroundColor:s.rarity&&s.rarity.badgeForegroundColor,unlockedDate:s.unlockedDateMillis,title:s.dropsetTitle,isRare:s.rarity&&s.rarity.rare,styleDeclaration:s.rarity&&s.rarity.styleDeclaration}),this.renderDropsetDescription(s.dropsetDescription),this.renderInventory(s.inventory)))):this.renderErrorOrLoading(r)}}],[{key:"display",value:function display(e){Object(v.h)(h(RewardsDropsOverlay,{id:e}),document.body)}}]),RewardsDropsOverlay}(v.b);t.a=I},61:function(e,t,s){"use strict";var r=s(4),a=s.n(r),n=s(5),i=s.n(n),o=s(6),c=s.n(o),l=s(7),d=s.n(l),u=s(3),p=s.n(u),v=s(0),f=s(9),m=s(1);function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var g=function(e){c()(RewardsPassAvailabilityContent,e);var t=_createSuper(RewardsPassAvailabilityContent);function RewardsPassAvailabilityContent(){return a()(this,RewardsPassAvailabilityContent),t.apply(this,arguments)}return i()(RewardsPassAvailabilityContent,[{key:"renderIntroduction",value:function renderIntroduction(){return h("div",{class:"introduction"},m.a.translate("rewards.passes.introducing",{pass:h("span",{class:"pass"},m.a.translate(this.props.isTeamPass?"rewards.passes.teamPass":"rewards.passes.fanPass"))}))}},{key:"renderImage",value:function renderImage(){var e=this.props.isTeamPass?"/rewards/pass/team-pass-rewards.png":"/rewards/pass/fan-pass-rewards.png";return h("div",{class:"message-image"},h(f.a,{class:"helper-image",src:e,size:"730x438"}))}},{key:"render",value:function render(){return h("div",{class:this.constructor.name},h("div",{class:"message"},h("div",{class:"message-text"},h("div",{class:"header"},this.renderIntroduction(),m.a.translate("rewards.passes.title")),h("div",{class:"headline"},m.a.translate("rewards.passes.unlock")),h("div",{class:"details"},m.a.translate(this.props.isTeamPass?"rewards.passes.teamDetails":"rewards.passes.fanDetails")),this.renderImage(),h("div",{class:"rule"}),h("div",{class:"headline"},m.a.translate("rewards.passes.buy")),h("div",{class:"details"},m.a.translate("rewards.passes.start")))))}}]),RewardsPassAvailabilityContent}(v.b);t.a=g},70:function(e,t,s){"use strict";var r=s(4),a=s.n(r),n=s(5),i=s.n(n),o=s(46),c=s.n(o),l=s(6),d=s.n(l),u=s(7),p=s.n(u),v=s(3),f=s.n(v),m=s(0),g=s(1),y=s(8),w=s(15);function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=f()(e);if(t){var a=f()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return p()(this,s)}}var b=function(e){d()(LogInReminder,e);var t=_createSuper(LogInReminder);function LogInReminder(){var e;return a()(this,LogInReminder),(e=t.call(this)).close=e.close.bind(c()(e)),e}return i()(LogInReminder,[{key:"close",value:function close(){window.sessionStorage.setItem("loginDismissed","true"),Object(m.a)(this.base).html(""),Object(m.h)(null,document.body,this.base)}},{key:"render",value:function render(){return h("div",{class:"LogInReminder"},h("div",{class:"bar"},h("div",{class:"message"},g.a.translate("rewards.status.earn",{action:h("a",{onclick:function onclick(){return w.a.login(window.location.href)},class:"link"},g.a.translate("rewards.status.login"))})),h("div",{class:"close",onClick:this.close},h(y.a,{name:"close"}))))}}]),LogInReminder}(m.b);t.a=b},77:function(e,t,s){"use strict";var r=s(4),a=s.n(r),n=s(5),i=s.n(n),o=s(6),c=s.n(o),l=s(7),d=s.n(l),u=s(3),p=s.n(u),v=s(0),f=s(22),m=s(15),g=s(9),y=s(8),w=s(1),b=s(2);function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var R=function(e){c()(RewardsStartEarning,e);var t=_createSuper(RewardsStartEarning);function RewardsStartEarning(){return a()(this,RewardsStartEarning),t.apply(this,arguments)}return i()(RewardsStartEarning,[{key:"render",value:function render(){var e=this.props.actionOnClickHandler;return h("div",{class:b.a.classNames(this.constructor.name)},h("div",{class:"text"},h("div",{class:"title"},w.a.translate("rewards.loggedOut.title")),h("div",{class:"body"},w.a.translate("rewards.loggedOut.body"),y.a.unicode("space"),h("a",{class:"link",href:"https://leagueoflegends.com/legal/privacy",target:"_blank"},w.a.translate("rewards.privacyPolicy"))),h("div",{class:"action-container"},h("div",{class:"action login",onclick:e,role:"button"},w.a.translate(this.props.loggedIn?"rewards.optIn":"rewards.logAndOptIn")))),h("div",{class:"image"},h(g.a,{src:"/rewards/hextech-chest.png",size:"668x558"})))}}]),RewardsStartEarning}(v.b);function RewardsBanner_createSuper(e){var t=function RewardsBanner_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var k=function(e){c()(RewardsBanner,e);var t=RewardsBanner_createSuper(RewardsBanner);function RewardsBanner(){return a()(this,RewardsBanner),t.apply(this,arguments)}return i()(RewardsBanner,[{key:"round",value:function round(e){var t=parseFloat(e);return t===Number.NaN?0:Math.round(t)}},{key:"render",value:function render(){return h("div",{class:this.constructor.name,style:g.a.background("/rewards/finals_header.jpg")},h("div",{class:"personal-text"},h("div",{class:"username"},this.props.summonerName)),h("div",{class:"stats"},void 0!==this.props.gamesWatchedCount&&h("div",{class:"stat"},h("div",{class:"number"},this.props.gamesWatchedCount),h("div",{class:"text"},w.a.translate("rewards.gamesWatched"))),void 0!==this.props.hoursWatchedCount&&h("div",{class:"stat"},h("div",{class:"number"},this.round(this.props.hoursWatchedCount)),h("div",{class:"text"},w.a.translate("rewards.hoursWatched")))))}}]),RewardsBanner}(v.b),S=s(59),P=s(60),D=s(62),C=s(63);function RewardsTopNav_createSuper(e){var t=function RewardsTopNav_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var L=function(e){c()(RewardsTopNav,e);var t=RewardsTopNav_createSuper(RewardsTopNav);function RewardsTopNav(){return a()(this,RewardsTopNav),t.apply(this,arguments)}return i()(RewardsTopNav,[{key:"componentWillMount",value:function componentWillMount(){this.addListeners()}},{key:"addListeners",value:function addListeners(){var e=this;this.onTabSelected=function(t){e.setState({selectedTab:t}),e.props.onTabSelectedHandler(t)}}},{key:"render",value:function render(){var e=this;return this.state.selectedTab||this.setState({selectedTab:this.props.tabs[0]}),h("div",{class:this.constructor.name},this.props.tabs.map((function(t){return h("div",{role:"button",onclick:function onclick(){return e.onTabSelected(t)},class:b.a.classNames("tab",e.state.selectedTab===t&&"selected")},w.a.translate(t))})))}}]),RewardsTopNav}(v.b),I=s(24),O=s.n(I),T=s(14),M=s(18),N=s(39),A=s(31),_=s(12),E=s(29);function RewardsDrops_createSuper(e){var t=function RewardsDrops_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var x=function(e){c()(RewardsDrops,e);var t=RewardsDrops_createSuper(RewardsDrops);function RewardsDrops(){var e;return a()(this,RewardsDrops),(e=t.call(this)).log=new v.c(e.constructor.name),e}return i()(RewardsDrops,[{key:"componentWillMount",value:function componentWillMount(){this.addListeners()}},{key:"addListeners",value:function addListeners(){var e=this;this.onClickSave=function(){e.setState({sidebarEnabled:!1})},this.onClickSidebarKnuckle=function(){e.setState({sidebarEnabled:!0})}}},{key:"fetchList",value:function fetchList(){var e=this;return Promise.all([A.a.fetchList(),_.a.fetchLeagues()]).then((function(t){var s=O()(t,2),r=s[0],a=s[1],n=r.length&&r[0].leagueID,i=e.filterLeaguesWithDrops(a.leagues,r),o=e.mapDropsByLeagueAndYearEarned(r,a),c=JSON.parse(JSON.stringify(Object.values(i)));c.sort((function(e,t){return Object(_.d)(e,t)})),e.setState({leagues:i,drops:n?o:r,sortByLeague:n,selectedLeague:e.state.selectedLeague||c&&c.length&&c[0]})})).catch((function(t){e.setState({error:t})}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){v.j.removeListener("webSessionClient.ready",this.sessionReadyHandler)}},{key:"componentDidMount",value:function componentDidMount(){var e=this;v.j.onChange("webSessionClient.ready",this.sessionReadyHandler=function(){return e.fetchList()})}},{key:"filterLeaguesWithDrops",value:function filterLeaguesWithDrops(e,t){return e.filter((function(e){return t.some((function(t){return t.leagueID===e.id}))})).reduce((function(e,t){return e[t.id]=t,e}),{})}},{key:"isSelected",value:function isSelected(e){return this.state.selectedLeague&&this.state.selectedLeague.id===e.id}},{key:"mapDropsByLeagueAndYearEarned",value:function mapDropsByLeagueAndYearEarned(e){return e.reduce((function(e,t){var s=new Date;s.setTime(t.unlockedDateMillis);var r=s.getFullYear();e[t.leagueID]||(e[t.leagueID]={});var a=e[t.leagueID];return a[r]?a[r].push(t):a[r]=[t],e}),{})}},{key:"selectLeague",value:function selectLeague(e){this.setState({selectedLeague:e})}},{key:"renderCards",value:function renderCards(e,t){return this.state.sortByLeague&&t?h("div",{class:"years"},this.renderCardsForLeague(e[t.id])):h("div",{class:"drops"},this.renderCardsSortedByDateUnlocked(e))}},{key:"renderCardsSortedByDateUnlocked",value:function renderCardsSortedByDateUnlocked(e){return b.a.sortListByPropertyValue(e,"unlockedDateMillis").reverse().map((function(e){return h(N.a,{id:e.id,productImage:e.dropsetImages.cardUrl,sponsorImage:e.sponsorImages.cardOverlayUrl,backgroundColor:e.rarity&&e.rarity.badgeBackgroundColor,foregroundColor:e.rarity&&e.rarity.badgeForegroundColor,unlockedDate:e.unlockedDateMillis,title:e.dropsetTitle,isRare:e.rarity&&e.rarity.rare,styleDeclaration:e.rarity&&e.rarity.styleDeclaration})}))}},{key:"renderCardsForLeague",value:function renderCardsForLeague(e){var t=this;return Object.keys(e).sort().reverse().map((function(s,r){return h(E.a,{titleClass:"year-title",title:s,open:0===r,chevron:"after-title"},h("div",{class:"drops"},t.renderCardsSortedByDateUnlocked(e[s])))}))}},{key:"renderNoDrops",value:function renderNoDrops(){var e=function noDrop(e){return h("div",{class:"no-drops "+e},h("div",{class:"image"},h(g.a,{class:"img",src:"/rewards/drops/logo-stroke.png",size:"100x83"})),h("div",{class:"label"},w.a.translate("rewards.drops.noDrops")),h("div",{class:"title"},w.a.translate("rewards.drops.getDrops")))},t=b.a.classNames(this.constructor.name,"no-drops");return h("div",{class:t},e("right"),e("left"),e("center"))}},{key:"renderErrorOrLoading",value:function renderErrorOrLoading(e){return h("div",{class:this.constructor.name},e?h(M.a,{theme:"error",icon:"error"},e.message):h(T.a,null))}},{key:"renderLeagues",value:function renderLeagues(e,t){var s=this;return e.map((function(e,r){var a=b.a.classNames("league",s.isSelected(e)&&"selected");return h("li",{class:a,onClick:function onClick(){return s.selectLeague(e,r)},role:"button"},h("div",{class:"info"},h(g.a,{class:"image",src:e.image,size:"60"}),h("div",{class:"label"},h("div",{class:"name"},e.name),h("div",{class:"dropCount"},w.a.translate("rewards.drops.sidebar.dropCount",{number:t[e.id]})))))}))}},{key:"renderSidebar",value:function renderSidebar(e,t){var s=Object.values(e);s.sort((function(e,t){return Object(_.d)(e,t)}));var r=Object.keys(t).reduce((function(e,s){var r=t[s],a=Object.keys(r).reduce((function(e,t){return e+r[t].length}),0);return e[s]=a,e}),{}),a=b.a.classNames("sidebar",this.state.sidebarEnabled?"sidebar-enabled":"");return h("div",{class:a},h("div",{class:"header"},h("div",{class:"filter"},w.a.translate("rewards.drops.sidebar.title")),h("div",{class:"save",onClick:this.onClickSave,role:"button"},w.a.translate("navigation.save"))),h("ul",{class:"leagues"},this.renderLeagues(s,r)))}},{key:"renderSidebarKnuckle",value:function renderSidebarKnuckle(){return h("div",{class:"sidebar-knuckle",onClick:this.onClickSidebarKnuckle,role:"button"},w.a.translate("rewards.drops.sidebar.title"))}},{key:"render",value:function render(){if(!this.state.drops||this.state.error)return this.renderErrorOrLoading(this.state.error);if(0===Object.values(this.state.drops).length)return this.renderNoDrops();var e=b.a.classNames(this.constructor.name,!this.state.sortByLeague&&"no-sidebar");return h("div",{class:"year-wrapper"},this.state.sortByLeague&&this.renderSidebarKnuckle(),h("div",{class:e},this.state.sortByLeague&&this.renderSidebar(this.state.leagues,this.state.drops),this.renderCards(this.state.drops,this.state.selectedLeague)))}}]),RewardsDrops}(v.b),U=s(38),W=s(32),j=s(21);function RewardsMission_createSuper(e){var t=function RewardsMission_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var H=b.a.times.DAY,B=365*b.a.times.DAY,F=function(e){c()(RewardsMission,e);var t=RewardsMission_createSuper(RewardsMission);function RewardsMission(){var e;return a()(this,RewardsMission),(e=t.call(this)).log=new v.c(e.constructor.name),e.addListeners(),e}return i()(RewardsMission,[{key:"addListeners",value:function addListeners(){var e=this;v.j.onChange("dataDragon.setup",this.onDataDragonSetup=function(t){t&&e.getIconUrl()})}},{key:"componentDidMount",value:function componentDidMount(){j.a.setup(),this.renderDescription()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.renderDescription(),b.a.getDeepValue(this.props,"item.iconUrl")!==b.a.getDeepValue(e,"item.iconUrl")&&this.onDataDragonSetup(v.j.get("dataDragon.setup"))}},{key:"componentWillUnmount",value:function componentWillUnmount(){v.j.removeListener("dataDragon.setup",this.onDataDragonSetup),v.j.set("dataDragon.setup",!1)}},{key:"renderDescription",value:function renderDescription(){var e=b.a.getDeepValue(this.props,"item.objectives");if(e)for(var t=this.base.querySelectorAll(".description"),s=0;s<t.length;s++)t[s].innerHTML=e[s].description[w.a.get(!0)];else this.base.querySelector(".description").innerHTML=this.props.item.description[w.a.get(!0)]}},{key:"renderRewards",value:function renderRewards(e,t){var s=w.a.get(!0),r=b.a.classNames(t&&"reward-completed","rewards");return h("div",{class:r},e.map((function(e){return h("div",{class:"reward"},h("div",{class:"reward-description"},e.description[s]))})))}},{key:"renderProgressBar",value:function renderProgressBar(e,t,s){if(e)return h("div",{class:"completed-progress progress-bar"});var r=100*t/(t+s),a=b.a.classNames(0===r&&"no-progress","mission-progress");return h("div",{class:"active-progress progress-bar"},h("div",{class:a,style:"width: "+r+"%"}))}},{key:"renderTimeLeft",value:function renderTimeLeft(e){if(!(e.remainingMillis>B)){var t,s,r={"date.daysLeft":b.a.times.DAY,"date.hoursLeft":b.a.times.HOUR,"date.minutesLeft":b.a.times.MINUTE};Object.keys(r).some((function(a){if(t=e.remainingMillis/r[a],s=w.a.translate(a,{time:Math.ceil(t)}),t>1)return!0}));var a=b.a.classNames("timeleft",e.remainingMillis<H&&"red-warning");return h("div",{class:a},s)}}},{key:"renderProgress",value:function renderProgress(e,t){return h("div",{class:"progress"},e," / ",e+t)}},{key:"getAnimateClass",value:function getAnimateClass(e,t,s){if(t&&e.celebrationAnimationCompleted)return s?"open":"close"}},{key:"getIconUrl",value:function getIconUrl(){var e=b.a.getDeepValue(this.props,"item.iconUrl");if(e){var t=e.split("/").pop();if(e.indexOf("/Missions/")>-1)return this.setState({iconUrl:j.a.getMissionImage(t)});if(e.indexOf("/profile-icons/")>-1){var s=t.split(".")[0];return this.setState({iconUrl:j.a.getProfileIcon(s)})}this.log.warn("Could not get icon URL from LCU path",e),this.setFallbackIcon()}else this.log.warn("LCU path not defined",e)}},{key:"setFallbackIcon",value:function setFallbackIcon(){this.log.warn("Current icon failed to load",this.state.iconUrl),this.setState({fallback:!0,iconUrl:void 0})}},{key:"renderConnective",value:function renderConnective(e,t,s){if(!s){var r=w.a.translate("rewards.multiobjective.and");if(""!==e){for(var a=-1,n=!1;!n;){var i=(a=e.indexOf(t,a+1))-1>=0?parseInt(e.charAt(a-1),10):NaN,o=a+1>=e.length?NaN:parseInt(e.charAt(a+1),10);isNaN(i)&&isNaN(o)&&(n=!0)}var c=e.indexOf("or",a+1)>=0?"rewards.multiobjective.or":"rewards.multiobjective.and";r=w.a.translate(c)}return h("div",{class:"objective-joiner"},r)}}},{key:"renderObjectives",value:function renderObjectives(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.props,a=r.renderCompleted,n=r.renderAnimation,i=1===e.length;return h("div",{class:"objectives"},e.map((function(r,o){return h("div",{class:"objective"},h("div",{class:b.a.classNames(r.isComplete?"completed":"active","description",!a&&"available",!i&&"multiple")}),h("div",{class:"progress-info"},t.renderProgressBar(!n&&r.isComplete,r.completedSteps,r.remainingSteps),t.renderProgress(r.completedSteps,r.remainingSteps)),t.renderConnective(s,o+1,e.length===o+1))})))}},{key:"renderEntryBody",value:function renderEntryBody(){var e=this.props,t=e.item,s=e.renderCompleted,r=w.a.get(!0),a=b.a.getDeepValue(this.props,"item.objectives"),n=b.a.getDeepValue(this.props,"item.completionExpression");if(a)return h("div",{class:"entry-body"},h("div",{class:"title"},t.title[r]),this.renderObjectives(a,n));var i=b.a.classNames(s?"completed":"active","description");return h("div",{class:"entry-body"},h("div",{class:"title"},t.title[r]),h("div",{class:i}),h("div",{class:"progress-info"},this.renderProgressBar(s,t.completedSteps,t.remainingSteps),this.renderProgress(t.completedSteps,t.remainingSteps)))}},{key:"renderMissionEntry",value:function renderMissionEntry(e){var t=this.props,s=t.item,r=t.renderCompleted;return h("div",{class:"full-entry"},h("div",{class:"entry"},this.renderImage(r,e),this.renderEntryBody()),h("div",{class:"footer"},this.renderRewards(s.rewards,r),r||this.renderTimeLeft(s)))}},{key:"renderImage",value:function renderImage(e,t){var s=this;return h("div",{class:b.a.classNames(e&&"completed","reward-image")},this.state.fallback&&h(y.a,{name:"missionIconFallback"}),t&&h("img",{class:"icon",src:t,onerror:function onerror(){return s.setFallbackIcon()}}))}},{key:"render",value:function render(){var e=this,t=this.props,s=t.item,r=t.renderCompleted;if(s){var a=this.getAnimateClass(s,s.isComplete,r),n=this.state.iconUrl;return h("div",{class:b.a.classNames(this.constructor.name,a),onanimationend:function onanimationend(t){return e.props.animationEndHandler&&e.props.animationEndHandler(t)}},this.renderMissionEntry(n))}}}]),RewardsMission}(v.b);function RewardsPassDescription_createSuper(e){var t=function RewardsPassDescription_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var z=function(e){c()(RewardsPassDescription,e);var t=RewardsPassDescription_createSuper(RewardsPassDescription);function RewardsPassDescription(){return a()(this,RewardsPassDescription),t.apply(this,arguments)}return i()(RewardsPassDescription,[{key:"renderIntroduction",value:function renderIntroduction(){return h("div",{class:"introduction"},w.a.translate("rewards.passes.introducing",{pass:h("span",{class:"pass"},w.a.translate(this.props.isTeamPass?"rewards.passes.teamPass":"rewards.passes.fanPass"))}))}},{key:"renderImage",value:function renderImage(){var e=this.props.isTeamPass?"/rewards/pass/team-pass-store.png":"/rewards/pass/fan-pass-store.png";return h("div",{class:"message-image"},h(g.a,{class:"helper-image",src:e,size:"616x438"}))}},{key:"renderWardSkinEmotes",value:function renderWardSkinEmotes(){var e=this.props.isTeamPass?"/rewards/pass/team-pass-emote.png":"/rewards/pass/fan-pass-emote.png";return h("div",{class:"message-image"},h(g.a,{class:"helper-image",src:e,size:"626x324"}))}},{key:"renderChroma",value:function renderChroma(){var e=this.props.isTeamPass?"/rewards/pass/team-dragonslayer-braum.png":"/rewards/pass/fan-dragonslayer-braum.png",t=this.props.isTeamPass?"helper-image":"smaller-helper-image";return h("div",{class:"message-image"},h(g.a,{class:t,src:e,size:"616x374"}))}},{key:"renderIcon",value:function renderIcon(){var e=this.props.isTeamPass?"/rewards/pass/icon-level-one.png":"/rewards/pass/icon-pro-poro.png",t=this.props.isTeamPass?"/rewards/pass/icon-level-two.png":"/rewards/pass/icon-screemo.png",s=this.props.isTeamPass?w.a.translate("rewards.passes.levels",{number:1}):w.a.translate("rewards.fanPass.levelOneDescription"),r=this.props.isTeamPass?w.a.translate("rewards.passes.levels",{number:2}):w.a.translate("rewards.fanPass.levelTwoDescription");return h("div",{class:"message-image center-flex"},h("div",{class:"icon-padded"},h(g.a,{class:"icon-image",src:e,size:"200x200"}),h("div",{class:"icon-title"},s)),h("div",{class:"icon-info"},h(g.a,{class:"icon-image",src:t,size:"200x200"}),h("div",{class:"icon-title"},r)))}},{key:"renderHeadline",value:function renderHeadline(e){return h("div",{class:"headline"},w.a.translate(e))}},{key:"renderDetails",value:function renderDetails(e){return h("div",{class:"details"},w.a.translate(e))}},{key:"render",value:function render(){var e=this.props.isTeamPass?"teamPass":"fanPass";return h("div",{class:this.constructor.name},h("div",{class:"message"},h("div",{class:"message-text"},h("div",{class:"header"},w.a.translate("rewards.passes.title")),h("div",{class:"details"},w.a.translate(this.props.isTeamPass?"rewards.passes.teamDetails":"rewards.passes.fanDetails")),h("div",{class:"rule"}),this.renderHeadline("rewards."+e+".levelup"),this.renderDetails("rewards."+e+".levelDetails"),this.renderIcon(),this.renderHeadline("rewards."+e+".passRewards"),this.renderDetails("rewards."+e+".rewardDetails"),this.renderWardSkinEmotes(),this.renderHeadline("rewards.passes.chromaReward"),this.renderDetails("rewards."+e+".chromaDetails"),this.renderChroma(),h("div",{class:"rule"}),this.renderHeadline("rewards.passes.buy"),this.renderDetails("rewards.passes.start"),this.renderImage())))}}]),RewardsPassDescription}(v.b);function RewardsPassSummary_createSuper(e){var t=function RewardsPassSummary_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var V=function(e){c()(RewardsPassSummary,e);var t=RewardsPassSummary_createSuper(RewardsPassSummary);function RewardsPassSummary(){return a()(this,RewardsPassSummary),t.apply(this,arguments)}return i()(RewardsPassSummary,[{key:"renderDescription",value:function renderDescription(e,t,s,r){var a=b.a.getDeepValue(t,"passMissions.progression.missionsCompleted")||0,n=b.a.getDeepValue(t,"passMissions.progression.totalMissions")||0,i=n>0&&a===n,o=i?w.a.translate("rewards.missionsCompleted"):w.a.translate("rewards.passes.levels",{number:t.passMissions.progression.level});return h("div",{class:"pass-description"},h("img",{class:b.a.classNames("pass-icon",e&&"selected"),src:t.iconUrl}),h("div",{class:"pass-details"},h("div",{class:b.a.classNames("title",e&&"selected")},t.name),h("div",{class:b.a.classNames("missions-info",i&&"missions-complete")},o)),!s&&h("div",{class:"arrow"},h(y.a,{name:"arrow",direction:r?"up":"down"})))}},{key:"isPassCompleted",value:function isPassCompleted(e){return!e.find((function(e){return"complete"!==e.status}))}},{key:"render",value:function render(){var e=this.props,t=e.columnItem,s=e.activePass,r=e.onPassSelectedHandler,a=e.selected,n=e.expanded,i=b.a.classNames(this.constructor.name,t&&"column-item",a&&"selected",n&&"expanded");return h("div",{class:i,onclick:function onclick(){return r(s)},role:"button"},h("div",{class:"pass-layout"},this.renderDescription(a,s,t,n)))}}]),RewardsPassSummary}(v.b);function InformPassRewards_createSuper(e){var t=function InformPassRewards_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var K={lcs:["/rewards/pass/LCS-icon.png","/rewards/pass/LCS-emote.png","/rewards/pass/LCS-icon-lvl2.png","/rewards/pass/LCS-ward.png","/rewards/pass/LCS-dragonslayer-braum.png"],lec:["/rewards/pass/LEC-icon.png","/rewards/pass/LEC-emote.png","/rewards/pass/LEC-icon-lvl2.png","/rewards/pass/LEC-ward.png","/rewards/pass/LEC-dragonslayer-braum.png"],fan:["/rewards/pass/icon-pro-poro.png","/rewards/pass/teampass-olaf-inventory.png","/rewards/pass/icon-screemo.png","/rewards/pass/fan-ward.png","/rewards/pass/fan-dragonslayer-braum.png"]},Y=function(e){c()(InformPassRewards,e);var t=InformPassRewards_createSuper(InformPassRewards);function InformPassRewards(){return a()(this,InformPassRewards),t.apply(this,arguments)}return i()(InformPassRewards,[{key:"componentWillMount",value:function componentWillMount(){this.addListeners()}},{key:"addListeners",value:function addListeners(){var e=this;this.showModal=function(){e.setState({active:!0})},this.hideModal=function(){e.setState({active:!1})}}},{key:"render",value:function render(){var e=K[this.props.passType];return h("div",{class:this.constructor.name},h("a",{class:"link",onclick:this.showModal},w.a.translate("rewards.passes.viewRewards")),this.state.active&&h("div",{class:"modal"},h("div",{class:"content"},h("table",null,h("thead",null,h("tr",null,h("th",{class:"modal-title"},w.a.translate("rewards.missionsCompleted")),h("th",{class:"modal-title"},w.a.translate("rewards.passes.earned"),h("div",{class:"close",onclick:this.hideModal},h(y.a,{name:"bubbleClose"}))))),h("tbody",null,h("tr",null,h("th",null,"1"),h("th",{class:"icon-rewards"},h(g.a,{class:"reward-image",src:e[0],size:"100"}),h("span",null,"+"),h(g.a,{class:"reward-image",src:e[1],size:"100"}))),h("tr",null,h("th",null,"3"),h("th",{class:"icon-rewards"},h(g.a,{class:"reward-image",src:e[2],size:"100"}),h("span",null,"+"),h("div",{class:"reward-image"},h(g.a,{class:"ward-image",src:e[3],size:"100"})))),h("tr",null,h("th",null,"6"),h("th",{class:"chroma"},h(g.a,{class:"chroma-image",src:e[4],size:"100"}))))))))}}]),InformPassRewards}(v.b);function RewardsAchievement_createSuper(e){var t=function RewardsAchievement_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var J=[1,3,6],q=[4,8],Q=function(e){c()(RewardsAchievement,e);var t=RewardsAchievement_createSuper(RewardsAchievement);function RewardsAchievement(){return a()(this,RewardsAchievement),t.apply(this,arguments)}return i()(RewardsAchievement,[{key:"renderWrapperIcon",value:function renderWrapperIcon(e,t){var s=b.a.classNames("wrapper-image",e>t&&"wrapper-incomplete"),r=b.a.classNames("diamond",e>t&&"achievement-incomplete"),a=J.indexOf(e),n=q.indexOf(e);if(a>-1||n>-1)return h("div",{class:"achievement-accents"},a>-1&&h("div",{class:s},h(y.a,{name:"passWrapper",wrapperLevel:a})),h("div",{class:r}))}},{key:"renderAchievementLevelProgression",value:function renderAchievementLevelProgression(e){for(var t=[],s=1;s<=8;s++){var r=b.a.classNames("achievement-progress",s>e&&"achievement-incomplete");t.push(h("div",{class:"achievement-unit"},h("div",{class:r}),this.renderWrapperIcon(s,e)))}return h("div",{class:"achievement"},t)}},{key:"calculateTimelineTitle",value:function calculateTimelineTitle(e){var t=this.props,s=t.selectedPass;if(t.isTeamPass){var r=e?"rewards.teamPass.passTitleComplete":"rewards.teamPass.passTitle";return w.a.translate(r,{league:s.name})}var a=e?"rewards.passes.fanPassComplete":"rewards.passes.fanPass";return w.a.translate(a)}},{key:"calculateTimelineDescription",value:function calculateTimelineDescription(e){var t=this.props,s=t.selectedPass,r=t.isTeamPass,a=w.a.date(this.props.missionsExpiry);return e?w.a.translate("rewards.passes.passComplete"):r?w.a.translate("rewards.teamPass.passDescription",{league:s.name,time:a.hourAndMinute,date:a.dayAndMonth}):w.a.translate("rewards.fanPass.passDescription",{time:a.hourAndMinute,date:a.dayAndMonth})}},{key:"render",value:function render(){var e=this.props,t=e.selectedPass,s=e.isTeamPass,r=t.passMissions.progression.missionsCompleted,a=8===r,n=this.calculateTimelineTitle(a),i=this.calculateTimelineDescription(a),o=s?t.type:"fan";return h("div",{class:this.constructor.name},h("div",{class:"achievement-title"},n),h("div",{class:"achievement-description"},h("p",null,i,h(Y,{passType:o}))),this.renderAchievementLevelProgression(r),h("div",{class:"mission-summation"},w.a.translate("rewards.missionsCompleted.outOf",{completed:r,total:8})))}}]),RewardsAchievement}(v.b);function RewardsPasses_createSuper(e){var t=function RewardsPasses_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var X=function(e){c()(RewardsPasses,e);var t=RewardsPasses_createSuper(RewardsPasses);function RewardsPasses(e){var s;a()(this,RewardsPasses),s=t.call(this,e);var r=e.activePasses;return s.state={selectedPass:r&&r.length&&r[0]},s}return i()(RewardsPasses,[{key:"componentWillMount",value:function componentWillMount(){this.addListeners()}},{key:"addListeners",value:function addListeners(){var e=this;this.onPassSelectedHandler=function(t){return e.setState({selectedPass:t,accordionExpanded:!1})},this.onAccordionExpandedHandler=function(){return e.setState({accordionExpanded:!e.state.accordionExpanded})}}},{key:"renderPassColumn",value:function renderPassColumn(){var e=this.props.morePassesAvailable;return h("div",{class:"pass-column"},this.renderPassSummaries(),h("div",{class:"passes-available"},e&&w.a.translate("rewards.passes.addPass")))}},{key:"renderPassSummaries",value:function renderPassSummaries(){var e=this;return this.props.activePasses.map((function(t){return h(V,{columnItem:!0,expanded:e.state.accordionExpanded,selected:b.a.getDeepValue(e.state,"selectedPass.name")===(t&&t.name),activePass:t,onPassSelectedHandler:e.onPassSelectedHandler})}))}},{key:"renderAccordion",value:function renderAccordion(){return h("div",{class:"accordion"},h(V,{selected:!0,expanded:this.state.accordionExpanded,activePass:this.state.selectedPass,onPassSelectedHandler:this.onAccordionExpandedHandler}))}},{key:"renderMissionsLoading",value:function renderMissionsLoading(){var e=h("span",{class:"pass-type"},w.a.translate(this.props.isTeamPass?"rewards.passes.teamPass":"rewards.passes.fanPass"));return h("div",{class:"missions-loading"},h(g.a,{src:"/rewards/missions-loading.png",class:"image",size:"150"}),h("div",{class:"title"},w.a.translate("rewards.passes.loading.title")),h("div",{class:"description"},w.a.translate("rewards.passes.loading.description",{pass:e})))}},{key:"getTimeOffsetString",value:function getTimeOffsetString(e){var t=new Date(e).getTime()-Date.now(),s=t/b.a.times.DAY;if(s>=1)return w.a.translate("date.days",{time:Math.floor(s)});var r=t/b.a.times.HOUR,a=r>=0?Math.floor(r):0,n=(t-=a*b.a.times.HOUR)/b.a.times.MINUTE,i=n>=0?Math.floor(n):0;return(a<10?"0":"")+a+":"+((i<10?"0":"")+i+":00")}},{key:"calculatePassMissionDescription",value:function calculatePassMissionDescription(e,t,s){var r=b.a.getDeepValue(this.state,"selectedPass.passMissions.nextActiveMissionDate"),a="";return 0===e?s?a=w.a.translate("rewards.passes.noMissionsSplit"):void 0!==r&&(a=w.a.translate("rewards.passes.noActiveMissions",{time:this.getTimeOffsetString(r)})):a=w.a.translate("rewards."+t+".missionComplete"),a}},{key:"renderNoMissions",value:function renderNoMissions(e,t,s){return h("div",{class:"no-missions"},h(g.a,{class:"img",src:s,size:"150"}),h("div",{class:"text-encouragement"},w.a.translate(e)),h("div",{class:"message-body"},w.a.translate(t)))}},{key:"renderActiveMissions",value:function renderActiveMissions(e,t,s){return 0!==s?t&&0!==t.length&&h(F,{item:t[0],key:t[0].id,renderCompleted:!1}):t&&this.renderNoMissions("rewards.noActive.title",e?"rewards.noMissions":"rewards.noActiveMissions","/rewards/no-weekly-missions.png")}},{key:"renderAchievementLevelProgression",value:function renderAchievementLevelProgression(){var e=b.a.getDeepValue(this.state,"selectedPass.passMissions.progression.levels");if(!e||0===e.length)return h("div",{class:"pass-missions"},this.renderMissionsLoading());var t=b.a.getDeepValue(this.state,"selectedPass.passMissions.active"),s=this.props.isTeamPass?"teamPass":"fanPass",r=b.a.getDeepValue(this.state,"selectedPass.passMissions.active.length"),a=8===b.a.getDeepValue(this.state,"selectedPass.passMissions.progression.missionsCompleted"),n=this.calculatePassMissionDescription(r,s,a);return h("div",{class:"pass-missions"},h(Q,{selectedPass:this.state.selectedPass,isTeamPass:this.props.isTeamPass,missionsExpiry:this.props.missionsExpiry}),h("div",{class:"pass-mission-info"},h("div",{class:"pass-mission-title"},w.a.translate("rewards."+s+".missionTitle",{league:this.state.selectedPass.name})),h("div",{class:"pass-mission-description"},n)),h("div",{class:"pass-mission"},this.renderActiveMissions(a,t,r)))}},{key:"render",value:function render(){var e=this.props,t=e.activePasses,s=e.showSummary;return t&&0!==t.length?h("div",{class:this.constructor.name},this.props.isTeamPass&&this.renderAccordion(),s&&this.renderPassColumn(),this.renderAchievementLevelProgression()):h("div",{class:this.constructor.name},h(z,{isTeamPass:this.props.isTeamPass}))}}]),RewardsPasses}(v.b),Z=s(64);function RewardsLoggedIn_createSuper(e){var t=function RewardsLoggedIn_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p()(e);if(t){var a=p()(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return d()(this,s)}}var G=Date.parse("2019-09-19T06:59:59Z"),$=G-Date.now()>0,ee=function(e){c()(RewardsLoggedIn,e);var t=RewardsLoggedIn_createSuper(RewardsLoggedIn);function RewardsLoggedIn(){var e;return a()(this,RewardsLoggedIn),(e=t.call(this)).log=new v.c(e.constructor.name),e.viewedPassOverlay=JSON.parse(window.localStorage.getItem("rewards-viewed-pass-overlay"))||{},e.viewedPassCelebrations=JSON.parse(window.localStorage.getItem("rewards-viewed-pass-celebrations"))||{},e.puuid=m.a.getPuuid(),e.viewedPassOverlayByUser=e.viewedPassOverlay[e.puuid]||!1,e.viewedPassCelebrationsByUser=e.viewedPassCelebrations[e.puuid]||[],e.addListeners(),e}return i()(RewardsLoggedIn,[{key:"addListeners",value:function addListeners(){var e=this;v.j.onChange("userAccount",this.userAccountListener=function(t){return e.setState(t)}),this.blurRemovalHandler=function(){return e.setState({blurEnabled:!1})},this.fetchPassInfo=function(){return U.a.fetchPassInfo().then((function(t){var s=!!b.a.getCookie("isFanPass"),r=b.a.getDeepValue(t,"active.team.availableForPurchase")&&!s,a=b.a.getDeepValue(t,"active."+(r?"team":"fan")),n=t.actionable&&t.actionable.length>0,i=a.passes&&a.passes.length>0,o=e.getNextCelebratedAchievementLevel(a.passes),c=o&&e.getPassContainingAchievementLevel(a.passes,o);e.setState({actionableTeamPasses:t.actionable,activePasses:a.passes,ownsRewardsPass:n||i,morePassesAvailable:a.morePassesAvailable,isTeamPass:r,passFetched:!0,hasViewedPassOverlay:e.viewedPassOverlayByUser,celebratedAchievementLevel:o,celebratedPass:c})})).catch((function(t){e.log.error(t)}))},this.onTeamPassSelected=function(){return W.a.fetchPlayerEntitlements().then((function(){return e.fetchPassInfo()})).catch((function(t){e.log.error(t)}))},v.j.onChange("webSessionClient.ready",this.onWebSessionReadyListener=function(t){t&&$&&e.fetchPassInfo()}),this.watchStatsHandler=function(t){return e.setState({watchStats:t})},this.onTabSelectedHandler=function(t){return e.setState({selectedTab:t})},this.onPassOverlayDismissed=function(){e.viewedPassOverlayByUser=!0,e.viewedPassOverlay[e.puuid]=e.viewedPassOverlayByUser,window.localStorage.setItem("rewards-viewed-pass-overlay",JSON.stringify(e.viewedPassOverlay)),e.setState({hasViewedPassOverlay:!0})},this.onCelebrationOverlayDismissed=function(){e.viewedPassCelebrationsByUser.push(e.state.celebratedAchievementLevel.id),e.viewedPassCelebrations[e.puuid]=e.viewedPassCelebrationsByUser,window.localStorage.setItem("rewards-viewed-pass-celebrations",JSON.stringify(e.viewedPassCelebrations));var t=e.state.activePasses,s=e.getNextCelebratedAchievementLevel(t),r=e.getPassContainingAchievementLevel(t,s);e.setState({celebratedAchievementLevel:s,celebratedPass:r})},this.afterCelebrationHandler=function(){!e.state.celebrationHandled&&e.setState({celebrationHandled:!0})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.removeListeners(),Object(v.a)(document.body).removeClass("no-scroll")}},{key:"isFinalAchievementLevel",value:function isFinalAchievementLevel(e,t){return null!=e&&null!=t&&e.passMissions.progression.levels.indexOf(t)===e.passMissions.progression.levels.length-1}},{key:"getNextCelebratedAchievementLevel",value:function getNextCelebratedAchievementLevel(e){var t=this;if(e&&0!==e.length){var s=e.map((function(e){return e.passMissions.progression.levels.filter((function(){}